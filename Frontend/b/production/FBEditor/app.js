var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.header){Ext.grid.header={}}if(!Ext.grid.locking){Ext.grid.locking={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.locale){Ext.locale={}}if(!Ext.locale.ru){Ext.locale.ru={}}if(!Ext.locale.ru.form){Ext.locale.ru.form={}}if(!Ext.locale.ru.form.field){Ext.locale.ru.form.field={}}if(!Ext.locale.ru.grid){Ext.locale.ru.grid={}}if(!Ext.locale.ru.grid.header){Ext.locale.ru.grid.header={}}if(!Ext.locale.ru.grid.plugin){Ext.locale.ru.grid.plugin={}}if(!Ext.locale.ru.picker){Ext.locale.ru.picker={}}if(!Ext.locale.ru.tab){Ext.locale.ru.tab={}}if(!Ext.locale.ru.toolbar){Ext.locale.ru.toolbar={}}if(!Ext.locale.ru.view){Ext.locale.ru.view={}}if(!Ext.locale.ru.window){Ext.locale.ru.window={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.picker){Ext.picker={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.state){Ext.state={}}if(!Ext.tab){Ext.tab={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.tree){Ext.tree={}}if(!Ext.util){Ext.util={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var ExtThemeNeptune=ExtThemeNeptune||{};if(!ExtThemeNeptune.form){ExtThemeNeptune.form={}}if(!ExtThemeNeptune.form.field){ExtThemeNeptune.form.field={}}if(!ExtThemeNeptune.layout){ExtThemeNeptune.layout={}}if(!ExtThemeNeptune.layout.component){ExtThemeNeptune.layout.component={}}if(!ExtThemeNeptune.menu){ExtThemeNeptune.menu={}}if(!ExtThemeNeptune.panel){ExtThemeNeptune.panel={}}if(!ExtThemeNeptune.picker){ExtThemeNeptune.picker={}}if(!ExtThemeNeptune.resizer){ExtThemeNeptune.resizer={}}if(!ExtThemeNeptune.toolbar){ExtThemeNeptune.toolbar={}}var FBEditor=FBEditor||{};if(!FBEditor.FB3){FBEditor.FB3={}}if(!FBEditor.FB3.rels){FBEditor.FB3.rels={}}if(!FBEditor.command){FBEditor.command={}}if(!FBEditor.converter){FBEditor.converter={}}if(!FBEditor.converter.contentTypes){FBEditor.converter.contentTypes={}}if(!FBEditor.converter.desc){FBEditor.converter.desc={}}if(!FBEditor.desc){FBEditor.desc={}}if(!FBEditor.editor){FBEditor.editor={}}if(!FBEditor.editor.command){FBEditor.editor.command={}}if(!FBEditor.editor.command.a){FBEditor.editor.command.a={}}if(!FBEditor.editor.command.annotation){FBEditor.editor.command.annotation={}}if(!FBEditor.editor.command.blockquote){FBEditor.editor.command.blockquote={}}if(!FBEditor.editor.command.br){FBEditor.editor.command.br={}}if(!FBEditor.editor.command.code){FBEditor.editor.command.code={}}if(!FBEditor.editor.command.div){FBEditor.editor.command.div={}}if(!FBEditor.editor.command.em){FBEditor.editor.command.em={}}if(!FBEditor.editor.command.epigraph){FBEditor.editor.command.epigraph={}}if(!FBEditor.editor.command.img){FBEditor.editor.command.img={}}if(!FBEditor.editor.command.li){FBEditor.editor.command.li={}}if(!FBEditor.editor.command.note){FBEditor.editor.command.note={}}if(!FBEditor.editor.command.notebody){FBEditor.editor.command.notebody={}}if(!FBEditor.editor.command.notes){FBEditor.editor.command.notes={}}if(!FBEditor.editor.command.ol){FBEditor.editor.command.ol={}}if(!FBEditor.editor.command.p){FBEditor.editor.command.p={}}if(!FBEditor.editor.command.poem){FBEditor.editor.command.poem={}}if(!FBEditor.editor.command.pre){FBEditor.editor.command.pre={}}if(!FBEditor.editor.command.section){FBEditor.editor.command.section={}}if(!FBEditor.editor.command.spacing){FBEditor.editor.command.spacing={}}if(!FBEditor.editor.command.stanza){FBEditor.editor.command.stanza={}}if(!FBEditor.editor.command.strikethrough){FBEditor.editor.command.strikethrough={}}if(!FBEditor.editor.command.strong){FBEditor.editor.command.strong={}}if(!FBEditor.editor.command.styleholder){FBEditor.editor.command.styleholder={}}if(!FBEditor.editor.command.sub){FBEditor.editor.command.sub={}}if(!FBEditor.editor.command.subscription){FBEditor.editor.command.subscription={}}if(!FBEditor.editor.command.subtitle){FBEditor.editor.command.subtitle={}}if(!FBEditor.editor.command.sup){FBEditor.editor.command.sup={}}if(!FBEditor.editor.command.table){FBEditor.editor.command.table={}}if(!FBEditor.editor.command.text){FBEditor.editor.command.text={}}if(!FBEditor.editor.command.title){FBEditor.editor.command.title={}}if(!FBEditor.editor.command.ul){FBEditor.editor.command.ul={}}if(!FBEditor.editor.command.underline){FBEditor.editor.command.underline={}}if(!FBEditor.editor.element){FBEditor.editor.element={}}if(!FBEditor.editor.element.a){FBEditor.editor.element.a={}}if(!FBEditor.editor.element.annotation){FBEditor.editor.element.annotation={}}if(!FBEditor.editor.element.b){FBEditor.editor.element.b={}}if(!FBEditor.editor.element.blockquote){FBEditor.editor.element.blockquote={}}if(!FBEditor.editor.element.body){FBEditor.editor.element.body={}}if(!FBEditor.editor.element.br){FBEditor.editor.element.br={}}if(!FBEditor.editor.element.code){FBEditor.editor.element.code={}}if(!FBEditor.editor.element.div){FBEditor.editor.element.div={}}if(!FBEditor.editor.element.em){FBEditor.editor.element.em={}}if(!FBEditor.editor.element.epigraph){FBEditor.editor.element.epigraph={}}if(!FBEditor.editor.element.fb3body){FBEditor.editor.element.fb3body={}}if(!FBEditor.editor.element.header){FBEditor.editor.element.header={}}if(!FBEditor.editor.element.i){FBEditor.editor.element.i={}}if(!FBEditor.editor.element.img){FBEditor.editor.element.img={}}if(!FBEditor.editor.element.li){FBEditor.editor.element.li={}}if(!FBEditor.editor.element.marker){FBEditor.editor.element.marker={}}if(!FBEditor.editor.element.marker.img){FBEditor.editor.element.marker.img={}}if(!FBEditor.editor.element.note){FBEditor.editor.element.note={}}if(!FBEditor.editor.element.notebody){FBEditor.editor.element.notebody={}}if(!FBEditor.editor.element.notes){FBEditor.editor.element.notes={}}if(!FBEditor.editor.element.ol){FBEditor.editor.element.ol={}}if(!FBEditor.editor.element.p){FBEditor.editor.element.p={}}if(!FBEditor.editor.element.poem){FBEditor.editor.element.poem={}}if(!FBEditor.editor.element.pre){FBEditor.editor.element.pre={}}if(!FBEditor.editor.element.section){FBEditor.editor.element.section={}}if(!FBEditor.editor.element.spacing){FBEditor.editor.element.spacing={}}if(!FBEditor.editor.element.span){FBEditor.editor.element.span={}}if(!FBEditor.editor.element.stanza){FBEditor.editor.element.stanza={}}if(!FBEditor.editor.element.strikethrough){FBEditor.editor.element.strikethrough={}}if(!FBEditor.editor.element.strong){FBEditor.editor.element.strong={}}if(!FBEditor.editor.element.sub){FBEditor.editor.element.sub={}}if(!FBEditor.editor.element.subscription){FBEditor.editor.element.subscription={}}if(!FBEditor.editor.element.subtitle){FBEditor.editor.element.subtitle={}}if(!FBEditor.editor.element.sup){FBEditor.editor.element.sup={}}if(!FBEditor.editor.element.table){FBEditor.editor.element.table={}}if(!FBEditor.editor.element.td){FBEditor.editor.element.td={}}if(!FBEditor.editor.element.text){FBEditor.editor.element.text={}}if(!FBEditor.editor.element.title){FBEditor.editor.element.title={}}if(!FBEditor.editor.element.tr){FBEditor.editor.element.tr={}}if(!FBEditor.editor.element.u){FBEditor.editor.element.u={}}if(!FBEditor.editor.element.ul){FBEditor.editor.element.ul={}}if(!FBEditor.editor.element.undefined){FBEditor.editor.element.undefined={}}if(!FBEditor.editor.element.underline){FBEditor.editor.element.underline={}}if(!FBEditor.editor.schema){FBEditor.editor.schema={}}if(!FBEditor.file){FBEditor.file={}}if(!FBEditor.model){FBEditor.model={}}if(!FBEditor.model.resource){FBEditor.model.resource={}}if(!FBEditor.override){FBEditor.override={}}if(!FBEditor.override.form){FBEditor.override.form={}}if(!FBEditor.override.form.field){FBEditor.override.form.field={}}if(!FBEditor.override.panel){FBEditor.override.panel={}}if(!FBEditor.override.picker){FBEditor.override.picker={}}if(!FBEditor.override.tree){FBEditor.override.tree={}}if(!FBEditor.resource){FBEditor.resource={}}if(!FBEditor.route){FBEditor.route={}}if(!FBEditor.scroll){FBEditor.scroll={}}if(!FBEditor.store){FBEditor.store={}}if(!FBEditor.store.desc){FBEditor.store.desc={}}if(!FBEditor.store.desc.relations){FBEditor.store.desc.relations={}}if(!FBEditor.store.resource){FBEditor.store.resource={}}if(!FBEditor.util){FBEditor.util={}}if(!FBEditor.util.xml){FBEditor.util.xml={}}if(!FBEditor.ux){FBEditor.ux={}}if(!FBEditor.view){FBEditor.view={}}if(!FBEditor.view.button){FBEditor.view.button={}}if(!FBEditor.view.button.desc){FBEditor.view.button.desc={}}if(!FBEditor.view.button.editor){FBEditor.view.button.editor={}}if(!FBEditor.view.container){FBEditor.view.container={}}if(!FBEditor.view.container.desc){FBEditor.view.container.desc={}}if(!FBEditor.view.container.desc.search){FBEditor.view.container.desc.search={}}if(!FBEditor.view.container.desc.search.arts){FBEditor.view.container.desc.search.arts={}}if(!FBEditor.view.container.desc.search.persons){FBEditor.view.container.desc.search.persons={}}if(!FBEditor.view.container.desc.search.sequence){FBEditor.view.container.desc.search.sequence={}}if(!FBEditor.view.container.desc.search.tag){FBEditor.view.container.desc.search.tag={}}if(!FBEditor.view.field){FBEditor.view.field={}}if(!FBEditor.view.field.combosearch){FBEditor.view.field.combosearch={}}if(!FBEditor.view.field.country){FBEditor.view.field.country={}}if(!FBEditor.view.field.datetime){FBEditor.view.field.datetime={}}if(!FBEditor.view.field.lang){FBEditor.view.field.lang={}}if(!FBEditor.view.field.textfieldclear){FBEditor.view.field.textfieldclear={}}if(!FBEditor.view.form){FBEditor.view.form={}}if(!FBEditor.view.form.desc){FBEditor.view.form.desc={}}if(!FBEditor.view.form.desc.annotation){FBEditor.view.form.desc.annotation={}}if(!FBEditor.view.form.desc.bookClass){FBEditor.view.form.desc.bookClass={}}if(!FBEditor.view.form.desc.classification){FBEditor.view.form.desc.classification={}}if(!FBEditor.view.form.desc.classification.setting){FBEditor.view.form.desc.classification.setting={}}if(!FBEditor.view.form.desc.classification.target){FBEditor.view.form.desc.classification.target={}}if(!FBEditor.view.form.desc.classification.target.ageMin){FBEditor.view.form.desc.classification.target.ageMin={}}if(!FBEditor.view.form.desc.customInfo){FBEditor.view.form.desc.customInfo={}}if(!FBEditor.view.form.desc.date){FBEditor.view.form.desc.date={}}if(!FBEditor.view.form.desc.documentInfo){FBEditor.view.form.desc.documentInfo={}}if(!FBEditor.view.form.desc.documentInfo.createdDate){FBEditor.view.form.desc.documentInfo.createdDate={}}if(!FBEditor.view.form.desc.documentInfo.editor){FBEditor.view.form.desc.documentInfo.editor={}}if(!FBEditor.view.form.desc.documentInfo.isbn){FBEditor.view.form.desc.documentInfo.isbn={}}if(!FBEditor.view.form.desc.field){FBEditor.view.form.desc.field={}}if(!FBEditor.view.form.desc.field.combobox){FBEditor.view.form.desc.field.combobox={}}if(!FBEditor.view.form.desc.field.combobox.required){FBEditor.view.form.desc.field.combobox.required={}}if(!FBEditor.view.form.desc.field.link){FBEditor.view.form.desc.field.link={}}if(!FBEditor.view.form.desc.field.link.uuid){FBEditor.view.form.desc.field.link.uuid={}}if(!FBEditor.view.form.desc.field.number){FBEditor.view.form.desc.field.number={}}if(!FBEditor.view.form.desc.field.number.required){FBEditor.view.form.desc.field.number.required={}}if(!FBEditor.view.form.desc.field.text){FBEditor.view.form.desc.field.text={}}if(!FBEditor.view.form.desc.field.text.required){FBEditor.view.form.desc.field.text.required={}}if(!FBEditor.view.form.desc.field.textarea){FBEditor.view.form.desc.field.textarea={}}if(!FBEditor.view.form.desc.field.textarea.required){FBEditor.view.form.desc.field.textarea.required={}}if(!FBEditor.view.form.desc.field.time){FBEditor.view.form.desc.field.time={}}if(!FBEditor.view.form.desc.field.time.required){FBEditor.view.form.desc.field.time.required={}}if(!FBEditor.view.form.desc.fieldset){FBEditor.view.form.desc.fieldset={}}if(!FBEditor.view.form.desc.fieldset.annotation){FBEditor.view.form.desc.fieldset.annotation={}}if(!FBEditor.view.form.desc.fieldset.history){FBEditor.view.form.desc.fieldset.history={}}if(!FBEditor.view.form.desc.fieldset.periodical){FBEditor.view.form.desc.fieldset.periodical={}}if(!FBEditor.view.form.desc.fieldset.preamble){FBEditor.view.form.desc.fieldset.preamble={}}if(!FBEditor.view.form.desc.fieldset.publishInfo){FBEditor.view.form.desc.fieldset.publishInfo={}}if(!FBEditor.view.form.desc.history){FBEditor.view.form.desc.history={}}if(!FBEditor.view.form.desc.htmleditor){FBEditor.view.form.desc.htmleditor={}}if(!FBEditor.view.form.desc.isbn){FBEditor.view.form.desc.isbn={}}if(!FBEditor.view.form.desc.periodical){FBEditor.view.form.desc.periodical={}}if(!FBEditor.view.form.desc.preamble){FBEditor.view.form.desc.preamble={}}if(!FBEditor.view.form.desc.publishInfo){FBEditor.view.form.desc.publishInfo={}}if(!FBEditor.view.form.desc.publishInfo.biblio){FBEditor.view.form.desc.publishInfo.biblio={}}if(!FBEditor.view.form.desc.publishInfo.isbn){FBEditor.view.form.desc.publishInfo.isbn={}}if(!FBEditor.view.form.desc.publishInfo.sequence){FBEditor.view.form.desc.publishInfo.sequence={}}if(!FBEditor.view.form.desc.publishInfo.title){FBEditor.view.form.desc.publishInfo.title={}}if(!FBEditor.view.form.desc.relations){FBEditor.view.form.desc.relations={}}if(!FBEditor.view.form.desc.relations.object){FBEditor.view.form.desc.relations.object={}}if(!FBEditor.view.form.desc.relations.object.search){FBEditor.view.form.desc.relations.object.search={}}if(!FBEditor.view.form.desc.relations.object.search.name){FBEditor.view.form.desc.relations.object.search.name={}}if(!FBEditor.view.form.desc.relations.subject){FBEditor.view.form.desc.relations.subject={}}if(!FBEditor.view.form.desc.relations.subject.name){FBEditor.view.form.desc.relations.subject.name={}}if(!FBEditor.view.form.desc.relations.subject.name.main){FBEditor.view.form.desc.relations.subject.name.main={}}if(!FBEditor.view.form.desc.relations.subject.radio){FBEditor.view.form.desc.relations.subject.radio={}}if(!FBEditor.view.form.desc.relations.subject.search){FBEditor.view.form.desc.relations.subject.search={}}if(!FBEditor.view.form.desc.relations.subject.search.name){FBEditor.view.form.desc.relations.subject.search.name={}}if(!FBEditor.view.form.desc.relations.subject.search.name.window){FBEditor.view.form.desc.relations.subject.search.name.window={}}if(!FBEditor.view.form.desc.relations.subject.title){FBEditor.view.form.desc.relations.subject.title={}}if(!FBEditor.view.form.desc.searchField){FBEditor.view.form.desc.searchField={}}if(!FBEditor.view.form.desc.sequence){FBEditor.view.form.desc.sequence={}}if(!FBEditor.view.form.desc.sequence.search){FBEditor.view.form.desc.sequence.search={}}if(!FBEditor.view.form.desc.sequence.search.name){FBEditor.view.form.desc.sequence.search.name={}}if(!FBEditor.view.form.desc.sequence.search.name.window){FBEditor.view.form.desc.sequence.search.name.window={}}if(!FBEditor.view.form.desc.subject){FBEditor.view.form.desc.subject={}}if(!FBEditor.view.form.desc.subject.field){FBEditor.view.form.desc.subject.field={}}if(!FBEditor.view.form.desc.subject.tag){FBEditor.view.form.desc.subject.tag={}}if(!FBEditor.view.form.desc.title){FBEditor.view.form.desc.title={}}if(!FBEditor.view.form.desc.title.alt){FBEditor.view.form.desc.title.alt={}}if(!FBEditor.view.form.desc.titleArt){FBEditor.view.form.desc.titleArt={}}if(!FBEditor.view.form.desc.written){FBEditor.view.form.desc.written={}}if(!FBEditor.view.form.desc.written.date){FBEditor.view.form.desc.written.date={}}if(!FBEditor.view.form.desc.written.date.date){FBEditor.view.form.desc.written.date.date={}}if(!FBEditor.view.form.desc.written.date.publicated){FBEditor.view.form.desc.written.date.publicated={}}if(!FBEditor.view.form.desc.written.date.translated){FBEditor.view.form.desc.written.date.translated={}}if(!FBEditor.view.image){FBEditor.view.image={}}if(!FBEditor.view.image.editor){FBEditor.view.image.editor={}}if(!FBEditor.view.main){FBEditor.view.main={}}if(!FBEditor.view.panel){FBEditor.view.panel={}}if(!FBEditor.view.panel.cover){FBEditor.view.panel.cover={}}if(!FBEditor.view.panel.editor){FBEditor.view.panel.editor={}}if(!FBEditor.view.panel.editor.viewport){FBEditor.view.panel.editor.viewport={}}if(!FBEditor.view.panel.empty){FBEditor.view.panel.empty={}}if(!FBEditor.view.panel.filename){FBEditor.view.panel.filename={}}if(!FBEditor.view.panel.filename.display){FBEditor.view.panel.filename.display={}}if(!FBEditor.view.panel.filename.field){FBEditor.view.panel.filename.field={}}if(!FBEditor.view.panel.main){FBEditor.view.panel.main={}}if(!FBEditor.view.panel.main.content){FBEditor.view.panel.main.content={}}if(!FBEditor.view.panel.main.navigation){FBEditor.view.panel.main.navigation={}}if(!FBEditor.view.panel.main.props){FBEditor.view.panel.main.props={}}if(!FBEditor.view.panel.main.props.body){FBEditor.view.panel.main.props.body={}}if(!FBEditor.view.panel.main.props.body.editor){FBEditor.view.panel.main.props.body.editor={}}if(!FBEditor.view.panel.main.props.body.editor.a){FBEditor.view.panel.main.props.body.editor.a={}}if(!FBEditor.view.panel.main.props.body.editor.annotation){FBEditor.view.panel.main.props.body.editor.annotation={}}if(!FBEditor.view.panel.main.props.body.editor.blockquote){FBEditor.view.panel.main.props.body.editor.blockquote={}}if(!FBEditor.view.panel.main.props.body.editor.div){FBEditor.view.panel.main.props.body.editor.div={}}if(!FBEditor.view.panel.main.props.body.editor.div.marker){FBEditor.view.panel.main.props.body.editor.div.marker={}}if(!FBEditor.view.panel.main.props.body.editor.div.marker.img){FBEditor.view.panel.main.props.body.editor.div.marker.img={}}if(!FBEditor.view.panel.main.props.body.editor.epigraph){FBEditor.view.panel.main.props.body.editor.epigraph={}}if(!FBEditor.view.panel.main.props.body.editor.img){FBEditor.view.panel.main.props.body.editor.img={}}if(!FBEditor.view.panel.main.props.body.editor.note){FBEditor.view.panel.main.props.body.editor.note={}}if(!FBEditor.view.panel.main.props.body.editor.notebody){FBEditor.view.panel.main.props.body.editor.notebody={}}if(!FBEditor.view.panel.main.props.body.editor.notes){FBEditor.view.panel.main.props.body.editor.notes={}}if(!FBEditor.view.panel.main.props.body.editor.ol){FBEditor.view.panel.main.props.body.editor.ol={}}if(!FBEditor.view.panel.main.props.body.editor.pre){FBEditor.view.panel.main.props.body.editor.pre={}}if(!FBEditor.view.panel.main.props.body.editor.section){FBEditor.view.panel.main.props.body.editor.section={}}if(!FBEditor.view.panel.main.props.body.editor.stanza){FBEditor.view.panel.main.props.body.editor.stanza={}}if(!FBEditor.view.panel.main.props.body.editor.subscription){FBEditor.view.panel.main.props.body.editor.subscription={}}if(!FBEditor.view.panel.main.props.body.editor.table){FBEditor.view.panel.main.props.body.editor.table={}}if(!FBEditor.view.panel.main.props.body.editor.td){FBEditor.view.panel.main.props.body.editor.td={}}if(!FBEditor.view.panel.main.props.body.editor.title){FBEditor.view.panel.main.props.body.editor.title={}}if(!FBEditor.view.panel.main.props.body.editor.tr){FBEditor.view.panel.main.props.body.editor.tr={}}if(!FBEditor.view.panel.main.props.body.editor.ul){FBEditor.view.panel.main.props.body.editor.ul={}}if(!FBEditor.view.panel.main.props.desc){FBEditor.view.panel.main.props.desc={}}if(!FBEditor.view.panel.main.props.desc.search){FBEditor.view.panel.main.props.desc.search={}}if(!FBEditor.view.panel.main.props.desc.search.arts){FBEditor.view.panel.main.props.desc.search.arts={}}if(!FBEditor.view.panel.main.props.desc.search.persons){FBEditor.view.panel.main.props.desc.search.persons={}}if(!FBEditor.view.panel.main.props.resources){FBEditor.view.panel.main.props.resources={}}if(!FBEditor.view.panel.main.tools){FBEditor.view.panel.main.tools={}}if(!FBEditor.view.panel.resources){FBEditor.view.panel.resources={}}if(!FBEditor.view.panel.resources.control){FBEditor.view.panel.resources.control={}}if(!FBEditor.view.panel.resources.control.selectview){FBEditor.view.panel.resources.control.selectview={}}if(!FBEditor.view.panel.resources.navigation){FBEditor.view.panel.resources.navigation={}}if(!FBEditor.view.panel.resources.tpl){FBEditor.view.panel.resources.tpl={}}if(!FBEditor.view.panel.resources.view){FBEditor.view.panel.resources.view={}}if(!FBEditor.view.panel.toolstab){FBEditor.view.panel.toolstab={}}if(!FBEditor.view.panel.toolstab.file){FBEditor.view.panel.toolstab.file={}}if(!FBEditor.view.panel.toolstab.file.button){FBEditor.view.panel.toolstab.file.button={}}if(!FBEditor.view.panel.toolstab.file.button.open){FBEditor.view.panel.toolstab.file.button.open={}}if(!FBEditor.view.panel.toolstab.file.button.saveas){FBEditor.view.panel.toolstab.file.button.saveas={}}if(!FBEditor.view.panel.toolstab.file.button.savedesc){FBEditor.view.panel.toolstab.file.button.savedesc={}}if(!FBEditor.view.panel.toolstab.main){FBEditor.view.panel.toolstab.main={}}if(!FBEditor.view.panel.toolstab.main.button){FBEditor.view.panel.toolstab.main.button={}}if(!FBEditor.view.panel.toolstab.main.button.a){FBEditor.view.panel.toolstab.main.button.a={}}if(!FBEditor.view.panel.toolstab.main.button.annotation){FBEditor.view.panel.toolstab.main.button.annotation={}}if(!FBEditor.view.panel.toolstab.main.button.blockquote){FBEditor.view.panel.toolstab.main.button.blockquote={}}if(!FBEditor.view.panel.toolstab.main.button.code){FBEditor.view.panel.toolstab.main.button.code={}}if(!FBEditor.view.panel.toolstab.main.button.div){FBEditor.view.panel.toolstab.main.button.div={}}if(!FBEditor.view.panel.toolstab.main.button.em){FBEditor.view.panel.toolstab.main.button.em={}}if(!FBEditor.view.panel.toolstab.main.button.epigraph){FBEditor.view.panel.toolstab.main.button.epigraph={}}if(!FBEditor.view.panel.toolstab.main.button.img){FBEditor.view.panel.toolstab.main.button.img={}}if(!FBEditor.view.panel.toolstab.main.button.note){FBEditor.view.panel.toolstab.main.button.note={}}if(!FBEditor.view.panel.toolstab.main.button.notebody){FBEditor.view.panel.toolstab.main.button.notebody={}}if(!FBEditor.view.panel.toolstab.main.button.notes){FBEditor.view.panel.toolstab.main.button.notes={}}if(!FBEditor.view.panel.toolstab.main.button.ol){FBEditor.view.panel.toolstab.main.button.ol={}}if(!FBEditor.view.panel.toolstab.main.button.poem){FBEditor.view.panel.toolstab.main.button.poem={}}if(!FBEditor.view.panel.toolstab.main.button.pre){FBEditor.view.panel.toolstab.main.button.pre={}}if(!FBEditor.view.panel.toolstab.main.button.section){FBEditor.view.panel.toolstab.main.button.section={}}if(!FBEditor.view.panel.toolstab.main.button.spacing){FBEditor.view.panel.toolstab.main.button.spacing={}}if(!FBEditor.view.panel.toolstab.main.button.strikethrough){FBEditor.view.panel.toolstab.main.button.strikethrough={}}if(!FBEditor.view.panel.toolstab.main.button.strong){FBEditor.view.panel.toolstab.main.button.strong={}}if(!FBEditor.view.panel.toolstab.main.button.sub){FBEditor.view.panel.toolstab.main.button.sub={}}if(!FBEditor.view.panel.toolstab.main.button.subscription){FBEditor.view.panel.toolstab.main.button.subscription={}}if(!FBEditor.view.panel.toolstab.main.button.subtitle){FBEditor.view.panel.toolstab.main.button.subtitle={}}if(!FBEditor.view.panel.toolstab.main.button.sup){FBEditor.view.panel.toolstab.main.button.sup={}}if(!FBEditor.view.panel.toolstab.main.button.table){FBEditor.view.panel.toolstab.main.button.table={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu){FBEditor.view.panel.toolstab.main.button.table.menu={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item){FBEditor.view.panel.toolstab.main.button.table.menu.item={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.delCol){FBEditor.view.panel.toolstab.main.button.table.menu.item.delCol={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.delRow){FBEditor.view.panel.toolstab.main.button.table.menu.item.delRow={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.delTable){FBEditor.view.panel.toolstab.main.button.table.menu.item.delTable={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColNext){FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColNext={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColPrev){FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColPrev={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowNext){FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowNext={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowPrev){FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowPrev={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.insertTable){FBEditor.view.panel.toolstab.main.button.table.menu.item.insertTable={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.joinCells){FBEditor.view.panel.toolstab.main.button.table.menu.item.joinCells={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.item.splitCells){FBEditor.view.panel.toolstab.main.button.table.menu.item.splitCells={}}if(!FBEditor.view.panel.toolstab.main.button.table.menu.size){FBEditor.view.panel.toolstab.main.button.table.menu.size={}}if(!FBEditor.view.panel.toolstab.main.button.title){FBEditor.view.panel.toolstab.main.button.title={}}if(!FBEditor.view.panel.toolstab.main.button.titlebody){FBEditor.view.panel.toolstab.main.button.titlebody={}}if(!FBEditor.view.panel.toolstab.main.button.ul){FBEditor.view.panel.toolstab.main.button.ul={}}if(!FBEditor.view.panel.toolstab.main.button.underline){FBEditor.view.panel.toolstab.main.button.underline={}}if(!FBEditor.view.panel.toolstab.tools){FBEditor.view.panel.toolstab.tools={}}if(!FBEditor.view.panel.toolstab.view){FBEditor.view.panel.toolstab.view={}}if(!FBEditor.view.panel.toolstab.view.button){FBEditor.view.panel.toolstab.view.button={}}if(!FBEditor.view.panel.toolstab.view.button.focusdetachpanels){FBEditor.view.panel.toolstab.view.button.focusdetachpanels={}}if(!FBEditor.view.panel.toolstab.view.button.split){FBEditor.view.panel.toolstab.view.button.split={}}if(!FBEditor.view.panel.treenavigation){FBEditor.view.panel.treenavigation={}}if(!FBEditor.view.panel.treenavigation.body){FBEditor.view.panel.treenavigation.body={}}if(!FBEditor.view.panel.treenavigation.desc){FBEditor.view.panel.treenavigation.desc={}}if(!FBEditor.view.window){FBEditor.view.window={}}if(!FBEditor.view.window.img){FBEditor.view.window.img={}}if(!FBEditor.view.window.resource){FBEditor.view.window.resource={}}if(!FBEditor.webworker){FBEditor.webworker={}}if(!FBEditor.webworker.httpRequest){FBEditor.webworker.httpRequest={}}if(!FBEditor.webworker.xmllint){FBEditor.webworker.xmllint={}}if(!FBEditor.xsd){FBEditor.xsd={}}if(!FBEditor.xsl){FBEditor.xsl={}}(function(e){var b,m=["constructor","toString","valueOf","toLocaleString"],f={},q={},d=0,n,k,s,h,a,g,o,c,j,r=function(){var v,u;k=Ext.Base;s=Ext.ClassManager;for(v=m.length;v-->0;){u=(1<<v);q[f[u]=m[v]]=u}for(v in q){d|=q[v]}d=~d;Function.prototype.$isFunction=1;j=!!(s&&s.addAlias);h=Ext.Class.getPreprocessor("config").fn;a=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;g=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn;c=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;o=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;b=k.$staticMembers;if(!b){b=[];for(n in k){if(k.hasOwnProperty(n)){b.push(n)}}}e.derive=l;return l.apply(this,arguments)},t=function(D,z,C){var w=C.enumerableMembers,A=D.prototype,y,B,x,v,u;if(!z){return}if(j){D.addMembers(z)}else{for(y in z){v=z[y];if(v&&v.$isFunction&&!v.$isClass&&v!==Ext.emptyFn&&v!==Ext.identityFn){u=A.hasOwnProperty(y)&&A[y];if(u){v.$previous=u}A[y]=B=v;B.$owner=D;B.$name=y}else{A[y]=v}}for(x=1;w;x<<=1){if(w&x){w&=~x;y=f[x];A[y]=B=z[y];B.$owner=D;B.$name=y}}}},p=function(y){var u=function x(){return y.apply(this,arguments)||null},w,v;u.prototype=Ext.Object.chain(y.prototype);for(w=b.length;w-->0;){v=b[w];u[v]=k[v]}return u},l=function(z,C,X,u,B,L,A,U,x,N,G){var v=function F(){return this.constructor.apply(this,arguments)||null},W=v,w={enumerableMembers:u&d,onCreated:G,onBeforeCreated:t,aliases:U},J=X.alternateClassName||[],S=Ext.global,O,R,T,I,Q,aa,Z,y,P,E,V,M,H,Y,K=s.alternateToName||s.maps.alternateToName,D=s.nameToAlternates||s.maps.nameToAlternates;for(T=b.length;T-->0;){Z=b[T];v[Z]=k[Z]}if(X.$isFunction){X=X(v)}w.data=X;E=X.statics;delete X.statics;X.$className=z;if("$className" in X){v.$className=X.$className}v.extend(C);P=v.prototype;v.xtype=X.xtype=B[0];if(B){P.xtypes=B}P.xtypesChain=L;P.xtypesMap=A;X.alias=U;W.triggerExtended(v,X,w);if(X.onClassExtended){v.onExtended(X.onClassExtended,v);delete X.onClassExtended}if(X.privates&&c){c.call(Ext.Class,v,X)}if(E){if(j){v.addStatics(E)}else{for(V in E){if(E.hasOwnProperty(V)){Y=E[V];if(Y&&Y.$isFunction&&!Y.$isClass&&Y!==Ext.emptyFn&&Y!==Ext.identityFn){v[V]=H=Y;H.$owner=v;H.$name=V}v[V]=Y}}}}if(X.inheritableStatics){v.addInheritableStatics(X.inheritableStatics);delete X.inheritableStatics}if(P.onClassExtended){W.onExtended(P.onClassExtended,W);delete P.onClassExtended}if(X.platformConfig&&g){g.call(Ext.Class,v,X);delete X.platformConfig}if(X.config){h.call(Ext.Class,v,X)}if(X.cachedConfig&&a){a.call(Ext.Class,v,X);delete X.cachedConfig}if(X.deprecated&&o){o.call(Ext.ClassManager,z,v,X)}w.onBeforeCreated(v,w.data,w);for(T=0,Q=x&&x.length;T<Q;++T){v.mixin.apply(v,x[T])}for(T=0,Q=U.length;T<Q;T++){O=U[T];s.setAlias?s.setAlias(v,O):s.addAlias(v,O)}if(X.singleton){W=new v()}if(!(J instanceof Array)){J=[J]}M=s.getName(W);for(T=0,I=J.length;T<I;T++){R=J[T];s.classes[R]=W;if(j){s.addAlternate(v,R)}else{if(M){K[R]=M;J=D[M]||(D[M]=[]);J.push(R)}}}for(T=0,Q=N.length;T<Q;T+=2){aa=N[T];if(!aa){aa=S}aa[N[T+1]]=W}s.classes[z]=W;if(!j){if(M&&M!==z){K[z]=M;J=D[M]||(D[M]=[]);J.push(z)}}delete P.alternateClassName;if(w.onCreated){w.onCreated.call(W,W)}if(z){s.triggerCreated(z)}return W};e.derive=r}(Ext.cmd={}));var Ext=Ext||{};Ext._startTime=Date.now?Date.now():(+new Date());(function(){var b=this,g=Object.prototype,c=g.toString,m=["valueOf","toLocaleString","toString","constructor"],k=function(){},f=function(){},h=function(n){return n},l=function(){var n=l.caller.caller;return n.$owner.prototype[n.$name].apply(this,arguments)},a=Ext.manifest||{},j,d=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,e=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=b;k.$nullFn=h.$nullFn=k.$emptyFn=h.$identityFn=f.$nullFn=true;f.$privacy="framework";Ext.suspendLayouts=Ext.resumeLayouts=k;for(j in {toString:1}){m=null}Ext.enumerables=m;Ext.apply=function(q,p,s){if(s){Ext.apply(q,s)}if(q&&p&&typeof p==="object"){var r,o,n;for(r in p){q[r]=p[r]}if(m){for(o=m.length;o--;){n=m[o];if(p.hasOwnProperty(n)){q[n]=p[n]}}}}return q};Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:false,enableListenerCollection:true,name:Ext.sandboxName||"Ext",privateFn:f,emptyFn:k,identityFn:h,frameStartTime:+new Date(),manifest:a,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,makeIdSelector:function(n){return"#"+n},id:function(p,n){if(p&&p.id){return p.id}var q=(n||Ext.idPrefix)+(++Ext.idSeed);if(p){p.id=q}return q},returnId:function(n){return n.getId()},returnTrue:function(){return true},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},applyIf:function(o,n){var p;if(o){for(p in n){if(o[p]===undefined){o[p]=n[p]}}}return o},now:(b.performance&&b.performance.now)?function(){return performance.now()}:(Date.now||(Date.now=function(){return +new Date()})),destroy:function(){var p=arguments.length,o,n;for(o=0;o<p;o++){n=arguments[o];if(n){if(Ext.isArray(n)){this.destroy.apply(this,n)}else{if(Ext.isFunction(n.destroy)){n.destroy()}}}}return null},destroyMembers:function(q){for(var s,p,r=1,o=arguments,n=o.length;r<n;r++){s=q[p=o[r]];if(s!=null){q[p]=Ext.destroy(s)}}},override:function(q,r){if(q.$isClass){q.override(r)}else{if(typeof q=="function"){Ext.apply(q.prototype,r)}else{var n=q.self,o,p;if(n&&n.$isClass){for(o in r){if(r.hasOwnProperty(o)){p=r[o];if(typeof p==="function"){p.$name=o;p.$owner=n;p.$previous=q.hasOwnProperty(o)?q[o]:l}q[o]=p}}}else{Ext.apply(q,r)}}}return q},valueFrom:function(p,n,o){return Ext.isEmpty(p,o)?n:p},isEmpty:function(n,o){return(n==null)||(!o?n==="":false)||(Ext.isArray(n)&&n.length===0)},isArray:("isArray" in Array)?Array.isArray:function(n){return c.call(n)==="[object Array]"},isDate:function(n){return c.call(n)==="[object Date]"},isMSDate:function(n){if(!Ext.isString(n)){return false}return e.test(n)},isObject:(c.call(null)==="[object Object]")?function(n){return n!==null&&n!==undefined&&c.call(n)==="[object Object]"&&n.ownerDocument===undefined}:function(n){return c.call(n)==="[object Object]"},isSimpleObject:function(n){return n instanceof Object&&n.constructor===Object},isPrimitive:function(o){var n=typeof o;return n==="string"||n==="number"||n==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(n){return !!n&&c.call(n)==="[object Function]"}:function(n){return !!n&&typeof n==="function"},isNumber:function(n){return typeof n==="number"&&isFinite(n)},isNumeric:function(n){return !isNaN(parseFloat(n))&&isFinite(n)},isString:function(n){return typeof n==="string"},isBoolean:function(n){return typeof n==="boolean"},isElement:function(n){return n?n.nodeType===1:false},isTextNode:function(n){return n?n.nodeName==="#text":false},isDefined:function(n){return typeof n!=="undefined"},isIterable:function(n){if(!n||typeof n.length!=="number"||typeof n==="string"||Ext.isFunction(n)){return false}if(!n.propertyIsEnumerable){return !!n.item}if(n.hasOwnProperty("length")&&!n.propertyIsEnumerable("length")){return true}return d.test(c.call(n))},isDebugEnabled:k,clone:function(s){if(s===null||s===undefined){return s}if(s.nodeType&&s.cloneNode){return s.cloneNode(true)}var r=c.call(s),q,o,n,t,p;if(r==="[object Date]"){return new Date(s.getTime())}if(r==="[object Array]"){q=s.length;t=[];while(q--){t[q]=Ext.clone(s[q])}}else{if(r==="[object Object]"&&s.constructor===Object){t={};for(p in s){t[p]=Ext.clone(s[p])}if(m){for(o=m.length;o--;){n=m[o];if(s.hasOwnProperty(n)){t[n]=s[n]}}}}}return t||s},getUniqueGlobalNamespace:function(){var o=this.uniqueGlobalNamespace,n;if(o===undefined){n=0;do{o="ExtBox"+(++n)}while(b[o]!==undefined);b[o]=Ext;this.uniqueGlobalNamespace=o}return o},functionFactoryCache:{},cacheableFunctionFactory:function(){var s=this,p=Array.prototype.slice.call(arguments),o=s.functionFactoryCache,n,q,r;if(Ext.isSandboxed){r=p.length;if(r>0){r--;p[r]="var Ext=window."+Ext.name+";"+p[r]}}n=p.join("");q=o[n];if(!q){q=Function.prototype.constructor.apply(Function.prototype,p);o[n]=q}return q},functionFactory:function(){var n=Array.prototype.slice.call(arguments),o;if(Ext.isSandboxed){o=n.length;if(o>0){o--;n[o]="var Ext=window."+Ext.name+";"+n[o]}}return Function.prototype.constructor.apply(Function.prototype,n)},Logger:{verbose:k,log:k,info:k,warn:k,error:function(n){throw new Error(n)},deprecate:k},getElementById:function(n){return document.getElementById(n)},splitAndUnescape:(function(){var n={};return function(q,p){if(!q){return[]}else{if(!p){return[q]}}var s=n[p]||(n[p]=new RegExp("\\\\"+p,"g")),o=[],t,r;t=q.split(p);while((r=t.shift())!==undefined){while(r.charAt(r.length-1)==="\\"&&t.length>0){r=r+p+t.shift()}r=r.replace(s,p);o.push(r)}return o}})()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=true}());(function(){function a(){var c=this,b=c.sourceClass,e=c.sourceMethod,d=c.msg;if(e){if(d){e+="(): ";e+=d}else{e+="()"}}if(b){e=e?(b+"."+e):b}return e||d||""}Ext.Error=function(c){if(Ext.isString(c)){c={msg:c}}var b=new Error();Ext.apply(b,c);b.message=b.message||b.msg;b.toString=a;return b};Ext.apply(Ext.Error,{ignore:false,raise:function(d){d=d||{};if(Ext.isString(d)){d={msg:d}}var c=this,f=c.raise.caller,e,b;if(f){if(!d.sourceMethod&&(b=f.$name)){d.sourceMethod=b}if(!d.sourceClass&&(b=f.$owner)&&(b=b.$className)){d.sourceClass=b}}if(c.handle(d)!==true){e=a.call(d);throw new Ext.Error(d)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.Array=new (function(){var c=Array.prototype,l=c.slice,n=(function(){var v=[],e,u=20;if(!v.splice){return false}while(u--){v.push("A")}v.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");e=v.length;v.splice(13,0,"XXX");if(e+1!==v.length){return false}return true}()),m="indexOf" in c,g=true;function k(y,v){var u=y.length,x=new Array(u),e=new Array(u),w;for(w=0;w<u;w++){x[w]=w}x.sort(function(A,z){return v(y[A],y[z])||(A-z)});for(w=0;w<u;w++){e[w]=y[x[w]]}for(w=0;w<u;w++){y[w]=e[w]}return y}try{if(typeof document!=="undefined"){l.call(document.getElementsByTagName("body"))}}catch(p){g=false}var j=function(u,e){return(e<0)?Math.max(0,u.length+e):Math.min(u.length,e)},t=function(B,A,u,E){var F=E?E.length:0,w=B.length,C=j(B,A);if(C===w){if(F){B.push.apply(B,E)}}else{var z=Math.min(u,w-C),D=C+z,v=D+F-z,e=w-D,x=w-z,y;if(v<D){for(y=0;y<e;++y){B[v+y]=B[D+y]}}else{if(v>D){for(y=e;y--;){B[v+y]=B[D+y]}}}if(F&&C===x){B.length=x;B.push.apply(B,E)}else{B.length=x+F;for(y=0;y<F;++y){B[C+y]=E[y]}}}return B},f=function(w,e,v,u){if(u&&u.length){if(e===0&&!v){w.unshift.apply(w,u)}else{if(e<w.length){w.splice.apply(w,[e,v].concat(u))}else{w.push.apply(w,u)}}}else{w.splice(e,v)}return w},b=function(v,e,u){return t(v,e,u)},o=function(v,e,u){v.splice(e,u);return v},h=function(x,e,v){var w=j(x,e),u=x.slice(e,j(x,w+v));if(arguments.length<4){t(x,w,v)}else{t(x,w,v,l.call(arguments,3))}return u},d=function(e){return e.splice.apply(e,l.call(arguments,1))},s=n?o:b,q=n?f:t,r=n?d:h,a={binarySearch:function(A,x,v,e,z){var w=A.length,u,y;if(v instanceof Function){z=v;v=0;e=w}else{if(e instanceof Function){z=e;e=w}else{if(v===undefined){v=0}if(e===undefined){e=w}z=z||a.lexicalCompare}}--e;while(v<=e){u=(v+e)>>1;y=z(x,A[u]);if(y>=0){v=u+1}else{if(y<0){e=u-1}}}return v},defaultCompare:function(e,u){return(e<u)?-1:((e>u)?1:0)},lexicalCompare:function(e,u){e=String(e);u=String(u);return(e<u)?-1:((e>u)?1:0)},each:function(y,w,v,e){y=a.from(y);var u,x=y.length;if(e!==true){for(u=0;u<x;u++){if(w.call(v||y[u],y[u],u,y)===false){return u}}}else{for(u=x-1;u>-1;u--){if(w.call(v||y[u],y[u],u,y)===false){return u}}}return true},forEach:("forEach" in c)?function(v,u,e){return v.forEach(u,e)}:function(x,v,u){for(var e=0,w=x.length;e<w;e++){v.call(u,x[e],e,x)}},indexOf:m?function(v,e,u){return c.indexOf.call(v,e,u)}:function(x,v,w){var e,u=x.length;for(e=(w<0)?Math.max(0,u+w):w||0;e<u;e++){if(x[e]===v){return e}}return -1},contains:m?function(u,e){return c.indexOf.call(u,e)!==-1}:function(w,v){var e,u;for(e=0,u=w.length;e<u;e++){if(w[e]===v){return true}}return false},toArray:function(v,x,e){if(!v||!v.length){return[]}if(typeof v==="string"){v=v.split("")}if(g){return l.call(v,x||0,e||v.length)}var w=[],u;x=x||0;e=e?((e<0)?v.length+e:e):v.length;for(u=x;u<e;u++){w.push(v[u])}return w},pluck:function(y,e){var u=[],v,x,w;for(v=0,x=y.length;v<x;v++){w=y[v];u.push(w[e])}return u},map:("map" in c)?function(v,u,e){return v.map(u,e)}:function(y,x,w){var v=[],u=0,e=y.length;for(;u<e;u++){v[u]=x.call(w,y[u],u,y)}return v},every:("every" in c)?function(v,u,e){return v.every(u,e)}:function(x,v,u){var e=0,w=x.length;for(;e<w;++e){if(!v.call(u,x[e],e,x)){return false}}return true},some:("some" in c)?function(v,u,e){return v.some(u,e)}:function(x,v,u){var e=0,w=x.length;for(;e<w;++e){if(v.call(u,x[e],e,x)){return true}}return false},equals:function(x,w){var u=x.length,e=w.length,v;if(x===w){return true}if(u!==e){return false}for(v=0;v<u;++v){if(x[v]!==w[v]){return false}}return true},clean:function(x){var u=[],e=0,w=x.length,v;for(;e<w;e++){v=x[e];if(!Ext.isEmpty(v)){u.push(v)}}return u},unique:function(x){var w=[],e=0,v=x.length,u;for(;e<v;e++){u=x[e];if(a.indexOf(w,u)===-1){w.push(u)}}return w},filter:("filter" in c)?function(v,u,e){return v.filter(u,e)}:function(y,w,v){var u=[],e=0,x=y.length;for(;e<x;e++){if(w.call(v,y[e],e,y)){u.push(y[e])}}return u},findBy:function(x,w,v){var u=0,e=x.length;for(;u<e;u++){if(w.call(v||x,x[u],u)){return x[u]}}return null},from:function(v,u){if(v===undefined||v===null){return[]}if(Ext.isArray(v)){return(u)?l.call(v):v}var e=typeof v;if(v&&v.length!==undefined&&e!=="string"&&(e!=="function"||!v.apply)){return a.toArray(v)}return[v]},remove:function(v,u){var e=a.indexOf(v,u);if(e!==-1){s(v,e,1)}return v},include:function(u,e){if(!a.contains(u,e)){u.push(e)}},clone:function(e){return l.call(e)},merge:function(){var e=l.call(arguments),w=[],u,v;for(u=0,v=e.length;u<v;u++){w=w.concat(e[u])}return a.unique(w)},intersect:function(){var e=[],v=l.call(arguments),G,E,A,D,H,w,u,C,F,x,B,z,y;if(!v.length){return e}G=v.length;for(B=H=0;B<G;B++){w=v[B];if(!D||w.length<D.length){D=w;H=B}}D=a.unique(D);s(v,H,1);u=D.length;G=v.length;for(B=0;B<u;B++){C=D[B];x=0;for(z=0;z<G;z++){E=v[z];A=E.length;for(y=0;y<A;y++){F=E[y];if(C===F){x++;break}}}if(x===G){e.push(C)}}return e},difference:function(u,e){var z=l.call(u),x=z.length,w,v,y;for(w=0,y=e.length;w<y;w++){for(v=0;v<x;v++){if(z[v]===e[w]){s(z,v,1);v--;x--}}}return z},slice:([1,2].slice(1,undefined).length?function(v,u,e){return l.call(v,u,e)}:function(v,u,e){if(typeof u==="undefined"){return l.call(v)}if(typeof e==="undefined"){return l.call(v,u)}return l.call(v,u,e)}),sort:function(u,e){return k(u,e||a.lexicalCompare)},flatten:function(v){var u=[];function e(w){var y,z,x;for(y=0,z=w.length;y<z;y++){x=w[y];if(Ext.isArray(x)){e(x)}else{u.push(x)}}return u}return e(v)},min:function(y,x){var u=y[0],e,w,v;for(e=0,w=y.length;e<w;e++){v=y[e];if(x){if(x(u,v)===1){u=v}}else{if(v<u){u=v}}}return u},max:function(y,x){var e=y[0],u,w,v;for(u=0,w=y.length;u<w;u++){v=y[u];if(x){if(x(e,v)===-1){e=v}}else{if(v>e){e=v}}}return e},mean:function(e){return e.length>0?a.sum(e)/e.length:undefined},sum:function(x){var u=0,e,w,v;for(e=0,w=x.length;e<w;e++){v=x[e];u+=v}return u},toMap:function(x,e,v){var w={},u=x.length;if(!e){while(u--){w[x[u]]=u+1}}else{if(typeof e==="string"){while(u--){w[x[u][e]]=u+1}}else{while(u--){w[e.call(v,x[u])]=u+1}}}return w},toValueMap:function(z,w,E,y){var e={},v=z.length,u,x,C,A,D,B;if(!w){while(v--){B=z[v];e[B]=B}}else{if(!(A=(typeof w!=="string"))){y=E}x=y===1;u=y===2;while(v--){B=z[v];D=A?w.call(E,B):B[w];if(x){if(D in e){e[D].push(B)}else{e[D]=[B]}}else{if(u&&(D in e)){if((C=e[D]) instanceof Array){C.push(B)}else{e[D]=[C,B]}}else{e[D]=B}}}}return e},erase:s,insert:function(v,u,e){return q(v,u,0,e)},replace:q,splice:r,push:function(w){var e=arguments.length,v=1,u;if(w===undefined){w=[]}else{if(!Ext.isArray(w)){w=[w]}}for(;v<e;v++){u=arguments[v];Array.prototype.push[Ext.isIterable(u)?"apply":"call"](w,u)}return w},numericSortFn:function(u,e){return u-e}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a})();Ext.String=(function(){var h=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,m=/('|\\)/g,b=/([-.*+?\^${}()|\[\]\/\\])/g,o=/^\s+|\s+$/g,j=/\s+/,l=/(^[^a-z]*|[^\w])/gi,e,a,g,d,f=function(q,p){return e[p]},k=function(q,p){return(p in a)?a[p]:String.fromCharCode(parseInt(p.substr(2),10))},c=function(q,p){if(q===null||q===undefined||p===null||p===undefined){return false}return p.length<=q.length},n;return n={insert:function(r,t,q){if(!r){return t}if(!t){return r}var p=r.length;if(!q&&q!==0){q=p}if(q<0){q*=-1;if(q>=p){q=0}else{q=p-q}}if(q===0){r=t+r}else{if(q>=r.length){r+=t}else{r=r.substr(0,q)+t+r.substr(q)}}return r},startsWith:function(r,t,q){var p=c(r,t);if(p){if(q){r=r.toLowerCase();t=t.toLowerCase()}p=r.lastIndexOf(t,0)===0}return p},endsWith:function(t,q,r){var p=c(t,q);if(p){if(r){t=t.toLowerCase();q=q.toLowerCase()}p=t.indexOf(q,t.length-q.length)!==-1}return p},createVarName:function(p){return p.replace(l,"")},htmlEncode:function(p){return(!p)?p:String(p).replace(g,f)},htmlDecode:function(p){return(!p)?p:String(p).replace(d,k)},hasHtmlCharacters:function(p){return g.test(p)},addCharacterEntities:function(q){var p=[],t=[],r,s;for(r in q){s=q[r];a[r]=s;e[s]=r;p.push(s);t.push(r)}g=new RegExp("("+p.join("|")+")","g");d=new RegExp("("+t.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){e={};a={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(q,p){if(!Ext.isEmpty(p)){return q+(q.indexOf("?")===-1?"?":"&")+p}return q},trim:function(p){if(p){p=p.replace(h,"")}return p||""},capitalize:function(p){if(p){p=p.charAt(0).toUpperCase()+p.substr(1)}return p||""},uncapitalize:function(p){if(p){p=p.charAt(0).toLowerCase()+p.substr(1)}return p||""},ellipsis:function(r,q,s){if(r&&r.length>q){if(s){var t=r.substr(0,q-2),p=Math.max(t.lastIndexOf(" "),t.lastIndexOf("."),t.lastIndexOf("!"),t.lastIndexOf("?"));if(p!==-1&&p>=(q-15)){return t.substr(0,p)+"..."}}return r.substr(0,q-3)+"..."}return r},escapeRegex:function(p){return p.replace(b,"\\$1")},createRegex:function(t,s,q,p){var r=t;if(t!=null&&!t.exec){r=n.escapeRegex(String(t));if(s!==false){r="^"+r}if(q!==false){r+="$"}r=new RegExp(r,(p!==false)?"i":"")}return r},escape:function(p){return p.replace(m,"\\$1")},toggle:function(q,r,p){return q===r?p:r},leftPad:function(q,r,s){var p=String(q);s=s||" ";while(p.length<r){p=s+p}return p},repeat:function(t,s,q){if(s<1){s=0}for(var p=[],r=s;r--;){p.push(t)}return p.join(q||"")},splitWords:function(p){if(p&&typeof p=="string"){return p.replace(o,"").split(j)}return p||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=(function(){var d,j=/(\\.)/g,a=/([gGhHisucUOPZ]|MS)/,e=/([djzmnYycU]|MS)/,h=/\\/gi,c=/\{(\d+)\}/g,f=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),b=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");function g(l){var k=Array.prototype.slice.call(arguments,1);return l.replace(c,function(n,o){return k[o]})}return d={now:Date.now,toString:function(k){if(!k){k=new Date()}var l=Ext.String.leftPad;return k.getFullYear()+"-"+l(k.getMonth()+1,2,"0")+"-"+l(k.getDate(),2,"0")+"T"+l(k.getHours(),2,"0")+":"+l(k.getMinutes(),2,"0")+":"+l(k.getSeconds(),2,"0")},getElapsed:function(l,k){return Math.abs(l-(k||d.now()))},useStrict:false,formatCodeToRegex:function(l,k){var m=d.parseCodes[l];if(m){m=typeof m=="function"?m():m;d.parseCodes[l]=m}return m?Ext.applyIf({c:m.c?g(m.c,k||"{0}"):m.c},m):{g:0,c:null,s:Ext.String.escapeRegex(l)}},parseFunctions:{MS:function(l,k){var m=(l||"").match(f);return m?new Date(((m[1]||"")+m[2])*1):null},time:function(l,k){var m=parseInt(l,10);if(m||m===0){return new Date(m)}return null},timestamp:function(l,k){var m=parseInt(l,10);if(m||m===0){return new Date(m*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return d.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(k){return Ext.Date.monthNames[k].substring(0,3)},getShortDayName:function(k){return Ext.Date.dayNames[k].substring(0,3)},getMonthNumber:function(k){return Ext.Date.monthNumbers[k.substring(0,1).toUpperCase()+k.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(k){return a.test(k.replace(j,""))},formatContainsDateInfo:function(k){return e.test(k.replace(j,""))},unescapeFormat:function(k){return k.replace(h,"")},formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){var p,n,m,k,o;for(p="Y-m-dTH:i:sP",n=[],m=0,k=p.length;m<k;++m){o=p.charAt(m);n.push(o=="T"?"'T'":d.getFormatCode(o))}return n.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(t,k,r,p,n,o,l){p=p||0;n=n||0;o=o||0;l=l||0;var q=d.add(new Date(t<100?100:t,k-1,r,p,n,o,l),d.YEAR,t<100?t-100:0);return t==q.getFullYear()&&k==q.getMonth()+1&&r==q.getDate()&&p==q.getHours()&&n==q.getMinutes()&&o==q.getSeconds()&&l==q.getMilliseconds()},parse:function(l,n,k){var m=d.parseFunctions;if(m[n]==null){d.createParser(n)}return m[n].call(d,l,Ext.isDefined(k)?k:d.useStrict)},parseDate:function(l,m,k){return d.parse(l,m,k)},getFormatCode:function(l){var k=d.formatCodes[l];if(k){k=typeof k=="function"?k():k;d.formatCodes[l]=k}return k||("'"+Ext.String.escape(l)+"'")},createFormat:function(o){var n=[],k=false,m="",l;for(l=0;l<o.length;++l){m=o.charAt(l);if(!k&&m=="\\"){k=true}else{if(k){k=false;n.push("'"+Ext.String.escape(m)+"'")}else{if(m=="\n"){n.push("'\\n'")}else{n.push(d.getFormatCode(m))}}}}d.formatFunctions[o]=Ext.functionFactory("return "+n.join("+"))},createParser:function(t){var l=d.parseRegexes.length,u=1,m=[],s=[],q=false,k="",o=0,p=t.length,r=[],n;for(;o<p;++o){k=t.charAt(o);if(!q&&k=="\\"){q=true}else{if(q){q=false;s.push(Ext.String.escape(k))}else{n=d.formatCodeToRegex(k,u);u+=n.g;s.push(n.s);if(n.g&&n.c){if(n.calcAtEnd){r.push(n.c)}else{m.push(n.c)}}}}}m=m.concat(r);d.parseRegexes[l]=new RegExp("^"+s.join("")+"$","i");d.parseFunctions[t]=Ext.functionFactory("input","strict",g(b,l,m.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var k=[],l=0;l<7;k.push(d.getShortDayName(l)),++l){}return{g:0,c:null,s:"(?:"+k.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+d.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+d.monthNames.join("|")+")"}},M:function(){for(var k=[],l=0;l<12;k.push(d.getShortMonthName(l)),++l){}return Ext.applyIf({s:"("+k.join("|")+")"},d.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var n=[],k=[d.formatCodeToRegex("Y",1),d.formatCodeToRegex("m",2),d.formatCodeToRegex("d",3),d.formatCodeToRegex("H",4),d.formatCodeToRegex("i",5),d.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",d.formatCodeToRegex("P",8).c,"}else{",d.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],o,m;for(o=0,m=k.length;o<m;++o){n.push(k[o].c)}return{g:1,c:n.join(""),s:[k[0].s,"(?:","-",k[1].s,"(?:","-",k[2].s,"(?:","(?:T| )?",k[3].s,":",k[4].s,"(?::",k[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(k,l){return d.format(k,l)},isEqual:function(l,k){if(l&&k){return(l.getTime()===k.getTime())}return !(l||k)},format:function(l,m){var k=d.formatFunctions;if(!Ext.isDate(l)){return""}if(k[m]==null){d.createFormat(m)}return k[m].call(l)+""},getTimezone:function(k){return k.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(k,l){var m=k.getTimezoneOffset();return(m>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(m)/60),2,"0")+(l?":":"")+Ext.String.leftPad(Math.abs(m%60),2,"0")},getDayOfYear:function(n){var l=0,p=Ext.Date.clone(n),k=n.getMonth(),o;for(o=0,p.setDate(1),p.setMonth(0);o<k;p.setMonth(++o)){l+=d.getDaysInMonth(p)}return l+n.getDate()-1},getWeekOfYear:(function(){var k=86400000,l=7*k;return function(n){var o=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()+3)/k,m=Math.floor(o/7),p=new Date(m*l).getUTCFullYear();return m-Math.floor(Date.UTC(p,0,7)/l)+1}}()),isLeapYear:function(k){var l=k.getFullYear();return !!((l&3)==0&&(l%100||(l%400==0&&l)))},getFirstDayOfMonth:function(l){var k=(l.getDay()-(l.getDate()-1))%7;return(k<0)?(k+7):k},getLastDayOfMonth:function(k){return d.getLastDateOfMonth(k).getDay()},getFirstDateOfMonth:function(k){return new Date(k.getFullYear(),k.getMonth(),1)},getLastDateOfMonth:function(k){return new Date(k.getFullYear(),k.getMonth(),d.getDaysInMonth(k))},getDaysInMonth:(function(){var k=[31,28,31,30,31,30,31,31,30,31,30,31];return function(n){var l=n.getMonth();return l==1&&d.isLeapYear(n)?29:k[l]}}()),getSuffix:function(k){switch(k.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(k){return new Date(k.getTime())},isDST:function(k){return new Date(k.getFullYear(),0,1).getTimezoneOffset()!=k.getTimezoneOffset()},clearTime:function(k,o){if(o){return Ext.Date.clearTime(Ext.Date.clone(k))}var m=k.getDate(),l,n;k.setHours(0);k.setMinutes(0);k.setSeconds(0);k.setMilliseconds(0);if(k.getDate()!=m){for(l=1,n=d.add(k,Ext.Date.HOUR,l);n.getDate()!=m;l++,n=d.add(k,Ext.Date.HOUR,l)){}k.setDate(m);k.setHours(n.getHours())}return k},add:function(n,m,q){var r=Ext.Date.clone(n),k=Ext.Date,l,p,o=0;if(!m||q===0){return r}p=q-parseInt(q,10);q=parseInt(q,10);if(q){switch(m.toLowerCase()){case Ext.Date.MILLI:r.setTime(r.getTime()+q);break;case Ext.Date.SECOND:r.setTime(r.getTime()+q*1000);break;case Ext.Date.MINUTE:r.setTime(r.getTime()+q*60*1000);break;case Ext.Date.HOUR:r.setTime(r.getTime()+q*60*60*1000);break;case Ext.Date.DAY:r.setDate(r.getDate()+q);break;case Ext.Date.MONTH:l=n.getDate();if(l>28){l=Math.min(l,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(n),Ext.Date.MONTH,q)).getDate())}r.setDate(l);r.setMonth(n.getMonth()+q);break;case Ext.Date.YEAR:l=n.getDate();if(l>28){l=Math.min(l,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(n),Ext.Date.YEAR,q)).getDate())}r.setDate(l);r.setFullYear(n.getFullYear()+q);break}}if(p){switch(m.toLowerCase()){case Ext.Date.MILLI:o=1;break;case Ext.Date.SECOND:o=1000;break;case Ext.Date.MINUTE:o=1000*60;break;case Ext.Date.HOUR:o=1000*60*60;break;case Ext.Date.DAY:o=1000*60*60*24;break;case Ext.Date.MONTH:l=d.getDaysInMonth(r);o=1000*60*60*24*l;break;case Ext.Date.YEAR:l=(d.isLeapYear(r)?366:365);o=1000*60*60*24*l;break}if(o){r.setTime(r.getTime()+o*p)}}return r},subtract:function(l,k,m){return d.add(l,k,-m)},between:function(l,n,k){var m=l.getTime();return n.getTime()<=m&&m<=k.getTime()},compat:function(){var l=window.Date,k,r=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],o=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],q=r.length,m=o.length,n,t,u;for(u=0;u<q;u++){n=r[u];l[n]=d[n]}for(k=0;k<m;k++){t=o[k];l.prototype[t]=function(){var p=Array.prototype.slice.call(arguments);p.unshift(this);return d[t].apply(d,p)}}},diff:function(m,k,o){var l=Ext.Date,n,p=+k-m;switch(o){case l.MILLI:return p;case l.SECOND:return Math.floor(p/1000);case l.MINUTE:return Math.floor(p/60000);case l.HOUR:return Math.floor(p/3600000);case l.DAY:return Math.floor(p/86400000);case"w":return Math.floor(p/604800000);case l.MONTH:n=(k.getFullYear()*12+k.getMonth())-(m.getFullYear()*12+m.getMonth());if(Ext.Date.add(m,o,n)>k){return n-1}else{return n}case l.YEAR:n=k.getFullYear()-m.getFullYear();if(Ext.Date.add(m,o,n)>k){return n-1}else{return n}}},align:function(l,n,m){var k=new Date(+l);switch(n.toLowerCase()){case Ext.Date.MILLI:return k;break;case Ext.Date.SECOND:k.setUTCSeconds(k.getUTCSeconds()-k.getUTCSeconds()%m);k.setUTCMilliseconds(0);return k;break;case Ext.Date.MINUTE:k.setUTCMinutes(k.getUTCMinutes()-k.getUTCMinutes()%m);k.setUTCSeconds(0);k.setUTCMilliseconds(0);return k;break;case Ext.Date.HOUR:k.setUTCHours(k.getUTCHours()-k.getUTCHours()%m);k.setUTCMinutes(0);k.setUTCSeconds(0);k.setUTCMilliseconds(0);return k;break;case Ext.Date.DAY:if(m==7||m==14){k.setUTCDate(k.getUTCDate()-k.getUTCDay()+1)}k.setUTCHours(0);k.setUTCMinutes(0);k.setUTCSeconds(0);k.setUTCMilliseconds(0);return k;break;case Ext.Date.MONTH:k.setUTCMonth(k.getUTCMonth()-(k.getUTCMonth()-1)%m,1);k.setUTCHours(0);k.setUTCMinutes(0);k.setUTCSeconds(0);k.setUTCMilliseconds(0);return k;break;case Ext.Date.YEAR:k.setUTCFullYear(k.getUTCFullYear()-k.getUTCFullYear()%m,1,1);k.setUTCHours(0);k.setUTCMinutes(0);k.setUTCSeconds(0);k.setUTCMilliseconds(0);return l;break}}}}());Ext.Function=(function(){var b=0,k,d=[],l=[],f=0,g={},e=window,j=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||function(p){var m=Ext.now(),n=Math.max(0,16-(m-b)),o=e.setTimeout(function(){p(m+n)},n);b=m+n;return o},c=function(){var m=d.length,p,n,o;k=null;for(n=0;n<m;n++){o=d[n];p=o[3];if(g[p]){o[0].apply(o[1]||Ext.global,o[2]||l);delete g[p]}}d=d.slice(m)},a=function(){Ext.elevateFunction(c)},h={flexSetter:function(m){return function(o,q){var n,p;if(o!==null){if(typeof o!=="string"){for(n in o){if(o.hasOwnProperty(n)){m.call(this,n,o[n])}}if(Ext.enumerables){for(p=Ext.enumerables.length;p--;){n=Ext.enumerables[p];if(o.hasOwnProperty(n)){m.call(this,n,o[n])}}}}else{m.call(this,o,q)}}return this}},bind:function(p,o,n,m){if(arguments.length===2){return function(){return p.apply(o,arguments)}}var r=p,q=Array.prototype.slice;return function(){var s=n||arguments;if(m===true){s=q.call(arguments,0);s=s.concat(n)}else{if(typeof m=="number"){s=q.call(arguments,0);Ext.Array.insert(s,m,n)}}return r.apply(o||Ext.global,s)}},bindCallback:function(q,p,o,n,m){return function(){var r=Ext.Array.slice(arguments);return Ext.callback(q,p,o?o.concat(r):r,n,m)}},pass:function(o,m,n){if(!Ext.isArray(m)){if(Ext.isIterable(m)){m=Ext.Array.clone(m)}else{m=m!==undefined?[m]:[]}}return function(){var p=m.slice();p.push.apply(p,arguments);return o.apply(n||this,p)}},alias:function(n,m){return function(){return n[m].apply(n,arguments)}},clone:function(m){return function(){return m.apply(this,arguments)}},createInterceptor:function(p,o,n,m){if(!Ext.isFunction(o)){return p}else{m=Ext.isDefined(m)?m:null;return function(){var r=this,q=arguments;o.target=r;o.method=p;return(o.apply(n||r||Ext.global,q)!==false)?p.apply(r||Ext.global,q):m}}},createDelayed:function(q,o,p,n,m){if(p||n){q=Ext.Function.bind(q,p,n,m)}return function(){var s=this,r=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(q,s,r)}else{q.apply(s,r)}},o)}},defer:function(q,o,p,n,m){q=Ext.Function.bind(q,p,n,m);if(o>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(q)}else{q()}},o)}q();return 0},interval:function(q,o,p,n,m){q=Ext.Function.bind(q,p,n,m);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(q)}else{q()}},o)},createSequence:function(n,o,m){if(!o){return n}else{return function(){var p=n.apply(this,arguments);o.apply(m||this,arguments);return p}}},createBuffered:function(q,n,p,o){var m;return function(){var s=o||Array.prototype.slice.call(arguments,0),r=p||this;if(m){clearTimeout(m)}m=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(q,r,s)}else{q.apply(r,s)}},n)}},createAnimationFrame:function(p,o,n,q){var m;q=q||3;return function(){var r=n||Array.prototype.slice.call(arguments,0);o=o||this;if(q===3&&m){h.cancelAnimationFrame(m)}if((q&1)||!m){m=h.requestAnimationFrame(function(){m=null;p.apply(o,r)})}}},requestAnimationFrame:function(p,o,m){var q=++f,n=Array.prototype.slice.call(arguments,0);n[3]=q;g[q]=1;d.push(n);if(!k){k=j(Ext.elevateFunction?a:c)}return q},cancelAnimationFrame:function(m){delete g[m]},createThrottled:function(q,n,p){var r=0,m,o,t,s=function(){if(Ext.elevateFunction){Ext.elevateFunction(q,p,o)}else{q.apply(p,o)}r=Ext.now();t=null};return function(){if(!p){p=this}m=Ext.now()-r;o=arguments;if(m>=n){clearTimeout(t);s()}else{if(!t){t=Ext.defer(s,n-m)}}}},createBarrier:function(o,n,m){return function(){if(!--o){n.apply(m,arguments)}}},interceptBefore:function(n,m,p,o){var q=n[m]||Ext.emptyFn;return(n[m]=function(){var r=p.apply(o||this,arguments);q.apply(this,arguments);return r})},interceptAfter:function(n,m,p,o){var q=n[m]||Ext.emptyFn;return(n[m]=function(){q.apply(this,arguments);return p.apply(o||this,arguments)})},makeCallback:function(n,m){return function(){return m[n].apply(m,arguments)}}};Ext.defer=h.defer;Ext.interval=h.interval;Ext.pass=h.pass;Ext.bind=h.bind;Ext.deferCallback=h.requestAnimationFrame;return h})();Ext.Number=new function(){var d=this,c=(0.9).toFixed()!=="1",b=Math,a={count:false,inclusive:false,wrap:true};Ext.apply(d,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:true},a),INCLUSIVE:Ext.applyIf({inclusive:true},a),NOWRAP:Ext.applyIf({wrap:false},a)},clipIndices:function(l,m,g){g=g||a;var f=0,k=g.wrap,j,e,h;m=m||[];for(h=0;h<2;++h){j=e;e=m[h];if(e==null){e=f}else{if(h&&g.count){e+=j;e=(e>l)?l:e}else{if(k){e=(e<0)?(l+e):e}if(h&&g.inclusive){++e}e=(e<0)?0:((e>l)?l:e)}}f=l}m[0]=j;m[1]=(e<j)?j:e;return m},constrain:function(h,g,f){var e=parseFloat(h);if(g===null){g=h}if(f===null){f=h}return(e<g)?g:((e>f)?f:e)},snap:function(h,f,g,j){var e;if(h===undefined||h<g){return g||0}if(f){e=h%f;if(e!==0){h-=e;if(e*2>=f){h+=f}else{if(e*2<-f){h-=f}}}}return d.constrain(h,g,j)},snapInRange:function(h,e,g,j){var f;g=(g||0);if(h===undefined||h<g){return g}if(e&&(f=((h-g)%e))){h-=f;f*=2;if(f>=e){h+=e}}if(j!==undefined){if(h>(j=d.snapInRange(j,e,g))){h=j}}return h},toFixed:c?function(g,e){e=e||0;var f=b.pow(10,e);return(b.round(g*f)/f).toFixed(e)}:function(f,e){return f.toFixed(e)},from:function(f,e){if(isFinite(f)){f=parseFloat(f)}return !isNaN(f)?f:e},randomInt:function(f,e){return b.floor(b.random()*(e-f+1)+f)},correctFloat:function(e){return parseFloat(e.toPrecision(14))}});Ext.num=function(){return d.from.apply(this,arguments)}}();(function(){var a=function(){},b=Ext.Object={chain:Object.create||function(d){a.prototype=d;var c=new a();a.prototype=null;return c},clear:function(c){for(var d in c){delete c[d]}return c},freeze:Object.freeze?function(e,c){if(e&&typeof e==="object"&&!Object.isFrozen(e)){Object.freeze(e);if(c){for(var d in e){b.freeze(e[d],c)}}}return e}:Ext.identityFn,toQueryObjects:function(e,j,d){var c=b.toQueryObjects,h=[],f,g;if(Ext.isArray(j)){for(f=0,g=j.length;f<g;f++){if(d){h=h.concat(c(e+"["+f+"]",j[f],true))}else{h.push({name:e,value:j[f]})}}}else{if(Ext.isObject(j)){for(f in j){if(j.hasOwnProperty(f)){if(d){h=h.concat(c(e+"["+f+"]",j[f],true))}else{h.push({name:e,value:j[f]})}}}}else{h.push({name:e,value:j})}}return h},toQueryString:function(f,d){var g=[],e=[],k,h,l,c,m;for(k in f){if(f.hasOwnProperty(k)){g=g.concat(b.toQueryObjects(k,f[k],d))}}for(h=0,l=g.length;h<l;h++){c=g[h];m=c.value;if(Ext.isEmpty(m)){m=""}else{if(Ext.isDate(m)){m=Ext.Date.toString(m)}}e.push(encodeURIComponent(c.name)+"="+encodeURIComponent(String(m)))}return e.join("&")},fromQueryString:function(d,q){var l=d.replace(/^\?/,"").split("&"),t={},r,h,v,m,p,f,n,o,c,g,s,k,u,e;for(p=0,f=l.length;p<f;p++){n=l[p];if(n.length>0){h=n.split("=");v=decodeURIComponent(h[0]);m=(h[1]!==undefined)?decodeURIComponent(h[1]):"";if(!q){if(t.hasOwnProperty(v)){if(!Ext.isArray(t[v])){t[v]=[t[v]]}t[v].push(m)}else{t[v]=m}}else{g=v.match(/(\[):?([^\]]*)\]/g);s=v.match(/^([^\[]+)/);v=s[0];k=[];if(g===null){t[v]=m;continue}for(o=0,c=g.length;o<c;o++){u=g[o];u=(u.length===2)?"":u.substring(1,u.length-1);k.push(u)}k.unshift(v);r=t;for(o=0,c=k.length;o<c;o++){u=k[o];if(o===c-1){if(Ext.isArray(r)&&u===""){r.push(m)}else{r[u]=m}}else{if(r[u]===undefined||typeof r[u]==="string"){e=k[o+1];r[u]=(Ext.isNumeric(e)||e==="")?[]:{}}r=r[u]}}}}}return t},each:function(d,g,f){var c=Ext.enumerables,e,h;f=f||d;for(h in d){if(d.hasOwnProperty(h)){if(g.call(f,h,d[h],d)===false){return}}}if(c){for(e=c.length;e--;){if(d.hasOwnProperty(h=c[e])){if(g.call(f,h,d[h],d)===false){return}}}}},eachValue:function(d,g,f){var c=Ext.enumerables,e,h;f=f||d;for(h in d){if(d.hasOwnProperty(h)){if(g.call(f,d[h])===false){return}}}if(c){for(e=c.length;e--;){if(d.hasOwnProperty(h=c[e])){if(g.call(f,d[h])===false){return}}}}},merge:function(j){var g=1,h=arguments.length,c=b.merge,e=Ext.clone,f,l,k,d;for(;g<h;g++){f=arguments[g];for(l in f){k=f[l];if(k&&k.constructor===Object){d=j[l];if(d&&d.constructor===Object){c(d,k)}else{j[l]=e(k)}}else{j[l]=k}}}return j},mergeIf:function(c){var g=1,h=arguments.length,e=Ext.clone,d,f,j;for(;g<h;g++){d=arguments[g];for(f in d){if(!(f in c)){j=d[f];if(j&&j.constructor===Object){c[f]=e(j)}else{c[f]=j}}}}return c},getKey:function(c,e){for(var d in c){if(c.hasOwnProperty(d)&&c[d]===e){return d}}return null},getValues:function(d){var c=[],e;for(e in d){if(d.hasOwnProperty(e)){c.push(d[e])}}return c},getKeys:(typeof Object.keys=="function")?function(c){if(!c){return[]}return Object.keys(c)}:function(c){var d=[],e;for(e in c){if(c.hasOwnProperty(e)){d.push(e)}}return d},getSize:function(c){var d=0,e;for(e in c){if(c.hasOwnProperty(e)){d++}}return d},isEmpty:function(c){for(var d in c){if(c.hasOwnProperty(d)){return false}}return true},equals:(function(){var c=function(f,e){var d;for(d in f){if(f.hasOwnProperty(d)){if(f[d]!==e[d]){return false}}}return true};return function(e,d){if(e===d){return true}if(e&&d){return c(e,d)&&c(d,e)}else{if(!e&&!d){return e===d}else{return false}}}})(),fork:function(g){var f=Ext.Array,c,d,e;if(g&&g.constructor===Object){c=b.chain(g);for(d in g){e=g[d];if(e){if(e.constructor===Object){c[d]=b.fork(e)}else{if(e instanceof Array){c[d]=Ext.Array.clone(e)}}}}}else{c=g}return c},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(d,c,e){if(!Object.prototype.__defineGetter__){return}if(e.get){d.__defineGetter__(c,e.get)}if(e.set){d.__defineSetter__(c,e.set)}},classify:function(f){var e=f,h=[],d={},c=function(){var k=0,l=h.length,m;for(;k<l;k++){m=h[k];this[m]=new d[m]()}},g,j;for(g in f){if(f.hasOwnProperty(g)){j=f[g];if(j&&j.constructor===Object){h.push(g);d[g]=b.classify(j)}}}c.prototype=e;return c}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf}());Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:(function(){var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,d=/([\W]{1})/g,b=/^(\d)/g,a=function(g,f){return"\\"+f},e=function(g,f){return"\\00"+f.charCodeAt(0).toString(16)+" "};return function(f){return c.test(f)?f:f.replace(d,a).replace(b,e)}}()),callback:function(h,f,d,c,b,g){if(!h){return}var e=(f in Ext._namedScopes);if(h.charAt){if((!f||e)&&b){f=b.resolveListenerScope(e?f:g)}h=f[h]}else{if(e){f=g||b}else{if(!f){f=b}}}var a;if(h&&Ext.isFunction(h)){f=f||Ext.global;if(c){Ext.defer(h,c,f,d)}else{if(d){a=h.apply(f,d)}else{a=h.call(f)}}}return a},coerce:function(e,d){var c=Ext.typeOf(e),b=Ext.typeOf(d),a=typeof e==="string";if(c!==b){switch(b){case"string":return String(e);case"number":return Number(e);case"boolean":return a&&(!e||e==="false")?false:Boolean(e);case"null":return a&&(!e||e==="null")?null:e;case"undefined":return a&&(!e||e==="undefined")?undefined:e;case"date":return a&&isNaN(e)?Ext.Date.parse(e,Ext.Date.defaultFormat):Date(Number(e))}}return e},copyTo:function(b,d,f,e){if(typeof f=="string"){f=f.split(/[,;\s]/)}var g,c=f?f.length:0,a;for(g=0;g<c;g++){a=f[g];if(e||d.hasOwnProperty(a)){b[a]=d[a]}}return b},extend:(function(){var a=Object.prototype.constructor,b=function(d){for(var c in d){if(!d.hasOwnProperty(c)){continue}this[c]=d[c]}};return function(c,h,f){if(Ext.isObject(h)){f=h;h=c;c=f.constructor!==a?f.constructor:function(){h.apply(this,arguments)}}var e=function(){},d,g=h.prototype;e.prototype=g;d=c.prototype=new e();d.constructor=c;c.superclass=g;if(g.constructor===a){g.constructor=h}c.override=function(j){Ext.override(c,j)};d.override=b;d.proto=d;c.override(f);c.extend=function(j){return Ext.extend(c,j)};return c}}()),iterate:function(a,c,b){if(Ext.isEmpty(a)){return}if(b===undefined){b=a}if(Ext.isIterable(a)){Ext.Array.each.call(Ext.Array,a,c,b)}else{Ext.Object.each.call(Ext.Object,a,c,b)}},urlEncode:function(){var a=Ext.Array.from(arguments),b="";if(Ext.isString(a[1])){b=a[1]+"&";a[1]=false}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(c){var b=Ext._scrollbarSize;if(c||!b){var a=document.body,d=document.createElement("div");d.style.width=d.style.height="100px";d.style.overflow="scroll";d.style.position="absolute";a.appendChild(d);Ext._scrollbarSize=b={width:d.offsetWidth-d.clientWidth,height:d.offsetHeight-d.clientHeight};a.removeChild(d)}return b},typeOf:(function(){var a=/\S/,c=Object.prototype.toString,d={number:1,string:1,"boolean":1,"undefined":1},b={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(g){if(g===null){return"null"}var f=typeof g,e,h;if(d[f]){return f}e=b[h=c.call(g)];if(e){return e}if(f==="function"){return"function"}if(f==="object"){if(g.nodeType!==undefined){if(g.nodeType===3){return a.test(g.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}return h}}()),factory:function(b,e,a,f){var d=Ext.ClassManager,c;if(!b||b.isInstance){if(a&&a!==b){a.destroy()}return b}if(f){if(typeof b=="string"){return d.instantiateByAlias(f+"."+b)}else{if(Ext.isObject(b)&&"type" in b){return d.instantiateByAlias(f+"."+b.type,b)}}}if(b===true){return a||Ext.create(e)}if("xtype" in b){c=d.instantiateByAlias("widget."+b.xtype,b)}else{if("xclass" in b){c=Ext.create(b.xclass,b)}}if(c){if(a){a.destroy()}return c}if(a){return a.setConfig(b)}return Ext.create(e,b)},log:(function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}())});(function(){var d=[""],g=/([^\d\.])/,b=/[^\d]/g,a=/[\-+]/g,f=/\s/g,c=/_/g,e;Ext.Version=e=function(q,m){var r=this,k=r.padModes,h,o,l,n,s,j,p;if(q.isVersion){q=q.version}r.version=p=String(q).toLowerCase().replace(c,".").replace(a,"");h=p.charAt(0);if(h in k){p=p.substring(1);l=k[h]}else{l=m?k[m]:0}r.pad=l;j=p.search(g);r.shortVersion=p;if(j!==-1){r.release=s=p.substr(j,q.length);r.shortVersion=p.substr(0,j);s=e.releaseValueMap[s]||s}r.releaseValue=s||l;r.shortVersion=r.shortVersion.replace(b,"");r.parts=n=p.split(".");for(o=n.length;o--;){n[o]=parseInt(n[o],10)}if(l===Infinity){n.push(l)}r.major=n[0]||l;r.minor=n[1]||l;r.patch=n[2]||l;r.build=n[3]||l;return r};e.prototype={isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",compareTo:function(s){var t=this,m=t.pad,q=t.parts,u=q.length,l=s.isVersion?s:new e(s),j=l.pad,p=l.parts,o=p.length,h=Math.max(u,o),n,k,r;for(n=0;n<h;n++){k=(n<u)?q[n]:m;r=(n<o)?p[n]:j;if(k<r){return -1}if(k>r){return 1}}k=t.releaseValue;r=l.releaseValue;if(k<r){return -1}if(k>r){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(h){return this.compareTo(h)>0},isGreaterThanOrEqual:function(h){return this.compareTo(h)>=0},isLessThan:function(h){return this.compareTo(h)<0},isLessThanOrEqual:function(h){return this.compareTo(h)<=0},equals:function(h){return this.compareTo(h)===0},match:function(h){h=String(h);return this.version.substr(0,h.length)===h},toArray:function(){var h=this;return[h.getMajor(),h.getMinor(),h.getPatch(),h.getBuild(),h.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(h){return this.compareTo(h)>0},lt:function(h){return this.compareTo(h)<0},gtEq:function(h){return this.compareTo(h)>=0},ltEq:function(h){return this.compareTo(h)<=0}};Ext.apply(e,{aliases:{from:{extjs:"ext",core:"sencha-core"},to:{ext:["extjs"],"sencha-core":["core"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(h){return !h?0:(isNaN(h)?this.releaseValueMap[h]||h:parseInt(h,10))},compare:function(k,j){var h=k.isVersion?k:new e(k);return h.compareTo(j)},set:function(n,l,k){var j=e.aliases.to[l],h=k.isVersion?k:new e(k),m;n[l]=h;if(j){for(m=j.length;m-->0;){n[j[m]]=h}}return h}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(j){var h=Ext.compatVersions,k;if(!j){k=h.ext||h.touch||h.core}else{k=h[e.aliases.from[j]||j]}return k||Ext.getVersion(j)},setCompatVersion:function(j,h){e.set(Ext.compatVersions,j,h)},setVersion:function(j,h){Ext.lastRegisteredVersion=e.set(Ext.versions,j,h);return this},getVersion:function(j){var h=Ext.versions;if(!j){return h.ext||h.touch||h.core}return h[e.aliases.from[j]||j]},checkVersion:function(o,w){var s=Ext.isArray(o),k=e.aliases.from,x=s?o:d,j=x.length,l=Ext.versions,v=l.ext||l.touch,p,u,r,m,n,h,y,q,t;if(!s){d[0]=o}for(p=0;p<j;++p){if(!Ext.isString(y=x[p])){r=Ext.checkVersion(y.and||y.or,!y.or);if(y.not){r=!r}}else{if(y.indexOf(" ")>=0){y=y.replace(f,"")}u=y.indexOf("@");if(u<0){q=y;t=v}else{h=y.substring(0,u);if(!(t=l[k[h]||h])){if(w){return false}continue}q=y.substring(u+1)}u=q.indexOf("-");if(u<0){if(q.charAt(u=q.length-1)==="+"){m=q.substring(0,u);n=null}else{m=n=q}}else{if(u>0){m=q.substring(0,u);n=q.substring(u+1)}else{m=null;n=q.substring(u+1)}}r=true;if(m){m=new e(m,"~");r=m.ltEq(t)}if(r&&n){n=new e(n,"~");r=n.gtEq(t)}}if(r){if(!w){return true}}else{if(w){return false}}}return !!w},deprecate:function(h,k,l,j){if(e.compare(Ext.getVersion(h),k)<1){l.call(j)}}})}());(function(d){var e=(d&&d.packages)||{},c=d&&d.compatibility,b,a;for(b in e){a=e[b];Ext.setVersion(b,a.version)}if(c){if(Ext.isString(c)){Ext.setCompatVersion("core",c)}else{for(b in c){Ext.setCompatVersion(b,c[b])}}}if(!e.ext&&!e.touch){Ext.setVersion("ext","5")}})(Ext.manifest);Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b;c.names={internal:"_"+b,initializing:"is"+a+"Initializing",apply:"apply"+a,update:"update"+a,get:"get"+a,set:"set"+a,initGet:"initGet"+a,doSet:"doSet"+a,changeEvent:b.toLowerCase()+"change"};c.root=c};Ext.Config.map={};Ext.Config.get=function(b){var c=Ext.Config.map,a=c[b]||(c[b]=new Ext.Config(b));return a};Ext.Config.prototype={self:Ext.Config,isConfig:true,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(f,b,e,d){var a,c;if(!b){a=f}else{if(!f){a=b}else{a=Ext.Object.chain(b);for(c in f){if(!d||!(c in a)){a[c]=f[c]}}}}return a},mergeSets:function(e,c,a){var b=c?Ext.Object.chain(c):{},d,f;if(e instanceof Array){for(d=e.length;d--;){f=e[d];if(!a||!(f in b)){b[f]=true}}}else{if(e){if(e.constructor===Object){for(d in e){f=e[d];if(!a||!(d in b)){b[d]=f}}}else{if(!a||!(e in b)){b[e]=true}}}}return b},makeGetter:function(){var a=this.name,b=this.names.internal;return function(){var c=this.$configPrefixed?b:a;return this[c]}},makeInitGetter:function(){var a=this.name,e=this.names,d=e.set,b=e.get,c=e.initializing;return function(){var f=this;f[c]=true;delete f[b];f[d](f.config[a]);delete f[c];return f[b].apply(f,arguments)}},makeSetter:function(){var a=this.name,e=this.names,c=e.internal,d=e.get,b=e.apply,g=e.update,f;f=function(l){var k=this,j=k.$configPrefixed?c:a,h=k[j];delete k[d];if(!k[b]||(l=k[b](l,h))!==undefined){if(l!==(h=k[j])){k[j]=l;if(k[g]){k[g](l,h)}}}return k};f.$isDefault=true;return f}};(function(){var b=Ext.Config,c=b.map,a=Ext.Object;Ext.Configurator=function(d){var f=this,e=d.prototype,g=d.superclass?d.superclass.self.$config:null;f.cls=d;if(g){f.configs=a.chain(g.configs);f.cachedConfigs=a.chain(g.cachedConfigs);f.initMap=a.chain(g.initMap);f.values=a.chain(g.values)}else{f.configs={};f.cachedConfigs={};f.initMap={};f.values={}}e.config=e.defaultConfig=f.values;d.$config=f};Ext.Configurator.prototype={self:Ext.Configurator,initList:null,add:function(u,d){var v=this,h=v.cls,l=v.configs,w=v.cachedConfigs,n=v.initMap,q=h.prototype,x=d&&d.$config.configs,e=v.values,k,m,t,f,g,j,y,p,o,r;for(y in u){r=u[y];k=r&&r.constructor===Object;m=k&&"$value" in r?r:null;if(m){t=!!m.cached;r=m.$value}f=m&&m.merge;g=l[y];if(g){if(d){f=g.merge;if(!f){continue}m=null}else{f=f||g.merge}j=e[y];if(f){r=f.call(g,r,j,h,d)}else{if(k){if(j&&j.constructor===Object){r=a.merge({},j,r)}}}}else{if(x){g=x[y];m=null}else{g=b.get(y)}l[y]=g;if(g.cached||t){w[y]=true}p=g.names;if(!q[o=p.get]){q[o]=g.getGetter()}if(!q[o=p.set]){q[o]=g.getSetter()}}if(m){if(g.owner!==h){l[y]=g=Ext.Object.chain(g);g.owner=h}Ext.apply(g,m);delete g.$value}if(r!==null){n[y]=true}else{if(q.$configPrefixed){q[l[y].names.internal]=null}else{q[l[y].name]=null}if(y in n){n[y]=false}}e[y]=r}},configure:function(y,l){var A=this,k=A.configs,m=A.initMap,o=A.initListMap,w=A.initList,p=A.cls.prototype,d=a.fork(A.values),v=!y.$configStrict,q=0,s=!w,e,g,h,C,u,t,j,n,B,r,z,f,x;if(s){A.initList=w=[];A.initListMap=o={};y.isFirstInstance=true;for(B in m){C=m[B];g=k[B];z=g.cached;if(C){n=g.names;r=d[B];if(!p[n.set].$isDefault||p[n.apply]||p[n.update]||typeof r==="object"){if(z){(e||(e=[])).push(g)}else{w.push(g);o[B]=true}y[n.get]=g.initGetter||g.getInitGetter()}else{p[g.getInternalName(p)]=r}}else{if(z){p[g.getInternalName(p)]=undefined}}}}j=e&&e.length;if(j){for(u=0;u<j;++u){t=e[u].getInternalName(p);y[t]=null}for(u=0;u<j;++u){n=(g=e[u]).names;h=n.get;if(y.hasOwnProperty(h)){y[n.set](d[g.name]);delete y[h]}}for(u=0;u<j;++u){t=e[u].getInternalName(p);p[t]=y[t];delete y[t]}}if(s){if(y.afterCachedConfig&&!y.afterCachedConfig.$nullFn){y.afterCachedConfig(l)}}y.isConfiguring=true;y.config=d;for(u=0,j=w.length;u<j;++u){g=w[u];y[g.names.get]=g.initGetter||g.getInitGetter()}if(y.transformInstanceConfig){l=y.transformInstanceConfig(l)}if(l){for(B in l){r=l[B];g=k[B];if(!g){if(v){y[B]=r}}else{if(!g.lazy){++q}if(!o[B]){y[g.names.get]=g.initGetter||g.getInitGetter()}f=g.merge;if(f){r=f.call(g,r,d[B],y)}else{if(r&&r.constructor===Object){x=d[B];if(x&&x.constructor===Object){r=a.merge(d[B],r)}else{r=Ext.clone(r)}}}}d[B]=r}}if(y.beforeInitConfig&&!y.beforeInitConfig.$nullFn){if(y.beforeInitConfig(l)===false){return}}if(l){for(B in l){if(!q){break}g=k[B];if(g&&!g.lazy){--q;n=g.names;h=n.get;if(y.hasOwnProperty(h)){y[n.set](d[B]);delete y[n.get]}}}}for(u=0,j=w.length;u<j;++u){g=w[u];n=g.names;h=n.get;if(!g.lazy&&y.hasOwnProperty(h)){y[n.set](d[g.name]);delete y[h]}}delete y.isConfiguring},getCurrentConfig:function(e){var d=e.defaultConfig,g={},f;for(f in d){g[f]=e[c[f].names.get]()}return g},merge:function(m,k,f){var h=this.configs,e,l,d,g,j;for(e in f){l=f[e];g=h[e];if(g){j=g.merge;if(j){l=j.call(g,l,k[e],m)}else{if(l&&l.constructor===Object){d=k[e];if(d&&d.constructor===Object){l=Ext.Object.merge(d,l)}else{l=Ext.clone(l)}}}}k[e]=l}return k},reconfigure:function(s,n,u){var j=s.config,t=s.initialConfig,k=[],r=s.$configStrict,o=this.configs,f=u&&u.defaults,h=u&&u.strict===false,m,q,g,l,d,p,e;for(d in n){if(f&&s.hasOwnProperty(d)){continue}j[d]=n[d];m=o[d];if(m){s[m.names.get]=m.initGetter||m.getInitGetter()}else{if(r){continue}}k.push(d)}for(g=0,l=k.length;g<l;g++){d=k[g];m=o[d];if(m){p=m.names;q=p.get;if(s.hasOwnProperty(q)){s[p.set](n[d]);delete s[q]}}else{if(!r){m=c[d]||Ext.Config.get(d);p=m.names;if(s[p.set]){s[p.set](n[d])}else{if(h){s[d]=n[d]}}}}}}}}());Ext.Base=(function(c){var b=[],j,l=[],m=function(q,p){var s=this,o,n,r;if(q){n=Ext.Config.map[q];r=n.names.get;if(p&&s.hasOwnProperty(r)){o=s.config[q]}else{o=s[r]()}}else{o=s.getCurrentConfig()}return o},f=function(n){return function(){return this[n].apply(this,arguments)}},a=Ext.Version,h=/^\d/,k={},e={},g=function(){},d=g.prototype;Ext.apply(g,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(t){var C=this,o=[],q=Ext.getCompatVersion(t.name),B,x,s,y,D,v,A,u,z,E,w,n,r,p;for(x in t){if(h.test(x)){p=new Ext.Version(x);p.deprecations=t[x];o.push(p)}}o.sort(a.compare);for(s=o.length;s--;){B=(p=o[s]).deprecations;D=C.prototype;r=B.statics;v=q&&q.lt(p);if(!v){break}while(B){z=B.methods;if(z){for(E in z){n=z[E];u=null;if(!n){}else{if(Ext.isString(n)){if(v){u=f(n)}}else{y="";if(n.message||n.fn){n=n.fn}A=D.hasOwnProperty(E)&&D[E];if(v&&n){n.$owner=C;n.$name=E;if(A){n.$previous=A}u=n}}}if(u){D[E]=u}}}B=r;r=null;D=C}}},extend:function(r){var t=this,n=r.prototype,p,q,s,o,u;p=t.prototype=Ext.Object.chain(n);p.self=t;t.superclass=p.superclass=n;if(!r.$isClass){for(q in d){if(q in p){p[q]=d[q]}}}u=n.$inheritableStatics;if(u){for(q=0,s=u.length;q<s;q++){o=u[q];if(!t.hasOwnProperty(o)){t[o]=r[o]}}}if(r.$onExtended){t.$onExtended=r.$onExtended.slice()}t.getConfigurator()},$onExtended:[],triggerExtended:function(){var p=this.$onExtended,o=p.length,n,q;if(o>0){for(n=0;n<o;n++){q=p[n];q.fn.apply(q.scope||this,arguments)}}},onExtended:function(o,n){this.$onExtended.push({fn:o,scope:n});return this},addStatics:function(n){this.addMembers(n,true);return this},addInheritableStatics:function(o){var r,n,q=this.prototype,p,s;r=q.$inheritableStatics;n=q.$hasInheritableStatics;if(!r){r=q.$inheritableStatics=[];n=q.$hasInheritableStatics={}}for(p in o){if(o.hasOwnProperty(p)){s=o[p];this[p]=s;if(!n[p]){n[p]=true;r.push(p)}}}return this},addMembers:function(r,C,o){var A=this,v=Ext.Function.clone,y=C?A:A.prototype,s=!C&&y.defaultConfig,B=Ext.enumerables,w=r.privates,x,u,z,t,n,p,q;if(w){delete r.privates;if(!C){q=w.statics;delete w.statics}A.addMembers(w,C,p);if(q){A.addMembers(q,true,p)}}for(n in r){if(r.hasOwnProperty(n)){t=r[n];if(typeof t==="function"&&!t.$isClass&&!t.$nullFn){if(t.$owner){t=v(t)}if(y.hasOwnProperty(n)){t.$previous=y[n]}t.$owner=A;t.$name=n}else{if(s&&(n in s)&&!y.config.hasOwnProperty(n)){(x||(x={}))[n]=t;continue}}y[n]=t}}if(x){A.addConfig(x)}if(B){for(u=0,z=B.length;u<z;++u){if(r.hasOwnProperty(n=B[u])){t=r[n];if(t&&!t.$nullFn){if(t.$owner){t=v(t)}t.$owner=A;t.$name=n;if(y.hasOwnProperty(n)){t.$previous=y[n]}}y[n]=t}}}return this},addMember:function(n,o){k[n]=o;this.addMembers(k);delete k[n];return this},borrow:function(t,n){var p=t.prototype,r={},q,s,o;n=Ext.Array.from(n);for(q=0,s=n.length;q<s;q++){o=n[q];r[o]=p[o]}return this.addMembers(r)},override:function(o){var q=this,t=o.statics,s=o.inheritableStatics,p=o.config,n=o.mixins,r=o.cachedConfig;if(t||s||p){o=Ext.apply({},o)}if(t){q.addMembers(t,true);delete o.statics}if(s){q.addInheritableStatics(s);delete o.inheritableStatics}if(p){q.addConfig(p);delete o.config}if(r){q.addCachedConfig(r);delete o.cachedConfig}delete o.mixins;q.addMembers(o);if(n){q.mixin(n)}return q},callParent:function(n){var o;return(o=this.callParent.caller)&&(o.$previous||((o=o.$owner?o:o.caller)&&o.$owner.superclass.self[o.$name])).apply(this,n||b)},callSuper:function(n){var o;return(o=this.callSuper.caller)&&((o=o.$owner?o:o.caller)&&o.$owner.superclass.self[o.$name]).apply(this,n||b)},mixin:function(n,o){var t=this,z,v,y,u,p,s,x,w,r;if(typeof n!=="string"){r=n;if(r instanceof Array){for(p=0,s=r.length;p<s;p++){z=r[p];t.mixin(z.prototype.mixinId||z.$className,z)}}else{for(var q in r){t.mixin(q,r[q])}}return}z=o.prototype;v=t.prototype;if(z.onClassMixedIn){z.onClassMixedIn.call(o,t)}if(!v.hasOwnProperty("mixins")){if("mixins" in v){v.mixins=Ext.Object.chain(v.mixins)}else{v.mixins={}}}for(y in z){w=z[y];if(y==="mixins"){Ext.applyIf(v.mixins,w)}else{if(!(y==="mixinId"||y==="config")&&(v[y]===undefined)){v[y]=w}}}u=z.$inheritableStatics;if(u){for(p=0,s=u.length;p<s;p++){x=u[p];if(!t.hasOwnProperty(x)){t[x]=o[x]}}}if("config" in z){t.addConfig(z.config,o)}v.mixins[n]=z;if(z.afterClassMixedIn){z.afterClassMixedIn.call(o,t)}return t},addConfig:function(o,p){var n=this.$config||this.getConfigurator();n.add(o,p)},addCachedConfig:function(n,p){var q={},o;for(o in n){q[o]={cached:true,$value:n[o]}}this.addConfig(q,p)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:c(function(o,n){e[o]=function(){return this[n].apply(this,arguments)};this.override(e);delete e[o]})});for(j in g){if(g.hasOwnProperty(j)){l.push(j)}}g.$staticMembers=l;g.getConfigurator();g.addMembers({$className:"Ext.Base",isInstance:true,$configPrefixed:true,$configStrict:true,isConfiguring:false,isFirstInstance:false,statics:function(){var o=this.statics.caller,n=this.self;if(!o){return n}return o.$owner},callParent:function(o){var p,n=(p=this.callParent.caller)&&(p.$previous||((p=p.$owner?p:p.caller)&&p.$owner.superclass[p.$name]));return n.apply(this,o||b)},callSuper:function(o){var p,n=(p=this.callSuper.caller)&&((p=p.$owner?p:p.caller)&&p.$owner.superclass[p.$name]);return n.apply(this,o||b)},self:g,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(p){var o=this,n=o.getConfigurator();o.initConfig=Ext.emptyFn;o.initialConfig=p||{};n.configure(o,p);return o},beforeInitConfig:Ext.emptyFn,getConfig:m,setConfig:function(p,r,o){var q=this,n;if(p){if(typeof p==="string"){n={};n[p]=r}else{n=p}q.getConfigurator().reconfigure(q,n,o)}return q},getCurrentConfig:function(){var n=this.getConfigurator();return n.getCurrentConfig(this)},hasConfig:function(n){return n in this.defaultConfig},getInitialConfig:function(o){var n=this.config;if(!o){return n}return n[o]},$links:null,link:function(o,q){var p=this,n=p.$links||(p.$links={});n[o]=true;p[o]=q;return q},unlink:function(s){var q=this,n,p,o,r;for(n=0,p=s.length;n<p;n++){o=s[n];r=q[o];if(r){if(r.isInstance&&!r.isDestroyed){r.destroy()}else{if(r.parentNode&&"nodeType" in r){r.parentNode.removeChild(r)}}}q[o]=null}return q},destroy:function(){var o=this,n=o.$links;o.destroy=Ext.emptyFn;o.isDestroyed=true;if(n){o.$links=null;o.unlink(Ext.Object.getKeys(n))}}});d.callOverridden=d.callParent;return g}(Ext.Function.flexSetter));(function(){var c,b=Ext.Base,d=b.$staticMembers;function a(f){function e(){return this.constructor.apply(this,arguments)||null}return e}Ext.Class=c=function(f,g,e){if(typeof f!="function"){e=g;g=f;f=null}if(!g){g={}}f=c.create(f,g);c.process(f,g,e);return f};Ext.apply(c,{makeCtor:a,onBeforeCreated:function(f,g,e){f.addMembers(g);e.onCreated.call(f,f)},create:function(e,h){var g=d.length,f;if(!e){e=a()}while(g--){f=d[g];e[f]=b[f]}return e},process:function(e,m,g){var f=m.preprocessors||c.defaultPreprocessors,p=this.preprocessors,s={onBeforeCreated:this.onBeforeCreated},r=[],t,l,k,q,h,o,n;delete m.preprocessors;e._classHooks=s;for(k=0,q=f.length;k<q;k++){t=f[k];if(typeof t=="string"){t=p[t];l=t.properties;if(l===true){r.push(t.fn)}else{if(l){for(h=0,o=l.length;h<o;h++){n=l[h];if(m.hasOwnProperty(n)){r.push(t.fn);break}}}}}else{r.push(t)}}s.onCreated=g?g:Ext.emptyFn;s.preprocessors=r;this.doProcess(e,m,s)},doProcess:function(f,k,e){var j=this,l=e.preprocessors,g=l.shift(),h=j.doProcess;for(;g;g=l.shift()){if(g.call(j,f,k,e,h)===false){return}}e.onBeforeCreated.apply(j,arguments)},preprocessors:{},registerPreprocessor:function(f,j,g,e,h){if(!e){e="last"}if(!g){g=[f]}this.preprocessors[f]={name:f,properties:g||false,fn:j};this.setDefaultPreprocessorPosition(f,e,h);return this},getPreprocessor:function(e){return this.preprocessors[e]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(e){this.defaultPreprocessors=Ext.Array.from(e);return this},setDefaultPreprocessorPosition:function(g,j,h){var e=this.defaultPreprocessors,f;if(typeof j=="string"){if(j==="first"){e.unshift(g);return this}else{if(j==="last"){e.push(g);return this}}j=(j==="after")?1:-1}f=Ext.Array.indexOf(e,h);if(f!==-1){Ext.Array.splice(e,Math.max(0,f+j),0,g)}return this}});c.registerPreprocessor("extend",function(f,h,n){var j=Ext.Base,k=j.prototype,l=h.extend,e,m,g;delete h.extend;if(l&&l!==Object){e=l}else{e=j}m=e.prototype;if(!e.$isClass){for(g in k){if(!m[g]){m[g]=k[g]}}}f.extend(e);f.triggerExtended.apply(f,arguments);if(h.onClassExtended){f.onExtended(h.onClassExtended,f);delete h.onClassExtended}},true);c.registerPreprocessor("privates",function(e,h){var g=h.privates,j=g.statics,f=g.privacy||true;delete h.privates;delete g.statics;e.addMembers(g,false,f);if(j){e.addMembers(j,true,f)}});c.registerPreprocessor("statics",function(e,f){e.addStatics(f.statics);delete f.statics});c.registerPreprocessor("inheritableStatics",function(e,f){e.addInheritableStatics(f.inheritableStatics);delete f.inheritableStatics});c.registerPreprocessor("platformConfig",function(g,o,s){var p=o.platformConfig,k=o.config||{},q=Ext.theme||(Ext.theme={name:"Default"}),h,n,f,m,r,l,e;delete o.platformConfig;q=q&&q.name;if(!Ext.filterPlatform){Ext.filterPlatform=function(w){var F=false,u=navigator.userAgent,y,C;w=[].concat(w);function B(G){var j=/Mobile(\/|\s)/.test(G);return/(iPhone|iPod)/.test(G)||(!/(Silk)/.test(G)&&(/(Android)/.test(G)&&(/(Android 2)/.test(G)||j)))||(/(BlackBerry|BB)/.test(G)&&j)||/(Windows Phone)/.test(G)}function A(j){return !B(j)&&(/iPad/.test(j)||/Android/.test(j)||/(RIM Tablet OS)/.test(j)||(/MSIE 10/.test(j)&&/; Touch/.test(j)))}var t=window.location.search.substr(1),v=t.split("&"),x={},D,z;for(z=0;z<v.length;z++){var E=v[z].split("=");x[E[0]]=E[1]}D=x.platform;if(D){return w.indexOf(D)!=-1}for(y=0,C=w.length;y<C;y++){switch(w[y]){case"phone":F=B(u);break;case"tablet":F=A(u);break;case"desktop":F=!B(u)&&!A(u);break;case"ios":F=/(iPad|iPhone|iPod)/.test(u);break;case"android":F=/(Android|Silk)/.test(u);break;case"blackberry":F=/(BlackBerry|BB)/.test(u);break;case"safari":F=/Safari/.test(u)&&!(/(BlackBerry|BB)/.test(u));break;case"chrome":F=/Chrome/.test(u);break;case"ie10":F=/MSIE 10/.test(u);break}if(F){return true}}return false}}for(m=0,r=p.length;m<r;m++){f=p[m];h=f.platform;delete f.platform;n=[].concat(f.theme);e=n.length;delete f.theme;if(h&&Ext.filterPlatform(h)){Ext.merge(k,f)}if(e){for(l=0;l<e;l++){if(Ext.theme.name==n[l]){Ext.merge(k,f)}}}}});c.registerPreprocessor("config",function(e,f){if(f.hasOwnProperty("$configPrefixed")){e.prototype.$configPrefixed=f.$configPrefixed}e.addConfig(f.config);delete f.config});c.registerPreprocessor("cachedConfig",function(e,f){if(f.hasOwnProperty("$configPrefixed")){e.prototype.$configPrefixed=f.$configPrefixed}e.addCachedConfig(f.cachedConfig);delete f.cachedConfig});c.registerPreprocessor("mixins",function(h,j,e){var g=j.mixins,f=e.onCreated;delete j.mixins;e.onCreated=function(){e.onCreated=f;h.mixin(g);return e.onCreated.apply(this,arguments)}});Ext.extend=function(g,h,f){if(arguments.length===2&&Ext.isObject(h)){f=h;h=g;g=null}var e;if(!h){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}f.extend=h;f.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"];if(g){e=new c(g,f);e.prototype.constructor=g}else{e=new c(f)}e.prototype.override=function(k){for(var j in k){if(k.hasOwnProperty(j)){this[j]=k[j]}}};return e}}());Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(b,a){return this.addMapping(b,a,this.aliasToName,this.nameToAliases)},addAlternate:function(a,b){return this.addMapping(a,b,this.alternateToName,this.nameToAlternates)},addMapping:function(k,e,f,m){var b=k.$className||k,h=b,j=this._array1,n,d,o,g,c,l;if(Ext.isString(b)){h={};h[b]=e}for(o in h){d=h[o];if(Ext.isString(d)){j[0]=d;d=j}c=d.length;l=m[o]||(m[o]=[]);for(g=0;g<c;++g){if(!(n=d[g])){continue}if(f[n]!==o){f[n]=o;l.push(n)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||""},getNameByAlternate:function(a){return this.alternateToName[a]||""},getNamesByExpression:function(l,a,h){var u=this,r=u.aliasToName,o=u.alternateToName,b=u.nameToAliases,d=u.nameToAlternates,t=h?a:{},k=[],s=Ext.isString(l)?[l]:l,g=s.length,e=u.wildcardRe,c,p,q,j,m,v,f;for(p=0;p<g;++p){if((c=s[p]).indexOf("*")<0){if(!(v=r[c])){if(!(v=o[c])){v=c}}if(!(v in t)&&!(a&&(v in a))){t[v]=1;k.push(v)}}else{f=new RegExp("^"+c.replace(e,"(.*?)")+"$");for(v in b){if(!(v in t)&&!(a&&(v in a))){if(!(j=f.test(v))){m=(q=b[v]).length;while(!j&&m-->0){j=f.test(q[m])}q=d[v];if(q&&!j){m=q.length;while(!j&&m-->0){j=f.test(q[m])}}}if(j){t[v]=1;k.push(v)}}}}}return k},getPath:function(b){var c=this,e=c.paths,a="",d;if(b in e){a=e[b]}else{d=c.getPrefix(b);if(d){b=b.substring(d.length+1);a=e[d];if(a){a+="/"}}a+=b.replace(c.dotRe,"/")+".js"}return a},getPrefix:function(b){if(b in this.paths){return b}var e=this.getPrefixes(),a=e.length,c,d;while(a-->0){c=(d=e[a]).length;if(c<b.length&&b.charAt(c)==="."&&d===b.substring(0,c)){return d}}return""},getPrefixes:function(){var a=this,b=a.prefixes;if(!b){a.prefixes=b=a.names.slice(0);b.sort(a._compareNames)}return b},removeName:function(b){var f=this,j=f.aliasToName,l=f.alternateToName,k=f.nameToAliases,e=f.nameToAlternates,c=k[b],g=e[b],d,h;delete k[b];delete e[b];if(c){for(d=c.length;d--;){if(b===(h=c[d])){delete j[h]}}}if(g){for(d=g.length;d--;){if(b===(h=g[d])){delete l[h]}}}},resolveName:function(a){var b=this,c;if(!(a in b.nameToAliases)){if(!(c=b.aliasToName[a])){c=b.alternateToName[a]}}return c||a},select:function(e,c){var d=this,f={},b={excludes:f,exclude:function(){d.getNamesByExpression(arguments,f,true);return this}},a;for(a in e){b[a]=d.selectMethod(f,e[a],c||e)}return b},selectMethod:function(d,b,a){var c=this;return function(e){var f=Ext.Array.slice(arguments,1);f.unshift(c.getNamesByExpression(e,d));return b.apply(a,f)}},setPath:Ext.Function.flexSetter(function(a,c){var b=this;b.paths[a]=c;b.names.push(a);b.prefixes=null;return b}),_compareNames:function(a,c){var b=a.length-c.length;if(!b){b=(a<c)?-1:1}return b}};Ext.ClassManager=(function(e,l,c,p,f){var j=Ext.Class.makeCtor,a=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],enableNamespaceParseCache:true,namespaceParseCache:{},instantiators:[],isCreated:function(v){var u,w,t,s,x;if(a.classes[v]||a.existCache[v]){return true}s=f;x=a.parseNamespace(v);for(u=0,w=x.length;u<w;u++){t=x[u];if(typeof t!=="string"){s=t}else{if(!s||!s[t]){return false}s=s[t]}}a.triggerCreated(v);return true},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},triggerCreated:function(s){if(!a.existCache[s]){a.triggerExists(s)}a.classState[s]+=20;a.notify(s,a.createdListeners,a.nameCreatedListeners)},onCreated:function(u,t,s){a.addListener(u,t,s,a.createdListeners,a.nameCreatedListeners)},triggerExists:function(s,t){a.existCache[s]=t||1;a.classState[s]+=20;a.notify(s,a.existsListeners,a.nameExistsListeners)},onExists:function(u,t,s){a.addListener(u,t,s,a.existsListeners,a.nameExistsListeners)},notify:function(A,C,u){var v=a.getAlternatesByName(A),B=[A],x,z,w,y,t,s;for(x=0,z=C.length;x<z;x++){t=C[x];t.fn.call(t.scope,A)}while(B){for(x=0,z=B.length;x<z;x++){s=B[x];C=u[s];if(C){for(w=0,y=C.length;w<y;w++){t=C[w];t.fn.call(t.scope,s)}delete u[s]}}B=v;v=null}},addListener:function(x,w,v,u,t){if(Ext.isArray(v)){x=Ext.Function.createBarrier(v.length,x,w);for(s=0;s<v.length;s++){this.addListener(x,null,v[s],u,t)}return}var s,y={fn:x,scope:w};if(v){if(this.isCreated(v)){x.call(w,v);return}if(!t[v]){t[v]=[]}t[v].push(y)}else{u.push(y)}},parseNamespace:function(u){var s=this.namespaceParseCache,v,x,z,t,C,B,A,w,y;if(this.enableNamespaceParseCache){if(s.hasOwnProperty(u)){return s[u]}}v=[];x=this.namespaceRewrites;z=f;t=u;for(w=0,y=x.length;w<y;w++){C=x[w];B=C.from;A=C.to;if(t===B||t.substring(0,B.length)===B){t=t.substring(B.length);if(typeof A!=="string"){z=A}else{v=v.concat(A.split("."))}break}}v.push(z);v=v.concat(t.split("."));if(this.enableNamespaceParseCache){s[u]=v}return v},setNamespace:function(v,y){var t=f,z=this.parseNamespace(v),x=z.length-1,s=z[x],w,u;for(w=0;w<x;w++){u=z[w];if(typeof u!=="string"){t=u}else{if(!t[u]){t[u]={}}t=t[u]}}t[s]=y;return t[s]},createNamespaces:function(){var s=f,x,u,v,t,w,y;for(v=0,w=arguments.length;v<w;v++){x=this.parseNamespace(arguments[v]);for(t=0,y=x.length;t<y;t++){u=x[t];if(typeof u!=="string"){s=u}else{if(!s[u]){s[u]={}}s=s[u]}}}return s},set:function(s,v){var u=this,t=u.getName(v);u.classes[s]=u.setNamespace(s,v);if(t&&t!==s){u.addAlternate(t,s)}return this},get:function(u){var w=this.classes,s,y,t,v,x;if(w[u]){return w[u]}s=f;y=this.parseNamespace(u);for(v=0,x=y.length;v<x;v++){t=y[v];if(typeof t!=="string"){s=t}else{if(!s||!s[t]){return null}s=s[t]}}return s},addNameAliasMappings:function(s){this.addAlias(s)},addNameAlternateMappings:function(s){this.addAlternate(s)},getByAlias:function(s){return this.get(this.getNameByAlias(s))},getName:function(s){return s&&s.$className||""},getClass:function(s){return s&&s.self||null},create:function(t,v,s){var u=j(t);if(typeof v==="function"){v=v(u)}v.$className=t;return new e(u,v,function(){var w=v.postprocessors||a.defaultPostprocessors,D=a.postprocessors,E=[],C,y,B,x,A,z,F;delete v.postprocessors;for(y=0,B=w.length;y<B;y++){C=w[y];if(typeof C==="string"){C=D[C];z=C.properties;if(z===true){E.push(C.fn)}else{if(z){for(x=0,A=z.length;x<A;x++){F=z[x];if(v.hasOwnProperty(F)){E.push(C.fn);break}}}}}else{E.push(C)}}v.postprocessors=E;v.createdFn=s;a.processCreate(t,this,v)})},processCreate:function(v,t,x){var w=this,s=x.postprocessors.shift(),u=x.createdFn;if(!s){if(v){w.set(v,t)}delete t._classHooks;if(u){u.call(t,t)}if(v){w.triggerCreated(v)}return}if(s.call(w,v,t,x,w.processCreate)!==false){w.processCreate(v,t,x)}},createOverride:function(y,w,u){var A=this,B=w.override,D=w.requires,v=w.uses,x=w.mixins,s,C=w.compatibility,z,t=function(){var E,I,H,G,F;if(!z){I=D?D.slice(0):[];if(x){if(!(s=x instanceof Array)){for(G in x){if(Ext.isString(E=x[G])){I.push(E)}}}else{for(H=0,F=x.length;H<F;++H){if(Ext.isString(E=x[H])){I.push(E)}}}}z=true;if(I.length){Ext.require(I,t);return}}if(s){for(H=0,F=x.length;H<F;++H){if(Ext.isString(E=x[H])){x[H]=Ext.ClassManager.get(E)}}}else{if(x){for(G in x){if(Ext.isString(E=x[G])){x[G]=Ext.ClassManager.get(E)}}}}E=A.get(B);delete w.override;delete w.compatibility;delete w.requires;delete w.uses;Ext.override(E,w);A.triggerCreated(y);if(v){Ext.Loader.addUsedClasses(v)}if(u){u.call(E,E)}};A.triggerExists(y,2);if(!C||Ext.checkVersion(C)){A.onCreated(t,A,B)}return A},instantiateByAlias:function(){var t=arguments[0],s=c.call(arguments),u=this.getNameByAlias(t);s[0]=u;return Ext.create.apply(Ext,s)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(t,s){s=p(s,true);s.unshift(t);return Ext.create.apply(Ext,s)},getInstantiator:function(v){var u=this.instantiators,w,t,s;w=u[v];if(!w){t=v;s=[];for(t=0;t<v;t++){s.push("a["+t+"]")}w=u[v]=new Function("c","a","return new c("+s.join(",")+")")}return w},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(t,w,u,s,v){if(!s){s="last"}if(!u){u=[t]}this.postprocessors[t]={name:t,properties:u||false,fn:w};this.setDefaultPostprocessorPosition(t,s,v);return this},setDefaultPostprocessors:function(s){this.defaultPostprocessors=p(s);return this},setDefaultPostprocessorPosition:function(t,w,v){var u=this.defaultPostprocessors,s;if(typeof w==="string"){if(w==="first"){u.unshift(t);return this}else{if(w==="last"){u.push(t);return this}}w=(w==="after")?1:-1}s=Ext.Array.indexOf(u,v);if(s!==-1){Ext.Array.splice(u,Math.max(0,s+w),0,t)}return this}});a.registerPostprocessor("alias",function(u,t,x){var s=Ext.Array.from(x.alias),v,w;for(v=0,w=s.length;v<w;v++){l=s[v];this.addAlias(t,l)}},["xtype","alias"]);a.registerPostprocessor("singleton",function(t,s,v,u){if(v.singleton){u.call(this,t,new s(),v)}else{return true}return false});a.registerPostprocessor("alternateClassName",function(t,s,x){var v=x.alternateClassName,u,w,y;if(!(v instanceof Array)){v=[v]}for(u=0,w=v.length;u<w;u++){y=v[u];this.set(y,s)}});a.registerPostprocessor("debugHooks",function(t,s,u){var v=s.isInstance?s.self:s;delete v.prototype.debugHooks});a.registerPostprocessor("deprecated",function(t,s,u){var v=s.isInstance?s.self:s;v.addDeprecations(u.deprecated);delete v.prototype.deprecated});Ext.apply(Ext,{create:function(){var u=arguments[0],v=typeof u,t=c.call(arguments,1),s;if(v==="function"){s=u}else{if(v!=="string"&&t.length===0){t=[u];if(!(u=u.xclass)){u=t[0].xtype;if(u){u="widget."+u}}}u=a.resolveName(u);s=a.get(u)}if(!s){Ext.syncRequire(u);s=a.get(u)}return a.getInstantiator(t.length)(s,t)},widget:function(u,t){var x=u,v,w,s;if(typeof x!=="string"){t=u;x=t.xtype;w=t.xclass}else{t=t||{}}if(t.isComponent){return t}if(!w){v="widget."+x;w=a.getNameByAlias(v)}if(w){s=a.get(w)}if(!s){return Ext.create(w||v,t)}return new s(t)},createByAlias:l(a,"instantiateByAlias"),define:function(t,u,s){if(u.override){a.classState[t]=20;return a.createOverride.apply(a,arguments)}a.classState[t]=10;return a.create.apply(a,arguments)},undefine:function(v){var t=a.classes,x,y,u,s;delete a.namespaceParseCache[v];delete t[v];delete a.existCache[v];delete a.classState[v];a.removeName(v);x=a.parseNamespace(v);y=x.length-1;u=x[0];for(s=1;s<y;s++){u=u[x[s]];if(!u){return}}try{delete u[x[y]]}catch(w){u[x[y]]=undefined}},getClassName:l(a,"getName"),getDisplayName:function(s){if(s){if(s.displayName){return s.displayName}if(s.$name&&s.$class){return Ext.getClassName(s.$class)+"#"+s.$name}if(s.$className){return s.$className}}return"Anonymous"},getClass:l(a,"getClass"),namespace:l(a,"createNamespaces")});Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;e.registerPreprocessor("className",function(s,t){if("$className" in t){s.$className=t.$className}},true,"first");e.registerPreprocessor("alias",function(D,x){var B=D.prototype,u=p(x.xtype),s=p(x.alias),E="widget.",C=E.length,y=Array.prototype.slice.call(B.xtypesChain||[]),v=Ext.merge({},B.xtypesMap||{}),w,A,z,t;for(w=0,A=s.length;w<A;w++){z=s[w];if(z.substring(0,C)===E){t=z.substring(C);Ext.Array.include(u,t)}}D.xtype=x.xtype=u[0];x.xtypes=u;for(w=0,A=u.length;w<A;w++){t=u[w];if(!v[t]){v[t]=true;y.push(t)}}x.xtypesChain=y;x.xtypesMap=v;Ext.Function.interceptAfter(x,"onClassCreated",function(){var F=B.mixins,H,G;for(H in F){if(F.hasOwnProperty(H)){G=F[H];u=G.xtypes;if(u){for(w=0,A=u.length;w<A;w++){t=u[w];if(!v[t]){v[t]=true;y.push(t)}}}}}});for(w=0,A=u.length;w<A;w++){t=u[w];Ext.Array.include(s,E+t)}x.alias=s},["xtype","alias"]);if(Ext.manifest){var d=Ext.manifest,h=d.classes,r=d.paths,g={},o={},n,k,b,q,m;if(r){if(d.bootRelative){m=Ext.Boot.baseUrl;for(q in r){if(r.hasOwnProperty(q)){r[q]=m+r[q]}}}a.setPath(r)}if(h){for(n in h){o[n]=[];g[n]=[];k=h[n];if(k.alias){g[n]=k.alias}if(k.alternates){o[n]=k.alternates}}}a.addAlias(g);a.addAlternate(o)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));Ext.env||(Ext.env={});Ext.env.Browser=function(t,n){var u=this,a=u.browserPrefixes,b=u.enginePrefixes,q=t.match(new RegExp("((?:"+Ext.Object.getValues(a).join(")|(?:")+"))([\\w\\._]+)")),g=t.match(new RegExp("((?:"+Ext.Object.getValues(b).join(")|(?:")+"))([\\w\\._]+)")),c=u.browserNames,p=c.other,j=u.engineNames,s=j.other,l="",f="",d="",h=false,o,m,k,v,r;u.userAgent=t;if(q){p=c[Ext.Object.getKey(a,q[1])];if(p==="Safari"&&/^Opera/.test(t)){p="Opera"}l=new Ext.Version(q[2])}if(g){s=j[Ext.Object.getKey(b,g[1])];f=new Ext.Version(g[2])}if(s=="Trident"&&p!="IE"){p="IE";var e=t.match(/.*rv:(\d+.\d+)/);if(e&&e.length){e=e[1];l=new Ext.Version(e)}}if(t.match(/FB/)&&p=="Other"){p=c.safari;s=j.webkit}if(t.match(/Android.*Chrome/g)){p="ChromeMobile"}if(t.match(/OPR/)){p="Opera";q=t.match(/OPR\/(\d+.\d+)/);l=new Ext.Version(q[1])}Ext.apply(this,{engineName:s,engineVersion:f,name:p,version:l});this.setFlag(p,true,n);if(l){d=l.getMajor()||"";if(u.is.IE){d=parseInt(d,10);k=document.documentMode;if(k==7||(d==7&&k!=8&&k!=9&&k!=10)){d=7}else{if(k==8||(d==8&&k!=8&&k!=9&&k!=10)){d=8}else{if(k==9||(d==9&&k!=7&&k!=8&&k!=10)){d=9}else{if(k==10||(d==10&&k!=7&&k!=8&&k!=9)){d=10}else{if(k==11||(d==11&&k!=7&&k!=8&&k!=9&&k!=10)){d=11}}}}}r=Math.max(d,11);for(o=7;o<=r;++o){m="isIE"+o;if(d<=o){Ext[m+"m"]=true}if(d===o){Ext[m]=true}if(d>=o){Ext[m+"p"]=true}}}if(u.is.Opera&&parseInt(d,10)<=12){Ext.isOpera12m=true}Ext.chromeVersion=Ext.isChrome?d:0;Ext.firefoxVersion=Ext.isFirefox?d:0;Ext.ieVersion=Ext.isIE?d:0;Ext.operaVersion=Ext.isOpera?d:0;Ext.safariVersion=Ext.isSafari?d:0;Ext.webKitVersion=Ext.isWebKit?d:0;this.setFlag(p+d,true,n);this.setFlag(p+l.getShortVersion())}for(o in c){if(c.hasOwnProperty(o)){v=c[o];this.setFlag(v,p===v)}}this.setFlag(v);if(f){this.setFlag(s+(f.getMajor()||""));this.setFlag(s+f.getShortVersion())}for(o in j){if(j.hasOwnProperty(o)){v=j[o];this.setFlag(v,s===v,n)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined"){h=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}else{if(!!window.isNK){h=true;this.setFlag("Sencha")}}if(/(Glass)/i.test(t)){this.setFlag("GoogleGlass")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(t)){h=true}this.setFlag("WebView",h);this.isStrict=Ext.isStrict=document.compatMode=="CSS1Compat";this.isSecure=/^https/i.test(window.location.protocol);this.identity=p+d+(this.isStrict?"Strict":"Quirks")};Ext.env.Browser.prototype={constructor:Ext.env.Browser,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},browserPrefixes:{ie:"MSIE ",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(a){return !!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(a,c,b){if(typeof c=="undefined"){c=true}this.is[a]=c;this.is[a.toLowerCase()]=c;if(b){Ext["is"+a]=c}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(a){var b=this.propertyPrefixes[this.engineName];if(b.length>0){return b+Ext.String.capitalize(a)}return a},getPreferredTranslationMethod:function(a){if(typeof a=="object"&&"translationMethod" in a&&a.translationMethod!=="auto"){return a.translationMethod}else{if(this.is.AndroidStock2||this.is.IE){return"scrollposition"}else{return"csstransform"}}}};(function(a){Ext.browser=new Ext.env.Browser(a,true);Ext.userAgent=a.toLowerCase()}(Ext.global.navigator.userAgent));Ext.env.OS=function(o,b,l){var k=this,j=k.names,d=k.prefixes,a,h="",f=k.is,c,g,e,n,m;l=l||Ext.browser;for(c in d){if(d.hasOwnProperty(c)){g=d[c];e=o.match(new RegExp("(?:"+g+")([^\\s;]+)"));if(e){a=j[c];m=e[1];if(m&&m=="HTC_"){h=new Ext.Version("2.3")}else{if(m&&m=="Silk/"){h=new Ext.Version("2.3")}else{h=new Ext.Version(e[e.length-1])}}break}}}if(!a){a=j[(o.toLowerCase().match(/mac|win|linux/)||["other"])[0]];h=new Ext.Version("")}this.name=a;this.version=h;if(b){this.setFlag(b.replace(/ simulator$/i,""))}this.setFlag(a);if(h){this.setFlag(a+(h.getMajor()||""));this.setFlag(a+h.getShortVersion())}for(c in j){if(j.hasOwnProperty(c)){n=j[c];if(!f.hasOwnProperty(a)){this.setFlag(n,(a===n))}}}if(this.name=="iOS"&&window.screen.height==568){this.setFlag("iPhone5")}if(l.is.Safari||l.is.Silk){if(this.is.Android2||this.is.Android3||l.version.shortVersion==501){l.setFlag("AndroidStock");l.setFlag("AndroidStock2")}if(this.is.Android4){l.setFlag("AndroidStock");l.setFlag("AndroidStock4")}}};Ext.env.OS.prototype={constructor:Ext.env.OS,names:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chrome:"ChromeOS",other:"Other"},prefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chrome:"CrOS "},is:function(a){return !!this[a]},name:null,version:null,setFlag:function(a,b){if(typeof b=="undefined"){b=true}if(this.flags){this.flags[a]=b}this.is[a]=b;this.is[a.toLowerCase()]=b;return this}};(function(){var a=Ext.global.navigator,g=a.userAgent,f=Ext.env.OS,e=(Ext.is||(Ext.is={})),h,d,b;f.prototype.flags=e;Ext.os=h=new f(g,a.platform);d=h.name;Ext["is"+d]=true;Ext.isMac=e.Mac=e.MacOS;var j=window.location.search.match(/deviceType=(Tablet|Phone)/),c=window.deviceType;if(j&&j[1]){b=j[1]}else{if(c==="iPhone"){b="Phone"}else{if(c==="iPad"){b="Tablet"}else{if(!h.is.Android&&!h.is.iOS&&!h.is.WindowsPhone&&/Windows|Linux|MacOS/.test(d)){b="Desktop";Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else{if(h.is.iPad||h.is.RIMTablet||h.is.Android3||Ext.browser.is.Silk||(h.is.Android4&&g.search(/mobile/i)==-1)){b="Tablet"}else{b="Phone"}}}}}h.setFlag(b,true);h.deviceType=b;delete f.prototype.flags}());Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a="div"}else{if(typeof a!=="string"){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(c,b){var d=this.getTestElement(b).style,a=Ext.String.capitalize(c);if(typeof d[c]!=="undefined"||typeof d[Ext.browser.getStylePrefix(c)+a]!=="undefined"){return true}return false},isStyleSupportedWithoutPrefix:function(b,a){var c=this.getTestElement(a).style;if(typeof c[b]!=="undefined"){return true}return false},isEventSupported:function(c,a){if(a===undefined){a=window}var e=this.getTestElement(a),b="on"+c.toLowerCase(),d=(b in e);if(!d){if(e.setAttribute&&e.removeAttribute){e.setAttribute(b,"");d=typeof e[b]==="function";if(typeof e[b]!=="undefined"){e[b]=undefined}e.removeAttribute(b)}}return d},getStyle:function(c,b){var a=c.ownerDocument.defaultView,d=(a?a.getComputedStyle(c,null):c.currentStyle)||c.style;return d[b]},getSupportedPropertyName:function(b,a){var c=Ext.browser.getVendorProperyName(a);if(c in b){return c}else{if(a in b){return a}}return null},detect:function(h){var j=this,l=document,f=j.toRun||j.tests,e=f.length,b=l.createElement("div"),c=[],o=Ext.supports,m=j.has,a,g,d,k;if(!Ext.theme){Ext.theme={name:"Default"}}Ext.theme.is={};Ext.theme.is[Ext.theme.name]=true;b.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(h){l.body.appendChild(b)}d=j.preDetected[Ext.browser.identity]||[];while(e--){g=f[e];k=d[e];a=g.name;if(k===undefined){if(!h&&g.ready){c.push(g);continue}k=g.fn.call(j,l,b)}o[a]=m[a]=k}if(h){l.body.removeChild(b)}j.toRun=c},report:function(){var b=[],a=this.tests.length,c;for(c=0;c<a;++c){b.push(this.has[this.tests[c].name]?1:0)}Ext.log(Ext.browser.identity+": ["+b.join(",")+"]")},preDetected:{},tests:[{name:"CSSPointerEvents",fn:function(a){return"pointerEvents" in a.documentElement.style}},{name:"CSS3BoxShadow",fn:function(a){return"boxShadow" in a.documentElement.style||"WebkitBoxShadow" in a.documentElement.style||"MozBoxShadow" in a.documentElement.style}},{name:"ClassList",fn:function(a){return !!a.documentElement.classList}},{name:"Canvas",fn:function(){var a=this.getTestElement("canvas");return !!(a&&a.getContext&&a.getContext("2d"))}},{name:"Svg",fn:function(a){return !!(a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var b=this.getTestElement(),a=false;b.innerHTML="<!--[if vml]><br><![endif]-->";a=(b.childNodes.length===1);b.innerHTML="";return a}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"Touch",fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;return(this.isEventSupported("touchend")&&a!==1)||a>1}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation" in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase" in window}},{name:"WebSockets",fn:function(){return"WebSocket" in window}},{name:"Range",fn:function(){return !!document.createRange}},{name:"CreateContextualFragment",fn:function(){var a=!!document.createRange?document.createRange():false;return a&&!!a.createContextualFragment}},{name:"History",fn:function(){return("history" in window&&"pushState" in window.history)}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")&&!Ext.browser.is.AndroidStock2}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return !!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return !!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");return true}}catch(a){}return false}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&("withCredentials" in new XMLHttpRequest())}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var a=new XMLHttpRequest();return a&&("upload" in a)&&("onprogress" in a.upload)}return false}},{name:"NumericInputPlaceHolder",fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"ProperHBoxStretching",ready:true,fn:function(){var b=document.createElement("div"),c=b.appendChild(document.createElement("div")),d=c.appendChild(document.createElement("div")),a;b.setAttribute("style","width: 100px; height: 100px; position: relative;");c.setAttribute("style","position: absolute; display: -ms-flexbox; display: -webkit-flex; display: -moz-flexbox; display: flex; -ms-flex-direction: row; -webkit-flex-direction: row; -moz-flex-direction: row; flex-direction: row; min-width: 100%;");d.setAttribute("style","width: 200px; height: 50px;");document.body.appendChild(b);a=c.offsetWidth;document.body.removeChild(b);return(a>100)}},{name:"matchesSelector",fn:function(){var b=document.documentElement,e="matches",d="webkitMatchesSelector",a="msMatchesSelector",c="mozMatchesSelector";return b[e]?e:b[d]?d:b[a]?a:b[c]?c:null}},{name:"RightMargin",ready:true,fn:function(b,c){var a=b.defaultView;return !(a&&a.getComputedStyle(c.firstChild.firstChild,null).marginRight!="0px")}},{name:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:"TransparentColor",ready:true,fn:function(b,c,a){a=b.defaultView;return !(a&&a.getComputedStyle(c.lastChild,null).backgroundColor!="transparent")}},{name:"ComputedStyle",ready:true,fn:function(b,c,a){a=b.defaultView;return a&&a.getComputedStyle}},{name:"Float",fn:function(a){return"cssFloat" in a.documentElement.style}},{name:"CSS3BorderRadius",ready:true,fn:function(d){var b=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],c=false,a;for(a=0;a<b.length;a++){if(d.documentElement.style[b[a]]!==undefined){c=true}}return c&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(f,a){var h="background-image:",g="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",e="linear-gradient(left top, black, white)",d="-moz-"+e,b="-ms-"+e,c="-o-"+e,j=[h+g,h+e,h+d,h+b,h+c];a.style.cssText=j.join(";");return((""+a.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(a){return("onmouseenter" in a.documentElement&&"onmouseleave" in a.documentElement)}},{name:"MouseWheel",fn:function(a){return("onmousewheel" in a.documentElement)}},{name:"Opacity",fn:function(a,b){if(Ext.isIE8){return false}b.firstChild.style.cssText="opacity:0.73";return b.firstChild.style.opacity=="0.73"}},{name:"Placeholder",fn:function(a){return"placeholder" in a.createElement("input")}},{name:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(a){return"getBoundingClientRect" in a.documentElement}},{name:"RotatedBoundingClientRect",ready:true,fn:function(e){var a=e.body,b=false,d=this.getTestElement(),c=d.style;if(d.getBoundingClientRect){c.WebkitTransform=c.MozTransform=c.msTransform=c.OTransform=c.transform="rotate(90deg)";c.width="100px";c.height="30px";a.appendChild(d);b=d.getBoundingClientRect().height!==100;a.removeChild(d)}return b}},{name:"IncludePaddingInWidthCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetWidth==210}},{name:"IncludePaddingInHeightCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetHeight==210}},{name:"TextAreaMaxLength",fn:function(a){return("maxlength" in a.createElement("textarea"))}},{name:"GetPositionPercentage",ready:true,fn:function(a,b){return Ext.feature.getStyle(b.childNodes[2],"left")=="10%"}},{name:"PercentageHeightOverflowBug",ready:true,fn:function(d){var a=false,c,b;if(Ext.getScrollbarSize().height){b=this.getTestElement();c=b.style;c.height="50px";c.width="50px";c.overflow="auto";c.position="absolute";b.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");d.body.appendChild(b);if(b.firstChild.offsetHeight===50){a=true}d.body.removeChild(b)}return a}},{name:"xOriginBug",ready:true,fn:function(d,e){e.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var c=document.getElementById("b1").getBoundingClientRect(),b=document.getElementById("b2").getBoundingClientRect(),a=document.getElementById("b3").getBoundingClientRect();return(b.left!==c.left&&a.right!==c.right)}},{name:"ScrollWidthInlinePaddingBug",ready:true,fn:function(d){var a=false,c,b;b=d.createElement("div");c=b.style;c.height="50px";c.width="50px";c.padding="10px";c.overflow="hidden";c.position="absolute";b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';d.body.appendChild(b);if(b.scrollWidth===70){a=true}d.body.removeChild(b);return a}},{name:"rtlVertScrollbarOnRight",ready:true,fn:function(c,d){d.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var b=d.firstChild,a=b.firstChild;return(a.offsetLeft+a.offsetWidth!==b.offsetLeft+b.offsetWidth)}},{name:"rtlVertScrollbarOverflowBug",ready:true,fn:function(b,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=c.firstChild;return a.clientHeight===a.offsetHeight}},{identity:"defineProperty",fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return false}return true}},{identify:"nativeXhr",fn:function(){if(typeof XMLHttpRequest!=="undefined"){return true}XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}};return false}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||(Ext.isOpera&&Ext.operaVersion<12))}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange" in window&&(a===undefined||a>7)}},{name:"FixedTableWidthBug",ready:true,fn:function(){if(Ext.isIE8){return false}var b=document.createElement("div"),a=document.createElement("div"),c;b.setAttribute("style","display:table;table-layout:fixed;");a.setAttribute("style","display:table-cell;min-width:50px;");b.appendChild(a);document.body.appendChild(b);b.offsetWidth;b.style.width="25px";c=b.offsetWidth;document.body.removeChild(b);return c===50}},{name:"FocusinFocusoutEvents",fn:function(){return !Ext.isGecko}}]};Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:false,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState=="complete"){a.onReadyEvent({type:b.readyState||"body"})}else{a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener("deviceready",a.onReadyEvent,false)}b.addEventListener("DOMContentLoaded",a.onReadyEvent,false);window.addEventListener("load",a.onReadyEvent,false)}}},block:function(){++this.blocks;Ext.isReady=false},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.now();Ext.isDomReady=true;a.state=1;Ext.feature.detect(true);if(!a.delay){a.handleReady()}else{if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else{a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.now();a.invokeAll();Ext._afterReadytime=Ext.now()}},handleReadySoon:function(a){var b=this;if(!b.timer){b.timer=Ext.defer(function(){b.timer=null;b.handleReady()},a||b.delay)}},invoke:function(b){var a=b.delay;if(a){Ext.defer(function(){b.fn.call(b.scope)},a)}else{b.fn.call(b.scope)}},invokeAll:function(){var b=this,a=b.listeners,c;if(!b.blocks){Ext.isReady=true}b.firing=true;while(a.length){if(b.sortGeneration!==b.generation){b.sortGeneration=b.generation;a.sort(b.sortFn)}c=a.pop();if(b.blocks&&!c.dom){a.push(c);break}b.invoke(c)}b.firing=false},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:false,priority:0};if(b){Ext.apply(a,b)}a.phase=a.dom?0:1;return a},on:function(c,b,a){var d=Ext.env.Ready,e=d.makeListener(c,b,a);if(d.state===2&&!d.firing&&(e.dom||!d.blocks)){d.invoke(e)}else{d.listeners.push(e);++d.generation;if(!d.bound){d.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else{a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(d,c){return -((d.phase-c.phase)||(c.priority-d.priority)||(d.id-c.id))},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener("deviceready",a.onReadyEvent,false)}b.removeEventListener("DOMContentLoaded",a.onReadyEvent,false);window.removeEventListener("load",a.onReadyEvent,false)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=true;try{document.documentElement.doScroll("left")}catch(c){b=false}if(b&&document.body){a.onReadyEvent({type:"doScroll"})}else{a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){if(a.bound){return}var d=document,b;try{b=window.frameElement===undefined}catch(c){}if(!b||!d.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else{if(a.pollScroll()){return}}if(d.readyState=="complete"){a.onReadyEvent({type:"already "+(d.readyState||"body")})}else{d.attachEvent("onreadystatechange",a.onReadyStateChange);window.attachEvent("onload",a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent("onreadystatechange",a.onReadyStateChange);window.detachEvent("onload",a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){clearTimeout(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(e,d,b){var c={dom:true};if(b){Ext.apply(c,b)}a.on(e,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};a.bind()}());Ext.Loader=new function(){var c=this,a=Ext.ClassManager,g=Ext.Boot,d=Ext.Class,j=Ext.env.Ready,h=Ext.Function.alias,f=["extend","mixins","requires"],n={},k=[],b=[],e=[],o={},m={},l={enabled:true,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",paths:a.paths,preserveScripts:true,scriptCharset:undefined},p={disableCaching:true,disableCachingParam:true,preserveScripts:true,scriptChainDelay:"loadDelay"};Ext.apply(c,{isInHistory:n,isLoading:false,history:k,config:l,readyListeners:b,optionalRequires:e,requiresMap:o,hasFileLoadError:false,scriptsLoading:0,syncModeEnabled:false,missingQueue:m,init:function(){var v=document.getElementsByTagName("script"),q=v[v.length-1].src,A=q.substring(0,q.lastIndexOf("/")+1),y=Ext._classPathMetadata,z=Ext.Microloader,s=Ext.manifest,t,w,x,u,r;if(!a.getPath("Ext")){a.setPath("Ext",A+"src")}if(y){Ext._classPathMetadata=null;c.addClassPathMappings(y)}if(s){t=s.loadOrder;w=Ext.Boot.baseUrl;if(t&&s.bootRelative){for(x=t.length,u=0;u<x;u++){r=t[u];r.path=w+r.path}}}if(z){j.block();z.onMicroloaderReady(function(){j.unblock()})}},setConfig:Ext.Function.flexSetter(function(q,r){if(q==="paths"){c.setPath(r)}else{l[q]=r;var s=p[q];if(s){g.setConfig((s===true)?q:s,r)}}return c}),getConfig:function(q){return q?l[q]:l},setPath:function(){a.setPath.apply(a,arguments);return c},addClassPathMappings:function(q){a.setPath(q);return c},addBaseUrlClassPathMappings:function(q){for(var r in q){q[r]=g.baseUrl+q[r]}Ext.Loader.addClassPathMappings(q)},getPath:function(q){return a.getPath(q)},require:function(s,r,q,u){if(u){return c.exclude(u).require(s,r,q)}var t=a.getNamesByExpression(s);return c.load(t,r,q)},syncRequire:function(){var r=c.syncModeEnabled;c.syncModeEnabled=true;var q=c.require.apply(c,arguments);c.syncModeEnabled=r;return q},exclude:function(r){var q=a.select({require:function(u,t,s){return c.load(u,t,s)},syncRequire:function(w,u,t){var v=c.syncModeEnabled;c.syncModeEnabled=true;var s=c.load(w,u,t);c.syncModeEnabled=v;return s}});q.exclude(r);return q},load:function(q,y,z){if(y){if(y.length){y=c.makeLoadCallback(q,y)}y=y.bind(z||Ext.global)}var t=[],s=q.length,w,v,u,x=[],r=a.classState;for(v=0;v<s;++v){w=a.resolveName(q[v]);if(!a.isCreated(w)){t.push(w);m[w]=c.getPath(w);if(!r[w]){x.push(m[w])}}}u=t.length;if(u){c.missingCount+=u;a.onExists(function(){if(y){Ext.callback(y,z,arguments)}c.checkReady()},c,t);if(!l.enabled){Ext.Error.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((t.length>1)?"es":"")+": "+t.join(", "))}if(x.length){c.loadScripts({url:x,_classNames:t})}else{c.checkReady()}}else{if(y){y.call(z)}c.checkReady()}if(c.syncModeEnabled){if(s===1){return a.get(q[0])}}return c},makeLoadCallback:function(q,r){return function(){var t=[],s=q.length;while(s-->0){t[s]=a.get(q[s])}return r.apply(this,t)}},onLoadFailure:function(){var q=this,r=q.onError;c.hasFileLoadError=true;--c.scriptsLoading;if(r){r.call(q.userScope,q)}c.checkReady()},onLoadSuccess:function(){var q=this,r=q.onLoad;--c.scriptsLoading;if(r){r.call(q.userScope,q)}c.checkReady()},onReady:function(s,r,u,q){if(u){j.on(s,r,q)}else{var t=j.makeListener(s,r,q);if(c.isLoading){b.push(t)}else{j.invoke(t)}}},addUsedClasses:function(s){var q,r,t;if(s){s=(typeof s==="string")?[s]:s;for(r=0,t=s.length;r<t;r++){q=s[r];if(typeof q==="string"&&!Ext.Array.contains(e,q)){e.push(q)}}}return c},triggerReady:function(){var q,r=e;if(c.isLoading&&r.length){e=[];c.require(r)}else{c.isLoading=false;b.sort(j.sortFn);while(b.length&&!c.isLoading){q=b.pop();j.invoke(q)}j.unblock()}},historyPush:function(q){if(q&&!n[q]){n[q]=true;k.push(q)}return c},loadScripts:function(u){var t=Ext.manifest,q=t&&t.loadOrder,r=t&&t.loadOrderMap,s;++c.scriptsLoading;if(q&&!r){t.loadOrderMap=r=g.createLoadOrderMap(q)}c.checkReady();s=Ext.apply({loadOrder:q,loadOrderMap:r,charset:l.scriptCharset,success:c.onLoadSuccess,failure:c.onLoadFailure,sync:c.syncModeEnabled,_classNames:[]},u);s.userScope=s.scope;s.scope=s;g.load(s)},loadScriptsSync:function(r){var q=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:r});c.syncModeEnabled=q},loadScriptsSyncBasePrefix:function(r){var q=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:r,prependBaseUrl:true});c.syncModeEnabled=q},loadScript:function(y){var r=typeof y==="string",u=y instanceof Array,x=!u&&!r,q=x?y.url:y,t=x&&y.onError,v=x&&y.onLoad,w=x&&y.scope,s={url:q,scope:w,onLoad:v,onError:t,_classNames:[]};c.loadScripts(s)},flushMissingQueue:function(){var q,t,s=0,r=0;for(q in m){s++;t=m[q];if(a.isCreated(q)){delete m[q]}else{if(a.existCache[q]===2){delete m[q]}else{++r}}}this.missingCount=r},checkReady:function(){var r=c.isLoading,q;c.flushMissingQueue();q=c.missingCount+c.scriptsLoading;if(q&&!r){j.block();c.isLoading=!!q}else{if(!q&&r){c.triggerReady()}}}});Ext.require=h(c,"require");Ext.syncRequire=h(c,"syncRequire");Ext.exclude=h(c,"exclude");d.registerPreprocessor("loader",function(F,u,E,D){var A=this,y=[],q,z=a.getName(F),t,s,x,w,C,v,r,B;for(t=0,x=f.length;t<x;t++){v=f[t];if(u.hasOwnProperty(v)){r=u[v];if(typeof r=="string"){y.push(r)}else{if(r instanceof Array){for(s=0,w=r.length;s<w;s++){C=r[s];if(typeof C=="string"){y.push(C)}}}else{if(typeof r!="function"){for(s in r){if(r.hasOwnProperty(s)){C=r[s];if(typeof C=="string"){y.push(C)}}}}}}}}if(y.length===0){return}if(z){o[z]=y}(z?c.exclude(z):c).require(y,function(){for(t=0,x=f.length;t<x;t++){v=f[t];if(u.hasOwnProperty(v)){r=u[v];if(typeof r=="string"){u[v]=a.get(r)}else{if(r instanceof Array){for(s=0,w=r.length;s<w;s++){C=r[s];if(typeof C=="string"){u[v][s]=a.get(C)}}}else{if(typeof r!="function"){for(var G in r){if(r.hasOwnProperty(G)){C=r[G];if(typeof C=="string"){u[v][G]=a.get(C)}}}}}}}}D.call(A,F,u,E)});return false},true,"after","className");a.registerPostprocessor("uses",function(r,B,w){var q=Ext.manifest,s=q&&q.loadOrder,t=q&&q.classes,u,y,A,x,v,z;if(s){y=t[r];if(y&&!isNaN(v=y.idx)){A=s[v];u=A.uses;z={};for(x=u.length,v=0;v<x;v++){z[u[v]]=true}u=Ext.Boot.getPathsFromIndexes(z,s,true);if(u.length>0){c.loadScripts({url:u,sequential:true})}}}if(w.uses){u=w.uses;c.addUsedClasses(u)}});a.onCreated(c.historyPush);c.init()}();Ext._endTime=new Date().getTime();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}(Ext.cmd.derive("Ext.event.ListenerStack",Ext.Base,{currentOrder:"current",length:0,constructor:function(){this.listeners={before:[],current:[],after:[]};this.lateBindingMap={};return this},add:function(l,m,n,f,c){var b=this.lateBindingMap,k=this.getAll(f),g=k.length,h=typeof l==="string",a,e,d,j;if(h&&m&&m.isIdentifiable){d=m.getId();a=b[d];if(a){if(a[l]){return false}else{a[l]=true}}else{b[d]=a={};a[l]=true}}else{if(g>0){while(g--){e=k[g];if(e.fn===l&&e.scope===m){e.options=n;return false}}}}if(!h){j=Ext._namedScopes[m];if(j&&j.isController){Ext.Error.raise("Cannot resolve scope 'controller' for '"+n.type+"' listener declared on Observable: '"+c.id+"'")}m=(m&&!j)?m:c}e=this.create(l,m,n,f,c);if(h&&(!m||m in Ext._namedScopes)){e.boundFn=this.bindDynamicScope(c,l,m);e.isLateBinding=false}if(n&&n.prepend){delete n.prepend;k.unshift(e)}else{k.push(e)}this.length++;return true},bindDynamicScope:function(c,b,a){return function(){var d=c.resolveListenerScope(a);return d[b].apply(d,arguments)}},getAt:function(b,a){return this.getAll(a)[b]},getAll:function(a){return this.listeners[a||this.currentOrder]},count:function(a){return this.getAll(a).length},create:function(d,c,b,a,e){b=b||{};return{stack:this,fn:d,firingFn:false,boundFn:false,isLateBinding:typeof d==="string",scope:c,options:b,order:a,observable:e,type:b.type}},remove:function(h,j,e){var g=this.getAll(e),f=g.length,b=false,a=this.lateBindingMap,d,c;if(f>0){while(f--){d=g[f];if(d.fn===h&&d.scope===j){g.splice(f,1);b=true;this.length--;if(j&&j.isIdentifiable&&typeof h==="string"){c=j.getId();if(a[c]&&a[c][h]){delete a[c][h]}}break}}}return b}},1,0,0,0,0,0,[Ext.event,"ListenerStack"],0));(Ext.cmd.derive("Ext.event.Controller",Ext.Base,{isFiring:false,listenerStack:null,constructor:function(a){this.firingListeners=[];this.firingArguments=[];this.dispatcher=a;return this},setInfo:function(a){this.info=a},getInfo:function(){return this.info},setListenerStacks:function(a){this.listenerStacks=a},fire:function(h,e){var n=this.listenerStacks,m=this.firingListeners,d=this.firingArguments,k=m.push,g=n.length,j,l,c,o,a=false,b=false,f;m.length=0;if(e){if(e.order!=="after"){a=true}else{b=true}}if(g===1){j=n[0].listeners;l=j.before;c=j.current;o=j.after;if(l.length>0){k.apply(m,l)}if(a){k.call(m,e)}if(c.length>0){k.apply(m,c)}if(b){k.call(m,e)}if(o.length>0){k.apply(m,o)}}else{for(f=0;f<g;f++){l=n[f].listeners.before;if(l.length>0){k.apply(m,l)}}if(a){k.call(m,e)}for(f=0;f<g;f++){c=n[f].listeners.current;if(c.length>0){k.apply(m,c)}}if(b){k.call(m,e)}for(f=0;f<g;f++){o=n[f].listeners.after;if(o.length>0){k.apply(m,o)}}}if(m.length===0){return this}if(!h){h=[]}d.length=0;d.push.apply(d,h);d.push(null,this);this.doFire();return this},doFire:function(){var v=this,j=v.firingListeners,r=v.firingArguments,n=r[1],o=r.length-2,m=j[0].observable,u=v.info,p,q,k,f,e,h,s,c,t,a,b,l,d,g;if(m&&m.isElement){p=r[0];if(p&&!p.isEvent){p=null}}v.isPausing=v.isPaused=v.isStopped=false;v.isFiring=true;for(q=0,k=j.length;q<k;q++){f=j[q];e=f.options;h=f.fn;s=f.firingFn;c=f.boundFn;t=f.isLateBinding;a=f.scope;if(t&&c&&c!==a[h]){c=false;s=false}if(!c){if(t){c=a[h];if(!c){continue}}else{c=h}f.boundFn=c}if(p){d=f.type;if(d){r[0]=p.chain({type:d})}Ext.EventObject=r[0]}if(!s){s=c;if(e.delay){s=Ext.Function.createDelayed(s,e.delay,a)}else{if(e.buffer){s=Ext.Function.createBuffered(s,e.buffer,a)}else{if(e.onFrame){s=Ext.Function.createAnimationFrame(s,a)}}}f.firingFn=s}r[o]=e;b=r;if(e.args){b=e.args.concat(b)}if(e.delegate&&v.info.targetType==="element"){r[1]=Ext.fly(n).findParent(u.target,n)}if(e.single){v.dispatcher.removeListener(u.targetType,u.target,u.eventName,h,a,e,f.order,f.observable)}g=e.beforeFn;if(g){l=g.apply(Ext.global,b)!==false;if(l!==false){l=s.apply(a,b)}}else{l=s.apply(a,b)}if(e.delegate){r[1]=n}if(l===false){v.stop()}if(v.isStopped){break}if(v.isPausing){v.isPaused=true;j.splice(0,q+1);return}if(p){r[0]=p}}v.isFiring=false;v.listenerStacks=null;j.length=r.length=0;v.connectingController=null},connect:function(a){this.connectingController=a},resume:function(){var a=this.connectingController;this.isPausing=false;if(this.isPaused&&this.firingListeners.length>0){this.isPaused=false;this.doFire()}if(a){a.resume()}return this},isInterrupted:function(){return this.isStopped||this.isPaused},stop:function(){var a=this.connectingController;this.isStopped=true;if(a){this.connectingController=null;a.stop()}this.isFiring=false;this.listenerStacks=null;return this},pause:function(){var a=this.connectingController;this.isPausing=true;if(a){a.pause()}return this}},1,0,0,0,0,0,[Ext.event,"Controller"],0));(Ext.cmd.derive("Ext.event.Dispatcher",Ext.Base,{statics:{getInstance:function(){if(!this.instance){this.instance=new this()}return this.instance},setInstance:function(a){this.instance=a;return this}},baseHasListeners:{_decr_:function(a){if(!--this[a]){delete this[a]}},_incr_:function(a){if(this.hasOwnProperty(a)){++this[a]}else{this[a]=1}}},hasListeners:{},config:{publishers:{}},wildcard:"*",constructor:function(a){this.listenerStacks={};this.captureListenerStacks={};this.directListenerStacks={};this.activePublishers={};this.publishersCache={};this.noActivePublishers=[];this.controller=null;this.initConfig(a);return this},getListenerStack:function(c,d,b,a){return this.doGetListenerStack(this.listenerStacks,c,d,b,a)},getCaptureListenerStack:function(c,d,b,a){return this.doGetListenerStack(this.captureListenerStacks,c,d,b,a)},getDirectListenerStack:function(c,d,b,a){return this.doGetListenerStack(this.directListenerStacks,c,d,b,a)},doGetListenerStack:function(d,e,g,c,b){var f=d[e],a;if(!f){if(b){d[e]=f={}}else{return null}}f=f[g];if(!f){if(b){d[e][g]=f={}}else{return null}}a=f[c];if(!a){if(b){f[c]=a=new Ext.event.ListenerStack()}else{return null}}return a},getController:function(e,g,c,b){var d=this,a=d.controller,f={targetType:e,target:g,eventName:c};if(!a){d.controller=a=new Ext.event.Controller(d)}if(a.isFiring){a=new Ext.event.Controller(d)}a.setInfo(f);if(b&&a!==b){a.connect(b)}return a},applyPublishers:function(c){var a,b;this.publishersCache={};for(a in c){if(c.hasOwnProperty(a)){b=c[a];this.registerPublisher(b)}}return c},registerPublisher:function(b){var a=this.activePublishers,c=b.getTargetType(),d=a[c];if(!d){a[c]=d=[]}d.push(b);b.setDispatcher(this);return this},getCachedActivePublishers:function(c,b){var a=this.publishersCache,d;if((d=a[c])&&(d=d[b])){return d}return null},cacheActivePublishers:function(c,b,d){var a=this.publishersCache;if(!a[c]){a[c]={}}a[c][b]=d;return d},getActivePublishers:function(g,b){var h=this.getCachedActivePublishers(g,b),a,f,c,e,d;if(h){return h}a=this.activePublishers[g];if(a){h=[];for(c=0,e=a.length;c<e;c++){d=a[c];if(d.handles(b)){h.push(d)}}if(!h.length&&g==="element"){f=this.getPublisher("dom");if(f){h.push(f)}}}else{h=this.noActivePublishers}return this.cacheActivePublishers(g,b,h)},hasListener:function(e,f,c){var a=this.getListenerStack(e,f,c),d=this.getCaptureListenerStack(e,f,c),b=false;if(a){b=a.count()>0}if(!b&&e==="element"){b=d.count()>0}return b},getHasListeners:function(c,d){var b=this.hasListeners,a=d&&d.hasListeners;if(!a){a=b[c]||(b[c]=Ext.Object.chain(this.baseHasListeners));if(d){d.hasListeners=a=Ext.Object.chain(a)}}return a},addListener:function(b,f,e,h,k,m,c,a){m=m||{};var j=this.getActivePublishers(b,e),g=j.length,d,l;l=this.doAddListener(b,f,e,h,k,m,c,a);if(l){for(d=0;d<g;d++){j[d].subscribe(f,e,m,a)}}return l},doAddListener:function(b,g,e,j,k,l,c,a){l=l||{};var h=this,f,d;if(b==="element"){if(l.capture){f=h.getCaptureListenerStack(b,g,e,true)}else{d=h.getPublisher("dom");if(l.delegated===false||d.directEvents[e]||(!d.isTargetWin&&g==="#ext-window")){f=h.getDirectListenerStack(b,g,e,true)}}}if(!f){f=h.getListenerStack(b,g,e,true)}h.getHasListeners(b,a)._incr_(e);return f.add(j,k,l,c,a)},removeListener:function(b,f,e,h,k,m,c,a){m=m||{};var j=this.getActivePublishers(b,e),g=j.length,d,l;l=this.doRemoveListener(b,f,e,h,k,m,c,a);if(l){for(d=0;d<g;d++){j[d].unsubscribe(f,e,null,m,a)}}return l},doRemoveListener:function(b,g,e,j,k,l,c,a){l=l||{};var h=this,f,d;if(b==="element"){if(l.capture){f=h.getCaptureListenerStack(b,g,e)}else{d=h.getPublisher("dom");if(l.delegated===false||d.directEvents[e]||(!d.isTargetWin&&g==="#ext-window")){f=h.getDirectListenerStack(b,g,e)}}}if(!f){f=h.getListenerStack(b,g,e)}if(f&&f.remove(j,k,c)){h.getHasListeners(b,a)._decr_(e);return true}return false},clearListeners:function(e,g,f){var c=this,b=c.listenerStacks[e],d=c.captureListenerStacks[e],a;if(b){c.doClearListeners(b,e,g,{},f)}if(d){c.doClearListeners(d,e,g,{capture:true},f)}if(f){a=c.directListenerStacks[e];if(a){c.doClearListeners(a,e,g,{delegated:false},f)}}},doClearListeners:function(l,b,f,m,a){var j=this,c=l[f],h=j.getHasListeners(b,a),e,d,g,k;if(c){for(e in c){k=j.getActivePublishers(b,e);for(d=0,g=k.length;d<g;d++){k[d].unsubscribe(f,e,true,m,a)}if(!(h[e]-=c[e].length)){delete h[e]}}delete l[f]}},dispatchEvent:function(d,e,a){var f=this.getActivePublishers(d,a),c=f.length,b;if(c>0){for(b=0;b<c;b++){f[b].notify(e,a)}}return this.doDispatchEvent.apply(this,arguments)},doDispatchEvent:function(a,g,f,j,c,b,k){var h=k?this.getCaptureListenerStack(a,g,f):this.getListenerStack(a,g,f,k),d=this.getWildcardListenerStacks(a,g,f,k),e;if(!h||!h.length){if(!d.length&&!c){return}}else{d.push(h)}e=this.getController(a,g,f,b);e.setListenerStacks(d);e.fire(j,c);return !e.isInterrupted()},dispatchDirectEvent:function(e,f,c,d){var b=this.getDirectListenerStack(e,f,c),a;if(b&&b.length){a=this.getController(e,f,c);a.setListenerStacks([b]);a.fire(d);return !a.isInterrupted()}},getWildcardListenerStacks:function(a,f,e,j){var c=[],d=this.wildcard,b=e!==d,h=f!==d,g;if(b&&(g=this.getListenerStack(a,f,d,j))){c.push(g)}if(h&&(g=this.getListenerStack(a,d,e,j))){c.push(g)}return c},getPublisher:function(a){return this.getPublishers()[a]},destroy:function(){var b=this.getPublishers(),a;for(a in b){b[a].destroy()}}},1,0,0,0,0,0,[Ext.event,"Dispatcher"],0));(Ext.cmd.derive("Ext.Mixin",Ext.Base,function(a){return{statics:{addHook:function(h,e,c,d){var g=Ext.isFunction(h),f=function(){var k=arguments,l=g?h:d[h],j=this.callParent(k);l.apply(this,k);return j},b=e.hasOwnProperty(c)&&e[c];if(g){h.$previous=Ext.emptyFn}f.$name=c;f.$owner=e.self;if(b){f.$previous=b.$previous;b.$previous=f}else{e[c]=f}}},onClassExtended:function(l,d){var f=d.mixinConfig,j=d.xhooks,h=l.superclass,e=d.onClassMixedIn,b,g,k,c;if(j){delete d.xhooks;(f||(d.mixinConfig=f={})).on=j}if(f){b=h.mixinConfig;if(b){d.mixinConfig=f=Ext.merge({},b,f)}d.mixinId=f.id;g=f.before;k=f.after;j=f.on;c=f.extended}if(g||k||j||c){d.onClassMixedIn=function(p){var m=this.prototype,o=p.prototype,n;if(g){Ext.Object.each(g,function(q,r){p.addMember(q,function(){if(m[r].apply(this,arguments)!==false){return this.callParent(arguments)}})})}if(k){Ext.Object.each(k,function(q,r){p.addMember(q,function(){var s=this.callParent(arguments);m[r].apply(this,arguments);return s})})}if(j){for(n in j){a.addHook(j[n],o,n,m)}}if(c){p.onExtended(function(){var q=Ext.Array.slice(arguments,0);q.unshift(p);return c.apply(this,q)},this)}if(e){e.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,"Mixin"],0));(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var f=this.id,b,d,e,a,c;if(!(f||f===0)){b=this.self.prototype;d=this.defaultIdSeparator;a=Ext.mixin.Identifiable.uniqueIds;if(!b.hasOwnProperty("identifiablePrefix")){e=this.xtype;if(e){c=this.defaultIdPrefix+e.replace(this.idCleanRegex,d)+d}else{if(!(c=b.$className)){c=this.defaultIdPrefix+"anonymous"+d}else{c=c.replace(this.idCleanRegex,d).toLowerCase()+d}}b.identifiablePrefix=c}c=this.identifiablePrefix;if(!a.hasOwnProperty(c)){a[c]=0}f=this.id=c+(++a[c])}this.getUniqueId=this.getOptimizedId;return f},setId:function(a){this.id=a},getId:function(){var a=this.id;if(!a){a=this.getUniqueId()}this.getId=this.getOptimizedId;return a}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,{mixinConfig:{id:"observable",after:{destroy:"destroy"}},isObservable:true,observableType:"observable",validIdRe:Ext.validIdRe,observableIdPrefix:"#",listenerOptionsRegex:/^(?:scope|order|delegate|single|delay|buffer|args|prepend|destroyable)$/,eventFiringSuspended:0,config:{listeners:{$value:null,merge:function(f,a,e){var d=f,c,b;if(e.isInstance){if(e._hasDeclaredListeners){d=[e.self.getDeclaredListeners(),f]}}else{if(!e.listeners){e.listeners=e.getDeclaredListeners()}if(f){c=f.scope;if(!c){f.scope="self"}else{b=Ext._namedScopes[c];if(b&&b.isController){f.scope="self.controller"}}e.prototype._hasDeclaredListeners=true;e.listeners.push(f)}}return d}},bubbleEvents:null},inheritableStatics:{getDeclaredListeners:function(){var f=this,g=f.superclass,d=f.listeners,e=f.prototype,a,c,b;if(!d){d=f.listeners=[];if(g.isObservable){d.push(g.self.getDeclaredListeners())}if(e.hasOwnProperty("mixins")){a=e.mixins;for(c in a){b=a[c];if(b.isObservable){d.push(b.self.getDeclaredListeners())}}}}return d}},afterClassMixedIn:function(b){var a=b.prototype,c=a.listeners;if(c){delete a.listeners;b.getConfigurator().add({listeners:c})}},constructor:function(a){var b=this;b.initConfig(a);b.getEventDispatcher().getHasListeners(b.observableType,b)},applyListeners:function(a){if(a){if(a instanceof Array){Ext.each(a,this.applyListeners,this)}else{this.addListener(a)}}return a},resolveListenerScope:function(a){if(a==="this"){a=null}return a||this},applyBubbleEvents:function(a){if(a){this.enableBubble(a)}},getOptimizedObservableId:function(){return this.observableId},getObservableId:function(){var a=this,c,b;if(!a.observableId){c=a.getUniqueId();b=a.validIdRe;a.observableId=a.observableIdPrefix+c;a.getObservableId=a.getOptimizedObservableId}return a.observableId},getOptimizedEventDispatcher:function(){return this.eventDispatcher},createEventDispatcher:function(){var b=this,a;b.eventDispatcher=a=Ext.event.Dispatcher.getInstance();b.getEventDispatcher=b.getOptimizedEventDispatcher;b.getListeners();b.getBubbleEvents();return a},getEventDispatcher:function(){var a=this.eventDispatcher;if(!a){a=this.createEventDispatcher()}return a},getManagedListeners:function(c,b){var d=c.getUniqueId(),a=this.managedListeners;if(!a){this.managedListeners=a={}}if(!a[d]){a[d]={};c.doAddListener("destroy","clearManagedListeners",this,{single:true,args:[c]})}if(!a[d][b]){a[d][b]=[]}return a[d][b]},getUsedSelectors:function(){var a=this.usedSelectors;if(!a){a=this.usedSelectors=[];a.$map={}}return a},fireEvent:function(a){var b=Array.prototype.slice.call(arguments,1);return this.doFireEvent(a,b)},fireEventArgs:function(a,b){return this.doFireEvent(a,b)},fireAction:function(c,e,g,f,d,a){var b=typeof g,h;if(e===undefined){e=[]}if(b!=="undefined"){h={fn:g,isLateBinding:b==="string",scope:f||this,options:d||{},order:a}}return this.doFireEvent(c,e,h)},doFireEvent:function(d,g,c,b){var h=this,j=h.eventQueue,a=Ext.$eventNameMap,f=h.suspendedEvents,e=true;d=a[d]||(a[d]=d.toLowerCase());if(h.eventFiringSuspended||(f&&f[d])){if(j){j.push([d,g,c,b])}}else{e=h.getEventDispatcher().dispatchEvent(h.observableType,h.getObservableId(),d,g,c,b)}return e},doAddListener:function(a,k,m,n,c){var j=this,e=(m&&m!==j&&m.isIdentifiable),b=j.getUsedSelectors(),f=b.$map,d=j.getObservableId(),g,l,h;if(!n){n={}}if(!n.type){n.type=a}if(!m&&typeof k==="function"){m=j}if(n.delegate){h=n.delegate;d+=" "+h}if(!(d in f)){f[d]=true;b.push(d)}g=j.addDispatcherListener(d,a,k,m,n,c);if(g&&e){l=j.getManagedListeners(m,a);l.push({delegate:h,scope:m,fn:k,order:c})}return g},addDispatcherListener:function(b,d,f,e,c,a){return this.getEventDispatcher().addListener(this.observableType,b,d,f,e,c,a,this)},doRemoveListener:function(b,l,n,o,d){var k=this,g=(n&&n!==k&&n.isIdentifiable),e=k.getObservableId(),a,m,f,h,c,j;if(!o){o={}}if(!n&&typeof l==="function"){n=k}if(o.delegate){j=o.delegate;e+=" "+j}a=k.removeDispatcherListener(e,b,l,n,o,d);if(a&&g){m=k.getManagedListeners(n,b);for(f=0,h=m.length;f<h;f++){c=m[f];if(c.fn===l&&c.scope===n&&c.delegate===j&&c.order===d){m.splice(f,1);break}}}return a},removeDispatcherListener:function(b,d,f,e,c,a){return this.getEventDispatcher().removeListener(this.observableType,b,d,f,e,c,a,this)},clearManagedListeners:function(d){var h=this,k=h.managedListeners,a,c,j,f,e,g,b,l;if(!k){return h}if(d){if(typeof d!=="string"){a=d.getUniqueId()}else{a=d}c=k[a];for(f in c){if(c.hasOwnProperty(f)){j=c[f];for(e=0,g=j.length;e<g;e++){b=j[e];l={};if(b.delegate){l.delegate=b.delegate}if(h.doRemoveListener(f,b.fn,b.scope,l,b.order)){e--;g--}}}}delete k[a];return h}for(a in k){if(k.hasOwnProperty(a)){h.clearManagedListeners(a)}}},changeListener:function(l,h,j,b,f,q){var v=this,u=Ext.$eventNameMap,m,o,a,e,n,s,d,c,w,p,r,k,g,t;if(typeof j!=="undefined"){if(typeof h!=="string"){for(r=0,k=h.length;r<k;r++){w=h[r];w=u[w]||(u[w]=w.toLowerCase());l.call(v,w,j,b,f,q)}return v}h=u[h]||(u[h]=h.toLowerCase());if(f){f=Ext.Object.chain(f)}l.call(v,h,j,b,f,q)}else{if(Ext.isArray(h)){o=h;for(r=0,k=o.length;r<k;r++){g=o[r];h=g.event;h=u[h]||(u[h]=h.toLowerCase());l.call(v,h,g.fn,g.scope,g,g.order)}}else{if(h){a=v.listenerOptionsRegex;f=h;m=[];o=[];e={};q=f.order;b=f.scope;s=Ext._namedScopes;d=b&&s[b];n=d&&d.isSelf;for(w in f){p=f[w];if(!a.test(w)){w=u[w]||(u[w]=w.toLowerCase());t=typeof p;if(t!=="string"&&t!=="function"){c=p.scope;if(c&&n){d=s[c];if(d&&d.isController){c="self.controller"}}l.call(this,w,p.fn,c||b,p,p.order||q);continue}m.push(w);o.push(p)}else{e[w]=p}}for(r=0,k=m.length;r<k;r++){l.call(v,m[r],o[r],b,e,q)}}}}return v},addListener:function(b,g,f,d,a){var h=this,e,c;if(d){e=d.destroyable}else{if(typeof b==="object"){e=b.destroyable}}c=h.changeListener(h.doAddListener,b,g,f,d,a);if(e){c=new Ext.mixin.Observable.$ListenerRemover(h,b,g,f,d,a)}return c},toggleListener:function(b,c,f,e,d,a){return this.changeListener(b?this.doAddListener:this.doRemoveListener,c,f,e,d,a)},addBeforeListener:function(a,d,c,b){return this.addListener(a,d,c,b,"before")},addAfterListener:function(a,d,c,b){return this.addListener(a,d,c,b,"after")},removeListener:function(b,e,d,c,a){return this.changeListener(this.doRemoveListener,b,e,d,c,a)},removeBeforeListener:function(a,d,c,b){return this.removeListener(a,d,c,b,"before")},removeAfterListener:function(a,d,c,b){return this.removeListener(a,d,c,b,"after")},clearListeners:function(){var e=this,f=e.getUsedSelectors(),c=e.getEventDispatcher(),b,d,a;for(b=0,d=f.length;b<d;b++){a=f[b];c.clearListeners(e.observableType,a,e)}},hasListener:function(a){return this.getEventDispatcher().hasListener(this.observableType,this.getObservableId(),a)},isSuspended:function(a){var c=Ext.$eventNameMap,b=this.suspendedEvents;if(a){a=c[a]||(c[a]=a.toLowerCase())}return !!(this.eventFiringSuspended||(b&&b[a]))},suspendEvents:function(a){++this.eventFiringSuspended;if(a&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var b=arguments,e=this.suspendedEvents,f=Ext.$eventNameMap,d=b.length,c,a;if(!e){e=this.suspendedEvents={}}for(c=0;c<d;c++){a=b[c];a=f[a]||(f[a]=a.toLowerCase());if(!(a in e)){e[a]=0}++e[a]}},resumeEvents:function(g){var f=this,a=f.eventQueue||[],e=f.suspendedEvents,b,c,d;if(f.eventFiringSuspended&&!--f.eventFiringSuspended){if(!g){for(c=0,d=a.length;c<d;c++){b=a[c];if(!(e&&e[b[0]])){f.doFireEvent.apply(f,b)}}}f.eventQueue=null}},resumeEvent:function(){var f=this,b=arguments,e=f.suspendedEvents,g=Ext.$eventNameMap,d=b.length,c,a;for(c=0;c<d;c++){a=b[c];a=g[a]||(g[a]=a.toLowerCase());if(e&&e[a]){--e[a]}}if(!f.eventFiringSuspended){f.resumeEvents()}},relayEvents:function(b,d,g){var h=Ext.$eventNameMap,c,f,e,a;if(typeof g==="undefined"){g=""}g=g.toLowerCase();if(typeof d==="string"){d=[d]}if(Ext.isArray(d)){for(c=0,f=d.length;c<f;c++){e=d[c];e=h[e]||(h[e]=e.toLowerCase());a=g+e;b.addListener(e,this.createEventRelayer(a),this)}}else{for(e in d){if(d.hasOwnProperty(e)){e=h[e]||(h[e]=e.toLowerCase());a=g+d[e];b.addListener(e,this.createEventRelayer(a),this)}}}return this},relayEvent:function(e,f,h,j,a){var g=typeof f,c=e[e.length-1],d=c.getInfo().eventName,b;e=Array.prototype.slice.call(e,0,-2);e[0]=this;if(g!=="undefined"){b={fn:f,scope:h||this,options:j||{},order:a,isLateBinding:g==="string"}}return this.doFireEvent(d,e,b,c)},createEventRelayer:function(a){return function(){return this.doFireEvent(a,Array.prototype.slice.call(arguments,0,-2))}},enableBubble:function(d){var b=this.isBubblingEnabled,f=Ext.$eventNameMap,c,e,a;if(!b){b=this.isBubblingEnabled={}}if(typeof d==="string"){d=Ext.Array.clone(arguments)}for(c=0,e=d.length;c<e;c++){a=d[c];a=f[a]||(f[a]=a.toLowerCase());if(!b[a]){b[a]=true;this.addListener(a,this.createEventBubbler(a),this)}}},createEventBubbler:function(a){return function b(){var c=("getBubbleTarget" in this)?this.getBubbleTarget():null;if(c&&c!==this&&c.isObservable){c.fireAction(a,Array.prototype.slice.call(arguments,0,-2),b,c,null,"after")}}},getBubbleTarget:function(){return false},destroy:function(){var a=this;if(a.observableId){a.fireEvent("destroy",a);a.clearListeners();a.clearManagedListeners()}},deprecated:{"2.0":{methods:{addEvents:null,addManagedListener:function(){var a=arguments[0];a.addListener.apply(a,Ext.Array.slice(arguments,1))},removeManagedListener:function(){var a=arguments[0];a.removeListener.apply(a,Ext.Array.slice(arguments,1))},mon:function(){var a=arguments[0];a.addListener.apply(a,Ext.Array.slice(arguments,1))},mun:function(){var a=arguments[0];a.removeListener.apply(a,Ext.Array.slice(arguments,1))}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(b){var a=function(c){if(c instanceof a){return c}this.observable=c;this.args=Array.prototype.slice.call(arguments,1)};a.prototype.destroy=function(){var c=this.observable;c.un.apply(c,this.args)};b.$ListenerRemover=a;b.createAlias({on:"addListener",un:"removeListener",onBefore:"addBeforeListener",onAfter:"addAfterListener",unBefore:"removeBeforeListener",unAfter:"removeAfterListener"})}));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(a){var c=this,b;c.mixins.observable.constructor.call(c,a);c.clear(true);b=c.getKeyFn();if(b){c.getKey=b}},getCount:function(){return this.length},getData:function(a,b){if(b===undefined){b=a;a=this.getKey(b)}return[a,b]},getKey:function(a){return a.id},add:function(a,c){var b=this;if(arguments.length===1){c=a;a=b.getKey(c)}if(b.containsKey(a)){return b.replace(a,c)}b.map[a]=c;++b.length;b.generation++;if(b.hasListeners.add){b.fireEvent("add",b,a,c)}return c},replace:function(b,d){var c=this,e=c.map,a;if(arguments.length===1){d=b;b=c.getKey(d)}if(!c.containsKey(b)){c.add(b,d)}a=e[b];e[b]=d;c.generation++;if(c.hasListeners.replace){c.fireEvent("replace",c,b,d,a)}return d},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return false},removeAtKey:function(a){var b=this,c;if(b.containsKey(a)){c=b.map[a];delete b.map[a];--b.length;b.generation++;if(b.hasListeners.remove){b.fireEvent("remove",b,a,c)}return true}return false},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(a){var b=this;if(a||b.generation){b.map={};b.length=0;b.generation=a?0:b.generation+1}if(a!==true&&b.hasListeners.clear){b.fireEvent("clear",b)}return b},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(d){var a=[],b,c=this.map;for(b in c){if(c.hasOwnProperty(b)){a.push(d?b:c[b])}}return a},each:function(d,c){var a=Ext.apply({},this.map),b,e=this.length;c=c||this;for(b in a){if(a.hasOwnProperty(b)){if(d.call(c,b,a[b],e)===false){break}}}return this},clone:function(){var c=new this.self(this.initialConfig),b=this.map,a;c.suspendEvents();for(a in b){if(b.hasOwnProperty(a)){c.add(a,b[a])}}c.resumeEvents();return c},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a]===b){return a}}return undefined}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(d,c,b){var a;a=this.liveConnections[Number(d)];if(a){a.onFlashStateChange(c,b)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var b=this,a,c;b.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});a=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");c="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){c=Ext.flashPluginPath}Ext.Loader.loadScript({url:a,onLoad:function(){var e="11.4.0";var g="playerProductInstall.swf";var d={};var h={};h.quality="high";h.bgcolor="#ffffff";h.allowscriptaccess="sameDomain";h.allowfullscreen="true";var f={};f.id="ext-flash-polyfill";f.name="polyfill";f.align="middle";swfobject.embedSWF(c,"ext-flash-polyfill","0","0",e,g,d,h,f)},onError:function(){},scope:b});Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(a){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var b=this;Ext.apply(b,a);b.requestHeaders={}},abort:function(){var a=this;if(a.readyState==4){return}a.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(b,c){a.push(b+": "+c)});return a.join("\r\n")},getResponseHeader:function(b){var a=this.responseHeaders;return(a&&a[b])||null},open:function(f,c,d,a,b){var e=this;e.method=f;e.url=c;e.async=d!==false;e.user=a;e.password=b},overrideMimeType:function(a){this.mimeType=a},send:function(a){var b=this;b.body=a;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",b.onFlashReady,b)}else{this.onFlashReady()}},onFlashReady:function(){var c=this,b,a;c.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(c);b={method:c.method,url:c.url,user:c.user,password:c.password,mimeType:c.mimeType,requestHeaders:c.requestHeaders,body:c.body,javascriptId:c.javascriptId};a=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b)},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(b,a){this.requestHeaders[b]=a},onreadystatechange:Ext.emptyFn,parseData:function(b){var a=this;this.status=b.status||0;a.responseHeaders={};if(a.mimeType){a.responseHeaders["content-type"]=a.mimeType}if(b.reason=="complete"){this.responseBytes=b.data;a.responseHeaders["content-length"]=b.data.length}else{if(b.reason=="error"||b.reason=="securityError"){this.statusText=b.text;a.responseHeaders["content-length"]=0}}},onFlashStateChange:function(c,b){var a=this;if(c==4){a.parseData(b);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]}a.setReadyState(c)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},config:{url:null,async:true,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,extraParams:null,autoAbort:false,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest"},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(l){l=l||{};var g=this,k=l.scope||window,f=l.username||g.getUsername(),h=l.password||g.getPassword()||"",b,d,e,a,c,j;if(g.fireEvent("beforerequest",g,l)!==false){d=g.setOptions(l,k);if(g.isFormUpload(l)){g.upload(l.form,d.url,d.data,l);return null}if(l.autoAbort||g.getAutoAbort()){g.abort()}b=l.async!==false?(l.async||g.getAsync()):false;j=g.openRequest(l,d,b,f,h);c=g.getIsXdr();if(!c){a=g.setupHeaders(j,l,d.data,d.params)}e={id:++Ext.data.Connection.requestId,xhr:j,headers:a,options:l,async:b,binary:l.binary||g.getBinary(),timeout:Ext.defer(function(){e.timedout=true;g.abort(e)},l.timeout||g.getTimeout())};g.requests[e.id]=e;g.latestId=e.id;if(b){if(!c){j.onreadystatechange=Ext.Function.bind(g.onStateChange,g,[e])}}if(c){g.processXdrRequest(e,j)}j.send(d.data);if(!b){return g.onComplete(e)}return e}else{Ext.callback(l.callback,l.scope,[l,undefined,undefined]);return null}},processXdrRequest:function(b,c){var a=this;delete b.headers;b.contentType=b.options.contentType||a.getDefaultXdrContentType();c.onload=Ext.Function.bind(a.onStateChange,a,[b,true]);c.onerror=c.ontimeout=Ext.Function.bind(a.onStateChange,a,[b,false])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return[]};a.getResponseHeader=function(){return""};a.contentType=b.contentType||this.getDefaultXdrContentType()},upload:function(b,f,s,e){b=Ext.getDom(b);e=e||{};var n=Ext.id(),l=document.createElement("iframe"),c=[],d="multipart/form-data",r={target:b.target,method:b.method,encoding:b.encoding,enctype:b.enctype,action:b.action},a=function(h,u){g=document.createElement("input");Ext.fly(g).set({type:"hidden",value:u,name:h});b.appendChild(g);c.push(g)},g,k,p,t,o,j,m,q;Ext.fly(l).set({id:n,name:n,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(l);if(document.frames){document.frames[n].name=n}Ext.fly(b).set({target:n,method:"POST",enctype:d,encoding:d,action:f||r.action});if(s){k=Ext.Object.fromQueryString(s)||{};for(t in k){if(k.hasOwnProperty(t)){p=k[t];if(Ext.isArray(p)){o=p.length;for(j=0;j<o;j++){a(t,p[j])}}else{a(t,p)}}}}Ext.get(l).on({load:Ext.Function.bind(this.onUploadComplete,this,[l,e]),single:!Ext.isOpera});b.submit();Ext.fly(b).set(r);for(m=c.length,q=0;q<m;q++){Ext.removeNode(c[q])}},onUploadComplete:function(a,k){var f=this,b={responseText:"",responseXML:null},h,j,g,c;try{g=(a&&(a.contentWindow.document||a.contentDocument))||(window.frames[a.id]||{}).document;if(g){if(Ext.isOpera&&g.location==Ext.SSL_SECURE_URL){return}if(g.body){if((c=g.body.firstChild)&&/pre/i.test(c.tagName)){b.responseText=c.textContent||c.innerText}else{if((c=g.getElementsByTagName("textarea")[0])){b.responseText=c.value}else{b.responseText=g.body.textContent||g.body.innerText}}}b.responseXML=g.XMLDocument||g;h=k.success;j=true}else{Ext.Error.raise("Could not acquire a suitable connection for the file upload service.")}}catch(d){b.responseText='{success:false,message:"'+Ext.String.trim(d.message||d.description)+'"}';h=k.failure;j=false}f.fireEvent(j?"requestcomplete":"requestexception",f,b,k);Ext.callback(h,k.scope,[b,k]);Ext.callback(k.callback,k.scope,[k,j,b]);Ext.defer(Ext.removeNode,100,Ext,[a])},isFormUpload:function(a){var b=this.getForm(a);if(b){return(a.isUpload||(/multipart\/form-data/i).test(b.getAttribute("enctype")))}return false},getForm:function(a){var b=a.form||null;if(b){b=Ext.getDom(b)}return b},setOptions:function(l,k){var h=this,e=l.params||{},g=h.getExtraParams(),d=l.urlParams,c=l.url||h.getUrl(),j=l.jsonData,b,a,f;if(Ext.isFunction(e)){e=e.call(k,l)}if(Ext.isFunction(c)){c=c.call(k,l)}c=this.setupUrl(l,c);f=l.rawData||l.binaryData||l.xmlData||j||null;if(j&&!Ext.isPrimitive(j)){f=Ext.encode(f)}if(l.binaryData){if(h.nativeBinaryPostSupport()){f=(new Uint8Array(l.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){f=f.buffer}}}if(Ext.isObject(e)){e=Ext.Object.toQueryString(e)}if(Ext.isObject(g)){g=Ext.Object.toQueryString(g)}e=e+((g)?((e)?"&":"")+g:"");d=Ext.isObject(d)?Ext.Object.toQueryString(d):d;e=this.setupParams(l,e);b=(l.method||h.getMethod()||((e||f)?"POST":"GET")).toUpperCase();this.setupMethod(l,b);a=l.disableCaching!==false?(l.disableCaching||h.getDisableCaching()):false;if(b==="GET"&&a){c=Ext.urlAppend(c,(l.disableCachingParam||h.getDisableCachingParam())+"="+(new Date().getTime()))}if((b=="GET"||f)&&e){c=Ext.urlAppend(c,e);e=null}if(d){c=Ext.urlAppend(c,d)}return{url:c,method:b,data:f||e||null}},setupUrl:function(b,a){var c=this.getForm(b);if(c){a=a||c.action}return a},setupParams:function(a,d){var c=this.getForm(a),b;if(c&&!this.isFormUpload(a)){b=Ext.Element.serializeForm(c);d=d?(d+"&"+b):b}return d},setupMethod:function(a,b){if(this.isFormUpload(a)){return"POST"}return b},setupHeaders:function(o,p,f,d){var k=this,b=Ext.apply({},p.headers||{},k.getDefaultHeaders()||{}),n=k.getDefaultPostHeader(),l=p.jsonData,a=p.xmlData,j="Content-Type",c=Ext.isDefined(p.useDefaultXhrHeader)?p.useDefaultXhrHeader:k.getUseDefaultXhrHeader(),m,g;if(!b.hasOwnProperty(j)&&(f||d)){if(f){if(p.rawData){n="text/plain"}else{if(a&&Ext.isDefined(a)){n="text/xml"}else{if(l&&Ext.isDefined(l)){n="application/json"}}}}b[j]=n}if(c&&!b["X-Requested-With"]){b["X-Requested-With"]=k.getDefaultXhrHeader()}if(b[j]===undefined||b[j]===null){delete b[j]}try{for(m in b){if(b.hasOwnProperty(m)){g=b[m];o.setRequestHeader(m,g)}}}catch(h){k.fireEvent("exception",m,g)}return b},newRequest:function(a){var b=this,c;if(a.binaryData){if(b.nativeBinaryPostSupport()){c=b.getXhrInstance()}else{c=new Ext.data.flash.BinaryXhr()}}else{if((a.cors||b.getCors())&&Ext.isIE&&Ext.ieVersion<=9){c=b.getXdrInstance();b.setIsXdr(true)}else{c=b.getXhrInstance()}}return c},openRequest:function(c,a,d,g,b){var e=this,f=e.newRequest(c);if(g){f.open(a.method,a.url,d,g,b)}else{if(e.getIsXdr()){f.open(a.method,a.url)}else{f.open(a.method,a.url,d)}}if(c.binary||e.getBinary()){if(window.Uint8Array){f.responseType="arraybuffer"}else{if(f.overrideMimeType){f.overrideMimeType("text/plain; charset=x-user-defined")}}}if(c.withCredentials||e.getWithCredentials()){f.withCredentials=true}return f},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else{Ext.Error.raise({msg:"Your browser does not support CORS"})}return a},getXhrInstance:(function(){var b=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0,a=b.length,f;for(;c<a;++c){try{f=b[c];f();break}catch(d){}}return f}()),isLoading:function(a){if(!a){a=this.getLatest()}if(!(a&&a.xhr)){return false}var b=a.xhr.readyState,c=Ext.data.flash&&Ext.data.flash.BinaryXhr;return((a.xhr instanceof c)&&b!=4)||!(b===0||b==4)},abort:function(b){var a=this,d;if(!b){b=a.getLatest()}if(b&&a.isLoading(b)){d=b.xhr;try{d.onreadystatechange=null}catch(c){d.onreadystatechange=Ext.emptyFn}d.abort();a.clearTimeout(b);if(!b.timedout){b.aborted=true}a.onComplete(b);a.cleanup(b)}},abortAll:function(){var b=this.requests,a;for(a in b){if(b.hasOwnProperty(a)){this.abort(b[a])}}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},onStateChange:function(d,b){var c=this,a=Ext.GlobalEvents;if((d.xhr&&d.xhr.readyState==4)||c.isXdr){c.clearTimeout(d);c.onComplete(d,b);c.cleanup(d);if(a.hasListeners.idle){a.fireEvent("idle")}}},clearTimeout:function(a){clearTimeout(a.timeout);delete a.timeout},cleanup:function(a){a.xhr=null;delete a.xhr},onComplete:function(b,h){var d=this,j=b.options,g,k,f,a;try{g=b.xhr;k=d.parseStatus(g.status);if(k.success){k.success=g.readyState===4}}catch(c){k={success:false,isException:false}}f=d.isXdr?h:k.success;if(f){a=d.createResponse(b);d.fireEvent("requestcomplete",d,a,j);Ext.callback(j.success,j.scope,[a,j])}else{if(k.isException||b.aborted||b.timedout){a=d.createException(b)}else{a=d.createResponse(b)}d.fireEvent("requestexception",d,a,j);Ext.callback(j.failure,j.scope,[a,j])}Ext.callback(j.callback,j.scope,[j,f,a]);delete d.requests[b.id];return a},parseStatus:function(a){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break}}return{success:c,isException:b}},createResponse:function(e){var h=this,k=e.xhr,c=h.getIsXdr(),b={},l=c?[]:k.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),g=l.length,m,f,j,d,a;while(g--){m=l[g];f=m.indexOf(":");if(f>=0){j=m.substr(0,f).toLowerCase();if(m.charAt(f+1)==" "){++f}b[j]=m.substr(f+1)}}e.xhr=null;delete e.xhr;d={request:e,requestId:e.id,status:k.status,statusText:k.statusText,getResponseHeader:function(n){return b[n.toLowerCase()]},getAllResponseHeaders:function(){return b}};if(c){h.processXdrResponse(d,k)}if(e.binary){d.responseBytes=h.getByteArray(k)}else{d.responseText=k.responseText;d.responseXML=k.responseXML}k=null;return d},createException:function(a){return{request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?"transaction aborted":"communication failure",aborted:a.aborted,timedout:a.timedout}},getByteArray:function(j){var c=j.response,b=j.responseBody,k=Ext.data.flash&&Ext.data.flash.BinaryXhr,a,h,f,d;if(j instanceof k){a=j.responseBytes}else{if(window.Uint8Array){a=c?new Uint8Array(c):[]}else{if(Ext.isIE9p){try{a=new VBArray(b).toArray()}catch(g){a=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(j.responseBody,a=[])}else{a=[];h=j.responseText;f=h.length;for(d=0;d<f;d++){a.push(h.charCodeAt(d)&255)}}}}}return a},injectVBScript:function(){var a=document.createElement("script");a.type="text/vbscript";a.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=true},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:true,constructor:function(){this.queue=[];this.taskQueue=[];this.runningQueue=[];this.idleQueue=[];this.isRunning=false;this.isIdle=true;this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},start:function(c,b,a){this.queue.push(arguments);if(!this.isRunning){if(this.hasOwnProperty("idleTimer")){clearTimeout(this.idleTimer);delete this.idleTimer}if(this.hasOwnProperty("idleQueueTimer")){clearTimeout(this.idleQueueTimer);delete this.idleQueueTimer}this.isIdle=false;this.isRunning=true;this.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){if(!this.isRunning){return}var a=this.runningQueue,b,c;this.lastRunTime=Ext.now();this.frameStartTime=Ext.now();a.push.apply(a,this.queue);for(b=0,c=a.length;b<c;b++){this.invoke(a[b])}a.length=0;this.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(e,d,b){if(!this.isRunning){return}var a=this.queue,g=a.length,c,f;for(c=0;c<g;c++){f=a[c];if(f[0]===e&&f[1]===d&&f[2]===b){a.splice(c,1);c--;g--}}if(g===0){this.doStop();this.isRunning=false;this.idleTimer=Ext.defer(this.whenIdle,100,this)}},onIdle:function(e,d,a){var c=this.idleQueue,b,f,g;for(b=0,f=c.length;b<f;b++){g=c[b];if(e===g[0]&&d===g[1]&&a===g[2]){return}}c.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(e,d,a){var c=this.idleQueue,b,f,g;for(b=0,f=c.length;b<f;b++){g=c[b];if(e===g[0]&&d===g[1]&&a===g[2]){c.splice(b,1);return true}}return false},queueTask:function(c,b,a){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(e,d,a){var c=this.taskQueue,b,f,g;for(b=0,f=c.length;b<f;b++){g=c[b];if(e===g[0]&&d===g[1]&&a===g[2]){c.splice(b,1);b--;f--}}},invoke:function(d){var c=d[0],b=d[1],a=d[2];c=(typeof c=="string"?b[c]:c);if(Ext.isArray(a)){c.apply(b,a)}else{c.call(b,a)}},whenIdle:function(){this.isIdle=true;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty("idleQueueTimer")){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var a=this.idleQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty("taskQueueTimer")){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var a=this.taskQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}},showFps:function(){Ext.onReady(function(){Ext.Viewport.add([{xtype:"component",bottom:50,left:0,width:50,height:20,html:"Average",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__averageFps",xtype:"component",bottom:0,left:0,width:50,height:50,html:"0",style:"background-color: red; color: white; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:50,width:50,height:20,html:"Min (Last 1k)",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__minFps",xtype:"component",bottom:0,left:50,width:50,height:50,html:"0",style:"background-color: orange; color: white; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:100,width:50,height:20,html:"Max (Last 1k)",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__maxFps",xtype:"component",bottom:0,left:100,width:50,height:50,html:"0",style:"background-color: yellow; color: black; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:150,width:50,height:20,html:"Current",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__currentFps",xtype:"component",bottom:0,left:150,width:50,height:50,html:"0",style:"background-color: green; color: white; text-align: center; line-height: 50px;"}]);Ext.AnimationQueue.resetFps()})},resetFps:function(){var c=Ext.getCmp("__currentFps"),b=Ext.getCmp("__averageFps"),h=Ext.getCmp("__minFps"),g=Ext.getCmp("__maxFps"),d=1000,a=0,f=0,e=0;Ext.AnimationQueue.onFpsChanged=function(j){f++;if(!(f%10)){d=1000;a=0}e+=j;d=Math.min(d,j);a=Math.max(a,j);c.setHtml(Math.round(j));b.setHtml(Math.round(e/f));h.setHtml(Math.round(d));g.setHtml(Math.round(a))}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],function(){}));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(a){Ext.apply(this,a||{});this.all={};this.references={};this.onAvailableCallbacks={}},create:function(a,b){if(typeof a=="string"){return Ext.widget(a)}if(a.isComponent){return a}if("xclass" in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(a){var e=this,d=e.all,c=a.getId(),b=e.onAvailableCallbacks;d[c]=a;if(a.reference){e.references[c]=a}++e.count;b=b&&b[c];if(b&&b.length){e.notifyAvailable(a)}},unregister:function(a){var b=a.getId();if(a.reference){delete this.references[b]}delete this.all[b];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var c=this,b=c.references,a;if(c.referencesDirty){for(a in b){if(b.hasOwnProperty(a)){b[a].fixReference()}}c.referencesDirty=false}},onAvailable:function(g,c,b){var f=this,e=f.onAvailableCallbacks,a=f.all,d;if(g in a){d=a[g];c.call(b||d,d)}else{if(g){if(!Ext.isArray(e[g])){e[g]=[]}e[g].push(function(h){c.call(b||h,h)})}}},notifyAvailable:function(b){var a=this.onAvailableCallbacks[b&&b.getId()]||[];while(a.length){(a.shift())(b)}},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}}));Ext.ns("Ext.util").Operators={"=":function(b,c){return b==c},"!=":function(b,c){return b!=c},"^=":function(b,c){return b&&b.substr(0,c.length)==c},"$=":function(b,c){return b&&b.substr(b.length-c.length)==c},"*=":function(b,c){return b&&b.indexOf(c)!==-1},"%=":function(b,c){return(b%c)===0},"|=":function(b,c){return b&&(b==c||b.substr(0,c.length+1)==c+"-")},"~=":function(b,c){return b&&(" "+b+" ").indexOf(" "+c+" ")!=-1}};(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(b,e){var d=this,a=d.findKey(e),c;if(a){d.unlinkEntry(c=d.map[a]);c.prev=d.last;c.next=null}else{c={prev:d.last,next:null,key:b,value:e}}if(d.last){d.last.next=c}else{d.first=c}d.last=c;Ext.util.HashMap.prototype.add.call(this,b,c);d.prune();return e},insertBefore:function(b,f,c){var e=this,a,d;if(c=this.map[this.findKey(c)]){a=e.findKey(f);if(a){e.unlinkEntry(d=e.map[a])}else{d={prev:c.prev,next:c,key:b,value:f}}if(c.prev){d.prev.next=d}else{e.first=d}d.next=c;c.prev=d;e.prune();return f}else{return e.add(b,f)}},get:function(a){var b=this.map[a];if(b){if(b.next){this.moveToEnd(b)}return b.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(a){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.apply(this,arguments)},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else{this.last=a.prev}if(a.prev){a.prev.next=a.next}else{this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else{this.first=a}this.last=a},getArray:function(c){var a=[],b=this.first;while(b){a.push(c?b.key:b.value);b=b.next}return a},each:function(c,b,a){var f=this,e=a?f.last:f.first,d=f.length;b=b||f;while(e){if(c.call(b,e.key,e.value,d)===false){break}e=a?e.prev:e.next}return f},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a].value===b){return a}}return undefined},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b].value)}}a.resumeEvents();return a},prune:function(){var b=this,a=b.getMaxSize(),c=a?(b.length-a):0;if(c>0){for(;b.first&&c;c--){b.removeAtKey(b.first.key)}}}},0,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var f=this,s=Ext.util.Operators,k=/(\d*)n\+?(\d*)/,e=/\D/,m=/^(\s)+/,l=/\\(.)/g,n=new Ext.util.LruCache({maxSize:100}),o=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),p=function(u,t){return t.method.apply(this,[u].concat(t.args))},a=function(v,z){var t=[],w=0,y=v.length,x,u=z!==">";for(;w<y;w++){x=v[w];if(x.getRefItems){t=t.concat(x.getRefItems(u))}}return t},g=function(u){var t=[],v=0,x=u.length,w;for(;v<x;v++){w=u[v];while(!!(w=w.getRefOwner())){t.push(w)}}return t},d=function(u,z,y){if(z==="*"){return u.slice()}else{var t=[],v=0,x=u.length,w;for(;v<x;v++){w=u[v];if(w.isXType(z,y)){t.push(w)}}return t}},b=function(B,C,w,v){var F=[],A=0,u=B.length,E,x,D,t,z,y;if(C.charAt(0)==="@"){E=true;C=C.substr(1)}if(C.charAt(0)==="?"){E=true;x=true;C=C.substr(1)}for(;A<u;A++){D=B[A];if(!E||D.hasOwnProperty(C)){t=D[C];if(x){F.push(D)}else{if(w==="~="){if(t){if(!Ext.isArray(t)){t=t.split(" ")}for(z=0,y=t.length;z<y;z++){if(s[w](Ext.coerce(t[z],v),v)){F.push(D);break}}}}else{if(w==="/="){if(D[C]!==undefined&&v.test(D[C])){F.push(D)}}else{if(!v?!!D[C]:s[w](Ext.coerce(t,v),v)){F.push(D)}}}}}}return F},h=function(u,y){var t=[],v=0,x=u.length,w;for(;v<x;v++){w=u[v];if(w.getItemId()===y){t.push(w)}}return t},r=function(t,u,v){return f.pseudos[u](t,v)},j=/^(\s?([>\^])\s?|\s|$)/,q=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,c=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:d,argTransform:function(t){if(t[1]!==undefined){t[1]=t[1].replace(l,"$1")}return t.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:b,argTransform:function(x){var t=x[0],y=x[1],v=x[2],u=x[3],w=x[4],z;if(w!==undefined){w=w.replace(l,"$1")}if(v==="/="){z=n.get(w);if(z){w=z}else{w=n.add(w,new RegExp(w))}}return[y,v,w]}},{re:/^#((?:\\\.|[\w\-])+)/,method:h},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:r,argTransform:function(t){if(t[2]!==undefined){t[2]=t[2].replace(l,"$1")}return t.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:o}];f.Query=Ext.extend(Object,{constructor:function(t){t=t||{};Ext.apply(this,t)},execute:function(v){var w=this.operations,u=[],y,x,t;for(x=0,t=w.length;x<t;x++){y=w[x];u=u.concat(this._execute(v,y))}return u},_execute:function(u,w){var x=0,y=w.length,v,t;if(!u){t=Ext.ComponentManager.getAll()}else{if(Ext.isIterable(u)){t=u}else{if(u.isMixedCollection){t=u.items}}}for(;x<y;x++){v=w[x];if(v.mode==="^"){t=g(t||[u])}else{if(v.mode){t=a(t||[u],v.mode)}else{t=p(t||a([u]),v)}}if(x===y-1){return t}}return[]},is:function(w){var v=this.operations,u=false,t=v.length,y,x;if(t===0){return true}for(x=0;x<t;x++){y=v[x];u=this._is(w,y);if(u){return u}}return false},_is:function(C,t){var A=t.length,u=[C],v,x,w,z,y,B,D;for(x=A-1;x>=0;--x){v=t[x];z=v.mode;if(z){if(z==="^"){u=a(u," ")}else{if(z===">"){B=[];for(w=0,A=u.length;w<A;++w){D=u[w].getRefOwner();if(D){B.push(D)}}u=B}else{u=g(u)}}if(u.length===0){return false}}else{u=p(u,v);if(u.length===0){return false}}}return true},getMatches:function(w,u){var t=u.length,v;for(v=0;v<t;++v){w=p(w,u[v]);if(w.length===0){break}}return w},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(this,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(z,t){var A=Ext.ComponentQuery,x=0,y=z.length,w=[],v=-1,u;for(;x<y;++x){u=z[x];if(!A.is(u,t)){w[++v]=u}}return w},first:function(u){var t=[];if(u.length>0){t.push(u[0])}return t},last:function(v){var t=v.length,u=[];if(t>0){u.push(v[t-1])}return u},focusable:function(u){var t=u.length,w=[],v=0,x;for(;v<t;v++){x=u[v];if(x.isFocusable()){w.push(x)}}return w},"nth-child":function(z,A){var B=[],u=k.exec(A=="even"&&"2n"||A=="odd"&&"2n+1"||!e.test(A)&&"n+"+A||A),y=(u[1]||1)-0,w=u[2]-0,x,t,v;for(x=0;t=z[x];x++){v=x+1;if(y==1){if(w==0||v==w){B.push(t)}}else{if((v+w)%y==0){B.push(t)}}}return B}},query:function(t,A){if(!t){return Ext.ComponentManager.all.getArray()}var v=[],B=[],y={},x=this.cache.get(t),w,z,u;if(!x){x=this.cache.add(t,this.parse(t))}v=x.execute(A);if(x.isMultiMatch()){w=v.length;for(u=0;u<w;u++){z=v[u];if(!y[z.id]){B.push(z);y[z.id]=true}}v=B}return v},visitPreOrder:function(t,v,x,w,u){this._visit(true,t,v,x,w,u)},visitPostOrder:function(t,v,x,w,u){this._visit(false,t,v,x,w,u)},_visit:function(E,u,D,C,F,y){var B=this,A=B.cache.get(u),x=[D],t,z=0,w,v;if(!A){A=B.cache.add(u,B.parse(u))}v=A.is(D);if(D.getRefItems){t=D.getRefItems();z=t.length}if(y){Ext.Array.push(x,y)}if(E){if(v){if(C.apply(F||D,x)===false){return false}}}for(w=0;w<z;w++){if(B._visit.call(B,E,u,t[w],C,F,y)===false){return false}}if(!E){if(v){if(C.apply(F||D,x)===false){return false}}}},is:function(u,t){if(!t){return true}var v=this.cache.get(t);if(!v){v=this.cache.add(t,this.parse(t))}return v.is(u)},parse:function(u){var v=[],x,y,w,t;x=Ext.splitAndUnescape(u,",");for(w=0,t=x.length;w<t;w++){y=Ext.String.trim(x[w]);v.push(this._parse(y))}return new f.Query({operations:v})},_parse:function(z){var u=[],x=Ext.String.trim,v=c.length,E,A,y,F,G,H,w,B,C,t,D;while(z&&E!==z){E=z;A=z.match(q);if(A){F=A[1];y=x(A[2]).replace(l,"$1");if(F==="#"){u.push({method:h,args:[y]})}else{u.push({method:d,args:[y,Boolean(A[3])]})}z=z.replace(A[0],"").replace(m,"$1")}while(!(G=z.match(j))){for(B=0;z&&B<v;B++){C=c[B];H=z.match(C.re);t=C.method;w=C.argTransform;if(H){if(w){D=w(H)}else{D=H.slice(1)}u.push({method:Ext.isString(C.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[t].concat(H.slice(1)))):C.method,args:D});z=z.replace(H[0],"").replace(m,"$1");break}if(B===(v-1)){Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(G[1]){u.push({mode:G[2]||G[1]});z=z.replace(G[0],"").replace(m,"")}}return u}})}));(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",statics:{generateSetter:function(a){var g=a.names,b=a.name,e=g.internal,d=g.apply,c=g.changeEvent,f=g.doSet;return function(m){var l=this,k=l.$configPrefixed?e:b,n=l.initialized,j,h=l[d];if(h){m=h.call(l,m,l[k]);if(m===undefined){return l}}j=l[k];if(m!==j){if(n){l.fireAction(c,[l,m,j],l.doSet,l,{nameMap:g})}else{l[k]=m;if(l[f]){l[f](m,j)}}}return this}}},initialized:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=true},doSet:function(c,d,b,a){var e=a.nameMap;c[e.internal]=d;if(c[e.doSet]){c[e.doSet].call(this,d,b)}},onClassExtended:function(b,e){if(!e.hasOwnProperty("eventedConfig")){return}var d=e.config,g=e.eventedConfig,f="eventedSetter",c,a;if(d){Ext.applyIf(d,g)}else{b.addConfig(g)}for(c in g){if(g.hasOwnProperty(c)){a=Ext.Config.get(c);e[a.names.set]=a[f]||(a[f]=this.generateSetter(a))}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)(\?)?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(c,b){var a=this.getConstrainVector(b,c);if(a){c[0]+=a[0];c[1]+=a[1]}return c},alignTo:function(c,a,f,b){var e=this,d=e.el;return e.setXY(e.getAlignToXY(c,a,f),d.anim&&!!b?d.anim(b):false)},calculateAnchorXY:function(f,h,g,d){var j=this,c=j.el,k=document,e=(c.dom===k.body||c.dom===k),l=Math.round,m,b,a;f=(f||"tl").toLowerCase();d=d||{};b=d.width||(e?Ext.Element.getViewportWidth():j.getWidth());a=d.height||(e?Ext.Element.getViewportHeight():j.getHeight());switch(f){case"tl":m=[0,0];break;case"bl":m=[0,a];break;case"tr":m=[b,0];break;case"c":m=[l(b*0.5),l(a*0.5)];break;case"t":m=[l(b*0.5),0];break;case"l":m=[0,l(a*0.5)];break;case"r":m=[b,l(a*0.5)];break;case"b":m=[l(b*0.5),a];break;case"tc":m=[l(b*0.5),0];break;case"bc":m=[l(b*0.5),a];break;case"br":m=[b,a]}return[m[0]+h,m[1]+g]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(j,w,e){var z=this,d,v,a,g,r,f,s,t,p,q,u,o,n,b,c,h,l,m,k;j=Ext.get(j.el||j);if(!j||!j.dom){}e=e||[0,0];w=(!w||w=="?"?"tl-bl?":(!(/-/).test(w)&&w!==""?"tl-"+w:w||"tl-bl")).toLowerCase();w=z.convertPositionSpec(w);a=w.match(z._alignRe);o=a[1];n=a[2];u=!!a[3];g=z.getAnchorXY(o,true);r=z.getAnchorToXY(j,n,false);m=r[0]-g[0]+e[0];k=r[1]-g[1]+e[1];if(u){d=z.constrainTo||z.container||z.el.parent();d=Ext.get(d.el||d);v=d.getViewRegion();v.right=v.left+d.el.dom.clientWidth;f=z.getWidth();s=z.getHeight();t=j.getRegion();b=o.charAt(0);c=o.charAt(o.length-1);h=n.charAt(0);l=n.charAt(n.length-1);p=(m<t.right&&m+f>=t.left)&&((b=="t"&&h=="b")||(b=="b"&&h=="t"));q=(k<t.bottom&&k+s>=t.top)&&((c=="r"&&l=="l")||(c=="l"&&l=="r"));if(m+f>v.right){if(q){m=t.left-f;q=false}else{m=v.right-f}}if(m<v.left){m=q?t.right:v.left}if(k+s>v.bottom){if(p){k=t.top-s;p=false}else{k=v.bottom-s}}if(k<v.top){k=p?t.bottom:v.top}}return[m,k]},getAnchorXY:function(d,h,b){var g=this,j=g.getXY(),a=g.el,l=document,c=a.dom==l.body||a.dom==l,k=a.getScroll(),f=c?k.left:h?0:j[0],e=c?k.top:h?0:j[1];return g.calculateAnchorXY(d,f,e,b)},getBox:function(d,g){var e=this,m=g?e.getLocalXY():e.getXY(),j=m[0],f=m[1],k=e.getWidth(),b=e.getHeight(),c,a,l;if(d){c=e.getBorderPadding();a=c.beforeX;l=c.beforeY;j+=a;f+=l;k-=(a+c.afterX);b-=(l+c.afterY)}return{x:j,left:j,0:j,y:f,top:f,1:f,width:k,height:b,right:j+k,bottom:f+b}},calculateConstrainedPosition:function(g,b,l,d){var k=this,c,h=k.floatParent,e=h?h.getTargetEl():null,a,f,j,m=false;if(l&&h){a=e.getXY();f=e.getBorderPadding();a[0]+=f.beforeX;a[1]+=f.beforeY;if(b){j=[b[0]+a[0],b[1]+a[1]]}}else{j=b}g=g||k.constrainTo||e||k.container||k.el.parent();c=k.getConstrainVector(g,j,d);m=b||k.getPosition(l);if(c){m[0]+=c[0];m[1]+=c[1]}return m},getConstrainVector:function(g,c,e){var a=this.getRegion(),d=[0,0],b=(this.shadow&&this.constrainShadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,j=false,h,f=this.constraintInsets;if(!(g instanceof Ext.util.Region)){g=Ext.get(g.el||g);h=g.getViewSize();g=g.getViewRegion();g.right=g.left+h.width;g.bottom=g.top+h.height}if(f){f=Ext.isObject(f)?f:Ext.Element.parseBox(f);g.adjust(f.top,f.right,f.bottom,f.length)}if(c){a.translateBy(c[0]-a.x,c[1]-a.y)}if(e){a.right=a.left+e[0];a.bottom=a.top+e[1]}if(b){g.adjust(b[0],-b[1],-b[2],b[3])}if(a.right>g.right){j=true;d[0]=(g.right-a.right)}if(a.left+d[0]<g.left){j=true;d[0]=(g.left-a.left)}if(a.bottom>g.bottom){j=true;d[1]=(g.bottom-a.bottom)}if(a.top+d[1]<g.top){j=true;d[1]=(g.top-a.top)}return j?d:false},getOffsetsTo:function(a){var c=this.getXY(),b=Ext.fly(a.el||a).getXY();return[c[0]-b[0],c[1]-b[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getViewRegion:function(){var f=this,c=f.el,a=c.dom.nodeName==="BODY",e,j,g,h,d,b,k;if(a){j=c.getScroll();d=j.left;h=j.top;b=Ext.Element.getViewportWidth();k=Ext.Element.getViewportHeight()}else{e=f.getBorderPadding();g=f.getXY();d=g[0]+e.beforeX;h=g[1]+e.beforeY;b=f.getWidth(true);k=f.getHeight(true)}return new Ext.util.Region(h,d+b,h+k,d)},move:function(j,b,c){var f=this,m=f.getXY(),k=m[0],h=m[1],d=[k-b,h],l=[k+b,h],g=[k,h-b],a=[k,h+b],e={l:d,left:d,r:l,right:l,t:g,top:g,up:g,b:a,bottom:a,down:a};j=j.toLowerCase();f.setXY([e[j][0],e[j][1]],c)},setBox:function(c){var b=this,a,d;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}b.constrainBox(c);a=c.x;d=c.y;b.setSize(c.width,c.height);b.setXY([a,d]);b.afterSetPosition(a,d);return b},constrainBox:function(d){var c=this,b,a,e;if(c.constrain||c.constrainHeader){a=("x" in d)?d.x:d.left;e=("y" in d)?d.y:d.top;b=c.calculateConstrainedPosition(null,[a,e],false,[d.width,d.height]);if(b){d.x=b[0];d.y=b[1]}}},translatePoints:function(a,c){var b=this.translateXY(a,c);return{left:b.x,top:b.y}},translateXY:function(g,e){var d=this,b=d.el,h=b.getStyle(d._positionTopLeft),a=h.position==="relative",c=parseFloat(h.left),f=parseFloat(h.top),j=d.getXY();if(Ext.isArray(g)){e=g[1];g=g[0]}if(isNaN(c)){c=a?0:b.dom.offsetLeft}if(isNaN(f)){f=a?0:b.dom.offsetTop}c=(typeof g==="number")?g-j[0]+c:undefined;f=(typeof e==="number")?e-j[1]+f:undefined;return{x:c,y:f}}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(g,e,b,a,j,k){var f=this,h=!Ext.isEmpty(j),c=function(){f.alignTo(g,e,b,a);Ext.callback(k,f)},d=f.getAnchor();f.removeAnchor();Ext.apply(d,{fn:c,scroll:h});Ext.on("resize",c,null);if(h){Ext.getWin().on("scroll",c,null,{buffer:!isNaN(j)?j:50})}c();return f},getAnchor:function(){var b=this.el,c,a;if(!b.dom){return}c=b.getData();a=c._anchor;if(!a){a=c._anchor={}}return a},removeAnchor:function(){var a=this.getAnchor();if(a&&a.fn){Ext.un("resize",a.fn);if(a.scroll){Ext.getWin().on("scroll",a.fn)}delete a.fn}return this},setBox:function(c,a){var b=this;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}if(a){b.constrainBox(c);b.animate(Ext.applyIf({to:c,listeners:{afteranimate:Ext.Function.bind(b.afterSetPosition,b,[c.x,c.y])}},a))}else{arguments.callee.$previous.call(this,c)}return b}});(Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(m){var r=window,I=document,U="ext-window",D="ext-document",e="width",G="height",R="min-width",c="min-height",n="max-width",x="max-height",J="top",V="right",E="bottom",A="left",g="visibility",S="hidden",b="display",K="none",k="z-index",M="position",p="relative",q="static",v="-",t=/\w/g,C=/\s+/,T=/[\s]+/,a=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,B=/table-row|table-.*-group/,s={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},Q={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},j={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},z=[Q.l,Q.r,Q.t,Q.b],d=[s.l,s.r,s.t,s.b],P=/\d+$/,f=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,H="px",F=/(-[a-z])/gi,W=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,o=/^\d+(?:\.\d*)?px$/i,u={},L=function(X,Y){return Y.charAt(1).toUpperCase()},y="x-hidden-visibility",w="x-hidden-display",h="x-hidden-offsets",O="x-no-touch-scroll",l={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},N;return{alternateClassName:"Ext.Element",observableType:"element",isElement:true,skipGarbageCollection:true,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,listenerOptionsRegex:/^(?:scope|order|delegate|delegated|single|delay|buffer|args|prepend|capture|destroyable|translate)$/,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(Z,X){var Y=this,aa;if(typeof Z==="string"){Z=I.getElementById(Z)}if(!Z){return null}Y.dom=Z;aa=Z.id;if(aa){Y.id=aa}else{aa=Z.id=Y.getUniqueId()}Y.el=Y;if(!X){Ext.cache[aa]=Y}Y.mixins.observable.constructor.call(Y)},inheritableStatics:{cache:Ext.cache={},VISIBILITY:1,DISPLAY:2,OFFSETS:3,unitRe:f,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(Y,X){if(typeof Y==="number"){return Y+(X||H)}if(Y===""||Y==="auto"||Y==null){return Y||""}if(P.test(Y)){return Y+(X||H)}if(!f.test(Y)){return Y||""}return Y},create:function(Z,Y){var af=this,ac=l.hidden,ab,ag,ai,ah,X,aa,ae,ad;if(!Z){Z={}}if(Z.isElement){return Y?Z.dom:Z}else{if("nodeType" in Z){return Y?Z:Ext.get(Z)}}if(typeof Z==="string"){return I.createTextNode(Z)}ai=Z.tag;if(!ai){ai="div"}if(Z.namespace){ab=I.createElementNS(Z.namespace,ai)}else{ab=I.createElement(ai)}ag=ab.style;if(Z[ac]){ad=Z.className;ad=(ad==null)?"":ad+" ";Z.className=ad+w;delete Z[ac]}for(X in Z){if(X!=="tag"){ah=Z[X];switch(X){case l.style:if(typeof ah==="string"){ab.setAttribute(X,ah)}else{for(aa in ah){if(ah.hasOwnProperty(aa)){ag[aa]=ah[aa]}}}break;case l.className:case l.cls:ab.className=ah;break;case l.classList:ab.className=ah.join(" ");break;case l.text:ab.textContent=ah;break;case l.html:ab.innerHTML=ah;break;case l.children:for(aa=0,ae=ah.length;aa<ae;aa++){ab.appendChild(af.create(ah[aa],true))}break;default:if(ah!=null){ab.setAttribute(X,ah)}}}}if(Y){return ab}else{return af.get(ab)}},detach:function(){var X=this.dom;if(X&&X.parentNode&&X.tagName!=="BODY"){X.parentNode.removeChild(X)}return this},fly:function(Y,X){return Ext.fly(Y,X)},fromPoint:function(X,Y){return Ext.get(I.elementFromPoint(X,Y))},get:function(aa){var af=this,X=Ext.cache,ac,ab,Y,ag,ad,Z,ae;if(!aa){return null}if(aa.isFly){aa=aa.dom;ad=aa._extData}if(typeof aa==="string"){Y=aa;if(X.hasOwnProperty(Y)){ag=X[Y];if(ag.skipGarbageCollection||!Ext.isGarbage(ag.dom)){return ag}else{ag.destroy()}}if(Y===U){return m.get(r)}else{if(Y===D){return m.get(I)}}ab=Ext.getElementById?Ext.getElementById(Y):I.getElementById(Y);if(ab){return new m(ab)}}if(aa===I){if(!af.docEl){I.id=D;af.docEl=new m(I,true)}return af.docEl}else{if(aa==r){if(!af.winEl){r.id=U;af.winEl=new m(r,true)}return af.winEl}}ac=aa.nodeType;if(af.validNodeTypes[ac]||(!ac&&(aa.window===aa))){Y=aa.id;if(X.hasOwnProperty(Y)){ag=X[Y];if(ag.skipGarbageCollection||aa===ag.dom||!Ext.isGarbage(ag.dom)){return ag}else{ag.destroy()}}return new m(aa)}if(aa.isElement){return aa}if(aa.isComposite){return aa}if(Ext.isIterable(aa)){return af.select(aa)}return null},getActiveElement:function(){var X=I.activeElement;if(!X||!X.focus){X=I.body}return X},getDocumentHeight:function(){return Math.max(!Ext.isStrict?I.body.scrollHeight:I.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?I.body.scrollWidth:I.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(r.orientation==0)?"portrait":"landscape"}return(r.innerHeight>r.innerWidth)?"portrait":"landscape"},getViewportHeight:function(){return r.innerHeight},getViewportWidth:function(){return r.innerWidth},getViewSize:function(){return{width:m.getViewportWidth(),height:m.getViewportHeight()}},normalize:function(X){return u[X]||(u[X]=X.replace(F,L))},parseBox:function(Z){Z=Z||0;var X=typeof Z,aa,Y;if(X==="number"){return{top:Z,right:Z,bottom:Z,left:Z}}else{if(X!=="string"){return Z}}aa=Z.split(" ");Y=aa.length;if(Y===1){aa[1]=aa[2]=aa[3]=aa[0]}else{if(Y===2){aa[2]=aa[0];aa[3]=aa[1]}else{if(Y===3){aa[3]=aa[1]}}}return{top:parseFloat(aa[0])||0,right:parseFloat(aa[1])||0,bottom:parseFloat(aa[2])||0,left:parseFloat(aa[3])||0}},parseStyles:function(Y){var X={},Z;if(Y){W.lastIndex=0;while((Z=W.exec(Y))){X[Z[1]]=Z[2]||""}}return X},select:function(X,Z,Y){return Ext.fly(Y||I).select(X,Z)},query:function(Y,X,Z){return Ext.fly(Z||I).query(Y,X)},unitizeBox:function(Z,X){var Y=this;Z=Y.parseBox(Z);return Y.addUnits(Z.top,X)+" "+Y.addUnits(Z.right,X)+" "+Y.addUnits(Z.bottom,X)+" "+Y.addUnits(Z.left,X)},serializeForm:function(Z){var aa=Z.elements||(I.forms[Z]||Ext.getDom(Z)).elements,aj=false,ai=encodeURIComponent,ad="",ac=aa.length,ae,X,ah,al,ak,af,ab,ag,Y;for(af=0;af<ac;af++){ae=aa[af];X=ae.name;ah=ae.type;al=ae.options;if(!ae.disabled&&X){if(/select-(one|multiple)/i.test(ah)){ag=al.length;for(ab=0;ab<ag;ab++){Y=al[ab];if(Y.selected){ak=Y.hasAttribute("value");ad+=Ext.String.format("{0}={1}&",ai(X),ai(ak?Y.value:Y.text))}}}else{if(!(/file|undefined|reset|button/i.test(ah))){if(!(/radio|checkbox/i.test(ah)&&!ae.checked)&&!(ah=="submit"&&aj)){ad+=ai(X)+"="+ai(ae.value)+"&";aj=/submit/i.test(ah)}}}}}return ad.substr(0,ad.length-1)}},addCls:function(af,ad,ah){var ag=this,ai,ab,Y,Z,ac,ae,X,aa=ag.getData();if(!af){return ag}if(!aa.isSynchronized){ag.synchronize()}ab=ag.dom;Y=aa.classMap;Z=aa.classList;ad=ad?ad+v:"";ah=ah?v+ah:"";if(typeof af==="string"){af=af.split(C)}for(ac=0,ae=af.length;ac<ae;ac++){X=ad+af[ac]+ah;if(!Y[X]){Y[X]=true;Z.push(X);ai=true}}if(ai){ab.className=Z.join(" ")}return ag},addStyles:function(ae,ad){var Z=0,ac=(ae||"").match(t),ab,X=ac.length,aa,Y=[];if(X===1){Z=Math.abs(parseFloat(this.getStyle(ad[ac[0]]))||0)}else{if(X){for(ab=0;ab<X;ab++){aa=ac[ab];Y.push(ad[aa])}Y=this.getStyle(Y);for(ab=0;ab<X;ab++){aa=ac[ab];Z+=parseFloat(Y[ad[aa]])||0}}}return Z},addUnits:function(Y,X){return m.addUnits(Y,X)},adjustDirect2DDimension:function(Z){var ae=this,Y=ae.dom,ac=ae.getStyle("display"),ab=Y.style.display,af=Y.style.position,ad=Z===e?0:1,X=Y.currentStyle,aa;if(ac==="inline"){Y.style.display="inline-block"}Y.style.position=ac.match(B)?"absolute":"static";aa=(parseFloat(X[Z])||parseFloat(X.msTransformOrigin.split(" ")[ad])*2)%1;Y.style.position=af;if(ac==="inline"){Y.style.display=ab}return aa},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(Z,Y){var aa=this,ac,X,ab;if(Z.nodeType||Z.dom||typeof Z==="string"){Z=Ext.getDom(Z);aa.dom.appendChild(Z);return !Y?Ext.get(Z):Z}else{if(Z.length){ac=Ext.fly(document.createDocumentFragment());X=Z.length;for(ab=0;ab<X;ab++){ac.appendChild(Z[ab],Y)}aa.dom.appendChild(ac.dom);return Y?ac.dom:ac}else{return aa.createChild(Z,null,Y)}}},appendTo:function(X){Ext.getDom(X).appendChild(this.dom);return this},applyStyles:function(X){if(X){if(typeof X==="function"){X=X.call()}if(typeof X==="string"){X=m.parseStyles(X)}if(typeof X==="object"){this.setStyle(X)}}return this},blur:function(){var X=this,Z=X.dom;if(Z!==I.body){try{Z.blur()}catch(Y){}return X}else{return X.focus(undefined,Z)}},center:function(X){return this.alignTo(X||I,"c-c")},child:function(X,Y){var Z=this,aa=Ext.get(Z).id;return Z.selectNode(Ext.makeIdSelector(aa)+" > "+X,!!Y)},createChild:function(Y,X,Z){Y=Y||{tag:"div"};if(X){return Ext.DomHelper.insertBefore(X,Y,Z!==true)}else{return Ext.DomHelper.append(this.dom,Y,Z!==true)}},createShim:function(){var X=I.createElement("iframe"),Y;X.frameBorder="0";X.className="x-shim";X.src=Ext.SSL_SECURE_URL;X.setAttribute("role","presentation");X.setAttribute("tabindex",-1);Y=Ext.get(this.dom.parentNode.insertBefore(X,this.dom));return Y},contains:function(X){if(!X){return false}var Y=this,Z=Ext.getDom(X);return(Z===Y.dom)||Y.isAncestor(Z)},destroy:function(){var X=this,Y=X.dom;if(!X.isFly){X.clearListeners();delete Ext.cache[X.id];X.isDestroyed=true}if(Y){if(Y.parentNode){Y.parentNode.removeChild(Y)}Y._extData=X.dom=null}},detach:function(){var X=this.dom;if(X&&X.parentNode&&X.tagName!=="BODY"){X.parentNode.removeChild(X)}return this},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(X){X.preventDefault()},destroyable:true,delegated:false})},disableTouchScroll:function(){this.addCls(O);this.on({touchmove:function(X){X.preventDefault()},translate:false})},doAddListener:function(aa,ad,ae,af){var ac=this,X,Y,Z,ab;if(!ac.blockedEvents[aa]){Y=ac.mixins.observable.doAddListener;af=af||{};if(ac.longpressEvents[aa]){ac.disableTouchContextMenu()}if(ac.normalizeEvent){X=ac.normalizeEvent(aa);if(X){aa=X.eventName;af.beforeFn=X.normalizeFn}}if(m.useDelegatedEvents===false){af.delegated=af.delegated||false}if(af.translate!==false){Z=ac.additiveEvents[aa];if(Z){af.type=aa;aa=Z;Y.apply(ac,arguments)}ab=ac.eventMap[aa];if(ab){af.type=af.type||aa;aa=ab}}Y.apply(ac,arguments);delete af.type}return ac},doRemoveListener:function(aa,ad,ae,af){var ac=this,X,Y,Z,ab;if(!ac.blockedEvents[aa]){Y=ac.mixins.observable.doRemoveListener;af=af||{};if(ac.longpressEvents[aa]){ab=this._contextMenuListenerRemover;if(ab){ab.destroy()}}if(ac.normalizeEvent){X=ac.normalizeEvent(aa);if(X){aa=X.eventName}}if(m.useDelegatedEvents===false){af.delegated=af.delegated||false}if(af.translate!==false){Z=ac.additiveEvents[aa];if(Z){aa=Z;Y.apply(ac,arguments)}aa=ac.eventMap[aa]||aa}Y.apply(ac,arguments)}return ac},doReplaceWith:function(X){var Y=this.dom;Y.parentNode.replaceChild(Ext.getDom(X),Y)},down:function(X,Y){return this.selectNode(X,!!Y)},findParent:function(ad,Y,X){var aa=this,ab=aa.dom,Z=I.documentElement,ac=0;Y=Y||50;if(isNaN(Y)){Y=Number.MAX_VALUE}while(ab&&ab.nodeType===1&&ac<Y&&ab!==Z){if(Ext.fly(ab).is(ad)){return X?Ext.get(ab):ab}ac++;ab=ab.parentNode}return null},findParentNode:function(aa,Y,X){var Z=Ext.fly(this.dom.parentNode);return Z?Z.findParent(aa,Y,X):null},first:function(X,Y){return this.matchNode("nextSibling","firstChild",X,Y)},focus:function(aa,Z){var X=this;Z=Z||X.dom;try{if(Number(aa)){Ext.defer(X.focus,aa,X,[null,Z])}else{Ext.GlobalEvents.fireEvent("beforefocus",Z);Z.focus()}}catch(Y){}return X},getAnchorToXY:function(aa,X,Z,Y){return aa.getAnchorXY(X,Z,Y)},getAttribute:function(X,Y){var Z=this.dom;return Y?(Z.getAttributeNS(Y,X)||Z.getAttribute(Y+":"+X)):(Z.getAttribute(X)||Z[X]||null)},getBottom:function(X){return(X?this.getLocalY():this.getY())+this.getHeight()},getById:function(Z,X){var Y=I.getElementById(Z)||this.dom.querySelector(Ext.makeIdSelector(Z));return X?Y:(Y?Ext.get(Y):null)},getBorderPadding:function(){var X=this.getStyle(z),Y=this.getStyle(d);return{beforeX:(parseFloat(Y[s.l])||0)+(parseFloat(X[Q.l])||0),afterX:(parseFloat(Y[s.r])||0)+(parseFloat(X[Q.r])||0),beforeY:(parseFloat(Y[s.t])||0)+(parseFloat(X[Q.t])||0),afterY:(parseFloat(Y[s.b])||0)+(parseFloat(X[Q.b])||0)}},getBorderWidth:function(X){return this.addStyles(X,s)},getData:function(){var X=this.dom;return(X._extData||(X._extData={}))},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(aa,Y){var Z=this,ab=Z.isStyle("display","none"),X,ac;if(ab){return 0}X=Z.dom.offsetHeight;if(Ext.supports.Direct2DBug){ac=Z.adjustDirect2DDimension(G);if(Y){X+=ac}else{if(ac>0&&ac<0.5){X++}}}if(aa){X-=Z.getBorderWidth("tb")+Z.getPadding("tb")}return(X<0)?0:X},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(X){return X?this.getLocalX():this.getX()},getLocalX:function(){var Z=this,Y,X=Z.getStyle("left");if(!X||X==="auto"){X=0}else{if(o.test(X)){X=parseFloat(X)}else{X=Z.getX();Y=Z.dom.offsetParent;if(Y){X-=Ext.fly(Y).getX()}}}return X},getLocalXY:function(){var aa=this,Z,Y=aa.getStyle(["left","top"]),X=Y.left,ab=Y.top;if(!X||X==="auto"){X=0}else{if(o.test(X)){X=parseFloat(X)}else{X=aa.getX();Z=aa.dom.offsetParent;if(Z){X-=Ext.fly(Z).getX()}}}if(!ab||ab==="auto"){ab=0}else{if(o.test(ab)){ab=parseFloat(ab)}else{ab=aa.getY();Z=aa.dom.offsetParent;if(Z){ab-=Ext.fly(Z).getY()}}}return[X,ab]},getLocalY:function(){var Y=this,X,Z=Y.getStyle("top");if(!Z||Z==="auto"){Z=0}else{if(o.test(Z)){Z=parseFloat(Z)}else{Z=Y.getY();X=Y.dom.offsetParent;if(X){Z-=Ext.fly(X).getY()}}}return Z},getMargin:function(Z){var aa=this,ab={t:"top",l:"left",r:"right",b:"bottom"},Y,ac,X;if(!Z){X=[];for(Y in j){X.push(j[Y])}ac=aa.getStyle(j);if(ac&&typeof ac==="object"){for(Y in j){ac[ab[Y]]=parseFloat(ac[j[Y]])||0}}return ac}else{return aa.addStyles(Z,j)}},getPadding:function(X){return this.addStyles(X,Q)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(X){return(X?this.getLocalX():this.getX())+this.getWidth()},getSize:function(X){return{width:this.getWidth(X),height:this.getHeight(X)}},getStyle:function(aj,ae){var af=this,aa=af.dom,am=typeof aj!=="string",ak=af.styleHooks,Y=aj,ag=Y,ad=1,ac,al,ai,ah,Z,X,ab;if(am){ai={};Y=ag[0];ab=0;if(!(ad=ag.length)){return ai}}if(!aa||aa.documentElement){return ai||""}ac=aa.style;if(ae){X=ac}else{X=aa.ownerDocument.defaultView.getComputedStyle(aa,null);if(!X){ae=true;X=ac}}do{ah=ak[Y];if(!ah){ak[Y]=ah={name:m.normalize(Y)}}if(ah.get){Z=ah.get(aa,af,ae,X)}else{al=ah.name;Z=X[al]}if(!am){return Z}ai[Y]=Z;Y=ag[++ab]}while(ab<ad);return ai},getStyleValue:function(X){return this.dom.style.getPropertyValue(X)},getTop:function(X){return X?this.getLocalY():this.getY()},getValue:function(Y){var X=this.dom.value;return Y?parseInt(X,10):X},getViewSize:function(){var X=this.dom;if(X===I||X===I.body){return{width:m.getViewportWidth(),height:m.getViewportHeight()}}else{return{width:X.clientWidth,height:X.clientHeight}}},getVisibilityMode:function(){var X=this,Y=X.getData(),Z=Y.visibilityMode;if(Z===undefined){Y.visibilityMode=Z=m.DISPLAY}return Z},getWidth:function(X,ac){var aa=this,ad=aa.dom,ab=aa.isStyle("display","none"),Z,Y,ae;if(ab){return 0}if(Ext.supports.BoundingClientRect){Z=ad.getBoundingClientRect();Y=(aa.vertical&&!Ext.supports.RotatedBoundingClientRect)?(Z.bottom-Z.top):(Z.right-Z.left);Y=ac?Y:Math.ceil(Y)}else{Y=ad.offsetWidth}if(Ext.supports.Direct2DBug&&!aa.vertical){ae=aa.adjustDirect2DDimension(e);if(ac){Y+=ae}else{if(ae>0&&ae<0.5){Y++}}}if(X){Y-=aa.getBorderWidth("lr")+aa.getPadding("lr")}return(Y<0)?0:Y},getX:function(){return this.getXY()[0]},getXY:function(){var Y=Math.round,ab=this.dom,X=0,ac=0,aa;if(ab!==I&&ab!==I.body){try{aa=ab.getBoundingClientRect()}catch(Z){aa={left:0,top:0}}X=Y(aa.left);ac=Y(aa.top)}return[X,ac]},getY:function(){return this.getXY()[1]},hasCls:function(X){var Y=this.getData();if(!Y.isSynchronized){this.synchronize()}return Y.classMap.hasOwnProperty(X)},hide:function(){this.setVisible(false);return this},insertAfter:function(X){X=Ext.getDom(X);X.parentNode.insertBefore(this.dom,X.nextSibling);return this},insertBefore:function(X){X=Ext.getDom(X);X.parentNode.insertBefore(this.dom,X);return this},insertFirst:function(Y,X){Y=Y||{};if(Y.nodeType||Y.dom||typeof Y==="string"){Y=Ext.getDom(Y);this.dom.insertBefore(Y,this.dom.firstChild);return !X?Ext.get(Y):Y}else{return this.createChild(Y,this.dom.firstChild,X)}},insertHtml:function(Y,Z,X){var aa=Ext.DomHelper.insertHtml(Y,this.dom,Z);return X?Ext.get(aa):aa},insertSibling:function(Y,ab,ae){var ad=this,af=Ext.DomHelper,ag=(ab||"before").toLowerCase()==="after",aa,X,Z,ac;if(Ext.isIterable(Y)){Z=Y.length;X=Ext.fly(document.createDocumentFragment());if(Ext.isArray(Y)){for(ac=0;ac<Z;ac++){aa=X.appendChild(Y[ac],ae)}}else{for(ac=0;ac<Z;ac++){X.dom.appendChild(aa=Y[0])}if(ae===false){aa=Ext.get(aa)}}ad.dom.parentNode.insertBefore(X.dom,ag?ad.dom.nextSibling:ad.dom);return aa}Y=Y||{};if(Y.nodeType||Y.dom){aa=ad.dom.parentNode.insertBefore(Ext.getDom(Y),ag?ad.dom.nextSibling:ad.dom);if(!ae){aa=Ext.get(aa)}}else{if(ag&&!ad.dom.nextSibling){aa=af.append(ad.dom.parentNode,Y,!ae)}else{aa=af[ag?"insertAfter":"insertBefore"](ad.dom,Y,!ae)}}return aa},is:function(X){var Z=this.dom,Y;if(!X){Y=true}else{if(!Z.tagName){Y=false}else{if(Ext.isFunction(X)){Y=X(Z)}else{Y=Z[Ext.supports.matchesSelector](X)}}}return Y},isAncestor:function(Y){var X=false,Z=this.dom,aa=Ext.getDom(Y);if(Z&&aa){if(Z.contains){return Z.contains(aa)}else{if(Z.compareDocumentPosition){return !!(Z.compareDocumentPosition(aa)&16)}else{while((aa=aa.parentNode)){X=aa===Z||X}}}}return X},isPainted:(function(){return !Ext.browser.is.IE?function(){var X=this.dom;return Boolean(X&&X.offsetParent)}:function(){var X=this.dom;return Boolean(X&&(X.offsetHeight!==0&&X.offsetWidth!==0))}})(),isStyle:function(X,Y){return this.getStyle(X)===Y},isVisible:function(Y){var Z=this.dom,X;if(!Z){return false}if(!N){N=new Ext.dom.Fly()}for(X=Z.ownerDocument.documentElement;Z!==X;Z=Z.parentNode){if(!Z||Z.nodeType===11||(N.attach(Z)).isStyle(g,S)||N.isStyle(b,K)){return false}if(!Y){break}}return true},last:function(X,Y){return this.matchNode("previousSibling","lastChild",X,Y)},matchNode:function(Y,ac,X,Z){var aa=this.dom,ab;if(!aa){return null}ab=aa[ac];while(ab){if(ab.nodeType===1&&(!X||Ext.fly(ab,"_matchNode").is(X))){return !Z?Ext.get(ab):ab}ab=ab[Y]}return null},next:function(X,Y){return this.matchNode("nextSibling","nextSibling",X,Y)},parent:function(X,Y){return this.matchNode("parentNode","parentNode",X,Y)},position:function(ab,aa,X,Z){var Y=this;if(!ab&&Y.isStyle(M,q)){Y.setStyle(M,p)}else{if(ab){Y.setStyle(M,ab)}}if(aa){Y.setStyle(k,aa)}if(X||Z){Y.setXY([X||false,Z||false])}},prev:function(X,Y){return this.matchNode("previousSibling","previousSibling",X,Y)},query:function(Z,ah,af){var ab=this.dom,ad,ae,ag,Y,X,ac,aa;if(!ab){return null}ah=(ah!==false);Z=Z.split(",");if(!af){ad=[]}for(ac=0,ae=Z.length;ac<ae;ac++){if(typeof Z[ac]==="string"){if(af){Y=ab.querySelector(Z[ac]);return ah?Y:Ext.get(Y)}X=ab.querySelectorAll(Z[ac]);for(aa=0,ag=X.length;aa<ag;aa++){ad.push(ah?X[aa]:Ext.get(X[aa]))}}}return ad},radioCls:function(aa){var ab=this.dom.parentNode.childNodes,Y;aa=Ext.isArray(aa)?aa:[aa];for(var Z=0,X=ab.length;Z<X;Z++){Y=ab[Z];if(Y&&Y.nodeType===1){Ext.fly(Y).removeCls(aa)}}return this.addCls(aa)},redraw:function(){var Y=this.dom,X=Y.style;X.display="none";Y.offsetHeight;X.display=""},remove:function(){this.destroy()},removeChild:function(X){this.dom.removeChild(Ext.getDom(X));return this},removeCls:function(af,ad,ah){var ag=this,ai,ab,Y,Z,ac,ae,X,aa=ag.getData();if(!af){return ag}if(!aa.isSynchronized){ag.synchronize()}if(!ah){ah=""}ab=ag.dom;Y=aa.classMap;Z=aa.classList;ad=ad?ad+v:"";ah=ah?v+ah:"";if(typeof af==="string"){af=af.split(C)}for(ac=0,ae=af.length;ac<ae;ac++){X=ad+af[ac]+ah;if(Y[X]){delete Y[X];Ext.Array.remove(Z,X);ai=true}}if(ai){ab.className=Z.join(" ")}return ag},repaint:function(){var X=this;X.addCls("x-repaint");Ext.defer(function(){if(X.dom){Ext.fly(X.dom).removeCls("x-repaint")}},1);return X},replace:function(Z,Y){Z=Ext.getDom(Z);var X=Z.parentNode,ab=Z.id,aa=this.dom;if(Y!==false&&ab&&Ext.cache[ab]){X.insertBefore(aa,Z);Ext.get(Z).destroy()}else{X.replaceChild(aa,Z)}return this},replaceCls:function(Z,ag,ae,ai){var ah=this,ac,Y,aa,ad,af,X,ab=ah.getData();if(!Z&&!ag){return ah}Z=Z||[];ag=ag||[];if(!ab.isSynchronized){ah.synchronize()}if(!ai){ai=""}ac=ah.dom;Y=ab.classMap;aa=ab.classList;ae=ae?ae+v:"";ai=ai?v+ai:"";if(typeof Z==="string"){Z=Z.split(C)}if(typeof ag==="string"){ag=ag.split(C)}for(ad=0,af=Z.length;ad<af;ad++){X=ae+Z[ad]+ai;if(Y[X]){delete Y[X];Ext.Array.remove(aa,X)}}for(ad=0,af=ag.length;ad<af;ad++){X=ae+ag[ad]+ai;if(!Y[X]){Y[X]=true;aa.push(X)}}ac.className=aa.join(" ");return ah},replaceWith:function(aa){var ab=this,ac=ab.dom,Z=ac.parentNode,X=Ext.cache,Y;ab.clearListeners();if(aa.nodeType||aa.dom||typeof aa==="string"){aa=Ext.get(aa);Y=Z.insertBefore(aa.dom,ac)}else{Y=Ext.DomHelper.insertBefore(ac,aa)}Z.removeChild(ac);ab.dom=Y;if(!ab.isFly){delete X[ab.id];X[ab.id=Ext.id(Y)]=ab}return ab},resolveListenerScope:function(Y){var X=this.component;return X?X.resolveListenerScope(Y):this},select:function(Y,aa){var X,Z;if(typeof Y==="string"){Z=this.query(Y,!aa)}else{Z=Y;X=true}return aa?new Ext.CompositeElement(Z,!X):new Ext.CompositeElementLite(Z,true)},selectNode:function(Y,X){return this.query(Y,X,true)},set:function(X,Y){var aa=this,ac=aa.dom,Z,ab;for(Z in X){if(X.hasOwnProperty(Z)){ab=X[Z];if(Z==="style"){aa.applyStyles(ab)}else{if(Z==="cls"){ac.className=ab}else{if(Y!==false){if(ab===undefined){ac.removeAttribute(Z)}else{ac.setAttribute(Z,ab)}}else{ac[Z]=ab}}}}}return aa},setBottom:function(X){this.dom.style[E]=m.addUnits(X);return this},setBorder:function(X){var Z=this,Y=Z.dom.style;if(X||X===0){X=Z.self.unitizeBox((X===true)?1:X);Y.setProperty("border-width",X,"important")}else{Y.removeProperty("border-top-width");Y.removeProperty("border-right-width");Y.removeProperty("border-bottom-width");Y.removeProperty("border-left-width")}},setCls:function(aa){var ac=this,Z=ac.getData(),ad=Z.classMap,Y,ab,X;if(typeof aa==="string"){aa=aa.split(C)}for(Y=0,ab=aa.length;Y<ab;Y++){X=aa[Y];if(!ad[X]){ad[X]=true}}Z.classList=aa.slice();ac.dom.className=aa.join(" ")},setHeight:function(X){this.dom.style[G]=m.addUnits(X);return this},setHtml:function(X){if(this.dom){this.dom.innerHTML=X}},setId:function(aa){var Z=this,X=Z.id,Y=Ext.cache;if(X){delete Y[X]}Z.dom.id=aa;Z.id=aa;Y[aa]=Z;return Z},setLeft:function(X){this.dom.style[A]=m.addUnits(X);return this},setLocalX:function(X){var Y=this.dom.style;Y.right="auto";Y.left=(X===null)?"auto":X+"px"},setLocalXY:function(X,Z){var Y=this.dom.style;Y.right="auto";if(X&&X.length){Z=X[1];X=X[0]}if(X===null){Y.left="auto"}else{if(X!==undefined){Y.left=X+"px"}}if(Z===null){Y.top="auto"}else{if(Z!==undefined){Y.top=Z+"px"}}},setLocalY:function(X){this.dom.style.top=(X===null)?"auto":X+"px"},setMargin:function(Z){var Y=this,X=Y.dom.style;if(Z||Z===0){Z=Y.self.unitizeBox((Z===true)?5:Z);X.setProperty("margin",Z,"important")}else{X.removeProperty("margin-top");X.removeProperty("margin-right");X.removeProperty("margin-bottom");X.removeProperty("margin-left")}},setMaxHeight:function(X){this.dom.style[x]=m.addUnits(X);return this},setMaxWidth:function(X){this.dom.style[n]=m.addUnits(X);return this},setMinHeight:function(X){this.dom.style[c]=m.addUnits(X);return this},setMinWidth:function(X){this.dom.style[R]=m.addUnits(X);return this},setPadding:function(Z){var Y=this,X=Y.dom.style;if(Z||Z===0){Z=Y.self.unitizeBox((Z===true)?5:Z);X.setProperty("padding",Z,"important")}else{X.removeProperty("padding-top");X.removeProperty("padding-right");X.removeProperty("padding-bottom");X.removeProperty("padding-left")}},setRight:function(X){this.dom.style[V]=m.addUnits(X);return this},setSize:function(Z,X){var aa=this,Y=aa.dom.style;if(Ext.isObject(Z)){X=Z.height;Z=Z.width}Y.width=m.addUnits(Z);Y.height=m.addUnits(X);return aa},setSizeState:function(ab){var aa=this,Z=["x-sized","x-unsized","x-stretched"],X=[true,false,null],Y=X.indexOf(ab),ac;if(Y!==-1){ac=Z[Y];Z.splice(Y,1);aa.addCls(ac)}aa.removeCls(Z);return aa},setStyle:function(ae,ac){var aa=this,ad=aa.dom,X=aa.styleHooks,Z=ad.style,Y=ae,ab;if(typeof Y==="string"){ab=X[Y];if(!ab){X[Y]=ab={name:m.normalize(Y)}}ac=(ac==null)?"":ac;if(ab.set){ab.set(ad,ac,aa)}else{Z[ab.name]=ac}if(ab.afterSet){ab.afterSet(ad,ac,aa)}}else{for(Y in ae){if(ae.hasOwnProperty(Y)){ab=X[Y];if(!ab){X[Y]=ab={name:m.normalize(Y)}}ac=ae[Y];ac=(ac==null)?"":ac;if(ab.set){ab.set(ad,ac,aa)}else{Z[ab.name]=ac}if(ab.afterSet){ab.afterSet(ad,ac,aa)}}}}return aa},setText:function(X){this.dom.textContent=X},setTop:function(X){this.dom.style[J]=m.addUnits(X);return this},setVisibility:function(X){var Y=this.dom.style;if(X){Y.removeProperty("visibility")}else{Y.setProperty("visibility","hidden","important")}},setVisibilityMode:function(X){this.getData().visibilityMode=X;return this},setVisible:function(Z){var X=this,Y=X.getVisibilityMode(),aa=Z?"removeCls":"addCls";switch(Y){case m.DISPLAY:X.removeCls([y,h]);X[aa](w);break;case m.VISIBILITY:X.removeCls([w,h]);X[aa](y);break;case m.OFFSETS:X.removeCls([y,w]);X[aa](h);break}return X},setWidth:function(X){this.dom.style[e]=m.addUnits(X);return this},setX:function(X){return this.setXY([X,false])},setXY:function(Z){var Y=this,aa=Y.translatePoints(Z),X=Y.dom.style,ab;Y.position();X.right="auto";for(ab in aa){if(!isNaN(aa[ab])){X[ab]=aa[ab]+"px"}}return Y},setY:function(X){return this.setXY([false,X])},show:function(){this.setVisible(true);return this},swapCls:function(Y,ad,X,ab){if(X===undefined){X=true}var aa=this,ac=X?Y:ad,Z=X?ad:Y;if(Z){aa.removeCls(ab?ab+"-"+Z:Z)}if(ac){aa.addCls(ab?ab+"-"+ac:ac)}return aa},synchronize:function(){var ae=this,aa=ae.dom,af={},ad=aa.className,Y,ab,ac,X,Z=ae.getData();if(ad&&ad.length>0){Y=aa.className.split(T);for(ab=0,ac=Y.length;ab<ac;ab++){X=Y[ab];af[X]=true}}else{Y=[]}Z.classList=Y;Z.classMap=af;Z.isSynchronized=true;return ae},toggleCls:function(X,Y){if(typeof Y!=="boolean"){Y=!this.hasCls(X)}return(Y)?this.addCls(X):this.removeCls(X)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var X="webkitTransform" in I.createElement("div").style?"webkitTransform":"transform";return function(Y,aa,Z){this.dom.style[X]="translate3d("+(Y||0)+"px, "+(aa||0)+"px, "+(Z||0)+"px)"}}(),unwrap:function(){var Z=this.dom,X=Z.parentNode,Y;if(X){Y=X.parentNode;Y.insertBefore(Z,X);Y.removeChild(X)}else{Y=document.createDocumentFragment();Y.appendChild(Z)}return this},up:function(Z,X,Y){return this.findParentNode(Z,X,!Y)},update:function(X){return this.setHtml(X)},wrap:function(Y,Z,X){var aa=this,ad=aa.dom,ac=Ext.DomHelper.insertBefore(ad,Y||{tag:"div"},true),ab=ac;if(X){ab=ac.selectNode(X)}ab.appendChild(ad);return Z?ac.dom:ac},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(Z){var ac=this,aa=ac.dom,ae=aa.nodeName==="BODY",af=ae?m.getViewportWidth():aa.offsetWidth,ab=ae?m.getViewportHeight():aa.offsetHeight,ah=ac.getXY(),ag=ah[1],X=ah[0]+af,ad=ah[1]+ab,Y=ah[0];if(Z){return new Ext.util.Region(ag,X,ad,Y)}else{return{left:Y,top:ag,width:af,height:ab,right:X,bottom:ad}}},getScrollParent:null,isDescendent:null,isTransparent:function(Y){var X=this.getStyle(Y);return X?a.test(X):false},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[["positionable",Ext.util.Positionable],["observable",Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(q){var b=document,m=q.prototype,x=Ext.supports,D="pointerdown",e="pointermove",c="pointerup",d="pointercancel",h="MSPointerDown",n="MSPointerMove",z="MSPointerUp",a="MSPointerCancel",t="mousedown",y="mousemove",u="mouseup",E="mouseover",C="mouseout",p="mouseenter",f="mouseleave",w="touchstart",l="touchmove",A="touchend",g="touchcancel",r="click",j="dblclick",v="tap",B="doubletap",k=m.eventMap={},s=m.additiveEvents={},o=Ext.id;Ext.id=function(H,G){var F=Ext.getDom(H,true),I,J;if(!F){J=o(H,G)}else{if(!(J=F.id)){J=o(null,G||q.prototype.identifiablePrefix);if(Ext.isSandboxed){I=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-");J=I+J}F.id=J}}return J};if(x.PointerEvents){k[t]=D;k[y]=e;k[u]=c;k[w]=D;k[l]=e;k[A]=c;k[g]=d;k[r]=v;k[j]=B;k[E]="pointerover";k[C]="pointerout";k[p]="pointerenter";k[f]="pointerleave"}else{if(x.MSPointerEvents){k[D]=h;k[e]=n;k[c]=z;k[d]=a;k[t]=h;k[y]=n;k[u]=z;k[w]=h;k[l]=n;k[A]=z;k[g]=a;k[r]=v;k[j]=B;k[E]="MSPointerOver";k[C]="MSPointerOut"}else{if(x.TouchEvents){k[D]=w;k[e]=l;k[c]=A;k[d]=g;k[t]=w;k[y]=l;k[u]=A;k[r]=v;k[j]=B;if(Ext.isWebKit&&Ext.os.is.Desktop){k[w]=t;k[l]=y;k[A]=u;k[g]=u;s[t]=t;s[y]=y;s[u]=u;s[w]=w;s[l]=l;s[A]=A;s[g]=g;s[D]=t;s[e]=y;s[c]=u;s[d]=u}}else{k[D]=t;k[e]=y;k[c]=u;k[d]=u;k[w]=t;k[l]=y;k[A]=u;k[g]=u}}}m.getTrueXY=m.getXY;Ext.select=q.select;Ext.query=q.query;Ext.apply(Ext,{get:function(F){return q.get(F)},getDom:function(F){if(!F||!b){return null}return F.dom||(typeof F==="string"?Ext.getElementById(F):F)},getBody:function(){if(!Ext._bodyEl){if(!b.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(b.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(b.head||b.getElementsByTagName("head")[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(b)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(H){var I=H&&H.id,G=Ext.cache[I],F;if(G){G.destroy()}else{if(H&&H.tagName.toUpperCase()!=="BODY"){F=H.parentNode;if(F){F.removeChild(H)}}}}});Ext.isGarbage=function(F){return F&&F.nodeType===1&&F.tagName!=="BODY"&&F.tagName!=="HTML"&&(!F.parentNode||(!F.offsetParent&&((Ext.isIE8?b.all[F.id]:b.getElementById(F.id))!==F)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(F))))}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:null,id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,operator:null,root:null},scope:null,$configStrict:false,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(f){var b=a.isCollection?a.items:a,g=b.length,c=true,d,e;for(d=0;c&&d<g;d++){e=b[d];if(!e.getDisabled()){c=e.filter(f)}}return c}},isInvalid:function(a){var b=a.value;if(!a.filterFn){if(!a.property){return"A Filter requires either a property or a filterFn to be set"}if(!(b||b===0||b===false||(b===""&&a.exatchMatch))){if(!a.operator){return"A Filter requires either a property and value, or a filterFn to be set"}}}return false}},constructor:function(a){this.initConfig(a)},filter:function(b){var a=this,c=a._filterFn||a.getFilterFn();return c.call(a.scope||a,b)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-filter-")}this._id=a}return a},getFilterFn:function(){var b=this,c=b._filterFn,a;if(!c){a=b.getOperator();if(a){c=b.operatorFns[a]}else{c=b.createRegexFilter()}b._filterFn=c}return c},createRegexFilter:function(){var b=this,e=!!b.getAnyMatch(),a=!!b.getExactMatch(),c=b.getValue(),d=Ext.String.createRegex(c,!e,!e&&a,!b.getCaseSensitive());return function(f){var g=b.getPropertyValue(f);return d?d.test(g):(g==null)}},getPropertyValue:function(b){var a=this._root,c=(a==null)?b:b[a];return c[this._property]},getState:function(){var c=this.getInitialConfig(),a={},b;for(b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}delete a.root;a.value=this.getValue();return a},getScope:function(){return this.scope},serialize:function(){var a=this.getState();delete a.id;return a}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var a=this.prototype,e=(a.operatorFns={"<":function(g){var f=this._value;return Ext.coerce(this.getPropertyValue(g),f)<f},"<=":function(g){var f=this._value;return Ext.coerce(this.getPropertyValue(g),f)<=f},"=":function(g){var f=this._value;return Ext.coerce(this.getPropertyValue(g),f)==f},">=":function(g){var f=this._value;return Ext.coerce(this.getPropertyValue(g),f)>=f},">":function(g){var f=this._value;return Ext.coerce(this.getPropertyValue(g),f)>f},"!=":function(g){var f=this._value;return Ext.coerce(this.getPropertyValue(g),f)!=f},"in":function(g){var f=this._value;return Ext.Array.contains(f,Ext.coerce(this.getPropertyValue(g),f))},like:function(g){var f=this._value;return f&&Ext.coerce(this.getPropertyValue(g),f).toLowerCase().indexOf(f.toLowerCase())>-1}}),d=function(){this._filterFn=null},c=["updateOperator","updateValue"],b;e["=="]=e["="];e.gt=e[">"];e.ge=e[">="];e.lt=e["<"];e.le=e["<="];e.eq=e["="];e.ne=e["!="];for(b=c.length;b-->0;){a[c[b]]=d}}));Ext.util=Ext.util||{};Ext.util.DelayedTask=function(e,d,b,h,g){var f=this,a,c=function(){var j=Ext.GlobalEvents;clearInterval(f.id);f.id=null;e.apply(d,b||[]);if(g!==false&&j.hasListeners.idle){j.fireEvent("idle")}};h=typeof h==="boolean"?h:true;f.id=null;f.delay=function(k,m,l,j){if(h){f.cancel()}if(typeof k==="number"){a=k}e=m||e;d=l||d;b=j||b;if(!f.id){f.id=Ext.interval(c,a)}};f.cancel=function(){if(f.id){clearInterval(f.id);f.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var d=Array.prototype.slice,a=Ext.Array.insert,c=Ext.Array.toArray,b={};return{isEvent:true,suspended:0,noOptions:{},constructor:function(f,e){this.name=e;this.observable=f;this.listeners=[]},addListener:function(p,r,t,h){var n=this,o,j,q,e,s,m,g,l,k,f;if(typeof p!=="string"){r=r||n.observable}if(!n.isListening(p,r)){j=n.createListener(p,r,t,h);if(n.firing){n.listeners=n.listeners.slice(0)}o=n.listeners;l=g=o.length;q=t&&t.priority;s=n._highestNegativePriorityIndex;m=(s!==undefined);if(q){e=(q<0);if(!e||m){for(k=(e?s:0);k<g;k++){f=o[k].o?o[k].o.priority||0:0;if(f<q){l=k;break}}}else{n._highestNegativePriorityIndex=l}}else{if(m){l=s}}if(!e&&l<=s){n._highestNegativePriorityIndex++}if(l===g){n.listeners[g]=j}else{a(n.listeners,l,[j])}}return j},createListener:function(l,m,e,f){var h=this,j=(m in Ext._namedScopes),g={fn:l,scope:m,ev:h,caller:f,namedScope:j,defaultScope:j?m:undefined,lateBound:(typeof l==="string"&&(!m||j))},n=l,k=true;if(e){g.o=e;if(e.single){n=h.createSingle(n,g,e,m);k=false}if(e.target){n=h.createTargeted(n,g,e,m,k);k=false}if(e.delay){n=h.createDelayed(n,g,e,m,k);k=false}if(e.buffer){n=h.createBuffered(n,g,e,m,k);k=false}}g.fireFn=n;g.allowLookup=k;return g},findListener:function(k,j){var h=this.listeners,f=h.length,l,g,e;while(f--){l=h[f];if(l){g=l.scope;e=(l.lateBound&&!l.namedScope)?undefined:(j||this.observable);if(l.fn==k&&g==e){return f}}}return -1},isListening:function(f,e){return this.findListener(f,e)!==-1},removeListener:function(h,g){var j=this,f,m,l,e;if(h.fireFn){f=Ext.Array.indexOf(listeners,h)}else{f=j.findListener(h,g)}if(f!=-1){m=j.listeners[f];l=j._highestNegativePriorityIndex;if(j.firing){j.listeners=j.listeners.slice(0)}if(m.task){m.task.cancel();delete m.task}e=m.tasks&&m.tasks.length;if(e){while(e--){m.tasks[e].cancel()}delete m.tasks}j.listeners.splice(f,1);if(l){if(f<l){j._highestNegativePriorityIndex--}else{if(f===l&&f===j.listeners.length){delete j._highestNegativePriorityIndex}}}return true}return false},clearListeners:function(){var f=this.listeners,e=f.length;while(e--){this.removeListener(f[e].fn,f[e].scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fire:function(){var k=this,h=k.listeners,j=h.length,m,g,f,l,e;if(!k.suspended&&j>0){k.firing=true;f=arguments.length?d.call(arguments,0):[];e=f.length;for(g=0;g<j;g++){l=h[g];if(l.o){f[e]=l.o}if(l){m=k.getFireInfo(l);if(m.fn.apply(m.scope,f)===false){return(k.firing=false)}}}}k.firing=false;return true},getFireInfo:function(k,e){var l=this.observable,j=e?k.fn:k.fireFn,h=k.scope,f=k.caller,g;if((e||k.allowLookup)&&k.lateBound){h=(f||l).resolveListenerScope(k.defaultScope);j=h[j]}else{if(k.allowLookup){g=Ext._namedScopes[h]}h=(h&&!g)?h:l}b.fn=j;b.scope=h;return b},createTargeted:function(g,h,j,f,e){return function(){if(j.target===arguments[0]){var k;if(e){k=h.ev.getFireInfo(h,true);g=k.fn;f=k.scope}g.apply(f,arguments)}}},createBuffered:function(g,h,j,f,e){h.task=new Ext.util.DelayedTask();return function(){var k;if(e){k=h.ev.getFireInfo(h,true);g=k.fn;f=k.scope}h.task.delay(j.buffer,g,f,c(arguments))}},createDelayed:function(g,h,j,f,e){return function(){var k=new Ext.util.DelayedTask(),l;if(e){l=h.ev.getFireInfo(h,true);g=l.fn;f=l.scope}if(!h.tasks){h.tasks=[]}h.tasks.push(k);k.delay(j.delay||10,g,f,c(arguments))}},createSingle:function(f,g,h,e){return function(){var j=g.ev,k=j.getFireInfo(g,true);if(j.removeListener(g.fn,e)&&j.observable){j.observable.hasListeners[j.name]--}k.fn.apply(k.scope,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));(Ext.cmd.derive("Ext.util.Observable",Ext.Base,function(a){var d=Ext.emptyFn,c=[],e=Array.prototype,f=e.slice,g=Ext.$eventNameMap,b=function(h){if(h instanceof b){return h}this.observable=h;if(arguments[1].isObservable){this.managedListeners=true}this.args=f.call(arguments,1)};b.prototype.destroy=function(){var h=this.observable;h[this.managedListeners?"mun":"un"].apply(h,this.args)};return{mixinId:"observable",statics:{releaseCapture:function(h){h.fireEventArgs=this.prototype.fireEventArgs},capture:function(l,j,h){var k=function(m,n){return j.apply(h,[m].concat(n))};this.captureArgs(l,k,h)},captureArgs:function(k,j,h){k.fireEventArgs=Ext.Function.createInterceptor(k.fireEventArgs,j,h)},observe:function(h,j){if(h){if(!h.isObservable){Ext.applyIf(h,new this());this.captureArgs(h.prototype,h.fireEventArgs,h)}if(Ext.isObject(j)){h.on(j)}}return h},prepareClass:function(m,s,n){var r=m.listeners=[],p=n||m.prototype,h=p.listeners,l=s?s.listeners:m.superclass.self.listeners,j,t,q;if(l){r.push(l)}if(h){t=h.scope;if(!t){h.scope="self"}else{q=Ext._namedScopes[t];if(q&&q.isController){h.scope="self.controller"}}r.push(h);p.listeners=null}if(!m.HasListeners){var o=function(){},k=m.superclass.HasListeners||(s&&s.HasListeners)||a.HasListeners;m.prototype.HasListeners=m.HasListeners=o;o.prototype=m.hasListeners=new k()}}},isObservable:true,isUtilObservable:true,eventsSuspended:0,constructor:function(k){var l=this,j=l.self,h;if(k){Ext.apply(l,k)}l.hasListeners=new l.HasListeners();l.events=l.events||{};h=j.listeners;if(h&&!l._addDeclaredListeners(h)){j.listeners=null}if(l.listeners){l.on(l.listeners);l.listeners=null}if(l.bubbleEvents){l.enableBubble(l.bubbleEvents)}},onClassExtended:function(h){if(!h.HasListeners){a.prepareClass(h)}},eventOptionsRe:/^(?:scope|delay|buffer|onFrame|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|destroyable|vertical|horizontal|priority)$/,_addDeclaredListeners:function(h){var j=this;if(h instanceof Array){Ext.each(h,j._addDeclaredListeners,j)}else{j._addedDeclaredListeners=true;j.addListener(h)}return j._addedDeclaredListeners},addManagedListener:function(p,l,n,q,r,k){var m=this,o=m.managedListeners=m.managedListeners||[],j,h;if(typeof l!=="string"){h=arguments.length>4?r:l;r=l;for(l in r){if(r.hasOwnProperty(l)){j=r[l];if(!m.eventOptionsRe.test(l)){m.addManagedListener(p,l,j.fn||j,j.scope||r.scope||q,j.fn?j:h,true)}}}if(r&&r.destroyable){return new b(m,p,r)}}else{if(n!==d){o.push({item:p,ename:l,fn:n,scope:q,options:r});if(p.isUtilObservable){p.on(l,n,q,r,m)}else{p.on(l,n,q,r)}if(!k&&r&&r.destroyable){return new b(m,p,l,n,q)}}}},removeManagedListener:function(p,k,n,q){var m=this,r,j,o,h,l;if(typeof k!=="string"){r=k;for(k in r){if(r.hasOwnProperty(k)){j=r[k];if(!m.eventOptionsRe.test(k)){m.removeManagedListener(p,k,j.fn||j,j.scope||r.scope||q)}}}}else{o=m.managedListeners?m.managedListeners.slice():[];for(l=0,h=o.length;l<h;l++){m.removeManagedListenerItem(false,o[l],p,k,n,q)}}},fireEvent:function(h){return this.fireEventArgs(h,f.call(arguments,1))},resolveListenerScope:function(h){if(h==="this"){h=null}return h||this},fireEventArgs:function(h,k){h=g[h]||(g[h]=h.toLowerCase());var n=this,l=n.events,m=l&&l[h],j=true;if(n.hasListeners[h]){j=n.doFireEvent(h,k||c,m?m.bubble:false)}return j},doFireEvent:function(k,m,j){var o=this,h,n,l=true;do{if(o.eventsSuspended){if((h=o.eventQueue)){h.push([k,m])}return l}else{n=o.events&&o.events[k];if(n&&n!==true){if((l=n.fire.apply(n,m))===false){break}}}}while(j&&(o=o.getBubbleParent()));return l},getBubbleParent:function(){var j=this,h=j.getBubbleTarget&&j.getBubbleTarget();if(h&&h.isObservable){return h}return null},addListener:function(l,r,t,u,j){var q=this,s=0,m=Ext._namedScopes,k,h,p,n,o;if(typeof l!=="string"){u=l;t=u.scope;p=t&&m[t];n=p&&p.isSelf;for(l in u){k=u[l];if(!q.eventOptionsRe.test(l)){o=k.scope;if(o&&n){p=m[o];if(p&&p.isController){o="self.controller"}}q.addListener(l,k.fn||k,o||t,k.fn?k:u,j)}}if(u&&u.destroyable){return new b(q,u)}}else{p=m[t];l=g[l]||(g[l]=l.toLowerCase());h=(q.events||(q.events={}))[l];if(h&&h.isEvent){s=h.listeners.length}else{q.events[l]=h=new Ext.util.Event(q,l)}if(typeof r==="string"&&t&&!p){r=q.resolveMethod(r,t)}if(r!==d){h.addListener(r,t,u,j);if(h.listeners.length!==s){q.hasListeners._incr_(l)}if(u&&u.destroyable){return new b(q,l,r,t,u)}}}},removeListener:function(l,n,m){var p=this,k=p.events,j,o,h;if(typeof l!=="string"){h=l;for(l in h){if(h.hasOwnProperty(l)){j=h[l];if(!p.eventOptionsRe.test(l)){p.removeListener(l,j.fn||j,j.scope||h.scope)}}}}else{l=g[l]||(g[l]=l.toLowerCase());o=k&&k[l];if(o&&o.isEvent){if(typeof n==="string"&&m&&m!=="this"&&m!=="controller"){n=p.resolveMethod(n,m)}if(o.removeListener(n,m)){p.hasListeners._decr_(l)}}}},clearListeners:function(){var m=this,k=m.events,h=m.hasListeners,l,j;if(k){for(j in k){if(k.hasOwnProperty(j)){l=k[j];if(l.isEvent){delete h[j];l.clearListeners()}}}}m.clearManagedListeners()},clearManagedListeners:function(){var l=this,j=l.managedListeners||[],k=0,h=j.length;for(;k<h;k++){l.removeManagedListenerItem(true,j[k])}l.managedListeners=[]},removeManagedListenerItem:function(j,h,n,k,m,l){if(j||(h.item===n&&h.ename===k&&(!m||h.fn===m)&&(!l||h.scope===l))){h.item.un(h.ename,h.fn,h.scope);if(!j){Ext.Array.remove(this.managedListeners,h)}}},resolveMethod:function(j,h){return h[j]},hasListener:function(h){h=g[h]||(g[h]=h.toLowerCase());return !!this.hasListeners[h]},isSuspended:function(k){var j=this.eventsSuspended>0,h=this.events;if(!j&&k&&h){k=h[k];if(k&&k.isEvent){return k.isSuspended()}}return j},suspendEvents:function(h){++this.eventsSuspended;if(h&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var n=this,l=n.events||(n.events={}),h=arguments.length,k,m,j;for(k=0;k<h;k++){j=arguments[k];j=g[j]||(g[j]=j.toLowerCase());m=l[j];if(!m||!m.isEvent){l[j]=m=new Ext.util.Event(n,j)}m.suspend()}},resumeEvent:function(){var k=this.events||0,h=k&&arguments.length,j,l;for(j=0;j<h;j++){l=k[arguments[j]];if(l&&l.resume){l.resume()}}},resumeEvents:function(h){var j=this,m=j.eventQueue,l,k;if(j.eventsSuspended&&!--j.eventsSuspended){delete j.eventQueue;if(!h&&m){l=m.length;for(k=0;k<l;k++){j.fireEventArgs.apply(j,m[k])}}}},relayEvents:function(j,l,o){var n=this,h=l.length,k=0,m,p={};for(;k<h;k++){m=l[k];p[m]=n.createRelayer(o?o+m:m)}n.mon(j,p,null,null,undefined);return new b(n,j,p)},createRelayer:function(h,j){var k=this;return function(){return k.fireEventArgs.call(k,h,j?f.apply(arguments,j):arguments)}},enableBubble:function(p){if(p){var n=this,o=(typeof p=="string")?arguments:p,k=n.events||(n.events={}),m=k&&o.length,j,l,h;for(h=0;h<m;++h){j=o[h];j=g[j]||(g[j]=j.toLowerCase());l=k[j];if(!l||!l.isEvent){k[j]=l=new Ext.util.Event(n,j)}n.hasListeners._incr_(j);l.bubble=true}}},deprecated:{"5.0":{methods:{addEvents:null}}}}},1,0,0,0,0,0,[Ext.util,"Observable"],function(){var a=this,d=a.prototype,b=function(){},e=function(f){if(!f.HasListeners){var g=f.prototype;a.prepareClass(f,this);f.onExtended(function(h,j){a.prepareClass(h,null,j)});if(g.onClassMixedIn){Ext.override(f,{onClassMixedIn:function(h){e.call(this,h);this.callParent(arguments)}})}else{g.onClassMixedIn=function(h){e.call(this,h)}}}};b.prototype={_decr_:function(f){if(!--this[f]){delete this[f]}},_incr_:function(f){if(this.hasOwnProperty(f)){++this[f]}else{this[f]=1}}};d.HasListeners=a.HasListeners=b;a.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"});a.observeClass=a.observe;function c(m){var l=(this.methodEvents=this.methodEvents||{})[m],h,g,j,k=this,f;if(!l){this.methodEvents[m]=l={};l.originalFn=this[m];l.methodName=m;l.before=[];l.after=[];f=function(p,o,n){if((g=p.apply(o||k,n))!==undefined){if(typeof g=="object"){if(g.returnValue!==undefined){h=g.returnValue}else{h=g}j=!!g.cancel}else{if(g===false){j=true}else{h=g}}}};this[m]=function(){var p=Array.prototype.slice.call(arguments,0),o,q,n;h=g=undefined;j=false;for(q=0,n=l.before.length;q<n;q++){o=l.before[q];f(o.fn,o.scope,p);if(j){return h}}if((g=l.originalFn.apply(k,p))!==undefined){h=g}for(q=0,n=l.after.length;q<n;q++){o=l.after[q];f(o.fn,o.scope,p);if(j){return h}}return h}}return l}Ext.apply(d,{onClassMixedIn:e,beforeMethod:function(h,g,f){c.call(this,h).before.push({fn:g,scope:f})},afterMethod:function(h,g,f){c.call(this,h).after.push({fn:g,scope:f})},removeMethodListener:function(l,j,h){var k=this.getMethodEvent(l),g,f;for(g=0,f=k.before.length;g<f;g++){if(k.before[g].fn==j&&k.before[g].scope==h){Ext.Array.erase(k.before,g,1);return}}for(g=0,f=k.after.length;g<f;g++){if(k.after[g].fn==j&&k.after[g].scope==h){Ext.Array.erase(k.after,g,1);return}}},toggleEventLogging:function(f){Ext.util.Observable[f?"capture":"releaseCapture"](this,function(g){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(g,arguments)}})}})}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(b,a){var c=this;if(arguments.length===1&&Ext.isObject(b)){c.initialConfig=b;Ext.apply(c,b)}else{c.allowFunctions=b===true;if(a){c.getKey=a}c.initialConfig={allowFunctions:c.allowFunctions,getKey:c.getKey}}c.items=[];c.map={};c.keys=[];c.indexMap={};c.length=0;c.mixins.observable.constructor.call(c)},allowFunctions:false,add:function(c,d){var a=this.length,b;if(arguments.length===1){b=this.insert(a,c)}else{b=this.insert(a,c,d)}return b},getKey:function(a){return a.id},replace:function(c,e){var d=this,a,b;if(arguments.length==1){e=arguments[0];c=d.getKey(e)}a=d.map[c];if(typeof c=="undefined"||c===null||typeof a=="undefined"){return d.add(c,e)}d.generation++;b=d.indexOfKey(c);d.items[b]=e;d.map[c]=e;if(d.hasListeners.replace){d.fireEvent("replace",c,a,e)}return e},updateKey:function(f,g){var d=this,e=d.map,a=d.indexOfKey(f),c=d.indexMap,b;if(a>-1){b=e[f];delete e[f];delete c[f];e[g]=b;c[g]=a;d.keys[a]=g;d.indexGeneration=++d.generation}},addAll:function(c){var b=this,a;if(arguments.length>1||Ext.isArray(c)){b.insert(b.length,arguments.length>1?arguments:c)}else{for(a in c){if(c.hasOwnProperty(a)){if(b.allowFunctions||typeof c[a]!="function"){b.add(a,c[a])}}}}},each:function(e,d){var b=Ext.Array.push([],this.items),c=0,a=b.length,f;for(;c<a;c++){f=b[c];if(e.call(d||f,f,c,a)===false){break}}},eachKey:function(e,d){var f=this.keys,b=this.items,c=0,a=f.length;for(;c<a;c++){e.call(d||window,f[c],b[c],c,a)}},findBy:function(e,d){var f=this.keys,b=this.items,c=0,a=b.length;for(;c<a;c++){if(e.call(d||window,b[c],f[c])){return b[c]}}return null},insert:function(b,c,d){var a;if(Ext.isIterable(c)){a=this.doInsert(b,c,d)}else{if(arguments.length>2){a=this.doInsert(b,[c],[d])}else{a=this.doInsert(b,[c])}a=a[0]}return a},doInsert:function(h,n,m){var k=this,b,c,f,j=n.length,a=j,e=k.hasListeners.add,d,g={},l,p,o;if(m!=null){k.useLinearSearch=true}else{m=n;n=new Array(j);for(f=0;f<j;f++){n[f]=this.getKey(m[f])}}k.suspendEvents();for(f=0;f<j;f++){b=n[f];c=k.indexOfKey(b);if(c!==-1){if(c<h){h--}k.removeAt(c)}if(b!=null){if(g[b]!=null){l=true;a--}g[b]=f}}k.resumeEvents();if(l){p=n;o=m;n=new Array(a);m=new Array(a);f=0;for(b in g){n[f]=p[g[b]];m[f]=o[g[b]];f++}j=a}d=h===k.length&&k.indexGeneration===k.generation;Ext.Array.insert(k.items,h,m);Ext.Array.insert(k.keys,h,n);k.length+=j;k.generation++;if(d){k.indexGeneration=k.generation}for(f=0;f<j;f++,h++){b=n[f];if(b!=null){k.map[b]=m[f];if(d){k.indexMap[b]=h}}if(e){k.fireEvent("add",h,m[f],b)}}return m},remove:function(d){var c=this,b,a;if(!c.useLinearSearch&&(b=c.getKey(d))){a=c.indexOfKey(b)}else{a=Ext.Array.indexOf(c.items,d)}return(a===-1)?false:c.removeAt(a)},removeAll:function(a){var c=this,b;if(a||c.hasListeners.remove){if(a){for(b=a.length-1;b>=0;--b){c.remove(a[b])}}else{while(c.length){c.removeAt(0)}}}else{c.length=c.items.length=c.keys.length=0;c.map={};c.indexMap={};c.generation++;c.indexGeneration=c.generation}},removeAt:function(a){var c=this,d,b;if(a<c.length&&a>=0){c.length--;d=c.items[a];Ext.Array.erase(c.items,a,1);b=c.keys[a];if(typeof b!="undefined"){delete c.map[b]}Ext.Array.erase(c.keys,a,1);if(c.hasListeners.remove){c.fireEvent("remove",d,b)}c.generation++;return d}return false},removeRange:function(g,a){var h=this,b,j,f,e,c,d;if(g<h.length&&g>=0){if(!a){a=1}e=Math.min(g+a,h.length);a=e-g;d=e===h.length;c=d&&h.indexGeneration===h.generation;for(f=g;f<e;f++){j=h.keys[f];if(j!=null){delete h.map[j];if(c){delete h.indexMap[j]}}}b=h.items[f-1];h.length-=a;h.generation++;if(c){h.indexGeneration=h.generation}if(d){h.items.length=h.keys.length=h.length}else{h.items.splice(g,a);h.keys.splice(g,a)}return b}return false},removeAtKey:function(b){var d=this,c=d.keys,a;if(b==null){for(a=c.length-1;a>=0;a--){if(c[a]==null){d.removeAt(a)}}}else{return d.removeAt(d.indexOfKey(b))}},getCount:function(){return this.length},indexOf:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.indexOfKey(a)}return Ext.Array.indexOf(b.items,c)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var e=this,d=e.indexMap={},c=e.keys,a=c.length,b;for(b=0;b<a;b++){d[c[b]]=b}e.indexGeneration=e.generation},get:function(b){var d=this,a=d.map[b],c=a!==undefined?a:(typeof b=="number")?d.items[b]:undefined;return typeof c!="function"||d.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.map[a]!=null}return Ext.Array.indexOf(this.items,c)!==-1}return false},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(g,b,h,a){var c=this.extractValues(g,b),f=c.length,e=0,d;h=h||0;a=(a||a===0)?a:f-1;for(d=h;d<=a;d++){e+=c[d]}return e},collect:function(j,e,g){var k=this.extractValues(j,e),a=k.length,b={},c=[],h,f,d;for(d=0;d<a;d++){h=k[d];f=String(h);if((g||!Ext.isEmpty(h))&&!b[f]){b[f]=true;c.push(h)}}return c},extractValues:function(c,a){var b=this.items;if(a){b=Ext.Array.pluck(b,a)}return Ext.Array.pluck(b,c)},hasRange:function(b,a){return(a<this.length)},getRange:function(h,b){var g=this,d=g.items,c=[],a=d.length,f,e;if(a<1){return c}if(h>b){e=true;f=h;h=b;b=f}if(h<0){h=0}if(b==null||b>=a){b=a-1}c=d.slice(h,b+1);if(e&&c.length){c.reverse()}return c},filter:function(d,c,e,a){var b=[];if(Ext.isString(d)){b.push(new Ext.util.Filter({property:d,value:c,anyMatch:e,caseSensitive:a}))}else{if(Ext.isArray(d)||d instanceof Ext.util.Filter){b=b.concat(d)}}return this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(e,d){var h=this,a=new h.self(h.initialConfig),g=h.keys,b=h.items,f=b.length,c;a.getKey=h.getKey;for(c=0;c<f;c++){if(e.call(d||h,b[c],g[c])){a.add(g[c],b[c])}}a.useLinearSearch=h.useLinearSearch;return a},findIndex:function(c,b,e,d,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(f){return f&&b.test(f[c])},null,e)},findIndexBy:function(e,d,h){var g=this,f=g.keys,b=g.items,c=h||0,a=b.length;for(;c<a;c++){if(e.call(d||g,b[c],f[c])){return c}}return -1},createValueMatcher:function(c,e,a,b){if(!c.exec){var d=Ext.String.escapeRegex;c=String(c);if(e===true){c=d(c)}else{c="^"+d(c);if(b===true){c+="$"}}c=new RegExp(c,a?"":"i")}return c},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(c,h){var e=b.isCollection?b.items:b,g=e.length,d,f;for(f=0;f<g;++f){d=e[f].sort(c,h);if(d){return d}}return a&&a(c,h)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-sorter-")}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,c){var f=this,e=f._transform,b=f._root,g=f._property,a,h;if(b){d=d[b];c=c[b]}a=d[g];h=c[g];if(e){a=e(a);h=e(h)}return(a>h)?1:(a<h?-1:0)},applyDirection:function(a){return a?a:"ASC"},updateDirection:function(a){this.multiplier=(a.toUpperCase()==="DESC")?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){return{root:this.getRoot(),property:this.getProperty(),direction:this.getDirection()}},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,$configPrefixed:false,$configStrict:false,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,c){var b=a[0].sort(d,c),f=a.length,e=1;for(;!b&&e<f;e++){b=a[e].sort.call(this,d,c)}return b}:function(){return 0}}},applySorters:function(c){var b=this,a=b.getSorters()||new Ext.util.MixedCollection(false,Ext.returnId);if(c){a.addAll(b.decodeSorters(c))}return a},sort:function(g,f,a,e){var b=this,h,d,c=b.getSorters();if(!c){b.setSorters(null);c=b.getSorters()}if(Ext.isArray(g)){e=a;a=f}else{if(Ext.isObject(g)){g=[g];e=a;a=f}else{if(Ext.isString(g)){h=c.get(g);if(!h){h={property:g,direction:f}}else{if(f==null){h.toggle()}else{h.setDirection(f)}}g=[h]}}}if(g&&g.length){g=b.decodeSorters(g);switch(a){case"multi":c.insert(0,g[0]);d=c.getCount()-b.multiSortLimit;if(d>0){c.removeRange(b.multiSortLimit,d)}break;case"prepend":c.insert(0,g);break;case"append":c.addAll(g);break;case undefined:case null:case"replace":c.clear();c.addAll(g);break;default:}}if(e!==false){b.fireEvent("beforesort",b,g);b.onBeforeSort(g);if(b.getSorterCount()){b.doSort(b.generateComparator())}}return g},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(f){if(!Ext.isArray(f)){if(f===undefined){f=[]}else{f=[f]}}var d=f.length,g=Ext.util.Sorter,b=this.getModel?this.getModel():this.model,e,a,c;for(c=0;c<d;c++){a=f[c];if(!(a instanceof g)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:"ASC"});if(a.fn){a.sorterFn=a.fn}if(typeof a=="function"){a={sorterFn:a}}if(b&&!a.transform){e=b.getField(a.property);a.transform=e&&e.sortType!==Ext.identityFn?e.sortType:undefined}f[c]=new Ext.util.Sorter(a)}}return f},getFirstSorter:function(){var c=this.getSorters().items,a=c.length,b=0,d;for(;b<a;++b){d=c[b];if(!d.isGrouper){return d}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){var a=this;a.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(a){this.sortBy(a)},_sort:function(l,b,k){var j=this,e,f,d=String(b).toUpperCase()=="DESC"?-1:1,h=[],m=j.keys,g=j.items,a;k=k||function(n,c){return n-c};for(e=0,f=g.length;e<f;e++){h[h.length]={key:m[e],value:g[e],index:e}}Ext.Array.sort(h,function(n,c){return k(n[l],c[l])*d||(n.index<c.index?-1:1)});for(e=0,f=h.length;e<f;e++){a=h[e];g[e]=a.value;m[e]=a.key;j.indexMap[a.key]=e}j.generation++;j.indexGeneration=j.generation;j.fireEvent("sort",j)},sortBy:function(b){var h=this,a=h.items,g,f=h.keys,d,e=a.length,c;for(c=0;c<e;c++){a[c].$extCollectionIndex=c}Ext.Array.sort(a,function(k,j){return b(k,j)||(k.$extCollectionIndex<j.$extCollectionIndex?-1:1)});for(c=0;c<e;c++){g=a[c];d=h.getKey(g);f[c]=d;h.indexMap[d]=c;delete a.$extCollectionIndex}h.generation++;h.indexGeneration=h.generation;h.fireEvent("sort",h,a,f)},findInsertionIndex:function(e,d){var f=this,b=f.items,h=0,a=b.length-1,c,g;if(!d){d=f.generateComparator()}while(h<=a){c=(h+a)>>1;g=d(e,b[c]);if(g>=0){h=c+1}else{if(g<0){a=c-1}}}return h},reorder:function(d){var g=this,b=g.items,c=0,f=b.length,a=[],e=[],h;g.suspendEvents();for(h in d){a[d[h]]=b[h]}for(c=0;c<f;c++){if(d[c]==undefined){e.push(b[c])}}for(c=0;c<f;c++){if(a[c]==undefined){a[c]=e.shift()}}g.clear();g.addAll(a);g.resumeEvents();g.fireEvent("sort",g)},sortByKey:function(a,b){this._sort("key",a,b||function(d,c){var f=String(d).toUpperCase(),e=String(c).toUpperCase();return f>e?1:(f<e?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(a){var b=this;if(typeof a=="number"){b.interval=a}else{if(a){Ext.apply(b,a)}}b.tasks=[];b.timerFn=Ext.Function.bind(b.onTick,b)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(a){var c=this,b=Ext.Date.now();if(!a.pending){c.tasks.push(a);a.pending=true}a.stopped=false;a.taskStartTime=b;a.taskRunTime=a.fireOnStart!==false?0:a.taskStartTime;a.taskRunCount=0;if(!c.firing){if(a.fireOnStart!==false){c.startTimer(0,b)}else{c.startTimer(a.interval,b)}}return a},stop:function(a){if(!a.stopped){a.stopped=true;if(a.onStop){a.onStop.call(a.scope||a,a)}}return a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var m=this,f=m.tasks,a=Ext.Date.now(),n=1e+99,k=f.length,d=Ext.GlobalEvents,c,o,h,b,e,g,p;m.timerId=null;m.firing=true;for(h=0;h<k||h<(k=f.length);++h){b=f[h];if(!(g=b.stopped)){c=b.taskRunTime+b.interval;if(c<=a){e=1;if(b.hasOwnProperty("fireIdleEvent")){p=b.fireIdleEvent}else{p=m.fireIdleEvent}try{e=b.run.apply(b.scope||b,b.args||[++b.taskRunCount])}catch(j){try{if(b.onError){e=b.onError.call(b.scope||b,b,j)}}catch(l){}}b.taskRunTime=a;if(e===false||b.taskRunCount===b.repeat){m.stop(b);g=true}else{g=b.stopped;c=a+b.interval}}if(!g&&b.duration&&b.duration<=(a-b.taskStartTime)){m.stop(b);g=true}}if(g){b.pending=false;if(!o){o=f.slice(0,h)}}else{if(o){o.push(b)}if(n>c){n=c}}}if(o){m.tasks=o}m.firing=false;if(m.tasks.length){m.startTimer(n-a,Ext.Date.now())}if(p!==false&&d.hasListeners.idle){d.fireEvent("idle")}},startTimer:function(e,c){var d=this,b=c+e,a=d.timerId;if(a&&d.nextExpires-b>d.interval){clearTimeout(a);a=null}if(!a){if(e<d.interval){e=d.interval}d.timerId=Ext.defer(d.timerFn,e);d.nextExpires=b}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(c){Ext.apply(this,c)},restart:function(c){if(c!==undefined){this.interval=c}this.manager.start(this)},start:function(c){if(this.stopped){this.restart(c)}},stop:function(){this.manager.stop(this)}});a=b.Task.prototype;a.destroy=a.stop}));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(b,a,c){if(c==undefined){if(a==="x"){c=b.getX()}else{if(a==="y"){c=b.getY()}else{if(a==="scrollTop"){c=b.getScroll().top}else{if(a==="scrollLeft"){c=b.getScroll().left}else{if(a==="height"){c=b.getHeight()}else{if(a==="width"){c=b.getWidth()}else{c=b.getStyle(a)}}}}}}}return c},getAttr:function(a,c){var b=this.target;return[[b,this.getElVal(b,a,c)]]},setAttr:function(h){var e=this.target,g=h.length,k,f,b,d,c,a;for(d=0;d<g;d++){k=h[d].attrs;for(f in k){if(k.hasOwnProperty(f)){a=k[f].length;for(c=0;c<a;c++){b=k[f][c];this.setElVal(b[0],f,b[1])}}}}},setElVal:function(b,a,c){if(a==="x"){b.setX(c)}else{if(a==="y"){b.setY(c)}else{if(a==="scrollTop"){b.scrollTo("top",c)}else{if(a==="scrollLeft"){b.scrollTo("left",c)}else{if(a==="width"){b.setWidth(c)}else{if(a==="height"){b.setHeight(c)}else{b.setStyle(a,c)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(m,e){var p={attrs:[],duration:[],easing:[]},l=m.length,f,n,h,k,c,b,g,d,a;for(g=0;g<l;g++){n=m[g];c=n.duration;k=n.easing;n=n.attrs;for(h in n){if(Ext.Array.indexOf(p.attrs,h)==-1){p.attrs.push(h.replace(/[A-Z]/g,function(j){return"-"+j.toLowerCase()}));p.duration.push(c+"ms");p.easing.push(k)}}}f=p.attrs.join(",");c=p.duration.join(",");k=p.easing.join(", ");for(g=0;g<l;g++){n=m[g].attrs;for(h in n){a=n[h].length;for(d=0;d<a;d++){b=n[h][d];b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",e?"":f);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",e?"":c);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",e?"":k);b[0].setStyle(h,b[1]);if(e){b=b[0].dom.offsetWidth}else{b[0].on(Ext.supports.CSS3TransitionEnd,function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},b[0],{single:true})}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-");Ext.fx.target.Element.prototype.constructor.call(this,a)},getAttr:function(a,h){var b=[],g=this.target,f=g.elements,e=f.length,c,d;for(c=0;c<e;c++){d=f[c];if(d){d=g.getElement(d);b.push([d,this.getElVal(d,a,h)])}}return b},setAttr:function(m){var h=this.target,l=m.length,b=h.elements,q=b.length,n,d,p,g,c,f,e,a;for(f=0;f<l;f++){p=m[f].attrs;for(g in p){if(p.hasOwnProperty(g)){a=p[g].length;for(e=0;e<a;e++){n=p[g][e][1];for(d=0;d<q;++d){el=b[d];if(el){el=h.getElement(el);this.setElVal(el,g,n)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(b,a){var c;switch(a){case"rotate":case"rotation":c=b.attr.rotation;return{x:c.x||0,y:c.y||0,degrees:c.degrees||0};case"scale":case"scaling":c=b.attr.scaling;return{x:c.x||1,y:c.y||1,cx:c.cx||0,cy:c.cy||0};case"translate":case"translation":c=b.attr.translation;return{x:c.x||0,y:c.y||0};default:return b.attr[a]}},getAttr:function(a,b){return[[this.target,b!=undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(l){var f=l.length,h=[],b,e,o,q,p,n,m,d,c,k,g,a;for(d=0;d<f;d++){b=l[d].attrs;for(e in b){o=b[e];a=o.length;for(c=0;c<a;c++){p=o[c][0];q=o[c][1];if(e==="translate"||e==="translation"){m={x:q.x,y:q.y}}else{if(e==="rotate"||e==="rotation"){k=q.x;if(isNaN(k)){k=null}g=q.y;if(isNaN(g)){g=null}m={degrees:q.degrees,x:k,y:g}}else{if(e==="scale"||e==="scaling"){k=q.x;if(isNaN(k)){k=null}g=q.y;if(isNaN(g)){g=null}m={x:k,y:g,cx:q.cx,cy:q.cy}}else{if(e==="width"||e==="height"||e==="x"||e==="y"){m=parseFloat(q)}else{m=q}}}}n=Ext.Array.indexOf(h,p);if(n==-1){h.push([p,{}]);n=h.length-1}h[n][1][e]=m}}}f=h.length;for(d=0;d<f;d++){h[d][0].setAttributes(h[d][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(a,g){var b=[],f=[].concat(this.target.items),e=f.length,d,c;for(d=0;d<e;d++){c=f[d];b.push([c,g!=undefined?g:this.getFromPrim(c,a)])}return b}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(r,f,b){var p=this,n=r.length,u,m,c,g,e,l,d,q,t,k,a={},s;for(g=0;g<n;g++){u=r[g].attrs;for(m in u){l=u[m].length;for(e=0;e<l;e++){c=u[m][e];s=a[p.setMethods[m]]||(a[p.setMethods[m]]={});s.target=c[0];s[m]=c[1]}}if(a.setPosition){c=a.setPosition;d=(c.left===undefined)?undefined:parseFloat(c.left);q=(c.top===undefined)?undefined:parseFloat(c.top);c.target.setPosition(d,q)}if(a.setPagePosition){c=a.setPagePosition;c.target.setPagePosition(c.x,c.y)}if(a.setSize){c=a.setSize;t=(c.width===undefined)?c.target.getWidth():parseFloat(c.width);k=(c.height===undefined)?c.target.getHeight():parseFloat(c.height);c.target.el.setSize(t,k);if(b||p.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(c.target.setSize,c.target,[t,k]),single:true})}}if(a.setOpacity){c=a.setOpacity;c.target.el.setStyle("opacity",c.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(a,c){var b=this.targets.get(a);if(b){b.fxDefaults=Ext.apply(b.fxDefaults||{},c)}},stopAnimation:function(b){var d=this,a=d.getFxQueue(b),c=a.length;while(c){a[c-1].end();c--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(b){if(!b){return false}var c=this,a=c.fxQueue[b],d=c.targets.get(b);if(!d){return false}if(!a){c.fxQueue[b]=[];if(d.type!="element"){d.target.on("destroy",function(){c.fxQueue[b]=[]})}}return c.fxQueue[b]},queueFx:function(d){var c=this,e=d.target,a,b;if(!e){return}a=c.getFxQueue(e.getId());b=a.length;if(b){if(d.concurrent){d.paused=false}else{a[b-1].on("afteranimate",function(){d.paused=false})}}else{d.paused=false}d.on("afteranimate",function(){Ext.Array.remove(a,d);if(a.length===0){c.targets.remove(d.target)}if(d.remove){if(e.type=="element"){var f=Ext.get(e.id);if(f){f.destroy()}}}},c,{single:true});a.push(d)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var a=this;a.items=new Ext.util.MixedCollection();a.targetArr={};a.mixins.queue.constructor.call(a);a.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(d){var b=this,c=!b.forceJS&&Ext.supports.Transitions,a;b.useCSS3=c;if(d){if(d.tagName||Ext.isString(d)||d.isFly){d=Ext.get(d);a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.dom){a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.isComposite){a=new Ext.fx.target["CompositeElement"+(c?"CSS":"")](d)}else{if(d.isSprite){a=new Ext.fx.target.Sprite(d)}else{if(d.isCompositeSprite){a=new Ext.fx.target.CompositeSprite(d)}else{if(d.isComponent){a=new Ext.fx.target.Component(d)}else{if(d.isAnimTarget){return d}else{return null}}}}}}}b.targets.add(a);return a}else{return null}},addAnim:function(d){var c=this,b=c.items,a=c.task;b.add(d.id,d);if(!a&&b.length){a=c.task={run:c.runner,interval:c.interval,scope:c};c.taskRunner.start(a)}},removeAnim:function(d){var c=this,b=c.items,a=c.task;b.removeAtKey(d.id);if(a&&!b.length){c.taskRunner.stop(a);delete c.task}},runner:function(){var d=this,b=d.items.getRange(),c=0,a=b.length,e;d.targetArr={};d.timestamp=new Date();for(;c<a;c++){e=b[c];if(e.isReady()){d.startAnim(e)}}for(c=0;c<a;c++){e=b[c];if(e.isRunning()){d.runAnim(e)}}d.applyPendingAttrs()},startAnim:function(a){a.start(this.timestamp)},runAnim:function(e,a){if(!e){return}var d=this,g=d.useCSS3&&e.target.type=="element",b=d.timestamp-e.startTime,c=(b>=e.duration),f,h;if(a){b=e.duration;c=true}f=this.collectTargetData(e,b,g,c);if(g){e.target.setAttr(f.anims[e.id].attributes,true);d.collectTargetData(e,e.duration,g,c);e.paused=true;f=e.target.target;if(e.target.isComposite){f=e.target.target.last()}h={};h[Ext.supports.CSS3TransitionEnd]=e.lastFrame;h.scope=e;h.single=true;f.on(h)}return f},jumpToEnd:function(a){var b=this.runAnim(a,true);this.applyAnimAttrs(b,b.anims[a.id])},collectTargetData:function(c,a,e,f){var b=c.target.getId(),d=this.targetArr[b];if(!d){d=this.targetArr[b]={id:b,el:c.target,anims:{}}}d.anims[c.id]={id:c.id,anim:c,elapsed:a,isLastFrame:f,attributes:[{duration:c.duration,easing:(e&&c.reverse)?c.easingFn.reverse().toCSS3():c.easing,attrs:c.runAnim(a)}]};return d},applyAnimAttrs:function(c,a){var b=a.anim;if(a.attributes&&b.isRunning()){c.el.setAttr(a.attributes,false,a.isLastFrame);if(a.isLastFrame){b.lastFrame()}}},applyPendingAttrs:function(){var e=this.targetArr,f,c,b,d,a;for(c in e){if(e.hasOwnProperty(c)){f=e[c];for(a in f.anims){if(f.anims.hasOwnProperty(a)){b=f.anims[a];d=b.anim;if(b.attributes&&d.isRunning()){f.el.setAttr(b.attributes,false,b.isLastFrame);if(b.isLastFrame){d.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.mixins.observable.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(d,c){return d.pct-c.pct},createTimeline:function(d){var g=this,k=[],h=g.to||{},b=g.duration,l,a,c,f,j,e;for(j in d){if(d.hasOwnProperty(j)&&g.animKeyFramesRE.test(j)){e={attrs:Ext.apply(d[j],h)};if(j=="from"){j=0}else{if(j=="to"){j=100}}e.pct=parseInt(j,10);k.push(e)}}Ext.Array.sort(k,g.sorter);f=k.length;for(c=0;c<f;c++){l=(k[c-1])?b*(k[c-1].pct/100):0;a=b*(k[c].pct/100);g.timeline.push({duration:a-l,attrs:k[c].attrs})}},applyAnimator:function(d){var g=this,h=[],k=g.timeline,f=k.length,b,e,a,j,c;if(g.fireEvent("beforeanimate",g)!==false){for(c=0;c<f;c++){b=k[c];j=b.attrs;e=j.easing||g.easing;a=j.damper||g.damper;delete j.easing;delete j.damper;b=new Ext.fx.Anim({target:d,easing:e,damper:a,duration:b.duration,paused:true,to:j});h.push(b)}g.animations=h;g.target=b.target;for(c=0;c<f-1;c++){b=h[c];b.nextAnim=h[c+1];b.on("afteranimate",function(){this.nextAnim.paused=false});b.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},g)}h[f-1].on("afteranimate",function(){this.lastFrame()},g)}},start:function(d){var e=this,c=e.delay,b=e.delayStart,a;if(c){if(!b){e.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(e.fireEvent("beforeanimate",e)!==false){e.startTime=d;e.running=true;e.animations[e.keyframeStep].paused=false}},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){c.startTime=new Date();c.currentIteration=b;c.keyframeStep=0;c.applyAnimator(c.target);c.animations[c.keyframeStep].paused=false}else{c.currentIteration=0;c.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(o,d,b,n,m,h){var j=3*d,l=3*(n-d)-j,a=1-j-l,g=3*b,k=3*(m-b)-g,p=1-g-k;function f(q){return((a*q+l)*q+j)*q}function c(q,s){var r=e(q,s);return((p*r+k)*r+g)*r}function e(q,y){var w,v,t,r,u,s;for(t=q,s=0;s<8;s++){r=f(t)-q;if(Math.abs(r)<y){return t}u=(3*a*t+2*l)*t+j;if(Math.abs(u)<0.000001){break}t=t-r/u}w=0;v=1;t=q;if(t<w){return w}if(t>v){return v}while(w<v){r=f(t);if(Math.abs(r-q)<y){return t}if(q>r){w=t}else{v=t}t=(v-w)/2+w}return t}return c(o,1/(200*h))},cubicBezier:function(b,e,a,c){var d=function(f){return Ext.fx.CubicBezier.cubicBezierAtTime(f,b,e,a,c,1)};d.toCSS3=function(){return"cubic-bezier("+[b,e,a,c].join(",")+")"};d.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-a,1-c,1-b,1-e)};return d}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));Ext.require("Ext.fx.CubicBezier",function(){var e=Math,g=e.PI,d=e.pow,b=e.sin,f=e.sqrt,a=e.abs,c=1.70158;(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,{singleton:true,linear:Ext.identityFn,ease:function(l){var h=0.07813-l/2,m=-0.25,o=f(0.0066+h*h),r=o-h,k=d(a(r),1/3)*(r<0?-1:1),p=-o-h,j=d(a(p),1/3)*(p<0?-1:1),s=k+j+0.25;return d(1-s,2)*3*s*0.1+(1-s)*3*s*s+s*s*s},easeIn:function(h){return d(h,1.7)},easeOut:function(h){return d(h,0.48)},easeInOut:function(r){var l=0.48-r/1.04,k=f(0.1734+l*l),h=k-l,p=d(a(h),1/3)*(h<0?-1:1),o=-k-l,m=d(a(o),1/3)*(o<0?-1:1),j=p+m+0.5;return(1-j)*3*j*j+j*j*j},backIn:function(h){return h*h*((c+1)*h-c)},backOut:function(h){h=h-1;return h*h*((c+1)*h+c)+1},elasticIn:function(k){if(k===0||k===1){return k}var j=0.3,h=j/4;return d(2,-10*k)*b((k-h)*(2*g)/j)+1},elasticOut:function(h){return 1-Ext.fx.Easing.elasticIn(1-h)},bounceIn:function(h){return 1-Ext.fx.Easing.bounceOut(1-h)},bounceOut:function(m){var j=7.5625,k=2.75,h;if(m<(1/k)){h=j*m*m}else{if(m<(2/k)){m-=(1.5/k);h=j*m*m+0.75}else{if(m<(2.5/k)){m-=(2.25/k);h=j*m*m+0.9375}else{m-=(2.625/k);h=j*m*m+0.984375}}}return h}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(){var j=Ext.fx.Easing.self,h=j.prototype;j.addMembers({"back-in":h.backIn,"back-out":h.backOut,"ease-in":h.easeIn,"ease-out":h.easeOut,"elastic-in":h.elasticIn,"elastic-out":h.elasticOut,"bounce-in":h.bounceIn,"bounce-out":h.bounceOut,"ease-in-out":h.easeInOut})}))});(Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){c=b.pathClone(a)}if(!c.length){String(a).replace(b.pathCommandRE,function(f,e,j){var h=[],g=e.toLowerCase();j.replace(b.pathValuesRE,function(l,k){k&&h.push(+k)});if(g=="m"&&h.length>2){c.push([e].concat(Ext.Array.splice(h,0,2)));g="l";e=(e=="m")?"l":"L"}while(h.length>=d[g]){c.push([e].concat(Ext.Array.splice(h,0,d[g])));if(!d[g]){break}}})}c.toString=b.path2string;return c},pathClone:function(f){var c=[],a,e,b,d;if(!this.is(f,"array")||!this.is(f&&f[0],"array")){f=this.parsePathString(f)}for(b=0,d=f.length;b<d;b++){c[b]=[];for(a=0,e=f[b].length;a<e;a++){c[b][a]=f[b][a]}}c.toString=this.path2string;return c},pathToAbsolute:function(c){if(!this.is(c,"array")||!this.is(c&&c[0],"array")){c=this.parsePathString(c)}var h=[],l=0,k=0,n=0,m=0,f=0,g=c.length,b,d,e,a;if(g&&c[0][0]=="M"){l=+c[0][1];k=+c[0][2];n=l;m=k;f++;h[0]=["M",l,k]}for(;f<g;f++){b=h[f]=[];d=c[f];if(d[0]!=d[0].toUpperCase()){b[0]=d[0].toUpperCase();switch(b[0]){case"A":b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=+(d[6]+l);b[7]=+(d[7]+k);break;case"V":b[1]=+d[1]+k;break;case"H":b[1]=+d[1]+l;break;case"M":n=+d[1]+l;m=+d[2]+k;default:e=1;a=d.length;for(;e<a;e++){b[e]=+d[e]+((e%2)?l:k)}}}else{e=0;a=d.length;for(;e<a;e++){h[f][e]=d[e]}}switch(b[0]){case"Z":l=n;k=m;break;case"H":l=b[1];break;case"V":k=b[1];break;case"M":d=h[f];a=d.length;n=d[a-2];m=d[a-1];default:d=h[f];a=d.length;l=d[a-2];k=d[a-1]}}h.toString=this.path2string;return h},interpolatePaths:function(q,k){var h=this,d=h.pathToAbsolute(q),l=h.pathToAbsolute(k),m={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(p,r){if(p[r].length>7){p[r].shift();var s=p[r];while(s.length){Ext.Array.splice(p,r++,0,["C"].concat(Ext.Array.splice(s,0,6)))}Ext.Array.erase(p,r,1);n=Math.max(d.length,l.length||0)}},c=function(u,t,r,p,s){if(u&&t&&u[s][0]=="M"&&t[s][0]!="M"){Ext.Array.splice(t,s,0,["M",p.x,p.y]);r.bx=0;r.by=0;r.x=u[s][1];r.y=u[s][2];n=Math.max(d.length,l.length||0)}},g,n,f,o,e,j;for(g=0,n=Math.max(d.length,l.length||0);g<n;g++){d[g]=h.command2curve(d[g],m);b(d,g);(l[g]=h.command2curve(l[g],a));b(l,g);c(d,l,m,a,g);c(l,d,a,m,g);f=d[g];o=l[g];e=f.length;j=o.length;m.x=f[e-2];m.y=f[e-1];m.bx=parseFloat(f[e-4])||m.x;m.by=parseFloat(f[e-3])||m.y;a.bx=(parseFloat(o[j-4])||a.x);a.by=(parseFloat(o[j-3])||a.y);a.x=o[j-2];a.y=o[j-1]}return[d,l]},command2curve:function(c,b){var a=this;if(!c){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(c[0]!="T"&&c[0]!="Q"){b.qx=b.qy=null}switch(c[0]){case"M":b.X=c[1];b.Y=c[2];break;case"A":c=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(c.slice(1))));break;case"S":c=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(c.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));c=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,c[1],c[2]));break;case"Q":b.qx=c[1];b.qy=c[2];c=["C"].concat(a.quadratic2curve(b.x,b.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"].concat(b.x,b.y,c[1],c[2],c[1],c[2]);break;case"H":c=["C"].concat(b.x,b.y,c[1],b.y,c[1],b.y);break;case"V":c=["C"].concat(b.x,b.y,b.x,c[1],b.x,c[1]);break;case"Z":c=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return c},quadratic2curve:function(b,d,g,e,a,c){var f=1/3,h=2/3;return[f*b+h*g,f*d+h*e,f*a+h*g,f*c+h*e,a,c]},rotate:function(b,g,a){var d=Math.cos(a),c=Math.sin(a),f=b*d-g*c,e=b*c+g*d;return{x:f,y:e}},arc2curve:function(r,ae,G,E,w,m,f,q,ad,z){var u=this,d=Math.PI,v=u.radian,D=d*120/180,b=v*(+w||0),L=[],I=Math,S=I.cos,a=I.sin,U=I.sqrt,s=I.abs,n=I.asin,H,N,M,Z,c,Q,T,B,A,l,j,p,g,ac,e,ab,O,R,P,aa,Y,X,V,K,W,J,C,F,o;if(!z){H=u.rotate(r,ae,-b);r=H.x;ae=H.y;H=u.rotate(q,ad,-b);q=H.x;ad=H.y;N=(r-q)/2;M=(ae-ad)/2;Z=(N*N)/(G*G)+(M*M)/(E*E);if(Z>1){Z=U(Z);G=Z*G;E=Z*E}c=G*G;Q=E*E;T=(m==f?-1:1)*U(s((c*Q-c*M*M-Q*N*N)/(c*M*M+Q*N*N)));B=T*G*M/E+(r+q)/2;A=T*-E*N/G+(ae+ad)/2;l=n(((ae-A)/E).toFixed(7));j=n(((ad-A)/E).toFixed(7));l=r<B?d-l:l;j=q<B?d-j:j;if(l<0){l=d*2+l}if(j<0){j=d*2+j}if(f&&l>j){l=l-d*2}if(!f&&j>l){j=j-d*2}}else{l=z[0];j=z[1];B=z[2];A=z[3]}p=j-l;if(s(p)>D){C=j;F=q;o=ad;j=l+D*(f&&j>l?1:-1);q=B+G*S(j);ad=A+E*a(j);L=u.arc2curve(q,ad,G,E,w,0,f,F,o,[j,C,B,A])}p=j-l;g=S(l);ac=a(l);e=S(j);ab=a(j);O=I.tan(p/4);R=4/3*G*O;P=4/3*E*O;aa=[r,ae];Y=[r+R*ac,ae-P*g];X=[q+R*ab,ad-P*e];V=[q,ad];Y[0]=2*aa[0]-Y[0];Y[1]=2*aa[1]-Y[1];if(z){return[Y,X,V].concat(L)}else{L=[Y,X,V].concat(L).join().split(",");K=[];J=L.length;for(W=0;W<J;W++){K[W]=W%2?u.rotate(L[W-1],L[W],b).y:u.rotate(L[W],L[W+1],b).x}return K}}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(j,c,a,f,h){a=(typeof a=="number")?a:1;var g=this.unitRE,d=g.exec(j),b,e;if(d){j=d[1];e=d[2];if(!this.scrollRE.test(h)&&!e&&this.pixelDefaultsRE.test(h)){e="px"}}j=+j||0;d=g.exec(c);if(d){c=d[1];e=d[2]||e}c=+c||0;b=(f!=null)?f:j;return{from:j,delta:(c-b)*a,units:e}},get:function(n,b,a,m,h){var l=n.length,d=[],e,g,k,c,f;for(e=0;e<l;e++){if(m){g=m[e][1].from}if(Ext.isArray(n[e][1])&&Ext.isArray(b)){k=[];c=0;f=n[e][1].length;for(;c<f;c++){k.push(this.computeDelta(n[e][1][c],b[c],a,g,h))}d.push([n[e][0],k])}else{d.push([n[e][0],this.computeDelta(n[e][1],b,a,g,h)])}}return d},set:function(k,f){var g=k.length,c=[],d,a,h,e,b;for(d=0;d<g;d++){a=k[d][1];if(Ext.isArray(a)){h=[];b=0;e=a.length;for(;b<e;b++){h.push(a[b].from+a[b].delta*f+(a[b].units||0))}c.push([k[d][0],h])}else{c.push([k[d][0],a.from+a.delta*f+(a.units||0)])}}return c}},stringHandler:{computeDelta:function(e,b,d,c,a){return{from:e,delta:b}},get:function(n,b,a,m,h){var l=n.length,d=[],e,g,k,c,f;for(e=0;e<l;e++){d.push([n[e][0],this.computeDelta(n[e][1],b,a,g,h)])}return d},set:function(k,f){var g=k.length,c=[],d,a,h,e,b;for(d=0;d<g;d++){a=k[d][1];c.push([k[d][0],a.delta])}return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(e,a){a=(typeof a=="number")?a:1;var f=false,c=[this.hexRE,this.rgbRE,this.hex3RE],d=c.length,h,b,j,g;for(g=0;g<d;g++){j=c[g];b=(g%2===0)?16:10;h=j.exec(e);if(h&&h.length===4){if(g===2){h[1]+=h[1];h[2]+=h[2];h[3]+=h[3]}f={red:parseInt(h[1],b),green:parseInt(h[2],b),blue:parseInt(h[3],b)};break}}return f||e},computeDelta:function(g,a,e,c){g=this.parseColor(g);a=this.parseColor(a,e);var f=c?c:g,b=typeof f,d=typeof a;if(b=="string"||b=="undefined"||d=="string"||d=="undefined"){return a||f}return{from:g,delta:{red:Math.round((a.red-f.red)*e),green:Math.round((a.green-f.green)*e),blue:Math.round((a.blue-f.blue)*e)}}},get:function(h,a,f,d){var g=h.length,c=[],e,b;for(e=0;e<g;e++){if(d){b=d[e][1].from}c.push([h[e][0],this.computeDelta(h[e][1],a,f,b)])}return c},set:function(j,e){var f=j.length,c=[],d,b,a,g,h;for(d=0;d<f;d++){b=j[d][1];if(b){g=b.from;h=b.delta;b=(typeof b=="object"&&"red" in b)?"rgb("+b.red+", "+b.green+", "+b.blue+")":b;b=(typeof b=="object"&&b.length)?b[0]:b;if(typeof b=="undefined"){return[]}a=typeof b=="string"?b:"rgb("+[(g.red+Math.round(h.red*e))%256,(g.green+Math.round(h.green*e))%256,(g.blue+Math.round(h.blue*e))%256].join(",")+")";c.push([j[d][0],a])}}return c}},object:{interpolate:function(d,b){b=(typeof b=="number")?b:1;var a={},c;for(c in d){a[c]=parseFloat(d[c])*b}return a},computeDelta:function(g,a,c,b){g=this.interpolate(g);a=this.interpolate(a,c);var f=b?b:g,e={},d;for(d in a){e[d]=a[d]-f[d]}return{from:g,delta:e}},get:function(h,a,f,d){var g=h.length,c=[],e,b;for(e=0;e<g;e++){if(d){b=d[e][1].from}c.push([h[e][0],this.computeDelta(h[e][1],a,f,b)])}return c},set:function(k,f){var g=k.length,c=[],e={},d,h,j,b,a;for(d=0;d<g;d++){b=k[d][1];h=b.from;j=b.delta;for(a in h){e[a]=h[a]+j[a]*f}c.push([k[d][0],e])}return c}},path:{computeDelta:function(e,a,c,b){c=(typeof c=="number")?c:1;var d;e=+e||0;a=+a||0;d=(b!=null)?b:e;return{from:e,delta:(a-d)*c}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.fx.DrawPath.parsePathString(a)}return a},get:function(b,h,a,p){var c=this.forcePath(h),m=[],r=b.length,d,g,n,f,o,l,e,s,q;for(n=0;n<r;n++){q=this.forcePath(b[n][1]);f=Ext.fx.DrawPath.interpolatePaths(q,c);q=f[0];c=f[1];d=q.length;s=[];for(l=0;l<d;l++){f=[q[l][0]];g=q[l].length;for(e=1;e<g;e++){o=p&&p[0][1][l][e].from;f.push(this.computeDelta(q[l][e],c[l][e],a,o))}s.push(f)}m.push([b[n][0],s])}return m},set:function(o,m){var n=o.length,e=[],g,f,d,h,l,c,a,b;for(g=0;g<n;g++){c=o[g][1];h=[];a=c.length;for(f=0;f<a;f++){l=[c[f][0]];b=c[f].length;for(d=1;d<b;d++){l.push(c[f][d].from+c[f][d].delta*m)}h.push(l.join(","))}e.push([o[g][0],h.join(",")])}return e}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var b=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],c=b.length,a=0,d;for(;a<c;a++){d=b[a];this[d]=this.color}b=["cursor"];c=b.length;a=0;for(;a<c;a++){d=b[a];this[d]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(a){var b=this,c;a=a||{};if(a.keyframes){return new Ext.fx.Animator(a)}Ext.apply(b,a);if(b.from===undefined){b.from={}}b.propHandlers={};b.config=a;b.target=Ext.fx.Manager.createTarget(b.target);b.easingFn=Ext.fx.Easing[b.easing];b.target.dynamic=b.dynamic;if(!b.easingFn){b.easingFn=String(b.easing).match(b.bezierRE);if(b.easingFn&&b.easingFn.length==5){c=b.easingFn;b.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}b.id=Ext.id(null,"ext-anim-");b.mixins.observable.constructor.call(b);Ext.fx.Manager.addAnim(b);if(a.autoEnd){b.running=true;b.jumpToEnd()}},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var e=this,g=e.from,h=e.to,f=e.initialFrom||{},c={},a,b,j,d;for(d in h){if(h.hasOwnProperty(d)){a=e.target.getAttr(d,g[d]);b=h[d];if(!Ext.fx.PropertyHandler[d]){if(Ext.isObject(b)){j=e.propHandlers[d]=Ext.fx.PropertyHandler.object}else{j=e.propHandlers[d]=Ext.fx.PropertyHandler.defaultHandler}}else{j=e.propHandlers[d]=Ext.fx.PropertyHandler[d]}c[d]=j.get(a,b,e.damper,f[d],d)}}e.currentAttrs=c},start:function(d){var e=this,c=e.delay,b=e.delayStart,a;if(c){if(!b){e.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(e.fireEvent("beforeanimate",e)!==false){e.startTime=d;if(!e.paused&&!e.currentAttrs){e.initAttrs()}e.running=true;e.frameCount=0}},jumpToEnd:function(){var a=this;if(!a.endWasCalled){if(!a.currentAttrs){a.initAttrs()}Ext.fx.Manager.jumpToEnd(a);a.end()}},runAnim:function(l){var h=this,k=h.currentAttrs,d=h.duration,c=h.easingFn,b=h.propHandlers,f={},g,j,e,a;if(l>=d){l=d;a=true}if(h.reverse){l=d-l}for(e in k){if(k.hasOwnProperty(e)){j=k[e];g=a?1:c(l/d);f[e]=b[e].set(j,g)}}h.frameCount++;return f},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){if(c.alternate){c.reverse=!c.reverse}c.startTime=new Date();c.currentIteration=b;c.paused=false}else{c.currentIteration=0;c.end();c.fireEvent("lastframe",c,c.startTime)}},endWasCalled:0,end:function(){var a=this;if(a.endWasCalled++){return}a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime);Ext.callback(a.callback,a.scope,[a,a.startTime]);if(a.remove){a.target.destroy()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:true,animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(new Ext.fx.Anim(b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},getAnimationProps:function(){var b=this,a=b.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0));(Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:true,interval:30000,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a);a.resume()},collect:function(){var e=this,b=Ext.cache,a,f,d,c;if(!Ext.enableGarbageCollector){e.pause()}else{for(a in b){if(!b.hasOwnProperty(a)){continue}d=b[a];if(d.skipGarbageCollection){continue}f=d.dom;if(Ext.isGarbage(f)){d.clearListeners();delete b[a]}}if(Ext.isIE9m){c={};for(a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}b=Ext.cache=c}e.lastTime=Ext.now()}},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;if(b&&(Ext.now()-b>a.interval)){a.collect()}a.timerId=Ext.interval(a.collect,a.interval)}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0));(Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:true,constructor:function(a){this.dom=a;this.el=this},attach:function(b){var a=this;if(!b){return a.detach()}a.dom=b;if(!Ext.cache[b.id]){a.getData().isSynchronized=false}return a},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(a){var b={};a.cache=b;Ext.fly=function(g,d){var f=null,e=Ext.fly,c;d=d||(e.caller&&e.caller.$name)||"_global";g=Ext.getDom(g);if(g){c=g.nodeType;if(a.prototype.validNodeTypes[c]||(!c&&(g.window===g))){f=Ext.cache[g.id];if(!f||f.dom!==g){f=b[d]||(b[d]=new a());f.dom=g;f.isSynchronized=false}}}return f}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:true,isLite:true,statics:{importElementMethods:function(){var a=Ext.dom.Element,b=this.prototype;Ext.Object.each(a.prototype,function(c,d){if(typeof d==="function"&&!b[c]){b[c]=function(){return this.invoke(c,arguments)}}})}},constructor:function(b,a){if(a){this.elements=b||[]}else{this.elements=[];this.add(b)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(c,a){var e=this.elements,b,d;if(!c){return this}if(typeof c=="string"){c=Ext.fly(a||document).query(c)}else{if(c.isComposite){c=c.elements}else{if(!Ext.isIterable(c)){c=[c]}}}for(b=0,d=c.length;b<d;++b){e.push(this.transformElement(c[b]))}return this},invoke:function(e,b){var g=this,h=g.elements,f=h.length,a,d,c;if(c!==0){a=(g.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(c=0;c<f;c++){d=h[c];if(d){a[e].apply(g.getElement(d),b)}}}return g},item:function(b){var c=this.elements[b],a=null;if(c){a=this.getElement(c)}return a},slice:function(){return this.elements.slice.apply(this.elements,arguments)},each:function(f,d){var g=this,c=g.elements,a=c.length,b,h;for(b=0;b<a;b++){h=c[b];if(h){h=this.getElement(h);if(f.call(d||h,h,g,b)===false){break}}}return g},fill:function(a){var b=this;b.elements=[];b.add(a);return b},insert:function(b,a){Ext.Array.insert(this.elements,b,a)},filter:function(b){var g=this,c=g.elements,f=c.length,d=[],e=0,h=typeof b=="function",j,a;for(;e<f;e++){a=c[e];j=false;if(a){a=g.getElement(a);if(h){j=b.call(a,a,g,e)!==false}else{j=a.is(b)}if(j){d.push(g.transformElement(a))}}}g.elements=d;return g},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(e,c,a){var b=!isNaN(e)?e:this.indexOf(e),f;if(b>-1){c=Ext.getDom(c);if(a){f=this.elements[b];f.parentNode.insertBefore(c,f);Ext.removeNode(f)}Ext.Array.splice(this.elements,b,1,c)}return this},clear:function(d){var c=this,b=c.elements,a=b.length-1;if(d){for(;a>=0;a--){Ext.removeNode(b[a])}}this.elements=[]},addElements:function(d,b){if(!d){return this}if(typeof d==="string"){d=Ext.dom.Element.selectorFunction(d,b)}var c=this.elements,a=d.length,f;for(f=0;f<a;f++){c.push(Ext.get(d[f]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(e,h){e=[].concat(e);var d=this,f=d.elements,c=e.length,g,b,a;for(a=0;a<c;a++){g=e[a];if((b=(f[g]||f[g=d.indexOf(g)]))){if(h){if(b.dom){b.destroy()}else{Ext.removeNode(b)}}Ext.Array.erase(f,g,1)}}return d},destroy:function(){return this.invoke("destroy",arguments)}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(b){var a=b.prototype;b.importElementMethods();a.on=a.addListener}));Ext.define("Ext.overrides.dom.Element",(function(){var Element,WIN=window,DOC=document,HIDDEN="hidden",ISCLIPPED="isClipped",OVERFLOW="overflow",OVERFLOWX="overflow-x",OVERFLOWY="overflow-y",ORIGINALCLIP="originalClip",HEIGHT="height",WIDTH="width",VISIBILITY="visibility",DISPLAY="display",NONE="none",HIDDEN="hidden",OFFSETS="offsets",ORIGINALDISPLAY="originalDisplay",VISMODE="visibilityMode",ISVISIBLE="isVisible",OFFSETCLASS="x-hidden-offsets",boxMarkup=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),tabbableSelector="a[href],button,iframe,input,select,textarea,[tabindex]",tabbableRe=/^BUTTON|IFRAME|INPUT|SELECT|TEXTAREA$/,tabbableSavedFlagAttribute="data-tabindexsaved",tabbableSavedAttribute="data-savedtabindex",scriptTagRe=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,replaceScriptTagRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,srcRe=/\ssrc=([\'\"])(.*?)\1/i,focusRe=/^a|button|embed|iframe|input|object|select|textarea$/i,nonSpaceRe=/\S/,typeRe=/\stype=([\'\"])(.*?)\1/i,msRe=/^-ms-/,camelRe=/(-[a-z])/gi,camelReplaceFn=function(m,a){return a.charAt(1).toUpperCase()},XMASKED="x-masked",XMASKEDRELATIVE="x-masked-relative",EXTELMASKMSG="x-mask-msg",mouseEnterLeaveRe=/^(?:mouseenter|mouseleave)$/,bodyRe=/^body/i,scrollFly,propertyCache={},getDisplay=function(el){var data=el.getData(),display=data[ORIGINALDISPLAY];if(display===undefined){data[ORIGINALDISPLAY]=display=""}return display},getVisMode=function(el){var data=el.getData(),visMode=data[VISMODE];if(visMode===undefined){data[VISMODE]=visMode=Element.VISIBILITY}return visMode},garbageBin,emptyRange=DOC.createRange?DOC.createRange():null;return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:false,_init:function(E){Element=E},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",normalize:function(prop){if(prop==="float"){prop=Ext.supports.Float?"cssFloat":"styleFloat"}return propertyCache[prop]||(propertyCache[prop]=prop.replace(msRe,"ms-").replace(camelRe,camelReplaceFn))},getViewportHeight:function(){return Ext.isIE9m?DOC.documentElement.clientHeight:WIN.innerHeight},getViewportWidth:function(){return(!Ext.isStrict&&!Ext.isOpera)?document.body.clientWidth:Ext.isIE9m?DOC.documentElement.clientWidth:WIN.innerWidth}},addClsOnClick:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.on("mousedown",function(){if(hasTest&&testFn.call(scope||me,me)===false){return false}Ext.fly(dom).addCls(className);var d=Ext.getDoc(),fn=function(){Ext.fly(dom).removeCls(className);d.removeListener("mouseup",fn)};d.on("mouseup",fn)});return me},addClsOnFocus:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.on("focus",function(){if(hasTest&&testFn.call(scope||me,me)===false){return false}Ext.fly(dom).addCls(className)});me.on("blur",function(){Ext.fly(dom).removeCls(className)});return me},addClsOnOver:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.hover(function(){if(hasTest&&testFn.call(scope||me,me)===false){return}Ext.fly(dom).addCls(className)},function(){Ext.fly(dom).removeCls(className)});return me},addKeyListener:function(key,fn,scope){var config;if(typeof key!=="object"||Ext.isArray(key)){config={target:this,key:key,fn:fn,scope:scope}}else{config={target:this,key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:scope}}return new Ext.util.KeyMap(config)},addKeyMap:function(config){return new Ext.util.KeyMap(Ext.apply({target:this},config))},anchorAnimX:function(anchor){var xName=(anchor==="l")?"right":"left";this.dom.style[xName]="0px"},anim:function(config){if(!Ext.isObject(config)){return(config)?{}:false}var me=this,duration=config.duration||Ext.fx.Anim.prototype.duration,easing=config.easing||"ease",animConfig;if(config.stopAnimation){me.stopAnimation()}Ext.applyIf(config,Ext.fx.Manager.getFxDefaults(me.id));Ext.fx.Manager.setFxDefaults(me.id,{delay:0});animConfig={target:me.dom,remove:config.remove,alternate:config.alternate||false,duration:duration,easing:easing,callback:config.callback,listeners:config.listeners,iterations:config.iterations||1,scope:config.scope,block:config.block,concurrent:config.concurrent,delay:config.delay||0,paused:true,keyframes:config.keyframes,from:config.from||{},to:Ext.apply({},config)};Ext.apply(animConfig.to,config.to);delete animConfig.to.to;delete animConfig.to.from;delete animConfig.to.remove;delete animConfig.to.alternate;delete animConfig.to.keyframes;delete animConfig.to.iterations;delete animConfig.to.listeners;delete animConfig.to.target;delete animConfig.to.paused;delete animConfig.to.callback;delete animConfig.to.scope;delete animConfig.to.duration;delete animConfig.to.easing;delete animConfig.to.concurrent;delete animConfig.to.block;delete animConfig.to.stopAnimation;delete animConfig.to.delay;return animConfig},animate:function(config){var me=this,animId=me.dom.id||Ext.id(me.dom),listeners,anim,end;if(!Ext.fx.Manager.hasFxBlock(animId)){if(config.listeners){listeners=config.listeners;delete config.listeners}if(config.internalListeners){config.listeners=config.internalListeners;delete config.internalListeners}end=config.autoEnd;delete config.autoEnd;anim=new Ext.fx.Anim(me.anim(config));if(listeners){anim.on(listeners)}Ext.fx.Manager.queueFx(anim);if(end){anim.jumpToEnd()}}return me},boxWrap:function(cls){cls=cls||"x-box";var el=Ext.get(this.insertHtml("beforeBegin","<div class='"+cls+"' role='presentation'>"+Ext.String.format(boxMarkup,cls)+"</div>"));el.selectNode("."+cls+"-mc").appendChild(this.dom);return el},cacheScrollValues:function(){var me=this,scrollValues=[],scrolledDescendants=[],descendants,descendant,i,len;scrollFly=scrollFly||new Ext.dom.Fly();descendants=me.query("*");for(i=0,len=descendants.length;i<len;i++){descendant=descendants[i];if(descendant.scrollTop>0||descendant.scrollLeft!==0){scrolledDescendants.push(descendant);scrollValues.push(scrollFly.attach(descendant).getScroll())}}return function(){var scroll,i,len;for(i=0,len=scrolledDescendants.length;i<len;i++){scroll=scrollValues[i];scrollFly.attach(scrolledDescendants[i]);scrollFly.setScrollLeft(scroll.left);scrollFly.setScrollTop(scroll.top)}}},clean:function(forceReclean){var me=this,dom=me.dom,data=me.getData(),n=dom.firstChild,ni=-1,nx;if(data.isCleaned&&forceReclean!==true){return me}while(n){nx=n.nextSibling;if(n.nodeType===3){if(!(nonSpaceRe.test(n.nodeValue))){dom.removeChild(n)}else{if(nx&&nx.nodeType===3){n.appendData(Ext.String.trim(nx.data));dom.removeChild(nx);nx=n.nextSibling;n.nodeIndex=++ni}}}else{Ext.fly(n,"_clean").clean();n.nodeIndex=++ni}n=nx}data.isCleaned=true;return me},empty:emptyRange?function(){var dom=this.dom;if(dom.firstChild){emptyRange.setStartBefore(dom.firstChild);emptyRange.setEndAfter(dom.lastChild);emptyRange.deleteContents()}}:function(){var dom=this.dom;while(dom.lastChild){dom.removeChild(dom.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(value){value=value||"";return this.setStyle({left:value,right:value,top:value,bottom:value,"z-index":"",position:"static"})},createProxy:function(config,renderTo,matchBox){config=(typeof config==="object")?config:{tag:"div",role:"presentation",cls:config};var me=this,proxy=renderTo?Ext.DomHelper.append(renderTo,config,true):Ext.DomHelper.insertBefore(me.dom,config,true);proxy.setVisibilityMode(Element.DISPLAY);proxy.hide();if(matchBox&&me.setBox&&me.getBox){proxy.setBox(me.getBox())}return proxy},clearOpacity:function(){return this.setOpacity("")},clip:function(){var me=this,data=me.getData(),style;if(!data[ISCLIPPED]){data[ISCLIPPED]=true;style=me.getStyle([OVERFLOW,OVERFLOWX,OVERFLOWY]);data[ORIGINALCLIP]={o:style[OVERFLOW],x:style[OVERFLOWX],y:style[OVERFLOWY]};me.setStyle(OVERFLOW,HIDDEN);me.setStyle(OVERFLOWX,HIDDEN);me.setStyle(OVERFLOWY,HIDDEN)}return me},constrainScrollLeft:function(left){var dom=this.dom;return Math.max(Math.min(left,dom.scrollWidth-dom.clientWidth),0)},constrainScrollTop:function(top){var dom=this.dom;return Math.max(Math.min(top,dom.scrollHeight-dom.clientHeight),0)},destroy:function(){var me=this,dom=me.dom;if(dom&&me.isAnimate){me.stopAnimation()}arguments.callee.$previous.call(this);if(dom&&Ext.isIE8){garbageBin=garbageBin||DOC.createElement("div");garbageBin.appendChild(dom);garbageBin.innerHTML=""}},doScrollIntoView:function(container,hscroll,animate,highlight,getScrollX,scrollTo){scrollFly=scrollFly||new Ext.dom.Fly();var me=this,dom=me.dom,scrollX=scrollFly.attach(container)[getScrollX](),scrollY=container.scrollTop,position=me.getScrollIntoViewXY(container,scrollX,scrollY),newScrollX=position.x,newScrollY=position.y;if(highlight){if(animate){animate=Ext.apply({listeners:{afteranimate:function(){scrollFly.attach(dom).highlight()}}},animate)}else{scrollFly.attach(dom).highlight()}}if(newScrollY!==scrollY){scrollFly.attach(container).scrollTo("top",newScrollY,animate)}if(hscroll!==false&&(newScrollX!==scrollX)){scrollFly.attach(container)[scrollTo]("left",newScrollX,animate)}return me},enableDisplayMode:function(display){var me=this;me.setVisibilityMode(Element.DISPLAY);if(display!==undefined){me.getData()[ORIGINALDISPLAY]=display}return me},fadeIn:function(o){var me=this,dom=me.dom;me.animate(Ext.apply({},o,{opacity:1,internalListeners:{beforeanimate:function(anim){var el=Ext.fly(dom,"_anim");if(el.isStyle("display","none")){el.setDisplayed("")}else{el.show()}}}}));return this},fadeOut:function(o){var me=this,dom=me.dom;o=Ext.apply({opacity:0,internalListeners:{afteranimate:function(anim){if(dom&&anim.to.opacity===0){var el=Ext.fly(dom,"_anim");if(o.useDisplay){el.setDisplayed(false)}else{el.hide()}}}}},o);me.animate(o);return me},fixDisplay:function(){var me=this;if(me.isStyle(DISPLAY,NONE)){me.setStyle(VISIBILITY,HIDDEN);me.setStyle(DISPLAY,getDisplay(me));if(me.isStyle(DISPLAY,NONE)){me.setStyle(DISPLAY,"block")}}},frame:function(color,count,obj){var me=this,dom=me.dom,beforeAnim;color=color||"#C3DAF9";count=count||1;obj=obj||{};beforeAnim=function(){var el=Ext.fly(dom,"_anim"),animScope=this,box,proxy,proxyAnim;el.show();box=el.getBox();proxy=Ext.getBody().createChild({role:"presentation",id:el.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+color}});proxyAnim=new Ext.fx.Anim({target:proxy,duration:obj.duration||1000,iterations:count,from:{top:box.y,left:box.x,borderWidth:0,opacity:1,height:box.height,width:box.width},to:{top:box.y-20,left:box.x-20,borderWidth:10,opacity:0,height:box.height+40,width:box.width+40}});proxyAnim.on("afteranimate",function(){proxy.destroy();animScope.end()})};me.animate({duration:(Math.max(obj.duration,500)*2)||2000,listeners:{beforeanimate:{fn:beforeAnim}},callback:obj.callback,scope:obj.scope});return me},getColor:function(attr,defaultValue,prefix){var v=this.getStyle(attr),color=prefix||prefix===""?prefix:"#",h,len,i=0;if(!v||(/transparent|inherit/.test(v))){return defaultValue}if(/^r/.test(v)){v=v.slice(4,v.length-1).split(",");len=v.length;for(;i<len;i++){h=parseInt(v[i],10);color+=(h<16?"0":"")+h.toString(16)}}else{v=v.replace("#","");color+=v.length===3?v.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):v}return(color.length>5?color.toLowerCase():defaultValue)},getLoader:function(){var me=this,data=me.getData(),loader=data.loader;if(!loader){data.loader=loader=new Ext.ElementLoader({target:me})}return loader},getPositioning:function(autoPx){var styles=this.getStyle(["left","top","position","z-index"]),dom=this.dom;if(autoPx){if(styles.left==="auto"){styles.left=dom.offsetLeft+"px"}if(styles.top==="auto"){styles.top=dom.offsetTop+"px"}}return styles},getScroll:function(){var me=this,dom=me.dom,docElement=DOC.documentElement,left,top,body=document.body;if(dom===DOC||dom===body){left=docElement.scrollLeft||(body?body.scrollLeft:0);top=docElement.scrollTop||(body?body.scrollTop:0)}else{left=dom.scrollLeft;top=dom.scrollTop}return{left:left,top:top}},getScrollIntoViewXY:function(container,scrollX,scrollY){var me=this,dom=me.dom,ct=Ext.getDom(container),offsets=me.getOffsetsTo(ct),width=dom.offsetWidth,height=dom.offsetHeight,left=offsets[0]+scrollX,top=offsets[1]+scrollY,bottom=top+height,right=left+width,ctClientHeight=ct.clientHeight,ctClientWidth=ct.clientWidth,ctBottom=scrollY+ctClientHeight,ctRight=scrollX+ctClientWidth,scrollX,scrollY;if(height>ctClientHeight||top<scrollY){scrollY=top}else{if(bottom>ctBottom){scrollY=bottom-ctClientHeight}}if(width>ctClientWidth||left<scrollX){scrollX=left}else{if(right>ctRight){scrollX=right-ctClientWidth}}return{x:scrollX,y:scrollY}},getScrollLeft:function(){var dom=this.dom;if(dom===DOC||dom===document.body){return this.getScroll().left}else{return dom.scrollLeft}},getScrollTop:function(){var dom=this.dom;if(dom===DOC||dom===document.body){return this.getScroll().top}else{return dom.scrollTop}},getXY:function(){var xy=arguments.callee.$previous.call(this),scroll=Ext.getDoc().getScroll();xy[0]+=scroll.left;xy[1]+=scroll.top;return xy},ghost:function(anchor,obj){var me=this,dom=me.dom,beforeAnim;anchor=anchor||"b";beforeAnim=function(){var el=Ext.fly(dom,"_anim"),width=el.getWidth(),height=el.getHeight(),xy=el.getXY(),position=el.getPositioning(),to={opacity:0};switch(anchor){case"t":to.y=xy[1]-height;break;case"l":to.x=xy[0]-width;break;case"r":to.x=xy[0]+width;break;case"b":to.y=xy[1]+height;break;case"tl":to.x=xy[0]-width;to.y=xy[1]-height;break;case"bl":to.x=xy[0]-width;to.y=xy[1]+height;break;case"br":to.x=xy[0]+width;to.y=xy[1]+height;break;case"tr":to.x=xy[0]+width;to.y=xy[1]-height;break}this.to=to;this.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");if(el){el.hide();el.clearOpacity();el.setPositioning(position)}})};me.animate(Ext.applyIf(obj||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:beforeAnim}}));return me},hide:function(animate){if(typeof animate==="string"){this.setVisible(false,animate);return this}this.setVisible(false,this.anim(animate));return this},highlight:function(color,o){var me=this,dom=me.dom,from={},restore,to,attr,lns,event,fn;o=o||{};lns=o.listeners||{};attr=o.attr||"backgroundColor";from[attr]=color||"ffff9c";if(!o.to){to={};to[attr]=o.endColor||me.getColor(attr,"ffffff","")}else{to=o.to}o.listeners=Ext.apply(Ext.apply({},lns),{beforeanimate:function(){restore=dom.style[attr];var el=Ext.fly(dom,"_anim");el.clearOpacity();el.show();event=lns.beforeanimate;if(event){fn=event.fn||event;return fn.apply(event.scope||lns.scope||WIN,arguments)}},afteranimate:function(){if(dom){dom.style[attr]=restore}event=lns.afteranimate;if(event){fn=event.fn||event;fn.apply(event.scope||lns.scope||WIN,arguments)}}});me.animate(Ext.apply({},o,{duration:1000,easing:"ease-in",from:from,to:to}));return me},hover:function(overFn,outFn,scope,options){var me=this;me.on("mouseenter",overFn,scope||me.dom,options);me.on("mouseleave",outFn,scope||me.dom,options);return me},initDD:function(group,config,overrides){var dd=new Ext.dd.DD(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDProxy:function(group,config,overrides){var dd=new Ext.dd.DDProxy(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDTarget:function(group,config,overrides){var dd=new Ext.dd.DDTarget(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},isFocusable:function(asFocusEl){var me=this,dom=me.dom,hasTabIndex=dom.hasAttribute("tabindex"),tabIndex=hasTabIndex&&dom.getAttribute("tabindex"),nodeName=dom.nodeName,canFocus=false;if(dom&&!dom.disabled){if(tabIndex=="-1"){canFocus=asFocusEl}else{if(focusRe.test(nodeName)){if((nodeName!=="A")||dom.href){canFocus=true}}else{canFocus=tabIndex!=null&&tabIndex>=0}}canFocus=canFocus&&me.isVisible(true)}return canFocus},isMasked:function(deep){var me=this,data=me.getData(),maskEl=data.maskEl,maskMsg=data.maskMsg,hasMask=false,parent;if(maskEl&&maskEl.isVisible()){if(maskMsg){maskMsg.center(me)}hasMask=true}else{if(deep){parent=me.findParentNode();if(parent){return Ext.fly(parent).isMasked(deep)}}}return hasMask},isScrollable:function(){var dom=this.dom;return dom.scrollHeight>dom.clientHeight||dom.scrollWidth>dom.clientWidth},load:function(options){this.getLoader().load(options);return this},mask:function(msg,msgCls,elHeight){var me=this,dom=me.dom,data=me.getData(),maskEl=data.maskEl,maskMsg=data.maskMsg;if(!(bodyRe.test(dom.tagName)&&me.getStyle("position")=="static")){me.addCls(XMASKEDRELATIVE)}if(maskEl){maskEl.destroy()}if(maskMsg){maskMsg.destroy()}Ext.DomHelper.append(dom,[{role:"presentation",cls:"x-mask",style:"top:0;left:0;"},{role:"presentation",cls:msgCls?EXTELMASKMSG+" "+msgCls:EXTELMASKMSG,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:msg||""}}}]);maskMsg=Ext.get(dom.lastChild);maskEl=Ext.get(maskMsg.dom.previousSibling);data.maskMsg=maskMsg;data.maskEl=maskEl;me.addCls(XMASKED);maskEl.setDisplayed(true);if(typeof msg==="string"){maskMsg.setDisplayed(true);maskMsg.center(me)}else{maskMsg.setDisplayed(false)}if(dom===DOC.body){maskEl.addCls("x-mask-fixed")}else{me.saveTabbableState()}me.saveChildrenTabbableState();if(Ext.isIE9m&&dom!==DOC.body&&me.isStyle("height","auto")){maskEl.setSize(undefined,elHeight||me.getHeight())}return maskEl},monitorMouseLeave:function(delay,handler,scope){var me=this,timer,listeners={mouseleave:function(e){if(Ext.isIE9m){e.enableIEAsync()}timer=Ext.defer(handler,delay,scope||me,[e])},mouseenter:function(){clearTimeout(timer)}};me.on(listeners);return listeners},needsTabIndex:function(){var me=this;if(me.dom){if((me.dom.nodeName==="A")&&(!me.dom.href)){return true}return !focusRe.test(me.dom.nodeName)}},normalizeEvent:function(eventName){var fn,newName;if(!Ext.supports.MouseEnterLeave&&mouseEnterLeaveRe.test(eventName)){fn=this.normalizeWithin;newName=eventName=="mouseenter"?"mouseover":"mouseout"}else{if(eventName=="mousewheel"&&!Ext.supports.MouseWheel&&!Ext.isOpera){newName="DOMMouseScroll"}}return newName?{eventName:newName,normalizeFn:fn}:null},normalizeWithin:function(event){var parent=event.currentTarget,child=event.getRelatedTarget();if(parent&&parent.firstChild){while(child){if(child===parent){return false}child=child.parentNode;if(child&&(child.nodeType!==1)){child=null}}}return true},puff:function(obj){var me=this,dom=me.dom,beforeAnim,box=me.getBox(),originalStyles=me.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],true);obj=Ext.applyIf(obj||{},{easing:"ease-out",duration:500,useDisplay:false});beforeAnim=function(){var el=Ext.fly(dom,"_anim");el.clearOpacity();el.show();this.to={width:box.width*2,height:box.height*2,x:box.x-(box.width/2),y:box.y-(box.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");if(el){if(obj.useDisplay){el.setDisplayed(false)}else{el.hide()}el.setStyle(originalStyles);Ext.callback(obj.callback,obj.scope)}})};me.animate({duration:obj.duration,easing:obj.easing,listeners:{beforeanimate:{fn:beforeAnim}}});return me},scroll:function(direction,distance,animate){if(!this.isScrollable()){return false}direction=direction.charAt(0);var me=this,dom=me.dom,side=direction==="r"||direction==="l"?"left":"top",scrolled=false,currentScroll,constrainedScroll;if(direction==="l"||direction==="t"||direction==="u"){distance=-distance}if(side==="left"){currentScroll=dom.scrollLeft;constrainedScroll=me.constrainScrollLeft(currentScroll+distance)}else{currentScroll=dom.scrollTop;constrainedScroll=me.constrainScrollTop(currentScroll+distance)}if(constrainedScroll!==currentScroll){this.scrollTo(side,constrainedScroll,animate);scrolled=true}return scrolled},scrollBy:function(deltaX,deltaY,animate){var me=this,dom=me.dom;if(deltaX.length){animate=deltaY;deltaY=deltaX[1];deltaX=deltaX[0]}else{if(typeof deltaX!="number"){animate=deltaY;deltaY=deltaX.y;deltaX=deltaX.x}}if(deltaX){me.scrollTo("left",me.constrainScrollLeft(dom.scrollLeft+deltaX),animate)}if(deltaY){me.scrollTo("top",me.constrainScrollTop(dom.scrollTop+deltaY),animate)}return me},scrollChildIntoView:function(child,hscroll){Ext.fly(child).scrollIntoView(this,hscroll)},scrollIntoView:function(container,hscroll,animate,highlight){container=Ext.getDom(container)||Ext.getBody().dom;return this.doScrollIntoView(container,hscroll,animate,highlight,"getScrollLeft","scrollTo")},scrollTo:function(side,value,animate){var top=/top/i.test(side),me=this,prop=top?"scrollTop":"scrollLeft",dom=me.dom,animCfg;if(!animate||!me.anim){dom[prop]=value;dom[prop]=value}else{animCfg={to:{}};animCfg.to[prop]=value;if(Ext.isObject(animate)){Ext.applyIf(animCfg,animate)}me.animate(animCfg)}return me},selectable:function(){var me=this;me.dom.unselectable="";me.removeCls(Element.unselectableCls);me.addCls(Element.selectableCls);return me},setCapture:function(){var dom=this.dom;if(Ext.isIE9m&&dom.setCapture){dom.setCapture()}},setDisplayed:function(value){if(typeof value==="boolean"){value=value?getDisplay(this):NONE}this.setStyle(DISPLAY,value);return this},setHeight:function(height,animate){var me=this;if(!animate||!me.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(animate)){animate={}}me.animate(Ext.applyIf({to:{height:height}},animate))}return me},setHorizontal:function(){var me=this,cls=me.verticalCls;delete me.vertical;if(cls){delete me.verticalCls;me.removeCls(cls)}delete me.setWidth;delete me.setHeight;if(!Ext.isIE8){delete me.getWidth;delete me.getHeight}delete me.styleHooks},updateText:function(text){var me=this,dom,textNode;if(dom){textNode=dom.firstChild;if(!textNode||(textNode.nodeType!==3||textNode.nextSibling)){textNode=DOC.createTextNode();me.empty();dom.appendChild(textNode)}if(text){textNode.data=text}}},setHtml:function(html,loadScripts,callback){var me=this,id,dom,interval;if(!me.dom){return me}html=html||"";dom=me.dom;if(loadScripts!==true){dom.innerHTML=html;Ext.callback(callback,me);return me}id=Ext.id();html+='<span id="'+id+'" role="presentation"></span>';interval=Ext.interval(function(){var hd,match,attrs,srcMatch,typeMatch,el,s;if(!(el=DOC.getElementById(id))){return false}clearInterval(interval);Ext.removeNode(el);hd=Ext.getHead().dom;while((match=scriptTagRe.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement("script");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(WIN.execScript){WIN.execScript(match[2])}else{WIN.eval(match[2])}}}}Ext.callback(callback,me)},20);dom.innerHTML=html.replace(replaceScriptTagRe,"");return me},setOpacity:function(opacity,animate){var me=this;if(!me.dom){return me}if(!animate||!me.anim){me.setStyle("opacity",opacity)}else{if(typeof animate!="object"){animate={duration:350,easing:"ease-in"}}me.animate(Ext.applyIf({to:{opacity:opacity}},animate))}return me},setPositioning:function(pc){return this.setStyle(pc)},setScrollLeft:function(left){this.dom.scrollLeft=left;return this},setScrollTop:function(top){this.dom.scrollTop=top;return this},setVertical:function(angle,cls){var me=this,proto=Element.prototype;me.vertical=true;if(cls){me.addCls(me.verticalCls=cls)}me.setWidth=proto.setHeight;me.setHeight=proto.setWidth;if(!Ext.isIE8){me.getWidth=proto.getHeight;me.getHeight=proto.getWidth}me.styleHooks=(angle===270)?proto.verticalStyleHooks270:proto.verticalStyleHooks90},setSize:function(width,height,animate){var me=this;if(Ext.isObject(width)){animate=height;height=width.height;width=width.width}if(!animate||!me.anim){me.dom.style.width=Element.addUnits(width);me.dom.style.height=Element.addUnits(height)}else{if(animate===true){animate={}}me.animate(Ext.applyIf({to:{width:width,height:height}},animate))}return me},setVisible:function(visible,animate){var me=this,dom=me.dom,visMode=getVisMode(me);if(typeof animate==="string"){switch(animate){case DISPLAY:visMode=Element.DISPLAY;break;case VISIBILITY:visMode=Element.VISIBILITY;break;case OFFSETS:visMode=Element.OFFSETS;break}me.setVisibilityMode(visMode);animate=false}if(!animate||!me.anim){if(visMode===Element.DISPLAY){return me.setDisplayed(visible)}else{if(visMode===Element.OFFSETS){me[visible?"removeCls":"addCls"](OFFSETCLASS)}else{if(visMode===Element.VISIBILITY){me.fixDisplay();dom.style.visibility=visible?"":HIDDEN}}}}else{if(visible){me.setOpacity(0.01);me.setVisible(true)}if(!Ext.isObject(animate)){animate={duration:350,easing:"ease-in"}}me.animate(Ext.applyIf({callback:function(){if(!visible){Ext.fly(dom).setVisible(false).setOpacity(1)}},to:{opacity:(visible)?1:0}},animate))}me.getData()[ISVISIBLE]=visible;return me},setWidth:function(width,animate){var me=this;if(!animate||!me.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(animate)){animate={}}me.animate(Ext.applyIf({to:{width:width}},animate))}return me},setX:function(x,animate){return this.setXY([x,this.getY()],animate)},setXY:function(xy,animate){var me=this;if(!animate||!me.anim){arguments.callee.$previous.call(this,xy)}else{if(!Ext.isObject(animate)){animate={}}me.animate(Ext.applyIf({to:{x:xy[0],y:xy[1]}},animate))}return this},setY:function(y,animate){return this.setXY([this.getX(),y],animate)},show:function(animate){if(typeof animate==="string"){this.setVisible(true,animate);return this}this.setVisible(true,this.anim(animate));return this},slideIn:function(anchor,obj,slideOut){var me=this,dom=me.dom,elStyle=dom.style,beforeAnim,wrapAnim,restoreScroll,wrapDomParentNode;anchor=anchor||"t";obj=obj||{};beforeAnim=function(){var animScope=this,listeners=obj.listeners,el=Ext.fly(dom,"_anim"),box,originalStyles,anim,wrap;if(!slideOut){el.fixDisplay()}box=el.getBox();if((anchor=="t"||anchor=="b")&&box.height===0){box.height=dom.scrollHeight}else{if((anchor=="l"||anchor=="r")&&box.width===0){box.width=dom.scrollWidth}}originalStyles=el.getStyle(["width","height","left","right","top","bottom","position","z-index"],true);el.setSize(box.width,box.height);if(obj.preserveScroll){restoreScroll=el.cacheScrollValues()}wrap=el.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+el.dom.id,style:{visibility:slideOut?"visible":"hidden"}});wrapDomParentNode=wrap.dom.parentNode;wrap.setPositioning(el.getPositioning(true));if(wrap.isStyle("position","static")){wrap.position("relative")}el.clearPositioning("auto");wrap.clip();if(restoreScroll){restoreScroll()}el.setStyle({visibility:"",position:"absolute"});if(slideOut){wrap.setSize(box.width,box.height)}switch(anchor){case"t":anim={from:{width:box.width+"px",height:"0px"},to:{width:box.width+"px",height:box.height+"px"}};elStyle.bottom="0px";break;case"l":anim={from:{width:"0px",height:box.height+"px"},to:{width:box.width+"px",height:box.height+"px"}};me.anchorAnimX(anchor);break;case"r":anim={from:{x:box.x+box.width,width:"0px",height:box.height+"px"},to:{x:box.x,width:box.width+"px",height:box.height+"px"}};me.anchorAnimX(anchor);break;case"b":anim={from:{y:box.y+box.height,width:box.width+"px",height:"0px"},to:{y:box.y,width:box.width+"px",height:box.height+"px"}};break;case"tl":anim={from:{x:box.x,y:box.y,width:"0px",height:"0px"},to:{width:box.width+"px",height:box.height+"px"}};elStyle.bottom="0px";me.anchorAnimX("l");break;case"bl":anim={from:{y:box.y+box.height,width:"0px",height:"0px"},to:{y:box.y,width:box.width+"px",height:box.height+"px"}};me.anchorAnimX("l");break;case"br":anim={from:{x:box.x+box.width,y:box.y+box.height,width:"0px",height:"0px"},to:{x:box.x,y:box.y,width:box.width+"px",height:box.height+"px"}};me.anchorAnimX("r");break;case"tr":anim={from:{x:box.x+box.width,width:"0px",height:"0px"},to:{x:box.x,width:box.width+"px",height:box.height+"px"}};elStyle.bottom="0px";me.anchorAnimX("r");break}wrap.show();wrapAnim=Ext.apply({},obj);delete wrapAnim.listeners;wrapAnim=new Ext.fx.Anim(Ext.applyIf(wrapAnim,{target:wrap,duration:500,easing:"ease-out",from:slideOut?anim.to:anim.from,to:slideOut?anim.from:anim.to}));wrapAnim.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");el.setStyle(originalStyles);if(slideOut){if(obj.useDisplay){el.setDisplayed(false)}else{el.hide()}}if(wrap.dom){if(wrap.dom.parentNode){wrap.dom.parentNode.insertBefore(el.dom,wrap.dom)}else{wrapDomParentNode.appendChild(el.dom)}wrap.destroy()}if(restoreScroll){restoreScroll()}animScope.end()});if(listeners){wrapAnim.on(listeners)}};me.animate({duration:obj.duration?Math.max(obj.duration,500)*2:1000,listeners:{beforeanimate:beforeAnim}});return me},slideOut:function(anchor,o){return this.slideIn(anchor,o,true)},swallowEvent:function(eventName,preventDefault){var me=this,e,eLen,fn=function(e){e.stopPropagation();if(preventDefault){e.preventDefault()}};if(Ext.isArray(eventName)){eLen=eventName.length;for(e=0;e<eLen;e++){me.on(eventName[e],fn)}return me}me.on(eventName,fn);return me},switchOff:function(obj){var me=this,dom=me.dom,beforeAnim;obj=Ext.applyIf(obj||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});beforeAnim=function(){var el=Ext.fly(dom,"_anim"),animScope=this,size=el.getSize(),xy=el.getXY(),keyframe,position;el.clearOpacity();el.clip();position=el.getPositioning();keyframe=new Ext.fx.Animator({target:dom,duration:obj.duration,easing:obj.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:xy[1]+size.height/2},100:{width:1,x:xy[0]+size.width/2}}});keyframe.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");if(obj.useDisplay){el.setDisplayed(false)}else{el.hide()}el.clearOpacity();el.setPositioning(position);el.setSize(size);animScope.end()})};me.animate({duration:(Math.max(obj.duration,500)*2),listeners:{beforeanimate:{fn:beforeAnim}},callback:obj.callback,scope:obj.scope});return me},syncContent:function(source){source=Ext.getDom(source);var sourceNodes=source.childNodes,sourceLen=sourceNodes.length,dest=this.dom,destNodes=dest.childNodes,destLen=destNodes.length,i,destNode,sourceNode,nodeType,newAttrs,attLen,attName;if(Ext.isIE9m&&dest.mergeAttributes){dest.mergeAttributes(source,true);dest.src=source.src}else{newAttrs=source.attributes;attLen=newAttrs.length;for(i=0;i<attLen;i++){attName=newAttrs[i].name;if(attName!=="id"){dest.setAttribute(attName,newAttrs[i].value)}}}if(sourceLen!==destLen){dest.innerHTML=source.innerHTML;return}for(i=0;i<sourceLen;i++){sourceNode=sourceNodes[i];destNode=destNodes[i];nodeType=sourceNode.nodeType;if(nodeType!==destNode.nodeType||(nodeType===1&&sourceNode.tagName!==destNode.tagName)){dest.innerHTML=source.innerHTML;return}if(nodeType===3){destNode.data=sourceNode.data}else{if(sourceNode.id&&destNode.id!==sourceNode.id){destNode.id=sourceNode.id}destNode.style.cssText=sourceNode.style.cssText;destNode.className=sourceNode.className;Ext.fly(destNode,"_syncContent").syncContent(sourceNode)}}},toggle:function(animate){var me=this;me.setVisible(!me.isVisible(),me.anim(animate));return me},unmask:function(){var me=this,data=me.getData(),maskEl=data.maskEl,maskMsg=data.maskMsg,style;if(maskEl){style=maskEl.dom.style;if(style.clearExpression){style.clearExpression("width");style.clearExpression("height")}if(maskEl){maskEl.destroy();delete data.maskEl}if(maskMsg){maskMsg.destroy();delete data.maskMsg}me.removeCls([XMASKED,XMASKEDRELATIVE])}me.restoreChildrenTabbableState();if(me.dom!==DOC.body){me.restoreTabbableState()}},unclip:function(){var me=this,data=me.getData(),clip;if(data[ISCLIPPED]){data[ISCLIPPED]=false;clip=data[ORIGINALCLIP];if(clip.o){me.setStyle(OVERFLOW,clip.o)}if(clip.x){me.setStyle(OVERFLOWX,clip.x)}if(clip.y){me.setStyle(OVERFLOWY,clip.y)}}return me},translate:function(x,y,z){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else{if(x!=null){this.dom.style.left=x+"px"}if(y!=null){this.dom.style.top=y+"px"}this.dom.style.position="absolute"}},unselectable:function(){var me=this;if(Ext.isOpera){me.dom.unselectable="on"}me.removeCls(Element.selectableCls);me.addCls(Element.unselectableCls);return me},privates:{isTabbable:function(){var me=this,dom=me.dom,tag=dom.nodeName,editable=dom.isContentEditable,hasIdx,idx;if(dom.hasAttribute("disabled")&&(Ext.isIE8||!editable)){return false}if(!me.isVisible(true)){return false}hasIdx=dom.hasAttribute("tabindex");idx=hasIdx&&dom.getAttribute("tabindex")-0;if(tag==="A"){if(dom.href){return hasIdx&&idx<0?false:true}else{if(editable){return !hasIdx||(hasIdx&&idx>=0)?true:false}else{return hasIdx&&idx>=0?true:false}}}else{if(editable||tabbableRe.test(tag)||(Ext.isIE8&&tag==="OBJECT")){return hasIdx&&idx<0?false:true}else{if(hasIdx&&idx>=0){return true}}}return false},selectTabbableElements:function(asDom,selector,limit,backward){var selection,nodes,node,el,i,len,to,step;asDom=asDom!=undefined?asDom:true;nodes=this.dom.querySelectorAll(selector||tabbableSelector);len=nodes.length;if(!len){return nodes}if(backward){i=len-1;to=0;step=-1}else{i=0;to=len-1;step=1}selection=[];for(;;i+=step){if((step>0&&i>to)||(step<0&&i<to)){break}node=nodes[i];el=asDom?Ext.fly(node):Ext.get(node);if(el.isTabbable()){selection.push(asDom?node:el)}if(selection.length>=limit){return selection}}return selection},selectFirstTabbableElement:function(asDom,selector){var els=this.selectTabbableElements(asDom,selector,1,false);return els[0]},selectLastTabbableElement:function(asDom,selector){var els=this.selectTabbableElements(asDom,selector,1,true);return els[0]},saveTabbableState:function(attribute){var dom=this.dom;if(dom.hasAttribute(tabbableSavedFlagAttribute)){return}attribute=attribute||tabbableSavedAttribute;if(dom.hasAttribute("tabindex")){dom.setAttribute(attribute,dom.getAttribute("tabindex"))}else{dom.setAttribute(attribute,"none")}dom.setAttribute("tabindex",-1);dom.setAttribute(tabbableSavedFlagAttribute,true);return this},restoreTabbableState:function(attribute){var dom=this.dom,idx;attribute=attribute||tabbableSavedAttribute;if(!dom.hasAttribute(tabbableSavedFlagAttribute)||!dom.hasAttribute(attribute)){return}idx=dom.getAttribute(attribute);if(idx==="none"){dom.removeAttribute("tabindex")}else{dom.setAttribute("tabindex",idx)}dom.removeAttribute(attribute);dom.removeAttribute(tabbableSavedFlagAttribute);return this},saveChildrenTabbableState:function(attribute){var children,child,i,len;if(this.dom){children=this.selectTabbableElements();for(i=0,len=children.length;i<len;i++){child=Ext.fly(children[i]);child.saveTabbableState(attribute)}}return this},restoreChildrenTabbableState:function(attribute){var children,child,i,len;attribute=attribute||tabbableSavedAttribute;children=this.dom.querySelectorAll("["+attribute+"]");for(i=0,len=children.length;i<len;i++){child=Ext.fly(children[i]);child.restoreTabbableState(attribute)}return this}},deprecated:{"4.0":{methods:{pause:function(ms){var me=this;Ext.fx.Manager.setFxDefaults(me.id,{delay:ms});return me},scale:function(w,h,o){this.animate(Ext.apply({},o,{width:w,height:h}));return this},shift:function(config){this.animate(config);return this}}},"4.2":{methods:{moveTo:function(x,y,animate){return this.setXY([x,y],animate)},setBounds:function(x,y,width,height,animate){return this.setBox({x:x,y:y,width:width,height:height},animate)},setLeftTop:function(left,top){var me=this,style=me.dom.style;style.left=Element.addUnits(left);style.top=Element.addUnits(top);return me},setLocation:function(x,y,animate){return this.setXY([x,y],animate)}}},"5.0":{methods:{getAttributeNS:function(namespace,name){return this.getAttribute(name,namespace)},getCenterXY:function(){return this.getAlignToXY(DOC,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(HEIGHT))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(WIDTH))||0},getStyleSize:function(){var me=this,d=this.dom,isDoc=(d===DOC||d===DOC.body),s,w,h;if(isDoc){return{width:Element.getViewportWidth(),height:Element.getViewportHeight()}}s=me.getStyle(["height","width"],true);if(s.width&&s.width!=="auto"){w=parseFloat(s.width)}if(s.height&&s.height!=="auto"){h=parseFloat(s.height)}return{width:w||me.getWidth(true),height:h||me.getHeight(true)}},isBorderBox:function(){return true},isDisplayed:function(){return !this.isStyle("display","none")},focusable:"isFocusable"}}}}})(),function(){var r=Ext.dom.Element,q=r.prototype,y=!Ext.isIE8,b=document,n=b.defaultView,x=/alpha\(opacity=(.*)\)/i,j=/^\s+|\s+$/g,z=q.styleHooks,v=Ext.supports,d=0,u,g,f,p,e,t,h,A;q._init(r);delete q._init;if(Ext.os.is.iOS||Ext.os.is.Android){d=2}else{if(navigator.msMaxTouchPoints||(Ext.isWebKit&&v.TouchEvents&&Ext.os.is.Desktop)){d=1}}Ext.apply(v,{touchScroll:d});Ext.plainTableCls="x-table-plain";Ext.plainListCls="x-list-plain";if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}z.opacity={name:"opacity",afterSet:function(C,B,k){if(k.isLayer){k.onOpacitySet(B)}}};if(!v.Opacity&&Ext.isIE){Ext.apply(z.opacity,{get:function(D){var C=D.style.filter,B,k;if(C.match){B=C.match(x);if(B){k=parseFloat(B[1]);if(!isNaN(k)){return k?k/100:0}}}return 1},set:function(D,B){var k=D.style,C=k.filter.replace(x,"").replace(j,"");k.zoom=1;if(typeof(B)==="number"&&B>=0&&B<1){B*=100;k.filter=C+(C.length?" ":"")+"alpha(opacity="+B+")"}else{k.filter=C}}})}if(!v.matchesSelector){var l=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,m=/\-/g,a,w=function(k,B){var C=new RegExp("(?:^|\\s+)"+B.replace(m,"\\-")+"(?:\\s+|$)");if(k&&k!=="*"){k=k.toUpperCase();return function(D){return D.tagName===k&&C.test(D.className)}}return function(D){return C.test(D.className)}},s=function(k){k=k.toUpperCase();return function(B){return B.tagName===k}},o={};q.matcherCache=o;q.is=function(k){if(!k){return true}var B=this.dom,H,D,G,F,E,C,I;if(B.nodeType!==1){return false}if(!(G=Ext.isFunction(k)?k:o[k])){if(!(D=k.match(l))){F=B.parentNode;if(!F){E=true;F=a||(a=b.createDocumentFragment());a.appendChild(B)}C=Ext.Array.indexOf(Ext.fly(F,"_is").query(k),B)!==-1;if(E){a.removeChild(B)}return C}I=D[1];H=D[2];o[k]=G=H?w(I,H):s(I)}return G(B)}}if(!n||!n.getComputedStyle){q.getStyle=function(O,J){var K=this,F=K.dom,Q=typeof O!=="string",C=O,L=C,I=1,D=J,B=K.styleHooks,P,H,N,M,E,k,G;if(Q){N={};C=L[0];G=0;if(!(I=L.length)){return N}}if(!F||F.documentElement){return N||""}H=F.style;if(J){k=H}else{k=F.currentStyle;if(!k){D=true;k=H}}do{M=B[C];if(!M){B[C]=M={name:r.normalize(C)}}if(M.get){E=M.get(F,K,D,k)}else{P=M.name;E=k[P]}if(!Q){return E}N[C]=E;C=L[++G]}while(G<I);return N}}if(Ext.isIE8){function c(D,B,C,k){if(k[this.styleName]==="none"){return"0px"}return k[this.name]}e=["Top","Right","Bottom","Left"];t=e.length;while(t--){h=e[t];A="border"+h+"Width";z["border-"+h.toLowerCase()+"-width"]=z[A]={name:A,styleName:"border"+h+"Style",get:c}}}Ext.apply(Ext,{enableGarbageCollector:true,isBorderBox:true,getDetachedBody:function(){var k=Ext.detachedBodyEl;if(!k){k=b.createElement("div");Ext.detachedBodyEl=k=new Ext.dom.Fly(k);k.isDetachedBody=true}return k},getElementById:function(C){var B=b.getElementById(C),k;if(!B&&(k=Ext.detachedBodyEl)){B=k.dom.querySelector(Ext.makeIdSelector(C))}return B},addBehaviors:function(E){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(E)})}else{var B={},D,k,C;for(k in E){if((D=k.split("@"))[1]){C=D[0];if(!B[C]){B[C]=Ext.fly(document).select(C,true)}B[C].on(D[1],E[k])}}B=null}}});if(Ext.isIE8){u=Ext.removeNode;Ext.removeNode=function(k){u(k);g=g||b.createElement("div");g.appendChild(k);g.innerHTML=""}}if(Ext.isIE9m){Ext.getElementById=function(C){var B=b.getElementById(C),k;if(!B&&(k=Ext.detachedBodyEl)){B=k.dom.all[C]}return B};q.getById=function(F,k){var E=this.dom,B=null,D,C;if(E){C=(y&&b.getElementById(F))||E.all[F];if(C){if(k){B=C}else{D=Ext.cache[F];if(D){if(D.skipGarbageCollection||!Ext.isGarbage(D.dom)){B=D}else{D.destroy()}}B=B||new Ext.Element(C)}}}return B}}else{if(!b.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(k){return b.getElementById(k)};q.getById=function(C,k){var B=b.getElementById(C);return k?B:(B?Ext.get(B):null)}}}if(Ext.isIE&&!(Ext.isIE9p&&b.documentMode>=9)){q.getAttribute=function(k,C){var D=this.dom,B;if(C){B=typeof D[C+":"+k];if(B!="undefined"&&B!="unknown"){return D[C+":"+k]||null}return null}if(k==="for"){k="htmlFor"}return D[k]||null}}Ext.onReady(function(){var D=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,B=[],I=q.setWidth,J=q.setHeight,N=q.setSize,O=/^\d+(?:\.\d*)?px$/i,H,F,k,M;if(v.FixedTableWidthBug){z.width={name:"width",set:function(U,T,R){var Q=U.style,P=R._needsTableWidthFix,S=Q.display;if(P){Q.display="none"}Q.width=T;if(P){U.scrollWidth;Q.display=S}}};q.setWidth=function(S,Q){var U=this,V=U.dom,R=V.style,P=U._needsTableWidthFix,T=R.display;if(P&&!Q){R.display="none"}I.call(U,S,Q);if(P&&!Q){V.scrollWidth;R.display=T}return U};q.setSize=function(T,Q,R){var V=this,W=V.dom,S=W.style,P=V._needsTableWidthFix,U=S.display;if(P&&!R){S.display="none"}N.call(V,T,Q,R);if(P&&!R){W.scrollWidth;S.display=U}return V}}if(Ext.isIE8){z.height={name:"height",set:function(U,T,R){var Q=R.component,S,P;if(Q&&Q._syncFrameHeight&&this===Q.el){P=Q.frameBody.dom.style;if(O.test(T)){S=Q.getFrameInfo();if(S){P.height=(parseInt(T,10)-S.height)+"px"}}else{if(!T||T==="auto"){P.height=""}}}U.style.height=T}};q.setHeight=function(P,R){var S=this.component,T,Q;if(S&&S._syncFrameHeight&&this===S.el){Q=S.frameBody.dom.style;if(!P||P==="auto"){Q.height=""}else{T=S.getFrameInfo();if(T){Q.height=(P-T.height)+"px"}}}return J.call(this,P,R)};q.setSize=function(T,P,R){var S=this.component,U,Q;if(S&&S._syncFrameHeight&&this===S.el){Q=S.frameBody.dom.style;if(!P||P==="auto"){Q.height=""}else{U=S.getFrameInfo();if(U){Q.height=(P-U.height)+"px"}}}return N.call(this,T,P,R)}}Ext.getDoc().on("selectstart",function(T,U){var S=r.selectableCls,R=r.unselectableCls,P=U&&U.tagName;P=P&&P.toLowerCase();if(P==="input"||P==="textarea"){return}while(U&&U.nodeType===1&&U!==b.documentElement){var Q=Ext.fly(U);if(Q.hasCls(S)){return}if(Q.hasCls(R)){T.stopEvent();return}U=U.parentNode}});function G(T,Q,S,P){var R=P[this.name]||"";return D.test(R)?"transparent":R}function L(Q,R,P){return function(){Q.selectionStart=R;Q.selectionEnd=P}}function K(T){var R=v.DisplayChangeInputSelectionBug,S=v.DisplayChangeTextAreaSelectionBug,U,P,V,Q;if(R||S){U=r.getActiveElement();P=U&&U.tagName;if((S&&P==="TEXTAREA")||(R&&P==="INPUT"&&U.type==="text")){if(Ext.fly(T).isAncestor(U)){V=U.selectionStart;Q=U.selectionEnd;if(Ext.isNumber(V)&&Ext.isNumber(Q)){return L(U,V,Q)}}}}return Ext.emptyFn}function E(V,S,U,R){var P=R.marginRight,Q,T;if(P!=="0px"){Q=V.style;T=Q.display;Q.display="inline-block";P=(U?R:V.ownerDocument.defaultView.getComputedStyle(V,null)).marginRight;Q.display=T}return P}function C(W,T,V,S){var P=S.marginRight,R,Q,U;if(P!=="0px"){R=W.style;Q=K(W);U=R.display;R.display="inline-block";P=(V?S:W.ownerDocument.defaultView.getComputedStyle(W,"")).marginRight;R.display=U;Q()}return P}if(!v.RightMargin){z.marginRight=z["margin-right"]={name:"marginRight",get:(v.DisplayChangeInputSelectionBug||v.DisplayChangeTextAreaSelectionBug)?C:E}}if(!v.TransparentColor){H=["background-color","border-color","color","outline-color"];for(F=H.length;F--;){k=H[F];M=r.normalize(k);z[k]=z[M]={name:M,get:G}}}q.verticalStyleHooks90=f=Ext.Object.chain(z);q.verticalStyleHooks270=p=Ext.Object.chain(z);f.width=z.height||{name:"height"};f.height=z.width||{name:"width"};f["margin-top"]={name:"marginLeft"};f["margin-right"]={name:"marginTop"};f["margin-bottom"]={name:"marginRight"};f["margin-left"]={name:"marginBottom"};f["padding-top"]={name:"paddingLeft"};f["padding-right"]={name:"paddingTop"};f["padding-bottom"]={name:"paddingRight"};f["padding-left"]={name:"paddingBottom"};f["border-top"]={name:"borderLeft"};f["border-right"]={name:"borderTop"};f["border-bottom"]={name:"borderRight"};f["border-left"]={name:"borderBottom"};p.width=z.height||{name:"height"};p.height=z.width||{name:"width"};p["margin-top"]={name:"marginRight"};p["margin-right"]={name:"marginBottom"};p["margin-bottom"]={name:"marginLeft"};p["margin-left"]={name:"marginTop"};p["padding-top"]={name:"paddingRight"};p["padding-right"]={name:"paddingBottom"};p["padding-bottom"]={name:"paddingLeft"};p["padding-left"]={name:"paddingTop"};p["border-top"]={name:"borderRight"};p["border-right"]={name:"borderBottom"};p["border-bottom"]={name:"borderLeft"};p["border-left"]={name:"borderTop"};if(!Ext.scopeCss){B.push("x-body")}if(v.Touch){B.push("x-touch")}if(Ext.isIE&&Ext.isIE9m){B.push("x-ie","x-ie9m");B.push("x-ie8p");if(Ext.isIE8){B.push("x-ie8")}else{B.push("x-ie9","x-ie9p")}if(Ext.isIE8m){B.push("x-ie8m")}}if(Ext.isIE10){B.push("x-ie10")}if(Ext.isIE11){B.push("x-ie11")}if(Ext.isGecko){B.push("x-gecko")}if(Ext.isOpera){B.push("x-opera")}if(Ext.isOpera12m){B.push("x-opera12m")}if(Ext.isWebKit){B.push("x-webkit")}if(Ext.isSafari){B.push("x-safari")}if(Ext.isChrome){B.push("x-chrome")}if(Ext.isMac){B.push("x-mac")}if(Ext.isLinux){B.push("x-linux")}if(!v.CSS3BorderRadius){B.push("x-nbr")}if(!v.CSS3LinearGradient){B.push("x-nlg")}if(v.Touch){B.push("x-touch")}Ext.getBody().addCls(B)},null,{priority:1500})});(Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:true,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent();Ext.onReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer})},fireResize:function(){var d=this,b=Ext.Element,a=b.getViewportWidth(),c=b.getViewportHeight();if(d.curHeight!==c||d.curWidth!==a){d.curHeight=c;d.curWidth=a;d.fireEvent("resize",a,c)}}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(a){Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)}}));Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",attachListeners:function(){this.callParent();Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent("mousedown",a)},deprecated:{5:{methods:{addListener:function(c,e,d,b){var a,f;if(c==="ready"){f=e}else{if(typeof c!=="string"){for(a in c){if(a==="ready"){f=c[a]}}}}if(f){Ext.onReady(f)}this.callParent([c,e,d,b])}}}}});Ext.USE_NATIVE_JSON=false;Ext.JSON=(new (function(){var me=this,hasNative=window.JSON&&JSON.toString()=="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return me.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return me.encodeMSDate(o)}else{return me.encodeString(o)}}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i),":",me.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(o)}return me.encodeValue(o)};me.decode=function(json,safe){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(json)}return doDecode(json)}catch(e){if(safe){return null}Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode})());(Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var a;return{singleton:true,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:false,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(b){return b!==undefined?b:""},defaultValue:function(c,b){return c!==undefined&&c!==""?c:b},substr:"ab".substr(-1)!="b"?function(c,e,b){var d=String(c);return(e<0)?d.substr(Math.max(d.length+e,0),b):d.substr(e,b)}:function(c,d,b){return String(c).substr(d,b)},lowercase:function(b){return String(b).toLowerCase()},uppercase:function(b){return String(b).toUpperCase()},usMoney:function(b){return a.currency(b,"$",2)},currency:function(d,f,c,b){var h="",g=",0",e=0;d=d-0;if(d<0){d=-d;h="-"}c=Ext.isDefined(c)?c:a.currencyPrecision;g+=(c>0?".":"");for(;e<c;e++){g+="0"}d=a.number(d,g);if((b||a.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",h,d,f||a.currencySign)}else{return Ext.String.format("{0}{1}{2}",h,f||a.currencySign,d)}},date:function(b,c){if(!b){return""}if(!Ext.isDate(b)){b=new Date(Date.parse(b))}return Ext.Date.dateFormat(b,c||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(d,c){var b=parseInt(d||0,10).toString(16);if(c){if(c<0){c=-c;if(b.length>c){b=b.substring(b.length-c)}}while(b.length<c){b="0"+b}}return b},or:function(c,b){return c||b},pick:function(d,c,e){if(Ext.isNumber(d)){var b=arguments[d+1];if(b){return b}}return d?e:c},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,"")},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,"")},fileSize:(function(){var b=1024,c=1048576,d=1073741824;return function(f){var e;if(f<b){if(f===1){e="1 byte"}else{e=f+" bytes"}}else{if(f<c){e=(Math.round(((f*10)/b))/10)+" KB"}else{if(f<d){e=(Math.round(((f*10)/c))/10)+" MB"}else{e=(Math.round(((f*10)/d))/10)+" GB"}}}return e}})(),math:(function(){var b={};return function(d,c){if(!b[c]){b[c]=Ext.functionFactory("v","return v "+c+";")}return b[c](d)}}()),round:function(d,c){var b=Number(d);if(typeof c==="number"){c=Math.pow(10,c);b=Math.round(d*c)/c}else{if(c===undefined){b=Math.round(b)}}return b},number:function(m,f){if(!f){return m}if(isNaN(m)){return""}var e=a.formatFns[f];if(!e){var j=f,p=a.thousandSeparator,n=a.decimalSeparator,g=0,d="",c,k,l,o,b,h;if(f.substr(f.length-2)==="/i"){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==n){a.I18NFormatCleanRe=new RegExp("[^\\d\\"+n+"]","g");a.lastDecimalSeparator=n}f=f.substr(0,f.length-2);c=f.indexOf(p)!==-1;k=f.replace(a.I18NFormatCleanRe,"").split(n)}else{c=f.indexOf(",")!==-1;k=f.replace(a.formatCleanRe,"").split(".")}l=f.replace(a.formatPattern,"");if(k.length>2){}else{if(k.length===2){g=k[1].length;o=k[1].match(a.hashRe);if(o){h=o[0].length;d='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+h+'}$")'}}}b=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(c?",thousandSeparator,thousands=[],j,n,i":"")+(l?',formatString="'+f+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+g+");",d,";"];if(c){if(g){b[b.length]='parts=fnum.split(".");';b[b.length]="fnum=parts[0];"}b[b.length]="if(absVal>=1000) {";b[b.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(g){b[b.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(g){b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}if(o){b[b.length]='fnum=fnum.replace(trailingZeroes,"");'}b[b.length]='if(neg&&fnum!=="'+(g?"0."+Ext.String.repeat("0",g):"0")+'")fnum="-"+fnum;';b[b.length]="return ";if(l){b[b.length]="formatString.replace(formatPattern, fnum);"}else{b[b.length]="fnum;"}b[b.length]="};";e=a.formatFns[j]=Ext.functionFactory("Ext",b.join(""))(Ext)}return e(m)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||"0")+a.percentSign},attributes:function(c){if(typeof c==="object"){var b=[],d;for(d in c){if(c.hasOwnProperty(d)){b.push(d,'="',d==="style"?Ext.DomHelper.generateStyles(c[d],null,true):Ext.htmlEncode(c[d]),'" ')}}c=b.join("")}return c||""},plural:function(b,c,d){return b+" "+(b===1?c:(d?d:c+"s"))},nl2br:function(b){return Ext.isEmpty(b)?"":b.replace(a.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(c){c=c||0;if(typeof c==="number"){return{top:c,right:c,bottom:c,left:c}}var d=c.split(" "),b=d.length;if(b===1){d[1]=d[2]=d[3]=d[0]}else{if(b===2){d[2]=d[0];d[3]=d[1]}else{if(b===3){d[3]=d[1]}}}return{top:parseInt(d[0],10)||0,right:parseInt(d[1],10)||0,bottom:parseInt(d[2],10)||0,left:parseInt(d[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(b,a){b=Ext.getDom(b);return new this(b.value||b.innerHTML,a||"")}},useEval:Ext.isGecko,constructor:function(d){var f=this,b=arguments,a=[],c,e=b.length,g;f.initialConfig={};if(e===1&&Ext.isArray(d)){b=d;e=b.length}if(e>1){for(c=0;c<e;c++){g=b[c];if(typeof g=="object"){Ext.apply(f.initialConfig,g);Ext.apply(f,g)}else{a.push(g)}}}else{a.push(d)}f.html=a.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(a){var b=this;if(b.compiled){if(!b.fn){b.compile()}return b.fn(a).join("")}return b.evaluate(a)},evaluate:function(a){var f=this,c=!f.disableFormats,e=Ext.util.Format,b=f;function d(k,j,h,l,g){if(h==null||h==""){h=j}if(l&&c){if(g){g=[a[h]].concat(Ext.functionFactory("return ["+g+"];")())}else{g=[a[h]]}if(l.substr(0,5)==="this."){return b[l.substr(5)].apply(b,g)}else{if(e[l]){return e[l].apply(e,g)}else{return k}}}else{return a[h]!==undefined?a[h]:""}}return f.html.replace(f.tokenRe,d)},applyOut:function(a,b){var c=this;if(c.compiled){if(!c.fn){c.compile()}b.push.apply(b,c.fn(a))}else{b.push(c.apply(a))}return b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(a,c){var b=this;b.html=a;b.compiled=!!c;b.fn=null;return b},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var b=this,a;a=b.html.replace(b.compileARe,"\\\\").replace(b.compileBRe,"\\n").replace(b.compileCRe,"\\'").replace(b.tokenRe,b.regexReplaceFn.bind(b));a=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(b.useEval?"$=":"return")+" function(v){return ['"+a+"'];};";b.fn=b.useEval?b.evalCompiled(a):(new Function("Ext",a))(Ext);b.compiled=true;return b},evalCompiled:function($){eval($);return $},regexReplaceFn:function(d,c,b,e,a){if(c==null||c==""){c='"'+b+'"'}else{if(this.stringFormat){c=parseInt(c)+1}}if(e&&this.disableFormats!==true){a=a?","+a:"";if(e.substr(0,5)==="this."){e=e+"("}else{if(Ext.util.Format[e]){e="fm."+e+"("}else{return d}}return"',"+e+"v["+c+"]"+a+"),'"}else{return"',v["+c+"] == undefined ? '' : v["+c+"],'"}},insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:function(b,a,c){return this.doInsert("beforeEnd",b,a,c)},doInsert:function(b,d,a,e){var c=Ext.DomHelper.insertHtml(b,Ext.getDom(d),this.apply(a));return e?Ext.get(c):c},overwrite:function(c,a,d){var b=Ext.DomHelper.overwrite(Ext.getDom(c),this.apply(a));return d?Ext.get(b):b}},1,0,0,0,0,0,[Ext,"Template"],function(d){var c=/\{\d+\}/,a=function(f){if(c.test(f)){f=new d(f,b);return function(){return f.apply(arguments)}}else{return function(){return f}}},b={useFormat:false,compiled:true,stringFormat:true},e={};Ext.String.format=Ext.util.Format.format=function(g){var f=e[g]||(e[g]=a(g));return f.apply(this,arguments)}}));(Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(b){var g=this,f=(b&&g.inheritedStateInner)||g.inheritedState,e=g.ownerCt||g.initOwnerCt,d=g.isContainer,c,a,h;if(!f||f.invalid){c=g.getRefOwner();if(e){h=g.ownerLayout===e.layout}g.inheritedState=f=Ext.Object.chain(c?c.getInherited(h):Ext.rootInheritedState);if(d){g.inheritedStateInner=a=Ext.Object.chain(f)}g.initInheritedState(f,a);f=(d&&b)?g.inheritedStateInner:g.inheritedState}return f},getInheritedConfig:function(e,a){var d=this.inheritedState,b,c;if(!d||d.invalid){d=this.getInherited()}c=d[e];if(a&&d.hasOwnProperty(e)){b=c;delete d[e];c=d[e];d[e]=b}return c},fixReference:function(){var a=this,b;if(a.reference){b=a.lookupReferenceHolder();if(b){b.attachReference(a)}}},resolveListenerScope:function(d){var c=this,b=Ext._namedScopes[d],a;if(!b){a=c.getInheritedConfig("defaultListenerScope",true)||d||c}else{if(b.isController){a=c.getInheritedConfig("controller",!b.isSelf)}else{if(b.isSelf){a=c.getInheritedConfig("defaultListenerScope")||c}else{if(b.isThis){a=c}}}}return a||null},lookupReferenceHolder:function(a){return this.getInheritedConfig("referenceHolder",a!==false)||null},getRefOwner:function(){return this.ownerCt||this.initOwnerCt||this.ownerCmp||this.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=true;delete this.inheritedState}}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:true},controller:null,defaultListenerScope:false,publishes:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},reference:null,session:{$value:null,lazy:true},twoWayBindable:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},viewModel:{$value:null,lazy:true}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(d){var e=this,a=e.getReference(),b=e.getController(),c=e.getConfig("viewModel",true),g=e.getConfig("session",true),f=e.getDefaultListenerScope();if(b){d.controller=b}if(f){d.defaultListenerScope=e}else{if(b){d.defaultListenerScope=b}}if(c){if(!c.isViewModel){c=e}d.viewModel=c}if(g){if(!g.isSession){g=e}d.session=g}if(a){e.referenceKey=(d.referencePath||"")+a;e.viewModelKey=(d.viewModelPath||"")+a}},lookupController:function(a){return this.getInheritedConfig("controller",a)||null},lookupSession:function(a){var b=a?null:this.getSession();if(!b){b=this.getInheritedConfig("session",a);if(b&&!b.isSession){b=b.getInherited().session=b.getSession()}}return b||null},lookupViewModel:function(a){var b=a?null:this.getViewModel();if(!b){b=this.getInheritedConfig("viewModel",a);if(b&&!b.isViewModel){b=b.getInherited().viewModel=b.getViewModel()}}return b||null},publishState:function(k,j){var h=this,l=h.viewModelKey,c=h.publishedState,e=h.getBind(),g=e&&k&&e[k],f=0,b,a,d;if(g&&!g.syncing&&!g.isReadOnly()){g.setValue(j)}if(!l||!(a=h.getPublishes())){return}if(!(d=h.lookupViewModel())){return}if(k&&c){if(!a[k]){return}if(!(j&&j.constructor===Object)&&!(j instanceof Array)){if(c[k]===j){return}}l+=".";l+=k}else{c=c||(h.publishedState={});for(b in a){++f;if(b===k){c[b]=j}else{c[b]=h[b]}}if(!f){return}j=c}d.set(l,j)},privates:{addBindableUpdater:function(c){var b=this,d=b.self.$config.configs,a=d[c],e;if(a&&!b.hasOwnProperty(e=a.names.update)){b[e]=a.bindableUpdater||(a.root.bindableUpdater=b.makeBindableUpdater(a))}},applyBind:function(d,k){var f=this,h=f.lookupViewModel(),e=f.getTwoWayBindable(),a=f._getBindTemplateScope,g,j,c;if(!k||typeof k==="string"){k={}}if(Ext.isString(d)){g=d;d={};d[f.defaultBindProperty]=g}for(j in d){c=d[j];g=k[j];if(g&&typeof g!=="string"){g.destroy();g=null}if(c){g=h.bind(c,f.onBindNotify,f);g._config=Ext.Config.get(j);g.getTemplateScope=a}k[j]=g;if(e&&e[j]&&!g.isReadOnly()){f.addBindableUpdater(j)}}return k},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}return a},applyPublishes:function(a){if(this.lookupViewModel()){for(var b in a){this.addBindableUpdater(b)}}return a},applySession:function(c){if(!c){return null}if(!c.isSession){var b=this.lookupSession(true),a=(c===true)?{}:c;if(b){c=b.spawn(a)}else{c=new Ext.data.Session(a)}}return c},applyViewModel:function(b){var c=this,a,d;if(!(b&&b.isViewModel)){a={parent:c.lookupViewModel(true)};a.session=c.getSession();if(!d&&!a.parent){a.session=c.lookupSession()}if(b){if(b.constructor===Object){Ext.apply(a,b)}else{if(typeof b==="string"){a.type=b}}}b=Ext.Factory.viewModel(a)}return b},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(e,c){var d=this,f=d.self.prototype[b];if(f){f.call(d,e,c)}d.publishState(a.name,e)}},onBindNotify:function(b,a,c){c.syncing=(c.syncing+1)||1;this[c._config.names.set](b);--c.syncing},removeBindings:function(){var c=this.bind,a,b;if(c&&typeof c!=="string"){for(a in c){b=c[a];b.destroy();b._config=b.getTemplateScope=null}}this.bind=null},updateSession:function(b){var a=this.getInherited();if(b){a.session=b}else{delete a.session}},updateViewModel:function(b){var c=this.getInherited(),a=this.getController();if(b){c.viewModel=b;b.setView(this);if(a){a.initViewModel(b)}}else{delete c.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.Widget",Ext.Evented,{isWidget:true,element:{reference:"element"},listenerOptionsRegex:/^(?:scope|order|delegate|single|delay|buffer|args|prepend|destroyable|element)$/,observableType:"component",eventedConfig:{width:null,height:null},template:[],constructor:function(a){var b=this;b.initId(a);b.initElement();b.mixins.observable.constructor.call(b,a);Ext.ComponentManager.register(b)},addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else{Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:true})}},addElementReference:function(c,e){var f=this,b=f[c]=Ext.get(e),d=f._elementListeners[c],a,g;b.skipGarbageCollection=true;b.component=f;if(d){d=Ext.clone(d);d.scope=f;for(a in d){g=d[a];if(typeof g==="object"){g.scope=f}}b.on(d)}return b},afterCachedConfig:function(){var h=this,j=h.self.prototype,k=h.referenceList,c=h.renderElement.dom,f,d,e,g,b,a;j.renderTemplate=f=document.createDocumentFragment();f.appendChild(c.cloneNode(true));a=f.querySelectorAll("[id]");for(e=0,g=a.length;e<g;e++){d=a[e];d.removeAttribute("id")}for(e=0,g=k.length;e<g;e++){b=k[e];h[b].dom.removeAttribute("reference")}},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},destroy:function(){var e=this,b=e.referenceList,c,d,a;for(c=0,d=b.length;c<d;c++){a=b[c];if(e.hasOwnProperty(a)){e[a].destroy();e[a]=null}}Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(e)},doAddListener:function(c,e,d,b,a){if(b&&"element" in b){return this[b.element].doAddListener(c,e,d||this,b,a)}return Ext.Evented.prototype.doAddListener.call(this,c,e,d,b,a)},doRemoveListener:function(c,e,d,b,a){if(b&&"element" in b){this[b.element].doRemoveListener(c,e,d||this,b,a)}return Ext.Evented.prototype.doRemoveListener.call(this,c,e,d,b,a)},doSetWidth:function(a){this.element.setWidth(a)},doSetHeight:function(a){this.element.setHeight(a)},filterLengthValue:function(a){if(a==="auto"||(!a&&a!==0)){return null}return a},getElementConfig:function(){var b=this,a=b.element;if(!("children" in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var l=this,m=l.self.prototype,a=l.getId(),o=l.referenceList=[],c=true,h,e,g,b,f,k,j,d,n;if(m.hasOwnProperty("renderTemplate")){h=l.renderTemplate.cloneNode(true);e=h.firstChild}else{c=false;h=document.createDocumentFragment();n=l.getElementConfig();l.initElementListeners(n);e=Ext.Element.create(n,true);h.appendChild(e)}b=h.querySelectorAll("[reference]");for(f=0,k=b.length;f<k;f++){j=b[f];d=j.getAttribute("reference");if(c){j.removeAttribute("reference")}if(d==="element"){j.id=a;g=l.el=l.addElementReference(d,j)}else{l.addElementReferenceOnDemand(d,j)}o.push(d)}if(e===g.dom){l.renderElement=g}else{l.addElementReferenceOnDemand("renderElement",e)}},initElementListeners:function(h){var g=this,f=g._elementListeners||(g.self.prototype._elementListeners={}),a=h.reference,c=h.children,d,e,b;if(a){d=h.listeners;if(d){f[a]=d;h.listeners=null}}if(c){for(b=0,e=c.length;b<e;b++){g.initElementListeners(c[b])}}},initId:function(b){var c=this,a=c.config,d=(b&&b.id)||(a&&a.id);if(d){c.setId(d);c.id=d}else{c.getId()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},resolveListenerScope:function(a){return this.mixins.inheritable.resolveListenerScope.call(this,a)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}}},1,["widget"],["widget"],{widget:true},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable]],[Ext,"Widget"],0));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var b=Ext.String.splitWords,a=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(d){var f=this,c,e;if(d){Ext.apply(f,d);c=f.cls;e=f.style;delete f.cls}f.classList=c?b(c):[];f.classMap=c?a(f.classList):{};if(e){if(typeof e==="string"){f.style=Ext.Element.parseStyles(e)}else{if(Ext.isFunction(e)){f.styleFn=e;delete f.style}else{f.style=Ext.apply({},e)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(m){if(!m){return this}var k=this,l=(typeof m==="string")?b(m):m,e=l.length,h=k.classList,d=k.classMap,f=k.flushClassList,g=0,j;for(;g<e;++g){j=l[g];if(!d[j]){d[j]=true;h.push(j);if(f){f.push(j);delete k.removedClasses[j]}}}return k},hasCls:function(c){return c in this.classMap},removeCls:function(n){var m=this,k=m.classList,f=(m.classList=[]),h=a(b(n)),e=k.length,d=m.classMap,j=m.removedClasses,g,l;for(g=0;g<e;++g){l=k[g];if(h[l]){if(j){if(d[l]){j[l]=true;Ext.Array.remove(m.flushClassList,l)}}delete d[l]}else{f.push(l)}}return m},setStyle:function(f,e){var d=this,c=d.style||(d.style={});if(typeof f=="string"){if(arguments.length===1){d.setStyle(Ext.Element.parseStyles(f))}else{c[f]=e}}else{Ext.apply(c,f)}return d},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(g){var e=this,f=e.flushClassList||e.classList,d=e.removedClasses,c;if(e.styleFn){c=Ext.apply({},e.styleFn());Ext.apply(c,e.style)}else{c=e.style}g[e.clsProp]=f.join(" ");if(c){g[e.styleProp]=e.styleIsText?Ext.DomHelper.generateStyles(c,null,true):c}if(d){d=Ext.Object.getKeys(d);if(d.length){g[e.removedProp]=d.join(" ")}}if(e.unselectableAttr){g.unselectable="on"}return g}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:false,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:true,lazy:true,merge:function(f,a,e,d){var c=a?Ext.Object.chain(a):{},b,g;if(f instanceof Array){for(b=f.length;b--;){g=f[b];if(!d||!(g in c)){if(typeof g==="string"){c[g]={name:g,itemId:g}}else{c[g.name]=g}}}}else{if(f){if(f.constructor===Object){for(b in f){if(!d||!(b in c)){g=f[b];if(g===true){c[b]={itemId:b}}else{if(typeof g==="string"){c[b]={itemId:g}}else{c[b]=g;if(!("itemId" in g)){g.itemId=b}}}c[b].name=b}}}else{if(!d||!(f in c)){c[f]={name:f,itemId:f}}}}}return c}}},destroy:function(){var c=this,b=c.getChildEls(),d,a;for(a in b){d=c[a];if(d){if(d.destroy){d.destroy()}c[a]=null}}},privates:{afterClassMixedIn:function(c){var b=c.prototype,a=b.childEls;if(a){delete b.childEls;c.getConfigurator().add({childEls:a})}},attachChildEls:function(d,c){var h=this,j=h.getChildEls(),g=c||h,o=g.id+"-",n=!g.frame,p,a,m,f,e,l,b;for(p in j){m=j[p];if(n&&m.frame){continue}e=m.select;if(e){l=d.select(e,true)}else{if(!(e=m.selectNode)){if(!(b=m.id)){b=o+m.itemId;l=Ext.cache[b]}else{l=Ext.cache[b]||d.getById(b)}}else{l=d.selectNode(e,false)}}if(l){if(l.isElement){l.component=g}else{if(l.isComposite&&!l.isLite){a=l.elements;for(f=a.length;f--;){a[f].component=g}}}}h[p]=l||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,statics:{makeRenderSetter:function(a,c){var b=a.name;return function(e){var d=this,g=(d.renderConfigs||(d.renderConfigs={})),f=g[c];if(d._renderState>=c){(a.setter||a.getSetter()).call(d,e)}else{if(!f){g[c]=f={}}if(!(b in f)){f[b]=d[b]}d[b]=e}return d}},processRenderConfig:function(a,l,c){var g=this.prototype,e=this.getConfigurator(),m=Ext.util.Renderable,k=m.makeRenderSetter,d=a[l],h,j,b,f;for(b in d){j=Ext.Config.get(b);if(!g[f=j.names.set]){h=(j.renderSetter||(j.renderSetter={}));g[f]=h[c]||(h[c]=k(j,c))}}delete a[l];e.add(d)}},onClassMixedIn:function(c){var a=c.override,e=this.processRenderConfig,d=function(f){if(f.beforeRenderConfig){this.processRenderConfig(f,"beforeRenderConfig",1)}if(f.renderConfig){this.processRenderConfig(f,"renderConfig",3)}a.call(this,f)},b=function(g,f){g.override=d;g.processRenderConfig=e;if(f.beforeRenderConfig){g.processRenderConfig(f,"beforeRenderConfig",1)}if(f.renderConfig){g.processRenderConfig(f,"renderConfig",3)}};b(c,c.prototype);c.onExtended(b)},afterRender:function(){var c=this,e={},h=c.protoEl,g=c.el,b,f,d,a;c.finishRenderChildren();c._renderState=4;if(c.contentEl){f="x-";d=f+"hidden-";a=Ext.get(c.contentEl);a.component=c;a.removeCls([f+"hidden",d+"display",d+"offsets"]);c.getContentTarget().appendChild(a.dom)}h.writeTo(e);b=e.removed;if(b){g.removeCls(b)}b=e.cls;if(b.length){g.addCls(b)}b=e.style;if(e.style){g.setStyle(b)}c.protoEl=null;if(!c.ownerCt){c.updateLayout()}if(!(c.x&&c.y)&&(c.pageX||c.pageY)){c.setPagePosition(c.pageX,c.pageY)}if(c.disableOnRender){c.onDisable()}else{if(c.enableOnRender){c.onEnable()}}if(Ext.enableAria){c.ariaApplyAfterRenderAttributes()}},afterFirstLayout:function(c,k){var e=this,j=e.x,g=e.y,d,b,h,l,f=e.defaultAlign,a=e.alignOffset;if(!e.ownerLayout){d=j!==undefined;b=g!==undefined}if(e.floating&&(!d||!b)){if(e.floatParent){h=e.floatParent.getTargetEl().getViewRegion();l=e.el.getAlignToXY(e.alignTarget||e.floatParent.getTargetEl(),f,a);h.x=l[0]-h.x;h.y=l[1]-h.y}else{l=e.el.getAlignToXY(e.alignTarget||e.container,f,a);h=e.container.translateXY(l[0],l[1])}j=d?j:h.x;g=b?g:h.y;d=b=true}if(d||b){e.setPosition(j,g)}e.onBoxReady(c,k)},beforeRender:function(){var c=this,d=c.floating,b=c.getComponentLayout(),a;c._renderState=1;c.initBindable();if(c.renderConfigs){c.flushRenderConfigs()}if(c.reference){c.publishState()}if(d){c.addCls("x-layer");a=d.cls;if(a){c.addCls(a)}}c.frame=c.frame||c.alwaysFramed;if(!b.initialized){b.initLayout()}c.initOverflow();c.setUI(c.ui);if(c.disabled){c.disable(true)}},doApplyRenderTpl:function(c,a){var d=a.$comp,b;if(!d.rendered){b=d.initRenderTpl();b.applyOut(a.renderData,c)}},getElConfig:function(){var d=this,f=d.autoEl,c=d.getFrameInfo(),a={tag:"div",tpl:c?d.initFramingTpl(c.table):d.initRenderTpl()},e=d.protoEl,b;d.initStyles(e);e.writeTo(a);e.flush();if(Ext.isString(f)){a.tag=f}else{Ext.apply(a,f)}if(Ext.enableAria&&d.ariaRenderAttributesToElement){Ext.apply(a,d.ariaGetRenderAttributes())}a.id=d.id;if(a.tpl){if(c){a.tplData=b=d.getFrameRenderData();b.renderData=d.initRenderData()}else{a.tplData=d.initRenderData()}}return a},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},getRenderTree:function(){var b=this,a=null;if(!b.hasListeners.beforerender||b.fireEvent("beforerender",b)!==false){b._renderState=1;b.beforeRender();b.rendering=true;b._renderState=2;a=b.getElConfig();if(b.el){a.id=b.$pid=Ext.id(null,b.el.identifiablePrefix)}}return a},initRenderData:function(){var a=this;return Ext.apply({$comp:a,id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame,renderScroller:a.touchScroll,scrollerCls:a.scrollerCls,role:a.ariaRole,childElCls:""},a.renderData)},onRender:function(d,e){var f=this,h=f.x,g=f.y,c=null,b=f.el,a,j;f.applyRenderSelectors();f.rendering=null;f.rendered=true;f._renderState=3;if(f.renderConfigs){f.flushRenderConfigs()}if(h!=null){c={x:h}}if(g!=null){(c=c||{}).y=g}if(!f.getFrameInfo()){a=f.width;j=f.height;if(typeof a==="number"){c=c||{};c.width=a}if(typeof j==="number"){c=c||{};c.height=j}}if(f.touchScroll===1){f.getOverflowEl().disableTouchScroll()}f.lastBox=b.lastBox=c},render:function(c,b){var e=this,d=e.el,h=e.ownerLayout,g,a,f;if(d&&!d.isElement){e.el=d=e.wrapPrimaryEl(d)}Ext.suspendLayouts();c=e.initContainer(c);f=e.getInsertPosition(b);if(!d){a=e.getRenderTree();if(h&&h.transformItemRenderTree){a=h.transformItemRenderTree(a)}if(a){if(f){d=Ext.DomHelper.insertBefore(f,a)}else{d=Ext.DomHelper.append(c,a)}e.wrapPrimaryEl(d);e.cacheRefEls(d)}}else{if(!e.hasListeners.beforerender||e.fireEvent("beforerender",e)!==false){e.beforeRender();e.needsRenderTpl=e.rendering=true;e._renderState=2;e.initStyles(d);if(e.allowDomMove!==false){if(f){c.dom.insertBefore(d.dom,f)}else{c.dom.appendChild(d.dom)}}}else{g=true}}if(d&&!g){e.finishRender(b)}Ext.resumeLayouts(!e.hidden&&!c.isDetachedBody)},ensureAttachedToBody:function(c){var b=this,a;while(b.ownerCt){b=b.ownerCt}if(b.container.isDetachedBody){b.container=a=Ext.getBody();a.appendChild(b.el.dom);if(c){b.updateLayout()}if(typeof b.x=="number"||typeof b.y=="number"){b.setPosition(b.x,b.y)}}},privates:{applyRenderSelectors:function(){var d=this,b=d.renderSelectors,c=d.el,e,a;d.attachChildEls(c);if(b){for(a in b){e=b[a];if(e){d[a]=c.selectNode(e,false)}}}},cacheRefEls:function(e){e=e||this.el;var c=Ext.cache,g=Ext.dom.Element,h=e.isElement?e.dom:e,b=h.querySelectorAll("[data-ref]"),a=b.length,f,d;for(d=0;d<a;d++){f=b[d];if(!c[f.id]){new g(f)}}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(a.renderTo||document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(a,d){var b=d.$comp,c=b.data;if(b.html){Ext.DomHelper.generateMarkup(b.html,a);delete b.html}if(b.tpl){if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}if(c){b.data=c=c.isEntity?c.getData(true):c;b.tpl.applyOut(c,a)}}},doRenderFramingDockedItems:function(a,c,d){var b=c.$comp;if(!b.rendered&&b.doRenderDockedItems){c.renderData.$skipDockedItems=true;b.doRenderDockedItems.call(this,a,c,d)}},flushRenderConfigs:function(){var d=this,g=d.renderConfigs,f=d._renderState,h,c,b,a,e;if(g){for(c=0;c<=f;++c){h=g[c];if(h){g[c]=null;for(b in h){e=h[b];(a||(a={}))[b]=d[b];d[b]=e}}}if(a){d.setConfig(a)}}},finishRender:function(g){var k=this,a=Ext.cache,j,f,b,h,e,d,c;if(!k.el||k.$pid){if(k.container){c=a[k.id];d=c?c.dom:k.container.getById(k.id,true)}else{b=k.$pid||k.id;c=a[b];d=c?c.dom:Ext.getDom(b)}if(!k.el){k.wrapPrimaryEl(d)}else{delete k.$pid;if(!k.el.dom){k.wrapPrimaryEl(k.el)}d.parentNode.insertBefore(k.el.dom,d);j=d;d=k.el.dom;f=d.firstChild;while(j.firstChild){d.insertBefore(j.firstChild,f)}k.el.addCls(j.className);Ext.removeNode(j)}}else{if(k.needsRenderTpl){h=k.initRenderTpl();if(h){e=k.initRenderData();h.insertFirst(k.getTargetEl(),e)}k.cacheRefEls()}}k.el.component=k;if(!k.container){k.container=Ext.get(k.el.dom.parentNode)}if(k.ctCls){k.container.addCls(k.ctCls)}k.onRender(k.container,g);if(!k.overflowInited){k.initOverflow()}k.el.setVisibilityMode(Ext.Element[k.hideMode.toUpperCase()]);if(k.overCls){k.el.hover(k.addOverCls,k.removeOverCls,k)}if(k.hasListeners.render){k.fireEvent("render",k)}k.afterRender();if(k.hasListeners.afterrender){k.fireEvent("afterrender",k)}k.initEvents();if(k.hidden){k.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getFrameRenderData:function(){var c=this,b=c.frameSize,a="";if(c._syncFrameHeight&&c.height){a="height:"+(c.height-b.height)+"px"}return{$comp:c,fgid:c.id+"-frame",ui:c.ui,uiCls:c.uiCls,frameCls:c.frameCls,baseCls:c.baseCls,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom,mcStyle:a,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var q=this,j=q.frameInfoCache,c=q.getFramingInfoCls()+"-frameInfo",r=j[c],h,m,g,s,d,f,k,l,t,p,b,n,a,e,o;if(r==null){h=Ext.fly(q.getStyleProxy(c),"frame-style-el");m=h.getStyle("font-family");if(m){m=m.split("-");g=parseInt(m[1],10);s=parseInt(m[2],10);d=parseInt(m[3],10);f=parseInt(m[4],10);l=parseInt(m[5],10);t=parseInt(m[6],10);p=parseInt(m[7],10);b=parseInt(m[8],10);n=parseInt(m[9],10);a=parseInt(m[10],10);e=parseInt(m[11],10);o=parseInt(m[12],10);r={table:m[0].charAt(0)==="t",vertical:m[0].charAt(1)==="v",top:g,right:s,bottom:d,left:f,width:f+s,height:g+d,border:{top:l,right:t,bottom:p,left:b,width:b+t,height:l+p},padding:{top:n,right:a,bottom:e,left:o,width:o+a,height:n+e}}}else{r=false}j[c]=r}q.frame=!!r;q.frameSize=r;return r},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));a.className=b;return a},getFrameTpl:function(a){return this.getTpl(a?"frameTableTpl":"frameTpl")},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=a.dom?a:Ext.get(a);return b.container},initOverflow:function(){var c=this,a=c.getOverflowStyle(),e=c.scrollFlags,d=c.getOverflowEl(),b=c.touchScroll=(e.y||e.x)&&Ext.supports.touchScroll;if(!d||!d.isElement){return}c.overflowInited=true;if(b===2){d.setStyle("overflow","hidden")}else{d.setStyle(a)}},doRenderPadding:function(a,c){var b=c.$comp;if(b.touchScroll){a.push("padding:",b.unitizeBox(b.padding))}},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},initRenderTpl:function(){var a=this.getTpl("renderTpl");if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent;a.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var m=this,g=m.el.dom,l=m.frameTable,c=m.frameBody,o=c.dom,k=m.getFrameInfo(),p,f,b,e,j,q,r,d,h,a,n;b=document.createElement("div");q=m.getFrameRenderData();d=m.getFrameTpl(k.table);d.insertFirst(b,q);n=b.querySelectorAll("[data-ref]");a=b.querySelector('[data-ref="frameBody"]');for(j=o;j.parentNode!==g;){j=j.parentNode}while(b.firstChild){g.insertBefore(b.firstChild,j)}a.parentNode.replaceChild(o,a);o.className=a.className;c.setSize();p=m.getChildEls();if(l){l.destroy();m.frameTable=null}for(f in p){if(p[f].frame){e=m[f];if(e&&e!==c){e.destroy();m[f]=null}}}for(h=n.length;h--;){f=(r=n[h]).getAttribute("data-ref");if(f!=="frameBody"){m[f]=new Ext.dom.Element(r)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(a){var b=this;Ext.apply(b,a);b.state={};b.mixins.observable.constructor.call(b)},get:function(b,a){return typeof this.state[b]=="undefined"?a:this.state[b]},clear:function(a){var b=this;delete b.state[a];b.fireEvent("statechange",b,a,null)},set:function(a,c){var b=this;b.state[a]=c;b.fireEvent("statechange",b,a,c)},decodeValue:function(f){var c=this,k=/^(a|n|d|b|s|o|e)\:(.*)$/,b=k.exec(unescape(f)),g,d,a,j,e,h;if(!b||!b[1]){return}d=b[1];f=b[2];switch(d){case"e":return null;case"n":return parseFloat(f);case"d":return new Date(Date.parse(f));case"b":return(f=="1");case"a":g=[];if(f!=""){j=f.split("^");e=j.length;for(h=0;h<e;h++){f=j[h];g.push(c.decodeValue(f))}}return g;case"o":g={};if(f!=""){j=f.split("^");e=j.length;for(h=0;h<e;h++){f=j[h];a=f.split("=");g[a[0]]=c.decodeValue(a[1])}}return g;default:return f}},encodeValue:function(e){var f="",d=0,b,a,c;if(e==null){return"e:1"}else{if(typeof e=="number"){b="n:"+e}else{if(typeof e=="boolean"){b="b:"+(e?"1":"0")}else{if(Ext.isDate(e)){b="d:"+e.toUTCString()}else{if(Ext.isArray(e)){for(a=e.length;d<a;d++){f+=this.encodeValue(e[d]);if(d!=a-1){f+="^"}}b="a:"+f}else{if(typeof e=="object"){for(c in e){if(typeof e[c]!="function"&&e[c]!==undefined){f+=c+"="+this.encodeValue(e[c])+"^"}}b="o:"+f.substring(0,f.length-1)}else{b="s:"+e}}}}}}return escape(b)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",stateful:false,saveDelay:100,constructor:function(){var a=this;if(!a.stateEvents){a.stateEvents=[]}if(a.stateful!==false){a.addStateEvents(a.stateEvents);a.initState()}},addStateEvents:function(d){var f=this,c,e,b,a;if(f.stateful&&f.getStateId()){a=(typeof d==="string")?arguments:d;b=f.stateEventsByName||(f.stateEventsByName={});for(c=a.length;c--;){e=a[c];if(e&&!b[e]){b[e]=1;f.on(e,f.onStateChange,f)}}}},onStateChange:function(){var c=this,a=c.saveDelay,d,b;if(!c.stateful){return}if(a){if(!c.stateTask){d=Ext.state.Stateful;b=d.runner||(d.runner=new Ext.util.TaskRunner());c.stateTask=b.newTask({run:c.saveState,scope:c,interval:a,repeat:1,fireIdleEvent:false})}c.stateTask.start()}else{c.saveState()}},saveState:function(){var h=this,b=h.stateful&&h.getStateId(),g=h.hasListeners,c,e,d,f,a,j;if(b){a=h.getState()||{};c=h.getPlugins()||[];for(d=0,f=c.length;d<f;d++){e=c[d];if(e&&e.getState){j=e.getState(a);if(j&&!a[e.ptype]){a[e.ptype]=j}}}if(!g.beforestatesave||h.fireEvent("beforestatesave",h,a)!==false){Ext.state.Manager.set(b,a);if(g.statesave){h.fireEvent("statesave",h,a)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var j=this,b=j.stateful&&j.getStateId(),h=j.hasListeners,a,k,e,g,d,f,c;if(b){k=Ext.state.Manager.get(b);if(k){a=Ext.apply({},k);if(!h.beforestaterestore||j.fireEvent("beforestaterestore",j,k)!==false){d=j.getPlugins()||[];for(e=0,g=d.length;e<g;e++){f=d[e];if(f){c=f.ptype;if(f.applyState){f.applyState(a[c],k)}delete a[c]}}j.applyState(a);if(h.staterestore){j.fireEvent("staterestore",j,k)}}}}},savePropToState:function(f,e,d){var b=this,c=b[f],a=b.initialConfig;if(b.hasOwnProperty(f)){if(!a||a[f]!==c){if(e){e[d||f]=c}return true}}return false},savePropsToState:function(e,c){var b=this,a,d;if(typeof e==="string"){b.savePropToState(e,c)}else{for(a=0,d=e.length;a<d;++a){b.savePropToState(e[a],c)}}return c},destroy:function(){var b=this,a=b.stateTask;if(a){a.destroy();b.stateTask=null}b.clearListeners()}},1,0,0,0,0,0,[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:true,shadow:"sides",constrain:false,config:{activeCounter:0,alwaysOnTop:false},constructor:function(b){var a=this;a.el=new Ext.dom.Layer(Ext.apply({preventSync:true,hideMode:a.hideMode,shadow:(typeof a.shadow!="undefined")?a.shadow:"sides",shadowOffset:a.shadowOffset,constrain:false,fixed:a.fixed,shim:(a.shim===false)?false:undefined},a.floating),b);if(a.modal&&!(Ext.enableFocusManager)){a.mon(a.el,{keydown:a.onKeyDown,scope:a})}a.mon(a.el,{mousedown:a.onMouseDown,scope:a,capture:true});a.floating=true;a.registerWithOwnerCt();a.initHierarchyEvents()},initFloatConstrain:function(){var a=this,b=a.floatParent;if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},initHierarchyEvents:function(){var b=this,a=this.syncHidden;if(!b.hasHierarchyEventListeners){b.mon(Ext.GlobalEvents,{hide:a,collapse:a,show:a,expand:a,added:a,scope:b});b.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var c=this,b=c.ownerCt,a=c.zIndexParent;if(a){a.unregisterFloatingItem(c)}a=c.zIndexParent=c.up("[floating]");c.floatParent=b||a;c.initFloatConstrain();delete c.ownerCt;if(a){a.registerFloatingItem(c)}else{Ext.WindowManager.register(c)}},onKeyDown:function(d){var c=this,a,g,f,b;if(d.getKey()===d.TAB){a=d.shiftKey;g=c.query(":focusable");if(g.length){f=g[0];b=g[g.length-1];if(!a&&b.hasFocus){d.stopEvent();f.focus()}else{if(a&&f.hasFocus){d.stopEvent();b.focus()}}}}},onMouseDown:function(g){var c=this,a=c.focusTask,b=g.parentEvent,d=b&&b.type==="touchstart",f,h;if(c.floating&&(!a||!a.id)){f=g.target;h=c.el.dom;while(!d&&f&&f!==h){if(Ext.fly(f).isFocusable()){d=true}f=f.parentNode}c.toFront(d)}},syncShadow:function(){if(this.floating){this.el.sync(true)}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){delete this.el.preventSync;this.syncShadow()},syncHidden:function(){var c=this,d=c.hidden||!c.rendered,a=c.hierarchicallyHidden=c.isHierarchicallyHidden(),b=c.pendingShow;if(d!==a){if(a){c.hide();c.pendingShow=true}else{if(b){delete c.pendingShow;if(b.length){c.show.apply(c,b)}else{c.show()}}}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingDescendants){a=Math.floor(b.floatingDescendants.setBase(a)/100)*100+10000}return a},doConstrain:function(a){var b=this,c=b.calculateConstrainedPosition(a,null,true);if(c){b.setPosition(c)}},updateActiveCounter:function(a){var b=this.zIndexParent;if(b&&this.bringParentToFront!==false){b.setActiveCounter(++Ext.ZIndexManager.activeCounter)}if(b=this.zIndexManager){b.onComponentUpdate(this)}},updateAlwaysOnTop:function(a){var b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},toFront:function(b){var a=this;if(a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)){if(a.hasListeners.tofront){a.fireEvent("tofront",a,a.el.getZIndex())}}return a},setActive:function(c,d,a){var b=this;if(c){if(b.el.shadow&&!b.maximized){b.el.enableShadow(true)}if(a){b.previousFocus=Ext.Element.getActiveElement();b.focus(false,true)}else{b.previousFocus=null}b.fireEvent("activate",b)}else{if(b.isWindow&&(d&&d.isWindow)&&b.hideShadowOnDeactivate){b.el.disableShadow()}b.fireEvent("deactivate",b);if(b.previousFocus&&(!Ext.isIE8||Ext.fly(b.previousFocus).isFocusable())){b.previousFocus.focus();b.previousFocus=null}}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b;if(a.isVisible()){b=a.getAlignToXY(a.container,"c-c");a.setPagePosition(b)}else{a.needsCenter=true}return a},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(c){var f=this,e=f.floatParent,b=e?e.getTargetEl():f.container,a=b.getViewSize(),d=e||(b.dom!==document.body)?[0,0]:b.getXY();a.x=d[0];a.y=d[1];f.setBox(a,c)}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",focusable:false,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.addFocusListener()},destroyFocusable:function(){Ext.destroy(this.focusListeners);delete this.focusTask},enableFocusable:Ext.emptyFn,disableFocusable:function(){var c=this,b=c.focusCls,a=c.getFocusEl();if(b&&a){a.removeCls(c.removeClsWithUI(b,true))}},isFocusable:function(){var b=this,a;if(!b.focusable){return false}a=b.getFocusEl();if(a&&b.canFocus()){return a.isFocusable(true)}},canFocus:function(){var a=this;return a.focusable&&a.rendered&&!a.destroying&&!a.isDestroyed&&!a.disabled&&a.isVisible(true)},addFocusListener:function(){var d=this,a=d.tabIndex,c=d.getFocusEl(),b;if(c){if(c.isComponent){return c.addFocusListener()}b=c.needsTabIndex()&&!c.dom.hasAttribute("tabindex");if(!d.focusListenerAdded&&(!b||a!=null)){if(b&&!c.dom.getAttribute("tabIndex")){c.dom.setAttribute("tabIndex",a)}d.focusListeners=c.on({focus:d.onFocus,blur:d.onBlur,scope:d,destroyable:true});c.dom.setAttribute(Ext.Component.componentIdAttribute,d.id);d.focusListenerAdded=true}}},focus:function(f,c,h,d){var e=this,a,g,b;if(!e.focusable||e.isDestroyed||e.destroying){return}if(c){e.getFocusTask().delay(Ext.isNumber(c)?c:10,e.focus,e,[f,false,h,d]);return e}e.cancelFocus();if(e.canFocus()&&(a=e.getFocusEl())){if(a.isComponent){return a.focus(f,c,h,d)}g=a.dom;if(g){if(a.needsTabIndex()&&!g.hasAttribute("tabindex")){g.tabIndex=-1}if(e.floating){b=e.container.dom.scrollTop}a.focus();if(f){if(Ext.isArray(f)){if(e.selectText){e.selectText.apply(e,f)}}else{g.select()}}Ext.callback(h,d)}if(e.floating){if(e!==e.zIndexManager.getActive()){e.toFront(true)}if(b!==undefined){e.container.dom.scrollTop=b}}}return e},cancelFocus:function(){var a=this.getFocusTask();if(a){a.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable||d.destroying){return}d.beforeBlur(f);if(b){b.beforeFocusableChildBlur(d,f)}a=d.getFocusClsEl();if(c&&a){a.removeCls(d.removeClsWithUI(c,true))}if(d.validateOnBlur){d.validate()}d.hasFocus=false;d.fireEvent("blur",d,f);d.postBlur(f);if(b){b.afterFocusableChildBlur(d,f)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable){return}if(d.canFocus()){d.beforeFocus(f);if(b){b.beforeFocusableChildFocus(d,f)}a=d.getFocusClsEl();if(c&&a){a.addCls(d.addClsWithUI(c,true))}if(!d.hasFocus){d.hasFocus=true;d.fireEvent("focus",d,f)}d.postFocus(f);if(b){b.afterFocusableChildFocus(d,f)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var c=this,b,a;if(!c.focusable){return}b=c.getFocusEl();if(b){a=b.isComponent?b.getTabIndex():b.getAttribute("tabindex");c.tabIndex=a}else{a=c.tabIndex}return a},setTabIndex:function(c){var b=this,a;if(!b.focusable){return}b.tabIndex=c;a=b.getFocusEl();if(a){if(a.isComponent){a.setTabIndex(c)}else{a.set({tabindex:c})}}},privates:{privacy:"framework",getFocusEl:Ext.privateFn,getFocusClsEl:function(){return this.getFocusEl()},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},blur:function(){var b=this,a;if(!b.focusable||!b.rendered){return}a=b.getFocusEl();if(a){b.blurring=true;a.blur();delete b.blurring}return b},disableTabbing:function(){var c=this,b=c.el,a;if(!c.focusable){return}a=c.getFocusEl();if(b){b.saveChildrenTabbableState()}if(a){a.saveTabbableState()}},enableTabbing:function(){var c=this,b=c.el,a;if(!c.focusable){return}a=c.getFocusEl();if(a){a.restoreTabbableState()}if(b){b.restoreChildrenTabbableState()}}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}}));(Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,componentIdAttribute:"componentId",cancelLayout:function(a,c){var b=this.runningLayoutContext||this.pendingLayouts;if(b){b.cancelComponent(a,false,c)}},flushLayouts:function(){var b=this,a=b.pendingLayouts;if(a&&a.invalidQueue.length){b.pendingLayouts=null;b.runningLayoutContext=a;Ext.override(a,{runComplete:function(){b.runningLayoutContext=null;var c=this.callParent();if(Ext.GlobalEvents.hasListeners.afterlayout){Ext.GlobalEvents.fireEvent("afterlayout")}return c}});a.run()}},resumeLayouts:function(a){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(a){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(b,e){var c=this,a=c.runningLayoutContext,d;if(a){a.queueInvalidate(b)}else{d=c.pendingLayouts||(c.pendingLayouts=new Ext.layout.Context());d.queueInvalidate(b);if(!e&&!c.layoutSuspendCount&&!b.isLayoutSuspended()){c.flushLayouts()}}}},$configPrefixed:false,$configStrict:false,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null},defaultBindProperty:"html",alignTarget:null,autoRender:false,autoShow:false,baseCls:"x-component",childEls:{frameTable:{frame:true},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var a=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){a.push("p")}return new RegExp("^(?:"+a.join("|")+")$","i")}()),disabledCls:"x-item-disabled",draggable:false,floating:false,hidden:false,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:true,synthetic:false,tplWriteMode:"overwrite",ui:"default",uiCls:[],weight:null,allowDomMove:true,autoGenId:false,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:false,frameSize:null,horizontalPosProp:"left",isComponent:true,_isLayoutRoot:false,layoutSuspendCount:0,liquidLayout:false,maskOnDisable:true,offsetsCls:"x-hidden-offsets",rendered:false,rootCls:"x-body",scrollerCls:"x-touch-scroller",scrollerSelector:".x-touch-scroller",validIdRe:Ext.validIdRe,constructor:function(d){var f=this,e,a,c,b;d=d||{};if(d.initialConfig){if(d.isAction){f.baseAction=d}d=d.initialConfig}else{if(d.tagName||d.dom||Ext.isString(d)){d={applyTo:d,id:d.id||d}}}f.initialConfig=d;f.getId();f.protoEl=new Ext.util.ProtoElement();f.initConfig(d);c=f.xhooks;if(c){delete f.xhooks;Ext.override(f,c)}f.mixins.elementCt.constructor.call(f);f.setupProtoEl();if(f.cls){f.initialCls=f.cls;f.protoEl.addCls(f.cls)}if(f.style){f.initialStyle=f.style;f.protoEl.setStyle(f.style)}f.renderData=f.renderData||{};f.initComponent();if(!f.preventRegister){Ext.ComponentManager.register(f)}f.mixins.state.constructor.call(f);f.addStateEvents("resize");b=f.getController();if(b){b.init(f)}if(f.plugins){for(e=0,a=f.plugins.length;e<a;e++){f.plugins[e]=f.initPlugin(f.plugins[e])}}f.loader=f.getLoader();if(f.renderTo){f.render(f.renderTo)}if(f.autoShow&&!f.initOwnerCt){f.show()}if(f.baseAction){f.baseAction.addComponent(f)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.addCls.apply(b,arguments);return c},addClsWithUI:function(c,h){var g=this,f=[],e=0,d=g.uiCls=Ext.Array.clone(g.uiCls),b=g.activeUI,a,j;if(typeof c==="string"){c=(c.indexOf(" ")<0)?[c]:Ext.String.splitWords(c)}a=c.length;for(;e<a;e++){j=c[e];if(j&&!g.hasUICls(j)){d.push(j);if(b){f=f.concat(g.addUIClsToElement(j))}}}if(h!==true&&b){g.addCls(f)}return f},afterComponentLayout:function(c,a,b,e){var d=this;if(++d.componentLayoutCounter===1){d.afterFirstLayout(c,a)}if(c!==b||a!==e){d.onResize(c,a,b,e)}if(this.floating){this.onAfterFloatLayout()}},addListener:function(b,f,e,a){var g=this,d,c;if(Ext.isString(b)&&(Ext.isObject(f)||a&&a.element)){if(a.element){d=f;f={};f[b]=d;b=a.element;if(e){f.scope=e}for(c in a){if(a.hasOwnProperty(c)){if(g.eventOptionsRe.test(c)){f[c]=a[c]}}}}if(g[b]&&g[b].on){g.mon(g[b],f)}else{g.afterRenderEvents=g.afterRenderEvents||{};if(!g.afterRenderEvents[b]){g.afterRenderEvents[b]=[]}g.afterRenderEvents[b].push(f)}return}return g.mixins.observable.addListener.apply(g,arguments)},addPlugin:function(b){var a=this;b=a.constructPlugin(b);if(a.plugins){a.plugins.push(b)}else{a.plugins=[b]}if(a.pluginsInitialized){a.initPlugin(b)}return b},addPropertyToState:function(e,d,c){var b=this,a=arguments.length;if(a===3||b.hasOwnProperty(d)){if(a<3){c=b[d]}if(c!==b.initialConfig[d]){(e||(e={}))[d]=c}}return e},addUIClsToElement:function(h){var e=this,b=e.baseCls+"-"+e.ui+"-"+h,a=["x-"+h,e.baseCls+"-"+h,b],d,g,c,f;if(e.rendered&&e.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=e.getChildEls();for(g in d){f=d[g].frame;if(f&&f!==true){c=e[g];if(c){c.addCls(b+f)}}}}return a},removeUIClsFromElement:function(h){var e=this,b=e.baseCls+"-"+e.ui+"-"+h,a=["x-"+h,e.baseCls+"-"+h,b],d,g,c,f;if(e.rendered&&e.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=e.getChildEls();for(g in d){f=d[g].frame;if(f&&f!==true){c=e[g];if(c){c.removeCls(b+f)}}}}return a},adjustPosition:function(a,d){var b=this,c;if(b.isContainedFloater()){c=b.floatParent.getTargetEl().getViewRegion();a+=c.left;d+=c.top}return{x:a,y:d}},afterHide:function(a,c){var d=this,b=d.focusableContainer;d.hiddenByLayout=null;if(this.ownerLayout){this.updateLayout({isRoot:false})}Ext.callback(a,c||d);d.fireEvent("hide",d);d.fireHierarchyEvent("hide");if(b){b.onFocusableChildHide(d)}},afterSetPosition:function(a,c){var b=this;b.onPosition(a,c);if(b.hasListeners.move){b.fireEvent("move",b,a,c)}},afterShow:function(g,b,e){var f=this,h=f.el,a,c,d;g=f.getAnimateTarget(g);if(!f.ghost){g=null}if(g){c={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};a={x:g.getX(),y:g.getY(),width:g.dom.offsetWidth,height:g.dom.offsetHeight};h.addCls(f.offsetsCls);d=f.ghost();d.el.stopAnimation();d.setX(-10000);f.ghostBox=c;d.el.animate({from:a,to:c,listeners:{afteranimate:function(){delete d.componentLayout.lastComponentSize;f.unghost();delete f.ghostBox;h.removeCls(f.offsetsCls);f.onShowComplete(b,e)}}})}else{f.onShowComplete(b,e)}f.fireHierarchyEvent("show")},animate:function(c){var t=this,f,l,k,a,d,b,s,p,m,e,q,n,g,o,r,j;c=c||{};d=c.to||{};if(Ext.fx.Manager.hasFxBlock(t.id)){return t}f=Ext.isDefined(d.width);if(f){a=Ext.Number.constrain(d.width,t.minWidth,t.maxWidth)}l=Ext.isDefined(d.height);if(l){k=Ext.Number.constrain(d.height,t.minHeight,t.maxHeight)}if(!c.dynamic&&(f||l)){p=(c.from?c.from.width:undefined)||t.getWidth();m=p;e=(c.from?c.from.height:undefined)||t.getHeight();q=e;n=false;if(l&&k>e){q=k;n=true}if(f&&a>p){m=a;n=true}if(l||f){j=t.el.getStyle("overflow");if(j!=="hidden"){t.el.setStyle("overflow","hidden")}}if(n){b=!Ext.isNumber(t.width);s=!Ext.isNumber(t.height);t.setSize(m,q);t.el.setSize(p,e);if(b){delete t.width}if(s){delete t.height}}if(f){d.width=a}if(l){d.height=k}}g=t.constrain;o=t.constrainHeader;if(g||o){t.constrain=t.constrainHeader=false;r=c.callback;c.callback=function(){t.constrain=g;t.constrainHeader=o;if(r){r.call(c.scope||t,arguments)}if(j!=="hidden"){t.el.setStyle("overflow",j)}}}return t.mixins.animate.animate.apply(t,arguments)},beforeComponentLayout:function(){return true},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(j,g,b){var f=this,h=null,d,c,a,e;if(j){if(Ext.isNumber(d=j[0])){b=g;g=j[1];j=d}else{if((d=j.x)!==undefined){b=g;g=j.y;j=d}}}if(f.constrain||f.constrainHeader){h=f.calculateConstrainedPosition(null,[j,g],true);if(h){j=h[0];g=h[1]}}c=(j!==undefined);a=(g!==undefined);if(c||a){f.x=j;f.y=g;e=f.adjustPosition(j,g);h={x:e.x,y:e.y,anim:b,hasX:c,hasY:a}}return h},beforeShow:Ext.emptyFn,bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.getBubbleTarget()}return this},cloneConfig:function(c){c=c||{};var d=c.id||Ext.id(),a=Ext.applyIf(c,this.initialConfig),b;a.id=d;b=Ext.getClass(this);return new b(a)},destroy:function(){var f=this,c=f.renderSelectors,b=f.getConfig("viewModel",true),g=f.getConfig("session",true),a,e,d;if(!f.isDestroyed){if(!f.hasListeners.beforedestroy||f.fireEvent("beforedestroy",f)!==false){f.destroying=true;e=f.floatParent||f.ownerCt;if(f.floating){delete f.floatParent;if(f.zIndexManager){f.zIndexManager.unregister(f);f.zIndexManager=null}}f.removeBindings();f.beforeDestroy();if(b&&b.isViewModel){b.destroy();f.viewModel=null}if(g&&g.isSession){if(g.getAutoDestroy()){g.destroy()}f.session=null}if(e&&e.remove){e.remove(f,false)}f.stopAnimation();f.onDestroy();Ext.destroy(f.plugins);f.componentLayout=null;if(f.hasListeners.destroy){f.fireEvent("destroy",f)}if(!f.preventRegister){Ext.ComponentManager.unregister(f)}f.mixins.state.destroy.call(f);f.clearListeners();if(f.rendered){if(!f.preserveElOnDestroy){f.el.destroy()}f.mixins.elementCt.destroy.call(f);if(c){for(a in c){if(c.hasOwnProperty(a)){d=f[a];if(d){delete f[a];d.destroy()}}}}f.data=f.el=f.frameBody=f.rendered=null}f.destroying=false;f.isDestroyed=true}}},disable:function(b){var c=this,a=c.focusableContainer;c.enableOnRender=false;c.addCls(c.disabledCls);if(c.rendered){c.onDisable()}else{c.disableOnRender=true}c.disabled=true;if(b!==true){delete c.resetDisable;c.fireEvent("disable",c)}if(a){a.onFocusableChildDisable(c)}return c},enable:function(b){var c=this,a=c.focusableContainer;c.disableOnRender=false;c.removeCls(c.disabledCls);if(c.rendered){c.onEnable()}else{c.enableOnRender=true}c.disabled=false;delete c.resetDisable;if(b!==true){c.fireEvent("enable",c)}if(a){a.onFocusableChildEnable(c)}return c},findParentBy:function(a){var b;for(b=this.getRefOwner();b&&!a(b,this);b=b.getRefOwner()){}return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},findPlugin:function(d){var b,a=this.plugins,c=a&&a.length;for(b=0;b<c;b++){if(a[b].ptype===d){return a[b]}}},getAnimateTarget:function(a){a=a||this.animateTarget;if(a){a=a.isComponent?a.getEl():Ext.get(a)}return a||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent"))}return a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(a){var c=this,b=c.componentLayout;if(c.hidden){a.hidden=true}if(c.collapseImmune){a.collapseImmune=true}if(c.modelValidation!==undefined){a.modelValidation=c.modelValidation}c.mixins.bindable.initInheritedState.call(c,a);if(b&&b.initInheritedState){b.initInheritedState(a)}},getId:function(){var a=this,b;if(!(a.id||(a.id=a.initialConfig.id))){b=a.getXType();if(b){b=b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{b=Ext.name.toLowerCase()+"-comp"}a.id=b+"-"+a.getAutoId()}return a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var b=this,a=b.loader;if(a){if(!a.isLoader){b.loader=new Ext.ComponentLoader(Ext.apply({target:b},a))}else{a.setTarget(b)}return b.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(b){var c,a=this.plugins,d=a&&a.length;for(c=0;c<d;c++){if(a[c].pluginId===b){return a[c]}}return null},getPosition:function(a){var b=this,d,c=b.isContainedFloater(),e;if((a===true)&&!c){return[b.getLocalX(),b.getLocalY()]}d=b.getXY();if((a===true)&&c){e=b.floatParent.getTargetEl().getViewRegion();d[0]-=e.left;d[1]-=e.top}return d},getScrollX:function(){var a=this,b=a.scrollManager;return b?b.getPosition().x:a.getScrollLeft()},getScrollY:function(){var a=this,b=a.scrollManager;return b?b.getPosition().y:a.getOverflowEl().getScrollTop()},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(k){var o=this,a=Ext.layout.SizeModel,d=o.componentLayout.ownerContext,b=o.width,q=o.height,r,c,g,f,h,p,m,n,l,j,e=o.floating||o.floated;if(d){j=d.widthModel;h=d.heightModel}if(!j||!h){g=((r=typeof b)=="number");f=((c=typeof q)=="number");l=e||!(p=o.ownerLayout);if(l){m=Ext.layout.Layout.prototype.autoSizePolicy;n=e?3:o.shrinkWrap;if(g){j=a.configured}if(f){h=a.configured}}else{m=p.getItemSizePolicy(o,k);n=p.isItemShrinkWrap(o)}if(d){d.ownerSizePolicy=m}n=(n===true)?3:(n||0);if(l&&n){if(b&&r=="string"){n&=2}if(q&&c=="string"){n&=1}}if(n!==3){if(!k){k=o.ownerCt&&o.ownerCt.getSizeModel()}if(k){n|=(k.width.shrinkWrap?1:0)|(k.height.shrinkWrap?2:0)}}if(!j){if(!m.setsWidth){if(g){j=a.configured}else{j=(n&1)?a.shrinkWrap:a.natural}}else{if(m.readsWidth){if(g){j=a.calculatedFromConfigured}else{j=(n&1)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{j=a.calculated}}}if(!h){if(!m.setsHeight){if(f){h=a.configured}else{h=(n&2)?a.shrinkWrap:a.natural}}else{if(m.readsHeight){if(f){h=a.calculatedFromConfigured}else{h=(n&2)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{h=a.calculated}}}}return j.pairsByHeightOrdinal[h.ordinal]},getState:function(){var b=this,c=null,a=b.getSizeModel();if(a.width.configured){c=b.addPropertyToState(c,"width")}if(a.height.configured){c=b.addPropertyToState(c,"height")}return c},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var c=this.self,d,b,a;if(!c.xtypes){d=[];b=this;while(b){a=b.xtypes;if(a!==undefined){d.unshift.apply(d,a)}b=b.superclass}c.xtypeChain=d;c.xtypes=d.join("/")}return c.xtypes},hasCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;return b.hasCls.apply(b,arguments)},hasUICls:function(a){var b=this,c=b.uiCls||[];return Ext.Array.contains(c,a)},hide:function(e,b,c){var d=this,a;if(d.pendingShow){delete d.pendingShow}if(!(d.rendered&&!d.isVisible())){a=(d.fireEvent("beforehide",d)!==false);if(d.hierarchicallyHidden||a){d.hidden=true;d.getInherited().hidden=true;if(d.rendered){d.onHide.apply(d,arguments)}}}return d},initComponent:function(){var c=this,b=c.width,a=c.height;if(c.plugins&&!c.plugins.processed){c.plugins=c.constructPlugins()}c.pluginsInitialized=true;if(b!=null||a!=null){c.setSize(b,a)}if(c.listeners){c.on(c.listeners);c.listeners=null}if(c.focusable){c.initFocusable()}},initEvents:function(){var e=this,g=e.afterRenderEvents,b,d,f,c,a;if(g){for(f in g){d=e[f];if(d&&d.on){b=g[f];for(c=0,a=b.length;c<a;++c){e.mon(d,b[c])}}}}if(e.focusable){e.initFocusableEvents()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isDescendantOf:function(a){return !!this.findParentBy(function(b){return b===a})},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var d=this,c=false,a,b;for(;(a=d.ownerCt||d.floatParent);d=a){b=a.getInherited();if(b.hidden){c=true;break}if(d.getInherited().collapseImmune){if(a.collapsed&&!d.collapseImmune){c=true;break}}else{c=!!b.collapsed;break}}return c},isLayoutRoot:function(){var a=this,b=a.ownerLayout;if(!b||a._isLayoutRoot||a.floating){return true}return b.isItemLayoutRoot(a)},isLayoutSuspended:function(){var a=this,b;while(a){if(a.layoutSuspendCount||a.suspendLayout){return true}b=a.ownerLayout;if(!b){break}a=b.owner}return false},isVisible:function(a){var b=this,c;if(b.hidden||!b.rendered||b.isDestroyed){c=true}else{if(a){c=b.isHierarchicallyHidden()}}return !c},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},isMasked:function(a){var b=this;return b.masked||(b.loadMask&&b.loadMask.isVisible())||(a&&!!b.getInherited().masked)},setMasked:function(c){var b=this,a=b.focusableContainer;if(c){b.masked=true;b.getInherited().masked=c}else{b.masked=false;delete b.getInherited().masked}if(a){a.onFocusableChildMasked(b,c)}return b},mask:function(e,c,a){var b=this.lastBox,d=this.getMaskTarget()||this.el;if(b){a=b.height}d.mask(e,c,a);this.setMasked(true)},nextNode:function(d,h){var b=this,c=b.ownerCt,j,e,g,f,a;if(h&&b.is(d)){return b}if(c){for(e=c.items.items,f=Ext.Array.indexOf(e,b)+1,g=e.length;f<g;f++){a=e[f];if(a.is(d)){return a}if(a.down){j=a.down(d);if(j){return j}}}return c.nextNode(d)}return null},nextSibling:function(b){var f=this.ownerCt,d,e,a,g;if(f){d=f.items;a=d.indexOf(this)+1;if(a){if(b){for(e=d.getCount();a<e;a++){if((g=d.getAt(a)).is(b)){return g}}}else{if(a<d.getCount()){return d.getAt(a)}}}}return null},onAdded:function(b,e,a){var d=this,c=d.inheritedState;d.ownerCt=b;if(c&&a){d.invalidateInheritedState()}if(d.reference){d.fixReference()}if(d.hasListeners&&d.hasListeners.added){d.fireEvent("added",d,b,e)}if(Ext.GlobalEvents.hasListeners.added){d.fireHierarchyEvent("added")}},onRemoved:function(b){var a=this,c;if(Ext.GlobalEvents.hasListeners.removed){a.fireHierarchyEvent("removed")}if(a.hasListeners.removed){a.fireEvent("removed",a,a.ownerCt)}if(a.reference){c=a.lookupReferenceHolder();if(c){c.clearReference(a)}}if(!b){a.removeBindings()}if(a.inheritedState&&!b){a.invalidateInheritedState()}a.ownerCt=a.ownerLayout=null},onBoxReady:function(b,a){var c=this;if(c.resizable){c.initResizable(c.resizable)}if(c.draggable){c.initDraggable()}if(c.touchScroll){c.initScrollManager()}if(c.hasListeners.boxready){c.fireEvent("boxready",c,b,a)}},onDestroy:function(){var c=this,b=c.controller,a=c.focusableContainer;if(c.bind){c.removeBindings()}if(b){b.destroy()}c.controller=null;if(c.rendered){Ext.destroy(c.dd,c.resizer,c.proxy,c.proxyWrap,c.resizerComponent)}if(a){a.onFocusableChildDestroy(c)}if(c.focusable){c.destroyFocusable()}Ext.destroy(c.componentLayout,c.loadMask,c.floatingDescendants)},onDisable:function(){var a=this,b,c;if(a.focusable){a.disableFocusable()}if(a.maskOnDisable){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=true}if(!a.nonMaskableRe.test(c)){a.mask()}}},onEnable:function(){var a=this,b,c;if(a.focusable){a.enableFocusable()}if(a.maskOnDisable){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=false}if(!a.nonMaskableRe.test(c)){a.unmask()}}},onHide:function(h,a,e){var f=this,c,d,b,g=Ext.Element.getActiveElement();if(g===f.el||f.el.contains(g)){Ext.fly(g).blur()}h=f.getAnimateTarget(h);if(!f.ghost){h=null}if(h){b={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};c=f.ghost();c.el.stopAnimation();d=f.getSize();c.el.animate({to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();c.setHiddenState(true);c.el.setSize(d);f.afterHide(a,e)}}})}f.el.hide();if(!h){f.afterHide(a,e)}},onPosition:Ext.emptyFn,onResize:function(c,a,b,e){var d=this;if(d.floating&&d.constrain){d.doConstrain()}if(b){d.refreshScroll()}if(d.hasListeners.resize){d.fireEvent("resize",d,c,a,b,e)}},onShow:function(){var a=this;a.el.show();a.updateLayout({isRoot:false});if(a.floating){if(a.maximized){a.fitContainer()}else{if(a.constrain){a.doConstrain()}}}},onShowComplete:function(a,c){var d=this,b=d.focusableContainer;if(d.floating){d.onFloatShow()}Ext.callback(a,c||d);d.fireEvent("show",d);if(b){b.onFocusableChildShow(d)}delete d.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(b,d){var h=this,g=h.ownerCt,a,f,e,c;if(d&&h.is(b)){return h}if(g){for(f=g.items.items,e=Ext.Array.indexOf(f,h)-1;e>-1;e--){c=f[e];if(c.query){a=c.query(b);a=a[a.length-1];if(a){return a}}if(c.is(b)){return c}}return g.previousNode(b,true)}return null},previousSibling:function(b){var e=this.ownerCt,d,a,f;if(e){d=e.items;a=d.indexOf(this);if(a!=-1){if(b){for(--a;a>=0;a--){if((f=d.getAt(a)).is(b)){return f}}}else{if(a){return d.getAt(--a)}}}}return null},registerFloatingItem:function(b){var a=this;if(!a.floatingDescendants){a.floatingDescendants=new Ext.ZIndexManager(a)}a.floatingDescendants.register(b)},removeCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.removeCls.apply(b,arguments);return c},removeClsWithUI:function(d,k){var j=this,h=[],f=0,a=Ext.Array,g=a.remove,e=j.uiCls=a.clone(j.uiCls),c=j.activeUI,b,l;if(typeof d==="string"){d=(d.indexOf(" ")<0)?[d]:Ext.String.splitWords(d)}b=d.length;for(f=0;f<b;f++){l=d[f];if(l&&j.hasUICls(l)){g(e,l);if(c){h=h.concat(j.removeUIClsFromElement(l))}}}if(k!==true&&c){j.removeCls(h)}return h},resumeLayouts:function(b){var a=this;if(!a.rendered){return}if(a.layoutSuspendCount&&!--a.layoutSuspendCount){a.suspendLayout=false;if(b&&!a.isLayoutSuspended()){a.updateLayout(b)}}},scrollBy:function(b,a,c){var d=this,e=d.scrollManager;if(e){e.scrollBy(b,a,c)}else{d.doScrollBy(b,a,c)}},scrollTo:function(a,e,b){var c=this,d=c.scrollManager;if(d){d.scrollTo(a,e,b)}else{c.doScrollTo(a,e,b)}},setAutoScroll:function(a){var b=this;b.autoScroll=!!a;if(b.rendered){b.getOverflowEl().setStyle(b.getOverflowStyle())}b.updateLayout();return b},setBorder:function(b,d){var c=this,a=!!d;if(c.rendered||a){if(!a){d=c.el}if(!b){b=0}else{if(b===true){b="1px"}else{b=this.unitizeBox(b)}}d.setStyle("border-width",b);if(!a){c.updateLayout()}}c.border=b},setDock:function(c){var b=this,a=b.ownerCt;if(c!==b.dock){if(a&&a.moveDocked){a.moveDocked(b,c)}else{b.dock=c}}return b},setDisabled:function(a){return this[a?"disable":"enable"]()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(undefined,a)},setLoading:function(c,d){var b=this,a={target:b};if(b.rendered){if(c!==false){if(Ext.isString(c)){a.msg=c}else{Ext.apply(a,c)}if(!b.loadMask||!b.loadMask.isLoadMask){if(d&&a.useTargetEl==null){a.useTargetEl=true}b.loadMask=new Ext.LoadMask(a)}else{Ext.apply(b.loadMask,a)}if(b.loadMask.isVisible()){b.loadMask.afterShow()}else{b.loadMask.show()}}else{if(b.loadMask&&b.loadMask.isLoadMask){b.loadMask.hide()}}}return b.loadMask},setMargin:function(c,b){var a=this;if(a.rendered){if(!c&&c!==0){c=""}else{if(c===true){c=5}c=this.unitizeBox(c)}a.getTargetEl().setStyle("margin",c);if(!b){a.updateLayout()}}else{a.margin=c}},setOverflowXY:function(b,a){var d=this,e=arguments.length,c=d.ownerCt;if(e){d.overflowX=b||"";if(e>1){d.overflowY=a||""}}if(d.rendered){d.getOverflowEl().setStyle(d.getOverflowStyle())}(c||d).updateLayout();return d},setPagePosition:function(a,f,b){var c=this,d,e;if(Ext.isArray(a)){f=a[1];a=a[0]}c.pageX=a;c.pageY=f;if(c.floating){if(c.isContainedFloater()){e=c.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(e.left)){a-=e.left}if(Ext.isNumber(f)&&Ext.isNumber(e.top)){f-=e.top}}else{d=c.el.translateXY(a,f);a=d.x;f=d.y}c.setPosition(a,f,b)}else{d=c.el.translateXY(a,f);c.setPosition(d.x,d.y,b)}return c},setPosition:function(a,e,b){var c=this,d=c.beforeSetPosition.apply(c,arguments);if(d&&c.rendered){a=d.x;e=d.y;if(b){if(a!==c.getLocalX()||e!==c.getLocalY()){c.stopAnimation();c.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(c.afterSetPosition,c,[a,e])},to:{left:a,top:e}},b))}}else{c.setLocalXY(a,e);c.afterSetPosition(a,e)}}return c},setScrollX:function(a){var b=this,c=b.scrollManager;if(c){c.scrollTo(a,c.getPosition().y)}else{b.setScrollLeft(a)}},setScrollY:function(c){var a=this,b=a.scrollManager;if(b){b.scrollTo(b.getPosition().x,c)}else{a.getOverflowEl().setScrollTop(c)}},setSize:function(b,a){var c=this;if(b&&typeof b=="object"){a=b.height;b=b.width}if(typeof b=="number"){c.width=Ext.Number.constrain(b,c.minWidth,c.maxWidth)}else{if(b===null){delete c.width}}if(typeof a=="number"){c.height=Ext.Number.constrain(a,c.minHeight,c.maxHeight)}else{if(a===null){delete c.height}}if(c.rendered&&c.isVisible()){if(c.liquidLayout){c.el.setSize(c.width,c.height)}c.updateLayout(c._notAsLayoutRoot)}return c},setStyle:function(d,c){var b=this,a=b.el||b.protoEl;a.setStyle(d,c);return b},setUI:function(c){var b=this,e=b.uiCls,d=b.activeUI,a;if(c===d){return}if(d){a=b.removeClsWithUI(e,true);if(a.length){b.removeCls(a)}b.removeUIFromElement()}else{b.uiCls=[]}b.ui=c;b.activeUI=c;b.addUIToElement();a=b.addClsWithUI(e,true);if(a.length){b.addCls(a)}if(b.rendered){b.updateLayout()}},setVisible:function(a){return this[a?"show":"hide"]()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(d,a,b){var c=this,e=c.rendered;if(c.hierarchicallyHidden||(c.floating&&!e&&c.isHierarchicallyHidden())){if(!e){c.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;c.pendingShow=arguments}else{c.pendingShow=true}}else{if(e&&c.isVisible()){if(c.floating){c.onFloatShow()}}else{if(c.fireEvent("beforeshow",c)!==false){c.hidden=false;delete this.getInherited().hidden;Ext.suspendLayouts();if(!e&&(c.autoRender||c.floating)){c.doAutoRender();e=c.rendered}if(e){c.beforeShow();Ext.resumeLayouts();c.onShow.apply(c,arguments);c.afterShow.apply(c,arguments)}else{Ext.resumeLayouts(true)}}else{c.onShowVeto()}}}return c},showAt:function(a,d,b){var c=this;if(!c.rendered&&(c.autoRender||c.floating)){c.x=a;c.y=d;return c.show()}if(c.floating){c.setPosition(a,d,b)}else{c.setPagePosition(a,d,b)}c.show()},showBy:function(b,d,c){var a=this;if(a.floating&&b){a.alignTarget=b;if(d){a.defaultAlign=d}if(c){a.alignOffset=c}a.show();if(!a.hidden){a.alignTo(b,d||a.defaultAlign,c||a.alignOffset)}}return a},suspendLayouts:function(){var a=this;if(!a.rendered){return}if(++a.layoutSuspendCount===1){a.suspendLayout=true}},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(false)},unregisterFloatingItem:function(b){var a=this;if(a.floatingDescendants){a.floatingDescendants.unregister(b)}},up:function(d,e){var c=this.getRefOwner(),b=typeof e==="string",g=typeof e==="number",a=e&&e.isComponent,f=0;if(d){for(;c;c=c.getRefOwner()){f++;if(d.isComponent){if(c===d){return c}}else{if(Ext.ComponentQuery.is(c,d)){return c}}if(b&&c.is(e)){return}if(g&&f===e){return}if(a&&c===e){return}}}return c},update:function(c,f,j){var h=this,k=(h.tpl&&!Ext.isString(c)),g=h.scrollManager,b=h.focusableContainer,e,a,d;if(k){h.data=(c&&c.isEntity)?c.getData(true):c}else{h.html=Ext.isObject(c)?Ext.DomHelper.markup(c):c}if(h.rendered){e=h.getSizeModel();a=e.width.shrinkWrap||e.height.shrinkWrap;if(h.isContainer){d=h.layout.getRenderTarget();a=a||h.items.items.length>0}else{d=h.touchScroll?h.getScrollerEl():h.getTargetEl()}if(k){h.tpl[h.tplWriteMode](d,h.data||{})}else{d.setHtml(h.html,f,j)}if(a){h.updateLayout()}if(g){g.refresh()}if(b){b.onFocusableChildUpdate(h)}}},setHtml:function(a){this.update(a)},applyData:function(a){this.update(a)},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},_asLayoutRoot:{isRoot:true},_notAsLayoutRoot:{isRoot:false},updateLayout:function(c){var d=this,e,b=d.lastBox,a=c&&c.isRoot;if(b){b.invalid=true}if(!d.rendered||d.layoutSuspendCount||d.suspendLayout){return}if(d.hidden){Ext.Component.cancelLayout(d)}else{if(typeof a!="boolean"){a=d.isLayoutRoot()}}if(a||!d.ownerLayout||!d.ownerLayout.onContentChange(d)){if(!d.isLayoutSuspended()){e=(c&&c.hasOwnProperty("defer"))?c.defer:d.deferLayouts;Ext.Component.updateLayout(d,e)}}},updateMaxHeight:function(b,a){this.changeConstraint(b,a,"min","max-height","height")},updateMaxWidth:function(b,a){this.changeConstraint(b,a,"min","max-width","width")},updateMinHeight:function(b,a){this.changeConstraint(b,a,"max","min-height","height")},updateMinWidth:function(a,b){this.changeConstraint(a,b,"max","min-width","width")},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(a,b){this.el.setX(a,b)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{statics:{findComponentByElement:function(c){var a=document.body,d=c,b;while(d&&d.nodeType===1&&d!==a){b=Ext.getCmp(d.id);if(b){return b}d=d.parentNode}return null},getComponentByElement:function(a){var c=Ext.Component.componentIdAttribute,b;a=Ext.fly(a);if(!a){return null}b=a.getAttribute(c);if(b){return Ext.getCmp(b)}else{return Ext.Component.findComponentByElement(a.dom)}},getActiveComponent:function(){var a=Ext.dom.Element.getActiveElement();return Ext.Component.getComponentByElement(a)}},addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},addUIToElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,f,b,e;d.addCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(f in c){e=c[f].frame;if(e&&e!==true){b=d[f];if(b){b.addCls(a+e)}}}}},changeConstraint:function(g,c,a,e,b){var f=this,d=f[b];if(g!=null&&typeof d==="number"){f[b]=Math[a](d,g)}if(f.liquidLayout){if(g!=null){f.setStyle(e,g+"px")}else{if(c){f.setStyle(e,"")}}}if(f.rendered){f.updateLayout()}},constructPlugin:function(b){var a=this;if(typeof b==="string"){b=Ext.PluginManager.create({},b,a)}else{b=Ext.PluginManager.create(b,null,a)}return b},constructPlugins:function(){var e=this,c=e.plugins,b,d,a;if(c){b=[];b.processed=true;if(!Ext.isArray(c)){c=[c]}for(d=0,a=c.length;d<a;d++){b[d]=e.constructPlugin(c[d])}}e.pluginsInitialized=true;return b},doScrollBy:function(b,a,c){var d=this.getOverflowEl();if(d){d.scrollBy(b,a,c)}},doScrollTo:function(a,d,b){var c=this.getOverflowEl();c.scrollTo("left",a,b);c.scrollTo("top",d,b)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;if(a.hasListeners[b]){a.fireEvent(b,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=true;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var e=this,b=null,f=e.autoScroll,d,c,a;if(typeof f==="boolean"){b={overflow:a=(f?"auto":"")};e.scrollFlags={overflowX:a,overflowY:a,x:f,y:f,both:f}}else{d=e.overflowX;c=e.overflowY;if(d!==undefined||c!==undefined){if(d&&d===true){d="auto"}if(c&&c===true){c="auto"}b={overflowX:d=d||"",overflowY:c=c||""};e.scrollFlags={overflowX:d,overflowY:c,x:d=(d==="auto"||d==="scroll"),y:c=(c==="auto"||c==="scroll"),both:d&&c}}else{e.scrollFlags={overflowX:"",overflowY:"",x:false,y:false,both:false}}}return b},getPlugins:function(){var a=this.plugins;a=(a&&a.processed)?a:this.constructPlugins();return a||null},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();a.proxy=a.el.createProxy("x-proxy-el",b,true)}return a.proxy},getScrollLeft:function(){return this.getOverflowEl().getScrollLeft()},getScrollerEl:function(){var a=this;return a.scrollerEl||(a.scrollerEl=a.componentLayout.getScrollerEl()||a.getOverflowEl().child(a.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(a){return Ext.XTemplate.getTpl(this,a)},initCls:function(){var b=this,a=[b.baseCls,b.getComponentLayout().targetCls];if(b.componentCls){a.push(b.componentCls)}else{b.componentCls=b.baseCls}return a},initDraggable:function(){var c=this,a=(c.resizer&&c.resizer.el!==c.el)?c.resizerComponent=new Ext.Component({ariaRole:"presentation",el:c.resizer.el,rendered:true,container:c.container}):c,b=Ext.applyIf({el:a.getDragEl(),constrainTo:(c.constrain||c.draggable.constrain)?(c.constrainTo||(c.floatParent?c.floatParent.getTargetEl():c.container)):undefined},c.draggable);if(c.constrain||c.constrainDelegate){b.constrain=c.constrain;b.constrainDelegate=c.constrainDelegate}c.dd=new Ext.util.ComponentDragger(a,b)},initPadding:function(c){var a=this,b=a.padding;if(b!=null){if(a.touchScroll||(a.layout&&a.layout.managePadding&&a.contentPaddingProperty==="padding")){c.setStyle("padding",0)}else{c.setStyle("padding",this.unitizeBox((b===true)?5:b))}}},initPlugin:function(a){a.init(this);return a},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:false,constrainTo:(b.constrain||(a&&a.constrain))?(b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.container)):undefined,handles:b.resizeHandles},a);a.target=b;b.resizer=new Ext.resizer.Resizer(a)},initScrollManager:function(){var b=this,c=b.scrollFlags,a=b.getScrollerEl();if(a&&!b.scrollManager){return b.scrollManager=new Ext.scroll.Manager({owner:b,el:a,direction:c.both?"auto":c.y?"vertical":"horizontal"})}},initStyles:function(k){var f=this,d=f.margin,e=f.border,l=f.cls,a=f.style,h=f.x,g=f.y,c=f.liquidLayout,b,j;f.initPadding(k);if(d!=null){k.setStyle("margin",this.unitizeBox((d===true)?5:d))}if(e!=null){f.setBorder(e,k)}if(l&&l!=f.initialCls){k.addCls(l);f.cls=f.initialCls=null}if(a&&a!=f.initialStyle){k.setStyle(a);f.style=f.initialStyle=null}if(h!=null){k.setStyle(f.horizontalPosProp,(typeof h=="number")?(h+"px"):h)}if(g!=null){k.setStyle("top",(typeof g=="number")?(g+"px"):g)}if(!f.ownerCt||f.floating){if(Ext.scopeCss){k.addCls(f.rootCls)}k.addCls(f.borderBoxCls)}if(c||!f.getFrameInfo()){b=f.width;j=f.height;if(b!=null){if(typeof b==="number"){k.setStyle("width",b+"px")}else{k.setStyle("width",b)}}if(j!=null){if(typeof j==="number"){k.setStyle("height",j+"px")}else{k.setStyle("height",j)}}}},isContainedFloater:function(){return(this.floating&&this.floatParent)},isDescendant:function(a){if(a.isContainer){for(var b=this.ownerCt;b;b=b.ownerCt){if(b===a){return true}}}return false},makeFloating:function(a){this.mixins.floating.constructor.call(this,a)},owns:function(b){var a=false,c;if(b.isEvent){b=b.target}else{if(b.isElement){b=b.dom}}c=Ext.Component.findComponentByElement(b);if(c){a=(c===this)||(!!c.up(this))}return a},parseBox:function(a){return Ext.Element.parseBox(a)},refreshScroll:function(){var a=this.scrollManager;if(a){a.refresh()}},removeManagedListenerItem:function(b,a,h,d,f,e){var g=this,c=a.options?a.options.element:null;if(c){c=g[c];if(c&&c.un){if(b||(a.item===h&&a.ename===d&&(!f||a.fn===f)&&(!e||a.scope===e))){c.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(g.managedListeners,a)}}}}else{return g.mixins.observable.removeManagedListenerItem.apply(g,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a);a.destroy()},removeUIFromElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,f,b,e;d.removeCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(f in c){e=c[f].frame;if(e&&e!==true){b=d[f];if(b){b.removeCls(a+e)}}}}},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!=b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},setHiddenState:function(b){var a=this.getInherited();this.hidden=b;if(b){a.hidden=true}else{delete a.hidden}this.zIndexManager&&this.zIndexManager.onComponentShowHide(this)},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},setScrollLeft:function(a){this.getOverflowEl().setScrollLeft(a)},wrapPrimaryEl:function(a){if(this.floating){this.makeFloating(a)}else{this.el=Ext.get(a)}}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){this.updateLayout();return this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext,"Component",Ext,"AbstractComponent"],function(a){a.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(b){a.resumeLayouts(b)};Ext.suspendLayouts=function(){a.suspendLayouts()};Ext.batchLayouts=function(c,b){a.suspendLayouts();c.call(b);a.resumeLayouts(true)};Ext.setGlyphFontFamily=function(b){Ext._glyphFontFamily=b};a.hierarchyEventSource=a.prototype.hierarchyEventSource=Ext.GlobalEvents}));(Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);return this},getHandledEvents:function(){return this.handledEvents},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return false},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0));(Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(a){if(a.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return false}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(c){var b=this,a;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}a=b.lastStartPoint=c.changedTouches[0].point;b.startPoint=b.startPoint||a;b.startTime=c.time;clearTimeout(b.singleTapTimer)},onTouchMove:function(c){var b=this,a=c.changedTouches[0].point;if(Math.abs(a.getDistanceTo(b.lastStartPoint))>=b.getMoveDistance()){b.startPoint=null;return b.fail(b.self.TOUCH_MOVED)}},onTouchEnd:function(f){var h=this,d=h.getMaxDuration(),a=f.time,g=f.target,j=h.lastTapTime,b=h.lastTarget,k=f.changedTouches[0].point,c;h.lastTapTime=a;h.lastTarget=g;if(j){c=a-j;if(c<=d&&Math.abs(k.getDistanceTo(h.startPoint))<=h.getTapDistance()){if(g!==b){return h.fail(h.self.DIFFERENT_TARGET)}h.lastTarget=null;h.lastTapTime=0;h.fire("doubletap",f,{touch:f.changedTouches[0],duration:c});h.startPoint=null;return}}if(a-h.startTime>d){h.fireSingleTap(f)}else{h.setSingleTapTimer(f)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(a,b){this.fire("singletap",a,{touch:b});this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],0));(Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=false;this.onTouchEnd(this.lastMoveEvent)}return false}this.startTime=a.time;this.startPoint=a.changedTouches[0].point},tryDragStart:function(d){var b=this.startPoint,g=d.changedTouches[0],a=g.point,f=this.getMinDistance(),c=this.info;if(Math.abs(a.getDistanceTo(b))>=f){this.isStarted=true;this.previousPoint=this.lastPoint=a;this.resetInfo("x",d,g);this.resetInfo("y",d,g);c.time=d.time;this.fire("dragstart",d,c)}},onTouchMove:function(b){if(!this.isStarted){this.tryDragStart(b)}if(!this.isStarted){return}var c=b.changedTouches[0],a=c.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=a;this.lastMoveEvent=b;this.updateInfo("x",b,c);this.updateInfo("y",b,c);this.info.time=b.time;this.fire("drag",b,this.info)},onAxisDragEnd:function(a,c){var b=c.time-c.previousTime[a];if(b>0){c.flick.velocity[a]=(c[a]-c.previous[a])/b}},resetInfo:function(c,g,j){var d=this.lastPoint[c],b=this.startPoint[c],h=d-b,a=c.toUpperCase(),f=this.info;f.touch=j;f.delta[c]=h;f.absDelta[c]=Math.abs(h);f.previousTime[c]=this.startTime;f.previous[c]=b;f[c]=d;f.direction[c]=0;f["start"+a]=this.startPoint[c];f["previous"+a]=f.previous[c];f["page"+a]=f[c];f["delta"+a]=f.delta[c];f["absDelta"+a]=f.absDelta[c];f["previousDelta"+a]=0;f.startTime=this.startTime},updateInfo:function(d,j,h){var k=this,m=k.lastPoint[d],f=k.previousPoint[d],a=k.startPoint[d],n=m-a,c=k.info,l=c.direction,g=d.toUpperCase(),b=c.previous[d];c.touch=h;c.delta[d]=n;c.absDelta[d]=Math.abs(n);if(m!==b&&m!==c[d]){c.previous[d]=c[d];c.previousTime[d]=c.time}c[d]=m;if(m>f){l[d]=1}else{if(m<f){l[d]=-1}}c["start"+g]=a;c["previous"+g]=c.previous[d];c["page"+g]=c[d];c["delta"+g]=c.delta[d];c["absDelta"+g]=c.absDelta[d];c["previousDelta"+g]=c.previous[d]-a;c.startTime=k.startTime},onTouchEnd:function(a){this.doEnd(a)},onTouchCancel:function(a){this.doEnd(a,true);return false},doEnd:function(d,b){if(!this.isStarted){this.tryDragStart(d)}if(this.isStarted){var f=d.changedTouches[0],a=f.point,c=this.info;this.isStarted=false;this.lastPoint=a;this.updateInfo("x",d,f);this.updateInfo("y",d,f);c.time=d.time;this.onAxisDragEnd("x",c);this.onAxisDragEnd("y",c);this.fire(b?"dragcancel":"dragend",d,c);this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],0));(Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.startTime=a.time;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(k){var j=k.changedTouches[0],n=j.pageX,l=j.pageY,h=n-this.startX,g=l-this.startY,d=Math.abs(n-this.startX),c=Math.abs(l-this.startY),f=k.time-this.startTime,o=this.getMinDistance(),b=k.time,m,a;if(b-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&c>this.getMaxOffset()){this.isHorizontal=false}if(this.isVertical&&d>this.getMaxOffset()){this.isVertical=false}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&d<o){m=(h<0)?"left":"right";a=d}else{if(this.isVertical&&c<o){m=(g<0)?"up":"down";a=c}}}if(m&&!this.started){this.started=true;this.fire("swipestart",k,{touch:j,direction:m,distance:a,duration:f})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(j){if(this.onTouchMove(j)===false){return false}var h=j.changedTouches[0],m=h.pageX,k=h.pageY,g=m-this.startX,f=k-this.startY,c=Math.abs(g),b=Math.abs(f),n=this.getMinDistance(),d=j.time-this.startTime,l,a;if(this.isVertical&&b<n){this.isVertical=false}if(this.isHorizontal&&c<n){this.isHorizontal=false}if(this.isHorizontal){l=(g<0)?"left":"right";a=c}else{if(this.isVertical){l=(f<0)?"up":"down";a=b}else{return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.started=false;this.fire("swipe",j,{touch:h,direction:l,distance:a,duration:d})},onTouchCancel:function(a){this.fire("swipecancel",a);return false}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],0));(Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(a){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.started=false;this.direction=null;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(l){var j=l.changedTouches[0],p=j.pageX,m=j.pageY,h=p-this.startX,g=m-this.startY,b=Math.abs(m-this.startY),c=Math.abs(p-this.startX),q=this.getMinDistance(),f=this.getMaxOffset(),d=l.time-this.startTime,o=Ext.Viewport&&Ext.Element.getViewportWidth(),k=Ext.Viewport&&Ext.Element.getViewportHeight(),n,a;if(this.isVertical&&c>f){this.isVertical=false}if(this.isHorizontal&&b>f){this.isHorizontal=false}if(this.isVertical&&this.isHorizontal){if(b>c){this.isHorizontal=false}else{this.isVertical=false}}if(this.isHorizontal){n=(h<0)?"left":"right";a=h}else{if(this.isVertical){n=(g<0)?"up":"down";a=g}}this.direction=this.direction||n;if(this.direction=="up"){a=g*-1}else{if(this.direction=="left"){a=h*-1}}this.distance=a;if(a==0){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(this.direction=="right"&&this.startX>q){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(this.direction=="down"&&this.startY>q){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(this.direction=="left"&&(o-this.startX)>q){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(this.direction=="up"&&(k-this.startY)>q){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=true;this.startTime=l.time;this.fire("edgeswipestart",l,{touch:j,direction:this.direction,distance:this.distance,duration:d})}else{this.fire("edgeswipe",l,{touch:j,direction:this.direction,distance:this.distance,duration:d})}},onTouchEnd:function(b){var a;if(this.onTouchMove(b)!==false){a=b.time-this.startTime;this.fire("edgeswipeend",b,{touch:b.changedTouches[0],direction:this.direction,distance:this.distance,duration:a})}},onTouchCancel:function(a){this.fire("edgeswipecancel",a,{touch:a.changedTouches[0]});return false}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],0));(Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1000},handledEvents:["longpress"],fireLongPress:function(a){this.fire("longpress",a,{touch:a.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=true},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}this.startPoint=a.changedTouches[0].point;this.isLongPress=false;this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(){this.override({handledEvents:["longpress","taphold"],fire:function(a){if(a==="longpress"){var b=Array.prototype.slice.call(arguments);b[0]="taphold";this.fire.apply(this,b)}return this.callOverridden(arguments)}})}));(Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:function(d){var a=this.requiredTouchesCount,c=d.touches,b=c.length;if(b===a){this.start(d)}else{if(b>a){this.end(d)}}},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){this.end(a,true);return false},start:function(){if(!this.isTracking){this.isTracking=true;this.isStarted=false}},end:function(b,a){if(this.isTracking){this.isTracking=false;if(this.isStarted){this.isStarted=false;this[a?"fireCancel":"fireEnd"](b)}}}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(c){if(!this.isTracking){return}var b=c.touches,d,a,f;d=b[0].point;a=b[1].point;f=d.getDistanceTo(a);if(f===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=f;this.fire("pinchstart",c,{touches:b,distance:f,scale:1})}else{this.fire("pinch",c,{touches:b,distance:f,scale:f/this.startDistance})}},fireEnd:function(a){this.fire("pinchend",a)},fireCancel:function(a){this.fire("pinchcancel",a)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],0));(Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(h){if(!this.isTracking){return}var g=h.touches,b=this.lastAngle,d,f,c,a,j,k;d=g[0].point;f=g[1].point;c=d.getAngleTo(f);if(b!==null){k=Math.abs(b-c);a=c+360;j=c-360;if(Math.abs(a-b)<k){c=a}else{if(Math.abs(j-b)<k){c=j}}}this.lastAngle=c;if(!this.isStarted){this.isStarted=true;this.startAngle=c;this.fire("rotatestart",h,{touches:g,angle:c,rotation:0})}else{this.fire("rotate",h,{touches:g,angle:c,rotation:c-this.startAngle})}this.lastTouches=Ext.Array.clone(g)},fireEnd:function(a){this.lastAngle=null;this.fire("rotateend",a)},fireCancel:function(a){this.lastAngle=null;this.fire("rotatecancel",a)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],0));(Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,a)===false){return false}this.startPoint=a.changedTouches[0].point},onTouchMove:function(b){var c=b.changedTouches[0],a=c.point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire("tapcancel",b,{touch:c});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(a){this.fire("tap",a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){this.fire("tapcancel",a,{touch:a.changedTouches[0]});return false}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{targetType:"",idSelectorRegex:/^#([\w\-]+)$/i,constructor:function(){var b=this.handledEvents||[],a,c,e,d;a=this.handledEventsMap={};for(c=0,e=b.length;c<e;c++){d=b[c];a[d]=true}this.subscribers={};return this},handles:function(a){var b=this.handledEventsMap;return !!b[a]||!!b["*"]||a==="*"},getHandledEvents:function(){return this.handledEvents},setDispatcher:function(a){this.dispatcher=a},subscribe:function(){return false},unsubscribe:function(){return false},unsubscribeAll:function(){delete this.subscribers;this.subscribers={};return this},notify:function(){return false},getTargetType:function(){return this.targetType},dispatch:function(d,b,c,a){this.dispatcher.doDispatchEvent(this.targetType,d,b,c,null,null,a)},destroy:Ext.emptyFn},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,{isRegion:true,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(d,f,a,c){var e=this;e.y=e.top=e[1]=d;e.right=f;e.bottom=a;e.x=e.left=e[0]=c},contains:function(b){var a=this;return(b.x>=a.x&&b.right<=a.right&&b.y>=a.y&&b.bottom<=a.bottom)},intersect:function(g){var f=this,d=Math.max(f.y,g.y),e=Math.min(f.right,g.right),a=Math.min(f.bottom,g.bottom),c=Math.max(f.x,g.x);if(a>d&&e>c){return new this.self(d,e,a,c)}else{return false}},union:function(g){var f=this,d=Math.min(f.y,g.y),e=Math.max(f.right,g.right),a=Math.max(f.bottom,g.bottom),c=Math.min(f.x,g.x);return new this.self(d,e,a,c)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(d,f,a,c){var e=this;e.top=e.y+=d;e.left=e.x+=c;e.right+=f;e.bottom+=a;return e},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.getOutOfBoundOffsetX(b)}else{return this.getOutOfBoundOffsetY(b)}}else{b=a;var c=new Ext.util.Offset();c.x=this.getOutOfBoundOffsetX(b.x);c.y=this.getOutOfBoundOffsetY(b.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else{if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else{if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.isOutOfBoundX(b)}else{return this.isOutOfBoundY(b)}}else{b=a;return(this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y))}},isOutOfBoundX:function(a){return(a<this.x||a>this.right)},isOutOfBoundY:function(a){return(a<this.y||a>this.bottom)},restrict:function(b,d,a){if(Ext.isObject(b)){var c;a=d;d=b;if(d.copy){c=d.copy()}else{c={x:d.x,y:d.y}}c.x=this.restrictX(d.x,a);c.y=this.restrictY(d.y,a);return c}else{if(b=="x"){return this.restrictX(d,a)}else{return this.restrictY(d,a)}}},restrictX:function(b,a){if(!a){a=1}if(b<=this.x){b-=(b-this.x)*a}else{if(b>=this.right){b-=(b-this.right)*a}}return b},restrictY:function(b,a){if(!a){a=1}if(b<=this.y){b-=(b-this.y)*a}else{if(b>=this.bottom){b-=(b-this.bottom)*a}}return b},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a,c){if(arguments.length==1){c=a.y;a=a.x}var b=this;b.top=b.y+=c;b.right+=a;b.bottom+=c;b.left=b.x+=a;return b},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return(this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left)}},3,0,0,0,0,0,[Ext.util,"Region"],0));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=(a&&a.length>0)?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}Ext.util.Region.prototype.constructor.call(this,b,a,b,a)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},isCloseTo:function(c,b){if(typeof b=="number"){return this.getDistanceTo(c)<=b}var a=c.x,f=c.y,e=b.x,d=b.y;return(this.x<=a+e&&this.x>=a-e&&this.y<=f+d&&this.y>=f-d)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(typeof a!="object"){a=this.origin}return(Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y))},getDistanceTo:function(b){if(typeof b!="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.sqrt(c*c+a*a)},getAngleTo:function(b){if(typeof b!="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.atan2(a,c)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",isStopped:false,isEvent:true,statics:{resolveTextNode:function(a){return(a&&a.nodeType===3)?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(b){var f=this,j=f.self,e=f.self.resolveTextNode,h=b.changedTouches,c=h?h[0]:b,g=b.type,a,d;f.pageX=c.pageX;f.pageY=c.pageY;f.target=f.delegatedTarget=e(b.target);d=b.relatedTarget;if(d){f.relatedTarget=e(d)}f.browserEvent=f.event=b;f.type=g;f.button=b.button||0;f.shiftKey=b.shiftKey;f.ctrlKey=b.ctrlKey||b.metaKey||false;f.altKey=b.altKey;f.charCode=b.charCode;f.keyCode=b.keyCode;if(j.forwardTab!==undefined&&j.focusEvents[g]){f.forwardTab=j.forwardTab}if(j.mouseEvents[g]){a="mouse"}else{if(j.pointerEvents[g]){a=j.pointerTypes[b.pointerType]}else{if(j.touchEvents[g]){a="touch"}}}if(a){f.pointerType=a}f.timeStamp=f.time=+(b.timeStamp||new Date())},chain:function(a){var b=Ext.Object.chain(this);b.parentEvent=this;return Ext.apply(b,a)},correctWheelDelta:function(c){var b=this.WHEEL_SCALE,a=Math.round(c/b);if(!a&&c){a=(c<0)?-1:1}return a},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(b,e,a){var c=this.relatedTarget,d=null;if(c){if(b){d=Ext.fly(c).findParent(b,e,a)}else{d=a?Ext.get(c):c}}return d},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):(a?Ext.get(this.target):this.target)},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var d=this,c=d.browserEvent,b=0,a=0;if(Ext.isDefined(c.wheelDeltaX)){b=c.wheelDeltaX;a=c.wheelDeltaY}else{if(c.wheelDelta){a=c.wheelDelta}else{if(c.detail){a=-c.detail;if(a>100){a=3}else{if(a<-100){a=-3}}if(Ext.isDefined(c.axis)&&c.axis===c.HORIZONTAL_AXIS){b=a;a=0}}}}return{x:d.correctWheelDelta(b),y:d.correctWheelDelta(a)}},getX:function(){return this.getXY()[0]},getXY:function(){var c=this,e=c.xy;if(!e){e=c.xy=[c.pageX,c.pageY];var b=e[0],g,d,f,a;if(!b&&b!==0){g=c.browserEvent;d=document;f=d.documentElement;a=d.body;e[0]=g.clientX+(f&&f.scrollLeft||a&&a.scrollLeft||0)-(f&&f.clientLeft||a&&a.clientLeft||0);e[1]=g.clientY+(f&&f.scrollTop||a&&a.scrollTop||0)-(f&&f.clientTop||a&&a.clientTop||0)}}return e},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(){var b=this,a=b.keyCode;return(a>=33&&a<=40)||a===b.RETURN||a===b.TAB||a===b.ESC},isSpecialKey:function(){var a=this.keyCode;return(this.type==="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(a===this.BACKSPACE)||(a>=16&&a<=20)||(a>=44&&a<=46)},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){this.browserEvent.preventDefault();return this},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var b=this,c=b.browserEvent,a=b.parentEvent;b.isStopped=true;if(a){a.isStopped=true}if(!c.stopPropagation){c.cancelBubble=true;return b}c.stopPropagation();return b},within:function(c,d,a){if(c){var b=d?this.getRelatedTarget():this.getTarget()}return b?Ext.fly(c).contains(b)||!!(a&&b===Ext.getDom(c)):false},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(a){var b=a.prototype,c={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var d;if(Ext.isGecko){d=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){d=120}else{d=12}d*=3}else{d=120}}return d}())};Ext.apply(a,c);Ext.apply(b,c);b.getTrueXY=b.getXY}));Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:(function(){var d,e={},c;if(!Ext.isIE9m&&document.createEvent){d={createHtmlEvent:function(k,h,g,f){var j=k.createEvent("HTMLEvents");j.initEvent(h,g,f);return j},createMouseEvent:function(u,s,m,l,o,k,h,j,f,r,q,n,p){var g=u.createEvent("MouseEvents"),t=u.defaultView||window;if(g.initMouseEvent){g.initMouseEvent(s,m,l,t,o,k,h,k,h,j,f,r,q,n,p)}else{g=u.createEvent("UIEvents");g.initEvent(s,m,l);g.view=t;g.detail=o;g.screenX=k;g.screenY=h;g.clientX=k;g.clientY=h;g.ctrlKey=j;g.altKey=f;g.metaKey=q;g.shiftKey=r;g.button=n;g.relatedTarget=p}return g},createUIEvent:function(m,k,h,g,j){var l=m.createEvent("UIEvents"),f=m.defaultView||window;l.initUIEvent(k,h,g,f,j);return l},fireEvent:function(h,f,g){h.dispatchEvent(g)}}}else{if(document.createEventObject){c={0:1,1:4,2:2};d={createHtmlEvent:function(k,h,g,f){var j=k.createEventObject();j.bubbles=g;j.cancelable=f;return j},createMouseEvent:function(t,s,m,l,o,k,h,j,f,r,q,n,p){var g=t.createEventObject();g.bubbles=m;g.cancelable=l;g.detail=o;g.screenX=k;g.screenY=h;g.clientX=k;g.clientY=h;g.ctrlKey=j;g.altKey=f;g.shiftKey=r;g.metaKey=q;g.button=c[n]||n;g.relatedTarget=p;return g},createUIEvent:function(l,j,g,f,h){var k=l.createEventObject();k.bubbles=g;k.cancelable=f;return k},fireEvent:function(h,f,g){h.fireEvent("on"+f,g)}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(h,j){var g=j[0],f=j[1];e[h]=function(m,k){var l=d.createHtmlEvent(h,g,f);d.fireEvent(m,h,l)}});function b(h,g){var f=(h!="mousemove");return function(m,j){var l=j.getXY(),k=d.createMouseEvent(m.ownerDocument,h,true,f,g,l[0],l[1],j.ctrlKey,j.altKey,j.shiftKey,j.metaKey,j.button,j.relatedTarget);d.fireEvent(m,h,k)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(f){e[f]=b(f,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(h,j){var g=j[0],f=j[1];e[h]=function(m,k){var l=d.createUIEvent(m.ownerDocument,h,g,f,1);d.fireEvent(m,h,l)}});if(!d){e={};d={}}function a(g,f){}return function(j){var h=this,g=e[h.type]||a,f=j?(j.dom||j):h.getTarget();g(f,h)}}()),preventDefault:function(){var b=this,a=b.browserEvent;if(typeof a.type!=="unknown"){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false;if(a.ctrlKey||a.keyCode>111&&a.keyCode<124){a.keyCode=-1}}}return b},stopPropagation:function(){var b=this,a=b.browserEvent;if(typeof a.type!=="unknown"){if(b.mousedownEvents[b.type]){Ext.GlobalEvents.fireMouseDown(b)}arguments.callee.$previous.call(this)}return b},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var a=this,d,c=function(f){if(f.keyCode===9){a.forwardTab=!f.shiftKey}},b=function(f){if(f.keyCode===9){delete a.forwardTab}};if(Ext.isIE9m){d={1:0,4:1,2:2};a.override({statics:{enableIEAsync:function(g){var e,f={};for(e in g){f[e]=g[e]}return f}},constructor:function(h,j,f,e){var g=this;g.callParent([h,j,f,e]);g.button=d[h.button];g.toElement=h.toElement;g.fromElement=h.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(e){this.browserEvent=this.self.enableIEAsync(e)},getRelatedTarget:function(f,k,e){var h=this,g,j;if(!h.relatedTarget){g=h.type;if(h.mouseLeaveRe.test(g)){j=h.toElement}else{if(h.mouseEnterRe.test(g)){j=h.fromElement}}if(j){h.relatedTarget=h.self.resolveTextNode(j)}}return h.callParent([f,k,e])}});document.attachEvent("onkeydown",c);document.attachEvent("onkeyup",b);window.attachEvent("onunload",function(){document.detachEvent("onkeydown",c);document.detachEvent("onkeyup",b)})}else{if(document.addEventListener){document.addEventListener("keydown",c,true);document.addEventListener("keyup",b,true)}}});(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{reEnterCount:0,targetType:"element",idOrClassSelectorRegex:/^([#|\.])([\w\-]+)$/,classNameSplitRegex:/\s+/,SELECTOR_ALL:"*",captureEvents:{resize:1,focus:1,blur:1,paste:1,input:1,change:1,animationstart:1,animationend:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var h=this,j=document,f=j.defaultView,k=h.eventToVendorMap={},e=h.vendorToEventMap={},a=h.handledEvents,d=Ext.browser,c,g,b;h.captureSubscribers={};h.directSubscribers={};h.globalListeners={};if((Ext.os.is.iOS&&Ext.os.version.getMajor()<5)||!(f&&f.addEventListener)){h.target=j;h.isTargetWin=false}else{h.target=f;h.isTargetWin=true}h.initHandlers();if(a){for(c=0,g=a.length;c<g;c++){this.addDelegatedListener(a[c])}}else{if(d.is.WebKit){k.transitionend=d.getVendorProperyName("transitionEnd");k.animationstart=d.getVendorProperyName("animationStart");k.animationend=d.getVendorProperyName("animationEnd");for(b in k){e[k[b]]=b}}}return Ext.event.publisher.Publisher.prototype.constructor.call(this)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a)},handles:function(){return false},getSubscribers:function(b,a){var d=a?this.captureSubscribers:this.subscribers,c=d[b];if(!c){c=d[b]={id:{$length:0},className:{$length:0},selector:[],all:0,$length:0}}return c},getDirectSubscribers:function(e,a){var c=this.directSubscribers,d=c[e]||(c[e]={}),b=d[a]||(d[a]={$length:0});return b},addDelegatedListener:function(a){this.target.addEventListener(a,this.onDelegatedEvent,this.captureEvents[a])},removeDelegatedListener:function(a){this.target.removeEventListener(a,this.onDelegatedEvent,this.captureEvents[a])},addDirectListener:function(b,c,a){c.addEventListener(b,this.onDirectEvent,a)},removeDirectListener:function(b,c,a){c.removeEventListener(b,this.onDirectEvent,a)},subscribe:function(k,h,p,a){var m=this,o=!!p.capture,g=k.match(m.idOrClassSelectorRegex),b,d,e,c,j,f,l,n;if(p.delegated!==false&&!m.directEvents[h]&&!(k==="#ext-window"&&!m.isTargetWin)){if(!m.handledEvents&&!m.globalListeners[h]){m.addDelegatedListener(m.eventToVendorMap[h]||h);this.globalListeners[h]=1}}else{f=a.dom;j=this.getDirectSubscribers(f.id,h);if(++j.$length===1){m.addDirectListener(h,f,o)}if(!g){(j.selector||(j.selector=[])).push(k)}return}b=m.getSubscribers(h,o);d=b.id;e=b.className;c=b.selector;if(g){l=g[1];n=g[2];if(l==="#"){if(d.hasOwnProperty(n)){d[n]++;return}d[n]=1;d.$length++}else{if(e.hasOwnProperty(n)){e[n]++;return}e[n]=1;e.$length++}}else{if(k===this.SELECTOR_ALL){b.all++}else{if(c.hasOwnProperty(k)){c[k]++;return}c[k]=1;c.push(k)}}b.$length++},unsubscribe:function(l,j,p,r,b){var n=this,q=!!r.capture,h=l.match(n.idOrClassSelectorRegex),a,e,f,c,k,m,o,g,d;if(r.delegated===false||n.directEvents[j]||(l===Ext.windowId&&!n.isTargetWin)){g=b.dom;d=g.id;k=n.getDirectSubscribers(d,j);if(p){if(k.$length){n.removeDirectListener(j,g,q)}delete n.directSubscribers[d]}else{if(!--k.$length){n.removeDirectListener(j,g,q);delete n.directSubscribers[d][j]}else{if(!h){Ext.Array.remove(k.selector,l)}}}return}a=n.getSubscribers(j,q);e=a.id;f=a.className;c=a.selector;if(h){m=h[1];o=h[2];if(m==="#"){if(!e.hasOwnProperty(o)||(!p&&--e[o]>0)){return}delete e[o];e.$length--}else{if(!f.hasOwnProperty(o)||(!p&&--f[o]>0)){return}delete f[o];f.$length--}}else{if(l===n.SELECTOR_ALL){if(p){a.all=0}else{a.all--}}else{if(!c.hasOwnProperty(l)||(!p&&--c[l]>0)){return}delete c[l];Ext.Array.remove(c,l)}}a.$length--},getPropagatingTargets:function(b){var a=[];if(!b){return a}do{a[a.length]=b;b=b.parentNode}while(b);return a},dispatch:function(c,a,b){b.push(b[0].target);Ext.event.publisher.Publisher.prototype.dispatch.apply(this,arguments)},publish:function(f,h,a){var k=this.getSubscribers(f,true),c=this.getSubscribers(f),b=this.getSubscribers("*",true),m=this.getSubscribers("*"),j=k.$length,e=c.$length,d=b.$length,l=m.$length,g;if(!j&&!e&&!d&&!l){return}if(Ext.isArray(h)){g=h}else{if(this.captureEvents[f]){g=[h]}else{g=this.getPropagatingTargets(h)}}if(!j||!this.doPublish(k,f,g,a,true)){if(d){this.doPublish(b,f,g,a,true)}}if(!a.isStopped&&(!e||!this.doPublish(c,f,g,a))){if(l){this.doPublish(m,f,g,a)}}return this},doPublish:function(f,l,B,x,u){var t=f.id,h=f.className,b=f.selector,r=t.$length>0,a=h.$length>0,n=b.length>0,q=f.all>0,C={},e=[x],s=false,o=this.classNameSplitRegex,k=0,g=B.length,A=1,y,m,w,d,D,p,c,z,v;if(u){k=g-1;g=A=-1}for(y=k;y!==g;y+=A){D=B[y];x.setCurrentTarget(D);if(r){p=(D.tagName==="FORM")?D.getAttribute("id"):(D===window)?"ext-window":D.id;if(p){if(t.hasOwnProperty(p)){s=true;this.dispatch("#"+p,l,e,u)}}}if(a){c=D.className;if(c){z=c.split(o);for(w=0,d=z.length;w<d;w++){c=z[w];if(!C[c]){C[c]=true;if(h.hasOwnProperty(c)){s=true;this.dispatch("."+c,l,e)}}}}}if(x.isStopped){return s}}if(q&&!s){x.setCurrentTarget(x.browserEvent.target);s=true;this.dispatch(this.SELECTOR_ALL,l,e);if(x.isStopped){return s}}if(n){for(w=0,d=B.length;w<d;w++){D=B[w];for(y=0,m=b.length;y<m;y++){v=b[y];if(Ext.fly(D).is(v)){x.setCurrentTarget(D);s=true;this.dispatch(v,l,e)}if(x.isStopped){return s}}}}return s},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else{this.doDelegatedEvent(a)}},doDelegatedEvent:function(f,d){var c=this,a=f.type,b;b=new Ext.event.Event(f);if(c.isEventBlocked(b)){return false}c.beforeEvent(b);a=b.type=c.vendorToEventMap[a]||a;Ext.frameStartTime=f.timeStamp;c.reEnterCount++;c.publish(a,b.target,b);c.reEnterCount--;if(d!==false){c.afterEvent(b)}return b},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a])}else{this.doDirectEvent(a)}},doDirectEvent:function(m){var n=this,o=m.type,b=new Ext.event.Event(m),j,f,c,p,q,a,l,d,h,k,g;if(n.isEventBlocked(b)){return}n.beforeEvent(b);j=b.type=this.vendorToEventMap[o]||o;f=m.currentTarget;c=f.id;p=n.getDirectSubscribers(c,j).selector;q=n.dispatcher;a=n.targetType;l=m.target;d=l;Ext.frameStartTime=m.timeStamp;if(l.navigator){c="ext-window"}b.setCurrentTarget(f);if(p){k=p.length;while(d!==f){for(h=0;h<k;h++){g=p[h];if(Ext.fly(d).is(g)){q.dispatchDirectEvent(a,g,j,[b,l])}}d=d.parentNode}}n.reEnterCount++;q.dispatchDirectEvent(a,"#"+c,j,[b,l]);n.reEnterCount--;n.afterEvent(b)},beforeEvent:function(c){var f=c.browserEvent,a=Ext.event.publisher.Dom,b,d;if(f.type==="touchstart"){b=f.touches;if(b.length===1){d=b[0];a.lastTouchStartX=d.pageX;a.lastTouchStartY=d.pageY}}},afterEvent:function(d){var f=d.browserEvent,c=f.type,b=Ext.event.publisher.Dom,a=Ext.GlobalEvents;if(d.self.pointerEvents[c]&&d.pointerType!=="mouse"){b.lastScreenPointerEventTime=Ext.now()}if(c==="touchend"){b.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&a.hasListeners.idle&&!a.idleEventMask[c]){a.fireEvent("idle")}},isEventBlocked:function(f){var d=this,c=f.type,a=Ext.event.publisher.Dom,b=Ext.now();return(d.blockedPointerEvents[c]&&f.pointerType!=="mouse")||(d.blockedCompatibilityMouseEvents[c]&&(b-a.lastScreenPointerEventTime<1000))||(Ext.supports.TouchEvents&&f.self.mouseEvents[f.type]&&Math.abs(f.pageX-a.lastTouchStartX)<15&&Math.abs(f.pageY-a.lastTouchStartY)<15&&(Ext.now()-a.lastTouchEndTime)<1000)},getSubscribersCount:function(a){return this.getSubscribers(a).$length+this.getSubscribers("*").$length},destroy:function(){var e=this,b=e.handledEvents,c,d,a;if(b){for(c=0,d=b.length;c<d;c++){e.removeDelegatedListener(b[c])}}else{for(a in e.globalListeners){e.removeDelegatedListener(a)}}}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],0));Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(){var b=Ext.event.publisher.Dom,a=b.prototype;if(Ext.isIE9m){b.override({initHandlers:function(){var e=this,d=document.body,f,c;e.callParent();f=e.onDelegatedEvent;c=e.onDirectEvent;e.target=document;e.targetIsWin=false;e.onDelegatedEvent=function(g){g.target=g.srcElement||window;if(g.type==="focusin"){g.relatedTarget=g.fromElement===d?null:g.fromElement}else{if(g.type==="focusout"){g.relatedTarget=g.toElement===d?null:g.toElement}}f.call(e,g)};e.onDirectEvent=function(g){g.target=g.srcElement||window;g.currentTarget=this;c.call(e,g)}},addDelegatedListener:function(c){this.target.attachEvent("on"+c,this.onDelegatedEvent)},removeDelegatedListener:function(c){this.target.detachEvent("on"+c,this.onDelegatedEvent)},addDirectListener:function(c,d){var f=this,e=Ext.Function.bind(f.onDirectEvent,d);f.directSubscribers[d.id][c].fn=e;if(d.attachEvent){d.attachEvent("on"+c,e)}else{f.callParent(arguments)}},removeDirectListener:function(c,d){if(d.detachEvent){d.detachEvent("on"+c,this.directSubscribers[d.id][c].fn)}else{this.callParent(arguments)}}});Ext.apply(a.directEvents,a.captureEvents);a.captureEvents={}}});(Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{alternateClassName:"Ext.event.publisher.TouchGesture",config:{recognizers:{}},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},constructor:function(a){var c=this,d=c.onTouchStart,b=c.onTouchMove=Ext.Function.createAnimationFrame(c.onTouchMove,c),e=c.onTouchEnd=Ext.Function.createAnimationFrame(c.onTouchEnd,c,null,1);c.handlers={touchstart:d,touchmove:b,touchend:e,touchcancel:e,pointerdown:d,pointermove:b,pointerup:e,pointercancel:e,MSPointerDown:d,MSPointerMove:b,MSPointerUp:e,MSPointerCancel:e,mousedown:d,mousemove:b,mouseup:e};c.recognizedEvents={};c.activeTouchesMap={};c.activeTouches=[];c.changedTouches=[];if(Ext.supports.TouchEvents){c.onTargetTouchMove=c.onTargetTouchMove.bind(c);c.onTargetTouchEnd=c.onTargetTouchEnd.bind(c)}c.initConfig(a);return Ext.event.publisher.Dom.prototype.constructor.call(this)},applyRecognizers:function(b){var c,a;for(c in b){a=b[c];if(a){this.registerRecognizer(a)}}return b},handles:function(a){var b=this.handledEventsMap;return !!b[a]||!!b["*"]||a==="*"||this.recognizedEvents.hasOwnProperty(a)},registerRecognizer:function(a){var e=this,f=e.recognizedEvents,b=a.getHandledEvents(),c,d;a.setOnRecognized(e.onRecognized);a.setCallbackScope(e);for(c=0,d=b.length;c<d;c++){f[b[c]]=1}},onRecognized:function(d,g,a){var j=this,k=g.changedTouches,h=k.length,l,f,c,b;a=a||{};a.type=d;a.target=k[0].target;a.isStopped=false;g=g.chain(a);if(h>1){l=[];for(c=0;c<h;c++){b=k[c];l.push(b.targets)}f=j.getCommonTargets(l)}else{f=k[0].targets}j.publish(d,f,g)},getCommonTargets:function(a){var h=a[0],f=a.length;if(f===1){return h}var d=[],e=1,g,b,c;while(true){g=h[h.length-e];if(!g){return d}for(c=1;c<f;c++){b=a[c];if(b[b.length-e]!==g){return d}}d.unshift(g);e++}return d},invokeRecognizers:function(c,f){var b=this.getRecognizers(),d,a;if(c==="onStart"){for(d in b){b[d].isActive=true}}for(d in b){a=b[d];if(a.isActive&&a[c].call(a,f)===false){a.isActive=false}}},updateTouches:function(j,b){var n=this,r=j.browserEvent,f=r.changedTouches||[r],a=n.activeTouches,k=n.activeTouchesMap,p=[],m,h,d,g,c,l,q,o;for(c=0,l=f.length;c<l;c++){m=f[c];if("identifier" in m){h=m.identifier}else{if("pointerId" in m){h=m.pointerId}else{h=1}}d=k[h];if(b){delete k[h];Ext.Array.remove(a,d)}else{if(!d){g=Ext.event.Event.resolveTextNode(m.target);d=k[h]={identifier:h,target:g,targets:n.getPropagatingTargets(g)};a.push(d)}}q=m.pageX;o=m.pageY;d.pageX=q;d.pageY=o;d.point=new Ext.util.Point(q,o);p.push(d)}j.touches=Ext.Array.clone(a);j.changedTouches=p},doDelegatedEvent:function(b){var a=this;b=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,b,false);if(b){if(!b.button||b.button<1){a.handlers[b.type].call(a,b)}a.afterEvent(b)}},onTouchStart:function(c){var a=this,b=c.target;if(c.browserEvent.type==="touchstart"){b.addEventListener("touchmove",a.onTargetTouchMove);b.addEventListener("touchend",a.onTargetTouchEnd);b.addEventListener("touchcancel",a.onTargetTouchEnd)}a.updateTouches(c);if(!a.isStarted){a.isStarted=true;a.invokeRecognizers("onStart",c);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}a.invokeRecognizers("onTouchStart",c)},onTouchMove:function(a){if(this.isStarted){this.updateTouches(a);if(a.changedTouches.length>0){this.invokeRecognizers("onTouchMove",a)}}},onTouchEnd:function(b){var a=this;if(!a.isStarted){return}a.updateTouches(b,true);a.invokeRecognizers(a.isCancelEvent[b.type]?"onTouchCancel":"onTouchEnd",b);if(!a.activeTouches.length){a.isStarted=false;a.invokeRecognizers("onEnd",b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else{this.doTargetTouchMove(a)}},doTargetTouchMove:function(a){if(!Ext.getBody().contains(a.target)){this.onTouchMove(new Ext.event.Event(a))}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else{this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(c){var a=this,b=c.target;b.removeEventListener("touchmove",a.onTargetTouchMove);b.removeEventListener("touchend",a.onTargetTouchEnd);b.removeEventListener("touchcancel",a.onTargetTouchEnd);if(!Ext.getBody().contains(b)){a.onTouchEnd(new Ext.event.Event(c))}}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture",Ext.event.publisher,"TouchGesture"],function(){var b=[],a=Ext.supports,c=a.TouchEvents;if(a.PointerEvents){b.push("pointerdown","pointermove","pointerup","pointercancel")}else{if(a.MSPointerEvents){b.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel")}else{if(c){b.push("touchstart","touchmove","touchend","touchcancel")}}}if(!b.length||(c&&Ext.isWebKit&&Ext.os.is.Desktop)){b.push("mousedown","mousemove","mouseup")}this.prototype.handledEvents=b}));Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){if(Ext.isIE9m){this.override({updateTouches:function(c,a){var d=c.browserEvent,b=c.getXY();d.pageX=b[0];d.pageY=b[1];this.callParent([c,a])},initHandlers:function(){var a=this,b;a.callParent();b=a.onDelegatedEvent;a.onDelegatedEvent=function(c){b.call(a,Ext.event.Event.enableIEAsync(c))}}})}});(Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{handledEvents:["focusin","focusout"],syntheticEvents:{focusenter:true,focusleave:true},eventMap:{focus:"focusenter",focusin:"focusenter",blur:"focusleave",focusout:"focusleave"},handles:function(a){return this.syntheticEvents[a]},doDelegatedEvent:function(c,b){var a=this;c=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,c,false);if(c){a.processSyntheticEvent(a.eventMap[c.type],c);if(b){a.afterEvent(c)}}},createSyntheticEvent:function(b,a,c){var d=new Ext.event.Event(a.browserEvent);d.type=b;if(c){d.relatedTarget=d.target;d.target=c}else{d.target=a.target;d.relatedTarget=a.relatedTarget||null}return d},processSyntheticEvent:function(f,j,l){var k=this,a,b,c,d,h,g;a=k.getSubscribers(f);if(a.$length){b=k.gatherSubscriberNodes(f,a);g=[];for(d=0,h=b.length;d<h;d++){c=b[d];if(k.isEventTarget(c,f,j,l)){g.push(c)}}for(d=0,h=g.length;d<h;d++){c=g[d];if(c){k.fireNodeEvent(c,f,j,l)}}}},gatherSubscriberNodes:function(f,a){var d=a.id,e=a.className,b=a.selector,h=d.$length>0,g=e.$length>0,c=b.$length>0,l=[],k,j;if(h){for(j in d){if(j==="$length"){continue}k=document.getElementById(j);if(k){l.push(k)}}}if(g){Ext.Error.raise("Class name subscribers in Focus publisher")}if(c){Ext.Error.raise("Selector subscribers in Focus publisher")}return l},isEventTarget:function(c,a,d,b){return a==="focusenter"?this.isFocusEnterTarget(c,d,b):a==="focusleave"?this.isFocusLeaveTarget(c,d,b):null},isFocusEnterTarget:function(c,f,d){var b=f.browserEvent,h=d||b.relatedTarget,g=b.target,a;if(g===window){return false}a=Ext.fly(c);if(!a.isAncestor(g)){return false}if(!h){return true}if(!a.isAncestor(h)){return true}return false},isFocusLeaveTarget:function(c,f,d){var b=f.browserEvent,h=d!==undefined?d:b.target,g=d!==undefined?b.target:b.relatedTarget,a;if(h===window||g===window){return false}a=Ext.fly(c);if(!a.isAncestor(h)){return false}if(!g){return true}if(!a.isAncestor(g)){return true}return false},fireNodeEvent:function(d,b,a,c){var f=this.createSyntheticEvent(b,a,c);f.setCurrentTarget(d);this.dispatch("#"+d.id,b,[f,d])}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(){if(!Ext.supports.FocusinFocusoutEvents){document.addEventListener("blur",function(a){if(a.target===window||a.target===document){delete document.previousActiveElement}else{document.previousActiveElement=a.target}},true);this.override({handledEvents:["focus"],doDelegatedEvent:function(d,c){var b=this,a;d=b.callSuper([d,false]);if(d){a=document.previousActiveElement;if(a!==undefined){b.processSyntheticEvent("focusleave",d,a)}b.processSyntheticEvent(b.eventMap[d.type],d,a||null);if(c){b.afterEvent(d)}}}})}}));Ext.onReady(function(){var a=Ext.event.Dispatcher.getInstance();a.setPublishers({dom:new Ext.event.publisher.Dom(),gesture:new Ext.event.publisher.Gesture({recognizers:{drag:new Ext.event.gesture.Drag(),tap:new Ext.event.gesture.Tap(),doubleTap:new Ext.event.gesture.DoubleTap(),longPress:new Ext.event.gesture.LongPress(),swipe:new Ext.event.gesture.Swipe(),pinch:new Ext.event.gesture.Pinch(),rotate:new Ext.event.gesture.Rotate(),edgeSwipe:new Ext.event.gesture.EdgeSwipe()}}),focus:new Ext.event.publisher.Focus()});Ext.get(window).on("unload",a.destroy,a)},null,{priority:2000});Ext.apply(Ext,{SSL_SECURE_URL:Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank",BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="});Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=true;a.addStateEvents(["changeregion","changeweight"]);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,"region");b=a.addPropertyToState(b,"weight");return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return(a&&a.isBorderLayout)?a:null},setRegion:function(k){var j=this,c,d=j.region;if(k!==d){c=j.getOwningBorderLayout();if(c){var f=c.regionFlags[k],l=j.placeholder,a=j.splitter,b=c.owner,n=c.regionMeta,e=j.collapsed||j.floated,m,h,g;if(j.fireEventArgs("beforechangeregion",[j,k])===false){return d}Ext.suspendLayouts();j.region=k;Ext.apply(j,f);if(j.updateCollapseTool){j.updateCollapseTool()}if(a){Ext.apply(a,f);a.updateOrientation();h=b.items;g=h.indexOf(j);if(g>=0){m=n[k].splitterDelta;if(h.getAt(g+m)!==a){h.remove(a);g=h.indexOf(j);if(m>0){++g}h.insert(g,a)}}}if(l){if(e){j.expand(false)}b.remove(l);j.placeholder=null;if(e){j.collapse(null,false)}}b.updateLayout();Ext.resumeLayouts(true);j.fireEventArgs("changeregion",[j,d])}else{j.region=k}}return d},setWeight:function(d){var c=this,b=c.getOwningBorderContainer(),e=c.placeholder,a=c.weight;if(d!==a){if(c.fireEventArgs("beforechangeweight",[c,d])!==false){c.weight=d;if(e){e.weight=d}if(b){b.updateLayout()}c.fireEventArgs("changeweight",[c,a])}}return a}},function(a){var b=a.prototype;b.setBorderRegion=b.setRegion;b.setRegionWeight=b.setWeight});Ext.define("ExtThemeNeptune.Component",{override:"Ext.Component",initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=false}},privates:{initStyles:function(){var c=this,b=c.hasOwnProperty("border"),a=c.border;if(c.dock){c.border=null}arguments.callee.$previous.apply(this,arguments);if(b){c.border=a}else{delete c.border}}}});(Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(n){var w=this,q=n.length,p={elseif:"elif"},r=w.topRe,c=w.actionsRe,e,d,j,o,g,k,h,v,u,b,f,a,l;w.level=0;w.stack=d=[];for(e=0;e<q;e=b){r.lastIndex=e;o=r.exec(n);if(!o){w.doText(n.substring(e,q));break}u=o.index;b=r.lastIndex;if(e<u){j=n.substring(e,u);if(!(l&&Ext.String.trim(j)==="")){w.doText(j)}}l=false;if(o[1]){b=n.indexOf("%}",u+2);w.doEval(n.substring(u+2,b));b+=2}else{if(o[2]){b=n.indexOf("]}",u+2);w.doExpr(n.substring(u+2,b));b+=2}else{if(o[3]){w.doTag(o[3])}else{if(o[4]){f=null;while((v=c.exec(o[4]))!==null){j=v[2]||v[3];if(j){j=Ext.String.htmlDecode(j);g=v[1];g=p[g]||g;f=f||{};k=f[g];if(typeof k=="string"){f[g]=[k,j]}else{if(k){f[g].push(j)}else{f[g]=j}}}}if(!f){if(w.elseRe.test(o[4])){w.doElse()}else{if(w.defaultRe.test(o[4])){w.doDefault()}else{w.doTpl();d.push({type:"tpl"})}}}else{if(f["if"]){w.doIf(f["if"],f);d.push({type:"if"})}else{if(f["switch"]){w.doSwitch(f["switch"],f);d.push({type:"switch"});l=true}else{if(f["case"]){w.doCase(f["case"],f)}else{if(f.elif){w.doElseIf(f.elif,f)}else{if(f["for"]){++w.level;if(a=w.propRe.exec(o[4])){f.propName=a[1]||a[2]}w.doFor(f["for"],f);d.push({type:"for",actions:f})}else{if(f.foreach){++w.level;if(a=w.propRe.exec(o[4])){f.propName=a[1]||a[2]}w.doForEach(f.foreach,f);d.push({type:"foreach",actions:f})}else{if(f.exec){w.doExec(f.exec,f);d.push({type:"exec",actions:f})}}}}}}}}}else{if(o[0].length===5){d.push({type:"tpl"})}else{h=d.pop();w.doEnd(h.type,h.actions);if(h.type=="for"||h.type=="foreach"){--w.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0));(Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(a){var c=this,b=c.generate(a);return c.useEval?c.evalTpl(b):(new Function("Ext",b))(Ext)},generate:function(a){var d=this,b="var fm=Ext.util.Format,ts=Object.prototype.toString;",c;d.maxLevel=0;d.body=["var c0=values, a0="+d.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(d.definitions){if(typeof d.definitions==="string"){d.definitions=[d.definitions,b]}else{d.definitions.push(b)}}else{d.definitions=[b]}d.switches=[];d.parse(a);d.definitions.push((d.useEval?"$=":"return")+" function ("+d.fnArgs+") {",d.body.join(""),"}");c=d.definitions.join("\n");d.definitions.length=d.body.length=d.switches.length=0;delete d.definitions;delete d.body;delete d.switches;return c},doText:function(c){var b=this,a=b.body;c=c.replace(b.aposRe,"\\'").replace(b.newLineRe,"\\n");if(b.useIndex){a.push("out[out.length]='",c,"'\n")}else{a.push("out.push('",c,"')\n")}},doExpr:function(b){var a=this.body;a.push("if ((v="+b+") != null) out");if(this.useIndex){a.push("[out.length]=v+''\n")}else{a.push(".push(v+'')\n")}},doTag:function(a){var b=this.parseTag(a);if(b){this.doExpr(b)}else{this.doText("{"+a+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(a){this.body.push(a,"\n")},doIf:function(b,c){var a=this;if(b==="."){a.body.push("if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("if (",a.parseTag(b),") {\n")}else{a.body.push("if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(b==="."){a.body.push("else if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("} else if (",a.parseTag(b),") {\n")}else{a.body.push("} else if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doSwitch:function(c){var b=this,a;if(c==="."||c==="#"){a=c==="."?"values":"xindex";b.body.push("switch (",a,") {\n")}else{if(b.propNameRe.test(c)){b.body.push("switch (",b.parseTag(c),") {\n")}else{b.body.push("switch (",b.addFn(c),b.callFn,") {\n")}}b.switches.push(0)},doCase:function(e){var d=this,c=Ext.isArray(e)?e:[e],f=d.switches.length-1,a,b;if(d.switches[f]){d.body.push("break;\n")}else{d.switches[f]++}for(b=0,f=c.length;b<f;++b){a=d.intRe.exec(c[b]);c[b]=a?a[1]:("'"+c[b].replace(d.aposRe,"\\'")+"'")}d.body.push("case ",c.join(": case "),":\n")},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push("break;\n")}else{a.switches[b]++}a.body.push("default:\n")},doEnd:function(b,d){var c=this,a=c.level-1;if(b=="for"||b=="foreach"){if(d.exec){c.doExec(d.exec)}c.body.push("}\n");c.body.push("parent=p",a,";values=r",a+1,";xcount=n"+a+";xindex=i",a,"+1;xkey=k",a,";\n")}else{if(b=="if"||b=="switch"){c.body.push("}\n")}}},doFor:function(e,g){var d=this,c,b=d.level,a=b-1,f;if(e==="."){c="values"}else{if(d.propNameRe.test(e)){c=d.parseTag(e)}else{c=d.addFn(e)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(e=="."){f="c"+b}else{f="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=0,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",f,"\n","if (c",b,"){if(a",b,"){n",b,"=c",b,".length;}else if (c",b,".isMixedCollection){c",b,"=c",b,".items;n",b,"=c",b,".length;}else if(c",b,".isStore){c",b,"=c",b,".data.items;n",b,"=c",b,".length;}else{c",b,"=[c",b,"];n",b,"=1;}}\n","for (xcount=n",b,";i",b,"<n"+b+";++i",b,"){\n","values=c",b,"[i",b,"]");if(g.propName){d.body.push(".",g.propName)}d.body.push("\n","xindex=i",b,"+1\n");if(g.between){d.body.push('if(xindex>1){ out.push("',g.between,'"); } \n')}},doForEach:function(e,g){var d=this,c,b=d.level,a=b-1,f;if(e==="."){c="values"}else{if(d.propNameRe.test(e)){c=d.parseTag(e)}else{c=d.addFn(e)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(e=="."){f="c"+b}else{f="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=-1,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",f,"\n","for(k",b," in c",b,"){\n","xindex=++i",b,"+1;\n","xkey=k",b,";\n","values=c",b,"[k",b,"];");if(g.propName){d.body.push(".",g.propName)}if(g.between){d.body.push('if(xindex>1){ out.push("',g.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(a){return"Array.isArray(c"+a+")"}:function(a){return"ts.call(c"+a+')==="[object Array]"'},doExec:function(d,e){var c=this,a="f"+c.definitions.length,b=c.guards[c.strict?0:1];c.definitions.push("function "+a+"("+c.fnArgs+") {",b.doTry," var $v = values; with($v) {","  "+d," }",b.doCatch,"}");c.body.push(a+c.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(a){var d=this,b="f"+d.definitions.length,c=d.guards[d.strict?0:1];if(a==="."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return values","}")}else{if(a===".."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return parent","}")}else{d.definitions.push("function "+b+"("+d.fnArgs+") {",c.doTry," var $v = values; with($v) {","  return("+a+")"," }",c.doCatch,"}")}}return b},parseTag:function(b){var g=this,a=g.tagRe.exec(b),e,h,d,f,c;if(!a){return null}e=a[1];h=a[2];d=a[3];f=a[4];if(e=="."){if(!g.validTypes){g.definitions.push("var validTypes={string:1,number:1,boolean:1};");g.validTypes=true}c='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(e=="#"){c="xindex"}else{if(e=="$"){c="xkey"}else{if(e.substr(0,7)=="parent."){c=e}else{if(isNaN(e)&&e.indexOf("-")==-1&&e.indexOf(".")!=-1){c="values."+e}else{c="values['"+e+"']"}}}}}if(f){c="("+c+f+")"}if(h&&g.useFormat){d=d?","+d:"";if(h.substr(0,5)!="this."){h="fm."+h+"("}else{h+="("}}else{return c}return h+c+d+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var a=this.prototype;a.fnArgs="out,values,parent,xindex,xcount,xkey";a.callFn=".call(this,"+a.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{emptyObj:{},fn:null,strict:false,apply:function(a,b){return this.applyOut(a,[],b).join("")},applyOut:function(a,b,d){var f=this,c;if(!f.fn){c=new Ext.util.XTemplateCompiler({useFormat:f.disableFormats!==true,definitions:f.definitions,strict:f.strict});f.fn=c.compile(f.html)}if(f.strict){f.fn(b,a,d||f.emptyObj,1,1)}else{try{f.fn(b,a,d||f.emptyObj,1,1)}catch(g){}}return b},compile:function(){return this},statics:{getTpl:function(b,d){var c=b[d],a;if(c&&!c.isTemplate){c=Ext.ClassManager.dynInstantiate("Ext.XTemplate",c);if(b.hasOwnProperty(d)){a=b}else{for(a=b.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass){}}a[d]=c;c.owner=a}return c||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="alert" aria-live="polite" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{id}-inputEl">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel"><div>{fieldLabel}</div></tpl>',"</tpl>",'<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel">{fieldLabel}\n</tpl>',"</tpl>",'<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",fieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var b=this.tip,a,c;if(b){return}a={id:"ext-form-error-tip",ui:"form-invalid"};if(Ext.supports.Touch){a.dismissDelay=0;a.anchor="top";a.showDelay=0;a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}b=this.tip=Ext.create("Ext.tip.QuickTip",a);c=Ext.apply({},b.tagConfig);c.attribute="errorqtip";b.setTagConfig(c)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(!a.activeErrorsTpl){if(a.msgTarget=="title"){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else{a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+"-"+a.ui]);a.lastActiveError="";a.enableBubble("errorchange")},trimLabelSeparator:function(){var c=this,d=c.labelSeparator,a=c.fieldLabel||"",b=a.substr(a.length-1);return b===d?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(c){c=c||"";var d=this,e=d.labelSeparator,b=d.labelEl,a=d.errorWrapEl,g=(d.labelAlign!=="top"),f=d.errorWrapUnderSideLabelCls;d.fieldLabel=c;if(d.rendered){if(Ext.isEmpty(c)&&d.hideEmptyLabel){b.setDisplayed("none");if(g&&a){a.removeCls(f)}}else{if(e){c=d.trimLabelSeparator()+e}b.first().setHtml(c);b.setDisplayed("");if(g&&a){a.addCls(f)}}d.updateLayout()}},getInsertionRenderData:function(d,e){var b=e.length,a,c;while(b--){a=e[b];c=this[a];if(c){if(typeof c!="string"){if(!c.isTemplate){c=Ext.XTemplate.getTpl(this,a)}c=c.apply(d)}}d[a]=c||""}return d},getLabelableRenderData:function(){var p=this,s=p.labelAlign,e=(s==="top"),m=(s==="right"),j=(p.msgTarget==="side"),f=(p.msgTarget==="under"),r=p.errorMsgCls,g=p.labelPad,o=p.labelWidth,b=p.labelClsExtra||"",h=j?p.errorWrapSideCls:p.errorWrapUnderCls,a="",l="",d=p.hasVisibleLabel(),n=p.autoFitErrors,k=p.defaultBodyWidth,c,q;if(e){b+=" "+p.topLabelCls;if(g){l="padding-bottom:"+g+"px;"}if(j&&!n){b+=" "+p.topLabelSideErrorCls}}else{if(m){b+=" "+p.rightLabelCls}if(g){a+=p.getHorizontalPaddingStyle()+g+"px;"}a+="width:"+(o+(g?g:0))+"px;";l="width:"+o+"px"}if(d){if(!e&&f){h+=" "+p.errorWrapUnderSideLabelCls}}else{a+="display:none;"}if(k){c="min-width:"+k+"px;max-width:"+k+"px;"}q={id:p.id,inputId:p.getInputId(),labelCls:p.labelCls,labelClsExtra:b,labelStyle:a+(p.labelStyle||""),labelInnerStyle:l,labelInnerCls:p.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:c,baseBodyCls:p.baseBodyCls,fieldBodyCls:p.fieldBodyCls,extraFieldBodyCls:p.extraFieldBodyCls,errorWrapCls:p.errorWrapCls,errorWrapExtraCls:h,renderError:j||f,invalidMsgCls:j?p.invalidIconCls:f?p.invalidUnderCls:"",errorMsgCls:r,growCls:p.grow?p.growCls:"",errorWrapStyle:(j&&!n)?"visibility:hidden":"display:none",fieldLabel:p.getFieldLabel(),labelSeparator:p.labelSeparator};p.getInsertionRenderData(q,p.labelableInsertions);return q},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls("x-"+a.ownerLayout.type+"-form-item")}},onLabelRender:function(){var d=this,c={},f=Ext.Element,a=d.errorWrapEl,e,b;if(a){a.setVisibilityMode((d.msgTarget==="side"&&!d.autoFitErrors)?f.VISIBILITY:f.DISPLAY)}if(d.extraMargins){e=d.el.getMargin();for(b in e){if(e.hasOwnProperty(b)){c["margin-"+b]=(e[b]+d.extraMargins[b])+"px"}}d.el.setStyle(c)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(g){var e=this,f=e.errorWrapEl,c=e.msgTarget,b=c==="side",j=c==="qtip",a,d,h;g=Ext.Array.from(g);d=e.getTpl("activeErrorsTpl");e.activeErrors=g;a=e.activeError=d.apply({fieldLabel:e.fieldLabel,errors:g,listCls:Ext.plainListCls});e.renderActiveError();if(e.rendered){if(b){e.errorEl.dom.setAttribute("data-errorqtip",a)}else{if(j){e.getActionEl().dom.setAttribute("data-errorqtip",a)}else{if(c==="title"){e.getActionEl().dom.setAttribute("title",a)}}}if(b||j){Ext.form.Labelable.initTip()}if(!e.msgTargets[c]){h=Ext.get(c);if(h){h.dom.innerHTML=a}}}if(f){f.setVisible(g.length>0);if(b&&e.autoFitErrors){e.labelEl.addCls(e.topLabelSideErrorCls)}e.updateLayout()}},unsetActiveError:function(){var c=this,a=c.errorWrapEl,b=c.msgTarget,d;delete c.activeError;delete c.activeErrors;c.renderActiveError();if(c.rendered){if(b==="qtip"){c.getActionEl().dom.removeAttribute("data-errorqtip")}else{if(b==="title"){c.getActionEl().dom.removeAttribute("title")}}if(!c.msgTargets[b]){d=Ext.get(b);if(d){d.dom.innerHTML=""}}if(a){a.hide();if(b==="side"&&c.autoFitErrors){c.labelEl.removeCls(c.topLabelSideErrorCls)}c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.getActiveError(),a=!!b;if(b!==c.lastActiveError){c.lastActiveError=b;c.fireEvent("errorchange",c,b)}if(c.rendered&&!c.isDestroyed&&!c.preventMark){c.toggleInvalidCls(a);if(c.errorEl){c.errorEl.dom.innerHTML=b}}},toggleInvalidCls:function(a){this.el[a?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}}));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var d=this,c=d.valuePublishEvent,a,b;d.initValue();if(Ext.isString(c)){d.on(c,d.publishValue,d)}else{for(b=0,a=c.length;b<a;++b){d.on(c[b],d.publishValue,d)}}},initValue:function(){var a=this;a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--;a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.valueFrom(b,""))===String(Ext.valueFrom(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(a,b){var c=this,d=null;if(!c.disabled&&(c.submitValue||!b)){d={};d[c.getFieldIdentifier()]=c.getValue()}return d},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var c=this,b,a;if(!c.suspendCheckChange){b=c.getValue();a=c.lastValue;if(!c.isDestroyed&&c.didValueChange(b,a)){c.lastValue=b;c.fireEvent("change",c,b,a);c.onChange(b,a)}}},didValueChange:function(b,a){return !this.isEqual(b,a)},onChange:function(a){var b=this;if(b.validateOnChange){b.validate()}b.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(d){var e=[],c=this.getValidationField(),b=this.getValidation(),a;if(c){a=c.validate(d);if(a!==true){e.push(a)}}if(b&&b!==true){e.push(b)}return e},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){var a=this,b=a.isValid();if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(a,b){if(b){this.validate()}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:"x-form-readonly",validateOnBlur:true,hasFocus:false,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:false,stretchInputElFixed:true,initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.subTplData=a.subTplData||{};a.initLabelable();a.initField();if(!a.name){a.name=a.getInputId()}if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls("x-form-type-"+a.inputType)},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(b){var d=this,c=d.inputType,a=d.getInputId(),e;e=Ext.apply({ui:d.ui,id:a,cmpId:d.id,name:d.name||a,disabled:d.disabled,readOnly:d.readOnly,value:d.getRawValue(),type:c,fieldCls:d.fieldCls,fieldStyle:d.getFieldStyle(),childElCls:b.childElCls,tabIdx:d.tabIndex,inputCls:d.inputCls,typeCls:"x-form-"+(d.isTextInput?"text":c),role:d.ariaRole},d.subTplData);d.getInsertionRenderData(e,d.subTplInsertions);return e},getSubTplMarkup:function(b){var c=this,d=c.getSubTplData(b),e=c.getTpl("preSubTpl"),f=c.getTpl("postSubTpl"),a="";if(e){a+=e.apply(d)}a+=c.getTpl("fieldSubTpl").apply(d);if(f){a+=f.apply(d)}return a},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;if(c){c.applyStyles(a)}b.fieldStyle=a},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,true):a||""},onRender:function(){(arguments.callee.$previous||Ext.Component.prototype.onRender).apply(this,arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.valueFrom(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(c){var a=this,b=a.rawValue;if(!a.transformRawValue.$nullFn){c=a.transformRawValue(c)}c=Ext.valueFrom(c,"");if(b===undefined||b!==c){a.rawValue=c;if(a.inputEl){a.bindPropertyChange(false);a.inputEl.dom.value=c;a.bindPropertyChange(true)}if(a.rendered&&a.reference){a.publishState("rawValue",c)}}return c},transformRawValue:Ext.identityFn,valueToRaw:function(a){return""+Ext.valueFrom(a,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;Ext.Component.prototype.onBoxReady.call(this);if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onDisable.call(this);if(b){b.dom.disabled=true;if(a.hasActiveError()){a.clearInvalid();a.needsValidateOnEnable=true}}},onEnable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onEnable.call(this);if(b){b.dom.disabled=false;if(a.needsValidateOnEnable){delete a.needsValidateOnEnable;a.forceValidation=true;a.isValid();delete a.forceValidation}}},setReadOnly:function(c){var a=this,b=a.inputEl;c=!!c;a[c?"addCls":"removeCls"](a.readOnlyCls);a.readOnly=c;if(b){b.dom.readOnly=c}else{if(a.rendering){a.setReadOnlyOnBoxReady=true}}a.fireEvent("writeablechange",a,c)},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,a)}},initEvents:function(){var g=this,h=g.inputEl,c,f,j=g.checkChangeEvents,k=g.ignoreChangeRe,b=j.length,d,a;if(h){g.mon(h,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",g.fireKey,g);c=new Ext.util.DelayedTask(g.checkChange,g);g.onChangeEvent=f=function(l){if(!(l.type=="propertychange"&&k.test(l.browserEvent.propertyName))){c.delay(g.checkChangeBuffer)}};for(d=0;d<b;d++){a=j[d];if(a==="propertychange"){g.usesPropertychange=true}g.mon(h,a,f)}}Ext.Component.prototype.initEvents.call(this)},bindPropertyChange:function(c){var b=this,a=b.usesPropertychange;if(a){b[c?"mon":"mun"](b.inputEl,"propertychange",b.onChangeEvent)}},onDirtyChange:function(b){var a=this;a[b?"addCls":"removeCls"](a.dirtyCls);if(a.rendered&&a.reference){a.publishState("dirty",b)}},isValid:function(){var b=this,a=b.disabled,c=b.forceValidation||!a;return c?b.validateValue(b.processRawValue(b.getRawValue())):a},validateValue:function(b){var a=this,d=a.getErrors(b),c=Ext.isEmpty(d);if(!a.preventMark){if(c){a.clearInvalid()}else{a.markInvalid(d)}}return c},markInvalid:function(d){var b=this,a=b.getActiveError(),c;b.setActiveErrors(Ext.Array.from(d));c=b.getActiveError();if(a!==c){b.setError(c)}},clearInvalid:function(){var b=this,a=b.hasActiveError();delete b.needsValidateOnEnable;b.unsetActiveError();if(a){b.setError("")}},setError:function(a){var c=this,b=c.msgTarget,d;if(c.rendered){if(b=="title"||b=="qtip"){d=b=="qtip"?"data-errorqtip":"title";c.getActionEl().dom.setAttribute(d,a||"")}else{c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.hasActiveError(),a=c.invalidCls+"-field";if(c.inputEl){c.inputEl[b?"addCls":"removeCls"]([a,a+"-"+c.ui])}c.mixins.labelable.renderActiveError.call(c)},privates:{applyBind:function(e,c){var b=this,a=c&&c.value,d;d=Ext.Component.prototype.applyBind.call(this,e,c);if(d.value!==a&&b.getInherited().modelValidation){b.updateValueBinding(d)}return d},applyRenderSelectors:function(){var a=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.Component.prototype.initRenderTpl.call(this)},updateValueBinding:function(d){var c=this,b=d.value,a=d.$fieldBinding;if(a){a.destroy();d.$fieldBinding=null}if(b&&b.bindValidationField){c.fieldBinding=b.bindValidationField("setValidationField",c)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindPropertyChange(false);this.callParent(arguments);this.bindPropertyChange(true)}}}}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));Ext.define("FBEditor.override.form.field.Base",{override:"Ext.form.field.Base",msgTarget:"title",tabIndex:1,keyEnterAsTab:false,initComponent:function(){var a=this;(arguments.callee.$previous||Ext.Component.prototype.initComponent).call(this);a.on("specialkey",a.checkEnterKey,a)},checkEnterKey:function(f,d){var c=this,g,b,a;if(d.getKey()===d.ENTER&&c.keyEnterAsTab){g=Ext.getCmp("form-desc").query("field:focusable");b=g[g.length-1];if(c.getId()===b.getId()){a=g[0]}else{a=c.nextNode(":focusable")}while(a){if(a.isXType("field")&&a.tabIndex){d.stopEvent();a.focus();break}else{if(a.isXType("container")){if(a.down("htmleditor")){a=a.down("htmleditor");a.focus([0,0],0);break}else{a=a.down(":focusable")}}else{a=a.nextNode(":focusable")}}}}}});(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(e){return b.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(e){return a.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(e){return c.test(e)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return d.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(b,a){var c=this;c.el=Ext.get(b);c.el.unselectable();Ext.apply(c,a);Ext.util.Observable.prototype.constructor.call(this);if(!c.disabled){c.disabled=true;c.enable()}if(c.handler){c.on("click",c.handler,c.scope||c)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE8){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.clearListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);this.clearListeners()},handleDblClick:function(a){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);this.el.blur();if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a])},click:function(a){this.fireEvent("click",this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(e,a,g,f){return(e==f)?a+g:g*(-Math.pow(2,-10*e/f)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(a){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(a)},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,a)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));Ext.Factory=function(a){var b=this;b.aliasPrefix=a+".";b.cache={};b.name=a.replace(b.fixNameRe,b.fixNameFn);b.type=a};Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(c,e){var h=this,a=Ext.ClassManager,b=h.cache,d,g,f,j;if(c){if(c[h.instanceProp]){return c}if(typeof c==="string"){j=c;c={};c[h.defaultProperty]=j}g=c.xclass;j=c.type}if(g){if(!(f=a.get(g))){return a.instantiate(g,c)}}else{if(!(j=j||e||h.defaultType)){f=h.defaultClass}if(!f&&!(f=b[j])){d=h.aliasPrefix+j;g=a.getNameByAlias(d);if(!(f=g&&a.get(g))){return a.instantiateByAlias(d,c)}b[j]=f}}return f.isInstance?f:new f(c)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(f,d){var a=Ext.Factory,b,c,e;if(f.constructor===Object){Ext.Object.each(f,a.define,a)}else{c=new Ext.Factory(f);if(d){if(d.constructor===Object){Ext.apply(c,d);if(typeof(b=c.xclass)==="string"){c.defaultClass=Ext.ClassManager.get(b)}}else{c.defaultType=d}}a[c.name]=e=c.create.bind(c);e.instance=c}return e};(Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(e){var d=e.prototype,f=d.factoryConfig,c=d.alias,b={},a;c=c&&c.length&&c[0];if(c&&(a=c.lastIndexOf("."))>0){b.type=c.substring(0,a);b.defaultType=c.substring(a+1)}if(f){delete d.factoryConfig;Ext.apply(b,f)}e.create=Ext.Factory.define(b.type,b)}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0));(Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,weight:0,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(b){var c=this,a;Ext.apply(c,b);if(c.compat4Mode){a=c.cls;c.focusCls=[c.focusCls,a+"-focus"];c.overCls=[c.overCls,a+"-over"];c.clickCls=[c.clickCls,a+"-click"]}},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this,b=a.clickRepeater;if(b){b.destroy()}if(a.el){a.el.destroy()}a.el=null;a.isDestroyed=true},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=true;if(a){a.hide()}},initEvents:function(){var d=this,a=d.isFieldEnabled,c=d.getStateEl(),b=d.el;c.addClsOnOver(d.overCls,a,d);c.addClsOnClick(d.clickCls,a,d);if(d.repeatClick){d.clickRepeater=new Ext.util.ClickRepeater(b,{preventDefault:true,handler:d.onClick,listeners:{mousedown:d.onClickRepeaterMouseDown,scope:d},scope:d})}else{d.field.mon(b,{click:d.onClick,mousedown:d.onMouseDown,scope:d})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var a=this,c=a.field,b=false;if(a.hidden||!c||!a.rendered||a.isDestroyed){b=true}return !b},onClick:function(){var c=this,a=arguments,f=c.clickRepeater?a[1]:a[0],b=c.handler,d=c.field;if(b&&!d.readOnly&&c.isFieldEnabled()){Ext.callback(c.handler,c.scope,[d,c,f],0,d)}},resolveListenerScope:function(a){return this.field.resolveListenerScope(a)},onMouseDown:function(a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var b=this,a=b.el=b.field.triggerWrap.selectNode("#"+b.domId,false);a.setVisibilityMode(Ext.Element.DISPLAY);b.rendered=true},renderBody:function(b){var a=this,c=a.bodyTpl;Ext.apply(b,a.getBodyRenderData());return c?Ext.XTemplate.getTpl(a,"bodyTpl").apply(b):""},renderTrigger:function(a){var c=this,b=c.width,d=c.hidden?"display:none;":"";if(b){d+="width:"+b}return Ext.XTemplate.getTpl(c,"renderTpl").apply({$trigger:c,fieldData:a,ui:a.ui,childElCls:a.childElCls,triggerId:c.domId=c.field.id+"-trigger-"+c.id,cls:c.cls,triggerStyle:d,extraCls:c.extraCls,baseCls:c.baseCls})},setHidden:function(a){if(a!==this.hidden){this[a?"hide":"show"]()}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=false;if(a){a.show()}}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(a,d,e){var b=this,c=b.shared;if(!c){c=b.shared=new b(a,e)}c.bind(a);c.setFixedWidth(e||"auto");return c.getSize(d)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(a,d){var c=this,b=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});c.measure=b;if(a){c.bind(a)}b.position("absolute");b.setLocalXY(-1000,-1000);b.hide();if(d){b.setWidth(d)}},getSize:function(c){var b=this.measure,a;b.setHtml(c);a=b.getSize();b.setHtml("");return a},bind:function(a){var b=this;b.el=Ext.get(a);b.measure.setStyle(b.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width="auto";return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.measure.destroy();delete a.el;delete a.measure}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(c,b,a){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(c,this.dom.innerHTML,true)).width,b||0,a||1000000)}})}));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:"x-form-empty-field",requiredCls:"x-form-required-field",valueContainsPlaceholder:false,ariaRole:"textbox",editable:true,repeatTriggerClick:false,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",monitorTab:true,mimicing:false,needArrowKeys:true,childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var b=this,a=b.emptyCls;if(b.allowOnlyWhitespace===false){b.allowBlank=false}if(b.size){b.defaultBodyWidth=b.size*6.5+20}if(!b.onTrigger1Click){b.onTrigger1Click=b.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);b.setReadOnly(b.readOnly);b.fieldFocusCls=b.baseCls+"-focus";b.emptyUICls=a+" "+a+"-"+b.ui;b.addStateEvents("change")},initEvents:function(){var b=this,a=b.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(b,a){Ext.form.field.Base.prototype.onChange.apply(this,arguments);this.autoSize()},getSubTplData:function(b){var c=this,d=c.getRawValue(),f=c.emptyText&&d.length<1,a=c.maxLength,e;if(c.enforceMaxLength){if(a===Number.MAX_VALUE){a=undefined}}else{a=undefined}if(f){if(Ext.supports.Placeholder){e=c.emptyText}else{d=c.emptyText;c.valueContainsPlaceholder=true}}return Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{triggerWrapCls:c.triggerWrapCls,inputWrapCls:c.inputWrapCls,triggers:c.orderedTriggers,maxLength:a,readOnly:!c.editable||c.readOnly,placeholder:e,value:d,fieldCls:c.fieldCls+((f&&(e||d))?" "+c.emptyUICls:"")+(c.allowBlank?"":" "+c.requiredCls)})},onRender:function(){var c=this,b=c.getTriggers(),d=[],e,a;if(Ext.supports.FixedTableWidthBug){c.el._needsTableWidthFix=true}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(b){this.invokeTriggers("onFieldRender");for(e in b){d.push(b[e].el)}a=c.triggerEl=c.triggerCell=new Ext.CompositeElement(d,true)}c.inputCell=c.inputWrap},afterRender:function(){var a=this;a.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);this.invokeTriggers("afterFieldRender")},onMouseDown:function(){var a=this;if(!a.hasFocus){a.mon(a.inputEl,"mouseup",Ext.emptyFn,a,{single:true,preventDefault:true})}},applyTriggers:function(g){var h=this,c=h.getHideTrigger(),k=h.readOnly,l=h.orderedTriggers=[],j=h.repeatTriggerClick,b,f,d,a,e;if(!g){g={};if(h.triggerCls&&!h.trigger1Cls){h.trigger1Cls=h.triggerCls}for(e=1;a=h["trigger"+e+"Cls"];e++){g["trigger"+e]={cls:a,extraCls:"x-trigger-index-"+e,handler:"onTrigger"+e+"Click",compat4Mode:true,scope:h}}}for(b in g){if(g.hasOwnProperty(b)){f=g[b];f.field=h;f.id=b;if((k&&f.hideOnReadOnly!==false)||(c&&f.hidden!==false)){f.hidden=true}if(j&&(f.repeatClick!==false)){f.repeatClick=true}d=g[b]=Ext.form.trigger.Trigger.create(f);l.push(d)}}Ext.Array.sort(l,Ext.form.trigger.Trigger.weightComparator);return g},invokeTriggers:function(a,c){var e=this,d=e.getTriggers(),f,b;if(d){for(f in d){if(d.hasOwnProperty(f)){b=d[f];b[a].apply(b,c||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){if(this.rendered){this.invokeTriggers(a?"hide":"show")}},setEditable:function(a){var b=this;b.editable=a;if(b.rendered){b.setReadOnlyAttr(!a||b.readOnly)}},setReadOnly:function(f){var d=this,c=d.getTriggers(),b=d.getHideTrigger(),a,e;f=!!f;Ext.form.field.Base.prototype.setReadOnly.call(this,f);if(d.rendered){d.setReadOnlyAttr(f||!d.editable);if(c){for(e in c){a=c[e];if(a.hideOnReadOnly===true||(a.hideOnReadOnly!==false&&!b)){a[f?"hide":"show"].call(a)}}}}},setReadOnlyAttr:function(d){var b=this,a="readonly",c=b.inputEl.dom;if(d){c.setAttribute(a,a)}else{c.removeAttribute(a)}},processRawValue:function(b){var a=this,d=a.stripCharsRe,c;if(d){c=b.replace(d,"");if(c!==b){a.setRawValue(c);b=c}}return b},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.field.Base.prototype.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){var b=this,a=b.emptyText,c;if(b.rendered&&a){c=b.getRawValue().length<1&&!b.hasFocus;if(Ext.supports.Placeholder){b.inputEl.dom.placeholder=a}else{if(c){b.setRawValue(a);b.valueContainsPlaceholder=true}}if(c){b.inputEl.addCls(b.emptyUICls)}b.autoSize()}},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var a=this.inputEl;if(a){a.dom.unselectable="on"}}},toggleInvalidCls:function(a){var b=a?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this);this.triggerWrap[b](this.triggerWrapInvalidCls);this.inputWrap[b](this.inputWrapInvalidCls)},beforeFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,d;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments);if((a&&!Ext.supports.Placeholder)&&(c.dom.value===b.emptyText&&b.valueContainsPlaceholder)){b.setRawValue("");d=true;c.removeCls(b.emptyUICls);b.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){c.removeCls(b.emptyUICls)}}if(b.selectOnFocus||d){if(Ext.isWebKit){if(!b.inputFocusTask){b.inputFocusTask=new Ext.util.DelayedTask(b.focusInput,b)}b.inputFocusTask.delay(1)}else{b.focusInput()}}},focusInput:function(){var a=this.inputEl;if(a){a=a.dom;if(a){a.select()}}},onFocus:function(b){var a=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments);if(a.emptyText){a.autoSize()}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldFocus",[b])},onBlur:function(b){var a=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments);a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldBlur",[b]);a.postBlur()},postBlur:function(){var a=this.inputFocusTask;Ext.form.field.Base.prototype.postBlur.apply(this,arguments);this.applyEmptyText();if(a){a.cancel()}},filterKeys:function(c){if(c.ctrlKey&&!c.altKey){return}var b=c.getKey(),a=String.fromCharCode(c.getCharCode());if((Ext.isGecko||Ext.isOpera)&&(c.isNavKeyPress()||b===c.BACKSPACE||(b===c.DELETE&&c.button===-1))){return}if((!Ext.isGecko&&!Ext.isOpera)&&c.isSpecialKey()&&!a){return}if(!this.maskRe.test(a)){c.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(a){Ext.form.field.Base.prototype.applyState.apply(this,arguments);if(a.hasOwnProperty("value")){this.setValue(a.value)}},getRawValue:function(){var b=this,a=Ext.form.field.Base.prototype.getRawValue.call(this);if(a===b.emptyText&&b.valueContainsPlaceholder){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyUICls);a.valueContainsPlaceholder=false}Ext.form.field.Base.prototype.setValue.apply(this,arguments);a.applyEmptyText();return a},getErrors:function(l){l=arguments.length?(l==null?"":l):this.processRawValue(this.getRawValue());var f=this,j=Ext.form.field.Base.prototype.getErrors.call(this,l),a=f.validator,d=f.vtype,g=Ext.form.field.VTypes,h=f.regex,k=Ext.String.format,b,e,c;if(Ext.isFunction(a)){b=a.call(f,l);if(b!==true){j.push(b)}}e=f.allowOnlyWhitespace?l:Ext.String.trim(l);if(e.length<1||(l===f.emptyText&&f.valueContainsPlaceholder)){if(!f.allowBlank){j.push(f.blankText)}if(!f.validateBlank){return j}c=true}if(!c&&l.length<f.minLength){j.push(k(f.minLengthText,f.minLength))}if(l.length>f.maxLength){j.push(k(f.maxLengthText,f.maxLength))}if(d){if(!g[d](l,f)){j.push(f.vtypeText||g[d+"Text"])}}if(h&&!h.test(l)){j.push(f.regexText||f.invalidText)}return j},selectText:function(h,a){var g=this,c=g.getRawValue(),d=true,f=g.inputEl.dom,e,b;if(c.length>0){h=h===e?0:h;a=a===e?c.length:a;if(f.setSelectionRange){f.setSelectionRange(h,a)}else{if(f.createTextRange){b=f.createTextRange();b.moveStart("character",h);b.moveEnd("character",a-c.length);b.select()}}d=Ext.isGecko||Ext.isOpera}if(d){g.focus()}},autoSize:function(){var e=this,d,j,b,g,h,c,a,f;if(e.grow&&e.rendered&&e.getSizeModel().width.auto){h=e.inputEl;d=e.getTriggers();g=0;f=Ext.util.Format.htmlEncode(h.dom.value||(e.hasFocus?"":e.emptyText)||"");f+=e.growAppend;for(j in d){g+=d[j].el.getWidth()}a=h.getTextWidth(f)+g+e.inputWrap.getBorderWidth("lr")+e.triggerWrap.getBorderWidth("lr");a=Math.min(Math.max(a,e.growMin),e.growMax);e.bodyEl.setWidth(a);e.updateLayout();e.fireEvent("autosize",e,a)}},onDestroy:function(){var a=this;a.invokeTriggers("destroy");Ext.destroy(a.triggerRepeater);Ext.form.field.Base.prototype.onDestroy.call(this);if(a.inputFocusTask){a.inputFocusTask.cancel();a.inputFocusTask=null}},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var b=this.getTriggers(),a=0,c;if(b&&this.rendered){for(c in b){if(b.hasOwnProperty(c)){a+=b[c].el.getWidth()}}}return a}}}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));Ext.define("FBEditor.override.form.field.Text",{override:"Ext.form.field.Text",fieldSubTpl:['<tpl if="triggers.length"><span class="input-fade-triggers"></span>','<tpl else><span class="input-fade"></span></tpl>','<input id="{id}" data-ref="inputEl" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],getValue:function(){var a=this,b;b=Ext.form.field.Base.prototype.getValue.apply(this,arguments);if(b&&Ext.isString(b)){b=b.trim();b=b.replace(/\t/ig," ")}return b}});(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",inputTagRe:/input|textarea/i,eventName:"keydown",constructor:function(a){var b=this;if((arguments.length!==1)||(typeof a==="string")||a.dom||a.tagName||a===document||a.isComponent){b.legacyConstructor.apply(b,arguments);return}Ext.apply(b,a);b.bindings=[];if(!b.target.isComponent){b.target=Ext.get(b.target)}if(b.binding){b.addBinding(b.binding)}else{if(a.key){b.addBinding(a)}}b.enable()},legacyConstructor:function(b,d,a){var c=this;Ext.apply(c,{target:Ext.get(b),eventName:a||c.eventName,bindings:[]});if(d){c.addBinding(d)}c.enable()},addBinding:function(e){var c=this,d=e.key,b,a;if(c.processing){c.bindings=bindings.slice(0)}if(Ext.isArray(e)){for(b=0,a=e.length;b<a;b++){c.addBinding(e[b])}return}c.bindings.push(Ext.apply({keyCode:c.processKeys(d)},e))},removeBinding:function(f){var e=this,g=e.bindings,a=g.length,b,d,c;if(e.processing){e.bindings=g.slice(0)}c=e.processKeys(f.key);for(b=0;b<a;++b){d=g[b];if((d.fn||d.handler)===(f.fn||f.handler)&&d.scope===f.scope){if(f.alt===d.alt&&f.crtl===d.crtl&&f.shift===d.shift){if(Ext.Array.equals(d.keyCode,c)){Ext.Array.erase(e.bindings,b,1);return}}}}},processKeys:function(f){var g=false,d,e,b,a,c;if(Ext.isString(f)){e=[];b=f.toUpperCase();for(c=0,a=b.length;c<a;++c){e.push(b.charCodeAt(c))}f=e;g=true}if(!Ext.isArray(f)){f=[f]}if(!g){for(c=0,a=f.length;c<a;++c){d=f[c];if(Ext.isString(d)){f[c]=d.toUpperCase().charCodeAt(0)}}}return f},handleTargetEvent:function(f){var e=this,b=e.inputTagRe,h,c,a,g,d;if(e.enabled){h=e.bindings;c=0;a=h.length;e.lastKeyEvent=f=e.processEvent.apply(e||e.processEventScope,arguments);if(e.ignoreInputFields){g=f.target;d=g.contentEditable;if((b.test(g.tagName)&&g.type!=="button")||(d===""||d==="true")){return}}if(!f.getKey){return f}e.processing=true;for(;c<a;++c){e.processBinding(h[c],f)}e.processing=false}},processEvent:Ext.identityFn,processBinding:function(e,a){if(this.checkModifiers(e,a)){var f=a.getKey(),h=e.fn||e.handler,j=e.scope||this,g=e.keyCode,b=e.defaultEventAction,c,d;for(c=0,d=g.length;c<d;++c){if(f===g[c]){if(h.call(j,f,a)!==true&&b){a[b]()}break}}}},checkModifiers:function(g,e){var d=["shift","ctrl","alt"],c=0,a=d.length,f,b;for(;c<a;++c){b=d[c];f=g[b];if(!(f===undefined||(f===e[b+"Key"]))){return false}}return true},on:function(b,d,c){var g,a,e,f;if(Ext.isObject(b)&&!Ext.isArray(b)){g=b.key;a=b.shift;e=b.ctrl;f=b.alt}else{g=b}this.addBinding({key:g,shift:a,ctrl:e,alt:f,fn:d,scope:c})},un:function(b,d,c){var g,a,e,f;if(Ext.isObject(b)&&!Ext.isArray(b)){g=b.key;a=b.shift;e=b.ctrl;f=b.alt}else{g=b}this.removeBinding({key:g,shift:a,ctrl:e,alt:f,fn:d,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture});a.enabled=true}},disable:function(){var a=this;if(a.enabled){a.target.removeListener(a.eventName,a.handleTargetEvent,a);a.enabled=false}},setDisabled:function(a){if(a){this.disable()}else{this.enable()}},destroy:function(c){var a=this,b=a.target;a.bindings=[];a.disable();if(c){b.destroy()}delete a.target}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(a){var b=this;if(arguments.length===2){b.legacyConstructor.apply(b,arguments);return}b.setConfig(a)},legacyConstructor:function(b,a){this.setConfig(Ext.apply({target:b},a))},setConfig:function(a){var c=this,b={target:a.target,ignoreInputFields:a.ignoreInputFields,eventName:c.getKeyEvent("forceKeyDown" in a?a.forceKeyDown:c.forceKeyDown,a.eventName),capture:a.capture},d;if(c.map){c.map.destroy()}if(a.processEvent){b.processEvent=a.processEvent;b.processEventScope=a.processEventScope||c}if(a.keyMap){d=c.map=a.keyMap}else{d=c.map=new Ext.util.KeyMap(b);c.destroyKeyMap=true}this.addBindings(a);d.disable();if(!a.disabled){d.enable()}},addBindings:function(g){var c=this,b,e,d=c.map,a=Ext.util.KeyNav.keyOptions,f=g.scope||c;for(b in g){e=g[b];if(e&&(b.length===1||(b=a[b])||(!isNaN(b=parseInt(b,10))))){if(typeof e==="function"){e={handler:e,defaultEventAction:(g.defaultEventAction!==undefined)?g.defaultEventAction:c.defaultEventAction}}d.addBinding({key:b,ctrl:e.ctrl,shift:e.shift,alt:e.alt,handler:Ext.Function.bind(c.handleEvent,e.scope||f,[e.handler||e.fn,c],true),defaultEventAction:(e.defaultEventAction!==undefined)?e.defaultEventAction:c.defaultEventAction})}}},handleEvent:function(d,c,b,a){a.lastKeyEvent=c;return b.call(this,c)},disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,eventName:"keypress",destroy:function(a){if(this.destroyKeyMap){this.map.destroy(a)}delete this.map},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(b,a){if(b||(Ext.supports.SpecialKeyDownRepeat&&!a)){return"keydown"}else{return a||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",editable:true,applyTriggers:function(b){var c=this,a=b.picker;if(!a.cls){a.cls=c.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},initEvents:function(){var a=this;Ext.form.field.Text.prototype.initEvents.call(this);a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:false},scope:a,forceKeyDown:true});if(!a.editable){a.mon(a.inputEl,"click",a.onTriggerClick,a)}if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(){if(!this.isExpanded){this.onTriggerClick()}},expand:function(){var c=this,a,b,d;if(c.rendered&&!c.isExpanded&&!c.isDestroyed){c.expanding=true;a=c.bodyEl;b=c.getPicker();d=c.collapseIf;b.show();c.isExpanded=true;c.alignPicker();a.addCls(c.openCls);c.mon(Ext.getDoc(),{mousewheel:d,mousedown:d,scope:c});Ext.on("resize",c.alignPicker,c);c.fireEvent("expand",c);c.onExpand();delete c.expanding}},onExpand:Ext.emptyFn,alignPicker:function(){var c=this,b,a=c.getPicker();if(c.isExpanded){if(c.matchFieldWidth){b=c.bodyEl.getWidth();a.setWidth(b)}if(a.isFloating()){c.doAlign()}}},doAlign:function(){var d=this,c=d.picker,a="-above",b;d.picker.alignTo(d.triggerWrap,d.pickerAlign,d.pickerOffset);b=c.el.getY()<d.inputEl.getY();d.bodyEl[b?"addCls":"removeCls"](d.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},collapse:function(){var d=this;if(d.isExpanded&&!d.isDestroyed&&!d.destroying){var c=d.openCls,b=d.picker,e=Ext.getDoc(),f=d.collapseIf,a="-above";b.hide();d.isExpanded=false;d.bodyEl.removeCls([c,c+a]);b.el.removeCls(b.baseCls+a);e.un("mousewheel",f,d);e.un("mousedown",f,d);Ext.un("resize",d.alignPicker,d);d.fireEvent("collapse",d);d.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.isDestroyed&&!b.within(a.bodyEl,false,true)&&!a.owns(b.target)){a.collapse()}},getPicker:function(){var b=this,a=b.picker;if(!a){b.picker=a=b.createPicker();a.ownerCmp=b}return b.picker},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}}},onOtherFocus:function(a){if(this.hasFocus&&!this.owns(a)){this.callParent([a])}},beforeDestroy:function(){var b=this,a=b.picker;b.collapse();Ext.form.field.Text.prototype.beforeDestroy.call(this);Ext.un("resize",b.alignPicker,b);Ext.destroy(b.keyNav,a);if(a){delete b.picker;delete a.pickerField}}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",bindStore:function(b,c,a){a=a||"store";var d=this,e=d[a];if(!c&&e){d.onUnbindStore(e,c,a);if(b!==e){if(a==="store"&&e.autoDestroy){e.destroy()}else{d.unbindStoreListeners(e)}}}if(b){d[a]=b=Ext.data.StoreManager.lookup(b);d.bindStoreListeners(b);d.onBindStore(b,c,a,e)}else{d[a]=null}return d},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(a){var b=this.storeListeners;if(b){a.un(b)}},bindStoreListeners:function(a){var b=this.getStoreListeners(a);if(b){b=Ext.apply({},b);if(!b.scope){b.scope=this}this.storeListeners=b;a.on(b)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:"x-mask-loading",maskCls:"x-mask",cls:"x-mask-msg",useMsg:true,useTargetEl:false,ariaRole:"presentation",childEls:["msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgEl" data-ref="msgEl" role="{role}"','<tpl if="ariaAttr"> {ariaAttr}</tpl>',' class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}">{msg}</div>',"</div>"],constructor:function(b){var c=this,a;if(arguments.length===2){a=c.target=b;b=arguments[1]}else{a=b.target}Ext.Component.prototype.constructor.call(this,b);if(a.isComponent){c.ownerCt=a;c.hidden=true;c.renderTo=c.getMaskTarget();c.external=c.renderTo===Ext.getBody();c.bindComponent(a)}else{a=Ext.get(a);c.isElement=true;c.renderTo=c.target}c.render(c.renderTo);if(c.store){c.bindStore(c.store,true)}},getRenderTree:function(){return[{cls:this.maskCls,style:"display:none"},Ext.Component.prototype.getRenderTree.call(this)]},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el.prev()},initRenderData:function(){var a=Ext.Component.prototype.initRenderData.apply(this,arguments);a.msg=this.msg||"";return a},bindComponent:function(a){var c=this,b={scope:this,resize:c.sizeMask};if(c.external){b.added=c.onComponentAdded;b.removed=c.onComponentRemoved;if(a.floating){b.move=c.sizeMask;c.activeOwner=a}else{if(a.ownerCt){c.onComponentAdded(a.ownerCt)}}}c.mon(a,b);if(c.external){c.mon(Ext.GlobalEvents,{show:c.onContainerShow,hide:c.onContainerHide,expand:c.onContainerExpand,collapse:c.onContainerCollapse,scope:c})}},onComponentAdded:function(a){var b=this;delete b.activeOwner;b.floatParent=a;if(!a.floating){a=a.up("[floating]")}if(a){b.activeOwner=a;b.mon(a,"move",b.sizeMask,b);b.mon(a,"tofront",b.onOwnerToFront,b)}else{b.preventBringToFront=true}a=b.floatParent.ownerCt;if(b.rendered&&b.isVisible()&&a){b.floatOwner=a;b.mon(a,"afterlayout",b.sizeMask,b,{single:true})}},onComponentRemoved:function(a){var c=this,d=c.activeOwner,b=c.floatOwner;if(d){c.mun(d,"move",c.sizeMask,c);c.mun(d,"tofront",c.onOwnerToFront,c)}if(b){c.mun(b,"afterlayout",c.sizeMask,c)}delete c.activeOwner;delete c.floatOwner},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);this.el.skipGarbageCollection=true;this.maskEl.skipGarbageCollection=true},onOwnerToFront:function(a,b){this.maskEl.setStyle("zIndex",b+1);this.el.setStyle("zIndex",b+2)},onContainerShow:function(a){this.onComponentShow()},onContainerHide:function(a){this.onComponentHide()},onContainerExpand:function(a){this.onComponentShow()},onContainerCollapse:function(a){this.onComponentHide()},onComponentHide:function(){var a=this;if(a.rendered&&a.isVisible()){a.hide();a.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var b=this,c=b.target,a=b.external?b.getOwner().el:b.getMaskTarget();if(b.rendered&&b.isVisible()){if(b.external){if(!b.isElement&&c.floating){b.onOwnerToFront(c,c.el.getZIndex())}b.maskEl.setSize(a.getSize()).alignTo(a,"tl-tl")}b.el.center(b.maskEl)}},bindStore:function(a,b){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);a=c.store;if(a&&a.isLoading()){c.onBeforeLoad()}},getStoreListeners:function(b){var d=this.onLoad,c=this.onBeforeLoad,a={cachemiss:c,cachefilled:d};if(!b.proxy.isSynchronous){a.beforeload=c;a.load=d}return a},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?a.getTargetEl():(a.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var c=this,a=c.getOwner(),b;if(!c.disabled){c.loading=true;if(a.componentLayoutCounter){c.maybeShow()}else{b=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=b;b.apply(a,arguments);c.maybeShow()}}}},maybeShow:function(){var b=this,a=b.getOwner();if(!a.isVisible(true)){b.showNext=true}else{if(b.loading&&a.rendered){b.show()}}},hide:function(){var a=this;if(a.isElement){a.ownerCt.unmask();a.fireEvent("hide",this);return}else{a.ownerCt.enableTabbing()}delete a.showNext;a.maskEl.setDisplayed(false);a.ownerCt.setMasked(false);return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var a=this;if(a.isElement){a.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);a.fireEvent("show",this);return}else{a.ownerCt.disableTabbing()}a.maskEl.setDisplayed(true);a.ownerCt.setMasked(true);return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var a=this;a.loading=true;Ext.Component.prototype.afterShow.apply(this,arguments);if(a.hasOwnProperty("maskCls")){a.maskEl.dom.className=a.maskCls}if(a.useMsg){a.msgTextEl.setHtml(a.msg)}else{a.el.hide()}a.sizeMask()},onLoad:function(){this.loading=false;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.bindStore(null);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.isElement){a.ownerCt.unmask()}Ext.destroy(a.maskEl);Ext.Component.prototype.onDestroy.call(this)}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:true},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},getRootProperty:function(){var b=this,a=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(j,e){var a=this.map||this.getMap(),k=a[j],f=this.getCollection(),b=f.length,d,g,h,c;if(!k){return -1}if(e===undefined){e=-1}if(k instanceof Array){h=k;g=b;for(c=h.length;c-->0;){d=f.indexOf(h[c]);if(d<g&&d>e){g=d}}if(g===b){return -1}}else{g=f.indexOf(k)}return(g>e)?g:-1},updateKey:function(c,e){var b=this,d=b.map,f,a;if(d){f=d[e];if(f instanceof Array){a=Ext.Array.indexOf(f,c);if(a>=0){if(f.length>2){f.splice(a,1)}else{d[e]=f[1-a]}}}else{if(f){delete d[e]}}b.add([c])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(b,a){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(e,d){var g=this,a=g.map,f=d.items,b=f.length,c,j,h;if(a){if(g.getUnique()&&b<e.length/2){for(c=0;c<b;++c){h=g.getKey(j=f[c]);delete a[h]}}else{g.map=null}}},add:function(f){var g=this,a=g.map,b,e,j,h,c,d;c=f.length;d=g.getUnique();for(e=0;e<c;++e){h=g.getKey(j=f[e]);if(d||!(h in a)){a[h]=j}else{if(!((b=a[h]) instanceof Array)){a[h]=b=[b]}b.push(j)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else{this.getKey=a}},applyProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return(a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(a){a.addObserver(this)}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null},constructor:function(a){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(a){var b=this._groupFn(a);return(b!=null)?String(b):""},sortFn:function(d,c){var f=this,b=f._groupFn(d),e=f._groupFn(c),j=f._sortProperty,h=f._root,g=f._sorterFn,a=f._transform;if(b===e){return 0}if(j||g){if(g){return g.call(this,d,c)}if(h){d=d[h];c=c[h]}b=d[j];e=c[j];if(a){b=a(b);e=a(e)}}return(b>e)?1:(b<e?-1:0)},standardGroupFn:function(b){var a=this._root;return(a?b[a]:b)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:true,config:{autoFilter:true,autoSort:true,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:false,sorted:false,filtered:false,constructor:function(a){var b=this;b.items=[];b.map={};b.length=0;if(a&&a.keyFn){b.getKey=a.keyFn}b.mixins.observable.constructor.call(b,a)},destroy:function(){var c=this,b=c._filters,d=c._sorters,a=c._groups;if(b){b.destroy();c._filters=null}if(d){d.destroy();c._sorters=null}if(a){a.destroy();c._groups=null}c.setSource(null);c.observers=c.items=c.map=null},add:function(d){var c=this,a=c.decodeItems(arguments,0),b=a;if(a.length){c.splice(c.length,0,a);b=(a.length===1)?a[0]:a}return b},replaceAll:function(){var d=this,a=d.length,c,b;if(a===0){return d.add.apply(d,arguments)}b=d.decodeItems(arguments,0);c=b;if(b.length){d.splice(0,d.length,b);c=(b.length===1)?b[0]:b}else{d.removeAll()}return c},aggregate:function(g,b,e,a,d){var f=this,c=Ext.Array.slice(arguments);c.unshift(f.items);return f.aggregateItems.apply(f,c)},aggregateByGroup:function(d,b,c){var a=this.getGroups();return this.aggregateGroups(a,d,b,c)},aggregateItems:function(k,q,d,a,e,r){var l=this,h=Ext.Number.clipIndices(k.length,[a,e]),b=(a!==0&&e!==k.length),g,f,c,m,o,p,n;a=h[0];e=h[1];if(!Ext.isFunction(d)){d=l._aggregators[d];return d.call(l,k,a,e,q,l.getRootProperty())}m=l.getRootProperty();p=new Array(c);n=b?new Array(c):k;for(g=a,f=0;g<e;++g,f++){if(b){n[f]=o=k[g]}p[f]=(m?o[m]:o)[q]}return d.call(r||l,k,p,0)},aggregateGroups:function(a,j,c,k){var g=a.items,f=g.length,b=!Ext.isFunction(c),d={},e,h,l;for(e=0;e<f;++e){h=g[e];if(!b){l=this.aggregateItems(h.items,j,c,null,null,k)}else{l=h[c](j)}d[h.getGroupKey()]=l}return d},beginUpdate:function(){if(!this.updating++){this.notify("beginupdate")}},clear:function(){var b=this,c=b.generation,a=c?b.items:[];if(c){b.items=[];b.length=0;b.map={};b.indices={};b.generation++}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(k,f,h){var e=this.items,b=e.length,a={},d=[],c,g,j;for(c=0;c<b;++c){j=e[c];j=(f?j[f]:j)[k];g=String(j);if((h||!Ext.isEmpty(j))&&!a[g]){a[g]=1;d.push(j)}}return d},contains:function(c){var a=false,b;if(c!=null){b=this.getKey(c);a=this.map[b]===c}return a},containsKey:function(a){return a in this.map},createFiltered:function(n,m,e,j,d){var h=this,f=new h.self(h.initialConfig),l=h.getRootProperty(),g=h.items,b,c,a,k,o;if(Ext.isFunction(n)){k=n;o=m}else{if(Ext.isString(n)){a=[new Ext.util.Filter({property:n,value:m,root:l,anyMatch:e,caseSensitive:j,exactMatch:d})]}else{if(n instanceof Ext.util.Filter){a=[n];n.setRoot(l)}else{if(Ext.isArray(n)){a=n.slice(0);for(c=0,b=a.length;c<b;++c){a[c].setRoot(l)}}}}k=Ext.util.Filter.createFilterFn(a)}o=o||h;for(c=0,b=g.length;c<b;c++){if(k.call(o,g[c])){f.add(g[c])}}return f},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(f,e){var b=this.items,a=b.length,d,c;if(a){e=e||this;b=b.slice(0);for(d=0;d<a;d++){c=f.call(e,b[d],d,a);if(c===false){break}}}return c},eachKey:function(f,j){var e=this,d=e.items,b=d.length,a,h,g,c;if(b){j=j||e;d=d.slice(0);for(a=0;a<b;a++){g=e.getKey(h=d[a]);c=f.call(j,g,h,a,b);if(c===false){break}}}return c},endUpdate:function(){if(!--this.updating){this.notify("endupdate")}},find:function(g,f,h,d,c,b){if(Ext.isEmpty(f,false)){return null}var e=Ext.String.createRegex(f,d,c,b),a=this.getRootProperty();return this.findBy(function(j){return j&&e.test((a?j[a]:j)[g])},null,h)},findBy:function(f,j,a){var e=this,d=e.items,c=d.length,b,h,g;j=j||e;for(b=a||0;b<c;b++){g=e.getKey(h=d[b]);if(f.call(j,h,g)){return d[b]}}return null},findIndex:function(f,e,g,c,b,a){var d=this.find(f,e,g,c,b,a);return d?this.indexOf(d):-1},findIndexBy:function(b,a,d){var c=this.findBy(b,a,d);return c?this.indexOf(c):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"first"):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"last"):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(a){var b=a.id;return(b===0||b)?b:((b=a._id)===0||b)?b:a.getId()},getRange:function(d,a){var c=this.items,e=c.length,b;if(!e){b=[]}else{b=Ext.Number.clipIndices(e,[d,a]);b=c.slice(b[0],b[1])}return b},getValues:function(j,g,a,b){var f=this.items,d=Ext.Number.clipIndices(f.length,[a,b]),e=[],c,h;for(c=d[0],b=d[1];c<b;++c){h=f[c];h=(g?h[g]:h)[j];e.push(h)}return e},indexOf:function(b){if(!b){return -1}var a=this.getKey(b);return this.indexOfKey(a)},indexOfKey:function(a){var b=this,c=b.indices;if(a in b.map){if(!c){c=b.getIndices()}return c[a]}return -1},insert:function(c,e){var d=this,a=d.decodeItems(arguments,1),b=a;if(a.length){d.splice(c,0,a);b=(a.length===1)?a[0]:a}return b},itemChanged:function(u,g,m,n){var v=this,c=m===0||!!m,j=v.filtered&&v.getAutoFilter(),e=false,d=0,p=v.items,l=v.length-1,a=v.sorted&&l>0,r=v.getSource(),w,q=0,h,k=false,b,o=false,t,s,f;if(r&&!r.updating){r.itemChanged(u,g,m,n)}else{s=v.getKey(u);if(j){h=v.indexOfKey(c?m:s);o=(h<0);k=v.isItemFiltered(u);e=(o!==k)}if(e){if(k){q=[u];b=-1}else{w=[u];b=v.length}}else{if(a&&!k){if(!j){h=v.indexOfKey(c?m:s)}f=v.getSortFn();if(h&&f(p[h-1],p[h])>0){d=-1;b=Ext.Array.binarySearch(p,u,0,h,f)}else{if(h<l&&f(p[h],p[h+1])>0){d=1;b=Ext.Array.binarySearch(p,u,h+1,f)}}if(d){w=[u]}}}t={item:u,key:s,index:b,filterChanged:e,keyChanged:c,indexChanged:!!d,filtered:k,oldIndex:h,newIndex:b,wasFiltered:o,meta:n};if(c){t.oldKey=m}if(g){t.modified=g}v.beginUpdate();v.notify("beforeitemchange",[t]);if(c){v.updateKey(u,m)}if(w||q){v.splice(b,q,w)}if(d>0){t.newIndex--}else{if(d<0){t.oldIndex++}}v.notify(k?"filtereditemchange":"itemchange",[t]);v.endUpdate()}},remove:function(d){var c=this,a=c.decodeRemoveItems(arguments,0),b=c.length;c.splice(0,a);return b-c.length},removeAll:function(){var b=this,a=b.length;if(b.generation&&a){b.splice(0,a)}return b},removeAt:function(h,g){var j=this,b=j.length,e=Ext.Number,d=e.clipIndices(b,[h,(g===undefined)?1:g],e.Clip.COUNT),c=d[0],a=d[1]-c,k=(a===1)&&j.getAt(c),f;j.splice(c,a);f=j.length-b;return(k&&f)?k:f},removeByKey:function(a){var b=this.getByKey(a);if(!b||!this.remove(b)){return false}return b},splice:function(D,m,B){var l=this,d=l.sorted&&l.getAutoSort(),z=l.map,r=l.items,p=l.length,v=(m instanceof Array)?l.decodeRemoveItems(m):null,w=!v,E=Ext.Number,e=E.clipIndices(p,[D,w?m:0],E.Clip.COUNT),g=e[0],j=e[1],K=j-g,t=l.decodeItems(arguments,2),J=t?t.length:0,C,x,u,c=g,b=l.indices||((J||v)?l.getIndices():null),q=null,h=K?[g]:null,f=null,s=l.getSource(),a,G,H,M,A,F,L,o,y,I,O,N;if(s&&!s.updating){if(w){v=[];for(M=0;M<K;++M){v.push(r[g+M])}}if(g<p){M=s.indexOf(r[g])}else{M=s.length}s.splice(M,v,t);return l}if(J){C=t;f=[];x={};if(d){N=l.getSorters();if(J>1){if(!C.$cloned){t=C=C.slice(0)}l.sortData(C)}}for(M=0;M<J;++M){o=l.getKey(A=t[M]);if((L=x[o])!==undefined){(O||(O={}))[L]=1}else{F=b[o];if(F<g||j<=F){(h||(h=[])).push(F)}}x[o]=M;f.push(o)}if(O){y=f;C=[];f=[];C.$cloned=true;for(M=0;M<J;++M){if(!O[M]){A=t[M];C.push(A);f.push(y[M])}}J=C.length}q={items:C,keys:f}}for(M=v?v.length:0;M-->0;){o=l.getKey(v[M]);if((F=b[o])!==undefined){(h||(h=[])).push(F)}}if(!q&&!h){return l}l.beginUpdate();if(h){a=null;H=[];u={};if(h.length>1){h.sort(Ext.Array.numericSortFn)}for(M=0,I=h.length;M<I;++M){o=l.getKey(A=r[F=h[M]]);if(!(o in z)){continue}delete z[o];if(!a||F>(a.at+G.length)){H.push(a={at:F,items:(G=[]),keys:(y=[]),map:u,next:a,replacement:q});if(q){q.replaced=a}}G.push(u[o]=A);y.push(o);if(F<c){--c}if(K>1&&F===g){--K;h[M--]=++g}}if(q){q.at=c}for(L=H.length;L-->0;){a=H[L];M=a.at;I=a.items.length;if(M+I<p){l.indices=b=null}l.length=p-=I;r.splice(M,I);if(b){y=a.keys;for(M=0;M<I;++M){delete b[y[M]]}}++l.generation;l.notify("remove",[a])}}if(q){if(d&&J>1&&p){l.spliceMerge(C)}else{if(d){if(J>1){c=0;l.indices=b=null}else{c=N.findInsertionIndex(q.items[0],r,l.getSortFn())}}if(c===p){r.push.apply(r,C);b=l.indices;if(b){for(M=0;M<J;++M){b[f[M]]=c+M}}}else{l.indices=null;Ext.Array.insert(r,c,C)}for(M=0;M<J;++M){z[f[M]]=C[M]}l.length+=J;q.at=c;q.atItem=c===0?null:r[c-1];++l.generation;l.notify("add",[q])}}l.endUpdate();return l},update:function(b,a){var c=this;c.beginUpdate();try{return b.call(a||c,c)}catch(d){throw d}finally{c.endUpdate()}},updateKey:function(b,e){var a=this,d=a.map,g=a.indices,c=a.getSource(),f;if(c&&!c.updating){c.updateKey(b,e)}else{if((f=a.getKey(b))!==e){if(e in d||d[f]!==b){if(e in d){delete d[e]}a.updating++;a.generation++;d[f]=b;if(g){g[f]=g[e];delete g[e]}a.notify("updatekey",[{item:b,newKey:f,oldKey:e}]);a.updating--}}}},findInsertIndex:function(d){var e=this.getSource(),f=e.items,b=e.indexOf(d)-1,c,a;while(b>-1){c=f[b];a=this.indexOf(c);if(a>-1){return a+1}--b}return 0},onCollectionAdd:function(a,b){var j=this,l=b.atItem,h=b.items,g,f,c,e,k,d;if(l){f=j.indexOf(l);if(f===-1){f=j.findInsertIndex(h[0])}else{++f}}else{f=0}if(j.getAutoFilter()&&j.filtered){for(e=0,d=h.length;e<d;++e){k=h[e];if(j.isItemFiltered(k)){if(!c){c=h.slice(0,e)}if(!g){g=[]}g.push(k)}else{if(c){c.push(k)}}}}j.splice((f<0)?j.length:f,0,c||h);if(g){j.notify("filteradd",[g])}},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(a){var f=this,b={},h={},d,j,e,g,c;e=a.items;e=f.filtered&&f.getAutoFilter()?Ext.Array.filter(e,f.getFilterFn()):e.slice(0);if(f.sorted){f.sortData(e)}f.items=e;f.length=c=e.length;f.map=b;f.indices=h;for(d=0;d<c;++d){g=f.getKey(j=e[d]);b[g]=j;h[g]=d}f.notify("refresh")},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(c,d,b,e,a){var f=b-d;return f&&this._aggregators.sum.call(this,c,d,b,e,a)/f},bounds:function(e,a,b,j,f){for(var h,g,c,d=a;d<b;++d){h=e[d];h=(f?h[f]:h)[j];if(!(h<g)){g=h}if(!(h>c)){c=h}}return[c,g]},count:function(a){return a.length},extremes:function(f,a,c,l,j){var g=null,b=null,e,m,h,d,k;for(e=a;e<c;++e){m=f[e];k=(j?m[j]:m)[l];if(!(k<h)){h=k;g=m}if(!(k>d)){d=k;b=m}}return[b,g]},max:function(e,f,d,g,c){var a=this._aggregators.bounds.call(this,e,f,d,g,c);return a[1]},maxItem:function(e,f,d,g,c){var a=this._aggregators.extremes.call(this,e,f,d,g,c);return a[1]},min:function(e,f,d,g,c){var a=this._aggregators.bounds.call(this,e,f,d,g,c);return a[0]},minItem:function(e,f,d,g,c){var a=this._aggregators.extremes.call(this,e,f,d,g,c);return a[0]},sum:function(c,f,b,h,a){for(var g,e=0,d=f;d<b;++d){g=c[d];g=(a?g[a]:g)[h];e+=g}return e}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(a){var d=this.observers,b,c=a.getId();if(!d){d=this.observers=[];this.observerMap={}}b=this.observerMap;if(!b[c]){d.push(a);b[c]=a;Ext.Array.sort(d,this.prioritySortFn)}},prioritySortFn:function(f,e){var d=f.observerPriority||0,c=e.observerPriority||0;return d-c},applyExtraKeys:function(e){var f=this,c={},b,d,a,g;for(a in e){b={collection:f};if(Ext.isString(g=e[a])){b.property=g}else{Ext.apply(b,g)}c[a]=f[a]=d=new Ext.util.CollectionKey(b);d.name=a}return c},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,"Ext.util.Grouper")}return a},decodeItems:function(d,c){var f=this,b=(c===undefined)?d:d[c],a,g,e;if(!b||!b.$cloned){a=d.length>c+1||!Ext.isIterable(b);if(a){b=Ext.Array.slice(d,c);if(b.length===1&&b[0]===undefined){b.length=0}}g=f.getDecoder();if(g){if(!a){b=b.slice(0);a=true}for(e=b.length;e-->0;){if((b[e]=g.call(f,b[e]))===false){b.splice(e,1)}}}if(a){b.$cloned=true}}return b},getIndices:function(){var d=this,e=d.indices,a=d.items,f=a.length,c,b;if(!e){d.indices=e={};++d.indexRebuilds;for(c=0;c<f;++c){b=d.getKey(a[c]);e[b]=c}}return e},notify:function(d,g){var h=this,c=h.observers,k=h._eventToMethodMap[d],j=0,e,b,a,f;g=g||[];if(c&&k){for(e=0,b=c.length;e<b;++e){a=(f=c[e])[k];if(a){if(!j++){g.unshift(h)}a.apply(f,g)}}}if(!h.hasListeners){return}if(h.hasListeners[d]){if(!j){g.unshift(h)}h.fireEventArgs(d,g)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(b){var a=this,c=a.getSource();if(!c){c=new Ext.util.Collection({keyFn:a.getKey,extraKeys:a.getInitialConfig().extraKeys,rootProperty:a.getRootProperty()});if(a.length){c.add(a.items)}a.setSource(c);a.autoSource=c}else{if(c.length||a.length){a.onCollectionRefresh(c)}}a.notify("filter")},applyFilters:function(a,b){if(a==null||(a&&a.isFilterCollection)){return a}if(a){if(!b){b=this.getFilters()}b.splice(0,b.length,a)}return b},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on("endupdate","onEndUpdateFilters",c,{prepend:true});a.$filterable=c}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(c){var b=this,d=b.filtered,a=!!c&&(c.length>0);if(d||a){b.filtered=a;b.onFilterChange(c)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==false){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(a,c,d){var b=this.getSorters();b.addSort.apply(b,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify("beforesort",[a.getSorters()]);if(a.length){Ext.Array.sort(a.items,b)}a.notify("sort")},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(c,a,b){if(!a){a=this.items}if(!b){b=this.getSortFn()}return Ext.Array.binarySearch(a,c,b)},applySorters:function(a,b){if(a==null||(a&&a.isSorterCollection)){return a}if(a){if(!b){b=this.getSorters()}b.splice(0,b.length,a)}return b},createSortFn:function(){var c=this,a=c.getGrouper(),b=c.getSorters().getSortFn();if(!a){return b}return function(d,e){return a.sort(d,e)||b(d,e)}},updateGrouper:function(b){var d=this,a=d.getGroups(),f=d.getSorters(),e,c;d.onSorterChange();d.grouped=!!b;if(b){if(!a){a=new Ext.util.GroupCollection({itemRoot:d.getRootProperty()});d.addObserver(a);d.setGroups(a)}c=a.getSorters();c.splice(0,c.length,{property:"_groupKey",direction:b.getDirection()});e=true}else{if(a){d.removeObserver(a);a.destroy()}d.setGroups(null)}if(!f.updating){d.onEndUpdateSorters(f)}if(e){a.onCollectionRefresh(d)}},updateSorters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateSorters",c)}if(a){a.on("endupdate","onEndUpdateSorters",c,{prepend:true});a.$sortable=c}c.onSorterChange();c.onEndUpdateSorters(a)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(c){var b=this,d=b.sorted,a=b.grouped||(c&&(c.length>0));if(d||a){b.sorted=!!a;b.onSortChange(c)}},removeObserver:function(a){var b=this.observers;if(b){Ext.Array.remove(b,a);delete this.observerMap[a.getId()]}},spliceMerge:function(p){var k=this,n,b=p.length,l=0,m=k.items,a=m.length,h=[],f=0,g=[],j=k.getSorters(),o,c,d,e,q;k.items=g;for(n=0;n<b;n=c){e=p[n];for(;l<a;++l){if(j.sortFn(e,q=m[l])<0){break}g.push(q)}if(l===a){h[f++]={at:g.length,itemAt:g[g.length-1],items:(o=[])};if(f>1){h[f-2].next=h[f-1]}for(;n<b;++n){o.push(e=p[n]);g.push(e)}break}h[f++]={at:g.length,itemAt:g[g.length-1],items:(o=[e])};if(f>1){h[f-2].next=h[f-1]}g.push(e);for(c=n+1;c<b;++c){if(j.sortFn(e=p[c],q)>=0){break}g.push(e);o.push(e)}}for(;l<a;++l){g.push(m[l])}k.length=g.length;++k.generation;for(d=0;d<f;++d){k.notify("add",[h[d]])}},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(b,a){var c=this.autoSource;if(a){a.removeObserver(this);if(a===c){c.destroy();this.autoSource=null}}if(b){b.addObserver(this);if(b.length||this.length){this.onCollectionRefresh(b)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(e,d,c){return this.aggregate(e,b,d,c)};a[b+"ByGroup"]=function(c){return this.aggregateByGroup(c,b)}})}));(Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:true,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(b,a){return b.isObjectTemplate?b:new Ext.util.ObjectTemplate(b,a)}},constructor:function(b,a){Ext.apply(this,a);this.template=b},apply:function(a){var b=this;delete b.apply;b.apply=b.compile(b.template);return b.apply(a)},privates:{compile:function(e){var f=this,b=f.excludeProperties,g,c,a,d;if(Ext.isString(e)){if(e.indexOf("{")<0){d=function(){return e}}else{if(f.valueRe.test(e)){e=e.substring(1,e.length-1).split(".");d=function(k){for(var h=k,j=0;h&&j<e.length;++j){h=h[e[j]]}return h}}else{e=new Ext.XTemplate(e);d=function(h){return e.apply(h)}}}}else{if(Ext.isPrimitive(e)||Ext.isFunction(e)){d=function(){return e}}else{if(e instanceof Array){g=[];for(c=0,a=e.length;c<a;++c){g[c]=f.compile(e[c])}d=function(k){var h=[],j;for(j=0;j<a;++j){h[j]=g[j](k)}return h}}else{g={};for(c in e){if(!b[c]){g[c]=f.compile(e[c])}}d=function(l){var j={},k,h;for(k in e){h=b[k]?e[k]:g[k](l);if(h!==undefined){j[k]=h}}return j}}}}return d}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0));(Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:true,left:true,owner:false,side:"left",isMany:false,defaultReaderType:"json",constructor:function(b,c){var d=this,a=c.extra;Ext.apply(d,c);if(a){delete a.type;Ext.apply(d,a);delete d.extra}d.association=b;if(b.owner===d.side){b.owner=d;d.owner=true}},processUpdate:function(){Ext.Error.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},validateAssociationRecords:function(c,b,a){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(b,c){var a=this.getAssociatedItem(b);if(a){c.adopt(a)}},createAssociationStore:function(f,m,e,n){var h=this,d=h.association,g=d.getFieldName(),j=d.isManyToMany,b=h.storeConfig,a=m.getId(),c={model:h.cls,data:e,role:h,session:f,associatedEntity:m,disableMetaChangeEvent:true,pageSize:null,remoteFilter:true,trackRemoved:!f},k,l;if(j){c.filters=[{property:h.inverse.field,value:a,exactMatch:true}]}else{if(g){c.filters=[{property:g,value:a,exactMatch:true}];c.foreignKeyName=g}}if(b){Ext.apply(c,b)}l=Ext.Factory.store(c);if(e){l.complete=!!n}if(j){if(f){k=f.getMatrixSlice(h.inverse,a);k.attach(l);k.notify=h.onMatrixUpdate;k.scope=h}}if(g||(j&&f)){l.on({add:"onAddToMany",load:"onLoadMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany",scope:h});if(e){h.onLoadMany(l,l.getData().items,true)}}return l},getAssociatedStore:function(f,r,q,b,p){var k=this,g=k.storeName||k.getStoreName(),m=f[g],o=r&&r.reload,a=f.$source,j=f.session,h,d,e,n,c,l;if(!m){if(!b&&a){a=a[g];if(a&&!a.isLoading()){l=a;b=[];n=a.getData().items;for(d=0,e=n.length;d<e;++d){c=n[d];b.push(j.getRecord(c.self,c.id))}p=true}}m=k.createAssociationStore(j,f,b,p);m.$source=l;if(!b&&(k.autoLoad||r)){o=true}f[g]=m}if(r){if(o||m.isLoading()){m.on("load",function(u,t,v,s){h=[u,s];q=q||r.scope||f;if(v){Ext.callback(r.success,q,h)}else{Ext.callback(r.failure,q,h)}h.push(v);Ext.callback(r,q,h);Ext.callback(r.callback,q,h)},null,{single:true})}else{h=[m,null];q=q||r.scope||f;Ext.callback(r.success,q,h);h.push(true);Ext.callback(r,q,h);Ext.callback(r.callback,q,h)}}if(o&&!m.isLoading()){m.load()}return m},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.role;return b[a]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var c=this,a=c.reader,d=c.cls,e=!c.associationKey,b=this.getReaderRoot();if(a){if(Ext.isString(a)){a={type:a,rootProperty:b,useSimpleAccessors:e}}if(a.isReader){a.setModel(d);a.setRootProperty(b);a.setUseSimpleAccessors(e)}else{Ext.applyIf(a,{model:d,rootProperty:b,useSimpleAccessors:e,type:c.defaultReaderType})}a=c.reader=Ext.createByAlias("reader."+a.type,a)}return a},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(d){var e=this,a=e.getReader(),f=e.cls,g=!e.associationKey,b=e.getReaderRoot(),c;if(!a){c=f.getProxy();if(c){a=c.getReader();e.savedRoot=a.getRootProperty();a.setRootProperty(b)}else{a=new d.self({model:f,useSimpleAccessors:g,rootProperty:b})}}return a},read:function(c,h,d,g){var f=this,b=this.constructReader(d),a=b.read(h,g),e=f.savedRoot;if(e!==undefined){b.setRootProperty(e);delete f.savedRoot}return a},getCallbackOptions:function(a,b,c){if(typeof a==="function"){a={callback:a,scope:b||c}}else{if(a){a=Ext.apply({},a);a.scope=b||a.scope||c}}return a},doGetFK:function(b,n,l){var j=this,m=j.cls,f=j.association.getFieldName(),e=j.role,k=b[e],a=n&&n.reload,d=k!==undefined&&!a,h=b.session,c,g;if(!d){if(h){c=b.get(f);if(c||c===0){d=h.peekRecord(m,c,true)&&!a;k=h.getRecord(m,c,false)}else{d=true;b[e]=k=null}}else{if(f){c=b.get(f);if(!c&&c!==0){d=true;b[e]=k=null}else{if(!k){k=m.createWithId(c)}}}else{d=true}}}else{if(k){d=!k.isLoading()}}if(d){if(n){g=[k,null];l=l||n.scope||b;Ext.callback(n.success,l,g);g.push(true);Ext.callback(n,l,g);Ext.callback(n.callback,l,g)}}else{b[e]=k;n=j.getCallbackOptions(n,l,b);k.load(n)}return k},doSetFK:function(a,j,m,l){var h=this,e=h.association.getFieldName(),d=h.role,f=a[d],b=h.inverse,c=b.setterName,g=a.session,k;if(j&&j.isEntity){if(f!==j){if(e){a.set(e,j.getId())}a[d]=j;if(c){j[c](a)}}}else{k=(a.changingKey&&!b.isMany)||a.set(e,j);if(k&&f&&f.isEntity&&!f.isEqual(f.getId(),j)){a[d]=undefined;if(!b.isMany){f[b.role]=undefined}}}if(m){if(Ext.isFunction(m)){m={callback:m,scope:l||a}}return a.save(m)}}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0));(Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:false,isManyToOne:false,isManyToMany:false,owner:null,field:null,constructor:function(a){var c=this,d,b;Ext.apply(c,a);c.left=d=new c.Left(c,c.left);c.right=b=new c.Right(c,c.right);d.inverse=b;b.inverse=d},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0));(Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:true,isToOne:true,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(a,b){a[this.role]=null},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(a){var b=this.role,c=a[b],d=a.session;if(!c&&d){}return c||null},doSet:function(a,e){var b=this.role,d=a[b],c=this.inverse.setterName;if(d!==e){a[b]=e;if(c){e[c](a)}}return d},read:function(b,f,d,g){var e=this,a=e.callParent([b,f,d,g]),h=a.getRecords()[0],c=e.role;if(h){h[e.inverse.role]=b;b[c]=h;delete b.data[c]}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(f,d){var b=this,c=b.association.field,a,e;if(b.inverse.owner){if(d){e=f.get(c.name);if(e||e===0){a=d.getEntry(b.cls,e).record;if(a){a.drop()}}}else{a=b.getAssociatedItem(f);if(a){a.drop()}}}if(c){f.set(c.name,null)}f[b.role]=null},onValueChange:function(e,d,c){var b=this,a=b.getAssociatedItem(e);e.changingKey=true;b.doSetFK(e,c);if(b.inverse.owner&&a){b.association.schema.queueKeyCheck(a,b)}e.changingKey=false},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(c,d,k,e){var g=this,l=g.callParent([c,d,k,e]),h=l.getRecords()[0],a=g.role,j=this.association.field,f=c.session,b;if(h){h[g.inverse.role]=c;c[a]=h;delete c.data[a];if(j){b=c.data[j.name];if(b!==h.id){c.data[j.name]=h.id;if(f){f.updateReference(c,j,h.id,b)}}}}}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:true,isToOne:true,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,onDrop:function(g,e){var f=this,j=f.getAssociatedItem(g),b,d,c,h,a;if(j){b=j.removeAll();if(b&&f.inverse.owner){for(c=0,d=b.length;c<d;++c){b[c].drop()}}j.destroy();g[f.getStoreName()]=null}else{if(e){b=e.getRefs(g,f);if(b){for(a in b){b[a].drop()}}}}},processUpdate:function(f,b){var g=this,d=g.inverse.cls,e=b.R,a,h,j,c;if(e){for(a in e){h=f.peekRecord(d,a);if(h){c=f.getEntityList(g.cls,e[a]);j=g.getAssociatedItem(h);if(j){c=g.validateAssociationRecords(f,h,c);j.loadRecords(c);j.complete=true}else{h[g.getterName](null,null,c)}}else{f.onInvalidAssociationEntity(d,a)}}}},validateAssociationRecords:function(j,h,d){var k=j.getRefs(h,this,true),g=[],a,c,b,e,f;if(k){if(d){a={};for(e=0,f=d.length;e<f;++e){c=d[e];b=c.id;if(k[b]){g.push(c)}a[b]=true}}for(b in k){if(!a||!a[b]){g.push(k[b])}}}return g},adoptAssociated:function(b,f){var c=this.getAssociatedItem(b),e,d,a;if(c){c.setSession(f);e=c.getData().items;for(d=0,a=e.length;d<a;++d){f.adopt(e[d])}}},createGetter:function(){var a=this;return function(c,d,f){var e=this.session,b=!!f;if(e){f=a.validateAssociationRecords(e,this,f);if(!b&&!f.length){f=null}}return a.getAssociatedStore(this,c,d,f,b)}},createSetter:null,onAddToMany:function(a,b){this.syncFK(b,a.associatedEntity,false)},onLoadMany:function(l,d,f){var m=this.inverse.role,j=l.associatedEntity,a=j.getId(),k=this.association.field,h=l.getSession(),e,g,c,b;if(f){for(e=0,g=d.length;e<g;++e){c=d[e];c[m]=j;if(k){b=c.data[k.name];if(b!==a){c.data[k.name]=a;if(h){h.updateReference(c,k,a,b)}}}}}},onRemoveFromMany:function(a,b){this.syncFK(b,a.associatedEntity,true)},read:function(g,a,k,c){var f=this,j=f.inverse.role,l=f.callParent([g,a,k,c]),h,b,e,d;if(l.getReadRoot()){h=g[f.getterName](null,null,l.getRecords());delete g.data[f.role];b=h.getData().items;for(d=0,e=b.length;d<e;++d){b[d][j]=g}}},syncFK:function(d,h,j){var g=this.association.getFieldName(),e=this.inverse.setterName,f=d.length,a=h.getId(),b,c;while(f-->0){c=d[f];b=!c.isEqual(a,c.get(g));if(b!==j){c.changingKey=true;if(e){c[e](j?null:h)}else{c.set(g,j?null:a)}c.changingKey=false}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",onDrop:function(c,b){var a=this.association.field;if(a){c.set(a.name,null)}c[this.role]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(c,d){var b=this.association.field,a;a=this.getSessionStore(c,d.get(b.name));if(a&&!a.contains(d)){a.add(d)}},onValueChange:function(c,f,b,a){var g=this,k,j,d,e,h;if(!c.changingKey){if(f){j=g.getSessionStore(f,a);if(j){j.remove(c)}if(b||b===0){j=g.getSessionStore(f,b);if(j&&!j.isLoading()){j.add(c)}}}else{k=c.joined;if(k){for(d=0,e=k.length;d<e;++d){j=k[d];if(j.isStore){h=j.getAssociatedEntity();if(h&&h.self===g.cls&&h.getId()===a){j.remove(c)}}}}}}if(g.owner&&b===null){g.association.schema.queueKeyCheck(c,g)}},checkKeyForDrop:function(b){var a=this.association.field;if(b.get(a.name)===null){b.drop()}},getSessionStore:function(c,b){var a=this.cls,d;if(a){d=c.peekRecord(a,b);if(d){return this.inverse.getAssociatedItem(d)}}},read:function(f,d,c,e){var b=this.callParent([f,d,c,e]),a=b.getRecords()[0];if(a){f[this.role]=a}}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:true,isToMany:true,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,digitRe:/^\d+$/,validateAssociationRecords:function(l,k,d){var m=l.getMatrixSlice(this.inverse,k.id),e=m.members,n=this.cls,j=[],a,g,h,b,f,c;if(d){a={};for(g=0,h=d.length;g<h;++g){c=d[g];b=c.id;f=e[b];if(!(f&&f[2]===-1)){j.push(c)}a[b]=true}}for(b in e){f=e[b];if(!a||!a[b]&&(f&&f[2]!==-1)){c=l.peekRecord(n,b);if(c){j.push(c)}}}return j},processUpdate:function(f,b){var g=this,d=g.inverse.cls,e=b.R,a,h,j,c;if(e){for(a in e){h=f.peekRecord(d,a);if(h){c=f.getEntityList(g.cls,e[a]);j=g.getAssociatedItem(h);if(j){c=g.validateAssociationRecords(f,h,c);j.loadRecords(c);j.complete=true;g.onAddToMany(j,c,true)}else{h[g.getterName](null,null,c)}}else{f.onInvalidAssociationEntity(d,a)}}}g.processMatrixBlock(f,b.C,1);g.processMatrixBlock(f,b.D,-1)},checkMembership:function(h,j){var k=h.getMatrix(this.association,true),g,d,e,m,n,a,c,f,b,l;if(!k){return}g=this.left?k.right:k.left;d=g.inverse.role.cls;e=this.inverse;n=g.slices;if(n){m=n[j.id];if(m){c=m.members;for(a in c){f=c[a];if(f[2]!==-1){b=h.peekRecord(d,a);if(b){l=e.getAssociatedItem(b);if(l){l.matrixUpdate=1;l.add(j);l.matrixUpdate=0}}}}}}},processMatrixBlock:function(e,d,c){var a=this.inverse,b=this.digitRe,f,g;if(d){for(g in d){if(b.test(g)){g=parseInt(g,10)}f=e.getMatrixSlice(a,g);f.update(d[g],c)}}},createGetter:function(){var a=this;return function(c,d,f){var e=this.session,b;if(e){b=!!f;f=a.validateAssociationRecords(e,this,f);if(!b&&!f.length){f=null}}return a.getAssociatedStore(this,c,d,f,b)}},onAddToMany:function(a,c,b){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(c,b===true?0:1);a.matrixUpdate=0}},onLoadMany:Ext.emptyFn,onRemoveFromMany:function(b,a){if(!b.matrixUpdate){b.matrixUpdate=1;b.matrix.update(a,-1);b.matrixUpdate=0}},read:function(b,e,c,f){var d=this,a=d.callParent([b,e,c,f]);if(a.getReadRoot()){b[d.getterName](null,null,a.getRecords());delete b.data[d.role]}},onMatrixUpdate:function(e,g,d){var a=e.store,b,f,c;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(g);if(d<0){if(b>=0){a.remove([b])}}else{if(b<0){c=a.getSession().getEntry(this.type,g);f=c&&c.record;if(f){a.add(f)}}}a.matrixUpdate=0}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:false,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^(p)erson$/i),"$1eople"],[(/^(m)an$/i),"$1en"],[(/(.*)(child)(ren)?$/i),"$1$2ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(address)$/i),"$1"],[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/(p)eople$/i),"$1erson"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(f){if(this.isTransnumeral(f)){return f}var e=this.plurals,d=e.length,a,c,b;for(b=0;b<d;b++){a=e[b];c=a[0];if(c==f||(c.test&&c.test(f))){return f.replace(c,a[1])}}return f},singularize:function(f){if(this.isTransnumeral(f)){return f}var e=this.singulars,d=e.length,a,c,b;for(b=0;b<d;b++){a=e[b];c=a[0];if(c==f||(c.test&&c.test(f))){return f.replace(c,a[1])}}return f},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(d){var b=parseInt(d,10),c=b%10,a=b%100;if(11<=a&&a<=13){return d+"th"}else{switch(c){case 1:return d+"st";case 2:return d+"nd";case 3:return d+"rd";default:return d+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},a;for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}}));(Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:true,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(b){var a=b.match(this.endsWithIdRe,"");if(a){b=b.substr(0,b.length-(a[1]||a[2]).length)}return this.apply("uncapitalize",b)},idField:function(a){return this.apply("uncapitalize,singularize",a)+"Id"},multiRole:function(a){return this.apply("undotted,uncapitalize,pluralize",a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply("uncapitalize",a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply("underscore",a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return"_"+a},uniRole:function(a){return this.apply("undotted,uncapitalize,singularize",a)},undotted:function(b){if(b.indexOf(".")<0){return b}var c=b.split("."),a=c.length;while(a-->1){c[a]=this.apply("capitalize",c[a])}return c.join("")},getterName:function(b){var a=b.role;if(b&&b.isMany){return a}return"get"+this.apply("capitalize",a)},inverseFieldRole:function(g,h,e,b){var f=this,a=f.apply(h?"uniRole":"multiRole",g),d=f.apply("pluralize",e),c=f.apply("undotted,pluralize",b);if(d.toLowerCase()!==c.toLowerCase()){a=e+f.apply("capitalize",a)}return a},manyToMany:function(e,d,a){var c=this,b=c.apply("undotted,capitalize,singularize",d)+c.apply("undotted,capitalize,pluralize",a);if(e){b=c.apply("capitalize",e+b)}return b},manyToOne:function(d,b,a,c){return this.apply("capitalize,singularize",a)+this.apply("capitalize",b)},matrixRole:function(c,b){var a=this.apply(c?"multiRole,capitalize":"multiRole",b);return c?c+a:a},oneToOne:function(d,b,a,c){return this.apply("undotted,capitalize,singularize",a)+this.apply("capitalize",b)},setterName:function(a){return"set"+this.apply("capitalize",a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(e,c){var h=this,b=h.cache,j=b[c]||(b[c]={}),g=j[e],f,d,a;if(!g){if(e.indexOf(",")<0){g=h[e](c)}else{d=(a=e.split(",")).length;g=c;for(f=0;f<d;++f){g=h.apply(a[f],g)}}j[e]=g}return g}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0));(Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:true,type:"default",statics:{instances:{},get:function(d){var f=this,c=f.instances,g="default",b=d&&Ext.isString(d),a,e;if(d){if(d.isSchema){return d}g=b?d:(d.id||g)}if(!(a=c[g])){c[g]=a=f.create(d);a.id=g}else{if(d&&!b){e=Ext.merge({},a.config);Ext.merge(e,d);a.setConfig(e);a.config=e}}return a},lookupEntity:function(a){var d=null,f=this.instances,c,b,e;if(a){if(a.isEntity){d=a.self}else{if(Ext.isFunction(a)){d=a}else{if(Ext.isString(a)){d=Ext.ClassManager.get(a);if(d&&(!d.prototype||!d.prototype.isEntity)){d=null}if(!d){for(b in f){e=f[b];c=e.getEntity(a);if(c){if(d){Ext.Error.raise('Ambiguous entity name "'+a+'". Defined by schema "'+d.schema.type+'" and "'+b+'"')}d=c}}}if(!d){Ext.Error.raise('No such Entity "'+a+'".')}}}}}return d}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(a,c){var b=c.alias;if(b&&!c.type){if(!Ext.isString(b)){b=b[0]}a.prototype.type=b.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(b){if(b){var a=b.length-1;if(b.charAt(a)!=="."){b+="."}}return b},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var b=this.associations,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a])===false){break}}}},eachEntity:function(c,b){var d=this.entities,a;for(a in d){if(d.hasOwnProperty(a)){if(c.call(b,a,d[a].cls)===false){break}}}},getAssociation:function(a){var b=this.associations[a];return b||null},getEntity:function(a){var b=this.entityClasses[a]||this.entities[a];return(b&&b.cls)||null},getEntityName:function(a){var d=this.getNamespace(),c,b;if(typeof a==="string"){b=a}else{b=a.$className||null}if(b){if(d){c=d.length;if(b.substring(0,c)!==d){return b}}if(c){b=b.substring(c)}}return b},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(a){var b=this.getEntityName(a);return !!(this.entities[b]||this.entityClasses[b])},addMatrix:function(n,g,d,c,r){var s=this,l=s.getNamer(),p=s.associations,a=s.entities,f=c.type,q=r.type,e=c.field||l.apply("idField",f),j=r.field||l.apply("idField",q),b=c.role||l.matrixRole(d,f),m=r.role||l.matrixRole(d,q),o,h,k;h=a[f]||(a[f]={cls:null,name:f,associations:{}});k=a[q]||(a[q]={cls:null,name:q,associations:{}});++s.assocCount;p[g]=o=new Ext.data.schema.ManyToMany({name:g,schema:s,definedBy:n,left:{cls:h.cls,type:f,role:b,field:e},right:{cls:k.cls,type:q,role:m,field:j}});h.associations[o.right.role]=o.right;k.associations[o.left.role]=o.left;s.associationEntityMap[n.entityName]=true;s.decorateModel(o)},addReference:function(r,a,p,b){var u=this,n=u.getNamer(),d=u.entities,s=u.associations,m=r.entityName,e=p.association,q=!!p.legacy,j=p.child,l=p.parent,o=p.role,t=p.type||l||j,k=p.inverse,h=Ext.isString(k)?{role:k}:k,g=h&&h.role,c,f;if(!o){if(q){o=n.apply("uncapitalize",t)}else{o=n.apply("fieldRole",a.name)}}if(!g){g=n.inverseFieldRole(m,b,o,t)}if(!e){if(b){e=n.oneToOne(r,g,t,o)}else{e=n.manyToOne(r,g,t,o)}}c=d[t]||(d[t]={cls:null,name:t,associations:{}});f=b?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;e=new f({name:e,owner:j?"left":(l?"right":null),definedBy:r,schema:u,field:a,nullable:a?!!a.allowBlank:true,legacy:p.legacy,left:{cls:r,type:m,role:g,extra:h},right:{cls:c.cls,type:t,role:o,extra:p}});r.associations[o]=e.right;c.associations[g]=e.left;if(a){a.reference=e.right;r.references.push(a)}++u.assocCount;u.associationEntityMap[m]=true;if(c.cls){u.associationEntityMap[c.cls.entityName]=true}s[e.name]=e;if(e.right.cls){u.decorateModel(e)}},privates:{addEntity:function(d){var h=this,g=h.entities,k=d.entityName,l=g[k],f=d.fields,c,j,e,b,a;if(!l){g[k]=l={name:k,associations:{}}}else{c=l.associations;for(a in c){c[a].inverse.cls=d;h.associationEntityMap[k]=true;h.decorateModel(c[a].association)}}l.cls=d;d.prototype.associations=d.associations=l.associations;h.entityClasses[d.$className]=l;++h.entityCount;for(e=0,b=f.length;e<b;++e){j=f[e];if(j.reference){h.addReferenceDescr(d,j)}}},addMatrices:function(f,a){var e=this,b,d,c;if(Ext.isString(a)){e.addMatrixDescr(f,null,a)}else{if(a[0]){for(b=0,d=a.length;b<d;++b){e.addMatrixDescr(f,null,a[b])}}else{for(c in a){e.addMatrixDescr(f,c,a[c])}}}},addMatrixDescr:function(e,a,f){var g=this,j=e.entityName,d=g.associations,h=g.getNamer(),c=f.left,l=f.right,k,b;if(Ext.isString(f)){if(f.charAt(0)==="#"){c={type:j};l={type:f.substring(1)}}else{if(f.charAt(k=f.length-1)==="#"){c={type:f.substring(0,k)};l={type:j}}else{if(h.apply("multiRole",j)<h.apply("multiRole",f)){c={type:j};l={type:f}}else{c={type:f};l={type:j}}}}}else{b=f.relation;if(c||(!l&&h.apply("multiRole",j)<h.apply("multiRole",f.type))){if(!c||c===true){c={type:j}}else{c=Ext.apply({type:j},c)}l=f}else{if(!l||l===true){l={type:j}}else{l=Ext.apply({type:j},l)}c=f}}if(!a){a=h.manyToMany(b,c.type,l.type)}if(!(a in d)){g.addMatrix(e,a,b,c,l)}},addReferenceDescr:function(b,d){var a=this,c=d.$reference;if(Ext.isString(c)){c={type:c}}else{c=Ext.apply({},c)}if(c.legacy){if(c.single){a.addLegacySingle(b,c)}else{a.addLegacyHasMany(b,c)}}else{a.addReference(b,d,c,d.unique)}},addPending:function(a,c,e,b){var d=this.pending;if(!d[a]){d[a]=[]}d[a].push([c,e,b])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(c,e){var b,a,d;e=this.constructLegacyAssociation(c,e);e.single=true;a=e.type;b=e.foreignKey||(a.toLowerCase()+"_id");d=c.getField(b);if(d){d.$reference=e}this.addReference(c,d,e,true)},addLegacyHasMany:function(d,j){var k=this,f=k.entities,c=k.pending,a=j.associationKey,m,b,l,h,g,e;j=this.constructLegacyAssociation(d,j);b=j.type;h=f[b];if(h&&h.cls){j.type=d.entityName;g=j.foreignKey||(j.type.toLowerCase()+"_id");m=h.cls;l=m.getField(g);j.inverse=j;e=j.name;if(e||a){j.inverse={};if(e){j.inverse.role=e}if(a){j.inverse.associationKey=a}}if(l){l.$reference=j}k.addReference(m,l,j,false)}else{if(!c[b]){c[b]=[]}c[b].push([d,j])}},constructLegacyAssociation:function(b,c){if(Ext.isString(c)){c={model:c}}c.legacy=true;c.type=this.getEntityName(c.model);var a=c.associatedName||c.name;if(a){c.role=a}return c},afterLegacyAssociations:function(b){var f=this.pending,c=b.entityName,e=f[c],d,a;if(e){for(d=0,a=e.length;d<a;++d){this.addLegacyHasMany.apply(this,e[d])}delete f[c]}},clear:function(b){var a=this,c=a.timer;delete a.setConfig;if(c){window.clearTimeout(c);a.timer=null}a.associations={};a.associationEntityMap={};a.entities={};a.entityClasses={};a.pending={};a.assocCount=a.entityCount=0;if(b){a.setNamespace(null)}},constructProxy:function(d){var b=this,c=Ext.Object.chain(d),a=b.getProxy();c.schema=b;c.prefix=b.getUrlPrefix();return a.apply(c)},applyDecoration:function(g){var e=this,a=g.inverse.cls,f=e.getNamer(),c,b,d;if(a&&!g.decorated){g.decorated=true;d=a.prototype;if(!(c=g.getterName)){g.getterName=c=f.getterName(g)}d[c]=g.createGetter();if(g.createSetter){if(!(b=g.setterName)){g.setterName=b=f.setterName(g)}d[b]=g.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(d){var f=this,b=f.keyCheckQueue,g=f.timer,a,c,e;if(g){window.clearTimeout(g);f.timer=null}if(!b){return}do{b=f.keyCheckQueue;f.keyCheckQueue=[];for(c=0,a=b.length;c<a;++c){e=b[c];e.role.checkKeyForDrop(e.record)}}while(d&&f.keyCheckQueue.length)},queueKeyCheck:function(a,e){var c=this,b=c.keyCheckQueue,d=c.timer;if(!b){c.keyCheckQueue=b=[]}b.push({record:a,role:e});if(!d){c.timer=d=Ext.Function.defer(c.processKeyChecks,c.getKeyCheckDelay(),c)}},rankEntities:function(){var e=this,f=e.entities,a=Ext.Object.getKeys(f),d=a.length,c,b;e.nextRank=1;a.sort();for(b=0;b<d;++b){c=f[a[b]].cls;if(!c.rank){e.rankEntity(c)}}},rankEntity:function(c){var b=c.associations,e,d,a;for(a in b){d=b[a];if(!d.left&&d.association.field){e=d.cls;if(!e.rank){this.rankEntity(e)}}}c.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{autoFilter:true,autoSort:true,filters:undefined,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:undefined,remoteSort:false,remoteFilter:false,groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:false,isDestroyed:false,isStore:true,updating:0,constructor:function(b){var c=this,a;c.isInitializing=true;c.mixins.observable.constructor.call(c,b);c.isInitializing=false;a=c.getStoreId();if(!a&&(b&&b.id)){c.setStoreId(a=b.id)}if(a){Ext.data.StoreManager.register(c)}},getId:function(){return this.getObservableId()},getCount:function(){return this.getData().getCount()},rangeCached:function(b,a){return this.getData().getCount()>=Math.max(b,a)},find:function(f,e,g,h,a,d){var c=!h,b=c&&d;return this.getData().findIndex(f,e,g,c,b,!a)},findRecord:function(){var b=this,a=b.find.apply(b,arguments);return a!==-1?b.getAt(a):null},findExact:function(b,a,c){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(b),a)},this,c)},findBy:function(b,a,c){return this.getData().findIndexBy(b,a,c)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,c){var a=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);if(c&&c.callback){c.callback.call(c.scope||this,a,d,b,c)}return a},applyFilters:function(b,a){if(!a){a=this.createFiltersCollection();a.setRootProperty("data")}a.add(b);return a},applySorters:function(b,a){if(!a){a=this.createSortersCollection();a.setRootProperty("data")}a.add(b);return a},updateAutoFilter:function(b){var a=this.getData();if(a.setAutoFilter){a.setAutoFilter(b)}},updateAutoSort:function(a){var b=this.getData();if(b.setAutoSort){b.setAutoSort(a)}},filter:function(a,b){if(Ext.isString(a)){a={property:a,value:b}}this.getFilters().add(a)},removeFilter:function(a){var c=this,b=c.getFilters();if(a instanceof Ext.util.Filter){b.remove(a)}else{b.removeByKey(a)}},updateRemoteSort:function(c){var a=this,d=a.getSorters(),b=a.getData();if(c){d.on("endupdate",a.onSorterEndUpdate,a);b.un("beforesort",a.onBeforeCollectionSort,a)}else{d.un("endupdate",a.onSorterEndUpdate,a);b.on("beforesort",a.onBeforeCollectionSort,a)}},updateRemoteFilter:function(c){var b=this,a=b.getFilters();if(c){a.on("endupdate",b.onFilterEndUpdate,b)}else{a.un("endupdate",b.onFilterEndUpdate,b)}},addFilter:function(a){this.getFilters().add(a)},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(false);if(!a||a.getCount()===0){return}b.suppressNextFilter=!!c;a.removeAll();b.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){return this.getSorters().getCount()>0||this.isGrouped()},addFieldTransform:function(e){if(e.getTransform()){return}var d=e.getProperty(),c=this.getModel(),a,b;if(c){a=c.getField(d);b=a?a.getSortType():null}if(b&&b!==Ext.identityFn){e.setTransform(b)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var f=this,g=[],e=f.getFilters(),b=f.getGrouper(),h,d,c,a;f.getSorters().each(function(j){g[g.length]=j.getState();d=true});if(f.statefulFilters&&f.saveStatefulFilters){d=true;h=[];e.each(function(j){h[h.length]=j.getState()})}if(b){d=true}if(d){a={};if(g.length){a.sorters=g}if(h){a.filters=h}if(b){a.grouper=b.getState()}}return a},applyState:function(f){var d=this,g=d.getSorters(),c=d.getFilters(),b=f.sorters,a=f.filters,e=f.grouper;if(b){g.replaceAll(b)}if(a){d.saveStatefulFilters=true;c.replaceAll(a)}if(e){this.setGrouper(e)}},hasPendingLoad:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;a.clearListeners();if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.onDestroy();a.callParent()},sort:function(c,b,d){var a=this;if(arguments.length===0){if(a.getRemoteSort()){a.attemptLoad()}else{a.forceLocalSort()}}else{a.getSorters().addSort(c,b,d)}},onBeforeCollectionSort:function(a,b){this.fireEvent("beforesort",this,b.getRange())},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){if(a.getRemoteSort()){a.attemptLoad({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("datachanged",a);a.fireEvent("refresh",a);a.fireEvent("sort",a,b)}}else{a.fireEvent("sort",a,b)}},onFilterEndUpdate:function(){var b=this,a=b.suppressNextFilter;if(b.getAutoFilter()){if(b.getRemoteFilter()){b.currentPage=1;if(!a){b.attemptLoad()}}else{if(!a){b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}}}if(b.trackStateChanges){b.saveStatefulFilters=true}b.fireEvent("filterchange",b,b.getFilters().getRange())},updateGroupField:function(b){var a=this.getData();if(b){a.setGrouper({property:b,direction:this.getGroupDir()})}else{a.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(a,d,b){var c=this,e=a||c.getSorters().getCount()>0;if(a&&typeof a==="string"){a={property:a,direction:d||c.getGroupDir()}}c.getData().setGrouper(a);if(c.isLoadBlocked()){return}if(e){if(c.getRemoteSort()){c.attemptLoad({callback:function(){c.fireEvent("groupchange",c,c.getGrouper())}})}else{c.fireEvent("datachanged",c);c.fireEvent("refresh",c);c.fireEvent("groupchange",c,c.getGrouper())}}else{c.fireEvent("groupchange",c,c.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b="";if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:true,$configPrefixed:false,config:{field:null,message:""},constructor:function(a){this.initConfig(a);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(f){var j=this,g=f.fields,d=f.data,l,k,m,e,h,c,b,a;for(e=0,h=g.length;e<h;++e){k=g[e];a=k.name;b=d[a];if(k.validate&&!k.validate.$nullFn){l=j.length;c=k.validate(b,null,j);if(l===j.length&&c!==true){j.add(a,c)}}}return j},add:function(b,d){var c=this,a=Ext.data.field.Field.defaultInvalidMessage,f=b,e;if(Ext.isString(b)){f=new Ext.data.Error({field:b,message:d||a})}else{if(!(f.isError)){f=new Ext.data.Error({field:f.field||f.name,message:f.error||f.message||f.msg||a})}b=f.field}e=c.get(b);if(e){if(Ext.isArray(e)){e.push(f);return e}c.removeAtKey(b);f=[e,f];f.field=b;f=[f]}return Ext.util.MixedCollection.prototype.add.call(this,f)},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:true,config:{synchronous:false,url:"",params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}},getAction:function(){return this.action},execute:function(){var a=this;delete a.error;delete a.success;a.complete=a.exception=false;a.setStarted();return a.request=a.doExecute()},doExecute:Ext.emptyFn,abort:function(){var b=this,a=b.request;if(b.running&&a){b.getProxy().abort(a);b.request=null}},process:function(b,d,a,e){var c=this;e=e!==false;c.setResponse(a);c.setResultSet(b);if(b.getSuccess()){c.doProcess(b,d,a);c.setSuccessful(e)}else{if(e){c.setException(b.getMessage())}}},_commitSetOptions:{convert:true,commit:true},doProcess:function(m,f,e){var k=this,d=k._commitSetOptions,a=k.getRecords(),c=a.length,n=a[0].clientIdProperty,o=m.getRecords(),j=o?o.length:0,l,h,b,g;if(j&&n){l=Ext.Array.toValueMap(a,"id");for(g=0;g<j;++g){h=o[g];b=l[h[n]];if(b){delete l[b.id];delete h[n];b.set(h,d)}}for(g in l){l[g].commit()}}else{for(g=0;g<c;++g){b=a[g];if(j===0||!(h=o[g])){b.commit()}else{b.set(h,d)}}}},setStarted:function(){this.started=this.running=true},setCompleted:function(){this.complete=true;this.running=false;this.triggerCallbacks()},setSuccessful:function(a){this.success=true;if(a){this.setCompleted()}},setException:function(a){var b=this;b.exception=true;b.success=b.running=false;b.error=a;b.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);a.setInternalCallback(null);a.setInternalScope(null)}if(b=a.getCallback()){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return true}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:true,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0));(Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:true,order:30,foreignKeyDirection:-1,doProcess:function(){var c=this.getRecords(),a=c.length,b;for(b=0;b<a;++b){c[b].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,c){var e={},d=a.idField,b=this.getNameProperty()||"name";e[d[b]]=a.id;return e}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0));(Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:true,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:false},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return false}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0));(Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:true,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:true,type:"base",statics:{all:{},register:function(b,a){var c=this.all;c[b.toUpperCase()]=c[b.toLowerCase()]=c[b]=a.prototype}},onClassExtended:function(a,b){if(b.type){Ext.data.validator.Validator.register(b.type,a)}},constructor:function(a){if(typeof a==="function"){this.fnOnly=true;this.validate=a}else{this.initConfig(a)}},validate:function(){return true},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}));(Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:true,isField:true,allowBlank:true,allowNull:false,critical:false,defaultInvalidMessage:"This field is invalid",defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,sortDir:"ASC",unique:false,rank:null,stripRe:/[\$,%]/g,calculated:false,evil:false,identifier:false,onClassExtended:function(c,e){var f=e.sortType,d=c.prototype,a=d.validators,b=e.validators;if(f&&Ext.isString(f)){d.sortType=Ext.data.SortTypes[f]}if(b){if(!Ext.isArray(b)){b=[b]}delete e.validators;if(a){b=a.concat(b)}d.validators=b}},argumentNamesRe:/^function\s+\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var l=this,n=l.calculateRe,g,o,m,h,c,a,j,b,k,e,f;if(d){if(Ext.isString(d)){l.name=d}else{f=d.validators;if(f){delete d.validators;l.instanceValidators=f}Ext.apply(l,d)}}if(!l.allowNull){l.allowNull=!!l.reference}g=l.calculate;c=l.depends;if(g){l.convert=l.doCalculate;if(!c){if(!(c=g.$depends)){a={};k=g.toString();g.$depends=c=[];j=l.argumentNamesRe.exec(k);b=j?j[1]:"data";while((j=n.exec(k))){if(b===j[1]&&!a[e=j[2]]){a[e]=1;c.push(e)}}}l.depends=c}}m=l.defaultValue;if(l.convert){if(m!==undefined){l.defaultValue=m=l.convert(m)}l.calculated=o=l.convert.length>1;l.evil=o&&!c}if(l.persist===null){l.persist=!o}h=l.sortType;if(!l.sortType){l.sortType=Ext.data.SortTypes.none}else{if(Ext.isString(h)){l.sortType=Ext.data.SortTypes[h]}}if(c&&typeof c==="string"){l.depends=[c]}l.cloneDefaultValue=m!==undefined&&(Ext.isDate(m)||Ext.isArray(m)||Ext.isObject(m))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)},constructValidators:function(a){if(a){if(!(a instanceof Array)){a=[a]}var e=a.length,c=this._validators,b,d;for(b=0;b<e;++b){d=a[b];if(d.fn){d=d.fn}c.push(Ext.Factory.dataValidator(d))}}},collate:function(c,b){var d=this,a=c,e=b;if(d.sortType){a=d.sortType(a);e=d.sortType(e)}return(a<e)?-1:((a>e)?1:0)},compare:function(a,b){return(a===b)?0:((a<b)?-1:1)},isEqual:function(a,b){return !this.compare(a,b)},convert:null,serialize:null,validate:function(h,d,g){var f=this,e="",j,a,c,b;if(!f._validators){f.compileValidators()}c=f._validators;for(i=0,b=c.length;i<b;++i){a=c[i];j=a.validate(h);if(j!==true){j=j||f.defaultInvalidMessage;if(g){g.add(f.name,j);e=e||j}else{if(d){if(e){e+=d}e+=j}else{e=j;break}}}}return e||true},doCalculate:function(a,b){return b?this.calculate(b.data):a},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortDir:function(){return this.sortDir},getSortType:function(){return this.sortType},getType:function(){return"auto"}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:true,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==="boolean"){return a}if(this.allowNull&&(a===undefined||a===null||a==="")){return null}return this.trueRe.test(String(a))},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0));(Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:true,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(b,e){var d=b instanceof Date,c=e instanceof Date,a;if(c&&d){a=b.getTime()-e.getTime();if(a===0){a=0}else{a=a<0?-1:1}}else{if(d===c){a=0}else{a=d?1:-1}}return a},convert:function(c){if(!c){return null}if(c instanceof Date){return c}var a=this.dateReadFormat||this.dateFormat,b;if(a){return Ext.Date.parse(c,a)}b=Date.parse(c);return b?new Date(b):null},serialize:function(b){var a=null,c;if(Ext.isDate(b)){c=this.getDateWriteFormat();a=c?Ext.Date.format(b,c):b}return a},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty("dateWriteFormat")){return a.dateWriteFormat}if(a.hasOwnProperty("dateFormat")){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0));(Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:true,isIntegerField:true,convert:function(b){if(typeof b=="number"){return parseInt(b)}var d=b===undefined||b===null||b==="",a=this.allowNull,c;if(d){c=a?null:0}else{c=parseInt(String(b).replace(this.stripRe,""),10);if(a&&isNaN(c)){c=null}}return c},getType:function(){return"int"}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0));(Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Field,{isNumeric:true,isNumberField:true,convert:function(b){if(typeof b==="number"){return b}var d=b===undefined||b===null||b==="",a=this.allowNull,c;if(d){c=a?null:0}else{c=parseFloat(String(b).replace(this.stripRe,""));if(a&&isNaN(c)){c=null}}return c},getType:function(){return"float"}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0));(Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:true,convert:function(b){var a=this.allowNull?null:"";return(b===undefined||b===null)?a:String(b)},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0));(Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":true,factoryConfig:{defaultType:"sequential"},isGenerator:true,config:{id:null},constructor:function(b){var c=this,a,d;c.initConfig(b);d=c.getId();if(d){a=(b&&b.cache)||Ext.data.identifier.Generator.all;a[d]=c}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var c=this,a=Ext.Factory,b=a.dataIdentifier;a.dataIdentifier=function(d){var f=Ext.isString(d)?d:(d&&d.id),e=f&&((d&&d.cache)||c.all)[f];return e||b(d)}}));(Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var b=this,a=b._seed,c=b._prefix;b._seed+=b._increment;return(c!==null)?c+a:a}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:true,isModel:true,validIdRe:null,observableType:"record",constructor:function(e,l){var m=this,p=m.self,k=p.identifier,c=Ext.data.Model,n=c.identifier,o=m.idField.name,j,a,b,h,g,d,f;m.data=e||(e={});m.session=l||null;m.internalId=h=n.generate();if((j=e) instanceof Array){m.data=e={};f=m.getFields();g=Math.min(f.length,j.length);for(d=0;d<g;++d){e[f[d].name]=j[d]}}if(!(b=p.initializeFn)){p.initializeFn=b=c.makeInitializeFn(p)}if(!b.$nullFn){p.initializeFn(m)}if(!(m.id=a=e[o])&&a!==0){if(l){k=l.getIdentifier(p);a=k.generate()}else{if(n===k){a=h}else{a=k.generate()}}e[o]=m.id=a;m.phantom=true}if(l){l.add(m)}if(m.init&&Ext.isFunction(m.init)){m.init()}},editing:false,dirty:false,session:null,dropped:false,erased:false,clientIdProperty:null,evented:false,phantom:false,idProperty:"id",identifier:null,previousValues:undefined,proxy:undefined,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:true,beginEdit:function(){var c=this,b=c.modified,a=c.previousValues;if(!c.editing){c.editing=true;c.editMemento={dirty:c.dirty,data:Ext.apply({},c.data),generation:c.generation,modified:b&&Ext.apply({},b),previousValues:a&&Ext.apply({},a)}}},cancelEdit:function(){var b=this,a=b.editMemento;if(a){b.editing=false;Ext.apply(b,a);b.editMemento=null}},endEdit:function(b,d){var c=this,a=c.editMemento;if(a){c.editing=false;c.editMemento=null;c.previousValues=a.previousValues;if(!b){if(!d){d=c.getModifiedFieldNames(a.data)}if(c.dirty||(d&&d.length)){c.callJoined("afterEdit",[d])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(a){this.set(this.idProperty,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(b){var a;if(this.isModified(b)){a=this.modified[b]}return a},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:false,commit:true,silent:true},set:function(f,u,g){var G=this,d=G.self,H=G.data,n=G.modified,v=G.previousValues,a=G.session,F=Ext.isString(f),b=(F?g:u),q=b?b.convert!==false:G.convertOnSet,j=G.fieldsMap,D=b&&b.silent,r=b&&b.commit,p=!(b&&b.refs===false)&&a,o=!(b&&b.dirty===false&&!r),A=null,s,c,C,J,I,x,h,m,w,B,y=0,E,t,l,k,z,e;if(F){e=G._singleProp;e[f]=u}else{e=f}if(!(l=d.rankedFields)){l=d.rankFields()}E=l.length;do{for(I in e){z=e[I];s=H[I];h=G;c=j[I];if(c){if(q&&c.convert){z=c.convert(z,G)}h=c;k=c.reference}else{k=null}if(h.isEqual(s,z)){continue}H[I]=z;(A||(A=[])).push(I);(v||(G.previousValues=v={}))[I]=s;if(k&&k.cls){if(p){a.updateReference(G,c,z,s)}k.onValueChange(G,a,z,s)}B=(w=c&&c.dependents)&&w.length;while(B-->0){(m=w[B]).dirty=true;y=y?Math.min(y,m.rank):m.rank}if(!c||c.persist){if(n&&n.hasOwnProperty(I)){if(!o||h.isEqual(n[I],z)){delete n[I];G.dirty=-1}}else{if(o){if(!n){G.modified=n={}}G.dirty=true;n[I]=s}}}if(I===G.idField.name){C=true;x=s;t=z}}if(!y){break}c=l[y-1];c.dirty=false;if(F){delete e[f]}else{e=G._singleProp;F=true}f=c.name;e[f]=H[f];q=true;for(;y<E;++y){if(l[y].dirty){break}}if(y<E){++y}else{y=0}}while(1);if(G.dirty<0){G.dirty=false;for(J in n){if(n.hasOwnProperty(J)){G.dirty=true;break}}}if(F){delete e[f]}++G.generation;if(C){G.id=t;G.callJoined("onIdChanged",[x,t])}if(r){G.commit(D,A)}else{if(!D&&!G.editing&&A){G.callJoined("afterEdit",[A])}}return A},reject:function(a){var c=this,b=c.modified;c.rejecting=true;if(b){c.set(b,c._rejectOptions)}delete c.rejecting;c.clearState();if(!a){c.callJoined("afterReject")}},commit:function(b,d){var c=this,a;c.clearState();if(!c.rejecting){c.phantom=false}if(c.dropped){c.erased=a=true}if(!b){if(a){c.callJoined("afterErase")}else{c.callJoined("afterCommit",[d])}}},clearState:function(){var a=this;a.dirty=a.editing=false;a.editMemento=a.modified=null},drop:function(b){var e=this,d=e.associations,f=e.session,c=e.phantom,a;if(e.erased||e.dropped){return}e.dropped=true;if(d&&b!==false){for(a in d){d[a].onDrop(e,f)}}e.callJoined("afterDrop");if(e.phantom){e.setErased()}},join:function(b){var a=this,c=a.joined;if(!c){c=a.joined=[b]}else{if(!c.length){c[0]=b}else{Ext.Array.include(c,b)}}if(b.isStore){a.store=a.store||b}},unjoin:function(e){var d=this,f=d.joined,a=f&&f.length,b=d.store,c;if(a===1&&f[0]===e){f.length=0}else{if(a){Ext.Array.remove(f,e)}}if(b===e){b=null;if(f){for(c=0,a=f.length;c<a;++c){e=f[c];if(e.isStore){b=e;break}}}d.store=b}},clone:function(d){var c=this,b=c.modified,a=c.copy(c.id,d);if(b){a.modified=Ext.apply({},b)}a.dirty=c.dirty;a.dropped=c.dropped;a.phantom=c.phantom;return a},copy:function(c,f){var d=this,e=Ext.apply({},d.data),b=d.idProperty,a=d.self;if(c||c===0){e[b]=c}else{if(c===null){delete e[b]}}return new a(e,f)},getProxy:function(){return this.self.getProxy()},getValidation:function(b){var c=this,a=c.validation;if(!a){c.validation=a=new Ext.data.Validation();a.attach(c)}if(b===true||(b!==false&&a.syncGeneration!==c.generation)){a.refresh(b)}return a},validate:function(){return new Ext.data.ErrorCollection().init(this)},isValid:function(){var a=this.getValidation();return !a.dirty},toUrl:function(){var b=this.$className.split("."),a=b[b.length-1].toLowerCase();return a+"/"+this.getId()},erase:function(a){this.drop();return this.save(a)},setErased:function(){this.erased=true;this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(m){var j=this,b=j.associations,k,f,l,h,c,a,g,e,d;m=m||{};j.$gathering=1;for(d in b){e=b[d];l=e.getAssociatedItem(j);if(!l||l.$gathering){continue}if(l.isStore){l.$gathering=1;h=l.getData().items;a=h.length;c=[];for(f=0;f<a;++f){g=h[f];k=!g.$gathering;g.$gathering=1;c.push(g.getData(k));delete g.$gathering}delete l.$gathering}else{c=l.getData(true)}m[d]=c}delete j.$gathering;return m},getData:function(s){var k=this,j={},a=(s===true)?k._getAssociatedOptions:(s||j),e=k.data,l=a.associated,p=a.changes,o=p&&a.critical,h=p?k.modified:e,g=k.fieldsMap,f=a.persist,r=a.serialize,c,m,d,b,q;if(h){for(b in h){q=e[b];m=g[b];if(m){if(f&&!m.persist){continue}if(r&&m.serialize){q=m.serialize(q,k)}}j[b]=q}}if(o){c=k.self.criticalFields||k.getCriticalFields();for(d=c.length;d-->0;){b=(m=c[d]).name;if(!(b in j)){q=e[b];if(r&&m.serialize){q=m.serialize(q,k)}j[b]=q}}}if(l){k.getAssociatedData(j)}return j},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(b){b=Ext.apply({},b);var f=this,e=b.scope||f,c=f.getProxy(),h=b.callback,a=f.loadOperation,g=f.getId(),d;if(a){d=a.extraCalls;if(!d){d=a.extraCalls=[]}d.push(b);return a}b.id=g;b.recordCreator=function(l,j,k){var m=f.session;k.recordCreator=m?m.recordCreator:null;f.set(l,f._commitOptions);return f};b.internalCallback=function(l){var p=l.wasSuccessful()&&l.getRecords().length>0,q=f.loadOperation,n=q.extraCalls,k=[f,l],o=[f,l,p],m,j;f.loadOperation=null;if(p){Ext.callback(b.success,e,k)}else{Ext.callback(b.failure,e,k)}Ext.callback(h,e,o);if(n){for(m=0,j=n.length;m<j;++m){b=n[m];if(p){Ext.callback(b.success,e,k)}else{Ext.callback(b.failure,e,k)}Ext.callback(b.callback,e,o)}}f.callJoined("afterLoad")};delete b.callback;f.loadOperation=a=c.createOperation("read",b);a.execute();return a},save:function(j){j=Ext.apply({},j);var f=this,d=f.phantom,a=f.dropped,c=a?"destroy":(d?"create":"update"),h=j.scope||f,g=j.callback,e=f.getProxy(),b;j.records=[f];j.internalCallback=function(k){var l=[f,k],m=k.wasSuccessful();if(m){Ext.callback(j.success,h,l)}else{Ext.callback(j.failure,h,l)}l.push(m);Ext.callback(g,h,l)};delete j.callback;b=e.createOperation(c,j);if(a&&d){b.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);f.setErased();b.setSuccessful(true)}else{b.execute()}return b},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(m,j){var n=this,e=n.prototype,h=Ext.data.field.Field,f=n.fields,l=n.fieldsMap,c=n.fieldOrdinals,o,d,b,g,a,k;if(j===true){f.length=0;n.fieldsMap=l={};n.fieldOrdinals=c={}}else{if(j){for(d=j.length;d-->0;){a=j[d];if(a in c){delete c[a];delete l[a]}}for(d=0,g=f.length;d<g;++d){a=(o=f[d]).name;if(a in c){c[a]=d}else{f.splice(d,1);--d;--g}}}}for(d=0,g=m?m.length:0;d<g;d++){a=(o=m[d]).name;if(!(a in c)){c[a]=k=f.length;f.push(o=h.create(o));l[a]=o;o.ordinal=k;o.definedBy=o.owner=this}}n.idField=e.idField=b=l[e.idProperty];b.allowNull=b.critical=b.identifier=true;b.defaultValue=null;n.initializeFn=n.rankedFields=n.transientFields=n.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(c){var b=this,a=b.idField,d=a.calculated?(new b(c)).id:c[a.name];return d},createWithId:function(f,b,c){var e=b,a=this;if(f||f===0){e={};if(b){Ext.apply(e,b)}e[a.idField.name]=f}return new a(e,c)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var b=this,a=b.proxy,c;if(!a){a=b.proxyConfig;if(!a||!a.isProxy){if(typeof a==="string"){a={type:a}}c=b.schema.constructProxy(b);a=a?Ext.merge(c,a):c}a=b.setProxy(a)}return a},setProxy:function(b){var c=this,a;if(b){if(!b.isProxy){b=Ext.Factory.proxy(b)}else{a=b.getModel();if(a&&a!==c){b=b.clone()}}b.setModel(c)}return(c.prototype.proxy=c.proxy=b)},load:function(e,a,c){var b={},d;b[this.prototype.idProperty]=e;d=new this(b,c);d.load(a);return d}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(f,d){var e=this,b=e.stores,a=b.length,c;for(c=0;c<a;++c){f.call(d,b[c])}},join:function(c){var b=this,a=b.stores,d=b.joined;if(!d){d=b.joined=[c]}else{d.push(c)}if(c.isStore){b.store=b.store||c;if(!a){a=b.stores=[]}a.push(c)}},unjoin:function(c){var b=this,a=b.stores,d=b.joined;if(d.length===1){d.length=0}else{Ext.Array.remove(d,c)}if(c.isStore){Ext.Array.remove(a,c);b.store=a[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:true},_getChangesOptions:{changes:true},_getAssociatedOptions:{associated:true},copyFrom:function(h){var g=this,e=g.fields,l=e.length,b=[],j,c=0,f,d,m=g.idProperty,a,k;if(h){f=g.data;d=h.data;for(;c<l;c++){j=e[c];a=j.name;if(a!=m){k=d[a];if(k!==undefined&&!g.isEqual(f[a],k)){f[a]=k;b.push(a)}}}if(g.phantom&&!h.phantom){g.beginEdit();g.setId(h.getId());g.endEdit(true);g.commit(true)}}return b},callJoined:function(d,c){var f=this,h=f.joined,e=f.session,a,b,g,j;if(!h&&!e){return}if(c){c.unshift(f)}else{c=[f]}if(h){for(a=0,b=h.length;a<b;++a){j=h[a];if(j&&(g=j[d])){g.apply(j,c)}}}g=e&&e[d];if(g){g.apply(e,c)}},setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(a){var d=this,e=d.data,b=[],f=a||d.editMemento.data,c;for(c in e){if(e.hasOwnProperty(c)){if(!d.isEqual(e[c],f[c],c)){b.push(c)}}}return b},isEqual:function(a,d,c){var b;if(c){b=c.isField?c:this.fieldsMap[c];if(b){return b.compare(a,d)===0}}if(a instanceof Date&&d instanceof Date){return a.getTime()===d.getTime()}return a===d},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",rankFields:function(){var j=this,h=j.prototype,d=j.fields,b=d.length,f=[],a=[],e=[],k,g,c;j.rankedFields=h.rankedFields=f;j.criticalFields=h.criticalFields=a;j.transientFields=h.transientFields=e;for(c=0;c<b;++c){g=d[c];if(g.critical){a.push(g)}if(!g.persist){e.push(g)}if(g.evil){(k||(k=[])).push(g)}else{if(!g.depends){f.push(g);g.rank=f.length}}}for(c=0;c<b;++c){if(!(g=d[c]).rank&&!g.evil){j.topoAdd(g)}}if(k){for(c=0,b=k.length;c<b;++c){f.push(g=k[c]);g.rank=f.length}}return f},topoAdd:function(g){var b=this,f=g.depends,a=f?f.length:0,d=b.rankedFields,c,e;for(c=0;c<a;++c){e=b.fieldsMap[f[c]];(e.dependents||(e.dependents=[])).push(g);if(!e.rank){b.topoAdd(e)}}d.push(g);g.rank=d.length},initFields:function(s,b,n){var j=Ext.data.field.Field,d=s.fields,o=[],k={},f={},a=[],r=n.fields,l=s.versionProperty||n.versionProperty,m=s.idProperty||n.idProperty,g,c,q,e,t,p,h;b.fields=n.fields=o;b.fieldOrdinals=n.fieldOrdinals=k;b.fieldsMap=n.fieldsMap=f;b.references=n.references=a;if(r){for(q=0,e=r.length;q<e;++q){o[q]=c=Ext.Object.chain(r[q]);c.dependents=null;c.owner=b;k[t=c.name]=q;f[t]=c}}if(d){delete s.fields;for(q=0,e=d.length;q<e;++q){c=d[q];h=c.reference;if(h&&typeof h!=="string"){h=Ext.merge({},h)}c.$reference=h;c=j.create(d[q]);t=c.name;p=k[t];if(p===undefined){k[t]=p=o.length}f[t]=c;o[p]=c;c.definedBy=c.owner=b;c.ordinal=p;if(t===l){c.critical=true}}}if(!(g=f[m])){g=new j(m);p=o.length;o[p]=g;k[m]=p;f[m]=g;g.definedBy=b;g.ordinal=p}g.allowNull=g.critical=g.identifier=true;g.defaultValue=null;b.idField=n.idField=g},initValidators:function(g,o,j){var m=j.validators,e,l,c,k,f,d,h,b,a,n;if(m){e={};for(l in m){e[l]=Ext.Array.clone(m[l])}}k=g.validators||g.validations;if(k){delete g.validators;e=e||{};if(Ext.isArray(k)){c={};for(f=0,d=k.length;f<d;++f){n=k[f];b=n.field;if(!c[b]){c[b]=[]}n=n.fn||n;c[b].push(n)}k=c}for(b in k){h=k[b];if(!Ext.isArray(h)){h=[h]}a=e[b];if(e[b]){Ext.Array.push(a,h)}else{e[b]=h}}}if(e){for(b in e){l=o.getField(b);if(l){l.setModelValidators(e[b])}}}o.validators=j.validators=e},initAssociations:function(c,f,k){var b=f.associations,d=f.belongsTo,h=f.hasMany,l=f.hasOne,j=f.manyToMany,e,a,g;delete f.manyToMany;if(j){c.addMatrices(k,j)}delete f.associations;delete f.belongsTo;delete f.hasMany;delete f.hasOne;if(b){b=Ext.isArray(b)?b:[b];for(e=0,a=b.length;e<a;++e){g=b[e];switch(g.type){case"belongsTo":c.addLegacyBelongsTo(k,g);break;case"hasMany":c.addLegacyHasMany(k,g);break;case"hasOne":c.addLegacyHasOne(k,g);break}}}if(d){d=Ext.isArray(d)?d:[d];for(e=0,a=d.length;e<a;++e){c.addLegacyBelongsTo(k,d[e])}}if(h){h=Ext.isArray(h)?h:[h];for(e=0,a=h.length;e<a;++e){c.addLegacyHasMany(k,h[e])}}if(l){l=Ext.isArray(l)?l:[l];for(e=0,a=l.length;e<a;++e){c.addLegacyHasOne(k,l[e])}}c.afterLegacyAssociations(k)},initIdentifier:function(f,a,e){var b=f.identifier||f.idgen,d=e.identifier||a.schema._defaultIdentifier,c;if(b){delete f.identifier;delete f.idgen;b=Ext.Factory.dataIdentifier(b)}else{if(d){if(d.clone&&!d.getId()){b=d.clone()}else{if(d.isGenerator){b=d}else{b=Ext.Factory.dataIdentifier(d)}}}}a.identifier=e.identifier=b;if(!b){c=a.entityName;if(!c){c=Ext.id(null,"extModel")}a.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:c+"-"})}},findValidator:function(c,d,b){var f=b.type||b,h=c[d],a,e,g;if(h){for(e=0,a=h.length;e<a;++e){g=h[e];if(g.type===f){return g}}}return null},makeInitializeFn:function(q){var a=["var "],h=["\nreturn function (e) {\n    var data = e.data, v;\n"],e=[],n=0,k,j,l,p,d,m,g,f,o,c,b;if(!(g=q.rankedFields)){g=q.rankFields()}for(c=0,b=g.length;c<b;++c){m=g[c];e[c]=f="f"+c;l=m.convert;if(c){a.push(",  \n    ")}a.push(f," = $fields["+c+"]");if((o=(m.defaultValue!==undefined))||l){p='data["'+m.name+'"]';++n;k=j="";if(m.cloneDefaultValue){k="Ext.clone(";j=")"}h.push("\n");if(l&&o){h.push("    v = ",p,";\n    if (v !== undefined) {\n        v = ",f,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",k,f,".defaultValue",j,";\n    }\n    ",p," = v;")}else{if(l){h.push("    v = ",f,".convert(",p,",e);\n    if (v !== undefined) {\n        ",p," = v;\n    }\n")}else{if(o){h.push("    if (",p," === undefined) {\n        ",p," = ",k,f,".defaultValue",j,";\n    }\n")}}}}}if(!n){return Ext.emptyFn}a.push(";\n");a.push.apply(a,h);a.push("}");a=a.join("");d=new Function("$fields",a);return d(g)}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var d=this,c=d.prototype,b=Ext.data.schema.Schema,a;d.proxyConfig=c.proxy;delete c.proxy;d.fields=[];d.fieldsMap=c.fieldsMap={};d.schema=c.schema=b.get(c.schema);c.idField=new Ext.data.field.Field(c.idProperty);d.identifier=new Ext.data.identifier.Sequential();d.onExtended(function(e,k){var j=e.prototype,m=k.schema,l=j.superclass.self,h,g,f;e.idProperty=j.idProperty;if(m){delete k.schema;h=b.get(m)}else{if(!(h=j.schema)){h=a||(a=b.get("default"))}}e.rankFields=d.rankFields;e.topoAdd=d.topoAdd;j.schema=e.schema=h;if(!(g=k.entityName)){j.entityName=g=h.getEntityName(e)}e.entityName=g;e.fieldExtractors={};d.initIdentifier(k,e,j);d.initFields(k,e,j);d.initValidators(k,e,j);e.fields.items=e.fields;if(g){h.addEntity(e);d.initAssociations(h,k,e)}f=k.proxy;if(f){delete k.proxy}else{if(l!==d){f=l.proxyConfig||l.proxy}}e.proxyConfig=f})}));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:true,$configPrefixed:false,config:{loaded:true,count:null,total:null,success:false,records:null,message:null,readRoot:false},constructor:function(a){this.initConfig(a)},applyCount:function(a){if(!a&&a!==0){return this.getRecords().length}return a},updateRecords:function(a){this.setCount(a.length)}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:true,readRecordsOnFailure:true,model:null,proxy:null,transform:null},isReader:true,constructor:function(a){if(a&&a.hasOwnProperty("root")){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}var b=this;b.duringInit=true;b.mixins.observable.constructor.call(b,a);delete b.duringInit;b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(true)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(b,d){var c,a;if(b){if(b.responseText){a=this.getResponseData(b);if(a&&a.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:a.msg})}else{c=this.readRecords(a,d)}}else{c=this.readRecords(b,d)}}return c||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return{__$isError:true,msg:a}},readRecords:function(e,c){var f=this,k,d,b,h,g,j,l,a;a=this.getTransform();if(a){e=a(e)}f.buildExtractors();f.rawData=e;e=f.getData(e);k=true;d=0;b=[];if(f.getSuccessProperty()){j=f.getSuccess(e);if(j===false||j==="false"){k=false}}if(f.getMessageProperty()){l=f.getMessage(e)}if(f.getReadRecordsOnFailure()||k){h=Ext.isArray(e)?e:f.getRoot(e);if(h){g=h.length}if(f.getTotalProperty()){j=parseInt(f.getTotal(e),10);if(!isNaN(j)){g=j}}if(h){b=f.extractData(h,c);d=b.length}}return new Ext.data.ResultSet({total:g||d,count:d,records:b,success:k,message:l,readRoot:!!h})},extractData:function(o,f){var m=this,g=f&&f.model?Ext.data.schema.Schema.lookupEntity(f.model):m.getModel(),d=g.schema,p=d.hasAssociations(g)&&m.getImplicitIncludes(),n=m.getFieldExtractorInfo(g.fieldExtractors),a=o.length,c=new Array(a),k=m.getTypeProperty(),l,b,e,j,h;if(!a&&Ext.isObject(o)){o=[o];a=1}for(h=0;h<a;h++){j=o[h];if(!j.isModel){b=j;if(k&&(e=m.getChildType(d,b,k))){l=e.getProxy().getReader();j=l.extractRecord(b,f,e,d.hasAssociations(e)&&l.getImplicitIncludes(),l.getFieldExtractorInfo(e.fieldExtractors))}else{j=m.extractRecord(b,f,g,p,n)}if(j.isModel){j.raw=b}}if(j.onLoad){j.onLoad()}c[h]=j}return c},getChildType:function(b,c,d){var a;switch(typeof d){case"string":return b.getEntity(c[d]);case"object":a=d.namespace;return b.getEntity((a?a+".":"")+c[d.name]);case"function":return b.getEntity(d(c))}},extractRecordData:function(c,d){var b=d&&d.model?Ext.data.schema.Schema.lookupEntity(d.model):this.getModel(),a=this.getFieldExtractorInfo(b.fieldExtractors);return this.extractRecord(c,d,b,false,a)},extractRecord:function(a,b,c,j,g){var f=this,e=(b&&b.recordCreator)||f.defaultRecordCreator,h,d;h=f.extractModelData(a,g);d=e.call(f,h,c||f.getModel(),b);if(j&&d.isModel){f.readAssociated(d,a,b)}return d},getFieldExtractorInfo:function(c){if(!c){return}var a=this.$className,b=c[a];if(b===undefined){c[a]=b=this.buildFieldExtractors()}return b},buildFieldExtractors:function(){var g=this.getFields(),h=g.length,e=[],k=[],d=null,b=0,j,a,f,c;for(f=0;f<h;++f){j=g[f];c=this.createFieldAccessor(j);if(c){a=j.name;e.push("data['"+a+"'] = extractors["+b+"](raw);");k.push(c);++b}}if(e.length){d={extractors:k,fn:new Function("raw","data","extractors",e.join(""))}}return d},defaultRecordCreator:function(b,c){var a=new c(b);a.phantom=false;return a},getModelData:function(a){return{}},extractModelData:function(b,a){var d=this.getModelData(b),c;if(a){c=a.fn;c(b,d,a.extractors)}return d},readAssociated:function(a,e,d){var c=a.associations,b,f;for(b in c){if(c.hasOwnProperty(b)){f=c[b];if(f.cls){f.read(a,e,this,d)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(g){var f=this,b=g.fields||f.getFields(),c,e,a,d;f.metaData=g;if(g.root){f.setRootProperty(g.root)}if(g.totalProperty){f.setTotalProperty(g.totalProperty)}if(g.successProperty){f.setSuccessProperty(g.successProperty)}if(g.messageProperty){f.setMessageProperty(g.messageProperty)}a=g.clientIdProperty;e=Ext.define(null,{extend:"Ext.data.Model",fields:b,clientIdProperty:a});f.setModel(e);d=f.getProxy();if(d){d.setModel(e)}f.buildExtractors(true)},buildExtractors:function(d){var b=this,c=b.getTotalProperty(),a=b.getSuccessProperty(),e=b.getMessageProperty();if(d||!b.hasExtractors){if(c){b.getTotal=b.createAccessor(c)}if(a){b.getSuccess=b.createAccessor(a)}if(e){b.getMessage=b.createAccessor(e)}b.hasExtractors=true;return true}},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;delete a.model;delete a.getTotal;delete a.getSuccess;delete a.getMessage}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(){var a=this.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""})})}));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(e){var c=e.getOperation(),b=c.getRecords()||[],a=b.length,f=[],d;for(d=0;d<a;d++){f.push(this.getRecordData(b[d],c))}return this.writeRecords(e,f)},writeRecords:Ext.emptyFn,getRecordData:function(j,g){var m=this,e=m.getNameProperty(),a=e!=="name",c=j.self.idField,q=c.name,p=j.id,d=m.getWriteAllFields(),l;if(c.serialize){p=c.serialize(p)}if(!d&&g&&g.isDestroyOperation){l={};l[e?c[e]:q]=p}else{var b=m.getDateFormat(),f=j.phantom,r=(f||d)?m.getAllDataOptions():m.getPartialDataOptions(),o=f&&m.getClientIdProperty(),k=j.getFieldsMap(),h,n;r.serialize=false;h=j.getData(r);l=a?{}:h;if(o){l[o]=p;delete h[q]}else{if(!m.getWriteRecordId()){delete h[q]}}for(q in h){p=h[q];if(!(n=k[q])){if(a){l[q]=p}}else{if(n.isDateField&&b&&Ext.isDate(p)){p=Ext.Date.format(p,b)}else{if(n.serialize){p=n.serialize(p,j)}}if(a){q=n[e]||q}l[q]=p}}}return l}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:false,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:undefined,reader:{type:"json"},writer:{type:"json"}},isProxy:true,isSynchronous:false,constructor:function(a){this.mixins.observable.constructor.call(this,a)},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){return Ext.Factory.reader(a)},updateReader:function(a){if(a){var c=this,b=c.getModel();if(!b){b=a.getModel();if(b){c.setModel(b)}}else{a.setModel(b)}if(a.onMetaChange){a.onMetaChange=Ext.Function.createSequence(a.onMetaChange,c.onMetaChange,c)}}},applyWriter:function(a){return Ext.Factory.writer(a)},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent("metachange",this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(o,l){var k=this,j=k.getBatchActions(),g,c,f,d,e,m,b,n,h;if(o.operations===undefined){o={operations:o,listeners:l}}if(o.batch){if(Ext.isDefined(o.batch.runOperation)){g=Ext.applyIf(o.batch,{proxy:k,listeners:{}})}}else{o.batch={proxy:k,listeners:o.listeners||{}}}if(!g){g=new Ext.data.Batch(o.batch)}g.on("complete",Ext.bind(k.onBatchComplete,k,[o],0));f=k.getBatchOrder().split(",");d=f.length;for(m=0;m<d;m++){e=f[m];c=o.operations[e];if(c){if(j){g.add(k.createOperation(e,{records:c,params:o.params}))}else{n=c.length;for(b=0;b<n;b++){h=c[b];g.add(k.createOperation(e,{records:[h],params:o.params}))}}}}g.start();return g},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException()){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else{if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}},createOperation:function(c,b){var a=Ext.createByAlias("data.operation."+c,b);a.setProxy(this);return a},clone:function(){return new this.self(this.getInitialConfig())}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{enablePaging:false,data:null},finishOperation:function(b){var c=0,d=b.getRecords(),a=d.length;for(c;c<a;c++){d[c].commit()}b.setSuccessful(true)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(f){var h=this,j=h.getReader().read(h.getData()),d=j.getRecords(),g=f.getSorters(),a=f.getGrouper(),c=f.getFilters(),b=f.getStart(),e=f.getLimit();if(f.process(j,null,null,false)!==false){if(c&&c.length){j.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(c)));j.setTotal(d.length)}if(a){g=g?g.concat(a):g}if(g&&g.length){j.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(g)))}if(h.getEnablePaging()&&b!==undefined&&e!==undefined){if(b>=j.getTotal()){j.setConfig({success:false,records:[],total:0})}else{j.setRecords(Ext.Array.slice(d,b,b+e))}}f.setCompleted()}},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",sortOnLoad:true,trackRemoved:true},onClassExtended:function(b,d,a){var c=d.model,e;if(typeof c==="string"){e=a.onBeforeCreated;a.onBeforeCreated=function(){var g=this,f=arguments;Ext.require(c,function(){e.apply(g,f)})}}},implicitModel:false,blockLoadCounter:0,autoSyncSuspended:0,constructor:function(a){var b=this;b.removed=[];b.blockLoad();Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);b.unblockLoad()},updateAutoLoad:function(b){var c=this,a;c.getData();if(b){a=c.loadTask||(c.loadTask=new Ext.util.DelayedTask(null,null,null,null,false));a.delay(1,c.attemptLoad,c,Ext.isObject(b)?[b]:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){var d=this,b,c;if(a){d.implicitModel=true;d.setModel(b=Ext.define(null,{extend:"Ext.data.Model",fields:a,proxy:(c=d.getProxy())}));if(c&&!c.getModel()){c.setModel(b)}}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else{this.getFields();return this.getModel()}return a},applyProxy:function(b){var c=this,a=c.getModel();if(b){if(b.isProxy){b.setModel(a)}else{if(Ext.isString(b)){b={type:b,model:a}}else{if(!b.model){b=Ext.apply({model:a},b)}}b=Ext.createByAlias("proxy."+b.type,b)}}else{if(a){b=a.getProxy()}}if(!b){b=Ext.createByAlias("proxy.memory")}if(!c.disableMetaChangeEvent){b.on("metachange",c.onMetaChange,c)}return b},updateTrackRemoved:function(a){this.removed=a?[]:null},onMetaChange:function(a,b){this.fireEvent("metachange",this,b)},create:function(f,c){var e=this,a=new e.model(f),d=e.getProxy(),b;c=Ext.apply({},c);if(!c.records){c.records=[a]}c.internalScope=e;c.internalCallback=e.onProxyWrite;b=d.createOperation("create",c);return b.execute()},read:function(){return this.load.apply(this,arguments)},update:function(b){var d=this,c=d.getProxy(),a;b=Ext.apply({},b);if(!b.records){b.records=d.getUpdatedRecords()}b.internalScope=d;b.internalCallback=d.onProxyWrite;a=c.createOperation("update",b);return a.execute()},onProxyWrite:function(b){var c=this,d=b.wasSuccessful(),a=b.getRecords();switch(b.getAction()){case"create":c.onCreateRecords(a,b,d);break;case"update":c.onUpdateRecords(a,b,d);break;case"destroy":c.onDestroyRecords(a,b,d);break}if(d){c.fireEvent("write",c,b);c.fireEvent("datachanged",c);c.fireEvent("refresh",c)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(b,a,c){if(c){this.removed.length=0}},erase:function(b){var d=this,c=d.getProxy(),a;b=Ext.apply({},b);if(!b.records){b.records=d.getRemovedRecords()}b.internalScope=d;b.internalCallback=d.onProxyWrite;a=c.createOperation("destroy",b);return a.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(c,a){var f=this,b=c.operations,e=b.length,d;if(f.batchUpdateMode!="operation"){f.suspendEvents();for(d=0;d<e;d++){f.onProxyWrite(b[d])}f.resumeEvents()}f.isSyncing=false;f.fireEvent("datachanged",f);f.fireEvent("refresh",f)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===true&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty===true&&a.phantom!==true&&a.isValid()},getRemovedRecords:function(){return this.removed},sync:function(c){var e=this,b={},f=e.getNewRecords(),d=e.getUpdatedRecords(),a=e.getRemovedRecords(),g=false;e.needsSync=false;if(f.length>0){b.create=f;g=true}if(d.length>0){b.update=d;g=true}if(a.length>0){b.destroy=a;g=true}if(g&&e.fireEvent("beforesync",b)!==false){e.isSyncing=true;c=c||{};e.proxy.batch(Ext.apply(c,{operations:b,listeners:e.getBatchListeners()}))}return e},getBatchListeners:function(){var b=this,a={scope:b,exception:b.onBatchException,complete:b.onBatchComplete};if(b.batchUpdateMode=="operation"){a.operationcomplete=b.onBatchOperationComplete}return a},save:function(){return this.sync.apply(this,arguments)},blockLoad:function(a){if(a!==undefined){this.blockLoadCounter=a}else{++this.blockLoadCounter}},unblockLoad:function(b){var c=this,a=c.blockLoadCounter;if(b){c.blockLoadCounter=0}else{if(a){--c.blockLoadCounter}}return a},isLoadBlocked:function(){return !!this.blockLoadCounter},attemptLoad:function(a){if(!this.isLoadBlocked()){this.load(a)}},load:function(b){if(this.isLoadBlocked()){return}var f=this,c=f.getProxy(),e=f.loadTask,a={internalScope:f,internalCallback:f.onProxyLoad},d,g;if(f.getRemoteFilter()){d=f.getFilters();if(d.getCount()){a.filters=d.getRange()}}if(f.getRemoteSort()){g=f.getSorters();if(g.getCount()){a.sorters=g.getRange()}f.fireEvent("beforesort",f,a.sorters)}Ext.apply(a,b);a.scope=a.scope||f;f.lastOptions=a;a=c.createOperation("read",a);if(f.fireEvent("beforeload",f,a)!==false){f.loading=true;if(e){e.cancel();f.loadTask=null}a.execute()}return f},reload:function(a){var b=Ext.apply({},a,this.lastOptions);return this.load(b)},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(a,c){var b=this;if(!c){c=null}if(b.contains(a)){b.onUpdate(a,Ext.data.Model.COMMIT,c);b.fireEvent("update",b,a,Ext.data.Model.COMMIT,c)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var a=this;a.blockLoad();a.clearData();a.setProxy(null);a.setModel(null)},hasPendingLoad:function(){return !!this.loadTask||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0));(Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},constructDataCollection:function(){var a=new Ext.util.Collection({rootProperty:"data",extraKeys:{byInternalId:{property:"internalId",rootProperty:""}}}),b;b=a.getSorters();b.setSorterConfigure(this.addFieldTransform,this);return a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){return this.getData().getSorters()},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return this.indexOf(a)>-1},each:function(e,d){var f=this.data.items,a=f.length,b,c;for(c=0;c<a;++c){b=f[c];if(e.call(d||b,b,c,a)===false){break}}},collect:function(b,a,c){var d=this,e=d.getData();if(c===true&&e.filtered){e=e.getSource()}return e.collect(b,"data",a)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(a){var b=this.getData();if(b.filtered){b=b.getSource()}return b.byInternalId.get(a)||null},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},queryBy:function(b,a){var c=this.getData();return(c.getSource()||c).createFiltered(b,a)},query:function(e,d,f,a,b){var c=this.getData();return(c.getSource()||c).createFiltered(e,d,f,a,b)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.sumByGroup(c):b.sum(c)},count:function(a){var b=this.getData();return(a&&this.isGrouped())?b.countByGroup():b.count()},min:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.minByGroup(c):b.min(c)},max:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.maxByGroup(c):b.max(c)},average:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.averageByGroup(c):b.average(c)},aggregate:function(g,k,e,h){var f=this,a,d,b,j,c;if(e&&f.isGrouped()){a=f.getGroups().items;d=a.length;b={};for(c=0;c<d;++c){j=a[c];b[j.getGroupKey()]=f.getAggregate(g,k||f,j.items,h)}return b}else{return f.getAggregate(g,k,f.getData().items,h)}},getAggregate:function(f,e,c,g){var b=[],a=c.length,d;for(d=0;d<a;++d){b[d]=c[d].get(g)}return f.call(e||this,c,b)},addObserver:function(a){var b=this.observers;if(!b){this.observers=b=new Ext.util.Collection()}b.add(a)},removeObserver:function(a){var b=this.observers;if(b){b.remove(a)}},callObservers:function(g,d){var h=this.observers,a,c,e,b,f;if(h){c=h.items;if(d){d.unshift(this)}else{d=[this]}for(e=0,a=c.length;e<a;++e){f=c[e];b="onSource"+g;if(f[b]){f[b].apply(f,d)}}}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:true,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(a,b){this.getExtraParams()[a]=b},buildRequest:function(a){var f=this,b=Ext.apply({},a.getParams()),g=Ext.applyIf(b,f.getExtraParams()||{}),e,d,c;Ext.applyIf(g,f.getParams(a));d=a.getId();c=f.getIdParam();if(d!==undefined&&g[c]===undefined){g[c]=d}e=new Ext.data.Request({params:g,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:f});e.setUrl(f.buildUrl(e));a.setRequest(e);return e},processResponse:function(h,c,g,b){var f=this,d,a,e;if(h===true){a=f.getReader();if(b.status===204){e=a.getNullResultSet()}else{e=a.read(f.extractResponseData(b),{recordCreator:c.getRecordCreator()})}c.process(e,g,b);d=!c.wasSuccessful()}else{f.setException(c,b);d=true}if(d){f.fireEvent("exception",f,b,c)}f.afterRequest(g,h)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(e,c){var a=[],d=e.length,b;for(b=0;b<d;b++){a[b]=e[b].serialize()}return this.applyEncoding(c?a[0]:a)},encodeFilters:function(d){var a=[],c=d.length,b,e;for(b=0;b<c;b++){a[b]=d[b].serialize()}return this.applyEncoding(a)},getParams:function(p){if(!p.isReadOperation){return{}}var v=this,u={},s=p.getGrouper(),a=p.getSorters(),n=p.getFilters(),h=p.getPage(),g=p.getStart(),t=p.getLimit(),l=v.getSimpleSortMode(),d=v.getSimpleGroupMode(),r=v.getPageParam(),e=v.getStartParam(),b=v.getLimitParam(),c=v.getGroupParam(),m=v.getGroupDirectionParam(),f=v.getSortParam(),q=v.getFilterParam(),o=v.getDirectionParam(),k,j;if(r&&h){u[r]=h}if(e&&(g||g===0)){u[e]=g}if(b&&t){u[b]=t}k=c&&s;if(k){if(d){u[c]=s.getProperty();u[m]=s.getDirection()}else{u[c]=v.encodeSorters([s],true)}}if(f&&a&&a.length>0){if(l){j=0;if(a.length>1&&k){j=1}u[f]=a[j].getProperty();u[o]=a[j].getDirection()}else{u[f]=v.encodeSorters(a)}}if(q&&n&&n.length>0){u[q]=v.encodeFilters(n)}return u},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.getCacheString(),Ext.Date.now()))}return a},getUrl:function(b){var a;if(b){a=b.getUrl()||this.getApi()[b.getAction()]}return a?a:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(a){},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.getReader(),this.getWriter())}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(a){var d=this,e=d.getWriter(),c=d.buildRequest(a),g=d.getMethod(c),b,f;if(e&&a.allowWrite()){c=e.write(c)}c.setConfig({binary:d.getBinary(),headers:d.getHeaders(),timeout:d.getTimeout(),scope:d,callback:d.createRequestCallback(c,a),method:g,useDefaultXhrHeader:d.getUseDefaultXhrHeader(),disableCaching:false});if(g.toUpperCase()!=="GET"&&d.getParamsAsJson()){f=c.getParams();if(f){b=c.getJsonData();if(b){b=Ext.Object.merge({},b,f)}else{b=f}c.setJsonData(b);c.setParams(undefined)}}if(d.getWithCredentials()){c.setWithCredentials(true);c.setUsername(d.getUsername());c.setPassword(d.getPassword())}return d.sendRequest(c)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(a){var c=this.getActionMethods(),b=a.getAction(),d;if(c){d=c[b]}return d||this.defaultActionMethods[b]},createRequestCallback:function(c,a){var b=this;return function(e,f,d){if(c===b.lastRequest){b.lastRequest=null}b.processResponse(f,a,c,d)}}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:false,preserveRawData:false},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(c,b){var a=this,d;if(a.getMeta){d=a.getMeta(c);if(d){a.onMetaChange(d)}}else{if(c.metaData){a.onMetaChange(c.metaData)}}return Ext.data.reader.Reader.prototype.readRecords.call(this,c,b)},getResponseData:function(a){try{return Ext.decode(a.responseText)}catch(b){Ext.Logger.warn("Unable to parse the JSON returned by the server");return this.createReadError(b.message)}},buildExtractors:function(){var c=this,b=c.getMetaProperty(),a=c.getRootProperty();if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){if(a){c.getRoot=c.createAccessor(a)}else{c.getRoot=Ext.identityFn}if(b){c.getMeta=c.createAccessor(b)}}},extractData:function(a,e){var f=this.getRecord(),d=[],c,b;if(f){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][f]}}else{d=a}return Ext.data.reader.Reader.prototype.extractData.call(this,d,e)},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:(function(){var a=/[\[\.]/;return function(q){var m=this,b=m.getUseSimpleAccessors(),e,t,j,f,d,p,s,o,n,k,l,g,r,h;if(!(q||q===0)){return}if(typeof q==="function"){return q}if(!b){e=String(q).search(a)}if(b===true||e<0){t=function(c){return c[q]}}else{j="raw";f=[];d="";p=0;h=q.length;for(g=0;g<=h;++g){l=q[g];s=l===".";o=l==="[";n=l==="]";k=s||o||n||!l;if(!k||p>1||(p&&!n)){d+=l}else{if(k){r=false;if(o){++p}else{if(n){--p;r=true}}if(d){if(r){d="["+d+"]"}else{d="."+d}j+=d;f.push(""+j);d=""}}}}t=f.join(" && ");t=Ext.functionFactory("raw","return "+t)}return t}}()),createFieldAccessor:function(e){var b=this,a=e.mapping,c=a||a===0,d=c?a:e.name;if(c){if(typeof d==="function"){return function(f){return e.mapping(f,b)}}else{return b.createAccessor(d)}}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,expandData:false},getExpandedData:function(d){var b=d.length,e=0,h,a,f,c,g,k=function(j,l){var m={};m[j]=l;return m};for(;e<b;e++){h=d[e];for(a in h){if(h.hasOwnProperty(a)){f=a.split(".");c=f.length-1;if(c>0){g=h[a];for(;c>0;c--){g=k(f[c],g)}h[f[0]]=h[f[0]]||{};Ext.Object.merge(h[f[0]],g);delete h[a]}}}}return d},writeRecords:function(e,f){var d=this,a=d.getRootProperty(),c,g,b;if(d.getExpandData()){f=d.getExpandedData(f)}if(d.getAllowSingle()&&f.length===1){f=f[0];g=true}b=this.getTransform();if(b){f=b(f,e);e.setJsonData(f)}if(d.getEncode()){if(a){e.setParam(a,Ext.encode(f))}else{}}else{if(g||(f&&f.length)){c=e.getJsonData()||{};if(a){c[a]=f}else{c=f}e.setJsonData(c)}}return e}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null}},0,0,0,0,0,0,[Ext.util,"Group"],0));(Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:true,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(a){var b=this;b.sortFn=Ext.util.Sorter.createComparator(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeSorter)},addSort:function(j,h,c){var g=this,d,e,b,l,a,k,f;if(!j){g.beginUpdate();g.endUpdate()}else{l=g.getOptions();if(j instanceof Array){f=j;c=h;h=null}else{if(Ext.isString(j)){if(!(k=g.get(j))){f=[{property:j,direction:h||l.getDefaultSortDirection()}]}else{f=[k]}}else{if(Ext.isFunction(j)){f=[{sorterFn:j,direction:h||l.getDefaultSortDirection()}]}else{f=[j];c=h;h=null}}}c=g._sortModes[c||"replace"];a=g.getAt(0);d=g.length;e=c.append?d:0;g.beginUpdate();g.splice(e,c.replace?d:0,f);if(c.multi){d=g.length;b=l.getMultiSortLimit();if(d>b){g.removeAt(b,d)}}if(k&&h){k.setDirection(h)}else{if(e===0&&a&&a===g.getAt(0)){a.toggle()}}g.endUpdate()}},getSortFn:function(){return this.sortFn},getByProperty:function(e){var b=this.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getProperty()===e){return d}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(h,a){var f=this,j=f.getOptions(),g=j.getRootProperty(),b=f.getSorterOptionsFn(),c,e,d;if(h.isSorter){if(!h.getRoot()){h.setRoot(g)}}else{e={direction:j.getDefaultSortDirection(),root:g};d=typeof h;if(d==="string"){c=f.get(h);if(c){return c}e.property=h}else{if(d==="function"){e.sorterFn=h}else{e=Ext.apply(e,h);if(e.fn){e.sorterFn=e.fn;delete e.fn}}}h=Ext.create(a||"Ext.util.Sorter",e)}if(b){b.call(f.getSorterOptionsScope()||f,h)}return h},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(g,d){var j=this,e=(d===undefined)?g:g[d];if(!e||!e.$cloned){if(g.length>d+1||!Ext.isIterable(e)){e=Ext.Array.slice(g,d)}var k=j.items,f=e.length,c=[],b,l,a,m,h;for(b=0;b<f;b++){m=e[b];if(m&&m.isFilter){c.push(m)}else{h=typeof m;if(h==="string"){m=j.get(m);if(m){c.push(m)}}else{if(h==="function"){for(a=k.length;a-->0;){l=k[a];if(l.getSorterFn()===m){c.push(l)}}}}}}e=c;e.$cloned=true}return e},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0));(Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(a){var b=this;b.filterFn=Ext.util.Filter.createFilterFn(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},decodeFilter:function(c){var b=this.getOptions(),a=b.getRootProperty(),d;if(c.isFilter){if(!c.getRoot()){c.setRoot(a)}}else{d={root:a};if(Ext.isFunction(c)){d.filterFn=c}else{d=Ext.apply(d,c);if(d.fn){d.filterFn=d.fn;delete d.fn}if(Ext.util.Filter.isInvalid(d)){return false}}c=new Ext.util.Filter(d)}return c},decodeRemoveItems:function(o,j){var q=this,k=(j===undefined)?o:o[j];if(!k.$cloned){if(o.length>j+1||!Ext.isIterable(k)){k=Ext.Array.slice(o,j)}var e=q.items,m=k.length,g=[],b,f,c,l,a,r,h,d,p;for(f=0;f<m;f++){b=k[f];if(b&&b.isFilter){g.push(b)}else{p=typeof b;c=p==="function";l=b.property!==undefined&&b.value!==undefined;a=p==="string";for(d=e.length;d-->0;){r=e[d];h=false;if(a){h=r.getProperty()===b}else{if(c){h=r.getFilterFn()===b}else{if(l){h=r.getProperty()===b.property&&r.getValue()===b.value}}}if(h){g.push(r)}}}}k=g;k.$cloned=true}return k},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0));(Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:true,config:{itemRoot:null},observerPriority:-100,onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(d,a){var c=this,b=a.item,e=d.getKey(b);c.onCollectionAdd=c.onCollectionRemove=c.onCollectionUpdateKey=null;c.syncItemGrouping(d,b,e,a.oldKey)},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionAdd;delete this.onCollectionRemove;delete this.onCollectionUpdateKey},onCollectionRefresh:function(a){this.removeAll();this.addItemsToGroups(a,a.items)},onCollectionRemove:function(a,b){var g=this,f=g.groupItems(a,b.items,false),h,j,e,c,d;for(e=0,c=f.length;e<c;++e){j=(h=f[e]).group;if(j){j.remove(h.items);if(!j.length){(d||(d=[])).push(j)}}}if(d){g.remove(d)}},onCollectionSort:function(e){var d=this,g=e.getSorters(),a=d.items,c=d.length,b,f;for(b=0;b<c;++b){f=a[b];if(f.getSorters()!==g){f.setSorters(g)}}},onCollectionUpdateKey:function(b,a){this.syncItemGrouping(b,a.item,a.newKey,a.oldKey)},addItemsToGroups:function(f,b){var e=this,a=e.groupItems(f,b,true),d,c,g;for(c=0,g=a.length;c<g;++c){d=a[c];d.group.add(d.items)}},groupItems:function(b,k,d){var l=this,a={},j=[],c=b.getGrouper(),o=l.itemGroupKeys,m,p,r,h,q,e,f,g;for(h=0,f=k.length;h<f;++h){r=c.getGroupString(q=k[h]);e=b.getKey(q);if(d){(o||(l.itemGroupKeys=o={}))[e]=r}else{if(o){delete o[e]}}if(!(m=a[r])){if(!(p=l.getByKey(r))&&d){(g||(g=[])).push(p=l.createGroup(b,r))}j.push(a[r]=m={group:p,items:[]})}m.items.push(q)}if(g){l.add(g)}return j},syncItemGrouping:function(a,m,d,g){var k=this,h=k.itemGroupKeys||(k.itemGroupKeys={}),b=a.getGrouper(),n=b.getGroupString(m),e=0,j,l,c,f;if(g){f=h[g];delete h[g]}else{f=h[d]}h[d]=n;if(!(l=k.get(n))){l=k.createGroup(a,n);j=[l]}if(l.get(d)!==m){l.add(m)}else{l.itemChanged(m)}if(n!==f&&(f===0||f)){c=k.get(f);if(c){c.remove(m);if(!c.length){e=[c]}}}if(j){k.splice(0,e,j)}else{if(e){k.splice(0,e)}}},createGroup:function(b,a){var c=new Ext.util.Group({groupKey:a,rootProperty:this.getItemRoot(),sorters:b.getSorters()});return c},getKey:function(a){return a.getGroupKey()},getGroupByRecord:function(b){var c=this.items,a=c.length,e,d;for(d=0;d<a;d++){e=c[d];if(e.indexOf(b)){return e}}return null}},0,0,0,0,0,0,[Ext.util,"GroupCollection"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:true,clearOnPageLoad:true,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:true},loadCount:0,complete:false,constructor:function(a){var b=this,c;if(a){if(a.buffered){return new Ext.data.BufferedStore(a)}}Ext.data.ProxyStore.prototype.constructor.apply(this,arguments);b.getData().addObserver(this);c=b.inlineData;if(c){delete b.inlineData;b.loadInlineData(c)}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(c,a){var b=this;b.getFields();b.getModel();if(!a){a=b.constructDataCollection()}if(c){if(b.isInitializing){b.inlineData=c}else{b.loadData(c)}}return a},loadInlineData:function(d){var c=this,b=c.getProxy(),a;if(b&&b.isMemoryProxy){b.setData(d);a=c.unblockLoad(true);c.suspendEvents();c.read();c.resumeEvents();c.blockLoad(a)}else{c.removeAll(true);c.suspendEvents();c.loadData(d);c.resumeEvents()}},updateRemoteFilter:function(c){var b=this.getData(),a=this.getFilters();if(c){b.setFilters(null)}else{b.setFilters(a)}Ext.data.ProxyStore.prototype.updateRemoteFilter.apply(this,arguments)},updateRemoteSort:function(b){var a=this.getData(),c=this.getSorters();if(b){a.setSorters(null)}else{a.setSorters(c)}Ext.data.ProxyStore.prototype.updateRemoteSort.apply(this,arguments)},insert:function(c,b){var e=this,a,d;if(b){if(!Ext.isIterable(b)){b=[b]}else{b=Ext.Array.clone(b)}a=b.length}if(!a){return[]}for(d=0;d<a;++d){b[d]=e.createModel(b[d])}e.getData().insert(c,b);return b},onCollectionAdd:function(f,a){var k=this,b=a.items,h=b.length,m=!a.next,g=k.getRemovedRecords(),e=k.ignoreCollectionAdd,j=k.getSession(),c,l,d;for(c=0;c<h;++c){d=b[c];if(j){j.adopt(d)}if(!e){d.join(k);if(g&&g.length){Ext.Array.remove(g,d)}l=l||d.phantom||d.dirty}}if(e){return}k.fireEvent("add",k,b,a.at);if(m){k.fireEvent("datachanged",k)}k.needsSync=k.needsSync||l},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(f,e){var d=this,a=e.item,c=e.modified||null,b=e.meta;d.onUpdate(a,b,c,e);d.fireEvent("update",d,a,b,c,e)},afterCommit:function(a,b){this.getData().itemChanged(a,b||null,undefined,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.getData().itemChanged(a,b||null,undefined,Ext.data.Model.EDIT)},afterReject:function(a){this.getData().itemChanged(a,null,undefined,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},onCollectionFilterAdd:function(f,c){var a=c.length,e=this.getSession(),d,b;for(d=0;d<a;++d){b=c[d];b.join(this);if(e){e.adopt(b)}}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},addSorted:function(a){var c=this,e=c.getRemoteSort(),d=c.getData(),b;if(e){d.setSorters(c.getSorters())}b=d.findInsertionIndex(a);if(e){d.setSorters(null)}return c.insert(b,a)},createModel:function(a){var b=this.getSession();if(!a.isModel){var c=this.getModel();a=new c(a)}return a},remove:function(b,j,g){var h=this,c=h.getData(),f,d,a,e;if(b){if(b.isModel){if(h.indexOf(b)>-1){a=[b];f=1}else{f=0}}else{a=[];for(d=0,f=b.length;d<f;++d){e=b[d];if(e&&e.isEntity){if(!c.contains(e)){continue}}else{if(!(e=c.getAt(e))){continue}}a.push(e)}f=a.length}}if(!f){return[]}h.removeIsMove=j===true;h.removeIsSilent=g;c.remove(a);h.removeIsSilent=false;return a},onCollectionRemove:function(f,a){var l=this,g=l.removed,b=a.items,h=a.at,j=b.length,o=l.removeIsMove,k=l.removeIsSilent,n=!a.next,c,d,m,e;if(l.ignoreCollectionRemove){return}for(c=0;c<j;++c){d=b[c];d.unjoin(l);e=!d.phantom;if(g&&!o&&e){d.removedFrom=h+c;g.push(d)}m=m||e}if(!k){l.fireEvent("remove",l,b,h,o);if(n){l.fireEvent("datachanged",l)}}l.needsSync=l.needsSync||(m&&!o)},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},removeAt:function(a,b){var c=this.getData();a=Math.max(a,0);if(a<c.length){if(arguments.length===1){b=1}else{if(!b){return}}c.removeAt(a,b)}},removeAll:function(b){var c=this,d=c.getData(),e=c.hasListeners.clear,a=d.getRange();if(d.length){c.removeIsSilent=true;c.callObservers("BeforeRemoveAll");d.removeAll();if(!b){c.fireEvent("clear",c,a);c.fireEvent("datachanged",c)}c.callObservers("AfterRemoveAll",[!!b])}return a},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else{this.add(a)}},splice:function(a,c,b){return this.getData().splice(a,c,b)},load:function(b){var c=this,a=c.getPageSize(),d;if(typeof b==="function"){b={callback:b}}else{b=Ext.apply({},b)}if(c.getRemoteSort()&&!b.grouper&&c.getGrouper()){b.grouper=c.getGrouper()}if(a||"start" in b||"limit" in b||"page" in b){b.page=b.page||c.currentPage;b.start=(b.start!==undefined)?b.start:(b.page-1)*a;b.limit=b.limit||a}b.addRecords=b.addRecords||false;if(!b.recordCreator){d=c.getSession();if(d){b.recordCreator=d.recordCreator}}return Ext.data.ProxyStore.prototype.load.call(this,b)},onProxyLoad:function(b){var e=this,d=b.getResultSet(),a=b.getRecords(),g=b.wasSuccessful(),f,c;if(e.isDestroyed){return}if(d){e.totalCount=d.getTotal()}e.loading=false;if(g){f=e.getSession();c=e.getAssociatedEntity();if(f&&c&&!c.phantom){a=e.getRole().validateAssociationRecords(f,c,a)}e.loadRecords(a,b.getAddRecords()?{addRecords:true}:undefined)}if(e.hasListeners.load){e.fireEvent("load",e,a,g,b)}},getUnfiltered:function(){var a=this.getData();return a.getSource()||a},getNewRecords:function(){return this.getUnfiltered().createFiltered(this.filterNew).getRange()},getUpdatedRecords:function(){return this.getUnfiltered().createFiltered(this.filterUpdated).getRange()},loadData:function(e,a){var d=e.length,c=[],b;for(b=0;b<d;b++){c.push(this.createModel(e[b]))}this.loadRecords(c,a?this.addRecordsOptions:undefined)},loadRawData:function(e,b){var d=this,f=d.getSession(),a=d.getProxy().getReader().read(e,f?{recordCreator:f.recordCreator}:undefined),c=a.getRecords(),g=a.getSuccess();if(g){d.totalCount=a.getTotal();d.loadRecords(c,b?d.addRecordsOptions:undefined)}return g},loadRecords:function(c,j){var g=this,b=c.length,e=g.getData(),a,h,f,d;if(j){a=j.addRecords}f=g.getRemoteSort()||!g.getSortOnLoad();if(f){h=e.getAutoSort();e.setAutoSort(false)}if(!a){g.clearData(true)}g.ignoreCollectionAdd=true;g.callObservers("BeforeLoad");e.add(c);g.ignoreCollectionAdd=false;for(d=0;d<b;d++){c[d].join(g)}if(f){e.setAutoSort(h)}++g.loadCount;g.complete=true;g.fireEvent("datachanged",g);g.fireEvent("refresh",g);g.callObservers("AfterLoad")},loadPage:function(d,a){var c=this,b=c.getPageSize();c.currentPage=d;a=Ext.apply({page:d,start:(d-1)*b,limit:b,addRecords:!c.getClearOnPageLoad()},a);c.read(a)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(g,e){var d=this,f=d.removed,b,c,a;e=e||d.getData();if(e){b=e.items;for(c=0,a=b.length;c<a;++c){b[c].unjoin(d)}d.ignoreCollectionRemove=true;d.callObservers("BeforeClear");e.removeAll();d.ignoreCollectionRemove=false;d.callObservers("AfterClear")}if(f&&(g!==true||d.getClearRemovedOnLoad())){f.length=0}},onIdChanged:function(c,b,a){this.getData().updateKey(c,b);this.fireEvent("idchanged",this,c,b,a)},commitChanges:function(){var c=this,d=c.getModifiedRecords(),a=d.length,e=c.removed,b=0;for(;b<a;b++){d[b].commit()}if(e){e.length=0}},filterNewOnly:function(a){return a.phantom===true},filterRejects:function(a){return a.phantom||a.dirty},getRejectRecords:function(){return this.getData().createFiltered(this.filterRejects).getRange()},rejectChanges:function(){var c=this,d=c.getRejectRecords(),a=d.length,b=0,e;for(;b<a;b++){e=d[b];e.reject();if(e.phantom){c.remove(e)}}d=c.removed;if(d){a=d.length;for(b=a-1;b>=0;b--){e=d[b];c.insert(e.removedFrom||0,e);e.reject()}d.length=0}},onDestroy:function(){var b=this,a=b.loadTask,d=b.getData(),c=d.getSource();Ext.data.ProxyStore.prototype.onDestroy.call(this);b.setSession(null);b.observers=null;if(a){a.cancel();b.loadTask=null}b.clearData(false,c||d);d.destroy();if(c){c.destroy()}b.setData(null)}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(d){var b=d.mapping,c=d.hasMapping()?b:d.ordinal,a;d.mapping=c;a=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);d.mapping=b;return a},getModelData:function(a){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(e,a){if(this.expandData){var d=[],b=0,c=e.length;for(;b<c;b++){d[d.length]=[e[b]]}e=d}Ext.data.Store.prototype.loadData.call(this,e,a)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(c){if(Ext.isArray(c)){var b=["field1"],e=!Ext.isArray(c[0]),f=c,d,a;if(e){f=[];for(d=0,a=c.length;d<a;++d){f.push([c[d]])}}else{for(d=2,a=c[0].length;d<=a;++d){b.push("field"+d)}}return new Ext.data.ArrayStore({data:f,fields:b,autoDestroy:true,autoCreated:true,expanded:e})}if(Ext.isString(c)){return this.get(c)}else{return Ext.Factory.store(c)}},getKey:function(a){return a.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(d,c){var b;if(Ext.isObject(d)){c=d}else{if(Ext.data.StoreManager.containsKey(d)){return Ext.data.StoreManager.lookup(d)}c.storeId=d}if(c instanceof Ext.data.Store){b=c}else{b=new Ext.data.Store(c)}Ext.data.StoreManager.register(b);return b};Ext.getStore=function(b){return Ext.data.StoreManager.lookup(b)};var a=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:false});a.isEmptyStore=true}));(Ext.cmd.derive("Ext.selection.Model",Ext.util.Observable,{alternateClassName:"Ext.AbstractSelectionModel",allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.modes={SINGLE:true,SIMPLE:true,MULTI:true};b.setSelectionMode(a.mode||b.mode);b.selected=new Ext.util.MixedCollection();Ext.util.Observable.prototype.constructor.apply(this,arguments)},bindStore:function(a,b){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);if(c.store&&!b){c.refresh()}},getStoreListeners:function(){var a=this;return{add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(b){var e=this,d=e.store.getRange(),c=0,a=d.length,f=e.getSelection().length;e.suspendChanges();for(;c<a;c++){e.doSelect(d[c],true,b)}e.resumeChanges();if(!b){e.maybeFireSelectionChange(e.getSelection().length!==f)}},deselectAll:function(j){var f=this,b=f.getSelection(),g={},h=f.store,a=b.length,e,c,d;for(e=0,c=b.length;e<c;e++){d=b[e];g[d.id]=h.indexOf(d)}b=Ext.Array.sort(b,function(m,k){var n=g[m.id],l=g[k.id];return n<l?-1:1});f.suspendChanges();f.doDeselect(b,j);f.resumeChanges();if(!j){f.maybeFireSelectionChange(f.getSelection().length!==a)}},getSelectionStart:function(){var c=this,b=c.view,a;if(!c.selectionStart&&b&&b.rendered){a=b.getNavigationModel();if(a){c.setSelectionStart(a.getRecord())}}return c.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(j,l){var m=this,d=m.isSelected(j),f=l.shiftKey,a=l.ctrlKey,c=f?(m.getSelectionStart()):null,g=m.getSelection(),k=g.length,n=m.allowDeselect,b,h,o;switch(m.selectionMode){case"MULTI":if(f&&c){m.selectRange(c,j,a)}else{if(a&&d){m.doDeselect(j,false)}else{if(a){m.doSelect(j,true,false)}else{if(d&&!f&&!a&&k>1){b=[];for(h=0;h<k;++h){o=g[h];if(o!==j){b.push(o)}}m.doDeselect(b)}else{if(!d){m.doSelect(j,false)}}}}}break;case"SIMPLE":if(d){m.doDeselect(j)}else{m.doSelect(j,true)}break;case"SINGLE":if(n&&!a){n=m.toggleOnClick}if(n&&d){m.doDeselect(j)}else{m.doSelect(j,false)}break}if(!f){if(m.isSelected(j)){m.selectionStart=j}else{m.selectionStart=null}}},vetoSelection:function(a){if(a.type!=="keydown"&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return true}}else{return a.type==="mousedown"}},onNavigate:function(g){var j=this,h=g.keyEvent,b=h.ctrlKey,d=g.recordIndex,f=g.record,n=g.previousRecord,c=j.isSelected(f),l=(j.selectionStart&&j.isSelected(g.previousRecord))?j.selectionStart:(j.selectionStart=g.previousRecord),a=g.previousRecordIndex,m=h.getCharCode(),o=m===h.SPACE,k=m===h.UP||m===h.PAGE_UP?"up":(m===h.DOWN||m===h.DOWN?"down":null);if(!f||j.vetoSelection(h)){return}switch(j.selectionMode){case"MULTI":if(m===h.A&&b){j.selectRange(0,j.store.getCount()-1)}else{if(o){if(h.shiftKey){j.selectRange(l,f,b)}else{if(c){j.doDeselect(f,b)}else{j.doSelect(f,b)}}}else{if(h.shiftKey&&l){if(k==="up"&&a<=d){j.deselectRange(n,d+1)}else{if(k==="down"&&a>=d){j.deselectRange(n,d-1)}else{if(l!==f){j.selectRange(l,f,b)}}}j.lastSelected=f}else{if(m){if(!b){j.doSelect(f,false)}}else{j.selectWithEvent(f,h)}}}}break;case"SIMPLE":if(c){j.doDeselect(f)}else{j.doSelect(f,true)}break;case"SINGLE":if(o){if(c){if(j.allowDeselect){j.doDeselect(f)}}else{j.doSelect(f)}}else{if(b){break}else{if(o&&j.allowDeselect&&c){j.doDeselect(f)}else{j.doSelect(f,false)}}}break}if(!h.shiftKey){if(j.isSelected(f)){j.selectionStart=f}}},selectRange:function(l,d,m){var h=this,k=h.store,c=h.selected.items,n,f,g,e,a,j,b;if(h.isLocked()){return}n=h.normalizeRowRange(l,d);l=n[0];d=n[1];e=[];for(f=l;f<=d;f++){if(!h.isSelected(k.getAt(f))){e.push(k.getAt(f))}}if(!m){a=[];h.suspendChanges();for(f=0,g=c.length;f<g;++f){b=c[f];j=k.indexOf(b);if(j<l||j>d){a.push(b)}}for(f=0,g=a.length;f<g;++f){h.doDeselect(a[f])}h.resumeChanges()}if(e.length){h.doMultiSelect(e,true)}else{h.maybeFireSelectionChange(a.length>0)}},deselectRange:function(e,d){var h=this,c=h.store,a,g,f,b;if(h.isLocked()){return}a=h.normalizeRowRange(e,d);e=a[0];d=a[1];f=[];for(g=e;g<=d;g++){b=c.getAt(g);if(h.isSelected(b)){f.push(b)}}if(f.length){h.doDeselect(f)}},normalizeRowRange:function(c,b){var a=this.store,d;if(!Ext.isNumber(c)){c=a.indexOf(c)}c=Math.max(0,c);if(!Ext.isNumber(b)){b=a.indexOf(b)}b=Math.min(b,a.getCount()-1);if(c>b){d=b;b=c;c=d}return[c,b]},select:function(b,c,a){if(Ext.isDefined(b)&&!(Ext.isArray(b)&&!b.length)){this.doSelect(b,c,a)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(c,e,b){var d=this,a;if(d.locked||!d.store){return}if(typeof c==="number"){a=d.store.getAt(c);if(!a){return}c=[a]}if(d.selectionMode==="SINGLE"&&c){a=c.length?c[0]:c;d.doSingleSelect(a,b)}else{d.doMultiSelect(c,e,b)}},doMultiSelect:function(a,m,k){var g=this,b=g.selected,j=false,n,d,f,e,c,h=g.view,l;if(g.locked){return}a=!Ext.isArray(a)?[a]:a;f=a.length;if(!m&&b.getCount()>0){n=g.deselectDuringSelect(a,b.getRange(),k);if(n[0]){g.maybeFireSelectionChange(n[1]>0&&!k);return}else{j=n[1]>0}}c=function(){b.add(e);j=true};for(d=0;d<f;d++){e=a[d];if(g.isSelected(e)){continue}g.onSelectChange(e,true,k,c)}g.lastSelected=e;if(h&&h.rendered&&!k&&!g.preventFocus){l=h.getNavigationModel();if(l){l.setPosition(e,null,null,k,true)}}g.maybeFireSelectionChange(j&&!k)},deselectDuringSelect:function(d,a,h){var g=this,f=a.length,c=0,e=false,j,b;g.suspendChanges();for(b=0;b<f;++b){j=a[b];if(!Ext.Array.contains(d,j)){if(g.doDeselect(j,h)){++c}else{e=true}}}g.resumeChanges();return[e,c]},doDeselect:function(a,j){var h=this,b=h.selected,d=0,g,e,k=0,f=0,c;if(h.locked||!h.store){return false}if(typeof a==="number"){e=h.store.getAt(a);if(!e){return false}a=[e]}else{if(!Ext.isArray(a)){a=[a]}}c=function(){++f;b.remove(e)};g=a.length;h.suspendChanges();for(;d<g;d++){e=a[d];if(h.isSelected(e)){if(h.lastSelected===e){h.lastSelected=b.last()}++k;h.onSelectChange(e,false,j,c)}}h.resumeChanges();h.maybeFireSelectionChange(f>0&&!j);return f===k},doSingleSelect:function(c,d){var f=this,b=f.view,a,h=false,e=f.selected,g;if(f.locked){return}if(f.isSelected(c)){return}g=function(){if(e.getCount()){f.suspendChanges();if(!f.doDeselect(f.lastSelected,d)){f.resumeChanges();return false}f.resumeChanges()}e.add(c);f.lastSelected=c;h=true};f.onSelectChange(c,true,d,g);if(h){if(b&&b.rendered&&!d&&!f.preventFocus){a=b.getNavigationModel();if(a){a.setPosition(c,null,null,d,true)}}f.maybeFireSelectionChange(!d)}},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.suspendChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(d,c){var f=this,b=f.store,e,a;a=f.normalizeRowRange(d,c);d=a[0];c=a[1];for(e=d;e<=c;e++){if(!f.isSelected(b.getAt(e))){return false}}return true},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.contains(a)},hasSelection:function(){return this.selected.getCount()>0},pruneIf:function(){var g=this,e=g.selected,b=g.store,d=[],a=e.length,c,f;if(g.pruneRemoved){for(c=0;c<a;c++){f=e.getAt(c);if(b.indexOfId(f.id)===-1){d.push(f)}}if(d.length){for(c=0,a=d.length;c<a;c++){f=d[c];e.remove(f);g.onPrune(f)}g.maybeFireSelectionChange(true)}}},onPrune:Ext.emptyFn,refresh:function(){var g=this,k=g.store,a,d=[],f=[],c=g.getSelection(),e=c.length,j,h,b=0;if(!k){return}for(;b<e;b++){j=c[b];if(k.indexOf(j)!==-1){d.push(j)}else{if(!g.pruneRemoved){a=k.getById(j.getId());if(a){d.push(a)}else{f.push(j)}}}if(g.mode==="SINGLE"&&f.length){break}}if(g.selected.getCount()!==(d.length+f.length)){h=true}g.clearSelections();if(d.length){g.doSelect(d,false,true)}if(f.length){g.selected.addAll(f);if(!g.lastSelected){g.lastSelected=f[f.length-1]}}g.maybeFireSelectionChange(h)},clearSelections:function(){this.selected.clear();this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(this.selected.getCount()>0){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(c,b,d,a){var e=this;if(e.selectionStart&&Ext.Array.contains(b,e.selectionStart)){e.selectionStart=null}if(a||e.locked||!e.pruneRemoved){return}e.deselect(b)},deselectDeletedRecords:function(b){var f=this,d=f.selected,c,e=b.length,g=0,a;for(c=0;c<e;c++){a=b[c];if(d.remove(a)){if(f.lastSelected===a){f.lastSelected=null}++g}}if(g){f.maybeFireSelectionChange(true)}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){this.clearListeners();this.clearSelections();this.bindStore(null)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(a,d,c,b){this.selected.updateKey(c,b)},onStoreRefresh:function(){var f=this,h=f.getStore(),c=f.selected,g=f.lastSelected,e,a,d,j,b;if(f.store.isBufferedStore){return}e=c.items;a=e.length;if(g){f.lastSelected=h.getById(g.id)}for(d=0;d<a;++d){j=e[d];b=h.getById(j.id);if(b){f.selected.replace(b)}else{f.selected.remove(j)}}},onStoreLoad:Ext.emptyFn,onSelectChange:function(a,d,c,f){var e=this,b=d?"select":"deselect";if((c||e.fireEvent("before"+b,e,a))!==false&&f()!==false){if(!c){e.fireEvent(b,e,a)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){this.views=this.views||[];this.views.push(a)},resolveListenerScope:function(c){var a=this.view,b;if(a){b=a.resolveListenerScope(c)}return b||Ext.util.Observable.prototype.resolveListenerScope.call(this,c)},onVetoUIEvent:Ext.emptyFn,bindComponent:Ext.emptyFn},1,0,0,0,0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,enableKeyNav:true,bindComponent:function(a){var b=this;b.view=a;b.navigationModel=a.getNavigationModel();a.on(b.getViewListeners());b.navigationModel.on({navigate:b.onNavigate,scope:b})},getViewListeners:function(){var b=this,a=b.view,c={refresh:b.refresh,scope:b};c[a.triggerCtEvent]=b.onContainerClick;return c},onUpdate:function(b){var a=this.view;if(a&&this.isSelected(b)){a.onItemSelect(b)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(b,e,d,g){var f=this,a=f.view,c=e?"select":"deselect";if((d||f.fireEvent("before"+c,f,b))!==false&&g()!==false){if(a){if(e){a.onItemSelect(b)}else{a.onItemDeselect(b)}}if(!d){f.fireEvent(c,f,b)}}},destroy:function(){Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){this.view=a;this.bindView(a)},bindView:function(a){var c=this,b;c.initKeyNav(a);b=c.getStoreListeners();b.destroyable=true;c.dataSourceListeners=a.dataSource.on(b);b=c.getViewListeners();b.destroyable=true;c.viewListeners=a.on(b)},getStoreListeners:function(){var a=this;return{clear:a.onStoreClear,remove:a.onStoreRemove,scope:a}},getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,refresh:a.onViewRefresh,scope:a}},initKeyNav:function(a){var b=this;b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"itemkeydown",processEvent:function(d,c,g,e,f){return f},up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(a,b){b.preventDefault()},onItemMouseDown:function(b,a,f,d,c){var e=c.parentEvent;if(!e||e.type!=="touchstart"){this.setPosition(d)}},onItemClick:function(c,b,e,d,a){if(this.record===b){this.fireNavigateEvent(a)}else{this.setPosition(d,a)}},onStoreClear:function(){this.setPosition()},onStoreRemove:function(){this.setPosition(this.getRecord())},onViewRefresh:function(){this.setPosition(this.getRecord())},setPosition:function(c,f,k,g){var h=this,j=h.view,d=j.getSelectionModel(),a=j.dataSource,e,b;if(c==null){h.record=h.recordIndex=null}else{if(typeof c==="number"){b=Math.max(Math.min(c,a.getCount()-1),0);e=a.getAt(c)}else{if(c.isEntity){e=c;b=a.indexOf(c)}else{if(c.tagName){e=j.getRecord(c);b=a.indexOf(e)}else{e=b=null}}}}if(b===h.recordIndex){return}if(h.item){h.item.removeCls(h.focusCls)}h.previousRecordIndex=h.recordIndex;h.previousRecord=h.record;h.previousItem=h.item;h.recordIndex=b;h.record=e;if(e){h.focusPosition(h.recordIndex)}else{h.item=null}if(!k){d.fireEvent("focuschange",d,h.previousRecord,h.record)}if(!g&&f&&h.record!==h.previousRecord){h.fireNavigateEvent(f)}},focusPosition:function(a){var b=this;if(a!=null&&a!==-1){if(a.isEntity){a=b.view.dataSource.indexOf(a)}b.item=b.view.all.item(a);if(b.item){b.lastFocused=b.record;b.focusItem(b.item)}else{b.record=null}}else{b.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeyTab:Ext.returnTrue,onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.view.fireEvent("itemclick",a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){Ext.destroy(this.dataSourceListeners,this.viewListeners)}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.view,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.boundView)}},defaultBindProperty:"store",statics:{updateDelay:200,queueRecordChange:function(m,o,g,b,c){var l=this,a=l.changeQueue||(l.changeQueue={}),h=g.internalId,k,f,j,d,p,n,e;k=a[h]||(a[h]={operation:b,record:g,data:{},views:[]});f=k.data;Ext.Array.include(k.views,m);if(c&&(j=c.length)){for(d=0;d<j;d++){p=c[d];n=g.data[p];if(f.hasOwnProperty(p)){if(g.isEqual(f[p],n)){delete f[p];e=true}}else{f[p]=n}}if(e&&!Ext.Object.getKeys(f).length){delete a[h]}}else{Ext.apply(f,g.data)}if(!l.flushQueueTask){l.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(l.onFlushTick,l):Ext.Function.bind(l.onFlushTick,l),interval:Ext.view.AbstractView.updateDelay,repeat:1})}l.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var e=this,f,a,h,d,g,c,b;if(Ext.isScrolling){e.flushQueueTask.start();return}h=e.changeQueue;this.changeQueue={};for(g in h){d=h[g];f=d.views;a=f.length;for(c=0;c<a;c++){b=f[c];if(!b.isDestroyed){b.handleUpdate(b.dataSource,d.record,d.operation,Ext.Object.getKeys(d.data))}}}Ext.AnimationQueue.stop(e.flushChangeQueue,e)}},config:{selection:null,navigationModel:"default"},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,addCmpEvents:Ext.emptyFn,initComponent:function(){var c=this,a=Ext.isDefined,d=c.itemTpl,b={};if(d){if(Ext.isArray(d)){d=d.join("")}else{if(Ext.isObject(d)){b=Ext.apply(b,d.initialConfig);d=d.html}}if(!c.itemSelector){c.itemSelector="."+c.itemCls}d=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',c.itemCls,d,c.itemAriaRole);c.tpl=new Ext.XTemplate(d,b)}Ext.Component.prototype.initComponent.call(this);c.tpl=c.getTpl("tpl");if(c.overItemCls){c.trackOver=true}c.addCmpEvents();c.store=Ext.data.StoreManager.lookup(c.store||"ext-empty-store");if(!c.dataSource){c.dataSource=c.store}c.bindStore(c.dataSource,true,"dataSource");if(!c.all){c.all=new Ext.CompositeElementLite()}c.scrollState={top:0,left:0};c.on({scroll:c.onViewScroll,element:"el",onFrame:!!Ext.global.requestAnimationFrame,scope:c});c.savedTabIndexAttribute="data-savedtabindex-"+c.id;this.getNavigationModel().bindComponent(this);this.getSelectionModel().bindComponent(this)},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(){var e=this,b=e.loadMask,d=e.getMaskStore(),a={target:e,msg:e.loadingText,useMsg:e.loadingUseMsg,store:d},c;Ext.Component.prototype.onRender.apply(this,arguments);if(b){c=d.getProxy();if(c&&!c.isSynchronous){if(e.loadingCls){a.msgCls=e.loadingCls}if(Ext.isObject(b)){a=Ext.apply(a,b)}e.loadMask=new Ext.LoadMask(a);e.loadMask.on({scope:e,beforeshow:e.onMaskBeforeShow,hide:e.onMaskHide})}}},beforeLayout:function(){var a=this;Ext.Component.prototype.beforeLayout.apply(this,arguments);if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refresh()}else{a.doFirstRefresh(a.dataSource)}}},getMaskStore:function(){return this.store},onMaskBeforeShow:function(){var b=this,a=b.loadingHeight;if(a&&a>b.getHeight()){b.hasLoadingHeight=true;b.oldMinHeight=b.minHeight;b.minHeight=a;b.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var b=this.loadMask,a=[];if(b&&b.isComponent){a.push(b)}return a},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},getSelectionModel:function(){var b=this,c="SINGLE",a=b.selModel;if(b.simpleSelect){c="SIMPLE"}else{if(b.multiSelect){c="MULTI"}}if(!a||!a.events){a=b.selModel=new Ext.selection.DataViewModel(Ext.apply({allowDeselect:b.allowDeselect,mode:c},a))}if(!a.hasRelaySetup){b.relayEvents(a,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);a.hasRelaySetup=true;a.on("selectionchange",b.updateBindSelection,b)}if(b.disableSelection){a.locked=true}return a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},initFocusableEvents:function(){var a=this;this.mixins.focusable.initFocusableEvents.call(this);a.focusEnterLeaveListeners=a.el.on({focusenter:a.onFocusEnter,focusleave:a.onFocusLeave,scope:a,destroyable:true})},onFocus:function(a){Ext.Component.prototype.onFocus.call(this,a);this.handleFocusEnter(a)},onFocusEnter:function(a){this.handleFocusEnter(a)},handleFocusEnter:function(d){var c=this,b=c.getNavigationModel(),a;if(!c.containsFocus){a=b.getLastFocused();b.setPosition(a||0,d,null,!a);c.containsFocus=b.getPosition()!=null}if(c.containsFocus){this.focusEl.dom.setAttribute("tabindex","-1")}},onFocusLeave:function(b){var a=this;if(a.containsFocus){a.getNavigationModel().setPosition(null,b,null,true);a.containsFocus=false;a.focusEl.dom.setAttribute("tabindex",0)}},onRemoved:function(a){Ext.Component.prototype.onRemoved.call(this,a);this.onFocusLeave()},refresh:function(){var h=this,l=h.all,a=l.getCount(),e=h.refreshCounter,j,f,d,c,g,k=e&&l.getCount()&&h.preserveScrollOnRefresh&&!h.bufferedRenderer,b;if(!h.rendered||h.isDestroyed||h.preventRefresh){return}if(!h.hasListeners.beforerefresh||h.fireEvent("beforerefresh",h)!==false){h.refreshing=true;j=h.getTargetEl();c=h.getViewRange();d=j.dom;if(k){f=h.getOverflowEl();b=f.getScroll()}if(e){g=true;h.clearViewEl();h.refreshCounter++}else{h.refreshCounter=1}h.tpl.append(j,h.collectData(c,l.startIndex||0));if(c.length<1){if(h.emptyText&&!h.getStore().isLoading()&&(!h.deferEmptyText||g)){h.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",j.dom,h.emptyText)}l.clear()}else{h.collectNodes(j.dom);h.updateIndexes(0)}Ext.deferCallback(j.saveChildrenTabbableState,j,[h.savedTabIndexAttribute]);if(g){if(h.refreshSelmodelOnRefresh!==false){h.selModel.refresh()}else{if(!h.preventPrune){h.selModel.pruneIf()}}}h.refreshNeeded=false;h.refreshSize(l.getCount()!==a);h.fireEvent("refresh",h,c);if(k){f.setScrollLeft(b.left);f.setScrollTop(b.top)}if(!h.viewReady){h.viewReady=true;h.fireEvent("viewready",h)}h.refreshing=false;h.refreshScroll()}},collectNodes:function(b){var a=this.all;a.fill(Ext.fly(b).query(this.getItemSelector()),a.startIndex||0);if(this.focusable){a.set({tabindex:"-1"})}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(d){var b=this,a=b.getSizeModel(),c=b.scrollManager;if(a.height.shrinkWrap||a.width.shrinkWrap||d){b.updateLayout()}else{if(b.touchScroll&&!b.bufferedRenderer){if(c){c.refresh()}else{b.on({boxready:b.refreshScroll,scope:b,single:true})}}}},onResize:function(){var a=this,b=a.scrollManager;if(b&&!a._hasScrollListener){b.on({scroll:a.onViewScroll,scope:a,onFrame:!!Ext.global.requestAnimationFrame});a._hasScrollListener=true}Ext.Component.prototype.onResize.apply(this,arguments)},clearViewEl:function(){var b=this,c=b.getTargetEl(),a=b.getNodeContainer()===c;b.clearEmptyEl();b.all.clear(!a);if(a){c.dom.innerHTML=""}},clearEmptyEl:function(){var a=this.emptyEl;if(a){a.parentNode.removeChild(a)}this.emptyEl=null},onViewScroll:function(){this.fireEvent("scroll",this)},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(e,d,c){var b,a,f;if(c){b=c.getAssociatedData();for(a in b){if(b.hasOwnProperty(a)){if(!f){e=Ext.Object.chain(e);f=true}e[a]=b[a]}}}return e},collectData:function(c,f){var e=[],d=0,a=c.length,b;for(;d<a;d++){b=c[d];e[d]=this.prepareData(b.data,f+d,b)}return e},bufferRender:function(a,b){var c=this,d=c.renderBuffer||(c.self.prototype.renderBuffer=document.createElement("div"));c.tpl.overwrite(d,c.collectData(a,b));return Ext.fly(d).query(c.getItemSelector())},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,true):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(d,b,c,g,e){var f=this,a=e&&e.filtered;if(!a&&f.getNode(b)){if(f.throttledUpdate){f.statics().queueRecordChange(f,d,b,c,g)}else{f.handleUpdate.apply(f,arguments)}}},handleUpdate:function(b,a){var e=this,c,d;if(e.viewReady){c=e.dataSource.indexOf(a);if(c>-1){if(e.getNode(a)){d=e.bufferRender([a],c)[0];e.all.replaceElement(c,d,true);e.updateIndexes(c,c);e.selModel.onUpdate(a);e.refreshSizePending=true;if(e.selModel.isSelected(a)){e.onItemSelect(a)}if(e.hasListeners.itemupdate){e.fireEvent("itemupdate",a,c,d)}return d}}}},onReplace:function(h,k,b,c){var g=this,f,m=g.all,a,l,e,d;if(g.rendered){a=g.bufferRender(c,k,true);l=m.item(k);if(l){m.item(k).insertSibling(a,"before",true)}else{g.appendNodes(a)}m.insert(k,a);k+=c.length;f=k+b.length-1;m.removeRange(k,f,true);if(g.refreshSelmodelOnRefresh!==false){g.selModel.refresh()}g.updateIndexes(k);g.refreshSizePending=true;if(g.hasListeners.itemremove){for(e=b.length,d=f;e>=0;--e,--d){g.fireEvent("itemremove",b[e],d,g)}}if(g.hasListeners.itemadd){g.fireEvent("itemadd",c,k,a)}}},onAdd:function(c,b,d){var e=this,a;if(e.rendered){if(e.all.getCount()===0){e.refresh();a=e.all.slice()}else{a=e.doAdd(b,d);if(e.refreshSelmodelOnRefresh!==false){e.selModel.refresh()}e.updateIndexes(d);e.refreshSizePending=true}if(e.hasListeners.itemadd){e.fireEvent("itemadd",b,d,a)}}},appendNodes:function(b){var c=document.createDocumentFragment(),a=b.length,d;for(d=0;d<a;++d){c.appendChild(b[d])}this.getNodeContainer().appendChild(c)},doAdd:function(c,d){var h=this,b=h.bufferRender(c,d,true),f=h.all,g=f.getCount(),e=f.startIndex||0,a=f.endIndex||g-1;if(g===0||d>a){h.appendNodes(b)}else{if(d<=e){f.item(e).insertSibling(b,"before",true)}else{f.item(d).insertSibling(b,"before",true)}}f.insert(d,b);return b},onRemove:function(b,e,h){var j=this,l=j.all,c=j.hasListeners.itemremove,k,f,g,a,d;if(l.getCount()){if(j.dataSource.getCount()===0){if(c){j.fireEvent("itemremove",e,h,j.getNodes(h,h+e.length-1))}j.preventPrune=true;j.refresh();j.preventPrune=false}else{if(c){a=[]}for(f=e.length-1;f>=0;--f){g=e[f];k=h+f;if(a){d=l.item(k);a[f]=d?d.dom:undefined}if(l.item(k)){j.doRemove(g,k)}}if(c){j.fireEvent("itemremove",e,h,a,j)}j.updateIndexes(h)}j.refreshSizePending=true}},doRemove:function(a,b){this.all.removeElement(b,true)},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(e,d){var b=this.all.elements,a=this.getViewRange(),c;e=e||0;d=d||((d===0)?0:(b.length-1));for(c=e;c<=d;c++){b[c].viewIndex=c;b[c].viewRecordId=a[c].internalId;if(!b[c].boundView){b[c].boundView=this.id}}},bindStore:function(a,b,d){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);if(c.componentLayoutCounter&&!c.preventRefresh){c.doFirstRefresh(a,!b)}},doFirstRefresh:function(a,c){var b=this;if(b.deferInitialRefresh&&!c){Ext.defer(b.doFirstRefresh,1,b,[a,true])}else{if(a&&!a.loading){b.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null)},onBindStore:function(a,b,d){var c=this;c.getSelectionModel().bindStore(a);c.setMaskBind(a);if(!b&&d==="store"){c.preventRefresh=true;c.store=a;c.bindStore(a,false,"dataSource");c.preventRefresh=false}},setMaskBind:function(b){var a=this.loadMask;if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.refresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:Ext.emptyFn,onEndUpdate:function(){if(this.refreshSizePending){this.refreshSize(true);this.refreshSizePending=false}},onDataRefresh:function(){this.refreshView()},refreshView:function(){var b=this,a=b.blockRefresh||!b.rendered||b.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(a){b.refreshNeeded=true}else{if(b.bufferedRenderer&&b.all.getCount()){b.bufferedRenderer.refreshView()}else{b.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var b=[],a=this.selModel.getSelection(),d=a.length,c=0;for(;c<d;c++){b.push(this.getNode(a[c]))}return b},getRecords:function(c){var b=[],d=0,a=c.length,e=this.dataSource.data;for(;d<a;d++){b[b.length]=e.getByKey(c[d].viewRecordId)}return b},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).viewRecordId)},isSelected:function(b){var a=this.getRecord(b);return this.selModel.isSelected(a)},select:function(b,c,a){this.selModel.select(b,c,a)},deselect:function(b,a){this.selModel.deselect(b,a)},getNode:function(a){if((!a&&a!==0)||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return document.getElementById(a)}if(Ext.isNumber(a)){return this.all.elements[a]}if(a.isModel){return this.getNodeByRecord(a)}return Ext.fly(a).findParent(this.itemSelector,this.getTargetEl())},getNodeByRecord:function(a){var c=this.all.elements,d=c.length,b=0;for(;b<d;b++){if(c[b].viewRecordId===a.internalId){return c[b]}}return null},getNodes:function(c,a){var b=this.all;if(a!==undefined){a++}return b.slice(c,a)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(Ext.isNumber(a.viewIndex)){return a.viewIndex}return this.all.indexOf(a)},onDestroy:function(){var a=this;a.all.clear();a.emptyEl=null;Ext.Component.prototype.onDestroy.call(this);a.bindStore(null);Ext.destroy(a.navigationModel,a.selModel,a.scrollManager)},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).addCls(a)}},removeItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).removeCls(a)}},privates:{getFocusEl:function(){return this.el},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},0,0,["component","box"],{component:true,box:true},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(a,b,d){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var c=this.getSelectionModel();return c.select.apply(c,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var a=this;Ext.view.AbstractView.prototype.afterRender.call(this);a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(d){var c=this,a=c.getTargetSelector(),b=d.getTarget(a);if(!c.isDestroyed){if(b){if(c.mouseOverItem!==b&&c.el.contains(b)){c.mouseOverItem=d.item=b;d.newType="mouseenter";c.handleEvent(d)}}else{c.handleEvent(d)}}},handleMouseOut:function(f){var b=this.getTargetSelector(),c=f.getTarget(b),d=f.getRelatedTarget(b),a;if((c===d)&&!(c===null&&d===null)){return}if(!this.isDestroyed){if(c&&(a=this.self.getBoundView(c))){f.item=c;f.newType="mouseleave";a.handleEvent(f);a.mouseOverItem=null}else{this.handleEvent(f)}}},handleEvent:function(f){var d=this,b=Ext.String.startsWith(f.type,"key"),c=b&&f.getKey(),a=d.getNavigationModel();f.view=d;if(b){f.item=a.getItem();f.record=a.getRecord()}if(!f.item){f.item=f.getTarget(d.itemSelector)}if(f.item&&!f.record){f.record=d.getRecord(f.item)}if(d.processUIEvent(f)!==false){d.processSpecialEvent(f)}if(c===f.SPACE){if(!d.inputTagRe.test(f.getTarget().tagName)){f.stopEvent()}}},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(f){if(!Ext.getBody().isAncestor(f.target)){return}var j=this,k=f.item,l=j.self,a=l.EventMap,g=l.TouchEventMap,d,c=f.record,h=f.type,b=h;if(f.newType){b=f.newType}if(k){b=g[b]||b;d=f.recordIndex=j.indexInStore?j.indexInStore(c):j.indexOf(k);if(!c||j.processItemEvent(c,k,d,f)===false){return false}if((j["onBeforeItem"+a[b]](c,k,d,f)===false)||(j.fireEvent("beforeitem"+b,j,c,k,d,f)===false)||(j["onItem"+a[b]](c,k,d,f)===false)){return false}j.fireEvent("item"+b,j,c,k,d,f)}else{h=g[h]||h;if((j.processContainerEvent(f)===false)||(j["onBeforeContainer"+a[h]](f)===false)||(j.fireEvent("beforecontainer"+h,j,f)===false)||(j["onContainer"+a[h]](f)===false)){return false}j.fireEvent("container"+h,j,f)}return true},onItemMouseEnter:function(a,c,b,d){if(this.trackOver){this.highlightItem(c)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var b=this,a=b.highlightedItem,d=b.overItemCls;if(a!==c){if(a){Ext.fly(a).removeCls(d);if(Ext.isIE8){b.repaintBorder(a);b.repaintBorder(a.nextSibling)}if(b.hasListeners.unhighlightitem){b.fireEvent("unhighlightitem",b,a)}}b.highlightedItem=c;if(c){Ext.fly(c).addCls(b.overItemCls);if(Ext.isIE8){b.repaintBorder(c.nextSibling)}if(b.hasListeners.highlightitem){b.fireEvent("highlightitem",b,c)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(b,a){var f=this,e,c,d;if(f.viewReady){e=f.getNode(a);c=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);d=f.highlightedItem;if(d&&d===e){delete f.highlightedItem;if(c){f.highlightItem(c)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(h){var f=this,e=f.getNode(h),d=f.el,a=0,b=0,g=d.getRegion(),c;g.bottom=g.top+d.dom.clientHeight;g.right=g.left+d.dom.clientWidth;if(e){c=Ext.fly(e).getRegion();if(c.top<g.top){a=c.top-g.top}else{if(c.bottom>g.bottom){a=c.bottom-g.bottom}}if(c.left<g.left){b=c.left-g.left}else{if(c.right>g.right){b=c.right-g.right}}if(b||a){f.scrollBy(b,a,false)}Ext.fly(e).set({tabIndex:-1});e.focus()}},bindStore:function(b,c,a){var d=this[a];if(d&&d.isFeatureStore){if(b.isFeatureStore){this.bindStoreListeners(b);d.bindStore(d.store)}else{d.bindStore(b)}this.getSelectionModel().bindStore(d.store)}else{Ext.view.AbstractView.prototype.bindStore.apply(this,arguments)}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(c){var e=this,d=e.self,a=d.sizeModelsArray,b;Ext.apply(e,c);e[b=e.name]=true;e.fixed=!(e.auto=e.natural||e.shrinkWrap);a[e.ordinal=a.length]=d[b]=d.sizeModels[b]=e},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var e=this,a=e.sizeModelsArray,c,b,g,f,d;new e({name:"calculated"});new e({name:"configured",names:{width:"width",height:"height"}});new e({name:"natural"});new e({name:"shrinkWrap"});new e({name:"calculatedFromConfigured",configured:true,names:{width:"width",height:"height"}});new e({name:"calculatedFromNatural",natural:true});new e({name:"calculatedFromShrinkWrap",shrinkWrap:true});new e({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new e({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new e({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(c=0,g=a.length;c<g;++c){d=a[c];d.pairsByHeightOrdinal=f=[];for(b=0;b<g;++b){f.push({width:d,height:a[b]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(a){var b=this;b.id=Ext.id(null,b.type+"-");b.initConfig(a);delete b.type;b.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(c){var b=this,a=b.context,d;if(b.lastWidthModel!=c.widthModel){if(b.lastWidthModel){d=true}b.lastWidthModel=c.widthModel}if(b.lastHeightModel!=c.heightModel){if(b.lastWidthModel){d=true}b.lastHeightModel=c.heightModel}if(d){(a=c.context).clearTriggers(b,false);a.clearTriggers(b,true);b.triggerCount=0}},finishedLayout:function(a){this.lastWidthModel=a.widthModel;this.lastHeightModel=a.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(a){return false},isItemLayoutRoot:function(d){var c=d.getSizeModel(),b=c.width,a=c.height;if(!d.componentLayout.lastComponentSize&&(b.calculated||a.calculated)){return false}return !b.shrinkWrap&&!a.shrinkWrap},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(d,b){var g=d.length,e,f,c,a;if(g){a=[];for(e=0;e<g;++e){f=d[e];if(!f.rendered){if(b&&(b[f.id]!==undefined)){c=b[f.id]}else{this.configureItem(f);c=f.getRenderTree();if(b){b[f.id]=c}}if(c){a.push(c)}}}}return a},finishRender:Ext.emptyFn,finishRenderItems:function(e,a){var d=a.length,b,c;for(b=0;b<d;b++){c=a[b];if(c.rendering){c.finishRender(b)}}},renderChildren:function(){var b=this,a=b.getLayoutItems(),c=b.getRenderTarget();b.renderItems(a,c)},renderItems:function(a,f){var e=this,d=a.length,b=0,c;if(d){Ext.suspendLayouts();for(;b<d;b++){c=a[b];if(c&&!c.rendered){e.renderItem(c,f,b)}else{if(!e.isValidParent(c,f,b)){e.moveItem(c,f,b)}else{e.configureItem(c)}}}Ext.resumeLayouts(true)}},isValidParent:function(d,e,a){var c=(e&&e.dom)||e,b=this.getItemLayoutEl(d);if(b&&c){if(typeof a=="number"){a=this.getPositionOffset(a);return b===c.childNodes[a]}return b.parentNode===c}return false},getItemLayoutEl:function(c){var d=c.el?c.el.dom:Ext.getDom(c),a=d.parentNode,b;if(a){b=a.className;if(b&&b.indexOf("x-resizable-wrap")!==-1){d=d.parentNode}}return d},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(c,d,a){var b=this;if(!c.rendered){b.configureItem(c);c.render(d,a)}},moveItem:function(b,c,a){c=c.dom||c;if(typeof a=="number"){a=c.childNodes[a]}c.insertBefore(b.el.dom,a||null);b.container=Ext.get(c);this.configureItem(b)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(e){var d=this,c=e.el,b=d.owner,a;if(e.rendered){a=[].concat(d.itemCls||[]);if(b.itemCls){a=Ext.Array.push(a,b.itemCls)}if(a.length){c.removeCls(a)}}delete e.ownerLayout},destroy:function(){var a=this,b;if(a.targetCls){b=a.getTarget();if(b){b.removeCls(a.targetCls)}}a.onDestroy()},sortWeightedItems:function(a,d){for(var b=0,c=a.length;b<c;++b){a[b].$i=b}Ext.Array.sort(a,function(f,e){var g=e.weight-f.weight;if(!g){g=f.$i-e.$i;if(f[d]){g=-g}}return g});for(b=0;b<c;++b){delete a[b].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var a=this;a.prototype.sizeModels=a.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,widthCache:{},heightCache:{},beginLayoutCycle:function(c,p){var k=this,b=k.owner,e=c.ownerCtContext,f=c.heightModel,g=c.widthModel,h=b.el.dom===document.body,d=b.lastBox||k.nullBox,n=b.el.lastBox||k.nullBox,a=!h,m,o,l,j;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(p){if(k.usesContentWidth){++c.consumersContentWidth}if(k.usesContentHeight){++c.consumersContentHeight}if(k.usesWidth){++c.consumersWidth}if(k.usesHeight){++c.consumersHeight}if(e&&!e.hasRawContent){m=b.ownerLayout;if(m){if(m.usesWidth){++c.consumersWidth}if(m.usesHeight){++c.consumersHeight}}}}if(g.configured){l=g.names.width;if(!h){a=k.setWidthInDom||(p?b[l]!==n.width:g.constrained)}c.setWidth(b[l],a)}else{if(c.isTopLevel){if(g.calculated){o=d.width;c.setWidth(o,o!=n.width)}o=d.x;c.setProp("x",o,o!=n.x)}}if(f.configured){j=f.names.height;if(!h){a=p?b[j]!==n.height:f.constrained}c.setHeight(b[j],a)}else{if(c.isTopLevel){if(f.calculated){o=d.height;c.setHeight(o,o!=n.height)}o=d.y;c.setProp("y",o,o!=n.y)}}},finishedLayout:function(b){var g=this,j=b.children,a=g.owner,e,c,h,d,f;if(j){e=j.length;for(c=0;c<e;c++){h=j[c];h.el.lastBox=h.props}}b.previousSize=g.lastComponentSize;g.lastComponentSize=a.el.lastBox=f=b.props;d=a.lastBox||(a.lastBox={});d.x=f.x;d.y=f.y;d.width=f.width;d.height=f.height;d.invalid=false;Ext.layout.Layout.prototype.finishedLayout.apply(this,arguments)},notifyOwner:function(d){var c=this,a=c.lastComponentSize,e=d.previousSize,b=[a.width,a.height];if(e){b.push(e.width,e.height)}c.owner.afterComponentLayout.apply(c.owner,b)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(b){var a=this,d=a.targetInfo,c;if(!d){c=b.getEl("getTarget",a);a.targetInfo=d={padding:c.getPaddingInfo(),border:c.getBorderInfo()}}return d},measureAutoDimensions:function(m,h){var u=this,a=u.owner,r=a.layout,d=m.heightModel,g=m.widthModel,c=m.boxParent,o=m.isBoxParent,v=m.target,b=m.props,j,w={gotWidth:false,gotHeight:false,isContainer:(j=!m.hasRawContent)},t=h||3,q,e,k=0,f=0,l,p,s,x,n;if(g.shrinkWrap&&m.consumersContentWidth){++k;q=!(t&1);if(j){if(q){w.contentWidth=0;w.gotWidth=true;++f}else{if((w.contentWidth=m.getProp("contentWidth"))!==undefined){w.gotWidth=true;++f}}}else{p=b.contentWidth;if(typeof p=="number"){w.contentWidth=p;w.gotWidth=true;++f}else{if(q){l=true}else{if(!m.hasDomProp("containerChildrenSizeDone")){l=false}else{if(o||!c||c.widthModel.shrinkWrap){l=true}else{l=c.hasDomProp("width")}}}if(l){if(q){s=0}else{if(r&&r.measureContentWidth){s=r.measureContentWidth(m)}else{if(v.cacheWidth){x=v.xtype+"-"+v.ui;n=u.widthCache;s=n[x]||(n[x]=u.measureContentWidth(m))}else{s=u.measureContentWidth(m)}}}if(!isNaN(w.contentWidth=s)){m.setContentWidth(s,true);w.gotWidth=true;++f}}}}}else{if(g.natural&&m.consumersWidth){++k;p=b.width;if(typeof p=="number"){w.width=p;w.gotWidth=true;++f}else{if(o||!c){l=true}else{l=c.hasDomProp("width")}if(l){if(!isNaN(w.width=u.measureOwnerWidth(m))){m.setWidth(w.width,false);w.gotWidth=true;++f}}}}}if(d.shrinkWrap&&m.consumersContentHeight){++k;e=!(t&2);if(j){if(e){w.contentHeight=0;w.gotHeight=true;++f}else{if((w.contentHeight=m.getProp("contentHeight"))!==undefined){w.gotHeight=true;++f}}}else{p=b.contentHeight;if(typeof p=="number"){w.contentHeight=p;w.gotHeight=true;++f}else{if(e){l=true}else{if(!m.hasDomProp("containerChildrenSizeDone")){l=false}else{if(a.noWrap){l=true}else{if(!g.shrinkWrap){l=(m.bodyContext||m).hasDomProp("width")}else{if(o||!c||c.widthModel.shrinkWrap){l=true}else{l=c.hasDomProp("width")}}}}}if(l){if(e){s=0}else{if(r&&r.measureContentHeight){s=r.measureContentHeight(m)}else{if(v.cacheHeight){x=v.xtype+"-"+v.ui;n=u.heightCache;s=n[x]||(n[x]=u.measureContentHeight(m))}else{s=u.measureContentHeight(m)}}}if(!isNaN(w.contentHeight=s)){m.setContentHeight(s,true);w.gotHeight=true;++f}}}}}else{if(d.natural&&m.consumersHeight){++k;p=b.height;if(typeof p=="number"){w.height=p;w.gotHeight=true;++f}else{if(o||!c){l=true}else{l=c.hasDomProp("width")}if(l){if(!isNaN(w.height=u.measureOwnerHeight(m))){m.setHeight(w.height,false);w.gotHeight=true;++f}}}}}if(c){m.onBoxMeasured()}w.gotAll=f==k;return w},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(d,a){var c=this,f=c.lastWidthModel,e=c.lastHeightModel,b=c.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(f&&f.fixed&&d.widthModel.shrinkWrap){b.setWidth(null)}if(e&&e.fixed&&d.heightModel.shrinkWrap){b.setHeight(null)}},calculate:function(g){var f=this,e=f.measureAutoDimensions(g),b=g.heightModel,c=g.widthModel,d,a;if(e.gotWidth){if(c.shrinkWrap){f.publishOwnerWidth(g,e.contentWidth)}else{if(f.publishInnerWidth){f.publishInnerWidth(g,e.width)}}}else{if(!c.auto&&f.publishInnerWidth){d=f.waitForOuterWidthInDom?g.getDomProp("width"):g.getProp("width");if(d===undefined){f.done=false}else{f.publishInnerWidth(g,d)}}}if(e.gotHeight){if(b.shrinkWrap){f.publishOwnerHeight(g,e.contentHeight)}else{if(f.publishInnerHeight){f.publishInnerHeight(g,e.height)}}}else{if(!b.auto&&f.publishInnerHeight){a=f.waitForOuterHeightInDom?g.getDomProp("height"):g.getProp("height");if(a===undefined){f.done=false}else{f.publishInnerHeight(g,a)}}}if(!e.gotAll){f.done=false}},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(h,f){var e=this,b=e.owner,a=e.calculateOwnerHeightFromContentHeight(h,f),g,d,c;if(isNaN(a)){e.done=false}else{g=Ext.Number.constrain(a,b.minHeight,b.maxHeight);if(g==a){d=e.setHeightInDom}else{c=e.sizeModels[(g<a)?"constrainedMax":"constrainedMin"];a=g;if(h.heightModel.calculatedFromShrinkWrap){h.heightModel=c}else{h.invalidate({heightModel:c})}}h.setHeight(a,d)}},publishOwnerWidth:function(g,b){var f=this,a=f.owner,e=f.calculateOwnerWidthFromContentWidth(g,b),h,d,c;if(isNaN(e)){f.done=false}else{h=Ext.Number.constrain(e,a.minWidth,a.maxWidth);if(h==e){d=f.setWidthInDom}else{c=f.sizeModels[(h<e)?"constrainedMax":"constrainedMin"];e=h;if(g.widthModel.calculatedFromShrinkWrap){g.widthModel=c}else{g.invalidate({widthModel:c})}}g.setWidth(e,d)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(d){var c=this,a=c.owner,b=a.pagingToolbar;c.scrollPos=a.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(a.floating){d.savedXY=a.getXY();a.setXY([0,-9999])}if(b){d.toolbarContext=d.context.getCmp(b)}d.listContext=d.getEl("listWrap")},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.heightModel.auto){a.el.setHeight("auto");a.listWrap.setHeight("auto")}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return true},finishedLayout:function(d){var c=this,e=d.savedXY,a=c.owner,b=a.listWrap,f=c.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(e){c.owner.setXY(e)}b.setScrollLeft(f.left);b.setScrollTop(f.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(c,a){var b=c.toolbarContext,d=0;if(b){d=b.getProp("height")}if(d===undefined){this.done=false}else{c.listContext.setHeight(a-c.getFrameInfo().height-d)}},calculateOwnerHeightFromContentHeight:function(c){var a=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),b=c.toolbarContext;if(b){a+=b.getProp("height")}return a}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this);this.mixins.elementCt.destroy.call(this)},beginLayout:function(a){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);a.targetContext=a.paddingContext=a.getEl("getTarget",this);this.cacheChildItems(a)},beginLayoutCycle:function(c,a){var b=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(a){if(b.usesContainerHeight){++c.consumersContainerHeight}if(b.usesContainerWidth){++c.consumersContainerWidth}}},cacheChildItems:function(f){var e=this,c,g,a,d,b;if(e.needsItemSize||e.setsItemSize){c=f.context;g=f.childItems=[];a=f.visibleItems=e.getVisibleItems();d=a.length;for(b=0;b<d;++b){g.push(c.getCmp(a[b]))}}},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(c){var b=c.props,a=c.el;if(c.widthModel.shrinkWrap&&isNaN(b.width)){c.setContentWidth(a.getWidth())}if(c.heightModel.shrinkWrap&&isNaN(b.height)){c.setContentHeight(a.getHeight())}},configureItem:function(d){var c=this,e=c.itemCls,b=c.owner.itemCls,a,f;d.ownerLayout=c;if(e){if(typeof e==="string"){f=[e]}else{f=e;a=!!f}}if(b){if(a){f=Ext.Array.clone(f)}f=Ext.Array.push(f||[],b)}if(f){d.addCls(f)}},doRenderBody:function(a,b){this.renderItems(a,b);this.renderContent(a,b)},doRenderContainer:function(b,e){var c=e.$comp.layout,a=c.getRenderTpl(),d=c.getRenderData();a.applyOut(d,b)},doRenderItems:function(b,d){var c=d.$layout,a=c.getRenderTree();if(a){Ext.DomHelper.generateMarkup(a,b)}},finishRender:function(){var b=this,c,a;Ext.layout.Layout.prototype.finishRender.call(this);b.cacheElements();c=b.getRenderTarget();a=b.getLayoutItems();b.finishRenderItems(c,a)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(b,f){var c=b.targetContext,e=c.getFrameInfo(),j=b.paddingContext.getPaddingInfo(),h=0,k=0,d,g,a,l;if(!b.widthModel.shrinkWrap){++k;a=f?c.getDomProp("width"):c.getProp("width");d=(typeof a=="number");if(d){++h;a-=e.width+j.width;if(a<0){a=0}}}if(!b.heightModel.shrinkWrap){++k;l=f?c.getDomProp("height"):c.getProp("height");g=(typeof l=="number");if(g){++h;l-=e.height+j.height;if(l<0){l=0}}}return{width:a,height:l,needed:k,got:h,gotAll:h==k,gotWidth:d,gotHeight:g}},getPositionOffset:function(a){if(!this.createsInnerCt){var b=this.owner.itemNodeOffset;if(b){a+=b}}return a},getLayoutItems:function(){var a=this.owner,b=a&&a.items;return(b&&b.items)||[]},getRenderData:function(){var a=this.owner;return{$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var e=this,g=e.getRenderTarget(),a=e.getLayoutItems(),d=a.length,f=[],b,c;for(b=0;b<d;b++){c=a[b];if(c.rendered&&e.isValidParent(c,g,b)){f.push(c)}}return f},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var a=this,b=Ext.XTemplate.getTpl(this,"renderTpl");if(!b.renderContent){a.owner.setupRenderTpl(b)}return b},getRenderTree:function(){var a,c=this.owner.items,d,b={};do{d=c.generation;a=this.getItemsRenderTree(this.getLayoutItems(),b)}while(c.generation!==d);return a},renderChildren:function(){var b=this,c=b.owner.items,e=b.getRenderTarget(),d,a;do{d=c.generation;a=b.getLayoutItems();b.renderItems(a,e)}while(c.generation!==d)},getScrollbarsNeeded:function(c,h,b,g){var a=Ext.getScrollbarSize(),e=typeof c=="number",j=typeof h=="number",f=0,d=0;if(!a.width){return 0}if(j&&h<g){d=2;c-=a.width}if(e&&c<b){f=1;if(!d&&j){h-=a.height;if(h<g){d=2}}}return d+f},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var f=this.getRenderTarget(),b=this.getLayoutItems(),e=b.length,a=[],c,d;for(c=0;c<e;c++){d=b[c];if(d.rendered&&this.isValidParent(d,f,c)&&d.hidden!==true&&!d.floated){a.push(d)}}return a},getMoveAfterIndex:function(c){var a=this.owner,b=a.items;return b.indexOf(c)+1},moveItemBefore:function(d,e){var a=this.owner,b=d.ownerCt,c=a.items,f;if(d===e){return d}if(b){b.remove(d,false)}if(e){f=c.indexOf(e)}else{f=c.length}return a.insert(f,d)},setupRenderTpl:function(b){var a=this;b.renderBody=a.doRenderBody;b.renderContainer=a.doRenderContainer;b.renderItems=a.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){if(!a.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,a)},onRemove:function(a){if(!a.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,a)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(a){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(a)},beforeLayoutCycle:function(d){var b=this.owner,c=b.inheritedState,a=b.inheritedStateInner;if(!c||c.invalid){c=b.getInherited();a=b.inheritedStateInner}if(d.widthModel.shrinkWrap){a.inShrinkWrapTable=true}else{delete a.inShrinkWrapTable}},beginLayoutCycle:function(d){var j=this,b=j.outerCt,g=j.lastOuterCtWidth||"",f=j.lastOuterCtHeight||"",k=j.lastOuterCtTableLayout||"",a=d.state,l,e,m,c,h;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);e=m=c="";if(!d.widthModel.shrinkWrap){e="100%";h=j.owner.inheritedStateInner;l=j.getOverflowXStyle(d);c=(h.inShrinkWrapTable||l==="auto"||l==="scroll")?"":"fixed"}if(!d.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){m="100%"}if((e!==g)||j.hasOuterCtPxWidth){b.setStyle("width",e);j.lastOuterCtWidth=e;j.hasOuterCtPxWidth=false}if(c!==k){b.setStyle("table-layout",c);j.lastOuterCtTableLayout=c}if((m!==f)||j.hasOuterCtPxHeight){b.setStyle("height",m);j.lastOuterCtHeight=m;j.hasOuterCtPxHeight=false}if(j.hasInnerCtPxHeight){j.innerCt.setStyle("height","");j.hasInnerCtPxHeight=false}a.overflowAdjust=a.overflowAdjust||j.lastOverflowAdjust},calculate:function(c){var a=this,b=c.state,e=a.getContainerSize(c,true),d=b.calculatedItems||(b.calculatedItems=a.calculateItems?a.calculateItems(c,e):true);a.setCtSizeIfNeeded(c,e);if(d&&c.hasDomProp("containerChildrenSizeDone")){a.calculateContentSize(c);if(e.gotAll){if(a.manageOverflow&&!c.state.secondPass&&!a.reserveScrollbar){a.calculateOverflow(c,e)}return}}a.done=false},calculateContentSize:function(f){var e=this,a=((f.widthModel.shrinkWrap?1:0)|(f.heightModel.shrinkWrap?2:0)),c=(a&1)||undefined,g=(a&2)||undefined,d=0,b=f.props;if(c){if(isNaN(b.contentWidth)){++d}else{c=undefined}}if(g){if(isNaN(b.contentHeight)){++d}else{g=undefined}}if(d){if(c&&!f.setContentWidth(e.measureContentWidth(f))){e.done=false}if(g&&!f.setContentHeight(e.measureContentHeight(f))){e.done=false}}},calculateOverflow:function(c){var g=this,b,j,a,f,e,d,h;e=(g.getOverflowXStyle(c)==="auto");d=(g.getOverflowYStyle(c)==="auto");if(e||d){a=Ext.getScrollbarSize();h=c.overflowContext.el.dom;f=0;if(h.scrollWidth>h.clientWidth){f|=1}if(h.scrollHeight>h.clientHeight){f|=2}b=(d&&(f&2))?a.width:0;j=(e&&(f&1))?a.height:0;if(b!==g.lastOverflowAdjust.width||j!==g.lastOverflowAdjust.height){g.done=false;c.invalidate({state:{overflowAdjust:{width:b,height:j},overflowState:f,secondPass:true}})}}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(c,e){var d=e.$layout,a=Ext.XTemplate,f=d.beforeBodyTpl,b=d.afterBodyTpl;if(f){a.getTpl(d,"beforeBodyTpl").applyOut(e,c)}this.renderItems(c,e);this.renderContent(c,e);if(b){a.getTpl(d,"afterBodyTpl").applyOut(e,c)}},doRenderPadding:function(b,d){var c=d.$layout,a=d.$layout.owner,e=a[a.contentPaddingProperty];if(c.managePadding&&e){b.push("padding:",a.unitizeBox(e))}},finishedLayout:function(b){var a=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){a.repaint()}if(Ext.isOpera){a.setStyle("position","relative");a.dom.scrollWidth;a.setStyle("position","")}},getContainerSize:function(b,c){var a=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),d=b.state.overflowAdjust;if(d){a.width-=d.width;a.height-=d.height}return a},getRenderData:function(){var a=this,b=Ext.layout.container.Container.prototype.getRenderData.call(this);b.innerCtCls=a.innerCtCls;b.outerCtCls=a.outerCtCls;return b},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle("overflow-y"))},initContextItems:function(c){var b=this,d=c.target,a=b.owner.customOverflowEl;c.outerCtContext=c.getEl("outerCt",b);c.innerCtContext=c.getEl("innerCt",b);if(a){c.overflowContext=c.getEl(a)}else{c.overflowContext=c.targetContext}if(d[d.contentPaddingProperty]!==undefined){c.paddingContext=c.innerCtContext}},initLayout:function(){var c=this,b=Ext.getScrollbarSize().width,a=c.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(b&&c.manageOverflow&&!c.hasOwnProperty("lastOverflowAdjust")){if(a.autoScroll||c.reserveScrollbar){c.lastOverflowAdjust={width:b,height:0}}}},measureContentHeight:function(b){var a=this.outerCt.getHeight(),c=b.target;if(this.managePadding&&(c[c.contentPaddingProperty]===undefined)){a+=b.targetContext.getPaddingInfo().height}return a},measureContentWidth:function(d){var f,c,b,a,e;if(this.chromeCellMeasureBug){f=this.innerCt.dom;c=f.style;b=c.display;if(b=="table-cell"){c.display="";f.offsetWidth;c.display=b}}if(Ext.isSafari){f=this.outerCt.dom;c=f.style;c.display="table-cell";f.offsetWidth;f.style.display=""}a=this.outerCt.getWidth();e=d.target;if(this.managePadding&&(e[e.contentPaddingProperty]===undefined)){a+=d.targetContext.getPaddingInfo().width}return a},setCtSizeIfNeeded:function(d,b){var e=this,l=b.height,g=d.paddingContext.getPaddingInfo(),j=e.getTarget(),k=e.getOverflowXStyle(d),c=(k==="auto"||k==="scroll"),a=Ext.getScrollbarSize(),f,h;if(l&&!d.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){f=true}if(Ext.isIE8){h=true}if((f||h)&&c&&(j.dom.scrollWidth>j.dom.clientWidth)){l=Math.max(l-a.height,0)}if(f){d.outerCtContext.setProp("height",l+g.height);e.hasOuterCtPxHeight=true}if(h){d.innerCtContext.setProp("height",l);e.hasInnerCtPxHeight=true}}},setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000,activeCounter:0},constructor:function(a){var b=this;b.id=Ext.id(null,"zindex-mgr-");b.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(e,d){var c=(e.alwaysOnTop||0)-(d.alwaysOnTop||0);if(!c){c=e.getActiveCounter()-d.getActiveCounter()}return c}},filters:{filterFn:function(c){return c.isVisible()}}});b.zIndexStack.addObserver(b);b.front=null;b.globalListeners=Ext.globalEvents.on({hide:b.onComponentShowHide,show:b.onComponentShowHide,scope:b,destroyable:true});if(a){if(a.isContainer){a.on("resize",b._onContainerResize,b);b.zseed=Ext.Number.from(b.rendered?a.getEl().getStyle("zIndex"):undefined,b.getNextZSeed());b.targetEl=a.getTargetEl();b.container=a}else{Ext.on("resize",b._onContainerResize,b);b.zseed=b.getNextZSeed();b.targetEl=Ext.get(a)}}else{b.zseed=b.getNextZSeed();Ext.onReady(function(){Ext.on("resize",b._onContainerResize,b);b.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(a){this.zseed=a;return this.onCollectionSort()},onCollectionSort:function(){var g=this,d=g.front,j=g.zIndexStack.getRange(),f=j.length,c,h=g.zseed,e,b,k;for(c=0;c<f;c++){e=j[c];h=e.setZIndex(h);if(e.modal){b=e}}if(e&&e!==d){if(d&&!d.destroying){d.setActive(false,e)}k=e.modal||(e.focusOnToFront&&!e.preventFocusOnActivate);e.setActive(true,null,k)}g.front=e;if(b){g._showModalMask(b)}else{g._hideModalMask()}return h},onComponentUpdate:function(a){if(this.zIndexStack.contains(a)){this.zIndexStack.sort()}},onComponentShowHide:function(a){var b=this.zIndexStack;if(a.isFloating()&&!this.hidingAll&&(b.getSource()||b).contains(a)){b.itemChanged(a,"hidden");b.sort();if(!a.isVisible()){a.setActive(false)}}},_showModalMask:function(c){var e=this,h=c.el.getStyle("zIndex")-4,d=c.floatParent?c.floatParent.getTargetEl():c.container,b=e.mask,g=e.maskShim,f,a;if(!b){b=e.mask=Ext.getBody().createChild({role:"presentation",cls:"x-mask",style:"height:0;width:0"});b.setVisibilityMode(Ext.Element.DISPLAY);b.on("click",e._onMaskClick,e)}b.maskTarget=d;f=e._getMaskBox();if(g){g.setStyle("zIndex",h);g.show();g.setBox(f)}b.setStyle("zIndex",h);a="data-savedtabindex-"+d.getId();d.saveTabbableState(a);d.saveChildrenTabbableState(a);b.show();b.setBox(f)},_hideModalMask:function(){var c=this.mask,a=this.maskShim,d,b;if(c&&c.isVisible()){d=c.maskTarget;b="data-savedtabindex-"+d.getId();d.restoreChildrenTabbableState(b);d.restoreTabbableState(b);c.maskTarget=undefined;c.hide();if(a){a.hide()}}},_onMaskClick:function(){if(this.front){this.front.focus()}},_getMaskBox:function(){var a=this.mask.maskTarget;if(a.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return a.getBox()}},_onContainerResize:function(){var c=this,b=c.mask,a=c.maskShim,d;if(b&&b.isVisible()){b.hide();if(a){a.hide()}d=c._getMaskBox();if(a){a.setSize(d);a.show()}b.setSize(d);b.show()}},register:function(a){var b=this;if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=b;b.zIndexStack.add(a)},unregister:function(a){delete a.zIndexManager;this.zIndexStack.remove(a);this.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(b,e){var c=this,g=c.zIndexStack,a=g.last(),d,f=b.preventFocusOnActivate;if(g.find("alwaysOnTop",true)){return false}b=c.get(b);b.preventFocusOnActivate=e;b.setActiveCounter(++Ext.ZIndexManager.activeCounter);b.preventFocusOnActivate=f;d=g.last();return(d===b&&d!==a)},sendToBack:function(a){a=this.get(a);a.setActiveCounter(0);return a},hideAll:function(){var c=this.zIndexStack.getRange(),a=c.length,b;this.hidingAll=true;for(b=0;b<a;b++){c[b].hide()}this.hidingAll=true},hide:function(){var e=this,d=e.tempHidden=e.zIndexStack.getRange(),a=d.length,c,b;for(c=0;c<a;c++){b=d[c];b.el.hide();b.hidden=true}},show:function(){var c,d=this.tempHidden,a=d?d.length:0,b;for(c=0;c<a;c++){b=d[c];b.el.show();b.hidden=false;b.setPosition(b.x,b.y)}this.tempHidden=null},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(f,e){var b=this.zIndexStack.getRange(),d,a=b.length,c;for(d=0;d<a;d++){c=b[d];if(c.isComponent&&f.call(e||c,c)===false){return}}},eachTopDown:function(e,d){var a=this.zIndexStack.getRange(),c,b;for(c=a.length;c-->0;){b=a[c];if(b.isComponent&&e.call(d||b,b)===false){return}}},destroy:function(){var d=this,b=d.zIndexStack.getRange(),a=b.length,c;for(c=0;c<a;c++){Ext.destroy(b[c])}Ext.destroy(d.mask,d.maskShim,d.zIndexStack,d.globalListeners);d.zIndexStack=d.container=d.targetEl=d.globalListeners=null}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:true,query:function(a){a=a||"*";return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(f,e){var c=[],b=this.getQueryRoot().getRefItems(true),d=0,a=b.length,g;for(;d<a;++d){g=b[d];if(f.call(e||g,g)!==false){c.push(g)}}return c},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(a){var b=this.getQueryRoot().getRefItems();if(a&&a.isComponent){return this.matchById(b,a.getItemId())}if(a){b=Ext.ComponentQuery.query(a,b)}if(b.length){return b[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(true),a.getItemId())}a=a||"";return this.query(a)[0]||null},visitPreOrder:function(a,d,c,b){Ext.ComponentQuery._visit(true,a,this.getQueryRoot(),d,c,b)},visitPostOrder:function(a,d,c,b){Ext.ComponentQuery._visit(false,a,this.getQueryRoot(),d,c,b)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(b,e){var a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getItemId()===e){return d}}return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0));(Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"{%this.renderContainer(out,values)%}",isContainer:true,autoDestroy:true,defaultType:"panel",detachOnRemove:true,items:undefined,layout:"auto",suspendLayout:false,_applyDefaultsOptions:{defaults:true,strict:false},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var k=this,g=Ext.Array.slice(arguments),e=(typeof g[0]=="number")?g.shift():-1,c=k.getLayout(),d=false,m,h,b,a,n,l,f,j;if(g.length==1&&Ext.isArray(g[0])){h=g[0];m=true}else{h=g}if(k.rendered){Ext.suspendLayouts()}f=h=k.prepareItems(h,true);a=h.length;if(!m&&a==1){f=h[0]}for(b=0;b<a;b++){n=h[b];l=(e<0)?k.items.length:(e+b);j=!!n.instancedCmp;delete n.instancedCmp;if(n.floating){k.floatingItems.add(n);n.onAdded(k,l,j);delete n.initOwnerCt;if(k.hasListeners.add){k.fireEvent("add",k,n,l)}}else{if((!k.hasListeners.beforeadd||k.fireEvent("beforeadd",k,n,l)!==false)&&k.onBeforeAdd(n)!==false){k.items.insert(l,n);n.onAdded(k,l,j);delete n.initOwnerCt;k.onAdd(n,l);c.onAdd(n,l);d=true;if(k.hasListeners.add){k.fireEvent("add",k,n,l)}}}}if(d){k.updateLayout()}if(k.rendered){Ext.resumeLayouts(true)}return f},onAdded:function(b,c,a){Ext.Component.prototype.onAdded.apply(this,arguments);if(a){Ext.ComponentManager.markReferencesDirty()}},onRemoved:function(a){var b;if(!a){b=this.lookupReferenceHolder();if(b){Ext.ComponentManager.markReferencesDirty();b.clearReferences()}}Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var b=this.floatingItems.items,a=b.length,d,c;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);for(d=0;d<a;d++){c=b[d];if(!c.rendered&&c.autoShow){c.show()}}},afterLayout:function(b){var a=this,c=a.scrollManager;++a.layoutCounter;if(c&&a.layoutCounter>1){c.refresh()}if(a.hasListeners.afterlayout){a.fireEvent("afterlayout",a,b)}},onDestroy:function(){Ext.Component.prototype.onDestroy.call(this);this.refs=null},beforeDestroy:function(){var b=this,a=b.items,d=b.floatingItems,e;if(a){while((e=a.first())){b.doRemove(e,true)}}if(d){while((e=d.first())){b.doRemove(e,true)}}Ext.destroy(b.layout);Ext.Component.prototype.beforeDestroy.call(this)},beforeRender:function(){var b=this,a=b.getLayout(),c;Ext.Component.prototype.beforeRender.call(this);if(!a.initialized){a.initLayout()}c=a.targetCls;if(c){b.applyTargetCls(c)}},cascade:function(k,l,a){var j=this,e=j.items?j.items.items:[],f=e.length,d=0,h,g=a?a.concat(j):[j],b=g.length-1;if(k.apply(l||j,g)!==false){for(;d<f;d++){h=e[d];if(h.cascade){h.cascade(k,l,a)}else{g[b]=h;k.apply(l||h,g)}}}return this},contains:function(c,b){var a=false;if(b){this.cascade(function(d){if(d.contains&&d.contains(c)){a=true;return false}});return a}else{return this.items.contains(c)||this.floatingItems.contains(c)}},disable:function(){Ext.Component.prototype.disable.apply(this,arguments);var d=this.getChildItemsToDisable(),c=d.length,b,a;for(a=0;a<c;a++){b=d[a];if(b.resetDisable!==false&&!b.disabled){b.disable();b.resetDisable=true}}return this},doLayout:function(){this.updateLayout();return this},enable:function(){Ext.Component.prototype.enable.apply(this,arguments);var d=this.getChildItemsToDisable(),c=d.length,b,a;for(a=0;a<c;a++){b=d[a];if(b.resetDisable){b.enable()}}return this},getChildByElement:function(e,a){var g,c,b=0,d=this.getRefItems(),f=d.length;e=Ext.getDom(e);for(;b<f;b++){g=d[b];c=g.getEl();if(c&&((c.dom===e)||c.contains(e))){return(a&&g.getChildByElement)?g.getChildByElement(e,a):g}}return null},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}var b=this.items.get(a);if(!b&&typeof a!="number"){b=this.floatingItems.get(a)}return b},getLayout:function(){var b=this,a=b.layout;if(!a||!a.isLayout){b.setLayout(a)}return b.layout},getRefItems:function(c){var g=this,d=g.items.items,b=d.length,e=0,f,a=[];for(;e<b;e++){f=d[e];a[a.length]=f;if(c&&f.getRefItems){a.push.apply(a,f.getRefItems(true))}}d=g.floatingItems.items;b=d.length;for(e=0;e<b;e++){f=d[e];a[a.length]=f;if(c&&f.getRefItems){a.push.apply(a,f.getRefItems(true))}}return a},initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.getLayout();a.constructing=true;a.initItems();delete a.constructing},getReferences:function(){var a=Ext.ComponentManager;if(a.referencesDirty){a.fixReferences()}return this.refs||null},lookupReference:function(b){var a=this.getReferences();return(a&&a[b])||null},initItems:function(){var b=this,a=b.items;if(!a||!a.isMixedCollection){b.items=new Ext.util.AbstractMixedCollection(false,b.getComponentId);b.floatingItems=new Ext.util.MixedCollection(false,b.getComponentId);if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}}},initInheritedState:function(h,c){var g=this,d=g.controller,e=g.layout,f=g.session,j=g.viewModel,b=g.reference,a=g.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,h,c);if(g.collapsed){h.collapsed=true}if(d){h.referenceHolder=d;a=true}else{if(a){h.referenceHolder=g}}if(a){h.referencePath=""}else{if(b&&g.isParentReference){h.referencePath=g.referenceKey+"."}}if(f){h.session=f}if(j){h.viewModelPath=""}else{if(b&&g.isParentReference){h.viewModelPath=g.viewModelKey+"."}}if(e&&e.initInheritedState){e.initInheritedState(h,c)}},insert:function(c,b){var a;if(b&&b.isComponent){a=this.items.indexOf(b);if(a!==-1){return this.move(a,c)}}return this.add(c,b)},isAncestor:function(a){while(a){if(a.ownerCt===this){return true}a=a.ownerCt}},lookupComponent:function(a){if(!a.isComponent){if(typeof a==="string"){a=Ext.ComponentManager.get(a)}else{a=Ext.ComponentManager.create(a,this.defaultType)}}return a},move:function(b,e){var d=this,a=d.items,c;if(b.isComponent){b=a.indexOf(b)}c=a.getAt(b);if(b!==e){c=a.removeAt(b);if(c===false){return false}a.insert(e,c);d.onMove(c,b,e);if(d.hasListeners.move){d.fireEvent("move",d,c,b,e)}d.updateLayout()}return c},moveBefore:function(a,b){return this.layout.moveItemBefore(a,b)},moveAfter:function(e,g){var d=this,a=d.items,c=d.layout,b=g?c.getMoveAfterIndex(g):0,f=a.getAt(b);return c.moveItemBefore(e,f)},nextChild:function(h,c){var f=this,d=f.items,g=d.indexOf(h),e=0,b=d.length,a;if(g!==-1){if(c){for(;e<b;e++){a=d.getAt(g+e);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(g+1)}if(!a&&f.ownerCt){a=f.ownerCt.nextChild(f,c)}}return a},onAdd:Ext.emptyFn,onBeforeAdd:function(b){var a=b.ownerCt;if(a&&a!==this){a.remove(b,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(h,c){var f=this,d=f.items,g=d.indexOf(h),e=0,b=d.length,a;if(g!==-1){if(c){for(;e<b;e++){a=d.getAt(g-e);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(g-1)}if(!a&&f.ownerCt){a=f.ownerCt.nextChild(f,c)}}return a},remove:function(b,a){var d=this,e=d.getComponent(b);if(e&&(!d.hasListeners.beforeremove||d.fireEvent("beforeremove",d,e)!==false)){d.doRemove(e,a);if(d.hasListeners.remove){d.fireEvent("remove",d,e)}if(!d.destroying&&!e.floating){d.updateLayout()}}return e},removeAll:function(c){var g=this,e=g.items.items.slice().concat(g.floatingItems.items),b=[],d=0,a=e.length,f;Ext.suspendLayouts();g.removingAll=true;for(;d<a;d++){f=e[d];g.remove(f,c);if(f.ownerCt!==g){b.push(f)}}g.removingAll=false;Ext.resumeLayouts(!!a);return b},setLayout:function(e){var d=this,b=d.layout,f=b&&b.isLayout,a,c;if(typeof e==="string"){e={type:e}}c=e.type;if(f&&(!c||(c===b.type))){delete e.type;b.setConfig(e)}else{if(f){b.setOwner(null)}a=d.self.prototype.layout;if(typeof a==="string"){e.type=c||a}else{Ext.merge(Ext.merge({},a),e)}e=this.layout=Ext.Factory.layout(e);e.setOwner(this)}if(d.rendered){d.updateLayout()}},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},privates:{applyDefaults:function(a){var b=this,c=b.defaults;if(c){if(Ext.isFunction(c)){c=c.call(b,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}if(a.isComponent){a.setConfig(c,null,b._applyDefaultsOptions)}else{a=b.getConfigurator().merge(b,Ext.Object.fork(c),a)}}return a},applyReference:function(b){var a;if(b&&b.charAt(a=b.length-1)===">"){this.isParentReference=true;b=b.substring(0,a)}return b},applyTargetCls:function(a){this.addCls(a)},attachReference:function(b){var d=this,c,a;if(d.destroying||d.isDestroyed){return}a=d.refs||(d.refs={});c=b.referenceKey;a[c]=b},clearReference:function(b){var a=this.refs,c=b.referenceKey;if(a&&c){b.viewModelKey=b.referenceKey=a[c]=null}},clearReferences:function(){this.refs=null},detachComponent:function(a){Ext.getDetachedBody().appendChild(a.getEl())},doRemove:function(c,b){b=b===true||(b!==false&&this.autoDestroy);var f=this,e=f.layout,a=e&&f.rendered,d=c.destroying||b,g=c.floating;if(g){f.floatingItems.remove(c)}else{f.items.remove(c)}if(a&&!g){if(e.running){Ext.Component.cancelLayout(c,d)}e.onRemove(c,d)}c.onRemoved(d);f.onRemove(c,d);if(b){c.destroy()}else{if(a&&!g){e.afterRemove(c)}if(f.detachOnRemove&&c.rendered){f.detachComponent(c)}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var a=this.getLayout();if(a){a.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],button")},getComponentId:function(a){return a.getItemId&&a.getItemId()},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getFocusEl:function(){return this.getTargetEl()},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(b,d){if(Ext.isArray(b)){b=b.slice()}else{b=[b]}var f=this,c=0,a=b.length,e;for(;c<a;c++){e=b[c];if(e==null){Ext.Array.erase(b,c,1);--c;--a}else{if(d){e=this.applyDefaults(e)}e.initOwnerCt=f;if(e.isComponent){e.instancedCmp=true}b[c]=f.lookupComponent(e);delete e.initOwnerCt}}return b},repositionFloatingItems:function(){var b=this.floatingItems.items,a=b.length,d,c;for(d=0;d<a;d++){c=b[d];if(c.el&&!c.hidden){c.setPosition(c.x,c.y)}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var a=this.items.items,c=a.length,b=this._noMargin,d;while(c--){d=a[c];d.margin$=null;d.el.setStyle(b)}},setupRenderTpl:function(a){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(a)}}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0));(Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1},0,["tbfill"],["component","box","tbfill"],{component:true,box:true,tbfill:true},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:true,$configPrefixed:false,$configStrict:false,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(b){var a=this,c=b.state.boxPlan,d;if(c&&c.tooNarrow){d=a.handleOverflow(b);if(d){if(d.reservedSpace){a.layout.publishInnerCtSize(b,d.reservedSpace)}}}else{a.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(d){var c=this,a=c.layout.owner,b,e;if(a.hasListeners.overflowchange){b=a.query(">[hidden]");e=b.length;if(e!==c.lastHiddenCount){a.fireEvent("overflowchange",c.lastHiddenCount,e,b);c.lastHiddenCount=e}}},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(a){var b;if(a.isToolbar){b="toolbar"}else{if(a.isTabBar){b="tab-bar"}else{if(a.isMenu){b="menu"}else{if(a.isBreadcrumb){b="breadcrumb"}else{b=a.getXType()}}}}return b},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var b=this,a=b.layout,c=a.innerCt;c.removeCls(b.getOverflowCls(a.oppositeDirection));c.addCls(b.getOverflowCls(a.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));Ext.define("Ext.toolbar.Item",{extend:Ext.Component,alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.define("Ext.toolbar.Separator",{extend:Ext.toolbar.Item,alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"});(Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(d,a,b){var e=this,c=e.component;Ext.dom.Element.prototype.setSize.call(this,d,a,b);c.btnWrap.setStyle("table-layout",(!d||d==="auto")?"":"fixed");c.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return e},setStyle:function(f,e){var d=this,b=d.component,c,a;Ext.dom.Element.prototype.setStyle.call(this,f,e);if(f){if(f==="width"||(typeof f!=="string"&&"width" in f)){c=e||f.width;b.btnWrap.setStyle("table-layout",(!c||c==="auto")?"":"fixed")}if(f==="height"||(typeof f!=="string"&&"height" in f)){a=e||f.height;b.btnEl.setStyle("height",(!a||a==="auto")?"":"auto")}}return d},setHeight:function(a,b){Ext.dom.Element.prototype.setHeight.call(this,a,b);this.component.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return this},setWidth:function(b,a){Ext.dom.Element.prototype.setWidth.call(this,b,a);this.component.btnWrap.setStyle("table-layout",(!b||b==="auto")?"":"fixed");return this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0));(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,buttonSelector:".x-btn",init:function(){var a=this;if(!a.initialized){Ext.getDoc().on({keydown:a.onDocumentKeyDown,mouseup:a.onDocumentMouseUp,scope:a});a.initialized=true}},onDocumentKeyDown:function(c){var a=c.getKey(),b;if(a===c.SPACE||a===c.ENTER){b=c.getTarget(this.buttonSelector);if(b){Ext.getCmp(b.id).onClick(c)}}},onButtonMousedown:function(a,c){var b=this.pressedButton;if(b){b.onMouseUp(c)}this.pressedButton=a},onDocumentMouseUp:function(b){var a=this.pressedButton;if(a){a.onMouseUp(b);this.pressedButton=null}},toggleGroup:function(b,e){if(e){var d=this.groups[b.toggleGroup],c=d.length,a;for(a=0;a<c;a++){if(d[a]!==b){d[a].toggle(false)}}}},register:function(b){var c=this,a=this.groups,d=a[b.toggleGroup];c.init();if(!b.toggleGroup){return}if(!d){d=a[b.toggleGroup]=[]}d.push(b);b.on("toggle",c.toggleGroup,c)},unregister:function(a){if(!a.toggleGroup){return}var b=this,c=b.groups[a.toggleGroup];if(c){Ext.Array.remove(c,a);a.un("toggle",b.toggleGroup,b)}},getPressed:function(d){var c=this.groups[d],b=0,a;if(c){for(a=c.length;b<a;b++){if(c[b].pressed===true){return c[b]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",menuSelector:".x-menu",menus:{},groups:{},attached:false,lastShow:new Date(),constructor:function(){this.active=new Ext.util.MixedCollection()},init:function(){var a=this;if(!a.initialized){Ext.onReady(function(){Ext.getDoc().addKeyListener(27,a.hideAll,a)})}a.initialized=true},hideAll:function(){var c=this.active,b,a,d;if(c.length>0){b=Ext.Array.slice(c.items);d=b.length;for(a=0;a<d;a++){b[a].hide()}return true}return false},onHide:function(a){var b=this,c=b.active;c.remove(a);if(c.length<1){Ext.un("mousedown",b.onMouseDown,b);b.attached=false}},onShow:function(a){var c=this,d=c.active,b=c.attached;c.lastShow=new Date();d.add(a);if(!b){Ext.on("mousedown",c.onMouseDown,c,{buffer:Ext.isIE9m?10:undefined});c.attached=true}a.toFront()},onBeforeHide:function(a){if(a.activeChild){a.activeChild.hide()}if(a.autoHideTimer){clearTimeout(a.autoHideTimer);delete a.autoHideTimer}},onBeforeShow:function(a){var c=this.active,b=a.parentMenu;c.remove(a);if(!b&&!a.allowOtherMenus){this.hideAll()}else{if(b&&b.activeChild&&a!=b.activeChild){b.activeChild.hide()}}},onMouseDown:function(g){var d=this,f=d.active,b=f.length,a=d.lastShow,c;if(Ext.Date.getElapsed(a)>50&&b){if(Ext.isIE9m&&!Ext.getDoc().contains(g.target)){return}else{for(c=0;c<b;c++){if(f.items[c].owns(g.target)){return}}}d.hideAll()}},register:function(b){var a=this;a.init();if(b.floating){a.menus[b.id]=b;b.on({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})}},get:function(c,a){var b=this.menus;if(typeof c=="string"){if(!b){c=null}else{c=b[c]}}else{if(Ext.isArray(c)){a=Ext.apply({items:c},a);c=new Ext.menu.Menu(a)}else{if(!c.isComponent){a=Ext.apply({},c,a);c=Ext.ComponentManager.create(a,"menu")}}}return c},unregister:function(d){var a=this,b=a.menus,c=a.active;delete b[d.id];c.remove(d);d.un({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})},registerCheckable:function(c){var a=this.groups,b=c.group;if(b){if(!a[b]){a[b]=[]}a[b].push(c)}},unregisterCheckable:function(c){var a=this.groups,b=c.group;if(b){Ext.Array.remove(a[b],c)}},onCheckChange:function(d,f){var a=this.groups,c=d.group,b=0,h,e,g;if(c&&f){h=a[c];e=h.length;for(;b<e;b++){g=h[b];if(g!=d){g.setChecked(false)}}}}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:true},isButton:true,_syncFrameHeight:true,liquidLayout:true,hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:true,focusable:true,ariaRole:"button",defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl"],publishes:{pressed:1},menuClickBuffer:250,_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_operaArrowCls:"x-opera12m-btn-arrow",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var a=this;a.addCls("x-unselectable");if(Ext.isOpera12m&&(a.split||a.menu)&&a.getArrowVisible()){a.addCls(a._operaArrowCls+"-"+a.arrowAlign)}Ext.Component.prototype.initComponent.call(this);if(a.menu){a.split=true;a.setMenu(a.menu,false,true)}if(a.url){a.href=a.url}a.configuredWithPreventDefault=a.hasOwnProperty("preventDefault");if(a.href&&!a.configuredWithPreventDefault){a.preventDefault=false}if(Ext.isString(a.toggleGroup)&&a.toggleGroup!==""){a.enableToggle=true}if(a.html&&!a.text){a.text=a.html;delete a.html}},getElConfig:function(){var c=this,b=Ext.Component.prototype.getElConfig.call(this),a=c.getHref(),d=c.hrefTarget;if(b.tag==="a"){if(!c.disabled){b.tabIndex=c.tabIndex}if(a){if(!c.disabled){b.href=a}if(d){b.target=d}}}return b},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(e,d,b){var c=this,a=c.menu;if(a&&!b){if(d!==false&&c.destroyMenu){a.destroy()}a.ownerCmp=null}if(e){e=Ext.menu.Manager.get(e,{ownerCmp:c});e.ownerCmp=c;c.mon(e,{scope:c,show:c.onMenuShow,hide:c.onMenuHide});if(!a&&c.getArrowVisible()){c.split=true;if(c.rendered){c._addSplitCls();c.updateLayout()}}c.menu=e}else{if(c.rendered){c._removeSplitCls();c.updateLayout()}c.split=false;c.menu=null}},onRender:function(){var c=this,d,a,b;c.doc=Ext.getDoc();Ext.Component.prototype.onRender.apply(this,arguments);a=c.el;if(c.tooltip){c.setTooltip(c.tooltip,true)}if(c.handleMouseEvents){b={scope:c,mouseover:c.onMouseOver,mouseout:c.onMouseOut,mousedown:c.onMouseDown};if(c.split){b.mousemove=c.onMouseMove}}else{b={scope:c}}if(Ext.supports.Touch){b.touchstart=c.onTouchStart}if(c.menu){c.keyMap=new Ext.util.KeyMap({target:c.el,key:Ext.event.Event.prototype.DOWN,handler:c.onDownKey,scope:c})}if(c.repeat){c.mon(new Ext.util.ClickRepeater(a,Ext.isObject(c.repeat)?c.repeat:{}),"click",c.onRepeatClick,c)}else{if(b[c.clickEvent]){d=true}else{b[c.clickEvent]=c.onClick}}c.mon(a,b);if(c.hasFrameTable()){c.mon(c.frameTable,"click",c.frameTableListener,c)}if(d){c.mon(a,c.clickEvent,c.onClick,c)}Ext.button.Manager.register(c)},getTemplateArgs:function(){var h=this,c=h._btnCls,e=h._baseIconCls,a=h.getIconAlign(),j=h.glyph,g=Ext._glyphFontFamily,k=h.text,d=h._hasIcon(),f=h._hasIconCls,b;if(typeof j==="string"){b=j.split("@");j=b[0];g=b[1]}return{innerCls:h._innerCls,splitCls:h.getArrowVisible()?h.getSplitCls():"",iconUrl:h.icon,iconCls:h.iconCls,glyph:j,glyphCls:j?h._glyphCls:"",glyphFontFamily:g,text:k||"&#160;",closeText:h.closeText,textCls:k?h._textCls:"",noTextCls:k?"":h._noTextCls,hasIconCls:d?f:"",btnWrapCls:h._btnWrapCls,btnWrapStyle:h.width?"table-layout:fixed;":"",btnElStyle:h.height?"height:auto;":"",btnCls:c,baseIconCls:e,iconBeforeText:a==="left"||a==="top",iconAlignCls:d?(f+"-"+a):"",textAlignCls:c+"-"+h.getTextAlign()}},renderIcon:function(a){return this.getTpl("iconTpl").apply(a)},setHref:function(a){var b=this;b.href=a;if(!b.configuredWithPreventDefault){b.preventDefault=!a}if(b.rendered){if(!a||b.disabled){b.el.dom.removeAttribute("href")}else{b.el.dom.href=b.getHref()}}},getHref:function(){var b=this,a=b.href;return a?Ext.urlAppend(a,Ext.Object.toQueryString(Ext.apply({},b.params,b.baseParams))):false},setParams:function(b){var a=this;a.params=b;if(a.disabled){a.el.dom.removeAttribute("href")}else{a.el.dom.href=a.getHref()}},getSplitCls:function(){var a=this;return a.split?(a.baseCls+"-"+a.arrowCls)+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},setIcon:function(b){b=b||"";var c=this,a=c.btnIconEl,d=c.icon||"";c.icon=b;if(b!=d){if(a){a.setStyle("background-image",b?"url("+b+")":"");c._syncHasIconCls();if(c.didIconStateChange(d,b)){c.updateLayout()}}c.fireEvent("iconchange",c,d,b)}return c},setIconCls:function(b){b=b||"";var d=this,a=d.btnIconEl,c=d.iconCls||"";d.iconCls=b;if(c!=b){if(a){a.removeCls(c);a.addCls(b);d._syncHasIconCls();if(d.didIconStateChange(c,b)){d.updateLayout()}}d.fireEvent("iconchange",d,c,b)}return d},setGlyph:function(f){f=f||0;var e=this,b=e.btnIconEl,c=e.glyph,g=e._glyphCls,a,d;e.glyph=f;if(b){if(typeof f==="string"){d=f.split("@");f=d[0];a=d[1]||Ext._glyphFontFamily}if(!f){b.dom.innerHTML="";b.removeCls(g)}else{if(c!=f){b.dom.innerHTML="&#"+f+";";b.addCls(g)}}if(a){b.setStyle("font-family",a)}e._syncHasIconCls();if(e.didIconStateChange(c,f)){e.updateLayout()}}e.fireEvent("glyphchange",e,e.glyph,c);return e},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a||!c){b.clearTip()}if(c){if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.el.id},c));b.tooltip=c}else{b.el.dom.setAttribute(b.getTipAttr(),c)}}}else{b.tooltip=c}return b},updateIconAlign:function(f,d){var c=this,b,a,e;if(c.rendered){b=c.btnEl;a=c.btnIconEl;e=c._hasIconCls;if(d){b.removeCls(e+"-"+d)}b.addCls(e+"-"+f);if(f==="top"||f==="left"){b.insertFirst(a)}else{b.appendChild(a)}c.updateLayout()}},updateTextAlign:function(e,d){var c=this,b=c.btnEl,a=c._btnCls;if(c.rendered){b.removeCls(a+"-"+d);b.addCls(a+"-"+e)}},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},clearTip:function(){var b=this,a=b.el;if(Ext.quickTipsActive&&Ext.isObject(b.tooltip)){Ext.tip.QuickTipManager.unregister(a)}else{a.dom.removeAttribute(b.getTipAttr())}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}if(a.menu&&a.destroyMenu){a.menu.destroy()}Ext.destroy(a.repeater);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.rendered){a.doc.un("mouseover",a.monitorMouseOver,a);delete a.doc;Ext.destroy(a.keyMap);delete a.keyMap}Ext.button.Manager.unregister(a);Ext.Component.prototype.onDestroy.call(this)},setHandler:function(b,a){this.handler=b;if(arguments.length>1){this.scope=a}return this},applyText:function(d){d=d==null?"":String(d);var c=this,e=c.btnInnerEl,b=c.btnEl,a=c.text||"";if(d!=a){c.text=d;if(c.rendered){e.setHtml(d||"&#160;");b[d?"addCls":"removeCls"](c._textCls);b[d?"removeCls":"addCls"](c._noTextCls);c.updateLayout()}c.fireEvent("textchange",c,a,d)}},didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},setPressed:function(a){return this.toggle(a!==false)},toggle:function(c,a){var b=this;c=c===undefined?!b.pressed:!!c;if(c!==b.pressed){b[c?"addCls":"removeCls"](b._pressedCls);b.pressed=c;if(!a){b.fireEvent("toggle",b,c);Ext.callback(b.toggleHandler,b.scope,[b,c],0,b);if(b.reference&&b.publishState){b.publishState("pressed",c)}}}return b},maybeShowMenu:function(){var a=this;if(a.menu&&!a.hasVisibleMenu()&&!a.ignoreNextClick){a.showMenu(true)}},showMenu:function(b){var a=this,c=a.menu;if(a.rendered){if(a.tooltip&&Ext.quickTipsActive&&a.getTipAttr()!="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.el)}if(c.isVisible()){c.hide()}if(!b||a.showEmptyMenu||c.items.getCount()>0){c.showBy(a.el,a.menuAlign)}}return a},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onTouchStart:function(a){this.doPreventDefault(a)},onClick:function(b){var a=this;a.doPreventDefault(b);if(b.type!=="keydown"&&b.button){return}if(!a.disabled){a.doToggle();a.maybeShowMenu();a.fireHandler(b)}},doPreventDefault:function(a){if(a&&(this.preventDefault||(this.disabled&&this.getHref()))){a.preventDefault()}},fireHandler:function(b){var a=this;if(a.fireEvent("click",a,b)!==false){Ext.callback(a.handler,a.scope,[a,b],0,a)}},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==false||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,true,true)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,true,true)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(c){var a=this,b=a.overMenuTrigger;if(a.split){if(a.isWithinTrigger(c)){if(!b){a.onMenuTriggerOver(c)}}else{if(b){a.onMenuTriggerOut(c)}}}},isWithinTrigger:function(d){var c=this,b=c.el,f,a;f=(c.arrowAlign==="right")?d.getX()-c.getX():d.getY()-b.getY();a=c.getTriggerRegion();return f>a.begin&&f<a.end},getTriggerRegion:function(){var d=this,e=d._triggerRegion,c=d.arrowAlign==="right",b=c?"getRight":"getBottom",a=c?d.getWidth():d.getHeight();e.begin=a-(d.el[b]()-d.btnEl[b]());e.end=a;return e},onMouseEnter:function(a){this.fireEvent("mouseover",this,a)},onMouseLeave:function(a){this.fireEvent("mouseout",this,a)},onMenuTriggerOver:function(c){var b=this,a=b.arrowTooltip;b.overMenuTrigger=true;if(b.split&&a){b.btnWrap.dom.setAttribute(b.getTipAttr(),a)}b.fireEvent("menutriggerover",b,b.menu,c)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;if(a.split&&a.arrowTooltip){a.btnWrap.dom.setAttribute(a.getTipAttr(),"")}a.fireEvent("menutriggerout",a,a.menu,b)},enable:function(a){var b=this;Ext.Component.prototype.enable.apply(this,arguments);b.removeCls(b._disabledCls);if(b.rendered){b.el.dom.setAttribute("tabindex",b.tabIndex);if(b.href){b.el.dom.href=b.href}}return b},disable:function(a){var b=this;Ext.Component.prototype.disable.apply(this,arguments);b.addCls(b._disabledCls);b.removeCls(b.overCls);if(b.rendered){b.el.dom.removeAttribute("tabindex");if(b.href){b.el.dom.removeAttribute("href")}}return b},setScale:function(c){var a=this,b=a.ui.replace("-"+a.scale,"");if(!Ext.Array.contains(a.allowedScales,c)){throw ("#setScale: scale must be an allowed scale ("+a.allowedScales.join(", ")+")")}a.scale=c;a.setUI(b)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+"-"+a.scale}Ext.Component.prototype.setUI.call(this,b)},onMouseDown:function(b){var a=this;if(Ext.isIE){a.getFocusEl().focus()}if(!a.disabled&&b.button===0){Ext.button.Manager.onButtonMousedown(a,b);a.addCls(a._pressedCls)}},onMouseUp:function(b){var a=this;if(!a.isDestroyed&&b.button===0){if(!a.pressed){a.removeCls(a._pressedCls)}}},onMenuShow:function(){var a=this;a.ignoreNextClick=0;a.addCls(a._menuActiveCls);a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this,c=a.menuClickBuffer;a.removeCls(a._menuActiveCls);if(c){a.ignoreNextClick=Ext.defer(a.restoreClick,c,a)}a.fireEvent("menuhide",a,a.menu);a.focus()},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(a,c){var b=this;if(b.menu&&!b.disabled){b.showMenu();c.stopEvent();return false}},updateArrowVisible:function(b){var a=this;if(a.rendered){if(b){if(a.menu||a.isSplitButton){a.split=true;a._addSplitCls()}}else{a._removeSplitCls();a.split=false}}return b},privates:{addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var a=this;a.btnWrap.addCls(a.getSplitCls());if(Ext.isOpera12m){a.addCls(a._operaArrowCls+"-"+a.arrowAlign)}},getFocusEl:function(){return this.el},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var a=this;a.btnWrap.removeCls(a.getSplitCls());if(Ext.isOpera12m){a.removeCls(a._operaArrowCls+"-"+a.arrowAlign)}},_syncHasIconCls:function(){var b=this,a=b.btnEl,c=b._hasIconCls;if(a){a[b._hasIcon()?"addCls":"removeCls"]([c,c+"-"+b.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a)}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Menu",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="x-toolbar-no-items" role="menuitem">(None)</div>',menuCls:"x-box-menu",constructor:function(a){var b=this;Ext.layout.container.boxOverflow.None.prototype.constructor.apply(this,arguments);b.menuItems=[]},beginLayout:function(a){Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments);this.clearOverflow(a)},beginLayoutCycle:function(b,a){Ext.layout.container.boxOverflow.None.prototype.beginLayoutCycle.apply(this,arguments);if(!a){this.clearOverflow(b);this.layout.cacheChildItems(b)}},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},getSuffixConfig:function(){var d=this,c=d.layout,a=c.owner,b=a.id;d.menu=new Ext.menu.Menu({listeners:{scope:d,beforeshow:d.beforeMenuShow}});d.menuTrigger=new Ext.button.Button({id:b+"-menu-trigger",cls:d.menuCls+"-after x-toolbar-item",plain:a.usePlainButtons,ownerCt:a,ownerLayout:c,iconCls:"x-"+d.getOwnerType(a)+"-more-icon",ui:a.defaultButtonUI||"default",menu:d.menu,showEmptyMenu:true,getSplitCls:function(){return""}});return d.menuTrigger.getRenderTree()},getOverflowCls:function(a){return this.menuCls+"-body-"+a},handleOverflow:function(c){var b=this,a=b.layout;b.showTrigger(c);if(a.direction!=="vertical"){b.menuTrigger.setLocalY((c.state.boxPlan.maxSize-b.menuTrigger[a.names.getHeight]())/2)}return{reservedSpace:b.triggerTotalWidth}},captureChildElements:function(){var a=this,c=a.menuTrigger,b=a.layout.names;if(c.rendering){c.finishRender();a.triggerTotalWidth=c[b.getWidth]()+c.el.getMargin(b.parallelMargins)}},clearOverflow:function(g){var f=this,b=f.menuItems,e,c=0,d=b.length,a=f.layout.owner,h=a._asLayoutRoot;a.suspendLayouts();f.captureChildElements();f.hideTrigger();a.resumeLayouts();for(;c<d;c++){e=b[c];e.suspendLayouts();e.show();e.resumeLayouts(h)}b.length=0},showTrigger:function(c){var n=this,j=n.layout,a=j.owner,m=j.names,q=m.x,e=m.width,o=c.state.boxPlan,b=o.targetSize[e],g=c.childItems,k=g.length,f=n.menuTrigger,p,h,d,l;f.suspendLayouts();f.show();f.resumeLayouts(n._asLayoutRoot);b-=n.triggerTotalWidth;a.suspendLayouts();n.menuItems.length=0;for(d=0;d<k;d++){p=g[d];l=p.props;if(l[q]+l[e]>b){h=p.target;n.menuItems.push(h);h.hide()}}a.resumeLayouts()},hideTrigger:function(){var a=this.menuTrigger;if(a){a.hide()}},beforeMenuShow:function(h){var g=this,b=g.menuItems,d=0,a=b.length,f,e,c=function(k,j){return k.isXType("buttongroup")&&!(j instanceof Ext.toolbar.Separator)};h.suspendLayouts();g.clearMenu();h.removeAll();for(;d<a;d++){f=b[d];if(!d&&(f instanceof Ext.toolbar.Separator)){continue}if(e&&(c(f,e)||c(e,f))){h.add("-")}g.addComponentToMenu(h,f);e=f}if(h.items.length<1){h.add(g.noItemsMenuText)}h.resumeLayouts()},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]);Ext.applyIf(b,{text:c.overflowText||c.text,hideOnClick:a,destroyMenu:false,listeners:{}});if(c.isFormField){b.value=c.getValue();b.listeners.change=function(g,f,e){c.setValue(f)}}else{if(d||c.enableToggle){Ext.apply(b,{hideOnClick:false,group:d,checked:c.pressed,handler:function(f,g){c.onClick(g)}})}}if(c.isButton&&!c.changeListenersAdded){c.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle});c.changeListenersAdded=true}delete b.margin;delete b.ownerCt;delete b.xtype;delete b.id;delete b.itemId;return b},onButtonAttrChange:function(a){var b=a.overflowClone;b.suspendLayouts();b.setText(a.text);b.setIcon(a.icon);b.setIconCls(a.iconCls);b.resumeLayouts(true)},onButtonToggle:function(a,b){if(a.overflowClone.checked!==b){a.overflowClone.setChecked(b)}},addComponentToMenu:function(f,c){var e=this,d,b,a;if(c instanceof Ext.toolbar.Fill){return}else{if(c instanceof Ext.toolbar.Separator){f.add("-")}else{if(c.isComponent){if(c.isXType("splitbutton")){c.overflowClone=f.add(e.createMenuConfig(c,true))}else{if(c.isXType("button")){c.overflowClone=f.add(e.createMenuConfig(c,!c.menu))}else{if(c.isXType("buttongroup")){b=c.items.items;a=b.length;for(d=0;d<a;d++){e.addComponentToMenu(f,b[d])}}else{c.overflowClone=f.add(Ext.create(Ext.getClassName(c),e.createMenuConfig(c)))}}}}}}},clearMenu:function(){var e=this.menu,b,c,a,d;if(e&&e.items){b=e.items.items;a=b.length;for(c=0;c<a;c++){d=b[c];if(d.setMenu){d.setMenu(null)}}}},destroy:function(){var a=this.menuTrigger;if(a&&!this.layout.owner.items.contains(a)){delete a.ownerCt}Ext.destroy(this.menu,a)}},1,0,0,0,["box.overflow.Menu","box.overflow.menu"],0,[Ext.layout.container.boxOverflow,"Menu",Ext.layout.boxOverflow,"Menu"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.scrollPosition=0;b.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(e){var g=this,f=g.layout,b=f.owner,h="x-",d=g.getOwnerType(b),a=g.scrollerCls,c=a+" "+a+"-"+f.names[e]+" "+a+"-"+d+" "+a+"-"+d+"-"+b.ui;if(b.plain){c+=" "+a+"-plain"}return c},getOverflowCls:function(a){return this.scrollerCls+"-body-"+a},beginLayout:function(b){var a=this.layout;b.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(e){var d=this,g=e.state.boxPlan,c=d.layout,f=c.names,h=Math.min(d.getMaxScrollPosition(),e.innerCtScrollPos),a,b;if(g&&g.tooNarrow){a=e.childItems[e.childItems.length-1].props;d.scrollSize=a[f.x]+a[f.width];d.updateScrollButtons()}c.innerCt[f.setScrollLeft](h);Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,e)},handleOverflow:function(b){var g=this,f=g.layout.names,h=f.getWidth,j=f.parallelMargins,c,e,d,a;g.showScrollers();d=g.getBeforeScroller();a=g.getAfterScroller();c=d[h]()+a[h]()+d.getMargin(j)+a.getMargin(j);e=b.targetContext.getPaddingInfo()[f.width];return{reservedSpace:Math.max(c-e,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(f,d,g){var e=this,c=e.layout.owner,b=e.scrollerCls,a;a=c.el.getById(c.id+f);a.addClsOnOver(b+"-hover");a.addClsOnClick(b+"-pressed");a.setVisibilityMode(Ext.Element.DISPLAY);e[d]=new Ext.util.ClickRepeater(a,{interval:e.scrollRepeatInterval,handler:g,scope:e});return a},createWheelListener:function(){var a=this;a.layout.innerCt.on({mousewheel:function(b){a.scrollBy(a.getWheelDelta(b)*a.wheelIncrement*-1,false)},stopEvent:true})},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;a.createWheelListener();a.getBeforeScroller().show();a.getAfterScroller().show();a.layout.owner.addClsWithUI(a.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var b=this,c=b.getBeforeScroller(),a=b.getAfterScroller();if(c){c.hide();a.hide();b.layout.owner.removeClsWithUI(b.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){var a=this;Ext.destroy(a.beforeRepeater,a.afterRepeater,a._beforeScroller,a._afterScroller)},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var b=this,d=b.getBeforeScroller(),a=b.getAfterScroller(),c;if(!d||!a){return}c=b.scrollerCls+"-disabled";d[b.atExtremeBefore()?"addCls":"removeCls"](c);a[b.atExtremeAfter()?"addCls":"removeCls"](c);b.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var c=this,b=c.layout,a;if(isNaN(c.scrollPosition)){a=b.innerCt[b.names.getScrollLeft]()}else{a=c.scrollPosition}return a},getMaxScrollPosition:function(){var b=this,a=b.layout,c=b.scrollSize-a.innerCt[a.names.getWidth]();return(c<0)?0:c},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var c=this,d=c.getBeforeScroller(),b=c.getAfterScroller(),e=c.layout.names,a=c.scrollerCls;d.removeCls(a+"-"+e.beforeY);b.removeCls(a+"-"+e.afterY);d.addCls(a+"-"+e.beforeX);b.addCls(a+"-"+e.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(a,b){var f=this,e=f.layout,g=e.names,d=f.getScrollPosition(),c=Ext.Number.constrain(a,0,f.getMaxScrollPosition());if(c!=d&&!f.scrolling){f.scrollPosition=NaN;if(b===undefined){b=f.animateScroll}e.innerCt[g.scrollTo](g.beforeScrollX,c,b?f.getScrollAnim():false);if(b){f.scrolling=true}else{f.updateScrollButtons()}f.fireEvent("scroll",f,c,b?f.getScrollAnim():false)}},scrollToItem:function(k,c){var j=this,f=j.layout,d=f.owner,h=f.names,b=f.innerCt,a,e,g;k=j.getItem(k);if(k!==undefined){if(k==d.items.first()){g=0}else{if(k===d.items.last()){g=j.getMaxScrollPosition()}else{a=j.getItemVisibility(k);if(!a.fullyVisible){e=k.getBox(false,true);g=e[h.x];if(a.hiddenEnd){g-=(b[h.getWidth]()-e[h.width])}}}}if(g!==undefined){j.scrollTo(g,c)}}},getItemVisibility:function(j){var g=this,b=g.getItem(j).getBox(true,true),c=g.layout,f=c.names,e=b[f.x],d=e+b[f.width],a=g.getScrollPosition(),h=a+c.innerCt[f.getWidth]();return{hiddenStart:e<a,hiddenEnd:d>h,fullyVisible:e>a&&d<h}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:"x-dd-drag-current",_execOnAll:function(c,b){var e=this.ids,d,a,g,f;for(d in e){if(e.hasOwnProperty(d)){f=e[d];for(a in f){if(f.hasOwnProperty(a)){g=f[a];if(!this.isTypeOfDD(g)){continue}g[c].apply(g,b)}}}}},addListeners:function(){var a=this;a.init();Ext.getDoc().on({mouseup:a.handleMouseUp,mousemove:{fn:a.handleMouseMove,capture:false},dragstart:a.preventDrag,drag:a.preventDrag,dragend:a.preventDrag,capture:true,scope:a});Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},preventDrag:function(a){if(this.isMouseDown){a.stopPropagation()}},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:8,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){if(!this.ids[a]){this.ids[a]={}}var b=this.ids[a];if(b&&b[c.id]){delete b[c.id]}},_remove:function(f,b){var e=this,c=e.ids,a=f.groups,d;if(e.clearingAll){return}if(e.dragCurrent===f){e.dragCurrent=null}for(d in a){if(a.hasOwnProperty(d)){if(b){delete c[d]}else{if(c[d]){delete c[d][f.id]}}}}delete e.handleIds[f.id]},regHandle:function(b,a){if(!this.handleIds[b]){this.handleIds[b]={}}this.handleIds[b][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(f,b){var e=[],d,c,a;for(d in f.groups){for(c in this.ids[d]){a=this.ids[d][c];if(!this.isTypeOfDD(a)){continue}if(!b||a.isTarget){e[e.length]=a}}}return e},isLegalTarget:function(e,d){var b=this.getRelated(e,true),c,a;for(c=0,a=b.length;c<a;++c){if(b[c].id==d.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(b,a){return(this.handleIds[b]&&this.handleIds[b][a])},getDDById:function(d,c){var b,a;for(b in this.ids){a=this.ids[b][d];if(a instanceof Ext.dd.DDTarget||c){return a}}return null},handleMouseDown:function(f,d){var b=this,c,a;b.isMouseDown=true;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}b.currentPoint=f.getPoint();if(b.dragCurrent){b.handleMouseUp(f)}b.mousedownEvent=f;b.currentTarget=f.getTarget();b.dragCurrent=d;a=d.getEl();Ext.fly(a).setCapture();c=f.getXY();b.startX=c[0];b.startY=c[1];b.offsetX=b.offsetY=0;b.deltaX=b.startX-a.offsetLeft;b.deltaY=b.startY-a.offsetTop;b.dragThreshMet=false},startDrag:function(b,e){var c=this,d=c.dragCurrent,a;clearTimeout(c.clickTimeout);if(d){d.b4StartDrag(b,e);d.startDrag(b,e);a=d.getDragEl();if(a){Ext.fly(a).addCls(c.dragCls)}}c.dragThreshMet=true},handleMouseUp:function(b){var a=this;a.isMouseDown=false;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!a.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(a.clickTimeout);if(a.dragThreshMet){a.fireEvents(b,true)}a.stopDrag(b);a.stopEvent(b)},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(d){var b=this,c=b.dragCurrent,a;if(c){if(b.dragThreshMet){a=c.getDragEl();if(a){Ext.fly(a).removeCls(b.dragCls)}c.b4EndDrag(d);c.endDrag(d)}b.dragCurrent.onMouseUp(d)}b.dragCurrent=null;b.dragOvers={}},handleMouseMove:function(j){var g=this,h=g.dragCurrent,a=g.currentPoint=j.getPoint(),d=a.x,b=a.y,f,c;g.offsetX=d-g.startX;g.offsetY=b-g.startY;if(!h){return true}if(!g.dragThreshMet){f=Math.abs(g.offsetX);c=Math.abs(g.offsetY);if(f>g.clickPixelThresh||c>g.clickPixelThresh){g.startDrag(g.startX,g.startY)}}if(g.dragThreshMet){h.b4Drag(j);h.onDrag(j);if(!h.moveOnly){g.fireEvents(j,false)}}g.stopEvent(j);return true},fireEvents:function(x,m){var z=this,n=Ext.supports.Touch,g=z.dragCurrent,v=z.currentPoint,r=v.x,p=v.y,d,q,f,l,o=[],h=[],k=[],b=[],y=[],w=[],c,t,u,s,a=n?document.documentElement.clientWidth/window.innerWidth:1,j;if(!g||g.isLocked()){return}j=!(g.deltaX<0||g.deltaY<0);if(n||(!z.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&j)){d=g.getDragEl();if(j){d.style.visibility="hidden"}x.target=document.elementFromPoint(r/a,p/a);if(j){d.style.visibility="visible"}}for(t in z.dragOvers){f=z.dragOvers[t];delete z.dragOvers[t];if(!z.isTypeOfDD(f)||f.isDestroyed){continue}if(z.notifyOccluded){if(!this.isOverTarget(v,f,z.mode)){k.push(f)}}else{if(!x.within(f.getEl())){k.push(f)}}h[t]=true}for(s in g.groups){if("string"!=typeof s){continue}for(t in z.ids[s]){f=z.ids[s][t];if(z.isTypeOfDD(f)&&(l=f.getEl())&&(f.isTarget)&&(!f.isLocked())&&(Ext.fly(l).isVisible(true))&&((f!=g)||(g.ignoreSelf===false))){if(z.notifyOccluded){if((f.zIndex=z.getZIndex(l))!==-1){c=true}o.push(f)}else{if(x.within(f.getEl())){o.push(f);break}}}}}if(c){Ext.Array.sort(o,z.byZIndex)}for(t=0,u=o.length;t<u;t++){f=o[t];if(z.isOverTarget(v,f,z.mode)){if(m){y.push(f)}else{if(!h[f.id]){w.push(f)}else{b.push(f)}z.dragOvers[f.id]=f}if(!z.notifyOccluded){break}}}if(z.mode){if(k.length){g.b4DragOut(x,k);g.onDragOut(x,k)}if(w.length){g.onDragEnter(x,w)}if(b.length){g.b4DragOver(x,b);g.onDragOver(x,b)}if(y.length){g.b4DragDrop(x,y);g.onDragDrop(x,y)}}else{for(t=0,u=k.length;t<u;++t){g.b4DragOut(x,k[t].id);g.onDragOut(x,k[t].id)}for(t=0,u=w.length;t<u;++t){g.onDragEnter(x,w[t].id)}for(t=0,u=b.length;t<u;++t){g.b4DragOver(x,b[t].id);g.onDragOver(x,b[t].id)}for(t=0,u=y.length;t<u;++t){g.b4DragDrop(x,y[t].id);g.onDragDrop(x,y[t].id)}}if(m&&!y.length){g.onInvalidDrop(x)}},getZIndex:function(b){var a=document.body,c,d=-1;b=Ext.getDom(b);while(b!==a){if(!isNaN(c=Number(Ext.fly(b).getStyle("zIndex")))){d=c}b=b.parentNode}return d},byZIndex:function(b,a){return b.zIndex<a.zIndex},getBestMatch:function(c){var e=null,b=c.length,d,a;if(b==1){e=c[0]}else{for(d=0;d<b;++d){a=c[d];if(a.cursorIsOver){e=a;break}else{if(!e||e.overlap.getArea()<a.overlap.getArea()){e=a}}}}return e},refreshCache:function(b){var a,c,d,e;for(a in b){if("string"!=typeof a){continue}for(c in this.ids[a]){d=this.ids[a][c];if(this.isTypeOfDD(d)){e=this.getLocation(d);if(e){this.locationCache[d.id]=e}else{delete this.locationCache[d.id]}}}}},verifyEl:function(b){if(b){var a;if(Ext.isIE){try{a=b.offsetParent}catch(c){}}else{a=b.offsetParent}if(a){return true}}return false},getLocation:function(h){if(!this.isTypeOfDD(h)){return null}if(h.getRegion){return h.getRegion()}var f=h.getEl(),m,d,c,o,n,p,a,k,g;try{m=Ext.fly(f).getXY()}catch(j){}if(!m){return null}d=m[0];c=d+f.offsetWidth;o=m[1];n=o+f.offsetHeight;p=o-h.padding[0];a=c+h.padding[1];k=n+h.padding[2];g=d-h.padding[3];return new Ext.util.Region(p,a,k,g)},isOverTarget:function(j,a,c){var e=this.locationCache[a.id],h,f,b,d,g;if(!e||!this.useCache){e=this.getLocation(a);this.locationCache[a.id]=e}if(!e){return false}a.cursorIsOver=e.contains(j);h=this.dragCurrent;if(!h||!h.getTargetCoord||(!c&&!h.constrainX&&!h.constrainY)){return a.cursorIsOver}a.overlap=null;f=h.getTargetCoord(j.x,j.y);b=h.getDragEl();d=new Ext.util.Region(f.y,f.x+b.offsetWidth,f.y+b.offsetHeight,f.x);g=d.intersect(e);if(g){a.overlap=g;return(c)?true:a.cursorIsOver}else{return false}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var c=this,a=c.elementCache,b;if(c.dragCurrent){c.stopDrag();c.dragCurrent=null}c.clearingAll=true;c._execOnAll("unreg",[]);delete c.clearingAll;for(b in a){delete a[b]}c.elementCache={};c.ids={};c.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(c,a){if(c.swapNode){c.swapNode(a)}else{var d=a.parentNode,b=a.nextSibling;if(b==c){d.insertBefore(c,a)}else{if(a==c.nextSibling){d.insertBefore(a,c)}else{c.parentNode.replaceChild(a,c);d.insertBefore(c,b)}}}},getScroll:function(){var d=window.document,e=d.documentElement,a=d.body,c=0,b=0;if(e&&(e.scrollTop||e.scrollLeft)){c=e.scrollTop;b=e.scrollLeft}else{if(a){c=a.scrollTop;b=a.scrollLeft}}return{top:c,left:b}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,c){var b=Ext.fly(c).getXY();Ext.fly(a).setXY(b)},numericSort:function(d,c){return(d-c)},handleWasClicked:function(a,c){if(this.isHandle(c,a.id)){return true}else{var b=a.parentNode;while(b){if(this.isHandle(c,b.id)){return true}else{b=b.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(a){Ext.onReady(function(){a.addListeners()})}));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">&#160;',"</div>","</tpl>"],isSplitter:true,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var b=this,c=b.getCollapseTarget(),a=b.collapsible;Ext.Component.prototype.beforeRender.call(this);if(c.collapsed){b.addCls(b.collapsedClsInternal)}if(!b.canResize){b.addCls(b.baseCls+"-noresize")}Ext.applyIf(b.renderData,{collapseDir:b.getCollapseDirection(),collapsible:(a!==null)?a:c.collapsible});b.protoEl.unselectable()},onRender:function(){var c=this,b,a;Ext.Component.prototype.onRender.apply(this,arguments);if(c.performCollapse!==false){if(c.renderData.collapsible){c.mon(c.collapseEl,"click",c.toggleTargetCmp,c)}if(c.collapseOnDblClick){c.mon(c.el,"dblclick",c.toggleTargetCmp,c)}}c.mon(c.getCollapseTarget(),{collapse:c.onTargetCollapse,expand:c.onTargetExpand,beforeexpand:c.onBeforeTargetExpand,beforecollapse:c.onBeforeTargetCollapse,scope:c});if(c.canResize){c.tracker=Ext.create(c.getTrackerConfig());c.relayEvents(c.tracker,["beforedragstart","dragstart","dragend"])}b=c.collapseEl;if(b){b.lastCollapseDirCls=c.collapseDirProps[c.collapseDirection].cls}},getCollapseDirection:function(){var f=this,c=f.collapseDirection,e,a,b,d;if(!c){e=f.collapseTarget;if(e.isComponent){c=e.collapseDirection}if(!c){d=f.ownerCt.layout.type;if(e.isComponent){b=f.ownerCt.items;a=Number(b.indexOf(e)===b.indexOf(f)-1)<<1|Number(d==="hbox")}else{a=Number(f.collapseTarget==="prev")<<1|Number(d==="hbox")}c=["bottom","right","top","left"][a]}f.collapseDirection=c}f.setOrientation((c==="top"||c==="bottom")?"horizontal":"vertical");return c},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget==="prev"?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;if(a){a.setDisplayed(b)}},onBeforeTargetExpand:function(a){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(a){this.el.addCls(this.collapsedClsInternal+" "+(this.collapsedCls||""));this.setCollapseEl("")},onTargetExpand:function(a){this.el.removeCls(this.collapsedClsInternal+" "+(this.collapsedCls||""));this.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var c=this,b=c.collapseEl,d=c.collapseDirProps[c.collapseDirection],a;if(b){a=b.lastCollapseDirCls;if(a){b.removeCls(a)}b.addCls(b.lastCollapseDirCls=d.cls)}},applyOrientation:function(){var e=this,c=e.orientation,d=e.orientationProps[c],f=e.size,b=d.fixedAxis,g=d.stretchedAxis,a=e.baseCls+"-";e[c]=true;e[d.opposite]=false;if(!e.hasOwnProperty(b)||e[b]==="100%"){e[b]=f}if(!e.hasOwnProperty(g)||e[g]===f){e[g]="100%"}e.removeCls(a+d.opposite);e.addCls(a+c)},setOrientation:function(a){var b=this;if(b.orientation!==a){b.orientation=a;b.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(d,b){var c=this.getCollapseTarget(),f=c.placeholder,a;if(Ext.isFunction(c.expand)&&Ext.isFunction(c.collapse)){if(f&&!f.hidden){a=true}else{a=!c.hidden}if(a){if(c.collapsed){c.expand()}else{if(c.collapseDirection){c.collapse()}else{c.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var a=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&a.el){a.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.beforeDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));Ext.define("ExtThemeNeptune.resizer.Splitter",{override:"Ext.resizer.Splitter",size:8});(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:false,enableSplitters:true,overflowHandler:{$value:null,merge:function(b,a){if(typeof b=="string"){b={type:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},padding:0,pack:"start",stretchMaxPartner:undefined,vertical:false,alignRoundingMethod:"round"},scrollOffset:0,itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",availableSpaceOffset:0,reserveOffset:true,manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(a){var c=this,b;Ext.layout.container.Container.prototype.constructor.apply(this,arguments);c.setVertical(c.vertical);c.flexSortFn=c.flexSort.bind(c);b=typeof c.padding;if(b==="string"||b==="number"){c.padding=Ext.util.Format.parseBox(c.padding);c.padding.height=c.padding.top+c.padding.bottom;c.padding.width=c.padding.left+c.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(o,p){var k=this,h=k.sizePolicy,g=k.align,f=o.flex,m=g,j=k.names,b=o[j.width],n=o[j.height],d=k._percentageRe,c=d.test(b),e=(g==="stretch"),a=(g==="stretchmax"),l=k.constrainAlign;if(!p&&(e||f||c||(l&&!a))){p=k.owner.getSizeModel()}if(e){if(!d.test(n)&&p[j.height].shrinkWrap){m="stretchmax"}}else{if(!a){if(d.test(n)){m="stretch"}else{if(l&&!p[j.height].shrinkWrap){m="stretchmax"}else{m=""}}}}if(f||c){if(!p[j.width].shrinkWrap){h=h.flex}}return h[m]},flexSort:function(o,n){var l=this.names.maxWidth,e=this.names.minWidth,m=Infinity,k=o.target,r=n.target,h=k.flex,g=r.flex,s=0,c,p,j,d,q,f;j=k[l]||m;d=r[l]||m;c=k[e]||0;p=r[e]||0;q=isFinite(c)||isFinite(p);f=isFinite(j)||isFinite(d);if(q||f){if(f){s=j-d}if(s===0&&q){s=p-c}if(s===0){if(f){s=g-h}else{s=h-g}}}return s},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},roundFlex:function(a){return Math.ceil(a)},beginCollapse:function(b){var a=this;if(a.direction==="vertical"&&b.collapsedVertical()){b.collapseMemento.capture(["flex"]);delete b.flex}else{if(a.direction==="horizontal"&&b.collapsedHorizontal()){b.collapseMemento.capture(["flex"]);delete b.flex}}},beginExpand:function(a){a.collapseMemento.restore(["flex"])},beginLayout:function(e){var d=this,a=d.owner,g=a.stretchMaxPartner,c=d.innerCt.dom.style,f=d.names,b=d.overflowHandler;e.boxNames=f;if(b){b.beginLayout(e)}if(typeof g==="string"){g=Ext.getCmp(g)||a.query(g)[0]}e.stretchMaxPartner=g&&e.context.getCmp(g);Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);e.innerCtContext=e.getEl("innerCt",d);e.targetElContext=e.getEl("targetEl",d);d.scrollParallel=a.scrollFlags[f.x];d.scrollPerpendicular=a.scrollFlags[f.y];if(d.scrollParallel){d.scrollPos=a.getTargetEl().dom[f.scrollLeft]}c.width="";c.height=""},beginLayoutCycle:function(b,j){var f=this,d=f.align,e=b.boxNames,h=f.pack,a=f._centerRe,g=e.heightModel,c=f.overflowHandler;if(c){c.beginLayoutCycle(b,j)}Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);b.parallelSizeModel=b[e.widthModel];b.perpendicularSizeModel=b[g];b.boxOptions={align:d={stretch:d==="stretch",stretchmax:d==="stretchmax",center:a.test(d),bottom:f._endRe.test(d)},pack:h={center:a.test(h),end:h==="end"}};if(d.stretch&&b.perpendicularSizeModel.shrinkWrap){d.stretchmax=true;d.stretch=false}d.nostretch=!(d.stretch||d.stretchmax);if(b.parallelSizeModel.shrinkWrap){h.center=h.end=false}f.cacheFlexes(b);f.targetEl.setWidth(20000)},cacheFlexes:function(j){var t=this,k=j.boxNames,a=k.widthModel,d=k.heightModel,c=j.boxOptions.align.nostretch,n=0,b=j.childItems,p=b.length,r=[],l=0,h=k.minWidth,f=t._percentageRe,q=0,s=0,e,m,o,g;while(p--){m=b[p];e=m.target;if(m[a].calculated){m.flex=o=e.flex;if(o){n+=o;r.push(m);l+=e[h]||0}else{g=f.exec(e[k.width]);m.percentageParallel=parseFloat(g[1])/100;++q}}if(c&&m[d].calculated){g=f.exec(e[k.height]);m.percentagePerpendicular=parseFloat(g[1])/100;++s}}j.flexedItems=r;j.flexedMinSize=l;j.totalFlex=n;j.percentageWidths=q;j.percentageHeights=s;Ext.Array.sort(r,t.flexSortFn)},calculate:function(f){var d=this,c=d.getContainerSize(f),h=f.boxNames,e=f.state,g=e.boxPlan||(e.boxPlan={}),b=f.targetContext,a=d.overflowHandler;g.targetSize=c;if(!e.parallelDone){e.parallelDone=d.calculateParallel(f,h,g)}if(!e.perpendicularDone){e.perpendicularDone=d.calculatePerpendicular(f,h,g)}if(e.parallelDone&&e.perpendicularDone){d.publishInnerCtSize(f,d.reserveOffset?d.availableSpaceOffset:0);if(d.done&&f.boxOptions.align.stretchmax&&!e.stretchMaxDone){d.calculateStretchMax(f,h,g);e.stretchMaxDone=true}if(a){a.calculate(f)}}else{d.done=false}},calculateParallel:function(k,n,b){var F=this,z=n.width,a=k.childItems,s=n.beforeX,e=n.afterX,q=n.setWidth,A=a.length,x=k.flexedItems,r=x.length,v=k.boxOptions.pack,m=F.padding,d=b.targetSize,h=d[z],B=0,f=m[s],E=f+m[e]+F.scrollOffset+(F.reserveOffset?F.availableSpaceOffset:0),w=Ext.getScrollbarSize()[n.width],u,l,g,y,o,t,D,p,C,c,j;if(!k.parallelSizeModel.shrinkWrap&&!d[n.gotWidth]){return false}if(w&&F.scrollPerpendicular&&k.parallelSizeModel.shrinkWrap&&!k.boxOptions.align.stretch&&!k.perpendicularSizeModel.shrinkWrap){if(!k.state.perpendicularDone){return false}C=true}for(u=0;u<A;++u){o=a[u];l=o.marginInfo||o.getMarginInfo();B+=l[z];if(!o[n.widthModel].calculated){c=o.getProp(z);E+=c;if(isNaN(E)){return false}}}E+=B;if(k.percentageWidths){j=h-B;if(isNaN(j)){return false}for(u=0;u<A;++u){o=a[u];if(o.percentageParallel){c=Math.ceil(j*o.percentageParallel);c=o.setWidth(c);E+=c}}}if(k.parallelSizeModel.shrinkWrap){b.availableSpace=0;b.tooNarrow=false}else{b.availableSpace=h-E;b.tooNarrow=b.availableSpace<k.flexedMinSize;if(b.tooNarrow&&Ext.getScrollbarSize()[n.height]&&F.scrollParallel&&k.state.perpendicularDone){k.state.perpendicularDone=false;for(u=0;u<A;++u){a[u].invalidate()}}}p=E;g=b.availableSpace;y=k.totalFlex;for(u=0;u<r;u++){o=x[u];t=o.flex;D=F.roundFlex((t/y)*g);D=o[q](D);p+=D;g=Math.max(0,g-D);y-=t}if(v.center){f+=g/2;if(f<0){f=0}}else{if(v.end){f+=g}}for(u=0;u<A;++u){o=a[u];l=o.marginInfo;f+=l[s];o.setProp(n.x,f);f+=l[e]+o.props[z]}p+=k.targetContext.getPaddingInfo()[z];k.state.contentWidth=p;if(C&&(k.peek(n.contentHeight)>b.targetSize[n.height])){p+=w;k[n.hasOverflowY]=true;k.target.componentLayout[n.setWidthInDom]=true;k[n.invalidateScrollY]=Ext.isIE8}k[n.setContentWidth](p);return true},calculatePerpendicular:function(t,J,y){var s=this,d=t.perpendicularSizeModel.shrinkWrap,b=y.targetSize,h=t.childItems,x=h.length,l=Math.max,k=J.height,m=J.setHeight,g=J.beforeY,r=J.y,G=s.padding,j=G[g],n=b[k]-j-G[J.afterY],D=t.boxOptions.align,o=D.stretch,p=D.stretchmax,M=D.center,L=D.bottom,F=s.constrainAlign,E=0,A=0,C=s.onBeforeConstrainInvalidateChild,z=s.onAfterConstrainInvalidateChild,a=Ext.getScrollbarSize().height,w,H,B,u,v,c,q,e,K,I,f;if(o||((M||L)&&!d)){if(isNaN(n)){return false}}if(!o&&!t.parallelSizeModel.shrinkWrap&&!t.state.parallelDone&&s.scrollParallel){return false}if(s.scrollParallel&&y.tooNarrow){if(d){I=true}else{n-=a;y.targetSize[k]-=a}}if(o){c=n}else{for(H=0;H<x;H++){q=h[H];u=(q.marginInfo||q.getMarginInfo())[k];if(!(f=q.percentagePerpendicular)){B=q.getProp(k)}else{++A;if(d){continue}else{B=f*n-u;B=q[J.setHeight](B)}}if(!d&&F&&q[J.heightModel].shrinkWrap&&B>n){q.invalidate({before:C,after:z,layout:s,childHeight:n,names:J});t.state.parallelDone=false}if(isNaN(E=l(E,B+u,q.target[J.minHeight]||0))){return false}}if(I){E+=a;t[J.hasOverflowX]=true;t.target.componentLayout[J.setHeightInDom]=true;t[J.invalidateScrollX]=Ext.isIE8}e=t.stretchMaxPartner;if(e){t.setProp("maxChildHeight",E);K=e.childItems;if(K&&K.length){E=l(E,e.getProp("maxChildHeight"));if(isNaN(E)){return false}}}t[J.setContentHeight](E+s.padding[k]+t.targetContext.getPaddingInfo()[k]);if(I){E-=a}y.maxSize=E;if(p){c=E}else{if(M||L||A){if(F){c=d?E:n}else{c=d?E:l(n,E)}c-=t.innerCtContext.getBorderInfo()[k]}}}for(H=0;H<x;H++){q=h[H];u=q.marginInfo||q.getMarginInfo();w=j+u[g];if(o){q[m](c-u[k])}else{f=q.percentagePerpendicular;if(d&&f){u=q.marginInfo||q.getMarginInfo();B=f*c-u[k];B=q.setHeight(B)}if(M){v=c-q.props[k];if(v>0){w=j+Math[s.alignRoundingMethod](v/2)}}else{if(L){w=l(0,c-w-q.props[k])}}}q.setProp(r,w)}return true},onBeforeConstrainInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMin){b[c]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(b,a){var c=a.names;b.setProp(c.beforeY,0);if(b[c.heightModel].calculated){b[c.setHeight](a.childHeight)}},calculateStretchMax:function(c,j,l){var k=this,g=j.height,m=j.width,f=c.childItems,a=f.length,o=l.maxSize,n=k.onBeforeStretchMaxInvalidateChild,e=k.onAfterStretchMaxInvalidateChild,p,h,d,b;for(d=0;d<a;++d){p=f[d];h=p.props;b=o-p.getMarginInfo()[g];if(b!==h[g]||p[j.heightModel].constrained){p.invalidate({before:n,after:e,layout:k,childWidth:h[m],childHeight:b,childX:h.x,childY:h.y,names:j})}}},onBeforeStretchMaxInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMax){b[c]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(d,c){var e=c.names,a=c.childHeight,b=c.childWidth;d.setProp("x",c.childX);d.setProp("y",c.childY);if(d[e.heightModel].calculated){d[e.setHeight](a)}if(d[e.widthModel].calculated){d[e.setWidth](b)}},completeLayout:function(b){var k=this,j=b.boxNames,h=b.invalidateScrollX,g=b.invalidateScrollY,c=k.overflowHandler,e,a,f,d,l;if(c){c.completeLayout(b)}if(h||g){a=k.getTarget();e=a.dom;l=e.style;if(h){f=a.getStyle("overflowX");if(f==="auto"){f=l.overflowX;l.overflowX="scroll"}else{h=false}}if(g){d=a.getStyle("overflowY");if(d==="auto"){d=l.overflowY;l.overflowY="scroll"}else{g=false}}if(h||g){e.scrollWidth;if(h){l.overflowX=f}if(g){l.overflowY=d}}}if(k.scrollParallel){k.owner.getTargetEl().dom[j.scrollLeft]=k.scrollPos}},finishedLayout:function(b){var a=this.overflowHandler;if(a){a.finishedLayout(b)}Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var h=Ext.layout.container.Container.prototype.getLayoutItems.call(this),b=h.length,e,d,c,j,g,f,a;for(c=0;c<b;++c){if((j=h[c]).isSplitter){continue}a=j.splitter;if(j.hidden){if(a){if(!a.hidden){a.hidden=true;if(a.el){a.el.hide()}}}continue}if(a){f=a.collapseTarget==="next"}else{f=false}d=null;if(e&&g){if(g.hidden){g.hidden=false;if(g.el){g.el.show()}}if(f){d=true}}else{if(f){d=!e}}if(d!==null&&a.hidden!==d){a.hidden=d;if(a.el){a.el.setVisible(!d)}}g=!f&&a;e=j}if(e&&g&&!g.hidden){g.hidden=true;if(g.el){g.el.hide()}}return h},getScrollerEl:function(){return this.innerCt},insertSplitter:function(d,c,f,b){var e={xtype:"splitter",id:d.id+"-splitter",hidden:f,splitterFor:d,synthetic:true},a=c+((b.collapseTarget==="prev")?1:0);e[this.names.height]="100%";if(b){Ext.apply(e,b)}d.splitter=this.owner.add(a,e)},publishInnerCtSize:function(a,d){var h=this,g=a.boxNames,f=g.height,k=g.width,e=a.boxOptions.align,o=h.owner.dock,l=h.padding,j=a.state.boxPlan,c=j.targetSize,n=c[f],p=a.innerCtContext,b=(a.parallelSizeModel.shrinkWrap||(j.tooNarrow&&h.scrollParallel)?a.state.contentWidth-a.targetContext.getPaddingInfo()[k]:c[k])-(d||0),m;h.owner.tooNarrow=j.tooNarrow;if(e.stretch){m=n}else{m=j.maxSize+l[g.beforeY]+l[g.afterY]+p.getBorderInfo()[f];if(!a.perpendicularSizeModel.shrinkWrap&&(e.center||e.bottom)){m=Math.max(n,m)}}p[g.setWidth](b);p[g.setHeight](m);a.targetElContext.setWidth(a.innerCtContext.props.width-(this.vertical?0:(d||0)));if(isNaN(b+m)){h.done=false}if(j.calculatedWidth&&(o==="left"||o==="right")){a.setWidth(j.calculatedWidth,true,true)}},onAdd:function(d,a){var c=this,b=c.enableSplitters&&d.split&&!d.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(b){if(b===true){b={collapseTarget:"next"}}else{if(Ext.isString(b)){b={collapseTarget:b==="before"?"next":"prev"}}else{b=Ext.apply({collapseTarget:b.side==="before"?"next":"prev"},b)}}c.insertSplitter(d,a,!!d.hidden,b)}},onRemove:function(b,e){var f=this,h=f.names,a=f.owner,g=b.splitter,c=f.overflowHandler,d;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(g&&a.contains(g)){a.doRemove(g,true);b.splitter=null}if(c){c.onRemove(b)}if(b.layoutMarginCap===f.id){delete b.layoutMarginCap}if(!a.destroying&&!e&&b.rendered){d=b.getEl();if(d){d.setStyle(h.beforeY,"");d.setStyle(h.beforeX,"");d.setStyle("margin","")}}},applyOverflowHandler:function(b,a){var c;if(typeof b==="string"){b={type:b}}c=b.type;if(a&&a.type===b.type){delete b.type;a.setConfig(b);return a}b.layout=this;return Ext.Factory.boxOverflow(b)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler);a.flexSortFn=a.innerCt=null;Ext.layout.container.Container.prototype.destroy.apply(this,arguments)},getRenderData:function(){var a=Ext.layout.container.Container.prototype.getRenderData.call(this);a.targetElCls=this.targetElCls;return a},updateVertical:function(b){var d=(b&&"vbox")||"hbox",c=this.overflowHandler,a=this.owner;Ext.apply(this,this._props[d]);if(c&&a&&a.rendered){c.setVertical(b)}},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:true,vertical:false,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:false,vertical:true,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:false},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:true},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));(Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer"},after:{afterRender:"initFocusableContainer"}},isFocusableContainer:true,enableFocusableContainer:true,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(){if(this.enableFocusableContainer){this.doInitFocusableContainer()}},doInitFocusableContainer:function(){var b=this,a;a=b.getFocusableContainerEl();b.activateFocusableContainerEl(a);b.mon(a,{scope:b,mousedown:b.onFocusableContainerMousedown,focus:b.onFocusableContainerFocus,focusenter:b.onFocusableContainerFocusEnter,focusleave:b.onFocusableContainerFocusLeave});b.focusableKeyNav=b.createFocusableContainerKeyNav(a)},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{ignoreInputFields:true,scope:b,up:b.onFocusableContainerUpKey,down:b.onFocusableContainerDownKey,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey})},destroyFocusableContainer:function(){this.doDestroyFocusableContainer()},doDestroyFocusableContainer:function(){var a=this.focusableKeyNav;if(a){a.destroy();delete this.focusableKeyNav}},getFocusables:function(){return this.items.items},initDefaultFocusable:function(j){var f=this,h=f.activeChildTabIndex,c=false,e,g,b,d,a;e=f.getFocusables();d=e.length;if(!d){return}for(b=0;b<d;b++){g=e[b];if(g.focusable){c=c||g.focusable}else{continue}a=g.getTabIndex();if(a!=null&&a>=h){return}}if(!c){return}g=f.findNextFocusableChild(null,true,e,j);if(g){f.activateFocusable(g)}return g},clearFocusables:function(){var e=this,b,d,c,a;b=e.getFocusables();for(c=0,a=b.length;c<a;c++){d=b[c];if(d.focusable){e.deactivateFocusable(d)}}},activateFocusable:function(c,b){var a=b!=null?b:this.activeChildTabIndex;c.setTabIndex(a)},deactivateFocusable:function(c,b){var a=b!=null?b:this.inactiveChildTabIndex;c.setTabIndex(a)},onFocusableContainerUpKey:function(a){return this.moveChildFocus(a,false)},onFocusableContainerLeftKey:function(a){return this.moveChildFocus(a,false)},onFocusableContainerRightKey:function(a){return this.moveChildFocus(a,true)},onFocusableContainerDownKey:function(a){return this.moveChildFocus(a,true)},getFocusableFromEvent:function(a){var b=Ext.Component.getComponentByElement(a.getTarget());return b},moveChildFocus:function(b,a){var c=this.getFocusableFromEvent(b);return this.focusChild(c,a,b)},focusChild:function(c,a){var b=this.findNextFocusableChild(c,a);if(b){b.focus()}return b},findNextFocusableChild:function(h,g,c,e){var f,b,d,a;c=c||this.getFocusables();b=Ext.Array.indexOf(c,h);g=g===true?1:g===false?-1:g;a=c.length;d=g>0?(b<a?b+g:0):(b>0?b+g:a-1);for(;;d+=g){if(b<0&&(d>=a||d<0)){return null}else{if(d>=a){d=-1;continue}else{if(d<0){d=a;continue}else{if(d===b){return null}}}}f=c[d];if(!f||!f.focusable){continue}if(e||f.isFocusable()){return f}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(a){return this.doFocusableChildAdd(a)},activateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();a.set({tabindex:this.activeChildTabIndex})},deactivateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();a.set({tabindex:this.inactiveChildTabIndex})},doFocusableChildAdd:function(a){if(a.focusable){a.focusableContainer=this;this.deactivateFocusable(a)}},onFocusableChildRemove:function(a){return this.doFocusableChildRemove(a)},doFocusableChildRemove:function(a){delete a.focusableContainer},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.getComponentByElement(b);if(a===this){c.preventDefault()}},onFocusableContainerFocus:function(c){var b=this,a,d;d=b.initDefaultFocusable();if(d){b.deactivateFocusableContainerEl();d.focus()}},onFocusableContainerFocusEnter:function(c){var b=this,a=b.lastFocusedChild;if(a){b.deactivateFocusableContainerEl()}},onFocusableContainerFocusLeave:function(c){var b=this,a=b.lastFocusedChild;b.clearFocusables();if(a){b.activateFocusable(a)}else{b.activateFocusableContainerEl()}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(c){var b=this,a;b.clearFocusables();b.activateFocusable(c);if(c.needArrowKeys){b.guardFocusableChild(c)}},guardFocusableChild:function(d){var c=this,a=c.activeChildTabIndex,b;b=c.findNextFocusableChild(d,-1);if(b){b.setTabIndex(a)}b=c.findNextFocusableChild(d,1);if(b){b.setTabIndex(a)}},afterFocusableChildFocus:function(a){this.lastFocusedChild=a},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildEnable:Ext.privateFn,onFocusableChildDisable:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0));Ext.define("Ext.toolbar.Toolbar",{extend:Ext.container.Container,alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",mixins:[Ext.util.FocusableContainer],isToolbar:true,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:false,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var b=this,a=b.layout;if(b.dock==="right"||b.dock==="left"){b.vertical=true}b.layout=a=Ext.applyIf(Ext.isString(a)?{type:a}:a||{},{type:b.vertical?"vbox":"hbox",align:b.vertical?"stretchmax":"middle"});if(b.overflowHandler){a.overflowHandler=b.overflowHandler}else{if(b.enableOverflow){a.overflowHandler="menu"}}if(b.vertical){b.addClsWithUI("vertical")}if(b.ui==="footer"){b.ignoreBorderManagement=true}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(a){var e=this,b=Ext.container.Container.prototype.getRefItems.apply(this,arguments),d=e.layout,c;if(a&&(e.enableOverflow||(e.overflowHandler==="menu"))){c=d.overflowHandler;if(c&&c.menu){b=b.concat(c.menu.getRefItems(a))}}return b},lookupComponent:function(e){var d=arguments;if(typeof e==="string"){var b=Ext.toolbar.Toolbar,a=b.shortcutsHV[this.vertical?1:0][e]||b.shortcuts[e];if(typeof a==="string"){e={xtype:a}}else{if(a){e=Ext.apply({},a)}else{e={xtype:"tbtext",text:e}}}this.applyDefaults(e);d=[e]}return Ext.container.Container.prototype.lookupComponent.apply(this,d)},onBeforeAdd:function(b){var c=this,d=c.ui==="footer",a=d?c.defaultFooterButtonUI:c.defaultButtonUI;if(b.isSegmentedButton){if(b.getDefaultUI()==="default"&&!b.config.hasOwnProperty("defaultUI")){b.setDefaultUI(a)}}else{if(b.ui==="default"&&!b.hasOwnProperty("ui")){if(b.isButton){b.ui=a}else{if(b.isFormField){b.ui=d?c.defaultFooterFieldUI:c.defaultFieldUI}}}}if(b instanceof Ext.toolbar.Separator){b.setUI((c.vertical)?"vertical":"horizontal")}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(a){Ext.container.Container.prototype.onAdd.apply(this,arguments);this.trackMenu(a)},onRemove:function(a){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(a,true)},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return a},trackMenu:function(c,a){if(this.trackMenus&&c.menu){var d=a?"mun":"mon",b=this;b[d](c,"mouseover",b.onButtonOver,b);b[d](c,"menushow",b.onButtonMenuShow,b);b[d](c,"menuhide",b.onButtonMenuHide,b)}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(a){if(this.activeMenuBtn&&this.activeMenuBtn!==a){this.activeMenuBtn.hideMenu();a.showMenu();this.activeMenuBtn=a}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){delete this.activeMenuBtn}}});Ext.define("ExtThemeNeptune.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",usePlainButtons:false,border:false});Ext.define("Ext.toolbar.TextItem",{extend:Ext.toolbar.Item,alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var a=this;Ext.toolbar.Item.prototype.beforeRender.call(this);Ext.apply(a.renderData,{text:a.text})},setText:function(b){var a=this;a.text=b;if(a.rendered){a.el.setHtml(b);a.updateLayout()}}});(Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',getBodyRenderData:function(){var a=this;return{vertical:a.vertical,upDisabledCls:a.upEnabled?"":(a.spinnerUpCls+"-disabled"),downDisabledCls:a.downEnabled?"":(a.spinnerDownCls+"-disabled"),spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(d){var b=this,a=arguments,d=b.clickRepeater?a[1]:a[0],c=b.field;if(!c.readOnly&&!c.disabled){if(b.upEl.contains(d.target)){Ext.callback(b.upHandler,b.scope,[c,b,d],0,c)}else{if(b.downEl.contains(d.target)){Ext.callback(b.downHandler,b.scope,[c,b,d],0,c)}}}c.inputEl.focus()},onFieldRender:function(){var b=this,a=b.vertical,d,c;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);d=b.spinnerEl=b.el.select("."+b.spinnerCls,true);c=d.elements;b.upEl=a?c[0]:c[1];b.downEl=a?c[1]:c[0]},setUpEnabled:function(a){this.upEl[a?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(a){this.downEl[a?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(b){var c=this,a=b.spinner;a.upEnabled=c.spinUpEnabled;a.downEnabled=c.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},onRender:function(){var b=this,a=b.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(b.keyNavEnabled){b.spinnerKeyNav=new Ext.util.KeyNav(b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}b.spinUpEl=a.upEl;b.spinDownEl=a.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setUpEnabled(a)}},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setDownEnabled(a)}},onMouseWheel:function(b){var a=this,c;if(a.hasFocus){c=b.getWheelDelta();if(c>0){a.spinUp()}else{if(c<0){a.spinDown()}}b.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");Ext.form.field.Text.prototype.onDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getErrors:function(c){c=arguments.length>0?c:this.processRawValue(this.getRawValue());var b=this,e=Ext.form.field.Spinner.prototype.getErrors.call(this,c),d=Ext.String.format,a;if(c.length<1){return e}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){e.push(d(b.nanText,c))}a=b.parseValue(c);if(b.minValue===0&&a<0){e.push(this.negativeText)}else{if(a<b.minValue){e.push(d(b.minText,b.minValue))}}if(a>b.maxValue){e.push(d(b.maxText,b.maxValue))}return e},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=b.parseValue(c);c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(String(c).replace(a,"."));c=isNaN(c)?"":String(c).replace(".",a);return c},getSubmitValue:function(){var a=this,b=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!a.submitLocaleSeparator){b=b.replace(a.decimalSeparator,".")}return b},onChange:function(){this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments)},toggleSpinners:function(){var c=this,d=c.getValue(),b=d===null,a;if(c.spinUpEnabled||c.spinUpDisabledByToggle){a=b||d<c.maxValue;c.setSpinUpEnabled(a,true)}if(c.spinDownEnabled||c.spinDownDisabledByToggle){a=b||d>c.minValue;c.setSpinDownEnabled(a,true)}},setMinValue:function(b){var a=this,c;a.minValue=Ext.Number.from(b,Number.NEGATIVE_INFINITY);a.toggleSpinners();if(a.disableKeyFilter!==true){c=a.baseChars+"";if(a.allowExponential){c+=a.decimalSeparator+"e+-"}else{if(a.allowDecimals){c+=a.decimalSeparator}if(a.minValue<0){c+="-"}}c=Ext.String.escapeRegex(c);a.maskRe=new RegExp("["+c+"]");if(a.autoStripChars){a.stripCharsRe=new RegExp("[^"+c+"]","gi")}}},setMaxValue:function(a){this.maxValue=Ext.Number.from(a,Number.MAX_VALUE);this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(b||!d){return b?"":d}else{if(!c.allowDecimals||a<=0){a=0}}return parseFloat(Ext.Number.toFixed(parseFloat(d),a))},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(!Ext.isEmpty(a)){b.setValue(a)}Ext.form.field.Spinner.prototype.onBlur.call(this,c)},setSpinUpEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!a){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!a){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var b=this,a={scope:b,blur:b.onPagingBlur};a[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=b.onPagingKeyDown;return[{itemId:"first",tooltip:b.firstText,overflowText:b.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:b.moveFirst,scope:b},{itemId:"prev",tooltip:b.prevText,overflowText:b.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:b.movePrevious,scope:b},"-",b.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:b.inputItemWidth,margin:"-1 2 3 2",listeners:a},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(b.afterPageText,1)},"-",{itemId:"next",tooltip:b.nextText,overflowText:b.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:b.moveNext,scope:b},{itemId:"last",tooltip:b.lastText,overflowText:b.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:b.moveLast,scope:b},"-",{itemId:"refresh",tooltip:b.refreshText,overflowText:b.refreshText,iconCls:"x-tbar-loading",disabled:b.store.isLoading(),handler:b.doRefresh,scope:b}]},initComponent:function(){var b=this,a=b.items||b.buttons||[],c;b.bindStore(b.store||"ext-empty-store",true);c=b.getPagingItems();if(b.prependButtons){b.items=a.concat(c)}else{b.items=c.concat(a)}delete b.buttons;if(b.displayInfo){b.items.push("->");b.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){var a=this;Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);if(!a.store.isLoading()){a.calledFromRender=true;a.onLoad();delete a.calledFromRender}},updateInfo:function(){var e=this,c=e.child("#displayItem"),a=e.store,b=e.getPageData(),d,f;if(c){d=a.getCount();if(d===0){f=e.emptyMsg}else{f=Ext.String.format(e.displayMsg,b.fromRecord,b.toRecord,b.total)}c.setText(f)}},onLoad:function(){var g=this,d,b,c,a,f,h,e;f=g.store.getCount();h=f===0;if(!h){d=g.getPageData();b=d.currentPage;c=d.pageCount;if(b>c){g.store.loadPage(c);return}a=Ext.String.format(g.afterPageText,isNaN(c)?1:c)}else{b=0;c=0;a=Ext.String.format(g.afterPageText,0)}Ext.suspendLayouts();e=g.child("#afterTextItem");if(e){e.setText(a)}e=g.getInputItem();if(e){e.setDisabled(h).setValue(b)}g.setChildDisabled("#first",b===1||h);g.setChildDisabled("#prev",b===1||h);g.setChildDisabled("#next",b===c||h);g.setChildDisabled("#last",b===c||h);g.setChildDisabled("#refresh",false);g.updateInfo();Ext.resumeLayouts(true);if(!g.calledFromRender){g.fireEvent("change",g,d)}},setChildDisabled:function(a,b){var c=this.child(a);if(c){c.setDisabled(b)}},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(b){var c=this.getInputItem(),d=false,a;if(c){a=c.getValue();d=parseInt(a,10);if(!a||isNaN(d)){c.setValue(b.currentPage);return false}}return d},onPagingBlur:function(c){var b=this.getInputItem(),a;if(b){a=this.getPageData().currentPage;b.setValue(a)}},onPagingKeyDown:function(b,a){this.processKeyEvent(b,a)},processKeyEvent:function(h,g){var d=this,b=g.getKey(),c=d.getPageData(),a=g.shiftKey?10:1,f;if(b==g.RETURN){g.stopEvent();f=d.readPageFromInput(c);if(f!==false){f=Math.min(Math.max(1,f),c.pageCount);if(f!==c.currentPage&&d.fireEvent("beforechange",d,f)!==false){d.store.loadPage(f)}}}else{if(b==g.HOME||b==g.END){g.stopEvent();f=b==g.HOME?1:c.pageCount;h.setValue(f)}else{if(b==g.UP||b==g.PAGE_UP||b==g.DOWN||b==g.PAGE_DOWN){g.stopEvent();f=d.readPageFromInput(c);if(f){if(b==g.DOWN||b==g.PAGE_DOWN){a*=-1}f+=a;if(f>=1&&f<=c.pageCount){h.setValue(f)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var c=this,a=c.store,b=a.currentPage-1;if(b>0){if(c.fireEvent("beforechange",c,b)!==false){a.previousPage();return true}}return false},moveNext:function(){var d=this,a=d.store,c=d.getPageData().pageCount,b=a.currentPage+1;if(b<=c){if(d.fireEvent("beforechange",d,b)!==false){a.nextPage();return true}}return false},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a);return true}return false},doRefresh:function(){var b=this,a=b.store,c=a.currentPage;if(b.fireEvent("beforechange",b,c)!==false){a.loadPage(c);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onDestroy:function(){this.bindStore(null);Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));Ext.define("ExtThemeNeptune.toolbar.Paging",{override:"Ext.toolbar.Paging",defaultButtonUI:"plain-toolbar",inputItemWidth:40});(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,componentLayout:"boundlist",navigationModel:"boundlist",autoScroll:true,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap" role="presentation" class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="'+Ext.plainListCls+'">',"</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusable:false,initComponent:function(){var b=this,a=b.baseCls,c=b.itemCls;b.selectedItemCls=a+"-selected";if(b.trackOver){b.overItemCls=a+"-item-over"}b.itemSelector="."+c;b.scrollerSelector="ul."+Ext.plainListCls;if(b.floating){b.addCls(a+"-floating")}if(!b.tpl){b.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+c+'">'+b.getInnerTpl(b.displayField)+"</li>","</tpl>")}else{if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}}if(b.pageSize){b.pagingToolbar=b.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this);b.getSelectionModel().preventFocus=true},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var a=Ext.view.View.prototype.getRefItems.call(this),b=this.pagingToolbar;if(b){a.push(b)}return a},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var c=this,a=c.tpl,b=c.pagingToolbar,d=c.rendered;a.field=c.pickerField;a.store=c.store;Ext.view.View.prototype.refresh.call(this);a.field=a.store=null;if(d&&b&&b.rendered&&!c.preserveScrollOnRefresh){c.el.appendChild(b.el,true)}},bindStore:function(a,b){var c=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(c){c.bindStore(a,b)}},getInnerTpl:function(a){return"{"+a+"}"},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this);Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(a){a.finishRender()}}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{initKeyNav:function(a){var b=this,c=b.view.pickerField;if(!a.pickerField){return}if(!c.rendered){c.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}b.keyNav=new Ext.util.KeyNav({target:c.inputEl,forceKeyDown:true,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,scope:b})},onItemMouseDown:function(b,a,e,c,d){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,b,a,e,c,d);d.preventDefault()},onKeyUp:function(){var e=this,b=e.view,d=b.all,f=b.highlightedItem,c=f?b.indexOf(f):-1,a=c>0?c-1:d.getCount()-1;e.setPosition(a)},onKeyDown:function(){var e=this,b=e.view,d=b.all,f=b.highlightedItem,c=f?b.indexOf(f):-1,a=c<d.getCount()-1?c+1:0;e.setPosition(a)},onKeyLeft:Ext.emptyFn,onKeyRight:Ext.emptyFn,onKeyTab:function(c){var a=this.view,b=a.pickerField;if(a.isVisible()){if(b.selectOnTab){this.selectHighlighted(c)}b.collapse()}return true},onKeyEnter:function(d){var a=this.view.getSelectionModel(),c=this.view.pickerField,b=a.getCount();this.selectHighlighted(d);if(!c.multiSelect&&b===a.getCount()){c.collapse()}},onKeySpace:function(){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments);return true},focusItem:function(c){var b=this,a=b.view;if(typeof c==="number"){c=a.all.item(c)}if(c){c=c.dom;a.highlightItem(c);a.getOverflowEl().scrollChildIntoView(c,false)}},selectHighlighted:function(d){var b=this.view,a=b.getSelectionModel(),c;c=b.getNavigationModel().getRecord();if(c){if(d.getKey()===d.ENTER||!a.isSelected(c)){a.selectWithEvent(c,d)}}}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var a=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);a.setHiddenValue(a.value)},multiSelect:false,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,ignoreSelection:0,removingRecords:null,resizeComboToGrow:function(){var a=this;return a.grow&&a.growToLongestValue},initComponent:function(){var e=this,c=Ext.isDefined,b=e.store,d=e.transform,g=e.displayTpl,a,f;if(d){a=Ext.getDom(d);if(a){if(!e.store){b=Ext.Array.map(Ext.Array.from(a.options),function(h){return[h.value,h.text]})}if(!e.name){e.name=a.name}if(!("value" in e)){e.value=a.value}}}e.bindStore(b||"ext-empty-store",true,true);b=e.store;if(b.autoCreated){e.queryMode="local";e.valueField=e.displayField="field1";if(!b.expanded){e.displayField="field2"}}if(!c(e.valueField)){e.valueField=e.displayField}f=e.queryMode==="local";if(!c(e.queryDelay)){e.queryDelay=f?10:500}if(!c(e.minChars)){e.minChars=f?0:4}if(!g){e.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+e.displayField+'"]]}<tpl if="xindex < xcount">'+e.delimiter+"</tpl></tpl>")}else{if(!g.isTemplate){e.displayTpl=new Ext.XTemplate(g)}}Ext.form.field.Picker.prototype.initComponent.call(this);e.doQueryTask=new Ext.util.DelayedTask(e.doRawQuery,e);if(e.store.getCount()>0){e.setValue(e.value)}if(a){if(e.transformInPlace){e.render(a.parentNode,a);delete e.renderTo}Ext.removeNode(a)}},getSubTplMarkup:function(c){var d=this,a="",b=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(d.hiddenName){a='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+d.hiddenDataCls+'" role="presentation"></div>'}return a+b},applyFilters:function(b,c){var a=this;if(b===null||b.isFilterCollection){return b}if(b){if(!c){c=this.getFilters()}c.beginUpdate();c.splice(0,c.length,b);c.each(function(d){d.ownerId=a.id});c.endUpdate()}return c},getFilters:function(b){var a=this.filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on("endupdate","onEndUpdateFilters",c)}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(e){var d=this,f=d.filtered,c=!!e&&(e.length>0),a,b;if(f||c){d.filtered=c;a=[];b=d.store.getFilters();b.each(function(g){if(g.ownerId===d.id&&!e.contains(g)){a.push(g)}});b.splice(0,a,e.items)}},getStore:function(){return this.store},onBlur:function(c){var b=this,a=b.queryFilter;b.doQueryTask.cancel();b.assertValue();if(a&&b.queryMode==="local"&&b.clearFilterOnBlur){b.getStore().getFilters().remove(a)}Ext.form.field.Picker.prototype.onBlur.call(this,c)},onFocus:function(b){var a=this;Ext.form.field.Picker.prototype.onFocus.call(this,b);if(!a.duringTriggerClick&&a.triggerAction!=="all"&&a.queryFilter&&a.queryMode==="local"&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},assertValue:function(){var b=this,c=b.getRawValue(),d,a;if(b.forceSelection){if(b.multiSelect){if(c!==b.getDisplayValue()){b.setValue(b.lastSelection)}}else{d=b.findRecordByDisplay(c);if(d){a=b.value;if(!b.findRecordByValue(a)){b.select(d,true)}}else{b.setValue(b.lastSelection)}}}b.collapse()},onTypeAhead:function(){var e=this,d=e.displayField,b=e.store.findRecord(d,e.getRawValue()),c=e.getPicker(),f,a,g;if(b){f=b.get(d);a=f.length;g=e.getRawValue().length;c.highlightItem(c.getNode(b));if(g!==0&&g!==a){e.setRawValue(f);e.selectText(g,f.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this);if(a){this.getStore().getFilters().remove(a)}},onUnbindStore:function(){var c=this,a=c.picker,b=c.queryFilter;if(b&&!c.store.isDestroyed){c.getStore().getFilters().remove(b)}if(a){a.bindStore(null)}},onBindStore:function(a,c){var b=this.picker;if(!c){this.resetToDefault()}if(b){b.bindStore(a)}},bindStore:function(a,e,b){var d=this,c=d.queryFilter;d.mixins.storeholder.bindStore.call(d,a,b);a=d.getStore();if(a&&c&&!e){a.getFilters().add(c)}if(!b&&a){d.setValueOnData()}},getStoreListeners:function(){var a=this;return{beforeload:a.onBeforeLoad,clear:a.onClear,datachanged:a.onDataChanged,load:a.onLoad,exception:a.onException,remove:a.onRemove}},onBeforeLoad:function(){++this.ignoreSelection},onDataChanged:function(){var a=this;if(a.resizeComboToGrow()){a.updateLayout()}},onClear:function(){var a=this;if(a.resizeComboToGrow()){a.removingRecords=true;a.onDataChanged()}},onRemove:function(){var a=this;if(a.resizeComboToGrow()){a.removingRecords=true}},onException:function(){if(this.ignoreSelection>0){--this.ignoreSelection}this.collapse()},onLoad:function(b,a,c){if(this.ignoreSelection>0){--this.ignoreSelection}if(c&&!b.lastOptions.rawQuery){this.setValueOnData()}},setValueOnData:function(){var a=this;if(a.value==null){if(a.getStore().getCount()){a.doAutoSelect()}else{a.setValue(a.value)}}else{a.setValue(a.value)}},doRawQuery:function(){this.doQuery(this.getRawValue(),false,true)},doQuery:function(e,b,d){var c=this,a=c.beforeQuery({query:e||"",rawQuery:d,forceAll:b,combo:c,cancel:false});if(a===false||a.cancel){return false}if(c.queryCaching&&a.query===c.lastQuery){c.expand();if(c.queryMode==="local"){c.doAutoSelect()}}else{c.lastQuery=a.query;if(c.queryMode==="local"){c.doLocalQuery(a)}else{c.doRemoteQuery(a)}}return true},beforeQuery:function(a){var b=this;if(b.fireEvent("beforequery",a)===false){a.cancel=true}else{if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=true}}}return a},doLocalQuery:function(a){var d=this,e=a.query,c=d.getStore().getFilters(),b=d.queryFilter;d.queryFilter=null;c.beginUpdate();if(b){c.remove(b)}if(e){b=d.queryFilter=new Ext.util.Filter({id:d.id+"-filter",anyMatch:d.anyMatch,caseSensitive:d.caseSensitive,root:"data",property:d.displayField,value:d.enableRegEx?new RegExp(e):e});c.add(b)}c.endUpdate();if(d.store.getCount()||d.getPicker().emptyText){d.expand()}else{d.collapse()}d.afterQuery(a)},doRemoteQuery:function(b){var c=this,a=function(){c.afterQuery(b)};c.expand();if(c.pageSize){c.loadPage(1,{rawQuery:b.rawQuery,callback:a})}else{c.store.load({params:c.getParams(b.query),rawQuery:b.rawQuery,callback:a})}},afterQuery:function(a){var b=this;if(b.store.getCount()){if(b.typeAhead){b.doTypeAhead()}if(b.getRawValue()!==b.getDisplayValue()){b.ignoreSelection++;b.picker.getSelectionModel().deselectAll();b.ignoreSelection--}if(a.rawQuery){b.syncSelection();if(b.picker&&!b.picker.getSelectionModel().hasSelection()){b.doAutoSelect()}}else{b.doAutoSelect()}}},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(c){var b={},a=this.queryParam;if(a){b[a]=c}return b},doAutoSelect:function(){var b=this,a=b.picker;if(a&&b.autoSelect&&b.store.getCount()>0){a.getNavigationModel().setPosition(b.picker.getSelectionModel().lastSelected||0)}},doTypeAhead:function(){var b=this,a=Ext.event.Event;if(!b.typeAheadTask){b.typeAheadTask=new Ext.util.DelayedTask(b.onTypeAhead,b)}if(b.lastKey!==a.BACKSPACE&&b.lastKey!==a.DELETE){b.typeAheadTask.delay(b.typeAheadDelay)}},onTriggerClick:function(){var a=this;a.duringTriggerClick=true;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.onFocus({});if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{if(a.triggerAction==="last"){a.doQuery(a.lastQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}}}delete a.duringTriggerClick},onPaste:function(){var a=this;if(!a.readOnly&&!a.disabled&&a.editable){a.doQueryTask.delay(a.queryDelay)}},onKeyUp:function(d,b){var c=this,a=d.getKey();if(!c.readOnly&&!c.disabled&&c.editable){c.lastKey=a;if(!d.isSpecialKey()||a===d.BACKSPACE||a===d.DELETE){c.doQueryTask.delay(c.queryDelay)}}if(c.enableKeyEvents){Ext.form.field.Picker.prototype.onKeyUp.apply(this,arguments)}},initEvents:function(){var a=this;Ext.form.field.Picker.prototype.initEvents.call(this);if(!a.enableKeyEvents){a.mon(a.inputEl,"keyup",a.onKeyUp,a)}a.mon(a.inputEl,"paste",a.onPaste,a)},onDestroy:function(){var a=this;if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var a=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(a.picker){a.picker.ownerCt=a.up("[floating]");a.picker.registerWithOwnerCt()}},createPicker:function(){var c=this,b,a=Ext.apply({xtype:"boundlist",pickerField:c,selModel:{mode:c.multiSelect?"SIMPLE":"SINGLE",enableInitialSelection:false},floating:true,hidden:true,store:c.store,displayField:c.displayField,preserveScrollOnRefresh:true,pageSize:c.pageSize,tpl:c.tpl},c.listConfig,c.defaultListConfig);b=c.picker=Ext.widget(a);if(c.pageSize){b.pagingToolbar.on("beforechange",c.onPageChange,c)}c.mon(b,{refresh:c.onListRefresh,scope:c});c.mon(b.getSelectionModel(),{beforeselect:c.onBeforeSelect,beforedeselect:c.onBeforeDeselect,selectionchange:c.onListSelectionChange,scope:c});return b},alignPicker:function(){var d=this,c=d.getPicker(),g=d.getPosition()[1]-Ext.getBody().getScroll().top,f=Ext.Element.getViewportHeight()-g-d.getHeight(),e=Math.max(g,f),b=c.getTargetEl().dom,a=b.scrollTop;if(c.height){delete c.height;c.updateLayout()}if(c.getHeight()>e-5){c.setHeight(e-5)}Ext.form.field.Picker.prototype.alignPicker.call(this);b.scrollTop=a},onListRefresh:function(){if(!this.expanding){this.alignPicker()}this.syncSelection()},onBeforeSelect:function(b,a){return this.fireEvent("beforeselect",this,a,this.getStore().indexOf(a))},onBeforeDeselect:function(b,a){return this.fireEvent("beforedeselect",this,a,this.getStore().indexOf(a))},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getPicker().getSelectionModel();b.processSelectionChange=true;if(a){c.select(a)}else{c.deselectAll()}b.processSelectionChange=false;b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},onListSelectionChange:function(a,e){var b=this,f=b.multiSelect,d=e.length>0,c=b.processSelectionChange;b.updateBindSelection(a,e);if(!b.ignoreSelection&&(b.isExpanded||c)){if(!f){b.collapse()}if(f||d||c){b.setValue(e,false)}if(d){b.fireEvent("select",b,e)}}},onExpand:function(){var b=this,a;if(b.selectOnTab){b.ignoreMonitorTab=true}a=b.getPicker().getNavigationModel();Ext.defer(a.enable,1,a)},onCollapse:function(){var b=this,a=b.getPicker().getNavigationModel();if(a){a.disable();b.ignoreMonitorTab=false}},select:function(d,a){var c=this,b=c.picker,e;if(d&&d.isModel&&a===true&&b){e=!b.getSelectionModel().isSelected(d)}c.setValue(d,true);if(e){c.fireEvent("select",c,d)}},findRecord:function(d,c){var b=this.store,a=b.findExact(d,c);return a!==-1?b.getAt(a):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(a){return this.findRecord(this.valueField,a)},findRecordByDisplay:function(a){return this.findRecord(this.displayField,a)},setValue:function(n,e){var k=this,c=k.valueNotFoundText,o=k.getStore(),p=k.inputEl,m=[],b=[],d=[],j=k.autoLoadOnValue,l=o.hasPendingLoad(),q=j&&o.loadCount===0&&!l,f,h,g,a;if(n!=null&&(l||q||o.isEmptyStore)){k.value=n;k.setHiddenValue(k.value);if(q&&o.getProxy().isRemote){o.load()}return k}n=Ext.Array.from(n);for(f=0,h=n.length;f<h;f++){g=n[f];if(!g||!g.isModel){g=k.findRecordByValue(g)}if(g){m.push(g);b.push(g.data);d.push(g.get(k.valueField))}else{if(!k.forceSelection){d.push(n[f]);a={};a[k.displayField]=n[f];b.push(a)}else{if(Ext.isDefined(c)){b.push(c)}}}}k.setHiddenValue(d);k.value=k.multiSelect?d:d[0];if(!Ext.isDefined(k.value)){k.value=undefined}k.displayTplData=b;k.lastSelection=k.valueModels=m;if(p&&k.emptyText&&!Ext.isEmpty(n)){p.removeCls(k.emptyCls)}k.setRawValue(k.getDisplayValue());k.checkChange();if(e!==false){k.syncSelection()}k.applyEmptyText();return k},setHiddenValue:function(h){var e=this,a=e.hiddenName,d,b,j,g,f,c;if(!e.hiddenDataEl||!a){return}h=Ext.Array.from(h);b=e.hiddenDataEl.dom;j=b.childNodes;g=j[0];f=h.length;c=j.length;if(!g&&f>0){e.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:a}));c=1;g=b.firstChild}while(c>f){b.removeChild(j[0]);--c}while(c<f){b.appendChild(g.cloneNode(true));++c}for(d=0;d<f;d++){j[d].value=h[d]}},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var b=this,a=b.picker,d=b.getRawValue(),c=b.value;if(b.getDisplayValue()!==d){c=d;b.value=b.displayTplData=b.valueModels=undefined;if(a){b.ignoreSelection++;a.getSelectionModel().deselectAll();b.ignoreSelection--}}b.value=c==null?null:c;return b.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=""}return a},isEqual:function(e,d){var b=Ext.Array.from,c,a;e=b(e);d=b(d);a=e.length;if(a!==d.length){return false}for(c=0;c<a;c++){if(d[c]!==e[c]){return false}}return true},clearValue:function(){this.setValue([])},syncSelection:function(){var g=this,d=g.getPicker(),f,c,b=g.valueModels||[],e=b.length,a,h;if(d){f=[];for(a=0;a<e;a++){h=b[a];if(h&&h.isModel&&g.store.indexOf(h)>=0){f.push(h)}}g.ignoreSelection++;c=d.getSelectionModel();if(f.length){c.select(f,false)}else{c.deselectAll()}g.ignoreSelection--}},onEditorTab:function(b){var a=this.getPicker().getNavigationModel();if(this.selectOnTab&&a){a.selectHighlighted(b)}}},0,["combo","combobox"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));Ext.define("FBEditor.override.form.field.ComboBox",{override:"Ext.form.field.ComboBox",createPicker:function(){var b=this,a;a=(arguments.callee.$previous||Ext.form.field.Picker.prototype.createPicker).apply(this,arguments);a.fireHierarchyEvent=function(c){};return a}});(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;a.target=b;b.on("beforedestroy",a.disable,a);a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;if(b){b.un("beforedestroy",a.disable,a)}a.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(a.is(this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(c,b){var e=this,a=e.items,d=e.addHandler;if(!e.disabled){if(d){d.call(e.scope||b,b)}if(a){a.add(b)}}},onItemRemove:function(c,b){var e=this,a=e.items,d=e.removeHandler;if(!e.disabled){if(d){d.call(e.scope||b,b)}if(a){a.remove(b)}}},onContainerAdd:function(f,b){var j=this,h,g,c=j.handleAdd,a=j.handleRemove,d,e;if(f.isContainer){f.on("add",c,j);f.on("dockedadd",c,j);f.on("remove",a,j);f.on("dockedremove",a,j)}if(b!==true){h=f.query(j.selector);for(d=0,g=h.length;d<g;++d){e=h[d];j.onItemAdd(e.ownerCt,e)}}h=f.query(">container");for(d=0,g=h.length;d<g;++d){j.onContainerAdd(h[d],true)}},handleRemove:function(b,a){var c=this;if(!c.disabled){if(a.is(c.selector)){c.onItemRemove(b,a)}if(a.isQueryable){c.onContainerRemove(b,a)}}},onContainerRemove:function(e,c){var g=this,b,d,a,f;if(!c.isDestroyed&&!c.destroying&&c.isContainer){g.removeCtListeners(c);b=c.query(g.selector);for(d=0,a=b.length;d<a;++d){f=b[d];g.onItemRemove(f.ownerCt,f)}b=c.query("container");for(d=0,a=b.length;d<a;++d){g.removeCtListeners(b[d])}}else{g.invalidateItems(true)}},removeCtListeners:function(a){var b=this;a.un("add",b.handleAdd,b);a.un("dockedadd",b.handleAdd,b);a.un("remove",b.handleRemove,b);a.un("dockedremove",b.handleRemove,b)},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(c){var b=this,a=b.invalidateHandler;if(c&&a){a.call(b.scope||b,b)}b.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:"[isFormField]:not([excludeForm])",addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(b){var a=b.fieldDefaults,c=this.fieldDefaults;if(c){if(a){b.fieldDefaults=Ext.apply(Ext.Object.chain(a),c)}else{b.fieldDefaults=c}}},onChildFieldAdd:function(b){var a=this;a.mon(b,"errorchange",a.handleFieldErrorChange,a);a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,"errorchange",a.handleFieldErrorChange,a);a.mun(b,"validitychange",a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(c,b){var a=this;if(c!==a){a.fireEvent("fieldvaliditychange",a,c,b);a.onFieldValidityChange(c,b)}},handleFieldErrorChange:function(b,a){var c=this;if(b!==c){c.fireEvent("fielderrorchange",c,b,a);c.onFieldErrorChange(b,a)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);b.hasRawContent=true;a.containerEl.setStyle("height","");b.containerElContext=b.getEl("containerEl")},measureContentHeight:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(c,b){var a=this.owner;if(a.labelAlign==="top"&&a.hasVisibleLabel()){b-=a.labelEl.getHeight()}if(a.msgTarget==="under"&&a.hasActiveError()){b-=a.errorWrapEl.getHeight()}b-=a.bodyEl.getPadding("tb");c.containerElContext.setHeight(b,false)},publishInnerWidth:function(c,b){var a=this.owner;if(a.labelAlign!=="top"&&a.hasVisibleLabel()){b-=(a.labelWidth+(a.labelPad||0))}if(a.msgTarget==="side"&&a.hasActiveError()){b-=a.errorWrapEl.getWidth()}b-=a.bodyEl.getPadding("lr");c.containerElContext.setWidth(b,false)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:true,customOverflowEl:"containerEl",childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}" role="presentation">',"{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var a=this;a.initLabelable();a.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);a.initMonitor()},onAdd:function(a){var b=this;if(a.isLabelable&&Ext.isGecko&&b.layout.type==="absolute"&&!b.hideLabel&&b.labelAlign!=="top"){a.x+=(b.labelWidth+b.labelPad)}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(a.isLabelable&&b.combineLabels){a.oldHideLabel=a.hideLabel;a.hideLabel=true}b.updateLabel()},onRemove:function(a,b){var c=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!b){if(a.isLabelable&&c.combineLabels){a.hideLabel=a.oldHideLabel}c.updateLabel()}},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.containerElCls=a.containerElCls;return Ext.applyIf(b,a.getLabelableRenderData())},getFieldLabel:function(){var a=this.fieldLabel||"";if(!a&&this.combineLabels){a=Ext.Array.map(this.query("[isFieldLabelable]"),function(b){return b.getFieldLabel()}).join(this.labelConnector)}return a},getSubTplData:function(){var a=this.initRenderData();Ext.apply(a,this.subTplData);return a},getSubTplMarkup:function(b){var d=this,a=d.getTpl("fieldSubTpl"),c;if(!a.renderContent){d.setupRenderTpl(a)}c=a.apply(d.getSubTplData(b));return c},updateLabel:function(){var b=this,a=b.labelEl;if(a){b.setFieldLabel(b.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var c=this,d=c.getActiveError(),b=Ext.Array.filter(c.query("[isFormField]"),function(e){return e.hasActiveError()}),a=c.getCombinedErrors(b);if(a){c.setActiveErrors(a)}else{c.unsetActiveError()}if(d!==c.getActiveError()){c.updateLayout()}}},getCombinedErrors:function(e){var l=[],c,m=e.length,j,d,k,b,g,h;for(c=0;c<m;c++){j=e[c];d=j.getActiveErrors();b=d.length;for(k=0;k<b;k++){g=d[k];h=j.getFieldLabel();l.push((h?h+": ":"")+g)}}return l},privates:{applyTargetCls:function(b){var a=this.containerElCls;this.containerElCls=a?a+" "+b:b},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:false,_verticalSides:{left:1,right:1},initComponent:function(){var b=this,a=b.vertical;b.dock=b.dock||(a?"left":"top");b.layout=Ext.apply(a?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},b.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(b,c,a){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,b,c,a)},onRemoved:function(a){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,a)},beforeRender:function(){if(!this.ownerCt){this.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(d){var c=this,b,a;if(d!==c.dock){Ext.suspendLayouts();c.clearOrientation();Ext.container.Container.prototype.setDock.call(this,d);c.initOrientation();a=c.vertical;b=c.layout;b.setVertical(a);b.setAlignRoundingMethod(a?"ceil":"floor");Ext.resumeLayouts(true)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var c=this,b=c.dock,a=c.vertical=(b?b in c._verticalSides:c.vertical);c.addClsWithUI([this.vertical?"vertical":"horizontal",c.getDockName()])}}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[Ext.panel,"Bar"],0));(Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{unselectable:"on"},childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="headerRole"> role="{headerRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var d=this,b=d.getRotation(),a,e,c;if(b&&!Ext.isIE8){c=d.el;a=d.lastBox;e=a.x;c.setStyle(d._getVerticalAdjustDirection(),(e+((b===1)?a.width:-a.height))+"px")}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var c=this,a=c.getRotation(),b=c.el;Ext.Component.prototype.onRender.call(this);if(a){b.setVertical(c._rotationAngles[a])}if(Ext.supports.FixedTableWidthBug){b._needsTableWidthFix=true}},applyText:function(a){if(!a){a="&#160;"}return a},beforeRender:function(){var a=this;Ext.Component.prototype.beforeRender.call(this);a.addCls(a._rotationClasses[a.getRotation()]);a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var f=this,c=f.getIcon(),b=f.getIconCls(),e=f.getGlyph(),g=Ext._glyphFontFamily,a=f.getIconAlign(),d;if(typeof e==="string"){d=e.split("@");e=d[0];g=d[1]}return{id:f.id,ui:f.ui,itemCls:f._itemCls,iconUrl:c,iconCls:b,iconWrapCls:f._iconWrapCls,baseIconCls:f._baseIconCls,iconAlignCls:f._iconAlignClasses[a],glyph:e,glyphCls:e?f._glyphCls:"",glyphFontFamily:g}},initRenderData:function(){var b=this,a,c;c=Ext.apply({text:b.getText(),headerRole:b.headerRole,id:b.id,ui:b.ui,itemCls:b._itemCls,textCls:b._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(b._hasIcon()){a=b.getIconAlign();c.iconMarkup=b.getIconMarkup();c.iconBeforeTitle=(a==="top"||a==="left")}return c},onAdded:function(c,g,b){var e=this,a=e.cls||"",f=e._titleSuffix,d=c.baseCls;e.addCls([d+f,d+f+"-"+c.ui]);Ext.Component.prototype.onAdded.call(this,c,g,b)},updateGlyph:function(f,c){f=f||0;var e=this,g=e._glyphCls,b,a,d;e.glyph=f;if(e.rendered){e._syncIconVisibility();b=e.iconEl;if(typeof f==="string"){d=f.split("@");f=d[0];a=d[1]||Ext._glyphFontFamily}if(!f){b.dom.innerHTML="";b.removeCls(g)}else{if(c!=f){b.dom.innerHTML="&#"+f+";";b.addCls(g)}}if(a){b.setStyle("font-family",a)}if(e._didIconStateChange(c,f)){e.updateLayout()}}},updateIcon:function(b,d){b=b||"";var c=this,a;if(c.rendered&&b!=d){c._syncIconVisibility();a=c.iconEl;a.setStyle("background-image",b?"url("+b+")":"");if(c._didIconStateChange(d,b)){c.updateLayout()}}},updateIconAlign:function(f,c){var b=this,e=b.iconWrapEl,a,e,d;if(b.iconWrapEl){a=b.el;d=b._iconAlignClasses;if(c){e.removeCls(d[c])}e.addCls(d[f]);if(f==="top"||f==="left"){a.insertFirst(e)}else{a.appendChild(e)}b.updateLayout()}},updateIconCls:function(b,c){b=b||"";var d=this,a;if(d.rendered&&c!=b){d._syncIconVisibility();a=d.iconEl;if(c){a.removeCls(c)}a.addCls(b);if(d._didIconStateChange(c,b)){d.updateLayout()}}},updateRotation:function(c,a){var e=this,b,d,f;if(e.rendered){d=e.el;f=e._rotationClasses;e.removeCls(f[a]);e.addCls(f[c]);d.setHorizontal();if(c){d.setVertical(e._rotationAngles[c])}d.setStyle({right:"",left:"",top:"",height:"",width:""});e.lastBox=null;e.updateLayout()}},updateText:function(a){if(this.rendered){this.textEl.setHtml(a)}},updateTextAlign:function(d,b){var a=this,c=a._textAlignClasses;if(a.rendered){if(b){a.removeCls(c[b])}a.addCls(c[d]);a.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var e=this,d=e.el,a=e._hasIcon(),f=e.iconWrapEl,c,b;if(a&&!f){b=e.iconAlign;c=(b==="left"||b==="top");d.dom.insertAdjacentHTML(c?"afterbegin":"beforeend",e.getIconMarkup());f=e.iconWrapEl=d[c?"first":"last"]();e.iconEl=f.first()}if(f){f.setDisplayed(a)}}}},0,["title"],["component","box","title"],{component:true,box:true,title:true},["widget.title"],0,[Ext.panel,"Title"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:true,focusable:true,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",ariaRole:"button",childEls:["toolEl"],renderTpl:['<img id="{id}-toolEl" data-ref="toolEl" src="{blank}" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"/>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,cacheHeight:true,cacheWidth:true,initComponent:function(){var a=this;a.type=a.type||a.id;Ext.applyIf(a.renderData,{baseCls:a.baseCls,blank:Ext.BLANK_IMAGE_URL,type:a.type});a.tooltip=a.tooltip||a.qtip;Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a});b=a.tooltip;if(b){a.setTooltip(b)}},tipAttrs:{qtip:"data-qtip"},setTooltip:function(g,d){var e=this,b=e.tooltip,f=e.tooltipType,h=e.id,c=e.el,a;if(b&&Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.unregister(h)}e.tooltip=g;if(d){e.tooltipType=d}if(g){if(Ext.quickTipsActive&&Ext.isObject(g)){Ext.tip.QuickTipManager.register(Ext.apply({target:h},g))}else{if(c){if(d&&f&&d!==f){a=e.tipAttrs[f]||"title";c.dom.removeAttribute(a)}a=e.tipAttrs[d||f]||"title";c.dom.setAttribute(a,g)}}}},setType:function(a){var b=this,c=b.type;b.type=a;if(b.rendered){if(c){b.toolEl.removeCls(b.baseCls+"-"+c)}b.toolEl.addCls(b.baseCls+"-"+a)}else{b.renderData.type=a}return b},onDestroy:function(){var a=this,b=a.keyMap;a.setTooltip(null);if(b){b.destroy();a.keyMap=null}delete a.toolOwner;Ext.Component.prototype.onDestroy.call(this)},privates:{getFocusEl:function(){return this.el},onClick:function(c,b){var a=this;if(a.disabled){return false}a.el.removeCls(a.toolPressedCls+" "+a.toolOverCls);if(a.stopEvent!==false){c.stopEvent()}if(a.handler){Ext.callback(a.handler,a.scope,[c,b,a.ownerCt,a],0,a)}else{if(a.callback){Ext.callback(a.callback,a.scope,[a.toolOwner||a.ownerCt,a,c],0,a)}}a.fireEvent("click",a,c,a.toolOwner||a.ownerCt);return true},onMouseDown:function(){if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{ariaRole:"presentation",xtype:"title",flex:1},merge:function(b,a){if(typeof b=="string"){b={text:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var d=this,c=d.items,b=d.itemPosition,a=[d.headerCls];d.tools=d.tools||[];d.items=c=(c?c.slice():[]);if(b!==undefined){d._userItems=c.slice();d.items=c=[]}d.indicateDragCls=d.headerCls+"-draggable";if(d.indicateDrag){a.push(d.indicateDragCls)}d.addCls(a);d.syncNoBorderCls();Ext.Array.push(c,d.tools);d.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);d.on({dblclick:d.onDblClick,click:d.onClick,element:"el",scope:d})},addTool:function(a){this.add(Ext.ComponentManager.create(a,"tool"))},afterLayout:function(){var b=this,e,a,c,d;if(b.vertical){a=b.frameTR;if(a){e=b.frameBR;c=b.frameTL;d=(b.getWidth()-a.getPadding("r")-((c)?c.getPadding("l"):b.el.getBorderWidth("l")))+"px";e.setStyle("background-position-x",d);a.setStyle("background-position-x",d)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(e,c){var d=this,a,b;e=e||"";if(typeof e==="string"){e={text:e}}if(c){Ext.suspendLayouts();c.setConfig(e);Ext.resumeLayouts(true);e=c}else{e.ui=d.ui;e.headerRole=d.headerRole;b=("rotation" in e);e=Ext.create(e);if(!b&&d.vertical&&d.titleRotation==="default"){e.rotation=1}}return e},applyTitlePosition:function(b){var a=this.items.getCount();if(this._titleInItems){--a}return Math.max(Math.min(b,a),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var b=this,a=b.itemPosition;b.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(a!==undefined){b.insert(a,b._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(b,a){var c=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,b,a);if(b.isTool){c.push(b);c[b.type]=b}},onAdded:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,b,c,a)},onRemoved:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,b,c,a)},setDock:function(c){var b=this,e=b.getTitle(),a=b.getTitleRotation(),d=e.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,c);if(a==="default"){a=(b.vertical?1:0);if(a!==d){e.setRotation(a)}if(b.rendered){b.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(b,a){this.getTitle().setIconAlign(b)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(b,a){if(!a){this.insert(this.getTitlePosition(),b);this._titleInItems=true}this.titleCmp=b},updateTitleAlign:function(b,a){this.getTitle().setTextAlign(b)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){if(a==="default"){a=(this.vertical?1:0)}this.getTitle().setRotation(a)},privates:{fireClickEvent:function(a,c){var b="."+Ext.panel.Tool.prototype.baseCls;if(!c.getTarget(b)){this.fireEvent(a,this,c)}},getFocusEl:function(){return this.el},getFramingInfoCls:function(){var c=this,b=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),a=c.ownerCt;if(!c.expanding&&a&&(a.collapsed||c.isCollapsedExpander)){b+="-"+a.collapsedCls}return b+"-"+c.dock},onClick:function(a){this.fireClickEvent("click",a)},onDblClick:function(a){this.fireClickEvent("dblclick",a)},syncBeforeAfterTitleClasses:function(c){var j=this,h=j.items,f=h.items,b=j.getTitlePosition(),a=f.length,g=h.generation,k=j.syncBeforeAfterGen,m,e,d,l;if(!c&&(k===g)){return}j.syncBeforeAfterGen=g;for(d=0;d<a;++d){l=f[d];m=l.afterTitleCls||(l.afterTitleCls=l.baseCls+"-after-title");e=l.beforeTitleCls||(l.beforeTitleCls=l.baseCls+"-before-title");if(!j.title||d<b){if(k){l.removeCls(m)}l.addCls(e)}else{if(d>b){if(k){l.removeCls(e)}l.addCls(m)}}}},syncNoBorderCls:function(){var b=this,a=this.ownerCt,c=b.headerCls+"-noborder";if(a?(a.border===false&&!a.frame):b.border===false){b.addCls(c)}else{b.removeCls(c)}}}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],0,[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,triggerEvent:"mousedown",b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(e,b,l){if(Ext.isNumber(b)){b={left:b,right:b,top:b,bottom:b}}b=b||this.defaultPadding;var g=Ext.get(this.getEl()).getBox(),m=Ext.get(e),k=m.getScroll(),f,h=m.dom,j,d,a;if(h==document.body){f={x:k.left,y:k.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else{j=m.getXY();f={x:j[0],y:j[1],width:h.clientWidth,height:h.clientHeight}}d=g.y-f.y;a=g.x-f.x;this.resetConstraints();this.setXConstraint(a-(b.left||0),f.width-a-g.width-(b.right||0),this.xTickSize);this.setYConstraint(d-(b.top||0),f.height-d-g.height-(b.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(d,a,b){var c=this;c.el=c.el||Ext.get(d);c.initTarget(d,a,b);Ext.get(c.id).on(c.triggerEvent,c.handleMouseDown,c)},initTarget:function(c,a,b){this.config=b||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof c!=="string"){c=Ext.id(c)}this.id=c;this.addToGroup((a)?a:"default");this.handleElId=c;this.setDragElId(c);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(c,a,d,b){if(!a&&0!==a){this.padding=[c,c,c,c]}else{if(!d&&0!==d){this.padding=[c,a,c,a]}else{this.padding=[c,a,d,b]}}},setInitPosition:function(d,c){var e=this.getEl(),b,a,f;if(!this.DDMInstance.verifyEl(e)){return}b=d||0;a=c||0;f=Ext.fly(e).getXY();this.initPageX=f[0]-b;this.initPageY=f[1]-a;this.lastPageX=f[0];this.lastPageY=f[1];this.setStartPosition(f)},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=true;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){var b=this,a;if(b._domRef){a=Ext.fly(b.id);if(a){a.un(b.triggerEvent,b.handleMouseDown,b)}}b._domRef=null;b.DDMInstance._remove(b,b.autoGroup)},destroy:function(){this.unreg();this.isDestroyed=true},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(c,b){var a=this;if((a.primaryButtonOnly&&c.button!=0)||a.isLocked()){return}a.DDMInstance.refreshCache(a.groups);if(a.hasOuterHandles||a.DDMInstance.isOverTarget(c.getPoint(),a)){if(a.clickValidator(c)){a.setStartPosition();a.b4MouseDown(c);a.onMouseDown(c);a.DDMInstance.handleMouseDown(c,a);a.DDMInstance.stopEvent(c)}}},clickValidator:function(b){var a=b.getTarget();return(this.isValidHandleChild(a)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(a,this.id)))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(b){for(var c=0,a=this.invalidHandleClasses.length;c<a;++c){if(this.invalidHandleClasses[c]==b){delete this.invalidHandleClasses[c]}}},isValidHandleChild:function(d){var c=true,g,b,a;try{g=d.nodeName.toUpperCase()}catch(f){g=d.nodeName}c=c&&!this.invalidHandleTypes[g];c=c&&!this.invalidHandleIds[d.id];for(b=0,a=this.invalidHandleClasses.length;c&&b<a;++b){c=!Ext.fly(d).hasCls(this.invalidHandleClasses[b])}return c},setXTicks:function(d,a){this.xTicks=[];this.xTickSize=a;var c={},b;for(b=this.initPageX;b>=this.minX;b=b-a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}for(b=this.initPageX;b<=this.maxX;b=b+a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,a){this.yTicks=[];this.yTickSize=a;var c={},b;for(b=this.initPageY;b>=this.minY;b=b-a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}for(b=this.initPageY;b<=this.maxY;b=b+a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(a,c,b){this.topConstraint=a;this.bottomConstraint=c;this.minY=this.initPageY-a;this.maxY=this.initPageY+c;if(b){this.setYTicks(this.initPageY,b)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var b=(this.maintainOffset)?this.lastPageX-this.initPageX:0,a=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(b,a)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(g,d){if(!d){return g}else{if(d[0]>=g){return d[0]}else{var b,a,c,f,e;for(b=0,a=d.length;b<a;++b){c=b+1;if(d[c]&&d[c]>=g){f=g-d[b];e=d[c]-g;return(e>f)?d[b]:d[c]}}return d[d.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},scroll:true,autoOffset:function(c,b){var a=c-this.startPageX,d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(b,e,c){var f=this.getTargetCoord(e,c),d=b.dom?b:Ext.fly(b,"_dd"),l=d.getSize(),h=Ext.Element,j,a,k,g;if(!this.deltaSetXY){j=this.cachedViewportSize={width:h.getDocumentWidth(),height:h.getDocumentHeight()};a=[Math.max(0,Math.min(f.x,j.width-l.width)),Math.max(0,Math.min(f.y,j.height-l.height))];d.setXY(a);k=this.getLocalX(d);g=d.getLocalY();this.deltaSetXY=[k-f.x,g-f.y]}else{j=this.cachedViewportSize;this.setLocalXY(d,Math.max(0,Math.min(f.x+this.deltaSetXY[0],j.width-l.width)),Math.max(0,Math.min(f.y+this.deltaSetXY[1],j.height-l.height)))}this.cachePosition(f.x,f.y);this.autoScroll(f.x,f.y,b.offsetHeight,b.offsetWidth);return f},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.fly(this.getEl()).getXY();this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(l,k,e,m){if(this.scroll){var n=Ext.Element.getViewportHeight(),b=Ext.Element.getViewportWidth(),p=this.DDMInstance.getScrollTop(),d=this.DDMInstance.getScrollLeft(),j=e+k,o=m+l,g=(n+p-k-this.deltaY),f=(b+d-l-this.deltaX),c=40,a=(document.all)?80:30;if(j>n&&g<c){window.scrollTo(d,p+a)}if(k<p&&p>0&&k-p<c){window.scrollTo(d,p-a)}if(o>b&&f<c){window.scrollTo(d+a,p)}if(l<d&&d>0&&l-d<c){window.scrollTo(d-a,p)}}},getTargetCoord:function(c,b){var a=c-this.deltaX,d=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}a=this.getTick(a,this.xTicks);d=this.getTick(d,this.yTicks);return{x:a,y:d}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return("DD "+this.id)},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(b,a,c){b.setLocalXY(a,c)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var b=this,a=document.body,d,c;if(!a||!a.firstChild){Ext.defer(function(){b.createFrame()},50);return}d=this.getDragEl();if(!d){d=document.createElement("div");d.id=this.dragElId;d.setAttribute("role","presentation");c=d.style;c.position="absolute";c.visibility="hidden";c.cursor="move";c.border="2px solid #aaa";c.zIndex=999;a.insertBefore(d,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,d){var c=this.getEl(),a=this.getDragEl(),b=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}this.setDragElPos(e,d);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d);this.setDragElPos(a,d)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl(),a=this.getDragEl();a.style.visibility="";this.beforeMove();b.style.visibility="hidden";Ext.dd.DDM.moveToEl(b,a);a.style.visibility="hidden";b.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",constructor:function(a){var b=this;a=a||{};Ext.apply(b,{hideMode:"visibility",hidden:true,floating:true,id:b.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:a.shadow||false,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!=a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(b){var c=this,a="x-dd-drag-proxy ";c.el.replaceCls(a+c.dropAllowed,a+c.dropNotAllowed);c.dropStatus=c.dropNotAllowed;if(b){c.ghost.setHtml("")}},update:function(a){if(typeof a=="string"){this.ghost.setHtml(a)}else{this.ghost.setHtml("");a.style.margin="0";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(a){Ext.Component.prototype.hide.call(this);if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.sync()},repair:function(c,d,a){var b=this;b.callback=d;b.scope=a;if(c&&b.animRepair!==false){b.el.addCls(b.repairCls);b.el.hideUnders(true);b.anim=b.el.animate({duration:b.repairDuration||500,easing:"ease-out",to:{x:c[0],y:c[1]},stopAnimation:true,callback:b.afterRepair,scope:b})}else{b.afterRepair()}},afterRepair:function(){var a=this;a.hide(true);a.el.removeCls(a.repairCls);if(typeof a.callback=="function"){a.callback.call(a.scope||a)}delete a.callback;delete a.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},getDragData:function(a){return this.dragData},onDragEnter:function(c,d){var b=Ext.dd.DragDropManager.getDDById(d),a;this.cachedTarget=b;if(this.beforeDragEnter(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,d)}}},beforeDragEnter:function(b,a,c){return true},onDragOver:function(c,d){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(d),a;if(this.beforeDragOver(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,d)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)!==false){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(c,b,d){var a=this;if(!b){b=c;c=null;d=b.getTarget().id}if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}a.proxy.repair(a.getRepairXY(b,a.dragData),a.afterRepair,a);if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(a,b){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this);Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(a,b){var c=this;c.panel=a;c.id=c.panel.id+"-ddproxy";Ext.apply(c,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;if(a.ghost){if(a.proxy){a.proxy.destroy();delete a.proxy}a.panel.unghost(null,a.moveOnDrag);delete a.ghost}},show:function(){var b=this,a;if(!b.ghost){a=b.panel.getSize();b.panel.el.setVisibilityMode(Ext.Element.DISPLAY);b.ghost=b.panel.ghost();if(b.insertProxy){b.proxy=b.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"});b.proxy.setSize(a)}}},repair:function(b,c,a){this.hide();Ext.callback(c,a||this)},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(b,a){var c=this;c.panel=b;c.dragData={panel:b};c.panelProxy=new Ext.panel.Proxy(b,a);c.proxy=c.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,b.el,a);c.setupEl(b)},setupEl:function(a){var c=this,d=a.header,b=a.body;if(d){c.setHandleElId(d.id);b=d.el}if(b){b.setStyle("cursor","move");c.scroll=false}else{a.on("boxready",c.setupEl,c,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a){return a.el.dom}},endDrag:function(a){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)},onInvalidDrop:function(c,b,d){var a=this;if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var b=this,c,a;Ext.layout.component.Component.prototype.finishRender.call(this);c=b.getRenderTarget();a=b.getDockedItems();b.finishRenderItems(c,a)},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var l=this,a=l.owner,k,p,g=l.lastDockedItems,f=l.borders,b=a.dockedItems.generation,c=l.noBorderClassesSides,m=l.borderWidthProps,e,j,o,n,h,d=l.collapsed;if(l.initializedBorders==b||(a.border&&!a.manageBodyBorders)){return}l.initializedBorders=b;l.collapsed=false;l.lastDockedItems=p=l.getLayoutItems();l.collapsed=d;k={top:[],right:[],bottom:[],left:[]};for(e=0,j=p.length;e<j;e++){o=p[e];n=o.dock;if(o.ignoreBorderManagement){continue}if(!k[n].satisfied){k[n].push(o);k[n].satisfied=true}if(!k.top.satisfied&&n!=="bottom"){k.top.push(o)}if(!k.right.satisfied&&n!=="left"){k.right.push(o)}if(!k.bottom.satisfied&&n!=="top"){k.bottom.push(o)}if(!k.left.satisfied&&n!=="right"){k.left.push(o)}}if(g){for(e=0,j=g.length;e<j;e++){o=g[e];if(!o.isDestroyed&&!o.ignoreBorderManagement&&!a.manageBodyBorders){o.removeCls(l.noBorderClasses)}}}if(f){for(h in f){if(a.manageBodyBorders&&f[h].satisfied){a.setBodyStyle(m[h],"")}}}for(h in k){j=k[h].length;if(!a.manageBodyBorders){for(e=0;e<j;e++){k[h][e].addCls(c[h])}if((!k[h].satisfied&&!a.bodyBorder)||a.bodyBorder===false){a.addBodyCls(c[h])}else{a.removeBodyCls(c[h])}}else{if(k[h].satisfied){a.setBodyStyle(m[h],"1px")}}}l.borders=k},beforeLayoutCycle:function(f){var c=this,b=c.owner,g=c.sizeModels.shrinkWrap,e=b.shrinkWrapDock,d,a;if(b.collapsed){if(b.collapsedVertical()){a=true;f.measureDimensions=1}else{d=true;f.measureDimensions=2}}f.collapsedVert=a;f.collapsedHorz=d;if(a){f.heightModel=g}else{if(d){f.widthModel=g}}e=e===true?3:(e||0);f.shrinkWrapDockHeight=(e&1)&&f.heightModel.shrinkWrap;f.shrinkWrapDockWidth=(e&2)&&f.widthModel.shrinkWrap},beginLayout:function(d){var k=this,c=k.owner,o=k.getLayoutItems(),b=d.context,f=o.length,j=k.lastCollapsedState,l,h,n,a,e,g,m;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);g=c.getCollapsed();if(g!==j&&j!==undefined){if(k.owner.collapsed){d.isCollapsingOrExpanding=1;c.addClsWithUI(c.collapsedCls)}else{d.isCollapsingOrExpanding=2;c.removeClsWithUI(c.collapsedCls);d.lastCollapsedState=k.lastCollapsedState}}k.lastCollapsedState=g;d.dockedItems=l=[];for(h=0;h<f;h++){n=o[h];if(n.rendered){m=n.dock;a=b.getCmp(n);a.dockedAt={x:0,y:0};a.offsets=e=Ext.Element.parseBox(n.offsets||0);a.horizontal=m=="top"||m=="bottom";e.width=e.left+e.right;e.height=e.top+e.bottom;l.push(a)}}d.bodyContext=d.getEl("body")},beginLayoutCycle:function(b){var e=this,k=b.dockedItems,d=k.length,a=e.owner,f=a.frameBody,j=e.lastHeightModel,c,h,g;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(e.owner.manageHeight){if(e.lastBodyDisplay){a.body.dom.style.display=e.lastBodyDisplay=""}}else{if(e.lastBodyDisplay!=="inline-block"){a.body.dom.style.display=e.lastBodyDisplay="inline-block"}if(j&&j.shrinkWrap&&!b.heightModel.shrinkWrap){a.body.dom.style.marginBottom=""}}if(b.widthModel.auto){if(b.widthModel.shrinkWrap){a.el.setWidth(null)}a.body.setWidth(null);if(f){f.setWidth(null)}}if(b.heightModel.auto){a.body.setHeight(null);if(f){f.setHeight(null)}}if(b.collapsedVert){b.setContentHeight(0)}else{if(b.collapsedHorz){b.setContentWidth(0)}}for(c=0;c<d;c++){h=k[c].target;g=h.dock;if(g=="right"){h.setLocalX(0)}else{if(g!="left"){continue}}}},calculate:function(d){var l=this,c=l.measureAutoDimensions(d,d.measureDimensions),b=d.state,k=b.horzDone,e=b.vertDone,f=d.bodyContext,j,a,h,g,m;d.borderInfo||d.getBorderInfo();d.paddingInfo||d.getPaddingInfo();d.frameInfo||d.getFrameInfo();f.borderInfo||f.getBorderInfo();f.paddingInfo||f.getPaddingInfo();if(!d.frameBorder){if(!(j=d.framing)){d.frameBorder=d.borderInfo;d.framePadding=d.paddingInfo}else{d.frameBorder=j.border;d.framePadding=j.padding}}a=!k&&l.createAxis(d,c.contentWidth,d.widthModel,l.horzAxisProps,d.collapsedHorz);h=!e&&l.createAxis(d,c.contentHeight,d.heightModel,l.vertAxisProps,d.collapsedVert);for(g=0,m=d.dockedItems.length;m--;++g){if(a){l.dockChild(d,a,m,g)}if(h){l.dockChild(d,h,m,g)}}if(a&&l.finishAxis(d,a)){b.horzDone=k=a}if(h&&l.finishAxis(d,h)){b.vertDone=e=h}if(k&&e&&l.finishConstraints(d,k,e)){l.finishPositions(d,k,e)}else{l.done=false}},createAxis:function(p,j,e,m,d){var u=this,t=0,b=u.owner,f=b[m.maxSize],c=b[m.minSize]||0,n=m.dockBegin,h=m.dockEnd,r=m.pos,l=m.size,k=f!=null,o=e.shrinkWrap,a,s,q,g;if(o){if(d){g=0}else{a=p.bodyContext;g=j+a.borderInfo[l]}}else{s=p.frameBorder;q=p.framePadding;t=s[n]+q[n];g=p.getProp(l)-(s[h]+q[h])}return{shrinkWrap:e.shrinkWrap,sizeModel:e,initialBegin:t,begin:t,end:g,collapsed:d,horizontal:m.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:g-t,maxChildSize:0,hasMinMaxConstraints:(c||k)&&e.shrinkWrap,minSize:c,maxSize:k?f:1000000000,bodyPosProp:u.owner.manageHeight?r:m.marginBegin,dockBegin:n,dockEnd:h,posProp:r,sizeProp:l,setSize:m.setSize,shrinkWrapDock:p[m.shrinkWrapDock],sizeModelName:m.sizeModel,dockedPixelsEnd:0}},dockChild:function(b,c,l,e){var f=this,a=b.dockedItems[c.shrinkWrap?l:e],h=a.target,j=h.dock,d=c.sizeProp,g,k;if(h.ignoreParentFrame&&b.isCollapsingOrExpanding){a.clearMarginCache()}a.marginInfo||a.getMarginInfo();if(j==c.dockBegin){if(c.shrinkWrap){g=f.dockOutwardBegin(b,a,h,c)}else{g=f.dockInwardBegin(b,a,h,c)}}else{if(j==c.dockEnd){if(c.shrinkWrap){g=f.dockOutwardEnd(b,a,h,c)}else{g=f.dockInwardEnd(b,a,h,c)}}else{if(c.shrinkWrapDock){k=a.getProp(d)+a.marginInfo[d];c.maxChildSize=Math.max(c.maxChildSize,k);g=0}else{g=f.dockStretch(b,a,h,c)}}}a.dockedAt[c.posProp]=g},dockInwardBegin:function(b,a,j,d){var f=d.begin,e=d.sizeProp,c=j.ignoreParentFrame,g,k,h;if(c){d.ignoreFrameBegin=a;h=j.dock;g=b.frameBorder[h];f-=g+b.framePadding[h]}if(!j.overlay){k=a.getProp(e)+a.marginInfo[e];d.begin+=k;if(c){d.begin-=g}}return f},dockInwardEnd:function(e,d,c,b){var h=b.sizeProp,a=d.getProp(h)+d.marginInfo[h],g=b.end-a,f;if(!c.overlay){b.end=g}if(c.ignoreParentFrame){b.ignoreFrameEnd=d;f=e.frameBorder[c.dock];g+=f+e.framePadding[c.dock];b.end+=f}return g},dockOutwardBegin:function(e,d,c,b){var g=b.begin,f=b.sizeProp,a;if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameBegin=d}}if(!c.overlay){a=d.getProp(f)+d.marginInfo[f];g-=a;b.begin=g}return g},dockOutwardEnd:function(e,d,c,b){var g=b.end,f=b.sizeProp,a;a=d.getProp(f)+d.marginInfo[f];if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameEnd=d}}if(!c.overlay){b.end=g+a;b.dockedPixelsEnd+=a}return g},dockStretch:function(c,b,m,d){var n=m.dock,j=d.sizeProp,a=n=="top"||n=="bottom",h=c.frameBorder,e=b.offsets,l=c.framePadding,g=a?"right":"bottom",p=a?"left":"top",k=d.begin+e[p],f,o;if(m.stretch!==false){o=d.end-k-e[g];if(m.ignoreParentFrame){k-=l[p]+h[p];o+=l[j]+h[j]}f=b.marginInfo;o-=f[j];b[d.setSize](o)}return k},finishAxis:function(m,e){if(isNaN(e.maxChildSize)){return false}var d=e.begin,p=e.end-d,g=e.collapsed,w=e.setSize,k=e.dockBegin,u=e.dockEnd,o=m.framePadding,r=m.frameBorder,f=r[k],s=m.framing,n=s&&s[k],b=g?0:o[k],j=e.sizeProp,t=e.ignoreFrameBegin,q=e.ignoreFrameEnd,a=m.bodyContext,l=Math.max(f+b-n,0),c,x,v,h;if(e.shrinkWrap){x=e.initialSize;if(s){v=-d+f+b;c=v-n-l}else{c=-d;v=c+b}if(!g){p+=o[j]}if(t){v-=f;c-=f;t.dockedAt[e.posProp]-=b}else{p+=f}if(g){}else{if(q){q.dockedAt[e.posProp]+=o[u]}else{p+=r[u]}}e.size=p;if(!e.horizontal&&!this.owner.manageHeight){h=false}}else{if(s){v=0;c=d-n-l}else{v=-f;c=d-b-f}x=p}e.delta=v;a[w](x,h);a.setProp(e.bodyPosProp,c);return !isNaN(p)},beforeInvalidateShrinkWrapDock:function(c,b){var a=b.axis.sizeModelName;if(!c[a].constrainedMin){c[a]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(d,a){var b=a.axis,c=a.layout,e;if(d[b.sizeModelName].calculated){e=c.dockStretch(a.ownerContext,d,d.target,b);d.setProp(b.posProp,b.delta+e)}},finishConstraints:function(k,c,p){var s=this,r=s.sizeModels,o=c.shrinkWrap,q=p.shrinkWrap,a=s.owner,h,m,n,f,g,l,b,d,e,j;if(o){l=c.size;b=c.collapsed?0:c.minSize;d=c.maxSize;e=c.maxChildSize;j=Math.max(l,e);if(j>d){g=r.constrainedMax;n=d}else{if(j<b){g=r.constrainedMin;n=b}else{if(l<e){g=r.constrainedDock;a.dockConstrainedWidth=n=e}else{n=l}}}}if(q){l=p.size;b=p.collapsed?0:p.minSize;d=p.maxSize;e=p.maxChildSize;j=Math.max(l,e+l-p.initialSize);if(j>d){f=r.constrainedMax;m=d}else{if(j<b){f=r.constrainedMin;m=b}else{if(l<e){f=r.constrainedDock;a.dockConstrainedHeight=m=e}else{if(!k.collapsedVert&&!a.manageHeight){h=false;k.bodyContext.setProp("margin-bottom",p.dockedPixelsEnd)}m=l}}}}if(g||f){if(g&&f&&g.constrainedMax&&f.constrainedByMin){k.invalidate({widthModel:g});return false}if(!k.widthModel.calculatedFromShrinkWrap&&!k.heightModel.calculatedFromShrinkWrap){k.invalidate({widthModel:g,heightModel:f});return false}}else{s.invalidateAxes(k,c,p)}if(o){k.setWidth(n);if(g){k.widthModel=g}}if(q){k.setHeight(m,h);if(f){k.heightModel=f}}return true},invalidateAxes:function(f,a,k){var o=this.beforeInvalidateShrinkWrapDock,b=this.afterInvalidateShrinkWrapDock,e=a.end-a.begin,r=k.initialSize,c=a.shrinkWrapDock&&a.maxChildSize<=e,l=k.shrinkWrapDock&&k.maxChildSize<=r,p,m,j,d,q,n,g,h;if(c||l){if(l){k.begin=k.initialBegin;k.end=k.begin+k.initialSize}p=f.dockedItems;for(j=0,m=p.length;j<m;++j){d=p[j];n=d.horizontal;g=null;if(c&&n){h=a.sizeProp;q=e;g=a}else{if(l&&!n){h=k.sizeProp;q=r;g=k}}if(g){q-=d.getMarginInfo()[h];if(q!==d.props[h]){d.invalidate({before:o,after:b,axis:g,ownerContext:f,layout:this})}}}}},finishPositions:function(d,a,g){var j=d.dockedItems,c=j.length,f=a.delta,e=g.delta,h,b;for(h=0;h<c;++h){b=j[h];b.setProp("x",f+b.dockedAt.x);b.setProp("y",e+b.dockedAt.y)}},finishedLayout:function(b){var a=this,c=b.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!b.animatePolicy){if(b.isCollapsingOrExpanding===1){c.afterCollapse(false)}else{if(b.isCollapsingOrExpanding===2){c.afterExpand(false)}}}},getAnimatePolicy:function(c){var b=this,a,d;if(c.isCollapsingOrExpanding==1){a=b.lastCollapsedState}else{if(c.isCollapsingOrExpanding==2){a=c.lastCollapsedState}}if(a=="left"||a=="right"){d=b.horizontalCollapsePolicy}else{if(a=="top"||a=="bottom"){d=b.verticalCollapsePolicy}}return d},getDockedItems:function(c,m){var h=this,e=(c==="visual"),j=e?Ext.ComponentQuery.query("[rendered]",h.owner.dockedItems.items):h.owner.dockedItems.items,g=j&&j.length&&c!==false,b,l,k,f,d,a;if(m==null){k=g&&!e?j.slice():j}else{k=[];for(f=0,a=j.length;f<a;++f){l=j[f].dock;d=(l=="top"||l=="left");if(m?d:!d){k.push(j[f])}}g=g&&k.length}if(g){b=(c=c||"render")=="render";Ext.Array.sort(k,function(o,n){var p,q;if(b&&((p=h.owner.dockOrder[o.dock])!==(q=h.owner.dockOrder[n.dock]))){if(!(p+q)){return p-q}}p=h.getItemWeight(o,c);q=h.getItemWeight(n,c);if((p!==undefined)&&(q!==undefined)){return p-q}return 0})}return k||[]},getItemWeight:function(b,a){var c=b.weight||this.owner.defaultDockWeights[b.dock];return c[a]||c},getLayoutItems:function(){var e=this,b,f,d,c,a;if(e.owner.collapsed){a=e.owner.getCollapsedDockedItems()}else{b=e.getDockedItems("visual");f=b.length;a=[];for(c=0;c<f;c++){d=b[c];if(!d.hidden){a.push(d)}}}return a},measureContentWidth:function(a){var b=a.bodyContext;return b.el.getWidth()-b.getBorderInfo().width},measureContentHeight:function(a){var b=a.bodyContext;return b.el.getHeight()-b.getBorderInfo().height},redoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding==1){if(a.reExpander){a.reExpander.el.show()}a.addClsWithUI(a.collapsedCls);c.redo(true)}else{if(c.isCollapsingOrExpanding==2){a.removeClsWithUI(a.collapsedCls);c.bodyContext.redo()}}},renderChildren:function(){var b=this,a=b.getDockedItems(),c=b.getRenderTarget();b.handleItemBorders();b.renderItems(a,c)},renderItems:function(h,g){var k=this,c=h.length,a=0,b=0,o=0,l=k.getRenderTarget().dom.childNodes,m=l.length,f,d,e,n;for(f=0,d=0;f<m;f++){e=l[f];if(e.nodeType===1&&Ext.fly(e).hasCls("x-resizable-handle")){break}for(d=0;d<c;d++){n=h[d];if(n.rendered&&n.el.dom===e){break}}if(d===c){o++}}for(;a<c;a++,b++){n=h[a];if(a===b&&(n.dock==="right"||n.dock==="bottom")){b+=o}if(n&&!n.rendered){k.renderItem(n,g,b)}else{if(!k.isValidParent(n,g,b)){k.moveItem(n,g,b)}}}},undoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding==1){if(a.reExpander){a.reExpander.el.hide()}a.removeClsWithUI(a.collapsedCls);c.undo(true)}else{if(c.isCollapsingOrExpanding==2){a.addClsWithUI(a.collapsedCls);c.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(d,f){var c=this,g=c.sizePolicy,e=c.owner.shrinkWrapDock,b,a;if(d.stretch===false){return g.nostretch}b=d.dock;a=(b=="left"||b=="right");e=e===true?3:(e||0);if(a){g=g.vert;e=e&1}else{g=g.horz;e=e&2}if(e){if(!f){f=c.owner.getSizeModel()}if(f[a?"height":"width"].shrinkWrap){return g.shrinkWrap}}return g.stretch},configureItem:function(a,b){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);a.addCls(this._itemCls);if(!a.ignoreBorderManagement){a.addClsWithUI(this.getDockCls(a.dock))}},getDockCls:function(a){return"docked-"+a},afterRemove:function(a){var b;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);a.removeCls(this._itemCls);if(!a.ignoreBorderManagement){a.removeClsWithUI(this.getDockCls(a.dock))}b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var d=this,f=d.borderCollapseMap,a=d.owner,b=a.baseCls,e=a.ui,c;f=f[b]||(f[b]={});c=f[e];if(!c){b+="-"+e+"-outer-border-";f[e]=c=[0,b+"l",b+"b",b+"bl",b+"r",b+"rl",b+"rb",b+"rbl",b+"t",b+"tl",b+"tb",b+"tbl",b+"tr",b+"trl",b+"trb",b+"trbl"]}return c}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));Ext.define("ExtThemeNeptune.layout.component.Dock",{override:"Ext.layout.component.Dock",noBorderClassTable:[0,"x-noborder-l","x-noborder-b","x-noborder-bl","x-noborder-r","x-noborder-rl","x-noborder-rb","x-noborder-rbl","x-noborder-t","x-noborder-tl","x-noborder-tb","x-noborder-tbl","x-noborder-tr","x-noborder-trl","x-noborder-trb","x-noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var y=this,f=0,z=8,A=4,l=2,e=1,a=y.owner,s=a.bodyBorder,n=a.border,j=y.collapsed,p=y.edgeMasks,k=y.noBorderClassTable,x=a.dockedItems.generation,w,d,v,h,r,m,u,o,g,q,t,c;if(y.initializedBorders===x){return}t=[];c=[];d=y.getBorderCollapseTable();k=y.getBorderClassTable?y.getBorderClassTable():k;y.initializedBorders=x;y.collapsed=false;v=y.getDockedItems();y.collapsed=j;for(r=0,m=v.length;r<m;r++){u=v[r];if(u.ignoreBorderManagement){continue}o=u.dock;q=h=0;t.length=0;c.length=0;if(o!=="bottom"){if(f&z){w=u.border}else{w=n;if(w!==false){h+=z}}if(w===false){q+=z}}if(o!=="left"){if(f&A){w=u.border}else{w=n;if(w!==false){h+=A}}if(w===false){q+=A}}if(o!=="top"){if(f&l){w=u.border}else{w=n;if(w!==false){h+=l}}if(w===false){q+=l}}if(o!=="right"){if(f&e){w=u.border}else{w=n;if(w!==false){h+=e}}if(w===false){q+=e}}if((g=u.lastBorderMask)!==q){u.lastBorderMask=q;if(g){c[0]=k[g]}if(q){t[0]=k[q]}}if((g=u.lastBorderCollapse)!==h){u.lastBorderCollapse=h;if(g){c[c.length]=d[g]}if(h){t[t.length]=d[h]}}if(c.length){u.removeCls(c)}if(t.length){u.addCls(t)}f|=p[o]}q=h=0;t.length=0;c.length=0;if(f&z){w=s}else{w=n;if(w!==false){h+=z}}if(w===false){q+=z}if(f&A){w=s}else{w=n;if(w!==false){h+=A}}if(w===false){q+=A}if(f&l){w=s}else{w=n;if(w!==false){h+=l}}if(w===false){q+=l}if(f&e){w=s}else{w=n;if(w!==false){h+=e}}if(w===false){q+=e}if((g=y.lastBodyBorderMask)!==q){y.lastBodyBorderMask=q;if(g){c[0]=k[g]}if(q){t[0]=k[q]}}if((g=y.lastBodyBorderCollapse)!==h){y.lastBodyBorderCollapse=h;if(g){c[c.length]=d[g]}if(h){t[t.length]=d[h]}}if(c.length){a.removeBodyCls(c)}if(t.length){a.addBodyCls(t)}},onRemove:function(b){var a=b.lastBorderMask;if(!b.isDestroyed&&!b.ignoreBorderManagement&&a){b.lastBorderMask=0;b.removeCls(this.noBorderClassTable[a])}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,b)}});(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function d(h,g,j,f){h[f?f+j:j]=g[j]}function c(g,f,h){delete g[h]}function e(k,j,l,h){var f=h?h+l:l,g=k[f];if(g||k.hasOwnProperty(f)){a(j,l,g)}}function a(g,h,f){if(Ext.isDefined(f)){g[h]=f}else{delete g[h]}}function b(g,m,l,h,j){if(m){if(Ext.isArray(h)){var k,f=h.length;for(k=0;k<f;k++){g(m,l,h[k],j)}}else{g(m,l,h,j)}}}return{data:null,target:null,constructor:function(g,f){this.data={};if(g){this.target=g;if(f){this.capture(f)}}},capture:function(f,j,h){var g=this;b(d,g.data||(g.data={}),j||g.target,f,h)},remove:function(f){b(c,this.data,null,f)},restore:function(g,f,j,h){b(e,this.data,j||this.target,g,h);if(f!==false){this.remove(g)}},restoreAll:function(f,k){var h=this,g=k||this.target,j=h.data,l;f=f!==false;for(l in j){if(j.hasOwnProperty(l)){a(g,l,j[l]);if(f){delete j[l]}}}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(b,g){var f=this,c=0,a,e,d;b=f.prepareItems(b);d=b.length;for(;c<d;c++){e=b[c];e.dock=e.dock||"top";if(e.dock==="left"||e.dock==="right"){f.horizontalDocks++}if(g!==undefined){c+=g;f.dockedItems.insert(c,e)}else{f.dockedItems.add(e)}a=!!e.instancedCmp;delete e.instancedCmp;e.onAdded(f,c,a);delete e.initOwnerCt;if(f.hasListeners.dockedadd){f.fireEvent("dockedadd",f,e,c)}if(f.onDockedAdd!==Ext.emptyFn){f.onDockedAdd(e)}}if(f.rendered&&!f.suspendLayout){f.updateLayout()}return b},destroyDockedItems:function(){var a=this.dockedItems,b;if(a){while((b=a.first())){this.removeDocked(b,true)}}},doRenderDockedItems:function(c,f,g){var e=f.$comp,d=e.componentLayout,b,a;if(d.getDockedItems&&!f.$skipDockedItems){b=d.getDockedItems("render",!g);a=b&&d.getItemsRenderTree(b);if(a){Ext.DomHelper.generateMarkup(a,c)}}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getDockedItems:function(a,c){var b=this.getComponentLayout().getDockedItems("render",c);if(a&&b.length){b=Ext.ComponentQuery.query(a,b)}return b},getDockingRefItems:function(b,e){var a=b&&"*,* *",d=this.getDockedItems(a,true),c;d.push.apply(d,e);c=this.getDockedItems(a,false);d.push.apply(d,c);return d},initDockingItems:function(){var b=this,a=b.dockedItems;if(!a||!a.isMixedCollection){b.dockedItems=new Ext.util.AbstractMixedCollection(false,b.getComponentId);if(a){b.addDocked(a)}}},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(e,b){var d=this,c,a;b=b===true||(b!==false&&d.autoDestroy);if(!d.dockedItems.contains(e)){return e}if(e.dock==="left"||e.dock==="right"){d.horizontalDocks--}c=d.componentLayout;a=c&&d.rendered;if(a){c.onRemove(e)}d.dockedItems.remove(e);e.onRemoved(e.destroying||b);d.onDockedRemove(e);if(b){e.destroy()}else{if(a){c.afterRemove(e)}}if(d.hasListeners.dockedremove){d.fireEvent("dockedremove",d,e)}if(!d.destroying&&!d.suspendLayout){d.updateLayout()}return e},moveDocked:function(b,a){if(this.rendered){Ext.suspendLayouts()}this.removeDocked(b,false);b.dock=a;this.addDocked(b);if(this.rendered){if(b.frame){Ext.getDetachedBody().appendChild(b.el);b.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["body"],renderTpl:["{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyRole"> role="{bodyRole}"<tpl else> role="presentation"</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.addCls(b);return c},addTool:function(e){if(!Ext.isArray(e)){e=[e]}var d=this,g=d.header,a=e.length,f=d.tools,c,b;if(!g||!g.isHeader){g=null;if(!f){d.tools=f=[]}}for(c=0;c<a;c++){b=e[c];b.toolOwner=d;if(g){g.addTool(b)}else{f.push(b)}}d.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(c){var b=this,d=b.collapsible,a=b.collapseTool;b.collapsible=c;if(c&&!d){b.updateCollapseTool();a=b.collapseTool;if(a){a.show()}}else{if(!c&&d){if(a){a.hide()}}}},addUIClsToElement:function(b){var c=this,a=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);c.addBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},afterCollapse:function(b){var a=this,c=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(b){a.removeCls("x-animating-size")}a.setHiddenDocked();a.fireEvent("collapse",a)},afterExpand:function(b){var a=this,c=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(b){a.removeCls("x-animating-size")}a.fireEvent("expand",a);a.fireHierarchyEvent("expand")},beforeDestroy:function(){var a=this;Ext.destroy(a.placeholder,a.ghostPanel,a.dd);this.destroyDockedItems();Ext.container.Container.prototype.beforeDestroy.call(this)},beforeRender:function(){var b=this,a;Ext.container.Container.prototype.beforeRender.call(this);b.initTools();if(!(b.preventHeader||(b.header===false))){b.updateHeader()}if(b.collapsed){if(b.isPlaceHolderCollapse()){if(!b.hidden){b.setHiddenState(true);b.preventCollapseFire=true;b.placeholderCollapse();delete b.preventCollapseFire;a=b.collapsed;b.collapsed=false}}else{b.beginCollapse();b.addClsWithUI(b.collapsedCls)}}if(a){b.collapsed=a}},getMemento:function(a){var b=this;if(a&&typeof a=="string"){a+="Memento";return b[a]||(b[a]=new Ext.util.Memento(b))}},beginCollapse:function(){var e=this,c=e.lastBox,g=e.rendered,b=e.getMemento("collapse"),d=e.getSizeModel(),f=e.header,a;b.capture(["height","minHeight","width","minWidth"]);if(c){b.capture(e.restoreDimension(),c,"last.")}if(e.collapsedVertical()){if(d.width.shrinkWrap){e.width=g?e.getWidth():e.width||e.minWidth||100}delete e.height;e.minHeight=0}else{if(e.collapsedHorizontal()){if(d.height.shrinkWrap){e.height=g?e.getHeight():e.height||e.minHeight||100}delete e.width;e.minWidth=0}}if(e.ownerCt){e.ownerCt.getLayout().beginCollapse(e)}if(!e.isPlaceHolderCollapse()&&f!==false){if(f===(a=e.getReExpander())){f.collapseImmune=true;f.getInherited().collapseImmune=true;f.addClsWithUI(e.getHeaderCollapsedClasses(f));if(f.rendered){f.updateFrame()}}else{if(a.el){a.el.show();a.hidden=false}}}if(e.resizer){e.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var e=this,d=e.lastBox,c=e.getMemento("collapse"),a=e.restoreDimension(),f=e.header,b;if(c){c.restore(["minHeight","minWidth",a]);if(d){c.restore(a,true,d,"last.")}}if(e.ownerCt){e.ownerCt.getLayout().beginExpand(e)}if(!e.isPlaceHolderCollapse()&&f!==false){if(f===(b=e.getReExpander())){delete f.collapseImmune;delete f.getInherited().collapseImmune;f.removeClsWithUI(e.getHeaderCollapsedClasses(f));if(f.rendered){f.expanding=true;f.updateFrame();delete f.expanding}}else{b.hidden=true;b.el.hide()}}if(e.resizer){e.resizer.enable()}},bridgeToolbars:function(){var a=this,f=[],e=a.minButtonWidth,c,b;function d(g,j,h){if(Ext.isArray(g)){g={xtype:"toolbar",items:g}}else{if(!g.xtype){g.xtype="toolbar"}}g.dock=j;if(j=="left"||j=="right"){g.vertical=true}if(h){g.layout=Ext.applyIf(g.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})}return g}if(a.tbar){f.push(d(a.tbar,"top"));a.tbar=null}if(a.bbar){f.push(d(a.bbar,"bottom"));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null}if(a.fbar){c=d(a.fbar,"bottom",true);c.ui="footer";if(e){b=c.defaults;c.defaults=function(j){var k=b||{},h=!j.xtype||j.isButton,g;if(!h){g=Ext.ClassManager.getByAlias("widget."+j.xtype);if(g){h=g.prototype.isButton}}if(h&&!("minWidth" in k)){k=Ext.apply({minWidth:e},k)}return k}}f.push(c);a.fbar=null}if(a.lbar){f.push(d(a.lbar,"left"));a.lbar=null}if(a.rbar){f.push(d(a.rbar,"right"));a.rbar=null}if(a.dockedItems){if(a.dockedItems.isMixedCollection){a.addDocked(f)}else{if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(f)}}else{a.dockedItems=f}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(e,a){var d=this,f=e||d.collapseDirection,b=d.ownerCt,c=d.ownerLayout,g=d.rendered;if(d.isCollapsingOrExpanding){return d}if(arguments.length<2){a=d.animCollapse}if(d.collapsed||d.fireEvent("beforecollapse",d,e,a)===false){return d}if(c&&c.onBeforeComponentCollapse){if(c.onBeforeComponentCollapse(d)===false){return d}}if(g&&b&&d.isPlaceHolderCollapse()){return d.placeholderCollapse(e,a)}d.collapsed=f;if(g){d.beginCollapse()}d.getInherited().collapsed=true;d.fireHierarchyEvent("collapse");if(g){d.doCollapseExpand(1,a)}return d},collapsedHorizontal:function(){var a=this.getCollapsed();return a==="left"||a==="right"},collapsedVertical:function(){var a=this.getCollapsed();return a==="top"||a==="bottom"},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(a){var b=this,d=b.header,c=b.frame&&!b.alwaysFramed;return{xtype:"panel",hidden:false,header:d?{titleAlign:d.getTitleAlign()}:null,ui:c?b.ui.replace(/-framed$/,""):b.ui,id:b.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,floating:{shadow:false},frame:c,alwaysFramed:b.alwaysFramed,overlapHeader:b.overlapHeader,headerPosition:b.getHeaderPosition(),titleRotation:b.getTitleRotation(),baseCls:b.baseCls,getRefOwner:function(){return b.getRefOwner()},cls:b.baseCls+"-ghost "+(a||"")}},createReExpander:function(f,e){var d=this,h=f==="left",c=f==="right",g=h||c,b=d.ownerCt,a=Ext.apply({hideMode:"offsets",title:d.getTitle(),titleAlign:d.getTitleAlign(),vertical:g,textCls:d.headerTextCls,icon:d.getIcon(),iconCls:d.getIconCls(),iconAlign:d.getIconAlign(),glyph:d.getGlyph(),baseCls:d.self.prototype.baseCls+"-header",ui:d.ui,frame:d.frame&&d.frameHeader,ignoreParentFrame:d.frame||d.overlapHeader,ignoreBorderManagement:d.frame||d.ignoreHeaderBorderManagement,indicateDrag:d.draggable,collapseImmune:true,headerRole:d.headerRole,ownerCt:(b&&d.collapseMode==="placeholder")?b:d,ownerLayout:d.componentLayout,margin:d.margin},e);if(d.collapseMode==="mini"){if(g){a.width=1}else{a.height=1}}if(!d.hideCollapseTool){if(h||(c&&d.isPlaceHolderCollapse())){a.titlePosition=1}a.tools=[{xtype:"tool",type:"expand-"+d.getOppositeDirection(f),uiCls:["top"],handler:d.toggleCollapse,scope:d}]}a=new Ext.panel.Header(a);a.addClsWithUI(d.getHeaderCollapsedClasses(a));return a},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(a,b){var d=this,c=d.animCollapse,e=d.ownerLayout;d.animCollapse=b;d.isCollapsingOrExpanding=a;if(b){d.addCls("x-animating-size")}if(e&&!b){e.onContentChange(d)}else{d.updateLayout({isRoot:true})}d.animCollapse=c;return d},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(a){var c=this,b=c.ownerLayout,d=c.rendered;if(c.isCollapsingOrExpanding){return c}if(!arguments.length){a=c.animCollapse}if(!c.collapsed&&!c.floatedFromCollapse){return c}if(c.fireEvent("beforeexpand",c,a)===false){return c}if(b&&b.onBeforeComponentExpand){if(b.onBeforeComponentExpand(c)===false){return c}}delete c.getInherited().collapsed;if(d&&c.isPlaceHolderCollapse()){return c.placeholderExpand(a)}c.restoreHiddenDocked();if(d){c.beginExpand()}c.collapsed=false;if(c.rendered){c.doCollapseExpand(2,a)}return c},findReExpander:function(g){var f=this,h=Ext.Component,e=f.dockedItems.items,a=e.length,b,d;if(f.collapseMode==="mini"){return}switch(g){case h.DIRECTION_TOP:case h.DIRECTION_BOTTOM:for(d=0;d<a;d++){b=e[d];if(!b.hidden){if(b.isHeader&&(!b.dock||b.dock==="top"||b.dock==="bottom")){return b}}}break;case h.DIRECTION_LEFT:case h.DIRECTION_RIGHT:for(d=0;d<a;d++){b=e[d];if(!b.hidden){if(b.isHeader&&(b.dock==="left"||b.dock==="right")){return b}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var g=this,h=g.placeholder,a=h.getSize(),e,f="x-border-region-slide-in",d=g.collapsed,j=g.ownerCt||g,b,c;if(g.isSliding){return}if(g.el.hasCls(f)){g.slideOutFloatedPanel();return}g.isSliding=true;h.el.hide();h.hidden=true;g.el.show();g.setHiddenState(false);g.collapsed=false;j.updateLayout();e=g.getBox(false,true);h.el.show();h.hidden=false;g.el.hide();g.setHiddenState(true);g.collapsed=d;j.updateLayout();g.slideOutTask=g.slideOutTask||new Ext.util.DelayedTask(g.slideOutFloatedPanel,g);if(Ext.supports.Touch){Ext.on("mousedown",c=function(k){if(!k.within(g.el)){Ext.un("mousedown",c);g.slideOutFloatedPanel()}});if(!g.placeholderListener){g.placeholderListener=h.on({resize:g.onPlaceholderResize,scope:g,destroyable:true})}}h.el.on("mouseleave",g.onMouseLeaveFloated,g);g.el.on("mouseleave",g.onMouseLeaveFloated,g);h.el.on("mouseenter",g.onMouseEnterFloated,g);g.el.on("mouseenter",g.onMouseEnterFloated,g);g.el.addCls(f);g.floated=d;if(g.collapseTool){g.collapseTool.el.hide()}switch(g.collapsed){case"top":g.setLocalXY(e.x,e.y+a.height-1);break;case"right":g.setLocalXY(e.x-a.width+1,e.y);break;case"bottom":g.setLocalXY(e.x,e.y-a.height+1);break;case"left":g.setLocalXY(e.x+a.width-1,e.y);break}b=g.convertCollapseDir(g.collapsed);g.floatedFromCollapse=g.collapsed;g.collapsed=false;g.setHiddenState(false);g.el.slideIn(b,{preserveScroll:true,duration:Ext.Number.from(g.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){g.isSliding=false;g.fireEvent("float",g)}}})},onPlaceholderResize:function(e,c,a){var b=this,d=b.getBox(false,true),f=b.placeholder.getBox(false,true);switch(b.floated){case"top":this.width=c;b.setLocalY(f.y+f.height);break;case"right":this.height=a;b.setLocalX(f.x-d.width);break;case"bottom":this.width=c;b.setLocalY(f.y-d.height);break;case"left":this.height=a;b.setLocalX(f.x+f.width);break}this.updateLayout({isRoot:true})},getAnimationProps:function(){var b=this,c=b.animCollapse,a;a=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof c==="number"){a.duration=c}return a},getCollapsed:function(){var a=this;if(a.collapsed===true){return a.collapseDirection}return a.collapsed},getCollapsedDockedItems:function(){var a=this;return a.header===false||a.collapseMode=="placeholder"?a.emptyArray:[a.getReExpander()]},getComponent:function(a){var b=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(b===undefined&&!Ext.isNumber(a)){b=this.getDockedComponent(a)}return b},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(d){var b=this,c=b.collapsedCls,a;a=[c,c+"-"+d.getDockName()];if(b.border&&(!b.frame||(b.frame&&Ext.supports.CSS3BorderRadius))){a.push(c+"-border-"+d.getDockName())}return a},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},getPlaceholder:function(e){var d=this,g=e||d.collapseDirection,c=null,f=d.placeholder,b=d.floatable,a=d.titleCollapse;if(!f){if(b||(d.collapsible&&a)){c={click:{fn:(!a&&b)?d.floatCollapsedPanel:d.toggleCollapse,element:"el",scope:d}}}d.placeholder=f=Ext.widget(d.createReExpander(g,{id:d.id+"-placeholder",listeners:c}))}if(!f.placeholderFor){if(!f.isComponent){d.placeholder=f=d.lookupComponent(f)}Ext.applyIf(f,{margin:d.margin,placeholderFor:d,synthetic:true});f.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+g+"-placeholder",d.collapsedCls])}return f},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({cls:b.bodyCls,style:b.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return a},getReExpander:function(c){var b=this,d=c||b.collapseDirection,a=b.reExpander||b.findReExpander(d);b.expandDirection=b.getOppositeDirection(d);if(!a){b.reExpander=a=b.createReExpander(d,{dock:d,cls:"x-docked "+b.baseCls+"-"+b.ui+"-collapsed",isCollapsedExpander:true});b.dockedItems.insert(0,a)}return a},getRefItems:function(a){var b=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(a,b)},getState:function(){var a=this,c=Ext.container.Container.prototype.getState.call(this)||{},e=a.collapsed,b=a.floated,d;if(b){a.collapsed=b}c=a.addPropertyToState(c,"collapsed");if(b){a.collapsed=e}if(a.getCollapsed()){d=a.getMemento("collapse").data;c=a.addPropertyToState(c,"collapsed",d);if(a.collapsedVertical()){delete c.height;if(d){c=a.addPropertyToState(c,"height",d.height)}}else{delete c.width;if(d){c=a.addPropertyToState(c,"width",d.width)}}}return c},applyState:function(c){var b=this,a={},d;if(c){d=c.collapsed;if(d){a=b.getMemento("collapse");Ext.Object.merge(a.data,d);c.collapsed=true}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(l){var g=this,a=g.ghostPanel,d=g.getBox(),c=g.header,j,e,h,k,f,b;if(!a){g.ghostPanel=a=Ext.widget(g.createGhost(l))}else{a.el.show()}a.setHiddenState(false);a.floatParent=g.floatParent;a.toFront();if(c&&!g.preventHeader){j=a.header;j.suspendLayouts();e=j.query("tool");for(b=e.length;b--;){j.remove(e[b])}j.setTitlePosition(0);a.addTool(g.ghostTools());a.setTitle(g.getTitle());j.setTitlePosition(c.titlePosition);k=g.getIconCls();if(k){a.setIconCls(k)}else{h=g.getIcon();if(h){a.setIcon(h)}else{f=g.getGlyph();if(f){a.setGlyph(f)}}}j.addCls("x-header-ghost");j.resumeLayouts()}a.setPagePosition(d.x,d.y);a.setSize(d.width,d.height);g.el.hide();return a},ghostTools:function(){var e=[],f=this.header,d=f?f.query("tool[hidden=false]"):[],c,a,b;if(d.length){c=0;a=d.length;for(;c<a;c++){b=d[c];e.push({type:b.type})}}else{e=[{type:"placeholder"}]}return e},initBodyBorder:function(){var a=this;if(a.frame&&a.bodyBorder){if(!Ext.isNumber(a.bodyBorder)){a.bodyBorder=1}a.getProtoBody().setStyle("border-width",this.unitizeBox(a.bodyBorder))}},initBodyStyles:function(){var b=this,a=b.getProtoBody();if(b.bodyPadding!==undefined){if(b.layout.managePadding){a.setStyle("padding",0)}else{a.setStyle("padding",this.unitizeBox((b.bodyPadding===true)?5:b.bodyPadding))}}b.initBodyBorder()},initBorderProps:function(){var a=this;if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=false}if(a.frame&&a.border&&(a.bodyBorder===false||a.bodyBorder===0)){a.manageBodyBorders=true}},initComponent:function(){var a=this;if(a.collapsible){a.addStateEvents(["expand","collapse"])}if(a.unstyled){a.setUI("plain")}if(a.frame){a.setUI(a.ui+"-framed")}a.bridgeToolbars();a.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP;a.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);a.initBodyStyles();a.protoBody.writeTo(b);delete a.protoBody;return b},calculateConstrainedPosition:function(e,b,d,a){var f=this,c;if(f.constrainHeader){if(a){if(!f.header.vertical){a=[a[0],f.header.lastBox.height]}else{a=[f.header.lastBox.width,a[1]]}}else{a=[f.header.lastBox.width,f.header.lastBox.height]}c=f.floatParent;e=e||f.constrainTo||(c?c.getTargetEl():null)||f.container||f.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,e,b,d,a)},initTools:function(){var c=this,d=c.tools,b,a;c.tools=[];for(b=d&&d.length;b;){--b;c.tools[b]=a=d[b];a.toolOwner=c}if(c.collapsible&&!(c.hideCollapseTool||c.header===false||c.preventHeader)){c.updateCollapseTool();if(c.collapseFirst){c.tools.unshift(c.collapseTool)}}c.addTools();if(c.pinnable){c.initPinnable()}if(c.closable){c.addClsWithUI("closable");c.addTool({xtype:"tool",type:"close",scope:c,handler:c.close})}if(c.collapseTool&&!c.collapseFirst){c.addTool(c.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode=="placeholder"},isVisible:function(a){var b=this;if(b.collapsed&&b.placeholder){return b.placeholder.isVisible(a)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){Ext.container.Container.prototype.onBoxReady.call(this);if(this.collapsed){this.setHiddenDocked()}},onHide:function(){var b=this,a=b.dd;if(b.floatedFromCollapse){b.slideOutFloatedPanel(true)}if(b.draggable&&a){a.endDrag()}if(b.collapsed&&b.placeholder){b.placeholder.hide()}else{Ext.container.Container.prototype.onHide.apply(this,arguments)}},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(a){this.slideOutTask.delay(500)},onRemoved:function(b){var a=this;if(a.placeholder&&!b){a.ownerCt.remove(a.placeholder,false)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var a=this;if(a.collapsed&&a.isPlaceHolderCollapse()){a.setHiddenState(true);a.placeholderCollapse()}else{Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(f,a){var d=this,c=d.ownerCt,h=f||d.collapseDirection,b="x-border-region-slide-in",g=d.getPlaceholder(h),e;d.isCollapsingOrExpanding=1;d.setHiddenState(true);d.collapsed=h;if(g.rendered){if(g.el.dom.parentNode!==d.el.dom.parentNode){d.el.dom.parentNode.insertBefore(g.el.dom,d.el.dom)}g.hidden=false;g.setHiddenState(false);g.el.show();c.updateLayout()}else{c.insert(c.items.indexOf(d),g)}if(d.rendered){d.el.setVisibilityMode(d.placeholderCollapseHideMode);if(a){d.el.addCls(b);g.el.hide();e=d.convertCollapseDir(h);d.el.slideOut(e,{preserveScroll:true,duration:Ext.Number.from(a,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){d.el.removeCls(b);g.el.show().setStyle("display","none").slideIn(e,{easing:"linear",duration:100,listeners:{afteranimate:function(){g.focus();g.setHiddenState(false);d.isCollapsingOrExpanding=0;d.fireEvent("collapse",d)}}})}}})}else{d.el.hide();g.setHiddenState(false);d.isCollapsingOrExpanding=0;d.fireEvent("collapse",d)}}else{d.isCollapsingOrExpanding=0;if(!d.preventCollapseFire){d.fireEvent("collapse",d)}}return d},placeholderExpand:function(c){var e=this,g=e.collapsed,d="x-border-region-slide-in",f,b,a=e.ownerLayout?e.ownerLayout.centerRegion:null;if(Ext.Component.layoutSuspendCount){c=false}if(e.floatedFromCollapse){b=e.getPosition(true);e.slideOutFloatedPanelBegin();e.slideOutFloatedPanelEnd();e.floated=false}if(c){Ext.suspendLayouts();e.placeholder.hide();e.el.show();e.collapsed=false;e.setHiddenState(false);if(a&&!b){a.hidden=true}Ext.resumeLayouts(true);a.hidden=false;e.el.addCls(d);e.isCollapsingOrExpanding=2;if(b){f=e.getXY();e.setLocalXY(b[0],b[1]);e.setXY([f[0],f[1]],{duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){e.el.removeCls(d);e.isCollapsingOrExpanding=0;e.fireEvent("expand",e)}}})}else{e.el.hide();e.placeholder.el.show();e.placeholder.hidden=false;e.setHiddenState(false);e.el.slideIn(e.convertCollapseDir(g),{preserveScroll:true,duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){e.el.removeCls(d);e.placeholder.hide();e.updateLayout();e.isCollapsingOrExpanding=0;e.fireEvent("expand",e)}}})}}else{e.floated=e.collapsed=false;e.el.removeCls(d);Ext.suspendLayouts();e.placeholder.hide();e.show();Ext.resumeLayouts(true);e.fireEvent("expand",e)}return e},removeBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.removeCls(b);return c},removeUIClsFromElement:function(b){var c=this,a=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);c.removeBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},restoreDimension:function(){var a=this.collapseDirection;return(a==="top"||a==="bottom")?"height":"width"},restoreHiddenDocked:function(){var a=this.hiddenOnCollapse;a.setStyle("visibility","");a.clear()},setBodyStyle:function(b,d){var c=this,a=c.rendered?c.body:c.getProtoBody();if(Ext.isFunction(b)){b=b()}if(arguments.length==1){if(Ext.isString(b)){b=Ext.Element.parseStyles(b)}a.setStyle(b)}else{a.setStyle(b,d)}return c},setBorder:function(a,c){if(c){return}var b=this,d=b.header;if(!a){a=0}else{if(a===true){a="1px"}else{a=b.unitizeBox(a)}}if(d){if(d.isHeader){d.setBorder(a)}else{d.border=a}}if(b.rendered&&b.bodyBorder!==false){b.body.setStyle("border-width",a)}b.updateLayout();b.border=a},setCollapsed:function(a){this[a?"collapse":"expand"]()},setGlyph:function(c){var b=this,a=b.glyph,e=b.header,d=b.placeholder;if(c!==a){b.glyph=c;if(e){if(e.isHeader){e.setGlyph(c)}else{e.glyph=c}}else{if(b.rendered){b.updateHeader()}}if(d&&d.setGlyph){d.setGlyph(c)}b.fireEvent("glyphchange",b,c,a)}},setIcon:function(a){var b=this,c=b.icon,e=b.header,d=b.placeholder;if(a!==c){b.icon=a;if(e){if(e.isHeader){e.setIcon(a)}else{e.icon=a}}else{if(b.rendered){b.updateHeader()}}if(d&&d.setIcon){d.setIcon(a)}b.fireEvent("iconchange",b,a,c)}},setIconCls:function(b){var c=this,a=c.iconCls,e=c.header,d=c.placeholder;if(b!==a){c.iconCls=b;if(e){if(e.isHeader){e.setIconCls(b)}else{e.iconCls=b}}else{if(c.rendered){c.updateHeader()}}if(d&&d.setIconCls){d.setIconCls(b)}c.fireEvent("iconclschange",c,b,a)}},setTitle:function(e){var c=this,b=c.title,f=c.header,a=c.reExpander,d=c.placeholder;if(e!==b){c.title=e;if(f){if(f.isHeader){f.setTitle(e)}}else{if(c.rendered){c.updateHeader()}}if(a){a.setTitle(e)}if(d&&d.setTitle){d.setTitle(e)}c.fireEvent("titlechange",c,e,b)}},setHiddenDocked:function(){var g=this,d=g.hiddenOnCollapse,c=g.getDockedItems(),a=c.length,e=0,f,b;if(g.header!==false){b=g.getReExpander()}d.add(g.body);for(;e<a;e++){f=c[e];if(f&&f!==b&&f.el){d.add(f.el)}}d.setStyle("visibility","hidden")},setUI:function(b){var a=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(a.header&&a.header.rendered){a.header.setUI(b)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var b=this,a=b.collapseTool;if(!a&&b.collapsible){b.collapseDirection=b.collapseDirection||b.getHeaderPosition()||"top";b.collapseTool=b.expandTool=a=Ext.widget({xtype:"tool",handler:b.toggleCollapse,scope:b})}if(a){if(b.collapsed&&!b.isPlaceHolderCollapse()){a.setType("expand-"+b.getOppositeDirection(b.collapseDirection))}else{a.setType("collapse-"+b.collapseDirection)}}},updateHeaderPosition:function(a){var b=this.header;if(b&&b.isHeader){b.setDock(a)}},updateIconAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setIconAlign(b)}},updateTitleAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setTitleAlign(b)}},updateTitleRotation:function(a){var b=this.header;if(b&&b.isHeader){b.setTitleRotation(a)}},unghost:function(c,a,b){var e=this,d=e.ghostPanel;if(!d){return}if(c!==false){e.el.show();if(a!==false){e.setPagePosition(d.getXY());if(e.hideMode==="offsets"){delete e.el.hideModeStyles}}if(b){e.focus(false,10)}}d.el.hide();d.setHiddenState(true)},updateHeader:function(a){var g=this,d=g.header,k=g.getTitle(),f=g.tools,j=g.getIcon(),h=g.getGlyph(),l=g.getIconCls(),c=h||j||l,e=g.getHeaderPosition(),b=e==="left"||e==="right";if(Ext.isObject(d)||(d!==false&&(a||(k||c)||(f&&f.length)||(g.collapsible&&!g.titleCollapse)))){if(d&&d.isHeader){d.show()}else{d=g.header=Ext.widget(Ext.merge({xtype:"header",title:k,titleAlign:g.getTitleAlign(),vertical:b,dock:g.getHeaderPosition()||"top",titleRotation:g.getTitleRotation(),textCls:g.headerTextCls,iconCls:l,iconAlign:g.getIconAlign(),icon:j,glyph:h,baseCls:g.baseCls+"-header",tools:f,ui:g.ui,id:g.id+"_header",overCls:g.headerOverCls,indicateDrag:g.draggable,frame:(g.frame||g.alwaysFramed)&&g.frameHeader,ignoreParentFrame:g.frame||g.overlapHeader,ignoreBorderManagement:g.frame||g.ignoreHeaderBorderManagement,headerRole:g.headerRole,ownerCt:g,synthetic:true,listeners:g.collapsible&&g.titleCollapse?{click:g.toggleCollapse,scope:g}:null},g.header));g.addDocked(d,0)}}else{if(d){d.hide()}}},privates:{addUIToElement:function(){var a=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);a.addBodyCls(a.baseCls+"-body-"+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getFocusEl:function(){return this.el},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;if(a.simpleDrag){a.initSimpleDraggable()}else{a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)}},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var c=this,b,a;if(!c.header){c.updateHeader(true)}if(c.header){b=Ext.applyIf({el:c.el,delegate:"#"+c.header.id},c.draggable);if(c.constrain||c.constrainHeader){b.constrain=c.constrain;b.constrainDelegate=c.constrainHeader;b.constrainTo=c.constrainTo||c.container}a=c.dd=new Ext.util.ComponentDragger(c,b);c.relayEvents(a,["dragstart","drag","dragend"]);if(c.maximized){a.disable()}}},removeUIFromElement:function(){var a=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);a.removeBodyCls(a.baseCls+"-body-"+a.ui)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(a){var b=this,d=b.el,c;if(b.isSliding||b.isDestroyed){return}b.isSliding=true;b.floated=false;b.slideOutFloatedPanelBegin();if(typeof b.collapsed=="string"){c=b.convertCollapseDir(b.collapsed)}d.slideOut(c,{preserveScroll:true,duration:Ext.Number.from(b.animCollapse,Ext.fx.Anim.prototype.duration),autoEnd:a===true,listeners:{afteranimate:function(){b.slideOutFloatedPanelEnd();b.el.removeCls("x-border-region-slide-in")}}})},slideOutFloatedPanelBegin:function(){var b=this,c=b.placeholder.el,a=b.el;b.collapsed=b.floatedFromCollapse;b.setHiddenState(true);b.floatedFromCollapse=null;c.un("mouseleave",b.onMouseLeaveFloated,b);a.un("mouseleave",b.onMouseLeaveFloated,b);c.un("mouseenter",b.onMouseEnterFloated,b);a.un("mouseenter",b.onMouseEnterFloated,b)},slideOutFloatedPanelEnd:function(a){var b=this;if(b.collapseTool){b.collapseTool.el.show()}b.slideOutTask.cancel();b.isSliding=false;if(!a){b.fireEvent("unfloat",b)}}}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var a=this.prototype;a.animCollapse=Ext.enableFx;a.placeholderCollapseHideMode=Ext.Element.VISIBILITY}));Ext.define("ExtThemeNeptune.panel.Panel",{override:"Ext.panel.Panel",border:false,bodyBorder:false,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==true){arguments.callee.$previous.call(this)}}});(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,autoRender:true,hidden:true,baseCls:"x-tip",floating:{shadow:true,shim:true},focusOnToFront:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow,constrain:a.constrainPosition},a.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(a)}},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1000,ariaRole:"tooltip",initComponent:function(){var a=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(b,a){var c=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);c.anchorCls="x-tip-anchor-"+c.getAnchorPosition();c.anchorEl=c.el.createChild({role:"presentation",cls:"x-tip-anchor "+c.anchorCls})},setTarget:function(d){var b=this,a=Ext.get(d),c;if(b.target){c=Ext.get(b.target);if(Ext.supports.Touch){b.mun(c,"tap",b.onTargetOver,b)}else{b.mun(c,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}b.target=a;if(a){if(Ext.supports.Touch){b.mon(a,{tap:b.onTargetOver,scope:b})}else{b.mon(a,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}if(b.anchor){b.anchorTarget=b.target}},onMouseMove:function(d){var b=this,a,c;if(!b.target||b.target.contains(d.target)){a=b.delegate?d.getTarget(b.delegate):b.triggerElement=true;if(a){b.targetXY=d.getXY();if(a===b.triggerElement){if(!b.hidden&&b.trackMouse){c=b.getTargetXY();if(b.constrainPosition){c=b.el.adjustForConstraints(c,b.el.parent())}b.setPagePosition(c)}}else{b.hide();b.lastActive=new Date(0);b.onTargetOver(d)}}else{if((!b.closable&&b.isVisible())&&b.autoHide!==false){b.delayHide()}}}},getTargetXY:function(){var j=this,d,c,n,a,h,l,e,m,k,b,g,f;if(j.delegate){j.anchorTarget=j.triggerElement}if(j.anchor){j.targetCounter++;c=j.getOffsets();n=(j.anchorToTarget&&!j.trackMouse)?j.getAlignToXY(j.anchorTarget,j.getAnchorAlign()):j.targetXY;a=Ext.Element.getViewportWidth()-5;h=Ext.Element.getViewportHeight()-5;l=document.documentElement;e=document.body;m=(l.scrollLeft||e.scrollLeft||0)+5;k=(l.scrollTop||e.scrollTop||0)+5;b=[n[0]+c[0],n[1]+c[1]];g=j.getSize();f=j.constrainPosition;j.anchorEl.removeCls(j.anchorCls);if(j.targetCounter<2&&f){if(b[0]<m){if(j.anchorToTarget){j.defaultAlign="l-r";if(j.mouseOffset){j.mouseOffset[0]*=-1}}j.anchor="left";return j.getTargetXY()}if(b[0]+g.width>a){if(j.anchorToTarget){j.defaultAlign="r-l";if(j.mouseOffset){j.mouseOffset[0]*=-1}}j.anchor="right";return j.getTargetXY()}if(b[1]<k){if(j.anchorToTarget){j.defaultAlign="t-b";if(j.mouseOffset){j.mouseOffset[1]*=-1}}j.anchor="top";return j.getTargetXY()}if(b[1]+g.height>h){if(j.anchorToTarget){j.defaultAlign="b-t";if(j.mouseOffset){j.mouseOffset[1]*=-1}}j.anchor="bottom";return j.getTargetXY()}}j.anchorCls="x-tip-anchor-"+j.getAnchorPosition();j.anchorEl.addCls(j.anchorCls);j.targetCounter=0;return b}else{d=j.getMouseOffset();return(j.targetXY)?[j.targetXY[0]+d[0],j.targetXY[1]+d[1]]:d}},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide();a.el.setOpacity("")}})},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c=this,d,b,a=c.getAnchorPosition().charAt(0);if(c.anchorToTarget&&!c.trackMouse){switch(a){case"t":b=[0,9];break;case"b":b=[0,-13];break;case"r":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case"t":b=[-15-c.anchorOffset,30];break;case"b":b=[-19-c.anchorOffset,-13-c.el.dom.offsetHeight];break;case"r":b=[-15-c.el.dom.offsetWidth,-13-c.anchorOffset];break;default:b=[25,-13-c.anchorOffset];break}}d=c.getMouseOffset();b[0]+=d[0];b[1]+=d[1];return b},onTargetOver:function(d){var c=this,b=c.delegate,a;if(c.disabled||d.within(c.target.dom,true)){return}a=b?d.getTarget(b):true;if(a){c.triggerElement=a;c.triggerEvent=d;c.clearTimer("hide");c.targetXY=d.getXY();c.delayShow()}},delayShow:function(c){var a=this,b=a.el&&(c===false||!a.trackMouse)&&a.getTargetXY();if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.showFromDelay,a.showDelay,a,[b])}}else{if(!a.hidden&&a.autoHide!==false){a.show(b)}}},showFromDelay:function(a){this.fromDelayShow=true;this.show(a);delete this.fromDelayShow},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this);delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(d){var b=this,a=b.triggerElement,c=a===true?b.target:a;if(b.disabled||!a||d.within(c,true)){return}if(b.showTimer){b.clearTimer("show");b.triggerElement=null}if(b.autoHide!==false){b.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);delete a.triggerElement},show:function(b){var a=this;Ext.tip.Tip.prototype.show.call(this);if(this.hidden===false){if(a.anchor){a.anchor=a.origAnchor}if(!a.calledFromShowAt){a.showAt(b||a.getTargetXY())}if(a.anchor){a.syncAnchor();a.anchorEl.show()}else{a.anchorEl.hide()}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();a.calledFromShowAt=true;if(!a.isVisible()){Ext.tip.Tip.prototype.showAt.apply(this,arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true);a.el.sync(true);if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}if(a.anchor){a.syncAnchor();if(!a.anchorEl.isVisible()){a.anchorEl.show()}}else{a.anchorEl.hide()}}delete a.calledFromShowAt},syncAnchor:function(){var c=this,a,b,d;switch(c.tipAnchor.charAt(0)){case"t":a="b";b="tl";d=[20+c.anchorOffset,1];break;case"r":a="l";b="tr";d=[-1,12+c.anchorOffset];break;case"b":a="t";b="bl";d=[20+c.anchorOffset,-1];break;default:a="r";b="tl";d=[1,12+c.anchorOffset];break}c.anchorEl.alignTo(c.el,a+"-"+b,d);c.anchorEl.setStyle("z-index",parseInt(c.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},setPagePosition:function(a,c){var b=this;Ext.tip.Tip.prototype.setPagePosition.apply(this,arguments);if(b.anchor){b.syncAnchor()}},_timerNames:{},clearTimer:function(a){var b=this,d=b._timerNames,c=d[a]||(d[a]=a+"Timer"),e=b[c];if(e){clearTimeout(e);b[c]=null}},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;Ext.tip.Tip.prototype.onShow.call(this);a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;Ext.tip.Tip.prototype.onHide.call(this);a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.tip.Tip.prototype.onDestroy.call(this)}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},shrinkWrapDock:true,initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(a){this.tagConfig=Ext.apply({},a);delete this.tagConfig.attr},register:function(c){var g=Ext.isArray(c)?c:arguments,d=0,a=g.length,f,b,e;for(;d<a;d++){c=g[d];f=c.target;if(f){if(Ext.isArray(f)){for(b=0,e=f.length;b<e;b++){this.targets[Ext.id(f[b])]=c}}else{this.targets[Ext.id(f)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom;if(b.isVisible()){if(c&&c.el===a){b.hide()}}else{if(c&&c.el===a){b.clearTimer("show")}}},getTipCfg:function(e,d){var c=e.title,b,a,f;if(this.interceptTitles&&c&&Ext.isString(c)){e.qtip=c;e.removeAttribute("title");if(d){d.preventDefault()}return{text:c}}else{b=this.tagConfig;a=b.attr||(b.attr=b.namespace+b.attribute);e=Ext.fly(e).findParent(function(g){return(f=g.getAttribute(a))});if(e){return{target:e,text:f}}}},onTargetOver:function(a){this.doTargetOver(a.getTarget(this.delegate),null,a)},doTargetOver:function(j,q,b){var k=this,a,e,f,c,h,l,d,n,g,p,m,o;if(k.disabled){return}if(typeof j==="string"){j=Ext.getDom(j)}k.targetXY=q||(b?b.getXY():Ext.fly(j).getXY());if(!j||j.nodeType!==1||j==document.documentElement||j==document.body){return}if(k.activeTarget&&((j===k.activeTarget.el)||Ext.fly(k.activeTarget.el).contains(j))){if(k.targetTextEmpty()){k.onShowVeto();delete k.activeTarget}else{k.clearTimer("hide");k.show()}return}if(j){g=k.targets;for(o in g){if(g.hasOwnProperty(o)){m=g[o];p=Ext.fly(m.target);if(p&&(p.dom===j||p.contains(j))){c=p.dom;break}}}if(c){k.activeTarget=k.targets[c.id];k.activeTarget.el=j;k.anchor=k.activeTarget.anchor;if(k.anchor){k.anchorTarget=j}a=parseInt(k.activeTarget.showDelay,10);if(a){f=k.showDelay;k.showDelay=a}k.delayShow();if(a){k.showDelay=f}if(!(e=k.activeTarget.hideAction)){delete k.hideAction}else{k.hideAction=e}return}}c=Ext.fly(j,"_quicktip-target");h=k.tagConfig;l=h.namespace;d=k.getTipCfg(j,b);if(d){if(d.target){j=d.target;c=Ext.fly(j,"_quicktip-target")}n=c.getAttribute(l+h.hide);k.activeTarget={el:j,text:d.text,width:+c.getAttribute(l+h.width)||null,autoHide:n!="user"&&n!=="false",title:c.getAttribute(l+h.title),cls:c.getAttribute(l+h.cls),align:c.getAttribute(l+h.align),showDelay:parseInt(c.getAttribute(l+h.showDelay)||0,10),hideAction:c.getAttribute(l+h.hideAction),anchorTarget:c.getAttribute(l+h.anchorTarget)};if(!k.initialConfig.hasOwnProperty("anchor")){k.anchor=c.getAttribute(l+h.anchor)}if(k.anchor&&!k.initialConfig.hasOwnProperty("anchorTarget")){k.anchorTarget=k.activeTarget.anchorTarget||j}a=parseInt(k.activeTarget.showDelay,10);if(a){f=k.showDelay;k.showDelay=a}k.delayShow();if(a){k.showDelay=f}}},onTargetOut:function(f){var c=this,d=c.activeTarget,a,b;if(d&&f.within(c.activeTarget.el)&&!c.getTipCfg(f.getTarget(),f)){return}c.clearTimer("show");delete c.activeTarget;if(c.autoHide!==false){a=d&&parseInt(d.hideDelay,10);if(a){b=c.hideDelay;c.hideDelay=a}c.delayHide();if(a){c.hideDelay=b}}},targetTextEmpty:function(){var c=this,d=c.activeTarget,a=c.tagConfig,b,e;if(d){b=d.el;if(b){e=b.getAttribute(a.namespace+a.attribute);if(!e&&!c.targets[Ext.id(d.target)]){return true}}}return false},show:function(){var b=this,a=b.fromDelayShow;if(a&&b.targetTextEmpty()){b.onShowVeto();delete b.activeTarget;return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(e){var c=this,d=c.activeTarget,f=c.header,b,a;if(d){if(!c.rendered){c.render(Ext.getBody());c.activeTarget=d}c.suspendLayouts();if(d.title){c.setTitle(d.title);f.show()}else{if(f){f.hide()}}c.update(d.text);c.autoHide=d.autoHide;b=d.dismissDelay;c.dismissDelay=Ext.isNumber(b)?b:c.dismissDelay;if(d.mouseOffset){e[0]+=d.mouseOffset[0];e[1]+=d.mouseOffset[1]}a=c.lastCls;if(a){c.removeCls(a);delete c.lastCls}a=d.cls;if(a){c.addCls(a);c.lastCls=a}c.setWidth(d.width);if(c.anchor){c.constrainPosition=false}else{if(d.align){e=c.getAlignToXY(d.el,d.align);c.constrainPosition=false}else{c.constrainPosition=true}}c.resumeLayouts(true)}Ext.tip.ToolTip.prototype.showAt.call(this,e)},hide:function(){delete this.activeTarget;Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(e,b){var d=this;if(!d.tip){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTipManager.init(e,b)});return false}var a=Ext.apply({disabled:d.disabled,id:"ext-quicktips-tip"},b),c=a.className,f=a.xtype;if(c){delete a.className}else{if(f){c="widget."+f;delete a.xtype}}if(e!==false){a.renderTo=document.body}d.tip=Ext.create(c||"Ext.tip.QuickTip",a);Ext.quickTipsActive=true}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.disable()}},ddEnable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.enable()}},enable:function(){var a=this,b=a.tip;if(b){b.enable()}a.disabled=false},disable:function(){var a=this,b=a.tip;if(b){b.disable()}a.disabled=true},isEnabled:function(){var a=this.tip;return a!==undefined&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.picker.Color",Ext.Component,{alternateClassName:"Ext.ColorPalette",focusable:true,componentCls:"x-color-picker",selectedCls:"x-color-picker-selected",itemCls:"x-color-picker-item",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>',"</a>","</tpl>"],initComponent:function(){var a=this;Ext.Component.prototype.initComponent.apply(this,arguments);if(a.handler){a.on("select",a.handler,a.scope,true)}},initRenderData:function(){var a=this;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{itemCls:a.itemCls,colors:a.colors})},onRender:function(){var b=this,a=b.clickEvent;Ext.Component.prototype.onRender.apply(this,arguments);b.mon(b.el,a,b.handleClick,b,{delegate:"a"});if(a!=="click"){b.mon(b.el,"click",Ext.emptyFn,b,{delegate:"a",stopEvent:true})}},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);if(a.value){b=a.value;a.value=null;a.select(b,true)}},handleClick:function(c){var b=this,a;c.stopEvent();if(!b.disabled){a=c.currentTarget.className.match(b.colorRe)[1];b.select(a.toUpperCase())}},select:function(b,a){var d=this,f=d.selectedCls,e=d.value,c;b=b.replace("#","");if(!d.rendered){d.value=b;return}if(b!=e||d.allowReselect){c=d.el;if(d.value){c.down("a.color-"+e).removeCls(f)}c.down("a.color-"+b).addCls(f);d.value=b;if(a!==true){d.fireEvent("select",d,b)}}},clear:function(){var b=this,c=b.value,a;if(c&&b.rendered){a=b.el.down("a.color-"+c);a.removeCls(b.selectedCls)}b.value=null},getValue:function(){return this.value||null}},0,["colorpicker"],["component","box","colorpicker"],{component:true,box:true,colorpicker:true},["widget.colorpicker"],0,[Ext.picker,"Color",Ext,"ColorPalette"],0));(Ext.cmd.derive("Ext.layout.component.field.HtmlEditor",Ext.layout.component.field.FieldContainer,{type:"htmleditor",naturalHeight:150,naturalWidth:300,beginLayout:function(b){var a=this.owner,c;if(Ext.isGecko){c=a.textareaEl.dom;this.lastValue=c.value;c.value=""}Ext.layout.component.field.FieldContainer.prototype.beginLayout.apply(this,arguments);b.toolbarContext=b.context.getCmp(a.toolbar);b.inputCmpContext=b.context.getCmp(a.inputCmp);b.bodyCellContext=b.getEl("bodyEl");b.textAreaContext=b.getEl("textareaEl");b.iframeContext=b.getEl("iframeEl")},beginLayoutCycle:function(g){var f=this,c=g.widthModel,b=g.heightModel,a=f.owner,e=a.iframeEl,d=a.textareaEl;Ext.layout.component.field.FieldContainer.prototype.beginLayoutCycle.apply(this,arguments);if(c.shrinkWrap){e.setStyle("width","");d.setStyle("width","")}else{if(c.natural){g.bodyCellContext.setWidth(f.naturalWidth)}}if(b.natural||b.shrinkWrap){e.setHeight(f.naturalHeight);d.setHeight(f.naturalHeight)}},finishedLayout:function(){var a=this.owner;Ext.layout.component.field.FieldContainer.prototype.finishedLayout.apply(this,arguments);if(Ext.isGecko){a.textareaEl.dom.value=this.lastValue}}},0,0,0,0,["layout.htmleditor"],0,[Ext.layout.component.field,"HtmlEditor"],0));(Ext.cmd.derive("Ext.form.field.HtmlEditor",Ext.form.FieldContainer,{alternateClassName:"Ext.form.HtmlEditor",focusable:true,componentLayout:"htmleditor",textareaCls:"x-htmleditor-textarea",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:true}],stretchInputElFixed:true,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:Ext.isOpera?"&#160;":"&#8203;",extraFieldBodyCls:"x-html-editor-wrap",defaultButtonUI:"default-toolbar",initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,containerElCls:"x-html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,initComponent:function(){var a=this;a.items=[a.createToolbar(),a.createInputCmp()];a.layout={type:"vbox",align:"stretch"};Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments);a.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var a=this,c=a.id+"-inputCmp",b={id:c,name:a.name,textareaCls:a.textareaCls+" x-hidden",value:a.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:"x-htmleditor-iframe"};a.getInsertionRenderData(b,a.subTplInsertions);return{flex:1,xtype:"component",tpl:a.getTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:c,cls:"x-html-editor-input",data:b}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var g=this,b=[],e,a=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),d="x-",h,f;function c(l,j,k){return{itemId:l,cls:d+"btn-icon",iconCls:d+"edit-"+l,enableToggle:j!==false,scope:g,handler:k||g.relayBtnCmd,clickEvent:"mousedown",tooltip:a?g.buttonTips[l]||f:f,overflowText:g.buttonTips[l].title||f,tabIndex:-1}}if(g.enableFont&&!Ext.isSafari2){h=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+d+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){g.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var j=this.selectEl;if(j){j.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var j=this.selectEl;if(j){j.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){g.win.focus();g.relayCmd("fontName",g.fontSelect.dom.value);g.deferFocus()},element:"selectEl"}});b.push(h,"-")}if(g.enableFormat){b.push(c("bold"),c("italic"),c("underline"))}if(g.enableFontSize){b.push("-",c("increasefontsize",false,g.adjustFont),c("decreasefontsize",false,g.adjustFont))}if(g.enableColors){b.push("-",{itemId:"forecolor",cls:d+"btn-icon",iconCls:d+"edit-forecolor",overflowText:g.buttonTips.forecolor.title,tooltip:a?g.buttonTips.forecolor||f:f,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(k,j){g.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+j:j);this.up("menu").hide()}}]})},{itemId:"backcolor",cls:d+"btn-icon",iconCls:d+"edit-backcolor",overflowText:g.buttonTips.backcolor.title,tooltip:a?g.buttonTips.backcolor||f:f,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(k,j){if(Ext.isGecko){g.execCmd("useCSS",false);g.execCmd("hilitecolor","#"+j);g.execCmd("useCSS",true);g.deferFocus()}else{g.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+j:j)}this.up("menu").hide()}}]})})}if(g.enableAlignments){b.push("-",c("justifyleft"),c("justifycenter"),c("justifyright"))}if(!Ext.isSafari2){if(g.enableLinks){b.push("-",c("createlink",false,g.createLink))}if(g.enableLists){b.push("-",c("insertorderedlist"),c("insertunorderedlist"))}if(g.enableSourceEdit){b.push("-",c("sourceedit",true,function(){g.toggleSourceEdit(!g.sourceEditMode)}))}}for(e=0;e<b.length;e++){if(b[e].itemId!=="sourceedit"){b[e].disabled=true}}return{xtype:"toolbar",defaultButtonUI:g.defaultButtonUI,cls:"x-html-editor-tb",enableOverflow:true,items:b,listeners:{click:function(j){j.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(e){var d=this,c=d.textareaEl,b=d.iframeEl,a;d.readOnly=e;if(c){c.dom.readOnly=e}if(d.initialized){a=d.getEditorBody();if(Ext.isIE){b.setDisplayed(false);a.contentEditable=!e;b.setDisplayed(true)}else{d.setDesignMode(!e)}if(a){a.style.cursor=e?"default":"text"}d.disableItems(e)}},getDocMarkup:function(){var b=this,a=b.iframeEl.getHeight()-b.iframePad*2;return Ext.String.format('<!DOCTYPE html><html><head><style type="text/css">'+(Ext.isOpera?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(b.rtl?"rtl;":"ltr;")+(Ext.isIE8?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",b.iframePad,a,b.defaultFont)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var g=this,a=0,h,b,j,e,d,f,c;if(!g.defaultFont){b=g.textareaEl.getStyle("font-family");b=Ext.String.capitalize(b.split(",")[0]);h=Ext.Array.clone(g.fontFamilies);Ext.Array.include(h,b);h.sort();g.defaultFont=b;j=g.down("#fontSelect").selectEl.dom;for(d=0,f=h.length;d<f;++d){b=h[d];c=b.toLowerCase();e=new Option(b,c);if(b===g.defaultFont){a=d}e.style.fontFamily=c;if(Ext.isIE){j.add(e)}else{j.options.add(e)}}j.options[a].selected=true}},isEqual:function(b,a){return this.isEqualAsString(b,a)},afterRender:function(){var b=this,a=b.inputCmp;Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments);b.iframeEl=a.iframeEl;b.textareaEl=a.textareaEl;b.inputEl=b.iframeEl;if(b.enableFont){b.initDefaultFont()}b.monitorTask=Ext.TaskManager.start({run:b.checkDesignMode,scope:b,interval:100})},initFrameDoc:function(){var b=this,c,a;Ext.TaskManager.stop(b.monitorTask);c=b.getDoc();b.win=b.getWin();c.open();c.write(b.getDocMarkup());c.close();a={run:function(){var d=b.getDoc();if(d.body||d.readyState==="complete"){Ext.TaskManager.stop(a);b.setDesignMode(true);Ext.defer(b.initEditor,10,b)}},interval:10,duration:10000,scope:b};Ext.TaskManager.start(a)},checkDesignMode:function(){var a=this,b=a.getDoc();if(b&&(!b.editorInitialized||a.getDesignMode()!=="on")){a.initFrameDoc()}},setDesignMode:function(c){var a=this,b=a.getDoc();if(b){if(a.readOnly){c=false}b.designMode=(/on|true/i).test(String(c).toLowerCase())?"on":"off"}},getDesignMode:function(){var a=this.getDoc();return !a?"":String(a.designMode).toLowerCase()},disableItems:function(d){var b=this.getToolbar().items.items,c,a=b.length,e;for(c=0;c<a;c++){e=b[c];if(e.getItemId()!=="sourceedit"){e.setDisabled(d)}}},toggleSourceEdit:function(b){var f=this,d=f.iframeEl,a=f.textareaEl,e="x-hidden",c=f.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(b)){b=!f.sourceEditMode}f.sourceEditMode=b;if(c.pressed!==b){c.toggle(b)}if(b){f.disableItems(true);f.syncValue();d.addCls(e);a.removeCls(e);a.dom.removeAttribute("tabindex");a.focus();f.inputEl=a}else{if(f.initialized){f.disableItems(f.readOnly)}f.pushValue();d.removeCls(e);a.addCls(e);a.dom.setAttribute("tabindex",-1);f.deferFocus();f.inputEl=d}f.fireEvent("editmodechange",f,b);f.updateLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=="http://"){this.relayCmd("createlink",a)}},clearInvalid:Ext.emptyFn,setValue:function(d){var c=this,b=c.textareaEl,a=c.inputCmp;if(d===null||d===undefined){d=""}if(b){b.dom.value=d}c.pushValue();if(!c.rendered&&c.inputCmp){c.inputCmp.data.value=d}c.mixins.field.setValue.call(c,d);return c},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,"")}if(a.charCodeAt(0)===parseInt(this.defaultValue.replace(/\D/g,""),10)){a=a.substring(1)}return a},syncValue:function(){var f=this,b,g,d,a,c,e;if(f.initialized){b=f.getEditorBody();d=b.innerHTML;e=f.textareaEl.dom;if(Ext.isWebKit){a=b.getAttribute("style");c=a.match(/text-align:(.*?);/i);if(c&&c[1]){d='<div style="'+c[0]+'">'+d+"</div>"}}d=f.cleanHtml(d);if(f.fireEvent("beforesync",f,d)!==false){if(Ext.isGecko&&e.value===""&&d==="<br>"){d=""}if(e.value!==d){e.value=d;g=true}f.fireEvent("sync",f,d);if(g){f.checkChange()}}}},getValue:function(){var a=this,b;if(!a.sourceEditMode){a.syncValue()}b=a.rendered?a.textareaEl.dom.value:a.value;a.value=b;return b},pushValue:function(){var b=this,a;if(b.initialized){a=b.textareaEl.dom.value||"";if(!b.activated&&a.length<1){a=b.defaultValue}if(b.fireEvent("beforepush",b,a)!==false){b.getEditorBody().innerHTML=a;if(Ext.isGecko){b.setDesignMode(false);b.setDesignMode(true)}b.fireEvent("push",b,a)}}},focus:function(d,b){var c=this,e,a;if(b){if(!c.focusTask){c.focusTask=new Ext.util.DelayedTask(c.focus)}c.focusTask.delay(Ext.isNumber(b)?b:10,null,c,[d,false])}else{if(d){if(c.textareaEl&&c.textareaEl.dom){e=c.textareaEl.dom.value}if(e&&e.length){c.execCmd("selectall",true)}}a=c.getFocusEl();if(a&&a.focus){a.focus()}}return c},initEditor:function(){var d=this,c,a,g,h,b;if(d.destroying||d.isDestroyed){return}c=d.getEditorBody();a=d.textareaEl.getStyle(["font-size","font-family","background-image","background-repeat","background-color","color"]);a["background-attachment"]="fixed";c.bgProperties="fixed";Ext.DomHelper.applyStyles(c,a);g=d.getDoc();h=Ext.get(g);if(h){try{h.clearListeners()}catch(f){}b=d.onEditorEvent.bind(d);h.on({mousedown:b,dblclick:b,click:b,keyup:b,delegated:false,buffer:100});b=d.onRelayedEvent;h.on({mousedown:b,mousemove:b,mouseup:b,click:b,dblclick:b,delegated:false,scope:d});if(Ext.isGecko){h.on("keypress",d.applyCommand,d)}if(d.fixKeys){h.on("keydown",d.fixKeys,d)}if(d.fixKeysAfter){h.on("keyup",d.fixKeysAfter,d)}if(Ext.isIE9){Ext.get(g.documentElement).on("focus",d.focus,d)}if(Ext.isIE8){h.on("focusout",function(){d.savedSelection=g.selection.type!=="None"?g.selection.createRange():null},d);h.on("focusin",function(){if(d.savedSelection){d.savedSelection.select()}},d)}Ext.getWin().on("beforeunload",d.beforeDestroy,d);g.editorInitialized=true;d.initialized=true;d.pushValue();d.setReadOnly(d.readOnly);d.fireEvent("initialize",d)}},beforeDestroy:function(){var a=this,d=a.monitorTask,c,f;if(d){Ext.TaskManager.stop(d)}if(a.rendered){Ext.getWin().un(a.beforeDestroy,a);c=a.getDoc();if(c){Ext.get(c).clearListeners();if(c.hasOwnProperty){for(f in c){try{if(c.hasOwnProperty(f)){delete c[f]}}catch(b){}}}}delete a.iframeEl;delete a.textareaEl;delete a.toolbar;delete a.inputCmp}Ext.form.FieldContainer.prototype.beforeDestroy.call(this)},onRelayedEvent:function(c){var b=this.iframeEl,d=Ext.fly(b).getTrueXY(),e=c.getXY(),a=c.getXY();c.xy=[d[0]+a[0],d[1]+a[1]];c.injectEvent(b);c.xy=e},onFirstFocus:function(){var c=this,b,a;c.activated=true;c.disableItems(c.readOnly);if(Ext.isGecko){c.win.focus();b=c.win.getSelection();if(b.focusNode&&!c.getValue().length){a=b.getRangeAt(0);a.selectNodeContents(c.getEditorBody());a.collapse(true);c.deferFocus()}try{c.execCmd("useCSS",true);c.execCmd("styleWithCSS",false)}catch(d){}}c.fireEvent("activate",c)},adjustFont:function(d){var e=d.getItemId()==="increasefontsize"?1:-1,c=this.getDoc().queryCommandValue("FontSize")||"2",a=Ext.isString(c)&&c.indexOf("px")!==-1,b;c=parseInt(c,10);if(a){if(c<=10){c=1+e}else{if(c<=13){c=2+e}else{if(c<=16){c=3+e}else{if(c<=18){c=4+e}else{if(c<=24){c=5+e}else{c=6+e}}}}}c=Ext.Number.constrain(c,1,6)}else{b=Ext.isSafari;if(b){e*=2}c=Math.max(1,c+e)+(b?"px":0)}this.relayCmd("FontSize",c)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var h=this,e,c,d,j,b,f,a,g;if(h.readOnly){return}if(!h.activated){h.onFirstFocus();return}d=h.getToolbar().items.map;j=h.getDoc();if(h.enableFont&&!Ext.isSafari2){f=j.queryCommandValue("fontName");b=(f?f.split(",")[0].replace(h.reStripQuotes,""):h.defaultFont).toLowerCase();a=h.fontSelect.dom;if(b!==a.value||b!==f){a.value=b}}function k(){var l;for(e=0,c=arguments.length,b;e<c;e++){b=arguments[e];try{l=j.queryCommandState(b)}catch(m){l=false}d[b].toggle(l)}}if(h.enableFormat){k("bold","italic","underline")}if(h.enableAlignments){k("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&h.enableLists){k("insertorderedlist","insertunorderedlist")}g=h.toolbar.query("menu");for(e=0;e<g.length;e++){g[e].hide()}h.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){Ext.defer(function(){var c=this;if(!this.isDestroyed){c.win.focus();c.execCmd(b,a);c.updateToolbar()}},10,this)},execCmd:function(c,b){var a=this,d=a.getDoc();d.execCommand(c,false,(b===undefined?null:b));a.syncValue()},applyCommand:function(d){if(d.ctrlKey){var a=this,f=d.getCharCode(),b;if(f>0){f=String.fromCharCode(f);switch(f){case"b":b="bold";break;case"i":b="italic";break;case"u":b="underline";break}if(b){a.win.focus();a.execCmd(b);a.deferFocus();d.preventDefault()}}}},insertAtCursor:function(c){var b=this,a;if(b.activated){b.win.focus();if(Ext.isIE){a=b.getDoc().selection.createRange();if(a){a.pasteHTML(c);b.syncValue();b.deferFocus()}}else{b.execCmd("InsertHTML",c);b.deferFocus()}}},fixKeys:(function(){var a;if(Ext.isIE){return function(h){var d=this,c=h.getKey(),g=d.getDoc(),j=d.readOnly,b,f;if(c===h.TAB){h.stopEvent();if(!j){b=g.selection.createRange();if(b){if(b.collapse){b.collapse(true);b.pasteHTML("&#160;&#160;&#160;&#160;")}d.deferFocus()}}}else{if(c===h.ENTER){if(!j){if(Ext.isIE10m){b=g.selection.createRange();if(b){f=b.parentElement();if(!f||f.tagName.toLowerCase()!=="li"){h.stopEvent();b.pasteHTML("<br />");b.collapse(false);b.select()}}}else{b=g.getSelection().getRangeAt(0);if(b&&b.commonAncestorContainer.parentNode.tagName.toLowerCase()!=="li"){h.stopEvent();a=g.createElement("div");b.insertNode(a)}}}}}}}if(Ext.isOpera){return function(d){var c=this,b=d.getKey(),f=c.readOnly;if(b===d.TAB){d.stopEvent();if(!f){c.win.focus();c.execCmd("InsertHTML","&#160;&#160;&#160;&#160;");c.deferFocus()}}}}return null}()),fixKeysAfter:(function(){if(Ext.isIE){return function(d){var b=this,a=d.getKey(),c=b.getDoc(),g=b.readOnly,f;if(!g&&(a===d.BACKSPACE||a===d.DELETE)){f=c.body.innerHTML;if(f==="<p>&nbsp;</p>"||f==="<P>&nbsp;</P>"){c.body.innerHTML=""}}}}return null}()),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}},privates:{deferFocus:function(){this.focus(false,true)},getFocusEl:function(){var a=this,b=a.win;return b&&!a.sourceEditMode?b:a.textareaEl}}},0,["htmleditor"],["component","box","container","fieldcontainer","htmleditor"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true},["widget.htmleditor"],[["field",Ext.form.field.Field]],[Ext.form.field,"HtmlEditor",Ext.form,"HtmlEditor"],0));Ext.define("ExtThemeNeptune.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",defaultButtonUI:"plain-toolbar"});Ext.onReady(function(){if(Ext.Date){Ext.Date.monthNames=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];Ext.Date.shortMonthNames=["Янв","Февр","Март","Апр","Май","Июнь","Июль","Авг","Сент","Окт","Нояб","Дек"];Ext.Date.getShortMonthName=function(a){return Ext.Date.shortMonthNames[a]};Ext.Date.monthNumbers={"Янв":0,"Фев":1,"Мар":2,"Апр":3,"Май":4,"Июн":5,"Июл":6,"Авг":7,"Сен":8,"Окт":9,"Ноя":10,"Дек":11};Ext.Date.getMonthNumber=function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Ext.Date.dayNames=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];Ext.Date.getShortDayName=function(a){return Ext.Date.dayNames[a].substring(0,3)}}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:".",decimalSeparator:",",currencySign:"руб",dateFormat:"d.m.Y"})}});Ext.define("Ext.locale.ru.view.View",{override:"Ext.view.View",emptyText:""});Ext.define("Ext.locale.ru.grid.plugin.DragDrop",{override:"Ext.grid.plugin.DragDrop",dragText:"{0} выбранных строк"});Ext.define("Ext.locale.ru.tab.Tab",{override:"Ext.tab.Tab",closeText:"Закрыть эту вкладку"});Ext.define("Ext.locale.ru.form.field.Base",{override:"Ext.form.field.Base",invalidText:"Значение в этом поле неверное"});Ext.define("Ext.locale.ru.view.AbstractView",{override:"Ext.view.AbstractView",loadingText:"Загрузка..."});Ext.define("Ext.locale.ru.picker.Date",{override:"Ext.picker.Date",todayText:"Сегодня",minText:"Эта дата раньше минимальной даты",maxText:"Эта дата позже максимальной даты",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",nextText:"Следующий месяц (Control+Вправо)",prevText:"Предыдущий месяц (Control+Влево)",monthYearText:"Выбор месяца (Control+Вверх/Вниз для выбора года)",todayTip:"{0} (Пробел)",format:"d.m.y",startDay:1});Ext.define("Ext.locale.ru.picker.Month",{override:"Ext.picker.Month",okText:"&#160;OK&#160;",cancelText:"Отмена"});Ext.define("Ext.locale.ru.toolbar.Paging",{override:"Ext.PagingToolbar",beforePageText:"Страница",afterPageText:"из {0}",firstText:"Первая страница",prevText:"Предыдущая страница",nextText:"Следующая страница",lastText:"Последняя страница",refreshText:"Обновить",displayMsg:"Отображаются записи с {0} по {1}, всего {2}",emptyMsg:"Нет данных для отображения"});Ext.define("Ext.locale.ru.form.field.Text",{override:"Ext.form.field.Text",minLengthText:"Минимальная длина этого поля {0}",maxLengthText:"Максимальная длина этого поля {0}",blankText:"Это поле обязательно для заполнения",regexText:"",emptyText:null});Ext.define("Ext.locale.ru.form.field.Number",{override:"Ext.form.field.Number",minText:"Значение этого поля не может быть меньше {0}",maxText:"Значение этого поля не может быть больше {0}",nanText:"{0} не является числом",negativeText:"Значение не может быть отрицательным"});Ext.define("Ext.locale.ru.form.field.Date",{override:"Ext.form.field.Date",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",minText:"Дата в этом поле должна быть позже {0}",maxText:"Дата в этом поле должна быть раньше {0}",invalidText:"{0} не является правильной датой - дата должна быть указана в формате {1}",format:"d.m.y",altFormats:"d.m.y|d/m/Y|d-m-y|d-m-Y|d/m|d-m|dm|dmy|dmY|d|Y-m-d"});Ext.define("Ext.locale.ru.form.field.ComboBox",{override:"Ext.form.field.ComboBox",valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:"Загрузка..."})});Ext.define("Ext.locale.ru.form.field.VTypes",{override:"Ext.form.field.VTypes",emailText:'Это поле должно содержать адрес электронной почты в формате "user@example.com"',urlText:'Это поле должно содержать URL в формате "http://www.example.com"',alphaText:'Это поле должно содержать только латинские буквы и символ подчеркивания "_"',alphanumText:'Это поле должно содержать только латинские буквы, цифры и символ подчеркивания "_"'});Ext.define("Ext.locale.ru.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",createLinkText:"Пожалуйста, введите адрес:"},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:"Полужирный (Ctrl+B)",text:"Применение полужирного начертания к выделенному тексту.",cls:"x-html-editor-tip"},italic:{title:"Курсив (Ctrl+I)",text:"Применение курсивного начертания к выделенному тексту.",cls:"x-html-editor-tip"},underline:{title:"Подчёркнутый (Ctrl+U)",text:"Подчёркивание выделенного текста.",cls:"x-html-editor-tip"},increasefontsize:{title:"Увеличить размер",text:"Увеличение размера шрифта.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Уменьшить размер",text:"Уменьшение размера шрифта.",cls:"x-html-editor-tip"},backcolor:{title:"Заливка",text:"Изменение цвета фона для выделенного текста или абзаца.",cls:"x-html-editor-tip"},forecolor:{title:"Цвет текста",text:"Измение цвета текста.",cls:"x-html-editor-tip"},justifyleft:{title:"Выровнять текст по левому краю",text:"Вырaвнивание текста по левому краю.",cls:"x-html-editor-tip"},justifycenter:{title:"По центру",text:"Вырaвнивание текста по центру.",cls:"x-html-editor-tip"},justifyright:{title:"Выровнять текст по правому краю",text:"Вырaвнивание текста по правому краю.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Маркеры",text:"Начать маркированный список.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Нумерация",text:"Начать нумернованный список.",cls:"x-html-editor-tip"},createlink:{title:"Вставить гиперссылку",text:"Создание ссылки из выделенного текста.",cls:"x-html-editor-tip"},sourceedit:{title:"Исходный код",text:"Переключиться на исходный код.",cls:"x-html-editor-tip"}}})});Ext.define("Ext.locale.ru.form.Basic",{override:"Ext.form.Basic",waitTitle:"Пожалуйста, подождите..."});Ext.define("Ext.locale.ru.grid.header.Container",{override:"Ext.grid.header.Container",sortAscText:"Сортировать по возрастанию",sortDescText:"Сортировать по убыванию",lockText:"Закрепить столбец",unlockText:"Снять закрепление столбца",columnsText:"Столбцы"});Ext.define("Ext.locale.ru.grid.GroupingFeature",{override:"Ext.grid.feature.Grouping",emptyGroupText:"(Пусто)",groupByText:"Группировать по этому полю",showGroupsText:"Отображать по группам"});Ext.define("Ext.locale.ru.grid.PropertyColumnModel",{override:"Ext.grid.PropertyColumnModel",nameText:"Название",valueText:"Значение",dateFormat:"d.m.Y"});Ext.define("Ext.locale.ru.window.MessageBox",{override:"Ext.window.MessageBox",buttonText:{ok:"OK",cancel:"Отмена",yes:"Да",no:"Нет"}});Ext.define("Ext.locale.ru.form.field.File",{override:"Ext.form.field.File",buttonText:"Обзор..."});Ext.define("Ext.locale.ru.Component",{override:"Ext.Component"});Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,cachedConfig:{baseCls:"x-widget"},constructor:function(a){(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,a);this.getComponentLayout()},addCls:function(a){this.el.addCls(a)},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,finishRender:function(){this.rendering=false;this.initBindable()},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,e,a){var d=this,c=d.inheritedState;d.ownerCt=b;if(c&&a){d.invalidateInheritedState()}if(d.reference){d.fixReference()}},onRemoved:function(b){var a=this,c;if(a.reference){c=a.lookupReferenceHolder();if(c){c.clearReference(a)}}if(!b){a.removeBindings()}if(a.inheritedState&&!b){a.invalidateInheritedState()}a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},render:function(b,a){var c=this.element,d;if(a){nextSibiling=b.childNodes[a];if(d){b.insertBefore(c,d);return}}b.appendChild(c)},setPosition:function(a,b){this.el.setLocalXY(a,b)}},function(){var a;if(Ext.isIE8){a=Ext.Widget.prototype;a.addElementReferenceOnDemand=a.addElementReference}this.borrow(Ext.Component,["up"])});(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:false},current:-1,total:0,running:false,complete:false,exception:false,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.operations=[];b.exceptions=[]},add:function(b){var d=this,c,a;if(Ext.isArray(b)){for(c=0,a=b.length;c<a;++c){d.add(b[c])}}else{d.total++;b.setBatch(d);d.operations.push(b)}return d},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(c,a){var b=c.order-a.order;if(b){return b}var f=c.entityType,d=a.entityType,e;if(!f||!d){return 0}if(!(e=f.rank)){f.schema.rankEntities();e=f.rank}return(e-d.rank)*c.foreignKeyDirection},start:function(a){var b=this;if(!b.operations.length||b.running){return b}b.exceptions.length=0;b.exception=false;b.running=true;return b.runOperation(Ext.isDefined(a)?a:b.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=false;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var a=null,b=this.current;if(!(b===-1||this.complete)){a=this.operations[b]}return a},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(c){var d=this,b=d.operations,a=b[c];if(a===undefined){d.running=false;d.complete=true;d.fireEvent("complete",d,b[b.length-1])}else{d.current=c;a.setInternalCallback(d.onOperationComplete);a.setInternalScope(d);a.execute()}return d},onOperationComplete:function(a){var c=this,b=a.hasException();if(b){c.exception=true;c.exceptions.push(a);c.fireEvent("exception",c,a)}if(b&&c.getPauseOnException()){c.pause()}else{c.fireEvent("operationcomplete",c,a);c.runNextOperation()}}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var c=this,b=c._initters,a;c.text=d;for(a in b){c[a]=b[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(h,j){var e=this,d=e.slots,b=e.buffer,a=d.length,c,g,f;for(c=0;c<a;++c){g=d[c];if(g){if((f=h[g.pos])==null){f=""}if(g.not){f=!f}if(g.format){f=g.format(f,j)}b[c]=f}}return b.join("")},getTokens:function(){return this.tokens},parse:function(){var k=this,p=k.text,e=[],h=[],j=[],o={},n=0,d=k.tokenRe,l=0,b,f,a,g,q,m,c;for(f in k._initters){delete k[f]}k.buffer=e;k.slots=h;k.tokens=j;while((g=d.exec(p))){a=g.index-n;if(a){e[l++]=p.substring(n,n+a);n+=a}n+=(q=g[0]).length;m={fmt:(b=g[3]||null),index:g[1]?parseInt(g[1],10):null,not:q.charAt(1)==="!",token:g[2]||null};c=m.token||String(m.index);if(c in o){m.pos=o[c]}else{o[c]=m.pos=j.length;j.push(c)}if(b){if(b.substring(0,5)==="this."){m.fmt=b.substring(5)}else{m.scope=Ext.util.Format}k.parseArgs(g[4],m)}h[l++]=m}if(n<p.length){e[l++]=p.substring(n)}return k},parseArgs:function(f,g){var e=this,b=e.numberRe,h=e.stringRe,j,d,c,a;if(!f){d=[]}else{if(f.indexOf(",")<0){d=[f]}else{d=f.split(",")}}g=g||{};a=d.length;g.args=d;for(c=0;c<a;++c){j=d[c];if(j==="true"){d[c]=true}else{if(j==="false"){d[c]=false}else{if(j==="null"){d[c]=null}else{if(b.test(j)){d[c]=parseFloat(j)}else{if(h.test(j)){d[c]=j.substring(1,j.length-1)}else{g.fn=Ext.functionFactory("return ["+f+"];");g.format=e._formatEval;break}}}}}}if(!g.format){d.unshift(0);g.format=e._formatArgs}return g},parseFormat:function(a){var d=this,c=d.formatRe.exec(a),e={fmt:a,scope:Ext.util.Format},b;b=c[2];if(b){e.fmt=c[1];d.parseArgs(b,e)}else{e.args=[0];e.format=d._formatArgs}return e},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(c,b){var a=this.fn();a.unshift(c);b=this.scope||b;return b[this.fmt].apply(b,a)}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{pageSize:0,rootProperty:""},clear:function(a){var b=this;b.pageMapGeneration=(b.pageMapGeneration||0)+1;Ext.util.LruCache.prototype.clear.apply(this,arguments)},forEach:function(k,m){var g=this,d=Ext.Object.getKeys(g.map),a=d.length,h=g.getPageSize(),c,b,l,f,e;for(c=0;c<a;c++){d[c]=Number(d[c])}Ext.Array.sort(d);m=m||g;for(c=0;c<a;c++){l=d[c];f=g.getPage(l);e=f.length;for(b=0;b<e;b++){if(k.call(m,f[b],(l-1)*h+b)===false){return}}}},findBy:function(c,b){var d=this,a=null;b=b||d;d.forEach(function(f,e){if(c.call(b,f,e)){a=f;return false}});return a},findIndexBy:function(c,b){var d=this,a=-1;b=b||d;d.forEach(function(f,e){if(c.call(b,f)){a=e;return false}});return a},find:function(g,f,h,d,c,b){if(Ext.isEmpty(f,false)){return null}var e=Ext.String.createRegex(f,d,c,b),a=this.getRootProperty();return this.findBy(function(j){return j&&e.test((a?j[a]:j)[g])},null,h)},findIndex:function(g,f,h,d,c,b){if(Ext.isEmpty(f,false)){return null}var e=Ext.String.createRegex(f,d,c,b),a=this.getRootProperty();return this.findIndexBy(function(j){return j&&e.test((a?j[a]:j)[g])},null,h)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(b,c){var e=this,a=e.getPageSize(),g=b+Math.floor((c.length-1)/a),d,f;for(d=0;b<=g;b++,d+=a){f=Ext.Array.slice(c,d,d+a);e.add(b,f);e.fireEvent("pageadded",b,f)}},getCount:function(){var a=Ext.util.LruCache.prototype.getCount.call(this);if(a){a=(a-1)*this.getPageSize()+this.last.value.length}return a},indexOf:function(a){return a?a.index:-1},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(b){var a=this.getPage(b);if(a&&a.value){a.value.length=0}return Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments)},getPage:function(a){return this.get(a)},hasRange:function(d,b){var a=this.getPageFromRecordIndex(d),c=this.getPageFromRecordIndex(b);for(;a<=c;a++){if(!this.hasPage(a)){return false}}return true},hasPage:function(a){return !!this.get(a)},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(a,b){b--;if(!this.hasRange(a,b)){Ext.Error.raise("PageMap asked for range which it does not have")}var h=this,j=h.getPageSize(),m=h.getPageFromRecordIndex(a),e=h.getPageFromRecordIndex(b),c=(m-1)*j,o=(e*j)-1,k=m,p=[],n,g,l,d=0,f;for(;k<=e;k++){if(k===m){n=a-c;l=true}else{n=0;l=false}if(k===e){g=j-(o-b);l=true}if(l){Ext.Array.push(p,Ext.Array.slice(h.getPage(k),n,g))}else{Ext.Array.push(p,h.getPage(k))}}for(f=p.length;d<f;d++){p[d].index=a++}return p}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:true,buffered:true,config:{data:0,pageSize:25,remoteSort:true,remoteFilter:true,sortOnLoad:false,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0},applyData:function(b){var a=this.data||(this.data=this.createDataCollection());return a},applyProxy:function(a){a=Ext.data.ProxyStore.prototype.applyProxy.call(this,a);if(a.setEnablePaging){a.setEnablePaging(true)}return a},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(a){if(this.isInitializing){this.blockLoad()}this.group(a);if(this.isInitializing){this.unblockLoad()}},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var b=this,a=new Ext.data.PageMap({store:b,rootProperty:"data",pageSize:b.getPageSize(),maxSize:b.getPurgePageCount(),listeners:{clear:b.onPageMapClear,scope:b}});b.pageRequests={};return a},removeAll:function(a){var b=this,c=b.getData();if(c){if(a){b.suspendEvent("clear")}c.clear();if(a){b.resumeEvent("clear")}}},load:function(a){var b=this;a=a||{};b.getData().clear();a.page=1;a.start=0;a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;delete a.callback;return b.loadToPrefetch(a)},reload:function(l){var g=this,h,b,f,k,e,a,j,c,d=g.getData();if(!l){l={}}delete g.totalCount;d.clear(true);a=function(){if(g.rangeCached(h,b)){g.loading=false;d.un("pageadded",a);c=d.getRange(h,b+1);g.fireEvent("load",g,c,true)}};j=Math.ceil((g.getLeadingBufferZone()+g.getTrailingBufferZone())/2);if(!g.lastRequestStart){h=l.start||0;b=h+(l.count||g.getPageSize())-1}else{h=g.lastRequestStart;b=g.lastRequestEnd}f=g.getPageFromRecordIndex(Math.max(h-j,0));k=g.getPageFromRecordIndex(b+j);if(g.fireEvent("beforeload",g,l)!==false){g.loading=true;d.on("pageadded",a);for(e=f;e<=k;e++){g.prefetchPage(e,l)}}},filter:function(){if(this.remoteSort){this.getData().clear();Ext.data.ProxyStore.prototype.filter.apply(this,arguments)}Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},clearFilter:function(){this.getData().clear();Ext.data.ProxyStore.prototype.clearFilter.apply(this,arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(c,a){var b=this;a=a||{};a.page=b.currentPage=c;a.start=(c-1)*b.getPageSize();a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;delete a.callback;return b.loadToPrefetch(a)},clearData:function(c){var a=this,b=a.getData();if(b){b.clear()}if(c!==true||a.clearRemovedOnLoad){a.removed.length=0}},getCount:function(){return this.totalCount||0},getRange:function(c,f,k){var j=this,d=j.totalCount-1,e=j.lastRequestStart,l=[],g=j.getData(),b,h,a;k=Ext.apply({prefetchStart:c,prefetchEnd:f},k);f=(f>=j.totalCount)?d:f;h=c===0?0:c-1;a=f===d?f:f+1;j.lastRequestStart=c;j.lastRequestEnd=f;if(j.rangeCached(h,a)){j.onRangeAvailable(k);l=g.getRange(c,f+1)}else{j.fireEvent("cachemiss",j,c,f);b=function(n,m){if(j.rangeCached(h,a)){j.fireEvent("cachefilled",j,c,f);g.un("pageadded",b);j.onRangeAvailable(k)}};g.on("pageadded",b);j.prefetchRange(c,f)}j.primeCache(c,f,c<e?-1:1);return l},getById:function(b){var a=this.data.findBy(function(c){return c.getId()===b});return a},getByInternalId:function(b){var a;a=this.data.findBy(function(c){return c.internalId===b});return a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(b,d){var c=this,a;if(b&&typeof b==="string"){a=c.grouper;if(!a){c.grouper=new Ext.util.Grouper({property:b,direction:d||"ASC",root:"data"})}else{if(d===undefined){a.toggle()}else{a.setDirection(d)}}}else{c.grouper=b?c.getSorters().decodeSorter(b,"Ext.util.Grouper"):null}if(c.isLoadBlocked()){return}c.getData().clear();c.loadPage(1,{callback:function(){c.fireEvent("groupchange",c,c.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},loadToPrefetch:function(p){var l=this,c=p,g=l.getPurgePageCount(),h,b,n,m=p.start,a=p.start+p.limit-1,j=Math.min(a,p.start+(l.getViewSize()||p.limit)-1),k=l.getPageFromRecordIndex(Math.max(m-l.getTrailingBufferZone(),0)),o=l.getPageFromRecordIndex(a+l.getLeadingBufferZone()),f=l.getData(),d=function(){if(l.rangeCached(m,j)){l.loading=false;b=f.getRange(m,j+1);f.un("pageadded",d);if(l.hasListeners.guaranteedrange){l.guaranteeRange(m,j,p.callback,p.scope)}if(p.loadCallback){p.loadCallback.call(p.scope||l,b,e,true)}if(p.callback){p.callback.call(p.scope||l,b,m,a,p)}l.fireEvent("datachanged",l);l.fireEvent("refresh",l);l.fireEvent("load",l,b,true)}},e;if(g){f.setMaxSize(g=Math.max(g,o-k+1))}if(l.fireEvent("beforeload",l,p)!==false){delete l.totalCount;l.loading=true;if(p.callback){c=Ext.apply({},p);delete c.callback}l.on("prefetch",function(r,q,t,s){if(t){e=s;if((n=l.getTotalCount())){f.on("pageadded",d);j=Math.min(j,n-1);o=l.getPageFromRecordIndex(Math.min(j+l.getLeadingBufferZone(),n-1));for(h=k+1;h<=o;++h){l.prefetchPage(h,c)}}else{l.fireEvent("datachanged",l);l.fireEvent("refresh",l);l.fireEvent("load",l,q,true)}}else{l.fireEvent("load",l,q,false)}},null,{single:true});l.prefetchPage(k,c)}},prefetch:function(c){var e=this,a=e.getPageSize(),f=e.getData(),d,b;if(a){if(e.lastPageSize&&a!=e.lastPageSize){Ext.Error.raise("pageSize cannot be dynamically altered")}if(!f.pageSize){f.setPageSize(a)}}else{e.pageSize=f.setPageSize(a=c.limit)}e.lastPageSize=a;if(!c.page){c.page=e.getPageFromRecordIndex(c.start);c.start=(c.page-1)*a;c.limit=Math.ceil(c.limit/a)*a}if(!e.pageRequests[c.page]){d=e.proxy;c=Ext.apply({action:"read",filters:e.getFilters().items,sorters:e.getSorters().items,grouper:e.getGrouper(),internalCallback:e.onProxyPrefetch,internalScope:e},c);b=d.createOperation("read",c);b.pageMapGeneration=f.pageMapGeneration;if(e.fireEvent("beforeprefetch",e,b)!==false){e.pageRequests[c.page]=b.execute();if(d.isSynchronous){delete e.pageRequests[c.page]}}}return e},onPageMapClear:function(){var d=this,c=d.wasLoading,a=d.pageRequests,f=d.getData(),b,e;f.clearListeners();f.on("clear",d.onPageMapClear,d);d.loading=true;d.totalCount=0;for(e in a){if(a.hasOwnProperty(e)){b=a[e];delete a[e];delete b.callback}}d.fireEvent("clear",d);d.loading=c},prefetchPage:function(e,b){var d=this,a=d.getPageSize(),f=(e-1)*a,c=d.totalCount;if(c!==undefined&&d.data.getCount()===c){return}d.prefetch(Ext.applyIf({page:e,start:f,limit:a},b))},onProxyPrefetch:function(c){var e=this,d=c.getResultSet(),b=c.getRecords(),g=c.wasSuccessful(),f=c.getPage(),a=e.totalCount;if(c.pageMapGeneration===e.getData().pageMapGeneration){if(d){e.totalCount=d.getTotal();if(e.totalCount!==a){e.fireEvent("totalcountchange",e.totalCount)}}if(f!==undefined){delete e.pageRequests[f]}e.loading=false;e.fireEvent("prefetch",e,b,g,c);if(g){e.cachePage(b,c.getPage())}Ext.callback(c.getCallback(),c.getScope()||e,[b,c,g])}},cachePage:function(b,e){var d=this,a=b.length,c;if(!Ext.isDefined(d.totalCount)){d.totalCount=b.length;d.fireEvent("totalcountchange",d.totalCount)}for(c=0;c<a;c++){b[c].join(d)}d.getData().addPage(e,b)},rangeCached:function(b,a){return this.getData().hasRange(b,a)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return !!this.pageRequests[a]},rangeSatisfied:function(b,a){return this.rangeCached(b,a)},onRangeAvailable:function(d){var e=this,b=e.getTotalCount(),f=d.prefetchStart,a=(d.prefetchEnd>b-1)?b-1:d.prefetchEnd,c;a=Math.max(0,a);c=e.getData().getRange(f,a+1);if(d.fireEvent!==false){e.fireEvent("guaranteedrange",c,f,a,d)}if(d.callback){d.callback.call(d.scope||e,c,f,a,d)}},guaranteeRange:function(e,a,d,c,b){b=Ext.apply({callback:d,scope:c},b);this.getRange(e,a+1,b)},prefetchRange:function(g,b){var e=this,d=e.getPurgePageCount(),c,a,f;if(!e.rangeCached(g,b)){c=e.getPageFromRecordIndex(g);a=e.getPageFromRecordIndex(b);e.getData().setMaxSize(d?(a-c+1)+d:0);for(f=c;f<=a;f++){if(!e.pageCached(f)){e.prefetchPage(f)}}}},primeCache:function(h,c,g){var f=this,e=f.getLeadingBufferZone(),d=f.getTrailingBufferZone(),b=f.getPageSize(),a=f.totalCount;if(g===-1){h=Math.max(h-e,0);c=Math.min(c+d,a-1)}else{if(g===1){h=Math.max(Math.min(h-d,a-b),0);c=Math.min(c+e,a-1)}else{h=Math.min(Math.max(Math.floor(h-((e+d)/2)),0),a-f.pageSize);c=Math.min(Math.max(Math.ceil(c+((e+d)/2)),0),a-1)}}f.prefetchRange(h,c)},sort:function(b,a,c){if(arguments.length===0){this.clearAndLoad()}else{this.getSorters().addSort(b,a,c)}},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){a.clearAndLoad({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("sort",a,b)}},clearAndLoad:function(a){this.getData().clear();this.loadPage(1,a)}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0));(Ext.cmd.derive("Ext.data.NodeInterface",Ext.Base,{statics:{decorate:function(b){var d=Ext.data.schema.Schema.lookupEntity(b),f=d.prototype,a,c,e;if(!d.prototype.isObservable){d.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable)}if(f.isNode){return}a=f.idProperty;c=d.getField(a);e=c.type;d.override(this.getPrototypeBody());d.addFields([{name:"parentId",type:e,defaultValue:null,allowNull:c.allowNull},{name:"index",type:"int",defaultValue:-1,persist:false,convert:null},{name:"depth",type:"int",defaultValue:0,persist:false,convert:null},{name:"expanded",type:"bool",defaultValue:false,persist:false,convert:null},{name:"expandable",type:"bool",defaultValue:true,persist:false,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:false,convert:null},{name:"leaf",type:"bool",defaultValue:false},{name:"cls",type:"string",defaultValue:"",persist:false,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:false,convert:null},{name:"icon",type:"string",defaultValue:"",persist:false,convert:null},{name:"root",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isLast",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isFirst",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"loaded",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"loading",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"href",type:"string",defaultValue:"",persist:false,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:false,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:false,convert:null},{name:"children",type:"auto",defaultValue:null,persist:false,convert:null},{name:"visible",type:"boolean",defaultValue:true,persist:false},{name:"text",type:"string",persist:false}])},getPrototypeBody:function(){var a={idchanged:true,append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true,expand:true,collapse:true,beforeexpand:true,beforecollapse:true,sort:true};return{isNode:true,constructor:function(){var b=this;b.mixins.observable.constructor.call(b);b.callParent(arguments);b.firstChild=b.lastChild=b.parentNode=b.previousSibling=b.nextSibling=null;b.childNodes=[];return b},createNode:function(b){var h=this,f=h.childType,l,j,d,k,g,e,c=h.self;if(!b.isModel){if(f){c=h.schema.getEntity(f)}else{l=h.getTreeStore();j=l&&l.getProxy().getReader();d=h.getProxy();k=d?d.getReader():null;g=!j||(k&&k.initialConfig.typeProperty)?k:j;if(g){e=g.getTypeProperty();if(e){c=g.getChildType(h.schema,b,e)}}}b=new c(b)}if(!b.childNodes){b.firstChild=b.lastChild=b.parentNode=b.previousSibling=b.nextSibling=null;b.childNodes=[]}return b},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(b){this.firstChild=b},setLastChild:function(b){this.lastChild=b},updateInfo:function(g,s){var u=this,t=u.data.depth,e={},d=u.childNodes,r=d.length,q,h=u.phantom,c=u.data,p=u.fields,f=u.modified||(u.modified={}),n,m,b,k,v,j=s.parentId,l,o;if(!s){Ext.Error.raise("NodeInterface expects update info to be passed")}for(n in s){b=p[u.fieldOrdinals[n]];m=s[n];o=b&&b.persist;k=c[n];l=o&&(n==="index")&&(k!==-1)&&(j&&j!==f.parentId);if(!l&&u.isEqual(k,m)){continue}c[n]=m;if(o){if(!l&&f.hasOwnProperty(n)){if(u.isEqual(f[n],m)){delete f[n];u.dirty=false;for(v in f){if(f.hasOwnProperty(v)){u.dirty=true;break}}}}else{u.dirty=true;f[n]=k}}}if(g){u.commit();u.phantom=h}if(u.data.depth!==t){e={depth:u.data.depth+1};for(q=0;q<r;q++){d[q].updateInfo(g,e)}}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var b=this;if(b.get("expandable")){return !(b.isLeaf()||(b.isLoaded()&&!b.phantom&&!b.hasChildNodes()))}return false},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(d,l,e){var j=this,f,h,g,k,b,n={isLast:true,parentId:j.getId(),depth:(j.data.depth||0)+1},m,c=j.getTreeStore();Ext.suspendLayouts();if(Ext.isArray(d)){h=d.length;m=new Array(h);j.callTreeStore("beginFill");for(f=0;f<h;f++){m[f]=j.appendChild(d[f],l,e)}j.callTreeStore("endFill",[m])}else{d=j.createNode(d);if(l!==true&&j.fireEventArgs("beforeappend",[j,d])===false){return false}g=j.childNodes.length;k=d.parentNode;if(k){if(k.removeChild(d,false,l,k.getTreeStore()===j.getTreeStore())===false){return false}}c&&c.beginUpdate();g=j.childNodes.length;if(g===0){j.setFirstChild(d)}j.childNodes[g]=d;d.parentNode=j;d.nextSibling=null;j.setLastChild(d);b=j.childNodes[g-1];if(b){d.previousSibling=b;b.nextSibling=d;b.updateInfo(e,{isLast:false});b.triggerUIUpdate()}else{d.previousSibling=null}n.isFirst=g===0;n.index=g;d.updateInfo(e,n);if(j.isLeaf()){j.set("leaf",false)}if(!j.isLoaded()){j.set("loaded",true)}else{if(j.childNodes.length===1){j.triggerUIUpdate()}}if(g&&j.childNodes[g-1].isExpanded()){j.childNodes[g-1].cascadeBy(j.triggerUIUpdate)}if(l!==true){j.fireEventArgs("append",[j,d,g]);if(k){d.fireEventArgs("move",[d,k,j,g])}}j.callTreeStore("onNodeAppend",[d,g]);m=d;c&&c.endUpdate()}Ext.resumeLayouts(true);return m},getOwnerTree:function(){var b=this.getTreeStore();if(b){return b.ownerTree}},getTreeStore:function(){var b=this;while(b&&!b.treeStore){b=b.parentNode}return b&&b.treeStore},removeChild:function(d,c,k,j){var h=this,g=h.indexOf(d),f,e,b;if(g===-1||(k!==true&&h.fireEventArgs("beforeremove",[h,d,!!j])===false)){return false}Ext.suspendLayouts();Ext.Array.erase(h.childNodes,g,1);if(h.firstChild===d){h.setFirstChild(d.nextSibling)}if(h.lastChild===d){h.setLastChild(d.previousSibling)}b=d.previousSibling;if(b){d.previousSibling.nextSibling=d.nextSibling}if(d.nextSibling){d.nextSibling.previousSibling=d.previousSibling;if(g===0){d.nextSibling.updateInfo(false,{isFirst:true})}for(f=g,e=h.childNodes.length;f<e;f++){h.childNodes[f].updateInfo(false,{index:f})}}else{if(b){b.updateInfo(false,{isLast:true});if(b.isExpanded()){b.cascadeBy(h.triggerUIUpdate)}else{b.triggerUIUpdate()}}}if(!h.childNodes.length){h.triggerUIUpdate()}Ext.resumeLayouts(true);if(k!==true){h.callTreeStore("beforeNodeRemove",[[d],!!j]);d.previousSibling=d.nextSibling=d.parentNode=null;h.fireEventArgs("remove",[h,d,!!j]);h.callTreeStore("onNodeRemove",[[d],!!j])}if(c){d.erase(true)}else{d.clear()}return d},copy:function(e,d){var g=this,c=g.callParent([e,d]),b=g.childNodes?g.childNodes.length:0,f;if(d){for(f=0;f<b;f++){c.appendChild(g.childNodes[f].copy(undefined,true))}}return c},clear:function(b){var c=this;c.parentNode=c.previousSibling=c.nextSibling=null;if(b){c.firstChild=c.lastChild=null}},drop:function(){var e=this,f=e.childNodes,c=e.parentNode,b=f?f.length:0,d;e.callParent();for(d=0;d<b;d++){f[d].drop()}if(c){c.removeChild(e)}},erase:function(b){var e=this,d=e.destroyOptions,c=e.childNodes,f=c.length,g;if(b===true){e.clear(true);for(g=0;g<f;g++){c[g].erase(true)}e.childNodes=null;delete e.destroyOptions;e.callParent([d])}else{e.destroyOptions=b;e.remove(true)}},insertBefore:function(d,h,m){var j=this,g=j.indexOf(h),k=d.parentNode,l=g,e,b,f,c=j.getTreeStore();if(!h){return j.appendChild(d)}if(d===h){return false}d=j.createNode(d);if(m!==true&&j.fireEventArgs("beforeinsert",[j,d,h])===false){return false}if(k===j&&j.indexOf(d)<g){l--}if(k){if(k.removeChild(d,false,m,k.getTreeStore()===j.getTreeStore())===false){return false}}c&&c.beginUpdate();if(l===0){j.setFirstChild(d)}Ext.Array.splice(j.childNodes,l,0,d);d.parentNode=j;d.nextSibling=h;h.previousSibling=d;b=j.childNodes[l-1];if(b){d.previousSibling=b;b.nextSibling=d}else{d.previousSibling=null}d.updateInfo(false,{parentId:j.getId(),index:l,isFirst:l===0,isLast:false,depth:(j.data.depth||0)+1});for(f=l+1,e=j.childNodes.length;f<e;f++){j.childNodes[f].updateInfo(false,{index:f})}if(!j.isLoaded()){j.set("loaded",true)}else{if(j.childNodes.length===1){j.triggerUIUpdate()}}if(m!==true){j.fireEventArgs("insert",[j,d,h]);if(k){d.fireEventArgs("move",[d,k,j,l,h])}}j.callTreeStore("onNodeInsert",[d,l]);c&&c.endUpdate();return d},insertChild:function(b,d){var c=this.childNodes[b];if(c){return this.insertBefore(d,c)}else{return this.appendChild(d)}},isLastVisible:function(){var d=this,b=d.data.isLast,c=d.nextSibling;if(!b&&d.getTreeStore().isFiltered()){while(c){if(c.data.visible){return false}c=c.nextSibling}return true}return b},remove:function(c,d){var e=this,b=e.parentNode;if(b){b.removeChild(e,c,d)}else{if(c){e.erase(true)}}return e},removeAll:function(d,e,j){var g=this,h=g.childNodes,c=0,b=h.length,f;if(!b){return}if(!j){g.callTreeStore("beforeNodeRemove",[h,false])}for(;c<b;++c){f=h[c];f.previousSibling=f.nextSibling=f.parentNode=null;g.fireEventArgs("remove",[g,f,false]);if(d){f.erase(true)}else{f.removeAll(false,e,true)}}if(!j){g.callTreeStore("onNodeRemove",[h,false])}g.firstChild=g.lastChild=null;g.childNodes.length=0;if(!j){g.triggerUIUpdate()}return g},getChildAt:function(b){return this.childNodes[b]},replaceChild:function(b,e,d){var c=e?e.nextSibling:null;this.removeChild(e,false,d);this.insertBefore(b,c,d);return e},indexOf:function(b){return Ext.Array.indexOf(this.childNodes,b)},indexOfId:function(e){var d=this.childNodes,b=d.length,c=0;for(;c<b;++c){if(d[c].getId()===e){return c}}return -1},getPath:function(e,d){e=e||this.idProperty;d=d||"/";var c=[this.get(e)],b=this.parentNode;while(b){c.unshift(b.get(e));b=b.parentNode}return d+c.join(d)},getDepth:function(){return this.get("depth")},bubble:function(d,c,b){var e=this;while(e){if(d.apply(c||e,b||[e])===false){break}e=e.parentNode}},cascadeBy:function(g,d,b,j){var f=this;if(arguments.length===1&&!Ext.isFunction(g)){j=g.after;d=g.scope;b=g.args;g=g.before}if(!g||g.apply(d||f,b||[f])!==false){var h=f.childNodes,e=h.length,c;for(c=0;c<e;c++){h[c].cascadeBy.call(h[c],g,d,b,j)}if(j){j.apply(d||f,b||[f])}}},eachChild:function(e,d,b){var g=this.childNodes,f=g.length,c;for(c=0;c<f;c++){if(e.apply(d||this,b||[g[c]])===false){break}}},findChild:function(c,d,b){return this.findChildBy(function(){return this.get(c)==d},null,b)},findChildBy:function(h,g,c){var f=this.childNodes,b=f.length,e=0,j,d;for(;e<b;e++){j=f[e];if(h.call(g||j,j)===true){return j}else{if(c){d=j.findChildBy(h,g,c);if(d!==null){return d}}}}return null},contains:function(b){return b.isAncestor(this)},isAncestor:function(b){var c=this.parentNode;while(c){if(c===b){return true}c=c.parentNode}return false},sort:function(k,d,j){var g=this,h=g.childNodes,f=h.length,e,c,b={isFirst:true};if(f>0){if(!k){k=g.getTreeStore().getSortFn()}Ext.Array.sort(h,k);g.setFirstChild(h[0]);g.setLastChild(h[f-1]);for(e=0;e<f;e++){c=h[e];c.previousSibling=h[e-1];c.nextSibling=h[e+1];b.isLast=(e===f-1);b.index=e;c.updateInfo(false,b);b.isFirst=false;if(d&&!c.isLeaf()){c.sort(k,true,true)}}if(j!==true){g.fireEventArgs("sort",[g,h]);g.callTreeStore("onNodeSort",[h])}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var b=this.parentNode;while(b){if(!b.isExpanded()){return false}b=b.parentNode}return true},expand:function(b,e,c){var d=this;if(!d.isLeaf()){if(d.isLoading()){d.on("expand",function(){d.expand(b,e,c)},d,{single:true})}else{if(!d.isExpanded()){if(d.fireEventArgs("beforeexpand",[d])!==false){d.callTreeStore("onBeforeNodeExpand",[d.onChildNodesAvailable,d,[b,e,c]])}}else{if(b){d.expandChildren(true,e,c)}else{Ext.callback(e,c||d,[d.childNodes])}}}}else{Ext.callback(e,c||d)}},onChildNodesAvailable:function(b,c,f,d){var e=this;Ext.suspendLayouts();e.set("expanded",true);e.callTreeStore("onNodeExpand",[b,false]);e.fireEventArgs("expand",[e,b]);if(c){e.expandChildren(true,f,d)}else{Ext.callback(f,d||e,[e.childNodes])}Ext.resumeLayouts(true)},expandChildren:function(f,m,n,g){var k=this,l,h,c,b,j,e,d;if(Ext.isBoolean(m)){l=m;m=n;n=g;g=l}if(g===undefined){d=k.getTreeStore();g=d&&d.singleExpand}c=k.childNodes;b=[];j=g?Math.min(c.length,1):c.length;for(h=0;h<j;++h){e=c[h];if(!e.isLeaf()){b[b.length]=e}}j=b.length;for(h=0;h<j;++h){b[h].expand(f)}if(m){Ext.callback(m,n||k,[k.childNodes])}},collapse:function(d,j,f){var g=this,c=g.isExpanded(),b=g.childNodes.length,e,h;if(!g.isLeaf()&&((!c&&d)||g.fireEventArgs("beforecollapse",[g])!==false)){Ext.suspendLayouts();if(g.isExpanded()){if(d){h=function(){for(e=0;e<b;e++){g.childNodes[e].setCollapsed(true)}};if(j){j=Ext.Function.createSequence(h,Ext.Function.bind(j,f,[g.childNodes]))}else{j=h}}else{if(j){j=Ext.Function.bind(j,f,[g.childNodes])}}g.set("expanded",false);g.callTreeStore("onNodeCollapse",[g.childNodes,j,f]);g.fireEventArgs("collapse",[g,g.childNodes]);j=null}else{if(d){for(e=0;e<b;e++){g.childNodes[e].setCollapsed(true)}}}Ext.resumeLayouts(true)}Ext.callback(j,f||g,[g.childNodes])},setCollapsed:function(c){var e=this,b=e.childNodes.length,d;if(!e.isLeaf()&&e.fireEventArgs("beforecollapse",[e])!==false){e.data.expanded=false;e.fireEventArgs("collapse",[e,e.childNodes]);if(c){for(d=0;d<b;d++){e.childNodes[d].setCollapsed(true)}}}},collapseChildren:function(d,j,k){var h=this,f,b=h.childNodes,g=b.length,e=[],c;for(f=0;f<g;++f){c=b[f];if(!c.isLeaf()&&c.isLoaded()&&c.isExpanded()){e.push(c)}}g=e.length;if(g){for(f=0;f<g;++f){c=e[f];if(f===g-1){c.collapse(d,j,k)}else{c.collapse(d)}}}else{Ext.callback(j,k)}},fireEvent:function(b){return this.fireEventArgs(b,Ext.Array.slice(arguments,1))},fireEventArgs:function(c,e){var g=Ext.mixin.Observable.prototype.fireEventArgs,b,f,d;if(a[c]){for(f=this;b!==false&&f;f=(d=f).parentNode){if(f.hasListeners&&f.hasListeners[c]){b=g.call(f,c,e)}}if(b!==false){f=d.getTreeStore();if(f&&f.hasListeners&&f.hasListeners[c="node"+c]){b=f.fireEventArgs(c,e)}}return b}else{return g.apply(this,arguments)}},serialize:function(){var c=Ext.data.writer.Json.prototype.getRecordData(this),f=this.childNodes,b=f.length,e,d;if(b>0){e=[];for(d=0;d<b;d++){e.push(f[d].serialize())}c.children=e}return c},callTreeStore:function(e,b){var d=this.getTreeStore(),c=d&&d[e];if(d&&c){(b||(b=[])).unshift(this);c.apply(d,b)}},privates:{join:function(b){if(b.isTreeStore){if(this.isRoot()){this.treeStore=this.store=b}}else{this.callParent([b])}},callJoined:function(c,b){this.callParent([c,b]);this.callTreeStore(c,b)}}}}}},0,0,0,0,0,0,[Ext.data,"NodeInterface"],0));(Ext.cmd.derive("Ext.data.NodeStore",Ext.data.Store,{isNodeStore:true,config:{node:null,recursive:false,rootVisible:false,folderSort:false},isExpandingOrCollapsing:0,getTotalCount:function(){return this.getCount()},afterEdit:function(a,b){if(this.getNode()&&b){if(b.indexOf("loaded")!==-1){return this.add(this.retrieveChildNodes(a))}if(b.indexOf("expanded")!==-1){return this.filter()}if(b.indexOf("sorted")!==-1){return this.sort()}}Ext.data.Store.prototype.afterEdit.apply(this,arguments)},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(a,c){var b=this;if(!c){c=null}if(b.contains(a)){b.onUpdate(a,Ext.data.Model.COMMIT,c);b.fireEvent("update",b,a,Ext.data.Model.COMMIT,c)}},onNodeAppend:function(a,b){this.add([b].concat(this.retrieveChildNodes(b)))},onNodeInsert:function(a,b){this.add([b].concat(this.retrieveChildNodes(b)))},onNodeRemove:function(a,b){this.remove([b].concat(this.retrieveChildNodes(b)))},onNodeExpand:function(b,a){this.loadRecords(a)},applyNode:function(a){if(a){Ext.data.NodeInterface.decorate(a)}return a},updateNode:function(b,d){var a=this,c;if(d&&!d.isDestroyed){d.un({append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad",scope:a});d.unjoin(a)}if(b){b.on({scope:a,append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad"});b.join(a);c=[];if(b.childNodes.length){c=c.concat(a.retrieveChildNodes(b))}if(a.getRootVisible()){c.push(b)}else{if(b.isLoaded()||b.isLoading()){b.set("expanded",true)}}a.getData().clear();a.fireEvent("clear",a);a.suspendEvents();a.add(c);a.resumeEvents();if(c.length===0){a.loaded=b.loaded=true}a.fireEvent("refresh",a,a.data)}},retrieveChildNodes:function(a){var d=this.getNode(),b=this.getRecursive(),c=[],e=a;if(!a.childNodes.length||(!b&&a!==d)){return c}if(!b){return a.childNodes}while(e){if(e._added){delete e._added;if(e===a){break}else{e=e.nextSibling||e.parentNode}}else{if(e!==a){c.push(e)}if(e.firstChild){e._added=true;e=e.firstChild}else{e=e.nextSibling||e.parentNode}}}return c},isVisible:function(b){var a=b.parentNode;if(!this.getRecursive()&&a!==this.getNode()){return false}while(a){if(!a.isExpanded()){return false}if(a===this.getNode()){break}a=a.parentNode}return true}},0,0,0,0,["store.node"],0,[Ext.data,"NodeStore"],0));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:undefined,params:undefined,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:false,username:null,password:null,binary:false,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(a){var c=this.getParams(),b;if(c){return c[a]}return b},setParam:function(a,b){var c=this.getParams()||{};c[a]=b;this.setParams(c)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.TreeModel",Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode}},0,0,0,0,0,[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.data,"TreeModel"],function(){Ext.data.NodeInterface.decorate(this)}));(Ext.cmd.derive("Ext.data.TreeStore",Ext.data.NodeStore,{isTreeStore:true,config:{root:null,rootVisible:false,recursive:true,defaultRootProperty:"children",parentIdProperty:null},clearOnLoad:true,clearRemovedOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",fillCount:0,folderSort:false,constructor:function(a){var b=this;b.byIdMap={};b.byInternalIdMap={};Ext.data.NodeStore.prototype.constructor.call(this,a)},applyFields:function(a){var b=this;if(a){if(b.defaultRootProperty!==b.self.prototype.config.defaultRootProperty){a=a.concat({name:b.defaultRootProperty,type:"auto",defaultValue:null,persist:false})}b.setModel(Ext.define(null,{extend:"Ext.data.TreeModel",fields:a,proxy:b.getProxy()}));b.implicitModel=true}},onSorterEndUpdate:function(){var c=this,a=c.getSorters(),d=a.getRange(),b=c.getRoot();if(b&&d.length){if(c.getRemoteSort()){c.attemptLoad({callback:function(){c.fireEvent("sort",c,d)}})}else{b.sort(this.getSortFn(),true);c.fireEvent("datachanged",c);c.fireEvent("refresh",c);c.fireEvent("sort",c,d)}}else{c.fireEvent("sort",c,d)}},updateRemoteFilter:function(){var b=this.getData(),a=this.getFilters();b.setFilters(null);a.on("endupdate",this.onFilterEndUpdate,this)},updateRemoteSort:function(){var a=this.getData(),b=this.getSorters();a.setSorters(null);b.on("endupdate",this.onSorterEndUpdate,this)},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var b=this.sorters.getSortFn(),a=b;if(this.getFolderSort()){a=function(d,c){var e=d.get("leaf")?1:0,f=c.get("leaf")?1:0;return(e-f)||b(d,c)}}return a},updateRootVisible:function(b){var a=this.getRoot(),c;if(a){c=this.getData();if(b){c.insert(0,a)}else{c.remove(a)}}},updateTrackRemoved:function(a){Ext.data.NodeStore.prototype.updateTrackRemoved.apply(this,arguments);this.removedNodes=this.removed;this.removed=null},getRemovedRecords:function(){return this.removedNodes},onDestroyRecords:function(b,a,c){if(c){this.removedNodes.length=0}},applyProxy:function(b){var c=this,a;c.changingProxy=true;b=Ext.data.NodeStore.prototype.applyProxy.apply(this,arguments);if(b.setIdParam){b.setIdParam(c.nodeParam)}if(Ext.isEmpty(b.getReader().getRootProperty())){a=b.getReader();a.setRootProperty(c.defaultRootProperty);a.buildExtractors(true)}c.changingProxy=false;return b},applyModel:function(a){return Ext.data.NodeStore.prototype.applyModel.apply(this,arguments)||Ext.data.TreeModel},updateModel:function(a){var b=a.prototype.isNode;Ext.data.NodeInterface.decorate(a);if(!b&&!this.changingProxy){this.getProxy().getReader().buildExtractors(true)}},onFilterEndUpdate:function(e){var d=this,b,c=e.length,g=e.getFilterFn(),a=d.getRoot(),f;if(c){f=[];a.cascadeBy({after:function(h){h.set("visible",g(h))}});for(b=0,c=a.childNodes.length;b<c;b++){if(a.childNodes[b].get("visible")){f.push(a.childNodes[b])}}}else{f=a.childNodes}d.onNodeFilter(a,f);a.fireEvent("filterchange",a,f);d.fireEvent("filterchange",d,e);Ext.data.NodeStore.prototype.onFilterEndUpdate.call(this,e)},clearFilter:function(){var b=this,a=b.getRoot();Ext.data.NodeStore.prototype.clearFilter.call(this);b.filterFn=null;a.cascadeBy(function(c){c.set("visible",true)});b.onNodeFilter(a,a.childNodes);a.fireEvent("filterchange",a,a.childNodes);b.fireEvent("filterchange",b,[])},onNodeFilter:function(a,e){var c=this,d=c.getData(),b=[];c.handleNodeExpand(a,e,b);c.suspendEvents();d.splice(0,d.getCount(),b);c.resumeEvents();c.fireEvent("datachanged",c);c.fireEvent("refresh",c)},onBeforeNodeExpand:function(b,l,m,g){var h=this,j,d,k,f,a,c,e;if(b.isLoaded()){c=[b.childNodes];if(g){c.push.apply(c,g)}Ext.callback(l,m||b,c)}else{if(b.isLoading()){h.on("load",function(){c=[b.childNodes];if(g){c.push.apply(c,g)}Ext.callback(l,m||b,c)},h,{single:true,priority:1001})}else{j=h.getProxy().getReader();d=b.getProxy();k=d?d.getReader():null;f=k&&k.initialConfig.rootProperty?k:j;a=f.getRoot(b.raw||b.data);if(a||b.phantom){e=b.childType;if(a){h.fillNode(b,f.extractData(a,e?{model:e}:undefined))}c=[b.childNodes];if(g){c.push.apply(c,g)}Ext.callback(l,m||b,c)}else{h.read({node:b,onChildNodesAvailable:function(){delete h.lastOptions.onChildNodesAvailable;c=[b.childNodes];if(g){c.push.apply(c,g)}Ext.callback(l,m||b,c)}})}}}},onNodeExpand:function(d,b){var e=this,a=e.indexOf(d)+1,c=[];e.handleNodeExpand(d,b,c);if(!e.refreshCounter&&d.isRoot()&&!d.get("visible")){e.loadRecords(c)}else{e.insert(a,c)}},handleNodeExpand:function(e,b,d){var g=this,f=b?b.length:0,c,a;if(e!==this.getRoot()&&!g.isVisible(e)){return}if(f){for(c=0;c<f;c++){a=b[c];if(a.get("visible")){d.push(a);if(a.isExpanded()){if(a.isLoaded()){g.handleNodeExpand(a,a.childNodes,d)}else{a.set("expanded",false);a.expand()}}}}}},onNodeCollapse:function(d,a,g,c){var e=this,b=e.indexOf(d)+1,f;if(!e.recursive&&d!==e.getRoot()){return}if(!e.remoteFilter&&e.getFilters().getCount()){a=Ext.Array.filter(a,e.filterVisible)}if(a.length&&e.data.contains(a[0])){f=e.indexOfNextVisibleNode(d);e.removeAt(b,f-b)}Ext.callback(g,c)},indexOfNextVisibleNode:function(b){var a;while(b.parentNode){for(a=b.nextSibling;a&&!a.get("visible");a=a.nextSibling){}if(a){return this.indexOf(a)}b=b.parentNode}return this.getCount()},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(b,f){if(!Ext.isArray(f)){f=[f]}var e=this,a=f.length,d,c;for(d=0;!c&&d<a;d++){if(f[d].get("visible")){c=f[d]}}if(c){e.startRemoveIndex=e.indexOf(f[0]);e.lastRemoveIndexPlusOne=e.indexOfNextVisibleNode(f[f.length-1])}else{e.startRemoveIndex=-1;e.lastRemoveIndexPlusOne=0}},onNodeRemove:function(d,j,h){var g=this,e=g.removedNodes,f=j.length,a=g.startRemoveIndex,b=g.lastRemoveIndexPlusOne,c;if(a!==-1){g.removeIsMove=h;g.removeAt(a,b-a);g.removeIsMove=false}for(c=0;c<f;c++){j[c].cascadeBy(function(k){if(e&&!h&&!k.phantom&&!g.loading){k.removedFrom=g.indexOf(k);e.push(k)}g.unregisterNode(k)})}},onNodeAppend:function(b,c,a){this.onNodeInsert(b,c,a)},onNodeInsert:function(n,a,g){var j=this,h,o,k,b,l,f,c=a.raw||a.data,m,e,d;if(j.filterFn){e=j.filterFn(a);a.set("visible",e);if(e){n.set("visible",j.filterFn(n))}}j.registerNode(a,true);j.beginUpdate();if(j.isVisible(a)){if(g===0||!a.previousSibling){h=n}else{for(o=a.previousSibling;o&&!o.get("visible");o=o.previousSibling){}while(o.isExpanded()&&o.lastChild){o=o.lastChild}h=o}j.insert(j.indexOf(h)+1,a);if(!a.isLeaf()&&a.isExpanded()){if(a.isLoaded()){j.onNodeExpand(a,a.childNodes)}else{if(!j.fillCount){a.set("expanded",false);a.expand()}}}}else{j.needsSync=j.needsSync||a.phantom||a.dirty}if(!a.isLeaf()&&!a.isLoaded()&&!j.lazyFill){k=j.getProxy().getReader();b=a.getProxy();l=b?b.getReader():null;f=l&&l.initialConfig.rootProperty?l:k;m=f.getRoot(c);if(m){d=a.childType;j.fillNode(a,f.extractData(m,d?{model:d}:undefined))}}j.endUpdate()},registerNode:function(f,a){var e=this,c,d,b;e.byIdMap[f.id]=f;e.byInternalIdMap[f.internalId]=f;if(a===true){c=f.childNodes;d=c.length;for(b=0;b<d;b++){e.registerNode(c[b],true)}}},unregisterNode:function(f,a){var e=this,c,d,b;delete e.byIdMap[f.id];delete e.byInternalIdMap[f.internalId];if(a===true){c=f.childNodes;d=c.length;for(b=0;b<d;b++){e.unregisterNode(c[b],true)}}},onNodeSort:function(b,c){var a=this;a.suspendAutoSync();if((a.indexOf(b)!==-1||(b===a.getRoot()&&!a.rootVisible)&&b.isExpanded())){Ext.suspendLayouts();a.onNodeCollapse(b,c);a.onNodeExpand(b,c);Ext.resumeLayouts(true)}a.resumeAutoSync(a.autoSync)},applyRoot:function(d){var b=this,c=b.getModel(),a=c.prototype.idProperty;if(d&&!d.isNode){d=Ext.apply({text:b.defaultRootText,root:true,isFirst:true,isLast:true,depth:0,index:0,parentId:null,allowDrag:false},d);if(b.defaultRootId&&d[a]===undefined){d[a]=b.defaultRootId}d=new c(d);d.store=d.treeStore=b}return d},updateRoot:function(d,a){var b=this,c;b.byIdMap={};b.byInternalIdMap={};b.getTrackRemoved();b.suspendEvents();b.getData().clear();if(d){if(d.fireEventArgs("beforeappend",[null,d])===false){d=null}else{if(c=d.parentNode){if(!c.removeChild(d,false,false,c.getTreeStore()===b)){return}}else{if((c=d.getTreeStore())&&c!==b&&d===c.getRoot()){c.setRoot(null)}}d.set("root",true);d.updateInfo(true,{isFirst:true,isLast:true,depth:0,index:0,parentId:null});d.fireEvent("append",null,d,false);d.fireEvent("rootchange",d);b.onNodeAppend(null,d,0)}}b.fireEvent("rootchange",d,a);if(a&&a.isModel){a.set("root",false);b.remove(a);a.fireEvent("remove",null,a,false);a.fireEvent("rootchange",null);a.store=a.treeStore=null}b.resumeEvents();if(d&&(b.autoLoad||d.isExpanded())){if(d.isLoaded()){b.onNodeExpand(d,d.childNodes);b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}else{d.data.expanded=false;d.expand(false,function(){b.fireEvent("datachanged",b);b.fireEvent("refresh",b)})}}return d},getNodeById:function(a){return this.byIdMap[a]||null},load:function(b){b=b||{};b.params=b.params||{};var f=this,e=b.node||f.getRoot(),c=f.getProxy(),g=b.callback,d=b.scope,a;if(!e){f.setRoot({expanded:true});return}if(e.data.expanded){e.data.loaded=false;if(f.clearOnLoad){e.data.expanded=false}b.callback=function(){if(!f.clearOnLoad){e.collapse()}e.expand();Ext.callback(g,d,arguments)}}b.id=e.getId();b=Ext.apply({filters:f.getFilters().items,sorters:f.getSorters().items,node:b.node||e,internalScope:f,internalCallback:f.onProxyLoad},b);f.lastOptions=Ext.apply({},b);a=c.createOperation("read",b);if(f.fireEvent("beforeload",f,a)!==false){f.loading=true;if(f.clearOnLoad){if(f.clearRemovedOnLoad){f.clearRemoved(e)}e.removeAll(false)}a.execute()}if(f.loading&&e){e.set("loading",true)}return f},clearRemoved:function(b){var j=this,e=j.removedNodes,a=b.getId(),d=e.length,c=d,m={},g=[],l={},h,f,k;if(b===j.getRoot()){j.removedNodes=[];return}for(;c--;){h=e[c];l[h.getId()]=h}for(c=d;c--;){h=e[c];f=h;while(f&&f.getId()!==a){k=f.get("parentId");f=f.parentNode||j.getNodeById(k)||l[k]}if(f){m[h.getId()]=h}}for(c=0;c<d;c++){h=e[c];if(!m[h.getId()]){g.push(h)}}j.removedNodes=g},fillNode:function(c,d){var g=this,b=d?d.length:0,f=g.getSorters(),e,h=false,a=g.sortOnLoad&&b>1&&!g.remoteSort&&f&&f.items&&f.items.length,k,j;if(b){if(!g.remoteFilter&&g.getFilters().getCount()){d[0].set("visible",g.filterFn(d[0]))}for(e=1;!h&&e<b;e++){k=d[e];j=d[e-1];if(g.filterFn){k.set("visible",g.filterFn(k))}h=k.data.index!==j.data.index}if(a){if(h){g.indexSorter=f.insert(0,g.indexSorter)}Ext.Array.sort(d,f.getSortFn());if(h){f.remove(g.indexSorter)}}else{if(h){Ext.Array.sort(d,g.sortByIndex)}}}c.set("loaded",true);if(d.length){c.appendChild(d,undefined,true)}return d},beginFill:function(){var a=this;if(!a.fillCount++){a.beginUpdate();a.suspendEvent("add","update");a.suspendAutoSync();a.fillArray=[]}},endFill:function(e,b){var f=this,d,a,c;f.fillArray.push(b);if(!--f.fillCount){f.resumeAutoSync();f.resumeEvent("add","update");for(d=0,a=f.fillArray.length;d<a;d++){c=f.indexOf(f.fillArray[d][0]);if(c!==-1){f.fireEvent("add",f,f.fillArray[d],c)}}f.fillArray=null;f.endUpdate()}},sortByIndex:function(b,a){return b.data.index-a.data.index},onIdChanged:function(d,f,b){var e=d.childNodes,a=e&&e.length,c;Ext.data.NodeStore.prototype.onIdChanged.apply(this,arguments);delete this.byIdMap[f];this.byIdMap[b]=d;for(c=0;c<a;c++){e[c].set("parentId",b)}},onProxyLoad:function(b){var g=this,d=b.initialConfig,h=b.wasSuccessful(),a=b.getRecords(),f=d.node,e=b.getScope()||g,c=[a,b,h];if(g.isDestroyed){return}g.loading=false;f.set("loading",false);if(h){if(!g.clearOnLoad){a=g.cleanRecords(f,a)}if(g.parentIdProperty){a=g.treeify(f,a)}a=g.fillNode(f,a)}Ext.callback(d.onChildNodesAvailable,e,c);g.fireEvent("load",g,a,h,b,f)},treeify:function(e,b){var h=this,j=e.getId(),f=b.length,c,a,d,k=[],g={};for(c=0;c<f;c++){a=b[c];g[a.getId()]=a}for(c=0;c<f;c++){a=b[c];d=a.data[h.parentIdProperty];if(!d||d===j){k.push(a)}else{g[d].appendChild(a)}}return k},cleanRecords:function(f,b){var e={},h=f.childNodes,d=0,a=h.length,c=[],g;for(;d<a;++d){e[h[d].getId()]=true}for(d=0,a=b.length;d<a;++d){g=b[d];if(!e[g.getId()]){c.push(g)}}return c},removeAll:function(){this.suspendEvents();this.setRoot(null);this.resumeEvents();Ext.data.NodeStore.prototype.removeAll.call(this)},doSort:function(a){var b=this;if(b.remoteSort){b.load()}else{b.tree.sort(a,true);b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}b.fireEvent("sort",b,b.sorters.getRange())},filterVisible:function(a){return a.get("visible")},isVisible:function(c){var a=c.parentNode,d=c.data.visible,b=this.getRoot();while(d&&a){d=a.data.expanded&&a.data.visible;a=a.parentNode}return d&&!(c===b&&!this.rootVisible)},getRootNode:function(){return this.getRoot()},setRootNode:function(a){this.setRoot(a);return this.getRoot()},deprecated:{5:{properties:{tree:null}}}},1,0,0,0,["store.tree"],0,[Ext.data,"TreeStore"],function(){var a=this.prototype;a.indexSorter=new Ext.util.Sorter({sorterFn:a.sortByIndex})}));(Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:true,syncGeneration:0,attach:function(a){this.record=a;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return a.dirty},refresh:function(b){var t=this,u=t.data,d=t.record,k=d.fields,n=d.generation,s=d.data,h=d.validationSeparator,c=null,e,g,l,a,q,o,m,r,p,f,w,v;if(b||t.syncGeneration!==n){t.syncGeneration=n;for(o=0,p=k.length;o<p;++o){a=k[o];v=a.name;w=s[v];e=a.defaultInvalidMessage;l=0;if(!(v in u)){u[v]=g=true}else{g=u[v]}if(a.validate!==Ext.emptyFn){f=a.validate(w,h);if(f!==true){l=f||e}}if(!l){l=true}if(l!==g){(c||(c={}))[v]=l}}if(c){t.set(c)}}}},0,0,0,0,0,0,[Ext.data,"Validation"],0));(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var a="afterbegin",f="afterend",g="beforebegin",d="beforeend",h=["BeforeBegin","previousSibling"],e=["AfterEnd","nextSibling"],c={beforebegin:h,afterend:e},b={beforebegin:h,afterend:e,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:true,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var l=/([a-z])([A-Z])/g,k={};function j(m,o,n){return o+"-"+n.toLowerCase()}return function(m){return k[m]||(k[m]=m.replace(l,j))}}(),generateMarkup:function(q,k){var p=this,o=typeof q,n,j,r,m,l;if(o==="string"||o==="number"){k.push(q)}else{if(Ext.isArray(q)){for(m=0;m<q.length;m++){if(q[m]){p.generateMarkup(q[m],k)}}}else{r=q.tag||"div";k.push("<",r);for(n in q){if(q.hasOwnProperty(n)){j=q[n];if(j!==undefined&&!p.confRe.test(n)){if(typeof j==="object"){k.push(" ",n,'="');p.generateStyles(j,k,true).push('"')}else{k.push(" ",p.attributeTransform[n]||n,'="',j,'"')}}}}if(p.emptyTags.test(r)){k.push("/>")}else{k.push(">");if((j=q.tpl)){j.applyOut(q.tplData,k)}if((j=q.html)){k.push(j)}if((j=q.cn||q.children)){p.generateMarkup(j,k)}l=p.closeTags;k.push(l[r]||(l[r]="</"+r+">"))}}}return k},generateStyles:function(n,k,m){var j=k||[],l,o;for(l in n){if(n.hasOwnProperty(l)){o=n[l];l=this.decamelizeName(l);if(m&&Ext.String.hasHtmlCharacters(o)){o=Ext.String.htmlEncode(o)}j.push(l,":",o,";")}}return k||j.join("")},markup:function(j){if(typeof j==="string"){return j}var k=this.generateMarkup(j,[]);return k.join("")},applyStyles:function(j,k){Ext.fly(j).applyStyles(k)},createContextualFragment:function(k){var n=this.detachedDiv,j=document.createDocumentFragment(),l,m;n.innerHTML=k;m=n.childNodes;l=m.length;while(l--){j.appendChild(m[0])}return j},createDom:function(m,j){var l=this,k=l.markup(m),n=l.detachedDiv;n.innerHTML=k;return n.firstChild},insertHtml:function(m,j,n){var r=this,k,o,l,q,s;m=m.toLowerCase();if(j.insertAdjacentHTML){if(r.ieInsertHtml){s=r.ieInsertHtml(m,j,n);if(s){return s}}k=b[m];if(k){j.insertAdjacentHTML(k[0],n);return j[k[1]]}}else{if(j.nodeType===3){m=m===a?g:m;m=m===d?f:m}o=Ext.supports.CreateContextualFragment?j.ownerDocument.createRange():undefined;q="setStart"+(this.endRe.test(m)?"After":"Before");if(c[m]){if(o){o[q](j);s=o.createContextualFragment(n)}else{s=this.createContextualFragment(n)}j.parentNode.insertBefore(s,m===g?j:j.nextSibling);return j[(m===g?"previous":"next")+"Sibling"]}else{l=(m===a?"first":"last")+"Child";if(j.firstChild){if(o){try{o[q](j[l]);s=o.createContextualFragment(n)}catch(p){s=this.createContextualFragment(n)}}else{s=this.createContextualFragment(n)}if(m===a){j.insertBefore(s,j.firstChild)}else{j.appendChild(s)}}else{j.innerHTML=n}return j[l]}}},insertBefore:function(j,l,k){return this.doInsert(j,l,k,g)},insertAfter:function(j,l,k){return this.doInsert(j,l,k,f)},insertFirst:function(j,l,k){return this.doInsert(j,l,k,a)},append:function(j,l,k){return this.doInsert(j,l,k,d)},overwrite:function(l,k,n){var m=this,j;l=Ext.getDom(l);k=m.markup(k);if(m.ieOverwrite){j=m.ieOverwrite(l,k)}if(!j){l.innerHTML=k;j=l.firstChild}return n?Ext.get(j):j},doInsert:function(l,p,n,j){var m=this,k;l=l.dom||Ext.getDom(l);if("innerHTML" in l){k=m.insertHtml(j,l,m.markup(p))}else{k=m.createDom(p,null);if(l.nodeType===3){j=j===a?g:j;j=j===d?f:j}if(c[j]){l.parentNode.insertBefore(k,j===g?l:l.nextSibling)}else{if(l.firstChild&&j===a){l.insertBefore(k,l.firstChild)}else{l.appendChild(k)}}}return n?Ext.get(k):k},createTemplate:function(k){var j=this.markup(k);return new Ext.Template(j)},createHtml:function(j){return this.markup(j)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0));Ext.define("Ext.overrides.dom.Helper",(function(){var c=/^(?:table|thead|tbody|tr|td)$/i,g=/td|tr|tbody|thead/i,f="<table>",h="</table>",b=f+"<tbody>",e="</tbody>"+h,a=b+"<tr>",d="</tr>"+e;return{override:"Ext.dom.Helper",ieInsertHtml:function(j,l,k){var m=null;if(Ext.isIE9m&&c.test(l.tagName)){m=this.insertIntoTable(l.tagName.toLowerCase(),j,l,k)}return m},ieOverwrite:function(k,j){if(Ext.isIE9m&&c.test(k.tagName)){while(k.firstChild){k.removeChild(k.firstChild)}if(j){return this.insertHtml("afterbegin",k,j)}}},ieTable:function(p,k,q,o){var l=-1,n=this.detachedDiv,m,j;n.innerHTML=[k,q,o].join("");while(++l<p){n=n.firstChild}m=n.nextSibling;if(m){m=n;n=document.createDocumentFragment();while(m){j=m.nextSibling;n.appendChild(m);m=j}}return n},insertIntoTable:function(s,l,k,m){var j,p,o=l==="beforebegin",r=l==="afterbegin",n=l==="beforeend",q=l==="afterend";if(s==="td"&&(r||n)||!g.test(s)&&(o||q)){return null}p=o?k:q?k.nextSibling:r?k.firstChild:null;if(o||q){k=k.parentNode}if(s==="td"||(s==="tr"&&(n||r))){j=this.ieTable(4,a,m,d)}else{if(((s==="tbody"||s==="thead")&&(n||r))||(s==="tr"&&(o||q))){j=this.ieTable(3,b,m,e)}else{j=this.ieTable(2,f,m,h)}}k.insertBefore(j,p);return j}}})());(Ext.cmd.derive("Ext.data.identifier.Uuid",Ext.data.identifier.Generator,{isUnique:true,config:{id:null},constructor:function(a){Ext.data.identifier.Generator.prototype.constructor.call(this,a);this.reconfigure(a)},reconfigure:function(b){var a=this.self;this.generate=(b&&b.version===1)?a.createSequential(b.salt,b.timestamp,b.clockSeq):a.createRandom()},clone:null,statics:{createRandom:function(){var c="xxxxxxxx-xxxx-4xxx-Rxxx-xMxxxxxxxxxx".split(""),b="0123456789abcdef".split(""),a=c.length,d=[];return function(){for(var f,g,e=0;e<a;++e){g=c[e];if(g!=="-"&&g!=="4"){f=Math.random()*16;f=(g==="R")?(f&3|8):(f|((g==="M")?1:0));g=b[f]}d[e]=g}return d.join("")}},createSequential:function(g,b,e){var f=[],k=Math.pow(2,32),h=g.lo,c=g.hi,j=b.lo,d=b.hi,a=function(n,m){var l=n.toString(16).toLowerCase();if(l.length>m){l=l.substring(l.length-m)}else{if(l.length<m){l=Ext.String.leftPad(l,m,"0")}}return l};if(typeof g==="number"){c=Math.floor(g/k);h=Math.floor(g-c*k)}if(typeof b==="number"){d=Math.floor(b/k);j=Math.floor(b-d*k)}c|=256;f[3]=a(128|((e>>>8)&63),2)+a(e&255,2);f[4]=a(c,4)+a(h,8);return function(){f[0]=a(j,8);f[1]=a(d&65535,4);f[2]=a(((d>>>16)&4095)|(1<<12),4);++j;if(j>=k){j=0;++d}return f.join("-")}}}},1,0,0,0,["data.identifier.uuid"],0,[Ext.data.identifier,"Uuid"],function(){this.Global=new this({id:"uuid"})}));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var b=Ext.Date.now()-this.getStartTime(),c=(b/this.getAcceleration()),a=c*Math.pow(Math.E,-this.getSpringTension()*c);return this.getStartValue()+(this.getStartVelocity()*a)}},0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0));(Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-(b/10));this.theta=a;this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a;this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0));(Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(a,b){return Ext.factory(a,Ext.fx.easing.Momentum,b)},applyBounce:function(a,b){return Ext.factory(a,Ext.fx.easing.Bounce,b)},updateStartTime:function(a){this.getMomentum().setStartTime(a);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){this.lastValue=null;this.isBouncingBack=false;this.isOutOfBound=false;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var a=this.getMomentum(),k=this.getBounce(),e=a.getStartVelocity(),f=e>0?1:-1,g=this.getMinMomentumValue(),d=this.getMaxMomentumValue(),c=(f==1)?d:g,h=this.lastValue,j,b;if(e===0){return this.getStartValue()}if(!this.isOutOfBound){j=a.getValue();b=a.getVelocity();if(Math.abs(b)<this.getMinVelocity()){this.isEnded=true}if(j>=g&&j<=d){return j}this.isOutOfBound=true;k.setStartTime(Ext.Date.now()).setStartVelocity(b).setStartValue(c)}j=k.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(h!==null){if((f==1&&j<h)||(f==-1&&j>h)){this.isBouncingBack=true}}}else{if(Math.round(j)==c){this.isEnded=true}}}this.lastValue=j;return j}},0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((a/b)*this.distance)}}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var f=Ext.Date.now()-this.getStartTime(),d=this.getDuration(),b=this.getStartValue(),h=this.getEndValue(),a=this.distance,c=f/d,g=1-c,e=1-Math.pow(g,this.getExponent()),j=b+(e*a);if(f>=d){this.isEnded=true;return h}return j}},0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0));(Ext.cmd.derive("Ext.mixin.Responsive",Ext.Mixin,function(a){return{mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:undefined,merge:function(g,c,f,e){if(!g){return c}var b=c?Ext.Object.chain(c):{},d;for(d in g){if(!e||!(d in b)){b[d]={fn:null,config:g[d]}}}return b}},responsiveFormulas:{$value:0,merge:function(e,b,d,c){return this.mergeNew(e,b,d,c)}}},destroy:function(){a.unregister(this);this.callParent()},privates:{statics:{active:false,all:{},context:{},count:0,nextId:0,activate:function(){a.active=true;a.updateContext();Ext.on("resize",a.onResize,a)},createRuleFn:function(b){return new Function("$c","with($c) { return ("+b+"); }")},deactivate:function(){a.active=false;Ext.un("resize",a.onResize,a)},notify:function(){var d=a.all,c=a.context,b=Ext.GlobalEvents,f=a.timer,e;if(f){a.timer=null;Ext.Function.cancelAnimationFrame(f)}a.updateContext();Ext.suspendLayouts();b.fireEvent("beforeresponsiveupdate",c);for(e in d){d[e].setupResponsiveContext()}b.fireEvent("beginresponsiveupdate",c);for(e in d){d[e].updateResponsiveState()}b.fireEvent("responsiveupdate",c);Ext.resumeLayouts(true)},onResize:function(){if(!a.timer){a.timer=Ext.Function.requestAnimationFrame(a.onTimer)}},onTimer:function(){a.timer=null;a.notify()},processConfig:function(b,h,f){var g=h&&h[f],e=b.config,c,d;if(g){d=b.getConfigurator();c=d.configs[f];e[f]=c.merge(g,e[f],b)}},register:function(b){var c=b.$responsiveId;if(!c){b.$responsiveId=c=++a.nextId;a.all[c]=b;if(++a.count===1){a.activate()}}},unregister:function(b){var c=b.$responsiveId;if(c in a.all){b.$responsiveId=null;delete a.all[c];if(--a.count===0){a.deactivate()}}},updateContext:function(){var f=Ext.Element,e=f.getViewportWidth(),b=f.getViewportHeight(),c=Ext.Microloader,d=a.context;d.width=e;d.height=b;d.tall=e<b;d.wide=!d.tall;d.landscape=d.portrait=false;if(!d.platform){d.platform=(c&&c.platformTags)||{desktop:true}}if(!d.platform.desktop||Ext.supports.OrientationChange){d[Ext.dom.Element.getOrientation()]=true}else{d.landscape=true}}},afterClassMixedIn:function(f){var e=f.prototype,b=e.responsiveConfig,d=e.responsiveFormulas,c;if(b||d){c={};if(b){delete e.responsiveConfig;c.responsiveConfig=b}if(d){delete e.responsiveFormulas;c.responsiveFormulas=d}f.getConfigurator().add(c)}},applyResponsiveConfig:function(c){for(var b in c){c[b].fn=a.createRuleFn(b)}return c},applyResponsiveFormulas:function(d){var c={},e,b;if(d){for(b in d){if(Ext.isString(e=d[b])){e=a.createRuleFn(e)}c[b]=e}}return c},getResponsiveState:function(){var c=a.context,f=this.getResponsiveConfig(),b={},d,e;if(f){for(e in f){d=f[e];if(d.fn.call(this,c)){Ext.merge(b,d.config)}}}return b},setupResponsiveContext:function(){var c=this.getResponsiveFormulas(),d=a.context,b;if(c){for(b in c){d[b]=c[b].call(this,d)}}},transformInstanceConfig:function(d){var c=this,b;a.register(c);if(d){a.processConfig(c,d,"responsiveConfig");a.processConfig(c,d,"responsiveFormulas")}c.setupResponsiveContext();b=c.getResponsiveState();if(d){b=Ext.merge({},d,b);delete b.responsiveConfig;delete b.responsiveFormulas}return b},updateResponsiveState:function(){var b=this.getResponsiveState();this.setConfig(b)}}}},0,0,0,0,0,0,[Ext.mixin,"Responsive"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){var c=null,g=Ext.global.chrome,d,b=function(){b=Ext.now;var l,m;if(Ext.isChrome&&g&&g.Interval){l=new g.Interval();l.start();b=function(){return l.microseconds()/1000}}else{if(window.ActiveXObject){try{m=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=m;b=function(){return m.milliseconds}}catch(n){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=b;return b()};function h(m,l){m.sum+=l;m.min=Math.min(m.min,l);m.max=Math.max(m.max,l)}function e(o){var m=o?o:(b()-this.time),n=this,l=n.accum;++l.count;if(!--l.depth){h(l.total,m)}h(l.pure,m-n.childTime);c=n.parent;if(c){++c.accum.childCount;c.childTime+=m}}function a(){return{min:Number.MAX_VALUE,max:0,sum:0}}function j(m,l){return function(){var o=m.enter(),n=l.apply(this,arguments);o.leave();return n}}function k(l){return Math.round(l*100)/100}function f(n,m,l,p){var o={avg:0,min:p.min,max:p.max,sum:0};if(n){l=l||0;o.sum=p.sum-m*l;o.avg=o.sum/n}return o}return{constructor:function(l){var m=this;m.count=m.childCount=m.depth=m.maxDepth=0;m.pure=a();m.total=a();m.name=l},statics:{getTimestamp:b},format:function(l){if(!d){d=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(n){return Math.round(n*100)/100}})}var m=this.getData(l);m.name=this.name;m.pure.type="Pure";m.total.type="Total";m.times=[m.pure,m.total];return d.apply(m)},getData:function(l){var m=this;return{count:m.count,childCount:m.childCount,depth:m.maxDepth,pure:f(m.count,m.childCount,l,m.pure),total:f(m.count,m.childCount,l,m.total)}},enter:function(){var l=this,m={accum:l,leave:e,childTime:0,parent:c};++l.depth;if(l.maxDepth<l.depth){l.maxDepth=l.depth}c=m;m.time=b();return m},monitor:function(n,m,l){var o=this.enter();if(l){n.apply(m,l)}else{n.call(m)}o.leave()},report:function(){Ext.log(this.format())},tap:function(t,v){var u=this,o=typeof v=="string"?[v]:v,s,w,q,p,n,m,l,r;r=function(){if(typeof t=="string"){s=Ext.global;p=t.split(".");for(q=0,n=p.length;q<n;++q){s=s[p[q]]}}else{s=t}for(q=0,n=o.length;q<n;++q){m=o[q];w=m.charAt(0)=="!";if(w){m=m.substring(1)}else{w=!(m in s.prototype)}l=w?s:s.prototype;l[m]=j(u,l[m])}};Ext.ClassManager.onCreated(r,u,t);return u}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var b=new Ext.perf.Accumulator("$"),f=b.total,c=Ext.perf.Accumulator.getTimestamp,e=0,g,a,d;d=c();do{g=b.enter();g.leave();++e}while(f.sum<100);a=c();return(a-d)/e},get:function(b){var c=this,a=c.accumulatorsByName[b];if(!a){c.accumulatorsByName[b]=a=new Ext.perf.Accumulator(b);c.accumulators.push(a)}return a},enter:function(a){return this.get(a).enter()},monitor:function(a,c,b){this.get(a).monitor(c,b)},report:function(){var c=this,b=c.accumulators,a=c.calibrate();b.sort(function(e,d){return(e.name<d.name)?-1:((d.name<e.name)?1:0)});c.updateGC();Ext.log("Calibration: "+Math.round(a*100)/100+" msec/sample");Ext.each(b,function(d){Ext.log(d.format(a))})},getData:function(c){var b={},a=this.accumulators;Ext.each(a,function(d){if(c||d.count){b[d.name]=d.getData()}});return b},reset:function(){Ext.each(this.accumulators,function(a){var b=a;b.count=b.childCount=b.depth=b.maxDepth=0;b.pure={min:Number.MAX_VALUE,max:0,sum:0};b.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var a=this.accumulatorsByName.GC,b=Ext.senchaToolbox,c;if(a){a.count=b.garbageCollectionCounter||0;if(a.count){c=a.pure;a.total.sum=c.sum=b.garbageCollectionMilliseconds;c.min=c.max=c.sum/a.count;c=a.total;c.min=c.max=c.sum/a.count}}},watchGC:function(){Ext.perf.getTimestamp();var a=Ext.senchaToolbox;if(a){this.get("GC");a.watchGarbageCollector(false)}},setup:function(c){if(!c){c={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=c;var d,f,b,e,a;for(d in c){if(c.hasOwnProperty(d)){f=c[d];b=Ext.Perf.get(d);for(e in f){if(f.hasOwnProperty(e)){a=f[e];b.tap(e,a)}}}}this.watchGC()}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(a,c,b){if(b){return this.translateAnimated(a,c,b)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(a)&&typeof a=="number"){this.x=a}if(!isNaN(c)&&typeof c=="number"){this.y=c}this.doTranslate(a,c)},translateAxis:function(b,d,c){var a,e;if(b=="x"){a=d}else{e=d}return this.translate(a,e,c)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(b,a){this.activeEasingX=b;this.activeEasingY=a;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(b,h,f){var e=this;if(!Ext.isObject(f)){f={}}if(e.isAnimating){e.stopAnimation()}e.callback=f.callback;e.callbackScope=f.scope;var d=Ext.Date.now(),g=f.easing,c=(typeof b=="number")?(f.easingX||g||e.getEasingX()||true):null,a=(typeof h=="number")?(f.easingY||g||e.getEasingY()||true):null;if(c){c=e.factoryEasing(c);c.setStartTime(d);c.setStartValue(e.x);c.setEndValue(b);if("duration" in f){c.setDuration(f.duration)}}if(a){a=e.factoryEasing(a);a.setStartTime(d);a.setStartValue(e.y);a.setEndValue(h);if("duration" in f){a.setDuration(f.duration)}}return e.animate(c,a)},doAnimationFrame:function(){var e=this,c=e.activeEasingX,b=e.activeEasingY,d=Date.now(),a,f;if(!e.isAnimating){return}e.lastRun=d;if(c===null&&b===null){e.stopAnimation();return}if(c!==null){e.x=a=Math.round(c.getValue());if(c.isEnded){e.activeEasingX=null;e.fireEvent("axisanimationend",e,"x",a)}}else{a=e.x}if(b!==null){e.y=f=Math.round(b.getValue());if(b.isEnded){e.activeEasingY=null;e.fireEvent("axisanimationend",e,"y",f)}}else{f=e.y}if(e.lastX!==a||e.lastY!==f){e.doTranslate(a,f);e.lastX=a;e.lastY=f}e.fireEvent("animationframe",e,a,f)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=false;Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent("animationend",a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.apply(this,arguments)}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement();if(!this.isDestroyed&&!b.isDestroyed){b.translate(a,c)}},destroy:function(){var a=this.getElement();if(a&&!a.isDestroyed){a.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:true},getWrapper:function(){var c=this.wrapper,b=this.getElement(),a;if(!c){a=b.getParent();if(!a){return null}if(a.hasCls("x-translatable-hboxfix")){a=a.getParent()}if(this.getUseWrapper()){c=b.wrap()}else{c=a}b.addCls("x-translatable");c.addCls("x-translatable-container");this.wrapper=c;c.on("painted",function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return c},doTranslate:function(a,d){var c=this.getWrapper(),b;if(c){b=c.dom;if(typeof a=="number"){b.scrollLeft=500000-a}if(typeof d=="number"){b.scrollTop=500000-d}}},destroy:function(){var a=this.getElement(),b=this.wrapper;if(b){if(!a.isDestroyed){if(this.getUseWrapper()){b.doReplaceWith(a)}a.removeCls("x-translatable")}if(!b.isDestroyed){b.removeCls("x-translatable-container");b.un("painted","refresh",this)}delete this.wrapper;delete this._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollParent",Ext.util.translatable.Dom,{applyElement:function(a){var b=Ext.get(a);this.parent=b.parent();return b},doTranslate:function(a,c){var b=this.parent;b.setScrollLeft(Math.round(-a));b.setScrollTop(Math.round(-c))},getPosition:function(){var c=this,a=c.position,b=c.parent;a.x=b.getScrollLeft();a.y=b.getScrollTop();return a}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollParent"],0));(Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement().dom.style;if(typeof a=="number"){b.left=a+"px"}if(typeof c=="number"){b.top=c+"px"}},destroy:function(){var a=this.getElement().dom.style;a.left=null;a.top=null;Ext.util.translatable.Dom.prototype.destroy.apply(this,arguments)}},0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0));(Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case"scrollposition":return new b.ScrollPosition(a);case"scrollparent":return new b.ScrollParent(a);case"csstransform":return new b.CssTransform(a);case"cssposition":return new b.CssPosition(a)}}},1,0,0,0,0,0,[Ext.util,"Translatable"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{config:{element:null,direction:"auto",fps:"auto",disabled:null,directionLock:false,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},bounceEasing:{duration:400},outOfBoundRestrictFactor:0.5,startMomentumResetTime:300,maxAbsoluteVelocity:6,containerSize:"auto",size:"auto",autoRefresh:true,initialOffset:{x:0,y:0},slotSnapSize:{x:0,y:0},slotSnapOffset:{x:0,y:0},slotSnapEasing:{duration:150},translatable:{translationMethod:"auto",useWrapper:false},mouseEnabled:false,snapToBoundary:true},statics:{instances:{}},cls:"x-scroll-scroller",containerCls:"x-scroll-container",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},constructor:function(a){var c=this,b=a&&a.element,d="onEvent";c.listenerMap={touchstart:"onTouchStart",touchend:"onTouchEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"};c.listeners={touchstart:d,touchend:d,dragstart:d,drag:d,dragend:d,scope:c};c.minPosition={x:0,y:0};c.startPosition={x:0,y:0};c.lastMaxPosition={x:0,y:0};c.velocity={x:0,y:0};c.isAxisEnabledFlags={x:false,y:false};c.flickStartPosition={x:0,y:0};c.flickStartTime={x:0,y:0};c.lastDragPosition={x:0,y:0};c.dragDirection={x:0,y:0};c.initialConfig=a;if(b){c.setElement(b)}c.self.instances[c.id]=c;return this},initialize:function(){var a=this;if(!a.initialized){a.mixins.observable.constructor.call(a,a.initialConfig);a.initialized=true}},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(c){var e=this;e.initialize();if(!e.FixedHBoxStretching){c.addCls(e.cls)}if(!e.getDisabled()){e.attachListeners()}var d=function(){e.refreshMaxPosition()},f=Ext.Function.createSequence,b=e.updateContainerSize,a=e.updateSize;e.updateContainerSize=b?f(b,d):d;e.updateSize=a?f(a,d):d;e.on({maxpositionchange:"snapToBoundary",minpositionchange:"snapToBoundary",scope:e});return e},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},updateTranslatable:function(a){a.setConfig({element:this.getElement(),listeners:{animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this}})},updateFps:function(a){if(a!=="auto"){this.getTranslatable().setFps(a)}},attachListeners:function(){this.getContainer().on(this.listeners)},detachListeners:function(){this.getContainer().un(this.listeners)},updateDisabled:function(a){if(a){this.detachListeners()}else{this.attachListeners()}},updateInitialOffset:function(a){if(typeof a=="number"){a={x:a,y:a}}this.getTranslatable().translate(-a.x,-a.y)},applyDirection:function(a){var e=this.getMinPosition(),d=this.getMaxPosition(),c,b;this.givenDirection=a;if(a==="auto"){c=d.x>e.x;b=d.y>e.y;if(c&&b){a="both"}else{if(c){a="horizontal"}else{a="vertical"}}}return a},updateDirection:function(f,e){var b=this.isAxisEnabledFlags,d=this.cls+"-vertical",a=this.cls+"-horizontal",c=this.getElement();if(e==="both"||e==="horizontal"){c.removeCls(a)}if(e==="both"||e==="vertical"){c.removeCls(d)}b.x=b.y=false;if(f==="both"||f==="horizontal"){b.x=true;c.addCls(a)}if(f==="both"||f==="vertical"){b.y=true;c.addCls(d)}},isAxisEnabled:function(a){this.getDirection();return this.isAxisEnabledFlags[a]},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},getPosition:function(){return this.getTranslatable().getPosition()},getMinPosition:function(){var a=this.minPosition;if(!a){this.minPosition=a={x:0,y:0};this.fireEvent("minpositionchange",this,a)}return a},getMaxPosition:function(){var b=this,d=b.maxPosition,a,c;if(!d){a=b.getSize();c=b.getContainerSize();b.maxPosition=d={x:Math.max(0,a.x-c.x),y:Math.max(0,a.y-c.y)};if(d.x!==b.lastMaxPosition.x||d.y!==b.lastMaxPosition.y){b.fireEvent("maxpositionchange",b,d);b.lastMaxPosition.x=d.x;b.lastMaxPosition.y=d.y}}return d},refreshMaxPosition:function(){this.maxPosition=null;this.getMaxPosition()},applyContainerSize:function(b){var c=this.getContainer().dom,a,d;if(!c){return}this.givenContainerSize=b;if(b==="auto"){a=c.clientWidth;d=c.clientHeight}else{a=b.x;d=b.y}return{x:a,y:d}},applySize:function(b){var d=this.getElement().dom,c=this.getContainer().dom,a,e;if(!d){return}this.givenSize=b;if(b==="auto"){a=Math.max(d.offsetWidth,c.clientWidth);e=Math.max(d.offsetHeight,c.clientHeight)}else{if(typeof b=="number"){a=b;e=b}else{a=b.x;e=b.y}}return{x:a,y:e}},updateAutoRefresh:function(a){this.getElement().toggleListener(a,"resize","onElementResize",this);this.getContainer().toggleListener(a,"resize","onContainerResize",this)},applySlotSnapSize:function(a){if(typeof a=="number"){return{x:a,y:a}}return a},applySlotSnapOffset:function(a){if(typeof a=="number"){return{x:a,y:a}}return a},getContainer:function(){var a=this.container,b;if(!a){b=this.getElement().getParent();this.container=a=this.FixedHBoxStretching?b.getParent():b;a.addCls(this.containerCls)}return a},refresh:function(){this.stopAnimation();this.getTranslatable().refresh();this.setSize(this.givenSize);this.setContainerSize(this.givenContainerSize);this.setDirection(this.givenDirection);this.fireEvent("refresh",this);return this},onElementResize:function(a,b){this.setSize({x:b.width,y:b.height});this.refresh()},onContainerResize:function(a,b){this.setContainerSize({x:b.width,y:b.height});this.refresh()},scrollTo:function(h,g,b){var f=this,a;if(f.isDestroyed){return f}if(typeof h!="number"&&arguments.length===1){g=h.y;h=h.x}var j=f.getTranslatable(),c=f.getPosition(),k=false,e,d;if(f.isAxisEnabled("x")){if(isNaN(h)||typeof h!="number"){h=c.x}else{if(c.x!==h){k=true}}e=this.convertX(-h)}if(f.isAxisEnabled("y")){if(isNaN(g)||typeof g!="number"){g=c.y}else{if(c.y!==g){k=true}}d=-g}if(k){if(b!==undefined&&b!==false){a=function(){f.fireEvent("scroll",f,h,g)};if(b===true){b={callback:a}}else{if(b.callback){b.callback=Ext.Function.createSequence(b.callback,a)}else{b.callback=a}}j.translateAnimated(e,d,b)}else{j.translate(e,d);f.fireEvent("scroll",f,h,g)}}return this},scrollToTop:function(b){var a=this.getInitialOffset();return this.scrollTo(a.x,a.y,b)},scrollToEnd:function(c){var b=this.getSize(),a=this.getContainerSize();return this.scrollTo(b.x-a.x,b.y-a.y,c)},scrollBy:function(b,d,c){var a=this.getPosition();b=(typeof b=="number")?b+a.x:null;d=(typeof d=="number")?d+a.y:null;return this.scrollTo(b,d,c)},onEvent:function(b){var a=this,c=b.browserEvent;if(!Ext.supports.Touch||a.getMouseEnabled()||(!a.isMouseEvent[c.type]&&c.pointerType!=="mouse")){a[a.listenerMap[b.type]](b)}},onTouchStart:function(){this.isTouching=this.self.isTouching=true;this.stopAnimation()},onTouchEnd:function(){var a=this.getPosition();this.isTouching=this.self.isTouching=false;if(!this.isDragging&&this.snapToSlot()){this.fireEvent("scrollstart",this,a.x,a.y)}},onDragStart:function(m){var p=this.getDirection(),g=m.absDeltaX,f=m.absDeltaY,k=this.getDirectionLock(),j=this.startPosition,d=this.flickStartPosition,l=this.flickStartTime,h=this.lastDragPosition,c=this.getPosition(),b=this.dragDirection,o=c.x,n=c.y,a=Ext.Date.now();this.isDragging=true;if(k&&p!=="both"){if((p==="horizontal"&&g>f)||(p==="vertical"&&f>g)){m.stopPropagation()}else{this.isDragging=false;return}}h.x=o;h.y=n;d.x=o;d.y=n;j.x=o;j.y=n;l.x=a;l.y=a;b.x=0;b.y=0;this.dragStartTime=a;this.isDragging=true;this.fireEvent("scrollstart",this,o,n)},onAxisDrag:function(j,r){if(!this.isAxisEnabled(j)){return}var h=this.flickStartPosition,m=this.flickStartTime,k=this.lastDragPosition,e=this.dragDirection,g=this.getPosition()[j],l=this.getMinPosition()[j],p=this.getMaxPosition()[j],d=this.startPosition[j],q=k[j],o=d-r,c=e[j],n=this.getOutOfBoundRestrictFactor(),f=this.getStartMomentumResetTime(),b=Ext.Date.now(),a;if(o<l){o*=n}else{if(o>p){a=o-p;o=p+a*n}}if(o>q){e[j]=1}else{if(o<q){e[j]=-1}}if((c!==0&&(e[j]!==c))||(b-m[j])>f){h[j]=g;m[j]=b}k[j]=o},onDrag:function(b){if(!this.isDragging){return}var a=this.lastDragPosition;this.onAxisDrag("x",this.convertX(b.deltaX));this.onAxisDrag("y",b.deltaY);this.scrollTo(a.x,a.y)},onDragEnd:function(c){var b,a;if(!this.isDragging){return}this.dragEndTime=Ext.Date.now();this.onDrag(c);this.isDragging=false;b=this.getAnimationEasing("x",c);a=this.getAnimationEasing("y",c);if(b||a){this.getTranslatable().animate(b,a)}else{this.onScrollEnd()}},getAnimationEasing:function(h,l){if(!this.isAxisEnabled(h)){return null}var g=this.getPosition()[h],d=this.getMinPosition()[h],k=this.getMaxPosition()[h],b=this.getMaxAbsoluteVelocity(),f=null,c=this.dragEndTime,j=l.flick.velocity[h],n=h==="x",a,m;if(g<d){f=d}else{if(g>k){f=k}}if(n){g=this.convertX(g);f=this.convertX(f)}if(f!==null){m=this.getBounceEasing()[h];m.setConfig({startTime:c,startValue:-g,endValue:-f});return m}if(j===0){return null}if(j<-b){j=-b}else{if(j>b){j=b}}if(Ext.browser.is.IE){j*=2}m=this.getMomentumEasing()[h];a={startTime:c,startValue:-g,startVelocity:j*1.5,minMomentumValue:-k,maxMomentumValue:0};if(n){this.convertEasingConfig(a)}m.setConfig(a);return m},onAnimationFrame:function(c,b,d){var a=this.getPosition();this.fireEvent("scroll",this,this.convertX(a.x),a.y)},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},stopAnimation:function(){this.getTranslatable().stopAnimation()},onScrollEnd:function(){var a=this.getPosition();if(this.isTouching||!this.snapToSlot()){this.fireEvent("scrollend",this,a.x,a.y)}},snapToSlot:function(){var b=this.getSnapPosition("x"),a=this.getSnapPosition("y"),c=this.getSlotSnapEasing();if(b!==null||a!==null){this.scrollTo(b,a,{easingX:c.x,easingY:c.y});return true}return false},getSnapPosition:function(c){var g=this.getSlotSnapSize()[c],d=null,a,f,e,b;if(g!==0&&this.isAxisEnabled(c)){a=this.getPosition()[c];f=this.getSlotSnapOffset()[c];e=this.getMaxPosition()[c];b=Math.floor((a-f)%g);if(b!==0){if(a!==e){if(Math.abs(b)>g/2){d=Math.min(e,a+((b>0)?g-b:b-g))}else{d=a-b}}else{d=a-b}}}return d},snapToBoundary:function(){if(!this.getSnapToBoundary()){return}var g=this.getPosition(),c=this.getMinPosition(),f=this.getMaxPosition(),e=c.x,d=c.y,b=f.x,a=f.y,j=Math.round(g.x),h=Math.round(g.y);if(j<e){j=e}else{if(j>b){j=b}}if(h<d){h=d}else{if(h>a){h=a}}this.scrollTo(j,h)},destroy:function(){var c=this.getElement(),b=this.sizeMonitors,a;if(b){b.element.destroy();b.container.destroy()}if(c&&!c.isDestroyed){c.removeCls(this.cls);a=this.getContainer();if(a&&!a.isDestroyed){a.removeCls(this.containerCls)}}Ext.destroy(this.getTranslatable());delete this.self.instances[this.id];Ext.Evented.prototype.destroy.apply(this,arguments)},convertX:function(a){return a},convertEasingConfig:function(a){return a}},1,0,0,0,0,0,[Ext.scroll,"Scroller"],function(){this.override({constructor:function(b){var d,e,a,g,c,f;if(!b){b={}}if(typeof b=="string"){b={direction:b}}if(arguments.length==2){d=b;b=arguments[1];if(!b){b={}}b.element=d}if(b.hasOwnProperty("acceleration")){e=b.acceleration;delete b.acceleration;Ext.merge(b,{momentumEasing:{momentum:{acceleration:e},bounce:{acceleration:e}}})}if(b.hasOwnProperty("snap")){b.slotSnapOffset=b.snap}if(b.hasOwnProperty("friction")){g=b.friction;delete b.friction;Ext.merge(b,{momentumEasing:{momentum:{friction:g}}})}if(b.hasOwnProperty("springTension")){c=b.springTension;delete b.springTension;Ext.merge(b,{momentumEasing:{momentum:{springTension:c}}})}if(b.hasOwnProperty("minVelocityForAnimation")){f=b.minVelocityForAnimation;delete b.minVelocityForAnimation;Ext.merge(b,{momentumEasing:{minVelocity:f}})}this.callOverridden(arguments)},scrollToAnimated:function(a,c,b){return this.scrollTo.apply(this,arguments)},scrollBy:function(a,c,b){if(Ext.isObject(a)){c=a.y;a=a.x}return this.callOverridden([a,c,b])},setOffset:function(a){return this.scrollToAnimated(-a.x,-a.y)}})}));(Ext.cmd.derive("Ext.util.LocalStorage",Ext.Base,{id:null,destroyed:false,lazyKeys:true,prefix:"",session:false,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(e){var d=this,b=d.cache,c={_users:1},a;if(Ext.isString(e)){c.id=e}else{Ext.apply(c,e)}if(!(a=b[c.id])){a=new d(c)}else{++a._users}return a},supported:true},constructor:function(a){var b=this;Ext.apply(b,a);if(b._users){Ext.util.LocalStorage.cache[b.id]=b}b.init()},init:function(){var a=this,b=a.id;if(!a.prefix&&b){a.prefix=b+"-"}a._store=(a.session?window.sessionStorage:window.localStorage)},destroy:function(){var a=this;delete Ext.util.LocalStorage.cache[a.id];a._store=a._keys=null;a.destroyed=true;a.destroy=Ext.emptyFn},getKeys:function(){var e=this,a=e._store,f=e.prefix,d=e._keys,g=f.length,c,b;if(!d){e._keys=d=[];for(c=a.length;c--;){b=a.key(c);if(b.length>g){if(f===b.substring(0,g)){d.push(b.substring(g))}}}}return d},release:function(){if(!--this._users){this.destroy()}},save:Ext.emptyFn,clear:function(){var d=this,a=d._store,e=d.prefix,c=d._keys||d.getKeys(),b;for(b=c.length;b--;){a.removeItem(e+c[b])}c.length=0},key:function(a){var b=this._keys||this.getKeys();return(0<=a&&a<b.length)?b[a]:null},getItem:function(b){var a=this.prefix+b;return this._store.getItem(a)},removeItem:function(c){var f=this,b=f.prefix+c,a=f._store,e=f._keys,d=a.length;a.removeItem(b);if(e&&d!==a.length){if(f.lazyKeys){f._keys=null}else{Ext.Array.remove(e,c)}}},setItem:function(c,g){var f=this,b=f.prefix+c,a=f._store,e=a.length,d=f._keys;a.setItem(b,g);if(d&&e!==a.length){d.push(c)}}},1,0,0,0,0,0,[Ext.util,"LocalStorage"],function(){var a=this;if("localStorage" in window){return}if(!Ext.isIE){a.supported=false;return}a.override({data:null,flushDelay:1,init:function(){var c=this,d=c.data,b;c.el=b=document.createElement("div");b.id=(c.id||(c.id="extjs-localstore"));b.addBehavior("#default#userdata");Ext.getHead().dom.appendChild(b);b.load(c.id);d=b.getAttribute("xdata");c.data=d=(d?Ext.decode(d):{});c._flushFn=function(){c._timer=null;c.save(0)}},destroy:function(){var c=this,b=c.el;if(b){if(c._timer){c.save()}b.parentNode.removeChild(b);c.data=c.el=null;c.callParent()}},getKeys:function(){var c=this,b=c._keys;if(!b){c._keys=b=Ext.Object.getKeys(c.data)}return b},save:function(b){var c=this;if(!b){if(c._timer){clearTimeout(c._timer);c._timer=null}c.el.setAttribute("xdata",Ext.encode(c.data));c.el.save(c.id)}else{if(!c._timer){c._timer=Ext.defer(c._flushFn,b)}}},clear:function(){var b=this;b.data={};b._keys=null;b.save(b.flushDelay)},getItem:function(b){var c=this.data;return(b in c)?c[b]:null},removeItem:function(b){var d=this,c=d._keys,e=d.data;if(b in e){delete e[b];if(c){if(d.lazyKeys){d._keys=null}else{Ext.Array.remove(c,b)}}d.save(d.flushDelay)}},setItem:function(b,f){var d=this,e=d.data,c=d._keys;if(c&&!(b in e)){c.push(b)}e[b]=f;d.save(d.flushDelay)}})}));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(a,b,c){a.getTarget().setHtml(b.responseText,c.scripts===true);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(b){var c=this,a;b=b||{};Ext.apply(c,b);c.mixins.observable.constructor.call(c);c.setTarget(c.target);if(c.autoLoad){a=c.autoLoad;if(a===true){a=null}c.load(a)}},setTarget:function(b){var a=this;b=Ext.get(b);if(a.target&&a.target!=b){a.abort()}a.target=b},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===true?null:a)},load:function(c){c=Ext.apply({},c);var e=this,a=Ext.isDefined(c.loadMask)?c.loadMask:e.loadMask,f=Ext.apply({},c.params),b=Ext.apply({},c.ajaxOptions),h=c.callback||e.callback,d=c.scope||e.scope||e,g=c.rendererScope||e.rendererScope||e;Ext.applyIf(b,e.ajaxOptions);Ext.applyIf(c,b);Ext.applyIf(f,e.params);Ext.apply(f,e.baseParams);Ext.applyIf(c,{url:e.url});Ext.apply(c,{scope:e,params:f,callback:e.onComplete});if(e.fireEvent("beforeload",e,c)===false){return}if(a){e.addMask(a)}e.active={options:c,mask:a,scope:d,rendererScope:g,callback:h,success:c.success||e.success,failure:c.failure||e.failure,renderer:c.renderer||e.renderer,scripts:Ext.isDefined(c.scripts)?c.scripts:e.scripts};e.active.request=Ext.Ajax.request(c);e.setOptions(e.active,c)},setOptions:Ext.emptyFn,onComplete:function(b,f,a){var d=this,e=d.active,g,c;if(e){c=e.scope;g=e.rendererScope;if(f){f=d.getRenderer(e.renderer).call(g,d,a,e)!==false}if(f){Ext.callback(e.success,c,[d,a,b]);d.fireEvent("load",d,a,b)}else{Ext.callback(e.failure,c,[d,a,b]);d.fireEvent("exception",d,a,b)}Ext.callback(e.callback,c,[d,f,a,b]);if(e.mask){d.removeMask()}}delete d.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(a,b){var c=this;c.stopAutoRefresh();c.autoRefresh=Ext.interval(function(){c.load(b)},a)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.clearListeners()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(a,b,d){var f=true;try{a.getTarget().update(Ext.decode(b.responseText))}catch(c){f=false}return f},Component:function(a,c,g){var h=true,f=a.getTarget(),b=[];try{b=Ext.decode(c.responseText)}catch(d){h=false}if(h){f.suspendLayouts();if(g.removeAll){f.removeAll()}f.add(b);f.resumeLayouts(true)}return h}}},target:null,loadOnRender:false,loadMask:false,renderer:"html",setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!=b){a.abort()}a.target=b;if(b&&a.loadOnRender){if(b.rendered){a.doLoadOnRender()}else{a.mon(b,"render",a.doLoadOnRender,a)}}},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(false)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll},getRenderer:function(b){if(Ext.isFunction(b)){return b}var a=this.statics().Renderer;switch(b){case"component":return a.Component;case"data":return a.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.Img",Ext.Component,{autoEl:"img",baseCls:"x-img",src:"",alt:"",title:"",imgCls:"",ariaRole:"img",maskOnDisable:false,initComponent:function(){if(this.glyph){this.autoEl="div"}Ext.Component.prototype.initComponent.call(this)},getElConfig:function(){var e=this,g=e.autoEl,b=Ext.Component.prototype.getElConfig.call(this),f=Ext._glyphFontFamily,d=e.glyph,a,c;if(g==="img"||(Ext.isObject(g)&&g.tag==="img")){a=b}else{if(e.glyph){if(typeof d==="string"){c=d.split("@");d=c[0];f=c[1]}b.html="&#"+d+";";if(f){b.style="font-family:"+f}}else{b.cn=[a={tag:"img",role:e.ariaRole,id:e.id+"-img"}]}}if(a){if(e.imgCls){a.cls=(a.cls?a.cls+" ":"")+e.imgCls}a.src=e.src||Ext.BLANK_IMAGE_URL}if(e.alt){(a||b).alt=e.alt}if(e.title){(a||b).title=e.title}return b},onRender:function(){var b=this,c=b.autoEl,a;Ext.Component.prototype.onRender.apply(this,arguments);a=b.el;if(c==="img"||(Ext.isObject(c)&&c.tag==="img")){b.imgEl=a}else{b.imgEl=a.getById(b.id+"-img")}},onDestroy:function(){Ext.destroy(this.imgEl);this.imgEl=null;Ext.Component.prototype.onDestroy.call(this)},setSrc:function(c){var a=this,b=a.imgEl;a.src=c;if(b){b.dom.src=c||Ext.BLANK_IMAGE_URL}},setGlyph:function(c){var b=this,d=Ext._glyphFontFamily,a,e;if(c!=b.glyph){if(typeof c==="string"){a=c.split("@");c=a[0];d=a[1]}e=b.el.dom;e.innerHTML="&#"+c+";";if(d){e.style="font-family:"+d}}}},0,["image","imagecomponent"],["component","box","image","imagecomponent"],{component:true,box:true,image:true,imagecomponent:true},["widget.image","widget.imagecomponent"],0,[Ext,"Img"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(d){var b=this,a,c;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!d.textEls){c=b.owner.textEl;if(c.isComposite){d.textEls=[];c=c.elements;for(a=c.length;a--;){d.textEls[a]=d.getEl(Ext.get(c[a]))}}else{d.textEls=[d.getEl("textEl")]}}},calculate:function(e){var c=this,a,d,b;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(b=e.getProp("width"))){b-=e.getBorderInfo().width;d=e.textEls;for(a=d.length;a--;){d[a].setWidth(b)}}else{c.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{config:{value:0,textTpl:null},baseCls:"x-progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var a=this;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!a.hasOwnProperty("textEl"),text:a.text||"&#160;",percentage:a.value?a.value*100:0})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else{a.textEl=a.el.select("."+a.baseCls+"-text")}},updateValue:function(a){this.updateProgress(a,Math.round(a*100)+"%")},updateProgress:function(e,f,a){var d=this,b=d.value,c=d.getTextTpl();d.value=e||(e=0);if(f!=null){d.updateText(f)}else{if(c){d.updateText(c.apply({value:e,percent:e*100}))}}if(d.rendered&&!d.isDestroyed){if(a===true||(a!==false&&d.animate)){d.bar.stopAnimation();d.bar.animate(Ext.apply({from:{width:(b*100)+"%"},to:{width:(e*100)+"%"}},d.animate))}else{d.bar.setStyle("width",(e*100)+"%")}}d.fireEvent("update",d,e,f);return d},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.setHtml(a.text)}return a},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(c){var b=this,a;if(!b.waitTimer){a=b;c=c||{};b.updateText(c.text);b.waitTimer=Ext.TaskManager.start({run:function(d){var e=c.increment||10;d-=1;b.updateProgress(((((d+e)%e)+1)*(100/e))*0.01,null,c.animate)},interval:c.interval||1000,duration:c.duration,onStop:function(){if(c.fn){c.fn.apply(c.scope||b)}b.reset()},scope:a})}return b},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var b=this,a=b.bar;b.clearTimer();if(b.rendered){if(b.textEl.isComposite){b.textEl.clear()}Ext.destroyMembers(b,"textEl","progressBar");if(a&&b.animate){a.stopAnimation()}}Ext.Component.prototype.onDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],0,[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.ShadowPool",Ext.Base,{singleton:true,markup:(function(){return Ext.String.format('<div class="{0}{1}-shadow" role="presentation"></div>',"x-",Ext.isIE&&!Ext.supports.CSS3BoxShadow?"ie":"css")}()),shadows:[],pull:function(){var a=this.shadows.shift();if(!a){a=Ext.get(Ext.DomHelper.insertHtml("afterBegin",document.body,this.markup));a.autoBoxAdjust=false}return a},push:function(a){this.shadows.push(a)},reset:function(){var c=[].concat(this.shadows),b,a=c.length;for(b=0;b<a;b++){c[b].destroy()}this.shadows=[]}},0,0,0,0,0,0,[Ext,"ShadowPool"],0));(Ext.cmd.derive("Ext.Shadow",Ext.Base,{localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(b){var c=this,d,e,a;Ext.apply(c,b);if(!Ext.isString(c.mode)){c.mode=c.defaultMode}e=c.offset;a=Math.floor(e/2);c.opacity=50;switch(c.mode.toLowerCase()){case"drop":if(Ext.supports.CSS3BoxShadow){d={t:e,l:e,h:-e,w:-e}}else{d={t:-a,l:-a,h:-a,w:-a}}break;case"sides":if(Ext.supports.CSS3BoxShadow){d={t:e,l:0,h:-e,w:0}}else{d={t:-(1+a),l:1+a-2*e,h:-1,w:a-1}}break;case"frame":if(Ext.supports.CSS3BoxShadow){d={t:0,l:0,h:0,w:0}}else{d={t:1+a-2*e,l:1+a-2*e,h:e-a-1,w:e-a-1}}break;case"bottom":if(Ext.supports.CSS3BoxShadow){d={t:e,l:0,h:-e,w:0}}else{d={t:e,l:0,h:0,w:0}}break}c.adjusts=d},getShadowSize:function(){var b=this,d=b.el?b.offset:0,a=[d,d,d,d],c=b.mode.toLowerCase();if(b.el&&c!=="frame"){a[0]=0;if(c=="drop"){a[3]=0}}return a},offset:4,defaultMode:"drop",boxShadowProperty:(function(){var b="boxShadow",a=document.documentElement.style;if(!("boxShadow" in a)){if("WebkitBoxShadow" in a){b="WebkitBoxShadow"}else{if("MozBoxShadow" in a){b="MozBoxShadow"}}}return b}()),show:function(d){var b=this,a,c;d=Ext.get(d);a=(parseInt(d.getStyle("z-index"),10)-1)||0;c=d[b.localXYNames.get]();if(!b.el){b.el=Ext.ShadowPool.pull();if(b.fixed){b.el.dom.style.position="fixed"}else{b.el.dom.style.position=""}if(b.el.dom.nextSibling!=d.dom){b.el.insertBefore(d)}}b.el.setStyle("z-index",b.zIndex||a);if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){b.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(b.offset)+")"}b.realign(c[0],c[1],d.dom.offsetWidth,d.dom.offsetHeight);b.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(c,m,j,f){if(!this.el){return}var b=this.adjusts,a=this.el,h=a.dom.style,d,e,g,k;a[this.localXYNames.set](c+b.l,m+b.t);d=Math.max(j+b.w,0);e=Math.max(f+b.h,0);g=d+"px";k=e+"px";if(h.width!=g||h.height!=k){h.width=g;h.height=k;if(Ext.supports.CSS3BoxShadow){h[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888"}}},hide:function(){var a=this;if(a.el){a.el.dom.style.display="none";Ext.ShadowPool.push(a.el);delete a.el}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}},setOpacity:function(a){if(this.el){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;this.el.setOpacity(a)}}},1,0,0,0,0,0,[Ext,"Shadow"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(h,m,k){var l=this,j=l.bus,n=j[m],e,c,b,d,o,g,f,a;if(!n){return true}for(e in n){if(n.hasOwnProperty(e)&&l.match(h,e,l.controller)){c=n[e];for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d.controller.isActive()){o=d.list;g=o.length;for(f=0;f<g;f++){a=o[f];if(a.fire.apply(a,k)===false){return false}}}}}}}return true},listen:function(d,m){var u=this,l=u.bus,g=u.idProperty,h=u.monitoredClasses,e=h.length,k=m.getId(),t=Ext.$eventNameMap,q,j,r,o,b,c,a,p,n,s,f;for(o in d){n=d[o];if(n){if(g){o=o==="*"?o:o.substring(1)}for(s in n){b=null;c=n[s];a=m;s=t[s]||(t[s]=s.toLowerCase());p=new Ext.util.Event(m,s);if(Ext.isObject(c)){b=c;c=b.fn;a=b.scope||m;delete b.fn;delete b.scope}if(typeof c==="string"){c=a[c]}p.addListener(c,a,b);for(q=0;q<e;++q){f=h[q].hasListeners;if(f){f._incr_(s)}}j=l[s]||(l[s]={});j=j[o]||(j[o]={});r=j[k]||(j[k]={controller:m,list:[]});r.list.push(p)}}}},match:function(c,a){var b=this.idProperty;if(b){return a==="*"||c[b]===a}return false},monitor:function(c){var b=this,a=c.isInstance?c:c.prototype,d=a.doFireEvent;b.monitoredClasses.push(c);a.doFireEvent=function(g,f){var e=d.apply(this,arguments);if(e!==false&&!this.isSuspended(g)){e=b.dispatch(this,g,f)}return e}},unlisten:function(e){var n=this.bus,a=e,s=this.monitoredClasses,l=s.length,d=Ext.$eventNameMap,b,o,r,m,q,f,p,k,h,c,g;if(e.isController){a=e.getId()}for(o in n){o=d[o]||(d[o]=o.toLowerCase());if(n.hasOwnProperty(o)&&(p=n[o])){for(f in p){b=p[f];c=b[a];if(c){r=c.list;if(r){for(k=0,m=r.length;k<m;++k){q=r[k];q.clearListeners();for(h=0;h<l;++h){g=s[h].hasListeners;if(g){g._decr_(q.name)}}}delete b[a]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){var b=this,a=Ext.Component;b.callParent();b.monitor(Ext.Widget);if(!a.prototype.isWidget){b.monitor(a)}},dispatch:function(f,d,c){var b=f.lookupController(false),e,a;while(b){e=b.compDomain;if(e){if(e.dispatch(f,d,c)===false){return false}}a=b.getView();b=a?a.lookupController(true):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var b=this,a=Ext.app.EventDomain.instances;b.callParent();b.domains=a;b.bus=a.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(d,b){var a=this.domains,c;for(c in d){if(d.hasOwnProperty(c)){a[c].listen(d[c],b)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",listen:function(b,a){b.scope=b.scope||a;Ext.on(b)},match:Ext.returnTrue},0,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:true,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);delete b.control;delete b.listen;b.eventbus=Ext.app.EventBus;b.initConfig(a)},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){if(a){this.control(a)}},updateListen:function(a){if(a){this.listen(a)}},updateRoutes:function(b){if(b){var e=this,f=e.getBefore()||{},a=Ext.app.route.Router,d,c,g;for(d in b){c=b[d];if(Ext.isString(c)){c={action:c}}g=c.action;if(!c.before){c.before=f[g]}a.connect(d,c,e)}}},isActive:function(){return true},control:function(b,c,a){var d=this,e=a,f;if(Ext.isString(b)){f={};f[b]=c}else{f=b;e=c}d.eventbus.control(f,e||d)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var b=this,a=b.eventbus;Ext.app.route.Router.disconnectAll(b);if(a){a.unlisten(b);b.eventbus=null}b.clearListeners();b.callParent()},redirectTo:function(b,c){if(!c){var a=Ext.util.History.getToken();if(a===b){return false}}else{Ext.app.route.Router.onStateChange(b)}Ext.util.History.add(b);return true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.app,"BaseController"],0));(Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(c){var d=Ext.app.namespaces,b,a;if(!Ext.isArray(c)){c=[c]}for(b=0,a=c.length;b<a;b++){d[c[b]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(b){var d=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),a="",c;for(c in d){if(d.hasOwnProperty(c)&&c.length>a.length&&(c+"."===b.substring(0,c.length+1))){a=c}}return a===""?undefined:a}})}));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(this.idMatchRe.test(b)){a=d.getStoreId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var a=this.queue,c=a.removeAt(0),b;if(c){b=c&&c.route;b.execute(this.token,c.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else{this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0));(Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(b){var c=this,a;Ext.apply(c,b,{conditions:{}});a=c.url;c.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);c.paramsInMatchString=a.match(c.paramMatchingRegex)||[];c.matcherRegex=c.createMatcherRegex(a)},recognize:function(c){var d=this,a=d.controller,e,b;if((d.allowInactive||a.isActive())&&d.recognizes(c)){e=d.matchesFor(c);b=c.match(d.matcherRegex);b.shift();return Ext.applyIf(e,{controller:a,action:d.action,historyUrl:c,args:b})}return false},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(c,g,h,d){var b=g.args||[],f=this.before,a=this.controller,e=this.createCallback(g,h,d);if(f){b.push(e);if(Ext.isString(f)){f=this.before=a[f]}if(f){f.apply(a,b)}}else{e.resume()}},matchesFor:function(c){var f={},e=this.paramsInMatchString,b=c.match(this.matcherRegex),d=0,a=e.length;b.shift();for(;d<a;d++){f[e[d].replace(":","")]=b[d]}return f},createMatcherRegex:function(a){var c=this.paramsInMatchString,h=this.conditions,d=0,f=c.length,j=Ext.util.Format.format,k=this.caseInsensitive?"i":"",b,g,e;for(;d<f;d++){b=c[d];g=h[b];e=j("{0}",g||"([%a-zA-Z0-9\\-\\_\\s,]+)");a=a.replace(new RegExp(b),e)}return new RegExp("^"+a+"$",k)},createCallback:function(a,d,b){var c=this;b=b||c;return{resume:function(){var e=c.controller,g=c.action,f;if(Ext.isString(g)){g=e[g]}a=a&&a.args?a.args:[];f=a.pop();if(f&&!Ext.isObject(f)){a.push(f)}if(g){c.action=g;g.apply(e,a)}if(d){d.call(b)}},stop:function(e){if(d){d.call(b,e)}}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:false,constructor:function(){var a=this;a.hiddenField=null;a.ready=false;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(b){try{this.win.location.hash=b;this.currentToken=b}catch(a){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent("change",a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on("hashchange",a.onHashChange,a)}else{Ext.TaskManager.start({fireIdleEvent:false,run:a.onHashChange,interval:50,scope:a})}a.ready=true;a.fireEvent("ready",a)},onHashChange:function(){var b=this,a=b.getHash();if(a!==b.hash){b.hash=a;b.handleStateChange(a)}},init:function(c,a){var b=this;if(b.ready){Ext.callback(c,a,[b]);return}if(!Ext.isReady){Ext.onReady(function(){b.init(c,a)});return}b.win=b.useTopWindow?window.top:window;b.hash=b.getHash();if(c){b.on("ready",c,a,{single:true})}b.startUp()},add:function(a,b){var c=this,d=false;if(b===false||c.getToken()!==a){c.setHash(a);d=true}return d},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));(Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on("change",this.onStateChange,this);this.clear()},onStateChange:function(d){var k=this,c=k.application,m=k.routes,g=m.length,o=k.queueRoutes,j=d.split(k.multipleToken),n=0,b=j.length,e,f,l,h,a;for(;n<b;n++){d=j[n];a=false;if(o){f=new Ext.app.route.Queue({token:d})}for(e=0;e<g;e++){l=m[e];h=l.recognize(d);if(h){a=true;if(o){f.queueAction(l,h)}else{l.execute(d,h)}}}if(o){f.runQueue()}if(!a&&c){c.fireEvent("unmatchedroute",d)}}},connect:function(c,d,a){var b={url:c,action:d,controller:a};if(Ext.isObject(d)){Ext.merge(b,d)}this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(c){var b=this.routes,a=b.length,e=[],f,d;for(f=0;f<a;++f){d=b[f];if(d.controller!==c){e.push(d)}}this.routes=e},recognize:function(e){var b=this.routes||[],f=0,a=b.length,c,d;for(;f<a;f++){c=b[f];d=c.recognize(e);if(d){return{route:c,args:d}}}return false},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"}},controllerRegex:/^(.*)\.controller\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(c,a){var d="get",e=c.split("."),f=e.length,b;for(b=0;b<f;b++){d+=Ext.String.capitalize(e[b])}d+=a;return d},processDependencies:function(q,r,c,d,h){if(!h||!h.length){return}var k=this,p=k.strings[d],b,n,m,a,e,f,l,g;if(!Ext.isArray(h)){h=[h]}for(e=0,f=h.length;e<f;e++){a=h[e];b=k.getFullName(a,d,c);n=b.absoluteName;m=b.shortName;r.push(n);l=k.getGetterName(m,p.upper);q[l]=g=k.createGetter(p.getter,a);if(d!=="controller"){g["Ext.app.getter"]=true}}},getFullName:function(c,e,d){var a=c,b,f;if((b=c.indexOf("@"))>0){a=c.substring(0,b);f=c.substring(b+1)+"."+a}else{if(c.indexOf(".")>0&&(Ext.ClassManager.isCreated(c)||this.hasRegisteredPrefix(c))){f=c}else{if(d){f=d+"."+e+"."+c;a=c}else{f=c}}}return{absoluteName:f,shortName:a}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(b,c,a){var d=a.onBeforeCreated;a.onBeforeCreated=function(m,g){var f=Ext.app.Controller,k=f.controllerRegex,n=[],l,e,j,h;j=m.prototype;l=Ext.getClassName(m);e=g.$namespace||g.namespace||Ext.app.getNamespace(l)||((h=k.exec(l))&&h[1]);if(e){j.$namespace=e}f.processDependencies(j,n,e,"model",g.models);f.processDependencies(j,n,e,"view",g.views);f.processDependencies(j,n,e,"store",g.stores);f.processDependencies(j,n,e,"controller",g.controllers);Ext.require(n,Ext.Function.pass(d,arguments,this))}},constructor:function(a){Ext.app.BaseController.prototype.constructor.apply(this,arguments);this.initAutoGetters();this.ensureId()},normalizeRefs:function(b){var c=this,a=[];if(b){if(Ext.isObject(b)){Ext.Object.each(b,function(d,e){if(Ext.isString(e)){e={selector:e}}e.ref=d;a.push(e)})}else{if(Ext.isArray(b)){a=Ext.Array.merge(a,b)}}}b=c.refs;if(b){c.refs=null;b=c.normalizeRefs(b);if(b){a=Ext.Array.merge(a,b)}}return a},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a["Ext.app.getter"]){a.call(this)}}},updateControl:function(a){this.ensureId();Ext.app.BaseController.prototype.updateControl.call(this,a)},updateListen:function(a){this.ensureId();Ext.app.BaseController.prototype.updateListen.call(this,a)},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=true}},finishInit:function(f){var d=this,e=d.controllers,b,c,a;if(d._initialized&&e&&e.length){for(c=0,a=e.length;c<a;c++){b=d.getController(e[c]);b.finishInit(f)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(a){var f=this,b=0,e=a.length,g,d,c;a=Ext.Array.from(a);f.references=f.references||[];for(;b<e;b++){g=a[b];d=g.ref;c="get"+Ext.String.capitalize(d);if(!f[c]){f[c]=Ext.Function.pass(f.getRef,[d,g],f)}f.references.push(d.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,f,a){var c=this,e=c.refCache||(c.refCache={}),b=e[d];f=f||{};a=a||{};Ext.apply(f,a);if(f.forceCreate){return Ext.ComponentManager.create(f,"component")}if(!b){if(f.selector){e[d]=b=Ext.ComponentQuery.query(f.selector)[0]}if(!b&&f.autoCreate){e[d]=b=Ext.ComponentManager.create(f,"component")}if(b){b.on("beforedestroy",function(){e[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.application;if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(c){var a,b;a=(c.indexOf("@")===-1)?c:c.split("@")[0];b=Ext.StoreManager.get(a);if(!b){c=Ext.app.Controller.getFullName(c,"store",this.$namespace);if(c){b=Ext.create(c.absoluteName,{storeId:a})}}return b},getModel:function(c){var b=Ext.app.Controller.getFullName(c,"model",this.$namespace),a=Ext.ClassManager.get(b.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(c)}return a},getView:function(a){var b=Ext.app.Controller.getFullName(a,"view",this.$namespace);return b&&Ext.ClassManager.get(b.absoluteName)},ensureId:function(){var a=this.getId();if(!a){this.setId(this.getModuleClassName(this.$className,"controller"))}},destroy:function(a,b){var d=this,f=d.application,e,c;if(!b&&f){f.unregister(d)}d.application=null;if(a){e=d.refCache;for(c in e){if(e.hasOwnProperty(c)){Ext.destroy(e[c])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.app.Application",Ext.app.Controller,{isApplication:true,scope:undefined,namespaces:[],paths:null,appFolder:"app",config:{name:"",enableQuickTips:true,appProperty:"app",autoCreateViewport:false,defaultToken:null,glyphFontFamily:null},onClassExtended:function(k,c,j){var b=Ext.app.Controller,d=k.prototype,m=[],g=c.autoCreateViewport,e,l,a,f,h;a=c.name||k.superclass.name;h=c.appFolder||k.superclass.appFolder;if(a){c.$namespace=a;Ext.app.addNamespaces(a)}if(c.namespaces){Ext.app.addNamespaces(c.namespaces)}if(!c["paths processed"]){if(a&&h){Ext.Loader.setPath(a,h)}l=c.paths;if(l){for(f in l){if(l.hasOwnProperty(f)){Ext.Loader.setPath(f,l[f])}}}}else{delete c["paths processed"]}if(g){if(g===true){g="Viewport"}else{m.push("Ext.plugin.Viewport")}b.processDependencies(d,m,a,"view",g)}if(m.length){e=j.onBeforeCreated;j.onBeforeCreated=function(n,p){var o=Ext.Array.clone(arguments);Ext.require(m,function(){return e.apply(this,o)})}}},constructor:function(a){var b=this;Ext.app.route.Router.application=b;Ext.app.Controller.prototype.constructor.apply(this,arguments);b.doInit(b);b.initNamespace();b.initControllers();b.onBeforeLaunch();b.finishInitControllers()},initNamespace:function(){var c=this,a=c.getAppProperty(),b;b=Ext.namespace(c.getName());if(b){b.getApplication=function(){return c};if(a){if(!b[a]){b[a]=c}}}},initControllers:function(){var c=this,d=Ext.Array.from(c.controllers);c.controllers=new Ext.util.MixedCollection();for(var a=0,b=d.length;a<b;a++){c.getController(d[a])}},finishInitControllers:function(){var c=this,d,b,a;d=c.controllers.getRange();for(b=0,a=d.length;b<a;b++){d[b].finishInit(c)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var e=this,d=Ext.util.History,h=e.getDefaultToken(),g,j,f,a,b;if(e.getEnableQuickTips()){e.initQuickTips()}if(e.getAutoCreateViewport()){e.initViewport()}e.launch.call(e.scope||e);e.launched=true;e.fireEvent("launch",e);g=e.controllers.items;f=g.length;for(j=0;j<f;j++){a=g[j];a.onLaunch(e)}if(!d.ready){d.init()}b=d.getToken();if(b){e.redirectTo(b,true)}else{if(h){d.add(h)}}},getModuleClassName:function(a,b){return Ext.app.Controller.getFullName(a,b,this.getName()).absoluteName},getViewportName:function(){var a=null,b=this.getAutoCreateViewport();if(b){a=(b===true)?"Viewport":b}return a},initQuickTips:function(){Ext.tip.QuickTipManager.init()},initViewport:function(){var a=this.getView(this.getViewportName()),d=a.prototype,c,b;if(a){if(!d.isViewport){b=d.plugins;b=["viewport"].concat(b?Ext.Array.from(b,true):[]);c={plugins:b}}this.viewport=a.create(c)}},createController:function(a){return this.getController(a)},destroyController:function(a){if(typeof a==="string"){a=this.getController(a,true)}Ext.destroy(a)},getController:function(b,a){var k=this,d=k.controllers,h,f,g,e,j,l;f=d.get(b);if(!f){l=d.items;for(e=0,g=l.length;e<g;++e){j=l[e];h=j.getModuleClassName();if(h&&h===b){f=j;break}}}if(!f&&!a){h=k.getModuleClassName(b,"controller");f=Ext.create(h,{application:k,moduleClassName:b});d.add(f);if(k._initialized){f.doInit(k)}}return f},unregister:function(a){this.controllers.remove(a)},getApplication:function(){return this},destroy:function(a){var c=this,e=c.controllers,b=Ext.namespace(c.getName()),d=c.getAppProperty();Ext.destroy(c.viewport);if(e){e.each(function(f){f.destroy(a,true)})}c.controllers=null;Ext.app.Controller.prototype.destroy.call(this,a,true);if(b&&b[d]===c){delete b[d]}},updateGlyphFontFamily:function(a){Ext.setGlyphFontFamily(a)}},1,0,0,0,0,0,[Ext.app,"Application"],0));Ext.define("Ext.overrides.app.Application",{override:"Ext.app.Application"});Ext.application=function(a){var c=function(e){Ext.onReady(function(){Ext.app.Application.instance=new e()})},d=a.paths,b;if(typeof a==="string"){Ext.require(a,function(){c(Ext.ClassManager.get(a))})}else{a=Ext.apply({extend:"Ext.app.Application"},a);Ext.Loader.setPath(a.name,a.appFolder||"app");if(d){for(b in d){if(d.hasOwnProperty(b)){Ext.Loader.setPath(b,d[b])}}}a["paths processed"]=true;Ext.define(a.name+".$application",a,function(){c(this)})}};(Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:true,constructor:function(a){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=a;this.monitoredClasses=[Ext.Component]},match:function(d,a,b){var c=false;if(a==="#"){c=b===d.getController()}else{c=d.is(a)}return c},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0));(Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:true,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var a=this.getView(),b;if(a){b=this.getCloseViewAction();a[b]()}},control:function(a,b){var c=a;if(Ext.isString(a)){c={};c[a]=b}this.compDomain.listen(c,this)},listen:function(c,a){var b=c.component;if(b){c=Ext.apply({},c);delete c.component;this.control(b)}this.callParent([c,a])},getReferences:function(){return this.view.getReferences()},getView:function(){return this.view},lookupReference:function(b){var a=this.view;return a&&a.lookupReference(b)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(c){var b=this.view,a=false;if(b){a=b.fireEvent.apply(b,arguments)}return a},privates:{view:null,ensureId:function(){var a=this.getId();if(!a){this.setId(Ext.id(null,"controller-"))}},attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},clearReference:function(b){var a=this.view;if(a){a.clearReference(b)}},clearReferences:function(){var a=this.view;if(a){a.clearReferences()}},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit()}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0));(Ext.cmd.derive("Ext.form.field.Display",Ext.form.field.Base,{alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],ariaRole:"textbox",fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],focusable:false,readOnly:true,fieldCls:"x-form-display-field",fieldBodyCls:"x-form-display-field-body",htmlEncode:false,noWrap:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,valueToRaw:function(a){if(!a&&a!==0){return""}else{return a}},isDirty:function(){return false},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.valueFrom(b,"");a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.getDisplayValue();a.updateLayout()}return b},getDisplayValue:function(){var a=this,b=this.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a.htmlEncode?Ext.util.Format.htmlEncode(b):b}return c},getSubTplData:function(b){var a=Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments);a.value=this.getDisplayValue();return a}},0,["displayfield"],["component","box","field","displayfield"],{component:true,box:true,field:true,displayfield:true},["widget.displayfield"],0,[Ext.form.field,"Display",Ext.form,"DisplayField",Ext.form,"Display"],0));(Ext.cmd.derive("Ext.layout.container.Fit",Ext.layout.container.Container,{alternateClassName:"Ext.layout.FitLayout",itemCls:"x-fit-item",targetCls:"x-layout-fit",type:"fit",manageMargins:true,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(b,c){var a=c||this.owner.getSizeModel(),d=(a.width.shrinkWrap?0:1)|(a.height.shrinkWrap?0:2);return this.sizePolicies[d]},beginLayoutCycle:function(j,f){var s=this,t=s.lastHeightModel&&s.lastHeightModel.calculated,g=s.lastWidthModel&&s.lastWidthModel.calculated,n=g||t,k=0,l=0,r,b,o,q,e,a,h,m,p,d;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);if(n&&j.targetContext.el.dom.tagName.toUpperCase()!="TD"){n=g=t=false}b=j.childItems;e=b.length;for(o=0;o<e;++o){q=b[o];if(f){r=q.target;h=r.minHeight;m=r.minWidth;if(m||h){a=q.marginInfo||q.getMarginInfo();h+=a.height;m+=a.height;if(k<h){k=h}if(l<m){l=m}}}if(n){p=q.el.dom.style;if(t){p.height=""}if(g){p.width=""}}}if(f){j.maxChildMinHeight=k;j.maxChildMinWidth=l}r=j.target;j.overflowX=(!j.widthModel.shrinkWrap&&j.maxChildMinWidth&&r.scrollFlags.x)||d;j.overflowY=(!j.heightModel.shrinkWrap&&j.maxChildMinHeight&&r.scrollFlags.y)||d},calculate:function(f){var n=this,k=f.childItems,d=k.length,c=n.getContainerSize(f),e={length:d,ownerContext:f,targetSize:c},q=f.widthModel.shrinkWrap,l=f.heightModel.shrinkWrap,j=f.overflowX,g=f.overflowY,m,b,o,h,a,p;if(j||g){m=n.getScrollbarsNeeded(j&&c.width,g&&c.height,f.maxChildMinWidth,f.maxChildMinHeight);if(m){b=Ext.getScrollbarSize();if(m&1){c.height-=b.height}if(m&2){c.width-=b.width}}}if(d>0){for(h=0;h<d;++h){e.index=h;n.fitItem(k[h],e)}}else{e.contentWidth=e.contentHeight=0}if(l||q){o=f.targetContext.getPaddingInfo();if(q){if(g&&!c.gotHeight){n.done=false}else{a=e.contentWidth+o.width;if(m&2){a+=b.width}if(!f.setContentWidth(a)){n.done=false}}}if(l){if(j&&!c.gotWidth){n.done=false}else{p=e.contentHeight+o.height;if(m&1){p+=b.height}if(!f.setContentHeight(p)){n.done=false}}}}},fitItem:function(b,c){var a=this;if(b.invalid){a.done=false;return}c.margins=b.getMarginInfo();c.needed=c.got=0;a.fitItemWidth(b,c);a.fitItemHeight(b,c);if(c.got!=c.needed){a.done=false}},fitItemWidth:function(c,d){var a,b;if(d.ownerContext.widthModel.shrinkWrap){b=c.getProp("width")+d.margins.width;a=d.contentWidth;if(a===undefined){d.contentWidth=b}else{d.contentWidth=Math.max(a,b)}}else{if(c.widthModel.calculated){++d.needed;if(d.targetSize.gotWidth){++d.got;this.setItemWidth(c,d)}else{return}}}this.positionItemX(c,d)},fitItemHeight:function(c,d){var b,a;if(d.ownerContext.heightModel.shrinkWrap){a=c.getProp("height")+d.margins.height;b=d.contentHeight;if(b===undefined){d.contentHeight=a}else{d.contentHeight=Math.max(b,a)}}else{if(c.heightModel.calculated){++d.needed;if(d.targetSize.gotHeight){++d.got;this.setItemHeight(c,d)}else{return}}}this.positionItemY(c,d)},positionItemX:function(a,c){var b=c.margins;if(c.index||b.left){a.setProp("x",b.left)}if(b.width){a.setProp("margin-right",b.width)}},positionItemY:function(a,c){var b=c.margins;if(c.index||b.top){a.setProp("y",b.top)}if(b.height){a.setProp("margin-bottom",b.height)}},setItemHeight:function(a,b){a.setHeight(b.targetSize.height-b.margins.height)},setItemWidth:function(a,b){a.setWidth(b.targetSize.width-b.margins.width)}},0,0,0,0,["layout.fit"],0,[Ext.layout.container,"Fit",Ext.layout,"FitLayout"],0));(Ext.cmd.derive("Ext.panel.Table",Ext.panel.Panel,{extraBaseCls:"x-grid",extraBodyCls:"x-grid-body",defaultBindProperty:"store",layout:"fit",ariaRole:"grid",config:{selection:null},publishes:["selection"],twoWayBindable:["selection"],autoLoad:false,variableRowHeight:false,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:false,viewType:null,selType:"rowmodel",scroll:true,deferRowRender:false,sortableColumns:true,multiColumnSort:false,enableLocking:false,scrollerOwner:true,enableColumnMove:true,sealedColumns:false,enableColumnResize:true,rowLines:true,bufferedRenderer:true,ownerGrid:null,colLinesCls:"x-grid-with-col-lines",rowLinesCls:"x-grid-with-row-lines",noRowLinesCls:"x-grid-no-row-lines",hiddenHeaderCtCls:"x-grid-header-ct-hidden",hiddenHeaderCls:"x-grid-header-hidden",resizeMarkerCls:"x-grid-resize-marker",emptyCls:"x-grid-empty",focusable:true,tabIndex:0,constructor:function(b){var c=this,a;c.ownerGrid=(b&&b.ownerGrid)||c;Ext.panel.Panel.prototype.constructor.call(this,b);a=this.store;a.trackStateChanges=true;if(c.autoLoad){a.unblockLoad();a.load()}},initComponent:function(){var f=this,h=f.columns||f.colModel||[],b,e,a,g,c=f.store=Ext.data.StoreManager.lookup(f.store||"ext-empty-store"),d;f.enableLocking=f.enableLocking||f.hasLockedColumns(h);if(f.autoLoad){f.store.blockLoad()}if(f.plugins){f.plugins=f.constructPlugins()}if(f.columnLines){f.addBodyCls(f.colLinesCls)}f.addBodyCls(f.rowLines?f.rowLinesCls:f.noRowLinesCls);f.addBodyCls(f.extraBodyCls);if(f.enableLocking){f.self.mixin("lockable",Ext.grid.locking.Lockable);f.injectLockable()}else{if(h.isRootHeader){f.headerCt=h;f.headerCt.forceFit=!!f.forceFit;f.columnManager=h.columnManager;f.visibleColumnManager=h.visibleColumnManager}else{if(Ext.isArray(h)){h={items:h}}Ext.apply(h,{grid:f,forceFit:f.forceFit,sortable:f.sortableColumns,enableColumnMove:f.enableColumnMove,enableColumnResize:f.enableColumnResize,columnLines:f.columnLines,sealed:f.sealedColumns});if(f.hideHeaders){h.height=0;h.hiddenHeaders=true}if(Ext.isDefined(f.enableColumnHide)){h.enableColumnHide=f.enableColumnHide}f.headerCt=new Ext.grid.header.Container(h)}}f.columns=d=f.headerCt.getGridColumns();f.scrollTask=new Ext.util.DelayedTask(f.syncHorizontalScroll,f);f.cls=(f.cls||"")+(" "+f.extraBaseCls);delete f.autoScroll;g=f.plugins&&Ext.Array.findBy(f.plugins,function(j){return j.isBufferedRenderer});if(g){f.bufferedRenderer=g}if(!f.hasView){if(c.isBufferedStore&&!c.remoteSort){for(e=0,a=d.length;e<a;e++){d[e].sortable=false}}if(f.hideHeaders){f.headerCt.addCls(f.hiddenHeaderCtCls);f.addCls(f.hiddenHeaderCls)}f.relayHeaderCtEvents(f.headerCt);f.features=f.features||[];if(!Ext.isArray(f.features)){f.features=[f.features]}f.dockedItems=[].concat(f.dockedItems||[]);f.dockedItems.unshift(f.headerCt);f.viewConfig=f.viewConfig||{};b=f.getView();f.items=[b];f.hasView=true;if(!f.hideHeaders){b.on({scroll:f.onHorizontalScroll,scope:f,onFrame:!!Ext.global.requestAnimationFrame})}f.bindStore(c,true);f.mon(b,{viewready:f.onViewReady,refresh:f.onRestoreHorzScroll,scope:f})}f.relayEvents(f.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","select","beforedeselect","deselect"]);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);f.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},beforeRender:function(){var a=this,b=a.bufferedRenderer;if(!a.lockable){if(b&&a.getSizeModel().height.auto){a.bufferedRenderer=b=false}if(b&&!b.isBufferedRenderer){b={xclass:"Ext.grid.plugin.BufferedRenderer"};Ext.copyTo(b,a,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer");a.bufferedRenderer=a.addPlugin(b)}}Ext.panel.Panel.prototype.beforeRender.apply(this,arguments)},initFocusableEvents:function(){var b=this,a=b.getView();Ext.panel.Panel.prototype.initFocusableEvents.call(this);b.focusEnterLeaveListeners=a.getFocusEl().on({focusenter:b.onFocusEnter,focusleave:b.onFocusLeave,scope:b,destroyable:true})},onFocus:function(a){Ext.panel.Panel.prototype.onFocus.call(this,a);this.handleFocusEnter(a)},onFocusEnter:function(a){this.handleFocusEnter(a)},handleFocusEnter:function(c){var f=this,g=f.getView(),a,h=g.getNavigationModel(),j,b,k=g.bufferedRenderer,d;if(!f.containsFocus){j=b=g.getLastFocused();if(!b){a=g.isLockingView?(g.lockedGrid.isVisible()?g.lockedView:g.normalView):g;d=g.dataSource.getAt(k?k.getFirstVisibleRowIndex():0);if(!d.isNonData){b=new Ext.grid.CellContext(a).setPosition({row:d,column:0})}}if(!b){c.stopEvent();c.getTarget().blur();return}h.setPosition(b,null,c,null,!!j);f.containsFocus=!!h.getPosition()}if(f.containsFocus){this.getView().el.dom.setAttribute("tabindex","-1")}},onFocusLeave:function(b){var a=this.getView();if(this.containsFocus){a.getNavigationModel().setPosition(null,null,b,null,true);this.containsFocus=false;a.focusEl=a.el;a.focusEl.dom.setAttribute("tabindex",0)}},hasLockedColumns:function(c){var b,a,d;if(c.isRootHeader){c=c.items.items}else{if(Ext.isObject(c)){c=c.items}}for(b=0,a=c.length;b<a;b++){d=c[b];if(!d.processed&&d.locked){return true}}},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var b=this,c=Ext.panel.Panel.prototype.getState.call(this),a=b.store.getState();c=b.addPropertyToState(c,"columns",b.headerCt.getColumnsState());if(a){c.storeState=a}return c},applyState:function(e){var d=this,f=e.sort,a=e.storeState,b=d.store,c=e.columns;delete e.columns;Ext.panel.Panel.prototype.applyState.apply(this,arguments);if(c){d.headerCt.applyColumnsState(c)}if(f){if(b.remoteSort){b.sort({property:f.property,direction:f.direction,root:f.root},null,false)}else{b.sort(f.property,f.direction)}}else{if(a){b.applyState(a)}}},getStore:function(){return this.store},getView:function(){var b=this,c,a;if(!b.view){c=b.getSelectionModel();a=Ext.apply({grid:b,ownerGrid:b.ownerGrid,deferInitialRefresh:b.deferRowRender,variableRowHeight:b.variableRowHeight,preserveScrollOnRefresh:true,trackOver:b.trackMouseOver!==false,throttledUpdate:b.throttledUpdate===true,scroll:b.scroll,xtype:b.viewType,store:b.store,headerCt:b.headerCt,columnLines:b.columnLines,rowLines:b.rowLines,selModel:c,navigationModel:"grid",features:b.features,panel:b,emptyText:b.emptyText||""},b.viewConfig);if(b.scroll&&b.viewConfig.scroll&&b.scroll!==b.viewConfig.scroll){a.scroll="both"}Ext.widget(a);if(b.view.emptyText){b.view.emptyText='<div class="'+b.emptyCls+'">'+b.view.emptyText+"</div>"}b.view.getComponentLayout().headerCt=b.headerCt;b.mon(b.view,{uievent:b.processEvent,scope:b});c.view=b.view;b.headerCt.view=b.view;if(b.hasListeners.viewcreated){b.fireEvent("viewcreated",b,b.view)}}return b.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,processEvent:function(f,h,j,a,g,d,c,k){var b=d.position.column;if(b){return b.processEvent.apply(b,arguments)}},scrollByDeltaY:function(b,a){this.getView().scrollBy(0,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,0,a)},afterCollapse:function(){this.saveScrollPos();Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){Ext.panel.Panel.prototype.afterExpand.apply(this,arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){if(this.view.scrollManager){this.view.scrollManager.refresh()}},onHeaderMove:function(e,f,a,b,d){var c=this;if(c.optimizedColumnMove===false){c.view.refreshView()}else{c.view.moveColumn(b,d,a)}c.delayScroll()},onHeaderHide:function(a,b){if(this.view.refreshCounter){this.view.refreshView()}},onHeaderShow:function(a,b){if(this.view.refreshCounter){this.view.refreshView()}},onHeadersChanged:function(b,c){var a=this;if(a.rendered&&!a.reconfiguring){a.view.refreshView();a.delayScroll()}},delayScroll:function(){var a=this.view;if(a){this.scrollTask.delay(10,null,null,[a])}},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var b=this,a=b.scrollXPos;if(a){b.syncHorizontalScroll(b,true)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up("[scrollerOwner]")}return a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){var c=this,a=c.selModel,e,d,b;if(!a){a={};e=true}if(!a.events){b=a.selType||c.selType;e=!a.mode;a=c.selModel=Ext.create("selection."+b,a)}if(c.simpleSelect){d="SIMPLE"}else{if(c.multiSelect){d="MULTI"}}Ext.applyIf(a,{allowDeselect:c.allowDeselect});if(d&&e){a.setSelectionMode(d)}if(!a.hasRelaySetup){c.relayEvents(a,["selectionchange","beforeselect","beforedeselect","select","deselect"]);a.hasRelaySetup=true;if(a.isRowModel){a.on("selectionchange",c.updateBindSelection,c)}}if(c.disableSelection){a.locked=true}return a},getScrollTarget:function(){var a=this.getScrollerOwner(),b=a.query("tableview");return b[1]||b[0]},onHorizontalScroll:function(a){this.syncHorizontalScroll(a)},syncHorizontalScroll:function(e,c){var d=this,a=d.view.getScrollX(),b;c=c===true;if(d.rendered&&(c||a!==d.scrollXPos)){if(c){b=d.getScrollTarget();b.setScrollX(a)}d.headerCt.setScrollX(a);d.scrollXPos=a}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(b,c){var d=this,a=d.getView(),e=d.bufferedRenderer;if(b){d.store=b;if(e&&e.isBufferedRenderer&&e.store){e.bindStore(b)}if(a.store!==b){a.bindStore(b,false)}d.mon(b,{load:d.onStoreLoad,scope:d});d.storeRelayers=d.relayEvents(b,["filterchange","groupchange"])}else{d.unbindStore()}},unbindStore:function(){var c=this,b=c.store,a;if(b){c.store=null;c.mun(b,{load:c.onStoreLoad,scope:c});Ext.destroy(c.storeRelayers);a=c.view;if(a.store){a.bindStore(null)}}},setColumns:function(a){if(a.length||this.getColumnManager().getColumns().length){this.reconfigure(undefined,a)}},setStore:function(a){this.reconfigure(a)},reconfigure:function(a,c){var d=this,f=d.store,e=d.headerCt,b=e?e.items.getRange():d.columns;if(arguments.length===1&&Ext.isArray(a)){c=a;a=null}if(c){c=Ext.Array.slice(c)}d.reconfiguring=true;d.fireEvent("beforereconfigure",d,a,c,f,b);if(d.lockable){d.reconfigureLockable(a,c)}else{Ext.suspendLayouts();if(c){delete d.scrollXPos;e.removeAll();e.add(c)}if(a&&(a=Ext.StoreManager.lookup(a))!==f){d.unbindStore();d.bindStore(a)}else{d.getView().refreshView()}Ext.resumeLayouts(true)}d.fireEvent("reconfigure",d,a,c,f,b);delete d.reconfiguring},beforeDestroy:function(){var a=this.scrollTask;if(a){a.cancel();this.scrollTask=null}Ext.destroy(this.focusEnterLeaveListeners);Ext.panel.Panel.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.lockable){a.destroyLockable()}a.unbindStore();Ext.panel.Panel.prototype.onDestroy.call(this);a.columns=a.storeRelayers=a.columnManager=a.visibleColumnManager=null},destroy:function(){var a=this;Ext.panel.Panel.prototype.destroy.call(this);if(a.isDestroyed){a.view=a.selModel=a.headerCt=null}},privates:{getFocusEl:function(){return this.getView().getFocusEl()}}},1,["tablepanel"],["component","box","container","panel","tablepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true},["widget.tablepanel"],0,[Ext.panel,"Table"],0));Ext.define("ExtThemeNeptune.panel.Table",{override:"Ext.panel.Table",initComponent:function(){var a=this;if(!a.hasOwnProperty("bodyBorder")&&!a.hideHeaders){a.bodyBorder=true}(arguments.callee.$previous||Ext.panel.Panel.prototype.initComponent).call(this)}});Ext.define("FBEditor.override.panel.Table",{override:"Ext.panel.Table",handleFocusEnter:function(c){var f=this,g=f.getView(),a,h=g.getNavigationModel(),j,b,k=g.bufferedRenderer,d;if(!f.containsFocus){j=b=g.getLastFocused();if(!b){a=g.isLockingView?(g.lockedGrid.isVisible()?g.lockedView:g.normalView):g;d=g.dataSource.getAt(k?k.getFirstVisibleRowIndex():0);if(d&&!d.isNonData){b=new Ext.grid.CellContext(a).setPosition({row:d,column:0})}}if(!b){c.stopEvent();c.getTarget().blur();return}h.setPosition(b,null,c,null,!!j);f.containsFocus=!!h.getPosition()}if(f.containsFocus){this.getView().el.dom.setAttribute("tabindex","-1")}}});(Ext.cmd.derive("Ext.grid.CellContext",Ext.Base,{isCellContext:true,constructor:function(a){this.view=a},isEqual:function(a){if(a){return this.record===a.record&&this.column===a.column}return false},setPosition:function(c,a){var b=this;if(arguments.length===1){if(c.view){b.view=c.view}a=c.column;c=c.row}b.setRow(c);b.setColumn(a);return b},setAll:function(b,c,d,a,f){var e=this;e.view=b;e.rowIdx=c;e.colIdx=d;e.record=a;e.column=f;return e},setRow:function(c){var a=this,b=a.view.dataSource;if(c!==undefined){if(typeof c==="number"){a.rowIdx=Math.max(Math.min(c,b.getCount()-1),0);a.record=b.getAt(c)}else{if(c.isModel){a.record=c;a.rowIdx=b.indexOf(c)}else{if(c.tagName){a.record=a.view.getRecord(c);a.rowIdx=b.indexOf(a.record)}}}}},setColumn:function(a){var b=this,c=b.view.getVisibleColumnManager();if(a!==undefined){if(typeof a==="number"){b.colIdx=a;b.column=c.getHeaderAtIndex(a)}else{if(a.isHeader){b.column=a;b.colIdx=c.getHeaderIndex(a)}}}},equal:function(a){return(a&&a.isCellContext&&a.view===this.view&&a.record===this.record&&a.column===this.column)},clone:function(){var b=this,a=new b.self(b.view);a.rowIdx=b.rowIdx;a.colIdx=b.colIdx;a.record=b.record;a.column=b.column;return a}},1,0,0,0,0,0,[Ext.grid,"CellContext"],0));(Ext.cmd.derive("Ext.util.CSS",Ext.Base,function(){var c,e=null,d=document,b=/(-[a-z])/gi,a=function(f,g){return g.charAt(1).toUpperCase()};return{singleton:true,rules:e,initialized:false,constructor:function(){c=this},createStyleSheet:function(h,k){var g,f=d.getElementsByTagName("head")[0],j=d.createElement("style");j.setAttribute("type","text/css");if(k){j.setAttribute("id",k)}g=j.styleSheet;if(g){f.appendChild(j);g.cssText=h}else{j.appendChild(d.createTextNode(h));f.appendChild(j);g=j.sheet}c.cacheStyleSheet(g);return g},removeStyleSheet:function(g){var f=d.getElementById(g);if(f){f.parentNode.removeChild(f)}},swapStyleSheet:function(h,f){var g;c.removeStyleSheet(h);g=d.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("id",h);g.setAttribute("href",f);d.getElementsByTagName("head")[0].appendChild(g)},cacheStyleSheet:function(l){if(!e){e=c.rules={}}try{var o=l.cssRules||l.rules,k=o.length-1,g=l.imports,f=g?g.length:0,n,h;for(h=0;h<f;++h){c.cacheStyleSheet(g[h])}for(;k>=0;--k){n=o[k];if(n.styleSheet){c.cacheStyleSheet(n.styleSheet)}c.cacheRule(n,l)}}catch(m){}},cacheRule:function(g,l){if(g.styleSheet){return c.cacheStyleSheet(g.styleSheet)}var k=g.selectorText,h,f;if(k){k=k.split(",");h=k.length;for(f=0;f<h;f++){e[Ext.String.trim(k[f]).toLowerCase()]={parentStyleSheet:l,cssRule:g}}}},getRules:function(h){var g={},f;if(e===null||h){c.refreshCache()}for(f in e){g[f]=e[f].cssRule}return g},refreshCache:function(){var h=d.styleSheets,g=0,f=h.length;e=c.rules={};for(;g<f;g++){try{if(!h[g].disabled){c.cacheStyleSheet(h[g])}}catch(j){}}},getRule:function(g,j,h){var k,f;if(!e||j){c.refreshCache()}if(!Ext.isArray(g)){f=e[g.toLowerCase()];if(f&&!h){f=f.cssRule}return f||null}for(k=0;k<g.length;k++){if(e[g[k]]){return h?e[g[k].toLowerCase()]:e[g[k].toLowerCase()].cssRule}}return null},createRule:function(l,g,j){var f,k=l.cssRules||l.rules,h=k.length;if(l.insertRule){l.insertRule(g+" {"+j+"}",h)}else{l.addRule(g,j||" ")}c.cacheRule(f=k[h],l);return f},updateRule:function(f,k,j){var l,g,h;if(!Ext.isArray(f)){l=c.getRule(f);if(l){if(arguments.length===2){h=Ext.Element.parseStyles(k);for(k in h){l.style[k.replace(b,a)]=h[k]}}else{l.style[k.replace(b,a)]=j}return true}}else{for(g=0;g<f.length;g++){if(c.updateRule(f[g],k,j)){return true}}}return false},deleteRule:function(f){var h=c.getRule(f,false,true),j,g;if(h){j=h.parentStyleSheet;g=Ext.Array.indexOf(j.cssRules||j.rules,h.cssRule);if(j.deleteRule){j.deleteRule(g)}else{j.removeRule(g)}delete e[f]}}}},1,0,0,0,0,0,[Ext.util,"CSS"],0));(Ext.cmd.derive("Ext.view.TableLayout",Ext.layout.component.Auto,{type:"tableview",beginLayout:function(c){var b=this,a=b.owner.lockingPartner;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(a){b.lockedGrid=b.owner.up("[lockable]");b.lockedGrid.needsRowHeightSync=true;if(!c.lockingPartner){c.lockingPartner=c.context.getItem(a,a.el);if(c.lockingPartner&&!c.lockingPartner.lockingPartner){c.lockingPartner.lockingPartner=c}}}c.headerContext=c.context.getCmp(b.headerCt);if(b.owner.body.dom){c.bodyContext=c.getEl(b.owner.body)}},calculate:function(f){var e=this,c=e.lockingPartner,a=e.owner,d=0,b;if(!a.store.getCount()){f.state.columnWidthsSynced=true;if(f.bodyContext){f.bodyContext.setHeight(d,false)}f.setProp("contentHeight",d);Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);return}if(f.headerContext.hasProp("columnsChanged")){if(f.headerContext.getProp("columnsChanged")&&!e.setColumnWidths(f)){e.done=false;return}f.state.columnWidthsSynced=true;if(f.bodyContext){b=e.owner.el.down("."+a.ownerCt.emptyCls,true);if(!b){d=f.bodyContext.el.dom.offsetHeight;f.bodyContext.setHeight(d,false)}else{d=b.offsetHeight}if(f.headerContext.state.boxPlan.tooNarrow&&f.ownerCtContext.sizeModel.height.shrinkWrap){d+=Ext.getScrollbarSize().height}f.setProp("contentHeight",d)}if(c&&!c.state.columnWidthsSynced){e.done=false}else{Ext.layout.component.Auto.prototype.calculate.apply(this,arguments)}}else{e.done=false}},measureContentHeight:function(b){var a=b.lockingPartner;if(!b.bodyContext||(b.state.columnWidthsSynced&&(!a||a.state.columnWidthsSynced))){return Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments)}},setColumnWidths:function(c){if(!this.owner.body.dom){return true}var k=this,b=k.owner,a=c.context,f=c.headerContext.getProp("columnsChanged"),e=k.headerCt.getVisibleGridColumns(),d,h=0,j=f.length,l,g;if(a){a.currentLayout=k}for(h=0;h<j;h++){d=e[f[h]];l=a.getCmp(d);g=l.props.width;if(isNaN(g)){l.getProp("width");return false}b.body.select(b.getColumnSizerSelector(d)).setWidth(g)}return true},finishedLayout:function(c){var b=this,a=c.headerContext.props.contentWidth,d=Ext.fly(b.owner.getNodeContainer());Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);d&&d.setWidth(a);if(b.owner.refreshCounter&&b.lockedGrid&&b.lockedGrid.syncRowHeight&&b.lockedGrid.needsRowHeightSync){b.lockedGrid.syncRowHeights();b.lockedGrid.needsRowHeightSync=false}}},0,0,0,0,["layout.tableview"],0,[Ext.view,"TableLayout"],0));(Ext.cmd.derive("Ext.view.NodeCache",Ext.Base,{statics:{range:document.createRange&&document.createRange()},constructor:function(a){this.view=a;this.clear();this.el=new Ext.dom.Fly()},clear:function(f){var d=this,e=d.elements,b,c,a=d.statics().range;if(d.count&&f){if(a){a.setStartBefore(e[d.startIndex]);a.setEndAfter(e[d.endIndex]);a.deleteContents()}else{for(b in e){c=e[b];c.parentNode.removeChild(c)}}}d.elements={};d.count=d.startIndex=0;d.endIndex=-1},fill:function(b,g,f){f=f||0;var d=this,e=d.elements={},c,a=b.length-f;if(!g){g=0}for(c=0;c<a;c++){e[g+c]=b[c+f]}d.startIndex=g;d.endIndex=g+a-1;d.count=a;return this},insert:function(f,b){var d=this,e=d.elements,c,a=b.length;if(d.count){if(f<d.count){for(c=d.endIndex+a;c>=f+a;c--){e[c]=e[c-a];e[c].setAttribute("data-recordIndex",c)}}d.endIndex=d.endIndex+a}else{d.startIndex=f;d.endIndex=f+a-1}for(c=0;c<a;c++,f++){e[f]=b[c];e[f].setAttribute("data-recordIndex",f)}d.count+=a},invoke:function(d,a){var e=this,c,b;d=Ext.dom.Element.prototype[d];for(b=e.startIndex;b<=e.endIndex;b++){c=e.item(b);if(c){d.apply(c,a)}}return e},item:function(c,b){var d=this.elements[c],a=null;if(d){a=b?this.elements[c]:this.el.attach(this.elements[c])}return a},first:function(a){return this.item(this.startIndex,a)},last:function(a){return this.item(this.endIndex,a)},getCount:function(){return this.count},slice:function(e,b){var d=this.elements,a=[],c;if(!b){b=this.endIndex}else{b=Math.min(this.endIndex,b-1)}for(c=e||this.startIndex;c<=b;c++){a.push(d[c])}return a},replaceElement:function(d,c,a){var e=this.elements,b=(typeof d==="number")?d:this.indexOf(d);if(b>-1){c=Ext.getDom(c);if(a){d=e[b];d.parentNode.insertBefore(c,d);Ext.removeNode(d);c.setAttribute("data-recordIndex",b)}this.elements[b]=c}return this},indexOf:function(b){var c=this.elements,a;b=Ext.getDom(b);for(a=this.startIndex;a<=this.endIndex;a++){if(c[a]===b){return a}}return -1},removeRange:function(b,f,d){var h=this,a=h.elements,e,g,c,j;if(f==null){f=h.endIndex+1}else{f=Math.min(h.endIndex+1,f+1)}if(b==null){b=h.startIndex}c=f-b;for(g=b,j=f;g<=h.endIndex;g++,j++){if(d&&g<f){Ext.removeNode(a[g])}if(j<=h.endIndex){e=a[g]=a[j];e.setAttribute("data-recordIndex",g)}else{delete a[g]}}h.count-=c;h.endIndex-=c},removeElement:function(l,c){var g=this,k,j,a=g.elements,d,e,b=0,f,h;if(Ext.isArray(l)){k=l;l=[];e=k.length;for(b=0;b<e;b++){j=k[b];if(typeof j!=="number"){j=g.indexOf(j)}if(j>=g.startIndex&&j<=g.endIndex){l[l.length]=j}}Ext.Array.sort(l);e=l.length}else{if(l<g.startIndex||l>g.endIndex){return}e=1;l=[l]}for(f=h=l[0],b=0;f<=g.endIndex;f++,h++){if(b<e&&f===l[b]){h++;b++;if(c){Ext.removeNode(a[f])}}if(h<=g.endIndex&&h>=g.startIndex){d=a[f]=a[h];d.setAttribute("data-recordIndex",f)}else{delete a[f]}}g.endIndex-=e;g.count-=e},scroll:function(f,o,c){var m=this,n=m.view,p=n.store,a=m.elements,r=f.length,h,d,b,g,l=n.getNodeContainer(),q=document.createDocumentFragment(),e=n.hasListeners.itemremove,k=n.hasListeners.itemadd,j=m.statics().range;if(o===-1){if(c){if(j){j.setStartBefore(a[(m.endIndex-c)+1]);j.setEndAfter(a[m.endIndex]);j.deleteContents();for(h=(m.endIndex-c)+1;h<=m.endIndex;h++){d=a[h];delete a[h];if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}else{for(h=(m.endIndex-c)+1;h<=m.endIndex;h++){d=a[h];delete a[h];d.parentNode.removeChild(d);if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}m.endIndex-=c}if(f.length){g=n.bufferRender(f,m.startIndex-=r);for(h=0;h<r;h++){a[m.startIndex+h]=g[h];q.appendChild(g[h])}l.insertBefore(q,l.firstChild);if(k){n.fireEvent("itemadd",f,m.startIndex,g)}}}else{if(c){b=m.startIndex+c;if(j){j.setStartBefore(a[m.startIndex]);j.setEndAfter(a[b-1]);j.deleteContents();for(h=m.startIndex;h<b;h++){d=a[h];delete a[h];if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}else{for(h=m.startIndex;h<b;h++){d=a[h];delete a[h];d.parentNode.removeChild(d);if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}m.startIndex=b}g=n.bufferRender(f,m.endIndex+1);for(h=0;h<r;h++){a[m.endIndex+=1]=g[h];q.appendChild(g[h])}l.appendChild(q);if(k){n.fireEvent("itemadd",f,m.endIndex+1,g)}}m.count=m.endIndex-m.startIndex+1},sumHeights:function(){var a=0,c=this.elements,b;for(b=this.startIndex;b<=this.endIndex;b++){a+=c[b].offsetHeight}return a}},1,0,0,0,0,0,[Ext.view,"NodeCache"],function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}));(Ext.cmd.derive("Ext.view.Table",Ext.view.View,{inheritableStatics:{events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","deselect","select","beforedeselect","beforeselect","selectionchange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand"]},componentLayout:"tableview",baseCls:"x-grid-view",unselectableCls:"x-unselectable",firstCls:"x-grid-cell-first",lastCls:"x-grid-cell-last",itemCls:"x-grid-item",selectedItemCls:"x-grid-item-selected",selectedCellCls:"x-grid-cell-selected",focusedItemCls:"x-grid-item-focused",overItemCls:"x-grid-item-over",altRowCls:"x-grid-item-alt",dirtyCls:"x-grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)x-grid-row-(first|last|alt)(?:\\s+|$)","g"),cellRe:new RegExp("x-grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:true,positionCells:false,stripeOnUpdate:null,trackOver:true,focusable:false,getRowClass:null,stripeRows:true,markDirty:true,ariaRole:"grid",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="x-grid-item-container" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellPadding="0" cellSpacing="0" {ariaTableAttr} style="width:100%;{itemStyle}">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " x-grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}" {rowAttr:attributes} {ariaRowAttr}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>" tabindex="-1" {ariaCellAttr} data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</td>",{priority:0}],refreshSelmodelOnRefresh:false,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:["x-grid-cell x-grid-td"]},renderBuffer:document.createElement("div"),constructor:function(a){if(a.grid.isTree){a.baseCls="x-tree-view"}Ext.view.View.prototype.constructor.call(this,a)},hasVariableRowHeight:function(a){var b=this;return b.variableRowHeight||b.store.isGrouped()||b.getVisibleColumnManager().hasVariableRowHeight()||(!a&&b.lockingPartner&&b.lockingPartner.hasVariableRowHeight(true))},initComponent:function(){var b=this,a=b.scroll;if(b.columnLines){b.addCls(b.grid.colLinesCls)}if(b.rowLines){b.addCls(b.grid.rowLinesCls)}b.body=new Ext.dom.Fly();b.body.id=b.id+"gridBody";b.autoScroll=undefined;if(!b.trackOver){b.overItemCls=null}if(a===true||a==="both"){b.autoScroll=true}else{if(a==="horizontal"){b.overflowX="auto"}else{if(a==="vertical"){b.overflowY="auto"}}}b.selModel.view=b.headerCt.view=b;b.grid.view=b;b.initFeatures(b.grid);b.itemSelector=b.getItemSelector();b.all=new Ext.view.NodeCache(b);Ext.view.View.prototype.initComponent.call(this)},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},beforeLayout:function(){var b=this,a=!b.firstRefreshDone&&b.headerCt.layout.running;Ext.view.View.prototype.beforeLayout.apply(this,arguments);if(a&&b.body.dom){b.headerCt.layout.injectViewContext(b.headerCt.layout.ownerContext,b)}},moveColumn:function(a,t,h){var s=this,q=h>1,l=q&&document.createRange?document.createRange():null,b=q&&!l?document.createDocumentFragment():null,k=t,m=s.getGridColumns().length,r=m-1,e=(s.firstCls||s.lastCls)&&(t===0||t===m||a===0||a===r),o,n,g,p,c,d,f;if(s.rendered&&t!==a){g=s.el.query(s.rowSelector);if(t>a&&b){k-=1}for(o=0,p=g.length;o<p;o++){c=g[o];d=c.childNodes;if(e){if(d.length===1){Ext.fly(d[0]).addCls(s.firstCls);Ext.fly(d[0]).addCls(s.lastCls);continue}if(a===0){Ext.fly(d[0]).removeCls(s.firstCls);Ext.fly(d[1]).addCls(s.firstCls)}else{if(a===r){Ext.fly(d[r]).removeCls(s.lastCls);Ext.fly(d[r-1]).addCls(s.lastCls)}}if(t===0){Ext.fly(d[0]).removeCls(s.firstCls);Ext.fly(d[a]).addCls(s.firstCls)}else{if(t===m){Ext.fly(d[r]).removeCls(s.lastCls);Ext.fly(d[a]).addCls(s.lastCls)}}}if(q){if(l){l.setStartBefore(d[a]);l.setEndAfter(d[a+h-1]);b=l.extractContents()}else{for(n=0;n<h;n++){b.appendChild(d[a])}}c.insertBefore(b,d[k]||null)}else{c.insertBefore(d[a],d[k]||null)}}f=s.el.query("colgroup");for(o=0,p=f.length;o<p;o++){c=f[o];if(q){if(l){l.setStartBefore(c.childNodes[a]);l.setEndAfter(c.childNodes[a+h-1]);b=l.extractContents()}else{for(n=0;n<h;n++){b.appendChild(c.childNodes[a])}}c.insertBefore(b,c.childNodes[k]||null)}else{c.insertBefore(c.childNodes[a],c.childNodes[k]||null)}}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(a){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(a)},getCell:function(a,b){var c=this.getRow(a);return Ext.fly(c).down(b.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},findFeature:function(a){if(this.features){return Ext.Array.findBy(this.features,function(b){if(b.ftype===a){return true}})}},initFeatures:function(d){var f=this,c,e,b,a;f.tpl=Ext.XTemplate.getTpl(this,"tpl");f.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl");f.addRowTpl(Ext.XTemplate.getTpl(this,"outerRowTpl"));f.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl");f.featuresMC=new Ext.util.MixedCollection();e=f.features=f.constructFeatures();a=e?e.length:0;for(c=0;c<a;c++){b=e[c];b.view=f;b.grid=d;f.featuresMC.add(b);b.init(d)}},renderTHead:function(b,c,e){var f=b.view.headerFns,a,d;if(f){for(d=0,a=f.length;d<a;++d){f[d].call(this,b,c,e)}}},addHeaderFn:function(a){var b=this.headerFns;if(!b){b=this.headerFns=[]}b.push(a)},renderTFoot:function(b,c,e){var f=b.view.footerFns,a,d;if(f){for(d=0,a=f.length;d<a;++d){f[d].call(this,b,c,e)}}},addFooterFn:function(a){var b=this.footerFns;if(!b){b=this.footerFns=[]}b.push(a)},addTpl:function(a){return this.insertTpl("tpl",a)},addRowTpl:function(a){return this.insertTpl("rowTpl",a)},addCellTpl:function(a){return this.insertTpl("cellTpl",a)},insertTpl:function(e,d){var c=this,a,b;if(d.isTemplate){d=Ext.Object.chain(d)}else{d=new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",d)}for(a=c[e];d.priority<a.priority;a=a.nextTpl){b=a}if(b){b.nextTpl=d}else{c[e]=d}d.nextTpl=a;return d},tplApplyOut:function(a,b,c){if(this.before){if(this.before(a,b,c)===false){return}}this.nextTpl.applyOut(a,b,c);if(this.after){this.after(a,b,c)}},constructFeatures:function(){var f=this,e=f.features,d,b,c=0,a;if(e){b=[];a=e.length;for(;c<a;c++){d=e[c];if(!d.isFeature){d=Ext.create("feature."+d.ftype,d)}b[c]=d}}return b},beforeRender:function(){var a=this;Ext.view.View.prototype.beforeRender.call(this);if(!a.enableTextSelection){a.protoEl.unselectable()}},onBindStore:function(){var a=this;if(a.all&&a.all.getCount()){if(a.bufferedRenderer){a.bufferedRenderer.setBodyTop(0)}a.clearViewEl()}Ext.view.View.prototype.onBindStore.apply(this,arguments)},onViewScroll:function(b,a){if(!this.ignoreScroll){Ext.view.View.prototype.onViewScroll.apply(this,arguments);this.fireEvent("bodyscroll",b,a)}},createRowElement:function(b,c,d){var e=this,f=e.renderBuffer,a=e.collectData([b],c);a.columns=d;e.tpl.overwrite(f,a);return Ext.fly(f).down(e.getNodeContainerSelector(),true).firstChild},bufferRender:function(a,b){var c=this,d=c.renderBuffer;c.tpl.overwrite(d,c.collectData(a,b));return Ext.Array.toArray(Ext.fly(d).down(c.getNodeContainerSelector(),true).childNodes)},collectData:function(a,c){var b=this;b.rowValues.view=b;b.tableValues.view=b;b.tableValues.rows=a;b.tableValues.columns=null;b.tableValues.viewStartIndex=c;b.tableValues.touchScroll=b.touchScroll;b.tableValues.tableStyle="width:"+b.headerCt.getTableWidth()+"px";return b.tableValues},collectNodes:function(a){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},refreshSize:function(c){var b=this,a=b.getBodySelector();if(a){b.body.attach(b.el.down(a,true))}if(!b.hasLoadingHeight){Ext.suspendLayouts();Ext.view.View.prototype.refreshSize.apply(this,arguments);if(c||(b.hasVariableRowHeight()&&b.dataSource.getCount())){b.grid.updateLayout()}Ext.resumeLayouts(true)}},clearViewEl:function(h){var e=this,c=e.all,a=e.getStore(),b,d,f,g;for(b=c.startIndex;b<=c.endIndex;b++){d=c.item(b,true);e.fireEvent("itemremove",a.getByInternalId(d.getAttribute("data-recordId")),b,d,e)}Ext.view.View.prototype.clearViewEl.call(this);f=Ext.fly(e.getNodeContainer());if(f&&!h){g=e.getTargetEl();if(g.dom!==f.dom){f.destroy()}}},getMaskTarget:function(){var a=this.ownerCt;if(a.ownerLockable){a=a.ownerLockable}return a.getMaskTarget()},statics:{getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},getRecord:function(c){var b=this,a;if(b.store.isDestroyed){return}if(c.isModel){return c}c=b.getNode(c);if(c){if(!b.hasActiveFeature()){a=c.getAttribute("data-recordIndex");if(a){a=parseInt(a,10);if(a>-1){return b.store.data.getAt(a)}}}return b.dataSource.getByInternalId(c.getAttribute("data-recordId"))}},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}return this.all.indexOf(a)},indexInStore:function(a){return a?this.dataSource.indexOf(this.getRecord(a)):-1},renderRows:function(f,e,d,b){var g=this.rowValues,a=f.length,c;g.view=this;g.columns=e;for(c=0;c<a;c++,d++){g.itemClasses.length=g.rowClasses.length=0;this.renderRow(f[c],d,b)}g.view=g.columns=g.record=null},renderColumnSizer:function(b,c){var e=b.columns||this.getGridColumns(),a=e.length,d,g,f;c.push('<colgroup role="presentation">');for(d=0;d<a;d++){g=e[d];f=g.cellWidth?g.cellWidth:Ext.grid.header.Container.prototype.defaultWidth;c.push('<col role="presentation" class="',"x-","grid-cell-",e[d].getItemId(),'" style="width:'+f+'px">')}c.push("</colgroup>")},renderRow:function(g,a,f){var j=this,e=a===-1,h=j.selModel,m=j.rowValues,d=m.itemClasses,c=m.rowClasses,b=j.itemCls,l,k=j.rowTpl;m.rowAttr={};m.record=g;m.recordId=g.internalId;m.recordIndex=j.store.indexOf(g);m.rowIndex=a;m.rowId=j.getRowId(g);m.itemCls=m.rowCls="";if(!m.columns){m.columns=j.ownerCt.getVisibleColumnManager().getColumns()}d.length=c.length=0;if(!e){d[0]=b;if(!j.ownerCt.disableSelection&&h.isRowSelected){if(h.isRowSelected(g)){d.push(j.selectedItemCls)}}if(j.stripeRows&&a%2!==0){d.push(j.altRowCls)}if(j.getRowClass){l=j.getRowClass(g,a,null,j.dataSource);if(l){c.push(l)}}}if(f){k.applyOut(m,f,j.tableValues)}else{return k.apply(m,j.tableValues)}},renderCell:function(d,g,f,n,j,e){var l=this,b,h=l.selModel,k=l.cellValues,c=k.classes,a=g.data[d.dataIndex],o=l.cellTpl,p,m;k.record=g;k.column=d;k.recordIndex=f;k.rowIndex=n;k.columnIndex=j;k.cellIndex=j;k.align=d.align;k.innerCls=d.innerCls;k.tdCls=k.tdStyle=k.tdAttr=k.style="";k.unselectableAttr=l.enableTextSelection?"":'unselectable="on"';c[1]=d.getCellId();m=2;if(d.renderer&&d.renderer.call){b=l.ownerCt.columnManager.getHeaderIndex(d);p=d.renderer.call(d.usingDefaultRenderer?d:d.scope||l.ownerCt,a,k,g,f,b,l.dataSource,l);if(k.css){g.cssWarning=true;k.tdCls+=" "+k.css;k.css=null}if(k.tdCls){c[m++]=k.tdCls}}else{p=a}k.value=(p==null||p==="")?d.emptyCellText:p;if(d.tdCls){c[m++]=d.tdCls}if(l.markDirty&&g.isModified(d.dataIndex)){c[m++]=l.dirtyCls}if(d.isFirstVisible){c[m++]=l.firstCls}if(d.isLastVisible){c[m++]=l.lastCls}if(!l.enableTextSelection){c[m++]=l.unselectableCls}if(h&&h.isCellModel&&h.isCellSelected(l,f,d)){c[m++]=(l.selectedCellCls)}c.length=m;k.tdCls=c.join(" ");o.applyOut(k,e);k.column=null},getRow:function(a){var b;if((!a&&a!==0)||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return Ext.fly(a).down(this.rowSelector,true)}if(Ext.isNumber(a)){b=this.all.item(a);return b&&b.down(this.rowSelector,true)}if(a.isModel){return this.getRowByRecord(a)}b=Ext.fly(a);if(b.is(this.itemSelector)){return this.getRowFromItem(b)}return b.findParent(this.rowSelector,this.getTargetEl())},getRowId:function(a){return this.id+"-record-"+a.internalId},constructRowId:function(a){return this.id+"-record-"+a},getNodeById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,false)},getRowById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,true)},getNodeByRecord:function(a){return this.retrieveNode(this.getRowId(a),false)},getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),true)},getRowFromItem:function(c){var d=Ext.getDom(c).tBodies[0].childNodes,a=d.length,b;for(b=0;b<a;b++){if(Ext.fly(d[b]).is(this.rowSelector)){return d[b]}}},retrieveNode:function(c,b){var a=this.el.getById(c,true);if(b&&a){return Ext.fly(a).down(this.rowSelector,true)}return a},updateIndexes:Ext.emptyFn,bodySelector:"div.x-grid-item-container",nodeContainerSelector:"div.x-grid-item-container",itemSelector:"table.x-grid-item",rowSelector:"tr.x-grid-row",cellSelector:"td.x-grid-cell",sizerSelector:".x-grid-cell",innerSelector:"div.x-grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(b){var a=this.sizerSelector+"-"+b.getItemId();return"td"+a+",col"+a},getItemSelector:function(){return this.itemSelector},getCellSelector:function(a){return a?a.getCellSelector():this.cellSelector},getCellInnerSelector:function(a){return this.getCellSelector(a)+" "+this.innerSelector},addRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).addCls(a)}},removeRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).removeCls(a)}},onRowSelect:function(b){var a=this;a.addItemCls(b,a.selectedItemCls);if(Ext.isIE8){a.repaintBorder(b+1)}},onRowDeselect:function(b){var a=this;a.removeItemCls(b,a.selectedItemCls);if(Ext.isIE8){a.repaintBorder(b+1)}},onCellSelect:function(b){var a=this.getCellByPosition(b);if(a){a.addCls(this.selectedCellCls)}},onCellDeselect:function(b){var a=this.getCellByPosition(b,true);if(a){Ext.fly(a).removeCls(this.selectedCellCls)}},getCellInclusive:function(a,b){if(a){var c=this.getRow(a.row),d=this.ownerCt.getColumnManager().getHeaderAtIndex(a.column);if(d&&c){return Ext.fly(c).down(this.getCellSelector(d),b)}}return false},getCellByPosition:function(a,c){if(a){var b=a.view||this,d=b.getRow(a.record||a.row),e=a.column.isColumn?a.column:b.getVisibleColumnManager().getHeaderAtIndex(a.column);if(e&&d){return Ext.fly(d).down(b.getCellSelector(e),c)}}return false},onRowFocus:function(d,b,a){var c=this;if(b){c.addItemCls(d,c.focusedItemCls);if(!a){c.focusRow(d)}}else{c.removeItemCls(d,c.focusedItemCls)}if(Ext.isIE8){c.repaintBorder(d+1)}},focusRow:function(d,a){var c=this,b=c.getFocusTask();if(a){b.delay(Ext.isNumber(a)?a:10,c.focusRow,c,[d,false]);return}b.cancel();if(c.isVisible(true)){c.getNavigationModel().setPosition(c.getRecord(d))}},focusNode:function(b,a){this.focusRow(b,a)},scrollRowIntoView:function(b,a){b=this.getRow(b);if(b){this.scrollElIntoView(b,false,a)}},focusCell:function(b,c){var e=this,a,d=e.getFocusTask();if(c){d.delay(Ext.isNumber(c)?c:10,e.focusCell,e,[b,false]);return}d.cancel();if(e.isVisible(true)&&(a=e.getCellByPosition(b))){e.getNavigationModel().setPosition(b)}},getLastFocused:function(){var b=this,a=b.lastFocused;if(a&&a.record&&a.column){if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1){return a}}},scrollCellIntoView:function(a,b){if(a.isCellContext){a=this.getCellByPosition(a)}if(a){this.scrollElIntoView(a,null,b)}},scrollElIntoView:function(b,d,a){var c=this,e=c.scrollManager;if(e){e.scrollIntoView(b,d,a)}else{Ext.fly(b).scrollIntoView(c.el,d,a)}},syncRowHeights:function(e,b){e.style.height=b.style.height="";var d=this,f=d.rowTpl,c=e.offsetHeight,a=b.offsetHeight;if(c!==a){while(f){if(f.syncRowHeights){if(f.syncRowHeights(e,b)===false){break}}f=f.nextTpl}c=e.offsetHeight;a=b.offsetHeight;if(c!==a){e=Ext.fly(e).down(d.rowSelector,true)||e;b=Ext.fly(b).down(d.rowSelector,true)||b;if(e&&b){e.style.height=b.style.height="";c=e.offsetHeight;a=b.offsetHeight;if(c>a){Ext.fly(e).setHeight(c);Ext.fly(b).setHeight(c)}else{if(a>c){Ext.fly(e).setHeight(a);Ext.fly(b).setHeight(a)}}}}}},handleUpdate:function(k,f,n,w){var E=this,q=E.rowTpl,C,p,m,g,o,y,B,h,t,l,F,c,e,s=[],A,x,u=E.variableRowHeight,j,r=0,b,d,v,D,a,z=E.ownerCt;if(E.viewReady){p=E.getNodeByRecord(f);if(p){t=E.overItemCls;l=E.focusedItemCls;F=E.selectedItemCls;c=E.ownerCt.getVisibleColumnManager().getColumns();for(x=0,A=c.length;x<A;x++){e=c[x];j=E.shouldUpdateCell(f,e,w);if(j){r=r|j;s[s.length]=e;u=u||e.variableRowHeight}}if(!E.getRowFromItem(p)||(r&1)||(p.tBodies[0].childNodes.length>1)){C=Ext.fly(p,"_internal");g=E.createRowElement(f,E.dataSource.indexOf(f),s);if(C.hasCls(t)){Ext.fly(g).addCls(t)}if(C.hasCls(l)){Ext.fly(g).addCls(l)}if(C.hasCls(F)){Ext.fly(g).addCls(F)}if(Ext.isIE9m&&p.mergeAttributes){p.mergeAttributes(g,true)}else{o=g.attributes;y=o.length;for(h=0;h<y;h++){B=o[h].name;if(B!=="id"){p.setAttribute(B,o[h].value)}}}if(c.length&&(m=E.getRow(p))){E.updateColumns(m,Ext.fly(g).down(E.rowSelector,true),s)}while(q){if(q.syncContent){if(q.syncContent(p,g,w?s:null)===false){break}}q=q.nextTpl}}else{if(!E.cellFly){E.cellFly=new Ext.dom.Fly()}for(x=0,A=s.length;x<A;x++){e=s[x];d=e.dataIndex;v=f.get(d);b=p.firstChild.firstChild.childNodes[e.getVisibleIndex()];if(E.markDirty){E.cellFly.attach(b);if(f.isModified(e.dataIndex)){E.cellFly.addCls(E.dirtyCls)}else{E.cellFly.removeCls(E.dirtyCls)}}D=e.usingDefaultRenderer;a=D?e:e.scope;if(e.updater){Ext.callback(e.updater,a,[b,v,f,E,E.dataSource],0,e,z)}else{if(e.renderer){v=Ext.callback(e.renderer,a,[v,null,f,0,0,E.dataSource,E],0,e,z)}if(e.producesHTML){b.childNodes[0].innerHTML=v}else{b.childNodes[0].childNodes[0].data=v}}if(E.highlightClass){Ext.fly(b).addCls(E.highlightClass);if(!E.changedCells){E.self.prototype.changedCells=[];E.prototype.clearChangedTask=new Ext.util.DelayedTask(E.clearChangedCells,E.prototype);E.clearChangedTask.delay(E.unhighlightDelay)}E.changedCells.push({cell:b,cls:E.highlightClass,expires:Ext.Date.now()+1000})}}}if(u){Ext.suspendLayouts()}E.fireEvent("itemupdate",f,E.store.indexOf(f),p);if(u){E.refreshSize();Ext.resumeLayouts(true)}}}},clearChangedCells:function(){var d=this,b=Ext.Date.now(),e;for(var c=0,a=d.changedCells.length;c<a;){e=d.changedCells[c];if(e.expires<=b){Ext.fly(e.cell).removeCls(e.highlightClass);Ext.Array.erase(d.changedCells,c,1);a--}else{break}}if(a){d.clearChangedTask.delay(d.unhighlightDelay)}},updateColumns:function(j,k,l){var h=this,b,a,g,c,n=l.length,m,d,o,f,e=h.getCellSelector();if(j.mergeAttributes){j.mergeAttributes(k,true)}else{b=k.attributes;a=b.length;for(c=0;c<a;c++){g=b[c].name;if(g!=="id"){j.setAttribute(g,b[c].value)}}}for(m=0;m<n;m++){d=l[m];e=h.getCellSelector(d);o=Ext.fly(j).selectNode(e);f=Ext.fly(k).selectNode(e);Ext.fly(o).syncContent(f)}},shouldUpdateCell:function(b,e,d){if(!e.preventUpdate){if(e.hasCustomRenderer){return 1}if(d){var a=d.length,c,f;for(c=0;c<a;++c){f=d[c];if(f===e.dataIndex||f===b.idProperty){return 2}}}else{return 2}}return 0},refresh:function(){var c=this,d,b=c.grid.containsFocus,a=c.getNavigationModel();Ext.view.View.prototype.refresh.apply(this,arguments);if(b){a.setPosition(a.getLastFocused(),null,null,null,true)}c.headerCt.setSortState();if(c.touchScroll&&c.el&&!c.all.getCount()&&c.headerCt&&c.headerCt.tooNarrow){d=c.scrollManager.scroller.getSize();d.x=c.headerCt.getTableWidth();c.scrollManager.scroller.setSize(d);c.scrollManager.refresh()}},processItemEvent:function(d,s,l,r){var w=this,n=w.self,v=n.EventMap,f=r.type,j,a,o,h=w.features,q=h.length,p,k,m,g,c,b=w.getNavigationModel(),u,t=r.position=w.eventPosition||(w.eventPosition=new Ext.grid.CellContext());if(Ext.isIE&&f==="mouseup"&&!r.within(w.el)){return false}if(w.indexInStore(s)!==-1){j=t.rowElement=Ext.fly(s).down(w.rowSelector,true);if(Ext.String.startsWith(r.type,"key")&&(u=b.getPosition())){a=(a=b.getCell())&&a.dom;c=u.column}if(!a){a=r.getTarget(w.getCellSelector(),j)}f=n.TouchEventMap[f]||f;if(a){if(!a.parentNode){return false}if(!c){c=w.getHeaderByCell(a)}k=w.ownerCt.getColumnManager().getHeaderIndex(c)}else{k=-1}t.setAll(w,l,c?w.getVisibleColumnManager().getHeaderIndex(c):-1,d,c);t.cellElement=a;m=w.fireEvent("uievent",f,w,a,l,k,r,d,j);if((m===false||Ext.view.View.prototype.processItemEvent.apply(this,arguments)===false)){o=w.getSelectionModel();if(o.onVetoUIEvent){o.onVetoUIEvent(f,w,a,l,k,r,d,j)}return false}for(p=0;p<q;++p){g=h[p];if(g.wrapsItem){if(g.vetoEvent(d,j,l,r)===false){w.processSpecialEvent(r);return false}}}if(a&&f!=="mouseover"&&f!=="mouseout"){m=!((w["onBeforeCell"+v[f]](a,k,d,j,l,r)===false)||(w.fireEvent("beforecell"+f,w,a,k,d,j,l,r)===false)||(w["onCell"+v[f]](a,k,d,j,l,r)===false)||(w.fireEvent("cell"+f,w,a,k,d,j,l,r)===false))}if(m!==false){m=w.fireEvent("row"+f,w,d,j,l,r)}return m}else{this.processSpecialEvent(r);return false}},processSpecialEvent:function(h){var l=this,c=l.features,k=c.length,m=h.type,d,n,f,g,b,j,a=l.ownerCt;Ext.view.View.prototype.processSpecialEvent.apply(this,arguments);if(m=="mouseover"||m=="mouseout"){return}m=l.self.TouchEventMap[m]||m;for(d=0;d<k;d++){n=c[d];if(n.hasFeatureEvent){g=h.getTarget(n.eventSelector,l.getTargetEl());if(g){f=n.eventPrefix;b=n.getFireEventArgs("before"+f+m,l,g,h);j=n.getFireEventArgs(f+m,l,g,h);if((l.fireEvent.apply(l,b)===false)||(a.fireEvent.apply(a,b)===false)||(l.fireEvent.apply(l,j)===false)||(a.fireEvent.apply(a,j)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(a){this.autoSizeColumn(a)},autoSizeColumn:function(a){if(Ext.isNumber(a)){a=this.getGridColumns[a]}if(a){if(a.isGroupHeader){a.autoSize();return}delete a.flex;a.setWidth(this.getMaxContentWidth(a))}},getMaxContentWidth:function(d){var f=this,k=f.el.query(d.getCellInnerSelector()),b=d.getWidth(),c=0,e=k.length,a=f.body.select(f.getColumnSizerSelector(d)),h=Math.max,g=0,j;if(e>0){if(Ext.supports.ScrollWidthInlinePaddingBug){g+=f.getCellPaddingAfter(k[0])}if(f.columnLines){g+=Ext.fly(k[0].parentNode).getBorderWidth("lr")}}a.setWidth(1);d.titleEl.setStyle("text-overflow","clip");j=d.textEl.dom.offsetWidth+d.titleEl.getPadding("lr");d.titleEl.setStyle("text-overflow","");for(;c<e;c++){j=h(j,k[c].scrollWidth)}j+=g;j=h(j,40);a.setWidth(b);return j},getPositionByEvent:function(f){var d=this,b=f.getTarget(d.cellSelector),c=f.getTarget(d.itemSelector),a=d.getRecord(c),g=d.getHeaderByCell(b);return d.getPosition(a,g)},getHeaderByCell:function(a){if(a){return this.ownerCt.getVisibleColumnManager().getHeaderById(a.getAttribute("data-columnId"))}return false},walkCells:function(m,n,j,o,b,q){if(!m){return false}var k=this,r=typeof m.row==="number"?m.row:m.rowIdx,f=typeof m.column==="number"?m.column:m.colIdx,l=k.dataSource.getCount(),d=k.ownerCt.getVisibleColumnManager(),a=d.getHeaderIndex(d.getFirst()),h=d.getHeaderIndex(d.getLast()),p=r,g=f,c=d.getHeaderAtIndex(f);if(!c||c.hidden||!l){return false}j=j||{};n=n.toLowerCase();switch(n){case"right":if(f===h){if(o||r===l-1){return false}if(!j.ctrlKey){p=k.walkRows(r,1);if(p!==r){g=a}}}else{if(!j.ctrlKey){g=d.getHeaderIndex(d.getNextSibling(c))}else{g=h}}break;case"left":if(f===a){if(o||r===0){return false}if(!j.ctrlKey){p=k.walkRows(r,-1);if(p!==r){g=h}}}else{if(!j.ctrlKey){g=d.getHeaderIndex(d.getPreviousSibling(c))}else{g=a}}break;case"up":if(r===0){return false}else{if(!j.ctrlKey){p=k.walkRows(r,-1)}else{p=k.walkRows(-1,1)}}break;case"down":if(r===l-1){return false}else{if(!j.ctrlKey){p=k.walkRows(r,1)}else{p=k.walkRows(l,-1)}}break}if(b&&b.call(q||k,{row:p,column:g})!==true){return false}g=d.getHeaderAtIndex(g);return new Ext.grid.CellContext(k).setPosition(p,g)},walkRows:function(h,a){var d=this,g=d.dataSource,e=0,k=h,b,c=(a<0)?0:(g.isBufferedStore?g.getTotalCount():g.getCount())-1,f=c?1:-1,j=h;do{if(c?j>=c:j<=c){return k||c}j+=f;if((b=Ext.fly(d.getRow(j)))&&b.isVisible(true)){e+=f;k=j}}while(e!==a);return j},walkRecs:function(b,a){var g=this,k=g.dataSource,h=0,l=b,c,e=(a<0)?0:(k.isBufferedStore?k.getTotalCount():k.getCount())-1,j=e?1:-1,f=k.indexOf(b),d;do{if(e?f>=e:f<=e){return l}f+=j;d=k.getAt(f);if(!d.isCollapsedPlaceholder&&(c=Ext.fly(g.getNodeByRecord(d)))&&c.isVisible(true)){h+=j;l=d}}while(h!==a);return l},getFirstVisibleRowIndex:function(){var c=this,b=(c.dataSource.isBufferedStore?c.dataSource.getTotalCount():c.dataSource.getCount()),a=c.indexOf(c.all.first())-1;do{a+=1;if(a===b){return}}while(!Ext.fly(c.getRow(a)).isVisible(true));return a},getLastVisibleRowIndex:function(){var b=this,a=b.indexOf(b.all.last());do{a-=1;if(a===-1){return}}while(!Ext.fly(b.getRow(a)).isVisible(true));return a},getHeaderCt:function(){return this.headerCt},getPosition:function(a,b){return new Ext.grid.CellContext(this).setPosition(a,b)},beforeDestroy:function(){var a=this;if(a.rendered){a.el.clearListeners()}Ext.view.View.prototype.beforeDestroy.apply(this,arguments)},onDestroy:function(){var d=this,c=d.featuresMC,a,b;if(c){for(b=0,a=c.getCount();b<a;++b){c.getAt(b).destroy()}}d.featuresMC=null;Ext.view.View.prototype.onDestroy.apply(this,arguments)},onReplace:function(b,e,a,d){var c=this,f=c.bufferedRenderer;if(c.rendered&&f){f.onReplace(b,e,a,d)}else{Ext.view.View.prototype.onReplace.apply(this,arguments);c.doStripeRows(e)}},onAdd:function(b,a,c){var d=this,e=d.bufferedRenderer;if(d.rendered&&e){e.onReplace(b,c,[],a)}else{Ext.view.View.prototype.onAdd.apply(this,arguments);d.setPendingStripe(c)}},onRemove:function(b,a,c){var d=this,e=d.bufferedRenderer;if(d.rendered&&e){e.onReplace(b,c,a,[])}else{Ext.view.View.prototype.onRemove.apply(this,arguments);d.setPendingStripe(c)}},onDataRefresh:function(){var b=this,a=b.ownerCt;if(a&&a.isCollapsingOrExpanding===2){a.on("expand",b.onDataRefresh,b,{single:true});return}if(b.bufferedRenderer){b.all.clear();b.bufferedRenderer.onStoreClear()}Ext.view.View.prototype.onDataRefresh.call(this)},getViewRange:function(){var a=this;if(a.bufferedRenderer){return a.bufferedRenderer.getViewRange()}return Ext.view.View.prototype.getViewRange.call(this)},setPendingStripe:function(a){var b=this.stripeOnUpdate;if(b===null){b=a}else{b=Math.min(b,a)}this.stripeOnUpdate=b},onEndUpdate:function(){var a=this,b=a.stripeOnUpdate;if(b||b===0){a.doStripeRows(b);a.stripeOnUpdate=null}Ext.view.View.prototype.onEndUpdate.apply(this,arguments)},doStripeRows:function(b,a){var d=this,e,g,c,f;if(d.rendered&&d.stripeRows){e=d.getNodes(b,a);for(c=0,g=e.length;c<g;c++){f=e[c];f.className=f.className.replace(d.rowClsRe," ");b++;if(b%2===0){f.className+=(" "+d.altRowCls)}}}},hasActiveFeature:function(){return(this.isGrouping&&this.store.isGrouped())||this.isRowWrapped},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding("r")},privates:{refreshScroll:function(){var a=this,b=a.bufferedRenderer;if(b){b.stretchView(a,b.getScrollHeight(true))}else{Ext.view.View.prototype.refreshScroll.call(this)}}}},1,["tableview"],["component","box","dataview","tableview"],{component:true,box:true,dataview:true,tableview:true},["widget.tableview"],0,[Ext.view,"Table"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name==a&&c.getFormId()==b})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl"],fieldSubTpl:['<div class="{wrapInnerCls} {noBoxLabelCls}" role="presentation">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" data-ref="inputEl" role="{role}" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}" autocomplete="off" hidefocus="true" />','<tpl if="boxLabel && !labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:false,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-wrap-inner-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:false,ariaRole:"checkbox",onRe:/^on$/i,inputCls:"x-form-cb",initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}Ext.form.field.Base.prototype.initComponent.apply(this,arguments);a.getManager().add(a)},initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}return Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(a){var c=this,b=c.boxLabel,e=c.boxLabelAlign,d=b&&e==="before";return Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{disabled:c.readOnly||c.disabled,wrapInnerCls:c.wrapInnerCls,boxLabel:b,boxLabelCls:c.boxLabelCls,boxLabelAlign:e,labelAlignedBefore:d,afterLabelCls:d?c.afterLabelCls:"",noBoxLabelCls:!b?c.noBoxLabelCls:"",role:c.ariaRole})},initEvents:function(){var a=this;Ext.form.field.Base.prototype.initEvents.call(this);a.mon(a.inputEl,"click",a.onBoxClick,a,{translate:false})},setBoxLabel:function(a){var b=this;b.boxLabel=a;if(b.rendered){b.boxLabelEl.setHtml(a)}},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(!this.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(b,a){return(b===true||b==="true"||b==="1"||b===1||(((Ext.isString(b)||Ext.isNumber(b))&&a)?b==a:this.onRe.test(b)))},setRawValue:function(c){var b=this,d=b.inputEl,a=b.isChecked(c,b.inputValue);if(d){b[a?"addCls":"removeCls"](b.checkedCls)}b.checked=b.rawValue=a;if(!b.duringSetValue){b.lastValue=a}return a},setValue:function(f){var e=this,c,b,a,d;if(Ext.isArray(f)){c=e.getManager().getByName(e.name,e.getFormId()).items;a=c.length;for(b=0;b<a;++b){d=c[b];d.setValue(Ext.Array.contains(f,d.inputValue))}}else{e.duringSetValue=true;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete e.duringSetValue}return e},valueToRaw:Ext.identityFn,onChange:function(b,a){var d=this,c=d.handler;Ext.callback(d.handler,d.scope,[d,b],0,d);Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(d.reference&&d.publishState){d.publishState("checked",b)}},resetOriginalValue:function(b){var f=this,d,e,a,c;if(!b){d=f.getManager().getByName(f.name,f.getFormId()).items;a=d.length;for(c=0;c<a;++c){e=d[c];if(e!==f){d[c].resetOriginalValue(true)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this);this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;Ext.form.field.Base.prototype.onEnable.call(this);if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.disabled=!!c||a.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var b=this,a;if(!b.formId){a=b.up("form");if(a){b.formId=a.id}}return b.formId}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));(Ext.cmd.derive("Ext.tree.View",Ext.view.Table,{isTreeView:true,loadingCls:"x-grid-tree-loading",expandedCls:"x-grid-tree-node-expanded",leafCls:"x-grid-tree-node-leaf",expanderSelector:".x-tree-expander",checkboxSelector:".x-tree-checkbox",expanderIconOverCls:"x-tree-expander-over",nodeAnimWrapCls:"x-tree-animator-wrap",ariaRole:"tree",loadMask:false,rootVisible:true,expandDuration:250,collapseDuration:250,toggleOnDblClick:true,stripeRows:false,uiFields:["expanded","loaded","checked","expandable","leaf","icon","iconCls","loading","qtip","qtitle"],treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(c){var b=c.record,a=c.view;c.rowAttr["data-qtip"]=b.get("qtip")||"";c.rowAttr["data-qtitle"]=b.get("qtitle")||"";if(b.isExpanded()){c.rowClasses.push(a.expandedCls)}if(b.isLeaf()){c.rowClasses.push(a.leafCls)}if(b.isLoading()){c.rowClasses.push(a.loadingCls)}}}],initComponent:function(){var a=this;if(a.bufferedRenderer){a.animate=false}else{if(a.initialConfig.animate===undefined){a.animate=Ext.enableFx}}a.store=a.panel.getStore();a.onRootChange(a.store.getRoot());a.animQueue={};a.animWraps={};Ext.view.Table.prototype.initComponent.apply(this,arguments);a.store.setRootVisible(a.rootVisible);a.addRowTpl(Ext.XTemplate.getTpl(a,"treeRowTpl"))},onFillComplete:function(e,d,b){var c=this,a=c.store,f=a.indexOf(b[0]);d.triggerUIUpdate();if(!b.length||f===-1){return}c.onAdd(c.store,b,f);c.refreshPartner()},onBeforeSort:function(){this.store.suspendEvents()},onSort:function(a){if(a.isStore){this.store.resumeEvents();this.refresh();this.refreshPartner()}},refreshPartner:function(){var a=this.lockingPartner;if(a){a.refresh()}},getMaskStore:function(){return this.panel.getStore()},afterRender:function(){var a=this;Ext.view.Table.prototype.afterRender.apply(this,arguments);a.el.on({scope:a,delegate:a.expanderSelector,mouseover:a.onExpanderMouseOver,mouseout:a.onExpanderMouseOut,click:{delegate:a.checkboxSelector,fn:a.onCheckboxChange,scope:a}})},afterComponentLayout:function(){var b=this,a=b.stretcher,c=b.scrollManager;Ext.view.Table.prototype.afterComponentLayout.apply(this,arguments);if(a){a.setWidth((this.getWidth()-Ext.getScrollbarSize().width))}if(c){c.refresh()}},processUIEvent:function(a){if(a.getTarget("."+this.nodeAnimWrapCls,this.el)){return false}return Ext.view.Table.prototype.processUIEvent.apply(this,arguments)},setRootNode:function(b,a){if(!a){this.store.setNode(b)}this.node=b},onCheckboxChange:function(d,a){var c=this,b=d.getTarget(c.getItemSelector(),c.getTargetEl());if(b){c.onCheckChange(c.getRecord(b))}},onCheckChange:function(a){var b=a.get("checked");if(Ext.isBoolean(b)){b=!b;a.set("checked",b);this.fireEvent("checkchange",a,b)}},getChecked:function(){var a=[];this.node.cascadeBy(function(b){if(b.get("checked")){a.push(b)}});return a},isItemChecked:function(a){return a.get("checked")},createAnimWrap:function(a,b){var e=this,d=e.getNode(a),c;c=Ext.fly(d).insertSibling({role:"presentation",tag:"div",cls:e.nodeAnimWrapCls},"after");return{record:a,node:d,el:c,expanding:false,collapsing:false,animateEl:c,targetEl:c}},getAnimWrap:function(d,a){if(!this.animate){return null}var b=this.animWraps,c=b[d.internalId];if(a!==false){while(!c&&d){d=d.parentNode;if(d){c=b[d.internalId]}}}return c},doAdd:function(c,g){var h=this,a=h.bufferRender(c,g,true),e=c[0],j=e.parentNode,k=h.all,m,d=h.getAnimWrap(j),l,b,f;if(!d||!d.expanding){return Ext.view.Table.prototype.doAdd.apply(this,arguments)}j=d.record;l=d.targetEl;b=l.dom.childNodes;f=b.length;m=g-h.indexInStore(j)-1;if(!f||m>=f){l.appendChild(a,true)}else{Ext.fly(b[m]).insertSibling(a,"before",true)}k.insert(g,a);return a},onRemove:function(f,a,b){var d=this,e,c;if(d.viewReady){e=d.store.getCount()===0;if(d.bufferedRenderer){return Ext.view.Table.prototype.onRemove.apply(this,arguments)}if(e){d.refresh()}else{for(c=a.length-1,b+=c;c>=0;--c,--b){d.doRemove(a[c],b)}}if(d.hasListeners.itemremove){for(c=a.length-1,b+=c;c>=0;--c,--b){d.fireEvent("itemremove",a[c],b,d)}}}},doRemove:function(a,c){var g=this,d=g.all,b=g.getAnimWrap(a),f=d.item(c),e=f?f.dom:null;if(!e||!b||!b.collapsing){return Ext.view.Table.prototype.doRemove.apply(this,arguments)}b.targetEl.dom.insertBefore(e,b.targetEl.dom.firstChild);d.removeElement(c)},onBeforeExpand:function(d,b,c){var e=this,a;if(e.rendered&&e.all.getCount()&&e.animate){if(e.getNode(d)){a=e.getAnimWrap(d,false);if(!a){a=e.animWraps[d.internalId]=e.createAnimWrap(d);a.animateEl.setHeight(0)}else{if(a.collapsing){a.targetEl.select(e.itemSelector).destroy()}}a.expanding=true;a.collapsing=false}}},onExpand:function(h){var g=this,e=g.animQueue,a=h.getId(),c=g.getNode(h),f=c?g.indexOf(c):-1,d,b,j;if(g.singleExpand){g.ensureSingleExpand(h)}if(f===-1){return}d=g.getAnimWrap(h,false);if(!d){h.isExpandingOrCollapsing=false;g.fireEvent("afteritemexpand",h,f,c);g.refreshSize();return}b=d.animateEl;j=d.targetEl;b.stopAnimation();e[a]=true;b.dom.style.height="0px";b.animate({from:{height:0},to:{height:j.dom.scrollHeight},duration:g.expandDuration,listeners:{afteranimate:function(){var k=j.dom.childNodes;if(k.length){d.el.insertSibling(k,"before",true)}d.el.destroy();delete g.animWraps[d.record.internalId];delete e[a];if(!g.isDestroyed){g.refreshSize()}}},callback:function(){h.isExpandingOrCollapsing=false;g.fireEvent("afteritemexpand",h,f,c)}});d.isAnimating=true},onBeforeCollapse:function(e,b,c,g,d){var f=this,a;if(f.rendered&&f.all.getCount()){if(f.animate){if(e.isVisible()){a=f.getAnimWrap(e);if(!a){a=f.animWraps[e.internalId]=f.createAnimWrap(e,c)}else{if(a.expanding){a.targetEl.select(this.itemSelector).destroy()}}a.expanding=false;a.collapsing=true;a.callback=g;a.scope=d}}else{f.onCollapseCallback=g;f.onCollapseScope=d}}},onCollapse:function(d){var f=this,a=f.animQueue,h=d.getId(),e=f.getNode(d),c=e?f.indexOf(e):-1,b=f.getAnimWrap(d),g;if(!f.all.getCount()||!d.isVisible()){return}if(!b){d.isExpandingOrCollapsing=false;f.fireEvent("afteritemcollapse",d,c,e);f.refreshSize();Ext.callback(f.onCollapseCallback,f.onCollapseScope);f.onCollapseCallback=f.onCollapseScope=null;return}g=b.animateEl;a[h]=true;g.stopAnimation();g.animate({to:{height:0},duration:f.collapseDuration,listeners:{afteranimate:function(){b.el.destroy();delete f.animWraps[b.record.internalId];delete a[h];if(!f.isDestroyed){f.refreshSize()}}},callback:function(){d.isExpandingOrCollapsing=false;f.fireEvent("afteritemcollapse",d,c,e);Ext.callback(b.callback,b.scope);b.callback=b.scope=null}});b.isAnimating=true},isAnimating:function(a){return !!this.animQueue[a.getId()]},expand:function(d,c,g,e){var f=this,b=!!f.animate,a;if(!b||!d.isExpandingOrCollapsing){if(!d.isLeaf()){d.isExpandingOrCollapsing=b}Ext.suspendLayouts();a=d.expand(c,g,e);Ext.resumeLayouts(true);return a}},collapse:function(c,b,f,d){var e=this,a=!!e.animate;if(!a||!c.isExpandingOrCollapsing){if(!c.isLeaf()){c.isExpandingOrCollapsing=a}return c.collapse(b,f,d)}},toggle:function(b,a,d,c){if(b.isExpanded()){this.collapse(b,a,d,c)}else{this.expand(b,a,d,c)}},onItemDblClick:function(a,e,c){var d=this,b=d.editingPlugin;Ext.view.Table.prototype.onItemDblClick.apply(this,arguments);if(d.toggleOnDblClick&&a.isExpandable()&&!(b&&b.clicksToEdit===2)){d.focusRow(a);d.toggle(a)}},onBeforeItemMouseDown:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)){return false}return Ext.view.Table.prototype.onBeforeItemMouseDown.apply(this,arguments)},onItemClick:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)&&a.isExpandable()){this.focusRow(a);this.toggle(a,d.ctrlKey);return false}return Ext.view.Table.prototype.onItemClick.apply(this,arguments)},onExpanderMouseOver:function(b,a){b.getTarget(this.cellSelector,10,true).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(b,a){b.getTarget(this.cellSelector,10,true).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){var b=this,a=Ext.apply(Ext.view.Table.prototype.getStoreListeners.call(this),{rootchange:b.onRootChange,fillcomplete:b.onFillComplete});if(!this.getStore().remoteSort){Ext.apply(a,{beforesort:b.onBeforeSort,sort:b.onSort})}return a},onBindStore:function(a,c,d,e){var b=e&&e.getRootNode(),f=a&&a.getRootNode();Ext.view.Table.prototype.onBindStore.apply(this,arguments);if(f!==b){this.onRootChange(f,b)}},onRootChange:function(c,a){var b=this;if(a){b.rootListeners.destroy();b.rootListeners=null}if(c){b.rootListeners=c.on({beforeexpand:b.onBeforeExpand,expand:b.onExpand,beforecollapse:b.onBeforeCollapse,collapse:b.onCollapse,destroyable:true,scope:b})}},ensureSingleExpand:function(b){var a=b.parentNode;if(a){a.eachChild(function(c){if(c!==b&&c.isExpanded()){c.collapse()}})}},shouldUpdateCell:function(b,e,d){if(d){var c=0,a=d.length;for(;c<a;++c){if(Ext.Array.contains(this.uiFields,d[c])){return true}}}return Ext.view.Table.prototype.shouldUpdateCell.apply(this,arguments)}},0,["treeview"],["component","box","dataview","tableview","treeview"],{component:true,box:true,dataview:true,tableview:true,treeview:true},["widget.treeview"],0,[Ext.tree,"View"],0));(Ext.cmd.derive("Ext.selection.RowModel",Ext.selection.DataViewModel,{enableKeyNav:true,isRowModel:true,onUpdate:function(b){var d=this,a=d.view,c;if(a&&d.isSelected(b)){c=a.indexOf(b);a.onRowSelect(c);if(b===d.lastFocused){a.onRowFocus(c,true)}}},getRowsVisible:function(){var e=false,a=this.view,d=a.all.first(),b,c;if(d){b=d.getHeight();c=a.el.getHeight();e=Math.floor(c/b)}return e},onSelectChange:function(f,c,k,a){var h=this,l=h.views||[h.view],d=l.length,b,g=c?"select":"deselect",e,j;if((k||h.fireEvent("before"+g,h,f,b))!==false&&a()!==false){for(e=0;e<d;e++){j=l[e];b=j.indexOf(f);if(b!==-1){if(c){j.onRowSelect(b,k)}else{j.onRowDeselect(b,k)}}}if(!k){h.fireEvent(g,h,f,b)}}},onLastFocusChanged:function(g,c,b){var a=this.views||[this.view],f=a.length,e,d=0;if(g&&f){e=a[0].indexOf(g);if(e!==-1){for(;d<f;d++){a[d].onRowFocus(e,false,true)}}}if(c&&f){e=a[0].indexOf(c);if(e!==-1){for(d=0;d<f;d++){a[d].onRowFocus(e,true,b)}}}},onEditorTab:function(d,j){var f=this,c=d.context.view,b=d.getActiveRecord(),a=d.context,h=j.shiftKey?"left":"right",g;do{g=a;a=c.walkCells(a,h,j,f.preventWrap);if(g&&g.isEqual(a)){return}}while(a&&(!a.column.getEditor(b)||!d.startEditByPosition(a)))},getCurrentPosition:function(){var a=this.selected.getAt(0);if(a){return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(a),0)}},selectByPosition:function(a,c){var b=new Ext.grid.CellContext(this.view);b.setPosition(a.row,a.column);this.select(b.record,c)},selectNext:function(g,c){var f=this,b=f.store,e=f.getSelection(),a=e[e.length-1],d=f.view.indexOf(a)+1,h;if(d===b.getCount()||d===0){h=false}else{f.doSelect(d,g,c);h=true}return h},selectPrevious:function(f,b){var e=this,d=e.getSelection(),a=d[0],c=e.view.indexOf(a)-1,g;if(c<0){g=false}else{e.doSelect(c,f,b);g=true}return g},isRowSelected:function(a){return this.isSelected(a)},isCellSelected:function(b,a,c){return this.isSelected(a)}},0,0,0,0,["selection.rowmodel"],0,[Ext.selection,"RowModel"],0));(Ext.cmd.derive("Ext.selection.TreeModel",Ext.selection.RowModel,{constructor:function(a){var b=this;Ext.selection.RowModel.prototype.constructor.call(this,a);if(b.pruneRemoved){b.pruneRemoved=false;b.pruneRemovedNodes=true}},bindStore:function(a,b){var c=this;Ext.selection.RowModel.prototype.bindStore.call(this,a,b);if(c.store&&c.pruneRemovedNodes){c.view.mon(c.store,{noderemove:c.onNodeRemove,scope:c})}},onNodeRemove:function(b,c,a){if(!a){this.deselectDeletedRecords([c])}}},1,0,0,0,["selection.treemodel"],0,[Ext.selection,"TreeModel"],0));(Ext.cmd.derive("Ext.grid.ColumnLayout",Ext.layout.container.HBox,{type:"gridcolumn",reserveOffset:false,firstHeaderCls:"x-column-header-first",lastHeaderCls:"x-column-header-last",initLayout:function(){var a=this;if(a.scrollbarWidth===undefined){a.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width}a.grid=a.owner.up("tablepanel");a.controllingGrid=a.owner.up("[scrollerOwner]");Ext.layout.container.HBox.prototype.initLayout.call(this)},beginLayout:function(c){var h=this,b=h.owner,a=h.controllingGrid,k=h.grid.view,g=h.getVisibleItems(),f=g.length,d=h.firstHeaderCls,m=h.lastHeaderCls,j=[d,m],e,l;if(!k.scrollFlags.y){h.scrollbarWidth=0}else{delete h.scrollbarWidth}for(e=0;e<f;e++){l=g[e];l.margin=null;l.removeCls(j);if(e===0){l.addCls(d)}if(e===f-1){l.addCls(m)}}h.scrollbarAdjustment=h.scrollbarWidth;Ext.layout.container.HBox.prototype.beginLayout.apply(this,arguments);if(!b.isColumn&&!a.collapsed&&k&&k.rendered&&(c.viewTable=k.body.dom)&&h.scrollbarWidth){c.viewContext=c.context.getCmp(k)}},injectViewContext:function(b,a){if(!this.controllingGrid.collapsed&&a.rendered&&(b.viewTable=a.body.dom)&&this.scrollbarWidth){b.viewContext=b.context.getCmp(a)}},roundFlex:function(a){return Math.floor(a)},calculate:function(h){var g=this,b=g.grid.view,d,a,c,f,e=false;g.viewScrollX=b.getScrollX();Ext.layout.container.HBox.prototype.calculate.apply(this,arguments);if(h.state.parallelDone&&g.owner.isRootHeader){d=h.target.getVisibleGridColumns();a=d.length;for(c=0;c<a;c++){f=h.context.getItem(null,d[c].el);if(!f.lastBox||f.props.width!==f.lastBox.width){(e||(e=[])).push(c)}}h.setProp("columnsChanged",e)}if(h.viewContext&&!h.state.tableHeight){h.state.tableHeight=h.viewTable?h.viewTable.offsetHeight:b.all.sumHeights()}},completeLayout:function(d){var b=this,a=b.owner,c=d.state;Ext.layout.container.HBox.prototype.completeLayout.apply(this,arguments);if(d.viewTable&&!c.flexesCalculated&&!d.flexedItems.length&&a.forceFit&&b.convertWidthsToFlexes(d)){b.cacheFlexes(d);d.invalidate({state:{flexesCalculated:true,tableHeight:d.viewTable.offsetHeight}})}else{delete d.props.columnChanged}},finishedLayout:function(b){var a=this.grid.getView();Ext.layout.container.HBox.prototype.finishedLayout.apply(this,arguments);if(this.viewScrollX&&!this.owner.isColumn&&a.scrollFlags.x&&this.owner.tooNarrow&&this.owner.componentLayoutCounter){this.owner.setScrollX(this.viewScrollX)}},convertWidthsToFlexes:function(a){var f=this,d=0,g=f.sizeModels.calculated,c,e,b,j,h;c=a.childItems;e=c.length;for(b=0;b<e;b++){j=c[b];h=j.target;d+=j.props.width;if(!(h.fixed||h.resizable===false)){h.flex=a.childItems[b].flex=j.props.width;h.width=null;j.widthModel=g}}return d!==a.props.width},getContainerSize:function(f){var e=this,a,d=f.viewContext,c,g,b=d&&d.heightModel.shrinkWrap;if(e.owner.isColumn){a=e.getColumnContainerSize(f)}else{a=Ext.layout.container.HBox.prototype.getContainerSize.apply(this,arguments);if(!a.gotAll){e.done=false;return a}if(e.scrollbarWidth&&!e.controllingGrid.reserveScrollbar&&d){g=d.target.componentLayout.ownerContext;if(!b&&d.target.scrollFlags.y&&(f.flexedItems&&f.flexedItems.length||e.owner.forceFit)&&g){c=d.getProp("height");if(isNaN(c)){e.done=false}else{if(f.state.tableHeight<=c&&d.target.scrollFlags.y){f.state.parallelDone=false;g.invalidate();return a}}}}}if(!b){a.width-=e.scrollbarWidth}return a},getColumnContainerSize:function(f){var h=f.paddingContext.getPaddingInfo(),b=0,e=0,g,d,c,a;if(!f.widthModel.shrinkWrap){++e;c=f.getProp("innerWidth");g=(typeof c=="number");if(g){++b;c-=h.width;if(c<0){c=0}}}if(!f.heightModel.shrinkWrap){++e;a=f.getProp("innerHeight");d=(typeof a=="number");if(d){++b;a-=h.height;if(a<0){a=0}}}return{width:c,height:a,needed:e,got:b,gotAll:b==e,gotWidth:g,gotHeight:d}},publishInnerCtSize:function(e){var d=this,a=d.owner,c=e.state.boxPlan.targetSize,b=e.peek("contentWidth");if((b!=null)&&!a.isColumn){c.width=b;if(a.ownerCt.view.scrollFlags.y){c.width+=d.scrollbarAdjustment}}return Ext.layout.container.HBox.prototype.publishInnerCtSize.apply(this,arguments)}},0,0,0,0,["layout.gridcolumn"],0,[Ext.grid,"ColumnLayout"],0));(Ext.cmd.derive("Ext.plugin.Abstract",Ext.Base,{alternateClassName:"Ext.AbstractPlugin",disabled:false,isPlugin:true,stateEvents:undefined,constructor:function(a){if(a){this.pluginConfig=a;Ext.apply(this,a)}},clonePlugin:function(a){return new this.self(Ext.apply({},a,this.pluginConfig))},setCmp:function(a){this.cmp=a},getCmp:function(){return this.cmp},init:Ext.emptyFn,getState:null,applyState:null,destroy:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true},onClassExtended:function(b,d,a){var c=d.alias;if(c&&!d.ptype){if(Ext.isArray(c)){c=c[0]}b.prototype.ptype=c.split("plugin.")[1]}}},1,0,0,0,0,0,[Ext.plugin,"Abstract",Ext,"AbstractPlugin"],0));(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(a){var b=this;Ext.apply(b,a);b.dragRegion=new Ext.util.Region(0,0,0,0);if(b.el){b.initEl(b.el)}b.mixins.observable.constructor.call(b);if(b.disabled){b.disable()}},initEl:function(b){var c=this,a=c.delegate;c.el=b=Ext.get(b);if(a&&a.isElement){c.handle=a}c.delegate=c.handle?undefined:c.delegate;if(!c.handle){c.handle=b}c.handleListeners={scope:c,delegate:c.delegate,mousedown:c.onMouseDown,dragstart:c.onDragStart};if(!Ext.supports.TouchEvents&&(c.trackOver||c.overCls)){Ext.apply(c.handleListeners,{mouseover:c.onMouseOver,mouseout:c.onMouseOut})}c.mon(c.handle,c.handleListeners)},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var a=this;a.endDrag({});a.clearListeners();a.el=a.handle=null},onMouseOver:function(j,h){var f=this,g,d,c,a,b;if(!f.disabled){if(j.within(j.target,true,true)||f.delegate){g=f.handleCls;f.mouseIsOut=false;if(g){for(c=0,a=f.handleEls.length;c<a;c++){d=f.handleEls[c];b=d.delegateCls;if(!b){b=d.delegateCls=[g,"-",d.region,"-over"].join("")}d.addCls([b,f.overCls])}}f.fireEvent("mouseover",f,j,f.delegate?j.getTarget(f.delegate,h):f.handle)}}},onMouseOut:function(f){var d=this,c,b,a;if(d.mouseIsDown){d.mouseIsOut=true}else{if(d.handleCls){for(b=0,a=d.handleEls.length;b<a;b++){c=d.handleEls[b];c.removeCls([c.delegateCls,d.overCls])}}d.fireEvent("mouseout",d,f)}},onMouseDown:function(c,b){var a=this;if(a.disabled||c.dragTracked){return}a.dragTarget=a.delegate?b:a.handle.dom;a.startXY=a.lastXY=c.getXY();a.startRegion=Ext.fly(a.dragTarget).getRegion();if(a.fireEvent("mousedown",a,c)===false||a.fireEvent("beforedragstart",a,c)===false||a.onBeforeStart(c)===false){return}a.mouseIsDown=true;c.dragTracked=true;a.el.setCapture();c.stopPropagation();if(a.preventDefault!==false){c.preventDefault()}Ext.getDoc().on({scope:a,capture:true,mouseup:a.onMouseUp,mousemove:a.onMouseMove,selectstart:a.stopSelect});a.dragEnded=false;if(!a.tolerance){a.triggerStart()}else{if(a.autoStart){a.timer=Ext.defer(a.triggerStart,a.autoStart===true?1000:a.autoStart,a,[c])}}},onMouseMove:function(f,d){var b=this,c=f.getXY(),a=b.startXY;f.stopPropagation();if(b.preventDefault!==false){f.preventDefault()}if(b.dragEnded){return}b.lastXY=c;if(!b.active){if(Math.max(Math.abs(a[0]-c[0]),Math.abs(a[1]-c[1]))>b.tolerance){b.triggerStart(f)}else{return}}if(b.fireEvent("mousemove",b,f)===false){b.onMouseUp(f)}else{b.onDrag(f);b.fireEvent("drag",b,f)}},onMouseUp:function(b){var a=this;a.mouseIsDown=false;if(a.mouseIsOut){a.mouseIsOut=false;a.onMouseOut(b)}if(a.preventDefault!==false){b.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}a.fireEvent("mouseup",a,b);a.endDrag(b)},endDrag:function(c){var b=this,a=b.active;Ext.getDoc().un({mousemove:b.onMouseMove,mouseup:b.onMouseUp,selectstart:b.stopSelect,capture:true,scope:b});b.clearStart();b.active=false;if(a){b.dragEnded=true;b.onEnd(c);b.fireEvent("dragend",b,c)}b._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart();a.active=true;a.onStart(b);a.fireEvent("dragstart",a,b)},clearStart:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region){return a.constrainTo}if(!a._constrainRegion){a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion()}}else{if(!a._constrainRegion){a._constrainRegion=a.getDragCt().getViewRegion()}}return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[b[0]-a[0],b[1]-a[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(b,d){var c=b.dragRegion,a=b.getConstrainRegion();if(!a){return d}c.x=c.left=c[0]=c.right=d[0];c.y=c.top=c[1]=c.bottom=d[1];c.constrainTo(a);return[c.left,c.top]},dragTarget:function(c,f){var b=c.startXY,e=c.startRegion.copy(),a=c.getConstrainRegion(),d;if(!a){return f}e.translateBy(f[0]-b[0],f[1]-b[1]);if(e.right>a.right){f[0]+=d=(a.right-e.right);e.left+=d}if(e.left<a.left){f[0]+=(a.left-e.left)}if(e.bottom>a.bottom){f[1]+=d=(a.bottom-e.bottom);e.top+=d}if(e.top<a.top){f[1]+=(a.top-e.top)}return f}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderResizer",Ext.plugin.Abstract,{disabled:false,config:{dynamic:false},colHeaderCls:"x-column-header",minColWidth:40,maxColWidth:1000,eResizeCursor:"col-resize",init:function(b){var a=this;a.headerCt=b;b.on("render",a.afterHeaderRender,a,{single:a});if(!a.minColWidth){a.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth}},destroy:function(){var a=this.tracker;if(a){delete a.onBeforeStart;delete a.onStart;delete a.onDrag;delete a.onEnd;a.destroy();this.tracker=null}},afterHeaderRender:function(){var b=this,c=b.headerCt,a=c.el;c.mon(a,"mousemove",b.onHeaderCtMouseMove,b);b.markerOwner=b.ownerGrid=b.headerCt.up("tablepanel");if(b.markerOwner.ownerLockable){b.markerOwner=b.markerOwner.ownerLockable}b.tracker=new Ext.dd.DragTracker({disabled:b.disabled,onBeforeStart:b.onBeforeStart.bind(b),onStart:b.onStart.bind(b),onDrag:b.onDrag.bind(b),onEnd:b.onEnd.bind(b),tolerance:3,autoStart:300,el:a})},onHeaderCtMouseMove:function(b){var a=this;if(a.headerCt.dragging||a.disabled){if(a.activeHd){a.activeHd.el.dom.style.cursor="";delete a.activeHd}}else{a.findActiveHeader(b)}},findActiveHeader:function(c){var b=this,g=c.getTarget("."+b.colHeaderCls,3,true),a,f,d;if(g){a=Ext.getCmp(g.id);if(a.isOnRightEdge(c)){if(b.headerCt.visibleColumnManager.getColumns().length===1&&b.headerCt.forceFit){return}f=a}else{if(a.isOnLeftEdge(c)){d=b.headerCt.visibleColumnManager.getColumns();f=d[Ext.Array.indexOf(d,a)-1];if(!f&&b.ownerGrid.ownerLockable&&!b.ownerGrid.isLocked){d=b.ownerGrid.ownerLockable.lockedGrid.headerCt.visibleColumnManager.getColumns();f=d[d.length-1]}}}if(f){if(f.isGroupHeader){d=f.getGridColumns();f=d[d.length-1]}if(f&&!(f.fixed||(f.resizable===false))){b.activeHd=f;a.el.dom.style.cursor=b.eResizeCursor;if(a.triggerEl){a.triggerEl.dom.style.cursor=b.eResizeCursor}}}else{a.el.dom.style.cursor="";if(a.triggerEl){a.triggerEl.dom.style.cursor=""}b.activeHd=null}}return b.activeHd},onBeforeStart:function(b){var a=this;a.dragHd=Ext.supports.Touch?a.findActiveHeader(b):a.activeHd;if(!!a.dragHd&&!a.headerCt.dragging){a.xDelta=a.dragHd.getX()+a.dragHd.getWidth()-a.tracker.getXY()[0];a.tracker.constrainTo=a.getConstrainRegion();return true}else{a.headerCt.dragging=false;return false}},getConstrainRegion:function(){var f=this,b=f.dragHd.el,e,g=f.ownerGrid,d=g.getSizeModel().width,c=d.shrinkWrap?f.headerCt.getWidth()-f.headerCt.visibleColumnManager.getColumns().length*f.minColWidth:f.maxColWidth,a;if(f.headerCt.forceFit){e=f.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(e&&f.headerInSameGrid(e)){c=b.getWidth()+(e.getWidth()-f.minColWidth)}}else{if(g.isLocked&&d.shrinkWrap){c=f.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(true)-g.getWidth()-(g.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*f.minColWidth+Ext.getScrollbarSize().width)}}a=f.adjustConstrainRegion(b.getRegion(),0,0,0,f.minColWidth);a.right=b.getX()+c;return a},onStart:function(g){var h=this,f=h.dragHd,b=f.el.getWidth(),d=f.getOwnerHeaderCt(),l,k,c,a,j,m;h.headerCt.dragging=true;h.origWidth=b;if(!h.dynamic){c=h.markerOwner;if(c.frame&&c.resizable){h.gridOverflowSetting=c.el.dom.style.overflow;c.el.dom.style.overflow="hidden"}l=h.getLeftMarkerX(c);a=c.getLhsMarker();j=c.getRhsMarker();m=h.ownerGrid.body.getHeight()+d.getHeight();k=d.getOffsetsTo(c)[1]-c.el.getBorderWidth("t");a.setLocalY(k);j.setLocalY(k);a.setHeight(m);j.setHeight(m);h.setMarkerX(a,l);h.setMarkerX(j,l+b)}},onDrag:function(b){var a=this;if(a.dynamic){a.doResize()}else{a.setMarkerX(a.getMovingMarker(a.markerOwner),a.calculateDragX(a.markerOwner))}},getMovingMarker:function(a){return a.getRhsMarker()},onEnd:function(b){var a=this,c;a.headerCt.dragging=false;if(a.dragHd){if(!a.dynamic){c=a.headerCt.up("tablepanel");if(c.ownerLockable){c=c.ownerLockable}if("gridOverflowSetting" in a){c.el.dom.style.overflow=a.gridOverflowSetting}a.setMarkerX(c.getLhsMarker(),-9999);a.setMarkerX(c.getRhsMarker(),-9999)}a.doResize()}a.onHeaderCtMouseMove(b)},doResize:function(){var c=this,b=c.dragHd,a,d=c.tracker.getOffset("point");if(b&&d[0]){if(b.flex){delete b.flex}Ext.suspendLayouts();c.adjustColumnWidth(d[0]-c.xDelta);if(c.headerCt.forceFit){a=b.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(a&&!c.headerInSameGrid(a)){a=null}if(a){delete a.flex;a.setWidth(a.getWidth()-d[0])}}Ext.resumeLayouts(true)}},headerInSameGrid:function(b){var a=this.dragHd.up("tablepanel");return !!b.up(a)},disable:function(){var a=this.tracker;this.disabled=true;if(a){a.disable()}},enable:function(){var a=this.tracker;this.disabled=false;if(a){a.enable()}},calculateDragX:function(a){return this.tracker.getXY("point")[0]+this.xDelta-a.getX()-a.el.getBorderWidth("l")},getLeftMarkerX:function(a){return this.dragHd.getX()-a.getX()-a.el.getBorderWidth("l")-1},setMarkerX:function(b,a){b.setLocalX(a)},adjustConstrainRegion:function(f,d,e,a,c){return f.adjust(d,e,a,c)},adjustColumnWidth:function(a){this.dragHd.setWidth(this.origWidth+a)}},0,0,0,0,["plugin.gridheaderresizer"],0,[Ext.grid.plugin,"HeaderResizer"],0));(Ext.cmd.derive("Ext.dd.DragZone",Ext.dd.DragSource,{constructor:function(c,b){var d=this,a=d.containerScroll;Ext.dd.DragSource.prototype.constructor.call(this,c,b);if(a){c=d.scrollEl||c;c=Ext.get(c);if(Ext.isObject(a)){c.ddScrollConfig=a}Ext.dd.ScrollManager.register(c)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},getRepairXY:function(a){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragSource.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}},1,0,0,0,0,0,[Ext.dd,"DragZone"],0));(Ext.cmd.derive("Ext.grid.header.DragZone",Ext.dd.DragZone,{colHeaderSelector:".x-column-header",colInnerSelector:".x-column-header-inner",maxProxyWidth:120,constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;Ext.dd.DragZone.prototype.constructor.call(this,b.el);a.proxy.el.addCls("x-grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(b){if(b.getTarget(this.colInnerSelector)){var d=b.getTarget(this.colHeaderSelector),a,c;if(d){a=Ext.getCmp(d.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isOnLeftEdge(b)||a.isOnRightEdge(b))){c=document.createElement("div");c.role="presentation";c.innerHTML=a.text;return{ddel:c,header:a}}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.headerCt.hideMenu();Ext.dd.DragZone.prototype.onInitDrag.apply(this,arguments)},onDragDrop:function(){this.headerCt.dragging=false;Ext.dd.DragZone.prototype.onDragDrop.apply(this,arguments)},afterRepair:function(){Ext.dd.DragZone.prototype.afterRepair.call(this);this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}},1,0,0,0,0,0,[Ext.grid.header,"DragZone"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.initTarget(c,a,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.dd.ScrollManager",Ext.Base,{singleton:true,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=this.doScroll.bind(this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(a){var b=Ext.dd.ScrollManager;b.dragEl=null;b.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){var f=this;if(f.ddmInstance.dragCurrent){var a=f.proc,e=a.el,c=a.component,g=a.el.ddScrollConfig,h=g&&g.increment?g.increment:f.increment,b=g&&"animate" in g?g.animate:f.animate,d=function(){f.triggerRefresh()};if(b){if(b===true){b={callback:d}}else{b.callback=b.callback?Ext.Function.createSequence(b.callback,d):d}}if(c){h=h*f.dirTrans[a.dir];if(a.dir==="up"||a.dir==="down"){c.scrollBy(0,h,b)}else{c.scrollBy(h,0,b)}}else{e.scroll(a.dir,h,b)}if(!b){d()}}},clearProc:function(){var a=this.proc;if(a.id){clearInterval(a.id)}if(a.scroller){a.scroller.setSnapToBoundary(true);a.scroller.snapToBoundary()}a.id=0;a.el=a.component=a.scroller=null;a.dir=""},startProc:function(d,b){var e=this,g,f,c,a=e.proc;e.clearProc();a.el=d;a.dir=b;if(Ext.supports.touchScroll===2&&(c=d.component)&&d===c.getOverflowEl()){a.component=c;a.scroller=c.scrollManager.scroller;a.scroller.setSnapToBoundary(false)}g=d.ddScrollConfig?d.ddScrollConfig.ddGroup:undefined;f=(d.ddScrollConfig&&d.ddScrollConfig.frequency)?d.ddScrollConfig.frequency:e.frequency;if(g===undefined||e.ddmInstance.dragCurrent.ddGroup===g){a.id=Ext.interval(e.doScroll,f)}},onFire:function(g,k){var j=this,l,h,d,a,b,f,c;if(k||!j.ddmInstance.dragCurrent){return}if(!j.dragEl||j.dragEl!==j.ddmInstance.dragCurrent){j.dragEl=j.ddmInstance.dragCurrent;j.refreshCache()}l=g.getPoint();h=j.proc;d=j.els;for(a in d){b=d[a];f=b._region;c=b.ddScrollConfig||j;if(f&&f.contains(l)&&b.isScrollable()){if(f.bottom-l.y<=c.vthresh){if(h.el!==b){j.startProc(b,"down")}return}else{if(f.right-l.x<=c.hthresh){if(h.el!==b){j.startProc(b,"right")}return}else{if(l.y-f.top<=c.vthresh){if(h.el!==b){j.startProc(b,"up")}return}else{if(l.x-f.left<=c.hthresh){if(h.el!==b){j.startProc(b,"left")}return}}}}}}j.clearProc()},register:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.register(c[b])}}else{c=Ext.get(c);this.els[c.id]=c}},unregister:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.unregister(c[b])}}else{c=Ext.get(c);delete this.els[c.id]}},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]=="object"){a[b]._region=a[b].getRegion()}}}},1,0,0,0,0,0,[Ext.dd,"ScrollManager"],0));(Ext.cmd.derive("Ext.dd.DropTarget",Ext.dd.DDTarget,{constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DDTarget.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}return false},destroy:function(){Ext.dd.DDTarget.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}},1,0,0,0,0,0,[Ext.dd,"DropTarget"],0));(Ext.cmd.derive("Ext.dd.Registry",Ext.Base,{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(b,a){if(typeof b=="string"){return b}var c=b.id;if(!c&&a!==false){c="extdd-"+(++this.autoIdSeed);b.id=c}return c},register:function(d,e){e=e||{};if(typeof d=="string"){d=document.getElementById(d)}e.ddel=d;this.elements[this.getId(d)]=e;if(e.isHandle!==false){this.handles[e.ddel.id]=e}if(e.handles){var c=e.handles,b,a;for(b=0,a=c.length;b<a;b++){this.handles[this.getId(c[b])]=e}}},unregister:function(d){var f=this.getId(d,false),e=this.elements[f],c,b,a;if(e){delete this.elements[f];if(e.handles){c=e.handles;for(b=0,a=c.length;b<a;b++){delete this.handles[this.getId(c[b],false)]}}}},getHandle:function(a){if(typeof a!="string"){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!="string"){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}},1,0,0,0,0,0,[Ext.dd,"Registry"],0));(Ext.cmd.derive("Ext.dd.DropZone",Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,a,c,b){},onNodeOver:function(d,a,c,b){return this.dropAllowed},onNodeOut:function(d,a,c,b){},onNodeDrop:function(d,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,c,b){var d=this.getTargetFromEvent(c);if(!d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}return this.onContainerOver(a,c,b)}if(this.lastOverNode!=d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b)}this.onNodeEnter(d,a,c,b);this.lastOverNode=d}return this.onNodeOver(d,a,c,b)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(b,f,d){var c=this,g=c.getTargetFromEvent(f),a=g?c.onNodeDrop(g,b,f,d):c.onContainerDrop(b,f,d);if(c.lastOverNode){c.onNodeOut(c.lastOverNode,b,f,d);c.lastOverNode=null}return a},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}},0,0,0,0,0,0,[Ext.dd,"DropZone"],0));(Ext.cmd.derive("Ext.grid.header.DropZone",Ext.dd.DropZone,{colHeaderCls:"x-column-header",proxyOffsets:[-4,-9],constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;Ext.dd.DropZone.prototype.constructor.call(this,b.el)},destroy:function(){Ext.dd.DropZone.prototype.destroy.call(this);Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-top",html:"&#160;"});this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-bottom",html:"&#160;"})}return this.bottomIndicator},getLocation:function(d,b){var a=d.getXY()[0],c=Ext.fly(b).getRegion(),f;if((c.right-a)<=(c.right-c.left)/2){f="after"}else{f="before"}return{pos:f,header:Ext.getCmp(b.id),node:b}},positionIndicator:function(y,o,u){var x=this,p=y.header,f=x.getLocation(u,o),j=f.header,d=f.pos,c,t,l,r,s,a,b,k,m,w,v,n,h,q,g;if(j===x.lastTargetHeader&&d===x.lastDropPos){return}c=p.nextSibling("gridcolumn:not([hidden])");t=p.previousSibling("gridcolumn:not([hidden])");x.lastTargetHeader=j;x.lastDropPos=d;if(!j.draggable&&d==="before"&&j.getIndex()===0){return false}y.dropLocation=f;if((p!==j)&&((d==="before"&&c!==j)||(d==="after"&&t!==j))&&!j.isDescendantOf(p)){n=Ext.dd.DragDropManager.getRelated(x);h=n.length;q=0;for(;q<h;q++){g=n[q];if(g!==x&&g.invalidateDrop){g.invalidateDrop()}}x.valid=true;l=x.getTopIndicator();r=x.getBottomIndicator();if(d==="before"){s="bc-tl";a="tc-bl"}else{s="bc-tr";a="tc-br"}b=l.getAlignToXY(j.el,s);k=r.getAlignToXY(j.el,a);m=x.headerCt.el;w=m.getX()-x.indicatorXOffset;v=m.getX()+m.getWidth();b[0]=Ext.Number.constrain(b[0],w,v);k[0]=Ext.Number.constrain(k[0],w,v);l.setXY(b);r.setXY(k);l.show();r.show()}else{x.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(c,g,f,d){var h=this,k=d.header,a,l,b,j;if(d.header.el.dom===c){a=false}else{d.isLock=d.isUnlock=d.crossPanel=false;l=h.getLocation(f,c).header;a=(k.ownerCt===l.ownerCt);if(!a&&(!k.ownerCt.sealed&&!l.ownerCt.sealed)){a=true;b=k.up("tablepanel");j=l.up("tablepanel");if(b!==j){d.crossPanel=true;d.isLock=j.isLocked&&!b.isLocked;d.isUnlock=!j.isLocked&&b.isLocked;if((d.isUnlock&&k.lockable===false)||(d.isLock&&!k.isLockable())){a=false}}}}if(a){h.positionIndicator(d,c,f)}else{h.valid=false}return h.valid?h.dropAllowed:h.dropNotAllowed},hideIndicators:function(){var a=this;a.getTopIndicator().hide();a.getBottomIndicator().hide();a.lastTargetHeader=a.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(o,c,s,v){if(this.valid){var q=v.header,h=v.dropLocation,l=h.header,u=q.ownerCt,a=l.ownerCt,k=u===a,m=u.items.indexOf(v.header),p=a.items.indexOf(l),j=this.headerCt,d=j.visibleColumnManager,r=d.getHeaderIndex(q),b=l.isGroupHeader?a.items.indexOf(l):d.getHeaderIndex(l),n=q.isGroupHeader?q.query(":not([hidden]):not([isGroupHeader])").length:1,t=l.isGroupHeader?(h.pos==="after"):d.getHeaderIndex(l)>d.getHeaderIndex(q),g,f;if(h.pos==="after"){p++;b+=l.isGroupHeader?l.query(":not([hidden]):not([isGroupHeader])").length:1}if(v.isLock){g=u.up("[scrollerOwner]");g.lock(q,p,a)}else{if(v.isUnlock){g=u.up("[scrollerOwner]");g.unlock(q,p,a)}else{this.invalidateDrop();f=q.getWidth();if(k){if(p>m){p-=1}if(p===m){j.onHeaderMoved(q,n,r,b);return}}Ext.suspendLayouts();if(k){a.move(m,p)}else{if(t&&(b===p)){p-=1}u.isDDMoveInGrid=a.isDDMoveInGrid=!v.crossPanel;u.remove(q,false);a.insert(p,q);u.isDDMoveInGrid=a.isDDMoveInGrid=false}if(a.isGroupHeader){if(!k){q.savedFlex=q.flex;delete q.flex;q.width=f}}else{if(q.savedFlex){q.flex=q.savedFlex;delete q.width}}Ext.resumeLayouts(true);if(!k){j.onHeaderMoved(q,n,r,b)}}}}}},1,0,0,0,0,0,[Ext.grid.header,"DropZone"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderReorderer",Ext.plugin.Abstract,{init:function(a){this.headerCt=a;a.on({render:this.onHeaderCtRender,single:true,scope:this})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){var a=this;a.dragZone=new Ext.grid.header.DragZone(a.headerCt);a.dropZone=new Ext.grid.header.DropZone(a.headerCt);if(a.disabled){a.dragZone.disable()}},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}},0,0,0,0,["plugin.gridheaderreorderer"],0,[Ext.grid.plugin,"HeaderReorderer"],0));(Ext.cmd.derive("Ext.grid.header.Container",Ext.container.Container,{border:true,baseCls:"x-grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:false,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:"x-column-header-open",menuSortAscCls:"x-hmenu-sort-asc",menuSortDescCls:"x-hmenu-sort-desc",menuColsIcon:"x-cols-icon",ddLock:false,dragging:false,enableFocusableContainer:false,sortable:true,enableColumnHide:true,initComponent:function(){var a=this;a.headerCounter=0;a.plugins=a.plugins||[];a.defaults=a.defaults||{};if(!a.isColumn){if(a.enableColumnResize){a.resizer=new Ext.grid.plugin.HeaderResizer();a.plugins.push(a.resizer)}if(a.enableColumnMove){a.reorderer=new Ext.grid.plugin.HeaderReorderer();a.plugins.push(a.reorderer)}}if(a.isColumn&&!a.isGroupHeader){if(!a.items||a.items.length===0){a.isContainer=false;a.focusable=true;a.layout={type:"container",calculate:Ext.emptyFn}}}else{a.layout=Ext.apply({type:"gridcolumn",align:"stretch"},a.initialConfig.layout);a.defaults.columnLines=a.columnLines;if(!a.isGroupHeader){a.isRootHeader=true;if(!a.hiddenHeaders){a.enableFocusableContainer=true;a.ariaRole="row"}a.columnManager=new Ext.grid.ColumnManager(false,a);a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);if(a.grid){a.grid.columnManager=a.columnManager;a.grid.visibleColumnManager=a.visibleColumnManager}}else{a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);a.columnManager=new Ext.grid.ColumnManager(false,a)}}a.menuTask=new Ext.util.DelayedTask(a.updateMenuDisabledState,a);Ext.container.Container.prototype.initComponent.call(this)},initEvents:function(){var c=this,a=c.onHeaderCtEvent,b={click:a,dblclick:a,contextmenu:a,mouseover:c.onHeaderCtMouseOver,mouseout:c.onHeaderCtMouseOut,scope:c};if(Ext.supports.Touch){b.longpress=c.onHeaderCtLongPress}Ext.container.Container.prototype.initEvents.call(this);if(!c.isColumn&&!c.isGroupHeader){c.mon(c.el,b)}},onHeaderCtEvent:function(d,b){var c=this,h=c.getHeaderElByEvent(d),g,f,a;if(c.longPressFired){c.longPressFired=false;return}if(h&&!c.ddLock){g=Ext.getCmp(h.id);if(g){f=g[g.clickTargetName];if(d.within(f)){if(d.type==="click"||d.type==="tap"){a=g.onTitleElClick(d,f);if(a){c.onHeaderTriggerClick(a,d,Ext.supports.Touch?a.el:a.triggerEl)}else{c.onHeaderClick(g,d,b)}}else{if(d.type==="contextmenu"){c.onHeaderContextMenu(g,d,b)}else{if(d.type==="dblclick"&&g.resizable){g.onTitleElDblClick(d,f.dom)}}}}}}},onHeaderCtMouseOver:function(b,a){var f,d,c;if(!b.within(this.el,true)){f=b.getTarget("."+Ext.grid.column.Column.prototype.baseCls);d=f&&Ext.getCmp(f.id);if(d){c=d[d.clickTargetName];if(b.within(c)){d.onTitleMouseOver(b,c.dom)}}}},onHeaderCtMouseOut:function(f,c){var d="."+Ext.grid.column.Column.prototype.baseCls,b=f.getTarget(d),a=f.getRelatedTarget(d),h,g;if(b!==a){if(b){h=Ext.getCmp(b.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOut(f,g.dom)}}if(a){h=Ext.getCmp(a.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOver(f,g.dom)}}}},onHeaderCtLongPress:function(b){var a=this,d=a.getHeaderElByEvent(b),c=Ext.getCmp(d.id);if(!c.menuDisabled){a.longPressFired=true;a.showMenuBy(d,c)}},getHeaderElByEvent:function(a){return a.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){if(this.hiddenHeaders){return false}return Ext.container.Container.prototype.isLayoutRoot.call(this)},getOwnerHeaderCt:function(){var a=this;return a.isRootHeader?a:a.up("[isRootHeader]")},onDestroy:function(){var a=this;if(a.menu){a.menu.un("hide",a.onMenuHide,a)}a.menuTask.cancel();Ext.container.Container.prototype.onDestroy.call(this);Ext.destroy(a.visibleColumnManager,a.columnManager,a.menu);a.columnManager=a.visibleColumnManager=null},applyColumnsState:function(e){if(!e||!e.length){return}var l=this,j=l.items.items,h=j.length,f=0,b=e.length,k,d,a,g,m=false;for(k=0;k<b;k++){a=e[k];for(g=h;g--;){d=j[g];if(d.getStateId&&d.getStateId()==a.id){if(f!==g){this.items.insert(f,this.items.getAt(g));m=true}if(d.applyColumnState){d.applyColumnState(a)}++f;break}}}if(m){l.purgeCache()}},getColumnsState:function(){var b=this,a=[],c;b.items.each(function(d){c=d.getColumnState&&d.getColumnState();if(c){a.push(c)}});return a},onAdd:function(b){var a=this;if(!b.headerId){b.headerId=b.initialConfig.id||Ext.id(null,"header-")}if(b.sortable===undefined){b.sortable=a.sortable}if(!b.getStateId()){b.stateId=b.initialConfig.id||("h"+(++a.headerCounter))}Ext.container.Container.prototype.onAdd.apply(this,arguments);a.onHeadersChanged(b,a.isDDMoveInGrid)},move:function(b,d){var c=this,a=c.items.items[b];a.visibleFromIdx=c.getOwnerHeaderCt().visibleColumnManager.indexOf(a);Ext.container.Container.prototype.move.apply(this,arguments)},onMove:function(a,d,g){var f=this,e=f.getOwnerHeaderCt(),b=e.visibleColumnManager,h=1,c;f.onHeadersChanged(a,true);c=b.indexOf(a);if(c>=a.visibleFromIdx){c++}Ext.container.Container.prototype.onMove.apply(this,arguments);if(a.isGroupHeader){h=a.visibleColumnManager.getColumns().length}e.onHeaderMoved(a,h,a.visibleFromIdx,c)},onRemove:function(d){var b=this,a=b.ownerCt;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!b.destroying){if(!b.isDDMoveInGrid){b.onHeadersChanged(d,false)}if(b.isGroupHeader&&!b.items.getCount()&&a){if(d.rendered){b.detachComponent(d)}Ext.suspendLayouts();a.remove(b);Ext.resumeLayouts(true)}}},onHeadersChanged:function(e,a){var b,d=this.getOwnerHeaderCt();this.purgeHeaderCtCache(this);if(d){d.onColumnsChanged();if(!e.isGroupHeader){b=d.ownerCt;if(b&&!a){b.onHeadersChanged(d,e)}}}},onHeaderMoved:function(f,a,c,e){var d=this,b=d.ownerCt;if(d.rendered){if(b&&b.onHeaderMove){b.onHeaderMove(d,f,a,c,e)}d.fireEvent("columnmove",d,f,c,e)}},onColumnsChanged:function(){var c=this,d=c.menu,a,b;if(c.rendered){c.fireEvent("columnschanged",c);if(d&&(a=d.child("#columnItemSeparator"))){b=d.child("#columnItem");a.destroy();b.destroy()}}},lookupComponent:function(b){var a=Ext.container.Container.prototype.lookupComponent.apply(this,arguments);if(!a.isGroupHeader&&a.width===undefined&&!a.flex){a.width=this.defaultWidth}return a},setSortState:function(){var b=this.up("[store]").store,d=this.visibleColumnManager.getColumns(),a=d.length,c,f,e;for(c=0;c<a;c++){f=d[c];e=b.getSorters().get(f.getSortParam());f.setSortState(e)}},getHeaderMenu:function(){var b=this.getMenu(),a;if(b){a=b.child("#columnItem");if(a){return a.menu}}return null},onHeaderVisibilityChange:function(e,d){var b=this,c=b.getHeaderMenu(),a;b.purgeHeaderCtCache(e.ownerCt);if(c){a=b.getMenuItemForHeader(c,e);if(a){a.setChecked(d,true)}if(c.isVisible()){b.menuTask.delay(50)}}},updateMenuDisabledState:function(g){var f=this,d=f.query(":not([hidden])"),c,a=d.length,e,b,h;if(!g){g=f.getMenu()}for(c=0;c<a;++c){e=d[c];b=f.getMenuItemForHeader(g,e);if(b){h=e.isHideable()?"enable":"disable";if(b.menu){h+="CheckChange"}b[h]()}}},getMenuItemForHeader:function(a,b){return b?a.down("menucheckitem[headerId="+b.id+"]"):null},onHeaderShow:function(c){var b=this,a=b.ownerCt;if(b.forceFit){delete b.flex}b.onHeaderVisibilityChange(c,true);if(!c.isGroupHeader){if(a){a.onHeaderShow(b,c)}}b.fireEvent("columnshow",b,c);b.fireEvent("columnschanged",this)},onHeaderHide:function(c){var b=this,a=b.ownerCt;b.onHeaderVisibilityChange(c,false);if(!c.isGroupHeader){if(a){a.onHeaderHide(b,c)}}b.fireEvent("columnhide",b,c);b.fireEvent("columnschanged",this)},tempLock:function(){this.ddLock=true;Ext.Function.defer(function(){this.ddLock=false},200,this)},onHeaderResize:function(d,a){var c=this,b=c.ownerCt;if(b){b.onHeaderResize(c,d,a)}c.fireEvent("columnresize",c,d,a)},onHeaderClick:function(c,b,a){c.fireEvent("headerclick",this,c,b,a);this.fireEvent("headerclick",this,c,b,a)},onHeaderContextMenu:function(c,b,a){c.fireEvent("headercontextmenu",this,c,b,a);this.fireEvent("headercontextmenu",this,c,b,a)},onHeaderTriggerClick:function(d,c,a){var b=this;if(d.fireEvent("headertriggerclick",b,d,c,a)!==false&&b.fireEvent("headertriggerclick",b,d,c,a)!==false){b.showMenuBy(a,d)}},showMenuBy:function(b,f){var d=this.getMenu(),e=d.down("#ascItem"),c=d.down("#descItem"),a;d.activeHeader=d.ownerCmp=f;f.setMenuActive(true);a=f.sortable?"enable":"disable";if(e){e[a]()}if(c){c[a]()}d.showBy(b,"tl-bl?")},hideMenu:function(){if(this.menu){this.menu.hide()}},onMenuHide:function(a){a.activeHeader.setMenuActive(false)},moveHeader:function(a,b){this.tempLock();this.move(a,b)},purgeHeaderCtCache:function(a){while(a){a.purgeCache();if(a.isRootHeader){return}a=a.ownerCt}},purgeCache:function(){var c=this,b=c.visibleColumnManager,a=c.columnManager;c.gridVisibleColumns=c.gridDataColumns=c.hideableColumns=null;if(b){b.invalidate();a.invalidate()}},getMenu:function(){var a=this;if(!a.menu){a.menu=new Ext.menu.Menu({hideOnParentHide:false,items:a.getMenuItems(),listeners:{beforeshow:a.beforeMenuShow,hide:a.onMenuHide,scope:a}});a.fireEvent("menucreate",a,a.menu)}return a.menu},beforeMenuShow:function(e){var c=this,b=e.child("#columnItem"),a,d,e;if(!b){a=c.enableColumnHide?c.getColumnMenu(c):null;d=c.sortable?2:0;if(a&&a.length){e.insert(d,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:{items:a},hideOnClick:false}])}}c.updateMenuDisabledState(c.menu)},getMenuItems:function(){var c=this,b=[],a=c.enableColumnHide?c.getColumnMenu(c):null;if(c.sortable){b=[{itemId:"ascItem",text:c.sortAscText,iconCls:c.menuSortAscCls,handler:c.onSortAscClick,scope:c},{itemId:"descItem",text:c.sortDescText,iconCls:c.menuSortDescCls,handler:c.onSortDescClick,scope:c}]}if(a&&a.length){if(c.sortable){b.push({itemId:"columnItemSeparator",xtype:"menuseparator"})}b.push({itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:a,hideOnClick:false})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("ASC")},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("DESC")},getColumnMenu:function(f){var c=[],b=0,e,a=f.query(">gridcolumn[hideable]"),g=a.length,d;for(;b<g;b++){e=a[b];d=new Ext.menu.CheckItem({text:e.menuText||e.text,checked:!e.hidden,hideOnClick:false,headerId:e.id,menu:e.isGroupHeader?this.getColumnMenu(e):undefined,checkHandler:this.onColumnCheckChange,scope:this});c.push(d)}return c},onColumnCheckChange:function(a,b){var c=Ext.getCmp(a.headerId);if(c.rendered){c[b?"show":"hide"]()}else{c.hidden=!b}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var c=0,b=this.getVisibleGridColumns(),d=b.length,a;for(a=0;a<d;a++){c+=b[a].getCellWidth()||0}return c},getVisibleGridColumns:function(){if(this.gridVisibleColumns){return this.gridVisibleColumns}var c=this.getGridColumns(),e,b=[],a=c.length,d;for(d=0;d<a;d++){if(!c[d].hidden){e=c[d];e.visibleIndex=b.length;b[b.length]=e}}this.gridVisibleColumns=b;return b},getGridColumns:function(g,a){if(!g&&this.gridDataColumns){return this.gridDataColumns}var f=this,j=g||[],e,b,d,h,c;a=a||f.hidden;if(f.items){e=f.items.items;for(b=0,d=e.length;b<d;b++){h=e[b];if(h.isGroupHeader){h.getGridColumns(j,a)}else{h.hiddenAncestor=a;j.push(h)}}}if(!g){f.gridDataColumns=j}if(!g&&d){for(b=0,d=j.length;b<d;b++){h=j[b];h.fullColumnIndex=b;h.isFirstVisible=h.isLastVisible=false;if(!(h.hidden||h.hiddenAncestor)){if(!c){h.isFirstVisible=true}c=h}}if(c){c.isLastVisible=true}}return j},getHideableColumns:function(){var b=this,a=b.hideableColumns;if(!a){a=b.hideableColumns=b.query("[hideable]")}return a},getHeaderIndex:function(a){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderIndex(a)},getHeaderAtIndex:function(a){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(a)},getVisibleHeaderClosestToIndex:function(a){if(!this.visibleColumnManager){this.visibleColumnManager=this.getOwnerHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(a)},applyForceFit:function(g){var m=this,n=m.view,b=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,d=false,r=Ext.grid.header.Container.prototype.defaultWidth,a=m.el.dom.clientWidth-(n.el.dom.scrollHeight>n.el.dom.clientHeight?Ext.getScrollbarSize().width:0),e=0,l=m.getVisibleGridColumns(),h=g.hidden,k,f,q,j,c;function o(){for(f=0,k=l.length;f<k;f++){q=l[f];if(q===g){continue}q.flex=q.flex||q.width||q.getWidth();e+=q.flex;q.width=null}}function p(){var s;for(f=0,k=l.length;f<k;f++){q=l[f];s=(q===g);if(d&&!s){q.flex=b;q.width=null}else{if(!s){c=q.flex||r;q.flex=Math.max(Math.ceil((c/e)*a),b);q.width=null}}q.setWidth(q.width||q.flex)}}Ext.suspendLayouts();j=(a-((l.length+1)*b));g.flex=null;if(h){c=g.width||g.savedWidth;g.savedWidth=null}else{c=n.getMaxContentWidth(g)}if(c>j){g.width=j;d=true}else{g.width=c;a-=c+r;o()}p();Ext.resumeLayouts(true)},autoSizeColumn:function(b){var a=this.view;if(a){a.autoSizeColumn(b);if(this.forceFit){this.applyForceFit(b)}}},privates:{getFocusables:function(){return this.getVisibleGridColumns()},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{scope:b,down:b.showHeaderMenu,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey,space:b.toggleColumnSort,enter:b.toggleColumnSort})},showHeaderMenu:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.triggerEl){this.onHeaderTriggerClick(a,b,a.triggerEl)}},toggleColumnSort:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.sortable){a.toggleSortState();this.onHeaderClick(a,b,a.el)}},onFocusableContainerMousedown:Ext.privateFn}},0,["headercontainer"],["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},["widget.headercontainer"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.grid.header,"Container"],0));(Ext.cmd.derive("Ext.grid.ColumnComponentLayout",Ext.layout.component.Auto,{type:"columncomponent",setWidthInDom:true,beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.titleContext=a.getEl("titleEl");a.triggerContext=a.getEl("triggerEl")},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.widthModel.shrinkWrap){a.el.setWidth("")}a.titleEl.setStyle({paddingTop:"",paddingBottom:""})},publishInnerHeight:function(e,j){var g=this,b=g.owner,a,d,h,f,k,c;if(b.getOwnerHeaderCt().hiddenHeaders){e.setProp("innerHeight",0);return}a=j-e.getBorderInfo().height;d=a;if(b.headerWrap&&!e.hasDomProp("width")){g.done=false;return}if(e.hasRawContent){h=b.textEl.getHeight();if(h){d-=h;if(d>0){k=Math.floor(d/2);c=d-k;e.titleContext.setProp("padding-top",k);e.titleContext.setProp("padding-bottom",c)}}}else{e.setProp("innerHeight",a-b.titleEl.getHeight(),false)}},measureContentHeight:function(a){return a.el.dom.offsetHeight},publishInnerWidth:function(a,b){if(!a.hasRawContent){a.setProp("innerWidth",b-a.getBorderInfo().width,false)}},calculateOwnerHeightFromContentHeight:function(d,c){var b=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),a=this.owner;if(!d.hasRawContent){if(!a.headerWrap||d.hasDomProp("width")){return c+a.titleEl.getHeight()+d.getBorderInfo().height}return null}return b},calculateOwnerWidthFromContentWidth:function(f,b){var a=this.owner,e=f.getPaddingInfo().width,d=this.getTriggerOffset(a,f),c;if(a.isGroupHeader){c=b}else{c=Math.max(b,a.textEl.getWidth()+f.titleContext.getPaddingInfo().width)}return c+e+d},getTriggerOffset:function(a,c){var b=0;if(c.widthModel.shrinkWrap&&!a.menuDisabled){if(a.query(">:not([hidden])").length===0){b=a.self.triggerElWidth}}return b}},0,0,0,0,["layout.columncomponent"],0,[Ext.grid,"ColumnComponentLayout"],0));(Ext.cmd.derive("Ext.grid.column.Column",Ext.grid.header.Container,{alternateClassName:"Ext.grid.Column",config:{triggerVisible:false},baseCls:"x-column-header",hoverCls:"x-column-header-over",handleWidth:Ext.supports.Touch?10:4,ariaRole:"columnheader",enableFocusableContainer:false,sortState:null,possibleSortStates:["ASC","DESC"],childEls:["titleEl","triggerEl","textEl"],headerWrap:false,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" {tipMarkup}class="',"x-","column-header-inner",'<tpl if="empty"> ',"x-",'column-header-inner-empty</tpl>">','<span id="{id}-textEl" data-ref="textEl" class="',"x-","column-header-text",'{childElCls}">',"{text}","</span>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="',"x-","column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:true,resizable:true,hideable:true,menuDisabled:false,renderer:false,align:"left",draggable:true,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",isHeader:true,isColumn:true,producesHTML:true,tabIndex:-1,ascSortCls:"x-column-header-sort-ASC",descSortCls:"x-column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:"x-group-sub-header",groupHeaderCls:"x-group-header",clickTargetName:"titleEl",detachOnRemove:true,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var a=this;if(a.header!=null){a.text=a.header;a.header=null}if(a.cellWrap){a.tdCls=(a.tdCls||"")+" x-wrap-cell"}if(a.columns!=null){a.isGroupHeader=true;a.items=a.columns;a.columns=a.flex=a.width=null;a.cls=(a.cls||"")+" "+a.groupHeaderCls;a.sortable=a.resizable=false;a.align="center"}else{if(a.flex){a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}a.addCls("x-column-header-align-"+a.align);a.setupRenderer();a.setupRenderer("edit");a.setupRenderer("summary");Ext.grid.header.Container.prototype.initComponent.apply(this,arguments)},bindFormatter:function(b){var a=this;return function(c){return b.format(c,b.scope||a.scope||a.resolveListenerScope())}},bindRenderer:function(b){var a=this;a.hasCustomRenderer=true;return function(){return Ext.callback(b,a.scope,arguments,0,a)}},setupRenderer:function(b){b=b||"column";var c=this,e=c[c.formatterNames[b]],d=c[c.rendererNames[b]],a=b==="column",f;if(!e){if(d){if(typeof d==="string"){d=c[c.rendererNames[b]]=c.bindRenderer(d)}if(a){c.hasCustomRenderer=d.length>1}}else{if(a&&c.defaultRenderer){c.renderer=c.defaultRenderer;c.usingDefaultRenderer=true}}}else{f=e.indexOf("this.")===0;if(f){e=e.substring(5)}e=Ext.app.bind.Template.prototype.parseFormat(e);c[c.formatterNames[b]]=null;if(f){e.scope=null}c[c.rendererNames[b]]=c.bindFormatter(e)}},getView:function(){var a=this.getOwnerHeaderCt();if(a){return a.view}},onResize:function(d,a,c,g){var e=this,b,f;Ext.grid.header.Container.prototype.onResize.apply(this,arguments);if(c&&e.cellWrap){b=e.getView();if(b){f=b.bufferedRenderer;if(f){f.onWrappedColumnWidthChange(c,d)}}}},initItems:function(){var a=this;Ext.grid.header.Container.prototype.initItems.apply(this,arguments);if(a.isGroupHeader){if(!a.hasVisibleChildColumns()){a.hide()}}},hasVisibleChildColumns:function(){var b=this.items.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.isColumn&&!d.hidden){return true}}return false},onAdd:function(b){var a=this;if(b.isColumn){b.isSubHeader=true;b.addCls(this.groupSubHeaderCls)}if(a.hidden&&b.isColumn){if(a.constructing){b.hide()}else{if(!b.hidden){a.show()}}}Ext.grid.header.Container.prototype.onAdd.apply(this,arguments)},onRemove:function(b){var a=this;if(b.isSubHeader){b.isSubHeader=false;b.removeCls(a.groupSubHeaderCls)}Ext.grid.header.Container.prototype.onRemove.apply(this,arguments);if(!(a.isDestroyed||a.destroying)&&a.isGroupHeader&&!a.hasVisibleChildColumns()){a.hide()}},initRenderData:function(){var b=this,e="",c=b.tooltip,d=b.text,a=b.tooltipType=="qtip"?"data-qtip":"title";if(!Ext.isEmpty(c)){e=a+'="'+c+'" '}return Ext.applyIf(Ext.grid.header.Container.prototype.initRenderData.apply(this,arguments),{text:d,empty:d==="&#160;"||d===" "||d==="",menuDisabled:b.menuDisabled,tipMarkup:e,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(b){var a=this;a.applyColumnsState(b.columns);if(b.hidden!=null){a.hidden=b.hidden}if(b.locked!=null){a.locked=b.locked}if(b.sortable!=null){a.sortable=b.sortable}if(b.width!=null){a.flex=null;a.width=b.width}else{if(b.flex!=null){a.width=null;a.flex=b.flex}}},getColumnState:function(){var e=this,b=e.items.items,a=b?b.length:0,d,c=[],f={id:e.getStateId()};e.savePropsToState(["hidden","sortable","locked","flex","width"],f);if(e.isGroupHeader){for(d=0;d<a;d++){c.push(b[d].getColumnState())}if(c.length){f.columns=c}}else{if(e.isSubHeader&&e.ownerCt.hidden){delete e.hidden}}if("width" in f){delete f.flex}return f},getStateId:function(){return this.stateId||this.headerId},setText:function(a){this.text=a;if(this.rendered){this.textEl.setHtml(a)}},getIndex:function(){return this.isGroupColumn?false:this.getOwnerHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.visibleIndex!=null?this.visibleIndex:this.isGroupColumn?false:Ext.Array.indexOf(this.getOwnerHeaderCt().getVisibleGridColumns(),this)},beforeRender:function(){var b=this,a=b.up("tablepanel");Ext.grid.header.Container.prototype.beforeRender.call(this);if(a){if((!b.sortable||a.sortableColumns===false)&&!b.groupable&&!b.lockable&&(a.enableColumnHide===false||!b.getOwnerHeaderCt().getHideableColumns().length)){b.menuDisabled=true}}if(b.cellWrap){b.variableRowHeight=true}b.protoEl.unselectable()},afterRender:function(){var b=this,a=b.triggerEl;Ext.grid.header.Container.prototype.afterRender.apply(this,arguments);if(a&&b.self.triggerElWidth===undefined){a.setStyle("display","block");b.self.triggerElWidth=a.getWidth();a.setStyle("display","")}},afterComponentLayout:function(d,a,c,f){var e=this,b=e.getOwnerHeaderCt();Ext.grid.header.Container.prototype.afterComponentLayout.apply(this,arguments);if(b&&(c!=null||e.flex)&&d!==c){b.onHeaderResize(e,d)}},onDestroy:function(){var a=this;Ext.destroy(a.field);a.field=null;Ext.grid.header.Container.prototype.onDestroy.apply(this,arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onTitleElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onTitleElClick(a,this.el.dom)},onTitleElDblClick:function(f,a){var c=this,b,d,g;if(c.isOnLeftEdge(f)){b=c.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(b&&b.getOwnerHeaderCt()===c.getOwnerHeaderCt()){b.autoSize()}}else{if(c.isOnRightEdge(f)){if(c.isGroupHeader&&f.getPoint().isContainedBy(c.layout.innerCt)){d=c.query("gridcolumn:not([hidden]):not([isGroupHeader])");c.getOwnerHeaderCt().autoSizeColumn(d[d.length-1]);return}else{g=c.getOwnerHeaderCt();if(g.visibleColumnManager.getColumns().length===1&&g.forceFit){return}}c.autoSize()}}},autoSize:function(){var b=this,c,e,a,d;if(b.isGroupHeader){c=b.query("gridcolumn:not([hidden]):not([isGroupHeader])");e=c.length;d=this.getOwnerHeaderCt();Ext.suspendLayouts();for(a=0;a<e;a++){d.autoSizeColumn(c[a])}Ext.resumeLayouts(true);return}this.getOwnerHeaderCt().autoSizeColumn(this)},onTitleElClick:function(f,c){var d=this,a,b;if(Ext.supports.Touch){b=d.previousSibling(":not([hidden])");if(!d.menuDisabled&&d.isOnRightEdge(f,parseInt(d.triggerEl.getStyle("width")))){if(!d.menuDisabled){a=d}}else{if(b&&!b.menuDisabled&&d.isOnLeftEdge(f)){a=b}}}else{a=d.triggerEl&&(f.target===d.triggerEl.dom||c===d.triggerEl.dom||f.within(d.triggerEl))?d:null}if(!a&&!d.isOnLeftEdge(f)&&!d.isOnRightEdge(f)||f.getKey()){d.toggleSortState()}return a},processEvent:function(f,b,a,c,d,g){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var b=this,a,c;if(b.sortable){a=Ext.Array.indexOf(b.possibleSortStates,b.sortState);c=(a+1)%b.possibleSortStates.length;b.sort()}},sort:function(d){var c=this,b=c.up("tablepanel"),a=b.store;Ext.suspendLayouts();c.sorting=true;a.sort(c.getSortParam(),d,b.multiColumnSort?"multi":"replace");delete c.sorting;Ext.resumeLayouts(true)},getSortParam:function(){return this.dataIndex},setSortState:function(g){var c=this,d=g&&g.getDirection(),f=c.ascSortCls,b=c.descSortCls,a=c.getOwnerHeaderCt(),e;switch(d){case"DESC":if(!c.hasCls(b)){c.addCls(b);c.sortState="DESC";e=true}c.removeCls(f);break;case"ASC":if(!c.hasCls(f)){c.addCls(f);c.sortState="ASC";e=true}c.removeCls(b);break;default:c.removeCls([f,b]);c.sortState=null;break}if(e){a.fireEvent("sortchange",a,c,d)}},isHideable:function(){var a={hideCandidate:this,result:this.hideable};if(a.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[a])}return a.result},hasOtherMenuEnabledChildren:function(a){var b,c;if(!this.isXType("headercontainer")){a.result=false;return false}b=this.query(">:not([hidden]):not([menuDisabled])");c=b.length;if(Ext.Array.contains(b,a.hideCandidate)){c--}if(c){return false}a.hideCandidate=this},isLockable:function(){var a={result:this.lockable!==false};if(a.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[a])}return a.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(a){if(!this.isXType("headercontainer")){a.result=false;return false}if(this.query(">:not([hidden])").length>1){return false}},hide:function(c){var h=this,e=h.getOwnerHeaderCt(),b=h.getRefOwner(),a,j,g,f,d;if(b.constructing){Ext.grid.header.Container.prototype.hide.call(this);return h}if(h.rendered&&!h.isVisible()){return h}if(e.forceFit){h.visibleSiblingCount=e.getVisibleGridColumns().length-1;if(h.flex){h.savedWidth=h.getWidth();h.flex=null}}a=b.isGroupHeader;if(a&&!c){g=b.query(">:not([hidden])");if(g.length===1&&g[0]===h){h.ownerCt.hide();return}}Ext.suspendLayouts();if(h.isGroupHeader){g=h.items.items;for(d=0,f=g.length;d<f;d++){j=g[d];if(!j.hidden){j.hide(true)}}}Ext.grid.header.Container.prototype.hide.call(this);e.onHeaderHide(h);Ext.resumeLayouts(true);return h},show:function(b,c){var h=this,e=h.getOwnerHeaderCt(),a=h.ownerCt,g,f,d,j;if(h.isVisible()){return h}if(h.rendered){if(e.forceFit){e.applyForceFit(h)}}Ext.suspendLayouts();if(h.isSubHeader&&a.hidden){a.show(false,true)}Ext.grid.header.Container.prototype.show.apply(this,arguments);if(h.isGroupHeader&&c!==true&&!h.query(":not([hidden])").length){g=h.items.items;for(d=0,f=g.length;d<f;d++){j=g[d];if(j.hidden){j.show(true)}}}a=h.getOwnerHeaderCt();if(a){a.onHeaderShow(h)}Ext.resumeLayouts(true);return h},getCellWidth:function(){var b=this,a;if(b.rendered&&b.componentLayout&&b.componentLayout.lastComponentSize){a=b.componentLayout.lastComponentSize.width}else{if(b.width){a=b.width}else{if(!b.isColumn){a=b.getTableWidth()}}}return a},getCellId:function(){return"x-grid-cell-"+this.getItemId()},getCellSelector:function(){return"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" .x-grid-cell-inner"},isOnLeftEdge:function(a){return(a.getXY()[0]-this.getX()<this.handleWidth)},isOnRightEdge:function(b,a){return(this.getX()+this.getWidth()-b.getXY()[0]<=(a||this.handleWidth))},setMenuActive:function(a){this.titleEl[a?"addCls":"removeCls"](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(a){return function(b){return Ext.util.Format[a](b)}}}}}},0,["gridcolumn"],["component","box","container","headercontainer","gridcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true},["widget.gridcolumn"],0,[Ext.grid.column,"Column",Ext.grid,"Column"],0));(Ext.cmd.derive("Ext.tree.Column",Ext.grid.column.Column,{tdCls:"x-grid-cell-treecolumn",autoLock:true,lockable:false,draggable:false,hideable:false,iconCls:"x-tree-icon",checkboxCls:"x-tree-checkbox",elbowCls:"x-tree-elbow",expanderCls:"x-tree-expander",textCls:"x-tree-node-text",innerCls:"x-grid-cell-inner-treecolumn",isTreeColumn:true,cellTpl:['<tpl for="lines">','<img src="{parent.blankUrl}" class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"/>',"</tpl>",'<img src="{blankUrl}" class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"/>','<tpl if="checked !== null">','<input type="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"/>',"</tpl>",'<img src="{blankUrl}" role="presentation" class="{childCls} {baseIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else>parent</tpl> {iconCls}"','<tpl if="icon">style="background-image:url({icon})"</tpl>/>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],initComponent:function(){var a=this;a.setupRenderer();a.origRenderer=a.renderer;a.origScope=a.scope||window;a.renderer=a.treeRenderer;a.scope=a;Ext.grid.column.Column.prototype.initComponent.call(this)},treeRenderer:function(h,a,e,b,c,j,g){var f=this,k=e.get("cls"),d;if(k){a.tdCls+=" "+k}d=f.initTemplateRendererData(h,a,e,b,c,j,g);return f.getTpl("cellTpl").apply(d)},initTemplateRendererData:function(l,a,e,b,d,m,j){var h=this,g=h.origRenderer,c=e.data,k=e.parentNode,n=j.rootVisible,o=[],f;while(k&&(n||k.data.depth>0)){f=k.data;o[n?f.depth:f.depth-1]=f.isLast?0:1;k=k.parentNode}return{record:e,baseIconCls:h.iconCls,iconCls:c.iconCls,icon:c.icon,checkboxCls:h.checkboxCls,checked:c.checked,elbowCls:h.elbowCls,expanderCls:h.expanderCls,textCls:h.textCls,leaf:c.leaf,expandable:e.isExpandable(),isLast:e.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:c.href,hrefTarget:c.hrefTarget,lines:o,metaData:a,childCls:h.getChildCls?h.getChildCls()+" ":"",value:g?g.apply(h.origScope,arguments):l}}},0,["treecolumn"],["component","box","container","headercontainer","gridcolumn","treecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,treecolumn:true},["widget.treecolumn"],0,[Ext.tree,"Column"],0));(Ext.cmd.derive("Ext.grid.NavigationModel",Ext.view.NavigationModel,{focusCls:"x-grid-item-focused",getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,cellmousedown:a.onCellMouseDown,cellclick:a.onCellClick,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemClick,refresh:a.onViewRefresh,scope:a}},initKeyNav:function(a){var b=this;b.position=new Ext.grid.CellContext(a);b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"cellkeydown",processEvent:function(e,c,g,d,j,f,h){return h},up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},onCellMouseDown:function(c,a,f,b,h,e,d){var g=d.parentEvent;if(!g||g.type!=="touchstart"){this.setPosition(d.position,null,d)}},onCellClick:function(d,b,f,c,g,e,a){if(this.position.isEqual(a.position)){this.fireNavigateEvent(a)}else{this.setPosition(a.position,null,a)}},onItemMouseDown:function(l,f,o,h,a){var j=this,m,d,g,e,c,k,n=a.parentEvent;if(!n||n.type!=="touchstart"){if(!a.position.cellElement){m=a.getX();d=l.getVisibleColumnManager().getColumns();g=d.length;for(e=0;e<g;e++){c=d[e];k=d[e].getBox();if(m>=k.left&&m<k.right){j.setPosition(f,d[e],a);return}}}}},onItemClick:function(c,b,e,d,a){if(!a.position.cellElement){this.fireNavigateEvent(a)}},deferSetPosition:function(c,b,d,f,a,g){var e=this.view.getFocusTask();e.delay(c,this.setPosition,this,[b,d,f,a,g]);return e},setPosition:function(e,j,k,p,l){var m=this,o,g,a,b,c,h,f,n=e==null&&j==null,d=m.record==null&&m.recordIndex==null&&m.item==null;if(e&&e.isCellContext){o=e.view}else{if(k&&k.view){o=k.view}else{if(m.lastFocused){o=m.lastFocused.view}else{o=m.view}}}g=o.getSelectionModel();a=o.dataSource;o.getFocusTask().cancel();if(o.isDestroyed||!o.refreshCounter||n&&d){return}if(e&&e.isCellContext){h=e.record;b=e.rowIdx;c=e.colIdx;f=e.column}else{if(n){h=b=null}else{if(j==null){j=m.lastFocused?m.lastFocused.column:0}if(typeof e==="number"){b=Math.max(Math.min(e,a.getCount()-1),0);h=a.getAt(e)}else{if(e.isEntity){h=e;b=a.indexOf(h);if(b===-1){h=null}}else{if(e.tagName){h=o.getRecord(e);b=a.indexOf(h);if(b===-1){h=null}}else{if(d){return}n=true;h=b=null}}}}if(h){if(j==null){if(!(f=m.column)){c=0;f=o.getVisibleColumnManager().getColumns()[c]}}else{if(typeof j==="number"){f=o.getVisibleColumnManager().getColumns()[j];c=j}else{f=j;c=o.getVisibleColumnManager().indexOf(j)}}}else{n=true;f=c=null}}if(b===m.recordIndex&&c===m.columnIndex){return}if(m.cell){m.cell.removeCls(m.focusCls)}m.previousRecordIndex=m.recordIndex;m.previousRecord=m.record;m.previousItem=m.item;m.previousCell=m.cell;m.previousColumn=m.column;m.previousColumnIndex=m.columnIndex;m.previousPosition=m.position.clone();m.position.setAll(o,m.recordIndex=b,m.columnIndex=c,m.record=h,m.column=f);if(n){m.item=m.cell=null}else{m.focusPosition(m.position)}if(!p){g.fireEvent("focuschange",g,m.previousRecord,m.record);o.fireEvent("rowfocus",m.record,m.item,m.recordIndex);o.fireEvent("cellfocus",m.record,m.cell,m.position)}if(!l&&m.cell!==m.previousCell){m.fireNavigateEvent(k)}},focusPosition:function(a){var c=this,b,d;c.item=c.cell=null;if(a&&a.record&&a.column){b=a.view;if(a.rowElement){d=c.item=a.rowElement}else{d=b.getRowByRecord(a.record)}if(d){c.cell=a.cellElement||Ext.fly(d).down(a.column.getCellSelector(),true);if(c.cell){c.cell=new Ext.dom.Fly(c.cell);b.lastFocused=c.lastFocused=c.position.clone();c.focusItem(c.cell);b.focusEl=c.cell}else{c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}}else{d=a.rowIdx;c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null;if(b.bufferedRenderer){b.bufferedRenderer.scrollTo(d,false,c.afterBufferedScrollTo,c)}}}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getCell:function(){return this.cell},getPosition:function(){var c=this,a=c.position,b;if(a.record&&a.column){b=a.view;if(b.dataSource.indexOf(a.record)===-1||b.getVisibleColumnManager().indexOf(a.column)==-1){a.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}else{return a}}},getLastFocused:function(){var c=this,a,b=c.lastFocused;if(b&&b.record&&b.column){a=b.view;if(a.dataSource.indexOf(b.record)!==-1&&a.getVisibleColumnManager().indexOf(b.column)!==-1){return b}}},onKeyUp:function(b){var a=b.view.walkRecs(b.record,-1);if(a){this.setPosition(a,this.columnIndex,b)}},onKeyDown:function(b){var a=b.record.isExpandingOrCollapsing?null:b.view.walkRecs(b.record,1);if(a){this.setPosition(a,this.columnIndex,b)}},onKeyRight:function(b){var a=this.move("right",b);if(a){this.setPosition(a,null,b)}},onKeyLeft:function(b){var a=this.move("left",b);if(a){this.setPosition(a,null,b)}},move:function(b,d){var c=this,a=c.getPosition();if(a&&a.record){return a.view.walkCells(a,b,null,c.preventWrap)}},onKeyPageDown:function(e){var d=this,a=e.view,f=d.getRowsVisible(),c,b;if(f){if(a.bufferedRenderer){c=Math.min(e.recordIndex+f,a.dataSource.getCount()-1);d.lastKeyEvent=e;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(e.record,f);d.setPosition(b,null,e)}}},onKeyPageUp:function(e){var d=this,a=e.view,f=d.getRowsVisible(),c,b;if(f){if(a.bufferedRenderer){c=Math.max(e.recordIndex-f,0);d.lastKeyEvent=e;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(e.record,-f);d.setPosition(b,null,e)}}},onKeyHome:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(0,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,0,c)}},afterBufferedScrollTo:function(b,a){this.setPosition(a,null,this.lastKeyEvent)},onKeyEnd:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(a.store.getCount()-1,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,a.dataSource.getCount()-1-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,c.view.getVisibleColumnManager().getColumns().length-1,c)}},getRowsVisible:function(){var e=false,a=this.view,d=a.all.first(),b,c;if(d){b=d.getHeight();c=a.el.getHeight();e=Math.floor(c/b)}return e},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{view:a.position.view,navigationModel:a,keyEvent:b||new Ext.event.Event({}),previousPosition:a.previousPosition,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,previousCell:a.previousCell,previousColumnIndex:a.previousColumnIndex,previousColumn:a.previousColumn,position:a.position,recordIndex:a.recordIndex,record:a.record,item:a.item,cell:a.cell,columnIndex:a.columnIndex,column:a.column})}},0,0,0,0,["view.navigation.grid"],0,[Ext.grid,"NavigationModel"],0));(Ext.cmd.derive("Ext.tree.NavigationModel",Ext.grid.NavigationModel,{initKeyNav:function(a){var b=this;Ext.grid.NavigationModel.prototype.initKeyNav.call(this,a);b.keyNav.map.addBinding([{key:"8",shift:true,handler:b.onAsterisk,scope:b},{key:Ext.event.Event.NUM_MULTIPLY,handler:b.onAsterisk,scope:b}])},onKeyLeft:function(d){var c=this,b=c.view,a=c.record;if(!a.isLeaf()&&a.isExpanded()){b.collapse(a)}else{a=a.parentNode;if(a&&!(a.isRoot()&&!b.rootVisible)){c.setPosition(a,null,d)}}},onKeyRight:function(c){var b=this,a=b.record;if(!a.isLeaf()){if(!a.isExpanded()){b.view.expand(a)}else{a=a.childNodes[0];if(a){b.setPosition(a)}}}},onKeyEnter:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else{Ext.grid.NavigationModel.prototype.onKeyEnter.call(this,a)}},onKeySpace:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else{Ext.grid.NavigationModel.prototype.onKeySpace.call(this,a)}},toggleCheck:function(a){this.view.onCheckChange(this.record)},onAsterisk:function(a){this.view.ownerCt.expandAll()}},0,0,0,0,["view.navigation.tree"],0,[Ext.tree,"NavigationModel"],0));(Ext.cmd.derive("Ext.tree.Panel",Ext.panel.Table,{alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",selType:"treemodel",treeCls:"x-tree-panel",rowLines:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:true,arrowCls:"x-tree-arrows",linesCls:"x-tree-lines",noLinesCls:"x-tree-no-lines",autoWidthCls:"x-autowidth-table",constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;Ext.panel.Table.prototype.constructor.call(this,a)},initComponent:function(){var d=this,b=[d.treeCls],c=d.store,a;if(d.useArrows){b.push(d.arrowCls);d.lines=false}if(d.lines){b.push(d.linesCls)}else{if(!d.useArrows){b.push(d.noLinesCls)}}if(Ext.isString(c)){c=d.store=Ext.StoreMgr.lookup(c)}else{if(!c||!c.isStore){c=Ext.apply({type:"tree",root:d.root,fields:d.fields,model:d.model,proxy:"memory",folderSort:d.folderSort},c);c=d.store=Ext.StoreMgr.lookup(c)}else{if(d.root){c=d.store=Ext.data.StoreManager.lookup(c);c.setRoot(d.root);if(d.folderSort!==undefined){c.folderSort=d.folderSort;c.sort()}}}}c.setRootVisible(d.rootVisible);if(!c.getRoot()){c.setRoot({})}d.viewConfig=Ext.apply({rootVisible:d.rootVisible,animate:d.enableAnimations,singleExpand:d.singleExpand,node:c.getRoot(),hideHeaders:d.hideHeaders,navigationModel:"tree"},d.viewConfig);if(!d.columns){if(d.initialConfig.hideHeaders===undefined){d.hideHeaders=true}d.addCls(d.autoWidthCls);d.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:d.displayField}]}if(d.cls){b.push(d.cls)}d.cls=b.join(" ");Ext.panel.Table.prototype.initComponent.call(this);a=d.getView();d.relayEvents(a,["checkchange","afteritemexpand","afteritemcollapse"])},getSelectionModel:function(){var a=Ext.panel.Table.prototype.getSelectionModel.call(this);a.treeStore=this.getStore();return a},bindStore:function(b,c){var d=this,a=b.getRoot(),e=d.bufferedRenderer;Ext.panel.Table.prototype.bindStore.apply(this,arguments);if(e){if(e.store){e.bindStore(b)}}else{e={xclass:"Ext.grid.plugin.BufferedRenderer"};Ext.copyTo(e,d,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer");d.bufferedRenderer=e=d.addPlugin(e)}b.singleExpand=d.singleExpand;d.storeListeners=d.mon(b,{destroyable:true,rootchange:d.onRootChange,scope:d});d.storeRelayers=d.relayEvents(b,["beforeload","load"]);d.rootRelayers=d.mon(a,{destroyable:true,append:d.createRelayer("itemappend"),remove:d.createRelayer("itemremove"),move:d.createRelayer("itemmove",[0,4]),insert:d.createRelayer("iteminsert"),beforeappend:d.createRelayer("beforeitemappend"),beforeremove:d.createRelayer("beforeitemremove"),beforemove:d.createRelayer("beforeitemmove"),beforeinsert:d.createRelayer("beforeiteminsert"),expand:d.createRelayer("itemexpand",[0,1]),collapse:d.createRelayer("itemcollapse",[0,1]),beforeexpand:d.createRelayer("beforeitemexpand",[0,1]),beforecollapse:d.createRelayer("beforeitemcollapse",[0,1])});if(!d.rootVisible&&!b.autoLoad&&!(a.isExpanded()||a.isLoading())){if(a.isLoaded()){a.data.expanded=true;b.onNodeExpand(a,a.childNodes)}else{a.data.expanded=false;a.expand()}}b.ownerTree=d;if(!c){d.view.setRootNode(a,true)}},unbindStore:function(){var b=this,a=b.store;if(a){Ext.panel.Table.prototype.unbindStore.call(this);Ext.destroy(b.storeListeners,b.storeRelayers,b.rootRelayers);delete a.ownerTree;a.singleExpand=null}},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandNode:function(b,a,d,c){return this.getView().expand(b,a,d,c||this)},collapseNode:function(b,a,d,c){return this.getView().collapse(b,a,d,c||this)},expandAll:function(e,c){var d=this,a=d.getRootNode(),b=d.enableAnimations;if(a){if(!b){Ext.suspendLayouts()}a.expand(true,e,c||d);if(!b){Ext.resumeLayouts(true)}}},collapseAll:function(f,d){var e=this,b=e.getRootNode(),c=e.enableAnimations,a=e.getView();if(b){if(!c){Ext.suspendLayouts()}d=d||e;if(a.rootVisible){b.collapse(true,f,d)}else{b.collapseChildren(true,f,d)}if(!c){Ext.resumeLayouts(true)}}},expandPath:function(k,e,a,f,j){var d=this,c=d.getRootNode(),b=1,h,g;e=e||d.getRootNode().idProperty;a=a||"/";if(Ext.isEmpty(k)){Ext.callback(f,j||d,[false,null]);return}h=k.split(a);if(c.get(e)!=h[1]){Ext.callback(f,j||d,[false,c]);return}g=function(){if(++b===h.length){Ext.callback(f,j||d,[true,c]);return}var l=c.findChild(e,h[b]);if(!l){Ext.callback(f,j||d,[false,c]);return}c=l;c.expand(false,g)};c.expand(false,g)},selectPath:function(j,d,a,f,h){var b=this,c,g,e;d=d||b.getRootNode().idProperty;a=a||"/";g=j.split(a);e=g.pop();if(g.length>1){b.expandPath(g.join(a),d,a,function(m,l){var k=l;if(m&&l){l=l.findChild(d,e);if(l){b.getSelectionModel().select(l);Ext.callback(f,h||b,[true,l]);return}}Ext.callback(f,h||b,[false,k])},b)}else{c=b.getRootNode();if(c.getId()===e){b.getSelectionModel().select(c);Ext.callback(f,h||b,[true,c])}else{Ext.callback(f,h||b,[false,null])}}}},1,["treepanel"],["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},["widget.treepanel"],0,[Ext.tree,"Panel",Ext.tree,"TreePanel",Ext,"TreePanel"],0));Ext.define("FBEditor.override.tree.Panel",{override:"Ext.tree.Panel"});(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var a=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);a.xclass="Ext.resizer.BorderSplitterTracker";return a}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(l,b,v){var t=this,c=t.axisProps[v],q=!c.horizontal,k=c.sizeProp,o=0,a=l.childItems,f=a.length,s,p,n,g,r,e,j,m,d,u,h;for(p=0;p<f;++p){n=a[p];r=n.target;n.layoutPos={};if(r.region){n.region=e=r.region;n.isCenter=r.isCenter;n.isHorz=r.isHorz;n.isVert=r.isVert;n.weight=r.weight||t.regionWeights[e]||0;r.weight=n.weight;b[r.id]=n;if(r.isCenter){s=n;g=r.flex;l.centerRegion=s;continue}if(q!==n.isVert){continue}n.reverseWeighting=(e==c.borderEnd);m=r[k];d=typeof m;if(!r.collapsed){if(d=="string"&&(j=t.percentageRe.exec(m))){n.percentage=parseInt(j[1],10)}else{if(r.flex){o+=n.flex=r.flex}}}}}if(s){u=s.target;if((h=u.placeholderFor)){if(!g&&q===h.collapsedVertical()){g=0;s.collapseAxis=v}}else{if(u.collapsed&&(q===u.collapsedVertical())){g=0;s.collapseAxis=v}}}if(g==null){g=1}o+=g;return Ext.apply({before:q?"top":"left",totalFlex:o},c)},beginLayout:function(d){var k=this,j=k.getLayoutItems(),e=k.padding,l=typeof e,o=false,p,n,b,g,f,a,c,h,m;if(e){if(l=="string"||l=="number"){e=Ext.util.Format.parseBox(e)}}else{e=d.getEl("getTargetEl").getPaddingInfo();o=true}d.outerPad=e;d.padOnContainer=o;for(g=0,b=j.length;g<b;++g){n=j[g];a=k.getSplitterTarget(n);if(a){c=undefined;h=!!n.hidden;if(!a.split){if(a.isCollapsingOrExpanding){c=!!a.collapsed}}else{if(h!==a.hidden){c=!a.hidden}}if(c){n.show()}else{if(c===false){n.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);j=d.childItems;b=j.length;f={};d.borderAxisHorz=k.beginAxis(d,f,"horz");d.borderAxisVert=k.beginAxis(d,f,"vert");for(g=0;g<b;++g){p=j[g];a=k.getSplitterTarget(p.target);if(a){m=f[a.id];if(!m){m=d.getEl(a.el,k);m.region=a.region}p.collapseTarget=a=m;p.weight=a.weight;p.reverseWeighting=a.reverseWeighting;a.splitter=p;p.isHorz=a.isHorz;p.isVert=a.isVert}}k.sortWeightedItems(j,"reverseWeighting");k.setupSplitterNeighbors(j)},calculate:function(d){var l=this,a=l.getContainerSize(d),h=d.childItems,c=h.length,b=d.borderAxisHorz,j=d.borderAxisVert,e=d.outerPad,n=d.padOnContainer,g,p,k,o,m,f;b.begin=e[l.padOnContainerProp];j.begin=e.top;m=b.end=b.flexSpace=a.width+(n?e[l.padOnContainerProp]:-e[l.padNotOnContainerProp]);f=j.end=j.flexSpace=a.height+(n?e.top:-e.bottom);for(g=0;g<c;++g){p=h[g];k=p.getMarginInfo();if(p.isHorz||p.isCenter){b.addUnflexed(k.width);m-=k.width}if(p.isVert||p.isCenter){j.addUnflexed(k.height);f-=k.height}if(!p.flex&&!p.percentage){if(p.isHorz||(p.isCenter&&p.collapseAxis==="horz")){o=p.getProp("width");b.addUnflexed(o);if(p.collapseTarget){m-=o}}else{if(p.isVert||(p.isCenter&&p.collapseAxis==="vert")){o=p.getProp("height");j.addUnflexed(o);if(p.collapseTarget){f-=o}}}}}for(g=0;g<c;++g){p=h[g];k=p.getMarginInfo();if(p.percentage){if(p.isHorz){o=Math.ceil(m*p.percentage/100);o=p.setWidth(o);b.addUnflexed(o)}else{if(p.isVert){o=Math.ceil(f*p.percentage/100);o=p.setHeight(o);j.addUnflexed(o)}}}}for(g=0;g<c;++g){p=h[g];if(!p.isCenter){l.calculateChildAxis(p,b);l.calculateChildAxis(p,j)}}if(l.finishAxis(d,j)+l.finishAxis(d,b)<2){l.done=false}else{l.finishPositions(h)}},calculateChildAxis:function(l,c){var a=l.collapseTarget,g="set"+c.sizePropCap,e=c.sizeProp,d=l.getMarginInfo()[e],j,b,f,h,k;if(a){j=a.region}else{j=l.region;f=l.flex}b=j==c.borderBegin;if(!b&&j!=c.borderEnd){l[g](c.end-c.begin-d);h=c.begin}else{if(f){k=Math.ceil(c.flexSpace*(f/c.totalFlex));k=l[g](k)}else{if(l.percentage){k=l.peek(e)}else{k=l.getProp(e)}}k+=d;if(b){h=c.begin;c.begin+=k}else{c.end=h=c.end-k}}l.layoutPos[c.posProp]=h},eachItem:function(g,d,c){var f=this,a=f.getLayoutItems(),b=0,e;if(Ext.isFunction(g)){d=g;c=d}for(b;b<a.length;b++){e=a[b];if(!g||e.region===g){if(d.call(c,e)===false){break}}}},finishAxis:function(d,c){var b=c.end-c.begin,a=d.centerRegion;if(a){a["set"+c.sizePropCap](b-a.getMarginInfo()[c.sizeProp]);a.layoutPos[c.posProp]=c.begin}return Ext.isNumber(b)?1:0},finishPositions:function(e){var c=e.length,b,a,d=this.horzPositionProp;for(b=0;b<c;++b){a=e[b];a.setProp("x",a.layoutPos.x+a.marginInfo[d]);a.setProp("y",a.layoutPos.y+a.marginInfo.top)}},getLayoutItems:function(){var a=this.owner,e=(a&&a.items&&a.items.items)||[],d=e.length,b=[],c=0,f,g;for(;c<d;c++){f=e[c];g=f.placeholderFor;if(f.hidden||((!f.floated||f.isCollapsingOrExpanding===2)&&!(g&&g.isCollapsingOrExpanding===2))){b.push(f)}}return b},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,true)},getMinMaxWeight:function(d,a){var b=this,c=null;b.eachItem(d,function(e){if(e.hasOwnProperty("weight")){if(c===null){c=e.weight;return}if((a&&e.weight<c)||e.weight>c){c=e.weight}}},this);return c},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},insertSplitter:function(d,c,f,b){var g=d.region,e=Ext.apply({xtype:"bordersplitter",collapseTarget:d,id:d.id+"-splitter",hidden:f,canResize:d.splitterResize!==false,splitterFor:d,synthetic:true},b),a=c+((g==="south"||g==="east")?0:1);if(d.collapseMode==="mini"){e.collapsedCls=d.collapsedCls}d.splitter=this.owner.add(a,e)},getMoveAfterIndex:function(b){var a=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(b.splitter){a++}return a},moveItemBefore:function(b,d){var a=this.owner,c;if(d&&d.splitter){c=d.region;if(c==="south"||c==="east"){d=d.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,b,d)},onAdd:function(j,d){var f=this,c=j.placeholderFor,h=j.region,e,g,a,b;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(h){Ext.apply(j,f.regionFlags[h]);if(j.initBorderRegion){j.initBorderRegion()}e=h==="center";if(e){f.centerRegion=j}else{g=j.split;a=!!j.hidden;if(typeof g==="object"){b=g;g=true}if((j.isHorz||j.isVert)&&(g||j.collapseMode=="mini")){f.insertSplitter(j,d,a||!g,b)}}if(!e&&!j.hasOwnProperty("collapseMode")){j.collapseMode=f.panelCollapseMode}if(!j.hasOwnProperty("animCollapse")){if(j.collapseMode!=="placeholder"){j.animCollapse=false}else{j.animCollapse=f.panelCollapseAnimate}}}else{if(c){Ext.apply(j,f.regionFlags[c.region]);j.region=c.region;j.weight=c.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(b,d){var e=this,h=b.region,f=b.splitter,a=e.owner,g=a.destroying,c;if(h){if(b.isCenter){e.centerRegion=null}delete b.isCenter;delete b.isHorz;delete b.isVert;if(f&&!a.destroying){a.doRemove(f,true)}delete b.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!g&&!d&&b.rendered){c=b.getEl();if(c){c.setStyle("top","");c.setStyle(e.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(l){var o={},e=l.length,n=this.touchedRegions,g,f,a,k,d,h,m,b,c;for(g=0;g<e;++g){h=l[g].target;m=h.region;if(h.isCenter){a=h}else{if(m){c=n[m];for(f=0,k=c.length;f<k;++f){d=o[c[f]];if(d){d.neighbors.push(h)}}if(h.placeholderFor){b=h.placeholderFor.splitter}else{b=h.splitter}if(b){b.neighbors=[]}o[m]=b}}}if(a){c=n.center;for(f=0,k=c.length;f<k;++f){d=o[c[f]];if(d){d.neighbors.push(a)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e){var d=this,a=this.sizePolicies,c,b,f,g;if(e.isCenter){g=e.placeholderFor;if(g){if(g.collapsedVertical()){return a.vert}return a.horz}if(e.collapsed){if(e.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}c=e.collapseTarget;if(c){return c.isVert?a.vert:a.horz}if(e.region){if(e.isVert){b=e.height;f=a.vert}else{b=e.width;f=a.horz}if(e.flex||(typeof b=="string"&&d.percentageRe.test(b))){return a.flexAll}return f}return d.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var a={addUnflexed:function(c){this.flexSpace=Math.max(this.flexSpace-c,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)}));(Ext.cmd.derive("Ext.layout.container.Card",Ext.layout.container.Fit,{alternateClassName:"Ext.layout.CardLayout",type:"card",hideInactive:true,deferredRender:false,getRenderTree:function(){var a=this,b=a.getActiveItem();if(b){if(b.hasListeners.beforeactivate&&b.fireEvent("beforeactivate",b)===false){b=a.activeItem=a.owner.activeItem=null}else{if(b.hasListeners.activate){b.on({boxready:function(){b.fireEvent("activate",b)},single:true})}}if(a.deferredRender){if(b){return a.getItemsRenderTree([b])}}else{return Ext.layout.container.Fit.prototype.getRenderTree.apply(this,arguments)}}},renderChildren:function(){var a=this,b=a.getActiveItem();if(!a.deferredRender){Ext.layout.container.Fit.prototype.renderChildren.call(this)}else{if(b){a.renderItems([b],a.getRenderTarget())}}},isValidParent:function(c,d,a){var b=c.el?c.el.dom:Ext.getDom(c);return(b&&b.parentNode===(d.dom||d))||false},getActiveItem:function(){var b=this,a=b.parseActiveItem(b.activeItem||(b.owner&&b.owner.activeItem));if(a&&b.owner.items.indexOf(a)!=-1){b.activeItem=a}else{b.activeItem=null}return b.activeItem},parseActiveItem:function(a){if(a&&a.isComponent){return a}else{if(typeof a=="number"||a===undefined){return this.getLayoutItems()[a||0]}else{return this.owner.getComponent(a)}}},configureItem:function(a){if(a===this.getActiveItem()){a.hidden=false}else{a.hidden=true}Ext.layout.container.Fit.prototype.configureItem.apply(this,arguments)},onRemove:function(a){Ext.layout.container.Fit.prototype.onRemove.apply(this,arguments);if(a===this.activeItem){this.activeItem=null}},getAnimation:function(b,a){var c=(b||{}).cardSwitchAnimation;if(c===false){return false}return c||a.cardSwitchAnimation},getNext:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b+1]||(c?a[0]:false)},next:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getNext(a),b)},getPrev:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b-1]||(c?a[a.length-1]:false)},prev:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getPrev(a),b)},setActiveItem:function(b){var e=this,a=e.owner,d=e.activeItem,f=a.rendered,c;b=e.parseActiveItem(b);c=a.items.indexOf(b);if(c==-1){c=a.items.items.length;Ext.suspendLayouts();b=a.add(b);Ext.resumeLayouts()}if(b&&d!=b){if(b.fireEvent("beforeactivate",b,d)===false){return false}if(d&&d.fireEvent("beforedeactivate",d,b)===false){return false}if(f){Ext.suspendLayouts();if(!b.rendered){e.renderItem(b,e.getRenderTarget(),a.items.length)}if(d){if(e.hideInactive){d.hide();d.hiddenByLayout=true}d.fireEvent("deactivate",d,b)}if(b.hidden){b.show()}if(!b.hidden){e.activeItem=b}Ext.resumeLayouts(true)}else{e.activeItem=b}b.fireEvent("activate",b,d);return e.activeItem}return false}},0,0,0,0,["layout.card"],0,[Ext.layout.container,"Card",Ext.layout,"CardLayout"],0));(Ext.cmd.derive("Ext.tab.Tab",Ext.button.Button,{isTab:true,tabIndex:-1,baseCls:"x-tab",closeElOverCls:"x-tab-close-btn-over",closeElPressedCls:"x-tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:true,closeText:"Close Tab",active:false,childEls:["closeEl"],scale:false,ariaRole:"tab",_btnWrapCls:"x-tab-wrap",_btnCls:"x-tab-button",_baseIconCls:"x-tab-icon-el",_glyphCls:"x-tab-glyph",_innerCls:"x-tab-inner",_textCls:"x-tab-text",_noTextCls:"x-tab-no-text",_hasIconCls:"x-tab-icon",_activeCls:"x-tab-active",_closableCls:"x-tab-closable",overCls:"x-tab-over",_pressedCls:"x-tab-pressed",_disabledCls:"x-tab-disabled",_rotateClasses:{1:"x-tab-rotate-right",2:"x-tab-rotate-left"},_positions:{top:{"default":"top",0:"top",1:"left",2:"right"},right:{"default":"top",0:"right",1:"top",2:"bottom"},bottom:{"default":"bottom",0:"bottom",1:"right",2:"left"},left:{"default":"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var a=this;if(a.card){a.setCard(a.card)}Ext.button.Button.prototype.initComponent.apply(this,arguments)},getActualRotation:function(){var a=this.getRotation();return(a!=="default")?a:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var f=this,b=f._positions,a=f._rotateClasses,c=f.getTabPosition(),j=f.getActualRotation(),h=f._rotateCls,d=f._rotateCls=a[j],e=f._positionCls,g=f._positionCls=f._positions[c][j];if(h!==d){if(h){f.removeCls(h)}if(d){f.addCls(d)}}if(e!==g){if(e){f.removeClsWithUI(e)}if(g){f.addClsWithUI(g)}if(f.rendered){f.updateFrame()}}if(f.rendered){f.setElOrientation()}},onAdded:function(b,c,a){Ext.button.Button.prototype.onAdded.call(this,b,c,a);this.syncRotationAndPosition()},getTemplateArgs:function(){var b=this,a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.closable=b.closable;a.closeText=b.closeText;return a},beforeRender:function(){var b=this,a=b.up("tabbar"),c=b.up("tabpanel");Ext.button.Button.prototype.beforeRender.call(this);if(b.active){b.addCls(b._activeCls)}b.syncClosableCls();if(!b.minWidth){b.minWidth=(a)?a.minTabWidth:b.minWidth;if(!b.minWidth&&c){b.minWidth=c.minTabWidth}if(b.minWidth&&b.iconCls){b.minWidth+=25}}if(!b.maxWidth){b.maxWidth=(a)?a.maxTabWidth:b.maxWidth;if(!b.maxWidth&&c){b.maxWidth=c.maxTabWidth}}},onRender:function(){var a=this;a.setElOrientation();Ext.button.Button.prototype.onRender.apply(this,arguments);if(a.closable){a.closeEl.addClsOnOver(a.closeElOverCls);a.closeEl.addClsOnClick(a.closeElPressedCls)}a.initKeyNav()},initKeyNav:function(){var a=this;a.keyNav=new Ext.util.KeyNav(a.el,{enter:a.onEnterKey,del:a.onDeleteKey,scope:a})},setElOrientation:function(){var c=this,a=c.getActualRotation(),b=c.el;if(a){b.setVertical(a===1?90:270)}else{b.setHorizontal()}},enable:function(a){var b=this;Ext.button.Button.prototype.enable.apply(this,arguments);b.removeCls(b._disabledCls);return b},disable:function(a){var b=this;Ext.button.Button.prototype.disable.apply(this,arguments);b.addCls(b._disabledCls);return b},onDestroy:function(){var a=this;Ext.destroy(a.keyNav);delete a.keyNav;Ext.button.Button.prototype.onDestroy.apply(this,arguments)},setClosable:function(a){var b=this;a=(!arguments.length||!!a);if(b.closable!=a){b.closable=a;if(b.card){b.card.closable=a}b.syncClosableCls();if(b.rendered){b.syncClosableElements();b.updateLayout()}}},syncClosableElements:function(){var a=this,b=a.closeEl;if(a.closable){if(!b){b=a.closeEl=a.btnWrap.insertSibling({tag:"a",role:"presentation",cls:a.baseCls+"-close-btn",href:"#",title:a.closeText},"after")}b.addClsOnOver(a.closeElOverCls);b.addClsOnClick(a.closeElPressedCls)}else{if(b){b.destroy();delete a.closeEl}}},syncClosableCls:function(){var b=this,a=b._closableCls;if(b.closable){b.addCls(a)}else{b.removeCls(a)}},setCard:function(a){var b=this;b.card=a;if(a.iconAlign){b.setIconAlign(a.iconAlign)}if(a.textAlign){b.setTextAlign(a.textAlign)}b.setText(b.title||a.title);b.setIconCls(b.iconCls||a.iconCls);b.setIcon(b.icon||a.icon);b.setGlyph(b.glyph||a.glyph)},onCloseClick:function(){var a=this;if(a.fireEvent("beforeclose",a)!==false){if(a.tabBar){if(a.tabBar.closeTab(a)===false){return}}else{a.fireClose()}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(b){var a=this;if(a.tabBar){a.tabBar.onClick(b,a.el)}},onDeleteKey:function(a){if(this.closable){this.onCloseClick()}},afterClick:function(a){if(!a){this.focus()}},activate:function(b){var a=this;a.active=true;a.addCls(a._activeCls);if(b!==true){a.fireEvent("activate",a)}},deactivate:function(b){var a=this;a.active=false;a.removeCls(a._activeCls);if(b!==true){a.fireEvent("deactivate",a)}},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(a){this.el=new Ext.dom.Element(a)}}},0,["tab"],["component","box","button","tab"],{component:true,box:true,button:true,tab:true},["widget.tab"],0,[Ext.tab,"Tab"],0));(Ext.cmd.derive("Ext.layout.component.Body",Ext.layout.component.Auto,{type:"body",beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.bodyContext=a.getEl("body")},beginLayoutCycle:function(d,b){var c=this,f=c.lastWidthModel,e=c.lastHeightModel,a=c.owner.body;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(f&&f.fixed&&d.widthModel.shrinkWrap){a.setWidth(null)}if(e&&e.fixed&&d.heightModel.shrinkWrap){a.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(c,b){var a=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments);if(c.targetContext!=c){a+=c.getPaddingInfo().height}return a},calculateOwnerWidthFromContentWidth:function(c,a){var b=Ext.layout.component.Auto.prototype.calculateOwnerWidthFromContentWidth.apply(this,arguments);if(c.targetContext!=c){b+=c.getPaddingInfo().width}return b},measureContentWidth:function(a){return a.bodyContext.setWidth(a.bodyContext.el.dom.offsetWidth,false)},measureContentHeight:function(a){return a.bodyContext.setHeight(a.bodyContext.el.dom.offsetHeight,false)},publishInnerHeight:function(c,a){var d=a-c.getFrameInfo().height,b=c.targetContext;if(b!=c){d-=c.getPaddingInfo().height}return c.bodyContext.setHeight(d,!c.heightModel.natural)},publishInnerWidth:function(d,c){var a=c-d.getFrameInfo().width,b=d.targetContext;if(b!=d){a-=d.getPaddingInfo().width}d.bodyContext.setWidth(a,!d.widthModel.natural)}},0,0,0,0,["layout.body"],0,[Ext.layout.component,"Body"],0));(Ext.cmd.derive("Ext.tab.Bar",Ext.panel.Bar,{baseCls:"x-tab-bar",componentLayout:"body",isTabBar:true,config:{tabRotation:"default",tabStretchMax:true},defaultType:"tab",plain:false,ariaRole:"tablist",childEls:["body","strip"],_stripCls:"x-tab-bar-strip",_baseBodyCls:"x-tab-bar-body",renderTpl:'<div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} {bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>{%this.renderContainer(out,values)%}</div><div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:"right",right:"left"},_layoutAlign:{top:"end",right:"begin",bottom:"begin",left:"end"},initComponent:function(){var e=this,a=e.initialConfig.layout,c=a&&a.align,b=a&&a.overflowHandler,d;if(e.plain){e.addCls(e.baseCls+"-plain")}Ext.panel.Bar.prototype.initComponent.call(this);e.setLayout({align:c||(e.getTabStretchMax()?"stretchmax":e._layoutAlign[e.dock]),overflowHandler:b||"scroller"});e.on({click:e.onClick,element:"el",scope:e})},initRenderData:function(){var a=this;return Ext.apply(Ext.panel.Bar.prototype.initRenderData.call(this),{bodyCls:a.bodyCls,baseBodyCls:a._baseBodyCls,bodyTargetCls:a.bodyTargetCls,stripCls:a._stripCls,dock:a.dock})},setDock:function(g){var f=this,a=f.items,c=f.ownerCt,e,b,d;a=a&&a.items;if(a){for(b=0,d=a.length;b<d;b++){e=a[b];if(e.isTab){e.setTabPosition(g)}}}if(f.rendered){f.resetItemMargins();if(c&&c.isHeader){c.resetItemMargins()}f.needsScroll=true}Ext.panel.Bar.prototype.setDock.call(this,g)},updateTabRotation:function(f){var e=this,a=e.items,b,d,c;a=a&&a.items;if(a){for(b=0,d=a.length;b<d;b++){c=a[b];if(c.isTab){c.setRotation(f)}}}if(e.rendered){e.resetItemMargins();e.needsScroll=true;e.updateLayout()}},onRender:function(){var a=this;Ext.panel.Bar.prototype.onRender.call(this);if(Ext.isIE8&&a.vertical){a.el.on({mousemove:a.onMouseMove,scope:a})}},afterLayout:function(){this.adjustTabPositions();Ext.panel.Bar.prototype.afterLayout.apply(this,arguments)},adjustTabPositions:function(){var a=this.items.items,d=a.length,f,b,e,c;if(!Ext.isIE8){while(d--){f=a[d];e=f.el;b=f.lastBox;c=f.isTab?f.getActualRotation():0;if(c===1&&f.isVisible()){e.setStyle("left",(b.x+b.width)+"px")}else{if(c===2&&f.isVisible()){e.setStyle("left",(b.x-b.height)+"px")}}}}},onAdded:function(b,c,a){if(b.isHeader){this.addCls(b.baseCls+"-"+b.ui+"-tab-bar")}Ext.panel.Bar.prototype.onAdded.call(this,b,c,a)},onRemove:function(a){var b=this;if(a===b.previousTab){b.previousTab=null}Ext.panel.Bar.prototype.onRemove.apply(this,arguments)},onRemoved:function(b){var a=this.ownerCt;if(a.isHeader){this.removeCls(a.baseCls+"-"+a.ui+"-tab-bar")}Ext.panel.Bar.prototype.onRemoved.call(this,b)},afterComponentLayout:function(c){var d=this,b=d.needsScroll,a=d.layout.overflowHandler;Ext.panel.Bar.prototype.afterComponentLayout.apply(this,arguments);if(a&&b&&d.tooNarrow&&a.scrollToItem){a.scrollToItem(d.activeTab)}delete d.needsScroll},onMouseMove:function(f){var d=this,b=d._overTab,a,c;if(f.getTarget(".x-box-scroller")){return}a=d.getTabInfoFromPoint(f.getXY());c=a.tab;if(c!==b){if(b&&b.rendered){b.onMouseLeave(f);d._overTab=null}if(c){c.onMouseEnter(f);d._overTab=c;if(!c.disabled){d.el.setStyle("cursor","pointer")}}else{d.el.setStyle("cursor","default")}}},onMouseLeave:function(b){var a=this._overTab;if(a&&a.rendered){a.onMouseLeave(b)}},getTabInfoFromPoint:function(f){var z=this,v=z.items.items,e=v.length,n=z.layout.innerCt,t=n.getXY(),s=new Ext.util.Point(f[0],f[1]),u=0,w,b,a,o,x,h,g,d,q,k,j,m,l,r,p,y,c;for(;u<e;u++){c=v[u];w=c.lastBox;if(!w||!c.isTab){continue}k=t[0]+w.x;j=t[1]-n.dom.scrollTop+w.y;m=w.width;l=w.height;b=new Ext.util.Region(j,k+m,j+l,k);if(b.contains(s)){a=c.closeEl;if(a){if(z._isTabReversed===undefined){z._isTabReversed=p=(c.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")!==-1)}y=p?this._reverseDockNames[z.dock]:z.dock;d=a.getWidth();q=a.getHeight();x=z.getCloseXY(a,k,j,m,l,d,q,y);h=x[0];g=x[1];r=new Ext.util.Region(g,h+d,g+q,h);o=r.contains(s)}break}}return{tab:c,close:o}},getCloseXY:function(c,k,h,f,l,j,d,g){var e=c.getXY(),b,a;if(g==="right"){b=k+f-((e[1]-h)+d);a=h+(e[0]-k)}else{b=k+(e[1]-h);a=h+k+l-e[0]-j}return[b,a]},closeTab:function(c){var d=this,b=c.card,e=d.tabPanel,a;if(b&&b.fireEvent("beforeclose",b)===false){return false}a=d.findNextActivatable(c);Ext.suspendLayouts();if(e&&b){delete c.ownerCt;b.fireEvent("close",b);e.remove(b);if(!e.getComponent(b)){c.fireClose();d.remove(c)}else{c.ownerCt=d;Ext.resumeLayouts(true);return false}}if(a){if(e){e.setActiveTab(a.card)}else{d.setActiveTab(a)}a.focus()}Ext.resumeLayouts(true)},findNextActivatable:function(a){var b=this;if(a.active&&b.items.getCount()>1){return(b.previousTab&&b.previousTab!==a&&!b.previousTab.disabled)?b.previousTab:(a.next("tab[disabled=false]")||a.prev("tab[disabled=false]"))}},setActiveTab:function(b,a){var c=this;if(!b.disabled&&b!==c.activeTab){if(c.activeTab){if(c.activeTab.isDestroyed){c.previousTab=null}else{c.previousTab=c.activeTab;c.activeTab.deactivate()}}b.activate();c.activeTab=b;c.needsScroll=true;if(!a){c.fireEvent("change",c,b,b.card);c.updateLayout()}}},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(g,f){var d=this,j=d.tabPanel,h,c,b,a;if(g.getTarget(".x-box-scroller")){return}if(Ext.isIE8&&d.vertical){a=d.getTabInfoFromPoint(g.getXY());c=a.tab;b=a.close}else{h=g.getTarget("."+Ext.tab.Tab.prototype.baseCls);c=h&&Ext.getCmp(h.id);b=c&&c.closeEl&&(f===c.closeEl.dom)}if(b){g.preventDefault()}if(c&&c.isDisabled&&!c.isDisabled()){if(c.closable&&b){c.onCloseClick()}else{d.doActivateTab(c)}c.afterClick(b)}},doActivateTab:function(a){var b=this.tabPanel;if(b){b.setActiveTab(a.card)}else{this.setActiveTab(a)}},beforeFocusableChildFocus:function(d,c){var b=this,a=b.mixins.focusablecontainer;a.beforeFocusableChildFocus.call(b,d,c);if(!d.active){d.activate()}b.doActivateTab(d)}}},0,["tabbar"],["component","box","container","tabbar"],{component:true,box:true,container:true,tabbar:true},["widget.tabbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.tab,"Bar"],0));(Ext.cmd.derive("Ext.tab.Panel",Ext.panel.Panel,{alternateClassName:["Ext.TabPanel"],config:{tabBar:undefined,tabPosition:"top",tabRotation:"default",tabStretchMax:true},removePanelHeader:true,plain:false,itemCls:"x-tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var g=this,a=g.activeTab||(g.activeTab=0),j=g.getTabPosition(),f=g.getTabRotation(),h=g.dockedItems,e=g.header,b=g.tabBarHeaderPosition,c=g.getTabBar(),d;g.layout=new Ext.layout.container.Card(Ext.apply({owner:g,deferredRender:g.deferredRender,itemCls:g.itemCls,activeItem:a},g.layout));if(b!=null){if(!e){e=g.header={}}d=e.items=(e.items?e.items.slice():[]);e.itemPosition=b;d.push(c);e.hasTabBar=true}else{h=[].concat(g.dockedItems||[]);h.push(c);g.dockedItems=h}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a=g.activeTab=g.getComponent(a);if(a){c.setActiveTab(a.tab,true)}},onRender:function(){var b=this.items.items,a=b.length,c;Ext.panel.Panel.prototype.onRender.apply(this,arguments);for(c=0;c<a;++c){b[c].getBind()}},setActiveTab:function(a){var c=this,b;a=c.getComponent(a);if(a){b=c.getActiveTab();if(b===a||c.fireEvent("beforetabchange",c,a,b)===false){return false}if(!a.isComponent){Ext.suspendLayouts();a=c.add(a);Ext.resumeLayouts()}c.activeTab=a;Ext.suspendLayouts();c.layout.setActiveItem(a);a=c.activeTab=c.layout.getActiveItem();if(a&&a!==b){c.tabBar.setActiveTab(a.tab);Ext.resumeLayouts(true);if(b!==a){c.fireEvent("tabchange",c,a,b)}}else{Ext.resumeLayouts(true)}return a}},setActiveItem:function(a){return this.setActiveTab(a)},getActiveTab:function(){var b=this,a=b.getComponent(b.activeTab);if(a&&b.items.indexOf(a)!=-1){b.activeTab=a}else{b.activeTab=null}return b.activeTab},applyTabBar:function(a){var c=this,b=(c.tabBarHeaderPosition!=null)?c.getHeaderPosition():c.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:c.ui,dock:b,tabRotation:c.getTabRotation(),vertical:(b=="left"||b=="right"),plain:c.plain,tabStretchMax:c.getTabStretchMax(),tabPanel:c},a))},updateHeaderPosition:function(c,b){var a=this.getTabBar();if(a&&(this.tabBarHeaderPosition!=null)){a.setDock(c)}Ext.panel.Panel.prototype.updateHeaderPosition.call(this,c,b)},updateTabPosition:function(b){var a=this.getTabBar();if(a&&(this.tabBarHeaderPosition==null)){a.setDock(b)}},updateTabRotation:function(b){var a=this.getTabBar();if(a){a.setTabRotation(b)}},onAdd:function(f,d){var e=this,c=Ext.apply({},f.tabConfig),b=e.getTabBar(),a={xtype:"tab",title:f.title,icon:f.icon,iconCls:f.iconCls,glyph:f.glyph,ui:b.ui,card:f,disabled:f.disabled,closable:f.closable,hidden:f.hidden&&!f.hiddenByLayout,tooltip:f.tooltip,tabBar:b,tabPosition:b.dock,rotation:b.getTabRotation()};if(f.closeText!==undefined){a.closeText=f.closeText}c=Ext.applyIf(c,a);f.tab=e.tabBar.insert(d,c);f.on({scope:e,enable:e.onItemEnable,disable:e.onItemDisable,beforeshow:e.onItemBeforeShow,iconchange:e.onItemIconChange,iconclschange:e.onItemIconClsChange,glyphchange:e.onItemGlyphChange,titlechange:e.onItemTitleChange});if(f.isPanel){if(e.removePanelHeader){if(f.rendered){if(f.header){f.header.hide()}}else{f.header=false}}if(f.isPanel&&e.border){f.setBorder(false)}}if(e.rendered){f.getBind()}},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab){this.setActiveTab(a);return false}},onItemGlyphChange:function(a,b){a.tab.setGlyph(b)},onItemIconChange:function(b,a){b.tab.setIcon(a)},onItemIconClsChange:function(b,a){b.tab.setIconCls(a)},onItemTitleChange:function(a,b){a.tab.setText(b)},onRemove:function(b,c){var a=this;b.un({scope:a,enable:a.onItemEnable,disable:a.onItemDisable,beforeshow:a.onItemBeforeShow,iconchange:a.onItemIconChange,iconclschange:a.onItemIconClsChange,glyphchange:a.onItemGlyphChange,titlechange:a.onItemTitleChange});if(b.tab&&!a.destroying&&b.tab.ownerCt===a.tabBar){a.tabBar.remove(b.tab)}},privates:{doRemove:function(d,b){var c=this,a;if(c.removingAll||c.destroying||c.items.getCount()==1){c.activeTab=null}else{if(d.tab&&(a=c.tabBar.items.indexOf(c.tabBar.findNextActivatable(d.tab)))!==-1){c.setActiveTab(a)}}Ext.panel.Panel.prototype.doRemove.apply(this,arguments);if(d.tab){delete d.tab.card;delete d.tab}}}},0,["tabpanel"],["component","box","container","panel","tabpanel"],{component:true,box:true,container:true,panel:true,tabpanel:true},["widget.tabpanel"],0,[Ext.tab,"Panel",Ext,"TabPanel"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(a,b){this.comp=a;this.initialConstrainTo=b.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,b)},onStart:function(c){var b=this,a=b.comp;b.startPosition=a.getXY();if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}if(a.beginDrag){a.beginDrag()}},calculateConstrainRegion:function(){var h=this,f=h.comp,g=h.initialConstrainTo,e=f.constraintInsets,j,b,d,c=h.proxy?h.proxy.el:f.el,a=(!h.constrainDelegate&&c.shadow&&f.constrainShadow&&!c.shadowDisabled)?c.shadow.getShadowSize():0;if(!(g instanceof Ext.util.Region)){j=Ext.fly(g);g=j.getViewRegion();g.right=g.left+j.dom.clientWidth}else{g=g.copy()}if(e){e=Ext.isObject(e)?e:Ext.Element.parseBox(e);g.adjust(e.top,e.right,e.bottom,e.length)}if(a){g.adjust(a[0],-a[1],-a[2],a[3])}if(!h.constrainDelegate){b=Ext.fly(h.dragTarget).getRegion();d=c.getRegion();g.adjust(b.top-d.top,b.right-d.right,b.bottom-d.bottom,b.left-d.left)}return g},onDrag:function(c){var b=this,a=(b.proxy&&!b.comp.liveDrag)?b.proxy:b.comp,d=b.getOffset(b.constrain||b.constrainDelegate?"dragTarget":null);a.setPagePosition(b.startPosition[0]+d[0],b.startPosition[1]+d[1])},onEnd:function(b){var a=this.comp;if(a.isDestroyed||a.destroying){return}if(this.proxy&&!a.liveDrag){a.unghost()}if(a.endDrag){a.endDrag()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:"x-window-item",initialAlphaNum:/^[a-z0-9]/,overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var a=this;a.frame=false;Ext.panel.Panel.prototype.initComponent.call(this);if(a.plain){a.addClsWithUI("plain")}a.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var b=this,a;a=Ext.panel.Panel.prototype.getElConfig.call(this);a.tabIndex=-1;return a},getState:function(){var b=this,d=Ext.panel.Panel.prototype.getState.call(this)||{},a=!!b.maximized,c=b.ghostBox,e;d.maximized=a;if(a){e=b.restorePos}else{if(c){e=[c.x,c.y]}else{e=b.getPosition()}}Ext.apply(d,{size:a?b.restoreSize:b.getSize(),pos:e});return d},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onRender:function(b,a){var c=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);c.focusable=!!c.getFocusEl();if(c.maximizable){c.header.on({scope:c,dblclick:c.toggleMaximize})}},afterRender:function(){var a=this,c=a.header,b;if(a.maximized){a.maximized=false;a.maximize();if(c){c.removeCls(c.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);if(a.closable){b=a.getKeyMap();b.on(27,a.onEsc,a)}else{b=a.keyMap}if(b&&a.hidden){b.disable()}},onEsc:function(a,c){var b=Ext.FocusManager;if(!Ext.enableFocusManager||b.focusedCmp===this){c.stopEvent();this.close()}},beforeDestroy:function(){var a=this;if(a.rendered){Ext.un("resize",a.onWindowResize,a);delete a.animateTarget;a.hide();Ext.destroy(a.keyMap)}Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var a=this,c=[],b=[];Ext.panel.Panel.prototype.addTools.call(this);if(a.minimizable){c.push({type:"minimize",handler:"minimize",scope:a})}if(a.maximizable){c.push({type:"maximize",handler:"toggleMaximize",scope:a})}if(c.length){a.addTool(c)}},getDefaultFocus:function(){var c=this,b,d=c.defaultButton||c.defaultFocus,a;if(d!==undefined){if(Ext.isNumber(d)){b=c.query("button")[d]}else{if(Ext.isString(d)){a=d;if(a.match(c.initialAlphaNum)){b=c.down(Ext.makeIdSelector(a))}if(!b){b=c.down(a)}}else{if(d.focus){b=d}}}}return b||c.el},onFocus:function(){var b=this,a;if(Ext.enableFocusManager||((a=b.getDefaultFocus())===b)){Ext.panel.Panel.prototype.onFocus.apply(this,arguments)}else{a.focus()}},onShow:function(){var a=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(a.expandOnShow){a.expand(false)}a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction=="destroy"){a.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var b=this,a;if(!b.isDestroyed){if(b.maximized){b.fitContainer()}else{a=b.getSizeModel();if(a.width.natural||a.height.natural){b.updateLayout()}b.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,c=a.header,b=a.tools;if(c&&a.maximizable){c.suspendLayouts();b.maximize.hide();this.resumeHeaderLayout(true)}if(a.resizer){a.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var a=this,d=a.header,b=a.tools,c;if(d){d.suspendLayouts();if(a.maximizable){b.maximize.show();c=true}this.resumeHeaderLayout(c)}if(a.resizer){a.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(b){var e=this,h=e.header,f=e.tools,d=e.width,a=e.height,c,g;if(!e.maximized){e.expand(false);if(!e.hasSavedRestore){c=e.restoreSize={width:Ext.isNumber(d)?d:null,height:Ext.isNumber(a)?a:null};e.restorePos=e.getPosition(true)}if(h){h.suspendLayouts();if(f.maximize){f.maximize.setType("restore")}if(e.collapseTool){e.collapseTool.hide();g=true}e.resumeHeaderLayout(g)}e.el.disableShadow();if(e.dd){e.dd.disable();if(h){h.removeCls(h.indicateDragCls)}}if(e.resizer){e.resizer.disable()}e.el.addCls("x-window-maximized");e.container.addCls("x-window-maximized-ct");e.syncMonitorWindowResize();e.fitContainer(b=(b||!!e.animateTarget)?{callback:function(){e.maximized=true;e.fireEvent("maximize",e)}}:null);if(!b){e.maximized=true;e.fireEvent("maximize",e)}}return e},restore:function(b){var c=this,d=c.tools,f=c.header,a=c.restoreSize,e;if(c.maximized){c.hasSavedRestore=null;c.removeCls("x-window-maximized");if(f){f.suspendLayouts();if(d.maximize){d.maximize.setType("maximize")}if(c.collapseTool){c.collapseTool.show();e=true}c.resumeHeaderLayout(e)}a.x=c.restorePos[0];a.y=c.restorePos[1];c.setBox(a,b=(b||!!c.animateTarget)?{callback:function(){c.el.enableShadow(true);c.maximized=false;c.fireEvent("restore",c)}}:null);c.restorePos=c.restoreSize=null;if(c.dd){c.dd.enable();if(f){f.addCls(f.indicateDragCls)}}if(c.resizer){c.resizer.enable()}c.container.removeCls("x-window-maximized-ct");c.syncMonitorWindowResize();if(!b){c.el.enableShadow(true);c.maximized=false;c.fireEvent("restore",c)}}return c},syncMonitorWindowResize:function(){var b=this,c=b._monitoringResize,d=b.constrain||b.constrainHeader||b.maximized,a=b.hidden||b.destroying||b.isDestroyed;if(d&&!a){if(!c){Ext.on("resize",b.onWindowResize,b,{buffer:1});b._monitoringResize=true}}else{if(c){Ext.un("resize",b.onWindowResize,b);b._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var a=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);a.xtype="window";return a},privates:{getFocusEl:function(){return this.getDefaultFocus()},initDraggable:function(){this.initSimpleDraggable()},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments);if(this.maximized){this.resizer.disable()}}}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],0,[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(b==="#"){a=!!d.isApplication}else{if(this.idMatchRe.test(b)){a=d.getId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.button.Split",Ext.button.Button,{alternateClassName:"Ext.SplitButton",isSplitButton:true,arrowCls:"split",split:true,setArrowHandler:function(b,a){this.arrowHandler=b;this.scope=a},onClick:function(b){var a=this;a.doPreventDefault(b);if(!a.disabled){if(a.isWithinTrigger(b)){b.preventDefault();a.maybeShowMenu();a.fireEvent("arrowclick",a,b);if(a.arrowHandler){a.arrowHandler.call(a.scope||a,a,b)}}else{a.doToggle();a.fireHandler(b)}}}},0,["splitbutton"],["component","box","button","splitbutton"],{component:true,box:true,button:true,splitbutton:true},["widget.splitbutton"],0,[Ext.button,"Split",Ext,"SplitButton"],0));(Ext.cmd.derive("Ext.plugin.Responsive",Ext.mixin.Responsive,{pluginId:"responsive",isPlugin:true,constructor:function(a){var d=this,b=a.cmp,e=Ext.apply({responsiveConfig:b.responsiveConfig,responsiveFormulas:b.responsiveFormulas},a);delete e.cmp;d.cmp=b;d.initConfig(e);if(d.transformed){b.setConfig(d.transformed);d.transformed=null}},init:Ext.emptyFn,privates:{transformInstanceConfig:function(c){var b=Ext.mixin.Responsive.prototype.transformInstanceConfig.call(this,c);if(b.ptype){b=Ext.apply({},b);delete b.ptype}this.transformed=b;var a=Ext.apply({},c);delete a.ptype;delete a.responsiveConfig;delete a.responsiveFormulas;return a},updateResponsiveState:function(){var a=this.getResponsiveState();this.cmp.setConfig(a)}}},1,0,0,0,["plugin.responsive"],0,[Ext.plugin,"Responsive"],0));(Ext.cmd.derive("Ext.plugin.Viewport",Ext.plugin.Responsive,{setCmp:function(a){this.cmp=a;if(a&&!a.isViewport){this.apply(a);if(a.renderConfigs){a.flushRenderConfigs()}a.setupViewport()}},statics:{apply:function(a){Ext.applyIf(a.prototype||a,{ariaRole:"application",viewportCls:"x-viewport"});Ext.override(a,{isViewport:true,preserveElOnDestroy:true,initComponent:function(){this.callParent();this.setupViewport()},handleViewportResize:function(){var e=this,c=Ext.dom.Element,d=c.getViewportWidth(),b=c.getViewportHeight();if(d!=e.width||b!=e.height){e.setSize(d,b)}},setupViewport:function(){var d=this,b=document.body.parentNode,c=d.el=Ext.getBody();Ext.getScrollbarSize();d.width=d.height=undefined;Ext.fly(b).addCls(d.viewportCls);if(d.autoScroll){Ext.fly(b).setStyle(d.getOverflowStyle());delete d.autoScroll}c.setHeight=c.setWidth=Ext.emptyFn;c.dom.scroll="no";d.allowDomMove=false;d.renderTo=d.el;if(Ext.supports.Touch){d.initMeta()}},afterLayout:function(b){if(Ext.supports.Touch){document.body.scrollTop=0}this.callParent([b])},onRender:function(){var b=this;b.callParent(arguments);b.width=Ext.Element.getViewportWidth();b.height=Ext.Element.getViewportHeight();if(Ext.supports.TouchEvents){b.mon(Ext.getDoc(),{touchmove:function(c){c.preventDefault()},translate:false,delegated:false})}},initInheritedState:function(d,c){var e=this,b=Ext.rootInheritedState;if(d!==b){e.initInheritedState(e.inheritedState=b,e.inheritedStateInner=Ext.Object.chain(b))}else{e.callParent([d,c])}},beforeDestroy:function(){var b=this;b.removeUIFromElement();b.el.removeCls(b.baseCls);Ext.fly(document.body.parentNode).removeCls(b.viewportCls);b.callParent()},addMeta:function(b,c){var d=document.createElement("meta");d.setAttribute("name",b);d.setAttribute("content",c);Ext.getHead().appendChild(d)},initMeta:function(){var b=this,c=b.maxUserScale||1;b.addMeta("viewport","width=device-width, initial-scale=1, maximum-scale="+c+", user-scalable="+(c!==1?"yes":"no"));b.addMeta("apple-mobile-web-app-capable","yes")},privates:{applyTargetCls:function(b){this.el.addCls(b)},disableTabbing:function(){var b=this.el;if(b){b.saveChildrenTabbableState()}},enableTabbing:function(){var b=this.el;if(b){b.restoreChildrenTabbableState()}}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize();Ext.plugin.Responsive.prototype.updateResponsiveState.call(this)}}},0,0,0,0,["plugin.viewport"],0,[Ext.plugin,"Viewport"],function(a){a.prototype.apply=a.apply}));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(c){var h=this,a=0,f,j,e,d,b,g;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);e=c.childItems;b=e.length;for(d=0;d<b;++d){j=e[d];f=j.target.anchorSpec;if(f){if(j.widthModel.calculated&&f.right){a|=1}if(j.heightModel.calculated&&f.bottom){a|=2}if(a==3){break}}}c.anchorDimensions=a},calculateItems:function(g,a){var p=this,k=g.childItems,f=k.length,n=a.gotHeight,h=a.gotWidth,e=a.height,c=a.width,b=(h?1:0)|(n?2:0),o=g.anchorDimensions,l,r,m,q,j,d;if(!o){return true}for(j=0;j<f;j++){r=k[j];m=r.getMarginInfo();l=r.target.anchorSpec;if(h&&r.widthModel.calculated){d=l.right(c)-m.width;d=p.adjustWidthAnchor(d,r);r.setWidth(d)}if(n&&r.heightModel.calculated){q=l.bottom(e)-m.height;q=p.adjustHeightAnchor(q,r);r.setHeight(q)}}return(b&o)===o},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(c,f,b){if(c&&c!="none"){var d=this.anchorFactory,e;if(this.parseAnchorRE.test(c)){return d.standard(b-f)}if(c.indexOf("%")!=-1){return d.ratio(parseFloat(c.replace("%",""))*0.01)}e=parseInt(c,10);if(!isNaN(e)){return d.offset(e)}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(f){var e=this,a=e.owner,d=f.anchor,b,c,g;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!f.anchor&&f.items&&!Ext.isNumber(f.width)){f.anchor=d=e.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize=="number"){c=a.anchorSize}else{c=a.anchorSize.width;g=a.anchorSize.height}}else{c=a.initialConfig.width;g=a.initialConfig.height}if(d){b=d.split(" ");f.anchorSpec={right:e.parseAnchor(b[0],f.initialConfig.width,c),bottom:e.parseAnchor(b[1],f.initialConfig.height,g)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(c){var e=c.anchorSpec,a="$",d=this.sizePolicy,b;if(e){b=this.owner.getSizeModel();if(e.right&&!b.width.shrinkWrap){d=d.r}if(e.bottom&&!b.height.shrinkWrap){a="b"}}return d[a]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.show()},getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling(":not([hidden])")},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling(":not([hidden])")},onBeforeStart:function(h){var d=this,f=d.getPrevCmp(),a=d.getNextCmp(),c=d.getSplitter().collapseEl,g=h.getTarget(),b;if(!f||!a){return false}if(c&&g===c.dom){return false}if(a.collapsed||f.collapsed){return false}d.prevBox=f.getEl().getBox();d.nextBox=a.getEl().getBox();d.constrainTo=b=d.calculateConstrainRegion();if(!b){return false}return b},onStart:function(b){var a=this.getSplitter();this.createDragOverlay();a.addCls(a.baseCls+"-active")},calculateConstrainRegion:function(){var g=this,a=g.getSplitter(),h=a.getWidth(),j=a.defaultSplitMin,b=a.orientation,e=g.prevBox,k=g.getPrevCmp(),c=g.nextBox,f=g.getNextCmp(),m,l,d;if(b==="vertical"){d={prevCmp:k,nextCmp:f,prevBox:e,nextBox:c,defaultMin:j,splitWidth:h};m=new Ext.util.Region(e.y,g.getVertPrevConstrainRight(d),e.bottom,g.getVertPrevConstrainLeft(d));l=new Ext.util.Region(c.y,g.getVertNextConstrainRight(d),c.bottom,g.getVertNextConstrainLeft(d))}else{m=new Ext.util.Region(e.y+(k.minHeight||j),e.right,(k.maxHeight?e.y+k.maxHeight:c.bottom-(f.minHeight||j))+h,e.x);l=new Ext.util.Region((f.maxHeight?c.bottom-f.maxHeight:e.y+(k.minHeight||j))-h,c.right,c.bottom-(f.minHeight||j),c.x)}return m.intersect(l)},performResize:function(m,g){var o=this,a=o.getSplitter(),h=a.orientation,p=o.getPrevCmp(),n=o.getNextCmp(),b=a.ownerCt,k=b.query(">[flex]"),l=k.length,c=h==="vertical",j=0,f=c?"width":"height",d=0,q,r;for(;j<l;j++){q=k[j];r=c?q.getWidth():q.getHeight();d+=r;q.flex=r}g=c?g[0]:g[1];if(p){r=o.prevBox[f]+g;if(p.flex){p.flex=r}else{p[f]=r}}if(n){r=o.nextBox[f]-g;if(n.flex){n.flex=r}else{n[f]=r}}b.updateLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.destroy();delete a.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+"-active");a.performResize(c,a.getResizeOffset())},onDrag:function(f){var c=this,g=c.getOffset("dragTarget"),d=c.getSplitter(),b=d.getEl(),a=d.orientation;if(a==="vertical"){b.setX(c.startRegion.left+g[0])}else{b.setY(c.startRegion.top+g[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return(a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return(a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.dom.Layer",Ext.Element,{alternateClassName:"Ext.Layer",isLayer:true,localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(c,g){c=c||{};var k=this,j=Ext.DomHelper,h=c.parentEl,f=h?Ext.getDom(h):document.body,a=c.hideMode,l="x-"+(c.fixed?"fixed-layer":"layer"),d,b,e;if(g){d=Ext.getDom(g);if(!d.parentNode){f.appendChild(d)}}if(!d){d=j.append(f,c.dh||{tag:"div",cls:l})}if(c.id){d.id=c.id}b=d.id;if(b){e=Ext.cache[b];if(e){delete Ext.cache[b];e.dom=null}}Ext.dom.Element.prototype.constructor.call(this,d);if(g){k.addCls(l)}if(c.preventSync){k.preventSync=true}if(c.cls){k.addCls(c.cls)}k.constrain=c.constrain!==false;if(a){k.setVisibilityMode(Ext.Element[a.toUpperCase()])}else{if(c.useDisplay){k.setVisibilityMode(Ext.Element.DISPLAY)}else{k.setVisibilityMode(Ext.Element.VISIBILITY)}}if(c.shadow){k.shadowOffset=c.shadowOffset||4;k.shadow=new Ext.Shadow({offset:k.shadowOffset,mode:c.shadow,fixed:c.fixed});k.disableShadow()}else{k.shadowOffset=0}if(c.hidden===true){k.hide()}else{if(c.hidden===false){k.show()}}},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},disableShadow:function(){var a=this;if(a.shadow&&!a.shadowDisabled){a.shadowDisabled=true;a.shadow.hide();a.lastShadowOffset=a.shadowOffset;a.shadowOffset=0}},enableShadow:function(a){var b=this;if(b.shadow&&b.shadowDisabled){b.shadowDisabled=false;b.shadowOffset=b.lastShadowOffset;delete b.lastShadowOffset;if(a){b.sync(true)}}},sync:function(d){var e=this,j=e.shadow,f,a,g,b,c;if(e.preventSync){return}if(!e.updating&&e.isVisible()&&j){f=e[e.localXYNames.get]();a=f[0];g=f[1];b=e.dom.offsetWidth;c=e.dom.offsetHeight;if(j&&!e.shadowDisabled){if(d&&!j.isVisible()){j.show(e)}else{j.realign(a,g,b,c)}}}return e},destroy:function(){this.hideUnders();Ext.dom.Element.prototype.destroy.call(this)},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(){if(this.shadow){this.shadow.hide()}},constrainXY:function(){if(this.constrain){var f=Ext.Element.getViewportWidth(),b=Ext.Element.getViewportHeight(),l=Ext.getDoc().getScroll(),k=this.getXY(),g=k[0],e=k[1],a=this.shadowOffset,j=this.dom.offsetWidth+a,c=this.dom.offsetHeight+a,d=false;if((g+j)>f+l.left){g=f-j-a;d=true}if((e+c)>b+l.top){e=b-c-a;d=true}if(g<l.left){g=l.left;d=true}if(e<l.top){e=l.top;d=true}if(d){Ext.Layer.superclass.setXY.call(this,[g,e]);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(e,b,d,g,f){var c=this,a;a=function(){if(e){c.sync(true)}if(g){g()}};if(!e){c.hideUnders(true)}Ext.dom.Element.prototype.setVisible.call(this,e,b,d,g,f);if(!b){a()}return c},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(a){Ext.dom.Element.prototype.setLeft.apply(this,arguments);return this.sync()},setTop:function(a){Ext.dom.Element.prototype.setTop.apply(this,arguments);return this.sync()},setLocalX:function(){Ext.dom.Element.prototype.setLocalX.apply(this,arguments);return this.sync()},setLocalXY:function(){Ext.dom.Element.prototype.setLocalXY.apply(this,arguments);return this.sync()},setLocalY:function(){Ext.dom.Element.prototype.setLocalY.apply(this,arguments);return this.sync()},setXY:function(d,a,c,f,e){var b=this;f=b.createCB(f);b.fixDisplay();b.beforeAction();Ext.dom.Element.prototype.setXY.call(this,d,a,c,f,e);if(!a){f()}return b},createCB:function(c){var a=this,b=a.shadow&&a.shadow.isVisible();return function(){a.constrainXY();a.sync(b);if(c){c()}}},setX:function(a,b,c,e,d){this.setXY([a,this.getY()],b,c,e,d);return this},setY:function(e,a,b,d,c){this.setXY([this.getX(),e],a,b,d,c);return this},setSize:function(a,c,b,e,g,f){var d=this;g=d.createCB(g);d.beforeAction();Ext.dom.Element.prototype.setSize.call(this,a,c,b,e,g,f);if(!b){g()}return d},setWidth:function(a,b,d,f,e){var c=this;f=c.createCB(f);c.beforeAction();Ext.dom.Element.prototype.setWidth.call(this,a,b,d,f,e);if(!b){f()}return c},setHeight:function(b,a,d,f,e){var c=this;f=c.createCB(f);c.beforeAction();Ext.dom.Element.prototype.setHeight.call(this,b,a,d,f,e);if(!a){f()}return c},setZIndex:function(a){var b=this;b.zindex=a;if(b.shadow){b.shadow.setZIndex(a)}return b.setStyle("z-index",a)},onOpacitySet:function(a){var b=this.shadow;if(b){b.setOpacity(a)}},deprecated:{"4.2":{methods:{setBounds:function(g,f,a,j,b,c,h,d){var e=this;h=e.createCB(h);e.beforeAction();if(!b){Ext.Layer.superclass.setXY.call(e,[g,f]);Ext.Layer.superclass.setSize.call(e,a,j);h()}else{e.callParent([g,f,a,j,b,c,h,d])}return e},setLeftTop:function(b,a){this.callParent(arguments);return this.sync()}}}}},1,0,0,0,0,0,[Ext.dom,"Layer",Ext,"Layer"],0));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(a){this.response=a;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var c=this,a,b=c.form;return{success:c.onSuccess,failure:c.onFailure,scope:c,timeout:(this.timeout*1000)||(b.timeout*1000),upload:b.fileUpload?c.onSuccess:a}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(b){var a=this.processResponse(b),c=this.form;if(a===true||!a.success||!a.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;c.afterAction(this,false);return}c.clearInvalid();c.setValues(a.data);c.afterAction(this,true)},handleResponse:function(c){var a=this.form.reader,b,d;if(a){b=a.read(c);d=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:d}}return Ext.decode(c.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var b=this,a=b.form;if(b.clientValidation===false||a.isValid()){b.doSubmit()}else{b.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(b,false)}},doSubmit:function(){var d=this,b=Ext.apply(d.createCallback(),{url:d.getUrl(),method:d.getMethod(),headers:d.headers}),c=d.form,e=d.jsonSubmit||c.jsonSubmit,a=e?"jsonData":"params",f;if(c.hasUpload()){f=d.buildForm();b.form=f.formEl;b.isUpload=true}else{b[a]=d.getParams(e)}Ext.Ajax.request(b);if(f){d.cleanup(f)}},cleanup:function(g){var e=g.formEl,d=g.uploadEls,b=g.uploadFields,a=b.length,c,f;for(c=0;c<a;++c){f=b[c];if(!f.clearOnSubmit){f.restoreInput(d[c])}}if(e){Ext.removeNode(e)}},getParams:function(d){var c=false,b=Ext.form.action.Action.prototype.getParams.call(this),a=this.form.getValues(c,c,this.submitEmptyText!==c,d,true);return Ext.apply({},a,b)},buildForm:function(){var j=this,m=[],k,r,g=j.form,d=j.getParams(),c=[],a=[],f=g.getFields().items,e,h=f.length,l,q,o,p,n,b;for(e=0;e<h;++e){l=f[e];if(l.isFileUpload()){c.push(l)}}for(q in d){if(d.hasOwnProperty(q)){o=d[q];if(Ext.isArray(o)){n=o.length;for(p=0;p<n;p++){m.push(j.getFieldConfig(q,o[p]))}}else{m.push(j.getFieldConfig(q,o))}}}k={tag:"form",role:"presentation",action:j.getUrl(),method:j.getMethod(),target:j.target||"_self",style:"display:none",cn:m};if(c.length){k.encoding=k.enctype="multipart/form-data"}r=Ext.DomHelper.append(Ext.getBody(),k);h=c.length;for(e=0;e<h;++e){b=c[e].extractFileInput();r.appendChild(b);a.push(b)}return{formEl:r,uploadFields:c,uploadEls:a}},getFieldConfig:function(a,b){return{tag:"input",type:"hidden",name:a,value:Ext.String.htmlEncode(b)}},onSuccess:function(b){var c=this.form,d=true,a=this.processResponse(b);if(a!==true&&!a.success){if(a.errors){c.markInvalid(a.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;d=false}c.afterAction(this,d)},handleResponse:function(d){var a=this.form,c=a.errorReader,f,k,g,h,b,l;if(c){f=c.read(d);b=f.records;k=[];if(b){for(g=0,h=b.length;g<h;g++){k[g]=b[g].data}}if(k.length<1){k=null}l={success:f.success,errors:k}}else{try{l=Ext.decode(d.responseText)}catch(j){l={success:false,errors:[]}}}return l}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" role="{role}" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",getSubTplData:function(b){var d=this,c=d.getFieldStyle(),a=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(d.grow){if(d.preventScrollbars){a.fieldStyle=(c||"")+";overflow:hidden;height:"+d.growMin+"px"}}return a},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on("paste",a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(a){a=this.stripReturns(a);return Ext.form.field.Text.prototype.valueToRaw.call(this,a)},stripReturns:function(a){if(a&&typeof a==="string"){a=a.replace(this.returnRe,"")}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var b=this,c=b.getValue(),a=b.maxLength;if(c.length>a){c=c.substr(0,a);b.setValue(c)}},fireKey:function(d){var b=this,a=d.getKey(),c;if(d.isSpecialKey()&&(b.enterIsSpecial||(a!==d.ENTER||d.hasModifier()))){b.fireEvent("specialkey",b,d)}if(b.needsMaxCheck&&a!==d.BACKSPACE&&a!==d.DELETE&&!d.isNavKeyPress()&&!b.isCutCopyPasteSelectAll(d,a)){c=b.getValue();if(c.length>=b.maxLength){d.stopEvent()}}},isCutCopyPasteSelectAll:function(b,a){if(b.ctrlKey){return a===b.A||a===b.C||a===b.V||a===b.X}return false},autoSize:function(){var d=this,f,c,a,b,e;if(d.grow&&d.rendered&&d.getSizeModel().height.auto){f=d.inputEl;b=f.getWidth(true);e=Ext.util.Format.htmlEncode(f.dom.value)||"&#160;";e+=d.growAppend;e=e.replace(/\n/g,"<br/>");a=Ext.util.TextMetrics.measure(f,e,b).height+f.getPadding("tb")+d.inputWrap.getBorderWidth("tb")+d.triggerWrap.getBorderWidth("tb");a=Math.min(Math.max(a,d.growMin),d.growMax);d.bodyEl.setHeight(a);d.updateLayout();d.fireEvent("autosize",d,a)}},beforeDestroy:function(){var a=this.pasteTask;if(a){a.cancel();this.pasteTask=null}Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,autoScroll:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(a){var b=this.buttonIds[a];return new Ext.button.Button({handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a){var b=this,c,d;if(b.cfg.prompt||b.cfg.multiline){if(b.cfg.multiline){d=b.textArea}else{d=b.textField}c=d.getValue();d.reset()}b.hide();b.userCallback(a.itemId,c,b.cfg)},hide:function(){var b=this,a=b.cfg?b.cfg.cls:"";b.progressBar.reset();if(a){b.removeCls(a)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(a){var b=this;Ext.window.Window.prototype.constructor.apply(this,arguments);b.minWidth=b.defaultMinWidth=(b.minWidth||b.defaultMinWidth);b.maxWidth=b.defaultMaxWidth=(b.maxWidth||b.defaultMaxWidth);b.minHeight=b.defaultMinHeight=(b.minHeight||b.defaultMinHeight);b.maxHeight=b.defaultMaxHeight=(b.maxHeight||b.defaultMaxHeight)},initComponent:function(a){var e=this,b=e.id,d,c;e.title=e.title||"&#160;";e.iconCls=e.iconCls||"";e.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[e.iconComponent=new Ext.Component({cls:e.baseIconCls}),e.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[e.msg=new Ext.form.field.Display({id:b+"-displayfield",cls:e.baseCls+"-text"}),e.textField=new Ext.form.field.Text({id:b+"-textfield",enableKeyEvents:true,listeners:{keydown:e.onPromptKey,scope:e}}),e.textArea=new Ext.form.field.TextArea({id:b+"-textarea",height:75})]})]});e.progressBar=new Ext.ProgressBar({id:b+"-progressbar",margin:"0 10 10 10"});e.items=[e.topContainer,e.progressBar];e.msgButtons=[];for(d=0;d<4;d++){c=e.makeButton(d);e.msgButtons[c.itemId]=c;e.msgButtons.push(c)}e.bottomTb=new Ext.toolbar.Toolbar({id:b+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[e.msgButtons[0],e.msgButtons[1],e.msgButtons[2],e.msgButtons[3]]});e.dockedItems=[e.bottomTb];e.on("close",e.onClose,e);Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var a=this.header.child("[type=close]");a.itemId="cancel";this.btnCallback(a);delete a.itemId},onPromptKey:function(a,c){var b=this;if(c.keyCode===c.RETURN||c.keyCode===10){if(b.msgButtons.ok.isVisible()){b.msgButtons.ok.handler.call(b,b.msgButtons.ok)}else{if(b.msgButtons.yes.isVisible()){b.msgButtons.yes.handler.call(b,b.msgButtons.yes)}}}},reconfigure:function(b){var r=this,o=0,e=true,s=r.buttonText,d=r.resizer,m=r.header,q=m&&!m.isHeader,c=b&&(b.message||b.msg),t,k,g,n,p,f,a,h,l,j;r.updateButtonText();r.cfg=b=b||{};if(b.width){k=b.width}if(b.height){g=b.height}r.minWidth=b.minWidth||r.defaultMinWidth;r.maxWidth=b.maxWidth||r.defaultMaxWidth;r.minHeight=b.minHeight||r.defaultMinHeight;r.maxHeight=b.maxHeight||r.defaultMaxHeight;if(d){t=d.resizeTracker;d.minWidth=t.minWidth=r.minWidth;d.maxWidth=t.maxWidth=r.maxWidth;d.minHeight=t.minHeight=r.minHeight;d.maxHeight=t.maxHeight=r.maxHeight}delete r.defaultFocus;if(b.defaultFocus){r.defaultFocus=b.defaultFocus}r.animateTarget=b.animateTarget||undefined;r.modal=b.modal!==false;r.setTitle(b.title||(q&&m.title)||r.title);r.setIconCls(b.iconCls||(q&&m.iconCls)||r.iconCls);if(Ext.isObject(b.buttons)){r.buttonText=b.buttons;o=0}else{r.buttonText=b.buttonText||r.buttonText;o=Ext.isNumber(b.buttons)?b.buttons:0}o=o|r.updateButtonText();r.buttonText=s;Ext.suspendLayouts();delete r.width;delete r.height;if(k||g){if(k){r.setWidth(k)}if(g){r.setHeight(g)}}r.hidden=false;if(!r.rendered){r.render(Ext.getBody())}r.closable=b.closable!==false&&!b.wait;m=r.header;if(m){m.child("[type=close]").setVisible(r.closable);if(!b.title&&!r.closable&&!b.iconCls){m.hide()}else{m.show()}}r.liveDrag=!b.proxyDrag;r.userCallback=Ext.Function.bindCallback(b.callback||b.fn||Ext.emptyFn,b.scope||Ext.global);r.setIcon(b.icon);a=r.msg;if(c){a.setValue(c);a.show()}else{a.hide()}p=r.textArea;f=r.textField;if(b.prompt||b.multiline){r.multiline=b.multiline;if(b.multiline){p.setValue(b.value);p.setHeight(b.defaultTextHeight||r.defaultTextHeight);p.show();f.hide();r.defaultFocus=p}else{f.setValue(b.value);p.hide();f.show();r.defaultFocus=f}}else{p.hide();f.hide()}h=r.progressBar;if(b.progress||b.wait){h.show();r.updateProgress(0,b.progressText);j=b.wait;if(j===true){b=b.waitConfig}if(j){h.wait(j)}}else{h.hide()}l=r.msgButtons;for(n=0;n<4;n++){if(o&Math.pow(2,n)){if(!r.defaultFocus){r.defaultFocus=l[n]}l[n].show();e=false}else{l[n].hide()}}if(e){r.bottomTb.hide()}else{r.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var d=this,c=d.buttonText,b=0,e,a;for(e in c){if(c.hasOwnProperty(e)){a=d.msgButtons[e];if(a){if(d.cfg&&d.cfg.buttonText){b=b|Math.pow(2,Ext.Array.indexOf(d.buttonIds,e))}if(a.text!=c[e]){a.setText(c[e])}}}}return b},show:function(a){var c=this,b;a=a||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){c.show(a)},single:true});return c}c.reconfigure(a);if(a.cls){c.addCls(a.cls)}b=c.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");c.preventFocusOnActivate=!b.length;c.hidden=true;Ext.window.Window.prototype.show.call(this);return c},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(a){this.msg.setValue(a)},setIcon:function(d,c,a){var e=this,f=e.iconComponent,b=e.messageIconCls;if(b){f.removeCls(b)}if(d){f.show();if(c||a){f.setSize(c||f.getWidth(),a||f.getHeight())}f.addCls("x-dlg-icon");f.addCls(e.messageIconCls=d)}else{f.removeCls("x-dlg-icon");f.hide()}return e},updateProgress:function(c,a,b){this.progressBar.updateProgress(c,a);if(b){this.updateText(b)}return this},onEsc:function(){if(this.closable!==false){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(a,d,c,b){if(Ext.isString(a)){a={title:a,icon:this.QUESTION,message:d,buttons:this.YESNO,callback:c,scope:b}}return this.show(a)},prompt:function(f,d,c,b,a,e){if(Ext.isString(f)){f={prompt:true,title:f,minWidth:this.minPromptWidth,message:d,buttons:this.OKCANCEL,callback:c,scope:b,multiline:a,value:e}}return this.show(f)},wait:function(b,c,a){if(Ext.isString(b)){b={title:c,message:b,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:a}}return this.show(b)},alert:function(d,c,b,a){if(Ext.isString(d)){d={title:d,message:c,buttons:this.OK,fn:b,scope:a,minWidth:this.minWidth}}return this.show(d)},progress:function(c,b,a){if(Ext.isString(c)){c={title:c,message:b,progress:true,progressText:a}}return this.show(c)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(){Ext.MessageBox=Ext.Msg=new this()}));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(b,c){var d=this,a;d.owner=b;d.checkValidityTask=new Ext.util.DelayedTask(d.checkValidity,d);d.checkDirtyTask=new Ext.util.DelayedTask(d.checkDirty,d);d.checkErrorTask=new Ext.util.DelayedTask(d.checkError,d);d.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:d,addHandler:d.onFieldAdd,removeHandler:d.onFieldRemove,invalidateHandler:d.onMonitorInvalidate});d.monitor.bind(b);Ext.apply(d,c);if(Ext.isString(d.paramOrder)){d.paramOrder=d.paramOrder.split(/[\s,|]/)}a=d.reader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.reader=Ext.createByAlias("reader."+a.type,a)}a=d.errorReader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.errorReader=Ext.createByAlias("reader."+a.type,a)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var b=this,a=b.monitor;if(a){a.unbind();b.monitor=null}b.clearListeners();b.checkValidityTask.cancel();b.checkDirtyTask.cancel();b.checkErrorTask.cancel();b.checkValidityTask=b.checkDirtyTask=checkErrorTask=null;b.isDestroyed=true},onFieldAdd:function(b){var a=this;a.mon(b,"validitychange",a.checkValidityDelay,a);a.mon(b,"dirtychange",a.checkDirtyDelay,a);a.mon(b,"errorchange",a.checkErrorDelay,a);a.onMonitorInvalidate()},onFieldRemove:function(b){var a=this;a.mun(b,"validitychange",a.checkValidityDelay,a);a.mun(b,"dirtychange",a.checkDirtyDelay,a);a.mun(b,"errorchange",a.checkErrorDelay,a);a.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(c){var a=c.preventMark,b;c.preventMark=true;b=c.isValid();c.preventMark=a;return !b})},isValid:function(){var a=this,b;Ext.suspendLayouts();b=a.getFields().filterBy(function(c){return !c.validate()});Ext.resumeLayouts(true);return b.length<1},checkValidity:function(){var b=this,a;if(b.isDestroyed){return}a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else{this.checkError()}},onValidityChange:function(f){var d=this.getBoundItems(),b,c,a,e;if(d){b=d.items;a=b.length;for(c=0;c<a;c++){e=b[c];if(e.disabled===f){e.setDisabled(!f)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else{this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.isDestroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(a){a=a||{};var b=this,c;if(a.standardSubmit||b.standardSubmit){c="standardsubmit"}else{c=b.api?"directsubmit":"submit"}return b.doAction(c,a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(c){c=c||this._record;if(!c){return this}var b=c.self.fields,d=this.getFieldValues(),g={},f=0,a=b.length,e;for(;f<a;++f){e=b[f].name;if(d.hasOwnProperty(e)){g[e]=d[e]}}c.beginEdit();c.set(g);c.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(c){var g=this,b=c.waitMsg,k="x-mask-loading",d=g.getFields().items,e,j=d.length,h,a;for(e=0;e<j;e++){h=d[e];if(h.isFormField&&h.syncValue){h.syncValue()}}if(b){a=g.waitMsgTarget;if(a===true){g.owner.el.mask(b,k)}else{if(a){a=g.waitMsgTarget=Ext.get(a);a.mask(b,k)}else{g.floatingAncestor=g.owner.up("[floating]");if(g.floatingAncestor){g.savePreventFocusOnActivate=g.floatingAncestor.preventFocusOnActivate;g.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(b,c.waitTitle||g.waitTitle)}}}},afterAction:function(c,e){var a=this;if(c.waitMsg){var b=Ext.MessageBox,d=a.waitMsgTarget;if(d===true){a.owner.el.unmask()}else{if(d){d.unmask()}else{b.hide()}}}if(a.floatingAncestor){a.floatingAncestor.preventFocusOnActivate=a.savePreventFocusOnActivate}if(e){if(c.reset){a.reset()}Ext.callback(c.success,c.scope||c,[a,c]);a.fireEvent("actioncomplete",a,c)}else{Ext.callback(c.failure,c.scope||c,[a,c]);a.fireEvent("actionfailed",a,c)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(j){var d=this,g,a,b,f,c;function h(e,l){var k=d.findField(e);if(k){k.markInvalid(l)}}if(Ext.isArray(j)){a=j.length;for(g=0;g<a;g++){b=j[g];h(b.id,b.msg)}}else{if(j instanceof Ext.data.ErrorCollection){a=j.items.length;for(g=0;g<a;g++){b=j.items[g];h(b.field,b.message)}}else{for(c in j){if(j.hasOwnProperty(c)){f=j[c];h(c,f,j)}}}}return this},setValues:function(b){var d=this,a,c,f;function e(g,j){var h=d.findField(g);if(h){h.setValue(j);if(d.trackResetOnLoad){h.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(b)){c=b.length;for(a=0;a<c;a++){f=b[a];e(f.id,f.value)}}else{Ext.iterate(b,e)}Ext.resumeLayouts(true);return this},getValues:function(k,l,p,n,c){var o={},h=this.getFields().items,q=h.length,g=Ext.isArray,m,e,d,b,a,j;for(j=0;j<q;j++){m=h[j];if(!l||m.isDirty()){e=m[n?"getModelData":"getSubmitData"](p,c);if(Ext.isObject(e)){for(a in e){if(e.hasOwnProperty(a)){d=e[a];if(p&&d===""){d=m.emptyText||""}if(!m.isRadio){if(o.hasOwnProperty(a)){b=o[a];if(!g(b)){b=o[a]=[b]}if(g(d)){o[a]=b.concat(d)}else{b.push(d)}}else{o[a]=d}}else{o[a]=o[a]||d}}}}}}if(k){o=Ext.Object.toQueryString(o)}return o},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){Ext.suspendLayouts();var b=this,a=b.getFields().items,c,d=a.length;for(c=0;c<d;c++){a[c].clearInvalid()}Ext.resumeLayouts(true);return b},reset:function(b){Ext.suspendLayouts();var c=this,a=c.getFields().items,d,e=a.length;for(d=0;d<e;d++){a[d].reset()}Ext.resumeLayouts(true);if(b===true){delete c._record}return c},applyToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.apply(a[b],c)}return this},applyIfToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.applyIf(a[b],c)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.layout.container.CheckboxGroup",Ext.layout.container.Container,{autoFlex:true,type:"checkboxgroup",createsInnerCt:true,childEls:["innerCt"],renderTpl:['<table id="{ownerId}-innerCt" data-ref="innerCt" class="'+Ext.plainTableCls+'" cellpadding="0"','role="presentation" style="{tableStyle}"><tr role="presentation">','<tpl for="columns">','<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">',"{% this.renderColumn(out,parent,xindex-1) %}","</td>","</tpl>","</tr></table>"],lastOwnerItemsGeneration:null,beginLayout:function(b){var j=this,e,d,g,a,h,f=0,l=0,k=j.autoFlex,c=j.innerCt.dom.style;Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);e=j.columnNodes;b.innerCtContext=b.getEl("innerCt",j);if(!b.widthModel.shrinkWrap){d=e.length;if(j.columnsArray){for(g=0;g<d;g++){a=j.owner.columns[g];if(a<1){f+=a;l++}}for(g=0;g<d;g++){a=j.owner.columns[g];if(a<1){h=((a/f)*100)+"%"}else{h=a+"px"}e[g].style.width=h}}else{for(g=0;g<d;g++){h=k?(1/d*100)+"%":"";e[g].style.width=h;l++}}if(!l){c.tableLayout="fixed";c.width=""}else{if(l<d){c.tableLayout="fixed";c.width="100%"}else{c.tableLayout="auto";if(k){c.width="100%"}else{c.width=""}}}}else{c.tableLayout="auto";c.width=""}},cacheElements:function(){var a=this;Ext.layout.container.Container.prototype.cacheElements.call(this);a.rowEl=a.innerCt.down("tr");a.columnNodes=a.rowEl.dom.childNodes},calculate:function(g){var e=this,c,b,a,h,d,f;if(!g.getDomProp("containerChildrenSizeDone")){e.done=false}else{c=g.innerCtContext;b=g.widthModel.shrinkWrap;a=g.heightModel.shrinkWrap;h=a||b;d=c.el.dom;f=h&&c.getPaddingInfo();if(b){g.setContentWidth(d.offsetWidth+f.width,true)}if(a){g.setContentHeight(d.offsetHeight+f.height,true)}}},doRenderColumn:function(d,l,f){var h=l.$layout,c=h.owner,e=l.columnCount,g=c.items.items,b=g.length,m,a,j,k,n;if(c.vertical){j=Math.ceil(b/e);a=f*j;b=Math.min(b,a+j);k=1}else{a=f;k=e}for(;a<b;a+=k){m=g[a];h.configureItem(m);n=m.getRenderTree();Ext.DomHelper.generateMarkup(n,d)}},getColumnCount:function(){var b=this,a=b.owner,c=a.columns;if(b.columnsArray){return c.length}if(Ext.isNumber(c)){return c}return a.items.length},getItemSizePolicy:function(a){return this.autoSizePolicy},getRenderData:function(){var j=this,f=Ext.layout.container.Container.prototype.getRenderData.call(this),b=j.owner,g,d=j.getColumnCount(),a,c,h,k=j.autoFlex,e=0,l=0;if(j.columnsArray){for(g=0;g<d;g++){a=j.owner.columns[g];if(a<1){e+=a;l++}}}f.colCls=b.groupCls;f.columnCount=d;f.columns=[];for(g=0;g<d;g++){c=(f.columns[g]={});if(j.columnsArray){a=j.owner.columns[g];if(a<1){h=((a/e)*100)+"%"}else{h=a+"px"}c.style="width:"+h}else{c.style="width:"+(1/d*100)+"%";l++}}f.tableStyle=!l?"table-layout:fixed;":(l<d)?"table-layout:fixed;width:100%":(k)?"table-layout:auto;width:100%":"table-layout:auto;";return f},initLayout:function(){var b=this,a=b.owner;b.columnsArray=Ext.isArray(a.columns);b.autoColumns=!a.columns||a.columns==="auto";b.vertical=a.vertical;Ext.layout.container.Container.prototype.initLayout.call(this)},isValidParent:Ext.returnTrue,setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderColumn=this.doRenderColumn},renderChildren:function(){var a=this,b=a.owner.items.generation;if(a.lastOwnerItemsGeneration!==b){a.lastOwnerItemsGeneration=b;a.renderItems(a.getLayoutItems())}},renderItems:function(e){var f=this,a=e.length,b,j,h,d,g,c;if(a){Ext.suspendLayouts();if(f.autoColumns){f.addMissingColumns(a)}d=f.columnNodes.length;h=Math.ceil(a/d);for(b=0;b<a;b++){j=e[b];g=f.getRenderRowIndex(b,h,d);c=f.getRenderColumnIndex(b,h,d);if(!j.rendered){f.renderItem(j,g,c)}else{if(!f.isItemAtPosition(j,g,c)){f.moveItem(j,g,c)}}}if(f.autoColumns){f.removeExceedingColumns(a)}Ext.resumeLayouts(true)}},isItemAtPosition:function(b,c,a){return b.el.dom===this.getNodeAt(c,a)},getRenderColumnIndex:function(b,a,c){if(this.vertical){return Math.floor(b/a)}else{return b%c}},getRenderRowIndex:function(b,a,d){var c=this;if(c.vertical){return b%a}else{return Math.floor(b/d)}},getNodeAt:function(b,a){return this.columnNodes[a].childNodes[b]},addMissingColumns:function(a){var f=this,c=f.columnNodes.length,e,g,b,d;if(c<a){e=a-c;g=f.rowEl;b=f.owner.groupCls;for(d=0;d<e;d++){g.createChild({cls:b,tag:"td",vAlign:"top",role:"presentation"})}}},removeExceedingColumns:function(a){var e=this,b=e.columnNodes.length,d,f,c;if(b>a){d=b-a;f=e.rowEl;for(c=0;c<d;c++){f.last().destroy()}}},renderItem:function(c,d,a){var b=this;b.configureItem(c);c.render(Ext.get(b.columnNodes[a]),d)},moveItem:function(d,f,b){var c=this,a=c.columnNodes[b],e=a.childNodes[f];a.insertBefore(d.el.dom,e||null)}},0,0,0,0,["layout.checkboxgroup"],0,[Ext.layout.container,"CheckboxGroup"],0));(Ext.cmd.derive("Ext.form.CheckboxGroup",Ext.form.FieldContainer,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:"x-form-check-group",extraFieldBodyCls:"x-form-checkboxgroup-body",layout:"checkboxgroup",componentCls:"x-form-checkboxgroup",ariaRole:"group",initComponent:function(){var a=this;Ext.form.FieldContainer.prototype.initComponent.call(this);a.initField()},initValue:function(){var b=this,a=b.value;b.originalValue=b.lastValue=a||b.getValue();if(a){b.setValue(a)}},onAdd:function(e){var d=this,b,a,c;if(e.isCheckbox){d.mon(e,"change",d.checkChange,d)}else{if(e.isContainer){b=e.items.items;for(c=0,a=b.length;c<a;c++){d.onAdd(b[c])}}}Ext.form.FieldContainer.prototype.onAdd.apply(this,arguments)},onRemove:function(e){var d=this,b,a,c;if(e.isCheckbox){d.mun(e,"change",d.checkChange,d)}else{if(e.isContainer){b=e.items.items;for(c=0,a=b.length;c<a;c++){d.onRemove(b[c])}}}Ext.form.FieldContainer.prototype.onRemove.apply(this,arguments)},isEqual:function(b,a){var c=Ext.Object.toQueryString;return c(b)===c(a)},getErrors:function(){var a=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){a.push(this.blankText)}return a},getBoxes:function(a){return this.query("[isCheckbox]"+(a||""))},eachBox:function(b,a){Ext.Array.forEach(this.getBoxes(),b,a||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){if(c[a].isDirty()){return true}}},setReadOnly:function(e){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){c[a].setReadOnly(e)}this.readOnly=e},reset:function(){var c=this,b=c.hasActiveError(),a=c.preventMark;c.preventMark=true;c.batchChanges(function(){var e=c.getBoxes(),d,f=e.length;for(d=0;d<f;d++){e[d].reset()}});c.preventMark=a;c.unsetActiveError();if(b){c.updateLayout()}},resetOriginalValue:function(){var d=this,c=d.getBoxes(),a,e=c.length;for(a=0;a<e;a++){c[a].resetOriginalValue()}d.originalValue=d.getValue();d.checkDirty()},setValue:function(g){var f=this,d=f.getBoxes(),a,j=d.length,e,c,h;f.batchChanges(function(){for(a=0;a<j;a++){e=d[a];c=e.getName();h=false;if(g&&g.hasOwnProperty(c)){if(Ext.isArray(g[c])){h=Ext.Array.contains(g[c],e.inputValue)}else{h=g[c]}}e.setValue(h)}});return f},getValue:function(){var d={},f=this.getBoxes(),c,j=f.length,g,e,a,h;for(c=0;c<j;c++){g=f[c];e=g.getName();a=g.inputValue;if(g.getValue()){if(d.hasOwnProperty(e)){h=d[e];if(!Ext.isArray(h)){h=d[e]=[h]}h.push(a)}else{d[e]=a}}}return d},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,d,c,b;if(a.disabled){c=true}else{d=a.getErrors();c=Ext.isEmpty(d);b=a.wasValid;if(c){a.unsetActiveError()}else{a.setActiveError(d)}}if(c!==b){a.wasValid=c;a.fireEvent("validitychange",a,c);a.updateLayout()}return c}},0,["checkboxgroup"],["component","box","container","fieldcontainer","checkboxgroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true},["widget.checkboxgroup"],[["field",Ext.form.field.Field]],[Ext.form,"CheckboxGroup"],function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}));(Ext.cmd.derive("Ext.form.FieldSet",Ext.container.Container,{focusable:true,checkboxUI:"default",collapsed:false,toggleOnTitleClick:true,baseCls:"x-fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:null,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:false,beforeDestroy:function(){var b=this,a=b.legend;if(a){delete a.ownerCt;a.destroy();b.legend=null}Ext.container.Container.prototype.beforeDestroy.call(this)},initComponent:function(){var b=this,a=b.baseCls;b.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);b.layout.managePadding=b.layout.manageOverflow=false;if(b.collapsed){b.addCls(a+"-collapsed");b.collapse()}if(b.title||b.checkboxToggle||b.collapsible){b.addTitleClasses();b.legend=Ext.widget(b.createLegendCt())}b.initMonitor()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.bodyTargetCls=a.bodyTargetCls;a.protoBody.writeTo(b);delete a.protoBody;return b},getState:function(){var a=Ext.container.Container.prototype.getState.call(this);a=this.addPropertyToState(a,"collapsed");return a},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return true},collapsedVertical:function(){return true},createLegendCt:function(){var c=this,a=[],b={xtype:"container",baseCls:c.baseCls+"-header",layout:"container",ui:c.ui,id:c.id+"-legend",autoEl:"legend",ariaRole:null,ariaLabelledBy:"."+c.baseCls+"-header-text",items:a,ownerCt:c,shrinkWrap:true,ownerLayout:c.componentLayout};if(c.checkboxToggle){a.push(c.createCheckboxCmp())}else{if(c.collapsible){a.push(c.createToggleCmp())}}a.push(c.createTitleCmp());return b},createTitleCmp:function(){var b=this,a={xtype:"component",html:b.title,ui:b.ui,cls:b.baseCls+"-header-text",id:b.id+"-legendTitle"};if(b.collapsible&&b.toggleOnTitleClick){a.listeners={click:{element:"el",scope:b,fn:b.toggle}};a.cls+=" "+b.baseCls+"-header-text-collapsible"}return(b.titleCmp=Ext.widget(a))},createCheckboxCmp:function(){var b=this,c="-checkbox",a=b.baseCls+"-header"+c;a+=" "+a+"-"+b.ui;b.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:true,name:b.checkboxName||b.id+c,cls:a,id:b.id+"-legendChk",ui:b.checkboxUI,checked:!b.collapsed,msgTarget:"none",listeners:{change:b.onCheckChange,scope:b}});return b.checkboxCmp},createToggleCmp:function(){var a=this;a.toggleCmp=Ext.widget({xtype:"tool",cacheHeight:false,cls:a.baseCls+"-header-tool-"+a.ui,type:"toggle",handler:a.toggle,id:a.id+"-legendToggle",scope:a});return a.toggleCmp},doRenderLegend:function(b,e){var d=e.$comp,c=d.legend,a;if(c){c.ownerLayout.configureItem(c);a=c.getRenderTree();Ext.DomHelper.generateMarkup(a,b)}},getCollapsed:function(){return this.collapsed?"top":false},getCollapsedDockedItems:function(){var a=this.legend;return a?[a]:[]},setTitle:function(c){var b=this,a=b.legend;b.title=c;if(b.rendered){if(!a){b.legend=a=Ext.widget(b.createLegendCt());b.addTitleClasses();a.ownerLayout.configureItem(a);a.render(b.el,0)}b.titleCmp.update(c)}else{if(a){b.titleCmp.update(c)}else{b.addTitleClasses();b.legend=Ext.widget(b.createLegendCt())}}return b},addTitleClasses:function(){var b=this,c=b.title,a=b.baseCls;if(c){b.addCls(a+"-with-title")}if(c||b.checkboxToggle||b.collapsible){b.addCls(a+"-with-legend")}},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(b){var c=this,d=c.checkboxCmp,a=b?"expand":"collapse";if(!c.rendered||c.fireEvent("before"+a,c)!==false){b=!!b;if(d){d.setValue(b)}if(b){c.removeCls(c.baseCls+"-collapsed")}else{c.addCls(c.baseCls+"-collapsed")}c.collapsed=!b;if(b){delete c.getInherited().collapsed}else{c.getInherited().collapsed=true}if(c.rendered){c.updateLayout({isRoot:false});c.fireEvent(a,c)}}return c},getRefItems:function(a){var c=Ext.container.Container.prototype.getRefItems.apply(this,arguments),b=this.legend;if(b){c.unshift(b);if(a){c.unshift.apply(c,b.getRefItems(true))}}return c},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},finishRender:function(){var a=this.legend;Ext.container.Container.prototype.finishRender.call(this);if(a){a.finishRender()}},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:true})}return a},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(e){var c=this,a=c.getProtoBody(),d=c.padding,b;if(d!==undefined){if(Ext.isIE8){d=c.parseBox(d);b=Ext.Element.parseBox(0);b.top=d.top;d.top=0;a.setStyle("padding",c.unitizeBox(b))}e.setStyle("padding",c.unitizeBox(d))}},onCheckChange:function(b,a){this.setExpanded(a)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderLegend=this.doRenderLegend}}},0,["fieldset"],["component","box","container","fieldset"],{component:true,box:true,container:true,fieldset:true},["widget.fieldset"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldSet"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",ariaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var b={},d=this.basicFormConfigs,a=d.length,c=0,e;for(;c<a;++c){e=d[c];b[e]=this[e]}return new Ext.form.Basic(this,b)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,b,c,a){return this.getForm().getValues(d,b,c,a)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){var a=this.form.getFields().items,b,c=a.length;for(b=0;b<c;b++){a[b].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.RadioManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name==a&&c.getFormId()==b})},getWithValue:function(a,b,c){return this.filterBy(function(d){return d.name==a&&d.inputValue==b&&d.getFormId()==c})},getChecked:function(a,b){return this.findBy(function(c){return c.name==a&&c.checked&&c.getFormId()==b})}},0,0,0,0,0,0,[Ext.form,"RadioManager"],0));(Ext.cmd.derive("Ext.form.field.Radio",Ext.form.field.Checkbox,{alternateClassName:"Ext.form.Radio",isRadio:true,inputType:"radio",ariaRole:"radio",tabIndex:0,formId:null,getGroupValue:function(){var a=this.getManager().getChecked(this.name,this.getFormId());return a?a.inputValue:null},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(true)}},onRemoved:function(){Ext.form.field.Checkbox.prototype.onRemoved.apply(this,arguments);this.formId=null},setValue:function(c){var b=this,a,d;if(Ext.isBoolean(c)){Ext.form.field.Checkbox.prototype.setValue.apply(this,arguments)}else{d=b.getManager().getWithValue(b.name,c,b.getFormId()).getAt(0);if(d){d.setValue(true)}}return b},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){var a=Ext.form.field.Checkbox.prototype.getModelData.apply(this,arguments);if(a){a[this.getName()]=this.getSubmitValue()}return a},onChange:function(c,a){var f=this,e,d,b,g;Ext.form.field.Checkbox.prototype.onChange.apply(this,arguments);if(c){g=f.getManager().getByName(f.name,f.getFormId()).items;d=g.length;for(e=0;e<d;e++){b=g[e];if(b!==f){b.setValue(false)}}}},getManager:function(){return Ext.form.RadioManager}},0,["radiofield","radio"],["component","box","field","checkboxfield","checkbox","radiofield","radio"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,radiofield:true,radio:true},["widget.radio","widget.radiofield"],0,[Ext.form.field,"Radio",Ext.form,"Radio"],0));(Ext.cmd.derive("Ext.form.RadioGroup",Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:"x-form-radio-group",ariaRole:"radiogroup",getBoxes:function(b,a){return(a||this).query("[isRadio]"+(b||""))},checkChange:function(){var b=this.getValue(),a=Ext.Object.getKeys(b)[0];if(Ext.isArray(b[a])){return}Ext.form.CheckboxGroup.prototype.checkChange.apply(this,arguments)},setValue:function(d){var h,f,e,g,c,a,b;if(Ext.isObject(d)){for(b in d){if(d.hasOwnProperty(b)){h=d[b];f=this.items.first();e=f?f.getFormId():null;g=Ext.form.RadioManager.getWithValue(b,h,e).items;a=g.length;for(c=0;c<a;++c){g[c].setValue(true)}}}}return this},privates:{getFocusables:function(){return this.getBoxes()},initDefaultFocusable:function(a){var d=this,c,b;c=d.getChecked();if(c.length){b=c[0]}else{b=d.findNextFocusableChild(null,true,null,a)}if(b){d.activateFocusable(b)}return b},onFocusableContainerFocusLeave:function(){this.clearFocusables();this.initDefaultFocusable()},doFocusableChildAdd:function(f){var e=this,b=e.mixins.focusablecontainer,d,c,a;d=f.isContainer?e.getBoxes("",f):[f];for(c=0,a=d.length;c<a;c++){b.doFocusableChildAdd.call(e,d[c])}},doFocusableChildRemove:function(f){var e=this,b=e.mixins.focusablecontainer,d,c,a;d=f.isContainer?e.getBoxes("",f):[f];for(c=0,a=d.length;c<a;c++){b.doFocusableChildRemove.call(e,d[c])}},focusChild:function(c,b,d){var a=this.mixins.focusablecontainer.focusChild.apply(this,arguments);if(!d.ctrlKey){a.setValue(true)}}}},0,["radiogroup"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true},["widget.radiogroup"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.form,"RadioGroup"],0));(Ext.cmd.derive("Ext.picker.Month",Ext.Component,{alternateClassName:"Ext.MonthPicker",isMonthPicker:true,focusable:true,childEls:["bodyEl","prevEl","nextEl","monthEl","yearEl"],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>',"</div>","</tpl>","</div>",'<div class="x-clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:"x-monthpicker",showButtons:true,measureWidth:35,measureMaxHeight:20,smallCls:"x-monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var a=this;a.selectedCls=a.baseCls+"-selected";if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear(new Date().getFullYear()-4,-4);if(a.showButtons){a.okBtn=new Ext.button.Button({text:a.okText,handler:a.onOkClick,scope:a});a.cancelBtn=new Ext.button.Button({text:a.cancelText,handler:a.onCancelClick,scope:a})}Ext.Component.prototype.initComponent.call(this)},beforeRender:function(){var f=this,c=0,b=[],a=Ext.Date.getShortMonthName,e=f.monthOffset,g=f.monthMargin,d="";if(f.padding&&!f.width){f.cacheWidth()}Ext.Component.prototype.beforeRender.call(this);for(;c<e;++c){b.push(a(c),a(c+e))}if(Ext.isDefined(g)){d="margin: 0 "+g+"px;"}Ext.apply(f.renderData,{months:b,years:f.getYears(),showButtons:f.showButtons,monthStyle:d})},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+" "+a.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},afterRender:function(){var b=this,a=b.bodyEl;Ext.Component.prototype.afterRender.call(this);b.mon(a,"click",b.onBodyClick,b);b.mon(a,"dblclick",b.onBodyClick,b);b.years=a.select("."+b.baseCls+"-year a");b.months=a.select("."+b.baseCls+"-month a");b.backRepeater=new Ext.util.ClickRepeater(b.prevEl,{handler:Ext.Function.bind(b.adjustYear,b,[-b.totalYears])});b.prevEl.addClsOnOver(b.baseCls+"-yearnav-prev-over");b.nextRepeater=new Ext.util.ClickRepeater(b.nextEl,{handler:Ext.Function.bind(b.adjustYear,b,[b.totalYears])});b.nextEl.addClsOnOver(b.baseCls+"-yearnav-next-over");b.updateBody();if(!Ext.isDefined(b.monthMargin)){Ext.picker.Month.prototype.monthMargin=b.calculateMonthMargin()}},calculateMonthMargin:function(){var d=this,b=d.monthEl,a=d.months,e=a.first(),c=e.getMargin("l");while(c&&d.getLargest()>d.measureMaxHeight){--c;a.setStyle("margin","0 "+c+"px")}return c},getLargest:function(a){var b=0;this.months.each(function(d){var c=d.getHeight();if(c>b){b=c}});return b},setValue:function(d){var c=this,e=c.activeYear,f=c.monthOffset,b,a;if(!d){c.value=[null,null]}else{if(Ext.isDate(d)){c.value=[d.getMonth(),d.getFullYear()]}else{c.value=[d[0],d[1]]}}if(c.rendered){b=c.value[1];if(b!==null){if((b<e||b>e+c.yearOffset)){c.activeYear=b-c.yearOffset+1}}c.updateBody()}return c},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var d=this,e=d.yearOffset,f=d.activeYear,a=f+e,c=f,b=[];for(;c<a;++c){b.push(c,c+e)}return b},updateBody:function(){var h=this,e=h.years,b=h.months,m=h.getYears(),n=h.selectedCls,k=h.getYear(null),f=h.value[0],l=h.monthOffset,g,d,j,a,c;if(h.rendered){e.removeCls(n);b.removeCls(n);d=e.elements;a=d.length;for(j=0;j<a;j++){c=Ext.fly(d[j]);g=m[j];c.dom.innerHTML=g;if(g==k){c.addCls(n)}}if(f!==null){if(f<l){f=f*2}else{f=(f-l)*2+1}b.item(f).addCls(n)}}},getYear:function(a,c){var b=this.value[1];c=c||0;return b===null?a:b+c},onBodyClick:function(d,b){var c=this,a=d.type=="dblclick";if(d.getTarget("."+c.baseCls+"-month")){d.stopEvent();c.onMonthClick(b,a)}else{if(d.getTarget("."+c.baseCls+"-year")){d.stopEvent();c.onYearClick(b,a)}}},adjustYear:function(a){if(typeof a!="number"){a=this.totalYears}this.activeYear+=a;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(c,a){var b=this;b.value[0]=b.resolveOffset(b.months.indexOf(c),b.monthOffset);b.updateBody();b.fireEvent("month"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},onYearClick:function(c,a){var b=this;b.value[1]=b.activeYear+b.resolveOffset(b.years.indexOf(c),b.yearOffset);b.updateBody();b.fireEvent("year"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},resolveOffset:function(a,b){if(a%2===0){return(a/2)}else{return b+Math.floor(a/2)}},beforeDestroy:function(){var a=this;a.years=a.months=null;Ext.destroyMembers(a,"backRepeater","nextRepeater","okBtn","cancelBtn");Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.destroyMembers(this,"okBtn","cancelBtn");Ext.Component.prototype.onDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.apply(this,arguments);if(this.showButtons){a.okBtn.finishRender();a.cancelBtn.finishRender()}}}},0,["monthpicker"],["component","box","monthpicker"],{component:true,box:true,monthpicker:true},["widget.monthpicker"],0,[Ext.picker,"Month",Ext,"MonthPicker"],0));Ext.define("ExtThemeNeptune.picker.Month",{override:"Ext.picker.Month",measureMaxHeight:36});Ext.define("FBEditor.override.picker.Month",{override:"Ext.picker.Month"});(Ext.cmd.derive("Ext.picker.Date",Ext.Component,{alternateClassName:"Ext.DatePicker",isDatePicker:true,focusable:true,childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:true,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="button" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="button" title="{nextText}"></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" {%','if (values.$comp.focusable) {out.push("tabindex=\\"0\\"");}','%} cellspacing="0">','<thead><tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr></thead>",'<tbody><tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>","</div>",{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)},isEndOfWeek:function(b){b--;var a=b%7===0&&b!==0;return a?'</tr><tr role="row">':""},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)}}],todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:true,disableAnim:false,baseCls:"x-datepicker",longDayFormat:"F d, Y",initHour:12,numDays:42,initComponent:function(){var b=this,a=Ext.Date.clearTime;b.selectedCls=b.baseCls+"-selected";b.disabledCellCls=b.baseCls+"-disabled";b.prevCls=b.baseCls+"-prevday";b.activeCls=b.baseCls+"-active";b.cellCls=b.baseCls+"-cell";b.nextCls=b.baseCls+"-prevday";b.todayCls=b.baseCls+"-today";if(!b.format){b.format=Ext.Date.defaultFormat}if(!b.dayNames){b.dayNames=Ext.Date.dayNames}b.dayNames=b.dayNames.slice(b.startDay).concat(b.dayNames.slice(0,b.startDay));Ext.Component.prototype.initComponent.call(this);b.value=b.value?a(b.value,true):a(new Date());b.initDisabledDays()},getRefOwner:function(){return this.pickerField||Ext.Component.prototype.getRefOwner.call(this)},getRefItems:function(){var a=[],c=this.monthBtn,b=this.todayBtn;if(c){a.push(c)}if(b){a.push(b)}return a},beforeRender:function(){var b=this,c=new Array(b.numDays),a=Ext.Date.format(new Date(),b.format);if(b.padding&&!b.width){b.cacheWidth()}b.monthBtn=new Ext.button.Split({ownerCt:b,ownerLayout:b.getComponentLayout(),text:"",tooltip:b.monthYearText,listeners:{click:b.doShowMonthPicker,arrowclick:b.doShowMonthPicker,scope:b}});if(b.showToday){b.todayBtn=new Ext.button.Button({ownerCt:b,ownerLayout:b.getComponentLayout(),text:Ext.String.format(b.todayText,a),tooltip:Ext.String.format(b.todayTip,a),tooltipType:"title",handler:b.selectToday,scope:b})}Ext.Component.prototype.beforeRender.call(this);Ext.applyIf(b,{renderData:{}});Ext.apply(b.renderData,{dayNames:b.dayNames,showToday:b.showToday,prevText:b.prevText,nextText:b.nextText,days:c});b.protoEl.unselectable()},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+" "+a.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},onRender:function(b,a){var c=this;Ext.Component.prototype.onRender.apply(this,arguments);c.cells=c.eventEl.select("tbody td");c.textNodes=c.eventEl.query("tbody td div");c.eventEl.set({"aria-labelledby":c.monthBtn.id});c.mon(c.eventEl,{scope:c,mousewheel:c.handleMouseWheel,click:{fn:c.handleDateClick,delegate:"div."+c.baseCls+"-date"}})},initEvents:function(){var c=this,d=c.pickerField,a=Ext.Date,b=a.DAY;Ext.Component.prototype.initEvents.call(this);if(!c.focusable){c.el.on({mousedown:c.onMouseDown})}c.prevRepeater=new Ext.util.ClickRepeater(c.prevEl,{handler:c.showPrevMonth,scope:c,preventDefault:true,stopDefault:true});c.nextRepeater=new Ext.util.ClickRepeater(c.nextEl,{handler:c.showNextMonth,scope:c,preventDefault:true,stopDefault:true});c.keyNav=new Ext.util.KeyNav(d?d.inputEl:c.eventEl,Ext.apply({scope:c,capture:true,left:function(f){if(f.ctrlKey){c.showPrevMonth()}else{c.update(a.add(c.activeDate,b,-1))}},right:function(f){if(f.ctrlKey){c.showNextMonth()}else{c.update(a.add(c.activeDate,b,1))}},up:function(f){if(f.ctrlKey){c.showNextYear()}else{c.update(a.add(c.activeDate,b,-7))}},down:function(f){if(f.ctrlKey){c.showPrevYear()}else{c.update(a.add(c.activeDate,b,7))}},pageUp:function(f){if(f.ctrlKey){c.showPrevYear()}else{c.showPrevMonth()}},pageDown:function(f){if(f.ctrlKey){c.showNextYear()}else{c.showNextMonth()}},tab:function(f){c.handleTabClick(f);return true},enter:function(f){c.handleDateClick(f,c.activeCell.firstChild)},space:function(){c.setValue(new Date(c.activeCell.firstChild.dateValue));var e=c.startValue,f=c.value,g;if(d){g=d.getValue();if(g&&e&&g.getTime()===f.getTime()){d.setValue(e)}else{d.setValue(f)}}},home:function(f){c.update(a.getFirstDateOfMonth(c.activeDate))},end:function(f){c.update(a.getLastDateOfMonth(c.activeDate))}},c.keyNavConfig));if(c.disabled){c.syncDisabled(true)}c.update(c.value)},onMouseDown:function(a){a.preventDefault()},handleTabClick:function(d){var c=this,a=c.getSelectedDate(c.activeDate),b=c.handler;if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.setValue(new Date(a.dateValue));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}},getSelectedDate:function(a){var d=this,h=a.getTime(),j=d.cells,k=d.selectedCls,f=j.elements,b,e=f.length,g;j.removeCls(k);for(b=0;b<e;b++){g=Ext.fly(f[b]);if(g.dom.firstChild.dateValue==h){return g.dom.firstChild}}return null},initDisabledDays:function(){var g=this,b=g.disabledDates,f="(?:",a,h,c,e;if(!g.disabledDatesRE&&b){a=b.length-1;c=b.length;for(h=0;h<c;h++){e=b[h];f+=Ext.isDate(e)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(e,g.format))+"$":e;if(h!==a){f+="|"}}g.disabledDatesRE=new RegExp(f+")")}},setDisabledDates:function(a){var b=this;if(Ext.isArray(a)){b.disabledDates=a;b.disabledDatesRE=null}else{b.disabledDatesRE=a}b.initDisabledDays();b.update(b.value,true);return b},setDisabledDays:function(a){this.disabledDays=a;return this.update(this.value,true)},setMinDate:function(a){this.minDate=a;return this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;return this.update(this.value,true)},setValue:function(a){this.value=Ext.Date.clearTime(a||new Date(),true);return this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(a){return a.substr(0,1)},onEnable:function(){Ext.Component.prototype.onEnable.call(this);this.syncDisabled(false);this.update(this.activeDate)},onShow:function(){Ext.Component.prototype.onShow.call(this);this.syncDisabled(false);if(this.pickerField){this.startValue=this.pickerField.getValue()}},onHide:function(){Ext.Component.prototype.onHide.call(this);this.syncDisabled(true)},onDisable:function(){Ext.Component.prototype.onDisable.call(this);this.syncDisabled(true)},getActive:function(){return this.activeDate||this.value},runAnimation:function(c){var b=this.monthPicker,a={duration:200,callback:function(){b.setVisible(!c)}};if(c){b.el.slideOut("t",a)}else{b.el.slideIn("t",a)}},hideMonthPicker:function(a){var c=this,b=c.monthPicker;if(b&&b.isVisible()){if(c.shouldAnimate(a)){c.runAnimation(true)}else{b.hide()}}return c},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(a){var d=this,c=d.el,b;if(d.rendered&&!d.disabled){b=d.createMonthPicker();if(!b.isVisible()){b.setValue(d.getActive());b.setSize(c.getSize());b.setPosition(-c.getBorderWidth("l"),-c.getBorderWidth("t"));if(d.shouldAnimate(a)){d.runAnimation(false)}else{b.show()}}}return d},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var b=this,a=b.monthPicker;if(!a){b.monthPicker=a=new Ext.picker.Month({renderTo:b.el,floating:true,padding:b.padding,shadow:false,small:b.showToday===false,listeners:{scope:b,cancelclick:b.onCancelClick,okclick:b.onOkClick,yeardblclick:b.onOkClick,monthdblclick:b.onOkClick}});if(!b.disableAnim){a.el.setStyle("display","none")}a.hide();b.on("beforehide",b.doHideMonthPicker,b)}return a},onOkClick:function(b,e){var d=this,f=e[0],c=e[1],a=new Date(c,f,d.getActive().getDate());if(a.getMonth()!==f){a=Ext.Date.getLastDateOfMonth(new Date(c,f,1))}d.setValue(a);d.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate);this.hideMonthPicker()},showPrevMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();if(b>0){this.showPrevMonth()}else{if(b<0){this.showNextMonth()}}}},handleDateClick:function(d,a){var c=this,b=c.handler;d.stopEvent();if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.setValue(new Date(a.dateValue));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var c=this,a=c.todayBtn,b=c.handler;if(a&&!a.disabled){c.setValue(Ext.Date.clearTime(new Date()));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}return c},selectedUpdate:function(e){var g=this,f=e.getTime(),d=g.cells,b=g.selectedCls,j,h=d.getCount(),a;a=g.activeCell;if(a){Ext.fly(a).removeCls(b);a.setAttribute("aria-selected",false)}for(j=0;j<h;j++){a=d.item(j);if(g.textNodes[j].dateValue==f){g.activeCell=a.dom;g.eventEl.dom.setAttribute("aria-activedescendant",a.dom.id);a.dom.setAttribute("aria-selected",true);a.addCls(b);g.fireEvent("highlightitem",g,a);break}}},fullUpdate:function(y){var C=this,d=C.cells.elements,c=C.textNodes,E=C.disabledCellCls,l=Ext.Date,u=0,B=0,j=+l.clearTime(y,true),x=+l.clearTime(new Date()),s=C.minDate?l.clearTime(C.minDate,true):Number.NEGATIVE_INFINITY,t=C.maxDate?l.clearTime(C.maxDate,true):Number.POSITIVE_INFINITY,A=C.disabledDatesRE,r=C.disabledDatesText,F=C.disabledDays?C.disabledDays.join(""):false,z=C.disabledDaysText,v=C.format,h=l.getDaysInMonth(y),o=l.getFirstDateOfMonth(y),e=o.getDay()-C.startDay,w=l.add(y,l.MONTH,-1),n=C.ariaTitleDateFormat,g,p,a,D,k,m,b,f,q;if(e<0){e+=7}h+=e;g=l.getDaysInMonth(w)-e;p=new Date(w.getFullYear(),w.getMonth(),g,C.initHour);if(C.showToday){D=l.clearTime(new Date());a=(D<s||D>t||(A&&v&&A.test(l.dateFormat(D,v)))||(F&&F.indexOf(D.getDay())!=-1));if(!C.disabled){C.todayBtn.setDisabled(a)}}k=function(I,H){var G=d[I];q=+l.clearTime(p,true);G.setAttribute("aria-label",l.format(p,n));G.firstChild.dateValue=q;if(q==x){H+=" "+C.todayCls;G.firstChild.title=C.todayText;C.todayElSpan=Ext.DomHelper.append(G.firstChild,{tag:"span",cls:"x-hidden-clip",html:C.todayText},true)}if(q==j){C.activeCell=G;C.eventEl.dom.setAttribute("aria-activedescendant",G.id);G.setAttribute("aria-selected",true);H+=" "+C.selectedCls;C.fireEvent("highlightitem",C,G)}else{G.setAttribute("aria-selected",false)}if(q<s){H+=" "+E;G.setAttribute("aria-label",C.minText)}else{if(q>t){H+=" "+E;G.setAttribute("aria-label",C.maxText)}else{if(F&&F.indexOf(p.getDay())!==-1){G.setAttribute("aria-label",z);H+=" "+E}else{if(A&&v){f=l.dateFormat(p,v);if(A.test(f)){G.setAttribute("aria-label",r.replace("%0",f));H+=" "+E}}}}}G.className=H+" "+C.cellCls};for(;u<C.numDays;++u){if(u<e){m=(++g);b=C.prevCls}else{if(u>=h){m=(++B);b=C.nextCls}else{m=u-e+1;b=C.activeCls}}c[u].innerHTML=m;p.setDate(p.getDate()+1);k(u,b)}C.monthBtn.setText(Ext.Date.format(y,C.monthYearFormat))},update:function(a,d){var b=this,c=b.activeDate;if(b.rendered){b.activeDate=a;if(!d&&c&&b.el&&c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear()){b.selectedUpdate(a,c)}else{b.fullUpdate(a,c)}}return b},beforeDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn);delete a.textNodes;delete a.cells.elements}Ext.Component.prototype.beforeDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.call(this);a.monthBtn.finishRender();if(a.showToday){a.todayBtn.finishRender()}},getFocusEl:function(){return this.eventEl},syncDisabled:function(b){var c=this,a=c.keyNav;if(a){a.setDisabled(b);c.prevRepeater.setDisabled(b);c.nextRepeater.setDisabled(b);if(c.todayBtn){c.todayBtn.setDisabled(b)}}}}},0,["datepicker"],["component","box","datepicker"],{component:true,box:true,datepicker:true},["widget.datepicker"],0,[Ext.picker,"Date",Ext,"DatePicker"],0));Ext.define("FBEditor.override.picker.Date",{override:"Ext.picker.Date"});(Ext.cmd.derive("Ext.form.field.Date",Ext.form.field.Picker,{alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:"x-form-date-trigger",showToday:true,useStrict:undefined,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,valuePublishEvent:["select","blur"],initComponent:function(){var d=this,b=Ext.isString,c,a;c=d.minValue;a=d.maxValue;if(b(c)){d.minValue=d.parseDate(c)}if(b(a)){d.maxValue=d.parseDate(a)}d.disabledDatesRE=null;d.initDisabledDays();Ext.form.field.Picker.prototype.initComponent.call(this)},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}Ext.form.field.Picker.prototype.initValue.call(this)},initDisabledDays:function(){if(this.disabledDates){var b=this.disabledDates,a=b.length-1,f="(?:",g,e=b.length,c;for(g=0;g<e;g++){c=b[g];f+=Ext.isDate(c)?"^"+Ext.String.escapeRegex(c.dateFormat(this.format))+"$":c;if(g!==a){f+="|"}}this.disabledDatesRE=new RegExp(f+")")}},setDisabledDates:function(c){var b=this,a=b.picker;b.disabledDates=c;b.initDisabledDays();if(a){a.setDisabledDates(b.disabledDatesRE)}},setDisabledDays:function(b){var a=this.picker;this.disabledDays=b;if(a){a.setDisabledDays(b)}},setMinValue:function(d){var b=this,a=b.picker,c=(Ext.isString(d)?b.parseDate(d):d);b.minValue=c;if(a){a.minText=Ext.String.format(b.minText,b.formatDate(b.minValue));a.setMinDate(c)}},setMaxValue:function(c){var b=this,a=b.picker,d=(Ext.isString(c)?b.parseDate(c):c);b.maxValue=d;if(a){a.maxText=Ext.String.format(b.maxText,b.formatDate(b.maxValue));a.setMaxDate(d)}},getErrors:function(p){p=arguments.length>0?p:this.formatDate(this.processRawValue(this.getRawValue()));var h=this,o=Ext.String.format,j=Ext.Date.clearTime,n=Ext.form.field.Picker.prototype.getErrors.call(this,p),m=h.disabledDays,d=h.disabledDatesRE,l=h.minValue,g=h.maxValue,f=m?m.length:0,e=0,a,b,k,c;if(p===null||p.length<1){return n}a=p;p=h.parseDate(p);if(!p){n.push(o(h.invalidText,a,Ext.Date.unescapeFormat(h.format)));return n}c=p.getTime();if(l&&c<j(l).getTime()){n.push(o(h.minText,h.formatDate(l)))}if(g&&c>j(g).getTime()){n.push(o(h.maxText,h.formatDate(g)))}if(m){k=p.getDay();for(;e<f;e++){if(k===m[e]){n.push(h.disabledDaysText);break}}}b=h.formatDate(p);if(d&&d.test(b)){n.push(o(h.disabledDatesText,b))}return n},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},safeParse:function(f,g){var e=this,c=Ext.Date,a=null,b=e.useStrict,d;if(c.formatContainsHourInfo(g)){a=c.parse(f,g,b)}else{d=c.parse(f+" "+e.initTime,g+" "+e.initTimeFormat,b);if(d){a=c.clearTime(d)}}return a},getSubmitValue:function(){var b=this.submitFormat||this.format,a=this.getValue();return a?Ext.Date.format(a,b):""},parseDate:function(e){if(!e||Ext.isDate(e)){return e}var d=this,g=d.safeParse(e,d.format),b=d.altFormats,f=d.altFormatsArray,c=0,a;if(!g&&b){f=f||b.split("|");a=f.length;for(;c<a&&!g;++c){g=d.safeParse(e,f[c])}}return g},formatDate:function(a){return Ext.isDate(a)?Ext.Date.dateFormat(a,this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return new Ext.picker.Date({pickerField:a,floating:true,focusable:false,hidden:true,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),maxText:b(a.maxText,a.formatDate(a.maxValue)),listeners:{scope:a,select:a.onSelect},keyNavConfig:{esc:function(){a.collapse()}}})},onSelect:function(a,c){var b=this;b.setValue(c);b.fireEvent("select",b,c);b.collapse()},onExpand:function(){var a=this.getValue();this.picker.setValue(Ext.isDate(a)?a:new Date())},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(Ext.isDate(a)){b.setValue(a)}Ext.form.field.Picker.prototype.onBlur.call(this,c)}},0,["datefield"],["component","box","field","textfield","pickerfield","datefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true},["widget.datefield"],0,[Ext.form.field,"Date",Ext.form,"DateField",Ext.form,"Date"],0));Ext.define("FBEditor.override.form.field.Date",{override:"Ext.form.field.Date",panelPicker:null,createPicker:function(){var b=this,a;a=(arguments.callee.$previous||Ext.form.field.Picker.prototype.createPicker).apply(this,arguments);a.fireHierarchyEvent=function(c){};return a},collapseIf:function(d){var b=this,a=b.picker.monthPicker,c;c=a&&a.isVisible()?a.owns(d.target):b.owns(d.target);if(!b.isDestroyed&&!d.within(b.bodyEl,false,true)&&!c){b.collapse()}}});(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:false,tabIndex:null,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],getAfterMarkup:function(a){return this.getTpl("afterTpl").apply(a)},getTemplateArgs:function(){var a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.inputCls=this.inputCls;a.inputName=this.inputName;a.tabIndex=this.ownerCt.tabIndex;return a},afterRender:function(){var a=this;Ext.button.Button.prototype.afterRender.apply(this,arguments);a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFocus,blur:a.onBlur})},fireChange:function(a){this.fireEvent("change",this,a,this.fileInputEl.dom.value)},createFileInput:function(a){var b=this;b.fileInputEl=b.el.createChild({name:b.inputName,id:!a?b.id+"-fileInputEl":undefined,cls:b.inputCls,tag:"input",type:"file",size:1,role:"button"});b.fileInputEl.on({scope:b,change:b.fireChange,focus:b.onFocus,blur:b.onBlur})},reset:function(a){if(a){this.fileInputEl.destroy()}this.createFileInput(!a)},restoreInput:function(a){this.fileInputEl.destroy();a=Ext.get(a);this.el.appendChild(a);this.fileInputEl=a},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=true},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=false},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:false,inputType:"hidden",isTextInput:false,hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(b,a){return this.isEqualAsString(b,a)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hiddenfield","hidden"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.picker.Time",Ext.view.BoundList,{increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:"x-timepicker",loadMask:false,initComponent:function(){var c=this,a=Ext.Date,b=a.clearTime,d=c.initDate;c.absMin=b(new Date(d[0],d[1],d[2]));c.absMax=a.add(b(new Date(d[0],d[1],d[2])),"mi",(24*60)-1);c.store=c.createStore();c.updateList();Ext.view.BoundList.prototype.initComponent.call(this)},setMinValue:function(a){this.minValue=a;this.updateList()},setMaxValue:function(a){this.maxValue=a;this.updateList()},normalizeDate:function(a){var b=this.initDate;a.setFullYear(b[0],b[1],b[2]);return a},updateList:function(){var e=this,b=e.normalizeDate(e.minValue||e.absMin),a=e.normalizeDate(e.maxValue||e.absMax),d=e.getStore().getFilters(),c=e.rangeFilter;d.beginUpdate();if(c){d.remove(c)}c=e.rangeFilter=new Ext.util.Filter({filterFn:function(f){var g=f.get("date");return g>=b&&g<=a}});d.add(c);d.endUpdate()},createStore:function(){var d=this,c=Ext.Date,e=[],b=d.absMin,a=d.absMax;while(b<=a){e.push({disp:c.dateFormat(b,d.format),date:b});b=c.add(b,"mi",d.increment)}return new Ext.data.Store({model:d.modelType,autoDestroy:true,data:e})}},0,["timepicker"],["component","box","dataview","boundlist","timepicker"],{component:true,box:true,dataview:true,boundlist:true,timepicker:true},["widget.timepicker"],0,[Ext.picker,"Time"],function(){this.prototype.modelType=Ext.define(null,{extend:"Ext.data.Model",fields:["disp","date"]})}));(Ext.cmd.derive("Ext.form.field.Time",Ext.form.field.ComboBox,{alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:"x-form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:true,snapToIncrement:false,valuePublishEvent:["select","blur"],initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",ignoreSelection:0,queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var c=this,b=c.minValue,a=c.maxValue;if(b){c.setMinValue(b)}if(a){c.setMaxValue(a)}c.store=c.getPicker().store;c.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+c.displayField+'"])]}<tpl if="xindex < xcount">'+c.delimiter+"</tpl></tpl>",{formatDate:c.formatDate.bind(c)});Ext.form.field.ComboBox.prototype.initComponent.call(this)},isEqual:function(f,e){var b=Ext.Array.from,d=Ext.Date.isEqual,c,a;f=b(f);e=b(e);a=f.length;if(a!==e.length){return false}for(c=0;c<a;c++){if(!d(e[c],f[c])){return false}}return true},setMinValue:function(c){var b=this,a=b.picker;b.setLimit(c,true);if(a){a.setMinValue(b.minValue)}},setMaxValue:function(c){var b=this,a=b.picker;b.setLimit(c,false);if(a){a.setMaxValue(b.maxValue)}},setLimit:function(b,f){var a=this,e,c;if(Ext.isString(b)){e=a.parseDate(b)}else{if(Ext.isDate(b)){e=b}}if(e){c=a.getInitDate();c.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}else{c=null}a[f?"minValue":"maxValue"]=c},getInitDate:function(a,b,d){var c=this.initDateParts;return new Date(c[0],c[1],c[2],a||0,b||0,d||0,0)},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},getErrors:function(k){k=arguments.length>0?k:this.getRawValue();var f=this,j=Ext.String.format,h=Ext.form.field.ComboBox.prototype.getErrors.call(this,k),g=f.minValue,e=f.maxValue,c=f.displayTplData,l=f.getRawValue(),b,d,a,m;if(c&&c.length>0){for(b=0,d=c.length;b<d;b++){m=c[b];m=m.date||m.disp;a=f.parseDate(m);if(!a){h.push(j(f.invalidText,m,Ext.Date.unescapeFormat(f.format)));continue}if(g&&a<g){h.push(j(f.minText,f.formatDate(g)))}if(e&&a>e){h.push(j(f.maxText,f.formatDate(e)))}}}else{if(l.length&&!f.parseDate(l)){h.push(j(f.invalidText,l,Ext.Date.unescapeFormat(f.format)))}}return h},formatDate:function(b){var d=[],c,a;b=Ext.Array.from(b);for(c=0,a=b.length;c<a;c++){d.push(Ext.form.field.Date.prototype.formatDate.call(this,b[c]))}return d.join(this.delimiter)},parseDate:function(e){var d=this,g=e,b=d.altFormats,f=d.altFormatsArray,c=0,a;if(e&&!Ext.isDate(e)){g=d.safeParse(e,d.format);if(!g&&b){f=f||b.split("|");a=f.length;for(;c<a&&!g;++c){g=d.safeParse(e,f[c])}}}if(g&&d.snapToIncrement){g=new Date(Ext.Number.snap(g.getTime(),d.increment*60*1000))}return g},safeParse:function(e,f){var d=this,b=Ext.Date,c,a=null;if(b.formatContainsDateInfo(f)){a=b.parse(e,f)}else{c=b.parse(d.initDate+" "+e,d.initDateFormat+" "+f);if(c){a=c}}return a},getSubmitValue:function(){var a=this,c=a.submitFormat||a.format,b=a.getValue();return b?Ext.Date.format(b,c):null},createPicker:function(){var b=this,a;b.listConfig=Ext.apply({xtype:"timepicker",pickerField:b,selModel:{mode:b.multiSelect?"SIMPLE":"SINGLE"},cls:undefined,minValue:b.minValue,maxValue:b.maxValue,increment:b.increment,format:b.format,maxHeight:b.pickerMaxHeight},b.listConfig);a=Ext.form.field.ComboBox.prototype.createPicker.call(this);return a},onItemClick:function(b,a){var d=this,c=b.getSelectionModel().getSelection();if(!d.multiSelect&&c.length){if(c.length>0){c=c[0];if(c&&Ext.Date.isEqual(a.get("date"),c.get("date"))){d.collapse()}}}},syncSelection:function(){var m=this,j=m.picker,l=Ext.Date.isEqual,c=[],g,n,o,e,h,p,b,k,f,a;if(j){j.clearHighlight();n=m.getValue();g=j.getSelectionModel();m.ignoreSelection++;if(n===null){g.deselectAll()}else{o=Ext.Array.from(n);b=j.store.data.items;f=b.length;for(e=0,h=o.length;e<h;e++){p=o[e];if(Ext.isDate(p)){for(k=0;k<f;k++){a=b[k];if(l(a.get("date"),p)){c.push(a);if(!m.multiSelect){break}}}if(c.length){g.select(c)}}}}m.ignoreSelection--}},postBlur:function(){var a=this,b=a.getValue();Ext.form.field.ComboBox.prototype.postBlur.apply(this,arguments);if(a.validateValue(b)){a.setValue(b)}},findRecordByValue:function(a){if(typeof a==="string"){a=this.parseDate(a)}return Ext.form.field.ComboBox.prototype.findRecordByValue.call(this,a)},rawToValue:function(f){var e=this,c,b,d,a;if(e.multiSelect){b=[];c=Ext.Array.from(f);for(d=0,a=c.length;d<a;d++){b.push(e.parseDate(c[d]))}return b}return e.parseDate(f)},setValue:function(a){this.getPicker();if(Ext.isDate(a)){a=this.getInitDate(a.getHours(),a.getMinutes(),a.getSeconds())}return Ext.form.field.ComboBox.prototype.setValue.call(this,a)},getValue:function(){return this.rawToValue(Ext.form.field.ComboBox.prototype.getValue.apply(this,arguments))}},0,["timefield"],["component","box","field","textfield","pickerfield","combobox","combo","timefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,timefield:true},["widget.timefield"],0,[Ext.form.field,"Time",Ext.form,"TimeField",Ext.form,"Time"],0));(Ext.cmd.derive("Ext.grid.ColumnManager",Ext.Base,{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(b,c,a){this.headerCt=c;if(a){this.secondHeaderCt=a}this.visibleOnly=!!b},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},hasVariableRowHeight:function(){var d=this,c=d.getColumns(),a=c.length,b;if(d.variableRowHeight==null){d.variableRowHeight=false;for(b=0;!d.variableRowHeight&&b<a;b++){d.variableRowHeight=!!c[b].variableRowHeight}}return d.variableRowHeight},getHeaderIndex:function(a){if(a.isGroupHeader){a=this.getHeaderColumns(a)[0]}return Ext.Array.indexOf(this.getColumns(),a)},getHeaderAtIndex:function(b){var c=this.getColumns(),a=c[b];return a||null},getPreviousSibling:function(c){var b=this.getHeaderIndex(c),a=null;if(b>0){a=this.getColumns()[b-1]}return a},getNextSibling:function(c){var b=this.getHeaderIndex(c),a;if(b!==-1){a=this.getColumns()[b+1]}return a||null},getFirst:function(){var a=this.getColumns();return a.length>0?a[0]:null},getLast:function(){var b=this.getColumns(),a=b.length;return a>0?b[a-1]:null},getHeaderByDataIndex:function(d){var c=this.getColumns(),a=c.length,b,e;for(b=0;b<a;++b){e=c[b];if(e.dataIndex===d){return e}}return null},getHeaderById:function(e){var c=this.getColumns(),a=c.length,b,d;for(b=0;b<a;++b){d=c[b];if(d.getItemId()===e){return d}}return null},getVisibleHeaderClosestToIndex:function(b){var a=this.getHeaderAtIndex(b);if(a&&a.hidden){a=a.next(":not([hidden])")||a.prev(":not([hidden])")}return a},cacheColumns:function(){var b=this.getHeaderColumns(this.headerCt),a=this.secondHeaderCt;if(a){b=b.concat(this.getHeaderColumns(a))}this.columns=b},getHeaderColumns:function(b){var a=this.visibleOnly?b.getVisibleGridColumns():b.getGridColumns();return Ext.Array.clone(a)},invalidate:function(){var a=this.rootColumns;this.columns=this.variableRowHeight=null;if(a){a.invalidate()}},destroy:function(){this.columns=this.rootColumns=null}},1,0,0,0,0,0,[Ext.grid,"ColumnManager",Ext.grid,"ColumnModel"],function(){this.createAlias("indexOf","getHeaderIndex")}));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,activeCls:"x-menu-item-active",ariaRole:"menuitem",canActivate:true,clickHideDelay:0,destroyMenu:true,disabledCls:"x-menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" role="menuitem" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",activate:function(b){var a=this;if(b||(!a.activated&&a.canActivate&&a.rendered&&!a.isDisabled()&&a.isVisible())){if(!a.plain){a.el.addCls(a.activeCls)}a.focus(false,true);a.activated=true;if(a.hasListeners.activate){a.fireEvent("activate",a)}}},deactivate:function(){var b=this,a;if(b.activated){a=b.up("");if(!b.plain){b.el.removeCls(b.activeCls)}if(a){a.focus(false,true)}b.hideMenu();b.activated=false;if(b.hasListeners.deactivate){b.fireEvent("deactivate",b)}}},deferHideMenu:function(){if(this.menu.isVisible()){this.menu.hide()}},cancelDeferHide:function(){clearTimeout(this.hideMenuTimer)},deferHideParentMenus:function(){var a;Ext.menu.Manager.hideAll();if(!Ext.Element.getActiveElement()){a=this.up(":not([hidden])");if(a){a.focus()}}},expandMenu:function(a){var b=this;if(b.menu){b.cancelDeferHide();if(a===0){b.doExpandMenu()}else{clearTimeout(b.expandMenuTimer);b.expandMenuTimer=Ext.defer(b.doExpandMenu,Ext.isNumber(a)?a:b.menuExpandDelay,b)}}},doExpandMenu:function(){var a=this,b=a.menu;if(a.activated&&(!b.rendered||!b.isVisible())){a.parentMenu.activeChild=b;b.ownerCmp=a;b.parentMenu=a.parentMenu;b.constrainTo=document.body;b.showBy(a,a.menuAlign)}},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},hideMenu:function(a){var b=this;if(b.menu){clearTimeout(b.expandMenuTimer);b.hideMenuTimer=Ext.defer(b.deferHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b)}},initComponent:function(){var b=this,c="x-",a="",d;if(b.plain){a+=c+"menu-item-plain"}if(b.cls){a+=" "+b.cls}b.cls=a;if(b.menu){d=b.menu;delete b.menu;b.setMenu(d)}Ext.Component.prototype.initComponent.apply(this,arguments)},onClick:function(d){var c=this,b=c.clickHideDelay,f=d.browserEvent,a;if(!c.href||c.disabled){d.stopEvent()}if(c.disabled||c.handlingClick){return}if(c.hideOnClick&&d.browserEvent.type!=="touchcancel"&&!(d.type==="tap"&&c.menu)){if(!b){c.deferHideParentMenus()}else{c.deferHideParentMenusTimer=Ext.defer(c.deferHideParentMenus,b,c)}}Ext.callback(c.handler,c.scope,[c,d],0,c);c.fireEvent("click",c,d);if(Ext.isIE9m){a=(f.returnValue===false)?true:false}else{a=!!f.defaultPrevented}if(c.href&&d.type!=="click"&&!a){c.handlingClick=true;c.itemEl.dom.click();delete c.handlingClick}if(!c.hideOnClick){c.focus()}},onRemoved:function(){var a=this;if(a.activated&&a.parentMenu.activeItem===a){a.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);a.parentMenu=a.ownerCmp=null},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;clearTimeout(a.expandMenuTimer);a.cancelDeferHide();clearTimeout(a.deferHideParentMenusTimer);a.setMenu(null);Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var j=this,k=j.glyph,h=Ext._glyphFontFamily,e=!!(j.icon||j.iconCls||k),l=!!j.menu,f=((j.iconAlign==="right")&&!l),c=j.isMenuCheckItem,a=[],d=j.ownerCt,g=d.plain,b;Ext.Component.prototype.beforeRender.call(this);if(e){if(l&&j.showCheckbox){e=false}}if(typeof k==="string"){b=k.split("@");k=b[0];h=b[1]}if(!g||(e&&!f)||c){if(d.showSeparator&&!g){a.push(j.indentCls)}else{a.push(j.indentNoSeparatorCls)}}if(l){a.push(j.indentRightArrowCls)}else{if(e&&(f||c)){a.push(j.indentRightIconCls)}}Ext.applyIf(j.renderData,{hasHref:!!j.href,href:j.href||"#",hrefTarget:j.hrefTarget,icon:j.icon,iconCls:j.iconCls,glyph:k,glyphCls:k?"x-menu-item-glyph":undefined,glyphFontFamily:h,hasIcon:e,hasMenu:l,indent:!g||e||c,isCheckItem:c,rightIcon:f,plain:j.plain,text:j.text,arrowCls:j.arrowCls,baseIconCls:j.baseIconCls,textCls:j.textCls,indentCls:a.join(" "),linkCls:j.linkCls,linkHrefCls:j.linkHrefCls,groupCls:j.group?j.groupCls:"",tabIndex:j.tabIndex})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.tooltip){a.setTooltip(a.tooltip,true)}},setMenu:function(e,d){var c=this,b=c.menu,a=c.arrowEl;if(b){b.ownerCmp=b.parentMenu=null;if(d===true||(d!==false&&c.destroyMenu)){Ext.destroy(b)}}if(e){e=c.menu=Ext.menu.Manager.get(e,{ownerCmp:c});e.ownerCmp=c}else{e=c.menu=null}if(e&&c.rendered&&!c.destroying&&a){a[e?"addCls":"removeCls"](c.arrowCls)}},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIcon:function(b){var a=this.iconEl,c=this.icon;if(a){a.src=b||Ext.BLANK_IMAGE_URL}this.icon=b;this.fireEvent("iconchange",this,c,b)},setIconCls:function(b){var d=this,a=d.iconEl,c=d.iconCls;if(a){if(d.iconCls){a.removeCls(d.iconCls)}if(b){a.addCls(b)}}d.iconCls=b;d.fireEvent("iconchange",d,c,b)},setText:function(d){var c=this,b=c.textEl||c.el,a=c.text;c.text=d;if(c.rendered){b.setHtml(d||"");c.ownerCt.updateLayout()}c.fireEvent("textchange",c,a,d)},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a){b.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.itemEl.id},c));b.tooltip=c}else{b.itemEl.dom.setAttribute(b.getTipAttr(),c)}}else{b.tooltip=c}return b},privates:{getFocusEl:function(){return this.itemEl}}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:false,checkChangeDisabled:false,ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var a=this;a.checked=!!a.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);Ext.menu.Manager.registerCheckable(a);if(a.group){if(a.initialConfig.hideOnClick!==false){a.hideOnClick=true}}},beforeRender:function(){var a=this;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(a.renderData,{checkboxCls:a.checkboxCls,showCheckbox:a.showCheckbox})},afterRender:function(){var a=this;Ext.menu.Item.prototype.afterRender.call(this);a.checked=!a.checked;a.setChecked(!a.checked,true);if(a.checkChangeDisabled){a.disableCheckChange()}},disableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.addCls(b.disabledCls)}if(Ext.isIE8&&b.rendered){b.el.repaint()}b.checkChangeDisabled=true},enableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.removeCls(b.disabledCls)}b.checkChangeDisabled=false},onClick:function(b){var a=this;if(!a.disabled&&!a.checkChangeDisabled&&!(a.checked&&a.group)){a.setChecked(!a.checked)}Ext.menu.Item.prototype.onClick.call(this,b)},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setChecked:function(d,b){var c=this,e=c.checkedCls,f=c.uncheckedCls,a=c.el;if(c.checked!==d&&(b||c.fireEvent("beforecheckchange",c,d)!==false)){if(a){if(d){a.addCls(e);a.removeCls(f)}else{a.addCls(f);a.removeCls(e)}}c.checked=d;Ext.menu.Manager.onCheckChange(c,d);if(!b){Ext.callback(c.checkHandler,c.scope||c,[c,d]);c.fireEvent("checkchange",c,d)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.KeyNav",Ext.util.KeyNav,{constructor:function(a){var b=this;b.menu=a.target;Ext.util.KeyNav.prototype.constructor.call(this,Ext.apply({down:b.down,enter:b.enter,esc:b.escape,left:b.left,right:b.right,space:b.enter,tab:b.tab,up:b.up},a))},down:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==b.DOWN&&a.isWhitelisted(c)){return true}a.focusNextItem(1)},enter:function(b){var c=this.menu,a=c.focusedItem;if(c.activeItem){c.onClick(b)}else{if(a&&a.isFormField){return true}}},escape:function(a){Ext.menu.Manager.hideAll()},focusNextItem:function(b){var a=this.menu,e=a.items,g=a.focusedItem,f=g?e.indexOf(g):-1,h=f+b,d=e.length,c=0,j;while(c<d&&h!==f){if(h<0){h=d-1}else{if(h>=d){h=0}}j=e.getAt(h);if(a.canActivateItem(j)){a.setActiveItem(j);break}h+=b;++c}},isWhitelisted:function(a){return !!a.needArrowKeys},left:function(a){var b=this.menu,c=b.focusedItem;if(c&&this.isWhitelisted(c)){return true}if(b.parentMenu){b.hide();b.parentMenu.focus()}},right:function(c){var d=this.menu,f=d.focusedItem,a=d.activeItem,b;if(f&&this.isWhitelisted(f)){return true}if(a){b=d.activeItem.menu;if(b){a.expandMenu(0);b.setActiveItem(b.child(":focusable"))}}},tab:function(b){var a=this;if(b.shiftKey){a.up(b)}else{a.down(b)}},up:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==b.UP&&a.isWhitelisted(c)){return true}a.focusNextItem(-1)}},1,0,0,0,0,0,[Ext.menu,"KeyNav"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:false,canActivate:false,hideOnClick:false,plain:true,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(a,c){var b=this;Ext.menu.Item.prototype.beforeRender.call(this);b.addCls(b.separatorCls)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));Ext.define("ExtThemeNeptune.menu.Separator",{override:"Ext.menu.Separator",border:true});(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",focusable:true,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var b=this,a=["x-menu"],c=b.bodyCls?[b.bodyCls]:[],d=b.floating!==false;Ext.menu.Manager.register(b);if(b.plain){a.push("x-menu-plain")}b.cls=a.join(" ");c.push("x-menu-body",Ext.dom.Element.unselectableCls);b.bodyCls=c.join(" ");if(d){if(b.minWidth===undefined){b.minWidth=b.defaultMinWidth}}else{b.hidden=!!b.initialConfig.hidden;b.constrain=false}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(b.getLayout(),{configureItem:b.configureItem})},initFloatConstrain:Ext.emptyFn,initHierarchyEvents:Ext.emptyFn,getInherited:function(){var a=Ext.panel.Panel.prototype.getInherited.call(this);a.hidden=this.hidden;return a},beforeRender:function(){Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!this.getSizeModel().width.shrinkWrap){this.layout.align="stretch"}},onBoxReady:function(){var b=this,a={click:b.onClick,mouseover:b.onMouseOver,scope:b},c=b._iconSeparatorCls;if(Ext.supports.Touch){a.pointerdown=b.onMouseOver;b.mon(Ext.GlobalEvents,"mousedown",b.onDocMouseDown,b)}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(b.showSeparator){b.iconSepEl=b.body.insertFirst({role:"presentation",cls:c+" "+c+"-"+b.ui,html:"&#160;"})}b.mon(b.el,a);b.mouseMonitor=b.el.monitorMouseLeave(100,b.onMouseLeave,b);if(b.enableKeyNav){b.keyNav=new Ext.menu.KeyNav({target:b,keyMap:b.getKeyMap()})}},canActivateItem:function(a){return a&&!a.isDisabled()&&a.isVisible()&&(a.canActivate||!a.isMenuItem)},deactivateActiveItem:function(b){var c=this,d=c.activeItem,a=c.focusedItem;if(d){d.deactivate();if(!d.activated){delete c.activeItem}}if(a&&b){a.blur();delete c.focusedItem}},hide:function(){this.deactivateActiveItem(true);Ext.panel.Panel.prototype.hide.apply(this,arguments)},getItemFromEvent:function(d){var a=this,c=a.layout.getRenderTarget().dom,b=d.getTarget();while(b.parentNode!==c){b=b.parentNode;if(!b){return}}return Ext.getCmp(b.id)},lookupComponent:function(b){var a=this;if(typeof b=="string"){b=a.lookupItemFromString(b)}else{if(Ext.isObject(b)){b=a.lookupItemFromObject(b)}}b.minWidth=b.minWidth||a.minWidth;return b},lookupItemFromObject:function(b){var a=this;if(!b.isComponent){if(!b.xtype){b=Ext.create("Ext.menu."+(Ext.isBoolean(b.checked)?"Check":"")+"Item",b)}else{b=Ext.ComponentManager.create(b,b.xtype)}}if(b.isMenuItem){b.parentMenu=a}return b},lookupItemFromString:function(a){return(a=="separator"||a=="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:a})},configureItem:function(c){var b=this.owner,e="x-",d=b.ui,a,f;if(c.isMenuItem){c.setUI(d)}else{if(b.items.getCount()>1&&!c.rendered&&!c.dock){f=b._itemCmpCls;a=[f+" "+f+"-"+d];if(!b.plain&&(c.indent!==false||c.iconCls==="no-icon")){a.push(e+"menu-item-indent-"+d)}if(c.rendered){c.el.addCls(a)}else{c.cls=(c.cls||"")+" "+a.join(" ")}}}this.callParent(arguments)},onClick:function(d){var c=this,a=d.type,b;if(c.disabled){d.stopEvent();return}b=(a!=="keydown")?c.getItemFromEvent(d):c.activeItem;if(b&&b.isMenuItem){if(!b.menu||!c.ignoreParentClicks){b.onClick(d)}else{d.stopEvent()}}if(!b||b.disabled){b=undefined}c.fireEvent("click",c,b,d)},onDestroy:function(){var a=this;Ext.menu.Manager.unregister(a);a.parentMenu=a.ownerCmp=null;if(a.rendered){a.el.un(a.mouseMonitor);Ext.destroy(a.keyNav);a.keyNav=null}Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onDocMouseDown:function(a){if(!this.owns(a.target)){this.deactivateActiveItem()}},onMouseLeave:function(b){var a=this;a.deactivateActiveItem();if(a.disabled){return}a.fireEvent("mouseleave",a,b)},onMouseOver:function(g){var f=this,h=g.getRelatedTarget(),b=!f.el.contains(h),d=f.getItemFromEvent(g),c=f.parentMenu,a=f.ownerCmp;if(b&&c){c.setActiveItem(a);a.cancelDeferHide();c.mouseMonitor.mouseenter()}if(f.disabled){return}if(d&&!d.activated){f.setActiveItem(d);if(d.activated&&d.expandMenu){d.expandMenu()}}if(b){f.fireEvent("mouseenter",f,g)}f.fireEvent("mouseover",f,d,g)},setActiveItem:function(b){var a=this;if(b&&(b!=a.activeItem)){a.deactivateActiveItem();if(a.canActivateItem(b)){if(b.activate){b.activate(true);if(b.activated){a.activeItem=b;a.focusedItem=b}}else{b.focus();a.focusedItem=b}}}},beforeShow:function(){var b=this,a;if(b.floating){b.savedMaxHeight=b.maxHeight;a=b.container.getViewSize().height;b.maxHeight=Math.min(b.maxHeight||a,a)}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var a=this;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);if(a.floating){a.maxHeight=a.savedMaxHeight}},privates:{getFocusEl:function(){return this.el}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],0,[Ext.menu,"Menu"],0));Ext.define("ExtThemeNeptune.menu.Menu",{override:"Ext.menu.Menu",showSeparator:false});(Ext.cmd.derive("Ext.grid.locking.HeaderContainer",Ext.grid.header.Container,{headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(b){var a=this,d=b.lockedGrid,c=b.normalGrid;a.lockable=b;Ext.grid.header.Container.prototype.constructor.call(this);d.visibleColumnManager.rootColumns=c.visibleColumnManager.rootColumns=b.visibleColumnManager=a.visibleColumnManager=new Ext.grid.ColumnManager(true,d.headerCt,c.headerCt);d.columnManager.rootColumns=c.columnManager.rootColumns=b.columnManager=a.columnManager=new Ext.grid.ColumnManager(false,d.headerCt,c.headerCt);a.relayEvents(d.headerCt,a.headerCtRelayEvents);a.relayEvents(c.headerCt,a.headerCtRelayEvents)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var b=this,a=b.lockable.lockedGrid.headerCt.getColumnsState(),c=b.lockable.normalGrid.headerCt.getColumnsState();return a.concat(c)},applyColumnsState:function(g){var o=this,e=o.lockable.lockedGrid,f=e.headerCt,m=o.lockable.normalGrid.headerCt,p=Ext.Array.toValueMap(f.items.items,"headerId"),h=Ext.Array.toValueMap(m.items.items,"headerId"),l=[],n=[],k=1,b=g.length,j,a,d,c;for(j=0;j<b;j++){c=g[j];d=p[c.id];a=d||h[c.id];if(a){if(a.applyColumnState){a.applyColumnState(c)}if(a.locked===undefined){a.locked=!!d}if(a.locked){l.push(a);if(!a.hidden&&typeof a.width=="number"){k+=a.width}}else{n.push(a)}}}if(l.length+n.length==f.items.getCount()+m.items.getCount()){f.removeAll(false);m.removeAll(false);f.add(l);m.add(n);e.setWidth(k)}}},1,0,["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},0,0,[Ext.grid.locking,"HeaderContainer"],0));(Ext.cmd.derive("Ext.grid.locking.View",Ext.Base,{alternateClassName:"Ext.grid.LockingView",isLockingView:true,loadMask:true,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(a){var d=this,c,b;d.ownerGrid=a.ownerGrid;d.navigationModel=new Ext.grid.NavigationModel(d);a.locked.viewConfig.bindStore=a.normal.viewConfig.bindStore=Ext.emptyFn;a.locked.viewConfig.beforeLayout=a.normal.viewConfig.beforeLayout=d.beforeLayout;a.locked.viewConfig.navigationModel=a.normal.viewConfig.navigationModel=d.navigationModel;d.lockedGrid=d.ownerGrid.lockedGrid=Ext.ComponentManager.create(a.locked);d.lockedView=c=d.lockedGrid.getView();if(d.lockedGrid.isTree){d.lockedView.animate=false;a.normal.store=c.store;a.normal.viewConfig.stripeRows=d.lockedView.stripeRows;a.normal.rowLines=d.lockedGrid.rowLines}d.normalGrid=d.ownerGrid.normalGrid=Ext.ComponentManager.create(a.normal);c.lockingPartner=b=d.normalView=d.normalGrid.getView();b.lockingPartner=c;c.isLockedView=b.isNormalView=true;d.loadMask=(a.loadMask!==undefined)?a.loadMask:d.loadMask;d.mixins.observable.constructor.call(d);d.relayEvents(c,Ext.view.Table.events);d.relayEvents(b,Ext.view.Table.events);b.on({scope:d,itemmouseleave:d.onItemMouseLeave,itemmouseenter:d.onItemMouseEnter});c.on({scope:d,itemmouseleave:d.onItemMouseLeave,itemmouseenter:d.onItemMouseEnter});d.ownerGrid.on({render:d.onPanelRender,scope:d});d.loadingText=b.loadingText;d.loadingCls=b.loadingCls;d.loadingUseMsg=b.loadingUseMsg;d.bindStore(b.dataSource,true,"dataSource");d.getSelectionModel().bindStore(d.ownerGrid.store)},beforeLayout:function(){var c=this.ownerCt.ownerLockable.view,b=c.lockedGrid.view,a=c.normalGrid.view;if(!c.relayingOperation){if(c.lockedGrid.isVisible()){if(b.refreshNeeded){b.doFirstRefresh(b.dataSource)}}if(a.refreshNeeded){a.doFirstRefresh(a.dataSource)}}},onPanelRender:function(){var c=this,b=c.loadMask,a={target:c.ownerGrid,msg:c.loadingText,msgCls:c.loadingCls,useMsg:c.loadingUseMsg,store:c.ownerGrid.store};c.el=c.ownerGrid.getTargetEl();c.rendered=true;c.initFocusableEvents();c.fireEvent("render",c);if(b){if(Ext.isObject(b)){a=Ext.apply(a,b)}c.loadMask=new Ext.LoadMask(a)}},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(a){return this.getViewForColumn(a).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getViewForColumn:function(b){var a=this.lockedView,c;a.headerCt.cascade(function(d){if(d===b){c=true;return false}});return c?a:this.normalView},onItemMouseEnter:function(c,b){var f=this,d=f.lockedView,a=f.normalView,e;if(c.trackOver){if(c!==d){a=d}e=a.getNode(b);a.highlightItem(e)}},onItemMouseLeave:function(c,b){var e=this,d=e.lockedView,a=e.normalView;if(c.trackOver){if(c!==d){a=d}a.clearHighlight()}},relayFn:function(c,b){b=b||[];var a=this.lockedView;this.relayingOperation=true;a[c].apply(a,b);a=this.normalView;a[c].apply(a,b);this.relayingOperation=false},getSelectionModel:function(){return this.ownerGrid.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(a,b,d){var c=this;if(!b&&d!=="dataSource"){c.getSelectionModel().bindStore(a)}if(c.normalView.componentLayoutCounter){Ext.suspendLayouts();c.normalView.doFirstRefresh(a);c.lockedView.doFirstRefresh(a);Ext.resumeLayouts(true)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.refresh}},onDataRefresh:function(){this.relayFn("onDataRefresh",arguments)},onReplace:function(){this.relayFn("onReplace",arguments)},onAdd:function(){this.relayFn("onAdd",arguments)},onRemove:function(){this.relayFn("onRemove",arguments)},onUpdate:function(){this.relayFn("onUpdate",arguments)},refresh:function(){this.relayFn("refresh",arguments)},getNode:function(a){return this.normalView.getNode(a)},getRow:function(a){return this.normalView.getRow(a)},getCell:function(b,c){var a=this.getViewForColumn(c),d=a.getRow(b);return Ext.fly(d).down(c.getCellSelector())},indexOf:function(b){var a=this.lockedView.indexOf(b);if(!a){a=this.normalView.indexOf(b)}return a},focus:function(){this.getFocusEl().focus()},focusRow:function(c){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;a.focusRow(c)},focusCell:function(a){a.view.focusCell(a)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(a){return this.ownerGrid.isVisible(a)},getFocusEl:function(){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;return a.getFocusEl()},getCellInclusive:function(d,b){var a=d.column,c=this.lockedGrid.getColumnManager().getColumns().length;if(a>=c){d=Ext.apply({},d);d.column-=c;return this.normalView.getCellInclusive(d,b)}else{return this.lockedView.getCellInclusive(d,b)}},getCellByPosition:function(e,c){var d=this,a=e.view,b=e.column;if(a===d){a=b.getView()}return a.getCellByPosition(e,c)},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!a){a=this.normalView.getRecord(b)}return a},scrollBy:function(){var a=this.normalView;a.scrollBy.apply(a,arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var a=this;a.bindStore(null,false,"dataSource");a.isDestroyed=true;a.clearListeners();Ext.destroy(a.loadMask,a.navigationModel,a.selModel)}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext.grid.locking,"View",Ext.grid,"LockingView"],function(){this.borrow(Ext.Component,["up"]);this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"])}));(Ext.cmd.derive("Ext.grid.locking.Lockable",Ext.Base,{alternateClassName:"Ext.grid.Lockable",supportsOverflowX:"overflow-x" in document.documentElement.style,syncRowHeight:true,headerCounter:0,scrollDelta:40,lockedGridCls:"x-grid-inner-locked",normalGridCls:"x-grid-inner-normal",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["invalidateScrollerOnRefresh","hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer"],normalCfgCopy:["verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(e){var c=this,g,d,b,f,a;if(c.subGridXType){g=c.subGridXType}else{if(!e){return"gridpanel"}d=this.getXTypes().split("/");b=d.length;f=d[b-1];a=d[b-2];if(a!=="tablepanel"){g=a}else{g=f}}return g},injectLockable:function(){this.focusable=false;this.lockable=true;this.hasView=true;var s=this,e=Ext.getScrollbarSize().height,c=s.store=Ext.StoreManager.lookup(s.store),h=s.getSelectionModel(),k,l,q,g,m,b,d,p,f,t,j,r=s.viewConfig,a=r&&r.loadMask,n=(a!==undefined)?a:s.loadMask,o=s.findPlugin("bufferedrenderer");k=s.constructLockableFeatures();s.features=null;l=s.constructLockablePlugins();s.plugins=l.topPlugins;q=Ext.apply({id:s.id+"-locked",isLocked:true,ownerGrid:s,ownerLockable:s,xtype:s.determineXTypeToCreate(true),store:c,bufferedRenderer:s.bufferedRenderer,scrollerOwner:false,animate:false,scroll:e?false:"vertical",selModel:h,border:false,cls:s.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||s.normalGrid.floatedFromCollapse},features:k.lockedFeatures,plugins:l.lockedPlugins},s.lockedGridConfig);g=Ext.apply({id:s.id+"-normal",isLocked:false,ownerGrid:s,ownerLockable:s,xtype:s.determineXTypeToCreate(),store:c,bufferedRenderer:s.bufferedRenderer,scrollerOwner:false,selModel:h,border:false,cls:s.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||s.lockedGrid.floatedFromCollapse},features:k.normalFeatures,plugins:l.normalPlugins},s.normalGridConfig);s.addCls("x-grid-locked");Ext.copyTo(g,s,s.bothCfgCopy,true);Ext.copyTo(q,s,s.bothCfgCopy,true);Ext.copyTo(g,s,s.normalCfgCopy,true);Ext.copyTo(q,s,s.lockedCfgCopy,true);for(m=0;m<s.normalCfgCopy.length;m++){delete s[s.normalCfgCopy[m]]}for(m=0;m<s.lockedCfgCopy.length;m++){delete s[s.lockedCfgCopy[m]]}s.addStateEvents(["lockcolumn","unlockcolumn"]);b=s.processColumns(s.columns,q);q.columns=b.locked;if(!q.columns.items.length){q.hidden=true}g.columns=b.normal;if(!g.columns.items.length){g.hidden=true}g.flex=1;q.viewConfig=s.lockedViewConfig||{};g.viewConfig=s.normalViewConfig||{};q.viewConfig.loadingUseMsg=false;q.viewConfig.loadMask=false;if(e&&!s.supportsOverflowX){q.viewConfig.style="border-bottom:"+e+"px solid #f6f6f6;"+(q.viewConfig.style||"");g.viewConfig.style="border-bottom:"+e+"px solid #f6f6f6;"+(q.viewConfig.style||"")}g.viewConfig.loadMask=false;Ext.applyIf(q.viewConfig,r);Ext.applyIf(g.viewConfig,r);if(!s.initialConfig.layout){s.layout={type:"hbox",align:"stretch"}}s.getLayout();if(s.layout.type==="border"){if(s.split){q.split=true}if(!g.title){q.header=false}if(!q.region){q.region="west"}if(!g.region){g.region="center"}s.addCls("x-grid-locked-split")}if(!(s.layout instanceof Ext.layout.container.Box)){s.split=false}s.view=new Ext.grid.locking.View({loadMask:n,locked:q,normal:g,ownerGrid:s});f=s.lockedGrid.getView();t=s.normalGrid.getView();j=o?{}:{scroll:s.onLockedViewScroll,scope:s};if(e){s.lockedGrid.on({afterlayout:s.afterLockedViewLayout,scope:s});f.getOverflowStyle();if(!f.scrollFlags.y){j.mousewheel={fn:s.onLockedViewMouseWheel,element:"el",scope:s}}}f.on(j);j=o?{}:{scroll:s.onNormalViewScroll,scope:s};t.on(j);d=s.lockedGrid.headerCt;p=s.normalGrid.headerCt;s.headerCt=s.view.headerCt=new Ext.grid.locking.HeaderContainer(s);d.lockedCt=true;d.lockableInjected=true;p.lockableInjected=true;d.on({add:s.delaySyncLockedWidth,remove:s.delaySyncLockedWidth,columnshow:s.delaySyncLockedWidth,columnhide:s.delaySyncLockedWidth,sortchange:s.onLockedHeaderSortChange,columnresize:s.delaySyncLockedWidth,scope:s});p.on({add:s.delaySyncLockedWidth,remove:s.delaySyncLockedWidth,columnshow:s.delaySyncLockedWidth,columnhide:s.delaySyncLockedWidth,sortchange:s.onNormalHeaderSortChange,scope:s});s.modifyHeaderCt();s.items=[s.lockedGrid];if(s.split){s.addCls("x-grid-locked-split");s.items[1]={xtype:"splitter"}}s.items.push(s.normalGrid);s.relayHeaderCtEvents(d);s.relayHeaderCtEvents(p);s.storeRelayers=s.relayEvents(c,["filterchange","groupchange"]);s.gridRelayers=s.relayEvents(s.normalGrid,["viewready"])},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(f,d){var m=this,g,j,e,l=new Ext.grid.header.Container(),k=[],c=[],b={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:k},h={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:c},o={lockedWidth:d.width||0,locked:b,normal:h},n=!(d.width||d.flex),a;if(!m.hasOwnProperty("shrinkWrapLocked")){m.shrinkWrapLocked=n}if(Ext.isObject(f)){Ext.applyIf(b,f);Ext.applyIf(h,f);a=Ext.apply({},f);delete a.items;Ext.apply(l,a);f=f.items}for(g=0,j=f.length;g<j;++g){e=f[g];if(!e.isComponent){e=l.lookupComponent(l.applyDefaults(e))}e.processed=true;if(e.locked||e.autoLock){if(n&&!e.hidden){o.lockedWidth+=m.getColumnWidth(e)||l.defaultWidth}k.push(e)}else{c.push(e)}if(!e.headerId){e.headerId=(e.initialConfig||e).id||("h"+(++m.headerCounter))}}m.fireEvent("processcolumns",m,k,c);l.destroy();if(n){d.width=(o.lockedWidth+=Ext.num(m.getSelectionModel().headerWidth,0)+(k.length?1:0))}return o},getColumnWidth:function(e){var b=e.width||0,d,a,c;if(!b&&e.isGroupHeader){d=e.items.items;a=d.length;for(c=0;c<a;c++){b+=this.getColumnWidth(d[c])}}return b},afterLockedViewLayout:function(){var f=this,e=f.lockedGrid.getView(),d=f.normalGrid.getView(),a=e.el,b=d.el,g=Ext.getScrollbarSize().height,c=(e.scrollFlags.x&&f.lockedGrid.headerCt.tooNarrow?g:0),h=(d.scrollFlags.x&&f.normalGrid.headerCt.tooNarrow?g:0);if(c!==h){if(c){if(f.supportsOverflowX){b.dom.style.overflowX="scroll";e.getOverflowEl().setStyle(e.getOverflowStyle())}else{b.dom.style.borderBottomWidth=c+"px";a.dom.style.borderBottomWidth="0px"}}else{if(f.supportsOverflowX){a.dom.style.overflowX="scroll";d.getOverflowEl().setStyle(d.getOverflowStyle())}else{a.dom.style.borderBottomWidth=h+"px";b.dom.style.borderBottomWidth="0px"}}}else{if(f.supportsOverflowX){e.getOverflowEl().dom.style.overflowX=h?"scroll":"";d.getOverflowEl().setStyle(d.getOverflowStyle())}else{b.dom.style.borderBottomWidth=a.dom.style.borderBottomWidth="0px"}}},onLockedViewMouseWheel:function(j){var d=this,a=-d.scrollDelta*j.getWheelDeltas().y,c=d.lockedGrid.getView(),f=c.el.dom,h,b,g;if(!d.ignoreMousewheel){if(f){h=c.getScrollY();b=h!==f.scrollHeight-f.clientHeight;g=h!==0}if((a<0&&g)||(a>0&&b)){j.stopEvent();h+=a;c.setScrollY(h);d.normalGrid.getView().setScrollY(h);d.onNormalViewScroll()}}},onLockedViewScroll:function(){var f=this,e=f.lockedGrid.getView(),d=f.normalGrid.getView(),c=e.getScrollY(),g=d.getScrollY(),a,b;if(g!==c){d.setScrollY(c);if(d.bufferedRenderer){b=e.body.dom;a=d.body.dom;a.style.position="absolute";a.style.top=b.style.top}}},onNormalViewScroll:function(){var d=this,c=d.lockedGrid.getView(),b=d.normalGrid.getView(),a=c.getScrollY(),f=b.getScrollY(),e;if(f!==a){c.setScrollY(f);if(b.bufferedRenderer){e=c.body;if(e.dom){e.dom.style.position="absolute";e.translate(null,b.bufferedRenderer.bodyTop)}}}},syncRowHeights:function(){if(!this.isDestroyed){var f=this,a,e=f.lockedGrid.getView(),b=f.normalGrid.getView(),g=e.all.slice(),d=b.all.slice(),c=g.length,h;if(d.length===c){for(a=0;a<c;a++){b.syncRowHeights(g[a],d[a])}h=b.getScrollY();b.setScrollY(h);e.setScrollY(h)}}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(a.lockedGrid.headerCt.getMenuItems,true);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(a.normalGrid.headerCt.getMenuItems,false);a.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.lockedGrid.headerCt.showMenuBy,a.showMenuBy);a.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.normalGrid.headerCt.showMenuBy,a.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(b,f){var e=this.getMenu(),c=e.down("#unlockItem"),d=e.down("#lockItem"),a=c.prev();if(f.lockable===false){a.hide();c.hide();d.hide()}else{a.show();c.show();d.show();if(!c.initialConfig.disabled){c.setDisabled(f.lockable===false)}if(!d.initialConfig.disabled){d.setDisabled(!f.isLockable())}}},getMenuItems:function(f,c){var g=this,h=g.unlockText,a=g.lockText,j="x-hmenu-unlock",b="x-hmenu-lock",e=g.onUnlockMenuClick.bind(g),d=g.onLockMenuClick.bind(g);return function(){var k=f.call(this);k.push("-",{itemId:"unlockItem",iconCls:j,text:h,handler:e,disabled:!c});k.push({itemId:"lockItem",iconCls:b,text:a,handler:d,disabled:c});return k}},delaySyncLockedWidth:function(){var b=this,a=b.syncLockedWidthTask;if(!a){a=b.syncLockedWidthTask=new Ext.util.DelayedTask(b.syncLockedWidth,b)}a.delay(1)},syncLockedWidth:function(){var f=this,c=f.lockedGrid,e=c.view,d=e.el.dom,h=f.normalGrid,g=c.headerCt.getVisibleGridColumns().length,a=h.headerCt.getVisibleGridColumns().length,b=f.syncLockedWidthTask;if(b){b.cancel()}Ext.suspendLayouts();if(a){h.show();if(g){if(f.shrinkWrapLocked&&!c.headerCt.forceFit){delete c.flex;c.setWidth(c.headerCt.getTableWidth()+c.el.getBorderWidth("lr"))}c.addCls(f.lockedGridCls);c.show();if(f.split){f.child("splitter").show()}}else{c.getView().clearViewEl(true);c.hide();if(f.split){f.child("splitter").hide()}}e.el.setStyle(e.getOverflowStyle());f.ignoreMousewheel=e.scrollFlags.y}else{h.hide();d.style.borderBottomWidth="0";c.flex=1;delete c.width;c.removeCls(f.lockedGridCls);c.show();e.el.setStyle(h.view.getOverflowStyle());f.ignoreMousewheel=true}Ext.resumeLayouts(true);return[g,a]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(e,k,d){var g=this,f=g.normalGrid,b=g.lockedGrid,c=f.view,l=b.view,j=f.headerCt,h,a;e=e||j.getMenu().activeHeader;d=d||b.headerCt;a=e.ownerCt;if(!e.isLockable()){return}if(e.flex){e.width=e.getWidth();e.flex=null}Ext.suspendLayouts();c.blockRefresh=l.blockRefresh=true;a.remove(e,false);e.locked=true;g.ignoreAddLockedColumn=true;if(Ext.isDefined(k)){d.insert(k,e)}else{d.add(e)}g.ignoreAddLockedColumn=false;c.blockRefresh=l.blockRefresh=false;h=g.syncLockedWidth();if(h[0]){b.getView().refreshView()}if(h[1]){f.getView().refreshView()}Ext.resumeLayouts(true);g.fireEvent("lockcolumn",g,e)},unlock:function(d,j,c){var f=this,e=f.normalGrid,a=f.lockedGrid,b=e.view,k=a.view,h=a.headerCt,g;if(!Ext.isDefined(j)){j=0}d=d||h.getMenu().activeHeader;c=c||e.headerCt;Ext.suspendLayouts();b.blockRefresh=k.blockRefresh=true;d.ownerCt.remove(d,false);d.locked=false;c.insert(j,d);b.blockRefresh=k.blockRefresh=false;g=f.syncLockedWidth();if(g[0]){a.getView().refreshView()}if(g[1]){e.getView().refreshView()}Ext.resumeLayouts(true);f.fireEvent("unlockcolumn",f,d)},reconfigureLockable:function(b,c){var d=this,g=d.store,f=d.lockedGrid,e=d.normalGrid,a;Ext.suspendLayouts();if(c){f.reconfiguring=e.reconfiguring=true;f.headerCt.removeAll();e.headerCt.removeAll();c=d.processColumns(c,f);d.ignoreAddLockedColumn=true;f.headerCt.add(c.locked.items);d.ignoreAddLockedColumn=false;e.headerCt.add(c.normal.items);f.reconfiguring=e.reconfiguring=false;d.syncLockedWidth()}if(b&&b!==g){b=Ext.data.StoreManager.lookup(b);d.store=b;f.bindStore(b);a=f.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}e.bindStore(b);a=e.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}d.view.store=b;d.view.bindStore(b,false,"dataSource")}else{f.getView().refreshView();e.getView().refreshView()}Ext.resumeLayouts(true)},constructLockableFeatures:function(){var e=this.features,c,d,f,g,b=0,a;if(e){if(!Ext.isArray(e)){e=[e]}f=[];g=[];a=e.length;for(;b<a;b++){c=e[b];if(!c.isFeature){c=Ext.create("feature."+c.ftype,c)}switch(c.lockableScope){case"locked":f.push(c);break;case"normal":g.push(c);break;default:c.lockableScope="both";f.push(c);g.push(d=c.clone());d.lockingPartner=c;c.lockingPartner=d}}}return{normalFeatures:g,lockedFeatures:f}},constructLockablePlugins:function(){var c=this.plugins,g,b,a,j,k,e,f=0,h,l,d;if(c){if(!Ext.isArray(c)){c=[c]}j=[];k=[];e=[];h=c.length;for(;f<h;f++){g=c[f];if(g.init){l=g.lockableScope}else{d=g.ptype?Ext.ClassManager.getByAlias(("plugin."+g.ptype)):Ext.ClassManager.get(g.xclass);l=d.prototype.lockableScope}switch(l){case"both":k.push(a=g.clonePlugin());e.push(b=g.clonePlugin());a.lockingPartner=b;b.lockingPartner=a;Ext.destroy(g);break;case"locked":k.push(g);break;case"normal":e.push(g);break;default:j.push(g)}}}return{topPlugins:j,normalPlugins:e,lockedPlugins:k}},destroyLockable:function(){var b=this,a=b.syncLockedWidthTask;if(a){a.cancel();b.syncLockedWidthTask=null}Ext.destroy(b.view,b.headerCt)}},0,0,0,0,0,0,[Ext.grid.locking,"Lockable",Ext.grid,"Lockable"],function(){this.borrow(Ext.Component,["constructPlugin"])}));(Ext.cmd.derive("Ext.grid.plugin.BufferedRenderer",Ext.AbstractPlugin,{isBufferedRenderer:true,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:true,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,init:function(c){var d=this,a=c.view,b={scroll:d.onViewScroll,resize:d.onViewResize,refresh:d.onViewRefresh,columnschanged:d.checkVariableRowHeight,scope:d,destroyable:true},e=a.initialConfig;if(c.isTree||(c.ownerLockable&&c.ownerLockable.isTree)){a.blockRefresh=false;if(e&&e.loadMask===undefined){a.loadMask=true}}if(a.positionBody){b.refresh=d.onViewRefresh}d.grid=c;d.view=a;d.isRTL=a.getInherited().rtl;a.bufferedRenderer=d;a.preserveScrollOnRefresh=true;a.animate=false;d.bindStore(a.dataSource);if(a.hasOwnProperty("rowHeight")){d.rowHeight=a.rowHeight}d.position=0;d.gridListeners=c.on("reconfigure",d.onReconfigure,d);d.viewListeners=a.on(b)},checkVariableRowHeight:function(){var b=this,a=b.grid;b.variableRowHeight=b.view.hasVariableRowHeight();if(a.ownerLockable){a.ownerLockable.syncRowHeight=b.variableRowHeight}},bindStore:function(c){var d=this,b=d.view,e=b.dataSource,a=e&&e.isFeatureStore;if(a===c.isFeatureStore){if(d.store){d.unbindStore()}d.storeListeners=c.on({scope:d,groupchange:d.onStoreGroupChange,clear:d.onStoreClear,destroyable:true});d.store=c}if(d.view.componentLayout.layoutCount){delete d.viewSize;if(c.isBufferedStore){c.setViewSize(d.viewSize)}d.onViewResize(d.view,0,d.view.getHeight())}},onReconfigure:function(b,a){if(a&&a!==this.store){this.bindStore(a)}},unbindStore:function(){this.storeListeners.destroy();this.store=null},onStoreClear:function(){var b=this,a=b.view;if(a.rendered&&!b.store.isDestroyed){if(b.scrollTop!==0){b.bodyTop=b.scrollTop=b.position=b.scrollHeight=0;b.view.setScrollY(0)}b.lastScrollDirection=b.scrollOffset=null;if(!a.hasOwnProperty("rowHeight")){delete b.rowHeight}}},onStoreGroupChange:function(a){var b=this;delete b.rowHeight;b.stretchView(b.view,b.getScrollHeight())},onViewRefresh:function(b,c){var e=this,f=b.all,g=e.scrollHeight,a,d;e.checkVariableRowHeight();if(e.variableRowHeight&&!b.componentLayoutCounter){b.on({boxready:e.onViewRefresh,scope:e,single:true});return}if(!b.hasOwnProperty("rowHeight")&&f.getCount()){delete e.rowHeight}d=e.getScrollHeight();if(d!=g){e.stretchView(b,d)}if(e.refreshing){return}if(e.scrollTop!==b.getScrollY()){e.onViewScroll()}else{if(!e.hasOwnProperty("bodyTop")){e.bodyTop=f.startIndex*e.rowHeight;b.setScrollY(e.bodyTop)}e.setBodyTop(e.bodyTop);a=b.getHeight();if(f.getCount()&&a>0){e.onViewResize(b,null,a);if(c&&(f.getCount()!==c.length)){c.length=0;c.push.apply(c,e.store.getRange(f.startIndex,f.endIndex))}}}},onViewResize:function(c,e,a,b,g){var f=this,d;f.tableTopBorderWidth=c.body.getBorderWidth("t");if(!g||a!==g){d=Math.ceil(a/f.rowHeight)+f.trailingBufferZone+f.leadingBufferZone;f.viewSize=f.setViewSize(d);f.viewClientHeight=c.el.dom.clientHeight}},onWrappedColumnWidthChange:function(b,d){var c=this,a=c.view;if(c.store.getCount()&&c.bodyTop){delete c.rowHeight;c.stretchView(a,c.getScrollHeight(true));c.setViewSize(Math.ceil(a.getHeight()/c.rowHeight)+c.trailingBufferZone+c.leadingBufferZone);if(c.viewSize>=c.store.getCount()){c.setBodyTop(0)}else{if(d>b&&c.bodyTop+a.body.dom.offsetHeight-1>c.scrollHeight){c.setBodyTop(Math.max(0,c.scrollHeight-a.body.dom.offsetHeight))}else{if(c.bodyTop>c.scrollTop||c.bodyTop+a.body.dom.offsetHeight<c.scrollTop+a.getHeight(true)){c.setBodyTop(c.scrollTop-c.trailingBufferZone*c.rowHeight)}}}}},stretchView:function(b,a){var e=this,d=e.store.getCount(),c=b.getTargetEl(),f;if(e.scrollTop>a){e.position=e.scrollTop=a-b.body.dom.offsetHeight;e.view.setScrollY(e.scrollTop)}if(e.bodyTop>a){b.body.translate(null,e.bodyTop=e.position)}if(b.touchScroll){if(b.scrollManager){e.refreshScroller(b,a)}else{if(!e.pendingScrollerRefresh){b.on({boxready:function(){e.refreshScroller(b,a);e.pendingScrollerRefresh=false},single:true});e.pendingScrollerRefresh=true}}}if(!Ext.supports.touchScroll||Ext.supports.touchScroll===1){if(!e.stretcher){c=b.getTargetEl();if(b.refreshCounter){b.fixedNodes++}f={style:{width:"1px",height:"1px",marginTop:(a-1)+"px",position:"absolute"}};f.style[e.isRTL?"right":"left"]=0;e.stretcher=c.createChild(f,c.dom.firstChild)}if(e.hasOwnProperty("viewSize")&&d<=e.viewSize){e.stretcher.dom.style.display="none"}else{e.stretcher.dom.style.marginTop=(a-1)+"px";e.stretcher.dom.style.display=""}}},refreshScroller:function(b,a){b.scrollManager.scroller.setSize({x:b.headerCt.getTableWidth(),y:a});b.scrollManager.refresh()},setViewSize:function(m){var l=this,p=l.store,n=l.view,q=n.all,c=q.getCount(),a,d,h=l.view.lockingPartner&&l.view.lockingPartner.bufferedRenderer,o=c-m,f,e,b,g,k;if(o){l.scrollTop=l.view.getScrollY();l.viewSize=m;if(p.isBufferedStore){p.setViewSize(m)}if(c){k=p.getCount();a=q.startIndex;d=Math.min(a+m-1,k-1);if(!(a===q.startIndex&&d===q.endIndex)){if(h){h.disable()}if(o<0){if(k>c){p.getRange(q.endIndex+1,d,{callback:function(j,r){g=n.doAdd(j,r);n.fireEvent("itemadd",j,r,g)}})}}else{a=q.endIndex-(o-1);d=q.endIndex;q.removeRange(a,d,true);if(n.hasListeners.itemremove){b=p.getRange(a,d);for(f=d,e=b.length-1;e>=0;--f,--e){n.fireEvent("itemremove",b[e],f,l)}}}if(h){h.enable()}}}}return m},getViewRange:function(){var b=this,c=b.view.all,a=b.store,d=0;if(c.getCount()){d=c.startIndex}else{if(a.isBufferedStore){if(!a.currentPage){a.currentPage=1}d=c.startIndex=(a.currentPage-1)*(a.pageSize||1);a.currentPage=1}}if(a.data.getCount()){return a.getRange(d,d+b.viewSize-1)}else{return[]}},onReplace:function(h,j,b,d){var f=this,g=f.view,k=g.all,a=k.getCount(),e=h.getCount(),c=k.first(true);if(!a||j<=f.getLastVisibleRowIndex()+f.leadingBufferZone||(a<f.viewSize&&d.length>b.length)||e<a){f.refreshView();a=k.getCount();if(d.length<b.length){if(k.endIndex===e-1&&a<f.viewSize&&a<e){k.scroll(h.getRange(Math.max(0,e-f.viewSize),k.startIndex-1),-1,0);if(e>f.viewSize){f.setBodyTop(f.bodyTop-c.offsetTop)}}if(e<=f.viewSize){if(f.stretcher){f.setBodyTop(0);f.stretcher.dom.style.display="none"}}else{if(f.bodyTop+g.body.dom.offsetHeight-1>f.scrollHeight){f.setBodyTop(f.scrollHeight-(g.body.dom.offsetHeight-1))}}}}else{f.refreshing=true;f.onViewRefresh(g);f.refreshing=false}},scrollTo:function(l,d,p,r){var h=this,k=h.view,q=k.el.dom,m=h.store,j=m.getCount(),g,b,f,a,o,c,n,e;if((c=k.dataSource.groupingFeature)&&(c.collapsible!==false)){l=Math.min(Math.max(l,0),k.store.getCount()-1);e=k.store.getAt(l);n=c.getGroup(e);if(n.isCollapsed){c.expand(n.getGroupKey());j=m.getCount()}l=c.indexOf(e)}else{l=Math.min(Math.max(l,0),j-1)}g=Math.max(Math.min(l-(Math.floor((h.leadingBufferZone+h.trailingBufferZone)/2)),j-h.viewSize+1),0);o=Math.max(g*h.rowHeight-h.tableTopBorderWidth,0);b=Math.min(g+h.viewSize-1,j-1);m.getRange(g,b,{callback:function(t,u,s){h.renderRange(u,s,true);f=m.data.getRange(l,l+1)[0];a=k.getNode(f);k.body.translate(null,h.bodyTop=o);h.position=h.scrollTop=o=Math.min(Math.max(0,o-k.body.getOffsetsTo(a)[1]),q.scrollHeight-q.clientHeight);k.setScrollY(o);if(Ext.isIE){k.setScrollY(o)}if(d){k.selModel.select(f)}if(p){p.call(r||h,l,f)}}})},onViewScroll:function(){var f=this,c=f.store,a=(c.getCount()),e,h,g=f.scrollTop=f.view.getScrollY(),b=false,d=f.view.lockingPartner&&f.view.lockingPartner.bufferedRenderer;if(!(f.disabled||a<f.viewSize)){e=g-f.position;h=e>0?1:-1;if(Math.abs(e)>=20||(h!==f.lastScrollDirection)){f.lastScrollDirection=h;b=f.handleViewScroll(f.lastScrollDirection)}}if(!b){if(d&&d.scrollTop!==g){d.view.setScrollY(d.position=g)}}},handleViewScroll:function(g){var e=this,f=e.view.all,a=e.store,h=e.viewSize,c=(a.getCount())-1,d,b;if(g===-1){if(f.startIndex){if(e.topOfViewCloseToEdge()){d=Math.max(0,e.getLastVisibleRowIndex()+e.trailingBufferZone-h)}}}else{if(f.endIndex<c){if(e.bottomOfViewCloseToEdge()){d=Math.max(0,e.getFirstVisibleRowIndex()-e.trailingBufferZone)}}}if(d!=null){b=Math.min(d+h-1,c);if(e.variableRowHeight&&b===f.endIndex&&b<c){b++;e.viewSize=h++;if(a.isBufferedStore){a.setViewSize(e.viewSize)}}if(d!==f.startIndex||b!==f.endIndex){e.renderRange(d,b);return true}}},bottomOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop+a.view.body.dom.offsetHeight<a.scrollTop+a.view.lastBox.height+(a.numFromEdge*a.rowHeight)}else{return(a.view.all.endIndex-a.getLastVisibleRowIndex())<a.numFromEdge}},topOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop>a.scrollTop-(a.numFromEdge*a.rowHeight)}else{return(a.getFirstVisibleRowIndex()-a.view.all.startIndex)<a.numFromEdge}},refreshView:function(g){var d=this,f=d.view.all,a=d.store,b=(a.getCount())-1,e,c=d.view.grid.containsFocus;g=Math.max(0,Math.min(g==null?f.startIndex:g,b-(d.viewSize-d.leadingBufferZone)+1));e=Math.min(Math.max(f.startIndex+d.viewSize-1,d.getLastVisibleRowIndex()+d.leadingBufferZone),b);if(e-g+1>d.viewSize){g=e-d.viewSize+1}a.getRange(g,e,{callback:d.doRefreshView,scope:d,containedFocus:c})},doRefreshView:function(g,k,f,m){var h=this,j=h.view,c=j.getNavigationModel(),l=j.all,b=l.getCount(),e,a=k!==l.startIndex,d;if(j.refreshCounter){j.refreshing=h.refreshing=true;j.clearViewEl(true);if(g.length){e=j.doAdd(g,k);j.refreshSize(l.getCount()!==b);if(a){if(k>l.startIndex){d+=l.item(k,true).offsetTop}else{if(h.variableRowHeight){d=h.scrollTop-h.rowHeight*(h.scrollTop<h.position?h.leadingBufferZone:h.trailingBufferZone)}else{d=k*h.rowHeight-h.tableTopBorderWidth}}h.setBodyTop(d)}j.fireEvent("refresh",j,g)}if(m.containedFocus){c.setPosition(c.getLastFocused(),null,null,null,true)}j.headerCt.setSortState();j.refreshNeeded=j.refreshing=h.refreshing=false}else{j.refresh()}},renderRange:function(f,a,e){var c=this,d=c.view.all,b=c.store;if(!(f===d.startIndex&&a===d.endIndex)){if(b.rangeCached(f,a)){c.cancelLoad();if(c.synchronousRender||e){c.onRangeFetched(null,f,a)}else{if(!c.renderTask){c.renderTask=new Ext.util.DelayedTask(c.onRangeFetched,c,null,false)}c.renderTask.delay(1,null,null,[null,f,a])}}else{c.attemptLoad(f,a)}}},onRangeFetched:function(k,d,c,b,l){var s=this,j=s.view,a,h=j.all,e,r=0,o,f,g=s.view.lockingPartner&&s.view.lockingPartner.bufferedRenderer,p,q,n,m=s.variableRowHeight;if(j.isDestroyed){return}if(k){s.scrollTop=s.view.getScrollY()}else{k=s.store.getRange(d,c);if(!k){return}}if(m){o=s.scrollTop-s.rowHeight*(s.scrollTop<s.position?s.leadingBufferZone:s.trailingBufferZone)}else{o=d*s.rowHeight-s.tableTopBorderWidth}if(d<h.startIndex&&c>h.endIndex){q=h.startIndex-d;j.clearViewEl(true);p=j.doAdd(k,d);j.fireEvent("itemadd",k,d,p);for(n=0;n<q;n++){r-=p[n].offsetHeight}s.setBodyTop(s.bodyTop+r);return}if(s.teleported||d>h.endIndex||c<h.startIndex){j.clearViewEl(true);f=o;s.teleported=false}if(!h.getCount()){p=j.doAdd(k,d);j.fireEvent("itemadd",k,d,p)}else{if(c>h.endIndex){e=Math.max(d-h.startIndex,0);if(m){r=h.item(h.startIndex+e,true).offsetTop}h.scroll(Ext.Array.slice(k,h.endIndex+1-d),1,e,d,c);if(m){f=s.bodyTop+r}else{f=o}}else{e=Math.max(h.endIndex-c,0);a=h.startIndex;h.scroll(Ext.Array.slice(k,0,h.startIndex-d),-1,e,d,c);if(m){f=s.bodyTop-h.item(a,true).offsetTop;if(!h.startIndex){if(f){j.setScrollY(s.position=(s.scrollTop-=f));f=0}}else{if(f<0){r=h.startIndex*s.rowHeight;j.setScrollY(s.position=(s.scrollTop+=r));f=s.bodyTop+r}}}else{f=o}}}s.position=s.scrollTop;f=Math.max(Math.floor(f),0);if(j.positionBody){s.setBodyTop(f)}if(g&&!g.disabled&&!l){g.onRangeFetched(null,d,c,b,true);if(g.bodyTop!==f){g.setBodyTop(f)}if(g.scrollTop!==s.scrollTop){g.view.setScrollY(g.scrollTop=g.position=s.scrollTop)}}},setBodyTop:function(d){var e=this,b=e.view,c=e.store,a=b.body;a.translate((e.isRTL&&Ext.supports.xOriginBug&&b.scrollFlags.y)?Ext.getScrollbarSize().width:null,e.bodyTop=d);if(e.variableRowHeight){if(b.all.endIndex===(c.getCount())-1){e.stretchView(b,e.bodyTop+a.dom.offsetHeight-1)}else{if(e.bodyTop+a.dom.offsetHeight-1>e.scrollHeight){e.stretchView(b,e.scrollHeight+=((c.getCount())-b.all.endIndex)*e.rowHeight)}}}},getFirstVisibleRowIndex:function(k,c,b,f){var g=this,h=g.view,m=h.all,a=m.elements,d=g.viewClientHeight,e,l,j=g.bodyTop;if(m.getCount()&&g.variableRowHeight){if(!arguments.length){k=m.startIndex;c=m.endIndex;b=g.scrollTop;f=b+d;if(j>f||j+h.body.dom.offsetHeight<b){g.teleported=true;return Math.floor(g.scrollTop/g.rowHeight)}e=k+Math.min(g.numFromEdge+((g.lastScrollDirection===-1)?g.leadingBufferZone:g.trailingBufferZone),Math.floor((c-k)/2))}else{e=k+Math.floor((c-k)/2)}l=j+a[e].offsetTop;if(l+a[e].offsetHeight<b){return g.getFirstVisibleRowIndex(e+1,c,b,f)}if(l<=b){return e}else{if(e!==k){return g.getFirstVisibleRowIndex(k,e-1,b,f)}}}return Math.floor(g.scrollTop/g.rowHeight)},getLastVisibleRowIndex:function(l,c,b,f){var h=this,j=h.view,n=j.all,a=n.elements,d=h.viewClientHeight,e,m,g,k=h.bodyTop;if(n.getCount()&&h.variableRowHeight){if(!arguments.length){l=n.startIndex;c=n.endIndex;b=h.scrollTop;f=b+d;if(k>f||k+j.body.dom.offsetHeight<b){h.teleported=true;return Math.floor(h.scrollTop/h.rowHeight)+Math.ceil(d/h.rowHeight)}e=c-Math.min(h.numFromEdge+((h.lastScrollDirection===1)?h.leadingBufferZone:h.trailingBufferZone),Math.floor((c-l)/2))}else{e=l+Math.floor((c-l)/2)}m=k+a[e].offsetTop;if(m>f){return h.getLastVisibleRowIndex(l,e-1,b,f)}g=m+a[e].offsetHeight;if(g>=f){return e}else{if(e!==c){return h.getLastVisibleRowIndex(e+1,c,b,f)}}}return h.getFirstVisibleRowIndex()+Math.ceil(d/h.rowHeight)},getScrollHeight:function(f){var g=this,a=g.view,h=a.all,c=g.store,d=c.getCount(),b,e;if(!d){return 0}if(!g.hasOwnProperty("rowHeight")){if(b=h.getCount()){g.rowHeight=g.variableRowHeight?Math.floor(a.body.dom.clientHeight/b):h.first(true).offsetHeight}}e=Math.floor(d*g.rowHeight);if(!f){if(e&&(h.endIndex===d-1)){e=Math.max(e,g.bodyTop+a.body.dom.offsetHeight-1)}}return g.scrollHeight=e},attemptLoad:function(c,a){var b=this;if(b.scrollToLoadBuffer){if(!b.loadTask){b.loadTask=new Ext.util.DelayedTask(b.doAttemptLoad,b,[])}b.loadTask.delay(b.scrollToLoadBuffer,b.doAttemptLoad,b,[c,a])}else{b.store.getRange(c,a,{callback:b.onRangeFetched,scope:b,fireEvent:false})}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(b,a){this.store.getRange(b,a,{callback:this.onRangeFetched,scope:this,fireEvent:false})},destroy:function(){var b=this,a=b.view;if(a&&a.el){a.un("scroll",b.onViewScroll,b)}Ext.destroy(b.viewListeners,b.storeListeners,b.gridListeners)}},0,0,0,0,["plugin.bufferedrenderer"],0,[Ext.grid.plugin,"BufferedRenderer"],function(a){if(Ext.supports.Touch){a.prototype.leadingBufferZone=a.prototype.trailingBufferZone=2;a.prototype.numFromEdge=1}}));(Ext.cmd.derive("Ext.layout.ClassList",Ext.Base,(function(){var b=Ext.String.splitWords,a=Ext.Array.toMap;return{dirty:false,constructor:function(c){this.owner=c;this.map=a(this.classes=b(c.el.className))},add:function(c){var d=this;if(!d.map[c]){d.map[c]=true;d.classes.push(c);if(!d.dirty){d.dirty=true;d.owner.markDirty()}}},addMany:function(c){Ext.each(b(c),this.add,this)},contains:function(c){return this.map[c]},flush:function(){this.owner.el.className=this.classes.join(" ");this.dirty=false},remove:function(c){var d=this;if(d.map[c]){delete d.map[c];d.classes=Ext.Array.filter(d.classes,function(e){return e!=c});if(!d.dirty){d.dirty=true;d.owner.markDirty()}}},removeMany:function(d){var e=this,c=a(b(d));e.classes=Ext.Array.filter(e.classes,function(f){if(!c[f]){return true}delete e.map[f];if(!e.dirty){e.dirty=true;e.owner.markDirty()}return false})}}}()),1,0,0,0,0,0,[Ext.layout,"ClassList"],0));(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(c){var b=this,a=b.getKey(c);if(!b.map[a]){++b.length;b.items.push(c);b.map[a]=c}return c},clear:function(){var b=this,a=b.items;b.items=[];b.map={};b.length=0;return a},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(e){var d=this,c=d.getKey(e),a=d.items,b;if(d.map[c]){b=Ext.Array.indexOf(a,e);Ext.Array.erase(a,b,1);delete d.map[c];--d.length}return e}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(r){var s=this,p=Ext.layout.SizeModel.sizeModels,k=p.configured,j=p.shrinkWrap,b,q,n,m,f,d,t,e,o,l,c,h,g,a;Ext.apply(s,r);b=s.el;s.id=b.id;s.flushedProps={};s.props=f={};s.styles={};t=s.target;if(!t.isComponent){q=b.lastBox}else{s.wrapsComponent=true;s.framing=t.frameSize||null;s.isComponentChild=t.ownerLayout&&t.ownerLayout.isComponentLayout;q=t.lastBox;n=t.ownerCt;if(n&&(m=n.el&&s.context.items[n.el.id])){s.ownerCtContext=m}s.sizeModel=d=t.getSizeModel(m&&m.widthModel.pairsByHeightOrdinal[m.heightModel.ordinal]);s.widthModel=h=d.width;s.heightModel=g=d.height;if(q&&q.invalid===false){l=(t.width===(e=q.width));c=(t.height===(o=q.height));if(h===j&&g===j){a=true}else{if(h===k&&l){a=g===j||(g===k&&c)}}if(a){s.optOut=true;f.width=e;f.height=o}}}s.lastBox=q},init:function(h,c){var s=this,a=s.props,d=s.dirty,k=s.ownerCtContext,o=s.target.ownerLayout,g=!s.state,t=h||g,e,m,l,p,b,u,v=s.heightModel,f=s.widthModel,j,q,r=0;s.dirty=s.invalid=false;s.props={};s.remainingChildDimensions=0;if(s.boxChildren){s.boxChildren.length=0}if(!g){s.clearAllBlocks("blocks");s.clearAllBlocks("domBlocks")}if(!s.wrapsComponent){return t}u=s.target;s.state={};if(g){if(u.beforeLayout&&u.beforeLayout!==Ext.emptyFn){u.beforeLayout()}if(!k&&(p=u.ownerCt)){k=s.context.items[p.el.id]}if(k){s.ownerCtContext=k;s.isBoxParent=o&&o.isItemBoxParent(s)}else{s.isTopLevel=true}s.frameBodyContext=s.getEl("frameBody")}else{k=s.ownerCtContext;s.isTopLevel=!k;e=s.children;for(m=0,l=e.length;m<l;++m){e[m].init(true)}}s.hasRawContent=!(u.isContainer&&u.items.items.length>0);if(h){s.widthModel=s.heightModel=null;b=u.getSizeModel(k&&k.widthModel.pairsByHeightOrdinal[k.heightModel.ordinal]);if(g){s.sizeModel=b}s.widthModel=b.width;s.heightModel=b.height;if(k&&!s.isComponentChild){if(o.needsItemSize||!u.liquidLayout){k.remainingChildDimensions+=2}else{if(s.widthModel.calculated){++k.remainingChildDimensions}if(s.heightModel.calculated){++k.remainingChildDimensions}}}}else{if(a){s.recoverProp("x",a,d);s.recoverProp("y",a,d);if(s.widthModel.calculated){s.recoverProp("width",a,d)}else{if("width" in a){++r}}if(s.heightModel.calculated){s.recoverProp("height",a,d)}else{if("height" in a){++r}}if(k&&!s.isComponentChild){k.remainingChildDimensions+=r}}}if(a&&o&&o.manageMargins){s.recoverProp("margin-top",a,d);s.recoverProp("margin-right",a,d);s.recoverProp("margin-bottom",a,d);s.recoverProp("margin-left",a,d)}if(c){j=c.heightModel;q=c.widthModel;if(q&&j&&f&&v){if(f.shrinkWrap&&v.shrinkWrap){if(q.constrainedMax&&j.constrainedMin){j=null}}}if(q){s.widthModel=q}if(j){s.heightModel=j}if(c.state){Ext.apply(s.state,c.state)}}return t},initContinue:function(e){var g=this,d=g.ownerCtContext,a=g.target,c=g.widthModel,f=a.getInherited(),b;if(c.fixed){f.inShrinkWrapTable=false}else{delete f.inShrinkWrapTable}if(e){if(d&&c.shrinkWrap){b=d.isBoxParent?d:d.boxParent;if(b){b.addBoxChild(g)}}else{if(c.natural){g.boxParent=d}}}return e},initDone:function(d){var b=this,a=b.props,c=b.state;if(b.remainingChildDimensions===0){a.containerChildrenSizeDone=true}if(d){a.containerLayoutDone=true}if(b.boxChildren&&b.boxChildren.length&&b.widthModel.shrinkWrap){b.el.setWidth(10000);c.blocks=(c.blocks||0)+1}},initAnimation:function(){var b=this,c=b.target,a=b.ownerCtContext;if(a&&a.isTopLevel){b.animatePolicy=c.ownerLayout.getAnimatePolicy(b)}else{if(!a&&c.isCollapsingOrExpanding&&c.animCollapse){b.animatePolicy=c.componentLayout.getAnimatePolicy(b)}}if(b.animatePolicy){b.context.queueAnimation(b)}},addCls:function(a){this.getClassList().addMany(a)},removeCls:function(a){this.getClassList().removeMany(a)},addBlock:function(b,d,e){var c=this,f=c[b]||(c[b]={}),a=f[e]||(f[e]={});if(!a[d.id]){a[d.id]=d;++d.blockCount;++c.context.blockCount}},addBoxChild:function(d){var c=this,b,a=d.widthModel;d.boxParent=this;d.measuresBox=a.shrinkWrap?d.hasRawContent:a.natural;if(d.measuresBox){b=c.boxChildren;if(b){b.push(d)}else{c.boxChildren=[d]}}},addPositionStyles:function(d,b){var a=b.x,e=b.y,c=0;if(a!==undefined){d.left=a+"px";++c}if(e!==undefined){d.top=e+"px";++c}return c},addTrigger:function(f,g){var e=this,a=g?"domTriggers":"triggers",h=e[a]||(e[a]={}),b=e.context,d=b.currentLayout,c=h[f]||(h[f]={});if(!c[d.id]){c[d.id]=d;++d.triggerCount;c=b.triggers[g?"dom":"data"];(c[d.id]||(c[d.id]=[])).push({item:this,prop:f});if(e.props[f]!==undefined){if(!g||!(e.dirty&&(f in e.dirty))){++d.firedTriggers}}}},boxChildMeasured:function(){var b=this,c=b.state,a=(c.boxesMeasured=(c.boxesMeasured||0)+1);if(a==b.boxChildren.length){c.clearBoxWidth=1;++b.context.progressCount;b.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(a){var b=a.getStyles(a.borderNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},marginInfo:function(a){var b=a.getStyles(a.marginNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},paddingInfo:function(b){var a=b.frameBodyContext||b,c=a.getStyles(b.paddingNames,b.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(a){var c=this[a],b;if(c){for(b in c){this.clearBlocks(a,b)}}},clearBlocks:function(c,f){var g=this[c],b=g&&g[f],d,e,a;if(b){delete g[f];d=this.context;for(a in b){e=b[a];--d.blockCount;if(!--e.blockCount&&!e.pending&&!e.done){d.queueLayout(e)}}}},block:function(a,b){this.addBlock("blocks",a,b)},domBlock:function(a,b){this.addBlock("domBlocks",a,b)},fireTriggers:function(b,f){var g=this[b],d=g&&g[f],c=this.context,e,a;if(d){for(a in d){e=d[a];++e.firedTriggers;if(!e.done&&!e.blockCount&&!e.pending){c.queueLayout(e)}}}},flush:function(){var b=this,a=b.dirty,c=b.state,d=b.el;b.dirtyCount=0;if(b.classList&&b.classList.dirty){b.classList.flush()}if("attributes" in b){d.set(b.attributes);delete b.attributes}if("innerHTML" in b){d.innerHTML=b.innerHTML;delete b.innerHTML}if(c&&c.clearBoxWidth){c.clearBoxWidth=0;b.el.setStyle("width",null);if(!--c.blocks){b.context.queueItemLayouts(b)}}if(a){delete b.dirty;b.writeProps(a,true)}},flushAnimations:function(){var o=this,c=o.previousSize,l,n,e,g,f,d,h,m,k,a,b;if(c){l=o.target;n=l.getAnimationProps();e=n.duration;g=Ext.Object.getKeys(o.animatePolicy);f=Ext.apply({},{from:{},to:{},duration:e||Ext.fx.Anim.prototype.duration},n);for(d=0,h=0,m=g.length;h<m;h++){k=g[h];a=c[k];b=o.peek(k);if(a!=b){k=o.translateProps[k]||k;f.from[k]=a;f.to[k]=b;++d}}if(d){if(o.isCollapsingOrExpanding===1){l.componentLayout.undoLayout(o)}else{o.writeProps(f.from)}o.el.animate(f);Ext.fx.Manager.getFxQueue(o.el.id)[0].on({afteranimate:function(){if(o.isCollapsingOrExpanding===1){l.componentLayout.redoLayout(o);l.afterCollapse(true)}else{if(o.isCollapsingOrExpanding===2){l.afterExpand(true)}}}})}}},getBorderInfo:function(){var a=this,b=a.borderInfo;if(!b){a.borderInfo=b=a.checkCache("borderInfo")}return b},getClassList:function(){return this.classList||(this.classList=new Ext.layout.ClassList(this))},getEl:function(c,a){var e=this,f,d,b;if(c){if(c.dom){d=c}else{f=e.target;if(a){f=a}d=f[c];if(typeof d=="function"){d=d.call(f);if(d===e.el){return this}}}if(d){b=e.context.getEl(e,d)}}return b||null},getFrameInfo:function(){var c=this,d=c.frameInfo,b,a;if(!d){b=c.framing;a=c.getBorderInfo();c.frameInfo=d=b?{top:b.top+a.top,right:b.right+a.right,bottom:b.bottom+a.bottom,left:b.left+a.left,width:b.width+a.width,height:b.height+a.height}:a}return d},getMarginInfo:function(){var d=this,g=d.marginInfo,b,a,f,e,c;if(!g){if(!d.wrapsComponent){g=d.checkCache("marginInfo")}else{b=d.target;e=b.ownerLayout;c=e?e.id:null;a=e&&e.manageMargins;g=b.margin$;if(g&&g.ownerId!==c){g=null}if(!g){g=d.parseMargins(b,b.margin)||d.checkCache("marginInfo");if(a){d.setProp("margin-top",0);d.setProp("margin-right",0);d.setProp("margin-bottom",0);d.setProp("margin-left",0)}g.ownerId=c;b.margin$=g}g.width=g.left+g.right;g.height=g.top+g.bottom}d.marginInfo=g}return g},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var a=this,b=a.paddingInfo;if(!b){a.paddingInfo=b=a.checkCache("paddingInfo")}return b},getProp:function(c){var b=this,a=b.props[c];b.addTrigger(c);return a},getDomProp:function(c){var b=this,a=(b.dirty&&(c in b.dirty))?undefined:b.props[c];b.addTrigger(c,true);return a},getStyle:function(a){var c=this,b=c.styles,e,d;if(a in b){d=b[a]}else{e=c.styleInfo[a];d=c.el.getStyle(a);if(e&&e.parseInt){d=parseInt(d,10)||0}b[a]=d}return d},getStyles:function(o,b){var l=this,e=l.styles,p={},f=0,d=o.length,j,h,k,a,c,g,q,m;b=b||o;for(j=0;j<d;++j){a=o[j];if(a in e){p[b[j]]=e[a];++f;if(j&&f==1){h=o.slice(0,j);k=b.slice(0,j)}}else{if(f){(h||(h=[])).push(a);(k||(k=[])).push(b[j])}}}if(f<d){h=h||o;k=k||b;g=l.styleInfo;q=l.el.getStyle(h);for(j=h.length;j--;){a=h[j];c=g[a];m=q[a];if(c&&c.parseInt){m=parseInt(m,10)||0}p[k[j]]=m;e[a]=m}}return p},hasProp:function(a){return this.getProp(a)!=null},hasDomProp:function(a){return this.getDomProp(a)!=null},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){if(++this.dirtyCount==1){this.context.queueFlush(this)}},onBoxMeasured:function(){var a=this.boxParent,b=this.state;if(a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox){b.boxMeasured=1;a.boxChildMeasured()}},parseMargins:function(a,d){if(d===true){d=5}var c=typeof d,b;if(c=="string"||c=="number"){b=a.parseBox(d)}else{if(d){b={top:0,right:0,bottom:0,left:0};if(d){d=Ext.apply(b,a.parseBox(d))}}}return b},peek:function(a){return this.props[a]},recoverProp:function(f,b,a){var e=this,d=e.props,c;if(f in b){d[f]=b[f];if(a&&f in a){c=e.dirty||(e.dirty={});c[f]=a[f]}}},redo:function(b){var e=this,c,a,d;e.revertProps(e.props);if(b&&e.wrapsComponent){if(e.childItems){for(d=0,c=e.childItems,a=c.length;d<a;d++){c[d].redo(b)}}for(d=0,c=e.children,a=c.length;d<a;d++){c[d].redo()}}},removeEl:function(b,a){var d=this,e,c;if(b){if(b.dom){c=b}else{e=d.target;if(a){e=a}c=e[b];if(typeof c=="function"){c=c.call(e);if(c===d.el){return this}}}if(c){d.context.removeEl(d,c)}}},revertProps:function(d){var a,b=this.flushedProps,c={};for(a in d){if(b.hasOwnProperty(a)){c[a]=d[a]}}this.writeProps(c)},setAttribute:function(a,c){var b=this;if(!b.attributes){b.attributes={}}b.attributes[a]=c;b.markDirty()},setBox:function(b){var a=this;if("left" in b){a.setProp("x",b.left)}if("top" in b){a.setProp("y",b.top)}a.setSize(b.width,b.height)},setContentHeight:function(a,b){if(!b&&this.hasRawContent){return 1}return this.setProp("contentHeight",a)},setContentWidth:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp("contentWidth",b)},setContentSize:function(c,a,b){return this.setContentWidth(c,b)+this.setContentHeight(a,b)==2},setProp:function(d,c,a){var b=this,f=typeof c,e;if(f=="undefined"||(f==="number"&&isNaN(c))){return 0}if(b.props[d]===c){return 1}b.props[d]=c;++b.context.progressCount;if(a===false){b.fireTriggers("domTriggers",d);b.clearBlocks("domBlocks",d)}else{e=b.styleInfo[d];if(e){if(!b.dirty){b.dirty={}}b.dirty[d]=c;b.markDirty()}}b.fireTriggers("triggers",d);b.clearBlocks("blocks",d);return 1},setHeight:function(k,a){var f=this,d=f.target,c=f.ownerCtContext,g,e,b,j,h;if(k<0){k=0}if(!f.wrapsComponent){if(!f.setProp("height",k,a)){return NaN}}else{b=f.collapsedVert?0:(d.minHeight||0);k=Ext.Number.constrain(k,b,d.maxHeight);j=f.props.height;if(!f.setProp("height",k,a)){return NaN}if(c&&!f.isComponentChild&&isNaN(j)){h=--c.remainingChildDimensions;if(!h){c.setProp("containerChildrenSizeDone",true)}}g=f.frameBodyContext;if(g){e=f.getFrameInfo();g[f.el.vertical?"setWidth":"setHeight"](k-e.height,a)}}return k},setWidth:function(b,a){var h=this,f=h.target,e=h.ownerCtContext,j,g,d,c,k;if(b<0){b=0}if(!h.wrapsComponent){if(!h.setProp("width",b,a)){return NaN}}else{d=h.collapsedHorz?0:(f.minWidth||0);b=Ext.Number.constrain(b,d,f.maxWidth);c=h.props.width;if(!h.setProp("width",b,a)){return NaN}if(e&&!h.isComponentChild&&isNaN(c)){k=--e.remainingChildDimensions;if(!k){e.setProp("containerChildrenSizeDone",true)}}j=h.frameBodyContext;if(j){g=h.getFrameInfo();j.setWidth(b-g.width,a)}}return b},setSize:function(c,a,b){this.setWidth(c,b);this.setHeight(a,b)},translateProps:{x:"left",y:"top"},undo:function(b){var e=this,c,a,d;e.revertProps(e.lastBox);if(b&&e.wrapsComponent){if(e.childItems){for(d=0,c=e.childItems,a=c.length;d<a;d++){c[d].undo(b)}}for(d=0,c=e.children,a=c.length;d<a;d++){c[d].undo()}}},unsetProp:function(b){var a=this.dirty;delete this.props[b];if(a){delete a[b]}},writeProps:function(e,d){if(!(e&&typeof e=="object")){return}var s=this,c=s.el,h={},f=0,b=s.styleInfo,r,j,m,o=e.width,k=e.height,t=s.target,g,a,n,p,q,l;if("displayed" in e){c.setDisplayed(e.displayed)}for(j in e){if(d){s.fireTriggers("domTriggers",j);s.clearBlocks("domBlocks",j);s.flushedProps[j]=1}r=b[j];if(r&&r.dom){if(r.suffix&&(m=parseInt(e[j],10))){h[j]=m+r.suffix}else{h[j]=e[j]}++f}}if("x" in e||"y" in e){if(t.isComponent){t.setPosition(e.x,e.y)}else{f+=s.addPositionStyles(h,e)}}if(s.wrapsComponent&&Ext.isIE9){if((g=o!==undefined&&s.hasOverflowY)||(a=k!==undefined&&s.hasOverflowX)){n=s.isAbsolute;if(n===undefined){n=false;l=s.target.getTargetEl();q=l.getStyle("position");s.isAbsolute=(q==="absolute")}if(n){p=Ext.getScrollbarSize();if(g){o=parseInt(o,10)+p.width;h.width=o+"px";++f}if(a){k=parseInt(k,10)+p.height;h.height=k+"px";++f}}}}if(f){c.setStyle(h)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var c={dom:true,parseInt:true,suffix:"px"},b={dom:true},a={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:a,containerLayoutDone:a,displayed:a,done:a,x:a,y:a,columnWidthsDone:a,left:c,top:c,right:c,bottom:c,width:c,height:c,"border-top-width":c,"border-right-width":c,"border-bottom-width":c,"border-left-width":c,"margin-top":c,"margin-right":c,"margin-bottom":c,"margin-left":c,"padding-top":c,"padding-right":c,"padding-bottom":c,"padding-left":c,"line-height":b,display:b}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,constructor:function(a){var b=this;Ext.apply(b,a);b.items={};b.layouts={};b.blockCount=0;b.cycleCount=0;b.flushCount=0;b.calcCount=0;b.animateQueue=b.newQueue();b.completionQueue=b.newQueue();b.finalizeQueue=b.newQueue();b.finishQueue=b.newQueue();b.flushQueue=b.newQueue();b.invalidateData={};b.layoutQueue=b.newQueue();b.invalidQueue=[];b.triggers={data:{},dom:{}}},callLayout:function(b,a){this.currentLayout=b;b[a](this.getCmp(b.owner))},cancelComponent:function(h,a,l){var o=this,g=h,j=!h.isComponent,b=j?g.length:1,d,c,n,m,f,r,p,q,s,e;for(d=0;d<b;++d){if(j){h=g[d]}if(l&&h.ownerCt){e=this.items[h.ownerCt.el.id];if(e){Ext.Array.remove(e.childItems,o.getCmp(h))}}if(!a){p=o.invalidQueue;n=p.length;if(n){o.invalidQueue=r=[];for(c=0;c<n;++c){q=p[c];s=q.item.target;if(s!=h&&!s.isDescendantOf(h)){r.push(q)}}}}f=h.componentLayout;o.cancelLayout(f);if(f.getLayoutItems){m=f.getLayoutItems();if(m.length){o.cancelComponent(m,true)}}if(h.isContainer&&!h.collapsed){f=h.layout;o.cancelLayout(f);m=f.getVisibleItems();if(m.length){o.cancelComponent(m,true)}}}},cancelLayout:function(b){var a=this;a.completionQueue.remove(b);a.finalizeQueue.remove(b);a.finishQueue.remove(b);a.layoutQueue.remove(b);if(b.running){a.layoutDone(b)}b.ownerContext=null},clearTriggers:function(f,g){var a=f.id,e=this.triggers[g?"dom":"data"],h=e&&e[a],b=(h&&h.length)||0,d,j,c;for(d=0;d<b;++d){c=h[d];j=c.item;e=g?j.domTriggers:j.triggers;delete e[c.prop][a]}},flush:function(){var d=this,a=d.flushQueue.clear(),c=a.length,b;if(c){++d.flushCount;for(b=0;b<c;++b){a[b].flush()}}},flushAnimations:function(){var d=this,b=d.animateQueue.clear(),a=b.length,c;if(a){for(c=0;c<a;c++){if(b[c].target.animate!==false){b[c].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var g=this,a=g.invalidQueue,f=a&&a.length,b,e,d,c;g.invalidQueue=[];if(f){e=[];for(c=0;c<f;++c){b=(d=a[c]).item.target;if(!b.container.isDetachedBody){e.push(b);if(d.options){g.invalidateData[b.id]=d.options}}}g.invalidate(e,null)}},flushLayouts:function(g,a,c){var f=this,h=c?f[g].items:f[g].clear(),e=h.length,b,d;if(e){for(b=0;b<e;++b){d=h[b];if(!d.running){f.callLayout(d,a)}}f.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(b,a){var c=this.getItem(a,a);if(!c.parent){c.parent=b;if(b.children.length){b.children.push(c)}else{b.children=[c]}}return c},getItem:function(d,b){var e=b.id,a=this.items,c=a[e]||(a[e]=new Ext.layout.ContextItem({context:this,target:d,el:b}));return c},handleFailure:function(){var c=this.layouts,b,a;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(a in c){b=c[a];if(c.hasOwnProperty(a)){b.running=false;b.ownerContext=null}}},invalidate:function(k,m){var o=this,l=!k.isComponent,c,p,a,f,j,q,n,b,g,h,e,d,r;for(f=0,b=l?k.length:1;f<b;++f){j=l?k[f]:k;if(j.rendered&&!j.hidden){p=j.ownerLayout;g=j.componentLayout;a=!g.ownerContext;r=false;if((!p||!p.needsItemSize)&&j.liquidLayout){r=true}if(!r||(p&&p.setsItemSize)){q=o.getCmp(j);h=(j.isContainer&&!j.collapsed)?j.layout:null;e=o.invalidateData[q.id];delete o.invalidateData[q.id];d=q.init(m,e)}if(r){continue}if(e){o.processInvalidate(e,q,"before")}if(g.beforeLayoutCycle){g.beforeLayoutCycle(q)}if(h&&h.beforeLayoutCycle){h.beforeLayoutCycle(q)}d=q.initContinue(d);c=true;if(g.getLayoutItems){g.renderChildren();n=g.getLayoutItems();if(n.length){o.invalidate(n,true)}}if(h){c=false;h.renderChildren();if(h.needsItemSize||h.activeItemCount){n=h.getVisibleItems();if(n.length){o.invalidate(n,true)}}}q.initDone(c);o.resetLayout(g,q,a);if(h){o.resetLayout(h,q,a)}q.initAnimation();if(e){o.processInvalidate(e,q,"after")}}}o.currentLayout=null},layoutDone:function(a){var b=a.ownerContext;a.running=false;if(a.isComponentLayout){if(b.measuresBox){b.onBoxMeasured()}b.setProp("done",true)}else{b.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(b,e,a){if(b[a]){var d=this,c=d.currentLayout;d.currentLayout=b.layout||null;b[a](e,b);d.currentLayout=c}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(a){this.flushQueue.add(a)},chainFns:function(a,h,f){var d=this,c=a.layout,e=h.layout,b=a[f],g=h[f];return function(j){var k=d.currentLayout;if(b){d.currentLayout=c;b.call(a.scope||a,j,a)}d.currentLayout=e;g.call(h.scope||h,j,h);d.currentLayout=k}},purgeInvalidates:function(){var g=this,k=[],h=g.invalidQueue,e=h.length,j,l,d,c,b,f,a;for(j=0;j<e;++j){b=h[j];f=b.item.target;a=true;for(l=k.length;l--;){d=k[l];c=d.item.target;if(f.isDescendant(c)){a=false;break}if(c.isDescendant(f)){Ext.Array.erase(k,l,1)}}if(a){k.push(b)}}g.invalidQueue=k},queueInvalidate:function(k,l){var g=this,j=[],h=g.invalidQueue,f=h.length,d,b,e,a,c;if(k.isComponent){k=g.getCmp(d=k)}else{d=k.target}k.invalid=true;while(f--){b=h[f];e=b.item.target;if(d.isDescendantOf(e)){return}if(e==d){if(!(a=b.options)){b.options=l}else{if(l){if(l.widthModel){a.widthModel=l.widthModel}if(l.heightModel){a.heightModel=l.heightModel}if(!(c=a.state)){a.state=l.state}else{if(l.state){Ext.apply(c,l.state)}}if(l.before){a.before=g.chainFns(a,l,"before")}if(l.after){a.after=g.chainFns(a,l,"after")}}}return}if(!e.isDescendantOf(d)){j.push(b)}}j.push({item:k,options:l});g.invalidQueue=j},queueItemLayouts:function(c){var a=c.isComponent?c:c.target,b=a.componentLayout;if(!b.pending&&!b.invalid&&!b.done){this.queueLayout(b)}b=a.layout;if(b&&!b.pending&&!b.invalid&&!b.done){this.queueLayout(b)}},queueLayout:function(a){this.layoutQueue.add(a);a.pending=true},removeEl:function(d,c){var e=c.id,b=d.children,a=this.items;if(b){Ext.Array.remove(b,a[e])}delete a[e]},resetLayout:function(b,c,d){var a=this;a.currentLayout=b;b.done=false;b.pending=true;b.firedTriggers=0;a.layoutQueue.add(b);if(d){a.layouts[b.id]=b;b.running=true;if(b.finishedLayout){a.finishQueue.add(b)}++a.remainingLayouts;++b.layoutCount;b.ownerContext=c;b.beginCount=0;b.blockCount=0;b.calcCount=0;b.triggerCount=0;if(!b.initialized){b.initLayout()}b.beginLayout(c)}else{++b.beginCount;if(!b.running){++a.remainingLayouts;b.running=true;if(b.isComponentLayout){c.unsetProp("done")}a.completionQueue.remove(b);a.finalizeQueue.remove(b)}}b.beginLayoutCycle(c,d)},run:function(){var c=this,b=false,a=100;c.purgeInvalidates();c.flushInvalidates();c.state=1;c.totalCount=c.layoutQueue.getCount();c.flush();while((c.remainingLayouts||c.invalidQueue.length)&&a--){if(c.invalidQueue.length){c.flushInvalidates()}if(c.runCycle()){b=false}else{if(!b){c.flush();b=true;c.flushLayouts("completionQueue","completeLayout")}else{if(!c.invalidQueue.length){c.state=2;break}}}if(!(c.remainingLayouts||c.invalidQueue.length)){c.flush();c.flushLayouts("completionQueue","completeLayout");c.flushLayouts("finalizeQueue","finalizeLayout")}}return c.runComplete()},runComplete:function(){var a=this;a.state=2;if(a.remainingLayouts){a.handleFailure();return false}a.flush();a.flushLayouts("finishQueue","finishedLayout",true);a.flushLayouts("finishQueue","notifyOwner");a.flush();a.flushAnimations();return true},runCycle:function(){var c=this,d=c.layoutQueue.clear(),b=d.length,a;++c.cycleCount;c.progressCount=0;for(a=0;a<b;++a){c.runLayout(c.currentLayout=d[a])}c.currentLayout=null;return c.progressCount>0},runLayout:function(b){var a=this,c=a.getCmp(b.owner);b.pending=false;if(c.state.blocks){return}b.done=true;++b.calcCount;++a.calcCount;b.calculate(c);if(b.done){a.layoutDone(b);if(b.completeLayout){a.queueCompletion(b)}if(b.finalizeLayout){a.queueFinalize(b)}}else{if(!b.pending&&!b.invalid&&!(b.blockCount+b.triggerCount-b.firedTriggers)){a.queueLayout(b)}}},setItemSize:function(g,f,b){var d=g,a=1,c,e;if(g.isComposite){d=g.elements;a=d.length;g=d[0]}else{if(!g.dom&&!g.el){a=d.length;g=d[0]}}for(e=0;e<a;){c=this.get(g);c.setSize(f,b);g=d[++e]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.component.FieldSet",Ext.layout.component.Body,{type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(a){if(a.target.collapsed){a.heightModel=this.sizeModels.shrinkWrap}},beginLayoutCycle:function(b){var c=b.target,a;Ext.layout.component.Body.prototype.beginLayoutCycle.apply(this,arguments);if(c.collapsed){b.setContentHeight(0);b.restoreMinHeight=c.minHeight;delete c.minHeight;if(b.widthModel.shrinkWrap){a=c.lastComponentSize;b.setContentWidth((a&&a.contentWidth)||this.defaultCollapsedWidth)}}},finishedLayout:function(c){var a=this.owner,b=c.restoreMinHeight;Ext.layout.component.Body.prototype.finishedLayout.apply(this,arguments);if(b){a.minHeight=b}},calculateOwnerHeightFromContentHeight:function(d,c){var a=d.getBorderInfo(),b=d.target.legend;return d.getProp("contentHeight")+d.getPaddingInfo().height+(Ext.isIE8?d.bodyContext.getPaddingInfo().top:0)+(b?b.getHeight():a.top)+a.bottom},publishInnerHeight:function(c,a){var b=c.target.legend;if(b){a-=b.getHeight()}Ext.layout.component.Body.prototype.publishInnerHeight.call(this,c,a)},getLayoutItems:function(){var a=this.owner.legend;return a?[a]:[]}},0,0,0,0,["layout.fieldset"],0,[Ext.layout.component,"FieldSet"],0));(Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:true,typeName:"ptype",create:function(b,e,d){var a,c;if(b.init){a=b}else{if(d){b=Ext.apply({},b);b.cmp=d}else{d=b.cmp}if(b.xclass){a=Ext.create(b)}else{c="plugin."+(b.ptype||e);a=Ext.ClassManager.instantiateByAlias(c,b)}}if(a&&d&&a.setCmp&&!a.setCmpCalled){a.setCmp(d);a.setCmpCalled=true}return a}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var y=this,a=y.splitter,n=a.collapseTarget,d=a.defaultSplitMin,g=a.vertical?"Width":"Height",c="min"+g,u="max"+g,h="get"+g,t=a.neighbors,e=t.length,m=n.el.getBox(),f=m.x,o=m.y,x=m.right,j=m.bottom,q=a.vertical?(x-f):(j-o),w,k,r,l,v,s,p,b;l=(n[c]||Math.min(q,d))-q;v=n[u];if(!v){v=1000000000}else{v-=q}b=q;for(w=0;w<e;++w){k=t[w];q=k[h]();r=k[u];if(r===null){r=undefined}s=q-r;p=q-(k[c]||Math.min(q,d));if(!isNaN(s)){if(l<s){l=s}}if(v>p){v=p}}if(v-l<2){return null}m=new Ext.util.Region(o,x,j,f);y.constraintAdjusters[y.getCollapseDirection()](m,l,v,a);y.dragInfo={minRange:l,maxRange:v,targetSize:b};return m},constraintAdjusters:{left:function(c,a,b,d){c[0]=c.x=c.left=c.right+a;c.right+=b+d.getWidth()},top:function(c,a,b,d){c[1]=c.y=c.top=c.bottom+a;c.bottom+=b+d.getHeight()},bottom:function(c,a,b,d){c.bottom=c.top-a;c.top-=b+d.getHeight()},right:function(c,a,b,d){c.right=c.left-a;c[0]=c.x=c.left=c.x-b+d.getWidth()}},onBeforeStart:function(j){var f=this,g=f.splitter,d=g.collapseTarget,b=g.neighbors,c=b.length,a,h;if(d.collapsed){return false}for(a=0;a<c;++a){h=b[a];if(h.collapsed&&h.isHorz===d.isHorz){return false}}if(!(f.constrainTo=f.calculateConstrainRegion())){return false}return true},performResize:function(j,h){var k=this,b=k.splitter,g=b.getCollapseDirection(),a=b.collapseTarget,f=k.splitAdjusters[b.vertical?"horz":"vert"],l=h[f.index],d=k.dragInfo,c;if(g=="right"||g=="bottom"){l=-l}l=Math.min(Math.max(d.minRange,l),d.maxRange);if(l){(c=b.ownerCt).suspendLayouts();f.adjustTarget(a,d.targetSize,l);c.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(b,a,c){b.flex=null;b.setSize(a+c)}},vert:{index:1,adjustTarget:function(b,a,c){b.flex=null;b.setSize(undefined,a+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(b){var d=this,c,a,e;if(!b.el){if(b.target.isComponent){d.el=b.target.getEl()}else{d.el=b.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(d.preserveRatio&&d.minWidth&&d.minHeight){c=d.minWidth/d.el.getWidth();a=d.minHeight/d.el.getHeight();if(a>c){d.minWidth=d.el.getWidth()*a}else{d.minHeight=d.el.getHeight()*c}}if(d.throttle){e=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)},d.throttle);d.resize=function(g,h,f){if(f){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)}else{e.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(!a.dynamic&&!a.proxy){a.proxy=a.createProxy(a.target||a.el);a.hideProxy=true}if(a.proxy){a.proxy.show();return a.proxy}},createProxy:function(c){var b,a=this.proxyCls;if(c.isComponent){b=c.getProxy().addCls(a)}else{b=c.createProxy({tag:"div",role:"presentation",cls:a,id:c.id+"-rzproxy"},Ext.getBody())}b.removeCls("x-proxy-el");return b},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(q,m){var r=this,c=r.activeResizeHandle.region,f=r.getOffset(r.constrainTo?"dragTarget":null),k=r.startBox,g,o=0,s=0,j,p,a=0,u=0,t,h,b,d,n,l;c=r.convertRegionName(c);switch(c){case"south":s=f[1];b=2;break;case"north":s=-f[1];u=-s;b=2;break;case"east":o=f[0];b=1;break;case"west":o=-f[0];a=-o;b=1;break;case"northeast":s=-f[1];u=-s;o=f[0];h=[k.x,k.y+k.height];b=3;break;case"southeast":s=f[1];o=f[0];h=[k.x,k.y];b=3;break;case"southwest":o=-f[0];a=-o;s=f[1];h=[k.x+k.width,k.y];b=3;break;case"northwest":s=-f[1];u=-s;o=-f[0];a=-o;h=[k.x+k.width,k.y+k.height];b=3;break}d={width:k.width+o,height:k.height+s,x:k.x+a,y:k.y+u};j=Ext.Number.snap(d.width,r.widthIncrement);p=Ext.Number.snap(d.height,r.heightIncrement);if(j!=d.width||p!=d.height){switch(c){case"northeast":d.y-=p-d.height;break;case"north":d.y-=p-d.height;break;case"southwest":d.x-=j-d.width;break;case"west":d.x-=j-d.width;break;case"northwest":d.x-=j-d.width;d.y-=p-d.height}d.width=j;d.height=p}if(d.width<r.minWidth||d.width>r.maxWidth){d.width=Ext.Number.constrain(d.width,r.minWidth,r.maxWidth);if(a){d.x=k.x+(k.width-d.width)}}else{r.lastX=d.x}if(d.height<r.minHeight||d.height>r.maxHeight){d.height=Ext.Number.constrain(d.height,r.minHeight,r.maxHeight);if(u){d.y=k.y+(k.height-d.height)}}else{r.lastY=d.y}if(r.preserveRatio||q.shiftKey){g=r.startBox.width/r.startBox.height;n=Math.min(Math.max(r.minHeight,d.width/g),r.maxHeight);l=Math.min(Math.max(r.minWidth,d.height*g),r.maxWidth);if(b==1){d.height=n}else{if(b==2){d.width=l}else{t=Math.abs(h[0]-this.lastXY[0])/Math.abs(h[1]-this.lastXY[1]);if(t>g){d.height=n}else{d.width=l}if(c=="northeast"){d.y=k.y-(d.height-k.height)}else{if(c=="northwest"){d.y=k.y-(d.height-k.height);d.x=k.x-(d.width-k.width)}else{if(c=="southwest"){d.x=k.x-(d.width-k.width)}}}}}}r.setPosition=d.x!==r.startBox.x||d.y!==r.startBox.y;r.resize(d,m)},resize:function(d,a){var c=this,e,b=c.setPosition;if(c.dynamic||(!c.dynamic&&a)){if(b){c.target.setBox(d)}else{c.target.setSize(d.width,d.height)}}if(!a){e=c.getProxy();if(e&&e!==c.target){if(b||c.hideProxy){e.setBox(d)}else{e.setSize(d.width,d.height)}}}},onEnd:function(a){this.updateDimensions(a,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(a){return a}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(b){var k=this,p=k.handles,j=Ext.dom.Element.unselectableCls,n=[],o,c,m,r,g,e,l,a,f,d,q,h;if(Ext.isString(b)||Ext.isElement(b)||b.dom){o=b;b=arguments[1]||{};b.target=o}k.mixins.observable.constructor.call(k,b);o=k.target;if(o){if(o.isComponent){o.addClsWithUI("resizable");if(o.minWidth){k.minWidth=o.minWidth}if(o.minHeight){k.minHeight=o.minHeight}if(o.maxWidth){k.maxWidth=o.maxWidth}if(o.maxHeight){k.maxHeight=o.maxHeight}if(o.floating){if(!k.hasOwnProperty("handles")){k.handles="n ne e se s sw w nw"}}k.el=o.getEl()}else{o=k.el=k.target=Ext.get(o)}}else{o=k.target=k.el=Ext.get(k.el)}k.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(k.width)){k.width=Ext.Number.constrain(k.width,k.minWidth,k.maxWidth)}if(Ext.isNumber(k.height)){k.height=Ext.Number.constrain(k.height,k.minHeight,k.maxHeight)}if(k.width!==null||k.height!==null){k.target.setSize(k.width,k.height)}r=k.el.dom.tagName.toUpperCase();if(r==="TEXTAREA"||r==="IMG"||r==="TABLE"){k.originalTarget=k.target;d=o.isComponent?o.getEl():o;k.el.addCls(k.wrappedCls);k.target=k.el=k.el.wrap({role:"presentation",cls:k.wrapCls,id:k.el.id+"-rzwrap",style:d.getStyle(["margin-top","margin-bottom"])});q=d.getPositioning();k.el.setPositioning(q);d.clearPositioning();f=d.getBox();if(q.position!="absolute"){f.x=0;f.y=0}k.el.setBox(f);d.setStyle("position","absolute");k.isTargetWrapped=true}k.el.position();if(k.pinned){k.el.addCls(k.pinnedCls)}k.resizeTracker=new Ext.resizer.ResizeTracker({disabled:k.disabled,target:o,el:k.el,constrainTo:k.constrainTo,handleCls:k.handleCls,overCls:k.overCls,throttle:k.throttle,proxy:k.originalTarget?k.el:null,dynamic:k.originalTarget?true:k.dynamic,originalTarget:k.originalTarget,delegate:"."+k.handleCls,preserveRatio:k.preserveRatio,heightIncrement:k.heightIncrement,widthIncrement:k.widthIncrement,minHeight:k.minHeight,maxHeight:k.maxHeight,minWidth:k.minWidth,maxWidth:k.maxWidth});k.resizeTracker.on({mousedown:k.onBeforeResize,drag:k.onResize,dragend:k.onResizeEnd,scope:k});if(k.handles=="all"){k.handles="n s e w ne nw se sw"}p=k.handles=k.handles.split(k.delimiterRe);m=k.possiblePositions;g=p.length;c=k.handleCls+" "+k.handleCls+"-{0}";if(k.target.isComponent){h=k.target.baseCls;c+=" "+h+"-handle "+h+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){c+=" "+h+"-handle-{0}-br"}}for(e=0;e<g;e++){if(p[e]&&m[p[e]]){l=m[p[e]];n.push('<div id="',k.el.id,"-",l,'-handle" class="',Ext.String.format(c,l)," ",j,'" unselectable="on" role="presentation"',"></div>")}}Ext.DomHelper.append(k.el,n.join(""));n.length=0;for(e=0;e<g;e++){if(p[e]&&m[p[e]]){l=m[p[e]];a=k[l]=k.el.getById(k.el.id+"-"+l+"-handle");n.push(a);a.region=l;if(k.transparent){a.setOpacity(0)}}}k.resizeTracker.handleEls=n},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){return this.fireResizeEvent("beforeresize",a,b)},onResize:function(a,b){return this.fireResizeEvent("resizedrag",a,b)},onResizeEnd:function(a,b){return this.fireResizeEvent("resize",a,b)},fireResizeEvent:function(a,d,f){var c=this,b;if(c.hasListeners[a]){b=c.el.getBox();return c.fireEvent(a,c,b.width,b.height,f)}},resizeTo:function(b,a){var c=this;c.target.setSize(b,a);c.fireEvent("resize",c,b,a,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var e=this,d,c=e.handles,a=c.length,b=e.possiblePositions,f;e.resizeTracker.destroy();if(e.isTargetWrapped){e.target.destroy()}for(d=0;d<a;d++){if((f=e[b[c[d]]])){f.destroy()}}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.scroll.Indicator",Ext.Base,{config:{axis:null,containerEl:null,scroller:null,minLength:null,scrollSize:null,maxScrollPosition:null,hasOpposite:null},hideAnimConfig:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",clientSize:"clientWidth",setLength:"setWidth",setPosition:"setLocalX"},y:{side:"t",getSize:"getWidth",clientSize:"clientHeight",setLength:"setHeight",setPosition:"setLocalY"}},cls:"x-scroll-indicator",constructor:function(b){var e=this,a,c,d;e.initConfig(b);d=e.getAxis();e.names=e.names[d];e.el=e.getContainerEl().createChild({cls:e.cls+" "+e.cls+"-"+d});if(!e.size){e.cacheStyles()}a=e.getMinLength();c=e.size;if(!a||a<c){e.setMinLength(c)}},cacheStyles:function(){var d=this,c=d.self.prototype,b=d.el,a=d.getAxis(),e=d.names;c.size=b[e.getSize]();c.margin=b.getMargin(e.side)},hide:function(){this.el.animate(this.hideAnimConfig)},refreshLength:function(){var h=this,g=h.names,b=h.getScrollSize(),a=h.getContainerEl().dom[g.clientSize],f=a/b,j=h.getHasOpposite(),d=h.margin*2,e=j?(d+h.size):d,c=Math.max(Math.round((a-e)*f),h.getMinLength());h.sizeAdjust=e;h.length=c;h.el[g.setLength](c)},setValue:function(m){var k=this,c=k.el,h=k.names,g=k.getMaxScrollPosition(),a=k.getContainerEl().dom[h.clientSize],j=k.length,d=k.getMinLength(),b=j,f=a-j-k.sizeAdjust,n=Math.round,l=Math.max,e;if(m<0){b=n(l(j+(j*m/a),d));e=0}else{if(m>g){b=n(l(j-(j*(m-g)/a),d));e=f+j-b}else{e=n(m/g*f)}}c[h.setPosition](e);c[h.setLength](b)},show:function(){var b=this,a=b.el,c=a.getActiveAnimation();if(c){c.end()}b.refreshLength();a.setStyle("opacity","")},destroy:function(){this.el.destroy()}},1,0,0,0,0,0,[Ext.scroll,"Indicator"],0));(Ext.cmd.derive("Ext.scroll.Manager",Ext.util.Observable,{minIndicatorLength:24,refreshCounter:0,translationMethods:{1:"scrollparent",2:"csstransform"},constructor:function(b){var c=this,a={dragend:"onDragEnd",dragcancel:"onDragEnd",scope:c},d;if(Ext.supports.touchScroll===2){a.mousewheel="onMouseWheel";a.scroll={fn:"onElementScroll",delegated:false,scope:c}}Ext.util.Observable.prototype.constructor.apply(this,arguments);c.scroller=new Ext.scroll.Scroller({autoRefresh:false,element:c.el,direction:c.direction,momentumEasing:{bounce:{springTension:1}},outOfBoundRestrictFactor:0,translatable:{translationMethod:c.translationMethods[Ext.supports.touchScroll]},listeners:{scrollstart:"onScrollStart",scroll:"onScroll",scrollend:"onScrollEnd",scope:c}});Ext.GlobalEvents.on("idle",c.doRefresh,c);d=c.containerEl=c.el.parent();c.owner.mon(d,a);c.initIndicators()},onElementScroll:function(a,b){b.scrollTop=b.scrollLeft=0},destroy:function(){var a=this;a.clearListeners();Ext.GlobalEvents.un("idle",a.doRefresh,a);a.scroller.destroy()},initIndicators:function(){var c=this,d=c.containerEl,a=c.scroller,b=c.minIndicatorLength;if(Ext.supports.touchScroll===2){c.xIndicator=new Ext.scroll.Indicator({axis:"x",scroller:a,containerEl:d,minLength:b});c.yIndicator=new Ext.scroll.Indicator({axis:"y",scroller:a,containerEl:d,minLength:b});c.refreshIndicators()}},invokeIndicators:function(e,d,b){var f=this,a=f.xIndicator,c=f.yIndicator;if(a&&f.isAxisEnabled("x")){a[e].apply(a,d)}if(c&&f.isAxisEnabled("y")){c[e].apply(c,b||d)}},getPosition:function(){return this.scroller.getPosition()},refresh:function(a){++this.refreshCounter;if(a){this.doRefresh()}},refreshIndicators:function(){var c=this,a=c.scroller,d=a.getMaxPosition(),b=a.getSize();c.invokeIndicators("setMaxScrollPosition",[d.x],[d.y]);c.invokeIndicators("setScrollSize",[b.x],[b.y]);c.invokeIndicators("setHasOpposite",[c.isAxisEnabled("y")],[c.isAxisEnabled("x")])},doRefresh:function(){var b=this,a=b.scroller;if(b.refreshCounter){a.refresh();b.refreshIndicators();b.refreshCounter=0}},onScrollStart:function(){this.isTouching=Ext.isScrolling=true;this.invokeIndicators("show");this.toggleOthers(true)},onScroll:function(b,a,d){var c=this;c.invokeIndicators("setValue",[a],[d]);c.fireEvent("scroll",c,a,d)},onScrollEnd:function(){var a=this;Ext.isScrolling=false;if(a.isTouching){return}a.invokeIndicators("hide")},onDragEnd:function(){this.isTouching=false;this.toggleOthers(false)},onMouseWheel:function(l){var m=this,h=m.scroller,o=l.getWheelDeltas(),d=-o.x,b=-o.y,g=h.getPosition(),f=h.getMaxPosition(),a=h.getMinPosition(),n=Math.max,c=Math.min,k=n(c(g.x+d,f.x),a.x),j=n(c(g.y+b,f.y),a.y);d=k-g.x;b=j-g.y;if(!d&&!b){return}l.stopEvent();m.onScrollStart();m.scrollBy(d,b);m.onScroll(h,k,j);m.onScrollEnd(h)},isAxisEnabled:function(a){return this.scroller.isAxisEnabled(a)},setScrollX:function(b){var a=this.scroller;a.scrollTo(b,a.getPosition().y)},setScrollY:function(b){var a=this.scroller;a.scrollTo(a.getPosition().x,b)},scrollTo:function(a,c,b){this.scroller.scrollTo(a,c,b)},scrollBy:function(a,c,b){if(a.length){b=c;c=a[1];a=a[0]}else{if(!Ext.isNumber(a)){b=c;c=a.y;a=a.x}}this.scroller.scrollBy(a,c,b)},scrollIntoView:function(d,e,b){var l=this,k=l.containerEl,j=l.scroller,g=j.getPosition(),f=g.x,c=g.y,h=Ext.fly(d).getScrollIntoViewXY(k,f,c),a=h.x,m=h.y;if(e===false){a=f}if(a!==f||m!==c){j.scrollTo(a,m,b)}},toggleOthers:function(b){var c=Ext.scroll.Scroller.instances,a,d;for(d in c){a=c[d];if(a!==this.scroller){a.setDisabled(b)}}},preventDefault:function(a){if(a.touches.length===1){a.preventDefault()}}},1,0,0,0,0,0,[Ext.scroll,"Manager"],0));(Ext.cmd.derive("Ext.selection.CellModel",Ext.selection.DataViewModel,{isCellModel:true,enableKeyNav:true,preventWrap:false,bindComponent:function(a){var c=this,b=a.grid||a.ownerCt;Ext.selection.DataViewModel.prototype.bindComponent.call(this,a);if(b.optimizedColumnMove!==false){b.on("columnmove",c.onColumnMove,c)}},getViewListeners:function(){var a=this;return{refresh:a.onViewRefresh,scope:a}},getHeaderCt:function(){var b=this.navigationModel.getPosition(),a=b?b.view:this.primaryView;return a.headerCt},onNavigate:function(a){if(!a.record){return}this.setPosition(a.position)},selectWithEvent:function(a,b){this.select(a)},select:function(g,e,b){var d=this,f,c=d.getPosition(),a=d.view.store;if(g||g===0){if(g.isModel){f=a.indexOf(g);if(f!==-1){g={row:f,column:c?c.column:0}}else{g=null}}else{if(typeof g==="number"){g={row:g,column:0}}}}if(g){d.selectByPosition(g,b)}else{d.deselect()}},getCurrentPosition:function(){var a=this.selecting?this.nextSelection:this.selection;return a?{view:a.view,record:a.record,row:a.rowIdx,columnHeader:a.column,column:a.view.getColumnManager().indexOf(a.column)}:a},getPosition:function(){return this.selecting?this.nextSelection:this.selection},setCurrentPosition:function(c,a,b){if(c&&!c.isCellContext){c=new Ext.grid.CellContext(this.view).setPosition({row:c.row,column:typeof c.column==="number"?this.view.getColumnManager().getColumns()[c.column]:c.column})}return this.setPosition(c,a,b)},setPosition:function(e,a,d){var c=this,b=c.selection;if(e){e=e.isCellContext?e.clone():new Ext.grid.CellContext(c.view).setPosition(e)}if(!d&&b){if(e&&(e.record===b.record&&e.column===b.column&&e.view===b.view)){e=null}else{c.onCellDeselect(c.selection,a)}}if(e){c.nextSelection=e;c.selecting=true;c.onCellSelect(c.nextSelection,a);c.selecting=false;return(c.selection=e)}},isCellSelected:function(a,e,c){var d=this,b,f=d.getPosition();if(f&&f.view===a){b=new Ext.grid.CellContext(a).setPosition({row:e,column:typeof c==="number"?a.getColumnManager().getColumns()[c]:c});return(b.record===f.record)&&(b.column===f.column)}},onStoreRemove:function(b,a,d){var c=this,e=c.getPosition();Ext.selection.DataViewModel.prototype.onStoreRemove.apply(this,arguments);if(e&&b.getCount()&&b.indexOf(e.record)!==-1){e.setRow(e.record)}else{c.selection=null}},onStoreClear:function(){Ext.selection.DataViewModel.prototype.onStoreClear.apply(this,arguments);this.selection=null},onStoreAdd:function(){var a=this,b=a.getPosition();Ext.selection.DataViewModel.prototype.onStoreAdd.apply(this,arguments);if(b){b.setRow(b.record)}else{a.selection=null}},onCellClick:function(c,a,f,b,h,d,g){if(d!==-1){this.setPosition(g.position)}},onCellSelect:function(a,b){if(a&&a.rowIdx!==undefined&&a.rowIdx>-1){this.doSelect(a.record,false,b)}},onCellDeselect:function(a,b){if(a&&a.rowIdx!==undefined){this.doDeselect(a.record,b)}},onSelectChange:function(c,b,h,a){var e=this,f,d,g,j;if(b){f=e.nextSelection;d="select"}else{f=e.selection;d="deselect"}g=f.view||e.primaryView;if((h||e.fireEvent("before"+d,e,c,f.rowIdx,f.colIdx))!==false&&a()!==false){if(b){if(!e.preventFocus){j=g.getNavigationModel();if(!f.isEqual(j.getPosition())){j.setPosition(f,null,null,null,true)}}g.onCellSelect(f)}else{g.onCellDeselect(f);delete e.selection}if(!h){e.fireEvent(d,e,c,f.rowIdx,f.colIdx)}}},onEditorTab:function(b,f){var c=this,d=f.shiftKey?"left":"right",g=b.context,a=g.view.walkCells(g,d,f,c.preventWrap);if(a){if(b.startEdit(a.record,a.column)){c.wasEditing=false}else{a.view.getNavigationModel().setPosition(a,null,f);c.wasEditing=true}}},refresh:function(){var b=this.getPosition(),a;if(b&&(a=this.store.indexOf(this.selected.last()))!==-1){b.rowIdx=a}},onColumnMove:function(d,e,b,c){var a=d.up("tablepanel");if(a){this.onViewRefresh(a.view)}},onUpdate:function(a){var b=this,c;if(b.isSelected(a)){c=b.selecting?b.nextSelection:b.selection;b.view.onCellSelect(c)}},onViewRefresh:function(b){var e=this,g=e.getPosition(),c,f=b.headerCt,a,d;if(g&&g.view===b){a=g.record;d=g.column;if(!d.isDescendantOf(f)){d=f.queryById(d.id)||f.down('[text="'+d.text+'"]')||f.down('[dataIndex="'+d.dataIndex+'"]')}if(g.record){if(d&&(b.store.indexOfId(a.getId())!==-1)){c=new Ext.grid.CellContext(b).setPosition({row:a,column:d});e.setPosition(c)}}else{e.selection=null}}},selectByPosition:function(a,b){this.setPosition(a,b)}},0,0,0,0,["selection.cellmodel"],0,[Ext.selection,"CellModel"],0));(Ext.cmd.derive("Ext.selection.CheckboxModel",Ext.selection.RowModel,{mode:"MULTI",injectCheckbox:0,checkOnly:false,showHeaderCheckbox:undefined,checkSelector:".x-grid-row-checker",headerWidth:24,checkerOnCls:"x-grid-hd-checker-on",tdCls:"x-grid-cell-special x-grid-cell-row-checker",constructor:function(){var a=this;Ext.selection.RowModel.prototype.constructor.apply(this,arguments);if(a.mode==="SINGLE"&&a.showHeaderCheckbox!==true){a.showHeaderCheckbox=false}},beforeViewRender:function(b){var c=this,a;Ext.selection.RowModel.prototype.beforeViewRender.apply(this,arguments);if(!c.hasLockedHeader()||b.headerCt.lockedCt){if(c.showHeaderCheckbox!==false){b.headerCt.on("headerclick",c.onHeaderClick,c)}c.addCheckbox(b,true);a=b.ownerCt;if(b.headerCt.lockedCt){a=a.ownerCt}c.mon(a,"reconfigure",c.onReconfigure,c)}},bindComponent:function(a){var b=this;b.sortable=false;Ext.selection.RowModel.prototype.bindComponent.apply(this,arguments)},hasLockedHeader:function(){var a=this.views,c=a.length,b;for(b=0;b<c;b++){if(a[b].headerCt.lockedCt){return true}}return false},addCheckbox:function(a,b){var c=this,d=c.injectCheckbox,e=a.headerCt;if(d!==false){if(d==="first"){d=0}else{if(d==="last"){d=e.getColumnCount()}}Ext.suspendLayouts();if(a.getStore().isBufferedStore){c.showHeaderCheckbox=false}e.add(d,c.getHeaderConfig());Ext.resumeLayouts()}if(b!==true){a.refresh()}},onReconfigure:function(c,a,b){if(b){this.addCheckbox(this.views[0])}},toggleUiHeader:function(e){var b=this.views[0],d=b.headerCt,c=d.child("gridcolumn[isCheckerHd]"),a=this.checkerOnCls;if(c){if(e){c.addCls(a)}else{c.removeCls(a)}}},onHeaderClick:function(c,f,b){if(f.isCheckerHd){b.stopEvent();var a=this,d=f.el.hasCls("x-grid-hd-checker-on");a.preventFocus=true;if(d){a.deselectAll()}else{a.selectAll()}delete a.preventFocus}},getHeaderConfig:function(){var a=this,b=a.showHeaderCheckbox!==false;return{isCheckerHd:b,text:"&#160;",clickTargetName:"el",width:a.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,dataIndex:"",tdCls:a.tdCls,cls:b?"x-column-header-checkbox ":"",defaultRenderer:a.renderer.bind(a),editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader()}},renderEmpty:function(){return"&#160;"},refresh:function(){Ext.selection.RowModel.prototype.refresh.apply(this,arguments);this.updateHeaderState()},renderer:function(f,c,b,g,e,d,a){return'<div class="x-grid-row-checker" role="presentation">&#160;</div>'},onSelectChange:function(){Ext.selection.RowModel.prototype.onSelectChange.apply(this,arguments);if(!this.suspendChange){this.updateHeaderState()}},onStoreLoad:function(){Ext.selection.RowModel.prototype.onStoreLoad.apply(this,arguments);this.updateHeaderState()},onStoreAdd:function(){Ext.selection.RowModel.prototype.onStoreAdd.apply(this,arguments);this.updateHeaderState()},onStoreRemove:function(){Ext.selection.RowModel.prototype.onStoreRemove.apply(this,arguments);this.updateHeaderState()},onStoreRefresh:function(){Ext.selection.RowModel.prototype.onStoreRefresh.apply(this,arguments);this.updateHeaderState()},maybeFireSelectionChange:function(a){if(a&&!this.suspendChange){this.updateHeaderState()}Ext.selection.RowModel.prototype.maybeFireSelectionChange.apply(this,arguments)},resumeChanges:function(){Ext.selection.RowModel.prototype.resumeChanges.call(this);if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var f=this,g=f.store,e=g.getCount(),h=f.views,j=false,a=0,b,d,c;if(!g.isBufferedStore&&e>0){b=f.selected;j=true;for(c=0,d=b.getCount();c<d;++c){if(g.indexOfId(b.getAt(c).id)===-1){break}++a}j=e===a}if(h&&h.length){f.toggleUiHeader(j)}}},1,0,0,0,["selection.checkboxmodel"],0,[Ext.selection,"CheckboxModel"],0));(Ext.cmd.derive("Ext.state.CookieProvider",Ext.state.Provider,{constructor:function(a){var b=this;b.path="/";b.expires=new Date(Ext.Date.now()+(1000*60*60*24*7));b.domain=null;b.secure=false;Ext.state.Provider.prototype.constructor.apply(this,arguments);b.state=b.readCookies()},set:function(a,c){var b=this;if(typeof c=="undefined"||c===null){b.clear(a);return}b.setCookie(a,c);Ext.state.Provider.prototype.set.apply(this,arguments)},clear:function(a){this.clearCookie(a);Ext.state.Provider.prototype.clear.apply(this,arguments)},readCookies:function(){var e={},j=document.cookie+";",d=/\s?(.*?)=(.*?);/g,h=this.prefix,a=h.length,g,b,f;while((g=d.exec(j))!=null){b=g[1];f=g[2];if(b&&b.substring(0,a)==h){e[b.substr(a)]=this.decodeValue(f)}}return e},setCookie:function(a,c){var b=this;document.cookie=b.prefix+a+"="+b.encodeValue(c)+((b.expires==null)?"":("; expires="+b.expires.toUTCString()))+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+((b.secure==true)?"; secure":"")},clearCookie:function(a){var b=this;document.cookie=b.prefix+a+"=null; expires=Thu, 01-Jan-1970 00:00:01 GMT"+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+((b.secure==true)?"; secure":"")}},1,0,0,0,0,0,[Ext.state,"CookieProvider"],0));(Ext.cmd.derive("Ext.toolbar.Spacer",Ext.Component,{alternateClassName:"Ext.Toolbar.Spacer",baseCls:"x-toolbar-spacer",ariaRole:"presentation"},0,["tbspacer"],["component","box","tbspacer"],{component:true,box:true,tbspacer:true},["widget.tbspacer"],0,[Ext.toolbar,"Spacer",Ext.Toolbar,"Spacer"],0));(Ext.cmd.derive("FBEditor.command.HistoryCommand",Ext.Base,{singleton:true,alternateClassName:"FBEditor.HistoryCommand",commands:null,currentIndex:-1,init:function(){var a=this;a.commands=new Ext.util.MixedCollection()},add:function(c){var b=this,a;a=b.currentIndex;b.commands.add(a,c);a++;b.currentIndex=a}},0,0,0,0,0,0,[FBEditor.command,"HistoryCommand",FBEditor,"HistoryCommand"],0));(Ext.cmd.derive("FBEditor.desc.Manager",Ext.Base,{singleton:true,url:"https://hub.litres.ru/pages/get_fb3_meta/",loadUrl:null,saveUrl:null,loadingProcess:false,fb3DescId:"",fieldsError:[],cleanResultContainer:{},init:function(){var b=this,a=FBEditor.route.Manager,c;c=a.getParams();if(c.art){b.loadUrl=b.url+"?art="+c.art}else{if(c.desc){b.loadUrl=c.desc}else{if(c.desc===null){b.loadUrl="undefined"}}}b.saveUrl=c.save_desc||b.url||null},launch:function(){var a=this;if(a.isLoadUrl()){a.loadFromUrl(a.loadUrl)}},loadFromUrl:function(a){var c=this,f=FBEditor.getBridgeProps(),b;if(!Ext.getCmp("panel-empty")||!Ext.getCmp("panel-empty").rendered){Ext.defer(function(){c.loadFromUrl(a)},500)}c.loadUrl=a;Ext.log({level:"info",msg:"Загрузка описания из "+a});try{b=f.Ext.getCmp("button-desc-load");b.disable()}catch(d){}Ext.Ajax.request({url:a,success:function(g){var h,k;if(b){b.enable()}try{if(g&&g.responseText){h=g.responseText;c.loadDataToForm(h)}else{throw Error()}}catch(j){k=" ("+j+")";Ext.log({level:"error",msg:"Ошибка загрузки описания книги",dump:{response:g,error:j}});Ext.Msg.show({title:"Ошибка",message:"Невозможно загрузить описание книги по адресу "+a+k,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},failure:function(g){var h,k;b.enable();try{if(g&&g.responseText){h=g.responseText;c.loadDataToForm(h)}else{throw Error()}}catch(j){k=" ("+j+")";Ext.log({level:"error",msg:"Ошибка загрузки описания книги",dump:{response:g,error:j}});Ext.Msg.show({title:"Ошибка",message:"Невозможно загрузить описание книги по адресу "+a+k,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}})},saveToUrl:function(b){var f=this,d=Ext.getCmp("panel-toolstab-file-button-savedesc"),c=FBEditor.route.Manager,a,h;h=c.getParams().art;if(h){a=f.getXml();Ext.log({level:"info",msg:"Сохранение описания в "+b});d.disable();try{Ext.Ajax.request({url:b,params:{action:"update_hub_on_fb3_meta",fb3_meta:a,art:h},disableCaching:true,success:function(j){var k,e;d.enable();if(j.responseXML){Ext.log({level:"info",msg:"Описание сохранено"});e=j.responseText;f.loadDataToForm(e)}else{k=j.responseText.match(/(unknown.*?)\n/ig);Ext.log({level:"error",msg:"Ошибка сохранения описания книги "+h,dump:k});k=k&&k.length?"<p>Ошибки:</p>"+k.join("</br></br>"):j.responseText;Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить описание книги по адресу "+b+k,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},failure:function(j){var e;e=j.statusText?" ("+j.statusText+")":"";d.enable();Ext.log({level:"error",msg:"Ошибка сохранения описания книги "+h,dump:j});Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить описание книги по адресу "+b+e,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}})}catch(g){Ext.log({level:"error",msg:"Ошибка сохранения описания книги",dump:g});Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить описание книги по адресу "+b+status,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}},getNewId:function(l){var f=this,g=10,b=[],h=l.fn,k=l.scope,a=l.url,j=l.property,c;for(c=0;c<g;c++){b.push(f.generateNewId())}try{Ext.Ajax.request({url:a,method:"GET",params:{uuid:b.join(",")},success:function(m){var o=JSON.parse(m.responseText),n=b[0],e;e=o[j]||[];Ext.Array.each(b,function(q){var p;p=Ext.Array.findBy(e,function(r){return r.uuid===q});if(!p){n=q;return false}});Ext.callback(h,k,[n])},failure:function(){Ext.callback(h,k,[b[0]])}})}catch(d){Ext.callback(h,k,[b[0]])}},loadDataToForm:function(b){var g=this,c=FBEditor.converter.desc.Data,f=Ext.getCmp("panel-main-content"),d=Ext.getCmp("form-desc"),j,a;try{if(f.isActiveItem("form-desc")){g.needShowForm=true;f.fireEvent("contentEmpty")}j=FBEditor.util.xml.Json.xmlToJson(b);j=j["fb3-description"];g.fb3DescId=j._id;j.xml=b;j=c.toForm(j)}catch(h){if(g.needShowForm){f.fireEvent("contentBody");g.needShowForm=false;f.fireEvent("contentDesc")}throw h}a=g.isLoadUrl()?100:0;Ext.defer(function(){g.loadingProcess=true;d.fireEvent("loadDesc",j);g.loadingProcess=false;if(FBEditor.accessHub){d.fireEvent("accessHub")}if(g.needShowForm){f.fireEvent("contentBody");g.needShowForm=false;f.fireEvent("contentDesc")}},a)},isLoadUrl:function(){var c=this,a=c.loadUrl,b;b=a&&a!=="undefined"?true:false;return b},getXml:function(a){var d=this,c=Ext.getCmp("form-desc"),b,e;e=a||c.getValues();e={"fb3-description":e};e["fb3-description"]._xmlns="http://www.fictionbook.org/FictionBook3/description";e["fb3-description"]._id=d.fb3DescId;e["fb3-description"]._version="1.0";b=FBEditor.util.xml.Json.jsonToXml(e);b=b.replace(d.getRegexpUtf(),"");b='<?xml version="1.0" encoding="UTF-8"?>'+b;console.log("xml desc",b);return b},getMetaXml:function(h){var g=this,c=Ext.getCmp("form-desc"),a=FBEditor.file.Manager,e,d,f,b;function j(l){var k=[];Ext.each(l,function(n){var m;if(n._link==="author"){m=n.title?n.title.main:n["last-name"];k.push(m)}});return k.join(", ")}d=h||c.getValues();f=a.fb3file?Number(a.fb3file.getStructure().getMeta().revision.__text):0;f=Ext.isNumber(f)?f+1:1;b={coreProperties:{__prefix:"cp","_xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","_xmlns:dc":"http://purl.org/dc/elements/1.1/","_xmlns:dcterms":"http://purl.org/dc/terms/","_xmlns:dcmitype":"http://purl.org/dc/dcmitype/","dc:title":d.title.main,"dc:creator":j(d["fb3-relations"].subject),"cp:revision":f,"cp:contentStatus":d["fb3-classification"]["class"]?d["fb3-classification"]["class"]._contents:"","cp:category":d["fb3-classification"]["class"]?d["fb3-classification"]["class"].__text:"","dcterms:modified":d["document-info"]._updated,"dcterms:created":d["document-info"]._created}};if(d.title&&d.title.sub){b.coreProperties["dc:subject"]=d.title.sub}if(d.annotation){b.coreProperties["dc:description"]=Ext.util.Format.stripTags(d.annotation)}console.log("save meta",b);e=FBEditor.util.xml.Json.jsonToXml(b);e='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+e;return e},generateNewId:function(){var a;a=Ext.data.identifier.Uuid.Global.generate();return a},getRegexpUtf:function(){var a;a=/[^\u0020-\u005E\u0060-\u007E\u00A0-\u02AF\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u0482\u048A-\u0513\u0531-\u0556\u055A-\u055F\u0561-\u0587\u0589-\u058A\u0591-\u05F4\u05D0-\u05EA\u05F0-\u05F4\u0606-\u06DC\u06EE-\u070D\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07C0-\u07EA\u07F6-\u07F9\u0904-\u0939\u0958-\u0961\u0964-\u0970\u097B-\u097F\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B6-\u09B9\u09DC-\u09DD\u09DF-\u09E1\u09E6-\u09FA\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0AE0-\u0AE1\u0AE6-\u0AEF\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B5C-\u0B5D\u0B5F-\u0B61\u0B66-\u0B71\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BE6-\u0BFA\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C66-\u0C6F\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CE0-\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0D66-\u0D6F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DC0-\u0DC6\u0E01-\u0E5B\u0E32-\u0E33\u0E3F-\u0E45\u0E4F-\u0E5B\u0E81-\u0E82\u0E87-\u0E88\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EC0-\u0EC4\u0ED0-\u0ED9\u0EDC-\u0EDD\u0F00-\u0F17\u0F1A-\u0F34\u0F3A-\u0F3D\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCF-\u0FD1\u1000-\u1021\u1023-\u1027\u1029-\u102A\u1040-\u1055\u10A0-\u10C5\u10D0-\u10FB\u1100-\u11FF\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u1399\u13A0-\u13F4\u1401-\u1676\u1681-\u169C\u16A0-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D4-\u17D6\u17D8-\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1800-\u180A\u1810-\u1819\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u1900-\u191C\u1944-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u19D0-\u19D9\u19DE-\u1A16\u1A1E-\u1A1F\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B6A\u1B74-\u1B7C\u1D00-\u1D2B\u1D62-\u1D77\u1D79-\u1D9A\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200E-\u200F\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205F\u2070-\u2071\u2074-\u208E\u20A0-\u20B5\u2100-\u214E\u2153-\u2184\u2190-\u23E7\u2400-\u2426\u2440-\u244A\u2460-\u269C\u2600-\u26FF\u2701-\u2704\u2706-\u2709\u270C-\u2727\u2729-\u274B\u274F-\u2752\u2758-\u275E\u2761-\u2794\u2798-\u27AF\u27B1-\u27BE\u27C0-\u27CA\u27D0-\u27EB\u27F0-\u2B1A\u2B20-\u2B23\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C6C\u2C74-\u2C77\u2C80-\u2CEA\u2CF9-\u2D25\u2D30-\u2D65\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E00-\u2E17\u2E1C-\u2E1D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3006-\u3029\u3036-\u303A\u303C-\u303F\u3041-\u3096\u309B-\u309C\u309F-\u30FB\u3105-\u318F\u3131-\u318E\u3190-\u31B7\u31C0-\u31CF\u31F0-\u321E\u3220-\u3243\u3250-\u32FE\u3300-\u3400\u4DC0-\u9FFF\uA000-\uA014\uA016-\uA48C\uA490-\uA4C6\uA700-\uA716\uA720-\uA721\uA800-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA840-\uA877\uA960-\uA97F\uAC00-\uD7AF\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1F-\uFB36\uFB38-\uFB3C\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3F\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFD\uFE10-\uFE19\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFF01-\uFF3E\uFF40-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC-\uFFFD\u10000-\u1000B\u1000D-\u10026\u10028-\u1003A\u1003C-\u1003D\u1003F-\u1004D\u10050-\u1005D\u10080-\u100FA\u10100-\u10102\u10107-\u10133\u10137-\u1018A\u10300-\u1031E\u10320-\u10323\u10330-\u1034A\u10380-\u1039D\u1039F-\u103C3\u103C8-\u103D5\u10400-\u1049D\u104A0-\u104A9\u10800-\u10805\u1080A-\u10835\u10837-\u10838\u10900-\u10919\u10A10-\u10A13\u10A15-\u10A17\u10A19-\u10A33\u10A40-\u10A47\u10A50-\u10A58\u12000-\u1236E\u12400-\u12462\u12470-\u12473\u1D000-\u1D0F5\u1D100-\u1D126\u1D12A-\u1D164\u1D16A-\u1D16C\u1D183-\u1D184\u1D18C-\u1D1A9\u1D1AE-\u1D1DD\u1D200-\u1D241\u1D300-\u1D356\u1D360-\u1D371\u1D400-\u1D454\u1D456-\u1D49C\u1D49E-\u1D49F\u1D4A5-\u1D4A6\u1D4A9-\u1D4AC\u1D4AE-\u1D4B9\u1D4BD-\u1D4C3\u1D4C5-\u1D505\u1D507-\u1D50A\u1D50D-\u1D514\u1D516-\u1D51C\u1D51E-\u1D539\u1D53B-\u1D53E\u1D540-\u1D544\u1D54A-\u1D550\u1D552-\u1D6A5\u1D6A8-\u1D7CB\u1D7CE-\u1D7FF\u2F800-\u2FA1D]/g;return a}},0,0,0,0,0,0,[FBEditor.desc,"Manager"],0));(Ext.cmd.derive("FBEditor.xsd.Body",Ext.Base,{singleton:true,getXsd:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns:fb3b="http://www.fictionbook.org/FictionBook3/body" xmlns="http://www.w3.org/2001/XMLSchema"\t\txmlns:xlink="http://www.w3.org/1999/xlink" targetNamespace="http://www.fictionbook.org/FictionBook3/body"\t\telementFormDefault="qualified" attributeFormDefault="unqualified">\t<element name="fb3-body">\t\t<complexType>\t\t\t<complexContent>\t\t\t\t<extension base="fb3b:TitledType">\t\t\t\t\t<sequence>\t\t\t\t\t\t<element name="section" type="fb3b:SectionType" maxOccurs="unbounded"/>\t\t\t\t\t\t<element name="notes" minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t<extension base="fb3b:TitledType">\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t<element name="notebody" type="fb3b:SemiSimpleBodyType"\t\t\t\t\t\t\t\t\t\t\t maxOccurs="unbounded"/>\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t<attribute name="show"/>\t\t\t\t\t\t\t\t\t</extension>\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t</element>\t\t\t\t\t</sequence>\t\t\t\t\t<attribute name="id" type="fb3b:UUIDType" use="required"/>\t\t\t\t</extension>\t\t\t</complexContent>\t\t</complexType>\t\t<unique name="SectionID">\t\t\t<selector xpath=".//section"/>\t\t\t<field xpath="@id"/>\t\t</unique>\t\t<key name="SimpleNotesLinks">\t\t\t<selector xpath=".//note"/>\t\t\t<field xpath="@fb3b:href"/>\t\t</key>\t\t<keyref name="SimpleNotesTargets" refer="fb3b:SimpleNotesLinks">\t\t\t<selector xpath="notes/note"/>\t\t\t<field xpath="@id"/>\t\t</keyref>\t</element>\t<complexType name="TitledType">\t\t<sequence>\t\t\t<element name="title" minOccurs="0">\t\t\t\t<complexType>\t\t\t\t\t<complexContent>\t\t\t\t\t\t<extension base="fb3b:SimpleTextType"/>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="epigraph" minOccurs="0" maxOccurs="25">\t\t\t\t<complexType>\t\t\t\t\t<sequence>\t\t\t\t\t    <choice>\t\t\t\t\t        <element name="poem" type="fb3b:PoemType"/>\t\t\t\t            <element name="p" type="fb3b:StyleType"/>\t\t\t\t        </choice>\t\t\t\t        <choice minOccurs="0" maxOccurs="unbounded">\t\t\t                <element name="poem" type="fb3b:PoemType"/>\t\t\t                <element name="p" type="fb3b:StyleType"/>\t\t\t                <element name="br" type="fb3b:BRType"/>\t\t\t            </choice>\t\t\t            <element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t        </sequence>\t\t\t\t</complexType>\t\t\t</element>\t\t</sequence>\t</complexType>\t<complexType name="SimpleTextType">\t\t<sequence>\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="SectionType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="annotation" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t\t<choice>\t\t\t\t\t\t<element name="section" type="fb3b:SectionType" maxOccurs="unbounded"></element>\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t<choice maxOccurs="unbounded">\t\t\t\t\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t\t\t\t\t<element name="subtitle" type="fb3b:StyleType"></element>\t\t\t\t\t\t\t\t<element name="ol">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="ul">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t\t\t\t\t<element name="table">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:TableType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="poem">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:PoemType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t\t\t\t\t\t<element name="div" type="fb3b:DivBlockType"></element>\t\t\t\t\t\t\t</choice>\t\t\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t\t\t\t\t</sequence>\t\t\t\t\t</choice>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="fb3b:UUIDType" use="required"/>\t\t\t\t<attribute name="article" type="boolean" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="DivBlockType">\t\t<sequence>\t\t\t<element name="title" type="fb3b:SimpleTextType" minOccurs="0"/>\t\t\t<element name="marker" minOccurs="0">\t\t\t\t<complexType>\t\t\t\t\t<sequence>\t\t\t\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t\t\t</sequence>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<choice>\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t</choice>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t</sequence>\t\t<attributeGroup ref="fb3b:SizingAttributes"/>\t\t<attribute name="float" use="optional">\t\t\t<simpleType>\t\t\t\t<restriction base="token">\t\t\t\t\t<enumeration value="left"/>\t\t\t\t\t<enumeration value="right"/>\t\t\t\t\t<enumeration value="center"/>\t\t\t\t\t<enumeration value="default"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</attribute>\t\t<attribute name="align" type="fb3b:alignType" use="optional"/>\t\t<attribute name="bindto" type="IDREF" use="optional"/>\t\t<attribute name="border" type="boolean" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t\t<attribute name="on-one-page" type="boolean" use="optional"/>\t</complexType>\t<complexType name="BasicAnnotationType">\t\t<sequence>\t\t\t<choice>\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t</choice>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="BRType">\t\t<attribute name="clear" type="fb3b:BrClearType" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="TableType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="tr" maxOccurs="unbounded">\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t<choice maxOccurs="unbounded">\t\t\t\t\t\t\t\t<element name="th" type="fb3b:TDType"/>\t\t\t\t\t\t\t\t<element name="td" type="fb3b:TDType"/>\t\t\t\t\t\t\t</choice>\t\t\t\t\t\t\t<attribute name="align" type="fb3b:alignType" use="optional" default="left"/>\t\t\t\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t\t\t\t</complexType>\t\t\t\t\t</element>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="TDType">\t\t<complexContent>\t\t\t<extension base="fb3b:PHolderType">\t\t\t\t<attribute name="style" type="string" use="optional"/>\t\t\t\t<attribute name="colspan" type="integer" use="optional"/>\t\t\t\t<attribute name="rowspan" type="integer" use="optional"/>\t\t\t\t<attribute name="align" type="fb3b:alignType" use="optional" default="left"/>\t\t\t\t<attribute name="valign" type="fb3b:vAlignType" use="optional" default="top"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="StyleType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3b:StyleType"></element>\t\t\t<element name="em" type="fb3b:StyleType"></element>\t\t\t<element name="strikethrough" type="fb3b:StyleType"></element>\t\t\t<element name="sub" type="fb3b:StyleType"></element>\t\t\t<element name="sup" type="fb3b:StyleType"></element>\t\t\t<element name="code" type="fb3b:StyleType"></element>\t\t\t<element name="underline" type="fb3b:StyleType"></element>\t\t\t<element name="spacing" type="fb3b:StyleType"></element>\t\t\t<element name="span">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3b:StyleType">\t\t\t\t\t\t\t<attribute name="class" type="normalizedString" use="optional"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="note" type="fb3b:NoteType"/>\t\t\t<element name="a" type="fb3b:LinkType"/>\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t<element name="paper-page-break" type="fb3b:PaperPageBreakType"/>\t\t</choice>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="StyleInLinkType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3b:StyleInLinkType"/>\t\t\t<element name="em" type="fb3b:StyleInLinkType"/>\t\t\t<element name="strikethrough" type="fb3b:StyleInLinkType"/>\t\t\t<element name="sub" type="fb3b:StyleInLinkType"/>\t\t\t<element name="sup" type="fb3b:StyleInLinkType"/>\t\t\t<element name="code" type="fb3b:StyleInLinkType"/>\t\t\t<element name="underline" type="fb3b:StyleInLinkType"/>\t\t\t<element name="spacing" type="fb3b:StyleInLinkType"/>\t\t\t<element name="span">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t\t\t\t<attribute name="class" type="normalizedString" use="optional"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t<element name="paper-page-break" type="fb3b:PaperPageBreakType"/>\t\t</choice>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="LinkType" mixed="true">\t\t<complexContent mixed="true">\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t<attribute name="href" type="anyURI" use="required"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="NoteType" mixed="true">\t\t<complexContent mixed="true">\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t<attribute name="href" type="IDREF" use="required"/>\t\t\t\t<attribute ref="fb3b:role" use="optional"/>\t\t\t\t<attribute name="autotext" type="boolean" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="ImgType">\t\t<attribute name="src" type="anyURI" use="required"/>\t\t<attribute name="alt" type="string" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t\t<attributeGroup ref="fb3b:SizingAttributes"/>\t</complexType>\t<complexType name="PHolderType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence maxOccurs="unbounded">\t\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t            <element name="p" type="fb3b:StyleType"/>                        <element name="br" type="fb3b:BRType"/>                    </choice>\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t</sequence>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="LiHolderType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="li" type="fb3b:StyleType"/>\t\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t<element name="li" type="fb3b:StyleType"/>\t\t\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t\t</choice>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="PoemType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="stanza" type="fb3b:PHolderType" maxOccurs="unbounded"/>\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="SemiSimpleBodyType">\t\t<sequence>\t\t\t<element name="title" type="fb3b:SimpleTextType" minOccurs="0"/>\t\t\t<choice maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol">\t\t\t\t\t<complexType>\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t</complexContent>\t\t\t\t\t</complexType>\t\t\t\t</element>\t\t\t\t<element name="ul">\t\t\t\t\t<complexType>\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t</complexContent>\t\t\t\t\t</complexType>\t\t\t\t</element>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="PaperPageBreakType">\t\t<attribute name="page-before" type="positiveInteger" use="required"/>\t\t<attribute name="page-after" type="positiveInteger" use="optional"/>\t</complexType>\t<simpleType name="alignType">\t\t<restriction base="token">\t\t\t<enumeration value="left"/>\t\t\t<enumeration value="right"/>\t\t\t<enumeration value="center"/>\t\t\t<enumeration value="justify"/>\t\t</restriction>\t</simpleType>\t<simpleType name="vAlignType">\t\t<restriction base="token">\t\t\t<enumeration value="top"/>\t\t\t<enumeration value="middle"/>\t\t\t<enumeration value="bottom"/>\t\t</restriction>\t</simpleType>\t<simpleType name="BrClearType">\t\t<restriction base="token">\t\t\t<enumeration value="left"/>\t\t\t<enumeration value="right"/>\t\t\t<enumeration value="both"/>\t\t\t<enumeration value="page"/>\t\t</restriction>\t</simpleType>\t<simpleType name="ScreenSizeType">\t\t<restriction base="normalizedString">\t\t\t<pattern value="\\d+(\\.\\d+)?(em|ex|%|mm)"/>\t\t</restriction>\t</simpleType>\t<attributeGroup name="SizingAttributes">\t\t<attribute name="width" type="fb3b:ScreenSizeType" use="optional"/>\t\t<attribute name="min-width" type="fb3b:ScreenSizeType" use="optional"/>\t\t<attribute name="max-width" type="fb3b:ScreenSizeType" use="optional"/>\t</attributeGroup>\t<simpleType name="UUIDType">\t\t<restriction base="token">\t\t\t<pattern value="[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}"/>\t\t</restriction>\t</simpleType>\t<attribute name="role" default="auto">\t\t<simpleType>\t\t\t<restriction base="token">\t\t\t\t<enumeration value="auto"/>\t\t\t\t<enumeration value="footnote"/>\t\t\t\t<enumeration value="endnote"/>\t\t\t\t<enumeration value="comment"/>\t\t\t\t<enumeration value="other"/>\t\t\t</restriction>\t\t</simpleType>\t</attribute>\t<attribute name="href" type="anyURI"></attribute></schema>';return a}},0,0,0,0,0,0,[FBEditor.xsd,"Body"],0));(Ext.cmd.derive("FBEditor.xsl.SchemaBody",Ext.Base,{singleton:true,getXsl:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">\t<xsl:output encoding="UTF-8" indent="no" method="html"/>\t<xsl:template match="/">\t\t<xsl:call-template name="types"/>\t\telements = {\t\t<xsl:for-each select=".//element">\t\t\t<xsl:variable name="elementName" select="@name"/>\t\t\t<xsl:variable name="extAttrs" select="complexType/complexContent/extension/attribute" />\t\t\t<xsl:if test="not(preceding::element[@name=$elementName]) and $elementName">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\'<xsl:value-of select="$elementName"/>\': cse(\'<xsl:value-of select="$elementName"/>\', {\t\t\t\t<xsl:call-template name="elements">\t\t\t\t\t<xsl:with-param name="typeName" select="@type"/>\t\t\t\t\t<xsl:with-param name="parentName" select="$elementName"/>\t\t\t\t</xsl:call-template>\t\t\t\t, attributes: {\t\t\t\t<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>\t\t\t\t<xsl:for-each select="$extAttrs"><xsl:if test="@*">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t}\t\t\t\t})\t\t\t</xsl:if>\t\t</xsl:for-each>};\t</xsl:template>\t\t<xsl:template match="@*">\'<xsl:value-of select="local-name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if></xsl:template>\t\t<xsl:template name="attrs">\t\t<xsl:param name="attrs"/>\t\t<xsl:for-each select="$attrs">\t\t\t\'<xsl:value-of select="name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if>\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="elements">\t\t<xsl:param name="typeName"/>\t\t<xsl:param name="parentName"/>\t\textend: \'<xsl:value-of select="$typeName"/><xsl:call-template name="extended"/>\'\t\t<xsl:if test="count(.//element)">\t\t\t, sequence: [\t\t\t<xsl:for-each select=".//element">\t\t\t\t<xsl:if test="not(@name=\'note\' and $parentName=\'fb3-body\')">\t\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\t{element: <xsl:call-template name="element"/>}\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t\t\t]\t\t</xsl:if>\t</xsl:template>\t\t<xsl:template name="element">\t\t<xsl:param name="attrs"/>\t\t<xsl:variable name="elementName">\t\t\t<xsl:choose>\t\t\t\t<xsl:when test="@name"><xsl:value-of select="@name"/></xsl:when>\t\t\t\t<xsl:when test="@ref"><xsl:value-of select="@ref"/></xsl:when>\t\t\t\t<xsl:otherwise><xsl:text>undefined</xsl:text></xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:variable>\t\t{\'<xsl:value-of select="$elementName"/>\': {\t\t\t<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>\t\t\t<xsl:if test="$attrs">\t\t\t\t<xsl:if test="@*">,</xsl:if>\t\t\t\t<xsl:call-template name="attrs"><xsl:with-param name="attrs" select="$attrs"/></xsl:call-template>\t\t\t</xsl:if>\t\t}}\t</xsl:template>\t\t<xsl:template name="extended">\t\t<xsl:for-each select="descendant::extension">\t\t\t<xsl:if test="position()=1"><xsl:value-of select="@base"/></xsl:if>\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="types">\t\t<xsl:for-each select="schema/simpleType">\t\t\tdse(\'<xsl:value-of select="@name"/>\', {\t\t\t\t<xsl:call-template name="restriction"><xsl:with-param name="rest" select="restriction"/></xsl:call-template>\t\t\t});\t\t</xsl:for-each>\t\t<xsl:for-each select="schema/complexType">\t\t\t<xsl:variable name="extSeq" select="complexContent/extension/sequence" />\t\t\t<xsl:variable name="attrs" select="attribute" />\t\t\t<xsl:variable name="extAttrs" select="complexContent/extension/attribute" />\t\t\tdse(\'<xsl:value-of select="@name"/>\', {\t\t\t\t<xsl:if test="complexContent/extension">\t\t\t\t\textend: \'<xsl:value-of select="complexContent/extension/@base"/>\',\t\t\t\t</xsl:if>\t\t\t\tsequence: [\t\t\t\t<xsl:if test="$extSeq">\t\t\t\t\t<xsl:call-template name="sequence"><xsl:with-param name="seq" select="$extSeq"/></xsl:call-template>\t\t\t\t</xsl:if>\t\t\t\t<xsl:if test="sequence">\t\t\t\t\t<xsl:if test="$extSeq">,</xsl:if>\t\t\t\t\t<xsl:call-template name="sequence"><xsl:with-param name="seq" select="sequence"/></xsl:call-template>\t\t\t\t</xsl:if>\t\t\t\t],\t\t\t\tchoice: {<xsl:call-template name="choice"><xsl:with-param name="choice" select="choice"/></xsl:call-template>}\t\t\t\t<xsl:if test="$extAttrs or $attrs or attributeGroup">\t\t\t\t\t, attributes: {\t\t\t\t\t<xsl:if test="@mixed">mixed: <xsl:value-of select="@mixed"/>,</xsl:if>\t\t\t\t\t<xsl:for-each select="$extAttrs"><xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t\t<xsl:for-each select="$attrs"><xsl:if test="position()!=1 or $extAttrs">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t\t<xsl:if test="attributeGroup and ($attrs or $extAttrs)">,</xsl:if><xsl:call-template name="attributeGroup"/>\t\t\t\t}</xsl:if>\t\t\t});\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="attribute">\t\t<xsl:variable name="attrName">\t\t\t<xsl:choose>\t\t\t\t<xsl:when test="@name"><xsl:value-of select="@name"/></xsl:when>\t\t\t\t<xsl:when test="@ref"><xsl:value-of select="@ref"/></xsl:when>\t\t\t\t<xsl:otherwise><xsl:text>undefined</xsl:text></xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:variable>\t\t\'<xsl:value-of select="$attrName"/>\': {\t\t\t<xsl:apply-templates select="@*"/>\t\t\t<xsl:if test="simpleType/restriction">, type: {<xsl:call-template name="restriction"><xsl:with-param name="rest" select="simpleType/restriction"/></xsl:call-template>}</xsl:if>\t\t}\t</xsl:template>\t\t<xsl:template name="attributeGroup">\t\t<xsl:variable name="groupName" select="substring(attributeGroup/@ref, 6)" />\t\t<xsl:variable name="group" select="/schema/attributeGroup[@name=$groupName]/attribute" />\t\t<xsl:for-each select="$group"><xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t</xsl:template>\t\t<xsl:template name="restriction">\t\t<xsl:param name="rest"/>\t\t<xsl:variable name="enums" select="$rest/enumeration"/>\t\tbase: \'<xsl:value-of select="$rest/@base"/>\',\t\t<xsl:if test="$enums">\t\t\tenumeration: [\t\t\t<xsl:for-each select="$enums">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\'<xsl:value-of select="@value"/>\'\t\t\t</xsl:for-each>\t\t]</xsl:if>\t\t<xsl:if test="$rest/pattern">pattern: \'<xsl:value-of select="$rest/pattern/@value"/>\'</xsl:if>\t\t<xsl:if test="$rest/minInclusive">minInclusive: \'<xsl:value-of select="$rest/minInclusive/@value"/>\'</xsl:if>\t\t<xsl:if test="$rest/maxInclusive"><xsl:if test="$rest/minInclusive">,</xsl:if> maxInclusive: \'<xsl:value-of select="$rest/maxInclusive/@value"/>\'</xsl:if>\t</xsl:template>\t\t<xsl:template name="choice">\t\t<xsl:param name="choice"/>\t\t<xsl:variable name="seq" select="$choice/sequence"/>\t\t<xsl:if test="$choice/@*">attributes: {<xsl:apply-templates select="$choice/@*"/>},</xsl:if>\t\t<xsl:if test="$choice/element">\t\t\telements: [\t\t\t<xsl:for-each select="$choice/element">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="element"/>\t\t\t</xsl:for-each>\t\t]</xsl:if>\t\t<xsl:if test="$seq">\t\t\t<xsl:if test="$choice/element">,</xsl:if>\t\t\tsequence: [<xsl:call-template name="sequence"><xsl:with-param name="seq" select="$seq"/></xsl:call-template>]\t\t</xsl:if>\t</xsl:template>\t\t<xsl:template name="sequence">\t\t<xsl:param name="seq"/>\t\t<xsl:for-each select="$seq/*">\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t<xsl:if test="name()=\'element\'">{element: <xsl:call-template name="element"><xsl:with-param name="attrs" select="$seq/@*"/></xsl:call-template>}</xsl:if>\t\t\t<xsl:if test="name()=\'choice\'">{choice: {<xsl:call-template name="choice"><xsl:with-param name="choice" select="."/></xsl:call-template>}}</xsl:if>\t\t</xsl:for-each>\t</xsl:template></xsl:stylesheet>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsl,"SchemaBody"],0));(Ext.cmd.derive("FBEditor.editor.schema.Factory",Ext.Base,{singleton:"true",definedTypes:[],_deferredTypes:{},createElement:function(b,k){var h=this,f=b,a=k,c,d,j;if(Ext.isEmpty(f)){throw Error("Невозможно создать элемент схемы текста. Передано пустое назавние элемента.")}try{f=f.replace(/-([a-z])/g,"$1");f=Ext.String.capitalize(f);c="FBEditor.editor.schema."+f+"Element";if(!a.extend){delete a.extend}else{a.extend="FBEditor.editor.schema.body."+a.extend.substring(5)}j={constructor:function(){var l=this,e=l.superclass;l.sequence=l.sequence||[];while(e){if(e.sequence){l.sequence=Ext.Array.merge(e.sequence,l.sequence)}if(e.choice){l.choice=l.choice||{};l.choice=Ext.applyIf(l.choice,e.choice)}if(e.attributes){l.attributes=l.attributes||{};l.attributes=Ext.applyIf(l.attributes,e.attributes)}e=e.superclass}Ext.Object.each(l.attributes,function(n,o){var m;if(o.type&&/:/.test(o.type)){m="FBEditor.editor.schema.body."+o.type.substring(5);o.type=Ext.create(m)}})}};j=Ext.apply(a,j);Ext.define(c,j);d=Ext.create(c)}catch(g){Ext.log({level:"warn",msg:"Неопределенный элемент схемы текста: "+c,dump:g})}return d},defineType:function(b,k){var j=this,g=j.definedTypes,c=j._deferredTypes,d=b,a=Ext.clone(k),f;if(Ext.isEmpty(d)){throw Error("Невозможно определить тип схемы текста. Передано пустое назавние типа.")}try{d=d.replace(/-([a-z])/g,"$1");f="FBEditor.editor.schema.body."+d;if(a.extend){a.extend="FBEditor.editor.schema.body."+a.extend.substring(5);if(!Ext.Array.contains(g,a.extend)){c[f]={name:b,options:k};return}}Ext.define(f,a);g.push(f);delete c[f];j._checkDeferredTypes()}catch(h){Ext.log({level:"warn",msg:"Неопределенный тип схемы текста: "+f,dump:h})}},_checkDeferredTypes:function(){var b=this,a=b._deferredTypes;Ext.Object.each(a,function(c,d){b.defineType(d.name,d.options)})}},0,0,0,0,0,0,[FBEditor.editor.schema,"Factory"],0));(Ext.cmd.derive("FBEditor.editor.schema.Schema",Ext.Base,{_xsd:"",elements:null,callback:[],disableDebug:true,constructor:function(){var me=this,xsl,xsd,xsdJson,cse,dse,elements;cse=function(name,options){return FBEditor.editor.schema.Factory.createElement(name,options)};dse=function(name,options){return FBEditor.editor.schema.Factory.defineType(name,options)};try{me._xsd=FBEditor.xsd.Body.getXsd();xsd=me._xsd.replace(/<schema.*?>/,"<schema>");xsl=FBEditor.xsl.SchemaBody.getXsl();xsdJson=FBEditor.util.xml.Jsxml.trans(xsd,xsl);eval(xsdJson);me.elements=elements;Ext.log({msg:"Элементы схемы:",level:"info",dump:elements})}catch(e){Ext.log({level:"error",msg:e,dump:e});Ext.Msg.show({title:"Ошибка",message:"Невозможно инициализировать схему тела книги",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},validXml:function(d){var c=this,a=FBEditor.webworker.Manager,b=a.getMaster("xmllint"),e;e={xml:d.xml,xsd:c._xsd,xmlFileName:"body.xml",schemaFileName:"fb3_body.xsd"};d.scopeData=d.scopeData||{};c.callback.push({fn:d.callback,scope:d.scope,scopeData:d.scopeData});b.post(e,c.messageValid,c)},messageValid:function(a){var b=this,c=a.data,d;d=b.getCallback();!d.scopeData.debug||console.log("xmllint",c.res,c.valid,c);if(d){d.scopeData.loaded=c.loaded;d.fn.call(d.scope,c.res,d.scopeData)}},getCallback:function(){var a=this,b=null;if(a.callback.length){b=a.callback.splice(0,1)[0]}return b},getElement:function(a){var c=this,b;b=c.elements[a]?c.elements[a]:null;return b},getName:function(a){return a.attributes.name},verify:function(c,a,d){var l=this,k=true,m=Ext.clone(a),n,h,g,f,b=d?false:l.disableDebug;g=l.getElement(c);if(!g){return false}n=g.sequence.length?Ext.clone(g.sequence):null;h=g.choice&&g.choice.elements&&g.choice.elements.length?Ext.clone(g.choice):null;b||console.log("VERIFY name, srcEls, el",c,m,g);try{while(m.length){f=m[0];b||console.log("======================== (nameEl, seq, srcEls)",f,n,m);if(n&&!l.checkSequence(n,m,d)){b||console.log("=== ERROR VERIFY SEQ === (nameEl, seq, srcEls)",f,n,m);return false}if(h){if(!l.checkChoice(f,h,d)){b||console.log("=== ERROR VERIFY CHOICE === (nameEl, choice, srcEls)",f,h,m);return false}m.splice(0,1)}}}catch(j){b||console.log("=== THROW ERROR VERIFY === ",j);k=false}return k},checkSequence:function(j,g,c){var f=this,e=false,h,b,d,a=c?false:f.disableDebug;a||console.log("--- SEQUENCE --- (name, seq, srcEls)",g[0],j,g);while(j.length){b=g[0];h=j[0];if(h){if(h.element){d=g.length>1?g[1]:false;e=f.checkElement(b,d,h.element,j,c);if(e){g.splice(0,1)}}else{if(h.choice){if(b){while(b&&(e=f.checkChoice(b,h.choice,c))){a||console.log("< OK > sequence choice (name, choice)",b,h.choice);g.splice(0,1);b=g.length?g[0]:false}}else{e=f.checkChoice(b,h.choice,c)}j.splice(0,1)}}}}return e},checkElement:function(b,d,f,h,c){var j=this,g=false,e,a=c?false:j.disableDebug;e=Ext.Object.getValues(f)[0];a||console.log("--- ELEMENT --- (name, nextName, el, items)",b,d,e,h);if(e.name&&e.name===b||e.ref&&e.ref===b){a||console.log("< OK > sequence element (el, nextName)",e,d);g=true;if(e.maxOccurs&&e.maxOccurs==="unbounded"&&d===b){}else{if(e.maxOccurs&&Number(e.maxOccurs)>1&&d===b){e.maxOccurs=Number(e.maxOccurs)-1}else{h.splice(0,1)}}}else{if((e.name||e.ref)&&(!e.minOccurs||Number(e.minOccurs)!==0)){h.splice(0,h.length)}else{if(b===undefined){if(e.minOccurs&&Number(e.minOccurs)===0){g=true;h.splice(0,1)}else{h.splice(0,h.length)}}else{if(e.minOccurs&&Number(e.minOccurs)===0){h.splice(0,1)}else{h.splice(0,1)}}}}return g},checkChoice:function(d,b,a){var f=this,e=false,c,g=a?false:f.disableDebug;g||console.log("+++ CHOICE +++ (name, choice)",d,b);c=b.attributes||{};e=Ext.Array.findBy(b.elements,function(h){return h[d]});if(e){return true}if(b.sequence){e=f.checkChoiceSequence(d,b.sequence,a)}return e},checkChoiceSequence:function(b,e,a){var d=this,c=false,f=a?false:d.disableDebug;f||console.log("+++ CHOICE SEQUENCE +++ (name, choiceSeq)",b,e);c=Ext.Array.findBy(e,function(g){if(g.element){if(g.element[b]){f||console.log("-< OK >- choice sequence element (name, element)",b,g.element);return true}}else{if(g.choice){if(d.checkChoice(b,g.choice,a)){f||console.log("+< OK >+ choice sequence choice (name, choice)",b,g.choice);return true}}}return false});return c}},1,0,0,0,0,0,[FBEditor.editor.schema,"Schema"],0));(Ext.cmd.derive("FBEditor.editor.KeyMap",Ext.Base,{singleton:true,map:[{key:"B",ctrl:true,fn:"onBtn",args:{name:"strong"}},{key:"D",ctrl:true,fn:"onBtn",args:{name:"div"}},{key:"E",ctrl:true,fn:"onBtn",args:{name:"epigraph"}},{key:"H",ctrl:true,fn:"onBtn",args:{name:"title"}},{key:"I",ctrl:true,fn:"onBtn",args:{name:"em"}},{key:"I",ctrl:true,shift:true,fn:"onBtn",args:{name:"spacing"}},{key:"L",ctrl:true,fn:"onBtn",args:{name:"a"}},{key:"M",ctrl:true,fn:"onBtn",args:{name:"pre"}},{key:"N",ctrl:true,alt:true,fn:"onBtn",args:{name:"note"}},{key:"P",ctrl:true,fn:"onBtn",args:{name:"img"}},{key:"Q",ctrl:true,fn:"onBtn",args:{name:"blockquote"}},{key:"S",ctrl:true,shift:true,fn:"onBtn",args:{name:"section"}},{key:"U",ctrl:true,fn:"onBtn",args:{name:"underline"}},{key:"X",ctrl:true,fn:"onBtn",args:{name:"sub"}},{key:"X",ctrl:true,shift:true,fn:"onBtn",args:{name:"sup"}}],key:function(c){var a=this,b=a.map;Ext.Array.each(b,function(d){if(Ext.event.Event[d.key]&&c.keyCode===Ext.event.Event[d.key]){a.executeFn(c,d)}})},executeFn:function(d,a){var c=this,b;if(d.ctrlKey&&a.ctrl&&!d.shiftKey&&!a.shift||d.shiftKey&&a.shift&&!d.ctrlKey&&!a.ctrl||d.shiftKey&&a.shift&&d.ctrlKey&&a.ctrl||!d.ctrlKey&&!a.ctrl&&!d.shiftKey&&!a.shift){d.preventDefault();if(a.fn&&c[a.fn]){b=a.args||{};b.e=d;c[a.fn](b)}}},onBtn:function(a){var b=Ext.getCmp("panel-toolstab-main-button-"+a.name);if(!b.disabled){if(b.enableToggle){b.toggle()}b.fireEvent("click")}}},0,0,0,0,0,0,[FBEditor.editor,"KeyMap"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractElementController",Ext.Base,{el:null,createFromRange:false,constructor:function(a){var b=this;b.el=a},onCreateElement:function(f,d){var c=this,e,a,b;if(f&&!f.getRangeAt(0).collapsed&&c.createFromRange){c.createRangeElement(f,d)}else{b=c.getNodeVerify(f,d);if(b){a=c.getNameElement();e=Ext.create("FBEditor.editor.command."+a+".CreateCommand",{node:b,sel:f,opts:d});if(e.execute()){FBEditor.editor.HistoryManager.add(e)}}}},createRangeElement:function(e,c){var b=this,a,d;if(b.checkRangeVerify(e)){a=b.getNameElement();d=Ext.create("FBEditor.editor.command."+a+".CreateRangeCommand",{sel:e,opts:c});if(d.execute()){FBEditor.editor.HistoryManager.add(d)}}},onInsertElement:function(b,d){var c,a;d=d||false;a=b.getElement().xmlTag;if(!d){c=Ext.create("FBEditor.editor.command."+a+".SplitCommand",{node:b})}else{c=Ext.create("FBEditor.editor.command."+a+".CreateCommand",{prevNode:b})}if(c.execute()){FBEditor.editor.HistoryManager.add(c)}},onSplitElement:function(e,g){var f=FBEditor.editor.Manager,d,a,b,j,h,k,c;g=g||false;d=e.getElement();if(d.permit.splittable){a=f.getSchema();h=e.parentNode;j=h.getElement();b=f.getNamesElements(j);c=d.xmlTag;k=j.getChildPosition(d);b.splice(k+1,0,c);if(a.verify(j.xmlTag,b)){d.fireEvent("insertElement",e,g)}}else{e=e.parentNode;if(e&&e.getElement&&!e.getElement().isRoot){d=e.getElement();d.fireEvent("splitElement",e,g)}}},onKeyUp:function(d){var c=this,f,b,a;d.stopPropagation();f=c.getFocusNode(d.target);b=f.getElement?f.getElement():null;if(b){FBEditor.editor.Manager.setFocusElement(b);a=b&&b.controller?b.controller:c;return a.onKeyUpDefault(d)}return false},onKeyUpDefault:function(b){var a=this},onKeyDown:function(d){var c=this,f,b,a;d.stopPropagation();f=c.getFocusNode(d.target);if(f){b=f.getElement?f.getElement():null;a=b&&b.controller?b.controller:c;switch(d.keyCode){case Ext.event.Event.ENTER:if(d.shiftKey){return a.onKeyDownShiftEnter(d)}else{if(d.ctrlKey){return a.onKeyDownCtrlEnter(d)}}return a.onKeyDownEnter(d);case Ext.event.Event.DELETE:return a.onKeyDownDelete(d);case Ext.event.Event.BACKSPACE:return a.onKeyDownBackspace(d);case Ext.event.Event.Z:if(d.ctrlKey&&d.shiftKey){return a.onKeyDownCtrlShiftZ(d)}else{if(d.ctrlKey){return a.onKeyDownCtrlZ(d)}}return false;default:return a.onKeyDownDefault(d)}}},onKeyDownDefault:function(c){var b=this,a=FBEditor.editor.KeyMap;a.key(c)},onKeyDownShiftEnter:function(d){var c=this,b,a;d.preventDefault();b=c.getFocusNode(d.target);a=b.getElement?b.getElement():null;a.fireEvent("splitElement",b,false);return false},onKeyDownCtrlEnter:function(d){var c=this,b,a;d.preventDefault();b=c.getFocusNode(d.target);a=b.getElement?b.getElement():null;a.fireEvent("splitElement",b,true);return false},onKeyDownEnter:function(a){a.preventDefault();return false},onKeyDownDelete:function(b){var a=this;b.preventDefault();a.removeNodes()},onKeyDownBackspace:function(b){var a=this;b.preventDefault();a.removeNodes()},onKeyDownCtrlZ:function(a){a.preventDefault();FBEditor.editor.HistoryManager.undo();return false},onKeyDownCtrlShiftZ:function(a){a.preventDefault();FBEditor.editor.HistoryManager.redo();return false},onMouseDown:function(c){var a=FBEditor.editor.Manager,b;c.stopPropagation();b=c.target.viewportId;a.clearSelectNodes(b)},onMouseUp:function(g){var d=this,b=FBEditor.getBridgeNavigation(),c=FBEditor.editor.Manager,h,a,f;g.stopPropagation();h=d.getFocusNode(g.target);if(h&&h.getElement){f=h.viewportId;a=h.getElement();c.setFocusElement(h);b.Ext.getCmp("panel-body-navigation").expandElement(a);c.checkSelectNodes(f)}},onMouseMove:function(d){var c=this,b=c.el,a=b.selection;if(a&&d.which==1){d.stopPropagation();a.execute()}},onNodeInserted:function(l){var m=this,b=l.relatedNode,d=l.target,n=b.viewportId,f=FBEditor.editor.Manager,h=FBEditor.editor.Factory,c,g,a,j,k;if(b.firstChild.nodeName!=="MAIN"&&!f.suspendEvent){console.log("DOMNodeInserted:",Ext.Object.getValues(f.content.nodes)[0].innerHTML);if(d.nodeType===Node.TEXT_NODE){c=h.createElementText(d.nodeValue)}else{c=h.createElement(d.localName)}d.viewportId=n;c.setNode(d);g=d.nextSibling;a=d.previousSibling;j=b.getElement();console.log("new, parent",d,b.outerHTML,j.children.length);if(g){k=g.getElement();console.log("insert, nextSibling",g);j.insertBefore(c,k)}else{if(a){j.add(c);console.log("add, previousSibling",a)}else{console.log("add");j.add(c)}}j.sync(n);f.setFocusElement(c);l.stopPropagation()}},onNodeRemoved:function(h){var d=this,c=h.relatedNode,g=h.target,f=c.viewportId,b,a;if(c.firstChild&&c.firstChild.nodeName!=="MAIN"&&!FBEditor.editor.Manager.suspendEvent){console.log("DOMNodeRemoved:",g,c.outerHTML);b=c.getElement();a=g.getElement();b.remove(a);b.sync(f);h.stopPropagation()}},onDrop:function(a){a.preventDefault()},onPaste:function(a){a.preventDefault();a.stopPropagation()},onBeforeCopy:function(a){a.stopPropagation();FBEditor.editor.Manager.getContent().beforeCopy()},onCopy:function(a){a.stopPropagation();Ext.defer(function(){FBEditor.editor.Manager.getContent().afterCopy()},10)},getElement:function(){return this.el},getNameElement:function(){var a=this;return a.getElement().xmlTag},getNodeVerify:function(e,b){var l=this,h={},d={},f=FBEditor.editor.Manager,k,a,c,j,g;e=e||window.getSelection();j=e.getRangeAt(0);d.node=j.endContainer;h.node=d.node.getElement();d.node=h.node.isText||h.node.hisName(f.emptyElement)?d.node.parentNode:d.node;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();g=l.getNameElementsVerify(d);a=f.getSchema();c=h.parent.getName();k=a.verify(c,g)?d.node:false;return k},getNameElementsVerify:function(b){var e=this,d={},a,c;c=e.getNameElement();b.node=b.parent.getElement().xmlTag===c?b.parent:b.node;b.parent=b.node.parentNode;d.parent=b.parent.getElement();a=FBEditor.editor.Manager.getNamesElements(d.parent);a.unshift(c);return a},getFocusNode:function(e){var c=this,d=window.getSelection(),b=e,a;a=d&&d.rangeCount?d.getRangeAt(0):null;if(a&&b.nodeName!=="IMG"){b=a.commonAncestorContainer.nodeType===Node.TEXT_NODE?a.commonAncestorContainer.parentNode:a.commonAncestorContainer}return b},removeNodes:function(){var a;a=Ext.create("FBEditor.editor.command.RemoveNodesCommand");if(a.execute()){FBEditor.editor.HistoryManager.add(a)}}},1,0,0,0,0,0,[FBEditor.editor.element,"AbstractElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractSelection",Ext.Base,{el:null,constructor:function(a){var b=this;b.el=a},execute:function(){throw Error("Не реализован метод FBEditor.editor.element.AbstractSelection#execute")},isActive:function(){throw Error("Не реализован метод FBEditor.editor.element.AbstractSelection#isActive")}},1,0,0,0,0,0,[FBEditor.editor.element,"AbstractSelection"],0));(Ext.cmd.derive("FBEditor.command.InterfaceCommand",Ext.Base,{execute:function(){throw Error("Необходимо реализовать метод command.InterfaceCommand#execute")},unExecute:function(){throw Error("Необходимо реализовать метод command.InterfaceCommand#unExecute")}},0,0,0,0,0,0,[FBEditor.command,"InterfaceCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCommand",FBEditor.command.InterfaceCommand,{data:null,constructor:function(b){var a=this;a.data=b||{}},getData:function(){return this.data},verifyElement:function(e,a){var f=this,d=FBEditor.editor.Manager,g=d.getSchema(),c,b;if(!e||e.isText||e.isUndefined||e.isStyleHolder&&e.isEmpty()){return true}b=d.content.getXml(true);c={el:e,debug:a};g.validXml({xml:b,callback:f.verifyResult,scope:f,scopeData:c})},verifyResult:function(d,c){var f=this,b=FBEditor.editor.Manager,e=c.el,a;if(!d){a=e.getXml();f.unExecute();Ext.log({msg:"Полученная структура элемента не соответствует схеме:",dump:a,level:"info"});throw Error("Действие команды отменено для "+e.getName())}b.syncButtons()}},1,0,0,0,0,0,[FBEditor.editor.command,"AbstractCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.PasteCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),k=false,a={},f={},d={},m={},b=window.getSelection(),c=FBEditor.editor.Manager,h;try{c.suspendEvent=true;if(g.saveRange){c.setCursor(g.saveRange)}h=b.getRangeAt(0);d={start:h.startOffset,end:h.endOffset};g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,collapsed:h.collapsed,offset:d};a.node=h.startContainer;f.node=a.node.getElement();g.viewportId=a.node.viewportId;a.paste=g.html.querySelector("body");console.log("paste",a.paste,g);f.paste=c.createElementFromNode(a.paste);f.fragment=FBEditor.editor.Factory.createElement("div");f.paste.getOnlyStylesChildren(f.fragment);a.fragment=f.fragment.getNode(g.viewportId);if(f.node.isEmpty()){a.needEmpty=true;if(f.fragment.children[0].isStyleHolder){while(!f.node.isStyleHolder){a.node=a.node.parentNode;f.node=a.node.getElement()}}else{a.node=c.getDeepFirst(a.node);f.node=a.node.getElement()}}else{if(f.fragment.children[0].isStyleHolder){while(!f.node.isStyleHolder){a.node=a.node.parentNode;f.node=a.node.getElement()}m.isEnd=c.isLastNode(a.node,h.startContainer)&&h.startContainer.nodeValue.length===d.start;m.isStart=c.isFirstNode(a.node,h.startContainer)&&d.start===0}else{a.node=h.startContainer;f.node=a.node.getElement();m.isEnd=f.node.text.length===d.start;m.isStart=d.start===0}if(m.isStart){}else{if(m.isEnd){if(a.node.nextSibling){a.node=a.node.nextSibling}else{a.parent=a.node.parentNode;f.parent=a.parent.getElement();f.node=c.createEmptyElement();a.node=f.node.getNode(g.viewportId);f.parent.add(f.node);a.parent.appendChild(a.node)}}else{a.needJoin=true;a.container=h.startContainer;a.common=a.node.parentNode;f.common=a.common.getElement();a.node=c.splitNode(f,a,d.start);f.common.removeEmptyText()}}}a.parent=a.node.parentNode;f.parent=a.parent.getElement();a.fragmentFirst=a.fragment.firstChild;a.fragmentLast=a.fragment.lastChild;f.fragmentFirst=a.fragmentFirst.getElement();f.fragmentLast=a.fragmentLast.getElement();a.first=a.fragment.firstChild;f.first=a.first.getElement();while(a.first){f.first=a.first.getElement();f.parent.insertBefore(f.first,f.node);a.parent.insertBefore(a.first,a.node);a.first=a.fragment.firstChild}a.prev=a.fragmentFirst.previousSibling;f.prev=a.prev?a.prev.getElement():null;a.next=a.fragmentLast.nextSibling;f.next=a.next?a.next.getElement():null;if(f.prev&&f.prev.isText&&f.next&&f.next.isText&&f.fragmentFirst.isText&&f.fragmentFirst.elementId===f.fragmentLast.elementId){a.needReplaceText=f.prev.text+f.next.text;a.cursor=a.prev;d.cursor=f.prev.text.length+f.fragmentFirst.text.length;f.textValue=f.prev.text+f.fragmentFirst.text+f.next.text;f.prev.setText(f.textValue);a.prev.nodeValue=f.textValue;f.parent.remove(f.fragmentFirst);a.parent.removeChild(a.fragmentFirst);f.parent.remove(f.next);a.parent.removeChild(a.next);f.next=null}else{if(f.prev&&f.prev.isText&&f.fragmentFirst.isText){a.needSplitFirst=true;f.textValue=f.prev.text+f.fragmentFirst.text;f.prev.setText(f.textValue);a.prev.nodeValue=f.textValue;f.parent.remove(f.fragmentFirst);a.parent.removeChild(a.fragmentFirst);a.cursor=a.fragmentLast.parentNode?c.getDeepLast(a.fragmentLast):a.prev}}if(f.next&&f.next.isText&&f.fragmentLast.isText){a.needSplitLast=true;f.textValue=f.fragmentLast.text+f.next.text;f.next.setText(f.textValue);a.next.nodeValue=f.textValue;f.parent.remove(f.fragmentLast);a.parent.removeChild(a.fragmentLast);a.cursor=a.next;d.cursor=f.fragmentLast.text.length}if(f.node.isEmpty()){f.parent.remove(f.node);a.parent.removeChild(a.node)}f.parent.sync(g.viewportId);c.suspendEvent=false;a.cursor=a.cursor||c.getDeepLast(a.fragmentLast);d.cursor=d.cursor?d.cursor:(a.cursor.nodeValue?a.cursor.nodeValue.length:0);c.setCursor({startNode:a.cursor,startOffset:d.cursor});g.nodes=a;g.els=f;l.verifyElement(f.parent);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}return k},unExecute:function(){var k=this,d=k.getData(),a={},c={},j=false,b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g;try{b.suspendEvent=true;g=d.range;a=d.nodes;c=d.els;a.cursor=g.start;console.log("undo paste",a,g,c);if(a.needReplaceText){c.prev.setText(a.needReplaceText);a.prev.nodeValue=a.needReplaceText;a.cursor=a.prev;c.prev.sync(d.viewportId)}else{if(a.needSplitFirst){c.startTextValue=c.prev.text.substring(0,g.offset.start);c.endTextValue=c.prev.text.substring(g.offset.start);c.t=f.createElementText(c.startTextValue);a.t=c.t.getNode(d.viewportId);a.fragmentFirst=a.prev;c.fragmentFirst=c.prev;c.fragmentFirst.setText(c.endTextValue);a.fragmentFirst.nodeValue=c.endTextValue;c.parent.insertBefore(c.t,c.fragmentFirst);a.parent.insertBefore(a.t,a.fragmentFirst);a.cursor=a.t}if(a.needSplitLast){c.startTextValue=c.next.text.substring(0,g.offset.cursor);c.endTextValue=c.next.text.substring(g.offset.cursor);c.fragmentLast=f.createElementText(c.startTextValue);a.fragmentLast=c.fragmentLast.getNode(d.viewportId);c.next.setText(c.endTextValue);a.next.nodeValue=c.endTextValue;c.parent.insertBefore(c.fragmentLast,c.next);a.parent.insertBefore(a.fragmentLast,a.next)}a.next=a.fragmentFirst;c.next=a.next.getElement();while(c.next&&c.next.elementId!==c.fragmentLast.elementId){a.buf=a.next.nextSibling;c.parent.remove(c.next);a.parent.removeChild(a.next);a.next=a.buf;c.next=a.next?a.next.getElement():null}if(c.next){c.parent.remove(c.next);a.parent.removeChild(a.next)}if(a.needJoin){b.joinNode(a.node)}if(a.needEmpty){c.parent.add(c.node);a.parent.appendChild(a.node)}c.parent.sync(d.viewportId)}b.suspendEvent=false;d.saveRange={startNode:a.cursor,startOffset:g.offset.start};b.setCursor(d.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command,"PasteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.RemoveNodesCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var n=this,j=n.getData(),m=false,g={},a={},f={},o={},c={},b=window.getSelection(),d=FBEditor.editor.Manager,h=FBEditor.editor.Factory,k;try{d.suspendEvent=true;if(j.saveRange){d.setCursor(j.saveRange)}k=b.getRangeAt(0);if(k.collapsed){throw Error("Отсутствует выделение")}a.common=k.commonAncestorContainer;g.common=a.common.getElement();j.viewportId=a.common.viewportId;f={start:k.startOffset,end:k.endOffset};j.range={common:k.commonAncestorContainer,start:k.startContainer,end:k.endContainer,parentStart:k.commonAncestorContainer.parentNode,collapsed:k.collapsed,offset:f};console.log("remove nodes ",j.range);a.first=k.startContainer;g.first=a.first.getElement();g.commonId=g.common.elementId;while(g.first&&g.first.parent.elementId!==g.commonId){a.first=g.isRoot?a.first.firstChild:a.first.parentNode;g.first=a.first?a.first.getElement():null}a.last=k.endContainer;g.last=a.last.getElement();while(g.last&&g.last.parent.elementId!==g.commonId){a.last=g.isRoot?a.last.lastChild:a.last.parentNode;g.last=a.last?a.last.getElement():null}c.start=new RegExp("^"+Ext.String.escapeRegex(k.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(g.first.getText()));c.end=new RegExp(Ext.String.escapeRegex(k.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(g.last.getText())+"$");o.isStart=c.start.test(g.first.getText())||c.start2.test(k.toString());o.isEnd=c.end.test(g.last.getText())||c.end2.test(k.toString());j.range.pos=o;if(!o.isStart){a.container=k.startContainer;a.start=d.splitNode(g,a,f.start)}else{a.start=a.first}if(!o.isEnd){a.container=k.endContainer;a.end=d.splitNode(g,a,f.end);a.cursor=a.end;a.startCursor=0;a.end=a.end.previousSibling}else{a.end=a.last;if(a.start.previousSibling){a.cursor=d.getDeepFirst(a.start.previousSibling);a.startCursor=a.cursor.nodeValue?a.cursor.nodeValue.length:0}}g.start=a.start.getElement();g.end=a.end.getElement();a.parent=a.common;g.parent=g.common;g.removed=[];a.removed=[];a.next=a.start;g.next=a.next.getElement();while(g.next&&g.next.elementId!==g.end.elementId){g.removed.push(g.next);a.removed.push(a.next);a.buf=a.next.nextSibling;g.parent.remove(g.next);a.parent.removeChild(a.next);a.next=a.buf;g.next=a.next?a.next.getElement():null}a.nextCursor=a.next.nextSibling?a.next.nextSibling:null;g.removed.push(g.next);a.removed.push(a.next);g.parent.remove(g.next);a.parent.removeChild(a.next);a.first=a.parent.firstChild;if(!a.first){g.isEmpty=true;g.p=d.createEmptyP();g.newEl=g.p;if(g.parent.isRoot){g.s=h.createElement("section");g.s.add(g.p);g.newEl=g.s}a.newEl=g.newEl.getNode(j.viewportId);g.parent.add(g.newEl);a.parent.appendChild(a.newEl);a.cursor=d.getDeepFirst(a.newEl);a.startCursor=0}g.parent.sync(j.viewportId);d.suspendEvent=false;d.setCursor({startNode:a.cursor,startOffset:a.startCursor});j.nodes=a;j.els=g;n.verifyElement(g.parent);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});console.log("nodes",a);FBEditor.editor.HistoryManager.removeNext()}return m},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a;try{c.suspendEvent=true;a=h.range;b=h.nodes;d=h.els;console.log("undo remove nodes ",h,b);if(d.isEmpty){d.parent.remove(d.newEl);b.parent.removeChild(b.newEl);b.nextCursor=null}Ext.Array.each(b.removed,function(e){if(b.nextCursor){d.nextCursor=b.nextCursor.getElement();d.parent.insertBefore(e.getElement(),d.nextCursor);b.parent.insertBefore(e,b.nextCursor)}else{d.parent.add(e.getElement());b.parent.appendChild(e)}});if(!a.pos.isStart){b.prev=b.removed[0].previousSibling;c.joinNode(b.removed[0]);c.removeEmptyNodes(b.prev)}if(!a.pos.isEnd){c.joinNode(b.nextCursor);c.removeEmptyNodes(b.removed[b.removed.length-1])}d.parent.sync(h.viewportId);c.suspendEvent=false;h.saveRange={startNode:a.start,endNode:a.end,startOffset:a.offset.start,endOffset:a.offset.end};c.setCursor(h.saveRange);h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command,"RemoveNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractElement",Ext.Base,{listeners:{splitElement:function(){this.controller.onSplitElement.apply(this.controller,arguments)},createElement:function(){this.controller.onCreateElement.apply(this.controller,arguments)},insertElement:function(){this.controller.onInsertElement.apply(this.controller,arguments)},keyDownEnter:function(){this.controller.onKeyDownEnter.apply(this.controller,arguments)},keyDownDelete:function(){this.controller.onKeyDownDelete.apply(this.controller,arguments)},keyDownBackspace:function(){this.controller.onKeyDownBackspace.apply(this.controller,arguments)},paste:function(){this.controller.onPaste.apply(this.controller,arguments)}},controllerClass:"FBEditor.editor.element.AbstractElementController",selectionClass:"",customListeners:{keydown:"onKeyDown",keyup:"onKeyUp",mouseup:"onMouseUp",mousedown:"onMouseDown",mousemove:"onMouseMove",DOMNodeInserted:"onNodeInserted",DOMNodeRemoved:"onNodeRemoved",DOMCharacterDataModified:"onTextModified",drop:"onDrop",paste:"onPaste",beforecopy:"onBeforeCopy",copy:"onCopy"},permitDefault:{splittable:false},htmlTag:"",xmlTag:"",style:"",baseCls:"",cls:"",children:[],parent:null,marker:null,attributes:{},elementId:"",prefixId:"editor-el",showedOnTree:true,treePath:"",constructor:function(a,b){var d=this,c=[];b=b||d.children;d.elementId=Ext.id({prefix:d.prefixId});d.mixins.observable.constructor.call(d,{});Ext.Array.each(b,function(f,e){f.parent=d;if(f.isMarker){d.marker=f}else{c.push(f)}});d.children=c;d.attributes=Ext.clone(a)||d.attributes;d.attributes=d.defaultAttributes?Ext.applyIf(a,d.defaultAttributes):d.attributes;d.permit=d.permit?Ext.applyIf(d.permit,d.permitDefault):d.permitDefault;d.createController();d.createSelection()},add:function(a){var b=this;if(a.parent){a.parent.remove(a)}a.parent=b;if(a.isMarker){b.marker=a}else{b.children.push(a)}},insertBefore:function(c,a){var d=this,b=d.children,e=d.getChildPosition(a);if(c.parent){c.parent.remove(c)}c.parent=d;b.splice(e,0,c);d.children=b},replace:function(b,d){var c=this,a=c.children,e=c.getChildPosition(d);if(b.parent){b.parent.remove(b)}b.parent=c;c.remove(d);a.splice(e,1,b);c.children=a},remove:function(c){var d=this,a=d.children,e,b;if(c){e=d.getChildPosition(c);if(e!==null){if(!b){c.clear()}a.splice(e,1);d.children=a}}},first:function(){var b=this,a=b.children,c;c=a.length?a[0]:null;return c},next:function(){var c=this,b=c.parent,d,a;d=b.getChildPosition(c);a=b.children[d+1]?b.children[d+1]:null;return a},removeAll:function(){var c=this,a=c.children,b;while(a.length){b=a[0];c.remove(b)}},each:function(a){Ext.Array.each(this.children,a)},clear:function(){},clone:function(f){var e=this,d=e.children,b=FBEditor.editor.Factory,g,a,c;a=f&&f.ignoredText?true:false;c=f&&f.ignoredDeep?true:false;if(e.isText&&a){return null}g=e.isText?b.createElementText(e.text):b.createElement(e.getName());if(!c){Ext.Array.each(d,function(j){var h=j.clone(f);if(h){g.add(h)}})}return g},setNode:function(b){var a=this;a.setStyleHtml();b=a.setAttributesHtml(b);b=a.setEvents(b);b.getElement=function(){return a};a.nodes=a.nodes||{};a.nodes[b.viewportId]=b;if(a.isHide){a.hide()}},getNode:function(e){var d=this,b=d.children,a=d.htmlTag,c;c=document.createElement(a);c.viewportId=e;d.setNode(c);if(d.marker){c.appendChild(d.marker.getNode(e))}if(b&&b.length){Ext.Array.each(b,function(f){c.appendChild(f.getNode(e))})}return c},removeNodes:function(c){var b=this,a=b.children;delete b.nodes[c];if(a.length){Ext.Array.each(a,function(d){d.removeNodes(c)})}},selectNode:function(d,g){var f=this,e=f.nodes[g],a=f.cls,b=FBEditor.editor.Manager.selectCls,c;c=new RegExp(b);if(!c.test(a)&&d){a=a+" "+b;e.setAttribute("class",a)}if(c.test(a)&&!d){a=a.replace(" "+b,"");e.setAttribute("class",a)}f.cls=a},getXml:function(c){var f=this,e=f.children,b=f.xmlTag,d,a;a=f.getAttributesXml(c);d="<"+b;d+=a?" "+a:"";if(f.marker){d+=">"+f.marker.getXml(c)}if(e&&e.length){d+=f.marker?"":">";Ext.Array.each(e,function(g){d+=g.getXml(c)});d+="</"+b+">"}else{d+=f.marker?"</"+b+">":"/>"}return d},getData:function(){var c=this,b,d,a;b=Ext.Object.getValues(c.nodes)[0];a=c.getBlock();d={el:a,elementName:a.xmlTag,htmlPath:c.getHtmlPath(b)};Ext.Object.each(a.attributes,function(e,f){d[e]=f?f:""});return d},sync:function(d){var c=this,b=FBEditor.editor.Manager,a;b.suspendEvent=true;Ext.Object.each(c.nodes,function(f,e){if(f!==d){a=c.getNode(f);e.parentNode.replaceChild(a,e)}});b.suspendEvent=false;b.updateTree()},update:function(f,e){var d=this,b={},a=null,c=/^marker-/;e=e||{};if(f.marker&&f.marker==="true"){a={};delete f.marker}Ext.Object.each(f,function(g,h){if(!c.test(g)){b[g]=h}else{if(a){a[g.replace(c,"")]=h}}});if(a){if(d.marker){d.updateMarker(a)}else{d.createMarker(a)}}else{d.removeMarker()}d.attributes=d.defaultAttributes?Ext.clone(d.defaultAttributes):{};Ext.Object.each(b,function(g,h){if(h){d.attributes[g]=h}});if(!e.withoutView){d.updateView()}},updateView:function(){var c=this,b=FBEditor.editor.Manager,e,d,a;c.style="";e=Ext.Object.getKeys(c.nodes)[0];d=c.nodes[e];b.suspendEvent=true;a=c.getNode(e);d.parentNode.replaceChild(a,d);c.sync(e);b.suspendEvent=false},setEvents:function(a){var c=this,b=c.customListeners;Ext.Object.each(b,function(d,e){if(c.controller[e]){a.addEventListener(d,function(f){c.controller[e](f)},false)}});return a},getName:function(){return this.xmlTag},getBlock:function(){var a=this;while(a.isStyleType||a.isText){a=a.parent}return a},getHtmlPath:function(e,f){var d=this,b,a,c;a=e&&e.parentNode?e.parentNode:null;b=e&&e.nodeType!==Node.TEXT_NODE?e.nodeName:"";c=b+(f?" > "+f:"");if(b!=="MAIN"&&a){c=d.getHtmlPath(a,c)}return c},getChildrenCountByProp:function(a,b){var d=this,c=0;Ext.Array.each(d.children,function(e){if(e[a]===b){c++}});return c},getChildPosition:function(b){var c=this,a=c.children,d=null;if(!b.elementId){console.error(b);return null}Ext.Array.each(a,function(f,e){if(b.elementId===f.elementId){d=e;return false}});return d},getSelection:function(){return this.selection},createScaffold:function(){var b=this,a={};a.node=b;return a},getText:function(){var b=this,a,c;a=Ext.Object.getValues(b.nodes)[0];c=a?a.textContent||a.innerText:"";return c||""},getNameTree:function(){var b=this,a;a="&lt;"+b.xmlTag+"&gt;";if(b.children.length&&b.children[0].xmlTag==="title"){a+=" "+b.children[0].getText()}return a},removeView:function(){var a=this;Ext.Object.each(a.nodes,function(d,c){var b=c.parentNode;if(b){b.removeChild(c)}});a.nodes={}},hisName:function(a){var c=this,b;b=c.xmlTag===a;return b},hasParentName:function(a){var c=this,b=c.parent;while(b){if(b.hisName(a)){return true}b=b.parent}return false},getParentName:function(a){var c=this,b=c.parent;while(b){if(b.hisName(a)){return b}b=b.parent}return null},isEmpty:function(){var a=this;if(!a.children.length){return true}if(a.children.length===1){return a.children[0].isEmpty()}else{return false}},removeEmptyText:function(){var b=this,a=b.children,d=0,c;while(d<a.length){c=a[d];if(c.isText&&c.isEmpty()){b.remove(c);c.removeView()}else{c.removeEmptyText();d++}}},hide:function(){var b=this,a=b.nodes;b.isHide=true;Ext.Object.each(a,function(c,d){b.styleDisplay=d.style.display;d.style.display="none"})},show:function(){var b=this,a=b.nodes;b.isHide=false;Ext.Object.each(a,function(c,d){d.style.display=b.styleDisplay})},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,e){a+=d+'="'+e+'" '});return a},setStyleHtml:function(){return this.style},setAttributesHtml:function(a){var c=this,b=a;Ext.Object.each(c.attributes,function(d,e){b.setAttribute(d,e)});if(c.style){b.setAttribute("style",c.style)}c.initCls();if(c.cls){b.setAttribute("class",c.cls)}return b},initCls:function(){var b=this,a="";if(b.baseCls||b.cls){a=b.baseCls?b.baseCls:"";a+=a?" "+b.cls:b.cls}b.cls=a},createController:function(a){this.controller=Ext.create(this.controllerClass,a||this)},createSelection:function(a){this.selection=this.selectionClass?Ext.create(this.selectionClass,a||this):null},createMarker:function(e){var d=this,a,c,b=FBEditor.editor.Factory;c=b.createElement("img",e);a=b.createElement("marker",{},c);d.add(a)},updateMarker:function(b){var a=this;a.marker.img.update(b,{withoutView:true})},removeMarker:function(){this.marker=null},getOnlyStylesChildren:function(a){var b=this,d=0,c;while(d<b.children.length){c=b.children[d];if(!c.isStyleType&&!c.isText){c.getOnlyStylesChildren(a)}if(c&&(c.isStyleType||c.isText)){a.add(c)}else{d++}}},convertToText:function(a){var b=this,d=0,c;while(d<b.children.length){c=b.children[d];if(!c.isStyleType&&!c.isText){c.convertToText(a)}if(c&&(c.isStyleType||c.isText)){if(c.isStyleType){c.removeUndefinedElements()}if(c.children.length){a.add(c)}else{d++}}else{d++}}},removeUndefinedElements:function(){var c=this,a=c.children,d=0,b;while(c.children.length&&d<c.children.length){b=a[d];if(b.isUndefined){c.remove(b)}else{d++}}},beforeCopy:function(){var a=this;Ext.Array.each(a.children,function(b){b.beforeCopy()})},afterCopy:function(){var a=this;Ext.Array.each(a.children,function(b){b.afterCopy()})}},1,0,0,0,0,[["observable",Ext.util.Observable]],[FBEditor.editor.element,"AbstractElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleElementController",FBEditor.editor.element.AbstractElementController,{createFromRange:true,onKeyDownEnter:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("keyDownEnter",c)},onKeyDownDelete:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("keyDownDelete",c)},onKeyDownBackspace:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("keyDownBackspace",c)},onPaste:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("paste",c)},checkRangeVerify:function(g){var e=this,d={},b={},f=["p","li","subtitle"],c,a;a=g.getRangeAt(0);if(a.collapsed){return false}b.common=a.commonAncestorContainer;d.common=b.common.getElement();if(d.common.elementId===a.startContainer.getElement().elementId){return true}b.firstP=a.startContainer;d.firstP=b.firstP.getElement();while(!Ext.Array.contains(f,d.firstP.xmlTag)){b.firstP=b.firstP.parentNode;d.firstP=b.firstP.getElement()}b.lastP=a.endContainer;d.lastP=b.lastP.getElement();while(!Ext.Array.contains(f,d.lastP.xmlTag)){b.lastP=b.lastP.parentNode;d.lastP=b.lastP.getElement()}c=b.firstP&&b.lastP;return c}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.AbstractStyleElementController",showedOnTree:false,isStyleType:true,createScaffold:function(){var b=this,a={};a.t=FBEditor.editor.Factory.createElementText("текст");b.add(a.t);return a}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.a.AElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.a,"AElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateRangeStyleCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var n=this,j=n.getData(),m=false,g={},a={},f={},c={},o={},d=FBEditor.editor.Manager,h=FBEditor.editor.Factory,b,k;try{d.suspendEvent=true;if(j.saveRange){d.setCursor(j.saveRange)}b=j.sel||window.getSelection();k=b.getRangeAt(0);if(k.collapsed){throw Error("Отсутствует выделение")}a.common=k.commonAncestorContainer;g.common=a.common.getElement();j.viewportId=a.common.viewportId;f={start:k.startOffset,end:k.endOffset};j.range={common:k.commonAncestorContainer,start:k.startContainer,end:k.endContainer,parentStart:k.startContainer.parentNode,collapsed:k.collapsed,offset:f};j.links={};if(g.common.isText){j.range.oldValue=a.common.nodeValue;a.parent=a.common.parentNode;g.parent=a.parent.getElement();j.links.parent=a.parent;a.next=a.common.nextSibling;g.startValue=a.common.nodeValue.substring(0,f.start);g.selValue=a.common.nodeValue.substring(f.start,f.end);g.endValue=a.common.nodeValue.substring(f.end);if(g.startValue){g.common.setText(g.startValue);a.common.nodeValue=g.startValue}else{g.parent.remove(g.common);a.parent.removeChild(a.common)}g.node=h.createElement(n.elementName);g=Ext.apply(g,g.node.createScaffold());g.t.setText(g.selValue);a.node=g.node.getNode(j.viewportId);if(a.next){g.next=a.next.getElement();g.parent.insertBefore(g.node,g.next);a.parent.insertBefore(a.node,a.next)}else{g.parent.add(g.node);a.parent.appendChild(a.node)}j.links.newNode=a.node;a.cursor=a.node.firstChild;if(g.endValue){g.node=h.createElementText(g.endValue);a.node=g.node.getNode(j.viewportId);if(a.next){g.next=a.next.getElement();g.parent.insertBefore(g.node,g.next);a.parent.insertBefore(a.node,a.next)}else{g.parent.add(g.node);a.parent.appendChild(a.node)}}}else{a.pp=[];a.firstP=k.startContainer;g.firstP=a.firstP.getElement();g.isRoot=g.firstP.isRoot;while(g.firstP&&!g.firstP.isStyleHolder){a.firstP=g.isRoot?a.firstP.firstChild:a.firstP.parentNode;g.firstP=a.firstP?a.firstP.getElement():null}a.lastP=k.endContainer;g.lastP=a.lastP.getElement();while(g.lastP&&!g.lastP.isStyleHolder){a.lastP=g.isRoot?a.lastP.lastChild:a.lastP.parentNode;g.lastP=a.lastP?a.lastP.getElement():null}if(g.firstP.elementId!==g.lastP.elementId){a.ppStop=false;a.cur=a.firstP;while(!a.cur.nextSibling){a.cur=a.cur.parentNode}a.pp=d.getNodesPP(a.cur.nextSibling,a,g)}c.start=new RegExp("^"+Ext.String.escapeRegex(k.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(g.firstP.getText()));c.end=new RegExp(Ext.String.escapeRegex(k.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(g.lastP.getText())+"$");o.isStart=c.start.test(g.firstP.getText())||c.start2.test(k.toString());o.isEnd=c.end.test(g.lastP.getText())||c.end2.test(k.toString());j.range.pos=o;if(o.isStart){a.startContainer=a.firstP.firstChild;g.startContainer=a.startContainer.getElement()}else{a.common=a.firstP;g.common=g.firstP;a.container=k.startContainer;a.startContainer=d.splitNode(g,a,f.start);g.startContainer=a.startContainer.getElement();g.common.removeEmptyText()}a.parentStart=a.startContainer.parentNode;g.parentStart=a.parentStart.getElement();a.endContainer=g.isRoot?a.lastP.lastChild:k.endContainer;g.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;g.parentEnd=a.parentEnd.getElement();if(o.isEnd){a.endContainer=a.lastP.lastChild}else{if(g.endContainer.isText&&g.parentEnd.elementId===g.lastP.elementId&&j.range.offset.end===g.endContainer.text.length){a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer}else{a.common=a.lastP;g.common=g.lastP;a.container=a.endContainer;a.endContainer=d.splitNode(g,a,f.end);g.common.removeEmptyText()}}g.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;g.parentEnd=a.parentEnd.getElement();if(!a.endContainer.firstChild&&!g.endContainer.isText){a.bufRemove=a.endContainer;a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer.previousSibling;a.parentEnd.removeChild(a.bufRemove);g.parentEnd.remove(a.bufRemove.getElement());g.endContainer=a.endContainer.getElement()}g.node=h.createElement(n.elementName);a.node=g.node.getNode(j.viewportId);g.parentStart.insertBefore(g.node,g.startContainer);a.parentStart.insertBefore(a.node,a.startContainer);a.next=a.node.nextSibling;g.next=a.next?a.next.getElement():null;while(g.next&&(g.next.elementId!==g.endContainer.elementId||o.isEnd)){g.node.add(g.next);a.node.appendChild(a.next);g.parentStart.remove(g.next);a.next=a.node.nextSibling;g.next=a.next?a.next.getElement():null}if(g.parentStart.elementId!==g.parentEnd.elementId){a.prev=a.endContainer.previousSibling;g.node=h.createElement(n.elementName);a.node=g.node.getNode(j.viewportId);a.first=a.parentEnd.firstChild;g.first=a.first.getElement();g.parentEnd.insertBefore(g.node,g.first);a.parentEnd.insertBefore(a.node,a.first);a.next=a.node.nextSibling;g.next=a.next?a.next.getElement():null;while(g.next&&(g.next.elementId!==g.endContainer.elementId||o.isEnd)){g.node.add(g.next);a.node.appendChild(a.next);g.parentEnd.remove(g.next);a.next=a.node.nextSibling;g.next=a.next?a.next.getElement():null}}Ext.Array.each(a.pp,function(r){var q={},e={};e.p=r;q.p=e.p.getElement();q.node=h.createElement(n.elementName);e.node=q.node.getNode(j.viewportId);e.first=e.p.firstChild;q.first=e.first.getElement();q.p.insertBefore(q.node,q.first);e.p.insertBefore(e.node,e.first);e.next=e.node.nextSibling;while(e.next){q.next=e.next.getElement();q.node.add(q.next);e.node.appendChild(e.next);q.p.remove(q.next);e.next=e.node.nextSibling}});a.parent=a.parentStart.parentNode;g.parent=a.parent.getElement();a.cursor=o.isEnd?a.endContainer:a.endContainer.previousSibling;g.cursor=a.cursor.getElement();while(g.cursor&&!g.cursor.isText){a.cursor=a.cursor.lastChild;g.cursor=a.cursor?a.cursor.getElement():null}}g.parent.sync(j.viewportId);d.suspendEvent=false;g.focus=a.cursor.parentNode.getElement();d.cashSyncBtn=g.focus.elementId;d.setCursor({startNode:a.cursor,startOffset:a.cursor.nodeValue.length,focusElement:g.focus});j.saveNodes=a;n.verifyElement(g.parent);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});FBEditor.editor.HistoryManager.removeNext()}return m},unExecute:function(){var k=this,d=k.getData(),j=false,c={},a={},b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g,l;try{b.suspendEvent=true;g=d.range;a=d.saveNodes;l=a.node.viewportId;a.common=g.common;c.common=a.common.getElement();console.log("undo create "+k.elementName,d,a);if(c.common.elementId===g.start.getElement().elementId){a.parent=a.common.parentNode||d.links.parent;c.parent=a.parent.getElement();if(a.common.parentNode){c.common.setText(g.oldValue);a.common.nodeValue=g.oldValue}else{c.common=f.createElementText(g.oldValue);a.common=c.common.getNode(d.viewportId);a.newNode=d.links.newNode;c.newNode=a.newNode.getElement();c.parent.insertBefore(c.common,c.newNode);a.parent.insertBefore(a.common,a.newNode);g.start=a.common;g.end=a.common}a.next=a.common.nextSibling;c.next=a.next.getElement();c.parent.remove(c.next);a.parent.removeChild(a.next);if(g.offset.end<g.oldValue.length){a.next=a.common.nextSibling;c.next=a.next.getElement();c.parent.remove(c.next);a.parent.removeChild(a.next)}}else{c.firstP=a.firstP.getElement();a.parent=a.startContainer.parentNode;c.parent=a.parent.getElement();a.first=a.parent.firstChild;while(a.first){c.first=a.first.getElement();c.firstP.insertBefore(c.first,c.parent);a.firstP.insertBefore(a.first,a.parent);c.parent.remove(c.first);a.first=a.parent.firstChild}c.firstP.remove(c.parent);a.firstP.removeChild(a.parent);if(g.offset.start){b.joinNode(a.startContainer)}c.lastP=a.lastP.getElement();if(c.firstP.elementId!==c.lastP.elementId){c.lastP=a.lastP.getElement();a.parent=a.lastP.firstChild;c.parent=a.parent.getElement();a.first=a.parent.firstChild;while(a.first){c.first=a.first.getElement();c.lastP.insertBefore(c.first,c.parent);a.lastP.insertBefore(a.first,a.parent);c.parent.remove(c.first);a.first=a.parent.firstChild}c.lastP.remove(c.parent);a.lastP.removeChild(a.parent)}if(g.offset.end<g.end.length){b.joinNode(a.endContainer)}Ext.Array.each(a.pp,function(n){var m={},e={};e.p=n;m.p=e.p.getElement();e.parent=e.p.firstChild;m.parent=e.parent.getElement();e.first=e.parent.firstChild;while(e.first){m.first=e.first.getElement();m.p.add(m.first);e.p.appendChild(e.first);m.parent.remove(m.first);e.first=e.parent.firstChild}m.p.remove(m.parent);e.p.removeChild(e.parent)});c.parent=c.common}c.parent.sync(l);b.suspendEvent=false;d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end,focusElement:c.parent};b.setCursor(d.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateRangeStyleCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.a.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"a"},0,0,0,0,0,0,[FBEditor.editor.command.a,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractDeleteWrapperCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,d=k.getData(),j=false,a={},c={},b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g;try{b.suspendEvent=true;g=d.range||b.getRange();d.viewportId=g.start.viewportId;console.log("del wrapper "+k.elementName,g);a.node=g.common;c.node=a.node.getElement();if(g.collapsed){while(!c.node.hisName(k.elementName)){a.node=a.node.parentNode;c.node=a.node.getElement();if(c.node.isRoot){return false}}a.parent=a.node.parentNode;c.parent=a.parent.getElement();d.first=a.node.firstChild;d.last=a.node.lastChild;a.first=a.node.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){if(c.node.isLiHolder&&!c.first.isLi){d.first=a.first.nextSibling;c.node.remove(c.first);a.node.removeChild(a.first);g.start=b.getDeepFirst(d.first);g.end=g.start;g.offset.start=0;g.offset.end=0;g.common=g.start}else{c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);if(c.first.isLi){c.p=f.createElement("p");a.p=c.p.getNode(d.viewportId);c.parent.insertBefore(c.p,c.first);a.parent.insertBefore(a.p,a.first);if(c.first.elementId===d.first.getElement().elementId){d.first=a.p}if(c.first.elementId===d.last.getElement().elementId){d.last=a.p}a.firstLi=a.first.firstChild;c.firstLi=a.firstLi?a.firstLi.getElement():null;while(c.firstLi){c.p.add(c.firstLi);a.p.appendChild(a.firstLi);a.firstLi=a.first.firstChild;c.firstLi=a.firstLi?a.firstLi.getElement():null}c.parent.remove(c.first);a.parent.removeChild(a.first);c.first=c.p;a.first=a.p}}a.first=a.node.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node)}else{throw Error("Выделение в разработке!")}c.parent.sync(d.viewportId);b.suspendEvent=false;b.setCursor({startNode:g.start,startOffset:g.offset.start,endNode:g.end,endOffset:g.offset.end,focusElement:g.common.getElement()});d.range=g;d.els=c;d.nodes=a;k.verifyElement(c.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var k=this,d=k.getData(),a={},c={},j=false,b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g;try{b.suspendEvent=true;g=d.range;c=d.els;a=d.nodes;console.log("undo del wrapper "+k.elementName,d,g);if(g.collapsed){a.first=d.first;c.first=a.first.getElement();a.last=d.last;c.last=a.last.getElement();a.node=c.node.getNode(d.viewportId);c.parent.insertBefore(c.node,c.first);a.parent.insertBefore(a.node,a.first);a.next=a.first;c.next=a.next.getElement();while(c.next.elementId!==c.last.elementId){a.buf=a.next.nextSibling;c.node.add(c.next);a.node.appendChild(a.next);if(c.node.isLiHolder){c.li=f.createElement("li");a.li=c.li.getNode(d.viewportId);c.node.insertBefore(c.li,c.next);a.node.insertBefore(a.li,a.next);a.firstP=a.next.firstChild;c.firstP=a.firstP?a.firstP.getElement():null;while(c.firstP){c.li.add(c.firstP);a.li.appendChild(a.firstP);a.firstP=a.next.firstChild;c.firstP=a.firstP?a.firstP.getElement():null}c.node.remove(c.next);a.node.removeChild(a.next)}a.next=a.buf;c.next=a.next?a.next.getElement():null}c.node.add(c.last);a.node.appendChild(a.last);if(c.node.isLiHolder){c.li=f.createElement("li");a.li=c.li.getNode(d.viewportId);c.node.insertBefore(c.li,c.last);a.node.insertBefore(a.li,a.last);a.firstP=a.last.firstChild;c.firstP=a.firstP?a.firstP.getElement():null;while(c.firstP){c.li.add(c.firstP);a.li.appendChild(a.firstP);a.firstP=a.last.firstChild;c.firstP=a.firstP?a.firstP.getElement():null}c.node.remove(c.last);a.node.removeChild(a.last)}}c.parent.sync(d.viewportId);b.suspendEvent=false;d.saveRange={startNode:g.start,startOffset:g.offset.start,endNode:g.end,endOffset:g.offset.end,focusElement:g.common.getElement()};b.setCursor(d.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractDeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.a.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"a"},0,0,0,0,0,0,[FBEditor.editor.command.a,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.a.AElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.a.AElementController",htmlTag:"a",xmlTag:"a",showedOnTree:false,defaultAttributes:{href:"undefined"},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,e){a+=(d==="href"&&!b?"l:":"")+d+'="'+e+'" '});return a},getBlock:function(){return this}},0,0,0,0,0,0,[FBEditor.editor.element.a,"AElement"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,d={},a={},c=FBEditor.editor.Manager,b,g;try{b=f.sel||window.getSelection();g=b.getRangeAt(0);f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,parentStart:g.startContainer.parentNode,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};c.suspendEvent=true;a.node=f.node||f.prevNode;if(!a.node.parentNode){a.parent=f.range.parentStart;d.parent=a.parent.getElement();while(d.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;d.parent=a.parent.getElement()}a.node=a.parent}f.viewportId=a.node.viewportId;k.createElement(d,a);d.parent.sync(f.viewportId);c.suspendEvent=false;k.setCursor(d,a);f.saveNode=a.node;k.verifyElement(d.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b=FBEditor.editor.Manager,f,k;try{b.suspendEvent=true;f=d.range;a.node=d.saveNode;c.node=a.node.getElement();k=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(k);b.suspendEvent=false;d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});FBEditor.editor.HistoryManager.remove()}return h},createElement:function(b,a){},setCursor:function(b,a){var c=this,e=window.getSelection(),d=c.getData();d.oldRange=e.getRangeAt(0);a.p=b.p.nodes[d.viewportId];d.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};FBEditor.editor.Manager.setCursor(d.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.annotation.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"annotation",createElement:function(d,c){var e=this,f=e.getData(),b=f.range,a=FBEditor.editor.Factory;d.node=a.createElement(e.elementName);c.parent=c.node.parentNode;c.first=c.parent.firstChild;d.parent=c.parent.getElement();if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Аннотация");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(f.viewportId);if(c.first){c.next=c.first.nextSibling;while(c.next&&(c.first.getElement().isEpigraph||c.first.getElement().isTitle)){c.first=c.next;c.next=c.next.nextSibling}d.first=c.first.getElement();d.parent.insertBefore(d.node,d.first);c.parent.insertBefore(c.node,c.first)}else{d.parent.add(d.node);c.parent.appendChild(c.node)}if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.parentP=c.p.parentNode;c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}e.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}c.suspendEvent=true;b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();d.parentP=b.parentP.getElement();if(b.next){d.next=b.next.getElement();d.parentP.insertBefore(d.p,d.next);b.parentP.insertBefore(b.p,b.next)}else{d.parentP.add(d.p);b.parentP.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);c.suspendEvent=false;b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.annotation,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.annotation.AnnotationElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,b){var l=this,h={},d={},f=FBEditor.editor.Manager,c=l.getNameElement(),m=0,k,a,j,g;e=e||window.getSelection();j=e.getRangeAt(0);d.node=j.commonAncestorContainer;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();while(h.parent.isStyleHolder||h.parent.isStyleType){d.node=d.parent;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement()}d.title=d.parent;h.title=d.title.getElement();while(!(h.title.isTitle||h.title.isRoot)){d.title=d.title.parentNode;h.title=d.title.getElement()}if(h.title.isTitle){d.node=d.title;h.node=h.title}else{h.parent=d.parent.getElement();d.node=h.parent.hisName(c)?d.parent:d.node}d.parent=d.node.parentNode;h.parent=d.parent.getElement();d.first=d.parent.firstChild;h.first=d.first?d.first.getElement():null;g=f.getNamesElements(h.parent);while(h.first&&(h.first.isEpigraph||h.first.isTitle)){m++;d.first=d.first.nextSibling;h.first=d.first?d.first.getElement():null}g.splice(m,0,c);a=f.getSchema();c=h.parent.getName();k=a.verify(c,g)?d.node:false;return k}},0,0,0,0,0,0,[FBEditor.editor.element.annotation,"AnnotationElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.annotation.AnnotationElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.annotation.AnnotationElementController",htmlTag:"annotation",xmlTag:"annotation",cls:"el-annotation",createScaffold:function(){var c=this,a=FBEditor.editor.Factory,b={};b.p=a.createElement("p");b.t=a.createElementText("Аннотация");b.p.add(b.t);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.annotation,"AnnotationElement"],0));(Ext.cmd.derive("FBEditor.editor.element.b.BElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.strong.StrongElement")}},1,0,0,0,0,0,[FBEditor.editor.element.b,"BElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractUnboundedElementController",FBEditor.editor.element.AbstractElementController,{createFromRange:true,getNodeVerify:function(g,f){var e=this,d={},b={},c,a;c=e.getNameElement();g=g||window.getSelection();a=g.getRangeAt(0);b.node=a.commonAncestorContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node;return b.node},checkRangeVerify:function(a){return true},getNameElementsVerify:function(b){var f=this,e={},d=FBEditor.editor.Manager,a,c;c=f.getNameElement();e.parent=b.parent.getElement();b.node=e.parent.hisName(c)?b.parent:b.node;b.parent=b.node.parentNode;e.node=b.node.getElement();e.parent=b.parent.getElement();a=d.getNamesElements(e.parent);a.splice(e.parent.getChildPosition(e.node)+1,0,c);return a}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractUnboundedElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.blockquote.BlockquoteElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.blockquote,"BlockquoteElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractSplitCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var o=this,j=o.getData(),n=false,c={},p={},g={},a={},f={},b=window.getSelection(),d=FBEditor.editor.Manager,h=d.getFactory(),k,l,q;try{d.suspendEvent=true;if(j.saveRange){d.setCursor(j.saveRange)}k=b.getRangeAt(0);if(!j.node){a.cur=k.startContainer;g.cur=a.cur.getElement();while(g.cur&&!g.cur.hisName(o.elementName)){a.cur=a.cur.parentNode;g.cur=a.cur?a.cur.getElement():null}j.node=a.cur}a.prevNode=j.node;j.viewportId=a.prevNode.viewportId;g.prevNode=a.prevNode.getElement();f={start:k.startOffset,end:k.endOffset};l=k.startOffset===0?!d.isFirstNode(j.node,k.startContainer):true;q=k.endOffset===k.endContainer.nodeValue.length?!d.isLastNode(j.node,k.endContainer):true;j.range={common:k.commonAncestorContainer,start:k.startContainer,end:k.endContainer,prevParentStart:k.startContainer.parentNode.previousSibling,collapsed:k.collapsed,offset:f,joinStartContainer:l,joinEndContainer:q};a.startContainer=k.startContainer;a.endContainer=k.endContainer;g.startContainer=a.startContainer.getElement();g.endContainer=a.endContainer.getElement();if(!k.collapsed){c.start=new RegExp("^"+Ext.String.escapeRegex(k.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(g.startContainer.getText()));c.end=new RegExp(Ext.String.escapeRegex(k.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(g.endContainer.getText())+"$");p.isStart=c.start.test(g.startContainer.getText())||c.start2.test(k.toString());p.isEnd=c.end.test(g.endContainer.getText())||c.end2.test(k.toString())}else{p.isEnd=f.end===j.range.end.nodeValue.length?d.isLastNode(j.node,j.range.end):false;p.isStart=f.start===0?d.isFirstNode(j.node,j.range.start):false}j.range.pos=p;a.container=a.endContainer;a.common=j.node;g.common=j.node.getElement();a.endContainer=d.splitNode(g,a,f.end);g.endContainer=a.endContainer.getElement();if(g.endContainer.isEmpty()&&!g.common.isEmpty()){g.empty=d.createEmptyElement();a.empty=g.empty.getNode(j.viewportId);g.endContainer.add(g.empty);a.endContainer.appendChild(a.empty)}if(j.range.collapsed){a.startContainer=a.endContainer}else{a.container=a.startContainer;a.startContainer=d.splitNode(g,a,f.start)}g.startContainer=a.startContainer.getElement();g.endContainer=a.endContainer.getElement();g.node=h.createElement(o.elementName);a.parent=a.prevNode.parentNode;g.parent=a.parent.getElement();a.next=a.prevNode.nextSibling;a.nextPrevNode=a.next;a.node=g.node.getNode(j.viewportId);if(a.next){g.next=a.next.getElement();g.parent.insertBefore(g.node,g.next);a.parent.insertBefore(a.node,a.next)}else{g.parent.add(g.node);a.parent.appendChild(a.node)}o.createElement(a,g);o.moveToCreateElement(a,g);g.parent.sync(j.viewportId);d.suspendEvent=false;a.cursor=a.cursor?a.cursor:a.node;d.setCursor({startNode:a.cursor.firstChild});j.saveNodes=a;o.verifyElement(g.parent);n=true}catch(m){Ext.log({level:"warn",msg:m,dump:m});FBEditor.editor.HistoryManager.removeNext()}return n},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b=FBEditor.editor.Manager,f,k;try{b.suspendEvent=true;f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo split "+j.elementName,f,a);c.node=a.node.getElement();c.prevNode=a.prevNode.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.common=a.common.getElement();c.endContainer=a.endContainer.getElement();if(c.prevNode.isEmpty()){c.prevNode.removeAll();a.prevNode.removeChild(a.prevNode.firstChild)}if(c.node.isEmpty()){c.node.removeAll();a.node.removeChild(a.node.firstChild);f.joinStartContainer=false}j.restoreElement(a,c,f);a.first=a.node.firstChild;if(a.first){j.moveNodes(a,c)}a.parent.removeChild(a.node);c.parent.remove(c.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}if(a.empty&&c.endContainer.isEmpty()){c.common.remove(c.endContainer);a.common.removeChild(a.endContainer)}c.parent.sync(k);b.suspendEvent=false;if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});FBEditor.editor.HistoryManager.remove()}return h},moveNodes:function(a,b){while(a.first){b.first=a.first.getElement();a.prevNode.appendChild(a.first);b.prevNode.add(b.first);a.first=a.node.firstChild}},restoreElement:function(b,c,a){var d=this;if(!a.collapsed){b.next=b.prevNode.nextSibling;b.first=b.next.firstChild;d.moveNodes(b,c);b.parent.removeChild(b.next);c.parent.remove(b.next.getElement())}},createElement:function(b,d){var e=this,f=e.getData(),c=FBEditor.editor.Manager,a=c.getFactory();if(!f.range.collapsed){b.next=b.startContainer;d.next=b.next?b.next.getElement():null;b.parentNext=b.next.parentNode;d.parentNext=b.parentNext.getElement();while(d.next&&d.next.elementId!==d.endContainer.elementId){b.buf=b.next.nextSibling;d.node.add(d.next);b.node.appendChild(b.next);b.next=b.buf;d.next=b.next?b.next.getElement():null}d.node=a.createElement(e.elementName);b.node=d.node.getNode(f.viewportId);if(b.nextPrevNode){d.nextPrevNode=b.nextPrevNode.getElement();d.parent.insertBefore(d.node,d.nextPrevNode);b.parent.insertBefore(b.node,b.nextPrevNode)}else{d.parent.add(d.node);b.parent.appendChild(b.node)}}},moveToCreateElement:function(a,c){var d=this,e=d.getData(),b=FBEditor.editor.Manager;c.node=a.node.getElement();a.next=a.endContainer;a.parentNext=a.next.parentNode?a.next.parentNode:null;c.parentNext=a.parentNext?a.parentNext.getElement():null;while(a.next){a.buf=a.next.nextSibling;c.next=a.next.getElement();c.node.add(c.next);a.node.appendChild(a.next);a.next=a.buf}if(!a.parentNext.firstChild){c.p=b.createEmptyP();c.parentNext.add(c.p);a.parentNext.appendChild(c.p.getNode(e.viewportId))}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractSplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateUnboundedCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:null,createElement:function(d,b){var e=this,f=e.getData(),c=FBEditor.editor.Manager,a=c.getFactory();b.parent=b.node.parentNode;d.parent=b.parent.getElement();b.node=d.parent.hisName(e.elementName)?b.parent:b.node;b.parent=b.node.parentNode;d.parent=b.parent.getElement();b.next=b.node.nextSibling;d.node=a.createElement(e.elementName);d=Ext.apply(d,d.node.createScaffold());b.node=d.node.getNode(f.viewportId);if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.node,d.next);b.parent.insertBefore(b.node,b.next)}else{d.parent.add(d.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateUnboundedCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateRangeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var n=this,h=n.getData(),m=false,g={},a={},f={},c=FBEditor.editor.Manager,b,d,j,k,o;try{c.suspendEvent=true;if(h.saveRange){c.setCursor(h.saveRange)}b=h.sel||window.getSelection();j=b.getRangeAt(0);a.common=j.commonAncestorContainer;g.common=a.common.getElement();while(!g.common.permit.splittable){a.common=a.common.parentNode;g.common=a.common.getElement();if(g.common.isRoot){return false}}h.viewportId=a.common.viewportId;d=j.collapsed;f={start:j.startOffset,end:j.endOffset};k=j.startOffset===0?!c.isFirstNode(a.common,j.startContainer):true;o=j.endOffset===j.endContainer.nodeValue.length?!c.isLastNode(a.common,j.endContainer):true;h.range={common:j.commonAncestorContainer,start:j.startContainer,end:j.endContainer,prevParentStart:j.startContainer.parentNode.previousSibling,collapsed:d,offset:f,joinStartContainer:k,joinEndContainer:o};a.startContainer=j.startContainer;a.endContainer=j.endContainer;a.container=a.endContainer;a.endContainer=c.splitNode(g,a,f.end);g.endContainer=a.endContainer.getElement();if(g.endContainer.isEmpty()&&!g.common.isEmpty()&&a.endContainer.previousSibling){a.prev=a.endContainer.previousSibling;g.common.remove(g.endContainer);a.common.removeChild(a.endContainer);a.endContainer=a.prev;a.endContainer=o?a.endContainer.previousSibling:a.endContainer}if(d){a.startContainer=a.endContainer}else{a.container=a.startContainer;a.startContainer=c.splitNode(g,a,f.start)}g.startContainer=a.startContainer.getElement();a.endContainer=a.endContainer.parentNode?a.endContainer:a.startContainer;g.endContainer=a.endContainer.getElement();n.createNewElement(g,a);g.common.sync(h.viewportId);c.suspendEvent=false;c.setCursor({startNode:a.node.firstChild});h.saveNodes=a;n.verifyElement(g.parent);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});FBEditor.editor.HistoryManager.removeNext()}return m},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b=FBEditor.editor.Manager,f,k;try{b.suspendEvent=true;f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo create range "+j.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();a.first=a.node.firstChild;c.first=a.first.getElement();while(c.first){c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.node.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(k);b.suspendEvent=false;if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});FBEditor.editor.HistoryManager.remove()}return h},createNewElement:function(d,b){var e=this,f=e.getData(),c=FBEditor.editor.Manager,a=c.getFactory();d.node=a.createElement(e.elementName);b.node=d.node.getNode(f.viewportId);d.common.insertBefore(d.node,d.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;d.next=b.next.getElement();while(d.next&&d.next.elementId!==d.endContainer.elementId){b.buf=b.next.nextSibling;d.node.add(d.next);b.node.appendChild(b.next);b.next=b.buf;d.next=b.next?b.next.getElement():null}if(d.next&&d.next.elementId===d.endContainer.elementId&&!f.range.joinEndContainer){d.node.add(d.next);b.node.appendChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.blockquote.BlockquoteElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.blockquote.BlockquoteElementController",htmlTag:"blockquote",xmlTag:"blockquote",cls:"el-blockquote",permit:{splittable:true},isBlockquote:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Цитата");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.blockquote,"BlockquoteElement"],0));(Ext.cmd.derive("FBEditor.editor.element.body.BodyElement",FBEditor.editor.element.AbstractElement,{},0,0,0,0,0,0,[FBEditor.editor.element.body,"BodyElement"],0));(Ext.cmd.derive("FBEditor.editor.element.br.BrElementController",FBEditor.editor.element.AbstractStyleElementController,{onKeyDownDefault:function(c){var a=this,b;if(!a.isSpecialKey(c)){b=Ext.create("FBEditor.editor.command.br.CreateEmptyTextCommand");if(b.execute()){}}return true},isSpecialKey:function(a){var b=a.keyCode,c=Ext.event.Event;return a.ctrlKey||(b>=33&&b<=40)||b===c.RETURN||b===c.TAB||b===c.ESC||b===91||b===144||b===145||b===c.CONTEXT_MENU||(b===c.BACKSPACE)||(b>=112&&b<=123)||(b>=16&&b<=20)||(b>=44&&b<=46)}},0,0,0,0,0,0,[FBEditor.editor.element.br,"BrElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.br.CreateEmptyTextCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,a={},d={},b=window.getSelection(),c=FBEditor.editor.Manager,g;try{c.suspendEvent=true;g=b.getRangeAt(0);f.viewportId=g.startContainer.viewportId;console.log("replace br to empty text",g);a.node=g.startContainer;d.node=a.node.getElement();a.parent=a.node.parentNode;d.parent=a.parent.getElement();d.parent.removeAll();a.parent.removeChild(a.parent.firstChild);d.parent.sync(f.viewportId);c.suspendEvent=false;f.els=d;j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var g=this,h=g.getData(),b={},f={},d=false,c=FBEditor.editor.Manager,a;return false;try{c.suspendEvent=true;f=h.els;console.log("undo replace br to empty text",f,h);b.node=f.node.nodes[h.viewportId];b.parent=f.parent.nodes[h.viewportId];console.log("nodes",b);return false;f.parent.add(f.node);b.parent.appendChild(b.node);f.parent.sync(h.viewportId);c.suspendEvent=false;h.saveRange={startNode:b.node};FBEditor.editor.Manager.setCursor(h.saveRange);d=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return d}},0,0,0,0,0,0,[FBEditor.editor.command.br,"CreateEmptyTextCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.br.BrElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.br.BrElementController",htmlTag:"br",xmlTag:"br",showedOnTree:false,isStyleType:true,isEmpty:function(){return true}},0,0,0,0,0,0,[FBEditor.editor.element.br,"BrElement"],0));(Ext.cmd.derive("FBEditor.editor.element.code.CodeElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.code,"CodeElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.code.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"code"},0,0,0,0,0,0,[FBEditor.editor.command.code,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.code.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"code"},0,0,0,0,0,0,[FBEditor.editor.command.code,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.code.CodeElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.code.CodeElementController",htmlTag:"code",xmlTag:"code",cls:"el-code"},0,0,0,0,0,0,[FBEditor.editor.element.code,"CodeElement"],0));(Ext.cmd.derive("FBEditor.editor.command.div.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.div.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.div.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.div.DivElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.div,"DivElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.div.DivElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.div.DivElementController",htmlTag:"div",xmlTag:"div",cls:"el-div",permit:{splittable:true},createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Блок");a.p.add(a.t);b.add(a.p);return a},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,e){if(d!=="marker"){a+=d+'="'+e+'" '}});return a},setStyleHtml:function(){var c=this,a=c.attributes,b;b=FBEditor.editor.element.AbstractElement.prototype.setStyleHtml.call(this);b+=b?" ":"";b+=a.width?"width: "+a.width+"; ":"";b+=a["min-width"]?"min-width: "+a["min-width"]+"; ":"";b+=a["max-width"]?"max-width: "+a["max-width"]+"; ":"";b+=a["float"]?"float: "+a["float"]+"; ":"";b+=a.align?"text-align: "+a.align+"; ":"";b+=a.border?"border: 1px solid black; ":"";c.style=b;return b},initCls:function(){var c=this,b=c.attributes,a;a=b.align?" el-div-align-"+b.align:"";a="el-div"+a;c.cls=a}},0,0,0,0,0,0,[FBEditor.editor.element.div,"DivElement"],0));(Ext.cmd.derive("FBEditor.editor.element.em.EmElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.em,"EmElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.em.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"em"},0,0,0,0,0,0,[FBEditor.editor.command.em,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.em.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"em"},0,0,0,0,0,0,[FBEditor.editor.command.em,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.em.EmElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.em.EmElementController",htmlTag:"em",xmlTag:"em",cls:"el-em"},0,0,0,0,0,0,[FBEditor.editor.element.em,"EmElement"],0));(Ext.cmd.derive("FBEditor.editor.command.epigraph.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"epigraph",createElement:function(d,c){var e=this,f=e.getData(),b=f.range,a=FBEditor.editor.Factory;c.parent=c.node.parentNode;d.parent=c.parent.getElement();d.node=a.createElement(e.elementName);c.node=d.parent.hisName(e.elementName)?c.parent:c.node;c.parent=c.node.parentNode;d.parent=c.parent.getElement();c.first=f.prevNode&&f.prevNode.nextSibling?f.prevNode:c.parent.firstChild;if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Эпиграф");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(f.viewportId);if(c.first){if(f.prevNode&&f.prevNode.getElement().xmlTag===d.node.xmlTag){c.first=c.first.nextSibling}else{c.next=c.first.nextSibling;while(c.next&&(c.first.getElement().xmlTag===d.node.xmlTag||c.first.getElement().xmlTag==="title")){c.first=c.next;c.next=c.next.nextSibling}}d.first=c.first.getElement();d.parent.insertBefore(d.node,d.first);c.parent.insertBefore(c.node,c.first)}else{d.parent.add(d.node);c.parent.appendChild(c.node)}if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.parentP=c.p.parentNode;c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}e.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}c.suspendEvent=true;b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();d.parentP=b.parentP.getElement();if(b.next){d.next=b.next.getElement();d.parentP.insertBefore(d.p,d.next);b.parentP.insertBefore(b.p,b.next)}else{d.parentP.add(d.p);b.parentP.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);c.suspendEvent=false;b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.epigraph,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.epigraph.EpigraphElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,b){var l=this,h={},d={},f=FBEditor.editor.Manager,c=l.getNameElement(),k,a,j,g;e=e||window.getSelection();j=e.getRangeAt(0);d.node=j.commonAncestorContainer;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();while(h.parent.isStyleHolder||h.parent.isStyleType){d.node=d.parent;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement()}d.title=d.parent;h.title=d.title.getElement();while(!(h.title.isTitle||h.title.isRoot)){d.title=d.title.parentNode;h.title=d.title.getElement()}if(h.title.isTitle){d.node=d.title;h.node=h.title}else{h.parent=d.parent.getElement();d.node=h.parent.hisName(c)?d.parent:d.node}d.parent=d.node.parentNode;h.parent=d.parent.getElement();d.first=d.parent.firstChild;h.first=d.first?d.first.getElement():null;g=f.getNamesElements(h.parent);if(!h.first.isTitle){g.unshift(c)}else{g.splice(1,0,c)}a=f.getSchema();c=h.parent.getName();k=a.verify(c,g)?d.node:false;return k}},0,0,0,0,0,0,[FBEditor.editor.element.epigraph,"EpigraphElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.epigraph.EpigraphElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.epigraph.EpigraphElementController",htmlTag:"epigraph",xmlTag:"epigraph",cls:"el-epigraph",permit:{splittable:true},isEpigraph:true,createScaffold:function(){var c=this,a=FBEditor.editor.Factory,b={};b.p=a.createElement("p");b.t=a.createElementText("Эпиграф");b.p.add(b.t);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.epigraph,"EpigraphElement"],0));(Ext.cmd.derive("FBEditor.editor.command.TextModifiedCommand",FBEditor.editor.command.AbstractCommand,{newValue:"",oldValue:"",execute:function(){var n=this,j=n.getData(),m=false,c=window.getSelection(),f=FBEditor.editor.Manager,k=FBEditor.editor.Factory,h=c.getRangeAt(0).startOffset,a={},g={},d,p,o,b;try{n.newValue=n.newValue||j.newValue;n.oldValue=n.oldValue||j.oldValue;n.offset=n.offset?n.offset:h;f.suspendEvent=true;if(j.saveRange){a.node=j.saveRange.startNode;g.node=a.node.getElement();j.node=a.node;a.parent=a.node.parentNode;g.parent=a.parent.getElement();if(g.node.isEmpty()){g.text=k.createElementText("");a.text=g.text.getNode(a.node.viewportId);g.parent.replace(g.text,g.node);a.parent.replaceChild(a.text,a.node);j.node=a.text}}d=j.node;p=n.newValue;o=d.viewportId;console.log("exec text",d,n.newValue,n.oldValue,"offset=",n.offset);d.nodeValue=p;b=d.getElement();b.setText(p);if(!g.parent){b.sync(o)}else{g.parent.sync(o)}f.suspendEvent=false;f.setCursor({startNode:d,startOffset:n.offset,focusElement:d.getElement()});m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});FBEditor.editor.HistoryManager.removeNext()}return m},unExecute:function(){var k=this,g=k.getData(),j=false,d=FBEditor.editor.Manager,a={},f={},c,m,l,b;try{c=g.node;m=k.oldValue;l=c.viewportId;d.suspendEvent=true;c.nodeValue=m;b=c.getElement();b.setText(m);a.parent=c.parentNode;f.parent=a.parent.getElement();a.cursor=c;console.log("undo exec text",c,b);if(!m&&f.parent.isStyleHolder){f.empty=d.createEmptyElement();a.empty=f.empty.getNode(l);f.parent.replace(f.empty,b);a.parent.replaceChild(a.empty,c);a.cursor=a.empty;f.parent.sync(l)}else{b.sync(l)}d.suspendEvent=false;g.saveRange={startNode:a.cursor,startOffset:k.offset};d.setCursor(g.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command,"TextModifiedCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.fb3body.Fb3bodyElementController",FBEditor.editor.element.AbstractElementController,{onTextModified:function(j){var k=this,d=j.target,m=d.nodeValue,l=d.viewportId,f=d.nextSibling,a=d.previousSibling,g=d.parentNode,h,b,c;if(FBEditor.editor.Manager.suspendEvent){return}if(!g.getElement){Ext.defer(function(){k.onTextModified({target:d})},1);return}b=d.getElement?d.getElement():null;console.log("DOMCharacterDataModified:",j,k);if(!f&&!a){b=FBEditor.editor.Factory.createElementText(m);b.createNode(l);h=g.getElement();h.removeAll();h.add(b)}c=Ext.create("FBEditor.editor.command.TextModifiedCommand",{node:d,newValue:j.newValue,oldValue:j.prevValue});if(c.execute()){FBEditor.editor.HistoryManager.add(c)}}},0,0,0,0,0,0,[FBEditor.editor.element.fb3body,"Fb3bodyElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.fb3body.Fb3bodyElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.fb3body.Fb3bodyElementController",htmlTag:"main",xmlTag:"fb3-body",defaultAttributes:{"xmlns:l":"http://www.w3.org/1999/xlink",xmlns:"http://www.fictionbook.org/FictionBook3/body","xmlns:fb3d":"http://www.fictionbook.org/FictionBook3/description"},cls:"el-body",isRoot:true,constructor:function(){var b=this,a;FBEditor.editor.element.AbstractElement.prototype.constructor.apply(this,arguments);b.attributes.id=Ext.data.identifier.Uuid.Global.generate()},setAttributesHtml:function(a){var c=this,b=a;b=FBEditor.editor.element.AbstractElement.prototype.setAttributesHtml.apply(this,arguments);b.setAttribute("contentEditable",true);return b},createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.title=a.createElement("title");b=Ext.apply(b,b.title.createScaffold());c.add(b.title);b.section=a.createElement("section");b.p=a.createElement("p");b.t=a.createElementText("Текст книги");b.p.add(b.t);b.section.add(b.p);c.add(b.section);return b}},1,0,0,0,0,0,[FBEditor.editor.element.fb3body,"Fb3bodyElement"],0));(Ext.cmd.derive("FBEditor.editor.element.header.HeaderElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.title.TitleElement")}},1,0,0,0,0,0,[FBEditor.editor.element.header,"HeaderElement"],0));(Ext.cmd.derive("FBEditor.editor.element.i.IElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.em.EmElement")}},1,0,0,0,0,0,[FBEditor.editor.element.i,"IElement"],0));(Ext.cmd.derive("FBEditor.editor.element.img.ImgElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownDelete:function(b){var a=this;b.preventDefault();a.remove()},onKeyDownBackspace:function(b){var a=this;b.preventDefault();a.remove()},remove:function(){var a=this,b;b=Ext.create("FBEditor.editor.command.DeleteCommand",{el:a.getElement()});if(b.execute()){FBEditor.editor.HistoryManager.add(b)}},getNodeVerify:function(e,b){var k=this,g={},d={},j,a,c,h,f;h=b.range;d.node=h.start;d.parent=d.node.parentNode;f=["img"];a=FBEditor.editor.Manager.getSchema();g.parent=d.parent.getElement();c=g.parent.xmlTag;j=a.verify(c,f)?d.node:false;return j}},0,0,0,0,0,0,[FBEditor.editor.element.img,"ImgElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.img.CreateCommand",FBEditor.editor.command.AbstractCommand,{elementName:"img",execute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a;try{c.suspendEvent=true;a=h.opts.range;console.log("create img",a);h.viewportId=a.start.viewportId;h.oldValue=a.start.nodeValue;b.start=a.start;d.start=b.start.getElement();d.node=FBEditor.editor.Factory.createElement(g.elementName,{src:h.opts.name});b.node=d.node.getNode(h.viewportId);b.parent=b.start.parentNode;d.parent=b.parent.getElement();if(!d.parent.isEmpty()){b.next=b.start.nextSibling;d.next=b.next?b.next.getElement():null;d.startValue=b.start.nodeValue.substring(0,a.offset);d.endValue=b.start.nodeValue.substring(a.offset);d.start.setText(d.startValue);b.start.nodeValue=d.startValue}else{d.parent.remove(d.start);b.parent.removeChild(b.start);h.isEmpty=true}if(d.next){d.parent.insertBefore(d.node,d.next);b.parent.insertBefore(b.node,b.next)}else{d.parent.add(d.node);b.parent.appendChild(b.node)}if(d.endValue){d.t=FBEditor.editor.Factory.createElementText(d.endValue);b.t=d.t.getNode(h.viewportId);if(d.next){d.parent.insertBefore(d.t,d.next);b.parent.insertBefore(b.t,b.next)}else{d.parent.add(d.t);b.parent.appendChild(b.t)}}d.parent.sync(h.viewportId);c.suspendEvent=false;c.setCursor({startNode:b.node});h.saveNode=b.node;g.verifyElement(d.parent);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}return f},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a;try{c.suspendEvent=true;a=h.opts.range;console.log("undo create img",h);b.node=h.saveNode;d.node=b.node.getElement();b.start=a.start;b.parent=b.node.parentNode;d.parent=b.parent.getElement();d.parent.remove(d.node);b.parent.removeChild(b.node);b.cursor=a.start;if(h.isEmpty){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.parent.add(d.empty);b.parent.appendChild(b.empty);b.cursor=b.empty;a.start=b.empty}else{d.start=b.start.getElement();d.start.setText(h.oldValue);b.start.nodeValue=h.oldValue;b.next=b.start.nextSibling;if(a.offset<b.start.nodeValue.length&&b.next){d.next=b.next.getElement();d.parent.remove(d.next);b.parent.removeChild(b.next)}}d.parent.sync(h.viewportId);c.suspendEvent=false;c.setCursor({startNode:b.cursor,startOffset:a.offset});f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.img,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.img.ImgElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.img.ImgElementController",htmlTag:"img",xmlTag:"img",cls:"el-img",defaultAttributes:{tabindex:0},createFromRange:true,resource:null,isImg:true,isEmpty:function(){return false},clear:function(){var a=this,b=a.resource;if(b){b.removeElement(a)}FBEditor.editor.element.AbstractElement.prototype.clear.call(this)},getNode:function(c){var b=this,a;b.linkResource();a=FBEditor.editor.element.AbstractElement.prototype.getNode.apply(this,arguments);return a},getAttributesXml:function(b){var d=this,c=Ext.clone(d.attributes),a="";c.src=d.resource?d.resource.name:"undefined";Ext.Object.each(c,function(e,f){if(b&&e==="alt"||e==="tabindex"){}else{a+=e+'="'+f+'" '}});return a},setStyleHtml:function(){var c=this,a=c.attributes,b;b=FBEditor.editor.element.AbstractElement.prototype.setStyleHtml.call(this);b+=b?" ":"";b+=a.width?"width: "+a.width+"; ":"";b+=a["min-width"]?"min-width: "+a["min-width"]+"; ":"";b+=a["max-width"]?"max-width: "+a["max-width"]+"; ":"";c.style=b;return b},getData:function(){var b=this,c,a;c=FBEditor.editor.element.AbstractElement.prototype.getData.apply(this,arguments);a={name:b.resource?b.resource.name:null};Ext.Object.each(b.attributes,function(d,e){a[d]=e?e:""});a.src=b.attributes.src?b.attributes.src:"undefined";c=Ext.apply(c,a);return c},update:function(b){var a=this;if(a.resource){a.resource.removeElement(a);a.resource=null}a.attributes=Ext.clone(a.defaultAttributes);Ext.Object.each(b,function(c,d){if(d){a.attributes[c]=d}});a.linkResource();FBEditor.editor.element.AbstractElement.prototype.update.apply(this,arguments)},getNameTree:function(){var b=this,a;a=FBEditor.editor.element.AbstractElement.prototype.getNameTree.apply(this,arguments);if(b.resource){a+=" "+b.resource.name}return a},getOnlyStylesChildren:function(a){var b=this;if(b.attributes.src.substring(0,1)==="#"){b.attributes.src=b.attributes.src.substring(1)}a.add(b)},beforeCopy:function(){var a=this;if(a.resource){a.updateSrc("#"+a.resource.name)}},afterCopy:function(){var a=this;if(a.resource){a.updateSrc(a.attributes.src)}},deleteLinkResource:function(c){var a=this,b=a.resource;if(b){b.removeElement(a)}a.resource=null;a.attributes.src=c||"undefined";a.updateSrc(a.attributes.src)},linkResource:function(){var b=this,a=b.attributes,c;a.src=a.src||"undefined";c=FBEditor.resource.Manager.getResourceByFileId(a.src);if(c){a.src=c.url;c.addElement(b);b.resource=c}},updateSrc:function(c){var b=this,a=FBEditor.editor.Manager;a.suspendEvent=true;Ext.Object.each(b.nodes,function(d,e){e.setAttribute("src",c)});a.suspendEvent=false}},0,0,0,0,0,0,[FBEditor.editor.element.img,"ImgElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElement",FBEditor.editor.element.AbstractElement,{isStyleHolder:true,isStyleType:true,showedOnTree:false},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownEnter:function(g){var c=this,f=window.getSelection(),b=c.getNameElement(),d,a;g.preventDefault();a=f.getRangeAt(0);if(!a.collapsed){c.removeRangeNodes()}d=Ext.create("FBEditor.editor.command."+b+".SplitNodeCommand");if(d.execute()){FBEditor.editor.HistoryManager.add(d)}return false},onKeyDownDelete:function(k){var l=this,c=window.getSelection(),a=l.getNameElement(),b={},h={},g=FBEditor.editor.Manager,f,j,d;k.preventDefault();j=c.getRangeAt(0);b.node=j.startContainer;h.node=b.node.getElement();b.p=b.node.parentNode;h.p=b.p.getElement();if(h.node.isEmpty()&&b.node.firstChild){b.node=b.node.firstChild;h.node=b.node.getElement();b.p=b.node;h.p=b.p.getElement()}d=j.startOffset===h.node.getText().length;while(!h.p.hisName(a)){b.node=b.p;h.node=b.node.getElement();b.p=b.node.parentNode;h.p=b.p.getElement()}b.next=b.node.nextSibling;if(!j.collapsed){l.removeRangeNodes()}else{if(d&&!b.next){f=Ext.create("FBEditor.editor.command."+a+".JoinNextNodeCommand");if(f.execute()){FBEditor.editor.HistoryManager.add(f)}}else{b.text=d?b.next:b.node;b.text=g.getDeepFirst(b.text);g.setCursor({startNode:b.text,startOffset:d?0:j.startOffset});b.text.getElement().fireEvent("keyDownDelete",k)}}},onKeyDownBackspace:function(k){var l=this,d=window.getSelection(),b=l.getNameElement(),c={},h={},g=FBEditor.editor.Manager,f,j,a;k.preventDefault();j=d.getRangeAt(0);c.node=j.startContainer;h.node=c.node.getElement();c.p=c.node.parentNode;h.p=c.p.getElement();if(h.node.isEmpty()&&c.node.firstChild){c.node=c.node.firstChild;h.node=c.node.getElement();c.p=c.node;h.p=c.p.getElement()}a=j.startOffset===0;while(!h.p.hisName(b)){c.node=c.p;h.node=c.node.getElement();c.p=c.node.parentNode;h.p=c.p.getElement()}c.prev=c.node.previousSibling;if(!j.collapsed){l.removeRangeNodes()}else{if(a&&!c.prev){f=Ext.create("FBEditor.editor.command."+b+".JoinPrevNodeCommand");if(f.execute()){FBEditor.editor.HistoryManager.add(f)}}else{c.text=a?c.prev:c.node;c.text=g.getDeepLast(c.text);h.text=c.text.getElement();g.setCursor({startNode:c.text,startOffset:a?h.text.getText().length:j.startOffset-1});c.text.getElement().fireEvent("keyDownBackspace",k)}}},onPaste:function(k){var l=this,d=window.getSelection(),b=l.getNameElement(),c={},g={},m,a=new DOMParser(),j,h,f;k.preventDefault();k.stopPropagation();h=d.getRangeAt(0);c.node=h.startContainer;g.node=c.node.getElement();c.p=c.node.parentNode;g.p=c.p.getElement();if(g.node.isEmpty()&&c.node.firstChild){c.node=c.node.firstChild;g.node=c.node.getElement();c.p=c.node;g.p=c.p.getElement()}while(!g.p.hisName(b)){c.node=c.p;g.node=c.node.getElement();c.p=c.node.parentNode;g.p=c.p.getElement()}if(!h.collapsed){l.removeRangeNodes()}m=k.clipboardData.getData("text/html");if(!m){m=k.clipboardData.getData("text");m=l.convertTextToHtml(m)}else{m=m.replace(/\n+|\t+/g," ")}j=a.parseFromString(m,"text/html");f=Ext.create("FBEditor.editor.command.PasteCommand",{html:j});if(f.execute()){FBEditor.editor.HistoryManager.add(f)}},removeRangeNodes:function(){var b=this,a=b.getNameElement(),c;c=Ext.create("FBEditor.editor.command."+a+".RemoveRangeNodesCommand");if(c.execute()){FBEditor.editor.HistoryManager.add(c)}},convertTextToHtml:function(b){var a;a=b.replace(/^(.*?)$/gim,"<p>$1</p>");return a}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.li,"LiElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractSplitNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var l=this,g=l.getData(),k=false,d={},a={},m={},b=window.getSelection(),h,c=FBEditor.editor.Manager,f=FBEditor.editor.Factory;try{c.suspendEvent=true;if(g.saveRange){c.setCursor(g.saveRange)}h=b.getRangeAt(0);g.viewportId=h.startContainer.viewportId;g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,parentStart:h.commonAncestorContainer.parentNode,collapsed:h.collapsed,offset:{start:h.startOffset,end:h.endOffset}};console.log("split "+l.elementName,g.range);a.node=h.startContainer;d.node=a.node.getElement();a.p=a.node.parentNode;d.p=a.p.getElement();if(d.node.isEmpty()&&a.node.firstChild||d.node.isP){a.node=a.node.firstChild;d.node=a.node.getElement();a.p=a.node;d.p=a.p.getElement()}while(!d.p.hisName(l.elementName)){a.node=a.p;d.node=a.node.getElement();a.p=a.p.parentNode;d.p=a.p.getElement()}a.parentP=a.p.parentNode;d.parentP=a.parentP.getElement();a.nextP=a.p.nextSibling;d.newP=f.createElement(l.elementName);a.newP=d.newP.getNode(g.viewportId);if(a.nextP){d.nextP=a.nextP.getElement();d.parentP.insertBefore(d.newP,d.nextP);a.parentP.insertBefore(a.newP,a.nextP)}else{d.parentP.add(d.newP);a.parentP.appendChild(a.newP)}if(!d.p.isEmpty()&&g.range.start.getElement().isText){m.isEnd=g.range.end.nodeValue&&g.range.offset.end===g.range.end.nodeValue.length?c.isLastNode(a.p,g.range.end):false;m.isStart=g.range.offset.start===0?c.isFirstNode(a.p,g.range.start):false;a.common=a.p;d.common=d.p;a.container=g.range.start;a.parentContainer=a.container.parentNode;d.parentContainer=a.parentContainer.getElement();m.needSplit=!m.isStart&&!m.isEnd;m.needSplit=d.parentContainer.elementId===d.p.elementId&&g.range.end.nodeValue&&g.range.offset.end===g.range.end.nodeValue.length?false:m.needSplit;g.range.pos=m;console.log("pos",m,h.toString());if(m.needSplit){a.start=c.splitNode(d,a,g.range.offset.start);d.common.removeEmptyText();d.start=a.start.getElement();a.prev=a.start.previousSibling;d.prev=a.prev?a.prev.getElement():null;if(d.prev&&d.prev.isEmpty()){d.p.remove(d.prev);a.p.removeChild(a.prev)}if(d.start.isEmpty()){d.p.remove(d.start);a.p.removeChild(a.start);a.start=null}}else{if(g.range.offset.start===0){a.start=a.node}else{a.start=a.node.nextSibling}}a.next=a.start;while(a.next){a.buf=a.next.nextSibling;d.next=a.next.getElement();d.newP.add(d.next);a.newP.appendChild(a.next);a.next=a.buf}if(d.p.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(g.viewportId);d.p.add(d.empty);a.p.appendChild(a.empty);a.node=a.empty}}if(d.newP.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(g.viewportId);d.newP.add(d.empty);a.newP.appendChild(a.empty)}d.parentP.sync(g.viewportId);c.suspendEvent=false;a.cursor=c.getDeepFirst(a.newP);c.setCursor({startNode:a.cursor});l.data.nodes=a;l.verifyElement(d.parentP);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}return k},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},a,c=FBEditor.editor.Manager;try{c.suspendEvent=true;b=h.nodes;a=h.range;console.log("undo split "+g.elementName,b,h);d.p=b.p.getElement();d.node=b.node.getElement();d.newP=b.newP.getElement();d.parentP=b.parentP.getElement();d.prev=b.prev?b.prev.getElement():null;d.start=b.start?b.start.getElement():null;b.cursor=a.start;if(d.p.isEmpty()&&d.newP.isEmpty()){b.cursor=b.node}else{if(d.p.isEmpty()){d.p.remove(d.node);b.p.removeChild(b.node)}if(!d.newP.isEmpty()){b.first=b.newP.firstChild;while(b.first){d.first=b.first.getElement();d.p.add(d.first);b.p.appendChild(b.first);b.first=b.newP.firstChild}b.cursor=b.cursor.parentNode?b.cursor:b.p.firstChild}if(d.prev&&d.prev.hisName(d.start.xmlTag)){c.joinNode(b.start);d.parentP.removeEmptyText()}}d.parentP.remove(d.newP);b.parentP.removeChild(b.newP);d.parentP.sync(h.viewportId);c.suspendEvent=false;h.saveRange={startNode:b.cursor,startOffset:a.offset.start,focusElement:d.p};c.setCursor(h.saveRange);h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractSplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var k=this,f=k.getData(),j=false,d={},a={},b=window.getSelection(),g,c=FBEditor.editor.Manager;try{c.suspendEvent=true;if(f.saveRange){c.setCursor(f.saveRange)}g=b.getRangeAt(0);if(g.collapsed){throw Error("Отсутствует выделение")}a.common=g.commonAncestorContainer;d.common=a.common.getElement();f.viewportId=a.common.viewportId;d.startContainer=g.startContainer.getElement();d.endContainer=g.endContainer.getElement();if(d.startContainer.elementId===d.common.elementId&&d.endContainer.elementId===d.common.elementId&&!d.common.isText){throw Error("Некорректное выделение")}f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,parentStart:g.commonAncestorContainer.parentNode,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};if(d.startContainer.elementId===d.common.elementId&&!d.common.isText){f.range.start=a.common.firstChild;f.range.offset.start=0;d.startContainer=f.range.start.getElement()}else{if(d.endContainer.elementId===d.common.elementId&&!d.common.isText){f.range.end=a.common.lastChild;f.range.offset.end=0;d.endContainer=f.range.end.getElement()}}if(d.startContainer.elementId===d.endContainer.elementId&&!d.common.isText){a.common=f.range.start;f.range.common=a.common;d.common=a.common.getElement()}console.log("remove range "+k.elementName,f.range);a.removed=[];a.cursor=a.common;a.startCursor=f.range.offset.start;if(d.common.isText){a.needText=true;a.parent=a.common.parentNode;d.parent=a.parent.getElement();f.oldValue=a.common.nodeValue;if(f.range.offset.start===0&&f.range.offset.end===a.common.nodeValue.length){a.next=a.common.nextSibling;a.prev=a.common.previousSibling;d.parent.removeAll(d.common);a.parent.removeChild(a.parent.firstChild);if(!d.parent.isStyleHolder){a.needAddText=true;while(!d.parent.isStyleHolder&&d.parent.isEmpty){a.common=a.parent;d.common=a.common.getElement();a.parent=a.parent.parentNode;d.parent=a.parent.getElement()}a.next=a.common.nextSibling;a.prev=a.common.previousSibling;d.parent.remove(d.common);a.parent.removeChild(a.common)}if(!d.parent.isEmpty()){a.cursor=a.next?a.next:a.prev;if(a.next){while(a.cursor&&a.cursor.firstChild){a.cursor=a.cursor.firstChild}}else{while(a.cursor&&a.cursor.lastChild){a.cursor=a.cursor.lastChild}a.startCursor=a.cursor.getElement().isText?a.cursor.nodeValue.length:0}}}else{d.startValue=a.common.nodeValue.substring(0,f.range.offset.start);d.endValue=a.common.nodeValue.substring(f.range.offset.end);d.common.setText(d.startValue+d.endValue);a.common.nodeValue=d.startValue+d.endValue}}else{d.startContainer=g.startContainer.getElement();d.endContainer=g.endContainer.getElement();d.needPrevEnd=d.endContainer.isText&&f.range.offset.end<d.endContainer.text.length;a.common=f.range.common;d.common=a.common.getElement();a.container=f.range.end;a.end=c.splitNode(d,a,f.range.offset.end);a.end=d.needPrevEnd?a.end.previousSibling:a.end;d.end=a.end.getElement();if(d.end.isEmpty()){a.prev=a.end.previousSibling;d.common.remove(d.end);a.common.removeChild(a.end);a.end=a.prev;d.end=a.end.getElement()}a.container=f.range.start;a.start=c.splitNode(d,a,f.range.offset.start);d.start=a.start.getElement();a.prev=a.start.previousSibling;d.prev=a.prev?a.prev.getElement():null;if(d.prev&&d.prev.isEmpty()){d.common.remove(d.prev);a.common.removeChild(a.prev)}a.parent=a.common;d.parent=a.parent.getElement();a.nextCursor=a.end.nextSibling;a.prevCursor=a.start.previousSibling;d.nextCursor=a.nextCursor?a.nextCursor.getElement():null;d.prevCursor=a.prevCursor?a.prevCursor.getElement():null;a.next=a.start;d.next=a.next?a.next.getElement():null;while(d.next&&d.next.elementId!==d.end.elementId){a.buf=a.next.nextSibling;a.removed.push(a.next);d.parent.remove(d.next);a.parent.removeChild(a.next);a.next=a.buf;d.next=a.next?a.next.getElement():null}a.removed.push(a.end);d.parent.remove(d.end);a.parent.removeChild(a.end);a.start=a.prevCursor;d.start=a.start?a.start.getElement():null;a.end=a.nextCursor;d.end=a.end?a.end.getElement():null;if(d.prevCursor&&d.nextCursor&&d.prevCursor.isText&&d.nextCursor.isText){c.joinNode(a.nextCursor);a.cursor=a.prevCursor;f.range.needSplit=true}else{if(!d.parent.isEmpty()){a.cursor=a.nextCursor?a.nextCursor:a.prevCursor;if(a.nextCursor){a.startCursor=0}else{while(a.cursor.firstChild){a.cursor=a.cursor.firstChild}a.startCursor=a.cursor.nodeValue.length}}}}if(d.parent.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(f.viewportId);d.parent.add(d.empty);a.parent.appendChild(a.empty);a.cursor=a.empty}d.parent.sync(f.viewportId);c.suspendEvent=false;c.setCursor({startNode:a.cursor,startOffset:a.startCursor,focusElement:a.cursor.getElement()});f.nodes=a;f.els=d;k.verifyElement(d.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});console.log("nodes",a);FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var k=this,d=k.getData(),j=false,c={},a={},b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g;try{b.suspendEvent=true;g=d.range;a=d.nodes;c=d.els;console.log("undo remove range "+k.elementName,d,a);if(c.parent.isEmpty()){a.empty=a.parent.firstChild;c.empty=a.empty.getElement();c.parent.remove(c.empty);a.parent.removeChild(a.empty)}if(a.needText){c.text=f.createElementText(d.oldValue);a.text=c.text.getNode(d.viewportId);if(a.needAddText){a.common=c.common.getNode(d.viewportId);a.deep=b.getDeepFirst(a.common);c.deep=a.deep.getElement();c.deep.add(c.text);a.deep.appendChild(a.text);a.text=a.common;c.text=c.common}if(c.parent.isEmpty()){c.parent.add(c.text);a.parent.appendChild(a.text);g.start=a.text;g.end=a.text}else{if(a.next){c.next=a.next.getElement();c.parent.insertBefore(c.text,c.next);a.parent.insertBefore(a.text,a.next);g.start=a.text;g.end=a.text}else{if(a.prev){c.parent.add(c.text);a.parent.appendChild(a.text);g.start=a.text;g.end=a.text}else{c.common.setText(d.oldValue);a.common.nodeValue=d.oldValue}}}if(a.needAddText){g.start=b.getDeepFirst(a.text);g.end=g.start}}if(a.removed.length){if(g.needSplit){c.common=g.common.getElement();a.container=a.cursor;a.nextCursor=b.splitNode(c,a,g.offset.start)}a.startCursor=a.prevCursor?a.prevCursor:a.removed[0];while(a.startCursor.firstChild){a.startCursor=a.startCursor.firstChild}g.start=a.startCursor;if(a.nextCursor&&!a.nextCursor.parentNode){if(a.prevCursor&&a.prevCursor.parentNode&&a.prevCursor.nextSibling){a.nextCursor=a.prevCursor.nextSibling}else{}c.ignoreJoin=true;g.end=a.nextCursor}Ext.Array.each(a.removed,function(e){if(a.nextCursor){c.nextCursor=a.nextCursor.getElement();c.parent.insertBefore(e.getElement(),c.nextCursor);a.parent.insertBefore(e,a.nextCursor)}else{c.parent.add(e.getElement());a.parent.appendChild(e)}});a.endCursor=a.removed[a.removed.length-1];while(a.endCursor.lastChild){a.endCursor=a.endCursor.lastChild}g.end=a.endCursor;if(a.nextCursor&&!c.ignoreJoin){b.joinNode(a.nextCursor)}if(a.prevCursor){b.joinNode(a.removed[0])}c.parent.removeEmptyText()}c.parent.sync(d.viewportId);b.suspendEvent=false;d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end};b.setCursor(d.saveRange);d.nodes=a;j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractRemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var k=this,f=k.getData(),j=false,d={},a={},b=window.getSelection(),c=FBEditor.editor.Manager,g;try{c.suspendEvent=true;g=b.getRangeAt(0);f.viewportId=g.commonAncestorContainer.viewportId;a.p=g.commonAncestorContainer;d.p=a.p.getElement();while(!d.p.hisName(k.elementName)){a.p=a.p.parentNode;d.p=a.p.getElement()}a.parentP=a.p.parentNode;d.parentP=a.parentP.getElement();a.nextP=a.p.nextSibling;d.nextP=a.nextP?a.nextP.getElement():null;if(!d.nextP||!d.nextP.hisName(k.elementName)){return false}console.log("join next "+k.elementName,g);a.firstNext=a.nextP.firstChild;d.firstNext=a.firstNext.getElement();a.last=a.p.lastChild;d.last=a.last.getElement();a.cursor=a.firstNext;a.startCursor=0;if(d.p.isEmpty()&&d.nextP.isEmpty()){a.cursor=g.commonAncestorContainer;a.startCursor=0;a.bothEmpty=true}else{if(d.p.isEmpty()){d.p.remove(d.last);a.p.removeChild(a.last);a.curEmpty=true}else{if(d.nextP.isEmpty()){a.cursor=c.getDeepLast(a.p);a.startCursor=a.cursor.nodeValue?a.cursor.nodeValue.length:0;a.nextEmpty=true}}}if(!d.nextP.isEmpty()){a.first=a.firstNext;while(a.first){d.first=a.first.getElement();d.p.add(d.first);a.p.appendChild(a.first);a.first=a.nextP.firstChild}if(d.firstNext&&d.last&&d.firstNext.isText&&d.last.isText){a.offset=d.last.text.length;a.cursor=a.last;a.startCursor=a.offset;c.joinNode(a.firstNext)}}d.parentP.remove(d.nextP);a.parentP.removeChild(a.nextP);d.parentP.sync(f.viewportId);c.suspendEvent=false;c.setCursor({startNode:a.cursor,startOffset:a.startCursor});f.nodes=a;k.verifyElement(d.parentP);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a=FBEditor.editor.Factory;try{c.suspendEvent=true;b=h.nodes;console.log("undo join next "+g.elementName,b,d);d.p=b.p.getElement();d.parentP=b.parentP.getElement();d.newP=a.createElement(g.elementName);b.newP=d.newP.getNode(h.viewportId);b.nextP=b.p.nextSibling;d.nextP=b.nextP?b.nextP.getElement():null;if(d.nextP){d.parentP.insertBefore(d.newP,d.nextP);b.parentP.insertBefore(b.newP,b.nextP)}else{d.parentP.add(d.newP);b.parentP.appendChild(b.newP)}if(b.bothEmpty||b.nextEmpty){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.newP.add(d.empty);b.newP.appendChild(b.empty)}else{if(b.offset){d.common=d.p;b.container=b.cursor;b.cursor=c.splitNode(d,b,b.offset)}b.next=b.cursor;while(b.next){b.buf=b.next.nextSibling;d.next=b.next.getElement();d.newP.add(d.next);b.newP.appendChild(b.next);b.next=b.buf}if(d.p.isEmpty()){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.p.add(d.empty);b.p.appendChild(b.empty)}}d.parentP.sync(h.viewportId);c.suspendEvent=false;b.cursor=c.getDeepLast(b.p);b.startCursor=b.cursor.getElement().getText().length;h.saveRange={startNode:b.cursor,startOffset:b.startCursor};c.setCursor(h.saveRange);h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractJoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var k=this,f=k.getData(),j=false,d={},a={},b=window.getSelection(),c=FBEditor.editor.Manager,g;try{c.suspendEvent=true;g=b.getRangeAt(0);f.viewportId=g.commonAncestorContainer.viewportId;a.p=g.commonAncestorContainer;d.p=a.p.getElement();while(!d.p.hisName(k.elementName)){a.p=a.p.parentNode;d.p=a.p.getElement()}a.parentP=a.p.parentNode;d.parentP=a.parentP.getElement();a.prevP=a.p.previousSibling;d.prevP=a.prevP?a.prevP.getElement():null;if(!d.prevP||!d.prevP.hisName(k.elementName)){return false}console.log("join prev "+k.elementName,g);a.lastPrev=a.prevP.lastChild;d.lastPrev=a.lastPrev.getElement();a.firstP=a.p.firstChild;d.firstP=a.firstP.getElement();a.cursor=c.getDeepLast(a.lastPrev);a.startCursor=d.lastPrev.getText()?d.lastPrev.getText().length:0;f.curEmpty=d.p.isEmpty();if(!d.p.isEmpty()){if(d.prevP.isEmpty()){d.prevP.remove(d.lastPrev);a.prevP.removeChild(a.lastPrev);a.prevEmpty=true}a.first=a.firstP;while(a.first){d.first=a.first.getElement();d.prevP.add(d.first);a.prevP.appendChild(a.first);a.first=a.p.firstChild}a.cursor=c.getDeepFirst(a.firstP);a.startCursor=0;if(d.lastPrev&&d.firstP&&d.lastPrev.isText&&d.firstP.isText){a.offset=d.lastPrev.text.length;a.cursor=a.lastPrev;a.startCursor=a.offset;c.joinNode(a.firstP)}}d.parentP.remove(d.p);a.parentP.removeChild(a.p);d.parentP.sync(f.viewportId);c.suspendEvent=false;c.setCursor({startNode:a.cursor,startOffset:a.startCursor});f.nodes=a;k.verifyElement(d.parentP);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removePrev()}return j},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a=FBEditor.editor.Factory;try{c.suspendEvent=true;b=h.nodes;console.log("undo join prev "+g.elementName,b,h);d.prevP=b.prevP.getElement();d.parentP=b.parentP.getElement();d.newP=a.createElement(g.elementName);b.newP=d.newP.getNode(h.viewportId);b.nextP=b.prevP.nextSibling;d.nextP=b.nextP?b.nextP.getElement():null;if(d.nextP){d.parentP.insertBefore(d.newP,d.nextP);b.parentP.insertBefore(b.newP,b.nextP)}else{d.parentP.add(d.newP);b.parentP.appendChild(b.newP)}if(h.curEmpty){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.newP.add(d.empty);b.newP.appendChild(b.empty)}else{if(b.offset){d.common=d.prevP;b.container=b.cursor;b.firstP=c.splitNode(d,b,b.offset)}b.next=b.firstP;while(b.next){b.buf=b.next.nextSibling;d.next=b.next.getElement();d.newP.add(d.next);b.newP.appendChild(b.next);b.next=b.buf}if(d.prevP.isEmpty()){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.prevP.add(d.empty);b.prevP.appendChild(b.empty)}}d.parentP.sync(h.viewportId);c.suspendEvent=false;b.cursor=c.getDeepFirst(b.newP);h.saveRange={startNode:b.cursor};c.setCursor(h.saveRange);h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractJoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.li.LiElementController",htmlTag:"li",xmlTag:"li",isLi:true,getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<li><br\/><\/li>/gi,"<li></li>");return a}},0,0,0,0,0,0,[FBEditor.editor.element.li,"LiElement"],0));(Ext.cmd.derive("FBEditor.editor.element.marker.img.ImgElement",FBEditor.editor.element.img.ImgElement,{cls:"el-img-marker",setNode:function(b){var a=this;FBEditor.editor.element.img.ImgElement.prototype.setNode.apply(this,arguments);b.getElement=function(){return a.parent.parent}}},0,0,0,0,0,0,[FBEditor.editor.element.marker.img,"ImgElement"],0));(Ext.cmd.derive("FBEditor.editor.element.marker.MarkerElement",FBEditor.editor.element.AbstractElement,{htmlTag:"marker",xmlTag:"marker",cls:"el-marker",img:null,isMarker:true,constructor:function(){var b=this,a;FBEditor.editor.element.AbstractElement.prototype.constructor.apply(this,arguments);a=b.children[0];b.children=[];b.img=Ext.create("FBEditor.editor.element.marker.img.ImgElement",a.attributes);b.img.parent=b},getNode:function(d){var c=this,a=c.htmlTag,b;b=document.createElement(a);b.viewportId=d;c.setNode(b);b.appendChild(c.img.getNode(d));return b},getXml:function(){var d=this,b=d.xmlTag,c,a;a=d.getAttributesXml();c="<"+b;c+=a?" "+a:"";if(d.img){c+=">"+d.img.getXml()+"</"+b+">"}else{c+="/>"}return c},setNode:function(b){var a=this;FBEditor.editor.element.AbstractElement.prototype.setNode.apply(this,arguments);b.getElement=function(){return a.parent}}},1,0,0,0,0,0,[FBEditor.editor.element.marker,"MarkerElement"],0));(Ext.cmd.derive("FBEditor.editor.element.note.NoteElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.note,"NoteElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.note.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"note"},0,0,0,0,0,0,[FBEditor.editor.command.note,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.note.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"note"},0,0,0,0,0,0,[FBEditor.editor.command.note,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.note.NoteElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.note.NoteElementController",htmlTag:"note",xmlTag:"note",cls:"el-note",showedOnTree:false,defaultAttributes:{href:"undefined"},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,e){a+=(d==="href"&&!b?"l:":"")+d+'="'+e+'" '});return a},getBlock:function(){return this}},0,0,0,0,0,0,[FBEditor.editor.element.note,"NoteElement"],0));(Ext.cmd.derive("FBEditor.editor.command.notebody.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"notebody",createElement:function(c,b){var d=this,e=d.getData(),a=FBEditor.editor.Factory;b.parent=b.node.parentNode;b.node=b.parent.getElement().isNote?b.parent:b.node;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;c.node=a.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(e.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command.notebody,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.notebody.NotebodyElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,b){var l=this,h={},d={},f=FBEditor.editor.Manager,c=l.getNameElement(),k,a,j,g;e=e||window.getSelection();j=e.getRangeAt(0);d.node=j.endContainer;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();while(!(h.parent.isNotes||h.parent.isRoot)){d.node=d.parent;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement()}if(!h.parent.isNotes){return false}d.parent=d.node.parentNode;h.parent=d.parent.getElement();d.first=d.parent.firstChild;h.first=d.first?d.first.getElement():null;g=f.getNamesElements(h.parent);if(!h.first.isTitle){g.unshift(c)}else{g.splice(1,0,c)}a=f.getSchema();c=h.parent.getName();k=a.verify(c,g)?d.node:false;return k}},0,0,0,0,0,0,[FBEditor.editor.element.notebody,"NotebodyElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.notebody.NotebodyElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.notebody.NotebodyElementController",htmlTag:"notebody",xmlTag:"notebody",cls:"el-notebody",permit:{splittable:true},isNotebody:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Сноска");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.notebody,"NotebodyElement"],0));(Ext.cmd.derive("FBEditor.editor.command.notes.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"notes",createElement:function(b,a){var c=this,d=c.getData();a.parent=d.node;b.parent=a.parent.getElement();b.node=FBEditor.editor.Factory.createElement(c.elementName);b=Ext.apply(b,b.node.createScaffold());a.node=b.node.getNode(d.viewportId);b.parent.add(b.node);a.parent.appendChild(a.node)}},0,0,0,0,0,0,[FBEditor.editor.command.notes,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.notes.NotesElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(g,f){var e=FBEditor.editor.Manager,c,a,b,h,d;b=g&&g.rangeCount?g.getRangeAt(0):null;a=e.getContent();if(b){h=b.startContainer.viewportId}else{h=Ext.Object.getKeys(a.nodes)[0]}c=a.nodes[h];e.setCursor({startNode:c.lastChild});d=a.getChildrenCountByProp("isNotes",true);return !d?c:null}},0,0,0,0,0,0,[FBEditor.editor.element.notes,"NotesElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.notes.NotesElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.notes.NotesElementController",htmlTag:"notes",xmlTag:"notes",cls:"el-notes",isNotes:true,createScaffold:function(){var b=this,a={};a.title=FBEditor.editor.Factory.createElement("title");a=Ext.apply(a,a.title.createScaffold());b.add(a.title);a.notebody=FBEditor.editor.Factory.createElement("notebody");a=Ext.apply(a,a.notebody.createScaffold());b.add(a.notebody);return a}},0,0,0,0,0,0,[FBEditor.editor.element.notes,"NotesElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractLiHolderElement",FBEditor.editor.element.AbstractElement,{isLiHolder:true,getOnlyStylesChildren:function(a){var b=this;Ext.Array.each(b.children,function(c){var d=c.children[0];if(d.isP){while(d.children.length){c.add(d.children[0])}c.remove(d)}});a.add(b)},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(d){var e=a.createElement("p");Ext.Array.each(d.children,function(f){e.add(f)});b.add(e)})}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractLiHolderElement"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateLiHolderCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var l=this,f=l.getData(),k=false,d={},a={},c=FBEditor.editor.Manager,g=FBEditor.editor.Factory,b,h;try{c.suspendEvent=true;if(f.saveRange){c.setCursor(f.saveRange)}b=f.sel||window.getSelection();h=b.getRangeAt(0);f.viewportId=f.node.viewportId;f.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,parentStart:h.startContainer.parentNode,collapsed:h.collapsed,offset:{start:h.startOffset,end:h.endOffset}};a.pp=[];a.firstP=f.node;d.firstP=a.firstP.getElement();a.pp.push(a.firstP);a.lastP=h.endContainer;d.lastP=a.lastP.getElement();while(!d.lastP.isP){a.lastP=a.lastP.parentNode;d.lastP=a.lastP.getElement()}if(d.firstP.elementId!==d.lastP.elementId){a.next=a.firstP.nextSibling;d.next=a.next?a.next.getElement():null;while(d.next&&d.next.isP&&d.next.elementId!==d.lastP.elementId){a.pp.push(a.next);a.next=a.next.nextSibling;d.next=a.next?a.next.getElement():null}if(d.next&&d.next.elementId===d.lastP.elementId){a.pp.push(a.next)}}a.parent=a.firstP.parentNode;d.parent=a.parent.getElement();d.node=g.createElement(l.elementName);a.node=d.node.getNode(f.viewportId);d.parent.insertBefore(d.node,d.firstP);a.parent.insertBefore(a.node,a.firstP);Ext.Array.each(a.pp,function(n){var e={},m={};m.p=n;e.p=m.p.getElement();e.node=g.createElement("li");m.node=e.node.getNode(f.viewportId);d.node.add(e.node);a.node.appendChild(m.node);m.first=m.p.firstChild;e.first=m.first?m.first.getElement():null;while(e.first){e.node.add(e.first);m.node.appendChild(m.first);m.first=m.p.firstChild;e.first=m.first?m.first.getElement():null}d.parent.remove(e.p);a.parent.removeChild(m.p)});d.parent.sync(f.viewportId);c.suspendEvent=false;c.setCursor({startNode:f.range.start,startOffset:f.range.offset.start,focusElement:d.node.children[0]});f.saveNodes=a;l.verifyElement(d.parent);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}return k},unExecute:function(){var k=this,d=k.getData(),j=false,c={},a={},b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g,l;try{b.suspendEvent=true;g=d.range;a=d.saveNodes;l=a.node.viewportId;console.log("undo create "+k.elementName,g,a);c.node=a.node.getElement();c.parent=a.parent.getElement();a.pp=[];a.li=a.node.firstChild;c.li=a.li?a.li.getElement():null;while(c.li){c.p=f.createElement("p");a.p=c.p.getNode(d.viewportId);a.pp.push(a.p);c.parent.insertBefore(c.p,c.node);a.parent.insertBefore(a.p,a.node);a.first=a.li.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){c.p.add(c.first);a.p.appendChild(a.first);a.first=a.li.firstChild;c.first=a.first?a.first.getElement():null}a.li=a.li.nextSibling;c.li=a.li?a.li.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(l);b.suspendEvent=false;d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end,focusElement:g.common.getElement()};b.setCursor(d.saveRange);d.node=a.pp[0];j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateLiHolderCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ol.CreateCommand",FBEditor.editor.command.AbstractCreateLiHolderCommand,{elementName:"ol"},0,0,0,0,0,0,[FBEditor.editor.command.ol,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ol.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"ol"},0,0,0,0,0,0,[FBEditor.editor.command.ol,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractLiHolderElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(c){var j=this,e={},b={},d=FBEditor.editor.Manager,h,g,f,a;g=c.getRangeAt(0);b.first=g.startContainer;e.first=b.first.getElement();while(!e.first.isP&&!e.first.isRoot){b.first=b.first.parentNode;e.first=b.first.getElement()}if(!e.first.isP){return false}b.parent=b.first.parentNode;e.parent=b.parent.getElement();e.pos=e.parent.getChildPosition(e.first);f=d.getNamesElements(e.parent);f.splice(e.pos,1,j.getNameElement());a=d.getSchema();e.name=e.parent.getName();h=a.verify(e.name,f)?b.first:false;return h}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractLiHolderElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ol.OlElementController",FBEditor.editor.element.AbstractLiHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.ol,"OlElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ol.OlElement",FBEditor.editor.element.AbstractLiHolderElement,{controllerClass:"FBEditor.editor.element.ol.OlElementController",htmlTag:"ol",xmlTag:"ol",cls:"el-ol"},0,0,0,0,0,0,[FBEditor.editor.element.ol,"OlElement"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.p.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.p.PElementController",htmlTag:"p",xmlTag:"p",cls:"el-p",isP:true,setAttributesHtml:function(a){var b=this,c;c=b.first();if(c&&c.isImg){b.cls+=" el-p-no-indent"}a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.setAttributesHtml.apply(this,arguments);return a},getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<p><br\/><\/p>/gi,"<br/>");return a}},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElement"],0));(Ext.cmd.derive("FBEditor.editor.command.poem.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"poem"},0,0,0,0,0,0,[FBEditor.editor.command.poem,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.poem.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"poem",unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b=FBEditor.editor.Manager,f,k;try{b.suspendEvent=true;f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo create range "+j.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();a.first=a.stanza.firstChild;c.first=a.first.getElement();while(c.first){c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.stanza.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(k);b.suspendEvent=false;if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});FBEditor.editor.HistoryManager.remove()}return h},createNewElement:function(d,b){var e=this,f=e.getData(),c=FBEditor.editor.Manager,a=c.getFactory();d.node=a.createElement(e.elementName);b.node=d.node.getNode(f.viewportId);d.stanza=a.createElement("stanza");b.stanza=d.stanza.getNode(f.viewportId);d.node.add(d.stanza);b.node.appendChild(b.stanza);d.common.insertBefore(d.node,d.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;d.next=b.next.getElement();while(d.next&&d.next.elementId!==d.endContainer.elementId){b.buf=b.next.nextSibling;d.stanza.add(d.next);b.stanza.appendChild(b.next);b.next=b.buf;d.next=b.next?b.next.getElement():null}if(d.next&&d.next.elementId===d.endContainer.elementId&&!f.range.joinEndContainer){d.stanza.add(d.next);b.stanza.appendChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command.poem,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.poem.PoemElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.poem,"PoemElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.poem.PoemElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.poem.PoemElementController",htmlTag:"poem",xmlTag:"poem",cls:"el-poem",isPoem:true,createScaffold:function(){var b=this,a={};a.stanza=FBEditor.editor.Factory.createElement("stanza");a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Поэма");a.p.add(a.t);a.stanza.add(a.p);b.add(a.stanza);return a},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(e){var d=a.createElement("p");Ext.Array.each(e.children,function(f){d.add(f)});b.add(d)})}},0,0,0,0,0,0,[FBEditor.editor.element.poem,"PoemElement"],0));(Ext.cmd.derive("FBEditor.editor.element.pre.PreElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.pre,"PreElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.pre.PreElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.pre.PreElementController",htmlTag:"pre",xmlTag:"pre",cls:"el-pre",permit:{splittable:true},isPre:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Блок предварительно отформатированного текста");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.pre,"PreElement"],0));(Ext.cmd.derive("FBEditor.editor.command.section.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"section",createElement:function(c,b){var d=this,e=d.getData(),a;a=e.opts&&e.opts.inner;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;if(a){while(!c.parent.isSection&&!c.parent.isRoot){b.parent=b.parent.parentNode;c.parent=b.parent.getElement()}b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next){if(c.next.isSection){throw Error("Section exists")}b.next=b.next.nextSibling;c.next=b.next?b.next.getElement():null}c.node=FBEditor.editor.Factory.createElement(d.elementName);b.node=c.node.getNode(e.viewportId);b.last=b.lastChild;c.last=b.last?b.last.getElement():null;if(c.last&&c.last.isNotes){c.parent.insertBefore(c.node,c.last);b.parent.insertBefore(b.node,b.last)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}c.except=["title","epigraph","annotation"];b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next&&c.next.elementId!==c.node.elementId){b.buf=b.next.nextSibling;if(!Ext.Array.contains(c.except,c.next.xmlTag)){c.node.add(c.next);b.node.appendChild(b.next);c.parent.remove(c.next)}b.next=b.buf;c.next=b.next?b.next.getElement():null}}else{c.node=FBEditor.editor.Factory.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(e.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},unExecute:function(){var g=this,h=g.getData(),f=false,d={},c={},b,a;try{a=h.opts&&h.opts.inner;FBEditor.editor.Manager.suspendEvent=true;c.node=h.saveNode;d.node=c.node.getElement();c.parent=c.node.parentNode;d.parent=c.parent.getElement();if(a){c.first=c.node.firstChild;while(c.first){d.first=c.first.getElement();d.parent.insertBefore(d.first,d.node);c.parent.insertBefore(c.first,c.node);c.first=c.node.firstChild}g.setCursor()}else{b=h.range;h.saveRange={startNode:b.start,startOffset:b.offset.start,focusElement:d.parent};FBEditor.editor.Manager.setCursor(h.saveRange)}d.parent.remove(d.node);c.parent.removeChild(c.node);d.parent.sync(h.viewportId);FBEditor.editor.Manager.suspendEvent=false;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f},setCursor:function(e,d){var f=this,g=f.getData(),c,b,a;a=g.opts&&g.opts.inner;if(!a){d.p=e.p.nodes[g.viewportId];g.saveRange={startNode:d.p.firstChild,startOffset:d.p.firstChild.length,focusElement:e.p}}else{c=g.range;b=!c.start.getElement().isText?c.start.getElement():c.parentStart.getElement();g.saveRange={startNode:c.start,startOffset:c.offset.start,focusElement:b}}FBEditor.editor.Manager.setCursor(g.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.section,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.section.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"section",createElement:function(a,b){var c=this,d=c.getData();if(!d.range.collapsed){b.title=FBEditor.editor.Factory.createElement("title");b.node.add(b.title);a.title=b.title.getNode(d.viewportId);a.node.appendChild(a.title);a.next=a.startContainer;b.next=a.next.getElement();a.parentNext=a.next.parentNode;b.parentNext=a.parentNext.getElement();while(b.next&&b.next.elementId!==b.endContainer.elementId){a.buf=a.next.nextSibling;b.title.add(b.next);a.title.appendChild(a.next);a.next=a.buf;b.next=a.next?a.next.getElement():null}a.cursor=a.title}},restoreElement:function(b,c,a){var d=this,e=d.getData();if(b.title){c.title=b.title.getElement();b.first=b.title.firstChild;while(b.first){c.first=b.first.getElement();b.prevNode.appendChild(b.first);c.prevNode.add(c.first);c.title.remove(c.first);b.first=b.title.firstChild}b.node.removeChild(b.title);c.node.remove(c.title)}}},0,0,0,0,0,0,[FBEditor.editor.command.section,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.section.SectionElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(c,b){var a;c=c||window.getSelection();a=c.getRangeAt(0);return a.startContainer}},0,0,0,0,0,0,[FBEditor.editor.element.section,"SectionElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.section.SectionElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.section.SectionElementController",htmlTag:"section",xmlTag:"section",cls:"el-section",permit:{splittable:true},isSection:true,constructor:function(){var a=this;FBEditor.editor.element.AbstractElement.prototype.constructor.apply(this,arguments);a.attributes.id=Ext.data.identifier.Uuid.Global.generate()},createScaffold:function(){var b=this,a={};a.title=FBEditor.editor.Factory.createElement("title");a.pT=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Заголовок");a.pT.add(a.t);a.title.add(a.pT);b.add(a.title);a.p=FBEditor.editor.Factory.createElement("p");a.t2=FBEditor.editor.Factory.createElementText("Текст");a.p.add(a.t2);b.add(a.p);return a}},1,0,0,0,0,0,[FBEditor.editor.element.section,"SectionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.spacing.SpacingElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.spacing,"SpacingElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.spacing.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"spacing"},0,0,0,0,0,0,[FBEditor.editor.command.spacing,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.spacing.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"spacing"},0,0,0,0,0,0,[FBEditor.editor.command.spacing,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.spacing.SpacingElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.spacing.SpacingElementController",htmlTag:"spacing",xmlTag:"spacing",cls:"el-spacing"},0,0,0,0,0,0,[FBEditor.editor.element.spacing,"SpacingElement"],0));(Ext.cmd.derive("FBEditor.editor.element.span.SpanElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"span",xmlTag:"span",cls:"el-span"},0,0,0,0,0,0,[FBEditor.editor.element.span,"SpanElement"],0));(Ext.cmd.derive("FBEditor.editor.command.stanza.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"stanza"},0,0,0,0,0,0,[FBEditor.editor.command.stanza,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.stanza.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"stanza"},0,0,0,0,0,0,[FBEditor.editor.command.stanza,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.stanza.StanzaElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.stanza,"StanzaElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.stanza.StanzaElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.stanza.StanzaElementController",htmlTag:"stanza",xmlTag:"stanza",cls:"el-stanza",permit:{splittable:true},createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Стих");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.stanza,"StanzaElement"],0));(Ext.cmd.derive("FBEditor.editor.element.strikethrough.StrikethroughElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.strikethrough,"StrikethroughElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.strikethrough.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"strikethrough"},0,0,0,0,0,0,[FBEditor.editor.command.strikethrough,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.strikethrough.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"strikethrough"},0,0,0,0,0,0,[FBEditor.editor.command.strikethrough,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.strikethrough.StrikethroughElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.strikethrough.StrikethroughElementController",htmlTag:"strikethrough",xmlTag:"strikethrough",cls:"el-strikethrough"},0,0,0,0,0,0,[FBEditor.editor.element.strikethrough,"StrikethroughElement"],0));(Ext.cmd.derive("FBEditor.editor.element.strong.StrongElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.strong,"StrongElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.strong.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"strong"},0,0,0,0,0,0,[FBEditor.editor.command.strong,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.strong.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"strong"},0,0,0,0,0,0,[FBEditor.editor.command.strong,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.strong.StrongElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.strong.StrongElementController",htmlTag:"strong",xmlTag:"strong",cls:"el-strong"},0,0,0,0,0,0,[FBEditor.editor.element.strong,"StrongElement"],0));(Ext.cmd.derive("FBEditor.editor.element.sub.SubElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.sub,"SubElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.sub.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"sub"},0,0,0,0,0,0,[FBEditor.editor.command.sub,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.sub.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"sub"},0,0,0,0,0,0,[FBEditor.editor.command.sub,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.sub.SubElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"sub",xmlTag:"sub",cls:"el-sub"},0,0,0,0,0,0,[FBEditor.editor.element.sub,"SubElement"],0));(Ext.cmd.derive("FBEditor.editor.command.subscription.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"subscription",createElement:function(d,c){var e=this,f=e.getData(),b=f.range,a=FBEditor.editor.Factory;c.parent=c.node.parentNode;d.parent=c.parent.getElement();c.last=c.parent.lastChild;d.last=c.last?c.last.getElement():null;if(d.last&&d.last.isSubscription){throw Error("Subscription exists")}d.node=a.createElement(e.elementName);if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Подпись");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(f.viewportId);d.parent.add(d.node);c.parent.appendChild(c.node);if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}e.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}c.suspendEvent=true;b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.p,d.next);b.parent.insertBefore(b.p,b.next)}else{d.parent.add(d.p);b.parent.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);c.suspendEvent=false;b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.subscription,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.subscription.SubscriptionElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,d){var c={},b={},a;e=e||window.getSelection();a=e.getRangeAt(0);b.node=a.commonAncestorContainer;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();while(c.parent.isStyleHolder||c.parent.isStyleType){b.node=b.parent;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement()}return b.node},getNameElementsVerify:function(b){var e=this,d={},a,c;c=e.getNameElement();d.parent=b.parent.getElement();a=FBEditor.editor.Manager.getNamesElements(d.parent);a.push(c);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subscription,"SubscriptionElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.subscription.SubscriptionElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.subscription.SubscriptionElementController",htmlTag:"subscription",xmlTag:"subscription",cls:"el-subscription",isSubscription:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Подпись");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subscription,"SubscriptionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{createFromRange:true,getNodeVerify:function(g,f){var e=this,d={},b={},c,a;c=e.getNameElement();g=g||window.getSelection();a=g.getRangeAt(0);b.node=a.commonAncestorContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node;return b.node},checkRangeVerify:function(a){return true},getNameElementsVerify:function(b){var f=this,e={},d=FBEditor.editor.Manager,a,c;c=f.getNameElement();e.parent=b.parent.getElement();b.node=e.parent.hisName(c)?b.parent:b.node;b.parent=b.node.parentNode;e.node=b.node.getElement();e.parent=b.parent.getElement();a=d.getNamesElements(e.parent);a.splice(e.parent.getChildPosition(e.node)+1,0,c);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"subtitle",setCursor:function(b,a){var c=this,e=window.getSelection(),d=c.getData();d.oldRange=e.getRangeAt(0);a.p=b.node.nodes[d.viewportId];d.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};FBEditor.editor.Manager.setCursor(d.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"subtitle",unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b=FBEditor.editor.Manager,f,k;try{b.suspendEvent=true;f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo create range "+j.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();Ext.Array.each(a.links,function(l){var m=l.el,e=m.getElement();c.parent.insertBefore(e,c.node);a.parent.insertBefore(m,a.node);Ext.Array.each(l.children,function(o){var n=o.getElement();e.add(n);m.appendChild(o)})});c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(k);b.suspendEvent=false;if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});FBEditor.editor.HistoryManager.remove()}return h},createNewElement:function(e,b){var f=this,g=f.getData(),d=FBEditor.editor.Manager,a=d.getFactory(),c;e.node=a.createElement(f.elementName);b.node=e.node.getNode(g.viewportId);b.links=[];e.common.insertBefore(e.node,e.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;e.next=b.next.getElement();while(e.next&&e.next.elementId!==e.endContainer.elementId){b.buf=b.next.nextSibling;c={el:b.next,children:[]};b.first=b.next.firstChild;e.first=b.first?b.first.getElement():null;while(e.first){c.children.push(b.first);e.node.add(e.first);b.node.appendChild(b.first);b.first=b.next.firstChild;e.first=b.first?b.first.getElement():null}e.common.remove(e.next);b.common.removeChild(b.next);b.links.push(c);b.next=b.buf;e.next=b.next?b.next.getElement():null}if(e.next&&e.next.elementId===e.endContainer.elementId&&!g.range.joinEndContainer){b.first=b.next.firstChild;e.first=b.first?b.first.getElement():null;while(e.first){e.node.add(e.first);b.node.appendChild(b.first);b.first=b.next.firstChild;e.first=b.first?b.first.getElement():null}e.common.remove(e.next);b.common.removeChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.subtitle.SubtitleElementController",htmlTag:"subtitle",xmlTag:"subtitle",cls:"el-subtitle",isSubtitle:true,createScaffold:function(){var b=this,a={};a.t=FBEditor.editor.Factory.createElementText("Подзаголовок");b.add(a.t);return a},getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<subtitle><br\/><\/subtitle>/gi,"<br/>");return a}},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.sup.SupElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.sup,"SupElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.sup.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"sup"},0,0,0,0,0,0,[FBEditor.editor.command.sup,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.sup.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"sup"},0,0,0,0,0,0,[FBEditor.editor.command.sup,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.sup.SupElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"sup",xmlTag:"sup",cls:"el-sup"},0,0,0,0,0,0,[FBEditor.editor.element.sup,"SupElement"],0));(Ext.cmd.derive("FBEditor.editor.command.table.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"table",createElement:function(e,b){var f=this,g=f.getData(),d=FBEditor.editor.Manager,a=d.getFactory(),c;c=g.opts.size;b.parent=b.node.parentNode;e.parent=b.parent.getElement();b.node=e.parent.hisName(f.elementName)?b.parent:b.node;b.parent=b.node.parentNode;e.parent=b.parent.getElement();b.next=b.node.nextSibling;e.node=a.createElement(f.elementName);e=Ext.apply(e,e.node.createScaffold(c));b.node=e.node.getNode(g.viewportId);if(b.next){e.next=b.next.getElement();e.parent.insertBefore(e.node,e.next);b.parent.insertBefore(b.node,b.next)}else{e.parent.add(e.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command.table,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableSelection",FBEditor.editor.element.AbstractSelection,{size:null,execute:function(){var d=this,e=window.getSelection(),a=e.getRangeAt(0),c={},f,b;if(a&&!a.collapsed){c.common=a.commonAncestorContainer.getElement();if(c.common.isTable||c.common.isTr){f=a.startContainer.viewportId;b=d.getSizeFromRange(a);if(b&&!d.sizeEquals(b,d.size)){d.size=b;c.table=c.common.isTable?c.common:c.common.parent;c.table.each(function(h,g){var j=g;h.each(function(m,l){var k=l;if(j>=b.lt[1]&&j<=b.rb[1]&&k>=b.lt[0]&&k<=b.rb[0]){m.selectNode(true,f)}else{m.selectNode(false,f)}})})}}}},isActive:function(){var a=this;return a.size?true:false},getSize:function(){return this.size},getSizeFromRange:function(a){var d=this,c={},b;c.start=a.startContainer.getElement();c.end=a.endContainer.getElement();c.startTd=c.start.getParentName("td");c.endTd=c.end.getParentName("td");b={lt:c.startTd.getPosition(),rb:c.endTd.getPosition()};return b},sizeEquals:function(c,a){var b;b=c&&a&&c.lt[0]===a.lt[0]&&c.lt[1]===a.lt[1]&&c.rb[0]===a.rb[0]&&c.rb[1]===a.rb[1];return b}},0,0,0,0,0,0,[FBEditor.editor.element.table,"TableSelection"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableElementController",FBEditor.editor.element.AbstractUnboundedElementController,{createFromRange:false},0,0,0,0,0,0,[FBEditor.editor.element.table,"TableElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.table.TableElementController",selectionClass:"FBEditor.editor.element.table.TableSelection",htmlTag:"table",xmlTag:"table",cls:"el-table",isTable:true,createScaffold:function(e){var f=this,d={},a;e=e||[0,0];for(var c=0;c<=e[1];c++){d.tr=FBEditor.editor.Factory.createElement("tr");for(var b=0;b<=e[0];b++){d.td=FBEditor.editor.Factory.createElement("td");d.p=FBEditor.editor.Factory.createElement("p");d.br=FBEditor.editor.Factory.createElement("br");d.p.add(d.br);d.td.add(d.p);d.tr.add(d.td);if(c===0&&b===0){a=d.p}}f.add(d.tr)}d.p=a;return d},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(d){Ext.Array.each(d.children,function(f){var e=a.createElement("p");Ext.Array.each(f.children,function(g){e.add(g)});b.add(e)})})}},0,0,0,0,0,0,[FBEditor.editor.element.table,"TableElement"],0));(Ext.cmd.derive("FBEditor.editor.element.td.TdElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.td,"TdElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.td.TdElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.td.TdElementController",htmlTag:"td",xmlTag:"td",cls:"el-td",showedOnTree:false,isTd:true,isCell:true,links:null,_sizeSelection:null,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.br=FBEditor.editor.Factory.createElement("br");a.p.add(a.br);b.add(a.p);return a},getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractElement.prototype.getXml.apply(this,arguments);a=a.replace(/<td( .*?)?><br\/?>/gi,"<td$1><p></p>");return a},getPosition:function(){var c=this,b=c.parent,a,d;a=b.getChildPosition(c);d=b.parent.getChildPosition(b);return[a,d]},setColSpan:function(d){var c=this,a=c.attributes,b=c.nodes;if(d&&d>1){a.colspan=d;Ext.Object.each(b,function(e,f){f.setAttribute("colspan",d)})}else{if(a.colspan){delete a.colspan;Ext.Object.each(b,function(e,f){f.removeAttribute("colspan")})}}c.attributes=a},setRowSpan:function(d){var c=this,a=c.attributes,b=c.nodes;if(d&&d>1){a.rowspan=d;Ext.Object.each(b,function(e,f){f.setAttribute("rowspan",d)})}else{if(a.rowspan){delete a.rowspan;Ext.Object.each(b,function(e,f){f.removeAttribute("rowspan")})}}c.attributes=a},addLinks:function(a){var b=this;b.links=b.links||[];b.links.push(a)},getLinks:function(){return this.links},removeLinks:function(){this.links=null}},0,0,0,0,0,0,[FBEditor.editor.element.td,"TdElement"],0));(Ext.cmd.derive("FBEditor.editor.command.title.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"title",createElement:function(e,c){var g=this,h=g.getData(),f=h.opts||{},b=h.range,d=FBEditor.editor.Manager,a=FBEditor.editor.Factory;e.node=a.createElement(g.elementName);if(f.body){e.parent=d.getContent();c.parent=e.parent.nodes[h.viewportId]}else{c.parent=c.node.parentNode;c.node=c.parent.getElement().hisName(e.node.getName())?c.parent:c.node;c.parent=c.node.parentNode}c.first=c.parent.firstChild;e.parent=c.parent.getElement();if(b.collapsed){e.p=a.createElement("p");e.t=a.createElementText("Заголовок");e.p.add(e.t);e.node.add(e.p)}c.node=e.node.getNode(h.viewportId);if(c.first){e.first=c.first.getElement();e.parent.insertBefore(e.node,e.first);c.parent.insertBefore(c.node,c.first)}else{e.parent.add(e.node);c.parent.appendChild(c.node)}if(!b.collapsed){c.p=b.start;e.p=c.p.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){c.p=e.isRoot?c.p.firstChild:c.p.parentNode;e.p=c.p?c.p.getElement():null}c.next=c.p.nextSibling;e.node.add(e.p);c.node.appendChild(c.p)}g.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c=FBEditor.editor.Manager,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}c.suspendEvent=true;b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.p,d.next);b.parent.insertBefore(b.p,b.next)}else{d.parent.add(d.p);b.parent.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);c.suspendEvent=false;b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return f}},0,0,0,0,0,0,[FBEditor.editor.command.title,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.title.TitleElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,b){var l=this,h={},d={},f=FBEditor.editor.Manager,m=f.getContent(),k,a,c,j,g;e=e||window.getSelection();j=e.getRangeAt(0);d.node=j.commonAncestorContainer;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();while(h.parent.isStyleHolder||h.parent.isStyleType){d.node=d.parent;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement()}if(b&&b.body){g=f.getNamesElements(m);c=m.getName()}else{g=l.getNameElementsVerify(d);c=h.parent.getName()}a=f.getSchema();k=a.verify(c,g)?d.node:false;return k}},0,0,0,0,0,0,[FBEditor.editor.element.title,"TitleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.title.TitleElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.title.TitleElementController",htmlTag:"header",xmlTag:"title",cls:"el-title",isTitle:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Заголовок");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.title,"TitleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.tr.TrElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.tr,"TrElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.tr.TrElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.tr.TrElementController",htmlTag:"tr",xmlTag:"tr",cls:"el-tr",showedOnTree:false,isTr:true,createScaffold:function(){var b=this,a={};a.td=FBEditor.editor.Factory.createElement("td");a.p=FBEditor.editor.Factory.createElement("p");a.br=FBEditor.editor.Factory.createElement("br");a.p.add(a.br);a.td.add(a.p);b.add(a.td);return a}},0,0,0,0,0,0,[FBEditor.editor.element.tr,"TrElement"],0));(Ext.cmd.derive("FBEditor.editor.command.ul.CreateCommand",FBEditor.editor.command.AbstractCreateLiHolderCommand,{elementName:"ul"},0,0,0,0,0,0,[FBEditor.editor.command.ul,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ul.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"ul"},0,0,0,0,0,0,[FBEditor.editor.command.ul,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.ul.UlElementController",FBEditor.editor.element.AbstractLiHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.ul,"UlElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ul.UlElement",FBEditor.editor.element.AbstractLiHolderElement,{controllerClass:"FBEditor.editor.element.ul.UlElementController",htmlTag:"ul",xmlTag:"ul",cls:"el-ul"},0,0,0,0,0,0,[FBEditor.editor.element.ul,"UlElement"],0));(Ext.cmd.derive("FBEditor.editor.command.text.ModifiedCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),k=false,b=window.getSelection(),a={},f={},c=FBEditor.editor.Manager,d,h;try{if(g.saveRange){c.setCursor(g.saveRange)}h=b.getRangeAt(0);d={start:h.startOffset,end:h.endOffset};g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,collapsed:h.collapsed,offset:d};a.node=h.startContainer;f.node=a.node.getElement();g.viewportId=a.node.viewportId;console.log("text",g.newValue,h);c.suspendEvent=true;g.oldValue=f.node.getText();f.node.setText(g.newValue);a.node.nodeValue=g.newValue;f.node.sync(g.viewportId);c.suspendEvent=false;c.setCursor({startNode:g.range.start,startOffset:d.start,focusElement:f.node});g.nodes=a;k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}return k},unExecute:function(){var k=this,f=k.getData(),j=false,a={},d={},c=FBEditor.editor.Manager,b,g,l;try{c.suspendEvent=true;g=f.range;a=f.nodes;a.parent=a.node.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.isRoot){a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}if(!d.parent||!d.parent.isRoot){b=window.getSelection();l=b.getRangeAt(0);a.node=l.startContainer}d.node=a.node.getElement();console.log("undo text",a,f);d.node.setText(f.oldValue);a.node.nodeValue=f.oldValue;d.node.sync(f.viewportId);c.suspendEvent=false;a.startCursor=f.isBackspace?g.offset.start+1:g.offset.start;f.saveRange={startNode:a.node,startOffset:a.startCursor,focusElement:d.node};c.setCursor(f.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command.text,"ModifiedCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.text.DeleteEmptyCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,b=window.getSelection(),a={},d={},c=FBEditor.editor.Manager,g;try{if(f.saveRange){c.setCursor(f.saveRange)}g=b.getRangeAt(0);f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};a.node=g.startContainer;d.node=a.node.getElement();f.viewportId=a.node.viewportId;console.log("del empty",g);c.suspendEvent=true;f.oldValue=d.node.getText();d.node.setText("");a.node.nodeValue="";a.empty=a.node;d.empty=a.empty.getElement();a.parentEmpty=a.empty.parentNode;d.parentEmpty=a.parentEmpty.getElement();if(d.parentEmpty.isEmpty()&&d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}a.cursorStart=0;if(!d.empty.isStyleHolder){while(d.parentEmpty.isEmpty()&&!d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}if(d.parentEmpty.isStyleHolder&&d.parentEmpty.isEmpty()){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}}if(!d.empty.isStyleHolder){a.next=a.empty.nextSibling;a.prev=a.empty.previousSibling;d.next=a.next?a.next.getElement():null;d.prev=a.prev?a.prev.getElement():null;d.parentEmpty.removeAll();a.parentEmpty.removeChild(a.parentEmpty.firstChild);a.cursor=a.next?c.getDeepFirst(a.next):c.getDeepLast(a.prev);a.cursorStart=a.next?0:(a.cursor&&a.cursor.nodeValue?a.cursor.nodeValue.length:0);if(d.next&&d.prev&&d.next.isText&&d.prev.isText){a.cursor=a.prev;a.cursorStart=a.prev.nodeValue.length;c.joinNode(a.next);a.needSplit=true}}if(d.parentEmpty.isEmpty()&&d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}if(d.empty.isStyleHolder&&d.empty.isEmpty()){d.newEmpty=c.createEmptyElement();a.newEmpty=d.newEmpty.getNode(f.viewportId);a.first=a.empty.firstChild;if(a.first){d.first=a.first.getElement();d.empty.replace(d.newEmpty,d.first);a.empty.replaceChild(a.newEmpty,a.first)}else{d.empty.add(d.newEmpty);a.empty.appendChild(a.newEmpty)}d.parentEmpty=d.empty;a.parentEmpty=a.empty;d.empty=d.first;a.cursor=a.newEmpty}d.parentEmpty.removeEmptyText();d.parentEmpty.sync(f.viewportId);c.suspendEvent=false;c.setCursor({startNode:a.cursor,startOffset:a.cursorStart});f.els=d;f.nodes=a;j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var k=this,f=k.getData(),j=false,a={},d={},c=FBEditor.editor.Manager,g=FBEditor.editor.Factory,b,l;try{c.suspendEvent=true;a=f.nodes;d=f.els;a.empty=d.empty.getNode(f.viewportId);console.log("undo del empty",a,d);if(a.newEmpty){d.parentEmpty.replace(d.empty,d.newEmpty);a.parentEmpty.replaceChild(a.empty,a.newEmpty)}else{if(a.needSplit){d.prevValue=d.prev.text.substring(0,a.cursorStart);d.prev.setText(d.prevValue);a.prev.nodeValue=d.prevValue;a.next=d.next.getNode(f.viewportId);a.nextNext=a.prev.nextSibling;if(a.nextNext){d.nextNext=a.nextNext.getElement();d.parentEmpty.insertBefore(d.next,d.nextNext);a.parentEmpty.insertBefore(a.next,a.nextNext)}else{d.parentEmpty.add(d.next);a.parentEmpty.appendChild(a.next)}}if(a.next){a.parent=a.next.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.isRoot){a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}if(!d.parent||!d.parent.isRoot){b=window.getSelection();l=b.getRangeAt(0);a.next=l.startContainer;d.next=a.next.getElement();a.parent=a.next.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.hisName(d.parentEmpty.xmlTag)){a.next=a.parent;d.next=d.parent;a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}a.parentEmpty=a.parent;d.parentEmpty=d.parent}d.parentEmpty.insertBefore(d.empty,d.next);a.parentEmpty.insertBefore(a.empty,a.next)}else{d.parentEmpty.add(d.empty);a.parentEmpty.appendChild(a.empty)}}a.deep=c.getDeepFirst(a.empty);d.deep=a.deep.getElement();if(d.deep.isText){d.deep.setText(f.oldValue);a.deep.nodeValue=f.oldValue;a.cursor=a.deep}else{d.text=g.createElementText(f.oldValue);a.text=d.text.getNode(f.viewportId);d.deep.add(d.text);a.deep.appendChild(a.text);a.cursor=a.text}d.parentEmpty.sync(f.viewportId);c.suspendEvent=false;f.saveRange={startNode:a.cursor,startOffset:f.isBackspace?1:0};c.setCursor(f.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return j}},0,0,0,0,0,0,[FBEditor.editor.command.text,"DeleteEmptyCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.text.TextElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownDelete:function(h){var c=this,b=c.getElement(),f=window.getSelection(),d,g,a;h.preventDefault();a=f.getRangeAt(0);g=b.text.substring(0,a.startOffset)+b.text.substring(a.startOffset+1);if(g){d=Ext.create("FBEditor.editor.command.text.ModifiedCommand",{newValue:g})}else{d=Ext.create("FBEditor.editor.command.text.DeleteEmptyCommand")}if(d.execute()){FBEditor.editor.HistoryManager.add(d)}},onKeyDownBackspace:function(h){var c=this,b=c.getElement(),f=window.getSelection(),d,g,a;h.preventDefault();a=f.getRangeAt(0);g=b.text.substring(0,a.startOffset)+b.text.substring(a.startOffset+1);if(g){d=Ext.create("FBEditor.editor.command.text.ModifiedCommand",{newValue:g,isBackspace:true})}else{d=Ext.create("FBEditor.editor.command.text.DeleteEmptyCommand",{isBackspace:true})}if(d.execute()){FBEditor.editor.HistoryManager.add(d)}},onPaste:function(c){var b=this,a=b.getElement();a.parent.fireEvent("paste",c)}},0,0,0,0,0,0,[FBEditor.editor.element.text,"TextElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.text.TextElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.text.TextElementController",showedOnTree:false,text:"",isText:true,constructor:function(b){var a=this;a.elementId=Ext.id({prefix:a.prefixId});a.mixins.observable.constructor.call(a,{});a.text=Ext.isString(b)?b:a.text;a.permit=a.permit?Ext.applyIf(a.permit,a.permitDefault):a.permitDefault;a.createController();a.text=a.text.replace(/&lt;/g,"<");a.text=a.text.replace(/&gt;/g,">");a.text=a.text.replace(/&nbsp;/g," ")},getNode:function(c){var b=this,a;a=b.createNode(c);return a},getXml:function(a){var b=this,c;c=a?"":b.text;c=c.replace(/</g,"&#60;");c=c.replace(/>/g,"&#62;");c=c.replace(/[ ]{2}/g,"  &#160;");c=c.replace(/^ | $/g," &#160;");return c},setText:function(a){this.text=a},getText:function(){return this.text},createNode:function(c){var b=this,a;a=document.createTextNode(b.text);a.viewportId=c;b.setNode(a);return a},isEmpty:function(){return this.text?false:true}},1,0,0,0,0,0,[FBEditor.editor.element.text,"TextElement"],0));(Ext.cmd.derive("FBEditor.editor.element.u.UElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.underline.UnderlineElement")}},1,0,0,0,0,0,[FBEditor.editor.element.u,"UElement"],0));(Ext.cmd.derive("FBEditor.editor.element.undefined.UndefinedElement",FBEditor.editor.element.AbstractElement,{htmlTag:"undefined",xmlTag:"undefined",cls:"el-undefined",realName:"",isUndefined:true,constructor:function(b,a,c){var d=this,e;d.realName=b;e=b;d.htmlTag=e;d.xmlTag=e;FBEditor.editor.element.AbstractElement.prototype.constructor.call(this,a,c)},convertToText:function(a){}},1,0,0,0,0,0,[FBEditor.editor.element.undefined,"UndefinedElement"],0));(Ext.cmd.derive("FBEditor.editor.element.underline.UnderlineElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.underline,"UnderlineElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.underline.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"underline"},0,0,0,0,0,0,[FBEditor.editor.command.underline,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.underline.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"underline"},0,0,0,0,0,0,[FBEditor.editor.command.underline,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.underline.UnderlineElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.underline.UnderlineElementController",htmlTag:"underline",xmlTag:"underline",cls:"el-underline"},0,0,0,0,0,0,[FBEditor.editor.element.underline,"UnderlineElement"],0));(Ext.cmd.derive("FBEditor.editor.Factory",Ext.Base,{singleton:"true",createElement:function(c,a,d){var h=c.toLowerCase(),b,f;if(Ext.isEmpty(h)){throw Error("Невозможно создать элемент. Передано пустое назавние элемента.")}try{h=h.replace(/-([a-z])/g,"$1");h=h+"."+Ext.String.capitalize(h);b="FBEditor.editor.element."+h+"Element";a=a||{};d=d||[];f=Ext.create(b,a,d)}catch(g){f=Ext.create("FBEditor.editor.element.undefined.UndefinedElement",c,a,d);Ext.log({level:"warn",msg:"Неопределенный элемент: "+b,dump:g})}return f},createElementText:function(c){var a;c=Ext.isString(c)?c:"";try{a=Ext.create("FBEditor.editor.element.text.TextElement",c)}catch(b){throw Error("Невозможно создать текстовый элемент: "+c)}return a}},0,0,0,0,0,0,[FBEditor.editor,"Factory"],0));(Ext.cmd.derive("FBEditor.editor.HistoryManager",Ext.Base,{singleton:"true",data:[],pos:-1,clear:function(){var a=this;a.data=[];a.pos=-1},add:function(c){var a=this,b=a.data;a.clearAfterCurrent();b.push(c);a.pos++},remove:function(){var a=this,b=a.data;console.log("remove cmd");if(a.pos!==-1){b.splice(a.pos,1);a.pos--}},removeNext:function(){var a=this,b=a.data;console.log("remove next cmd");if(a.pos+1<b.length){b.splice(a.pos+1,1)}},undo:function(){var a=this,b;b=a.getCurrentCmd();if(b&&b.unExecute()){a.pos--}},redo:function(){var a=this,b;b=a.getNextCmd();if(b&&b.execute()){a.pos++}},getCurrentCmd:function(){var a=this,c=a.data,b;b=a.pos!==-1?c.slice(a.pos,a.pos+1)[0]:null;return b},getNextCmd:function(){var a=this,c=a.data,b;b=a.pos+1<c.length?c.slice(a.pos+1,a.pos+2)[0]:null;return b},clearAfterCurrent:function(){var a=this,b=a.data;if((a.pos+1)<b.length){b.splice(a.pos+1)}}},0,0,0,0,0,0,[FBEditor.editor,"HistoryManager"],0));(Ext.cmd.derive("FBEditor.editor.Manager",Ext.Base,{singleton:"true",selectCls:"mode-select",schema:null,content:null,selection:null,range:null,suspendEvent:false,processSyncButtons:false,buttons:[],emptyElement:"br",focusElement:null,stateExpandedNodesTree:{},cashSyncBtn:null,init:function(){var a=this;a.schema=Ext.create("FBEditor.editor.schema.Schema")},getContent:function(){return this.content},getFactory:function(){return FBEditor.editor.Factory},createContent:function(content){var me=this,ce,ct;ce=function(el,attr,ch){return FBEditor.editor.Factory.createElement(el,attr,ch)};ct=function(text){return FBEditor.editor.Factory.createElementText(text)};FBEditor.editor.HistoryManager.clear();content=content.replace(/\n+|\t+/g," ");content=content.replace(/\), ?]/g,")]");content=content.replace(/<br\/>/gi,"<p><br/></p>");eval("me.content = "+content);Ext.getCmp("main-editor").fireEvent("loadData");me.updateTree()},getNode:function(d){var c=this,b=c.content,a;FBEditor.editor.Manager.suspendEvent=true;a=b.getNode(d);FBEditor.editor.Manager.suspendEvent=false;return a},getXml:function(){var c=this,b=c.content,a;console.log("content",b);a=b.getXml();a='<?xml version="1.0" encoding="UTF-8"?>'+a;console.log(a);return a},createRootElement:function(){var c=this,b=c.getFactory(),a;a=b.createElement("fb3-body");c.content=a;return a},setFocusElement:function(h,g){var c=this,f=FBEditor.getBridgeProps(),b,e,a,d;b=h.getElement?h.getElement():h;c.focusElement=b;c.selection=g||window.getSelection();a=c.selection.rangeCount?c.selection.getRangeAt(0):null;if(a){d=c.range?c.range.collapsed!==a.collapsed:true;c.range={collapsed:a.collapsed,common:a.commonAncestorContainer,start:a.startContainer,end:a.endContainer,offset:{start:a.startOffset,end:a.endOffset},toString:function(){return a.toString()}}}else{d=true;c.range={collapsed:true,common:h,start:h,end:h,offset:{start:0,end:0},toString:function(){return""}}}if(!b.isText&&c.cashSyncBtn!==b.elementId||d){c.cashSyncBtn=b.elementId;c.syncButtons()}e=b.getData();f.Ext.getCmp("panel-props-body").fireEvent("loadData",e)},resetFocus:function(){var a=this;a.focusElement=null;a.range=null;a.selection=null},setCursor:function(c){var a=this,b=window.getSelection(),d;c.focusElement=c.focusElement||c.startNode.getElement();c.startOffset=c.startOffset||0;c.startOffset=c.startOffset>c.startNode.length?c.startNode.length:c.startOffset;d=c.startNode.viewportId;a.content.nodes[d].focus();if(c.focusElement.nodes[d].scrollIntoView){}if(c.startNode.getElement().isText){b.collapse(c.startNode,c.startOffset)}else{b.collapse(c.startNode,0)}if(c.endNode){c.endOffset=c.endOffset||0;b.extend(c.endNode,c.endOffset)}a.setFocusElement(c.focusElement,b)},getFocusElement:function(){return this.focusElement},syncButtons:function(){var a=this;a.panelToolstab=a.panelToolstab||Ext.getCmp("panel-toolstab-main");a.panelToolstab.fireEvent("syncButtons")},removeNodes:function(c){var b=this,a=b.content;a.removeNodes(c)},createElement:function(b,e){var d=this,a=d.getFactory(),c,f;f=d.getSelection();c=a.createElement(b);c.fireEvent("createElement",f,e)},deleteWrapper:function(a,b){var c;c=Ext.create("FBEditor.editor.command."+a+".DeleteWrapperCommand",{opts:b});if(c.execute()){FBEditor.editor.HistoryManager.add(c)}},getSelection:function(){return this.selection},getRange:function(){return this.range},getSchema:function(){return this.schema},updateTree:function(){var a=this,b=FBEditor.getBridgeNavigation();if(b.Ext&&b.Ext.getCmp&&b.Ext.getCmp("panel-body-navigation")){b.Ext.getCmp("panel-body-navigation").loadData(a.content)}else{Ext.defer(function(){a.updateTree()},200)}},getElementById:function(d,b){var c=this,a=null;b=b||c.getContent();if(b.elementId===d){return b}Ext.Array.each(b.children,function(e){a=c.getElementById(d,e);if(a){return false}});return a},getNamesElements:function(b){var a=[];Ext.Array.each(b.children,function(c){if(!c.isText){a.push(c.getName())}});return a},createEmptyElement:function(){var b=this,a;a=b.getFactory().createElement(b.emptyElement);return a},createEmptyP:function(){var c=this,b={},a=c.getFactory();b.empty=a.createElement(c.emptyElement);b.p=a.createElement("p");b.p.add(b.empty);return b.p},splitNode:function(c,b,f){var d=this,a=d.getFactory(),e;b.parentContainer=b.container.parentNode;e=b.parentContainer.viewportId;c.parentContainer=b.parentContainer.getElement();c.container=b.container.getElement();if(c.parentContainer.elementId===c.common.elementId&&c.container.isText){b.next=b.container.nextSibling;c.endTextValue=b.container.nodeValue.substring(f);c.startTextValue=b.container.nodeValue.substring(0,f);if(c.startTextValue){b.container.nodeValue=c.startTextValue;c.container.setText(c.startTextValue)}if(c.startTextValue&&c.endTextValue.trim()){c.container=a.createElementText(c.endTextValue);b.container=c.container.getNode(e);if(b.next){c.next=b.next.getElement();c.parentContainer.insertBefore(c.container,c.next);b.parentContainer.insertBefore(b.container,b.next)}else{c.parentContainer.add(c.container);b.parentContainer.appendChild(b.container)}}}else{while(c.parentContainer.elementId!==c.common.elementId){b.next=b.parentContainer.nextSibling;b.parent=b.parentContainer.parentNode;c.parent=b.parent.getElement();b.nextContainer=b.container.nextSibling;c.cloneContainer=c.parentContainer.clone({ignoredDeep:true});if(c.container.isText){c.endTextValue=b.container.nodeValue.substring(f);c.startTextValue=b.container.nodeValue.substring(0,f);if(!c.startTextValue){c.parentContainer.remove(c.container);b.parentContainer.removeChild(b.container)}else{b.container.nodeValue=c.startTextValue;c.container.setText(c.startTextValue)}if(c.endTextValue.trim()){c.t=a.createElementText(c.endTextValue);c.cloneContainer.add(c.t)}b.cloneContainer=c.cloneContainer.getNode(e);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.cloneContainer,c.next);b.parent.insertBefore(b.cloneContainer,b.next)}else{c.parent.add(c.cloneContainer);b.parent.appendChild(b.cloneContainer)}}else{b.cloneContainer=c.cloneContainer.getNode(e);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.cloneContainer,c.next);b.parent.insertBefore(b.cloneContainer,b.next)}else{c.parent.add(c.cloneContainer);b.parent.appendChild(b.cloneContainer)}if(b.container.firstChild){c.cloneContainer.add(c.container);b.cloneContainer.appendChild(b.container)}else{b.parentContainer.removeChild(b.container)}c.parentContainer.remove(c.container)}b.parent=b.cloneContainer;c.parent=b.parent.getElement();while(b.nextContainer){c.nextContainer=b.nextContainer.getElement();b.buf=b.nextContainer.nextSibling;c.parent.add(c.nextContainer);b.parent.appendChild(b.nextContainer);c.parentContainer.remove(c.nextContainer);b.nextContainer=b.buf}b.container=b.cloneContainer;c.container=b.container.getElement();if(!b.parentContainer.firstChild){b.parentContainer.parentNode.getElement().remove(c.parentContainer);b.parentContainer.parentNode.removeChild(b.parentContainer)}b.parentContainer=b.container.parentNode;c.parentContainer=b.parentContainer.getElement()}}return b.container},joinNode:function(d){var c=this,a={},b={};a.node=d;b.node=d.getElement();a.prev=d.previousSibling;b.prev=a.prev.getElement();if(b.node.isText&&b.prev.isText){b.text=b.prev.text+b.node.text;b.prev.setText(b.text);a.prev.nodeValue=b.text}else{a.first=a.node.firstChild;b.first=a.first?a.first.getElement():null;a.prevLast=a.prev;b.prevLast=b.prev;a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null;while(b.first&&b.last){a.firstChild=a.first.firstChild;a.next=a.first;if(b.last.isText&&!b.first.isText){while(a.next){a.buf=a.next.nextSibling;b.next=a.next.getElement();b.prevLast.add(b.next);a.next.parentNode.getElement().remove(b.next);a.prevLast.appendChild(a.next);a.next=a.buf}}else{while(a.next){a.buf=a.next.nextSibling;b.next=a.next.getElement();if(b.last&&b.last.isText&&b.next.isText){b.nodeValue=a.last.nodeValue+a.next.nodeValue;a.last.nodeValue=b.nodeValue;b.last.setText(b.nodeValue)}else{b.prevLast.add(b.next);a.prevLast.appendChild(a.next);if(b.last.isText){a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null}}a.next=a.buf}if(b.last.isText){a.first.parentNode.getElement().remove(b.first);a.first.parentNode.removeChild(a.first)}}if(a.prevLast.firstChild.getElement().isEmpty()){b.prevLast.remove(a.prevLast.firstChild.getElement());a.prevLast.removeChild(a.prevLast.firstChild)}a.first=a.firstChild;b.first=a.first?a.first.getElement():null;a.prevLast=a.last;b.prevLast=b.last;a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null}}a.node.parentNode.getElement().remove(b.node);a.node.parentNode.removeChild(a.node)},isFirstNode:function(c,d){var a={},b={};b.common=c.getElement();a.node=d;b.node=a.node.getElement();do{a.parent=a.node.parentNode;b.parent=a.parent.getElement();a.parentParent=a.parent.parentNode;b.parentParent=a.parentParent.getElement();a.first=a.parent.firstChild;b.first=a.first.getElement();if(b.first.elementId!==b.node.elementId){return false}a.node=a.parent;b.node=a.node.getElement()}while(b.parentParent.elementId!==b.common.elementId&&b.parent.elementId!==b.common.elementId&&!b.parentParent.isRoot);return true},isLastNode:function(c,d){var a={},b={};b.common=c.getElement();a.node=d;b.node=a.node.getElement();do{a.parent=a.node.parentNode;b.parent=a.parent.getElement();a.parentParent=a.parent.parentNode;b.parentParent=a.parentParent.getElement();a.last=a.parent.lastChild;b.last=a.last.getElement();if(b.last.elementId!==b.node.elementId){return false}a.node=a.parent;b.node=a.node.getElement()}while(b.parentParent.elementId!==b.common.elementId&&b.parent.elementId!==b.common.elementId&&!b.parentParent.isRoot);return true},getNodesPP:function(f,b,c){var d=this,a=[],e=[];if(!f){return a}c.cur=f.getElement();if(c.cur.elementId===c.lastP.elementId){b.ppStop=true;return a}if(!c.cur.isStyleHolder){b.first=f.firstChild;c.first=b.first?b.first.getElement():null;if(c.first&&!c.first.isText){e=d.getNodesPP(b.first,b,c);Ext.Array.push(a,e)}}else{a=[f]}if(f.nextSibling&&!b.ppStop){f=f.nextSibling;e=d.getNodesPP(f,b,c);Ext.Array.push(a,e)}if(!b.ppStop){b.parent=f.parentNode;c.parent=b.parent.getElement();while(!b.parent.nextSibling&&c.parent.elementId!==c.common.elementId){b.parent=b.parent.parentNode;c.parent=b.parent.getElement()}b.parentNext=b.parent.nextSibling;if(b.parentNext&&c.parent.elementId!==c.common.elementId){e=d.getNodesPP(b.parentNext,b,c);Ext.Array.push(a,e)}}return a},getDeepFirst:function(a){if(a){while(a.firstChild){a=a.firstChild}}return a},getDeepLast:function(a){if(a){while(a.lastChild){a=a.lastChild}}return a},createElementFromNode:function(g){var f=this,b=f.getFactory(),a={},c=g.nodeName.toLowerCase(),e=f.getSchema(),h,d;if(g.nodeType===Node.TEXT_NODE){h=g.nodeValue.trim();if(h&&!/^\n+$/.test(h)){d=b.createElementText(g.nodeValue)}}else{if(e.elements[c]){Ext.Array.each(g.attributes,function(j){if(Ext.isObject(e.elements[c].attributes[j.name])||Ext.Array.contains(["href"],j.name)&&e.elements[c].attributes["xlink:href"]){a[j.name]=j.value}})}d=b.createElement(c,a);Ext.Array.each(g.childNodes,function(k){var j;j=f.createElementFromNode(k);if(j){d.add(j)}})}return d},removeEmptyNodes:function(c){var b=this,e=0,a,d;a=c.getElement();while(e<a.children.length){d=a.children[e];if(d.isEmpty()){a.remove(d);c.removeChild(d.nodes[c.viewportId])}else{if(d.children.length){b.removeEmptyNodes(d.nodes[c.viewportId])}e++}}},clearSelectNodes:function(c){var b=this,a;a=document.querySelectorAll("."+b.selectCls);Ext.Array.each(a,function(e){var d=e.getElement();d.selectNode(false,c)})},checkSelectNodes:function(){var b=this,a;a=document.querySelectorAll("."+b.selectCls);if(a.length){window.getSelection().removeAllRanges()}}},0,0,0,0,0,0,[FBEditor.editor,"Manager"],0));(Ext.cmd.derive("FBEditor.file.File",Ext.Base,{LOAD_TYPE_TEXT:"text",LOAD_TYPE_ARRAYBUFFER:"arraybuffer",file:null,fileReader:null,constructor:function(b){var c=this,a;c.file=b;a=new FileReader();a.file=b;c.fileReader=a},read:function(g){var f=this,a=true,b=f.fileReader,c=f.file,d=g.type?g.type:f.LOAD_TYPE_TEXT,e;if(d===f.LOAD_TYPE_TEXT){e=f.getEncode();b.readAsText(c,e)}else{if(d===f.LOAD_TYPE_ARRAYBUFFER){b.readAsArrayBuffer(c)}else{a=false}}b.onload=g.load?function(){g.load(this.result)}:null;return a},getEncode:function(){var a;a="windows-1251";return a}},1,0,0,0,0,0,[FBEditor.file,"File"],0));(Ext.cmd.derive("FBEditor.file.Zip",Ext.Base,{zip:null,constructor:function(){var a=this;a.zip=new JSZip()},unPackage:function(d){var c=this,b=c.zip,a;a=b.load(d);return a},getFiles:function(){var b=this,a=b.zip;return a.files},generateBlob:function(){var b=this,a=b.zip;return a.generate({type:"blob"})},file:function(b,e,a){var d=this,c=d.zip;c.file(b,e,a)},remove:function(a){var c=this,b=c.zip;b.remove(a)}},1,0,0,0,0,0,[FBEditor.file,"Zip"],0));(Ext.cmd.derive("FBEditor.FB3.File",Ext.Base,{files:null,structure:null,zip:null,data:null,constructor:function(b){var a=this;a.zip=Ext.create("FBEditor.file.Zip");a.data=b},getStructure:function(){var c=this,b=c.zip,d=c.data.content,a=c.structure;if(!a){b.unPackage(d);c.setFiles();a=Ext.create("FBEditor.FB3.Structure",c);c.structure=a.load()}return a},updateStructure:function(d){var c=this,a=c.structure,e,b;a.setThumb(d.thumb);a.setMeta(d.meta);e=a.getBooks();Ext.Object.each(d.books,function(f,g){a.setDesc(e[f],g.desc);b=a.getBodies(e[f]);Ext.each(g.bodies,function(j,h){a.setContent(b[h],j.content);a.setImages(b[h],j.images)})})},createStructure:function(){var b=this,a;a=Ext.create("FBEditor.FB3.Structure",b);b.structure=a.create();b.updateStructure(b.data)},getFiles:function(b){var c=this,a=null;if(c.files){a=b?c.files[b]:c.files;a=a||null;if(!a){Ext.log({level:"warn",msg:"В архиве отсутствует файл "+b+", на который ссылается один из существующих файлов",dump:c.files})}}return a},getName:function(){var b=this,c=b.data,d=FBEditor.file.Manager.defaultFb3FileName,a;a=c.file?c.file.name.replace(/(\.fb3\.zip)$/,""):d;return a},setFiles:function(){var b=this,a=b.zip;b.files=a.getFiles()},generateBlob:function(){var b=this,a=b.zip;return a.generateBlob()}},1,0,0,0,0,0,[FBEditor.FB3,"File"],0));(Ext.cmd.derive("FBEditor.FB3.InterfaceStructure",Ext.Base,{getContentTypes:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getContentTypes")},getThumb:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getThumb")},getMeta:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getMeta")},getBooks:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getBooks")},getDesc:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getDesc")},getBodies:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getBodies")},getContent:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getContent")},getImages:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getImages")},setThumb:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#setThumb")},setMeta:function(){throw Error("Не реализован метод FB3.InterfaceStructure#setMeta")},setDesc:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setDesc")},setContent:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setContent")},setImages:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setImages")}},0,0,0,0,0,0,[FBEditor.FB3,"InterfaceStructure"],0));(Ext.cmd.derive("FBEditor.FB3.rels.AbstractRels",Ext.Base,{defaultContent:"",prefix:"",rels:null,file:null,structure:null,fileName:null,relsName:null,parentDir:null,parentRelsDir:null,blob:null,constructor:function(a,e,b){var c=this,d=a.getFb3file();if(!d.getFiles(e)){c.create(a,e)}c.structure=a;c.fileName=e;c.parentRelsDir=b?b:null;c.relsName=c.getRelsName();c.file=c.structure.getFb3file().getFiles(e);c.prefix=FBEditor.util.xml.Json.prefix;c.rels=c.getRels();c.blob=new Blob([c.file.asArrayBuffer()],{type:c.parseMimeType()})},create:function(a,e){var c=this,d=a.getFb3file(),b;b=d.zip;b.file(e,c.defaultContent);d.setFiles()},getRels:function(){throw Error("Не реализован метод FB3.rels.AbstractRels#getRels")},getStructure:function(){var a=this;return a.structure},getFileName:function(){var a=this;return a.fileName},getBaseFileName:function(){var b=this,c=b.fileName,a;a=c.replace(/.*\/(.*?\.\w+)$/,"$1");return a},getExtension:function(){var b=this,c=b.fileName,a;a=c.replace(/.*\/.*?\.(\w+)$/,"$1");return a},getDate:function(){var b=this,a;a=b.file.date;return a},getRelsName:function(){var d=this,e=d.getFileName(),c,b,a=d.relsName;if(!a){e=e.split("/");b=e.pop();c=e.join("/");d.parentDir=c;a=c+"/_rels/"+b+".rels"}return a},getParentDir:function(){var a=this;return a.parentDir},getParentRelsDir:function(){var a=this;return a.parentRelsDir},getJson:function(){var b=this,c=b.getText(),a;a=FBEditor.util.xml.Json.xmlToJson(c);return a},getText:function(){var b=this,a=b.file;return a.asText()},getArrayBuffer:function(){return this.file.asArrayBuffer()},getUrl:function(){var c=this,a=c.blob,b;b=window.URL.createObjectURL(a);return b},getSize:function(){return this.blob.size},getType:function(){return this.blob.type},setFileContent:function(d){var b=this,c=b.structure.fb3file,e=b.fileName,a;a=c.zip;a.file(e,d)},moveTo:function(d){var c=this,f=c.structure.fb3file,g=c.fileName,b,e,a;a=f.zip;b=d+"/"+c.getBaseFileName();e=c.file.asArrayBuffer();a.file(b,e);a.remove(g);c.fileName=b},parseMimeType:function(){var b=this,a="";a=/\.svg$/.test(b.fileName)?"image/svg+xml":a;a=/\.png$/.test(b.fileName)?"image/png":a;a=/\.jpg$/.test(b.fileName)?"image/jpeg":a;a=/\.gif$/.test(b.fileName)?"image/gif":a;return a}},1,0,0,0,0,0,[FBEditor.FB3.rels,"AbstractRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.ContentTypes",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="png" ContentType="image/png"/><Default Extension="jpg" ContentType="image/jpeg"/><Default Extension="gif" ContentType="image/gif"/><Default Extension="svg" ContentType="image/svg+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/meta/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/fb3/description.xml" ContentType="application/fb3-description+xml"/><Override PartName="/fb3/body.xml" ContentType="application/fb3-body+xml"/></Types>',getRels:function(){return null},getContent:function(){var a=this;return a.getJson().Types}},0,0,0,0,0,0,[FBEditor.FB3.rels,"ContentTypes"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Image",FBEditor.FB3.rels.AbstractRels,{isCover:false,id:null,getRels:function(){return null},getIsCover:function(){return this.isCover},getId:function(){return this.id},setId:function(a){this.id=a}},0,0,0,0,0,0,[FBEditor.FB3.rels,"Image"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Thumb",FBEditor.FB3.rels.Image,{isCover:true,getRels:function(){return null}},0,0,0,0,0,0,[FBEditor.FB3.rels,"Thumb"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Meta",FBEditor.FB3.rels.AbstractRels,{getRels:function(){return null},getContent:function(){var a=this;return a.getJson().coreProperties},setContent:function(b){var a=this;a.setFileContent(b)}},0,0,0,0,0,0,[FBEditor.FB3.rels,"Meta"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Book",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8"?><fb3-description xmlns="http://www.fictionbook.org/FictionBook3/description" id="29f8c76a-141c-102c-a3bc-9f4786c95f7d" version="1.0"></fb3-description>',desc:null,constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments);a.desc=a.getDesc()},getRels:function(){var d=this,c=d.rels,a=d.getRelsName(),b=d.getParentDir();if(!c){c=Ext.create("FBEditor.FB3.rels.BookRels",d.getStructure(),a,b)}return c},getDesc:function(){var a=this,b=a.desc;if(!b){b=a.getText()}return b},setDesc:function(b){var a=this;a.setFileContent(b)}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Book"],0));(Ext.cmd.derive("FBEditor.FB3.rels.BookRels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://www.fictionbook.org/FictionBook3/relationships/body" Target="body.xml"/></Relationships>',bodies:null,getRels:function(){var c=this,a=c.rels,b;if(!a){b=c.getJson();a=b.Relationships.Relationship;a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,c.prefix+"Type",2)}return a},getBodies:function(){var d=this,a=d.bodies,c=d.getParentRelsDir(),b;if(!a){b=d.getRels();a=b[FBEditor.FB3.rels.RelType.body];a=Ext.isArray(a)?a:[a];Ext.each(a,function(g,e,h){var f=g[d.prefix+"Target"],j;j=f.substring(0,1)!=="/"?c+"/"+f:f.substring(1);h[e]=Ext.create("FBEditor.FB3.rels.Body",d.getStructure(),j)})}return a}},0,0,0,0,0,0,[FBEditor.FB3.rels,"BookRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Body",FBEditor.FB3.rels.AbstractRels,{constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments)},getRels:function(){var d=this,c=d.rels,a=d.getRelsName(),b=d.getParentDir();if(!c){c=Ext.create("FBEditor.FB3.rels.BodyRels",d.getStructure(),a,b)}return c},getContent:function(){var a=this;return a.getText()},setContent:function(b){var a=this;a.setFileContent(b)},setImages:function(f){var d=this,b=d.getRels(),a=d.getStructure(),e,c;e=a.getFb3file();c=e.zip;c.remove("fb3/img");Ext.each(f,function(g){c.file(g.rootName,g.content,{createFolders:true})});b.setContent(f)}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Body"],0));(Ext.cmd.derive("FBEditor.FB3.rels.BodyRels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"></Relationships>',images:null,getRels:function(){var c=this,a=c.rels,b;if(!a){b=c.getJson();a=b.Relationships.Relationship||null;if(a){a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,c.prefix+"Type",2)}}return a},getImages:function(){var d=this,a=d.images,c=d.getParentRelsDir(),b=d.getRels();if(!a&&b){a=b[FBEditor.FB3.rels.RelType.image];a=Ext.isArray(a)?a:[a];Ext.each(a,function(g,e,h){var k=g[d.prefix+"Id"],f=g[d.prefix+"Target"],j;j=f.substring(0,1)!=="/"?c+"/"+f:f.substring(1);h[e]=Ext.create("FBEditor.FB3.rels.Image",d.getStructure(),j);h[e].setId(k)})}return a},setContent:function(c){var b=this,a='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';Ext.each(c,function(e){var d='<Relationship Id="{%s}" Type="http://www.fictionbook.org/FictionBook3/relationships/image" Target="img/{%s}"/>';d=d.replace(/{%s}/g,e.name);a+=d});a+="</Relationships>";b.setFileContent(a)}},0,0,0,0,0,0,[FBEditor.FB3.rels,"BodyRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Rels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId0" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail" Target="cover.jpg"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="meta/core.xml"/><Relationship Id="rId2" Type="http://www.fictionbook.org/FictionBook3/relationships/Book" Target="fb3/description.xml"/></Relationships>',thumb:null,meta:null,books:null,constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments);a.books=a.getBooks()},create:function(a,e){var c=this,d=a.getFb3file(),b;b=d.zip;b.file("meta/core.xml");b.file("fb3/body.xml");FBEditor.FB3.rels.AbstractRels.prototype.create.apply(this,arguments)},getRels:function(){var c=this,a=c.rels,b;if(!a){b=c.getJson();a=b.Relationships.Relationship;a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,c.prefix+"Type",2)}return a},getBooks:function(b){var c=this,d=c.books,a;if(!d){a=c.getRels();d=a[FBEditor.FB3.rels.RelType.book];d=Ext.isArray(d)?d:[d];Ext.each(d,function(h,f,e){var g=h[c.prefix+"Target"];g=g.replace(/^[/]/,"");e[f]=Ext.create("FBEditor.FB3.rels.Book",c.getStructure(),g)})}d=Ext.isNumeric(b)?d[b]:d;return d},getThumb:function(){var c=this,a=c.thumb,b;if(!a){b=c.getRels();a=b[FBEditor.FB3.rels.RelType.thumbnail];a=Ext.create("FBEditor.FB3.rels.Thumb",c.getStructure(),a[c.prefix+"Target"])}return a},getMeta:function(){var b=this,c=b.meta,a;if(!c){a=b.getRels();c=a[FBEditor.FB3.rels.RelType.coreProperties];c=Ext.create("FBEditor.FB3.rels.Meta",b.getStructure(),c[b.prefix+"Target"])}return c},setThumb:function(c){var b=this,a=b.getText(),d;d=c.rootName;a=a.replace(/thumbnail" Target="(.*?)"/,'thumbnail" Target="'+d+'"');b.setFileContent(a);console.log("save thumb",c,a)}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Rels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.RelType",Ext.Base,{singleton:true,book:"http://www.fictionbook.org/FictionBook3/relationships/Book",body:"http://www.fictionbook.org/FictionBook3/relationships/body",image:"http://www.fictionbook.org/FictionBook3/relationships/image",coreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",thumbnail:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail",digitalSignature:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/signature",digitalSignatureCertificate:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/certificate",digitalSignatureOrigin:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/origin"},0,0,0,0,0,0,[FBEditor.FB3.rels,"RelType"],0));(Ext.cmd.derive("FBEditor.util.xml.Json",Ext.Base,{singleton:true,prefix:"_",x2js:null,xmlToJson:function(c){var a=this,b=a.x2js||a.createX2Js();return b.xml_str2json(c)},jsonToXml:function(a){var b=this,c=b.x2js||b.createX2Js();return c.json2xml_str(a)},createX2Js:function(){var a=this,b=a.prefix?a.prefix:" ",c;c=new X2JS({attributePrefix:b,escapeMode:false});a.x2js=c;return c}},0,0,0,0,0,0,[FBEditor.util.xml,"Json"],0));(Ext.cmd.derive("FBEditor.FB3.Structure",FBEditor.FB3.InterfaceStructure,{contentTypes:{file:"[Content_Types].xml",rel:null},rels:{file:"_rels/.rels",rel:null},fb3file:null,constructor:function(b){var a=this;a.fb3file=b},create:function(){var c=this,b=c.rels,a=c.contentTypes;a.rel=Ext.create("FBEditor.FB3.rels.ContentTypes",c,a.file);b.rel=Ext.create("FBEditor.FB3.rels.Rels",c,b.file);return c},load:function(){var a=this;if(a.valid()){a.create()}else{throw Error("Ошибка структуры архива")}return a},getContentTypes:function(){var a=this;return a.contentTypes.rel.getContent()},getThumb:function(){var a=this;return a.getRels().getThumb()},getMeta:function(){var a=this;return a.getRels().getMeta().getContent()},getBooks:function(){var a=this;return a.getRels().getBooks()},getDesc:function(a){return a.getDesc()},getBodies:function(a){return a.getRels().getBodies()},getContent:function(a){return a.getContent()},getImages:function(a){return a.getRels().getImages()},setThumb:function(b){var a=this;a.getRels().setThumb(b)},setMeta:function(b){var a=this;a.getRels().getMeta().setContent(b)},setDesc:function(a,b){a.setDesc(b)},setContent:function(a,b){a.setContent(b)},setImages:function(a,b){a.setImages(b)},getFb3file:function(){var a=this;return a.fb3file},getRels:function(){var a=this;return a.rels.rel},valid:function(){var d=this,c=d.getFb3file().getFiles(),b=[d.contentTypes.file,d.rels.file],e=Ext.Object.getKeys(c),a=true;Ext.Object.each(b,function(f,g){if(!Ext.Array.contains(e,g)){a=false;return false}});return a}},1,0,0,0,0,0,[FBEditor.FB3,"Structure"],0));(Ext.cmd.derive("FBEditor.converter.AbstractConverter",Ext.Base,{normalize:function(c){var a=this,b=FBEditor.util.xml.Json.prefix,e;delete c[b+"id"];delete c[b+"version"];delete c[b+"xmlns"];e=a._normalize(c);return e},_normalize:function(e){var b=this,c=FBEditor.util.xml.Json.prefix,f={},a;a=new RegExp("^("+c+")+");Ext.Object.each(e,function(g,h){var d;d=g.replace(a,"");if(Ext.isObject(h)||Ext.isArray(h)){f[d]=b._normalize(h)}else{if(d!=="toString"){f[d]=h}}});return f}},0,0,0,0,0,0,[FBEditor.converter,"AbstractConverter"],0));(Ext.cmd.derive("FBEditor.converter.contentTypes.Data",FBEditor.converter.AbstractConverter,{singleton:true,toNormalize:function(b){var a=this,c;c=a.normalize(b);return c}},0,0,0,0,0,0,[FBEditor.converter.contentTypes,"Data"],0));(Ext.cmd.derive("FBEditor.file.Manager",Ext.Base,{singleton:true,fb3file:null,defaultFb3FileName:"Новая книга",openFB3:function(b){var d=this,c=d.getFileFromEvent(b),a=false;if(c){a=c.read({type:c.LOAD_TYPE_ARRAYBUFFER,load:function(l){var n=FBEditor.resource.Manager,h,f,t,k,o,g,r,q,m,s,j;try{Ext.getCmp("panel-main-content").openBody();Ext.getCmp("panel-treenavigation").fireEvent("clearSelection");d.fb3file=Ext.create("FBEditor.FB3.File",{file:c.file,content:l});h=d.fb3file.getStructure();j=d.fb3file.getName();f=h.getThumb();m=h.getContentTypes();m=FBEditor.converter.contentTypes.Data.toNormalize(m);t=h.getMeta();k=h.getBooks();o=h.getDesc(k[0]);g=h.getBodies(k[0]);r=h.getImages(g[0]);q=h.getContent(g[0]);q=q.replace(/\\/g,"\\\\");q=q.replace(/'/g,"\\'");s=FBEditor.xsl.Body.getXsl();q=FBEditor.util.xml.Jsxml.trans(q,s);Ext.getCmp("panel-filename").fireEvent("setName",j);Ext.suspendLayouts();FBEditor.desc.Manager.loadUrl=null;FBEditor.desc.Manager.loadDataToForm(o);if(!n.checkThumbInResources(f)){f.moveTo(n.getDefaultThumbPath());r.push(f)}n.load(r);n.setCover(f.getFileName())}catch(p){Ext.log({level:"error",msg:p,dump:p});Ext.Msg.show({title:"Ошибка",message:"Невозможно открыть книгу",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}FBEditor.editor.Manager.resetFocus();FBEditor.editor.Manager.createContent(q);Ext.getCmp("panel-body-navigation").selectRoot();Ext.resumeLayouts(true)}})}return a},openResource:function(b){var d=this,c=d.getFileFromEvent(b),a=false;if(c){a=c.read({type:c.LOAD_TYPE_ARRAYBUFFER,load:function(f){try{FBEditor.resource.Manager.loadResource({file:c.file,content:f})}catch(g){Ext.log({level:"error",msg:g,dump:g});Ext.Msg.show({title:"Ошибка",message:"Невозможно заугрузить ресурс "+(g?"("+g+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}})}return a},getFileFromEvent:function(a){var b;b=a.target.files.length?Ext.create("FBEditor.file.File",a.target.files[0]):null;return b},saveFB3:function(f,c){var d=this,e=d.fb3file,g,b,a;if(e){e.updateStructure(f)}else{e=Ext.create("FBEditor.FB3.File",f);e.createStructure()}d.fb3file=e;b=e.generateBlob();g=Ext.getCmp("panel-filename-display").getValue()+".fb3.zip";a=window.saveAs(b,g);a.onwriteend=c;a.onabort=c;return a?true:false},saveResource:function(e,c){var d=e,b,a;b=new Blob([d.content],{type:d.type});a=window.saveAs(b,d.baseName);if(c){a.onwriteend=c;a.onabort=c}return a?true:false}},0,0,0,0,0,0,[FBEditor.file,"Manager"],0));(Ext.cmd.derive("FBEditor.view.window.resource.Resource",Ext.Window,{id:"window-resource",title:"Выбор ресурса",width:"80%",height:400,modal:true,closeAction:"hide",layout:"border",initComponent:function(){var a=this;a.items=[{xtype:"panel",id:"window-panel-resources-navigation",region:"west",split:{size:2},width:200,minWidth:200,bodyPadding:5,overflowY:"auto"},{xtype:"panel",id:"window-panel-resources",region:"center",bodyPadding:5,overflowY:"auto",cls:"window-panel-resources"}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},beforeShow:function(){var f=this,a=f.getWindowPanelResourcesNavigation(),b=f.getWindowPanelResources(),e=f.getPanelResourcesNavigation(),c=f.getPanelResourcesControl(),d=f.getViewResources();e.inWindow=true;a.add(e);b.add(c,d);Ext.window.Window.prototype.beforeShow.apply(this,arguments)},onHide:function(){var e=this,a=e.getPanelTreenavigation(),d=e.getPanelResourcesNavigation(),f=e.getPanelResources(),b=e.getPanelResourcesControl(),c=e.getViewResources();d.inWindow=false;a.insert(1,d);f.add(b,c);Ext.window.Window.prototype.onHide.apply(this,arguments)},getWindowPanelResourcesNavigation:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("window-panel-resources-navigation")},getWindowPanelResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("window-panel-resources")},getPanelTreenavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-treenavigation")},getPanelResourcesNavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-resources-navigation")},getPanelResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("panel-resources")},getPanelResourcesControl:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("panel-resources-control")},getViewResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("view-resources")}},0,["window-resource"],["component","box","container","panel","window","window-resource"],{component:true,box:true,container:true,panel:true,window:true,"window-resource":true},["widget.window-resource"],0,[FBEditor.view.window.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.resource.ExplorerManager",Ext.Base,{singleton:true,win:null,getWindow:function(){var a=this,b=a.win;if(!b){b=Ext.create("FBEditor.view.window.resource.Resource");a.win=b}return b}},0,0,0,0,0,0,[FBEditor.resource,"ExplorerManager"],0));(Ext.cmd.derive("FBEditor.view.window.resource.Tree",Ext.Window,{id:"window-resource-tree",title:"Перемещение ресурса",height:"60%",modal:true,closeAction:"hide",layout:"vbox",translateText:{moveTo:"Переместить",cancel:"Отмена"},nameResource:"",destinationFolder:"",initComponent:function(){var a=this;a.items=[{xtype:"box",id:"window-panel-resources-tree-name",cls:"window-panel-resources-tree-name",tpl:'Переместить ресурс <span>{name}</span><tpl if="folder"> в <span>{folder}</span></tpl>'},{xtype:"panel",id:"window-panel-resources-tree-navigation",flex:1,width:400,minWidth:400,bodyPadding:5,overflowY:"auto",buttonAlign:"left",buttons:[{text:a.translateText.moveTo,scope:a,handler:function(){var f=FBEditor.getBridgeWindow(),c,b;if(!a.destinationFolder){return false}try{c=f.FBEditor.resource.Manager;b=c.moveResource(a.nameResource,a.destinationFolder);if(b){c.setSelectFunction(null);a.close()}}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно переместить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}},{text:a.translateText.cancel,scope:a,handler:function(){this.close()}}]}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},beforeShow:function(){var c=this,a=c.getWindowPanelResourcesTreeNavigation(),b=c.getPanelResourcesNavigation();a.add(b);Ext.window.Window.prototype.beforeShow.apply(this,arguments)},onHide:function(){var c=this,a=c.getPanelTreenavigation(),b=c.getPanelResourcesNavigation();a.insert(1,b);Ext.window.Window.prototype.onHide.apply(this,arguments)},getWindowPanelResourcesTreeNavigation:function(){return Ext.getCmp("window-panel-resources-tree-navigation")},getWindowPanelResourcesTreeName:function(){return Ext.getCmp("window-panel-resources-tree-name")},getPanelTreenavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-treenavigation")},getPanelResourcesNavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-resources-navigation")},setNameResource:function(b){var c=this,a=c.getWindowPanelResourcesTreeName();c.nameResource=b;a.setData({name:b,folder:c.destinationFolder})},setFolder:function(b){var c=this,a=c.getWindowPanelResourcesTreeName();c.destinationFolder=b?b:"/";a.setData({name:c.nameResource,folder:c.destinationFolder})}},0,["window-resource-tree"],["component","box","container","panel","window","window-resource-tree"],{component:true,box:true,container:true,panel:true,window:true,"window-resource-tree":true},["widget.window-resource-tree"],0,[FBEditor.view.window.resource,"Tree"],0));(Ext.cmd.derive("FBEditor.resource.TreeManager",Ext.Base,{singleton:true,win:null,getWindow:function(){var a=this,b=a.win;if(!b){b=Ext.create("FBEditor.view.window.resource.Tree");a.win=b}return b}},0,0,0,0,0,0,[FBEditor.resource,"TreeManager"],0));(Ext.cmd.derive("FBEditor.resource.Resource",Ext.Base,{fileId:null,content:null,url:"",name:"",baseName:"",rootName:"",modifiedDate:null,sizeBytes:null,size:"",type:"",date:"",extension:"",width:null,height:null,isFolder:false,isCover:false,totalElements:0,formatDate:"d.m.Y H:i",elements:null,constructor:function(c){var b=this,a=new Image();b.fileId=c.fileId;b.content=c.content;b.url=c.url;b.name=c.name;b.baseName=c.baseName;b.rootName=c.rootName;b.modifiedDate=c.modifiedDate;b.sizeBytes=c.sizeBytes;b.type=c.type;b.isCover=c.isCover;b.size=b.getSizeFormat();b.date=b.getDateFormat();b.extension=b.getExtension();b.elements=[];a.src=b.url;a.onload=function(){b.width=a.width;b.height=a.height}},addElement:function(a){var b=this;b.elements.push(a);b.totalElements=b.elements.length},removeElement:function(a){var b=this,c=b.elements;Ext.Array.each(c,function(e,d){if(Ext.Object.equals(a,e)){c.splice(d,1)}});b.totalElements=c.length;b.elements=c},clearElements:function(){var b=this,a,c=b.elements;while(c.length){a=c[0];if(a){a.deleteLinkResource()}else{c.splice(0,1)}}b.totalElements=0},rename:function(a){var b=this;b.rootName=b.rootName.replace(b.name,a);b.name=a},getSizeFormat:function(){var b=this,a;a=FBEditor.util.Format.fileSize(b.sizeBytes);return a},getDateFormat:function(){var b=this,a;a=Ext.Date.format(b.modifiedDate,b.formatDate);return a},getExtension:function(){var b=this,c=b.baseName,a;a=c.replace(/.*?\.(\w+)$/,"$1");return a}},1,0,0,0,0,0,[FBEditor.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.resource.FolderResource",FBEditor.resource.Resource,{total:0,constructor:function(b){var a=this;a.name=b.name;a.baseName=b.baseName;a.modifiedDate=b.modifiedDate;a.total=b.total;a.date=a.getDateFormat();a.extension="folder";a.isFolder=true;a.type="папка с файлами"}},1,0,0,0,0,0,[FBEditor.resource,"FolderResource"],0));(Ext.cmd.derive("FBEditor.resource.Manager",Ext.Base,{singleton:true,data:[],rootPath:"fb3/img",defaultThumbPath:"thumb",types:["image/png","image/jpeg","image/gif","image/svg+xml"],activeFolder:"",selectFn:null,load:function(a){var b=this,c=[];Ext.each(a,function(g){var f,d,e;d=g.getFileName().substring(b.rootPath.length+1);e={fileId:g.getId(),content:g.getArrayBuffer(),url:g.getUrl(),name:d,baseName:g.getBaseFileName(),rootName:g.getFileName(),modifiedDate:g.getDate(),sizeBytes:g.getSize(),type:g.getType(),isCover:g.getIsCover()};f=Ext.create("FBEditor.resource.Resource",e);c.push(f)});b.data=c;b.sortData();b.updateNavigation();b.generateFolders();b.setActiveFolder("")},loadResource:function(e){var j=this,d=e.file,f=e.content,b,h,g,c,a;if(!j.checkType(d.type)){throw Error("Недопустимый тип ресурса")}b=j.activeFolder+(j.activeFolder?"/":"")+d.name;if(j.containsResource(b)){throw Error("Ресурс с именем "+b+" уже существует")}a=new Blob([f],{type:d.type});c=window.URL.createObjectURL(a);g={content:f,url:c,name:b,baseName:d.name,rootName:j.rootPath+"/"+b,modifiedDate:d.lastModifiedDate,sizeBytes:d.size,type:d.type};h=Ext.create("FBEditor.resource.Resource",g);j.data.push(h);j.sortData();j.updateNavigation()},deleteResource:function(c){var e=this,h=e.data,g,f,a=true;function d(j){h.splice(j,1);e.updateNavigation()}function b(k){var j=h[k].name,l=[];h.splice(k,1);Ext.each(h,function(n,m){if(n.name.indexOf(j)!==0){l.push(n)}});e.data=l;e.updateNavigation()}f=e.getResourceIndexByName(c);g=f!==null?h.slice(f,f+1):null;g=g&&g[0]?g[0]:null;if(!g){throw Error("Ресурс "+c+" не найден")}if(g.isFolder){if(e.containsCover(g)){Ext.Msg.confirm("Удаление папки","Данная папка содержит обложку книги. Вы уверены, что хотите её удалить?",function(j){if(j==="yes"){Ext.getCmp("panel-cover").fireEvent("clear");b(f)}})}else{b(f)}}else{if(g.isCover){Ext.Msg.confirm("Удаление ресурса","Данный ресурс является обложкой книги. Вы уверены, что хотите его удалить?",function(j){if(j==="yes"){Ext.getCmp("panel-cover").fireEvent("clear");d(f)}})}else{if(g.elements.length){Ext.Msg.confirm("Удаление ресурса","Данный ресурс используется в теле книги. Вы уверены, что хотите его удалить?",function(j){if(j==="yes"){g.clearElements();d(f)}})}else{d(f)}}}return a},saveResource:function(b){var c=this,f=c.data,e,d,a;e=c.getResourceIndexByName(b);d=e!==null?f.slice(e,e+1):null;d=d&&d[0]?d[0]:null;if(!d){throw Error("Ресурс "+b+" не найден")}a=FBEditor.file.Manager.saveResource(d);return a},moveResource:function(a,b){var j=this,f=j.data,d=b==="/"?"":b,g,e,c,h,k=false;g=j.getResourceIndexByName(a);e=g!==null?f.slice(g,g+1):null;e=e&&e[0]?e[0]:null;if(!e){throw Error("Ресурс "+a+" не найден")}if(a===d){throw Error("Невозможно переместить ресурс сам в себя")}c=e.name;if(c.indexOf(a)===0){h=c.indexOf("/")!==-1?c.replace(/.*(\/.*?)$/,d+"$1"):d+"/"+c;h=h.replace(/^[/]/,"");if(h!==c){k=true;e.rename(h);j.setActiveFolder(d)}}return k},createFolder:function(b){var d=this,e=d.activeFolder,f,a,c;f=e?e+"/"+b:b;if(!d.containsResource(f)){a={name:f,baseName:b,modifiedDate:new Date()};c=Ext.create("FBEditor.resource.FolderResource",a);d.data.unshift(c);d.sortData();d.updateNavigation();return true}else{throw Error("Папка с именем `"+b+"` уже существует")}return false},setActiveFolder:function(b){var a=this,c,d=FBEditor.getBridgeWindow();a.activeFolder=b;c=a.getFolderData(b);d.Ext.getCmp("view-resources").setStoreData(c)},setSelectFunction:function(a){this.selectFn=a},setSelectCoverFunction:function(){var a=this;a.selectFn=function(b){Ext.getCmp("window-resource").close();a.setCover(b.name);a.selectFn=null}},setSelectFolderFunction:function(){var a=this;a.selectFn=function(b){Ext.getCmp("window-resource-tree").setFolder(b.path)}},setCover:function(b){var c=this,d=c.data,a,e=null;if(!b){return false}a=b.indexOf(c.rootPath)===0?b.substring(c.rootPath.length+1):b;Ext.Array.each(d,function(f){f.isCover=false;if(f.name===a){e=f}});if(e){e.isCover=true;Ext.getCmp("panel-cover").fireEvent("load",e)}},restoreActiveFolder:function(c){var b=this,a=FBEditor.getBridgeNavigation(),d;b.activeFolder=c;d=a.Ext.getCmp("panel-resources-navigation");d.restoreOpenNode()},getActiveFolder:function(a){return this.activeFolder},getSelectFunction:function(){return this.selectFn},getData:function(){return this.data},getCover:function(){var a=this,b=a.data,c=null;c=Ext.Array.findBy(b,function(d){return d.isCover});return c},getResources:function(){var a=this,b=a.data,c=[];Ext.each(b,function(d){if(!d.isFolder){c.push(d)}});return c},getResourceByName:function(a){var b=this,e=b.data,d,c;d=b.getResourceIndexByName(a);c=d!==null?e.slice(d,d+1):null;c=c&&c[0]?c[0]:null;return c},getResourceByFileId:function(e){var a=this,d=a.data,c,b;c=a.getResourceIndexByFileId(e);b=c!==null?d.slice(c,c+1):null;b=b&&b[0]?b[0]:null;return b},getFolders:function(){var a=this,b=a.data,c=[];Ext.each(b,function(d){if(d.isFolder){c.push(d)}});return c},getFolderData:function(b){var a=this,d=a.data,c=b,e=[];Ext.each(d,function(j){var k,h=j.name,g,f;k=h.indexOf(c);f=k===0?true:false;g=f?h.substring(c.length+1):null;if(f&&g&&g.indexOf("/")===-1||!c&&!g){e.push(j)}});return e},getDefaultThumbPath:function(){var a=this,b;b=a.rootPath+(a.defaultThumbPath?"/"+a.defaultThumbPath:"");return b},checkType:function(c){var d=this,b=d.types,a;a=Ext.Array.contains(b,c);return a},containsResource:function(a){var c=this,d=c.data,b=false;Ext.each(d,function(e){if(e.name===a){b=true;return false}});return b},checkThumbInResources:function(b){var c=this,a;a=b.getFileName().indexOf(c.rootPath)===0?true:false;return a},updateNavigation:function(){var b=this,a=FBEditor.getBridgeNavigation(),c;c=b.getData();a.Ext.getCmp("panel-resources-navigation").loadData(c)},generateFolders:function(){var b=this,c=b.data,a=[];Ext.each(c,function(m,g){var l=0,d=false,k,f,h,e,j;if(m.name.indexOf("/")!==-1){k=m.name.replace(/(.*)\/.*?$/,"$1");Ext.each(a,function(n){if(n.name===k){d=true;return false}});if(!d){e=m.modifiedDate;Ext.each(c,function(n){if(n.name.indexOf(k)===0){l++;if(n.modifiedDate.getTime()>e.getTime()){e=n.modifiedDate}}});f=k.replace(/.*\/(.*?)$/,"$1");h={name:k,baseName:f,modifiedDate:e,total:l};j=Ext.create("FBEditor.resource.FolderResource",h);a.push(j)}}});if(a.length){c=Ext.Array.merge(a,c)}b.data=c},sortData:function(){var a=this,b=a.data;Ext.Array.sort(b,function(d,c){var e;e=d.isFolder&&c.isFolder&&d.name>c.name||!d.isFolder&&!c.isFolder&&d.name>c.name;return e});a.data=b},getResourceIndexByName:function(a){var c=this,e=c.data,d,b;b=Ext.Array.findBy(e,function(g,f){d=f;return g.name===a});d=b?d:null;return d},getResourceIndexByFileId:function(e){var b=this,d=b.data,c,a;a=Ext.Array.findBy(d,function(g,f){c=f;return g.fileId===e});c=a?c:null;return c},containsCover:function(d){var c=this,e=c.data,a=d.name,b;b=Ext.Array.findBy(e,function(f){if(f.name.indexOf(a)===0&&f.isCover){return true}});return b?true:false}},0,0,0,0,0,0,[FBEditor.resource,"Manager"],0));(Ext.cmd.derive("FBEditor.route.Manager",Ext.Base,{singleton:true,params:{},init:function(){var a=this,c,b;b=location.hash.substring(1);if(b){c=b.split("&");Ext.Array.each(c,function(f){var e,d,g;e=f.split("=");d=e[0];g=e[1]?unescape(e[1]):null;a.params[d]=g})}},getParams:function(){return this.params}},0,0,0,0,0,0,[FBEditor.route,"Manager"],0));(Ext.cmd.derive("FBEditor.scroll.Scroll",Ext.Base,{duration:500,startTime:0,cmp:null,constructor:function(a){var c=this,b;if(a.cmp){c.cmp=a.cmp;c.duration=a.duration||c.duration}else{c.cmp=a}b=c.cmp;b.on({scope:c,afterRender:function(){this.cmp.body.on({scope:this,scroll:this.event})}})},event:function(){var b=this,c=b.duration,a=new Date().getTime();if(!b.startTime){b.cmp.fireEvent("startScroll")}Ext.defer(b.endScroll,c,b);b.startTime=a},endScroll:function(){var c=this,d=c.duration,b=c.startTime,a=new Date().getTime();if(a-b>=d){c.startTime=0;c.cmp.fireEvent("endScroll")}else{c.cmp.fireEvent("scroll")}}},1,0,0,0,0,0,[FBEditor.scroll,"Scroll"],0));(Ext.cmd.derive("FBEditor.util.xml.Jsxml",Ext.Base,{singleton:true,jsxml:null,trans:function(a,b){var c=this,d=c.jsxml||c.createJsxml();return d.transReady(a,b)},valid:function(b){var a,c;c={xml:b.xml,schema:b.xsd,"arguments":["--noout","--schema",b.schemaFileName,b.xmlFileName]};a=window.validateXML?window.validateXML(c):true;return a},createJsxml:function(){var a=this,b;b=window.JSXML;a.jsxml=b;return b}},0,0,0,0,0,0,[FBEditor.util.xml,"Jsxml"],0));(Ext.cmd.derive("FBEditor.util.Format",Ext.Base,{singleton:true,cacheFileSize:{},translateText:{bytes:"",kb:" КБ",mb:" МБ",gb:" ГБ"},fileSize:function(d){var e=this,b=1024,c=1048576,f=1073741824,a;if(e.cacheFileSize[d]){return e.cacheFileSize[d]}if(d<b){a=d+e.translateText.bytes}else{if(d<1000000){a=(Ext.util.Format.number(d/b,"0.00"))+e.translateText.kb}else{if(d<1000000000){a=(Ext.util.Format.number(d/c,"0.00"))+e.translateText.mb}else{a=(Ext.util.Format.number(d/f,"0.00"))+e.translateText.gb}}}e.cacheFileSize[d]=a;return a}},0,0,0,0,0,0,[FBEditor.util,"Format"],0));(Ext.cmd.derive("FBEditor.webworker.AbstractMaster",Ext.Base,{name:"",needInit:false,worker:null,callback:[],initialized:false,constructor:function(a){var f=this,d=FBEditor.webworker.Manager,c,h,b;c="app/"+d.path+"/"+f.name+"/Worker.js?"+FBEditor.versionParam;try{h=new Worker(c);h.addEventListener("message",f.message,false);h.addEventListener("error",f.error,false);f.worker=h;if(f.needInit){b=function(e){f.initialized=e?true:false};f.post(null,b,f)}}catch(g){Ext.log({msg:"Ошибка создания потока: "+c,level:"error"})}},message:function(a){throw Error("Не реализован метод webworker.AbstractMaster#message()")},post:function(d,f,b){var c=this,e=c.worker,a=c.name;if(f){if(d&&d.callbackId){c.callback[d.callbackId]={fn:f,scope:b}}else{c.callback[a]=c.callback[a]||[];c.callback[a].push({fn:f,scope:b})}}e.postMessage(d)},error:function(a){throw Error("Не реализован метод webworker.AbstractMaster#error()")},getCallback:function(c){var b=this,a=b.name,d=null;if(c){d=b.callback[c]||null}else{if(b.callback[a].length){d=b.callback[a].splice(0,1)[0]}}return d}},1,0,0,0,0,0,[FBEditor.webworker,"AbstractMaster"],0));(Ext.cmd.derive("FBEditor.webworker.httpRequest.Master",FBEditor.webworker.AbstractMaster,{name:"httpRequest",abort:function(){var a=this;a.post({abort:true})},message:function(g){var f=g.data,b=FBEditor.webworker.Manager,c=b.getMaster(f.masterName),a=f.data.response,d=f.data.callbackId||null,h;h=c.getCallback(d);if(h&&!f.data.abort){h.fn.call(h.scope,a,f.data)}},error:function(c){var a=FBEditor.webworker.Manager,b=a.getMaster("httpRequest"),d,f;d="Ошибка выполнения потока "+c.filename+" в строке "+c.lineno+": "+c.message;Ext.log({msg:d,level:"error"});f=b.getCallback();if(f){f.fn.call(f.scope,false)}}},0,0,0,0,0,0,[FBEditor.webworker.httpRequest,"Master"],0));(Ext.cmd.derive("FBEditor.webworker.xmllint.Master",FBEditor.webworker.AbstractMaster,{name:"xmllint",needInit:true,message:function(d){var c=d.data,a=FBEditor.webworker.Manager,b=a.getMaster(c.masterName),f;f=b.getCallback();if(f){f.fn.call(f.scope,c)}},error:function(c){var a=FBEditor.webworker.Manager,b=a.getMaster("xmllint"),d,f;d="Ошибка выполнения потока "+c.filename+" в строке "+c.lineno+": "+c.message;Ext.log({msg:d,level:"error"});f=b.getCallback();if(f){f.fn.call(f.scope,false)}}},0,0,0,0,0,0,[FBEditor.webworker.xmllint,"Master"],0));(Ext.cmd.derive("FBEditor.webworker.Manager",Ext.Base,{singleton:true,path:"webworker",masters:[{name:"xmllint",cfg:{},_master:null},{name:"httpRequest",cfg:{},_master:null}],init:function(){var a=this,b=a.masters;Ext.Array.each(b,function(d){var c=d.cfg||null;d._master=a.factory(d.name,c)})},getMaster:function(a){var c=this,b=null;Ext.Array.each(c.masters,function(d){if(d.name===a){b=d._master;return false}});return b},factory:function(b,a){var d=this,c,g;g="FBEditor."+d.path+"."+b+".Master";try{c=Ext.create(g,a)}catch(f){Ext.log({msg:"Ошибка создания владельца потока "+g,level:"error"})}return c}},0,0,0,0,0,0,[FBEditor.webworker,"Manager"],0));(Ext.cmd.derive("FBEditor.xsl.Body",Ext.Base,{singleton:true,getXsl:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">\t<xsl:output encoding="UTF-8" indent="no" method="html"/>\t<xsl:template match="*">ce(\'<xsl:value-of select="name()"/>\', {<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>}<xsl:if test="* or .">, [<xsl:apply-templates/>]</xsl:if>)<xsl:if test="position()!=last()">, </xsl:if></xsl:template>\t<xsl:template match="text()"><xsl:if test="normalize-space()">\t<xsl:variable name="str" as="xs:string" select="."/>\tct(\'<xsl:value-of select="$str"/>\')\t<xsl:if test="position()!=last()">, </xsl:if></xsl:if></xsl:template>\t<xsl:template match="@*">\'<xsl:value-of select="local-name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if></xsl:template></xsl:stylesheet>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsl,"Body"],0));(Ext.cmd.derive("FBEditor.xsd.Desc",Ext.Base,{singleton:true,getXsd:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:fb3d="http://www.fictionbook.org/FictionBook3/description" targetNamespace="http://www.fictionbook.org/FictionBook3/description" elementFormDefault="qualified" attributeFormDefault="unqualified">\t<simpleType name="SubjectRelationEnumType">\t\t\t\t  <restriction base="token">\t\t\t\t      <enumeration value="author" />\t\t\t\t      <enumeration value="translator" />\t\t\t\t      <enumeration value="editor" />\t\t\t\t      <enumeration value="compiler" />\t\t\t\t      <enumeration value="maker-up" />\t\t\t\t      <enumeration value="adapter" />\t\t\t\t      <enumeration value="dialogue" />\t\t\t\t      <enumeration value="conceptor" />\t\t\t\t      <enumeration value="reviewer" />\t\t\t\t      <enumeration value="introduction" />\t\t\t\t      <enumeration value="afterword" />\t\t\t\t      <enumeration value="accompanying" />\t\t\t\t      <enumeration value="quotations" />\t\t\t\t      <enumeration value="annotator" />\t\t\t\t      <enumeration value="associated" />\t\t\t\t      <enumeration value="copyright_holder" />\t\t\t\t      <enumeration value="commentator" />\t\t\t\t      <enumeration value="consultant" />\t\t\t\t      <enumeration value="corrector" />\t\t\t\t      <enumeration value="scientific_advisor" />\t\t\t\t      <enumeration value="dubious_author" />\t\t\t\t      <enumeration value="designer" />\t\t\t\t      <enumeration value="recipient_of_letters" />\t\t\t\t      <enumeration value="sponsor" />\t\t\t\t      <enumeration value="photographer" />\t\t\t\t      <enumeration value="narrator" />\t\t\t\t      <enumeration value="rendering" />\t\t\t\t      <enumeration value="performer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="maker">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="actor">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="director">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="producer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="composer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="sound_engineer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="screenwriter">\t\t\t\t\t</enumeration>\t\t\t\t      <enumeration value="other" />\t\t\t\t      <enumeration value="undef" />\t\t\t      </restriction>\t\t</simpleType>          <simpleType name="ObjectRelationEnumType">\t          <restriction base="token">\t\t          <enumeration value="preceding_edition" />\t\t          <enumeration value="following_edition" />\t\t          <enumeration value="translated_from" />\t\t          <enumeration value="translation" />\t\t          <enumeration value="compilation" />\t\t          <enumeration value="part" />\t\t          <enumeration value="appendix" />\t\t          <enumeration value="appendix_to" />\t\t          <enumeration value="intersection" />\t\t          <enumeration value="same_subject" />\t\t          <enumeration value="alt_media" />\t\t          <enumeration value="sequel" />\t\t          <enumeration value="prequel" />\t\t          <enumeration value="reissue" />\t\t          <enumeration value="undef" />\t          </restriction>          </simpleType>\t<simpleType name="UUIDType">\t\t\t <restriction base="token">\t\t\t\t <pattern value="[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}"/>\t\t\t </restriction>\t\t</simpleType>\t\t<simpleType name="BookClassType">\t\t\t\t  <restriction base="token">\t\t\t\t      <enumeration value="novel" />\t\t\t\t      <enumeration value="short_story" />\t\t\t\t      <enumeration value="essay" />\t\t\t\t      <enumeration value="article" />\t\t\t\t      <enumeration value="play" />\t\t\t\t      <enumeration value="monograph" />\t\t\t\t      <enumeration value="diary" />\t\t\t\t      <enumeration value="manual" />\t\t\t\t      <enumeration value="thesis" />\t\t\t\t  </restriction>\t\t</simpleType>\t\t\t<simpleType name="SubjectType">\t\t\t <restriction base="token">\t\t\t  <enumeration value="accounting" />\t\t\t  <enumeration value="adv_geo" />\t\t\t  <enumeration value="adv_indian" />\t\t\t  <enumeration value="adv_western" />\t\t\t  <enumeration value="antique" />\t\t\t  <enumeration value="antique_east" />\t\t\t  <enumeration value="antique_myths" />\t\t\t  <enumeration value="banking" />\t\t\t  <enumeration value="child_det" />\t\t\t  <enumeration value="child_prose" />\t\t\t  <enumeration value="child_tale" />\t\t\t  <enumeration value="children" />\t\t\t  <enumeration value="comp_hard" />\t\t\t  <enumeration value="comp_programming" />\t\t\t  <enumeration value="comp_www" />\t\t\t  <enumeration value="design" />\t\t\t  <enumeration value="det_classic" />\t\t\t  <enumeration value="det_espionage" />\t\t\t  <enumeration value="det_history" />\t\t\t  <enumeration value="det_maniac" />\t\t\t  <enumeration value="det_political" />\t\t\t  <enumeration value="economics" />\t\t\t  <enumeration value="global_economy" />\t\t\t  <enumeration value="home_crafts" />\t\t\t  <enumeration value="home_entertain" />\t\t\t  <enumeration value="home_health" />\t\t\t  <enumeration value="home_sex" />\t\t\t  <enumeration value="humor_anecdote" />\t\t\t  <enumeration value="humor_verse" />\t\t\t  <enumeration value="job_hunting" />\t\t\t  <enumeration value="love_detective" />\t\t\t  <enumeration value="love_history" />\t\t\t  <enumeration value="love_short" />\t\t\t  <enumeration value="marketing" />\t\t\t  <enumeration value="nonf_criticism" />\t\t\t  <enumeration value="nonfiction" />\t\t\t  <enumeration value="paper_work" />\t\t\t  <enumeration value="poetry" />\t\t\t  <enumeration value="prose_classic" />\t\t\t  <enumeration value="prose_counter" />\t\t\t  <enumeration value="prose_military" />\t\t\t  <enumeration value="prose_su_classics" />\t\t\t  <enumeration value="ref_dict" />\t\t\t  <enumeration value="ref_guide" />\t\t\t  <enumeration value="reference" />\t\t\t  <enumeration value="religion_esoterics" />\t\t\t  <enumeration value="religion_self" />\t\t\t  <enumeration value="sci_chem" />\t\t\t  <enumeration value="sci_history" />\t\t\t  <enumeration value="sci_linguistic" />\t\t\t  <enumeration value="sci_medicine" />\t\t\t  <enumeration value="sci_phys" />\t\t\t  <enumeration value="sci_psychology" />\t\t\t  <enumeration value="sci_tech" />\t\t\t  <enumeration value="sf_action" />\t\t\t  <enumeration value="sf_detective" />\t\t\t  <enumeration value="sf_fantasy" />\t\t\t  <enumeration value="sf_history" />\t\t\t  <enumeration value="sf_humor" />\t\t\t  <enumeration value="sf_space" />\t\t\t  <enumeration value="stock" />\t\t\t </restriction>\t\t</simpleType>\t                        <element name="fb3-description">\t                        \t                        <complexType>\t\t                        <sequence>\t\t\t                        <element name="periodical" type="fb3d:PeriodicalType" minOccurs="0">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="title" type="fb3d:TitleType">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="sequence" type="fb3d:SequenceType" minOccurs="0" maxOccurs="unbounded">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element ref="fb3d:fb3-relations">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element ref="fb3d:fb3-classification">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="lang" type="language"/>\t\t\t                        <element name="written" minOccurs="0">\t\t\t\t                        <complexType mixed="false">\t\t\t\t\t                        <sequence>\t\t\t\t\t\t                        <element name="lang" type="language" minOccurs="0"/>\t\t\t\t\t\t                        <element name="date" minOccurs="0">\t\t\t\t\t\t\t                        <complexType>\t\t\t\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t\t\t\t                        <attribute name="value" type="date" use="optional"/>\t\t\t\t\t\t\t\t\t                        </extension>\t\t\t\t\t\t\t\t                        </simpleContent>\t\t\t\t\t\t\t                        </complexType>\t\t\t\t\t\t                        </element>\t\t\t\t\t\t                        <element name="country" minOccurs="0">\t\t\t\t\t\t\t                        <simpleType>\t\t\t\t\t\t\t\t                        <restriction base="token">\t\t\t\t\t\t\t\t\t                        <minLength value="2"/>\t\t\t\t\t\t\t\t                        </restriction>\t\t\t\t\t\t\t                        </simpleType>\t\t\t\t\t\t                        </element>\t\t\t\t\t\t                        <element name="date-public" minOccurs="0">\t\t\t\t\t\t\t                        <complexType>\t\t\t\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t\t\t\t                        <attribute name="value" type="date" use="optional"/>\t\t\t\t\t\t\t\t\t                        </extension>\t\t\t\t\t\t\t\t                        </simpleContent>\t\t\t\t\t\t\t                        </complexType>\t\t\t\t\t\t                        </element>\t\t\t\t\t                        </sequence>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="translated" minOccurs="0">                                        <complexType>\t                                        <simpleContent>\t\t                                        <extension base="string">\t\t\t                                        <attribute name="value" type="date" use="optional"/>\t\t                                        </extension>\t                                        </simpleContent>                                        </complexType>                                    </element>                                    <element name="copyrights" minOccurs="0">\t\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t\t<element name="copyright-owner" maxOccurs="unbounded">\t\t\t\t\t\t\t\t\t\t\t\t    <complexType mixed="false">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="title" use="required">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<restriction base="normalizedString">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minLength value="1"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</attribute>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="uuid" type="fb3d:UUIDType"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="url" type="anyURI"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="percent">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<restriction base="float">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minInclusive value="0"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<maxInclusive value="100"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</attribute>\t\t\t\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t</element>\t\t\t                        <element name="document-info">\t\t\t\t                        <complexType mixed="false">\t\t\t\t\t                        <attribute name="created" type="dateTime" use="required"/>\t\t\t\t\t                        <attribute name="updated" type="dateTime" use="required"/>\t\t\t\t\t                        <attribute name="program-used" type="normalizedString" use="optional"/>\t\t\t\t\t                        <attribute name="src-url" type="anyURI" use="optional"/>\t\t\t\t\t                        <attribute name="ocr" type="normalizedString" use="optional"/>\t\t\t\t\t                        <attribute name="editor" type="token" use="optional"/>\t\t\t\t\t                        <attribute name="fb3-lvl" type="integer" use="optional"/>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="history" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t                        <element name="paper-publish-info" minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t\t\t\t\t<complexType mixed="false">\t\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t\t<element name="isbn" type="fb3d:ISBNType" minOccurs="0" maxOccurs="unbounded"/>\t\t\t\t\t\t\t\t\t\t\t\t<element name="sequence" minOccurs="0" maxOccurs="unbounded">\t\t\t                                        <simpleType>\t\t\t\t                                        <restriction base="string">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minLength value="1"/>\t\t                                                </restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t\t\t\t\t<element name="biblio-description" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t\t<attribute name="title" type="token" use="required"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="publisher" type="token" use="optional"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="city" type="token" use="optional"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="year" type="gYear" use="optional"/>\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t</element>\t\t\t                        <element name="custom-info" minOccurs="0" maxOccurs="unbounded">\t\t\t\t                        \t\t\t\t                        <complexType>\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t                        <attribute name="info-type" use="required">\t\t\t\t\t\t\t\t                        <simpleType>\t\t\t\t\t\t\t\t\t                        <restriction base="token">\t\t\t\t\t\t\t\t\t\t                        <minLength value="1"/>\t\t\t\t\t\t\t\t\t                        </restriction>\t\t\t\t\t\t\t\t                        </simpleType>\t\t\t\t\t\t\t                        </attribute>\t\t\t\t\t\t                        </extension>\t\t\t\t\t                        </simpleContent>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="annotation" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t                        <element name="preamble" type="fb3d:AnnotationType" minOccurs="0"/>\t\t                        </sequence>\t\t                        <attribute name="id" type="fb3d:UUIDType" use="required">\t\t\t                        \t\t                        </attribute>\t\t                        <attribute name="version" type="float" use="required">\t\t\t                        \t\t                        </attribute>\t                        </complexType>\t                        <unique name="RelationUUID">\t\t                        <selector xpath="relations/subject|relations/object"/>\t\t                        <field xpath="@id"/>\t                        </unique>                        </element><element name="fb3-relations" type="fb3d:RelationsType">                                   </element>  <element name="fb3-classification" type="fb3d:ClassificationType">\t    </element><complexType name="PeriodicalType" mixed="false">\t\t <sequence>\t<element name="title" type="fb3d:TitleType" minOccurs="0">\t \t</element>\t<element name="issn" type="fb3d:ISSNType" minOccurs="0">\t    \t</element>  <element name="issue">\t  \t  <complexType>\t\t  <simpleContent>\t\t\t  <extension base="string">\t\t\t\t  <attribute name="number" type="positiveInteger" use="required">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t\t  <attribute name="year" type="gYear" use="required">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t\t  <attribute name="date" type="date" use="optional">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t  </extension>\t\t  </simpleContent>\t  </complexType>  </element></sequence><attribute name="id" type="fb3d:UUIDType" use="required"/></complexType><complexType name="ClassificationType" mixed="false">    <sequence>      <element name="class" minOccurs="0">                    <complexType>\t          <simpleContent>\t\t          <extension base="fb3d:BookClassType">\t\t\t          <attribute name="contents" use="required">\t\t\t\t          <simpleType>\t\t\t\t\t          <restriction base="token">\t\t\t\t\t\t          <enumeration value="standalone" />\t\t\t\t\t\t          <enumeration value="collection" />\t\t\t\t\t\t      </restriction>\t\t\t\t          </simpleType>\t\t\t          </attribute>\t\t          </extension>\t          </simpleContent>          </complexType>      </element>      <element name="subject" type="fb3d:SubjectType" maxOccurs="unbounded">                </element>      <element name="target-audience" minOccurs="0">                    <complexType mixed="true">\t          <attribute name="age-min" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="positiveInteger">\t\t\t\t          <minInclusive value="2"/>\t\t\t\t          <maxInclusive value="50"/>\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>\t          <attribute name="age-max" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="positiveInteger">\t\t\t\t          <minInclusive value="2"/>\t\t\t\t          <maxInclusive value="150"/>\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>\t          <attribute name="education" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="token">\t\t\t\t          <enumeration value="none" />\t\t\t\t          <enumeration value="high" />\t\t\t\t          <enumeration value="higher" />\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>          </complexType>      </element>      <element name="setting" minOccurs="0">          <complexType mixed="true">\t          <attribute name="country" type="token" use="optional"/>\t          <attribute name="place" type="token" use="optional"/>\t          <attribute name="date" type="date" use="optional"/>\t          <attribute name="date-from" type="date" use="optional"/>\t          <attribute name="date-to" type="date" use="optional"/>\t          <attribute name="age" type="token" use="optional"/>          </complexType>      </element>      <element name="udc" minOccurs="0" maxOccurs="unbounded">        <simpleType>\t          <restriction base="token">\t            <pattern value="[\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»\'/A-Яа-я]+"/>\t          </restriction>         </simpleType>      </element>      <element name="bbk" minOccurs="0" maxOccurs="unbounded">          <simpleType>\t          <restriction base="token">\t            <pattern value=\'[\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+\'/>\t          </restriction>          </simpleType>      </element>  </sequence></complexType><complexType name="TitleType" mixed="false">\t<sequence>\t    <element name="main">\t        <simpleType>\t            <restriction base="string">\t                <minLength value="1"/>\t            </restriction>\t        </simpleType>\t    </element>\t\t<element name="sub" minOccurs="0">            <simpleType>\t\t\t\t<restriction base="string">\t\t\t\t\t<minLength value="1"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</element>\t\t<element name="alt" minOccurs="0" maxOccurs="unbounded">\t\t\t<simpleType>\t\t\t\t<restriction base="string">\t\t\t\t\t<minLength value="1"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</element>\t</sequence></complexType><complexType name="SequenceType" mixed="false">    <sequence>      <element name="title" type="fb3d:TitleType"/>      <element name="sequence" type="fb3d:SequenceType" minOccurs="0"/>  </sequence>  <attribute name="number" type="positiveInteger" use="optional"/>  <attribute name="id" type="fb3d:UUIDType" use="required"/></complexType><complexType name="AnnotationType">                                <sequence>              <element name="p" type="fb3d:BasicTextType">\t                            </element><choice minOccurs="0" maxOccurs="unbounded">                                <element name="p" type="fb3d:BasicTextType">\t                                                                </element><element name="br">              </element>  </choice>  </sequence></complexType><complexType name="BasicTextType" mixed="true">    <choice minOccurs="0" maxOccurs="unbounded">      <element name="strong" type="fb3d:BasicTextType">                </element>      <element name="em" type="fb3d:BasicTextType">                </element>      <element name="a">                    <complexType mixed="true">\t          <complexContent mixed="true">\t\t          <extension base="fb3d:BasicTextType">\t\t\t          <attribute name="href" type="anyURI" use="required"/>\t\t          </extension>\t          </complexContent>          </complexType>      </element>  </choice></complexType><complexType name="RelationsType">                                <sequence>              <element name="subject" type="fb3d:SubjectRelationType" maxOccurs="unbounded">\t                            </element><element name="object" type="fb3d:ObjectRelationType" minOccurs="0" maxOccurs="unbounded"/>                                                                              </sequence>                                                                              </complexType><complexType name="SubjectRelationType" mixed="false">                                              \t                                              <sequence>                                              <element name="title" type="fb3d:TitleType">\t                                                                                            </element><element name="first-name" minOccurs="0">                                     \t                                     <simpleType>                                     <restriction base="string">\t                                     <minLength value="1"/>                                     </restriction></simpleType>  </element>\t  <element name="middle-name" minOccurs="0">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>\t  <element name="last-name">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>\t  <element name="description" minOccurs="0">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>  </sequence><attribute name="id" type="fb3d:UUIDType" use="required">                                          </attribute>  <attribute name="link" type="fb3d:SubjectRelationEnumType" use="required">\t    </attribute>\t<attribute name="percent" type="optional"/></complexType><complexType name="ObjectRelationType" mixed="false">    <sequence>      <element name="title" type="fb3d:TitleType">                </element>      <element name="description" minOccurs="0">                    <simpleType>\t          <restriction base="string">\t\t          <minLength value="1"/>\t          </restriction>          </simpleType>      </element>  </sequence>  <attribute name="id" type="fb3d:UUIDType" use="required">        </attribute>  <attribute name="link" type="fb3d:ObjectRelationEnumType" use="required">        </attribute></complexType><simpleType name="ISSNType">             <restriction base="string">                  <pattern value="d{4}-d{3}(d|X)"/></restriction>  </simpleType>\t  <simpleType name="ISBNType">\t\t  \t\t  <restriction base="string">\t\t\t  <pattern value="([0-9]+[-s]){3,6}[0-9]*[xX0-9]"/>\t\t  </restriction>\t  </simpleType>  </schema>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsd,"Desc"],0));(Ext.cmd.derive("FBEditor.Application",Ext.app.Application,{name:"FBEditor",stores:[],listen:{controller:{"#":{unmatchedroute:"onUnmatchedRoute"}}},init:function(){var a=this;a.initApplicationCache();FBEditor.version=Ext.manifest.loader.cache;FBEditor.versionParam=Ext.manifest.loader.cacheParam+"="+FBEditor.version;FBEditor.parentWindow=window.opener;FBEditor.childWindow={navigation:null,props:null};FBEditor.getBridgeWindow=function(){return FBEditor.parentWindow||window};FBEditor.getBridgeProps=function(){var b;b=FBEditor.parentWindow?(FBEditor.parentWindow.FBEditor.childWindow.props||FBEditor.parentWindow):(FBEditor.childWindow.props||window);return b};FBEditor.getBridgeNavigation=function(){return FBEditor.parentWindow?(FBEditor.parentWindow.FBEditor.childWindow.navigation||FBEditor.parentWindow):(FBEditor.childWindow.navigation||window)};FBEditor.getLocalStorage=function(){return Ext.util.LocalStorage.get("FBEditor")||new Ext.util.LocalStorage({id:"FBEditor"})};window.onbeforeunload=function(){a.onbeforeunload(a)};window.onfocus=function(){a.onfocus()};FBEditor.webworker.Manager.init();Ext.state.Manager.setProvider(new Ext.state.CookieProvider({prefix:a.getName()+"-"}));Ext.tip.QuickTipManager.init();FBEditor.command.HistoryCommand.init();FBEditor.route.Manager.init();FBEditor.desc.Manager.init();FBEditor.editor.Manager.init();a.getAccessHub()},launch:function(){var a=this;if(FBEditor.parentWindow){FBEditor.parentWindow.Ext.getCmp("main").removeDetachedPanel(window)}else{FBEditor.desc.Manager.launch()}document.querySelector(".app-loading").parentNode.removeChild(document.querySelector(".app-loading"))},initApplicationCache:function(){var a;if(window.applicationCache){a=window.applicationCache;a.addEventListener("updateready",function(c){var b=window.applicationCache;b.swapCache();console.log("Swap Application Cache")},false)}},onUnmatchedRoute:function(a){if(FBEditor.parentWindow){window.close()}},onbeforeunload:function(a){if(FBEditor.parentWindow&&!FBEditor.closingWindow){FBEditor.closingWindow=true;if(!FBEditor.parentWindow.FBEditor.closingWindow){if(window.name==="navigation"){Ext.getCmp("panel-resources-navigation").destroy();Ext.getCmp("panel-body-navigation").destroy()}FBEditor.parentWindow.Ext.getCmp("main").attachPanel(window.name,window);FBEditor.getLocalStorage().removeItem(window.name)}window.close()}else{FBEditor.closingWindow=true;Ext.getCmp("main").fireEvent("closeapplication")}},onfocus:function(){if(!window.name){}},getAccessHub:function(){var a=FBEditor.webworker.Manager,b;FBEditor.accessHub=false;b=a.factory("httpRequest");b.post({url:"https://hub.litres.ru/pages/machax_arts/?uuid=1"},function(c,d){if(c){FBEditor.accessHub=c.substring(0,1)==="{"?true:false;Ext.log({msg:"Хаб доступен",level:"info"});if(FBEditor.accessHub){Ext.getCmp("main").fireEvent("accessHub")}}})}},0,0,0,0,0,0,[FBEditor,"Application"],0));(function renderingInfo(){document.querySelector(".app-loading-info").firstChild.nodeValue="Рендеринг"}());(Ext.cmd.derive("FBEditor.command.AbstractCommand",FBEditor.command.InterfaceCommand,{data:null,constructor:function(b){var a=this;a.data=b},getData:function(){return this.data},getBridgeWindow:function(){return FBEditor.getBridgeWindow()}},1,0,0,0,0,0,[FBEditor.command,"AbstractCommand"],0));(Ext.cmd.derive("FBEditor.command.CreateFolderResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,d=FBEditor.getBridgeWindow(),c=b.data,a=false;Ext.Msg.prompt("Новая папка","Имя:",function(g,f){if(g==="ok"&&!Ext.isEmpty(f)){try{a=d.FBEditor.resource.Manager.createFolder(f)}catch(h){Ext.log({level:"error",msg:h,dump:h});Ext.Msg.show({title:"Ошибка",message:"Невозможно создать папку "+(h?"("+h+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}});return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"CreateFolderResource"],0));(Ext.cmd.derive("FBEditor.command.DeleteResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,f=FBEditor.getBridgeWindow(),c=b.data,a=false;try{a=f.FBEditor.resource.Manager.deleteResource(c.nameResource)}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно удалить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"DeleteResource"],0));(Ext.cmd.derive("FBEditor.command.LoadDesc",FBEditor.command.AbstractCommand,{execute:function(){var d=this,f=d.data,a=false,c=FBEditor.desc.Manager,b;b=c.loadUrl;try{if(b){c.loadFromUrl(b);a=true}}catch(g){}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"LoadDesc"],0));(Ext.cmd.derive("FBEditor.command.LoadResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,d=FBEditor.getBridgeWindow(),c=b.data,a;a=d.FBEditor.file.Manager.openResource(c.evt);return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"LoadResource"],0));(Ext.cmd.derive("FBEditor.command.MoveResource",FBEditor.command.AbstractCommand,{execute:function(){var c=this,h=FBEditor.getBridgeWindow(),d=c.data,b=d.nameResource,g,a=false;try{g=h.FBEditor.resource.TreeManager.getWindow();if(g.show){a=true;g.setNameResource(b);g.show();h.FBEditor.resource.Manager.setSelectFolderFunction()}}catch(f){Ext.log({level:"error",msg:f,dump:f});Ext.Msg.show({title:"Ошибка",message:"Невозможно переместить ресурс "+(f?"("+f+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"MoveResource"],0));(Ext.cmd.derive("FBEditor.command.OpenBody",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,g=d.getData(),f=d.getBridgeWindow(),e=FBEditor.getBridgeProps(),a=true,c,b;c=f.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentBody");b=e.Ext&&e.Ext.getCmp?e.Ext.getCmp("panel-main-props-card"):null;if(b){d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelBody")}return a},unExecute:function(){var e=this,h=e.getData(),c=e.activePanelContent,a=e.activePanelProps,g=e.getBridgeWindow(),f=FBEditor.getBridgeProps(),d,b;d=g.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=f.Ext.getCmp("panel-main-props-card");b.setActiveItem(a)}},0,0,0,0,0,0,[FBEditor.command,"OpenBody"],0));(Ext.cmd.derive("FBEditor.command.OpenDesc",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,g=d.getData(),f=d.getBridgeWindow(),e=FBEditor.getBridgeProps(),a=true,c,b;c=f.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentDesc");b=e.Ext.getCmp("panel-main-props-card");d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelDesc");return a},unExecute:function(){var e=this,h=e.getData(),c=e.activePanelContent,a=e.activePanelProps,g=e.getBridgeWindow(),f=FBEditor.getBridgeProps(),d,b;d=g.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=f.Ext.getCmp("panel-main-props-card");b.setActiveItem(a)}},0,0,0,0,0,0,[FBEditor.command,"OpenDesc"],0));(Ext.cmd.derive("FBEditor.command.OpenFile",FBEditor.command.AbstractCommand,{execute:function(){var b=this,c,a;c=b.data;a=FBEditor.file.Manager.openFB3(c.evt);return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"OpenFile"],0));(Ext.cmd.derive("FBEditor.command.OpenResources",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,g=d.getData(),f=d.getBridgeWindow(),e=FBEditor.getBridgeProps(),a=true,c,b;c=f.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentResources");b=e.Ext.getCmp("panel-main-props-card");if(b){d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelResources")}return a},unExecute:function(){var e=this,h=e.getData(),c=e.activePanelContent,a=e.activePanelProps,g=e.getBridgeWindow(),f=FBEditor.getBridgeProps(),d,b;d=g.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=f.Ext.getCmp("panel-main-props-card");if(b){b.setActiveItem(a)}}},0,0,0,0,0,0,[FBEditor.command,"OpenResources"],0));(Ext.cmd.derive("FBEditor.command.SaveAsFile",FBEditor.command.AbstractCommand,{execute:function(){var f=this,a=f.data.btn,c=f.data.desc,j,h,g,b,k;try{if(!(j=FBEditor.resource.Manager.getCover())){throw Error("Загрузите обложку для книги")}if(!c.isValid()){throw Error("Некорректно заполнено описание книги")}h=c.getValues();g=FBEditor.desc.Manager.getXml(h);b={thumb:j,meta:FBEditor.desc.Manager.getMetaXml(h),books:[{desc:g,bodies:[{content:FBEditor.editor.Manager.getXml(),images:FBEditor.resource.Manager.getResources()}]}]};k=FBEditor.file.Manager.saveFB3(b,function(){Ext.log({level:"warn",msg:"Стали доступны методы FileSaver.onwriteend, FileSaver.onabort"});a.enable()})}catch(d){a.enable();Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка сохранения",message:d.message?d.message:"Невозможно сохранить книгу",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR});k=false}return k},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveAsFile"],0));(Ext.cmd.derive("FBEditor.command.SaveDesc",FBEditor.command.AbstractCommand,{execute:function(){var f=this,g=f.data,a=false,c=FBEditor.desc.Manager,d=Ext.getCmp("form-desc"),b;b=c.saveUrl;try{if(b){if(!d.isValid()){throw Error("Некорректно заполнено описание книги")}c.saveToUrl(b);a=true}}catch(h){Ext.log({level:"error",msg:"Ошибка сохранения описания книги",dump:h});Ext.Msg.show({title:"Ошибка",message:h,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveDesc"],0));(Ext.cmd.derive("FBEditor.command.SaveResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,f=FBEditor.getBridgeWindow(),c=b.data,a=false;try{a=f.FBEditor.resource.Manager.saveResource(c.nameResource)}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveResource"],0));(Ext.cmd.derive("FBEditor.command.SelectCover",FBEditor.command.AbstractCommand,{execute:function(){var b=this,c=b.data,e=FBEditor.getBridgeWindow(),d,a=false;d=c.win;if(d.show){a=true;d.show();e.FBEditor.resource.Manager.setSelectCoverFunction()}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SelectCover"],0));(Ext.cmd.derive("FBEditor.command.SelectImg",FBEditor.command.AbstractCommand,{execute:function(){var c=this,d=c.data,b,e,a=false;function f(j){var g,h=FBEditor.resource.Manager;e.close();g=h.getResourceByName(j.name);b.updateData({url:g.url,name:g.name});h.setSelectFunction(null)}b=d.scope;e=d.win;if(e.show){a=true;e.show();FBEditor.resource.Manager.setSelectFunction(f)}return a},unExecute:function(){return true}},0,0,0,0,0,0,[FBEditor.command,"SelectImg"],0));(Ext.cmd.derive("FBEditor.command.SplitEditor",FBEditor.command.AbstractCommand,{execute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("split");a=true;return a},unExecute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("unsplit");a=true;return a}},0,0,0,0,0,0,[FBEditor.command,"SplitEditor"],0));(Ext.cmd.derive("FBEditor.command.UnsplitEditor",FBEditor.command.AbstractCommand,{execute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("unsplit");a=true;return a},unExecute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("split");a=true;return a}},0,0,0,0,0,0,[FBEditor.command,"UnsplitEditor"],0));(Ext.cmd.derive("FBEditor.converter.desc.Data",FBEditor.converter.AbstractConverter,{singleton:true,toForm:function(f){var e=this,b=f.xml,a,c,g,h;b=b.replace(/[\n\r\t]/g,"");a=b.match(/<annotation>(.*?)<\/annotation>/);f.annotation=a?a[1]:"";c=b.match(/<preamble>(.*?)<\/preamble>/);f.preamble=c?c[1]:"";g=b.match(/<history>(.*?)<\/history>/);f.history=g?g[1]:"";h=e.normalize(f);h=e.convertPeriodical(h);h=e.convertTitle(h);h=e.convertRelations(h);h=e.convertClassification(h);h=e.convertWritten(h);h=e.convertDocumentInfo(h);h=e.convertPublishInfo(h);h=e.convertCustomInfo(h);h.lang=h.lang?h.lang:"ru";delete h.xml;return h},convertPeriodical:function(a){var b=a;if(b.periodical){b["periodical-id"]=b.periodical.id;b["periodical-number"]=b.periodical.number.number;b["periodical-year"]=b.periodical.number.year;b["periodical-date"]=b.periodical.number.date?b.periodical.number.date:"";b["periodical-text"]=b.periodical.number.text?b.periodical.number.text:"";b["periodical-issn"]=b.periodical.issn?b.periodical.issn:"";if(b.periodical.title){b["periodical-title-main"]=b.periodical.title.main;b["periodical-title-sub"]=b.periodical.title.sub?b.periodical.title.sub:"";b["periodical-title-alt"]=b.periodical.title.alt?b.periodical.title.alt:""}delete b.periodical}return b},convertTitle:function(b){var a=this,c=b;if(c.title){c["title-main"]=c.title.main?c.title.main:"";c["title-sub"]=c.title.sub?c.title.sub:"";c["title-alt"]=Ext.isString(c.title.alt)?{0:c.title.alt}:c.title.alt;delete c.title}return c},convertRelations:function(b){var a=this,c=b;if(c["fb3-relations"]){c.relations={"relations-subject":c["fb3-relations"].subject?c["fb3-relations"].subject:"","relations-object":c["fb3-relations"].object?c["fb3-relations"].object:""};c.relations["relations-subject"]=a._convertPropertyName(c.relations["relations-subject"],"relations-subject");c.relations["relations-object"]=a._convertPropertyName(c.relations["relations-object"],"relations-object");Ext.Object.each(c.relations["relations-subject"],function(d,e){e["relations-subject-link-radio-"+d]={};e["relations-subject-link-radio-"+d]["rel-subject-link-"+d]=e["relations-subject-link"];if(e["relations-subject-link"]!=="author"&&e["relations-subject-link"]!=="translator"&&e["relations-subject-link"]!=="publisher"){e["relations-subject-link-list"]=e["relations-subject-link"];e["relations-subject-link-radio-"+d]["rel-subject-link-"+d]="other-list"}delete e["relations-subject-link"]});delete c["fb3-relations"]}return c},convertClassification:function(b){var a=this,c=b;if(c["fb3-classification"]){if(c["fb3-classification"]["class"]){c["classification-class-contents"]=c["fb3-classification"]["class"].contents?c["fb3-classification"]["class"].contents:"";c["classification-class-text"]=c["fb3-classification"]["class"].text?c["fb3-classification"]["class"].text:""}c["classification-subject"]=a._convertValToObj(c["fb3-classification"].subject,"classification-subject");c["classification-udc"]=a._convertValToObj(c["fb3-classification"].udc,"classification-udc");c["classification-bbk"]=a._convertValToObj(c["fb3-classification"].bbk,"classification-bbk");if(c["fb3-classification"]["target-audience"]){c["classification-target-audience-text"]=c["fb3-classification"]["target-audience"].text?c["fb3-classification"]["target-audience"].text:"";c["classification-target-audience-education"]=c["fb3-classification"]["target-audience"].education?c["fb3-classification"]["target-audience"].education:"";c["classification-target-audience-age-min"]=c["fb3-classification"]["target-audience"]["age-min"]?c["fb3-classification"]["target-audience"]["age-min"]:"";c["classification-target-audience-age-max"]=c["fb3-classification"]["target-audience"]["age-max"]?c["fb3-classification"]["target-audience"]["age-max"]:""}if(c["fb3-classification"].setting){c["classification-setting-text"]=c["fb3-classification"].setting.text?c["fb3-classification"].setting.text:"";c["classification-setting-country"]=c["fb3-classification"].setting.country?c["fb3-classification"].setting.country:"";c["classification-setting-place"]=c["fb3-classification"].setting.place?c["fb3-classification"].setting.place:"";c["classification-setting-date"]=c["fb3-classification"].setting.date?c["fb3-classification"].setting.date:"";c["classification-setting-age"]=c["fb3-classification"].setting.age?c["fb3-classification"].setting.age:"";c["classification-setting-date-from"]=c["fb3-classification"].setting["date-from"]?c["fb3-classification"].setting["date-from"]:"";c["classification-setting-date-to"]=c["fb3-classification"].setting["date-to"]?c["fb3-classification"].setting["date-to"]:""}delete c["fb3-classification"]}return c},convertWritten:function(a){var b=a;if(b.written){b["written-lang"]=b.written.lang?b.written.lang:"";if(b.written.date){b["written-date-value"]=b.written.date.value?b.written.date.value:"";b["written-date-text"]=b.written.date.text?b.written.date.text:""}if(b.written["date-public"]){b["written-date-public-value"]=b.written["date-public"].value?b.written.date.value:"";b["written-date-public-text"]=b.written["date-public"].text?b.written.date.text:""}b["written-country"]=b.written.country?b.written.country:"";b["written-date-translation"]=b.written["date-translation"]?b.written["date-translation"]:"";delete b.written}if(b.translated){b["translated-value"]=b.translated.value?b.translated.value:"";b["translated-text"]=b.translated.text?b.translated.text:"";delete b.translated}return b},convertDocumentInfo:function(c){var a=this,e=c,b;if(e["document-info"]){if(e["document-info"].isbn){e["document-info-isbn"]=e["document-info"].isbn[0]?e["document-info"].isbn:{0:e["document-info"].isbn}}b=Ext.Date.format(new Date(),"Y-m-d")+"T"+Ext.Date.format(new Date(),"H:i:s");e["document-info"].created=e["document-info"].created?e["document-info"].created:b;e["document-info"].updated=e["document-info"].updated?e["document-info"].updated:b;e["document-info-created-date"]=e["document-info"].created.split("T")[0];e["document-info-created-time"]=e["document-info"].created.split("T")[1];e["document-info-updated-date"]=e["document-info"].updated.split("T")[0];e["document-info-updated-time"]=e["document-info"].updated.split("T")[1];e["document-info-program-used"]=e["document-info"]["program-used"]?e["document-info"]["program-used"]:"";e["document-info-src-url"]=e["document-info"]["src-url"]?e["document-info"]["src-url"]:"";e["document-info-ocr"]=e["document-info"].ocr?e["document-info"].ocr:"";e["document-info-editor"]=e["document-info"].editor?e["document-info"].editor:"";delete e["document-info"]}return e},convertPublishInfo:function(e){var c=this,f=e,a=f.xml,b;b=a.match(/<biblio-description>(.*?)<\/biblio-description>/g);if(b){f["paper-publish-info"]=f["paper-publish-info"][0]?f["paper-publish-info"]:{0:f["paper-publish-info"]};Ext.Object.each(f["paper-publish-info"],function(g,h){var d;if(h["biblio-description"]){d=b.shift();h["biblio-description"]=d.replace(/<\/?biblio-description>/g,"")}})}f["paper-publish-info"]=c._convertPropertyName(f["paper-publish-info"],"paper-publish-info");return f},convertCustomInfo:function(b){var a=this,c=b;c["custom-info"]=a._convertPropertyName(c["custom-info"],"custom-info");return c},_convertPropertyName:function(c,a){var e=c,b=a;e=e?e:"";e=e["0"]?e:{"0":e};Ext.Object.each(e,function(d,f){Ext.Object.each(f,function(g,h){if(Ext.isObject(h)&&!h["0"]){Ext.Object.each(h,function(l,j){e[d][b+"-"+g+"-"+l]=j})}else{e[d][b+"-"+g]=h}delete e[d][g]})});return e},_convertValToObj:function(e,a){var f=e,b=a,c;f=f?(Ext.isString(f)?[f]:f):"";c=f?{}:"";Ext.Object.each(f,function(d,g){c[d]={};c[d][b]=g});return c}},0,0,0,0,0,0,[FBEditor.converter.desc,"Data"],0));(Ext.cmd.derive("FBEditor.editor.command.ConvertToTextCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,f=l.getData(),k=false,b={},d={},c=FBEditor.editor.Manager,g=FBEditor.editor.Factory,a=c.getSchema(),h;try{c.suspendEvent=true;h=f.range||c.getRange();f.viewportId=h.start.viewportId;console.log("convert "+f.el.getName()+" to text ",f,h);d.node=f.el;b.node=d.node.nodes[f.viewportId];d.parent=d.node.parent;b.parent=d.parent.nodes[f.viewportId];d.nameEl=d.parent.getName();d.pos=d.parent.getChildPosition(d.node);d.namesElements=c.getNamesElements(d.parent);d.namesElements.splice(d.pos,1,"p");if(a.verify(d.nameEl,d.namesElements)){d.verify=true}else{if(!a.verify(d.node.getName(),["p"])){return false}}d.fragment=g.createElement("div");d.node.convertToText(d.fragment);b.fragment=d.fragment.getNode(f.viewportId);if(d.verify){b.first=b.fragment.firstChild;d.first=b.first.getElement();while(d.first){d.parent.insertBefore(d.first,d.node);b.parent.insertBefore(b.first,b.node);b.first=b.fragment.firstChild;d.first=b.first?b.first.getElement():null}d.parent.remove(d.node);b.parent.removeChild(b.node)}else{d.node.removeAll();b.oldNode=b.node;b.node=d.node.getNode(f.viewportId);b.parent.replaceChild(b.node,b.oldNode);b.first=b.fragment.firstChild;d.first=b.first.getElement();while(d.first){d.node.add(d.first);b.node.appendChild(b.first);b.first=b.fragment.firstChild;d.first=b.first?b.first.getElement():null}}d.parent.sync(f.viewportId);c.suspendEvent=false;d.cursor=h.start.getElement();b.cursor=d.cursor.nodes[f.viewportId];c.setCursor({startNode:b.cursor,startOffset:h.offset.start});k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}return k},unExecute:function(){var e=this,f=e.getData(),b={},d={},c=false,a;return c}},0,0,0,0,0,0,[FBEditor.editor.command,"ConvertToTextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.DeleteCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var g=this,h=g.getData(),f=false,b={},d={},c=FBEditor.editor.Manager,a;try{c.suspendEvent=true;a=h.range||c.getRange();h.viewportId=a.start.viewportId;console.log("del el",h,a);d.node=h.el;b.node=d.node.nodes[h.viewportId];d.parent=d.node.parent;b.parent=d.parent.nodes[h.viewportId];b.next=b.node.nextSibling;d.next=b.next?b.next.getElement():null;b.prev=b.node.previousSibling;d.prev=b.prev?b.prev.getElement():null;d.parent.remove(d.node);b.parent.removeChild(b.node);b.first=b.parent.firstChild;if(!b.first){d.p=c.createEmptyP();d.newEl=d.p;if(d.parent.isRoot){d.s=FBEditor.editor.Factory.createElement("section");d.s.add(d.p);d.newEl=d.s}b.newEl=d.newEl.getNode(h.viewportId);d.parent.add(d.newEl);b.parent.appendChild(b.newEl)}d.parent.sync(h.viewportId);c.suspendEvent=false;b.cursor=b.newEl?b.newEl:b.next;b.cursor=b.cursor?b.cursor:b.prev;b.cursor=b.cursor?b.cursor:b.parent;h.saveRange={startNode:c.getDeepFirst(b.cursor)};c.setCursor(h.saveRange);h.els=d;h.range=a;g.verifyElement(d.node);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}return f},unExecute:function(){var g=this,h=g.getData(),b={},f={},d=false,c=FBEditor.editor.Manager,a;try{c.suspendEvent=true;a=h.range;f=h.els;b.node=f.node.nodes[h.viewportId];b.parent=f.parent.nodes[h.viewportId];console.log("undo del el",b,f,a);if(f.newEl){b.newEl=f.newEl.nodes[h.viewportId];f.parent.replace(f.node,f.newEl);b.parent.replaceChild(b.node,b.newEl)}else{if(f.next){b.next=f.next.nodes[h.viewportId];f.parent.insertBefore(f.node,f.next);b.parent.insertBefore(b.node,b.next)}else{f.parent.add(f.node);b.parent.appendChild(b.node)}}f.parent.sync(h.viewportId);c.suspendEvent=false;h.saveRange={startNode:a.start,startOffset:a.offset.start,focusElement:f.node};c.setCursor(h.saveRange);d=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}return d}},0,0,0,0,0,0,[FBEditor.editor.command,"DeleteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractCellCommand",FBEditor.editor.command.AbstractCommand,{joinCells:function(h,j,g){var f=this,c={},a={},b=FBEditor.editor.Manager,d,e;d=j.rb[0]-j.lt[0]+1;e=j.rb[1]-j.lt[1]+1;h.each(function(k,l){k.each(function(p,n){var o=p.nodes[g],m;if(n===j.lt[0]&&l===j.lt[1]){a.joinTd=o;c.joinTd=p;c.joinTd._sizeSelection=j;p.setColSpan(d);p.setRowSpan(e);a.cursor=o}else{if(n>=j.lt[0]&&n<=j.rb[0]&&l>=j.lt[1]&&l<=j.rb[1]){p.hide();m={ownerTd:p,children:[]};a.first=o.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){m.children.push(c.first);c.joinTd.add(c.first);a.joinTd.appendChild(a.first);a.first=o.firstChild;c.first=a.first?a.first.getElement():null}c.joinTd.addLinks(m);c.emptyP=b.createEmptyP();p.add(c.emptyP)}}})});return c.joinTd},splitCell:function(d,c){var b={},a={};Ext.Array.each(d.getLinks(),function(e){b.ownerTd=e.ownerTd;a.ownerTd=b.ownerTd.nodes[c];b.ownerTd.show();Ext.Array.each(e.children,function(f){a.child=f.nodes[c];b.ownerTd.remove(b.ownerTd.first());b.ownerTd.add(f);a.ownerTd.appendChild(a.child)})});d.setColSpan();d.setRowSpan();d.removeLinks()},setCursor:function(c,a){var d=this,e=d.getData(),b=FBEditor.editor.Manager;e.saveRange={startNode:b.getDeepFirst(a.cursor)};b.setCursor(e.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractCellCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractInsertColCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,d=k.getData(),j=false,c={},a={},b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g;try{g=d.range||b.getRange();d.range={common:g.common,start:g.start,end:g.end,parentStart:g.start.parentNode,collapsed:g.collapsed,offset:g.offset};b.suspendEvent=true;a.node=d.node;if(!a.node.parentNode){a.parent=d.range.parentStart;c.parent=a.parent.getElement();while(c.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;c.parent=a.parent.getElement()}a.node=a.parent}d.viewportId=a.node.viewportId;c.node=a.node.getElement();while(!c.node.isCell){a.node=a.node.parentNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement()}a.table=a.parent.parentNode;c.table=a.table.getElement();c.pos=c.parent.getChildPosition(c.node);d.saveNode=[];Ext.Array.each(c.table.children,function(e){Ext.Array.each(e.children,function(o,m){var l,n;if(m===c.pos){l=f.createElement(o.xmlTag);l.createScaffold();n=l.getNode(d.viewportId);d.saveNode.push(n);k.insertCol(o,n,c,a);return false}})});c.parent.sync(d.viewportId);b.suspendEvent=false;k.setCursor(c,a);k.verifyElement(c.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b=FBEditor.editor.Manager,f,k;try{b.suspendEvent=true;f=d.range;Ext.Array.each(d.saveNode,function(e){a.node=e;c.node=a.node.getElement();k=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.parent.remove(c.node);a.parent.removeChild(a.node)});c.parent.sync(k);b.suspendEvent=false;d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});FBEditor.editor.HistoryManager.remove()}return h},insertCol:function(b,d,c,a){},setCursor:function(c,a){var d=this,f=window.getSelection(),e=d.getData(),b=FBEditor.editor.Manager;e.oldRange=f.getRangeAt(0);a.p=c.p.nodes[e.viewportId];e.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b.setCursor(e.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractInsertColCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractInsertRowCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,d=k.getData(),j=false,c={},a={},b=FBEditor.editor.Manager,f=FBEditor.editor.Factory,g;try{g=d.range||b.getRange();d.range={common:g.common,start:g.start,end:g.end,parentStart:g.start.parentNode,collapsed:g.collapsed,offset:g.offset};b.suspendEvent=true;a.node=d.node;if(!a.node.parentNode){a.parent=d.range.parentStart;c.parent=a.parent.getElement();while(c.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;c.parent=a.parent.getElement()}a.node=a.parent}d.viewportId=a.node.viewportId;c.node=a.node.getElement();while(!c.node.isTr){a.node=a.node.parentNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement()}c.tr=f.createElement("tr");Ext.Array.each(c.node.children,function(l){var e;e=f.createElement(l.xmlTag);e.createScaffold();c.tr.add(e)});a.tr=c.tr.getNode(d.viewportId);k.insertRow(c,a);c.parent.sync(d.viewportId);b.suspendEvent=false;k.setCursor(c,a);d.saveNode=a.tr;k.verifyElement(c.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return j},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b=FBEditor.editor.Manager,f,k;try{b.suspendEvent=true;f=d.range;a.node=d.saveNode;c.node=a.node.getElement();k=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(k);b.suspendEvent=false;d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});FBEditor.editor.HistoryManager.remove()}return h},insertRow:function(b,a){},setCursor:function(c,a){var d=this,f=window.getSelection(),e=d.getData(),b=FBEditor.editor.Manager;e.oldRange=f.getRangeAt(0);c.p=c.tr.first().first();a.p=c.p.nodes[e.viewportId];e.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b.setCursor(e.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractInsertRowCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DelColCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var g=this,h=g.getData(),b={},f={},d=FBEditor.editor.Manager,a,c;b.node=h.node;f.node=b.node.getElement();a=h.range||d.getRange();h.range=a;while(!f.node.isTd){b.node=b.node.parentNode;f.node=b.node.getElement();f.pos=f.node.parent.getChildPosition(f.node);b.table=b.node.parentNode.parentNode;f.table=b.table.getElement();if(!b.table.parentNode){a=d.getRange();h.range=a;b.node=h.range.start;f.node=b.node.getElement();h.node=b.node}}if(f.node.parent.children.length===1){h.el=f.table;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments)}else{try{d.suspendEvent=true;h.viewportId=a.start.viewportId;b.next=b.node.nextSibling;b.prev=b.node.previousSibling;h.saveNode=[];console.log("del col",h,a);Ext.Array.each(f.table.children,function(e){f.tr=e;b.tr=f.tr.nodes[h.viewportId];f.td=f.tr.children[f.pos];b.td=f.td.nodes[h.viewportId];h.saveNode.push(b.td);f.tr.remove(f.td);b.tr.removeChild(b.td)});f.table.sync(h.viewportId);d.suspendEvent=false;b.cursor=b.next;b.cursor=b.cursor?b.cursor:b.prev;b.cursor=b.cursor?b.cursor:b.table;h.saveRange={startNode:d.getDeepFirst(b.cursor)};d.setCursor(h.saveRange);h.els=f;h.range=a;g.verifyElement(f.node);c=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.removeNext()}}return c},unExecute:function(){var g=this,h=g.getData(),b={},f={},d=false,c=FBEditor.editor.Manager,a;if(h.el){d=FBEditor.editor.command.DeleteCommand.prototype.unExecute.apply(this,arguments)}else{try{c.suspendEvent=true;a=h.range;f=h.els;console.log("undo del col",b,f,a);Ext.Array.each(f.table.children,function(e){f.tr=e;b.tr=f.tr.nodes[h.viewportId];b.undoTd=h.saveNode.shift();f.undoTd=b.undoTd.getElement();if(f.tr.children[f.pos]){f.td=f.tr.children[f.pos];b.td=f.td.nodes[h.viewportId];f.tr.insertBefore(f.undoTd,f.td);b.tr.insertBefore(b.undoTd,b.td)}else{f.tr.add(f.undoTd);b.tr.appendChild(b.undoTd)}});f.table.sync(h.viewportId);c.suspendEvent=false;h.saveRange={startNode:a.start,startOffset:a.offset.start,focusElement:f.node};c.setCursor(h.saveRange);d=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});FBEditor.editor.HistoryManager.remove()}}return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DelColCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DelRowCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var f=this,g=f.getData(),b={},e={},d=FBEditor.editor.Manager,a,c;b.node=g.node;e.node=b.node.getElement();a=g.range||d.getRange();g.range=a;while(!e.node.isTr){b.node=b.node.parentNode;e.node=b.node.getElement();if(!b.node.parentNode.parentNode){a=d.getRange();g.range=a;b.node=g.range.start;e.node=b.node.getElement();g.node=b.node}}b.table=b.node.parentNode;e.table=b.table.getElement();g.el=e.table.children.length===1?e.table:e.node;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments);return c}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DelRowCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DeleteCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var f=this,g=f.getData(),b={},e={},d=FBEditor.editor.Manager,a,c;b.node=g.node;e.node=b.node.getElement();a=g.range||d.getRange();g.range=a;while(!e.node.isTable){b.node=b.node.parentNode;e.node=b.node.getElement();if(!b.node.parentNode.parentNode){a=d.getRange();g.range=a;b.node=g.range.start;e.node=b.node.getElement();g.node=b.node}}g.el=e.node;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments);return c}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DeleteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertColNextCommand",FBEditor.editor.command.table.AbstractInsertColCommand,{insertCol:function(b,j,c,a){var d=this,f=d.getData(),g={},h={};g.td=b;h.td=g.td.nodes[f.viewportId];h.newTd=j;g.newTd=h.newTd.getElement();h.tr=h.td.parentNode;g.tr=h.tr.getElement();h.next=h.td.nextSibling;if(h.next){g.next=h.next.getElement();g.tr.insertBefore(g.newTd,g.next);h.tr.insertBefore(h.newTd,h.next)}else{g.tr.add(g.newTd);h.tr.appendChild(h.newTd)}c.p=c.table.first().children[c.pos+1].first()}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertColNextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertColPrevCommand",FBEditor.editor.command.table.AbstractInsertColCommand,{insertCol:function(b,j,c,a){var d=this,f=d.getData(),g={},h={};g.td=b;h.td=g.td.nodes[f.viewportId];h.newTd=j;g.newTd=h.newTd.getElement();h.tr=h.td.parentNode;g.tr=h.tr.getElement();g.tr.insertBefore(g.newTd,g.td);h.tr.insertBefore(h.newTd,h.td);c.p=c.table.first().children[c.pos].first()}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertColPrevCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertRowNextCommand",FBEditor.editor.command.table.AbstractInsertRowCommand,{insertRow:function(b,a){a.next=a.node.nextSibling;if(a.next){b.next=a.next.getElement();b.parent.insertBefore(b.tr,b.next);a.parent.insertBefore(a.tr,a.next)}else{b.parent.add(b.tr);a.parent.appendChild(a.tr)}}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertRowNextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertRowPrevCommand",FBEditor.editor.command.table.AbstractInsertRowCommand,{insertRow:function(b,a){b.parent.insertBefore(b.tr,b.node);a.parent.insertBefore(a.tr,a.node)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertRowPrevCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.JoinCellsCommand",FBEditor.editor.command.table.AbstractCellCommand,{execute:function(){var h=this,d=h.getData(),g=false,c={},a={},b=FBEditor.editor.Manager,j,k;try{b.suspendEvent=true;j=d.opts.viewportId;b.clearSelectNodes(j);k=d.opts.size;a.table=d.opts.table;c.table=a.table.getElement();c.joinTd=h.joinCells(c.table,k,j);c.table.sync(j);b.suspendEvent=false;a.cursor=c.joinTd.nodes[j];h.setCursor(c,a);d.nodes=a;d.els=c;h.verifyElement(c.table);g=true}catch(f){Ext.log({level:"warn",msg:f,dump:f});FBEditor.editor.HistoryManager.removeNext()}return g},unExecute:function(){var f=this,g=f.getData(),d=false,c={},a={},b=FBEditor.editor.Manager,j;try{b.suspendEvent=true;j=g.opts.viewportId;c=g.els;f.splitCell(c.joinTd,j);c.table.sync(j);b.suspendEvent=false;a.cursor=c.joinTd.nodes[j];f.setCursor(c,a);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"JoinCellsCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.SplitCellsCommand",FBEditor.editor.command.table.AbstractCellCommand,{execute:function(){var f=this,g=f.getData(),d=false,c={},a={},b=FBEditor.editor.Manager,j;try{b.suspendEvent=true;j=g.opts.viewportId;c.td=g.opts.td;c.table=c.td.getParentName("table");f.splitCell(c.td,j);c.table.sync(j);b.suspendEvent=false;a.cursor=c.td.nodes[j];f.setCursor(c,a);g.nodes=a;g.els=c;f.verifyElement(c.table);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.removeNext()}return d},unExecute:function(){var f=this,g=f.getData(),d=false,c={},a={},b=FBEditor.editor.Manager,j;try{b.suspendEvent=true;j=g.opts.viewportId;a=g.nodes;c=g.els;c.joinTd=f.joinCells(c.table,c.td._sizeSelection,j);c.table.sync(j);a.cursor=c.joinTd.nodes[j];f.setCursor(c,a);b.suspendEvent=false;d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});FBEditor.editor.HistoryManager.remove()}return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"SplitCellsCommand"],0));(Ext.cmd.derive("FBEditor.model.resource.Resource",Ext.data.Model,{fields:[{name:"url",type:"string"},{name:"name",type:"string"},{name:"baseName",type:"string"},{name:"extension",type:"string"},{name:"date",type:"string"},{name:"size",type:"string"},{name:"type",type:"string"}]},0,0,0,0,0,0,[FBEditor.model.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.store.AbstractStore",Ext.Base,{url:"",rootProperty:null,data:null,params:null,callback:null,cacheData:{},setParams:function(a){this.params=Ext.clone(a)},getParams:function(){return this.params},setCallback:function(a){this.callback=a},load:function(){var d=this,b=FBEditor.webworker.Manager,a=d.getUrl(),c;if(true){
/*!me.cacheData[url]*/
if(d._master){d.abort()}c=b.factory("httpRequest");d._master=c;c.post({callbackId:d.url,url:a},function(e,g){var f;f=e?JSON.parse(e):null;if(f&&d.rootProperty){f=f[d.rootProperty]?f[d.rootProperty]:null}d.cacheData[a]=f;d.data=f;d.afterLoad(f)},d)}else{d.data=d.cacheData[a];d.afterLoad(d.data)}},loadData:function(b){var a=this;a.data=b||null;a.afterLoad(b)},afterLoad:function(b){var a=this,c=a.callback;if(c){c.fn.apply(c.scope,[b])}},abort:function(){var a=this;if(a._master){a._master.abort()}},getUrl:function(){var b=this,c=b.params,a=b.url;if(c){a+="?";Ext.Object.each(c,function(d,e){a+=d+"="+e+"&"});a=a.trim("&")}return a},getRecord:function(b,e){var c=this,d=c.data,a=null;if(d){Ext.Array.each(d,function(f){if(f[b]&&f[b]==e){a=f;return false}})}return a}},0,0,0,0,0,0,[FBEditor.store,"AbstractStore"],0));(Ext.cmd.derive("FBEditor.store.desc.relations.Object",Ext.data.Store,{storeId:"desc-relations-object",pageSize:50,sorters:[{property:"name",direction:"ASC"}],fields:["id","uuid","name","persons","series"],proxy:{type:"ajax",url:"https://hub.litres.ru/pages/machax_arts/",reader:{type:"json",rootProperty:"arts"}}},0,0,0,0,0,0,[FBEditor.store.desc.relations,"Object"],0));(Ext.cmd.derive("FBEditor.store.desc.relations.Subject",Ext.data.Store,{storeId:"desc-relations-subject",pageSize:50,sorters:[{property:"last_name",direction:"ASC"},{property:"first_name",direction:"ASC"},{property:"middle_name",direction:"ASC"}],fields:["id","uuid","last_name","first_name","middle_name"],proxy:{type:"ajax",url:"https://hub.litres.ru/pages/machax_persons/",reader:{type:"json",rootProperty:"persons"}}},0,0,0,0,0,0,[FBEditor.store.desc.relations,"Subject"],0));(Ext.cmd.derive("FBEditor.store.resource.Navigation",Ext.data.TreeStore,{defaultRootText:"Ресурсы",rootVisible:false,proxy:{type:"memory"},filters:[],root:{icon:" ",cls:"treenavigation-root treenavigation-root-resource"}},0,0,0,0,0,0,[FBEditor.store.resource,"Navigation"],0));(Ext.cmd.derive("FBEditor.store.resource.Resource",Ext.data.Store,{model:"FBEditor.model.resource.Resource"},0,0,0,0,0,0,[FBEditor.store.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.ux.FieldCleaner",Ext.plugin.Abstract,{pluginId:"fieldCleaner",style:"",toLowerCase:true,capitalize:true,btn:null,field:null,translateText:{cleaning:"Уборка"},constructor:function(a){var b=this;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(b){var a=this;a.field=b;b.on({scope:a,afterrender:a.afterRenderField})},handler:function(){var a=this,b=a.field;b.fireEvent("beforeFieldCleaner");a.convertVal();b.fireEvent("afterFieldCleaner")},convertVal:function(){var d=this,e=d.field,f=e.getValue(),a=FBEditor.desc.Manager,b=a.getRegexpUtf();function c(k,g,j,h){k=g?g:"";k+=Ext.String.capitalize(j)+h;k+=h==="</p>"?"":" ";return k}if(f){f=d.toLowerCase?f.toLowerCase():f;f=f.replace(b,"");f=d.capitalize?f.replace(/(<p>)? *(.+?)([.!?]+|<\/p>|$)/ig,c):f;f=f.trim();e.setValue(f)}},afterRenderField:function(){var b=this,c=b.field,a;a=Ext.dom.Element.create({tag:"i","class":"plugin-fieldCleaner fa fa-paint-brush x-btn x-btn-plain-toolbar-small",style:b.style,title:b.translateText.cleaning});b.btn=a;a.insertAfter(c.inputEl);a.addClsOnClick("x-btn-pressed");a.addClsOnOver("x-btn-over");a.on({scope:b,click:b.handler})}},1,0,0,0,["plugin.fieldCleaner"],0,[FBEditor.ux,"FieldCleaner"],0));(Ext.cmd.derive("FBEditor.ux.FieldContainerReplicator",Ext.plugin.Abstract,{pluginId:"fieldcontainerreplicator",groupName:"fieldcontainerreplicator",btnPos:"end",btnStyle:{},btnCls:"",putStyle:{marginLeft:"20px"},enableBtnPut:false,btnAddCfg:null,btnRemoveCfg:null,btnPutCfg:null,alwaysInsertFirst:false,translateText:{add:"Добавить",remove:"Удалить",put:"Вложить"},constructor:function(a){var b=this;b.btnAddCfg={html:'<i class="fa fa-plus" title="'+b.translateText.add+'"></i>',cls:"btn-plus"};b.btnRemoveCfg={html:'<i class="fa fa-minus" title="'+b.translateText.remove+'"></i>',cls:"btn-minus"};b.btnPutCfg={html:'<i class="fa fa-level-up fa-rotate-90" title="'+b.translateText.put+'"></i>',cls:"btn-put"};b.groupName=a.groupName||b.groupName;b.btnPos=a.btnPos||b.btnPos;b.btnAddCfg=a.btnAddCfg?Ext.apply(b.btnAddCfg,a.btnAddCfg):b.btnAddCfg;b.btnRemoveCfg=a.btnRemoveCfg?Ext.apply(b.btnRemoveCfg,a.btnRemoveCfg):b.btnRemoveCfg;b.btnStyle=a.btnStyle?Ext.apply(b.btnStyle,a.btnStyle):b.btnStyle;b.putStyle=a.putStyle?Ext.apply(b.putStyle,a.putStyle):b.putStyle;b.enableBtnPut=a.enableBtnPut||b.enableBtnPut;b.btnPutCfg=a.btnPutCfg?Ext.apply(b.btnPutCfg,a.btnPutCfg):b.btnPutCfg;b.btnCls=a.btnCls||b.btnCls;b.alwaysInsertFirst=a.alwaysInsertFirst||b.alwaysInsertFirst;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(g){var e=this,b=g,a=e.btnPos,h=e.groupName,d=e.getButtons(),c=e.enableBtnPut,f;b.on("added",function(j){e.checkLastInGroup(j.ownerCt,j.replicatorId)});b.replicatorId=b.replicatorId||h+"-"+Ext.id();f=c?b.items.last():b;switch(a){case"begin":f.insert(0,d);break;case"end":f.add(d);break}},getBtnAdd:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-add-"+a.groupName+"]")[0]},getBtnRemove:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-remove-"+a.groupName+"]")[0]},getBtnPut:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-put-"+a.groupName+"]")[0]},getButtons:function(){var f=this,h=f.btnStyle,a=f.btnAddCfg,b=f.btnRemoveCfg,c=f.enableBtnPut,j=f.btnPutCfg,d=f.btnCls,g,e=[];j=Ext.apply(j,{handler:f.putFields,scope:f,name:"fieldcontainerreplicator-btn-put-"+f.groupName});a=Ext.apply(a,{handler:f.addFields,scope:f,name:"fieldcontainerreplicator-btn-add-"+f.groupName});b=Ext.apply(b,{handler:f.removeFields,scope:f,name:"fieldcontainerreplicator-btn-remove-"+f.groupName});e.push(b);e.push(a);if(c){e.push(j)}g=[{xtype:"fieldcontainer",cls:"plugin-fieldcontainerreplicator "+d,hideLabel:true,flex:0,height:"100%",defaults:{xtype:"button",tabIndex:-1,style:h},items:e}];return g},addFields:function(b){var g=this,c=g.enableBtnPut,a,k,h,d,f,e,j;b=b||g.getBtnAdd();if(b){k=b.prev();k.enable();a=c?b.ownerCt.ownerCt.ownerCt:b.ownerCt.ownerCt;h=a.replicatorId;d=a.ownerCt;f=a.cloneConfig({replicatorId:h});j=d.items.indexOf(a);if(g.alwaysInsertFirst){j=0;d.insert(j,f)}else{j=j+1;d.add(j,f)}e=d.items.getAt(j).down("field:focusable");if(e){e.focus()}g.checkLastInGroup(d,h)}},putFields:function(d){var e=this,g=e.putStyle,a,c,f,b,h;d=d||e.getBtnPut();a=d.ownerCt.ownerCt.ownerCt;f=a.replicatorId+"-child";h=a.cloneConfig({replicatorId:f,style:g});c=h.down("[name=fieldcontainerreplicator-btn-remove-"+e.groupName+"]");c.on("afterrender",function(){this.enable()});a.add(h);h.fireEvent("putFields",d);b=h.down("field:focusable");b.focus();return h},removeFields:function(c){var e=this,b=e.enableBtnPut,a,d,f;c=c||e.getBtnRemove();a=b?c.ownerCt.ownerCt.ownerCt:c.ownerCt.ownerCt;d=a.ownerCt;f=a.replicatorId;d.remove(a);d.fireEvent("removeFields");if(!/child/.test(f)){e.checkLastInGroup(d,f)}},checkLastInGroup:function(b,e){var c=this,f,d,a;f=b.query("[replicatorId="+e+"]");if(f.length){d=f.length===1;a=f[f.length-1].query("[name=fieldcontainerreplicator-btn-remove-"+c.groupName+"]")[0];if(d){a.disable()}else{a.enable()}}return d}},1,0,0,0,["plugin.fieldcontainerreplicator"],0,[FBEditor.ux,"FieldContainerReplicator"],0));(Ext.cmd.derive("FBEditor.ux.SearchField",Ext.plugin.Abstract,{pluginId:"searchField",style:"",loader:null,field:null,isEmpty:false,translateText:{searching:"Идет поиск...",notFound:"Ничего не найдено"},constructor:function(a){var b=this;b.style=b.style||a.style;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(b){var a=this;a.field=b;b.on({scope:a,afterrender:a.afterRenderField,blur:a.blurField})},hideLoader:function(){var b=this,a=b.loader;b.isEmpty=false;a.hide();a.replaceCls("fa-check","fa-spinner fa-pulse");a.dom.setAttribute("title",b.translateText.searching)},showLoader:function(){var b=this,a=b.loader;a.show()},emptyLoader:function(){var b=this,a=b.loader;b.isEmpty=true;a.replaceCls("fa-spinner fa-pulse","fa-check");a.dom.setAttribute("title",b.translateText.notFound)},blurField:function(){var a=this;if(a.isEmpty){a.hideLoader()}},afterRenderField:function(){var b=this,c=b.field,a;a=Ext.dom.Element.create({tag:"i","class":"plugin-searchField-loader fa fa-spinner fa-pulse fa-lg",style:b.style});a.insertAfter(c.inputEl);b.loader=a;b.hideLoader()}},1,0,0,0,["plugin.searchField"],0,[FBEditor.ux,"SearchField"],0));(Ext.cmd.derive("FBEditor.view.button.AbstractFileButton",Ext.form.field.FileButton,{afterTpl:'<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" type="file" size="1" name="{inputName}" role="{role}" <tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl> ',accept:"",initComponent:function(){var a=this;if(a.accept){a.afterTpl+='accept="'+a.accept+'" '}a.afterTpl+=">";Ext.form.field.FileButton.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this,b;Ext.form.field.FileButton.prototype.afterRender.apply(this,arguments);b=a.fileInputEl.dom;a.fileInputEl.on({change:function(c){Ext.defer(function(){b.value=null},100)}})}},0,0,["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},0,0,[FBEditor.view.button,"AbstractFileButton"],0));(Ext.cmd.derive("FBEditor.view.button.AbstractOperationResource",Ext.button.Button,{width:"100%",cmdClass:"",nameResource:null,handler:function(){var a=this,c=a.cmdClass,b;b=Ext.create(c,{nameResource:a.nameResource});if(b&&b.execute()){FBEditor.HistoryCommand.add(b)}},setResource:function(a){this.nameResource=a}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.button,"AbstractOperationResource"],0));(Ext.cmd.derive("FBEditor.view.button.CreateFolderResource",Ext.button.Button,{id:"button-createfolder-resource",text:"Создать папку",handler:function(){var a;a=Ext.create("FBEditor.command.CreateFolderResource");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,["button-createfolder-resource"],["component","box","button","button-createfolder-resource"],{component:true,box:true,button:true,"button-createfolder-resource":true},["widget.button-createfolder-resource"],0,[FBEditor.view.button,"CreateFolderResource"],0));(Ext.cmd.derive("FBEditor.view.button.DeleteResource",FBEditor.view.button.AbstractOperationResource,{id:"button-delete-resource",text:"Удалить",cmdClass:"FBEditor.command.DeleteResource"},0,["button-delete-resource"],["component","box","button","button-delete-resource"],{component:true,box:true,button:true,"button-delete-resource":true},["widget.button-delete-resource"],0,[FBEditor.view.button,"DeleteResource"],0));(Ext.cmd.derive("FBEditor.view.button.LoadResource",FBEditor.view.button.AbstractFileButton,{id:"button-load-resource",text:"Загрузить ресурс",listeners:{change:function(b,a){var c;c=Ext.create("FBEditor.command.LoadResource",{evt:a});if(c.execute()){FBEditor.HistoryCommand.add(c)}}},initComponent:function(){var b=this,a=FBEditor.resource.Manager.types;b.accept=a.join(",");FBEditor.view.button.AbstractFileButton.prototype.initComponent.apply(this,arguments)}},0,["button-load-resource"],["component","box","button","filebutton","button-load-resource"],{component:true,box:true,button:true,filebutton:true,"button-load-resource":true},["widget.button-load-resource"],0,[FBEditor.view.button,"LoadResource"],0));(Ext.cmd.derive("FBEditor.view.button.MoveResource",FBEditor.view.button.AbstractOperationResource,{id:"button-move-resource",text:"Переместить",cmdClass:"FBEditor.command.MoveResource"},0,["button-move-resource"],["component","box","button","button-move-resource"],{component:true,box:true,button:true,"button-move-resource":true},["widget.button-move-resource"],0,[FBEditor.view.button,"MoveResource"],0));(Ext.cmd.derive("FBEditor.view.button.SaveResource",FBEditor.view.button.AbstractOperationResource,{id:"button-save-resource",text:"Сохранить как...",cmdClass:"FBEditor.command.SaveResource"},0,["button-save-resource"],["component","box","button","button-save-resource"],{component:true,box:true,button:true,"button-save-resource":true},["widget.button-save-resource"],0,[FBEditor.view.button,"SaveResource"],0));(Ext.cmd.derive("FBEditor.view.button.SelectCover",Ext.button.Button,{id:"button-select-cover",text:"Выбрать",handler:function(){var b,a={},c=FBEditor.getBridgeWindow();a.win=c.FBEditor.resource.ExplorerManager.getWindow();b=c.Ext.create("FBEditor.command.SelectCover",a);if(b.execute()){c.FBEditor.HistoryCommand.add(b)}}},0,["button-select-cover"],["component","box","button","button-select-cover"],{component:true,box:true,button:true,"button-select-cover":true},["widget.button-select-cover"],0,[FBEditor.view.button,"SelectCover"],0));(Ext.cmd.derive("FBEditor.view.button.desc.Load",Ext.button.Button,{id:"button-desc-load",text:"Загрузить",handler:function(){var b,a={},c=FBEditor.getBridgeWindow();b=c.Ext.create("FBEditor.command.LoadDesc",a);if(b.execute()){c.FBEditor.HistoryCommand.add(b)}}},0,["button-desc-load"],["component","box","button","button-desc-load"],{component:true,box:true,button:true,"button-desc-load":true},["widget.button-desc-load"],0,[FBEditor.view.button.desc,"Load"],0));(Ext.cmd.derive("FBEditor.view.button.desc.Save",Ext.button.Button,{id:"button-desc-save",text:"Сохранить",handler:function(){var b,a={},c=FBEditor.getBridgeWindow();b=c.Ext.create("FBEditor.command.SaveDesc",a);if(b.execute()){c.FBEditor.HistoryCommand.add(b)}}},0,["button-desc-save"],["component","box","button","button-desc-save"],{component:true,box:true,button:true,"button-desc-save":true},["widget.button-desc-save"],0,[FBEditor.view.button.desc,"Save"],0));(Ext.cmd.derive("FBEditor.view.button.editor.ConvertElement",Ext.button.Button,{id:"button-editor-convert-element",text:"Превратить в текст",handler:function(){var a=this,d=FBEditor.getBridgeWindow(),c={},b;c.el=a.element;b=d.Ext.create("FBEditor.editor.command.ConvertToTextCommand",c);if(b.execute()){}},verify:function(){var h=this,g=false,e={},b={},c=FBEditor.getBridgeWindow(),d=c.FBEditor.editor.Manager,a=d.getSchema(),j,f;f=d.getRange();if(!f){return false}j=f.start.viewportId;e.node=h.element;b.node=e.node.nodes[j];e.parent=e.node.parent;b.parent=e.parent.nodes[j];e.nameEl=e.parent.getName();e.pos=e.parent.getChildPosition(e.node);e.namesElements=d.getNamesElements(e.parent);e.namesElements.splice(e.pos,1,"p");if(a.verify(e.nameEl,e.namesElements)||a.verify(e.node.getName(),["p"])){g=true}return g}},0,["button-editor-convert-element"],["component","box","button","button-editor-convert-element"],{component:true,box:true,button:true,"button-editor-convert-element":true},["widget.button-editor-convert-element"],0,[FBEditor.view.button.editor,"ConvertElement"],0));(Ext.cmd.derive("FBEditor.view.button.editor.DeleteElement",Ext.button.Button,{id:"button-editor-delete-element",text:"Удалить",element:null,handler:function(){var a=this,d=FBEditor.getBridgeWindow(),c,b={};b.el=a.element;c=d.Ext.create("FBEditor.editor.command.DeleteCommand",b);if(c.execute()){d.FBEditor.editor.HistoryManager.add(c)}}},0,["button-editor-delete-element"],["component","box","button","button-editor-delete-element"],{component:true,box:true,button:true,"button-editor-delete-element":true},["widget.button-editor-delete-element"],0,[FBEditor.view.button.editor,"DeleteElement"],0));(Ext.cmd.derive("FBEditor.view.button.editor.SelectImg",Ext.button.Button,{text:"Выбрать",scope:null,handler:function(a){var c,b={},d=FBEditor.getBridgeWindow();b.win=d.FBEditor.resource.ExplorerManager.getWindow();b.scope=a.scope;c=d.Ext.create("FBEditor.command.SelectImg",b);if(c.execute()){d.FBEditor.HistoryCommand.add(c)}}},0,["button-editor-select-img"],["component","box","button","button-editor-select-img"],{component:true,box:true,button:true,"button-editor-select-img":true},["widget.button-editor-select-img"],0,[FBEditor.view.button.editor,"SelectImg"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.ContainerController",Ext.app.ViewController,{onLoadData:function(d){var c=this,a=c.getView(),b=a.store;if(d){a.maskSearching(true);b.setParams(d);b.load()}}},0,0,0,0,["controller.container.desc.search"],0,[FBEditor.view.container.desc.search,"ContainerController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.OwnerContainerBehavior",Ext.Base,{xtypeContainerItems:"",clean:function(){var b=this,a;a=b.getContainerItems();a.clean()},abort:function(){var b=this,a;a=b.getContainerItems();a.abort()},getContainerItems:function(){var b=this,a;a=b.containerItems||b.down(b.xtypeContainerItems);return a}},0,0,0,0,0,0,[FBEditor.view.container.desc.search,"OwnerContainerBehavior"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.Container",Ext.Container,{controller:"container.desc.search",minWidth:300,listeners:{loadData:"onLoadData"},selectFn:Ext.emptyFn,maskEl:null,translateText:{searching:"Поиск...",notFound:"Ничего не найдено"},initComponent:function(){var b=this,a;a=b.createStore();b.store=a;a.setCallback({fn:b.load,scope:b});Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;Ext.container.Container.prototype.afterRender.apply(this,arguments);a=b.getEl().createChild({tag:"div",html:b.translateText.searching,"class":"mask-container-desc-search",children:[{tag:"i","class":"fa fa-spinner fa-pulse fa-3x"}]});a.setVisibilityMode(Ext.dom.Element.DISPLAY);b.maskEl=a;b.maskSearching(false)},createStore:function(){throw Error("Необходимо определить метод FBEditor.view.container.desc.search.Container#createStore()")},load:function(a){throw Error("Необходимо определить метод FBEditor.view.container.desc.search.Container#load()")},maskSearching:function(a){var c=this,b=c.maskEl;if(b){b.setVisible(a);c.doLayout()}},clean:function(){var a=this;Ext.suspendLayouts();a.removeAll();Ext.resumeLayouts();a.doLayout()},abort:function(){var b=this,a=b.store;b.maskSearching(false);a.abort();b.fireEvent("abort")},notFound:function(){var a=this;a.clean();a.add({border:true,layout:"fit",style:"text-align: center",html:a.translateText.notFound})}},0,["container-desc-search"],["component","box","container","container-desc-search"],{component:true,box:true,container:true,"container-desc-search":true},["widget.container-desc-search"],0,[FBEditor.view.container.desc.search,"Container"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.arts.ArtsController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.arts"],0,[FBEditor.view.container.desc.search.arts,"ArtsController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.arts.ArtsStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/machax_arts/",rootProperty:"arts"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.arts,"ArtsStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.arts.Arts",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.arts",cls:"container-search-arts",translateText:{searching:"Поиск произведений...",notFound:"Ничего не найдено",author:"Автор"},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.arts.ArtsStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(b&&b.length){Ext.Array.each(b,function(d){var e,c;if(d){c=[{xtype:"component",html:a.getHtmlItems(d),afterRender:function(){a.afterRenderItem(this)}}];e={xtype:"container",width:"100%",cls:"panel-arts-item",items:c};a.add(e)}})}else{a.notFound()}a.doLayout()},afterRenderItem:function(a){var c=this,b;b=a.getEl().query(".panel-arts-item-name")[0];b.addEventListener("click",function(){var d,e;e=this.getAttribute("art-id");d=c.store.getRecord("id",e);c.selectFn(d)})},getHtmlItems:function(d){var c=this,e=c.store.params||{},a,b;a=new Ext.XTemplate('<div class="panel-arts-item-common " style="background-color: {bgcolor}">   <tpl if="sale"><div class="panel-arts-item-sale"><span>$</span></div></tpl>   <tpl if="type"><div class="panel-arts-item-type"><span>{type_code}</span></div></tpl>   <div class="panel-arts-item-center">       <div class="panel-arts-item-name" art-id="{id}">           <a style="color: {link_color}" target="_blank"               title="{owner_login}"               href="https://hub.litres.ru/pages/edit_object/?art={id}">{name}</a>       </div>       <div class="panel-arts-item-author">{authors}</div>       <div class="panel-arts-item-date">{registered}</div>   </div></div>');d.name=d.name?d.name.replace(new RegExp("("+e.q+")","i"),"<b>$1</b>"):"";d.name=d.name.trim();d.bgcolor="white";d.bgcolor=Number(d.unchecked)?"#dadada":d.bgcolor;d.link_color="#106edc";d.type=d.type?Number(d.type):0;d.sale=Ext.Array.contains([0,1,4],d.type)?Boolean(Number(d.on_sale)):false;switch(d.type){case 1:d.type_code="&#937;";break;case 2:case 6:d.type_code="&#920;";break;case 4:d.type_code="&#936;";break;case 11:case 12:d.type_code="&#8471;";break;case 16:d.type_code="&#9449;";break}d.authors="";Ext.Array.each(d.persons,function(f){d.authors+=f.title+" / "});d.authors=d.authors.replace(/ \/ $/,"");b=a.apply(d);return b}},0,["container-desc-search-arts"],["component","box","container","container-desc-search","container-desc-search-arts"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-arts":true},["widget.container-desc-search-arts"],0,[FBEditor.view.container.desc.search.arts,"Arts"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.persons.PersonsController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.persons"],0,[FBEditor.view.container.desc.search.persons,"PersonsController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.persons.PersonsStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/machax_persons/",rootProperty:"persons"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.persons,"PersonsStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.persons.Persons",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.persons",cls:"container-search-persons",params:null,countRepeatRequest:0,translateText:{creator:"Создатель",copyrighter:"Правообладатель",no:"нет",link:"Страница редактирования",notFound:"Ничего не найдено",searching:"Поиск персон..."},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.persons.PersonsStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(a.countRepeatRequest<3){a.countRepeatRequest++;if(b&&b.length){a.countRepeatRequest=0;Ext.Array.each(b,function(d){var c,e,f;if(d){e=[{xtype:"component",html:a.getHtmlItems(d),afterRender:function(){a.afterRenderItem(this)}}];if(d.arts&&d.arts.length){f=d.arts.length>=30?"29+":d.arts.length;e.push({xtype:"fieldset",title:"Книги ("+f+")",collapsible:true,collapsed:true,html:a.getHtmlBooks(d)})}c={xtype:"container",width:"100%",cls:"container-search-persons-item",items:e};a.add(c)}})}else{a.repeatRequestSearch()}}else{a.countRepeatRequest=0;a.notFound()}a.doLayout()},repeatRequestSearch:function(){var a=this,b=Ext.clone(a.params);if(a.countRepeatRequest==1){if(b.first){b.tmp=b.first;b.first=b.last;b.last=b.tmp;delete b.tmp}else{a.countRepeatRequest++}}if(a.countRepeatRequest==2){b={last:b.last}}a.fireEvent("loadData",b)},afterRenderItem:function(a){var b=this,c;c=a.getEl().query(".container-search-persons-item-fio")[0];c.addEventListener("click",function(){var d,e;e=this.getAttribute("person-id");d=b.store.getRecord("id",e);b.selectFn(d)})},getHtmlItems:function(d){var c=this,e=c.store.params,a,b;a=new Ext.XTemplate('<div class="container-search-persons-item-common " style="background-color: {bgcolor}">   <div class="container-search-persons-item-fio" person-id="{id}">       <span style="color: {link_color}">{fio}</span>   </div>   <div class="container-search-persons-item-copyrighters" title="'+c.translateText.copyrighter+'"       style="color: {link_color}">   <tpl if="copyrighters">       <tpl for="copyrighters">           <span>{full_name}</span><br />       </tpl>   <tpl else>('+c.translateText.no+')</tpl>   </div>   <div class="container-search-persons-item-creator" title="'+c.translateText.creator+'"       style="color: {link_color}">{creator_login}</div>   <div class="container-search-persons-item-desc">{description}</div>   <div class="container-search-persons-item-time">{last_action_time}</div>   <a class="container-search-persons-item-link" target="_blank"           title="'+c.translateText.link+'"           href="https://hub.litres.ru/pages/edit_subject/?subject={id}">       <i class="fa fa-external-link"></i>   </a></div>');if(e){d.last_name=d.last_name&&e.last?d.last_name.replace(new RegExp("^("+e.last+")","i"),"<b>$1</b>"):d.last_name;d.first_name=d.first_name&&e.first?d.first_name.replace(new RegExp("^("+e.first+")","i"),"<b>$1</b>"):d.first_name;d.middle_name=d.middle_name&&e.middle?d.middle_name.replace(new RegExp("^("+e.middle+")","i"),"<b>$1</b>"):d.middle_name}d.fio="";d.fio+=d.last_name?d.last_name+" ":"";d.fio+=d.first_name?d.first_name+" ":"";d.fio+=d.middle_name?d.middle_name:"";d.fio=d.fio.trim();d.bgcolor="white";d.bgcolor=Number(d.unchecked)?"#f0f0f0":d.bgcolor;d.bgcolor=d.creator_login=="reader_release"?"#F3DBDA":d.bgcolor;d.bgcolor=d.copyrighters?"#FFFD9A":d.bgcolor;d.link_color="#2e7ed5";d.link_color=Number(d.unchecked)?"gray":d.link_color;b=a.apply(d);return b},getHtmlBooks:function(d){var c=this,a,b;a=new Ext.XTemplate('<ul class="container-search-persons-item-books"><tpl for="arts"><li class="container-search-persons-item-book" style="background-color: {bgcolor}">   <a style="color: {link_color}" target="_blank"        href="https://hub.litres.ru/pages/edit_object/?art={id}">{name}</a></li></tpl></ul>');Ext.Array.each(d.arts,function(e){e.bgcolor="white";e.bgcolor=Number(e.unchecked)?"#f0f0f0":e.bgcolor;e.bgcolor=Number(e.sell_open)?"#FFFD9A":e.bgcolor;e.link_color="#2e7ed5";e.link_color=Number(d.unchecked)?"gray":e.link_color});b=a.apply(d);return b}},0,["container-desc-search-persons"],["component","box","container","container-desc-search","container-desc-search-persons"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-persons":true},["widget.container-desc-search-persons"],0,[FBEditor.view.container.desc.search.persons,"Persons"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.sequence.SequenceController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.sequence"],0,[FBEditor.view.container.desc.search.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.sequence.SequenceStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/machax_sequences/",rootProperty:"series"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.sequence,"SequenceStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.sequence.Sequence",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.sequence",cls:"container-search-sequence",translateText:{link:"Страница редактирования",searching:"Поиск серий...",notFound:"Ничего не найдено"},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.sequence.SequenceStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(b&&b.length){Ext.Array.each(b,function(e){var c,d;if(e){d=[{xtype:"component",html:a.getHtmlItems(e),afterRender:function(){a.afterRenderItem(this)}}];c={xtype:"container",width:"100%",cls:"container-sequence-item",items:d};a.add(c)}})}else{a.notFound()}a.doLayout()},afterRenderItem:function(c){var b=this,a;a=c.getEl().query(".container-sequence-item-name")[0];a.addEventListener("click",function(){var d,e;e=this.getAttribute("sequence-id");d=b.store.getRecord("id",e);b.selectFn(d)})},getHtmlItems:function(d){var c=this,e=c.store.params||{},a,b;a=new Ext.XTemplate('<div class="container-sequence-item-common">   <div class="container-sequence-item-name" sequence-id="{id}">{name}</div>   <div class="container-sequence-item-id">{id}</div>   <a class="container-sequence-item-link" target="_blank"           title="'+c.translateText.link+'"           href="https://hub.litres.ru/pages/edit_serie/?id={id}">       <i class="fa fa-external-link"></i>   </a></div>');d.name=d.name?d.name.replace(new RegExp("("+e.q+")","i"),"<b>$1</b>"):"";d.name=d.name.trim();b=a.apply(d);return b}},0,["container-desc-search-sequence"],["component","box","container","container-desc-search","container-desc-search-sequence"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-sequence":true},["widget.container-desc-search-sequence"],0,[FBEditor.view.container.desc.search.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.tag.TagController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.tag"],0,[FBEditor.view.container.desc.search.tag,"TagController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.tag.TagStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/tags_search"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.tag,"TagStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.tag.Tag",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.tag",cls:"container-search-tag",translateText:{searching:"Поиск тегов...",notFound:"Ничего не найдено"},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.tag.TagStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(b&&b.length){Ext.Array.each(b,function(e){var c,d;if(e){d=[{xtype:"component",html:a.getHtmlItems(e),afterRender:function(){a.afterRenderItem(this)}}];c={xtype:"container",width:"100%",cls:"panel-tag-item",items:d};a.add(c)}})}else{a.notFound()}a.doLayout()},afterRenderItem:function(c){var b=this,a;a=c.getEl().query(".panel-tag-item-name")[0];a.addEventListener("click",function(){var d,e;e=this.getAttribute("tag-id");d=b.store.getRecord("id",e);b.selectFn(d)})},getHtmlItems:function(d){var c=this,e=c.store.params||{},a,b;a=new Ext.XTemplate('<div class="panel-tag-item-common">   <div class="panel-tag-item-name" tag-id="{id}">{value}</div></div>');d.value=d.value?d.value.replace(new RegExp("("+e.term+")","i"),"<b>$1</b>"):"";d.value=d.value.trim();b=a.apply(d);return b}},0,["container-desc-search-tag"],["component","box","container","container-desc-search","container-desc-search-tag"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-tag":true},["widget.container-desc-search-tag"],0,[FBEditor.view.container.desc.search.tag,"Tag"],0));(Ext.cmd.derive("FBEditor.view.field.combosearch.ComboSearchController",Ext.app.ViewController,{updateData:function(a){throw Error("Необходимо реализовать метод view.field.combosearch.ComboSearchController#updateData()")},onSelect:function(g,b){var d=this,a=d.getView(),c,h,f,e;e=b[0].data;c=d.getPlugin();h=c.getBtnAdd();c.addFields(h);f=d.getNextComboSearch();if(f){f.focus()}d.updateData(e);a.saveToStorage(e)},onClick:function(){var b=this,a=b.getView(),c;c=a.getValue();if(c){a.expand()}else{a.expandStorage()}},getPlugin:function(){var c=this,a=c.getView(),b;b=a.up("[plugins]").getPlugin("fieldcontainerreplicator");return b},getNextComboSearch:function(){var c=this,a=c.getView(),d,b;b=a.up("[plugins]").nextSibling();d=b?b.down("combosearch"):null;return d}},0,0,0,0,["controller.combosearch"],0,[FBEditor.view.field.combosearch,"ComboSearchController"],0));(Ext.cmd.derive("FBEditor.view.field.combosearch.ComboSearch",Ext.form.field.ComboBox,{controller:"combosearch",enableKeyEvents:true,autoSelect:false,queryMode:"remote",minChars:2,hideTrigger:true,queryDelay:200,defaultListConfig:{shadow:false,maxHeight:200},plugins:[{ptype:"fieldCleaner"},{ptype:"searchField",style:"margin-left: 258px"}],keyEnterAsTab:true,listeners:{select:"onSelect",click:"onClick"},queryDelayFast:200,queryDelaySlow:1000,localStorageLimit:10,getCreateStore:function(){throw Error("Необходимо реализовать метод view.field.combosearch.ComboSearch#getCreateStore()")},initComponent:function(){var a=this;a.store=a.getCreateStore();a.localStorage=FBEditor.getLocalStorage();Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a=b.inputEl.dom;b.getEl().on({click:function(){b.fireEvent("click")},scope:b});a.addEventListener("keydown",function(g){var f=Ext.event.Event,c=g.keyCode,d;d=[f.HOME,f.END,f.LEFT,f.RIGHT];if(Ext.Array.contains(d,c)){g.stopPropagation()}});Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments)},expandStorage:function(){var b=this,c=b.getDataStorage(),a=b.getStore();if(c.length){a.setAutoSort(false);a.loadData(c);b.expand();a.setAutoSort(true)}},saveToStorage:function(b){var a=this,e=FBEditor.getLocalStorage(),c=a.getDataStorage(),d;c.splice(0,0,b);if(c.length>a.localStorageLimit){c.pop()}d=Ext.JSON.encode(c);e.setItem(a.name,d)},getDataStorage:function(){var a=this,c=FBEditor.getLocalStorage(),b;b=Ext.JSON.decode(c.getItem(a.name));b=b?b:[];return b},onPaste:function(){var a=this,b=a.getValue();if(!a.isValid()){a.collapse();return}a.queryDelay=b&&b.length>a.minChars?a.queryDelayFast:a.queryDelaySlow;Ext.form.field.ComboBox.prototype.onPaste.apply(this,arguments)},onKeyUp:function(c){var b=this,a=c.getKey(),d=b.getValue(),f;if(!b.isValid()){b.collapse();return}f=b.inputEl.dom.selectionStart;if(a!==c.SPACE||a===c.SPACE&&f!==d.length){b.queryDelay=d&&d.length>b.minChars?b.queryDelayFast:b.queryDelaySlow;Ext.form.field.ComboBox.prototype.onKeyUp.apply(this,arguments)}},doRemoteQuery:function(b){var d=this,a=function(){d.afterQuery(b)},c;c=d.getPlugin("searchField");c.showLoader();d.collapse();if(d.pageSize){d.loadPage(1,{rawQuery:b.rawQuery,callback:a})}else{d.store.load({params:d.getParams(b.query),rawQuery:b.rawQuery,callback:a})}},afterQuery:function(a){var c=this,d,b;d=c.store.getData().items.length?c.store.getData().items:null;b=c.getPlugin("searchField");if(d){b.hideLoader()}else{b.emptyLoader()}c.expand();Ext.form.field.ComboBox.prototype.afterQuery.apply(this,arguments)}},0,["combosearch"],["component","box","field","textfield","pickerfield","combobox","combo","combosearch"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,combosearch:true},["widget.combosearch"],0,[FBEditor.view.field.combosearch,"ComboSearch"],0));(Ext.cmd.derive("FBEditor.view.field.country.CountryStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Неизвестно"},{value:"RU",name:"Россия"},{value:"AU",name:"Австралия"},{value:"AT",name:"Австрия"},{value:"AZ",name:"Азербайджан"},{value:"AX",name:"Аландские острова"},{value:"AL",name:"Албания"},{value:"DZ",name:"Алжир"},{value:"VI",name:"Американские Виргинские острова"},{value:"AS",name:"Американское Самоа"},{value:"AO",name:"Ангола"},{value:"AI",name:"Ангуилла"},{value:"AD",name:"Андорра"},{value:"AQ",name:"Антарктика"},{value:"AG",name:"Антигуа и Барбуда"},{value:"AR",name:"Аргентина"},{value:"AM",name:"Армения"},{value:"AW",name:"Аруба"},{value:"AF",name:"Афганистан"},{value:"BS",name:"Багамские острова"},{value:"BD",name:"Бангладеш"},{value:"BB",name:"Барбадос"},{value:"BH",name:"Бахрейн"},{value:"BY",name:"Беларусь"},{value:"BZ",name:"Белиз"},{value:"BE",name:"Бельгия"},{value:"BJ",name:"Бенин"},{value:"BM",name:"Бермудские Острова"},{value:"BG",name:"Болгария"},{value:"BO",name:"Боливия"},{value:"BA",name:"Босния и Герцеговина"},{value:"BW",name:"Ботсвана"},{value:"BR",name:"Бразилия"},{value:"IO",name:"Британская территория в Индийском океане"},{value:"VG",name:"Британские Виргинские Острова"},{value:"BN",name:"Бруней Даруссалам"},{value:"BF",name:"Буркина Фасо"},{value:"BI",name:"Бурунди"},{value:"BT",name:"Бутан"},{value:"VU",name:"Вануату"},{value:"VA",name:"Ватикан"},{value:"GB",name:"Великобритания"},{value:"HU",name:"Венгрия"},{value:"VE",name:"Венесуэла"},{value:"UM",name:"Внешние малые острова (США)"},{value:"TL",name:"Восточный Тимор"},{value:"VN",name:"Вьетнам"},{value:"GA",name:"Габон"},{value:"HT",name:"Гаити"},{value:"GY",name:"Гайана"},{value:"GM",name:"Гамбия"},{value:"GH",name:"Гана"},{value:"GP",name:"Гваделупа"},{value:"GT",name:"Гватемала"},{value:"GN",name:"Гвинея"},{value:"GW",name:"Гвинея-Биссау"},{value:"DE",name:"Германия"},{value:"GG",name:"Гернси"},{value:"GI",name:"Гибралтар"},{value:"HN",name:"Гондурас"},{value:"HK",name:"Гонконг, Особый Административный Район Китая"},{value:"GD",name:"Гренада"},{value:"GL",name:"Гренландия"},{value:"GR",name:"Греция"},{value:"GE",name:"Грузия"},{value:"GU",name:"Гуам"},{value:"DK",name:"Дания"},{value:"CD",name:"Демократическая Республика Конго"},{value:"JE",name:"Джерси"},{value:"DJ",name:"Джибути"},{value:"DO",name:"Доминиканская Республика"},{value:"EG",name:"Египет"},{value:"ZM",name:"Замбия"},{value:"EH",name:"Западная Сахара"},{value:"ZW",name:"Зимбабве"},{value:"IL",name:"Израиль"},{value:"IN",name:"Индия"},{value:"ID",name:"Индонезия"},{value:"JO",name:"Иордания"},{value:"IQ",name:"Ирак"},{value:"IR",name:"Иран"},{value:"IE",name:"Ирландия"},{value:"IS",name:"Исландия"},{value:"ES",name:"Испания"},{value:"IT",name:"Италия"},{value:"YE",name:"Йемен"},{value:"KZ",name:"Казахстан"},{value:"KY",name:"Каймановы острова"},{value:"KH",name:"Камбоджа"},{value:"CM",name:"Камерун"},{value:"CA",name:"Канада"},{value:"QA",name:"Катар"},{value:"KE",name:"Кения"},{value:"CY",name:"Кипр"},{value:"KI",name:"Кирибати"},{value:"CN",name:"Китай"},{value:"CC",name:"Кокосовые острова"},{value:"CO",name:"Колумбия"},{value:"KM",name:"Коморские Острова"},{value:"CG",name:"Конго"},{value:"KP",name:"Корейская Народно-Демократическая Республика"},{value:"CR",name:"Коста-Рика"},{value:"CI",name:"Кот д\u2019Ивуар"},{value:"CU",name:"Куба"},{value:"KW",name:"Кувейт"},{value:"KG",name:"Кыргызстан"},{value:"LA",name:"Лаос"},{value:"LV",name:"Латвия"},{value:"LS",name:"Лесото"},{value:"LR",name:"Либерия"},{value:"LB",name:"Ливан"},{value:"LY",name:"Ливия"},{value:"LT",name:"Литва"},{value:"LI",name:"Лихтенштейн"},{value:"LU",name:"Люксембург"},{value:"MU",name:"Маврикий"},{value:"MR",name:"Мавритания"},{value:"MG",name:"Мадагаскар"},{value:"YT",name:"Майотта"},{value:"MO",name:"Макао (особый административный район КНР)"},{value:"MK",name:"Македония"},{value:"MW",name:"Малави"},{value:"MY",name:"Малайзия"},{value:"ML",name:"Мали"},{value:"MV",name:"Мальдивы"},{value:"MT",name:"Мальта"},{value:"MA",name:"Марокко"},{value:"MQ",name:"Мартиник"},{value:"MH",name:"Маршалловы Острова"},{value:"MX",name:"Мексика"},{value:"MZ",name:"Мозамбик"},{value:"MD",name:"Молдова"},{value:"MC",name:"Монако"},{value:"MN",name:"Монголия"},{value:"MS",name:"Монсеррат"},{value:"MM",name:"Мьянма"},{value:"NA",name:"Намибия"},{value:"NR",name:"Науру"},{value:"ZZ",name:"Неизвестный или недействительный регион"},{value:"NP",name:"Непал"},{value:"NE",name:"Нигер"},{value:"NG",name:"Нигерия"},{value:"AN",name:"Нидерландские Антильские острова"},{value:"NL",name:"Нидерланды"},{value:"NI",name:"Никарагуа"},{value:"NU",name:"Ниуе"},{value:"NZ",name:"Новая Зеландия"},{value:"NC",name:"Новая Каледония"},{value:"NO",name:"Норвегия"},{value:"AE",name:"Объединенные Арабские Эмираты"},{value:"OM",name:"Оман"},{value:"BV",name:"Остров Буве"},{value:"DM",name:"Остров Доминика"},{value:"IM",name:"Остров Мэн"},{value:"NF",name:"Остров Норфолк"},{value:"CX",name:"Остров Рождества"},{value:"BL",name:"Остров Святого Бартоломея"},{value:"MF",name:"Остров Святого Мартина"},{value:"SH",name:"Остров Святой Елены"},{value:"CV",name:"Острова Зеленого Мыса"},{value:"CK",name:"Острова Кука"},{value:"TC",name:"Острова Тёркс и Кайкос"},{value:"HM",name:"Острова Херд и Макдональд"},{value:"PK",name:"Пакистан"},{value:"PW",name:"Палау"},{value:"PS",name:"Палестинская автономия"},{value:"PA",name:"Панама"},{value:"PG",name:"Папуа-Новая Гвинея"},{value:"PY",name:"Парагвай"},{value:"PE",name:"Перу"},{value:"PN",name:"Питкерн"},{value:"PL",name:"Польша"},{value:"PT",name:"Португалия"},{value:"PR",name:"Пуэрто-Рико"},{value:"KR",name:"Республика Корея"},{value:"RE",name:"Реюньон"},{value:"RW",name:"Руанда"},{value:"RO",name:"Румыния"},{value:"US",name:"США"},{value:"SV",name:"Сальвадор"},{value:"WS",name:"Самоа"},{value:"SM",name:"Сан-Марино"},{value:"ST",name:"Сан-Томе и Принсипи"},{value:"SA",name:"Саудовская Аравия"},{value:"SZ",name:"Свазиленд"},{value:"SJ",name:"Свальбард и Ян-Майен"},{value:"MP",name:"Северные Марианские Острова"},{value:"SC",name:"Сейшельские Острова"},{value:"PM",name:"Сен-Пьер и Микелон"},{value:"SN",name:"Сенегал"},{value:"VC",name:"Сент-Винсент и Гренадины"},{value:"KN",name:"Сент-Киттс и Невис"},{value:"LC",name:"Сент-Люсия"},{value:"RS",name:"Сербия"},{value:"CS",name:"Сербия и Черногория"},{value:"SG",name:"Сингапур"},{value:"SY",name:"Сирийская Арабская Республика"},{value:"SK",name:"Словакия"},{value:"SI",name:"Словения"},{value:"SB",name:"Соломоновы Острова"},{value:"SO",name:"Сомали"},{value:"SD",name:"Судан"},{value:"SR",name:"Суринам"},{value:"SL",name:"Сьерра-Леоне"},{value:"TJ",name:"Таджикистан"},{value:"TH",name:"Таиланд"},{value:"TW",name:"Тайвань"},{value:"TZ",name:"Танзания"},{value:"TG",name:"Того"},{value:"TK",name:"Токелау"},{value:"TO",name:"Тонга"},{value:"TT",name:"Тринидад и Тобаго"},{value:"TV",name:"Тувалу"},{value:"TN",name:"Тунис"},{value:"TM",name:"Туркменистан"},{value:"TR",name:"Турция"},{value:"UG",name:"Уганда"},{value:"UZ",name:"Узбекистан"},{value:"UA",name:"Украина"},{value:"WF",name:"Уоллис и Футуна"},{value:"UY",name:"Уругвай"},{value:"FO",name:"Фарерские острова"},{value:"FM",name:"Федеративные Штаты Микронезии"},{value:"FJ",name:"Фиджи"},{value:"PH",name:"Филиппины"},{value:"FI",name:"Финляндия"},{value:"FK",name:"Фолклендские острова"},{value:"FR",name:"Франция"},{value:"GF",name:"Французская Гвиана"},{value:"PF",name:"Французская Полинезия"},{value:"TF",name:"Французские Южные Территории"},{value:"HR",name:"Хорватия"},{value:"CF",name:"Центрально-Африканская Республика"},{value:"TD",name:"Чад"},{value:"ME",name:"Черногория"},{value:"CZ",name:"Чешская республика"},{value:"CL",name:"Чили"},{value:"CH",name:"Швейцария"},{value:"SE",name:"Швеция"},{value:"LK",name:"Шри-Ланка"},{value:"EC",name:"Эквадор"},{value:"GQ",name:"Экваториальная Гвинея"},{value:"ER",name:"Эритрея"},{value:"EE",name:"Эстония"},{value:"ET",name:"Эфиопия"},{value:"ZA",name:"Южная Африка"},{value:"GS",name:"Южная Джорджия и Южные Сандвичевы Острова"},{value:"JM",name:"Ямайка"},{value:"JP",name:"Япония"}]},0,0,0,0,0,0,[FBEditor.view.field.country,"CountryStore"],0));(Ext.cmd.derive("FBEditor.view.field.country.CountryController",Ext.app.ViewController,{onChange:function(c,d){var b=c,e=d,a;a=b.findRecordByValue(e);if(!a||!e){b.reset()}}},0,0,0,0,["controller.countryfield"],0,[FBEditor.view.field.country,"CountryController"],0));(Ext.cmd.derive("FBEditor.view.field.country.Country",Ext.form.field.ComboBox,{controller:"countryfield",queryMode:"local",displayField:"name",valueField:"value",editable:false,listConfig:{maxHeight:"auto"},listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.field.country.CountryStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["countryfield"],["component","box","field","textfield","pickerfield","combobox","combo","countryfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,countryfield:true},["widget.countryfield"],0,[FBEditor.view.field.country,"Country"],0));(Ext.cmd.derive("FBEditor.view.field.datetime.Datetime",Ext.form.FieldContainer,{translateText:{date:"Дата",time:"Время"},initComponent:function(){var a=this;a.items=[{xtype:"datefield",fieldLabel:a.translateText.date,emptyText:a.translateText.date,hideLabel:true},{xtype:"timefield",format:"H:i:s",fieldLabel:a.translateText.time,emptyText:a.translateText.time,hideLabel:true}];Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments)}},0,["datetimefield"],["component","box","container","fieldcontainer","datetimefield"],{component:true,box:true,container:true,fieldcontainer:true,datetimefield:true},["widget.datetimefield"],0,[FBEditor.view.field.datetime,"Datetime"],0));(Ext.cmd.derive("FBEditor.view.field.lang.LangController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.expand()}},0,0,0,0,["controller.langfield"],0,[FBEditor.view.field.lang,"LangController"],0));(Ext.cmd.derive("FBEditor.view.field.lang.LangStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Это не перевод"},{value:"line",name:""},{value:"ru",name:"Русский"},{value:"uk",name:"Украинский"},{value:"en",name:"Английский"},{value:"de",name:"Немецкий"},{value:"fr",name:"Французский"},{value:"line",name:""},{value:"sq",name:"Албанский"},{value:"ar",name:"Арабский"},{value:"hy",name:"Армянский"},{value:"az",name:"Азербайджанский"},{value:"be",name:"Белорусский"},{value:"bg",name:"Болгарский"},{value:"bs",name:"Боснийский"},{value:"vi",name:"Вьетнамский"},{value:"hu",name:"Венгерский"},{value:"nl",name:"Голландский"},{value:"el",name:"Греческий"},{value:"ka",name:"Грузинский"},{value:"da",name:"Датский"},{value:"he",name:"Иврит"},{value:"id",name:"Индонезийский"},{value:"it",name:"Итальянский"},{value:"is",name:"Исландский"},{value:"es",name:"Испанский"},{value:"ca",name:"Каталанский"},{value:"zh",name:"Китайский"},{value:"lv",name:"Латышский"},{value:"lv",name:"Латышский"},{value:"lt",name:"Литовский"},{value:"ms",name:"Малайский"},{value:"mt",name:"Мальтийский"},{value:"mk",name:"Македонский"},{value:"no",name:"Норвежский"},{value:"pl",name:"Польский"},{value:"pt",name:"Португальский"},{value:"ro",name:"Румынский"},{value:"sr",name:"Сербский"},{value:"sk",name:"Словацкий"},{value:"sl",name:"Словенский"},{value:"th",name:"Тайский"},{value:"tr",name:"Турецкий"},{value:"fi",name:"Финский"},{value:"hr",name:"Хорватский"},{value:"cs",name:"Чешский"},{value:"sv",name:"Шведский"},{value:"et",name:"Эстонский"}]},0,0,0,0,0,0,[FBEditor.view.field.lang,"LangStore"],0));(Ext.cmd.derive("FBEditor.view.field.lang.Lang",Ext.form.field.ComboBox,{controller:"langfield",queryMode:"local",displayField:"name",valueField:"value",editable:true,typeAhead:true,value:"",hideTrigger:true,componentCls:"field-langfield",listConfig:{maxHeight:210,tpl:'<tpl for="."><tpl if="value!=\'line\'"><div class="x-boundlist-item">{name}</div><tpl else><div class="x-boundlist-item x-boundlist-item-line"></div></tpl></tpl>'},triggers:{ru:{cls:"langfield-trigger",extraCls:"langfield-trigger-ru",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},en:{cls:"langfield-trigger",extraCls:"langfield-trigger-en",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},fr:{cls:"langfield-trigger",extraCls:"langfield-trigger-fr",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},de:{cls:"langfield-trigger",extraCls:"langfield-trigger-de",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}}},listeners:{click:{element:"el",fn:"onClick"}},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.field.lang.LangStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},onTrigger:function(b,c,a){var d=this,e=c.id;d.setValue(e);a.stopPropagation()}},0,["langfield"],["component","box","field","textfield","pickerfield","combobox","combo","langfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,langfield:true},["widget.langfield"],0,[FBEditor.view.field.lang,"Lang"],0));(Ext.cmd.derive("FBEditor.view.field.textfieldclear.TextFieldClear",Ext.form.field.Text,{triggers:{foo:{cls:"textfieldclear-trigger",handler:function(){this.setValue("")}}}},0,["textfieldclear"],["component","box","field","textfield","textfieldclear"],{component:true,box:true,field:true,textfield:true,textfieldclear:true},["widget.textfieldclear"],0,[FBEditor.view.field.textfieldclear,"TextFieldClear"],0));(Ext.cmd.derive("FBEditor.view.form.desc.AbstractFieldController",Ext.app.ViewController,{onLoadData:function(e){var d=this,b=d.getView(),a,c;c=d.getPluginContainerReplicator(b);a=c.getCmp();Ext.Object.each(e,function(f,g){Ext.Object.each(g,function(h,j){var k=a.query("[name="+h+"]")[0];if(k){if(Ext.isObject(j)){k.fireEvent("loadData",j)}else{k.setValue(j)}}});if(e[parseInt(f)+1]){c.addFields();a=c.alwaysInsertFirst?a.previousSibling():a.nextSibling();c=a.getPlugin("fieldcontainerreplicator")}})},onAccessHub:function(){var e=this,b=e.getView(),c,a,d;c=b.down("[cls=form-desc-customBtn]");d=e.getPluginContainerReplicator(b);a=d.getCmp();if(!a.getValues()&&c){c.switchContainers(true)}},onEditable:function(c){var e=this,b=e.getView(),a,d;d=b.down("form-desc-title-alt").getPlugin("fieldcontainerreplicator");if(d){if(c){d.getBtnAdd().enable()}else{d.getBtnAdd().disable()}}a=b.query("[name]");Ext.Array.each(a,function(f){if(f.setEditable){f.setEditable(c)}})},onResetFields:function(){var a=this;a.resetContainer()},resetContainer:function(){var d=this,b=d.getView(),e,c,a,f;e=d.getContainersReplicator(b);Ext.each(e,function(h,g){if(g){b.remove(h)}else{h.fireEvent("resetContainer");c=d.getContainersReplicator(h);Ext.each(c,function(j){h.remove(j)});h.getPlugin("fieldcontainerreplicator").getBtnRemove().disable()}});a=document.querySelectorAll("#"+b.getId()+" .plugin-fieldreplicator");Ext.each(a,function(h,g){if(g){f=b.queryById(h.id);b.remove(f)}})},getContainersReplicator:function(a){return a.query("[name=plugin-fieldcontainerreplicator]")},getPluginContainerReplicator:function(a){var c=this,b;b=c.getContainersReplicator(a).length?c.getContainersReplicator(a)[0].getPlugin("fieldcontainerreplicator"):null;return b}},0,0,0,0,["controller.form.desc.abstractField"],0,[FBEditor.view.form.desc,"AbstractFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.AbstractFieldContainer",Ext.form.FieldContainer,{controller:"form.desc.abstractField",listeners:{accessHub:"onAccessHub",resetFields:"onResetFields",loadData:"onLoadData",editable:"onEditable"},fieldEventCache:[],afterRender:function(){var c=this,b,a;a=c.query("field");Ext.Array.each(a,function(d){if(!c.fieldEventCache[d.id]){c.initEventBlur(d)}});b=c.getPlugin("fieldcontainerreplicator");if(b){c.name="plugin-fieldcontainerreplicator"}Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments)},onAccessHub:function(){},clearInvalid:function(){var b=this,a=b.query("field");Ext.Array.each(a,function(c){if(c.clearInvalid){c.clearInvalid()}})},isValid:function(){var f=this,h=true,b=false,d=FBEditor.desc.Manager,a,e,g,c;c=f.query("field");Ext.Array.each(c,function(j){g=j.getValue();if(!g){e=j.up("[cls=block-container]");b=e?e.isEmptyBlock():false;if(b){e.clearInvalid()}}if(!b&&j.isValid){if(!j.isValid()){d.fieldsError.push(j);a=j.up("desc-fieldset");a.expand();a=j.up("desc-fieldsetinner");if(a){a.expand()}h=false}}});return h},getValues:function(e){var b=this,a=b.items,c=e;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c},removeEmptyValues:function(a){var b=null;Ext.Object.each(a,function(c,d){if(!Ext.isEmpty(d)){b=b||{};b[c]=d}});return b},getDataFields:function(a){var b=this,c=null;Ext.Object.each(a,function(d,e){var f=e.getValue();if(f){c=c||[];c.push(f)}});return c},updateData:function(b){var a=this;Ext.Object.each(b,function(c,d){var e=a.down("[name="+c+"]");if(e){if(Ext.isObject(d)){e.updateData(d)}else{e.setValue(d)}}})},isEmptyBlock:function(){var b=this,c=true,a;a=b.query("field");Ext.Array.each(a,function(d){if(d.getValue()){c=false;return false}});return c},initEventBlur:function(b){var a=this;a.fieldEventCache[b.id]=true;b.on("blur",function(){var c=this,e=c.getValue(),d;if(!e){d=c.up("[cls=block-container]");if(d&&d.isEmptyBlock()){d.clearInvalid()}}})}},0,["desc-fieldcontainer"],["component","box","container","fieldcontainer","desc-fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true},["widget.desc-fieldcontainer"],0,[FBEditor.view.form.desc,"AbstractFieldContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.DescController",Ext.app.ViewController,{onStartScroll:function(){var a=this,b=a._scrollWins||[];if(!a._scrollWins){b=Ext.ComponentQuery.query("form-desc-searchField-window");b.push(Ext.getCmp("form-desc-subjectTree")||Ext.widget("form-desc-subjectTree"));b.push(Ext.getCmp("form-desc-tag")||Ext.widget("form-desc-tag"));a._scrollWins=b}Ext.Array.each(b,function(c){if(c){c.close()}})},onAccessHub:function(){var a=FBEditor.getBridgeProps(),b=[Ext.getCmp("form-desc-sequence"),Ext.getCmp("form-desc-relations-subject"),Ext.getCmp("form-desc-relations-object"),Ext.getCmp("panel-toolstab-file-button-savedesc"),a.Ext.getCmp("panel-props-desc")];Ext.Array.each(b,function(c){if(c){c.fireEvent("accessHub")}})},onResize:function(e,c,a,b,g){var d=this,f=d._resizeWins||[];if(!d._resizeWins){f=Ext.ComponentQuery.query("form-desc-relations-subject-searchName-resultContainer");f.push(Ext.getCmp("form-desc-subjectTree")||Ext.widget("form-desc-subjectTree"));f.push(Ext.getCmp("form-desc-tag")||Ext.widget("form-desc-tag"));d._resizeWins=f}if(c!==b){Ext.Array.each(f,function(h){if(h){h.fireEvent("alignTo")}})}},onActivate:function(b){var c=b,a=c.items;if(!c._firstActivate){c._firstActivate=true;a.each(function(e){var d=e.require,f=e.autoExpand,g;g=d&&f?false:true;if(g){e.collapse()}})}},onLoadData:function(d){var c=this,a=c.getView(),b=a.getForm();a.fireEvent("reset");b.setValues(d);Ext.getCmp("form-desc-sequence").fireEvent("loadData",d.sequence);Ext.getCmp("form-desc-title").down("form-desc-title-alt").fireEvent("loadData",d["title-alt"]);Ext.getCmp("form-desc-periodical").down("form-desc-title-alt").fireEvent("loadData",d["periodical-title-alt"]);if(d.relations&&d.relations["relations-subject"]){Ext.getCmp("form-desc-relations-subject").fireEvent("loadData",d.relations["relations-subject"])}if(d.relations&&d.relations["relations-object"]){Ext.getCmp("form-desc-relations-object").fireEvent("loadData",d.relations["relations-object"])}Ext.getCmp("form-desc-classification-udc").fireEvent("loadData",d["classification-udc"]);Ext.getCmp("form-desc-classification-bbk").fireEvent("loadData",d["classification-bbk"]);Ext.getCmp("form-desc-subject").fireEvent("loadData",d["classification-subject"]);Ext.getCmp("form-desc-customInfo").fireEvent("loadData",d["custom-info"]);Ext.getCmp("form-desc-publishInfo").fireEvent("loadData",d["paper-publish-info"]);Ext.getCmp("form-desc-documentInfo-isbn").fireEvent("loadData",d["document-info-isbn"]);c.expandFieldset(d)},onReset:function(){var c=this,a=c.getView(),b=a.getForm(),d;d=a.query("[name=form-desc-plugin-fieldcontainerreplicator],form-desc-title, fieldset, form-desc-relations-subject-link");Ext.each(d,function(e){e.fireEvent("resetFields")});b.reset()},expandFieldset:function(d){var c=this,b=c.getView(),a;a=b.query("fieldset");Ext.each(a,function(e){e.fireEvent("checkExpand")})}},0,0,0,0,["controller.form.desc"],0,[FBEditor.view.form.desc,"DescController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.date.DateController",Ext.app.ViewController,{onBlur:function(){var e=this,a=e.getView(),d=a.getValue(),b=a.getRawValue(),c=new Date();a.fireEvent("beforeblur");if(/^[0-9]{4}$/.test(b)){a.setValue(b+"-01-01")}if(/^[0-9]{2}\.[0-9]{2}\.[0-9]{2}$/.test(b)){b=b.split(".");b[2]=c.getFullYear().toString().substr(0,2)+b[2];b[1]--;d=new Date(b[2],b[1],b[0]);if(c<d){b[2]=d.getFullYear()-100}d=new Date(b[2],b[1],b[0]);a.setValue(d)}}},0,0,0,0,["controller.form.desc.date"],0,[FBEditor.view.form.desc.date,"DateController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.date.Date",Ext.form.field.Date,{controller:"form.desc.date",altFormats:"Y-m-d|d.m.Y",format:"Y-m-d",listeners:{blur:"onBlur"}},0,["desc-date"],["component","box","field","textfield","pickerfield","datefield","desc-date"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true},["widget.desc-date"],0,[FBEditor.view.form.desc.date,"Date"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.Required",Ext.Base,{checkChangeCls:function(){var b=this,a=b._cls,c=b.isValid();b.removeCls(a);if(!c){b.addCls(a)}}},0,0,0,0,0,0,[FBEditor.view.form.desc.field,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.combobox.required.Required",Ext.form.field.ComboBox,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-combobox-required"],["component","box","field","textfield","pickerfield","combobox","combo","desc-field-combobox-required"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"desc-field-combobox-required":true},["widget.desc-field-combobox-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.combobox.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.link.Link",Ext.form.Display,{fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],linkTpl:'<a href="{href}" target="_blank" title="{title}">{value}</a>',_disableLink:false,disableLink:function(a){var b=this,c=b.getRawValue();b._disableLink=arguments.length?a:true;b.setValue(c)},getDisplayValue:function(){var a=this,b=a.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a._disableLink?b:new Ext.XTemplate(a.linkTpl).apply({href:b,value:b,title:""})}return c}},0,["form-desc-field-link"],["component","box","field","displayfield","form-desc-field-link"],{component:true,box:true,field:true,displayfield:true,"form-desc-field-link":true},["widget.form-desc-field-link"],0,[FBEditor.view.form.desc.field.link,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.link.uuid.Link",FBEditor.view.form.desc.field.link.Link,{cls:"form-desc-field-link-uuid",linkTpl:'<a href="https://hub.litres.ru/pages/any_uuid_redir/?uuid={href}" target="_blank" title="{title}">{value}</a>',translateText:{pageEditor:"Страница редактирования"},getDisplayValue:function(){var a=this,b=a.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a._disableLink?b:new Ext.XTemplate(a.linkTpl).apply({href:b,value:b,title:a.translateText.pageEditor})}return c}},0,["form-desc-field-link-uuid"],["component","box","field","displayfield","form-desc-field-link","form-desc-field-link-uuid"],{component:true,box:true,field:true,displayfield:true,"form-desc-field-link":true,"form-desc-field-link-uuid":true},["widget.form-desc-field-link-uuid"],0,[FBEditor.view.form.desc.field.link.uuid,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.number.required.Required",Ext.form.field.Number,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Number.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-number-required"],["component","box","field","textfield","spinnerfield","numberfield","desc-field-number-required"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true,"desc-field-number-required":true},["widget.desc-field-number-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.number.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.text.required.Required",Ext.form.field.Text,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-text-required"],["component","box","field","textfield","desc-field-text-required"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true},["widget.desc-field-text-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.text.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.textarea.required.Required",Ext.form.field.TextArea,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.TextArea.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-textarea-required"],["component","box","field","textfield","textareafield","textarea","desc-field-textarea-required"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true,"desc-field-textarea-required":true},["widget.desc-field-textarea-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.textarea.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.time.required.Required",Ext.form.field.Time,{allowBlank:false,_cls:"field-required",listeners:{change:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Time.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-time-required"],["component","box","field","textfield","pickerfield","combobox","combo","timefield","desc-field-time-required"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,timefield:true,"desc-field-time-required":true},["widget.desc-field-time-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.time.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetController",Ext.app.ViewController,{onCheckExpand:function(){var c=this,a=c.getView(),e,b,d;b=a.require;d=a.autoExpand;e=a.down('component[allowBlank/="true|false"]');if(!b&&d){if(e&&e.getValue()){a.expand()}}},onResetFields:function(){var a=this;a.resetFieldset()},resetFieldset:function(){var c=this,a=c.getView(),b,d;b=a.require;d=a.autoExpand;if(b&&d){a.expand()}else{a.collapse()}}},0,0,0,0,["controller.desc.fieldset"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldset",Ext.form.FieldSet,{controller:"desc.fieldset",collapsible:true,anchor:"100%",listeners:{resetFields:"onResetFields",checkExpand:"onCheckExpand",beforecollapse:function(a){Ext.suspendLayouts()},collapse:function(a){Ext.resumeLayouts()},beforeexpand:function(a){Ext.suspendLayouts()},expand:function(a){Ext.resumeLayouts()}},xtypeChild:"",require:false,autoExpand:true,initComponent:function(){var b=this,a=b.require,c=b.xtypeChild;b.title=b.title+'<a name="'+b.xtype+'"></a>';b.cls=b.xtype;if(!b.items){b.items=[{xtype:"form-desc-"+c,layout:"anchor",defaults:{anchor:"100%"}}]}Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,a=b.items,c=true;a.each(function(d){if(d.isValid&&!d.isValid()){c=false}});return c},getValues:function(e){var b=this,a=b.items,c=e;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c}},0,["desc-fieldset"],["component","box","container","fieldset","desc-fieldset"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true},["widget.desc-fieldset"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldset"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.annotation.AnnotationController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,b=c.getView(),a;a=b.items.first();if(a.getValue()){b.expand()}}},0,0,0,0,["controller.desc.fieldset.annotation"],0,[FBEditor.view.form.desc.fieldset.annotation,"AnnotationController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.htmleditor.HtmlEditorController",Ext.app.ViewController,{onPaste:function(c){var b=this,a=b.getView();a.cleanTags()},onBeforeFieldCleaner:function(){var b=this,a=b.getView(),c;a.normalizeValue();c=a.getValue();c=c.replace(/-<br\/>/igm,"");c=c.replace(/^(.{0,49}?)<br\/>/igm,"$1 ");c=c.replace(/-<\/p><p>/ig,"");c=c.replace(/<p>(.{0,49}?)<\/p><p>/ig,"<p>$1");while(/^(.*?)[^.,!?]+<br\/>/igm.test(c)){c=c.replace(/^(.*?[^.,!?]+)<br\/>/igm,"$1 ")}while(/<p>(.*?)[^.,!?]+<\/p><p>/ig.test(c)){c=c.replace(/<p>(.*?[^.,!?]+)<\/p><p>/ig,"<p>$1 ")}a.setValue(c)},onAfterFieldCleaner:function(){var b=this,a=b.getView(),c=a.getValue()}},0,0,0,0,["controller.form.desc.htmleditor"],0,[FBEditor.view.form.desc.htmleditor,"HtmlEditorController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.htmleditor.HtmlEditor",Ext.form.field.HtmlEditor,{controller:"form.desc.htmleditor",enableColors:false,enableAlignments:false,enableFont:false,enableFontSize:false,enableLists:false,height:150,listeners:{paste:"onPaste",beforeFieldCleaner:"onBeforeFieldCleaner",afterFieldCleaner:"onAfterFieldCleaner"},plugins:[{ptype:"fieldCleaner",toLowerCase:false,capitalize:false,style:"top: -8px; right: 5px"}],allowTags:["strong","em","a","br","p"],blockTags:["address","article","aside","audio","blockquote","caption","dd","details","div","fieldset","figcaption","form","footer","h1","h2","h3","h4","h5","h6","header","legend","li","meter","output","pre","summary","td","th"],emptyValue:"<p><br/></p>",afterRender:function(){var b=this,a;Ext.form.field.HtmlEditor.prototype.afterRender.apply(this,arguments);a=b.iframeEl.dom;a.addEventListener("load",function(){var d=this.contentWindow.document,c=d.body;c.addEventListener("paste",function(e){Ext.defer(function(){b.fireEvent("paste",e)},1)})})},cleanTags:function(){var c=this,d=c.getValue(),b;function a(h,g,f,e){if(Ext.Array.contains(c.blockTags,f)){h=g?"</p>":"<p>"}else{if(!Ext.Array.contains(c.allowTags,f)){h=""}else{if(e){e=e.match(/href=".*?"/);e=e?" "+e[0]:"";h="<"+f+e+">"}}}return h}b=new RegExp("<(/)?(.*?)( .*?|/)?>","ig");d=d.replace(b,a);d=/^<p>/.test(d)?d:"<p>"+d+"</p>";d=d.replace(/> </gi,">&nbsp;<");d=d.replace(/[ ]{2}/gi," &nbsp;");d=d.replace(/<p><\/p>/gi,"<p><br></p>");d=d.replace(/<\/p>(.*?)<p>/gi,function(f,e){f=f?"<p>"+e:f;return f});c.setValue(d)},getValues:function(c){var a=this,b=c;b[a.name]=a.normalizeValue();return b},normalizeValue:function(){var a=this,b=a.getValue();if(b){b=b.replace(/<b>/gi,"<strong>");b=b.replace(/<\/b>/gi,"</strong>");b=b.replace(/<i>/gi,"<em>");b=b.replace(/<\/i>/gi,"</em>");a.setValue(b);a.cleanTags();b=a.getValue();b=b.replace(/<br>/gi,"<br/>");b=b.replace(/\n/gi,"<br/>");b=b.replace(/&nbsp;/gi,"&#160;");b=b.replace(/&lt;/gi,"&#60;");b=b.replace(/&gt;/gi,"&#62;");a.setValue(b);if(/^(<p><br\/?><\/p>)+$/gi.test(b)){b=""}}return b},setValue:function(b){var a=this;b=b?b:a.emptyValue;arguments[0]=b;Ext.form.field.HtmlEditor.prototype.setValue.apply(this,arguments)},getToolbarCfg:function(){var g=this,b=[],e,a=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),d="x-",h,f;function c(l,j,k){return{itemId:l,cls:d+"btn-icon",iconCls:d+"edit-"+l,enableToggle:j!==false,scope:g,handler:k||g.relayBtnCmd,clickEvent:"mousedown",tooltip:a?g.buttonTips[l]||f:f,overflowText:g.buttonTips[l].title||f,tabIndex:-1}}if(g.enableFont&&!Ext.isSafari2){h=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+d+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){g.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var j=this.selectEl;if(j){j.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var j=this.selectEl;if(j){j.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){g.win.focus();g.relayCmd("fontName",g.fontSelect.dom.value);g.deferFocus()},element:"selectEl"}});b.push(h,"-")}if(g.enableFormat){b.push(c("bold"),c("italic"))}if(g.enableFontSize){b.push("-",c("increasefontsize",false,g.adjustFont),c("decreasefontsize",false,g.adjustFont))}if(g.enableColors){b.push("-",{itemId:"forecolor",cls:d+"btn-icon",iconCls:d+"edit-forecolor",overflowText:g.buttonTips.forecolor.title,tooltip:a?g.buttonTips.forecolor||f:f,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(k,j){g.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+j:j);this.up("menu").hide()}}]})},{itemId:"backcolor",cls:d+"btn-icon",iconCls:d+"edit-backcolor",overflowText:g.buttonTips.backcolor.title,tooltip:a?g.buttonTips.backcolor||f:f,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(k,j){if(Ext.isGecko){g.execCmd("useCSS",false);g.execCmd("hilitecolor","#"+j);g.execCmd("useCSS",true);g.deferFocus()}else{g.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+j:j)}this.up("menu").hide()}}]})})}if(g.enableAlignments){b.push("-",c("justifyleft"),c("justifycenter"),c("justifyright"))}if(!Ext.isSafari2){if(g.enableLinks){b.push("-",c("createlink",false,g.createLink))}if(g.enableLists){b.push("-",c("insertorderedlist"),c("insertunorderedlist"))}if(g.enableSourceEdit){b.push("-",c("sourceedit",true,function(){g.toggleSourceEdit(!g.sourceEditMode)}))}}for(e=0;e<b.length;e++){if(b[e].itemId!=="sourceedit"){b[e].disabled=true}}return{xtype:"toolbar",defaultButtonUI:g.defaultButtonUI,cls:"x-html-editor-tb",enableOverflow:true,items:b,listeners:{click:function(j){j.preventDefault()},element:"el"}}},updateToolbar:function(){var h=this,e,c,d,j,b,f,a,g;if(h.readOnly){return}if(!h.activated){h.onFirstFocus();return}d=h.getToolbar().items.map;j=h.getDoc();function k(){var l;for(e=0,c=arguments.length,b;e<c;e++){b=arguments[e];try{l=j.queryCommandState(b)}catch(m){l=false}d[b].toggle(l)}}if(h.enableFormat){k("bold","italic")}h.syncValue()},getDocMarkup:function(){var b=this,a=b.iframeEl.getHeight()-b.iframePad*2;return Ext.String.format('<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="resources/css/htmleditor.css?_v='+FBEditor.version+'"><style type="text/css">'+(Ext.isOpera?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(b.rtl?"rtl;":"ltr;")+(Ext.isIE8?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",b.iframePad,a,b.defaultFont)},initEditor:function(){var d=this,c,a,g,h,b;if(d.destroying||d.isDestroyed){return}c=d.getEditorBody();a=d.textareaEl.getStyle(["font-size","font-family","background-image","background-repeat","color"]);a["background-attachment"]="fixed";c.bgProperties="fixed";Ext.DomHelper.applyStyles(c,a);g=d.getDoc();h=Ext.get(g);if(h){try{h.clearListeners()}catch(f){}b=d.onEditorEvent.bind(d);h.on({mousedown:b,dblclick:b,click:b,keyup:b,delegated:false,buffer:100});b=d.onRelayedEvent;h.on({mousedown:b,mousemove:b,mouseup:b,click:b,dblclick:b,delegated:false,scope:d});if(Ext.isGecko){h.on("keypress",d.applyCommand,d)}if(d.fixKeys){h.on("keydown",d.fixKeys,d)}if(d.fixKeysAfter){h.on("keyup",d.fixKeysAfter,d)}if(Ext.isIE9){Ext.get(g.documentElement).on("focus",d.focus,d)}if(Ext.isIE8){h.on("focusout",function(){d.savedSelection=g.selection.type!=="None"?g.selection.createRange():null},d);h.on("focusin",function(){if(d.savedSelection){d.savedSelection.select()}},d)}Ext.getWin().on("beforeunload",d.beforeDestroy,d);g.editorInitialized=true;d.initialized=true;d.pushValue();d.setReadOnly(d.readOnly);d.fireEvent("initialize",d)}}},0,["form-desc-htmleditor"],["component","box","container","fieldcontainer","htmleditor","form-desc-htmleditor"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true,"form-desc-htmleditor":true},["widget.form-desc-htmleditor"],0,[FBEditor.view.form.desc.htmleditor,"HtmlEditor"],0));(Ext.cmd.derive("FBEditor.view.form.desc.annotation.Annotation",FBEditor.view.form.desc.htmleditor.HtmlEditor,{name:"annotation",height:200,resizable:{handles:"s",minHeight:100,pinned:true}},0,["form-desc-annotation"],["component","box","container","fieldcontainer","htmleditor","form-desc-htmleditor","form-desc-annotation"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true,"form-desc-htmleditor":true,"form-desc-annotation":true},["widget.form-desc-annotation"],0,[FBEditor.view.form.desc.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.annotation.Annotation",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.annotation",title:"Аннотация",xtypeChild:"annotation"},0,["desc-fieldset-annotation"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-annotation"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-annotation":true},["widget.desc-fieldset-annotation"],0,[FBEditor.view.form.desc.fieldset.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.history.HistoryController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,b=c.getView(),a;a=b.items.first();if(a.getValue()){b.expand()}}},0,0,0,0,["controller.desc.fieldset.history"],0,[FBEditor.view.form.desc.fieldset.history,"HistoryController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.history.History",FBEditor.view.form.desc.htmleditor.HtmlEditor,{name:"history",height:200,resizable:{handles:"s",minHeight:100,pinned:true}},0,["form-desc-history"],["component","box","container","fieldcontainer","htmleditor","form-desc-htmleditor","form-desc-history"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true,"form-desc-htmleditor":true,"form-desc-history":true},["widget.form-desc-history"],0,[FBEditor.view.form.desc.history,"History"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.history.History",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.history",title:"Комментарии редактора",xtypeChild:"history"},0,["desc-fieldset-history"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-history"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-history":true},["widget.desc-fieldset-history"],0,[FBEditor.view.form.desc.fieldset.history,"History"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.periodical.PeriodicalController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{},0,0,0,0,["controller.desc.fieldset.periodical"],0,[FBEditor.view.form.desc.fieldset.periodical,"PeriodicalController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.periodical.Periodical",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-periodical",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"periodical",cls:"desc-fieldcontainer",translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 18ea4ccf-daa9-102b-9003-10751c2f945c",title:"Заголовок",issn:"ISSN",issnError:"Значение должно соответствовать шаблону d{4}-d{3}(d|X). Например: 1748-7188",desc:"Описание",number:"Номер",year:"Год",date:"Дата"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"block-container",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:a,btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:100,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"desc-field-text-required",fieldLabel:b.translateText.id,name:a+"-id",regex:/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/,regexText:b.translateText.idError},{xtype:"desc-field-number-required",name:a+"-number",fieldLabel:b.translateText.number},{xtype:"desc-field-number-required",name:a+"-year",fieldLabel:b.translateText.year},{xtype:"desc-date",name:a+"-date",fieldLabel:b.translateText.date,cls:"field-optional"},{xtype:"textfield",name:a+"-issn",regex:/^\d{4}-\d{3}(\d|X)$/,regexText:b.translateText.issnError,fieldLabel:b.translateText.issn,cls:"field-optional"},{xtype:"textfield",name:a+"-text",fieldLabel:b.translateText.desc,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:a+"-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(g){var e=this,a=e.prefixName,c=e.items,f=g,b=null;c.each(function(d){var h;h={__text:d.down("[name="+a+"-text]").getValue(),_number:d.down("[name="+a+"-number]").getValue(),_year:d.down("[name="+a+"-year]").getValue(),_date:Ext.Date.format(d.down("[name="+a+"-date]").getValue(),"Y-m-d")};h=e.removeEmptyValues(h);h={_id:d.down("[name="+a+"-id]").getValue(),title:d.down("[name="+a+"-title]").getValues(),issn:d.down("[name="+a+"-issn]").getValue(),issue:h};h=e.removeEmptyValues(h);if(h){b=b||[];b.push(h)}});if(b){f[a]=b}return f}},0,["form-desc-periodical"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-periodical"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-periodical":true},["widget.form-desc-periodical"],0,[FBEditor.view.form.desc.periodical,"Periodical"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.periodical.Periodical",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-periodical",controller:"desc.fieldset.periodical",title:"Периодическое издание",cls:"desc-fieldset-periodical",xtypeChild:"periodical"},0,["desc-fieldset-periodical"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-periodical"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-periodical":true},["widget.desc-fieldset-periodical"],0,[FBEditor.view.form.desc.fieldset.periodical,"Periodical"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.preamble.PreambleController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,b=c.getView(),a;a=b.items.first();if(a.getValue()){b.expand()}}},0,0,0,0,["controller.desc.fieldset.preamble"],0,[FBEditor.view.form.desc.fieldset.preamble,"PreambleController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.preamble.Preamble",FBEditor.view.form.desc.htmleditor.HtmlEditor,{name:"preamble",height:200,resizable:{handles:"s",minHeight:100,pinned:true}},0,["form-desc-preamble"],["component","box","container","fieldcontainer","htmleditor","form-desc-htmleditor","form-desc-preamble"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true,"form-desc-htmleditor":true,"form-desc-preamble":true},["widget.form-desc-preamble"],0,[FBEditor.view.form.desc.preamble,"Preamble"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.preamble.Preamble",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.preamble",title:"Преамбула",xtypeChild:"preamble"},0,["desc-fieldset-preamble"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-preamble"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-preamble":true},["widget.desc-fieldset-preamble"],0,[FBEditor.view.form.desc.fieldset.preamble,"Preamble"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.publishInfo.PublishInfoController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{resetFieldset:function(c){var b=this,a=b.getView(),d;d=a.getPublishTitle();d.isChanged=false;FBEditor.view.form.desc.fieldset.AbstractFieldsetController.prototype.resetFieldset.apply(this,arguments)},onExpand:function(){var b=this,a=b.getView(),c;c=a.getPublishTitle();if(!c.isChanged&&!c.getValue()){c.fireEvent("copyTitle")}}},0,0,0,0,["controller.desc.fieldset.publishInfo"],0,[FBEditor.view.form.desc.fieldset.publishInfo,"PublishInfoController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.biblio.Biblio",FBEditor.view.form.desc.htmleditor.HtmlEditor,{height:150},0,["form-desc-publishInfo-biblio"],["component","box","container","fieldcontainer","htmleditor","form-desc-htmleditor","form-desc-publishInfo-biblio"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true,"form-desc-htmleditor":true,"form-desc-publishInfo-biblio":true},["widget.form-desc-publishInfo-biblio"],0,[FBEditor.view.form.desc.publishInfo.biblio,"Biblio"],0));(Ext.cmd.derive("FBEditor.view.form.desc.isbn.IsbnController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;if(d){d=Ext.isString(d)?{0:d}:d;Ext.Object.each(d,function(e,g){b=a.getPlugin("fieldcontainerreplicator");var f=a.down("textfield");if(f){f.setValue(g)}if(d[parseInt(e)+1]){b.addFields();a=a.nextSibling()}})}}},0,0,0,0,["controller.form.desc.isbn"],0,[FBEditor.view.form.desc.isbn,"IsbnController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.isbn.Isbn",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.isbn",layout:"hbox",defaults:{anchor:"100%",flex:1,labelWidth:60,labelAlign:"right"},fieldConfig:{},fieldName:"",translateText:{isbn:"ISBN",isbnError:"По шаблону ([0-9]+[-s]){3,6}[0-9]*[xX0-9]. Например 978-5-358-02523-3"},initComponent:function(){var b=this,a=b.fieldName,c;b.plugins={ptype:"fieldcontainerreplicator",groupName:a,btnStyle:{margin:"0 0 0 5px"}};c={xtype:"textfield",name:a,regex:/^([0-9]+[\-\s]){3,6}[0-9]*[xX0-9]$/,regexText:b.translateText.isbnError,fieldLabel:b.translateText.isbn,labelWidth:b.labelWidth||b.defaults.labelWidth,cls:"field-optional",keyEnterAsTab:true,afterBodyEl:'<span class="after-body">'+b.translateText.isbnError+"</span>",listeners:{loadData:function(d){b.fireEvent("loadData",d)},blur:function(d){b.splitField(d)}}};Ext.apply(c,b.fieldConfig);b.items=[c];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},splitField:function(d){var e=d.getValue(),a,c,b;b=e.split(/,[ ]*/);if(b.length>1){a=d.ownerCt;Ext.Array.each(b,function(h,g){var j;c=a.getPlugin("fieldcontainerreplicator");j=a.down("textfield");j.setValue(h);if(g+1<b.length){c.addFields();a=a.nextSibling()}})}},getValues:function(){var c=this,b=c.fieldName,d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(e){if(e.getValue()){d.push(e.getValue())}});return d}},0,["form-desc-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-isbn":true},["widget.form-desc-isbn"],0,[FBEditor.view.form.desc.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.isbn.Isbn",FBEditor.view.form.desc.isbn.Isbn,{fieldConfig:{plugins:"fieldCleaner"}},0,["form-desc-publishInfo-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-isbn","form-desc-publishInfo-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-isbn":true,"form-desc-publishInfo-isbn":true},["widget.form-desc-publishInfo-isbn"],0,[FBEditor.view.form.desc.publishInfo.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.sequence.SequenceController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;Ext.Object.each(d,function(e,g){b=a.getPlugin("fieldcontainerreplicator");var f=a.down("textfield");if(f){f.setValue(g)}if(d[parseInt(e)+1]){b.addFields();a=a.nextSibling()}})}},0,0,0,0,["controller.form.desc.publishInfo.sequence"],0,[FBEditor.view.form.desc.publishInfo.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.sequence.Sequence",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.publishInfo.sequence",layout:"hbox",defaults:{anchor:"100%",flex:1,labelWidth:130,labelAlign:"right"},fieldName:"",translateText:{sequence:"Серия"},initComponent:function(){var b=this,a=b.fieldName;b.plugins={ptype:"fieldcontainerreplicator",groupName:a,btnStyle:{margin:"0 0 0 5px"}};b.items=[{xtype:"textfield",name:a,fieldLabel:b.translateText.sequence,cls:"field-optional",keyEnterAsTab:true,plugins:"fieldCleaner",listeners:{loadData:function(c){b.fireEvent("loadData",c)}}}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var c=this,b=c.fieldName,d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(e){if(e.getValue()){d.push(e.getValue())}});return d}},0,["form-desc-publishInfo-sequence"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-publishInfo-sequence"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-publishInfo-sequence":true},["widget.form-desc-publishInfo-sequence"],0,[FBEditor.view.form.desc.publishInfo.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.title.TitleController",Ext.app.ViewController,{onChange:function(){var b=this,a=b.getView();if(a.getValue()){a.isChanged=true}},onFocus:function(){var b=this,a=b.getView();if(!a.isChanged&&!a.getValue()){b.onCopyTitle()}},onCopyTitle:function(){var b=this,a=b.getView(),c;c=Ext.getCmp("form-desc-title").getMain().getValue();a.setValue(c);Ext.defer(function(){a.focus(true)},1)}},0,0,0,0,["controller.form.desc.publishInfo.title"],0,[FBEditor.view.form.desc.publishInfo.title,"TitleController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.title.Title",FBEditor.view.form.desc.field.text.required.Required,{controller:"form.desc.publishInfo.title",listeners:{change:"onChange",focus:"onFocus",copyTitle:"onCopyTitle"},isChanged:false},0,["form-desc-publishInfo-title"],["component","box","field","textfield","desc-field-text-required","form-desc-publishInfo-title"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true,"form-desc-publishInfo-title":true},["widget.form-desc-publishInfo-title"],0,[FBEditor.view.form.desc.publishInfo.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.PublishInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-publishInfo",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"paper-publish-info",translateText:{title:"Название",publisher:"Издательство",city:"Город",year:"Год",biblio:"Библиограф. описание"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"publishInfo",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},items:[{xtype:"desc-fieldcontainer",cls:"block-container",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:130,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"form-desc-publishInfo-title",name:a+"-title",allowBlank:false,fieldLabel:b.translateText.title,cls:"field-required",plugins:"fieldCleaner"},{xtype:"form-desc-publishInfo-biblio",name:a+"-biblio-description",fieldLabel:b.translateText.biblio,cls:"field-optional"},{xtype:"textfield",name:a+"-publisher",fieldLabel:b.translateText.publisher,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"textfield",name:a+"-city",fieldLabel:b.translateText.city,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:130,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"textfield",name:a+"-year",fieldLabel:b.translateText.year,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"form-desc-publishInfo-isbn",fieldName:a+"-isbn",labelWidth:130},{xtype:"form-desc-publishInfo-sequence",fieldName:a+"-sequence"}]}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(g){var e=this,a=e.prefixName,c=e.items,f=g,b=null;c.each(function(h){var j,d,k;d=h.down("form-desc-publishInfo-isbn").getValues();k=h.down("form-desc-publishInfo-sequence").getValues();j={_publisher:h.down("[name="+a+"-publisher]").getValue(),_city:h.down("[name="+a+"-city]").getValue(),_year:h.down("[name="+a+"-year]").getValue(),_title:h.down("[name="+a+"-title]").getValue(),"biblio-description":h.down("[name="+a+"-biblio-description]").normalizeValue(),isbn:d,sequence:k};j=e.removeEmptyValues(j);if(j){b=b||[];b.push(j)}});if(b){f[a]=b}return f}},0,["form-desc-publishInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-publishInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-publishInfo":true},["widget.form-desc-publishInfo"],0,[FBEditor.view.form.desc.publishInfo,"PublishInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.publishInfo.PublishInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-publishInfo",controller:"desc.fieldset.publishInfo",title:"Информация о бумажной публикации",xtypeChild:"publishInfo",publishTitle:null,getPublishTitle:function(){var b=this,a;a=b.publishTitle||b.down("form-desc-publishInfo-title");b.publishTitle=a;return a}},0,["desc-fieldset-publishInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-publishInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-publishInfo":true},["widget.desc-fieldset-publishInfo"],0,[FBEditor.view.form.desc.fieldset.publishInfo,"PublishInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetInnerController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{},0,0,0,0,["controller.desc.fieldsetinner"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetInnerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetInner",Ext.form.FieldSet,{controller:"desc.fieldsetinner",collapsible:true,anchor:"100%",cls:"fieldset-inner",listeners:{resetFields:"onResetFields",checkExpand:"onCheckExpand"},require:false,autoExpand:true,initComponent:function(){var b=this,a=b.require;b.collapsed=a?false:true;b.cls+=a?"":" fieldset-optional";Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,a=b.items,c=true;a.each(function(d){if(d.isValid&&!d.isValid()){c=false}});return c},getValues:function(e){var b=this,a=b.items,c=e;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c}},0,["desc-fieldsetinner"],["component","box","container","fieldset","desc-fieldsetinner"],{component:true,box:true,container:true,fieldset:true,"desc-fieldsetinner":true},["widget.desc-fieldsetinner"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetInner"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClassStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Неизвестно"},{value:"novel",name:"Роман"},{value:"story",name:"Повесть"},{value:"short_story",name:"Рассказ"},{value:"poem",name:"Стихотворение"},{value:"essay",name:"Эссе"},{value:"sketch",name:"Очерк"},{value:"article",name:"Статья"},{value:"song",name:"Песня"},{value:"play",name:"Пьеса"},{value:"interview",name:"Интервью"},{value:"monograph",name:"Монография"},{value:"letters",name:"Переписка"},{value:"diary",name:"Дневник"},{value:"speech",name:"Речь"},{value:"manual",name:"Учебник"},{value:"reference",name:"Справочник"},{value:"thesis",name:"Диссертация"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.bookClass,"BookClassStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClassController",Ext.app.ViewController,{onChange:function(c,d){var b=c,e=d,a;a=b.findRecordByValue(e);if(!a||!e){b.reset()}}},0,0,0,0,["controller.form.desc.bookClass"],0,[FBEditor.view.form.desc.bookClass,"BookClassController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClass",Ext.form.field.ComboBox,{controller:"form.desc.bookClass",queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Литературная форма",editable:false,listConfig:{maxHeight:"auto"},listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.bookClass.BookClassStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-bookClass"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-bookClass"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-bookClass":true},["widget.form-desc-bookClass"],0,[FBEditor.view.form.desc.bookClass,"BookClass"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectController",FBEditor.view.form.desc.AbstractFieldController,{onSelectSubject:function(f){var e=this,a=e.getView(),h=a.getSubjectTree(),g,d,c,b;g=f[h.displayField];g=g.replace(/<\/?b>/ig,"");d=a.down("textfield");d.setValue(g);d.setFieldLabel(a.translateText.subject);b=a.nextSibling();if(!b){c=a.getPlugin("fieldcontainerreplicator");c.addFields()}},onSelectTag:function(g){var f=this,b=f.getView(),a=b.getTag(),h,e,d,c;h=g[a.displayField];h=h.replace(/<\/?b>/ig,"");e=b.down("textfield");e.setValue(h);e.setFieldLabel(b.translateText.tag);c=b.nextSibling();if(!c){d=b.getPlugin("fieldcontainerreplicator");d.addFields()}},onShowSubjectTree:function(){var b=this,a=b.getView(),c=a.getSubjectTree();c.subjectField=a;c.initData()},onShowTag:function(){var c=this,b=c.getView(),a=b.getTag();a.setSubjectField(b);a.showTags()}},0,0,0,0,["controller.form.desc.subject"],0,[FBEditor.view.form.desc.subject,"SubjectController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectTreeController",Ext.app.ViewController,{onFilter:function(c){var b=this,a=b.getView();a.filterData(c)},onNodeExpand:function(h){var n=this,o=n.getView(),g=o.getView(),e=g.getEl(),d=o.scrollTop,p=o.getHeight(),b=24,k,c,j,m,l,f,a;f=g.getNode(h);if(!f){return}a=f.offsetTop;c=h.childNodes.length;k=Math.floor(p/b)-2;j=d+p-a;m=c*b-j;l=a-d<b?0:b;d=a;n.scrollTop=d;e.setScrollTop(d)},onNodeCollapse:function(b){var e=this,a=e.getView(),d=a.getView(),c=d.getEl();c.setScrollTop(a.scrollTop)},onClick:function(a){a.stopPropagation()},onItemClick:function(e,c){var d=this,b=d.getView(),a,f;e.toggle(c);if(!c.isExpandable()){f=c.getData();a=b.subjectField;a.fireEvent("selectSubject",f);b.close()}},onAlignTo:function(){var d=this,b=d.getView(),c=b.subjectField,a;if(b.isVisible()&&c&&b.rendered){a=b.getHeight()+2;b.alignTo(c,"tl",[115,-a])}},onResize:function(){var b=this,a=b.getView();a.isShow=false}},0,0,0,0,["controller.form.desc.subjectTree"],0,[FBEditor.view.form.desc.subject,"SubjectTreeController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectStore",Ext.data.TreeStore,{defaultRootProperty:"genre",proxy:{type:"memory"}},0,0,0,0,0,0,[FBEditor.view.form.desc.subject,"SubjectStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectTree",Ext.tree.Panel,{id:"form-desc-subjectTree",controller:"form.desc.subjectTree",cls:"form-desc-subjectTree",resizable:true,floating:true,closeAction:"hide",width:450,height:300,minHeight:200,maxHeight:500,autoScroll:true,rootVisible:false,animate:false,useArrows:true,folderSort:true,displayField:"_title",listeners:{filter:"onFilter",nodeExpand:"onNodeExpand",nodeCollapse:"onNodeCollapse",click:{element:"el",fn:"onClick"},itemClick:"onItemClick",alignTo:"onAlignTo",resize:"onResize"},updateDataTime:60*60*24,isShow:false,subjectField:null,defaultRootProperty:"",dataLoaded:false,errorLoaded:false,cacheData:null,cacheFilteredData:{},scrollTop:0,initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.subject.SubjectStore");b.store=a;b.defaultRootProperty=a.getDefaultRootProperty();b.fireHierarchyEvent=function(c){};Ext.tree.Panel.prototype.initComponent.apply(this,arguments);a.on({scope:b,nodeexpand:function(c){this.fireEvent("nodeExpand",c)},nodecollapse:function(c){this.fireEvent("nodeCollapse",c)}})},handleFocusEnter:function(c){var b=this,a=b.getView();b.scrollTop=a.getEl().getScrollTop();Ext.tree.Panel.prototype.handleFocusEnter.apply(this,arguments)},show:function(){var b=this,a,c;if(b.subjectField){Ext.tree.Panel.prototype.show.apply(this,arguments);b.fireEvent("alignTo");b.isShow=true;a=b.getTextField();c=a.getValue();b.filterData(c)}},afterShow:function(){var a=this;Ext.getBody().on("click",a.onClickBody,a);Ext.tree.Panel.prototype.afterShow.apply(this,arguments)},afterHide:function(){var a=this;a.isShow=false;Ext.getBody().un("click",a.onClickBody,a);Ext.tree.Panel.prototype.afterHide.apply(this,arguments);a.scrollTop=0;a.getRootNode().collapse(true)},onEsc:function(){this.close()},initData:function(){var a=this,c,b;if(!a.dataLoaded){b=a.getLocalData();c=b?b.data:null;if(!b||b&&b.timeIsOver){a.requestTree(c)}else{a.loadData(c)}}else{a.show()}},requestTree:function(b){var a=this;Ext.Ajax.request({url:"https://hub.litres.ru/genres_list_2/",timeout:5000,scope:a,success:function(c){var d=this,e=c.responseText;d.saveToLocal(e);d.loadData(e);d.errorLoaded=false},failure:function(c){console.log("Не удалось загрузить дерево жанров с удаленного ресурса",c);a.loadData(b);a.errorLoaded=true}})},loadData:function(e){var d=this,b=d.getStore(),c,a;if(d.errorLoaded){return}if(!e){Ext.Msg.alert({title:"Ошибка дерева жанров",message:"Не удалось выполнить первичную загрузку дерева жанров. Возможно, отсутствует подключение к интернету или браузер блокирует запрос. Введите жанры вручную.",icon:Ext.Msg.ERROR});Ext.log({msg:"Ошибка загрузки дерева жанров",level:"error"});return}c=FBEditor.util.xml.Json.xmlToJson(e);a=d.getTreeData(c.genres.genre);d.cacheData=Ext.clone(a);b.loadData(a);d.fireEvent("afterLoadData");d.dataLoaded=true;d.show()},getLocalData:function(){var b=this,d=FBEditor.getLocalStorage(),a,c;c=d.getItem(b.id);c=Ext.JSON.decode(c);if(c){a=(new Date().getTime()-c.time)/1000;c.timeIsOver=a>b.updateDataTime}return c},saveToLocal:function(c){var a=this,d=FBEditor.getLocalStorage(),b;b={time:new Date().getTime(),data:c};d.setItem(a.id,Ext.JSON.encode(b))},getTreeData:function(c){var b=this,a,d;d=b.getTreeChildren(c);a={root:true,expandable:false,icon:" ",cls:"treenavigation-root treenavigation-root-genres",_id:"root"};a[b.defaultRootProperty]=d;return[a]},getTreeChildren:function(f,a){var e=this,d=true,b,c;while(f.length>1&&d){d=false;for(c=0;c<f.length-1;c++){if(e.sortFn(f[c],f[c+1])){b=Ext.clone(f[c]);f[c]=f[c+1];f[c+1]=b;d=true}}}Ext.Array.each(f,function(h){var g=h[e.defaultRootProperty];a=a||"";h.path=a+"/"+h._id;h.icon=" ";h[e.displayField]=Ext.String.capitalize(h[e.displayField]);if(g){g=e.getTreeChildren(g,h.path);h.cls="treenavigation-children treenavigation-children-genres"}else{h.leaf=true;h.cls="treenavigation-children treenavigation-leaf-genres"}});return f},sortFn:function(d,c){var b=this,e=b.displayField,a=b.defaultRootProperty,f=false;if(c[a]&&d[a]||!c[a]&&!d[a]){f=d[e]>c[e]?true:false}else{if(!d[a]&&c[a]){f=true}}return f},getItemByValue:function(d){var c=this,a=c.getStore(),b=null;a.findBy(function(h){var f=h.data,g=f[c.displayField],e=f[c.defaultRootProperty];if(g===d){b=f;return true}if(e){b=c._findItemByValue(d,e);return b?true:false}});return b},_findItemByValue:function(d,c){var b=this,a=null;Ext.Array.each(c,function(f){var g=f[b.displayField],e=f[b.defaultRootProperty];if(g===d){a=f;return false}if(e){a=b._findItemByValue(d,e);if(a){return false}}});return a},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():Ext.tree.Panel.prototype.getRootNode.call(this);return a},filterData:function(f){var d=this,a=d.getStore(),g=f.toLowerCase(),e=Ext.clone(d.cacheData),c=3,b;if(!e||d.filterProcess){return}d.filterProcess=true;d.setLoading();if(g&&!/^[0-9]+$/.test(g)&&/[\wа-яА-Я]{2,}/.test(g)){if(!d.cacheFilteredData[g]){b=d.filterFn(g,e[0]);d.cacheFilteredData[g]=Ext.clone(b)}else{b=Ext.clone(d.cacheFilteredData[g])}if(b){a.loadData([b]);d.getRootNode().expand();if(b.genre.length>c){d.getRootNode().expandChildren()}else{d.getRootNode().expand(true)}}else{d.close()}}else{a.loadData(e);d.getRootNode().expand()}d.filterProcess=false;d.setLoading(false)},filterFn:function(f,d){var c=this,b=null,a,e;e=d[c.displayField]?d[c.displayField].toLowerCase():null;a=new RegExp("^"+f+"|[^а-яa-z0-9]"+f,"i");if(e&&a.test(e)){b=Ext.clone(d);b[c.displayField]=e.replace(new RegExp("("+f+")","i"),"<b>$1</b>")}else{if(!d.leaf){b=Ext.clone(d);delete b[c.defaultRootProperty];Ext.Array.each(d[c.defaultRootProperty],function(h){var g=c.filterFn(f,Ext.clone(h));if(g){b[c.defaultRootProperty]=!b[c.defaultRootProperty]?[]:b[c.defaultRootProperty];b[c.defaultRootProperty].push(g)}});b=b[c.defaultRootProperty]?b:null}}return b},getTextField:function(){return this.subjectField.down("form-desc-subject-field")},onClickBody:function(c,a){var b=this;if(!b.isShow){b.isShow=true}else{b.close()}}},0,["form-desc-subjectTree"],["component","box","container","panel","tablepanel","treepanel","form-desc-subjectTree"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"form-desc-subjectTree":true},["widget.form-desc-subjectTree"],0,[FBEditor.view.form.desc.subject,"SubjectTree"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.field.SubjectFieldController",Ext.app.ViewController,{onClick:function(f,b){var d=this,a=d.getView(),c=a.up("form-desc-subject");f.stopPropagation();if(FBEditor.accessHub){c.fireEvent("showSubjectTree");c.fireEvent("showTag")}},onChange:function(){var d=this,a=d.getView(),e=a.getValue(),c=a.up("form-desc-subject"),f=a.getSubjectTree(),b=FBEditor.desc.Manager;if(!b.loadingProcess){if(!f.isShow){f.show()}f.fireEvent("filter",e.trim());c.fireEvent("showTag")}},onBlur:function(j){var f=this,h=f.getView(),a=h.getValue(),g=h.ownerCt,k=g.nextSibling(),b=g.previousSibling(),e=g.subjectTree,c=e&&e.isShow,d;if(!k&&b&&!a&&!c){Ext.defer(function(){d=g.getPlugin("fieldcontainerreplicator");d.removeFields()},100)}else{f.splitField(j)}},splitField:function(g){var f=this,b=f.getView(),h=g.getValue(),a,e,c,d;d=new RegExp(b.separator+"[ ]*");c=h.split(d);if(c.length>1){a=g.ownerCt;Ext.Array.each(c,function(k,j){var l;e=a.getPlugin("fieldcontainerreplicator");l=a.down("textfield");l.setValue(k);if(j+1<c.length){e.addFields();a=a.nextSibling()}})}}},0,0,0,0,["controller.form.desc.subject.field"],0,[FBEditor.view.form.desc.subject.field,"SubjectFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.field.SubjectField",FBEditor.view.form.desc.field.text.required.Required,{controller:"form.desc.subject.field",name:"classification-subject",selectOnFocus:true,checkChangeBuffer:200,listeners:{click:{element:"el",fn:"onClick"},change:"onChange",blur:"onBlur"},separator:";",afterRender:function(){var a=this;a.keyNav=new Ext.util.KeyNav({target:a.inputEl,esc:function(){var c=this,d=c.getSubjectTree(),b=c.getTag();d.onEsc();b.onEsc()},scope:a});FBEditor.view.form.desc.field.text.required.Required.prototype.afterRender.apply(this,arguments)},getSubjectTree:function(){return this.up("form-desc-subject").getSubjectTree()||null},getTag:function(){return this.up("form-desc-subject").getTag()||null}},0,["form-desc-subject-field"],["component","box","field","textfield","desc-field-text-required","form-desc-subject-field"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true,"form-desc-subject-field":true},["widget.form-desc-subject-field"],0,[FBEditor.view.form.desc.subject.field,"SubjectField"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.WindowController",Ext.app.ViewController,{onSelect:function(a){},onLoadData:function(f){var e=this,a=e.getView(),b=a.searchField,c=a.getContainerItems(),d;d=b.getPlugin("searchField");d.showLoader();c.maskSearching(false);c.params=Ext.clone(f);c.fireEvent("loadData",f)},onClick:function(a){a.stopPropagation()},onAlignTo:function(){var c=this,b=c.getView(),e=b.searchField.getY(),a=b.getHeight(),d=Ext.getBody().getHeight();if(b.isVisible()&&b.searchField&&b.rendered){if(d-e<a){b.alignTo(b.searchField,"tl",[0,-a])}else{b.alignTo(b.searchField,"bl",[0,0])}}},onResize:function(){var b=this,a=b.getView();b.onAlignTo();a.isShow=false}},0,0,0,0,["controller.form.desc.searchField.window"],0,[FBEditor.view.form.desc.searchField,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.Window",Ext.Panel,{controller:"form.desc.searchField.window",floating:true,width:600,height:300,maxHeight:300,closeAction:"hide",overflowY:"auto",shadow:false,listeners:{loadData:"onLoadData",select:"onSelect",alignTo:"onAlignTo",resize:"onResize",click:{element:"el",fn:"onClick"}},xtypeContainerItems:"",searchField:null,containerItems:null,initComponent:function(){var a=this;if(!a.xtypeContainerItems){throw Error("Необходимо определить свойство FBEditor.view.form.desc.searchField.Window#xtypeContainerItems")}a.items=[{xtype:a.xtypeContainerItems,padding:2,selectFn:function(b){a.fireEvent("select",b);a.searchField.fireEvent("select",b)},onResize:function(){var b=a.getHeight(),c=this.getHeight();if(b>c){a.setHeight(c)}else{if(b<300){a.setHeight(300)}}}}];a.fireHierarchyEvent=function(b){};Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},show:function(){var a=this;if(a.searchField){Ext.panel.Panel.prototype.show.apply(this,arguments);a.fireEvent("alignTo");a.isShow=true}},afterShow:function(){var a=this;Ext.getBody().on("click",a.onClickBody,a);Ext.panel.Panel.prototype.afterShow.apply(this,arguments)},afterHide:function(){var a=this;a.isShow=false;Ext.getBody().un("click",a.onClickBody,a);Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onEsc:function(){this.close()},onClickBody:function(c,a){var b=this;b.close()},clean:function(){this.close();this.mixins.behavior.clean.call(this)},abort:function(){this.close();this.mixins.behavior.abort.call(this)},getContainerItems:function(){return this.mixins.behavior.getContainerItems.call(this)}},0,["form-desc-searchField-window"],["component","box","container","panel","form-desc-searchField-window"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true},["widget.form-desc-searchField-window"],[["behavior",FBEditor.view.container.desc.search.OwnerContainerBehavior]],[FBEditor.view.form.desc.searchField,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.tag.WindowController",FBEditor.view.form.desc.searchField.WindowController,{onSelect:function(d){var c=this,a=c.getView(),b=a.subjectField;b.fireEvent("selectTag",d)},onLoadData:function(d){var c=this,a=c.getView(),b=a.getContainerItems();b.maskSearching(false);b.params=Ext.clone(d);b.fireEvent("loadData",d)},onAlignTo:function(){var c=this,a=c.getView(),b=a.subjectField;if(a.isVisible()&&b&&a.rendered){a.alignTo(a.getTextField(),"bl",[115,0])}}},0,0,0,0,["controller.form.desc.tag"],0,[FBEditor.view.form.desc.subject.tag,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.tag.Window",FBEditor.view.form.desc.searchField.Window,{id:"form-desc-tag",controller:"form.desc.tag",width:400,xtypeContainerItems:"container-desc-search-tag",displayField:"value",subjectField:null,setSubjectField:function(c){var a=this,b=a.getContainerItems();if(!a.cacheEvent){a.cacheEvent=true;b.on({scope:a,afterLoad:a.afterLoadTags})}a.subjectField=c;a.searchField=a.getTextField()},showTags:function(){var b=this,a=b.getTextField(),c=a.getValue();if(c.length>1){b.clean();b.fireEvent("loadData",{term:c})}else{b.abort()}},getTextField:function(){return this.subjectField.down("form-desc-subject-field")},afterLoadTags:function(c){var a=this,d=a.getTextField().getValue().toLowerCase(),b;if(c&&c.length){if(!a.isShow){b=c.length==1?c[0][a.displayField].toLowerCase():false;b=b?b.replace(/<\/?b>/ig,""):false;if(b&&b===d){}else{a.show()}}}else{a.close()}}},0,["form-desc-tag"],["component","box","container","panel","form-desc-searchField-window","form-desc-tag"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true,"form-desc-tag":true},["widget.form-desc-tag"],0,[FBEditor.view.form.desc.subject.tag,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.Subject",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.subject",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-subject",btnStyle:{margin:"0 0 0 5px"}},listeners:{selectSubject:"onSelectSubject",selectTag:"onSelectTag",showSubjectTree:"onShowSubjectTree",showTag:"onShowTag"},translateText:{subject:"Жанр",tag:"Тег"},subjectTree:null,tag:null,initComponent:function(){var a=this;a.items=[{xtype:"form-desc-subject-field",flex:1,fieldLabel:a.translateText.subject,labelAlign:"right",labelWidth:110,keyEnterAsTab:true}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getSubjectTree:function(){var a=this,b;b=a.subjectTree||Ext.getCmp("form-desc-subjectTree")||Ext.widget("form-desc-subjectTree");a.subjectTree=b;return b},getTag:function(){var b=this,a;a=b.tag||Ext.getCmp("form-desc-tag")||Ext.widget("form-desc-tag");b.tag=a;return a}},0,["form-desc-subject"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-subject"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-subject":true},["widget.form-desc-subject"],0,[FBEditor.view.form.desc.subject,"Subject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.EducationStore",Ext.data.Store,{fields:["value","name"],data:[{value:"none",name:"без образования"},{value:"preschool_education",name:"дошкольное образование"},{value:"primary_education",name:"начальное общее образование"},{value:"basic_education",name:"основное общее"},{value:"secondary_education",name:"среднее (полное) общее"},{value:"technical_school_first_cycle",name:"начальное профессиональное"},{value:"technical_school_second_cycle",name:"среднее профессиональное"},{value:"higher_education",name:"высшее профессиональное"},{value:"university_postgraduate",name:"послевузовское профессиональное"},{value:"vocational_training",name:"профессиональная подготовка"},{value:"additional_education",name:"дополнительное образование"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.classification.target,"EducationStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.EducationController",Ext.app.ViewController,{onChange:function(c,d){var b=c,e=d,a;a=b.findRecordByValue(e);if(!a){b.setValue("")}}},0,0,0,0,["controller.form.desc.classification.target.education"],0,[FBEditor.view.form.desc.classification.target,"EducationController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.Education",Ext.form.field.ComboBox,{controller:"form.desc.classification.target.education",queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Образование",editable:false,listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.classification.target.EducationStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-target-education"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-classification-target-education"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-classification-target-education":true},["widget.form-desc-classification-target-education"],0,[FBEditor.view.form.desc.classification.target,"Education"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMinController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.expand()}},0,0,0,0,["controller.form.desc.classification.target.agemin"],0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMinController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMinStore",Ext.data.Store,{fields:["value","name"],data:[{value:"0",name:"0"},{value:"6",name:"6"},{value:"12",name:"12"},{value:"16",name:"16"},{value:"18",name:"18"},{value:"21",name:"21"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMinStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMin",Ext.form.field.ComboBox,{controller:"form.desc.classification.target.agemin",queryMode:"local",displayField:"name",valueField:"value",listeners:{click:{element:"el",fn:"onClick"}},initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.form.desc.classification.target.ageMin.AgeMinStore");Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-target-agemin"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-classification-target-agemin"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-classification-target-agemin":true},["widget.form-desc-classification-target-agemin"],0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMin"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.Target",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"hbox",translateText:{desc:"Описание",minAge:"Мин возраст",maxAge:"Макс возраст"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"form-desc-classification-target-agemin",name:"classification-target-audience-age-min",fieldLabel:a.translateText.minAge},{xtype:"form-desc-classification-target-education",name:"classification-target-audience-education"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"numberfield",name:"classification-target-audience-age-max",fieldLabel:a.translateText.maxAge,minValue:2,maxValue:150},{xtype:"textfield",name:"classification-target-audience-text",fieldLabel:a.translateText.desc,plugins:"fieldCleaner"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var b=this,c,a={__text:b.down("[name=classification-target-audience-text]").getValue(),_education:b.down("[name=classification-target-audience-education]").getValue(),"_age-min":b.down("[name=classification-target-audience-age-min]").getValue(),"_age-max":b.down("[name=classification-target-audience-age-max]").getValue()};c=b.removeEmptyValues(a);return c}},0,["form-desc-classification-target"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-target"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-target":true},["widget.form-desc-classification-target"],0,[FBEditor.view.form.desc.classification.target,"Target"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.setting.Setting",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"hbox",translateText:{desc:"Описание",country:"Страна",place:"Место",date:"Дата",dateFrom:"Дата начала",dateTo:"Дата окончания",age:"Век"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"textfield",name:"classification-setting-age",fieldLabel:a.translateText.age},{xtype:"countryfield",name:"classification-setting-country",fieldLabel:a.translateText.country},{xtype:"textfield",name:"classification-setting-place",fieldLabel:a.translateText.place,plugins:"fieldCleaner"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"desc-date",name:"classification-setting-date",fieldLabel:a.translateText.date},{xtype:"desc-date",name:"classification-setting-date-from",fieldLabel:a.translateText.dateFrom},{xtype:"desc-date",name:"classification-setting-date-to",fieldLabel:a.translateText.dateTo},{xtype:"textfield",name:"classification-setting-text",fieldLabel:a.translateText.desc,plugins:"fieldCleaner"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var b=this,c,a={__text:b.down("[name=classification-setting-text]").getValue(),_country:b.down("[name=classification-setting-country]").getValue(),_place:b.down("[name=classification-setting-place]").getValue(),_age:b.down("[name=classification-setting-age]").getValue(),_date:Ext.Date.format(b.down("[name=classification-setting-date]").getValue(),"Y-m-d"),"_date-from":Ext.Date.format(b.down("[name=classification-setting-date-from]").getValue(),"Y-m-d"),"_date-to":Ext.Date.format(b.down("[name=classification-setting-date-to]").getValue(),"Y-m-d")};c=b.removeEmptyValues(a);return c}},0,["form-desc-classification-setting"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-setting"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-setting":true},["widget.form-desc-classification-setting"],0,[FBEditor.view.form.desc.classification.setting,"Setting"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.AbstractDateText",Ext.form.Text,{plugins:"fieldCleaner",listeners:{blur:function(){this.onBlur()}},fieldDateValue:null,onBlur:function(){var c=this,a=c.getValue(),b,d;d=c.getFieldDateValue();b=d.getRawValue();if(/^[0-9]{4}$/.test(a)){a=c.getValue()}if(!b&&/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(a)){d.setRawValue(a)}},getFieldDateValue:function(){var a=this,b;b=a.fieldDateValue||a.prev();return b}},0,0,["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},0,0,[FBEditor.view.form.desc.written.date,"AbstractDateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.date.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-text"],["component","box","field","textfield","form-desc-written-date-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-text":true},["widget.form-desc-written-date-text"],0,[FBEditor.view.form.desc.written.date.date,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.AbstractDateValue",FBEditor.view.form.desc.date.Date,{listeners:{beforeblur:function(){this.onBlurField()}},fieldDateText:null,onBlurField:function(){var c=this,b=c.getRawValue(),a,d;d=c.getFieldDateText();a=d.getRawValue();if(!a){d.setValue(b)}},getFieldDateText:function(){var a=this,b;b=a.fieldDateText||a.next();return b}},0,0,["component","box","field","textfield","pickerfield","datefield","desc-date"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true},0,0,[FBEditor.view.form.desc.written.date,"AbstractDateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.date.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-value":true},["widget.form-desc-written-date-value"],0,[FBEditor.view.form.desc.written.date.date,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.publicated.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-publicated-text"],["component","box","field","textfield","form-desc-written-date-publicated-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-publicated-text":true},["widget.form-desc-written-date-publicated-text"],0,[FBEditor.view.form.desc.written.date.publicated,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.publicated.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-publicated-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-publicated-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-publicated-value":true},["widget.form-desc-written-date-publicated-value"],0,[FBEditor.view.form.desc.written.date.publicated,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.translated.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-translated-text"],["component","box","field","textfield","form-desc-written-date-translated-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-translated-text":true},["widget.form-desc-written-date-translated-text"],0,[FBEditor.view.form.desc.written.date.translated,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.translated.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-translated-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-translated-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-translated-value":true},["widget.form-desc-written-date-translated-value"],0,[FBEditor.view.form.desc.written.date.translated,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.Written",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-written",layout:"hbox",prefixName:"written",translateText:{lang:"Язык",writtenLang:"Язык оригинала",date:"Дата ",dateText:"Дата текстом",country:"Страна",translated:"Дата перевода",translatedText:"Дата перевода текстом",datePublic:"Дата публикации",datePublicText:"Дата публикации текстом"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"langfield",name:"lang",fieldLabel:b.translateText.lang,allowBlank:false,forceSelection:true,value:"ru",listeners:{afterrender:function(){var d=this,c=d.getStore();c.remove([0,1])}}},{xtype:"langfield",name:a+"-lang",fieldLabel:b.translateText.writtenLang,forceSelection:true,cls:"field-optional"},{xtype:"countryfield",name:a+"-country",fieldLabel:b.translateText.country,cls:"field-optional"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"form-desc-written-date-value",name:a+"-date-value",fieldLabel:b.translateText.date},{xtype:"form-desc-written-date-text",name:a+"-date-text",fieldLabel:b.translateText.dateText},{xtype:"form-desc-written-date-translated-value",name:"translated-value",fieldLabel:b.translateText.translated},{xtype:"form-desc-written-date-translated-text",name:"translated-text",fieldLabel:b.translateText.translatedText},{xtype:"form-desc-written-date-publicated-value",name:a+"-date-public-value",fieldLabel:b.translateText.datePublic},{xtype:"form-desc-written-date-publicated-text",name:a+"-date-public-text",fieldLabel:b.translateText.datePublicText}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,b;b=FBEditor.view.form.desc.AbstractFieldContainer.prototype.isValid.call(this);a.down("langfield").isValid();return b},getValues:function(g){var e=this,b=e.prefixName,f=g,c,a;f.lang=e.down(e.down("[name=lang]")).getValue();c={_value:Ext.Date.format(e.down(e.down("[name="+b+"-date-value]")).getValue(),"Y-m-d"),__text:e.down(e.down("[name="+b+"-date-text]")).getValue()};c=e.removeEmptyValues(c);a={_value:Ext.Date.format(e.down(e.down("[name="+b+"-date-public-value]")).getValue(),"Y-m-d"),__text:e.down(e.down("[name="+b+"-date-public-text]")).getValue()};a=e.removeEmptyValues(a);c={lang:e.down(e.down("[name="+b+"-lang]")).getValue(),date:c,country:e.down(e.down("[name="+b+"-country]")).getValue(),"date-public":a};c=e.removeEmptyValues(c);if(c){f[b]=c}c={_value:Ext.Date.format(e.down(e.down("[name=translated-value]")).getValue(),"Y-m-d"),__text:e.down(e.down("[name=translated-text]")).getValue()};c=e.removeEmptyValues(c);if(c){f.translated=c}return f}},0,["form-desc-written"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-written"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-written":true},["widget.form-desc-written"],0,[FBEditor.view.form.desc.written,"Written"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.Classification",FBEditor.view.form.desc.AbstractFieldContainer,{cls:"desc-fieldcontainer",translateText:{info:"Общая информация",bookClass:"Литературная форма",contents:"Тип лит. формы",target:"Целевая аудитория",setting:"Привязка к месту и времени",codes:"Коды",udc:"Код УДК",bbk:"Код ББК",udcError:"По шаблону [\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»'/A-Яа-я]+",bbkError:'По шаблону [\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+',written:"Дата и место написания",keywords:"Ключевые слова",keywordsHelp:"Перечислите через запятую. Например 1912, война, роман, отечественная, наполеон, кутузов"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldsetinner",title:a.translateText.info,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"classification-custom-subject",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"form-desc-bookClass",name:"classification-class-text",fieldLabel:a.translateText.bookClass,cls:"field-optional"},{xtype:"hiddenfield",name:"classification-class-contents",value:"standalone",fieldLabel:a.translateText.contents}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"form-desc-subject",flex:1,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"form-desc-subject"}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.target,items:[{xtype:"form-desc-classification-target"}]},{xtype:"desc-fieldsetinner",title:a.translateText.setting,items:[{xtype:"form-desc-classification-setting"}]},{xtype:"desc-fieldsetinner",layout:"hbox",title:a.translateText.codes,require:true,items:[{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"form-desc-classification-udc",flex:1,layout:"anchor",items:[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%",labelAlign:"right",labelWidth:100,cls:"field-optional",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-udc",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"textfieldclear",name:"classification-udc",flex:1,fieldLabel:a.translateText.udc,regex:/^[\d\. \-\*\(\):\[\]\+:=&quot;«»'/A-Яа-я]+$/,regexText:a.translateText.udcError,afterBodyEl:'<span class="after-body">'+a.translateText.udcError+"</span>"}]}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"form-desc-classification-bbk",flex:1,layout:"anchor",items:[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%",labelAlign:"right",labelWidth:100,cls:"field-optional",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-bbk",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"textfieldclear",name:"classification-bbk",flex:1,fieldLabel:a.translateText.bbk,regex:/^[\(\)=:\d\.\-A-Яа-я/\+ "]+$/,regexText:a.translateText.bbkError,afterBodyEl:'<span class="after-body">'+a.translateText.bbkError+"</span>"}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.written,require:true,items:[{xtype:"form-desc-written"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(f){var c=this,e=f,b={},a;a=c.down("form-desc-bookClass").getValue();if(a){b["class"]={_contents:c.down("[name=classification-class-contents]").getValue(),__text:a}}b.subject=c.getDataFields(c.query("[name=classification-subject]"));b["target-audience"]=c.down("form-desc-classification-target").getValues();b.setting=c.down("form-desc-classification-setting").getValues();b.udc=c.getDataFields(c.query("[name=classification-udc]"));b.bbk=c.getDataFields(c.query("[name=classification-bbk]"));e["fb3-classification"]=c.removeEmptyValues(b);e=c.down("form-desc-written").getValues(e);return e}},0,["form-desc-classification"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification":true},["widget.form-desc-classification"],0,[FBEditor.view.form.desc.classification,"Classification"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Classification",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Классификация произведения",xtypeChild:"classification",require:true},0,["desc-fieldset-classification"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-classification"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-classification":true},["widget.desc-fieldset-classification"],0,[FBEditor.view.form.desc.fieldset,"Classification"],0));(Ext.cmd.derive("FBEditor.view.form.desc.customInfo.CustomInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-customInfo",name:"form-desc-plugin-fieldcontainerreplicator",cls:"desc-fieldcontainer",prefixName:"custom-info",translateText:{infoType:"Тип",desc:"Описание"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",defaults:{anchor:"100%",labelAlign:"right",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"customInfo",btnPos:"end",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"desc-field-text-required",name:a+"-info-type",flex:1,labelWidth:60,fieldLabel:b.translateText.infoType},{xtype:"desc-fieldcontainer",layout:"hbox",flex:3,items:[{xtype:"displayfield",fieldLabel:b.translateText.desc,labelAlign:"right",labelWidth:160},{xtype:"desc-field-textarea-required",name:a+"-text",flex:1,height:100,plugins:{ptype:"fieldCleaner",style:"right: 17px; margin-top: -20px"},resizable:{handles:"s",minHeight:50,pinned:true}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(g){var e=this,a=e.prefixName,c=e.items,f=g,b=null;c.each(function(d){var h;h={__text:d.down("[name="+a+"-text]").getValue(),"_info-type":d.down("[name="+a+"-info-type]").getValue()};h=e.removeEmptyValues(h);if(h){b=b||[];b.push(h)}});if(b){f[a]=b}return f}},0,["form-desc-customInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-customInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-customInfo":true},["widget.form-desc-customInfo"],0,[FBEditor.view.form.desc.customInfo,"CustomInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.CustomInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Пользовательская информация",xtypeChild:"customInfo"},0,["desc-fieldset-customInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-customInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-customInfo":true},["widget.desc-fieldset-customInfo"],0,[FBEditor.view.form.desc.fieldset,"CustomInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.createdDate.CreatedDate",FBEditor.view.form.desc.date.Date,{allowBlank:false,value:new Date(),_cls:"field-required",listeners:{change:function(){this.checkChangeCls()}},checkChangeCls:function(){this.mixins.fieldRequired.checkChangeCls.call(this)}},0,["form-desc-documentInfo-createdDate"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-documentInfo-createdDate"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-documentInfo-createdDate":true},["widget.form-desc-documentInfo-createdDate"],[["fieldRequired",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.documentInfo.createdDate,"CreatedDate"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.editor.EditorController",Ext.app.ViewController,{onChange:function(){var c=this,a=c.getView(),b=FBEditor.getLocalStorage(),d=a.getValue();b.setItem("form-desc-documentInfo-editor",d)}},0,0,0,0,["controller.form.desc.documentInfo.editor"],0,[FBEditor.view.form.desc.documentInfo.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.editor.Editor",Ext.form.field.Text,{controller:"form.desc.documentInfo.editor",listeners:{change:"onChange"},initComponent:function(){var b=this,a=FBEditor.getLocalStorage(),c;c=a.getItem("form-desc-documentInfo-editor")||"";b.value=c;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)}},0,["form-desc-documentInfo-editor"],["component","box","field","textfield","form-desc-documentInfo-editor"],{component:true,box:true,field:true,textfield:true,"form-desc-documentInfo-editor":true},["widget.form-desc-documentInfo-editor"],0,[FBEditor.view.form.desc.documentInfo.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.isbn.IsbnController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;b=a.down("form-desc-isbn");b.fireEvent("loadData",d)}},0,0,0,0,["controller.form.desc.documentInfo.isbn"],0,[FBEditor.view.form.desc.documentInfo.isbn,"IsbnController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.isbn.Isbn",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-documentInfo-isbn",controller:"form.desc.documentInfo.isbn",flex:1,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"form-desc-isbn",fieldName:"document-info-isbn"}]},0,["form-desc-documentInfo-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-documentInfo-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-documentInfo-isbn":true},["widget.form-desc-documentInfo-isbn"],0,[FBEditor.view.form.desc.documentInfo.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.DocumentInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-documentInfo",cls:"desc-fieldcontainer",translateText:{created:"Файл создан",date:"Дата",time:"Время",updated:"Последнее изменение",otherInfo:"Прочая информация",programUsed:"Программа",srcUrl:"URL",ocr:"OCR",editor:"Редактор",isbn:"ISBN"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldsetinner",title:a.translateText.created,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"form-desc-documentInfo-createdDate",name:"document-info-created-date",fieldLabel:a.translateText.date}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:110,keyEnterAsTab:true},items:[{xtype:"desc-field-time-required",name:"document-info-created-time",value:new Date(),format:"H:i:s",fieldLabel:a.translateText.time}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.updated,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-updated-date",fieldLabel:a.translateText.date}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:110,keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-updated-time",format:"H:i:s",fieldLabel:a.translateText.time}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.otherInfo,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{xtype:"textfield",anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-program-used",fieldLabel:a.translateText.programUsed,value:"FB3Editor"},{xtype:"form-desc-documentInfo-editor",name:"document-info-editor",fieldLabel:a.translateText.editor}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{xtype:"textfield",anchor:"100%",labelAlign:"right",labelWidth:110,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"textfieldclear",vtype:"url",name:"document-info-src-url",fieldLabel:a.translateText.srcUrl},{name:"document-info-ocr",fieldLabel:a.translateText.ocr}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.isbn,items:[{xtype:"form-desc-documentInfo-isbn",fieldName:"document-info-isbn"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(h){var e=this,f=h,j,a,g,b,c;j=Ext.Date.format(e.down("[name=document-info-created-date]").getValue(),"Y-m-d");g=Ext.Date.format(e.down("[name=document-info-created-time]").getValue(),"H:i:s");j=j&&g?j+"T"+g:null;a=Ext.Date.format(new Date(),"Y-m-d");g=Ext.Date.format(new Date(),"H:i:s");a=a&&g?a+"T"+g:null;c=e.down("form-desc-documentInfo-isbn").getValues();b={_created:j,_updated:a,"_program-used":e.down("[name=document-info-program-used]").getValue(),"_src-url":e.down("[name=document-info-src-url]").getValue(),_ocr:e.down("[name=document-info-ocr]").getValue(),_editor:e.down("[name=document-info-editor]").getValue(),isbn:c};f["document-info"]=e.removeEmptyValues(b);return f}},0,["form-desc-documentInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-documentInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-documentInfo":true},["widget.form-desc-documentInfo"],0,[FBEditor.view.form.desc.documentInfo,"DocumentInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.DocumentInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Информация о файле",xtypeChild:"documentInfo",require:true,autoExpand:true},0,["desc-fieldset-documentInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-documentInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-documentInfo":true},["widget.desc-fieldset-documentInfo"],0,[FBEditor.view.form.desc.fieldset,"DocumentInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.CustomButton",Ext.Button,{text:"Создать вручную",margin:"0 0 0 165px",searchContainer:null,customContainer:null,handler:function(){var b=this,a=FBEditor.desc.Manager;a.getNewId({url:"https://hub.litres.ru/pages/machax_arts/",property:"arts",fn:b.setObjectId,scope:b});b.setNameFromSearchField();b.switchContainers()},switchContainers:function(e){var b=this,a=b.searchContainer,d=b.customContainer,c;c=e?true:false;d.setHidden(c);a.setHidden(!c)},setObjectId:function(c){var a=this,b=a.customContainer;b.updateData({"relations-object-id":c});b.down("[name=relations-object-id]").disableLink()},setNameFromSearchField:function(){var c=this,b=c.searchContainer,d=c.customContainer,a;a=b.down("[name=relations-object-search]").getValue();a=a?a.trim():"";d.updateData({"relations-object-title-main":a})}},0,["form-desc-relations-object-customBtn"],["component","box","button","form-desc-relations-object-customBtn"],{component:true,box:true,button:true,"form-desc-relations-object-customBtn":true},["widget.form-desc-relations-object-customBtn"],0,[FBEditor.view.form.desc.relations.object,"CustomButton"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.search.name.NameController",FBEditor.view.field.combosearch.ComboSearchController,{updateData:function(g){var f=this,b=f.getView(),c=FBEditor.desc.Manager,e,h,a;a=b.up("[name=plugin-fieldcontainerreplicator]");h={"relations-object-id":g.uuid,"relations-object-title-main":g.name?g.name:""};c.loadingProcess=true;a.updateData(h);c.loadingProcess=false;a.fireEvent("editable",false);e=b.up("desc-fieldcontainer").down("form-desc-relations-object-customBtn");e.switchContainers()}},0,0,0,0,["controller.form.desc.relations.object.search.name"],0,[FBEditor.view.form.desc.relations.object.search.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.search.name.Name",FBEditor.view.field.combosearch.ComboSearch,{controller:"form.desc.relations.object.search.name",displayField:"name",valueField:"name",listConfig:{cls:"boundlist-object"},tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item boundlist-search-item">','<div class="boundlist-search-item-name">{name}</div>','<div class="boundlist-search-item-sub"><tpl for="persons">{[xindex > 1 ? " / " : ""]}{title}</tpl></div>','<div class="boundlist-search-item-sub"><tpl for="series">{[xindex > 1 ? " / " : ""]}{name}</tpl></div>','<div class="boundlist-search-item-sub">{uuid}</div>','<div class="boundlist-search-item-sub">{id}</div>',"</div>","</tpl>"),getCreateStore:function(){var a;a=Ext.data.StoreManager.lookup("desc-relations-object");a=a||Ext.create("FBEditor.store.desc.relations.Object");return a},getParams:function(b){var a;if(/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/.test(b)){a={uuid:b}}else{if(/^[0-9]{2,}$/.test(b)){a={art:b}}else{a={q:b}}}return a}},0,["form-desc-relations-object-searchName"],["component","box","field","textfield","pickerfield","combobox","combo","combosearch","form-desc-relations-object-searchName"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,combosearch:true,"form-desc-relations-object-searchName":true},["widget.form-desc-relations-object-searchName"],0,[FBEditor.view.form.desc.relations.object.search.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.SearchContainer",FBEditor.view.form.desc.AbstractFieldContainer,{defaults:{width:465,labelWidth:160,labelAlign:"right"},customContainer:null,translateText:{id:"ID",search:"Поиск"},initComponent:function(){var a=this;a.hidden=!FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?true:a.hidden;a.items=[{xtype:"form-desc-relations-object-searchName",fieldLabel:a.translateText.search,name:"relations-object-search"},{xtype:"form-desc-relations-object-customBtn",cls:"form-desc-customBtn",width:300,searchContainer:a}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;b.customContainer=b.up("desc-fieldcontainer").down("form-desc-relations-object-container-custom");a=b.down("form-desc-relations-object-customBtn");a.customContainer=b.customContainer;FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)}},0,["form-desc-relations-object-container-search"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object-container-search"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object-container-search":true},["widget.form-desc-relations-object-container-search"],0,[FBEditor.view.form.desc.relations.object,"SearchContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.LinkStore",Ext.data.Store,{sorters:[{property:"name",direction:"ASC"}],fields:["value","name"],data:[{value:"preceding_edition",name:"Прошлое издание"},{value:"following_edition",name:"Следующее издание"},{value:"translated_from",name:"Переведено с издания"},{value:"translation",name:"Перевод"},{value:"compilation",name:"Сборник, включающий это произведение"},{value:"part",name:"Часть, включенная в произведение"},{value:"appendix",name:"Приложение"},{value:"appendix_to",name:"Эта книга - приложение к"},{value:"intersection",name:"Пересекается с"},{value:"same_subject",name:"Тот же объект"},{value:"alt_media",name:"Другой носитель"},{value:"sequel",name:"Продолжение"},{value:"prequel",name:"Приквел"},{value:"reissue",name:"Переиздание"},{value:"undef",name:"Не определено"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.relations.object,"LinkStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.Link",FBEditor.view.form.desc.field.combobox.required.Required,{queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Тип связи",name:"relations-object-link",allowBlank:false,editable:false,listConfig:{maxHeight:"auto"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.relations.object.LinkStore");b.store=a;FBEditor.view.form.desc.field.combobox.required.Required.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-object-link"],["component","box","field","textfield","pickerfield","combobox","combo","desc-field-combobox-required","form-desc-relations-object-link"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"desc-field-combobox-required":true,"form-desc-relations-object-link":true},["widget.form-desc-relations-object-link"],0,[FBEditor.view.form.desc.relations.object,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",link:"Тип связи",desc:"Написание",pageEditor:"Страница редактирования"},initComponent:function(){var a=this;a.hidden=FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?false:a.hidden;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:100,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:a.translateText.id,name:"relations-object-id"},{xtype:"form-desc-relations-object-link",cls:"field-required"},{fieldLabel:a.translateText.desc,name:"relations-object-description",cls:"field-optional",plugins:"fieldCleaner"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:"relations-object-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-object-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object-container-custom":true},["widget.form-desc-relations-object-container-custom"],0,[FBEditor.view.form.desc.relations.object,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.Object",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-relations-object",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"relations-object",initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"object",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},listeners:{resetContainer:function(){var b;b=this.down("form-desc-relations-object-customBtn");b.switchContainers()}},items:[{xtype:"desc-fieldcontainer",layout:"anchor",flex:1,items:[{xtype:"form-desc-relations-object-container-custom",prefixName:a.prefixName},{xtype:"form-desc-relations-object-container-search"}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,e=0,a=b.query("form-desc-relations-object-container-custom"),d=b.down("combosearch"),c=true;Ext.Array.each(a,function(f){if(f.isHidden()){e++;c=true}else{if(!f.isValid()){c=false;return false}}});if(c&&e===a.length){}return c},getValues:function(f){var c=this,b=c.items,e=f,a=null;b.each(function(d){var g;g={_id:d.down("[name=relations-object-id]").getValue(),_link:d.down("form-desc-relations-object-link").getValue()};g=c.removeEmptyValues(g);if(g&&g._id){g.title=d.down("[name=relations-object-title]").getValues();g.description=d.down("[name=relations-object-description]").getValue();g=c.removeEmptyValues(g);a=a||[];a.push(g)}});if(a){e["fb3-relations"]=e["fb3-relations"]||{};e["fb3-relations"].object=a}return e}},0,["form-desc-relations-object"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object":true},["widget.form-desc-relations-object"],0,[FBEditor.view.form.desc.relations.object,"Object"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.RelationsObject",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-relations-object",title:"Связанные объекты",xtypeChild:"relations-object"},0,["desc-fieldset-relations-object"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-relations-object"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-relations-object":true},["widget.desc-fieldset-relations-object"],0,[FBEditor.view.form.desc.fieldset,"RelationsObject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.CustomButton",Ext.Button,{text:"Создать вручную",margin:"0 0 0 165px",searchContainer:null,customContainer:null,handler:function(){var b=this,a=FBEditor.desc.Manager,c=b.searchContainer;a.getNewId({url:"https://hub.litres.ru/pages/machax_persons/",property:"persons",fn:b.setSubjectId,scope:b});b.setNamesFromSearchField();b.switchContainers();c.destroy()},switchContainers:function(e){var b=this,a=b.searchContainer,d=b.customContainer,c;c=e?true:false;d.setHidden(c);a.setHidden(!c)},setSubjectId:function(c){var a=this,b=a.customContainer;b.updateData({"relations-subject-id":c});b.down("[name=relations-subject-id]").disableLink()},setNamesFromSearchField:function(){var c=this,b=c.searchContainer,d=c.customContainer,e,a;a=b.down("[name=relations-subject-search]").getValue();a=a?a.trim():"";e=a.split(/[ ]+/,3);d.updateData({"relations-subject-last-name":e[0],"relations-subject-first-name":e[1]||"","relations-subject-middle-name":e[2]||""})}},0,["form-desc-relations-subject-customBtn"],["component","box","button","form-desc-relations-subject-customBtn"],{component:true,box:true,button:true,"form-desc-relations-subject-customBtn":true},["widget.form-desc-relations-subject-customBtn"],0,[FBEditor.view.form.desc.relations.subject,"CustomButton"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.SearchFieldController",Ext.app.ViewController,{onSelect:function(a){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchFieldController#onSelect()")},onAfterRender:function(){var c=this,a=c.getView(),d=a.getWindow(),b=a.getContainerItems();a.keyNav=new Ext.util.KeyNav({target:a.inputEl,scope:d,esc:function(){this.onEsc()}});b.on({scope:a,afterLoad:a.afterLoad})},onClick:function(f,b){var c=this,a=c.getView(),d=a.getWindow(),g;f.stopPropagation();g=a.getValue();if(g){if(!d.isShow){d.show()}}else{a.expandStorage()}},onChange:function(){var b=this,a=b.getView(),c=a.getWindow();c.clean();a.search()},getPlugin:function(){var c=this,a=c.getView(),b;b=a.up("[plugins]").getPlugin("fieldcontainerreplicator");return b}},0,0,0,0,["controller.form.desc.searchField"],0,[FBEditor.view.form.desc.searchField,"SearchFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.SearchField",Ext.form.field.Text,{controller:"form.desc.searchField",checkChangeBuffer:200,plugins:[{ptype:"fieldCleaner"},{ptype:"searchField",style:"margin-left: 258px"}],keyEnterAsTab:true,listeners:{select:"onSelect",afterrender:"onAfterRender",change:"onChange",click:{element:"el",fn:"onClick"}},localStorageLimit:10,win:null,initComponent:function(){var a=this,b;b=a.createWindow();a.win=b;b.searchField=a;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)},destroy:function(){var a=this,b;b=a.getWindow();b.destroy();Ext.form.field.Text.prototype.destroy.apply(this,arguments)},createWindow:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#createWindow()")},search:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#search()")},getParams:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#getParams()")},updateData:function(a){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#updateData()")},getFirstSearch:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#getFirstSearch()")},getNextSearch:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#getNextSearch()")},getWindow:function(){return this.win},getContainerItems:function(){var a=this,b=a.getWindow();return b.getContainerItems()},getStore:function(){var d=this,a=d.getWindow(),c,b;c=a.getContainerItems();b=c.store;return b},abortSearch:function(){var b=this,c=b.getWindow(),a;if(c){c.abort();a=b.getPlugin("searchField");a.hideLoader()}},checkEnterKey:function(d,c){var a=this,b=a.getWindow();if(c.getKey()===c.ENTER){b.close()}},expandStorage:function(){var b=this,c=b.getDataStorage(),a=b.getStore(),d=b.getWindow();if(c.length){d.clean();a.loadData(c);d.show()}},saveToStorage:function(c){var b=this,f=FBEditor.getLocalStorage(),d=b.getDataStorage(),a=[],e;d.splice(0,0,c);if(d.length>b.localStorageLimit){d.splice(b.localStorageLimit,d.length-b.localStorageLimit)}Ext.Array.each(d,function(h,g){if(h.id!==c.id||g==0){a.push(h)}});e=Ext.JSON.encode(a);f.setItem(b.name,e)},getDataStorage:function(){var a=this,c=FBEditor.getLocalStorage(),b;b=Ext.JSON.decode(c.getItem(a.name));b=b?b:[];return b},afterLoad:function(c){var b=this,d=b.getWindow(),a;a=b.getPlugin("searchField");if(c){a.hideLoader();d.show()}else{a.emptyLoader();d.close()}}},0,["form-desc-searchField"],["component","box","field","textfield","form-desc-searchField"],{component:true,box:true,field:true,textfield:true,"form-desc-searchField":true},["widget.form-desc-searchField"],0,[FBEditor.view.form.desc.searchField,"SearchField"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.NameController",FBEditor.view.form.desc.searchField.SearchFieldController,{onSelect:function(d){var c=this,a=c.getView(),f=a.getWindow(),b,g,e;b=c.getPlugin();g=b.getBtnAdd();b.addFields(g);e=a.getFirstSearch();e.focus();Ext.Object.each(d,function(h,j){d[h]=Ext.isString(j)?j.replace(/<[/]?b>/ig,""):j});a.updateData(d);f.close();a.saveToStorage(d)}},0,0,0,0,["controller.form.desc.relations.subject.search.name"],0,[FBEditor.view.form.desc.relations.subject.search.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.window.WindowController",FBEditor.view.form.desc.searchField.WindowController,{},0,0,0,0,["controller.form.desc.relations.subject.searchName.window"],0,[FBEditor.view.form.desc.relations.subject.search.name.window,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.window.Window",FBEditor.view.form.desc.searchField.Window,{controller:"form.desc.relations.subject.searchName.window",xtypeContainerItems:"container-desc-search-persons"},0,["form-desc-relations-subject-searchName-window"],["component","box","container","panel","form-desc-searchField-window","form-desc-relations-subject-searchName-window"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true,"form-desc-relations-subject-searchName-window":true},["widget.form-desc-relations-subject-searchName-window"],0,[FBEditor.view.form.desc.relations.subject.search.name.window,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.Name",FBEditor.view.form.desc.searchField.SearchField,{controller:"form.desc.relations.subject.search.name",createWindow:function(){var a=this,b;b=Ext.create({xtype:"form-desc-relations-subject-searchName-window",alignTarget:a.getId()});return b},search:function(){var a=this,b=a.getWindow(),c=a.getParams();if(c.last.length>1||c.first.length>1||c.middle.length>1){b.fireEvent("loadData",c)}else{a.abortSearch()}},getParams:function(){var d=this,f=d.getValue(),c,b,a,e;if(/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/.test(f)){e={uuid:f}}else{if(/^[0-9]{2,}$/.test(f)){e={person:f}}else{f=f.trim();c=/^(.*?)[ ]+(.?)\.(?:[ ]?(.?)\.)?$/i;b=/^(.?)\.(?:[ ]?(.?)\.)?[ ]+(.*?)$/i;if(c.test(f)){a=f.match(c);a={0:a[1],1:a[2],2:a[3]}}else{if(b.test(f)){a=f.match(b);a={0:a[3],1:a[1],2:a[2]}}else{a=f.split(/[ ]+/,3)}}e={last:a[0],first:a[1]?a[1]:"",middle:a[2]?a[2]:""}}}return e},updateData:function(f){var e=this,b=FBEditor.desc.Manager,c,g,a;a=e.up("[name=plugin-fieldcontainerreplicator]");g={"relations-subject-id":f.uuid,"relations-subject-last-name":f.last_name?f.last_name:"","relations-subject-first-name":f.first_name?f.first_name:"","relations-subject-middle-name":f.middle_name?f.middle_name:"","relations-subject-title-main":f.title?f.title:""};b.loadingProcess=true;a.updateData(g);b.loadingProcess=false;a.fireEvent("editable",false);c=e.up("desc-fieldcontainer").down("form-desc-relations-subject-customBtn");c.switchContainers()},getFirstSearch:function(){var a=this,b;b=a.up("form-desc-relations-subject").down("form-desc-relations-subject-searchName");return b},getNextSearch:function(){var b=this,c,a;a=b.up("[plugins]").nextSibling();c=a.down("form-desc-relations-subject-searchName");return c}},0,["form-desc-relations-subject-searchName"],["component","box","field","textfield","form-desc-searchField","form-desc-relations-subject-searchName"],{component:true,box:true,field:true,textfield:true,"form-desc-searchField":true,"form-desc-relations-subject-searchName":true},["widget.form-desc-relations-subject-searchName"],0,[FBEditor.view.form.desc.relations.subject.search.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.SearchContainer",FBEditor.view.form.desc.AbstractFieldContainer,{defaults:{width:465,labelWidth:160,labelAlign:"right"},customContainer:null,translateText:{id:"ID",search:"Поиск"},initComponent:function(){var a=this;a.hidden=!FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?true:a.hidden;a.items=[{xtype:"form-desc-relations-subject-searchName",fieldLabel:a.translateText.search,name:"relations-subject-search"},{xtype:"form-desc-relations-subject-customBtn",cls:"form-desc-customBtn",width:300,searchContainer:a}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;b.customContainer=b.up("desc-fieldcontainer").down("form-desc-relations-subject-container-custom");a=b.down("form-desc-relations-subject-customBtn");a.customContainer=b.customContainer;FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)}},0,["form-desc-relations-subject-container-search"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-container-search"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-container-search":true},["widget.form-desc-relations-subject-container-search"],0,[FBEditor.view.form.desc.relations.subject,"SearchContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.alt.AltController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;Ext.Object.each(d,function(e,g){var f;b=a.getPlugin("fieldcontainerreplicator");f=a.down("textfield");if(f){f.setValue(g)}if(d[parseInt(e)+1]){b.addFields();a=a.nextSibling()}})}},0,0,0,0,["controller.form.desc.title.alt"],0,[FBEditor.view.form.desc.title.alt,"AltController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.alt.Alt",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.title.alt",layout:"hbox",cls:"form-desc-title-alt",defaults:{anchor:"100%",flex:1,labelWidth:160,labelAlign:"right"},fieldLabelAlt:"",fieldName:"",initComponent:function(){var c=this,b=c.fieldName+"-alt",d,a;a={ptype:"fieldcontainerreplicator",groupName:b,btnStyle:{margin:"0 0 0 2px"}};Ext.applyIf(c.plugins,a);d={xtype:"textfield",name:b,fieldLabel:c.fieldLabelAlt,cls:"field-optional",keyEnterAsTab:true,plugins:{ptype:"fieldCleaner"},listeners:{loadData:function(e){c.fireEvent("loadData",e)},resize:function(e,h){var f,g;f=e.labelEl;g=f.first();e._label=e._label?e._label:{width:null,fontSize:null};if(h<300){e._label.width=e._label.width||f.getWidth();e._label.fontSize=e._label.fontSize||g.getStyle("fontSize");f.setWidth(100);g.setWidth(100);g.setStyle("fontSize","11px")}else{if(e._label.width){f.setWidth(e._label.width);g.setWidth(e._label.width);g.setStyle("fontSize",e._label.fontSize)}}}}};Ext.apply(d,c.fieldConfig);c.items=[d];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var c=this,b=c.fieldName+"-alt",d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(e){if(e.getValue()){d.push(e.getValue())}});return d}},0,["form-desc-title-alt"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title-alt"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title-alt":true},["widget.form-desc-title-alt"],0,[FBEditor.view.form.desc.title.alt,"Alt"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.Title",FBEditor.view.form.desc.AbstractFieldContainer,{cls:"form-desc-title",checkChangeBuffer:200,enableSub:true,enableAlt:true,mainConfig:{},subConfig:{},altConfig:{},translateText:{main:"Основное название",sub:"Подзаголовок",alt:"Альтернативное название"},initComponent:function(){var e=this,c=e.name,b=[],a,d,f;a={xtype:"desc-field-text-required",checkChangeBuffer:e.checkChangeBuffer,name:c+"-main",fieldLabel:e.translateText.main,keyEnterAsTab:true,plugins:{ptype:"fieldCleaner"},listeners:{change:function(j,h,g){this.ownerCt.fireEvent("changeTitle",j,h,g)},blur:function(g){this.ownerCt.fireEvent("blurTitle",g)},focus:function(g){this.ownerCt.fireEvent("focusTitle",g)}}};Ext.apply(a,e.mainConfig);b.push(a);if(e.enableSub){d={xtype:"textfield",name:c+"-sub",cls:"field-optional",keyEnterAsTab:true,fieldLabel:e.translateText.sub,plugins:{ptype:"fieldCleaner"}};b.push(d);Ext.apply(d,e.subConfig)}if(e.enableAlt){f={xtype:"form-desc-title-alt",fieldName:c,fieldLabelAlt:e.translateText.alt};b.push(f);Ext.apply(f,e.altConfig)}e.items=b;FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getMain:function(){var c=this,b=c.name,a;a=c.main||c.down("[name="+b+"-main]");return a},getValues:function(h){var e=this,f=h,b=e.name,a,c,g;c=e.down("[name="+b+"-sub]");g=e.down("form-desc-title-alt");a={main:e.getMain().getValue(),sub:c?c.getValue():null,alt:g?g.getValues():null};a=e.removeEmptyValues(a);if(h){f[b]=a}else{f=a}return f}},0,["form-desc-title"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true},["widget.form-desc-title"],0,[FBEditor.view.form.desc.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.title.Title",FBEditor.view.form.desc.title.Title,{layout:"anchor",enableSub:false,defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"},autoFilled:true,titleMain:null,lastName:null,middleName:null,firstName:null,afterRender:function(){var b=this,a;FBEditor.view.form.desc.title.Title.prototype.afterRender.apply(this,arguments);a=b.getTitleMain();a.on({change:function(){b.autoFilled=false}})},autoValue:function(){var b=this,d=b.getNames(),a,c;if(b.autoFilled){c=d.first?d.first+" ":"";c+=d.middle?d.middle+" ":"";c+=d.last?d.last:"";c=c.trim();a=b.getTitleMain();a.setRawValue(c);a.checkChangeCls()}},getNames:function(){var a=this,b={};b.last=a.getLastName().getValue();b.middle=a.getMiddleName().getValue();b.first=a.getFirstName().getValue();return b},getLastName:function(){var b=this,a;a=b.lastName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-last-name"]');return a},getMiddleName:function(){var b=this,a;a=b.middleName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-middle-name"]');return a},getFirstName:function(){var b=this,a;a=b.firstName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-first-name"]');return a},getTitleMain:function(){var b=this,a;a=b.titleMain||b.down('[name="'+b.name+'-main"]');return a}},0,["form-desc-relations-subject-title"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title","form-desc-relations-subject-title"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true,"form-desc-relations-subject-title":true},["widget.form-desc-relations-subject-title"],0,[FBEditor.view.form.desc.relations.subject.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.NameController",Ext.app.ViewController,{onChange:function(){var d=this,b=d.getView(),g=FBEditor.desc.Manager.loadingProcess,a,c,f,e;if(!g){a=b.getResultContainer();c=a.getReferenceCmp();c.fireEvent("abortSearch");c.fireEvent("cleanResultContainer");a.setReferenceCmp(b);f=b.getTitle();f.autoValue();f=b.getTitle();e=f.getNames();d.searchName(e)}},onFocus:function(){var b=this,a=b.getView(),c;c=a.getArtsContainer();c.clean()},onCleanResultContainer:function(){var c=this,b=c.getView(),a=b.getResultContainer();a.cleanContainer()},onAbortSearch:function(){var d=this,b=d.getView(),a,c;a=b.getResultContainer();a.abort();c=b.getPlugin("searchField");c.hideLoader()},searchName:function(e){var d=this,b=d.getView(),c,a;if(e.last.length>1||e.first.length>1||e.middle.length>1){c=b.getPlugin("searchField");c.showLoader();a=b.getResultContainer();a.fireEvent("loadData",e);a.setStorageNames(e)}}},0,0,0,0,["controller.form.desc.relations.subject.name"],0,[FBEditor.view.form.desc.relations.subject.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.Name",Ext.form.field.Text,{controller:"form.desc.relations.subject.name",checkChangeBuffer:200,plugins:[{ptype:"searchField",style:"right: 24px"},{ptype:"fieldCleaner"}],titleMain:null,listeners:{change:"onChange",focus:"onFocus",cleanResultContainer:"onCleanResultContainer",abortSearch:"onAbortSearch"},getTitle:function(){var b=this,a;a=b.titleMain||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down("form-desc-relations-subject-title");return a},getResultContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-persons")},getArtsContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-arts")},afterLoad:function(c){var b=this,a;a=b.getPlugin("searchField");if(c){a.hideLoader()}else{a.emptyLoader()}}},0,["form-desc-relations-subject-name"],["component","box","field","textfield","form-desc-relations-subject-name"],{component:true,box:true,field:true,textfield:true,"form-desc-relations-subject-name":true},["widget.form-desc-relations-subject-name"],0,[FBEditor.view.form.desc.relations.subject.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.main.Main",FBEditor.view.form.desc.relations.subject.name.Name,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;FBEditor.view.form.desc.relations.subject.name.Name.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["form-desc-relations-subject-name-main"],["component","box","field","textfield","form-desc-relations-subject-name","form-desc-relations-subject-name-main"],{component:true,box:true,field:true,textfield:true,"form-desc-relations-subject-name":true,"form-desc-relations-subject-name-main":true},["widget.form-desc-relations-subject-name-main"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.relations.subject.name.main,"Main"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkController",FBEditor.view.form.desc.AbstractFieldController,{onResetFields:function(){var a=this;FBEditor.view.form.desc.relations.subject.radio.Radio.numberGroup=1;FBEditor.view.form.desc.AbstractFieldController.prototype.onResetFields.apply(this,arguments)},onChangeList:function(){var c=this,a=c.getView(),b;b=a.down("relations-subject-link-radio").child("[reference=linkRadioOther]");b.setValue(true)}},0,0,0,0,["controller.form.desc.relations.subject.link"],0,[FBEditor.view.form.desc.relations.subject,"LinkController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.radio.RadioController",Ext.app.ViewController,{onLoadData:function(c){var b=this,a=b.getView();a.setValue(c)},onChange:function(b,c,h){var g=this,j,d,e,f,a=0;d=Ext.Object.getValues(c)[0];if(d==="other-list"){j=b.up("form-desc-relations-subject-link").down("form-desc-relations-subject-link-list").getValue();if(!j){b.setValue(h)}}else{if(d==="publisher"){e=Ext.getCmp("form-desc-relations-subject").query("[name=relations-subject-percent]");Ext.Array.each(e,function(k){a+=k.getValue()});if(!a){f=b.up("form-desc-relations-subject-container-custom").down("[name=relations-subject-percent]");f.setValue(100)}}}}},0,0,0,0,["controller.form.desc.relations.subject.link.radio"],0,[FBEditor.view.form.desc.relations.subject.radio,"RadioController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.radio.Radio",Ext.form.RadioGroup,{controller:"form.desc.relations.subject.link.radio",allowBlank:false,defaults:{keyEnterAsTab:true},listeners:{change:"onChange",loadData:"onLoadData"},statics:{numberGroup:0},translateText:{author:"Автор",publisher:"Издатель",translator:"Переводчик"},initComponent:function(){var a=this,b=a.self.numberGroup;a.name="relations-subject-link-radio-"+b;a.items=[{name:"rel-subject-link-"+b,inputValue:"author",boxLabel:a.translateText.author,checked:true,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"translator",boxLabel:a.translateText.translator,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"publisher",boxLabel:a.translateText.publisher,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"other-list",reference:"linkRadioOther"}];b++;a.self.numberGroup=b;Ext.form.RadioGroup.prototype.initComponent.apply(this,arguments)}},0,["relations-subject-link-radio"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup","relations-subject-link-radio"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true,"relations-subject-link-radio":true},["widget.relations-subject-link-radio"],0,[FBEditor.view.form.desc.relations.subject.radio,"Radio"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkStore",Ext.data.Store,{sorters:[{property:"name",direction:"ASC"}],fields:["value","name"],data:[{value:"editor",name:"Редактор"},{value:"illustrator",name:"Иллюстратор"},{value:"compiler",name:"Составитель"},{value:"maker-up",name:"Верстальщик"},{value:"adapter",name:"Адаптация"},{value:"dialogue",name:"Диалоги"},{value:"conceptor",name:"Концепция"},{value:"reviewer",name:"Отзыв"},{value:"introduction",name:"Предисловие"},{value:"afterword",name:"Послесловие"},{value:"accompanying",name:"Аккомпаниаторы"},{value:"quotations",name:"Цитаты"},{value:"annotator",name:"Аннотация"},{value:"associated",name:"Связывается с"},{value:"copyright_holder",name:"Владелец прав"},{value:"commentator",name:"Комментатор"},{value:"consultant",name:"Консультант"},{value:"corrector",name:"Корректор"},{value:"scientific_advisor",name:"Научный советник"},{value:"dubious_author",name:"Сомнительный автор"},{value:"designer",name:"Дизайнер"},{value:"recipient_of_letters",name:"Получатель писем"},{value:"sponsor",name:"Спонсор"},{value:"photographer",name:"Фотограф"},{value:"narrator",name:"Чтец"},{value:"rendering",name:"Пересказ"},{value:"performer",name:"Исполнитель"},{value:"maker",name:"Производитель"},{value:"actor",name:"Актер"},{value:"director",name:"Режиссер"},{value:"producer",name:"Продюсер"},{value:"composer",name:"Композитор"},{value:"sound_engineer",name:"Звукорежиссер"},{value:"screenwriter",name:"Сценарист"},{value:"other",name:"Прочее"},{value:"undef",name:"Не определено"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.relations.subject,"LinkStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkList",Ext.form.field.ComboBox,{name:"relations-subject-link-list",queryMode:"local",displayField:"name",valueField:"value",editable:false,forceSelection:true,listConfig:{maxHeight:"auto"},keyEnterAsTab:true,listeners:{change:function(){this.ownerCt.fireEvent("changeList")}},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.relations.subject.LinkStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-subject-link-list"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-relations-subject-link-list"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-relations-subject-link-list":true},["widget.form-desc-relations-subject-link-list"],0,[FBEditor.view.form.desc.relations.subject,"LinkList"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.Link",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.subject.link",layout:"hbox",cls:"form-desc-relations-subject-link",listeners:{resetFields:"onResetFields",loadData:"onLoadData",changeList:"onChangeList"},translateText:{label:"Тип связи"},initComponent:function(){var a=this;a.fieldLabel=a.translateText.label;a.items=[{xtype:"relations-subject-link-radio"},{xtype:"form-desc-relations-subject-link-list",flex:1,margin:"0 0 0 10"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValue:function(){var a=this,b;b=a.down("relations-subject-link-radio").getChecked()[0].getGroupValue();b=b==="other-list"?a.down("form-desc-relations-subject-link-list").getValue():b;return b}},0,["form-desc-relations-subject-link"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-link"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-link":true},["widget.form-desc-relations-subject-link"],0,[FBEditor.view.form.desc.relations.subject,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",firstName:"Имя",middleName:"Отчество (второе имя)",lastName:"Фамилия",titleMain:"Стандартное написание",titleAlt:"Альтернативное написание",percent:"Процент владения",pageEditor:"Страница редактирования"},initComponent:function(){var a=this;a.hidden=FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?false:a.hidden;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:a.translateText.id,name:"relations-subject-id"},{xtype:"form-desc-relations-subject-name-main",fieldLabel:a.translateText.lastName,name:"relations-subject-last-name"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.firstName,name:"relations-subject-first-name",cls:"field-optional"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.middleName,name:"relations-subject-middle-name",cls:"field-optional"},{xtype:"numberfield",fieldLabel:a.translateText.percent,name:"relations-subject-percent",hideTrigger:true,minValue:0,maxValue:100,autoStripChars:true,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-relations-subject-title",name:"relations-subject-title",translateText:{main:a.translateText.titleMain,alt:a.translateText.titleAlt}}]}]},{xtype:"form-desc-relations-subject-link",labelWidth:160,labelAlign:"right"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-subject-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-container-custom":true},["widget.form-desc-relations-subject-container-custom"],0,[FBEditor.view.form.desc.relations.subject,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.Subject",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-relations-subject",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"relations-subject",translateText:{error:"Необходимо заполнить хотя бы одну персону"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"subject",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"},alwaysInsertFirst:true},listeners:{resetContainer:function(){var b;b=this.down("form-desc-relations-subject-customBtn");if(b){b.switchContainers()}}},items:[{xtype:"desc-fieldcontainer",layout:"anchor",flex:1,items:[{xtype:"form-desc-relations-subject-container-custom",prefixName:a.prefixName},{xtype:"form-desc-relations-subject-container-search"}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var d=this,f=0,b=d.query("form-desc-relations-subject-container-custom"),a=d.down("form-desc-relations-subject-searchName"),e=true,c=FBEditor.desc.Manager;Ext.Array.each(b,function(g){if(g.isHidden()){f++;e=true}else{if(!g.isValid()){e=false;return false}}});if(e&&f===b.length){e=false;a.markInvalid(d.translateText.error);c.fieldsError.push(a)}return e},getValues:function(f){var c=this,b=c.items,e=f,a=null;b.each(function(d){var g;g={_id:d.down("[name=relations-subject-id]").getValue(),_link:d.down("form-desc-relations-subject-link").getValue(),_percent:d.down("[name=relations-subject-percent]").getValue(),title:d.down("[name=relations-subject-title]").getValues(),"first-name":d.down("[name=relations-subject-first-name]").getValue(),"middle-name":d.down("[name=relations-subject-middle-name]").getValue(),"last-name":d.down("[name=relations-subject-last-name]").getValue()};g=c.removeEmptyValues(g);if(g&&g._id){a=a||[];a.push(g)}});e["fb3-relations"]=e["fb3-relations"]||{};e["fb3-relations"].subject=a;return e}},0,["form-desc-relations-subject"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject":true},["widget.form-desc-relations-subject"],0,[FBEditor.view.form.desc.relations.subject,"Subject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.RelationsSubject",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Связанные персоны (автор, переводчик и т.д.)",xtypeChild:"relations-subject",require:true},0,["desc-fieldset-relations-subject"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-relations-subject"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-relations-subject":true},["widget.desc-fieldset-relations-subject"],0,[FBEditor.view.form.desc.fieldset,"RelationsSubject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",number:"Номер"},initComponent:function(){var b=this,a=b.prefixName;b.hidden=FBEditor.accessHub;b.hidden=FBEditor.desc.Manager.loadingProcess?false:b.hidden;b.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:80,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:b.translateText.id,name:a+"-id"},{xtype:"numberfield",name:a+"-number",fieldLabel:b.translateText.number,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:a+"-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-sequence-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence-container-custom":true},["widget.form-desc-sequence-container-custom"],0,[FBEditor.view.form.desc.sequence,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.CustomButton",Ext.Button,{text:"Создать вручную",margin:"0 0 0 165px",searchContainer:null,customContainer:null,handler:function(){var b=this,a=FBEditor.desc.Manager;a.getNewId({url:"https://hub.litres.ru/pages/machax_sequences/",property:"series",fn:b.setSequenceId,scope:b});b.setNameFromSearchField();b.switchContainers()},switchContainers:function(e){var b=this,d,a,c;a=b.searchContainer;c=b.customContainer;d=e?true:false;c.setHidden(d);a.setHidden(!d)},setSequenceId:function(e){var b=this,a=b.prefixName,d={},c=b.customContainer;d[a+"-id"]=e;c.updateData(d);c.down("[name=sequence-id]").disableLink()},setNameFromSearchField:function(){var d=this,a=d.prefixName,f={},c=d.searchContainer,e=d.customContainer,b;b=c.down("[name="+a+"-search]").getValue();b=b?b.trim():"";f[a+"-title-main"]=b;e.updateData(f)}},0,["form-desc-sequence-customBtn"],["component","box","button","form-desc-sequence-customBtn"],{component:true,box:true,button:true,"form-desc-sequence-customBtn":true},["widget.form-desc-sequence-customBtn"],0,[FBEditor.view.form.desc.sequence,"CustomButton"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.NameController",FBEditor.view.form.desc.searchField.SearchFieldController,{onSelect:function(d){var c=this,a=c.getView(),f=a.getWindow(),b,g,e;b=c.getPlugin();g=b.getBtnAdd();b.addFields(g);e=a.getNextSearch();e.focus();Ext.Object.each(d,function(h,j){d[h]=Ext.isString(j)?j.replace(/<[/]?b>/ig,""):j});a.updateData(d);f.close();a.saveToStorage(d)}},0,0,0,0,["controller.form.desc.sequence.search.name"],0,[FBEditor.view.form.desc.sequence.search.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.window.WindowController",FBEditor.view.form.desc.searchField.WindowController,{},0,0,0,0,["controller.form.desc.sequence.searchName.window"],0,[FBEditor.view.form.desc.sequence.search.name.window,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.window.Window",FBEditor.view.form.desc.searchField.Window,{controller:"form.desc.sequence.searchName.window",width:470,xtypeContainerItems:"container-desc-search-sequence"},0,["form-desc-sequence-searchName-window"],["component","box","container","panel","form-desc-searchField-window","form-desc-sequence-searchName-window"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true,"form-desc-sequence-searchName-window":true},["widget.form-desc-sequence-searchName-window"],0,[FBEditor.view.form.desc.sequence.search.name.window,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.Name",FBEditor.view.form.desc.searchField.SearchField,{controller:"form.desc.sequence.search.name",createWindow:function(){var a=this,b;b=Ext.create({xtype:"form-desc-sequence-searchName-window",alignTarget:a.getId()});return b},search:function(){var a=this,d=a.getValue(),b=a.getWindow(),c=a.getParams();if(d.length>1){b.fireEvent("loadData",c)}else{a.abortSearch()}},getParams:function(){var a=this,c=a.getValue(),b;if(/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/.test(c)){b={uuid:c}}else{if(/^[0-9]{2,}$/.test(c)){b={series:c}}else{b={q:c}}}return b},updateData:function(f){var e=this,b=FBEditor.desc.Manager,c,g,a;a=e.up("[name=plugin-fieldcontainerreplicator]");g={"sequence-id":f.uuid,"sequence-title-main":f.name?f.name:""};b.loadingProcess=true;a.updateData(g);b.loadingProcess=false;a.fireEvent("editable",false);a.down("numberfield").setEditable(true);c=e.up("desc-fieldcontainer").down("form-desc-sequence-customBtn");c.switchContainers()},getFirstSearch:function(){var a=this,b;b=a.up("form-desc-sequence").down("form-desc-sequence-searchName");return b},getNextSearch:function(){var b=this,c,a;a=b.up("[plugins]").nextSibling();c=a.down("form-desc-sequence-searchName");return c}},0,["form-desc-sequence-searchName"],["component","box","field","textfield","form-desc-searchField","form-desc-sequence-searchName"],{component:true,box:true,field:true,textfield:true,"form-desc-searchField":true,"form-desc-sequence-searchName":true},["widget.form-desc-sequence-searchName"],0,[FBEditor.view.form.desc.sequence.search.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.SearchContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,defaults:{width:465,labelWidth:160,labelAlign:"right"},customContainer:null,translateText:{id:"ID",search:"Поиск"},initComponent:function(){var b=this,a=b.prefixName;b.hidden=!FBEditor.accessHub;b.hidden=FBEditor.desc.Manager.loadingProcess?true:b.hidden;b.items=[{xtype:"form-desc-sequence-searchName",fieldLabel:b.translateText.search,name:a+"-search"},{xtype:"form-desc-sequence-customBtn",cls:"form-desc-customBtn",width:300,searchContainer:b,prefixName:a}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;b.customContainer=b.up("desc-fieldcontainer").down("form-desc-sequence-container-custom");a=b.down("form-desc-sequence-customBtn");a.customContainer=b.customContainer;FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)}},0,["form-desc-sequence-container-search"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence-container-search"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence-container-search":true},["widget.form-desc-sequence-container-search"],0,[FBEditor.view.form.desc.sequence,"SearchContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.SequenceController",FBEditor.view.form.desc.AbstractFieldController,{onRemoveFields:function(a){var c,b;if(a.getPlugin){c=a.getPlugin("fieldcontainerreplicator");b=c.getBtnPut();b.enable()}},onPutFields:function(a,d){var c=a.getPlugin("fieldcontainerreplicator"),b;d.disable();b=c.getBtnAdd();b.ownerCt.remove(b)},onLoadData:function(d){var c=this,a=c.getView(),b;if(d){d=d[0]?d:{0:d};b=c.getPluginContainerReplicator(a);c.setValues(d,b)}},onPutData:function(d,a){var c=this,b;d=d[0]?d:{0:d};b=a.getPlugin("fieldcontainerreplicator");c.setValues(d,b)},setValues:function(d,a){var b=a.getCmp(),c=a;Ext.Object.each(d,function(f,g){var h,e;h=b.query("[name=sequence-id]")[0];h.setValue(g.id);h=b.query("[name=sequence-number]")[0];h.setValue(g.number?g.number:"");h=b.query("[name=sequence-title-main]")[0];h.setValue(g.title.main);h=b.query("[name=sequence-title-sub]")[0];h.setValue(g.title.sub?g.title.sub:"");if(g.title.alt){h=b.query("[name=sequence-title-alt]")[0];h.fireEvent("loadData",g.title.alt)}if(g.sequence){e=c.putFields();e.fireEvent("putData",g.sequence)}if(d[parseInt(f)+1]){c.addFields();b=b.nextSibling();c=b.getPlugin("fieldcontainerreplicator")}})}},0,0,0,0,["controller.form.desc.sequence"],0,[FBEditor.view.form.desc.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.Sequence",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-sequence",controller:"form.desc.sequence",name:"form-desc-plugin-fieldcontainerreplicator",layout:"anchor",listeners:{accessHub:"onAccessHub",resetFields:"onResetFields",loadData:"onLoadData",putData:"onPutData",putFields:"onPutFields",removeFields:"onRemoveFields"},prefixName:"sequence",translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",number:"Номер"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"anchor",anchor:"100%",plugins:{ptype:"fieldcontainerreplicator",groupName:a,btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",enableBtnPut:true,btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},listeners:{putData:function(c){b.fireEvent("putData",c,this)},putFields:function(c){b.fireEvent("putFields",this,c)},removeFields:function(){b.fireEvent("removeFields",this)},resetContainer:function(){var c;c=this.down("form-desc-sequence-customBtn");c.switchContainers()}},getValues:function(){var e=this,d=e.items.getAt(1),c;c={_id:e.down("[name="+a+"-id]").getValue(),_number:e.down("[name="+a+"-number]").getValue(),title:e.down("[name="+a+"-title]").getValues()};if(d){c[a]=d.getValues()}c=e.removeEmptyValues(c);return c},items:[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%"},items:[{xtype:"form-desc-sequence-container-custom",prefixName:b.prefixName},{xtype:"form-desc-sequence-container-search",prefixName:b.prefixName}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(g){var e=this,a=e.prefixName,f=g||null,c=e.items,b=null;c.each(function(d){var h;h=d.getValues();if(h){b=b||[];b.push(h)}});if(b){f=f||{};f[a]=b}return f}},0,["form-desc-sequence"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence":true},["widget.form-desc-sequence"],0,[FBEditor.view.form.desc.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Sequence",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Серия",xtypeChild:"sequence",require:true},0,["desc-fieldset-sequence"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-sequence"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-sequence":true},["widget.desc-fieldset-sequence"],0,[FBEditor.view.form.desc.fieldset,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.titleArt.TitleArtController",FBEditor.view.form.desc.AbstractFieldController,{onChangeTitle:function(){var c=this,a=c.getView(),d=FBEditor.desc.Manager.loadingProcess,b=a.getMain().getValue();if(!d){c.abortSearch();c.onCleanResultContainer();c.searchName(b)}},onFocusTitle:function(){var b=this,a=b.getView(),c;c=a.getPersonsContainer();c.clean()},onBlurTitle:function(){},onCleanResultContainer:function(){var c=this,b=c.getView(),a=b.getResultContainer();a.cleanContainer()},searchName:function(d){var f=this,b=f.getView(),c=b.getMain(),e,a,g;if(d.length>1){e=c.getPlugin("searchField");e.showLoader();a=b.getResultContainer();g={q:d};a.fireEvent("loadData",g);a.setStorageNames(g)}},abortSearch:function(){var e=this,b=e.getView(),c=b.getMain(),d,a;a=b.getResultContainer();a.abort();d=c.getPlugin("searchField");d.hideLoader()}},0,0,0,0,["controller.form.desc.titleArt"],0,[FBEditor.view.form.desc.titleArt,"TitleArtController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.ContainerController",Ext.app.ViewController,{onLoadData:function(a){}},0,0,0,0,["controller.props.desc.search.container"],0,[FBEditor.view.panel.main.props.desc.search,"ContainerController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.Container",Ext.Container,{controller:"props.desc.search.container",hidden:true,listeners:{loadData:"onLoadData"},xtypeContainerItems:"",containerItems:null,_cacheEvents:{},initComponent:function(){var a=this;a.items=[{xtype:a.xtypeContainerItems}];Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,d=FBEditor.getBridgeWindow(),a=d.FBEditor.desc.Manager,c=b.getStorageNames();if(c){b.fireEvent("loadData",c)}if(!a.cleanResultContainer[b.getXType()]){b.cleanContainer()}a.cleanResultContainer[b.getXType()]=true;Ext.container.Container.prototype.afterRender.apply(this,arguments)},getReferenceCmp:function(){var a=this._referenceCmp;if(!a){throw Error("Необходимо определить связанный компонент методом #setReferenceCmp()")}return a},setReferenceCmp:function(b){var a=this;a._referenceCmp=b;a.registerEventAfterLoad()},getStorageNames:function(){var a=this,c=FBEditor.getLocalStorage(),b;b=c.getItem(a.id);b=JSON.parse(b);return b},setStorageNames:function(b){var a=this,c=FBEditor.getLocalStorage();c.setItem(a.id,JSON.stringify(b))},cleanContainer:function(){var a=this;a.clean();a.setStorageNames(null)},clean:function(){this.setVisible(false);this.mixins.behavior.clean.call(this)},abort:function(){this.setVisible(false);this.mixins.behavior.abort.call(this)},getContainerItems:function(){return this.mixins.behavior.getContainerItems.call(this)},registerEventAfterLoad:function(){var c=this,b=c.getContainerItems(),a=c.getReferenceCmp(),d=a.getId(),e;e=c._cacheEvents[d];if(!e){c._cacheEvents[d]=true;b.on({scope:a,afterLoad:a.afterLoad})}}},0,["props-desc-search-container"],["component","box","container","props-desc-search-container"],{component:true,box:true,container:true,"props-desc-search-container":true},["widget.props-desc-search-container"],[["behavior",FBEditor.view.container.desc.search.OwnerContainerBehavior]],[FBEditor.view.panel.main.props.desc.search,"Container"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.arts.ArtsController",Ext.app.ViewController,{onLoadData:function(d){var c=this,a=c.getView(),b;a.setVisible(true);b=a.getContainerItems();b.fireEvent("loadData",d)}},0,0,0,0,["controller.props.desc.search.arts"],0,[FBEditor.view.panel.main.props.desc.search.arts,"ArtsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.arts.Arts",FBEditor.view.panel.main.props.desc.search.Container,{controller:"props.desc.search.arts",id:"props-desc-search-arts",xtypeContainerItems:"container-desc-search-arts",afterRender:function(){var b=this,c=FBEditor.getBridgeWindow(),a;a=c.Ext.getCmp("form-desc-title");b.setReferenceCmp(a);FBEditor.view.panel.main.props.desc.search.Container.prototype.afterRender.apply(this,arguments)}},0,["props-desc-search-arts"],["component","box","container","props-desc-search-container","props-desc-search-arts"],{component:true,box:true,container:true,"props-desc-search-container":true,"props-desc-search-arts":true},["widget.props-desc-search-arts"],0,[FBEditor.view.panel.main.props.desc.search.arts,"Arts"],0));(Ext.cmd.derive("FBEditor.view.form.desc.titleArt.TitleArt",FBEditor.view.form.desc.title.Title,{controller:"form.desc.titleArt",id:"form-desc-title",cls:"container-valid",listeners:{changeTitle:"onChangeTitle",blurTitle:"onBlurTitle",focusTitle:"onFocusTitle",cleanResultContainer:"onCleanResultContainer"},enableSub:true,enableAlt:true,mainConfig:{plugins:[{ptype:"searchField",style:"right: 24px"},{ptype:"fieldCleaner"}]},altConfig:{plugins:{btnStyle:{margin:"4px 0 0 5px"}}},getResultContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-arts")},getPersonsContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-persons")},afterLoad:function(d){var c=this,a=c.getMain(),b;b=a.getPlugin("searchField");if(d){b.hideLoader()}else{b.emptyLoader()}}},0,["form-desc-titleArt"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title","form-desc-titleArt"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true,"form-desc-titleArt":true},["widget.form-desc-titleArt"],0,[FBEditor.view.form.desc.titleArt,"TitleArt"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.CoverController",Ext.app.ViewController,{cover:null,onLoad:function(d){var c=this,b=c.getCover(),a=c.getView();b.updateView(d);Ext.defer(function(){a.updateLayout()},400)},onClear:function(){var b=this,a=b.getCover();a.setSrc("")},getCover:function(){var a=this,b=a.cover||Ext.getCmp("image-cover");return b}},0,0,0,0,["controller.panel.cover"],0,[FBEditor.view.panel.cover,"CoverController"],0));(Ext.cmd.derive("FBEditor.view.image.Cover",Ext.Img,{id:"image-cover",margin:"10 0 0 0",style:{maxWidth:"150px",maxHeight:"300px"},updateView:function(c){var b=this,a=c;b.setSrc(a.url)}},0,["image-cover"],["component","box","image","imagecomponent","image-cover"],{component:true,box:true,image:true,imagecomponent:true,"image-cover":true},["widget.image-cover"],0,[FBEditor.view.image,"Cover"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.Cover",Ext.container.Container,{id:"panel-cover",controller:"panel.cover",margin:"0 0 0 40",listeners:{load:"onLoad",clear:"onClear"},translateText:{cover:"Обложка"},initComponent:function(){var a=this;a.items=[{xtype:"container",layout:"hbox",items:[{xtype:"box",style:{margin:"0 10px 0 0",fontSize:"15px"},html:a.translateText.cover+":"},{xtype:"button-select-cover"}]},{xtype:"image-cover"}];Ext.container.Container.prototype.initComponent.apply(this,arguments)}},0,["panel-cover"],["component","box","container","panel-cover"],{component:true,box:true,container:true,"panel-cover":true},["widget.panel-cover"],0,[FBEditor.view.panel.cover,"Cover"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Title",FBEditor.view.form.desc.fieldset.AbstractFieldset,{layout:"hbox",title:"Название произведения",require:true,initComponent:function(){var a=this;a.items=[{xtype:"form-desc-titleArt",flex:1,name:"title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}},{xtype:"panel-cover"}];FBEditor.view.form.desc.fieldset.AbstractFieldset.prototype.initComponent.apply(this,arguments)}},0,["desc-fieldset-title"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-title"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-title":true},["widget.desc-fieldset-title"],0,[FBEditor.view.form.desc.fieldset,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.Desc",Ext.form.Panel,{id:"form-desc",controller:"form.desc",autoScroll:true,layout:{type:"anchor"},bodyPadding:0,cls:"form-desc",listeners:{accessHub:"onAccessHub",loadDesc:"onLoadData",reset:"onReset",activate:"onActivate",resize:"onResize",startScroll:"onStartScroll"},_firstActivate:false,_oldScrollY:0,beforeLayout:function(){var a=this;a._oldScrollY=a.getScrollY();Ext.form.Panel.prototype.beforeLayout.apply(this,arguments)},afterLayout:function(){var a=this;Ext.form.Panel.prototype.afterLayout.apply(this,arguments);a.setScrollY(a._oldScrollY)},initComponent:function(){var a=this;Ext.create("FBEditor.scroll.Scroll",a);a.items=[{xtype:"desc-fieldset-title"},{xtype:"desc-fieldset-sequence"},{xtype:"desc-fieldset-relations-subject"},{xtype:"desc-fieldset-classification"},{xtype:"desc-fieldset-annotation"},{xtype:"desc-fieldset-preamble"},{xtype:"desc-fieldset-periodical"},{xtype:"desc-fieldset-relations-object"},{xtype:"desc-fieldset-publishInfo"},{xtype:"desc-fieldset-history"},{xtype:"desc-fieldset-customInfo"},{xtype:"desc-fieldset-documentInfo"}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this,b;if(Ext.browser.is.WebKit){b=a.body.down(".x-autocontainer-innerCt");b.setStyle("opacity","0.99")}Ext.form.Panel.prototype.afterRender.apply(this,arguments)},isValid:function(){var d=this,b=d.items,e=true,c=FBEditor.desc.Manager,a;c.fieldsError=[];b.each(function(f){if(f.isValid&&!f.isValid()){e=false}});if(c.fieldsError.length){a=c.fieldsError[0];a=a.getEl().dom;a.scrollIntoView()}return e},getValues:function(){var c=this,a=c.items,d={},b={},e=["_id","_version","_xmlns","periodical","title","sequence","fb3-relations","fb3-classification","lang","written","translated","document-info","history","paper-publish-info","custom-info","annotation","preamble"];a.each(function(f){if(f.getValues){d=f.getValues(d)}});Ext.Array.each(e,function(f){if(d[f]){b[f]=d[f]}});return b}},0,["form-desc"],["component","box","container","panel","form","form-desc"],{component:true,box:true,container:true,panel:true,form:true,"form-desc":true},["widget.form-desc"],0,[FBEditor.view.form.desc,"Desc"],0));(Ext.cmd.derive("FBEditor.view.image.editor.Picture",Ext.Img,{style:{maxWidth:"150px",maxHeight:"200px"},src:"undefined",updateView:function(c){var b=this,a=c;if(a.url!==b.src){b.setSrc(a.url);b.fireEvent("changeSrc",b)}}},0,["image-editor-picture"],["component","box","image","imagecomponent","image-editor-picture"],{component:true,box:true,image:true,imagecomponent:true,"image-editor-picture":true},["widget.image-editor-picture"],0,[FBEditor.view.image.editor,"Picture"],0));(Ext.cmd.derive("FBEditor.view.main.MainController",Ext.app.ViewController,{routes:{"panel/:name":{before:"beforeCreatePanel",action:"createPanel",conditions:{":name":"(navigation|props)"}}},init:function(){},onAccessHub:function(){var a=Ext.getCmp("form-desc");if(a){a.fireEvent("accessHub")}},beforeCreatePanel:function(a,b){if(FBEditor.parentWindow){b.resume()}},createPanel:function(b){var c=this,a;a=c.getView();a.createPanel(b)},onResize:function(e,c,a,b,f){var d=this;if(c!==b){d.onCheckWidthPanels()}},onCloseApplication:function(){var a=this,b=FBEditor.getBridgeProps();a.closeDetachPanels()},onRestoreDetachPanel:function(a){var c=this,b,e,d;b=FBEditor.getLocalStorage().getItem(a);b=Ext.Object.fromQueryString(b,true);e="width="+b.width+",height="+b.height+",top="+b.top+",left="+b.left+",toolbar=no,location=no";d=window.open("#panel/"+a,a,e);if(d){FBEditor.childWindow[a]=d}else{c.getView().attachPanel(a)}},onCheckWidthPanels:function(){var a={},b={};a.content=Ext.getCmp("panel-main-content");if(a.content){a.props=Ext.getCmp("panel-main-props");a.nav=Ext.getCmp("panel-main-navigation");b.main=Ext.getCmp("main").getWidth();b.content=a.content.getMinWidth();b.props=a.props?a.props.getWidth():0;b.nav=a.nav?a.nav.getWidth():0;b.sum=b.props+b.nav+b.content;if(b.main-b.sum<0){if(a.props){a.props.setWidth((b.main-b.content)/2)}if(a.nav){a.nav.setWidth((b.main-b.content)/2)}}}},onFocusDetachPanels:function(){var b=this,a;a=b.getView();Ext.Object.each(a.windowPanels,function(c,d){if(d){d.focus();if(!Ext.isIE){d.alert("Панель найдена")}}})},closeDetachPanels:function(){var c=this,a,b;a=c.getView();Ext.Object.each(a.windowPanels,function(d,e){if(e){b={width:e.innerWidth,height:e.innerHeight,left:e.screenX,top:e.screenY};FBEditor.getLocalStorage().setItem(d,Ext.Object.toQueryString(b,true));e.close();FBEditor.childWindow[name]=null}})}},0,0,0,0,["controller.main"],0,[FBEditor.view.main,"MainController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.Abstract",Ext.panel.Panel,{split:{size:2,collapsible:false},bodyPadding:5,stateful:true,panelName:null},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main,"Abstract"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsController",Ext.app.ViewController,{onResize:function(){var c=this,a=c.getView(),b;b=a.down("panel-filename");b.fireEvent("checkPosition")}},0,0,0,0,["controller.panel.main.tools"],0,[FBEditor.view.panel.main.tools,"ToolsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsTabController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.main.toolstab"],0,[FBEditor.view.panel.main.tools,"ToolsTabController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.open.OpenController",Ext.app.ViewController,{onChange:function(b,a){var c;c=Ext.create("FBEditor.command.OpenFile",{evt:a});if(c.execute()){FBEditor.HistoryCommand.add(c)}}},0,0,0,0,["controller.panel.toolstab.file.button.open"],0,[FBEditor.view.panel.toolstab.file.button.open,"OpenController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.open.Open",FBEditor.view.button.AbstractFileButton,{id:"panel-toolstab-file-button-open",controller:"panel.toolstab.file.button.open",text:"Открыть книгу",listeners:{change:"onChange"},accept:"application/zip"},0,["panel-toolstab-file-button-open"],["component","box","button","filebutton","panel-toolstab-file-button-open"],{component:true,box:true,button:true,filebutton:true,"panel-toolstab-file-button-open":true},["widget.panel-toolstab-file-button-open"],0,[FBEditor.view.panel.toolstab.file.button.open,"Open"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.saveas.SaveAsController",Ext.app.ViewController,{onClick:function(b,a){var d,c;c={btn:b,desc:Ext.getCmp("form-desc")};d=Ext.create("FBEditor.command.SaveAsFile",c);if(d.execute()){FBEditor.HistoryCommand.add(d)}}},0,0,0,0,["controller.panel.toolstab.file.button.saveas"],0,[FBEditor.view.panel.toolstab.file.button.saveas,"SaveAsController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.saveas.SaveAs",Ext.button.Button,{id:"panel-toolstab-file-button-saveas",controller:"panel.toolstab.file.button.saveas",text:"Сохранить книгу",listeners:{click:"onClick"}},0,["panel-toolstab-file-button-saveas"],["component","box","button","panel-toolstab-file-button-saveas"],{component:true,box:true,button:true,"panel-toolstab-file-button-saveas":true},["widget.panel-toolstab-file-button-saveas"],0,[FBEditor.view.panel.toolstab.file.button.saveas,"SaveAs"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.savedesc.SaveDescController",Ext.app.ViewController,{onClick:function(b,a){var d,c={},e=FBEditor.getBridgeWindow();d=e.Ext.create("FBEditor.command.SaveDesc",c);if(d.execute()){e.FBEditor.HistoryCommand.add(d)}},onAccessHub:function(){var c=this,a=c.getView(),b=FBEditor.desc.Manager;if(b.isLoadUrl()){a.setHidden(false)}}},0,0,0,0,["controller.panel.toolstab.file.button.savedesc"],0,[FBEditor.view.panel.toolstab.file.button.savedesc,"SaveDescController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.savedesc.SaveDesc",Ext.button.Button,{id:"panel-toolstab-file-button-savedesc",controller:"panel.toolstab.file.button.savedesc",text:"Сохранить описание",hidden:true,listeners:{click:"onClick",accessHub:"onAccessHub"}},0,["panel-toolstab-file-button-savedesc"],["component","box","button","panel-toolstab-file-button-savedesc"],{component:true,box:true,button:true,"panel-toolstab-file-button-savedesc":true},["widget.panel-toolstab-file-button-savedesc"],0,[FBEditor.view.panel.toolstab.file.button.savedesc,"SaveDesc"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.File",Ext.panel.Panel,{id:"panel-toolstab-file",title:"Файл",initComponent:function(){var a=this;a.tbar=[{xtype:"panel-toolstab-file-button-open"},{xtype:"panel-toolstab-file-button-saveas"},{xtype:"panel-toolstab-file-button-savedesc"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-file"],["component","box","container","panel","panel-toolstab-file"],{component:true,box:true,container:true,panel:true,"panel-toolstab-file":true},["widget.panel-toolstab-file"],0,[FBEditor.view.panel.toolstab.file,"File"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.MainController",Ext.app.ViewController,{onSyncButtons:function(){var c=this,a=c.getView(),b=a.getButtons();Ext.Array.each(b,function(e){var d;if(e.sequence){d=e.sequence[0];d.setSequence(e.sequence.slice(1));d.fireEvent("sync")}else{e.fireEvent("sync")}})},onDisableButtons:function(){var c=this,a=c.getView(),b=a.getButtons();Ext.Array.each(b,function(d){if(d.sequence){Ext.Array.each(d.sequence,function(e){e.disable()})}else{d.disable()}})}},0,0,0,0,["controller.panel.toolstab.main"],0,[FBEditor.view.panel.toolstab.main,"MainController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.ButtonController",Ext.app.ViewController,{onClick:function(){var c=this,b=c.getView(),a=FBEditor.editor.Manager;a.createElement(b.elementName,b.createOpts)},onSync:function(){var b=this,a=b.getView();if(!a.isActiveSelection()){a.disable()}else{a.enable()}},verify:function(b,a){var e=this,d=FBEditor.editor.Manager,f=d.getSchema(),c={};c.debug=a;f.validXml({xml:b,callback:e.verifyResult,scope:e,scopeData:c})},getContentXml:function(){var b=this,a=FBEditor.editor.Manager;return a.getContent().getXml(true)},verifyResult:function(a,c){var d=this,b=d.getView(),e=b.getSequence();if(a){b.enable()}else{b.disable()}if(e){Ext.Array.each(e,function(f){if(a){f.enable()}else{f.disable()}})}}},0,0,0,0,["controller.panel.toolstab.main.button"],0,[FBEditor.view.panel.toolstab.main.button,"ButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.AbstractButton",Ext.button.Button,{controller:"panel.toolstab.main.button",disabled:true,listeners:{click:"onClick",sync:"onSync"},config:{sequence:null},createOpts:null,isActiveSelection:function(){return false}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.toolstab.main.button,"AbstractButton"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.ToggleButtonController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onClick:function(){var d=this,c=d.getView(),b=FBEditor.editor.Manager,a;a=c.elementName;if(!c.pressed){b.deleteWrapper(a)}else{b.createElement(a)}},onSync:function(){var f=this,e=f.getView(),d=FBEditor.editor.Manager,b,h,a,c,g;b=d.getRange();if(!b){return}h=b.start.getElement?b.start.getElement():d.getFocusElement();a=b.end.getElement?b.end.getElement():h;c=e.elementName;g=(h.hisName(c)||h.hasParentName(c))&&(a.hisName(c)||a.hasParentName(c));e.toggle(g);e.enable();if(!g){if(!e.isActiveSelection()){e.disable()}else{e.enable()}}}},0,0,0,0,["controller.panel.toolstab.main.togglebutton"],0,[FBEditor.view.panel.toolstab.main.button,"ToggleButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.AbstractToggleButton",FBEditor.view.panel.toolstab.main.button.AbstractButton,{controller:"panel.toolstab.main.togglebutton",enableToggle:true},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.toolstab.main.button,"AbstractToggleButton"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.AbstractStyleButton",FBEditor.view.panel.toolstab.main.button.AbstractToggleButton,{isActiveSelection:function(){var c=FBEditor.editor.Manager,b,a;a=c.getRange();b=!a.collapsed?true:false;return b}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.toolstab.main.button,"AbstractStyleButton"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.a.A",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-a",html:'<i class="fa fa-link"></i>',tooltip:"Ссылка (Ctrl+L)",elementName:"a"},0,["panel-toolstab-main-button-a"],["component","box","button","panel-toolstab-main-button-a"],{component:true,box:true,button:true,"panel-toolstab-main-button-a":true},["widget.panel-toolstab-main-button-a"],0,[FBEditor.view.panel.toolstab.main.button.a,"A"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.annotation.AnnotationController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var j=this,c=j.getView(),d=FBEditor.editor.Manager,f=FBEditor.editor.Factory,b={},e={},k=0,a=c.elementName,h,g;h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}b.title=b.parent;e.title=b.title.getElement();while(!(e.title.isTitle||e.title.isRoot)){b.title=b.title.parentNode;e.title=b.title.getElement()}if(e.title.isTitle){b.node=b.title;e.node=e.title}else{e.parent=b.parent.getElement();b.node=e.parent.hisName(a)?b.parent:b.node}b.parent=e.node.isRoot?b.node:b.node.parentNode;e.parent=b.parent.getElement();b.first=b.parent.firstChild;e.first=b.first?b.first.getElement():null;while(e.first&&(e.first.isEpigraph||e.first.isTitle)){k++;b.first=b.first.nextSibling;e.first=b.first?b.first.getElement():null}e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}e.parent.children.splice(k,0,e.newEl);g=d.getContent().getXml(true);if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}e.parent.children.splice(k,1);j.verify(g)}},0,0,0,0,["controller.panel.toolstab.main.button.annotation"],0,[FBEditor.view.panel.toolstab.main.button.annotation,"AnnotationController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.annotation.Annotation",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-annotation",controller:"panel.toolstab.main.button.annotation",html:'<i class="fa fa-font"></i>',tooltip:"Аннотация",elementName:"annotation"},0,["panel-toolstab-main-button-annotation"],["component","box","button","panel-toolstab-main-button-annotation"],{component:true,box:true,button:true,"panel-toolstab-main-button-annotation":true},["widget.panel-toolstab-main-button-annotation"],0,[FBEditor.view.panel.toolstab.main.button.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.UnboundedButtonController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var l=this,d=l.getView(),e=FBEditor.editor.Manager,h=e.getFactory(),b={},f={},c={},m={},a=d.elementName,k,j;j=e.getRange();if(!j){d.disable();return false}if(!j.collapsed){b.common=j.common;if(!b.common.getElement||b.common.getElement().isRoot){d.disable();return false}f.common=b.common.getElement();b.start=j.start;f.start=b.start.getElement();b.end=j.end;f.end=b.end.getElement();while(!f.common.permit.splittable){b.common=b.common.parentNode;f.common=b.common.getElement();if(f.common.isRoot){d.disable();return false}}b.start=j.start;f.start=b.start.getElement();b.parentStart=b.start.parentNode;f.parentStart=b.parentStart.getElement();while(f.parentStart.elementId!==f.common.elementId){b.start=b.parentStart;f.start=b.start.getElement();b.parentStart=b.start.parentNode;f.parentStart=b.parentStart.getElement()}m.start=f.common.getChildPosition(f.start);b.end=j.end;f.end=b.end.getElement();b.parentEnd=b.end.parentNode;f.parentEnd=b.parentEnd.getElement();while(f.parentEnd.elementId!==f.common.elementId){b.end=b.parentEnd;f.end=b.end.getElement();b.parentEnd=b.end.parentNode;f.parentEnd=b.parentEnd.getElement()}m.end=f.common.getChildPosition(f.end);c.start=new RegExp("^"+j.toString());c.start2=new RegExp("^"+f.start.getText());c.end=new RegExp(j.toString()+"$");c.end2=new RegExp(f.end.getText()+"$");m.isStart=c.start.test(f.start.getText())||c.start2.test(j.toString());m.isEnd=c.end.test(f.end.getText())||c.end2.test(j.toString());f.newEl=h.createElement(a);f.newEl.createScaffold();m.count=m.end-m.start;m.start=!m.isStart?m.start+1:m.start;m.count=m.isStart&&m.isEnd?m.count+1:m.count;m.count=!m.isStart&&!m.isEnd?m.count-1:m.count;f.common.children.splice(m.start,0,f.newEl);f.rangeNext=f.common.children[m.start+m.count+1];f.range=f.common.children.splice(m.start+1,m.count);for(var g=0;g<m.count;g++){f.newEl.add(f.range[g])}k=l.getContentXml();for(g=0;g<m.count;g++){if(f.rangeNext){f.common.insertBefore(f.range[g],f.rangeNext)}else{f.common.add(f.range[g])}}f.common.children.splice(m.start,1);l.verify(k)}else{b.node=j.common;if(!b.node.getElement||b.node.getElement().isRoot){d.disable();return false}f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement();while(f.parent.isStyleHolder||f.parent.isStyleType){b.node=b.parent;f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement()}f.parent=b.parent.getElement();b.node=f.parent.hisName(a)?b.parent:b.node;b.parent=f.node.isRoot?b.node:b.node.parentNode;f.parent=b.parent.getElement();f.newEl=h.createElement(a);f.newEl.createScaffold();m=f.parent.getChildPosition(f.node)+1;f.parent.children.splice(m,0,f.newEl);k=l.getContentXml();f.parent.children.splice(m,1);l.verify(k)}return true}},0,0,0,0,0,0,[FBEditor.view.panel.toolstab.main.button,"UnboundedButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.blockquote.BlockquoteController",FBEditor.view.panel.toolstab.main.button.UnboundedButtonController,{},0,0,0,0,["controller.panel.toolstab.main.button.blockquote"],0,[FBEditor.view.panel.toolstab.main.button.blockquote,"BlockquoteController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.blockquote.Blockquote",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-blockquote",controller:"panel.toolstab.main.button.blockquote",html:'<i class="fa fa-quote-right"></i>',tooltip:"Цитата (Ctrl+Q)",elementName:"blockquote"},0,["panel-toolstab-main-button-blockquote"],["component","box","button","panel-toolstab-main-button-blockquote"],{component:true,box:true,button:true,"panel-toolstab-main-button-blockquote":true},["widget.panel-toolstab-main-button-blockquote"],0,[FBEditor.view.panel.toolstab.main.button.blockquote,"Blockquote"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.code.Code",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-code",html:'<i class="fa fa-code"></i>',tooltip:"Код",elementName:"code"},0,["panel-toolstab-main-button-code"],["component","box","button","panel-toolstab-main-button-code"],{component:true,box:true,button:true,"panel-toolstab-main-button-code":true},["widget.panel-toolstab-main-button-code"],0,[FBEditor.view.panel.toolstab.main.button.code,"Code"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.div.DivController",FBEditor.view.panel.toolstab.main.button.UnboundedButtonController,{},0,0,0,0,["controller.panel.toolstab.main.button.div"],0,[FBEditor.view.panel.toolstab.main.button.div,"DivController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.div.Div",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-div",controller:"panel.toolstab.main.button.div",html:'<i class="fa fa-cubes"></i>',tooltip:"Блок (Ctrl+D)",elementName:"div"},0,["panel-toolstab-main-button-div"],["component","box","button","panel-toolstab-main-button-div"],{component:true,box:true,button:true,"panel-toolstab-main-button-div":true},["widget.panel-toolstab-main-button-div"],0,[FBEditor.view.panel.toolstab.main.button.div,"Div"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.em.Em",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-em",html:'<i class="fa fa-italic"></i>',tooltip:"Курсив (Ctrl+I)",elementName:"em"},0,["panel-toolstab-main-button-em"],["component","box","button","panel-toolstab-main-button-em"],{component:true,box:true,button:true,"panel-toolstab-main-button-em":true},["widget.panel-toolstab-main-button-em"],0,[FBEditor.view.panel.toolstab.main.button.em,"Em"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.epigraph.EpigraphController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var j=this,c=j.getView(),d=FBEditor.editor.Manager,f=FBEditor.editor.Factory,b={},e={},a=c.elementName,h,g,k;h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}b.title=b.parent;e.title=b.title.getElement();while(!(e.title.isTitle||e.title.isRoot)){b.title=b.title.parentNode;e.title=b.title.getElement()}if(e.title.isTitle){b.node=b.title;e.node=e.title}else{e.parent=b.parent.getElement();b.node=e.parent.hisName(a)?b.parent:b.node}b.parent=e.node.isRoot?b.node:b.node.parentNode;e.parent=b.parent.getElement();b.first=b.parent.firstChild;e.first=b.first?b.first.getElement():null;e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}k=!e.first.isTitle?0:1;e.parent.children.splice(k,0,e.newEl);g=d.getContent().getXml(true);if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}e.parent.children.splice(k,1);j.verify(g)}},0,0,0,0,["controller.panel.toolstab.main.button.epigraph"],0,[FBEditor.view.panel.toolstab.main.button.epigraph,"EpigraphController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.epigraph.Epigraph",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-epigraph",controller:"panel.toolstab.main.button.epigraph",html:'<i class="fa fa-pinterest-p"></i>',tooltip:"Эпиграф (Ctrl+E)",elementName:"epigraph"},0,["panel-toolstab-main-button-epigraph"],["component","box","button","panel-toolstab-main-button-epigraph"],{component:true,box:true,button:true,"panel-toolstab-main-button-epigraph":true},["widget.panel-toolstab-main-button-epigraph"],0,[FBEditor.view.panel.toolstab.main.button.epigraph,"Epigraph"],0));(Ext.cmd.derive("FBEditor.view.window.img.Create",Ext.Window,{id:"window-img-create",title:"Создание изображения",width:300,height:340,modal:true,closeAction:"hide",layout:"fit",translateText:{inText:"Вставить в текст",create:"Создать",emptyImg:"Пустое изображение"},selectionRange:null,initComponent:function(){var a=this;a.items=[{xtype:"form",defaults:{margin:"10 0 0 10"},items:[{xtype:"image-editor-picture"},{xtype:"button-editor-select-img",scope:a},{xtype:"hidden",name:"src",value:""},{xtype:"displayfield",name:"name",value:a.translateText.emptyImg,submitValue:true}],buttonAlign:"center",buttons:[{xtype:"button",text:a.translateText.create,handler:function(){var c,b;c=a.down("form");b=c.getValues();b.range=a.selectionRange;b.name=b.name===a.translateText.emptyImg?"":b.name;a.close();FBEditor.editor.Manager.createElement("img",b)}}]}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},onHide:function(){var a=this,b;b={url:"undefined",name:a.translateText.emptyImg};a.updateData(b);Ext.window.Window.prototype.onHide.apply(this,arguments)},updateData:function(b){var a=this;a.down("image-editor-picture").updateView(b);a.down("[name=src]").setValue(b.url);a.down("[name=name]").setValue(b.name)}},0,["window-img-create"],["component","box","container","panel","window","window-img-create"],{component:true,box:true,container:true,panel:true,window:true,"window-img-create":true},["widget.window-img-create"],0,[FBEditor.view.window.img,"Create"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.img.ImgController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onClick:function(){var d=this,c=d.getView(),b=FBEditor.editor.Manager,f,e,a;e=b.getSelection();if(e){f=c.win||Ext.create("FBEditor.view.window.img.Create");a=e.getRangeAt(0);f.selectionRange={start:a.startContainer,offset:a.startOffset,oldValue:a.startContainer.nodeValue};c.win=f;f.show()}},onSync:function(){var f=this,d=f.getView(),c=FBEditor.editor.Manager,e,b,a;e=c.getFocusElement();if(!e){d.disable();return}b=d.elementName;a=e.hisName(b);if(!a){d.enable()}else{d.disable()}}},0,0,0,0,["controller.panel.toolstab.main.button.img"],0,[FBEditor.view.panel.toolstab.main.button.img,"ImgController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.img.Img",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-img",controller:"panel.toolstab.main.button.img",html:'<i class="fa fa-picture-o"></i>',tooltip:"Изображение (Ctrl+P)",elementName:"img",win:null},0,["panel-toolstab-main-button-img"],["component","box","button","panel-toolstab-main-button-img"],{component:true,box:true,button:true,"panel-toolstab-main-button-img":true},["widget.panel-toolstab-main-button-img"],0,[FBEditor.view.panel.toolstab.main.button.img,"Img"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.note.Note",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-note",html:'<i class="fa fa-sticky-note-o"></i>',tooltip:"Сноска (Ctrl+Alt+N)",elementName:"note"},0,["panel-toolstab-main-button-note"],["component","box","button","panel-toolstab-main-button-note"],{component:true,box:true,button:true,"panel-toolstab-main-button-note":true},["widget.panel-toolstab-main-button-note"],0,[FBEditor.view.panel.toolstab.main.button.note,"Note"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.notebody.NotebodyController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var g=this,f=g.getView(),e=FBEditor.editor.Manager,b,a,d,c;b=e.getRange();if(!b){f.disable();return}a=b.end.getElement?b.end.getElement():e.getFocusElement();d=f.elementName;c=a.hisName("notes")||a.hasParentName(d);if(c){f.enable()}else{f.disable()}}},0,0,0,0,["controller.panel.toolstab.main.button.notebody"],0,[FBEditor.view.panel.toolstab.main.button.notebody,"NotebodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.notebody.Notebody",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-notebody",controller:"panel.toolstab.main.button.notebody",html:'<i class="fa fa-sticky-note"></i>',tooltip:"Текст сноски",elementName:"notebody"},0,["panel-toolstab-main-button-notebody"],["component","box","button","panel-toolstab-main-button-notebody"],{component:true,box:true,button:true,"panel-toolstab-main-button-notebody":true},["widget.panel-toolstab-main-button-notebody"],0,[FBEditor.view.panel.toolstab.main.button.notebody,"Notebody"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.notes.NotesController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var f=this,e=f.getView(),d=FBEditor.editor.Manager,a,c,b;a=d.getContent();c=e.elementName;b=a.getChildrenCountByProp("xmlTag",c);if(!b){e.enable()}else{e.disable()}}},0,0,0,0,["controller.panel.toolstab.main.button.notes"],0,[FBEditor.view.panel.toolstab.main.button.notes,"NotesController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.notes.Notes",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-notes",controller:"panel.toolstab.main.button.notes",html:'<i class="fa fa-clone"></i>',tooltip:"Сноски",elementName:"notes"},0,["panel-toolstab-main-button-notes"],["component","box","button","panel-toolstab-main-button-notes"],{component:true,box:true,button:true,"panel-toolstab-main-button-notes":true},["widget.panel-toolstab-main-button-notes"],0,[FBEditor.view.panel.toolstab.main.button.notes,"Notes"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.AbstractLiHolderButton",FBEditor.view.panel.toolstab.main.button.AbstractToggleButton,{isActiveSelection:function(){var j=this,d=FBEditor.editor.Manager,c={},e={},b=j.elementName,h,f,a,g;h=d.getRange();if(!h){return false}c.first=h.start;if(!c.first.getElement||c.first.getElement().isRoot){return false}e.first=c.first.getElement();while(!e.first.isP&&!e.first.isRoot){c.first=c.first.parentNode;e.first=c.first.getElement()}if(!e.first.isP){return false}c.parent=c.first.parentNode;e.parent=c.parent.getElement();e.pos=e.parent.getChildPosition(e.first);f=d.getNamesElements(e.parent);f.splice(e.pos,1,b);a=d.getSchema();b=e.parent.getName();g=a.verify(b,f);return g}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.toolstab.main.button,"AbstractLiHolderButton"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.LiHolderButtonController",FBEditor.view.panel.toolstab.main.button.ToggleButtonController,{},0,0,0,0,0,0,[FBEditor.view.panel.toolstab.main.button,"LiHolderButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.ol.OlController",FBEditor.view.panel.toolstab.main.button.LiHolderButtonController,{},0,0,0,0,["controller.panel.toolstab.main.button.ol"],0,[FBEditor.view.panel.toolstab.main.button.ol,"OlController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.ol.Ol",FBEditor.view.panel.toolstab.main.button.AbstractLiHolderButton,{id:"panel-toolstab-main-button-ol",controller:"panel.toolstab.main.button.ol",html:'<i class="fa fa-list-ol"></i>',tooltip:"Нумерованный список",elementName:"ol"},0,["panel-toolstab-main-button-ol"],["component","box","button","panel-toolstab-main-button-ol"],{component:true,box:true,button:true,"panel-toolstab-main-button-ol":true},["widget.panel-toolstab-main-button-ol"],0,[FBEditor.view.panel.toolstab.main.button.ol,"Ol"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.poem.PoemController",FBEditor.view.panel.toolstab.main.button.UnboundedButtonController,{},0,0,0,0,["controller.panel.toolstab.main.button.poem"],0,[FBEditor.view.panel.toolstab.main.button.poem,"PoemController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.poem.Poem",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-poem",controller:"panel.toolstab.main.button.poem",html:'<i class="fa fa-pinterest fa-lg"></i>',tooltip:"Поэма",elementName:"poem"},0,["panel-toolstab-main-button-poem"],["component","box","button","panel-toolstab-main-button-poem"],{component:true,box:true,button:true,"panel-toolstab-main-button-poem":true},["widget.panel-toolstab-main-button-poem"],0,[FBEditor.view.panel.toolstab.main.button.poem,"Poem"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.pre.PreController",FBEditor.view.panel.toolstab.main.button.UnboundedButtonController,{},0,0,0,0,["controller.panel.toolstab.main.button.pre"],0,[FBEditor.view.panel.toolstab.main.button.pre,"PreController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.pre.Pre",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-pre",controller:"panel.toolstab.main.button.pre",html:'<span style="position: relative; font-family: monospace; font-size: 1.4em; top: 2px;">M</span>',tooltip:"Предварительно отформатированный текст (Ctrl+M)",elementName:"pre"},0,["panel-toolstab-main-button-pre"],["component","box","button","panel-toolstab-main-button-pre"],{component:true,box:true,button:true,"panel-toolstab-main-button-pre":true},["widget.panel-toolstab-main-button-pre"],0,[FBEditor.view.panel.toolstab.main.button.pre,"Pre"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.section.SectionController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var f=this,e=f.getView(),d=FBEditor.editor.Manager,c={},b={},a;a=d.getRange();if(!a){e.disable();return}b.node=a.common;if(!b.node.getElement||b.node.getElement().isRoot){e.disable();return}c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();while(!c.parent.isSection&&!c.parent.isRoot){b.parent=b.parent.parentNode;c.parent=b.parent.getElement()}b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next){if(c.next.isSection){e.disable();return}b.next=b.next.nextSibling;c.next=b.next?b.next.getElement():null}e.enable()}},0,0,0,0,["controller.panel.toolstab.main.button.section"],0,[FBEditor.view.panel.toolstab.main.button.section,"SectionController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.section.Section",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-section",controller:"panel.toolstab.main.button.section",html:'<i class="fa fa-cube"></i>',tooltip:"Вложенная секция (Ctrl+Shift+S)",elementName:"section",createOpts:{inner:true}},0,["panel-toolstab-main-button-section"],["component","box","button","panel-toolstab-main-button-section"],{component:true,box:true,button:true,"panel-toolstab-main-button-section":true},["widget.panel-toolstab-main-button-section"],0,[FBEditor.view.panel.toolstab.main.button.section,"Section"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.spacing.Spacing",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-spacing",html:'<i class="fa fa-text-width"></i>',tooltip:"Межбуквенный интервал (Ctrl+Shift+I)",elementName:"spacing"},0,["panel-toolstab-main-button-spacing"],["component","box","button","panel-toolstab-main-button-spacing"],{component:true,box:true,button:true,"panel-toolstab-main-button-spacing":true},["widget.panel-toolstab-main-button-spacing"],0,[FBEditor.view.panel.toolstab.main.button.spacing,"Spacing"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.strikethrough.Strikethrough",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-strikethrough",html:'<i class="fa fa-strikethrough"></i>',tooltip:"Зачёркнутый",elementName:"strikethrough"},0,["panel-toolstab-main-button-strikethrough"],["component","box","button","panel-toolstab-main-button-strikethrough"],{component:true,box:true,button:true,"panel-toolstab-main-button-strikethrough":true},["widget.panel-toolstab-main-button-strikethrough"],0,[FBEditor.view.panel.toolstab.main.button.strikethrough,"Strikethrough"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.strong.Strong",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-strong",html:'<i class="fa fa-bold"></i>',tooltip:"Полужирный (Ctrl+B)",elementName:"strong"},0,["panel-toolstab-main-button-strong"],["component","box","button","panel-toolstab-main-button-strong"],{component:true,box:true,button:true,"panel-toolstab-main-button-strong":true},["widget.panel-toolstab-main-button-strong"],0,[FBEditor.view.panel.toolstab.main.button.strong,"Strong"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.sub.Sub",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-sub",html:'<i class="fa fa-subscript"></i>',tooltip:"Нижний индекс (Ctrl+X)",elementName:"sub"},0,["panel-toolstab-main-button-sub"],["component","box","button","panel-toolstab-main-button-sub"],{component:true,box:true,button:true,"panel-toolstab-main-button-sub":true},["widget.panel-toolstab-main-button-sub"],0,[FBEditor.view.panel.toolstab.main.button.sub,"Sub"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.subscription.SubscriptionController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var j=this,c=j.getView(),d=FBEditor.editor.Manager,f=FBEditor.editor.Factory,b={},e={},a=c.elementName,h,g;h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}e.parent.children.push(e.newEl);g=d.getContent().getXml(true);e.parent.children.pop();if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}j.verify(g)}},0,0,0,0,["controller.panel.toolstab.main.button.subscription"],0,[FBEditor.view.panel.toolstab.main.button.subscription,"SubscriptionController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.subscription.Subscription",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-subscription",controller:"panel.toolstab.main.button.subscription",html:'<i class="fa fa-thumb-tack"></i>',tooltip:"Подпись",elementName:"subscription"},0,["panel-toolstab-main-button-subscription"],["component","box","button","panel-toolstab-main-button-subscription"],{component:true,box:true,button:true,"panel-toolstab-main-button-subscription":true},["widget.panel-toolstab-main-button-subscription"],0,[FBEditor.view.panel.toolstab.main.button.subscription,"Subscription"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.subtitle.SubtitleController",FBEditor.view.panel.toolstab.main.button.UnboundedButtonController,{},0,0,0,0,["controller.panel.toolstab.main.button.subtitle"],0,[FBEditor.view.panel.toolstab.main.button.subtitle,"SubtitleController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.subtitle.Subtitle",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-subtitle",controller:"panel.toolstab.main.button.subtitle",html:'<i class="fa fa-h-square fa-lg"></i>',tooltip:"Подзаголовок",elementName:"subtitle"},0,["panel-toolstab-main-button-subtitle"],["component","box","button","panel-toolstab-main-button-subtitle"],{component:true,box:true,button:true,"panel-toolstab-main-button-subtitle":true},["widget.panel-toolstab-main-button-subtitle"],0,[FBEditor.view.panel.toolstab.main.button.subtitle,"Subtitle"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.sup.Sup",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-sup",html:'<i class="fa fa-superscript"></i>',tooltip:"Верхний индекс (Ctrl+Shift+X)",elementName:"sup"},0,["panel-toolstab-main-button-sup"],["component","box","button","panel-toolstab-main-button-sup"],{component:true,box:true,button:true,"panel-toolstab-main-button-sup":true},["widget.panel-toolstab-main-button-sup"],0,[FBEditor.view.panel.toolstab.main.button.sup,"Sup"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.TableController",FBEditor.view.panel.toolstab.main.button.UnboundedButtonController,{onClick:function(){},verifyResult:function(f,e){var h=this,b=h.getView(),c=FBEditor.editor.Manager,a={},d={},g,j;g=c.getRange();if(!g){return}FBEditor.view.panel.toolstab.main.button.UnboundedButtonController.prototype.verifyResult.apply(this,arguments);j=b.down("panel-toolstab-main-button-table-menu-insertTable");b.menu.fireEvent("sync");if(!f){a.node=g.common;if(!a.node.getElement||a.node.getElement().isRoot){return false}d.node=a.node.getElement();if(d.node.hasParentName("table")||d.node.isTable){b.enable();j.disable()}}else{j.enable()}}},0,0,0,0,["controller.panel.toolstab.main.button.table"],0,[FBEditor.view.panel.toolstab.main.button.table,"TableController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.MenuController",Ext.app.ViewController,{onSync:function(){var c=this,a=c.getView(),b;b=a.query("panel-toolstab-main-button-table-menu-item");Ext.Array.each(b,function(d){d.fireEvent("sync")})}},0,0,0,0,["controller.panel.toolstab.main.button.table.menu"],0,[FBEditor.view.panel.toolstab.main.button.table.menu,"MenuController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItemController",Ext.app.ViewController,{onSync:function(){var f=this,a=f.getView(),e=FBEditor.editor.Manager,c={},d={},b;b=e.getRange();if(!b){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();if(!d.node.hasParentName("table")){a.disable();return false}a.enable();return true},onClick:function(){var g=this,a=g.getView(),c=a.cmdName,f=a.cmdOpts,d=FBEditor.editor.Manager,e,b,h;if(c){b=d.getRange();e=b.start;h=Ext.create("FBEditor.editor.command.table."+c,{node:e,opts:f});if(h.execute()){FBEditor.editor.HistoryManager.add(h)}}}},0,0,0,0,["controller.panel.toolstab.main.button.table.menu.item"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item,"AbstractItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem",Ext.menu.Item,{controller:"panel.toolstab.main.button.table.menu.item",cmdName:"",cmdOpts:{},listeners:{click:"onClick",sync:"onSync"}},0,["panel-toolstab-main-button-table-menu-item"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true},["widget.panel-toolstab-main-button-table-menu-item"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item,"AbstractItem"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.delCol.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-delCol",text:"Удалить столбец",cmdName:"DelColCommand"},0,["panel-toolstab-main-button-table-menu-delCol"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-delCol"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-delCol":true},["widget.panel-toolstab-main-button-table-menu-delCol"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.delCol,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.delRow.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-delRow",text:"Удалить строку",cmdName:"DelRowCommand"},0,["panel-toolstab-main-button-table-menu-delRow"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-delRow"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-delRow":true},["widget.panel-toolstab-main-button-table-menu-delRow"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.delRow,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.delTable.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-delTable",text:"Удалить таблицу",cmdName:"DeleteCommand"},0,["panel-toolstab-main-button-table-menu-delTable"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-delTable"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-delTable":true},["widget.panel-toolstab-main-button-table-menu-delTable"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.delTable,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.joinCells.ItemController",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItemController,{onSync:function(){var f=this,a=f.getView(),e=FBEditor.editor.Manager,c={},d={},b;b=e.getRange();if(!b||b.collapsed){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();d.table=d.node.isTable?d.node:d.node.getParentName("table");if(!d.table||!d.table.getSelection().isActive()){a.disable();return false}a.enable();a.cmdOpts={table:d.table.nodes[c.node.viewportId],viewportId:c.node.viewportId,size:d.table.getSelection().getSize()};return true}},0,0,0,0,["controller.panel.toolstab.main.button.table.menu.item.joinCells"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.joinCells,"ItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.joinCells.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-joinCells",controller:"panel.toolstab.main.button.table.menu.item.joinCells",text:"Объединить ячейки",cmdName:"JoinCellsCommand"},0,["panel-toolstab-main-button-table-menu-joinCells"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-joinCells"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-joinCells":true},["widget.panel-toolstab-main-button-table-menu-joinCells"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.joinCells,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColNext.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-insertColNext",text:"Вставить столбец справа",cmdName:"InsertColNextCommand"},0,["panel-toolstab-main-button-table-menu-insertColNext"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-insertColNext"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-insertColNext":true},["widget.panel-toolstab-main-button-table-menu-insertColNext"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColNext,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColPrev.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-insertColPrev",text:"Вставить столбец слева",cmdName:"InsertColPrevCommand"},0,["panel-toolstab-main-button-table-menu-insertColPrev"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-insertColPrev"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-insertColPrev":true},["widget.panel-toolstab-main-button-table-menu-insertColPrev"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.insertColPrev,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowNext.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-insertRowNext",text:"Вставить строку ниже",cmdName:"InsertRowNextCommand"},0,["panel-toolstab-main-button-table-menu-insertRowNext"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-insertRowNext"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-insertRowNext":true},["widget.panel-toolstab-main-button-table-menu-insertRowNext"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowNext,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowPrev.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-insertRowPrev",text:"Вставить строку выше",cmdName:"InsertRowPrevCommand"},0,["panel-toolstab-main-button-table-menu-insertRowPrev"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-insertRowPrev"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-insertRowPrev":true},["widget.panel-toolstab-main-button-table-menu-insertRowPrev"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.insertRowPrev,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.size.PickerController",Ext.app.ViewController,{onMouseOverCell:function(a){var c=this,b=c.getView();b.setActiveCell(a)},onClickCell:function(c){var d=this,a=d.getView(),b=FBEditor.editor.Manager;b.createElement("table",{size:c});a.up("panel-toolstab-main-button-table-menu").hide()}},0,0,0,0,["controller.panel.toolstab.main.button.table.menu.size"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.size,"PickerController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.size.Picker",Ext.Container,{controller:"panel.toolstab.main.button.table.menu.size",activeCell:[0,0],minCells:[5,5],maxCells:[20,20],rows:[],cellCls:"picker-create-table-cell",cellActiveCls:"picker-create-table-cell-active",listeners:{mouseOverCell:"onMouseOverCell",clickCell:"onClickCell"},afterRender:function(){var a=this;a.add(a.createGrid());a.add({xtype:"component",html:(a.activeCell[0]+1)+" x "+(a.activeCell[1]+1),style:"text-align: center"});Ext.container.Container.prototype.afterRender.apply(this,arguments)},createGrid:function(){var d=this,e=[],f,a;for(var c=0;c<d.maxCells[1];c++){f=[];for(var b=0;b<d.maxCells[0];b++){a=d.createCell(b,c);f.push(a)}d.rows.push(f);e.push({xtype:"container",layout:"hbox",items:f})}return e},createCell:function(d,h){var e=this,b,f,a,c,g;c=e.activeCell[0]<e.minCells[0]?e.minCells[0]:e.activeCell[0]+1;a=e.activeCell[1]<e.minCells[1]?e.minCells[1]:e.activeCell[1]+1;f=d>=c||h>=a;g=d<=e.activeCell[0]&&h<=e.activeCell[1]?e.cellActiveCls:"";b={xtype:"component",html:"<div></div>",cls:e.cellCls+" "+g,hidden:f,afterRender:function(){e.rows[h][d]=this;this.getEl().on({mouseover:function(){e.fireEvent("mouseOverCell",[d,h])},click:function(){e.fireEvent("clickCell",[d,h])}})}};return b},setActiveCell:function(d){var h=this,m=h.rows,b=h.items.last(),l,g,a,k,c;h.activeCell=d;k=h.activeCell[0]<h.minCells[0]-1?h.minCells[0]-1:h.activeCell[0]+1;a=h.activeCell[1]<h.minCells[1]-1?h.minCells[1]-1:h.activeCell[1]+1;for(var f=0;f<m.length;f++){for(var e=0;e<m[f].length;e++){l=m[f][e];g=e>k||f>a;l.setHidden(g);c=e<=h.activeCell[0]&&f<=h.activeCell[1];l.removeCls(h.cellActiveCls);if(c){l.addCls(h.cellActiveCls)}}}b.setHtml((h.activeCell[0]+1)+" x "+(h.activeCell[1]+1))}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[FBEditor.view.panel.toolstab.main.button.table.menu.size,"Picker"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.size.SizeMenu",Ext.menu.Menu,{minWidth:80,picker:null,initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.panel.toolstab.main.button.table.menu.size.Picker");b.picker=a;b.items=[a];Ext.menu.Menu.prototype.initComponent.apply(this,arguments)},onHide:function(){var a=this;a.picker.setActiveCell([0,0]);Ext.menu.Menu.prototype.onHide.apply(this,arguments)}},0,0,["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},0,0,[FBEditor.view.panel.toolstab.main.button.table.menu.size,"SizeMenu"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.insertTable.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-insertTable",text:"Вставить таблицу",initComponent:function(){var a=this;a.menu=Ext.create("FBEditor.view.panel.toolstab.main.button.table.menu.size.SizeMenu");FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-main-button-table-menu-insertTable"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-insertTable"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-insertTable":true},["widget.panel-toolstab-main-button-table-menu-insertTable"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.insertTable,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.splitCells.ItemController",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItemController,{onSync:function(){var f=this,a=f.getView(),e=FBEditor.editor.Manager,c={},d={},b;b=e.getRange();if(!b||!b.collapsed){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();d.td=d.node.isTable?d.node:d.node.getParentName("td");if(!d.td||!d.td.getLinks()){a.disable();return false}a.enable();a.cmdOpts={td:d.td,viewportId:c.node.viewportId};return true}},0,0,0,0,["controller.panel.toolstab.main.button.table.menu.item.splitCells"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.splitCells,"ItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.item.splitCells.Item",FBEditor.view.panel.toolstab.main.button.table.menu.item.AbstractItem,{id:"panel-toolstab-main-button-table-menu-splitCells",controller:"panel.toolstab.main.button.table.menu.item.splitCells",text:"Разъединить ячейку",cmdName:"SplitCellsCommand"},0,["panel-toolstab-main-button-table-menu-splitCells"],["component","box","menuitem","panel-toolstab-main-button-table-menu-item","panel-toolstab-main-button-table-menu-splitCells"],{component:true,box:true,menuitem:true,"panel-toolstab-main-button-table-menu-item":true,"panel-toolstab-main-button-table-menu-splitCells":true},["widget.panel-toolstab-main-button-table-menu-splitCells"],0,[FBEditor.view.panel.toolstab.main.button.table.menu.item.splitCells,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.menu.Menu",Ext.menu.Menu,{id:"panel-toolstab-main-button-table-menu",controller:"panel.toolstab.main.button.table.menu",listeners:{sync:"onSync"},initComponent:function(){var a=this;a.items=[{xtype:"panel-toolstab-main-button-table-menu-insertTable"},{xtype:"menuseparator"},{xtype:"panel-toolstab-main-button-table-menu-insertRowPrev"},{xtype:"panel-toolstab-main-button-table-menu-insertRowNext"},{xtype:"panel-toolstab-main-button-table-menu-insertColPrev"},{xtype:"panel-toolstab-main-button-table-menu-insertColNext"},{xtype:"menuseparator"},{xtype:"panel-toolstab-main-button-table-menu-delRow"},{xtype:"panel-toolstab-main-button-table-menu-delCol"},{xtype:"panel-toolstab-main-button-table-menu-delTable"},{xtype:"menuseparator"},{xtype:"panel-toolstab-main-button-table-menu-joinCells"},{xtype:"panel-toolstab-main-button-table-menu-splitCells"}];Ext.menu.Menu.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-main-button-table-menu"],["component","box","container","panel","menu","panel-toolstab-main-button-table-menu"],{component:true,box:true,container:true,panel:true,menu:true,"panel-toolstab-main-button-table-menu":true},["widget.panel-toolstab-main-button-table-menu"],0,[FBEditor.view.panel.toolstab.main.button.table.menu,"Menu"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.table.Table",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-table",controller:"panel.toolstab.main.button.table",html:'<i class="fa fa-table fa-lg"></i>',tooltip:"Таблица",elementName:"table",initComponent:function(){var a=this;a.menu=Ext.create("FBEditor.view.panel.toolstab.main.button.table.menu.Menu");FBEditor.view.panel.toolstab.main.button.AbstractButton.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-main-button-table"],["component","box","button","panel-toolstab-main-button-table"],{component:true,box:true,button:true,"panel-toolstab-main-button-table":true},["widget.panel-toolstab-main-button-table"],0,[FBEditor.view.panel.toolstab.main.button.table,"Table"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.title.TitleController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var j=this,c=j.getView(),d=FBEditor.editor.Manager,f=d.getFactory(),a=c.elementName,b={},e={},h,g;h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}e.parent.children.unshift(e.newEl);g=d.getContent().getXml(true);if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}e.parent.children.splice(0,1);j.verify(g)}},0,0,0,0,["controller.panel.toolstab.main.button.title"],0,[FBEditor.view.panel.toolstab.main.button.title,"TitleController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.title.Title",FBEditor.view.panel.toolstab.main.button.AbstractButton,{id:"panel-toolstab-main-button-title",controller:"panel.toolstab.main.button.title",html:'<i class="fa fa-header"></i>',tooltip:"Заголовок (Ctrl+H)",elementName:"title"},0,["panel-toolstab-main-button-title"],["component","box","button","panel-toolstab-main-button-title"],{component:true,box:true,button:true,"panel-toolstab-main-button-title":true},["widget.panel-toolstab-main-button-title"],0,[FBEditor.view.panel.toolstab.main.button.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.titlebody.TitleBodyController",FBEditor.view.panel.toolstab.main.button.ButtonController,{onSync:function(){var f=this,e=f.getView(),d=FBEditor.editor.Manager,a,c,b;a=d.getContent();c=e.elementName;b=a.children[0].hisName(c);if(!b){e.enable()}else{e.disable()}}},0,0,0,0,["controller.panel.toolstab.main.button.titlebody"],0,[FBEditor.view.panel.toolstab.main.button.titlebody,"TitleBodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.titlebody.TitleBody",FBEditor.view.panel.toolstab.main.button.title.Title,{id:"panel-toolstab-main-button-titlebody",controller:"panel.toolstab.main.button.titlebody",html:'<i class="fa fa-header fa-border"></i>',tooltip:"Заголовок для всей книги",createOpts:{body:true}},0,["panel-toolstab-main-button-titlebody"],["component","box","button","panel-toolstab-main-button-title","panel-toolstab-main-button-titlebody"],{component:true,box:true,button:true,"panel-toolstab-main-button-title":true,"panel-toolstab-main-button-titlebody":true},["widget.panel-toolstab-main-button-titlebody"],0,[FBEditor.view.panel.toolstab.main.button.titlebody,"TitleBody"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.ul.UlController",FBEditor.view.panel.toolstab.main.button.LiHolderButtonController,{},0,0,0,0,["controller.panel.toolstab.main.button.ul"],0,[FBEditor.view.panel.toolstab.main.button.ul,"UlController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.ul.Ul",FBEditor.view.panel.toolstab.main.button.AbstractLiHolderButton,{id:"panel-toolstab-main-button-ul",controller:"panel.toolstab.main.button.ul",html:'<i class="fa fa-list-ul"></i>',tooltip:"Маркированный список",elementName:"ul"},0,["panel-toolstab-main-button-ul"],["component","box","button","panel-toolstab-main-button-ul"],{component:true,box:true,button:true,"panel-toolstab-main-button-ul":true},["widget.panel-toolstab-main-button-ul"],0,[FBEditor.view.panel.toolstab.main.button.ul,"Ul"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.button.underline.Underline",FBEditor.view.panel.toolstab.main.button.AbstractStyleButton,{id:"panel-toolstab-main-button-underline",html:'<i class="fa fa-underline"></i>',tooltip:"Подчёркнутый (Ctrl+U)",elementName:"underline"},0,["panel-toolstab-main-button-underline"],["component","box","button","panel-toolstab-main-button-underline"],{component:true,box:true,button:true,"panel-toolstab-main-button-underline":true},["widget.panel-toolstab-main-button-underline"],0,[FBEditor.view.panel.toolstab.main.button.underline,"Underline"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.Main",Ext.panel.Panel,{id:"panel-toolstab-main",controller:"panel.toolstab.main",title:"Форматирование",listeners:{syncButtons:"onSyncButtons",disableButtons:"onDisableButtons"},buttons:[],translateText:{loading:"Загрузка xmllint ..."},initComponent:function(){var b=this,a=FBEditor.editor.Manager,c=a.getSchema(),d;c.validXml({xml:"test",callback:b.verifyResult,scope:b});d=[{xtype:"panel-toolstab-main-button-notes"},{xtype:"panel-toolstab-main-button-notebody"},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-main-button-titlebody"},{xtype:"panel-toolstab-main-button-section"},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-main-button-title"},{xtype:"panel-toolstab-main-button-epigraph"},{xtype:"panel-toolstab-main-button-annotation"},{xtype:"panel-toolstab-main-button-subscription"},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-main-button-div"},{xtype:"panel-toolstab-main-button-subtitle"},{xtype:"panel-toolstab-main-button-blockquote"},{xtype:"panel-toolstab-main-button-pre"},{xtype:"panel-toolstab-main-button-poem"},{xtype:"panel-toolstab-main-button-ul"},{xtype:"panel-toolstab-main-button-ol"},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-main-button-table"},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-main-button-img"},{xtype:"panel-toolstab-main-button-a"},{xtype:"panel-toolstab-main-button-note"},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-main-button-strong"},{xtype:"panel-toolstab-main-button-em"},{xtype:"panel-toolstab-main-button-underline"},{xtype:"panel-toolstab-main-button-strikethrough"},{xtype:"panel-toolstab-main-button-spacing"},{xtype:"panel-toolstab-main-button-sub"},{xtype:"panel-toolstab-main-button-sup"},{xtype:"panel-toolstab-main-button-code"}];b.dockedItems=[{xtype:"toolbar",dock:"top",items:d,hidden:true}];b.items=[{xtype:"component",padding:10,style:{color:"gray"},html:b.translateText.loading}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;Ext.panel.Panel.prototype.afterRender.apply(this,arguments);a.buttons=[a.down("panel-toolstab-main-button-notes"),a.down("panel-toolstab-main-button-notebody"),a.down("panel-toolstab-main-button-titlebody"),a.down("panel-toolstab-main-button-section"),a.down("panel-toolstab-main-button-title"),a.down("panel-toolstab-main-button-epigraph"),a.down("panel-toolstab-main-button-annotation"),a.down("panel-toolstab-main-button-subscription"),{sequence:[a.down("panel-toolstab-main-button-div"),a.down("panel-toolstab-main-button-subtitle"),a.down("panel-toolstab-main-button-blockquote"),a.down("panel-toolstab-main-button-pre"),a.down("panel-toolstab-main-button-poem"),a.down("panel-toolstab-main-button-table")]},a.down("panel-toolstab-main-button-ul"),a.down("panel-toolstab-main-button-ol"),a.down("panel-toolstab-main-button-img"),a.down("panel-toolstab-main-button-a"),a.down("panel-toolstab-main-button-note"),a.down("panel-toolstab-main-button-strong"),a.down("panel-toolstab-main-button-em"),a.down("panel-toolstab-main-button-underline"),a.down("panel-toolstab-main-button-strikethrough"),a.down("panel-toolstab-main-button-spacing"),a.down("panel-toolstab-main-button-sub"),a.down("panel-toolstab-main-button-sup"),a.down("panel-toolstab-main-button-code")]},getButtons:function(){return this.buttons},verifyResult:function(a,c){var b=this;if(c.loaded){Ext.log({msg:"xmllint загружен",level:"info"});b.getDockedItems()[0].setVisible(true)}}},0,["panel-toolstab-main"],["component","box","container","panel","panel-toolstab-main"],{component:true,box:true,container:true,panel:true,"panel-toolstab-main":true},["widget.panel-toolstab-main"],0,[FBEditor.view.panel.toolstab.main,"Main"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.split.SplitController",Ext.app.ViewController,{onClick:function(d,b){var f=Ext.getCmp("panel-main-content"),g,e,c,a;if(f.isActiveItem("main-editor")){e={btn:d,editor:Ext.getCmp("main-editor")};a=d.isSplited();c=!a?"FBEditor.command.SplitEditor":"FBEditor.command.UnsplitEditor";g=Ext.create(c,e);if(g.execute()){d.setSplited(!a);FBEditor.HistoryCommand.add(g)}}}},0,0,0,0,["controller.panel.toolstab.view.button.split"],0,[FBEditor.view.panel.toolstab.view.button.split,"SplitController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.split.Split",Ext.button.Button,{id:"panel-toolstab-view-button-split",controller:"panel.toolstab.view.button.split",listeners:{click:"onClick"},splited:false,translateText:{split:"Разделить окно текста",unsplit:"Снять разделение "},initComponent:function(){var a=this;a.text=a.translateText.split;Ext.button.Button.prototype.initComponent.apply(this,this)},setSplited:function(c){var a=this,b;a.splited=c;b=c?a.translateText.unsplit:a.translateText.split;a.setText(b)},isSplited:function(){return this.splited}},0,["panel-toolstab-view-button-split"],["component","box","button","panel-toolstab-view-button-split"],{component:true,box:true,button:true,"panel-toolstab-view-button-split":true},["widget.panel-toolstab-view-button-split"],0,[FBEditor.view.panel.toolstab.view.button.split,"Split"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.focusdetachpanels.FocusDetachPanels",Ext.button.Button,{id:"panel-toolstab-view-button-focusdetachpanels",text:"Показать отсоединенные панели",handler:function(){Ext.getCmp("main").fireEvent("focusDetachPanels")}},0,["panel-toolstab-view-button-focusdetachpanels"],["component","box","button","panel-toolstab-view-button-focusdetachpanels"],{component:true,box:true,button:true,"panel-toolstab-view-button-focusdetachpanels":true},["widget.panel-toolstab-view-button-focusdetachpanels"],0,[FBEditor.view.panel.toolstab.view.button.focusdetachpanels,"FocusDetachPanels"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.View",Ext.panel.Panel,{id:"panel-toolstab-view",title:"Вид",initComponent:function(){var a=this;a.tbar=[{xtype:"panel-toolstab-view-button-split"},{xtype:"panel-toolstab-view-button-focusdetachpanels"}];Ext.panel.Panel.prototype.initComponent.apply(this,this)}},0,["panel-toolstab-view"],["component","box","container","panel","panel-toolstab-view"],{component:true,box:true,container:true,panel:true,"panel-toolstab-view":true},["widget.panel-toolstab-view"],0,[FBEditor.view.panel.toolstab.view,"View"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.tools.Tools",Ext.panel.Panel,{id:"panel-toolstab-tools",title:"Инструменты",translateText:{version:"Версия: "},initComponent:function(){var a=this;a.items=[{xtype:"component",padding:10,style:{color:"gray"},html:a.translateText.version+FBEditor.version}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-tools"],["component","box","container","panel","panel-toolstab-tools"],{component:true,box:true,container:true,panel:true,"panel-toolstab-tools":true},["widget.panel-toolstab-tools"],0,[FBEditor.view.panel.toolstab.tools,"Tools"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsTab",Ext.tab.Panel,{id:"panel-main-toolstab",controller:"panel.main.toolstab",activeTab:"panel-toolstab-file",items:[{xtype:"panel-toolstab-file"},{xtype:"panel-toolstab-main"},{xtype:"panel-toolstab-view"},{xtype:"panel-toolstab-tools"}]},0,["panel-main-toolstab"],["component","box","container","panel","tabpanel","panel-main-toolstab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"panel-main-toolstab":true},["widget.panel-main-toolstab"],0,[FBEditor.view.panel.main.tools,"ToolsTab"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.FileNameController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.setActiveItem("panel-filename-field")},onAfterRender:function(){var b=this,a=FBEditor.file.Manager.defaultFb3FileName;b.onSetName(a);b.onCheckPosition()},onSetName:function(d){var c=this,a=c.getView(),b=a.items;b.each(function(e){e.setValue(d)});a.setActiveItem("panel-filename-display")},onCheckPosition:function(){var b=this,a=b.getView(),c;if(a.rendered){c=Ext.getCmp("panel-main-tools");a.setWidth(c.getWidth()-440)}}},0,0,0,0,["controller.panel.filename"],0,[FBEditor.view.panel.filename,"FileNameController"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.display.Display",Ext.form.field.Display,{id:"panel-filename-display",cls:"panel-filename-display",width:"100%"},0,["panel-filename-display"],["component","box","field","displayfield","panel-filename-display"],{component:true,box:true,field:true,displayfield:true,"panel-filename-display":true},["widget.panel-filename-display"],0,[FBEditor.view.panel.filename.display,"Display"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.field.FieldController",Ext.app.ViewController,{onBlur:function(){var b=this,a=b.getView(),c=a.getValue();b.setNewValue(c)},onSpecialKey:function(f,d){var c=this,a=c.getView(),g=a.getValue(),b=d.getKey();if(b===d.ENTER||b===d.ESC){g=b===d.ENTER?g:c.getDisplayValue();c.setNewValue(g)}},onActivate:function(){var b=this,a=b.getView(),c=a.getValue();a.focus([c.length,c.length])},setNewValue:function(d){var c=this,b=c.getView(),e=d,a;a=Ext.getCmp("panel-filename");e=b.isValid()?e:c.getDisplayValue();a.fireEvent("setName",e)},getDisplayValue:function(){return Ext.getCmp("panel-filename").child("panel-filename-display").getValue()}},0,0,0,0,["controller.panel.filename.field"],0,[FBEditor.view.panel.filename.field,"FieldController"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.field.Field",Ext.form.field.Text,{id:"panel-filename-field",controller:"panel.filename.field",border:false,allowBlank:false,maxLength:250,enforceMaxLength:true,width:"100%",cls:"panel-filename-field",listeners:{blur:"onBlur",activate:"onActivate",specialkey:"onSpecialKey"}},0,["panel-filename-field"],["component","box","field","textfield","panel-filename-field"],{component:true,box:true,field:true,textfield:true,"panel-filename-field":true},["widget.panel-filename-field"],0,[FBEditor.view.panel.filename.field,"Field"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.FileName",Ext.container.Container,{id:"panel-filename",controller:"panel.filename",floating:true,autoShow:true,shadow:false,border:false,monitorResize:true,plain:true,x:400,y:3,layout:"card",listeners:{click:{element:"el",fn:"onClick"},setName:"onSetName",afterrender:"onAfterRender",checkPosition:"onCheckPosition"},items:[{xtype:"panel-filename-display"},{xtype:"panel-filename-field"}]},0,["panel-filename"],["component","box","container","panel-filename"],{component:true,box:true,container:true,"panel-filename":true},["widget.panel-filename"],0,[FBEditor.view.panel.filename,"FileName"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.Tools",FBEditor.view.panel.main.Abstract,{id:"panel-main-tools",controller:"panel.main.tools",panelName:"tools",region:"north",bodyPadding:0,stateful:false,split:false,height:75,margin:"0 0 4px 0",listeners:{resize:"onResize"},items:[{xtype:"panel-main-toolstab"},{xtype:"panel-filename"}]},0,["panel-main-tools"],["component","box","container","panel","panel-main-tools"],{component:true,box:true,container:true,panel:true,"panel-main-tools":true},["widget.panel-main-tools"],0,[FBEditor.view.panel.main.tools,"Tools"],0));(Ext.cmd.derive("FBEditor.view.panel.main.AbstractDetach",FBEditor.view.panel.main.Abstract,{listeners:{resize:"onResize",detachpanel:"onDetachPanel"},detachable:false,initComponent:function(){var a=this;if(a.detachable){a.tools=[{type:"maximize",callback:a.detachPanel}]}FBEditor.view.panel.main.Abstract.prototype.initComponent.apply(this,arguments)},detachPanel:function(a){a.fireEvent("detachpanel",a)}},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main,"AbstractDetach"],0));(Ext.cmd.derive("FBEditor.view.panel.main.DetachController",Ext.app.ViewController,{onResize:function(d,c,a,b,e){if(c!==b){Ext.getCmp("main").fireEvent("checkWidthPanels")}},onDetachPanel:function(a){var b,c,d;b=a.panelName;c=a.getBox();d=window.open("#panel/"+b,b,"width="+c.width+",height="+c.height+",top="+c.top+",left="+c.left+",toolbar=no,location=no");if(d){FBEditor.childWindow[b]=d}}},0,0,0,0,0,0,[FBEditor.view.panel.main,"DetachController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.NavigationController",FBEditor.view.panel.main.DetachController,{},0,0,0,0,["controller.panel.main.navigation"],0,[FBEditor.view.panel.main.navigation,"NavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.TreeNavigationController",Ext.app.ViewController,{onClearSelection:function(c){var d=this,a=d.getView(),b=a.items,e=c.id;b.each(function(f){if(f.id!==e){f.clearSelection()}})}},0,0,0,0,["controller.panel.treenavigation"],0,[FBEditor.view.panel.treenavigation,"TreeNavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.AbstractTree",Ext.tree.Panel,{cls:"panel-treenavigation",listeners:{itemclick:"onItemClick",itemdblclick:"onItemDblClick",beforeitemclick:"onBeforeItemClick",selectionchange:"onSelectionChange",select:"onSelect"},syncContentId:"",afterRender:function(){var a=this;Ext.defer(function(){a.syncContent()},2500);Ext.tree.Panel.prototype.afterRender.apply(this,arguments)},clearSelection:function(){var c=this,b=c.getSelection(),a=c.getView();if(b.length){a.deselect(b[0],false)}},syncContent:function(){var b=this,e=b.syncContentId,c=FBEditor.getBridgeWindow(),a,d;a=c.Ext.getCmp("panel-main-content");d=a.getLayout().getActiveItem();if(d.id===e){b.selectPath("/root")}}},0,0,["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},0,0,[FBEditor.view.panel.treenavigation,"AbstractTree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.AbstractTreeController",Ext.app.ViewController,{onItemClick:function(d,b){var c=this,a=c.getView();c.clearSelection();if(c.openContent){if(!a.inWindow){c.openContent()}Ext.getCmp("panel-treenavigation").saveSelectData({view:c.getView(),node:d,record:b});Ext.getCmp("panel-treenavigation").restoreSelectData()}},onItemDblClick:function(b,a){},onBeforeItemClick:function(c,a){var b=this;c.deselect(a,false);Ext.getCmp("panel-treenavigation").restoreSelectData()},onSelect:function(){},onSelectionChange:function(){},clearSelection:function(){var c=this,a=c.getView(),b=a.ownerCt;b.fireEvent("clearSelection",a)}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation,"AbstractTreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.navigation.NavigationController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(f,a){var e=this,h=FBEditor.getBridgeWindow(),g=a.getData(),c,b,d;FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);c=h.FBEditor.resource.Manager;if((b=c.getSelectFunction())&&!a.isLeaf()){b(g)}else{if(!a.isLeaf()){d=g.path?g.path:"";c.setActiveFolder(d)}}},openContent:function(){var a;a=Ext.create("FBEditor.command.OpenResources");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,0,0,0,["controller.panel.resources.navigation"],0,[FBEditor.view.panel.resources.navigation,"NavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.navigation.Navigation",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-resources-navigation",controller:"panel.resources.navigation",useArrows:true,animate:false,manageHeight:false,syncContentId:"panel-resources",visibleFiles:false,expandableLastFolder:false,inWindow:false,initComponent:function(){var a=this,b=FBEditor.getBridgeWindow();a.store=Ext.create("FBEditor.store.resource.Navigation");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,c=FBEditor.getBridgeWindow(),a;a=c.FBEditor.resource.Manager.getData();if(a.length){b.loadData(a)}FBEditor.view.panel.treenavigation.AbstractTree.prototype.afterRender.apply(this,arguments)},loadData:function(b){var a=this,c;c=a.getTreeData(b);a.store.loadData(c);Ext.defer(function(){a.restoreOpenNode()},200)},getTreeData:function(d){var c=this,b=c.store.getRoot().data,e=[],a;Ext.each(d,function(f){var g;g=Ext.clone(c.parseNameResource(f.name,{path:""}));if(g){if(e.length&&g.children&&g.children.length){e=c.groupTreeData(g,e)}else{e.push(g)}}});a=[{root:true,text:b.text,expandable:b.expandable,icon:b.icon,cls:b.cls,iconCls:b.iconCls,children:e}];return a},parseNameResource:function(a,g){var h=this,e=a,d=g,c={},b=null,j,l,f,k;j=e.indexOf("/");f=j===-1;l=f?e:e.substring(0,j);c.text=l;k=f&&e.indexOf(".")!==-1?true:false;if(!h.visibleFiles){c.visible=k?false:true}c.leaf=k?true:false;if(f&&!k){b=[]}c.path=d.path?d.path+"/"+l:l;c.id=c.path;l=e.slice(j+1);c.childrenPath=l;c.expandable=l.indexOf("/")===-1?false:true;c.icon=" ";c.cls="treenavigation-children treenavigation-children-resource";if(!f){b=[];b.push(h.parseNameResource(l,Ext.clone(c)))}c.children=Ext.clone(b);return c},groupTreeData:function(b,c){var a=this,d=c;Ext.each(d,function(f,e){var g;if(f.text===b.text&&f.children&&b.children){if(f.children.length===0){g=b.children}else{g=a.groupTreeData(b.children[0],f.children)}d[e].children=g;d[e].expandable=true}else{if(c.length===e+1){d.push(b)}}});return d},restoreOpenNode:function(){var b=this,d=FBEditor.getBridgeWindow(),a=b.store.getRoot().data.text,c;c=d.FBEditor.resource.Manager.getActiveFolder();c=c?"/"+c:"";c="/"+a+c;b.expandPath(c,"text","/",function(h,f){var g,e;if(h){g=f.getData();e=g.path?g.path:"";d.FBEditor.resource.Manager.setActiveFolder(e)}})},selectPath:function(d){var b=this,a=b.store.getRoot().data.text,c=d;c=c.indexOf("/root")===0?c:"/"+a+"/"+c;FBEditor.view.panel.treenavigation.AbstractTree.prototype.selectPath.call(this,c,"text")},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():c.callParrent();return a}},0,["panel-resources-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-resources-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-resources-navigation":true},["widget.panel-resources-navigation"],0,[FBEditor.view.panel.resources.navigation,"Navigation"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.TreeController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(c,a){var b=this,e=FBEditor.getBridgeWindow(),d=a.getData();FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);if(d.anchor){e.location="#"+d.anchor}},openContent:function(){var a;a=Ext.create("FBEditor.command.OpenDesc");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,0,0,0,["controller.panel.desc.navigation"],0,[FBEditor.view.panel.treenavigation.desc,"TreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.TreeStore",Ext.data.TreeStore,{defaultRootText:"Описание",rootVisible:true,proxy:{type:"memory"},root:{icon:" ",cls:"treenavigation-root treenavigation-root-desc",children:[{text:"Название произведения",expandable:false,anchor:"desc-fieldset-title",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Обложка",expandable:false,anchor:"desc-fieldset-title",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Серия",expandable:false,anchor:"desc-fieldset-sequence",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Аннотация",expandable:false,anchor:"desc-fieldset-annotation",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Классификация произведения",expandable:false,anchor:"desc-fieldset-classification",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Связанные персоны (автор, переводчик и т.д.)",expandable:false,anchor:"desc-fieldset-relations-subject",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Периодическое издание",expandable:false,anchor:"desc-fieldset-periodical",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Связанные объекты",expandable:false,anchor:"desc-fieldset-relations-object",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Информация о бумажной публикации",expandable:false,anchor:"desc-fieldset-publishInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Комментарии редактора",expandable:false,anchor:"desc-fieldset-history",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Пользовательская информация",expandable:false,anchor:"desc-fieldset-customInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Информация о файле",expandable:false,anchor:"desc-fieldset-documentInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"}]}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation.desc,"TreeStore"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.Tree",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-desc-navigation",controller:"panel.desc.navigation",useArrows:true,animate:false,syncContentId:"form-desc",initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.treenavigation.desc.TreeStore");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)}},0,["panel-desc-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-desc-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-desc-navigation":true},["widget.panel-desc-navigation"],0,[FBEditor.view.panel.treenavigation.desc,"Tree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.TreeController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemDblClick:function(g,a){var e=this,h=FBEditor.getBridgeWindow(),f=a.getData(),d={},b={},c;FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemDblClick.apply(this,arguments);c=h.FBEditor.editor.Manager;d.node=c.getElementById(f.elementId);if(d.node){h.Ext.Object.getValues(c.getContent().nodes)[0].focus();b.nodes=Ext.Object.getValues(d.node.nodes);Ext.Array.each(b.nodes,function(j){j.scrollIntoView()});b.first=b.nodes[0];while(b.first.firstChild){b.first=b.first.firstChild}d.first=b.first.getElement();c.setCursor({startNode:b.first,startOffset:0,endNode:b.first,endOffset:0,focusElement:d.first})}},openContent:function(){var a;a=Ext.create("FBEditor.command.OpenBody");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,0,0,0,["controller.panel.body.navigation"],0,[FBEditor.view.panel.treenavigation.body,"TreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.TreeStore",Ext.data.TreeStore,{defaultRootText:"Текст",rootVisible:true,proxy:{type:"memory"},root:{icon:" ",cls:"treenavigation-root treenavigation-root-body"}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation.body,"TreeStore"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.Tree",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-body-navigation",controller:"panel.body.navigation",stateId:"panel-body-navigation",stateful:true,useArrows:true,animate:false,selModel:{preventFocus:true},syncContentId:"main-editor",initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.treenavigation.body.TreeStore");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this,c=FBEditor.getBridgeWindow(),b;b=c.FBEditor.editor.Manager.getContent();if(b){a.loadData(b)}FBEditor.view.panel.treenavigation.AbstractTree.prototype.afterRender.apply(this,arguments)},destroy:function(){var a=this;a.saveStateNodes();FBEditor.view.panel.treenavigation.AbstractTree.prototype.destroy.apply(this,arguments)},loadData:function(b){var a=this,d=FBEditor.getBridgeWindow(),c;a.saveStateNodes();c=a.getTreeData(b);a.store.loadData(c);a.getView().expand(a.store.first())},getTreeData:function(b){var d=this,c=d.store.getRoot().data,e,a;e=d.getTreeChildren(b);a=[{root:true,text:c.text,expandable:c.expandable,icon:c.icon,cls:c.cls,iconCls:c.iconCls,children:e.children,elementId:b.elementId}];return a},getTreeChildren:function(b,a){var c=this,e=FBEditor.getBridgeWindow(),d=null;if(b.showedOnTree){if(b.children){a=a||"";b.treePath=a+"/"+b.elementId}d={};d.text=b.getNameTree();d.elementId=b.elementId;d.expanded=e.FBEditor.editor.Manager.stateExpandedNodesTree[b.elementId]?true:false;d.icon=" ";d.cls="treenavigation-children treenavigation-children-body";d.cls+=b.cls?" treenavigation-children-"+b.cls:"";Ext.Array.each(b.children,function(f){var g;if(f.showedOnTree){g=c.getTreeChildren(f,b.treePath);if(g){d.children=d.children||[];d.children.push(g)}}else{Ext.Array.each(f.children,function(h){g=c.getTreeChildren(h,b.treePath);if(g){d.children=d.children||[];d.children.push(g)}})}});d.leaf=!d.children}return d},saveStateNodes:function(b){var a=this,c=FBEditor.getBridgeWindow();b=b||a.store.getData().items[0].data.children;Ext.Array.each(b,function(d){if(d.expanded){c.FBEditor.editor.Manager.stateExpandedNodesTree[d.elementId]=true}else{if(c.FBEditor.editor.Manager.stateExpandedNodesTree[d.elementId]){delete c.FBEditor.editor.Manager.stateExpandedNodesTree[d.elementId]}}if(d.children&&d.children.length){a.saveStateNodes(d.children)}})},expandElement:function(a){var b=this;if(Ext.isEmpty(a.treePath)&&a.parent){b.expandElement(a.parent);return}b.selectPath(a.treePath,"elementId")},selectRoot:function(){var b=this,a=b.getRootNode(),c;c="/"+a.id;b.selectPath(c)},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():c.callParrent();return a}},0,["panel-body-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-body-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-body-navigation":true},["widget.panel-body-navigation"],0,[FBEditor.view.panel.treenavigation.body,"Tree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.TreeNavigation",Ext.panel.Panel,{id:"panel-treenavigation",controller:"panel.treenavigation",defaults:{width:"100%"},listeners:{clearSelection:"onClearSelection"},_selectData:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-desc-navigation"},{xtype:"panel-body-navigation"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,c,a;c=Ext.getCmp("window-resource");a=Ext.getCmp("window-resource-tree");if(c&&!c.isHidden()){c.getWindowPanelResourcesNavigation().add({xtype:"panel-resources-navigation"})}else{if(a&&!a.isHidden()){a.getWindowPanelResourcesTreeNavigation().add({xtype:"panel-resources-navigation"})}else{b.insert(1,{xtype:"panel-resources-navigation"})}}Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},saveSelectData:function(b){var a=this;a._selectData=b},restoreSelectData:function(){var b=this,c=b._selectData,a;if(c&&c.view){a=c.record.getData();if(a.path){c.view.selectPath(a.path)}else{c.view.selectPath(c.record.getPath())}}}},0,["panel-treenavigation"],["component","box","container","panel","panel-treenavigation"],{component:true,box:true,container:true,panel:true,"panel-treenavigation":true},["widget.panel-treenavigation"],0,[FBEditor.view.panel.treenavigation,"TreeNavigation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.Navigation",FBEditor.view.panel.main.AbstractDetach,{id:"panel-main-navigation",controller:"panel.main.navigation",title:"Навигация",panelName:"navigation",layout:"anchor",overflowY:"auto",defaults:{anchor:"100%"},initComponent:function(){var a=this;a.items=[{xtype:"panel-treenavigation"}];FBEditor.view.panel.main.AbstractDetach.prototype.initComponent.apply(this,arguments)}},0,["panel-main-navigation"],["component","box","container","panel","panel-main-navigation"],{component:true,box:true,container:true,panel:true,"panel-main-navigation":true},["widget.panel-main-navigation"],0,[FBEditor.view.panel.main.navigation,"Navigation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.content.ContentController",Ext.app.ViewController,{onResize:function(d,c,a,b,e){if(c!==b){if(c<d.getMinWidth()){d.setWidth(d.getMinWidth())}}},onContentBody:function(){var c=this,a=c.getView(),b=FBEditor.editor.Manager;a.setActiveItem("main-editor");Ext.getCmp("panel-main-toolstab").setActiveItem("panel-toolstab-main");b.syncButtons()},onContentDesc:function(){var c=this,a=c.getView(),b=FBEditor.editor.Manager;a.setActiveItem("form-desc");Ext.getCmp("panel-main-toolstab").setActiveItem("panel-toolstab-file");b.disableButtons()},onContentResources:function(){var c=this,a=c.getView(),b=FBEditor.editor.Manager;a.setActiveItem("panel-resources");Ext.getCmp("panel-main-toolstab").setActiveItem("panel-toolstab-file");b.disableButtons()},onContentEmpty:function(){var c=this,a=c.getView(),b=FBEditor.editor.Manager;a.setActiveItem("panel-empty");b.disableButtons()}},0,0,0,0,["controller.panel.main.content"],0,[FBEditor.view.panel.main.content,"ContentController"],0));(Ext.cmd.derive("FBEditor.view.panel.editor.EditorController",Ext.app.ViewController,{onLoadData:function(){var d=this,a=d.getView(),b=d.getViewports(),c=Ext.getCmp("panel-main-content"),e,f;f=a.viewports.north;Ext.Array.each(b,function(g){e=FBEditor.editor.Manager.getNode(g.id);g.loadData(e);if(g.id!==f.id&&c.isActiveItem("main-editor")){g.fireEvent("syncScroll",f)}})},onSplit:function(){var b=this,a=b.getView();a.addSouthViewport()},onUnsplit:function(){var b=this,a=b.getView();a.removeSouthViewport()},onSyncContent:function(a){var c=this,b=c.getViewports(),d;Ext.Array.each(b,function(e){if(e.id!==a.id){d=FBEditor.editor.Manager.getNode(e.id);e.loadData(d)}})},getViewports:function(){var c=this,a=c.getView(),b=[];b.push(a.viewports.north);if(a.viewports.south){b.push(a.viewports.south)}return b}},0,0,0,0,["controller.view.editor"],0,[FBEditor.view.panel.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.editor.viewport.ViewportController",Ext.app.ViewController,{onChange:function(b,e){var d=this,a=d.getView(),c;c=Ext.getCmp("main-editor");c.fireEvent("syncContent",a)},onSyncScroll:function(a){var e=this,b=e.getView(),d=b.getContent(),c=a.getContent(),f=c.scrollTop;d.scrollTop=f+a.getHeight()}},0,0,0,0,["controller.panel.editor.viewport"],0,[FBEditor.view.panel.editor.viewport,"ViewportController"],0));(Ext.cmd.derive("FBEditor.view.panel.editor.viewport.Viewport",Ext.container.Container,{controller:"panel.editor.viewport",layout:"fit",cls:"panel-editor-viewport",listeners:{change:"onChange",syncScroll:"onSyncScroll"},createRootElement:false,afterRender:function(){var d=this,c=FBEditor.editor.Manager,a,b;Ext.container.Container.prototype.afterRender.apply(this,this);if(d.createRootElement){a=c.createRootElement();b=a.getNode(d.id);d.loadData(b);a.createScaffold();c.suspendEvent=true;Ext.Array.each(a.children,function(e){b.appendChild(e.getNode(d.id))});c.suspendEvent=false;c.updateTree()}},loadData:function(c){var b=this,d,a;d=b.getEl().dom;a=b.getContent();if(a){d.replaceChild(c,a)}else{d.appendChild(c)}},getContent:function(){return this.getEl().dom.firstChild}},0,["panel-editor-viewport"],["component","box","container","panel-editor-viewport"],{component:true,box:true,container:true,"panel-editor-viewport":true},["widget.panel-editor-viewport"],0,[FBEditor.view.panel.editor.viewport,"Viewport"],0));(Ext.cmd.derive("FBEditor.view.panel.editor.Editor",Ext.panel.Panel,{id:"main-editor",controller:"view.editor",layout:"border",listeners:{loadData:"onLoadData",split:"onSplit",unsplit:"onUnsplit",syncContent:"onSyncContent"},viewports:{north:null,south:null},southViewportConfig:{xtype:"panel-editor-viewport",height:"50%",split:{size:8},region:"south"},afterRender:function(){var a=this,b;b=Ext.widget({xtype:"panel-editor-viewport",region:"center",createRootElement:true});a.viewports.north=b;a.add(b);Ext.panel.Panel.prototype.afterRender.apply(this,this)},addSouthViewport:function(){var b=this,c,a;a=Ext.widget(b.southViewportConfig);b.viewports.south=a;b.add(a);c=b.viewports.north;b.fireEvent("syncContent",c);a.fireEvent("syncScroll",c)},removeSouthViewport:function(){var b=this,a;a=b.viewports.south;FBEditor.editor.Manager.removeNodes(a.id);b.remove(a);b.viewports.south=null}},0,["main-editor"],["component","box","container","panel","main-editor"],{component:true,box:true,container:true,panel:true,"main-editor":true},["widget.main-editor"],0,[FBEditor.view.panel.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.ResourcesController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.resources"],0,[FBEditor.view.panel.resources,"ResourcesController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.view.ResourcesViewController",Ext.app.ViewController,{onFocusChange:function(c,f,b){var d=this,e=FBEditor.getBridgeProps(),a;a=e.Ext.getCmp("panel-props-resources");if(a&&a.fireEvent){a.fireEvent("loadData",b)}},onItemDblClick:function(b,a){var c=this,d=a.getData(),e=FBEditor.getBridgeWindow();if(d.isFolder){e.FBEditor.resource.Manager.restoreActiveFolder(d.name)}},onItemClick:function(b,a){var d=this,e=a.getData(),f=FBEditor.getBridgeWindow(),c;if(!e.isFolder&&(c=f.FBEditor.resource.Manager.getSelectFunction())){c(e)}}},0,0,0,0,["controller.view.resources"],0,[FBEditor.view.panel.resources.view,"ResourcesViewController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.GreatResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-great-thumb"><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"GreatResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.LargeResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-large-thumb"><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"LargeResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.NormalResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-normal-thumb"><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"NormalResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.SmallResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-small-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"SmallResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.ListResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-list-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"ListResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.TableResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-table-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span><span class="resource-thumb-date">{date}</span><span class="resource-thumb-size">{size}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"TableResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.view.ResourcesView",Ext.view.View,{id:"view-resources",controller:"view.resources",itemSelector:"div.resource-thumb-wrap",emptyText:"Нет доступных ресурсов",deferEmptyText:false,listeners:{focuschange:"onFocusChange",itemdblclick:"onItemDblClick",itemclick:"onItemClick"},tplTypes:{great:"GreatResource",large:"LargeResource",normal:"NormalResource",small:"SmallResource",list:"ListResource",table:"TableResource"},tplDefaultType:"great",initComponent:function(){var a=this,c=a.tplTypes[a.tplDefaultType],b;b=a.getTplName(c);a.tpl=Ext.create(b);a.store=Ext.create("FBEditor.store.resource.Resource");Ext.view.View.prototype.initComponent.apply(this,arguments)},setStoreData:function(c){var b=this,a=b.store;a.setData(c)},setTpl:function(a){var b=this,c=b.getTplName(a);b.tpl=Ext.create(c);b.refresh()},getTplName:function(b){var c=this,a=c.tplTypes,d;d=a[b]?a[b]:a[c.tplDefaultType];d="FBEditor.view.panel.resources.tpl."+d;return d}},0,["view-resources"],["component","box","dataview","view-resources"],{component:true,box:true,dataview:true,"view-resources":true},["widget.view-resources"],0,[FBEditor.view.panel.resources.view,"ResourcesView"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.selectview.SelectViewStore",Ext.data.Store,{fields:["type","name"],data:[{type:"great",name:"Огромные значки"},{type:"large",name:"Крупные значки"},{type:"normal",name:"Обычные значки"},{type:"small",name:"Мелкие значки"},{type:"list",name:"Список"},{type:"table",name:"Таблица"}]},0,0,0,0,0,0,[FBEditor.view.panel.resources.control.selectview,"SelectViewStore"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.selectview.SelectView",Ext.form.ComboBox,{fieldLabel:"Вид",labelWidth:30,queryMode:"local",displayField:"name",valueField:"type",forceSelection:true,editable:false,value:"great",listeners:{select:function(c,a){var b=a[0].getData().type;Ext.getCmp("view-resources").setTpl(b)}},initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.resources.control.selectview.SelectViewStore");Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["panel-resources-selectview"],["component","box","field","textfield","pickerfield","combobox","combo","panel-resources-selectview"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"panel-resources-selectview":true},["widget.panel-resources-selectview"],0,[FBEditor.view.panel.resources.control.selectview,"SelectView"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.Control",Ext.panel.Panel,{id:"panel-resources-control",layout:"hbox",defaults:{margin:"5"},initComponent:function(){var a=this;a.items=[{xtype:"button-load-resource"},{xtype:"button-createfolder-resource"},{xtype:"panel-resources-selectview"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-resources-control"],["component","box","container","panel","panel-resources-control"],{component:true,box:true,container:true,panel:true,"panel-resources-control":true},["widget.panel-resources-control"],0,[FBEditor.view.panel.resources.control,"Control"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.Resources",Ext.panel.Panel,{id:"panel-resources",controller:"panel.resources",autoScroll:true,bodyPadding:5,initComponent:function(){var a=this;a.items=[{xtype:"panel-resources-control"},{xtype:"view-resources"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-resources"],["component","box","container","panel","panel-resources"],{component:true,box:true,container:true,panel:true,"panel-resources":true},["widget.panel-resources"],0,[FBEditor.view.panel.resources,"Resources"],0));(Ext.cmd.derive("FBEditor.view.panel.empty.Empty",Ext.panel.Panel,{id:"panel-empty",layout:"fit",translateText:{loading:"Загрузка..."},initComponent:function(){var a=this;a.items=[{html:a.translateText.loading}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-empty"],["component","box","container","panel","panel-empty"],{component:true,box:true,container:true,panel:true,"panel-empty":true},["widget.panel-empty"],0,[FBEditor.view.panel.empty,"Empty"],0));(Ext.cmd.derive("FBEditor.view.panel.main.content.Content",FBEditor.view.panel.main.Abstract,{id:"panel-main-content",controller:"panel.main.content",panelName:"content",region:"center",collapsible:false,layout:"card",minWidth:610,overflowX:true,margin:"0 2px 0 2px",bodyPadding:0,items:[{xtype:"form-desc"},{xtype:"panel-resources"},{xtype:"main-editor"},{xtype:"panel-empty"}],listeners:{resize:"onResize",contentBody:"onContentBody",contentDesc:"onContentDesc",contentResources:"onContentResources",contentEmpty:"onContentEmpty"},afterRender:function(){var d=this,c=FBEditor.desc.Manager,b=FBEditor.editor.Manager,a;a=b.createRootElement();a.createScaffold();FBEditor.view.panel.main.Abstract.prototype.afterRender.apply(this,arguments)},isActiveItem:function(e){var c=this,a,b,d;b=c.getLayout();d=b.getActiveItem();a=d.getId()===e;return a},openBody:function(){var a=this,b;if(!Ext.getCmp("main-editor")||!Ext.getCmp("main-editor").rendered){Ext.defer(function(){a.openBody()},500)}Ext.create("FBEditor.command.OpenBody").execute();b=Ext.getCmp("panel-body-navigation");b.selectRoot()}},0,["panel-main-content"],["component","box","container","panel","panel-main-content"],{component:true,box:true,container:true,panel:true,"panel-main-content":true},["widget.panel-main-content"],0,[FBEditor.view.panel.main.content,"Content"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.PropsController",FBEditor.view.panel.main.DetachController,{},0,0,0,0,["controller.panel.main.props"],0,[FBEditor.view.panel.main.props,"PropsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.CardController",Ext.app.ViewController,{onActivePanelResources:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-resources")},onActivePanelBody:function(){var e=this,b=e.getView(),d=FBEditor.editor.Manager,f,a,c;b.setActiveItem("panel-props-body");c=d.getRange();if(!c||c&&!c.start.parentNode){a=d.getContent();c={start:d.getDeepFirst(a.nodes[Ext.Object.getKeys(a.nodes)[0]])}}f={startNode:c.start,startOffset:c.offset?c.offset.start:0};d.setCursor(f)},onActivePanelDesc:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-desc")}},0,0,0,0,["controller.panel.main.props.card"],0,[FBEditor.view.panel.main.props,"CardController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Abstract",Ext.panel.Panel,{afterRender:function(){var a=this;a.syncContent();Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},getContentId:function(){throw Error("Не реализован метод view.panel.main.props.Abstract#getContentId")},syncContent:function(){var b=this,e=b.getContentId(),c=FBEditor.getBridgeWindow(),a,d;a=c.Ext.getCmp("panel-main-content");d=a.getLayout().getActiveItem();if(d.id===e){Ext.getCmp("panel-main-props-card").setActiveItem(b.id)}}},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main.props,"Abstract"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.DescController",Ext.app.ViewController,{onAccessHub:function(){var e=this,b=e.getView(),f=FBEditor.getBridgeWindow(),c=f.FBEditor.desc.Manager,a,d;if(c.isLoadUrl()){a=b.down("[name=desc-load-url]");a.setHidden(false);d=b.down("button-desc-load");d.setHidden(false)}}},0,0,0,0,["controller.panel.props.desc"],0,[FBEditor.view.panel.main.props.desc,"DescController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.persons.PersonsController",FBEditor.view.panel.main.props.desc.search.ContainerController,{onLoadData:function(d){var c=this,a=c.getView(),b;a.setVisible(true);b=a.getContainerItems();b.params=Ext.clone(d);b.fireEvent("loadData",d)}},0,0,0,0,["controller.props.desc.search.persons"],0,[FBEditor.view.panel.main.props.desc.search.persons,"PersonsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.persons.Persons",FBEditor.view.panel.main.props.desc.search.Container,{controller:"props.desc.search.persons",id:"props-desc-search-persons",xtypeContainerItems:"container-desc-search-persons",afterRender:function(){var b=this,c=FBEditor.getBridgeWindow(),a;a=c.Ext.ComponentQuery.query("form-desc-relations-subject-name")[0];b.setReferenceCmp(a);FBEditor.view.panel.main.props.desc.search.Container.prototype.afterRender.apply(this,arguments)}},0,["props-desc-search-persons"],["component","box","container","props-desc-search-container","props-desc-search-persons"],{component:true,box:true,container:true,"props-desc-search-container":true,"props-desc-search-persons":true},["widget.props-desc-search-persons"],0,[FBEditor.view.panel.main.props.desc.search.persons,"Persons"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.Desc",FBEditor.view.panel.main.props.Abstract,{controller:"panel.props.desc",id:"panel-props-desc",listeners:{accessHub:"onAccessHub"},translateText:{loadUrl:"ID произведения для загрузки описания",saveUrl:"URL для сохранения описания"},initComponent:function(){var e=this,h=FBEditor.getBridgeWindow(),b=h.FBEditor.desc.Manager,a=h.FBEditor.route.Manager,g=a.getParams(),f,c,d;f=h.Ext.getCmp("main")&&h.FBEditor.accessHub&&b.isLoadUrl()?false:true;c=g.art?g.art:"";e.items=[{xtype:"numberfield",labelAlign:"top",name:"desc-load-url",fieldLabel:e.translateText.loadUrl,value:c,width:"100%",hideTrigger:true,allowBlank:false,checkChangeBuffer:200,hidden:f,listeners:{change:function(j,k){var l=Ext.getCmp("button-desc-load");b.loadUrl=b.url+"?art="+k;if(k&&j.isValid()){l.enable()}else{l.disable()}}}},{xtype:"button-desc-load",disabled:c?false:true,hidden:f},{xtype:"props-desc-search-arts"},{xtype:"props-desc-search-persons"}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"form-desc"},setLoadUrl:function(a){var b=this,c;c=b.down('[name="desc-load-url"]');c.setValue(a)},getSaveField:function(){var a=this,b;b=a.down('[name="desc-save-url"]');return b}},0,["panel-props-desc"],["component","box","container","panel","panel-props-desc"],{component:true,box:true,container:true,panel:true,"panel-props-desc":true},["widget.panel-props-desc"],0,[FBEditor.view.panel.main.props.desc,"Desc"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.ResourcesController",Ext.app.ViewController,{_deferId:null,onClick:function(){var a=this;clearTimeout(a._deferId)},onLoadData:function(a){var b=this,d=a?a.getData():null,c=FBEditor.getBridgeProps();if(d){c.Ext.getCmp("props-resources-info").update(d);b.setResourceButtons(d.name);b.setVisibleItems(true);if(d.isFolder){c.Ext.getCmp("button-save-resource").setVisible(false);c.Ext.getCmp("button-move-resource").setVisible(false)}}else{b._deferId=Ext.defer(function(){b.setVisibleItems(false);b.setResourceButtons(null)},200)}},setVisibleItems:function(d){var c=this,a=c.getView(),b=a.items;b.each(function(e){e.setVisible(d)})},setResourceButtons:function(c){var a,b=FBEditor.getBridgeProps();if(b.Ext&&b.Ext.getCmp){a=[b.Ext.getCmp("button-delete-resource"),b.Ext.getCmp("button-save-resource"),b.Ext.getCmp("button-move-resource")];Ext.Array.each(a,function(d){d.setResource(c)})}}},0,0,0,0,["controller.panel.props.resources"],0,[FBEditor.view.panel.main.props.resources,"ResourcesController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.Info",Ext.Component,{id:"props-resources-info",initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<div class="resource-info">','<div class="resource-info-name">{baseName}</div>','<tpl if="isCover"><div class="resource-info-cover">Обложка книги</div></tpl>','<tpl if="!isFolder"><div><span>Размеры:</span> {width} x {height}</div></tpl>',"<div><span>Тип:</span> {type}</div>",'<tpl if="isFolder"><div><span>Ресурсов:</span> {total}</div>',"<tpl else><div><span>Объём:</span> {size}</div></tpl>","<div><span>Изменён:</span> {date}</div>",'<tpl if="totalElements"><div><span>Использован в тексте:</span> {totalElements}</div></tpl>',"</div>");Ext.Component.prototype.initComponent.apply(this,arguments)}},0,["props-resources-info"],["component","box","props-resources-info"],{component:true,box:true,"props-resources-info":true},["widget.props-resources-info"],0,[FBEditor.view.panel.main.props.resources,"Info"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.Resources",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-resources",controller:"panel.props.resources",defaults:{hidden:true},listeners:{loadData:"onLoadData",click:{element:"el",fn:"onClick"}},initComponent:function(){var a=this;a.items=[{xtype:"props-resources-info"},{xtype:"button-delete-resource"},{xtype:"button-save-resource"},{xtype:"button-move-resource"}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"panel-resources"}},0,["panel-props-resources"],["component","box","container","panel","panel-props-resources"],{component:true,box:true,container:true,panel:true,"panel-props-resources":true},["widget.panel-props-resources"],0,[FBEditor.view.panel.main.props.resources,"Resources"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.BodyController",Ext.app.ViewController,{onBeforeActivate:function(){var d=this,a=d.getView(),c,b,e;Ext.getCmp("props-element-info").update();b=a.getConvertBtn();e=a.getDeleteBtn();b.setVisible(false);e.setVisible(false);c=a.editor;if(c){a.remove(c);a.editor=null}},onAfterRender:function(){var b=this,d=FBEditor.getBridgeWindow(),a,c;a=d.FBEditor.editor.Manager.getFocusElement();if(a){c=a.getData();b.onLoadData(c)}},onLoadData:function(d){var h=this,j=h.getView(),a,f,k,c,b;if(d){Ext.getCmp("props-element-info").update(d);b=d.el;k=j.getConvertBtn();c=j.getDeleteBtn();k.element=b;c.element=b;k.setVisible(true);c.setVisible(true);if(b.isRoot){c.setVisible(false)}if(b.isImg||b.isRoot||!k.verify()){k.setVisible(false)}f=j.editor;if(!f||f&&f.elementName!==d.elementName){if(f){j.remove(f)}try{a="FBEditor.view.panel.main.props.body.editor."+d.elementName+".Editor";f=Ext.create(a,{elementName:d.elementName});j.add(f)}catch(g){f=null}}if(f){f.updateData(d,true)}j.editor=f}}},0,0,0,0,["controller.panel.props.body"],0,[FBEditor.view.panel.main.props.body,"BodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.Info",Ext.Component,{id:"props-element-info",initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<div class="element-info">','<div class="element-info-name">{elementName}</div>','<div><tpl if="htmlPath"><span>Путь html:</span> {htmlPath}</tpl></div>',"</div>");Ext.Component.prototype.initComponent.apply(this,arguments)}},0,["props-element-info"],["component","box","props-element-info"],{component:true,box:true,"props-element-info":true},["widget.props-element-info"],0,[FBEditor.view.panel.main.props.body,"Info"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.AbstractEditorController",Ext.app.ViewController,{onChange:function(){var a=this;a.updateElement()},updateElement:function(){var c=this,a=c.getView(),b;if(!a.isLoad){b=a.getValues();if(a.isValid()){a.element.update(b)}}}},0,0,0,0,["controller.panel.props.body.editor"],0,[FBEditor.view.panel.main.props.body.editor,"AbstractEditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.AbstractEditor",Ext.form.Panel,{controller:"panel.props.body.editor",layout:"anchor",width:"100%",listeners:{change:"onChange"},defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("form").fireEvent("change")}}},elementName:null,element:null,isLoad:false,constructor:function(b){var a=this;a.elementName=b.elementName;Ext.form.Panel.prototype.constructor.apply(this,arguments)},updateData:function(c,d){var b=this,a;a=b.getForm();b.isLoad=d;b.element=c.el?c.el:b.element;a.reset();a.setValues(c);b.isLoad=false},setVisibleButtons:function(e){var c=this,b,a,d;b=c.getPanelPropsBody();a=b.getConvertBtn();d=b.getDeleteBtn();a.setVisible(e);d.setVisible(e)},getPanelPropsBody:function(){return this.up("panel-props-body")}},1,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor,"AbstractEditor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.a.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{href:"Ссылка"},initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"},{name:"href",fieldLabel:a.translateText.href,anchor:"100%",allowBlank:false}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.a,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.annotation.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.annotation,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.blockquote.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.blockquote,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.img.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{prefixName:"",translateText:{emptyImg:"Пустое изображение",alt:"Альтернативный текст",width:"Ширина",minWidth:"Мин. ширина",maxWidth:"Макс. ширина",widthError:"По шаблону d+(.d+)?(em|ex|%|mm). Например: 1.5em"},initComponent:function(){var a=this;a.items=[{xtype:"image-editor-picture"},{xtype:"button-editor-select-img",scope:a,style:{marginLeft:"10px"}},{xtype:"displayfield",name:a.prefixName+"name",value:a.translateText.emptyImg,listeners:{}},{xtype:"hidden",name:a.prefixName+"src",value:"undefined",submitValue:true},{name:a.prefixName+"id",fieldLabel:"ID",anchor:"100%"},{name:a.prefixName+"alt",fieldLabel:a.translateText.alt,anchor:"100%"},{name:a.prefixName+"width",labelAlign:"left",fieldLabel:a.translateText.width,regex:/^\d+(\.\d+)?(em|ex|%|mm)$/,regexText:a.translateText.widthError,style:{marginTop:"15px"}},{name:a.prefixName+"min-width",labelAlign:"left",fieldLabel:a.translateText.minWidth,regex:/^\d+(\.\d+)?(em|ex|%|mm)$/,regexText:a.translateText.widthError},{name:a.prefixName+"max-width",labelAlign:"left",fieldLabel:a.translateText.maxWidth,regex:/^\d+(\.\d+)?(em|ex|%|mm)$/,regexText:a.translateText.widthError}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)},updateData:function(d,e){var b=this,c=b.prefixName,a={};b.isLoad=e;b.element=d.el?d.el:b.element;d.src=d.src?d.src:d.name;d.url=d.url?d.url:d.src;d[c+"name"]=d.name?d.name:b.translateText.emptyImg;Ext.Object.each(d,function(f,g){a[c+f]=g});b.getForm().setValues(a);b.down("image-editor-picture").updateView({url:d.url});b.isLoad=false},reset:function(){var a=this,b;b={url:"undefined"};a.updateData(b);FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.reset.apply(this,arguments)}},0,["panel-props-body-editor-img"],["component","box","container","panel","form","panel-props-body-editor-img"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-img":true},["widget.panel-props-body-editor-img"],0,[FBEditor.view.panel.main.props.body.editor.img,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.img.ImgController",FBEditor.view.panel.main.props.body.editor.AbstractEditorController,{onChange:function(){var b=this,a=b.getView();a.up("panel-props-body-editor-div").fireEvent("change")}},0,0,0,0,["controller.panel.props.body.editor.marker.img"],0,[FBEditor.view.panel.main.props.body.editor.div.marker.img,"ImgController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.img.Img",FBEditor.view.panel.main.props.body.editor.img.Editor,{controller:"panel.props.body.editor.marker.img",prefixName:"marker-",defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("panel-props-body-editor-div").fireEvent("change")}}},updateData:function(d,e){var b=this,c=b.prefixName,a={};d.src=d.src?d.src:d.name;d.url=d.url?d.url:d.src;d.name=d.name?d.name:b.translateText.emptyImg;Ext.Object.each(d,function(f,g){a[c+f]=g});b.getForm().setValues(a);b.down("image-editor-picture").updateView({url:d.url})}},0,["panel-props-body-editor-marker-img"],["component","box","container","panel","form","panel-props-body-editor-img","panel-props-body-editor-marker-img"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-img":true,"panel-props-body-editor-marker-img":true},["widget.panel-props-body-editor-marker-img"],0,[FBEditor.view.panel.main.props.body.editor.div.marker.img,"Img"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.Marker",Ext.form.FieldSet,{collapsible:true,collapsed:true,border:true,padding:10,margin:"10 0 0 0",listeners:{collapse:function(){this.setMarker(false);this.reset()},expand:function(){this.setMarker(true)}},initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-marker-img"},{xtype:"hidden",name:"marker",value:false,submitValue:true}];Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},updateData:function(c,e){var b=this,a,d;a=c.el.marker;if(a){b.expand();d=a.img.getData();b.down("panel-props-body-editor-marker-img").updateData(d,e)}else{b.collapse()}},setMarker:function(b){var a=this;a.down("[name=marker]").setRawValue(b);a.up("form").fireEvent("change")},reset:function(){var a=this;a.down("panel-props-body-editor-marker-img").reset()}},0,["panel-props-body-editor-marker"],["component","box","container","fieldset","panel-props-body-editor-marker"],{component:true,box:true,container:true,fieldset:true,"panel-props-body-editor-marker":true},["widget.panel-props-body-editor-marker"],0,[FBEditor.view.panel.main.props.body.editor.div.marker,"Marker"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{width:"Ширина",minWidth:"Мин. ширина",maxWidth:"Макс. ширина",widthError:"По шаблону d+(.d+)?(em|ex|%|mm). Например: 1.5em",floatText:"Обтекание",align:"Выравнивание",bindTo:"Привязать к",border:"Граница",onOnePage:"on-one-page",markerText:"Маркер"},initComponent:function(){var b=this,a;a={floatStore:Ext.create("Ext.data.Store",{fields:["value","text"],data:[{value:"",text:"ничего"},{value:"left",text:"слева"},{value:"right",text:"справа"},{value:"center",text:"по центру"},{value:"default",text:"по умолчанию"}]}),alignStore:Ext.create("Ext.data.Store",{fields:["text"],data:[{value:"",text:"ничего"},{value:"left",text:"слева"},{value:"right",text:"справа"},{value:"center",text:"по центру"},{value:"justify",text:"по ширине"}]})};b.items=[{name:"id",fieldLabel:"ID",anchor:"100%"},{name:"width",labelAlign:"left",fieldLabel:b.translateText.width,regex:/^\d+(\.\d+)?(em|ex|%|mm)$/,regexText:b.translateText.widthError,style:{marginTop:"15px"}},{name:"min-width",labelAlign:"left",fieldLabel:b.translateText.minWidth,regex:/^\d+(\.\d+)?(em|ex|%|mm)$/,regexText:b.translateText.widthError},{name:"max-width",labelAlign:"left",fieldLabel:b.translateText.maxWidth,regex:/^\d+(\.\d+)?(em|ex|%|mm)$/,regexText:b.translateText.widthError},{xtype:"combo",name:"float",labelAlign:"left",fieldLabel:b.translateText.floatText,store:a.floatStore,queryMode:"local",valueField:"value",displayField:"text",editable:false},{xtype:"combo",name:"align",labelAlign:"left",fieldLabel:b.translateText.align,store:a.alignStore,queryMode:"local",valueField:"value",displayField:"text",editable:false},{xtype:"checkbox",name:"border",labelAlign:"left",fieldLabel:b.translateText.border,inputValue:"true"},{xtype:"checkbox",name:"on-one-page",labelAlign:"left",fieldLabel:b.translateText.onOnePage,inputValue:"true"},{name:"bindto",fieldLabel:b.translateText.bindTo,anchor:"100%"},{xtype:"panel-props-body-editor-marker",title:b.translateText.markerText}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)},updateData:function(d,e){var c=this,b=c.getForm(),a;c.isLoad=e;c.element=d.el?d.el:c.element;b.reset();b.setValues(d);c.down("panel-props-body-editor-marker").updateData(d,e);c.isLoad=false}},0,["panel-props-body-editor-div"],["component","box","container","panel","form","panel-props-body-editor-div"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-div":true},["widget.panel-props-body-editor-div"],0,[FBEditor.view.panel.main.props.body.editor.div,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.epigraph.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.epigraph,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.note.RoleStore",Ext.data.Store,{fields:["value","text"],data:[{value:"auto",text:"auto"},{value:"footnote",text:"footnote"},{value:"endnote",text:"endnote"},{value:"comment",text:"comment"},{value:"other",text:"other"}]},0,0,0,0,0,0,[FBEditor.view.panel.main.props.body.editor.note,"RoleStore"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.note.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{href:"Ссылка",autotext:"Автотекст",role:"Тип"},initComponent:function(){var a=this,b;b=Ext.create("FBEditor.view.panel.main.props.body.editor.note.RoleStore");a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"},{name:"href",fieldLabel:a.translateText.href,anchor:"100%",allowBlank:false},{xtype:"combobox",name:"role",fieldLabel:a.translateText.role,anchor:"100%",store:b,valueField:"value"},{xtype:"checkbox",name:"autotext",fieldLabel:a.translateText.autotext,labelAlign:"left",labelWidth:70,inputValue:"true"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.note,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.notebody.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.notebody,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.notes.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{show:"show"},initComponent:function(){var a=this;a.items=[{xtype:"checkbox",name:"show",labelAlign:"left",labelWidth:50,fieldLabel:a.translateText.show,inputValue:"true"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.notes,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.ol.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.ol,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.pre.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.pre,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.section.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{article:"article"},initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%",allowBlank:false},{xtype:"checkbox",name:"article",labelAlign:"left",labelWidth:50,fieldLabel:a.translateText.article,inputValue:"true"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.section,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.stanza.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.stanza,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.subscription.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.subscription,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.table.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.table,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.td.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{updateData:function(){var a=this;FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.updateData.apply(this,arguments);a.setVisibleButtons(false)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.td,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.title.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.title,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.tr.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{updateData:function(){var a=this;FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.updateData.apply(this,arguments);a.setVisibleButtons(false)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.tr,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.ul.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.ul,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.Body",FBEditor.view.panel.main.props.Abstract,{controller:"panel.props.body",id:"panel-props-body",layout:{type:"vbox"},listeners:{beforeactivate:"onBeforeActivate",afterRender:"onAfterRender",loadData:"onLoadData"},editor:null,initComponent:function(){var a=this;a.items=[{xtype:"props-element-info"},{xtype:"button-editor-convert-element",width:"100%",hidden:true,style:{margin:"0 0 10px 0"}},{xtype:"button-editor-delete-element",width:"100%",hidden:true,style:{margin:"0 0 10px 0"}}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"main-editor"},getConvertBtn:function(){return this.down("button-editor-convert-element")},getDeleteBtn:function(){return this.down("button-editor-delete-element")}},0,["panel-props-body"],["component","box","container","panel","panel-props-body"],{component:true,box:true,container:true,panel:true,"panel-props-body":true},["widget.panel-props-body"],0,[FBEditor.view.panel.main.props.body,"Body"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Card",Ext.panel.Panel,{id:"panel-main-props-card",controller:"panel.main.props.card",layout:"card",listeners:{activePanelResources:"onActivePanelResources",activePanelDesc:"onActivePanelDesc",activePanelBody:"onActivePanelBody"},initComponent:function(){var a=this;a.items=[{xtype:"panel-props-desc"},{xtype:"panel-props-resources"},{xtype:"panel-props-body"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-main-props-card"],["component","box","container","panel","panel-main-props-card"],{component:true,box:true,container:true,panel:true,"panel-main-props-card":true},["widget.panel-main-props-card"],0,[FBEditor.view.panel.main.props,"Card"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Props",FBEditor.view.panel.main.AbstractDetach,{id:"panel-main-props",controller:"panel.main.props",panelName:"props",title:"Свойства",overflowY:"auto",cls:"panel-main-props",initComponent:function(){var a=this;a.items=[{xtype:"panel-main-props-card"}];FBEditor.view.panel.main.AbstractDetach.prototype.initComponent.apply(this,arguments)}},0,["panel-main-props"],["component","box","container","panel","panel-main-props"],{component:true,box:true,container:true,panel:true,"panel-main-props":true},["widget.panel-main-props"],0,[FBEditor.view.panel.main.props,"Props"],0));(Ext.cmd.derive("FBEditor.view.main.Main",Ext.container.Container,{id:"main",controller:"main",layout:{type:"border"},cls:"fb3",listeners:{resize:"onResize",focusDetachPanels:"onFocusDetachPanels",checkWidthPanels:"onCheckWidthPanels",closedetachpanels:"onDetachPanel",closeapplication:"onCloseApplication",restoredetachpanel:"onRestoreDetachPanel",accessHub:"onAccessHub"},panelConfig:{navigation:{xtype:"panel-main-navigation",width:"15%",region:"west",detachable:true,collapsible:true},props:{xtype:"panel-main-props",width:"15%",region:"east",detachable:true,collapsible:true}},windowPanels:{navigation:null,props:null},initComponent:function(){var a=this;if(!FBEditor.parentWindow){a.items=[{xtype:"panel-main-tools"},{xtype:"panel-main-content"}]}Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;if(!FBEditor.parentWindow){Ext.Object.each(a.windowPanels,function(b){if(!FBEditor.getLocalStorage().getItem(b)){a.add(a.panelConfig[b])}else{a.fireEvent("restoredetachpanel",b)}})}Ext.container.Container.prototype.afterRender.apply(this,arguments)},createPanel:function(b){var c=this,d,a;d="panel-main-"+b;a=c.add({xtype:d,region:"center"});document.title=document.title+" - "+a.title},attachPanel:function(a,c){var b=this,d;d="panel-main-"+a;if(!b.contains(Ext.getCmp(d))){FBEditor.childWindow[a]=null;b.add(b.panelConfig[a]);b.windowPanels[a]=null}},removeDetachedPanel:function(c){var b=this,a,d;a=c.name;b.windowPanels[a]=c;d="panel-main-"+a;if(b.contains(Ext.getCmp(d))){Ext.getCmp(d).close()}}},0,["main"],["component","box","container","main"],{component:true,box:true,container:true,main:true},["widget.main"],0,[FBEditor.view.main,"Main"],0));
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(a){a.URL=a.URL||a.webkitURL;if(a.Blob&&a.URL){try{new Blob();return}catch(c){}}var b=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||(function(p){var f=function(z){return Object.prototype.toString.call(z).match(/^\[object\s(.*)\]$/)[1]},y=function m(){this.data=[]},w=function h(B,z,A){this.data=B;this.size=B.length;this.type=z;this.encoding=A},q=y.prototype,v=w.prototype,s=p.FileReaderSync,d=function(z){this.code=this[this.name=z]},r=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),u=r.length,l=p.URL||p.webkitURL||p,t=l.createObjectURL,e=l.revokeObjectURL,k=l,o=p.btoa,j=p.atob,g=p.ArrayBuffer,n=p.Uint8Array,x=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;w.fake=v.fake=true;while(u--){d.prototype[r[u]]=u+1}if(!l.createObjectURL){k=p.URL=function(A){var z=document.createElementNS("http://www.w3.org/1999/xhtml","a"),B;z.href=A;if(!("origin" in z)){if(z.protocol.toLowerCase()==="data:"){z.origin=null}else{B=A.match(x);z.origin=B&&B[1]}}return z}}k.createObjectURL=function(A){var B=A.type,z;if(B===null){B="application/octet-stream"}if(A instanceof w){z="data:"+B;if(A.encoding==="base64"){return z+";base64,"+A.data}else{if(A.encoding==="URI"){return z+","+decodeURIComponent(A.data)}}if(o){return z+";base64,"+o(A.data)}else{return z+","+encodeURIComponent(A.data)}}else{if(t){return t.call(l,A)}}};k.revokeObjectURL=function(z){if(z.substring(0,5)!=="data:"&&e){e.call(l,z)}};q.append=function(D){var F=this.data;if(n&&(D instanceof g||D instanceof n)){var E="",A=new n(D),B=0,C=A.length;for(;B<C;B++){E+=String.fromCharCode(A[B])}F.push(E)}else{if(f(D)==="Blob"||f(D)==="File"){if(s){var z=new s();F.push(z.readAsBinaryString(D))}else{throw new d("NOT_READABLE_ERR")}}else{if(D instanceof w){if(D.encoding==="base64"&&j){F.push(j(D.data))}else{if(D.encoding==="URI"){F.push(decodeURIComponent(D.data))}else{if(D.encoding==="raw"){F.push(D.data)}}}}else{if(typeof D!=="string"){D+=""}F.push(unescape(encodeURIComponent(D)))}}}};q.getBlob=function(z){if(!arguments.length){z=null}return new w(this.data.join(""),z,"raw")};q.toString=function(){return"[object BlobBuilder]"};v.slice=function(C,z,B){var A=arguments.length;if(A<3){B=null}return new w(this.data.slice(C,A>1?z:this.data.length),B,this.encoding)};v.toString=function(){return"[object Blob]"};v.close=function(){this.size=0;delete this.data};return y}(a));a.Blob=function(g,f){var j=f?(f.type||""):"";var e=new b();if(g){for(var h=0,d=g.length;h<d;h++){e.append(g[h])}}return e.getBlob(j)}}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content||this));
/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.JSZip=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(p,m){if(!k[p]){if(!f[p]){var l=typeof require=="function"&&require;if(!m&&l){return l(p,!0)}if(e){return e(p,!0)}throw new Error("Cannot find module '"+p+"'")}var n=k[p]={exports:{}};f[p][0].call(n.exports,function(o){var q=f[p][1][o];return g(q?q:o)},n,n.exports,c,f,k,h)}return k[p].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(h,g,e){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(m,l){var j="";var t,r,p,s,q,o,n;var k=0;while(k<m.length){t=m.charCodeAt(k++);r=m.charCodeAt(k++);p=m.charCodeAt(k++);s=t>>2;q=((t&3)<<4)|(r>>4);o=((r&15)<<2)|(p>>6);n=p&63;if(isNaN(r)){o=n=64}else{if(isNaN(p)){n=64}}j=j+f.charAt(s)+f.charAt(q)+f.charAt(o)+f.charAt(n)}return j};e.decode=function(m,l){var j="";var t,r,p;var s,q,o,n;var k=0;m=m.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(k<m.length){s=f.indexOf(m.charAt(k++));q=f.indexOf(m.charAt(k++));o=f.indexOf(m.charAt(k++));n=f.indexOf(m.charAt(k++));t=(s<<2)|(q>>4);r=((q&15)<<4)|(o>>2);p=((o&3)<<6)|n;j=j+String.fromCharCode(t);if(o!=64){j=j+String.fromCharCode(r)}if(n!=64){j=j+String.fromCharCode(p)}}return j}},{}],2:[function(h,f,e){function g(){this.compressedSize=0;this.uncompressedSize=0;this.crc32=0;this.compressionMethod=null;this.compressedContent=null}g.prototype={getContent:function(){return null},getCompressedContent:function(){return null}};f.exports=g},{}],3:[function(g,f,e){e.STORE={magic:"\x00\x00",compress:function(h){return h},uncompress:function(h){return h},compressInputType:null,uncompressInputType:null};e.DEFLATE=g("./flate")},{"./flate":8}],4:[function(k,g,f){var e=k("./utils");var j=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];g.exports=function h(o,q){if(typeof o==="undefined"||!o.length){return 0}var n=e.getTypeOf(o)!=="string";if(typeof(q)=="undefined"){q=0}var m=0;var s=0;var l=0;q=q^(-1);for(var p=0,r=o.length;p<r;p++){l=n?o[p]:o.charCodeAt(p);s=(q^l)&255;m=j[s];q=(q>>>8)^m}return q^(-1)}},{"./utils":21}],5:[function(h,g,f){var e=h("./utils");function j(k){this.data=null;this.length=0;this.index=0}j.prototype={checkOffset:function(k){this.checkIndex(this.index+k)},checkIndex:function(k){if(this.length<k||k<0){throw new Error("End of data reached (data length = "+this.length+", asked index = "+(k)+"). Corrupted zip ?")}},setIndex:function(k){this.checkIndex(k);this.index=k},skip:function(k){this.setIndex(this.index+k)},byteAt:function(k){},readInt:function(m){var k=0,l;this.checkOffset(m);for(l=this.index+m-1;l>=this.index;l--){k=(k<<8)+this.byteAt(l)}this.index+=m;return k},readString:function(k){return e.transformTo("string",this.readData(k))},readData:function(k){},lastIndexOfSignature:function(k){},readDate:function(){var k=this.readInt(4);return new Date(((k>>25)&127)+1980,((k>>21)&15)-1,(k>>16)&31,(k>>11)&31,(k>>5)&63,(k&31)<<1)}};g.exports=j},{"./utils":21}],6:[function(g,f,e){e.base64=false;e.binary=false;e.dir=false;e.createFolders=false;e.date=null;e.compression=null;e.comment=null},{}],7:[function(h,g,f){var e=h("./utils");f.string2binary=function(j){return e.string2binary(j)};f.string2Uint8Array=function(j){return e.transformTo("uint8array",j)};f.uint8Array2String=function(j){return e.transformTo("string",j)};f.string2Blob=function(k){var j=e.transformTo("arraybuffer",k);return e.arrayBuffer2Blob(j)};f.arrayBuffer2Blob=function(j){return e.arrayBuffer2Blob(j)};f.transformTo=function(k,j){return e.transformTo(k,j)};f.getTypeOf=function(j){return e.getTypeOf(j)};f.checkSupport=function(j){return e.checkSupport(j)};f.MAX_VALUE_16BITS=e.MAX_VALUE_16BITS;f.MAX_VALUE_32BITS=e.MAX_VALUE_32BITS;f.pretty=function(j){return e.pretty(j)};f.findCompression=function(j){return e.findCompression(j)};f.isRegExp=function(j){return e.isRegExp(j)}},{"./utils":21}],8:[function(j,g,e){var f=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Uint32Array!=="undefined");var h=j("pako");e.uncompressInputType=f?"uint8array":"array";e.compressInputType=f?"uint8array":"array";e.magic="\b\x00";e.compress=function(k){return h.deflateRaw(k)};e.uncompress=function(k){return h.inflateRaw(k)}},{pako:24}],9:[function(h,g,f){var e=h("./base64");function j(l,k){if(!(this instanceof j)){return new j(l,k)}this.files={};this.comment=null;this.root="";if(l){this.load(l,k)}this.clone=function(){var m=new j();for(var n in this){if(typeof this[n]!=="function"){m[n]=this[n]}}return m}}j.prototype=h("./object");j.prototype.load=h("./load");j.support=h("./support");j.defaults=h("./defaults");j.utils=h("./deprecatedPublicUtils");j.base64={encode:function(k){return e.encode(k)},decode:function(k){return e.decode(k)}};j.compressions=h("./compressions");g.exports=j},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(j,h,g){var f=j("./base64");var e=j("./zipEntries");h.exports=function(p,l){var o,n,m,k;l=l||{};if(l.base64){p=f.decode(p)}n=new e(p,l);o=n.files;for(m=0;m<o.length;m++){k=o[m];this.file(k.fileName,k.decompressed,{binary:true,optimizedBinaryString:true,date:k.date,dir:k.dir,comment:k.fileComment.length?k.fileComment:null,createFolders:l.createFolders})}if(n.zipComment.length){this.comment=n.zipComment}return this}},{"./base64":1,"./zipEntries":22}],11:[function(g,f,e){(function(h){f.exports=function(k,j){return new h(k,j)};f.exports.test=function(j){return h.isBuffer(j)}}).call(this,(typeof Buffer!=="undefined"?Buffer:undefined))},{}],12:[function(h,g,f){var e=h("./uint8ArrayReader");function j(k){this.data=k;this.length=this.data.length;this.index=0}j.prototype=new e();j.prototype.readData=function(l){this.checkOffset(l);var k=this.data.slice(this.index,this.index+l);this.index+=l;return k};g.exports=j},{"./uint8ArrayReader":18}],13:[function(m,g,G){var s=m("./support");var D=m("./utils");var k=m("./crc32");var v=m("./signature");var r=m("./defaults");var f=m("./base64");var z=m("./compressions");var j=m("./compressedObject");var t=m("./nodeBuffer");var h=m("./utf8");var l=m("./stringWriter");var p=m("./uint8ArrayWriter");var C=function(H){if(H._data instanceof j){H._data=H._data.getContent();H.options.binary=true;H.options.base64=false;if(D.getTypeOf(H._data)==="uint8array"){var I=H._data;H._data=new Uint8Array(I.length);if(I.length!==0){H._data.set(I,0)}}}return H._data};var F=function(I){var H=C(I),J=D.getTypeOf(H);if(J==="string"){if(!I.options.binary){if(s.nodebuffer){return t(H,"utf-8")}}return I.asBinary()}return H};var o=function(I){var H=C(this);if(H===null||typeof H==="undefined"){return""}if(this.options.base64){H=f.decode(H)}if(I&&this.options.binary){H=x.utf8decode(H)}else{H=D.transformTo("string",H)}if(!I&&!this.options.binary){H=D.transformTo("string",x.utf8encode(H))}return H};var q=function(I,J,H){this.name=I;this.dir=H.dir;this.date=H.date;this.comment=H.comment;this._data=J;this.options=H;this._initialMetadata={dir:H.dir,date:H.date}};q.prototype={asText:function(){return o.call(this,true)},asBinary:function(){return o.call(this,false)},asNodeBuffer:function(){var H=F(this);return D.transformTo("nodebuffer",H)},asUint8Array:function(){var H=F(this);return D.transformTo("uint8array",H)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var e=function(K,H){var J="",I;for(I=0;I<H;I++){J+=String.fromCharCode(K&255);K=K>>>8}return J};var B=function(){var I={},J,H;for(J=0;J<arguments.length;J++){for(H in arguments[J]){if(arguments[J].hasOwnProperty(H)&&typeof I[H]==="undefined"){I[H]=arguments[J][H]}}}return I};var n=function(H){H=H||{};if(H.base64===true&&(H.binary===null||H.binary===undefined)){H.binary=true}H=B(H,r);H.date=H.date||new Date();if(H.compression!==null){H.compression=H.compression.toUpperCase()}return H};var y=function(J,L,M){var H=D.getTypeOf(L),K;M=n(M);if(M.createFolders&&(K=A(J))){E.call(this,K,true)}if(M.dir||L===null||typeof L==="undefined"){M.base64=false;M.binary=false;L=null}else{if(H==="string"){if(M.binary&&!M.base64){if(M.optimizedBinaryString!==true){L=D.string2binary(L)}}}else{M.base64=false;M.binary=true;if(!H&&!(L instanceof j)){throw new Error("The data of '"+J+"' is in an unsupported format !")}if(H==="arraybuffer"){L=D.transformTo("uint8array",L)}}}var I=new q(J,L,M);this.files[J]=I;return I};var A=function(I){if(I.slice(-1)=="/"){I=I.substring(0,I.length-1)}var H=I.lastIndexOf("/");return(H>0)?I.substring(0,H):""};var E=function(H,I){if(H.slice(-1)!="/"){H+="/"}I=(typeof I!=="undefined")?I:false;if(!this.files[H]){y.call(this,H,null,{dir:true,createFolders:I})}return this.files[H]};var u=function(J,I){var H=new j(),K;if(J._data instanceof j){H.uncompressedSize=J._data.uncompressedSize;H.crc32=J._data.crc32;if(H.uncompressedSize===0||J.dir){I=z.STORE;H.compressedContent="";H.crc32=0}else{if(J._data.compressionMethod===I.magic){H.compressedContent=J._data.getCompressedContent()}else{K=J._data.getContent();H.compressedContent=I.compress(D.transformTo(I.compressInputType,K))}}}else{K=F(J);if(!K||K.length===0||J.dir){I=z.STORE;K=""}H.uncompressedSize=K.length;H.crc32=k(K);H.compressedContent=I.compress(D.transformTo(I.compressInputType,K))}H.compressedSize=H.compressedContent.length;H.compressionMethod=I.magic;return H};var w=function(ab,W,J,M){var aa=J.compressedContent,H=D.transformTo("string",h.utf8encode(W.name)),I=W.comment||"",L=D.transformTo("string",h.utf8encode(I)),Z=H.length!==W.name.length,X=L.length!==I.length,Q=W.options,K,U,O="",Y="",N="",P,V;if(W._initialMetadata.dir!==W.dir){P=W.dir}else{P=Q.dir}if(W._initialMetadata.date!==W.date){V=W.date}else{V=Q.date}K=V.getHours();K=K<<6;K=K|V.getMinutes();K=K<<5;K=K|V.getSeconds()/2;U=V.getFullYear()-1980;U=U<<4;U=U|(V.getMonth()+1);U=U<<5;U=U|V.getDate();if(Z){Y=e(1,1)+e(k(H),4)+H;O+="up"+e(Y.length,2)+Y}if(X){N=e(1,1)+e(this.crc32(L),4)+L;O+="uc"+e(N.length,2)+N}var T="";T+="\n\x00";T+=(Z||X)?"\x00\b":"\x00\x00";T+=J.compressionMethod;T+=e(K,2);T+=e(U,2);T+=e(J.crc32,4);T+=e(J.compressedSize,4);T+=e(J.uncompressedSize,4);T+=e(H.length,2);T+=e(O.length,2);var S=v.LOCAL_FILE_HEADER+T+H+O;var R=v.CENTRAL_FILE_HEADER+"\x14\x00"+T+e(L.length,2)+"\x00\x00\x00\x00"+(P===true?"\x10\x00\x00\x00":"\x00\x00\x00\x00")+e(M,4)+H+O+L;return{fileRecord:S,dirRecord:R,compressedObject:J}};var x={load:function(I,H){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(M){var H=[],J,I,L,K;for(J in this.files){if(!this.files.hasOwnProperty(J)){continue}L=this.files[J];K=new q(L.name,L._data,B(L.options));I=J.slice(this.root.length,J.length);if(J.slice(0,this.root.length)===this.root&&M(I,K)){H.push(K)}}return H},file:function(H,J,K){if(arguments.length===1){if(D.isRegExp(H)){var I=H;return this.filter(function(L,M){return !M.dir&&I.test(L)})}else{return this.filter(function(L,M){return !M.dir&&L===H})[0]||null}}else{H=this.root+H;y.call(this,H,J,K)}return this},folder:function(H){if(!H){return this}if(D.isRegExp(H)){return this.filter(function(L,M){return M.dir&&H.test(L)})}var J=this.root+H;var K=E.call(this,J);var I=this.clone();I.root=K.name;return I},remove:function(I){I=this.root+I;var K=this.files[I];if(!K){if(I.slice(-1)!="/"){I+="/"}K=this.files[I]}if(K&&!K.dir){delete this.files[I]}else{var H=this.filter(function(L,M){return M.name.slice(0,I.length)===I});for(var J=0;J<H.length;J++){delete this.files[H[J].name]}}return this},generate:function(W){W=B(W||{},{base64:true,compression:"STORE",type:"base64",comment:null});D.checkSupport(W.type);var O=[],P=0,K=0,N,R,Q=D.transformTo("string",this.utf8encode(W.comment||this.comment||""));for(var I in this.files){if(!this.files.hasOwnProperty(I)){continue}var M=this.files[I];var S=M.options.compression||W.compression.toUpperCase();var V=z[S];if(!V){throw new Error(S+" is not a valid compression method !")}var T=u.call(this,M,V);var H=w.call(this,I,M,T,P);P+=H.fileRecord.length+T.compressedSize;K+=H.dirRecord.length;O.push(H)}var L="";L=v.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+e(O.length,2)+e(O.length,2)+e(K,4)+e(P,4)+e(Q.length,2)+Q;var U=W.type.toLowerCase();if(U==="uint8array"||U==="arraybuffer"||U==="blob"||U==="nodebuffer"){N=new p(P+K+L.length)}else{N=new l(P+K+L.length)}for(R=0;R<O.length;R++){N.append(O[R].fileRecord);N.append(O[R].compressedObject.compressedContent)}for(R=0;R<O.length;R++){N.append(O[R].dirRecord)}N.append(L);var J=N.finalize();switch(W.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return D.transformTo(W.type.toLowerCase(),J);case"blob":return D.arrayBuffer2Blob(D.transformTo("arraybuffer",J));case"base64":return(W.base64)?f.encode(J):J;default:return J}},crc32:function(H,I){return k(H,I)},utf8encode:function(H){return D.transformTo("string",h.utf8encode(H))},utf8decode:function(H){return h.utf8decode(H)}};g.exports=x},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(g,f,e){e.LOCAL_FILE_HEADER="PK\x03\x04";e.CENTRAL_FILE_HEADER="PK\x01\x02";e.CENTRAL_DIRECTORY_END="PK\x05\x06";e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07";e.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06";e.DATA_DESCRIPTOR="PK\x07\b"},{}],15:[function(h,g,f){var k=h("./dataReader");var e=h("./utils");function j(m,l){this.data=m;if(!l){this.data=e.string2binary(this.data)}this.length=this.data.length;this.index=0}j.prototype=new k();j.prototype.byteAt=function(l){return this.data.charCodeAt(l)};j.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)};j.prototype.readData=function(m){this.checkOffset(m);var l=this.data.slice(this.index,this.index+m);this.index+=m;return l};g.exports=j},{"./dataReader":5,"./utils":21}],16:[function(j,h,f){var e=j("./utils");var g=function(){this.data=[]};g.prototype={append:function(k){k=e.transformTo("string",k);this.data.push(k)},finalize:function(){return this.data.join("")}};h.exports=g},{"./utils":21}],17:[function(g,f,e){(function(m){e.base64=true;e.array=true;e.string=true;e.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";e.nodebuffer=typeof m!=="undefined";e.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined"){e.blob=false}else{var h=new ArrayBuffer(0);try{e.blob=new Blob([h],{type:"application/zip"}).size===0}catch(k){try{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;var j=new l();j.append(h);e.blob=j.getBlob("application/zip").size===0}catch(k){e.blob=false}}}}).call(this,(typeof Buffer!=="undefined"?Buffer:undefined))},{}],18:[function(h,g,f){var j=h("./dataReader");function e(k){if(k){this.data=k;this.length=this.data.length;this.index=0}}e.prototype=new j();e.prototype.byteAt=function(k){return this.data[k]};e.prototype.lastIndexOfSignature=function(p){var o=p.charCodeAt(0),n=p.charCodeAt(1),m=p.charCodeAt(2),l=p.charCodeAt(3);for(var k=this.length-4;k>=0;--k){if(this.data[k]===o&&this.data[k+1]===n&&this.data[k+2]===m&&this.data[k+3]===l){return k}}return -1};e.prototype.readData=function(l){this.checkOffset(l);if(l===0){return new Uint8Array(0)}var k=this.data.subarray(this.index,this.index+l);this.index+=l;return k};g.exports=e},{"./dataReader":5}],19:[function(h,g,f){var e=h("./utils");var j=function(k){this.data=new Uint8Array(k);this.index=0};j.prototype={append:function(k){if(k.length!==0){k=e.transformTo("uint8array",k);this.data.set(k,this.index);this.index+=k.length}},finalize:function(){return this.data}};g.exports=j},{"./utils":21}],20:[function(e,f,k){var p=e("./utils");var q=e("./support");var n=e("./nodeBuffer");var j=new Array(256);for(var l=0;l<256;l++){j[l]=(l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1)}j[254]=j[254]=1;var r=function(y){var s,z,u,v,t,x=y.length,w=0;for(v=0;v<x;v++){z=y.charCodeAt(v);if((z&64512)===55296&&(v+1<x)){u=y.charCodeAt(v+1);if((u&64512)===56320){z=65536+((z-55296)<<10)+(u-56320);v++}}w+=z<128?1:z<2048?2:z<65536?3:4}if(q.uint8array){s=new Uint8Array(w)}else{s=new Array(w)}for(t=0,v=0;t<w;v++){z=y.charCodeAt(v);if((z&64512)===55296&&(v+1<x)){u=y.charCodeAt(v+1);if((u&64512)===56320){z=65536+((z-55296)<<10)+(u-56320);v++}}if(z<128){s[t++]=z}else{if(z<2048){s[t++]=192|(z>>>6);s[t++]=128|(z&63)}else{if(z<65536){s[t++]=224|(z>>>12);s[t++]=128|(z>>>6&63);s[t++]=128|(z&63)}else{s[t++]=240|(z>>>18);s[t++]=128|(z>>>12&63);s[t++]=128|(z>>>6&63);s[t++]=128|(z&63)}}}}return s};var m=function(t,s){var u;s=s||t.length;if(s>t.length){s=t.length}u=s-1;while(u>=0&&(t[u]&192)===128){u--}if(u<0){return s}if(u===0){return s}return(u+j[t[u]]>s)?u:s};var h=function(w){var y,x,v,z,u;var t=w.length;var s=new Array(t*2);for(v=0,x=0;x<t;){z=w[x++];if(z<128){s[v++]=z;continue}u=j[z];if(u>4){s[v++]=65533;x+=u-1;continue}z&=u===2?31:u===3?15:7;while(u>1&&x<t){z=(z<<6)|(w[x++]&63);u--}if(u>1){s[v++]=65533;continue}if(z<65536){s[v++]=z}else{z-=65536;s[v++]=55296|((z>>10)&1023);s[v++]=56320|(z&1023)}}if(s.length!==v){if(s.subarray){s=s.subarray(0,v)}else{s.length=v}}return p.applyFromCharCode(s)};k.utf8encode=function o(s){if(q.nodebuffer){return n(s,"utf-8")}return r(s)};k.utf8decode=function g(w){if(q.nodebuffer){return p.transformTo("nodebuffer",w).toString("utf-8")}w=p.transformTo(q.uint8array?"uint8array":"array",w);var t=[],u=0,s=w.length,v=65536;while(u<s){var x=m(w,Math.min(u+v,s));if(q.uint8array){t.push(h(w.subarray(u,x)))}else{t.push(h(w.slice(u,x)))}u=x}return t.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,f,h){var n=e("./support");var m=e("./compressions");var k=e("./nodeBuffer");h.string2binary=function(s){var q="";for(var r=0;r<s.length;r++){q+=String.fromCharCode(s.charCodeAt(r)&255)}return q};h.arrayBuffer2Blob=function(q){h.checkSupport("blob");try{return new Blob([q],{type:"application/zip"})}catch(s){try{var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;var r=new t();r.append(q);return r.getBlob("application/zip")}catch(s){throw new Error("Bug : can't construct the Blob.")}}};function l(q){return q}function p(r,s){for(var q=0;q<r.length;++q){s[q]=r.charCodeAt(q)&255}return s}function o(u){var y=65536;var z=[],t=u.length,x=h.getTypeOf(u),r=0,q=true;try{switch(x){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,k(0));break}}catch(v){q=false}if(!q){var w="";for(var s=0;s<u.length;s++){w+=String.fromCharCode(u[s])}return w}while(r<t&&y>1){try{if(x==="array"||x==="nodebuffer"){z.push(String.fromCharCode.apply(null,u.slice(r,Math.min(r+y,t))))}else{z.push(String.fromCharCode.apply(null,u.subarray(r,Math.min(r+y,t))))}r+=y}catch(v){y=Math.floor(y/2)}}return z.join("")}h.applyFromCharCode=o;function j(r,s){for(var q=0;q<r.length;q++){s[q]=r[q]}return s}var g={};g.string={string:l,array:function(q){return p(q,new Array(q.length))},arraybuffer:function(q){return g.string["uint8array"](q).buffer},uint8array:function(q){return p(q,new Uint8Array(q.length))},nodebuffer:function(q){return p(q,k(q.length))}};g.array={string:o,array:l,arraybuffer:function(q){return(new Uint8Array(q)).buffer},uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return k(q)}};g.arraybuffer={string:function(q){return o(new Uint8Array(q))},array:function(q){return j(new Uint8Array(q),new Array(q.byteLength))},arraybuffer:l,uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return k(new Uint8Array(q))}};g.uint8array={string:o,array:function(q){return j(q,new Array(q.length))},arraybuffer:function(q){return q.buffer},uint8array:l,nodebuffer:function(q){return k(q)}};g.nodebuffer={string:o,array:function(q){return j(q,new Array(q.length))},arraybuffer:function(q){return g.nodebuffer["uint8array"](q).buffer},uint8array:function(q){return j(q,new Uint8Array(q.length))},nodebuffer:l};h.transformTo=function(t,r){if(!r){r=""}if(!t){return r}h.checkSupport(t);var s=h.getTypeOf(r);var q=g[s][t](r);return q};h.getTypeOf=function(q){if(typeof q==="string"){return"string"}if(Object.prototype.toString.call(q)==="[object Array]"){return"array"}if(n.nodebuffer&&k.test(q)){return"nodebuffer"}if(n.uint8array&&q instanceof Uint8Array){return"uint8array"}if(n.arraybuffer&&q instanceof ArrayBuffer){return"arraybuffer"}};h.checkSupport=function(r){var q=n[r.toLowerCase()];if(!q){throw new Error(r+" is not supported by this browser")}};h.MAX_VALUE_16BITS=65535;h.MAX_VALUE_32BITS=-1;h.pretty=function(t){var r="",s,q;for(q=0;q<(t||"").length;q++){s=t.charCodeAt(q);r+="\\x"+(s<16?"0":"")+s.toString(16).toUpperCase()}return r};h.findCompression=function(q){for(var r in m){if(!m.hasOwnProperty(r)){continue}if(m[r].magic===q){return m[r]}}return null};h.isRegExp=function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(f,g,k){var h=f("./stringReader");var e=f("./nodeBufferReader");var m=f("./uint8ArrayReader");var n=f("./utils");var q=f("./signature");var l=f("./zipEntry");var o=f("./support");var p=f("./object");function j(s,r){this.files=[];this.loadOptions=r;if(s){this.load(s)}}j.prototype={checkSignature:function(s){var r=this.reader.readString(4);if(r!==s){throw new Error("Corrupted zip or bug : unexpected signature ("+n.pretty(r)+", expected "+n.pretty(s)+")")}},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);this.zipComment=this.reader.readString(this.zipCommentLength);this.zipComment=p.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.versionMadeBy=this.reader.readString(2);this.versionNeeded=this.reader.readInt(2);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var v=this.zip64EndOfCentralSize-44,s=0,t,u,r;while(s<v){t=this.reader.readInt(2);u=this.reader.readInt(4);r=this.reader.readString(u);this.zip64ExtensibleData[t]={id:t,length:u,value:r}}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1){throw new Error("Multi-volumes zip are not supported")}},readLocalFiles:function(){var s,r;for(s=0;s<this.files.length;s++){r=this.files[s];this.reader.setIndex(r.localHeaderOffset);this.checkSignature(q.LOCAL_FILE_HEADER);r.readLocalPart(this.reader);r.handleUTF8()}},readCentralDir:function(){var r;this.reader.setIndex(this.centralDirOffset);while(this.reader.readString(4)===q.CENTRAL_FILE_HEADER){r=new l({zip64:this.zip64},this.loadOptions);r.readCentralPart(this.reader);this.files.push(r)}},readEndOfCentral:function(){var r=this.reader.lastIndexOfSignature(q.CENTRAL_DIRECTORY_END);if(r===-1){throw new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(r);this.checkSignature(q.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){this.zip64=true;r=this.reader.lastIndexOfSignature(q.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(r===-1){throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator")}this.reader.setIndex(r);this.checkSignature(q.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(q.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}},prepareReader:function(s){var r=n.getTypeOf(s);if(r==="string"&&!o.uint8array){this.reader=new h(s,this.loadOptions.optimizedBinaryString)}else{if(r==="nodebuffer"){this.reader=new e(s)}else{this.reader=new m(n.transformTo("uint8array",s))}}},load:function(r){this.prepareReader(r);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};g.exports=j},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(j,g,f){var l=j("./stringReader");var e=j("./utils");var h=j("./compressedObject");var k=j("./object");function m(n,o){this.options=n;this.loadOptions=o}m.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},prepareCompressedContent:function(n,p,o){return function(){var r=n.index;n.setIndex(p);var q=n.readData(o);n.setIndex(r);return q}},prepareContent:function(n,r,q,p,o){return function(){var s=e.transformTo(p.uncompressInputType,this.getCompressedContent());var t=p.uncompress(s);if(t.length!==o){throw new Error("Bug : uncompressed data size mismatch")}return t}},readLocalPart:function(n){var o,p;n.skip(22);this.fileNameLength=n.readInt(2);p=n.readInt(2);this.fileName=n.readString(this.fileNameLength);n.skip(p);if(this.compressedSize==-1||this.uncompressedSize==-1){throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)")}o=e.findCompression(this.compressionMethod);if(o===null){throw new Error("Corrupted zip : compression "+e.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")")}this.decompressed=new h();this.decompressed.compressedSize=this.compressedSize;this.decompressed.uncompressedSize=this.uncompressedSize;this.decompressed.crc32=this.crc32;this.decompressed.compressionMethod=this.compressionMethod;this.decompressed.getCompressedContent=this.prepareCompressedContent(n,n.index,this.compressedSize,o);this.decompressed.getContent=this.prepareContent(n,n.index,this.compressedSize,o,this.uncompressedSize);if(this.loadOptions.checkCRC32){this.decompressed=e.transformTo("string",this.decompressed.getContent());if(k.crc32(this.decompressed)!==this.crc32){throw new Error("Corrupted zip : CRC32 mismatch")}}},readCentralPart:function(n){this.versionMadeBy=n.readString(2);this.versionNeeded=n.readInt(2);this.bitFlag=n.readInt(2);this.compressionMethod=n.readString(2);this.date=n.readDate();this.crc32=n.readInt(4);this.compressedSize=n.readInt(4);this.uncompressedSize=n.readInt(4);this.fileNameLength=n.readInt(2);this.extraFieldsLength=n.readInt(2);this.fileCommentLength=n.readInt(2);this.diskNumberStart=n.readInt(2);this.internalFileAttributes=n.readInt(2);this.externalFileAttributes=n.readInt(4);this.localHeaderOffset=n.readInt(4);if(this.isEncrypted()){throw new Error("Encrypted zip are not supported")}this.fileName=n.readString(this.fileNameLength);this.readExtraFields(n);this.parseZIP64ExtraField(n);this.fileComment=n.readString(this.fileCommentLength);this.dir=this.externalFileAttributes&16?true:false},parseZIP64ExtraField:function(n){if(!this.extraFields[1]){return}var o=new l(this.extraFields[1].value);if(this.uncompressedSize===e.MAX_VALUE_32BITS){this.uncompressedSize=o.readInt(8)}if(this.compressedSize===e.MAX_VALUE_32BITS){this.compressedSize=o.readInt(8)}if(this.localHeaderOffset===e.MAX_VALUE_32BITS){this.localHeaderOffset=o.readInt(8)}if(this.diskNumberStart===e.MAX_VALUE_32BITS){this.diskNumberStart=o.readInt(4)}},readExtraFields:function(o){var r=o.index,p,q,n;this.extraFields=this.extraFields||{};while(o.index<r+this.extraFieldsLength){p=o.readInt(2);q=o.readInt(2);n=o.readString(q);this.extraFields[p]={id:p,length:q,value:n}}},handleUTF8:function(){if(this.useUTF8()){this.fileName=k.utf8decode(this.fileName);this.fileComment=k.utf8decode(this.fileComment)}else{var n=this.findExtraFieldUnicodePath();if(n!==null){this.fileName=n}var o=this.findExtraFieldUnicodeComment();if(o!==null){this.fileComment=o}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var n=new l(o.value);if(n.readInt(1)!==1){return null}if(k.crc32(this.fileName)!==n.readInt(4)){return null}return k.utf8decode(n.readString(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var n=new l(o.value);if(n.readInt(1)!==1){return null}if(k.crc32(this.fileComment)!==n.readInt(4)){return null}return k.utf8decode(n.readString(o.length-5))}return null}};g.exports=m},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(l,j,f){var e=l("./lib/utils/common").assign;var h=l("./lib/deflate");var m=l("./lib/inflate");var g=l("./lib/zlib/constants");var k={};e(k,h,m,g);j.exports=k},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(j,e,v){var q=j("./zlib/deflate.js");var u=j("./utils/common");var k=j("./utils/strings");var m=j("./zlib/messages");var t=j("./zlib/zstream");var r=0;var x=4;var l=0;var o=1;var f=-1;var g=0;var p=8;var w=function(z){this.options=u.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},z||{});var A=this.options;if(A.raw&&(A.windowBits>0)){A.windowBits=-A.windowBits}else{if(A.gzip&&(A.windowBits>0)&&(A.windowBits<16)){A.windowBits+=16}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new t();this.strm.avail_out=0;var y=q.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(y!==l){throw new Error(m[y])}if(A.header){q.deflateSetHeader(this.strm,A.header)}};w.prototype.push=function(B,C){var z=this.strm;var D=this.options.chunkSize;var y,A;if(this.ended){return false}A=(C===~~C)?C:((C===true)?x:r);if(typeof B==="string"){z.input=k.string2buf(B)}else{z.input=B}z.next_in=0;z.avail_in=z.input.length;do{if(z.avail_out===0){z.output=new u.Buf8(D);z.next_out=0;z.avail_out=D}y=q.deflate(z,A);if(y!==o&&y!==l){this.onEnd(y);this.ended=true;return false}if(z.avail_out===0||(z.avail_in===0&&A===x)){if(this.options.to==="string"){this.onData(k.buf2binstring(u.shrinkBuf(z.output,z.next_out)))}else{this.onData(u.shrinkBuf(z.output,z.next_out))}}}while((z.avail_in>0||z.avail_out===0)&&y!==o);if(A===x){y=q.deflateEnd(this.strm);this.onEnd(y);this.ended=true;return y===l}return true};w.prototype.onData=function(y){this.chunks.push(y)};w.prototype.onEnd=function(y){if(y===l){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=u.flattenChunks(this.chunks)}}this.chunks=[];this.err=y;this.msg=this.strm.msg};function n(y,z){var A=new w(z);A.push(y,true);if(A.err){throw A.msg}return A.result}function s(y,z){z=z||{};z.raw=true;return n(y,z)}function h(y,z){z=z||{};z.gzip=true;return n(y,z)}v.Deflate=w;v.deflate=n;v.deflateRaw=s;v.gzip=h},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(g,h,m){var e=g("./zlib/inflate.js");var p=g("./utils/common");var q=g("./utils/strings");var o=g("./zlib/constants");var k=g("./zlib/messages");var l=g("./zlib/zstream");var f=g("./zlib/gzheader");var n=function(t){this.options=p.assign({chunkSize:16384,windowBits:0,to:""},t||{});var u=this.options;if(u.raw&&(u.windowBits>=0)&&(u.windowBits<16)){u.windowBits=-u.windowBits;if(u.windowBits===0){u.windowBits=-15}}if((u.windowBits>=0)&&(u.windowBits<16)&&!(t&&t.windowBits)){u.windowBits+=32}if((u.windowBits>15)&&(u.windowBits<48)){if((u.windowBits&15)===0){u.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new l();this.strm.avail_out=0;var s=e.inflateInit2(this.strm,u.windowBits);if(s!==o.Z_OK){throw new Error(k[s])}this.header=new f();e.inflateGetHeader(this.strm,this.header)};n.prototype.push=function(x,y){var A=this.strm;var v=this.options.chunkSize;var w,u;var t,z,s;if(this.ended){return false}u=(y===~~y)?y:((y===true)?o.Z_FINISH:o.Z_NO_FLUSH);if(typeof x==="string"){A.input=q.binstring2buf(x)}else{A.input=x}A.next_in=0;A.avail_in=A.input.length;do{if(A.avail_out===0){A.output=new p.Buf8(v);A.next_out=0;A.avail_out=v}w=e.inflate(A,o.Z_NO_FLUSH);if(w!==o.Z_STREAM_END&&w!==o.Z_OK){this.onEnd(w);this.ended=true;return false}if(A.next_out){if(A.avail_out===0||w===o.Z_STREAM_END||(A.avail_in===0&&u===o.Z_FINISH)){if(this.options.to==="string"){t=q.utf8border(A.output,A.next_out);z=A.next_out-t;s=q.buf2string(A.output,t);A.next_out=z;A.avail_out=v-z;if(z){p.arraySet(A.output,A.output,t,z,0)}this.onData(s)}else{this.onData(p.shrinkBuf(A.output,A.next_out))}}}}while((A.avail_in>0)&&w!==o.Z_STREAM_END);if(w===o.Z_STREAM_END){u=o.Z_FINISH}if(u===o.Z_FINISH){w=e.inflateEnd(this.strm);this.onEnd(w);this.ended=true;return w===o.Z_OK}return true};n.prototype.onData=function(s){this.chunks.push(s)};n.prototype.onEnd=function(s){if(s===o.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=p.flattenChunks(this.chunks)}}this.chunks=[];this.err=s;this.msg=this.strm.msg};function r(s,t){var u=new n(t);u.push(s,true);if(u.err){throw u.msg}return u.result}function j(s,t){t=t||{};t.raw=true;return r(s,t)}m.Inflate=n;m.inflate=r;m.inflateRaw=j;m.ungzip=r},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(g,f,e){var k=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");e.assign=function(o){var l=Array.prototype.slice.call(arguments,1);while(l.length){var m=l.shift();if(!m){continue}if(typeof(m)!=="object"){throw new TypeError(m+"must be non-object")}for(var n in m){if(m.hasOwnProperty(n)){o[n]=m[n]}}}return o};e.shrinkBuf=function(l,m){if(l.length===m){return l}if(l.subarray){return l.subarray(0,m)}l.length=m;return l};var h={arraySet:function(m,o,q,l,p){if(o.subarray&&m.subarray){m.set(o.subarray(q,q+l),p);return}for(var n=0;n<l;n++){m[p+n]=o[q+n]}},flattenChunks:function(s){var q,o,n,r,p,m;n=0;for(q=0,o=s.length;q<o;q++){n+=s[q].length}m=new Uint8Array(n);r=0;for(q=0,o=s.length;q<o;q++){p=s[q];m.set(p,r);r+=p.length}return m}};var j={arraySet:function(m,o,q,l,p){for(var n=0;n<l;n++){m[p+n]=o[q+n]}},flattenChunks:function(l){return[].concat.apply([],l)}};e.setTyped=function(l){if(l){e.Buf8=Uint8Array;e.Buf16=Uint16Array;e.Buf32=Int32Array;e.assign(e,h)}else{e.Buf8=Array;e.Buf16=Array;e.Buf32=Array;e.assign(e,j)}};e.setTyped(k)},{}],28:[function(e,f,h){var o=e("./common");var m=true;var k=true;try{String.fromCharCode.apply(null,[0])}catch(n){m=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(n){k=false}var g=new o.Buf8(256);for(var j=0;j<256;j++){g[j]=(j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1)}g[254]=g[254]=1;h.string2buf=function(v){var p,w,r,s,q,u=v.length,t=0;for(s=0;s<u;s++){w=v.charCodeAt(s);if((w&64512)===55296&&(s+1<u)){r=v.charCodeAt(s+1);if((r&64512)===56320){w=65536+((w-55296)<<10)+(r-56320);s++}}t+=w<128?1:w<2048?2:w<65536?3:4}p=new o.Buf8(t);for(q=0,s=0;q<t;s++){w=v.charCodeAt(s);if((w&64512)===55296&&(s+1<u)){r=v.charCodeAt(s+1);if((r&64512)===56320){w=65536+((w-55296)<<10)+(r-56320);s++}}if(w<128){p[q++]=w}else{if(w<2048){p[q++]=192|(w>>>6);p[q++]=128|(w&63)}else{if(w<65536){p[q++]=224|(w>>>12);p[q++]=128|(w>>>6&63);p[q++]=128|(w&63)}else{p[q++]=240|(w>>>18);p[q++]=128|(w>>>12&63);p[q++]=128|(w>>>6&63);p[q++]=128|(w&63)}}}}return p};function l(r,q){if(q<65537){if((r.subarray&&k)||(!r.subarray&&m)){return String.fromCharCode.apply(null,o.shrinkBuf(r,q))}}var p="";for(var s=0;s<q;s++){p+=String.fromCharCode(r[s])}return p}h.buf2binstring=function(p){return l(p,p.length)};h.binstring2buf=function(s){var q=new o.Buf8(s.length);for(var r=0,p=q.length;r<p;r++){q[r]=s.charCodeAt(r)}return q};h.buf2string=function(u,r){var v,t,w,s;var q=r||u.length;var p=new Array(q*2);for(t=0,v=0;v<q;){w=u[v++];if(w<128){p[t++]=w;continue}s=g[w];if(s>4){p[t++]=65533;v+=s-1;continue}w&=s===2?31:s===3?15:7;while(s>1&&v<q){w=(w<<6)|(u[v++]&63);s--}if(s>1){p[t++]=65533;continue}if(w<65536){p[t++]=w}else{w-=65536;p[t++]=55296|((w>>10)&1023);p[t++]=56320|(w&1023)}}return l(p,t)};h.utf8border=function(q,p){var r;p=p||q.length;if(p>q.length){p=q.length}r=p-1;while(r>=0&&(q[r]&192)===128){r--}if(r<0){return p}if(r===0){return p}return(r+g[q[r]]>p)?r:p}},{"./common":27}],29:[function(h,f,e){function g(m,l,j,q){var o=(m&65535)|0,k=((m>>>16)&65535)|0,p=0;while(j!==0){p=j>2000?2000:j;j-=p;do{o=(o+l[q++])|0;k=(k+o)|0}while(--p);o%=65521;k%=65521}return(o|(k<<16))|0}f.exports=g},{}],30:[function(g,f,e){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(k,g,f){function h(){var p,m=[];for(var o=0;o<256;o++){p=o;for(var l=0;l<8;l++){p=((p&1)?(3988292384^(p>>>1)):(p>>>1))}m[o]=p}return m}var e=h();function j(q,n,l,r){var p=e,m=r+l;q=q^(-1);for(var o=r;o<m;o++){q=(q>>>8)^p[(q^n[o])&255]}return(q^(-1))}g.exports=j},{}],32:[function(V,aD,M){var T=V("../utils/common");var aB=V("./trees");var L=V("./adler32");var ab=V("./crc32");var G=V("./messages");var O=0;var aa=1;var au=3;var o=4;var U=5;var u=0;var y=1;var aq=-2;var x=-3;var j=-5;var l=-1;var P=1;var E=2;var A=3;var v=4;var av=0;var K=2;var Z=8;var aw=9;var R=15;var q=8;var am=29;var aA=256;var aC=aA+1+am;var D=30;var ah=19;var ao=2*aC+1;var S=15;var I=3;var ar=258;var g=(ar+I+1);var m=32;var X=42;var s=69;var ac=73;var an=91;var t=103;var aF=113;var C=666;var ap=1;var w=2;var W=3;var h=4;var at=3;function ai(aG,aH){aG.msg=G[aH];return aH}function Q(aG){return((aG)<<1)-((aG)>4?9:0)}function az(aH){var aG=aH.length;while(--aG>=0){aH[aG]=0}}function k(aH){var aI=aH.state;var aG=aI.pending;if(aG>aH.avail_out){aG=aH.avail_out}if(aG===0){return}T.arraySet(aH.output,aI.pending_buf,aI.pending_out,aG,aH.next_out);aH.next_out+=aG;aI.pending_out+=aG;aH.total_out+=aG;aH.avail_out-=aG;aI.pending-=aG;if(aI.pending===0){aI.pending_out=0}}function n(aG,aH){aB._tr_flush_block(aG,(aG.block_start>=0?aG.block_start:-1),aG.strstart-aG.block_start,aH);aG.block_start=aG.strstart;k(aG.strm)}function f(aH,aG){aH.pending_buf[aH.pending++]=aG}function B(aH,aG){aH.pending_buf[aH.pending++]=(aG>>>8)&255;aH.pending_buf[aH.pending++]=aG&255}function F(aH,aI,aK,aJ){var aG=aH.avail_in;if(aG>aJ){aG=aJ}if(aG===0){return 0}aH.avail_in-=aG;T.arraySet(aI,aH.input,aH.next_in,aG,aK);if(aH.state.wrap===1){aH.adler=L(aH.adler,aI,aG,aK)}else{if(aH.state.wrap===2){aH.adler=ab(aH.adler,aI,aG,aK)}}aH.next_in+=aG;aH.total_in+=aG;return aG}function ay(aT,aK){var aN=aT.max_chain_length;var aU=aT.strstart;var aL;var aM;var aG=aT.prev_length;var aH=aT.nice_match;var aJ=(aT.strstart>(aT.w_size-g))?aT.strstart-(aT.w_size-g):0;var aR=aT.window;var aO=aT.w_mask;var aI=aT.prev;var aQ=aT.strstart+ar;var aS=aR[aU+aG-1];var aP=aR[aU+aG];if(aT.prev_length>=aT.good_match){aN>>=2}if(aH>aT.lookahead){aH=aT.lookahead}do{aL=aK;if(aR[aL+aG]!==aP||aR[aL+aG-1]!==aS||aR[aL]!==aR[aU]||aR[++aL]!==aR[aU+1]){continue}aU+=2;aL++;do{}while(aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aU<aQ);aM=ar-(aQ-aU);aU=aQ-ar;if(aM>aG){aT.match_start=aK;aG=aM;if(aM>=aH){break}aS=aR[aU+aG-1];aP=aR[aU+aG]}}while((aK=aI[aK&aO])>aJ&&--aN!==0);if(aG<=aT.lookahead){return aG}return aT.lookahead}function al(aI){var aM=aI.w_size;var aJ,aL,aG,aH,aK;do{aH=aI.window_size-aI.lookahead-aI.strstart;if(aI.strstart>=aM+(aM-g)){T.arraySet(aI.window,aI.window,aM,aM,0);aI.match_start-=aM;aI.strstart-=aM;aI.block_start-=aM;aL=aI.hash_size;aJ=aL;do{aG=aI.head[--aJ];aI.head[aJ]=(aG>=aM?aG-aM:0)}while(--aL);aL=aM;aJ=aL;do{aG=aI.prev[--aJ];aI.prev[aJ]=(aG>=aM?aG-aM:0)}while(--aL);aH+=aM}if(aI.strm.avail_in===0){break}aL=F(aI.strm,aI.window,aI.strstart+aI.lookahead,aH);aI.lookahead+=aL;if(aI.lookahead+aI.insert>=I){aK=aI.strstart-aI.insert;aI.ins_h=aI.window[aK];aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aK+1])&aI.hash_mask;while(aI.insert){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aK+I-1])&aI.hash_mask;aI.prev[aK&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aK;aK++;aI.insert--;if(aI.lookahead+aI.insert<I){break}}}}while(aI.lookahead<g&&aI.strm.avail_in!==0)}function N(aJ,aG){var aI=65535;if(aI>aJ.pending_buf_size-5){aI=aJ.pending_buf_size-5}for(;;){if(aJ.lookahead<=1){al(aJ);if(aJ.lookahead===0&&aG===O){return ap}if(aJ.lookahead===0){break}}aJ.strstart+=aJ.lookahead;aJ.lookahead=0;var aH=aJ.block_start+aI;if(aJ.strstart===0||aJ.strstart>=aH){aJ.lookahead=aJ.strstart-aH;aJ.strstart=aH;n(aJ,false);if(aJ.strm.avail_out===0){return ap}}if(aJ.strstart-aJ.block_start>=(aJ.w_size-g)){n(aJ,false);if(aJ.strm.avail_out===0){return ap}}}aJ.insert=0;if(aG===o){n(aJ,true);if(aJ.strm.avail_out===0){return W}return h}if(aJ.strstart>aJ.block_start){n(aJ,false);if(aJ.strm.avail_out===0){return ap}}return ap}function p(aI,aG){var aJ;var aH;for(;;){if(aI.lookahead<g){al(aI);if(aI.lookahead<g&&aG===O){return ap}if(aI.lookahead===0){break}}aJ=0;if(aI.lookahead>=I){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+I-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}if(aJ!==0&&((aI.strstart-aJ)<=(aI.w_size-g))){aI.match_length=ay(aI,aJ)}if(aI.match_length>=I){aH=aB._tr_tally(aI,aI.strstart-aI.match_start,aI.match_length-I);aI.lookahead-=aI.match_length;if(aI.match_length<=aI.max_lazy_match&&aI.lookahead>=I){aI.match_length--;do{aI.strstart++;aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+I-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}while(--aI.match_length!==0);aI.strstart++}else{aI.strstart+=aI.match_length;aI.match_length=0;aI.ins_h=aI.window[aI.strstart];aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+1])&aI.hash_mask}}else{aH=aB._tr_tally(aI,0,aI.window[aI.strstart]);aI.lookahead--;aI.strstart++}if(aH){n(aI,false);if(aI.strm.avail_out===0){return ap}}}aI.insert=((aI.strstart<(I-1))?aI.strstart:I-1);if(aG===o){n(aI,true);if(aI.strm.avail_out===0){return W}return h}if(aI.last_lit){n(aI,false);if(aI.strm.avail_out===0){return ap}}return w}function aj(aJ,aH){var aK;var aI;var aG;for(;;){if(aJ.lookahead<g){al(aJ);if(aJ.lookahead<g&&aH===O){return ap}if(aJ.lookahead===0){break}}aK=0;if(aJ.lookahead>=I){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+I-1])&aJ.hash_mask;aK=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}aJ.prev_length=aJ.match_length;aJ.prev_match=aJ.match_start;aJ.match_length=I-1;if(aK!==0&&aJ.prev_length<aJ.max_lazy_match&&aJ.strstart-aK<=(aJ.w_size-g)){aJ.match_length=ay(aJ,aK);if(aJ.match_length<=5&&(aJ.strategy===P||(aJ.match_length===I&&aJ.strstart-aJ.match_start>4096))){aJ.match_length=I-1}}if(aJ.prev_length>=I&&aJ.match_length<=aJ.prev_length){aG=aJ.strstart+aJ.lookahead-I;aI=aB._tr_tally(aJ,aJ.strstart-1-aJ.prev_match,aJ.prev_length-I);aJ.lookahead-=aJ.prev_length-1;aJ.prev_length-=2;do{if(++aJ.strstart<=aG){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+I-1])&aJ.hash_mask;aK=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}}while(--aJ.prev_length!==0);aJ.match_available=0;aJ.match_length=I-1;aJ.strstart++;if(aI){n(aJ,false);if(aJ.strm.avail_out===0){return ap}}}else{if(aJ.match_available){aI=aB._tr_tally(aJ,0,aJ.window[aJ.strstart-1]);if(aI){n(aJ,false)}aJ.strstart++;aJ.lookahead--;if(aJ.strm.avail_out===0){return ap}}else{aJ.match_available=1;aJ.strstart++;aJ.lookahead--}}}if(aJ.match_available){aI=aB._tr_tally(aJ,0,aJ.window[aJ.strstart-1]);aJ.match_available=0}aJ.insert=aJ.strstart<I-1?aJ.strstart:I-1;if(aH===o){n(aJ,true);if(aJ.strm.avail_out===0){return W}return h}if(aJ.last_lit){n(aJ,false);if(aJ.strm.avail_out===0){return ap}}return w}function af(aK,aH){var aJ;var aL;var aI,aG;var aM=aK.window;for(;;){if(aK.lookahead<=ar){al(aK);if(aK.lookahead<=ar&&aH===O){return ap}if(aK.lookahead===0){break}}aK.match_length=0;if(aK.lookahead>=I&&aK.strstart>0){aI=aK.strstart-1;aL=aM[aI];if(aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]){aG=aK.strstart+ar;do{}while(aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aI<aG);aK.match_length=ar-(aG-aI);if(aK.match_length>aK.lookahead){aK.match_length=aK.lookahead}}}if(aK.match_length>=I){aJ=aB._tr_tally(aK,1,aK.match_length-I);aK.lookahead-=aK.match_length;aK.strstart+=aK.match_length;aK.match_length=0}else{aJ=aB._tr_tally(aK,0,aK.window[aK.strstart]);aK.lookahead--;aK.strstart++}if(aJ){n(aK,false);if(aK.strm.avail_out===0){return ap}}}aK.insert=0;if(aH===o){n(aK,true);if(aK.strm.avail_out===0){return W}return h}if(aK.last_lit){n(aK,false);if(aK.strm.avail_out===0){return ap}}return w}function ag(aI,aG){var aH;for(;;){if(aI.lookahead===0){al(aI);if(aI.lookahead===0){if(aG===O){return ap}break}}aI.match_length=0;aH=aB._tr_tally(aI,0,aI.window[aI.strstart]);aI.lookahead--;aI.strstart++;if(aH){n(aI,false);if(aI.strm.avail_out===0){return ap}}}aI.insert=0;if(aG===o){n(aI,true);if(aI.strm.avail_out===0){return W}return h}if(aI.last_lit){n(aI,false);if(aI.strm.avail_out===0){return ap}}return w}var ae=function(aG,aK,aH,aJ,aI){this.good_length=aG;this.max_lazy=aK;this.nice_length=aH;this.max_chain=aJ;this.func=aI};var ad;ad=[new ae(0,0,0,0,N),new ae(4,4,8,4,p),new ae(4,5,16,8,p),new ae(4,6,32,32,p),new ae(4,4,16,16,aj),new ae(8,16,32,32,aj),new ae(8,16,128,128,aj),new ae(8,32,128,256,aj),new ae(32,128,258,1024,aj),new ae(32,258,258,4096,aj)];function J(aG){aG.window_size=2*aG.w_size;az(aG.head);aG.max_lazy_match=ad[aG.level].max_lazy;aG.good_match=ad[aG.level].good_length;aG.nice_match=ad[aG.level].nice_length;aG.max_chain_length=ad[aG.level].max_chain;aG.strstart=0;aG.block_start=0;aG.lookahead=0;aG.insert=0;aG.match_length=aG.prev_length=I-1;aG.match_available=0;aG.ins_h=0}function e(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Z;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new T.Buf16(ao*2);this.dyn_dtree=new T.Buf16((2*D+1)*2);this.bl_tree=new T.Buf16((2*ah+1)*2);az(this.dyn_ltree);az(this.dyn_dtree);az(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new T.Buf16(S+1);this.heap=new T.Buf16(2*aC+1);az(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new T.Buf16(2*aC+1);az(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function ak(aG){var aH;if(!aG||!aG.state){return ai(aG,aq)}aG.total_in=aG.total_out=0;aG.data_type=K;aH=aG.state;aH.pending=0;aH.pending_out=0;if(aH.wrap<0){aH.wrap=-aH.wrap}aH.status=(aH.wrap?X:aF);aG.adler=(aH.wrap===2)?0:1;aH.last_flush=O;aB._tr_init(aH);return u}function z(aG){var aH=ak(aG);if(aH===u){J(aG.state)}return aH}function aE(aG,aH){if(!aG||!aG.state){return aq}if(aG.state.wrap!==2){return aq}aG.state.gzhead=aH;return u}function H(aG,aN,aM,aJ,aL,aK){if(!aG){return aq}var aI=1;if(aN===l){aN=6}if(aJ<0){aI=0;aJ=-aJ}else{if(aJ>15){aI=2;aJ-=16}}if(aL<1||aL>aw||aM!==Z||aJ<8||aJ>15||aN<0||aN>9||aK<0||aK>v){return ai(aG,aq)}if(aJ===8){aJ=9}var aH=new e();aG.state=aH;aH.strm=aG;aH.wrap=aI;aH.gzhead=null;aH.w_bits=aJ;aH.w_size=1<<aH.w_bits;aH.w_mask=aH.w_size-1;aH.hash_bits=aL+7;aH.hash_size=1<<aH.hash_bits;aH.hash_mask=aH.hash_size-1;aH.hash_shift=~~((aH.hash_bits+I-1)/I);aH.window=new T.Buf8(aH.w_size*2);aH.head=new T.Buf16(aH.hash_size);aH.prev=new T.Buf16(aH.w_size);aH.lit_bufsize=1<<(aL+6);aH.pending_buf_size=aH.lit_bufsize*4;aH.pending_buf=new T.Buf8(aH.pending_buf_size);aH.d_buf=aH.lit_bufsize>>1;aH.l_buf=(1+2)*aH.lit_bufsize;aH.level=aN;aH.strategy=aK;aH.method=aM;return z(aG)}function Y(aG,aH){return H(aG,aH,Z,R,q,av)}function r(aL,aM){var aK,aO;var aJ,aH;if(!aL||!aL.state||aM>U||aM<0){return aL?ai(aL,aq):aq}aO=aL.state;if(!aL.output||(!aL.input&&aL.avail_in!==0)||(aO.status===C&&aM!==o)){return ai(aL,(aL.avail_out===0)?j:aq)}aO.strm=aL;aK=aO.last_flush;aO.last_flush=aM;if(aO.status===X){if(aO.wrap===2){aL.adler=0;f(aO,31);f(aO,139);f(aO,8);if(!aO.gzhead){f(aO,0);f(aO,0);f(aO,0);f(aO,0);f(aO,0);f(aO,aO.level===9?2:(aO.strategy>=E||aO.level<2?4:0));f(aO,at);aO.status=aF}else{f(aO,(aO.gzhead.text?1:0)+(aO.gzhead.hcrc?2:0)+(!aO.gzhead.extra?0:4)+(!aO.gzhead.name?0:8)+(!aO.gzhead.comment?0:16));f(aO,aO.gzhead.time&255);f(aO,(aO.gzhead.time>>8)&255);f(aO,(aO.gzhead.time>>16)&255);f(aO,(aO.gzhead.time>>24)&255);f(aO,aO.level===9?2:(aO.strategy>=E||aO.level<2?4:0));f(aO,aO.gzhead.os&255);if(aO.gzhead.extra&&aO.gzhead.extra.length){f(aO,aO.gzhead.extra.length&255);f(aO,(aO.gzhead.extra.length>>8)&255)}if(aO.gzhead.hcrc){aL.adler=ab(aL.adler,aO.pending_buf,aO.pending,0)}aO.gzindex=0;aO.status=s}}else{var aI=(Z+((aO.w_bits-8)<<4))<<8;var aN=-1;if(aO.strategy>=E||aO.level<2){aN=0}else{if(aO.level<6){aN=1}else{if(aO.level===6){aN=2}else{aN=3}}}aI|=(aN<<6);if(aO.strstart!==0){aI|=m}aI+=31-(aI%31);aO.status=aF;B(aO,aI);if(aO.strstart!==0){B(aO,aL.adler>>>16);B(aO,aL.adler&65535)}aL.adler=1}}if(aO.status===s){if(aO.gzhead.extra){aJ=aO.pending;while(aO.gzindex<(aO.gzhead.extra.length&65535)){if(aO.pending===aO.pending_buf_size){if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=ab(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}k(aL);aJ=aO.pending;if(aO.pending===aO.pending_buf_size){break}}f(aO,aO.gzhead.extra[aO.gzindex]&255);aO.gzindex++}if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=ab(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}if(aO.gzindex===aO.gzhead.extra.length){aO.gzindex=0;aO.status=ac}}else{aO.status=ac}}if(aO.status===ac){if(aO.gzhead.name){aJ=aO.pending;do{if(aO.pending===aO.pending_buf_size){if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=ab(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}k(aL);aJ=aO.pending;if(aO.pending===aO.pending_buf_size){aH=1;break}}if(aO.gzindex<aO.gzhead.name.length){aH=aO.gzhead.name.charCodeAt(aO.gzindex++)&255}else{aH=0}f(aO,aH)}while(aH!==0);if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=ab(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}if(aH===0){aO.gzindex=0;aO.status=an}}else{aO.status=an}}if(aO.status===an){if(aO.gzhead.comment){aJ=aO.pending;do{if(aO.pending===aO.pending_buf_size){if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=ab(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}k(aL);aJ=aO.pending;if(aO.pending===aO.pending_buf_size){aH=1;break}}if(aO.gzindex<aO.gzhead.comment.length){aH=aO.gzhead.comment.charCodeAt(aO.gzindex++)&255}else{aH=0}f(aO,aH)}while(aH!==0);if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=ab(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}if(aH===0){aO.status=t}}else{aO.status=t}}if(aO.status===t){if(aO.gzhead.hcrc){if(aO.pending+2>aO.pending_buf_size){k(aL)}if(aO.pending+2<=aO.pending_buf_size){f(aO,aL.adler&255);f(aO,(aL.adler>>8)&255);aL.adler=0;aO.status=aF}}else{aO.status=aF}}if(aO.pending!==0){k(aL);if(aL.avail_out===0){aO.last_flush=-1;return u}}else{if(aL.avail_in===0&&Q(aM)<=Q(aK)&&aM!==o){return ai(aL,j)}}if(aO.status===C&&aL.avail_in!==0){return ai(aL,j)}if(aL.avail_in!==0||aO.lookahead!==0||(aM!==O&&aO.status!==C)){var aG=(aO.strategy===E)?ag(aO,aM):(aO.strategy===A?af(aO,aM):ad[aO.level].func(aO,aM));if(aG===W||aG===h){aO.status=C}if(aG===ap||aG===W){if(aL.avail_out===0){aO.last_flush=-1}return u}if(aG===w){if(aM===aa){aB._tr_align(aO)}else{if(aM!==U){aB._tr_stored_block(aO,0,0,false);if(aM===au){az(aO.head);if(aO.lookahead===0){aO.strstart=0;aO.block_start=0;aO.insert=0}}}}k(aL);if(aL.avail_out===0){aO.last_flush=-1;return u}}}if(aM!==o){return u}if(aO.wrap<=0){return y}if(aO.wrap===2){f(aO,aL.adler&255);f(aO,(aL.adler>>8)&255);f(aO,(aL.adler>>16)&255);f(aO,(aL.adler>>24)&255);f(aO,aL.total_in&255);f(aO,(aL.total_in>>8)&255);f(aO,(aL.total_in>>16)&255);f(aO,(aL.total_in>>24)&255)}else{B(aO,aL.adler>>>16);B(aO,aL.adler&65535)}k(aL);if(aO.wrap>0){aO.wrap=-aO.wrap}return aO.pending!==0?u:y}function ax(aH){var aG;if(!aH||!aH.state){return aq}aG=aH.state.status;if(aG!==X&&aG!==s&&aG!==ac&&aG!==an&&aG!==t&&aG!==aF&&aG!==C){return ai(aH,aq)}aH.state=null;return aG===aF?ai(aH,x):u}M.deflateInit=Y;M.deflateInit2=H;M.deflateReset=z;M.deflateResetKeep=ak;M.deflateSetHeader=aE;M.deflate=r;M.deflateEnd=ax;M.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(g,f,e){function h(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}f.exports=h},{}],34:[function(j,g,f){var h=30;var k=12;g.exports=function e(J,q){var r;var L;var x;var K;var w;var p;var D;var m;var B;var n;var s;var A;var G;var E;var H;var v;var y;var l;var u;var I;var C;var F;var o;var z,t;r=J.state;L=J.next_in;z=J.input;x=L+(J.avail_in-5);K=J.next_out;t=J.output;w=K-(q-J.avail_out);p=K+(J.avail_out-257);D=r.dmax;m=r.wsize;B=r.whave;n=r.wnext;s=r.window;A=r.hold;G=r.bits;E=r.lencode;H=r.distcode;v=(1<<r.lenbits)-1;y=(1<<r.distbits)-1;top:do{if(G<15){A+=z[L++]<<G;G+=8;A+=z[L++]<<G;G+=8}l=E[A&v];dolen:for(;;){u=l>>>24;A>>>=u;G-=u;u=(l>>>16)&255;if(u===0){t[K++]=l&65535}else{if(u&16){I=l&65535;u&=15;if(u){if(G<u){A+=z[L++]<<G;G+=8}I+=A&((1<<u)-1);A>>>=u;G-=u}if(G<15){A+=z[L++]<<G;G+=8;A+=z[L++]<<G;G+=8}l=H[A&y];dodist:for(;;){u=l>>>24;A>>>=u;G-=u;u=(l>>>16)&255;if(u&16){C=l&65535;u&=15;if(G<u){A+=z[L++]<<G;G+=8;if(G<u){A+=z[L++]<<G;G+=8}}C+=A&((1<<u)-1);if(C>D){J.msg="invalid distance too far back";r.mode=h;break top}A>>>=u;G-=u;u=K-w;if(C>u){u=C-u;if(u>B){if(r.sane){J.msg="invalid distance too far back";r.mode=h;break top}}F=0;o=s;if(n===0){F+=m-u;if(u<I){I-=u;do{t[K++]=s[F++]}while(--u);F=K-C;o=t}}else{if(n<u){F+=m+n-u;u-=n;if(u<I){I-=u;do{t[K++]=s[F++]}while(--u);F=0;if(n<I){u=n;I-=u;do{t[K++]=s[F++]}while(--u);F=K-C;o=t}}}else{F+=n-u;if(u<I){I-=u;do{t[K++]=s[F++]}while(--u);F=K-C;o=t}}}while(I>2){t[K++]=o[F++];t[K++]=o[F++];t[K++]=o[F++];I-=3}if(I){t[K++]=o[F++];if(I>1){t[K++]=o[F++]}}}else{F=K-C;do{t[K++]=t[F++];t[K++]=t[F++];t[K++]=t[F++];I-=3}while(I>2);if(I){t[K++]=t[F++];if(I>1){t[K++]=t[F++]}}}}else{if((u&64)===0){l=H[(l&65535)+(A&((1<<u)-1))];continue dodist}else{J.msg="invalid distance code";r.mode=h;break top}}break}}else{if((u&64)===0){l=E[(l&65535)+(A&((1<<u)-1))];continue dolen}else{if(u&32){r.mode=k;break top}else{J.msg="invalid literal/length code";r.mode=h;break top}}}}break}}while(L<x&&K<p);I=G>>3;L-=I;G-=I<<3;A&=(1<<G)-1;J.next_in=L;J.next_out=K;J.avail_in=(L<x?5+(x-L):5-(L-x));J.avail_out=(K<p?257+(p-K):257-(K-p));r.hold=A;r.bits=G;return}},{}],35:[function(X,ay,O){var T=X("../utils/common");var N=X("./adler32");var af=X("./crc32");var ar=X("./inffast");var o=X("./inftrees");var ae=0;var ag=1;var K=2;var q=4;var U=5;var D=6;var w=0;var A=1;var v=2;var au=-2;var y=-3;var M=-4;var k=-5;var ac=8;var an=1;var am=2;var l=3;var ai=4;var F=5;var f=6;var u=7;var aa=8;var s=9;var at=10;var x=11;var n=12;var ak=13;var h=14;var aA=15;var aq=16;var p=17;var B=18;var V=19;var ab=20;var e=21;var ax=22;var W=23;var av=24;var E=25;var G=26;var ap=27;var Y=28;var C=29;var g=30;var az=31;var H=32;var Z=852;var Q=592;var R=15;var L=R;function t(aB){return(((aB>>>24)&255)+((aB>>>8)&65280)+((aB&65280)<<8)+((aB&255)<<24))}function ah(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new T.Buf16(320);this.work=new T.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function S(aB){var aC;if(!aB||!aB.state){return au}aC=aB.state;aB.total_in=aB.total_out=aC.total=0;aB.msg="";if(aC.wrap){aB.adler=aC.wrap&1}aC.mode=an;aC.last=0;aC.havedict=0;aC.dmax=32768;aC.head=null;aC.hold=0;aC.bits=0;aC.lencode=aC.lendyn=new T.Buf32(Z);aC.distcode=aC.distdyn=new T.Buf32(Q);aC.sane=1;aC.back=-1;return w}function aw(aB){var aC;if(!aB||!aB.state){return au}aC=aB.state;aC.wsize=0;aC.whave=0;aC.wnext=0;return S(aB)}function z(aB,aD){var aC;var aE;if(!aB||!aB.state){return au}aE=aB.state;if(aD<0){aC=0;aD=-aD}else{aC=(aD>>4)+1;if(aD<48){aD&=15}}if(aD&&(aD<8||aD>15)){return au}if(aE.window!==null&&aE.wbits!==aD){aE.window=null}aE.wrap=aC;aE.wbits=aD;return aw(aB)}function r(aB,aD){var aC;var aE;if(!aB){return au}aE=new ah();aB.state=aE;aE.window=null;aC=z(aB,aD);if(aC!==w){aB.state=null}return aC}function J(aB){return r(aB,L)}var aj=true;var ao,m;function I(aC){if(aj){var aB;ao=new T.Buf32(512);m=new T.Buf32(32);aB=0;while(aB<144){aC.lens[aB++]=8}while(aB<256){aC.lens[aB++]=9}while(aB<280){aC.lens[aB++]=7}while(aB<288){aC.lens[aB++]=8}o(ag,aC.lens,0,288,ao,0,aC.work,{bits:9});aB=0;while(aB<32){aC.lens[aB++]=5}o(K,aC.lens,0,32,m,0,aC.work,{bits:5});aj=false}aC.lencode=ao;aC.lenbits=9;aC.distcode=m;aC.distbits=5}function P(aC,aF,aB,aG){var aE;var aD=aC.state;if(aD.window===null){aD.wsize=1<<aD.wbits;aD.wnext=0;aD.whave=0;aD.window=new T.Buf8(aD.wsize)}if(aG>=aD.wsize){T.arraySet(aD.window,aF,aB-aD.wsize,aD.wsize,0);aD.wnext=0;aD.whave=aD.wsize}else{aE=aD.wsize-aD.wnext;if(aE>aG){aE=aG}T.arraySet(aD.window,aF,aB-aG,aE,aD.wnext);aG-=aE;if(aG){T.arraySet(aD.window,aF,aB-aG,aG,0);aD.wnext=aG;aD.whave=aD.wsize}else{aD.wnext+=aE;if(aD.wnext===aD.wsize){aD.wnext=0}if(aD.whave<aD.wsize){aD.whave+=aE}}}return 0}function ad(aY,aS){var aG;var aL,aJ;var aQ;var aH;var aE,aF;var aO;var aU;var a2,a1;var aT;var aV;var aD;var aB=0;var aZ,aK,a0;var aP,aC,aM;var aX;var a3;var aI=new T.Buf8(4);var aN;var aR;var aW=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!aY||!aY.state||!aY.output||(!aY.input&&aY.avail_in!==0)){return au}aG=aY.state;if(aG.mode===n){aG.mode=ak}aH=aY.next_out;aJ=aY.output;aF=aY.avail_out;aQ=aY.next_in;aL=aY.input;aE=aY.avail_in;aO=aG.hold;aU=aG.bits;a2=aE;a1=aF;a3=w;inf_leave:for(;;){switch(aG.mode){case an:if(aG.wrap===0){aG.mode=ak;break}while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if((aG.wrap&2)&&aO===35615){aG.check=0;aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=af(aG.check,aI,2,0);aO=0;aU=0;aG.mode=am;break}aG.flags=0;if(aG.head){aG.head.done=false}if(!(aG.wrap&1)||(((aO&255)<<8)+(aO>>8))%31){aY.msg="incorrect header check";aG.mode=g;break}if((aO&15)!==ac){aY.msg="unknown compression method";aG.mode=g;break}aO>>>=4;aU-=4;aX=(aO&15)+8;if(aG.wbits===0){aG.wbits=aX}else{if(aX>aG.wbits){aY.msg="invalid window size";aG.mode=g;break}}aG.dmax=1<<aX;aY.adler=aG.check=1;aG.mode=aO&512?at:n;aO=0;aU=0;break;case am:while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.flags=aO;if((aG.flags&255)!==ac){aY.msg="unknown compression method";aG.mode=g;break}if(aG.flags&57344){aY.msg="unknown header flags set";aG.mode=g;break}if(aG.head){aG.head.text=((aO>>8)&1)}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=af(aG.check,aI,2,0)}aO=0;aU=0;aG.mode=l;case l:while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aG.head){aG.head.time=aO}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aI[2]=(aO>>>16)&255;aI[3]=(aO>>>24)&255;aG.check=af(aG.check,aI,4,0)}aO=0;aU=0;aG.mode=ai;case ai:while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aG.head){aG.head.xflags=(aO&255);aG.head.os=(aO>>8)}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=af(aG.check,aI,2,0)}aO=0;aU=0;aG.mode=F;case F:if(aG.flags&1024){while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.length=aO;if(aG.head){aG.head.extra_len=aO}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=af(aG.check,aI,2,0)}aO=0;aU=0}else{if(aG.head){aG.head.extra=null}}aG.mode=f;case f:if(aG.flags&1024){aT=aG.length;if(aT>aE){aT=aE}if(aT){if(aG.head){aX=aG.head.extra_len-aG.length;if(!aG.head.extra){aG.head.extra=new Array(aG.head.extra_len)}T.arraySet(aG.head.extra,aL,aQ,aT,aX)}if(aG.flags&512){aG.check=af(aG.check,aL,aT,aQ)}aE-=aT;aQ+=aT;aG.length-=aT}if(aG.length){break inf_leave}}aG.length=0;aG.mode=u;case u:if(aG.flags&2048){if(aE===0){break inf_leave}aT=0;do{aX=aL[aQ+aT++];if(aG.head&&aX&&(aG.length<65536)){aG.head.name+=String.fromCharCode(aX)}}while(aX&&aT<aE);if(aG.flags&512){aG.check=af(aG.check,aL,aT,aQ)}aE-=aT;aQ+=aT;if(aX){break inf_leave}}else{if(aG.head){aG.head.name=null}}aG.length=0;aG.mode=aa;case aa:if(aG.flags&4096){if(aE===0){break inf_leave}aT=0;do{aX=aL[aQ+aT++];if(aG.head&&aX&&(aG.length<65536)){aG.head.comment+=String.fromCharCode(aX)}}while(aX&&aT<aE);if(aG.flags&512){aG.check=af(aG.check,aL,aT,aQ)}aE-=aT;aQ+=aT;if(aX){break inf_leave}}else{if(aG.head){aG.head.comment=null}}aG.mode=s;case s:if(aG.flags&512){while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aO!==(aG.check&65535)){aY.msg="header crc mismatch";aG.mode=g;break}aO=0;aU=0}if(aG.head){aG.head.hcrc=((aG.flags>>9)&1);aG.head.done=true}aY.adler=aG.check=0;aG.mode=n;break;case at:while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aY.adler=aG.check=t(aO);aO=0;aU=0;aG.mode=x;case x:if(aG.havedict===0){aY.next_out=aH;aY.avail_out=aF;aY.next_in=aQ;aY.avail_in=aE;aG.hold=aO;aG.bits=aU;return v}aY.adler=aG.check=1;aG.mode=n;case n:if(aS===U||aS===D){break inf_leave}case ak:if(aG.last){aO>>>=aU&7;aU-=aU&7;aG.mode=ap;break}while(aU<3){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.last=(aO&1);aO>>>=1;aU-=1;switch((aO&3)){case 0:aG.mode=h;break;case 1:I(aG);aG.mode=ab;if(aS===D){aO>>>=2;aU-=2;break inf_leave}break;case 2:aG.mode=p;break;case 3:aY.msg="invalid block type";aG.mode=g}aO>>>=2;aU-=2;break;case h:aO>>>=aU&7;aU-=aU&7;while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if((aO&65535)!==((aO>>>16)^65535)){aY.msg="invalid stored block lengths";aG.mode=g;break}aG.length=aO&65535;aO=0;aU=0;aG.mode=aA;if(aS===D){break inf_leave}case aA:aG.mode=aq;case aq:aT=aG.length;if(aT){if(aT>aE){aT=aE}if(aT>aF){aT=aF}if(aT===0){break inf_leave}T.arraySet(aJ,aL,aQ,aT,aH);aE-=aT;aQ+=aT;aF-=aT;aH+=aT;aG.length-=aT;break}aG.mode=n;break;case p:while(aU<14){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.nlen=(aO&31)+257;aO>>>=5;aU-=5;aG.ndist=(aO&31)+1;aO>>>=5;aU-=5;aG.ncode=(aO&15)+4;aO>>>=4;aU-=4;if(aG.nlen>286||aG.ndist>30){aY.msg="too many length or distance symbols";aG.mode=g;break}aG.have=0;aG.mode=B;case B:while(aG.have<aG.ncode){while(aU<3){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.lens[aW[aG.have++]]=(aO&7);aO>>>=3;aU-=3}while(aG.have<19){aG.lens[aW[aG.have++]]=0}aG.lencode=aG.lendyn;aG.lenbits=7;aN={bits:aG.lenbits};a3=o(ae,aG.lens,0,19,aG.lencode,0,aG.work,aN);aG.lenbits=aN.bits;if(a3){aY.msg="invalid code lengths set";aG.mode=g;break}aG.have=0;aG.mode=V;case V:while(aG.have<aG.nlen+aG.ndist){for(;;){aB=aG.lencode[aO&((1<<aG.lenbits)-1)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(a0<16){aO>>>=aZ;aU-=aZ;aG.lens[aG.have++]=a0}else{if(a0===16){aR=aZ+2;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aZ;aU-=aZ;if(aG.have===0){aY.msg="invalid bit length repeat";aG.mode=g;break}aX=aG.lens[aG.have-1];aT=3+(aO&3);aO>>>=2;aU-=2}else{if(a0===17){aR=aZ+3;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aZ;aU-=aZ;aX=0;aT=3+(aO&7);aO>>>=3;aU-=3}else{aR=aZ+7;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aZ;aU-=aZ;aX=0;aT=11+(aO&127);aO>>>=7;aU-=7}}if(aG.have+aT>aG.nlen+aG.ndist){aY.msg="invalid bit length repeat";aG.mode=g;break}while(aT--){aG.lens[aG.have++]=aX}}}if(aG.mode===g){break}if(aG.lens[256]===0){aY.msg="invalid code -- missing end-of-block";aG.mode=g;break}aG.lenbits=9;aN={bits:aG.lenbits};a3=o(ag,aG.lens,0,aG.nlen,aG.lencode,0,aG.work,aN);aG.lenbits=aN.bits;if(a3){aY.msg="invalid literal/lengths set";aG.mode=g;break}aG.distbits=6;aG.distcode=aG.distdyn;aN={bits:aG.distbits};a3=o(K,aG.lens,aG.nlen,aG.ndist,aG.distcode,0,aG.work,aN);aG.distbits=aN.bits;if(a3){aY.msg="invalid distances set";aG.mode=g;break}aG.mode=ab;if(aS===D){break inf_leave}case ab:aG.mode=e;case e:if(aE>=6&&aF>=258){aY.next_out=aH;aY.avail_out=aF;aY.next_in=aQ;aY.avail_in=aE;aG.hold=aO;aG.bits=aU;ar(aY,a1);aH=aY.next_out;aJ=aY.output;aF=aY.avail_out;aQ=aY.next_in;aL=aY.input;aE=aY.avail_in;aO=aG.hold;aU=aG.bits;if(aG.mode===n){aG.back=-1}break}aG.back=0;for(;;){aB=aG.lencode[aO&((1<<aG.lenbits)-1)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if(aZ<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aK&&(aK&240)===0){aP=aZ;aC=aK;aM=a0;for(;;){aB=aG.lencode[aM+((aO&((1<<(aP+aC))-1))>>aP)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aP+aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aP;aU-=aP;aG.back+=aP}aO>>>=aZ;aU-=aZ;aG.back+=aZ;aG.length=a0;if(aK===0){aG.mode=G;break}if(aK&32){aG.back=-1;aG.mode=n;break}if(aK&64){aY.msg="invalid literal/length code";aG.mode=g;break}aG.extra=aK&15;aG.mode=ax;case ax:if(aG.extra){aR=aG.extra;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.length+=aO&((1<<aG.extra)-1);aO>>>=aG.extra;aU-=aG.extra;aG.back+=aG.extra}aG.was=aG.length;aG.mode=W;case W:for(;;){aB=aG.distcode[aO&((1<<aG.distbits)-1)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if((aK&240)===0){aP=aZ;aC=aK;aM=a0;for(;;){aB=aG.distcode[aM+((aO&((1<<(aP+aC))-1))>>aP)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aP+aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aP;aU-=aP;aG.back+=aP}aO>>>=aZ;aU-=aZ;aG.back+=aZ;if(aK&64){aY.msg="invalid distance code";aG.mode=g;break}aG.offset=a0;aG.extra=(aK)&15;aG.mode=av;case av:if(aG.extra){aR=aG.extra;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.offset+=aO&((1<<aG.extra)-1);aO>>>=aG.extra;aU-=aG.extra;aG.back+=aG.extra}if(aG.offset>aG.dmax){aY.msg="invalid distance too far back";aG.mode=g;break}aG.mode=E;case E:if(aF===0){break inf_leave}aT=a1-aF;if(aG.offset>aT){aT=aG.offset-aT;if(aT>aG.whave){if(aG.sane){aY.msg="invalid distance too far back";aG.mode=g;break}}if(aT>aG.wnext){aT-=aG.wnext;aV=aG.wsize-aT}else{aV=aG.wnext-aT}if(aT>aG.length){aT=aG.length}aD=aG.window}else{aD=aJ;aV=aH-aG.offset;aT=aG.length}if(aT>aF){aT=aF}aF-=aT;aG.length-=aT;do{aJ[aH++]=aD[aV++]}while(--aT);if(aG.length===0){aG.mode=e}break;case G:if(aF===0){break inf_leave}aJ[aH++]=aG.length;aF--;aG.mode=e;break;case ap:if(aG.wrap){while(aU<32){if(aE===0){break inf_leave}aE--;aO|=aL[aQ++]<<aU;aU+=8}a1-=aF;aY.total_out+=a1;aG.total+=a1;if(a1){aY.adler=aG.check=(aG.flags?af(aG.check,aJ,a1,aH-a1):N(aG.check,aJ,a1,aH-a1))}a1=aF;if((aG.flags?aO:t(aO))!==aG.check){aY.msg="incorrect data check";aG.mode=g;break}aO=0;aU=0}aG.mode=Y;case Y:if(aG.wrap&&aG.flags){while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aO!==(aG.total&4294967295)){aY.msg="incorrect length check";aG.mode=g;break}aO=0;aU=0}aG.mode=C;case C:a3=A;break inf_leave;case g:a3=y;break inf_leave;case az:return M;case H:default:return au}}aY.next_out=aH;aY.avail_out=aF;aY.next_in=aQ;aY.avail_in=aE;aG.hold=aO;aG.bits=aU;if(aG.wsize||(a1!==aY.avail_out&&aG.mode<g&&(aG.mode<ap||aS!==q))){if(P(aY,aY.output,aY.next_out,a1-aY.avail_out)){aG.mode=az;return M}}a2-=aY.avail_in;a1-=aY.avail_out;aY.total_in+=a2;aY.total_out+=a1;aG.total+=a1;if(aG.wrap&&a1){aY.adler=aG.check=(aG.flags?af(aG.check,aJ,a1,aY.next_out-a1):N(aG.check,aJ,a1,aY.next_out-a1))}aY.data_type=aG.bits+(aG.last?64:0)+(aG.mode===n?128:0)+(aG.mode===ab||aG.mode===aA?256:0);if(((a2===0&&a1===0)||aS===q)&&a3===w){a3=k}return a3}function al(aB){if(!aB||!aB.state){return au}var aC=aB.state;if(aC.window){aC.window=null}aB.state=null;return w}function j(aB,aC){var aD;if(!aB||!aB.state){return au}aD=aB.state;if((aD.wrap&2)===0){return au}aD.head=aC;aC.done=false;return w}O.inflateReset=aw;O.inflateReset2=z;O.inflateResetKeep=S;O.inflateInit=J;O.inflateInit2=r;O.inflate=ad;O.inflateEnd=al;O.inflateGetHeader=j;O.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(f,g,j){var s=f("../utils/common");var r=15;var o=852;var n=592;var q=0;var l=1;var h=2;var p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var t=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];g.exports=function m(w,ab,J,Y,X,V,I,F){var M=F.bits;var T=0;var E=0;var L=0,S=0;var K=0;var W=0;var C=0;var x=0;var A=0;var R=0;var Q;var N;var ac;var P;var H;var z=null;var G=0;var v;var B=new s.Buf16(r+1);var y=new s.Buf16(r+1);var u=null;var aa=0;var U,D,Z;for(T=0;T<=r;T++){B[T]=0}for(E=0;E<Y;E++){B[ab[J+E]]++}K=M;for(S=r;S>=1;S--){if(B[S]!==0){break}}if(K>S){K=S}if(S===0){X[V++]=(1<<24)|(64<<16)|0;X[V++]=(1<<24)|(64<<16)|0;F.bits=1;return 0}for(L=1;L<S;L++){if(B[L]!==0){break}}if(K<L){K=L}x=1;for(T=1;T<=r;T++){x<<=1;x-=B[T];if(x<0){return -1}}if(x>0&&(w===q||S!==1)){return -1}y[1]=0;for(T=1;T<r;T++){y[T+1]=y[T]+B[T]}for(E=0;E<Y;E++){if(ab[J+E]!==0){I[y[ab[J+E]]++]=E}}if(w===q){z=u=I;v=19}else{if(w===l){z=p;G-=257;u=t;aa-=257;v=256}else{z=k;u=e;v=-1}}R=0;E=0;T=L;H=V;W=K;C=0;ac=-1;A=1<<K;P=A-1;if((w===l&&A>o)||(w===h&&A>n)){return 1}var O=0;for(;;){O++;U=T-C;if(I[E]<v){D=0;Z=I[E]}else{if(I[E]>v){D=u[aa+I[E]];Z=z[G+I[E]]}else{D=32+64;Z=0}}Q=1<<(T-C);N=1<<W;L=N;do{N-=Q;X[H+(R>>C)+N]=(U<<24)|(D<<16)|Z|0}while(N!==0);Q=1<<(T-1);while(R&Q){Q>>=1}if(Q!==0){R&=Q-1;R+=Q}else{R=0}E++;if(--B[T]===0){if(T===S){break}T=ab[J+I[E]]}if(T>K&&(R&P)!==ac){if(C===0){C=K}H+=L;W=T-C;x=1<<W;while(W+C<S){x-=B[W+C];if(x<=0){break}W++;x<<=1}A+=1<<W;if((w===l&&A>o)||(w===h&&A>n)){return 1}ac=R&P;X[ac]=(K<<24)|(W<<16)|(H-V)|0}}if(R!==0){X[H+R]=((T-C)<<24)|(64<<16)|0}F.bits=K;return 0}},{"../utils/common":27}],37:[function(g,f,e){f.exports={"2":"need dictionary","1":"stream end","0":"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(K,l,am){var ax=K("../utils/common");var U=4;var u=0;var E=1;var F=2;function e(az){var ay=az.length;while(--ay>=0){az[ay]=0}}var Y=0;var ao=1;var N=2;var aw=3;var G=258;var r=29;var h=256;var j=h+1+r;var f=30;var x=19;var k=2*j+1;var at=15;var A=16;var ah=7;var g=256;var J=16;var I=17;var O=18;var m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var W=512;var Q=new Array((j+2)*2);e(Q);var ac=new Array(f*2);e(ac);var ai=new Array(W);e(ai);var B=new Array(G-aw+1);e(B);var P=new Array(r);e(P);var ar=new Array(f);e(ar);var af=function(aB,aA,az,ay,aC){this.static_tree=aB;this.extra_bits=aA;this.extra_base=az;this.elems=ay;this.max_length=aC;this.has_stree=aB&&aB.length};var ak;var ab;var z;var av=function(az,ay){this.dyn_tree=az;this.max_code=0;this.stat_desc=ay};function ad(ay){return ay<256?ai[ay]:ai[256+(ay>>>7)]}function p(az,ay){az.pending_buf[az.pending++]=(ay)&255;az.pending_buf[az.pending++]=(ay>>>8)&255}function aj(ay,aA,az){if(ay.bi_valid>(A-az)){ay.bi_buf|=(aA<<ay.bi_valid)&65535;p(ay,ay.bi_buf);ay.bi_buf=aA>>(A-ay.bi_valid);ay.bi_valid+=az-A}else{ay.bi_buf|=(aA<<ay.bi_valid)&65535;ay.bi_valid+=az}}function an(az,aA,ay){aj(az,ay[aA*2],ay[aA*2+1])}function C(aA,ay){var az=0;do{az|=aA&1;aA>>>=1;az<<=1}while(--ay>0);return az>>>1}function w(ay){if(ay.bi_valid===16){p(ay,ay.bi_buf);ay.bi_buf=0;ay.bi_valid=0}else{if(ay.bi_valid>=8){ay.pending_buf[ay.pending++]=ay.bi_buf&255;ay.bi_buf>>=8;ay.bi_valid-=8}}}function o(aM,aH){var aN=aH.dyn_tree;var aI=aH.max_code;var aL=aH.stat_desc.static_tree;var aA=aH.stat_desc.has_stree;var aC=aH.stat_desc.extra_bits;var ay=aH.stat_desc.extra_base;var aK=aH.stat_desc.max_length;var aF;var az,aB;var aJ;var aE;var aG;var aD=0;for(aJ=0;aJ<=at;aJ++){aM.bl_count[aJ]=0}aN[aM.heap[aM.heap_max]*2+1]=0;for(aF=aM.heap_max+1;aF<k;aF++){az=aM.heap[aF];aJ=aN[aN[az*2+1]*2+1]+1;if(aJ>aK){aJ=aK;aD++}aN[az*2+1]=aJ;if(az>aI){continue}aM.bl_count[aJ]++;aE=0;if(az>=ay){aE=aC[az-ay]}aG=aN[az*2];aM.opt_len+=aG*(aJ+aE);if(aA){aM.static_len+=aG*(aL[az*2+1]+aE)}}if(aD===0){return}do{aJ=aK-1;while(aM.bl_count[aJ]===0){aJ--}aM.bl_count[aJ]--;aM.bl_count[aJ+1]+=2;aM.bl_count[aK]--;aD-=2}while(aD>0);for(aJ=aK;aJ!==0;aJ--){az=aM.bl_count[aJ];while(az!==0){aB=aM.heap[--aF];if(aB>aI){continue}if(aN[aB*2+1]!==aJ){aM.opt_len+=(aJ-aN[aB*2+1])*aN[aB*2];aN[aB*2+1]=aJ}az--}}}function al(az,aF,aA){var aC=new Array(at+1);var aB=0;var aD;var aE;for(aD=1;aD<=at;aD++){aC[aD]=aB=(aB+aA[aD-1])<<1}for(aE=0;aE<=aF;aE++){var ay=az[aE*2+1];if(ay===0){continue}az[aE*2]=C(aC[ay]++,ay)}}function X(){var aD;var aB;var aA;var az;var aC;var ay=new Array(at+1);aA=0;for(az=0;az<r-1;az++){P[az]=aA;for(aD=0;aD<(1<<m[az]);aD++){B[aA++]=az}}B[aA-1]=az;aC=0;for(az=0;az<16;az++){ar[az]=aC;for(aD=0;aD<(1<<y[az]);aD++){ai[aC++]=az}}aC>>=7;for(;az<f;az++){ar[az]=aC<<7;for(aD=0;aD<(1<<(y[az]-7));aD++){ai[256+aC++]=az}}for(aB=0;aB<=at;aB++){ay[aB]=0}aD=0;while(aD<=143){Q[aD*2+1]=8;aD++;ay[8]++}while(aD<=255){Q[aD*2+1]=9;aD++;ay[9]++}while(aD<=279){Q[aD*2+1]=7;aD++;ay[7]++}while(aD<=287){Q[aD*2+1]=8;aD++;ay[8]++}al(Q,j+1,ay);for(aD=0;aD<f;aD++){ac[aD*2+1]=5;ac[aD*2]=C(aD,5)}ak=new af(Q,m,h+1,j,at);ab=new af(ac,y,0,f,at);z=new af(new Array(0),D,0,x,ah)}function M(ay){var az;for(az=0;az<j;az++){ay.dyn_ltree[az*2]=0}for(az=0;az<f;az++){ay.dyn_dtree[az*2]=0}for(az=0;az<x;az++){ay.bl_tree[az*2]=0}ay.dyn_ltree[g*2]=1;ay.opt_len=ay.static_len=0;ay.last_lit=ay.matches=0}function n(ay){if(ay.bi_valid>8){p(ay,ay.bi_buf)}else{if(ay.bi_valid>0){ay.pending_buf[ay.pending++]=ay.bi_buf}}ay.bi_buf=0;ay.bi_valid=0}function t(aA,az,ay,aB){n(aA);if(aB){p(aA,ay);p(aA,~ay)}ax.arraySet(aA.pending_buf,aA.window,az,ay,aA.pending);aA.pending+=ay}function aa(az,aD,ay,aC){var aB=aD*2;var aA=ay*2;return(az[aB]<az[aA]||(az[aB]===az[aA]&&aC[aD]<=aC[ay]))}function au(aC,ay,aA){var az=aC.heap[aA];var aB=aA<<1;while(aB<=aC.heap_len){if(aB<aC.heap_len&&aa(ay,aC.heap[aB+1],aC.heap[aB],aC.depth)){aB++}if(aa(ay,az,aC.heap[aB],aC.depth)){break}aC.heap[aA]=aC.heap[aB];aA=aB;aB<<=1}aC.heap[aA]=az}function aq(az,aF,aC){var aE;var aB;var aD=0;var aA;var ay;if(az.last_lit!==0){do{aE=(az.pending_buf[az.d_buf+aD*2]<<8)|(az.pending_buf[az.d_buf+aD*2+1]);aB=az.pending_buf[az.l_buf+aD];aD++;if(aE===0){an(az,aB,aF)}else{aA=B[aB];an(az,aA+h+1,aF);ay=m[aA];if(ay!==0){aB-=P[aA];aj(az,aB,ay)}aE--;aA=ad(aE);an(az,aA,aC);ay=y[aA];if(ay!==0){aE-=ar[aA];aj(az,aE,ay)}}}while(aD<az.last_lit)}an(az,g,aF)}function Z(aG,aD){var aH=aD.dyn_tree;var aF=aD.stat_desc.static_tree;var aA=aD.stat_desc.has_stree;var ay=aD.stat_desc.elems;var az,aC;var aE=-1;var aB;aG.heap_len=0;aG.heap_max=k;for(az=0;az<ay;az++){if(aH[az*2]!==0){aG.heap[++aG.heap_len]=aE=az;aG.depth[az]=0}else{aH[az*2+1]=0}}while(aG.heap_len<2){aB=aG.heap[++aG.heap_len]=(aE<2?++aE:0);aH[aB*2]=1;aG.depth[aB]=0;aG.opt_len--;if(aA){aG.static_len-=aF[aB*2+1]}}aD.max_code=aE;for(az=(aG.heap_len>>1);az>=1;az--){au(aG,aH,az)}aB=ay;do{az=aG.heap[1];aG.heap[1]=aG.heap[aG.heap_len--];au(aG,aH,1);aC=aG.heap[1];aG.heap[--aG.heap_max]=az;aG.heap[--aG.heap_max]=aC;aH[aB*2]=aH[az*2]+aH[aC*2];aG.depth[aB]=(aG.depth[az]>=aG.depth[aC]?aG.depth[az]:aG.depth[aC])+1;aH[az*2+1]=aH[aC*2+1]=aB;aG.heap[1]=aB++;au(aG,aH,1)}while(aG.heap_len>=2);aG.heap[--aG.heap_max]=aG.heap[1];o(aG,aD);al(aH,aE,aG.bl_count)}function s(aG,aH,aF){var az;var aD=-1;var ay;var aB=aH[0*2+1];var aC=0;var aA=7;var aE=4;if(aB===0){aA=138;aE=3}aH[(aF+1)*2+1]=65535;for(az=0;az<=aF;az++){ay=aB;aB=aH[(az+1)*2+1];if(++aC<aA&&ay===aB){continue}else{if(aC<aE){aG.bl_tree[ay*2]+=aC}else{if(ay!==0){if(ay!==aD){aG.bl_tree[ay*2]++}aG.bl_tree[J*2]++}else{if(aC<=10){aG.bl_tree[I*2]++}else{aG.bl_tree[O*2]++}}}}aC=0;aD=ay;if(aB===0){aA=138;aE=3}else{if(ay===aB){aA=6;aE=3}else{aA=7;aE=4}}}}function v(aG,aH,aF){var az;var aD=-1;var ay;var aB=aH[0*2+1];var aC=0;var aA=7;var aE=4;if(aB===0){aA=138;aE=3}for(az=0;az<=aF;az++){ay=aB;aB=aH[(az+1)*2+1];if(++aC<aA&&ay===aB){continue}else{if(aC<aE){do{an(aG,ay,aG.bl_tree)}while(--aC!==0)}else{if(ay!==0){if(ay!==aD){an(aG,ay,aG.bl_tree);aC--}an(aG,J,aG.bl_tree);aj(aG,aC-3,2)}else{if(aC<=10){an(aG,I,aG.bl_tree);aj(aG,aC-3,3)}else{an(aG,O,aG.bl_tree);aj(aG,aC-11,7)}}}}aC=0;aD=ay;if(aB===0){aA=138;aE=3}else{if(ay===aB){aA=6;aE=3}else{aA=7;aE=4}}}}function H(az){var ay;s(az,az.dyn_ltree,az.l_desc.max_code);s(az,az.dyn_dtree,az.d_desc.max_code);Z(az,az.bl_desc);for(ay=x-1;ay>=3;ay--){if(az.bl_tree[V[ay]*2+1]!==0){break}}az.opt_len+=3*(ay+1)+5+5+4;return ay}function S(az,aA,ay,aB){var aC;aj(az,aA-257,5);aj(az,ay-1,5);aj(az,aB-4,4);for(aC=0;aC<aB;aC++){aj(az,az.bl_tree[V[aC]*2+1],3)}v(az,az.dyn_ltree,aA-1);v(az,az.dyn_dtree,ay-1)}function R(az){var ay=4093624447;var aA;for(aA=0;aA<=31;aA++,ay>>>=1){if((ay&1)&&(az.dyn_ltree[aA*2]!==0)){return u}}if(az.dyn_ltree[9*2]!==0||az.dyn_ltree[10*2]!==0||az.dyn_ltree[13*2]!==0){return E}for(aA=32;aA<h;aA++){if(az.dyn_ltree[aA*2]!==0){return E}}return u}var ag=false;function L(ay){if(!ag){X();ag=true}ay.l_desc=new av(ay.dyn_ltree,ak);ay.d_desc=new av(ay.dyn_dtree,ab);ay.bl_desc=new av(ay.bl_tree,z);ay.bi_buf=0;ay.bi_valid=0;M(ay)}function T(aA,ay,az,aB){aj(aA,(Y<<1)+(aB?1:0),3);t(aA,ay,az,true)}function ae(ay){aj(ay,ao<<1,3);an(ay,g,Q);w(ay)}function q(aD,aA,aC,aE){var az,ay;var aB=0;if(aD.level>0){if(aD.strm.data_type===F){aD.strm.data_type=R(aD)}Z(aD,aD.l_desc);Z(aD,aD.d_desc);aB=H(aD);az=(aD.opt_len+3+7)>>>3;ay=(aD.static_len+3+7)>>>3;if(ay<=az){az=ay}}else{az=ay=aC+5}if((aC+4<=az)&&(aA!==-1)){T(aD,aA,aC,aE)}else{if(aD.strategy===U||ay===az){aj(aD,(ao<<1)+(aE?1:0),3);aq(aD,Q,ac)}else{aj(aD,(N<<1)+(aE?1:0),3);S(aD,aD.l_desc.max_code+1,aD.d_desc.max_code+1,aB+1);aq(aD,aD.dyn_ltree,aD.dyn_dtree)}}M(aD);if(aE){n(aD)}}function ap(ay,aA,az){ay.pending_buf[ay.d_buf+ay.last_lit*2]=(aA>>>8)&255;ay.pending_buf[ay.d_buf+ay.last_lit*2+1]=aA&255;ay.pending_buf[ay.l_buf+ay.last_lit]=az&255;ay.last_lit++;if(aA===0){ay.dyn_ltree[az*2]++}else{ay.matches++;aA--;ay.dyn_ltree[(B[az]+h+1)*2]++;ay.dyn_dtree[ad(aA)*2]++}return(ay.last_lit===ay.lit_bufsize-1)}am._tr_init=L;am._tr_stored_block=T;am._tr_flush_block=q;am._tr_tally=ap;am._tr_align=ae},{"../utils/common":27}],39:[function(g,f,e){function h(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}f.exports=h},{}]},{},[9])(9)});
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator))||(function(m){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var n=m.document,j=function(){return m.URL||m.webkitURL||m},q=n.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download" in q,r=function(t){var s=n.createEvent("MouseEvents");s.initMouseEvent("click",true,false,m,0,0,0,0,0,false,false,false,false,0,null);t.dispatchEvent(s)},g=m.webkitRequestFileSystem,o=m.requestFileSystem||g||m.mozRequestFileSystem,e=function(s){(m.setImmediate||m.setTimeout)(function(){throw s},0)},l="application/octet-stream",h=0,c=10,p=function(t){var s=function(){if(typeof t==="string"){j().revokeObjectURL(t)}else{t.remove()}};if(m.chrome){s()}else{setTimeout(s,c)}},k=function(t,s,w){s=[].concat(s);var v=s.length;while(v--){var x=t["on"+s[v]];if(typeof x==="function"){try{x.call(t,w||t)}catch(u){e(u)}}}},b=function(s,t){var u=this,A=s.type,D=false,w,v,z=function(){k(u,"writestart progress write writeend".split(" "))},C=function(){if(D||!w){w=j().createObjectURL(s)}if(v){v.location.href=w}else{var E=m.open(w,"_blank");if(E==undefined&&typeof safari!=="undefined"){m.location.href=w}}u.readyState=u.DONE;z();p(w)},y=function(E){return function(){if(u.readyState!==u.DONE){return E.apply(this,arguments)}}},x={create:true,exclusive:false},B;u.readyState=u.INIT;if(!t){t="download"}if(d){w=j().createObjectURL(s);q.href=w;q.download=t;r(q);u.readyState=u.DONE;z();p(w);return}if(m.chrome&&A&&A!==l){B=s.slice||s.webkitSlice;s=B.call(s,0,s.size,l);D=true}if(g&&t!=="download"){t+=".download"}if(A===l||g){v=m}if(!o){C();return}h+=s.size;o(m.TEMPORARY,h,y(function(E){E.root.getDirectory("saved",x,y(function(F){var G=function(){F.getFile(t,x,y(function(H){H.createWriter(y(function(I){I.onwriteend=function(J){v.location.href=H.toURL();u.readyState=u.DONE;k(u,"writeend",J);p(H)};I.onerror=function(){var J=I.error;if(J.code!==J.ABORT_ERR){C()}};"writestart progress write abort".split(" ").forEach(function(J){I["on"+J]=u["on"+J]});I.write(s);u.abort=function(){I.abort();u.readyState=u.DONE};u.readyState=u.WRITING}),C)}),C)};F.getFile(t,{create:false},y(function(H){H.remove();G()}),y(function(H){if(H.code===H.NOT_FOUND_ERR){G()}else{C()}}))}),C)}),C)},a=b.prototype,f=function(s,t){return new b(s,t)};a.abort=function(){var s=this;s.readyState=s.DONE;k(s,"abort")};a.readyState=a.INIT=0;a.WRITING=1;a.DONE=2;a.error=a.onwritestart=a.onprogress=a.onwrite=a.onabort=a.onerror=a.onwriteend=null;return f}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content));if(typeof module!=="undefined"&&module!==null){module.exports=saveAs}else{if((typeof define!=="undefined"&&define!==null)&&(define.amd!=null)){define([],function(){return saveAs})}}function X2JS(w){var r="1.1.5";w=w||{};h();s();function h(){if(w.escapeMode===undefined){w.escapeMode=true}w.attributePrefix=w.attributePrefix||"_";w.arrayAccessForm=w.arrayAccessForm||"none";w.emptyNodeForm=w.emptyNodeForm||"text";if(w.enableToStringFunc===undefined){w.enableToStringFunc=true}w.arrayAccessFormPaths=w.arrayAccessFormPaths||[];if(w.skipEmptyTextNodesForObj===undefined){w.skipEmptyTextNodesForObj=true}if(w.stripWhitespaces===undefined){w.stripWhitespaces=true}w.datetimeAccessFormPaths=w.datetimeAccessFormPaths||[]}var g={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function s(){function y(A){var z=String(A);if(z.length===1){z="0"+z}return z}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}}if(typeof Date.prototype.toISOString!=="function"){Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+y(this.getUTCMonth()+1)+"-"+y(this.getUTCDate())+"T"+y(this.getUTCHours())+":"+y(this.getUTCMinutes())+":"+y(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}}function u(y){var z=y.localName;if(z==null){z=y.baseName}if(z==null||z==""){z=y.nodeName}return z}function p(y){return y.prefix}function q(y){if(typeof(y)=="string"){return y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}else{return y}}function k(y){return y.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function m(C,z,B){switch(w.arrayAccessForm){case"property":if(!(C[z] instanceof Array)){C[z+"_asArray"]=[C[z]]}else{C[z+"_asArray"]=C[z]}break}if(!(C[z] instanceof Array)&&w.arrayAccessFormPaths.length>0){var y=0;for(;y<w.arrayAccessFormPaths.length;y++){var A=w.arrayAccessFormPaths[y];if(typeof A==="string"){if(A==B){break}}else{if(A instanceof RegExp){if(A.test(B)){break}}else{if(typeof A==="function"){if(A(C,z,B)){break}}}}}if(y!=w.arrayAccessFormPaths.length){C[z]=[C[z]]}}}function a(D){var B=D.split(/[-T:+Z]/g);var C=new Date(B[0],B[1]-1,B[2]);var A=B[5].split(".");C.setHours(B[3],B[4],A[0]);if(A.length>1){C.setMilliseconds(A[1])}if(B[6]&&B[7]){var z=B[6]*60+Number(B[7]);var y=/\d\d-\d\d:\d\d$/.test(D)?"-":"+";z=0+(y=="-"?-1*z:z);C.setMinutes(C.getMinutes()-z-C.getTimezoneOffset())}else{if(D.indexOf("Z",D.length-1)!==-1){C=new Date(Date.UTC(C.getFullYear(),C.getMonth(),C.getDate(),C.getHours(),C.getMinutes(),C.getSeconds(),C.getMilliseconds()))}}return C}function o(B,z,A){if(w.datetimeAccessFormPaths.length>0){var C=A.split(".#")[0];var y=0;for(;y<w.datetimeAccessFormPaths.length;y++){var D=w.datetimeAccessFormPaths[y];if(typeof D==="string"){if(D==C){break}}else{if(D instanceof RegExp){if(D.test(C)){break}}else{if(typeof D==="function"){if(D(obj,z,C)){break}}}}}if(y!=w.datetimeAccessFormPaths.length){return a(B)}else{return B}}else{return B}}function x(A,F){if(A.nodeType==g.DOCUMENT_NODE){var G=new Object();var y=A.childNodes;for(var H=0;H<y.length;H++){var z=y.item(H);if(z.nodeType==g.ELEMENT_NODE){var E=u(z);G[E]=x(z,E)}}return G}else{if(A.nodeType==g.ELEMENT_NODE){var G=new Object();G.__cnt=0;var y=A.childNodes;for(var H=0;H<y.length;H++){var z=y.item(H);var E=u(z);if(z.nodeType!=g.COMMENT_NODE){G.__cnt++;if(G[E]==null){G[E]=x(z,F+"."+E);m(G,E,F+"."+E)}else{if(G[E]!=null){if(!(G[E] instanceof Array)){G[E]=[G[E]];m(G,E,F+"."+E)}}(G[E])[G[E].length]=x(z,F+"."+E)}}}for(var B=0;B<A.attributes.length;B++){var C=A.attributes.item(B);G.__cnt++;G[w.attributePrefix+C.name]=C.value}var D=p(A);if(D!=null&&D!=""){G.__cnt++;G.__prefix=D}if(G["#text"]!=null){G.__text=G["#text"];if(G.__text instanceof Array){G.__text=G.__text.join("\n")}if(w.escapeMode){G.__text=k(G.__text)}if(w.stripWhitespaces){G.__text=G.__text.trim()}delete G["#text"];if(w.arrayAccessForm=="property"){delete G["#text_asArray"]}G.__text=o(G.__text,E,F+"."+E)}if(G["#cdata-section"]!=null){G.__cdata=G["#cdata-section"];delete G["#cdata-section"];if(w.arrayAccessForm=="property"){delete G["#cdata-section_asArray"]}}if(G.__cnt==1&&G.__text!=null){G=G.__text}else{if(G.__cnt==0&&w.emptyNodeForm=="text"){G=""}else{if(G.__cnt>1&&G.__text!=null&&w.skipEmptyTextNodesForObj){if((w.stripWhitespaces&&G.__text=="")||(G.__text.trim()=="")){delete G.__text}}}}delete G.__cnt;if(w.enableToStringFunc&&(G.__text!=null||G.__cdata!=null)){G.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}}return G}else{if(A.nodeType==g.TEXT_NODE||A.nodeType==g.CDATA_SECTION_NODE){return A.nodeValue}}}}function n(F,C,E,z){var B="<"+((F!=null&&F.__prefix!=null)?(F.__prefix+":"):"")+C;if(E!=null){for(var D=0;D<E.length;D++){var A=E[D];var y=F[A];if(w.escapeMode){y=q(y)}B+=" "+A.substr(w.attributePrefix.length)+"='"+y+"'"}}if(!z){B+=">"}else{B+="/>"}return B}function j(z,y){return"</"+(z.__prefix!=null?(z.__prefix+":"):"")+y+">"}function t(z,y){return z.indexOf(y,z.length-y.length)!==-1}function v(z,y){if((w.arrayAccessForm=="property"&&t(y.toString(),("_asArray")))||y.toString().indexOf(w.attributePrefix)==0||y.toString().indexOf("__")==0||(z[y] instanceof Function)){return true}else{return false}}function l(A){var z=0;if(A instanceof Object){for(var y in A){if(v(A,y)){continue}z++}}return z}function b(A){var z=[];if(A instanceof Object){for(var y in A){if(y.toString().indexOf("__")==-1&&y.toString().indexOf(w.attributePrefix)==0){z.push(y)}}}return z}function f(z){var y="";if(z.__cdata!=null){y+="<![CDATA["+z.__cdata+"]]>"}if(z.__text!=null){if(w.escapeMode){y+=q(z.__text)}else{y+=z.__text}}return y}function c(z){var y="";if(z instanceof Object){y+=f(z)}else{if(z!=null){if(w.escapeMode){y+=q(z)}else{y+=z}}}return y}function e(A,C,B){var y="";if(A.length==0){y+=n(A,C,B,true)}else{for(var z=0;z<A.length;z++){y+=n(A[z],C,b(A[z]),false);y+=d(A[z]);y+=j(A[z],C)}}return y}function d(E){var y="";var C=l(E);if(C>0){for(var B in E){if(v(E,B)){continue}var A=E[B];var D=b(A);if(A==null||A==undefined){y+=n(A,B,D,true)}else{if(A instanceof Object){if(A instanceof Array){y+=e(A,B,D)}else{if(A instanceof Date){y+=n(A,B,D,false);y+=A.toISOString();y+=j(A,B)}else{var z=l(A);if(z>0||A.__text!=null||A.__cdata!=null){y+=n(A,B,D,false);y+=d(A);y+=j(A,B)}else{y+=n(A,B,D,true)}}}}else{y+=n(A,B,D,false);y+=c(A);y+=j(A,B)}}}}y+=c(E);return y}this.parseXmlString=function(A){var C=window.ActiveXObject||"ActiveXObject" in window;if(A===undefined){return null}var B;if(window.DOMParser){var D=new window.DOMParser();var y=null;if(!C){try{y=D.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(z){y=null}}try{B=D.parseFromString(A,"text/xml");if(y!=null&&B.getElementsByTagNameNS(y,"parsererror").length>0){B=null}}catch(z){B=null}}else{if(A.indexOf("<?")==0){A=A.substr(A.indexOf("?>")+2)}B=new ActiveXObject("Microsoft.XMLDOM");B.async="false";B.loadXML(A)}return B};this.asArray=function(y){if(y instanceof Array){return y}else{return[y]}};this.toXmlDateTime=function(y){if(y instanceof Date){return y.toISOString()}else{if(typeof(y)==="number"){return new Date(y).toISOString()}else{return null}}};this.asDateTime=function(y){if(typeof(y)=="string"){return a(y)}else{return y}};this.xml2json=function(y){return x(y)};this.xml_str2json=function(y){var z=this.parseXmlString(y);if(z!=null){return this.xml2json(z)}else{return null}};this.json2xml_str=function(y){return d(y)};this.json2xml=function(z){var y=this.json2xml_str(z);return this.parseXmlString(y)};this.getVersion=function(){return r}}Ext.application({name:"FBEditor",extend:FBEditor.Application,autoCreateViewport:"FBEditor.view.main.Main"});