var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.header){Ext.grid.header={}}if(!Ext.grid.locking){Ext.grid.locking={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.locale){Ext.locale={}}if(!Ext.locale.ru){Ext.locale.ru={}}if(!Ext.locale.ru.form){Ext.locale.ru.form={}}if(!Ext.locale.ru.form.field){Ext.locale.ru.form.field={}}if(!Ext.locale.ru.grid){Ext.locale.ru.grid={}}if(!Ext.locale.ru.grid.header){Ext.locale.ru.grid.header={}}if(!Ext.locale.ru.grid.plugin){Ext.locale.ru.grid.plugin={}}if(!Ext.locale.ru.picker){Ext.locale.ru.picker={}}if(!Ext.locale.ru.tab){Ext.locale.ru.tab={}}if(!Ext.locale.ru.toolbar){Ext.locale.ru.toolbar={}}if(!Ext.locale.ru.view){Ext.locale.ru.view={}}if(!Ext.locale.ru.window){Ext.locale.ru.window={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.app.domain){Ext.overrides.app.domain={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.plugin){Ext.overrides.plugin={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.picker){Ext.picker={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.state){Ext.state={}}if(!Ext.tab){Ext.tab={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.neptune.form){Ext.theme.neptune.form={}}if(!Ext.theme.neptune.form.field){Ext.theme.neptune.form.field={}}if(!Ext.theme.neptune.layout){Ext.theme.neptune.layout={}}if(!Ext.theme.neptune.layout.component){Ext.theme.neptune.layout.component={}}if(!Ext.theme.neptune.menu){Ext.theme.neptune.menu={}}if(!Ext.theme.neptune.panel){Ext.theme.neptune.panel={}}if(!Ext.theme.neptune.picker){Ext.theme.neptune.picker={}}if(!Ext.theme.neptune.resizer){Ext.theme.neptune.resizer={}}if(!Ext.theme.neptune.toolbar){Ext.theme.neptune.toolbar={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.tree){Ext.tree={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.layout){Ext.ux.layout={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var FBEditor=FBEditor||{};if(!FBEditor.FB3){FBEditor.FB3={}}if(!FBEditor.FB3.rels){FBEditor.FB3.rels={}}if(!FBEditor.command){FBEditor.command={}}if(!FBEditor.converter){FBEditor.converter={}}if(!FBEditor.converter.contentTypes){FBEditor.converter.contentTypes={}}if(!FBEditor.converter.desc){FBEditor.converter.desc={}}if(!FBEditor.desc){FBEditor.desc={}}if(!FBEditor.editor){FBEditor.editor={}}if(!FBEditor.editor.command){FBEditor.editor.command={}}if(!FBEditor.editor.command.a){FBEditor.editor.command.a={}}if(!FBEditor.editor.command.annotation){FBEditor.editor.command.annotation={}}if(!FBEditor.editor.command.blockquote){FBEditor.editor.command.blockquote={}}if(!FBEditor.editor.command.br){FBEditor.editor.command.br={}}if(!FBEditor.editor.command.code){FBEditor.editor.command.code={}}if(!FBEditor.editor.command.div){FBEditor.editor.command.div={}}if(!FBEditor.editor.command.em){FBEditor.editor.command.em={}}if(!FBEditor.editor.command.epigraph){FBEditor.editor.command.epigraph={}}if(!FBEditor.editor.command.img){FBEditor.editor.command.img={}}if(!FBEditor.editor.command.li){FBEditor.editor.command.li={}}if(!FBEditor.editor.command.note){FBEditor.editor.command.note={}}if(!FBEditor.editor.command.notebody){FBEditor.editor.command.notebody={}}if(!FBEditor.editor.command.notes){FBEditor.editor.command.notes={}}if(!FBEditor.editor.command.ol){FBEditor.editor.command.ol={}}if(!FBEditor.editor.command.p){FBEditor.editor.command.p={}}if(!FBEditor.editor.command.poem){FBEditor.editor.command.poem={}}if(!FBEditor.editor.command.pre){FBEditor.editor.command.pre={}}if(!FBEditor.editor.command.section){FBEditor.editor.command.section={}}if(!FBEditor.editor.command.smallcaps){FBEditor.editor.command.smallcaps={}}if(!FBEditor.editor.command.spacing){FBEditor.editor.command.spacing={}}if(!FBEditor.editor.command.span){FBEditor.editor.command.span={}}if(!FBEditor.editor.command.stanza){FBEditor.editor.command.stanza={}}if(!FBEditor.editor.command.strikethrough){FBEditor.editor.command.strikethrough={}}if(!FBEditor.editor.command.strong){FBEditor.editor.command.strong={}}if(!FBEditor.editor.command.styleholder){FBEditor.editor.command.styleholder={}}if(!FBEditor.editor.command.sub){FBEditor.editor.command.sub={}}if(!FBEditor.editor.command.subscription){FBEditor.editor.command.subscription={}}if(!FBEditor.editor.command.subtitle){FBEditor.editor.command.subtitle={}}if(!FBEditor.editor.command.sup){FBEditor.editor.command.sup={}}if(!FBEditor.editor.command.table){FBEditor.editor.command.table={}}if(!FBEditor.editor.command.text){FBEditor.editor.command.text={}}if(!FBEditor.editor.command.title){FBEditor.editor.command.title={}}if(!FBEditor.editor.command.ul){FBEditor.editor.command.ul={}}if(!FBEditor.editor.command.underline){FBEditor.editor.command.underline={}}if(!FBEditor.editor.cutproxy){FBEditor.editor.cutproxy={}}if(!FBEditor.editor.element){FBEditor.editor.element={}}if(!FBEditor.editor.element.a){FBEditor.editor.element.a={}}if(!FBEditor.editor.element.annotation){FBEditor.editor.element.annotation={}}if(!FBEditor.editor.element.b){FBEditor.editor.element.b={}}if(!FBEditor.editor.element.blockquote){FBEditor.editor.element.blockquote={}}if(!FBEditor.editor.element.body){FBEditor.editor.element.body={}}if(!FBEditor.editor.element.br){FBEditor.editor.element.br={}}if(!FBEditor.editor.element.clipped){FBEditor.editor.element.clipped={}}if(!FBEditor.editor.element.code){FBEditor.editor.element.code={}}if(!FBEditor.editor.element.desc){FBEditor.editor.element.desc={}}if(!FBEditor.editor.element.desc.annotation){FBEditor.editor.element.desc.annotation={}}if(!FBEditor.editor.element.desc.bibliodescription){FBEditor.editor.element.desc.bibliodescription={}}if(!FBEditor.editor.element.desc.history){FBEditor.editor.element.desc.history={}}if(!FBEditor.editor.element.desc.preamble){FBEditor.editor.element.desc.preamble={}}if(!FBEditor.editor.element.div){FBEditor.editor.element.div={}}if(!FBEditor.editor.element.em){FBEditor.editor.element.em={}}if(!FBEditor.editor.element.epigraph){FBEditor.editor.element.epigraph={}}if(!FBEditor.editor.element.fb3body){FBEditor.editor.element.fb3body={}}if(!FBEditor.editor.element.header){FBEditor.editor.element.header={}}if(!FBEditor.editor.element.i){FBEditor.editor.element.i={}}if(!FBEditor.editor.element.img){FBEditor.editor.element.img={}}if(!FBEditor.editor.element.li){FBEditor.editor.element.li={}}if(!FBEditor.editor.element.marker){FBEditor.editor.element.marker={}}if(!FBEditor.editor.element.marker.img){FBEditor.editor.element.marker.img={}}if(!FBEditor.editor.element.note){FBEditor.editor.element.note={}}if(!FBEditor.editor.element.notebody){FBEditor.editor.element.notebody={}}if(!FBEditor.editor.element.notes){FBEditor.editor.element.notes={}}if(!FBEditor.editor.element.ol){FBEditor.editor.element.ol={}}if(!FBEditor.editor.element.p){FBEditor.editor.element.p={}}if(!FBEditor.editor.element.paperpagebreak){FBEditor.editor.element.paperpagebreak={}}if(!FBEditor.editor.element.poem){FBEditor.editor.element.poem={}}if(!FBEditor.editor.element.pre){FBEditor.editor.element.pre={}}if(!FBEditor.editor.element.root){FBEditor.editor.element.root={}}if(!FBEditor.editor.element.section){FBEditor.editor.element.section={}}if(!FBEditor.editor.element.smallcaps){FBEditor.editor.element.smallcaps={}}if(!FBEditor.editor.element.spacing){FBEditor.editor.element.spacing={}}if(!FBEditor.editor.element.span){FBEditor.editor.element.span={}}if(!FBEditor.editor.element.stanza){FBEditor.editor.element.stanza={}}if(!FBEditor.editor.element.strikethrough){FBEditor.editor.element.strikethrough={}}if(!FBEditor.editor.element.strong){FBEditor.editor.element.strong={}}if(!FBEditor.editor.element.sub){FBEditor.editor.element.sub={}}if(!FBEditor.editor.element.subscription){FBEditor.editor.element.subscription={}}if(!FBEditor.editor.element.subtitle){FBEditor.editor.element.subtitle={}}if(!FBEditor.editor.element.sup){FBEditor.editor.element.sup={}}if(!FBEditor.editor.element.table){FBEditor.editor.element.table={}}if(!FBEditor.editor.element.td){FBEditor.editor.element.td={}}if(!FBEditor.editor.element.text){FBEditor.editor.element.text={}}if(!FBEditor.editor.element.th){FBEditor.editor.element.th={}}if(!FBEditor.editor.element.title){FBEditor.editor.element.title={}}if(!FBEditor.editor.element.tr){FBEditor.editor.element.tr={}}if(!FBEditor.editor.element.u){FBEditor.editor.element.u={}}if(!FBEditor.editor.element.ul){FBEditor.editor.element.ul={}}if(!FBEditor.editor.element.undefined){FBEditor.editor.element.undefined={}}if(!FBEditor.editor.element.underline){FBEditor.editor.element.underline={}}if(!FBEditor.editor.helper){FBEditor.editor.helper={}}if(!FBEditor.editor.helper.element){FBEditor.editor.helper.element={}}if(!FBEditor.editor.pasteproxy){FBEditor.editor.pasteproxy={}}if(!FBEditor.editor.pasteproxy.dom){FBEditor.editor.pasteproxy.dom={}}if(!FBEditor.editor.pasteproxy.model){FBEditor.editor.pasteproxy.model={}}if(!FBEditor.editor.schema){FBEditor.editor.schema={}}if(!FBEditor.editor.selection){FBEditor.editor.selection={}}if(!FBEditor.editor.view){FBEditor.editor.view={}}if(!FBEditor.editor.view.toolbar){FBEditor.editor.view.toolbar={}}if(!FBEditor.editor.view.toolbar.button){FBEditor.editor.view.toolbar.button={}}if(!FBEditor.editor.view.toolbar.button.a){FBEditor.editor.view.toolbar.button.a={}}if(!FBEditor.editor.view.toolbar.button.em){FBEditor.editor.view.toolbar.button.em={}}if(!FBEditor.editor.view.toolbar.button.strong){FBEditor.editor.view.toolbar.button.strong={}}if(!FBEditor.editor.view.toolbar.button.unstyle){FBEditor.editor.view.toolbar.button.unstyle={}}if(!FBEditor.editor.view.viewport){FBEditor.editor.view.viewport={}}if(!FBEditor.file){FBEditor.file={}}if(!FBEditor.file.event){FBEditor.file.event={}}if(!FBEditor.hotkeys){FBEditor.hotkeys={}}if(!FBEditor.model){FBEditor.model={}}if(!FBEditor.model.resource){FBEditor.model.resource={}}if(!FBEditor.override){FBEditor.override={}}if(!FBEditor.override.form){FBEditor.override.form={}}if(!FBEditor.override.form.field){FBEditor.override.form.field={}}if(!FBEditor.override.panel){FBEditor.override.panel={}}if(!FBEditor.override.picker){FBEditor.override.picker={}}if(!FBEditor.override.tree){FBEditor.override.tree={}}if(!FBEditor.resource){FBEditor.resource={}}if(!FBEditor.resource.data){FBEditor.resource.data={}}if(!FBEditor.resource.replacer){FBEditor.resource.replacer={}}if(!FBEditor.resource.replacer.button){FBEditor.resource.replacer.button={}}if(!FBEditor.resource.replacer.button.cancel){FBEditor.resource.replacer.button.cancel={}}if(!FBEditor.resource.replacer.button.rename){FBEditor.resource.replacer.button.rename={}}if(!FBEditor.resource.replacer.button.replace){FBEditor.resource.replacer.button.replace={}}if(!FBEditor.route){FBEditor.route={}}if(!FBEditor.scroll){FBEditor.scroll={}}if(!FBEditor.store){FBEditor.store={}}if(!FBEditor.store.resource){FBEditor.store.resource={}}if(!FBEditor.util){FBEditor.util={}}if(!FBEditor.util.xml){FBEditor.util.xml={}}if(!FBEditor.ux){FBEditor.ux={}}if(!FBEditor.view){FBEditor.view={}}if(!FBEditor.view.button){FBEditor.view.button={}}if(!FBEditor.view.button.editor){FBEditor.view.button.editor={}}if(!FBEditor.view.button.resource){FBEditor.view.button.resource={}}if(!FBEditor.view.field){FBEditor.view.field={}}if(!FBEditor.view.field.country){FBEditor.view.field.country={}}if(!FBEditor.view.field.datetime){FBEditor.view.field.datetime={}}if(!FBEditor.view.field.lang){FBEditor.view.field.lang={}}if(!FBEditor.view.field.textfieldclear){FBEditor.view.field.textfieldclear={}}if(!FBEditor.view.form){FBEditor.view.form={}}if(!FBEditor.view.form.desc){FBEditor.view.form.desc={}}if(!FBEditor.view.form.desc.annotation){FBEditor.view.form.desc.annotation={}}if(!FBEditor.view.form.desc.bookClass){FBEditor.view.form.desc.bookClass={}}if(!FBEditor.view.form.desc.classification){FBEditor.view.form.desc.classification={}}if(!FBEditor.view.form.desc.classification.bbk){FBEditor.view.form.desc.classification.bbk={}}if(!FBEditor.view.form.desc.classification.bbk.field){FBEditor.view.form.desc.classification.bbk.field={}}if(!FBEditor.view.form.desc.classification.setting){FBEditor.view.form.desc.classification.setting={}}if(!FBEditor.view.form.desc.classification.target){FBEditor.view.form.desc.classification.target={}}if(!FBEditor.view.form.desc.classification.target.ageMin){FBEditor.view.form.desc.classification.target.ageMin={}}if(!FBEditor.view.form.desc.classification.udc){FBEditor.view.form.desc.classification.udc={}}if(!FBEditor.view.form.desc.classification.udc.field){FBEditor.view.form.desc.classification.udc.field={}}if(!FBEditor.view.form.desc.customInfo){FBEditor.view.form.desc.customInfo={}}if(!FBEditor.view.form.desc.date){FBEditor.view.form.desc.date={}}if(!FBEditor.view.form.desc.documentInfo){FBEditor.view.form.desc.documentInfo={}}if(!FBEditor.view.form.desc.documentInfo.createdDate){FBEditor.view.form.desc.documentInfo.createdDate={}}if(!FBEditor.view.form.desc.documentInfo.editor){FBEditor.view.form.desc.documentInfo.editor={}}if(!FBEditor.view.form.desc.documentInfo.isbn){FBEditor.view.form.desc.documentInfo.isbn={}}if(!FBEditor.view.form.desc.editor){FBEditor.view.form.desc.editor={}}if(!FBEditor.view.form.desc.editor.body){FBEditor.view.form.desc.editor.body={}}if(!FBEditor.view.form.desc.editor.command){FBEditor.view.form.desc.editor.command={}}if(!FBEditor.view.form.desc.editor.toolbar){FBEditor.view.form.desc.editor.toolbar={}}if(!FBEditor.view.form.desc.editor.toolbar.button){FBEditor.view.form.desc.editor.toolbar.button={}}if(!FBEditor.view.form.desc.editor.toolbar.button.cleaner){FBEditor.view.form.desc.editor.toolbar.button.cleaner={}}if(!FBEditor.view.form.desc.field){FBEditor.view.form.desc.field={}}if(!FBEditor.view.form.desc.field.combobox){FBEditor.view.form.desc.field.combobox={}}if(!FBEditor.view.form.desc.field.combobox.required){FBEditor.view.form.desc.field.combobox.required={}}if(!FBEditor.view.form.desc.field.link){FBEditor.view.form.desc.field.link={}}if(!FBEditor.view.form.desc.field.link.uuid){FBEditor.view.form.desc.field.link.uuid={}}if(!FBEditor.view.form.desc.field.number){FBEditor.view.form.desc.field.number={}}if(!FBEditor.view.form.desc.field.number.required){FBEditor.view.form.desc.field.number.required={}}if(!FBEditor.view.form.desc.field.text){FBEditor.view.form.desc.field.text={}}if(!FBEditor.view.form.desc.field.text.required){FBEditor.view.form.desc.field.text.required={}}if(!FBEditor.view.form.desc.field.textarea){FBEditor.view.form.desc.field.textarea={}}if(!FBEditor.view.form.desc.field.textarea.required){FBEditor.view.form.desc.field.textarea.required={}}if(!FBEditor.view.form.desc.field.time){FBEditor.view.form.desc.field.time={}}if(!FBEditor.view.form.desc.field.time.required){FBEditor.view.form.desc.field.time.required={}}if(!FBEditor.view.form.desc.fieldset){FBEditor.view.form.desc.fieldset={}}if(!FBEditor.view.form.desc.fieldset.annotation){FBEditor.view.form.desc.fieldset.annotation={}}if(!FBEditor.view.form.desc.fieldset.history){FBEditor.view.form.desc.fieldset.history={}}if(!FBEditor.view.form.desc.fieldset.periodical){FBEditor.view.form.desc.fieldset.periodical={}}if(!FBEditor.view.form.desc.fieldset.preamble){FBEditor.view.form.desc.fieldset.preamble={}}if(!FBEditor.view.form.desc.fieldset.publishInfo){FBEditor.view.form.desc.fieldset.publishInfo={}}if(!FBEditor.view.form.desc.history){FBEditor.view.form.desc.history={}}if(!FBEditor.view.form.desc.isbn){FBEditor.view.form.desc.isbn={}}if(!FBEditor.view.form.desc.periodical){FBEditor.view.form.desc.periodical={}}if(!FBEditor.view.form.desc.preamble){FBEditor.view.form.desc.preamble={}}if(!FBEditor.view.form.desc.publishInfo){FBEditor.view.form.desc.publishInfo={}}if(!FBEditor.view.form.desc.publishInfo.biblio){FBEditor.view.form.desc.publishInfo.biblio={}}if(!FBEditor.view.form.desc.publishInfo.isbn){FBEditor.view.form.desc.publishInfo.isbn={}}if(!FBEditor.view.form.desc.publishInfo.item){FBEditor.view.form.desc.publishInfo.item={}}if(!FBEditor.view.form.desc.publishInfo.sequence){FBEditor.view.form.desc.publishInfo.sequence={}}if(!FBEditor.view.form.desc.publishInfo.title){FBEditor.view.form.desc.publishInfo.title={}}if(!FBEditor.view.form.desc.relations){FBEditor.view.form.desc.relations={}}if(!FBEditor.view.form.desc.relations.object){FBEditor.view.form.desc.relations.object={}}if(!FBEditor.view.form.desc.relations.object.item){FBEditor.view.form.desc.relations.object.item={}}if(!FBEditor.view.form.desc.relations.subject){FBEditor.view.form.desc.relations.subject={}}if(!FBEditor.view.form.desc.relations.subject.custom){FBEditor.view.form.desc.relations.subject.custom={}}if(!FBEditor.view.form.desc.relations.subject.custom.editor){FBEditor.view.form.desc.relations.subject.custom.editor={}}if(!FBEditor.view.form.desc.relations.subject.custom.editor.uuid){FBEditor.view.form.desc.relations.subject.custom.editor.uuid={}}if(!FBEditor.view.form.desc.relations.subject.custom.viewer){FBEditor.view.form.desc.relations.subject.custom.viewer={}}if(!FBEditor.view.form.desc.relations.subject.custom.viewer.link){FBEditor.view.form.desc.relations.subject.custom.viewer.link={}}if(!FBEditor.view.form.desc.relations.subject.custom.viewer.switcher){FBEditor.view.form.desc.relations.subject.custom.viewer.switcher={}}if(!FBEditor.view.form.desc.relations.subject.custom.viewer.title){FBEditor.view.form.desc.relations.subject.custom.viewer.title={}}if(!FBEditor.view.form.desc.relations.subject.item){FBEditor.view.form.desc.relations.subject.item={}}if(!FBEditor.view.form.desc.relations.subject.name){FBEditor.view.form.desc.relations.subject.name={}}if(!FBEditor.view.form.desc.relations.subject.name.main){FBEditor.view.form.desc.relations.subject.name.main={}}if(!FBEditor.view.form.desc.relations.subject.radio){FBEditor.view.form.desc.relations.subject.radio={}}if(!FBEditor.view.form.desc.relations.subject.title){FBEditor.view.form.desc.relations.subject.title={}}if(!FBEditor.view.form.desc.sequence){FBEditor.view.form.desc.sequence={}}if(!FBEditor.view.form.desc.sequence.item){FBEditor.view.form.desc.sequence.item={}}if(!FBEditor.view.form.desc.subject){FBEditor.view.form.desc.subject={}}if(!FBEditor.view.form.desc.subject.field){FBEditor.view.form.desc.subject.field={}}if(!FBEditor.view.form.desc.title){FBEditor.view.form.desc.title={}}if(!FBEditor.view.form.desc.title.alt){FBEditor.view.form.desc.title.alt={}}if(!FBEditor.view.form.desc.titleArt){FBEditor.view.form.desc.titleArt={}}if(!FBEditor.view.form.desc.written){FBEditor.view.form.desc.written={}}if(!FBEditor.view.form.desc.written.date){FBEditor.view.form.desc.written.date={}}if(!FBEditor.view.form.desc.written.date.date){FBEditor.view.form.desc.written.date.date={}}if(!FBEditor.view.form.desc.written.date.publicated){FBEditor.view.form.desc.written.date.publicated={}}if(!FBEditor.view.form.desc.written.date.translated){FBEditor.view.form.desc.written.date.translated={}}if(!FBEditor.view.image){FBEditor.view.image={}}if(!FBEditor.view.image.editor){FBEditor.view.image.editor={}}if(!FBEditor.view.main){FBEditor.view.main={}}if(!FBEditor.view.panel){FBEditor.view.panel={}}if(!FBEditor.view.panel.cover){FBEditor.view.panel.cover={}}if(!FBEditor.view.panel.cover.picture){FBEditor.view.panel.cover.picture={}}if(!FBEditor.view.panel.empty){FBEditor.view.panel.empty={}}if(!FBEditor.view.panel.filename){FBEditor.view.panel.filename={}}if(!FBEditor.view.panel.filename.display){FBEditor.view.panel.filename.display={}}if(!FBEditor.view.panel.filename.field){FBEditor.view.panel.filename.field={}}if(!FBEditor.view.panel.main){FBEditor.view.panel.main={}}if(!FBEditor.view.panel.main.content){FBEditor.view.panel.main.content={}}if(!FBEditor.view.panel.main.editor){FBEditor.view.panel.main.editor={}}if(!FBEditor.view.panel.main.editor.button){FBEditor.view.panel.main.editor.button={}}if(!FBEditor.view.panel.main.editor.button.a){FBEditor.view.panel.main.editor.button.a={}}if(!FBEditor.view.panel.main.editor.button.annotation){FBEditor.view.panel.main.editor.button.annotation={}}if(!FBEditor.view.panel.main.editor.button.blockquote){FBEditor.view.panel.main.editor.button.blockquote={}}if(!FBEditor.view.panel.main.editor.button.code){FBEditor.view.panel.main.editor.button.code={}}if(!FBEditor.view.panel.main.editor.button.div){FBEditor.view.panel.main.editor.button.div={}}if(!FBEditor.view.panel.main.editor.button.em){FBEditor.view.panel.main.editor.button.em={}}if(!FBEditor.view.panel.main.editor.button.epigraph){FBEditor.view.panel.main.editor.button.epigraph={}}if(!FBEditor.view.panel.main.editor.button.img){FBEditor.view.panel.main.editor.button.img={}}if(!FBEditor.view.panel.main.editor.button.note){FBEditor.view.panel.main.editor.button.note={}}if(!FBEditor.view.panel.main.editor.button.notebody){FBEditor.view.panel.main.editor.button.notebody={}}if(!FBEditor.view.panel.main.editor.button.notes){FBEditor.view.panel.main.editor.button.notes={}}if(!FBEditor.view.panel.main.editor.button.ol){FBEditor.view.panel.main.editor.button.ol={}}if(!FBEditor.view.panel.main.editor.button.poem){FBEditor.view.panel.main.editor.button.poem={}}if(!FBEditor.view.panel.main.editor.button.pre){FBEditor.view.panel.main.editor.button.pre={}}if(!FBEditor.view.panel.main.editor.button.section){FBEditor.view.panel.main.editor.button.section={}}if(!FBEditor.view.panel.main.editor.button.smallcaps){FBEditor.view.panel.main.editor.button.smallcaps={}}if(!FBEditor.view.panel.main.editor.button.spacing){FBEditor.view.panel.main.editor.button.spacing={}}if(!FBEditor.view.panel.main.editor.button.span){FBEditor.view.panel.main.editor.button.span={}}if(!FBEditor.view.panel.main.editor.button.splitelement){FBEditor.view.panel.main.editor.button.splitelement={}}if(!FBEditor.view.panel.main.editor.button.splitsection){FBEditor.view.panel.main.editor.button.splitsection={}}if(!FBEditor.view.panel.main.editor.button.strikethrough){FBEditor.view.panel.main.editor.button.strikethrough={}}if(!FBEditor.view.panel.main.editor.button.strong){FBEditor.view.panel.main.editor.button.strong={}}if(!FBEditor.view.panel.main.editor.button.sub){FBEditor.view.panel.main.editor.button.sub={}}if(!FBEditor.view.panel.main.editor.button.subscription){FBEditor.view.panel.main.editor.button.subscription={}}if(!FBEditor.view.panel.main.editor.button.subtitle){FBEditor.view.panel.main.editor.button.subtitle={}}if(!FBEditor.view.panel.main.editor.button.sup){FBEditor.view.panel.main.editor.button.sup={}}if(!FBEditor.view.panel.main.editor.button.table){FBEditor.view.panel.main.editor.button.table={}}if(!FBEditor.view.panel.main.editor.button.table.menu){FBEditor.view.panel.main.editor.button.table.menu={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item){FBEditor.view.panel.main.editor.button.table.menu.item={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.delCol){FBEditor.view.panel.main.editor.button.table.menu.item.delCol={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.delRow){FBEditor.view.panel.main.editor.button.table.menu.item.delRow={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.delTable){FBEditor.view.panel.main.editor.button.table.menu.item.delTable={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext){FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev){FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext){FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev){FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertTable){FBEditor.view.panel.main.editor.button.table.menu.item.insertTable={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.joinCells){FBEditor.view.panel.main.editor.button.table.menu.item.joinCells={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.splitCells){FBEditor.view.panel.main.editor.button.table.menu.item.splitCells={}}if(!FBEditor.view.panel.main.editor.button.table.menu.size){FBEditor.view.panel.main.editor.button.table.menu.size={}}if(!FBEditor.view.panel.main.editor.button.title){FBEditor.view.panel.main.editor.button.title={}}if(!FBEditor.view.panel.main.editor.button.titlebody){FBEditor.view.panel.main.editor.button.titlebody={}}if(!FBEditor.view.panel.main.editor.button.ul){FBEditor.view.panel.main.editor.button.ul={}}if(!FBEditor.view.panel.main.editor.button.underline){FBEditor.view.panel.main.editor.button.underline={}}if(!FBEditor.view.panel.main.editor.button.unstyle){FBEditor.view.panel.main.editor.button.unstyle={}}if(!FBEditor.view.panel.main.editor.toolbar){FBEditor.view.panel.main.editor.toolbar={}}if(!FBEditor.view.panel.main.editor.toolbar.responsive){FBEditor.view.panel.main.editor.toolbar.responsive={}}if(!FBEditor.view.panel.main.editor.toolbar.responsive.button){FBEditor.view.panel.main.editor.toolbar.responsive.button={}}if(!FBEditor.view.panel.main.editor.toolbar.responsive.panel){FBEditor.view.panel.main.editor.toolbar.responsive.panel={}}if(!FBEditor.view.panel.main.editor.viewport){FBEditor.view.panel.main.editor.viewport={}}if(!FBEditor.view.panel.main.navigation){FBEditor.view.panel.main.navigation={}}if(!FBEditor.view.panel.main.navigation.section){FBEditor.view.panel.main.navigation.section={}}if(!FBEditor.view.panel.main.navigation.section.button){FBEditor.view.panel.main.navigation.section.button={}}if(!FBEditor.view.panel.main.navigation.section.button.left){FBEditor.view.panel.main.navigation.section.button.left={}}if(!FBEditor.view.panel.main.navigation.section.button.right){FBEditor.view.panel.main.navigation.section.button.right={}}if(!FBEditor.view.panel.main.props){FBEditor.view.panel.main.props={}}if(!FBEditor.view.panel.main.props.body){FBEditor.view.panel.main.props.body={}}if(!FBEditor.view.panel.main.props.body.editor){FBEditor.view.panel.main.props.body.editor={}}if(!FBEditor.view.panel.main.props.body.editor.a){FBEditor.view.panel.main.props.body.editor.a={}}if(!FBEditor.view.panel.main.props.body.editor.annotation){FBEditor.view.panel.main.props.body.editor.annotation={}}if(!FBEditor.view.panel.main.props.body.editor.blockquote){FBEditor.view.panel.main.props.body.editor.blockquote={}}if(!FBEditor.view.panel.main.props.body.editor.clipped){FBEditor.view.panel.main.props.body.editor.clipped={}}if(!FBEditor.view.panel.main.props.body.editor.code){FBEditor.view.panel.main.props.body.editor.code={}}if(!FBEditor.view.panel.main.props.body.editor.div){FBEditor.view.panel.main.props.body.editor.div={}}if(!FBEditor.view.panel.main.props.body.editor.div.marker){FBEditor.view.panel.main.props.body.editor.div.marker={}}if(!FBEditor.view.panel.main.props.body.editor.div.marker.img){FBEditor.view.panel.main.props.body.editor.div.marker.img={}}if(!FBEditor.view.panel.main.props.body.editor.em){FBEditor.view.panel.main.props.body.editor.em={}}if(!FBEditor.view.panel.main.props.body.editor.epigraph){FBEditor.view.panel.main.props.body.editor.epigraph={}}if(!FBEditor.view.panel.main.props.body.editor.fb3body){FBEditor.view.panel.main.props.body.editor.fb3body={}}if(!FBEditor.view.panel.main.props.body.editor.fields){FBEditor.view.panel.main.props.body.editor.fields={}}if(!FBEditor.view.panel.main.props.body.editor.fields.id){FBEditor.view.panel.main.props.body.editor.fields.id={}}if(!FBEditor.view.panel.main.props.body.editor.fields.sizeselect){FBEditor.view.panel.main.props.body.editor.fields.sizeselect={}}if(!FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input){FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input={}}if(!FBEditor.view.panel.main.props.body.editor.img){FBEditor.view.panel.main.props.body.editor.img={}}if(!FBEditor.view.panel.main.props.body.editor.img.picture){FBEditor.view.panel.main.props.body.editor.img.picture={}}if(!FBEditor.view.panel.main.props.body.editor.li){FBEditor.view.panel.main.props.body.editor.li={}}if(!FBEditor.view.panel.main.props.body.editor.note){FBEditor.view.panel.main.props.body.editor.note={}}if(!FBEditor.view.panel.main.props.body.editor.notebody){FBEditor.view.panel.main.props.body.editor.notebody={}}if(!FBEditor.view.panel.main.props.body.editor.notes){FBEditor.view.panel.main.props.body.editor.notes={}}if(!FBEditor.view.panel.main.props.body.editor.ol){FBEditor.view.panel.main.props.body.editor.ol={}}if(!FBEditor.view.panel.main.props.body.editor.p){FBEditor.view.panel.main.props.body.editor.p={}}if(!FBEditor.view.panel.main.props.body.editor.paperpagebreak){FBEditor.view.panel.main.props.body.editor.paperpagebreak={}}if(!FBEditor.view.panel.main.props.body.editor.poem){FBEditor.view.panel.main.props.body.editor.poem={}}if(!FBEditor.view.panel.main.props.body.editor.pre){FBEditor.view.panel.main.props.body.editor.pre={}}if(!FBEditor.view.panel.main.props.body.editor.section){FBEditor.view.panel.main.props.body.editor.section={}}if(!FBEditor.view.panel.main.props.body.editor.smallcaps){FBEditor.view.panel.main.props.body.editor.smallcaps={}}if(!FBEditor.view.panel.main.props.body.editor.spacing){FBEditor.view.panel.main.props.body.editor.spacing={}}if(!FBEditor.view.panel.main.props.body.editor.span){FBEditor.view.panel.main.props.body.editor.span={}}if(!FBEditor.view.panel.main.props.body.editor.stanza){FBEditor.view.panel.main.props.body.editor.stanza={}}if(!FBEditor.view.panel.main.props.body.editor.strikethrough){FBEditor.view.panel.main.props.body.editor.strikethrough={}}if(!FBEditor.view.panel.main.props.body.editor.strong){FBEditor.view.panel.main.props.body.editor.strong={}}if(!FBEditor.view.panel.main.props.body.editor.sub){FBEditor.view.panel.main.props.body.editor.sub={}}if(!FBEditor.view.panel.main.props.body.editor.subscription){FBEditor.view.panel.main.props.body.editor.subscription={}}if(!FBEditor.view.panel.main.props.body.editor.subtitle){FBEditor.view.panel.main.props.body.editor.subtitle={}}if(!FBEditor.view.panel.main.props.body.editor.sup){FBEditor.view.panel.main.props.body.editor.sup={}}if(!FBEditor.view.panel.main.props.body.editor.table){FBEditor.view.panel.main.props.body.editor.table={}}if(!FBEditor.view.panel.main.props.body.editor.td){FBEditor.view.panel.main.props.body.editor.td={}}if(!FBEditor.view.panel.main.props.body.editor.th){FBEditor.view.panel.main.props.body.editor.th={}}if(!FBEditor.view.panel.main.props.body.editor.title){FBEditor.view.panel.main.props.body.editor.title={}}if(!FBEditor.view.panel.main.props.body.editor.tr){FBEditor.view.panel.main.props.body.editor.tr={}}if(!FBEditor.view.panel.main.props.body.editor.ul){FBEditor.view.panel.main.props.body.editor.ul={}}if(!FBEditor.view.panel.main.props.body.editor.underline){FBEditor.view.panel.main.props.body.editor.underline={}}if(!FBEditor.view.panel.main.props.body.path){FBEditor.view.panel.main.props.body.path={}}if(!FBEditor.view.panel.main.props.body.path.edit){FBEditor.view.panel.main.props.body.path.edit={}}if(!FBEditor.view.panel.main.props.body.path.el){FBEditor.view.panel.main.props.body.path.el={}}if(!FBEditor.view.panel.main.props.desc){FBEditor.view.panel.main.props.desc={}}if(!FBEditor.view.panel.main.props.desc.editor){FBEditor.view.panel.main.props.desc.editor={}}if(!FBEditor.view.panel.main.props.desc.editor.a){FBEditor.view.panel.main.props.desc.editor.a={}}if(!FBEditor.view.panel.main.props.desc.editor.annotation){FBEditor.view.panel.main.props.desc.editor.annotation={}}if(!FBEditor.view.panel.main.props.desc.editor.bibliodescription){FBEditor.view.panel.main.props.desc.editor.bibliodescription={}}if(!FBEditor.view.panel.main.props.desc.editor.em){FBEditor.view.panel.main.props.desc.editor.em={}}if(!FBEditor.view.panel.main.props.desc.editor.history){FBEditor.view.panel.main.props.desc.editor.history={}}if(!FBEditor.view.panel.main.props.desc.editor.p){FBEditor.view.panel.main.props.desc.editor.p={}}if(!FBEditor.view.panel.main.props.desc.editor.preamble){FBEditor.view.panel.main.props.desc.editor.preamble={}}if(!FBEditor.view.panel.main.props.desc.editor.strong){FBEditor.view.panel.main.props.desc.editor.strong={}}if(!FBEditor.view.panel.main.props.resources){FBEditor.view.panel.main.props.resources={}}if(!FBEditor.view.panel.main.props.xml){FBEditor.view.panel.main.props.xml={}}if(!FBEditor.view.panel.main.tools){FBEditor.view.panel.main.tools={}}if(!FBEditor.view.panel.main.xml){FBEditor.view.panel.main.xml={}}if(!FBEditor.view.panel.main.xml.proxy){FBEditor.view.panel.main.xml.proxy={}}if(!FBEditor.view.panel.main.xml.proxy.search){FBEditor.view.panel.main.xml.proxy.search={}}if(!FBEditor.view.panel.main.xml.search){FBEditor.view.panel.main.xml.search={}}if(!FBEditor.view.panel.main.xml.search.close){FBEditor.view.panel.main.xml.search.close={}}if(!FBEditor.view.panel.main.xml.search.find){FBEditor.view.panel.main.xml.search.find={}}if(!FBEditor.view.panel.main.xml.search.find.count){FBEditor.view.panel.main.xml.search.find.count={}}if(!FBEditor.view.panel.main.xml.search.find.findNext){FBEditor.view.panel.main.xml.search.find.findNext={}}if(!FBEditor.view.panel.main.xml.search.find.findPrev){FBEditor.view.panel.main.xml.search.find.findPrev={}}if(!FBEditor.view.panel.main.xml.search.find.ignoreCase){FBEditor.view.panel.main.xml.search.find.ignoreCase={}}if(!FBEditor.view.panel.main.xml.search.find.regex){FBEditor.view.panel.main.xml.search.find.regex={}}if(!FBEditor.view.panel.main.xml.search.find.textfield){FBEditor.view.panel.main.xml.search.find.textfield={}}if(!FBEditor.view.panel.main.xml.search.find.words){FBEditor.view.panel.main.xml.search.find.words={}}if(!FBEditor.view.panel.main.xml.search.replace){FBEditor.view.panel.main.xml.search.replace={}}if(!FBEditor.view.panel.main.xml.search.replace.all){FBEditor.view.panel.main.xml.search.replace.all={}}if(!FBEditor.view.panel.main.xml.search.replace.current){FBEditor.view.panel.main.xml.search.replace.current={}}if(!FBEditor.view.panel.main.xml.search.replace.textfield){FBEditor.view.panel.main.xml.search.replace.textfield={}}if(!FBEditor.view.panel.resources){FBEditor.view.panel.resources={}}if(!FBEditor.view.panel.resources.control){FBEditor.view.panel.resources.control={}}if(!FBEditor.view.panel.resources.control.selectview){FBEditor.view.panel.resources.control.selectview={}}if(!FBEditor.view.panel.resources.navigation){FBEditor.view.panel.resources.navigation={}}if(!FBEditor.view.panel.resources.tpl){FBEditor.view.panel.resources.tpl={}}if(!FBEditor.view.panel.resources.view){FBEditor.view.panel.resources.view={}}if(!FBEditor.view.panel.toolstab){FBEditor.view.panel.toolstab={}}if(!FBEditor.view.panel.toolstab.file){FBEditor.view.panel.toolstab.file={}}if(!FBEditor.view.panel.toolstab.file.button){FBEditor.view.panel.toolstab.file.button={}}if(!FBEditor.view.panel.toolstab.file.button.open){FBEditor.view.panel.toolstab.file.button.open={}}if(!FBEditor.view.panel.toolstab.file.button.saveas){FBEditor.view.panel.toolstab.file.button.saveas={}}if(!FBEditor.view.panel.toolstab.main){FBEditor.view.panel.toolstab.main={}}if(!FBEditor.view.panel.toolstab.tools){FBEditor.view.panel.toolstab.tools={}}if(!FBEditor.view.panel.toolstab.tools.button){FBEditor.view.panel.toolstab.tools.button={}}if(!FBEditor.view.panel.toolstab.tools.button.hotkeys){FBEditor.view.panel.toolstab.tools.button.hotkeys={}}if(!FBEditor.view.panel.toolstab.tools.button.unprintsymbols){FBEditor.view.panel.toolstab.tools.button.unprintsymbols={}}if(!FBEditor.view.panel.toolstab.tools.button.xmlwordwrap){FBEditor.view.panel.toolstab.tools.button.xmlwordwrap={}}if(!FBEditor.view.panel.toolstab.view){FBEditor.view.panel.toolstab.view={}}if(!FBEditor.view.panel.toolstab.view.button){FBEditor.view.panel.toolstab.view.button={}}if(!FBEditor.view.panel.toolstab.view.button.focusdetachpanels){FBEditor.view.panel.toolstab.view.button.focusdetachpanels={}}if(!FBEditor.view.panel.toolstab.view.button.split){FBEditor.view.panel.toolstab.view.button.split={}}if(!FBEditor.view.panel.treenavigation){FBEditor.view.panel.treenavigation={}}if(!FBEditor.view.panel.treenavigation.body){FBEditor.view.panel.treenavigation.body={}}if(!FBEditor.view.panel.treenavigation.desc){FBEditor.view.panel.treenavigation.desc={}}if(!FBEditor.view.panel.treenavigation.xml){FBEditor.view.panel.treenavigation.xml={}}if(!FBEditor.view.window){FBEditor.view.window={}}if(!FBEditor.view.window.hotkeys){FBEditor.view.window.hotkeys={}}if(!FBEditor.view.window.hotkeys.slot){FBEditor.view.window.hotkeys.slot={}}if(!FBEditor.view.window.hotkeys.slot.a){FBEditor.view.window.hotkeys.slot.a={}}if(!FBEditor.view.window.hotkeys.slot.annotation){FBEditor.view.window.hotkeys.slot.annotation={}}if(!FBEditor.view.window.hotkeys.slot.blockquote){FBEditor.view.window.hotkeys.slot.blockquote={}}if(!FBEditor.view.window.hotkeys.slot.bold){FBEditor.view.window.hotkeys.slot.bold={}}if(!FBEditor.view.window.hotkeys.slot.code){FBEditor.view.window.hotkeys.slot.code={}}if(!FBEditor.view.window.hotkeys.slot.component){FBEditor.view.window.hotkeys.slot.component={}}if(!FBEditor.view.window.hotkeys.slot.component.keys){FBEditor.view.window.hotkeys.slot.component.keys={}}if(!FBEditor.view.window.hotkeys.slot.component.title){FBEditor.view.window.hotkeys.slot.component.title={}}if(!FBEditor.view.window.hotkeys.slot.div){FBEditor.view.window.hotkeys.slot.div={}}if(!FBEditor.view.window.hotkeys.slot.epigraph){FBEditor.view.window.hotkeys.slot.epigraph={}}if(!FBEditor.view.window.hotkeys.slot.img){FBEditor.view.window.hotkeys.slot.img={}}if(!FBEditor.view.window.hotkeys.slot.italic){FBEditor.view.window.hotkeys.slot.italic={}}if(!FBEditor.view.window.hotkeys.slot.note){FBEditor.view.window.hotkeys.slot.note={}}if(!FBEditor.view.window.hotkeys.slot.notebody){FBEditor.view.window.hotkeys.slot.notebody={}}if(!FBEditor.view.window.hotkeys.slot.notes){FBEditor.view.window.hotkeys.slot.notes={}}if(!FBEditor.view.window.hotkeys.slot.ol){FBEditor.view.window.hotkeys.slot.ol={}}if(!FBEditor.view.window.hotkeys.slot.pre){FBEditor.view.window.hotkeys.slot.pre={}}if(!FBEditor.view.window.hotkeys.slot.replace){FBEditor.view.window.hotkeys.slot.replace={}}if(!FBEditor.view.window.hotkeys.slot.search){FBEditor.view.window.hotkeys.slot.search={}}if(!FBEditor.view.window.hotkeys.slot.section){FBEditor.view.window.hotkeys.slot.section={}}if(!FBEditor.view.window.hotkeys.slot.smallcaps){FBEditor.view.window.hotkeys.slot.smallcaps={}}if(!FBEditor.view.window.hotkeys.slot.spacing){FBEditor.view.window.hotkeys.slot.spacing={}}if(!FBEditor.view.window.hotkeys.slot.span){FBEditor.view.window.hotkeys.slot.span={}}if(!FBEditor.view.window.hotkeys.slot.splitelement){FBEditor.view.window.hotkeys.slot.splitelement={}}if(!FBEditor.view.window.hotkeys.slot.splitsection){FBEditor.view.window.hotkeys.slot.splitsection={}}if(!FBEditor.view.window.hotkeys.slot.stanza){FBEditor.view.window.hotkeys.slot.stanza={}}if(!FBEditor.view.window.hotkeys.slot.strikethrough){FBEditor.view.window.hotkeys.slot.strikethrough={}}if(!FBEditor.view.window.hotkeys.slot.sub){FBEditor.view.window.hotkeys.slot.sub={}}if(!FBEditor.view.window.hotkeys.slot.subscription){FBEditor.view.window.hotkeys.slot.subscription={}}if(!FBEditor.view.window.hotkeys.slot.subtitle){FBEditor.view.window.hotkeys.slot.subtitle={}}if(!FBEditor.view.window.hotkeys.slot.sup){FBEditor.view.window.hotkeys.slot.sup={}}if(!FBEditor.view.window.hotkeys.slot.title){FBEditor.view.window.hotkeys.slot.title={}}if(!FBEditor.view.window.hotkeys.slot.titlebody){FBEditor.view.window.hotkeys.slot.titlebody={}}if(!FBEditor.view.window.hotkeys.slot.ul){FBEditor.view.window.hotkeys.slot.ul={}}if(!FBEditor.view.window.hotkeys.slot.underline){FBEditor.view.window.hotkeys.slot.underline={}}if(!FBEditor.view.window.hotkeys.slot.unstyle){FBEditor.view.window.hotkeys.slot.unstyle={}}if(!FBEditor.view.window.img){FBEditor.view.window.img={}}if(!FBEditor.view.window.resource){FBEditor.view.window.resource={}}if(!FBEditor.webworker){FBEditor.webworker={}}if(!FBEditor.webworker.httpRequest){FBEditor.webworker.httpRequest={}}if(!FBEditor.webworker.xmllint){FBEditor.webworker.xmllint={}}if(!FBEditor.xsd){FBEditor.xsd={}}if(!FBEditor.xsd.desc){FBEditor.xsd.desc={}}if(!FBEditor.xsl){FBEditor.xsl={}}(function(e){var b,l=["constructor","toString","valueOf","toLocaleString"],f={},p={},d=0,m,j,r,h,a,g,n,c,i,q=function(){var u,t;j=Ext.Base;r=Ext.ClassManager;for(u=l.length;u-->0;){t=(1<<u);p[f[t]=l[u]]=t}for(u in p){d|=p[u]}d=~d;Function.prototype.$isFunction=1;i=!!(r&&r.addAlias);h=Ext.Class.getPreprocessor("config").fn;a=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;g=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn;c=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;n=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;b=j.$staticMembers;if(!b){b=[];for(m in j){if(j.hasOwnProperty(m)){b.push(m)}}}e.derive=k;return k.apply(this,arguments)},s=function(C,y,B){var v=B.enumerableMembers,z=C.prototype,x,A,w,u,t;if(!y){return}if(i){C.addMembers(y)}else{for(x in y){u=y[x];if(u&&u.$isFunction&&!u.$isClass&&u!==Ext.emptyFn&&u!==Ext.identityFn){t=z.hasOwnProperty(x)&&z[x];if(t){u.$previous=t}z[x]=A=u;A.$owner=C;A.$name=x}else{z[x]=u}}for(w=1;v;w<<=1){if(v&w){v&=~w;x=f[w];z[x]=A=y[x];A.$owner=C;A.$name=x}}}},o=function(x){var t=function w(){return x.apply(this,arguments)||null},v,u;t.prototype=Ext.Object.chain(x.prototype);for(v=b.length;v-->0;){u=b[v];t[u]=j[u]}return t},k=function(y,B,W,t,A,K,z,T,w,M,F){var u=function E(){return this.constructor.apply(this,arguments)||null},V=u,v={enumerableMembers:t&d,onCreated:F,onBeforeCreated:s,aliases:T},I=W.alternateClassName||[],R=Ext.global,N,Q,S,H,P,Z,Y,x,O,D,U,L,G,X,J=r.alternateToName||r.maps.alternateToName,C=r.nameToAlternates||r.maps.nameToAlternates;for(S=b.length;S-->0;){Y=b[S];u[Y]=j[Y]}if(W.$isFunction){W=W(u)}v.data=W;D=W.statics;delete W.statics;W.$className=y;if("$className" in W){u.$className=W.$className}u.extend(B);O=u.prototype;if(A){u.xtype=W.xtype=A[0];O.xtypes=A}O.xtypesChain=K;O.xtypesMap=z;W.alias=T;V.triggerExtended(u,W,v);if(W.onClassExtended){u.onExtended(W.onClassExtended,u);delete W.onClassExtended}if(W.privates&&c){c.call(Ext.Class,u,W)}if(D){if(i){u.addStatics(D)}else{for(U in D){if(D.hasOwnProperty(U)){X=D[U];if(X&&X.$isFunction&&!X.$isClass&&X!==Ext.emptyFn&&X!==Ext.identityFn){u[U]=G=X;G.$owner=u;G.$name=U}u[U]=X}}}}if(W.inheritableStatics){u.addInheritableStatics(W.inheritableStatics);delete W.inheritableStatics}if(O.onClassExtended){V.onExtended(O.onClassExtended,V);delete O.onClassExtended}if(W.platformConfig&&g){g.call(Ext.Class,u,W);delete W.platformConfig}if(W.config){h.call(Ext.Class,u,W)}if(W.cachedConfig&&a){a.call(Ext.Class,u,W);delete W.cachedConfig}if(W.deprecated&&n){n.call(Ext.ClassManager,y,u,W)}v.onBeforeCreated(u,v.data,v);for(S=0,P=w&&w.length;S<P;++S){u.mixin.apply(u,w[S])}for(S=0,P=T.length;S<P;S++){N=T[S];r.setAlias?r.setAlias(u,N):r.addAlias(u,N)}if(W.singleton){V=new u()}if(!(I instanceof Array)){I=[I]}L=r.getName(V);for(S=0,H=I.length;S<H;S++){Q=I[S];r.classes[Q]=V;if(i){r.addAlternate(u,Q)}else{if(L){J[Q]=L;I=C[L]||(C[L]=[]);I.push(Q)}}}for(S=0,P=M.length;S<P;S+=2){Z=M[S];if(!Z){Z=R}Z[M[S+1]]=V}r.classes[y]=V;if(!i){if(L&&L!==y){J[y]=L;I=C[L]||(C[L]=[]);I.push(y)}}delete O.alternateClassName;if(v.onCreated){v.onCreated.call(V,V)}if(y){r.triggerCreated(y)}return V};e.derive=q}(Ext.cmd={}));var Ext=Ext||{};(function(){var b=this,g=Object.prototype,c=g.toString,n=["valueOf","toLocaleString","toString","constructor"],k=function(){},f=function(){},h=function(i){return i},m=function(){var i=m.caller.caller;return i.$owner.prototype[i.$name].apply(this,arguments)},a=Ext.manifest||{},j,d=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,e=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=b;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=(b.performance&&b.performance.now)?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();k.$nullFn=h.$nullFn=k.$emptyFn=h.$identityFn=f.$nullFn=true;f.$privacy="framework";Ext.suspendLayouts=Ext.resumeLayouts=k;for(j in {toString:1}){n=null}Ext.enumerables=n;Ext.apply=function(r,q,t){if(t){Ext.apply(r,t)}if(r&&q&&typeof q==="object"){var s,p,o;for(s in q){r[s]=q[s]}if(n){for(p=n.length;p--;){o=n[p];if(q.hasOwnProperty(o)){r[o]=q[o]}}}}return r};function l(q,i,r){var o,p;for(o in r){if(r.hasOwnProperty(o)){p=r[o];if(typeof p==="function"){p.$name=o;p.$owner=i;p.$previous=q.hasOwnProperty(o)?q[o]:m}q[o]=p}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:false,enableListenerCollection:true,name:Ext.sandboxName||"Ext",privateFn:f,emptyFn:k,identityFn:h,frameStartTime:Ext.now(),manifest:a,enableAria:true,enableAriaButtons:true,enableAriaPanels:true,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(i){return"#"+i},id:function(p,i){if(p&&p.id){return p.id}var q=(i||Ext.idPrefix)+(++Ext.idSeed);if(p){p.id=q}return q},returnId:function(i){return i.getId()},returnTrue:function(){return true},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(i){return Ext.$eventNameMap[i]||(Ext.$eventNameMap[i]=(Ext.$vendorEventRe.test(i)?i:i.toLowerCase()))},applyIf:function(o,i){var p;if(o){for(p in i){if(o[p]===undefined){o[p]=i[p]}}}return o},destroy:function(){var q=arguments.length,p,o;for(p=0;p<q;p++){o=arguments[p];if(o){if(Ext.isArray(o)){this.destroy.apply(this,o)}else{if(Ext.isFunction(o.destroy)){o.destroy()}}}}return null},destroyMembers:function(r){for(var t,q,s=1,p=arguments,o=p.length;s<o;s++){t=r[q=p[s]];if(t!=null){r[q]=Ext.destroy(t)}}},override:function(p,q){if(p.$isClass){p.override(q)}else{if(typeof p==="function"){Ext.apply(p.prototype,q)}else{var i=p.self,o;if(i&&i.$isClass){o=q.privates;if(o){q=Ext.apply({},q);delete q.privates;l(p,i,o)}l(p,i,q)}else{Ext.apply(p,q)}}}return p},valueFrom:function(p,i,o){return Ext.isEmpty(p,o)?i:p},isEmpty:function(i,o){return(i==null)||(!o?i==="":false)||(Ext.isArray(i)&&i.length===0)},isArray:("isArray" in Array)?Array.isArray:function(i){return c.call(i)==="[object Array]"},isDate:function(i){return c.call(i)==="[object Date]"},isMSDate:function(i){if(!Ext.isString(i)){return false}return e.test(i)},isObject:(c.call(null)==="[object Object]")?function(i){return i!==null&&i!==undefined&&c.call(i)==="[object Object]"&&i.ownerDocument===undefined}:function(i){return c.call(i)==="[object Object]"},isSimpleObject:function(i){return i instanceof Object&&i.constructor===Object},isPrimitive:function(o){var i=typeof o;return i==="string"||i==="number"||i==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(i){return !!i&&c.call(i)==="[object Function]"}:function(i){return !!i&&typeof i==="function"},isNumber:function(i){return typeof i==="number"&&isFinite(i)},isNumeric:function(i){return !isNaN(parseFloat(i))&&isFinite(i)},isString:function(i){return typeof i==="string"},isBoolean:function(i){return typeof i==="boolean"},isElement:function(i){return i?i.nodeType===1:false},isTextNode:function(i){return i?i.nodeName==="#text":false},isDefined:function(i){return typeof i!=="undefined"},isIterable:function(i){if(!i||typeof i.length!=="number"||typeof i==="string"||Ext.isFunction(i)){return false}if(!i.propertyIsEnumerable){return !!i.item}if(i.hasOwnProperty("length")&&!i.propertyIsEnumerable("length")){return true}return d.test(c.call(i))},isDebugEnabled:k,clone:function(t){if(t===null||t===undefined){return t}if(t.nodeType&&t.cloneNode){return t.cloneNode(true)}var s=c.call(t),r,p,o,u,q;if(s==="[object Date]"){return new Date(t.getTime())}if(s==="[object Array]"){r=t.length;u=[];while(r--){u[r]=Ext.clone(t[r])}}else{if(s==="[object Object]"&&t.constructor===Object){u={};for(q in t){u[q]=Ext.clone(t[q])}if(n){for(p=n.length;p--;){o=n[p];if(t.hasOwnProperty(o)){u[o]=t[o]}}}}}return u||t},getUniqueGlobalNamespace:function(){var p=this.uniqueGlobalNamespace,o;if(p===undefined){o=0;do{p="ExtBox"+(++o)}while(b[p]!==undefined);b[p]=Ext;this.uniqueGlobalNamespace=p}return p},functionFactoryCache:{},cacheableFunctionFactory:function(){var s=this,p=Array.prototype.slice.call(arguments),o=s.functionFactoryCache,i,q,r;if(Ext.isSandboxed){r=p.length;if(r>0){r--;p[r]="var Ext=window."+Ext.name+";"+p[r]}}i=p.join("");q=o[i];if(!q){q=Function.prototype.constructor.apply(Function.prototype,p);o[i]=q}return q},functionFactory:function(){var i=Array.prototype.slice.call(arguments),o;if(Ext.isSandboxed){o=i.length;if(o>0){o--;i[o]="var Ext=window."+Ext.name+";"+i[o]}}return Function.prototype.constructor.apply(Function.prototype,i)},Logger:{verbose:k,log:k,info:k,warn:k,error:function(i){throw new Error(i)},deprecate:k},getElementById:function(i){return document.getElementById(i)},splitAndUnescape:(function(){var i={};return function(q,p){if(!q){return[]}else{if(!p){return[q]}}var s=i[p]||(i[p]=new RegExp("\\\\"+p,"g")),o=[],t,r;t=q.split(p);while((r=t.shift())!==undefined){while(r.charAt(r.length-1)==="\\"&&t.length>0){r=r+p+t.shift()}r=r.replace(s,p);o.push(r)}return o}})()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=true}());Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=true);(function(){function a(){var c=this,b=c.sourceClass,e=c.sourceMethod,d=c.msg;if(e){if(d){e+="(): ";e+=d}else{e+="()"}}if(b){e=e?(b+"."+e):b}return e||d||""}Ext.Error=function(c){if(Ext.isString(c)){c={msg:c}}var b=new Error();Ext.apply(b,c);b.message=b.message||b.msg;b.toString=a;return b};Ext.apply(Ext.Error,{ignore:false,raise:function(d){d=d||{};if(Ext.isString(d)){d={msg:d}}var c=this,f=c.raise.caller,e,b;if(f===Ext.raise){f=f.caller}if(f){if(!d.sourceMethod&&(b=f.$name)){d.sourceMethod=b}if(!d.sourceClass&&(b=f.$owner)&&(b=b.$className)){d.sourceClass=b}}if(c.handle(d)!==true){e=a.call(d);throw new Ext.Error(d)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=(function(){var c=Array.prototype,k=c.slice,m=(function(){var u=[],e,t=20;if(!u.splice){return false}while(t--){u.push("A")}u.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");e=u.length;u.splice(13,0,"XXX");if(e+1!==u.length){return false}return true}()),l="indexOf" in c,g=true;function j(w,t){var e=w.length,v=new Array(e),u;for(u=0;u<e;u++){v[u]=u}v.sort(function(y,x){return t(w[y],w[x])||(y-x)});for(u=0;u<e;u++){v[u]=w[v[u]]}for(u=0;u<e;u++){w[u]=v[u]}return w}try{if(typeof document!=="undefined"){k.call(document.getElementsByTagName("body"))}}catch(o){g=false}var i=function(t,e){return(e<0)?Math.max(0,t.length+e):Math.min(t.length,e)},s=function(A,z,t,D){var E=D?D.length:0,v=A.length,B=i(A,z);if(B===v){if(E){A.push.apply(A,D)}}else{var y=Math.min(t,v-B),C=B+y,u=C+E-y,e=v-C,w=v-y,x;if(u<C){for(x=0;x<e;++x){A[u+x]=A[C+x]}}else{if(u>C){for(x=e;x--;){A[u+x]=A[C+x]}}}if(E&&B===w){A.length=w;A.push.apply(A,D)}else{A.length=w+E;for(x=0;x<E;++x){A[B+x]=D[x]}}}return A},f=function(v,e,u,t){if(t&&t.length){if(e===0&&!u){v.unshift.apply(v,t)}else{if(e<v.length){v.splice.apply(v,[e,u].concat(t))}else{v.push.apply(v,t)}}}else{v.splice(e,u)}return v},b=function(u,e,t){return s(u,e,t)},n=function(u,e,t){u.splice(e,t);return u},h=function(w,e,u){var v=i(w,e),t=w.slice(e,i(w,v+u));if(arguments.length<4){s(w,v,u)}else{s(w,v,u,k.call(arguments,3))}return t},d=function(e){return e.splice.apply(e,k.call(arguments,1))},r=m?n:b,p=m?f:s,q=m?d:h,a={binarySearch:function(z,w,u,e,y){var v=z.length,t,x;if(u instanceof Function){y=u;u=0;e=v}else{if(e instanceof Function){y=e;e=v}else{if(u===undefined){u=0}if(e===undefined){e=v}y=y||a.lexicalCompare}}--e;while(u<=e){t=(u+e)>>1;x=y(w,z[t]);if(x>=0){u=t+1}else{if(x<0){e=t-1}}}return u},defaultCompare:function(e,t){return(e<t)?-1:((e>t)?1:0)},lexicalCompare:function(e,t){e=String(e);t=String(t);return(e<t)?-1:((e>t)?1:0)},each:function(x,v,u,e){x=a.from(x);var t,w=x.length;if(e!==true){for(t=0;t<w;t++){if(v.call(u||x[t],x[t],t,x)===false){return t}}}else{for(t=w-1;t>-1;t--){if(v.call(u||x[t],x[t],t,x)===false){return t}}}return true},forEach:("forEach" in c)?function(u,t,e){return u.forEach(t,e)}:function(w,u,t){for(var e=0,v=w.length;e<v;e++){u.call(t,w[e],e,w)}},indexOf:l?function(u,e,t){return c.indexOf.call(u,e,t)}:function(w,u,v){var e,t=w.length;for(e=(v<0)?Math.max(0,t+v):v||0;e<t;e++){if(w[e]===u){return e}}return -1},contains:l?function(t,e){return c.indexOf.call(t,e)!==-1}:function(v,u){var e,t;for(e=0,t=v.length;e<t;e++){if(v[e]===u){return true}}return false},toArray:function(u,w,e){if(!u||!u.length){return[]}if(typeof u==="string"){u=u.split("")}if(g){return k.call(u,w||0,e||u.length)}var v=[],t;w=w||0;e=e?((e<0)?u.length+e:e):u.length;for(t=w;t<e;t++){v.push(u[t])}return v},pluck:function(x,e){var t=[],u,w,v;for(u=0,w=x.length;u<w;u++){v=x[u];t.push(v[e])}return t},map:("map" in c)?function(u,t,e){return u.map(t,e)}:function(x,w,v){var u=[],e=x.length,t;for(t=0;t<e;t++){u[t]=w.call(v,x[t],t,x)}return u},every:("every" in c)?function(u,t,e){return u.every(t,e)}:function(w,u,t){var e=0,v=w.length;for(;e<v;++e){if(!u.call(t,w[e],e,w)){return false}}return true},some:("some" in c)?function(u,t,e){return u.some(t,e)}:function(w,u,t){var e=0,v=w.length;for(;e<v;++e){if(u.call(t,w[e],e,w)){return true}}return false},equals:function(w,v){var t=w.length,e=v.length,u;if(w===v){return true}if(t!==e){return false}for(u=0;u<t;++u){if(w[u]!==v[u]){return false}}return true},clean:function(w){var t=[],e=0,v=w.length,u;for(;e<v;e++){u=w[e];if(!Ext.isEmpty(u)){t.push(u)}}return t},unique:function(w){var v=[],e=0,u=w.length,t;for(;e<u;e++){t=w[e];if(a.indexOf(v,t)===-1){v.push(t)}}return v},filter:("filter" in c)?function(u,t,e){return u.filter(t,e)}:function(x,v,u){var t=[],e=0,w=x.length;for(;e<w;e++){if(v.call(u,x[e],e,x)){t.push(x[e])}}return t},findBy:function(w,v,u){var t=0,e=w.length;for(;t<e;t++){if(v.call(u||w,w[t],t)){return w[t]}}return null},from:function(u,t){if(u===undefined||u===null){return[]}if(Ext.isArray(u)){return(t)?k.call(u):u}var e=typeof u;if(u&&u.length!==undefined&&e!=="string"&&(e!=="function"||!u.apply)){return a.toArray(u)}return[u]},remove:function(u,t){var e=a.indexOf(u,t);if(e!==-1){r(u,e,1)}return u},removeAt:function(v,t,u){var e=v.length;if(t>=0&&t<e){u=u||1;u=Math.min(u,e-t);r(v,t,u)}return v},include:function(t,e){if(!a.contains(t,e)){t.push(e)}},clone:function(e){return k.call(e)},merge:function(){var e=k.call(arguments),v=[],t,u;for(t=0,u=e.length;t<u;t++){v=v.concat(e[t])}return a.unique(v)},intersect:function(){var e=[],u=k.call(arguments),F,D,z,C,G,v,t,B,E,w,A,y,x;if(!u.length){return e}F=u.length;for(A=G=0;A<F;A++){v=u[A];if(!C||v.length<C.length){C=v;G=A}}C=a.unique(C);r(u,G,1);t=C.length;F=u.length;for(A=0;A<t;A++){B=C[A];w=0;for(y=0;y<F;y++){D=u[y];z=D.length;for(x=0;x<z;x++){E=D[x];if(B===E){w++;break}}}if(w===F){e.push(B)}}return e},difference:function(t,e){var y=k.call(t),w=y.length,v,u,x;for(v=0,x=e.length;v<x;v++){for(u=0;u<w;u++){if(y[u]===e[v]){r(y,u,1);u--;w--}}}return y},reduce:Array.prototype.reduce?function(u,t,e){if(arguments.length===3){return Array.prototype.reduce.call(u,t,e)}return Array.prototype.reduce.call(u,t)}:function(x,w,e){x=Object(x);var u=0,v=x.length>>>0,t=e;if(arguments.length<3){while(true){if(u in x){t=x[u++];break}if(++u>=v){throw new TypeError("Reduce of empty array with no initial value")}}}for(;u<v;++u){if(u in x){t=w(t,x[u],u,x)}}return t},slice:([1,2].slice(1,undefined).length?function(u,t,e){return k.call(u,t,e)}:function(u,t,e){if(typeof t==="undefined"){return k.call(u)}if(typeof e==="undefined"){return k.call(u,t)}return k.call(u,t,e)}),sort:function(t,e){return j(t,e||a.lexicalCompare)},flatten:function(u){var t=[];function e(w){var y,z,x;for(y=0,z=w.length;y<z;y++){x=w[y];if(Ext.isArray(x)){e(x)}else{t.push(x)}}return t}return e(u)},min:function(x,w){var t=x[0],e,v,u;for(e=0,v=x.length;e<v;e++){u=x[e];if(w){if(w(t,u)===1){t=u}}else{if(u<t){t=u}}}return t},max:function(x,w){var e=x[0],t,v,u;for(t=0,v=x.length;t<v;t++){u=x[t];if(w){if(w(e,u)===-1){e=u}}else{if(u>e){e=u}}}return e},mean:function(e){return e.length>0?a.sum(e)/e.length:undefined},sum:function(w){var t=0,e,v,u;for(e=0,v=w.length;e<v;e++){u=w[e];t+=u}return t},toMap:function(w,e,u){var v={},t=w.length;if(!e){while(t--){v[w[t]]=t+1}}else{if(typeof e==="string"){while(t--){v[w[t][e]]=t+1}}else{while(t--){v[e.call(u,w[t])]=t+1}}}return v},toValueMap:function(y,v,D,x){var e={},u=y.length,t,w,B,z,C,A;if(!v){while(u--){A=y[u];e[A]=A}}else{if(!(z=(typeof v!=="string"))){x=D}w=x===1;t=x===2;while(u--){A=y[u];C=z?v.call(D,A):A[v];if(w){if(C in e){e[C].push(A)}else{e[C]=[A]}}else{if(t&&(C in e)){if((B=e[C]) instanceof Array){B.push(A)}else{e[C]=[B,A]}}else{e[C]=A}}}}return e},erase:r,insert:function(u,t,e){return p(u,t,0,e)},move:function(x,t,v){if(v===t){return}var u=x[t],w=v>t?1:-1,e;for(e=t;e!=v;e+=w){x[e]=x[e+w]}x[v]=u},replace:p,splice:q,push:function(v){var e=arguments.length,u=1,t;if(v===undefined){v=[]}else{if(!Ext.isArray(v)){v=[v]}}for(;u<e;u++){t=arguments[u];Array.prototype.push[Ext.isIterable(t)?"apply":"call"](v,t)}return v},numericSortFn:function(t,e){return t-e}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a}());Ext.String=(function(){var h=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,l=/('|\\)/g,b=/([-.*+?\^${}()|\[\]\/\\])/g,n=/^\s+|\s+$/g,i=/\s+/,k=/(^[^a-z]*|[^\w])/gi,e,a,g,d,f=function(p,o){return e[o]},j=function(p,o){return(o in a)?a[o]:String.fromCharCode(parseInt(o.substr(2),10))},c=function(p,o){if(p===null||p===undefined||o===null||o===undefined){return false}return o.length<=p.length},m;return m={insert:function(q,r,p){if(!q){return r}if(!r){return q}var o=q.length;if(!p&&p!==0){p=o}if(p<0){p*=-1;if(p>=o){p=0}else{p=o-p}}if(p===0){q=r+q}else{if(p>=q.length){q+=r}else{q=q.substr(0,p)+r+q.substr(p)}}return q},startsWith:function(q,r,p){var o=c(q,r);if(o){if(p){q=q.toLowerCase();r=r.toLowerCase()}o=q.lastIndexOf(r,0)===0}return o},endsWith:function(r,p,q){var o=c(r,p);if(o){if(q){r=r.toLowerCase();p=p.toLowerCase()}o=r.indexOf(p,r.length-p.length)!==-1}return o},createVarName:function(o){return o.replace(k,"")},htmlEncode:function(o){return(!o)?o:String(o).replace(g,f)},htmlDecode:function(o){return(!o)?o:String(o).replace(d,j)},hasHtmlCharacters:function(o){return g.test(o)},addCharacterEntities:function(p){var o=[],s=[],q,r;for(q in p){r=p[q];a[q]=r;e[r]=q;o.push(r);s.push(q)}g=new RegExp("("+o.join("|")+")","g");d=new RegExp("("+s.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){e={};a={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(p,o){if(!Ext.isEmpty(o)){return p+(p.indexOf("?")===-1?"?":"&")+o}return p},trim:function(o){if(o){o=o.replace(h,"")}return o||""},capitalize:function(o){if(o){o=o.charAt(0).toUpperCase()+o.substr(1)}return o||""},uncapitalize:function(o){if(o){o=o.charAt(0).toLowerCase()+o.substr(1)}return o||""},ellipsis:function(q,p,r){if(q&&q.length>p){if(r){var s=q.substr(0,p-2),o=Math.max(s.lastIndexOf(" "),s.lastIndexOf("."),s.lastIndexOf("!"),s.lastIndexOf("?"));if(o!==-1&&o>=(p-15)){return s.substr(0,o)+"..."}}return q.substr(0,p-3)+"..."}return q},escapeRegex:function(o){return o.replace(b,"\\$1")},createRegex:function(s,r,p,o){var q=s;if(s!=null&&!s.exec){q=m.escapeRegex(String(s));if(r!==false){q="^"+q}if(p!==false){q+="$"}q=new RegExp(q,(o!==false)?"i":"")}return q},escape:function(o){return o.replace(l,"\\$1")},toggle:function(p,q,o){return p===q?o:q},leftPad:function(p,q,r){var o=String(p);r=r||" ";while(o.length<q){o=r+o}return o},repeat:function(s,r,p){if(r<1){r=0}for(var o=[],q=r;q--;){o.push(s)}return o.join(p||"")},splitWords:function(o){if(o&&typeof o=="string"){return o.replace(n,"").split(i)}return o||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=(function(){var f,e=Date,k=/(\\.)/g,a=/([gGhHisucUOPZ]|MS)/,g=/([djzmnYycU]|MS)/,j=/\\/gi,c=/\{(\d+)\}/g,h=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),d=Ext.String.leftPad,b=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var l=this;return d(l.getUTCFullYear(),4,"0")+"-"+d(l.getUTCMonth()+1,2,"0")+"-"+d(l.getUTCDate(),2,"0")+"T"+d(l.getUTCHours(),2,"0")+":"+d(l.getUTCMinutes(),2,"0")+":"+d(l.getUTCSeconds(),2,"0")+"."+d(l.getUTCMilliseconds(),3,"0")+"Z"}}function i(m){var l=Array.prototype.slice.call(arguments,1);return m.replace(c,function(n,o){return l[o]})}return f={now:e.now,toString:function(l){if(!l){l=new e()}return l.getFullYear()+"-"+d(l.getMonth()+1,2,"0")+"-"+d(l.getDate(),2,"0")+"T"+d(l.getHours(),2,"0")+":"+d(l.getMinutes(),2,"0")+":"+d(l.getSeconds(),2,"0")},getElapsed:function(m,l){return Math.abs(m-(l||f.now()))},useStrict:false,formatCodeToRegex:function(m,l){var n=f.parseCodes[m];if(n){n=typeof n==="function"?n():n;f.parseCodes[m]=n}return n?Ext.applyIf({c:n.c?i(n.c,l||"{0}"):n.c},n):{g:0,c:null,s:Ext.String.escapeRegex(m)}},parseFunctions:{MS:function(m,l){var n=(m||"").match(h);return n?new e(((n[1]||"")+n[2])*1):null},time:function(m,l){var n=parseInt(m,10);if(n||n===0){return new e(n)}return null},timestamp:function(m,l){var n=parseInt(m,10);if(n||n===0){return new e(n*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return f.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(l){return f.monthNames[l].substring(0,3)},getShortDayName:function(l){return f.dayNames[l].substring(0,3)},getMonthNumber:function(l){return f.monthNumbers[l.substring(0,1).toUpperCase()+l.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(l){return a.test(l.replace(k,""))},formatContainsDateInfo:function(l){return g.test(l.replace(k,""))},unescapeFormat:function(l){return l.replace(j,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var q="Y-m-dTH:i:sP",o=[],n,m=q.length,p;for(n=0;n<m;++n){p=q.charAt(n);o.push(p==="T"?"'T'":f.getFormatCode(p))}return o.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(u,l,t,q,o,p,n){q=q||0;o=o||0;p=p||0;n=n||0;var r=f.add(new e(u<100?100:u,l-1,t,q,o,p,n),f.YEAR,u<100?u-100:0);return u===r.getFullYear()&&l===r.getMonth()+1&&t===r.getDate()&&q===r.getHours()&&o===r.getMinutes()&&p===r.getSeconds()&&n===r.getMilliseconds()},parse:function(m,o,l){var n=f.parseFunctions;if(n[o]==null){f.createParser(o)}return n[o].call(f,m,Ext.isDefined(l)?l:f.useStrict)},parseDate:function(m,n,l){return f.parse(m,n,l)},getFormatCode:function(m){var l=f.formatCodes[m];if(l){l=typeof l==="function"?l():l;f.formatCodes[m]=l}return l||("'"+Ext.String.escape(m)+"'")},createFormat:function(p){var o=[],l=false,n="",m;for(m=0;m<p.length;++m){n=p.charAt(m);if(!l&&n==="\\"){l=true}else{if(l){l=false;o.push("'"+Ext.String.escape(n)+"'")}else{if(n==="\n"){o.push("'\\n'")}else{o.push(f.getFormatCode(n))}}}}f.formatFunctions[p]=Ext.functionFactory("var m=this;return "+o.join("+"))},createParser:function(u){var m=f.parseRegexes.length,v=1,n=[],t=[],r=false,l="",p=0,q=u.length,s=[],o;for(;p<q;++p){l=u.charAt(p);if(!r&&l==="\\"){r=true}else{if(r){r=false;t.push(Ext.String.escape(l))}else{o=f.formatCodeToRegex(l,v);v+=o.g;t.push(o.s);if(o.g&&o.c){if(o.calcAtEnd){s.push(o.c)}else{n.push(o.c)}}}}}n=n.concat(s);f.parseRegexes[m]=new RegExp("^"+t.join("")+"$","i");f.parseFunctions[u]=Ext.functionFactory("input","strict",i(b,m,n.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var l=[],m=0;m<7;l.push(f.getShortDayName(m)),++m){}return{g:0,c:null,s:"(?:"+l.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+f.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+f.monthNames.join("|")+")"}},M:function(){for(var l=[],m=0;m<12;l.push(f.getShortMonthName(m)),++m){}return Ext.applyIf({s:"("+l.join("|")+")"},f.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var o=[],m=[f.formatCodeToRegex("Y",1),f.formatCodeToRegex("m",2),f.formatCodeToRegex("d",3),f.formatCodeToRegex("H",4),f.formatCodeToRegex("i",5),f.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",f.formatCodeToRegex("P",8).c,"}else{",f.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],p,n;for(p=0,n=m.length;p<n;++p){o.push(m[p].c)}return{g:1,c:o.join(""),s:[m[0].s,"(?:","-",m[1].s,"(?:","-",m[2].s,"(?:","(?:T| )?",m[3].s,":",m[4].s,"(?::",m[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(l,m){return f.format(l,m)},isEqual:function(m,l){if(m&&l){return(m.getTime()===l.getTime())}return !(m||l)},format:function(m,n){var l=f.formatFunctions;if(!Ext.isDate(m)){return""}if(l[n]==null){f.createFormat(n)}return l[n].call(m)+""},getTimezone:function(l){return l.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(l,m){var n=l.getTimezoneOffset();return(n>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(n)/60),2,"0")+(m?":":"")+Ext.String.leftPad(Math.abs(n%60),2,"0")},getDayOfYear:function(o){var n=0,q=f.clone(o),l=o.getMonth(),p;for(p=0,q.setDate(1),q.setMonth(0);p<l;q.setMonth(++p)){n+=f.getDaysInMonth(q)}return n+o.getDate()-1},getWeekOfYear:(function(){var l=86400000,m=7*l;return function(o){var p=e.UTC(o.getFullYear(),o.getMonth(),o.getDate()+3)/l,n=Math.floor(p/7),q=new e(n*m).getUTCFullYear();return n-Math.floor(e.UTC(q,0,7)/m)+1}}()),isLeapYear:function(l){var m=l.getFullYear();return !!((m&3)===0&&(m%100||(m%400===0&&m)))},getFirstDayOfMonth:function(m){var l=(m.getDay()-(m.getDate()-1))%7;return(l<0)?(l+7):l},getLastDayOfMonth:function(l){return f.getLastDateOfMonth(l).getDay()},getFirstDateOfMonth:function(l){return new e(l.getFullYear(),l.getMonth(),1)},getLastDateOfMonth:function(l){return new e(l.getFullYear(),l.getMonth(),f.getDaysInMonth(l))},getDaysInMonth:(function(){var l=[31,28,31,30,31,30,31,31,30,31,30,31];return function(o){var n=o.getMonth();return n===1&&f.isLeapYear(o)?29:l[n]}}()),getSuffix:function(l){switch(l.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(l){return new e(l.getTime())},isDST:function(l){return new e(l.getFullYear(),0,1).getTimezoneOffset()!==l.getTimezoneOffset()},clearTime:function(l,p){if(isNaN(l.getTime())){return l}if(p){return f.clearTime(f.clone(l))}var n=l.getDate(),m,o;l.setHours(0);l.setMinutes(0);l.setSeconds(0);l.setMilliseconds(0);if(l.getDate()!==n){for(m=1,o=f.add(l,f.HOUR,m);o.getDate()!==n;m++,o=f.add(l,f.HOUR,m)){}l.setDate(n);l.setHours(o.getHours())}return l},add:function(n,m,q){var r=f.clone(n),l,p,o=0;if(!m||q===0){return r}p=q-parseInt(q,10);q=parseInt(q,10);if(q){switch(m.toLowerCase()){case f.MILLI:r.setTime(r.getTime()+q);break;case f.SECOND:r.setTime(r.getTime()+q*1000);break;case f.MINUTE:r.setTime(r.getTime()+q*60*1000);break;case f.HOUR:r.setTime(r.getTime()+q*60*60*1000);break;case f.DAY:r.setDate(r.getDate()+q);break;case f.MONTH:l=n.getDate();if(l>28){l=Math.min(l,f.getLastDateOfMonth(f.add(f.getFirstDateOfMonth(n),f.MONTH,q)).getDate())}r.setDate(l);r.setMonth(n.getMonth()+q);break;case f.YEAR:l=n.getDate();if(l>28){l=Math.min(l,f.getLastDateOfMonth(f.add(f.getFirstDateOfMonth(n),f.YEAR,q)).getDate())}r.setDate(l);r.setFullYear(n.getFullYear()+q);break}}if(p){switch(m.toLowerCase()){case f.MILLI:o=1;break;case f.SECOND:o=1000;break;case f.MINUTE:o=1000*60;break;case f.HOUR:o=1000*60*60;break;case f.DAY:o=1000*60*60*24;break;case f.MONTH:l=f.getDaysInMonth(r);o=1000*60*60*24*l;break;case f.YEAR:l=(f.isLeapYear(r)?366:365);o=1000*60*60*24*l;break}if(o){r.setTime(r.getTime()+o*p)}}return r},subtract:function(m,l,n){return f.add(m,l,-n)},between:function(m,o,l){var n=m.getTime();return o.getTime()<=n&&n<=l.getTime()},compat:function(){var t,u=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],r=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],m=u.length,l=r.length,o,q,n;for(n=0;n<m;n++){o=u[n];e[o]=f[o]}for(t=0;t<l;t++){q=r[t];e.prototype[q]=function(){var p=Array.prototype.slice.call(arguments);p.unshift(this);return f[q].apply(f,p)}}},diff:function(m,l,o){var n,p=+l-m;switch(o){case f.MILLI:return p;case f.SECOND:return Math.floor(p/1000);case f.MINUTE:return Math.floor(p/60000);case f.HOUR:return Math.floor(p/3600000);case f.DAY:return Math.floor(p/86400000);case"w":return Math.floor(p/604800000);case f.MONTH:n=(l.getFullYear()*12+l.getMonth())-(m.getFullYear()*12+m.getMonth());if(f.add(m,o,n)>l){return n-1}return n;case f.YEAR:n=l.getFullYear()-m.getFullYear();if(f.add(m,o,n)>l){return n-1}else{return n}}},align:function(m,o,n){var l=new e(+m);switch(o.toLowerCase()){case f.MILLI:return l;case f.SECOND:l.setUTCSeconds(l.getUTCSeconds()-l.getUTCSeconds()%n);l.setUTCMilliseconds(0);return l;case f.MINUTE:l.setUTCMinutes(l.getUTCMinutes()-l.getUTCMinutes()%n);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case f.HOUR:l.setUTCHours(l.getUTCHours()-l.getUTCHours()%n);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case f.DAY:if(n===7||n===14){l.setUTCDate(l.getUTCDate()-l.getUTCDay()+1)}l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case f.MONTH:l.setUTCMonth(l.getUTCMonth()-(l.getUTCMonth()-1)%n,1);l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case f.YEAR:l.setUTCFullYear(l.getUTCFullYear()-l.getUTCFullYear()%n,1,1);l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return m}}}}());Ext.Function=(function(){var b=0,l,e=[],m=[],h=0,i={},g=window,d=Ext.global,f=!!(d.setImmediate&&d.clearImmediate),k=g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||function(q){var n=Ext.now(),o=Math.max(0,16-(n-b)),p=g.setTimeout(function(){q(n+o)},o);b=n+o;return p},c=function(){var n=e.length,q,o,p;l=null;for(o=0;o<n;o++){p=e[o];q=p[3];if(i[q]){p[0].apply(p[1]||d,p[2]||m);delete i[q]}}e=e.slice(n)},a=function(){Ext.elevateFunction(c)},j={flexSetter:function(n){return function(p,r){var o,q;if(p!==null){if(typeof p!=="string"){for(o in p){if(p.hasOwnProperty(o)){n.call(this,o,p[o])}}if(Ext.enumerables){for(q=Ext.enumerables.length;q--;){o=Ext.enumerables[q];if(p.hasOwnProperty(o)){n.call(this,o,p[o])}}}}else{n.call(this,p,r)}}return this}},bind:function(q,p,o,n){if(arguments.length===2){return function(){return q.apply(p,arguments)}}var s=q,r=Array.prototype.slice;return function(){var t=o||arguments;if(n===true){t=r.call(arguments,0);t=t.concat(o)}else{if(typeof n==="number"){t=r.call(arguments,0);Ext.Array.insert(t,n,o)}}return s.apply(p||d,t)}},bindCallback:function(r,q,p,o,n){return function(){var s=Ext.Array.slice(arguments);return Ext.callback(r,q,p?p.concat(s):s,o,n)}},pass:function(p,n,o){if(!Ext.isArray(n)){if(Ext.isIterable(n)){n=Ext.Array.clone(n)}else{n=n!==undefined?[n]:[]}}return function(){var q=n.slice();q.push.apply(q,arguments);return p.apply(o||this,q)}},alias:function(o,n){return function(){return o[n].apply(o,arguments)}},clone:function(n){return function(){return n.apply(this,arguments)}},createInterceptor:function(q,p,o,n){if(!Ext.isFunction(p)){return q}else{n=Ext.isDefined(n)?n:null;return function(){var s=this,r=arguments;return(p.apply(o||s||d,r)!==false)?q.apply(s||d,r):n}}},createDelayed:function(r,p,q,o,n){if(q||o){r=Ext.Function.bind(r,q,o,n)}return function(){var t=this,s=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(r,t,s)}else{r.apply(t,s)}},p)}},defer:function(r,p,q,o,n){r=Ext.Function.bind(r,q,o,n);if(p>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(r)}else{r()}},p)}r();return 0},interval:function(r,p,q,o,n){r=Ext.Function.bind(r,q,o,n);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(r)}else{r()}},p)},createSequence:function(o,p,n){if(!p){return o}else{return function(){var q=o.apply(this,arguments);p.apply(n||this,arguments);return q}}},createBuffered:function(r,o,q,p){var n;return function(){var t=p||Array.prototype.slice.call(arguments,0),s=q||this;if(n){clearTimeout(n)}n=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(r,s,t)}else{r.apply(s,t)}},o)}},createAnimationFrame:function(q,p,o,r){var n;r=r||3;return function(){var s=o||Array.prototype.slice.call(arguments,0);p=p||this;if(r===3&&n){j.cancelAnimationFrame(n)}if((r&1)||!n){n=j.requestAnimationFrame(function(){n=null;q.apply(p,s)})}}},requestAnimationFrame:function(q,p,n){var r=++h,o=Array.prototype.slice.call(arguments,0);o[3]=r;i[r]=1;e.push(o);if(!l){l=k(Ext.elevateFunction?a:c)}return r},cancelAnimationFrame:function(n){delete i[n]},createThrottled:function(r,o,q){var s=0,n,p,u,t=function(){if(Ext.elevateFunction){Ext.elevateFunction(r,q,p)}else{r.apply(q,p)}s=Ext.now();u=null};return function(){if(!q){q=this}n=Ext.now()-s;p=arguments;if(n>=o){clearTimeout(u);t()}else{if(!u){u=Ext.defer(t,o-n)}}}},createBarrier:function(p,o,n){return function(){if(!--p){o.apply(n,arguments)}}},interceptBefore:function(o,n,q,p){var r=o[n]||Ext.emptyFn;return(o[n]=function(){var s=q.apply(p||this,arguments);r.apply(this,arguments);return s})},interceptAfter:function(o,n,q,p){var r=o[n]||Ext.emptyFn;return(o[n]=function(){r.apply(this,arguments);return q.apply(p||this,arguments)})},makeCallback:function(o,n){return function(){return n[o].apply(n,arguments)}},memoize:function(q,p,n){var o={},r=n&&Ext.isFunction(n);return function(t){var s=r?n.apply(p,arguments):t;if(!(s in o)){o[s]=q.apply(p,arguments)}return o[s]}}};Ext.asap=f?function(o,n,p){if(n!=null||p!=null){o=j.bind(o,n,p)}return setImmediate(function(){if(Ext.elevateFunction){Ext.elevateFunction(o)}else{o()}})}:function(o,n,p){if(n!=null||p!=null){o=j.bind(o,n,p)}return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(o)}else{o()}},0,true)},Ext.asapCancel=f?function(n){clearImmediate(n)}:function(n){clearTimeout(n)};Ext.defer=j.defer;Ext.interval=j.interval;Ext.pass=j.pass;Ext.bind=j.bind;Ext.deferCallback=j.requestAnimationFrame;return j})();Ext.Number=(new function(){var d=this,c=(0.9).toFixed()!=="1",b=Math,a={count:false,inclusive:false,wrap:true};Ext.apply(d,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:true},a),INCLUSIVE:Ext.applyIf({inclusive:true},a),NOWRAP:Ext.applyIf({wrap:false},a)},clipIndices:function(l,m,g){g=g||a;var f=0,k=g.wrap,j,e,h;m=m||[];for(h=0;h<2;++h){j=e;e=m[h];if(e==null){e=f}else{if(h&&g.count){e+=j;e=(e>l)?l:e}else{if(k){e=(e<0)?(l+e):e}if(h&&g.inclusive){++e}e=(e<0)?0:((e>l)?l:e)}}f=l}m[0]=j;m[1]=(e<j)?j:e;return m},constrain:function(h,g,f){var e=parseFloat(h);if(g===null){g=h}if(f===null){f=h}return(e<g)?g:((e>f)?f:e)},snap:function(h,f,g,i){var e;if(h===undefined||h<g){return g||0}if(f){e=h%f;if(e!==0){h-=e;if(e*2>=f){h+=f}else{if(e*2<-f){h-=f}}}}return d.constrain(h,g,i)},snapInRange:function(h,e,g,i){var f;g=(g||0);if(h===undefined||h<g){return g}if(e&&(f=((h-g)%e))){h-=f;f*=2;if(f>=e){h+=e}}if(i!==undefined){if(h>(i=d.snapInRange(i,e,g))){h=i}}return h},sign:function(e){e=+e;if(e===0||isNaN(e)){return e}return(e>0)?1:-1},toFixed:c?function(g,e){e=e||0;var f=b.pow(10,e);return(b.round(g*f)/f).toFixed(e)}:function(f,e){return f.toFixed(e)},from:function(f,e){if(isFinite(f)){f=parseFloat(f)}return !isNaN(f)?f:e},randomInt:function(f,e){return b.floor(b.random()*(e-f+1)+f)},correctFloat:function(e){return parseFloat(e.toPrecision(14))}});Ext.num=function(){return d.from.apply(this,arguments)}}());(function(){var d=function(){},b=/^\?/,c=/(\[):?([^\]]*)\]/g,a=/^([^\[]+)/,f=/\+/g,e=Ext.Object={chain:Object.create||function(h){d.prototype=h;var g=new d();d.prototype=null;return g},clear:function(g){for(var h in g){delete g[h]}return g},freeze:Object.freeze?function(i,g){if(i&&typeof i==="object"&&!Object.isFrozen(i)){Object.freeze(i);if(g){for(var h in i){e.freeze(i[h],g)}}}return i}:Ext.identityFn,toQueryObjects:function(j,n,h){var g=e.toQueryObjects,m=[],k,l;if(Ext.isArray(n)){for(k=0,l=n.length;k<l;k++){if(h){m=m.concat(g(j+"["+k+"]",n[k],true))}else{m.push({name:j,value:n[k]})}}}else{if(Ext.isObject(n)){for(k in n){if(n.hasOwnProperty(k)){if(h){m=m.concat(g(j+"["+k+"]",n[k],true))}else{m.push({name:j,value:n[k]})}}}}else{m.push({name:j,value:n})}}return m},toQueryString:function(l,h){var m=[],k=[],o,n,p,g,q;for(o in l){if(l.hasOwnProperty(o)){m=m.concat(e.toQueryObjects(o,l[o],h))}}for(n=0,p=m.length;n<p;n++){g=m[n];q=g.value;if(Ext.isEmpty(q)){q=""}else{if(Ext.isDate(q)){q=Ext.Date.toString(q)}}k.push(encodeURIComponent(g.name)+"="+encodeURIComponent(String(q)))}return k.join("&")},fromQueryString:function(h,u){var p=h.replace(b,"").split("&"),x={},v,n,z,q,t,l,r,s,g,m,w,o,y,k;for(t=0,l=p.length;t<l;t++){r=p[t];if(r.length>0){n=r.split("=");z=n[0];z=z.replace(f,"%20");z=decodeURIComponent(z);q=n[1];if(q!==undefined){q=q.replace(f,"%20");q=decodeURIComponent(q)}else{q=""}if(!u){if(x.hasOwnProperty(z)){if(!Ext.isArray(x[z])){x[z]=[x[z]]}x[z].push(q)}else{x[z]=q}}else{m=z.match(c);w=z.match(a);z=w[0];o=[];if(m===null){x[z]=q;continue}for(s=0,g=m.length;s<g;s++){y=m[s];y=(y.length===2)?"":y.substring(1,y.length-1);o.push(y)}o.unshift(z);v=x;for(s=0,g=o.length;s<g;s++){y=o[s];if(s===g-1){if(Ext.isArray(v)&&y===""){v.push(q)}else{v[y]=q}}else{if(v[y]===undefined||typeof v[y]==="string"){k=o[s+1];v[y]=(Ext.isNumeric(k)||k==="")?[]:{}}v=v[y]}}}}}return x},each:function(h,l,k){var g=Ext.enumerables,j,m;if(h){k=k||h;for(m in h){if(h.hasOwnProperty(m)){if(l.call(k,m,h[m],h)===false){return}}}if(g){for(j=g.length;j--;){if(h.hasOwnProperty(m=g[j])){if(l.call(k,m,h[m],h)===false){return}}}}}},eachValue:function(h,l,k){var g=Ext.enumerables,j,m;k=k||h;for(m in h){if(h.hasOwnProperty(m)){if(l.call(k,h[m])===false){return}}}if(g){for(j=g.length;j--;){if(h.hasOwnProperty(m=g[j])){if(l.call(k,h[m])===false){return}}}}},merge:function(n){var l=1,m=arguments.length,g=e.merge,j=Ext.clone,k,p,o,h;for(;l<m;l++){k=arguments[l];for(p in k){o=k[p];if(o&&o.constructor===Object){h=n[p];if(h&&h.constructor===Object){g(h,o)}else{n[p]=j(o)}}else{n[p]=o}}}return n},mergeIf:function(g){var l=1,m=arguments.length,j=Ext.clone,h,k,n;for(;l<m;l++){h=arguments[l];for(k in h){if(!(k in g)){n=h[k];if(n&&n.constructor===Object){g[k]=j(n)}else{g[k]=n}}}}return g},getAllKeys:function(g){var h=[],i;for(i in g){h.push(i)}return h},getKey:function(g,i){for(var h in g){if(g.hasOwnProperty(h)&&g[h]===i){return h}}return null},getValues:function(h){var g=[],i;for(i in h){if(h.hasOwnProperty(i)){g.push(h[i])}}return g},getKeys:(typeof Object.keys=="function")?function(g){if(!g){return[]}return Object.keys(g)}:function(g){var h=[],i;for(i in g){if(g.hasOwnProperty(i)){h.push(i)}}return h},getSize:function(g){var h=0,i;for(i in g){if(g.hasOwnProperty(i)){h++}}return h},isEmpty:function(g){for(var h in g){if(g.hasOwnProperty(h)){return false}}return true},equals:(function(){var g=function(j,i){var h;for(h in j){if(j.hasOwnProperty(h)){if(j[h]!==i[h]){return false}}}return true};return function(i,h){if(i===h){return true}if(i&&h){return g(i,h)&&g(h,i)}else{if(!i&&!h){return i===h}else{return false}}}})(),fork:function(j){var g,h,i;if(j&&j.constructor===Object){g=e.chain(j);for(h in j){i=j[h];if(i){if(i.constructor===Object){g[h]=e.fork(i)}else{if(i instanceof Array){g[h]=Ext.Array.clone(i)}}}}}else{g=j}return g},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(h,g,i){if(!Object.prototype.__defineGetter__){return}if(i.get){h.__defineGetter__(g,i.get)}if(i.set){h.__defineSetter__(g,i.set)}},classify:function(j){var i=j,l=[],h={},g=function(){var n=0,o=l.length,p;for(;n<o;n++){p=l[n];this[p]=new h[p]()}},k,m;for(k in j){if(j.hasOwnProperty(k)){m=j[k];if(m&&m.constructor===Object){l.push(k);h[k]=e.classify(m)}}}g.prototype=i;return g}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf}());Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:(function(){var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,d=/([\W]{1})/g,b=/^(\d)/g,a=function(g,f){return"\\"+f},e=function(g,f){return"\\00"+f.charCodeAt(0).toString(16)+" "};return function(f){return c.test(f)?f:f.replace(d,a).replace(b,e)}}()),callback:function(h,f,d,c,b,g){if(!h){return}var e=(f in Ext._namedScopes);if(h.charAt){if((!f||e)&&b){f=b.resolveListenerScope(e?f:g)}h=f[h]}else{if(e){f=g||b}else{if(!f){f=b}}}var a;if(h&&Ext.isFunction(h)){f=f||Ext.global;if(c){Ext.defer(h,c,f,d)}else{if(Ext.elevateFunction){a=Ext.elevateFunction(h,f,d)}else{if(d){a=h.apply(f,d)}else{a=h.call(f)}}}}return a},coerce:function(e,d){var c=Ext.typeOf(e),b=Ext.typeOf(d),a=typeof e==="string";if(c!==b){switch(b){case"string":return String(e);case"number":return Number(e);case"boolean":return a&&(!e||e==="false")?false:Boolean(e);case"null":return a&&(!e||e==="null")?null:e;case"undefined":return a&&(!e||e==="undefined")?undefined:e;case"date":return a&&isNaN(e)?Ext.Date.parse(e,Ext.Date.defaultFormat):Date(Number(e))}}return e},copyTo:function(b,d,f,e){if(typeof f==="string"){f=f.split(Ext.propertyNameSplitRe)}for(var a,c=0,g=f?f.length:0;c<g;c++){a=f[c];if(e||d.hasOwnProperty(a)){b[a]=d[a]}}return b},copy:function(b,d,f,e){if(typeof f==="string"){f=f.split(Ext.propertyNameSplitRe)}for(var a,c=0,g=f?f.length:0;c<g;c++){a=f[c];if(d.hasOwnProperty(a)||(e&&a in d)){b[a]=d[a]}}return b},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(a,d,e){if(typeof e==="string"){e=e.split(Ext.propertyNameSplitRe)}for(var b,c=0,f=e?e.length:0;c<f;c++){b=e[c];if(a[b]===undefined){a[b]=d[b]}}return a},copyIf:function(a,d,e){if(typeof e==="string"){e=e.split(Ext.propertyNameSplitRe)}for(var b,c=0,f=e?e.length:0;c<f;c++){b=e[c];if(!(b in a)&&(b in d)){a[b]=d[b]}}return a},extend:(function(){var a=Object.prototype.constructor,b=function(d){for(var c in d){if(!d.hasOwnProperty(c)){continue}this[c]=d[c]}};return function(c,h,f){if(Ext.isObject(h)){f=h;h=c;c=f.constructor!==a?f.constructor:function(){h.apply(this,arguments)}}var e=function(){},d,g=h.prototype;e.prototype=g;d=c.prototype=new e();d.constructor=c;c.superclass=g;if(g.constructor===a){g.constructor=h}c.override=function(i){Ext.override(c,i)};d.override=b;d.proto=d;c.override(f);c.extend=function(i){return Ext.extend(c,i)};return c}}()),iterate:function(a,c,b){if(Ext.isEmpty(a)){return}if(b===undefined){b=a}if(Ext.isIterable(a)){Ext.Array.each.call(Ext.Array,a,c,b)}else{Ext.Object.each.call(Ext.Object,a,c,b)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(c){var b=c,a;if(c&&c.charAt(0)==="<"){a=Ext._resourcePoolRe.exec(c);if(a){b=Ext.getResourcePath(a[3],a[1],a[2])}}return b},urlEncode:function(){var a=Ext.Array.from(arguments),b="";if(Ext.isString(a[1])){b=a[1]+"&";a[1]=false}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(c){var b=Ext._scrollbarSize;if(c||!b){var a=document.body,d=document.createElement("div");d.style.width=d.style.height="100px";d.style.overflow="scroll";d.style.position="absolute";a.appendChild(d);Ext._scrollbarSize=b={width:d.offsetWidth-d.clientWidth,height:d.offsetHeight-d.clientHeight};a.removeChild(d)}return b},typeOf:(function(){var a=/\S/,c=Object.prototype.toString,d={number:1,string:1,"boolean":1,"undefined":1},b={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(g){if(g===null){return"null"}var f=typeof g,e,h;if(d[f]){return f}e=b[h=c.call(g)];if(e){return e}if(f==="function"){return"function"}if(f==="object"){if(g.nodeType!==undefined){if(g.nodeType===3){return a.test(g.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}return h}}()),factory:function(b,e,a,f){var d=Ext.ClassManager,c;if(!b||b.isInstance){if(a&&a!==b){a.destroy()}return b}if(f){if(typeof b==="string"){return d.instantiateByAlias(f+"."+b)}else{if(Ext.isObject(b)&&"type" in b){return d.instantiateByAlias(f+"."+b.type,b)}}}if(b===true){return a||Ext.create(e)}if("xtype" in b){c=d.instantiateByAlias("widget."+b.xtype,b)}else{if("xclass" in b){c=Ext.create(b.xclass,b)}}if(c){if(a){a.destroy()}return c}if(a){return a.setConfig(b)}return Ext.create(e,b)},log:(function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}())});(function(){var d=[""],h=/([^\d\.])/,b=/[^\d]/g,a=/[\-+]/g,g=/\s/g,c=/_/g,f={classic:1,modern:1},e;Ext.Version=e=function(r,n){var s=this,l=s.padModes,j,p,m,o,t,k,q;if(r.isVersion){r=r.version}s.version=q=String(r).toLowerCase().replace(c,".").replace(a,"");j=q.charAt(0);if(j in l){q=q.substring(1);m=l[j]}else{m=n?l[n]:0}s.pad=m;k=q.search(h);s.shortVersion=q;if(k!==-1){s.release=t=q.substr(k,r.length);s.shortVersion=q.substr(0,k);t=e.releaseValueMap[t]||t}s.releaseValue=t||m;s.shortVersion=s.shortVersion.replace(b,"");s.parts=o=q.split(".");for(p=o.length;p--;){o[p]=parseInt(o[p],10)}if(m===Infinity){o.push(m)}s.major=o[0]||m;s.minor=o[1]||m;s.patch=o[2]||m;s.build=o[3]||m;return s};e.prototype={isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",compareTo:function(t){var u=this,n=u.pad,r=u.parts,v=r.length,m=t.isVersion?t:new e(t),k=m.pad,q=m.parts,p=q.length,j=Math.max(v,p),o,l,s;for(o=0;o<j;o++){l=(o<v)?r[o]:n;s=(o<p)?q[o]:k;if(l<s){return -1}if(l>s){return 1}}l=u.releaseValue;s=m.releaseValue;if(l<s){return -1}if(l>s){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(i){return this.compareTo(i)>0},isGreaterThanOrEqual:function(i){return this.compareTo(i)>=0},isLessThan:function(i){return this.compareTo(i)<0},isLessThanOrEqual:function(i){return this.compareTo(i)<=0},equals:function(i){return this.compareTo(i)===0},match:function(i){i=String(i);return this.version.substr(0,i.length)===i},toArray:function(){var i=this;return[i.getMajor(),i.getMinor(),i.getPatch(),i.getBuild(),i.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(i){return this.compareTo(i)>0},lt:function(i){return this.compareTo(i)<0},gtEq:function(i){return this.compareTo(i)>=0},ltEq:function(i){return this.compareTo(i)<=0}};Ext.apply(e,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(i){return !i?0:(isNaN(i)?this.releaseValueMap[i]||i:parseInt(i,10))},compare:function(k,j){var i=k.isVersion?k:new e(k);return i.compareTo(j)},set:function(o,m,l){var k=e.aliases.to[m],j=l.isVersion?l:new e(l),n;o[m]=j;if(k){for(n=k.length;n-->0;){o[k[n]]=j}}return j}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(j){var i=Ext.compatVersions,k;if(!j){k=i.ext||i.touch||i.core}else{k=i[e.aliases.from[j]||j]}return k||Ext.getVersion(j)},setCompatVersion:function(j,i){e.set(Ext.compatVersions,j,i)},setVersion:function(j,i){if(j in f){Ext.toolkit=j}Ext.lastRegisteredVersion=e.set(Ext.versions,j,i);return this},getVersion:function(j){var i=Ext.versions;if(!j){return i.ext||i.touch||i.core}return i[e.aliases.from[j]||j]},checkVersion:function(p,x){var t=Ext.isArray(p),l=e.aliases.from,y=t?p:d,k=y.length,m=Ext.versions,w=m.ext||m.touch,q,v,s,n,o,j,z,r,u;if(!t){d[0]=p}for(q=0;q<k;++q){if(!Ext.isString(z=y[q])){s=Ext.checkVersion(z.and||z.or,!z.or);if(z.not){s=!s}}else{if(z.indexOf(" ")>=0){z=z.replace(g,"")}v=z.indexOf("@");if(v<0){r=z;u=w}else{j=z.substring(0,v);if(!(u=m[l[j]||j])){if(x){return false}continue}r=z.substring(v+1)}v=r.indexOf("-");if(v<0){if(r.charAt(v=r.length-1)==="+"){n=r.substring(0,v);o=null}else{n=o=r}}else{if(v>0){n=r.substring(0,v);o=r.substring(v+1)}else{n=null;o=r.substring(v+1)}}s=true;if(n){n=new e(n,"~");s=n.ltEq(u)}if(s&&o){o=new e(o,"~");s=o.gtEq(u)}}if(s){if(!x){return true}}else{if(x){return false}}}return !!x},deprecate:function(i,k,l,j){if(e.compare(Ext.getVersion(i),k)<1){l.call(j)}}})}());(function(d){var e=(d&&d.packages)||{},c=d&&d.compatibility,b,a;for(b in e){a=e[b];Ext.setVersion(b,a.version)}if(c){if(Ext.isString(c)){Ext.setCompatVersion("core",c)}else{for(b in c){Ext.setCompatVersion(b,c[b])}}}if(!e.ext&&!e.touch){Ext.setVersion("ext","6.0.1.250");Ext.setVersion("core","6.0.1.250")}})(Ext.manifest);Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b;c.names={internal:"_"+b,initializing:"is"+a+"Initializing",apply:"apply"+a,update:"update"+a,get:"get"+a,set:"set"+a,initGet:"initGet"+a,changeEvent:b.toLowerCase()+"change"};c.root=c};Ext.Config.map={};Ext.Config.get=function(b){var c=Ext.Config.map,a=c[b]||(c[b]=new Ext.Config(b));return a};Ext.Config.prototype={self:Ext.Config,isConfig:true,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(f,b,e,d){var a,c;if(!b){a=f}else{if(!f){a=b}else{a=Ext.Object.chain(b);for(c in f){if(!d||!(c in a)){a[c]=f[c]}}}}return a},mergeSets:function(e,c,a){var b=c?Ext.Object.chain(c):{},d,f;if(e instanceof Array){for(d=e.length;d--;){f=e[d];if(!a||!(f in b)){b[f]=true}}}else{if(e){if(e.constructor===Object){for(d in e){f=e[d];if(!a||!(d in b)){b[d]=f}}}else{if(!a||!(e in b)){b[e]=true}}}}return b},makeGetter:function(){var a=this.name,b=this.names.internal;return function(){var c=this.$configPrefixed?b:a;return this[c]}},makeInitGetter:function(){var a=this.name,e=this.names,d=e.set,b=e.get,c=e.initializing;return function(){var f=this;f[c]=true;delete f[b];f[d](f.config[a]);delete f[c];return f[b].apply(f,arguments)}},makeSetter:function(){var a=this.name,e=this.names,c=e.internal,d=e.get,b=e.apply,g=e.update,f;f=function(k){var j=this,i=j.$configPrefixed?c:a,h=j[i];delete j[d];if(!j[b]||(k=j[b](k,h))!==undefined){if(k!==(h=j[i])){j[i]=k;if(j[g]){j[g](k,h)}}}return j};f.$isDefault=true;return f},makeEventedSetter:function(){var b=this.name,g=this.names,i=g.internal,a=g.get,h=g.apply,d=g.update,f=g.changeEvent,e=function(l,m,j,k){l[k]=m;if(l[d]){l[d](m,j)}},c;c=function(m){var l=this,k=l.$configPrefixed?i:b,j=l[k];delete l[a];if(!l[h]||(m=l[h](m,j))!==undefined){if(m!==(j=l[k])){if(l.isConfiguring){l[k]=m;if(l[d]){l[d](m,j)}}else{l.fireEventedAction(f,[l,m,j],e,l,[l,m,j,k])}}}return l};c.$isDefault=true;return c}};(function(){var b=Ext.Config,c=b.map,a=Ext.Object;Ext.Configurator=function(d){var f=this,e=d.prototype,g=d.superclass?d.superclass.self.$config:null;f.cls=d;f.superCfg=g;if(g){f.configs=a.chain(g.configs);f.cachedConfigs=a.chain(g.cachedConfigs);f.initMap=a.chain(g.initMap);f.values=a.chain(g.values);f.needsFork=g.needsFork}else{f.configs={};f.cachedConfigs={};f.initMap={};f.values={}}e.config=e.defaultConfig=f.values;d.$config=f};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:false,initList:null,add:function(t,d){var u=this,h=u.cls,k=u.configs,v=u.cachedConfigs,m=u.initMap,p=h.prototype,w=d&&d.$config.configs,e=u.values,j,l,r,f,g,i,x,o,n,q;for(x in t){q=t[x];j=q&&q.constructor===Object;l=j&&"$value" in q?q:null;if(l){r=!!l.cached;q=l.$value;j=q&&q.constructor===Object}f=l&&l.merge;g=k[x];if(g){if(d){f=g.merge;if(!f){continue}l=null}else{f=f||g.merge}i=e[x];if(f){q=f.call(g,q,i,h,d)}else{if(j){if(i&&i.constructor===Object){q=a.merge({},i,q)}}}}else{if(w){g=w[x];l=null}else{g=b.get(x)}k[x]=g;if(g.cached||r){v[x]=true}o=g.names;if(!p[n=o.get]){p[n]=g.getter||g.getGetter()}if(!p[n=o.set]){p[n]=(l&&l.evented)?(g.eventedSetter||g.getEventedSetter()):(g.setter||g.getSetter())}}if(l){if(g.owner!==h){k[x]=g=Ext.Object.chain(g);g.owner=h}Ext.apply(g,l);delete g.$value}if(!u.needsFork&&q&&(q.constructor===Object||q instanceof Array)){u.needsFork=true}if(q!==null){m[x]=true}else{if(p.$configPrefixed){p[k[x].names.internal]=null}else{p[k[x].name]=null}if(x in m){m[x]=false}}e[x]=q}},configure:function(x,l){var z=this,k=z.configs,m=z.initMap,o=z.initListMap,v=z.initList,p=z.cls.prototype,e=z.values,q=0,s=!v,f,g,h,B,u,t,j,n,A,r,y,w,d;e=z.needsFork?a.fork(e):a.chain(e);x.isConfiguring=true;if(s){z.initList=v=[];z.initListMap=o={};x.isFirstInstance=true;for(A in m){B=m[A];g=k[A];y=g.cached;if(B){n=g.names;r=e[A];if(!p[n.set].$isDefault||p[n.apply]||p[n.update]||typeof r==="object"){if(y){(f||(f=[])).push(g)}else{v.push(g);o[A]=true}x[n.get]=g.initGetter||g.getInitGetter()}else{p[g.getInternalName(p)]=r}}else{if(y){p[g.getInternalName(p)]=undefined}}}}j=f&&f.length;if(j){for(u=0;u<j;++u){t=f[u].getInternalName(p);x[t]=null}for(u=0;u<j;++u){n=(g=f[u]).names;h=n.get;if(x.hasOwnProperty(h)){x[n.set](e[g.name]);delete x[h]}}for(u=0;u<j;++u){t=f[u].getInternalName(p);p[t]=x[t];delete x[t]}}if(l&&l.platformConfig){l=z.resolvePlatformConfig(x,l)}if(s){if(x.afterCachedConfig&&!x.afterCachedConfig.$nullFn){x.afterCachedConfig(l)}}x.config=e;for(u=0,j=v.length;u<j;++u){g=v[u];x[g.names.get]=g.initGetter||g.getInitGetter()}if(x.transformInstanceConfig){l=x.transformInstanceConfig(l)}if(l){for(A in l){r=l[A];g=k[A];if(!g){x[A]=r}else{if(!g.lazy){++q}if(!o[A]){x[g.names.get]=g.initGetter||g.getInitGetter()}if(g.merge){r=g.merge(r,e[A],x)}else{if(r&&r.constructor===Object){w=e[A];if(w&&w.constructor===Object){r=a.merge(e[A],r)}else{r=Ext.clone(r)}}}}e[A]=r}}if(x.beforeInitConfig&&!x.beforeInitConfig.$nullFn){if(x.beforeInitConfig(l)===false){return}}if(l){for(A in l){if(!q){break}g=k[A];if(g&&!g.lazy){--q;n=g.names;h=n.get;if(x.hasOwnProperty(h)){x[n.set](e[A]);delete x[n.get]}}}}for(u=0,j=v.length;u<j;++u){g=v[u];n=g.names;h=n.get;if(!g.lazy&&x.hasOwnProperty(h)){x[n.set](e[g.name]);delete x[h]}}delete x.isConfiguring},getCurrentConfig:function(e){var d=e.defaultConfig,g={},f;for(f in d){g[f]=e[c[f].names.get]()}return g},merge:function(d,i,g){var k=this.configs,f,j,h,e;for(f in g){j=g[f];e=k[f];if(e){if(e.merge){j=e.merge(j,i[f],d)}else{if(j&&j.constructor===Object){h=i[f];if(h&&h.constructor===Object){j=Ext.Object.merge(h,j)}else{j=Ext.clone(j)}}}}i[f]=j}return i},reconfigure:function(r,m,s){var h=r.config,j=[],q=r.$configStrict&&!(s&&s.strict===false),n=this.configs,f=s&&s.defaults,l,p,g,k,e,o,d;for(e in m){if(f&&r.hasOwnProperty(e)){continue}h[e]=m[e];l=n[e];if(l){r[l.names.get]=l.initGetter||l.getInitGetter()}else{d=r.self.prototype[e];if(q){if((typeof d==="function")&&!d.$nullFn){continue}}}j.push(e)}for(g=0,k=j.length;g<k;g++){e=j[g];l=n[e];if(l){o=l.names;p=o.get;if(r.hasOwnProperty(p)){r[o.set](m[e]);delete r[p]}}else{l=c[e]||Ext.Config.get(e);o=l.names;if(r[o.set]){r[o.set](m[e])}else{r[e]=m[e]}}}},resolvePlatformConfig:function(d,k){var h=k&&k.platformConfig,e=k,f,g,j;if(h){g=Ext.getPlatformConfigKeys(h);j=g.length;if(j){e=Ext.merge({},e);for(f=0,j=g.length;f<j;++f){this.merge(d,e,h[g[f]])}}}return e}}}());Ext.Base=(function(c){var b=[],i,k=[],l=function(p,o){var r=this,n,m,q;if(p){m=Ext.Config.map[p];q=m.names.get;if(o&&r.hasOwnProperty(q)){n=r.config[p]}else{n=r[q]()}}else{n=r.getCurrentConfig()}return n},f=function(m){return function(){return this[m].apply(this,arguments)}},a=Ext.Version,h=/^\d/,j={},e={},g=function(){},d=g.prototype;Ext.apply(g,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(s){var B=this,n=[],p=Ext.getCompatVersion(s.name),A,w,r,x,C,u,z,t,y,D,v,m,q,o;for(w in s){if(h.test(w)){o=new Ext.Version(w);o.deprecations=s[w];n.push(o)}}n.sort(a.compare);for(r=n.length;r--;){A=(o=n[r]).deprecations;C=B.prototype;q=A.statics;u=p&&p.lt(o);if(!u){break}while(A){y=A.methods;if(y){for(D in y){m=y[D];t=null;if(!m){}else{if(Ext.isString(m)){if(u){t=f(m)}}else{x="";if(m.message||m.fn){m=m.fn}z=C.hasOwnProperty(D)&&C[D];if(u&&m){m.$owner=B;m.$name=D;if(z){m.$previous=z}t=m}}}if(t){C[D]=t}}}A=q;q=null;C=B}}},extend:function(q){var s=this,m=q.prototype,o,p,r,n,t;o=s.prototype=Ext.Object.chain(m);o.self=s;s.superclass=o.superclass=m;if(!q.$isClass){for(p in d){if(p in o){o[p]=d[p]}}}t=m.$inheritableStatics;if(t){for(p=0,r=t.length;p<r;p++){n=t[p];if(!s.hasOwnProperty(n)){s[n]=q[n]}}}if(q.$onExtended){s.$onExtended=q.$onExtended.slice()}s.getConfigurator()},$onExtended:[],triggerExtended:function(){var o=this.$onExtended,n=o.length,m,p;if(n>0){for(m=0;m<n;m++){p=o[m];p.fn.apply(p.scope||this,arguments)}}},onExtended:function(n,m){this.$onExtended.push({fn:n,scope:m});return this},addStatics:function(m){this.addMembers(m,true);return this},addInheritableStatics:function(n){var q,m,p=this.prototype,o,r;q=p.$inheritableStatics;m=p.$hasInheritableStatics;if(!q){q=p.$inheritableStatics=[];m=p.$hasInheritableStatics={}}for(o in n){if(n.hasOwnProperty(o)){r=n[o];this[o]=r;if(!m[o]){m[o]=true;q.push(o)}}}return this},addMembers:function(q,B,n){var z=this,u=Ext.Function.clone,x=B?z:z.prototype,r=!B&&x.defaultConfig,A=Ext.enumerables,v=q.privates,w,t,y,s,m,o,p;if(v){delete q.privates;if(!B){p=v.statics;delete v.statics}z.addMembers(v,B,o);if(p){z.addMembers(p,true,o)}}for(m in q){if(q.hasOwnProperty(m)){s=q[m];if(typeof s==="function"&&!s.$isClass&&!s.$nullFn){if(s.$owner){s=u(s)}if(x.hasOwnProperty(m)){s.$previous=x[m]}s.$owner=z;s.$name=m}else{if(r&&(m in r)&&!x.config.hasOwnProperty(m)){(w||(w={}))[m]=s;continue}}x[m]=s}}if(w){z.addConfig(w)}if(A){for(t=0,y=A.length;t<y;++t){if(q.hasOwnProperty(m=A[t])){s=q[m];if(s&&!s.$nullFn){if(s.$owner){s=u(s)}s.$owner=z;s.$name=m;if(x.hasOwnProperty(m)){s.$previous=x[m]}}x[m]=s}}}return this},addMember:function(m,n){j[m]=n;this.addMembers(j);delete j[m];return this},borrow:function(s,m){var o=s.prototype,q={},p,r,n;m=Ext.Array.from(m);for(p=0,r=m.length;p<r;p++){n=m[p];q[n]=o[n]}return this.addMembers(q)},override:function(n){var p=this,s=n.statics,r=n.inheritableStatics,o=n.config,m=n.mixins,q=n.cachedConfig;if(s||r||o){n=Ext.apply({},n)}if(s){p.addMembers(s,true);delete n.statics}if(r){p.addInheritableStatics(r);delete n.inheritableStatics}if(o){p.addConfig(o);delete n.config}if(q){p.addCachedConfig(q);delete n.cachedConfig}delete n.mixins;p.addMembers(n);if(m){p.mixin(m)}return p},callParent:function(m){var n;return(n=this.callParent.caller)&&(n.$previous||((n=n.$owner?n:n.caller)&&n.$owner.superclass.self[n.$name])).apply(this,m||b)},callSuper:function(m){var n;return(n=this.callSuper.caller)&&((n=n.$owner?n:n.caller)&&n.$owner.superclass.self[n.$name]).apply(this,m||b)},mixin:function(m,n){var s=this,y,u,x,t,o,r,w,v,q;if(typeof m!=="string"){q=m;if(q instanceof Array){for(o=0,r=q.length;o<r;o++){y=q[o];s.mixin(y.prototype.mixinId||y.$className,y)}}else{for(var p in q){s.mixin(p,q[p])}}return}y=n.prototype;u=s.prototype;if(y.onClassMixedIn){y.onClassMixedIn.call(n,s)}if(!u.hasOwnProperty("mixins")){if("mixins" in u){u.mixins=Ext.Object.chain(u.mixins)}else{u.mixins={}}}for(x in y){v=y[x];if(x==="mixins"){Ext.applyIf(u.mixins,v)}else{if(!(x==="mixinId"||x==="config")&&(u[x]===undefined)){u[x]=v}}}t=y.$inheritableStatics;if(t){for(o=0,r=t.length;o<r;o++){w=t[o];if(!s.hasOwnProperty(w)){s[w]=n[w]}}}if("config" in y){s.addConfig(y.config,n)}u.mixins[m]=y;if(y.afterClassMixedIn){y.afterClassMixedIn.call(n,s)}return s},addConfig:function(n,o){var m=this.$config||this.getConfigurator();m.add(n,o)},addCachedConfig:function(m,o){var p={},n;for(n in m){p[n]={cached:true,$value:m[n]}}this.addConfig(p,o)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:c(function(n,m){e[n]=function(){return this[m].apply(this,arguments)};this.override(e);delete e[n]})});for(i in g){if(g.hasOwnProperty(i)){k.push(i)}}g.$staticMembers=k;g.getConfigurator();g.addMembers({$className:"Ext.Base",isInstance:true,$configPrefixed:true,$configStrict:true,isConfiguring:false,isFirstInstance:false,destroyed:false,statics:function(){var n=this.statics.caller,m=this.self;if(!n){return m}return n.$owner},callParent:function(n){var o,m=(o=this.callParent.caller)&&(o.$previous||((o=o.$owner?o:o.caller)&&o.$owner.superclass[o.$name]));return m.apply(this,n||b)},callSuper:function(n){var o,m=(o=this.callSuper.caller)&&((o=o.$owner?o:o.caller)&&o.$owner.superclass[o.$name]);return m.apply(this,n||b)},self:g,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(o){var n=this,m=n.getConfigurator();n.initConfig=Ext.emptyFn;n.initialConfig=o||{};m.configure(n,o);return n},beforeInitConfig:Ext.emptyFn,getConfig:l,setConfig:function(o,q,n){var p=this,m;if(o){if(typeof o==="string"){m={};m[o]=q}else{m=o}p.getConfigurator().reconfigure(p,m,n)}return p},getCurrentConfig:function(){var m=this.getConfigurator();return m.getCurrentConfig(this)},hasConfig:function(m){return m in this.defaultConfig},getInitialConfig:function(n){var m=this.config;if(!n){return m}return m[n]},$links:null,link:function(n,p){var o=this,m=o.$links||(o.$links={});m[n]=true;o[n]=p;return p},unlink:function(r){var p=this,m,o,n,q;for(m=0,o=r.length;m<o;m++){n=r[m];q=p[n];if(q){if(q.isInstance&&!q.destroyed){q.destroy()}else{if(q.parentNode&&"nodeType" in q){q.parentNode.removeChild(q)}}}p[n]=null}return p},destroy:function(){var n=this,m=n.$links;n.initialConfig=n.config=null;n.destroy=Ext.emptyFn;n.isDestroyed=n.destroyed=true;if(m){n.$links=null;n.unlink(Ext.Object.getKeys(m))}}});d.callOverridden=d.callParent;return g}(Ext.Function.flexSetter));(function(b,a){(Ext.util||(Ext.util={})).Cache=b=function(c){var e=this,d;if(c){Ext.apply(e,c)}e.head=d={key:null,value:null};e.map={};d.next=d.prev=d};b.prototype=a={maxSize:100,count:0,clear:function(){var e=this,c=e.head,d=c.next;c.next=c.prev=c;if(!e.evict.$nullFn){for(;d!==c;d=d.next){e.evict(d.key,d.value)}}e.count=0},each:function(e,d){d=d||this;for(var c=this.head,f=c.next;f!==c;f=f.next){if(e.call(d,f.key,f.value)){break}}},get:function(d){var f=this,c=f.head,g=f.map,e=g[d];if(e){if(e.prev!==c){f.unlinkEntry(e);f.linkEntry(e)}}else{g[d]=e={key:d,value:f.miss.apply(f,arguments)};f.linkEntry(e);++f.count;while(f.count>f.maxSize){f.unlinkEntry(c.prev,true);--f.count}}return e.value},evict:Ext.emptyFn,linkEntry:function(d){var c=this.head,e=c.next;d.next=e;d.prev=c;c.next=d;e.prev=d},unlinkEntry:function(e,f){var c=e.next,d=e.prev;d.next=c;c.prev=d;if(f){this.evict(e.key,e.value)}}};a.destroy=a.clear}());(function(){var d,c=Ext.Base,e=c.$staticMembers,b=function(g,f){return(g.length-f.length)||((g<f)?-1:((g>f)?1:0))};function a(g){function f(){return this.constructor.apply(this,arguments)||null}return f}Ext.Class=d=function(g,h,f){if(typeof g!="function"){f=h;h=g;g=null}if(!h){h={}}g=d.create(g,h);d.process(g,h,f);return g};Ext.apply(d,{makeCtor:a,onBeforeCreated:function(g,h,f){g.addMembers(h);f.onCreated.call(g,g)},create:function(f,j){var h=e.length,g;if(!f){f=a()}while(h--){g=e[h];f[g]=c[g]}return f},process:function(f,n,h){var g=n.preprocessors||d.defaultPreprocessors,q=this.preprocessors,t={onBeforeCreated:this.onBeforeCreated},s=[],u,m,l,r,k,p,o;delete n.preprocessors;f._classHooks=t;for(l=0,r=g.length;l<r;l++){u=g[l];if(typeof u=="string"){u=q[u];m=u.properties;if(m===true){s.push(u.fn)}else{if(m){for(k=0,p=m.length;k<p;k++){o=m[k];if(n.hasOwnProperty(o)){s.push(u.fn);break}}}}}else{s.push(u)}}t.onCreated=h?h:Ext.emptyFn;t.preprocessors=s;this.doProcess(f,n,t)},doProcess:function(g,k,f){var j=this,l=f.preprocessors,h=l.shift(),i=j.doProcess;for(;h;h=l.shift()){if(h.call(j,g,k,f,i)===false){return}}f.onBeforeCreated.apply(j,arguments)},preprocessors:{},registerPreprocessor:function(g,j,h,f,i){if(!f){f="last"}if(!h){h=[g]}this.preprocessors[g]={name:g,properties:h||false,fn:j};this.setDefaultPreprocessorPosition(g,f,i);return this},getPreprocessor:function(f){return this.preprocessors[f]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(f){this.defaultPreprocessors=Ext.Array.from(f);return this},setDefaultPreprocessorPosition:function(h,j,i){var f=this.defaultPreprocessors,g;if(typeof j=="string"){if(j==="first"){f.unshift(h);return this}else{if(j==="last"){f.push(h);return this}}j=(j==="after")?1:-1}g=Ext.Array.indexOf(f,i);if(g!==-1){Ext.Array.splice(f,Math.max(0,g+j),0,h)}return this}});d.registerPreprocessor("extend",function(g,j,o){var k=Ext.Base,l=k.prototype,m=j.extend,f,n,h;delete j.extend;if(m&&m!==Object){f=m}else{f=k}n=f.prototype;if(!f.$isClass){for(h in l){if(!n[h]){n[h]=l[h]}}}g.extend(f);g.triggerExtended.apply(g,arguments);if(j.onClassExtended){g.onExtended(j.onClassExtended,g);delete j.onClassExtended}},true);d.registerPreprocessor("privates",function(f,i){var h=i.privates,j=h.statics,g=h.privacy||true;delete i.privates;delete h.statics;f.addMembers(h,false,g);if(j){f.addMembers(j,true,g)}});d.registerPreprocessor("statics",function(f,g){f.addStatics(g.statics);delete g.statics});d.registerPreprocessor("inheritableStatics",function(f,g){f.addInheritableStatics(g.inheritableStatics);delete g.inheritableStatics});Ext.createRuleFn=function(f){return new Function("$c","with($c) { return ("+f+"); }")};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=b;Ext.getPlatformConfigKeys=function(h){var g=[],f,i;for(f in h){i=Ext.expressionCache.get(f);if(i(Ext.platformTags)){g.push(f)}}g.sort(b);return g};d.registerPreprocessor("platformConfig",function(h,m,t){var n=m.platformConfig,j=m.config,r,o,p,k,g,u,f,s,l,q;delete m.platformConfig;k=h.getConfigurator();o=k.configs;u=Ext.getPlatformConfigKeys(n);for(l=0,q=u.length;l<q;++l){p=n[u[l]];g=r=null;for(f in p){s=p[f];if(j&&f in j){(r||(r={}))[f]=s;(g||(g={}))[f]=j[f];delete j[f]}else{if(f in o){(r||(r={}))[f]=s}else{m[f]=s}}}if(g){k.add(g)}if(r){k.add(r)}}});d.registerPreprocessor("config",function(f,g){if(g.hasOwnProperty("$configPrefixed")){f.prototype.$configPrefixed=g.$configPrefixed}f.addConfig(g.config);delete g.config});d.registerPreprocessor("cachedConfig",function(f,g){if(g.hasOwnProperty("$configPrefixed")){f.prototype.$configPrefixed=g.$configPrefixed}f.addCachedConfig(g.cachedConfig);delete g.cachedConfig});d.registerPreprocessor("mixins",function(i,j,f){var h=j.mixins,g=f.onCreated;delete j.mixins;f.onCreated=function(){f.onCreated=g;i.mixin(h);return f.onCreated.apply(this,arguments)}});Ext.extend=function(h,i,g){if(arguments.length===2&&Ext.isObject(i)){g=i;i=h;h=null}var f;if(!i){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}g.extend=i;g.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"];if(h){f=new d(h,g);f.prototype.constructor=h}else{f=new d(g)}f.prototype.override=function(k){for(var j in k){if(k.hasOwnProperty(j)){this[j]=k[j]}}};return f}}());Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(b,a,c){return this.addMapping(b,a,this.aliasToName,this.nameToAliases,c)},addAlternate:function(a,b){return this.addMapping(a,b,this.alternateToName,this.nameToAlternates)},addMapping:function(l,e,f,o,g){var b=l.$className||l,j=b,k=this._array1,n,d,p,h,c,m;if(Ext.isString(b)){j={};j[b]=e}for(p in j){d=j[p];if(Ext.isString(d)){k[0]=d;d=k}c=d.length;m=o[p]||(o[p]=[]);for(h=0;h<c;++h){if(!(n=d[h])){continue}if(f[n]!==p){f[n]=p;m.push(n)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||""},getNameByAlternate:function(a){return this.alternateToName[a]||""},getNamesByExpression:function(l,a,h){var u=this,r=u.aliasToName,o=u.alternateToName,b=u.nameToAliases,d=u.nameToAlternates,t=h?a:{},k=[],s=Ext.isString(l)?[l]:l,g=s.length,e=u.wildcardRe,c,p,q,j,m,v,f;for(p=0;p<g;++p){if((c=s[p]).indexOf("*")<0){if(!(v=r[c])){if(!(v=o[c])){v=c}}if(!(v in t)&&!(a&&(v in a))){t[v]=1;k.push(v)}}else{f=new RegExp("^"+c.replace(e,"(.*?)")+"$");for(v in b){if(!(v in t)&&!(a&&(v in a))){if(!(j=f.test(v))){m=(q=b[v]).length;while(!j&&m-->0){j=f.test(q[m])}q=d[v];if(q&&!j){m=q.length;while(!j&&m-->0){j=f.test(q[m])}}}if(j){t[v]=1;k.push(v)}}}}}return k},getPath:function(b){var c=this,e=c.paths,a="",d;if(b in e){a=e[b]}else{d=c.getPrefix(b);if(d){b=b.substring(d.length+1);a=e[d];if(a){a+="/"}}a+=b.replace(c.dotRe,"/")+".js"}return a},getPrefix:function(b){if(b in this.paths){return b}var e=this.getPrefixes(),a=e.length,c,d;while(a-->0){c=(d=e[a]).length;if(c<b.length&&b.charAt(c)==="."&&d===b.substring(0,c)){return d}}return""},getPrefixes:function(){var a=this,b=a.prefixes;if(!b){a.prefixes=b=a.names.slice(0);b.sort(a._compareNames)}return b},removeName:function(b){var f=this,j=f.aliasToName,l=f.alternateToName,k=f.nameToAliases,e=f.nameToAlternates,c=k[b],g=e[b],d,h;delete k[b];delete e[b];if(c){for(d=c.length;d--;){if(b===(h=c[d])){delete j[h]}}}if(g){for(d=g.length;d--;){if(b===(h=g[d])){delete l[h]}}}},resolveName:function(a){var b=this,c;if(!(a in b.nameToAliases)){if(!(c=b.aliasToName[a])){c=b.alternateToName[a]}}return c||a},select:function(e,c){var d=this,f={},b={excludes:f,exclude:function(){d.getNamesByExpression(arguments,f,true);return this}},a;for(a in e){b[a]=d.selectMethod(f,e[a],c||e)}return b},selectMethod:function(d,b,a){var c=this;return function(e){var f=Ext.Array.slice(arguments,1);f.unshift(c.getNamesByExpression(e,d));return b.apply(a,f)}},setPath:Ext.Function.flexSetter(function(a,c){var b=this;b.paths[a]=c;b.names.push(a);b.prefixes=null;return b}),_compareNames:function(a,c){var b=a.length-c.length;if(!b){b=(a<c)?-1:1}return b}};Ext.ClassManager=(function(p,k,r,e,n){var b=Ext.Class.makeCtor,g=[],h={Ext:{name:"Ext",value:Ext}},c=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(t){if(c.classes[t]||c.existCache[t]){return true}if(!c.lookupName(t,false)){return false}c.triggerCreated(t);return true},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(t,u){c.existCache[t]=u||1;c.classState[t]+=40;c.notify(t,c.createdListeners,c.nameCreatedListeners)},onCreated:function(v,u,t){c.addListener(v,u,t,c.createdListeners,c.nameCreatedListeners)},notify:function(B,D,v){var w=c.getAlternatesByName(B),C=[B],y,A,x,z,u,t;for(y=0,A=D.length;y<A;y++){u=D[y];u.fn.call(u.scope,B)}while(C){for(y=0,A=C.length;y<A;y++){t=C[y];D=v[t];if(D){for(x=0,z=D.length;x<z;x++){u=D[x];u.fn.call(u.scope,t)}delete v[t]}}C=w;w=null}},addListener:function(y,x,w,v,u){if(Ext.isArray(w)){y=Ext.Function.createBarrier(w.length,y,x);for(t=0;t<w.length;t++){this.addListener(y,null,w[t],v,u)}return}var t,z={fn:y,scope:x};if(w){if(this.isCreated(w)){y.call(x,w);return}if(!u[w]){u[w]=[]}u[w].push(z)}else{v.push(z)}},$namespaceCache:h,addRootNamespaces:function(u){for(var t in u){h[t]={name:t,value:u[t]}}},clearNamespaceCache:function(){g.length=0;for(var t in h){if(!h[t].value){delete h[t]}}},getNamespaceEntry:function(u){if(typeof u!=="string"){return u}var v=h[u],t;if(!v){t=u.lastIndexOf(".");if(t<0){v={name:u}}else{v={name:u.substring(t+1),parent:c.getNamespaceEntry(u.substring(0,t))}}h[u]=v}return v},lookupName:function(w,y){var x=c.getNamespaceEntry(w),v=Ext.global,t=0,z,u;for(z=x;z;z=z.parent){g[t++]=z}while(v&&t-->0){z=g[t];u=v;v=z.value||v[z.name];if(!v&&y){u[z.name]=v={}}}return v},setNamespace:function(u,w){var v=c.getNamespaceEntry(u),t=Ext.global;if(v.parent){t=c.lookupName(v.parent,true)}t[v.name]=w;return w},setXType:function(t,A){var v=t.$className,z=v?t:c.get(v=t),w=z.prototype,x=w.xtypes,u=w.xtypesChain,y=w.xtypesMap;if(!w.hasOwnProperty("xtypes")){w.xtypes=x=[];w.xtypesChain=u=u?u.slice(0):[];w.xtypesMap=y=Ext.apply({},y)}c.addAlias(v,"widget."+A,true);x.push(A);u.push(A);y[A]=true},set:function(t,v){var u=c.getName(v);c.classes[t]=c.setNamespace(t,v);if(u&&u!==t){c.addAlternate(u,t)}return c},get:function(t){return c.classes[t]||c.lookupName(t,false)},addNameAliasMappings:function(t){c.addAlias(t)},addNameAlternateMappings:function(t){c.addAlternate(t)},getByAlias:function(t){return c.get(c.getNameByAlias(t))},getByConfig:function(u,v){var w=u.xclass,t;if(w){t=w}else{t=u.xtype;if(t){v="widget."}else{t=u.type}t=c.getNameByAlias(v+t)}return c.get(t)},getName:function(t){return t&&t.$className||""},getClass:function(t){return t&&t.self||null},create:function(u,w,t){var v=b(u);if(typeof w==="function"){w=w(v)}w.$className=u;return new p(v,w,function(){var x=w.postprocessors||c.defaultPostprocessors,E=c.postprocessors,F=[],D,z,C,y,B,A,G;delete w.postprocessors;for(z=0,C=x.length;z<C;z++){D=x[z];if(typeof D==="string"){D=E[D];A=D.properties;if(A===true){F.push(D.fn)}else{if(A){for(y=0,B=A.length;y<B;y++){G=A[y];if(w.hasOwnProperty(G)){F.push(D.fn);break}}}}}else{F.push(D)}}w.postprocessors=F;w.createdFn=t;c.processCreate(u,this,w)})},processCreate:function(w,u,y){var x=this,t=y.postprocessors.shift(),v=y.createdFn;if(!t){if(w){x.set(w,u)}delete u._classHooks;if(v){v.call(u,u)}if(w){x.triggerCreated(w)}return}if(t.call(x,w,u,y,x.processCreate)!==false){x.processCreate(w,u,y)}},createOverride:function(z,x,v){var B=this,C=x.override,E=x.requires,w=x.uses,y=x.mixins,t,D=1,A,u=function(){var F,J,I,H,G;if(!A){J=E?E.slice(0):[];if(y){if(!(t=y instanceof Array)){for(H in y){if(Ext.isString(F=y[H])){J.push(F)}}}else{for(I=0,G=y.length;I<G;++I){if(Ext.isString(F=y[I])){J.push(F)}}}}A=true;if(J.length){Ext.require(J,u);return}}if(t){for(I=0,G=y.length;I<G;++I){if(Ext.isString(F=y[I])){y[I]=Ext.ClassManager.get(F)}}}else{if(y){for(H in y){if(Ext.isString(F=y[H])){y[H]=Ext.ClassManager.get(F)}}}}F=B.get(C);delete x.override;delete x.compatibility;delete x.requires;delete x.uses;Ext.override(F,x);Ext.Loader.history.push(z);if(w){Ext.Loader.addUsedClasses(w)}if(v){v.call(F,F)}};c.overrideMap[z]=true;if("compatibility" in x&&Ext.isString(D=x.compatibility)){D=Ext.checkVersion(D)}if(D){B.onCreated(u,B,C)}B.triggerCreated(z,2);return B},instantiateByAlias:function(){var u=arguments[0],t=r.call(arguments),v=this.getNameByAlias(u);t[0]=v;return Ext.create.apply(Ext,t)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(u,t){t=e(t,true);t.unshift(u);return Ext.create.apply(Ext,t)},getInstantiator:function(w){var v=this.instantiators,x,u,t;x=v[w];if(!x){u=w;t=[];for(u=0;u<w;u++){t.push("a["+u+"]")}x=v[w]=new Function("c","a","return new c("+t.join(",")+")")}return x},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(u,x,v,t,w){if(!t){t="last"}if(!v){v=[u]}this.postprocessors[u]={name:u,properties:v||false,fn:x};this.setDefaultPostprocessorPosition(u,t,w);return this},setDefaultPostprocessors:function(t){this.defaultPostprocessors=e(t);return this},setDefaultPostprocessorPosition:function(u,x,w){var v=this.defaultPostprocessors,t;if(typeof x==="string"){if(x==="first"){v.unshift(u);return this}else{if(x==="last"){v.push(u);return this}}x=(x==="after")?1:-1}t=Ext.Array.indexOf(v,w);if(t!==-1){Ext.Array.splice(v,Math.max(0,t+x),0,u)}return this}});c.registerPostprocessor("alias",function(v,u,y){var t=Ext.Array.from(y.alias),w,x;for(w=0,x=t.length;w<x;w++){k=t[w];this.addAlias(u,k)}},["xtype","alias"]);c.registerPostprocessor("singleton",function(u,t,w,v){if(w.singleton){v.call(this,u,new t(),w)}else{return true}return false});c.registerPostprocessor("alternateClassName",function(u,t,y){var w=y.alternateClassName,v,x,z;if(!(w instanceof Array)){w=[w]}for(v=0,x=w.length;v<x;v++){z=w[v];this.set(z,t)}});c.registerPostprocessor("debugHooks",function(u,t,v){var w=t.isInstance?t.self:t;delete w.prototype.debugHooks});c.registerPostprocessor("deprecated",function(u,t,v){var w=t.isInstance?t.self:t;w.addDeprecations(v.deprecated);delete w.prototype.deprecated});Ext.apply(Ext,{create:function(){var v=arguments[0],w=typeof v,u=r.call(arguments,1),t;if(w==="function"){t=v}else{if(w!=="string"&&u.length===0){u=[v];if(!(v=v.xclass)){v=u[0].xtype;if(v){v="widget."+v}}}v=c.resolveName(v);t=c.get(v)}if(!t){Ext.syncRequire(v);t=c.get(v)}return c.getInstantiator(u.length)(t,u)},widget:function(v,u){var y=v,w,x,t;if(typeof y!=="string"){u=v;y=u.xtype;x=u.xclass}else{u=u||{}}if(u.isComponent){return u}if(!x){w="widget."+y;x=c.getNameByAlias(w)}if(x){t=c.get(x)}if(!t){return Ext.create(x||w,u)}return new t(u)},createByAlias:k(c,"instantiateByAlias"),define:function(u,v,t){if(v.override){c.classState[u]=20;return c.createOverride.apply(c,arguments)}c.classState[u]=10;return c.create.apply(c,arguments)},undefine:function(v){var t=c.classes;delete t[v];delete c.existCache[v];delete c.classState[v];c.removeName(v);var w=c.getNamespaceEntry(v),u=w.parent?c.lookupName(w.parent,false):Ext.global;if(u){try{delete u[w.name]}catch(x){u[w.name]=undefined}}},getClassName:k(c,"getName"),getDisplayName:function(t){if(t){if(t.displayName){return t.displayName}if(t.$name&&t.$class){return Ext.getClassName(t.$class)+"#"+t.$name}if(t.$className){return t.$className}}return"Anonymous"},getClass:k(c,"getClass"),namespace:function(){var t=n,u;for(u=arguments.length;u-->0;){t=c.lookupName(arguments[u],true)}return t}});Ext.addRootNamespaces=c.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;p.registerPreprocessor("className",function(t,u){if("$className" in u){t.$className=u.$className}},true,"first");p.registerPreprocessor("alias",function(E,y){var C=E.prototype,v=e(y.xtype),t=e(y.alias),F="widget.",D=F.length,z=Array.prototype.slice.call(C.xtypesChain||[]),w=Ext.merge({},C.xtypesMap||{}),x,B,A,u;for(x=0,B=t.length;x<B;x++){A=t[x];if(A.substring(0,D)===F){u=A.substring(D);Ext.Array.include(v,u)}}E.xtype=y.xtype=v[0];y.xtypes=v;for(x=0,B=v.length;x<B;x++){u=v[x];if(!w[u]){w[u]=true;z.push(u)}}y.xtypesChain=z;y.xtypesMap=w;Ext.Function.interceptAfter(y,"onClassCreated",function(){var G=C.mixins,I,H;for(I in G){if(G.hasOwnProperty(I)){H=G[I];v=H.xtypes;if(v){for(x=0,B=v.length;x<B;x++){u=v[x];if(!w[u]){w[u]=true;z.push(u)}}}}}});for(x=0,B=v.length;x<B;x++){u=v[x];Ext.Array.include(t,F+u)}y.alias=t},["xtype","alias"]);if(Ext.manifest){var f=Ext.manifest,q=f.classes,m=f.paths,o={},i={},d,j,s,l,a;if(m){if(f.bootRelative){a=Ext.Boot.baseUrl;for(l in m){if(m.hasOwnProperty(l)){m[l]=a+m[l]}}}c.setPath(m)}if(q){for(d in q){i[d]=[];o[d]=[];j=q[d];if(j.alias){o[d]=j.alias}if(j.alternates){i[d]=j.alternates}}}c.addAlias(o);c.addAlternate(i)}return c}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));(Ext.env||(Ext.env={})).Browser=function(t,n){var u=this,a=Ext.Boot.browserPrefixes,c=Ext.Boot.browserNames,b=u.enginePrefixes,j=u.engineNames,q=t.match(new RegExp("((?:"+Ext.Object.getValues(a).join(")|(?:")+"))([\\w\\._]+)")),g=t.match(new RegExp("((?:"+Ext.Object.getValues(b).join(")|(?:")+"))([\\w\\._]+)")),p=c.other,s=j.other,l="",f="",d="",h=false,o,m,k,v,r;u.userAgent=t;if(/Edge\//.test(t)){q=t.match(/(Edge\/)([\w.]+)/)}if(q){p=c[Ext.Object.getKey(a,q[1])];if(p==="Safari"&&/^Opera/.test(t)){p="Opera"}l=new Ext.Version(q[2])}if(g){s=j[Ext.Object.getKey(b,g[1])];f=new Ext.Version(g[2])}if(s==="Trident"&&p!=="IE"){p="IE";var e=t.match(/.*rv:(\d+.\d+)/);if(e&&e.length){e=e[1];l=new Ext.Version(e)}}if(p&&l){Ext.setVersion(p,l)}if(t.match(/FB/)&&p==="Other"){p=c.safari;s=j.webkit}if(t.match(/Android.*Chrome/g)){p="ChromeMobile"}if(t.match(/OPR/)){p="Opera";q=t.match(/OPR\/(\d+.\d+)/);l=new Ext.Version(q[1])}Ext.apply(this,{engineName:s,engineVersion:f,name:p,version:l});this.setFlag(p,true,n);if(l){d=l.getMajor()||"";if(u.is.IE){d=parseInt(d,10);k=document.documentMode;if(k===7||(d===7&&k!==8&&k!==9&&k!==10)){d=7}else{if(k===8||(d===8&&k!==8&&k!==9&&k!==10)){d=8}else{if(k===9||(d===9&&k!==7&&k!==8&&k!==10)){d=9}else{if(k===10||(d===10&&k!==7&&k!==8&&k!==9)){d=10}else{if(k===11||(d===11&&k!==7&&k!==8&&k!==9&&k!==10)){d=11}}}}}r=Math.max(d,Ext.Boot.maxIEVersion);for(o=7;o<=r;++o){m="isIE"+o;if(d<=o){Ext[m+"m"]=true}if(d===o){Ext[m]=true}if(d>=o){Ext[m+"p"]=true}}}if(u.is.Opera&&parseInt(d,10)<=12){Ext.isOpera12m=true}Ext.chromeVersion=Ext.isChrome?d:0;Ext.firefoxVersion=Ext.isFirefox?d:0;Ext.ieVersion=Ext.isIE?d:0;Ext.operaVersion=Ext.isOpera?d:0;Ext.safariVersion=Ext.isSafari?d:0;Ext.webKitVersion=Ext.isWebKit?d:0;this.setFlag(p+d,true,n);this.setFlag(p+l.getShortVersion())}for(o in c){if(c.hasOwnProperty(o)){v=c[o];this.setFlag(v,p===v)}}this.setFlag(v);if(f){this.setFlag(s+(f.getMajor()||""));this.setFlag(s+f.getShortVersion())}for(o in j){if(j.hasOwnProperty(o)){v=j[o];this.setFlag(v,s===v,n)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){h=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(t)){h=true}this.setFlag("WebView",h);this.isStrict=Ext.isStrict=document.compatMode==="CSS1Compat";this.isSecure=Ext.isSecure;this.identity=p+d+(this.isStrict?"Strict":"Quirks")};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(a){return !!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(a,c,b){if(c===undefined){c=true}this.is[a]=c;this.is[a.toLowerCase()]=c;if(b){Ext["is"+a]=c}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(a){var b=this.propertyPrefixes[this.engineName];if(b.length>0){return b+Ext.String.capitalize(a)}return a},getPreferredTranslationMethod:function(a){if(typeof a==="object"&&"translationMethod" in a&&a.translationMethod!=="auto"){return a.translationMethod}else{return"csstransform"}}};(function(a){Ext.browser=new Ext.env.Browser(a,true);Ext.userAgent=a.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent));Ext.env.OS=function(o,b,l){var k=this,j=Ext.Boot.osNames,d=Ext.Boot.osPrefixes,a,h="",f=k.is,c,g,e,n,m;l=l||Ext.browser;for(c in d){if(d.hasOwnProperty(c)){g=d[c];e=o.match(new RegExp("(?:"+g+")([^\\s;]+)"));if(e){a=j[c];m=e[1];if(m&&m==="HTC_"){h=new Ext.Version("2.3")}else{if(m&&m==="Silk/"){h=new Ext.Version("2.3")}else{h=new Ext.Version(e[e.length-1])}}break}}}if(!a){a=j[(o.toLowerCase().match(/mac|win|linux/)||["other"])[0]];h=new Ext.Version("")}this.name=a;this.version=h;if(b){this.setFlag(b.replace(/ simulator$/i,""))}this.setFlag(a);if(h){this.setFlag(a+(h.getMajor()||""));this.setFlag(a+h.getShortVersion())}for(c in j){if(j.hasOwnProperty(c)){n=j[c];if(!f.hasOwnProperty(a)){this.setFlag(n,(a===n))}}}if(this.name==="iOS"&&window.screen.height===568){this.setFlag("iPhone5")}if(l.is.Safari||l.is.Silk){if(this.is.Android2||this.is.Android3||l.version.shortVersion===501){l.setFlag("AndroidStock")}if(this.is.Android4){l.setFlag("AndroidStock");l.setFlag("AndroidStock4")}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return !!this[a]},name:null,version:null,setFlag:function(a,b){if(b===undefined){b=true}if(this.flags){this.flags[a]=b}this.is[a]=b;this.is[a.toLowerCase()]=b;return this}};(function(){var a=Ext.global.navigator,g=a.userAgent,f=Ext.env.OS,e=(Ext.is||(Ext.is={})),h,d,b;f.prototype.flags=e;Ext.os=h=new f(g,a.platform);d=h.name;Ext["is"+d]=true;Ext.isMac=e.Mac=e.MacOS;var i=window.location.search.match(/deviceType=(Tablet|Phone)/),c=window.deviceType;if(i&&i[1]){b=i[1]}else{if(c==="iPhone"){b="Phone"}else{if(c==="iPad"){b="Tablet"}else{if(!h.is.Android&&!h.is.iOS&&!h.is.WindowsPhone&&/Windows|Linux|MacOS/.test(d)){b="Desktop";Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else{if(h.is.iPad||h.is.RIMTablet||h.is.Android3||Ext.browser.is.Silk||(h.is.Android&&g.search(/mobile/i)===-1)){b="Tablet"}else{b="Phone"}}}}}h.setFlag(b,true);h.deviceType=b;delete f.prototype.flags}());Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a="div"}else{if(typeof a!=="string"){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(c,b){var d=this.getTestElement(b).style,a=Ext.String.capitalize(c);if(typeof d[c]!=="undefined"||typeof d[Ext.browser.getStylePrefix(c)+a]!=="undefined"){return true}return false},isStyleSupportedWithoutPrefix:function(b,a){var c=this.getTestElement(a).style;if(typeof c[b]!=="undefined"){return true}return false},isEventSupported:function(c,a){if(a===undefined){a=window}var e=this.getTestElement(a),b="on"+c.toLowerCase(),d=(b in e);if(!d){if(e.setAttribute&&e.removeAttribute){e.setAttribute(b,"");d=typeof e[b]==="function";if(typeof e[b]!=="undefined"){e[b]=undefined}e.removeAttribute(b)}}return d},getStyle:function(c,b){var a=c.ownerDocument.defaultView,d=(a?a.getComputedStyle(c,null):c.currentStyle);return(d||c.style)[b]},getSupportedPropertyName:function(b,a){var c=Ext.browser.getVendorProperyName(a);if(c in b){return c}else{if(a in b){return a}}return null},detect:function(i){var j=this,l=document,f=j.toRun||j.tests,e=f.length,b=l.createElement("div"),c=[],o=Ext.supports,m=j.has,a,h,g,d,k;b.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(i){l.body.appendChild(b)}d=j.preDetected[Ext.browser.identity]||[];while(e--){g=f[e];k=d[e];a=g.name;h=g.names;if(k===undefined){if(!i&&g.ready){c.push(g);continue}k=g.fn.call(j,l,b)}if(a){o[a]=m[a]=k}else{if(h){while(h.length){a=h.pop();o[a]=m[a]=k}}}}if(i){l.body.removeChild(b)}j.toRun=c},report:function(){var b=[],a=this.tests.length,c;for(c=0;c<a;++c){b.push(this.has[this.tests[c].name]?1:0)}Ext.log(Ext.browser.identity+": ["+b.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var a=document.createElement("div");a.expandoProp={};return a.cloneNode().expandoProp===a.expandoProp}},{name:"CSSPointerEvents",fn:function(a){return"pointerEvents" in a.documentElement.style}},{name:"CSS3BoxShadow",fn:function(a){return"boxShadow" in a.documentElement.style||"WebkitBoxShadow" in a.documentElement.style||"MozBoxShadow" in a.documentElement.style}},{name:"CSS3NegationSelector",fn:function(b){try{b.querySelectorAll("foo:not(bar)")}catch(a){return false}return true}},{name:"ClassList",fn:function(a){return !!a.documentElement.classList}},{name:"Canvas",fn:function(){var a=this.getTestElement("canvas");return !!(a&&a.getContext&&a.getContext("2d"))}},{name:"Svg",fn:function(a){return !!(a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var b=this.getTestElement(),a=false;b.innerHTML="<!--[if vml]><br><![endif]-->";a=(b.childNodes.length===1);b.innerHTML="";return a}},{name:"touchScroll",fn:function(){var a=0;if(Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){a=1}else{if(Ext.supports.Touch){a=2}}return a}},{name:"Touch",fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return(Ext.supports.TouchEvents&&a!==1)||a>1}else{return Ext.supports.TouchEvents||a>0}}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation" in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase" in window}},{name:"WebSockets",fn:function(){return"WebSocket" in window}},{name:"Range",fn:function(){return !!document.createRange}},{name:"CreateContextualFragment",fn:function(){var a=!!document.createRange?document.createRange():false;return a&&!!a.createContextualFragment}},{name:"History",fn:function(){return("history" in window&&"pushState" in window.history)}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return !!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return !!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");return true}}catch(a){}return false}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&("withCredentials" in new XMLHttpRequest())}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var a=new XMLHttpRequest();return a&&("upload" in a)&&("onprogress" in a.upload)}return false}},{name:"NumericInputPlaceHolder",fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var b=document.documentElement,e="matches",d="webkitMatchesSelector",a="msMatchesSelector",c="mozMatchesSelector";return b[e]?e:b[d]?d:b[a]?a:b[c]?c:null}},{name:"RightMargin",ready:true,fn:function(b,c){var a=b.defaultView;return !(a&&a.getComputedStyle(c.firstChild.firstChild,null).marginRight!=="0px")}},{name:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:"TransparentColor",ready:true,fn:function(b,c,a){a=b.defaultView;return !(a&&a.getComputedStyle(c.lastChild,null).backgroundColor!=="transparent")}},{name:"ComputedStyle",ready:true,fn:function(b,c,a){a=b.defaultView;return a&&a.getComputedStyle}},{name:"Float",fn:function(a){return"cssFloat" in a.documentElement.style}},{name:"CSS3BorderRadius",ready:true,fn:function(d){var b=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],c=false,a;for(a=0;a<b.length;a++){if(d.documentElement.style[b[a]]!==undefined){c=true}}return c&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(f,a){var h="background-image:",g="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",e="linear-gradient(left top, black, white)",d="-moz-"+e,b="-ms-"+e,c="-o-"+e,i=[h+g,h+e,h+d,h+b,h+c];a.style.cssText=i.join(";");return((""+a.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(a){return("onmouseenter" in a.documentElement&&"onmouseleave" in a.documentElement)}},{name:"MouseWheel",fn:function(a){return("onmousewheel" in a.documentElement)}},{name:"Opacity",fn:function(a,b){if(Ext.isIE8){return false}b.firstChild.style.cssText="opacity:0.73";return b.firstChild.style.opacity=="0.73"}},{name:"Placeholder",fn:function(a){return"placeholder" in a.createElement("input")}},{name:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(a){return"getBoundingClientRect" in a.documentElement}},{name:"RotatedBoundingClientRect",ready:true,fn:function(e){var a=e.body,b=false,d=e.createElement("div"),c=d.style;if(d.getBoundingClientRect){c.position="absolute";c.top="0";c.WebkitTransform=c.MozTransform=c.msTransform=c.OTransform=c.transform="rotate(90deg)";c.width="100px";c.height="30px";a.appendChild(d);b=d.getBoundingClientRect().height!==100;a.removeChild(d)}return b}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:true,fn:function(){var a=this.getTestElement(),b;a.innerHTML="<div>a</div>";b=a.firstChild;a.innerHTML="<div>b</div>";return b.innerHTML!=="a"}},{name:"IncludePaddingInWidthCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetWidth===210}},{name:"IncludePaddingInHeightCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetHeight===210}},{name:"TextAreaMaxLength",fn:function(a){return("maxlength" in a.createElement("textarea"))}},{name:"GetPositionPercentage",ready:true,fn:function(a,b){return Ext.feature.getStyle(b.childNodes[2],"left")==="10%"}},{name:"PercentageHeightOverflowBug",ready:true,fn:function(d){var a=false,c,b;if(Ext.getScrollbarSize().height){b=this.getTestElement();c=b.style;c.height="50px";c.width="50px";c.overflow="auto";c.position="absolute";b.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");d.body.appendChild(b);if(b.firstChild.offsetHeight===50){a=true}d.body.removeChild(b)}return a}},{name:"xOriginBug",ready:true,fn:function(d,e){e.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var c=document.getElementById("b1").getBoundingClientRect(),b=document.getElementById("b2").getBoundingClientRect(),a=document.getElementById("b3").getBoundingClientRect();return(b.left!==c.left&&a.right!==c.right)}},{name:"ScrollWidthInlinePaddingBug",ready:true,fn:function(d){var a=false,c,b;b=d.createElement("div");c=b.style;c.height="50px";c.width="50px";c.padding="10px";c.overflow="hidden";c.position="absolute";b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';d.body.appendChild(b);if(b.scrollWidth===70){a=true}d.body.removeChild(b);return a}},{name:"rtlVertScrollbarOnRight",ready:true,fn:function(c,d){d.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var b=d.firstChild,a=b.firstChild;return(a.offsetLeft+a.offsetWidth!==b.offsetLeft+b.offsetWidth)}},{name:"rtlVertScrollbarOverflowBug",ready:true,fn:function(b,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=c.firstChild;return a.clientHeight===a.offsetHeight}},{identity:"defineProperty",fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return false}return true}},{identify:"nativeXhr",fn:function(){if(typeof XMLHttpRequest!=="undefined"){return true}XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}};return false}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||(Ext.isOpera&&Ext.operaVersion<12))}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange" in window&&(a===undefined||a>7)}},{name:"FixedTableWidthBug",ready:true,fn:function(){if(Ext.isIE8){return false}var b=document.createElement("div"),a=document.createElement("div"),c;b.setAttribute("style","display:table;table-layout:fixed;");a.setAttribute("style","display:table-cell;min-width:50px;");b.appendChild(a);document.body.appendChild(b);b.offsetWidth;b.style.width="25px";c=b.offsetWidth;document.body.removeChild(b);return c===50}},{name:"FocusinFocusoutEvents",fn:function(){return !Ext.isGecko}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:true,fn:function(g){var a=g.body,h,d,e,b,c;function f(o){var j=[],l=0,n,k;if(o.indexOf("rgb(")!==-1){j=o.replace("rgb(","").replace(")","").split(", ")}else{if(o.indexOf("#")!==-1){n=o.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;k=o.match(n);if(k){j=["0x"+k[1],"0x"+k[2],"0x"+k[3]]}}}for(var m=0;m<j.length;m++){l+=parseInt(j[m])}return l}h=g.createElement("div");d=g.createElement("img");e=h.style;Ext.apply(e,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"});d.alt="";d.src=Ext.BLANK_IMAGE_URL;h.appendChild(d);a.appendChild(h);e=h.currentStyle||h.style;c=e.backgroundImage;b={Images:d.offsetWidth===1&&d.readyState!=="uninitialized",BackgroundImages:!(c!==null&&(c==="none"||c==="url(invalid-url:)")),BorderColors:e.borderTopColor!==e.borderRightColor,LightOnDark:f(e.color)-f(e.backgroundColor)>0};Ext.supports.HighContrastMode=!b.BackgroundImages;a.removeChild(h);h=d=null;return b}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:false,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState==="complete"){a.onReadyEvent({type:b.readyState||"body"})}else{a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener("deviceready",a.onReadyEvent,false)}b.addEventListener("DOMContentLoaded",a.onReadyEvent,false);window.addEventListener("load",a.onReadyEvent,false)}}},block:function(){++this.blocks;Ext.isReady=false},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=true;a.state=1;Ext.feature.detect(true);if(!a.delay){a.handleReady()}else{if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else{a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.ticks();a.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(a){var b=this;if(!b.timer){b.timer=Ext.defer(function(){b.timer=null;b.handleReady()},a||b.delay)}},invoke:function(b){var a=b.delay;if(a){Ext.defer(b.fn,a,b.scope)}else{if(Ext.elevateFunction){Ext.elevateFunction(b.fn,b.scope)}else{b.fn.call(b.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else{this.doInvokeAll()}},doInvokeAll:function(){var b=this,a=b.listeners,c;if(!b.blocks){Ext.isReady=true}b.firing=true;while(a.length){if(b.sortGeneration!==b.generation){b.sortGeneration=b.generation;a.sort(b.sortFn)}c=a.pop();if(b.blocks&&!c.dom){a.push(c);break}b.invoke(c)}b.firing=false},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:false,priority:0};if(b){Ext.apply(a,b)}a.phase=a.dom?0:1;return a},on:function(c,b,a){var d=Ext.env.Ready,e=d.makeListener(c,b,a);if(d.state===2&&!d.firing&&(e.dom||!d.blocks)){d.invoke(e)}else{d.listeners.push(e);++d.generation;if(!d.bound){d.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else{a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(d,c){return -((d.phase-c.phase)||(c.priority-d.priority)||(d.id-c.id))},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener("deviceready",a.onReadyEvent,false)}b.removeEventListener("DOMContentLoaded",a.onReadyEvent,false);window.removeEventListener("load",a.onReadyEvent,false)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=true;try{document.documentElement.doScroll("left")}catch(c){b=false}if(b&&document.body){a.onReadyEvent({type:"doScroll"})}else{a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){if(a.bound){return}var d=document,b;try{b=window.frameElement===undefined}catch(c){}if(!b||!d.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else{if(a.pollScroll()){return}}if(d.readyState==="complete"){a.onReadyEvent({type:"already "+(d.readyState||"body")})}else{d.attachEvent("onreadystatechange",a.onReadyStateChange);window.attachEvent("onload",a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent("onreadystatechange",a.onReadyStateChange);window.detachEvent("onload",a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){clearTimeout(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(e,d,b){var c={dom:true};if(b){Ext.apply(c,b)}a.on(e,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1000},b))};a.bind()}());Ext.Loader=(new function(){var c=this,a=Ext.ClassManager,g=Ext.Boot,d=Ext.Class,i=Ext.env.Ready,h=Ext.Function.alias,f=["extend","mixins","requires"],m={},j=[],b=[],e=[],n={},l={},k={enabled:true,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",paths:a.paths,preserveScripts:true,scriptCharset:undefined},o={disableCaching:true,disableCachingParam:true,preserveScripts:true,scriptChainDelay:"loadDelay"};Ext.apply(c,{isInHistory:m,isLoading:false,history:j,config:k,readyListeners:b,optionalRequires:e,requiresMap:n,hasFileLoadError:false,scriptsLoading:0,syncModeEnabled:false,missingQueue:l,init:function(){var u=document.getElementsByTagName("script"),p=u[u.length-1].src,z=p.substring(0,p.lastIndexOf("/")+1),x=Ext._classPathMetadata,y=Ext.Microloader,r=Ext.manifest,s,v,w,t,q;if(!a.getPath("Ext")){a.setPath("Ext",z+"src")}if(x){Ext._classPathMetadata=null;c.addClassPathMappings(x)}if(r){s=r.loadOrder;v=Ext.Boot.baseUrl;if(s&&r.bootRelative){for(w=s.length,t=0;t<w;t++){q=s[t];q.path=v+q.path}}}if(y){i.block();y.onMicroloaderReady(function(){i.unblock()})}},setConfig:Ext.Function.flexSetter(function(p,q){if(p==="paths"){c.setPath(q)}else{k[p]=q;var r=o[p];if(r){g.setConfig((r===true)?p:r,q)}}return c}),getConfig:function(p){return p?k[p]:k},setPath:function(){a.setPath.apply(a,arguments);return c},addClassPathMappings:function(p){a.setPath(p);return c},addBaseUrlClassPathMappings:function(p){for(var q in p){p[q]=g.baseUrl+p[q]}Ext.Loader.addClassPathMappings(p)},getPath:function(p){return a.getPath(p)},require:function(r,q,p,t){if(t){return c.exclude(t).require(r,q,p)}var s=a.getNamesByExpression(r);return c.load(s,q,p)},syncRequire:function(){var q=c.syncModeEnabled;c.syncModeEnabled=true;var p=c.require.apply(c,arguments);c.syncModeEnabled=q;return p},exclude:function(q){var p=a.select({require:function(t,s,r){return c.load(t,s,r)},syncRequire:function(v,t,s){var u=c.syncModeEnabled;c.syncModeEnabled=true;var r=c.load(v,t,s);c.syncModeEnabled=u;return r}});p.exclude(q);return p},load:function(p,x,y){if(x){if(x.length){x=c.makeLoadCallback(p,x)}x=x.bind(y||Ext.global)}var s=[],r=p.length,v,u,t,w=[],q=a.classState;for(u=0;u<r;++u){v=a.resolveName(p[u]);if(!a.isCreated(v)){s.push(v);l[v]=c.getPath(v);if(!q[v]){w.push(l[v])}}}t=s.length;if(t){c.missingCount+=t;a.onCreated(function(){if(x){Ext.callback(x,y,arguments)}c.checkReady()},c,s);if(!k.enabled){Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((s.length>1)?"es":"")+": "+s.join(", "))}if(w.length){c.loadScripts({url:w,_classNames:s})}else{c.checkReady()}}else{if(x){x.call(y)}c.checkReady()}if(c.syncModeEnabled){if(r===1){return a.get(p[0])}}return c},makeLoadCallback:function(p,q){return function(){var s=[],r=p.length;while(r-->0){s[r]=a.get(p[r])}return q.apply(this,s)}},onLoadFailure:function(){var p=this,q=p.onError;c.hasFileLoadError=true;--c.scriptsLoading;if(q){q.call(p.userScope,p)}c.checkReady()},onLoadSuccess:function(){var p=this,q=p.onLoad;--c.scriptsLoading;if(q){q.call(p.userScope,p)}c.checkReady()},onReady:function(r,q,t,p){if(t){i.on(r,q,p)}else{var s=i.makeListener(r,q,p);if(c.isLoading){b.push(s)}else{i.invoke(s)}}},addUsedClasses:function(r){var p,q,s;if(r){r=(typeof r==="string")?[r]:r;for(q=0,s=r.length;q<s;q++){p=r[q];if(typeof p==="string"&&!Ext.Array.contains(e,p)){e.push(p)}}}return c},triggerReady:function(){var p,q=e;if(c.isLoading&&q.length){e=[];c.require(q)}else{c.isLoading=false;b.sort(i.sortFn);while(b.length&&!c.isLoading){p=b.pop();i.invoke(p)}i.unblock()}},historyPush:function(p){if(p&&!m[p]&&!a.overrideMap[p]){m[p]=true;j.push(p)}return c},loadScripts:function(t){var s=Ext.manifest,p=s&&s.loadOrder,q=s&&s.loadOrderMap,r;++c.scriptsLoading;if(p&&!q){s.loadOrderMap=q=g.createLoadOrderMap(p)}c.checkReady();r=Ext.apply({loadOrder:p,loadOrderMap:q,charset:k.scriptCharset,success:c.onLoadSuccess,failure:c.onLoadFailure,sync:c.syncModeEnabled,_classNames:[]},t);r.userScope=r.scope;r.scope=r;g.load(r)},loadScriptsSync:function(q){var p=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:q});c.syncModeEnabled=p},loadScriptsSyncBasePrefix:function(q){var p=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:q,prependBaseUrl:true});c.syncModeEnabled=p},loadScript:function(x){var q=typeof x==="string",t=x instanceof Array,w=!t&&!q,p=w?x.url:x,s=w&&x.onError,u=w&&x.onLoad,v=w&&x.scope,r={url:p,scope:v,onLoad:u,onError:s,_classNames:[]};c.loadScripts(r)},flushMissingQueue:function(){var p,s,r=0,q=0;for(p in l){r++;s=l[p];if(a.isCreated(p)){delete l[p]}else{if(a.existCache[p]===2){delete l[p]}else{++q}}}this.missingCount=q},checkReady:function(){var q=c.isLoading,p;c.flushMissingQueue();p=c.missingCount+c.scriptsLoading;if(p&&!q){i.block();c.isLoading=!!p}else{if(!p&&q){c.triggerReady()}}}});Ext.require=h(c,"require");Ext.syncRequire=h(c,"syncRequire");Ext.exclude=h(c,"exclude");d.registerPreprocessor("loader",function(E,t,D,C){var z=this,x=[],p,y=a.getName(E),s,r,w,v,B,u,q,A;for(s=0,w=f.length;s<w;s++){u=f[s];if(t.hasOwnProperty(u)){q=t[u];if(typeof q==="string"){x.push(q)}else{if(q instanceof Array){for(r=0,v=q.length;r<v;r++){B=q[r];if(typeof B==="string"){x.push(B)}}}else{if(typeof q!=="function"){for(r in q){if(q.hasOwnProperty(r)){B=q[r];if(typeof B==="string"){x.push(B)}}}}}}}}if(x.length===0){return}if(y){n[y]=x}(y?c.exclude(y):c).require(x,function(){for(s=0,w=f.length;s<w;s++){u=f[s];if(t.hasOwnProperty(u)){q=t[u];if(typeof q==="string"){t[u]=a.get(q)}else{if(q instanceof Array){for(r=0,v=q.length;r<v;r++){B=q[r];if(typeof B==="string"){t[u][r]=a.get(B)}}}else{if(typeof q!=="function"){for(var F in q){if(q.hasOwnProperty(F)){B=q[F];if(typeof B==="string"){t[u][F]=a.get(B)}}}}}}}}C.call(z,E,t,D)});return false},true,"after","className");a.registerPostprocessor("uses",function(q,A,v){var p=Ext.manifest,r=p&&p.loadOrder,s=p&&p.classes,t,x,z,w,u,y;if(r){x=s[q];if(x&&!isNaN(u=x.idx)){z=r[u];t=z.uses;y={};for(w=t.length,u=0;u<w;u++){y[t[u]]=true}t=Ext.Boot.getPathsFromIndexes(y,r,true);if(t.length>0){c.loadScripts({url:t,sequential:true})}}}if(v.uses){t=v.uses;c.addUsedClasses(t)}});a.onCreated(c.historyPush);c.init()}());Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}(Ext.cmd.derive("Ext.Mixin",Ext.Base,function(a){return{statics:{addHook:function(h,e,c,d){var g=Ext.isFunction(h),f=function(){var j=arguments,k=g?h:d[h],i=this.callParent(j);k.apply(this,j);return i},b=e.hasOwnProperty(c)&&e[c];if(g){h.$previous=Ext.emptyFn}f.$name=c;f.$owner=e.self;if(b){f.$previous=b.$previous;b.$previous=f}else{e[c]=f}}},onClassExtended:function(k,d){var f=d.mixinConfig,i=d.xhooks,h=k.superclass,e=d.onClassMixedIn,b,g,j,c;if(i){delete d.xhooks;(f||(d.mixinConfig=f={})).on=i}if(f){b=h.mixinConfig;if(b){d.mixinConfig=f=Ext.merge({},b,f)}d.mixinId=f.id;g=f.before;j=f.after;i=f.on;c=f.extended}if(g||j||i||c){d.onClassMixedIn=function(o){var l=this.prototype,n=o.prototype,m;if(g){Ext.Object.each(g,function(p,q){o.addMember(p,function(){if(l[q].apply(this,arguments)!==false){return this.callParent(arguments)}})})}if(j){Ext.Object.each(j,function(p,q){o.addMember(p,function(){var r=this.callParent(arguments);l[q].apply(this,arguments);return r})})}if(i){for(m in i){a.addHook(i[m],n,m,l)}}if(c){o.onExtended(function(){var p=Ext.Array.slice(arguments,0);p.unshift(o);return c.apply(this,p)},this)}if(e){e.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,"Mixin"],0));Ext.util=Ext.util||{};Ext.util.DelayedTask=function(e,d,b,h,g){var f=this,a,c=function(){var i=Ext.GlobalEvents;clearInterval(f.id);f.id=null;e.apply(d,b||[]);if(g!==false&&i.hasListeners.idle){i.fireEvent("idle")}};h=typeof h==="boolean"?h:true;f.id=null;f.delay=function(j,l,k,i){if(h){f.cancel()}if(typeof j==="number"){a=j}e=l||e;d=k||d;b=i||b;if(!f.id){f.id=Ext.interval(c,a)}};f.cancel=function(){if(f.id){clearInterval(f.id);f.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var d=Array.prototype.slice,a=Ext.Array.insert,c=Ext.Array.toArray,b={};return{isEvent:true,suspended:0,noOptions:{},constructor:function(f,e){this.name=e;this.observable=f;this.listeners=[]},addListener:function(m,e,f,t,p){var w=this,k=false,o=w.observable,j=w.name,q,h,v,s,x,r,g,l,u,n;if(w.findListener(m,e)===-1){h=w.createListener(m,e,f,t,p);if(w.firing){w.listeners=w.listeners.slice(0)}q=w.listeners;l=g=q.length;v=f&&f.priority;x=w._highestNegativePriorityIndex;r=x!==undefined;if(v){s=(v<0);if(!s||r){for(u=(s?x:0);u<g;u++){n=q[u].o?q[u].o.priority||0:0;if(n<v){l=u;break}}}else{w._highestNegativePriorityIndex=l}}else{if(r){l=x}}if(!s&&l<=x){w._highestNegativePriorityIndex++}if(l===g){q[g]=h}else{a(q,l,[h])}if(o.isElement){o._getPublisher(j).subscribe(o,j,f.delegated!==false,f.capture)}k=true}return k},createListener:function(m,p,e,f,h){var k=this,l=Ext._namedScopes[p],g={fn:m,scope:p,ev:k,caller:f,manager:h,namedScope:l,defaultScope:l?(p||k.observable):undefined,lateBound:typeof m==="string"},n=m,j=false,i;if(e){g.o=e;if(e.single){n=k.createSingle(n,g,e,p);j=true}if(e.target){n=k.createTargeted(n,g,e,p,j);j=true}if(e.delay){n=k.createDelayed(n,g,e,p,j);j=true}if(e.buffer){n=k.createBuffered(n,g,e,p,j);j=true}if(k.observable.isElement){i=e.type;if(i){g.type=i}}}g.fireFn=n;g.wrapped=j;return g},findListener:function(h,g){var f=this.listeners,e=f.length,j;while(e--){j=f[e];if(j){if(j.fn===h&&j.scope==g){return e}}}return -1},removeListener:function(q,s,o){var p=this,n=false,e=p.observable,m=p.name,g,u,t,j,h,r,f,l;o=o||p.findListener(q,s);if(o!=-1){g=p.listeners[o];t=g.o;u=p._highestNegativePriorityIndex;if(p.firing){p.listeners=p.listeners.slice(0)}if(g.task){g.task.cancel();delete g.task}j=g.tasks&&g.tasks.length;if(j){while(j--){g.tasks[j].cancel()}delete g.tasks}p.listeners.splice(o,1);h=g.manager;if(h){r=h.managedListeners;if(r){for(l=r.length;l--;){f=r[l];if(f.item===p.observable&&f.ename===m&&f.fn===q&&f.scope===s){r.splice(l,1)}}}}if(u){if(o<u){p._highestNegativePriorityIndex--}else{if(o===u&&o===p.listeners.length){delete p._highestNegativePriorityIndex}}}if(e.isElement){e._getPublisher(m).unsubscribe(e,m,t.delegated!==false,t.capture)}n=true}return n},clearListeners:function(){var f=this.listeners,e=f.length,g;while(e--){g=f[e];this.removeListener(g.fn,g.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(f,e){this.firingObservable=f;return this.fire.apply(this,e)},fire:function(){var A=this,r=A.listeners,l=r.length,o=A.observable,s=o.isElement,z=o.isComponent,x=A.firingObservable,g,w,p,u,f,j,v,t,B,h,n,k,y,q,m;if(!A.suspended&&l>0){A.firing=true;f=arguments.length?d.call(arguments,0):[];v=f.length;if(s){y=f[0]}for(u=0;u<l;u++){j=r[u];g=j.o;if(s){if(B){y.setCurrentTarget(B)}h=j.type;if(h){n=y;y=f[0]=n.chain({type:h})}Ext.EventObject=y}k=f;if(g){w=g.delegate;if(w){if(s){t=y.getTarget("#"+y.currentTarget.id+" "+w);if(t){f[1]=t;B=y.currentTarget;y.setCurrentTarget(t)}else{continue}}else{if(z&&!x.is("#"+o.id+" "+g.delegate)){continue}}}if(s){if(g.preventDefault){y.preventDefault()}if(g.stopPropagation){y.stopPropagation()}if(g.stopEvent){y.stopEvent()}}f[v]=g;if(g.args){k=g.args.concat(f)}}p=A.getFireInfo(j);q=p.fn;m=p.scope;p.fn=p.scope=null;if(q.apply(m,k)===false){Ext.EventObject=null;return(A.firing=false)}if(n){y=f[0]=n;n=null}Ext.EventObject=null}}A.firing=false;return true},getFireInfo:function(j,i){var k=this.observable,e=j.fireFn,h=j.scope,f=j.namedScope,g;if(!i&&j.wrapped){b.fn=e;return b}g=i?j.fn:e;if(j.lateBound){if(!h||f){h=(j.caller||k).resolveListenerScope(j.defaultScope)}g=h[g]}else{if(f&&f.isController){h=(j.caller||k).resolveListenerScope(j.defaultScope)}else{if(!h||f){h=k}}}b.fn=g;b.scope=h;return b},createTargeted:function(g,h,i,f,e){return function(){if(i.target===arguments[0]){var j;if(!e){j=h.ev.getFireInfo(h,true);g=j.fn;f=j.scope;j.fn=j.scope=null}return g.apply(f,arguments)}}},createBuffered:function(g,h,i,f,e){h.task=new Ext.util.DelayedTask();return function(){var j;if(!e){j=h.ev.getFireInfo(h,true);g=j.fn;f=j.scope;j.fn=j.scope=null}h.task.delay(i.buffer,g,f,c(arguments))}},createDelayed:function(g,h,i,f,e){return function(){var j=new Ext.util.DelayedTask(),k;if(!e){k=h.ev.getFireInfo(h,true);g=k.fn;f=k.scope;k.fn=k.scope=null}if(!h.tasks){h.tasks=[]}h.tasks.push(j);j.delay(i.delay||10,g,f,c(arguments))}},createSingle:function(g,h,i,f,e){return function(){var j=h.ev,k;if(j.removeListener(h.fn,f)&&j.observable){j.observable.hasListeners[j.name]--}if(!e){k=j.getFireInfo(h,true);g=k.fn;f=k.scope;k.fn=k.scope=null}return g.apply(f,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var f=this.id,b,d,e,a,c;if(!(f||f===0)){b=this.self.prototype;d=this.defaultIdSeparator;a=Ext.mixin.Identifiable.uniqueIds;if(!b.hasOwnProperty("identifiablePrefix")){e=this.xtype;if(e){c=this.defaultIdPrefix+e.replace(this.idCleanRegex,d)+d}else{if(!(c=b.$className)){c=this.defaultIdPrefix+"anonymous"+d}else{c=c.replace(this.idCleanRegex,d).toLowerCase()+d}}b.identifiablePrefix=c}c=this.identifiablePrefix;if(!a.hasOwnProperty(c)){a[c]=0}f=this.id=this.id=c+(++a[c])}this.getUniqueId=this.getOptimizedId;return f},setId:function(a){this.id=this.id=a},getId:function(){var a=this.id;if(!a){a=this.getUniqueId()}this.getId=this.getOptimizedId;return a}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,function(a){var d=Ext.emptyFn,c=[],e=Array.prototype,f=e.slice,b=function(g){if(g instanceof b){return g}this.observable=g;if(arguments[1].isObservable){this.managedListeners=true}this.args=f.call(arguments,1)};b.prototype.destroy=function(){this.destroy=Ext.emptyFn;var g=this.observable;g[this.managedListeners?"mun":"un"].apply(g,this.args)};return{mixinConfig:{id:"observable",after:{destroy:"clearListeners"}},statics:{releaseCapture:function(g){g.fireEventArgs=this.prototype.fireEventArgs},capture:function(j,h,g){var i=function(k,l){return h.apply(g,[k].concat(l))};this.captureArgs(j,i,g)},captureArgs:function(i,h,g){i.fireEventArgs=Ext.Function.createInterceptor(i.fireEventArgs,h,g)},observe:function(g,h){if(g){if(!g.isObservable){Ext.applyIf(g,new this());this.captureArgs(g.prototype,g.fireEventArgs,g)}if(Ext.isObject(h)){g.on(h)}}return g},prepareClass:function(k,q,l){var p=k.listeners=[],n=l||k.prototype,g=n.listeners,j=q?q.listeners:k.superclass.self.listeners,h,r,o;if(j){p.push(j)}if(g){r=g.scope;if(!r){g.scope="self"}else{o=Ext._namedScopes[r];if(o&&o.isController){g.scope="self.controller"}}p.push(g);n.listeners=null}if(!k.HasListeners){var m=function(){},i=k.superclass.HasListeners||(q&&q.HasListeners)||a.HasListeners;k.prototype.HasListeners=k.HasListeners=m;m.prototype=k.hasListeners=new i()}}},isObservable:true,eventsSuspended:0,constructor:function(k){var n=this,j=n.self,h,m,o,g,l;if(n.$observableInitialized){return}n.$observableInitialized=true;n.hasListeners=new n.HasListeners();n.eventedBeforeEventNames={};n.events=n.events||{};h=j.listeners;if(h&&!n._addDeclaredListeners(h)){j.listeners=null}m=(k&&k.listeners)||n.listeners;if(m){if(m instanceof Array){for(l=0,g=m.length;l<g;++l){n.addListener(m[l])}}else{n.addListener(m)}}o=(k&&k.bubbleEvents)||n.bubbleEvents;if(o){n.enableBubble(o)}if(n.$applyConfigs){if(k){Ext.apply(n,k)}}else{n.initConfig(k)}if(m){n.listeners=null}},onClassExtended:function(g,h){if(!g.HasListeners){a.prepareClass(g,g.prototype.$observableMixedIn?undefined:h)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(g){var h=this;if(g instanceof Array){Ext.each(g,h._addDeclaredListeners,h)}else{h._addedDeclaredListeners=true;h.addListener(g)}return h._addedDeclaredListeners},addManagedListener:function(n,j,l,o,p,i){var k=this,m=k.managedListeners=k.managedListeners||[],h,g;if(typeof j!=="string"){g=arguments.length>4?p:j;p=j;for(j in p){if(p.hasOwnProperty(j)){h=p[j];if(!n.$eventOptions[j]){k.addManagedListener(n,j,h.fn||h,h.scope||p.scope||o,h.fn?h:g,true)}}}if(p&&p.destroyable){return new b(k,n,p)}}else{if(l!==d){n.doAddListener(j,l,o,p,null,k,k);if(!i&&p&&p.destroyable){return new b(k,n,j,l,o)}}}},removeManagedListener:function(o,j,m,p){var l=this,q,h,n,g,k;if(typeof j!=="string"){q=j;for(j in q){if(q.hasOwnProperty(j)){h=q[j];if(!o.$eventOptions[j]){l.removeManagedListener(o,j,h.fn||h,h.scope||q.scope||p)}}}}else{n=l.managedListeners?l.managedListeners.slice():[];j=Ext.canonicalEventName(j);for(k=0,g=n.length;k<g;k++){l.removeManagedListenerItem(false,n[k],o,j,m,p)}}},fireEvent:function(g){return this.fireEventArgs(g,f.call(arguments,1))},resolveListenerScope:function(h){var g=Ext._namedScopes[h];if(g){if(g.isSelf||g.isThis){h=null}}return h||this},fireEventArgs:function(g,i){g=Ext.canonicalEventName(g);var l=this,j=l.events,k=j&&j[g],h=true;if(l.hasListeners[g]){h=l.doFireEvent(g,i||c,k?k.bubble:false)}return h},fireAction:function(h,j,l,k,i,g){if(typeof l==="string"&&!k){l=this[l]}i=i?Ext.Object.chain(i):{};i.single=true;i.priority=((g==="after")?-99.5:99.5);this.doAddListener(h,l,k,i);this.fireEventArgs(h,j)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var l=this,k=l.fn,j=l.scope,m=l.fnArgs,g=l.owner,i,h;if(!--l._paused){if(k){i=Ext.Array.slice(m||l.args);if(m===false){i.shift()}l.fn=null;i.push(l);if(Ext.isFunction(k)){h=k.apply(j,i)}else{if(j&&Ext.isString(k)&&Ext.isFunction(j[k])){h=j[k].apply(j,i)}}if(h===false){return false}}if(!l._paused){return l.owner.fireEventArgs(l.eventName,l.args)}}}},fireEventedAction:function(h,j,m,p,l){var k=this,o=k.eventedBeforeEventNames,i=o[h]||(o[h]="before"+h),g=Ext.apply({owner:k,eventName:h,fn:m,scope:p,fnArgs:l,args:j},k.$eventedController),n;j.push(g);n=k.fireEventArgs(i,j);j.pop();if(n===false){return false}return g.resume()},doFireEvent:function(i,k,h){var m=this,g,l,j=true;do{if(m.eventsSuspended){if((g=m.eventQueue)){g.push([i,k])}return j}else{l=m.events&&m.events[i];if(l&&l!==true){if((j=l.fire.apply(l,k))===false){break}}}}while(h&&(m=m.getBubbleParent()));return j},getBubbleParent:function(){var h=this,g=h.getBubbleTarget&&h.getBubbleTarget();if(g&&g.isObservable){return g}return null},addListener:function(k,q,r,s,i,g){var p=this,l=Ext._namedScopes,h,o,m,n,j;if(typeof k!=="string"){s=k;r=s.scope;o=r&&l[r];m=o&&o.isSelf;j=((p.isComponent||p.isWidget)&&s.element)?p.$elementEventOptions:p.$eventOptions;for(k in s){h=s[k];if(!j[k]){n=h.scope;if(n&&m){o=l[n];if(o&&o.isController){n="self.controller"}}p.doAddListener(k,h.fn||h,n||r,h.fn?h:s,i,g)}}if(s&&s.destroyable){return new b(p,s)}}else{p.doAddListener(k,q,r,s,i,g);if(s&&s.destroyable){return new b(p,k,q,r,s)}}return p},removeListener:function(j,l,k,g){var m=this,i,h;if(typeof j!=="string"){h=j;g=g||m.$eventOptions;for(j in h){if(h.hasOwnProperty(j)){i=h[j];if(!m.$eventOptions[j]){m.doRemoveListener(j,i.fn||i,i.scope||h.scope)}}}}else{m.doRemoveListener(j,l,k)}return m},onBefore:function(g,j,i,h){return this.addListener(g,j,i,h,"before")},onAfter:function(g,j,i,h){return this.addListener(g,j,i,h,"after")},unBefore:function(g,j,i,h){return this.removeListener(g,j,i,h,"before")},unAfter:function(g,j,i,h){return this.removeListener(g,j,i,h,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var k=this,i=k.events,g=k.hasListeners,j,h;if(i){for(h in i){if(i.hasOwnProperty(h)){j=i[h];if(j.isEvent){delete g[h];j.clearListeners()}}}k.events=null}k.clearManagedListeners()},clearManagedListeners:function(){var k=this,h=k.managedListeners?k.managedListeners.slice():[],j=0,g=h.length;for(;j<g;j++){k.removeManagedListenerItem(true,h[j])}k.managedListeners=[]},removeManagedListenerItem:function(h,g,l,i,k,j){if(h||(g.item===l&&g.ename===i&&(!k||g.fn===k)&&(!j||g.scope===j))){g.item.doRemoveListener(g.ename,g.fn,g.scope,g.options);if(!h){Ext.Array.remove(this.managedListeners,g)}}},hasListener:function(g){g=Ext.canonicalEventName(g);return !!this.hasListeners[g]},isSuspended:function(i){var h=this.eventsSuspended>0,g=this.events;if(!h&&i&&g){i=g[i];if(i&&i.isEvent){return i.isSuspended()}}return h},suspendEvents:function(g){++this.eventsSuspended;if(g&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var m=this,k=m.events,g=arguments.length,j,l,h;for(j=0;j<g;j++){h=arguments[j];h=Ext.canonicalEventName(h);l=k[h];if(!l||!l.isEvent){l=m._initEvent(h)}l.suspend()}},resumeEvent:function(){var j=this.events||0,g=j&&arguments.length,h,k;for(h=0;h<g;h++){k=j[arguments[h]];if(k&&k.resume){k.resume()}}},resumeEvents:function(g){var h=this,k=h.eventQueue,j,i;if(h.eventsSuspended&&!--h.eventsSuspended){delete h.eventQueue;if(!g&&k){j=k.length;for(i=0;i<j;i++){h.fireEventArgs.apply(h,k[i])}}}},relayEvents:function(o,p,j){var n=this,k=p.length,h=0,g,l,m={};if(Ext.isObject(p)){for(h in p){l=p[h];m[h]=n.createRelayer(l)}}else{for(;h<k;h++){g=p[h];m[g]=n.createRelayer(j?j+g:g)}}n.mon(o,m,null,null,undefined);return new b(n,o,m)},createRelayer:function(g,h){var i=this;return function(){return i.fireEventArgs.call(i,g,h?f.apply(arguments,h):arguments)}},enableBubble:function(o){if(o){var m=this,n=(typeof o=="string")?arguments:o,j=m.events,l=j&&n.length,h,k,g;for(g=0;g<l;++g){h=n[g];h=Ext.canonicalEventName(h);k=j[h];if(!k||!k.isEvent){k=m._initEvent(h)}m.hasListeners._incr_(h);k.bubble=true}}},destroy:function(){this.clearListeners();this.callParent()},privates:{doAddListener:function(j,m,p,q,i,h,k){var l=this,g,o,n;i=i||(q&&q.order);if(i){n=(q&&q.priority);if(!n){q=q?Ext.Object.chain(q):{};q.priority=l.$orderToPriority[i]}}j=Ext.canonicalEventName(j);if(!k&&(p&&p.isObservable&&(p!==l))){k=p}if(k){o=k.managedListeners=k.managedListeners||[];o.push({item:l,ename:j,fn:m,scope:p,options:q})}g=(l.events||(l.events={}))[j];if(!g||!g.isEvent){g=l._initEvent(j)}if(m!==d){if(g.addListener(m,p,q,h,k)){l.hasListeners._incr_(j)}}},doRemoveListener:function(h,j,i){var l=this,g=l.events,k;h=Ext.canonicalEventName(h);k=g&&g[h];if(k&&k.isEvent){if(k.removeListener(j,i)){l.hasListeners._decr_(h)}}},_initEvent:function(g){return(this.events[g]=new Ext.util.Event(this,g))}},deprecated:{"5.0":{methods:{addEvents:null}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(){var b=this,e=b.prototype,c=function(){},f=function(g){if(!g.HasListeners){var h=g.prototype;h.$observableMixedIn=1;b.prepareClass(g,this);g.onExtended(function(i,j){b.prepareClass(i,null,j)});if(h.onClassMixedIn){Ext.override(g,{onClassMixedIn:function(i){f.call(this,i);this.callParent(arguments)}})}else{h.onClassMixedIn=function(i){f.call(this,i)}}}a.call(this,g)},a=e.onClassMixedIn;c.prototype={_decr_:function(h,g){if(g==null){g=1}if(!(this[h]-=g)){delete this[h]}},_incr_:function(g){if(this.hasOwnProperty(g)){++this[g]}else{this[g]=1}}};e.HasListeners=b.HasListeners=c;b.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"});b.observeClass=b.observe;function d(m){var l=(this.methodEvents=this.methodEvents||{})[m],i,h,j,k=this,g;if(!l){this.methodEvents[m]=l={};l.originalFn=this[m];l.methodName=m;l.before=[];l.after=[];g=function(p,o,n){if((h=p.apply(o||k,n))!==undefined){if(typeof h=="object"){if(h.returnValue!==undefined){i=h.returnValue}else{i=h}j=!!h.cancel}else{if(h===false){j=true}else{i=h}}}};this[m]=function(){var p=Array.prototype.slice.call(arguments,0),o,q,n;i=h=undefined;j=false;for(q=0,n=l.before.length;q<n;q++){o=l.before[q];g(o.fn,o.scope,p);if(j){return i}}if((h=l.originalFn.apply(k,p))!==undefined){i=h}for(q=0,n=l.after.length;q<n;q++){o=l.after[q];g(o.fn,o.scope,p);if(j){return i}}return i}}return l}Ext.apply(e,{onClassMixedIn:f,beforeMethod:function(i,h,g){d.call(this,i).before.push({fn:h,scope:g})},afterMethod:function(i,h,g){d.call(this,i).after.push({fn:h,scope:g})},removeMethodListener:function(m,k,j){var l=this.getMethodEvent(m),h,g;for(h=0,g=l.before.length;h<g;h++){if(l.before[h].fn==k&&l.before[h].scope==j){Ext.Array.erase(l.before,h,1);return}}for(h=0,g=l.after.length;h<g;h++){if(l.after[h].fn==k&&l.after[h].scope==j){Ext.Array.erase(l.after,h,1);return}}},toggleEventLogging:function(g){Ext.util.Observable[g?"capture":"releaseCapture"](this,function(h){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(h,arguments)}})}})}));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(a){var c=this,b;c.mixins.observable.constructor.call(c,a);c.clear(true);b=c.getKeyFn();if(b){c.getKey=b}},getCount:function(){return this.length},getData:function(a,b){if(b===undefined){b=a;a=this.getKey(b)}return[a,b]},getKey:function(a){return a.id},add:function(a,c){var b=this;if(arguments.length===1){c=a;a=b.getKey(c)}if(b.containsKey(a)){return b.replace(a,c)}b.map[a]=c;++b.length;b.generation++;if(b.hasListeners.add){b.fireEvent("add",b,a,c)}return c},replace:function(b,d){var c=this,e=c.map,a;if(arguments.length===1){d=b;b=c.getKey(d)}if(!c.containsKey(b)){c.add(b,d)}a=e[b];e[b]=d;c.generation++;if(c.hasListeners.replace){c.fireEvent("replace",c,b,d,a)}return d},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return false},removeAtKey:function(a){var b=this,c;if(b.containsKey(a)){c=b.map[a];delete b.map[a];--b.length;b.generation++;if(b.hasListeners.remove){b.fireEvent("remove",b,a,c)}return true}return false},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(a){var b=this;if(a||b.generation){b.map={};b.length=0;b.generation=a?0:b.generation+1}if(a!==true&&b.hasListeners.clear){b.fireEvent("clear",b)}return b},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(d){var a=[],b,c=this.map;for(b in c){if(c.hasOwnProperty(b)){a.push(d?b:c[b])}}return a},each:function(d,c){var a=Ext.apply({},this.map),b,e=this.length;c=c||this;for(b in a){if(a.hasOwnProperty(b)){if(d.call(c,b,a[b],e)===false){break}}}return this},clone:function(){var c=new this.self(this.initialConfig),b=this.map,a;c.suspendEvents();for(a in b){if(b.hasOwnProperty(a)){c.add(a,b[a])}}c.resumeEvents();return c},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a]===b){return a}}return undefined},destroy:function(){this.callParent();this.map=null}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],function(b){var a=b.prototype;a.removeByKey=a.removeAtKey}));(Ext.cmd.derive("Ext.promise.Consequence",Ext.Base,function(a){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(e,b,d){var c=this;c.onFulfilled=e;c.onRejected=b;c.onProgress=d;c.deferred=new Ext.promise.Deferred();c.promise=c.deferred.promise},trigger:function(e,d){var c=this,b=c.deferred;switch(e){case"fulfill":c.propagate(d,c.onFulfilled,b,b.resolve);break;case"reject":c.propagate(d,c.onRejected,b,b.reject);break}},update:function(b){if(Ext.isFunction(this.onProgress)){b=this.onProgress(b)}this.deferred.update(b)},propagate:function(d,e,b,c){if(Ext.isFunction(e)){this.schedule(function(){try{b.resolve(e(d))}catch(f){b.reject(f)}})}else{c.call(this.deferred,d)}},schedule:function(c){var b=a.queueSize++;a.queue[b]=c;if(!b){Ext.asap(a.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var b=a.queue,d,c;for(c=0;c<a.queueSize;++c){d=b[c];b[c]=null;d()}a.queueSize=0}}}},1,0,0,0,0,0,[Ext.promise,"Consequence"],0));(Ext.cmd.derive("Ext.promise.Deferred",Ext.Base,{promise:null,consequences:[],completed:false,completionAction:null,completionValue:null,constructor:function(){var a=this;a.promise=new Ext.promise.Promise(a);a.consequences=[];a.completed=false;a.completionAction=null;a.completionValue=null},then:function(e,a,d){var c=this,b=new Ext.promise.Consequence(e,a,d);if(c.completed){b.trigger(c.completionAction,c.completionValue)}else{c.consequences.push(b)}return b.promise},resolve:function(d){var c=this,a,b;if(c.completed){return}try{if(d===c.promise){throw new TypeError("A Promise cannot be resolved with itself.")}if((Ext.isObject(d)||Ext.isFunction(d))&&Ext.isFunction(b=d.then)){a=false;try{b.call(d,function(e){if(!a){a=true;c.resolve(e)}},function(e){if(!a){a=true;c.reject(e)}})}catch(f){if(!a){c.reject(f)}}}else{c.complete("fulfill",d)}}catch(f){c.reject(f)}},reject:function(a){if(this.completed){return}this.complete("reject",a)},update:function(b){var e=this.consequences,d,c,a;if(this.completed){return}for(c=0,a=e.length;c<a;c++){d=e[c];d.update(b)}},complete:function(f,e){var d=this,g=d.consequences,c,b,a;d.completionAction=f;d.completionValue=e;d.completed=true;for(b=0,a=g.length;b<a;b++){c=g[b];c.trigger(d.completionAction,d.completionValue)}d.consequences=null}},1,0,0,0,0,0,[Ext.promise,"Deferred"],0));(Ext.cmd.derive("Ext.promise.Promise",Ext.Base,function(b){var a;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){a=Ext.promise.Deferred},all:function(c){return b.when(c).then(function(e){var m=new a(),h=e.length,f=new Array(h),k,d,l,g,j;if(!h){m.resolve(f)}else{l=function(n,i){return b.when(n).then(function(o){f[i]=o;if(!--h){m.resolve(f)}return o},function(o){return m.reject(o)})};for(k=g=0,j=e.length;g<j;k=++g){d=e[k];if(k in e){l(d,k)}else{h--}}}return m.promise})},is:function(c){return(Ext.isObject(c)||Ext.isFunction(c))&&Ext.isFunction(c.then)},rethrowError:function(c){Ext.asap(function(){throw c})},when:function(d){var c=new Ext.promise.Deferred();c.resolve(d);return c.promise}},owner:null,constructor:function(c){this.owner=c},then:function(g,c,f,d){var e;if(arguments.length===1&&Ext.isObject(arguments[0])){e=arguments[0];g=e.success;c=e.failure;f=e.progress;d=e.scope}if(d){if(g){g=Ext.Function.bind(g,d)}if(c){c=Ext.Function.bind(c,d)}if(f){f=Ext.Function.bind(f,d)}}return this.owner.then(g,c,f)},otherwise:function(c,d){var e;if(arguments.length===1&&Ext.isObject(arguments[0])){e=arguments[0];c=e.fn;d=e.scope}if(d!=null){c=Ext.Function.bind(c,d)}return this.owner.then(null,c)},always:function(c,d){var e;if(arguments.length===1&&Ext.isObject(arguments[0])){e=arguments[0];c=e.fn;d=e.scope}if(d!=null){c=Ext.Function.bind(c,d)}return this.owner.then(function(f){try{c()}catch(g){b.rethrowError(g)}return f},function(g){try{c()}catch(f){b.rethrowError(f)}throw g})},done:function(){this.owner.then(null,b.rethrowError)},cancel:function(c){if(c==null){c=null}this.owner.reject(new this.self.CancellationError(c))},log:function(c){if(c==null){c=""}return this._owner.then(function(d){Ext.log(""+(c||"Promise")+" resolved with value: "+d);return d},function(d){Ext.log(""+(c||"Promise")+" rejected with reason: "+d);throw d})}}},1,0,0,0,0,0,[Ext.promise,"Promise"],function(a){a._ready()}));(Ext.cmd.derive("Ext.Promise",Ext.Base,function(){var a;return{statics:{_ready:function(){a=Ext.promise.Promise},all:function(){return a.all.apply(a,arguments)},race:function(){},reject:function(c){var b=new Ext.promise.Deferred();b.reject(c);return b.promise},resolve:function(c){var b=new Ext.promise.Deferred();b.resolve(c);return b.promise}},constructor:function(c){var b=new Ext.promise.Deferred();c(b.resolve.bind(b),b.reject.bind(b));return b.promise}}},1,0,0,0,0,0,[Ext,"Promise"],function(a){var b=Ext.global.Promise;if(b&&b.resolve){Ext.Promise=b}else{a._ready()}}));(Ext.cmd.derive("Ext.Deferred",Ext.promise.Deferred,function(b){var c,a;return{statics:{_ready:function(){c=Ext.promise.Promise;a=Ext.Promise.resolve},all:function(){return c.all.apply(c,arguments)},any:function(d){return b.some(d,1).then(function(e){return e[0]},function(e){if(e instanceof Error&&e.message==="Too few Promises were resolved."){Ext.raise("No Promises were resolved.")}else{throw e}})},delay:function(d,f){var e;if(arguments.length===1){f=d;d=undefined}f=Math.max(f,0);e=new b();setTimeout(function(){e.resolve(d)},f);return e.promise},map:function(d,e){return b.resolved(d).then(function(g){var o,m,f,k,n,h,j,l;k=g.length;h=new Array(g.length);o=new b();if(!k){o.resolve(h)}else{n=function(p,i){return b.resolved(p).then(function(q){return e(q,i,h)}).then(function(q){h[i]=q;if(!--k){o.resolve(h)}return q},function(q){return o.reject(q)})};for(m=j=0,l=g.length;j<l;m=++j){f=g[m];if(m in g){n(f,m)}else{k--}}}return o.promise})},memoize:function(g,f,d){var e=Ext.Function.memoize(g,f,d);return function(){return b.all(Ext.Array.slice(arguments)).then(function(h){return e.apply(f,h)})}},parallel:function(e,f){if(f==null){f=null}var d=Ext.Array.slice(arguments,2);return b.map(e,function(g){if(!Ext.isFunction(g)){throw new Error("Invalid parameter: expected a function.")}return g.apply(f,d)})},pipeline:function(e,d,f){if(f==null){f=null}return b.reduce(e,function(h,g){if(!Ext.isFunction(g)){throw new Error("Invalid parameter: expected a function.")}return g.call(f,h)},d)},reduce:function(e,f,d){var g=arguments.length===3;return b.resolved(e).then(function(i){var h=[i,function(k,l,j){return b.resolved(k).then(function(m){return b.resolved(l).then(function(n){return f(m,n,j,i)})})}];if(g){h.push(d)}return Ext.Array.reduce.apply(Ext.Array,h)})},rejected:function(e){var d=new Ext.Deferred();d.reject(e);return d.promise},resolved:function(e){var d=new Ext.Deferred();d.resolve(e);return d.promise},sequence:function(e,f){if(f==null){f=null}var d=Ext.Array.slice(arguments,2);return b.reduce(e,function(g,h){if(!Ext.isFunction(h)){throw new Error("Invalid parameter: expected a function.")}return b.resolved(h.apply(f,d)).then(function(i){g.push(i);return g})},[])},some:function(e,d){return b.resolved(e).then(function(h){var q,m,o,p,g,f,k,n,j,l;n=[];k=d;f=(h.length-k)+1;q=new b();if(h.length<d){q.reject(new Error("Too few Promises were resolved."))}else{p=function(i){if(k>0){n.push(i)}k--;if(k===0){q.resolve(n)}return i};o=function(i){f--;if(f===0){q.reject(new Error("Too few Promises were resolved."))}return i};for(m=j=0,l=h.length;j<l;m=++j){g=h[m];if(m in h){b.resolved(g).then(p,o)}}}return q.promise})},timeout:function(d,f){var e=new b(),g;g=setTimeout(function(){if(g){e.reject(new Error("Promise timed out."))}},f);b.resolved(d).then(function(h){clearTimeout(g);g=null;e.resolve(h)},function(h){clearTimeout(g);g=null;e.reject(h)});return e.promise}}}},0,0,0,0,0,0,[Ext,"Deferred"],function(a){a._ready()}));Ext.Factory=function(a){var b=this;b.aliasPrefix=a+".";b.cache={};b.name=a.replace(b.fixNameRe,b.fixNameFn);b.type=a};Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(c,e){var h=this,a=Ext.ClassManager,b=h.cache,d,g,f,i;if(c){if(c[h.instanceProp]){return c}if(typeof c==="string"){i=c;c={};c[h.defaultProperty]=i}g=c.xclass;i=c.type}if(g){if(!(f=a.get(g))){return a.instantiate(g,c)}}else{if(!(i=i||e||h.defaultType)){f=h.defaultClass}if(!f&&!(f=b[i])){d=h.aliasPrefix+i;g=a.getNameByAlias(d);if(!(f=g&&a.get(g))){return a.instantiateByAlias(d,c)}b[i]=f}}return f.isInstance?f:new f(c)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(f,d){var a=Ext.Factory,b,c,e;if(f.constructor===Object){Ext.Object.each(f,a.define,a)}else{c=new Ext.Factory(f);if(d){if(d.constructor===Object){Ext.apply(c,d);if(typeof(b=c.xclass)==="string"){c.defaultClass=Ext.ClassManager.get(b)}}else{c.defaultType=d}}a[c.name]=e=c.create.bind(c);e.instance=c}return e};(Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(f){var e=f.prototype,g=e.factoryConfig,d=e.alias,c={},b,a;d=d&&d.length&&d[0];if(d&&(b=d.lastIndexOf("."))>0){c.type=d.substring(0,b);c.defaultType=d.substring(b+1)}if(g){delete e.factoryConfig;Ext.apply(c,g)}a=Ext.Factory.define(c.type,c);if(f.create===Ext.Base.create){f.create=a}}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0));(Ext.cmd.derive("Ext.data.request.Base",Ext.Base,{factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig);b.id=++Ext.data.Connection.requestId;b.owner=a.owner;b.options=a.options;b.requestOptions=a.requestOptions},start:function(){var a=this,b=a.getTimeout();if(b&&a.async){a.timer=Ext.defer(a.onTimeout,b,a)}},abort:function(){var a=this;a.clearTimer();if(!a.timedout){a.aborted=true}a.abort=Ext.emptyFn},createDeferred:function(){return(this.deferred=new Ext.Deferred())},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var a=this.getPromise();return a.then.apply(a,arguments)},onComplete:function(){var c=this,b=c.deferred,a=c.result;c.clearTimer();if(b){if(c.success){b.resolve(a)}else{b.reject(a)}}},onTimeout:function(){var a=this;a.timedout=true;a.timer=null;a.abort(true)},getTimeout:function(){return this.timeout},clearTimer:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},destroy:function(){var a=this;a.abort();a.owner=a.options=a.requestOptions=a.result=null;a.callParent()},privates:{createException:function(){var b=this,a;a={request:b,requestId:b.id,status:b.aborted?-1:0,statusText:b.aborted?"transaction aborted":"communication failure",getResponseHeader:b._getHeader,getAllResponseHeaders:b._getHeaders};if(b.aborted){a.aborted=true}if(b.timedout){a.timedout=true}return a},_getHeader:function(a){var b=this.headers;return b&&b[a.toLowerCase()]},_getHeaders:function(){return this.headers}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.request,"Base"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(d,c,b){var a;a=this.liveConnections[Number(d)];if(a){a.onFlashStateChange(c,b)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var b=this,a,c;b.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});a=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");c="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){c=Ext.flashPluginPath}Ext.Loader.loadScript({url:a,onLoad:function(){var e="11.4.0";var g="playerProductInstall.swf";var d={};var h={};h.quality="high";h.bgcolor="#ffffff";h.allowscriptaccess="sameDomain";h.allowfullscreen="true";var f={};f.id="ext-flash-polyfill";f.name="polyfill";f.align="middle";swfobject.embedSWF(c,"ext-flash-polyfill","0","0",e,g,d,h,f)},onError:function(){},scope:b});Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(a){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var b=this;Ext.apply(b,a);b.requestHeaders={}},abort:function(){var a=this;if(a.readyState==4){return}a.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(b,c){a.push(b+": "+c)});return a.join("\r\n")},getResponseHeader:function(b){var a=this.responseHeaders;return(a&&a[b])||null},open:function(f,c,d,a,b){var e=this;e.method=f;e.url=c;e.async=d!==false;e.user=a;e.password=b},overrideMimeType:function(a){this.mimeType=a},send:function(a){var b=this;b.body=a;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",b.onFlashReady,b)}else{this.onFlashReady()}},onFlashReady:function(){var c=this,b,a;c.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(c);b={method:c.method,url:c.url,user:c.user,password:c.password,mimeType:c.mimeType,requestHeaders:c.requestHeaders,body:c.body,javascriptId:c.javascriptId};a=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b)},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(b,a){this.requestHeaders[b]=a},onreadystatechange:Ext.emptyFn,parseData:function(b){var a=this;this.status=b.status||0;a.responseHeaders={};if(a.mimeType){a.responseHeaders["content-type"]=a.mimeType}if(b.reason=="complete"){this.responseBytes=b.data;a.responseHeaders["content-length"]=b.data.length}else{if(b.reason=="error"||b.reason=="securityError"){this.statusText=b.text;a.responseHeaders["content-length"]=0}}},onFlashStateChange:function(c,b){var a=this;if(c==4){a.parseData(b);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]}a.setReadyState(c)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.request.Ajax",Ext.data.request.Base,{statics:{parseStatus:function(a){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break}}return{success:c,isException:b}}},start:function(e){var c=this,b=c.options,a=c.requestOptions,d=c.isXdr,g,f;g=c.xhr=c.openRequest(b,a,c.async,c.username,c.password);if(!d){f=c.setupHeaders(g,b,a.data,a.params)}if(c.async){if(!d){g.onreadystatechange=Ext.Function.bind(c.onStateChange,c)}}if(d){c.processXdrRequest(c,g)}Ext.data.request.Base.prototype.start.call(this,e);g.send(e);if(!c.async){return c.onComplete()}return c},abort:function(b){var a=this,d=a.xhr;if(b||a.isLoading()){try{d.onreadystatechange=null}catch(c){d.onreadystatechange=Ext.emptyFn}d.abort();Ext.data.request.Base.prototype.abort.call(this,b);a.onComplete();a.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var a=this,d=a.xhr,b=d&&d.readyState,c=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!d||a.aborted||a.timedout){return false}if(c&&d instanceof c){return b!==4}return b!==0&&b!==4},openRequest:function(c,a,d,g,b){var e=this,f=e.newRequest(c);if(g){f.open(a.method,a.url,d,g,b)}else{if(e.isXdr){f.open(a.method,a.url)}else{f.open(a.method,a.url,d)}}if(c.binary||e.binary){if(window.Uint8Array){f.responseType="arraybuffer"}else{if(f.overrideMimeType){f.overrideMimeType("text/plain; charset=x-user-defined")}}}if(c.withCredentials||e.withCredentials){f.withCredentials=true}return f},newRequest:function(a){var b=this,c;if(a.binaryData){if(window.Uint8Array){c=b.getXhrInstance()}else{c=new Ext.data.flash.BinaryXhr()}}else{if(b.cors&&Ext.isIE9m){c=b.getXdrInstance();b.isXdr=true}else{c=b.getXhrInstance();b.isXdr=false}}return c},setupHeaders:function(n,o,f,d){var j=this,b=Ext.apply({},o.headers||{},j.defaultHeaders),m=j.defaultPostHeader,k=o.jsonData,a=o.xmlData,i="Content-Type",c=j.useDefaultXhrHeader,l,g;if(!b.hasOwnProperty(i)&&(f||d)){if(f){if(o.rawData){m="text/plain"}else{if(a&&Ext.isDefined(a)){m="text/xml"}else{if(k&&Ext.isDefined(k)){m="application/json"}}}}b[i]=m}if(c&&!b["X-Requested-With"]){b["X-Requested-With"]=j.defaultXhrHeader}if(b[i]===undefined||b[i]===null){delete b[i]}try{for(l in b){if(b.hasOwnProperty(l)){g=b[l];n.setRequestHeader(l,g)}}}catch(h){j.owner.fireEvent("exception",l,g)}return b},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else{Ext.raise({msg:"Your browser does not support CORS"})}return a},getXhrInstance:(function(){var b=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0,a=b.length,f;for(;c<a;++c){try{f=b[c];f();break}catch(d){}}return f}()),processXdrRequest:function(b,c){var a=this;delete b.headers;b.contentType=b.options.contentType||a.defaultXdrContentType;c.onload=Ext.Function.bind(a.onStateChange,a,[true]);c.onerror=c.ontimeout=Ext.Function.bind(a.onStateChange,a,[false])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return[]};a.getResponseHeader=function(){return""};a.contentType=b.contentType||this.defaultXdrContentType},onStateChange:function(b){var c=this,d=c.xhr,a=Ext.GlobalEvents;if((d&&d.readyState==4)||c.isXdr){c.clearTimer();c.onComplete(b);c.cleanup();if(a.hasListeners.idle){a.fireEvent("idle")}}},onComplete:function(i){var f=this,a=f.owner,j=f.options,h=f.xhr,b={success:false,isException:false},k,g,c;if(!h||f.destroyed){return f.result=b}try{k=Ext.data.request.Ajax.parseStatus(h.status);if(k.success){k.success=h.readyState===4}}catch(d){k=b}g=f.success=f.isXdr?i:k.success;if(g){c=f.createResponse(h);a.fireEvent("requestcomplete",a,c,j);Ext.callback(j.success,j.scope,[c,j])}else{if(k.isException||f.aborted||f.timedout){c=f.createException(h)}else{c=f.createResponse(h)}a.fireEvent("requestexception",a,c,j);Ext.callback(j.failure,j.scope,[c,j])}f.result=c;Ext.callback(j.callback,j.scope,[j,g,c]);a.onRequestComplete(f);Ext.data.request.Base.prototype.onComplete.call(this,i);return c},createResponse:function(i){var g=this,c=g.isXdr,b={},j=c?[]:i.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),e=j.length,k,f,h,d,a;while(e--){k=j[e];f=k.indexOf(":");if(f>=0){h=k.substr(0,f).toLowerCase();if(k.charAt(f+1)==" "){++f}b[h]=k.substr(f+1)}}d={request:g,requestId:g.id,status:i.status,statusText:i.statusText,getResponseHeader:function(l){return b[l.toLowerCase()]},getAllResponseHeaders:function(){return b}};if(c){g.processXdrResponse(d,i)}if(g.binary){d.responseBytes=g.getByteArray(i)}else{d.responseText=i.responseText;d.responseXML=i.responseXML}return d},destroy:function(){this.xhr=null;Ext.data.request.Base.prototype.destroy.call(this)},privates:{getByteArray:function(j){var c=j.response,b=j.responseBody,k=Ext.data.flash&&Ext.data.flash.BinaryXhr,a,h,f,d;if(j instanceof k){a=j.responseBytes}else{if(window.Uint8Array){a=c?new Uint8Array(c):[]}else{if(Ext.isIE9p){try{a=new VBArray(b).toArray()}catch(g){a=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(j.responseBody,a=[])}else{a=[];h=j.responseText;f=h.length;for(d=0;d<f;d++){a.push(h.charCodeAt(d)&255)}}}}}return a},injectVBScript:function(){var a=document.createElement("script");a.type="text/vbscript";a.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=true}}},0,0,0,0,["request.ajax"],0,[Ext.data.request,"Ajax"],0));(Ext.cmd.derive("Ext.data.request.Form",Ext.data.request.Base,{start:function(d){var c=this,b=c.options,a=c.requestOptions;Ext.data.request.Base.prototype.start.call(this,d);c.form=c.upload(b.form,a.url,a.data,b);return c},abort:function(b){var a=this,d;if(a.isLoading()){try{d=a.frame.dom;if(d.stop){d.stop()}else{d.document.execCommand("Stop")}}catch(c){}}Ext.data.request.Base.prototype.abort.call(this,b);a.onComplete();a.cleanup()},cleanup:function(){var a=this,b=a.frame;if(b){b.un("load",a.onComplete,a);Ext.removeNode(b)}a.frame=a.form=null},isLoading:function(){return !!this.frame},upload:function(b,g,t,f){b=Ext.getDom(b);f=f||{};var r=document.createElement("iframe"),l=Ext.get(r),n=l.id,c=[],d="multipart/form-data",s={target:b.target,method:b.method,encoding:b.encoding,enctype:b.enctype,action:b.action},a=function(h,v){i=document.createElement("input");Ext.fly(i).set({type:"hidden",value:v,name:h});b.appendChild(i);c.push(i)},i,k,p,u,o,j,m,q,e;l.set({name:n,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(r);if(document.frames){document.frames[n].name=n}Ext.fly(b).set({target:n,method:"POST",enctype:d,encoding:d,action:g||s.action});if(t){k=Ext.Object.fromQueryString(t)||{};for(u in k){if(k.hasOwnProperty(u)){p=k[u];if(Ext.isArray(p)){o=p.length;for(j=0;j<o;j++){a(u,p[j])}}else{a(u,p)}}}}this.frame=l;l.on({load:this.onComplete,scope:this,single:!Ext.isOpera});b.submit();Ext.fly(b).set(s);for(m=c.length,q=0;q<m;q++){Ext.removeNode(c[q])}return b},getDoc:function(){var a=this.frame.dom;return(a&&(a.contentWindow.document||a.contentDocument))||(window.frames[a.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var g=this,b=g.frame,a=g.owner,k=g.options,i,h,j,d,c;if(!b){return}if(g.aborted||g.timedout){g.result=c=g.createException();c.responseXML=null;c.responseText='{success:false,message:"'+Ext.String.trim(c.statusText)+'"}';i=k.failure;j=false}else{try{h=g.getDoc();g.result=c={responseText:"",responseXML:null};if(h){if(Ext.isOpera&&h.location==Ext.SSL_SECURE_URL){return}if(h.body){if((d=h.body.firstChild)&&/pre/i.test(d.tagName)){c.responseText=d.textContent||d.innerText}else{if((d=h.getElementsByTagName("textarea")[0])){c.responseText=d.value}else{c.responseText=h.body.textContent||h.body.innerText}}}c.responseXML=h.XMLDocument||h;i=k.success;j=true;c.status=200}else{Ext.raise("Could not acquire a suitable connection for the file upload service.")}}catch(f){g.result=c=g.createException();c.status=400;c.statusText=(f.message||f.description)+"";c.responseText='{success:false,message:"'+Ext.String.trim(c.statusText)+'"}';c.responseXML=null;i=k.failure;j=false}}g.frame=null;g.success=j;a.fireEvent(j?"requestcomplete":"requestexception",a,c,k);Ext.callback(i,k.scope,[c,k]);Ext.callback(k.callback,k.scope,[k,j,c]);a.onRequestComplete(g);Ext.asap(b.destroy,b);Ext.data.request.Base.prototype.onComplete.call(this)},destroy:function(){this.cleanup();Ext.data.request.Base.prototype.destroy.call(this)}},0,0,0,0,["request.form"],0,[Ext.data.request,"Form"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:true,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,extraParams:null,autoAbort:false,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest"},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(b){b=b||{};var d=this,a,c;if(d.fireEvent("beforerequest",d,b)!==false){a=d.setOptions(b,b.scope||Ext.global);c=d.createRequest(b,a);return c.start(a.data)}Ext.callback(b.callback,b.scope,[b,undefined,undefined]);return Ext.Deferred.rejected([b,undefined,undefined])},createRequest:function(b,a){var e=this,c=b.type||a.type,d;if(!c){c=e.isFormUpload(b)?"form":"ajax"}if(b.autoAbort||e.getAutoAbort()){e.abort()}d=Ext.Factory.request({type:c,owner:e,options:b,requestOptions:a,ownerConfig:e.getConfig()});e.requests[d.id]=d;e.latestId=d.id;return d},isFormUpload:function(a){var b=this.getForm(a);if(b){return a.isUpload||this.enctypeRe.test(b.getAttribute("enctype"))}return false},getForm:function(a){return Ext.getDom(a.form)},setOptions:function(l,k){var i=this,e=l.params||{},h=i.getExtraParams(),d=l.urlParams,c=l.url||i.getUrl(),g=l.cors,j=l.jsonData,b,a,f;if(g!==undefined){i.setCors(g)}if(Ext.isFunction(e)){e=e.call(k,l)}if(Ext.isFunction(c)){c=c.call(k,l)}c=this.setupUrl(l,c);f=l.rawData||l.binaryData||l.xmlData||j||null;if(j&&!Ext.isPrimitive(j)){f=Ext.encode(f)}if(l.binaryData){if(i.nativeBinaryPostSupport()){f=(new Uint8Array(l.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){f=f.buffer}}}if(Ext.isObject(e)){e=Ext.Object.toQueryString(e)}if(Ext.isObject(h)){h=Ext.Object.toQueryString(h)}e=e+((h)?((e)?"&":"")+h:"");d=Ext.isObject(d)?Ext.Object.toQueryString(d):d;e=this.setupParams(l,e);b=(l.method||i.getMethod()||((e||f)?"POST":"GET")).toUpperCase();this.setupMethod(l,b);a=l.disableCaching!==false?(l.disableCaching||i.getDisableCaching()):false;if(b==="GET"&&a){c=Ext.urlAppend(c,(l.disableCachingParam||i.getDisableCachingParam())+"="+(new Date().getTime()))}if((b=="GET"||f)&&e){c=Ext.urlAppend(c,e);e=null}if(d){c=Ext.urlAppend(c,d)}return{url:c,method:b,data:f||e||null}},setupUrl:function(b,a){var c=this.getForm(b);if(c){a=a||c.action}return a},setupParams:function(a,d){var c=this.getForm(a),b;if(c&&!this.isFormUpload(a)){b=Ext.Element.serializeForm(c);d=d?(d+"&"+b):b}return d},setupMethod:function(a,b){if(this.isFormUpload(a)){return"POST"}return b},isLoading:function(a){if(!a){a=this.getLatest()}return a?a.isLoading():false},abort:function(a){if(!a){a=this.getLatest()}if(a&&a.isLoading()){a.abort()}},abortAll:function(){var b=this.requests,a;for(a in b){this.abort(b[a])}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},clearTimeout:function(a){if(!a){a=this.getLatest()}if(a){a.clearTimer()}},onRequestComplete:function(a){delete this.requests[a.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:true,constructor:function(){var a=this;a.queue=[];a.taskQueue=[];a.runningQueue=[];a.idleQueue=[];a.isRunning=false;a.isIdle=true;a.run=Ext.Function.bind(a.run,a);if(Ext.os.is.iOS){Ext.interval(a.watch,500,a)}},start:function(c,b,a){var d=this;d.queue.push(arguments);if(!d.isRunning){if(d.hasOwnProperty("idleTimer")){clearTimeout(d.idleTimer);delete d.idleTimer}if(d.hasOwnProperty("idleQueueTimer")){clearTimeout(d.idleQueueTimer);delete d.idleQueueTimer}d.isIdle=false;d.isRunning=true;d.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var e=this;if(!e.isRunning){return}var a=e.runningQueue,b=Ext.now(),c,d;e.lastRunTime=b;e.frameStartTime=b;a.push.apply(a,e.queue);for(c=0,d=a.length;c<d;c++){e.invoke(a[c])}a.length=0;e.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(e,d,b){var h=this;if(!h.isRunning){return}var a=h.queue,g=a.length,c,f;for(c=0;c<g;c++){f=a[c];if(f[0]===e&&f[1]===d&&f[2]===b){a.splice(c,1);c--;g--}}if(g===0){h.doStop();h.isRunning=false;h.idleTimer=Ext.defer(h.whenIdle,100,h)}},onIdle:function(e,d,a){var c=this.idleQueue,b,f,g;for(b=0,f=c.length;b<f;b++){g=c[b];if(e===g[0]&&d===g[1]&&a===g[2]){return}}c.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(e,d,a){var c=this.idleQueue,b,f,g;for(b=0,f=c.length;b<f;b++){g=c[b];if(e===g[0]&&d===g[1]&&a===g[2]){c.splice(b,1);return true}}return false},queueTask:function(c,b,a){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(e,d,a){var c=this.taskQueue,b,f,g;for(b=0,f=c.length;b<f;b++){g=c[b];if(e===g[0]&&d===g[1]&&a===g[2]){c.splice(b,1);b--;f--}}},invoke:function(d){var c=d[0],b=d[1],a=d[2];c=(typeof c=="string"?b[c]:c);if(Ext.isArray(a)){c.apply(b,a)}else{c.call(b,a)}},whenIdle:function(){this.isIdle=true;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty("idleQueueTimer")){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var a=this.idleQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty("taskQueueTimer")){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var a=this.taskQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],0));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(a){var b=this;Ext.apply(b,a||{});b.all={};b.references={};b.onAvailableCallbacks={}},create:function(a,b){if(typeof a==="string"){return Ext.widget(a)}if(a.isComponent){return a}if("xclass" in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(a){var e=this,d=e.all,c=a.getId(),b=e.onAvailableCallbacks;d[c]=a;if(a.getReference&&a.getReference()){e.references[c]=a}++e.count;if(!e.hasFocusListener){Ext.on("focus",e.onGlobalFocus,e);e.hasFocusListener=true}b=b&&b[c];if(b&&b.length){e.notifyAvailable(a)}},unregister:function(a){var b=a.getId();if(a.getReference&&a.getReference()){this.references[b]=null;delete this.references[b]}this.all[b]=null;delete this.all[b];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var c=this,b=c.references,a;if(c.referencesDirty){for(a in b){if(b.hasOwnProperty(a)){b[a].fixReference()}}c.referencesDirty=false}},onAvailable:function(g,c,b){var f=this,e=f.onAvailableCallbacks,a=f.all,d;if(g in a){d=a[g];c.call(b||d,d)}else{if(g){if(!Ext.isArray(e[g])){e[g]=[]}e[g].push(function(h){c.call(b||h,h)})}}},notifyAvailable:function(b){var a=this.onAvailableCallbacks[b&&b.getId()]||[];while(a.length){(a.shift())(b)}},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(h){var d=this,b=h.toElement,i=h.fromElement,g=Ext.Component.fromElement(b),a=Ext.Component.fromElement(i),c,f;if(g===a){return}c=d.getCommonAncestor(a,g);if(a&&!(a.destroyed||a.destroying)){if(a.handleBlurEvent){a.handleBlurEvent(h)}for(f=a;f&&f!==c;f=f.getRefOwner()){if(!(f.destroyed||f.destroying)){f.onFocusLeave({event:h.event,type:"focusleave",target:i,relatedTarget:b,fromComponent:a,toComponent:g})}}}if(g&&!g.destroyed){if(g.handleFocusEvent){g.handleFocusEvent(h)}for(f=g;f&&f!==c;f=f.getRefOwner()){f.onFocusEnter({event:h.event,type:"focusenter",relatedTarget:i,target:b,fromComponent:a,toComponent:g})}}},getCommonAncestor:function(b,a){if(b===a){return b}while(b&&!(b.isAncestor(a)||b===a)){b=b.getRefOwner()}return b},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(b,d,c){var g=Ext.getDom(b),a=this.all,e=0,i,f,h;if(typeof d!=="number"){i=Ext.getDom(d);d=Number.MAX_VALUE}while(g&&g.nodeType===1&&e<d&&g!==i){f=g.getAttribute("data-componentid")||g.id;if(f){h=a[f];if(h&&(!c||Ext.ComponentQuery.is(h,c))){return h}e++}g=g.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}}));Ext.ns("Ext.util").Operators={"=":function(b,c){return b==c},"!=":function(b,c){return b!=c},"^=":function(b,c){return b&&b.substr(0,c.length)==c},"$=":function(b,c){return b&&b.substr(b.length-c.length)==c},"*=":function(b,c){return b&&b.indexOf(c)!==-1},"%=":function(b,c){return(b%c)===0},"|=":function(b,c){return b&&(b==c||b.substr(0,c.length+1)==c+"-")},"~=":function(b,c){return b&&(" "+b+" ").indexOf(" "+c+" ")!=-1}};(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(a,e){var d=this,c,b;d.removeAtKey(a);b=d.last;c={prev:b,next:null,key:a,value:e};if(b){b.next=c}else{d.first=c}d.last=c;Ext.util.HashMap.prototype.add.call(this,a,c);d.prune();return e},insertBefore:function(b,f,c){var e=this,a,d;if(c=this.map[this.findKey(c)]){a=e.findKey(f);if(a){e.unlinkEntry(d=e.map[a])}else{d={prev:c.prev,next:c,key:b,value:f}}if(c.prev){d.prev.next=d}else{e.first=d}d.next=c;c.prev=d;e.prune();return f}else{return e.add(b,f)}},get:function(a){var b=this.map[a];if(b){if(b.next){this.moveToEnd(b)}return b.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(a){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.call(this,a)},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else{this.last=a.prev}if(a.prev){a.prev.next=a.next}else{this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else{this.first=a}this.last=a},getArray:function(c){var a=[],b=this.first;while(b){a.push(c?b.key:b.value);b=b.next}return a},each:function(c,b,a){var f=this,e=a?f.last:f.first,d=f.length;b=b||f;while(e){if(c.call(b,e.key,e.value,d)===false){break}e=a?e.prev:e.next}return f},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a].value===b){return a}}return undefined},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b].value)}}a.resumeEvents();return a},prune:function(){var b=this,a=b.getMaxSize(),c=a?(b.length-a):0;if(c>0){for(;b.first&&c;c--){b.removeAtKey(b.first.key)}}},destroy:function(){this.first=this.last=null;Ext.util.HashMap.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var f=this,r=Ext.util.Operators,j=/(\d*)n\+?(\d*)/,e=/\D/,l=/^(\s)+/,k=/\\(.)/g,m=new Ext.util.LruCache({maxSize:100}),n=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),o=function(t,s){return s.method.apply(this,[t].concat(s.args))},a=function(u,y){var s=[],v=0,x=u.length,w,t=y!==">";for(;v<x;v++){w=u[v];if(w.getRefItems){s=s.concat(w.getRefItems(t))}}return s},g=function(t){var s=[],u=0,w=t.length,v;for(;u<w;u++){v=t[u];while(!!(v=v.getRefOwner())){s.push(v)}}return s},d=function(t,y,x){if(y==="*"){return t.slice()}else{var s=[],u=0,w=t.length,v;for(;u<w;u++){v=t[u];if(v.isXType(y,x)){s.push(v)}}return s}},b=function(B,C,v,u){var F=[],A=0,t=B.length,E,x,D,s,z,y,w;if(C.charAt(0)==="@"){E=true;C=C.substr(1)}if(C.charAt(0)==="?"){E=true;x=true;C=C.substr(1)}for(;A<t;A++){D=B[A];w=D.getConfigurator&&D.self.$config.configs[C];if(w){s=D[w.names.get]()}else{if(E&&!D.hasOwnProperty(C)){continue}else{s=D[C]}}if(x){F.push(D)}else{if(v==="~="){if(s){if(!Ext.isArray(s)){s=s.split(" ")}for(z=0,y=s.length;z<y;z++){if(r[v](Ext.coerce(s[z],u),u)){F.push(D);break}}}}else{if(v==="/="){if(s!=null&&u.test(s)){F.push(D)}}else{if(!u?!!D[C]:r[v](Ext.coerce(s,u),u)){F.push(D)}}}}}return F},h=function(t,x){var s=[],u=0,w=t.length,v;for(;u<w;u++){v=t[u];if(v.getItemId()===x){s.push(v)}}return s},q=function(s,t,u){return f.pseudos[t](s,u)},i=/^(\s?([>\^])\s?|\s|$)/,p=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,c=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:d,argTransform:function(s){if(s[1]!==undefined){s[1]=s[1].replace(k,"$1")}return s.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:b,argTransform:function(v){var s=v[0],w=v[1],t=v[2],u=v[4],x;if(u!==undefined){u=u.replace(k,"$1")}if(t==="/="){x=m.get(u);if(x){u=x}else{u=m.add(u,new RegExp(u))}}return[w,t,u]}},{re:/^#((?:\\\.|[\w\-])+)/,method:h},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:q,argTransform:function(s){if(s[2]!==undefined){s[2]=s[2].replace(k,"$1")}return s.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:n}];f.Query=Ext.extend(Object,{constructor:function(s){s=s||{};Ext.apply(this,s)},execute:function(u){var v=this.operations,t=[],x,w,s;for(w=0,s=v.length;w<s;w++){x=v[w];t=t.concat(this._execute(u,x))}return t},_execute:function(t,v){var w=0,x=v.length,u,s;if(!t){s=Ext.ComponentManager.getAll()}else{if(Ext.isIterable(t)){s=t}else{if(t.isMixedCollection){s=t.items}}}for(;w<x;w++){u=v[w];if(u.mode==="^"){s=g(s||[t])}else{if(u.mode){s=a(s||[t],u.mode)}else{s=o(s||a([t]),u)}}if(w===x-1){return s}}return[]},is:function(v){var u=this.operations,t=false,s=u.length,x,w;if(s===0){return true}for(w=0;w<s;w++){x=u[w];t=this._is(v,x);if(t){return t}}return false},_is:function(A,s){var y=s.length,t=[A],u,w,v,x,z,B;for(w=y-1;w>=0;--w){u=s[w];x=u.mode;if(x){if(x==="^"){t=a(t," ")}else{if(x===">"){z=[];for(v=0,y=t.length;v<y;++v){B=t[v].getRefOwner();if(B){z.push(B)}}t=z}else{t=g(t)}}if(t.length===0){return false}}else{t=o(t,u);if(t.length===0){return false}}}return true},getMatches:function(v,t){var s=t.length,u;for(u=0;u<s;++u){v=o(v,t[u]);if(v.length===0){break}}return v},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(f,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(y,s){var w=0,x=y.length,v=[],u=-1,t;for(;w<x;++w){t=y[w];if(!f.is(t,s)){v[++u]=t}}return v},first:function(t){var s=[];if(t.length>0){s.push(t[0])}return s},last:function(u){var s=u.length,t=[];if(s>0){t.push(u[s-1])}return t},focusable:function(t){var s=t.length,v=[],u=0,w;for(;u<s;u++){w=t[u];if(w.isFocusable&&w.isFocusable()){v.push(w)}}return v},"nth-child":function(y,z){var A=[],t=j.exec(z==="even"&&"2n"||z==="odd"&&"2n+1"||!e.test(z)&&"n+"+z||z),w=(t[1]||1)-0,x=t[2]-0,v,s,u;for(v=0;s=y[v];v++){u=v+1;if(w===1){if(x===0||u===x){A.push(s)}}else{if((u+x)%w===0){A.push(s)}}}return A},scrollable:function(t){var s=t.length,v=[],u=0,w;for(;u<s;u++){w=t[u];if(w.scrollable||w._scrollable){v.push(w)}}return v}},query:function(s,z){if(!s){return Ext.ComponentManager.all.getArray()}var u=[],A=[],x={},w=f.cache.get(s),v,y,t;if(!w){w=f.cache.add(s,f.parse(s))}u=w.execute(z);if(w.isMultiMatch()){v=u.length;for(t=0;t<v;t++){y=u[t];if(!x[y.id]){A.push(y);x[y.id]=true}}u=A}return u},visitPreOrder:function(s,u,w,v,t){f._visit(true,s,u,w,v,t)},visitPostOrder:function(s,u,w,v,t){f._visit(false,s,u,w,v,t)},_visit:function(C,t,B,A,D,x){var z=f.cache.get(t),w=[B],s,y=0,v,u;if(!z){z=f.cache.add(t,f.parse(t))}u=z.is(B);if(B.getRefItems){s=B.getRefItems();y=s.length}if(x){Ext.Array.push(w,x)}if(C){if(u){if(A.apply(D||B,w)===false){return false}}}for(v=0;v<y;v++){if(f._visit.call(f,C,t,s[v],A,D,x)===false){return false}}if(!C){if(u){if(A.apply(D||B,w)===false){return false}}}},is:function(t,s){if(!s){return true}var u=f.cache.get(s);if(!u){u=f.cache.add(s,f.parse(s))}return u.is(t)},parse:function(t){var u=[],w,x,v,s;w=Ext.splitAndUnescape(t,",");for(v=0,s=w.length;v<s;v++){x=Ext.String.trim(w[v]);u.push(f._parse(x))}return new f.Query({operations:u})},_parse:function(y){var t=[],w=Ext.String.trim,u=c.length,D,z,x,E,F,G,v,A,B,s,C;while(y&&D!==y){D=y;z=y.match(p);if(z){E=z[1];x=w(z[2]).replace(k,"$1");if(E==="#"){t.push({method:h,args:[x]})}else{t.push({method:d,args:[x,Boolean(z[3])]})}y=y.replace(z[0],"").replace(l,"$1")}while(!(F=y.match(i))){for(A=0;y&&A<u;A++){B=c[A];G=y.match(B.re);s=B.method;v=B.argTransform;if(G){if(v){C=v(G)}else{C=G.slice(1)}t.push({method:Ext.isString(B.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[s].concat(G.slice(1)))):B.method,args:C});y=y.replace(G[0],"").replace(l,"$1");break}if(A===(u-1)){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(F[1]){t.push({mode:F[2]||F[1]});y=y.replace(F[0],"").replace(l,"")}}return t}});Ext.all=function(){return f.query.apply(f,arguments)};Ext.first=function(){var s=f.query.apply(f,arguments);return(s&&s[0])||null}}));(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",initialized:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=true},onClassExtended:function(b,e){if(!e.hasOwnProperty("eventedConfig")){return}var d=e.config,f=e.eventedConfig,c,a;if(d){Ext.applyIf(d,f)}else{b.addConfig(f)}for(c in f){if(f.hasOwnProperty(c)){a=Ext.Config.get(c);e[a.names.set]=a.eventedSetter||a.getEventedSetter()}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(c,b){var a=this.getConstrainVector(b,c);if(a){c[0]+=a[0];c[1]+=a[1]}return c},alignTo:function(c,a,f,b){var e=this,d=e.el;return e.setXY(e.getAlignToXY(c,a,f),d.anim&&!!b?d.anim(b):false)},calculateAnchorXY:function(f,h,g,d){var i=this,c=i.el,j=document,e=(c.dom===j.body||c.dom===j),k=Math.round,l,b,a;f=(f||"tl").toLowerCase();d=d||{};b=d.width||(e?Ext.Element.getViewportWidth():i.getWidth());a=d.height||(e?Ext.Element.getViewportHeight():i.getHeight());switch(f){case"tl":l=[0,0];break;case"bl":l=[0,a];break;case"tr":l=[b,0];break;case"c":l=[k(b*0.5),k(a*0.5)];break;case"t":l=[k(b*0.5),0];break;case"l":l=[0,k(a*0.5)];break;case"r":l=[b,k(a*0.5)];break;case"b":l=[k(b*0.5),a];break;case"tc":l=[k(b*0.5),0];break;case"bc":l=[k(b*0.5),a];break;case"br":l=[b,a]}return[l[0]+h,l[1]+g]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(i,v,e){var w=this,d,u,a,g,q,f,r,s,o,p,t,n,m,b,c,h,k,l,j;i=Ext.get(i.el||i);if(!i||!i.dom){}e=e||[0,0];v=(!v||v==="?"?"tl-bl?":(!(/-/).test(v)&&v!==""?"tl-"+v:v||"tl-bl")).toLowerCase();v=w.convertPositionSpec(v);a=v.match(w._alignRe);n=a[1];m=a[2];t=!!a[3];g=w.getAnchorXY(n,true);q=w.getAnchorToXY(i,m,false);l=q[0]-g[0]+e[0];j=q[1]-g[1]+e[1];if(t){if(a[3]==="!"){d=i}else{d=w.constrainTo||w.container||w.el.parent()}d=Ext.get(d.el||d);u=d.getConstrainRegion();u.right=u.left+d.el.dom.clientWidth;f=w.getWidth();r=w.getHeight();s=i.getRegion();b=n.charAt(0);c=n.charAt(n.length-1);h=m.charAt(0);k=m.charAt(m.length-1);o=(l<s.right&&l+f>=s.left)&&((b=="t"&&h=="b")||(b=="b"&&h=="t"));p=(j<s.bottom&&j+r>=s.top)&&((c=="r"&&k=="l")||(c=="l"&&k=="r"));if(l+f>u.right){if(p){l=s.left-f;p=false}else{l=u.right-f}}if(l<u.left){l=p?s.right:u.left}if(j+r>u.bottom){if(o){j=s.top-r;o=false}else{j=u.bottom-r}}if(j<u.top){j=o?s.bottom:u.top}}return[l,j]},getAnchorXY:function(d,h,b){var g=this,i=g.getXY(),a=g.el,k=document,c=a.dom==k.body||a.dom==k,j=a.getScroll(),f=c?j.left:h?0:i[0],e=c?j.top:h?0:i[1];return g.calculateAnchorXY(d,f,e,b)},getBox:function(d,g){var e=this,l=g?e.getLocalXY():e.getXY(),i=l[0],f=l[1],j=e.getWidth(),b=e.getHeight(),c,a,k;if(d){c=e.getBorderPadding();a=c.beforeX;k=c.beforeY;i+=a;f+=k;j-=(a+c.afterX);b-=(k+c.afterY)}return{x:i,left:i,0:i,y:f,top:f,1:f,width:j,height:b,right:i+j,bottom:f+b}},calculateConstrainedPosition:function(g,b,k,d){var j=this,c,h=j.floatParent,e=h?h.getTargetEl():null,a,f,i,m=false,l;if(k&&h){a=e.getXY();f=e.getBorderPadding();a[0]+=f.beforeX;a[1]+=f.beforeY;if(b){i=[b[0]+a[0],b[1]+a[1]]}}else{i=b}g=g||j.constrainTo||e||j.container||j.el.parent();if(k&&i){i=j.reverseTranslateXY(i)}c=((j.constrainHeader&&j.header.rendered)?j.header:j).getConstrainVector(g,i,d);if(c){m=b||j.getPosition(k);m[0]+=c[0];m[1]+=c[1]}return m},getConstrainRegion:function(){var g=this,c=g.el,a=c.dom.nodeName==="BODY",e=c.dom,f=c.getBorders(),h=c.getXY(),d=h[0]+f.beforeX,i=h[1]+f.beforeY,j,b,k;if(a){j=c.getScroll();d=j.left;i=j.top;b=Ext.Element.getViewportWidth();k=Ext.Element.getViewportHeight()}else{b=e.clientWidth;k=e.clientHeight}return new Ext.util.Region(i,d+b,i+k,d)},getConstrainVector:function(g,c,e){var a=this.getRegion(),d=[0,0],b=(this.shadow&&this.constrainShadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,i=false,h,f=this.constraintInsets;if(!(g instanceof Ext.util.Region)){g=Ext.get(g.el||g);h=g.getViewSize();g=g.getConstrainRegion();g.right=g.left+h.width;g.bottom=g.top+h.height}if(f){f=Ext.isObject(f)?f:Ext.Element.parseBox(f);g.adjust(f.top,f.right,f.bottom,f.left)}if(c){a.translateBy(c[0]-a.x,c[1]-a.y)}if(e){a.right=a.left+e[0];a.bottom=a.top+e[1]}if(b){g.adjust(b[0],-b[1],-b[2],b[3])}if(a.right>g.right){i=true;d[0]=(g.right-a.right)}if(a.left+d[0]<g.left){i=true;d[0]=(g.left-a.left)}if(a.bottom>g.bottom){i=true;d[1]=(g.bottom-a.bottom)}if(a.top+d[1]<g.top){i=true;d[1]=(g.top-a.top)}return i?d:false},getOffsetsTo:function(a){var c=this.getXY(),b=Ext.fly(a.el||a).getXY();return[c[0]-b[0],c[1]-b[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getClientRegion:function(){var b=this,a,c=b.getBox(),d=b.dom;a=d.offsetWidth-d.clientWidth;if(a){if(b.getStyle("direction")==="rtl"){c.left+=a}else{c.right-=a}}a=d.offsetHeight-d.clientHeight;if(a){c.bottom-=a}return new Ext.util.Region(c.top,c.right,c.bottom,c.left)},getViewRegion:function(){var f=this,c=f.el,a=c.dom.nodeName==="BODY",e,i,g,h,d,b,j;if(a){i=c.getScroll();d=i.left;h=i.top;b=Ext.Element.getViewportWidth();j=Ext.Element.getViewportHeight()}else{e=f.getBorderPadding();g=f.getXY();d=g[0]+e.beforeX;h=g[1]+e.beforeY;b=f.getWidth(true);j=f.getHeight(true)}return new Ext.util.Region(h,d+b,h+j,d)},move:function(i,b,c){var f=this,l=f.getXY(),j=l[0],h=l[1],d=[j-b,h],k=[j+b,h],g=[j,h-b],a=[j,h+b],e={l:d,left:d,r:k,right:k,t:g,top:g,up:g,b:a,bottom:a,down:a};i=i.toLowerCase();f.setXY([e[i][0],e[i][1]],c)},setBox:function(c){var b=this,a,d;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}b.constrainBox(c);a=c.x;d=c.y;b.setXY([a,d]);b.setSize(c.width,c.height);b.afterSetPosition(a,d);return b},constrainBox:function(d){var c=this,b,a,e;if(c.constrain||c.constrainHeader){a=("x" in d)?d.x:d.left;e=("y" in d)?d.y:d.top;b=c.calculateConstrainedPosition(null,[a,e],false,[d.width,d.height]);if(b){d.x=b[0];d.y=b[1]}}},translatePoints:function(a,c){var b=this.translateXY(a,c);return{left:b.x,top:b.y}},translateXY:function(g,e){var d=this,b=d.el,h=b.getStyle(d._positionTopLeft),a=h.position==="relative",c=parseFloat(h.left),f=parseFloat(h.top),i=d.getXY();if(Ext.isArray(g)){e=g[1];g=g[0]}if(isNaN(c)){c=a?0:b.dom.offsetLeft}if(isNaN(f)){f=a?0:b.dom.offsetTop}c=(typeof g==="number")?g-i[0]+c:undefined;f=(typeof e==="number")?e-i[1]+f:undefined;return{x:c,y:f}},reverseTranslateXY:function(j){var h=j,c=this.el,i=[],d=c.dom,b=d.offsetParent,a,e,g,f;if(b){a=c.isStyle("position","relative"),e=Ext.fly(b).getXY(),g=j[0]+e[0]+b.clientLeft;f=j[1]+e[1]+b.clientTop;if(a){g+=c.getPadding("l");f+=c.getPadding("t")}h=[g,f]}return h}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(g,e,b,a,i,j){var f=this,h=!Ext.isEmpty(i),c=function(){f.alignTo(g,e,b,a);Ext.callback(j,f)},d=f.getAnchor();f.removeAnchor();Ext.apply(d,{fn:c,scroll:h});Ext.on("resize",c,null);if(h){Ext.getWin().on("scroll",c,null,{buffer:!isNaN(i)?i:50})}c();return f},getAnchor:function(){var b=this.el,c,a;if(!b.dom){return}c=b.getData();a=c._anchor;if(!a){a=c._anchor={}}return a},removeAnchor:function(){var a=this.getAnchor();if(a&&a.fn){Ext.un("resize",a.fn);if(a.scroll){Ext.getWin().on("scroll",a.fn)}delete a.fn}return this},setBox:function(c,a){var b=this;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}if(a){b.constrainBox(c);b.animate(Ext.applyIf({to:c,listeners:{afteranimate:Ext.Function.bind(b.afterSetPosition,b,[c.x,c.y])}},a))}else{arguments.callee.$previous.call(this,c)}return b}});(Ext.cmd.derive("Ext.dom.UnderlayPool",Ext.Base,{constructor:function(a){this.elementConfig=a;this.cache=[]},checkOut:function(){var a=this.cache.shift();if(!a){a=Ext.Element.create(this.elementConfig);a.setVisibilityMode(2)}return a},checkIn:function(a){this.cache.push(a)},reset:function(){var a=this.cache,b=a.length;while(b--){a[b].destroy()}this.cache=[]}},1,0,0,0,0,0,[Ext.dom,"UnderlayPool"],0));(Ext.cmd.derive("Ext.dom.Underlay",Ext.Base,{constructor:function(a){Ext.apply(this,a)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var b=this,a=b.el;if(a){a.hide();b.getPool().checkIn(a);b.el=null;b.hidden=true}},realign:function(h,g,a,i){var e=this,b=e.el,d=e.target,c=e.offsets,f=Math.max;if(b){if(h==null){h=d.getX()}if(g==null){g=d.getY()}if(a==null){a=d.getWidth()}if(i==null){i=d.getHeight()}if(c){h=h+c.x;g=g+c.y;a=f(a+c.w,0);i=f(i+c.h,0)}b.setXY([h,g]);b.setSize(a,i)}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}},show:function(){var b=this,d=b.target,f=b.zIndex,a=b.el,c=b.getInsertionTarget().dom,e;if(!a){a=b.el=b.getPool().checkOut()}b.beforeShow();if(f==null){f=(parseInt(d.getStyle("z-index"),10))}if(f){a.setStyle("z-index",f)}a.setStyle("position",b.fixed?"fixed":"");e=a.dom;if(e.nextSibling!==c){d.dom.parentNode.insertBefore(e,c)}a.show();b.realign();b.hidden=false}},1,0,0,0,0,0,[Ext.dom,"Underlay"],0));(Ext.cmd.derive("Ext.dom.Shadow",Ext.dom.Underlay,{alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:"x-"+(!Ext.supports.CSS3BoxShadow?"ie":"css")+"-shadow",constructor:function(b){var d=this,e,c,f,a;Ext.dom.Underlay.prototype.constructor.call(this,b);d.elementConfig={cls:d.cls,role:"presentation"};f=d.offset;a=Math.floor(f/2);d.opacity=50;switch(d.mode.toLowerCase()){case"drop":e={x:0,y:0,w:f,h:f};if(Ext.supports.CSS3BoxShadow){c={x:f,y:f,h:-f,w:-f}}else{c={x:-a,y:-a,h:-a,w:-a}}break;case"sides":e={x:-f,y:0,w:f*2,h:f};if(Ext.supports.CSS3BoxShadow){c={x:0,y:f,h:-f,w:0}}else{c={x:1+a-2*f,y:-(1+a),h:-1,w:a-1}}break;case"frame":e={x:-f,y:-f,w:f*2,h:f*2};if(Ext.supports.CSS3BoxShadow){c={x:0,y:0,h:0,w:0}}else{c={x:1+a-2*f,y:1+a-2*f,h:f-a-1,w:f-a-1}}break;case"bottom":e={x:-f,y:0,w:f*2,h:f};if(Ext.supports.CSS3BoxShadow){c={x:0,y:f,h:-f,w:0}}else{c={x:0,y:f,h:0,w:0}}break}d.offsets=c;d.outerOffsets=e},getShadowSize:function(){var b=this,d=b.el?b.offset:0,a=[d,d,d,d],c=b.mode.toLowerCase();if(b.el&&c!=="frame"){a[0]=0;if(c=="drop"){a[3]=0}}return a},boxShadowProperty:(function(){var b="boxShadow",a=document.documentElement.style;if(!("boxShadow" in a)){if("WebkitBoxShadow" in a){b="WebkitBoxShadow"}else{if("MozBoxShadow" in a){b="MozBoxShadow"}}}return b}()),beforeShow:function(){var b=this,a=b.el.dom.style,c=b.shim;if(Ext.supports.CSS3BoxShadow){a[b.boxShadowProperty]="0 0 "+(b.offset+2)+"px #888"}else{a.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(b.offset)+")"}if(c){c.realign()}},setOpacity:function(a){var b=this.el;if(b){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;b.setOpacity(a)}}},1,0,0,0,0,0,[Ext.dom,"Shadow",Ext,"Shadow"],0));(Ext.cmd.derive("Ext.dom.Shim",Ext.dom.Underlay,{cls:"x-shim",constructor:function(a){Ext.dom.Underlay.prototype.constructor.call(this,a);this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var a=this.shadow;return(a&&a.el)||this.target}},1,0,0,0,0,0,[Ext.dom,"Shim"],0));(Ext.cmd.derive("Ext.dom.ElementEvent",Ext.util.Event,{addListener:function(g,j,k,c,e){var f=this,h=false,a=f.name,b,d,i;k=k||{};if(k.delegated===false||Ext.event.publisher.Dom.instance.directEvents[a]){if(k.capture){i=f.directCaptures||(f.directCaptures=new Ext.util.Event(f.observable,a));h=i.addListener(g,j,k,c,e)}else{d=f.directs||(f.directs=new Ext.util.Event(f.observable,a));h=d.addListener(g,j,k,c,e)}}else{if(k.capture){b=f.captures||(f.captures=new Ext.util.Event(f.observable,a));h=b.addListener(g,j,k,c,e)}else{h=Ext.util.Event.prototype.addListener.call(this,g,j,k,c,e)}}return h},removeListener:function(e,d){var f=this,a=f.captures,c=f.directs,g=f.directCaptures,h=false,b=f.findListener(e,d);if(b!==-1){h=Ext.util.Event.prototype.removeListener.call(this,e,d,b)}else{if(c){b=c.findListener(e,d)}if(b!==-1){h=c.removeListener(e,d,b)}else{if(a){b=a.findListener(e,d)}if(b!==-1){h=a.removeListener(e,d,b)}else{if(g){b=g.findListener(e,d);if(b!==-1){h=g.removeListener(e,d,b)}}}}}return h},clearListeners:function(){var c=this,d=c.directCaptures,b=c.directs,a=c.captures;if(d){d.clearListeners()}if(b){b.clearListeners()}if(a){a.clearListeners()}Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var c=this,d=c.directCaptures,b=c.directs,a=c.captures;if(d){d.suspend()}if(b){b.suspend()}if(a){a.suspend()}Ext.util.Event.prototype.suspend.call(this)},resume:function(){var c=this,d=c.directCaptures,b=c.directs,a=c.captures;if(d){d.resume()}if(b){b.resume()}if(a){a.resume()}Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,"ElementEvent"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var b=this,a=b.type;b.handles={};b.registerEvents();Ext.event.publisher.Publisher.publishers[a]=b},registerEvents:function(e){var g=this,d=Ext.event.publisher.Publisher.publishersByEvent,b=e||g.handledEvents,f=b.length,a,c;for(c=0;c<f;c++){a=b[c];g.handles[a]=1;d[a]=g}},fire:function(c,a,b){var d;if(c.hasListeners[a]){d=c.events[a];if(d){d.fire.apply(d,b)}}}},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,{isRegion:true,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(e,b,a,d){var c=this;c.y=c.top=c[1]=e;c.right=b;c.bottom=a;c.x=c.left=c[0]=d},contains:function(b){var a=this;return(b.x>=a.x&&b.right<=a.right&&b.y>=a.y&&b.bottom<=a.bottom)},intersect:function(g){var f=this,d=Math.max(f.y,g.y),e=Math.min(f.right,g.right),a=Math.min(f.bottom,g.bottom),c=Math.max(f.x,g.x);if(a>d&&e>c){return new this.self(d,e,a,c)}else{return false}},union:function(g){var f=this,d=Math.min(f.y,g.y),e=Math.max(f.right,g.right),a=Math.max(f.bottom,g.bottom),c=Math.min(f.x,g.x);return new this.self(d,e,a,c)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(e,b,a,d){var c=this;c.top=c.y+=e;c.left=c.x+=d;c.right+=b;c.bottom+=a;return c},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.getOutOfBoundOffsetX(b)}else{return this.getOutOfBoundOffsetY(b)}}else{b=a;var c=new Ext.util.Offset();c.x=this.getOutOfBoundOffsetX(b.x);c.y=this.getOutOfBoundOffsetY(b.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else{if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else{if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.isOutOfBoundX(b)}else{return this.isOutOfBoundY(b)}}else{b=a;return(this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y))}},isOutOfBoundX:function(a){return(a<this.x||a>this.right)},isOutOfBoundY:function(a){return(a<this.y||a>this.bottom)},restrict:function(b,d,a){if(Ext.isObject(b)){var c;a=d;d=b;if(d.copy){c=d.copy()}else{c={x:d.x,y:d.y}}c.x=this.restrictX(d.x,a);c.y=this.restrictY(d.y,a);return c}else{if(b=="x"){return this.restrictX(d,a)}else{return this.restrictY(d,a)}}},restrictX:function(b,a){if(!a){a=1}if(b<=this.x){b-=(b-this.x)*a}else{if(b>=this.right){b-=(b-this.right)*a}}return b},restrictY:function(b,a){if(!a){a=1}if(b<=this.y){b-=(b-this.y)*a}else{if(b>=this.bottom){b-=(b-this.bottom)*a}}return b},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a,c){if(arguments.length==1){c=a.y;a=a.x}var b=this;b.top=b.y+=c;b.right+=a;b.bottom+=c;b.left=b.x+=a;return b},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return(this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left)}},3,0,0,0,0,0,[Ext.util,"Region"],0));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=(a&&a.length>0)?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}Ext.util.Region.prototype.constructor.call(this,b,a,b,a)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return(this.x===a.x&&this.y===a.y)},isCloseTo:function(c,b){if(typeof b=="number"){return this.getDistanceTo(c)<=b}var a=c.x,f=c.y,e=b.x,d=b.y;return(this.x<=a+e&&this.x>=a-e&&this.y<=f+d&&this.y>=f-d)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(!a||typeof a!=="object"){a=this.origin}return(Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y))},getDistanceTo:function(b){if(!b||typeof b!=="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.sqrt(c*c+a*a)},getAngleTo:function(b){if(!b||typeof b!=="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.atan2(a,c)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",isStopped:false,defaultPrevented:false,isEvent:true,statics:{resolveTextNode:function(a){return(a&&a.nodeType===3)?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(b){var f=this,i=f.self,e=f.self.resolveTextNode,h=b.changedTouches,c=h?h[0]:b,g=b.type,a,d;f.pageX=c.pageX;f.pageY=c.pageY;f.target=f.delegatedTarget=e(b.target);d=b.relatedTarget;if(d){f.relatedTarget=e(d)}f.browserEvent=f.event=b;f.type=g;f.button=b.button||0;f.shiftKey=b.shiftKey;f.ctrlKey=b.ctrlKey||b.metaKey||false;f.altKey=b.altKey;f.charCode=b.charCode;f.keyCode=b.keyCode;f.buttons=b.buttons;if(f.button===0&&f.buttons===0){f.buttons=1}if(i.forwardTab!==undefined&&i.focusEvents[g]){f.forwardTab=i.forwardTab}if(i.mouseEvents[g]||i.clickEvents[g]){a="mouse"}else{if(i.pointerEvents[g]){a=i.pointerTypes[b.pointerType]}else{if(i.touchEvents[g]){a="touch"}}}if(a){f.pointerType=a}f.timeStamp=f.time=+(b.timeStamp||new Date())},chain:function(a){var b=Ext.Object.chain(this);b.parentEvent=this;return Ext.apply(b,a)},correctWheelDelta:function(c){var b=this.WHEEL_SCALE,a=Math.round(c/b);if(!a&&c){a=(c<0)?-1:1}return a},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(b,e,a){var c=this.relatedTarget,d=null;if(c){if(b){d=Ext.fly(c).findParent(b,e,a)}else{d=a?Ext.get(c):c}}return d},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):(a?Ext.get(this.target):this.target)},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var d=this,c=d.browserEvent,b=0,a=0;if(Ext.isDefined(c.wheelDeltaX)){b=c.wheelDeltaX;a=c.wheelDeltaY}else{if(c.wheelDelta){a=c.wheelDelta}else{if(c.detail){a=-c.detail;if(a>100){a=3}else{if(a<-100){a=-3}}if(Ext.isDefined(c.axis)&&c.axis===c.HORIZONTAL_AXIS){b=a;a=0}}}}return{x:d.correctWheelDelta(b),y:d.correctWheelDelta(a)}},getX:function(){return this.getXY()[0]},getXY:function(){var c=this,e=c.xy;if(!e){e=c.xy=[c.pageX,c.pageY];var b=e[0],g,d,f,a;if(!b&&b!==0){g=c.browserEvent;d=document;f=d.documentElement;a=d.body;e[0]=g.clientX+(f&&f.scrollLeft||a&&a.scrollLeft||0)-(f&&f.clientLeft||a&&a.clientLeft||0);e[1]=g.clientY+(f&&f.scrollTop||a&&a.scrollTop||0)-(f&&f.clientTop||a&&a.clientTop||0)}}return e},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(d){var c=this,a=c.keyCode,b=c.type==="keypress";return((!b||Ext.isGecko)&&a>=33&&a<=40)||(!d&&(a===c.RETURN||a===c.TAB||a===c.ESC))},isSpecialKey:function(){var d=this,b=d.keyCode,a=Ext.isGecko,c=d.type==="keypress";return(a&&c&&d.charCode===0)||(this.isNavKeyPress())||(b===d.BACKSPACE)||(b===d.ENTER)||(b>=16&&b<=20)||((!c||a)&&b>=44&&b<=46)},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var b=this,a=b.parentEvent;b.defaultPrevented=true;if(a){a.defaultPrevented=true}b.browserEvent.preventDefault();return b},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var b=this,c=b.browserEvent,a=b.parentEvent;b.isStopped=true;if(a){a.isStopped=true}if(!c.stopPropagation){c.cancelBubble=true;return b}c.stopPropagation();return b},within:function(c,d,a){var b;if(c){b=d?this.getRelatedTarget():this.getTarget()}return b?Ext.fly(c).contains(b)||!!(a&&b===Ext.getDom(c)):false},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(a){var c=a.prototype,d={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var g;if(Ext.isGecko){g=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){g=120}else{g=12}g*=3}else{g=120}}return g}())},b={},e,f;Ext.apply(a,d);Ext.apply(c,d);delete d.WHEEL_SCALE;delete d.RETURN;for(e in d){f=d[e];b[f]=e}c.keyCodes=b;c.getTrueXY=c.getXY}));Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:(function(){var d,e={},c;if(!Ext.isIE9m&&document.createEvent){d={createHtmlEvent:function(j,h,g,f){var i=j.createEvent("HTMLEvents");i.initEvent(h,g,f);return i},createMouseEvent:function(t,r,l,k,n,j,h,i,f,q,p,m,o){var g=t.createEvent("MouseEvents"),s=t.defaultView||window;if(g.initMouseEvent){g.initMouseEvent(r,l,k,s,n,j,h,j,h,i,f,q,p,m,o)}else{g=t.createEvent("UIEvents");g.initEvent(r,l,k);g.view=s;g.detail=n;g.screenX=j;g.screenY=h;g.clientX=j;g.clientY=h;g.ctrlKey=i;g.altKey=f;g.metaKey=p;g.shiftKey=q;g.button=m;g.relatedTarget=o}return g},createUIEvent:function(l,j,h,g,i){var k=l.createEvent("UIEvents"),f=l.defaultView||window;k.initUIEvent(j,h,g,f,i);return k},fireEvent:function(h,f,g){h.dispatchEvent(g)}}}else{if(document.createEventObject){c={0:1,1:4,2:2};d={createHtmlEvent:function(j,h,g,f){var i=j.createEventObject();i.bubbles=g;i.cancelable=f;return i},createMouseEvent:function(s,r,l,k,n,j,h,i,f,q,p,m,o){var g=s.createEventObject();g.bubbles=l;g.cancelable=k;g.detail=n;g.screenX=j;g.screenY=h;g.clientX=j;g.clientY=h;g.ctrlKey=i;g.altKey=f;g.shiftKey=q;g.metaKey=p;g.button=c[m]||m;g.relatedTarget=o;return g},createUIEvent:function(k,i,g,f,h){var j=k.createEventObject();j.bubbles=g;j.cancelable=f;return j},fireEvent:function(h,f,g){h.fireEvent("on"+f,g)}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(h,i){var g=i[0],f=i[1];e[h]=function(l,j){var k=d.createHtmlEvent(h,g,f);d.fireEvent(l,h,k)}});function b(h,g){var f=(h!=="mousemove");return function(l,i){var k=i.getXY(),j=d.createMouseEvent(l.ownerDocument,h,true,f,g,k[0],k[1],i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget);d.fireEvent(l,h,j)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(f){e[f]=b(f,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(h,i){var g=i[0],f=i[1];e[h]=function(l,j){var k=d.createUIEvent(l.ownerDocument,h,g,f,1);d.fireEvent(l,h,k)}});if(!d){e={};d={}}function a(g,f){}return function(i){var h=this,g=e[h.type]||a,f=i?(i.dom||i):h.getTarget();g(f,h)}}()),preventDefault:function(){var d=this,c=d.browserEvent,b=d.parentEvent,a,e;if(typeof c.type!=="unknown"){d.defaultPrevented=true;if(b){b.defaultPrevented=true}if(c.preventDefault){c.preventDefault()}else{if(c.type==="mousedown"){e=c.target;a=e.getAttribute("unselectable");if(a!=="on"){e.setAttribute("unselectable","on");Ext.defer(function(){e.setAttribute("unselectable",a)},1)}}c.returnValue=false;if(c.ctrlKey||c.keyCode>111&&c.keyCode<124){c.keyCode=-1}}}return d},stopPropagation:function(){var b=this,a=b.browserEvent;if(typeof a.type!=="unknown"){if(b.mousedownEvents[b.type]){Ext.GlobalEvents.fireMouseDown(b)}arguments.callee.$previous.call(this)}return b},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var a=this,d,c=function(f){if(f.keyCode===9){a.forwardTab=!f.shiftKey}},b=function(f){if(f.keyCode===9){delete a.forwardTab}};if(Ext.isIE9m){d={0:0,1:0,4:1,2:2};a.override({statics:{enableIEAsync:function(g){var e,f={};for(e in g){f[e]=g[e]}return f}},constructor:function(h,i,f,e){var g=this;g.callParent([h,i,f,e]);g.button=d[h.button];if(h.type==="contextmenu"){g.button=2}g.toElement=h.toElement;g.fromElement=h.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(e){this.browserEvent=this.self.enableIEAsync(e)},getRelatedTarget:function(f,j,e){var h=this,g,i;if(!h.relatedTarget){g=h.type;if(h.mouseLeaveRe.test(g)){i=h.toElement}else{if(h.mouseEnterRe.test(g)){i=h.fromElement}}if(i){h.relatedTarget=h.self.resolveTextNode(i)}}return h.callParent([f,j,e])}});document.attachEvent("onkeydown",c);document.attachEvent("onkeyup",b);window.attachEvent("onunload",function(){document.detachEvent("onkeydown",c);document.detachEvent("onkeyup",b)})}else{if(document.addEventListener){document.addEventListener("keydown",c,true);document.addEventListener("keyup",b,true)}}});(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var a=this;a.bubbleSubscribers={};a.captureSubscribers={};a.directSubscribers={};a.directCaptureSubscribers={};a.delegatedListeners={};a.initHandlers();Ext.onInternalReady(a.onReady,a);Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){var f=this,d=Ext.event.publisher.Publisher.publishersByEvent,a=f.handledDomEvents,e=a.length,c=0,b;for(;c<e;c++){b=a[c];f.handles[b]=1;d[b]=f}Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var d=this,a=d.handledDomEvents,c,b;if(a){for(b=0,c=a.length;b<c;b++){d.addDelegatedListener(a[b])}}Ext.getWin().on("unload",d.destroy,d)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a);a.onDirectCaptureEvent=Ext.bind(a.onDirectCaptureEvent,a)},addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.addEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.removeEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},addDirectListener:function(b,c,a){c.dom.addEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},removeDirectListener:function(b,c,a){c.dom.removeEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},subscribe:function(c,b,f,a){var d=this,e,g;if(f&&!d.directEvents[b]){e=a?d.captureSubscribers:d.bubbleSubscribers;if(!d.handles[b]&&!d.delegatedListeners[b]){d.addDelegatedListener(b)}if(e[b]){++e[b]}else{e[b]=1}}else{e=a?d.directCaptureSubscribers:d.directSubscribers;g=c.id;e=e[b]||(e[b]={});if(e[g]){++e[g]}else{e[g]=1;d.addDirectListener(b,c,a)}}},unsubscribe:function(e,f,b,i){var h=this,g,d,a,c;if(b&&!h.directEvents[f]){g=h.captureSubscribers;d=h.bubbleSubscribers;a=i?g:d;if(a[f]){--a[f]}if(!h.handles[f]&&!d[f]&&!g[f]){this.removeDelegatedListener(f)}}else{a=i?h.directCaptureSubscribers:h.directSubscribers;c=e.id;a=a[f];if(a[c]){--a[c]}if(!a[c]){delete a[c];h.removeDirectListener(f,e,i)}}},getPropagatingTargets:function(d){var c=d,b=[],a;while(c){b.push(c);a=c.parentNode;if(!a){a=c.defaultView}c=a}return b},publish:function(b,j,h){var g=this,a,d,c,f;if(Ext.isArray(j)){a=j}else{if(g.captureEvents[b]){d=Ext.cache[j.id];a=d?[d]:[]}else{a=g.getPropagatingTargets(j)}}f=a.length;if(g.captureSubscribers[b]){for(c=f;c--;){d=Ext.cache[a[c].id];if(d){g.fire(d,b,h,false,true);if(h.isStopped){break}}}}if(!h.isStopped&&g.bubbleSubscribers[b]){for(c=0;c<f;c++){d=Ext.cache[a[c].id];if(d){g.fire(d,b,h,false,false);if(h.isStopped){break}}}}},fire:function(c,b,f,g,a){var d;if(c.hasListeners[b]){d=c.events[b];if(d){if(a&&g){d=d.directCaptures}else{if(a){d=d.captures}else{if(g){d=d.directs}}}if(d){f.setCurrentTarget(c.dom);d.fire(f,f.target)}}}},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else{this.doDelegatedEvent(a)}},doDelegatedEvent:function(d,c){var b=this,a=d.timeStamp;d=new Ext.event.Event(d);if(b.isEventBlocked(d)){return false}b.beforeEvent(d);Ext.frameStartTime=a;b.reEnterCount++;b.publish(d.type,d.target,d);b.reEnterCount--;if(c!==false){b.afterEvent(d)}return d},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,false])}else{this.doDirectEvent(a,false)}},onDirectCaptureEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,true])}else{this.doDirectEvent(a,true)}},doDirectEvent:function(g,b){var d=this,f=g.currentTarget,a=g.timeStamp,c;g=new Ext.event.Event(g);if(d.isEventBlocked(g)){return}d.beforeEvent(g);Ext.frameStartTime=a;c=Ext.cache[f.id];if(c){d.reEnterCount++;d.fire(c,g.type,g,true,b);d.reEnterCount--}d.afterEvent(g)},beforeEvent:function(c){var f=c.browserEvent,a=Ext.event.publisher.Dom,b,d;if(f.type==="touchstart"){b=f.touches;if(b.length===1){d=b[0];a.lastTouchStartX=d.pageX;a.lastTouchStartY=d.pageY}}},afterEvent:function(d){var f=d.browserEvent,c=f.type,b=Ext.event.publisher.Dom,a=Ext.GlobalEvents;if(d.self.pointerEvents[c]&&d.pointerType!=="mouse"){b.lastScreenPointerEventTime=Ext.now()}if(c==="touchend"){b.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&a.hasListeners.idle&&!a.idleEventMask[c]){a.fireEvent("idle")}},isEventBlocked:function(f){var d=this,c=f.type,a=Ext.event.publisher.Dom,b=Ext.now();if(Ext.isGecko&&f.type==="click"&&f.button===2){return true}return(d.blockedPointerEvents[c]&&f.pointerType!=="mouse")||(d.blockedCompatibilityMouseEvents[c]&&(b-a.lastScreenPointerEventTime<1000))||(Ext.supports.TouchEvents&&f.self.mouseEvents[f.type]&&Math.abs(f.pageX-a.lastTouchStartX)<15&&Math.abs(f.pageY-a.lastTouchStartY)<15&&(Ext.now()-a.lastTouchEndTime)<1000)},destroy:function(){var a;for(a in this.delegatedListeners){this.removeDelegatedListener(a)}this.callParent()},reset:function(){var a=Ext.event.publisher.Dom;a.lastScreenPointerEventTime=a.lastTouchEndTime=a.lastTouchStartX=a.lastTouchStartY=undefined}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],function(b){var d=document,c=d.defaultView,a=b.prototype;if((Ext.os.is.iOS&&Ext.os.version.getMajor()<5)||Ext.browser.is.AndroidStock||!(c&&c.addEventListener)){a.target=d}else{a.target=c}b.instance=new b()}));Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(f){if(Ext.isIE9m){var b=document.documentElement,e=document.body,d=f.prototype,a,c;d.target=document;d.directBoundListeners={};a=function(i,h,g){i.target=i.srcElement||window;i.currentTarget=this;if(g){h.onDirectCaptureEvent(i)}else{h.onDirectEvent(i)}};c=function(h,g){h.target=h.srcElement||window;h.currentTarget=this;g.onDirectCaptureEvent(h)};f.override({addDelegatedListener:function(g){this.delegatedListeners[g]=1;this.target.attachEvent("on"+g,this.onDelegatedEvent)},removeDelegatedListener:function(g){delete this.delegatedListeners[g];this.target.detachEvent("on"+g,this.onDelegatedEvent)},addDirectListener:function(j,k,i){var m=this,n=k.dom,l=Ext.Function.bind(a,n,[m,i],true),g=m.directBoundListeners,h=g[j]||(g[j]={});h[n.id]=l;if(n.attachEvent){n.attachEvent("on"+j,l)}else{m.callParent(arguments)}},removeDirectListener:function(g,h){var i=h.dom;if(i.detachEvent){i.detachEvent("on"+g,this.directBoundListeners[g][i.id])}else{this.callParent(arguments)}},doDelegatedEvent:function(h,g){h.target=h.srcElement||window;if(h.type==="focusin"){h.relatedTarget=h.fromElement===e||h.fromElement===b?null:h.fromElement}else{if(h.type==="focusout"){h.relatedTarget=h.toElement===e||h.toElement===b?null:h.toElement}}return this.callParent([h,g])}});Ext.apply(d.directEvents,d.captureEvents);Ext.apply(d.directEvents,{change:1,input:1,paste:1});d.captureEvents={}}});(Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{type:"gesture",config:{async:true},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(b){var g=this,c=g.handledDomEvents,l=Ext.supports,j=l.TouchEvents,k=Ext.Function,d=g.onTouchStart,a=g.onTouchMove,i=g.onTouchEnd,f=k.createAnimationFrame(g.onTouchStart,g,null,1),e=k.createAnimationFrame(g.onTouchMove,g),h=k.createAnimationFrame(g.onTouchEnd,g,null,1);g._handlers={touchstart:d,touchmove:a,touchend:i,touchcancel:i,pointerdown:d,pointermove:a,pointerup:i,pointercancel:i,MSPointerDown:d,MSPointerMove:a,MSPointerUp:i,MSPointerCancel:i,mousedown:d,mousemove:a,mouseup:i};g._asyncHandlers={touchstart:f,touchmove:e,touchend:h,touchcancel:h,pointerdown:f,pointermove:e,pointerup:h,pointercancel:h,MSPointerDown:f,MSPointerMove:e,MSPointerUp:h,MSPointerCancel:h,mousedown:f,mousemove:e,mouseup:h};g.activeTouchesMap={};g.activeTouches=[];g.changedTouches=[];g.recognizers=[];if(j){g.onTargetTouchMove=g.onTargetTouchMove.bind(g);g.onTargetTouchEnd=g.onTargetTouchEnd.bind(g)}if(l.PointerEvents){c.push("pointerdown","pointermove","pointerup","pointercancel");g.mousePointerType="mouse"}else{if(l.MSPointerEvents){c.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel");g.mousePointerType=4}else{if(j){c.push("touchstart","touchmove","touchend","touchcancel")}}}if(!c.length||(j&&Ext.isWebKit&&Ext.os.is.Desktop)){c.push("mousedown","mousemove","mouseup")}g.initConfig(b);return Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this);Ext.Array.sort(this.recognizers,function(f,e){var d=f.priority,c=e.priority;return(d>c)?1:(d<c)?-1:0})},registerRecognizer:function(a){var e=this,b=a.handledEvents,d=b.length,c;a.setOnRecognized(e.onRecognized);a.setCallbackScope(e);for(c=0;c<d;c++){e.handledEvents.push(b[c])}e.registerEvents(b);e.recognizers.push(a)},onRecognized:function(d,g,a){var j=this,k=g.changedTouches,h=k.length,l,f,c,b;a=a||{};a.type=d;a.target=k[0].target;a.isStopped=false;g=g.chain(a);if(h>1){l=[];for(c=0;c<h;c++){b=k[c];l.push(b.targets)}f=j.getCommonTargets(l)}else{f=k[0].targets}j.publish(d,f,g)},getCommonTargets:function(a){var h=a[0],f=a.length;if(f===1){return h}var d=[],e=1,g,b,c;while(true){g=h[h.length-e];if(!g){return d}for(c=1;c<f;c++){b=a[c];if(b[b.length-e]!==g){return d}}d.unshift(g);e++}return d},invokeRecognizers:function(c,g){var b=this.recognizers,f=b.length,d,a;if(c==="onStart"){for(d=0;d<f;d++){b[d].isActive=true}}for(d=0;d<f;d++){a=b[d];if(a.isActive&&a[c].call(a,g)===false){a.isActive=false}}},updateTouches:function(j,b){var n=this,r=j.browserEvent,f=r.changedTouches||[r],a=n.activeTouches,k=n.activeTouchesMap,p=[],m,h,d,g,c,l,q,o;for(c=0,l=f.length;c<l;c++){m=f[c];if("identifier" in m){h=m.identifier}else{if("pointerId" in m){h=m.pointerId}else{h=1}}d=k[h];if(!d){g=Ext.event.Event.resolveTextNode(m.target);d=k[h]={identifier:h,target:g,targets:n.getPropagatingTargets(g)};a.push(d)}if(b){delete k[h];Ext.Array.remove(a,d)}q=m.pageX;o=m.pageY;d.pageX=q;d.pageY=o;d.point=new Ext.util.Point(q,o);p.push(d)}j.touches=Ext.Array.clone(a);j.changedTouches=p},doDelegatedEvent:function(b){var a=this;b=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,b,false);if(b){if(!b.button||b.button<1){a.handlers[b.type].call(a,b)}a.afterEvent(b)}},onTouchStart:function(d){var a=this,c=d.target,b=d.browserEvent.touches;if(d.browserEvent.type==="touchstart"){c.addEventListener("touchmove",a.onTargetTouchMove);c.addEventListener("touchend",a.onTargetTouchEnd);c.addEventListener("touchcancel",a.onTargetTouchEnd)}if(b&&b.length<=a.activeTouches.length){a.removeGhostTouches(b)}a.updateTouches(d);if(!a.isStarted){a.isStarted=true;a.invokeRecognizers("onStart",d);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}a.invokeRecognizers("onTouchStart",d)},onTouchMove:function(c){var b=this,a=b.mousePointerType;if(b.isStarted){if(a&&c.browserEvent.pointerType===a&&c.buttons===0){c.type=Ext.dom.Element.prototype.eventMap.touchend;c.button=0;b.onTouchEnd(c);return}b.updateTouches(c);if(c.changedTouches.length>0){b.invokeRecognizers("onTouchMove",c)}}},onTouchEnd:function(b){var a=this;if(!a.isStarted){return}a.updateTouches(b,true);a.invokeRecognizers(a.isCancelEvent[b.type]?"onTouchCancel":"onTouchEnd",b);if(!a.activeTouches.length){a.isStarted=false;a.invokeRecognizers("onEnd",b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else{this.doTargetTouchMove(a)}},doTargetTouchMove:function(a){if(!Ext.getBody().contains(a.target)){this.onTouchMove(new Ext.event.Event(a))}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else{this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(c){var a=this,b=c.target;b.removeEventListener("touchmove",a.onTargetTouchMove);b.removeEventListener("touchend",a.onTargetTouchEnd);b.removeEventListener("touchcancel",a.onTargetTouchEnd);if(!Ext.getBody().contains(b)){a.onTouchEnd(new Ext.event.Event(c))}},updateAsync:function(a){this.handlers=a?this._asyncHandlers:this._handlers},reset:function(){var e=this,b=e.recognizers,d=b.length,c,a;e.activeTouchesMap={};e.activeTouches=[];e.changedTouches=[];e.isStarted=false;for(c=0;c<d;c++){a=b[c];a.reset();a.isActive=false}Ext.event.publisher.Dom.prototype.reset.call(this)},privates:{removeGhostTouches:function(e){var c={},a=e.length,h=this.activeTouches,d=this.activeTouchesMap,b,g,f;for(b=0;b<a;++b){c[e[b].identifier]=true}b=h.length;while(b--){f=h[b];g=f.identifier;if(!e[g]){Ext.Array.remove(h,f);delete d[g]}}}}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture"],function(a){a.instance=new a()}));Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){if(Ext.isIE9m){this.override({updateTouches:function(c,a){var d=c.browserEvent,b=c.getXY();d.pageX=b[0];d.pageY=b[1];this.callParent([c,a])},doDelegatedEvent:function(a){this.callParent([Ext.event.Event.enableIEAsync(a)])}})}});(Ext.cmd.derive("Ext.mixin.Templatable",Ext.Mixin,{mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var a=document.createDocumentFragment();a.appendChild(Ext.Element.create(this.getElementConfig(),true));return a},initElement:function(){var a=this.self.prototype;a.elementTemplate=this.getElementTemplate();a.initElement=a.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(a,b){this.link(a,b)},doInitElement:function(){var g=this.referenceAttributeName,c,d,e,f,b,a;c=this.elementTemplate.cloneNode(true);d=c.querySelectorAll(this.referenceSelector);for(e=0,f=d.length;e<f;e++){b=d[e];a=b.getAttribute(g);b.removeAttribute(g);this.linkElement(a,b)}}},0,0,0,0,0,0,[Ext.mixin,"Templatable"],0));(Ext.cmd.derive("Ext.TaskQueue",Ext.Base,{singleton:true,pending:false,mode:true,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},requestRead:function(c,b,a){this.request(true);this.readQueue.push(arguments)},requestWrite:function(c,b,a){this.request(false);this.writeQueue.push(arguments)},request:function(a){if(!this.pending){this.pendingTime=Date.now();this.pending=true;this.mode=a;if(a){Ext.defer(this.run,1,this)}else{Ext.Function.requestAnimationFrame(this.run)}}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(){this.pending=false;var j=this.readQueue,e=this.writeQueue,c=null,f;if(this.mode){f=j;if(e.length>0){c=false}}else{f=e;if(j.length>0){c=true}}var b=f.slice(),d,g,a,h,k;f.length=0;for(d=0,g=b.length;d<g;d++){a=b[d];h=a[0];k=a[1];if(typeof h==="string"){h=k[h]}if(a.length>2){h.apply(k,a[2])}else{h.call(k)}}b.length=0;if(c!==null){this.request(c)}}},1,0,0,0,0,0,[Ext,"TaskQueue"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(a){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(a);this.bindListeners(true)},bindListeners:Ext.emptyFn,applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){a.append(this.detectorsContainer);a.addCls("x-size-monitored")},applyArgs:function(a){return a.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var d=this.getElement();if(!d||d.destroyed){return false}var b=d.getWidth(),j=d.getHeight(),a=this.getContentWidth(),i=this.getContentHeight(),h=this.contentWidth,f=this.contentHeight,c=this.info,e=false,g;this.width=b;this.height=j;this.contentWidth=a;this.contentHeight=i;g=((h!==a?1:0)+(f!==i?2:0));if(g>0){c.width=b;c.height=j;c.contentWidth=a;c.contentHeight=i;c.flag=g;e=true;this.getCallback().apply(this.getScope(),this.getArgs())}return e},refresh:function(a){if(this.refreshSize()||a){Ext.TaskQueue.requestWrite("refreshMonitors",this)}},destroy:function(){var b=this,a=b.getElement();b.bindListeners(false);if(a&&!a.destroyed){a.removeCls("x-size-monitored")}delete b._element;b.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Scroll",Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(a){this.onScroll=Ext.Function.bind(this.onScroll,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a]("scroll",this.onScroll,true);this.shrinkMonitor[a]("scroll",this.onScroll,true)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[true])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var b=this.expandMonitor,c=this.shrinkMonitor,a=1000000;if(b&&!b.destroyed){b.scrollLeft=a;b.scrollTop=a}if(c&&!c.destroyed){c.scrollLeft=a;c.scrollTop=a}}},1,0,0,0,0,0,[Ext.util.sizemonitor,"Scroll"],0));(Ext.cmd.derive("Ext.util.sizemonitor.OverflowChange",Ext.util.sizemonitor.Abstract,{constructor:function(a){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,true);this.shrinkMonitor[a](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,true)},onExpand:function(a){if(Ext.browser.is.Webkit&&a.horizontalOverflow&&a.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(a){if(Ext.browser.is.Webkit&&!a.horizontalOverflow&&!a.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(this.destroyed){return}var f=this.expandHelper,e=this.shrinkHelper,b=this.getContentBounds(),d=b.width,a=b.height,c;if(f&&!f.destroyed){c=f.style;c.width=(d+1)+"px";c.height=(a+1)+"px"}if(e&&!e.destroyed){c=e.style;c.width=d+"px";c.height=a+"px"}Ext.TaskQueue.requestRead("refresh",this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,"OverflowChange"],0));(Ext.cmd.derive("Ext.util.SizeMonitor",Ext.Base,{constructor:function(a){var b=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new b.OverflowChange(a)}else{return new b.Scroll(a)}}},1,0,0,0,0,0,[Ext.util,"SizeMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementSize",Ext.event.publisher.Publisher,{type:"size",handledEvents:["resize"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(b){var d=b.id,c=this.subscribers,a=this.monitors;if(c[d]){++c[d]}else{c[d]=1;a[d]=new Ext.util.SizeMonitor({element:b,callback:this.onElementResize,scope:this,args:[b]})}b.on("painted","forceRefresh",a[d]);return true},unsubscribe:function(c){var e=c.id,d=this.subscribers,b=this.monitors,a;if(d[e]&&!--d[e]){delete d[e];a=b[e];c.un("painted","forceRefresh",a);a.destroy();delete b[e]}},onElementResize:function(a,b){Ext.TaskQueue.requestRead("fire",this,[a,"resize",[a,b]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementSize"],function(a){a.instance=new a()}));(Ext.cmd.derive("Ext.util.paintmonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(a){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(a)},bindListeners:function(a){this.monitorElement[a?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,true)},applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){this.monitorElement=Ext.Element.create({classList:["x-paint-monitor",this.monitorClass]},true);a.appendChild(this.monitorElement);a.addCls("x-paint-monitored");this.bindListeners(true)},onElementPainted:function(){},destroy:function(){var d=this,b=d.monitorElement,a=b.parentNode,c=d.getElement();d.bindListeners(false);delete d.monitorElement;if(c&&!c.destroyed){c.removeCls("x-paint-monitored");delete d._element}if(a){a.removeChild(b)}d.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.paintmonitor.CssAnimation",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(a){if(a.animationName==="x-paint-monitor-helper"){this.getCallback().apply(this.getScope(),this.getArgs())}}},0,0,0,0,0,0,[Ext.util.paintmonitor,"CssAnimation"],0));(Ext.cmd.derive("Ext.util.PaintMonitor",Ext.Base,{constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}},1,0,0,0,0,0,[Ext.util,"PaintMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementPaint",Ext.event.publisher.Publisher,{type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(a){var b=this,d=a.id,c=b.subscribers;if(c[d]){++c[d]}else{c[d]=1;b.monitors[d]=new Ext.util.PaintMonitor({element:a,callback:b.onElementPainted,scope:b,args:[a]})}},unsubscribe:function(b){var d=b.id,c=this.subscribers,a=this.monitors;if(c[d]&&!--c[d]){delete c[d];a[d].destroy();delete a[d]}},onElementPainted:function(a){Ext.TaskQueue.requestRead("fire",this,[a,"painted",[a]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementPaint"],function(a){a.instance=new a()}));(Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(p){var u=window,S=document,ag="ext-window",M="ext-document",i="width",Q="height",ad="min-width",e="min-height",q="max-width",D="max-height",T="top",ah="right",N="bottom",H="left",k="visibility",ae="hidden",d="display",V="none",n="z-index",X="position",s="relative",t="static",z="-",x=/\w/g,L=/\s+/,af=/[\s]+/,b=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,J=/table-row|table-.*-group/,c=/top/i,w={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},ac={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},m={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},G=[ac.l,ac.r,ac.t,ac.b],g=[w.l,w.r,w.t,w.b],aa=/\d+$/,j=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,R="px",P=/(-[a-z])/gi,ai=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,r=/^\d+(?:\.\d*)?px$/i,y={},v="originalDisplay",W=function(aj,ak){return ak.charAt(1).toUpperCase()},K=function(am,ak){var an,al,aj;if(am.nodeType===1){am._extData=null;if(ak){an=am.childNodes;for(al=0,aj=an.length;al<aj;++al){K(an[al],ak)}}}},E="x-hidden-visibility",C="x-hidden-display",l="x-hidden-offsets",a="x-hidden-clip",B="x-sized",O="x-unsized",I="x-stretched",Z="x-no-touch-scroll",o={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},U=0,ab=0,A=false,f=false,Y,F,h;return{alternateClassName:["Ext.Element"],observableType:"element",isElement:true,skipGarbageCollection:true,$applyConfigs:true,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(ak){var aj=this,al;if(typeof ak==="string"){ak=S.getElementById(ak)}if(!ak){return null}aj.dom=ak;al=ak.id;if(al){aj.id=al}else{al=ak.id=aj.getUniqueId()}aj.el=aj;Ext.cache[al]=aj;aj.mixins.observable.constructor.call(aj)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:j,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(ak,aj){if(typeof ak==="number"){return ak+(aj||R)}if(ak===""||ak==="auto"||ak==null){return ak||""}if(aa.test(ak)){return ak+(aj||R)}if(!j.test(ak)){return ak||""}return ak},create:function(al,ak){var ar=this,ao=o.hidden,an,at,av,au,aj,am,aq,ap;if(!al){al={}}if(al.isElement){return ak?al.dom:al}else{if("nodeType" in al){return ak?al:Ext.get(al)}}if(typeof al==="string"){return S.createTextNode(al)}av=al.tag;if(!av){av="div"}if(al.namespace){an=S.createElementNS(al.namespace,av)}else{an=S.createElement(av)}at=an.style;if(al[ao]){ap=al.className;ap=(ap==null)?"":ap+" ";al.className=ap+C;delete al[ao]}for(aj in al){if(aj!=="tag"){au=al[aj];switch(aj){case o.style:if(typeof au==="string"){an.setAttribute(aj,au)}else{for(am in au){if(au.hasOwnProperty(am)){at[am]=au[am]}}}break;case o.className:case o.cls:an.className=au;break;case o.classList:an.className=au.join(" ");break;case o.text:an.textContent=au;break;case o.html:an.innerHTML=au;break;case o.children:for(am=0,aq=au.length;am<aq;am++){an.appendChild(ar.create(au[am],true))}break;default:if(au!=null){an.setAttribute(aj,au)}}}}if(ak){return an}else{return ar.get(an)}},detach:function(){var aj=this.dom;if(aj&&aj.parentNode&&aj.tagName!=="BODY"){aj.parentNode.removeChild(aj)}return this},fly:function(ak,aj){return Ext.fly(ak,aj)},fromPoint:function(aj,ak){return Ext.get(S.elementFromPoint(aj,ak))},get:function(al){var ap=this,aj=Ext.cache,an,am,ak,at,ar,ao,aq;if(!al){return null}if(al.isFly){al=al.dom}if(typeof al==="string"){ak=al;if(aj.hasOwnProperty(ak)){at=aj[ak];if(at.skipGarbageCollection||!Ext.isGarbage(at.dom)){return at}else{at.destroy()}}if(ak===ag){return p.get(u)}else{if(ak===M){return p.get(S)}}am=Ext.getElementById?Ext.getElementById(ak):S.getElementById(ak);if(am){return new p(am)}}an=al.nodeType;if(an){ar=(an===9);aq=ap.validNodeTypes[an]}else{ao=(al.window==al)}if(aq||ao){ak=al.id;if(aj.hasOwnProperty(ak)){at=aj[ak];if(at.skipGarbageCollection||al===at.dom||!Ext.isGarbage(at.dom)){return at}else{at.destroy()}}if(al===S){al.id=M}if(al==u){al.id=ag}al=new p(al);if(ao||ar){al.skipGarbageCollection=true}return al}if(al.isElement){return al}if(al.isComposite){return al}if(Ext.isIterable(al)){return ap.select(al)}return null},getActiveElement:function(aj){var ak=S.activeElement;if(!ak||!ak.focus){ak=S.body}return aj?Ext.get(ak):ak},getDocumentHeight:function(){return Math.max(!Ext.isStrict?S.body.scrollHeight:S.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?S.body.scrollWidth:S.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(u.orientation==0)?"portrait":"landscape"}return(u.innerHeight>u.innerWidth)?"portrait":"landscape"},getViewportHeight:function(){var aj=p._viewportHeight;if(Ext.isIE9m){return S.documentElement.clientHeight}return(aj!=null)?aj:u.innerHeight},getViewportWidth:function(){var aj=p._viewportWidth;if(Ext.isIE9m){return S.documentElement.clientWidth}return(aj!=null)?aj:u.innerWidth},getViewSize:function(){return{width:p.getViewportWidth(),height:p.getViewportHeight()}},normalize:function(aj){return y[aj]||(y[aj]=aj.replace(P,W))},_onWindowFocusChange:function(aj){if(Ext.fly(aj.target).is(p.editableSelector)){U=new Date();A=(aj.type==="focusin"||aj.type==="pointerup")}},_onWindowResize:function(){var an=window.innerWidth,ao=window.innerHeight,am=new Date(),ak=1000,al,aj;al=an-p._windowWidth;aj=ao-p._windowHeight;p._windowWidth=an;p._windowHeight=ao;if(((am-U)<ak)||((am-ab)<ak)){if(al===0&&(A&&(aj<=-p.minKeyboardHeight))){f=true;return}}if(f&&(al===0)&&(aj>=p.minKeyboardHeight)){f=false;ab=new Date()}if(f){return}p._viewportWidth=an;p._viewportHeight=ao},parseBox:function(al){al=al||0;var aj=typeof al,am,ak;if(aj==="number"){return{top:al,right:al,bottom:al,left:al}}else{if(aj!=="string"){return al}}am=al.split(" ");ak=am.length;if(ak===1){am[1]=am[2]=am[3]=am[0]}else{if(ak===2){am[2]=am[0];am[3]=am[1]}else{if(ak===3){am[3]=am[1]}}}return{top:parseFloat(am[0])||0,right:parseFloat(am[1])||0,bottom:parseFloat(am[2])||0,left:parseFloat(am[3])||0}},parseStyles:function(ak){var aj={},al;if(ak){ai.lastIndex=0;while((al=ai.exec(ak))){aj[al[1]]=al[2]||""}}return aj},select:function(aj,al,ak){return Ext.fly(ak||S).select(aj,al)},query:function(ak,aj,al){return Ext.fly(al||S).query(ak,aj)},unitizeBox:function(al,aj){var ak=this;al=ak.parseBox(al);return ak.addUnits(al.top,aj)+" "+ak.addUnits(al.right,aj)+" "+ak.addUnits(al.bottom,aj)+" "+ak.addUnits(al.left,aj)},serializeForm:function(al){var am=al.elements||(S.forms[al]||Ext.getDom(al)).elements,aw=false,av=encodeURIComponent,ap="",ao=am.length,aq,aj,au,ay,ax,ar,an,at,ak;for(ar=0;ar<ao;ar++){aq=am[ar];aj=aq.name;au=aq.type;ay=aq.options;if(!aq.disabled&&aj){if(/select-(one|multiple)/i.test(au)){at=ay.length;for(an=0;an<at;an++){ak=ay[an];if(ak.selected){ax=ak.hasAttribute("value");ap+=Ext.String.format("{0}={1}&",av(aj),av(ax?ak.value:ak.text))}}}else{if(!(/file|undefined|reset|button/i.test(au))){if(!(/radio|checkbox/i.test(au)&&!aq.checked)&&!(au=="submit"&&aw)){ap+=av(aj)+"="+av(aq.value)+"&";aw=/submit/i.test(au)}}}}}return ap.substr(0,ap.length-1)},getCommonAncestor:function(al,ak,aj){h=h||new Ext.dom.Fly();h.attach(Ext.getDom(al));while(!h.isAncestor(ak)){if(h.dom.parentNode){h.attach(h.dom.parentNode)}else{h.attach(document.body);break}}return aj?h.dom:Ext.get(h)}},addCls:function(ar,ap,au){var at=this,am=at.getData(),av,an,ak,al,ao,aq,aj;if(!ar){return at}if(!am.isSynchronized){at.synchronize()}an=at.dom;ak=am.classMap;al=am.classList;ap=ap?ap+z:"";au=au?z+au:"";if(typeof ar==="string"){ar=ar.split(L)}for(ao=0,aq=ar.length;ao<aq;ao++){aj=ar[ao];if(aj){aj=ap+aj+au;if(!ak[aj]){ak[aj]=true;al.push(aj);av=true}}}if(av){an.className=al.join(" ")}return at},addStyles:function(aq,ap){var al=0,ao=(aq||"").match(x),an,aj=ao.length,am,ak=[];if(aj===1){al=Math.abs(parseFloat(this.getStyle(ap[ao[0]]))||0)}else{if(aj){for(an=0;an<aj;an++){am=ao[an];ak.push(ap[am])}ak=this.getStyle(ak);for(an=0;an<aj;an++){am=ao[an];al+=parseFloat(ak[ap[am]])||0}}}return al},addUnits:function(ak,aj){return p.addUnits(ak,aj)},adjustDirect2DDimension:function(al){var aq=this,ak=aq.dom,ao=aq.getStyle("display"),an=ak.style.display,ar=ak.style.position,ap=al===i?0:1,aj=ak.currentStyle,am;if(ao==="inline"){ak.style.display="inline-block"}ak.style.position=ao.match(J)?"absolute":"static";am=(parseFloat(aj[al])||parseFloat(aj.msTransformOrigin.split(" ")[ap])*2)%1;ak.style.position=ar;if(ao==="inline"){ak.style.display=an}return am},animate:function(aj){aj=new Ext.fx.Animation(aj);aj.setElement(this);this._activeAnimation=aj;aj.on({animationend:this._onAnimationEnd});Ext.Animator.run(aj);return aj},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(al,ak){var am=this,ao,aj,an;if(al.nodeType||al.dom||typeof al==="string"){al=Ext.getDom(al);am.dom.appendChild(al);return !ak?Ext.get(al):al}else{if(al.length){ao=Ext.fly(document.createDocumentFragment());aj=al.length;for(an=0;an<aj;an++){ao.appendChild(al[an],ak)}am.dom.appendChild(ao.dom);return ak?ao.dom:ao}else{return am.createChild(al,null,ak)}}},appendTo:function(aj){Ext.getDom(aj).appendChild(this.dom);return this},applyStyles:function(aj){if(aj){if(typeof aj==="function"){aj=aj.call()}if(typeof aj==="string"){aj=p.parseStyles(aj)}if(typeof aj==="object"){this.setStyle(aj)}}return this},blur:function(){var aj=this,al=aj.dom;if(al!==S.body){try{al.blur()}catch(ak){}return aj}else{return aj.focus(undefined,al)}},cacheScrollValues:function(){var an=this,ao=[],am=[],ap,al,ak,aj;F=F||new Ext.dom.Fly();ap=an.query("*");for(ak=0,aj=ap.length;ak<aj;ak++){al=ap[ak];if(al.scrollTop>0||al.scrollLeft!==0){am.push(al);ao.push(F.attach(al).getScroll())}}return function(){var ar,at,aq;for(at=0,aq=am.length;at<aq;at++){ar=ao[at];F.attach(am[at]);F.setScrollLeft(ar.left);F.setScrollTop(ar.top)}}},center:function(aj){return this.alignTo(aj||S,"c-c")},child:function(aj,ak){var al=this,am=Ext.get(al).id;return al.selectNode(Ext.makeIdSelector(am)+" > "+aj,!!ak)},clone:function(aj,ak){var al=this.dom.cloneNode(aj);if(Ext.supports.CloneNodeCopiesExpando){K(al,aj)}return ak?al:Ext.get(al)},constrainScrollLeft:function(aj){var ak=this.dom;return Math.max(Math.min(aj,ak.scrollWidth-ak.clientWidth),0)},constrainScrollTop:function(aj){var ak=this.dom;return Math.max(Math.min(aj,ak.scrollHeight-ak.clientHeight),0)},createChild:function(ak,aj,al){ak=ak||{tag:"div"};if(aj){return Ext.DomHelper.insertBefore(aj,ak,al!==true)}else{return Ext.DomHelper.append(this.dom,ak,al!==true)}},contains:function(aj){if(!aj){return false}var ak=this,al=Ext.getDom(aj);return(al===ak.dom)||ak.isAncestor(al)},destroy:function(){var aj=this,ak=aj.dom;if(ak&&ak.parentNode){ak.parentNode.removeChild(ak)}aj.collect();if(!aj.isFly){aj.callParent()}},detach:function(){var aj=this.dom;if(aj&&aj.parentNode&&aj.tagName!=="BODY"){aj.parentNode.removeChild(aj)}return this},disableShadow:function(){var aj=this.shadow;if(aj){aj.hide();aj.disabled=true}},disableShim:function(){var aj=this.shim;if(aj){aj.hide();aj.disabled=true}},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(aj){aj.preventDefault()},destroyable:true,delegated:false})},disableTouchScroll:function(){this.addCls(Z);this.on({touchmove:function(aj){aj.preventDefault()},translate:false})},doReplaceWith:function(aj){var ak=this.dom;ak.parentNode.replaceChild(Ext.getDom(aj),ak)},doScrollIntoView:function(aj,an,ak,ao,av,ar){F=F||new Ext.dom.Fly();var at=this,ap=at.dom,aw=F.attach(aj)[av](),au=aj.scrollTop,aq=at.getScrollIntoViewXY(aj,aw,au),am=aq.x,al=aq.y;if(ao){if(ak){ak=Ext.apply({listeners:{afteranimate:function(){F.attach(ap).highlight()}}},ak)}else{F.attach(ap).highlight()}}if(al!==au){F.attach(aj).scrollTo("top",al,ak)}if(an!==false&&(am!==aw)){F.attach(aj)[ar]("left",am,ak)}return at},down:function(aj,ak){return this.selectNode(aj,!!ak)},enableShadow:function(ak,aj){var al=this,an=al.shadow||(al.shadow=new Ext.dom.Shadow(Ext.apply({target:al},ak))),am=al.shim;if(am){am.offsets=an.outerOffsets;am.shadow=an;an.shim=am}if(aj===true||(aj!==false&&al.isVisible())){an.show()}else{an.hide()}an.disabled=false},enableShim:function(ak,aj){var al=this,an=al.shim||(al.shim=new Ext.dom.Shim(Ext.apply({target:al},ak))),am=al.shadow;if(am){an.offsets=am.outerOffsets;an.shadow=am;am.shim=an}if(aj===true||(aj!==false&&al.isVisible())){an.show()}else{an.hide()}an.disabled=false},findParent:function(ap,ak,aj){var am=this,an=am.dom,al=S.documentElement,ao=0;if(ak||ak===0){if(typeof ak!=="number"){al=Ext.getDom(ak);ak=Number.MAX_VALUE}}else{ak=50}while(an&&an.nodeType===1&&ao<ak&&an!==al){if(Ext.fly(an).is(ap)){return aj?Ext.get(an):an}ao++;an=an.parentNode}return null},findParentNode:function(am,ak,aj){var al=Ext.fly(this.dom.parentNode);return al?al.findParent(am,ak,aj):null},first:function(aj,ak){return this.matchNode("nextSibling","firstChild",aj,ak)},focus:function(al,ak){var aj=this;ak=ak||aj.dom;if(Number(al)){Ext.defer(aj.focus,al,aj,[null,ak])}else{Ext.GlobalEvents.fireEvent("beforefocus",ak);ak.focus()}return aj},collect:function(){var aj=this,ak=aj.dom,am=aj.shadow,al=aj.shim;if(!aj.isFly){aj.mixins.observable.destroy.call(aj);delete Ext.cache[aj.id];aj.destroyed=true;aj.el=null}if(ak){ak._extData=aj.dom=null}if(am){am.hide();aj.shadow=null}if(al){al.hide();aj.shim=null}},getAnchorToXY:function(am,aj,al,ak){return am.getAnchorXY(aj,al,ak)},getAttribute:function(aj,ak){var al=this.dom;return ak?(al.getAttributeNS(ak,aj)||al.getAttribute(ak+":"+aj)):(al.getAttribute(aj)||al[aj]||null)},getAttributes:function(){var am=this.dom.attributes,al={},ak,an,aj;for(an=0,aj=am.length;an<aj;an++){ak=am[an];al[ak.name]=ak.value}return al},getBottom:function(aj){return(aj?this.getLocalY():this.getY())+this.getHeight()},getById:function(al,aj){var ak=S.getElementById(al)||this.dom.querySelector(Ext.makeIdSelector(al));return aj?ak:(ak?Ext.get(ak):null)},getBorderPadding:function(){var aj=this.getStyle(G),ak=this.getStyle(g);return{beforeX:(parseFloat(ak[w.l])||0)+(parseFloat(aj[ac.l])||0),afterX:(parseFloat(ak[w.r])||0)+(parseFloat(aj[ac.r])||0),beforeY:(parseFloat(ak[w.t])||0)+(parseFloat(aj[ac.t])||0),afterY:(parseFloat(ak[w.b])||0)+(parseFloat(aj[ac.b])||0)}},getBorders:function(){var aj=this.getStyle(g);return{beforeX:(parseFloat(aj[w.l])||0),afterX:(parseFloat(aj[w.r])||0),beforeY:(parseFloat(aj[w.t])||0),afterY:(parseFloat(aj[w.b])||0)}},getBorderWidth:function(aj){return this.addStyles(aj,w)},getData:function(aj){var al=this.dom,ak;if(al){ak=al._extData;if(!ak&&!aj){al._extData=ak={}}}return ak},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(am,ak){var al=this,an=al.isStyle("display","none"),aj,ao;if(an){return 0}aj=al.dom.offsetHeight;if(Ext.supports.Direct2DBug){ao=al.adjustDirect2DDimension(Q);if(ak){aj+=ao}else{if(ao>0&&ao<0.5){aj++}}}if(am){aj-=al.getBorderWidth("tb")+al.getPadding("tb")}return(aj<0)?0:aj},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(aj){return aj?this.getLocalX():this.getX()},getLocalX:function(){var al=this,ak,aj=al.getStyle("left");if(!aj||aj==="auto"){aj=0}else{if(r.test(aj)){aj=parseFloat(aj)}else{aj=al.getX();ak=al.dom.offsetParent;if(ak){aj-=Ext.fly(ak).getX()}}}return aj},getLocalXY:function(){var am=this,al,ak=am.getStyle(["left","top"]),aj=ak.left,an=ak.top;if(!aj||aj==="auto"){aj=0}else{if(r.test(aj)){aj=parseFloat(aj)}else{aj=am.getX();al=am.dom.offsetParent;if(al){aj-=Ext.fly(al).getX()}}}if(!an||an==="auto"){an=0}else{if(r.test(an)){an=parseFloat(an)}else{an=am.getY();al=am.dom.offsetParent;if(al){an-=Ext.fly(al).getY()}}}return[aj,an]},getLocalY:function(){var ak=this,aj,al=ak.getStyle("top");if(!al||al==="auto"){al=0}else{if(r.test(al)){al=parseFloat(al)}else{al=ak.getY();aj=ak.dom.offsetParent;if(aj){al-=Ext.fly(aj).getY()}}}return al},getMargin:(function(){var ak={t:"top",l:"left",r:"right",b:"bottom"},aj=["margin-top","margin-left","margin-right","margin-bottom"];return function(am){var ao=this,an,al,ap;if(!am){an=ao.getStyle(aj);ap={};if(an&&typeof an==="object"){ap={};for(al in m){ap[al]=ap[ak[al]]=parseFloat(an[m[al]])||0}}}else{ap=ao.addStyles(am,m)}return ap}})(),getPadding:function(aj){return this.addStyles(aj,ac)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(aj){return(aj?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var al=this,ao=al.dom,ak=S.documentElement,an,am,aj=document.body;if(ao===S||ao===aj){an=ak.scrollLeft||(aj?aj.scrollLeft:0);am=ak.scrollTop||(aj?aj.scrollTop:0)}else{an=ao.scrollLeft;am=ao.scrollTop}return{left:an,top:am}},getScrollIntoViewXY:function(ao,aw,av){var ay=this.dom,ak=Ext.getDom(ao),al=this.getOffsetsTo(ak),au=ay.offsetWidth,aq=ay.offsetHeight,aj=al[0]+aw,ap=al[1]+av,an=ap+aq,aA=aj+au,ar=ak.clientHeight,ax=ak.clientWidth,az=aw,at=av,am=at+ar,aB=az+ax;if(aq>ar||ap<at){av=ap}else{if(an>am){av=an-ar}}if(au>ax||aj<az){aw=aj}else{if(aA>aB){aw=aA-ax}}return{x:aw,y:av}},getScrollLeft:function(){var aj=this.dom;if(aj===S||aj===document.body){return this.getScroll().left}else{return aj.scrollLeft}},getScrollTop:function(){var aj=this.dom;if(aj===S||aj===document.body){return this.getScroll().top}else{return aj.scrollTop}},getSize:function(aj){return{width:this.getWidth(aj),height:this.getHeight(aj)}},getStyle:function(aw,aq){var ar=this,am=ar.dom,az=typeof aw!=="string",ax=ar.styleHooks,ak=aw,at=ak,ap=1,ao,ay,av,au,al,aj,an;if(az){av={};ak=at[0];an=0;if(!(ap=at.length)){return av}}if(!am||am.documentElement){return av||""}ao=am.style;if(aq){aj=ao}else{aj=am.ownerDocument.defaultView.getComputedStyle(am,null);if(!aj){aq=true;aj=ao}}do{au=ax[ak];if(!au){ax[ak]=au={name:p.normalize(ak)}}if(au.get){al=au.get(am,ar,aq,aj)}else{ay=au.name;al=aj[ay]}if(!az){return al}av[ak]=al;ak=at[++an]}while(an<ap);return av},getStyleValue:function(aj){return this.dom.style.getPropertyValue(aj)},getTop:function(aj){return aj?this.getLocalY():this.getY()},getValue:function(ak){var aj=this.dom.value;return ak?parseInt(aj,10):aj},getViewSize:function(){var aj=this.dom;if(aj===S||aj===S.body){return{width:p.getViewportWidth(),height:p.getViewportHeight()}}else{return{width:aj.clientWidth,height:aj.clientHeight}}},getVisibilityMode:function(){var aj=this,ak=aj.getData(),al=ak.visibilityMode;if(al===undefined){ak.visibilityMode=al=p.DISPLAY}return al},getWidth:function(aj,ao){var am=this,ap=am.dom,an=am.isStyle("display","none"),al,ak,aq;if(an){return 0}if(Ext.supports.BoundingClientRect){al=ap.getBoundingClientRect();ak=(am.vertical&&!Ext.supports.RotatedBoundingClientRect)?(al.bottom-al.top):(al.right-al.left);ak=ao?ak:Math.ceil(ak)}else{ak=ap.offsetWidth}if(Ext.supports.Direct2DBug&&!am.vertical){aq=am.adjustDirect2DDimension(i);if(ao){ak+=aq}else{if(aq>0&&aq<0.5){ak++}}}if(aj){ak-=am.getBorderWidth("lr")+am.getPadding("lr")}return(ak<0)?0:ak},getX:function(){return this.getXY()[0]},getXY:function(){var al=Math.round,ao=this.dom,ak=0,ap=0,an,aj;if(ao!==S&&ao!==S.body){try{an=ao.getBoundingClientRect()}catch(am){an={left:0,top:0}}ak=al(an.left);ap=al(an.top);aj=Ext.getDoc().getScroll();ak+=aj.left;ap+=aj.top}return[ak,ap]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(aj){var ak=this.getData();if(!ak.isSynchronized){this.synchronize()}return ak.classMap.hasOwnProperty(aj)},hide:function(){this.setVisible(false);return this},insertAfter:function(aj){aj=Ext.getDom(aj);aj.parentNode.insertBefore(this.dom,aj.nextSibling);return this},insertBefore:function(aj){aj=Ext.getDom(aj);aj.parentNode.insertBefore(this.dom,aj);return this},insertFirst:function(ak,aj){ak=ak||{};if(ak.nodeType||ak.dom||typeof ak==="string"){ak=Ext.getDom(ak);this.dom.insertBefore(ak,this.dom.firstChild);return !aj?Ext.get(ak):ak}else{return this.createChild(ak,this.dom.firstChild,aj)}},insertHtml:function(ak,al,aj){var am=Ext.DomHelper.insertHtml(ak,this.dom,al);return aj?Ext.get(am):am},insertSibling:function(ak,an,aq){var ap=this,ar=Ext.DomHelper,at=(an||"before").toLowerCase()==="after",am,aj,al,ao;if(Ext.isIterable(ak)){al=ak.length;aj=Ext.fly(document.createDocumentFragment());if(Ext.isArray(ak)){for(ao=0;ao<al;ao++){am=aj.appendChild(ak[ao],aq)}}else{for(ao=0;ao<al;ao++){aj.dom.appendChild(am=ak[0])}if(aq===false){am=Ext.get(am)}}ap.dom.parentNode.insertBefore(aj.dom,at?ap.dom.nextSibling:ap.dom);return am}ak=ak||{};if(ak.nodeType||ak.dom){am=ap.dom.parentNode.insertBefore(Ext.getDom(ak),at?ap.dom.nextSibling:ap.dom);if(!aq){am=Ext.get(am)}}else{if(at&&!ap.dom.nextSibling){am=ar.append(ap.dom.parentNode,ak,!aq)}else{am=ar[at?"insertAfter":"insertBefore"](ap.dom,ak,!aq)}}return am},is:function(aj){var al=this.dom,ak;if(!aj){ak=true}else{if(!al.tagName){ak=false}else{if(Ext.isFunction(aj)){ak=aj(al)}else{ak=al[Ext.supports.matchesSelector](aj)}}}return ak},isAncestor:function(ak){var aj=false,al=this.dom,am=Ext.getDom(ak);if(al&&am){if(al.contains){return al.contains(am)}else{if(al.compareDocumentPosition){return !!(al.compareDocumentPosition(am)&16)}else{while((am=am.parentNode)){aj=am===al||aj}}}}return aj},isPainted:(function(){return !Ext.browser.is.IE?function(){var aj=this.dom;return Boolean(aj&&aj.offsetParent)}:function(){var aj=this.dom;return Boolean(aj&&(aj.offsetHeight!==0&&aj.offsetWidth!==0))}})(),isScrollable:function(){var aj=this.dom;return aj.scrollHeight>aj.clientHeight||aj.scrollWidth>aj.clientWidth},isStyle:function(aj,ak){return this.getStyle(aj)===ak},isVisible:function(ak){var al=this.dom,aj;if(!al){return false}if(!Y){Y=new Ext.dom.Fly()}for(aj=al.ownerDocument.documentElement;al!==aj;al=al.parentNode){if(!al||al.nodeType===11||(Y.attach(al)).isStyle(k,ae)||Y.isStyle(d,V)){return false}if(!ak){break}}return true},last:function(aj,ak){return this.matchNode("previousSibling","lastChild",aj,ak)},maskIframes:function(){var aj=document.getElementsByTagName("iframe");Ext.each(aj,function(am){var al=Ext.fly(am.parentNode),ak=al.mask();ak.setStyle("background-color","transparent")})},matchNode:function(ak,ao,aj,al){var am=this.dom,an;if(!am){return null}an=am[ao];while(an){if(an.nodeType===1&&(!aj||Ext.fly(an,"_matchNode").is(aj))){return !al?Ext.get(an):an}an=an[ak]}return null},next:function(aj,ak){return this.matchNode("nextSibling","nextSibling",aj,ak)},parent:function(aj,ak){return this.matchNode("parentNode","parentNode",aj,ak)},position:function(an,am,aj,al){var ak=this;if(ak.dom.tagName!=="BODY"){if(!an&&ak.isStyle(X,t)){ak.setStyle(X,s)}else{if(an){ak.setStyle(X,an)}}if(am){ak.setStyle(n,am)}if(aj||al){ak.setXY([aj||false,al||false])}}},prev:function(aj,ak){return this.matchNode("previousSibling","previousSibling",aj,ak)},query:function(al,au,ar){var an=this.dom,ap,aq,at,ak,aj,ao,am;if(!an){return null}au=(au!==false);al=al.split(",");if(!ar){ap=[]}for(ao=0,aq=al.length;ao<aq;ao++){if(typeof al[ao]==="string"){if(ar){ak=an.querySelector(al[ao]);return au?ak:Ext.get(ak)}aj=an.querySelectorAll(al[ao]);for(am=0,at=aj.length;am<at;am++){ap.push(au?aj[am]:Ext.get(aj[am]))}}}return ap},radioCls:function(am){var an=this.dom.parentNode.childNodes,ak;am=Ext.isArray(am)?am:[am];for(var al=0,aj=an.length;al<aj;al++){ak=an[al];if(ak&&ak.nodeType===1){Ext.fly(ak).removeCls(am)}}return this.addCls(am)},redraw:function(){var ak=this.dom,aj=ak.style;aj.display="none";ak.offsetHeight;aj.display=""},remove:function(){this.destroy()},removeChild:function(aj){this.dom.removeChild(Ext.getDom(aj));return this},removeCls:function(ar,ap,au){var at=this,am=at.getData(),av,an,ak,al,ao,aq,aj;if(!ar){return at}if(!am.isSynchronized){at.synchronize()}an=at.dom;ak=am.classMap;al=am.classList;ap=ap?ap+z:"";au=au?z+au:"";if(typeof ar==="string"){ar=ar.split(L)}for(ao=0,aq=ar.length;ao<aq;ao++){aj=ar[ao];if(aj){aj=ap+aj+au;if(ak[aj]){delete ak[aj];Ext.Array.remove(al,aj);av=true}}}if(av){an.className=al.join(" ")}return at},repaint:function(){var aj=this;aj.addCls("x-repaint");Ext.defer(function(){if(aj.dom){Ext.fly(aj.dom).removeCls("x-repaint")}},1);return aj},replace:function(al,ak){al=Ext.getDom(al);var aj=al.parentNode,an=al.id,am=this.dom;if(ak!==false&&an&&Ext.cache[an]){aj.insertBefore(am,al);Ext.get(al).destroy()}else{aj.replaceChild(am,al)}return this},replaceCls:function(al,at,aq,aw){var au=this,ao,ak,am,ap,ar,aj,an=au.getData(),av;if(!al&&!at){return au}al=al||[];at=at||[];if(!an.isSynchronized){au.synchronize()}if(!aw){aw=""}ao=au.dom;ak=an.classMap;am=an.classList;aq=aq?aq+z:"";aw=aw?z+aw:"";if(typeof al==="string"){al=al.split(L)}if(typeof at==="string"){at=at.split(L)}for(ap=0,ar=al.length;ap<ar;ap++){aj=aq+al[ap]+aw;if(ak[aj]){delete ak[aj];av=true}}for(ap=0,ar=at.length;ap<ar;ap++){aj=aq+at[ap]+aw;if(!ak[aj]){ak[aj]=true;av=true}}if(av){an.classList=am=Ext.Object.getKeys(ak);ao.className=am.join(" ")}return au},replaceWith:function(am){var an=this,ao=an.dom,al=ao.parentNode,aj=Ext.cache,ak;an.clearListeners();if(am.nodeType||am.dom||typeof am==="string"){am=Ext.get(am);ak=al.insertBefore(am.dom,ao)}else{ak=Ext.DomHelper.insertBefore(ao,am)}al.removeChild(ao);an.dom=ak;if(!an.isFly){delete aj[an.id];aj[an.id=Ext.id(ak)]=an}return an},resolveListenerScope:function(ak){var aj=this.component;return aj?aj.resolveListenerScope(ak):this},scroll:function(ar,aj,al){if(!this.isScrollable()){return false}ar=ar.charAt(0);var aq=this,an=aq.dom,ap=ar==="r"||ar==="l"?"left":"top",ak=false,am,ao;if(ar==="l"||ar==="t"||ar==="u"){aj=-aj}if(ap==="left"){am=an.scrollLeft;ao=aq.constrainScrollLeft(am+aj)}else{am=an.scrollTop;ao=aq.constrainScrollTop(am+aj)}if(ao!==am){this.scrollTo(ap,ao,al);ak=true}return ak},scrollBy:function(ak,aj,al){var am=this,an=am.dom;if(ak.length){al=aj;aj=ak[1];ak=ak[0]}else{if(typeof ak!="number"){al=aj;aj=ak.y;ak=ak.x}}if(ak){am.scrollTo("left",am.constrainScrollLeft(an.scrollLeft+ak),al)}if(aj){am.scrollTo("top",am.constrainScrollTop(an.scrollTop+aj),al)}return am},scrollChildIntoView:function(ak,aj){Ext.fly(ak).scrollIntoView(this,aj)},scrollIntoView:function(aj,am,al,ak){aj=Ext.getDom(aj)||Ext.getBody().dom;return this.doScrollIntoView(aj,am,al,ak,"getScrollLeft","scrollTo")},scrollTo:function(al,an,aj){var ao=c.test(al),am=this,aq=ao?"scrollTop":"scrollLeft",ap=am.dom,ak;if(!aj||!am.anim){ap[aq]=an;ap[aq]=an}else{ak={to:{}};ak.to[aq]=an;if(Ext.isObject(aj)){Ext.applyIf(ak,aj)}am.animate(ak)}return am},select:function(ak,am){var aj,al;if(typeof ak==="string"){al=this.query(ak,!am)}else{al=ak;aj=true}return am?new Ext.CompositeElement(al,!aj):new Ext.CompositeElementLite(al,true)},selectNode:function(ak,aj){return this.query(ak,aj,true)},set:function(aj,ak){var am=this,ao=am.dom,al,an;for(al in aj){if(aj.hasOwnProperty(al)){an=aj[al];if(al==="style"){am.applyStyles(an)}else{if(al==="cls"){ao.className=an}else{if(ak!==false){if(an===undefined){ao.removeAttribute(al)}else{ao.setAttribute(al,an)}}else{ao[al]=an}}}}}return am},setBottom:function(aj){this.dom.style[N]=p.addUnits(aj);return this},setCls:function(am){var ao=this,al=ao.getData(),ak,an,aj,ap,aq;if(!al.isSynchronized){ao.synchronize()}if(typeof am==="string"){am=am.split(L)}al.classList=aq=am.slice();al.classMap=ap={};for(ak=0,an=aq.length;ak<an;ak++){ap[aq[ak]]=true}ao.dom.className=aq.join(" ")},setDisplayed:function(ak){var aj=this;if(typeof ak==="boolean"){ak=ak?aj._getDisplay():V}aj.setStyle(d,ak);if(aj.shadow||aj.shim){aj.setUnderlaysVisible(ak!==V)}return aj},setHeight:function(aj){var ak=this;ak.dom.style[Q]=p.addUnits(aj);if(ak.shadow||ak.shim){ak.syncUnderlays()}return ak},setHtml:function(aj){if(this.dom){this.dom.innerHTML=aj}return this},setId:function(am){var al=this,aj=al.id,ak=Ext.cache;if(aj){delete ak[aj]}al.dom.id=am;al.id=am;ak[am]=al;return al},setLeft:function(ak){var aj=this;aj.dom.style[H]=p.addUnits(ak);if(aj.shadow||aj.shim){aj.syncUnderlays()}return aj},setLocalX:function(aj){var al=this,ak=al.dom.style;ak.right="auto";ak.left=(aj===null)?"auto":aj+"px";if(al.shadow||al.shim){al.syncUnderlays()}return al},setLocalXY:function(aj,am){var al=this,ak=al.dom.style;ak.right="auto";if(aj&&aj.length){am=aj[1];aj=aj[0]}if(aj===null){ak.left="auto"}else{if(aj!==undefined){ak.left=aj+"px"}}if(am===null){ak.top="auto"}else{if(am!==undefined){ak.top=am+"px"}}if(al.shadow||al.shim){al.syncUnderlays()}return al},setLocalY:function(ak){var aj=this;aj.dom.style.top=(ak===null)?"auto":ak+"px";if(aj.shadow||aj.shim){aj.syncUnderlays()}return aj},setMargin:function(al){var ak=this,aj=ak.dom.style;if(al||al===0){al=ak.self.unitizeBox((al===true)?5:al);aj.setProperty("margin",al,"important")}else{aj.removeProperty("margin-top");aj.removeProperty("margin-right");aj.removeProperty("margin-bottom");aj.removeProperty("margin-left")}},setMaxHeight:function(aj){this.dom.style[D]=p.addUnits(aj);return this},setMaxWidth:function(aj){this.dom.style[q]=p.addUnits(aj);return this},setMinHeight:function(aj){this.dom.style[e]=p.addUnits(aj);return this},setMinWidth:function(aj){this.dom.style[ad]=p.addUnits(aj);return this},setOpacity:function(aj){var ak=this;if(ak.dom){ak.setStyle("opacity",aj)}return ak},setPadding:function(al){var ak=this,aj=ak.dom.style;if(al||al===0){al=ak.self.unitizeBox((al===true)?5:al);aj.setProperty("padding",al,"important")}else{aj.removeProperty("padding-top");aj.removeProperty("padding-right");aj.removeProperty("padding-bottom");aj.removeProperty("padding-left")}},setRight:function(aj){this.dom.style[ah]=p.addUnits(aj);return this},setScrollLeft:function(aj){this.dom.scrollLeft=aj;return this},setScrollTop:function(aj){this.dom.scrollTop=aj;return this},setSize:function(al,aj){var am=this,ak=am.dom.style;if(Ext.isObject(al)){aj=al.height;al=al.width}ak.width=p.addUnits(al);ak.height=p.addUnits(aj);if(am.shadow||am.shim){am.syncUnderlays()}return am},setSizeState:function(al){var ak=this,am,aj;if(al===true){am=B;aj=[O,I]}else{if(al===false){am=O;aj=[B,I]}else{if(al===null){am=I;aj=[B,O]}else{aj=[B,O,I]}}}if(am){ak.addCls(am)}ak.removeCls(aj);return ak},setStyle:function(aq,ao){var am=this,ap=am.dom,aj=am.styleHooks,al=ap.style,ak=aq,an;if(typeof ak==="string"){an=aj[ak];if(!an){aj[ak]=an={name:p.normalize(ak)}}ao=(ao==null)?"":ao;if(an.set){an.set(ap,ao,am)}else{al[an.name]=ao}if(an.afterSet){an.afterSet(ap,ao,am)}}else{for(ak in aq){if(aq.hasOwnProperty(ak)){an=aj[ak];if(!an){aj[ak]=an={name:p.normalize(ak)}}ao=aq[ak];ao=(ao==null)?"":ao;if(an.set){an.set(ap,ao,am)}else{al[an.name]=ao}if(an.afterSet){an.afterSet(ap,ao,am)}}}}return am},setText:function(aj){this.dom.textContent=aj},setTop:function(ak){var aj=this;aj.dom.style[T]=p.addUnits(ak);if(aj.shadow||aj.shim){aj.syncUnderlays()}return aj},setUnderlaysVisible:function(aj){var al=this.shadow,ak=this.shim;if(al&&!al.disabled){if(aj){al.show()}else{al.hide()}}if(ak&&!ak.disabled){if(aj){ak.show()}else{ak.hide()}}},setVisibility:function(aj){var ak=this.dom.style;if(aj){ak.removeProperty("visibility")}else{ak.setProperty("visibility","hidden","important")}},setVisibilityMode:function(aj){this.getData().visibilityMode=aj;return this},setVisible:function(al){var aj=this,ak=aj.getVisibilityMode(),am=al?"removeCls":"addCls";switch(ak){case p.DISPLAY:aj.removeCls([E,l,a]);aj[am](C);break;case p.VISIBILITY:aj.removeCls([C,l,a]);aj[am](E);break;case p.OFFSETS:aj.removeCls([E,C,a]);aj[am](l);break;case p.CLIP:aj.removeCls([E,C,l]);aj[am](a);break}if(aj.shadow||aj.shim){aj.setUnderlaysVisible(al)}return aj},setWidth:function(aj){var ak=this;ak.dom.style[i]=p.addUnits(aj);if(ak.shadow||ak.shim){ak.syncUnderlays()}return ak},setX:function(aj){return this.setXY([aj,false])},setXY:function(al){var ak=this,am=ak.translatePoints(al),aj=ak.dom.style,an;ak.position();aj.right="auto";for(an in am){if(!isNaN(am[an])){aj[an]=am[an]+"px"}}if(ak.shadow||ak.shim){ak.syncUnderlays()}return ak},setY:function(aj){return this.setXY([false,aj])},setZIndex:function(aj){var ak=this;if(ak.shadow){ak.shadow.setZIndex(aj)}if(ak.shim){ak.shim.setZIndex(aj)}return ak.setStyle("z-index",aj)},show:function(){this.setVisible(true);return this},swapCls:function(ak,ap,aj,an){if(aj===undefined){aj=true}var am=this,ao=aj?ak:ap,al=aj?ap:ak;if(al){am.removeCls(an?an+"-"+al:al)}if(ao){am.addCls(an?an+"-"+ao:ao)}return am},synchronize:function(){var aq=this,am=aq.dom,ar={},ap=am.className,ak,an,ao,aj,al=aq.getData();if(ap&&ap.length>0){ak=am.className.split(af);for(an=0,ao=ak.length;an<ao;an++){aj=ak[an];ar[aj]=true}}else{ak=[]}al.classList=ak;al.classMap=ar;al.isSynchronized=true;return aq},syncUnderlays:function(){var am=this,aq=am.shadow,aj=am.shim,ak=am.dom,ar,ao,an,ap,al;if(am.isVisible()){ar=am.getXY();ao=ar[0];an=ar[1];ap=ak.offsetWidth;al=ak.offsetHeight;if(aq&&!aq.hidden){aq.realign(ao,an,ap,al)}if(aj&&!aj.hidden){aj.realign(ao,an,ap,al)}}},toggleCls:function(aj,ak){if(typeof ak!=="boolean"){ak=!this.hasCls(aj)}return ak?this.addCls(aj):this.removeCls(aj)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var aj="webkitTransform" in S.createElement("div").style?"webkitTransform":"transform";return function(ak,am,al){this.dom.style[aj]="translate3d("+(ak||0)+"px, "+(am||0)+"px, "+(al||0)+"px)"}}(),unmaskIframes:function(){var aj=document.getElementsByTagName("iframe");Ext.each(aj,function(al){var ak=Ext.fly(al.parentNode);ak.unmask()})},unwrap:function(){var ap=this.dom,ak=ap.parentNode,am,ao=Ext.fly(Ext.Element.getActiveElement()),an,al,aq,aj;an=Ext.cache[ao.id];if(an){ao=an}if(this.contains(ao)){if(an){an.suspendFocusEvents()}al=true}if(ak){am=ak.parentNode;if(al){aj=am.getAttribute("tabIndex");aq=Ext.fly(am);aq.set({tabIndex:-1});aq.suspendFocusEvents();aq.focus()}am.insertBefore(ap,ak);am.removeChild(ak)}else{am=document.createDocumentFragment();am.appendChild(ap)}if(al){if(an){an.focus();an.resumeFocusEvents()}else{Ext.fly(ao).focus()}if(aq){aq.resumeFocusEvents();aq.set({tabIndex:aj})}}return this},up:function(al,aj,ak){return this.findParentNode(al,aj,!ak)},update:function(aj){return this.setHtml(aj)},wrap:function(am,au,ap){var at=this,aq=at.dom,ao=Ext.DomHelper.insertBefore(aq,am||{tag:"div"},!au),ar=ao,al=Ext.Element.getActiveElement(),an,ak,aj;an=Ext.cache[al.id];if(an){al=an}if(ap){ar=ao.selectNode(ap,au)}if(at.contains(al)){if(an){an.suspendFocusEvents()}aj=ao.dom.getAttribute("tabIndex");ao.set({tabIndex:-1});ao.suspendFocusEvents();ao.focus();ak=true}ar.appendChild(aq);if(ak){if(an){an.focus();an.resumeFocusEvents()}else{Ext.fly(al).focus()}ao.resumeFocusEvents();ao.set({tabIndex:aj})}return ao},privates:{doAddListener:function(ao,ar,at,au,ak,aj,al){var aq=this,am,an,ap;ao=Ext.canonicalEventName(ao);if(!aq.blockedEvents[ao]){am=aq.mixins.observable.doAddListener;au=au||{};if(aq.longpressEvents[ao]){aq.disableTouchContextMenu()}if(p.useDelegatedEvents===false){au.delegated=au.delegated||false}if(au.translate!==false){an=aq.additiveEvents[ao];if(an){au.type=ao;ao=an;am.call(aq,ao,ar,at,au,ak,aj,al)}ap=aq.eventMap[ao];if(ap){au.type=au.type||ao;ao=ap}}am.call(aq,ao,ar,at,au,ak,aj,al);delete au.type}},doRemoveListener:function(aj,an,am){var ao=this,al,aq,ap,ak;if(!ao.blockedEvents[aj]){al=ao.mixins.observable.doRemoveListener;if(ao.longpressEvents[aj]){ak=this._contextMenuListenerRemover;if(ak){ak.destroy()}}ap=ao.additiveEvents[aj];if(ap){aj=ap;al.call(ao,aj,an,am)}aq=ao.eventMap[aj];if(aq){al.call(ao,aq,an,am)}al.call(ao,aj,an,am)}},_initEvent:function(aj){return(this.events[aj]=new Ext.dom.ElementEvent(this,aj))},_getDisplay:function(){var aj=this.getData(),ak=aj[v];if(ak===undefined){aj[v]=ak=""}return ak},_getPublisher:function(aj){var al=Ext.event.publisher.Publisher,ak=al.publishersByEvent[aj];if(!ak||(this.dom===window&&aj==="resize")){ak=al.publishers.dom}return ak},isFocusSuspended:function(){return !!this.getData().suspendFocusEvents},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent("focus","blur")}this.getData().suspendFocusEvents=true},resumeFocusEvents:function(){function aj(){var ak;if(!this.destroyed){ak=this.getData();if(ak){ak.suspendFocusEvents=false}if(!this.isFly){this.resumeEvent("focus","blur")}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(aj,this)}else{aj.call(this)}}}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(al){var ao=this,am=ao.dom,aq=am.nodeName==="BODY",ar=aq?p.getViewportWidth():am.offsetWidth,an=aq?p.getViewportHeight():am.offsetHeight,au=ao.getXY(),at=au[1],aj=au[0]+ar,ap=au[1]+an,ak=au[0];if(al){return new Ext.util.Region(at,aj,ap,ak)}else{return{left:ak,top:at,width:ar,height:an,right:aj,bottom:ap}}},getScrollParent:null,isDescendent:null,isTransparent:function(ak){var aj=this.getStyle(ak);return aj?b.test(aj):false},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(p){var b=document,l=p.prototype,w=Ext.supports,D="pointerdown",e="pointermove",c="pointerup",d="pointercancel",h="MSPointerDown",m="MSPointerMove",z="MSPointerUp",a="MSPointerCancel",s="mousedown",y="mousemove",t="mouseup",E="mouseover",C="mouseout",o="mouseenter",f="mouseleave",v="touchstart",k="touchmove",A="touchend",g="touchcancel",q="click",i="dblclick",u="tap",B="doubletap",j=l.eventMap={},r=l.additiveEvents={},n=Ext.id,x;Ext.id=function(H,G){var F=Ext.getDom(H,true),I,J;if(!F){J=n(H,G)}else{if(!(J=F.id)){J=n(null,G||p.prototype.identifiablePrefix);if(Ext.isSandboxed){I=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-");J=I+J}F.id=J}}return J};if(w.PointerEvents){j[s]=D;j[y]=e;j[t]=c;j[v]=D;j[k]=e;j[A]=c;j[g]=d;j[q]=u;j[i]=B;j[E]="pointerover";j[C]="pointerout";j[o]="pointerenter";j[f]="pointerleave"}else{if(w.MSPointerEvents){j[D]=h;j[e]=m;j[c]=z;j[d]=a;j[s]=h;j[y]=m;j[t]=z;j[v]=h;j[k]=m;j[A]=z;j[g]=a;j[q]=u;j[i]=B;j[E]="MSPointerOver";j[C]="MSPointerOut"}else{if(w.TouchEvents){j[D]=v;j[e]=k;j[c]=A;j[d]=g;j[s]=v;j[y]=k;j[t]=A;j[q]=u;j[i]=B;if(Ext.isWebKit&&Ext.os.is.Desktop){j[v]=s;j[k]=y;j[A]=t;j[g]=t;r[s]=s;r[y]=y;r[t]=t;r[v]=v;r[k]=k;r[A]=A;r[g]=g;r[D]=s;r[e]=y;r[c]=t;r[d]=t}}else{j[D]=s;j[e]=y;j[c]=t;j[d]=t;j[v]=s;j[k]=y;j[A]=t;j[g]=t}}}if(Ext.isWebKit){j.transitionend=Ext.browser.getVendorProperyName("transitionEnd");j.animationstart=Ext.browser.getVendorProperyName("animationStart");j.animationend=Ext.browser.getVendorProperyName("animationEnd")}if(!Ext.supports.MouseWheel&&!Ext.isOpera){j.mousewheel="DOMMouseScroll"}x=l.$eventOptions=Ext.Object.chain(l.$eventOptions);x.translate=x.capture=x.delegate=x.delegated=x.stopEvent=x.preventDefault=x.stopPropagation=x.element=1;l.styleHooks.opacity={name:"opacity",afterSet:function(H,G,F){var I=F.shadow;if(I){I.setOpacity(G)}}};l.getTrueXY=l.getXY;Ext.select=p.select;Ext.query=p.query;Ext.apply(Ext,{get:function(F){return p.get(F)},getDom:function(F){if(!F||!b){return null}return typeof F==="string"?Ext.getElementById(F):"dom" in F?F.dom:F},getBody:function(){if(!Ext._bodyEl){if(!b.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(b.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(b.head||b.getElementsByTagName("head")[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(b)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(H){H=H.dom||H;var I=H&&H.id,G=Ext.cache[I],F;if(G){G.destroy()}else{if(H&&(H.nodeType===3||H.tagName.toUpperCase()!=="BODY")){F=H.parentNode;if(F){F.removeChild(H)}}}}});Ext.isGarbage=function(F){return F&&F.nodeType===1&&F.tagName!=="BODY"&&F.tagName!=="HTML"&&(!F.parentNode||(!F.offsetParent&&((Ext.isIE8?b.all[F.id]:b.getElementById(F.id))!==F)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(F))))};if(Ext.os.is.Android||(Ext.os.is.Windows&&Ext.supports.Touch)){Ext.onReady(function(){var F=Ext.getWin();p._windowWidth=p._viewportWidth=window.innerWidth;p._windowHeight=p._viewportHeight=window.innerHeight;F.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:true,delegated:false,delay:1,scope:p});F.on({resize:"_onWindowResize",priority:2000,scope:p})})}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:null,id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,disableOnEmpty:false,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:false,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(f){var b=a.isCollection?a.items:a,g=b.length,c=true,d,e;for(d=0;c&&d<g;d++){e=b[d];if(!e.getDisabled()){c=e.filter(f)}}return c}},isInvalid:function(a){if(!a.filterFn){if(!a.property){return"A Filter requires either a property or a filterFn to be set"}if(!a.hasOwnProperty("value")&&!a.operator){return"A Filter requires either a property and value, or a filterFn to be set"}}return false}},constructor:function(a){this.initConfig(a)},preventConvert:{"in":1,notin:1},filter:function(b){var a=this,e=a._filterFn||a.getFilterFn(),d=a.getConvert(),c=a._value;a._filterValue=c;a.isDateValue=Ext.isDate(c);if(a.isDateValue){a.dateValue=c.getTime()}if(d&&!a.preventConvert[a.getOperator()]){a._filterValue=d.call(a.scope||a,c)}return e.call(a.scope||a,b)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-filter-")}this._id=a}return a},getFilterFn:function(){var b=this,c=b._filterFn,a;if(!c){a=b.getOperator();if(a){c=b.operatorFns[a]}else{c=b.createRegexFilter()}b._filterFn=c}return c},createRegexFilter:function(){var b=this,e=!!b.getAnyMatch(),a=!!b.getExactMatch(),c=b.getValue(),d=Ext.String.createRegex(c,!e,!e&&a,!b.getCaseSensitive());return function(f){var g=b.getPropertyValue(f);return d?d.test(g):(g==null)}},getPropertyValue:function(b){var a=this._root,c=(a==null)?b:b[a];return c[this._property]},getState:function(){var c=this.getInitialConfig(),a={},b;for(b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}delete a.root;a.value=this.getValue();return a},getScope:function(){return this.scope},serialize:function(){var a=this.getState(),b=this.getSerializer();delete a.id;delete a.serializer;if(b){b.call(this,a)}return a},updateOperator:function(){this._filterFn=null},updateValue:function(a){this._filterFn=null;if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(a))}},updateDisableOnEmpty:function(a){var b=false;if(a){b=Ext.isEmpty(this.getValue())}this.setDisabled(b)},privates:{getCandidateValue:function(c,b,e){var d=this,f=d._convert,a=d.getPropertyValue(c);if(f){a=f.call(d.scope||d,a)}else{if(!e){a=Ext.coerce(a,b)}}return a}}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var a=this.prototype,b=(a.operatorFns={"<":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)<c},"<=":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)<=c},"=":function(d){var e=this,c=e._filterValue;d=e.getCandidateValue(d,c);if(e.isDateValue&&d instanceof Date){d=d.getTime();c=e.dateValue}return d==c},"===":function(d){var e=this,c=e._filterValue;d=e.getCandidateValue(d,c,true);if(e.isDateValue&&d instanceof Date){d=d.getTime();c=e.dateValue}return d===c},">=":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)>=c},">":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)>c},"!=":function(d){var e=this,c=e._filterValue;d=e.getCandidateValue(d,c);if(e.isDateValue&&d instanceof Date){d=d.getTime();c=e.dateValue}return d!=c},"!==":function(d){var e=this,c=e._filterValue;d=e.getCandidateValue(d,c,true);if(e.isDateValue&&d instanceof Date){d=d.getTime();c=e.dateValue}return d!==c},"in":function(d){var c=this._filterValue;return Ext.Array.contains(c,this.getCandidateValue(d,c))},notin:function(d){var c=this._filterValue;return !Ext.Array.contains(c,this.getCandidateValue(d,c))},like:function(d){var c=this._filterValue;return c&&this.getCandidateValue(d,c).toLowerCase().indexOf(c.toLowerCase())>-1}});b["=="]=b["="];b.gt=b[">"];b.ge=b[">="];b.lt=b["<"];b.le=b["<="];b.eq=b["="];b.ne=b["!="]}));(Ext.cmd.derive("Ext.util.Observable",Ext.mixin.Observable,{$applyConfigs:true},0,0,0,0,0,0,[Ext.util,"Observable"],function(a){var b=Ext.mixin.Observable;a.releaseCapture=b.releaseCapture;a.capture=b.capture;a.captureArgs=b.captureArgs;a.observe=a.observeClass=b.observe}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(b,a){var c=this;if(arguments.length===1&&Ext.isObject(b)){c.initialConfig=b;Ext.apply(c,b)}else{c.allowFunctions=b===true;if(a){c.getKey=a}c.initialConfig={allowFunctions:c.allowFunctions,getKey:c.getKey}}c.items=[];c.map={};c.keys=[];c.indexMap={};c.length=0;c.mixins.observable.constructor.call(c)},destroy:function(){var a=this;a.items=a.map=a.keys=a.indexMap=null;a.callParent()},allowFunctions:false,add:function(c,d){var a=this.length,b;if(arguments.length===1){b=this.insert(a,c)}else{b=this.insert(a,c,d)}return b},getKey:function(a){return a.id},replace:function(c,e){var d=this,a,b;if(arguments.length==1){e=arguments[0];c=d.getKey(e)}a=d.map[c];if(typeof c=="undefined"||c===null||typeof a=="undefined"){return d.add(c,e)}d.generation++;b=d.indexOfKey(c);d.items[b]=e;d.map[c]=e;if(d.hasListeners.replace){d.fireEvent("replace",c,a,e)}return e},reorder:function(d){var g=this,b=g.items,c=0,f=b.length,a=[],e=[],h;g.suspendEvents();for(h in d){a[d[h]]=b[h]}for(c=0;c<f;c++){if(d[c]==undefined){e.push(b[c])}}for(c=0;c<f;c++){if(a[c]==undefined){a[c]=e.shift()}}g.clear();g.addAll(a);g.resumeEvents()},updateKey:function(f,g){var d=this,e=d.map,a=d.indexOfKey(f),c=d.indexMap,b;if(a>-1){b=e[f];delete e[f];delete c[f];e[g]=b;c[g]=a;d.keys[a]=g;d.indexGeneration=++d.generation}},addAll:function(c){var b=this,a;if(arguments.length>1||Ext.isArray(c)){b.insert(b.length,arguments.length>1?arguments:c)}else{for(a in c){if(c.hasOwnProperty(a)){if(b.allowFunctions||typeof c[a]!="function"){b.add(a,c[a])}}}}},each:function(e,d){var b=Ext.Array.push([],this.items),c=0,a=b.length,f;for(;c<a;c++){f=b[c];if(e.call(d||f,f,c,a)===false){break}}},eachKey:function(e,d){var f=this.keys,b=this.items,c=0,a=f.length;for(;c<a;c++){e.call(d||window,f[c],b[c],c,a)}},findBy:function(e,d){var f=this.keys,b=this.items,c=0,a=b.length;for(;c<a;c++){if(e.call(d||window,b[c],f[c])){return b[c]}}return null},insert:function(b,c,d){var a;if(Ext.isIterable(c)){a=this.doInsert(b,c,d)}else{if(arguments.length>2){a=this.doInsert(b,[c],[d])}else{a=this.doInsert(b,[c])}a=a[0]}return a},doInsert:function(h,n,m){var k=this,b,c,f,j=n.length,a=j,e=k.hasListeners.add,d,g={},l,p,o;if(m!=null){k.useLinearSearch=true}else{m=n;n=new Array(j);for(f=0;f<j;f++){n[f]=this.getKey(m[f])}}k.suspendEvents();for(f=0;f<j;f++){b=n[f];c=k.indexOfKey(b);if(c!==-1){if(c<h){h--}k.removeAt(c)}if(b!=null){if(g[b]!=null){l=true;a--}g[b]=f}}k.resumeEvents();if(l){p=n;o=m;n=new Array(a);m=new Array(a);f=0;for(b in g){n[f]=p[g[b]];m[f]=o[g[b]];f++}j=a}d=h===k.length&&k.indexGeneration===k.generation;Ext.Array.insert(k.items,h,m);Ext.Array.insert(k.keys,h,n);k.length+=j;k.generation++;if(d){k.indexGeneration=k.generation}for(f=0;f<j;f++,h++){b=n[f];if(b!=null){k.map[b]=m[f];if(d){k.indexMap[b]=h}}if(e){k.fireEvent("add",h,m[f],b)}}return m},remove:function(d){var c=this,b,a;if(!c.useLinearSearch&&(b=c.getKey(d))){a=c.indexOfKey(b)}else{a=Ext.Array.indexOf(c.items,d)}return(a===-1)?false:c.removeAt(a)},removeAll:function(a){var c=this,b;if(a||c.hasListeners.remove){if(a){for(b=a.length-1;b>=0;--b){c.remove(a[b])}}else{while(c.length){c.removeAt(0)}}}else{c.length=c.items.length=c.keys.length=0;c.map={};c.indexMap={};c.generation++;c.indexGeneration=c.generation}},removeAt:function(a){var c=this,d,b;if(a<c.length&&a>=0){c.length--;d=c.items[a];Ext.Array.erase(c.items,a,1);b=c.keys[a];if(typeof b!="undefined"){delete c.map[b]}Ext.Array.erase(c.keys,a,1);if(c.hasListeners.remove){c.fireEvent("remove",d,b)}c.generation++;return d}return false},removeRange:function(g,a){var h=this,b,j,f,e,c,d;if(g<h.length&&g>=0){if(!a){a=1}e=Math.min(g+a,h.length);a=e-g;d=e===h.length;c=d&&h.indexGeneration===h.generation;for(f=g;f<e;f++){j=h.keys[f];if(j!=null){delete h.map[j];if(c){delete h.indexMap[j]}}}b=h.items[f-1];h.length-=a;h.generation++;if(c){h.indexGeneration=h.generation}if(d){h.items.length=h.keys.length=h.length}else{h.items.splice(g,a);h.keys.splice(g,a)}return b}return false},removeAtKey:function(b){var d=this,c=d.keys,a;if(b==null){for(a=c.length-1;a>=0;a--){if(c[a]==null){d.removeAt(a)}}}else{return d.removeAt(d.indexOfKey(b))}},getCount:function(){return this.length},indexOf:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.indexOfKey(a)}return Ext.Array.indexOf(b.items,c)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var e=this,d=e.indexMap={},c=e.keys,a=c.length,b;for(b=0;b<a;b++){d[c[b]]=b}e.indexGeneration=e.generation},get:function(b){var d=this,a=d.map[b],c=a!==undefined?a:(typeof b=="number")?d.items[b]:undefined;return typeof c!="function"||d.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.map[a]!=null}return Ext.Array.indexOf(this.items,c)!==-1}return false},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(g,b,h,a){var c=this.extractValues(g,b),f=c.length,e=0,d;h=h||0;a=(a||a===0)?a:f-1;for(d=h;d<=a;d++){e+=c[d]}return e},collect:function(j,e,g){var k=this.extractValues(j,e),a=k.length,b={},c=[],h,f,d;for(d=0;d<a;d++){h=k[d];f=String(h);if((g||!Ext.isEmpty(h))&&!b[f]){b[f]=true;c.push(h)}}return c},extractValues:function(c,a){var b=this.items;if(a){b=Ext.Array.pluck(b,a)}return Ext.Array.pluck(b,c)},hasRange:function(b,a){return(a<this.length)},getRange:function(h,b){var g=this,d=g.items,c=[],a=d.length,f,e;if(a<1){return c}if(h>b){e=true;f=h;h=b;b=f}if(h<0){h=0}if(b==null||b>=a){b=a-1}c=d.slice(h,b+1);if(e&&c.length){c.reverse()}return c},filter:function(d,c,e,a){var b=[];if(Ext.isString(d)){b.push(new Ext.util.Filter({property:d,value:c,anyMatch:e,caseSensitive:a}))}else{if(Ext.isArray(d)||d instanceof Ext.util.Filter){b=b.concat(d)}}return this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(e,d){var h=this,a=new h.self(h.initialConfig),g=h.keys,b=h.items,f=b.length,c;a.getKey=h.getKey;for(c=0;c<f;c++){if(e.call(d||h,b[c],g[c])){a.add(g[c],b[c])}}a.useLinearSearch=h.useLinearSearch;return a},findIndex:function(c,b,e,d,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(f){return f&&b.test(f[c])},null,e)},findIndexBy:function(e,d,h){var g=this,f=g.keys,b=g.items,c=h||0,a=b.length;for(;c<a;c++){if(e.call(d||g,b[c],f[c])){return c}}return -1},createValueMatcher:function(c,e,a,b){if(!c.exec){var d=Ext.String.escapeRegex;c=String(c);if(e===true){c=d(c)}else{c="^"+d(c);if(b===true){c+="$"}}c=new RegExp(c,a?"":"i")}return c},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(c,h){var e=b.isCollection?b.items:b,g=e.length,d,f;for(f=0;f<g;++f){d=e[f].sort(c,h);if(d){return d}}return a&&a(c,h)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-sorter-")}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,c){var f=this,e=f._transform,b=f._root,g=f._property,a,h;if(b){d=d[b];c=c[b]}a=d[g];h=c[g];if(e){a=e(a);h=e(h)}return(a>h)?1:(a<h?-1:0)},applyDirection:function(a){return a?a:"ASC"},updateDirection:function(a){this.multiplier=(a.toUpperCase()==="DESC")?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var b=this,a={root:b.getRoot(),property:b.getProperty(),direction:b.getDirection()};if(b._id){a.id=b._id}return a},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,$configPrefixed:false,$configStrict:false,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,c){var b=a[0].sort(d,c),f=a.length,e=1;for(;!b&&e<f;e++){b=a[e].sort.call(a[e],d,c)}return b}:function(){return 0}}},applySorters:function(c){var b=this,a=b.getSorters()||new Ext.util.MixedCollection(false,Ext.returnId);if(c){a.addAll(b.decodeSorters(c))}return a},sort:function(g,f,a,e){var b=this,h,d,c=b.getSorters();if(!c){b.setSorters(null);c=b.getSorters()}if(Ext.isArray(g)){e=a;a=f}else{if(Ext.isObject(g)){g=[g];e=a;a=f}else{if(Ext.isString(g)){h=c.get(g);if(!h){h={property:g,direction:f}}else{if(f==null){h.toggle()}else{h.setDirection(f)}}g=[h]}}}if(g&&g.length){g=b.decodeSorters(g);switch(a){case"multi":c.insert(0,g[0]);d=c.getCount()-b.multiSortLimit;if(d>0){c.removeRange(b.multiSortLimit,d)}break;case"prepend":c.insert(0,g);break;case"append":c.addAll(g);break;case undefined:case null:case"replace":c.clear();c.addAll(g);break;default:}}if(e!==false){b.fireEvent("beforesort",b,g);b.onBeforeSort(g);if(b.getSorterCount()){b.doSort(b.generateComparator())}}return g},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(f){if(!Ext.isArray(f)){if(f===undefined){f=[]}else{f=[f]}}var d=f.length,g=Ext.util.Sorter,b=this.getModel?this.getModel():this.model,e,a,c;for(c=0;c<d;c++){a=f[c];if(!(a instanceof g)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:"ASC"});if(a.fn){a.sorterFn=a.fn}if(typeof a=="function"){a={sorterFn:a}}if(b&&!a.transform){e=b.getField(a.property);a.transform=e&&e.sortType!==Ext.identityFn?e.sortType:undefined}f[c]=new Ext.util.Sorter(a)}}return f},getFirstSorter:function(){var c=this.getSorters().items,a=c.length,b=0,d;for(;b<a;++b){d=c[b];if(!d.isGrouper){return d}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(a){this.sortBy(a)},_sort:function(l,b,k){var j=this,e,f,d=String(b).toUpperCase()=="DESC"?-1:1,h=[],m=j.keys,g=j.items,a;k=k||function(i,c){return i-c};for(e=0,f=g.length;e<f;e++){h[h.length]={key:m[e],value:g[e],index:e}}Ext.Array.sort(h,function(i,c){return k(i[l],c[l])*d||(i.index<c.index?-1:1)});for(e=0,f=h.length;e<f;e++){a=h[e];g[e]=a.value;m[e]=a.key;j.indexMap[a.key]=e}j.generation++;j.indexGeneration=j.generation;j.fireEvent("sort",j)},sortBy:function(b){var h=this,a=h.items,g,f=h.keys,d,e=a.length,c;for(c=0;c<e;c++){a[c].$extCollectionIndex=c}Ext.Array.sort(a,function(j,i){return b(j,i)||(j.$extCollectionIndex<i.$extCollectionIndex?-1:1)});for(c=0;c<e;c++){g=a[c];d=h.getKey(g);f[c]=d;h.indexMap[d]=c;delete a.$extCollectionIndex}h.generation++;h.indexGeneration=h.generation;h.fireEvent("sort",h,a,f)},findInsertionIndex:function(e,d){var f=this,b=f.items,h=0,a=b.length-1,c,g;if(!d){d=f.generateComparator()}while(h<=a){c=(h+a)>>1;g=d(e,b[c]);if(g>=0){h=c+1}else{if(g<0){a=c-1}}}return h},reorder:function(a){Ext.util.AbstractMixedCollection.prototype.reorder.call(this,a);this.fireEvent("sort",this)},sortByKey:function(a,b){this._sort("key",a,b||function(d,c){var f=String(d).toUpperCase(),e=String(c).toUpperCase();return f>e?1:(f<e?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(a){var b=this;if(typeof a=="number"){b.interval=a}else{if(a){Ext.apply(b,a)}}b.tasks=[];b.timerFn=Ext.Function.bind(b.onTick,b)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(a){var c=this,b=Ext.Date.now();if(!a.pending){c.tasks.push(a);a.pending=true}a.stopped=false;a.taskStartTime=b;a.taskRunTime=a.fireOnStart!==false?0:a.taskStartTime;a.taskRunCount=0;if(!c.firing){if(a.fireOnStart!==false){c.startTimer(0,b)}else{c.startTimer(a.interval,b)}}return a},stop:function(a){if(!a.stopped){a.stopped=true;if(a.onStop){a.onStop.call(a.scope||a,a)}}return a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var m=this,f=m.tasks,a=Ext.Date.now(),n=1e+99,k=f.length,d=Ext.GlobalEvents,c,o,h,b,e,g,p;m.timerId=null;m.firing=true;for(h=0;h<k||h<(k=f.length);++h){b=f[h];if(!(g=b.stopped)){c=b.taskRunTime+b.interval;if(c<=a){e=1;if(b.hasOwnProperty("fireIdleEvent")){p=b.fireIdleEvent}else{p=m.fireIdleEvent}try{e=b.run.apply(b.scope||b,b.args||[++b.taskRunCount])}catch(j){try{if(b.onError){e=b.onError.call(b.scope||b,b,j)}}catch(l){}}b.taskRunTime=a;if(e===false||b.taskRunCount===b.repeat){m.stop(b);g=true}else{g=b.stopped;c=a+b.interval}}if(!g&&b.duration&&b.duration<=(a-b.taskStartTime)){m.stop(b);g=true}}if(g){b.pending=false;if(!o){o=f.slice(0,h)}}else{if(o){o.push(b)}if(n>c){n=c}}}if(o){m.tasks=o}m.firing=false;if(m.tasks.length){m.startTimer(n-a,Ext.Date.now())}if(p!==false&&d.hasListeners.idle){d.fireEvent("idle")}},startTimer:function(e,c){var d=this,b=c+e,a=d.timerId;if(a&&d.nextExpires-b>d.interval){clearTimeout(a);a=null}if(!a){if(e<d.interval){e=d.interval}d.timerId=Ext.defer(d.timerFn,e);d.nextExpires=b}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(c){Ext.apply(this,c)},restart:function(c){if(c!==undefined){this.interval=c}this.manager.start(this)},start:function(c){if(this.stopped){this.restart(c)}},stop:function(){this.manager.stop(this)}});a=b.Task.prototype;a.destroy=a.stop}));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(b,a,c){if(c===undefined){if(a==="x"){c=b.getX()}else{if(a==="y"){c=b.getY()}else{if(a==="scrollTop"){c=b.getScroll().top}else{if(a==="scrollLeft"){c=b.getScroll().left}else{if(a==="height"){c=b.getHeight()}else{if(a==="width"){c=b.getWidth()}else{c=b.getStyle(a)}}}}}}}return c},getAttr:function(a,c){var b=this.target;return[[b,this.getElVal(b,a,c)]]},setAttr:function(h){var f=h.length,d,a,g,e,c,b;for(e=0;e<f;e++){d=h[e].attrs;for(a in d){if(d.hasOwnProperty(a)){b=d[a].length;for(c=0;c<b;c++){g=d[a][c];this.setElVal(g[0],a,g[1])}}}}},setElVal:function(b,a,c){if(a==="x"){b.setX(c)}else{if(a==="y"){b.setY(c)}else{if(a==="scrollTop"){b.scrollTo("top",c)}else{if(a==="scrollLeft"){b.scrollTo("left",c)}else{if(a==="width"){b.setWidth(c)}else{if(a==="height"){b.setHeight(c)}else{b.setStyle(a,c)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(n,e){var r={attrs:[],duration:[],easing:[]},l=n.length,m=function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},p={single:true},f,q,h,k,c,b,g,d,a;for(g=0;g<l;g++){q=n[g];c=q.duration;k=q.easing;q=q.attrs;for(h in q){if(Ext.Array.indexOf(r.attrs,h)==-1){r.attrs.push(h.replace(/[A-Z]/g,function(i){return"-"+i.toLowerCase()}));r.duration.push(c+"ms");r.easing.push(k)}}}f=r.attrs.join(",");c=r.duration.join(",");k=r.easing.join(", ");for(g=0;g<l;g++){q=n[g].attrs;for(h in q){a=q[h].length;for(d=0;d<a;d++){b=q[h][d];b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",e?"":f);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",e?"":c);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",e?"":k);b[0].setStyle(h,b[1]);if(e){b=b[0].dom.offsetWidth}else{b[0].on(Ext.supports.CSS3TransitionEnd,m,b[0],p)}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-");Ext.fx.target.Element.prototype.constructor.call(this,a)},getAttr:function(a,h){var b=[],g=this.target,f=g.elements,e=f.length,c,d;for(c=0;c<e;c++){d=f[c];if(d){d=g.getElement(d);b.push([d,this.getElVal(d,a,h)])}}return b},setAttr:function(m){var h=this.target,l=m.length,b=h.elements,p=b.length,n,d,o,g,c,f,e,a;for(f=0;f<l;f++){o=m[f].attrs;for(g in o){if(o.hasOwnProperty(g)){a=o[g].length;for(e=0;e<a;e++){n=o[g][e][1];for(d=0;d<p;++d){c=b[d];if(c){c=h.getElement(c);this.setElVal(c,g,n)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(b,a){var c;switch(a){case"rotate":case"rotation":c=b.attr.rotation;return{x:c.x||0,y:c.y||0,degrees:c.degrees||0};case"scale":case"scaling":c=b.attr.scaling;return{x:c.x||1,y:c.y||1,cx:c.cx||0,cy:c.cy||0};case"translate":case"translation":c=b.attr.translation;return{x:c.x||0,y:c.y||0};default:return b.attr[a]}},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(l){var f=l.length,h=[],b,e,o,q,p,n,m,d,c,k,g,a;for(d=0;d<f;d++){b=l[d].attrs;for(e in b){o=b[e];a=o.length;for(c=0;c<a;c++){p=o[c][0];q=o[c][1];if(e==="translate"||e==="translation"){m={x:q.x,y:q.y}}else{if(e==="rotate"||e==="rotation"){k=q.x;if(isNaN(k)){k=null}g=q.y;if(isNaN(g)){g=null}m={degrees:q.degrees,x:k,y:g}}else{if(e==="scale"||e==="scaling"){k=q.x;if(isNaN(k)){k=null}g=q.y;if(isNaN(g)){g=null}m={x:k,y:g,cx:q.cx,cy:q.cy}}else{if(e==="width"||e==="height"||e==="x"||e==="y"){m=parseFloat(q)}else{m=q}}}}n=Ext.Array.indexOf(h,p);if(n===-1){h.push([p,{}]);n=h.length-1}h[n][1][e]=m}}}f=h.length;for(d=0;d<f;d++){h[d][0].setAttributes(h[d][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(a,g){var b=[],f=[].concat(this.target.items),e=f.length,d,c;for(d=0;d<e;d++){c=f[d];b.push([c,g!==undefined?g:this.getFromPrim(c,a)])}return b}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(r,f,b){var p=this,n=r.length,u,m,c,g,e,l,d,q,t,k,a={},s;for(g=0;g<n;g++){u=r[g].attrs;for(m in u){l=u[m].length;for(e=0;e<l;e++){c=u[m][e];s=a[p.setMethods[m]]||(a[p.setMethods[m]]={});s.target=c[0];s[m]=c[1]}}if(a.setPosition){c=a.setPosition;d=(c.left===undefined)?undefined:parseFloat(c.left);q=(c.top===undefined)?undefined:parseFloat(c.top);c.target.setPosition(d,q)}if(a.setPagePosition){c=a.setPagePosition;c.target.setPagePosition(c.x,c.y)}if(a.setSize){c=a.setSize;t=(c.width===undefined)?c.target.getWidth():parseFloat(c.width);k=(c.height===undefined)?c.target.getHeight():parseFloat(c.height);c.target.el.setSize(t,k);if(b||p.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(c.target.setSize,c.target,[t,k]),single:true})}}if(a.setOpacity){c=a.setOpacity;c.target.el.setStyle("opacity",c.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(a,c){var b=this.targets.get(a);if(b){b.fxDefaults=Ext.apply(b.fxDefaults||{},c)}},stopAnimation:function(b){var e=this,a=e.getFxQueue(b),d=a.length,c;while(d){c=a[d-1];if(c){c.end()}d--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(b){if(!b){return false}var c=this,a=c.fxQueue[b],d=c.targets.get(b);if(!d){return false}if(!a){c.fxQueue[b]=[];if(d.type!=="element"){d.target.on("destroy",function(){c.fxQueue[b]=[]})}}return c.fxQueue[b]},queueFx:function(d){var c=this,e=d.target,a,b;if(!e){return}a=c.getFxQueue(e.getId());b=a.length;if(b){if(d.concurrent){d.paused=false}else{a[b-1].on("afteranimate",function(){d.paused=false})}}else{d.paused=false}d.on("afteranimate",function(){Ext.Array.remove(a,d);if(a.length===0){c.targets.remove(d.target)}if(d.remove){if(e.type==="element"){var f=Ext.get(e.id);if(f){f.destroy()}}}},c,{single:true});a.push(d)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var a=this;a.items=new Ext.util.MixedCollection();a.targetArr={};a.mixins.queue.constructor.call(a);a.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(d){var b=this,c=!b.forceJS&&Ext.supports.Transitions,a;b.useCSS3=c;if(d){if(d.tagName||Ext.isString(d)||d.isFly){d=Ext.get(d);a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.dom){a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.isComposite){a=new Ext.fx.target["CompositeElement"+(c?"CSS":"")](d)}else{if(d.isSprite){a=new Ext.fx.target.Sprite(d)}else{if(d.isCompositeSprite){a=new Ext.fx.target.CompositeSprite(d)}else{if(d.isComponent){a=new Ext.fx.target.Component(d)}else{if(d.isAnimTarget){return d}else{return null}}}}}}}b.targets.add(a);return a}else{return null}},addAnim:function(d){var c=this,b=c.items,a=c.task;b.add(d.id,d);if(!a&&b.length){a=c.task={run:c.runner,interval:c.interval,scope:c};c.taskRunner.start(a)}},removeAnim:function(d){var c=this,b=c.items,a=c.task;b.removeAtKey(d.id);if(a&&!b.length){c.taskRunner.stop(a);delete c.task}},runner:function(){var d=this,b=d.items.getRange(),c=0,a=b.length,e;d.targetArr={};d.timestamp=new Date();for(;c<a;c++){e=b[c];if(e.isReady()){d.startAnim(e)}}for(c=0;c<a;c++){e=b[c];if(e.isRunning()){d.runAnim(e)}}d.applyPendingAttrs();d.targetArr=null},startAnim:function(a){a.start(this.timestamp)},runAnim:function(e,a){if(!e){return}var d=this,g=d.useCSS3&&e.target.type==="element",b=d.timestamp-e.startTime,c=(b>=e.duration),f,h;if(a){b=e.duration;c=true}f=this.collectTargetData(e,b,g,c);if(g){e.target.setAttr(f.anims[e.id].attributes,true);d.collectTargetData(e,e.duration,g,c);e.paused=true;f=e.target.target;if(e.target.isComposite){f=e.target.target.last()}h={};h[Ext.supports.CSS3TransitionEnd]=e.lastFrame;h.scope=e;h.single=true;f.on(h)}return f},jumpToEnd:function(c){var b=this,d,a;if(!b.targetArr){b.targetArr={};a=true}d=b.runAnim(c,true);b.applyAnimAttrs(d,d.anims[c.id]);if(a){b.targetArr=null}},collectTargetData:function(c,a,e,f){var b=c.target.getId(),d=this.targetArr[b];if(!d){d=this.targetArr[b]={id:b,el:c.target,anims:{}}}d.anims[c.id]={id:c.id,anim:c,elapsed:a,isLastFrame:f,attributes:[{duration:c.duration,easing:(e&&c.reverse)?c.easingFn.reverse().toCSS3():c.easing,attrs:c.runAnim(a)}]};return d},applyAnimAttrs:function(c,a){var b=a.anim;if(a.attributes&&b.isRunning()){c.el.setAttr(a.attributes,false,a.isLastFrame);if(a.isLastFrame){b.lastFrame()}}},applyPendingAttrs:function(){var e=this.targetArr,f,c,b,d,a;for(c in e){if(e.hasOwnProperty(c)){f=e[c];for(a in f.anims){if(f.anims.hasOwnProperty(a)){b=f.anims[a];d=b.anim;if(b.attributes&&d.isRunning()){f.el.setAttr(b.attributes,false,b.isLastFrame);if(b.isLastFrame){d.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.mixins.observable.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(d,c){return d.pct-c.pct},createTimeline:function(d){var g=this,k=[],h=g.to||{},b=g.duration,l,a,c,f,j,e;for(j in d){if(d.hasOwnProperty(j)&&g.animKeyFramesRE.test(j)){e={attrs:Ext.apply(d[j],h)};if(j==="from"){j=0}else{if(j==="to"){j=100}}e.pct=parseInt(j,10);k.push(e)}}Ext.Array.sort(k,g.sorter);f=k.length;for(c=0;c<f;c++){l=(k[c-1])?b*(k[c-1].pct/100):0;a=b*(k[c].pct/100);g.timeline.push({duration:a-l,attrs:k[c].attrs})}},applyAnimator:function(d){var g=this,h=[],k=g.timeline,f=k.length,b,e,a,j,c;if(g.fireEvent("beforeanimate",g)!==false){for(c=0;c<f;c++){b=k[c];j=b.attrs;e=j.easing||g.easing;a=j.damper||g.damper;delete j.easing;delete j.damper;b=new Ext.fx.Anim({target:d,easing:e,damper:a,duration:b.duration,paused:true,to:j});h.push(b)}g.animations=h;g.target=b.target;for(c=0;c<f-1;c++){b=h[c];b.nextAnim=h[c+1];b.on("afteranimate",function(){this.nextAnim.paused=false});b.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},g)}h[f-1].on("afteranimate",function(){this.lastFrame()},g)}},start:function(d){var e=this,c=e.delay,b=e.delayStart,a;if(c){if(!b){e.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(e.fireEvent("beforeanimate",e)!==false){e.startTime=d;e.running=true;e.animations[e.keyframeStep].paused=false}},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){c.startTime=new Date();c.currentIteration=b;c.keyframeStep=0;c.applyAnimator(c.target);c.animations[c.keyframeStep].paused=false}else{c.currentIteration=0;c.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(n,d,b,m,l,h){var i=3*d,k=3*(m-d)-i,a=1-i-k,g=3*b,j=3*(l-b)-g,o=1-g-j;function f(p){return((a*p+k)*p+i)*p}function c(p,r){var q=e(p,r);return((o*q+j)*q+g)*q}function e(p,w){var v,u,s,q,t,r;for(s=p,r=0;r<8;r++){q=f(s)-p;if(Math.abs(q)<w){return s}t=(3*a*s+2*k)*s+i;if(Math.abs(t)<0.000001){break}s=s-q/t}v=0;u=1;s=p;if(s<v){return v}if(s>u){return u}while(v<u){q=f(s);if(Math.abs(q-p)<w){return s}if(p>q){v=s}else{u=s}s=(u-v)/2+v}return s}return c(n,1/(200*h))},cubicBezier:function(b,e,a,c){var d=function(f){return Ext.fx.CubicBezier.cubicBezierAtTime(f,b,e,a,c,1)};d.toCSS3=function(){return"cubic-bezier("+[b,e,a,c].join(",")+")"};d.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-a,1-c,1-b,1-e)};return d}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,function(){var e=Math,g=e.PI,d=e.pow,b=e.sin,f=e.sqrt,a=e.abs,c=1.70158;return{singleton:true,linear:Ext.identityFn,ease:function(p){var k=0.07813-p/2,j=f(0.0066+k*k),h=j-k,o=d(a(h),1/3)*(h<0?-1:1),m=-j-k,l=d(a(m),1/3)*(m<0?-1:1),i=o+l+0.25;return d(1-i,2)*3*i*0.1+(1-i)*3*i*i+i*i*i},easeIn:function(h){return d(h,1.7)},easeOut:function(h){return d(h,0.48)},easeInOut:function(p){var k=0.48-p/1.04,j=f(0.1734+k*k),h=j-k,o=d(a(h),1/3)*(h<0?-1:1),m=-j-k,l=d(a(m),1/3)*(m<0?-1:1),i=o+l+0.5;return(1-i)*3*i*i+i*i*i},backIn:function(h){return h*h*((c+1)*h-c)},backOut:function(h){h=h-1;return h*h*((c+1)*h+c)+1},elasticIn:function(j){if(j===0||j===1){return j}var i=0.3,h=i/4;return d(2,-10*j)*b((j-h)*(2*g)/i)+1},elasticOut:function(h){return 1-Ext.fx.Easing.elasticIn(1-h)},bounceIn:function(h){return 1-Ext.fx.Easing.bounceOut(1-h)},bounceOut:function(k){var i=7.5625,j=2.75,h;if(k<(1/j)){h=i*k*k}else{if(k<(2/j)){k-=(1.5/j);h=i*k*k+0.75}else{if(k<(2.5/j)){k-=(2.25/j);h=i*k*k+0.9375}else{k-=(2.625/j);h=i*k*k+0.984375}}}return h}}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(b){var c=b.self,a=c.prototype;c.addMembers({"back-in":a.backIn,"back-out":a.backOut,"ease-in":a.easeIn,"ease-out":a.easeOut,"elastic-in":a.elasticIn,"elastic-out":a.elasticOut,"bounce-in":a.bounceIn,"bounce-out":a.bounceOut,"ease-in-out":a.easeInOut})}));(Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){c=b.pathClone(a)}if(!c.length){String(a).replace(b.pathCommandRE,function(f,e,i){var h=[],g=e.toLowerCase();i.replace(b.pathValuesRE,function(k,j){if(j){h.push(+j)}});if(g=="m"&&h.length>2){c.push([e].concat(Ext.Array.splice(h,0,2)));g="l";e=(e=="m")?"l":"L"}while(h.length>=d[g]){c.push([e].concat(Ext.Array.splice(h,0,d[g])));if(!d[g]){break}}})}c.toString=b.path2string;return c},pathClone:function(f){var c=[],a,e,b,d;if(!this.is(f,"array")||!this.is(f&&f[0],"array")){f=this.parsePathString(f)}for(b=0,d=f.length;b<d;b++){c[b]=[];for(a=0,e=f[b].length;a<e;a++){c[b][a]=f[b][a]}}c.toString=this.path2string;return c},pathToAbsolute:function(c){if(!this.is(c,"array")||!this.is(c&&c[0],"array")){c=this.parsePathString(c)}var h=[],l=0,k=0,n=0,m=0,f=0,g=c.length,b,d,e,a;if(g&&c[0][0]=="M"){l=+c[0][1];k=+c[0][2];n=l;m=k;f++;h[0]=["M",l,k]}for(;f<g;f++){b=h[f]=[];d=c[f];if(d[0]!=d[0].toUpperCase()){b[0]=d[0].toUpperCase();switch(b[0]){case"A":b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=+(d[6]+l);b[7]=+(d[7]+k);break;case"V":b[1]=+d[1]+k;break;case"H":b[1]=+d[1]+l;break;case"M":n=+d[1]+l;m=+d[2]+k;default:e=1;a=d.length;for(;e<a;e++){b[e]=+d[e]+((e%2)?l:k)}}}else{e=0;a=d.length;for(;e<a;e++){h[f][e]=d[e]}}switch(b[0]){case"Z":l=n;k=m;break;case"H":l=b[1];break;case"V":k=b[1];break;case"M":d=h[f];a=d.length;n=d[a-2];m=d[a-1];default:d=h[f];a=d.length;l=d[a-2];k=d[a-1]}}h.toString=this.path2string;return h},interpolatePaths:function(q,k){var h=this,d=h.pathToAbsolute(q),l=h.pathToAbsolute(k),m={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(p,r){if(p[r].length>7){p[r].shift();var s=p[r];while(s.length){Ext.Array.splice(p,r++,0,["C"].concat(Ext.Array.splice(s,0,6)))}Ext.Array.erase(p,r,1);n=Math.max(d.length,l.length||0)}},c=function(u,t,r,p,s){if(u&&t&&u[s][0]=="M"&&t[s][0]!="M"){Ext.Array.splice(t,s,0,["M",p.x,p.y]);r.bx=0;r.by=0;r.x=u[s][1];r.y=u[s][2];n=Math.max(d.length,l.length||0)}},g,n,f,o,e,j;for(g=0,n=Math.max(d.length,l.length||0);g<n;g++){d[g]=h.command2curve(d[g],m);b(d,g);(l[g]=h.command2curve(l[g],a));b(l,g);c(d,l,m,a,g);c(l,d,a,m,g);f=d[g];o=l[g];e=f.length;j=o.length;m.x=f[e-2];m.y=f[e-1];m.bx=parseFloat(f[e-4])||m.x;m.by=parseFloat(f[e-3])||m.y;a.bx=(parseFloat(o[j-4])||a.x);a.by=(parseFloat(o[j-3])||a.y);a.x=o[j-2];a.y=o[j-1]}return[d,l]},command2curve:function(c,b){var a=this;if(!c){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(c[0]!="T"&&c[0]!="Q"){b.qx=b.qy=null}switch(c[0]){case"M":b.X=c[1];b.Y=c[2];break;case"A":c=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(c.slice(1))));break;case"S":c=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(c.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));c=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,c[1],c[2]));break;case"Q":b.qx=c[1];b.qy=c[2];c=["C"].concat(a.quadratic2curve(b.x,b.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"].concat(b.x,b.y,c[1],c[2],c[1],c[2]);break;case"H":c=["C"].concat(b.x,b.y,c[1],b.y,c[1],b.y);break;case"V":c=["C"].concat(b.x,b.y,b.x,c[1],b.x,c[1]);break;case"Z":c=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return c},quadratic2curve:function(b,d,g,e,a,c){var f=1/3,h=2/3;return[f*b+h*g,f*d+h*e,f*a+h*g,f*c+h*e,a,c]},rotate:function(b,g,a){var d=Math.cos(a),c=Math.sin(a),f=b*d-g*c,e=b*c+g*d;return{x:f,y:e}},arc2curve:function(r,ae,G,E,w,m,f,q,ad,z){var u=this,d=Math.PI,v=u.radian,D=d*120/180,b=v*(+w||0),L=[],I=Math,S=I.cos,a=I.sin,U=I.sqrt,s=I.abs,n=I.asin,H,N,M,Z,c,Q,T,B,A,l,j,p,g,ac,e,ab,O,R,P,aa,Y,X,V,K,W,J,C,F,o;if(!z){H=u.rotate(r,ae,-b);r=H.x;ae=H.y;H=u.rotate(q,ad,-b);q=H.x;ad=H.y;N=(r-q)/2;M=(ae-ad)/2;Z=(N*N)/(G*G)+(M*M)/(E*E);if(Z>1){Z=U(Z);G=Z*G;E=Z*E}c=G*G;Q=E*E;T=(m==f?-1:1)*U(s((c*Q-c*M*M-Q*N*N)/(c*M*M+Q*N*N)));B=T*G*M/E+(r+q)/2;A=T*-E*N/G+(ae+ad)/2;l=n(((ae-A)/E).toFixed(7));j=n(((ad-A)/E).toFixed(7));l=r<B?d-l:l;j=q<B?d-j:j;if(l<0){l=d*2+l}if(j<0){j=d*2+j}if(f&&l>j){l=l-d*2}if(!f&&j>l){j=j-d*2}}else{l=z[0];j=z[1];B=z[2];A=z[3]}p=j-l;if(s(p)>D){C=j;F=q;o=ad;j=l+D*(f&&j>l?1:-1);q=B+G*S(j);ad=A+E*a(j);L=u.arc2curve(q,ad,G,E,w,0,f,F,o,[j,C,B,A])}p=j-l;g=S(l);ac=a(l);e=S(j);ab=a(j);O=I.tan(p/4);R=4/3*G*O;P=4/3*E*O;aa=[r,ae];Y=[r+R*ac,ae-P*g];X=[q+R*ab,ad-P*e];V=[q,ad];Y[0]=2*aa[0]-Y[0];Y[1]=2*aa[1]-Y[1];if(z){return[Y,X,V].concat(L)}else{L=[Y,X,V].concat(L).join().split(",");K=[];J=L.length;for(W=0;W<J;W++){K[W]=W%2?u.rotate(L[W-1],L[W],b).y:u.rotate(L[W],L[W+1],b).x}return K}}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(i,c,a,f,h){a=(typeof a=="number")?a:1;var g=this.unitRE,d=g.exec(i),b,e;if(d){i=d[1];e=d[2];if(!this.scrollRE.test(h)&&!e&&this.pixelDefaultsRE.test(h)){e="px"}}i=+i||0;d=g.exec(c);if(d){c=d[1];e=d[2]||e}c=+c||0;b=(f!=null)?f:i;return{from:i,delta:(c-b)*a,units:e}},get:function(n,b,a,m,h){var l=n.length,d=[],e,g,k,c,f;for(e=0;e<l;e++){if(m){g=m[e][1].from}if(Ext.isArray(n[e][1])&&Ext.isArray(b)){k=[];c=0;f=n[e][1].length;for(;c<f;c++){k.push(this.computeDelta(n[e][1][c],b[c],a,g,h))}d.push([n[e][0],k])}else{d.push([n[e][0],this.computeDelta(n[e][1],b,a,g,h)])}}return d},set:function(k,f){var g=k.length,c=[],d,a,h,e,b;for(d=0;d<g;d++){a=k[d][1];if(Ext.isArray(a)){h=[];b=0;e=a.length;for(;b<e;b++){h.push(a[b].from+a[b].delta*f+(a[b].units||0))}c.push([k[d][0],h])}else{c.push([k[d][0],a.from+a.delta*f+(a.units||0)])}}return c}},stringHandler:{computeDelta:function(e,b,d,c,a){return{from:e,delta:b}},get:function(j,b,a,h,f){var g=j.length,c=[],d,e;for(d=0;d<g;d++){c.push([j[d][0],this.computeDelta(j[d][1],b,a,e,f)])}return c},set:function(a,f){var d=a.length,b=[],c,e;for(c=0;c<d;c++){e=a[c][1];b.push([a[c][0],e.delta])}return b}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(e,a){a=(typeof a=="number")?a:1;var f=false,c=[this.hexRE,this.rgbRE,this.hex3RE],d=c.length,h,b,j,g;for(g=0;g<d;g++){j=c[g];b=(g%2===0)?16:10;h=j.exec(e);if(h&&h.length===4){if(g===2){h[1]+=h[1];h[2]+=h[2];h[3]+=h[3]}f={red:parseInt(h[1],b),green:parseInt(h[2],b),blue:parseInt(h[3],b)};break}}return f||e},computeDelta:function(g,a,e,c){g=this.parseColor(g);a=this.parseColor(a,e);var f=c?c:g,b=typeof f,d=typeof a;if(b==="string"||b==="undefined"||d==="string"||d==="undefined"){return a||f}return{from:g,delta:{red:Math.round((a.red-f.red)*e),green:Math.round((a.green-f.green)*e),blue:Math.round((a.blue-f.blue)*e)}}},get:function(h,a,f,d){var g=h.length,c=[],e,b;for(e=0;e<g;e++){if(d){b=d[e][1].from}c.push([h[e][0],this.computeDelta(h[e][1],a,f,b)])}return c},set:function(j,e){var f=j.length,c=[],d,b,a,g,h;for(d=0;d<f;d++){b=j[d][1];if(b){g=b.from;h=b.delta;b=(typeof b==="object"&&"red" in b)?"rgb("+b.red+", "+b.green+", "+b.blue+")":b;b=(typeof b==="object"&&b.length)?b[0]:b;if(typeof b==="undefined"){return[]}a=typeof b==="string"?b:"rgb("+[(g.red+Math.round(h.red*e))%256,(g.green+Math.round(h.green*e))%256,(g.blue+Math.round(h.blue*e))%256].join(",")+")";c.push([j[d][0],a])}}return c}},object:{interpolate:function(d,b){b=(typeof b==="number")?b:1;var a={},c;for(c in d){a[c]=parseFloat(d[c])*b}return a},computeDelta:function(g,a,c,b){g=this.interpolate(g);a=this.interpolate(a,c);var f=b?b:g,e={},d;for(d in a){e[d]=a[d]-f[d]}return{from:g,delta:e}},get:function(h,a,f,d){var g=h.length,c=[],e,b;for(e=0;e<g;e++){if(d){b=d[e][1].from}c.push([h[e][0],this.computeDelta(h[e][1],a,f,b)])}return c},set:function(k,f){var g=k.length,c=[],e={},d,h,j,b,a;for(d=0;d<g;d++){b=k[d][1];h=b.from;j=b.delta;for(a in h){e[a]=h[a]+j[a]*f}c.push([k[d][0],e])}return c}},path:{computeDelta:function(e,a,c,b){c=(typeof c==="number")?c:1;var d;e=+e||0;a=+a||0;d=(b!=null)?b:e;return{from:e,delta:(a-d)*c}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.fx.DrawPath.parsePathString(a)}return a},get:function(b,h,a,p){var c=this.forcePath(h),m=[],r=b.length,d,g,n,f,o,l,e,s,q;for(n=0;n<r;n++){q=this.forcePath(b[n][1]);f=Ext.fx.DrawPath.interpolatePaths(q,c);q=f[0];c=f[1];d=q.length;s=[];for(l=0;l<d;l++){f=[q[l][0]];g=q[l].length;for(e=1;e<g;e++){o=p&&p[0][1][l][e].from;f.push(this.computeDelta(q[l][e],c[l][e],a,o))}s.push(f)}m.push([b[n][0],s])}return m},set:function(o,m){var n=o.length,e=[],g,f,d,h,l,c,a,b;for(g=0;g<n;g++){c=o[g][1];h=[];a=c.length;for(f=0;f<a;f++){l=[c[f][0]];b=c[f].length;for(d=1;d<b;d++){l.push(c[f][d].from+c[f][d].delta*m)}h.push(l.join(","))}e.push([o[g][0],h.join(",")])}return e}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var b=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],c=b.length,a=0,d;for(;a<c;a++){d=b[a];this[d]=this.color}b=["cursor"];c=b.length;a=0;for(;a<c;a++){d=b[a];this[d]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(a){var b=this,c;a=a||{};if(a.keyframes){return new Ext.fx.Animator(a)}Ext.apply(b,a);if(b.from===undefined){b.from={}}b.propHandlers={};b.config=a;b.target=Ext.fx.Manager.createTarget(b.target);b.easingFn=Ext.fx.Easing[b.easing];b.target.dynamic=b.dynamic;if(!b.easingFn){b.easingFn=String(b.easing).match(b.bezierRE);if(b.easingFn&&b.easingFn.length===5){c=b.easingFn;b.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}b.id=Ext.id(null,"ext-anim-");b.mixins.observable.constructor.call(b);Ext.fx.Manager.addAnim(b);if(a.autoEnd){b.running=true;b.jumpToEnd()}},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var e=this,g=e.from,h=e.to,f=e.initialFrom||{},c={},a,b,i,d;for(d in h){if(h.hasOwnProperty(d)){a=e.target.getAttr(d,g[d]);b=h[d];if(!Ext.fx.PropertyHandler[d]){if(Ext.isObject(b)){i=e.propHandlers[d]=Ext.fx.PropertyHandler.object}else{i=e.propHandlers[d]=Ext.fx.PropertyHandler.defaultHandler}}else{i=e.propHandlers[d]=Ext.fx.PropertyHandler[d]}c[d]=i.get(a,b,e.damper,f[d],d)}}e.currentAttrs=c},start:function(d){var e=this,c=e.delay,b=e.delayStart,a;if(c){if(!b){e.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(e.fireEvent("beforeanimate",e)!==false){e.startTime=d;if(!e.paused&&!e.currentAttrs){e.initAttrs()}e.running=true;e.frameCount=0}},jumpToEnd:function(){var a=this;if(!a.endWasCalled){if(!a.currentAttrs){a.initAttrs()}Ext.fx.Manager.jumpToEnd(a);a.end()}},runAnim:function(k){var h=this,j=h.currentAttrs,d=h.duration,c=h.easingFn,b=h.propHandlers,f={},g,i,e,a;if(k>=d){k=d;a=true}if(h.reverse){k=d-k}for(e in j){if(j.hasOwnProperty(e)){i=j[e];g=a?1:c(k/d);f[e]=b[e].set(i,g)}}h.frameCount++;return f},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){if(c.alternate){c.reverse=!c.reverse}c.startTime=new Date();c.currentIteration=b;c.paused=false}else{c.currentIteration=0;c.end();c.fireEvent("lastframe",c,c.startTime)}},endWasCalled:0,end:function(){var a=this;if(a.endWasCalled++){return}a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime);Ext.callback(a.callback,a.scope,[a,a.startTime]);if(a.remove){a.target.destroy()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:true,animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(new Ext.fx.Anim(b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},getAnimationProps:function(){var b=this,a=b.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0));(Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:true,constructor:function(a){this.dom=a;this.el=this},attach:function(b){var a=this;if(!b){return a.detach()}a.dom=b;if(!Ext.cache[b.id]){a.getData().isSynchronized=false}return a},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(a){var b={};a.cache=b;Ext.fly=function(h,d){var f=null,e=Ext.fly,c,g;d=d||(e.caller&&e.caller.$name)||"_global";h=Ext.getDom(h);if(h){c=h.nodeType;if(a.prototype.validNodeTypes[c]||(!c&&(h.window==h))){f=Ext.cache[h.id];if(!f||f.dom!==h){f=b[d]||(b[d]=new a());f.dom=h;g=f.getData(true);if(g){g.isSynchronized=false}}}}return f}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:true,isLite:true,statics:{importElementMethods:function(){var a=Ext.dom.Element,b=this.prototype;Ext.Object.each(a.prototype,function(c,d){if(typeof d==="function"&&!b[c]){b[c]=function(){return this.invoke(c,arguments)}}})}},constructor:function(b,a){if(a){this.elements=b||[]}else{this.elements=[];this.add(b)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(c,a){var e=this.elements,b,d;if(!c){return this}if(typeof c=="string"){c=Ext.fly(a||document).query(c)}else{if(c.isComposite){c=c.elements}else{if(!Ext.isIterable(c)){c=[c]}}}for(b=0,d=c.length;b<d;++b){e.push(this.transformElement(c[b]))}return this},invoke:function(e,b){var g=this,h=g.elements,f=h.length,a,d,c;if(c!==0){a=(g.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(c=0;c<f;c++){d=h[c];if(d){a[e].apply(g.getElement(d),b)}}}return g},item:function(b){var c=this.elements[b],a=null;if(c){a=this.getElement(c)}return a},slice:function(b,a){return Ext.Array.slice(this.elements,b,a)},each:function(f,d){var g=this,c=g.elements,a=c.length,b,h;for(b=0;b<a;b++){h=c[b];if(h){h=this.getElement(h);if(f.call(d||h,h,g,b)===false){break}}}return g},fill:function(a){var b=this;b.elements=[];b.add(a);return b},insert:function(b,a){Ext.Array.insert(this.elements,b,a)},filter:function(b){var g=this,c=g.elements,f=c.length,d=[],e=0,h=typeof b=="function",j,a;for(;e<f;e++){a=c[e];j=false;if(a){a=g.getElement(a);if(h){j=b.call(a,a,g,e)!==false}else{j=a.is(b)}if(j){d.push(g.transformElement(a))}}}g.elements=d;return g},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(e,c,a){var b=!isNaN(e)?e:this.indexOf(e),f;if(b>-1){c=Ext.getDom(c);if(a){f=this.elements[b];f.parentNode.insertBefore(c,f);Ext.removeNode(f)}Ext.Array.splice(this.elements,b,1,c)}return this},clear:function(d){var c=this,b=c.elements,a=b.length-1;if(d){for(;a>=0;a--){Ext.removeNode(b[a])}}this.elements=[]},addElements:function(d,b){if(!d){return this}if(typeof d==="string"){d=Ext.dom.Element.selectorFunction(d,b)}var c=this.elements,a=d.length,f;for(f=0;f<a;f++){c.push(Ext.get(d[f]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(e,h){e=[].concat(e);var d=this,f=d.elements,c=e.length,g,b,a;for(a=0;a<c;a++){g=e[a];if((b=(f[g]||f[g=d.indexOf(g)]))){if(h){if(b.dom){b.destroy()}else{Ext.removeNode(b)}}Ext.Array.erase(f,g,1)}}return d},destroy:function(){return this.invoke("destroy",arguments);this.callParent()}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(b){var a=b.prototype;b.importElementMethods();a.on=a.addListener}));Ext.define("Ext.overrides.dom.Element",(function(){var i,k=window,D=document,L="hidden",p="isClipped",J="overflow",t="overflow-x",s="overflow-y",w="originalClip",B="height",e="width",f="visibility",a="display",F="none",N="offsets",c="clip",l="originalDisplay",G="visibilityMode",x="isVisible",j="x-hidden-offsets",o="x-hidden-clip",O=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),I=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,C=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,b=/\ssrc=([\'\"])(.*?)\1/i,n=/\S/,h=/\stype=([\'\"])(.*?)\1/i,z=/^-ms-/,A=/(-[a-z])/gi,H=function(P,Q){return Q.charAt(1).toUpperCase()},m="x-masked",y="x-masked-relative",u="x-mask-msg",r=/^body/i,q={},v=function(Q){var R=Q.getData(),P=R[G];if(P===undefined){R[G]=P=i.VISIBILITY}return P},M=D.createRange?D.createRange():null,E={INPUT:true,TEXTAREA:true};if(Ext.isIE8){var g=D.createElement("div"),K=[],d=Ext.Function.createBuffered(function(){var P=K.length,Q;for(Q=0;Q<P;Q++){g.appendChild(K[Q])}g.innerHTML="";K.length=0},10)}return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:false,_init:function(P){i=P;P.tabbableSelector+=",["+P.tabbableSavedCounterAttribute+"]"},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:true,IFRAME:true,EMBED:true,INPUT:true,OBJECT:true,SELECT:true,TEXTAREA:true,HTML:Ext.isIE?true:false},naturallyTabbableTags:{BUTTON:true,IFRAME:true,INPUT:true,SELECT:true,TEXTAREA:true,OBJECT:Ext.isIE8m?true:false},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",normalize:function(P){if(P==="float"){P=Ext.supports.Float?"cssFloat":"styleFloat"}return q[P]||(q[P]=P.replace(z,"ms-").replace(A,H))}},addClsOnClick:function(R,U,Q){var S=this,T=S.dom,P=Ext.isFunction(U);S.on("mousedown",function(){if(P&&U.call(Q||S,S)===false){return false}Ext.fly(T).addCls(R);var W=Ext.getDoc(),V=function(){Ext.fly(T).removeCls(R);W.removeListener("mouseup",V)};W.on("mouseup",V)});return S},addClsOnFocus:function(R,U,Q){var S=this,T=S.dom,P=Ext.isFunction(U);S.on("focus",function(){if(P&&U.call(Q||S,S)===false){return false}Ext.fly(T).addCls(R)});S.on("blur",function(){Ext.fly(T).removeCls(R)});return S},addClsOnOver:function(R,U,Q){var S=this,T=S.dom,P=Ext.isFunction(U);S.hover(function(){if(P&&U.call(Q||S,S)===false){return}Ext.fly(T).addCls(R)},function(){Ext.fly(T).removeCls(R)});return S},addKeyListener:function(Q,S,R){var P;if(typeof Q!=="object"||Ext.isArray(Q)){P={target:this,key:Q,fn:S,scope:R}}else{P={target:this,key:Q.key,shift:Q.shift,ctrl:Q.ctrl,alt:Q.alt,fn:S,scope:R}}return new Ext.util.KeyMap(P)},addKeyMap:function(P){return new Ext.util.KeyMap(Ext.apply({target:this},P))},afterAnimate:function(){var P=this.shadow;if(P&&!P.disabled&&!P.animate){P.show()}},anchorAnimX:function(P){var Q=(P==="l")?"right":"left";this.dom.style[Q]="0px"},anim:function(P){if(!Ext.isObject(P)){return(P)?{}:false}var Q=this,R=P.duration||Ext.fx.Anim.prototype.duration,T=P.easing||"ease",S;if(P.stopAnimation){Q.stopAnimation()}Ext.applyIf(P,Ext.fx.Manager.getFxDefaults(Q.id));Ext.fx.Manager.setFxDefaults(Q.id,{delay:0});S={target:Q.dom,remove:P.remove,alternate:P.alternate||false,duration:R,easing:T,callback:P.callback,listeners:P.listeners,iterations:P.iterations||1,scope:P.scope,block:P.block,concurrent:P.concurrent,delay:P.delay||0,paused:true,keyframes:P.keyframes,from:P.from||{},to:Ext.apply({},P),userConfig:P};Ext.apply(S.to,P.to);delete S.to.to;delete S.to.from;delete S.to.remove;delete S.to.alternate;delete S.to.keyframes;delete S.to.iterations;delete S.to.listeners;delete S.to.target;delete S.to.paused;delete S.to.callback;delete S.to.scope;delete S.to.duration;delete S.to.easing;delete S.to.concurrent;delete S.to.block;delete S.to.stopAnimation;delete S.to.delay;return S},animate:function(P){this.addAnimation(P);return this},addAnimation:function(R){var T=this,Q=T.dom.id||Ext.id(T.dom),S,U,P;if(!Ext.fx.Manager.hasFxBlock(Q)){if(R.listeners){S=R.listeners;delete R.listeners}if(R.internalListeners){R.listeners=R.internalListeners;delete R.internalListeners}P=R.autoEnd;delete R.autoEnd;U=new Ext.fx.Anim(T.anim(R));U.on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:T,single:true});if(S){U.on(S)}Ext.fx.Manager.queueFx(U);if(P){U.jumpToEnd()}}return U},beforeAnimate:function(){var P=this.shadow;if(P&&!P.disabled&&!P.animate){P.hide()}},boxWrap:function(P){P=P||"x-box";var Q=Ext.get(this.insertHtml("beforeBegin","<div class='"+P+"' role='presentation'>"+Ext.String.format(O,P)+"</div>"));Q.selectNode("."+P+"-mc").appendChild(this.dom);return Q},clean:function(Q){var S=this,U=S.dom,T=S.getData(),V=U.firstChild,R=-1,P;if(T.isCleaned&&Q!==true){return S}while(V){P=V.nextSibling;if(V.nodeType===3){if(!(n.test(V.nodeValue))){U.removeChild(V)}else{if(P&&P.nodeType===3){V.appendData(Ext.String.trim(P.data));U.removeChild(P);P=V.nextSibling;V.nodeIndex=++R}}}else{Ext.fly(V,"_clean").clean();V.nodeIndex=++R}V=P}T.isCleaned=true;return S},empty:M?function(){var P=this.dom;if(P.firstChild){M.setStartBefore(P.firstChild);M.setEndAfter(P.lastChild);M.deleteContents()}}:function(){var P=this.dom;while(P.lastChild){P.removeChild(P.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(P){P=P||"";return this.setStyle({left:P,right:P,top:P,bottom:P,"z-index":"",position:"static"})},createProxy:function(P,T,S){P=(typeof P==="object")?P:{tag:"div",role:"presentation",cls:P};var R=this,Q=T?Ext.DomHelper.append(T,P,true):Ext.DomHelper.insertBefore(R.dom,P,true);Q.setVisibilityMode(i.DISPLAY);Q.hide();if(S&&R.setBox&&R.getBox){Q.setBox(R.getBox())}return Q},clearOpacity:function(){return this.setOpacity("")},clip:function(){var Q=this,R=Q.getData(),P;if(!R[p]){R[p]=true;P=Q.getStyle([J,t,s]);R[w]={o:P[J],x:P[t],y:P[s]};Q.setStyle(J,L);Q.setStyle(t,L);Q.setStyle(s,L)}return Q},destroy:function(){var R=this,T=R.dom,S=R.getData(),Q,P;if(T&&R.isAnimate){R.stopAnimation()}arguments.callee.$previous.call(this);if(T&&Ext.isIE8&&(T.window!=T)&&(T.nodeType!==9)&&(T.tagName!=="BODY")&&(T.tagName!=="HTML")){K[K.length]=T;d()}if(S){Q=S.maskEl;P=S.maskMsg;if(Q){Q.destroy()}if(P){P.destroy()}}},enableDisplayMode:function(Q){var P=this;P.setVisibilityMode(i.DISPLAY);if(Q!==undefined){P.getData()[l]=Q}return P},fadeIn:function(R){var P=this,Q=P.dom;P.animate(Ext.apply({},R,{opacity:1,internalListeners:{beforeanimate:function(T){var S=Ext.fly(Q,"_anim");if(S.isStyle("display","none")){S.setDisplayed("")}else{S.show()}}}}));return this},fadeOut:function(R){var P=this,Q=P.dom;R=Ext.apply({opacity:0,internalListeners:{afteranimate:function(T){if(Q&&T.to.opacity===0){var S=Ext.fly(Q,"_anim");if(R.useDisplay){S.setDisplayed(false)}else{S.hide()}}}}},R);P.animate(R);return P},fixDisplay:function(){var P=this;if(P.isStyle(a,F)){P.setStyle(f,L);P.setStyle(a,P._getDisplay());if(P.isStyle(a,F)){P.setStyle(a,"block")}}},frame:function(P,S,T){var R=this,U=R.dom,Q;P=P||"#C3DAF9";S=S||1;T=T||{};Q=function(){var Y=Ext.fly(U,"_anim"),X=this,Z,W,V;Y.show();Z=Y.getBox();W=Ext.getBody().createChild({role:"presentation",id:Y.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+P}});V=new Ext.fx.Anim({target:W,duration:T.duration||1000,iterations:S,from:{top:Z.y,left:Z.x,borderWidth:0,opacity:1,height:Z.height,width:Z.width},to:{top:Z.y-20,left:Z.x-20,borderWidth:10,opacity:0,height:Z.height+40,width:Z.width+40}});V.on("afteranimate",function(){W.destroy();X.end()})};R.animate({duration:(Math.max(T.duration,500)*2)||2000,listeners:{beforeanimate:{fn:Q}},callback:T.callback,scope:T.scope});return R},getColor:function(Q,R,W){var T=this.getStyle(Q),S=W||W===""?W:"#",V,P,U=0;if(!T||(/transparent|inherit/.test(T))){return R}if(/^r/.test(T)){T=T.slice(4,T.length-1).split(",");P=T.length;for(;U<P;U++){V=parseInt(T[U],10);S+=(V<16?"0":"")+V.toString(16)}}else{T=T.replace("#","");S+=T.length===3?T.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):T}return(S.length>5?S.toLowerCase():R)},getLoader:function(){var Q=this,R=Q.getData(),P=R.loader;if(!P){R.loader=P=new Ext.ElementLoader({target:Q})}return P},getPositioning:function(Q){var P=this.getStyle(["left","top","position","z-index"]),R=this.dom;if(Q){if(P.left==="auto"){P.left=R.offsetLeft+"px"}if(P.top==="auto"){P.top=R.offsetTop+"px"}}return P},ghost:function(P,S){var R=this,T=R.dom,Q;P=P||"b";Q=function(){var X=Ext.fly(T,"_anim"),W=X.getWidth(),V=X.getHeight(),Y=X.getXY(),U=X.getPositioning(),Z={opacity:0};switch(P){case"t":Z.y=Y[1]-V;break;case"l":Z.x=Y[0]-W;break;case"r":Z.x=Y[0]+W;break;case"b":Z.y=Y[1]+V;break;case"tl":Z.x=Y[0]-W;Z.y=Y[1]-V;break;case"bl":Z.x=Y[0]-W;Z.y=Y[1]+V;break;case"br":Z.x=Y[0]+W;Z.y=Y[1]+V;break;case"tr":Z.x=Y[0]+W;Z.y=Y[1]-V;break}this.to=Z;this.on("afteranimate",function(){var aa=Ext.fly(T,"_anim");if(aa){aa.hide();aa.clearOpacity();aa.setPositioning(U)}})};R.animate(Ext.applyIf(S||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:Q}}));return R},hide:function(P){if(typeof P==="string"){this.setVisible(false,P);return this}this.setVisible(false,this.anim(P));return this},highlight:function(S,Q){var W=this,T=W.dom,Y={},V,Z,U,R,P,X;Q=Q||{};R=Q.listeners||{};U=Q.attr||"backgroundColor";Y[U]=S||"ffff9c";if(!Q.to){Z={};Z[U]=Q.endColor||W.getColor(U,"ffffff","")}else{Z=Q.to}Q.listeners=Ext.apply(Ext.apply({},R),{beforeanimate:function(){V=T.style[U];var aa=Ext.fly(T,"_anim");aa.clearOpacity();aa.show();P=R.beforeanimate;if(P){X=P.fn||P;return X.apply(P.scope||R.scope||k,arguments)}},afteranimate:function(){if(T){T.style[U]=V}P=R.afteranimate;if(P){X=P.fn||P;X.apply(P.scope||R.scope||k,arguments)}}});W.animate(Ext.apply({},Q,{duration:1000,easing:"ease-in",from:Y,to:Z}));return W},hover:function(Q,P,S,R){var T=this;T.on("mouseenter",Q,S||T.dom,R);T.on("mouseleave",P,S||T.dom,R);return T},initDD:function(R,Q,S){var P=new Ext.dd.DD(Ext.id(this.dom),R,Q);return Ext.apply(P,S)},initDDProxy:function(R,Q,S){var P=new Ext.dd.DDProxy(Ext.id(this.dom),R,Q);return Ext.apply(P,S)},initDDTarget:function(R,Q,S){var P=new Ext.dd.DDTarget(Ext.id(this.dom),R,Q);return Ext.apply(P,S)},isFocusable:function(){var Q=this.dom,P=false,R;if(Q&&!Q.disabled){R=Q.nodeName;P=!!Ext.Element.naturallyFocusableTags[R]||((R==="A"||R==="LINK")&&!!Q.href)||Q.getAttribute("tabIndex")!=null||Q.contentEditable==="true";if(Ext.isIE8&&R==="INPUT"&&Q.type==="hidden"){P=false}P=P&&this.isVisible(true)}return P},isInputField:function(){var Q=this.dom,P=Q.contentEditable;if((E[Q.tagName]&&Q.type!=="button")||(P===""||P==="true")){return true}return false},isTabbable:function(R){var S=this.dom,U=false,T,Q,P;if(S&&!S.disabled){T=S.nodeName;P=S.getAttribute("tabIndex");Q=P!=null;P-=0;if(T==="A"||T==="LINK"){if(S.href){U=Q&&P<0?false:true}else{if(S.contentEditable==="true"){U=!Q||(Q&&P>=0)?true:false}else{U=Q&&P>=0?true:false}}}else{if(S.contentEditable==="true"||Ext.Element.naturallyTabbableTags[T]){U=Q&&P<0?false:true}else{if(Q&&P>=0){U=true}}}if(Ext.isIE8&&T==="INPUT"&&S.type==="hidden"){U=false}U=U&&(R||((!this.component||this.component.isVisible(true))&&this.isVisible(true)))}return U},isMasked:function(P){var T=this,V=T.getData(),S=V.maskEl,Q=V.maskMsg,U=false,R;if(S&&S.isVisible()){if(Q){Q.center(T)}U=true}else{if(P){R=T.findParentNode();if(R){return Ext.fly(R).isMasked(P)}}}return U},load:function(P){this.getLoader().load(P);return this},mask:function(W,U,P){var S=this,V=S.dom,T=S.getData(),R=T.maskEl,Q;if(!(r.test(V.tagName)&&S.getStyle("position")==="static")){S.addCls(y)}if(R){R.destroy()}R=Ext.DomHelper.append(V,{role:"presentation",cls:"x-mask x-border-box",children:{role:"presentation",cls:U?u+" "+U:u,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:W||""}}}},true);Q=Ext.get(R.dom.firstChild);T.maskEl=R;S.addCls(m);R.setDisplayed(true);if(typeof W==="string"){Q.setDisplayed(true);Q.center(S)}else{Q.setDisplayed(false)}if(V===D.body){R.addCls("x-mask-fixed")}S.saveTabbableState({skipSelf:V===D.body});if(Ext.isIE9m&&V!==D.body&&S.isStyle("height","auto")){R.setSize(undefined,P||S.getHeight())}return R},monitorMouseLeave:function(P,S,R){var T=this,U,Q={mouseleave:function(V){if(Ext.isIE9m){V.enableIEAsync()}U=Ext.defer(S,P,R||T,[V])},mouseenter:function(){clearTimeout(U)}};T.on(Q);return Q},puff:function(T){var S=this,U=S.dom,Q,R=S.getBox(),P=S.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],true);T=Ext.applyIf(T||{},{easing:"ease-out",duration:500,useDisplay:false});Q=function(){var V=Ext.fly(U,"_anim");V.clearOpacity();V.show();this.to={width:R.width*2,height:R.height*2,x:R.x-(R.width/2),y:R.y-(R.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var W=Ext.fly(U,"_anim");if(W){if(T.useDisplay){W.setDisplayed(false)}else{W.hide()}W.setStyle(P);Ext.callback(T.callback,T.scope)}})};S.animate({duration:T.duration,easing:T.easing,listeners:{beforeanimate:{fn:Q}}});return S},selectable:function(){var P=this;P.dom.unselectable="";P.removeCls(i.unselectableCls);P.addCls(i.selectableCls);return P},setCapture:function(){var P=this.dom;if(Ext.isIE9m&&P.setCapture){P.setCapture()}},setHeight:function(P,Q){var R=this;if(!Q||!R.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(Q)){Q={}}R.animate(Ext.applyIf({to:{height:P}},Q))}return R},setHorizontal:function(){var Q=this,P=Q.verticalCls;delete Q.vertical;if(P){delete Q.verticalCls;Q.removeCls(P)}delete Q.setWidth;delete Q.setHeight;if(!Ext.isIE8){delete Q.getWidth;delete Q.getHeight}delete Q.styleHooks},updateText:function(S){var P=this,R,Q;if(R){Q=R.firstChild;if(!Q||(Q.nodeType!==3||Q.nextSibling)){Q=D.createTextNode();P.empty();R.appendChild(Q)}if(S){Q.data=S}}},setHtml:function(R,Q,W,S){var T=this,V,U,P;if(!T.dom){return T}R=R||"";U=T.dom;if(Q!==true){U.innerHTML=R;Ext.callback(W,T);return T}V=Ext.id();R+='<span id="'+V+'" role="presentation"></span>';P=Ext.interval(function(){var ad,aa,Z,Y,X,ac,ab;if(!(ac=D.getElementById(V))){return false}clearInterval(P);Ext.removeNode(ac);ad=Ext.getHead().dom;while((aa=I.exec(R))){Z=aa[1];Y=Z?Z.match(b):false;if(Y&&Y[2]){ab=D.createElement("script");ab.src=Y[2];X=Z.match(h);if(X&&X[2]){ab.type=X[2]}ad.appendChild(ab)}else{if(aa[2]&&aa[2].length>0){if(S){Ext.functionFactory(aa[2]).call(S)}else{Ext.globalEval(aa[2])}}}}Ext.callback(W,S||T)},20);U.innerHTML=R.replace(C,"");return T},setOpacity:function(Q,P){var R=this;if(!R.dom){return R}if(!P||!R.anim){R.setStyle("opacity",Q)}else{if(typeof P!="object"){P={duration:350,easing:"ease-in"}}R.animate(Ext.applyIf({to:{opacity:Q}},P))}return R},setPositioning:function(P){return this.setStyle(P)},setVertical:function(S,P){var R=this,Q=i.prototype;R.vertical=true;if(P){R.addCls(R.verticalCls=P)}R.setWidth=Q.setHeight;R.setHeight=Q.setWidth;if(!Ext.isIE8){R.getWidth=Q.getHeight;R.getHeight=Q.getWidth}R.styleHooks=(S===270)?Q.verticalStyleHooks270:Q.verticalStyleHooks90},setSize:function(R,P,Q){var S=this;if(Ext.isObject(R)){Q=P;P=R.height;R=R.width}if(!Q||!S.anim){S.dom.style.width=i.addUnits(R);S.dom.style.height=i.addUnits(P);if(S.shadow||S.shim){S.syncUnderlays()}}else{if(Q===true){Q={}}S.animate(Ext.applyIf({to:{width:R,height:P}},Q))}return S},setVisible:function(T,P){var R=this,S=R.dom,Q=v(R);if(typeof P==="string"){switch(P){case a:Q=i.DISPLAY;break;case f:Q=i.VISIBILITY;break;case N:Q=i.OFFSETS;break;case c:Q=i.CLIP;break}R.setVisibilityMode(Q);P=false}if(!P||!R.anim){if(Q===i.DISPLAY){return R.setDisplayed(T)}else{if(Q===i.OFFSETS){R[T?"removeCls":"addCls"](j)}else{if(Q===i.CLIP){R[T?"removeCls":"addCls"](o)}else{if(Q===i.VISIBILITY){R.fixDisplay();S.style.visibility=T?"":L}}}}}else{if(T){R.setOpacity(0.01);R.setVisible(true)}if(!Ext.isObject(P)){P={duration:350,easing:"ease-in"}}R.animate(Ext.applyIf({callback:function(){if(!T){Ext.fly(S).setVisible(false).setOpacity(1)}},to:{opacity:(T)?1:0}},P))}R.getData()[x]=T;if(R.shadow||R.shim){R.setUnderlaysVisible(T)}return R},setWidth:function(Q,P){var R=this;if(!P||!R.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(P)){P={}}R.animate(Ext.applyIf({to:{width:Q}},P))}return R},setX:function(P,Q){return this.setXY([P,this.getY()],Q)},setXY:function(R,P){var Q=this;if(!P||!Q.anim){arguments.callee.$previous.call(this,R)}else{if(!Ext.isObject(P)){P={}}Q.animate(Ext.applyIf({to:{x:R[0],y:R[1]}},P))}return this},setY:function(Q,P){return this.setXY([this.getX(),Q],P)},show:function(P){if(typeof P==="string"){this.setVisible(true,P);return this}this.setVisible(true,this.anim(P));return this},slideIn:function(S,R,T){var V=this,Q=V.dom,Y=Q.style,X,P,U,W;S=S||"t";R=R||{};X=function(){var ad=this,ac=R.listeners,ab=Ext.fly(Q,"_anim"),ae,Z,af,aa;if(!T){ab.fixDisplay()}ae=ab.getBox();if((S=="t"||S=="b")&&ae.height===0){ae.height=Q.scrollHeight}else{if((S=="l"||S=="r")&&ae.width===0){ae.width=Q.scrollWidth}}Z=ab.getStyle(["width","height","left","right","top","bottom","position","z-index"],true);ab.setSize(ae.width,ae.height);if(R.preserveScroll){U=ab.cacheScrollValues()}aa=ab.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+ab.dom.id,style:{visibility:T?"visible":"hidden"}});W=aa.dom.parentNode;aa.setPositioning(ab.getPositioning());if(aa.isStyle("position","static")){aa.position("relative")}ab.clearPositioning("auto");aa.clip();if(U){U()}ab.setStyle({visibility:"",position:"absolute"});if(T){aa.setSize(ae.width,ae.height)}switch(S){case"t":af={from:{width:ae.width+"px",height:"0px"},to:{width:ae.width+"px",height:ae.height+"px"}};Y.bottom="0px";break;case"l":af={from:{width:"0px",height:ae.height+"px"},to:{width:ae.width+"px",height:ae.height+"px"}};V.anchorAnimX(S);break;case"r":af={from:{x:ae.x+ae.width,width:"0px",height:ae.height+"px"},to:{x:ae.x,width:ae.width+"px",height:ae.height+"px"}};V.anchorAnimX(S);break;case"b":af={from:{y:ae.y+ae.height,width:ae.width+"px",height:"0px"},to:{y:ae.y,width:ae.width+"px",height:ae.height+"px"}};break;case"tl":af={from:{x:ae.x,y:ae.y,width:"0px",height:"0px"},to:{width:ae.width+"px",height:ae.height+"px"}};Y.bottom="0px";V.anchorAnimX("l");break;case"bl":af={from:{y:ae.y+ae.height,width:"0px",height:"0px"},to:{y:ae.y,width:ae.width+"px",height:ae.height+"px"}};V.anchorAnimX("l");break;case"br":af={from:{x:ae.x+ae.width,y:ae.y+ae.height,width:"0px",height:"0px"},to:{x:ae.x,y:ae.y,width:ae.width+"px",height:ae.height+"px"}};V.anchorAnimX("r");break;case"tr":af={from:{x:ae.x+ae.width,width:"0px",height:"0px"},to:{x:ae.x,width:ae.width+"px",height:ae.height+"px"}};Y.bottom="0px";V.anchorAnimX("r");break}aa.show();P=Ext.apply({},R);delete P.listeners;P=new Ext.fx.Anim(Ext.applyIf(P,{target:aa,duration:500,easing:"ease-out",from:T?af.to:af.from,to:T?af.from:af.to}));P.on("afteranimate",function(){var ag=Ext.fly(Q,"_anim");ag.setStyle(Z);if(T){if(R.useDisplay){ag.setDisplayed(false)}else{ag.hide()}}if(aa.dom){if(aa.dom.parentNode){aa.dom.parentNode.insertBefore(ag.dom,aa.dom)}else{W.appendChild(ag.dom)}aa.destroy()}if(U){U()}ad.end()});if(ac){P.on(ac)}};V.animate({duration:R.duration?Math.max(R.duration,500)*2:1000,listeners:{beforeanimate:X}});return V},slideOut:function(P,Q){return this.slideIn(P,Q,true)},swallowEvent:function(Q,R){var T=this,U,P,S=function(V){V.stopPropagation();if(R){V.preventDefault()}};if(Ext.isArray(Q)){P=Q.length;for(U=0;U<P;U++){T.on(Q[U],S)}return T}T.on(Q,S);return T},switchOff:function(R){var Q=this,S=Q.dom,P;R=Ext.applyIf(R||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});P=function(){var X=Ext.fly(S,"_anim"),W=this,V=X.getSize(),Y=X.getXY(),U,T;X.clearOpacity();X.clip();T=X.getPositioning();U=new Ext.fx.Animator({target:S,duration:R.duration,easing:R.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:Y[1]+V.height/2},100:{width:1,x:Y[0]+V.width/2}}});U.on("afteranimate",function(){var Z=Ext.fly(S,"_anim");if(R.useDisplay){Z.setDisplayed(false)}else{Z.hide()}Z.clearOpacity();Z.setPositioning(T);Z.setSize(V);W.end()})};Q.animate({duration:(Math.max(R.duration,500)*2),listeners:{beforeanimate:{fn:P}},callback:R.callback,scope:R.scope});return Q},syncContent:function(Q){Q=Ext.getDom(Q);var R=Q.childNodes,ac=R.length,aa=this.dom,ab=aa.childNodes,Y=ab.length,W,Z,T,V,S,P,X,U=aa._extData;if(Ext.isIE9m&&aa.mergeAttributes){aa.mergeAttributes(Q,true);aa.src=Q.src}else{S=Q.attributes;P=S.length;for(W=0;W<P;W++){X=S[W].name;if(X!=="id"){aa.setAttribute(X,S[W].value)}}}if(U){U.isSynchronized=false}if(ac!==Y){aa.innerHTML=Q.innerHTML;return}for(W=0;W<ac;W++){T=R[W];Z=ab[W];V=T.nodeType;if(V!==Z.nodeType||(V===1&&T.tagName!==Z.tagName)){aa.innerHTML=Q.innerHTML;return}if(V===3){Z.data=T.data}else{if(T.id&&Z.id!==T.id){Z.id=T.id}Z.style.cssText=T.style.cssText;Z.className=T.className;Ext.fly(Z,"_syncContent").syncContent(T)}}},toggle:function(P){var Q=this;Q.setVisible(!Q.isVisible(),Q.anim(P));return Q},unmask:function(){var R=this,S=R.getData(),Q=S.maskEl,P;if(Q){P=Q.dom.style;if(P.clearExpression){P.clearExpression("width");P.clearExpression("height")}if(Q){Q.destroy();delete S.maskEl}R.removeCls([m,y])}R.restoreTabbableState(R.dom===D.body)},unclip:function(){var Q=this,R=Q.getData(),P;if(R[p]){R[p]=false;P=R[w];if(P.o){Q.setStyle(J,P.o)}if(P.x){Q.setStyle(t,P.x)}if(P.y){Q.setStyle(s,P.y)}}return Q},translate:function(P,R,Q){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else{if(P!=null){this.dom.style.left=P+"px"}if(R!=null){this.dom.style.top=R+"px"}}},unselectable:function(){var P=this;if(Ext.isOpera){P.dom.unselectable="on"}P.removeCls(i.selectableCls);P.addCls(i.unselectableCls);return P},privates:{findTabbableElements:function(ae){var P,Z,ab,T,U,X=this.dom,W=Ext.Element.tabbableSavedCounterAttribute,ad=[],ac=0,Q,S,V,Y,aa,R;if(!X){return ad}if(ae){P=ae.skipSelf;Z=ae.skipChildren;ab=ae.excludeRoot;T=ae.includeSaved;U=ae.includeHidden}ab=ab&&Ext.getDom(ab);if(ab&&ab.contains(X)){return ad}if(!P&&((T&&X.hasAttribute(W))||this.isTabbable(U))){ad[ac++]=X}if(Z){return ad}Q=X.querySelectorAll(Ext.Element.tabbableSelector);aa=Q.length;if(!aa){return ad}V=new Ext.dom.Fly();for(Y=0;Y<aa;Y++){S=Q[Y];R=+S.getAttribute("tabIndex");if(((T&&S.hasAttribute(W))||(!(R<0)&&V.attach(S).isTabbable(U)))&&!(ab&&(ab===S||ab.contains(S)))){ad[ac++]=S}}return ad},saveTabbableState:function(T){var W=Ext.Element.tabbableSavedCounterAttribute,S=Ext.Element.tabbableSavedValueAttribute,Q,R,V,U,P;if(!T||T.includeSaved==null){T=Ext.Object.chain(T||null);T.includeSaved=true}R=this.findTabbableElements(T);for(U=0,P=R.length;U<P;U++){V=R[U];Q=+V.getAttribute(W);if(Q>0){V.setAttribute(W,++Q)}else{if(V.hasAttribute("tabIndex")){V.setAttribute(S,V.getAttribute("tabIndex"))}else{V.setAttribute(S,"none")}V.setAttribute("tabIndex","-1");V.setAttribute(W,"1")}}return R},restoreTabbableState:function(P,V){var T=this.dom,X=Ext.Element.tabbableSavedCounterAttribute,Y=Ext.Element.tabbableSavedValueAttribute,R=[],Z,Q,R,S,U,W;if(!T){return this}if(!V){R=Ext.Array.from(T.querySelectorAll("["+X+"]"))}if(!P){R.unshift(T)}for(U=0,W=R.length;U<W;U++){S=R[U];if(!S.hasAttribute(X)||!S.hasAttribute(Y)){continue}Q=+S.getAttribute(X);if(Q>1){S.setAttribute(X,--Q);continue}Z=S.getAttribute(Y);if(Z==="none"){S.removeAttribute("tabIndex")}else{S.setAttribute("tabIndex",Z)}S.removeAttribute(Y);S.removeAttribute(X)}return R}},deprecated:{"4.0":{methods:{pause:function(P){var Q=this;Ext.fx.Manager.setFxDefaults(Q.id,{delay:P});return Q},scale:function(P,Q,R){this.animate(Ext.apply({},R,{width:P,height:Q}));return this},shift:function(P){this.animate(P);return this}}},"4.2":{methods:{moveTo:function(P,R,Q){return this.setXY([P,R],Q)},setBounds:function(Q,T,S,P,R){return this.setBox({x:Q,y:T,width:S,height:P},R)},setLeftTop:function(S,R){var Q=this,P=Q.dom.style;P.left=i.addUnits(S);P.top=i.addUnits(R);if(Q.shadow||Q.shim){Q.syncUnderlays()}return Q},setLocation:function(P,R,Q){return this.setXY([P,R],Q)}}},"5.0":{methods:{getAttributeNS:function(Q,P){return this.getAttribute(P,Q)},getCenterXY:function(){return this.getAlignToXY(D,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(B))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(e))||0},getStyleSize:function(){var T=this,U=this.dom,Q=(U===D||U===D.body),S,P,R;if(Q){return{width:i.getViewportWidth(),height:i.getViewportHeight()}}S=T.getStyle(["height","width"],true);if(S.width&&S.width!=="auto"){P=parseFloat(S.width)}if(S.height&&S.height!=="auto"){R=parseFloat(S.height)}return{width:P||T.getWidth(true),height:R||T.getHeight(true)}},isBorderBox:function(){return true},isDisplayed:function(){return !this.isStyle("display","none")},focusable:"isFocusable"}}}}})(),function(){var p=Ext.dom.Element,o=p.prototype,v=!Ext.isIE8,b=document,l=b.defaultView,u=/alpha\(opacity=(.*)\)/i,g=/^\s+|\s+$/g,w=o.styleHooks,s=Ext.supports,e,n,d,r,f,x,c;o._init(p);delete o._init;Ext.plainTableCls="x-table-plain";Ext.plainListCls="x-list-plain";if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}if(!s.Opacity&&Ext.isIE){Ext.apply(w.opacity,{get:function(A){var z=A.style.filter,y,k;if(z.match){y=z.match(u);if(y){k=parseFloat(y[1]);if(!isNaN(k)){return k?k/100:0}}}return 1},set:function(A,y){var k=A.style,z=k.filter.replace(u,"").replace(g,"");k.zoom=1;if(typeof(y)==="number"&&y>=0&&y<1){y*=100;k.filter=z+(z.length?" ":"")+"alpha(opacity="+y+")"}else{k.filter=z}}})}if(!s.matchesSelector){var i=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,j=/\-/g,a,t=function(k,y){var z=new RegExp("(?:^|\\s+)"+y.replace(j,"\\-")+"(?:\\s+|$)");if(k&&k!=="*"){k=k.toUpperCase();return function(A){return A.tagName===k&&z.test(A.className)}}return function(A){return z.test(A.className)}},q=function(k){k=k.toUpperCase();return function(y){return y.tagName===k}},m={};o.matcherCache=m;o.is=function(k){if(!k){return true}var y=this.dom,E,A,D,C,B,z,F;if(y.nodeType!==1){return false}if(!(D=Ext.isFunction(k)?k:m[k])){if(!(A=k.match(i))){C=y.parentNode;if(!C){B=true;C=a||(a=b.createDocumentFragment());a.appendChild(y)}z=Ext.Array.indexOf(Ext.fly(C,"_is").query(k),y)!==-1;if(B){a.removeChild(y)}return z}F=A[1];E=A[2];m[k]=D=E?t(F,E):q(F)}return D(y)}}if(!l||!l.getComputedStyle){o.getStyle=function(L,G){var H=this,C=H.dom,N=typeof L!=="string",z=L,I=z,F=1,A=G,y=H.styleHooks,M,E,K,J,B,k,D;if(N){K={};z=I[0];D=0;if(!(F=I.length)){return K}}if(!C||C.documentElement){return K||""}E=C.style;if(G){k=E}else{k=C.currentStyle;if(!k){A=true;k=E}}do{J=y[z];if(!J){y[z]=J={name:p.normalize(z)}}if(J.get){B=J.get(C,H,A,k)}else{M=J.name;B=k[M]}if(!N){return B}K[z]=B;z=I[++D]}while(D<F);return K}}if(Ext.isIE8){c=function(A,y,z,k){if(k[this.styleName]==="none"){return"0px"}return k[this.name]};d=["Top","Right","Bottom","Left"];r=d.length;while(r--){f=d[r];x="border"+f+"Width";w["border-"+f.toLowerCase()+"-width"]=w[x]={name:x,styleName:"border"+f+"Style",get:c}}var h="x-sync-repaint";o.syncRepaint=function(){this.addCls(h);this.getWidth();this.removeCls(h)}}if(Ext.isIE10m){Ext.override(p,{focus:function(B,A){var z=this,y;A=A||z.dom;if(Number(B)){Ext.defer(z.focus,B,z,[null,A])}else{Ext.GlobalEvents.fireEvent("beforefocus",A);if(A&&(A.tagName==="INPUT"||A.tagname==="TEXTAREA")){Ext.synchronouslyFocusing=document.activeElement}try{A.focus()}catch(k){y=k}if(Ext.synchronouslyFocusing&&document.activeElement!==A&&!y){A.focus()}Ext.synchronouslyFocusing=null}return z}})}Ext.apply(Ext,{enableGarbageCollector:true,isBorderBox:true,useShims:false,getDetachedBody:function(){var k=Ext.detachedBodyEl;if(!k){k=b.createElement("div");Ext.detachedBodyEl=k=new Ext.dom.Fly(k);k.isDetachedBody=true}return k},getElementById:function(z){var y=b.getElementById(z),k;if(!y&&(k=Ext.detachedBodyEl)){y=k.dom.querySelector(Ext.makeIdSelector(z))}return y},addBehaviors:function(B){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.addBehaviors(B)})}else{var y={},A,k,z;for(k in B){if((A=k.split("@"))[1]){z=A[0];if(!y[z]){y[z]=Ext.fly(document).select(z,true)}y[z].on(A[1],B[k])}}y=null}}});if(Ext.isIE9m){Ext.getElementById=function(z){var y=b.getElementById(z),k;if(!y&&(k=Ext.detachedBodyEl)){y=k.dom.all[z]}return y};o.getById=function(C,k){var B=this.dom,y=null,A,z;if(B){z=(v&&b.getElementById(C))||B.all[C];if(z){if(k){y=z}else{A=Ext.cache[C];if(A){if(A.skipGarbageCollection||!Ext.isGarbage(A.dom)){y=A}else{A.destroy()}}y=y||new Ext.Element(z)}}}return y}}else{if(!b.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(k){return b.getElementById(k)};o.getById=function(z,k){var y=b.getElementById(z);return k?y:(y?Ext.get(y):null)}}}if(Ext.isIE&&!(Ext.isIE9p&&b.documentMode>=9)){o.getAttribute=function(k,z){var A=this.dom,y;if(z){y=typeof A[z+":"+k];if(y!=="undefined"&&y!=="unknown"){return A[z+":"+k]||null}return null}if(k==="for"){k="htmlFor"}return A[k]||null}}Ext.onInternalReady(function(){var A=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,y=[],F=o.setWidth,G=o.setHeight,K=o.setSize,L=/^\d+(?:\.\d*)?px$/i,E,C,k,J;if(s.FixedTableWidthBug){w.width={name:"width",set:function(R,Q,O){var N=R.style,M=O._needsTableWidthFix,P=N.display;if(M){N.display="none"}N.width=Q;if(M){R.scrollWidth;N.display=P}}};o.setWidth=function(P,N){var R=this,S=R.dom,O=S.style,M=R._needsTableWidthFix,Q=O.display;if(M&&!N){O.display="none"}F.call(R,P,N);if(M&&!N){S.scrollWidth;O.display=Q}return R};o.setSize=function(Q,N,O){var S=this,T=S.dom,P=T.style,M=S._needsTableWidthFix,R=P.display;if(M&&!O){P.display="none"}K.call(S,Q,N,O);if(M&&!O){T.scrollWidth;P.display=R}return S}}if(Ext.isIE8){w.height={name:"height",set:function(R,Q,O){var N=O.component,P,M;if(N&&N._syncFrameHeight&&O===N.el){M=N.frameBody.dom.style;if(L.test(Q)){P=N.getFrameInfo();if(P){M.height=(parseInt(Q,10)-P.height)+"px"}}else{if(!Q||Q==="auto"){M.height=""}}}R.style.height=Q}};o.setHeight=function(M,O){var P=this.component,Q,N;if(P&&P._syncFrameHeight&&this===P.el){N=P.frameBody.dom.style;if(!M||M==="auto"){N.height=""}else{Q=P.getFrameInfo();if(Q){N.height=(M-Q.height)+"px"}}}return G.call(this,M,O)};o.setSize=function(Q,M,O){var P=this.component,R,N;if(P&&P._syncFrameHeight&&this===P.el){N=P.frameBody.dom.style;if(!M||M==="auto"){N.height=""}else{R=P.getFrameInfo();if(R){N.height=(M-R.height)+"px"}}}return K.call(this,Q,M,O)}}Ext.getDoc().on("selectstart",function(Q,R){var P=p.selectableCls,O=p.unselectableCls,M=R&&R.tagName;M=M&&M.toLowerCase();if(M==="input"||M==="textarea"){return}while(R&&R.nodeType===1&&R!==b.documentElement){var N=Ext.fly(R);if(N.hasCls(P)){return}if(N.hasCls(O)){Q.stopEvent();return}R=R.parentNode}});function D(Q,N,P,M){var O=M[this.name]||"";return A.test(O)?"transparent":O}function I(N,O,M){return function(){N.selectionStart=O;N.selectionEnd=M}}function H(Q){var O=s.DisplayChangeInputSelectionBug,P=s.DisplayChangeTextAreaSelectionBug,R,M,S,N;if(O||P){R=p.getActiveElement();M=R&&R.tagName;if((P&&M==="TEXTAREA")||(O&&M==="INPUT"&&R.type==="text")){if(Ext.fly(Q).isAncestor(R)){S=R.selectionStart;N=R.selectionEnd;if(Ext.isNumber(S)&&Ext.isNumber(N)){return I(R,S,N)}}}}return Ext.emptyFn}function B(S,P,R,O){var M=O.marginRight,N,Q;if(M!=="0px"){N=S.style;Q=N.display;N.display="inline-block";M=(R?O:S.ownerDocument.defaultView.getComputedStyle(S,null)).marginRight;N.display=Q}return M}function z(T,Q,S,P){var M=P.marginRight,O,N,R;if(M!=="0px"){O=T.style;N=H(T);R=O.display;O.display="inline-block";M=(S?P:T.ownerDocument.defaultView.getComputedStyle(T,"")).marginRight;O.display=R;N()}return M}if(!s.RightMargin){w.marginRight=w["margin-right"]={name:"marginRight",get:(s.DisplayChangeInputSelectionBug||s.DisplayChangeTextAreaSelectionBug)?z:B}}if(!s.TransparentColor){E=["background-color","border-color","color","outline-color"];for(C=E.length;C--;){k=E[C];J=p.normalize(k);w[k]=w[J]={name:J,get:D}}}o.verticalStyleHooks90=e=Ext.Object.chain(w);o.verticalStyleHooks270=n=Ext.Object.chain(w);e.width=w.height||{name:"height"};e.height=w.width||{name:"width"};e["margin-top"]={name:"marginLeft"};e["margin-right"]={name:"marginTop"};e["margin-bottom"]={name:"marginRight"};e["margin-left"]={name:"marginBottom"};e["padding-top"]={name:"paddingLeft"};e["padding-right"]={name:"paddingTop"};e["padding-bottom"]={name:"paddingRight"};e["padding-left"]={name:"paddingBottom"};e["border-top"]={name:"borderLeft"};e["border-right"]={name:"borderTop"};e["border-bottom"]={name:"borderRight"};e["border-left"]={name:"borderBottom"};n.width=w.height||{name:"height"};n.height=w.width||{name:"width"};n["margin-top"]={name:"marginRight"};n["margin-right"]={name:"marginBottom"};n["margin-bottom"]={name:"marginLeft"};n["margin-left"]={name:"marginTop"};n["padding-top"]={name:"paddingRight"};n["padding-right"]={name:"paddingBottom"};n["padding-bottom"]={name:"paddingLeft"};n["padding-left"]={name:"paddingTop"};n["border-top"]={name:"borderRight"};n["border-right"]={name:"borderBottom"};n["border-bottom"]={name:"borderLeft"};n["border-left"]={name:"borderTop"};if(!Ext.scopeCss){y.push("x-body")}if(s.Touch){y.push("x-touch")}if(Ext.isIE&&Ext.isIE9m){y.push("x-ie","x-ie9m");y.push("x-ie8p");if(Ext.isIE8){y.push("x-ie8")}else{y.push("x-ie9","x-ie9p")}if(Ext.isIE8m){y.push("x-ie8m")}}if(Ext.isIE10){y.push("x-ie10")}if(Ext.isIE10p){y.push("x-ie10p")}if(Ext.isIE11){y.push("x-ie11")}if(Ext.isGecko){y.push("x-gecko")}if(Ext.isOpera){y.push("x-opera")}if(Ext.isOpera12m){y.push("x-opera12m")}if(Ext.isWebKit){y.push("x-webkit")}if(Ext.isSafari){y.push("x-safari")}if(Ext.isChrome){y.push("x-chrome")}if(Ext.isMac){y.push("x-mac")}if(Ext.isLinux){y.push("x-linux")}if(!s.CSS3BorderRadius){y.push("x-nbr")}if(!s.CSS3LinearGradient){y.push("x-nlg")}if(s.Touch){y.push("x-touch")}Ext.getBody().addCls(y)},null,{priority:1500})});(Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:true,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent();Ext.onInternalReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer});Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent("mousedown",a)},fireResize:function(){var d=this,b=Ext.Element,a=b.getViewportWidth(),c=b.getViewportHeight();if(d.curHeight!==c||d.curWidth!==a){d.curHeight=c;d.curWidth=a;d.fireEvent("resize",a,c)}}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(a){Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)}}));Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",deprecated:{5:{methods:{addListener:function(d,g,h,i,c,b,e){var a,f;if(d==="ready"){f=g}else{if(typeof d!=="string"){for(a in d){if(a==="ready"){f=d[a]}}}}if(f){Ext.onReady(f)}this.callParent([d,g,h,i,c,b,e])}}}}});Ext.USE_NATIVE_JSON=false;Ext.JSON=(new (function(){var me=this,hasNative=window.JSON&&JSON.toString()==="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return me.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return me.encodeMSDate(o)}else{return me.encodeString(o)}}else{if(typeof o==="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i),":",me.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(o)}return me.encodeValue(o)};me.decode=function(json,safe){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(json)}return doDecode(json)}catch(e){if(safe){return null}Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode})());(Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(i){var e=this,g=(i&&e.inheritedStateInner)||e.inheritedState,b=e.getRefOwner(),a=e.isContainer,h,c,d,f;if(!g||g.invalid){h=e.getRefOwner();f=e.ownerLayout;if(b){d=f?f===b.layout:true}e.inheritedState=g=Ext.Object.chain(h?h.getInherited(d):Ext.rootInheritedState);if(a){e.inheritedStateInner=c=Ext.Object.chain(g)}e.initInheritedState(g,c);g=(a&&i)?e.inheritedStateInner:e.inheritedState}return g},getInheritedConfig:function(e,a){var d=this.inheritedState,b,c;if(!d||d.invalid){d=this.getInherited()}c=d[e];if(a&&d.hasOwnProperty(e)){b=c;delete d[e];c=d[e];d[e]=b}return c},resolveListenerScope:function(f,a){var d=this,e=(typeof a==="boolean"),c=Ext._namedScopes[f],b;if(!c){b=d.getInheritedConfig("defaultListenerScope",e?a:true)||f||d}else{if(c.isController){b=d.getInheritedConfig("controller",e?a:!c.isSelf)}else{if(c.isSelf){b=d.getInheritedConfig("defaultListenerScope",e&&a)||d}else{if(c.isThis){b=d}}}}return b||null},resolveSatelliteListenerScope:function(c,e){var d=this,b=Ext._namedScopes[e],a;if(!b){a=d.getInheritedConfig("defaultListenerScope")||e||d}else{if(b.isController){a=d.getInheritedConfig("controller")}else{if(b.isSelf){a=d.getInheritedConfig("defaultListenerScope")||c}else{if(b.isThis){a=c}}}}return a||null},lookupReferenceHolder:function(a){return this.getInheritedConfig("referenceHolder",a!==false)||null},getRefOwner:function(){var a=this;return a.ownerCt||a.parent||a.$initParent||a.ownerCmp||a.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=true;delete this.inheritedState}},privates:{fixReference:function(){var a=this,b;if(a.getReference()){b=a.lookupReferenceHolder();if(b){b.attachReference(a)}}},onInheritedAdd:function(b,a){var c=this;if(c.inheritedState&&a){c.invalidateInheritedState()}if(c.getReference()){Ext.ComponentManager.markReferencesDirty()}},onInheritedRemove:function(b){var a=this,c;if(a.getReference()){c=a.lookupReferenceHolder();if(c){c.clearReference(a)}}if(a.inheritedState&&!b){a.invalidateInheritedState()}}}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:true},controller:null,defaultListenerScope:false,publishes:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},reference:null,session:{$value:null,lazy:true},twoWayBindable:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},viewModel:{$value:null,lazy:true}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(d){var e=this,a=e.getReference(),b=e.getController(),c=e.getConfig("viewModel",true),g=e.getConfig("session",true),f=e.getDefaultListenerScope();if(b){d.controller=b}if(f){d.defaultListenerScope=e}else{if(b){d.defaultListenerScope=b}}if(c){if(!c.isViewModel){c=e}d.viewModel=c}if(g){if(!g.isSession){g=e}d.session=g}if(a){e.referenceKey=(d.referencePath||"")+a;e.viewModelKey=(d.viewModelPath||"")+a}},lookupController:function(a){return this.getInheritedConfig("controller",a)||null},lookupSession:function(a){var b=a?null:this.getSession();if(!b){b=this.getInheritedConfig("session",a);if(b&&!b.isSession){b=b.getInherited().session=b.getSession()}}return b||null},lookupViewModel:function(a){var b=a?null:this.getViewModel();if(!b){b=this.getInheritedConfig("viewModel",a);if(b&&!b.isViewModel){b=b.getInherited().viewModel=b.getViewModel()}}return b||null},publishState:function(j,i){var h=this,b=h.publishedState,e=h.getBind(),g=e&&j&&e[j],f=0,c,a,d,k;if(g&&!g.syncing&&!g.isReadOnly()){if(!(g.calls===0&&(i==null||i===h.getInitialConfig()[j]))){g.setValue(i)}}if(!(a=h.getPublishes())){return}if(!(d=h.lookupViewModel())){return}if(!(k=h.viewModelKey)){return}if(j&&b){if(!a[j]){return}if(!(i&&i.constructor===Object)&&!(i instanceof Array)){if(b[j]===i){return}}k+=".";k+=j}else{b=b||(h.publishedState={});for(c in a){++f;if(c===j){b[c]=i}else{b[c]=h[c]}}if(!f){return}i=b}d.set(k,i)},privates:{addBindableUpdater:function(c){var b=this,d=b.self.$config.configs,a=d[c],e;if(a&&!b.hasOwnProperty(e=a.names.update)){b[e]=a.bindableUpdater||(a.root.bindableUpdater=b.makeBindableUpdater(a))}},applyBind:function(d,j){if(!d){return d}var f=this,h=f.lookupViewModel(),e=f.getTwoWayBindable(),a=f._getBindTemplateScope,g,i,c;if(!j||typeof j==="string"){j={}}if(Ext.isString(d)){g=d;d={};d[f.defaultBindProperty]=g}for(i in d){c=d[i];g=j[i];if(g&&typeof g!=="string"){g.destroy();g=null}if(c){g=h.bind(c,f.onBindNotify,f);g._config=Ext.Config.get(i);g.getTemplateScope=a}j[i]=g;if(e&&e[i]&&!g.isReadOnly()){f.addBindableUpdater(i)}}return j},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}return a},applyPublishes:function(a){if(this.lookupViewModel()){for(var b in a){this.addBindableUpdater(b)}}return a},applySession:function(c){if(!c){return null}if(!c.isSession){var b=this.lookupSession(true),a=(c===true)?{}:c;if(b){c=b.spawn(a)}else{c=new Ext.data.Session(a)}}return c},applyViewModel:function(b){var c=this,a,d;if(!b){return null}if(!b.isViewModel){a={parent:c.lookupViewModel(true)};a.session=c.getSession();if(!d&&!a.parent){a.session=c.lookupSession()}if(b){if(b.constructor===Object){Ext.apply(a,b)}else{if(typeof b==="string"){a.type=b}}}b=Ext.Factory.viewModel(a)}return b},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var c=this,b=c.getConfig("viewModel",true),d=c.getConfig("session",true),a=c.getController();if(b&&b.isViewModel){b.destroy();c.setViewModel(null)}if(d&&d.isSession){if(d.getAutoDestroy()){d.destroy()}c.setSession(null)}if(a){c.setController(null);a.destroy()}},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(e,c){var d=this,f=d.self.prototype[b];if(f){f.call(d,e,c)}d.publishState(a.name,e)}},isSyncing:function(b){var d=this.getBind(),a=false,c;if(d){c=d[b];if(c){a=c.syncing>0}}return a},onBindNotify:function(b,a,c){c.syncing=(c.syncing+1)||1;this[c._config.names.set](b);--c.syncing},removeBindings:function(){var b=this,d,a,c;if(!b.destroying){d=b.getBind();if(d&&typeof d!=="string"){for(a in d){c=d[a];c.destroy();c._config=c.getTemplateScope=null}}}b.setBind(null)},updateSession:function(b){var a=this.getInherited();if(b){a.session=b}else{delete a.session}},updateViewModel:function(b){var c=this.getInherited(),a=this.getController();if(b){c.viewModel=b;b.setView(this);if(a){a.initViewModel(b)}}else{delete c.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.mixin.ComponentDelegation",Ext.Mixin,{mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(f,h,j,k,d,c,e){var g=this,b,a,i;d=d||k.order;if(d){i=(k&&k.priority);if(!i){k=k?Ext.Object.chain(k):{};k.priority=g.$orderToPriority[d]}}b=g.$delegatedEvents||(g.$delegatedEvents={});a=b[f]||(b[f]=new Ext.util.Event(g,f));if(a.addListener(h,j,k,c,e)){g.$hasDelegatedListeners._incr_(f)}},clearDelegatedListeners:function(){var d=this,b=d.$delegatedEvents,a,c,e;if(b){for(a in b){c=b[a];e=c.listeners.length;c.clearListeners();d.$hasDelegatedListeners._decr_(a,e);delete b[a]}}},doFireDelegatedEvent:function(b,d){var g=this,c=true,a,e,f;if(g.$hasDelegatedListeners[b]){a=g.getRefOwner();while(a){e=a.$delegatedEvents;if(e){f=e[b];if(f){c=f.fireDelegated(g,d);if(c===false){break}}}a=a.getRefOwner()}}return c},removeDelegatedListener:function(a,d,c){var f=this,b=f.$delegatedEvents,e;if(b){e=b[a];if(e&&e.removeListener(d,c)){f.$hasDelegatedListeners._decr_(a);if(e.listeners.length===0){delete b[a]}}}}},onClassMixedIn:function(a){function b(){}a.prototype.HasListeners=a.HasListeners=b;b.prototype=a.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},0,0,0,0,0,0,[Ext.mixin,"ComponentDelegation"],function(b){function a(){}b.HasDelegatedListeners=a;a.prototype=b.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()}));(Ext.cmd.derive("Ext.Widget",Ext.Evented,{isWidget:true,element:{reference:"element"},observableType:"component",cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(b){var c=this,a;c.initId(b);c.initElement();c.mixins.observable.constructor.call(c,b);Ext.ComponentManager.register(c);a=c.getController();if(a){a.init(c)}},afterCachedConfig:function(){var h=this,j=h.self.prototype,k=h.referenceList,c=h.renderElement,f,d,e,g,b,a;j.renderTemplate=f=document.createDocumentFragment();f.appendChild(c.clone(true,true));a=f.querySelectorAll("[id]");for(e=0,g=a.length;e<g;e++){d=a[e];d.removeAttribute("id")}for(e=0,g=k.length;e<g;e++){b=k[e];h[b].dom.removeAttribute("reference")}},addCls:function(a){this.el.addCls(a)},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},destroy:function(){var e=this,b=e.referenceList,c,d,a;for(c=0,d=b.length;c<d;c++){a=b[c];if(e.hasOwnProperty(a)){e[a].destroy();e[a]=null}}e.destroyBindable();Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(e)},doFireEvent:function(b,d,a){var e=this,c=e.mixins.observable.doFireEvent.call(e,b,d,a);if(c!==false){c=e.mixins.componentDelegation.doFireDelegatedEvent.call(e,b,d)}return c},getElementConfig:function(){var b=this,a=b.element;if(!("children" in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var l=this,m=l.self.prototype,a=l.getId(),n=l.referenceList=l.referenceList=[],c=true,h,e,g,b,f,k,j,d;if(m.hasOwnProperty("renderTemplate")){h=l.renderTemplate.cloneNode(true);e=h.firstChild}else{c=false;h=document.createDocumentFragment();e=Ext.Element.create(l.processElementConfig.call(m),true);h.appendChild(e)}b=h.querySelectorAll("[reference]");for(f=0,k=b.length;f<k;f++){j=b[f];d=j.getAttribute("reference");if(c){j.removeAttribute("reference")}if(d==="element"){j.id=a;g=l.el=l.addElementReference(d,j);g.dom.setAttribute("data-componentid",a)}else{l.addElementReferenceOnDemand(d,j)}n.push(d)}if(e===g.dom){l.renderElement=g}else{l.addElementReferenceOnDemand("renderElement",e)}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},removeCls:function(a){this.el.removeCls(a)},toggleCls:function(a,b){this.element.toggleCls(a,b)},resolveListenerScope:function(b,a){return this.mixins.inheritable.resolveListenerScope.call(this,b,a)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}},applyStyle:function(b,a){if(a&&b===a&&Ext.isObject(a)){b=Ext.apply({},b)}return b},updateStyle:function(a){this.element.applyStyles(a)},updateWidth:function(a){this.element.setWidth(a)},updateHeight:function(a){this.element.setHeight(a)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return false},privates:{addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else{Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:true})}},addElementReference:function(c,e){var f=this,b=f[c]=Ext.get(e),d=f._elementListeners[c],a,g;b.skipGarbageCollection=true;b.component=f;if(d){d=Ext.clone(d);for(a in d){g=d[a];if(typeof g==="object"){g.scope=f}}d.scope=f;b.on(d)}return b},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element);this.isDetached=true},doAddListener:function(a,g,h,i,c,b,d){var f=this,e;if(i&&"element" in i){f[i.element].doAddListener(a,g,h||f,i,c)}if(i){e=i.delegate;if(e){f.mixins.componentDelegation.addDelegatedListener.call(f,a,g,h,i,c,b,d);return}}Ext.Evented.prototype.doAddListener.call(this,a,g,h,i,c,b,d)},doRemoveListener:function(a,c,b){var d=this;d.mixins.observable.doRemoveListener.call(d,a,c,b);d.mixins.componentDelegation.removeDelegatedListener.call(d,a,c,b)},filterLengthValue:function(a){if(a==="auto"||(!a&&a!==0)){return null}return a},getFocusEl:function(){return this.element},initElementListeners:function(l){var k=this,d=k.self.superclass,c=d._elementListeners,e=l.reference,a=l.children,g,j,b,h,f;if(k.hasOwnProperty("_elementListeners")){g=k._elementListeners}else{g=k._elementListeners=(c?Ext.Object.chain(c):{})}if(e){j=l.listeners;if(j){if(c){b=c[e];if(b){j=Ext.Object.chain(b);Ext.apply(j,l.listeners)}}g[e]=j;l.listeners=null}}if(a){for(f=0,h=a.length;f<h;f++){k.initElementListeners(a[f])}}},initId:function(b){var c=this,a=c.config,d=(b&&b.id)||(a&&a.id);if(d){c.setId(d);c.id=d}else{c.getId()}},processElementConfig:function(){var a=this,c=a.self.superclass,b;if(a.hasOwnProperty("_elementConfig")){b=a._elementConfig}else{b=a._elementConfig=a.getElementConfig();if(c.isWidget){a.processElementConfig.call(c)}a.initElementListeners(b)}return b},reattachToBody:function(){this.isDetached=false},updateUserCls:function(b,a){this.element.replaceCls(a,b)}}},1,["widget"],["widget"],{widget:true},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation]],[Ext,"Widget"],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1}));Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,config:{renderTo:null},cachedConfig:{baseCls:"x-widget"},constructor:function(a){var b=this,c;(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,a);b.getComponentLayout();c=b.getRenderTo();if(c){b.render(c)}},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var a=this.getRefOwner();if(a){a.updateLayout()}},destroy:function(){var b=this,a=b.ownerCt;if(a&&a.remove){a.remove(b,false)}(arguments.callee.$previous||Ext.Evented.prototype.destroy).call(this)},finishRender:function(){this.rendering=false;this.initBindable()},getAnimationProps:function(){return{}},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getEl:function(){return this.element},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,e,a){var d=this,c=d.inheritedState;d.ownerCt=b;d.onInheritedAdd(d,a)},onRemoved:function(b){var a=this;if(!b){a.removeBindings()}a.onInheritedRemove(b);a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},removeClsWithUI:function(a){this.el.removeCls(a)},render:function(b,a){var e=this,c=e.element,d=Ext.Component.prototype,f;if(!e.ownerCt||e.floating){if(Ext.scopeCss){c.addCls(d.rootCls)}c.addCls(d.borderBoxCls)}if(a){f=b.childNodes[a];if(f){Ext.fly(b).insertBefore(c,f);return}}Ext.fly(b).appendChild(c)},setPosition:function(a,b){this.el.setLocalXY(a,b)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(b){var a=this.ownerCt;return a?(a===b||a.isLayoutChild(b)):false}},function(b){var a=b.prototype;if(Ext.isIE9m){a.addElementReferenceOnDemand=a.addElementReference}});(Ext.cmd.derive("Ext.ProgressBase",Ext.Base,{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyValue:function(a){return a||0}},0,0,0,0,0,0,[Ext,"ProgressBase"],0));(Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var a;return{singleton:true,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:false,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(b){return b!==undefined?b:""},defaultValue:function(c,b){return c!==undefined&&c!==""?c:b},substr:"ab".substr(-1)!="b"?function(c,e,b){var d=String(c);return(e<0)?d.substr(Math.max(d.length+e,0),b):d.substr(e,b)}:function(c,d,b){return String(c).substr(d,b)},lowercase:function(b){return String(b).toLowerCase()},uppercase:function(b){return String(b).toUpperCase()},usMoney:function(b){return a.currency(b,"$",2)},currency:function(d,f,c,b){var h="",g=",0",e=0;d=d-0;if(d<0){d=-d;h="-"}c=Ext.isDefined(c)?c:a.currencyPrecision;g+=(c>0?".":"");for(;e<c;e++){g+="0"}d=a.number(d,g);if((b||a.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",h,d,f||a.currencySign)}else{return Ext.String.format("{0}{1}{2}",h,f||a.currencySign,d)}},date:function(b,c){if(!b){return""}if(!Ext.isDate(b)){b=new Date(Date.parse(b))}return Ext.Date.dateFormat(b,c||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(d,c){var b=parseInt(d||0,10).toString(16);if(c){if(c<0){c=-c;if(b.length>c){b=b.substring(b.length-c)}}while(b.length<c){b="0"+b}}return b},or:function(c,b){return c||b},pick:function(d,c,e){if(Ext.isNumber(d)){var b=arguments[d+1];if(b){return b}}return d?e:c},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,"")},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,"")},fileSize:(function(){var b=1024,c=1048576,d=1073741824;return function(f){var e;if(f<b){if(f===1){e="1 byte"}else{e=f+" bytes"}}else{if(f<c){e=(Math.round(((f*10)/b))/10)+" KB"}else{if(f<d){e=(Math.round(((f*10)/c))/10)+" MB"}else{e=(Math.round(((f*10)/d))/10)+" GB"}}}return e}})(),math:(function(){var b={};return function(d,c){if(!b[c]){b[c]=Ext.functionFactory("v","return v "+c+";")}return b[c](d)}}()),round:function(d,c){var b=Number(d);if(typeof c==="number"){c=Math.pow(10,c);b=Math.round(d*c)/c}else{if(c===undefined){b=Math.round(b)}}return b},number:function(l,f){if(!f){return l}if(isNaN(l)){return""}var e=a.formatFns[f];if(!e){var i=f,o=a.thousandSeparator,m=a.decimalSeparator,g=0,d="",c,j,k,n,b,h;if(f.substr(f.length-2)==="/i"){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==m){a.I18NFormatCleanRe=new RegExp("[^\\d\\"+m+"#]","g");a.lastDecimalSeparator=m}f=f.substr(0,f.length-2);c=f.indexOf(o)!==-1;j=f.replace(a.I18NFormatCleanRe,"").split(m)}else{c=f.indexOf(",")!==-1;j=f.replace(a.formatCleanRe,"").split(".")}k=f.replace(a.formatPattern,"");if(j.length>2){}else{if(j.length===2){g=j[1].length;n=j[1].match(a.hashRe);if(n){h=n[0].length;d='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+h+'}$")'}}}b=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(c?",thousandSeparator,thousands=[],j,n,i":"")+(k?',formatString="'+f+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+g+");",d,";"];if(c){if(g){b[b.length]='parts=fnum.split(".");';b[b.length]="fnum=parts[0];"}b[b.length]="if(absVal>=1000) {";b[b.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(g){b[b.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(g){b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}b[b.length]='if(neg&&fnum!=="'+(g?"0."+Ext.String.repeat("0",g):"0")+'") { fnum="-"+fnum; }';if(n){b[b.length]='fnum=fnum.replace(trailingZeroes,"");'}b[b.length]="return ";if(k){b[b.length]="formatString.replace(formatPattern, fnum);"}else{b[b.length]="fnum;"}b[b.length]="};";e=a.formatFns[i]=Ext.functionFactory("Ext",b.join(""))(Ext)}return e(l)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||"0")+a.percentSign},attributes:function(c){if(typeof c==="object"){var b=[],d;for(d in c){if(c.hasOwnProperty(d)){b.push(d,'="',d==="style"?Ext.DomHelper.generateStyles(c[d],null,true):Ext.htmlEncode(c[d]),'" ')}}c=b.join("")}return c||""},plural:function(b,c,d){return b+" "+(b===1?c:(d?d:c+"s"))},nl2br:function(b){return Ext.isEmpty(b)?"":b.replace(a.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(c){c=c||0;if(typeof c==="number"){return{top:c,right:c,bottom:c,left:c}}var d=c.split(" "),b=d.length;if(b===1){d[1]=d[2]=d[3]=d[0]}else{if(b===2){d[2]=d[0];d[3]=d[1]}else{if(b===3){d[3]=d[1]}}}return{top:parseInt(d[0],10)||0,right:parseInt(d[1],10)||0,bottom:parseInt(d[2],10)||0,left:parseInt(d[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(b,a){b=Ext.getDom(b);return new this(b.value||b.innerHTML,a||"")}},useEval:Ext.isGecko,constructor:function(d){var f=this,b=arguments,a=[],c,e=b.length,g;f.initialConfig={};if(e===1&&Ext.isArray(d)){b=d;e=b.length}if(e>1){for(c=0;c<e;c++){g=b[c];if(typeof g==="object"){Ext.apply(f.initialConfig,g);Ext.apply(f,g)}else{a.push(g)}}}else{a.push(d)}f.html=a.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(a){var b=this;if(b.compiled){if(!b.fn){b.compile()}return b.fn(a).join("")}return b.evaluate(a)},evaluate:function(a){var f=this,c=!f.disableFormats,e=Ext.util.Format,b=f;function d(j,i,h,k,g){if(h==null||h===""){h=i}if(k&&c){if(g){g=[a[h]].concat(Ext.functionFactory("return ["+g+"];")())}else{g=[a[h]]}if(k.substr(0,5)==="this."){return b[k.substr(5)].apply(b,g)}else{if(e[k]){return e[k].apply(e,g)}else{return j}}}else{return a[h]!==undefined?a[h]:""}}return f.html.replace(f.tokenRe,d)},applyOut:function(a,b){var c=this;if(c.compiled){if(!c.fn){c.compile()}b.push.apply(b,c.fn(a))}else{b.push(c.apply(a))}return b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(a,c){var b=this;b.html=a;b.compiled=!!c;b.fn=null;return b},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var b=this,a;a=b.html.replace(b.compileARe,"\\\\").replace(b.compileBRe,"\\n").replace(b.compileCRe,"\\'").replace(b.tokenRe,b.regexReplaceFn.bind(b));a=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(b.useEval?"$=":"return")+" function(v){return ['"+a+"'];};";b.fn=b.useEval?b.evalCompiled(a):(new Function("Ext",a))(Ext);b.compiled=true;return b},evalCompiled:function($){eval($);return $},regexReplaceFn:function(d,c,b,e,a){if(c==null||c===""){c='"'+b+'"'}else{if(this.stringFormat){c=parseInt(c)+1}}if(e&&this.disableFormats!==true){a=a?","+a:"";if(e.substr(0,5)==="this."){e=e+"("}else{if(Ext.util.Format[e]){e="fm."+e+"("}else{return d}}return"',"+e+"v["+c+"]"+a+"),'"}else{return"',v["+c+"] == undefined ? '' : v["+c+"],'"}},insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:function(b,a,c){return this.doInsert("beforeEnd",b,a,c)},doInsert:function(b,d,a,e){var c=Ext.DomHelper.insertHtml(b,Ext.getDom(d),this.apply(a));return e?Ext.get(c):c},overwrite:function(c,a,d){var b=Ext.DomHelper.overwrite(Ext.getDom(c),this.apply(a));return d?Ext.get(b):b}},1,0,0,0,0,0,[Ext,"Template"],function(d){var c=/\{\d+\}/,a=function(f){if(c.test(f)){f=new d(f,b);return function(){return f.apply(arguments)}}else{return function(){return f}}},b={useFormat:false,compiled:true,stringFormat:true},e={};Ext.String.format=Ext.util.Format.format=function(g){var f=e[g]||(e[g]=a(g));return f.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}));(Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(l){var v=this,p=l.length,o={elseif:"elif"},q=v.topRe,c=v.actionsRe,e,d,i,n,g,j,h,u,r,b,f,a,k;v.level=0;v.stack=d=[];for(e=0;e<p;e=b){q.lastIndex=e;n=q.exec(l);if(!n){v.doText(l.substring(e,p));break}r=n.index;b=q.lastIndex;if(e<r){i=l.substring(e,r);if(!(k&&Ext.String.trim(i)==="")){v.doText(i)}}k=false;if(n[1]){b=l.indexOf("%}",r+2);v.doEval(l.substring(r+2,b));b+=2}else{if(n[2]){b=l.indexOf("]}",r+2);v.doExpr(l.substring(r+2,b));b+=2}else{if(n[3]){v.doTag(n[3])}else{if(n[4]){f=null;while((u=c.exec(n[4]))!==null){i=u[2]||u[3];if(i){i=Ext.String.htmlDecode(i);g=u[1];g=o[g]||g;f=f||{};j=f[g];if(typeof j=="string"){f[g]=[j,i]}else{if(j){f[g].push(i)}else{f[g]=i}}}}if(!f){if(v.elseRe.test(n[4])){v.doElse()}else{if(v.defaultRe.test(n[4])){v.doDefault()}else{v.doTpl();d.push({type:"tpl"})}}}else{if(f["if"]){v.doIf(f["if"],f);d.push({type:"if"})}else{if(f["switch"]){v.doSwitch(f["switch"],f);d.push({type:"switch"});k=true}else{if(f["case"]){v.doCase(f["case"],f)}else{if(f.elif){v.doElseIf(f.elif,f)}else{if(f["for"]){++v.level;if(a=v.propRe.exec(n[4])){f.propName=a[1]||a[2]}v.doFor(f["for"],f);d.push({type:"for",actions:f})}else{if(f.foreach){++v.level;if(a=v.propRe.exec(n[4])){f.propName=a[1]||a[2]}v.doForEach(f.foreach,f);d.push({type:"foreach",actions:f})}else{if(f.exec){v.doExec(f.exec,f);d.push({type:"exec",actions:f})}}}}}}}}}else{if(n[0].length===5){d.push({type:"tpl"})}else{h=d.pop();v.doEnd(h.type,h.actions);if(h.type=="for"||h.type=="foreach"){--v.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0));(Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(a){var c=this,b=c.generate(a);return c.useEval?c.evalTpl(b):(new Function("Ext",b))(Ext)},generate:function(a){var d=this,b="var fm=Ext.util.Format,ts=Object.prototype.toString;",c;d.maxLevel=0;d.body=["var c0=values, a0="+d.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(d.definitions){if(typeof d.definitions==="string"){d.definitions=[d.definitions,b]}else{d.definitions.push(b)}}else{d.definitions=[b]}d.switches=[];d.parse(a);d.definitions.push((d.useEval?"$=":"return")+" function ("+d.fnArgs+") {",d.body.join(""),"}");c=d.definitions.join("\n");d.definitions.length=d.body.length=d.switches.length=0;delete d.definitions;delete d.body;delete d.switches;return c},doText:function(c){var b=this,a=b.body;c=c.replace(b.aposRe,"\\'").replace(b.newLineRe,"\\n");if(b.useIndex){a.push("out[out.length]='",c,"'\n")}else{a.push("out.push('",c,"')\n")}},doExpr:function(b){var a=this.body;a.push("if ((v="+b+") != null) out");if(this.useIndex){a.push("[out.length]=v+''\n")}else{a.push(".push(v+'')\n")}},doTag:function(a){var b=this.parseTag(a);if(b){this.doExpr(b)}else{this.doText("{"+a+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(a){this.body.push(a,"\n")},doIf:function(b,c){var a=this;if(b==="."){a.body.push("if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("if (",a.parseTag(b),") {\n")}else{a.body.push("if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(b==="."){a.body.push("else if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("} else if (",a.parseTag(b),") {\n")}else{a.body.push("} else if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doSwitch:function(c){var b=this,a;if(c==="."||c==="#"){a=c==="."?"values":"xindex";b.body.push("switch (",a,") {\n")}else{if(b.propNameRe.test(c)){b.body.push("switch (",b.parseTag(c),") {\n")}else{b.body.push("switch (",b.addFn(c),b.callFn,") {\n")}}b.switches.push(0)},doCase:function(e){var d=this,c=Ext.isArray(e)?e:[e],f=d.switches.length-1,a,b;if(d.switches[f]){d.body.push("break;\n")}else{d.switches[f]++}for(b=0,f=c.length;b<f;++b){a=d.intRe.exec(c[b]);c[b]=a?a[1]:("'"+c[b].replace(d.aposRe,"\\'")+"'")}d.body.push("case ",c.join(": case "),":\n")},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push("break;\n")}else{a.switches[b]++}a.body.push("default:\n")},doEnd:function(b,d){var c=this,a=c.level-1;if(b=="for"||b=="foreach"){if(d.exec){c.doExec(d.exec)}c.body.push("}\n");c.body.push("parent=p",a,";values=r",a+1,";xcount=n"+a+";xindex=i",a,"+1;xkey=k",a,";\n")}else{if(b=="if"||b=="switch"){c.body.push("}\n")}}},doFor:function(e,g){var d=this,c,b=d.level,a=b-1,f;if(e==="."){c="values"}else{if(d.propNameRe.test(e)){c=d.parseTag(e)}else{c=d.addFn(e)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(e=="."){f="c"+b}else{f="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=0,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",f,"\n","if (c",b,"){if(a",b,"){n",b,"=c",b,".length;}else if (c",b,".isMixedCollection){c",b,"=c",b,".items;n",b,"=c",b,".length;}else if(c",b,".isStore){c",b,"=c",b,".data.items;n",b,"=c",b,".length;}else{c",b,"=[c",b,"];n",b,"=1;}}\n","for (xcount=n",b,";i",b,"<n"+b+";++i",b,"){\n","values=c",b,"[i",b,"]");if(g.propName){d.body.push(".",g.propName)}d.body.push("\n","xindex=i",b,"+1\n");if(g.between){d.body.push('if(xindex>1){ out.push("',g.between,'"); } \n')}},doForEach:function(e,g){var d=this,c,b=d.level,a=b-1,f;if(e==="."){c="values"}else{if(d.propNameRe.test(e)){c=d.parseTag(e)}else{c=d.addFn(e)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(e=="."){f="c"+b}else{f="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=-1,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",f,"\n","for(k",b," in c",b,"){\n","xindex=++i",b,"+1;\n","xkey=k",b,";\n","values=c",b,"[k",b,"];");if(g.propName){d.body.push(".",g.propName)}if(g.between){d.body.push('if(xindex>1){ out.push("',g.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(a){return"Array.isArray(c"+a+")"}:function(a){return"ts.call(c"+a+')==="[object Array]"'},doExec:function(d,e){var c=this,a="f"+c.definitions.length,b=c.guards[c.strict?0:1];c.definitions.push("function "+a+"("+c.fnArgs+") {",b.doTry," var $v = values; with($v) {","  "+d," }",b.doCatch,"}");c.body.push(a+c.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(a){var d=this,b="f"+d.definitions.length,c=d.guards[d.strict?0:1];if(a==="."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return values","}")}else{if(a===".."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return parent","}")}else{d.definitions.push("function "+b+"("+d.fnArgs+") {",c.doTry," var $v = values; with($v) {","  return("+a+")"," }",c.doCatch,"}")}}return b},parseTag:function(b){var g=this,a=g.tagRe.exec(b),e,h,d,f,c;if(!a){return null}e=a[1];h=a[2];d=a[3];f=a[4];if(e=="."){if(!g.validTypes){g.definitions.push("var validTypes={string:1,number:1,boolean:1};");g.validTypes=true}c='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(e=="#"){c="xindex"}else{if(e=="$"){c="xkey"}else{if(e.substr(0,7)=="parent."){c=e}else{if(isNaN(e)&&e.indexOf("-")==-1&&e.indexOf(".")!=-1){c="values."+e}else{c="values['"+e+"']"}}}}}if(f){c="("+c+f+")"}if(h&&g.useFormat){d=d?","+d:"";if(h.substr(0,5)!="this."){h="fm."+h+"("}else{h+="("}}else{return c}return h+c+d+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var a=this.prototype;a.fnArgs="out,values,parent,xindex,xcount,xkey";a.callFn=".call(this,"+a.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{isXTemplate:true,emptyObj:{},fn:null,strict:false,apply:function(a,b,c,d){return this.applyOut(a,[],b,c,d).join("")},applyOut:function(a,b,d,g,i){var f=this,c;if(!f.fn){c=new Ext.util.XTemplateCompiler({useFormat:f.disableFormats!==true,definitions:f.definitions,strict:f.strict});f.fn=c.compile(f.html)}g=g||1;i=i||1;if(f.strict){f.fn(b,a,d||f.emptyObj,g,i)}else{try{f.fn(b,a,d||f.emptyObj,g,i)}catch(h){}}return b},compile:function(){return this},statics:{getTpl:function(b,d){var c=b[d],a;if(c&&!c.isTemplate){c=Ext.ClassManager.dynInstantiate("Ext.XTemplate",c);if(b.hasOwnProperty(d)){a=b}else{for(a=b.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass){}}a[d]=c;c.owner=a}return c||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(h,m,k){m=Ext.canonicalEventName(m);var l=this,j=l.bus,n=j[m],e,c,b,d,o,g,f,a;if(!n){return true}for(e in n){if(n.hasOwnProperty(e)&&l.match(h,e,l.controller)){c=n[e];for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d.controller.isActive()){o=d.list;g=o.length;for(f=0;f<g;f++){a=o[f];if(a.fire.apply(a,k)===false){return false}}}}}}}return true},listen:function(d,m){var v=this,l=v.bus,g=v.idProperty,h=v.monitoredClasses,e=h.length,k=m.getId(),u=(v.type==="component"),p=u?m.getRefMap():null,r,j,s,q,b,c,a,o,n,t,f;for(q in d){n=d[q];if(u){q=p[q]||q}if(n){if(g){q=q==="*"?q:q.substring(1)}for(t in n){b=null;c=n[t];a=m;t=Ext.canonicalEventName(t);o=new Ext.util.Event(m,t);if(Ext.isObject(c)){b=c;c=b.fn;a=b.scope||m;delete b.fn;delete b.scope}if(typeof c==="string"){c=a[c]}o.addListener(c,a,b);for(r=0;r<e;++r){f=h[r].hasListeners;if(f){f._incr_(t)}}j=l[t]||(l[t]={});j=j[q]||(j[q]={});s=j[k]||(j[k]={controller:m,list:[]});s.list.push(o)}}}},match:function(c,a){var b=this.idProperty;if(b){return a==="*"||c[b]===a}return false},monitor:function(c){var b=this,a=c.isInstance?c:c.prototype,d=a.doFireEvent;b.monitoredClasses.push(c);a.doFireEvent=function(g,f){var e=d.apply(this,arguments);if(e!==false&&!this.isSuspended(g)){e=b.dispatch(this,g,f)}return e}},unlisten:function(d){var m=this.bus,a=d,q=this.monitoredClasses,k=q.length,b,n,r,l,p,e,o,h,g,c,f;if(d.isController){a=d.getId()}for(n in m){n=Ext.canonicalEventName(n);if(m.hasOwnProperty(n)&&(o=m[n])){for(e in o){b=o[e];c=b[a];if(c){r=c.list;if(r){for(h=0,l=r.length;h<l;++h){p=r[h];p.clearListeners();for(g=0;g<k;++g){f=q[g].hasListeners;if(f){f._decr_(p.name)}}}delete b[a]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(f,d,c){var b=f.lookupController(false),e,a;while(b){e=b.compDomain;if(e){if(e.dispatch(f,d,c)===false){return false}}a=b.getView();b=a?a.lookupController(true):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var b=Ext.String.splitWords,a=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(d){var f=this,c,e;if(d){Ext.apply(f,d);c=f.cls;e=f.style;delete f.cls}f.classList=c?b(c):[];f.classMap=c?a(f.classList):{};if(e){if(typeof e==="string"){f.style=Ext.Element.parseStyles(e)}else{if(Ext.isFunction(e)){f.styleFn=e;delete f.style}else{f.style=Ext.apply({},e)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(m){if(!m){return this}var k=this,l=(typeof m==="string")?b(m):m,e=l.length,h=k.classList,d=k.classMap,f=k.flushClassList,g=0,j;for(;g<e;++g){j=l[g];if(!d[j]){d[j]=true;h.push(j);if(f){f.push(j);delete k.removedClasses[j]}}}return k},hasCls:function(c){return c in this.classMap},removeCls:function(n){var m=this,k=m.classList,f=(m.classList=[]),h=a(b(n)),e=k.length,d=m.classMap,j=m.removedClasses,g,l;for(g=0;g<e;++g){l=k[g];if(h[l]){if(j){if(d[l]){j[l]=true;Ext.Array.remove(m.flushClassList,l)}}delete d[l]}else{f.push(l)}}return m},setStyle:function(f,e){var d=this,c=d.style||(d.style={});if(typeof f==="string"){if(arguments.length===1){d.setStyle(Ext.Element.parseStyles(f))}else{c[f]=e}}else{Ext.apply(c,f)}return d},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(g){var e=this,f=e.flushClassList||e.classList,d=e.removedClasses,c;if(e.styleFn){c=Ext.apply({},e.styleFn());Ext.apply(c,e.style)}else{c=e.style}g[e.clsProp]=f.join(" ");if(c){g[e.styleProp]=e.styleIsText?Ext.DomHelper.generateStyles(c,null,true):c}if(d){d=Ext.Object.getKeys(d);if(d.length){g[e.removedProp]=d.join(" ")}}if(e.unselectableAttr){g.unselectable="on"}return g}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:false,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{factoryConfig:{defaultType:"dom"},isScroller:true,_spacerCls:"x-domscroller-spacer",config:{direction:undefined,directionLock:false,disabled:null,element:undefined,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:true,y:true,spacerXY:null},statics:{create:function(a){return Ext.Factory.scroller(a,Ext.supports.Touch?"touch":"dom")}},constructor:function(a){var b=this;b.position={x:0,y:0};Ext.Evented.prototype.constructor.call(this,a);b.onDomScrollEnd=Ext.Function.createBuffered(b.onDomScrollEnd,100,b)},destroy:function(){var a=this;a.setX(Ext.emptyString);a.setY(Ext.emptyString);a.setElement(null);a.onDomScrollEnd=a._partners=a.component=null;Ext.Evented.prototype.destroy.call(this)},addPartner:function(d,b){var c=this,e=c._partners||(c._partners={}),a=d._partners||(d._partners={});e[d.getId()]={scroller:d,axis:b};a[c.getId()]={scroller:c,axis:b}},applyElement:function(b,a){var d=this,c,e;if(a){d.scrollListener.destroy()}if(b){if(b.isElement){c=b}else{c=Ext.get(b)}if(c.dom===document.body){c=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement));e=Ext.get(Ext.isIE9m?window:document)}else{e=c}d.scrollListener=e.on({scroll:d.onDomScroll,scope:d,destroyable:true});return c}},getClientSize:function(){var a=this.getElement().dom;return{x:a.clientWidth,y:a.clientHeight}},getScrollbarSize:function(){var f=this,b=0,j=0,e,d,i,h,g,c,a;if(f.isDomScroller||Ext.supports.touchScroll===1){e=f.getElement();if(e&&!e.destroyed){i=f.getX();h=f.getY();d=e.dom;if(i||h){a=Ext.getScrollbarSize()}if(i==="scroll"){g=true}else{if(i){g=d.scrollWidth>d.clientWidth}}if(h==="scroll"){c=true}else{if(h){c=d.scrollHeight>d.clientHeight}}if(g){j=a.height}if(c){b=a.width}}}return{width:b,height:j}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){this.fireEvent("refresh",this);return this},removePartner:function(b){var c=this._partners,a=b._partners;if(c){delete c[b.getId()]}if(a){delete (a[this.getId()])}},scrollBy:function(c,b,d){var a=this.getPosition();if(c){if(c.length){d=b;b=c[1];c=c[0]}else{if(typeof c!=="number"){d=b;b=c.y;c=c.x}}}c=(typeof c==="number")?c+a.x:null;b=(typeof b==="number")?b+a.y:null;return this.doScrollTo(c,b,d)},scrollIntoView:function(d,e,b,g){var i=this,h=i.getPosition(),f,a,j,c=i.getElement();if(d){f=Ext.fly(d).getScrollIntoViewXY(c,h.x,h.y);a=(e===false)?h.x:f.x;j=f.y;if(g){i.on({scrollend:"doHighlight",scope:i,single:true,args:[d,g]})}i.doScrollTo(a,j,b)}},isInView:function(c){var d=this,a={x:false,y:false},e,f=d.getElement(),b;if(c&&f.contains(c)){b=f.getRegion();e=Ext.fly(c).getRegion();a.x=e.right>b.left&&e.left<b.right;a.y=e.bottom>b.top&&e.top<b.bottom}return a},scrollTo:function(a,d,b){var c;if(a){if(a.length){b=d;d=a[1];a=a[0]}else{if(typeof a!=="number"){b=d;d=a.y;a=a.x}}}if(a<0||d<0){c=this.getMaxPosition();if(a<0){a+=c.x}if(d<0){d+=c.y}}this.doScrollTo(a,d,b)},updateDirection:function(c){var b=this,a,d;if(!c){a=b.getX();d=b.getY();if(a&&d){c=(d==="scroll"&&a==="scroll")?"both":"auto"}else{if(d){c="vertical"}else{if(a){c="horizontal"}}}b._direction=c}else{if(c==="auto"){a=true;d=true}else{if(c==="vertical"){a=false;d=true}else{if(c==="horizontal"){a=true;d=false}else{if(c==="both"){a="scroll";d="scroll"}}}}b.setX(a);b.setY(d)}},updateSize:function(d){var e=this,c=e.getElement(),b,a,f;if(c){b=e.getSpacer();if(d==null){b.hide()}else{if(typeof d==="number"){a=d;f=d}else{a=d.x||0;f=d.y||0}if(a>0){a-=1}if(f>0){f-=1}e.setSpacerXY({x:a,y:f});b.show()}}},deprecated:{"5":{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(a){return this.scrollTo(0,0,a)},scrollToEnd:function(a){return this.scrollTo(Infinity,Infinity,a)}}}},privates:{getSpacer:function(){var c=this,a=c._spacer,b;if(!a){b=c.getElement();a=c._spacer=b.createChild({cls:c._spacerCls,role:"presentation"});a.setVisibilityMode(2);b.position()}return a},applySpacerXY:function(b,a){if(a&&b.x===a.x&&b.y===a.y){b=undefined}return b},updateSpacerXY:function(a){this.getSpacer().setLocalXY(a.x,a.y)},convertX:function(a){return a},doHighlight:function(b,a){if(a!==true){Ext.fly(b).highlight(a)}else{Ext.fly(b).highlight()}},fireScrollStart:function(a,d){var c=this,b=c.component;c.invokePartners("onPartnerScrollStart",a,d);if(c.hasListeners.scrollstart){c.fireEvent("scrollstart",c,a,d)}if(b&&b.onScrollStart){b.onScrollStart(a,d)}Ext.GlobalEvents.fireEvent("scrollstart",c,a,d)},fireScroll:function(a,d){var c=this,b=c.component;c.invokePartners("onPartnerScroll",a,d);if(c.hasListeners.scroll){c.fireEvent("scroll",c,a,d)}if(b&&b.onScrollMove){b.onScrollMove(a,d)}Ext.GlobalEvents.fireEvent("scroll",c,a,d)},fireScrollEnd:function(a,d){var c=this,b=c.component;c.invokePartners("onPartnerScrollEnd",a,d);if(c.hasListeners.scrollend){c.fireEvent("scrollend",c,a,d)}if(b&&b.onScrollEnd){b.onScrollEnd(a,d)}Ext.GlobalEvents.fireEvent("scrollend",c,a,d)},initXStyle:function(){var b=this.getElement(),a=this.getX();if(b&&b.dom){if(!a){a="hidden"}else{if(a===true){a="auto"}}b.setStyle("overflow-x",a)}},initYStyle:function(){var a=this.getElement(),b=this.getY();if(a&&a.dom){if(!b){b="hidden"}else{if(b===true){b="auto"}}a.setStyle("overflow-y",b)}},invokePartners:function(h,a,g){var c=this,e=c._partners,b,f,d=h==="onPartnerScrollEnd";if(!c.suspendSync&!c.isReflecting){for(f in e){b=e[f].scroller;b.isReflecting=true;b[h](c,a,g);if(d){b.isReflecting=false}}}},clearReflecting:function(){this.isReflecting=false},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){if(this.suspendSync){this.suspendSync--}},updateDomScrollPosition:function(){var d=this,c=d.getElement(),b,a=d.position;if(c&&!c.destroyed){b=d.getElementScroll(c);a.x=b.left;a.y=b.top}d.positionDirty=false;return a},getElementScroll:function(a){return a.getScroll()},onDomScroll:function(){var d=this,b,a,e,c;if(d.isTouchScroller&&Ext.supports.touchScroll===2){c=d.getElement().dom;c.scrollTop=c.scrollLeft=0;return}b=d.updateDomScrollPosition();a=b.x;e=b.y;if(!d.isScrolling){d.isScrolling=Ext.isScrolling=true;d.fireScrollStart(a,e)}d.fireScroll(a,e);d.onDomScrollEnd()},onDomScrollEnd:function(){var c=this,b=c.getPosition(),a=b.x,d=b.y;c.isScrolling=Ext.isScrolling=false;c.trackingScrollLeft=a;c.trackingScrollTop=d;c.fireScrollEnd(a,d)},onPartnerScroll:function(c,a,d){var b=c._partners[this.getId()].axis;if(b){if(b==="x"){d=null}else{if(b==="y"){a=null}}}this.doScrollTo(a,d,false,true)},restoreState:function(){var b=this,a=b.getElement(),c;if(a){c=a.dom;if(b.trackingScrollTop!==undefined){c.scrollTop=b.trackingScrollTop;c.scrollLeft=b.trackingScrollLeft}}}}},1,0,0,0,["scroller.scroller"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,"Scroller"],0));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-(b/10));this.theta=a;this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a;this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0));(Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var b=Ext.Date.now()-this.getStartTime(),c=(b/this.getAcceleration()),a=c*Math.pow(Math.E,-this.getSpringTension()*c);return this.getStartValue()+(this.getStartVelocity()*a)}},0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0));(Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(a,b){return Ext.factory(a,Ext.fx.easing.Momentum,b)},applyBounce:function(a,b){return Ext.factory(a,Ext.fx.easing.Bounce,b)},updateStartTime:function(a){this.getMomentum().setStartTime(a);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){this.lastValue=null;this.isBouncingBack=false;this.isOutOfBound=false;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var a=this.getMomentum(),j=this.getBounce(),e=a.getStartVelocity(),f=e>0?1:-1,g=this.getMinMomentumValue(),d=this.getMaxMomentumValue(),c=(f==1)?d:g,h=this.lastValue,i,b;if(e===0){return this.getStartValue()}if(!this.isOutOfBound){i=a.getValue();b=a.getVelocity();if(Math.abs(b)<this.getMinVelocity()){this.isEnded=true}if(i>=g&&i<=d){return i}this.isOutOfBound=true;j.setStartTime(Ext.Date.now()).setStartVelocity(b).setStartValue(c)}i=j.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(h!==null){if((f==1&&i<h)||(f==-1&&i>h)){this.isBouncingBack=true}}}else{if(Math.round(i)==c){this.isEnded=true}}}this.lastValue=i;return i}},0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((a/b)*this.distance)}}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var f=Ext.Date.now()-this.getStartTime(),d=this.getDuration(),b=this.getStartValue(),h=this.getEndValue(),a=this.distance,c=f/d,g=1-c,e=1-Math.pow(g,this.getExponent()),i=b+(e*a);if(f>=d){this.isEnded=true;return h}return i}},0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(a,c,b){if(b){return this.translateAnimated(a,c,b)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(a)&&typeof a=="number"){this.x=a}if(!isNaN(c)&&typeof c=="number"){this.y=c}this.doTranslate(a,c)},translateAxis:function(b,d,c){var a,e;if(b=="x"){a=d}else{e=d}return this.translate(a,e,c)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(b,a){this.activeEasingX=b;this.activeEasingY=a;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(b,h,f){var e=this;if(!Ext.isObject(f)){f={}}if(e.isAnimating){e.stopAnimation()}e.callback=f.callback;e.callbackScope=f.scope;var d=Ext.Date.now(),g=f.easing,c=(typeof b=="number")?(f.easingX||g||e.getEasingX()||true):null,a=(typeof h=="number")?(f.easingY||g||e.getEasingY()||true):null;if(c){c=e.factoryEasing(c);c.setStartTime(d);c.setStartValue(e.x);c.setEndValue(b);if("duration" in f){c.setDuration(f.duration)}}if(a){a=e.factoryEasing(a);a.setStartTime(d);a.setStartValue(e.y);a.setEndValue(h);if("duration" in f){a.setDuration(f.duration)}}return e.animate(c,a)},doAnimationFrame:function(){var e=this,c=e.activeEasingX,b=e.activeEasingY,d=Date.now(),a,f;if(!e.isAnimating){return}e.lastRun=d;if(c===null&&b===null){e.stopAnimation();return}if(c!==null){e.x=a=Math.round(c.getValue());if(c.isEnded){e.activeEasingX=null;e.fireEvent("axisanimationend",e,"x",a)}}else{a=e.x}if(b!==null){e.y=f=Math.round(b.getValue());if(b.isEnded){e.activeEasingY=null;e.fireEvent("axisanimationend",e,"y",f)}}else{f=e.y}if(e.lastX!==a||e.lastY!==f){e.doTranslate(a,f);e.lastX=a;e.lastY=f}e.fireEvent("animationframe",e,a,f)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=false;Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent("animationend",a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement();if(!this.destroyed&&!b.destroyed){b.translate(a,c)}},destroy:function(){var a=this.getElement();if(a&&!a.destroyed){a.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:true},getWrapper:function(){var c=this.wrapper,b=this.getElement(),a;if(!c){a=b.getParent();if(!a){return null}if(a.hasCls("x-translatable-hboxfix")){a=a.getParent()}if(this.getUseWrapper()){c=b.wrap()}else{c=a}b.addCls("x-translatable");c.addCls("x-translatable-container");this.wrapper=c;c.on("painted",function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return c},doTranslate:function(a,d){var c=this.getWrapper(),b;if(c){b=c.dom;if(typeof a=="number"){b.scrollLeft=500000-a}if(typeof d=="number"){b.scrollTop=500000-d}}},destroy:function(){var b=this,a=b.getElement(),c=b.wrapper;if(c){if(!a.destroyed){if(b.getUseWrapper()){c.doReplaceWith(a)}a.removeCls("x-translatable")}if(!c.destroyed){c.removeCls("x-translatable-container");c.un("painted","refresh",b)}delete b.wrapper;delete b._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollParent",Ext.util.translatable.Dom,{isScrollParent:true,applyElement:function(a){var b=Ext.get(a);if(b){this.parent=b.parent()}return b},doTranslate:function(a,c){var b=this.parent;b.setScrollLeft(Math.round(-a));b.setScrollTop(Math.round(-c))},getPosition:function(){var c=this,a=c.position,b=c.parent;a.x=b.getScrollLeft();a.y=b.getScrollTop();return a}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollParent"],0));(Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement().dom.style;if(typeof a=="number"){b.left=a+"px"}if(typeof c=="number"){b.top=c+"px"}},destroy:function(){var a=this.getElement().dom.style;a.left=null;a.top=null;Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0));(Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case"scrollposition":return new b.ScrollPosition(a);case"scrollparent":return new b.ScrollParent(a);case"csstransform":return new b.CssTransform(a);case"cssposition":return new b.CssPosition(a)}}},1,0,0,0,0,0,[Ext.util,"Translatable"],0));(Ext.cmd.derive("Ext.scroll.Indicator",Ext.Widget,{config:{axis:null,hideAnimation:true,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},cls:"x-scroll-indicator",applyHideAnimation:function(a){if(a){a=Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,a)}return a},constructor:function(a){var c=this,b;Ext.Widget.prototype.constructor.call(this,a);b=c.getAxis();c.names=c.names[b];c.element.addCls(c.cls+" "+c.cls+"-"+b)},hide:function(){var b=this,a=b.getHideDelay();if(a){b._hideTimer=Ext.defer(b.doHide,a,b)}else{b.doHide()}},setValue:function(m){var k=this,c=k.element,j=k.names,d=k.getAxis(),h=k.getScroller(),g=h.getMaxUserPosition()[d],n=h.getElementSize()[d],i=k.length,b=k.getMinLength(),a=i,f=n-i-k.sizeAdjust,o=Math.round,l=Math.max,e;if(m<0){a=o(l(i+(i*m/n),b));e=0}else{if(m>g){a=o(l(i-(i*(m-g)/n),b));e=f+i-a}else{e=o(m/g*f)}}k[j.translate](e);c[j.setLength](a)},show:function(){var b=this,a=b.element,c=a.getActiveAnimation();if(c){c.end()}if(!b._inDom){b.getScroller().getElement().appendChild(a);b._inDom=true;if(!b.size){b.cacheStyles()}}b.refreshLength();clearTimeout(b._hideTimer);a.setStyle("opacity","")},privates:{cacheStyles:function(){var b=this,a=b.element,c=b.names;b.size=a[c.getSize]();b.margin=a.getMargin(c.side)},doHide:function(){var b=this.getHideAnimation(),a=this.element;if(b){a.animate(b)}else{a.setStyle("opacity",0)}},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},refreshLength:function(){var i=this,h=i.names,d=i.getAxis(),f=i.getScroller(),a=f.getSize()[d],j=f.getElementSize()[d],g=j/a,c=i.margin*2,e=i.hasOpposite()?(c+i.size):c,b=Math.max(Math.round((j-e)*g),i.getMinLength());i.sizeAdjust=e;i.length=b;i.element[h.setLength](b)},translateX:function(a){this.element.translate(a)},translateY:function(a){this.element.translate(0,a)}}},1,["scrollindicator"],["widget","scrollindicator"],{widget:true,scrollindicator:true},["widget.scrollindicator"],0,[Ext.scroll,"Indicator"],0));(Ext.cmd.derive("Ext.scroll.TouchScroller",Ext.scroll.Scroller,{isTouchScroller:true,config:{autoRefresh:true,bounceEasing:{duration:400},elementSize:undefined,indicators:true,fps:"auto",maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},outOfBoundRestrictFactor:0.5,innerElement:null,size:undefined,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:"auto",useWrapper:false}},cls:"x-scroll-container",scrollerCls:"x-scroll-scroller",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},refreshCounter:0,constructor:function(a){var b=this,c="onEvent";b.elementListeners={touchstart:c,touchmove:c,dragstart:c,drag:c,dragend:c,scope:b};b.minPosition={x:0,y:0};b.startPosition={x:0,y:0};b.velocity={x:0,y:0};b.isAxisEnabledFlags={x:false,y:false};b.flickStartPosition={x:0,y:0};b.flickStartTime={x:0,y:0};b.lastDragPosition={x:0,y:0};b.dragDirection={x:0,y:0};Ext.scroll.Scroller.prototype.constructor.call(this,a);b.refreshAxes();b.scheduleRefresh={idle:b.doRefresh,scope:b,single:true,destroyable:true}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyElementSize:function(b){var c=this.getElement(),d,a,e;if(!c){return null}d=c.dom;if(!d){return}if(b==null){a=d.clientWidth;e=d.clientHeight}else{a=b.x;e=b.y}return{x:a,y:e}},applyIndicators:function(f,c){var e=this,b,d,a,g;if(f){if(f===true){b=d={}}else{a=f.x;g=f.y;if(a||g){b=(a==null||a===true)?{}:a;d=(a==null||g===true)?{}:g}else{b=d=f}}if(c){if(b){c.x.setConfig(b)}else{c.x.destroy();c.x=null}if(d){c.y.setConfig(d)}else{c.y.destroy();c.y=null}f=c}else{f={x:null,y:null};if(b){f.x=new Ext.scroll.Indicator(Ext.applyIf({axis:"x",scroller:e},b))}if(d){f.y=new Ext.scroll.Indicator(Ext.applyIf({axis:"y",scroller:e},d))}}}else{if(c){if(c.x){c.x.destroy()}if(c.y){c.y.destroy()}c.x=c.y=null}}return f},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyInnerElement:function(a){if(a&&!a.isElement){a=Ext.get(a)}return a},applyMaxPosition:function(c,d){if(d&&c.x===d.x&&c.y===d.y){return}var a=this.getTranslatable(),b;if(a.isAnimating){b=a.activeEasingY;if(b&&b.getStartVelocity&&b.getStartVelocity()<0&&c.y<d.y){b.setMinMomentumValue(-c.y)}}return c},applyMaxUserPosition:function(b,a){if(a&&b.x===a.x&&b.y===a.y){return}return b},applySize:function(b){var c=this.getElement(),e,d,a,f;if(typeof b==="number"){a=b;f=b}else{if(b){a=b.x;f=b.y}}if(c&&(a==null||f==null)){e=c.dom;d=this.getInnerElement().dom;if(a==null){a=Math.max(d.scrollWidth,e.clientWidth)}if(f==null){f=Math.max(d.scrollHeight,e.clientHeight)}}return{x:a,y:f}},applySlotSnapOffset:function(a){if(typeof a==="number"){a={x:a,y:a}}return a},applySlotSnapSize:function(a){if(typeof a==="number"){a={x:a,y:a}}return a},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},destroy:function(){var c=this,b=c.getElement(),d=c.getInnerElement(),a=c.sizeMonitors;if(a){a.element.destroy();a.container.destroy()}if(b&&!b.destroyed){b.removeCls(c.cls)}if(d&&!d.destroyed){d.removeCls(c.scrollerCls)}if(c._isWrapped){if(!b.destroyed){c.unwrapContent()}d.destroy()}c.setElement(null);c.setInnerElement(null);c.setIndicators(null);Ext.destroy(c.getTranslatable());Ext.scroll.Scroller.prototype.destroy.call(this)},refresh:function(a,b){var c=this;++c.refreshCounter;if(a){c.doRefresh(b)}else{if(!c.refreshScheduled){c.scheduleRefresh.args=[b];c.refreshScheduled=Ext.on(c.scheduleRefresh)}}},updateAutoRefresh:function(a){this.toggleResizeListeners(a)},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},updateElementSize:function(){if(!this.isConfiguring){this.refreshAxes()}},updateDisabled:function(a){if(!this.isConfiguring){if(a){this.detachListeners()}else{this.attachListeners()}}},updateElement:function(c,b){var e=this,f=e.getInnerElement(),d,a;if(!f){f=c.dom.firstChild;if(!f||f.nodeType!==1||!Ext.fly(f).hasCls(e.scrollerCls)){f=e.wrapContent(c)}e.setInnerElement(f)}c.addCls(e.cls);if(e.isConfiguring){if(!e.getTranslatable().isScrollParent){c.dom.style.overflowX=c.dom.style.overflowY="";d=e.elementListeners;d.mousewheel="onMouseWheel";d.scroll={fn:"onElementScroll",delegated:false,scope:e}}}if(!e.getDisabled()){e.attachListeners()}if(!e.isConfiguring){a=e.getAutoRefresh();if(a!==false){e.toggleResizeListeners(a);if(a){e.refresh()}else{if(a===null){e.setElementSize(null)}}}}},updateFps:function(a){if(a!=="auto"){this.getTranslatable().setFps(a)}},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(a){if(a){a.addCls(this.scrollerCls)}this.getTranslatable().setElement(a)},updateSize:function(a){if(!this.isConfiguring){if(Ext.supports.touchScroll===1){Ext.scroll.Scroller.prototype.updateSize.call(this,a)}this.refreshAxes()}},updateTranslatable:function(a){a.setElement(this.getInnerElement());if(!a.isScrollParent){a.on({animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this})}},updateX:function(){if(!this.isConfiguring){this.refreshAxes()}},updateY:function(){if(!this.isConfiguring){this.refreshAxes()}},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(a){return Math.min(this.getMaxPosition().x,Math.max(a,0))},constrainY:function(a){return Math.min(this.getMaxPosition().y,Math.max(a,0))},convertEasingConfig:function(a){return a},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(b){var d=this,c,a;if(d.refreshScheduled){d.refreshScheduled=d.refreshScheduled.destroy()}if(d.refreshCounter&&d.getElement()){d.stopAnimation();d.getTranslatable().refresh();if(b){c=b.size;a=b.elementSize}d.setSize(c);d.setElementSize(a);d.fireEvent("refresh",d);d.refreshCounter=0}},doScrollTo:function(j,i,b,f){var h=this,g=h.isDragging,k=h.getTranslatable().isScrollParent,a=!h.isReflecting&&!k;if(h.destroyed||!h.getElement()){return h}f=f||h.isDragging;var l=h.getTranslatable(),c=h.position,m=false,e,d;if(!g||h.isAxisEnabled("x")){if(isNaN(j)||typeof j!=="number"){j=c.x}else{if(!f){j=h.constrainX(j)}if(c.x!==j){c.x=j;m=true}}e=h.convertX(-j)}if(!g||h.isAxisEnabled("y")){if(isNaN(i)||typeof i!=="number"){i=c.y}else{if(!f){i=h.constrainY(i)}if(c.y!==i){c.y=i;m=true}}d=-i}if(m){if(a){h.onScrollStart()}if(b){l.translateAnimated(e,d,b)}else{if(!k){h.onScroll()}l.translate(e,d);if(a){h.onScrollEnd()}}}else{if(b&&b.callback){b.callback()}}return h},getAnimationEasing:function(h,k){if(!this.isAxisEnabled(h)){return null}var m=this,g=m.position[h],d=m.getMinUserPosition()[h],j=m.getMaxUserPosition()[h],b=m.getMaxAbsoluteVelocity(),f=null,c=m.dragEndTime,i=k.flick.velocity[h],n=h==="x",a,l;if(g<d){f=d}else{if(g>j){f=j}}if(n){g=m.convertX(g);f=m.convertX(f)}if(f!==null){l=m.getBounceEasing()[h];l.setConfig({startTime:c,startValue:-g,endValue:-f});return l}if(i===0){return null}if(i<-b){i=-b}else{if(i>b){i=b}}l=m.getMomentumEasing()[h];a={startTime:c,startValue:-g,startVelocity:i*1.5,minMomentumValue:-j,maxMomentumValue:0};if(n){m.convertEasingConfig(a)}l.setConfig(a);return l},getSnapPosition:function(c){var d=this,h=d.getSlotSnapSize()[c],e=null,a,g,f,b;if(h!==0&&d.isAxisEnabled(c)){a=d.position[c];g=d.getSlotSnapOffset()[c];f=d.getMaxUserPosition()[c];b=Math.floor((a-g)%h);if(b!==0){if(a!==f){if(Math.abs(b)>h/2){e=Math.min(f,a+((b>0)?h-b:b-h))}else{e=a-b}}else{e=a-b}}}return e},hideIndicators:function(){var c=this,d=c.getIndicators(),a,b;if(d){if(c.isAxisEnabled("x")){a=d.x;if(a){a.hide()}}if(c.isAxisEnabled("y")){b=d.y;if(b){b.hide()}}}},isAxisEnabled:function(a){this.getX();this.getY();return this.isAxisEnabledFlags[a]},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},onAnimationFrame:function(c,b,d){var a=this.position;a.x=this.convertX(-b);a.y=-d;this.onScroll()},onAxisDrag:function(d,p){if(p&&this.isAxisEnabled(d)){var q=this,k=q.flickStartPosition,r=q.flickStartTime,i=q.lastDragPosition,m=q.dragDirection,a=q.position[d],n=q.getMinUserPosition()[d],o=q.getMaxUserPosition()[d],g=q.startPosition[d],j=i[d],l=g-p,h=m[d],f=q.getOutOfBoundRestrictFactor(),b=q.getStartMomentumResetTime(),c=Ext.Date.now(),e;if(l<n){l*=f}else{if(l>o){e=l-o;l=o+e*f}}if(l>j){m[d]=1}else{if(l<j){m[d]=-1}}if((h!==0&&(m[d]!==h))||(c-r[d])>b){k[d]=a;r[d]=c}i[d]=l;return true}},onDomScroll:function(){var b=this,c,a;if(b.getTranslatable().isScrollParent){c=b.getElement().dom;a=b.position;a.x=c.scrollLeft;a.y=c.scrollTop}Ext.scroll.Scroller.prototype.onDomScroll.call(this)},onDrag:function(c){var a=this,b=a.lastDragPosition;if(!a.isDragging){return}if(a.onAxisDrag("x",a.convertX(c.deltaX))|a.onAxisDrag("y",c.deltaY)){a.doScrollTo(b.x,b.y)}},onDragEnd:function(d){var c=this,b,a;if(!c.isDragging){return}c.dragEndTime=Ext.Date.now();c.onDrag(d);c.isDragging=false;b=c.getAnimationEasing("x",d);a=c.getAnimationEasing("y",d);if(b||a){c.getTranslatable().animate(b,a)}else{c.onScrollEnd()}},onDragStart:function(l){var m=this,p=m.getDirection(),g=l.absDeltaX,f=l.absDeltaY,k=m.getDirectionLock(),i=m.startPosition,d=m.flickStartPosition,j=m.flickStartTime,h=m.lastDragPosition,c=m.position,b=m.dragDirection,o=c.x,n=c.y,a=Ext.Date.now();if(k&&p!=="both"){if((p==="horizontal"&&g>f)||(p==="vertical"&&f>g)){l.stopPropagation()}else{return}}h.x=o;h.y=n;d.x=o;d.y=n;i.x=o;i.y=n;j.x=a;j.y=a;b.x=0;b.y=0;m.dragStartTime=a;m.isDragging=true;if(!m.isScrolling){m.onScrollStart()}},onElementResize:function(a,b){this.refresh(true,{elementSize:{x:b.contentWidth,y:b.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(a,b){b.scrollTop=b.scrollLeft=0},onEvent:function(b){var a=this,c=b.browserEvent;if((!a.self.isTouching||a.isTouching)&&((!a.getTranslatable().isScrollParent)||(!a.isMouseEvent[c.type]&&c.pointerType!=="mouse"))&&(a.getY()||a.getX())){a[a.listenerMap[b.type]](b)}},onInnerElementResize:function(a,b){this.refresh(true,{size:{x:b.width,y:b.height}})},onMouseWheel:function(j){var k=this,m=j.getWheelDeltas(),d=-m.x,b=-m.y,g=k.position,f=k.getMaxUserPosition(),a=k.getMinUserPosition(),l=Math.max,c=Math.min,i=l(c(g.x+d,f.x),a.x),h=l(c(g.y+b,f.y),a.y);d=i-g.x;b=h-g.y;if(!d&&!b){return}j.stopEvent();k.onScrollStart();k.scrollBy(d,b);k.onScroll();k.onScrollEnd()},onPartnerScrollEnd:function(a,c){var b=this;if(!b.getTranslatable().isScrollParent){b.fireScrollEnd(a,c)}Ext.scroll.Scroller.prototype.onPartnerScrollEnd.call(this,a,c);b.isScrolling=false;b.hideIndicators()},onPartnerScrollStart:function(a,c){var b=this;b.isScrolling=true;if(!b.getTranslatable().isScrollParent){b.fireScrollStart(a,c)}b.showIndicators()},onScroll:function(){var e=this,c=e.position,b=c.x,g=c.y,f=e.getIndicators(),a,d;if(f){if(e.isAxisEnabled("x")){a=f.x;if(a){a.setValue(b)}}if(e.isAxisEnabled("y")){d=f.y;if(d){d.setValue(g)}}}e.fireScroll(b,g)},onScrollEnd:function(){var b=this,a=b.position;if(b.isScrolling&&!b.isTouching&&!b.snapToSlot()){b.hideIndicators();b.isScrolling=Ext.isScrolling=false;b.fireScrollEnd(a.x,a.y)}},onScrollStart:function(){var b=this,a=b.position;if(!b.isScrolling){b.showIndicators();b.isScrolling=Ext.isScrolling=true;b.fireScrollStart(a.x,a.y)}},onTouchEnd:function(){var a=this;a.isTouching=a.self.isTouching=false;if(!a.isDragging&&a.snapToSlot()){a.onScrollStart()}},onTouchMove:function(a){a.preventDefault()},onTouchStart:function(){var a=this;a.isTouching=a.self.isTouching=true;Ext.getDoc().on({touchend:"onTouchEnd",scope:a,single:true});a.stopAnimation()},refreshAxes:function(){var e=this,c=e.isAxisEnabledFlags,k=e.getSize(),j=e.getElementSize(),i=e.getIndicators(),b,a,h,g,d,f;if(!k||!j){return}b=Math.max(0,k.x-j.x);a=Math.max(0,k.y-j.y);h=e.getX();g=e.getY();e.setMaxPosition({x:b,y:a});if(h===true||h==="auto"){c.x=!!b}else{if(h===false){c.x=false;d=i&&i.x;if(d){d.hide()}}else{if(h==="scroll"){c.x=true}}}if(g===true||g==="auto"){c.y=!!a}else{if(g===false){c.y=false;f=i&&i.y;if(f){f.hide()}}else{if(g==="scroll"){c.y=true}}}e.setMaxUserPosition({x:c.x?b:0,y:c.y?a:0});if(Ext.supports.touchScroll===1){e.initXStyle();e.initYStyle()}},showIndicators:function(){var c=this,d=c.getIndicators(),a,b;if(d){if(c.isAxisEnabled("x")){a=d.x;if(a){a.show()}}if(c.isAxisEnabled("y")){b=d.y;if(b){b.show()}}}},snapToBoundary:function(){var h=this,g=h.getPosition();if(h.isConfiguring||!(g.x||g.y)){return}var c=h.getMinUserPosition(),f=h.getMaxUserPosition(),e=c.x,d=c.y,b=f.x,a=f.y,j=Math.round(g.x),i=Math.round(g.y);if(j<e){j=e}else{if(j>b){j=b}}if(i<d){i=d}else{if(i>a){i=a}}h.doScrollTo(j,i)},snapToSlot:function(){var a=this,c=a.getSnapPosition("x"),b=a.getSnapPosition("y"),d=a.getSlotSnapEasing();if(c!==null||b!==null){a.doScrollTo(c,b,{easingX:d.x,easingY:d.y});return true}return false},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(a){var c=this,b=c.getElement(),f,e,d;if(b){d=c.getInnerElement();if(a){f=e="on"}else{if(a===null){f="on";e="un"}else{f=e="un"}}b[f]("resize","onElementResize",c);d[e]("resize","onInnerElementResize",c)}},unwrapContent:function(){var a=this.getInnerElement().dom,b=this.getElement().dom,c;while((c=a.firstChild)){b.insertBefore(c,a)}},wrapContent:function(a){var b=document.createElement("div"),c=a.dom,d;while(d=c.lastChild){b.insertBefore(d,b.firstChild)}c.appendChild(b);this.setInnerElement(b);this._isWrapped=true;return this.getInnerElement()}}},1,0,0,0,["scroller.touch"],0,[Ext.scroll,"TouchScroller"],0));(Ext.cmd.derive("Ext.scroll.DomScroller",Ext.scroll.Scroller,{isDomScroller:true,getMaxPosition:function(){var b=this.getElement(),a=0,d=0,c;if(b&&!b.destroyed){c=b.dom;a=c.scrollWidth-c.clientWidth;d=c.scrollHeight-c.clientHeight}return{x:a,y:d}},getMaxUserPosition:function(){var c=this,b=c.getElement(),a=0,e=0,d;if(b&&!b.destroyed){d=b.dom;if(c.getX()){a=d.scrollWidth-d.clientWidth}if(c.getY()){e=d.scrollHeight-d.clientHeight}}return{x:a,y:e}},getPosition:function(){var a=this;if(a.positionDirty){a.updateDomScrollPosition()}return a.position},getSize:function(){var b=this.getElement(),a,c;if(b&&!b.destroyed){c=b.dom;a={x:c.scrollWidth,y:c.scrollHeight}}else{a={x:0,y:0}}return a},updateElement:function(b,a){this.initXStyle();this.initYStyle()},updateX:function(a){this.initXStyle()},updateY:function(a){this.initYStyle()},privates:{doScrollTo:function(j,h,a){var g=this,d=g.getElement(),e,b,k,l,f,c;if(d&&!d.destroyed){b=d.dom;l=(j===Infinity);f=(h===Infinity);if(l||f){e=g.getMaxPosition();if(l){j=e.x}if(f){h=e.y}}j=g.convertX(j);if(a){k={};if(h!=null){k.scrollTop=h}if(j!=null){k.scrollLeft=j}d.animate(Ext.mergeIf({to:{scrollTop:h,scrollLeft:j}},a))}else{if(h!=null){b.scrollTop=h}if(j!=null){b.scrollLeft=j;if(Ext.isIE8){c=b.scrollLeft;b.scrollLeft=j}}}g.positionDirty=true}},getElementScroll:function(a){return a.getScroll()},stopAnimation:function(){var a=this.getElement().getActiveAnimation();if(a){a.end()}}}},0,0,0,0,["scroller.dom"],0,[Ext.scroll,"DomScroller"],function(a){Ext.onDocumentReady(function(){a.document=new a({x:true,y:true,element:document.body})})}));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:true,shadow:"sides",animateShadow:false,constrain:false,config:{activeCounter:0,alwaysOnTop:false},preventDefaultAlign:false,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var d=this,c=d.el,e=d.shadow,a,b;if(e){b={mode:(e===true)?"sides":e};a=d.shadowOffset;if(a){b.offset=a}b.animate=d.animateShadow;b.fixed=d.fixed;c.enableShadow(b,false)}if(d.shim||Ext.useShims){c.enableShim({fixed:d.fixed},false)}c.setVisibilityMode(d._visModeMap[d.hideMode]);d.el.on({mousedown:d.onMouseDown,scope:d,capture:true});d.registerWithOwnerCt();d.initHierarchyEvents()},alignTo:function(c,a,f,d){var e=this,b;Ext.un("scroll",e.onAlignToScroll,e);if(c.isComponent){b=c.el}else{if(c.nodeType){b=Ext.fly(c)}else{b=c}}if(!b.contains(e.el)){Ext.on("scroll",e.onAlignToScroll,e)}e._lastAlignTarget=c;e._lastAlignToPos=a;e.mixins.positionable.alignTo.call(e,b,a,f,d)},initFloatConstrain:function(){var a=this,b=a.floatParent;if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},initHierarchyEvents:function(){var b=this,a=this.syncHidden;if(!b.hasHierarchyEventListeners){b.mon(Ext.GlobalEvents,{hide:a,collapse:a,show:a,expand:a,added:a,scope:b});b.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var c=this,b=c.ownerCt,a=c.zIndexParent;if(a){a.unregisterFloatingItem(c)}a=c.zIndexParent=c.up("[floating]");c.floatParent=b||a;c.initFloatConstrain();delete c.ownerCt;if(a){a.registerFloatingItem(c)}else{Ext.WindowManager.register(c)}},onMouseDown:function(f){var b=this,a=b.focusTask,c=f.pointerType==="touch",d,g,h;if(b.floating&&(!a||!a.id)){d=f.target;g=b.el.dom;while(!c&&d&&d!==g){if(Ext.fly(d).isFocusable()){c=true}d=d.parentNode}h=Ext.WindowManager.getActive()===b&&(d===g||c);if(!h){b.toFront(c)}}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){var a=this.el;if(a.shadow||a.shim){a.setUnderlaysVisible(true);a.syncUnderlays()}},syncHidden:function(){var c=this,d=c.hidden||!c.rendered,a=c.hierarchicallyHidden=c.isHierarchicallyHidden(),b=c.pendingShow;if(d!==a){if(a){c.hide();c.pendingShow=true}else{if(b){delete c.pendingShow;if(b.length){c.show.apply(c,b)}else{c.show()}}}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingDescendants){a=Math.floor(b.floatingDescendants.setBase(a)/100)*100+10000}return a},doConstrain:function(a){var b=this,c=b.calculateConstrainedPosition(a,null,true);if(c){b.setPosition(c)}},updateActiveCounter:function(a){var b=this.zIndexParent;if(b&&this.bringParentToFront!==false){b.setActiveCounter(++Ext.ZIndexManager.activeCounter)}b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},updateAlwaysOnTop:function(a){var b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},toFront:function(b){var a=this;if(a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)){if(a.hasListeners.tofront){a.fireEvent("tofront",a,a.el.getZIndex())}}return a},setActive:function(d,b){var c=this,a;if(d){if(c.el.shadow&&!c.maximized){c.el.enableShadow(null,true)}if(b){a=Ext.ComponentManager.getActiveComponent();if(!a||!a.up(c)){c.focus()}}c.fireEvent("activate",c)}else{c.fireEvent("deactivate",c)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b;if(a.isVisible()){b=a.getAlignToXY(a.container,"c-c");a.setPagePosition(b)}else{a.needsCenter=true}return a},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(c){var f=this,e=f.floatParent,b=e?e.getTargetEl():f.container,a=b.getViewSize(),d=e||(b.dom!==document.body)?[0,0]:b.getXY();a.x=d[0];a.y=d[1];f.setBox(a,c)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var a=this;if(a._lastAlignTarget){Ext.un("scroll",a.onAlignToScroll,a);a._lastAlignPos=a._lastAlignTarget=null}},onAlignToScroll:function(a){var e=this,b=e._lastAlignTarget,c=b.isFloating,d,f;if(b){if(b.isComponent){d=b.destroyed;b=b.el}else{if(b.nodeType){b=Ext.fly(b)}f=b.dom;d=!f||Ext.isGarbage(f)}if(d){e.clearAlignEl()}else{if((a.getElement().contains(b)||c)&&!a.getElement().contains(e.el)){e.alignTo(b,e._lastAlignToPos)}}}}}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:true,lazy:true,merge:function(f,a,e,d){var c=a?Ext.Object.chain(a):{},b,g;if(f instanceof Array){for(b=f.length;b--;){g=f[b];if(!d||!(g in c)){if(typeof g==="string"){c[g]={name:g,itemId:g}}else{c[g.name]=g}}}}else{if(f){if(f.constructor===Object){for(b in f){if(!d||!(b in c)){g=f[b];if(g===true){c[b]={itemId:b}}else{if(typeof g==="string"){c[b]={itemId:g}}else{c[b]=g;if(!("itemId" in g)){g.itemId=b}}}c[b].name=b}}}else{if(!d||!(f in c)){c[f]={name:f,itemId:f}}}}}return c}}},destroy:function(){var c=this,b=c.getChildEls(),d,a;for(a in b){d=c[a];if(d){if(d.destroy){d.component=null;d.destroy()}c[a]=null}}},privates:{addChildEl:function(a){var c=this,b=c.getChildEls();if(!c.hasOwnProperty("childEls")){c.childEls=b=Ext.Object.chain(b)}if(typeof a==="string"){a={name:a,itemId:a}}b[a.name]=a},afterClassMixedIn:function(c){var b=c.prototype,a=b.childEls;if(a){delete b.childEls;c.getConfigurator().add({childEls:a})}},attachChildEls:function(d,c){var h=this,i=h.getChildEls(),g=c||h,n=g.id+"-",m=!g.frame,o,a,l,f,e,j,b;for(o in i){l=i[o];if(m&&l.frame){continue}e=l.select;if(e){j=d.select(e,true)}else{if(!(e=l.selectNode)){if(!(b=l.id)){b=n+l.itemId;j=Ext.cache[b]}else{j=Ext.cache[b]||d.getById(b)}}else{j=d.selectNode(e,false)}}if(j){if(j.isElement){j.component=g}else{if(j.isComposite&&!j.isLite){a=j.elements;for(f=a.length;f--;){a[f].component=g}}}}h[o]=j||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,ariaEl:"el",_layerCls:"x-layer",_fixedLayerCls:"x-fixed-layer",ariaStaticRoles:{presentation:true,article:true,definition:true,directory:true,document:true,img:true,heading:true,math:true,note:true,banner:true,complementary:true,contentinfo:true,navigation:true,search:true,"undefined":true,"null":true},statics:{makeRenderSetter:function(a,c){var b=a.name;return function(e){var d=this,g=(d.renderConfigs||(d.renderConfigs={})),f=g[c];if(d._renderState>=c){(a.setter||a.getSetter()).call(d,e)}else{if(!f){g[c]=f={}}if(!(b in f)){f[b]=d[b]}d[b]=e}return d}},processRenderConfig:function(a,k,c){var g=this.prototype,e=this.getConfigurator(),l=Ext.util.Renderable,j=l.makeRenderSetter,d=a[k],h,i,b,f;for(b in d){i=Ext.Config.get(b);if(!g[f=i.names.set]){h=(i.renderSetter||(i.renderSetter={}));g[f]=h[c]||(h[c]=j(i,c))}}delete a[k];e.add(d)}},onClassMixedIn:function(c){var a=c.override,e=this.processRenderConfig,d=function(f){if(f.beforeRenderConfig){this.processRenderConfig(f,"beforeRenderConfig",1)}if(f.renderConfig){this.processRenderConfig(f,"renderConfig",3)}a.call(this,f)},b=function(g,f){g.override=d;g.processRenderConfig=e;if(f.beforeRenderConfig){g.processRenderConfig(f,"beforeRenderConfig",1)}if(f.renderConfig){g.processRenderConfig(f,"renderConfig",3)}};b(c,c.prototype);c.onExtended(b)},afterRender:function(){var h=this,d={},b=h.protoEl,g=h.el,e,i,c,f,a;h.finishRenderChildren();h._renderState=4;if(h.contentEl){c="x-";f=c+"hidden-";a=h.contentEl=Ext.get(h.contentEl);a.component=h;a.removeCls([c+"hidden",f+"display",f+"offsets"]);h.getContentTarget().appendChild(a.dom)}b.writeTo(d);i=d.removed;if(i){g.removeCls(i)}i=d.cls;if(i.length){g.addCls(i)}i=d.style;if(d.style){g.setStyle(i)}h.protoEl=null;if(!h.ownerCt&&!h.skipLayout){h.updateLayout()}if(!(h.x&&h.y)&&(h.pageX||h.pageY)){h.setPagePosition(h.pageX,h.pageY)}if(h.disableOnRender){h.onDisable()}e=h.controller;if(e&&e.afterRender){e.afterRender(h)}},afterFirstLayout:function(d,k){var f=this,j=f.x,h=f.y,i=f.defaultAlign,b=f.alignOffset,e,c,a,g,l;if(!f.ownerLayout){c=j!==undefined;a=h!==undefined}if(f.floating&&!f.preventDefaultAlign&&(!c||!a)){if(f.floatParent){g=f.floatParent.getTargetEl().getViewRegion();l=f.el.getAlignToXY(f.alignTarget||f.floatParent.getTargetEl(),i,b);g.x=l[0]-g.x;g.y=l[1]-g.y}else{l=f.el.getAlignToXY(f.alignTarget||f.container,i,b);g=f.el.translateXY(l[0],l[1])}j=c?j:g.x;h=a?h:g.y;c=a=true}if(c||a){f.setPosition(j,h)}f.onBoxReady(d,k);e=f.controller;if(e&&e.boxReady){e.boxReady(f)}},beforeRender:function(){var d=this,e=d.floating,c=d.getComponentLayout(),b=d.userCls,a;d._renderState=1;d.ariaUsesMainElement=d.ariaEl==="el";a=d.controller;if(a&&a.beforeRender){a.beforeRender(d)}d.initBindable();if(d.renderConfigs){d.flushRenderConfigs()}if(d.reference){d.publishState()}if(b){d.addCls(b)}if(e){d.addCls(d.fixed?d._fixedLayerCls:d._layerCls);b=e.cls;if(b){d.addCls(b)}}d.frame=d.frame||d.alwaysFramed;if(!c.initialized){c.initLayout()}d.initOverflow();d.setUI(d.ui)},doApplyRenderTpl:function(c,a){var d=a.$comp,b;if(!d.rendered){b=d.initRenderTpl();b.applyOut(a.renderData,c)}},getElConfig:function(){var e=this,g=e.autoEl,d=e.getFrameInfo(),b={tag:"div",tpl:d?e.initFramingTpl(d.table):e.initRenderTpl()},h=e.layoutTargetCls,f=e.protoEl,a=e.ariaRole,c;e.initStyles(f);if(h&&!d){f.addCls(h)}f.writeTo(b);f.flush();if(g){if(Ext.isString(g)){b.tag=g}else{Ext.apply(b,g)}}if(a&&e.ariaUsesMainElement){b.role=a;if(!e.ariaStaticRoles[a]){b["aria-hidden"]=!!e.hidden;b["aria-disabled"]=!!e.disabled;if(e.ariaLabel&&!e.ariaLabelledBy){b["aria-label"]=e.ariaLabel}if(e.collapsible){b["aria-expanded"]=!e.collapsed}if(e.ariaRenderAttributes){Ext.apply(b,e.ariaRenderAttributes)}if(e.config.ariaAttributes){Ext.apply(b,e.getAriaAttributes())}}}b.id=e.id;if(b.tpl){if(d){b.tplData=c=e.getFrameRenderData();c.renderData=e.initRenderData()}else{b.tplData=e.initRenderData()}}e.ariaRenderAttributes=null;return b},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},getRenderTree:function(){var b=this,a=null;if(!b.hasListeners.beforerender||b.fireEvent("beforerender",b)!==false){b._renderState=1;b.beforeRender();b.rendering=true;b._renderState=2;a=b.getElConfig();if(b.el){a.id=b.$pid=Ext.id(null,b.el.identifiablePrefix)}}return a},initRenderData:function(){var c=this,a=c.ariaRole,d,b;d=Ext.apply({$comp:c,id:c.id,ui:c.ui,uiCls:c.uiCls,baseCls:c.baseCls,componentCls:c.componentCls,frame:c.frame,renderScroller:c.touchScroll,scrollerCls:c.scrollerCls,childElCls:""},c.renderData);if(a&&!c.ariaUsesMainElement){b={role:a};if(!c.ariaStaticRoles[a]){b["aria-hidden"]=!!c.hidden;b["aria-disabled"]=!!c.disabled;if(c.ariaLabel&&!c.ariaLabelledBy){b["aria-label"]=c.ariaLabel}if(c.collapsible){b["aria-expanded"]=!c.collapsed}if(c.ariaRenderAttributes){Ext.apply(b,c.ariaRenderAttributes)}if(c.config.ariaAttributes){Ext.apply(b,c.getAriaAttributes())}}d.ariaAttributes=b}return d},onRender:function(d,e){var f=this,h=f.x,g=f.y,c=null,b=f.el,a,i;f.applyRenderSelectors();f.rendering=null;f.rendered=true;f._renderState=3;if(f.renderConfigs){f.flushRenderConfigs()}if(h!=null){c={x:h}}if(g!=null){(c=c||{}).y=g}if(!f.getFrameInfo()){a=f.width;i=f.height;if(typeof a==="number"){c=c||{};c.width=a}if(typeof i==="number"){c=c||{};c.height=i}}if(f.touchScroll===1){f.getOverflowEl().disableTouchScroll()}f.lastBox=b.lastBox=c},render:function(c,b){var e=this,d=e.el,h=e.ownerLayout,g,a,f;if(d&&!d.isElement){e.wrapPrimaryEl(d);d=e.el}if(!e.skipLayout){Ext.suspendLayouts()}c=e.initContainer(c);f=e.getInsertPosition(b);if(!d){a=e.getRenderTree();if(h&&h.transformItemRenderTree){a=h.transformItemRenderTree(a)}if(a){if(f){d=Ext.DomHelper.insertBefore(f,a)}else{d=Ext.DomHelper.append(c,a)}e.wrapPrimaryEl(d);e.cacheRefEls(d)}}else{if(!e.hasListeners.beforerender||e.fireEvent("beforerender",e)!==false){e.beforeRender();e.needsRenderTpl=e.rendering=true;e._renderState=2;e.initStyles(d);if(e.allowDomMove!==false){if(f){c.dom.insertBefore(d.dom,f)}else{c.dom.appendChild(d.dom)}}}else{g=true}}if(d&&!g){e.finishRender(b)}if(!e.skipLayout){Ext.resumeLayouts(!e.hidden&&!c.isDetachedBody)}},ensureAttachedToBody:function(c){var b=this,a;while(b.ownerCt){b=b.ownerCt}if(b.container.isDetachedBody){b.container=a=Ext.getBody();a.appendChild(b.el.dom);if(c){b.updateLayout()}if(typeof b.x==="number"||typeof b.y==="number"){b.setPosition(b.x,b.y)}}},privates:{applyRenderSelectors:function(){var d=this,b=d.renderSelectors,c=d.el,e,a;d.attachChildEls(c);d.ariaEl=d[d.ariaEl]||d.el;if(b){for(a in b){e=b[a];if(e){d[a]=c.selectNode(e,false)}}}},cacheRefEls:function(e){e=e||this.el;var c=Ext.cache,g=Ext.dom.Element,h=e.isElement?e.dom:e,b=h.querySelectorAll("[data-ref]"),a=b.length,f,d;for(d=0;d<a;d++){f=b[d];if(!c[f.id]){new g(f)}}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(a.renderTo||document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(a,d){var b=d.$comp,c=b.data;if(b.html){Ext.DomHelper.generateMarkup(b.html,a);delete b.html}if(b.tpl){if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}if(c){b.data=c=c.isEntity?c.getData(true):c;b.tpl.applyOut(c,a)}}},doRenderFramingDockedItems:function(a,c,d){var b=c.$comp;if(!b.rendered&&b.doRenderDockedItems){c.renderData.$skipDockedItems=true;b.doRenderDockedItems.call(this,a,c,d)}},flushRenderConfigs:function(){var d=this,g=d.renderConfigs,f=d._renderState,h,c,b,a,e;if(g){for(c=0;c<=f;++c){h=g[c];if(h){g[c]=null;for(b in h){e=h[b];(a||(a={}))[b]=d[b];d[b]=e}}}if(a){d.setConfig(a)}}},finishRender:function(g){var j=this,a=Ext.cache,i,f,b,h,e,d,c;if(!j.el||j.$pid){if(j.container){c=a[j.id];d=c?c.dom:j.container.getById(j.id,true)}else{b=j.$pid||j.id;c=a[b];d=c?c.dom:Ext.getDom(b)}if(!j.el){j.wrapPrimaryEl(d)}else{delete j.$pid;if(!j.el.dom){j.wrapPrimaryEl(j.el)}d.parentNode.insertBefore(j.el.dom,d);i=d;d=j.el.dom;f=d.firstChild;while(i.firstChild){d.insertBefore(i.firstChild,f)}j.el.addCls(i.className);Ext.removeNode(i)}}else{if(j.needsRenderTpl){h=j.initRenderTpl();if(h){e=j.initRenderData();h.insertFirst(j.getTargetEl(),e)}j.cacheRefEls()}}j.el.component=j;if(!j.container){j.container=Ext.get(j.el.dom.parentNode)}if(j.ctCls){j.container.addCls(j.ctCls)}j.onRender(j.container,g);if(!j.overflowInited){j.initOverflow()}j.el.setVisibilityMode(Ext.Element[j.hideMode.toUpperCase()]);if(j.overCls){j.el.hover(j.addOverCls,j.removeOverCls,j)}if(j.hasListeners.render){j.fireEvent("render",j)}j.afterRender();if(j.hasListeners.afterrender){j.fireEvent("afterrender",j)}j.initEvents();if(j.hidden){j.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getFrameRenderData:function(){var c=this,b=c.frameSize,a="";if(c._syncFrameHeight&&c.height){a="height:"+(c.height-b.height)+"px"}return{$comp:c,id:c.id,fgid:c.id+"-frame",ui:c.ui,uiCls:c.uiCls,frameCls:c.frameCls,frameBodyCls:c.layoutTargetCls||"",baseCls:c.baseCls,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom,mcStyle:a,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var o=this,i=o.frameInfoCache,c=o.getFramingInfoCls()+"-frameInfo",p=i[c],h,k,g,q,d,e,j,r,n,b,l,a,f,m;if(p==null){h=Ext.fly(o.getStyleProxy(c),"frame-style-el");k=h.getStyle("font-family");if(k){k=k.split("-");g=parseInt(k[1],10);q=parseInt(k[2],10);d=parseInt(k[3],10);e=parseInt(k[4],10);j=parseInt(k[5],10);r=parseInt(k[6],10);n=parseInt(k[7],10);b=parseInt(k[8],10);l=parseInt(k[9],10);a=parseInt(k[10],10);f=parseInt(k[11],10);m=parseInt(k[12],10);p={table:k[0].charAt(0)==="t",vertical:k[0].charAt(1)==="v",top:g,right:q,bottom:d,left:e,width:e+q,height:g+d,border:{top:j,right:r,bottom:n,left:b,width:b+r,height:j+n},padding:{top:l,right:a,bottom:f,left:m,width:m+a,height:l+f}}}else{p=false}i[c]=p}o.frame=!!p;o.frameSize=p;return p},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));a.className=b;return a},getFrameTpl:function(a){return this.getTpl(a?"frameTableTpl":"frameTpl")},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=a.dom?a:Ext.get(a);return b.container},initOverflow:function(){var d=this,a=d.getOverflowStyle(),f=d.scrollFlags,e=d.getOverflowEl(),c=(f.y||f.x),b=d.touchScroll=(c&&Ext.supports.touchScroll);if(!c||!e||!e.isElement){return}d.overflowInited=true;if(b===2){e.setStyle("overflow","hidden")}else{e.setStyle(a)}},doRenderPadding:function(a,c){var b=c.$comp;if(b.touchScroll){a.push("padding:",b.unitizeBox(b.padding))}},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},initRenderTpl:function(){var a=this.getTpl("renderTpl");if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent;a.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var m=this,g=m.el.dom,l=m.frameTable,c=m.frameBody,o=c.dom,k=m.getFrameInfo(),p,f,b,e,j,q,r,d,h,a,n;b=document.createElement("div");q=m.getFrameRenderData();d=m.getFrameTpl(k.table);d.insertFirst(b,q);n=b.querySelectorAll("[data-ref]");a=b.querySelector('[data-ref="frameBody"]');for(j=o;j.parentNode!==g;){j=j.parentNode}while(b.firstChild){g.insertBefore(b.firstChild,j)}a.parentNode.replaceChild(o,a);o.className=a.className;c.setSize();p=m.getChildEls();if(l){l.destroy();m.frameTable=null}for(f in p){if(p[f].frame){e=m[f];if(e&&e!==c){e.destroy();m[f]=null}}}for(h=n.length;h--;){f=(r=n[h]).getAttribute("data-ref");if(f!=="frameBody"){m[f]=new Ext.dom.Element(r)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(a){var b=this;Ext.apply(b,a);b.state={};b.mixins.observable.constructor.call(b)},get:function(c,a){var b=this.state[c];return b===undefined?a:b},clear:function(a){var b=this;delete b.state[a];b.fireEvent("statechange",b,a,null)},set:function(a,c){var b=this;b.state[a]=c;b.fireEvent("statechange",b,a,c)},decodeValue:function(f){var c=this,j=/^(a|n|d|b|s|o|e)\:(.*)$/,b=j.exec(unescape(f)),g,d,a,i,e,h;if(!b||!b[1]){return}d=b[1];f=b[2];switch(d){case"e":return null;case"n":return parseFloat(f);case"d":return new Date(Date.parse(f));case"b":return(f==="1");case"a":g=[];if(f){i=f.split("^");e=i.length;for(h=0;h<e;h++){f=i[h];g.push(c.decodeValue(f))}}return g;case"o":g={};if(f){i=f.split("^");e=i.length;for(h=0;h<e;h++){f=i[h];a=f.split("=");g[a[0]]=c.decodeValue(a[1])}}return g;default:return f}},encodeValue:function(e){var f="",d=0,b,a,c;if(e==null){return"e:1"}else{if(typeof e==="number"){b="n:"+e}else{if(typeof e==="boolean"){b="b:"+(e?"1":"0")}else{if(Ext.isDate(e)){b="d:"+e.toUTCString()}else{if(Ext.isArray(e)){for(a=e.length;d<a;d++){f+=this.encodeValue(e[d]);if(d!==a-1){f+="^"}}b="a:"+f}else{if(typeof e==="object"){for(c in e){if(typeof e[c]!=="function"&&e[c]!==undefined){f+=c+"="+this.encodeValue(e[c])+"^"}}b="o:"+f.substring(0,f.length-1)}else{b="s:"+e}}}}}}return escape(b)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",stateful:false,saveDelay:100,constructor:function(){var a=this;if(!a.stateEvents){a.stateEvents=[]}if(a.stateful!==false){a.addStateEvents(a.stateEvents);a.initState()}},addStateEvents:function(d){var f=this,c,e,b,a;if(f.stateful&&f.getStateId()){a=(typeof d==="string")?arguments:d;b=f.stateEventsByName||(f.stateEventsByName={});for(c=a.length;c--;){e=a[c];if(e&&!b[e]){b[e]=1;f.on(e,f.onStateChange,f)}}}},onStateChange:function(){var c=this,a=c.saveDelay,d,b;if(!c.stateful){return}if(a){if(!c.stateTask){d=Ext.state.Stateful;b=d.runner||(d.runner=new Ext.util.TaskRunner());c.stateTask=b.newTask({run:c.saveState,scope:c,interval:a,repeat:1,fireIdleEvent:false})}c.stateTask.start()}else{c.saveState()}},saveState:function(){var h=this,b=h.stateful&&h.getStateId(),g=h.hasListeners,c,e,d,f,a,j;if(b){a=h.getState()||{};c=h.getPlugins()||[];for(d=0,f=c.length;d<f;d++){e=c[d];if(e&&e.getState){j=e.getState(a);if(j&&!a[e.ptype]){a[e.ptype]=j}}}if(!g.beforestatesave||h.fireEvent("beforestatesave",h,a)!==false){Ext.state.Manager.set(b,a);if(g.statesave){h.fireEvent("statesave",h,a)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var j=this,b=j.stateful&&j.getStateId(),h=j.hasListeners,a,k,e,g,d,f,c;if(b){k=Ext.state.Manager.get(b);if(k){a=Ext.apply({},k);if(!h.beforestaterestore||j.fireEvent("beforestaterestore",j,k)!==false){d=j.getPlugins()||[];for(e=0,g=d.length;e<g;e++){f=d[e];if(f){c=f.ptype;if(f.applyState){f.applyState(a[c],k)}delete a[c]}}j.applyState(a);if(h.staterestore){j.fireEvent("staterestore",j,k)}}}}},savePropToState:function(f,e,d){var b=this,c=b[f],a=b.initialConfig;if(b.hasOwnProperty(f)){if(!a||a[f]!==c){if(e){e[d||f]=c}return true}}return false},savePropsToState:function(e,c){var b=this,a,d;if(typeof e==="string"){b.savePropToState(e,c)}else{for(a=0,d=e.length;a<d;++a){b.savePropToState(e[a],c)}}return c},destroy:function(){var b=this,a=b.stateTask;if(a){a.destroy();b.stateTask=null}b.clearListeners()}},1,0,0,0,0,0,[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",hasFocus:false,focusable:false,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var a=this;Ext.destroy(a.focusListeners);a.focusListeners=a.focusEnterEvent=a.focusTask=null;a.focusEl=a.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var d=this,b,c=d.focusCls,a;if(d.hasFocus){b=d.findFocusTarget();if(b){b.focus()}}a=d.getFocusClsEl();if(c&&a){a.removeCls(d.removeClsWithUI(c,true))}},isFocusable:function(a){var c=this,b;if(!c.focusable&&(!c.isContainer||!a)){return false}b=c.getFocusEl();if(b&&c.canFocus()){return b.isFocusable(a)}return false},canFocus:function(b,d){var c=this,a;a=(c.isContainer||c.focusable)&&c.rendered&&!c.destroying&&!c.destroyed&&!c.disabled&&(b||c.isVisible(true));return a||(d&&!!c.findFocusTarget())},focus:function(f,c,h,d){var e=this,a,g,b;if((!e.focusable&&!e.isContainer)||e.destroyed||e.destroying){return}if(c){e.getFocusTask().delay(Ext.isNumber(c)?c:10,e.focus,e,[f,false,h,d]);return e}e.cancelFocus();if(e.canFocus()){if(a=e.getFocusEl()){if(a.isComponent){return a.focus(f,c,h,d)}g=a.dom;if(g){if(e.floating){b=e.container.dom.scrollTop}a.focus();if(f){if(Ext.isArray(f)){if(e.selectText){e.selectText.apply(e,f)}}else{if(g.select){g.select()}else{if(e.selectText){e.selectText()}}}}Ext.callback(h,d)}if(e.floating){if(b!==undefined){e.container.dom.scrollTop=b}}}}else{a=e.findFocusTarget();if(a){return a.focus(f,c,h,d)}}return e},cancelFocus:function(){var a=this.getFocusTask();if(a){a.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable||d.destroying){return}d.beforeBlur(f);if(b){b.beforeFocusableChildBlur(d,f)}a=d.getFocusClsEl();if(c&&a){a.removeCls(d.removeClsWithUI(c,true))}if(d.validateOnBlur){d.validate()}d.hasFocus=false;d.fireEvent("blur",d,f);d.postBlur(f);if(b){b.afterFocusableChildBlur(d,f)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable){return}if(d.canFocus()){d.beforeFocus(f);if(b){b.beforeFocusableChildFocus(d,f)}a=d.getFocusClsEl();if(c&&a){a.addCls(d.addClsWithUI(c,true))}if(!d.hasFocus){d.hasFocus=true;d.fireEvent("focus",d,f)}d.postFocus(f);if(b){b.afterFocusableChildFocus(d,f)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var c=this,b,a;if(!c.focusable){return}b=c.rendered&&c.getFocusEl();if(b){if(b.isComponent){a=b.getTabIndex()}else{if(b.isElement){a=b.getAttribute("tabIndex")}else{return}}c.tabIndex=a}else{a=c.tabIndex}return a-0},setTabIndex:function(d,a){var c=this,b;if(!c.focusable){return}c.tabIndex=d;if(!c.rendered){return}b=a||c.getFocusEl();if(b){if(b.isComponent){b.setTabIndex(d)}else{if(b.isElement){b.set({tabIndex:d})}}}},onFocusEnter:function(b){var a=this;if(a.floating&&a!==a.zIndexManager.getActive()){a.toFront(true)}a.focusEnterEvent=b;a.containsFocus=true;a.fireEvent("focusenter",a,b)},onFocusLeave:function(b){var a=this;a.focusEnterEvent=null;a.containsFocus=false;a.fireEvent("focusleave",a,b)},privates:{revertFocus:function(){var d=this,c=d.previousFocus,b=d.focusEnterEvent,a;d.previousFocus=null;if(d.preventRefocus||!d.el.contains(Ext.Element.getActiveElement())){return}a=c||(b&&b.fromComponent);if(a){if(a.canFocus&&a.canFocus(false,true)){a.focus();return}else{if(a.nodeType){a=Ext.fly(a)}if(a.isFocusable&&a.isFocusable()){a.focus();return}}}if(b){a=Ext.fly(b.relatedTarget);if(Ext.isIE8||(a.isFocusable&&a.isFocusable())){a.focus()}}},findFocusTarget:function(){var b=this,a,c;for(a=b.up(":not([disabled])");a;a=a.up(":not([disabled])")){c=Ext.ComponentQuery.query(":focusable:not([hasFocus])",a);if(c.length){return c[0]}if(a.isFocusable&&a.isFocusable()){return a}}},initFocusableElement:function(){var c=this,a=c.tabIndex,b=c.getFocusEl();if(b&&!b.isComponent){c.focusEl=b;if(a!=null&&c.canFocus(true)){c.setTabIndex(a,b)}b.dom.setAttribute("data-componentid",c.id);if(c.config.keyHandlers){c.initKeyHandlers(b)}}},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},handleFocusEvent:function(b){var a;if(this.isFocusing(b)){a=new Ext.event.Event(b.event);a.type="focus";a.relatedTarget=b.fromElement;a.target=b.toElement;this.onFocus(a)}},handleBlurEvent:function(b){var a;if(this.isBlurring(b)){a=new Ext.event.Event(b.event);a.type="blur";a.target=b.fromElement;a.relatedTarget=b.toElement;this.onBlur(a)}},isFocusing:function(b){var d=b.fromElement,c=b.toElement,a;if(this.focusable){a=this.getFocusEl();if(a){if(a.isComponent){return a.isFocusing(d,c)}else{return c===a.dom&&d!==c}}}return false},isBlurring:function(b){var d=b.fromElement,c=b.toElement,a;if(this.focusable){a=this.getFocusEl();if(a){if(a.isComponent){return a.isBlurring(d,c)}else{return d===a.dom&&d!==c}}}return false},blur:function(){var b=this,a;if(!b.focusable||!b.canFocus()){return}a=b.getFocusEl();if(a){b.blurring=true;a.blur();delete b.blurring}return b},disableTabbing:function(){var c=this,b=c.el,a;if(b){b.saveTabbableState()}a=c.getFocusEl();if(a){if(a.isComponent){a.disableTabbing()}else{if(a.isElement&&b&&!b.contains(a)){a.saveTabbableState()}}}},enableTabbing:function(){var c=this,b=c.el,a;a=c.getFocusEl();if(a){if(a.isComponent){a.enableTabbing()}else{if(a.isElement&&b&&!b.contains(a)){a.restoreTabbableState()}}}if(b){b.restoreTabbableState()}}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}}));(Ext.cmd.derive("Ext.mixin.Accessible",Ext.Mixin,{mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:true}},privates:{getAriaLabelEl:function(c){var e=[],g,d,b,f,a;if(c){if(Ext.isFunction(c)){return c.call(this)}else{if(!Ext.isArray(c)){c=[c]}g=this.lookupReferenceHolder();if(g){for(d=0,b=c.length;d<b;d++){f=g.lookupReference(c[d]);if(f){e.push(f.ariaEl.id)}}}}}return e.length?e.join(" "):null}}},0,0,0,0,0,0,[Ext.mixin,"Accessible"],0));(Ext.cmd.derive("Ext.util.KeyboardInteractive",Ext.Mixin,{mixinConfig:{id:"keyboardinteractive"},config:{keyHandlers:{$value:null,lazy:true}},initKeyHandlers:function(b){var d=this,a=d.getKeyHandlers(),c;for(c in a){b.on("keydown",d.handleKeydown,d);d.keydownListenerAttached=true;break}},applyKeyHandlers:function(e){var g=this,c={},b,f,h,d,a;if(e){for(f in e){d=e[f];if(typeof d==="function"){c[f]=d}else{c[f]=g[d]}}if(g.focusable&&g.rendered&&!g.destroyed&&!g.destroying){b=g.getFocusEl();if(b&&!g.keydownListenerAttached){b.on("keydown",g.handleKeydown,g);g.keydownListenerAttached=true}}}return c},handleKeydown:function(d){var c=this,b,a;b=d.getKeyName();if(b){a=c.getKeyHandlers()[b];if(a){a.call(c,d)}}}},0,0,0,0,0,0,[Ext.util,"KeyboardInteractive"],0));(Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:"x-aria-highcontrast",cancelLayout:function(a,c){var b=this.runningLayoutContext||this.pendingLayouts;if(b){b.cancelComponent(a,false,c)}},fromElement:function(c,b,a){return Ext.ComponentManager.fromElement(c,b,a)},flushLayouts:function(){var b=this,a=b.pendingLayouts;if(a&&a.invalidQueue.length){b.pendingLayouts=null;b.runningLayoutContext=a;Ext.override(a,{runComplete:function(){b.runningLayoutContext=null;var c=this.callParent();if(Ext.GlobalEvents.hasListeners.afterlayout){Ext.GlobalEvents.fireEvent("afterlayout")}return c}});a.run()}},resumeLayouts:function(a){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(a){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(b,e){var c=this,a=c.runningLayoutContext,d;if(a){a.queueInvalidate(b)}else{d=c.pendingLayouts||(c.pendingLayouts=new Ext.layout.Context());d.queueInvalidate(b);if(!e&&!c.layoutSuspendCount&&!b.isLayoutSuspended()){c.flushLayouts()}}}},$configPrefixed:false,$configStrict:false,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:"html",alignTarget:null,autoRender:false,autoShow:false,baseCls:"x-component",childEls:{frameTable:{frame:true},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var a=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){a.push("p")}return new RegExp("^(?:"+a.join("|")+")$","i")}()),disabledCls:"x-item-disabled",draggable:false,floating:false,hidden:false,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:true,synthetic:false,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:true,autoGenId:false,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:false,frameSize:null,horizontalPosProp:"left",isComponent:true,_isLayoutRoot:false,layoutSuspendCount:0,liquidLayout:false,maskOnDisable:true,offsetsCls:"x-hidden-offsets",rendered:false,rootCls:"x-body",scrollerCls:"x-scroll-scroller",scrollerSelector:".x-scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"auto",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"auto",overflowY:"scroll",x:true,y:true,both:true}},"false":{auto:{overflowX:"hidden",overflowY:"auto",x:false,y:true,both:false},"false":{overflowX:"hidden",overflowY:"hidden",x:false,y:false,both:false},scroll:{overflowX:"hidden",overflowY:"scroll",x:false,y:true,both:false}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"scroll",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"scroll",overflowY:"scroll",x:true,y:true,both:true}},none:{overflowX:"",overflowY:"",x:false,y:false,both:false}},_scrollableCfg:{x:{x:true,y:false},y:{x:false,y:true},horizontal:{x:true,y:false},vertical:{x:false,y:true},both:{x:true,y:true},"true":{x:true,y:true}},validIdRe:Ext.validIdRe,constructor:function(a){var g=this,c,f,h,e,k,d,b,j;a=a||{};if(a.initialConfig){if(a.isAction){g.baseAction=a}a=a.initialConfig}else{if(a.tagName||a.dom||Ext.isString(a)){a={applyTo:a,id:a.id||a}}}g.initialConfig=a;g.getId();g.protoEl=new Ext.util.ProtoElement();g.initConfig(a);if(g.scrollable==null){k=g.autoScroll;if(k){j=!!k}else{d=g.overflowX;b=g.overflowY;if(d||b){j={x:(d&&d!=="hidden")?d:false,y:(b&&b!=="hidden")?b:false}}}if(j){g.setScrollable(j)}}h=g.xhooks;if(h){delete g.xhooks;Ext.override(g,h)}g.mixins.elementCt.constructor.call(g);g.setupProtoEl();if(g.cls){g.initialCls=g.cls;g.protoEl.addCls(g.cls)}if(g.style){g.initialStyle=g.style;g.protoEl.setStyle(g.style)}g.renderData=g.renderData||{};g.initComponent();if(!g.preventRegister){Ext.ComponentManager.register(g)}g.mixins.state.constructor.call(g);g.addStateEvents("resize");e=g.getController();if(e){e.init(g)}if(g.plugins){for(c=0,f=g.plugins.length;c<f;c++){g.plugins[c]=g.initPlugin(g.plugins[c])}}g.loader=g.getLoader();if(g.disabled){g.disabled=false;g.disable(true)}if(g.renderTo){g.render(g.renderTo)}if(g.autoShow&&!g.$initParent){g.show()}if(g.baseAction){g.baseAction.addComponent(g)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.addCls.apply(b,arguments);return c},addClsWithUI:function(c,h){var g=this,f=[],e=0,d=g.uiCls=Ext.Array.clone(g.uiCls),b=g.activeUI,a,j;if(typeof c==="string"){c=(c.indexOf(" ")<0)?[c]:Ext.String.splitWords(c)}a=c.length;for(;e<a;e++){j=c[e];if(j&&!g.hasUICls(j)){d.push(j);if(b){f=f.concat(g.addUIClsToElement(j))}}}if(h!==true&&b){g.addCls(f)}return f},afterComponentLayout:function(d,b,c,f){var e=this,a;if(++e.componentLayoutCounter===1){a=e.scrollable;if(a){if(e.touchScroll&&a.isTouchScroller){a.setInnerElement(e.getScrollerEl())}a.setElement(e.getOverflowEl());if(Ext.isIE){Ext.on("show",e.onGlobalShow,e)}}e.afterFirstLayout(d,b)}if(d!==c||b!==f){e.onResize(d,b,c,f)}if(e.floating){e.onAfterFloatLayout()}},addPlugin:function(b){var a=this;b=a.constructPlugin(b);if(a.plugins){a.plugins.push(b)}else{a.plugins=[b]}if(a.pluginsInitialized){a.initPlugin(b)}return b},addPropertyToState:function(e,d,c){var b=this,a=arguments.length;if(a===3||b.hasOwnProperty(d)){if(a<3){c=b[d]}if(c!==b.initialConfig[d]){(e||(e={}))[d]=c}}return e},addUIClsToElement:function(h){var e=this,b=e.baseCls+"-"+e.ui+"-"+h,a=["x-"+h,e.baseCls+"-"+h,b],d,g,c,f;if(e.rendered&&e.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=e.getChildEls();for(g in d){f=d[g].frame;if(f&&f!==true){c=e[g];if(c){c.addCls(b+f)}}}}return a},removeUIClsFromElement:function(h){var e=this,b=e.baseCls+"-"+e.ui+"-"+h,a=["x-"+h,e.baseCls+"-"+h,b],d,g,c,f;if(e.rendered&&e.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=e.getChildEls();for(g in d){f=d[g].frame;if(f&&f!==true){c=e[g];if(c){c.removeCls(b+f)}}}}return a},adjustPosition:function(a,d){var b=this,c;if(b.isContainedFloater()){c=b.floatParent.getTargetEl().getViewRegion();a+=c.left;d+=c.top}return{x:a,y:d}},afterHide:function(a,c){var d=this,b=d.focusableContainer;d.hiddenByLayout=null;if(this.ownerLayout){this.updateLayout({isRoot:false})}Ext.callback(a,c||d);d.fireHierarchyEvent("hide");d.fireEvent("hide",d);if(b){b.onFocusableChildHide(d)}},afterSetPosition:function(a,c){var b=this;b.onPosition(a,c);if(b.hasListeners.move){b.fireEvent("move",b,a,c)}},afterShow:function(g,b,e){var f=this,h=f.el,a,c,d;g=f.getAnimateTarget(g);if(!f.ghost){g=null}if(g){c={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};a={x:g.getX(),y:g.getY(),width:g.dom.offsetWidth,height:g.dom.offsetHeight};h.addCls(f.offsetsCls);d=f.ghost();d.el.stopAnimation();d.setX(-10000);f.ghostBox=c;d.el.animate({from:a,to:c,listeners:{afteranimate:function(){delete d.componentLayout.lastComponentSize;f.unghost();delete f.ghostBox;h.removeCls(f.offsetsCls);f.onShowComplete(b,e)}}})}else{f.onShowComplete(b,e)}f.fireHierarchyEvent("show")},animate:function(c){var s=this,f,k,j,a,d,b,r,o,l,e,p,m,g,n,q,i;c=c||{};d=c.to||{};if(Ext.fx.Manager.hasFxBlock(s.id)){return s}f=Ext.isDefined(d.width);if(f){a=Ext.Number.constrain(d.width,s.minWidth,s.maxWidth)}k=Ext.isDefined(d.height);if(k){j=Ext.Number.constrain(d.height,s.minHeight,s.maxHeight)}if(!c.dynamic&&(f||k)){o=(c.from?c.from.width:undefined)||s.getWidth();l=o;e=(c.from?c.from.height:undefined)||s.getHeight();p=e;m=false;if(k&&j>e){p=j;m=true}if(f&&a>o){l=a;m=true}if(k||f){i=s.el.getStyle("overflow");if(i!=="hidden"){s.el.setStyle("overflow","hidden")}}if(m){b=!Ext.isNumber(s.width);r=!Ext.isNumber(s.height);s.setSize(l,p);s.el.setSize(o,e);if(b){delete s.width}if(r){delete s.height}}if(f){d.width=a}if(k){d.height=j}}g=s.constrain;n=s.constrainHeader;if(g||n){s.constrain=s.constrainHeader=false;q=c.callback;c.callback=function(){s.constrain=g;s.constrainHeader=n;if(q){q.call(c.scope||s,arguments)}if(i!=="hidden"){s.el.setStyle("overflow",i)}}}return s.mixins.animate.animate.apply(s,arguments)},applyScrollable:function(b,d){var a=this,f=a.rendered,e,c;if(b){if(b===true||typeof b==="string"){e=a._scrollableCfg[b];b=e}if(d){d.setConfig(b);b=d}else{b=Ext.Object.chain(b);if(f){b.element=a.getOverflowEl();c=a.getScrollerEl();if(c){b.innerElement=c}}b.autoRefresh=false;if(Ext.supports.touchScroll===1){b.translatable={translationMethod:"scrollparent"};b.indicators=false}b=Ext.scroll.Scroller.create(b);b.component=a}}else{if(d){d.setConfig({x:false,y:false});d.destroy();b=null}}if(a.rendered&&!a.destroying&&!a.destroyed){if(b){a.getOverflowStyle()}else{a.scrollFlags=a._scrollFlags.none}a.updateLayout()}return b},beforeComponentLayout:function(){return true},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(i,g,b){var f=this,h=null,d,c,a,e;if(i){if(Ext.isNumber(d=i[0])){b=g;g=i[1];i=d}else{if((d=i.x)!==undefined){b=g;g=i.y;i=d}}}if(f.constrain||f.constrainHeader){h=f.calculateConstrainedPosition(null,[i,g],true);if(h){i=h[0];g=h[1]}}c=(i!==undefined);a=(g!==undefined);if(c||a){f.x=i;f.y=g;e=f.adjustPosition(i,g);h={x:e.x,y:e.y,anim:b,hasX:c,hasY:a}}return h},beforeShow:Ext.emptyFn,bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.getBubbleTarget()}return this},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},cloneConfig:function(c){c=c||{};var d=c.id||Ext.id(),a=Ext.applyIf(c,this.initialConfig),b;a.id=d;b=Ext.getClass(this);return new b(a)},destroy:function(){var f=this,c=f.renderSelectors,b=f.getConfig("viewModel",true),g=f.getConfig("session",true),a,e,d;if(!f.hasListeners.beforedestroy||f.fireEvent("beforedestroy",f)!==false){f.isDestroying=f.destroying=true;e=f.floatParent||f.ownerCt;if(f.floating){delete f.floatParent;if(f.zIndexManager){f.zIndexManager.unregister(f);f.zIndexManager=null}}f.removeBindings();f.beforeDestroy();f.destroyBindable();if(e&&e.remove){e.remove(f,false)}f.stopAnimation();f.onDestroy();Ext.destroy(f.plugins);if(f.rendered){Ext.Component.cancelLayout(f,true)}f.componentLayout=null;if(f.hasListeners.destroy){f.fireEvent("destroy",f)}if(!f.preventRegister){Ext.ComponentManager.unregister(f)}f.mixins.state.destroy.call(f);if(f.floating){f.onFloatDestroy()}f.clearListeners();if(f.rendered){if(!f.preserveElOnDestroy){f.el.destroy()}f.el.component=null;f.mixins.elementCt.destroy.call(f);if(c){for(a in c){if(c.hasOwnProperty(a)){d=f[a];if(d){delete f[a];d.destroy()}}}}f.data=f.el=f.frameBody=f.rendered=f.afterRenderEvents=null;f.tpl=f.renderTpl=f.renderData=null;f.focusableContainer=f.container=f.scrollable=null}f.isDestroying=f.destroying=false;f.callParent()}},disable:function(c,e){var d=this,b=d.focusableContainer,a=d.getInherited();if(!e){a.disabled=true;d.savedDisabled=true}if(d.maskOnDisable){a.disableMask=true}if(!d.disabled){if(b){b.beforeFocusableChildDisable(d)}d.addCls(d.disabledCls);if(d.rendered){d.onDisable()}else{d.disableOnRender=true}d.disabled=true;if(c!==true){d.fireEvent("disable",d)}if(b){b.onFocusableChildDisable(d)}}return d},doFireEvent:function(b,d,a){var e=this,c=e.mixins.observable.doFireEvent.call(e,b,d,a);if(c!==false){c=e.mixins.componentDelegation.doFireDelegatedEvent.call(e,b,d)}return c},enable:function(c,e){var d=this,b=d.focusableContainer,a=d.getInherited();if(!e){delete d.getInherited().disabled;d.savedDisabled=false}if(d.maskOnDisable){delete a.disableMask}if(d.disabled){if(!(e&&a.hasOwnProperty("disabled"))){if(b){b.beforeFocusableChildEnable(d)}d.disableOnRender=false;d.removeCls(d.disabledCls);if(d.rendered){d.onEnable()}d.disabled=false;if(c!==true){d.fireEvent("enable",d)}if(b){b.onFocusableChildEnable(d)}}}return d},findParentBy:function(a){var b;for(b=this.getRefOwner();b&&!a(b,this);b=b.getRefOwner()){}return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},findPlugin:function(d){var b,a=this.plugins,c=a&&a.length;for(b=0;b<c;b++){if(a[b].ptype===d){return a[b]}}},getAnimateTarget:function(a){a=a||this.animateTarget;if(a){a=a.isComponent?a.getEl():Ext.get(a)}return a||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent"))}return a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(a){var c=this,b=c.componentLayout;if(c.hidden){a.hidden=true}if(c.collapseImmune){a.collapseImmune=true}if(c.modelValidation!==undefined){a.modelValidation=c.modelValidation}if(c.savedDisabled){a.disabled=true}c.mixins.bindable.initInheritedState.call(c,a);if(b&&b.initInheritedState){b.initInheritedState(a)}},getId:function(){var a=this,b;if(!(a.id||(a.id=a.initialConfig.id))){b=a.getXType();if(b){b=b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{b=Ext.name.toLowerCase()+"-comp"}a.id=b+"-"+a.getAutoId()}return a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var b=this,a=b.loader;if(a){if(!a.isLoader){b.loader=new Ext.ComponentLoader(Ext.apply({target:b},a))}else{a.setTarget(b)}return b.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(b){var c,a=this.plugins,d=a&&a.length;for(c=0;c<d;c++){if(a[c].pluginId===b){return a[c]}}return null},getPosition:function(a){var b=this,d,c=b.isContainedFloater(),e;if((a===true)&&!c){return[b.getLocalX(),b.getLocalY()]}d=b.getXY();if((a===true)&&c){e=b.floatParent.getTargetEl().getViewRegion();d[0]-=e.left;d[1]-=e.top}return d},getScrollX:function(){var a=this.getScrollable();return a?a.getPosition().x:0},getScrollY:function(){var a=this.getScrollable();return a?a.getPosition().y:0},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(j){var n=this,a=Ext.layout.SizeModel,d=n.componentLayout.ownerContext,b=n.width,p=n.height,q,c,g,f,h,o,l,m,k,i,e=n.floating||n.floated;if(d){i=d.widthModel;h=d.heightModel}if(!i||!h){g=((q=typeof b)==="number");f=((c=typeof p)==="number");k=e||!(o=n.ownerLayout);if(k){l=Ext.layout.Layout.prototype.autoSizePolicy;m=e?3:n.shrinkWrap;if(g){i=a.configured}if(f){h=a.configured}}else{l=o.getItemSizePolicy(n,j);m=o.isItemShrinkWrap(n)}if(d){d.ownerSizePolicy=l}m=(m===true)?3:(m||0);if(k&&m){if(b&&q==="string"){m&=2}if(p&&c==="string"){m&=1}}if(m!==3){if(!j){j=n.ownerCt&&n.ownerCt.getSizeModel()}if(j){m|=(j.width.shrinkWrap?1:0)|(j.height.shrinkWrap?2:0)}}if(!i){if(!l.setsWidth){if(g){i=a.configured}else{i=(m&1)?a.shrinkWrap:a.natural}}else{if(l.readsWidth){if(g){i=a.calculatedFromConfigured}else{i=(m&1)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{i=a.calculated}}}if(!h){if(!l.setsHeight){if(f){h=a.configured}else{h=(m&2)?a.shrinkWrap:a.natural}}else{if(l.readsHeight){if(f){h=a.calculatedFromConfigured}else{h=(m&2)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{h=a.calculated}}}}return i.pairsByHeightOrdinal[h.ordinal]},getState:function(){var b=this,c=null,a=b.getSizeModel();if(a.width.configured){c=b.addPropertyToState(c,"width")}if(a.height.configured){c=b.addPropertyToState(c,"height")}return c},getUserCls:function(){return this.userCls},setUserCls:function(a){var b=this,c=b.userCls;if(a!==c){b.userCls=a;if(b.rendered){b.el.replaceCls(c,a)}}return c},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var c=this.self,d,b,a;if(!c.xtypes){d=[];b=this;while(b){a=b.xtypes;if(a!==undefined){d.unshift.apply(d,a)}b=b.superclass}c.xtypeChain=d;c.xtypes=d.join("/")}return c.xtypes},hasCls:function(a){var b=this.rendered?this.el:this.protoEl;return b.hasCls.apply(b,arguments)},hasUICls:function(a){var b=this,c=b.uiCls||[];return Ext.Array.contains(c,a)},hide:function(d,a,b){var c=this;if(c.pendingShow){c.pendingShow=false}if(!(c.rendered&&!c.isVisible())){if(!c.hasListeners.beforehide||c.fireEvent("beforehide",c)!==false||c.hierarchicallyHidden){c.getInherited().hidden=c.hidden=true;c.fireHierarchyEvent("beforehide");if(c.rendered){c.onHide.apply(c,arguments)}}}return c},initComponent:function(){var c=this,b=c.width,a=c.height;if(c.plugins&&!c.plugins.processed){c.plugins=c.constructPlugins()}c.pluginsInitialized=true;if(b!=null||a!=null){c.setSize(b,a)}if(c.listeners){c.on(c.listeners);c.listeners=null}if(c.focusable){c.initFocusable()}},initEvents:function(){var e=this,g=e.afterRenderEvents,b,d,f,c,a;if(g){for(f in g){d=e[f];if(d&&d.on){b=g[f];for(c=0,a=b.length;c<a;++c){e.mon(d,b[c])}}}}if(e.focusable){e.initFocusableEvents()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isDescendantOf:function(a){var b;for(b=this.getRefOwner();b&&b!==a;b=b.getRefOwner()){}return b||null},isAncestor:function(a){while(a){if(a.getRefOwner()===this){return true}a=a.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var d=this,c=false,a,b;for(;(a=d.ownerCt||d.floatParent);d=a){b=a.getInherited();if(b.hidden){c=true;break}if(d.getInherited().collapseImmune){if(a.collapsed&&!d.collapseImmune){c=true;break}}else{c=!!b.collapsed;break}}return c},isLayoutChild:function(a){return !this.floating&&!!this.up(a)},isLayoutRoot:function(){var a=this,b=a.ownerLayout;if(!b||a._isLayoutRoot||a.floating){return true}return b.isItemLayoutRoot(a)},isLayoutSuspended:function(){var a=this,b;while(a){if(a.layoutSuspendCount||a.suspendLayout){return true}b=a.ownerLayout;if(!b){break}a=b.owner}return false},isVisible:function(a){var b=this,c;if(b.hidden||!b.rendered||b.destroyed){c=true}else{if(a){c=b.isHierarchicallyHidden()}}return !c},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},isMasked:function(a){var b=this;return !!(b.masked||(b.loadMask&&b.loadMask.isVisible())||(a&&b.getInherited().masked))},setMasked:function(c){var b=this,a=b.focusableContainer;if(c){b.masked=true;b.getInherited().masked=c}else{b.masked=false;delete b.getInherited().masked}if(a){a.onFocusableChildMasked(b,c)}return b},mask:function(e,c,a){var b=this.lastBox,d=this.getMaskTarget()||this.el;if(b){a=b.height}d.mask(e,c,a);this.setMasked(true)},nextNode:function(d,h){var b=this,c=b.ownerCt,j,e,g,f,a;if(h&&b.is(d)){return b}if(c){for(e=c.items.items,f=Ext.Array.indexOf(e,b)+1,g=e.length;f<g;f++){a=e[f];if(a.is(d)){return a}if(a.down){j=a.down(d);if(j){return j}}}return c.nextNode(d)}return null},nextSibling:function(b){var f=this.ownerCt,d,e,a,g;if(f){d=f.items;a=d.indexOf(this)+1;if(a){if(b){for(e=d.getCount();a<e;a++){if((g=d.getAt(a)).is(b)){return g}}}else{if(a<d.getCount()){return d.getAt(a)}}}}return null},onAdded:function(b,d,a){var c=this;c.ownerCt=b;c.onInheritedAdd(c,a);if(c.hasListeners&&c.hasListeners.added){c.fireEvent("added",c,b,d)}if(Ext.GlobalEvents.hasListeners.added){c.fireHierarchyEvent("added")}},onRemoved:function(b){var a=this,c;if(Ext.GlobalEvents.hasListeners.removed){a.fireHierarchyEvent("removed")}if(a.hasListeners.removed){a.fireEvent("removed",a,a.ownerCt)}if(!b){a.removeBindings()}a.onInheritedRemove(b);a.ownerCt=a.ownerLayout=null},onBoxReady:function(c,a){var d=this,b;if(d.ariaLabelledBy||d.ariaDescribedBy){if(d.ariaLabelledBy){b=d.getAriaLabelEl(d.ariaLabelledBy);if(b){d.ariaEl.dom.setAttribute("aria-labelledby",b)}}if(d.ariaDescribedBy){b=d.getAriaLabelEl(d.ariaDescribedBy);if(b){d.ariaEl.dom.setAttribute("aria-describedby",b)}}}if(d.resizable){d.initResizable(d.resizable)}if(d.draggable){d.initDraggable()}if(d.hasListeners.boxready){d.fireEvent("boxready",d,c,a)}},onDestroy:function(){var b=this,a=b.focusableContainer;if(b.rendered){Ext.destroy(b.dd,b.resizer,b.proxy,b.proxyWrap,b.resizerComponent,b.scrollable,b.contentEl)}if(a){a.onFocusableChildDestroy(b)}if(b.focusable){b.destroyFocusable()}Ext.destroy(b.componentLayout,b.loadMask,b.floatingDescendants)},onDisable:function(){var a=this,b,c;if(a.focusable){a.disableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute("aria-disabled",true)}if(a.maskOnDisable&&!a.getInheritedConfig("disableMask",true)){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=true}if(!a.nonMaskableRe.test(c)){a.mask()}}},onEnable:function(){var a=this,b,c;if(a.focusable){a.enableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute("aria-disabled",false)}if(a.maskOnDisable&&a.getInherited().hasOwnProperty("masked")){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=false}if(!a.nonMaskableRe.test(c)){a.unmask()}}},onGlobalShow:function(a){if(this.up(a)){this.getScrollable().restoreState()}},onHide:function(g,a,e){var f=this,c,d,b;if(!f.ariaStaticRoles[f.ariaRole]){f.ariaEl.dom.setAttribute("aria-hidden",true)}f.revertFocus();g=f.getAnimateTarget(g);if(!f.ghost){g=null}if(g){b={x:g.getX(),y:g.getY(),width:g.dom.offsetWidth,height:g.dom.offsetHeight};c=f.ghost();c.el.stopAnimation();d=f.getSize();c.el.animate({to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();c.setHiddenState(true);c.el.setSize(d);f.afterHide(a,e)}}})}f.el.hide();if(!g){f.afterHide(a,e)}},onPosition:Ext.emptyFn,onResize:function(c,a,b,e){var d=this;if(d.floating&&d.constrain){d.doConstrain()}d.refreshScroll();if(d.hasListeners.resize){d.fireEvent("resize",d,c,a,b,e)}},onShow:function(){var a=this;if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute("aria-hidden",false)}a.el.show();a.updateLayout({isRoot:false});if(a.floating){if(a.maximized){a.fitContainer()}else{if(a.constrain){a.doConstrain()}}}},onShowComplete:function(a,c){var d=this,b=d.focusableContainer;if(d.floating){d.onFloatShow()}Ext.callback(a,c||d);d.fireEvent("show",d);if(b){b.onFocusableChildShow(d)}delete d.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(b,d){var h=this,g=h.ownerCt,a,f,e,c;if(d&&h.is(b)){return h}if(g){for(f=g.items.items,e=Ext.Array.indexOf(f,h)-1;e>-1;e--){c=f[e];if(c.query){a=c.query(b);a=a[a.length-1];if(a){return a}}if(c.is(b)){return c}}return g.previousNode(b,true)}return null},previousSibling:function(b){var e=this.ownerCt,d,a,f;if(e){d=e.items;a=d.indexOf(this);if(a!==-1){if(b){for(--a;a>=0;a--){if((f=d.getAt(a)).is(b)){return f}}}else{if(a){return d.getAt(--a)}}}}return null},registerFloatingItem:function(b){var a=this;if(!a.floatingDescendants){a.floatingDescendants=new Ext.ZIndexManager(a)}a.floatingDescendants.register(b)},removeCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.removeCls.apply(b,arguments);return c},removeClsWithUI:function(d,k){var j=this,h=[],f=0,a=Ext.Array,g=a.remove,e=j.uiCls=a.clone(j.uiCls),c=j.activeUI,b,l;if(typeof d==="string"){d=(d.indexOf(" ")<0)?[d]:Ext.String.splitWords(d)}b=d.length;for(f=0;f<b;f++){l=d[f];if(l&&j.hasUICls(l)){g(e,l);if(c){h=h.concat(j.removeUIClsFromElement(l))}}}if(k!==true&&c){j.removeCls(h)}return h},resumeLayouts:function(b){var a=this;if(!a.rendered){return}if(a.layoutSuspendCount&&!--a.layoutSuspendCount){a.suspendLayout=false;if(b&&!a.isLayoutSuspended()){a.updateLayout(b)}}},scrollBy:function(c,b,d){var a=this.getScrollable();if(a){a.scrollBy(c,b,d)}},scrollTo:function(b,d,c){var a=this.getScrollable();if(a){a.scrollTo(b,d,c)}},setAutoScroll:function(a){this.setScrollable(!!a);return this},setBorder:function(b,d){var c=this,a=!!d;if(c.rendered||a){if(!a){d=c.el}if(!b){b=0}else{if(b===true){b="1px"}else{b=this.unitizeBox(b)}}d.setStyle("border-width",b);if(!a){c.updateLayout()}}c.border=b},setDock:function(c){var b=this,a=b.ownerCt;if(c!==b.dock){if(a&&a.moveDocked){a.moveDocked(b,c)}else{b.dock=c}}return b},setDisabled:function(a){return this[a?"disable":"enable"]()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(undefined,a)},setLoading:function(c,d){var b=this,a={target:b};if(b.rendered){if(c!==false){if(Ext.isString(c)){a.msg=c}else{Ext.apply(a,c)}if(!b.loadMask||!b.loadMask.isLoadMask){if(d&&a.useTargetEl==null){a.useTargetEl=true}b.loadMask=new Ext.LoadMask(a)}else{Ext.apply(b.loadMask,a)}if(b.loadMask.isVisible()){b.loadMask.syncMaskState()}else{b.loadMask.show()}}else{if(b.loadMask&&b.loadMask.isLoadMask){b.loadMask.hide()}}}return b.loadMask},setMargin:function(c,b){var a=this;if(a.rendered){if(!c&&c!==0){c=""}else{if(c===true){c=5}c=this.unitizeBox(c)}a.margin=c;a.margin$=null;a.getEl().setStyle("margin",c);if(!b){a.updateLayout(a._notAsLayoutRoot)}}else{a.margin=c}},setOverflowXY:function(b,a){this.setScrollable({x:(b&&b!=="hidden")?b:false,y:(a&&a!=="hidden")?a:false});return this},setPagePosition:function(a,f,b){var c=this,d,e;if(Ext.isArray(a)){f=a[1];a=a[0]}c.pageX=a;c.pageY=f;if(c.floating){if(c.isContainedFloater()){e=c.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(e.left)){a-=e.left}if(Ext.isNumber(f)&&Ext.isNumber(e.top)){f-=e.top}}else{d=c.el.translateXY(a,f);a=d.x;f=d.y}c.setPosition(a,f,b)}else{d=c.el.translateXY(a,f);c.setPosition(d.x,d.y,b)}return c},setPosition:function(a,e,b){var c=this,d=c.beforeSetPosition.apply(c,arguments);if(d&&c.rendered){a=d.x;e=d.y;if(b){if(a!==c.getLocalX()||e!==c.getLocalY()){c.stopAnimation();c.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(c.afterSetPosition,c,[a,e])},to:{left:a,top:e}},b))}}else{c.setLocalXY(a,e);c.afterSetPosition(a,e)}}return c},setScrollX:function(b,c){var a=this.getScrollable();if(a){a.scrollTo(b,null,c)}},setScrollY:function(c,b){var a=this.getScrollable();if(a){a.scrollTo(null,c,b)}},setSize:function(d,a){var e=this,b=e.width,g=e.height,f,c;if(d&&typeof d==="object"){a=d.height;d=d.width}if(typeof d==="number"){e.width=Ext.Number.constrain(d,e.minWidth,e.maxWidth)}else{if(d===null){delete e.width}else{if(typeof d==="string"){f=true;e.width=d}}}if(typeof a==="number"){e.height=Ext.Number.constrain(a,e.minHeight,e.maxHeight)}else{if(a===null){delete e.height}else{if(typeof a==="string"){c=true;e.height=a}}}if(e.rendered&&e.isVisible()){if(b!==e.width||g!==e.height){if(e.liquidLayout||f||c){e.el.setSize(e.width,e.height)}e.updateLayout(e._notAsLayoutRoot)}}return e},setStyle:function(c,b){var a=this.el||this.protoEl;a.setStyle(c,b);return this},setUI:function(c){var b=this,e=b.uiCls,d=b.activeUI,a;if(c===d){return}if(d){a=b.removeClsWithUI(e,true);if(a.length){b.removeCls(a)}b.removeUIFromElement()}else{b.uiCls=[]}b.ui=c;b.activeUI=c;b.addUIToElement();a=b.addClsWithUI(e,true);if(a.length){b.addCls(a)}if(b.rendered){b.updateLayout()}},setVisible:function(a){return this[a?"show":"hide"]()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(d,a,b){var c=this,e=c.rendered;if(c.hierarchicallyHidden||(c.floating&&!e&&c.isHierarchicallyHidden())){if(!e){c.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;c.pendingShow=arguments}else{c.pendingShow=true}}else{if(e&&c.isVisible()){if(c.floating){c.onFloatShow()}}else{if(c.fireEvent("beforeshow",c)!==false){c.hidden=false;delete this.getInherited().hidden;Ext.suspendLayouts();if(!e&&(c.autoRender||c.floating)){c.doAutoRender();e=c.rendered}if(e){c.beforeShow();Ext.resumeLayouts();c.onShow.apply(c,arguments);c.afterShow.apply(c,arguments)}else{Ext.resumeLayouts(true)}}else{c.onShowVeto()}}}return c},showAt:function(a,d,b){var c=this;if(!c.rendered&&(c.autoRender||c.floating)){c.x=a;c.y=d;return c.show()}if(c.floating){c.setPosition(a,d,b)}else{c.setPagePosition(a,d,b)}return c.show()},showBy:function(b,d,c){var a=this;if(a.floating&&b){a.alignTarget=b;if(d){a.defaultAlign=d}if(c){a.alignOffset=c}a.show();if(!a.hidden){a.alignTo(b,d||a.defaultAlign,c||a.alignOffset)}}return a},suspendLayouts:function(){var a=this;if(!a.rendered){return}if(++a.layoutSuspendCount===1){a.suspendLayout=true}},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(false)},unregisterFloatingItem:function(b){var a=this;if(a.floatingDescendants){a.floatingDescendants.unregister(b)}},up:function(d,e){var c=this.getRefOwner(),b=typeof e==="string",g=typeof e==="number",a=e&&e.isComponent,f=0;if(d){for(;c;c=c.getRefOwner()){f++;if(d.isComponent){if(c===d){return c}}else{if(Ext.ComponentQuery.is(c,d)){return c}}if(b&&c.is(e)){return}if(g&&f===e){return}if(a&&c===e){return}}}return c},update:function(d,g,j,b){var i=this,k=(i.tpl&&!Ext.isString(d)),h=i.getScrollable(),c=i.focusableContainer,f,a,e;if(k){i.data=(d&&d.isEntity)?d.getData(true):d}else{i.html=Ext.isObject(d)?Ext.DomHelper.markup(d):d}if(i.rendered){f=i.getSizeModel();a=f.width.shrinkWrap||f.height.shrinkWrap;if(i.isContainer){e=i.layout.getRenderTarget();a=a||i.items.items.length>0}else{e=i.touchScroll?i.getScrollerEl():i.getTargetEl()}if(k){i.tpl[i.tplWriteMode](e,i.data||{})}else{e.setHtml(i.html,g,j,b||i)}if(a){i.updateLayout()}if(h){h.refresh(true)}if(c){c.onFocusableChildUpdate(i)}}},setHtml:function(b,a,c){this.update(b,a,null,c)},applyData:function(a){this.update(a)},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},_asLayoutRoot:{isRoot:true},_notAsLayoutRoot:{isRoot:false},updateLayout:function(c){var d=this,e,b=d.lastBox,a=c&&c.isRoot;if(b){b.invalid=true}if(!d.rendered||d.layoutSuspendCount||d.suspendLayout){return}if(d.hidden){Ext.Component.cancelLayout(d)}else{if(typeof a!=="boolean"){a=d.isLayoutRoot()}}if(a||!d.ownerLayout||!d.ownerLayout.onContentChange(d)){if(!d.isLayoutSuspended()){e=(c&&c.hasOwnProperty("defer"))?c.defer:d.deferLayouts;Ext.Component.updateLayout(d,e)}}},updateMaxHeight:function(b,a){this.changeConstraint(b,a,"min","max-height","height")},updateMaxWidth:function(b,a){this.changeConstraint(b,a,"min","max-width","width")},updateMinHeight:function(b,a){this.changeConstraint(b,a,"max","min-height","height")},updateMinWidth:function(a,b){this.changeConstraint(a,b,"max","min-width","width")},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(a,b){this.el.setX(a,b)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},addUIToElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,f,b,e;d.addCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(f in c){e=c[f].frame;if(e&&e!==true){b=d[f];if(b){b.addCls(a+e)}}}}},changeConstraint:function(g,c,a,e,b){var f=this,d=f[b];if(g!=null&&typeof d==="number"){f[b]=Math[a](d,g)}if(f.liquidLayout){if(g!=null){f.setStyle(e,g+"px")}else{if(c){f.setStyle(e,"")}}}if(f.rendered){f.updateLayout()}},constructPlugin:function(b){var a=this;if(typeof b==="string"){b=Ext.PluginManager.create({},b,a)}else{b=Ext.PluginManager.create(b,null,a)}return b},constructPlugins:function(){var e=this,c=e.plugins,b,d,a;if(c){b=[];b.processed=true;if(!Ext.isArray(c)){c=[c]}for(d=0,a=c.length;d<a;d++){b[d]=e.constructPlugin(c[d])}}e.pluginsInitialized=true;return b},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el);Ext.Component.cancelLayout(this);this.isDetached=true},doAddListener:function(d,k,l,n,b,a,e){var j=this,i,g,c,m,f,h;if(Ext.isObject(k)||(n&&n.element)){if(n.element){m=n.element;i={};i[d]=k;if(l){i.scope=l}c=j.$elementEventOptions;for(g in n){if(c[g]){i[g]=n[g]}}}else{i=k;m=d}f=j[m];if(f&&f.isObservable){j.mon(f,i)}else{j.afterRenderEvents=j.afterRenderEvents||{};if(!j.afterRenderEvents[m]){j.afterRenderEvents[m]=[]}j.afterRenderEvents[m].push(i)}return}if(n){h=n.delegate;if(h){j.mixins.componentDelegation.addDelegatedListener.call(j,d,k,l,n,b,a,e);return}}j.mixins.observable.doAddListener.call(j,d,k,l,n,b,a,e)},doRemoveListener:function(a,c,b){var d=this;d.mixins.observable.doRemoveListener.call(d,a,c,b);d.mixins.componentDelegation.removeDelegatedListener.call(d,a,c,b)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;if(a.hasListeners[b]){a.fireEvent(b,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=true;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var d=this,b=d.getScrollable(),c=d._scrollFlags,a,f,e;if(b){a=b.getX();if(a===true){a="auto"}f=b.getY();if(f===true){f="auto"}e=c[a][f]}else{e=c.none}d.scrollFlags=e;return{overflowX:e.overflowX,overflowY:e.overflowY}},getPlugins:function(){var a=this.plugins;a=(a&&a.processed)?a:this.constructPlugins();return a||null},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();a.proxy=a.el.createProxy("x-proxy-el",b,true)}return a.proxy},getScrollerEl:function(){var a=this;return a.scrollerEl||(a.scrollerEl=a.componentLayout.getScrollerEl()||a.getOverflowEl().child(a.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(a){return Ext.XTemplate.getTpl(this,a)},initCls:function(){var b=this,a=[b.baseCls],c=b.getComponentLayout().targetCls;if(c){a.push(c)}if(b.componentCls){a.push(b.componentCls)}else{b.componentCls=b.baseCls}return a},initDraggable:function(){var c=this,a=(c.resizer&&c.resizer.el!==c.el)?c.resizerComponent=new Ext.Component({el:c.resizer.el,rendered:true,container:c.container}):c,b=Ext.applyIf({el:a.getDragEl(),constrainTo:(c.constrain||c.draggable.constrain)?(c.constrainTo||(c.floatParent?c.floatParent.getTargetEl():c.container)):undefined},c.draggable);if(c.constrain||c.constrainDelegate){b.constrain=c.constrain;b.constrainDelegate=c.constrainDelegate}c.dd=new Ext.util.ComponentDragger(a,b)},initPadding:function(c){var a=this,b=a.padding;if(b!=null){if(a.touchScroll||(a.layout&&a.layout.managePadding&&a.contentPaddingProperty==="padding")){c.setStyle("padding",0)}else{c.setStyle("padding",this.unitizeBox((b===true)?5:b))}}},initPlugin:function(a){a.init(this);return a},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:false,constrainTo:(b.constrain||(a&&a.constrain))?(b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.container)):undefined,handles:b.resizeHandles},a);a.target=b;b.resizer=new Ext.resizer.Resizer(a)},initStyles:function(j){var f=this,d=f.margin,e=f.border,k=f.cls,a=f.style,h=f.x,g=f.y,c=f.liquidLayout,b,i;f.initPadding(j);if(d!=null){j.setStyle("margin",this.unitizeBox((d===true)?5:d))}if(e!=null){f.setBorder(e,j)}if(k&&k!==f.initialCls){j.addCls(k);f.cls=f.initialCls=null}if(a&&a!==f.initialStyle){j.setStyle(a);f.style=f.initialStyle=null}if(h!=null){j.setStyle(f.horizontalPosProp,(typeof h==="number")?(h+"px"):h)}if(g!=null){j.setStyle("top",(typeof g==="number")?(g+"px"):g)}if(!f.ownerCt||f.floating){if(Ext.scopeCss){j.addCls(f.rootCls)}j.addCls(f.borderBoxCls)}if(c||!f.getFrameInfo()){b=f.width;i=f.height;if(b!=null){if(typeof b==="number"){j.setStyle("width",b+"px")}else{j.setStyle("width",b)}}if(i!=null){if(typeof i==="number"){j.setStyle("height",i+"px")}else{j.setStyle("height",i)}}}},isContainedFloater:function(){return(this.floating&&this.floatParent)},isDescendant:function(a){if(a.isContainer){for(var b=this.ownerCt;b;b=b.ownerCt){if(b===a){return true}}}return false},owns:function(b){var a=false,c;if(b.isEvent){b=b.target}else{if(b.isElement){b=b.dom}}c=Ext.Component.fromElement(b);if(c){a=(c===this)||(!!c.up(this))}return a},parseBox:function(a){return Ext.Element.parseBox(a)},reattachToBody:function(){this.isDetached=false},refreshScroll:function(){var a=this.getScrollable();if(a){a.refresh()}},removeManagedListenerItem:function(b,a,h,d,f,e){var g=this,c=a.options?a.options.element:null;if(c){c=g[c];if(c&&c.un){if(b||(a.item===h&&a.ename===d&&(!f||a.fn===f)&&(!e||a.scope===e))){c.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(g.managedListeners,a)}}}}else{return g.mixins.observable.removeManagedListenerItem.apply(g,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a);a.destroy()},removeUIFromElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,f,b,e;d.removeCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(f in c){e=c[f].frame;if(e&&e!==true){b=d[f];if(b){b.removeCls(a+e)}}}}},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!==b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},setHiddenState:function(d){var c=this,b=c.getInherited(),a=c.zIndexManager;c.hidden=d;if(d){b.hidden=true}else{delete b.hidden}if(a){a.onComponentShowHide(c)}},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},wrapPrimaryEl:function(c){var b=this,a=b.el;if(!a||!a.isElement){b.el=Ext.get(c)}if(b.floating){this.mixins.floating.constructor.call(this)}}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){this.updateLayout();return this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable],[Ext.mixin.Accessible.prototype.mixinId||Ext.mixin.Accessible.$className,Ext.mixin.Accessible],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext,"Component",Ext,"AbstractComponent"],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1;b.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(c){b.resumeLayouts(c)};Ext.suspendLayouts=function(){b.suspendLayouts()};Ext.batchLayouts=function(d,c){b.suspendLayouts();d.call(c);b.resumeLayouts(true)};Ext.setGlyphFontFamily=function(c){Ext._glyphFontFamily=c};b.hierarchyEventSource=a.hierarchyEventSource=Ext.GlobalEvents;Ext.onReady(function(){if(Ext.supports.HighContrastMode){Ext.getBody().addCls(b.ariaHighContrastModeCls)}})}));Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=true;a.addStateEvents(["changeregion","changeweight"]);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,"region");b=a.addPropertyToState(b,"weight");return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return(a&&a.isBorderLayout)?a:null},setRegion:function(j){var i=this,c,d=i.region;if(j!==d){c=i.getOwningBorderLayout();if(c){var f=c.regionFlags[j],k=i.placeholder,a=i.splitter,b=c.owner,m=c.regionMeta,e=i.collapsed||i.floated,l,h,g;if(i.fireEventArgs("beforechangeregion",[i,j])===false){return d}Ext.suspendLayouts();i.region=j;Ext.apply(i,f);if(i.updateCollapseTool){i.updateCollapseTool()}if(a){Ext.apply(a,f);a.updateOrientation();h=b.items;g=h.indexOf(i);if(g>=0){l=m[j].splitterDelta;if(h.getAt(g+l)!==a){h.remove(a);g=h.indexOf(i);if(l>0){++g}h.insert(g,a)}}}if(k){if(e){i.expand(false)}b.remove(k);i.placeholder=null;if(e){i.collapse(null,false)}}b.updateLayout();Ext.resumeLayouts(true);i.fireEventArgs("changeregion",[i,d])}else{i.region=j}}return d},setWeight:function(d){var c=this,b=c.getOwningBorderContainer(),e=c.placeholder,a=c.weight;if(d!==a){if(c.fireEventArgs("beforechangeweight",[c,d])!==false){c.weight=d;if(e){e.weight=d}if(b){b.updateLayout()}c.fireEventArgs("changeweight",[c,a])}}return a}},function(a){var b=a.prototype;b.setBorderRegion=b.setRegion;b.setRegionWeight=b.setWeight});Ext.define("Ext.theme.neptune.Component",{override:"Ext.Component",initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=false}},privates:{initStyles:function(){var c=this,b=c.hasOwnProperty("border"),a=c.border;if(c.dock){c.border=null}arguments.callee.$previous.apply(this,arguments);if(b){c.border=a}else{delete c.border}}}},function(){Ext.namespace("Ext.theme.is").Neptune=true;Ext.theme.name="Neptune"});(Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<div id="{id}-ariaErrorEl" data-ref="ariaErrorEl" role="alert" aria-live="polite"',' class="x-hidden-clip">',"</div>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",noLabelCls:"x-form-item-no-label",fieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var b=this.tip,a,c;if(b){return}a={id:"ext-form-error-tip",ui:"form-invalid"};if(Ext.supports.Touch){a.dismissDelay=0;a.anchor="top";a.showDelay=0;a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}b=this.tip=Ext.create("Ext.tip.QuickTip",a);c=Ext.apply({},b.tagConfig);c.attribute="errorqtip";b.setTagConfig(c)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(Ext.isIE8){a.restoreDisplay=Ext.Function.createDelayed(a.doRestoreDisplay,0,a)}if(!a.activeErrorsTpl){if(a.msgTarget==="title"){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else{a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+"-"+a.ui]);a.lastActiveError="";a.enableBubble("errorchange")},trimLabelSeparator:function(){var c=this,d=c.labelSeparator,a=c.fieldLabel||"",b=a.substr(a.length-1);return b===d?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(d){d=d||"";var e=this,f=e.labelSeparator,c=e.labelEl,b=e.errorWrapEl,h=(e.labelAlign!=="top"),a=e.noLabelCls,g=e.errorWrapUnderSideLabelCls;e.fieldLabel=d;if(e.rendered){if(Ext.isEmpty(d)&&e.hideEmptyLabel){e.addCls(a);if(h&&b){b.removeCls(g)}}else{if(f){d=e.trimLabelSeparator()+f}c.dom.firstChild.innerHTML=d;e.removeCls(a);if(h&&b){b.addCls(g)}}e.updateLayout()}},setHideLabel:function(a){var b=this;if(a!==b.hideLabel){b.hideLabel=a;if(b.rendered){b[a?"addCls":"removeCls"](b.noLabelCls);b.updateLayout()}}},setHideEmptyLabel:function(a){var c=this,b;if(a!==c.hideEmptyLabel){c.hideEmptyLabel=a;if(c.rendered&&!c.hideLabel){b=a&&!c.getFieldLabel();c[b?"addCls":"removeCls"](c.noLabelCls);c.updateLayout()}}},getInsertionRenderData:function(d,e){var b=e.length,a,c;while(b--){a=e[b];c=this[a];if(c){if(typeof c!=="string"){if(!c.isTemplate){c=Ext.XTemplate.getTpl(this,a)}c=c.apply(d)}}d[a]=c||""}return d},getLabelableRenderData:function(){var o=this,r=o.labelAlign,e=(r==="top"),l=(r==="right"),i=(o.msgTarget==="side"),f=(o.msgTarget==="under"),q=o.errorMsgCls,g=o.labelPad,n=o.labelWidth,b=o.labelClsExtra||"",h=i?o.errorWrapSideCls:o.errorWrapUnderCls,a="",k="",d=o.hasVisibleLabel(),m=o.autoFitErrors,j=o.defaultBodyWidth,c,p;if(e){b+=" "+o.topLabelCls;if(g){k="padding-bottom:"+g+"px;"}if(i&&!m){b+=" "+o.topLabelSideErrorCls}}else{if(l){b+=" "+o.rightLabelCls}if(g){a+=o.getHorizontalPaddingStyle()+g+"px;"}a+="width:"+(n+(g?g:0))+"px;";k="width:"+n+"px"}if(d){if(!e&&f){h+=" "+o.errorWrapUnderSideLabelCls}}if(j){c="min-width:"+j+"px;max-width:"+j+"px;"}p={id:o.id,inputId:o.getInputId(),labelCls:o.labelCls,labelClsExtra:b,labelStyle:a+(o.labelStyle||""),labelInnerStyle:k,labelInnerCls:o.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:c,baseBodyCls:o.baseBodyCls,fieldBodyCls:o.fieldBodyCls,extraFieldBodyCls:o.extraFieldBodyCls,errorWrapCls:o.errorWrapCls,errorWrapExtraCls:h,renderError:i||f,invalidMsgCls:i?o.invalidIconCls:f?o.invalidUnderCls:"",errorMsgCls:q,growCls:o.grow?o.growCls:"",tipAnchorTarget:o.id+"-inputEl",errorWrapStyle:(i&&!m)?"visibility:hidden":"display:none",fieldLabel:o.getFieldLabel(),labelSeparator:o.labelSeparator};o.getInsertionRenderData(p,o.labelableInsertions);return p},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls("x-"+a.ownerLayout.type+"-form-item")}if(!a.hasVisibleLabel()){a.addCls(a.noLabelCls)}},onLabelRender:function(){var d=this,c={},f=Ext.Element,a=d.errorWrapEl,e,b;if(a){a.setVisibilityMode((d.msgTarget==="side"&&!d.autoFitErrors)?f.VISIBILITY:f.DISPLAY)}if(d.extraMargins){e=d.el.getMargin();for(b in e){if(e.hasOwnProperty(b)){c["margin-"+b]=(e[b]+d.extraMargins[b])+"px"}}d.el.setStyle(c)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(h){var f=this,g=f.errorWrapEl,d=f.msgTarget,c=d==="side",j=d==="qtip",a,b,e,i;h=Ext.Array.from(h);e=f.getTpl("activeErrorsTpl");f.activeErrors=h;b=f.activeError=e.apply({fieldLabel:f.fieldLabel,errors:h,listCls:"x-list-plain"});f.renderActiveError();if(f.rendered){a=f.getActionEl();if(c){f.errorEl.dom.setAttribute("data-errorqtip",b)}else{if(j){a.dom.setAttribute("data-errorqtip",b)}else{if(d==="title"){a.dom.setAttribute("title",b)}}}if(d!=="title"){f.ariaErrorEl.dom.innerHTML=h.join(". ");a.dom.setAttribute("aria-describedby",f.ariaErrorEl.id)}if(c||j){Ext.form.Labelable.initTip()}if(!f.msgTargets[d]){i=Ext.get(d);if(i){i.dom.innerHTML=b}}}if(g){g.setVisible(h.length>0);if(c&&f.autoFitErrors){f.labelEl.addCls(f.topLabelSideErrorCls)}f.updateLayout()}},unsetActiveError:function(){var e=this,b=e.errorWrapEl,c=e.msgTarget,a=e.restoreDisplay,d,f;if(e.hasActiveError()){delete e.activeError;delete e.activeErrors;e.renderActiveError();if(e.rendered){d=e.getActionEl();if(c==="qtip"){d.dom.removeAttribute("data-errorqtip")}else{if(c==="title"){d.dom.removeAttribute("title")}}if(c!=="title"){e.ariaErrorEl.dom.innerHTML="";d.dom.removeAttribute("aria-describedby")}if(!e.msgTargets[c]){f=Ext.get(c);if(f){f.dom.innerHTML=""}}if(b){b.hide();if(c==="side"&&e.autoFitErrors){e.labelEl.removeCls(e.topLabelSideErrorCls)}e.updateLayout();if(a){e.el.dom.style.display="block";e.restoreDisplay()}}}}},doRestoreDisplay:function(){var a=this.el;if(a&&a.dom){a.dom.style.display=""}},renderActiveError:function(){var c=this,b=c.getActiveError(),a=!!b;if(b!==c.lastActiveError){c.lastActiveError=b;c.fireEvent("errorchange",c,b)}if(c.rendered&&!c.destroyed&&!c.preventMark){c.toggleInvalidCls(a);if(c.errorEl){c.errorEl.dom.innerHTML=b}}},toggleInvalidCls:function(a){this.el[a?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}}));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var d=this,c=d.valuePublishEvent,a,b;d.initValue();if(Ext.isString(c)){d.on(c,d.publishValue,d)}else{for(b=0,a=c.length;b<a;++b){d.on(c[b],d.publishValue,d)}}},initValue:function(){var a=this;if("value" in a){a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--}a.initialValue=a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.valueFrom(b,""))===String(Ext.valueFrom(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(a,b){var c=this,d=null;if(!c.disabled&&(c.submitValue||!b)){d={};d[c.getFieldIdentifier()]=c.getValue()}return d},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var c=this,b,a;if(!c.suspendCheckChange){b=c.getValue();a=c.lastValue;if(!c.destroyed&&c.didValueChange(b,a)){c.lastValue=b;c.fireEvent("change",c,b,a);c.onChange(b,a)}}},didValueChange:function(b,a){return !this.isEqual(b,a)},onChange:function(a){var b=this;if(b.validateOnChange){b.validate()}b.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(d){var e=[],c=this.getValidationField(),b=this.getValidation(),a;if(c){a=c.validate(d);if(a!==true){e.push(a)}}if(b&&b!==true){e.push(b)}return e},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(b){var a=this;if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(a,b){if(b){this.validate()}},privates:{resetToInitialValue:function(){var b=this,a=b.originalValue;b.originalValue=b.initialValue;b.reset();b.originalValue=a}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:"x-form-readonly",validateOnBlur:true,hasFocus:false,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:false,stretchInputElFixed:true,ariaEl:"inputEl",initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.subTplData=a.subTplData||{};a.initLabelable();a.initField();a.initDefaultName();if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls("x-form-type-"+a.inputType)},initDefaultName:function(){var a=this;if(!a.name){a.name=a.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(c){var e=this,d=e.inputType,a=e.getInputId(),f,b;f=Ext.apply({ui:e.ui,id:a,cmpId:e.id,name:e.name||a,disabled:e.disabled,readOnly:e.readOnly,value:e.getRawValue(),type:d,fieldCls:e.fieldCls,fieldStyle:e.getFieldStyle(),childElCls:c.childElCls,tabIdx:e.tabIndex,inputCls:e.inputCls,typeCls:"x-form-"+(e.isTextInput?"text":d)},e.subTplData);if(e.ariaRole){b={role:e.ariaRole,"aria-hidden":!!e.hidden,"aria-disabled":!!e.disabled,"aria-readonly":!!e.readOnly,"aria-invalid":false};if(e.ariaLabel){b["aria-label"]=e.ariaLabel}if(e.format&&e.formatText&&!f.title){b.title=Ext.String.formatEncode(e.formatText,e.format)}f.inputElAriaAttributes=Ext.apply(b,e.getAriaAttributes())}e.getInsertionRenderData(f,e.subTplInsertions);return f},getSubTplMarkup:function(b){var c=this,d=c.getSubTplData(b),e=c.getTpl("preSubTpl"),f=c.getTpl("postSubTpl"),a="";if(e){a+=e.apply(d)}a+=c.getTpl("fieldSubTpl").apply(d);if(f){a+=f.apply(d)}return a},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;if(c){c.applyStyles(a)}b.fieldStyle=a},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,true):a||""},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.valueFrom(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(c){var a=this,b=a.rawValue;if(!a.transformRawValue.$nullFn){c=a.transformRawValue(c)}c=Ext.valueFrom(c,"");if(b===undefined||b!==c||a.valueContainsPlaceholder){a.rawValue=c;if(a.inputEl){a.bindChangeEvents(false);a.inputEl.dom.value=c;a.bindChangeEvents(true)}if(a.rendered&&a.reference){a.publishState("rawValue",c)}}return c},transformRawValue:Ext.identityFn,valueToRaw:function(a){return""+Ext.valueFrom(a,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;Ext.Component.prototype.onBoxReady.apply(this,arguments);if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onDisable.call(this);if(b){b.dom.disabled=true;if(a.hasActiveError()){a.clearInvalid();a.hadErrorOnDisable=true}}if(a.wasValid===false){a.checkValidityChange(true)}},onEnable:function(){var b=this,c=b.inputEl,d=b.preventMark,a;Ext.Component.prototype.onEnable.call(this);if(c){c.dom.disabled=false}if(b.wasValid!==undefined){b.forceValidation=true;b.preventMark=!b.hadErrorOnDisable;a=b.isValid();b.forceValidation=false;b.preventMark=d;b.checkValidityChange(a)}delete b.hadErrorOnDisable},setReadOnly:function(d){var b=this,c=b.inputEl,a=b.readOnly;d=!!d;b[d?"addCls":"removeCls"](b.readOnlyCls);b.readOnly=d;if(c){c.dom.readOnly=d;b.ariaEl.dom.setAttribute("aria-readonly",d)}else{if(b.rendering){b.setReadOnlyOnBoxReady=true}}if(d!==a){b.fireEvent("writeablechange",b,d)}},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,a)}},initEvents:function(){var e=this,g=e.inputEl,f=e.onFieldMutation,c=e.checkChangeEvents,a=c.length,b,d;if(g){e.mon(g,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",e.fireKey,e);for(b=0;b<a;++b){d=c[b];if(d==="propertychange"){e.usesPropertychange=true}if(d==="textInput"){e.usesTextInput=true}e.mon(g,d,f,e)}}Ext.Component.prototype.initEvents.call(this)},onFieldMutation:function(a){if(!this.readOnly&&!(a.type==="propertychange"&&this.ignoreChangeRe.test(a.browserEvent.propertyName))){this.startCheckChangeTask()}},startCheckChangeTask:function(){var b=this,a=b.checkChangeTask;if(!a){b.checkChangeTask=a=new Ext.util.DelayedTask(b.doCheckChangeTask,b)}if(!b.bindNotifyListener){b.bindNotifyListener=Ext.on("beforebindnotify",b.onBeforeNotify,b,{destroyable:true})}a.delay(b.checkChangeBuffer)},doCheckChangeTask:function(){var a=this.bindNotifyListener;if(a){a.destroy();this.bindNotifyListener=null}this.checkChange()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},onDirtyChange:function(b){var a=this;a[b?"addCls":"removeCls"](a.dirtyCls);if(a.rendered&&a.reference){a.publishState("dirty",b)}},isValid:function(){var b=this,a=b.disabled,c=b.forceValidation||!a;return c?b.validateValue(b.processRawValue(b.getRawValue())):a},validateValue:function(b){var a=this,d=a.getErrors(b),c=Ext.isEmpty(d);if(!a.preventMark){if(c){a.clearInvalid()}else{a.markInvalid(d)}}return c},markInvalid:function(e){var c=this,a=c.ariaEl.dom,b=c.getActiveError(),d;c.setActiveErrors(Ext.Array.from(e));d=c.getActiveError();if(b!==d){c.setError(d);if(!c.ariaStaticRoles[c.ariaRole]&&a){a.setAttribute("aria-invalid",true)}}},clearInvalid:function(){var c=this,a=c.ariaEl.dom,b=c.hasActiveError();delete c.hadErrorOnDisable;c.unsetActiveError();if(b){c.setError("");if(!c.ariaStaticRoles[c.ariaRole]&&a){a.setAttribute("aria-invalid",false)}}},setError:function(a){var c=this,b=c.msgTarget,d;if(c.rendered){if(b==="title"||b==="qtip"){d=b==="qtip"?"data-errorqtip":"title";c.getActionEl().dom.setAttribute(d,a||"")}else{c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.hasActiveError(),a=c.invalidCls+"-field";if(c.inputEl){c.inputEl[b?"addCls":"removeCls"]([a,a+"-"+c.ui])}c.mixins.labelable.renderActiveError.call(c)},beforeDestroy:function(){var b=this,a=b.checkChangeTask;if(a){a.cancel()}b.checkChangeTask=b.bindNotifyListener=Ext.destroy(b.bindNotifyListener);Ext.Component.prototype.beforeDestroy.call(this)},privates:{applyBind:function(f,c){var b=this,a=c&&c.value,e,d;e=Ext.Component.prototype.applyBind.call(this,f,c);if(e){d=e.value;b.hasBindingValue=!!d;if(d!==a&&b.getInherited().modelValidation){b.updateValueBinding(e)}}return e},applyRenderSelectors:function(){var a=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},bindChangeEvents:function(b){var c=b?"resumeEvent":"suspendEvent",a=this.inputEl;if(this.usesPropertychange){a[c]("propertychange")}if(this.usesTextInput){a[c]("textInput")}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.Component.prototype.initRenderTpl.call(this)},onBeforeNotify:function(){this.checkChangeTask.cancel();this.checkChange()},updateValueBinding:function(d){var c=this,b=d.value,a=d.$fieldBinding;if(a){a.destroy();d.$fieldBinding=null}if(b&&b.bindValidationField){c.fieldBinding=b.bindValidationField("setValidationField",c)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindChangeEvents(false);this.callParent(arguments);this.bindChangeEvents(true)}}}}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));Ext.define("FBEditor.override.form.field.Base",{override:"Ext.form.field.Base",msgTarget:"title",tabIndex:1,keyEnterAsTab:false,initComponent:function(){var a=this;(arguments.callee.$previous||Ext.Component.prototype.initComponent).call(this);a.on("specialkey",a.checkEnterKey,a)},checkEnterKey:function(f,d){var c=this,g,b,a;if(d.getKey()===d.ENTER&&c.keyEnterAsTab){g=Ext.getCmp("form-desc").query("field:focusable");b=g[g.length-1];if(c.getId()===b.getId()){a=g[0]}else{a=c.nextNode(":focusable")}while(a){if(a.isXType("field")&&a.tabIndex){d.stopEvent();a.focus();break}else{if(a.isXType("container")){if(a.down("htmleditor")){a=a.down("htmleditor");a.focus([0,0],0);break}else{a=a.down(":focusable")}}else{a=a.nextNode(":focusable")}}}}}});(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(e){return b.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(e){return a.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(e){return c.test(e)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return d.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(b,a){var c=this;c.el=Ext.get(b);c.el.unselectable();Ext.apply(c,a);Ext.util.Observable.prototype.constructor.call(this);if(!c.disabled){c.disabled=true;c.enable()}if(c.handler){c.on("click",c.handler,c.scope||c)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE8){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.clearListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.util.Observable.prototype.destroy.call(this)},handleDblClick:function(a){clearTimeout(this.timer);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a]);if(this.mousedownPreventDefault){a.preventDefault()}if(this.mousedownStopEvent){a.stopEvent()}},click:function(a){this.fireEvent("click",this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(e,a,g,f){return(e===f)?a+g:g*(-Math.pow(2,-10*e/f)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(a){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(a)},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,a)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));(Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,weight:0,preventMouseDown:true,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(b){var c=this,a;Ext.apply(c,b);if(c.compat4Mode){a=c.cls;c.focusCls=[c.focusCls,a+"-focus"];c.overCls=[c.overCls,a+"-over"];c.clickCls=[c.clickCls,a+"-click"]}},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this;a.clickRepeater=a.el=Ext.destroy(a.clickRepeater,a.el);a.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=true;if(a){a.hide()}},initEvents:function(){var d=this,a=d.isFieldEnabled,c=d.getStateEl(),b=d.el;c.addClsOnOver(d.overCls,a,d);c.addClsOnClick(d.clickCls,a,d);if(d.repeatClick){d.clickRepeater=new Ext.util.ClickRepeater(b,{preventDefault:true,handler:d.onClick,listeners:{mousedown:d.onClickRepeaterMouseDown,scope:d},scope:d})}else{d.field.mon(b,{click:d.onClick,mousedown:d.onMouseDown,scope:d})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var a=this,c=a.field,b=false;if(a.hidden||!c||!a.rendered||a.destroyed){b=true}return !b},onClick:function(){var c=this,a=arguments,f=c.clickRepeater?a[1]:a[0],b=c.handler,d=c.field;if(b&&!d.readOnly&&c.isFieldEnabled()){Ext.callback(c.handler,c.scope,[d,c,f],0,d)}},resolveListenerScope:function(a){return this.field.resolveSatelliteListenerScope(this,a)},onMouseDown:function(a){if(a.pointerType!=="touch"&&!this.field.owns(Ext.Element.getActiveElement())){this.field.inputEl.focus()}if(this.preventMouseDown){a.preventDefault()}},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var b=this,a=b.el=b.field.triggerWrap.selectNode("#"+b.domId,false);a.setVisibilityMode(Ext.Element.DISPLAY);b.rendered=true},renderBody:function(b){var a=this,c=a.bodyTpl;Ext.apply(b,a.getBodyRenderData());return c?Ext.XTemplate.getTpl(a,"bodyTpl").apply(b):""},renderTrigger:function(a){var c=this,b=c.width,d=c.hidden?"display:none;":"";if(b){d+="width:"+b}return Ext.XTemplate.getTpl(c,"renderTpl").apply({$trigger:c,fieldData:a,ui:a.ui,childElCls:a.childElCls,triggerId:c.domId=c.field.id+"-trigger-"+c.id,cls:c.cls,triggerStyle:d,extraCls:c.extraCls,baseCls:c.baseCls})},setHidden:function(a){if(a!==this.hidden){this[a?"hide":"show"]()}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=false;if(a){a.show()}}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(a,d,e){var b=this,c=b.shared;if(!c){c=b.shared=new b(a,e)}c.bind(a);c.setFixedWidth(e||"auto");return c.getSize(d)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(a,d){var c=this,b=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});b.setVisibilityMode(1);c.measure=b;if(a){c.bind(a)}b.position("absolute");b.setLocalXY(-1000,-1000);b.hide();if(d){b.setWidth(d)}},getSize:function(c){var b=this.measure,a;b.setHtml(c);a=b.getSize();b.setHtml("");return a},bind:function(a){var b=this;b.el=Ext.get(a);b.measure.setStyle(b.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width="auto";return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.el=a.measure=Ext.destroy(a.measure);a.callParent()}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(c,b,a){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(c,this.dom.innerHTML,true)).width,b||0,a||1000000)}})}));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},renderConfig:{editable:true},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:"x-form-empty-field",requiredCls:"x-form-required-field",valueContainsPlaceholder:false,ariaRole:"textbox",repeatTriggerClick:false,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",needArrowKeys:true,squashMouseUp:{mouseup:function(){},translate:false,single:true,preventDefault:true},childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',' role="presentation" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var b=this,a=b.emptyCls;if(b.allowOnlyWhitespace===false){b.allowBlank=false}if(b.size){b.defaultBodyWidth=b.size*6.5+20}if(!b.onTrigger1Click){b.onTrigger1Click=b.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);if(b.readOnly){b.setReadOnly(b.readOnly)}b.fieldFocusCls=b.baseCls+"-focus";b.emptyUICls=a+" "+a+"-"+b.ui;b.addStateEvents("change")},initEvents:function(){var b=this,a=b.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(b,a){Ext.form.field.Base.prototype.onChange.apply(this,arguments);this.autoSize()},getSubTplData:function(c){var d=this,f=d.getRawValue(),h=d.emptyText&&f.length<1,a=d.maxLength,g,e,b;if(d.enforceMaxLength){if(a===Number.MAX_VALUE){a=undefined}}else{a=undefined}if(h){if(Ext.supports.Placeholder){g=d.emptyText}else{f=d.emptyText;d.valueContainsPlaceholder=true}}e=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,c),{triggerWrapCls:d.triggerWrapCls,inputWrapCls:d.inputWrapCls,triggers:d.orderedTriggers,maxLength:a,readOnly:!d.editable||d.readOnly,placeholder:g,value:f,fieldCls:d.fieldCls+((h&&(g||f))?" "+d.emptyUICls:"")+(d.allowBlank?"":" "+d.requiredCls)});b=e.inputElAriaAttributes;if(b){b["aria-required"]=!d.allowBlank}return e},onRender:function(){var c=this,b=c.getTriggers(),d=[],e,a;if(Ext.supports.FixedTableWidthBug){c.el._needsTableWidthFix=true}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(b){this.invokeTriggers("onFieldRender");for(e in b){d.push(b[e].el)}a=c.triggerEl=c.triggerCell=new Ext.CompositeElement(d,true)}c.inputCell=c.inputWrap},afterRender:function(){var a=this;a.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);a.invokeTriggers("afterFieldRender")},onMouseDown:function(){if(!this.hasFocus){Ext.getDoc().on(this.squashMouseUp)}},applyTriggers:function(g){var h=this,c=h.getHideTrigger(),k=h.readOnly,l=h.orderedTriggers=[],j=h.repeatTriggerClick,b,f,d,a,e;if(!g){g={};if(h.triggerCls&&!h.trigger1Cls){h.trigger1Cls=h.triggerCls}for(e=1;a=h["trigger"+e+"Cls"];e++){g["trigger"+e]={cls:a,extraCls:"x-trigger-index-"+e,handler:"onTrigger"+e+"Click",compat4Mode:true,scope:h}}}for(b in g){if(g.hasOwnProperty(b)){f=g[b];f.field=h;f.id=b;if((k&&f.hideOnReadOnly!==false)||(c&&f.hidden!==false)){f.hidden=true}if(j&&(f.repeatClick!==false)){f.repeatClick=true}d=g[b]=Ext.form.trigger.Trigger.create(f);l.push(d)}}Ext.Array.sort(l,Ext.form.trigger.Trigger.weightComparator);return g},invokeTriggers:function(a,c){var e=this,d=e.getTriggers(),f,b;if(d){for(f in d){if(d.hasOwnProperty(f)){b=d[f];b[a].apply(b,c||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){this.invokeTriggers(a?"hide":"show")},updateEditable:function(a,b){this.setReadOnlyAttr(!a||this.readOnly)},setReadOnly:function(f){var d=this,c=d.getTriggers(),b=d.getHideTrigger(),a,e;f=!!f;Ext.form.field.Base.prototype.setReadOnly.call(this,f);if(d.rendered){d.setReadOnlyAttr(f||!d.editable)}if(c){for(e in c){a=c[e];if(a.hideOnReadOnly===true||(a.hideOnReadOnly!==false&&!b)){a.setVisible(!f)}}}},setReadOnlyAttr:function(d){var b=this,a="readonly",c=b.inputEl.dom;if(d){c.setAttribute(a,a)}else{c.removeAttribute(a)}if(b.ariaRole){b.ariaEl.dom.setAttribute("aria-readonly",!!d)}},processRawValue:function(c){var b=this,e=b.stripCharsRe,a,d;if(e){if(!e.global){a="g";a+=(e.ignoreCase)?"i":"";a+=(e.multiline)?"m":"";e=new RegExp(e.source,a)}d=c.replace(e,"");if(d!==c){b.setRawValue(d);c=d}}return c},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.field.Base.prototype.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){var b=this,a=b.emptyText,c;if(b.rendered&&a){c=b.getRawValue().length<1&&!b.hasFocus;if(Ext.supports.Placeholder){b.inputEl.dom.placeholder=a}else{if(c){b.setRawValue(a);b.valueContainsPlaceholder=true}}if(c){b.inputEl.addCls(b.emptyUICls)}else{b.inputEl.removeCls(b.emptyUICls)}b.autoSize()}},getEmptyText:function(){return this.emptyText},setEmptyText:function(d){var c=this,e=c.inputEl,b=e&&e.dom,a=d||"";if(d){c.emptyText=a;c.applyEmptyText()}else{if(b){if(Ext.supports.Placeholder){b.removeAttribute("placeholder")}else{if(b.value!==c.getRawValue()){b.value="";e.removeCls(c.emptyUICls)}}c.valueContainsPlaceholder=false}}c.emptyText=a;return c},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var a=this.inputEl;if(a){a.dom.unselectable="on"}}},toggleInvalidCls:function(a){var b=a?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this);this.triggerWrap[b](this.triggerWrapInvalidCls);this.inputWrap[b](this.inputWrapInvalidCls)},beforeFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,d;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments);if((a&&!Ext.supports.Placeholder)&&(c.dom.value===b.emptyText&&b.valueContainsPlaceholder)){b.setRawValue("");d=true;c.removeCls(b.emptyUICls);b.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){c.removeCls(b.emptyUICls)}}},onFocus:function(b){var a=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments);if(a.selectOnFocus){a.inputEl.dom.select()}if(a.emptyText){a.autoSize()}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldFocus",[b])},onBlur:function(b){var a=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments);a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldBlur",[b])},completeEdit:function(a){Ext.form.field.Base.prototype.completeEdit.call(this,a);this.applyEmptyText()},filterKeys:function(b){if((b.ctrlKey&&!b.altKey)||b.isSpecialKey()){return}var a=String.fromCharCode(b.getCharCode());if(!this.maskRe.test(a)){b.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(a){Ext.form.field.Base.prototype.applyState.apply(this,arguments);if(a.hasOwnProperty("value")){this.setValue(a.value)}},getRawValue:function(){var b=this,a=Ext.form.field.Base.prototype.getRawValue.call(this);if(a===b.emptyText&&b.valueContainsPlaceholder){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyUICls);a.valueContainsPlaceholder=false}Ext.form.field.Base.prototype.setValue.apply(this,arguments);a.applyEmptyText();return a},getErrors:function(k){k=arguments.length?(k==null?"":k):this.processRawValue(this.getRawValue());var f=this,i=Ext.form.field.Base.prototype.getErrors.call(this,k),a=f.validator,d=f.vtype,g=Ext.form.field.VTypes,h=f.regex,j=Ext.String.format,b,e,c;if(Ext.isFunction(a)){b=a.call(f,k);if(b!==true){i.push(b)}}e=f.allowOnlyWhitespace?k:Ext.String.trim(k);if(e.length<1||(k===f.emptyText&&f.valueContainsPlaceholder)){if(!f.allowBlank){i.push(f.blankText)}if(!f.validateBlank){return i}c=true}if(!c&&k.length<f.minLength){i.push(j(f.minLengthText,f.minLength))}if(k.length>f.maxLength){i.push(j(f.maxLengthText,f.maxLength))}if(d){if(!g[d](k,f)){i.push(f.vtypeText||g[d+"Text"])}}if(h&&!h.test(k)){i.push(f.regexText||f.invalidText)}return i},selectText:function(g,b){var f=this,d=f.getRawValue(),a=d.length,e=f.inputEl.dom,c;if(a>0){g=g===undefined?0:Math.min(g,a);b=b===undefined?a:Math.min(b,a);if(e.setSelectionRange){e.setSelectionRange(g,b)}else{if(e.createTextRange){c=e.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);c.select()}}}},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var c=this,b,g,e,f,a,d;if(c.grow&&c.rendered&&c.getSizeModel().width.auto){f=c.inputEl;b=c.getTriggers();e=0;d=Ext.util.Format.htmlEncode(c.getGrowWidth()||(c.hasFocus?"":c.emptyText)||"");d+=c.growAppend;for(g in b){e+=b[g].el.getWidth()}a=f.getTextWidth(d)+e+c.inputWrap.getBorderWidth("lr")+c.triggerWrap.getBorderWidth("lr");a=Math.min(Math.max(a,c.growMin),c.growMax);c.bodyEl.setWidth(a);c.updateLayout();c.fireEvent("autosize",c,a)}},onDestroy:function(){var a=this;a.invokeTriggers("destroy");Ext.destroy(a.triggerRepeater);Ext.form.field.Base.prototype.onDestroy.call(this)},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var b=this.getTriggers(),a=0,c;if(b&&this.rendered){for(c in b){if(b.hasOwnProperty(c)){a+=b[c].el.getWidth()}}}return a}}}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));Ext.define("FBEditor.override.form.field.Text",{override:"Ext.form.field.Text",fieldSubTpl:['<tpl if="triggers.length"><span class="input-fade-triggers"></span>','<tpl else><span class="input-fade"></span></tpl>','<input id="{id}" data-ref="inputEl" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],afterRender:function(){var a=this;(arguments.callee.$previous||Ext.form.field.Base.prototype.afterRender).apply(this,arguments);a.inputEl.on({scope:this,paste:function(b){this.fireEvent("paste",b)}})},getValue:function(){var a=this,b;b=Ext.form.field.Base.prototype.getValue.apply(this,arguments);if(b&&Ext.isString(b)){b=b.trim();b=b.replace(/\t/ig," ")}return b}});(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(a){var b=this;if((arguments.length!==1)||(typeof a==="string")||a.dom||a.tagName||a===document||a.isComponent){b.legacyConstructor.apply(b,arguments);return}Ext.apply(b,a);b.bindings=[];if(!b.target.isComponent){b.target=Ext.get(b.target)}if(b.binding){b.addBinding(b.binding)}else{if(a.key){b.addBinding(a)}}b.enable()},legacyConstructor:function(b,d,a){var c=this;Ext.apply(c,{target:Ext.get(b),eventName:a||c.eventName,bindings:[]});if(d){c.addBinding(d)}c.enable()},addBinding:function(e){var c=this,d=e.key,b,a;if(c.processing){c.bindings=c.bindings.slice(0)}if(Ext.isArray(e)){for(b=0,a=e.length;b<a;b++){c.addBinding(e[b])}return}c.bindings.push(Ext.apply({keyCode:c.processKeys(d)},e))},removeBinding:function(f){var e=this,g=e.bindings,a=g.length,b,d,c;if(e.processing){e.bindings=g.slice(0)}c=e.processKeys(f.key);for(b=0;b<a;++b){d=g[b];if((d.fn||d.handler)===(f.fn||f.handler)&&d.scope===f.scope){if(f.alt===d.alt&&f.crtl===d.crtl&&f.shift===d.shift){if(Ext.Array.equals(d.keyCode,c)){Ext.Array.erase(e.bindings,b,1);return}}}}},processKeys:function(f){var g=false,d,e,b,a,c;if(f.test){return f}if(Ext.isString(f)){e=[];b=f.toUpperCase();for(c=0,a=b.length;c<a;++c){e.push(b.charCodeAt(c))}f=e;g=true}if(!Ext.isArray(f)){f=[f]}if(!g){for(c=0,a=f.length;c<a;++c){d=f[c];if(Ext.isString(d)){f[c]=d.toUpperCase().charCodeAt(0)}}}return f},handleTargetEvent:function(e){var d=this,f,c,b,a;if(d.enabled){f=d.bindings;c=0;b=f.length;e=d.processEvent.apply(d.processEventScope||d,arguments);if(e){d.lastKeyEvent=e;if(d.ignoreInputFields&&Ext.fly(e.target).isInputField()){return}if(!e.getKey){return e}d.processing=true;for(;c<b;++c){a=d.processBinding(f[c],e);if(a===false){d.processing=false;return a}}d.processing=false}}},processEvent:Ext.identityFn,processBinding:function(e,a){if(this.checkModifiers(e,a)){var f=a.getKey(),h=e.fn||e.handler,j=e.scope||this,g=e.keyCode,b=e.defaultEventAction,c,d,k;if(g.test){if(g.test(String.fromCharCode(a.getCharCode()))){k=h.call(j,f,a);if(k!==true&&b){a[b]()}if(k===false){return k}}}else{if(g.length){for(c=0,d=g.length;c<d;++c){if(f===g[c]){k=h.call(j,f,a);if(k!==true&&b){a[b]()}if(k===false){return k}break}}}}}},checkModifiers:function(g,e){var d=["shift","ctrl","alt"],c=0,a=d.length,f,b;for(;c<a;++c){b=d[c];f=g[b];if(!(f===undefined||(f===e[b+"Key"]))){return false}}return true},on:function(b,d,c){var g,a,e,f;if(Ext.isObject(b)&&!Ext.isArray(b)){g=b.key;a=b.shift;e=b.ctrl;f=b.alt}else{g=b}this.addBinding({key:g,shift:a,ctrl:e,alt:f,fn:d,scope:c})},un:function(b,d,c){var g,a,e,f;if(Ext.isObject(b)&&!Ext.isArray(b)){g=b.key;a=b.shift;e=b.ctrl;f=b.alt}else{g=b}this.removeBinding({key:g,shift:a,ctrl:e,alt:f,fn:d,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture,priority:a.priority});a.enabled=true}},disable:function(){var a=this;if(a.enabled){a.target.removeListener(a.eventName,a.handleTargetEvent,a);a.enabled=false}},setDisabled:function(a){if(a){this.disable()}else{this.enable()}},destroy:function(c){var a=this,b=a.target;a.bindings=[];a.disable();if(c){b.destroy()}delete a.target;a.callParent()}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",disabled:false,defaultEventAction:false,forceKeyDown:false,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(a){var b=this;if(arguments.length===2){b.legacyConstructor.apply(b,arguments);return}b.doConstruction(a)},legacyConstructor:function(b,a){this.doConstruction(Ext.apply({target:b},a))},doConstruction:function(a){var c=this,b={target:a.target,ignoreInputFields:a.ignoreInputFields,eventName:c.getKeyEvent("forceKeyDown" in a?a.forceKeyDown:c.forceKeyDown,a.eventName),capture:a.capture},d;if(c.map){c.map.destroy()}c.initConfig(a);if(a.processEvent){b.processEvent=a.processEvent;b.processEventScope=a.processEventScope||c}if(a.priority){b.priority=a.priority}if(a.keyMap){d=c.map=a.keyMap}else{d=c.map=new Ext.util.KeyMap(b);c.destroyKeyMap=true}this.addBindings(a);d.disable();if(!a.disabled){d.enable()}},addBindings:function(h){var c=this,b,f,e=c.map,a=Ext.util.KeyNav.keyOptions,d,g=h.scope||c;for(b in h){f=h[b];d=a[b];if(d!=null){b=d}if(f&&(b.length===1||!isNaN(b=parseInt(b,10)))){if(typeof f==="function"){f={handler:f,defaultEventAction:(h.defaultEventAction!==undefined)?h.defaultEventAction:c.defaultEventAction}}e.addBinding({key:b,ctrl:f.ctrl,shift:f.shift,alt:f.alt,handler:Ext.Function.bind(c.handleEvent,f.scope||g,[f.handler||f.fn,c],true),defaultEventAction:(f.defaultEventAction!==undefined)?f.defaultEventAction:c.defaultEventAction})}}},handleEvent:function(d,c,b,a){a.lastKeyEvent=c;return b.call(this,c)},destroy:function(b){var a=this;if(a.destroyKeyMap){a.map.destroy(b)}delete a.map;a.callParent()},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(b,a){if(b||(Ext.supports.SpecialKeyDownRepeat&&!a)){return"keydown"}else{return a||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},renderConfig:{editable:true},isPickerField:true,matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",isExpanded:false,applyTriggers:function(b){var c=this,a=b.picker;if(!a.cls){a.cls=c.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},getSubTplData:function(b){var c=this,d,a;d=Ext.form.field.Text.prototype.getSubTplData.call(this,b);if(c.ariaRole){a=d.inputElAriaAttributes;if(a){a["aria-haspopup"]=true;a["aria-expanded"]=false}}return d},initEvents:function(){var a=this;Ext.form.field.Text.prototype.initEvents.call(this);a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:false},scope:a,forceKeyDown:true});if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},updateEditable:function(a,c){var b=this;if(!a){b.inputEl.on("click",b.onTriggerClick,b)}else{b.inputEl.un("click",b.onTriggerClick,b)}Ext.form.field.Text.prototype.updateEditable.call(this,a,c)},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(b){var a=this;if((b.time-a.lastDownArrow)>150){delete a.lastDownArrow}if(!a.isExpanded){b.stopEvent();a.onTriggerClick();a.lastDownArrow=b.time}else{if(!b.isStopped&&(b.time-a.lastDownArrow)<150){delete a.lastDownArrow}}},expand:function(){var d=this,b,a,c,e;if(d.rendered&&!d.isExpanded&&!d.destroyed){b=d.bodyEl;c=d.getPicker();e=Ext.getDoc();c.setMaxHeight(c.initialConfig.maxHeight);if(d.matchFieldWidth){c.setWidth(d.bodyEl.getWidth())}c.show();d.isExpanded=true;d.alignPicker();b.addCls(d.openCls);if(d.ariaRole){a=d.ariaEl.dom;a.setAttribute("aria-owns",c.listEl?c.listEl.id:c.el.id);a.setAttribute("aria-expanded",true)}d.touchListeners=e.on({translate:false,touchstart:d.collapseIf,scope:d,delegated:false,destroyable:true});d.scrollListeners=Ext.on({scroll:d.onGlobalScroll,scope:d,destroyable:true});Ext.on("resize",d.alignPicker,d,{buffer:1});d.fireEvent("expand",d);d.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){if(!this.destroyed){var a=this.getPicker();if(a.isVisible()&&a.isFloating()){this.doAlign()}}},doAlign:function(){var d=this,c=d.picker,a="-above",b;d.picker.alignTo(d.triggerWrap,d.pickerAlign,d.pickerOffset);b=c.el.getY()<d.inputEl.getY();d.bodyEl[b?"addCls":"removeCls"](d.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},collapse:function(){var d=this;if(d.isExpanded&&!d.destroyed&&!d.destroying){var c=d.openCls,b=d.picker,a="-above";b.hide();d.isExpanded=false;d.bodyEl.removeCls([c,c+a]);b.el.removeCls(b.baseCls+a);if(d.ariaRole){d.ariaEl.dom.setAttribute("aria-expanded",false)}d.touchListeners.destroy();d.scrollListeners.destroy();Ext.un("resize",d.alignPicker,d);d.fireEvent("collapse",d);d.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.destroyed&&!b.within(a.bodyEl,false,true)&&!a.owns(b.target)&&!Ext.fly(b.target).isFocusable()){a.collapse()}},getPicker:function(){var b=this,a=b.picker;if(!a){b.creatingPicker=true;b.picker=a=b.createPicker();a.ownerCmp=b;delete b.creatingPicker}return b.picker},onFocusLeave:function(a){this.collapse();Ext.form.field.Text.prototype.onFocusLeave.call(this,a)},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}}},beforeDestroy:function(){var b=this,a=b.picker;Ext.form.field.Text.prototype.beforeDestroy.call(this);Ext.un("resize",b.alignPicker,b);Ext.destroy(b.keyNav,a);if(a){b.picker=a.pickerField=null}},privates:{onGlobalScroll:function(a){var b,d,c=this.el;if(a.getElement().contains(c)){b=a.getPosition();d=c.getScrollIntoViewXY(a.getElement(),b.x,b.y);if(this.up("[fixed]")||d.y!==b.y||d.x!==b.x){this.collapse()}}}}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{isCollectionKey:true,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:true},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},clear:function(){this.map=null},getRootProperty:function(){var b=this,a=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(j,e){var a=this.map||this.getMap(),k=a[j],f=this.getCollection(),b=f.length,d,g,h,c;if(!k){return -1}if(e===undefined){e=-1}if(k instanceof Array){h=k;g=b;for(c=h.length;c-->0;){d=f.indexOf(h[c]);if(d<g&&d>e){g=d}}if(g===b){return -1}}else{g=f.indexOf(k)}return(g>e)?g:-1},updateKey:function(c,e){var b=this,d=b.map,f,a;if(d){f=d[e];if(f instanceof Array){a=Ext.Array.indexOf(f,c);if(a>=0){if(f.length>2){f.splice(a,1)}else{d[e]=f[1-a]}}}else{if(f){delete d[e]}}b.add([c])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(b,a){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(e,d){var g=this,a=g.map,f=d.items,b=f.length,c,j,h;if(a){if(g.getUnique()&&b<e.length/2){for(c=0;c<b;++c){h=g.getKey(j=f[c]);delete a[h]}}else{g.map=null}}},add:function(f){var g=this,a=g.map,b,e,j,h,c,d;c=f.length;d=g.getUnique();for(e=0;e<c;++e){h=g.getKey(j=f[e]);if(d||!(h in a)){a[h]=j}else{if(!((b=a[h]) instanceof Array)){a[h]=b=[b]}b.push(j)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else{this.getKey=a}},updateProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return(a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(a){a.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null},constructor:function(a){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(a){var b=this._groupFn(a);return(b!=null)?String(b):""},sortFn:function(d,c){var f=this,b=f._groupFn(d),e=f._groupFn(c),i=f._sortProperty,h=f._root,g=f._sorterFn,a=f._transform;if(b===e){return 0}if(i||g){if(g){return g.call(this,d,c)}if(h){d=d[h];c=c[h]}b=d[i];e=c[i];if(a){b=a(b);e=a(e)}}return(b>e)?1:(b<e?-1:0)},standardGroupFn:function(b){var a=this._root;return(a?b[a]:b)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:true,config:{autoFilter:true,autoSort:true,autoGroup:true,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:true},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:false,sorted:false,filtered:false,$endUpdatePriority:1001,constructor:function(a){var b=this;b.items=[];b.map={};b.length=0;if(a&&a.keyFn){b.getKey=a.keyFn}b.mixins.observable.constructor.call(b,a)},destroy:function(){var c=this,b=c._filters,d=c._sorters,a=c._groups;if(b){b.destroy();c._filters=null}if(d){d.destroy();c._sorters=null}if(a){a.destroy();c._groups=null}c.setSource(null);c.observers=c.items=c.map=null;c.callParent()},add:function(d){var c=this,a=c.decodeItems(arguments,0),b=a;if(a.length){c.requestedIndex=c.length;c.splice(c.length,0,a);delete c.requestedIndex;b=(a.length===1)?a[0]:a}return b},replaceAll:function(){var c=this,b,a;a=c.decodeItems(arguments,0);b=a;if(a.length){c.splice(0,c.length,a);b=(a.length===1)?a[0]:a}else{c.removeAll()}return b},aggregate:function(g,b,e,a,d){var f=this,c=Ext.Array.slice(arguments);c.unshift(f.items);return f.aggregateItems.apply(f,c)},aggregateByGroup:function(d,b,c){var a=this.getGroups();return this.aggregateGroups(a,d,b,c)},aggregateItems:function(k,q,d,a,e,r){var l=this,h=Ext.Number.clipIndices(k.length,[a,e]),b=(a!==0&&e!==k.length),g,f,c,m,o,p,n;a=h[0];e=h[1];if(!Ext.isFunction(d)){d=l._aggregators[d];return d.call(l,k,a,e,q,l.getRootProperty())}m=l.getRootProperty();p=new Array(c);n=b?new Array(c):k;for(g=a,f=0;g<e;++g,f++){if(b){n[f]=o=k[g]}p[f]=(m?o[m]:o)[q]}return d.call(r||l,k,p,0)},aggregateGroups:function(a,j,c,k){var g=a.items,f=g.length,b=!Ext.isFunction(c),d={},e,h,l;for(e=0;e<f;++e){h=g[e];if(!b){l=this.aggregateItems(h.items,j,c,null,null,k)}else{l=h[c](j)}d[h.getGroupKey()]=l}return d},beginUpdate:function(){if(!this.updating++){this.notify("beginupdate")}},clear:function(){var c=this,d=c.generation,a=d?c.items:[],b,e;if(d){c.items=[];c.length=0;c.map={};c.indices={};c.generation++;b=c.getExtraKeys();if(b){for(e in b){b[e].clear()}}}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(k,f,h){var e=this.items,b=e.length,a={},d=[],c,g,j;for(c=0;c<b;++c){j=e[c];j=(f?j[f]:j)[k];g=String(j);if((h||!Ext.isEmpty(j))&&!a[g]){a[g]=1;d.push(j)}}return d},contains:function(c){var a=false,b;if(c!=null){b=this.getKey(c);a=this.map[b]===c}return a},containsKey:function(a){return a in this.map},createFiltered:function(n,m,e,j,d){var h=this,f=new h.self(h.initialConfig),l=h.getRootProperty(),g=h.items,b,c,a,k,o;if(Ext.isFunction(n)){k=n;o=m}else{if(Ext.isString(n)){a=[new Ext.util.Filter({property:n,value:m,root:l,anyMatch:e,caseSensitive:j,exactMatch:d})]}else{if(n instanceof Ext.util.Filter){a=[n];n.setRoot(l)}else{if(Ext.isArray(n)){a=n.slice(0);for(c=0,b=a.length;c<b;++c){a[c].setRoot(l)}}}}k=Ext.util.Filter.createFilterFn(a)}o=o||h;for(c=0,b=g.length;c<b;c++){if(k.call(o,g[c])){f.add(g[c])}}return f},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(f,e){var b=this.items,a=b.length,d,c;if(a){e=e||this;b=b.slice(0);for(d=0;d<a;d++){c=f.call(e,b[d],d,a);if(c===false){break}}}return c},eachKey:function(f,j){var e=this,d=e.items,b=d.length,a,h,g,c;if(b){j=j||e;d=d.slice(0);for(a=0;a<b;a++){g=e.getKey(h=d[a]);c=f.call(j,g,h,a,b);if(c===false){break}}}return c},endUpdate:function(){if(!--this.updating){this.notify("endupdate")}},find:function(g,f,h,d,c,b){if(Ext.isEmpty(f,false)){return null}var e=Ext.String.createRegex(f,d,c,b),a=this.getRootProperty();return this.findBy(function(i){return i&&e.test((a?i[a]:i)[g])},null,h)},findBy:function(f,j,a){var e=this,d=e.items,c=d.length,b,h,g;j=j||e;for(b=a||0;b<c;b++){g=e.getKey(h=d[b]);if(f.call(j,h,g)){return d[b]}}return null},findIndex:function(f,e,g,c,b,a){var d=this.find(f,e,g,c,b,a);return d?this.indexOf(d):-1},findIndexBy:function(b,a,d){var c=this.findBy(b,a,d);return c?this.indexOf(c):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"first"):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"last"):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(a){var b=a.id;return(b===0||b)?b:((b=a._id)===0||b)?b:a.getId()},getRange:function(d,a){var c=this.items,e=c.length,b;if(!e){b=[]}else{b=Ext.Number.clipIndices(e,[d,a]);b=c.slice(b[0],b[1])}return b},getValues:function(j,g,a,b){var f=this.items,d=Ext.Number.clipIndices(f.length,[a,b]),e=[],c,h;for(c=d[0],b=d[1];c<b;++c){h=f[c];h=(g?h[g]:h)[j];e.push(h)}return e},indexOf:function(b){if(!b){return -1}var a=this.getKey(b);return this.indexOfKey(a)},indexOfKey:function(a){var b=this,c=b.indices;if(a in b.map){if(!c){c=b.getIndices()}return c[a]}return -1},insert:function(c,e){var d=this,a=d.decodeItems(arguments,1),b=a;if(a.length){d.requestedIndex=c;d.splice(c,0,a);delete d.requestedIndex;b=(a.length===1)?a[0]:a}return b},itemChanged:function(t,h,l,m){var u=this,c=l===0||!!l,i=u.filtered&&u.getAutoFilter(),e=false,d=0,o=u.items,k=u.length-1,a=u.sorted&&k>0&&u.getAutoSort(),q=u.getSource(),p=0,j=false,n=false,s,r,f,v,g,b;if(q&&!q.updating){q.itemChanged(t,h,l,m)}else{r=u.getKey(t);if(i){g=u.indexOfKey(c?l:r);n=(g<0);j=u.isItemFiltered(t);e=(n!==j)}if(e){if(j){p=[t];b=-1}else{v=[t];b=u.length}}else{if(a&&!j){if(!i){g=u.indexOfKey(c?l:r)}f=u.getSortFn();if(g!==-1){if(g&&f(o[g-1],o[g])>0){d=-1;b=Ext.Array.binarySearch(o,t,0,g,f)}else{if(g<k&&f(o[g],o[g+1])>0){d=1;b=Ext.Array.binarySearch(o,t,g+1,f)}}if(d){v=[t]}}}}s={item:t,key:r,index:b,filterChanged:e,keyChanged:c,indexChanged:!!d,filtered:j,oldIndex:g,newIndex:b,wasFiltered:n,meta:m};if(c){s.oldKey=l}if(h){s.modified=h}u.beginUpdate();u.notify("beforeitemchange",[s]);if(c){u.updateKey(t,l)}if(v||p){u.splice(b,p,v)}if(d>0){s.newIndex--}else{if(d<0){s.oldIndex++}}u.notify(j?"filtereditemchange":"itemchange",[s]);u.endUpdate()}},remove:function(d){var c=this,a=c.decodeRemoveItems(arguments,0),b=c.length;c.splice(0,a);return b-c.length},removeAll:function(){var b=this,a=b.length;if(b.generation&&a){b.splice(0,a)}return b},removeAt:function(h,g){var i=this,b=i.length,e=Ext.Number,d=e.clipIndices(b,[h,(g===undefined)?1:g],e.Clip.COUNT),c=d[0],a=d[1]-c,j=(a===1)&&i.getAt(c),f;i.splice(c,a);f=i.length-b;return(j&&f)?j:f},removeByKey:function(a){var b=this.getByKey(a);if(!b||!this.remove(b)){return false}return b},replace:function(b){var a=this.indexOf(b);if(a===-1){this.add(b)}else{this.insert(a,b)}},splice:function(D,m,B){var l=this,d=l.sorted&&l.getAutoSort(),z=l.map,r=l.items,p=l.length,v=(m instanceof Array)?l.decodeRemoveItems(m):null,w=!v,E=Ext.Number,e=E.clipIndices(p,[D,w?m:0],E.Clip.COUNT),g=e[0],j=e[1],K=j-g,t=l.decodeItems(arguments,2),J=t?t.length:0,C,x,u,c=g,b=l.indices||((J||v)?l.getIndices():null),q=null,h=K?[g]:null,f=null,s=l.getSource(),a,G,H,M,A,F,L,o,y,I,O,N,j;if(s&&!s.updating){if(w){v=[];for(M=0;M<K;++M){v.push(r[g+M])}}if(g<p){M=s.indexOf(r[g])}else{M=s.length}s.splice(M,v,t);return l}if(J){C=t;f=[];x={};if(d){N=l.getSorters();if(J>1){if(!C.$cloned){t=C=C.slice(0)}l.sortData(C)}}for(M=0;M<J;++M){o=l.getKey(A=t[M]);if((L=x[o])!==undefined){(O||(O={}))[L]=1}else{F=b[o];if(F<g||j<=F){(h||(h=[])).push(F)}}x[o]=M;f.push(o)}if(O){y=f;C=[];f=[];C.$cloned=true;for(M=0;M<J;++M){if(!O[M]){A=t[M];C.push(A);f.push(y[M])}}J=C.length}q={items:C,keys:f}}for(M=v?v.length:0;M-->0;){o=l.getKey(v[M]);if((F=b[o])!==undefined){(h||(h=[])).push(F)}}if(!q&&!h){return l}l.beginUpdate();if(h){a=null;H=[];u={};if(h.length>1){h.sort(Ext.Array.numericSortFn)}for(M=0,I=h.length;M<I;++M){o=l.getKey(A=r[F=h[M]]);if(!(o in z)){continue}delete z[o];if(!a||F>(a.at+G.length)){H.push(a={at:F,items:(G=[]),keys:(y=[]),map:u,next:a,replacement:q});if(q){q.replaced=a}}G.push(u[o]=A);y.push(o);if(F<c){--c}if(K>1&&F===g){--K;h[M--]=++g}}if(q){q.at=c}for(L=H.length;L-->0;){a=H[L];M=a.at;I=a.items.length;if(M+I<p){l.indices=b=null}l.length=p-=I;r.splice(M,I);if(b){y=a.keys;for(M=0;M<I;++M){delete b[y[M]]}}++l.generation;l.notify("remove",[a])}}if(q){if(d&&J>1&&p){l.spliceMerge(C,f)}else{if(d){if(J>1){c=0;l.indices=b=null}else{c=N.findInsertionIndex(q.items[0],r,l.getSortFn())}}if(c===p){j=c;for(M=C.length-1;M>=0;--M){r[j+M]=C[M]}b=l.indices;if(b){for(M=0;M<J;++M){b[f[M]]=c+M}}}else{l.indices=null;Ext.Array.insert(r,c,C)}for(M=0;M<J;++M){z[f[M]]=C[M]}l.length+=J;q.at=c;q.atItem=c===0?null:r[c-1];++l.generation;l.notify("add",[q])}}l.endUpdate();return l},update:function(b,a){var c=this;c.beginUpdate();try{return b.call(a||c,c)}catch(d){throw d}finally{c.endUpdate()}},updateKey:function(b,e){var a=this,d=a.map,g=a.indices,c=a.getSource(),f;if(c&&!c.updating){c.updateKey(b,e)}else{if((f=a.getKey(b))!==e){if(d[e]===b&&!(f in d)){delete d[e];a.updating++;a.generation++;d[f]=b;if(g){g[f]=g[e];delete g[e]}a.notify("updatekey",[{item:b,newKey:f,oldKey:e}]);a.updating--}}}},findInsertIndex:function(d){var e=this.getSource(),f=e.items,b=e.indexOf(d)-1,c,a;while(b>-1){c=f[b];a=this.indexOf(c);if(a>-1){return a+1}--b}return 0},onCollectionAdd:function(a,b){var k=this,m=b.atItem,j=b.items,f=k.requestedIndex,h,g,c,e,l,d;if(!k.sorted){if(f!==undefined){g=f}else{if(m){g=k.indexOf(m);if(g===-1){g=k.findInsertIndex(j[0])}else{++g}}else{g=0}}}if(k.getAutoFilter()&&k.filtered){for(e=0,d=j.length;e<d;++e){l=j[e];if(k.isItemFiltered(l)){if(!c){c=j.slice(0,e)}if(!h){h=[]}h.push(l)}else{if(c){c.push(l)}}}}k.splice((g<0)?k.length:g,0,c||j);if(h){k.notify("filteradd",[h])}},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(a){var f=this,b={},h={},d,j,e,g,c;e=a.items;e=f.filtered&&f.getAutoFilter()?Ext.Array.filter(e,f.getFilterFn()):e.slice(0);if(f.sorted){f.sortData(e)}f.items=e;f.length=c=e.length;f.map=b;f.indices=h;for(d=0;d<c;++d){g=f.getKey(j=e[d]);b[g]=j;h[g]=d}f.notify("refresh")},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(c,d,b,e,a){var f=b-d;return f&&this._aggregators.sum.call(this,c,d,b,e,a)/f},bounds:function(e,a,b,j,f){for(var h,g,c,d=a;d<b;++d){h=e[d];h=(f?h[f]:h)[j];if(!(h<g)){g=h}if(!(h>c)){c=h}}return[c,g]},count:function(a){return a.length},extremes:function(f,a,c,l,j){var g=null,b=null,e,m,h,d,k;for(e=a;e<c;++e){m=f[e];k=(j?m[j]:m)[l];if(!(k<h)){h=k;g=m}if(!(k>d)){d=k;b=m}}return[b,g]},max:function(e,f,d,g,c){var a=this._aggregators.bounds.call(this,e,f,d,g,c);return a[1]},maxItem:function(e,f,d,g,c){var a=this._aggregators.extremes.call(this,e,f,d,g,c);return a[1]},min:function(e,f,d,g,c){var a=this._aggregators.bounds.call(this,e,f,d,g,c);return a[0]},minItem:function(e,f,d,g,c){var a=this._aggregators.extremes.call(this,e,f,d,g,c);return a[0]},sum:function(c,f,b,h,a){for(var g,e=0,d=f;d<b;++d){g=c[d];g=(a?g[a]:g)[h];e+=g}return e}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(a){var b=this,c=b.observers;if(!c){b.observers=c=[]}c.push(a);if(c.length>1){Ext.Array.sort(c,b.prioritySortFn)}},prioritySortFn:function(f,e){var d=f.observerPriority||0,c=e.observerPriority||0;return d-c},applyExtraKeys:function(e,a){var f=this,d=a||{},c,b,g;for(b in e){g=e[b];if(!g.isCollectionKey){c={collection:f};if(Ext.isString(g)){c.property=g}else{c=Ext.apply(c,g)}g=new Ext.util.CollectionKey(c)}else{g.setCollection(f)}d[b]=f[b]=g;g.name=b}return d},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,"Ext.util.Grouper")}return a},decodeItems:function(d,c){var f=this,b=(c===undefined)?d:d[c],a,g,e;if(!b||!b.$cloned){a=d.length>c+1||!Ext.isIterable(b);if(a){b=Ext.Array.slice(d,c);if(b.length===1&&b[0]===undefined){b.length=0}}g=f.getDecoder();if(g){if(!a){b=b.slice(0);a=true}for(e=b.length;e-->0;){if((b[e]=g.call(f,b[e]))===false){b.splice(e,1)}}}if(a){b.$cloned=true}}return b},getIndices:function(){var d=this,e=d.indices,a=d.items,f=a.length,c,b;if(!e){d.indices=e={};++d.indexRebuilds;for(c=0;c<f;++c){b=d.getKey(a[c]);e[b]=c}}return e},notify:function(d,g){var h=this,c=h.observers,j=h._eventToMethodMap[d],i=0,e,b,a,f;g=g||[];if(c&&j){for(e=0,b=c.length;e<b;++e){a=(f=c[e])[j];if(a){if(!i++){g.unshift(h)}a.apply(f,g)}}}if(!h.hasListeners){return}if(h.hasListeners[d]){if(!i){g.unshift(h)}h.fireEventArgs(d,g)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(e){var d=this,f=d.getSource(),c,b,a;if(!f){c=d.getExtraKeys();if(c){b={};for(a in c){b[a]=c[a].clone(d)}}f=new Ext.util.Collection({keyFn:d.getKey,extraKeys:b,rootProperty:d.getRootProperty()});if(d.length){f.add(d.items)}d.setSource(f);d.autoSource=f}else{if(f.length||d.length){d.onCollectionRefresh(f)}}d.notify("filter")},applyFilters:function(a,b){if(a==null||(a&&a.isFilterCollection)){return a}if(a){if(!b){b=this.getFilters()}b.splice(0,b.length,a)}return b},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on({endupdate:"onEndUpdateFilters",scope:c,priority:c.$endUpdatePriority});a.$filterable=c}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(c){var b=this,d=b.filtered,a=!!c&&(c.length>0);if(d||a){b.filtered=a;b.onFilterChange(c)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==false){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(a,c,d){var b=this.getSorters();b.addSort.apply(b,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify("beforesort",[a.getSorters(false)]);if(a.length){Ext.Array.sort(a.items,b)}a.notify("sort")},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(c,a,b){if(!a){a=this.items}if(!b){b=this.getSortFn()}return Ext.Array.binarySearch(a,c,b)},applySorters:function(a,b){if(a==null||(a&&a.isSorterCollection)){return a}if(a){if(!b){b=this.getSorters()}b.splice(0,b.length,a)}return b},createSortFn:function(){var c=this,a=c.getGrouper(),d=c.getSorters(false),b=d?d.getSortFn():null;if(!a){return b}return function(e,g){var f=a.sort(e,g);if(!f&&b){f=b(e,g)}return f}},updateGrouper:function(b){var c=this,a=c.getGroups(),e=c.getSorters(),d;c.onSorterChange();c.grouped=!!b;if(b){if(c.getTrackGroups()){if(!a){a=new Ext.util.GroupCollection({itemRoot:c.getRootProperty()});a.$groupable=c;c.setGroups(a)}a.setGrouper(b);d=true}}else{if(a){c.removeObserver(a);a.destroy()}c.setGroups(null)}if(!e.updating){c.onEndUpdateSorters(e)}if(d){a.onCollectionRefresh(c)}},updateSorters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateSorters",c)}if(a){a.on({endupdate:"onEndUpdateSorters",scope:c,priority:c.$endUpdatePriority});a.$sortable=c}c.onSorterChange();c.onEndUpdateSorters(a)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(c){var b=this,d=b.sorted,a=(b.grouped&&b.getAutoGroup())||(c&&c.length>0);if(d||a){b.sorted=!!a;b.onSortChange(c)}},removeObserver:function(a){var b=this.observers;if(b){Ext.Array.remove(b,a)}},spliceMerge:function(j,r){var q=this,p=q.map,f=j.length,c=0,k=q.items,s=k.length,h=[],g=0,m=[],d=q.getSortFn(),l,b,n,e,o,a;q.items=m;for(a=0;a<f;a=b){e=j[a];for(;c<s;++c){if(d(e,o=k[c])<0){break}m.push(o)}if(c===s){h[g++]={at:m.length,itemAt:m[m.length-1],items:(l=[])};if(g>1){h[g-2].next=h[g-1]}for(;a<f;++a){l.push(e=j[a]);m.push(e)}break}h[g++]={at:m.length,itemAt:m[m.length-1],items:(l=[e])};if(g>1){h[g-2].next=h[g-1]}m.push(e);for(b=a+1;b<f;++b){if(d(e=j[b],o)>=0){break}m.push(e);l.push(e)}}for(;c<s;++c){m.push(k[c])}for(n=0;n<f;++n){p[r[n]]=j[n]}q.length=m.length;++q.generation;q.indices=null;for(n=0;n<g;++n){q.notify("add",[h[n]])}},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(b){var a=this.getGroups();if(a){a.setAutoGroup(b)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(b,a){var c=this.autoSource;if(a){a.removeObserver(this);if(a===c){c.destroy();this.autoSource=null}}if(b){b.addObserver(this);if(b.length||this.length){this.onCollectionRefresh(b)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(e,d,c){return this.aggregate(e,b,d,c)};a[b+"ByGroup"]=function(c){return this.aggregateByGroup(c,b)}})}));(Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:true,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(b,a){return b.isObjectTemplate?b:new Ext.util.ObjectTemplate(b,a)}},constructor:function(b,a){Ext.apply(this,a);this.template=b},apply:function(a){var b=this;delete b.apply;b.apply=b.compile(b.template);return b.apply(a)},privates:{compile:function(e){var f=this,b=f.excludeProperties,g,c,a,d;if(Ext.isString(e)){if(e.indexOf("{")<0){d=function(){return e}}else{if(f.valueRe.test(e)){e=e.substring(1,e.length-1).split(".");d=function(k){for(var h=k,j=0;h&&j<e.length;++j){h=h[e[j]]}return h}}else{e=new Ext.XTemplate(e);d=function(h){return e.apply(h)}}}}else{if(!e||Ext.isPrimitive(e)||Ext.isFunction(e)){d=function(){return e}}else{if(e instanceof Array){g=[];for(c=0,a=e.length;c<a;++c){g[c]=f.compile(e[c])}d=function(k){var h=[],j;for(j=0;j<a;++j){h[j]=g[j](k)}return h}}else{g={};for(c in e){if(!b[c]){g[c]=f.compile(e[c])}}d=function(l){var j={},k,h;for(k in e){h=b[k]?e[k]:g[k](l);if(h!==undefined){j[k]=h}}return j}}}}return d}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0));(Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:true,left:true,owner:false,side:"left",isMany:false,defaultReaderType:"json",_internalReadOptions:{recordsOnly:true,asRoot:true},constructor:function(b,c){var d=this,a=c.extra;Ext.apply(d,c);if(a){delete a.type;Ext.apply(d,a);delete d.extra}d.association=b;if(b.owner===d.side){b.owner=d;d.owner=true}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(b,c,a,d){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(b,c){var a=this.getAssociatedItem(b);if(a){c.adopt(a)}},createAssociationStore:function(f,k,e,l){var h=this,d=h.association,g=d.getFieldName(),i=d.isManyToMany,b=h.storeConfig,a=k.getId(),c={asynchronousLoad:false,model:h.cls,role:h,session:f,associatedEntity:k,disableMetaChangeEvent:true,pageSize:null,remoteFilter:true,trackRemoved:!f},j;if(i){c.filters=[{property:h.inverse.field,value:a,exactMatch:true}]}else{if(g){c.filters=[{property:g,value:a,exactMatch:true}];c.foreignKeyName=g}}if(b){Ext.apply(c,b)}j=Ext.Factory.store(c);h.onStoreCreate(j,f,a);if(g||(i&&f)){j.on({scope:h,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"})}if(e){j.loadData(e);j.complete=!!l}return j},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(o,f,b,q,s){var u=this,m=u.getStoreName(),g=o[m],a=o.session,k=f&&f.reload,n=o.$source,h=false,c,d,p,r,l,j,e,t;if(!g){if(a){if(!q&&n){n=n[m];if(n&&!n.isLoading()){e=n;q=[];l=n.getData().items;for(p=0,r=l.length;p<r;++p){j=l[p];q.push(a.getRecord(j.self,j.id))}h=!!n.complete;c=true}}if(!c){t=!!q;q=u.findRecords(a,o,q,s);if(!t&&(!q||!q.length)){q=null}h=t}}else{h=!!(q&&q.length>0)}g=u.createAssociationStore(a,o,q,h);g.$source=e;if(!q&&(u.autoLoad||f)){k=true}o[m]=g}if(f){if(k||g.isLoading()){g.on("load",function(w,v,x,i){d=[w,i];b=b||f.scope||o;if(x){Ext.callback(f.success,b,d)}else{Ext.callback(f.failure,b,d)}d.push(x);Ext.callback(f,b,d);Ext.callback(f.callback,b,d)},null,{single:true})}else{d=[g,null];b=b||f.scope||o;Ext.callback(f.success,b,d);d.push(true);Ext.callback(f,b,d);Ext.callback(f.callback,b,d)}}if(k&&!g.isLoading()){g.load()}return g},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.getInstanceName();return b[a]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var c=this,a=c.reader,d=c.cls,e=!c.associationKey,b=this.getReaderRoot();if(a&&!a.isReader){if(Ext.isString(a)){a={type:a}}Ext.applyIf(a,{model:d,rootProperty:b,useSimpleAccessors:e,type:c.defaultReaderType});a=c.reader=Ext.createByAlias("reader."+a.type,a)}return a},getInstanceName:function(){var a=this;return a.instanceName||(a.instanceName=a.association.schema.getNamer().instanceName(a.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(e){var f=this,a=f.getReader(),g=f.cls,h=!f.associationKey,b=f.getReaderRoot(),c,d;if(!a){d=g.getProxy();if(d){c=d.getReader();a=new c.self();a.copyFrom(c);a.setRootProperty(b)}else{a=new e.self({model:g,useSimpleAccessors:h,rootProperty:b})}f.reader=a}return a},read:function(c,f,d,e){var a=this.constructReader(d),b=a.getRoot(f);if(b){return a.readRecords(b,e,this._internalReadOptions)}},getCallbackOptions:function(a,b,c){if(typeof a==="function"){a={callback:a,scope:b||c}}else{if(a){a=Ext.apply({},a);a.scope=b||a.scope||c}}return a},doGetFK:function(b,m,k){var h=this,l=h.cls,e=h.association.getFieldName(),j=h.getInstanceName(),i=b[j],a=m&&m.reload,d=i!==undefined&&!a,g=b.session,c,f;if(!d){if(g){c=b.get(e);if(c||c===0){d=g.peekRecord(l,c,true)&&!a;i=g.getRecord(l,c,false)}else{d=true;b[j]=i=null}}else{if(e){c=b.get(e);if(!c&&c!==0){d=true;b[j]=i=null}else{if(!i){i=l.createWithId(c)}}}else{d=true}}}else{if(i){d=!i.isLoading()}}if(d){if(m){f=[i,null];k=k||m.scope||b;Ext.callback(m.success,k,f);f.push(true);Ext.callback(m,k,f);Ext.callback(m.callback,k,f)}}else{b[j]=i;m=h.getCallbackOptions(m,k,b);i.load(m)}return i},doSetFK:function(a,i,m,l){var h=this,f=h.association.getFieldName(),j=h.getInstanceName(),e=a[j],c=h.inverse,d=c.setterName,g=a.session,k,b;if(i&&i.isEntity){if(e!==i){b=h.getOldInstanceName();a[b]=e;a[j]=i;if(e&&e.isEntity){e[c.getInstanceName()]=undefined}if(f){a.set(f,i.getId())}delete a[b];if(d){i[d](a)}}}else{k=(a.changingKey&&!c.isMany)||a.set(f,i);if(k&&e&&e.isEntity&&!e.isEqual(e.getId(),i)){a[j]=undefined;if(!c.isMany){e[c.getInstanceName()]=undefined}}}if(m){if(Ext.isFunction(m)){m={callback:m,scope:l||a}}return a.save(m)}}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0));(Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:false,isManyToOne:false,isManyToMany:false,owner:null,field:null,constructor:function(a){var c=this,d,b;Ext.apply(c,a);c.left=d=new c.Left(c,c.left);c.right=b=new c.Right(c,c.right);d.inverse=b;b.inverse=d},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0));(Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:true,isToOne:true,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(a,b){var c=this.getAssociatedItem(a);a[this.getInstanceName()]=null;if(c){c[this.inverse.getInstanceName()]=null}},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(a){var b=this.getInstanceName(),c=a[b],d=a.session;if(!c&&d){}return c||null},doSet:function(a,e){var b=this.getInstanceName(),d=a[b],c=this.inverse.setterName;if(d!==e){a[b]=e;if(c){e[c](a)}}return d},read:function(a,d,b,e){var c=this,f=c.callParent([a,d,b,e]),g;if(f){g=f[0];if(g){g[c.inverse.getInstanceName()]=a;a[c.getInstanceName()]=g;delete a.data[c.role]}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(f,d){var b=this,c=b.association.field,a=b.getAssociatedItem(f),e;if(b.inverse.owner){if(d){e=f.get(c.name);if(e||e===0){a=d.getEntry(b.cls,e).record;if(a){a.drop()}}}else{if(a){a.drop()}}}if(c){f.set(c.name,null)}f[b.getInstanceName()]=null;if(a){a[b.inverse.getInstanceName()]=null}},onValueChange:function(h,g,f){var e=this,a=h[e.getOldInstanceName()]||e.getAssociatedItem(h),d=f||f===0,c=e.getInstanceName(),b=e.cls;h.changingKey=true;e.doSetFK(h,f);if(!d){h[c]=null}else{if(g&&b){h[c]=g.peekRecord(b,f)||undefined}}if(e.inverse.owner&&a){e.association.schema.queueKeyCheck(a,e)}h.changingKey=false},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(d,e,o,f){var i=this,m=i.callParent([d,e,o,f]),j,l,n,h,k,b,c,a,g;if(m){j=m[0];l=i.association.field;if(l){n=l.name}h=d.session;g=d.data;if(j){if(h){k=h.getRefs(j,this.inverse,true);a=(k&&k[d.id])||(g[n]===undefined)}else{a=true}if(a){if(l){c=g[n];b=j.id;if(c!==b){g[n]=b;if(h){h.updateReference(d,l,b,c)}}}j[i.inverse.getInstanceName()]=d;d[i.getInstanceName()]=j}delete g[i.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:true,isToOne:true,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,onDrop:function(g,e){var f=this,j=f.getAssociatedItem(g),b,d,c,h,a;if(j){b=j.removeAll();if(b&&f.inverse.owner){for(c=0,d=b.length;c<d;++c){b[c].drop()}}j.destroy();g[f.getStoreName()]=null}else{if(e){b=e.getRefs(g,f);if(b){for(a in b){b[a].drop()}}}}},processUpdate:function(f,b){var g=this,d=g.inverse.cls,e=b.R,a,h,i,c;if(e){for(a in e){h=f.peekRecord(d,a);if(h){c=f.getEntityList(g.cls,e[a]);i=g.getAssociatedItem(h);if(i){i.loadData(c);i.complete=true}else{h[g.getterName](null,null,c)}}else{f.onInvalidAssociationEntity(d,a)}}}},findRecords:function(h,j,d,n){var g=d,k=h.getRefs(j,this,true),l=this.association.field,m=l.name,c,b,e,f,a;if(!j.phantom){g=[];if(k||n){if(d){a={};for(e=0,f=d.length;e<f;++e){c=d[e];b=c.id;if(k&&k[b]){g.push(c)}else{if(n&&c.data[m]===undefined){g.push(c);c.data[m]=j.id;h.updateReference(c,l,j.id,undefined)}}a[b]=true}}if(k){for(b in k){if(!a||!a[b]){g.push(k[b])}}}}}return g},processLoad:function(b,a,e,d){var c=e;if(d){c=this.findRecords(d,a,e,true)}this.onLoadMany(a,c,d);return c},adoptAssociated:function(b,f){var c=this.getAssociatedItem(b),e,d,a;if(c){c.setSession(f);e=c.getData().items;for(d=0,a=e.length;d<a;++d){f.adopt(e[d])}}},createGetter:function(){var a=this;return function(b,c,d){return a.getAssociatedStore(this,b,c,d,a,true)}},createSetter:null,onAddToMany:function(a,b){this.syncFK(b,a.getAssociatedEntity(),false)},onLoadMany:function(k,e,j){var m=this.inverse.getInstanceName(),b=k.getId(),l=this.association.field,g,h,d,c,f,a;if(l){for(g=0,h=e.length;g<h;++g){d=e[g];d[m]=k;if(l){a=l.name;f=d.data;c=f[a];if(c!==b){f[a]=b;if(j){j.updateReference(d,l,b,c)}}}}}},onRemoveFromMany:function(a,b){this.syncFK(b,a.getAssociatedEntity(),true)},read:function(g,a,k,c){var f=this,j=f.inverse.getInstanceName(),b=f.callParent([g,a,k,c]),h,e,d;if(b){h=g[f.getterName](null,null,b);delete g.data[f.role];b=h.getData().items;for(d=0,e=b.length;d<e;++d){b[d][j]=g}}},syncFK:function(e,k,l){var j=this.association.getFieldName(),g=this.inverse,f=g.setterName,m=g.getInstanceName(),h=e.length,b=k.getId(),a,d,c;while(h-->0){d=e[h];a=!d.isEqual(b,d.get(j));c=l?null:k;if(a!==l){d.changingKey=true;d[f](c);d.changingKey=false}else{d[m]=c}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",onDrop:function(c,b){var a=this.association.field;if(a){c.set(a.name,null)}c[this.getInstanceName()]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(c,d){var b=this.association.field,a;a=this.getSessionStore(c,d.get(b.name));if(a&&!a.contains(d)){a.add(d)}},onValueChange:function(d,h,b,a){var j=this,m=j.getInstanceName(),o=j.cls,c,n,l,e,f,k,g;if(!d.changingKey){c=b||b===0;if(!c){d[m]=null}if(h){l=j.getSessionStore(h,a);if(l){l.remove(d)}if(c){l=j.getSessionStore(h,b);if(l&&!l.isLoading()){l.add(d)}if(o){g=h.peekRecord(o,b)}d[m]=g||undefined}}else{n=d.joined;if(n){for(e=0,f=n.length;e<f;++e){l=n[e];if(l.isStore){k=l.getAssociatedEntity();if(k&&k.self===j.cls&&k.getId()===a){l.remove(d)}}}}}}if(j.owner&&b===null){j.association.schema.queueKeyCheck(d,j)}},checkKeyForDrop:function(b){var a=this.association.field;if(b.get(a.name)===null){b.drop()}},getSessionStore:function(c,b){var a=this.cls,d;if(a){d=c.peekRecord(a,b);if(d){return this.inverse.getAssociatedItem(d)}}},read:function(f,c,b,e){var d=this.callParent([f,c,b,e]),a;if(d){a=d[0];if(a){f[this.getInstanceName()]=a;delete f.data[this.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:true,isToMany:true,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,digitRe:/^\d+$/,findRecords:function(k,l,d){var m=k.getMatrixSlice(this.inverse,l.id),e=m.members,j=[],n=this.cls,a,g,h,b,f,c;if(d){a={};for(g=0,h=d.length;g<h;++g){c=d[g];b=c.id;f=e[b];if(!(f&&f[2]===-1)){j.push(c)}a[b]=true}}for(b in e){f=e[b];if(!a||!a[b]&&(f&&f[2]!==-1)){c=k.peekRecord(n,b);if(c){j.push(c)}}}return j},processLoad:function(b,a,e,d){var c=e;if(d){c=this.findRecords(d,a,e);this.onAddToMany(b,c,true)}return c},processUpdate:function(f,b){var g=this,d=g.inverse.cls,e=b.R,a,h,i,c;if(e){for(a in e){h=f.peekRecord(d,a);if(h){c=f.getEntityList(g.cls,e[a]);i=g.getAssociatedItem(h);if(i){i.loadData(c);i.complete=true}else{h[g.getterName](null,null,c)}}else{f.onInvalidAssociationEntity(d,a)}}}g.processMatrixBlock(f,b.C,1);g.processMatrixBlock(f,b.D,-1)},checkMembership:function(h,i){var j=h.getMatrix(this.association,true),g,d,e,l,m,a,c,f,b,k;if(!j){return}g=this.left?j.right:j.left;d=g.inverse.role.cls;e=this.inverse;m=g.slices;if(m){l=m[i.id];if(l){c=l.members;for(a in c){f=c[a];if(f[2]!==-1){b=h.peekRecord(d,a);if(b){k=e.getAssociatedItem(b);if(k){k.matrixUpdate=1;k.add(i);k.matrixUpdate=0}}}}}}},onStoreCreate:function(b,d,e){var c=this,a;if(d){a=d.getMatrixSlice(c.inverse,e);a.attach(b);a.notify=c.onMatrixUpdate;a.scope=c}},processMatrixBlock:function(e,d,c){var a=this.inverse,b=this.digitRe,f,g;if(d){for(g in d){if(b.test(g)){g=parseInt(g,10)}f=e.getMatrixSlice(a,g);f.update(d[g],c)}}},createGetter:function(){var a=this;return function(b,c,d){return a.getAssociatedStore(this,b,c,d,false)}},onAddToMany:function(a,c,b){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(c,b===true?0:1);a.matrixUpdate=0}},onRemoveFromMany:function(b,a){if(!b.matrixUpdate){b.matrixUpdate=1;b.matrix.update(a,-1);b.matrixUpdate=0}},read:function(a,d,b,e){var c=this,f=c.callParent([a,d,b,e]);if(f){a[c.getterName](null,null,f);delete a.data[c.role]}},onMatrixUpdate:function(e,g,d){var a=e.store,b,f,c;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(g);if(d<0){if(b>=0){a.remove([b])}}else{if(b<0){c=a.getSession().getEntry(this.type,g);f=c&&c.record;if(f){a.add(f)}}}a.matrixUpdate=0}},adoptAssociated:function(b,f){var d=this.getAssociatedItem(b),c,e,a;if(d){d.setSession(f);this.onStoreCreate(d,f,b.getId());c=d.getData().items;for(e=0,a=c.length;e<a;++e){f.adopt(c[e])}}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:false,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^(p)erson$/i),"$1eople"],[(/^(m)an$/i),"$1en"],[(/(.*)(child)(ren)?$/i),"$1$2ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(address)$/i),"$1"],[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/(p)eople$/i),"$1erson"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(f){if(this.isTransnumeral(f)){return f}var e=this.plurals,d=e.length,a,c,b;for(b=0;b<d;b++){a=e[b];c=a[0];if(c==f||(c.test&&c.test(f))){return f.replace(c,a[1])}}return f},singularize:function(f){if(this.isTransnumeral(f)){return f}var e=this.singulars,d=e.length,a,c,b;for(b=0;b<d;b++){a=e[b];c=a[0];if(c==f||(c.test&&c.test(f))){return f.replace(c,a[1])}}return f},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(d){var b=parseInt(d,10),c=b%10,a=b%100;if(11<=a&&a<=13){return d+"th"}else{switch(c){case 1:return d+"st";case 2:return d+"nd";case 3:return d+"rd";default:return d+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},a;for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}}));(Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:true,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(b){var a=b.match(this.endsWithIdRe,"");if(a){b=b.substr(0,b.length-(a[1]||a[2]).length)}return this.apply("uncapitalize",b)},idField:function(a){return this.apply("uncapitalize,singularize",a)+"Id"},instanceName:function(a){return this.apply("underscore",a)},multiRole:function(a){return this.apply("undotted,uncapitalize,pluralize",a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply("uncapitalize",a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply("underscore",a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return"_"+a},uniRole:function(a){return this.apply("undotted,uncapitalize,singularize",a)},undotted:function(b){if(b.indexOf(".")<0){return b}var c=b.split("."),a=c.length;while(a-->1){c[a]=this.apply("capitalize",c[a])}return c.join("")},getterName:function(b){var a=b.role;if(b&&b.isMany){return a}return"get"+this.apply("capitalize",a)},inverseFieldRole:function(g,h,e,b){var f=this,a=f.apply(h?"uniRole":"multiRole",g),d=f.apply("pluralize",e),c=f.apply("undotted,pluralize",b);if(d.toLowerCase()!==c.toLowerCase()){a=e+f.apply("capitalize",a)}return a},manyToMany:function(e,d,a){var c=this,b=c.apply("undotted,capitalize,singularize",d)+c.apply("undotted,capitalize,pluralize",a);if(e){b=c.apply("capitalize",e+b)}return b},manyToOne:function(d,b,a,c){return this.apply("capitalize,singularize",a)+this.apply("capitalize",b)},matrixRole:function(c,b){var a=this.apply(c?"multiRole,capitalize":"multiRole",b);return c?c+a:a},oneToOne:function(d,b,a,c){return this.apply("undotted,capitalize,singularize",a)+this.apply("capitalize",b)},setterName:function(a){return"set"+this.apply("capitalize",a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(e,c){var h=this,b=h.cache,j=b[c]||(b[c]={}),g=j[e],f,d,a;if(!g){if(e.indexOf(",")<0){g=h[e](c)}else{d=(a=e.split(",")).length;g=c;for(f=0;f<d;++f){g=h.apply(a[f],g)}}j[e]=g}return g}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0));(Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:true,type:"default",statics:{instances:{},get:function(d){var f=this,c=f.instances,g="default",b=d&&Ext.isString(d),a,e;if(d){if(d.isSchema){return d}g=b?d:(d.id||g)}if(!(a=c[g])){c[g]=a=f.create(d);a.id=g}else{if(d&&!b){e=Ext.merge({},a.config);Ext.merge(e,d);a.setConfig(e);a.config=e}}return a},lookupEntity:function(a){var d=null,f=this.instances,c,b,e;if(a){if(a.isEntity){d=a.self}else{if(Ext.isFunction(a)){d=a}else{if(Ext.isString(a)){d=Ext.ClassManager.get(a);if(d&&(!d.prototype||!d.prototype.isEntity)){d=null}if(!d){for(b in f){e=f[b];c=e.getEntity(a);if(c){if(d){Ext.raise('Ambiguous entity name "'+a+'". Defined by schema "'+d.schema.type+'" and "'+b+'"')}d=c}}}if(!d){Ext.raise('No such Entity "'+a+'".')}}}}}return d}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(a,c){var b=c.alias;if(b&&!c.type){if(!Ext.isString(b)){b=b[0]}a.prototype.type=b.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(b){if(b){var a=b.length-1;if(b.charAt(a)!=="."){b+="."}}return b},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var b=this.associations,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a])===false){break}}}},eachEntity:function(c,b){var d=this.entities,a;for(a in d){if(d.hasOwnProperty(a)){if(c.call(b,a,d[a].cls)===false){break}}}},getAssociation:function(a){var b=this.associations[a];return b||null},getEntity:function(a){var b=this.entityClasses[a]||this.entities[a];return(b&&b.cls)||null},getEntityName:function(a){var d=this.getNamespace(),c,b;if(typeof a==="string"){b=a}else{b=a.$className||null}if(b){if(d){c=d.length;if(b.substring(0,c)!==d){return b}}if(c){b=b.substring(c)}}return b},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(a){var b=this.getEntityName(a);return !!(this.entities[b]||this.entityClasses[b])},addMatrix:function(m,g,d,c,q){var r=this,k=r.getNamer(),o=r.associations,a=r.entities,f=c.type,p=q.type,e=c.field||k.apply("idField",f),i=q.field||k.apply("idField",p),b=c.role||k.matrixRole(d,f),l=q.role||k.matrixRole(d,p),n,h,j;h=a[f]||(a[f]={cls:null,name:f,associations:{}});j=a[p]||(a[p]={cls:null,name:p,associations:{}});++r.assocCount;o[g]=n=new Ext.data.schema.ManyToMany({name:g,schema:r,definedBy:m,left:{cls:h.cls,type:f,role:b,field:e,associationKey:c.associationKey},right:{cls:j.cls,type:p,role:l,field:i,associationKey:q.associationKey}});h.associations[n.right.role]=n.right;j.associations[n.left.role]=n.left;if(h.cls){r.associationEntityMap[h.cls.entityName]=true}if(j.cls){r.associationEntityMap[j.cls.entityName]=true}r.decorateModel(n)},addReference:function(q,a,o,b){var t=this,m=t.getNamer(),d=t.entities,r=t.associations,l=q.entityName,e=o.association,p=!!o.legacy,i=o.child,k=o.parent,n=o.role,s=o.type||k||i,j=o.inverse,h=Ext.isString(j)?{role:j}:j,g=h&&h.role,c,f;if(!n){if(p){n=m.apply("uncapitalize",s)}else{n=m.apply("fieldRole",a.name)}}if(!g){g=m.inverseFieldRole(l,b,n,s)}if(!e){if(b){e=m.oneToOne(q,g,s,n)}else{e=m.manyToOne(q,g,s,n)}}c=d[s]||(d[s]={cls:null,name:s,associations:{}});f=b?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;e=new f({name:e,owner:i?"left":(k?"right":null),definedBy:q,schema:t,field:a,nullable:a?!!a.allowBlank:true,legacy:o.legacy,left:{cls:q,type:l,role:g,extra:h},right:{cls:c.cls,type:s,role:n,extra:o}});q.associations[n]=e.right;c.associations[g]=e.left;if(a){a.reference=e.right;q.references.push(a)}++t.assocCount;t.associationEntityMap[l]=true;if(c.cls){t.associationEntityMap[c.cls.entityName]=true}r[e.name]=e;if(e.right.cls){t.decorateModel(e)}},privates:{addEntity:function(d){var h=this,g=h.entities,k=d.entityName,l=g[k],f=d.fields,c,j,e,b,a;if(!l){g[k]=l={name:k,associations:{}}}else{c=l.associations;for(a in c){c[a].inverse.cls=d;h.associationEntityMap[k]=true;h.decorateModel(c[a].association)}}l.cls=d;d.prototype.associations=d.associations=l.associations;h.entityClasses[d.$className]=l;++h.entityCount;for(e=0,b=f.length;e<b;++e){j=f[e];if(j.reference){h.addReferenceDescr(d,j)}}},addMatrices:function(f,a){var e=this,b,d,c;if(Ext.isString(a)){e.addMatrixDescr(f,null,a)}else{if(a[0]){for(b=0,d=a.length;b<d;++b){e.addMatrixDescr(f,null,a[b])}}else{for(c in a){e.addMatrixDescr(f,c,a[c])}}}},addMatrixDescr:function(e,a,f){var g=this,i=e.entityName,d=g.associations,h=g.getNamer(),c=f.left,k=f.right,j,b;if(Ext.isString(f)){if(f.charAt(0)==="#"){c={type:i};k={type:f.substring(1)}}else{if(f.charAt(j=f.length-1)==="#"){c={type:f.substring(0,j)};k={type:i}}else{if(h.apply("multiRole",i)<h.apply("multiRole",f)){c={type:i};k={type:f}}else{c={type:f};k={type:i}}}}}else{b=f.relation;if(c||(!k&&h.apply("multiRole",i)<h.apply("multiRole",f.type))){if(!c||c===true){c={type:i}}else{c=Ext.apply({type:i},c)}k=f}else{if(!k||k===true){k={type:i}}else{k=Ext.apply({type:i},k)}c=f}}if(!a){a=h.manyToMany(b,c.type,k.type)}if(!(a in d)){g.addMatrix(e,a,b,c,k)}},addReferenceDescr:function(b,d){var a=this,c=d.$reference;if(Ext.isString(c)){c={type:c}}else{c=Ext.apply({},c)}if(c.legacy){if(c.single){a.addLegacySingle(b,c)}else{a.addLegacyHasMany(b,c)}}else{a.addReference(b,d,c,d.unique)}},addPending:function(a,c,e,b){var d=this.pending;if(!d[a]){d[a]=[]}d[a].push([c,e,b])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(c,e){var b,a,d;e=this.constructLegacyAssociation(c,e);e.single=true;a=e.type;b=e.foreignKey||(a.toLowerCase()+"_id");d=c.getField(b);if(d){d.$reference=e}this.addReference(c,d,e,true)},addLegacyHasMany:function(d,i){var j=this,f=j.entities,c=j.pending,a=i.associationKey,l,b,k,h,g,e;i=this.constructLegacyAssociation(d,i);b=i.type;h=f[b];if(h&&h.cls){i.type=d.entityName;g=i.foreignKey||(i.type.toLowerCase()+"_id");l=h.cls;k=l.getField(g);i.inverse=i||{};e=i.name;if(e||a){if(e){i.inverse.role=e}if(a){i.inverse.associationKey=a}}if(k){k.$reference=i}j.addReference(l,k,i,false)}else{if(!c[b]){c[b]=[]}c[b].push([d,i])}},constructLegacyAssociation:function(b,c){if(Ext.isString(c)){c={model:c}}c.legacy=true;c.type=this.getEntityName(c.model);var a=c.associatedName||c.name;if(a){c.role=a}return c},afterLegacyAssociations:function(b){var f=this.pending,c=b.entityName,e=f[c],d,a;if(e){for(d=0,a=e.length;d<a;++d){this.addLegacyHasMany.apply(this,e[d])}delete f[c]}},clear:function(b){var a=this,c=a.timer;delete a.setConfig;if(c){window.clearTimeout(c);a.timer=null}a.associations={};a.associationEntityMap={};a.entities={};a.entityClasses={};a.pending={};a.assocCount=a.entityCount=0;if(b){a.setNamespace(null)}},constructProxy:function(d){var b=this,c=Ext.Object.chain(d),a=b.getProxy();c.schema=b;c.prefix=b.getUrlPrefix();return a.apply(c)},applyDecoration:function(g){var e=this,a=g.inverse.cls,f=e.getNamer(),c,b,d;if(a&&!g.decorated){g.decorated=true;d=a.prototype;if(!(c=g.getterName)){g.getterName=c=f.getterName(g)}d[c]=g.createGetter();if(g.createSetter){if(!(b=g.setterName)){g.setterName=b=f.setterName(g)}d[b]=g.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(d){var f=this,b=f.keyCheckQueue,g=f.timer,a,c,e;if(g){window.clearTimeout(g);f.timer=null}if(!b){return}do{b=f.keyCheckQueue;f.keyCheckQueue=[];for(c=0,a=b.length;c<a;++c){e=b[c];e.role.checkKeyForDrop(e.record)}}while(d&&f.keyCheckQueue.length)},queueKeyCheck:function(a,e){var c=this,b=c.keyCheckQueue,d=c.timer;if(!b){c.keyCheckQueue=b=[]}b.push({record:a,role:e});if(!d){c.timer=d=Ext.Function.defer(c.processKeyChecks,c.getKeyCheckDelay(),c)}},rankEntities:function(){var e=this,f=e.entities,a=Ext.Object.getKeys(f),d=a.length,c,b;e.nextRank=1;a.sort();for(b=0;b<d;++b){c=f[a[b]].cls;if(!c.rank){e.rankEntity(c)}}},rankEntity:function(c){var b=c.associations,e,d,a;for(a in b){d=b[a];if(!d.left&&d.association.field){e=d.cls;if(!e.rank){this.rankEntity(e)}}}c.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:null,remoteSort:{lazy:true,$value:false},remoteFilter:{lazy:true,$value:false},groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:false,isStore:true,updating:0,constructor:function(b){var c=this,a;c.isInitializing=true;c.mixins.observable.constructor.call(c,b);c.isInitializing=false;a=c.getStoreId();if(!a&&(b&&b.id)){c.setStoreId(a=b.id)}if(a){Ext.data.StoreManager.register(c)}},getCount:function(){return this.getData().getCount()},rangeCached:function(b,a){return this.getData().getCount()>=Math.max(b,a)},find:function(f,e,g,h,a,d){var c=!h,b=!!(c&&d);return this.getData().findIndex(f,e,g,c,b,!a)},findRecord:function(){var b=this,a=b.find.apply(b,arguments);return a!==-1?b.getAt(a):null},findExact:function(b,a,c){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(b),a)},this,c)},findBy:function(b,a,c){return this.getData().findIndexBy(b,a,c)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,c){var a=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);if(c&&c.callback){c.callback.call(c.scope||this,a,d,b,c)}return a},getFilters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);if(!a&&b!==false){this.setFilters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)}return a},applyFilters:function(b,a){var c;if(!a){a=this.createFiltersCollection();c=true}a.add(b);if(c){this.onRemoteFilterSet(a,this.getRemoteFilter())}return a},getSorters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);if(!a&&b!==false){this.setSorters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)}return a},applySorters:function(b,a){var c;if(!a){a=this.createSortersCollection();c=true}a.add(b);if(c){this.onRemoteSortSet(a,this.getRemoteSort())}return a},filter:function(b,c,a){if(Ext.isString(b)){b={property:b,value:c}}this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=false},removeFilter:function(a,d){var c=this,b=c.getFilters();c.suppressNextFilter=!!d;if(a instanceof Ext.util.Filter){b.remove(a)}else{b.removeByKey(a)}c.suppressNextFilter=false},updateRemoteSort:function(a){this.onRemoteSortSet(this.getSorters(false),a)},updateRemoteFilter:function(a){this.onRemoteFilterSet(this.getFilters(false),a)},addFilter:function(b,a){this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=false},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(false);if(!a||a.getCount()===0){return}b.suppressNextFilter=!!c;a.removeAll();b.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var a=this.getSorters(false);return !!(a&&a.length>0)||this.isGrouped()},addFieldTransform:function(e){if(e.getTransform()){return}var d=e.getProperty(),c=this.getModel(),a,b;if(c){a=c.getField(d);b=a?a.getSortType():null}if(b&&b!==Ext.identityFn){e.setTransform(b)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var e=this,f=[],d=e.getFilters(),b=e.getGrouper(),g,c,a;e.getSorters().each(function(h){f[f.length]=h.getState();c=true});if(e.statefulFilters&&e.saveStatefulFilters){c=true;g=[];d.each(function(h){g[g.length]=h.getState()})}if(b){c=true}if(c){a={};if(f.length){a.sorters=f}if(g){a.filters=g}if(b){a.grouper=b.getState()}}return a},applyState:function(e){var c=this,b=e.sorters,a=e.filters,d=e.grouper;if(b){c.getSorters().replaceAll(b)}if(a){c.saveStatefulFilters=true;c.getFilters().replaceAll(a)}if(d){c.setGrouper(d)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.callParent();a.onDestroy()},sort:function(c,b,d){var a=this;if(arguments.length===0){if(a.getRemoteSort()){a.load()}else{a.forceLocalSort()}}else{a.getSorters().addSort(c,b,d)}},onBeforeCollectionSort:function(a,b){if(b){this.fireEvent("beforesort",this,b.getRange())}},onSorterEndUpdate:function(){var a=this,b;b=a.getSorters(false);if(a.settingGroups||!b){return}b=b.getRange();if(b.length){if(a.getRemoteSort()){a.load({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("datachanged",a);a.fireEvent("refresh",a);a.fireEvent("sort",a,b)}}else{a.fireEvent("sort",a,b)}},onFilterEndUpdate:function(){var b=this,a=b.suppressNextFilter;if(b.getRemoteFilter()){b.currentPage=1;if(!a){b.load()}}else{if(!a){b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}}if(b.trackStateChanges){b.saveStatefulFilters=true}b.fireEvent("filterchange",b,b.getFilters().getRange())},updateGroupField:function(a){if(a){this.setGrouper({property:a,direction:this.getGroupDir()})}else{this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(a,d){var b=this,c=b.getSorters(false),e=a||(c&&c.length);if(a&&typeof a==="string"){a={property:a,direction:d||b.getGroupDir()}}b.settingGroups=true;b.getData().setGrouper(a);delete b.settingGroups;if(e){if(b.getRemoteSort()){b.load({scope:b,callback:b.fireGroupChange})}else{b.fireEvent("datachanged",b);b.fireEvent("refresh",b);b.fireGroupChange()}}else{b.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent("groupchange",this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b="";if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(a,b){if(a){a[b?"on":"un"]("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(b,c){var a=this;if(b){b[c?"on":"un"]("endupdate",a.onSorterEndUpdate,a);a.getData()[c?"un":"on"]("beforesort",a.onBeforeCollectionSort,a)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:true,$configPrefixed:false,config:{field:null,message:""},constructor:function(a){this.initConfig(a);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(f){var j=this,g=f.fields,d=f.data,l,k,m,e,h,c,b,a;for(e=0,h=g.length;e<h;++e){k=g[e];a=k.name;b=d[a];if(k.validate&&!k.validate.$nullFn){l=j.length;c=k.validate(b,null,j,f);if(l===j.length&&c!==true){j.add(a,c)}}}return j},add:function(b,d){var c=this,a=Ext.data.field.Field.defaultInvalidMessage,f=b,e;if(Ext.isString(b)){f=new Ext.data.Error({field:b,message:d||a})}else{if(!(f.isError)){f=new Ext.data.Error({field:f.field||f.name,message:f.error||f.message||f.msg||a})}b=f.field}e=c.get(b);if(e){if(Ext.isArray(e)){e.push(f);return e}c.removeAtKey(b);f=[e,f];f.field=b;f=[f]}return Ext.util.MixedCollection.prototype.add.call(this,f)},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:true,config:{synchronous:false,url:"",params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,idPrefix:"ext-operation-",constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var b=this,a;delete b.error;delete b.success;b.complete=b.exception=false;b.setStarted();b.request=a=b.doExecute();if(a){a.setOperation(b)}return a},doExecute:Ext.emptyFn,abort:function(){var b=this,a=b.request;if(b.running&&a){b.getProxy().abort(a);b.request=null}},process:function(b,d,a,e){var c=this;e=e!==false;c.setResponse(a);c.setResultSet(b);if(b.getSuccess()){c.doProcess(b,d,a);c.setSuccessful(e)}else{if(e){c.setException(b.getMessage())}}},_commitSetOptions:{convert:true,commit:true},doProcess:function(m,f,e){var k=this,d=k._commitSetOptions,a=k.getRecords(),c=a.length,n=a[0].clientIdProperty,o=m.getRecords(),j=o?o.length:0,l,h,b,g;if(j&&n){l=Ext.Array.toValueMap(a,"id");for(g=0;g<j;++g){h=o[g];b=l[h[n]];if(b){delete l[b.id];delete h[n];b.set(h,d)}}for(g in l){l[g].commit()}}else{for(g=0;g<c;++g){b=a[g];if(j===0||!(h=o[g])){b.commit()}else{b.set(h,d)}}}},setStarted:function(){this.started=this.running=true},setCompleted:function(){var b=this,a=b.getProxy();b.complete=true;b.running=false;b.triggerCallbacks();if(a){a.completeOperation(b)}},setSuccessful:function(a){this.success=true;if(a){this.setCompleted()}},setException:function(a){var b=this;b.exception=true;b.success=b.running=false;b.error=a;b.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);a.setInternalCallback(null);a.setInternalScope(null)}if(b=a.getCallback()){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return true}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:true,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0));(Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:true,order:30,foreignKeyDirection:-1,doProcess:function(){var c=this.getRecords(),a=c.length,b;for(b=0;b<a;++b){c[b].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,c){var e={},d=a.idField,b=this.getNameProperty()||"name";e[d[b]]=a.id;return e}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0));(Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:true,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:false},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return false}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0));(Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:true,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return(a!=null)?String(a).replace(this.stripTagsRe,""):"\x00"},asUCText:function(a){return(a!=null)?String(a).toUpperCase().replace(this.stripTagsRe,""):"\x00"},asUCString:function(a){return(a!=null)?String(a).toUpperCase():"\x00"},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(this.stripCommasRe,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(this.stripCommasRe,""),10);return isNaN(b)?0:b}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:true,type:"base",statics:{all:{},register:function(b,a){var c=this.all;c[b.toUpperCase()]=c[b.toLowerCase()]=c[b]=a.prototype}},onClassExtended:function(a,b){if(b.type){Ext.data.validator.Validator.register(b.type,a)}},constructor:function(a){if(typeof a==="function"){this.fnOnly=true;this.validate=a}else{this.initConfig(a)}},validate:function(){return true},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}));(Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:true,isField:true,allowBlank:true,allowNull:false,critical:false,defaultInvalidMessage:"This field is invalid",defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,unique:false,rank:null,stripRe:/[\$,%]/g,calculated:false,evil:false,identifier:false,onClassExtended:function(c,e){var f=e.sortType,d=c.prototype,a=d.validators,b=e.validators;if(f&&Ext.isString(f)){d.sortType=Ext.data.SortTypes[f]}if(b){if(!Ext.isArray(b)){b=[b]}delete e.validators;if(a){b=a.concat(b)}d.validators=b}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var k=this,m=k.calculateRe,g,n,l,h,c,a,i,b,j,e,f;if(d){if(Ext.isString(d)){k.name=d}else{f=d.validators;if(f){delete d.validators;k.instanceValidators=f}Ext.apply(k,d)}}if(!k.allowNull){k.allowNull=!!k.reference}g=k.calculate;c=k.depends;if(g){k.convert=k.doCalculate;if(!c){if(!(c=g.$depends)){a={};j=g.toString();g.$depends=c=[];i=k.argumentNamesRe.exec(j);b=i?i[1]:"data";while((i=m.exec(j))){if(b===i[1]&&!a[e=i[2]]){a[e]=1;c.push(e)}}}k.depends=c}}l=k.defaultValue;if(k.convert){k.calculated=n=k.convert.length>1;k.evil=n&&!c}if(k.persist===null){k.persist=!g}h=k.sortType;if(!k.sortType){k.sortType=Ext.data.SortTypes.none}else{if(Ext.isString(h)){k.sortType=Ext.data.SortTypes[h]}}if(c&&typeof c==="string"){k.depends=[c]}k.cloneDefaultValue=l!==undefined&&(Ext.isDate(l)||Ext.isArray(l)||Ext.isObject(l))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)},constructValidators:function(a){if(a){if(!(a instanceof Array)){a=[a]}var e=a.length,c=this._validators,b,d;for(b=0;b<e;++b){d=a[b];if(d.fn){d=d.fn}c.push(Ext.Factory.dataValidator(d))}}},collate:function(c,b){var d=this,a=c,e=b;if(d.sortType){a=d.sortType(a);e=d.sortType(e)}return(a===e)?0:((a<e)?-1:1)},compare:function(b,a){return(b===a)?0:((b<a)?-1:1)},isEqual:function(b,a){return this.compare(b,a)===0},convert:null,serialize:null,validate:function(k,e,j,f){var h=this,g="",l,a,c,b,d;if(!h._validators){h.compileValidators()}c=h._validators;for(d=0,b=c.length;d<b;++d){a=c[d];l=a.validate(k,f);if(l!==true){l=l||h.defaultInvalidMessage;if(j){j.add(h.name,l);g=g||l}else{if(e){if(g){g+=e}g+=l}else{g=l;break}}}}return g||true},doCalculate:function(a,b){return b?this.calculate(b.data):a},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:true,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==="boolean"){return a}if(this.allowNull&&(a===undefined||a===null||a==="")){return null}return this.trueRe.test(String(a))},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0));(Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:true,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(b,e){var d=b instanceof Date,c=e instanceof Date,a;if(c&&d){a=b.getTime()-e.getTime();if(a===0){a=0}else{a=a<0?-1:1}}else{if(d===c){a=0}else{a=d?1:-1}}return a},convert:function(c){if(!c){return null}if(c instanceof Date){return c}var a=this.dateReadFormat||this.dateFormat,b;if(a){return Ext.Date.parse(c,a)}b=Date.parse(c);return b?new Date(b):null},serialize:function(b){var a=null,c;if(Ext.isDate(b)){c=this.getDateWriteFormat();a=c?Ext.Date.format(b,c):b}return a},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty("dateWriteFormat")){return a.dateWriteFormat}if(a.hasOwnProperty("dateFormat")){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0));(Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:true,isIntegerField:true,numericType:"int",convert:function(b){if(typeof b==="number"){return this.getNumber(b)}var d=b===undefined||b===null||b==="",a=this.allowNull,c;if(d){c=a?null:0}else{c=this.parse(b);if(a&&isNaN(c)){c=null}}return c},getNumber:function(a){return parseInt(a,10)},getType:function(){return this.numericType},parse:function(a){return parseInt(String(a).replace(this.stripRe,""),10)},sortType:function(a){if(a==null){a=Infinity}return a}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0));(Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Integer,{isIntegerField:false,isNumberField:true,numericType:"float",getNumber:Ext.identityFn,parse:function(a){return parseFloat(String(a).replace(this.stripRe,""))}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0));(Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:true,convert:function(b){var a=this.allowNull?null:"";return(b===undefined||b===null)?a:String(b)},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0));(Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":true,factoryConfig:{defaultType:"sequential"},isGenerator:true,config:{id:null},constructor:function(b){var c=this,a,d;c.initConfig(b);d=c.getId();if(d){a=(b&&b.cache)||Ext.data.identifier.Generator.all;a[d]=c}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var c=this,a=Ext.Factory,b=a.dataIdentifier;a.dataIdentifier=function(d){var f=Ext.isString(d)?d:(d&&d.id),e=f&&((d&&d.cache)||c.all)[f];return e||b(d)}}));(Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var b=this,a=b._seed,c=b._prefix;b._seed+=b._increment;return(c!==null)?c+a:a}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:true,isModel:true,validIdRe:null,erasing:false,observableType:"record",constructor:function(e,l){var m=this,p=m.self,k=p.identifier,c=Ext.data.Model,n=c.identifier,o=m.idField.name,j,a,b,h,g,d,f;m.data=m.data=e||(e={});m.session=l||null;m.internalId=h=n.generate();if((j=e) instanceof Array){m.data=e={};f=m.getFields();g=Math.min(f.length,j.length);for(d=0;d<g;++d){e[f[d].name]=j[d]}}if(!(b=p.initializeFn)){p.initializeFn=b=c.makeInitializeFn(p)}if(!b.$nullFn){p.initializeFn(m)}if(!(m.id=a=e[o])&&a!==0){if(l){k=l.getIdentifier(p);a=k.generate()}else{if(n===k){a=h}else{a=k.generate()}}e[o]=m.id=a;m.phantom=true}if(l){l.add(m)}if(m.init&&Ext.isFunction(m.init)){m.init()}},editing:false,dirty:false,session:null,dropped:false,erased:false,clientIdProperty:null,evented:false,phantom:false,idProperty:"id",manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:true,beginEdit:function(){var c=this,b=c.modified,a=c.previousValues;if(!c.editing){c.editing=true;c.editMemento={dirty:c.dirty,data:Ext.apply({},c.data),generation:c.generation,modified:b&&Ext.apply({},b),previousValues:a&&Ext.apply({},a)}}},cancelEdit:function(){var b=this,a=b.editMemento;if(a){b.editing=false;Ext.apply(b,a);b.editMemento=null}},endEdit:function(b,d){var c=this,a=c.editMemento;if(a){c.editing=false;c.editMemento=null;c.previousValues=a.previousValues;if(!b){if(!d){d=c.getModifiedFieldNames(a.data)}if(c.dirty||(d&&d.length)){c.callJoined("afterEdit",[d])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(b,a){this.set(this.idProperty,b,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(b){var a;if(this.isModified(b)){a=this.modified[b]}return a},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:false,silent:true},set:function(f,u,g){var G=this,d=G.self,H=G.data,n=G.modified,v=G.previousValues,a=G.session,F=Ext.isString(f),b=(F?g:u),q=b?b.convert!==false:G.convertOnSet,j=G.fieldsMap,D=b&&b.silent,r=b&&b.commit,p=!(b&&b.refs===false)&&a,o=!(b&&b.dirty===false&&!r),A=null,s,c,C,J,I,x,h,m,w,B,y=0,E,t,l,k,z,e;if(F){e=G._singleProp;e[f]=u}else{e=f}if(!(l=d.rankedFields)){l=d.rankFields()}E=l.length;do{for(I in e){z=e[I];s=H[I];h=G;c=j[I];if(c){if(q&&c.convert){z=c.convert(z,G)}h=c;k=c.reference}else{k=null}if(h.isEqual(s,z)){continue}H[I]=z;(A||(A=[])).push(I);(v||(G.previousValues=v={}))[I]=s;if(k&&k.cls){if(p){a.updateReference(G,c,z,s)}k.onValueChange(G,a,z,s)}B=(w=c&&c.dependents)&&w.length;while(B-->0){(m=w[B]).dirty=true;y=y?Math.min(y,m.rank):m.rank}if(!c||c.persist){if(n&&n.hasOwnProperty(I)){if(!o||h.isEqual(n[I],z)){delete n[I];G.dirty=-1}}else{if(o){if(!n){G.modified=n={}}G.dirty=true;n[I]=s}}}if(I===G.idField.name){C=true;x=s;t=z}}if(!y){break}c=l[y-1];c.dirty=false;if(F){delete e[f]}else{e=G._singleProp;F=true}f=c.name;e[f]=H[f];q=true;for(;y<E;++y){if(l[y].dirty){break}}if(y<E){++y}else{y=0}}while(1);if(G.dirty<0){G.dirty=false;for(J in n){if(n.hasOwnProperty(J)){G.dirty=true;break}}}if(F){delete e[f]}++G.generation;if(C){G.id=t;G.callJoined("onIdChanged",[x,t])}if(r){G.commit(D,A)}else{if(!D&&!G.editing&&A){G.callJoined("afterEdit",[A])}}return A},reject:function(a){var c=this,b=c.modified;if(b){c.set(b,c._rejectOptions)}c.dropped=false;c.clearState();if(!a){c.callJoined("afterReject")}},commit:function(b,d){var c=this,f=c.versionProperty,e=c.data,a;c.clearState();if(f&&!c.phantom&&!isNaN(e[f])){++e[f]}c.phantom=false;if(c.dropped){c.erased=a=true}if(!b){if(a){c.callJoined("afterErase")}else{c.callJoined("afterCommit",[d])}}},clearState:function(){var a=this;a.dirty=a.editing=false;a.editMemento=a.modified=null},drop:function(b){var d=this,c=d.associations,e=d.session,a;if(d.erased||d.dropped){return}d.dropped=true;if(c&&b!==false){for(a in c){c[a].onDrop(d,e)}}d.callJoined("afterDrop");if(d.phantom){d.setErased()}},join:function(b){var a=this,c=a.joined;if(!c){c=a.joined=[b]}else{if(!c.length){c[0]=b}else{Ext.Array.include(c,b)}}if(b.isStore&&!a.store){a.store=b}},unjoin:function(e){var d=this,f=d.joined,a=f&&f.length,b=d.store,c;if(a===1&&f[0]===e){f.length=0}else{if(a){Ext.Array.remove(f,e)}}if(b===e){b=null;if(f){for(c=0,a=f.length;c<a;++c){e=f[c];if(e.isStore){b=e;break}}}d.store=b}},clone:function(d){var c=this,b=c.modified,a=c.copy(c.id,d);if(b){a.modified=Ext.apply({},b)}a.dirty=c.dirty;a.dropped=c.dropped;a.phantom=c.phantom;return a},copy:function(c,f){var d=this,e=Ext.apply({},d.data),b=d.idProperty,a=d.self;if(c||c===0){e[b]=c}else{if(c===null){delete e[b]}}return new a(e,f)},getProxy:function(){return this.self.getProxy()},getValidation:function(b){var c=this,a=c.validation;if(!a){c.validation=a=new Ext.data.Validation();a.attach(c)}if(b===true||(b!==false&&a.syncGeneration!==c.generation)){a.refresh(b)}return a},validate:function(){return new Ext.data.ErrorCollection().init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var b=this.$className.split("."),a=b[b.length-1].toLowerCase();return a+"/"+this.getId()},erase:function(a){var b=this;b.erasing=true;b.drop();b.erasing=false;return b.save(a)},setErased:function(){this.erased=true;this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(q,p){var l=this,c=l.associations,n,g,o,k,d,b,j,f,e,a,h,m;q=q||{};l.$gathering=1;if(p){p=Ext.Object.chain(p)}for(e in c){f=c[e];o=f.getAssociatedItem(l);if(!o||o.$gathering){continue}if(o.isStore){o.$gathering=1;k=o.getData().items;b=k.length;d=[];for(g=0;g<b;++g){j=k[g];n=!j.$gathering;j.$gathering=1;if(p){m=p.associated;if(m===undefined){p.associated=n;h=true}else{if(!n){p.associated=false;h=true}}a=p}else{a=n?l._getAssociatedOptions:l._getNotAssociatedOptions}d.push(j.getData(a));if(h){p.associated=m;h=false}delete j.$gathering}delete o.$gathering}else{a=p||l._getAssociatedOptions;if(p&&p.associated===undefined){a.associated=true}d=o.getData(a)}q[e]=d}delete l.$gathering;return q},getData:function(r){var j=this,i={},a=(r===true)?j._getAssociatedOptions:(r||i),e=j.data,k=a.associated,o=a.changes,m=o&&a.critical,h=o?j.modified:e,g=j.fieldsMap,f=a.persist,q=a.serialize,c,l,d,b,p;if(h){for(b in h){p=e[b];l=g[b];if(l){if(f&&!l.persist){continue}if(q&&l.serialize){p=l.serialize(p,j)}}i[b]=p}}if(m){c=j.self.criticalFields||j.getCriticalFields();for(d=c.length;d-->0;){b=(l=c[d]).name;if(!(b in i)){p=e[b];if(q&&l.serialize){p=l.serialize(p,j)}i[b]=p}}}if(k){j.getAssociatedData(i,a)}return i},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(b){b=Ext.apply({},b);var f=this,e=b.scope||f,c=f.getProxy(),h=b.callback,a=f.loadOperation,g=f.getId(),d;if(a){d=a.extraCalls;if(!d){d=a.extraCalls=[]}d.push(b);return a}b.id=g;b.recordCreator=function(k,i,j){var l=f.session;if(j){j.recordCreator=l?l.recordCreator:null}f.set(k,f._commitOptions);return f};b.internalCallback=function(l){var p=l.wasSuccessful()&&l.getRecords().length>0,q=f.loadOperation,n=q.extraCalls,k=[f,l],o=[f,l,p],m,j;f.loadOperation=null;if(p){Ext.callback(b.success,e,k)}else{Ext.callback(b.failure,e,k)}Ext.callback(h,e,o);if(n){for(m=0,j=n.length;m<j;++m){b=n[m];if(p){Ext.callback(b.success,e,k)}else{Ext.callback(b.failure,e,k)}Ext.callback(b.callback,e,o)}}f.callJoined("afterLoad")};delete b.callback;f.loadOperation=a=c.createOperation("read",b);a.execute();return a},save:function(i){i=Ext.apply({},i);var f=this,d=f.phantom,a=f.dropped,c=a?"destroy":(d?"create":"update"),h=i.scope||f,g=i.callback,e=f.getProxy(),b;i.records=[f];i.internalCallback=function(j){var k=[f,j],l=j.wasSuccessful();if(l){Ext.callback(i.success,h,k)}else{Ext.callback(i.failure,h,k)}k.push(l);Ext.callback(g,h,k)};delete i.callback;b=e.createOperation(c,i);if(a&&d){b.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);f.setErased();b.setSuccessful(true)}else{b.execute()}return b},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(m,j){var n=this,e=n.prototype,h=Ext.data.field.Field,f=n.fields,l=n.fieldsMap,c=n.fieldOrdinals,o,d,b,g,a,k;if(j===true){f.length=0;n.fieldsMap=l={};n.fieldOrdinals=c={}}else{if(j){for(d=j.length;d-->0;){a=j[d];if(a in c){delete c[a];delete l[a]}}for(d=0,g=f.length;d<g;++d){a=(o=f[d]).name;if(a in c){c[a]=d}else{f.splice(d,1);--d;--g}}}}for(d=0,g=m?m.length:0;d<g;d++){a=(o=m[d]).name;if(!(a in c)){c[a]=k=f.length;f.push(o=h.create(o));l[a]=o;o.ordinal=k;o.definedBy=o.owner=this}}n.idField=e.idField=b=l[e.idProperty];b.allowNull=b.critical=b.identifier=true;b.defaultValue=null;n.initializeFn=n.rankedFields=n.transientFields=n.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(c){var b=this,a=b.idField,d=a.calculated?(new b(c)).id:c[a.name];return d},createWithId:function(f,b,c){var e=b,a=this;if(f||f===0){e={};if(b){Ext.apply(e,b)}e[a.idField.name]=f}return new a(e,c)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var b=this,a=b.proxy,d=b.defaultProxy,c;if(!a){a=b.proxyConfig;if(!a&&d){a=d}if(!a||!a.isProxy){if(typeof a==="string"){a={type:a}}c=b.schema.constructProxy(b);a=a?Ext.merge(c,a):c}a=b.setProxy(a)}return a},setProxy:function(b){var c=this,a;if(b){if(!b.isProxy){b=Ext.Factory.proxy(b)}else{a=b.getModel();if(a&&a!==c){b=b.clone()}}b.setModel(c)}return(c.prototype.proxy=c.proxy=b)},load:function(e,a,c){var b={},d;b[this.prototype.idProperty]=e;d=new this(b,c);d.load(a);return d}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(f,d){var e=this,b=e.stores,a=b.length,c;for(c=0;c<a;++c){f.call(d,b[c])}},join:function(c){var b=this,a=b.stores,d=b.joined;if(!d){d=b.joined=[c]}else{d.push(c)}if(c.isStore){b.store=b.store||c;if(!a){a=b.stores=[]}a.push(c)}},unjoin:function(c){var b=this,a=b.stores,d=b.joined;if(d.length===1){d.length=0}else{Ext.Array.remove(d,c)}if(c.isStore){Ext.Array.remove(a,c);b.store=a[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:true},_getChangesOptions:{changes:true},_getAssociatedOptions:{associated:true},_getNotAssociatedOptions:{associated:false},copyFrom:function(h){var g=this,e=g.fields,l=e.length,b=[],j,c=0,f,d,m=g.idProperty,a,k;if(h){f=g.data;d=h.data;for(;c<l;c++){j=e[c];a=j.name;if(a!==m){k=d[a];if(k!==undefined&&!g.isEqual(f[a],k)){f[a]=k;b.push(a)}}}if(g.phantom&&!h.phantom){g.beginEdit();g.setId(h.getId());g.endEdit(true);g.commit(true)}}return b},callJoined:function(d,c){var f=this,h=f.joined,e=f.session,a,b,g,j;if(!h&&!e){return}if(c){c.unshift(f)}else{c=[f]}if(h){for(a=0,b=h.length;a<b;++a){j=h[a];if(j&&(g=j[d])){g.apply(j,c)}}}g=e&&e[d];if(g){g.apply(e,c)}},setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(a){var d=this,e=d.data,b=[],f=a||d.editMemento.data,c;for(c in e){if(e.hasOwnProperty(c)){if(!d.isEqual(e[c],f[c],c)){b.push(c)}}}return b},isEqual:function(a,d,c){var b;if(c){b=c.isField?c:this.fieldsMap[c];if(b){return b.isEqual(a,d)}}if(a instanceof Date&&d instanceof Date){return a.getTime()===d.getTime()}return a===d},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",defaultProxy:"memory",rankFields:function(){var j=this,h=j.prototype,d=j.fields,b=d.length,f=[],a=[],e=[],k,g,c;j.rankedFields=h.rankedFields=f;j.criticalFields=h.criticalFields=a;j.transientFields=h.transientFields=e;for(c=0;c<b;++c){g=d[c];if(g.critical){a.push(g)}if(!g.persist){e.push(g)}if(g.evil){(k||(k=[])).push(g)}else{if(!g.depends){f.push(g);g.rank=f.length}}}for(c=0;c<b;++c){if(!(g=d[c]).rank&&!g.evil){j.topoAdd(g)}}if(k){for(c=0,b=k.length;c<b;++c){f.push(g=k[c]);g.rank=f.length}}return f},topoAdd:function(g){var b=this,f=g.depends,a=f?f.length:0,d=b.rankedFields,c,e;for(c=0;c<a;++c){e=b.fieldsMap[f[c]];(e.dependents||(e.dependents=[])).push(g);if(!e.rank){b.topoAdd(e)}}d.push(g);g.rank=d.length},initFields:function(v,b,o){var j=Ext.data.field.Field,d=v.fields,p=[],k={},f={},a=[],u=o.fields,l=v.versionProperty||o.versionProperty,m=b.idProperty,g,c,s,e,w,r,h,t,q,n;b.fields=o.fields=p;b.fieldOrdinals=o.fieldOrdinals=k;b.fieldsMap=o.fieldsMap=f;b.references=o.references=a;if(u){for(s=0,e=u.length;s<e;++s){p[s]=c=Ext.Object.chain(u[s]);c.dependents=null;c.owner=b;k[w=c.name]=s;f[w]=c;c.rank=null;if(c.generated){t=c;q=c.name}}}if(d){delete v.fields;for(s=0,e=d.length;s<e;++s){c=d[s];h=c.reference;if(h&&typeof h!=="string"){h=Ext.merge({},h)}c.$reference=h;c=j.create(d[s]);w=c.name;r=k[w];if(r===undefined){k[w]=r=p.length}f[w]=c;p[r]=c;c.definedBy=c.owner=b;c.ordinal=r;if(w===m){n=c}}}g=f[m];if(!g){if(t&&t.generated){r=t.ordinal}else{r=p.length}delete f[q];delete k[q];g=new j(m);p[r]=g;k[m]=r;f[m]=g;g.definedBy=b;g.ordinal=r;g.generated=true}else{if(n&&t&&t.generated){Ext.Array.remove(p,t);delete f[q];delete k[q];f[m]=n;for(s=0,e=p.length;s<e;++s){c=p[s];p.ordinal=s;k[c.name]=s}}}g.allowNull=g.critical=g.identifier=true;g.defaultValue=null;b.idField=o.idField=g;if(l){c=f[l];if(!c){r=p.length;c=new j({name:l,type:"int"});p[r]=c;k[l]=r;f[l]=c;c.definedBy=b;c.ordinal=r;c.generated=true}c.defaultValue=1;c.critical=true}},initValidators:function(g,o,j){var m=j.validators,e,l,c,k,f,d,h,b,a,n;if(m){e={};for(l in m){e[l]=Ext.Array.clone(m[l])}}k=g.validators||g.validations;if(k){delete g.validators;e=e||{};if(Ext.isArray(k)){c={};for(f=0,d=k.length;f<d;++f){n=k[f];b=n.field;if(!c[b]){c[b]=[]}n=n.fn||n;c[b].push(n)}k=c}for(b in k){h=k[b];if(!Ext.isArray(h)){h=[h]}a=e[b];if(e[b]){Ext.Array.push(a,h)}else{e[b]=h}}}if(e){for(b in e){l=o.getField(b);if(l){l.setModelValidators(e[b])}}}o.validators=j.validators=e},initAssociations:function(c,f,k){var b=f.associations,d=f.belongsTo,h=f.hasMany,l=f.hasOne,j=f.manyToMany,e,a,g;delete f.manyToMany;if(j){c.addMatrices(k,j)}delete f.associations;delete f.belongsTo;delete f.hasMany;delete f.hasOne;if(b){b=Ext.isArray(b)?b:[b];for(e=0,a=b.length;e<a;++e){g=b[e];switch(g.type){case"belongsTo":c.addLegacyBelongsTo(k,g);break;case"hasMany":c.addLegacyHasMany(k,g);break;case"hasOne":c.addLegacyHasOne(k,g);break}}}if(d){d=Ext.isArray(d)?d:[d];for(e=0,a=d.length;e<a;++e){c.addLegacyBelongsTo(k,d[e])}}if(h){h=Ext.isArray(h)?h:[h];for(e=0,a=h.length;e<a;++e){c.addLegacyHasMany(k,h[e])}}if(l){l=Ext.isArray(l)?l:[l];for(e=0,a=l.length;e<a;++e){c.addLegacyHasOne(k,l[e])}}c.afterLegacyAssociations(k)},initIdentifier:function(f,a,e){var b=f.identifier||f.idgen,d=e.identifier||a.schema._defaultIdentifier,c;if(b){delete f.identifier;delete f.idgen;b=Ext.Factory.dataIdentifier(b)}else{if(d){if(d.clone&&!d.getId()){b=d.clone()}else{if(d.isGenerator){b=d}else{b=Ext.Factory.dataIdentifier(d)}}}}a.identifier=e.identifier=b;if(!b){c=a.entityName;if(!c){c=Ext.id(null,"extModel")}a.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:c+"-"})}},findValidator:function(c,d,b){var f=b.type||b,h=c[d],a,e,g;if(h){for(e=0,a=h.length;e<a;++e){g=h[e];if(g.type===f){return g}}}return null},makeInitializeFn:function(q){var a=["var "],h=["\nreturn function (e) {\n    var data = e.data, v;\n"],e=[],n=0,k,j,l,p,d,m,g,f,o,c,b;if(!(g=q.rankedFields)){g=q.rankFields()}for(c=0,b=g.length;c<b;++c){m=g[c];e[c]=f="f"+c;l=m.convert;if(c){a.push(",  \n    ")}a.push(f," = $fields["+c+"]");if((o=(m.defaultValue!==undefined))||l){p='data["'+m.name+'"]';++n;k=j="";if(m.cloneDefaultValue){k="Ext.clone(";j=")"}h.push("\n");if(l&&o){h.push("    v = ",p,";\n    if (v !== undefined) {\n        v = ",f,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",k,f,".defaultValue",j,";\n    }\n    ",p," = v;")}else{if(l){h.push("    v = ",f,".convert(",p,",e);\n    if (v !== undefined) {\n        ",p," = v;\n    }\n")}else{if(o){h.push("    if (",p," === undefined) {\n        ",p," = ",k,f,".defaultValue",j,";\n    }\n")}}}}}if(!n){return Ext.emptyFn}a.push(";\n");a.push.apply(a,h);a.push("}");a=a.join("");d=new Function("$fields","Ext",a);return d(g,Ext)}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var d=this,c=d.prototype,b=Ext.data.schema.Schema,a;d.proxyConfig=c.proxy;delete c.proxy;d.fields=[];d.fieldsMap=c.fieldsMap={};d.schema=c.schema=b.get(c.schema);c.idField=new Ext.data.field.Field(c.idProperty);d.identifier=new Ext.data.identifier.Sequential();d.onExtended(function(e,j){var i=e.prototype,l=j.schema,k=i.superclass.self,h,g,f;e.idProperty=j.idProperty||i.idProperty;if(l){delete j.schema;h=b.get(l)}else{if(!(h=i.schema)){h=a||(a=b.get("default"))}}e.rankFields=d.rankFields;e.topoAdd=d.topoAdd;i.schema=e.schema=h;if(!(g=j.entityName)){i.entityName=g=h.getEntityName(e)}e.entityName=g;e.fieldExtractors={};d.initIdentifier(j,e,i);d.initFields(j,e,i);d.initValidators(j,e,i);e.fields.items=e.fields;if(g){h.addEntity(e);d.initAssociations(h,j,e)}f=j.proxy;if(f){delete j.proxy}else{if(k!==d){f=k.proxyConfig||k.proxy}}e.proxyConfig=f})}));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:true,$configPrefixed:false,config:{loaded:true,count:null,total:null,success:false,records:null,message:null},constructor:function(a){this.initConfig(a)},getCount:function(){var b=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this),a;if(!b){a=this.getRecords();if(a){b=a.length}}return b}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:true,readRecordsOnFailure:true,model:null,proxy:null,transform:null,keepRawData:null},isReader:true,constructor:function(a){if(a&&a.hasOwnProperty("root")){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}var b=this;b.duringInit=1;b.mixins.observable.constructor.call(b,a);--b.duringInit;b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}else{if(a.charAt){a={fn:this[a]}}}return a.fn.bind(a.scope||this)}return a},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(true)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(b,d){var c,a;if(b){if(b.responseText){a=this.getResponseData(b);if(a&&a.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:a.msg})}else{c=this.readRecords(a,d)}}else{c=this.readRecords(b,d)}}return c||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return{__$isError:true,msg:a}},readRecords:function(e,c,g){var h=this,f=g&&g.recordsOnly,l=g&&g.asRoot,m,d,b,j,i,k,n,a;a=this.getTransform();if(a){e=a(e)}h.buildExtractors();if(h.getKeepRawData()){h.rawData=e}if(h.hasListeners.rawdata){h.fireEventArgs("rawdata",[e])}e=h.getData(e);m=true;d=0;b=[];if(h.getSuccessProperty()){k=h.getSuccess(e);if(k===false||k==="false"){m=false}}if(h.getMessageProperty()){n=h.getMessage(e)}if(m||h.getReadRecordsOnFailure()){j=(l||Ext.isArray(e))?e:h.getRoot(e);if(j){i=j.length}if(h.getTotalProperty()){k=parseInt(h.getTotal(e),10);if(!isNaN(k)){i=k}}if(j){b=h.extractData(j,c);d=b.length}}return f?b:new Ext.data.ResultSet({total:i||d,count:d,records:b,success:m,message:n})},extractData:function(o,f){var m=this,g=f&&f.model?Ext.data.schema.Schema.lookupEntity(f.model):m.getModel(),d=g.schema,p=d.hasAssociations(g)&&m.getImplicitIncludes(),n=m.getFieldExtractorInfo(g.fieldExtractors),a=o.length,c=new Array(a),k=m.getTypeProperty(),l,b,e,j,h;if(!a&&Ext.isObject(o)){o=[o];a=1}for(h=0;h<a;h++){j=o[h];if(!j.isModel){b=j;if(k&&(e=m.getChildType(d,b,k))){l=e.getProxy().getReader();j=l.extractRecord(b,f,e,d.hasAssociations(e)&&l.getImplicitIncludes(),l.getFieldExtractorInfo(e.fieldExtractors))}else{j=m.extractRecord(b,f,g,p,n)}if(j.isModel&&j.isNode){j.raw=b}}if(j.onLoad){j.onLoad()}c[h]=j}return c},getChildType:function(b,c,d){var a;switch(typeof d){case"string":return b.getEntity(c[d]);case"object":a=d.namespace;return b.getEntity((a?a+".":"")+c[d.name]);case"function":return b.getEntity(d(c))}},extractRecordData:function(c,d){var b=d&&d.model?Ext.data.schema.Schema.lookupEntity(d.model):this.getModel(),a=this.getFieldExtractorInfo(b.fieldExtractors);return this.extractRecord(c,d,b,false,a)},extractRecord:function(a,b,c,i,g){var f=this,e=(b&&b.recordCreator)||f.defaultRecordCreator,h,d;h=f.extractModelData(a,g);d=e.call(f,h,c||f.getModel(),b);if(i&&d.isModel){f.readAssociated(d,a,b)}return d},getFieldExtractorInfo:function(c){if(!c){return}var a=this.$className,b=c[a];if(b===undefined){c[a]=b=this.buildFieldExtractors()}return b},buildFieldExtractors:function(){var g=this.getFields(),h=g.length,e=[],k=[],d=null,b=0,j,a,f,c;for(f=0;f<h;++f){j=g[f];c=this.createFieldAccessor(j);if(c){a=j.name;e.push("val = extractors["+b+"](raw); if (val !== undefined) { data['"+a+"'] = val; }");k.push(c);++b}}if(e.length){d={extractors:k,fn:new Function("raw","data","extractors","var val;"+e.join(""))}}return d},defaultRecordCreator:function(b,c){var a=new c(b);a.phantom=false;return a},getModelData:function(a){return{}},extractModelData:function(b,a){var d=this.getModelData(b),c;if(a){c=a.fn;c(b,d,a.extractors)}return d},readAssociated:function(a,e,d){var c=a.associations,b,f;for(b in c){if(c.hasOwnProperty(b)){f=c[b];if(f.cls){f.read(a,e,this,d)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(g){var f=this,b=g.fields,c,e,a,d;f.metaData=g;if(g.root){f.setRootProperty(g.root)}if(g.totalProperty){f.setTotalProperty(g.totalProperty)}if(g.successProperty){f.setSuccessProperty(g.successProperty)}if(g.messageProperty){f.setMessageProperty(g.messageProperty)}a=g.clientIdProperty;if(b){e=Ext.define(null,{extend:"Ext.data.Model",fields:b,clientIdProperty:a});f.setModel(e);d=f.getProxy();if(d){d.setModel(e)}}else{if(a){c=f.getModel();if(c){c.self.prototype.clientIdProperty=a}}}},buildExtractors:function(d){var b=this,c,a,e;if(d||!b.hasExtractors){c=b.getTotalProperty();a=b.getSuccessProperty();e=b.getMessageProperty();if(c){b.getTotal=b.getAccessor(c)}if(a){b.getSuccess=b.getAccessor(a)}if(e){b.getMessage=b.getAccessor(e)}b.hasExtractors=true;return true}},getAccessor:function(e){var d=this,a=d.extractorCache,b,c;if(typeof e==="string"){c=d.getAccessorKey(e);b=a.get(c);if(!b){b=d.createAccessor(e);a.add(c,b)}}else{b=d.createAccessor(e)}return b},getAccessorKey:function(a){return this.$className+a},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;a.model=a.getTotal=a.getSuccess=a.getMessage=a.rawData=null;a.onMetaChange=null;a.transform=null;a.callParent()},privates:{copyFrom:function(a){var b=this;a.buildExtractors();b.getTotal=a.getTotal;b.getSuccess=a.getSuccess;b.getMessage=a.getMessage;++b.duringInit;b.setConfig(a.getConfig());--b.duringInit;b.hasExtractors=true}}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(b){var a=b.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""})});a.extractorCache=new Ext.util.LruCache()}));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(e){var c=e.getOperation(),b=c.getRecords()||[],a=b.length,f=[],d;for(d=0;d<a;d++){f.push(this.getRecordData(b[d],c))}return this.writeRecords(e,f)},writeRecords:Ext.emptyFn,getRecordData:function(i,g){var l=this,e=l.getNameProperty(),a=e!=="name",c=i.self.idField,p=c[e]||c.name,o=i.id,d=l.getWriteAllFields(),k,b,f,q,n,j,h,m;if(c.serialize){o=c.serialize(o)}if(!d&&g&&g.isDestroyOperation){k={};k[p]=o}else{b=l.getDateFormat();f=i.phantom;q=(f||d)?l.getAllDataOptions():l.getPartialDataOptions();n=f&&l.getClientIdProperty();j=i.getFieldsMap();q.serialize=false;h=i.getData(q);k=a?{}:h;if(n){k[n]=o;delete h[p]}else{if(!l.getWriteRecordId()){delete h[p]}}for(p in h){o=h[p];if(!(m=j[p])){if(a){k[p]=o}}else{if(m.isDateField&&b&&Ext.isDate(o)){o=Ext.Date.format(o,b)}else{if(m.serialize){o=m.serialize(o,i)}}if(a){p=m[e]||p}k[p]=o}}}return k}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:false,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:undefined,reader:{type:"json"},writer:{type:"json"}},isProxy:true,isSynchronous:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.pendingOperations={}},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){if(this.isSynchronous){a=a||{};a.keepRawData=true}return Ext.Factory.reader(a)},updateReader:function(a){if(a){var c=this,b=c.getModel();if(!b){b=a.getModel();if(b){c.setModel(b)}}else{a.setModel(b)}if(a.onMetaChange){a.onMetaChange=Ext.Function.createSequence(a.onMetaChange,c.onMetaChange,c)}}},applyWriter:function(b){var a=this.getReader();b=Ext.Factory.writer(b);if(b.getRecord&&!b.getRecord()&&a&&a.getRecord){a=a.getRecord();if(a){b.setRecord(a)}}return b},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent("metachange",this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(n,k){var j=this,i=j.getBatchActions(),g,c,f,d,e,l,b,m,h;if(n.operations===undefined){n={operations:n,listeners:k}}if(n.batch){if(Ext.isDefined(n.batch.runOperation)){g=Ext.applyIf(n.batch,{proxy:j,listeners:{}})}}else{n.batch={proxy:j,listeners:n.listeners||{}}}if(!g){g=new Ext.data.Batch(n.batch)}g.on("complete",Ext.bind(j.onBatchComplete,j,[n],0));f=j.getBatchOrder().split(",");d=f.length;for(l=0;l<d;l++){e=f[l];c=n.operations[e];if(c){if(i){g.add(j.createOperation(e,{records:c,params:n.params}))}else{m=c.length;for(b=0;b<m;b++){h=c[b];g.add(j.createOperation(e,{records:[h],params:n.params}))}}}}g.start();return g},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException()){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else{if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}},createOperation:function(c,b){var a=Ext.createByAlias("data.operation."+c,b);a.setProxy(this);this.pendingOperations[a._internalId]=a;return a},completeOperation:function(a){delete this.pendingOperations[a._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var b=this.pendingOperations,a,c;for(a in b){c=b[a];if(c&&c.isRunning()){c.abort()}}this.pendingOperations=null}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{enablePaging:false,data:{$value:null,merge:function(d,a,c,b){if(Ext.isArray(d)){return Ext.Array.clone(d)}else{return Ext.clone(d)}}}},finishOperation:function(b){var c=0,d=b.getRecords(),a=d.length;for(c;c<a;c++){d[c].commit()}b.setSuccessful(true)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(f){var h=this,i=h.getReader().read(h.getData()),d=i.getRecords(),g=f.getSorters(),a=f.getGrouper(),c=f.getFilters(),b=f.getStart(),e=f.getLimit();if(f.process(i,null,null,false)!==false){if(c&&c.length){i.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(c)));i.setTotal(d.length)}if(a){g=g?g.concat(a):g}if(g&&g.length){i.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(g)))}if(h.getEnablePaging()&&b!==undefined&&e!==undefined){if(b>=i.getTotal()){i.setConfig({success:false,records:[],total:0})}else{i.setRecords(Ext.Array.slice(d,b,b+e))}}f.setCompleted()}},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",sortOnLoad:true,trackRemoved:true,asynchronousLoad:undefined},onClassExtended:function(b,d,a){var c=d.model,e;if(typeof c==="string"){e=a.onBeforeCreated;a.onBeforeCreated=function(){var g=this,f=arguments;Ext.require(c,function(){e.apply(g,f)})}}},implicitModel:"Ext.data.Model",autoSyncSuspended:0,constructor:function(a){var b=this;b.removed=[];Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);if(b.getAsynchronousLoad()===false){b.flushLoad()}},applyAsynchronousLoad:function(a){if(a==null){a=!this.loadsSynchronously()}return a},updateAutoLoad:function(a){this.getData();if(a){this.load(Ext.isObject(a)?a:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){if(a){this.createImplicitModel(a)}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else{this.getFields();a=this.getModel()||this.createImplicitModel()}return a},applyProxy:function(b){var a=this.getModel();if(b!==null){if(b){if(b.isProxy){b.setModel(a)}else{if(Ext.isString(b)){b={type:b,model:a}}else{if(!b.model){b=Ext.apply({model:a},b)}}b=Ext.createByAlias("proxy."+b.type,b);b.autoCreated=true}}else{if(a){b=a.getProxy()}}if(!b){b=Ext.createByAlias("proxy.memory");b.autoCreated=true}}return b},applyState:function(b){var a=this;Ext.data.AbstractStore.prototype.applyState.call(this,b);if(a.getAutoLoad()||a.isLoaded()){a.load()}},updateProxy:function(b,a){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(a){this.cleanRemoved();this.removed=a?[]:null},onMetaChange:function(a,b){this.fireEvent("metachange",this,b)},create:function(e,c){var d=this,f=d.getModel(),a=new f(e),b;c=Ext.apply({},c);if(!c.records){c.records=[a]}c.internalScope=d;c.internalCallback=d.onProxyWrite;b=d.createOperation("create",c);return b.execute()},read:function(){return this.load.apply(this,arguments)},update:function(b){var c=this,a;b=Ext.apply({},b);if(!b.records){b.records=c.getUpdatedRecords()}b.internalScope=c;b.internalCallback=c.onProxyWrite;a=c.createOperation("update",b);return a.execute()},onProxyWrite:function(b){var c=this,d=b.wasSuccessful(),a=b.getRecords();switch(b.getAction()){case"create":c.onCreateRecords(a,b,d);break;case"update":c.onUpdateRecords(a,b,d);break;case"destroy":c.onDestroyRecords(a,b,d);break}if(d){c.fireEvent("write",c,b);c.fireEvent("datachanged",c)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(b,a,c){if(c){this.cleanRemoved()}},erase:function(b){var c=this,a;b=Ext.apply({},b);if(!b.records){b.records=c.getRemovedRecords()}b.internalScope=c;b.internalCallback=c.onProxyWrite;a=c.createOperation("destroy",b);return a.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(c,a){var f=this,b=c.operations,e=b.length,d;if(f.batchUpdateMode!=="operation"){f.suspendEvents();for(d=0;d<e;d++){f.onProxyWrite(b[d])}f.resumeEvents()}f.isSyncing=false;f.fireEvent("datachanged",f)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===true&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty===true&&a.phantom!==true&&a.isValid()},getRemovedRecords:function(){var a=this.getRawRemovedRecords();return a?Ext.Array.clone(a):a},sync:function(c){var e=this,b={},f=e.getNewRecords(),d=e.getUpdatedRecords(),a=e.getRemovedRecords(),g=false;e.needsSync=false;if(f.length>0){b.create=f;g=true}if(d.length>0){b.update=d;g=true}if(a.length>0){b.destroy=a;g=true}if(g&&e.fireEvent("beforesync",b)!==false){e.isSyncing=true;c=c||{};e.proxy.batch(Ext.apply(c,{operations:b,listeners:e.getBatchListeners()}))}return e},getBatchListeners:function(){var b=this,a={scope:b,exception:b.onBatchException,complete:b.onBatchComplete};if(b.batchUpdateMode==="operation"){a.operationcomplete=b.onBatchOperationComplete}return a},save:function(){return this.sync.apply(this,arguments)},load:function(a){var b=this;if(typeof a==="function"){a={callback:a}}else{a=a?Ext.Object.chain(a):{}}b.pendingLoadOptions=a;if(b.getAsynchronousLoad()){if(!b.loadTimer){b.loadTimer=Ext.asap(b.flushLoad,b)}}else{b.flushLoad()}return b},flushLoad:function(){var c=this,b=c.pendingLoadOptions,a;c.clearLoadTask();if(!b){return}c.setLoadOptions(b);if(c.getRemoteSort()&&b.sorters){c.fireEvent("beforesort",c,b.sorters)}a=Ext.apply({internalScope:c,internalCallback:c.onProxyLoad,scope:c},b);c.lastOptions=a;a=c.createOperation("read",a);if(c.fireEvent("beforeload",c,a)!==false){c.onBeforeLoad(a);c.loading=true;a.execute()}},reload:function(a){var b=Ext.apply({},a,this.lastOptions);return this.load(b)},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(a,c){var b=this;if(!c){c=null}if(b.contains(a)){b.onUpdate(a,Ext.data.Model.COMMIT,c);b.fireEvent("update",b,a,Ext.data.Model.COMMIT,c)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var b=this,a=b.getProxy();b.clearLoadTask();b.getData().destroy();b.data=null;b.setProxy(null);if(a.autoCreated){a.destroy()}b.setModel(null)},hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer);this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var c=this.getRawRemovedRecords(),a,b;if(c){for(b=0,a=c.length;b<a;++b){c[b].unjoin(this)}c.length=0}},createOperation:function(d,a){var e=this,b=e.getProxy(),c;if(!e.proxyListeners){c={scope:e,destroyable:true,beginprocessresponse:e.beginUpdate,endprocessresponse:e.endUpdate};if(!e.disableMetaChangeEvent){c.metachange=e.onMetaChange}e.proxyListeners=b.on(c)}return b.createOperation(d,a)},createImplicitModel:function(a){var e=this,b={extend:e.implicitModel,statics:{defaultProxy:"memory"}},d,c;if(a){b.fields=a}c=Ext.define(null,b);e.setModel(c);d=e.getProxy();if(d){c.setProxy(d)}else{e.setProxy(c.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(a){var b=this.getRawRemovedRecords();if(b){Ext.Array.remove(b,a);a.unjoin(this)}},setLoadOptions:function(a){var c=this,b,d;if(c.getRemoteFilter()){b=c.getFilters(false);if(b&&b.getCount()){a.filters=b.getRange()}}if(c.getRemoteSort()){d=c.getSorters(false);if(d&&d.getCount()){a.sorters=d.getRange()}}}}},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0));(Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(a){var c,b=this.getData();b.setExtraKeys(a);a=b.getExtraKeys();for(c in a){this[c]=a[c]}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:"data"})},createModel:function(a){var b=this.getSession(),c;if(!a.isModel){c=this.getModel();a=new c(a,b)}return a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var a=this.getData().getSorters();a.setSorterConfigure(this.addFieldTransform,this);return a},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return this.indexOf(a)>-1},each:function(e,d){var f=this.data.items,a=f.length,b,c;for(c=0;c<a;++c){b=f[c];if(e.call(d||b,b,c,a)===false){break}}},collect:function(b,a,c){var d=this,e=d.getData();if(c===true&&e.filtered){e=e.getSource()}return e.collect(b,"data",a)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(a){var c=this.getData(),b;if(c.filtered){if(!c.$hasExtraKeys){b=this.makeInternalKeyCfg();c.setExtraKeys(b);c.$hasExtraKeys=true}c=c.getSource()}if(!c.$hasExtraKeys){c.setExtraKeys(b||this.makeInternalKeyCfg());c.$hasExtraKeys=true}return c.byInternalId.get(a)||null},getDataSource:function(){var a=this.getData();return a.getSource()||a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},insert:function(c,b){var e=this,a,d;if(b){if(!Ext.isIterable(b)){b=[b]}else{b=Ext.Array.clone(b)}a=b.length}if(!a){return[]}for(d=0;d<a;++d){b[d]=e.createModel(b[d])}e.getData().insert(c,b);return b},queryBy:function(b,a){var c=this.getData();return(c.getSource()||c).createFiltered(b,a)},query:function(e,d,f,a,b){var c=this.getData();return(c.getSource()||c).createFiltered(e,d,f,a,b)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.sumByGroup(c):b.sum(c)},count:function(a){var b=this.getData();return(a&&this.isGrouped())?b.countByGroup():b.count()},min:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.minByGroup(c):b.min(c)},max:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.maxByGroup(c):b.max(c)},average:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.averageByGroup(c):b.average(c)},aggregate:function(g,k,e,h){var f=this,a,d,b,j,c;if(e&&f.isGrouped()){a=f.getGroups().items;d=a.length;b={};for(c=0;c<d;++c){j=a[c];b[j.getGroupKey()]=f.getAggregate(g,k||f,j.items,h)}return b}else{return f.getAggregate(g,k,f.getData().items,h)}},getAggregate:function(f,e,c,g){var b=[],a=c.length,d;for(d=0;d<a;++d){b[d]=c[d].get(g)}return f.call(e||this,c,b)},addObserver:function(a){var b=this.observers;if(!b){this.observers=b=new Ext.util.Collection()}b.add(a)},removeObserver:function(a){var b=this.observers;if(b){b.remove(a)}},callObservers:function(g,d){var h=this.observers,a,c,e,b,f;if(h){c=h.items;if(d){d.unshift(this)}else{d=[this]}for(e=0,a=c.length;e<a;++e){f=c[e];b="onSource"+g;if(f[b]){f[b].apply(f,d)}}}},queryRecordsBy:function(e,d){var g=this.getData(),f=[],a,c,b;g=(g.getSource()||g).items;d=d||this;for(c=0,a=g.length;c<a;++c){b=g[c];if(e.call(d,b)===true){f.push(b)}}return f},queryRecords:function(g,f){var e=this.getData(),d=[],a,c,b;e=(e.getSource()||e).items;for(c=0,a=e.length;c<a;++c){b=e[c];if(b.get(g)===f){d.push(b)}}return d},privates:{isLast:function(a){return a===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:true,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(a,b){var c=this.getExtraParams();c[a]=b;this.fireEvent("extraparamschanged",c)},updateExtraParams:function(b,a){this.fireEvent("extraparamschanged",b)},buildRequest:function(a){var f=this,b=Ext.apply({},a.getParams()),g=Ext.applyIf(b,f.getExtraParams()||{}),e,d,c;Ext.applyIf(g,f.getParams(a));d=a.getId();c=f.getIdParam();if(d!==undefined&&g[c]===undefined){g[c]=d}e=new Ext.data.Request({params:g,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:f});e.setUrl(f.buildUrl(e));a.setRequest(e);return e},processResponse:function(h,c,g,b){var f=this,d,a,e;f.fireEvent("beginprocessresponse",f,b,c);if(h===true){a=f.getReader();if(b.status===204){e=a.getNullResultSet()}else{e=a.read(f.extractResponseData(b),{recordCreator:c.getRecordCreator()})}c.process(e,g,b);d=!c.wasSuccessful()}else{f.setException(c,b);d=true}if(d){f.fireEvent("exception",f,b,c)}f.afterRequest(g,h);f.fireEvent("endprocessresponse",f,b,c)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(e,c){var a=[],d=e.length,b;for(b=0;b<d;b++){a[b]=e[b].serialize()}return this.applyEncoding(c?a[0]:a)},encodeFilters:function(d){var a=[],c=d.length,b,e;for(b=0;b<c;b++){a[b]=d[b].serialize()}return this.applyEncoding(a)},getParams:function(o){if(!o.isReadOperation){return{}}var u=this,t={},r=o.getGrouper(),a=o.getSorters(),m=o.getFilters(),h=o.getPage(),g=o.getStart(),s=o.getLimit(),k=u.getSimpleSortMode(),d=u.getSimpleGroupMode(),q=u.getPageParam(),e=u.getStartParam(),b=u.getLimitParam(),c=u.getGroupParam(),l=u.getGroupDirectionParam(),f=u.getSortParam(),p=u.getFilterParam(),n=u.getDirectionParam(),j,i;if(q&&h){t[q]=h}if(e&&(g||g===0)){t[e]=g}if(b&&s){t[b]=s}j=c&&r;if(j){if(d){t[c]=r.getProperty();t[l]=r.getDirection()}else{t[c]=u.encodeSorters([r],true)}}if(f&&a&&a.length>0){if(k){i=0;if(a.length>1&&j){i=1}t[f]=a[i].getProperty();t[n]=a[i].getDirection()}else{t[f]=u.encodeSorters(a)}}if(p&&m&&m.length>0){t[p]=u.encodeFilters(m)}return t},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.getCacheString(),Ext.Date.now()))}return a},getUrl:function(b){var a;if(b){a=b.getUrl()||this.getApi()[b.getAction()]}return a?a:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(a){},afterRequest:Ext.emptyFn,destroy:function(){Ext.data.proxy.Proxy.prototype.destroy.call(this);Ext.destroy(this.getReader(),this.getWriter());this.reader=this.writer=null}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:true,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(a){var d=this,e=d.getWriter(),c=d.buildRequest(a),g=d.getMethod(c),b,f;if(e&&a.allowWrite()){c=e.write(c)}c.setConfig({binary:d.getBinary(),headers:d.getHeaders(),timeout:d.getTimeout(),scope:d,callback:d.createRequestCallback(c,a),method:g,useDefaultXhrHeader:d.getUseDefaultXhrHeader(),disableCaching:false});if(g.toUpperCase()!=="GET"&&d.getParamsAsJson()){f=c.getParams();if(f){b=c.getJsonData();if(b){b=Ext.Object.merge({},b,f)}else{b=f}c.setJsonData(b);c.setParams(undefined)}}if(d.getWithCredentials()){c.setWithCredentials(true);c.setUsername(d.getUsername());c.setPassword(d.getPassword())}return d.sendRequest(c)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(a){var c=this.getActionMethods(),b=a.getAction(),d;if(c){d=c[b]}return d||this.defaultActionMethods[b]},createRequestCallback:function(c,a){var b=this;return function(e,f,d){if(c===b.lastRequest){b.lastRequest=null}b.processResponse(f,a,c,d)}},destroy:function(){this.lastRequest=null;Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:false,preserveRawData:false},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(d,c,a){var b=this,e;if(b.getMeta){e=b.getMeta(d);if(e){b.onMetaChange(e)}}else{if(d.metaData){b.onMetaChange(d.metaData)}}return Ext.data.reader.Reader.prototype.readRecords.call(this,d,c,a)},getResponseData:function(a){var b;try{return Ext.decode(a.responseText)}catch(c){b=this.createReadError(c.message);Ext.Logger.warn("Unable to parse the JSON returned by the server");this.fireEvent("exception",this,a,b);return b}},buildExtractors:function(){var c=this,a,b;if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){a=c.getMetaProperty();b=c.getRootProperty();if(b){c.getRoot=c.getAccessor(b)}else{c.getRoot=Ext.identityFn}if(a){c.getMeta=c.getAccessor(a)}}},extractData:function(a,e){var f=this.getRecord(),d=[],c,b;if(f){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][f]}}else{d=a}return Ext.data.reader.Reader.prototype.extractData.call(this,d,e)},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:(function(){var a=/[\[\.]/;return function(q){var m=this,b=m.getUseSimpleAccessors(),e,t,j,f,d,p,s,o,n,k,l,g,r,h;if(!(q||q===0)){return}if(typeof q==="function"){return q}if(!b){e=String(q).search(a)}if(b===true||e<0){t=function(c){return c[q]}}else{j="raw";f=[];d="";p=0;h=q.length;for(g=0;g<=h;++g){l=q[g];s=l===".";o=l==="[";n=l==="]";k=s||o||n||!l;if(!k||p>1||(p&&!n)){d+=l}else{if(k){r=false;if(o){++p}else{if(n){--p;r=true}}if(d){if(r){d="["+d+"]"}else{d="."+d}j+=d;f.push(""+j);d=""}}}}t=f.join(" && ");t=Ext.functionFactory("raw","return "+t)}return t}}()),createFieldAccessor:function(e){var b=this,a=e.mapping,c=a||a===0,d=c?a:e.name;if(c){if(typeof d==="function"){return function(f){return e.mapping(f,b)}}else{return b.createAccessor(d)}}},getAccessorKey:function(b){var a=this.getUseSimpleAccessors()?"simple":"";return this.$className+a+b},privates:{copyFrom:function(a){Ext.data.reader.Reader.prototype.copyFrom.call(this,a);this.getRoot=a.getRoot}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,expandData:false},getExpandedData:function(d){var b=d.length,e=0,h,a,f,c,g,k=function(i,j){var l={};l[i]=j;return l};for(;e<b;e++){h=d[e];for(a in h){if(h.hasOwnProperty(a)){f=a.split(".");c=f.length-1;if(c>0){g=h[a];for(;c>0;c--){g=k(f[c],g)}h[f[0]]=h[f[0]]||{};Ext.Object.merge(h[f[0]],g);delete h[a]}}}}return d},writeRecords:function(e,f){var d=this,a=d.getRootProperty(),c,g,b;if(d.getExpandData()){f=d.getExpandedData(f)}if(d.getAllowSingle()&&f.length===1){f=f[0];g=true}b=this.getTransform();if(b){f=b(f,e)}if(d.getEncode()){if(a){e.setParam(a,Ext.encode(f))}else{}}else{if(g||(f&&f.length)){c=e.getJsonData()||{};if(a){c[a]=f}else{c=f}e.setJsonData(c)}}return e}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001},0,0,0,0,0,0,[Ext.util,"Group"],0));(Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:true,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(a){var b=this;b.sortFn=Ext.util.Sorter.createComparator(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeSorter)},addSort:function(i,h,c){var g=this,d,e,b,k,a,j,f;if(!i){g.beginUpdate();g.endUpdate()}else{k=g.getOptions();if(i instanceof Array){f=i;c=h;h=null}else{if(Ext.isString(i)){if(!(j=g.get(i))){f=[{property:i,direction:h||k.getDefaultSortDirection()}]}else{f=[j]}}else{if(Ext.isFunction(i)){f=[{sorterFn:i,direction:h||k.getDefaultSortDirection()}]}else{f=[i];c=h;h=null}}}c=g._sortModes[c||"replace"];a=g.getAt(0);d=g.length;e=c.append?d:0;g.beginUpdate();g.splice(e,c.replace?d:0,f);if(c.multi){d=g.length;b=k.getMultiSortLimit();if(d>b){g.removeAt(b,d)}}if(j&&h){j.setDirection(h)}else{if(e===0&&a&&a===g.getAt(0)){a.toggle()}}g.endUpdate()}},clear:function(){this.beginUpdate();Ext.util.Collection.prototype.clear.call(this);this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(e){var b=this.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getProperty()===e){return d}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(h,a){var f=this,i=f.getOptions(),g=i.getRootProperty(),b=f.getSorterOptionsFn(),c,e,d;if(h.isSorter){if(!h.getRoot()){h.setRoot(g)}}else{e={direction:i.getDefaultSortDirection(),root:g};d=typeof h;if(d==="string"){c=f.get(h);if(c){return c}e.property=h}else{if(d==="function"){e.sorterFn=h}else{e=Ext.apply(e,h);if(e.fn){e.sorterFn=e.fn;delete e.fn}}}h=Ext.create(a||"Ext.util.Sorter",e)}if(b){b.call(f.getSorterOptionsScope()||f,h)}return h},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(g,d){var j=this,e=(d===undefined)?g:g[d];if(!e||!e.$cloned){if(g.length>d+1||!Ext.isIterable(e)){e=Ext.Array.slice(g,d)}var k=j.items,f=e.length,c=[],b,l,a,m,h;for(b=0;b<f;b++){m=e[b];if(m&&m.isSorter){c.push(m)}else{h=typeof m;if(h==="string"){m=j.get(m);if(m){c.push(m)}}else{if(h==="function"){for(a=k.length;a-->0;){l=k[a];if(l.getSorterFn()===m){c.push(l)}}}}}}e=c;e.$cloned=true}return e},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0));(Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(a){var b=this;b.filterFn=Ext.util.Filter.createFilterFn(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},decodeFilter:function(c){var b=this.getOptions(),a=b.getRootProperty(),d;if(c.isFilter){if(!c.getRoot()){c.setRoot(a)}}else{d={root:a};if(Ext.isFunction(c)){d.filterFn=c}else{d=Ext.apply(d,c);if(d.fn){d.filterFn=d.fn;delete d.fn}if(Ext.util.Filter.isInvalid(d)){return false}}c=new Ext.util.Filter(d)}return c},decodeRemoveItems:function(o,j){var q=this,k=(j===undefined)?o:o[j];if(!k.$cloned){if(o.length>j+1||!Ext.isIterable(k)){k=Ext.Array.slice(o,j)}var e=q.items,m=k.length,g=[],b,f,c,l,a,r,h,d,p;for(f=0;f<m;f++){b=k[f];if(b&&b.isFilter){g.push(b)}else{p=typeof b;c=p==="function";l=b.property!==undefined&&b.value!==undefined;a=p==="string";for(d=e.length;d-->0;){r=e[d];h=false;if(a){h=r.getProperty()===b}else{if(c){h=r.getFilterFn()===b}else{if(l){h=r.getProperty()===b.property&&r.getValue()===b.value}}}if(h){g.push(r)}}}}k=g;k.$cloned=true}return k},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0));(Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:true,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(b,a){this.changeDetails=a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(c,a){var b=a.item;if(!a.indexChanged){this.syncItemGrouping(c,b,c.getKey(b),a.oldKey,a.oldIndex)}this.changeDetails=null},onCollectionRefresh:function(a){this.removeAll();this.addItemsToGroups(a,a.items)},onCollectionRemove:function(a,b){var g=this,k=g.changeDetails,f,h,j,e,c,d,l;if(k){l=k.item;j=g.findGroupForItem(l);f=[];if(j){f.push({group:j,items:[l]})}}else{f=g.groupItems(a,b.items,false)}for(e=0,c=f.length;e<c;++e){j=(h=f[e]).group;if(j){j.remove(h.items);if(!j.length){(d||(d=[])).push(j)}}}if(d){g.remove(d)}},onCollectionSort:function(e){var d=this,g=e.getSorters(false),a,c,b,f;if(g){a=d.items;c=d.length;for(b=0;b<c;++b){f=a[b];if(f.getSorters()!==g){f.setSorters(g)}}}},onCollectionUpdateKey:function(d,b){var a=b.index,c=b.item;if(!b.indexChanged){a=d.indexOf(c);this.syncItemGrouping(d,c,b.newKey,b.oldKey,a)}},addItemsToGroups:function(b,a){this.groupItems(b,a,true)},groupItems:function(b,k,d){var l=this,a={},h=[],c=b.getGrouper(),n=l.itemGroupKeys,m,o,q,g,p,e,j,f;for(g=0,j=k.length;g<j;++g){q=c.getGroupString(p=k[g]);e=b.getKey(p);if(d){(n||(l.itemGroupKeys=n={}))[e]=q}else{if(n){delete n[e]}}if(!(m=a[q])){if(!(o=l.getByKey(q))&&d){(f||(f=[])).push(o=l.createGroup(b,q))}h.push(a[q]=m={group:o,items:[]})}m.items.push(p)}for(g=0,j=h.length;g<j;++g){m=h[g];m.group.add(m.items)}if(f){l.add(f)}return h},syncItemGrouping:function(a,o,f,i,b){var m=this,j=m.itemGroupKeys||(m.itemGroupKeys={}),c=a.getGrouper(),p=c.getGroupString(o),g=0,l=-1,k,n,e,h,d;if(i){h=j[i];delete j[i]}else{h=j[f]}j[f]=p;if(!(n=m.get(p))){n=m.createGroup(a,p);k=[n]}if(n.get(f)!==o){if(n.getCount()>0&&a.getSorters().getCount()===0){d=a.indexOf(n.items[0]);if(b<d){l=0}else{l=b-d}}if(l===-1){n.add(o)}else{n.insert(l,o)}}else{n.itemChanged(o)}if(p!==h&&(h===0||h)){e=m.get(h);if(e){e.remove(o);if(!e.length){g=[e]}}}if(k){m.splice(0,g,k)}else{if(g){m.splice(0,g)}}},createGroup:function(b,a){var c=new Ext.util.Group({groupKey:a,rootProperty:this.getItemRoot(),sorters:b.getSorters()});return c},getKey:function(a){return a.getGroupKey()},createSortFn:function(){var c=this,a=c.getGrouper(),b=c.getSorters().getSortFn();if(!a){return b}return function(d,e){return a.sort(d.items[0],e.items[0])||b(d,e)}},updateGrouper:function(a){var b=this;b.grouped=!!(a&&b.$groupable.getAutoGroup());b.onSorterChange();b.onEndUpdateSorters(b.getSorters())},destroy:function(){this.$groupable=null;Ext.util.Collection.prototype.destroy.call(this)},privates:{findGroupForItem:function(d){var b=this.items,a=b.length,c,e;for(c=0;c<a;++c){e=b[c];if(e.contains(d)){return e}}}}},0,0,0,0,0,0,[Ext.util,"GroupCollection"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:true,clearOnPageLoad:true,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:true},loadCount:0,complete:false,moveMapCount:0,constructor:function(a){var b=this,c;if(a){if(a.buffered){return new Ext.data.BufferedStore(a)}}Ext.data.ProxyStore.prototype.constructor.call(this,a);b.getData().addObserver(b);c=b.inlineData;if(c){delete b.inlineData;b.loadInlineData(c)}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(c,a){var b=this;b.getFields();b.getModel();if(c&&c.isCollection){a=c}else{if(!a){a=b.constructDataCollection()}if(c){if(b.isInitializing){b.inlineData=c}else{b.loadData(c)}}}return a},loadInlineData:function(c){var b=this,a=b.getProxy();if(a&&a.isMemoryProxy){a.setData(c);b.suspendEvents();b.read();b.resumeEvents()}else{b.removeAll(true);b.suspendEvents();b.loadData(c);b.resumeEvents()}},onCollectionAdd:function(b,a){this.onCollectionAddItems(b,a.items,a)},onCollectionFilterAdd:function(b,a){this.onCollectionAddItems(b,a)},onCollectionAddItems:function(f,b,a){var k=this,h=b.length,m=a?!a.next:false,g=k.removed,e=k.ignoreCollectionAdd,j=k.getSession(),o=a&&a.replaced,c,l,d,n;for(c=0;c<h;++c){d=b[c];if(j){j.adopt(d)}if(!e){d.join(k);if(g&&g.length){Ext.Array.remove(g,d)}l=l||d.phantom||d.dirty}}if(e){return}if(o){n=[];do{Ext.Array.push(n,o.items);o=o.next}while(o);k.setMoving(n,true)}if(a){if(a.replaced){if(m){k.fireEvent("refresh",k)}}else{k.fireEvent("add",k,b,a.at);if(m){k.fireEvent("datachanged",k)}}}if(n){k.setMoving(n,false)}k.needsSync=k.needsSync||l},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(f,e){var d=this,a=e.item,c=e.modified||null,b=e.meta;if(d.fireChangeEvent(a)){d.onUpdate(a,b,c,e);d.fireEvent("update",d,a,b,c,e)}},fireChangeEvent:function(a){return this.getDataSource().contains(a)},afterChange:function(a,c,b){this.getData().itemChanged(a,c||null,undefined,b)},afterCommit:function(a,b){this.afterChange(a,b,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.afterChange(a,b,Ext.data.Model.EDIT)},afterReject:function(a){this.afterChange(a,null,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},afterErase:function(a){this.removeFromRemoved(a)},addSorted:function(a){var c=this,e=c.getRemoteSort(),d=c.getData(),b;if(e){d.setSorters(c.getSorters())}b=d.findInsertionIndex(a);if(e){d.setSorters(null)}return c.insert(b,a)},remove:function(b,j,g){var h=this,c=h.getDataSource(),f,d,a,e;if(b){if(b.isModel){if(c.indexOf(b)>-1){a=[b];f=1}else{f=0}}else{a=[];for(d=0,f=b.length;d<f;++d){e=b[d];if(e&&e.isEntity){if(!c.contains(e)){continue}}else{if(!(e=c.getAt(e))){continue}}a.push(e)}f=a.length}}if(!f){return[]}h.removeIsMove=j===true;h.removeIsSilent=g;c.remove(a);h.removeIsSilent=false;return a},onCollectionRemove:function(g,a){var m=this,h=m.removed,c=a.items,k=c.length,j=a.at,b=a.replacement,o=m.removeIsMove||(b&&Ext.Array.equals(c,b.items)),l=m.removeIsSilent,n=!a.next,e=m.getDataSource(),d,f;if(m.ignoreCollectionRemove){return}if(b){m.setMoving(b.items,true)}for(d=0;d<k;++d){f=c[d];if(!e.contains(f)){if(h&&!o&&!f.phantom&&!f.erasing){f.removedFrom=j+d;h.push(f);m.needsSync=true}else{f.unjoin(m)}}}if(!l){if(!b||!b.items.length){m.fireEvent("remove",m,c,j,o);if(n){m.fireEvent("datachanged",m)}}}if(b){m.setMoving(b.items,false)}},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},removeAt:function(a,b){var c=this.getData();a=Math.max(a,0);if(a<c.length){if(arguments.length===1){b=1}else{if(!b){return}}c.removeAt(a,b)}},removeAll:function(b){var c=this,d=c.getData(),e=c.hasListeners.clear,a=d.getRange();if(d.length){c.removeIsSilent=true;c.callObservers("BeforeRemoveAll");d.removeAll();c.removeIsSilent=false;if(!b){c.fireEvent("clear",c,a);c.fireEvent("datachanged",c)}c.callObservers("AfterRemoveAll",[!!b])}return a},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else{this.add(a)}},splice:function(a,c,b){return this.getData().splice(a,c,b)},onProxyLoad:function(b){var d=this,c=b.getResultSet(),a=b.getRecords(),e=b.wasSuccessful();if(d.destroyed){return}if(c){d.totalCount=c.getTotal()}if(e){a=d.processAssociation(a);d.loadRecords(a,b.getAddRecords()?{addRecords:true}:undefined)}else{d.loading=false}if(d.hasListeners.load){d.fireEvent("load",d,a,e,b)}d.callObservers("AfterLoad",[a,e,b])},filterDataSource:function(e){var f=this.getDataSource(),b=f.items,a=b.length,c=[],d;for(d=0;d<a;d++){if(e.call(f,b[d])){c.push(b[d])}}return c},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(f,a){var e=this,d=f.length,c=[],b;for(b=0;b<d;b++){c.push(e.createModel(f[b]))}c=e.processAssociation(c);e.loadRecords(c,a?e.addRecordsOptions:undefined)},loadRawData:function(e,b){var d=this,f=d.getSession(),a=d.getProxy().getReader().read(e,f?{recordCreator:f.recordCreator}:undefined),c=a.getRecords(),g=a.getSuccess();if(g){d.totalCount=a.getTotal();d.loadRecords(c,b?d.addRecordsOptions:undefined)}return g},loadRecords:function(a,c){var g=this,f=a.length,h=g.getData(),e,d,b;if(c){e=c.addRecords}if(!g.getRemoteSort()&&!g.getSortOnLoad()){b=true;h.setAutoSort(false)}if(!e){g.clearData(true)}g.loading=false;g.ignoreCollectionAdd=true;g.callObservers("BeforePopulate");h.add(a);g.ignoreCollectionAdd=false;if(b){h.setAutoSort(true)}for(d=0;d<f;d++){a[d].join(g)}++g.loadCount;g.complete=true;g.fireEvent("datachanged",g);g.fireEvent("refresh",g);g.callObservers("AfterPopulate")},loadPage:function(d,a){var c=this,b=c.getPageSize();c.currentPage=d;a=Ext.apply({page:d,start:(d-1)*b,limit:b,addRecords:!c.getClearOnPageLoad()},a);c.read(a)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(c){var j=this,g=j.removed,d=j.getDataSource(),h=j.getClearRemovedOnLoad(),k=g&&c&&!h,a,e,b,f;if(d){a=d.items;for(b=0,f=a.length;b<f;++b){e=a[b];if(k&&Ext.Array.contains(g,e)){continue}e.unjoin(j)}j.ignoreCollectionRemove=true;j.callObservers("BeforeClear");d.removeAll();j.ignoreCollectionRemove=false;j.callObservers("AfterClear")}if(g&&(!c||h)){g.length=0}},onIdChanged:function(c,b,a){this.getData().updateKey(c,b);this.fireEvent("idchanged",this,c,b,a)},commitChanges:function(){var c=this,d=c.getModifiedRecords(),a=d.length,b=0;Ext.suspendLayouts();c.beginUpdate();for(;b<a;b++){d[b].commit()}c.cleanRemoved();c.endUpdate();Ext.resumeLayouts(true)},filterNewOnly:function(a){return a.phantom===true},filterRejects:function(a){return a.phantom||a.dirty},rejectChanges:function(){var h=this,j=h.getRejectRecords(),f=j.length,d,b,a,g,c,e;Ext.suspendLayouts();h.beginUpdate();for(d=0;d<f;d++){b=j[d];if(b.phantom){a=a||[];a.push(b)}else{b.reject()}}if(a){h.remove(a);for(d=0,f=a.length;d<f;++d){a[d].reject()}}j=h.getRawRemovedRecords();if(j){f=j.length;g=!h.getRemoteSort()&&h.isSorted();if(g){c=h.getData();e=c.getAutoSort();c.setAutoSort(false)}for(d=f-1;d>=0;d--){b=j[d];b.reject();if(!g){h.insert(b.removedFrom||0,b)}}if(g){c.setAutoSort(e);h.add(j)}j.length=0}h.endUpdate();Ext.resumeLayouts(true)},onDestroy:function(){var b=this,a=b.loadTask,d=b.getData(),c=d.getSource();b.clearData();Ext.data.ProxyStore.prototype.onDestroy.call(this);b.setSession(null);b.observers=null;if(a){a.cancel();b.loadTask=null}if(c){c.destroy()}},privates:{fetch:function(b){b=Ext.apply({},b);this.setLoadOptions(b);var a=this.createOperation("read",b);a.execute()},onBeforeLoad:function(a){this.callObservers("BeforeLoad",[a])},onRemoteFilterSet:function(a,b){if(a){this.getData().setFilters(b?null:a)}Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,a,b)},onRemoteSortSet:function(b,c){var a=this.getData();if(b){a.setSorters(c?null:b)}a.setAutoGroup(!c);Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,b,c)},isMoving:function(c,e){var f=this.moveMap,b=0,a,d;if(f){if(c){if(Ext.isArray(c)){for(d=0,a=c.length;d<a;++d){b+=f[c[d].id]?1:0}}else{if(f[c.id]){++b}}}else{b=e?f:this.moveMapCount}}return b},setLoadOptions:function(c){var d=this,a=d.getPageSize(),e,b;if(d.getRemoteSort()&&!c.grouper){b=d.getGrouper();if(b){c.grouper=b}}if(a||"start" in c||"limit" in c||"page" in c){c.page=c.page!=null?c.page:d.currentPage;c.start=(c.start!==undefined)?c.start:(c.page-1)*a;c.limit=c.limit!=null?c.limit:a;d.currentPage=c.page}c.addRecords=c.addRecords||false;if(!c.recordCreator){e=d.getSession();if(e){c.recordCreator=e.recordCreator}}Ext.data.ProxyStore.prototype.setLoadOptions.call(this,c)},setMoving:function(b,f){var d=this,e=d.moveMap||(d.moveMap={}),a=b.length,c,g;for(c=0;c<a;++c){g=b[c].id;if(f){if(e[g]){++e[g]}else{e[g]=1;++d.moveMapCount}}else{if(--e[g]===0){delete e[g];--d.moveMapCount}}}if(d.moveMapCount===0){d.moveMap=null}},processAssociation:function(a){var c=this,b=c.getAssociatedEntity();if(b){a=c.getRole().processLoad(c,b,a,c.getSession())}return a}}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(d){var b=d.mapping,c=d.hasMapping()?b:d.ordinal,a;d.mapping=c;a=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);d.mapping=b;return a},getModelData:function(a){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(e,a){if(this.expandData){var d=[],b=0,c=e.length;for(;b<c;b++){d[d.length]=[e[b]]}e=d}Ext.data.Store.prototype.loadData.call(this,e,a)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(c,g){if(Ext.isArray(c)){var b=["field1"],e=!Ext.isArray(c[0]),f=c,d,a;if(e){f=[];for(d=0,a=c.length;d<a;++d){f.push([c[d]])}}else{for(d=2,a=c[0].length;d<=a;++d){b.push("field"+d)}}return new Ext.data.ArrayStore({data:f,fields:b,autoDestroy:true,autoCreated:true,expanded:e})}if(Ext.isString(c)){return this.get(c)}else{return Ext.Factory.store(c,g)}},getKey:function(a){return a.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(d,c){var b;if(Ext.isObject(d)){c=d}else{if(Ext.data.StoreManager.containsKey(d)){return Ext.data.StoreManager.lookup(d)}c.storeId=d}if(c instanceof Ext.data.Store){b=c}else{b=new Ext.data.Store(c)}Ext.data.StoreManager.register(b);return b};Ext.getStore=function(b){return Ext.data.StoreManager.lookup(b)};var a=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:false});a.isEmptyStore=true}));(Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",bindStore:function(b,c,a){a=a||"store";var d=this,e=c?null:d[a];if(b!==e){if(e){d.onUnbindStore(e,c,a);if(d.isComponent&&a==="store"&&e.autoDestroy){e.destroy()}else{d.unbindStoreListeners(e)}}if(b){d[a]=b=Ext.data.StoreManager.lookup(b);d.bindStoreListeners(b);d.onBindStore(b,e)}else{d[a]=null}}return d},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(a){var b=this.storeListeners;if(b){a.un(b)}},bindStoreListeners:function(a){var b=this.getStoreListeners(a);if(b){b=Ext.apply({},b);if(!b.scope){b.scope=this}this.storeListeners=b;a.on(b)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:"x-mask-loading",msgWrapCls:"x-mask-msg",useMsg:true,useTargetEl:false,cls:"x-mask",componentCls:"x-border-box",ariaRole:"status",focusable:true,tabIndex:0,autoEl:{tag:"div",role:"status"},childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}">{msg}</div>',"</div>","</div>"],maskOnDisable:false,skipLayout:true,constructor:function(b){var c=this,a;if(arguments.length===2){a=c.target=b;b=arguments[1]}else{a=b.target}Ext.Component.prototype.constructor.call(this,b);if(a.isComponent){c.ownerCt=a;c.hidden=true;c.renderTo=c.getMaskTarget();c.external=c.renderTo===Ext.getBody();c.bindComponent(a)}else{a=Ext.get(a);c.isElement=true;c.renderTo=c.target}c.render(c.renderTo);if(c.store){c.bindStore(c.store,true)}},initRenderData:function(){var a=Ext.Component.prototype.initRenderData.apply(this,arguments);a.msg=this.msg||"";return a},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el},bindComponent:function(a){var c=this,b={scope:this,resize:c.sizeMask};if(c.external){b.added=c.onComponentAdded;b.removed=c.onComponentRemoved;if(a.floating){b.move=c.sizeMask;c.activeOwner=a}else{if(a.ownerCt){c.onComponentAdded(a.ownerCt)}}}c.mon(a,b);if(c.external){c.mon(Ext.GlobalEvents,{show:c.onContainerShow,hide:c.onContainerHide,expand:c.onContainerExpand,collapse:c.onContainerCollapse,scope:c})}},onComponentAdded:function(a){var b=this;delete b.activeOwner;b.floatParent=a;if(!a.floating){a=a.up("[floating]")}if(a){b.activeOwner=a;b.mon(a,"move",b.sizeMask,b);b.mon(a,"tofront",b.onOwnerToFront,b)}else{b.preventBringToFront=true}a=b.floatParent.ownerCt;if(b.rendered&&b.isVisible()&&a){b.floatOwner=a;b.mon(a,"afterlayout",b.sizeMask,b,{single:true})}},onComponentRemoved:function(a){var c=this,d=c.activeOwner,b=c.floatOwner;if(d){c.mun(d,"move",c.sizeMask,c);c.mun(d,"tofront",c.onOwnerToFront,c)}if(b){c.mun(b,"afterlayout",c.sizeMask,c)}delete c.activeOwner;delete c.floatOwner},afterRender:function(){var a=this;Ext.Component.prototype.afterRender.apply(this,arguments);if(Ext.isIE){a.el.on("mousedown",a.onMouseDown,a)}this.el.skipGarbageCollection=true},onMouseDown:function(b){var a=this.el;if(b.within(a)){b.preventDefault();a.focus()}},onOwnerToFront:function(a,b){this.el.setStyle("zIndex",b+1)},onContainerShow:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var a=this;if(a.rendered&&a.isVisible()){a.hide();a.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var b=this,c=b.activeOwner||b.target,a=b.external?b.getOwner().el:b.getMaskTarget();if(b.rendered&&b.isVisible()){if(b.external){if(!b.isElement&&c.floating){b.onOwnerToFront(c,c.el.getZIndex())}b.el.setSize(a.getSize()).alignTo(a,"tl-tl")}b.msgWrapEl.center(b.el)}},bindStore:function(a,b){var c=this;Ext.destroy(c.proxyListeners);c.mixins.storeholder.bindStore.apply(c,arguments);a=c.store;if(a){while(a.getSource){a=a.getSource()}if(!a.loadsSynchronously()){c.proxyListeners=a.getProxy().on({exception:c.onLoad,scope:c,destroyable:true})}if(a.isLoading()){c.onBeforeLoad()}}},getStoreListeners:function(b){var d=this.onLoad,c=this.onBeforeLoad,a={cachemiss:c,cachefilled:{fn:d,buffer:100}};if(!b.loadsSynchronously()){a.beforeload=c;a.load=d}return a},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?a.getTargetEl():(a.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var c=this,a=c.getOwner(),b;if(!c.disabled){c.loading=true;if(a.componentLayoutCounter){c.maybeShow()}else{b=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=b;b.apply(a,arguments);c.maybeShow()}}}},maybeShow:function(){var b=this,a=b.getOwner();if(!a.isVisible(true)){b.showNext=true}else{if(b.loading&&a.rendered){b.show()}}},hide:function(){var b=this,a=b.ownerCt;if(b.isElement){a.unmask();b.fireEvent("hide",this);return}if(a){a.enableTabbing();a.setMasked(false)}delete b.showNext;return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var a=this;if(a.isElement){a.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);a.fireEvent("show",this);return}return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var b=this,a=b.ownerCt;b.loading=true;Ext.Component.prototype.afterShow.apply(this,arguments);a.disableTabbing();a.setMasked(true);b.el.restoreTabbableState();b.syncMaskState()},syncMaskState:function(){var c=this,b=c.ownerCt,a=c.el;if(c.isVisible()){if(c.hasOwnProperty("msgWrapCls")){a.dom.className=c.msgWrapCls}if(c.useMsg){c.msgTextEl.setHtml(c.msg)}else{c.msgEl.hide()}if(c.shim||Ext.useShims){a.enableShim(null,true)}else{a.disableShim()}if(b.el.contains(Ext.Element.getActiveElement())){c.focus()}c.sizeMask()}},onLoad:function(){this.loading=false;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.bindStore(null);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.isElement){a.ownerCt.unmask()}Ext.Component.prototype.onDestroy.call(this)}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.selection.Model",Ext.mixin.Observable,{alternateClassName:"Ext.AbstractSelectionModel",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:false,$configStrict:false,config:{store:null,selected:{}},isSelectionModel:true,allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(a){var b=this;b.modes={SINGLE:true,SIMPLE:true,MULTI:true};Ext.mixin.Observable.prototype.constructor.call(this,a);b.setSelectionMode(b.mode);if(b.selectionMode!=="SINGLE"){b.allowDeselect=true}},updateStore:function(a,b){this.bindStore(a,!b)},applySelected:function(a){if(!a.isCollection){a=new Ext.util.Collection(Ext.apply({rootProperty:"data"},a))}return a},getStoreListeners:function(){var a=this;return{add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh,pageadd:a.onPageAdd,pageremove:a.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(a){var c=this,b=c.store.getRange(),d=c.getSelection().length;c.suspendChanges();c.doSelect(b,true,a);c.resumeChanges();if(!a&&!c.destroyed){c.maybeFireSelectionChange(c.getSelection().length!==d)}},deselectAll:function(j){var f=this,b=f.getSelection(),g={},h=f.store,a=b.length,e,c,d;for(e=0,c=b.length;e<c;e++){d=b[e];g[d.id]=h.indexOf(d)}b=Ext.Array.sort(b,function(l,i){var m=g[l.id],k=g[i.id];return m<k?-1:1});f.suspendChanges();f.doDeselect(b,j);f.resumeChanges();if(!j&&!f.destroyed){f.maybeFireSelectionChange(f.getSelection().length!==a)}},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(b,f){var d=this,c=d.isSelected(b),a=f.shiftKey;switch(d.selectionMode){case"MULTI":d.selectWithEventMulti(b,f,c);break;case"SIMPLE":d.selectWithEventSimple(b,f,c);break;case"SINGLE":d.selectWithEventSingle(b,f,c);break}if(!a){if(d.isSelected(b)){d.selectionStart=b}else{d.selectionStart=null}}},vetoSelection:function(a){if(a.stopSelection){return true}else{if(a.type!=="keydown"&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return true}}else{return a.type==="mousedown"}}},onNavigate:function(g){if(!g.record||this.vetoSelection(g.keyEvent)){return}this.onBeforeNavigate(g);var i=this,h=g.keyEvent,b=h.ctrlKey||g.ctrlKey,d=g.recordIndex,f=g.record,m=g.previousRecord,c=i.isSelected(f),k=(i.selectionStart&&i.isSelected(g.previousRecord))?i.selectionStart:(i.selectionStart=g.previousRecord),a=g.previousRecordIndex,l=h.getCharCode(),n=l===h.SPACE,j=l===h.UP||l===h.PAGE_UP||l===h.HOME?"up":(l===h.DOWN||l===h.PAGE_DOWN||l===h.END?"down":null);switch(i.selectionMode){case"MULTI":i.setSelectionStart(g.selectionStart);if(l===h.A&&b){i.selected.beginUpdate();i.selectRange(0,i.store.getCount()-1);i.selected.endUpdate()}else{if(n){if(h.shiftKey){i.selectRange(k,f,b)}else{if(c){if(i.allowDeselect){i.doDeselect(f)}}else{i.doSelect(f,b)}}}else{if(h.shiftKey&&k){if(j==="up"&&a<=d){i.deselectRange(m,d+1)}else{if(j==="down"&&a>=d){i.deselectRange(m,d-1)}else{if(k!==f){i.selectRange(k,f,b)}}}i.lastSelected=f}else{if(l){if(!b){i.doSelect(f,false)}}else{i.selectWithEvent(f,h)}}}}break;case"SIMPLE":if(l===h.A&&b){i.selected.beginUpdate();i.selectRange(0,i.store.getCount()-1);i.selected.endUpdate()}else{if(c){i.doDeselect(f)}else{i.doSelect(f,true)}}break;case"SINGLE":if(!b){if(j){i.doSelect(f,false)}else{if(n||!l){i.selectWithEvent(f,h)}}}}if(!h.shiftKey&&!i.destroyed&&i.isSelected(f)){i.selectionStart=f;i.selectionStartIdx=d}},selectRange:function(l,d,m){var h=this,k=h.store,c=h.selected.items,n,f,g,e,a,j,b;if(h.isLocked()){return}n=h.normalizeRowRange(l,d);l=n[0];d=n[1];e=[];for(f=l;f<=d;f++){if(!h.isSelected(k.getAt(f))){e.push(k.getAt(f))}}if(!m){a=[];h.suspendChanges();for(f=0,g=c.length;f<g;++f){b=c[f];j=k.indexOf(b);if(j<l||j>d){a.push(b)}}for(f=0,g=a.length;f<g;++f){h.doDeselect(a[f])}h.resumeChanges()}if(!h.destroyed){if(e.length){h.doMultiSelect(e,true)}else{if(a){h.maybeFireSelectionChange(a.length>0)}}}},deselectRange:function(e,d){var h=this,c=h.store,a,g,f,b;if(h.isLocked()){return}a=h.normalizeRowRange(e,d);e=a[0];d=a[1];f=[];for(g=e;g<=d;g++){b=c.getAt(g);if(h.isSelected(b)){f.push(b)}}if(f.length){h.doDeselect(f)}},normalizeRowRange:function(c,b){var a=this.store,d;if(!Ext.isNumber(c)){c=a.indexOf(c)}c=Math.max(0,c);if(!Ext.isNumber(b)){b=a.indexOf(b)}b=Math.min(b,a.getCount()-1);if(c>b){d=b;b=c;c=d}return[c,b]},select:function(b,c,a){if(Ext.isDefined(b)&&!(Ext.isArray(b)&&!b.length)){this.doSelect(b,c,a)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(c,e,b){var d=this,a;if(d.locked||c==null){return}if(typeof c==="number"){a=d.store.getAt(c);if(!a){return}c=[a]}if(d.selectionMode==="SINGLE"){if(c.isModel){c=[c]}if(c.length){d.doSingleSelect(c[0],b)}}else{d.doMultiSelect(c,e,b)}},doMultiSelect:function(a,k,j){var g=this,b=g.selected,h=false,l,d,f,e,c;if(g.locked){return}a=!Ext.isArray(a)?[a]:a;f=a.length;if(!k&&b.getCount()>0){l=g.deselectDuringSelect(a,j);if(g.destroyed){return}if(l[0]){g.maybeFireSelectionChange(l[1]>0&&!j);return}else{h=l[1]>0}}c=function(){if(!b.getCount()){g.selectionStart=e}b.add(e);h=true};for(d=0;d<f;d++){e=a[d];if(g.isSelected(e)){continue}g.onSelectChange(e,true,j,c);if(g.destroyed){return}}g.lastSelected=e;g.maybeFireSelectionChange(h&&!j)},deselectDuringSelect:function(d,h){var g=this,a=g.selected.getRange(),f=a.length,c=0,e=false,j,b;g.suspendChanges();g.deselectingDuringSelect=true;for(b=0;b<f;++b){j=a[b];if(!Ext.Array.contains(d,j)){if(g.doDeselect(j,h)){++c}else{e=true}}if(g.destroyed){e=true;c=0;break}}g.deselectingDuringSelect=false;g.resumeChanges();return[e,c]},doDeselect:function(a,j){var h=this,b=h.selected,d=0,g,e,k=0,f=0,c;if(h.locked||!h.store){return false}if(typeof a==="number"){e=h.store.getAt(a);if(!e){return false}a=[e]}else{if(!Ext.isArray(a)){a=[a]}}c=function(){++f;b.remove(e);if(e===h.selectionStart){h.selectionStart=null}};g=a.length;h.suspendChanges();for(;d<g;d++){e=a[d];if(h.isSelected(e)){if(h.lastSelected===e){h.lastSelected=b.last()}++k;h.onSelectChange(e,false,j,c);if(h.destroyed){return false}}}h.resumeChanges();h.maybeFireSelectionChange(f>0&&!j);return f===k},doSingleSelect:function(a,b){var d=this,f=false,c=d.selected,e;if(d.locked){return}if(d.isSelected(a)){return}e=function(){if(c.getCount()){d.suspendChanges();var g=d.deselectDuringSelect([a],b);if(d.destroyed){return}d.resumeChanges();if(g[0]){return false}}d.lastSelected=a;if(!c.getCount()){d.selectionStart=a}c.add(a);f=true};d.onSelectChange(a,true,b,e);if(f&&!d.destroyed){d.maybeFireSelectionChange(!b)}},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.suspendChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(d,c){var f=this,b=f.store,e,a;a=f.normalizeRowRange(d,c);d=a[0];c=a[1];for(e=d;e<=c;e++){if(!f.isSelected(b.getAt(e))){return false}}return true},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.contains(a)},hasSelection:function(){var a=this.getSelected();return !!(a&&a.getCount())},refresh:function(){var l=this,o=l.store,g=[],k=[],f=l.getSelection(),h=f.length,c=l.getSelected(),m,j,a,n,b,e;if(!o||!(c.isCollection||c.isRows)||!c.getCount()){return}a=o.getData();if(a.getSource){j=a.getSource();if(j){a=j}}l.refreshing=true;c.beginUpdate();l.suspendChanges();for(e=0;e<h;e++){n=f[e];b=a.get(n.getId());if(b){g.push(b)}else{if(!l.pruneRemoved){k.push(n)}}if(l.mode==="SINGLE"&&k.length){break}}if(c.getCount()!==(g.length+k.length)){m=true}l.clearSelections();if(g.length){l.doSelect(g,false,true)}if(k.length){c.add(k);if(!l.lastSelected){l.lastSelected=k[k.length-1]}}l.resumeChanges();if(m){c.endUpdate()}else{c.updating--}l.refreshing=false;l.maybeFireSelectionChange(m)},clearSelections:function(){var a=this.getSelected();if(a){a.clear()}this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(!this.store.isLoading()&&this.hasSelection()){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(j,b,e,k){var h=this,a=b,d,f,c,g;if(h.selectionStart&&Ext.Array.contains(b,h.selectionStart)){h.selectionStart=null}if(k||h.locked||!h.pruneRemoved){return}g=j.isMoving(null,true);if(g){a=null;for(d=0,f=b.length;d<f;++d){c=b[d];if(!g[c.id]){(a||(a=[])).push(c)}}}if(a){h.deselect(a)}},onPageRemove:function(b,a,c){this.onStoreRemove(this.store,c)},onPageAdd:function(d,c,e){var a=e.length,f,b;for(f=0;f<a;f++){b=e[f];if(this.selected.get(b.id)){this.selected.replace(b)}}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var a=this;a.clearSelections();a.bindStore(null);a.selected=Ext.destroy(a.selected);Ext.mixin.Observable.prototype.destroy.call(this)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(a,d,c,b){this.selected.updateKey(d,c)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(e){var j=this,l=j.getStore(),k=j.lastSelected,a=0,c=j.pruneRemovedOnRefresh(),h,b,f,m,d,g;if(l.isBufferedStore){return}h=e.getRange();b=h.length;if(k){j.lastSelected=l.getById(k.id);g=j.lastSelected!==k}j.refreshing=true;for(f=0;f<b;++f){m=h[f];d=l.getById(m.id);if(d){if(d!==m){e.replace(d)}}else{if(c){e.remove(m);++a}}}j.refreshing=false;j.maybeFireSelectionChange(a>0);if(g){j.fireEvent("lastselectedchanged",j,j.getSelection(),j.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(a,d,c,f){var e=this,b=d?"select":"deselect";if((c||e.fireEvent("before"+b,e,a))!==false&&f()!==false){if(!c){e.fireEvent(b,e,a)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){Ext.Array.include(this.views||(this.views=[]),a)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(c){var a=this.view,b;if(a){b=a.resolveSatelliteListenerScope(this,c)}return b||Ext.mixin.Observable.prototype.resolveListenerScope.call(this,c)},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(j,l,d){var m=this,f=l.shiftKey,a=l.ctrlKey,c=f?(m.getSelectionStart()):null,g=m.getSelection(),k=g.length,b,h,n;if(f&&c){m.selectRange(c,j,a)}else{if(a&&d){if(m.allowDeselect){m.doDeselect(j,false)}}else{if(a){m.doSelect(j,true,false)}else{if(d&&!f&&!a&&k>1){if(m.allowDeselect){b=[];for(h=0;h<k;++h){n=g[h];if(n!==j){b.push(n)}}m.doDeselect(b)}}else{if(!d){m.doSelect(j,false)}}}}}},selectWithEventSimple:function(a,c,b){if(b){this.doDeselect(a)}else{this.doSelect(a,true)}},selectWithEventSingle:function(b,f,c){var d=this,a=d.allowDeselect;if(a&&!f.ctrlKey){a=d.toggleOnClick}if(a&&c){d.doDeselect(b)}else{d.doSelect(b,false)}}}},1,0,0,0,["selection.abstract"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,bindComponent:function(a){var c=this,b;if(c.view!==a){if(c.view){c.navigationModel=null;Ext.destroy(c.viewListeners,c.navigationListeners)}c.view=a;if(a){b=c.getViewListeners();b.scope=c;b.destroyable=true;c.navigationModel=a.getNavigationModel();c.viewListeners=a.on(b);c.navigationListeners=c.navigationModel.on({navigate:c.onNavigate,scope:c,destroyable:true})}}},getViewListeners:function(){var a=this,b={};b[a.view.triggerCtEvent]=a.onContainerClick;return b},onUpdate:function(b){var a=this.view;if(a&&this.isSelected(b)){a.onItemSelect(b)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(b,f,e,h){var g=this,a=g.view,d=f?"select":"deselect",c=g.store.indexOf(b);if((e||g.fireEvent("before"+d,g,b,c))!==false&&h()!==false){if(a){if(f){a.onItemSelect(b)}else{a.onItemDeselect(b)}}if(!e){g.fireEvent(d,g,b,c)}}},destroy:function(){this.bindComponent();Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,["selection.dataviewmodel"],0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{config:{store:null},focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){if(this.view!==a){this.view=a;this.bindView(a)}},bindView:function(a){var c=this,d=a.dataSource,b;c.initKeyNav(a);if(!d.isEmptyStore){c.setStore(d)}b=c.getViewListeners();b.destroyable=true;c.viewListeners=c.viewListeners||[];c.viewListeners.push(a.on(b))},updateStore:function(a){this.mixins.storeholder.bindStore.apply(this,[a])},getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,scope:a}},initKeyNav:function(a){var b=this;b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:b.processViewEvent,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},processViewEvent:function(b,a,e,c,d){return d},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(a,b){if(b.pointerType==="mouse"&&Ext.getScrollbarSize().width){if(!a.el.getClientRegion().contains(b.getPoint())){b.preventDefault()}}},onItemMouseDown:function(b,a,e,d,c){if(c.pointerType!=="touch"){this.setPosition(d)}},onItemClick:function(c,b,e,d,a){if(this.record===b){this.fireNavigateEvent(a)}else{this.setPosition(d,a)}},setPosition:function(c,g,j,d){var h=this,i=h.view,e=i.getSelectionModel(),a=i.dataSource,f,b;if(c==null||!i.all.getCount()){h.record=h.recordIndex=null}else{if(typeof c==="number"){b=Math.max(Math.min(c,a.getCount()-1),0);f=a.getAt(c)}else{if(c.isEntity){f=a.getById(c.id);b=a.indexOf(f);if(b===-1){f=a.getAt(0);b=0}}else{if(c.tagName){f=i.getRecord(c);b=a.indexOf(f)}else{f=b=null}}}}if(f===h.record){h.recordIndex=b;return h.focusPosition(b)}if(h.item){h.item.removeCls(h.focusCls)}h.previousRecordIndex=h.recordIndex;h.previousRecord=h.record;h.previousItem=h.item;h.recordIndex=b;h.record=f;d=d||h.record===h.lastFocused;if(f){h.focusPosition(h.recordIndex)}else{h.item=null}if(!j){e.fireEvent("focuschange",e,h.previousRecord,h.record)}if(!d&&g){h.fireNavigateEvent(g)}},focusPosition:function(a){var b=this;if(a!=null&&a!==-1){if(a.isEntity){a=b.view.dataSource.indexOf(a)}b.item=b.view.all.item(a);if(b.item){b.lastFocused=b.record;b.lastFocusedIndex=b.recordIndex;b.focusItem(b.item)}else{b.record=null}}else{b.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.stopEvent();a.view.fireEvent("itemclick",a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){var a=this;a.setStore(null);Ext.destroy(a.viewListeners,a.keyNav);a.keyNav=a.viewListeners=a.dataSource=a.lastFocused=null;a.callParent()}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(m,o,g,b,c){var l=this,a=l.changeQueue||(l.changeQueue={}),h=g.internalId,k,f,j,d,p,n,e;k=a[h]||(a[h]={operation:b,record:g,data:{},views:[]});f=k.data;Ext.Array.include(k.views,m);if(c&&(j=c.length)){for(d=0;d<j;d++){p=c[d];n=g.data[p];if(f.hasOwnProperty(p)){if(g.isEqual(f[p],n)){delete f[p];e=true}}else{f[p]=n}}if(e&&!Ext.Object.getKeys(f).length){delete a[h]}}else{Ext.apply(f,g.data)}if(!l.flushQueueTask){l.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(l.onFlushTick,l):Ext.Function.bind(l.onFlushTick,l),interval:Ext.view.AbstractView.updateDelay,repeat:1})}l.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var e=this,f,a,h,d,g,c,b;if(Ext.isScrolling){e.flushQueueTask.start();return}h=e.changeQueue;this.changeQueue={};for(g in h){d=h[g];f=d.views;a=f.length;for(c=0;c<a;c++){b=f[c];if(!b.destroyed){b.handleUpdate(b.dataSource,d.record,d.operation,Ext.Object.getKeys(d.data))}}}Ext.AnimationQueue.stop(e.flushChangeQueue,e)}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,preserveScrollOnReload:false,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(a){if(a&&a.selModel){a.selectionModel=a.selModel}Ext.Component.prototype.constructor.call(this,a)},initComponent:function(){var d=this,b=Ext.isDefined,e=d.itemTpl,c={},a;if(e){if(Ext.isArray(e)){if(typeof e[e.length-1]!=="string"){e=e.slice(0);c=e.pop()}e=e.join("")}else{if(Ext.isObject(e)){c=Ext.apply(c,e.initialConfig);e=e.html}}if(!d.itemSelector){d.itemSelector="."+d.itemCls}e=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',d.itemCls,e,d.itemAriaRole);d.tpl=new Ext.XTemplate(e,c)}Ext.Component.prototype.initComponent.call(this);d.tpl=d.getTpl("tpl");if(d.overItemCls){d.trackOver=true}d.addCmpEvents();a=d.store=Ext.data.StoreManager.lookup(d.store||"ext-empty-store");if(!d.dataSource){d.dataSource=a}d.bindStore(a,true);d.getNavigationModel().bindComponent(this);if(!d.all){d.all=new Ext.CompositeElementLite()}d.scrollState={top:0,left:0};d.savedTabIndexAttribute="data-savedtabindex-"+d.id},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(){var a=this.loadMask;Ext.Component.prototype.onRender.apply(this,arguments);if(a){this.createMask(a)}},beforeLayout:function(){var a=this;Ext.Component.prototype.beforeLayout.apply(this,arguments);if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refresh()}else{a.doFirstRefresh(a.dataSource)}}},onMaskBeforeShow:function(){var b=this,a=b.loadingHeight;if(a&&a>b.getHeight()){b.hasLoadingHeight=true;b.oldMinHeight=b.minHeight;b.minHeight=a;b.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var b=this.loadMask,a=[];if(b&&b.isComponent){a.push(b)}return a},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},applySelectionModel:function(b,f){var e=this,d=e.grid,g,c,a;if(f){f.un({scope:e,selectionchange:e.updateBindSelection,lastselectedchanged:e.updateBindSelection,select:e.ariaSelect,deselect:e.ariaDeselect});Ext.destroy(e.selModelRelayer);b=Ext.Factory.selection(b)}else{if(b&&b.isSelectionModel){b.locked=e.disableSelection}else{if(e.simpleSelect){g="SIMPLE"}else{if(e.multiSelect){g="MULTI"}else{g="SINGLE"}}if(typeof b==="string"){b={type:b}}b=Ext.Factory.selection(Ext.apply({allowDeselect:e.allowDeselect||e.multiSelect,mode:g,locked:e.disableSelection},b))}}if(b.mode!=="SINGLE"){a=(d||e).ariaEl.dom;if(a){a.setAttribute("aria-multiselectable",true)}else{if(!d){c=e.ariaRenderAttributes||(e.ariaRenderAttributes={});c["aria-multiselectable"]=true}}}e.selModelRelayer=e.relayEvents(b,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);b.on({scope:e,lastselectedchanged:e.updateBindSelection,selectionchange:e.updateBindSelection,select:e.ariaSelect,deselect:e.ariaDeselect});return b},updateSelectionModel:function(a){this.selModel=a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},onFocusEnter:function(d){var c=this,b=c.getNavigationModel(),a;c.toggleChildrenTabbability(false);if(!c.itemFocused&&c.all.getCount()){a=b.getLastFocused();b.setPosition(a||0,d.event,null,!a);c.itemFocused=b.getPosition()!=null}if(c.itemFocused){this.el.dom.setAttribute("tabIndex","-1")}Ext.Component.prototype.onFocusEnter.call(this,d)},onFocusLeave:function(b){var a=this;if(a.itemFocused&&!a.refreshing){a.getNavigationModel().setPosition(null,b.event,null,true);a.itemFocused=false;a.el.dom.setAttribute("tabIndex",0)}Ext.Component.prototype.onFocusLeave.call(this,b)},ariaSelect:function(b,a){var c=this.getNode(a);if(c){c.setAttribute("aria-selected",true)}},ariaDeselect:function(b,a){var c=this.getNode(a);if(c){c.removeAttribute("aria-selected")}},onRemoved:function(a){Ext.Component.prototype.onRemoved.call(this,a);if(!a){this.onFocusLeave({})}},refresh:function(){var i=this,h=i.all,k=h.getCount(),g=i.refreshCounter,j,c,b,f=i.getSelectionModel(),e,d=g&&h.getCount()&&i.preserveScrollOnRefresh&&i.getScrollable(),a;if(!i.rendered||i.destroyed){return}if(!i.hasListeners.beforerefresh||i.fireEvent("beforerefresh",i)!==false){i.refreshing=true;e=i.saveFocusState();j=i.getTargetEl();b=i.getViewRange();c=j.dom;if(d){a=d.getPosition();if(!(a.x||a.y)){a=null}}if(g){i.clearViewEl();i.refreshCounter++}else{i.refreshCounter=1}i.tpl.append(j,i.collectData(b,h.startIndex||0));if(b.length<1){i.addEmptyText();h.clear()}else{i.collectNodes(j.dom);i.updateIndexes(0)}e();if(i.refreshSelmodelOnRefresh!==false){f.refresh()}i.refreshNeeded=false;i.refreshSize(h.getCount()!==k);i.fireEvent("refresh",i,b);if(d){d.scrollTo(a)}if(!i.viewReady){i.viewReady=true;i.fireEvent("viewready",i)}i.refreshing=false;i.refreshScroll();i.cleanupData()}},addEmptyText:function(){var b=this,a=b.getStore();if(b.emptyText&&!a.isLoading()&&(!b.deferEmptyText||b.refreshCounter>1||a.isLoaded())){b.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",b.getTargetEl().dom,b.emptyText)}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(d){var c=this,b=c.getSizeModel(),a=c.getScrollable();if(b.height.shrinkWrap||b.width.shrinkWrap||d){c.updateLayout()}else{if(c.touchScroll&&!c.bufferedRenderer){if(a){a.refresh()}else{c.on({boxready:c.refreshScroll,scope:c,single:true})}}}},afterFirstLayout:function(c,b){var d=this,a=d.getScrollable();if(a){a.on({scroll:d.onViewScroll,scrollend:d.onViewScrollEnd,scope:d,onFrame:!!Ext.global.requestAnimationFrame})}Ext.Component.prototype.afterFirstLayout.call(this,c,b)},clearViewEl:function(){var b=this,c=b.getTargetEl(),a=b.getNodeContainer()===c;b.clearEmptyEl();b.all.clear(!a);if(a){c.dom.innerHTML=""}},clearEmptyEl:function(){var a=this.emptyEl;if(a){Ext.removeNode(a)}this.emptyEl=null},onViewScroll:function(b,a,c){this.fireEvent("scroll",this,a,c)},onViewScrollEnd:function(b,a,c){this.fireEvent("scrollend",this,a,c)},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(e,d,c){var b,a,f;if(c){b=c.getAssociatedData();for(a in b){if(b.hasOwnProperty(a)){if(!f){e=Ext.Object.chain(e);f=true}e[a]=b[a]}}}return e},collectData:function(c,f){var e=[],d=0,a=c.length,b;for(;d<a;d++){b=c[d];e[d]=this.prepareData(b.data,f+d,b)}return e},cleanupData:Ext.emptyFn,bufferRender:function(d,e){var g=this,h=g.renderBuffer,b=document.createDocumentFragment(),c,a,f;g.tpl.overwrite(h,g.collectData(d,e));c=Ext.fly(h).query(g.getItemSelector());for(f=0,a=c.length;f<a;f++){b.appendChild(c[f])}return{fragment:b,children:c}},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,true):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(d,b,c,g,e){var f=this,a=e&&e.filtered;if(!a&&f.getNode(b)){if(f.throttledUpdate){f.statics().queueRecordChange(f,d,b,c,g)}else{f.handleUpdate.apply(f,arguments)}}},handleUpdate:function(c,a){var f=this,d,e,b=f.getSelectionModel();if(f.viewReady){d=f.dataSource.indexOf(a);if(d>-1){if(f.getNode(a)){e=f.bufferRender([a],d).children[0];f.all.replaceElement(d,e,true);f.updateIndexes(d,d);b.onUpdate(a);f.refreshSizePending=true;if(b.isSelected(a)){f.onItemSelect(a)}if(f.hasListeners.itemupdate){f.fireEvent("itemupdate",a,d,e)}return e}}}},onReplace:function(j,l,b,c){var h=this,i=h.all,f=h.getSelectionModel(),m=l,o,n,g,a,k,d,e;if(h.rendered){o=h.bufferRender(c,l,true);g=o.fragment;a=o.children;n=i.item(l);if(n){i.item(l).insertSibling(g,"before",true)}else{h.appendNodes(g)}i.insert(l,a);if(b.length){e=h.saveFocusState()}l+=c.length;d=l+b.length-1;k=i.removeRange(l,d,true);if(h.refreshSelmodelOnRefresh!==false){f.refresh()}h.updateIndexes(l);if(h.hasListeners.itemremove){h.fireEvent("itemremove",b,m,k,h)}if(h.hasListeners.itemadd){h.fireEvent("itemadd",c,m,a)}e();h.refreshSize()}},onAdd:function(d,c,e){var f=this,b,a=f.getSelectionModel();if(f.rendered){if(f.all.getCount()===0){f.refresh();b=f.all.slice()}else{b=f.doAdd(c,e);if(f.refreshSelmodelOnRefresh!==false){a.refresh()}f.updateIndexes(e);f.refreshSizePending=true}if(f.hasListeners.itemadd){f.fireEvent("itemadd",c,e,b)}}},appendNodes:function(a){var b=this.all,c=b.getCount();if(this.nodeContainerSelector){this.getNodeContainer().appendChild(a)}else{b.item(c-1).insertSibling(a,"after")}},doAdd:function(c,e){var g=this,j=g.bufferRender(c,e,true),f=j.fragment,b=j.children,h=g.all,d=h.getCount(),i=h.startIndex||0,a=h.endIndex||d-1;if(d===0||e>a){g.appendNodes(f)}else{if(e<=i){h.item(i).insertSibling(f,"before",true)}else{h.item(e).insertSibling(b,"before",true)}}h.insert(e,b);return b},onRemove:function(l,d,h){var j=this,m=j.all,b=j.hasListeners.itemremove,k,e,f,a,c,g;if(m.getCount()){if(j.dataSource.getCount()===0){if(b){j.fireEvent("itemremove",d,h,j.getNodes(h,h+d.length-1))}j.refresh()}else{g=j.saveFocusState();if(b){a=[]}for(e=d.length-1;e>=0;--e){f=d[e];k=h+e;if(a){c=m.item(k);a[e]=c?c.dom:undefined}if(m.item(k)){j.doRemove(f,k)}}if(b){j.fireEvent("itemremove",d,h,a,j)}g();j.updateIndexes(h)}j.refreshSizePending=true}},doRemove:function(a,b){this.all.removeElement(b,true)},saveFocusState:function(){var d=this,a=d.dataSource||d.store,b=d.getNavigationModel(),c=b.recordIndex,e=b.record;if(d.el.contains(Ext.Element.getActiveElement())){d.el.dom.focus();return function(){if(a.getCount()){c=Math.min(c,d.all.getCount()-1);b.setPosition(a.contains(e)?e:c,null,null,true)}}}return Ext.emptyFn},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(g,f){var b=this.all.elements,e,a=this.getViewRange(),d,c=this.id;g=g||0;f=f||((f===0)?0:(b.length-1));for(d=g;d<=f;d++){e=b[d];e.setAttribute("data-recordIndex",d);e.setAttribute("data-recordId",a[d].internalId);e.setAttribute("data-boundView",c)}},bindStore:function(b,c){var e=this,a=e.getSelectionModel(),d=e.getNavigationModel();a.bindStore(b);a.bindComponent(b?e:null);e.mixins.storeholder.bindStore.apply(e,arguments);d.setStore(b);if(b&&e.componentLayoutCounter){e.doFirstRefresh(b,!c)}},doFirstRefresh:function(a,c){var b=this;if(b.deferInitialRefresh&&!c){Ext.defer(b.doFirstRefresh,1,b,[a,true])}else{if(a&&!a.isLoading()){b.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null);if(this.dataSource===a){this.dataSource=null}},onBindStore:function(a,c){var b=this;if(b.store.isBufferedStore){b.store.preserveScrollOnReload=b.preserveScrollOnReload}if(c&&c.isBufferedStore){delete c.preserveScrollOnReload}b.setMaskBind(a);if(!b.dataSource){b.dataSource=a}},setMaskBind:function(b){var a=this.loadMask;if(this.rendered&&a&&b&&!a.bindStore){a=this.createMask()}if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter;Ext.suspendLayouts()},onEndUpdate:function(){var a=this;if(a.updateSuspendCounter){--a.updateSuspendCounter}Ext.resumeLayouts(true);if(a.refreshSizePending){a.refreshSize(true);a.refreshSizePending=false}},onDataRefresh:function(a){var c=this,b=c.preserveScrollOnRefresh;if(a.loadCount>c.lastRefreshLoadCount){c.preserveScrollOnRefresh=c.preserveScrollOnReLoad}c.refreshView();c.preserveScrollOnRefresh=b;c.lastRefreshLoadCount=a.loadCount},refreshView:function(){var b=this,a=b.blockRefresh||!b.rendered||b.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(a){b.refreshNeeded=true}else{if(b.bufferedRenderer){b.bufferedRenderer.refreshView()}else{b.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var b=[],a=this.getSelectionModel().getSelection(),d=a.length,c=0;for(;c<d;c++){b.push(this.getNode(a[c]))}return b},getRecords:function(c){var b=[],d=0,a=c.length,e=this.dataSource.data;for(;d<a;d++){b[b.length]=e.getByKey(c[d].getAttribute("data-recordId"))}return b},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).getAttribute("data-recordId"))},isSelected:function(b){var a=this.getRecord(b);return this.getSelectionModel().isSelected(a)},select:function(b,c,a){this.getSelectionModel().select(b,c,a)},deselect:function(b,a){this.getSelectionModel().deselect(b,a)},getNode:function(b){var c=this,a;if(c.rendered&&(b||b===0)){if(Ext.isString(b)){a=document.getElementById(b)}else{if(b.isModel){a=c.getNodeByRecord(b)}else{if(Ext.isNumber(b)){a=c.all.elements[b]}else{if(b.target&&b.target.nodeType){b=b.target}a=Ext.fly(b).findParent(c.itemSelector,c.getTargetEl())}}}}return a||null},getNodeByRecord:function(a){var b=this.store.indexOf(a);return this.all.elements[b]||null},getNodes:function(c,a){var b=this.all;if(a!==undefined){a++}return b.slice(c,a)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(a.getAttribute("data-recordIndex")){return Number(a.getAttribute("data-recordIndex"))}return this.all.indexOf(a)},onDestroy:function(){var b=this,a=b.updateSuspendCounter;b.all.clear();b.emptyEl=null;Ext.Component.prototype.onDestroy.call(this);b.bindStore(null);b.store=b.dataSource=b.storeListeners=null;if(b.selModelRelayer){b.selModelRelayer.destroy();b.selModelRelayer=null}Ext.destroy(b.navigationModel,b.selectionModel);b.navigationModel=b.selectionModel=b.selModel=null;b.loadMask=null;while(a--){Ext.resumeLayouts(true)}},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).addCls(a)}},removeItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).removeCls(a)}},setStore:function(a){var b=this;if(b.store!==a){if(b.isConfiguring){b.store=a}else{b.bindStore(a,false)}}},privates:{toggleChildrenTabbability:function(b){var a=this.getTargetEl();if(b){a.restoreTabbableState(true)}else{a.saveTabbableState({skipSelf:true,includeSaved:false})}},collectNodes:function(c){var b=this.all,a={role:this.itemAriaRole};b.fill(Ext.fly(c).query(this.getItemSelector()),b.startIndex||0);if(this.focusable){a.tabindex="-1"}b.set(a)},createMask:function(b){var d=this,c=d.getStore(),a;if(c&&!c.isEmptyStore&&!c.loadsSynchronously()){a={target:d,msg:d.loadingText,useMsg:d.loadingUseMsg,store:c};if(d.loadingCls){a.msgCls=d.loadingCls}if(Ext.isObject(b)){a=Ext.apply(a,b)}d.loadMask=new Ext.LoadMask(a);d.loadMask.on({scope:d,beforeshow:d.onMaskBeforeShow,hide:d.onMaskHide})}return d.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},1,0,["component","box"],{component:true,box:true},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(a,b,d){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var c=this.getSelectionModel();return c.select.apply(c,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var a=this;Ext.view.AbstractView.prototype.afterRender.call(this);a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keyup:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(d){var c=this,a=c.getTargetSelector(),b=d.getTarget(a);if(!c.destroyed){if(b){if(c.mouseOverItem!==b&&c.el.contains(b)){c.mouseOverItem=d.item=b;d.newType="mouseenter";c.handleEvent(d)}}else{c.handleEvent(d)}}},handleMouseOut:function(g){var d=this,b=d.getTargetSelector(),c=g.getTarget(b),f=g.getRelatedTarget(b),a;if((c===f)&&!(c===null&&f===null)){return}if(!d.destroyed){if(c&&(a=d.self.getBoundView(c))){g.item=c;g.newType="mouseleave";a.handleEvent(g);a.mouseOverItem=null}else{d.handleEvent(g)}}},handleEvent:function(c){var b=this,a=b.keyEventRe.test(c.type);c.view=b;c.item=c.getTarget(b.itemSelector);if(c.item){c.record=b.getRecord(c.item)}if(b.processUIEvent(c)!==false){b.processSpecialEvent(c)}if(a&&!Ext.fly(c.target).isInputField()){if(c.getKey()===c.SPACE||c.isNavKeyPress(true)){c.preventDefault()}}c.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(f){if(!Ext.getBody().isAncestor(f.target)){return}var i=this,j=f.item,k=i.self,a=k.EventMap,g=k.TouchEventMap,d,c=f.record,h=f.type,b=h;if(f.newType){b=f.newType}if(j){b=g[b]||b;d=f.recordIndex=i.indexInStore?i.indexInStore(c):i.indexOf(j);if(!c||i.processItemEvent(c,j,d,f)===false){return false}if((i["onBeforeItem"+a[b]](c,j,d,f)===false)||(i.fireEvent("beforeitem"+b,i,c,j,d,f)===false)||(i["onItem"+a[b]](c,j,d,f)===false)){return false}i.fireEvent("item"+b,i,c,j,d,f)}else{h=g[h]||h;if((i.processContainerEvent(f)===false)||(i["onBeforeContainer"+a[h]](f)===false)||(i.fireEvent("beforecontainer"+h,i,f)===false)||(i["onContainer"+a[h]](f)===false)){return false}i.fireEvent("container"+h,i,f)}return true},onItemMouseEnter:function(a,c,b,d){if(this.trackOver){this.highlightItem(c)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var b=this,a=b.highlightedItem,d=b.overItemCls;if(a!==c){if(a){Ext.fly(a).removeCls(d);if(Ext.isIE8){b.repaintBorder(a);b.repaintBorder(a.nextSibling)}if(b.hasListeners.unhighlightitem){b.fireEvent("unhighlightitem",b,a)}}b.highlightedItem=c;if(c){Ext.fly(c).addCls(b.overItemCls);if(Ext.isIE8){b.repaintBorder(c.nextSibling)}if(b.hasListeners.highlightitem){b.fireEvent("highlightitem",b,c)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(b,a){var f=this,e,c,d;if(f.viewReady){e=f.getNode(a);c=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);d=f.highlightedItem;if(d&&d===e){delete f.highlightedItem;if(c){f.highlightItem(c)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(h){var f=this,e=Ext.fly(f.getNode(h)),d=f.el,a=0,b=0,g=d.getRegion(),c;g.bottom=g.top+d.dom.clientHeight;g.right=g.left+d.dom.clientWidth;if(e){c=e.getRegion();if(c.top<g.top){a=c.top-g.top}else{if(c.bottom>g.bottom){a=c.bottom-g.bottom}}if(c.left<g.left){b=c.left-g.left}else{if(c.right>g.right){b=c.right-g.right}}if(b||a){f.scrollBy(b,a,false)}e.set({tabIndex:-1});e.focus()}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{navigateOnSpace:true,initKeyNav:function(a){var b=this,c=a.pickerField;if(!b.keyNav){Ext.view.NavigationModel.prototype.initKeyNav.call(this,a);b.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:b.onKeyEsc,scope:b})}if(!c){return}if(!c.rendered){c.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}b.fieldKeyNav=new Ext.util.KeyNav({disabled:true,target:c.inputEl,forceKeyDown:true,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},priority:1001,scope:b})},processViewEvent:function(b,a,e,c,d){if(d.within(b.listWrap)){return d}if(d.getKey()===d.ESC){if(Ext.fly(d.target).isInputField()){d.target=d.target.parentNode}return d}},enable:function(){this.fieldKeyNav.enable();Ext.view.NavigationModel.prototype.enable.call(this)},disable:function(){this.fieldKeyNav.disable();Ext.view.NavigationModel.prototype.disable.call(this)},onItemMouseDown:function(b,a,e,c,d){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,b,a,e,c,d);d.preventDefault()},onKeyUp:function(h){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c>0?c-1:d.getCount()-1;f.setPosition(a);h.preventDefault()},onKeyDown:function(h){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c<d.getCount()-1?c+1:0;f.setPosition(a);h.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(c){var a=this.view,b=a.pickerField;if(a.isVisible()){if(b.selectOnTab){this.selectHighlighted(c)}if(b.collapse){b.collapse()}}return true},onKeyEnter:function(f){var a=this.view,b=a.getSelectionModel(),d=a.pickerField,c=b.getCount();f.stopEvent();this.selectHighlighted(f);if(!d.multiSelect&&c===b.getCount()&&d.collapse){d.collapse()}return false},onKeySpace:function(){if(this.navigateOnSpace){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments)}return true},onKeyEsc:function(){if(this.view.pickerField){this.view.pickerField.collapse()}},focusItem:function(c){var b=this,a=b.view;if(typeof c==="number"){c=a.all.item(c)}if(c){c=c.dom;a.highlightItem(c);a.getScrollable().scrollIntoView(c,false)}},selectHighlighted:function(g){var f=this,b=f.view,a=b.getSelectionModel(),c,d=f.recordIndex;if(b.all.getCount()){c=f.getRecord();if(c){if(g.getKey()===g.ENTER||!a.isSelected(c)){a.selectWithEvent(c,g);if(!b.store.data.contains(c)){f.setPosition(Math.min(d,b.store.getCount()-1))}}}}},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav);Ext.view.NavigationModel.prototype.destroy.call(this)}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(c){var e=this,d=e.self,a=d.sizeModelsArray,b;Ext.apply(e,c);e[b=e.name]=true;e.fixed=!(e.auto=e.natural||e.shrinkWrap);a[e.ordinal=a.length]=d[b]=d.sizeModels[b]=e},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var e=this,a=e.sizeModelsArray,c,b,g,f,d;new e({name:"calculated"});new e({name:"configured",names:{width:"width",height:"height"}});new e({name:"natural"});new e({name:"shrinkWrap"});new e({name:"calculatedFromConfigured",configured:true,calculatedFrom:true,names:{width:"width",height:"height"}});new e({name:"calculatedFromNatural",natural:true,calculatedFrom:true});new e({name:"calculatedFromShrinkWrap",shrinkWrap:true,calculatedFrom:true});new e({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new e({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new e({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(c=0,g=a.length;c<g;++c){d=a[c];d.pairsByHeightOrdinal=f=[];for(b=0;b<g;++b){f.push({width:d,height:a[b]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(a){var b=this;b.id=Ext.id(null,b.type+"-");b.initConfig(a);delete b.type;b.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(c){var b=this,a=b.context,d;if(b.lastWidthModel!==c.widthModel){if(b.lastWidthModel){d=true}b.lastWidthModel=c.widthModel}if(b.lastHeightModel!==c.heightModel){if(b.lastWidthModel){d=true}b.lastHeightModel=c.heightModel}if(d){(a=c.context).clearTriggers(b,false);a.clearTriggers(b,true);b.triggerCount=0}},finishedLayout:function(a){this.lastWidthModel=a.widthModel;this.lastHeightModel=a.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(a){return false},isItemLayoutRoot:function(d){var c=d.getSizeModel(),b=c.width,a=c.height;if(!d.componentLayout.lastComponentSize&&(b.calculated||a.calculated)){return false}return !b.shrinkWrap&&!a.shrinkWrap},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(d,b){var g=d.length,e,f,c,a;if(g){a=[];for(e=0;e<g;++e){f=d[e];if(!f.rendered){if(b&&(b[f.id]!==undefined)){c=b[f.id]}else{this.configureItem(f);c=f.getRenderTree();if(b){b[f.id]=c}}if(c){a.push(c)}}}}return a},finishRender:Ext.emptyFn,finishRenderItems:function(e,a){var d=a.length,b,c;for(b=0;b<d;b++){c=a[b];if(c.rendering){c.finishRender(b)}}},renderChildren:function(){var b=this,a=b.getLayoutItems(),c=b.getRenderTarget();b.renderItems(a,c)},renderItems:function(a,f){var e=this,d=a.length,b=0,c;if(d){Ext.suspendLayouts();for(;b<d;b++){c=a[b];if(c&&!c.rendered){e.renderItem(c,f,b)}else{if(!e.isValidParent(c,f,b)){e.moveItem(c,f,b)}else{e.configureItem(c)}}}Ext.resumeLayouts(true)}},isValidParent:function(d,e,a){var c=(e&&e.dom)||e,b=this.getItemLayoutEl(d);if(b&&c){if(typeof a==="number"){a=this.getPositionOffset(a);return b===c.childNodes[a]}return b.parentNode===c}return false},getItemLayoutEl:function(c){var d=c.el?c.el.dom:Ext.getDom(c),a=d.parentNode,b;if(a){b=a.className;if(b&&b.indexOf("x-resizable-wrap")!==-1){d=d.parentNode}}return d},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(c,d,a){var b=this;if(!c.rendered){b.configureItem(c);c.render(d,a)}},moveItem:function(b,c,a){c=c.dom||c;if(typeof a==="number"){a=c.childNodes[a]}c.insertBefore(b.el.dom,a||null);b.container=Ext.get(c);this.configureItem(b)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(e){var d=this,c=e.el,b=d.owner,a;if(e.rendered){a=[].concat(d.itemCls||[]);if(b.itemCls){a=Ext.Array.push(a,b.itemCls)}if(a.length){c.removeCls(a)}}delete e.ownerLayout},afterCollapse:function(a,b){if(b){this.onContentChange(a)}},afterExpand:function(a,b){if(b){this.onContentChange(a)}},destroy:function(){var a=this,b;if(a.targetCls){b=a.getTarget();if(b){b.removeCls(a.targetCls)}}a.onDestroy();a.callParent()},sortWeightedItems:function(a,d){for(var b=0,c=a.length;b<c;++b){a[b].$i=b}Ext.Array.sort(a,function(f,e){var g=e.weight-f.weight;if(!g){g=f.$i-e.$i;if(f[d]){g=-g}}return g});for(b=0;b<c;++b){delete a[b].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var a=this;a.prototype.sizeModels=a.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,widthCache:{},heightCache:{},beginLayoutCycle:function(d,p){var k=this,c=k.owner,g=d.ownerCtContext,h=d.heightModel,i=d.widthModel,j=c.el.dom===document.body,f=c.lastBox||k.nullBox,m=c.el.lastBox||k.nullBox,a=!j,e=d.isTopLevel,l,n,b,o;Ext.layout.Layout.prototype.beginLayoutCycle.call(this,d,p);if(p){if(k.usesContentWidth){++d.consumersContentWidth}if(k.usesContentHeight){++d.consumersContentHeight}if(k.usesWidth){++d.consumersWidth}if(k.usesHeight){++d.consumersHeight}if(g&&!g.hasRawContent){l=c.ownerLayout;if(l){if(l.usesWidth){++d.consumersWidth}if(l.usesHeight){++d.consumersHeight}}}}if(i.configured){b=c[i.names.width];if(e&&i.calculatedFrom){b=f.width}if(!j){a=k.setWidthInDom||(p?b!==m.width:i.constrained)}d.setWidth(b,a)}else{if(e){if(i.calculated){n=f.width;d.setWidth(n,n!==m.width)}n=f.x;d.setProp("x",n,n!==m.x)}}if(h.configured){o=c[h.names.height];if(e&&h.calculatedFrom){o=f.height}if(!j){a=p?o!==m.height:h.constrained}d.setHeight(o,a)}else{if(e){if(h.calculated){n=f.height;d.setHeight(n,n!==m.height)}n=f.y;d.setProp("y",n,n!==m.y)}}},finishedLayout:function(b){var g=this,j=b.children,a=g.owner,e,c,h,d,f;if(j){e=j.length;for(c=0;c<e;c++){h=j[c];h.el.lastBox=h.props}}b.previousSize=g.lastComponentSize;g.lastComponentSize=a.el.lastBox=f=b.props;d=a.lastBox||(a.lastBox={});d.x=f.x;d.y=f.y;d.width=f.width;d.height=f.height;d.invalid=false;Ext.layout.Layout.prototype.finishedLayout.call(this,b)},notifyOwner:function(c){var b=this,a=b.lastComponentSize,d=c.previousSize;b.owner.afterComponentLayout(a.width,a.height,d?d.width:undefined,d?d.height:undefined)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(b){var a=this,d=a.targetInfo,c;if(!d){c=b.getEl("getTarget",a);a.targetInfo=d={padding:c.getPaddingInfo(),border:c.getBorderInfo()}}return d},measureAutoDimensions:function(l,h){var t=this,a=t.owner,q=a.layout,d=l.heightModel,g=l.widthModel,c=l.boxParent,n=l.isBoxParent,u=l.target,b=l.props,i,v={gotWidth:false,gotHeight:false,isContainer:(i=!l.hasRawContent)},s=h||3,p,e,j=0,f=0,k,o,r,w,m;if(g.shrinkWrap&&l.consumersContentWidth){++j;p=!(s&1);if(i){if(p){v.contentWidth=0;v.gotWidth=true;++f}else{if((v.contentWidth=l.getProp("contentWidth"))!==undefined){v.gotWidth=true;++f}}}else{o=b.contentWidth;if(typeof o==="number"){v.contentWidth=o;v.gotWidth=true;++f}else{if(p){k=true}else{if(!l.hasDomProp("containerChildrenSizeDone")){k=false}else{if(n||!c||c.widthModel.shrinkWrap){k=true}else{k=c.hasDomProp("width")}}}if(k){if(p){r=0}else{if(q&&q.measureContentWidth){r=q.measureContentWidth(l)}else{if(u.cacheWidth){w=u.xtype+"-"+u.ui;m=t.widthCache;r=m[w]||(m[w]=t.measureContentWidth(l))}else{r=t.measureContentWidth(l)}}}if(!isNaN(v.contentWidth=r)){l.setContentWidth(r,true);v.gotWidth=true;++f}}}}}else{if(g.natural&&l.consumersWidth){++j;o=b.width;if(typeof o==="number"){v.width=o;v.gotWidth=true;++f}else{if(n||!c){k=true}else{k=c.hasDomProp("width")}if(k){if(!isNaN(v.width=t.measureOwnerWidth(l))){l.setWidth(v.width,false);v.gotWidth=true;++f}}}}}if(d.shrinkWrap&&l.consumersContentHeight){++j;e=!(s&2);if(i){if(e){v.contentHeight=0;v.gotHeight=true;++f}else{if((v.contentHeight=l.getProp("contentHeight"))!==undefined){v.gotHeight=true;++f}}}else{o=b.contentHeight;if(typeof o==="number"){v.contentHeight=o;v.gotHeight=true;++f}else{if(e){k=true}else{if(!l.hasDomProp("containerChildrenSizeDone")){k=false}else{if(a.noWrap){k=true}else{if(!g.shrinkWrap){k=(l.bodyContext||l).hasDomProp("width")}else{if(n||!c||c.widthModel.shrinkWrap){k=true}else{k=c.hasDomProp("width")}}}}}if(k){if(e){r=0}else{if(q&&q.measureContentHeight){r=q.measureContentHeight(l)}else{if(u.cacheHeight){w=u.xtype+"-"+u.ui;m=t.heightCache;r=m[w]||(m[w]=t.measureContentHeight(l))}else{r=t.measureContentHeight(l)}}}if(!isNaN(v.contentHeight=r)){l.setContentHeight(r,true);v.gotHeight=true;++f}}}}}else{if(d.natural&&l.consumersHeight){++j;o=b.height;if(typeof o==="number"){v.height=o;v.gotHeight=true;++f}else{if(n||!c){k=true}else{k=c.hasDomProp("width")}if(k){if(!isNaN(v.height=t.measureOwnerHeight(l))){l.setHeight(v.height,false);v.gotHeight=true;++f}}}}}if(c){l.onBoxMeasured()}v.gotAll=f===j;return v},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(d,a){var c=this,f=c.lastWidthModel,e=c.lastHeightModel,b=c.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(f&&f.fixed&&d.widthModel.shrinkWrap){b.setWidth(null)}if(e&&e.fixed&&d.heightModel.shrinkWrap){b.setHeight(null)}},calculate:function(g){var f=this,e=f.measureAutoDimensions(g),b=g.heightModel,c=g.widthModel,d,a;if(e.gotWidth){if(c.shrinkWrap){f.publishOwnerWidth(g,e.contentWidth)}else{if(f.publishInnerWidth){f.publishInnerWidth(g,e.width)}}}else{if(!c.auto&&f.publishInnerWidth){d=f.waitForOuterWidthInDom?g.getDomProp("width"):g.getProp("width");if(d===undefined){f.done=false}else{f.publishInnerWidth(g,d)}}}if(e.gotHeight){if(b.shrinkWrap){f.publishOwnerHeight(g,e.contentHeight)}else{if(f.publishInnerHeight){f.publishInnerHeight(g,e.height)}}}else{if(!b.auto&&f.publishInnerHeight){a=f.waitForOuterHeightInDom?g.getDomProp("height"):g.getProp("height");if(a===undefined){f.done=false}else{f.publishInnerHeight(g,a)}}}if(!e.gotAll){f.done=false}},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(h,f){var e=this,b=e.owner,a=e.calculateOwnerHeightFromContentHeight(h,f),g,d,c;if(isNaN(a)){e.done=false}else{g=Ext.Number.constrain(a,b.minHeight,b.maxHeight);if(g===a){d=e.setHeightInDom}else{c=e.sizeModels[(g<a)?"constrainedMax":"constrainedMin"];a=g;if(h.heightModel.calculatedFromShrinkWrap){h.heightModel=c}else{h.invalidate({heightModel:c})}}h.setHeight(a,d)}},publishOwnerWidth:function(g,b){var f=this,a=f.owner,e=f.calculateOwnerWidthFromContentWidth(g,b),h,d,c;if(isNaN(e)){f.done=false}else{h=Ext.Number.constrain(e,a.minWidth,a.maxWidth);if(h===e){d=f.setWidthInDom}else{c=f.sizeModels[(h<e)?"constrainedMax":"constrainedMin"];e=h;if(g.widthModel.calculatedFromShrinkWrap){g.widthModel=c}else{g.invalidate({widthModel:c})}}g.setWidth(e,d)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(d){var c=this,a=c.owner,b=a.pagingToolbar;c.scrollPos=a.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(a.floating){d.savedXY=a.getXY();a.setXY([0,-9999])}if(b){d.toolbarContext=d.context.getCmp(b)}d.listContext=d.getEl("listWrap")},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.heightModel.auto){a.el.setHeight("auto");a.listWrap.setHeight("auto")}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return true},finishedLayout:function(d){var c=this,e=d.savedXY,a=c.owner,b=a.listWrap,f=c.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(e){c.owner.setXY(e)}b.setScrollLeft(f.left);b.setScrollTop(f.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(c,a){var b=c.toolbarContext,d=0;if(b){d=b.getProp("height")}if(d===undefined){this.done=false}else{c.listContext.setHeight(a-c.getFrameInfo().height-d)}},calculateOwnerHeightFromContentHeight:function(c){var a=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),b=c.toolbarContext;if(b){a+=b.getProp("height")}return a}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this);this.mixins.elementCt.destroy.call(this)},beginLayout:function(a){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);a.targetContext=a.paddingContext=a.getEl("getTarget",this);this.cacheChildItems(a)},beginLayoutCycle:function(c,a){var b=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(a){if(b.usesContainerHeight){++c.consumersContainerHeight}if(b.usesContainerWidth){++c.consumersContainerWidth}}},cacheChildItems:function(f){var e=this,c,g,a,d,b;if(e.needsItemSize||e.setsItemSize){c=f.context;g=f.childItems=[];a=f.visibleItems=e.getVisibleItems();d=a.length;for(b=0;b<d;++b){g.push(c.getCmp(a[b]))}}},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(c){var b=c.props,a=c.el;if(c.widthModel.shrinkWrap&&isNaN(b.width)){c.setContentWidth(a.getWidth())}if(c.heightModel.shrinkWrap&&isNaN(b.height)){c.setContentHeight(a.getHeight())}},configureItem:function(d){var c=this,e=c.itemCls,b=c.owner.itemCls,a,f;d.ownerLayout=c;if(e){if(typeof e==="string"){f=[e]}else{f=e;a=!!f}}if(b){if(a){f=Ext.Array.clone(f)}f=Ext.Array.push(f||[],b)}if(f){d.addCls(f)}},doRenderBody:function(a,b){this.renderItems(a,b);this.renderContent(a,b)},doRenderContainer:function(b,e){var c=e.$comp.layout,a=c.getRenderTpl(),d=c.getRenderData();a.applyOut(d,b)},doRenderItems:function(b,d){var c=d.$layout,a=c.getRenderTree();if(a){Ext.DomHelper.generateMarkup(a,b)}},finishRender:function(){var b=this,c,a;Ext.layout.Layout.prototype.finishRender.call(this);b.cacheElements();c=b.getRenderTarget();a=b.getLayoutItems();b.finishRenderItems(c,a)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(b,f){var c=b.targetContext,e=c.getFrameInfo(),i=b.paddingContext.getPaddingInfo(),h=0,j=0,d,g,a,k;if(!b.widthModel.shrinkWrap){++j;a=f?c.getDomProp("width"):c.getProp("width");d=(typeof a==="number");if(d){++h;a-=e.width+i.width;if(a<0){a=0}}}if(!b.heightModel.shrinkWrap){++j;k=f?c.getDomProp("height"):c.getProp("height");g=(typeof k==="number");if(g){++h;k-=e.height+i.height;if(k<0){k=0}}}return{width:a,height:k,needed:j,got:h,gotAll:h===j,gotWidth:d,gotHeight:g}},getPositionOffset:function(a){if(!this.createsInnerCt){var b=this.owner.itemNodeOffset;if(b){a+=b}}return a},getLayoutItems:function(){var a=this.owner,b=a&&a.items;return(b&&b.items)||[]},getRenderData:function(){var a=this.owner;return{$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var e=this,g=e.getRenderTarget(),a=e.getLayoutItems(),d=a.length,f=[],b,c;for(b=0;b<d;b++){c=a[b];if(c.rendered&&e.isValidParent(c,g,b)){f.push(c)}}return f},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var a=this,b=Ext.XTemplate.getTpl(this,"renderTpl");if(!b.renderContent){a.owner.setupRenderTpl(b)}return b},getRenderTree:function(){var a,c=this.owner.items,d,b={};do{d=c.generation;a=this.getItemsRenderTree(this.getLayoutItems(),b)}while(c.generation!==d);return a},renderChildren:function(){var b=this,c=b.owner.items,e=b.getRenderTarget(),d,a;do{d=c.generation;a=b.getLayoutItems();b.renderItems(a,e)}while(c.generation!==d)},getScrollbarsNeeded:function(c,h,b,g){var a=Ext.getScrollbarSize(),e=typeof c==="number",i=typeof h==="number",f=0,d=0;if(!a.width){return 0}if(i&&h<g){d=2;c-=a.width}if(e&&c<b){f=1;if(!d&&i){h-=a.height;if(h<g){d=2}}}return d+f},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var f=this.getRenderTarget(),b=this.getLayoutItems(),e=b.length,a=[],c,d;for(c=0;c<e;c++){d=b[c];if(d.rendered&&this.isValidParent(d,f,c)&&d.hidden!==true&&!d.floated){a.push(d)}}return a},getMoveAfterIndex:function(a){return this.owner.items.indexOf(a)+1},moveItemBefore:function(d,e){var a=this.owner,b=a.items,c=b.indexOf(d),f;if(d===e){return d}if(e){f=b.indexOf(e);if(c>-1&&c<f){--f}}else{f=b.length}return a.insert(f,d)},setupRenderTpl:function(a){a.renderBody=this.doRenderBody;a.renderContainer=this.doRenderContainer;a.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){if(!a.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,a)},onRemove:function(b,a){if(!b.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,b,a)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(a){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(a)},beforeLayoutCycle:function(d){var b=this.owner,c=b.inheritedState,a=b.inheritedStateInner;if(!c||c.invalid){c=b.getInherited();a=b.inheritedStateInner}if(d.widthModel.shrinkWrap){a.inShrinkWrapTable=true}else{delete a.inShrinkWrapTable}},beginLayoutCycle:function(d){var i=this,b=i.outerCt,g=i.lastOuterCtWidth||"",f=i.lastOuterCtHeight||"",j=i.lastOuterCtTableLayout||"",a=d.state,k,e,l,c,h;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);e=l=c="";if(!d.widthModel.shrinkWrap){e="100%";h=i.owner.inheritedStateInner;k=i.getOverflowXStyle(d);c=(h.inShrinkWrapTable||k==="auto"||k==="scroll")?"":"fixed"}if(!d.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){l="100%"}if((e!==g)||i.hasOuterCtPxWidth){b.setStyle("width",e);i.lastOuterCtWidth=e;i.hasOuterCtPxWidth=false}if(c!==j){b.setStyle("table-layout",c);i.lastOuterCtTableLayout=c}if((l!==f)||i.hasOuterCtPxHeight){b.setStyle("height",l);i.lastOuterCtHeight=l;i.hasOuterCtPxHeight=false}if(i.hasInnerCtPxHeight){i.innerCt.setStyle("height","");i.hasInnerCtPxHeight=false}a.overflowAdjust=a.overflowAdjust||i.lastOverflowAdjust},calculate:function(c){var a=this,b=c.state,e=a.getContainerSize(c,true),d=b.calculatedItems||(b.calculatedItems=a.calculateItems?a.calculateItems(c,e):true);a.setCtSizeIfNeeded(c,e);if(d&&c.hasDomProp("containerChildrenSizeDone")){a.calculateContentSize(c);if(e.gotAll){if(a.manageOverflow&&!c.state.secondPass&&!a.reserveScrollbar){a.calculateOverflow(c,e)}return}}a.done=false},calculateContentSize:function(f){var e=this,a=((f.widthModel.shrinkWrap?1:0)|(f.heightModel.shrinkWrap?2:0)),c=(a&1)||undefined,g=(a&2)||undefined,d=0,b=f.props;if(c){if(isNaN(b.contentWidth)){++d}else{c=undefined}}if(g){if(isNaN(b.contentHeight)){++d}else{g=undefined}}if(d){if(c&&!f.setContentWidth(e.measureContentWidth(f))){e.done=false}if(g&&!f.setContentHeight(e.measureContentHeight(f))){e.done=false}}},calculateOverflow:function(c){var g=this,b,i,a,f,e,d,h;e=(g.getOverflowXStyle(c)==="auto");d=(g.getOverflowYStyle(c)==="auto");if(e||d){a=Ext.getScrollbarSize();h=c.overflowContext.el.dom;f=0;if(h.scrollWidth>h.clientWidth){f|=1}if(h.scrollHeight>h.clientHeight){f|=2}b=(d&&(f&2))?a.width:0;i=(e&&(f&1))?a.height:0;if(b!==g.lastOverflowAdjust.width||i!==g.lastOverflowAdjust.height){g.done=false;c.invalidate({state:{overflowAdjust:{width:b,height:i},overflowState:f,secondPass:true}})}}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(c,e){var d=e.$layout,a=Ext.XTemplate,f=d.beforeBodyTpl,b=d.afterBodyTpl;if(f){a.getTpl(d,"beforeBodyTpl").applyOut(e,c)}this.renderItems(c,e);this.renderContent(c,e);if(b){a.getTpl(d,"afterBodyTpl").applyOut(e,c)}},doRenderPadding:function(b,d){var c=d.$layout,a=d.$layout.owner,e=a[a.contentPaddingProperty];if(c.managePadding&&e){b.push("padding:",a.unitizeBox(e))}},finishedLayout:function(b){var a=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){a.repaint()}if(Ext.isOpera){a.setStyle("position","relative");a.dom.scrollWidth;a.setStyle("position","")}},getContainerSize:function(b,c){var a=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),d=b.state.overflowAdjust;if(d){a.width-=d.width;a.height-=d.height}return a},getRenderData:function(){var a=this,b=Ext.layout.container.Container.prototype.getRenderData.call(this);b.innerCtCls=a.innerCtCls;b.outerCtCls=a.outerCtCls;return b},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle("overflow-y"))},initContextItems:function(b){var a=this,d=b.target,c=a.owner.getOverflowEl();b.outerCtContext=b.getEl("outerCt",a);b.innerCtContext=b.getEl("innerCt",a);b.overflowContext=(c===b.el)?b:b.getEl(c);if(d[d.contentPaddingProperty]!==undefined){b.paddingContext=b.innerCtContext}},initLayout:function(){var c=this,b=Ext.getScrollbarSize().width,a=c.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(b&&c.manageOverflow&&!c.hasOwnProperty("lastOverflowAdjust")){if(a.scrollable||c.reserveScrollbar){c.lastOverflowAdjust={width:b,height:0}}}},measureContentHeight:function(b){var a=this.outerCt.getHeight(),c=b.target;if(this.managePadding&&(c[c.contentPaddingProperty]===undefined)){a+=b.targetContext.getPaddingInfo().height}return a},measureContentWidth:function(d){var f,c,b,a,e;if(this.chromeCellMeasureBug){f=this.innerCt.dom;c=f.style;b=c.display;if(b==="table-cell"){c.display="";f.offsetWidth;c.display=b}}if(Ext.isSafari){f=this.outerCt.dom;c=f.style;c.display="table-cell";f.offsetWidth;f.style.display=""}a=this.outerCt.getWidth();e=d.target;if(this.managePadding&&(e[e.contentPaddingProperty]===undefined)){a+=d.targetContext.getPaddingInfo().width}return a},setCtSizeIfNeeded:function(d,b){var e=this,k=b.height,g=d.paddingContext.getPaddingInfo(),i=e.getTarget(),j=e.getOverflowXStyle(d),c=(j==="auto"||j==="scroll"),a=Ext.getScrollbarSize(),f,h;if(k&&!d.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){f=true}if(Ext.isIE8){h=true}if((f||h)&&c&&(i.dom.scrollWidth>i.dom.clientWidth)){k=Math.max(k-a.height,0)}if(f){d.outerCtContext.setProp("height",k+g.height);e.hasOuterCtPxHeight=true}if(h){d.innerCtContext.setProp("height",k);e.hasInnerCtPxHeight=true}}},setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000,activeCounter:0},constructor:function(a){var b=this;b.id=Ext.id(null,"zindex-mgr-");b.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(e,d){var c=(e.alwaysOnTop||0)-(d.alwaysOnTop||0);if(!c){c=e.getActiveCounter()-d.getActiveCounter()}return c}},filters:{filterFn:function(c){return c.isVisible()}}});b.zIndexStack.addObserver(b);b.front=null;b.globalListeners=Ext.GlobalEvents.on({beforehide:b.onComponentShowHide,show:b.onComponentShowHide,scope:b,destroyable:true});if(a){if(a.isContainer){a.on("resize",b.onContainerResize,b);b.zseed=Ext.Number.from(b.rendered?a.getEl().getStyle("zIndex"):undefined,b.getNextZSeed());b.targetEl=a.getTargetEl();b.container=a}else{Ext.on("resize",b.onContainerResize,b);b.zseed=b.getNextZSeed();b.targetEl=Ext.get(a)}}else{b.zseed=b.getNextZSeed();Ext.onInternalReady(function(){Ext.on("resize",b.onContainerResize,b);b.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(a){this.zseed=a;return this.onCollectionSort()},onCollectionSort:function(){var j=this,e=j.front,h=e&&e.containsFocus,k=j.zseed,l=j.zIndexStack.getRange(),g=l.length,d,f,c,b,m=false;for(d=0;d<g;d++){f=l[d];k=f.setZIndex(k);if(!f.hidden){b=f;if(f.modal){c=f}}}if(b!==e){if(e&&!e.destroying){e.setActive(false)}if(b){m=b.isFocusable(true)&&(b.modal||(b.focusOnToFront&&!b.preventFocusOnActivate));b.setActive(true,m)}}j.front=b;if(c){j.showModalMask(c)}else{j.hideModalMask()}return k},onComponentUpdate:function(a){if(this.zIndexStack.contains(a)){this.zIndexStack.sort()}},onComponentRender:function(a){this.zIndexStack.itemChanged(a,"hidden")},onComponentShowHide:function(a){var b=this.zIndexStack;if(a.isFloating()&&!this.hidingAll&&(b.getSource()||b).contains(a)){b.itemChanged(a,"hidden");b.sort()}},register:function(a){var b=this;if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=b;if(!a.rendered){a.on("render",b.onComponentRender,b,{single:true})}b.zIndexStack.add(a)},unregister:function(a){var b=this;delete a.zIndexManager;a.un("render",b.onComponentRender,b);b.zIndexStack.remove(a);b.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(b,e){var c=this,g=c.zIndexStack,a=g.last(),d,f;b=c.get(b);if(!b||g.find("alwaysOnTop",true)){return false}f=b.preventFocusOnActivate;b.preventFocusOnActivate=e;b.setActiveCounter(++Ext.ZIndexManager.activeCounter);b.preventFocusOnActivate=f;d=g.last();return(d===b&&d!==a)},sendToBack:function(a){a=this.get(a);if(a){a.setActiveCounter(0)}return a||null},hideAll:function(){var c=this.zIndexStack.getRange(),a=c.length,b;this.hidingAll=true;for(b=0;b<a;b++){c[b].hide()}this.hidingAll=false},hide:function(){var f=this,e=Ext.Element.getActiveElement(),d=f.tempHidden=f.zIndexStack.getRange(),a=d.length,c,b;f.focusRestoreElement=null;for(c=0;c<a;c++){b=d[c];if(b.el.contains(e)){f.focusRestoreElement=e}b.el.hide();b.hidden=true}},show:function(){var d=this,c,e=d.tempHidden,a=e?e.length:0,b;for(c=0;c<a;c++){b=e[c];b.el.show();b.hidden=false;b.setPosition(b.x,b.y)}d.tempHidden=null;if(d.focusRestoreElement){d.focusRestoreElement.focus()}},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(f,e){var b=this.zIndexStack.getRange(),d,a=b.length,c;for(d=0;d<a;d++){c=b[d];if(c.isComponent&&f.call(e||c,c)===false){return}}},eachTopDown:function(e,d){var a=this.zIndexStack.getRange(),c,b;for(c=a.length;c-->0;){b=a[c];if(b.isComponent&&e.call(d||b,b)===false){return}}},destroy:function(){var d=this,b=d.zIndexStack.getRange(),a=b.length,c;for(c=0;c<a;c++){Ext.destroy(b[c])}if(d.container){d.container.un("resize",d.onContainerResize,d)}else{if(d.targetEl){Ext.un("resize",d.onContainerResize,d)}}Ext.destroy(d.mask,d.maskShim,d.zIndexStack,d.globalListeners);d.zIndexStack=d.container=d.targetEl=d.globalListeners=null;d.callParent()},privates:{getMaskBox:function(){var a=this.mask.maskTarget;if(a.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return a.getBox()}},onContainerResize:function(){var c=this,b=c.mask,a=c.maskShim,d;if(b&&b.isVisible()){b.hide();if(a){a.hide()}d=c.getMaskBox();if(a){a.setSize(d);a.show()}b.setSize(d);b.show()}},onMaskClick:function(){if(this.front){this.front.focus()}},showModalMask:function(b){var d=this,h=b.el,g=h.getStyle("zIndex")-4,c=b.floatParent?b.floatParent.getTargetEl():b.container,a=d.mask,f=d.maskShim,e;if(!a){d.mask=a=Ext.getBody().createChild({role:"presentation",cls:"x-mask x-border-box",style:"height:0;width:0"});a.setVisibilityMode(Ext.Element.DISPLAY);a.on("click",d.onMaskClick,d)}else{d.hideModalMask()}a.maskTarget=c;e=d.getMaskBox();if(f){f.setStyle("zIndex",g);f.show();f.setBox(e)}a.setStyle("zIndex",g);c.saveTabbableState({excludeRoot:h});a.show();a.setBox(e)},hideModalMask:function(){var b=this.mask,a=this.maskShim;if(b&&b.isVisible()){b.maskTarget.restoreTabbableState();b.maskTarget=undefined;b.hide();if(a){a.hide()}}}}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.util.ItemCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.ItemCollection",getKey:function(a){return a.getItemId&&a.getItemId()},has:function(a){return this.map.hasOwnProperty(a.getId())}},0,0,0,0,0,0,[Ext.util,"ItemCollection",Ext,"ItemCollection"],0));(Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:true,query:function(a){a=a||"*";return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(f,e){var c=[],b=this.getQueryRoot().getRefItems(true),d=0,a=b.length,g;for(;d<a;++d){g=b[d];if(f.call(e||g,g)!==false){c.push(g)}}return c},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(a){var b=this.getQueryRoot().getRefItems();if(a&&a.isComponent){return this.matchById(b,a.getItemId())}if(a){b=Ext.ComponentQuery.query(a,b)}if(b.length){return b[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(true),a.getItemId())}a=a||"";return this.query(a)[0]||null},visitPreOrder:function(a,d,c,b){Ext.ComponentQuery._visit(true,a,this.getQueryRoot(),d,c,b)},visitPostOrder:function(a,d,c,b){Ext.ComponentQuery._visit(false,a,this.getQueryRoot(),d,c,b)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(b,e){var a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getItemId()===e){return d}}return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0));(Ext.cmd.derive("Ext.mixin.Container",Ext.Mixin,{mixinConfig:{id:"container"},isContainer:true,config:{referenceHolder:false},getReferences:function(){Ext.ComponentManager.fixReferences();return this.refs||null},lookup:function(b){var a=this.getReferences();return(a&&a[b])||null},lookupReference:function(a){return this.lookup(a)},privates:{attachReference:function(b){var d=this,c,a;if(d.destroying||d.destroyed){return}a=d.refs||(d.refs={});c=b.referenceKey;a[c]=b},clearReference:function(b){var a=this.refs,c=b.referenceKey;if(a&&c){b.viewModelKey=b.referenceKey=a[c]=null}},containerOnAdded:function(b,a){if(a){Ext.ComponentManager.markReferencesDirty()}},containerOnRemoved:function(a){var b;if(!a){b=this.lookupReferenceHolder();if(b){Ext.ComponentManager.markReferencesDirty();b.clearReferences()}}},clearReferences:function(){this.refs=null},initContainerInheritedState:function(e,c){var g=this,b=g.getController(),h=g.getSession(),d=g.getConfig("viewModel",true),a=g.getReference(),f=g.getReferenceHolder();if(b){e.referenceHolder=b;f=true}else{if(f){e.referenceHolder=g}}if(f){e.referencePath=""}else{if(a&&g.isParentReference){e.referencePath=g.referenceKey+"."}}if(h){e.session=h}if(d){e.viewModelPath=""}else{if(a&&g.isParentReference){e.viewModelPath=g.viewModelKey+"."}}},setupReference:function(b){var a;if(b&&b.charAt(a=b.length-1)===">"){this.isParentReference=true;b=b.substring(0,a)}return b}}},0,0,0,0,0,0,[Ext.mixin,"Container"],0));(Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"{%this.renderContainer(out,values)%}",autoDestroy:true,defaultType:"panel",detachOnRemove:true,items:undefined,layout:"auto",suspendLayout:false,_applyDefaultsOptions:{defaults:true,strict:false},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var k=this,g=Ext.Array.slice(arguments),e=(typeof g[0]==="number")?g.shift():-1,c=k.getLayout(),d=false,m,h,b,a,n,l,f,j;if(g.length===1&&Ext.isArray(g[0])){h=g[0];m=true}else{h=g}if(k.rendered){Ext.suspendLayouts()}f=h=k.prepareItems(h,true);a=h.length;if(!m&&a===1){f=h[0]}for(b=0;b<a;b++){n=h[b];l=(e<0)?k.items.length:(e+b);j=!!n.instancedCmp;delete n.instancedCmp;if(n.floating){(k.floatingItems||(k.floatingItems=new Ext.util.ItemCollection())).add(n);n.onAdded(k,l,j);delete n.$initParent;if(k.hasListeners.add){k.fireEvent("add",k,n,l)}}else{if((!k.hasListeners.beforeadd||k.fireEvent("beforeadd",k,n,l)!==false)&&k.onBeforeAdd(n)!==false){k.items.insert(l,n);n.onAdded(k,l,j);delete n.$initParent;k.onAdd(n,l);c.onAdd(n,l);d=true;if(k.hasListeners.add){k.fireEvent("add",k,n,l)}}}}if(d){k.updateLayout()}if(k.rendered){Ext.resumeLayouts(true)}return f},onAdded:function(b,c,a){Ext.Component.prototype.onAdded.call(this,b,c,a);this.containerOnAdded(b,a)},onRemoved:function(a){this.containerOnRemoved(a);Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var b=this.floatingItems,a,d,c;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);if(b){b=b.items;a=b.length;for(d=0;d<a;d++){c=b[d];if(!c.rendered&&c.autoShow){c.show()}}}},afterLayout:function(c){var b=this,a=b.getScrollable();++b.layoutCounter;if(a&&b.layoutCounter>1){a.refresh()}if(b.hasListeners.afterlayout){b.fireEvent("afterlayout",b,c)}},beforeDestroy:function(){var b=this,a=b.items,d=b.floatingItems,e;if(a){while((e=a.first())){b.doRemove(e,true)}}if(d){while((e=d.first())){b.doRemove(e,true)}}Ext.destroy(b.layout);Ext.Component.prototype.beforeDestroy.call(this)},destroy:function(){var a=this;Ext.Component.prototype.destroy.call(this);if(a.items){a.items.destroy()}if(a.floatingItems){a.floatingItems.destroy()}a.refs=a.items=a.floatingItems=a.layout=null},beforeRender:function(){var b=this,a=b.getLayout(),c;b.preventChildDisable=true;Ext.Component.prototype.beforeRender.call(this);b.preventChildDisable=false;if(!a.initialized){a.initLayout()}c=a.targetCls;if(c){b.applyTargetCls(c)}},cascade:function(k,l,a){var j=this,e=j.items?j.items.items:[],f=e.length,d=0,h,g=a?a.concat(j):[j],b=g.length-1;if(k.apply(l||j,g)!==false){for(;d<f;d++){h=e[d];if(h.cascade){h.cascade(k,l,a)}else{g[b]=h;k.apply(l||h,g)}}}return this},contains:function(c,b){var a=false;if(b){this.cascade(function(d){if(d.contains&&d.contains(c)){a=true;return false}});return a}else{return this.items.contains(c)||(this.floatingItems&&this.floatingItems.contains(c))}},disable:function(b,g){var e=this,d=e.disabled,f,a,c;Ext.Component.prototype.disable.call(this,b,g);if(!g&&!e.preventChildDisable&&!d){f=e.getChildItemsToDisable();a=f.length;for(c=0;c<a;c++){f[c].disable(b,true)}}return e},enable:function(b,g){var e=this,d=e.disabled,f,a,c;Ext.Component.prototype.enable.call(this,b,g);if(d){f=e.getChildItemsToDisable();a=f.length;for(c=0;c<a;c++){f[c].enable(b,true)}}return e},getChildByElement:function(e,a){var g,c,b=0,d=this.getRefItems(),f=d.length;e=Ext.getDom(e);for(;b<f;b++){g=d[b];c=g.getEl();if(c&&((c.dom===e)||c.contains(e))){return(a&&g.getChildByElement)?g.getChildByElement(e,a):g}}return null},getComponent:function(b){if(Ext.isObject(b)){b=b.getItemId()}var d=this.items.get(b),a=this.floatingItems;if(!d&&a&&typeof b!=="number"){d=a.get(b)}return d},getFocusEl:function(){var a=this.getDefaultFocus();if(a){return a}else{if(this.focusable){return this.getTargetEl()}}return undefined},getLayout:function(){var b=this,a=b.layout;if(!a||!a.isLayout){b.setLayout(a)}return b.layout},getRefItems:function(c){var g=this,d=g.items.items,b=d.length,e=0,f,a=[];for(;e<b;e++){f=d[e];a[a.length]=f;if(c&&f.getRefItems){a.push.apply(a,f.getRefItems(true))}}if(g.floatingItems){d=g.floatingItems.items;b=d.length;for(e=0;e<b;e++){f=d[e];a[a.length]=f;if(c&&f.getRefItems){a.push.apply(a,f.getRefItems(true))}}}return a},getDefaultFocus:function(){var b=this.defaultFocus,a;if(b){a=this.down(b)}return a},initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.getLayout();a.constructing=true;a.initItems();if(a.disabled){a.disabled=false;a.disable(true)}delete a.constructing},initItems:function(){var b=this,a=b.items;if(!a||!a.isMixedCollection){b.items=new Ext.util.ItemCollection();if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}}},initInheritedState:function(h,c){var g=this,d=g.controller,e=g.layout,f=g.session,i=g.viewModel,b=g.reference,a=g.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,h,c);if(g.collapsed){h.collapsed=true}g.initContainerInheritedState(h,c);if(e&&e.initInheritedState){e.initInheritedState(h,c)}},insert:function(c,b){var a;if(b&&b.isComponent){a=this.items.indexOf(b);if(a!==-1){return this.move(a,c)}}return this.add(c,b)},lookupComponent:function(a){if(!a.isComponent){if(typeof a==="string"){a=Ext.ComponentManager.get(a)}else{a=Ext.ComponentManager.create(a,this.defaultType)}}return a},move:function(b,e){var d=this,a=d.items,c;if(b.isComponent){b=a.indexOf(b)}c=a.getAt(b);if(b!==e){c=a.removeAt(b);if(c===false){return false}e=Math.min(e,a.getCount());a.insert(e,c);d.onMove(c,b,e);if(d.hasListeners.childmove){d.fireEvent("childmove",d,c,b,e)}d.updateLayout()}return c},moveBefore:function(a,b){if(a!==b){a=this.layout.moveItemBefore(a,b)}return a},moveAfter:function(c,d){var b=this.layout,a;if(c!==d){a=d?b.getMoveAfterIndex(d):0;c=b.moveItemBefore(c,this.items.getAt(a))}return c},nextChild:function(h,c){var f=this,d=f.items,g=d.indexOf(h),e=0,b=d.length,a;if(g!==-1){if(c){for(;e<b;e++){a=d.getAt(g+e);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(g+1)}}return a||null},onAdd:Ext.emptyFn,onBeforeAdd:function(b){var a=b.ownerCt;if(a&&a!==this){a.remove(b,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(h,c){var f=this,d=f.items,g=d.indexOf(h),e=0,b=d.length,a;if(g!==-1){if(c){for(;e<b;e++){a=d.getAt(g-e);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(g-1)}}return a||null},remove:function(b,a){var d=this,e;if(d.destroyed||d.destroying){return}e=d.getComponent(b);if(e&&(!d.hasListeners.beforeremove||d.fireEvent("beforeremove",d,e)!==false)){d.doRemove(e,a);if(d.hasListeners.remove){d.fireEvent("remove",d,e)}if(!d.destroying&&!e.floating){d.updateLayout()}}return e},removeAll:function(d){var h=this,f,b=h.floatingItems,c=[],e=0,a,g;if(b){f=h.items.items.concat(b.items)}else{f=h.items.items.slice()}a=f.length;Ext.suspendLayouts();h.removingAll=true;for(;e<a;e++){g=f[e];h.remove(g,d);if(g.ownerCt!==h){c.push(g)}}h.removingAll=false;Ext.resumeLayouts(!!a);return c},setLayout:function(e){var d=this,b=d.layout,f=b&&b.isLayout,a,c;if(typeof e==="string"){e={type:e}}c=e.type;if(f&&(!c||(c===b.type))){delete e.type;b.setConfig(e)}else{if(f){b.setOwner(null)}a=d.self.prototype.layout;if(typeof a==="string"){e.type=c||a}else{Ext.merge(Ext.merge({},a),e)}e=this.layout=Ext.Factory.layout(e);e.setOwner(this)}if(d.rendered){d.updateLayout()}},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},privates:{applyDefaults:function(a){var b=this,c=b.defaults;if(c){if(Ext.isFunction(c)){c=c.call(b,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}if(a.isComponent){a.setConfig(c,null,b._applyDefaultsOptions)}else{a=b.getConfigurator().merge(b,Ext.Object.fork(c),a)}}return a},applyReference:function(a){return this.setupReference(a)},applyTargetCls:function(a){this.layoutTargetCls=a},detachComponent:function(a){Ext.getDetachedBody().appendChild(a.getEl())},doRemove:function(c,b){b=b===true||(b!==false&&this.autoDestroy);var f=this,e=f.layout,a=e&&f.rendered,d=c.destroying||b,g=c.floating;if(g){f.floatingItems.remove(c)}else{f.items.remove(c)}if(a&&!g){if(e.running){Ext.Component.cancelLayout(c,d)}e.onRemove(c,d)}c.onRemoved(d);f.onRemove(c,d);if(b){c.destroy()}else{if(a&&!g){e.afterRemove(c)}if(f.detachOnRemove&&c.rendered){f.detachComponent(c)}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var a=this.getLayout();if(a){a.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(b,d){if(Ext.isArray(b)){b=b.slice()}else{b=[b]}var f=this,c=0,a=b.length,e;for(;c<a;c++){e=b[c];if(e==null){Ext.Array.erase(b,c,1);--c;--a}else{if(d){e=this.applyDefaults(e)}e.$initParent=f;if(e.isComponent){e.instancedCmp=true}b[c]=f.lookupComponent(e);delete e.$initParent}}return b},repositionFloatingItems:function(){var b=this.floatingItems,a,d,c;if(b){b=b.items;a=b.length;for(d=0;d<a;d++){c=b[d];if(c.el&&!c.hidden){c.setPosition(c.x,c.y)}}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var a=this.items.items,c=a.length,b=this._noMargin,d;while(c--){d=a[c];d.margin$=null;d.el.setStyle(b)}},setupRenderTpl:function(a){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(a)}}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.mixin.Container.prototype.mixinId||Ext.mixin.Container.$className,Ext.mixin.Container]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:true,$configPrefixed:false,$configStrict:false,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(b){var a=this,c=b.state.boxPlan,d;if(c&&c.tooNarrow){d=a.handleOverflow(b);if(d){if(d.reservedSpace){a.layout.publishInnerCtSize(b,d.reservedSpace)}}}else{a.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(d){var c=this,a=c.layout.owner,b,e;if(a.hasListeners.overflowchange){b=a.query(">[hidden]");e=b.length;if(e!==c.lastHiddenCount){a.fireEvent("overflowchange",c.lastHiddenCount,e,b);c.lastHiddenCount=e}}},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(a){var b;if(a.isToolbar){b="toolbar"}else{if(a.isTabBar){b="tab-bar"}else{if(a.isMenu){b="menu"}else{if(a.isBreadcrumb){b="breadcrumb"}else{b=a.getXType()}}}}return b},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var b=this,a=b.layout,c=a.innerCt;c.removeCls(b.getOverflowCls(a.oppositeDirection));c.addCls(b.getOverflowCls(a.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.scrollPosition=0;b.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(e){var g=this,f=g.layout,b=f.owner,d=g.getOwnerType(b),a=g.scrollerCls,c=a+" "+a+"-"+f.names[e]+" "+a+"-"+d+" "+a+"-"+d+"-"+b.ui;if(b.plain){c+=" "+a+"-plain"}return c},getOverflowCls:function(a){return this.scrollerCls+"-body-"+a},beginLayout:function(a){a.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(d){var c=this,f=d.state.boxPlan,b=c.layout,e=b.names,g=Math.min(c.getMaxScrollPosition(),d.innerCtScrollPos),a;if(f&&f.tooNarrow){a=d.childItems[d.childItems.length-1].props;c.scrollSize=a[e.x]+a[e.width];c.updateScrollButtons();b.innerCt[e.setScrollLeft](g)}Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,d)},handleOverflow:function(b){var g=this,f=g.layout.names,h=f.getWidth,i=f.parallelMargins,c,e,d,a;g.showScrollers();d=g.getBeforeScroller();a=g.getAfterScroller();c=d[h]()+a[h]()+d.getMargin(i)+a.getMargin(i);e=b.targetContext.getPaddingInfo()[f.width];return{reservedSpace:Math.max(c-e,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(f,d,g){var e=this,c=e.layout.owner,b=e.scrollerCls,a;a=c.el.getById(c.id+f);a.addClsOnOver(b+"-hover");a.addClsOnClick(b+"-pressed");a.setVisibilityMode(Ext.Element.DISPLAY);e[d]=new Ext.util.ClickRepeater(a,{interval:e.scrollRepeatInterval,handler:g,scope:e});return a},createWheelListener:function(){var a=this;a.wheelListener=a.layout.innerCt.on("mousewheel",a.onMouseWheel,a,{destroyable:true})},onMouseWheel:function(a){a.stopEvent();this.scrollBy(this.getWheelDelta(a)*this.wheelIncrement*-1,false)},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;if(!a.wheelListener){a.createWheelListener()}a.getBeforeScroller().show();a.getAfterScroller().show();a.layout.owner.addClsWithUI(a.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var b=this,c=b.getBeforeScroller(),a=b.getAfterScroller();if(c){c.hide();a.hide();b.layout.owner.removeClsWithUI(b.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener");this.callParent()},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var b=this,d=b.getBeforeScroller(),a=b.getAfterScroller(),c;if(!d||!a){return}c=b.scrollerCls+"-disabled";d[b.atExtremeBefore()?"addCls":"removeCls"](c);a[b.atExtremeAfter()?"addCls":"removeCls"](c);b.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var c=this,b=c.layout,a;if(isNaN(c.scrollPosition)){a=b.innerCt[b.names.getScrollLeft]()}else{a=c.scrollPosition}return a},getMaxScrollPosition:function(){var b=this,a=b.layout,c=b.scrollSize-a.innerCt.lastBox[a.names.width];return(c<0)?0:c},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var c=this,d=c.getBeforeScroller(),b=c.getAfterScroller(),e=c.layout.names,a=c.scrollerCls;d.removeCls(a+"-"+e.beforeY);b.removeCls(a+"-"+e.afterY);d.addCls(a+"-"+e.beforeX);b.addCls(a+"-"+e.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(a,b){var f=this,e=f.layout,g=e.names,d=f.getScrollPosition(),c=Ext.Number.constrain(a,0,f.getMaxScrollPosition());if(c!==d&&!f.scrolling){f.scrollPosition=NaN;if(b===undefined){b=f.animateScroll}e.innerCt[g.scrollTo](g.beforeScrollX,c,b?f.getScrollAnim():false);if(b){f.scrolling=true}else{f.updateScrollButtons()}f.fireEvent("scroll",f,c,b?f.getScrollAnim():false)}},scrollToItem:function(j,c){var i=this,f=i.layout,d=f.owner,h=f.names,b=f.innerCt,a,e,g;j=i.getItem(j);if(j!==undefined){if(j===d.items.first()){g=0}else{if(j===d.items.last()){g=i.getMaxScrollPosition()}else{a=i.getItemVisibility(j);if(!a.fullyVisible){e=j.getBox(false,true);g=e[h.x];if(a.hiddenEnd){g-=(b[h.getWidth]()-e[h.width])}}}}if(g!==undefined){i.scrollTo(g,c)}}},getItemVisibility:function(i){var g=this,b=g.getItem(i).getBox(true,true),c=g.layout,f=c.names,e=b[f.x],d=e+b[f.width],a=g.getScrollPosition(),h=a+c.innerCt[f.getWidth]();return{hiddenStart:e<a,hiddenEnd:d>h,fullyVisible:e>=a&&d<=h}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:"x-dd-drag-current",_execOnAll:function(c,b){var e=this.ids,d,a,g,f;for(d in e){if(e.hasOwnProperty(d)){f=e[d];for(a in f){if(f.hasOwnProperty(a)){g=f[a];if(!this.isTypeOfDD(g)){continue}g[c].apply(g,b)}}}}},addListeners:function(){var a=this;a.init();Ext.getDoc().on({mouseup:a.handleMouseUp,mousemove:{fn:a.handleMouseMove,capture:false},dragstart:a.preventDrag,drag:a.preventDrag,dragend:a.preventDrag,capture:true,scope:a});Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},preventDrag:function(a){if(this.isMouseDown){a.stopPropagation()}},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:8,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){if(!this.ids[a]){this.ids[a]={}}var b=this.ids[a];if(b&&b[c.id]){delete b[c.id]}},_remove:function(f,b){var e=this,c=e.ids,a=f.groups,d;if(e.clearingAll){return}if(e.dragCurrent===f){e.dragCurrent=null}for(d in a){if(a.hasOwnProperty(d)){if(b){delete c[d]}else{if(c[d]){delete c[d][f.id]}}}}delete e.handleIds[f.id];delete e.locationCache[f.id]},regHandle:function(b,a){if(!this.handleIds[b]){this.handleIds[b]={}}this.handleIds[b][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(f,b){var e=[],d,c,a;for(d in f.groups){for(c in this.ids[d]){a=this.ids[d][c];if(!this.isTypeOfDD(a)){continue}if(!b||a.isTarget){e[e.length]=a}}}return e},isLegalTarget:function(e,d){var b=this.getRelated(e,true),c,a;for(c=0,a=b.length;c<a;++c){if(b[c].id===d.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(b,a){return(this.handleIds[b]&&this.handleIds[b][a])},getDDById:function(d,c){var b,a;for(b in this.ids){a=this.ids[b][d];if(a instanceof Ext.dd.DDTarget||c){return a}}return null},handleMouseDown:function(f,d){var b=this,c,a;b.isMouseDown=true;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}b.currentPoint=f.getPoint();if(b.dragCurrent){b.handleMouseUp(f)}b.mousedownEvent=f;b.currentTarget=f.getTarget();b.dragCurrent=d;a=d.getEl();Ext.fly(a).setCapture();c=f.getXY();b.startX=c[0];b.startY=c[1];b.offsetX=b.offsetY=0;b.deltaX=b.startX-a.offsetLeft;b.deltaY=b.startY-a.offsetTop;b.dragThreshMet=false},startDrag:function(b,e){var c=this,d=c.dragCurrent,a;clearTimeout(c.clickTimeout);if(d){d.b4StartDrag(b,e);d.startDrag(b,e);a=d.getDragEl();if(a){Ext.fly(a).addCls(c.dragCls)}}c.dragThreshMet=true},handleMouseUp:function(b){var a=this;a.isMouseDown=false;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!a.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(a.clickTimeout);if(a.dragThreshMet){a.fireEvents(b,true)}a.stopDrag(b);a.stopEvent(b);a.mousedownEvent=a.currentTarget=null},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(d){var b=this,c=b.dragCurrent,a;if(c){if(b.dragThreshMet){a=c.getDragEl();if(a){Ext.fly(a).removeCls(b.dragCls)}c.b4EndDrag(d);c.endDrag(d)}b.dragCurrent.onMouseUp(d)}b.dragCurrent=null;b.dragOvers={}},handleMouseMove:function(i){var g=this,h=g.dragCurrent,a=g.currentPoint=i.getPoint(),d=a.x,b=a.y,f,c;g.offsetX=d-g.startX;g.offsetY=b-g.startY;if(!h){return true}if(!g.dragThreshMet){f=Math.abs(g.offsetX);c=Math.abs(g.offsetY);if(f>g.clickPixelThresh||c>g.clickPixelThresh){g.startDrag(g.startX,g.startY)}}if(g.dragThreshMet){h.b4Drag(i);h.onDrag(i);if(!h.moveOnly){g.fireEvents(i,false)}}g.stopEvent(i);return true},fireEvents:function(w,m){var y=this,n=Ext.supports.Touch,g=y.dragCurrent,u=y.currentPoint,q=u.x,p=u.y,o=[],h=[],k=[],b=[],x=[],v=[],a=n?document.documentElement.clientWidth/window.innerWidth:1,d,f,l,c,s,t,r,j;if(!g||g.isLocked()){return}j=!(g.deltaX<0||g.deltaY<0);if(n||(!y.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&j)){d=g.getDragEl();if(j){d.style.visibility="hidden"}w.target=document.elementFromPoint(q/a,p/a);if(j){d.style.visibility="visible"}}for(s in y.dragOvers){f=y.dragOvers[s];delete y.dragOvers[s];if(!y.isTypeOfDD(f)||f.destroyed){continue}if(y.notifyOccluded){if(!this.isOverTarget(u,f,y.mode)){k.push(f)}}else{if(!w.within(f.getEl())){k.push(f)}}h[s]=true}for(r in g.groups){if("string"!==typeof r){continue}for(s in y.ids[r]){f=y.ids[r][s];if(y.isTypeOfDD(f)&&(l=f.getEl())&&(f.isTarget)&&(!f.isLocked())&&(Ext.fly(l).isVisible(true))&&((f!==g)||(g.ignoreSelf===false))){if(y.notifyOccluded){if((f.zIndex=y.getZIndex(l))!==-1){c=true}o.push(f)}else{if(w.within(f.getEl())){o.push(f);break}}}}}if(c){Ext.Array.sort(o,y.byZIndex)}for(s=0,t=o.length;s<t;s++){f=o[s];if(y.isOverTarget(u,f,y.mode)){if(m){x.push(f)}else{if(!h[f.id]){v.push(f)}else{b.push(f)}y.dragOvers[f.id]=f}if(!y.notifyOccluded){break}}}if(y.mode){if(k.length){g.b4DragOut(w,k);g.onDragOut(w,k)}if(v.length){g.onDragEnter(w,v)}if(b.length){g.b4DragOver(w,b);g.onDragOver(w,b)}if(x.length){g.b4DragDrop(w,x);g.onDragDrop(w,x)}}else{for(s=0,t=k.length;s<t;++s){g.b4DragOut(w,k[s].id);g.onDragOut(w,k[s].id)}for(s=0,t=v.length;s<t;++s){g.onDragEnter(w,v[s].id)}for(s=0,t=b.length;s<t;++s){g.b4DragOver(w,b[s].id);g.onDragOver(w,b[s].id)}for(s=0,t=x.length;s<t;++s){g.b4DragDrop(w,x[s].id);g.onDragDrop(w,x[s].id)}}if(m&&!x.length){g.onInvalidDrop(w)}},getZIndex:function(b){var a=document.body,c,d=-1;b=Ext.getDom(b);while(b!==a){if(!isNaN(c=Number(Ext.fly(b).getStyle("zIndex")))){d=c}b=b.parentNode}return d},byZIndex:function(b,a){return b.zIndex<a.zIndex},getBestMatch:function(c){var e=null,b=c.length,d,a;if(b===1){e=c[0]}else{for(d=0;d<b;++d){a=c[d];if(a.cursorIsOver){e=a;break}else{if(!e||e.overlap.getArea()<a.overlap.getArea()){e=a}}}}return e},refreshCache:function(b){var a,c,d,e;for(a in b){if("string"!==typeof a){continue}for(c in this.ids[a]){d=this.ids[a][c];if(this.isTypeOfDD(d)){e=this.getLocation(d);if(e){this.locationCache[d.id]=e}else{delete this.locationCache[d.id]}}}}},verifyEl:function(a){return Ext.getBody().contains(a)},getLocation:function(h){if(!this.isTypeOfDD(h)){return null}if(h.getRegion){return h.getRegion()}var f=h.getEl(),k,d,c,n,m,o,a,j,g;try{k=Ext.fly(f).getXY()}catch(i){}if(!k){return null}d=k[0];c=d+f.offsetWidth;n=k[1];m=n+f.offsetHeight;o=n-h.padding[0];a=c+h.padding[1];j=m+h.padding[2];g=d-h.padding[3];return new Ext.util.Region(o,a,j,g)},isOverTarget:function(i,a,c){var e=this.locationCache[a.id],h,f,b,d,g;if(!e||!this.useCache){e=this.getLocation(a);this.locationCache[a.id]=e}if(!e){return false}a.cursorIsOver=e.contains(i);h=this.dragCurrent;if(!h||!h.getTargetCoord||(!c&&!h.constrainX&&!h.constrainY)){return a.cursorIsOver}a.overlap=null;f=h.getTargetCoord(i.x,i.y);b=h.getDragEl();d=new Ext.util.Region(f.y,f.x+b.offsetWidth,f.y+b.offsetHeight,f.x);g=d.intersect(e);if(g){a.overlap=g;return(c)?true:a.cursorIsOver}else{return false}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var c=this,a=c.elementCache,b;if(c.dragCurrent){c.stopDrag();c.dragCurrent=null}c.clearingAll=true;c._execOnAll("unreg",[]);delete c.clearingAll;for(b in a){delete a[b]}c.elementCache={};c.ids={};c.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(c,a){if(c.swapNode){c.swapNode(a)}else{var d=a.parentNode,b=a.nextSibling;if(b===c){d.insertBefore(c,a)}else{if(a===c.nextSibling){d.insertBefore(a,c)}else{c.parentNode.replaceChild(a,c);d.insertBefore(c,b)}}}},getScroll:function(){var d=window.document,e=d.documentElement,a=d.body,c=0,b=0;if(e&&(e.scrollTop||e.scrollLeft)){c=e.scrollTop;b=e.scrollLeft}else{if(a){c=a.scrollTop;b=a.scrollLeft}}return{top:c,left:b}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,c){var b=Ext.fly(c).getXY();Ext.fly(a).setXY(b)},numericSort:function(d,c){return(d-c)},handleWasClicked:function(a,c){if(this.isHandle(c,a.id)){return true}else{var b=a.parentNode;while(b){if(this.isHandle(c,b.id)){return true}else{b=b.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(a){Ext.onInternalReady(function(){a.addListeners()})}));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:true,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",focusable:true,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var c=this,d=c.getCollapseTarget(),b=c.collapsible,a;Ext.Component.prototype.beforeRender.call(this);if(d.collapsed){c.addCls(c.collapsedClsInternal)}if(!c.canResize){c.addCls(c.baseCls+"-noresize")}Ext.applyIf(c.renderData,{collapseDir:c.getCollapseDirection(),collapsible:(b!==null)?b:d.collapsible});c.ariaRenderAttributes=c.ariaRenderAttributes||{};c.ariaRenderAttributes["aria-orientation"]=c.orientation;c.protoEl.unselectable()},onRender:function(){var b=this,a;Ext.Component.prototype.onRender.apply(this,arguments);if(b.performCollapse!==false){if(b.renderData.collapsible){b.mon(b.collapseEl,"click",b.toggleTargetCmp,b)}if(b.collapseOnDblClick){b.mon(b.el,"dblclick",b.toggleTargetCmp,b)}}b.getCollapseTarget().on({collapse:b.onTargetCollapse,expand:b.onTargetExpand,beforeexpand:b.onBeforeTargetExpand,beforecollapse:b.onBeforeTargetCollapse,scope:b});if(b.canResize){b.tracker=Ext.create(b.getTrackerConfig());b.relayEvents(b.tracker,["beforedragstart","dragstart","dragend"])}a=b.collapseEl;if(a){a.lastCollapseDirCls=b.collapseDirProps[b.collapseDirection].cls}},getCollapseDirection:function(){var f=this,c=f.collapseDirection,e,a,b,d;if(!c){e=f.collapseTarget;if(e.isComponent){c=e.collapseDirection}if(!c){d=f.ownerCt.layout.type;if(e.isComponent){b=f.ownerCt.items;a=Number(b.indexOf(e)===b.indexOf(f)-1)<<1|Number(d==="hbox")}else{a=Number(f.collapseTarget==="prev")<<1|Number(d==="hbox")}c=["bottom","right","top","left"][a]}f.collapseDirection=c}f.setOrientation((c==="top"||c==="bottom")?"horizontal":"vertical");return c},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget==="prev"?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;if(a){a.setDisplayed(b)}},onBeforeTargetExpand:function(a){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(b){var a=this;if(b===a.getCollapseTarget()&&b[a.orientation==="vertical"?"collapsedHorizontal":"collapsedVertical"]()){a.el.addCls(a.collapsedClsInternal+" "+(a.collapsedCls||""))}a.setCollapseEl("")},onTargetExpand:function(b){var a=this;a.el.removeCls(a.collapsedClsInternal+" "+(a.collapsedCls||""));a.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var c=this,b=c.collapseEl,d=c.collapseDirProps[c.collapseDirection],a;if(b){a=b.lastCollapseDirCls;if(a){b.removeCls(a)}b.addCls(b.lastCollapseDirCls=d.cls)}},applyOrientation:function(){var e=this,c=e.orientation,d=e.orientationProps[c],f=e.size,b=d.fixedAxis,g=d.stretchedAxis,a=e.baseCls+"-";e[c]=true;e[d.opposite]=false;if(!e.hasOwnProperty(b)||e[b]==="100%"){e[b]=f}if(!e.hasOwnProperty(g)||e[g]===f){e[g]="100%"}e.removeCls(a+d.opposite);e.addCls(a+c)},setOrientation:function(a){var b=this;if(b.orientation!==a){b.orientation=a;b.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(d,b){var c=this.getCollapseTarget(),f=c.placeholder,a;if(Ext.isFunction(c.expand)&&Ext.isFunction(c.collapse)){if(f&&!f.hidden){a=true}else{a=!c.hidden}if(a){if(c.collapsed){c.expand()}else{if(c.collapseDirection){c.collapse()}else{c.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var a=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&a.el){a.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.beforeDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));Ext.define("Ext.theme.neptune.resizer.Splitter",{override:"Ext.resizer.Splitter",size:8});(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:false,enableSplitters:true,overflowHandler:{$value:null,merge:function(b,a){if(typeof b==="string"){b={type:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},padding:0,pack:"start",stretchMaxPartner:undefined,vertical:false,alignRoundingMethod:"round"},itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(a){var c=this,b;Ext.layout.container.Container.prototype.constructor.apply(this,arguments);c.setVertical(c.vertical);c.flexSortFn=c.flexSort.bind(c);b=typeof c.padding;if(b==="string"||b==="number"){c.padding=Ext.util.Format.parseBox(c.padding);c.padding.height=c.padding.top+c.padding.bottom;c.padding.width=c.padding.left+c.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(p,q){var k=this,i=k.sizePolicy,g=k.align,f=p.flex,n=g,j=k.names,h=j.height,m=j.width,b=p[m],o=p[h],d=k._percentageRe,c=d.test(b),e=(g==="stretch"),a=(g==="stretchmax"),l=k.constrainAlign;if(!q&&(e||f||c||(l&&!a))){q=k.owner.getSizeModel()}if(e){if(!d.test(o)&&q[h].shrinkWrap){n="stretchmax"}}else{if(!a){if(d.test(o)){n="stretch"}else{if(l&&!q[h].shrinkWrap){n="stretchmax"}else{n=""}}}}if(f||c){if(!q[m].shrinkWrap){i=i.flex}}return i[n]},flexSort:function(n,m){var k=this.names.maxWidth,e=this.names.minWidth,l=Infinity,j=n.target,q=m.target,h=j.flex,g=q.flex,r=0,c,o,i,d,p,f;i=j[k]||l;d=q[k]||l;c=j[e]||0;o=q[e]||0;p=isFinite(c)||isFinite(o);f=isFinite(i)||isFinite(d);if(p||f){if(f){r=i-d}if(r===0&&p){r=o-c}if(r===0){if(f){r=g-h}else{r=h-g}}}return r},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},roundFlex:function(a){return Math.floor(a)},beginCollapse:function(b){var a=this;if(a.direction==="vertical"&&b.collapsedVertical()){b.collapseMemento.capture(["flex"]);delete b.flex}else{if(a.direction==="horizontal"&&b.collapsedHorizontal()){b.collapseMemento.capture(["flex"]);delete b.flex}}},beginExpand:function(a){a.collapseMemento.restore(["flex"])},beginLayout:function(e){var h=this,b=h.owner,d=b.stretchMaxPartner,a=h.innerCt.dom.style,g=h.names,f=h.overflowHandler,i=b.getScrollable(),c;e.boxNames=g;if(f){f.beginLayout(e)}if(typeof d==="string"){d=Ext.getCmp(d)||b.query(d)[0]}e.stretchMaxPartner=d&&e.context.getCmp(d);Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);e.innerCtContext=e.getEl("innerCt",h);e.targetElContext=e.getEl("targetEl",h);if(i){e.ownerScrollable=i;c=i.getPosition();if(c.x||c.y){e.scrollRestore=c}}a.width=a.height=""},beginLayoutCycle:function(d,m){var j=this,a=d.state,k=d.ownerScrollable,h=j.align,i=d.boxNames,l=j.pack,c=j._centerRe,e=j.overflowHandler,b=d.state.canScroll,g,f;if(e){e.beginLayoutCycle(d,m)}Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);d.parallelSizeModel=g=d[i.widthModel];d.perpendicularSizeModel=f=d[i.heightModel];d.boxOptions={align:h={stretch:h==="stretch",stretchmax:h==="stretchmax",center:c.test(h),bottom:j._endRe.test(h)},pack:l={center:c.test(l),end:l==="end"}};if(k){if(!b){a.canScroll={parallel:!g.shrinkWrap&&k[i.getX](),perpendicular:!f.shrinkWrap&&k[i.getY]()}}if(!a.actualScroll){a.actualScroll={parallel:false,perpendicular:false}}}if(h.stretch&&f.shrinkWrap){h.stretchmax=true;h.stretch=false}h.nostretch=!(h.stretch||h.stretchmax);if(g.shrinkWrap){l.center=l.end=false}j.cacheFlexes(d);j.targetEl.setWidth(20000)},cacheFlexes:function(l){var A=this,m=l.boxNames,a=m.widthModel,g=m.heightModel,c=l.boxOptions.align.nostretch,s=0,b=l.childItems,u=b.length,y=[],n=0,v=0,r=0,k=m.minWidth,x=m.minHeight,h=A._percentageRe,w=0,z=0,f,p,t,j,d,e,q,o;while(u--){p=b[u];f=p.target;e=p[a];if(e.calculated){p.flex=t=f.flex;if(t){s+=t;y.push(p);n+=f[k]||0}else{j=h.exec(f[m.width]);p.percentageParallel=parseFloat(j[1])/100;++w}}if(e.configured){q=f[m.width]}else{q=f[k]||0}r+=q;d=p[g];if(c&&d.calculated){j=h.exec(f[m.height]);p.percentagePerpendicular=parseFloat(j[1])/100;++z}if(d.configured){o=f[m.height]}else{o=f[x]||0}if(o>v){v=o}}l.flexedItems=y;l.flexedMinWidth=n;l.smallestWidth=r;l.smallestHeight=v;l.totalFlex=s;l.percentageWidths=w;l.percentageHeights=z;Ext.Array.sort(y,A.flexSortFn)},calculate:function(c){var g=this,f=c.boxNames,a=c.state,e=a.actualScroll,i=a.needsScroll,b=a.canScroll,h=a.boxPlan||(a.boxPlan={}),d=g.overflowHandler;h.targetSize=g.getContainerSize(c);if(b&&!i){a.needsScroll=i={parallel:b.parallel&&h.targetSize[f.width]<c.smallestWidth,perpendicular:b.perpendicular&&h.targetSize[f.height]<c.smallestHeight}}if(!a.parallelDone){a.parallelDone=g.calculateParallel(c,f,h)}if(!a.perpendicularDone){a.perpendicularDone=g.calculatePerpendicular(c,f,h)}if(a.parallelDone&&a.perpendicularDone){if(b&&!a.scrollPass){if(i.parallel!==e.parallel||i.perpendicular!==e.perpendicular){c.invalidate({state:{scrollPass:true,canScroll:b,needsScroll:e}});g.done=false;return}}g.publishInnerCtSize(c);if(g.done&&c.boxOptions.align.stretchmax&&!a.stretchMaxDone){g.calculateStretchMax(c,f,h);a.stretchMaxDone=true}if(d){d.calculate(c)}}else{g.done=false}},calculateParallel:function(w,K,B){var q=this,n=w.parallelSizeModel.shrinkWrap,C=K.width,g=w.childItems,s=K.beforeX,G=K.afterX,k=K.setWidth,z=g.length,v=w.flexedItems,F=v.length,p=w.boxOptions.pack,H=q.padding,b=B.targetSize,o=b[C],L=w.state,y=L.needsScroll,r=L.canScroll,A=0,h=H[s],E=h+H[G],t=Ext.getScrollbarSize(),e=t[K.width],a=t[K.height],I,x,f,l,m,j,c,J,D,u,d;if(!n&&!b[K.gotWidth]){return false}for(I=0;I<z;++I){m=g[I];x=m.marginInfo||m.getMarginInfo();A+=x[C];if(!m[K.widthModel].calculated){D=m.getProp(C);E+=D;if(isNaN(E)){return false}}}E+=A;if(w.percentageWidths){u=o-A;if(isNaN(u)){return false}for(I=0;I<z;++I){m=g[I];if(m.percentageParallel){D=Math.ceil(u*m.percentageParallel);D=m.setWidth(D);E+=D}}}if(n){d=0;B.tooNarrow=false}else{d=o-E;if(y&&y.perpendicular){d-=a}B.tooNarrow=d<w.flexedMinWidth;if(B.tooNarrow&&r&&r.parallel){L.actualScroll.parallel=true}}J=E;f=d;l=w.totalFlex;for(I=0;I<F;I++){m=v[I];j=m.flex;c=q.roundFlex((j/l)*f);c=m[k](c);J+=c;f=Math.max(0,f-c);l-=j}if(p.center){h+=f/2;if(h<0){h=0}}else{if(p.end){h+=f}}for(I=0;I<z;++I){m=g[I];x=m.marginInfo;h+=x[s];m.setProp(K.x,h);h+=x[G]+m.props[C]}J+=w.targetContext.getPaddingInfo()[C];w.state.contentWidth=J;if(y&&y.perpendicular){if(n){J+=e}w[K.hasOverflowY]=true;w.target.componentLayout[K.setWidthInDom]=true;w[K.invalidateScrollY]=Ext.isIE8}w[K.setContentWidth](J);return true},calculatePerpendicular:function(u,L,A){var s=this,P=u.state,w=P.needsScroll,t=P.canScroll,d=u.perpendicularSizeModel.shrinkWrap,b=A.targetSize,h=u.childItems,z=h.length,l=Math.max,k=L.height,m=L.setHeight,g=L.beforeY,r=L.y,I=s.padding,j=I[g],n=b[k]-j-I[L.afterY],F=u.boxOptions.align,o=F.stretch,p=F.stretchmax,O=F.center,N=F.bottom,H=s.constrainAlign,G=0,C=0,E=s.onBeforeConstrainInvalidateChild,B=s.onAfterConstrainInvalidateChild,a=Ext.getScrollbarSize().height,y,J,D,v,x,c,q,e,M,K,f;if(!d&&!b[L.gotHeight]){return false}if(o||((O||N)&&!d)){if(isNaN(n)){return false}}if(w&&w.parallel){if(d){K=true}else{n-=a;A.targetSize[k]-=a}}if(o){c=n;G=l(c,u.smallestHeight)}else{for(J=0;J<z;J++){q=h[J];v=(q.marginInfo||q.getMarginInfo())[k];if(!(f=q.percentagePerpendicular)){D=q.getProp(k)}else{++C;if(d){continue}else{D=f*n-v;D=q[L.setHeight](D)}}if(!d&&H&&q[L.heightModel].shrinkWrap&&D>n){q.invalidate({before:E,after:B,layout:s,childHeight:n,names:L});u.state.parallelDone=false}if(isNaN(G=l(G,D+v,q.target[L.minHeight]||0))){return false}}}if(K){G+=a;u[L.hasOverflowX]=true;u.target.componentLayout[L.setHeightInDom]=true;u[L.invalidateScrollX]=Ext.isIE8}e=u.stretchMaxPartner;if(e){u.setProp("maxChildHeight",G);M=e.childItems;if(M&&M.length){G=l(G,e.getProp("maxChildHeight"));if(isNaN(G)){return false}}}u[L.setContentHeight](G+s.padding[k]+u.targetContext.getPaddingInfo()[k]);if(K){G-=a}if(G>b[k]&&t&&t.perpendicular){P.actualScroll.perpendicular=true}A.maxSize=G;if(p){c=G}else{if(O||N||C){if(H){c=d?G:n}else{c=d?G:l(n,G)}c-=u.innerCtContext.getBorderInfo()[k]}}for(J=0;J<z;J++){q=h[J];v=q.marginInfo||q.getMarginInfo();y=j+v[g];if(o){q[m](c-v[k])}else{f=q.percentagePerpendicular;if(d&&f){v=q.marginInfo||q.getMarginInfo();D=f*c-v[k];D=q.setHeight(D)}if(O){x=c-q.props[k];if(x>0){y=j+Math[s.alignRoundingMethod](x/2)}}else{if(N){y=l(0,c-y-q.props[k])}}}q.setProp(r,y)}return true},onBeforeConstrainInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMin){b[c]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(b,a){var c=a.names;b.setProp(c.beforeY,0);if(b[c.heightModel].calculated){b[c.setHeight](a.childHeight)}},calculateStretchMax:function(c,j,l){var k=this,g=j.height,m=j.width,f=c.childItems,a=f.length,o=l.maxSize,n=k.onBeforeStretchMaxInvalidateChild,e=k.onAfterStretchMaxInvalidateChild,p,h,d,b;for(d=0;d<a;++d){p=f[d];h=p.props;b=o-p.getMarginInfo()[g];if(b!==h[g]||p[j.heightModel].constrained){p.invalidate({before:n,after:e,layout:k,childWidth:h[m],childHeight:b,childX:h.x,childY:h.y,names:j})}}},onBeforeStretchMaxInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMax){b[c]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(d,c){var e=c.names,a=c.childHeight,b=c.childWidth;d.setProp("x",c.childX);d.setProp("y",c.childY);if(d[e.heightModel].calculated){d[e.setHeight](a)}if(d[e.widthModel].calculated){d[e.setWidth](b)}},completeLayout:function(b){var i=this,h=b.invalidateScrollX,g=b.invalidateScrollY,c=i.overflowHandler,j=b.scrollRestore,e,a,f,d,k;if(c){c.completeLayout(b)}if(h||g){a=i.getTarget();e=a.dom;k=e.style;if(h){f=a.getStyle("overflowX");if(f==="auto"){f=k.overflowX;k.overflowX="scroll"}else{h=false}}if(g){d=a.getStyle("overflowY");if(d==="auto"){d=k.overflowY;k.overflowY="scroll"}else{g=false}}if(h||g){e.scrollWidth;if(h){k.overflowX=f}if(g){k.overflowY=d}}}if(j){b.ownerScrollable.scrollTo(j.x,j.y)}},finishedLayout:function(b){var a=this.overflowHandler;if(a){a.finishedLayout(b)}Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var h=Ext.layout.container.Container.prototype.getLayoutItems.call(this),b=h.length,e,d,c,j,g,f,a;for(c=0;c<b;++c){if((j=h[c]).isSplitter){continue}a=j.splitter;if(j.hidden){if(a){if(!a.hidden){a.hidden=true;if(a.el){a.el.hide()}}}continue}if(a){f=a.collapseTarget==="next"}else{f=false}d=null;if(e&&g){if(g.hidden){g.hidden=false;if(g.el){g.el.show()}}if(f){d=true}}else{if(f){d=!e}}if(d!==null&&a.hidden!==d){a.hidden=d;if(a.el){a.el.setVisible(!d)}}g=!f&&a;e=j}if(e&&g&&!g.hidden){g.hidden=true;if(g.el){g.el.hide()}}return h},getScrollerEl:function(){return this.innerCt},insertSplitter:function(d,c,f,b){var e={xtype:"splitter",id:d.id+"-splitter",hidden:f,splitterFor:d,synthetic:true},a=c+((b.collapseTarget==="prev")?1:0);e[this.names.height]="100%";if(b){Ext.apply(e,b)}d.splitter=this.owner.add(a,e)},publishInnerCtSize:function(b,d){d=d||0;var i=this,a=b.state,h=b.boxNames,g=h.height,k=h.width,f=b.boxOptions.align,m=i.padding,j=a.boxPlan,e=j.targetSize,o=j.maxSize,l=a.needsScroll,p=b.innerCtContext,c,n;if(b.parallelSizeModel.shrinkWrap||(j.tooNarrow&&a.canScroll)){c=a.contentWidth-b.targetContext.getPaddingInfo()[k]}else{c=e[k];if(l&&l.perpendicular){c-=Ext.getScrollbarSize()[k]}}c-=d;i.owner.tooNarrow=j.tooNarrow;if(f.stretch){n=o}else{n=j.maxSize+m[h.beforeY]+m[h.afterY]+p.getBorderInfo()[g];if(!b.perpendicularSizeModel.shrinkWrap&&(f.center||f.bottom)){n=Math.max(e[g],n)}}p[h.setWidth](c);p[h.setHeight](n);b.targetElContext.setWidth(b.innerCtContext.props.width-(i.vertical?0:(d||0)));if(isNaN(c+n)){i.done=false}},onAdd:function(d,a){var c=this,b=c.enableSplitters&&d.split&&!d.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(b){if(b===true){b={collapseTarget:"next"}}else{if(Ext.isString(b)){b={collapseTarget:b==="before"?"next":"prev"}}else{b=Ext.apply({collapseTarget:b.side==="before"?"next":"prev"},b)}}c.insertSplitter(d,a,!!d.hidden,b)}},onRemove:function(b,e){var f=this,h=f.names,a=f.owner,g=b.splitter,c=f.overflowHandler,d;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(g&&a.contains(g)){a.doRemove(g,true);b.splitter=null}if(c){c.onRemove(b)}if(b.layoutMarginCap===f.id){delete b.layoutMarginCap}if(!a.destroying&&!e&&b.rendered){d=b.getEl();if(d){d.setStyle(h.beforeY,"");d.setStyle(h.beforeX,"");d.setStyle("margin","")}}},applyOverflowHandler:function(b,a){var c;if(typeof b==="string"){b={type:b}}c=b.type;if(a&&a.type===b.type){delete b.type;a.setConfig(b);return a}b.layout=this;return Ext.Factory.boxOverflow(b)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler);a.flexSortFn=a.innerCt=null;Ext.layout.container.Container.prototype.destroy.call(this)},getRenderData:function(){var a=Ext.layout.container.Container.prototype.getRenderData.call(this);a.targetElCls=this.targetElCls;return a},updateVertical:function(b){var e=this,c=e.overflowHandler,a=e.owner,d=e._props;Ext.apply(e,b?d.vbox:d.hbox);if(c&&a&&a.rendered){c.setVertical(b)}},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:true,vertical:false,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:false,vertical:true,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:false},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:true},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));(Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave",afterShow:"activateFocusableContainerEl"}},isFocusableContainer:true,enableFocusableContainer:true,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(c){var b,d,a;if(this.enableFocusableContainer){c=c!=null?c:true;this.doInitFocusableContainer(c)}else{b=this.getFocusables();for(d=0,a=b.length;d<a;d++){b[d].focusableContainer=null}}},doInitFocusableContainer:function(a){var c=this,b,d;b=c.getFocusableContainerEl();if(a){c.clearFocusables()}d=c.findNextFocusableChild({step:1,beforeRender:true});if(d){c.activateFocusableContainerEl(b)}c.focusableContainerMouseListener=c.mon(b,"mousedown",c.onFocusableContainerMousedown,c);c.focusableKeyNav=c.createFocusableContainerKeyNav(b)},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{eventName:"keydown",ignoreInputFields:true,scope:b,tab:b.onFocusableContainerTabKey,enter:b.onFocusableContainerEnterKey,space:b.onFocusableContainerSpaceKey,up:b.onFocusableContainerUpKey,down:b.onFocusableContainerDownKey,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey})},destroyFocusableContainer:function(){if(this.enableFocusableContainer){this.doDestroyFocusableContainer()}},doDestroyFocusableContainer:function(){var a=this;if(a.keyNav){a.keyNav.destroy()}if(a.focusableContainerMouseListener){a.focusableContainerMouseListener.destroy()}a.focusableKeyNav=a.focusableContainerMouseListener=null},getFocusables:function(){return this.items.items},initDefaultFocusable:function(j){var f=this,h=f.activeChildTabIndex,c=false,e,g,b,d,a;e=f.getFocusables();d=e.length;if(!d){return}for(b=0;b<d;b++){g=e[b];if(g.focusable&&!g.disabled){c=true;a=g.getTabIndex();if(a!=null&&a>=h){return g}}}if(!c){return}g=f.findNextFocusableChild({beforeRender:j,items:e,step:true});if(g){f.activateFocusable(g)}return g},clearFocusables:function(){var e=this,b=e.getFocusables(),a=b.length,d,c;for(c=0;c<a;c++){d=b[c];if(d.focusable&&!d.disabled){e.deactivateFocusable(d)}}},activateFocusable:function(c,b){var a=b!=null?b:this.activeChildTabIndex;c.setTabIndex(a)},deactivateFocusable:function(c,b){var a=b!=null?b:this.inactiveChildTabIndex;c.setTabIndex(a)},onFocusableContainerTabKey:function(){return true},onFocusableContainerEnterKey:function(){return true},onFocusableContainerSpaceKey:function(){return true},onFocusableContainerUpKey:function(a){a.preventDefault();return this.moveChildFocus(a,false)},onFocusableContainerDownKey:function(a){a.preventDefault();return this.moveChildFocus(a,true)},onFocusableContainerLeftKey:function(a){a.preventDefault();return this.moveChildFocus(a,false)},onFocusableContainerRightKey:function(a){a.preventDefault();return this.moveChildFocus(a,true)},getFocusableFromEvent:function(a){var b=Ext.Component.fromElement(a.getTarget());return b},moveChildFocus:function(b,a){var c=this.getFocusableFromEvent(b);return this.focusChild(c,a,b)},focusChild:function(c,a){var b=this.findNextFocusableChild({child:c,step:a});if(b){b.focus()}return b},findNextFocusableChild:function(j){var h=j.beforeRender,e,g,a,b,f,c,d;e=j.items||this.getFocusables();b=j.step!=null?j.step:1;a=j.child;f=Ext.Array.indexOf(e,a);b=b===true?1:b===false?-1:b;d=e.length;c=b>0?(f<d?f+b:0):(f>0?f+b:d-1);for(;;c+=b){if(f<0&&(c>=d||c<0)){return null}else{if(c>=d){c=-1;continue}else{if(c<0){c=d;continue}else{if(c===f){return null}}}}g=e[c];if(!g||!g.focusable||g.disabled){continue}if(h||(g.isFocusable&&g.isFocusable())){return g}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(a){if(this.enableFocusableContainer){return this.doFocusableChildAdd(a)}},activateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:this.activeChildTabIndex})}},deactivateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:undefined})}},isFocusableContainerActive:function(){var d=this,c=false,b,e,a;b=d.getFocusableContainerEl();if(b&&b.isTabbable&&b.isTabbable()){c=true}else{e=d.lastFocusedChild;a=e&&e.getFocusEl&&e.getFocusEl();if(a&&a.isTabbable&&a.isTabbable()){c=true}}return c},doFocusableChildAdd:function(a){if(a.focusable){a.focusableContainer=this}},onFocusableChildRemove:function(a){if(this.enableFocusableContainer){return this.doFocusableChildRemove(a)}a.focusableContainer=null},doFocusableChildRemove:function(a){if(a===this.lastFocusedChild){this.lastFocusedChild=null;this.activateFocusableContainerEl()}},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);this.mousedownTimestamp=a===this?Ext.Date.now():0;if(a===this){c.preventDefault()}},onFocusEnter:function(c){var a=this,b=c.toComponent,d=a.mousedownTimestamp,g=50,f;if(!a.enableFocusableContainer){return null}a.mousedownTimestamp=0;if(b===a){if(!d||Ext.Date.now()-d>g){f=a.initDefaultFocusable();if(f){a.deactivateFocusableContainerEl();f.focus()}}}else{a.deactivateFocusableContainerEl()}return b},onFocusLeave:function(c){var b=this,a=b.lastFocusedChild;if(!b.enableFocusableContainer){return}if(!b.destroyed&&!b.destroying){b.clearFocusables();if(a&&!a.disabled){b.activateFocusable(a)}else{b.activateFocusableContainerEl()}}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(b){var a=this;if(!a.enableFocusableContainer){return}a.clearFocusables();a.activateFocusable(b);if(b.needArrowKeys){a.guardFocusableChild(b)}},guardFocusableChild:function(d){var c=this,a=c.activeChildTabIndex,b;b=c.findNextFocusableChild({child:d,step:-1});if(b){b.setTabIndex(a)}b=c.findNextFocusableChild({child:d,step:1});if(b){b.setTabIndex(a)}},afterFocusableChildFocus:function(a){if(!this.enableFocusableContainer){return}this.lastFocusedChild=a},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(b){var a=this;if(!a.enableFocusableContainer){return}if(b!==a.lastFocusedChild){a.deactivateFocusable(b);if(!a.isFocusableContainerActive()){a.activateFocusableContainerEl()}}},beforeFocusableChildDisable:function(c){var b=this,a;if(!b.enableFocusableContainer||b.destroying||b.destroyed){return}if(c.hasFocus){a=b.findNextFocusableChild({child:c})||c.findFocusTarget();if(a){a.focus()}}},onFocusableChildDisable:function(d){var c=this,a=c.lastFocusedChild,b;if(!c.enableFocusableContainer||c.destroying||c.destroyed){return}if(d===a){c.activateFocusableContainerEl()}b=c.findNextFocusableChild({step:1});if(!b){c.deactivateFocusableContainerEl()}},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0));(Ext.cmd.derive("Ext.toolbar.Toolbar",Ext.container.Container,{alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:undefined,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var c=this,b=c.layout,a=c.vertical;if(a===undefined){c.vertical=a=c.dock==="right"||c.dock==="left"}c.layout=b=Ext.applyIf(Ext.isString(b)?{type:b}:b||{},{type:a?"vbox":"hbox",align:a?"stretchmax":"middle"});if(c.overflowHandler){b.overflowHandler=c.overflowHandler}else{if(c.enableOverflow){b.overflowHandler="menu"}}if(a){c.addClsWithUI("vertical")}if(c.ui==="footer"){c.ignoreBorderManagement=true}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(a){var e=this,b=Ext.container.Container.prototype.getRefItems.apply(this,arguments),d=e.layout,c;if(a&&(e.enableOverflow||(e.overflowHandler==="menu"))){c=d.overflowHandler;if(c&&c.menu){b=b.concat(c.menu.getRefItems(a))}}return b},lookupComponent:function(e){var d=arguments,a,b;if(typeof e==="string"){b=Ext.toolbar.Toolbar;a=b.shortcutsHV[this.vertical?1:0][e]||b.shortcuts[e];if(typeof a==="string"){e={xtype:a}}else{if(a){e=Ext.apply({},a)}else{e={xtype:"tbtext",text:e}}}this.applyDefaults(e);d=[e]}return Ext.container.Container.prototype.lookupComponent.apply(this,d)},onBeforeAdd:function(b){var c=this,d=c.ui==="footer",a=d?c.defaultFooterButtonUI:c.defaultButtonUI;if(b.isSegmentedButton){if(b.getDefaultUI()==="default"&&!b.config.hasOwnProperty("defaultUI")){b.setDefaultUI(a)}}else{if(b.ui==="default"&&!b.hasOwnProperty("ui")){if(b.isButton){b.ui=a}else{if(b.isFormField){b.ui=d?c.defaultFooterFieldUI:c.defaultFieldUI}}}}if(b instanceof Ext.toolbar.Separator){b.setUI(c.vertical?"vertical":"horizontal")}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(a){if(a.needArrowKeys&&this.enableFocusableContainer){this.enableFocusableContainer=false}Ext.container.Container.prototype.onAdd.apply(this,arguments);this.trackMenu(a)},onRemove:function(a){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(a,true)},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return a},trackMenu:function(c,a){var b=this;if(b.trackMenus&&c.menu){c[a?"un":"on"]({mouseover:b.onButtonOver,menushow:b.onButtonMenuShow,menuhide:b.onButtonMenuHide,scope:b})}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(b,c){var a=this.activeMenuBtn;if(a&&a!==b){a.hideMenu();b.focus();b.showMenu(c);this.activeMenuBtn=b}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){this.activeMenuBtn=null}}},0,["toolbar"],["component","box","container","toolbar"],{component:true,box:true,container:true,toolbar:true},["widget.toolbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,"Toolbar",Ext,"Toolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",usePlainButtons:false,border:false});(Ext.cmd.derive("Ext.toolbar.Item",Ext.Component,{alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn},0,["tbitem"],["component","box","tbitem"],{component:true,box:true,tbitem:true},["widget.tbitem"],0,[Ext.toolbar,"Item",Ext.Toolbar,"Item"],0));(Ext.cmd.derive("Ext.toolbar.TextItem",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var a=this.text;Ext.toolbar.Item.prototype.beforeRender.call(this);if(a){this.html=a}},setText:function(a){this.update(a)}},0,["tbtext"],["component","box","tbitem","tbtext"],{component:true,box:true,tbitem:true,tbtext:true},["widget.tbtext"],0,[Ext.toolbar,"TextItem",Ext.Toolbar,"TextItem"],0));(Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var a=this;if(a.spinnerEl){a.spinnerEl.destroy();a.spinnerEl=a.upEl=a.downEl=null}Ext.form.trigger.Trigger.prototype.destroy.call(this)},getBodyRenderData:function(){var a=this;return{vertical:a.vertical,upDisabledCls:a.upEnabled?"":(a.spinnerUpCls+"-disabled"),downDisabledCls:a.downEnabled?"":(a.spinnerDownCls+"-disabled"),spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var b=this,a=arguments,d=b.clickRepeater?a[1]:a[0],c=b.field;if(!c.readOnly&&!c.disabled){if(b.upEl.contains(d.target)){Ext.callback(b.upHandler,b.scope,[c,b,d],0,c)}else{if(b.downEl.contains(d.target)){Ext.callback(b.downHandler,b.scope,[c,b,d],0,c)}}}c.inputEl.focus()},onFieldRender:function(){var b=this,a=b.vertical,d,c;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);d=b.spinnerEl=b.el.select("."+b.spinnerCls,true);c=d.elements;b.upEl=a?c[0]:c[1];b.downEl=a?c[1]:c[0]},setUpEnabled:function(a){this.upEl[a?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(a){this.downEl[a?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(b){var c=this,a=b.spinner;a.upEnabled=c.spinUpEnabled;a.downEnabled=c.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},onRender:function(){var b=this,a=b.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(b.keyNavEnabled){b.spinnerKeyNav=new Ext.util.KeyNav(b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}b.spinUpEl=a.upEl;b.spinDownEl=a.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setUpEnabled(a)}},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setDownEnabled(a)}},onMouseWheel:function(b){var a=this,c;if(a.hasFocus){c=b.getWheelDelta();if(c>0){a.spinUp()}else{if(c<0){a.spinDown()}}b.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");Ext.form.field.Text.prototype.onDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getSubTplData:function(c){var e=this,d=e.minValue,a=e.maxValue,g,b,f;g=Ext.form.field.Spinner.prototype.getSubTplData.call(this,c);b=g.inputElAriaAttributes;if(b){if(d>Number.NEGATIVE_INFINITY){b["aria-valuemin"]=d}if(a<Number.MAX_VALUE){b["aria-valuemax"]=a}f=e.getValue();if(f!=null&&f>=d&&f<=a){b["aria-valuenow"]=f}}return g},setValue:function(c){var b=this,d,a;if(b.hasFocus){d=b.getBind();a=d&&d.value;if(a&&a.syncing&&c===b.value){return b}}return Ext.form.field.Spinner.prototype.setValue.call(this,c)},getErrors:function(c){c=arguments.length>0?c:this.processRawValue(this.getRawValue());var b=this,e=Ext.form.field.Spinner.prototype.getErrors.call(this,c),d=Ext.String.format,a;if(c.length<1){return e}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){e.push(d(b.nanText,c))}a=b.parseValue(c);if(b.minValue===0&&a<0){e.push(this.negativeText)}else{if(a<b.minValue){e.push(d(b.minText,b.minValue))}}if(a>b.maxValue){e.push(d(b.maxText,b.maxValue))}return e},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=b.parseValue(c);c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(String(c).replace(a,"."));c=isNaN(c)?"":String(c).replace(".",a);return c},getSubmitValue:function(){var a=this,b=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!a.submitLocaleSeparator){b=b.replace(a.decimalSeparator,".")}return b},onChange:function(b){var a=this.ariaEl.dom;this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments);if(a){if(Ext.isNumber(b)&&isFinite(b)){a.setAttribute("aria-valuenow",b)}else{a.removeAttribute("aria-valuenow")}}},toggleSpinners:function(){var c=this,d=c.getValue(),b=d===null,a;if(c.spinUpEnabled||c.spinUpDisabledByToggle){a=b||d<c.maxValue;c.setSpinUpEnabled(a,true)}if(c.spinDownEnabled||c.spinDownDisabledByToggle){a=b||d>c.minValue;c.setSpinDownEnabled(a,true)}},setMinValue:function(d){var b=this,a=b.ariaEl.dom,c,e,a;b.minValue=c=Ext.Number.from(d,Number.NEGATIVE_INFINITY);b.toggleSpinners();if(a){if(c>Number.NEGATIVE_INFINITY){a.setAttribute("aria-valuemin",c)}else{a.removeAttribute("aria-valuemin")}}if(b.disableKeyFilter!==true){e=b.baseChars+"";if(b.allowExponential){e+=b.decimalSeparator+"e+-"}else{if(b.allowDecimals){e+=b.decimalSeparator}if(b.minValue<0){e+="-"}}e=Ext.String.escapeRegex(e);b.maskRe=new RegExp("["+e+"]");if(b.autoStripChars){b.stripCharsRe=new RegExp("[^"+e+"]","gi")}}},setMaxValue:function(b){var a=this.ariaEl.dom,c;this.maxValue=c=Ext.Number.from(b,Number.MAX_VALUE);if(a){if(c<Number.MAX_VALUE){a.setAttribute("aria-valuemax",c)}else{a.removeAttribute("aria-valuemax")}}this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(b||!d){return b?"":d}else{if(!c.allowDecimals||a<=0){a=0}}return parseFloat(Ext.Number.toFixed(parseFloat(d),a))},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(!Ext.isEmpty(a)){b.setValue(a)}Ext.form.field.Spinner.prototype.onBlur.call(this,c)},setSpinUpEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!a){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!a){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",getPagingItems:function(){var b=this,a={scope:b,blur:b.onPagingBlur};a[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=b.onPagingKeyDown;return[{itemId:"first",tooltip:b.firstText,overflowText:b.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:b.moveFirst,scope:b},{itemId:"prev",tooltip:b.prevText,overflowText:b.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:b.movePrevious,scope:b},"-",b.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:b.inputItemWidth,margin:"-1 2 3 2",listeners:a},{xtype:"tbtext",itemId:"afterTextItem",html:Ext.String.format(b.afterPageText,1)},"-",{itemId:"next",tooltip:b.nextText,overflowText:b.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:b.moveNext,scope:b},{itemId:"last",tooltip:b.lastText,overflowText:b.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:b.moveLast,scope:b},"-",{itemId:"refresh",tooltip:b.refreshText,overflowText:b.refreshText,iconCls:"x-tbar-loading",disabled:b.store.isLoading(),handler:b.doRefresh,scope:b}]},initComponent:function(){var b=this,a=b.items||b.buttons||[],c;b.bindStore(b.store||"ext-empty-store",true);c=b.getPagingItems();if(b.prependButtons){b.items=a.concat(c)}else{b.items=c.concat(a)}delete b.buttons;if(b.displayInfo){b.items.push("->");b.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);this.updateBarInfo()},updateBarInfo:function(){var a=this;if(!a.store.isLoading()){a.calledInternal=true;a.onLoad();a.calledInternal=false}},updateInfo:function(){var e=this,c=e.child("#displayItem"),a=e.store,b=e.getPageData(),d,f;if(c){d=a.getCount();if(d===0){f=e.emptyMsg}else{f=Ext.String.format(e.displayMsg,b.fromRecord,b.toRecord,b.total)}c.setText(f)}},onLoad:function(){var g=this,d,b,c,a,f,h,e;f=g.store.getCount();h=f===0;if(!h){d=g.getPageData();b=d.currentPage;c=d.pageCount;if(b>c){if(c>0){g.store.loadPage(c)}else{g.getInputItem().reset()}return}a=Ext.String.format(g.afterPageText,isNaN(c)?1:c)}else{b=0;c=0;a=Ext.String.format(g.afterPageText,0)}Ext.suspendLayouts();e=g.child("#afterTextItem");if(e){e.update(a)}e=g.getInputItem();if(e){e.setDisabled(h).setValue(b)}g.setChildDisabled("#first",b===1||h);g.setChildDisabled("#prev",b===1||h);g.setChildDisabled("#next",b===c||h);g.setChildDisabled("#last",b===c||h);g.setChildDisabled("#refresh",false);g.updateInfo();Ext.resumeLayouts(true);if(!g.calledInternal){g.fireEvent("change",g,d||g.emptyPageData)}},setChildDisabled:function(a,b){var c=this.child(a);if(c){c.setDisabled(b)}},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(b){var c=this.getInputItem(),d=false,a;if(c){a=c.getValue();d=parseInt(a,10);if(!a||isNaN(d)){c.setValue(b.currentPage);return false}}return d},onPagingBlur:function(c){var b=this.getInputItem(),a;if(b){a=this.getPageData().currentPage;b.setValue(a)}},onPagingKeyDown:function(b,a){this.processKeyEvent(b,a)},processKeyEvent:function(h,g){var d=this,c=g.getKey(),b=d.getPageData(),a=g.shiftKey?10:1,f;if(c===g.RETURN){g.stopEvent();f=d.readPageFromInput(b);if(f!==false){f=Math.min(Math.max(1,f),b.pageCount);if(f!==b.currentPage&&d.fireEvent("beforechange",d,f)!==false){d.store.loadPage(f)}}}else{if(c===g.HOME||c===g.END){g.stopEvent();f=c===g.HOME?1:b.pageCount;h.setValue(f)}else{if(c===g.UP||c===g.PAGE_UP||c===g.DOWN||c===g.PAGE_DOWN){g.stopEvent();f=d.readPageFromInput(b);if(f){if(c===g.DOWN||c===g.PAGE_DOWN){a*=-1}f+=a;if(f>=1&&f<=b.pageCount){h.setValue(f)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var c=this,a=c.store,b=a.currentPage-1;if(b>0){if(c.fireEvent("beforechange",c,b)!==false){a.previousPage();return true}}return false},moveNext:function(){var d=this,a=d.store,c=d.getPageData().pageCount,b=a.currentPage+1;if(b<=c){if(d.fireEvent("beforechange",d,b)!==false){a.nextPage();return true}}return false},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a);return true}return false},doRefresh:function(){var b=this,a=b.store,c=a.currentPage;if(b.fireEvent("beforechange",b,c)!==false){a.loadPage(c);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){if(this.rendered){this.updateBarInfo()}},onDestroy:function(){this.bindStore(null);Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Paging",{override:"Ext.toolbar.Paging",defaultButtonUI:"plain-toolbar",inputItemWidth:40});(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,refreshSelmodelOnRefresh:true,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:true,ariaEl:"listEl",tabIndex:-1,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',"x-",'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',">","</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusOnToFront:false,initComponent:function(){var b=this,a=b.baseCls,c=b.itemCls;b.selectedItemCls=a+"-selected";if(b.trackOver){b.overItemCls=a+"-item-over"}b.itemSelector="."+c;b.scrollerSelector="ul.x-list-plain";if(b.floating){b.addCls(a+"-floating")}if(!b.tpl){b.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+c+'">'+b.getInnerTpl(b.displayField)+"</li>","</tpl>")}else{if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}}if(b.pageSize){b.pagingToolbar=b.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this)},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var a=Ext.view.View.prototype.getRefItems.call(this),b=this.pagingToolbar;if(b){a.push(b)}return a},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var b=this,a=b.tpl;a.field=b.pickerField;a.store=b.store;Ext.view.View.prototype.refresh.call(this);a.field=a.store=null},bindStore:function(a,b){var c=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(c){c.bindStore(a,b)}},getInnerTpl:function(a){return"{"+a+"}"},onShow:function(){var a=this.pickerField;Ext.view.View.prototype.onShow.call(this);if(a&&a.rendered&&!a.hasFocus){a.focus()}},afterComponentLayout:function(c,a,b,e){var d=this.pickerField;Ext.view.View.prototype.afterComponentLayout.call(this,c,a,b,e);if(d&&d.alignPicker){d.alignPicker()}},onItemClick:function(a){var d=this,e=d.pickerField,b,c;if(!e){return}b=e.valueField;c=d.getSelectionModel().getSelection();if(!e.multiSelect&&c.length){c=c[0];if(c&&e.isEqual(a.get(b),c.get(b))&&e.collapse){e.collapse()}}},onContainerClick:function(b){var a=this.pagingToolbar;if(a&&a.rendered&&b.within(a.el)){return false}},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this);Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(a){a.finishRender()}}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:false,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",collapseOnSelect:false,hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var a=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);a.setHiddenValue(a.value)},multiSelect:false,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,clearValueOnEmpty:true,getGrowWidth:function(){var d=this,f=d.inputEl.dom.value,e,g,h,c,b,j,a;if(d.growToLongestValue){e=d.displayField;g=d.store;h=g.data.length;c=0;for(b=0;b<h;b++){j=g.getAt(b).data[e];a=j.length;if(a>c){c=a;f=j}}}return f},initComponent:function(){var e=this,c=Ext.isDefined,b=e.store,d=e.transform,a,f;if("pinList" in e){e.collapseOnSelect=!e.pinList}if(d){a=Ext.getDom(d);if(a){if(!e.store){b=Ext.Array.map(Ext.Array.from(a.options),function(g){return[g.value,g.text]})}if(!e.name){e.name=a.name}if(!("value" in e)){e.value=a.value}}}e.bindStore(b||"ext-empty-store",true,true);f=e.queryMode==="local";if(!c(e.queryDelay)){e.queryDelay=f?10:500}if(!c(e.minChars)){e.minChars=f?0:4}Ext.form.field.Picker.prototype.initComponent.call(this);e.doQueryTask=new Ext.util.DelayedTask(e.doRawQuery,e);if(a){if(e.transformInPlace){e.render(a.parentNode,a);delete e.renderTo}Ext.removeNode(a)}},getSubTplData:function(b){var c,a;c=Ext.form.field.Picker.prototype.getSubTplData.call(this,b);a=c.inputElAriaAttributes;if(a){a["aria-autocomplete"]="list"}return c},getSubTplMarkup:function(c){var d=this,a="",b=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(d.hiddenName){a='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+d.hiddenDataCls+'" role="presentation"></div>'}return a+b},applyDisplayTpl:function(b){var a=this;if(!b){b=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+a.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+a.getDelimiter()+"</tpl></tpl>");b.auto=true}else{if(!b.isTemplate){b=new Ext.XTemplate(b)}}return b},applyFilters:function(b,c){var a=this;if(b===null||b.isFilterCollection){return b}if(b){if(!c){c=this.getFilters()}c.beginUpdate();c.splice(0,c.length,b);c.each(function(d){d.ownerId=a.id});c.endUpdate()}return c},applyValueNotFoundText:function(a){var b=this,c=b.valueNotFoundRecord||(b.valueNotFoundRecord=new Ext.data.Model());c.set(b.displayField,a);if(b.valueField&&b.displayField!==b.valueField){c.set(b.valueField,a)}return a},getFilters:function(b){var a=this.filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on("endupdate","onEndUpdateFilters",c)}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(e){var d=this,f=d.filtered,c=!!e&&(e.length>0),a,b;if(f||c){d.filtered=c;a=[];b=d.store.getFilters();b.each(function(g){if(g.ownerId===d.id&&!e.contains(g)){a.push(g)}});b.splice(0,a,e.items)}},completeEdit:function(c){var b=this,a=b.queryFilter;Ext.form.field.Picker.prototype.completeEdit.call(this,c);b.doQueryTask.cancel();b.assertValue();if(a&&b.queryMode==="local"&&b.clearFilterOnBlur){b.getStore().getFilters().remove(a)}},onFocus:function(b){var a=this;Ext.form.field.Picker.prototype.onFocus.call(this,b);if(a.triggerAction!=="all"&&a.queryFilter&&a.queryMode==="local"&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},assertValue:function(){var b=this,c=b.getRawValue(),a=b.getDisplayValue(),d=b.lastSelectedRecords,e;if(b.forceSelection){if(b.multiSelect){if(c!==a){b.setRawValue(a)}}else{e=b.findRecordByDisplay(c);if(e){if(b.getDisplayValue([b.getRecordDisplayData(e)])!==a){b.select(e,true)}}else{if(d&&(!b.allowBlank||b.rawValue)){b.setValue(d)}else{if(d){delete b.lastSelectedRecords}b.setRawValue("")}}}}b.collapse()},onTypeAhead:function(){var e=this,d=e.displayField,b=e.store.findRecord(d,e.getRawValue()),c=e.getPicker(),f,a,g;if(b){f=b.get(d);a=f.length;g=e.getRawValue().length;c.highlightItem(c.getNode(b));if(g!==0&&g!==a){e.setRawValue(f);e.selectText(g,f.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this);if(a){this.getStore().getFilters().remove(a)}},onUnbindStore:function(){var c=this,a=c.picker,b=c.queryFilter;if(b&&!c.store.destroyed){c.changingFilters=true;c.getStore().removeFilter(b,true);c.changingFilters=false}c.pickerSelectionModel.destroy();if(a){a.bindStore(null)}},onBindStore:function(a,c){var e=this,b=e.picker,d,f;if(a){if(a.autoCreated){e.queryMode="local";e.valueField=e.displayField="field1";if(!a.expanded){e.displayField="field2"}if(e.getDisplayTpl().auto){e.setDisplayTpl(null)}}if(!Ext.isDefined(e.valueField)){e.valueField=e.displayField}d={byValue:{rootProperty:"data",unique:false}};d.byValue.property=e.valueField;a.setExtraKeys(d);if(e.displayField===e.valueField){a.byText=a.byValue}else{d.byText={rootProperty:"data",unique:false};d.byText.property=e.displayField;a.setExtraKeys(d)}f={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:e.valueField,rootProperty:"data"}},listeners:{beginupdate:e.onValueCollectionBeginUpdate,endupdate:e.onValueCollectionEndUpdate,scope:e}};e.valueCollection=new Ext.util.Collection(f);e.pickerSelectionModel=new Ext.selection.DataViewModel({mode:e.multiSelect?"SIMPLE":"SINGLE",deselectOnContainerClick:false,enableInitialSelection:false,pruneRemoved:false,selected:e.valueCollection,store:a,listeners:{scope:e,lastselectedchanged:e.updateBindSelection}});if(!c){e.resetToDefault()}if(b){b.setSelectionModel(e.pickerSelectionModel);if(b.getStore()!==a){b.bindStore(a)}}}},bindStore:function(a,e,b){var d=this,c=d.queryFilter;d.mixins.storeholder.bindStore.call(d,a,b);a=d.getStore();if(a&&c&&!e){a.getFilters().add(c)}if(!b&&a&&!a.isEmptyStore){d.setValueOnData()}},getStoreListeners:function(b){if(!b.isEmptyStore){var c=this,a={datachanged:c.onDataChanged,load:c.onLoad,exception:c.onException,update:c.onStoreUpdate,remove:c.checkValueOnChange};if(!b.getRemoteFilter()){a.filterchange=c.checkValueOnChange}return a}},onDataChanged:function(){if(this.grow&&this.growToLongestValue){this.autoSize()}},checkValueOnChange:function(){var a=this;if(!a.destroying&&a.getStore().isLoaded()){if(a.multiSelect){}else{if(a.forceSelection&&!a.changingFilters&&!a.findRecordByValue(a.value)){a.setValue(null)}}}},onStoreUpdate:function(b,a){this.updateValue()},onException:function(){this.collapse()},onLoad:function(c,b,e){var d=this,a=!d.valueCollection.byValue.get(d.value);if(e&&a&&!(c.lastOptions&&"rawQuery" in c.lastOptions)){d.setValueOnData()}d.checkValueOnChange()},setValueOnData:function(){var a=this;a.setValue(a.value);if(a.isExpanded&&a.getStore().getCount()){a.doAutoSelect()}},doRawQuery:function(){var a=this,b=a.inputEl.dom.value;if(a.multiSelect){b=b.split(a.delimiter).pop()}a.doQuery(b,false,true)},doQuery:function(g,c,f){var d=this,a=d.getStore(),e=a.filters&&!a.filters.length&&!!g,b=d.beforeQuery({query:g||"",rawQuery:f,forceAll:c,combo:d,cancel:false});if(b!==false&&!b.cancel){if(d.queryCaching&&!e&&b.query===d.lastQuery){d.getPicker().refresh();d.expand()}else{d.lastQuery=b.query;if(d.queryMode==="local"){d.doLocalQuery(b)}else{d.doRemoteQuery(b)}}}return true},beforeQuery:function(a){var b=this;if(b.fireEvent("beforequery",a)===false){a.cancel=true}else{if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=true}}}return a},doLocalQuery:function(b){var d=this,e=b.query,a=d.getStore(),c=d.queryFilter;d.queryFilter=null;d.changingFilters=true;if(c){a.removeFilter(c,true)}if(e){c=d.queryFilter=new Ext.util.Filter({id:d.id+"-filter",anyMatch:d.anyMatch,caseSensitive:d.caseSensitive,root:"data",property:d.displayField,value:d.enableRegEx?new RegExp(e):e});a.addFilter(c,true)}d.changingFilters=false;if(d.store.getCount()||d.getPicker().emptyText){d.getPicker().refresh();d.expand()}else{d.collapse()}d.afterQuery(b)},doRemoteQuery:function(b){var c=this,a=function(){if(!c.destroyed){c.afterQuery(b)}};c.expand();if(c.pageSize){c.loadPage(1,{rawQuery:b.rawQuery,callback:a})}else{c.store.load({params:c.getParams(b.query),rawQuery:b.rawQuery,callback:a})}},afterQuery:function(a){var b=this;if(b.store.getCount()){if(b.typeAhead){b.doTypeAhead()}if(a.rawQuery){if(b.picker&&!b.picker.getSelectionModel().hasSelection()){b.doAutoSelect()}}else{b.doAutoSelect()}}b.startCheckChangeTask()},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(c){var b={},a=this.queryParam;if(a){b[a]=c}return b},doAutoSelect:function(){var c=this,b=c.picker,a,d=0;if(b&&c.autoSelect&&c.store.getCount()>0){a=c.picker.getSelectionModel();if(a.lastSelected&&a.selected.length){d=a.lastSelected}b.getNavigationModel().setPosition(d)}},doTypeAhead:function(){var b=this,a=Ext.event.Event;if(!b.typeAheadTask){b.typeAheadTask=new Ext.util.DelayedTask(b.onTypeAhead,b)}if(b.lastKey!==a.BACKSPACE&&b.lastKey!==a.DELETE){b.typeAheadTask.delay(b.typeAheadDelay)}},onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{if(a.triggerAction==="last"){a.doQuery(a.lastQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}}}},onFieldMutation:function(g){var d=this,b=g.getKey(),c=b===g.BACKSPACE||b===g.DELETE,f=d.inputEl.dom.value,a=f.length;if(!d.readOnly&&(f!==d.lastMutatedValue||c)&&b!==g.TAB){d.lastMutatedValue=f;d.lastKey=b;if(a&&(g.type!=="keyup"||(!g.isSpecialKey()||c))){d.doQueryTask.delay(d.queryDelay)}else{if(!a&&(!b||c)){++d.suspendCheckChange;if(!d.multiSelect){d.value=null;d.displayTplData=undefined}if(d.clearValueOnEmpty){d.valueCollection.beginUpdate();d.pickerSelectionModel.deselectAll();d.valueCollection.removeAll();d.valueCollection.endUpdate()}d.collapse();if(d.queryFilter){d.changingFilters=true;d.store.removeFilter(d.queryFilter,true);d.changingFilters=false}--d.suspendCheckChange}Ext.form.field.Picker.prototype.onFieldMutation.call(this,g)}}},onDestroy:function(){var a=this;a.doQueryTask.cancel();if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);a.valueCollection=Ext.destroy(a.valueCollection);Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var a=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(a.picker){a.picker.ownerCt=a.up("[floating]");a.picker.registerWithOwnerCt()}},createPicker:function(){var c=this,b,a=Ext.apply({xtype:"boundlist",id:c.pickerId,pickerField:c,selectionModel:c.pickerSelectionModel,floating:true,hidden:true,store:c.getPickerStore(),displayField:c.displayField,preserveScrollOnRefresh:true,pageSize:c.pageSize,tpl:c.tpl},c.listConfig,c.defaultListConfig);b=c.picker=Ext.widget(a);if(c.pageSize){b.pagingToolbar.on("beforechange",c.onPageChange,c)}if(!b.initialConfig.maxHeight){b.on({beforeshow:c.onBeforePickerShow,scope:c})}b.getSelectionModel().on({beforeselect:c.onBeforeSelect,beforedeselect:c.onBeforeDeselect,focuschange:c.onFocusChange,scope:c});b.getNavigationModel().navigateOnSpace=false;return b},getPickerStore:function(){return this.store},onBeforePickerShow:function(a){var b=this,d=b.getPosition()[1]-Ext.getBody().getScroll().top,c=Ext.Element.getViewportHeight()-d-b.getHeight();a.maxHeight=Math.max(d,c)-5},onBeforeSelect:function(c,a,b){return this.fireEvent("beforeselect",this,a,b)},onBeforeDeselect:function(c,a,b){return this.fireEvent("beforedeselect",this,a,b)},onFocusChange:function(c,a,b){var d=this.picker,e;if(b){e=Ext.get(d.getNodeByRecord(b));if(e){this.ariaEl.dom.setAttribute("aria-activedescendant",e.id)}}},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getPicker().getSelectionModel();if(a){c.select(a);b.hasHadSelection=true}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var d=this,c=d.store,e=d.valueCollection.getRange(),b=e[0],a=e.length;d.updateBindSelection(d.pickerSelectionModel,e);if(d.isSelectionUpdating()){return}Ext.suspendLayouts();d.lastSelection=e;if(a){d.lastSelectedRecords=e}d.updateValue();if(a&&((!d.multiSelect&&c.contains(b))||d.collapseOnSelect||!c.getCount())){d.updatingValue=true;d.collapse();d.updatingValue=false}Ext.resumeLayouts(true);if(a&&!d.suspendCheckChange){if(!d.multiSelect){e=b}d.fireEvent("select",d,e)}},isSelectionUpdating:function(){var a=this.pickerSelectionModel;return a.deselectingDuringSelect||a.refreshing},onExpand:function(){var a=this.getPicker().getNavigationModel();if(a){a.enable()}this.doAutoSelect()},onCollapse:function(){var a=this.getPicker().getNavigationModel();if(a){a.disable()}if(this.updatingValue){this.doQueryTask.cancel()}},select:function(d,a){var c=this,b=c.picker,e;if(d&&d.isModel&&a===true&&b){e=!b.getSelectionModel().isSelected(d)}if(!e){c.suspendEvent("select")}c.setValue(d);c.resumeEvent("select")},findRecord:function(d,c){var b=this.store,a=b.findExact(d,c);return a!==-1?b.getAt(a):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(c){var a=this.store.byValue.get(c),b=false;if(a){b=a[0]||a}return b},findRecordByDisplay:function(c){var a=this.store.byText.get(c),b=false;if(a){b=a[0]||a}return b},addValue:function(a){if(a!=null){return this.doSetValue(a,true)}},setValue:function(b){var a=this;if(b!=null){return a.doSetValue(b)}else{a.suspendEvent("select");a.valueCollection.beginUpdate();a.pickerSelectionModel.deselectAll();a.valueCollection.endUpdate();a.lastSelectedRecords=null;a.resumeEvent("select")}},setRawValue:function(a){Ext.form.field.Picker.prototype.setRawValue.call(this,a);this.lastMutatedValue=a},doSetValue:function(p,l){var v=this,g=v.getStore(),h=g.getModel(),s=[],f=[],r=v.autoLoadOnValue,e=g.getCount()>0||g.isLoaded(),a=g.hasPendingLoad(),m=r&&!e&&!a,k=v.forceSelection,o=v.pickerSelectionModel,b=v.displayField===v.valueField,n=g.isEmptyStore,j=v.lastSelection,t,u,c,q,d,w;if(a||m||!e||n){if(!p.isModel){if(l){v.value=Ext.Array.from(v.value).concat(p)}else{v.value=p}v.setHiddenValue(v.value);v.setRawValue(b?p:"")}if(m&&!n){g.load()}if(!p.isModel||n){return v}}p=l?Ext.Array.from(v.value).concat(p):Ext.Array.from(p);for(t=0,u=p.length;t<u;t++){c=p[t];if(!c||!c.isModel){c=v.findRecordByValue(w=c);if(!c){c=v.valueCollection.find(v.valueField,w)}}if(!c){if(!k){if(!c&&p[t]){q={};q[v.displayField]=p[t];if(v.valueField&&v.displayField!==v.valueField){q[v.valueField]=p[t]}c=new h(q)}}else{if(v.valueNotFoundRecord){c=v.valueNotFoundRecord}}}if(c){s.push(c);f.push(c.get(v.valueField))}}if(j){u=j.length;if(u===s.length){for(t=0;!d&&t<u;t++){if(Ext.Array.indexOf(v.lastSelection,s[t])===-1){d=true}}}else{d=true}}else{d=s.length}if(d){v.suspendEvent("select");v.valueCollection.beginUpdate();if(s.length){o.select(s,false)}else{o.deselectAll()}v.valueCollection.endUpdate();v.resumeEvent("select")}else{v.updateValue()}if(v.inputEl&&v.emptyText){v.inputEl.removeCls(v.emptyCls);v.valueContainsPlaceholder=false}v.applyEmptyText();return v},updateValue:function(){var e=this,h=e.valueCollection.getRange(),a=h.length,d=[],f=e.displayTplData||(e.displayTplData=[]),g=e.inputEl,c,b;f.length=0;for(c=0;c<a;c++){b=h[c];f.push(e.getRecordDisplayData(b));if(b!==e.valueNotFoundRecord){d.push(b.get(e.valueField))}}e.setHiddenValue(d);e.value=e.multiSelect?d:d[0];if(!Ext.isDefined(e.value)){e.value=undefined}e.displayTplData=f;if(g&&e.emptyText&&!Ext.isEmpty(e.value)){g.removeCls(e.emptyCls)}e.setRawValue(e.getDisplayValue());e.checkChange();e.applyEmptyText()},setHiddenValue:function(h){var e=this,a=e.hiddenName,d,b,j,g,f,c;if(!e.hiddenDataEl||!a){return}h=Ext.Array.from(h);b=e.hiddenDataEl.dom;j=b.childNodes;g=j[0];f=h.length;c=j.length;if(!g&&f>0){e.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:a}));c=1;g=b.firstChild}while(c>f){b.removeChild(j[0]);--c}while(c<f){b.appendChild(g.cloneNode(true));++c}for(d=0;d<f;d++){j[d].value=h[d]}},getDisplayValue:function(a){a=a||this.displayTplData;return this.getDisplayTpl().apply(a)},getRecordDisplayData:function(a){return a.data},getValue:function(){var c=this,a=c.getStore(),b=c.picker,e=c.getRawValue(),d=c.value;if(!a.isEmptyStore&&c.getDisplayValue()!==e){c.displayTplData=undefined;if(b){c.valueCollection.suspendEvents();b.getSelectionModel().deselectAll();c.valueCollection.resumeEvents();c.lastSelection=null}if(a.isLoaded()&&(c.multiSelect||c.forceSelection)){d=c.value=undefined}else{d=c.value=e}}c.value=d==null?null:d;return c.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=""}return a},isEqual:function(e,d){var b=Ext.Array.from,c,a;e=b(e);d=b(d);a=e.length;if(a!==d.length){return false}for(c=0;c<a;c++){if(d[c]!==e[c]){return false}}return true},clearValue:function(){this.setValue(null)}},0,["combo","combobox"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));Ext.define("FBEditor.override.form.field.ComboBox",{override:"Ext.form.field.ComboBox",createPicker:function(){var b=this,a;a=(arguments.callee.$previous||Ext.form.field.Picker.prototype.createPicker).apply(this,arguments);a.fireHierarchyEvent=function(c){};return a}});(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;a.target=b;b.on("beforedestroy",a.disable,a);a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;if(b){b.un("beforedestroy",a.disable,a)}a.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(a.is(this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(c,b){var e=this,a=e.items,d=e.addHandler;if(!e.disabled){if(d){d.call(e.scope||b,b)}if(a){a.add(b)}}},onItemRemove:function(c,b){var e=this,a=e.items,d=e.removeHandler;if(!e.disabled){if(d){d.call(e.scope||b,b)}if(a){a.remove(b)}}},onContainerAdd:function(f,b){var j=this,h,g,c=j.handleAdd,a=j.handleRemove,d,e;if(f.isContainer){f.on("add",c,j);f.on("dockedadd",c,j);f.on("remove",a,j);f.on("dockedremove",a,j)}if(b!==true){h=f.query(j.selector);for(d=0,g=h.length;d<g;++d){e=h[d];j.onItemAdd(e.ownerCt,e)}}h=f.query(">container");for(d=0,g=h.length;d<g;++d){j.onContainerAdd(h[d],true)}},handleRemove:function(b,a){var c=this;if(!c.disabled){if(a.is(c.selector)){c.onItemRemove(b,a)}if(a.isQueryable){c.onContainerRemove(b,a)}}},onContainerRemove:function(e,c){var g=this,b,d,a,f;if(!c.destroyed&&!c.destroying&&c.isContainer){g.removeCtListeners(c);b=c.query(g.selector);for(d=0,a=b.length;d<a;++d){f=b[d];g.onItemRemove(f.ownerCt,f)}b=c.query("container");for(d=0,a=b.length;d<a;++d){g.removeCtListeners(b[d])}}else{g.invalidateItems(true)}},removeCtListeners:function(a){var b=this;a.un("add",b.handleAdd,b);a.un("dockedadd",b.handleAdd,b);a.un("remove",b.handleRemove,b);a.un("dockedremove",b.handleRemove,b)},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(c){var b=this,a=b.invalidateHandler;if(c&&a){a.call(b.scope||b,b)}b.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:"[isFormField]:not([excludeForm])",addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(b){var a=b.fieldDefaults,c=this.fieldDefaults;if(c){if(a){b.fieldDefaults=Ext.apply(Ext.Object.chain(a),c)}else{b.fieldDefaults=c}}},onChildFieldAdd:function(b){var a=this;a.mon(b,"errorchange",a.handleFieldErrorChange,a);a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,"errorchange",a.handleFieldErrorChange,a);a.mun(b,"validitychange",a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(c,b){var a=this;if(c!==a){a.fireEvent("fieldvaliditychange",a,c,b);a.onFieldValidityChange(c,b)}},handleFieldErrorChange:function(b,a){var c=this;if(b!==c){c.fireEvent("fielderrorchange",c,b,a);c.onFieldErrorChange(b,a)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(b){var a=this.owner.containerEl;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);b.hasRawContent=true;a.setStyle("width","");a.setStyle("height","");b.containerElContext=b.getEl("containerEl")},measureContentHeight:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(c,b){var a=this.owner;if(a.labelAlign==="top"&&a.hasVisibleLabel()){b-=a.labelEl.getHeight()}if(a.msgTarget==="under"&&a.hasActiveError()){b-=a.errorWrapEl.getHeight()}b-=a.bodyEl.getPadding("tb");c.containerElContext.setHeight(b)},publishInnerWidth:function(c,b){var a=this.owner;if(a.labelAlign!=="top"&&a.hasVisibleLabel()){b-=(a.labelWidth+(a.labelPad||0))}if(a.msgTarget==="side"&&a.hasActiveError()){b-=a.errorWrapEl.getWidth()}b-=a.bodyEl.getPadding("lr");c.containerElContext.setWidth(b)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:true,autoEl:{tag:"div",role:"presentation"},childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var a=this;a.initLabelable();a.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);a.initMonitor()},onAdd:function(a){var b=this;if(a.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&b.layout.type==="absolute"&&!b.hideLabel&&b.labelAlign!=="top"){a.x+=(b.labelWidth+b.labelPad)}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(a.isLabelable&&b.combineLabels){a.oldHideLabel=a.hideLabel;a.hideLabel=true}b.updateLabel()},onRemove:function(a,b){var c=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!b){if(a.isLabelable&&c.combineLabels){a.hideLabel=a.oldHideLabel}c.updateLabel()}},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.containerElCls=a.containerElCls;b=Ext.applyIf(b,a.getLabelableRenderData());b.tipAnchorTarget=a.id+"-containerEl";return b},getFieldLabel:function(){var a=this.fieldLabel||"";if(!a&&this.combineLabels){a=Ext.Array.map(this.query("[isFieldLabelable]"),function(b){return b.getFieldLabel()}).join(this.labelConnector)}return a},getSubTplData:function(){var a=this.initRenderData();Ext.apply(a,this.subTplData);return a},getSubTplMarkup:function(b){var d=this,a=d.getTpl("fieldSubTpl"),c;if(!a.renderContent){d.setupRenderTpl(a)}c=a.apply(d.getSubTplData(b));return c},updateLabel:function(){var b=this,a=b.labelEl;if(a){b.setFieldLabel(b.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var c=this,d=c.getActiveError(),b=Ext.Array.filter(c.query("[isFormField]"),function(e){return e.hasActiveError()}),a=c.getCombinedErrors(b);if(a){c.setActiveErrors(a)}else{c.unsetActiveError()}if(d!==c.getActiveError()){c.updateLayout()}}},getCombinedErrors:function(e){var k=[],c,l=e.length,i,d,j,b,g,h;for(c=0;c<l;c++){i=e[c];d=i.getActiveErrors();b=d.length;for(j=0;j<b;j++){g=d[j];h=i.getFieldLabel();k.push((h?h+": ":"")+g)}}return k},privates:{applyTargetCls:function(b){var a=this.containerElCls;this.containerElCls=a?a+" "+b:b},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:false,_verticalSides:{left:1,right:1},initComponent:function(){var b=this,a=b.vertical;b.dock=b.dock||(a?"left":"top");b.layout=Ext.apply(a?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},b.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(b,c,a){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,b,c,a)},onRemoved:function(a){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,a)},beforeRender:function(){var a=this;if(a.forceOrientation||!a.ownerCt){a.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(d){var c=this,b,a;if(d!==c.dock){Ext.suspendLayouts();c.clearOrientation();Ext.container.Container.prototype.setDock.call(this,d);c.initOrientation();a=c.vertical;b=c.layout;b.setVertical(a);b.setAlignRoundingMethod(a?"ceil":"floor");Ext.resumeLayouts(true)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var c=this,b=c.dock,a=(c.vertical=(b?b in c._verticalSides:c.vertical));c.addClsWithUI([a?"vertical":"horizontal",c.getDockName()])}}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[Ext.panel,"Bar"],0));(Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var d=this,b=d.getRotation(),a,e,c;if(b&&!Ext.isIE8){c=d.el;a=d.lastBox;e=a.x;c.setStyle(d._getVerticalAdjustDirection(),(e+((b===1)?a.width:-a.height))+"px")}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var c=this,a=c.getRotation(),b=c.el;Ext.Component.prototype.onRender.call(this);if(a){b.setVertical(c._rotationAngles[a])}if(Ext.supports.FixedTableWidthBug){b._needsTableWidthFix=true}},applyText:function(a){if(!a){a="&#160;"}return a},beforeRender:function(){var a=this;Ext.Component.prototype.beforeRender.call(this);a.addCls(a._rotationClasses[a.getRotation()]);a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var f=this,c=f.getIcon(),b=f.getIconCls(),e=f.getGlyph(),g=Ext._glyphFontFamily,a=f.getIconAlign(),d;if(typeof e==="string"){d=e.split("@");e=d[0];g=d[1]}return{id:f.id,ui:f.ui,itemCls:f._itemCls,iconUrl:c,iconCls:b,iconWrapCls:f._iconWrapCls,baseIconCls:f._baseIconCls,iconAlignCls:f._iconAlignClasses[a],glyph:e,glyphCls:e?f._glyphCls:"",glyphFontFamily:g}},initRenderData:function(){var b=this,a,c;c=Ext.apply({text:b.getText(),textElRole:b.textElRole,id:b.id,ui:b.ui,itemCls:b._itemCls,textCls:b._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(b._hasIcon()){a=b.getIconAlign();c.iconMarkup=b.getIconMarkup();c.iconBeforeTitle=(a==="top"||a==="left")}return c},onAdded:function(b,f,a){var d=this,e=d._titleSuffix,c=b.baseCls;d.addCls([c+e,c+e+"-"+b.ui]);Ext.Component.prototype.onAdded.call(this,b,f,a)},updateGlyph:function(f,c){f=f||0;var e=this,g=e._glyphCls,b,a,d;e.glyph=f;if(e.rendered){e._syncIconVisibility();b=e.iconEl;if(typeof f==="string"){d=f.split("@");f=d[0];a=d[1]||Ext._glyphFontFamily}if(!f){b.dom.innerHTML="";b.removeCls(g)}else{if(c!==f){b.dom.innerHTML="&#"+f+";";b.addCls(g)}}if(a){b.setStyle("font-family",a)}if(e._didIconStateChange(c,f)){e.updateLayout()}}},updateIcon:function(b,d){b=b||"";var c=this,a;if(c.rendered&&b!==d){c._syncIconVisibility();a=c.iconEl;a.setStyle("background-image",b?"url("+b+")":"");if(c._didIconStateChange(d,b)){c.updateLayout()}}},updateIconAlign:function(f,c){var b=this,e=b.iconWrapEl,a,d;if(b.iconWrapEl){a=b.el;d=b._iconAlignClasses;if(c){e.removeCls(d[c])}e.addCls(d[f]);if(f==="top"||f==="left"){a.insertFirst(e)}else{a.appendChild(e)}b.updateLayout()}},updateIconCls:function(b,c){b=b||"";var d=this,a;if(d.rendered&&c!==b){d._syncIconVisibility();a=d.iconEl;if(c){a.removeCls(c)}a.addCls(b);if(d._didIconStateChange(c,b)){d.updateLayout()}}},updateRotation:function(b,a){var d=this,c,e;if(d.rendered){c=d.el;e=d._rotationClasses;d.removeCls(e[a]);d.addCls(e[b]);c.setHorizontal();if(b){c.setVertical(d._rotationAngles[b])}c.setStyle({right:"",left:"",top:"",height:"",width:""});d.lastBox=null;d.updateLayout()}},updateText:function(a){if(this.rendered){this.textEl.setHtml(a);this.updateLayout()}},updateTextAlign:function(d,b){var a=this,c=a._textAlignClasses;if(a.rendered){if(b){a.removeCls(c[b])}a.addCls(c[d]);a.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var e=this,d=e.el,a=e._hasIcon(),f=e.iconWrapEl,c,b;if(a&&!f){b=e.iconAlign;c=(b==="left"||b==="top");d.dom.insertAdjacentHTML(c?"afterbegin":"beforeend",e.getIconMarkup());f=e.iconWrapEl=d[c?"first":"last"]();e.iconEl=f.first()}if(f){f.setDisplayed(a)}}}},0,["title"],["component","box","title"],{component:true,box:true,title:true},["widget.title"],0,[Ext.panel,"Title"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:true,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,ariaRole:"button",focusable:true,tabIndex:0,keyHandlers:{SPACE:"onClick",ENTER:"onClick"},cacheHeight:true,cacheWidth:true,initComponent:function(){var a=this;a.type=a.type||a.id;Ext.applyIf(a.renderData,{baseCls:a.baseCls,type:a.type});a.tooltip=a.tooltip||a.qtip;Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a});b=a.tooltip;if(b){a.setTooltip(b)}},tipAttrs:{qtip:"data-qtip"},setTooltip:function(g,d){var e=this,b=e.tooltip,f=e.tooltipType,h=e.id,c=e.el,a;if(b&&Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.unregister(h)}e.tooltip=g;if(d){e.tooltipType=d}if(g){if(Ext.quickTipsActive&&Ext.isObject(g)){Ext.tip.QuickTipManager.register(Ext.apply({target:h},g))}else{if(c){if(d&&f&&d!==f){a=e.tipAttrs[f]||"title";c.dom.removeAttribute(a)}a=e.tipAttrs[d||f]||"title";c.dom.setAttribute(a,g)}}if(a!=="title"&&e.ariaRole&&e.ariaRole!=="presentation"){if(c){c.dom.setAttribute("aria-label",g)}else{e.ariaRenderAttributes=e.ariaRenderAttributes||{};e.ariaRenderAttributes["aria-label"]=g}}}},setType:function(a){var b=this,c=b.type;b.type=a;if(b.rendered){if(c){b.toolEl.removeCls(b.baseCls+"-"+c)}b.toolEl.addCls(b.baseCls+"-"+a)}else{b.renderData.type=a}return b},onDestroy:function(){var a=this,b=a.keyMap;a.setTooltip(null);delete a.toolOwner;Ext.Component.prototype.onDestroy.call(this)},privates:{onClick:function(c,b){var a=this;if(a.disabled){return false}if(c.type!=="keydown"){a.el.removeCls(a.toolPressedCls+" "+a.toolOverCls)}if(a.stopEvent!==false){c.stopEvent()}if(a.handler){Ext.callback(a.handler,a.scope,[c,b,a.ownerCt,a],0,a)}else{if(a.callback){Ext.callback(a.callback,a.scope,[a.toolOwner||a.ownerCt,a,c],0,a)}}a.fireEvent("click",a,c,a.toolOwner||a.ownerCt);return true},onMouseDown:function(a){a.preventDefault();if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(b,a){if(typeof b!=="object"){b={text:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var d=this,c=d.items,b=d.itemPosition,a=[d.headerCls];d.tools=d.tools||[];d.items=c=(c?c.slice():[]);if(b!==undefined){d._userItems=c.slice();d.items=c=[]}d.indicateDragCls=d.headerCls+"-draggable";if(d.indicateDrag){a.push(d.indicateDragCls)}d.addCls(a);d.syncNoBorderCls();d.enableFocusableContainer=!d.isAccordionHeader&&d.tools.length>0;if(d.enableFocusableContainer){d.ariaRole="toolbar"}Ext.Array.push(c,d.tools);d.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);d.on({dblclick:d.onDblClick,click:d.onClick,element:"el",scope:d})},addTool:function(a){var b=this;b.add(Ext.ComponentManager.create(a,"tool"));if(!b.isAccordionHeader&&b.tools.length>0&&!b.enableFocusableContainer){b.enableFocusableContainer=true;b.ariaRole="toolbar";if(b.rendered){b.ariaEl.dom.setAttribute("role","toolbar");b.initFocusableContainer(true)}}},afterLayout:function(){var b=this,e,a,c,d;if(b.vertical){a=b.frameTR;if(a){e=b.frameBR;c=b.frameTL;d=(b.getWidth()-a.getPadding("r")-((c)?c.getPadding("l"):b.el.getBorderWidth("l")))+"px";e.setStyle("background-position-x",d);a.setStyle("background-position-x",d)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(e,c){var d=this,a,b;e=e||"";a=typeof e==="string";if(a){e={text:e}}if(c){Ext.suspendLayouts();c.setConfig(e);Ext.resumeLayouts(true);e=c}else{if(a){e.xtype="title"}e.ui=d.ui;b=("rotation" in e);e.id=d.id+"-title";if(d.isAccordionHeader){e.ariaRole="tab";e.textElRole=null;e.focusable=true}e=Ext.create(e);if(!b&&d.vertical&&d.titleRotation==="default"){e.rotation=1}}return e},applyTitlePosition:function(b){var a=this.items.getCount();if(this._titleInItems){--a}return Math.max(Math.min(b,a),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var b=this,a=b.itemPosition;b.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(a!==undefined){b.insert(a,b._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(b,a){var c=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,b,a);if(b.isTool){c.push(b);c[b.type]=b}},onAdded:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,b,c,a)},onRemoved:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,b,c,a)},setDock:function(c){var b=this,e=b.getTitle(),a=b.getTitleRotation(),d=e.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,c);if(a==="default"){a=(b.vertical?1:0);if(a!==d){e.setRotation(a)}if(b.rendered){b.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(b,a){this.getTitle().setIconAlign(b)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(b,a){if(!a){this.insert(this.getTitlePosition(),b);this._titleInItems=true}this.titleCmp=b},updateTitleAlign:function(b,a){this.getTitle().setTextAlign(b)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){if(a==="default"){a=(this.vertical?1:0)}this.getTitle().setRotation(a)},privates:{fireClickEvent:function(a,c){var b="."+Ext.panel.Tool.prototype.baseCls;if(!c.getTarget(b)){this.fireEvent(a,this,c)}},getFramingInfoCls:function(){var c=this,b=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),a=c.ownerCt;if(!c.expanding&&a&&(a.collapsed||c.isCollapsedExpander)){b+="-"+a.collapsedCls}return b+"-"+c.dock},onClick:function(a){this.fireClickEvent("click",a)},onDblClick:function(a){this.fireClickEvent("dblclick",a)},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);if(a===this){c.preventDefault()}else{this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)}},syncBeforeAfterTitleClasses:function(c){var j=this,h=j.items,f=h.items,b=j.getTitlePosition(),a=f.length,g=h.generation,k=j.syncBeforeAfterGen,m,e,d,l;if(!c&&(k===g)){return}j.syncBeforeAfterGen=g;for(d=0;d<a;++d){l=f[d];m=l.afterTitleCls||(l.afterTitleCls=l.baseCls+"-after-title");e=l.beforeTitleCls||(l.beforeTitleCls=l.baseCls+"-before-title");if(!j.title||d<b){if(k){l.removeCls(m)}l.addCls(e)}else{if(d>b){if(k){l.removeCls(e)}l.addCls(m)}}}},syncNoBorderCls:function(){var b=this,a=this.ownerCt,c=b.headerCls+"-noborder";if(a?(a.border===false&&!a.frame):b.border===false){b.addCls(c)}else{b.removeCls(c)}}}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,triggerEvent:"mousedown",b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(e,b,k){if(Ext.isNumber(b)){b={left:b,right:b,top:b,bottom:b}}b=b||this.defaultPadding;var g=Ext.get(this.getEl()).getBox(),l=Ext.get(e),j=l.getScroll(),f,h=l.dom,i,d,a;if(h===document.body){f={x:j.left,y:j.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else{i=l.getXY();f={x:i[0],y:i[1],width:h.clientWidth,height:h.clientHeight}}d=g.y-f.y;a=g.x-f.x;this.resetConstraints();this.setXConstraint(a-(b.left||0),f.width-a-g.width-(b.right||0),this.xTickSize);this.setYConstraint(d-(b.top||0),f.height-d-g.height-(b.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(d,a,b){var c=this;c.el=c.el||Ext.get(d);c.initTarget(d,a,b);Ext.get(c.id).on(c.triggerEvent,c.handleMouseDown,c)},initTarget:function(c,a,b){this.config=b||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof c!=="string"){c=Ext.id(c)}this.id=c;this.addToGroup((a)?a:"default");this.handleElId=c;this.setDragElId(c);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(c,a,d,b){if(!a&&0!==a){this.padding=[c,c,c,c]}else{if(!d&&0!==d){this.padding=[c,a,c,a]}else{this.padding=[c,a,d,b]}}},setInitPosition:function(d,c){var e=this.getEl(),b,a,f;if(!this.DDMInstance.verifyEl(e)){return}b=d||0;a=c||0;f=Ext.fly(e).getXY();this.initPageX=f[0]-b;this.initPageY=f[1]-a;this.lastPageX=f[0];this.lastPageY=f[1];this.setStartPosition(f)},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=true;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){var b=this,a;if(b._domRef){a=Ext.fly(b.id);if(a){a.un(b.triggerEvent,b.handleMouseDown,b)}}b._domRef=null;b.DDMInstance._remove(b,b.autoGroup)},destroy:function(){this.unreg();this.callParent()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(c,b){var a=this;if((a.primaryButtonOnly&&c.button)||a.isLocked()){return}a.DDMInstance.refreshCache(a.groups);if(a.hasOuterHandles||a.DDMInstance.isOverTarget(c.getPoint(),a)){if(a.clickValidator(c)){a.setStartPosition();a.b4MouseDown(c);a.onMouseDown(c);a.DDMInstance.handleMouseDown(c,a);a.DDMInstance.stopEvent(c)}}},clickValidator:function(b){var a=b.getTarget();return(this.isValidHandleChild(a)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(a,this.id)))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(b){var d=this.invalidHandleClasses,a=d.length,c;for(c=0;c<a;++c){if(d[c]===b){delete d[c]}}},isValidHandleChild:function(d){var c=true,g,b,a;try{g=d.nodeName.toUpperCase()}catch(f){g=d.nodeName}c=c&&!this.invalidHandleTypes[g];c=c&&!this.invalidHandleIds[d.id];for(b=0,a=this.invalidHandleClasses.length;c&&b<a;++b){c=!Ext.fly(d).hasCls(this.invalidHandleClasses[b])}return c},setXTicks:function(d,a){this.xTicks=[];this.xTickSize=a;var c={},b;for(b=this.initPageX;b>=this.minX;b=b-a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}for(b=this.initPageX;b<=this.maxX;b=b+a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,a){this.yTicks=[];this.yTickSize=a;var c={},b;for(b=this.initPageY;b>=this.minY;b=b-a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}for(b=this.initPageY;b<=this.maxY;b=b+a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(a,c,b){this.topConstraint=a;this.bottomConstraint=c;this.minY=this.initPageY-a;this.maxY=this.initPageY+c;if(b){this.setYTicks(this.initPageY,b)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var b=(this.maintainOffset)?this.lastPageX-this.initPageX:0,a=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(b,a)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(g,d){if(!d){return g}else{if(d[0]>=g){return d[0]}else{var b,a,c,f,e;for(b=0,a=d.length;b<a;++b){c=b+1;if(d[c]&&d[c]>=g){f=g-d[b];e=d[c]-g;return(e>f)?d[b]:d[c]}}return d[d.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},scroll:true,autoOffset:function(c,b){var a=c-this.startPageX,d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(b,e,c){var f=this.getTargetCoord(e,c),d=b.dom?b:Ext.fly(b,"_dd"),k=d.getSize(),h=Ext.Element,i,a,j,g;if(!this.deltaSetXY){i=this.cachedViewportSize={width:h.getDocumentWidth(),height:h.getDocumentHeight()};a=[Math.max(0,Math.min(f.x,i.width-k.width)),Math.max(0,Math.min(f.y,i.height-k.height))];d.setXY(a);j=this.getLocalX(d);g=d.getLocalY();this.deltaSetXY=[j-f.x,g-f.y]}else{i=this.cachedViewportSize;this.setLocalXY(d,Math.max(0,Math.min(f.x+this.deltaSetXY[0],i.width-k.width)),Math.max(0,Math.min(f.y+this.deltaSetXY[1],i.height-k.height)))}this.cachePosition(f.x,f.y);this.autoScroll(f.x,f.y,b.offsetHeight,b.offsetWidth);return f},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.fly(this.getEl()).getXY();this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(k,j,e,l){if(this.scroll){var m=Ext.Element.getViewportHeight(),b=Ext.Element.getViewportWidth(),o=this.DDMInstance.getScrollTop(),d=this.DDMInstance.getScrollLeft(),i=e+j,n=l+k,g=(m+o-j-this.deltaY),f=(b+d-k-this.deltaX),c=40,a=(document.all)?80:30;if(i>m&&g<c){window.scrollTo(d,o+a)}if(j<o&&o>0&&j-o<c){window.scrollTo(d,o-a)}if(n>b&&f<c){window.scrollTo(d+a,o)}if(k<d&&d>0&&k-d<c){window.scrollTo(d-a,o)}}},getTargetCoord:function(c,b){var a=c-this.deltaX,d=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}a=this.getTick(a,this.xTicks);d=this.getTick(d,this.yTicks);return{x:a,y:d}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return("DD "+this.id)},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(b,a,c){b.setLocalXY(a,c)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var b=this,a=document.body,d,c;if(!a||!a.firstChild){Ext.defer(function(){b.createFrame()},50);return}d=this.getDragEl();if(!d){d=document.createElement("div");d.id=this.dragElId;d.setAttribute("role","presentation");c=d.style;c.position="absolute";c.visibility="hidden";c.cursor="move";c.border="2px solid #aaa";c.zIndex=999;a.insertBefore(d,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,d){var c=this,a=c.getDragEl(),b=a.style;c._resizeProxy();if(c.centerFrame){c.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}c.setDragElPos(e,d);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d);this.setDragElPos(a,d)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl(),a=this.getDragEl();a.style.visibility="";this.beforeMove();b.style.visibility="hidden";Ext.dd.DDM.moveToEl(b,a);a.style.visibility="hidden";b.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",skipLayout:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,{hideMode:"visibility",hidden:true,floating:true,id:b.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:a.shadow||false,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!==a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(b){var c=this,a="x-dd-drag-proxy ";c.el.replaceCls(a+c.dropAllowed,a+c.dropNotAllowed);c.dropStatus=c.dropNotAllowed;if(b){c.ghost.setHtml("")}},update:function(a){if(typeof a==="string"){this.ghost.setHtml(a)}else{this.ghost.setHtml("");a.style.margin="0";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(a){Ext.Component.prototype.hide.call(this);if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.syncUnderlays()},repair:function(c,d,a){var b=this;b.callback=d;b.scope=a;if(c&&b.animRepair!==false){b.el.addCls(b.repairCls);b.el.setUnderlaysVisible(false);b.anim=b.el.animate({duration:b.repairDuration||500,easing:"ease-out",to:{x:c[0],y:c[1]},stopAnimation:true,callback:b.afterRepair,scope:b})}else{b.afterRepair()}},afterRepair:function(){var a=this;a.hide(true);a.el.removeCls(a.repairCls);if(typeof a.callback==="function"){a.callback.call(a.scope||a)}delete a.callback;delete a.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},getDragData:function(a){return this.dragData},onDragEnter:function(c,d){var b=Ext.dd.DragDropManager.getDDById(d),a;this.cachedTarget=b;if(this.beforeDragEnter(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,d)}}},beforeDragEnter:function(b,a,c){return true},onDragOver:function(c,d){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(d),a;if(this.beforeDragOver(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,d)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)!==false){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(c,b,d){var a=this;if(!b){b=c;c=null;d=b.getTarget().id}if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}a.proxy.repair(a.getRepairXY(b,a.dragData),a.afterRepair,a);if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(a,b){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this);Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(a,b){var c=this;c.panel=a;c.id=c.panel.id+"-ddproxy";Ext.apply(c,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;if(a.ghost){if(a.proxy){a.proxy.destroy();delete a.proxy}a.panel.unghost(null,a.moveOnDrag);delete a.ghost}},show:function(){var b=this,a;if(!b.ghost){a=b.panel.getSize();b.panel.el.setVisibilityMode(Ext.Element.DISPLAY);b.ghost=b.panel.ghost();if(b.insertProxy){b.proxy=b.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"});b.proxy.setSize(a)}}},repair:function(b,c,a){this.hide();Ext.callback(c,a||this)},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(b,a){var c=this;c.panel=b;c.dragData={panel:b};c.panelProxy=new Ext.panel.Proxy(b,a);c.proxy=c.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,b.el,a);c.setupEl(b)},setupEl:function(a){var c=this,d=a.header,b=a.body;if(d){c.setHandleElId(d.id);b=d.el}if(b){b.setStyle("cursor","move");c.scroll=false}else{a.on("boxready",c.setupEl,c,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a){return a.el.dom}},endDrag:function(a){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)},onInvalidDrop:function(c,b,d){var a=this;if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var b=this,c,a;Ext.layout.component.Component.prototype.finishRender.call(this);c=b.getRenderTarget();a=b.getDockedItems();b.finishRenderItems(c,a)},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var l=this,a=l.owner,k,p,g=l.lastDockedItems,f=l.borders,b=a.dockedItems.generation,c=l.noBorderClassesSides,m=l.borderWidthProps,e,j,o,n,h,d=l.collapsed;if(l.initializedBorders===b||(a.border&&!a.manageBodyBorders)||(a.collapsed&&a.collapseMode==="mini")){return}l.initializedBorders=b;l.collapsed=false;l.lastDockedItems=p=l.getLayoutItems();l.collapsed=d;k={top:[],right:[],bottom:[],left:[]};for(e=0,j=p.length;e<j;e++){o=p[e];n=o.dock;if(o.ignoreBorderManagement){continue}if(!k[n].satisfied){k[n].push(o);k[n].satisfied=true}if(!k.top.satisfied&&n!=="bottom"){k.top.push(o)}if(!k.right.satisfied&&n!=="left"){k.right.push(o)}if(!k.bottom.satisfied&&n!=="top"){k.bottom.push(o)}if(!k.left.satisfied&&n!=="right"){k.left.push(o)}}if(g){for(e=0,j=g.length;e<j;e++){o=g[e];if(!o.destroyed&&!o.ignoreBorderManagement&&!a.manageBodyBorders){o.removeCls(l.noBorderClasses)}}}if(f){for(h in f){if(a.manageBodyBorders&&f[h].satisfied){a.setBodyStyle(m[h],"")}}}for(h in k){j=k[h].length;if(!a.manageBodyBorders){for(e=0;e<j;e++){k[h][e].addCls(c[h])}if((!k[h].satisfied&&!a.bodyBorder)||a.bodyBorder===false){a.addBodyCls(c[h])}else{a.removeBodyCls(c[h])}}else{if(k[h].satisfied){a.setBodyStyle(m[h],"1px")}}}l.borders=k},beforeLayoutCycle:function(f){var c=this,b=c.owner,g=c.sizeModels.shrinkWrap,e=b.shrinkWrapDock,d,a;if(b.collapsed){if(b.collapsedVertical()){a=true;f.measureDimensions=1}else{d=true;f.measureDimensions=2}}f.collapsedVert=a;f.collapsedHorz=d;if(a){f.heightModel=g}else{if(d){f.widthModel=g}}e=e===true?3:(e||0);f.shrinkWrapDockHeight=(e&1)&&f.heightModel.shrinkWrap;f.shrinkWrapDockWidth=(e&2)&&f.widthModel.shrinkWrap},beginLayout:function(d){var k=this,c=k.owner,o=k.getLayoutItems(),b=d.context,f=o.length,j=k.lastCollapsedState,l,h,n,a,e,g,m;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);g=c.getCollapsed();if(g!==j&&j!==undefined){if(k.owner.collapsed){d.isCollapsingOrExpanding=1;c.addClsWithUI(c.collapsedCls)}else{d.isCollapsingOrExpanding=2;c.removeClsWithUI(c.collapsedCls);d.lastCollapsedState=k.lastCollapsedState}}k.lastCollapsedState=g;d.dockedItems=l=[];for(h=0;h<f;h++){n=o[h];if(n.rendered){m=n.dock;a=b.getCmp(n);a.dockedAt={x:0,y:0};a.offsets=e=Ext.Element.parseBox(n.offsets||0);a.horizontal=m==="top"||m==="bottom";e.width=e.left+e.right;e.height=e.top+e.bottom;l.push(a)}}d.bodyContext=d.getEl("body")},beginLayoutCycle:function(b){var e=this,k=b.dockedItems,d=k.length,a=e.owner,f=a.frameBody,j=e.lastHeightModel,c,h,g;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(e.owner.manageHeight){if(e.lastBodyDisplay){a.body.dom.style.display=e.lastBodyDisplay=""}}else{if(e.lastBodyDisplay!=="inline-block"){a.body.dom.style.display=e.lastBodyDisplay="inline-block"}if(j&&j.shrinkWrap&&!b.heightModel.shrinkWrap){a.body.dom.style.marginBottom=""}}if(b.widthModel.auto){if(b.widthModel.shrinkWrap){a.el.setWidth(null)}a.body.setWidth(null);if(f){f.setWidth(null)}}if(b.heightModel.auto){a.body.setHeight(null);if(f){f.setHeight(null)}}if(b.collapsedVert){b.setContentHeight(0)}else{if(b.collapsedHorz){b.setContentWidth(0)}}for(c=0;c<d;c++){h=k[c].target;g=h.dock;if(g==="right"){h.setLocalX(0)}else{if(g!=="left"){continue}}}},calculate:function(d){var k=this,c=k.measureAutoDimensions(d,d.measureDimensions),b=d.state,j=b.horzDone,e=b.vertDone,f=d.bodyContext,i,a,h,g,l;d.borderInfo||d.getBorderInfo();d.paddingInfo||d.getPaddingInfo();d.frameInfo||d.getFrameInfo();f.borderInfo||f.getBorderInfo();f.paddingInfo||f.getPaddingInfo();if(!d.frameBorder){if(!(i=d.framing)){d.frameBorder=d.borderInfo;d.framePadding=d.paddingInfo}else{d.frameBorder=i.border;d.framePadding=i.padding}}a=!j&&k.createAxis(d,c.contentWidth,d.widthModel,k.horzAxisProps,d.collapsedHorz);h=!e&&k.createAxis(d,c.contentHeight,d.heightModel,k.vertAxisProps,d.collapsedVert);for(g=0,l=d.dockedItems.length;l--;++g){if(a){k.dockChild(d,a,l,g)}if(h){k.dockChild(d,h,l,g)}}if(a&&k.finishAxis(d,a)){b.horzDone=j=a}if(h&&k.finishAxis(d,h)){b.vertDone=e=h}if(j&&e&&k.finishConstraints(d,j,e)){k.finishPositions(d,j,e)}else{k.done=false}},createAxis:function(o,i,e,l,d){var t=this,s=0,b=t.owner,f=b[l.maxSize],c=b[l.minSize]||0,m=l.dockBegin,h=l.dockEnd,q=l.pos,k=l.size,j=f!=null,n=e.shrinkWrap,a,r,p,g;if(n){if(d){g=0}else{a=o.bodyContext;g=i+a.borderInfo[k]}}else{r=o.frameBorder;p=o.framePadding;s=r[m]+p[m];g=o.getProp(k)-(r[h]+p[h])}return{shrinkWrap:e.shrinkWrap,sizeModel:e,initialBegin:s,begin:s,end:g,collapsed:d,horizontal:l.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:g-s,maxChildSize:0,hasMinMaxConstraints:(c||j)&&e.shrinkWrap,minSize:c,maxSize:j?f:1000000000,bodyPosProp:t.owner.manageHeight?q:l.marginBegin,dockBegin:m,dockEnd:h,posProp:q,sizeProp:k,setSize:l.setSize,shrinkWrapDock:o[l.shrinkWrapDock],sizeModelName:l.sizeModel,dockedPixelsEnd:0}},dockChild:function(b,c,k,e){var f=this,a=b.dockedItems[c.shrinkWrap?k:e],h=a.target,i=h.dock,d=c.sizeProp,g,j;if(h.ignoreParentFrame&&b.isCollapsingOrExpanding){a.clearMarginCache()}if(!a.marginInfo){a.getMarginInfo()}if(i===c.dockBegin){if(c.shrinkWrap){g=f.dockOutwardBegin(b,a,h,c)}else{g=f.dockInwardBegin(b,a,h,c)}}else{if(i===c.dockEnd){if(c.shrinkWrap){g=f.dockOutwardEnd(b,a,h,c)}else{g=f.dockInwardEnd(b,a,h,c)}}else{if(c.shrinkWrapDock){j=a.getProp(d)+a.marginInfo[d];c.maxChildSize=Math.max(c.maxChildSize,j);g=0}else{g=f.dockStretch(b,a,h,c)}}}a.dockedAt[c.posProp]=g},dockInwardBegin:function(b,a,i,d){var f=d.begin,e=d.sizeProp,c=i.ignoreParentFrame,g,j,h;if(c){d.ignoreFrameBegin=a;h=i.dock;g=b.frameBorder[h];f-=g+b.framePadding[h]}if(!i.overlay){j=a.getProp(e)+a.marginInfo[e];d.begin+=j;if(c){d.begin-=g}}return f},dockInwardEnd:function(e,d,c,b){var h=b.sizeProp,a=d.getProp(h)+d.marginInfo[h],g=b.end-a,f;if(!c.overlay){b.end=g}if(c.ignoreParentFrame){b.ignoreFrameEnd=d;f=e.frameBorder[c.dock];g+=f+e.framePadding[c.dock];b.end+=f}return g},dockOutwardBegin:function(e,d,c,b){var g=b.begin,f=b.sizeProp,a;if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameBegin=d}}if(!c.overlay){a=d.getProp(f)+d.marginInfo[f];g-=a;b.begin=g}return g},dockOutwardEnd:function(e,d,c,b){var g=b.end,f=b.sizeProp,a;a=d.getProp(f)+d.marginInfo[f];if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameEnd=d}}if(!c.overlay){b.end=g+a;b.dockedPixelsEnd+=a}return g},dockStretch:function(c,b,l,d){var m=l.dock,i=d.sizeProp,a=m==="top"||m==="bottom",h=c.frameBorder,e=b.offsets,k=c.framePadding,g=a?"right":"bottom",o=a?"left":"top",j=d.begin+e[o],f,n;if(l.stretch!==false){n=d.end-j-e[g];if(l.ignoreParentFrame){j-=k[o]+h[o];n+=k[i]+h[i]}f=b.marginInfo;n-=f[i];b[d.setSize](n)}return j},finishAxis:function(l,e){if(isNaN(e.maxChildSize)){return false}var d=e.begin,o=e.end-d,g=e.collapsed,v=e.setSize,j=e.dockBegin,t=e.dockEnd,n=l.framePadding,q=l.frameBorder,f=q[j],r=l.framing,m=r&&r[j],b=g?0:n[j],i=e.sizeProp,s=e.ignoreFrameBegin,p=e.ignoreFrameEnd,a=l.bodyContext,k=Math.max(f+b-m,0),c,w,u,h;if(e.shrinkWrap){w=e.initialSize;if(r){u=-d+f+b;c=u-m-k}else{c=-d;u=c+b}if(!g){o+=n[i]}if(s){u-=f;c-=f;s.dockedAt[e.posProp]-=b}else{o+=f}if(g){}else{if(p){p.dockedAt[e.posProp]+=n[t]}else{o+=q[t]}}e.size=o;if(!e.horizontal&&!this.owner.manageHeight){h=false}}else{if(r){u=0;c=d-m-k}else{u=-f;c=d-b-f}w=o}e.delta=u;a[v](w,h);a.setProp(e.bodyPosProp,c);return !isNaN(o)},beforeInvalidateShrinkWrapDock:function(c,b){var a=b.axis.sizeModelName;if(!c[a].constrainedMin){c[a]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(d,a){var b=a.axis,c=a.layout,e;if(d[b.sizeModelName].calculated){e=c.dockStretch(a.ownerContext,d,d.target,b);d.setProp(b.posProp,b.delta+e)}},finishConstraints:function(j,c,o){var r=this,q=r.sizeModels,n=c.shrinkWrap,p=o.shrinkWrap,a=r.owner,h,l,m,f,g,k,b,d,e,i;if(n){k=c.size;b=c.collapsed?0:c.minSize;d=c.maxSize;e=c.maxChildSize;i=Math.max(k,e);if(i>d){g=q.constrainedMax;m=d}else{if(i<b){g=q.constrainedMin;m=b}else{if(k<e){g=q.constrainedDock;a.dockConstrainedWidth=m=e}else{m=k}}}}if(p){k=o.size;b=o.collapsed?0:o.minSize;d=o.maxSize;e=o.maxChildSize;i=Math.max(k,e+k-o.initialSize);if(i>d){f=q.constrainedMax;l=d}else{if(i<b){f=q.constrainedMin;l=b}else{if(k<e){f=q.constrainedDock;a.dockConstrainedHeight=l=e}else{if(!j.collapsedVert&&!a.manageHeight){h=false;j.bodyContext.setProp("margin-bottom",o.dockedPixelsEnd)}l=k}}}}if(g||f){if(g&&f&&g.constrainedMax&&f.constrainedByMin){j.invalidate({widthModel:g});return false}if(!j.widthModel.calculatedFromShrinkWrap&&!j.heightModel.calculatedFromShrinkWrap){j.invalidate({widthModel:g,heightModel:f});return false}}else{r.invalidateAxes(j,c,o)}if(n){j.setWidth(m);if(g){j.widthModel=g}}if(p){j.setHeight(l,h);if(f){j.heightModel=f}}return true},invalidateAxes:function(f,a,k){var o=this.beforeInvalidateShrinkWrapDock,b=this.afterInvalidateShrinkWrapDock,e=a.end-a.begin,r=k.initialSize,c=a.shrinkWrapDock&&a.maxChildSize<=e,l=k.shrinkWrapDock&&k.maxChildSize<=r,p,m,j,d,q,n,g,h;if(c||l){if(l){k.begin=k.initialBegin;k.end=k.begin+k.initialSize}p=f.dockedItems;for(j=0,m=p.length;j<m;++j){d=p[j];n=d.horizontal;g=null;if(c&&n){h=a.sizeProp;q=e;g=a}else{if(l&&!n){h=k.sizeProp;q=r;g=k}}if(g){q-=d.getMarginInfo()[h];if(q!==d.props[h]){d.invalidate({before:o,after:b,axis:g,ownerContext:f,layout:this})}}}}},finishPositions:function(d,a,g){var i=d.dockedItems,c=i.length,f=a.delta,e=g.delta,h,b;for(h=0;h<c;++h){b=i[h];b.setProp("x",f+b.dockedAt.x);b.setProp("y",e+b.dockedAt.y)}},finishedLayout:function(b){var a=this,c=b.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!b.animatePolicy){if(b.isCollapsingOrExpanding===1){c.afterCollapse(false)}else{if(b.isCollapsingOrExpanding===2){c.afterExpand(false)}}}},getAnimatePolicy:function(c){var b=this,a,d;if(c.isCollapsingOrExpanding===1){a=b.lastCollapsedState}else{if(c.isCollapsingOrExpanding===2){a=c.lastCollapsedState}}if(a==="left"||a==="right"){d=b.horizontalCollapsePolicy}else{if(a==="top"||a==="bottom"){d=b.verticalCollapsePolicy}}return d},getDockedItems:function(c,m){var h=this,e=(c==="visual"),j=e?Ext.ComponentQuery.query("[rendered]",h.owner.dockedItems.items):h.owner.dockedItems.items,g=j&&j.length&&c!==false,b,l,k,f,d,a;if(m==null){k=g&&!e?j.slice():j}else{k=[];for(f=0,a=j.length;f<a;++f){l=j[f].dock;d=(l==="top"||l==="left");if(m?d:!d){k.push(j[f])}}g=g&&k.length}if(g){b=(c=c||"render")==="render";Ext.Array.sort(k,function(n,i){var o,p;if(b&&((o=h.owner.dockOrder[n.dock])!==(p=h.owner.dockOrder[i.dock]))){if(!(o+p)){return o-p}}o=h.getItemWeight(n,c);p=h.getItemWeight(i,c);if((o!==undefined)&&(p!==undefined)){return o-p}return 0})}return k||[]},getItemWeight:function(b,a){var c=b.weight||this.owner.defaultDockWeights[b.dock];return c[a]||c},getLayoutItems:function(){var e=this,b,f,d,c,a;if(e.owner.collapsed){a=e.owner.getCollapsedDockedItems()}else{b=e.getDockedItems("visual");f=b.length;a=[];for(c=0;c<f;c++){d=b[c];if(!d.hidden){a.push(d)}}}return a},measureContentWidth:function(a){var b=a.bodyContext;return b.el.getWidth()-b.getBorderInfo().width},measureContentHeight:function(a){var b=a.bodyContext;return b.el.getHeight()-b.getBorderInfo().height},redoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.show()}a.addClsWithUI(a.collapsedCls);c.redo(true)}else{if(c.isCollapsingOrExpanding===2){a.removeClsWithUI(a.collapsedCls);c.bodyContext.redo()}}},renderChildren:function(){var b=this,a=b.getDockedItems(),c=b.getRenderTarget();b.handleItemBorders();b.renderItems(a,c)},renderItems:function(g,r){var q=this,a=q.owner,d={},o=g.length,e=a.body,b=!!a.frameSize,n=a.bodyContainer,f,c,j,m,h,l,p,s,k;if(o){for(l=0;l<o;l++){p=g[l];d[p.id]=p}c=q.getRenderTarget().dom.childNodes;j=c.length;h=0;for(l=0;l<j;++l){m=c[l];if(b){k=m===e.dom||m===n;if(!k&&Ext.fly(m).contains(e)){k=true;a.bodyContainer=m}}else{k=m===e.dom}if(k){f=l;break}if(d[m.id]){++h}}f-=h;for(l=0;l<o;++l){p=g[l];s=f+l;if(p.dock==="right"||p.dock==="bottom"){++s}if(!p.rendered){q.renderItem(p,r,s)}else{if(!q.isValidParent(p,r,s)){q.moveItem(p,r,s)}}}}},undoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.hide()}a.removeClsWithUI(a.collapsedCls);c.undo(true)}else{if(c.isCollapsingOrExpanding===2){a.addClsWithUI(a.collapsedCls);c.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(d,f){var c=this,g=c.sizePolicy,e=c.owner.shrinkWrapDock,b,a;if(d.stretch===false){return g.nostretch}b=d.dock;a=(b==="left"||b==="right");e=e===true?3:(e||0);if(a){g=g.vert;e=e&1}else{g=g.horz;e=e&2}if(e){if(!f){f=c.owner.getSizeModel()}if(f[a?"height":"width"].shrinkWrap){return g.shrinkWrap}}return g.stretch},configureItem:function(a,b){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);a.addCls(this._itemCls);if(!a.ignoreBorderManagement){a.addClsWithUI(this.getDockCls(a.dock))}},getDockCls:function(a){return"docked-"+a},afterRemove:function(a){var b;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);a.removeCls(this._itemCls);if(!a.ignoreBorderManagement){a.removeClsWithUI(this.getDockCls(a.dock))}b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var d=this,f=d.borderCollapseMap,a=d.owner,b=a.baseCls,e=a.ui,c;f=f[b]||(f[b]={});c=f[e];if(!c){b+="-"+e+"-outer-border-";f[e]=c=[0,b+"l",b+"b",b+"bl",b+"r",b+"rl",b+"rb",b+"rbl",b+"t",b+"tl",b+"tb",b+"tbl",b+"tr",b+"trl",b+"trb",b+"trbl"]}return c}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));Ext.define("Ext.theme.neptune.layout.component.Dock",{override:"Ext.layout.component.Dock",noBorderClassTable:[0,"x-noborder-l","x-noborder-b","x-noborder-bl","x-noborder-r","x-noborder-rl","x-noborder-rb","x-noborder-rbl","x-noborder-t","x-noborder-tl","x-noborder-tb","x-noborder-tbl","x-noborder-tr","x-noborder-trl","x-noborder-trb","x-noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var y=this,f=0,z=8,A=4,l=2,e=1,a=y.owner,s=a.bodyBorder,n=a.border,j=y.collapsed,p=y.edgeMasks,k=y.noBorderClassTable,x=a.dockedItems.generation,w,d,v,h,r,m,u,o,g,q,t,c;if(y.initializedBorders===x){return}t=[];c=[];d=y.getBorderCollapseTable();k=y.getBorderClassTable?y.getBorderClassTable():k;y.initializedBorders=x;y.collapsed=false;v=y.getDockedItems("visual");y.collapsed=j;for(r=0,m=v.length;r<m;r++){u=v[r];if(u.ignoreBorderManagement){continue}o=u.dock;q=h=0;t.length=0;c.length=0;if(o!=="bottom"){if(f&z){w=u.border}else{w=n;if(w!==false){h+=z}}if(w===false){q+=z}}if(o!=="left"){if(f&A){w=u.border}else{w=n;if(w!==false){h+=A}}if(w===false){q+=A}}if(o!=="top"){if(f&l){w=u.border}else{w=n;if(w!==false){h+=l}}if(w===false){q+=l}}if(o!=="right"){if(f&e){w=u.border}else{w=n;if(w!==false){h+=e}}if(w===false){q+=e}}if((g=u.lastBorderMask)!==q){u.lastBorderMask=q;if(g){c[0]=k[g]}if(q){t[0]=k[q]}}if((g=u.lastBorderCollapse)!==h){u.lastBorderCollapse=h;if(g){c[c.length]=d[g]}if(h){t[t.length]=d[h]}}if(c.length){u.removeCls(c)}if(t.length){u.addCls(t)}f|=p[o]}q=h=0;t.length=0;c.length=0;if(f&z){w=s}else{w=n;if(w!==false){h+=z}}if(w===false){q+=z}if(f&A){w=s}else{w=n;if(w!==false){h+=A}}if(w===false){q+=A}if(f&l){w=s}else{w=n;if(w!==false){h+=l}}if(w===false){q+=l}if(f&e){w=s}else{w=n;if(w!==false){h+=e}}if(w===false){q+=e}if((g=y.lastBodyBorderMask)!==q){y.lastBodyBorderMask=q;if(g){c[0]=k[g]}if(q){t[0]=k[q]}}if((g=y.lastBodyBorderCollapse)!==h){y.lastBodyBorderCollapse=h;if(g){c[c.length]=d[g]}if(h){t[t.length]=d[h]}}if(c.length){a.removeBodyCls(c)}if(t.length){a.addBodyCls(t)}},onRemove:function(d){var c=this,b=d.lastBorderMask,a=d.lastBorderCollapse;if(!d.destroyed&&!d.ignoreBorderManagement){if(b){d.lastBorderMask=0;d.removeCls(c.noBorderClassTable[b])}if(a){d.lastBorderCollapse=0;d.removeCls(c.getBorderCollapseTable()[a])}}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,d)}});(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function d(h,g,i,f){h[f?f+i:i]=g[i]}function c(g,f,h){delete g[h]}function e(j,i,k,h){var f=h?h+k:k,g=j[f];if(g||j.hasOwnProperty(f)){a(i,k,g)}}function a(g,h,f){if(Ext.isDefined(f)){g[h]=f}else{delete g[h]}}function b(g,l,k,h,i){if(l){if(Ext.isArray(h)){var j,f=h.length;for(j=0;j<f;j++){g(l,k,h[j],i)}}else{g(l,k,h,i)}}}return{data:null,target:null,constructor:function(g,f){this.data={};if(g){this.target=g;if(f){this.capture(f)}}},capture:function(f,i,h){var g=this;b(d,g.data||(g.data={}),i||g.target,f,h)},remove:function(f){b(c,this.data,null,f)},restore:function(g,f,i,h){b(e,this.data,i||this.target,g,h);if(f!==false){this.remove(g)}},restoreAll:function(f,j){var h=this,g=j||this.target,i=h.data,k;f=f!==false;for(k in i){if(i.hasOwnProperty(k)){a(g,k,i[k]);if(f){delete i[k]}}}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:false,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="x-tab-guard x-tab-guard-{tabGuard}" ></div>',addDocked:function(f,j){var h=this,b=h.rendered,c=0,k=h.dockedItems,d=k.getCount(),e,g,l,a;f=h.prepareItems(f);a=f.length;if(b){Ext.suspendLayouts()}if(j===undefined){j=d}else{j=Math.min(j,d)}for(;c<a;c++){l=f[c];l.dock=l.dock||"top";if(l.dock==="left"||l.dock==="right"){h.horizontalDocks++}e=j+c;k.insert(e,l);g=!!l.instancedCmp;delete l.instancedCmp;l.onAdded(h,e,g);delete l.$initParent;if(h.onDockedAdd!==Ext.emptyFn){h.onDockedAdd(l)}if(h.hasListeners.dockedadd){h.fireEvent("dockedadd",h,l,e)}}if(h.rendered){h.updateLayout();Ext.resumeLayouts(true)}return f},destroyDockedItems:function(){var a=this.dockedItems,b;if(a){while((b=a.first())){this.removeDocked(b,true)}}},doRenderDockedItems:function(d,g,h){var f=g.$comp,e=f.componentLayout,c=f.tabGuard&&f.getTpl("tabGuardTpl"),b,a;if(e.getDockedItems&&!g.$skipDockedItems){if(c&&!h){g.tabGuard="before";f.addChildEl(g.tabGuardEl="tabGuardBeforeEl");c.applyOut(g,d)}b=e.getDockedItems("render",!h);a=b&&e.getItemsRenderTree(b);if(a){Ext.DomHelper.generateMarkup(a,d)}if(c&&h){g.tabGuard="after";f.addChildEl(g.tabGuardEl="tabGuardAfterEl");c.applyOut(g,d)}}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getDockedItems:function(a,c){var b=this.getComponentLayout().getDockedItems("render",c);if(a&&b.length){b=Ext.ComponentQuery.query(a,b)}return b},getDockingRefItems:function(b,e){var a=b&&"*,* *",d=this.getDockedItems(a,true),c;d.push.apply(d,e);c=this.getDockedItems(a,false);d.push.apply(d,c);return d},initDockingItems:function(){var b=this,a=b.dockedItems;if(!a||!a.isMixedCollection){b.dockedItems=new Ext.util.ItemCollection();if(a){b.addDocked(a)}}},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(e,b){var d=this,c,a;b=b===true||(b!==false&&d.autoDestroy);if(!d.dockedItems.contains(e)){return e}if(e.dock==="left"||e.dock==="right"){d.horizontalDocks--}c=d.componentLayout;a=c&&d.rendered;if(a){c.onRemove(e)}d.dockedItems.remove(e);e.onRemoved(e.destroying||b);d.onDockedRemove(e);if(b){e.destroy()}else{if(a){c.afterRemove(e)}}if(d.hasListeners.dockedremove){d.fireEvent("dockedremove",d,e)}if(!d.destroying){d.updateLayout()}return e},moveDocked:function(c,a){var b=this;if(b.rendered){Ext.suspendLayouts()}b.removeDocked(c,false);c.dock=a;b.addDocked(c);if(b.rendered){if(c.frame){Ext.getDetachedBody().appendChild(c.el);c.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',"x-",'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",closeToolText:"Close panel",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.addCls(b);return c},addTool:function(e){if(!Ext.isArray(e)){e=[e]}var d=this,g=d.header,a=e.length,f=d.tools,c,b;if(!g||!g.isHeader){g=null;if(!f){d.tools=f=[]}}for(c=0;c<a;c++){b=e[c];b.toolOwner=d;if(g){g.addTool(b)}else{f.push(b)}}d.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(c){var b=this,d=b.collapsible,a=b.collapseTool;b.collapsible=c;if(c&&!d){b.updateCollapseTool();a=b.collapseTool;if(a){a.show()}}else{if(!c&&d){if(a){a.hide()}}}},addUIClsToElement:function(b){var c=this,a=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);c.addBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},afterCollapse:function(c){var b=this,a=b.ariaEl.dom,d=b.ownerLayout;b.isCollapsingOrExpanding=0;b.updateCollapseTool();if(c){b.removeCls("x-animating-size")}if(d){d.afterCollapse(b,c)}if(a){a.setAttribute("aria-expanded",false)}if(b.isAccordionPanel){b.body.dom.setAttribute("aria-hidden",true)}b.setHiddenDocked();b.fireEvent("collapse",b)},afterExpand:function(c){var b=this,a=b.ariaEl.dom,d=b.ownerLayout;b.isCollapsingOrExpanding=0;b.updateCollapseTool();if(c){b.removeCls("x-animating-size")}if(d){d.afterExpand(b,c)}if(a){a.setAttribute("aria-expanded",true)}if(b.isAccordionPanel){b.body.dom.setAttribute("aria-hidden",false)}b.fireEvent("expand",b);b.fireHierarchyEvent("expand")},beforeDestroy:function(){var a=this;Ext.destroy(a.placeholder,a.ghostPanel,a.dd,a.accordionKeyNav,a.defaultButtonKeyNav);a.destroyDockedItems();Ext.container.Container.prototype.beforeDestroy.call(this)},destroy:function(){Ext.container.Container.prototype.destroy.call(this);this.dockedItems=this.bodyContainer=null},beforeRender:function(){var b=this,a;b.getProtoBody();Ext.container.Container.prototype.beforeRender.call(this);b.initTools();if(!(b.preventHeader||(b.header===false))||b.isViewportBorderChild){b.updateHeader()}b.afterHeaderInit=true;if(b.collapsed){if(b.isPlaceHolderCollapse()){if(!b.hidden){b.setHiddenState(true);b.preventCollapseFire=true;b.placeholderCollapse();delete b.preventCollapseFire;a=b.collapsed;b.collapsed=false}}else{b.beginCollapse();b.addClsWithUI(b.collapsedCls)}}if(a){b.collapsed=a}},getMemento:function(a){var b=this;if(a&&typeof a==="string"){a+="Memento";return b[a]||(b[a]=new Ext.util.Memento(b))}},beginCollapse:function(){var e=this,c=e.lastBox,g=e.rendered,b=e.getMemento("collapse"),d=e.getSizeModel(),f=e.header,a;b.capture(["height","minHeight","width","minWidth"]);if(c){b.capture(e.restoreDimension(),c,"last.")}if(e.collapsedVertical()){if(d.width.shrinkWrap){e.width=g?e.getWidth():e.width||e.minWidth||100}delete e.height;e.minHeight=0}else{if(e.collapsedHorizontal()){if(d.height.shrinkWrap){e.height=g?e.getHeight():e.height||e.minHeight||100}delete e.width;e.minWidth=0}}if(e.ownerCt){e.ownerCt.getLayout().beginCollapse(e)}if(!e.isPlaceHolderCollapse()&&f!==false){if(f===(a=e.getReExpander())){f.collapseImmune=true;f.getInherited().collapseImmune=true;f.addClsWithUI(e.getHeaderCollapsedClasses(f));if(f.rendered){f.updateFrame()}}else{if(a.el){a.el.show();a.hidden=false}}}if(e.resizer){e.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var e=this,d=e.lastBox,c=e.getMemento("collapse"),a=e.restoreDimension(),f=e.header,b;if(c){c.restore(["minHeight","minWidth",a]);if(d){c.restore(a,true,d,"last.")}}if(e.ownerCt){e.ownerCt.getLayout().beginExpand(e)}if(!e.isPlaceHolderCollapse()&&f!==false){if(f===(b=e.getReExpander())){delete f.collapseImmune;delete f.getInherited().collapseImmune;f.removeClsWithUI(e.getHeaderCollapsedClasses(f));if(f.rendered){f.expanding=true;f.updateFrame();delete f.expanding}}else{b.hidden=true;b.el.hide()}}if(e.resizer){e.resizer.enable()}},bridgeToolbars:function(){var a=this,f=[],e=a.minButtonWidth,c,b;function d(g,i,h){if(Ext.isArray(g)){g={xtype:"toolbar",items:g}}else{if(!g.xtype){g.xtype="toolbar"}}g.dock=i;if(h){g.layout=Ext.applyIf(g.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})}return g}if(a.tbar){f.push(d(a.tbar,"top"));a.tbar=null}if(a.bbar){f.push(d(a.bbar,"bottom"));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null}if(a.fbar){c=d(a.fbar,"bottom",true);c.ui="footer";if(e){b=c.defaults;c.defaults=function(i){var j=b||{},h=!i.xtype||i.isButton,g;if(!h){g=Ext.ClassManager.getByAlias("widget."+i.xtype);if(g){h=g.prototype.isButton}}if(h&&!("minWidth" in j)){j=Ext.apply({minWidth:e},j)}return j}}f.push(c);a.fbar=null}if(a.lbar){f.push(d(a.lbar,"left"));a.lbar=null}if(a.rbar){f.push(d(a.rbar,"right"));a.rbar=null}if(a.dockedItems){if(a.dockedItems.isMixedCollection){a.addDocked(f)}else{if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(f)}}else{a.dockedItems=f}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(e,a){var d=this,f=e||d.collapseDirection,b=d.ownerCt,c=d.ownerLayout,g=d.rendered;if(d.isCollapsingOrExpanding){return d}if(arguments.length<2){a=d.animCollapse}if(d.collapsed||d.fireEvent("beforecollapse",d,e,a)===false){return d}if(c&&c.onBeforeComponentCollapse){if(c.onBeforeComponentCollapse(d)===false){return d}}if(g&&b&&d.isPlaceHolderCollapse()){return d.placeholderCollapse(e,a)}d.collapsed=f;if(g){d.beginCollapse()}d.getInherited().collapsed=true;d.fireHierarchyEvent("collapse");if(g){d.doCollapseExpand(1,a)}return d},collapsedHorizontal:function(){var a=this.getCollapsed();return a==="left"||a==="right"},collapsedVertical:function(){var a=this.getCollapsed();return a==="top"||a==="bottom"},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(a){var b=this,d=b.header,c=b.frame&&!b.alwaysFramed;return{xtype:"panel",hidden:false,header:d?{titleAlign:d.getTitleAlign()}:null,ui:c?b.ui.replace(/-framed$/,""):b.ui,id:b.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,focusable:false,floating:true,shadow:false,frame:c,shim:b.shim,alwaysFramed:b.alwaysFramed,overlapHeader:b.overlapHeader,headerPosition:b.getHeaderPosition(),titleRotation:b.getTitleRotation(),baseCls:b.baseCls,getRefOwner:function(){return b.getRefOwner()},cls:b.baseCls+"-ghost "+(a||"")}},createReExpander:function(f,e){var d=this,h=f==="left",c=f==="right",g=h||c,b=d.ownerCt,a=Ext.apply({hideMode:"offsets",title:d.getTitle(),titleAlign:d.getTitleAlign(),vertical:g,textCls:d.headerTextCls,icon:d.getIcon(),iconCls:d.getIconCls(),iconAlign:d.getIconAlign(),glyph:d.getGlyph(),baseCls:d.self.prototype.baseCls+"-header",ui:d.ui,frame:d.frame&&d.frameHeader,ignoreParentFrame:d.frame||d.overlapHeader,ignoreBorderManagement:d.frame||d.ignoreHeaderBorderManagement,indicateDrag:d.draggable,collapseImmune:true,ariaRole:d.ariaRole,preventRefocus:true,ownerCt:(b&&d.collapseMode==="placeholder")?b:d,ownerLayout:d.componentLayout,forceOrientation:true,margin:d.margin},e);if(d.collapseMode==="mini"){if(g){a.width=1}else{a.height=1}}if(!d.hideCollapseTool){if(h||(c&&d.isPlaceHolderCollapse())){a.titlePosition=1}a.tools=[{xtype:"tool",type:"expand-"+d.getOppositeDirection(f),isDefaultExpandTool:true,uiCls:["top"],handler:d.toggleCollapse,scope:d,tooltip:d.expandToolText}]}a=new Ext.panel.Header(a);a.addClsWithUI(d.getHeaderCollapsedClasses(a));a.expandTool=a.down("tool[isDefaultExpandTool=true]");return a},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(a,b){var d=this,c=d.animCollapse,e=d.ownerLayout;d.animCollapse=b;d.isCollapsingOrExpanding=a;if(b){d.addCls("x-animating-size")}if(e&&!b){e.onContentChange(d)}else{d.updateLayout({isRoot:true})}d.animCollapse=c;return d},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(a){var c=this,b=c.ownerLayout,d=c.rendered;if(c.isCollapsingOrExpanding){return c}if(!arguments.length){a=c.animCollapse}if(!c.collapsed&&!c.floatedFromCollapse){return c}if(c.fireEvent("beforeexpand",c,a)===false){return c}if(b&&b.onBeforeComponentExpand){if(b.onBeforeComponentExpand(c)===false){return c}}delete c.getInherited().collapsed;if(d&&c.isPlaceHolderCollapse()){return c.placeholderExpand(a)}c.restoreHiddenDocked();if(d){c.beginExpand()}c.collapsed=false;if(c.rendered){c.doCollapseExpand(2,a)}return c},findReExpander:function(g){var f=this,h=Ext.Component,e=f.dockedItems.items,a=e.length,b,d;if(f.collapseMode==="mini"){return}switch(g){case h.DIRECTION_TOP:case h.DIRECTION_BOTTOM:for(d=0;d<a;d++){b=e[d];if(!b.hidden){if(b.isHeader&&(!b.dock||b.dock==="top"||b.dock==="bottom")){return b}}}break;case h.DIRECTION_LEFT:case h.DIRECTION_RIGHT:for(d=0;d<a;d++){b=e[d];if(!b.hidden){if(b.isHeader&&(b.dock==="left"||b.dock==="right")){return b}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var g=this,h=g.placeholder,a=h.getSize(),f=Ext.panel.Panel.floatCls,d=g.collapsed,i=g.ownerCt||g,b,c,e;if(g.isSliding){return}if(g.el.hasCls(f)){g.slideOutFloatedPanel();return}g.isSliding=true;h.el.hide();h.hidden=true;g.el.show();g.setHiddenState(false);g.collapsed=false;i.updateLayout();h.el.show();h.hidden=false;g.el.hide();g.setHiddenState(true);g.collapsed=d;i.updateLayout();e=g.getBox(false,true);g.slideOutTask=g.slideOutTask||new Ext.util.DelayedTask(g.slideOutFloatedPanel,g);if(Ext.supports.Touch){Ext.on("mousedown",c=function(j){if(!j.within(g.el)){Ext.un("mousedown",c);g.slideOutFloatedPanel()}})}if(!g.placeholderListener){g.placeholderListener=h.on({resize:g.onPlaceholderResize,scope:g,destroyable:true})}h.el.on("mouseleave",g.onMouseLeaveFloated,g);g.el.on("mouseleave",g.onMouseLeaveFloated,g);h.el.on("mouseenter",g.onMouseEnterFloated,g);g.el.on("mouseenter",g.onMouseEnterFloated,g);g.el.addCls(f);g.floated=d;if(g.collapseTool){g.collapseTool.el.hide()}switch(g.collapsed){case"top":g.width=a.width;g.setLocalXY(e.x,e.y+a.height);break;case"right":g.height=a.height;g.setLocalXY(e.x-a.width,e.y);break;case"bottom":g.width=a.width;g.setLocalXY(e.x,e.y-a.height);break;case"left":g.height=a.height;g.setLocalXY(e.x+a.width,e.y);break}b=g.convertCollapseDir(g.collapsed);g.floatedFromCollapse=g.collapsed;g.collapsed=false;g.setHiddenState(false);g.el.slideIn(b,{preserveScroll:true,duration:Ext.Number.from(g.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){g.isSliding=false;g.fireEvent("float",g)}}})},onPlaceholderResize:function(e,c,a){var b=this,d=b.getBox(false,true),f=e.getBox(false,true);switch(b.floated){case"top":b.width=c;b.setLocalY(f.y+f.height);break;case"right":b.height=a;b.setLocalX(f.x-d.width);break;case"bottom":b.width=c;b.setLocalY(f.y-d.height);break;case"left":b.height=a;b.setLocalX(f.x+f.width);break}b.updateLayout({isRoot:true})},getAnimationProps:function(){var b=this,c=b.animCollapse,a;a=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof c==="number"){a.duration=c}return a},getCollapsed:function(){var a=this;if(a.collapsed===true){return a.collapseDirection}return a.collapsed},getCollapsedDockedItems:function(){var a=this;return a.header===false||a.collapseMode==="placeholder"?a.emptyArray:[a.getReExpander()]},getComponent:function(a){var b=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(b===undefined&&!Ext.isNumber(a)){b=this.getDockedComponent(a)}return b},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(d){var b=this,c=b.collapsedCls,a;a=[c,c+"-"+d.getDockName()];if(b.border&&(!b.frame||(b.frame&&Ext.supports.CSS3BorderRadius))){a.push(c+"-border-"+d.getDockName())}return a},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},getPlaceholder:function(e){var d=this,g=e||d.collapseDirection,c=null,f=d.placeholder,b=d.floatable,a=d.titleCollapse;if(!f){if(b||(d.collapsible&&a)){c={click:{fn:(!a&&b)?d.floatCollapsedPanel:d.toggleCollapse,element:"el",scope:d}}}d.placeholder=f=Ext.widget(d.createReExpander(g,{id:d.id+"-placeholder",listeners:c}))}if(!f.placeholderFor){if(!f.isComponent){d.placeholder=f=d.lookupComponent(f)}Ext.applyIf(f,{margin:d.margin,placeholderFor:d,synthetic:true});f.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+g+"-placeholder",d.collapsedCls])}return f},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({cls:b.bodyCls,style:b.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return a},getReExpander:function(c){var b=this,d=c||b.collapseDirection,a=b.reExpander||b.findReExpander(d);b.expandDirection=b.getOppositeDirection(d);if(!a){b.reExpander=a=b.createReExpander(d,{dock:d,cls:"x-docked "+b.baseCls+"-"+b.ui+"-collapsed",isCollapsedExpander:true});b.dockedItems.insert(0,a)}return a},getRefItems:function(a){var b=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(a,b)},getState:function(){var a=this,c=Ext.container.Container.prototype.getState.call(this)||{},e=a.collapsed,b=a.floated,d;if(b){a.collapsed=b}c=a.addPropertyToState(c,"collapsed");if(b){a.collapsed=e}if(a.getCollapsed()){d=a.getMemento("collapse").data;c=a.addPropertyToState(c,"collapsed",d);if(a.collapsedVertical()){delete c.height;if(d){c=a.addPropertyToState(c,"height",d.height)}}else{delete c.width;if(d){c=a.addPropertyToState(c,"width",d.width)}}}return c},applyState:function(c){var b=this,a={},d;if(c){d=c.collapsed;if(d){a=b.getMemento("collapse");Ext.Object.merge(a.data,d);c.collapsed=true}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(l){var g=this,a=g.ghostPanel,d=g.getBox(),c=g.header,j,e,h,k,f,b;if(!a){g.ghostPanel=a=Ext.widget(g.createGhost(l));a.el.dom.removeAttribute("tabIndex")}else{a.el.show()}a.setHiddenState(false);a.floatParent=g.floatParent;a.toFront();if(c&&!g.preventHeader){j=a.header;j.suspendLayouts();e=j.query("tool");for(b=e.length;b--;){j.remove(e[b])}j.setTitlePosition(0);a.addTool(g.ghostTools());a.setTitle(g.getTitle());j.setTitlePosition(c.titlePosition);k=g.getIconCls();if(k){a.setIconCls(k)}else{h=g.getIcon();if(h){a.setIcon(h)}else{f=g.getGlyph();if(f){a.setGlyph(f)}}}j.addCls("x-header-ghost");j.resumeLayouts()}a.setPagePosition(d.x,d.y);a.setSize(d.width,d.height);g.el.hide();return a},ghostTools:function(){var e=[],f=this.header,d=f?f.query("tool[hidden=false]"):[],c,a,b;if(d.length){c=0;a=d.length;for(;c<a;c++){b=d[c];e.push({type:b.type,tooltip:b.tooltip})}}else{e=[{type:"placeholder"}]}return e},initBodyBorder:function(){var a=this;if(a.frame&&a.bodyBorder){if(!Ext.isNumber(a.bodyBorder)){a.bodyBorder=1}a.getProtoBody().setStyle("border-width",this.unitizeBox(a.bodyBorder))}},initBodyStyles:function(){var b=this,a=b.getProtoBody();if(b.bodyPadding!==undefined){if(b.layout.managePadding){a.setStyle("padding",0)}else{a.setStyle("padding",this.unitizeBox((b.bodyPadding===true)?5:b.bodyPadding))}}b.initBodyBorder()},initBorderProps:function(){var a=this;if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=false}if(a.frame&&a.border&&(a.bodyBorder===false||a.bodyBorder===0)){a.manageBodyBorders=true}},initComponent:function(){var a=this;if(a.collapsible){a.addStateEvents(["expand","collapse"])}if(a.unstyled){a.setUI("plain")}if(a.frame){a.setUI(a.ui+"-framed")}a.bridgeToolbars();a.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP;a.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);a.initBodyStyles();a.protoBody.writeTo(b);delete a.protoBody;if(a.headingText){b.headingText=a.headingText;a.addChildEl("headingEl")}if(a.bodyAriaRole){b.bodyAriaAttributes={role:a.bodyAriaRole};if(!a.ariaStaticRoles[a.bodyAriaRole]&&a.bodyAriaRenderAttributes){Ext.apply(b.bodyAriaAttributes,a.bodyAriaRenderAttributes)}}return b},calculateConstrainedPosition:function(f,b,e,a){var g=this,h=g.header,d,c;if(g.constrainHeader){d=h.lastBox;if(a){if(!h.vertical){a=[a[0],d?d.height:a[1]]}else{a=[d?d.width:a[0],a[1]]}}else{if(d){a=[d.width,d.height]}}c=g.floatParent;f=f||g.constrainTo||(c?c.getTargetEl():null)||g.container||g.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,f,b,e,a)},initTools:function(){var c=this,e=c.tools,b,d,a;c.tools=[];for(b=e&&e.length;b;){--b;c.tools[b]=a=e[b];a.toolOwner=c}if(c.collapsible&&!(c.hideCollapseTool||c.header===false||c.preventHeader)){c.updateCollapseTool();if(c.collapseFirst){c.tools.unshift(c.collapseTool)}}c.addTools();if(c.pinnable){c.initPinnable()}if(c.closable){c.addClsWithUI("closable");d={xtype:"tool",type:"close",scope:c,handler:c.close,tooltip:c.closeToolText};if(c.isAccordionPanel){d.focusable=false;d.ariaRole="presentation"}c.addTool(d)}if(c.collapseTool&&!c.collapseFirst){c.addTool(c.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode==="placeholder"},isVisible:function(a){var b=this;if(b.collapsed&&b.placeholder){return b.placeholder.isVisible(a)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){var a=this,b;Ext.container.Container.prototype.onBoxReady.apply(this,arguments);if(a.collapsed){a.setHiddenDocked()}if(a.isAccordionPanel){a.ariaEl=a.header.titleCmp.el;a.ariaEl.dom.setAttribute("aria-expanded",!a.collapsed);a.body.dom.setAttribute("aria-labelledby",a.header.titleCmp.id);a.body.dom.setAttribute("aria-hidden",!!a.collapsed);a.accordionKeyNav=new Ext.util.KeyNav({target:a.header.titleCmp.el,scope:a,left:a.navigateAccordion,right:a.navigateAccordion,left:a.navigateAccordion,up:a.navigateAccordion,down:a.navigateAccordion,home:a.navigateAccordion,end:a.navigateAccordion,space:a.toggleCollapse,enter:a.toggleCollapse,del:{alt:true,fn:a.maybeClose}})}if(a.defaultButton){b=a.defaultButtonTarget?a[a.defaultButtonTarget]:a.body;a.defaultButtonKeyNav=new Ext.util.KeyNav({target:b,scope:a,defaultEventAction:"stopEvent",enter:a.fireDefaultButton})}},onHide:function(e,b,c){var d=this,a=d.dd;if(d.floatedFromCollapse){d.slideOutFloatedPanel(true)}if(d.draggable&&a){a.endDrag()}if(d.collapsed&&d.placeholder){if(d.splitter){Ext.suspendLayouts();d.splitter.hide();Ext.resumeLayouts()}d.placeholder.hide()}else{Ext.container.Container.prototype.onHide.call(this,e,b,c)}},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(a){this.slideOutTask.delay(500)},onRemoved:function(b){var a=this;if(a.placeholder&&!b){a.ownerCt.remove(a.placeholder,false)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var a=this;if(a.collapsed&&a.isPlaceHolderCollapse()){if(a.splitter){Ext.suspendLayouts();a.splitter.show();Ext.resumeLayouts()}a.setHiddenState(true);a.placeholderCollapse()}else{Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(f,a){var e=this,b=e.ownerCt,i=f||e.collapseDirection,d=Ext.panel.Panel.floatCls,c=e.collapseTool,g=e.getPlaceholder(i),h;e.isCollapsingOrExpanding=1;e.setHiddenState(true);e.collapsed=i;if(g.rendered){if(g.el.dom.parentNode!==e.el.dom.parentNode){e.el.dom.parentNode.insertBefore(g.el.dom,e.el.dom)}g.hidden=false;g.setHiddenState(false);g.el.show();b.updateLayout()}else{b.insert(b.items.indexOf(e),g)}if(e.rendered){if(c&&Ext.ComponentManager.getActiveComponent()===c){e.focusPlaceholderExpandTool=true}e.el.setVisibilityMode(e.placeholderCollapseHideMode);if(a){e.el.addCls(d);g.el.hide();h=e.convertCollapseDir(i);e.el.slideOut(h,{preserveScroll:true,duration:Ext.Number.from(a,Ext.fx.Anim.prototype.duration),listeners:{scope:e,afteranimate:function(){var j=this;j.el.removeCls(d);j.placeholder.el.show().setStyle("display","none").slideIn(h,{easing:"linear",duration:100,listeners:{afteranimate:j.doPlaceholderCollapse,scope:j}})}}})}else{e.el.hide();e.doPlaceholderCollapse()}}else{e.isCollapsingOrExpanding=0;if(!e.preventCollapseFire){e.fireEvent("collapse",e)}}return e},doPlaceholderCollapse:function(){var a=this,b=a.placeholder,c=b.expandTool;if(a.focusPlaceholderExpandTool&&c){c.focus()}else{b.focus()}a.focusPlaceholderExpandTool=false;b.setHiddenState(false);b.ariaEl.dom.setAttribute("aria-hidden",false);b.ariaEl.dom.setAttribute("aria-expanded",false);a.ariaEl.dom.setAttribute("aria-hidden",true);a.ariaEl.dom.setAttribute("aria-expanded",false);a.isCollapsingOrExpanding=0;a.fireEvent("collapse",a)},placeholderExpand:function(c){var e=this,g=e.collapsed,h=e.placeholder.expandTool,d=Ext.panel.Panel.floatCls,b=e.ownerLayout?e.ownerLayout.centerRegion:null,f,a;if(Ext.Component.layoutSuspendCount){c=false}if(e.floatedFromCollapse){a=e.getPosition(true);e.slideOutFloatedPanelBegin();e.slideOutFloatedPanelEnd();e.floated=false}if(h&&Ext.ComponentManager.getActiveComponent()===h){e.focusHeaderCollapseTool=true;h._ariaRole=h.ariaEl.dom.getAttribute("role");h._ariaLabel=h.ariaEl.dom.getAttribute("aria-label");h.ariaEl.dom.setAttribute("role","presentation");h.ariaEl.dom.removeAttribute("aria-label")}if(c){Ext.suspendLayouts();e.placeholder.hide();e.el.show();e.collapsed=false;e.setHiddenState(false);if(b&&!a){b.hidden=true}Ext.resumeLayouts(true);b.hidden=false;e.el.addCls(d);e.isCollapsingOrExpanding=2;if(a){f=e.getXY();e.setLocalXY(a[0],a[1]);e.setXY([f[0],f[1]],{duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{scope:e,afteranimate:function(){var i=this;i.el.removeCls(d);i.isCollapsingOrExpanding=0;i.fireEvent("expand",i)}}})}else{e.el.hide();e.placeholder.el.show();e.placeholder.hidden=false;e.setHiddenState(false);e.el.slideIn(e.convertCollapseDir(g),{preserveScroll:true,duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:e.doPlaceholderExpand,scope:e}})}}else{e.floated=e.collapsed=false;e.doPlaceholderExpand(true)}return e},doPlaceholderExpand:function(b){var c=this,d=c.placeholder,a=c.collapseTool,e=d.expandTool;if(b){Ext.suspendLayouts();c.show()}c.el.removeCls(Ext.panel.Panel.floatCls);d.hide();if(b){Ext.resumeLayouts(true)}else{c.updateLayout()}if(c.focusHeaderCollapseTool&&a){a.focus()}c.focusHeaderCollapseTool=false;d.ariaEl.dom.setAttribute("aria-expanded",true);c.ariaEl.dom.setAttribute("aria-expanded",true);if(e&&e._ariaRole){e.ariaEl.dom.setAttribute("role",e._ariaRole);e.ariaEl.dom.setAttribute("aria-label",e._ariaLabel);e._ariaRole=e._ariaLabel=null}c.isCollapsingOrExpanding=0;c.fireEvent("expand",c)},remove:function(b,a){var c=this.dockedItems;if(c&&c.contains(b)){this.removeDocked(b,a)}else{Ext.container.Container.prototype.remove.call(this,b,a)}return b},removeBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.removeCls(b);return c},removeUIClsFromElement:function(b){var c=this,a=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);c.removeBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},restoreDimension:function(){var a=this.collapseDirection;return(a==="top"||a==="bottom")?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,true)},setBodyStyle:function(b,d){var c=this,a=c.rendered?c.body:c.getProtoBody();if(Ext.isFunction(b)){b=b()}if(arguments.length===1){if(Ext.isString(b)){b=Ext.Element.parseStyles(b)}a.setStyle(b)}else{a.setStyle(b,d)}return c},setBorder:function(a,c){if(c){return}var b=this,d=b.header;if(!a){a=0}else{if(a===true){a="1px"}else{a=b.unitizeBox(a)}}if(d){if(d.isHeader){d.setBorder(a)}else{d.border=a}}if(b.rendered&&b.bodyBorder!==false){b.body.setStyle("border-width",a)}b.updateLayout();b.border=a},setCollapsed:function(a){this[a?"collapse":"expand"]()},setDockedItemsVisibility:function(f,c){var h=this,d=h.getDockedItems(),a=d.length,e=0,g,b;if(h.header!==false){b=h.getReExpander()}for(;e<a;e++){g=d[e];if(g&&g!==b&&g.el){f.add(g.el)}}f.setStyle("visibility",c?"":"hidden");f.clear()},setGlyph:function(c){var b=this,a=b.glyph,e=b.header,d=b.placeholder;if(c!==a){b.glyph=c;if(e){if(e.isHeader){e.setGlyph(c)}else{e.glyph=c}}else{if(b.rendered||b.afterHeaderInit){b.updateHeader()}}if(d&&d.setGlyph){d.setGlyph(c)}b.fireEvent("glyphchange",b,c,a)}},setIcon:function(a){var b=this,c=b.icon,e=b.header,d=b.placeholder;if(a!==c){b.icon=a;if(e){if(e.isHeader){e.setIcon(a)}else{e.icon=a}}else{if(b.rendered||b.afterHeaderInit){b.updateHeader()}}if(d&&d.setIcon){d.setIcon(a)}b.fireEvent("iconchange",b,a,c)}},setIconCls:function(b){var c=this,a=c.iconCls,e=c.header,d=c.placeholder;if(b!==a){c.iconCls=b;if(e){if(e.isHeader){e.setIconCls(b)}else{e.iconCls=b}}else{if(c.rendered||c.afterHeaderInit){c.updateHeader()}}if(d&&d.setIconCls){d.setIconCls(b)}c.fireEvent("iconclschange",c,b,a)}},setTitle:function(e){var c=this,b=c.title,f=c.header,a=c.reExpander,d=c.placeholder;if(e!==b){c.title=e;if(f){if(f.isHeader){f.setTitle(e)}}else{if(c.rendered||c.afterHeaderInit){c.updateHeader()}}if(c.headingEl){c.headingEl.setHtml(e)}if(a){a.setTitle(e)}if(d&&d.setTitle){d.setTitle(e)}c.fireEvent("titlechange",c,e,b)}},setHiddenDocked:function(){var b=this,a=new Ext.dom.CompositeElement();b.hiddenOnCollapse.add(b.body);a.add(b.body);b.setDockedItemsVisibility(a,false)},setUI:function(b){var a=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(a.header&&a.header.rendered){a.header.setUI(b)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var b=this,a=b.collapseTool,c;if(!a&&b.collapsible){b.collapseDirection=b.collapseDirection||b.getHeaderPosition()||"top";c={xtype:"tool",handler:b.toggleCollapse,scope:b};if(b.isAccordionPanel){c.focusable=false;c.ariaRole="presentation"}b.collapseTool=b.expandTool=a=Ext.widget(c)}if(a){if(b.collapsed&&!b.isPlaceHolderCollapse()){a.setType("expand-"+b.getOppositeDirection(b.collapseDirection));a.setTooltip(b.expandToolText)}else{a.setType("collapse-"+b.collapseDirection);a.setTooltip(b.collapseToolText)}}},navigateAccordion:function(h){var f=this,b=f.accordionWrapOver,a="[isAccordionPanel]",i=a+":first",g=a+":last",c,d;c=h.getKey();switch(c){case h.UP:case h.LEFT:d=f.prev(a);if(!d&&b){d=f.ownerCt.child(g)}break;case h.DOWN:case h.RIGHT:d=f.next(a);if(!d&&b){d=f.ownerCt.child(i)}break;case h.HOME:d=f.ownerCt.child(i);break;case h.END:d=f.ownerCt.child(g);break;case h.DELETE:d=f.prev(a)||f.next(a);if(!d){h.doNotClose=true}break}if(d&&d!==f){d.header.titleCmp.focus()}},fireDefaultButton:function(c){var b=this,d,a;d=b.lookupReferenceHolder(false)||b;a=d.lookupReference(b.defaultButton);if(a&&a.click){a.click(c);c.stopEvent();return false}},maybeClose:function(b){var a=this;if(a.closable){a.navigateAccordion(b);if(!b.doNotClose){a.close()}}},onFocusEnter:function(c){var b=this,a=b.ariaEl.dom;Ext.container.Container.prototype.onFocusEnter.call(this,c);if(b.isAccordionPanel&&a){a.setAttribute("aria-selected",true)}},onFocusLeave:function(c){var b=this,a=b.ariaEl.dom;Ext.container.Container.prototype.onFocusLeave.call(this,c);if(b.isAccordionPanel&&a){a.removeAttribute("aria-selected")}},updateHeaderPosition:function(a){var b=this.header;if(b&&b.isHeader){b.setDock(a)}},updateIconAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setIconAlign(b)}},updateTitleAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setTitleAlign(b)}},updateTitleRotation:function(a){var b=this.header;if(b&&b.isHeader){b.setTitleRotation(a)}},unghost:function(c,a,b){var e=this,d=e.ghostPanel;if(!d){return}if(c!==false){e.el.show();if(a!==false){e.setPagePosition(d.getXY());if(e.hideMode==="offsets"){delete e.el.hideModeStyles}}if(b){e.focus(false,10)}}d.el.hide();d.setHiddenState(true)},updateHeader:function(a){var i=this,e=i.header,l=i.getTitle(),g=i.tools,k=i.getIcon(),j=i.getGlyph(),n=i.getIconCls(),d=j||k||n,h=i.ariaEl.dom,f=i.getHeaderPosition(),c=f==="left"||f==="right",m,b;if(Ext.isObject(e)||(e!==false&&(a||(l||d)||(g&&g.length)||(i.collapsible&&!i.titleCollapse)))){if(e&&e.isHeader){e.show()}else{e=i.header=Ext.widget(Ext.merge({xtype:"header",title:l,titleAlign:i.getTitleAlign(),vertical:c,dock:i.getHeaderPosition()||"top",titleRotation:i.getTitleRotation(),textCls:i.headerTextCls,iconCls:n,iconAlign:i.getIconAlign(),icon:k,glyph:j,baseCls:i.baseCls+"-header",tools:g,ui:i.ui,id:i.id+"_header",overCls:i.headerOverCls,indicateDrag:i.draggable,frame:(i.frame||i.alwaysFramed)&&i.frameHeader,ignoreParentFrame:i.frame||i.overlapHeader,ignoreBorderManagement:i.frame||i.ignoreHeaderBorderManagement,isAccordionHeader:i.isAccordionPanel,ownerCt:i,synthetic:true,listeners:i.collapsible&&i.titleCollapse?{click:i.toggleCollapse,scope:i}:null},i.header));i.addDocked(e,0)}if(i.isAccordionPanel){if(h){h.setAttribute("aria-labelledby",e.id+"-title");h.removeAttribute("aria-label")}else{b=i.ariaRenderAttributes||(i.ariaRenderAttributes={});b["aria-labelledby"]=e.id+"-title";delete b["aria-label"]}}else{if(l){if(i.ariaRole!=="tabpanel"){if(h){h.setAttribute("aria-labelledby",e.id+"-title-textEl");h.removeAttribute("aria-label")}else{b=i.ariaRenderAttributes||(i.ariaRenderAttributes={});b["aria-labelledby"]=e.id+"-title-textEl";delete b["aria-label"]}}}else{if(i.ariaRenderAttributes){delete i.ariaRenderAttributes["aria-label"]}}}}else{if(e){e.hide()}l=Ext.util.Format.stripTags(l);if(h){if(!h.hasAttribute("aria-labelledby")){if(l){h.setAttribute("aria-label",l)}else{h.removeAttribute("aria-label")}}}else{b=i.ariaRenderAttributes||(i.ariaRenderAttributes={});if(!b["aria-labelledby"]){if(l){b["aria-label"]=l}else{delete b["aria-label"]}}}}if(i.isViewportBorderChild&&!i.hasOwnProperty("ariaRole")){i.ariaRole="region"}if(l&&i.ariaRole==="region"){m=i.headingEl;if(m){m.setHtml(l)}else{if(i.rendered){i.headingEl=Ext.dom.Helper.insertFirst(i.el,{tag:"div",id:i.id+"-headingEl",role:"heading","class":"x-hidden-clip",style:"height:0",html:l},true);h.removeAttribute("aria-label");h.setAttribute("aria-labelledby",i.id+"-headingEl")}else{i.headingText=i.title;b=i.ariaRenderAttributes||(i.ariaRenderAttributes={});b["aria-labelledby"]=i.id+"-headingEl";delete b["aria-label"]}}}else{if(i.headingEl){i.headingEl.destroy();i.headingEl=null}}},statics:{floatCls:"x-border-region-slide-in"},privates:{addUIToElement:function(){var a=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);a.addBodyCls(a.baseCls+"-body-"+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;if(a.simpleDrag){a.initSimpleDraggable()}else{a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)}},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var c=this,b,a;if(!c.header){c.updateHeader(true)}if(c.header){b=Ext.applyIf({el:c.el,delegate:"#"+c.header.id},c.draggable);if(c.constrain||c.constrainHeader){b.constrain=c.constrain;b.constrainDelegate=c.constrainHeader;b.constrainTo=c.constrainTo||c.container}a=c.dd=new Ext.util.ComponentDragger(c,b);c.relayEvents(a,["dragstart","drag","dragend"]);if(c.maximized){a.disable()}}},removeUIFromElement:function(){var a=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);a.removeBodyCls(a.baseCls+"-body-"+a.ui)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(a){var c=this,e=c.el,d,b=function(){c.slideOutFloatedPanelEnd();c.el.removeCls("x-border-region-slide-in")};if(c.isSliding||c.destroyed){return}c.isSliding=true;c.floated=false;c.slideOutFloatedPanelBegin();if(a){e.hide();return b()}if(typeof c.collapsed==="string"){d=c.convertCollapseDir(c.collapsed)}e.slideOut(d,{preserveScroll:true,duration:Ext.Number.from(c.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:b}})},slideOutFloatedPanelBegin:function(){var b=this,c=b.placeholder.el,a=b.el;b.collapsed=b.floatedFromCollapse;b.setHiddenState(true);b.floatedFromCollapse=null;c.un("mouseleave",b.onMouseLeaveFloated,b);a.un("mouseleave",b.onMouseLeaveFloated,b);c.un("mouseenter",b.onMouseEnterFloated,b);a.un("mouseenter",b.onMouseEnterFloated,b)},slideOutFloatedPanelEnd:function(a){var b=this;if(b.collapseTool){b.collapseTool.el.show()}b.slideOutTask.cancel();b.isSliding=false;if(!a){b.fireEvent("unfloat",b)}}}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var a=this.prototype;a.animCollapse=Ext.enableFx;a.placeholderCollapseHideMode=Ext.Element.VISIBILITY}));Ext.define("Ext.theme.neptune.panel.Panel",{override:"Ext.panel.Panel",border:false,bodyBorder:false,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==true){arguments.callee.$previous.call(this)}}});(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,autoRender:true,hidden:true,baseCls:"x-tip",focusOnToFront:false,maskOnDisable:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow,constrain:a.constrainPosition},a.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(a)}},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1000,ariaRole:"tooltip",initComponent:function(){var a=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(b,a){var c=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);c.anchorCls="x-tip-anchor-"+c.getAnchorPosition();c.anchorEl=c.el.createChild({role:"presentation",cls:"x-tip-anchor "+c.anchorCls})},setTarget:function(d){var b=this,a=Ext.get(d),c;if(b.target){c=Ext.get(b.target);if(Ext.supports.Touch){b.mun(c,"tap",b.onTargetOver,b)}else{b.mun(c,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}b.target=a;if(a){if(Ext.supports.Touch){b.mon(a,{tap:b.onTargetOver,scope:b})}else{b.mon(a,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}if(b.anchor){b.anchorTarget=b.target}},onMouseMove:function(d){var b=this,a,c;if(!b.target||b.target.contains(d.target)){a=b.delegate?d.getTarget(b.delegate):(b.triggerElement=true);if(a){b.targetXY=d.getXY();if(a===b.triggerElement){if(!b.hidden&&b.trackMouse){c=b.getTargetXY();if(b.constrainPosition){c=b.el.adjustForConstraints(c,b.el.parent())}b.setPagePosition(c)}}else{b.hide();b.lastActive=new Date(0);b.onTargetOver(d)}}else{if((!b.closable&&b.isVisible())&&b.autoHide!==false){b.delayHide()}}}},getTargetXY:function(){var i=this,d,c,m,a,h,k,e,l,j,b,g,f;if(i.delegate){i.anchorTarget=i.triggerElement}if(i.anchor){i.targetCounter++;c=i.getOffsets();m=(i.anchorToTarget&&!i.trackMouse)?i.getAlignToXY(i.anchorTarget,i.getAnchorAlign()):i.targetXY;a=Ext.Element.getViewportWidth()-5;h=Ext.Element.getViewportHeight()-5;k=document.documentElement;e=document.body;l=(k.scrollLeft||e.scrollLeft||0)+5;j=(k.scrollTop||e.scrollTop||0)+5;b=[m[0]+c[0],m[1]+c[1]];g=i.getSize();f=i.constrainPosition;i.anchorEl.removeCls(i.anchorCls);if(i.targetCounter<2&&f){if(b[0]<l){if(i.anchorToTarget){i.defaultAlign="l-r";if(i.mouseOffset){i.mouseOffset[0]*=-1}}i.anchor="left";return i.getTargetXY()}if(b[0]+g.width>a){if(i.anchorToTarget){i.defaultAlign="r-l";if(i.mouseOffset){i.mouseOffset[0]*=-1}}i.anchor="right";return i.getTargetXY()}if(b[1]<j){if(i.anchorToTarget){i.defaultAlign="t-b";if(i.mouseOffset){i.mouseOffset[1]*=-1}}i.anchor="top";return i.getTargetXY()}if(b[1]+g.height>h){if(i.anchorToTarget){i.defaultAlign="b-t";if(i.mouseOffset){i.mouseOffset[1]*=-1}}i.anchor="bottom";return i.getTargetXY()}}i.anchorCls="x-tip-anchor-"+i.getAnchorPosition();i.anchorEl.addCls(i.anchorCls);i.targetCounter=0;return b}else{d=i.getMouseOffset();return(i.targetXY)?[i.targetXY[0]+d[0],i.targetXY[1]+d[1]]:d}},calculateConstrainedPosition:function(b){var c=this,e,a,d;if(!b&&c.isContainedFloater()){e=c.isVisible();if(!e){c.el.show()}a=c.getTargetXY();if(!e){c.el.hide()}d=c.floatParent.getTargetEl().getViewRegion();a[0]-=d.left;a[1]-=d.top}else{a=c.callOverridden(arguments)}return a},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide();a.el.setOpacity("")}})},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c=this,d,b,a=c.getAnchorPosition().charAt(0);if(c.anchorToTarget&&!c.trackMouse){switch(a){case"t":b=[0,9];break;case"b":b=[0,-13];break;case"r":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case"t":b=[-15-c.anchorOffset,30];break;case"b":b=[-19-c.anchorOffset,-13-c.el.dom.offsetHeight];break;case"r":b=[-15-c.el.dom.offsetWidth,-13-c.anchorOffset];break;default:b=[25,-13-c.anchorOffset];break}}d=c.getMouseOffset();b[0]+=d[0];b[1]+=d[1];return b},onTargetOver:function(d){var c=this,b=c.delegate,a;if(c.disabled||d.within(c.target.dom,true)){return}a=b?d.getTarget(b):true;if(a){c.triggerElement=a;c.triggerEvent=d;c.clearTimer("hide");c.targetXY=d.getXY();c.delayShow()}},delayShow:function(c){var a=this,b=a.el&&(c===false||!a.trackMouse)&&a.getTargetXY();if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.showFromDelay,a.showDelay,a,[b])}}else{if(!a.hidden&&a.autoHide!==false){a.show(b)}}},showFromDelay:function(b){var a=this;if(a.disabled){return}a.fromDelayShow=true;a.show(b);delete a.fromDelayShow},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this);delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(d){var b=this,a=b.triggerElement,c=a===true?b.target:a;if(b.disabled||!a||d.within(c,true)){return}if(b.showTimer){b.clearTimer("show");b.triggerElement=null}if(b.autoHide!==false){b.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);delete a.triggerElement},show:function(b){var a=this;Ext.tip.Tip.prototype.show.call(this);if(this.hidden===false){if(a.anchor){a.anchor=a.origAnchor}if(!a.calledFromShowAt){a.showAt(b||a.getTargetXY())}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();a.calledFromShowAt=true;if(!a.isVisible()){Ext.tip.Tip.prototype.showAt.apply(this,arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true);a.el.syncUnderlays();if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}}delete a.calledFromShowAt},syncAnchor:function(){var c=this,a,b,d;switch(c.tipAnchor.charAt(0)){case"t":a="b";b="tl";d=[20+c.anchorOffset,1];break;case"r":a="l";b="tr";d=[-1,12+c.anchorOffset];break;case"b":a="t";b="bl";d=[20+c.anchorOffset,-1];break;default:a="r";b="tl";d=[1,12+c.anchorOffset];break}c.anchorEl.alignTo(c.el,a+"-"+b,d);c.anchorEl.setStyle("z-index",parseInt(c.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(a,c){var b=this;Ext.tip.Tip.prototype.afterSetPosition.apply(this,arguments);if(b.anchor){b.syncAnchor();if(!b.anchorEl.isVisible()){b.anchorEl.show()}}else{b.anchorEl.hide()}},_timerNames:{},clearTimer:function(a){var b=this,d=b._timerNames,c=d[a]||(d[a]=a+"Timer"),e=b[c];if(e){clearTimeout(e);b[c]=null}},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;Ext.tip.Tip.prototype.onShow.call(this);a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;Ext.tip.Tip.prototype.onHide.call(this);a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.destroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.tip.Tip.prototype.onDestroy.call(this)}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:true,shrinkWrapDock:true,initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(a){this.tagConfig=Ext.apply({},a);delete this.tagConfig.attr},text:null,register:function(c){var g=Ext.isArray(c)?c:arguments,d=0,a=g.length,f,b,e;for(;d<a;d++){c=g[d];f=c.target;if(f){if(Ext.isArray(f)){for(b=0,e=f.length;b<e;b++){this.targets[Ext.id(f[b])]=c}}else{this.targets[Ext.id(f)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom;if(b.isVisible()){if(c&&c.el===a){b.hide()}}else{if(c&&c.el===a){b.clearTimer("show")}}},getTipCfg:function(e,d){var c=e.title,b=this.tagConfig,a=b.attr||(b.attr=b.namespace+b.attribute),f;if(this.interceptTitles&&c&&Ext.isString(c)){e.setAttribute(a,c);e.removeAttribute("title");return{text:c}}else{e=Ext.fly(e).findParent(function(g){return(f=g.getAttribute(a))});if(e){return{target:e,text:f}}}},onTargetOver:function(a){this.doTargetOver(a.getTarget(this.delegate),null,a)},doTargetOver:function(i,p,b){var j=this,a,e,f,c,h,k,d,m,g,o,l,n;if(j.disabled){return}if(typeof i==="string"){i=Ext.getDom(i)}j.targetXY=p||(b?b.getXY():Ext.fly(i).getXY());if(!i||i.nodeType!==1||i===document.documentElement||i===document.body){return}if(j.activeTarget&&((i===j.activeTarget.el)||Ext.fly(j.activeTarget.el).contains(i))){if(j.targetTextEmpty()){j.onShowVeto();delete j.activeTarget}else{j.clearTimer("hide");j.show()}return}if(i){g=j.targets;for(n in g){if(g.hasOwnProperty(n)){l=g[n];o=Ext.fly(l.target);if(o&&(o.dom===i||o.contains(i))){c=o.dom;break}}}if(c){j.activeTarget=j.targets[c.id];j.activeTarget.el=i;j.anchor=j.activeTarget.anchor;if(j.anchor){j.anchorTarget=i}a=parseInt(j.activeTarget.showDelay,10);if(a){f=j.showDelay;j.showDelay=a}j.delayShow();if(a){j.showDelay=f}if(!(e=j.activeTarget.hideAction)){delete j.hideAction}else{j.hideAction=e}return}}c=Ext.fly(i,"_quicktip-target");h=j.tagConfig;k=h.namespace;d=j.getTipCfg(i,b);if(d){if(d.target){i=d.target;c=Ext.fly(i,"_quicktip-target")}m=c.getAttribute(k+h.hide);j.activeTarget={el:i,text:d.text,width:+c.getAttribute(k+h.width)||null,autoHide:m!=="user"&&m!=="false",title:c.getAttribute(k+h.title),cls:c.getAttribute(k+h.cls),align:c.getAttribute(k+h.align),showDelay:parseInt(c.getAttribute(k+h.showDelay)||0,10),hideAction:c.getAttribute(k+h.hideAction),anchorTarget:c.getAttribute(k+h.anchorTarget)};if(!j.initialConfig.hasOwnProperty("anchor")){j.anchor=c.getAttribute(k+h.anchor)}if(j.anchor&&!j.initialConfig.hasOwnProperty("anchorTarget")){j.anchorTarget=j.activeTarget.anchorTarget||i}a=parseInt(j.activeTarget.showDelay,10);if(a){f=j.showDelay;j.showDelay=a}j.delayShow();if(a){j.showDelay=f}}},onTargetOut:function(f){var c=this,d=c.activeTarget,a,b;if(d&&f.within(c.activeTarget.el)&&!c.getTipCfg(f.getTarget(),f)){return}c.clearTimer("show");delete c.activeTarget;if(c.autoHide!==false){a=d&&parseInt(d.hideDelay,10);if(a){b=c.hideDelay;c.hideDelay=a}c.delayHide();if(a){c.hideDelay=b}}},targetTextEmpty:function(){var c=this,d=c.activeTarget,a=c.tagConfig,b,e;if(d){b=d.el;if(b){e=b.getAttribute(a.namespace+a.attribute);if(!e&&!c.targets[Ext.id(d.target)]){return true}}}return false},show:function(){var b=this,a=b.fromDelayShow;if(a&&b.targetTextEmpty()){b.onShowVeto();delete b.activeTarget;return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(e){var c=this,d=c.activeTarget,f=c.header,b,a;if(d){if(!c.rendered){c.render(Ext.getBody());c.activeTarget=d}c.suspendLayouts();if(d.title){c.setTitle(d.title);f.show()}else{if(f){f.hide()}}c.update(d.text);c.autoHide=d.autoHide;b=d.dismissDelay;c.dismissDelay=Ext.isNumber(b)?b:c.dismissDelay;if(d.mouseOffset){e[0]+=d.mouseOffset[0];e[1]+=d.mouseOffset[1]}a=c.lastCls;if(a){c.removeCls(a);delete c.lastCls}a=d.cls;if(a){c.addCls(a);c.lastCls=a}c.setWidth(d.width);if(c.anchor){c.constrainPosition=false}else{if(d.align){e=c.getAlignToXY(d.el,d.align);c.constrainPosition=false}else{c.constrainPosition=true}}c.resumeLayouts(true)}Ext.tip.ToolTip.prototype.showAt.call(this,e)},showByTarget:function(f){var c=this,e,b,d,a,g;e=c.targets[f.id];if(e){c.activeTarget=e;c.activeTarget.el=Ext.get(f).dom;c.anchor=c.activeTarget.anchor;b=f.getSize();d=f.getXY();c.showAt([d[0],d[1]+b.height])}},hide:function(){delete this.activeTarget;Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(e,b){var d=this;if(!d.tip){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(e,b)});return false}var a=Ext.apply({disabled:d.disabled,id:"ext-quicktips-tip"},b),c=a.className,f=a.xtype;if(c){delete a.className}else{if(f){c="widget."+f;delete a.xtype}}if(e!==false){a.renderTo=document.body}d.tip=Ext.create(c||"Ext.tip.QuickTip",a);Ext.quickTipsActive=true}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.disable()}},ddEnable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.enable()}},enable:function(){var a=this,b=a.tip;if(b){b.enable()}a.disabled=false},disable:function(){var a=this,b=a.tip;if(b){b.disable()}a.disabled=true},isEnabled:function(){var a=this.tip;return a!==undefined&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.picker.Color",Ext.Component,{alternateClassName:"Ext.ColorPalette",focusable:true,componentCls:"x-color-picker",selectedCls:"x-color-picker-selected",itemCls:"x-color-picker-item",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>',"</a>","</tpl>"],initComponent:function(){var a=this;Ext.Component.prototype.initComponent.apply(this,arguments);if(a.handler){a.on("select",a.handler,a.scope,true)}},initRenderData:function(){var a=this;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{itemCls:a.itemCls,colors:a.colors})},onRender:function(){var b=this,a=b.clickEvent;Ext.Component.prototype.onRender.apply(this,arguments);b.mon(b.el,a,b.handleClick,b,{delegate:"a"});if(a!=="click"){b.mon(b.el,"click",Ext.emptyFn,b,{delegate:"a",stopEvent:true})}},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);if(a.value){b=a.value;a.value=null;a.select(b,true)}},handleClick:function(c){var b=this,a;c.stopEvent();if(!b.disabled){a=c.currentTarget.className.match(b.colorRe)[1];b.select(a.toUpperCase())}},select:function(b,a){var e=this,g=e.selectedCls,f=e.value,c,d;b=b.replace("#","");if(!e.rendered){e.value=b;return}if(b!==f||e.allowReselect){c=e.el;if(e.value){d=c.down("a.color-"+f,true);Ext.fly(d).removeCls(g)}d=c.down("a.color-"+b,true);Ext.fly(d).addCls(g);e.value=b;if(a!==true){e.fireEvent("select",e,b)}}},clear:function(){var b=this,c=b.value,a;if(c&&b.rendered){a=b.el.down("a.color-"+c,true);Ext.fly(a).removeCls(b.selectedCls)}b.value=null},getValue:function(){return this.value||null}},0,["colorpicker"],["component","box","colorpicker"],{component:true,box:true,colorpicker:true},["widget.colorpicker"],0,[Ext.picker,"Color",Ext,"ColorPalette"],0));(Ext.cmd.derive("Ext.layout.component.field.HtmlEditor",Ext.layout.component.field.FieldContainer,{type:"htmleditor",naturalHeight:150,naturalWidth:300,beginLayout:function(b){var a=this.owner,c;if(Ext.isGecko){c=a.textareaEl.dom;this.lastValue=c.value;c.value=""}Ext.layout.component.field.FieldContainer.prototype.beginLayout.apply(this,arguments);b.toolbarContext=b.context.getCmp(a.toolbar);b.inputCmpContext=b.context.getCmp(a.inputCmp);b.bodyCellContext=b.getEl("bodyEl");b.textAreaContext=b.getEl("textareaEl");b.iframeContext=b.getEl("iframeEl")},beginLayoutCycle:function(h){var g=this,d=h.widthModel,c=h.heightModel,b=g.owner,f=b.iframeEl,e=b.textareaEl,a=(c.natural||c.shrinkWrap)?g.naturalHeight:"";Ext.layout.component.field.FieldContainer.prototype.beginLayoutCycle.apply(this,arguments);if(d.shrinkWrap){f.setStyle("width","");e.setStyle("width","")}else{if(d.natural){h.bodyCellContext.setWidth(g.naturalWidth)}}f.setStyle("height",a);e.setStyle("height",a)},finishedLayout:function(){var a=this.owner;Ext.layout.component.field.FieldContainer.prototype.finishedLayout.apply(this,arguments);if(Ext.isGecko){a.textareaEl.dom.value=this.lastValue}}},0,0,0,0,["layout.htmleditor"],0,[Ext.layout.component.field,"HtmlEditor"],0));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.toolbar.Separator",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"},0,["tbseparator"],["component","box","tbitem","tbseparator"],{component:true,box:true,tbitem:true,tbseparator:true},["widget.tbseparator"],0,[Ext.toolbar,"Separator",Ext.Toolbar,"Separator"],0));(Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(d,a,b){var e=this,c=e.component;Ext.dom.Element.prototype.setSize.call(this,d,a,b);c.btnWrap.setStyle("table-layout",(!d||d==="auto")?"":"fixed");c.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return e},setStyle:function(f,e){var d=this,b=d.component,c,a;Ext.dom.Element.prototype.setStyle.call(this,f,e);if(f){if(f==="width"||(typeof f!=="string"&&"width" in f)){c=e||f.width;b.btnWrap.setStyle("table-layout",(!c||c==="auto")?"":"fixed")}if(f==="height"||(typeof f!=="string"&&"height" in f)){a=e||f.height;b.btnEl.setStyle("height",(!a||a==="auto")?"":"auto")}}return d},setHeight:function(a,b){Ext.dom.Element.prototype.setHeight.call(this,a,b);this.component.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return this},setWidth:function(b,a){Ext.dom.Element.prototype.setWidth.call(this,b,a);this.component.btnWrap.setStyle("table-layout",(!b||b==="auto")?"":"fixed");return this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0));(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){var a=this;if(!a.initialized){Ext.getDoc().on({mouseup:a.onDocumentMouseUp,scope:a});a.initialized=true}},onButtonMousedown:function(a,c){var b=this.pressedButton;if(b){b.onMouseUp(c)}this.pressedButton=a},onDocumentMouseUp:function(b){var a=this.pressedButton;if(a){a.onMouseUp(b);this.pressedButton=null}},toggleGroup:function(b,e){if(e){var d=this.groups[b.toggleGroup],c=d.length,a;for(a=0;a<c;a++){if(d[a]!==b){d[a].toggle(false)}}}},register:function(b){var c=this,a=this.groups,d=a[b.toggleGroup];c.init();if(!b.toggleGroup){return}if(!d){d=a[b.toggleGroup]=[]}d.push(b);b.on("toggle",c.toggleGroup,c)},unregister:function(a){if(!a.toggleGroup){return}var b=this,c=b.groups[a.toggleGroup];if(c){Ext.Array.remove(c,a);a.un("toggle",b.toggleGroup,b)}},getPressed:function(d){var c=this.groups[d],b=0,a;if(c){for(a=c.length;b<a;b++){if(c[b].pressed===true){return c[b]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var a=this;a.onShow=function(){delete a.onShow;Ext.on("mousedown",a.checkActiveMenus,a);return a.onShow.apply(a,arguments)}},checkActiveMenus:function(d){var g=this.visible,a=g.length,b,f,c=Ext.Component.fromElement(d.target);if(a){g=g.slice();for(b=0;b<a;++b){f=g[b];if(!(f.owns(d)||(c&&c.isMenuCheckItem&&c.menu===f))){f.hide()}}}},onShow:function(a){if(a.floating){Ext.Array.include(this.visible,a)}},onHide:function(a){if(a.floating){Ext.Array.remove(this.visible,a)}},hideAll:function(){var d=this.visible,b=d.length,a=false,c;if(b){d=d.slice();for(c=0;c<b;c++){d[c].hide();a=true}}return a},get:function(c,b){var a;if(typeof c==="string"){a=Ext.getCmp(c);if(a instanceof Ext.menu.Menu){c=a}}else{if(Ext.isArray(c)){b=Ext.apply({items:c},b);c=new Ext.menu.Menu(b)}else{if(!c.isComponent){b=Ext.apply({},c,b);c=Ext.ComponentManager.create(b,"menu")}}}return c},registerCheckable:function(c){var a=this.groups,b=c.group;if(b){if(!a[b]){a[b]=[]}a[b].push(c)}},unregisterCheckable:function(c){var a=this.groups,b=c.group;if(b){Ext.Array.remove(a[b],c)}},onCheckChange:function(d,f){var a=this.groups,c=d.group,b=0,h,e,g;if(c&&f){h=a[c];e=h.length;for(;b<e;b++){g=h[b];if(g!==d){g.setChecked(false)}}}}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:true},isButton:true,_syncFrameHeight:true,liquidLayout:true,hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:true,focusable:true,ariaRole:"button",keyHandlers:{SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl"],publishes:{pressed:1},_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_arrowElCls:"x-btn-arrow-el",_focusCls:"x-btn-focus",_arrowFocusCls:"x-arrow-focus",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>>{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var a=this;a.addCls("x-unselectable");Ext.Component.prototype.initComponent.call(this);if(a.menu){a.split=true;a.setMenu(a.menu,false,true)}if(a.url){a.href=a.url}a.configuredWithPreventDefault=a.hasOwnProperty("preventDefault");if(a.href&&!a.configuredWithPreventDefault){a.preventDefault=false}if(Ext.isString(a.toggleGroup)&&a.toggleGroup!==""){a.enableToggle=true}if(a.html&&!a.text){a.text=a.html;delete a.html}},getElConfig:function(){var c=this,b=Ext.Component.prototype.getElConfig.call(this),a=c.getHref(),d=c.hrefTarget;if(b.tag==="a"){if(!c.disabled){b.tabIndex=c.tabIndex}if(a){if(!c.disabled){b.href=a;if(d){b.target=d}}}}if(!c.ariaStaticRoles[c.ariaRole]){if(c.menu&&!c.isSplitButton){b["aria-haspopup"]=true}if(c.enableToggle){b["aria-pressed"]=!!c.pressed}}return b},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(h,g,e){var f=this,b=f.menu,a=f.isSplitButton?f.arrowEl&&f.arrowEl.dom:f.ariaEl.dom,c,d;if(b&&!e){if(g!==false&&f.destroyMenu){b.destroy()}b.ownerCmp=null}if(h){c=h.isMenu;h=Ext.menu.Manager.get(h,{ownerCmp:f});h.setOwnerCmp(f,c);h.menuClickBuffer=250;f.mon(h,{scope:f,show:f.onMenuShow,hide:f.onMenuHide});if(!b&&f.getArrowVisible()){f.split=true;if(f.rendered){f._addSplitCls();f.updateLayout()}}f.menu=h;if(a){a.setAttribute("aria-haspopup",true);a.setAttribute("aria-owns",h.id)}else{d=f.isSplitButton?(f.ariaArrowElAttributes||(f.ariaArrowElAttributes={})):(f.ariaRenderAttributes||(f.ariaRenderAttributes={}));d["aria-haspopup"]=true;d["aria-owns"]=h.id}}else{if(f.rendered){a.removeAttribute("aria-haspopup");a.removeAttribute("aria-owns");f._removeSplitCls();f.updateLayout()}else{d=f.isSplitButton?f.ariaArrowElAttributes:f.ariaRenderAttributes;if(d){delete d["aria-haspopup"];delete d["aria-owns"]}}f.split=false;f.menu=null}},onRender:function(){var c=this,d,a,b;Ext.Component.prototype.onRender.apply(this,arguments);a=c.el;if(c.tooltip){c.setTooltip(c.tooltip,true)}if(c.handleMouseEvents){b={scope:c,mouseover:c.onMouseOver,mouseout:c.onMouseOut,mousedown:c.onMouseDown};if(c.split){b.mousemove=c.onMouseMove}}else{b={scope:c}}if(Ext.supports.Touch){b.touchstart=c.onTouchStart}if(c.repeat){c.mon(new Ext.util.ClickRepeater(a,Ext.isObject(c.repeat)?c.repeat:{}),"click",c.onRepeatClick,c)}else{if(b[c.clickEvent]){d=true}else{b[c.clickEvent]=c.onClick}}c.mon(a,b);if(c.hasFrameTable()){c.mon(c.frameTable,"click",c.frameTableListener,c)}if(d){c.mon(a,c.clickEvent,c.onClick,c)}Ext.button.Manager.register(c)},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);if(this.menu){this.menu.hide()}},getTemplateArgs:function(){var h=this,c=h._btnCls,e=h._baseIconCls,a=h.getIconAlign(),i=h.glyph,g=Ext._glyphFontFamily,j=h.text,d=h._hasIcon(),f=h._hasIconCls,b;if(typeof i==="string"){b=i.split("@");i=b[0];g=b[1]}return{split:h.isSplitButton,innerCls:h._innerCls,splitCls:h.getArrowVisible()?h.getSplitCls():"",iconUrl:h.icon,iconCls:h.iconCls,glyph:i,glyphCls:i?h._glyphCls:"",glyphFontFamily:g,text:j||"&#160;",closeText:h.closeText,textCls:j?h._textCls:"",noTextCls:j?"":h._noTextCls,hasIconCls:d?f:"",btnWrapCls:h._btnWrapCls,btnWrapStyle:h.width?"table-layout:fixed;":"",btnElStyle:h.height?"height:auto;":"",btnCls:c,baseIconCls:e,iconBeforeText:a==="left"||a==="top",iconAlignCls:d?(f+"-"+a):"",textAlignCls:c+"-"+h.getTextAlign(),arrowElCls:h._arrowElCls,tabIndex:h.tabIndex}},renderIcon:function(a){return this.getTpl("iconTpl").apply(a)},setHref:function(a){var b=this,d=b.hrefTarget,c;b.href=a;if(!b.configuredWithPreventDefault){b.preventDefault=!a}if(b.rendered){c=b.el.dom;if(!a||b.disabled){c.removeAttribute("href");c.removeAttribute("hrefTarget")}else{c.href=b.getHref();if(d){c.target=d}}}},getHref:function(){var b=this,a=b.href;return a?Ext.urlAppend(a,Ext.Object.toQueryString(Ext.apply({},b.params,b.baseParams))):false},setParams:function(c){var a=this,b;a.params=c;if(a.rendered){b=a.el.dom;if(a.disabled){b.removeAttribute("href")}else{b.href=a.getHref()||""}}},getSplitCls:function(){var a=this;return a.split?(a.baseCls+"-"+a.arrowCls)+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},setIcon:function(b){b=b||"";var c=this,a=c.btnIconEl,d=c.icon||"";c.icon=b;if(b!==d){if(a){a.setStyle("background-image",b?"url("+b+")":"");c._syncHasIconCls();if(c.didIconStateChange(d,b)){c.updateLayout()}}c.fireEvent("iconchange",c,d,b)}return c},setIconCls:function(b){b=b||"";var d=this,a=d.btnIconEl,c=d.iconCls||"";d.iconCls=b;if(c!==b){if(a){a.removeCls(c);a.addCls(b);d._syncHasIconCls();if(d.didIconStateChange(c,b)){d.updateLayout()}}d.fireEvent("iconchange",d,c,b)}return d},setGlyph:function(f){f=f||0;var e=this,b=e.btnIconEl,c=e.glyph,g=e._glyphCls,a,d;e.glyph=f;if(b){if(typeof f==="string"){d=f.split("@");f=d[0];a=d[1]||Ext._glyphFontFamily}if(!f){b.dom.innerHTML="";b.removeCls(g)}else{if(c!==f){b.dom.innerHTML="&#"+f+";";b.addCls(g)}}if(a){b.setStyle("font-family",a)}e._syncHasIconCls();if(e.didIconStateChange(c,f)){e.updateLayout()}}e.fireEvent("glyphchange",e,e.glyph,c);return e},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a||!c){b.clearTip()}if(c){if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.el.id},c));b.tooltip=c}else{b.el.dom.setAttribute(b.getTipAttr(),c)}}}else{b.tooltip=c}return b},updateIconAlign:function(f,d){var c=this,b,a,e;if(c.rendered){b=c.btnEl;a=c.btnIconEl;e=c._hasIconCls;if(d){b.removeCls(e+"-"+d)}b.addCls(e+"-"+f);if(f==="top"||f==="left"){b.insertFirst(a)}else{b.appendChild(a)}c.updateLayout()}},updateTextAlign:function(e,d){var c=this,b=c.btnEl,a=c._btnCls;if(c.rendered){b.removeCls(a+"-"+d);b.addCls(a+"-"+e)}},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},clearTip:function(){var b=this,a=b.el;if(Ext.quickTipsActive&&Ext.isObject(b.tooltip)){Ext.tip.QuickTipManager.unregister(a)}else{a.dom.removeAttribute(b.getTipAttr())}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.destroy(a.repeater);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this,b=a.menu;if(a.rendered){Ext.destroy(a.keyMap);delete a.keyMap}if(b&&a.destroyMenu){a.menu=Ext.destroy(b)}Ext.button.Manager.unregister(a);Ext.Component.prototype.onDestroy.call(this)},setHandler:function(b,a){this.handler=b;if(arguments.length>1){this.scope=a}return this},updateText:function(d,a){d=d==null?"":String(d);a=a||"";var c=this,e=c.btnInnerEl,b=c.btnEl;if(c.rendered){e.setHtml(d||"&#160;");b[d?"addCls":"removeCls"](c._textCls);b[d?"removeCls":"addCls"](c._noTextCls);c.updateLayout()}c.fireEvent("textchange",c,a,d)},didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},click:function(a){return this.onClick(a)},setPressed:function(a){return this.toggle(a!==false)},toggle:function(d,b){var c=this,a=c.ariaEl.dom;d=d===undefined?!c.pressed:!!d;if(c.fireEvent("beforetoggle",c,d)!==false){if(d!==c.pressed){c[d?"addCls":"removeCls"](c._pressedCls);c.pressed=d;if(a){a.setAttribute("aria-pressed",d)}if(!b){c.fireEvent("toggle",c,d);Ext.callback(c.toggleHandler,c.scope,[c,d],0,c);if(c.reference&&c.publishState){c.publishState("pressed",d)}}}}return c},maybeShowMenu:function(a){if(this.menu){this.showMenu(a)}},showMenu:function(a){var c=this,d=c.menu,b=!a||a.pointerType;if(d&&c.rendered){if(c.tooltip&&Ext.quickTipsActive&&c.getTipAttr()!=="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(c.el)}if(d.isVisible()){if(b){d.hide()}else{d.focus()}}else{if(!a||c.showEmptyMenu||d.items.getCount()>0){d.autoFocus=!b;d.showBy(c.el,c.menuAlign)}}}return c},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onTouchStart:function(a){this.doPreventDefault(a)},onEnterKey:function(a){this.onClick(a);a.stopEvent();return false},onClick:function(b){var a=this;a.doPreventDefault(b);if(b.type!=="keydown"&&b.button){return}if(!a.disabled){a.doToggle();a.maybeShowMenu(b);a.fireHandler(b)}},doPreventDefault:function(a){if(a&&(this.preventDefault||(this.disabled&&this.getHref()))){a.preventDefault()}},fireHandler:function(b){var a=this;if(a.fireEvent("click",a,b)!==false&&!a.destroyed){Ext.callback(a.handler,a.scope,[a,b],0,a)}},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==false||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,true,true)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,true,true)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(c){var a=this,b=a.overMenuTrigger;if(a.split){if(a.isWithinTrigger(c)){if(!b){a.onMenuTriggerOver(c)}}else{if(b){a.onMenuTriggerOut(c)}}}},isWithinTrigger:function(d){var c=this,b=c.el,f,a;f=(c.arrowAlign==="right")?d.getX()-c.getX():d.getY()-b.getY();a=c.getTriggerRegion();return f>a.begin&&f<a.end},getTriggerRegion:function(){var d=this,e=d._triggerRegion,c=d.arrowAlign==="right",b=c?"getRight":"getBottom",a=c?d.getWidth():d.getHeight();e.begin=a-(d.el[b]()-d.btnEl[b]());e.end=a;return e},onMouseEnter:function(a){this.fireEvent("mouseover",this,a)},onMouseLeave:function(a){this.fireEvent("mouseout",this,a)},onMenuTriggerOver:function(c){var b=this,a=b.arrowTooltip;b.overMenuTrigger=true;if(b.split&&a){b.btnWrap.dom.setAttribute(b.getTipAttr(),a)}b.fireEvent("menutriggerover",b,b.menu,c)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;if(a.split&&a.arrowTooltip){a.btnWrap.dom.setAttribute(a.getTipAttr(),"")}a.fireEvent("menutriggerout",a,a.menu,b)},onEnable:function(){var b=this,a=b.href,d=b.hrefTarget,c=b.el.dom;Ext.Component.prototype.onEnable.call(this);b.removeCls(b._disabledCls);c.setAttribute("tabIndex",b.tabIndex);if(a){c.href=a}if(d){c.target=d}},onDisable:function(){var a=this,b=a.el.dom;Ext.Component.prototype.onDisable.call(this);a.addCls(a._disabledCls);a.removeCls(a.overCls);b.removeAttribute("tabIndex");if(a.href){b.removeAttribute("href")}if(a.hrefTarget){b.removeAttribute("target")}},setScale:function(c){var a=this,b=a.ui.replace("-"+a.scale,"");if(!Ext.Array.contains(a.allowedScales,c)){throw ("#setScale: scale must be an allowed scale ("+a.allowedScales.join(", ")+")")}a.scale=c;a.setUI(b)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+"-"+a.scale}Ext.Component.prototype.setUI.call(this,b)},onMouseDown:function(b){var a=this;if(Ext.isIE||b.pointerType==="touch"){Ext.defer(function(){var c=a.getFocusEl();if(c&&!b.defaultPrevented){c.focus()}},1)}if(!a.disabled&&b.button===0){Ext.button.Manager.onButtonMousedown(a,b);a.addCls(a._pressedCls)}},onMouseUp:function(b){var a=this;if(!a.destroyed&&b.button===0){if(!a.pressed){a.removeCls(a._pressedCls)}}},onMenuShow:function(){var a=this;a.addCls(a._menuActiveCls);a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this;a.removeCls(a._menuActiveCls);a.fireEvent("menuhide",a,a.menu)},onDownKey:function(b){var a=this;if(a.menu&&!a.disabled){a.showMenu(b);b.stopEvent();return false}},updateArrowVisible:function(b){var a=this;if(a.rendered){if(b){if(a.menu||a.isSplitButton){a.split=true;a._addSplitCls()}}else{a._removeSplitCls();a.split=false}}return b},privates:{addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var a=this;a.btnWrap.addCls(a.getSplitCls())},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var a=this;a.btnWrap.removeCls(a.getSplitCls())},_syncHasIconCls:function(){var b=this,a=b.btnEl,c=b._hasIconCls;if(a){a[b._hasIcon()?"addCls":"removeCls"]([c,c+"-"+b.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a);Ext.Component.prototype.wrapPrimaryEl.call(this,a)}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Menu",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="x-toolbar-no-items" role="menuitem">(None)</div>',menuCls:"x-box-menu",constructor:function(a){var b=this;Ext.layout.container.boxOverflow.None.prototype.constructor.call(this,a);b.menuItems=[]},beginLayout:function(a){Ext.layout.container.boxOverflow.None.prototype.beginLayout.call(this,a);this.clearOverflow(a)},beginLayoutCycle:function(b,a){Ext.layout.container.boxOverflow.None.prototype.beginLayoutCycle.call(this,b,a);if(!a){this.clearOverflow(b);this.layout.cacheChildItems(b)}},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},clearItem:function(a){var b=a.menu;if(a.isButton&&b){a.setMenu(b,false)}},getSuffixConfig:function(){var d=this,c=d.layout,a=c.owner,b=a.id;d.menu=new Ext.menu.Menu({listeners:{scope:d,beforeshow:d.beforeMenuShow}});d.menuTrigger=new Ext.button.Button({id:b+"-menu-trigger",cls:d.menuCls+"-after x-toolbar-item",plain:a.usePlainButtons,ownerCt:a,ownerLayout:c,iconCls:"x-"+d.getOwnerType(a)+"-more-icon",ui:a.defaultButtonUI||"default",menu:d.menu,showEmptyMenu:true,getSplitCls:function(){return""}});return d.menuTrigger.getRenderTree()},getOverflowCls:function(a){return this.menuCls+"-body-"+a},handleOverflow:function(c){var b=this,a=b.layout;b.showTrigger(c);if(a.direction!=="vertical"){b.menuTrigger.setLocalY((c.state.boxPlan.maxSize-b.menuTrigger[a.names.getHeight]())/2)}return{reservedSpace:b.triggerTotalWidth}},captureChildElements:function(){var a=this,c=a.menuTrigger,b=a.layout.names;if(c.rendering){c.finishRender();a.triggerTotalWidth=c[b.getWidth]()+c.el.getMargin(b.parallelMargins)}},clearOverflow:function(g){var f=this,b=f.menuItems,e=b.length,a=f.layout.owner,h=a._asLayoutRoot,d,c;a.suspendLayouts();f.captureChildElements();f.hideTrigger();a.resumeLayouts();for(c=0;c<e;c++){d=b[c];d.suspendLayouts();d.show();f.clearItem(d);d.resumeLayouts(h)}b.length=0},showTrigger:function(d){var o=this,k=o.layout,b=k.owner,n=k.names,r=n.x,f=n.width,p=d.state.boxPlan,c=p.targetSize[f],h=d.childItems,g=o.menuTrigger,a=o.menuItems,q,j,e,m,l;g.suspendLayouts();g.show();g.resumeLayouts(o._asLayoutRoot);c-=o.triggerTotalWidth;b.suspendLayouts();for(e=0,l=a.length;e<l;++e){o.clearItem(a[e])}a.length=0;for(e=0,l=h.length;e<l;e++){q=h[e];m=q.props;if(m[r]+m[f]>c){j=q.target;o.menuItems.push(j);j.hide()}}b.resumeLayouts()},hideTrigger:function(){var a=this.menuTrigger;if(a){a.hide()}},beforeMenuShow:function(h){var g=this,b=g.menuItems,d=0,a=b.length,f,e,c=function(j,i){return j.isXType("buttongroup")&&!(i instanceof Ext.toolbar.Separator)};h.suspendLayouts();h.removeAll(false);for(;d<a;d++){f=b[d];if(!d&&(f instanceof Ext.toolbar.Separator)){continue}if(e&&(c(f,e)||c(e,f))){h.add("-")}g.addComponentToMenu(h,f);e=f}if(h.items.length<1){h.add(g.noItemsMenuText)}h.resumeLayouts()},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copy(b,c,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]);Ext.applyIf(b,{text:c.overflowText||c.text,hideOnClick:a,destroyMenu:false,listeners:null});b.masterComponent=c;if(c.isFormField){b.value=c.getValue();b.listeners={change:function(g,f,e){g.masterComponent.setValue(f)}};c.on("change",function(g,f,e){g.overflowClone.setValue(f)})}else{if(d||c.enableToggle){Ext.apply(b,{hideOnClick:false,group:d,checked:c.pressed,handler:function(f,g){f.masterComponent.onClick(g)}})}}if(c.isButton&&!c.changeListenersAdded){c.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle});c.changeListenersAdded=true}delete b.margin;delete b.ownerCt;delete b.xtype;delete b.id;delete b.itemId;return b},onButtonAttrChange:function(a){var b=a.overflowClone;b.suspendLayouts();b.setText(a.text);b.setIcon(a.icon);b.setIconCls(a.iconCls);b.resumeLayouts(true)},onButtonToggle:function(a,b){if(a.overflowClone.checked!==b){a.overflowClone.setChecked(b)}},addComponentToMenu:function(f,c){var e=this,d,b,a;if(c instanceof Ext.toolbar.Fill){return}else{if(c instanceof Ext.toolbar.Separator){f.add("-")}else{if(c.overflowClone){f.add(c.overflowClone)}else{if(c.isComponent){if(c.isXType("splitbutton")){c.overflowClone=f.add(e.createMenuConfig(c,true))}else{if(c.isXType("button")){c.overflowClone=f.add(e.createMenuConfig(c,!c.menu))}else{if(c.isXType("buttongroup")){b=c.items.items;a=b.length;for(d=0;d<a;d++){e.addComponentToMenu(f,b[d])}}else{c.overflowClone=f.add(Ext.create(Ext.getClassName(c),e.createMenuConfig(c)))}}}}}}}},destroy:function(){var b=this,a=b.menuTrigger;if(a&&!b.layout.owner.items.contains(a)){delete a.ownerCt}b.menu=b.menuTrigger=Ext.destroy(b.menu,a);b.callParent()}},1,0,0,0,["box.overflow.Menu","box.overflow.menu"],0,[Ext.layout.container.boxOverflow,"Menu",Ext.layout.boxOverflow,"Menu"],0));(Ext.cmd.derive("Ext.form.field.HtmlEditor",Ext.form.FieldContainer,{alternateClassName:"Ext.form.HtmlEditor",focusable:true,componentLayout:"htmleditor",textareaCls:"x-htmleditor-textarea",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:true}],stretchInputElFixed:true,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:Ext.isOpera?"&#160;":"&#8203;",extraFieldBodyCls:"x-html-editor-wrap",defaultButtonUI:"default-toolbar",initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,containerElCls:"x-html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,textAlignRE:/text-align:(.*?);/i,safariNonsenseRE:/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,nonDigitsRE:/\D/g,initComponent:function(){var a=this;a.items=[a.createToolbar(),a.createInputCmp()];a.layout={type:"vbox",align:"stretch"};if(a.value==null){a.value=""}Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments);a.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var a=this,c=a.id+"-inputCmp",b={id:c,name:a.name,textareaCls:a.textareaCls+" x-hidden",value:a.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:"x-htmleditor-iframe"};a.getInsertionRenderData(b,a.subTplInsertions);return{flex:1,xtype:"component",tpl:a.getTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:c,cls:"x-html-editor-input",data:b}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var g=this,b=[],e,a=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),d="x-",h,f;function c(k,i,j){return{itemId:k,cls:d+"btn-icon",iconCls:d+"edit-"+k,enableToggle:i!==false,scope:g,handler:j||g.relayBtnCmd,clickEvent:"mousedown",tooltip:a?g.buttonTips[k]||f:f,overflowText:g.buttonTips[k].title||f,tabIndex:-1}}if(g.enableFont&&!Ext.isSafari2){h=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+d+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){g.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var i=this.selectEl;if(i){i.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var i=this.selectEl;if(i){i.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){g.win.focus();g.relayCmd("fontName",g.fontSelect.dom.value);g.deferFocus()},element:"selectEl"}});b.push(h,"-")}if(g.enableFormat){b.push(c("bold"),c("italic"),c("underline"))}if(g.enableFontSize){b.push("-",c("increasefontsize",false,g.adjustFont),c("decreasefontsize",false,g.adjustFont))}if(g.enableColors){b.push("-",{itemId:"forecolor",cls:d+"btn-icon",iconCls:d+"edit-forecolor",overflowText:g.buttonTips.forecolor.title,tooltip:a?g.buttonTips.forecolor||f:f,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(j,i){g.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+i:i);this.up("menu").hide()}}]})},{itemId:"backcolor",cls:d+"btn-icon",iconCls:d+"edit-backcolor",overflowText:g.buttonTips.backcolor.title,tooltip:a?g.buttonTips.backcolor||f:f,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(j,i){if(Ext.isGecko){g.execCmd("useCSS",false);g.execCmd("hilitecolor","#"+i);g.execCmd("useCSS",true);g.deferFocus()}else{g.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+i:i)}this.up("menu").hide()}}]})})}if(g.enableAlignments){b.push("-",c("justifyleft"),c("justifycenter"),c("justifyright"))}if(!Ext.isSafari2){if(g.enableLinks){b.push("-",c("createlink",false,g.createLink))}if(g.enableLists){b.push("-",c("insertorderedlist"),c("insertunorderedlist"))}if(g.enableSourceEdit){b.push("-",c("sourceedit",true,function(){g.toggleSourceEdit(!g.sourceEditMode)}))}}for(e=0;e<b.length;e++){if(b[e].itemId!=="sourceedit"){b[e].disabled=true}}return{xtype:"toolbar",defaultButtonUI:g.defaultButtonUI,cls:"x-html-editor-tb",enableOverflow:true,items:b,listeners:{click:function(i){i.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(e){var d=this,c=d.textareaEl,b=d.iframeEl,a;d.readOnly=e;if(c){c.dom.readOnly=e}if(d.initialized){a=d.getEditorBody();if(Ext.isIE){b.setDisplayed(false);a.contentEditable=!e;b.setDisplayed(true)}else{d.setDesignMode(!e)}if(a){a.style.cursor=e?"default":"text"}d.disableItems(e)}},getDocMarkup:function(){var b=this,a=b.iframeEl.getHeight()-b.iframePad*2;return Ext.String.format('<!DOCTYPE html><html><head><style type="text/css">'+(Ext.isOpera||Ext.isIE?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(b.rtl?"rtl;":"ltr;")+(Ext.isIE8?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",b.iframePad,a,b.defaultFont)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var g=this,a=0,h,b,j,e,d,f,c;if(!g.defaultFont){b=g.textareaEl.getStyle("font-family");b=Ext.String.capitalize(b.split(",")[0]);h=Ext.Array.clone(g.fontFamilies);Ext.Array.include(h,b);h.sort();g.defaultFont=b;j=g.down("#fontSelect").selectEl.dom;for(d=0,f=h.length;d<f;++d){b=h[d];c=b.toLowerCase();e=new Option(b,c);if(b===g.defaultFont){a=d}e.style.fontFamily=c;if(Ext.isIE){j.add(e)}else{j.options.add(e)}}j.options[a].selected=true}},isEqual:function(b,a){return this.isEqualAsString(b,a)},afterRender:function(){var b=this,a=b.inputCmp;Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments);b.iframeEl=a.iframeEl;b.textareaEl=a.textareaEl;b.inputEl=b.iframeEl;if(b.enableFont){b.initDefaultFont()}b.monitorTask=Ext.TaskManager.start({run:b.checkDesignMode,scope:b,interval:100})},initFrameDoc:function(){var b=this,c,a;Ext.TaskManager.stop(b.monitorTask);c=b.getDoc();b.win=b.getWin();c.open();c.write(b.getDocMarkup());c.close();a={run:function(){var d=b.getDoc();if(d.body||d.readyState==="complete"){Ext.TaskManager.stop(a);b.setDesignMode(true);Ext.defer(b.initEditor,10,b)}},interval:10,duration:10000,scope:b};Ext.TaskManager.start(a)},checkDesignMode:function(){var a=this,b=a.getDoc();if(b&&(!b.editorInitialized||a.getDesignMode()!=="on")){a.initFrameDoc()}},setDesignMode:function(c){var a=this,b=a.getDoc();if(b){if(a.readOnly){c=false}b.designMode=(/on|true/i).test(String(c).toLowerCase())?"on":"off"}},getDesignMode:function(){var a=this.getDoc();return !a?"":String(a.designMode).toLowerCase()},disableItems:function(d){var b=this.getToolbar().items.items,c,a=b.length,e;for(c=0;c<a;c++){e=b[c];if(e.getItemId()!=="sourceedit"){e.setDisabled(d)}}},toggleSourceEdit:function(b){var f=this,d=f.iframeEl,a=f.textareaEl,e="x-hidden",c=f.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(b)){b=!f.sourceEditMode}f.sourceEditMode=b;if(c.pressed!==b){c.toggle(b)}if(b){f.disableItems(true);f.syncValue();d.addCls(e);a.removeCls(e);a.dom.removeAttribute("tabIndex");a.focus();f.inputEl=a}else{if(f.initialized){f.disableItems(f.readOnly)}f.pushValue();d.removeCls(e);a.addCls(e);a.dom.setAttribute("tabIndex",-1);f.deferFocus();f.inputEl=d}f.fireEvent("editmodechange",f,b);f.updateLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=="http://"){this.relayCmd("createlink",a)}},clearInvalid:Ext.emptyFn,setValue:function(c){var b=this,a=b.textareaEl;if(c===null||c===undefined){c=""}if(b.value!==c){if(a){a.dom.value=c}b.pushValue();if(!b.rendered&&b.inputCmp){b.inputCmp.data.value=c}b.mixins.field.setValue.call(b,c)}return b},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(this.safariNonsenseRE,"")}if(a.charCodeAt(0)===parseInt(this.defaultValue.replace(this.nonDigitsRE,""),10)){a=a.substring(1)}return a},syncValue:function(){var f=this,b,g,d,a,c,e;if(f.initialized){b=f.getEditorBody();d=b.innerHTML;e=f.textareaEl.dom;if(Ext.isWebKit){a=b.getAttribute("style");c=a.match(f.textAlignRE);if(c&&c[1]){d='<div style="'+c[0]+'">'+d+"</div>"}}d=f.cleanHtml(d);if(f.fireEvent("beforesync",f,d)!==false){if(Ext.isGecko&&e.value===""&&d==="<br>"){d=""}if(e.value!==d){e.value=d;g=true}f.fireEvent("sync",f,d);if(g){f.checkChange()}}}},getValue:function(){var a=this,b;if(!a.sourceEditMode){a.syncValue()}b=a.rendered?a.textareaEl.dom.value:a.value;a.value=b;return b},pushValue:function(){var b=this,a;if(b.initialized){a=b.textareaEl.dom.value||"";if(!b.activated&&a.length<1){a=b.defaultValue}if(b.fireEvent("beforepush",b,a)!==false){b.getEditorBody().innerHTML=a;if(Ext.isGecko){b.setDesignMode(false);b.setDesignMode(true)}b.fireEvent("push",b,a)}}},focus:function(d,b){var c=this,e,a;if(b){if(!c.focusTask){c.focusTask=new Ext.util.DelayedTask(c.focus)}c.focusTask.delay(Ext.isNumber(b)?b:10,null,c,[d,false])}else{if(d){if(c.textareaEl&&c.textareaEl.dom){e=c.textareaEl.dom.value}if(e&&e.length){c.execCmd("selectall",true)}}a=c.getFocusEl();if(a&&a.focus){a.focus()}}return c},initEditor:function(){var d=this,c,a,g,h,b;if(d.destroying||d.destroyed){return}c=d.getEditorBody();if(!c){setTimeout(function(){d.initEditor()},10);return}a=d.textareaEl.getStyle(["font-size","font-family","background-image","background-repeat","background-color","color"]);a["background-attachment"]="fixed";c.bgProperties="fixed";Ext.DomHelper.applyStyles(c,a);g=d.getDoc();h=Ext.get(g);if(h){try{h.clearListeners()}catch(f){}b=d.onEditorEvent.bind(d);h.on({mousedown:b,dblclick:b,click:b,keyup:b,delegated:false,buffer:100});b=d.onRelayedEvent;h.on({mousedown:b,mousemove:b,mouseup:b,click:b,dblclick:b,delegated:false,scope:d});if(Ext.isGecko){h.on("keypress",d.applyCommand,d)}if(d.fixKeys){h.on("keydown",d.fixKeys,d,{delegated:false})}if(d.fixKeysAfter){h.on("keyup",d.fixKeysAfter,d,{delegated:false})}if(Ext.isIE9){Ext.get(g.documentElement).on("focus",d.focus,d)}if(Ext.isIE8){h.on("focusout",function(){d.savedSelection=g.selection.type!=="None"?g.selection.createRange():null},d);h.on("focusin",function(){if(d.savedSelection){d.savedSelection.select()}},d)}Ext.getWin().on("beforeunload",d.beforeDestroy,d);g.editorInitialized=true;d.initialized=true;d.pushValue();d.setReadOnly(d.readOnly);d.fireEvent("initialize",d)}},beforeDestroy:function(){var a=this,d=a.monitorTask,c,f;if(d){Ext.TaskManager.stop(d)}if(a.rendered){Ext.getWin().un(a.beforeDestroy,a);c=a.getDoc();if(c){Ext.get(c).destroy();if(c.hasOwnProperty){for(f in c){try{if(c.hasOwnProperty(f)){delete c[f]}}catch(b){}}}}delete a.iframeEl;delete a.textareaEl;delete a.toolbar;delete a.inputCmp}Ext.form.FieldContainer.prototype.beforeDestroy.call(this)},onRelayedEvent:function(c){var b=this.iframeEl,d=Ext.fly(b).getTrueXY(),e=c.getXY(),a=c.getXY();c.xy=[d[0]+a[0],d[1]+a[1]];c.injectEvent(b);c.xy=e},onFirstFocus:function(){var c=this,b,a;c.activated=true;c.disableItems(c.readOnly);if(Ext.isGecko){c.win.focus();b=c.win.getSelection();if(b.focusNode&&!c.getValue().length){a=b.getRangeAt(0);a.selectNodeContents(c.getEditorBody());a.collapse(true);c.deferFocus()}try{c.execCmd("useCSS",true);c.execCmd("styleWithCSS",false)}catch(d){}}c.fireEvent("activate",c)},adjustFont:function(d){var e=d.getItemId()==="increasefontsize"?1:-1,c=this.getDoc().queryCommandValue("FontSize")||"2",a=Ext.isString(c)&&c.indexOf("px")!==-1,b;c=parseInt(c,10);if(a){if(c<=10){c=1+e}else{if(c<=13){c=2+e}else{if(c<=16){c=3+e}else{if(c<=18){c=4+e}else{if(c<=24){c=5+e}else{c=6+e}}}}}c=Ext.Number.constrain(c,1,6)}else{b=Ext.isSafari;if(b){e*=2}c=Math.max(1,c+e)+(b?"px":0)}this.relayCmd("FontSize",c)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var h=this,e,c,d,j,b,f,a,g;if(h.readOnly){return}if(!h.activated){h.onFirstFocus();return}d=h.getToolbar().items.map;j=h.getDoc();if(h.enableFont&&!Ext.isSafari2){f=j.queryCommandValue("fontName");b=(f?f.split(",")[0].replace(h.reStripQuotes,""):h.defaultFont).toLowerCase();a=h.fontSelect.dom;if(b!==a.value||b!==f){a.value=b}}function k(){var i;for(e=0,c=arguments.length,b;e<c;e++){b=arguments[e];try{i=j.queryCommandState(b)}catch(l){i=false}d[b].toggle(i)}}if(h.enableFormat){k("bold","italic","underline")}if(h.enableAlignments){k("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&h.enableLists){k("insertorderedlist","insertunorderedlist")}g=h.toolbar.query("menu");for(e=0;e<g.length;e++){g[e].hide()}h.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){Ext.defer(function(){var c=this;if(!this.destroyed){c.win.focus();c.execCmd(b,a);c.updateToolbar()}},10,this)},execCmd:function(c,b){var a=this,d=a.getDoc();d.execCommand(c,false,(b===undefined?null:b));a.syncValue()},applyCommand:function(d){if(d.ctrlKey){var a=this,f=d.getCharCode(),b;if(f>0){f=String.fromCharCode(f);switch(f){case"b":b="bold";break;case"i":b="italic";break;case"u":b="underline";break}if(b){a.win.focus();a.execCmd(b);a.deferFocus();d.preventDefault()}}}},insertAtCursor:function(j){var h=this,g=h.getWin(),i=h.getDoc(),c,f,d,k,e,b,a;if(h.activated){g.focus();if(g.getSelection){c=g.getSelection();if(c.getRangeAt&&c.rangeCount){f=c.getRangeAt(0);f.deleteContents();d=i.createElement("div");d.innerHTML=j;k=i.createDocumentFragment();while((e=d.firstChild)){b=k.appendChild(e)}a=k.firstChild;f.insertNode(k);if(b){f=f.cloneRange();f.setStartAfter(b);f.collapse(true);c.removeAllRanges();c.addRange(f)}}}else{if(i.selection&&c.type!=="Control"){c=i.selection;f=c.createRange();f.collapse(true);c.createRange().pasteHTML(j)}}h.deferFocus()}},fixKeys:(function(){var a;if(Ext.isIE10m){return function(h){var d=this,c=h.getKey(),g=d.getDoc(),i=d.readOnly,b,f;if(c===h.TAB){h.stopEvent();if(!i){b=g.selection.createRange();if(b){if(b.collapse){b.collapse(true);b.pasteHTML("&#160;&#160;&#160;&#160;")}d.deferFocus()}}}}}if(Ext.isOpera){return function(d){var c=this,b=d.getKey(),f=c.readOnly;if(b===d.TAB){d.stopEvent();if(!f){c.win.focus();c.execCmd("InsertHTML","&#160;&#160;&#160;&#160;");c.deferFocus()}}}}return null}()),fixKeysAfter:(function(){if(Ext.isIE){return function(d){var b=this,a=d.getKey(),c=b.getDoc(),g=b.readOnly,f;if(!g&&(a===d.BACKSPACE||a===d.DELETE)){f=c.body.innerHTML;if(f==="<p>&nbsp;</p>"||f==="<P>&nbsp;</P>"){c.body.innerHTML=""}}}}return null}()),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}},privates:{deferFocus:function(){this.focus(false,true)},getFocusEl:function(){return this.sourceEditMode?this.textareaEl:this.iframeEl}}},0,["htmleditor"],["component","box","container","fieldcontainer","htmleditor"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true},["widget.htmleditor"],[["field",Ext.form.field.Field]],[Ext.form.field,"HtmlEditor",Ext.form,"HtmlEditor"],0));Ext.define("Ext.theme.neptune.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",defaultButtonUI:"plain-toolbar"});Ext.onReady(function(){if(Ext.Date){Ext.Date.monthNames=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];Ext.Date.shortMonthNames=["Янв","Февр","Март","Апр","Май","Июнь","Июль","Авг","Сент","Окт","Нояб","Дек"];Ext.Date.getShortMonthName=function(a){return Ext.Date.shortMonthNames[a]};Ext.Date.monthNumbers={"Янв":0,"Фев":1,"Мар":2,"Апр":3,"Май":4,"Июн":5,"Июл":6,"Авг":7,"Сен":8,"Окт":9,"Ноя":10,"Дек":11};Ext.Date.getMonthNumber=function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Ext.Date.dayNames=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];Ext.Date.getShortDayName=function(a){return Ext.Date.dayNames[a].substring(0,3)}}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:".",decimalSeparator:",",currencySign:"руб",dateFormat:"d.m.Y"})}});Ext.define("Ext.locale.ru.view.View",{override:"Ext.view.View",emptyText:""});Ext.define("Ext.locale.ru.grid.plugin.DragDrop",{override:"Ext.grid.plugin.DragDrop",dragText:"{0} выбранных строк"});Ext.define("Ext.locale.ru.tab.Tab",{override:"Ext.tab.Tab",closeText:"Закрыть эту вкладку"});Ext.define("Ext.locale.ru.form.field.Base",{override:"Ext.form.field.Base",invalidText:"Значение в этом поле неверное"});Ext.define("Ext.locale.ru.view.AbstractView",{override:"Ext.view.AbstractView",loadingText:"Загрузка..."});Ext.define("Ext.locale.ru.picker.Date",{override:"Ext.picker.Date",todayText:"Сегодня",minText:"Эта дата раньше минимальной даты",maxText:"Эта дата позже максимальной даты",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",nextText:"Следующий месяц (Control+Вправо)",prevText:"Предыдущий месяц (Control+Влево)",monthYearText:"Выбор месяца (Control+Вверх/Вниз для выбора года)",todayTip:"{0} (Пробел)",format:"d.m.y",startDay:1});Ext.define("Ext.locale.ru.picker.Month",{override:"Ext.picker.Month",okText:"&#160;OK&#160;",cancelText:"Отмена"});Ext.define("Ext.locale.ru.toolbar.Paging",{override:"Ext.PagingToolbar",beforePageText:"Страница",afterPageText:"из {0}",firstText:"Первая страница",prevText:"Предыдущая страница",nextText:"Следующая страница",lastText:"Последняя страница",refreshText:"Обновить",displayMsg:"Отображаются записи с {0} по {1}, всего {2}",emptyMsg:"Нет данных для отображения"});Ext.define("Ext.locale.ru.form.field.Text",{override:"Ext.form.field.Text",minLengthText:"Минимальная длина этого поля {0}",maxLengthText:"Максимальная длина этого поля {0}",blankText:"Это поле обязательно для заполнения",regexText:"",emptyText:null});Ext.define("Ext.locale.ru.form.field.Number",{override:"Ext.form.field.Number",minText:"Значение этого поля не может быть меньше {0}",maxText:"Значение этого поля не может быть больше {0}",nanText:"{0} не является числом",negativeText:"Значение не может быть отрицательным"});Ext.define("Ext.locale.ru.form.field.Date",{override:"Ext.form.field.Date",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",minText:"Дата в этом поле должна быть позже {0}",maxText:"Дата в этом поле должна быть раньше {0}",invalidText:"{0} не является правильной датой - дата должна быть указана в формате {1}",format:"d.m.y",altFormats:"d.m.y|d/m/Y|d-m-y|d-m-Y|d/m|d-m|dm|dmy|dmY|d|Y-m-d"});Ext.define("Ext.locale.ru.form.field.ComboBox",{override:"Ext.form.field.ComboBox",valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:"Загрузка..."})});Ext.define("Ext.locale.ru.form.field.VTypes",{override:"Ext.form.field.VTypes",emailText:'Это поле должно содержать адрес электронной почты в формате "user@example.com"',urlText:'Это поле должно содержать URL в формате "http://www.example.com"',alphaText:'Это поле должно содержать только латинские буквы и символ подчеркивания "_"',alphanumText:'Это поле должно содержать только латинские буквы, цифры и символ подчеркивания "_"'});Ext.define("Ext.locale.ru.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",createLinkText:"Пожалуйста, введите адрес:"},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:"Полужирный (Ctrl+B)",text:"Применение полужирного начертания к выделенному тексту.",cls:"x-html-editor-tip"},italic:{title:"Курсив (Ctrl+I)",text:"Применение курсивного начертания к выделенному тексту.",cls:"x-html-editor-tip"},underline:{title:"Подчёркнутый (Ctrl+U)",text:"Подчёркивание выделенного текста.",cls:"x-html-editor-tip"},increasefontsize:{title:"Увеличить размер",text:"Увеличение размера шрифта.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Уменьшить размер",text:"Уменьшение размера шрифта.",cls:"x-html-editor-tip"},backcolor:{title:"Заливка",text:"Изменение цвета фона для выделенного текста или абзаца.",cls:"x-html-editor-tip"},forecolor:{title:"Цвет текста",text:"Измение цвета текста.",cls:"x-html-editor-tip"},justifyleft:{title:"Выровнять текст по левому краю",text:"Вырaвнивание текста по левому краю.",cls:"x-html-editor-tip"},justifycenter:{title:"По центру",text:"Вырaвнивание текста по центру.",cls:"x-html-editor-tip"},justifyright:{title:"Выровнять текст по правому краю",text:"Вырaвнивание текста по правому краю.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Маркеры",text:"Начать маркированный список.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Нумерация",text:"Начать нумернованный список.",cls:"x-html-editor-tip"},createlink:{title:"Вставить гиперссылку",text:"Создание ссылки из выделенного текста.",cls:"x-html-editor-tip"},sourceedit:{title:"Исходный код",text:"Переключиться на исходный код.",cls:"x-html-editor-tip"}}})});Ext.define("Ext.locale.ru.form.Basic",{override:"Ext.form.Basic",waitTitle:"Пожалуйста, подождите..."});Ext.define("Ext.locale.ru.grid.header.Container",{override:"Ext.grid.header.Container",sortAscText:"Сортировать по возрастанию",sortDescText:"Сортировать по убыванию",lockText:"Закрепить столбец",unlockText:"Снять закрепление столбца",columnsText:"Столбцы"});Ext.define("Ext.locale.ru.grid.GroupingFeature",{override:"Ext.grid.feature.Grouping",emptyGroupText:"(Пусто)",groupByText:"Группировать по этому полю",showGroupsText:"Отображать по группам"});Ext.define("Ext.locale.ru.grid.PropertyColumnModel",{override:"Ext.grid.PropertyColumnModel",nameText:"Название",valueText:"Значение",dateFormat:"d.m.Y"});Ext.define("Ext.locale.ru.window.MessageBox",{override:"Ext.window.MessageBox",buttonText:{ok:"OK",cancel:"Отмена",yes:"Да",no:"Нет"}});Ext.define("Ext.locale.ru.form.field.File",{override:"Ext.form.field.File",buttonText:"Обзор..."});Ext.define("Ext.locale.ru.Component",{override:"Ext.Component"});Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component"},function(a){a.monitor(Ext.Component)});(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var b=this,a=Ext.app.EventDomain.instances;b.callParent();b.domains=a;b.bus=a.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(d,b){var a=this.domains,c;for(c in d){if(d.hasOwnProperty(c)){a[c].listen(d[c],b)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",constructor:function(){var a=this;a.callParent();a.monitor(Ext.GlobalEvents)},listen:function(b,a){this.callParent([{global:b},a])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:true,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(a){var b=this;Ext.apply(b,a);delete b.control;delete b.listen;b.eventbus=Ext.app.EventBus;b.mixins.observable.constructor.call(b,a);b.ensureId()},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){this.ensureId();if(a){this.control(a)}},updateListen:function(a){this.ensureId();if(a){this.listen(a)}},updateRoutes:function(b){if(b){var e=this,f=e.getBefore()||{},a=Ext.app.route.Router,d,c,g;for(d in b){c=b[d];if(Ext.isString(c)){c={action:c}}g=c.action;if(!c.before){c.before=f[g]}a.connect(d,c,e)}}},isActive:function(){return true},control:function(b,c,a){var d=this,e=a,f;if(Ext.isString(b)){f={};f[b]=c}else{f=b;e=c}d.eventbus.control(f,e||d)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var b=this,a=b.eventbus;Ext.app.route.Router.disconnectAll(b);if(a){a.unlisten(b);b.eventbus=null}b.callParent()},redirectTo:function(b,c){if(b.isModel){b=b.toUrl()}if(!c){var a=Ext.util.History.getToken();if(a===b){return false}}else{Ext.app.route.Router.onStateChange(b)}Ext.util.History.add(b);return true}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,"BaseController"],0));(Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(c){var d=Ext.app.namespaces,b,a;if(!Ext.isArray(c)){c=[c]}for(b=0,a=c.length;b<a;b++){d[c[b]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(b){var d=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),a="",c;for(c in d){if(d.hasOwnProperty(c)&&c.length>a.length&&(c+"."===b.substring(0,c.length+1))){a=c}}return a===""?undefined:a},setupPaths:function(a,b,e){var d=Ext.manifest,c;if(a&&b!==null){d=d&&d.paths;if(!d||b!==undefined){Ext.Loader.setPath(a,(b===undefined)?"app":b)}}if(e){for(c in e){if(e.hasOwnProperty(c)){Ext.Loader.setPath(c,e[c])}}}}});Ext.getNamespace=Ext.app.getNamespace}));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(this.idMatchRe.test(b)){a=d.getStoreId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var a=this.queue,c=a.removeAt(0),b;if(c){b=c&&c.route;b.execute(this.token,c.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else{this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0));(Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(b){var c=this,a;Ext.apply(c,b,{conditions:{}});a=c.url;c.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);c.paramsInMatchString=a.match(c.paramMatchingRegex)||[];c.matcherRegex=c.createMatcherRegex(a)},recognize:function(c){var d=this,a=d.controller,e,b;if((d.allowInactive||a.isActive())&&d.recognizes(c)){e=d.matchesFor(c);b=c.match(d.matcherRegex);b.shift();return Ext.applyIf(e,{controller:a,action:d.action,historyUrl:c,args:b})}return false},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(c,g,h,d){var b=g.args||[],f=this.before,a=this.controller,e=this.createCallback(g,h,d);if(f){b.push(e);if(Ext.isString(f)){f=this.before=a[f]}if(f){f.apply(a,b)}}else{e.resume()}},matchesFor:function(c){var f={},e=this.paramsInMatchString,b=c.match(this.matcherRegex),d=0,a=e.length;b.shift();for(;d<a;d++){f[e[d].replace(":","")]=b[d]}return f},createMatcherRegex:function(a){var c=this.paramsInMatchString,h=this.conditions,d=0,f=c.length,j=Ext.util.Format.format,k=this.caseInsensitive?"i":"",b,g,e;for(;d<f;d++){b=c[d];g=h[b];e=j("{0}",g||"([%a-zA-Z0-9\\-\\_\\s,]+)");a=a.replace(new RegExp(b),e)}return new RegExp("^"+a+"$",k)},createCallback:function(a,d,b){var c=this;b=b||c;return{resume:function(){var e=c.controller,g=c.action,f;if(Ext.isString(g)){g=e[g]}a=a&&a.args?a.args:[];f=a.pop();if(f&&!Ext.isObject(f)){a.push(f)}if(g){c.action=g;g.apply(e,a)}if(d){d.call(b)}},stop:function(e){if(d){d.call(b,e)}}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:false,constructor:function(){var a=this;a.hiddenField=null;a.ready=false;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(b){try{this.win.location.hash=b;this.currentToken=b}catch(a){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent("change",a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on("hashchange",a.onHashChange,a)}else{Ext.TaskManager.start({fireIdleEvent:false,run:a.onHashChange,interval:50,scope:a})}a.ready=true;a.fireEvent("ready",a)},onHashChange:function(){var b=this,a=b.getHash();if(a!==b.hash){b.hash=a;b.handleStateChange(a)}},init:function(c,a){var b=this;if(b.ready){Ext.callback(c,a,[b]);return}if(!Ext.isReady){Ext.onInternalReady(function(){b.init(c,a)});return}b.win=b.useTopWindow?window.top:window;b.hash=b.getHash();if(c){b.on("ready",c,a,{single:true})}b.startUp()},add:function(a,b){var c=this,d=false;if(b===false||c.getToken()!==a){c.setHash(a);d=true}return d},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));(Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on("change",this.onStateChange,this);this.clear()},onStateChange:function(d){var k=this,c=k.application,m=k.routes,g=m.length,o=k.queueRoutes,j=d.split(k.multipleToken),n=0,b=j.length,e,f,l,h,a;for(;n<b;n++){d=j[n];a=false;if(o){f=new Ext.app.route.Queue({token:d})}for(e=0;e<g;e++){l=m[e];h=l.recognize(d);if(h){a=true;if(o){f.queueAction(l,h)}else{l.execute(d,h)}}}if(o){f.runQueue()}if(!a&&c){c.fireEvent("unmatchedroute",d)}}},connect:function(c,d,a){var b={url:c,action:d,controller:a};if(Ext.isObject(d)){Ext.merge(b,d)}this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(c){var b=this.routes,a=b.length,e=[],f,d;for(f=0;f<a;++f){d=b[f];if(d.controller!==c){e.push(d)}}this.routes=e},recognize:function(e){var b=this.routes||[],f=0,a=b.length,c,d;for(;f<a;f++){c=b[f];d=c.recognize(e);if(d){return{route:c,args:d}}}return false},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(c,a){var d="get",e=c.split("."),f=e.length,b;for(b=0;b<f;b++){d+=Ext.String.capitalize(e[b])}d+=a;return d},resolveNamespace:function(a,f){var g=Ext.app.Controller,e=a.prototype.isProfile?g.profileRegex:g.controllerRegex,d,c,b;d=Ext.getClassName(a);c=f.$namespace||f.namespace||Ext.app.getNamespace(d)||((b=e.exec(d))&&b[1]);return c},processDependencies:function(q,r,d,e,i,b){if(!i||!i.length){return}var k=this,p=k.strings[e],c,n,m,a,f,g,l,h;if(!Ext.isArray(i)){i=[i]}for(f=0,g=i.length;f<g;f++){a=i[f];c=k.getFullName(a,e,d,b);i[f]=n=c.absoluteName;m=c.shortName;r.push(n);l=k.getGetterName(m,p.upper);if(!q[l]){q[l]=h=k.createGetter(p.getter,a)}if(h&&e!=="controller"){h["Ext.app.getter"]=true}}},getFullName:function(c,f,e,d){var a=c,b,g;if((b=c.indexOf("@"))>0){a=c.substring(0,b);g=c.substring(b+1)+"."+a}else{if(c.indexOf(".")>0&&(Ext.ClassManager.isCreated(c)||this.hasRegisteredPrefix(c))){g=c}else{if(e){g=e+"."+f+"."+(d?d+"."+c:c);a=c}else{g=c}}}return{absoluteName:g,shortName:a}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(b,c,a){var d=a.onBeforeCreated;a.onBeforeCreated=function(e,i){var j=Ext.app.Controller,g=[],f,h;h=e.prototype;f=j.resolveNamespace(e,i);if(f){h.$namespace=f}j.processDependencies(h,g,f,"model",i.models);j.processDependencies(h,g,f,"view",i.views);j.processDependencies(h,g,f,"store",i.stores);j.processDependencies(h,g,f,"controller",i.controllers);Ext.require(g,Ext.Function.pass(d,arguments,this))}},constructor:function(a){this.initAutoGetters();Ext.app.BaseController.prototype.constructor.apply(this,arguments)},normalizeRefs:function(b){var c=this,a=[];if(b){if(Ext.isObject(b)){Ext.Object.each(b,function(d,e){if(Ext.isString(e)){e={selector:e}}e.ref=d;a.push(e)})}else{if(Ext.isArray(b)){a=Ext.Array.merge(a,b)}}}b=c.refs;if(b){c.refs=null;b=c.normalizeRefs(b);if(b){a=Ext.Array.merge(a,b)}}return a},getRefMap:function(){var f=this,c=f._refMap,a,e,d,b;if(!c){a=f.getRefs();c=f._refMap={};if(a){for(b=0,d=a.length;b<d;b++){e=a[b];c[e.ref]=e.selector}}}return c},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a["Ext.app.getter"]){a.call(this)}}},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=true}},finishInit:function(f){var d=this,e=d.controllers,b,c,a;if(d._initialized&&e&&e.length){for(c=0,a=e.length;c<a;c++){b=d.getController(e[c]);b.finishInit(f)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(a){var f=this,b=0,e=a.length,g,d,c;a=Ext.Array.from(a);f.references=f.references||[];for(;b<e;b++){g=a[b];d=g.ref;c="get"+Ext.String.capitalize(d);if(!f[c]){f[c]=Ext.Function.pass(f.getRef,[d,g],f)}f.references.push(d.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,f,a){var c=this,e=c.refCache||(c.refCache={}),b=e[d];f=f||{};a=a||{};Ext.apply(f,a);if(f.forceCreate){return Ext.ComponentManager.create(f,"component")}if(!b){if(f.selector){e[d]=b=Ext.ComponentQuery.query(f.selector)[0]}if(!b&&f.autoCreate){e[d]=b=Ext.ComponentManager.create(f,"component")}if(b){b.on("beforedestroy",function(){e[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.getApplication();if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(c){var a,b;a=(c.indexOf("@")===-1)?c:c.split("@")[0];b=Ext.StoreManager.get(a);if(!b){c=Ext.app.Controller.getFullName(c,"store",this.$namespace);if(c){b=Ext.create(c.absoluteName,{id:a})}}return b},getModel:function(c){var b=Ext.app.Controller.getFullName(c,"model",this.$namespace),a=Ext.ClassManager.get(b.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(c)}return a},getProfile:function(a){a=Ext.app.Controller.getFullName(a,"profile",this.$namespace);return a},getView:function(a){var b=Ext.app.Controller.getFullName(a,"view",this.$namespace);return b&&Ext.ClassManager.get(b.absoluteName)},ensureId:function(){var a=this.getId();if(!a){this.setId(this.getModuleClassName(this.$className,"controller"))}},destroy:function(a,b){var d=this,f=d.application,e,c;if(!b&&f){f.unregister(d)}d.application=null;if(a){e=d.refCache;for(c in e){if(e.hasOwnProperty(c)){Ext.destroy(e[c])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.app.Application",Ext.app.Controller,{isApplication:true,scope:undefined,namespaces:[],paths:null,config:{name:"",appProperty:"app",profiles:[],currentProfile:null,mainView:{$value:null,lazy:true},defaultToken:null,glyphFontFamily:null},onClassExtended:function(h,c,g){var b=Ext.app.Controller,d=h.prototype,j=[],e,i,a,f;a=c.name||h.superclass.name;if(a){c.$namespace=a;Ext.app.addNamespaces(a)}if(c.namespaces){Ext.app.addNamespaces(c.namespaces)}if(c["paths processed"]){delete c["paths processed"]}else{Ext.app.setupPaths(a,("appFolder" in c)?c.appFolder:h.superclass.appFolder,c.paths)}b.processDependencies(d,j,a,"profile",c.profiles);d.getDependencies(h,c,j);if(j.length){e=g.onBeforeCreated;g.onBeforeCreated=function(k,m){var l=Ext.Array.clone(arguments);Ext.require(j,function(){return e.apply(this,l)})}}},getDependencies:Ext.emptyFn,constructor:function(a){var b=this;Ext.app.route.Router.application=b;Ext.app.Controller.prototype.constructor.apply(this,arguments);b.doInit(b);b.initNamespace();Ext.on("appupdate",b.onAppUpdate,b,{single:true});this.onProfilesReady()},onAppUpdate:Ext.emptyFn,onProfilesReady:function(){var e=this,b=e.getProfiles(),d=b.length,f,c,a;for(c=0;c<d;c++){a=Ext.create(b[c],{application:e});if(a.isActive()&&!f){f=a;e.setCurrentProfile(f)}}if(f){f.init()}e.initControllers();e.onBeforeLaunch();e.finishInitControllers()},initNamespace:function(){var c=this,a=c.getAppProperty(),b;b=Ext.namespace(c.getName());if(b){b.getApplication=function(){return c};if(a){if(!b[a]){b[a]=c}}}},initControllers:function(){var d=this,e=Ext.Array.from(d.controllers),b=d.getCurrentProfile(),a,c;d.controllers=new Ext.util.MixedCollection();for(a=0,c=e.length;a<c;a++){d.getController(e[a])}if(b){e=b.getControllers();for(a=0,c=e.length;a<c;a++){d.getController(e[a])}}},finishInitControllers:function(){var c=this,d,b,a;d=c.controllers.getRange();for(b=0,a=d.length;b<a;b++){d[b].finishInit(c)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var i=this,e=Ext.util.History,a=i.getDefaultToken(),g=i.getCurrentProfile(),b,h,j,f,d;i.initMainView();if(g){g.launch()}i.launch.call(i.scope||i);i.launched=true;i.fireEvent("launch",i);b=i.controllers.items;j=b.length;for(h=0;h<j;h++){f=b[h];f.onLaunch(i)}if(!e.ready){e.init()}d=e.getToken();if(d||d===a){Ext.app.route.Router.onStateChange(d)}else{if(a){e.add(a)}}if(Ext.Microloader&&Ext.Microloader.appUpdate&&Ext.Microloader.appUpdate.updated){Ext.Microloader.fireAppUpdate()}Ext.defer(Ext.ClassManager.clearNamespaceCache,2000,Ext.ClassManager)},getModuleClassName:function(a,b){return Ext.app.Controller.getFullName(a,b,this.getName()).absoluteName},initMainView:function(){var c=this,b=c.getCurrentProfile(),a;if(b){a=b.getMainView()}if(a){c.setMainView(a)}else{c.getMainView()}},applyMainView:function(b){var a=this.getView(b);return a.create()},createController:function(a){return this.getController(a)},destroyController:function(a){if(typeof a==="string"){a=this.getController(a,true)}Ext.destroy(a)},getController:function(b,a){var k=this,d=k.controllers,h,f,g,e,j,l;f=d.get(b);if(!f){l=d.items;for(e=0,g=l.length;e<g;++e){j=l[e];h=j.getModuleClassName();if(h&&h===b){f=j;break}}}if(!f&&!a){h=k.getModuleClassName(b,"controller");f=Ext.create(h,{application:k,moduleClassName:b});d.add(f);if(k._initialized){f.doInit(k)}}return f},unregister:function(a){this.controllers.remove(a)},getApplication:function(){return this},destroy:function(a){var c=this,e=c.controllers,b=Ext.namespace(c.getName()),d=c.getAppProperty();Ext.destroy(c.viewport);if(e){e.each(function(f){f.destroy(a,true)})}c.controllers=null;Ext.app.Controller.prototype.destroy.call(this,a,true);if(b&&b[d]===c){delete b[d]}},updateGlyphFontFamily:function(a){Ext.setGlyphFontFamily(a)},applyProfiles:function(a){var b=this;return Ext.Array.map(a,function(c){return b.getModuleClassName(c,"profile")})}},1,0,0,0,0,0,[Ext.app,"Application"],0));Ext.application=function(a){var b=function(c){Ext.onReady(function(){var d=Ext.viewport;d=d&&d.Viewport;if(d&&d.setup){d.setup(c.prototype.config.viewport)}Ext.app.Application.instance=new c()})};if(typeof a==="string"){Ext.require(a,function(){b(Ext.ClassManager.get(a))})}else{a=Ext.apply({extend:"Ext.app.Application"},a);Ext.app.setupPaths(a.name,a.appFolder,a.paths);a["paths processed"]=true;Ext.define(a.name+".$application",a,function(){b(this)})}};Ext.define("Ext.overrides.app.Application",{override:"Ext.app.Application",autoCreateViewport:false,config:{enableQuickTips:true},applyMainView:function(e){var b,d,c,a;if(typeof e==="string"){b=this.getView(e)}else{b=Ext.ClassManager.getByConfig(e)}d=b.prototype;if(!d.isViewport){a=d.plugins;a=["viewport"].concat(a?Ext.Array.from(a,true):[]);c={plugins:a}}return b.create(c)},getDependencies:function(a,f,d){var g=Ext.app.Controller,e=a.prototype,c=f.$namespace,b=f.autoCreateViewport;if(b){if(b===true){b="Viewport"}else{d.push("Ext.plugin.Viewport")}g.processDependencies(e,d,c,"view",b)}},onBeforeLaunch:function(){var b=this,a=b.autoCreateViewport;if(b.getEnableQuickTips()){b.initQuickTips()}if(a){b.initViewport()}arguments.callee.$previous.apply(this,arguments)},getViewportName:function(){var a=null,b=this.autoCreateViewport;if(b){a=(b===true)?"Viewport":b}return a},initViewport:function(){this.setMainView(this.getViewportName())},initQuickTips:function(){Ext.tip.QuickTipManager.init()}});(Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:true,constructor:function(a){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=a;this.monitoredClasses=[Ext.Component]},match:function(d,a,b){var c=false;if(a==="#"){c=b===d.getController()}else{c=d.is(a)}return c},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0));(Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:true,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var a=this.getView(),b;if(a){b=this.getCloseViewAction();a[b]()}},control:function(a,b){var c=a;if(Ext.isString(a)){c={};c[a]=b}this.compDomain.listen(c,this)},listen:function(c,a){var b=c.component;if(b){c=Ext.apply({},c);delete c.component;this.control(b)}this.callParent([c,a])},getReferences:function(){var a=this.view;return a&&a.getReferences()},getView:function(){return this.view},lookup:function(b){var a=this.view;return a&&a.lookup(b)},lookupReference:function(a){return this.lookup(a)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(d,b){var c=this.view,a=false,e=arguments;if(c){if(c!==b){e=Ext.Array.slice(e);e.splice(1,0,c)}a=c.fireEvent.apply(c,e)}return a},privates:{view:null,ensureId:function(){var a=this.getId();if(!a){this.setId(Ext.id(null,"controller-"))}},attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},clearReference:function(b){var a=this.view;if(a){a.clearReference(b)}},clearReferences:function(){var a=this.view;if(a){a.clearReferences()}},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit(a)}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0));(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:false},current:-1,total:0,running:false,complete:false,exception:false,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.operations=[];b.exceptions=[]},add:function(b){var d=this,c,a;if(Ext.isArray(b)){for(c=0,a=b.length;c<a;++c){d.add(b[c])}}else{d.total++;b.setBatch(d);d.operations.push(b)}return d},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(c,a){var b=c.order-a.order;if(b){return b}var f=c.entityType,d=a.entityType,e;if(!f||!d){return 0}if(!(e=f.rank)){f.schema.rankEntities();e=f.rank}return(e-d.rank)*c.foreignKeyDirection},start:function(a){var b=this;if(!b.operations.length||b.running){return b}b.exceptions.length=0;b.exception=false;b.running=true;return b.runOperation(Ext.isDefined(a)?a:b.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=false;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var a=null,b=this.current;if(!(b===-1||this.complete)){a=this.operations[b]}return a},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(c){var d=this,b=d.operations,a=b[c];if(a===undefined){d.running=false;d.complete=true;d.fireEvent("complete",d,b[b.length-1])}else{d.current=c;a.setInternalCallback(d.onOperationComplete);a.setInternalScope(d);a.execute()}return d},onOperationComplete:function(a){var c=this,b=a.hasException();if(b){c.exception=true;c.exceptions.push(a);c.fireEvent("exception",c,a)}if(b&&c.getPauseOnException()){c.pause()}else{c.fireEvent("operationcomplete",c,a);c.runNextOperation()}}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var c=this,b=c._initters,a;c.text=d;for(a in b){c[a]=b[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(h,j){var e=this,d=e.slots,b=e.buffer,a=d.length,c,g,f;for(c=0;c<a;++c){g=d[c];if(g){if((f=h[g.pos])==null){f=""}if(g.not){f=!f}if(g.format){f=g.format(f,j)}b[c]=f}}return b.join("")},getTokens:function(){return this.tokens},parse:function(){var k=this,p=k.text,e=[],h=[],j=[],o={},n=0,d=k.tokenRe,l=0,b,f,a,g,q,m,c;for(f in k._initters){delete k[f]}k.buffer=e;k.slots=h;k.tokens=j;while((g=d.exec(p))){a=g.index-n;if(a){e[l++]=p.substring(n,n+a);n+=a}n+=(q=g[0]).length;m={fmt:(b=g[3]||null),index:g[1]?parseInt(g[1],10):null,not:q.charAt(1)==="!",token:g[2]||null};c=m.token||String(m.index);if(c in o){m.pos=o[c]}else{o[c]=m.pos=j.length;j.push(c)}if(b){if(b.substring(0,5)==="this."){m.fmt=b.substring(5)}else{m.scope=Ext.util.Format}k.parseArgs(g[4],m)}h[l++]=m}if(n<p.length){e[l++]=p.substring(n)}return k},parseArgs:function(f,g){var e=this,b=e.numberRe,h=e.stringRe,j,d,c,a;if(!f){d=[]}else{if(f.indexOf(",")<0){d=[f]}else{d=f.split(",")}}g=g||{};a=d.length;g.args=d;for(c=0;c<a;++c){j=d[c];if(j==="true"){d[c]=true}else{if(j==="false"){d[c]=false}else{if(j==="null"){d[c]=null}else{if(b.test(j)){d[c]=parseFloat(j)}else{if(h.test(j)){d[c]=j.substring(1,j.length-1)}else{g.fn=Ext.functionFactory("return ["+f+"];");g.format=e._formatEval;break}}}}}}if(!g.format){d.unshift(0);g.format=e._formatArgs}return g},parseFormat:function(a){var d=this,c=d.formatRe.exec(a),e={fmt:a,scope:Ext.util.Format},b;b=c[2];if(b){e.fmt=c[1];d.parseArgs(b,e)}else{e.args=[0];e.format=d._formatArgs}return e},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(c,b){var a=this.fn();a.unshift(c);b=this.scope||b;return b[this.fmt].apply(b,a)}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(b==="#"){a=!!d.isApplication}else{if(this.idMatchRe.test(b)){a=d.getId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:""},clear:function(a){var b=this;b.pageMapGeneration=(b.pageMapGeneration||0)+1;b.indexMap={};Ext.util.LruCache.prototype.clear.call(this,a)},forEach:function(k,m){var g=this,d=Ext.Object.getKeys(g.map),a=d.length,h=g.getPageSize(),c,b,l,f,e;for(c=0;c<a;c++){d[c]=+d[c]}Ext.Array.sort(d,Ext.Array.numericSortFn);m=m||g;for(c=0;c<a;c++){l=d[c];f=g.getPage(l);e=f.length;for(b=0;b<e;b++){if(k.call(m,f[b],(l-1)*h+b)===false){return}}}},findBy:function(c,b){var d=this,a=null;b=b||d;d.forEach(function(f,e){if(c.call(b,f,e)){a=f;return false}});return a},findIndexBy:function(c,b){var d=this,a=-1;b=b||d;d.forEach(function(f,e){if(c.call(b,f)){a=e;return false}});return a},find:function(g,f,h,d,c,b){if(Ext.isEmpty(f,false)){return null}var e=Ext.String.createRegex(f,d,c,b),a=this.getRootProperty();return this.findBy(function(i){return i&&e.test((a?i[a]:i)[g])},null,h)},findIndex:function(g,f,h,d,c,b){if(Ext.isEmpty(f,false)){return null}var e=Ext.String.createRegex(f,d,c,b),a=this.getRootProperty();return this.findIndexBy(function(i){return i&&e.test((a?i[a]:i)[g])},null,h)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(l,a){var j=this,k=j.getPageSize(),c=l+Math.floor((a.length-1)/k),h=(l-1)*k,f=j.indexMap,e,b,d,g;for(g=0;l<=c;l++,g+=k){e=Ext.Array.slice(a,g,g+k);for(b=0,d=e.length;b<d;b++){f[e[b].internalId]=h++}j.add(l,e);j.fireEvent("pageadd",j,l,e)}},getCount:function(){var a=Ext.util.LruCache.prototype.getCount.call(this);if(a){a=(a-1)*this.getPageSize()+this.last.value.length}return a},getByInternalId:function(a){var b=this.indexMap[a];if(b!=null){return this.getAt(b)}},indexOf:function(b){var a=-1;if(b){a=this.indexMap[b.internalId];if(a==null){a=-1}}return a},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(f){var e=this,c=e.getPage(f),b,d,a;if(c){if(e.fireEvent("beforepageremove",e,f,c)!==false){b=c.length;for(d=0;d<b;d++){delete e.indexMap[c[d].internalId]}a=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments);e.fireEvent("pageremove",e,f,c);c.length=0}}return a},getPage:function(a){return this.get(a)},hasRange:function(e,b){var c=this,a=c.getPageFromRecordIndex(e),d=c.getPageFromRecordIndex(b);for(;a<=d;a++){if(!c.hasPage(a)){return false}}return(d-1)*c._pageSize+c.getPage(d).length>b},hasPage:function(a){return !!this.get(a)},peekPage:function(a){return this.map[a]},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(a,b){b--;if(!this.hasRange(a,b)){Ext.raise("PageMap asked for range which it does not have")}var g=this,d=Ext.Array,h=g.getPageSize(),k=g.getPageFromRecordIndex(a),e=g.getPageFromRecordIndex(b),c=(k-1)*h,m=(e*h)-1,i=k,n=[],l,f,j;for(;i<=e;i++){if(i===k){l=a-c;j=l>0}else{l=0;j=false}if(i===e){f=h-(m-b);j=j||f<h}if(j){d.push(n,d.slice(g.getPage(i),l,f))}else{d.push(n,g.getPage(i))}}return n},destroy:function(){Ext.util.LruCache.prototype.destroy.call(this);this.indexMap={}}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:true,buffered:true,config:{data:0,pageSize:25,remoteSort:true,remoteFilter:true,sortOnLoad:false,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:false},applyData:function(b){var a=this.data||(this.data=this.createDataCollection());return a},applyProxy:function(a){a=Ext.data.ProxyStore.prototype.applyProxy.call(this,a);if(a&&a.setEnablePaging){a.setEnablePaging(true)}return a},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(a){this.group(a)},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var b=this,a=new Ext.data.PageMap({store:b,rootProperty:"data",pageSize:b.getPageSize(),maxSize:b.getPurgePageCount(),listeners:{clear:b.onPageMapClear,scope:b}});b.relayEvents(a,["beforepageremove","pageadd","pageremove"]);b.pageRequests={};return a},removeAll:function(a){var b=this,c=b.getData();if(c){if(a){b.suspendEvent("clear")}c.clear();if(a){b.resumeEvent("clear")}}},flushLoad:function(){var b=this,a=b.pendingLoadOptions;b.clearLoadTask();if(!a){return}b.getData().clear();a.page=1;a.start=0;a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},reload:function(m){var g=this,e=g.getData(),j=Number.MAX_VALUE,h,b,f,l,d,a,k,c;if(!m){m={}}if(g.loading||g.fireEvent("beforeload",g,m)===false){return}a=function(){var n=g.totalCount,i=b-h;if(b>=n){b=n-1;h=Math.max(b-i,0)}if(g.rangeCached(h,Math.min(b,g.totalCount))){g.loading=false;e.un("pageadd",a);c=e.getRange(h,b+1);g.fireEvent("load",g,c,true);g.fireEvent("refresh",g)}};k=Math.ceil((g.getLeadingBufferZone()+g.getTrailingBufferZone())/2);if(g.lastRequestStart&&g.preserveScrollOnReload){h=g.lastRequestStart;b=g.lastRequestEnd;j=g.getTotalCount()}else{h=m.start||0;b=h+(m.count||g.getPageSize())-1}e.clear(true);delete g.totalCount;h=Math.max(h-k,0);b=Math.min(b+k,j);f=g.getPageFromRecordIndex(h);l=g.getPageFromRecordIndex(b);g.loading=true;m.waitForReload=a;e.on("pageadd",a);for(d=f;d<=l;d++){g.prefetchPage(d,m)}},filter:function(){Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(c,a){var b=this;a=a||{};a.page=b.currentPage=c;a.start=(c-1)*b.getPageSize();a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},clearData:function(c){var a=this,b=a.getData();if(b){b.clear()}},getCount:function(){return this.totalCount||0},getRange:function(d,g,l){var k=this,e=k.totalCount-1,f=k.lastRequestStart,m=[],h=k.getData(),c,j,b,a,i;l=Ext.apply({prefetchStart:d,prefetchEnd:g},l);g=(g>=k.totalCount)?e:g;j=d===0?0:d-1;b=g===e?g:g+1;k.lastRequestStart=d;k.lastRequestEnd=g;if(k.rangeCached(j,b)){k.onRangeAvailable(l);m=h.getRange(d,g+1)}else{k.fireEvent("cachemiss",k,d,g);a=k.getPageFromRecordIndex(j);i=k.getPageFromRecordIndex(b);c=function(n,p,o){if(p>=a&&p<=i&&k.rangeCached(j,b)){k.fireEvent("cachefilled",k,d,g);h.un("pageadd",c);k.onRangeAvailable(l)}};h.on("pageadd",c);k.prefetchRange(d,g)}k.primeCache(d,g,d<f?-1:1);return m},getById:function(b){var a=this.data.findBy(function(c){return c.getId()===b});return a},getAt:function(a){var b=this.getData();if(b.hasRange(a,a)){return b.getAt(a)}},getByInternalId:function(a){return this.data.getByInternalId(a)},contains:function(a){return this.indexOf(a)>-1},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(b,d){var c=this,a;if(b&&typeof b==="string"){a=c.grouper;if(!a){c.grouper=new Ext.util.Grouper({property:b,direction:d||"ASC",root:"data"})}else{if(d===undefined){a.toggle()}else{a.setDirection(d)}}}else{c.grouper=b?c.getSorters().decodeSorter(b,"Ext.util.Grouper"):null}c.getData().clear();c.loadPage(1,{callback:function(){c.fireEvent("groupchange",c,c.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},calculatePageCacheSize:function(a){var c=this,b=c.getPurgePageCount();return b?Math.max(c.getData().getMaxSize()||0,Math.ceil((a+c.getTrailingBufferZone()+c.getLeadingBufferZone())/c.getPageSize())*2+b):0},loadToPrefetch:function(r){var l=this,c=r,g,b,n,m=r.start,a=r.start+r.limit-1,q=(l.getViewSize()||r.limit),h=Math.min(a,r.start+q-1),j=l.getPageFromRecordIndex(Math.max(m-l.getTrailingBufferZone(),0)),p=l.getPageFromRecordIndex(a+l.getLeadingBufferZone()),f=l.getData(),k=function(){b=b||[];if(r.loadCallback){r.loadCallback.call(r.scope||l,b,e,true)}if(r.callback){r.callback.call(r.scope||l,b,m||0,a||0,r)}},o=function(){l.fireEvent("datachanged",l);l.fireEvent("refresh",l);l.fireEvent("load",l,b,true)},d=function(){if(l.rangeCached(m,h)){l.loading=false;b=f.getRange(m,h+1);f.un("pageadd",d);if(l.hasListeners.guaranteedrange){l.guaranteeRange(m,h,r.callback,r.scope)}k();o()}},e;f.setMaxSize(l.calculatePageCacheSize(q));if(l.fireEvent("beforeload",l,r)!==false){delete l.totalCount;l.loading=true;if(r.callback){c=Ext.apply({},r);delete c.callback}l.on("prefetch",function(s,i,u,t){e=t;if(u){if((n=l.getTotalCount())){f.on("pageadd",d);h=Math.min(h,n-1);p=l.getPageFromRecordIndex(Math.min(h+l.getLeadingBufferZone(),n-1));for(g=j+1;g<=p;++g){l.prefetchPage(g,c)}}else{k();o()}}else{l.loading=false;k();l.fireEvent("load",l,i,false)}},null,{single:true});l.prefetchPage(j,c)}},prefetch:function(d){var e=this,b=e.getPageSize(),f=e.getData(),c,a;if(b){if(e.lastPageSize&&b!=e.lastPageSize){Ext.raise("pageSize cannot be dynamically altered")}if(!f.getPageSize()){f.setPageSize(b)}}else{e.pageSize=f.setPageSize(b=d.limit)}e.lastPageSize=b;if(!d.page){d.page=e.getPageFromRecordIndex(d.start);d.start=(d.page-1)*b;d.limit=Math.ceil(d.limit/b)*b}a=e.pageRequests[d.page];if(!a||a.getOperation().pageMapGeneration!==f.pageMapGeneration){d=Ext.apply({action:"read",filters:e.getFilters().items,sorters:e.getSorters().items,grouper:e.getGrouper(),internalCallback:e.onProxyPrefetch,internalScope:e},d);c=e.createOperation("read",d);c.pageMapGeneration=f.pageMapGeneration;if(e.fireEvent("beforeprefetch",e,c)!==false){e.pageRequests[d.page]=c.execute();if(e.getProxy().isSynchronous){delete e.pageRequests[d.page]}}}return e},onPageMapClear:function(){var c=this,b=c.wasLoading,a=c.pageRequests,e=c.getData(),d;e.clearListeners();e.on("clear",c.onPageMapClear,c);c.relayEvents(e,["beforepageremove","pageadd","pageremove"]);c.loading=true;c.totalCount=0;for(d in a){if(a.hasOwnProperty(d)){a[d].getOperation().abort()}}c.fireEvent("clear",c);c.loading=b},prefetchPage:function(e,b){var d=this,a=d.getPageSize(),f=(e-1)*a,c=d.totalCount;if(c!==undefined&&d.data.getCount()===c){return}d.prefetch(Ext.applyIf({page:e,start:f,limit:a},b))},onProxyPrefetch:function(d){if(this.destroyed){return}var h=this,i=d.getResultSet(),c=d.getRecords(),f=d.wasSuccessful(),g=d.getPage(),b=d.waitForReload,k=h.totalCount,a=h.pageRequests,j,e;if(d.pageMapGeneration===h.getData().pageMapGeneration){if(i){h.totalCount=i.getTotal();if(h.totalCount!==k){h.fireEvent("totalcountchange",h.totalCount)}}if(g!==undefined){delete h.pageRequests[g]}h.loading=false;h.fireEvent("prefetch",h,c,f,d);if(f){if(h.totalCount===0){if(b){for(j in a){e=a[j].getOperation();if(e.waitForReload===b){delete e.waitForReload}}h.getData().un("pageadd",b);h.fireEvent("load",h,[],true);h.fireEvent("refresh",h)}}else{h.cachePage(c,d.getPage())}}Ext.callback(d.getCallback(),d.getScope()||h,[c,d,f])}},cachePage:function(b,e){var d=this,a=b.length,c;if(!Ext.isDefined(d.totalCount)){d.totalCount=b.length;d.fireEvent("totalcountchange",d.totalCount)}for(c=0;c<a;c++){b[c].join(d)}d.getData().addPage(e,b)},rangeCached:function(b,a){return this.getData().hasRange(b,a)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return !!this.pageRequests[a]},rangeSatisfied:function(b,a){return this.rangeCached(b,a)},onRangeAvailable:function(d){var e=this,b=e.getTotalCount(),f=d.prefetchStart,a=(d.prefetchEnd>b-1)?b-1:d.prefetchEnd,c;a=Math.max(0,a);c=e.getData().getRange(f,a+1);if(d.fireEvent!==false){e.fireEvent("guaranteedrange",c,f,a,d)}if(d.callback){d.callback.call(d.scope||e,c,f,a,d)}},guaranteeRange:function(e,a,d,c,b){b=Ext.apply({callback:d,scope:c},b);this.getRange(e,a+1,b)},prefetchRange:function(g,b){var d=this,c,a,f,e=d.getData();if(!d.rangeCached(g,b)){c=d.getPageFromRecordIndex(g);a=d.getPageFromRecordIndex(b);e.setMaxSize(d.calculatePageCacheSize(b-g+1));for(f=c;f<=a;f++){if(!d.pageCached(f)){d.prefetchPage(f)}}}},primeCache:function(h,c,g){var f=this,e=f.getLeadingBufferZone(),d=f.getTrailingBufferZone(),b=f.getPageSize(),a=f.totalCount;if(g===-1){h=Math.max(h-e,0);c=Math.min(c+d,a-1)}else{if(g===1){h=Math.max(Math.min(h-d,a-b),0);c=Math.min(c+e,a-1)}else{h=Math.min(Math.max(Math.floor(h-((e+d)/2)),0),a-f.pageSize);c=Math.min(Math.max(Math.ceil(c+((e+d)/2)),0),a-1)}}f.prefetchRange(h,c)},sort:function(b,a,c){if(arguments.length===0){this.clearAndLoad()}else{this.getSorters().addSort(b,a,c)}},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){a.fireEvent("beforesort",a,b);a.clearAndLoad({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("sort",a,b)}},clearAndLoad:function(a){this.getData().clear();this.loadPage(1,a)},privates:{isLast:function(a){return this.indexOf(a)===this.getTotalCount()-1},isMoving:function(){return false}}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0));(Ext.cmd.derive("Ext.data.NodeInterface",Ext.Base,{statics:{decorate:function(b){var d=Ext.data.schema.Schema.lookupEntity(b),f=d.prototype,a,c,e;if(!d.prototype.isObservable){d.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable)}if(f.isNode){return}a=f.idProperty;c=d.getField(a);e=c.type;d.override(this.getPrototypeBody());d.addFields([{name:"parentId",type:e,defaultValue:null,allowNull:c.allowNull},{name:"index",type:"int",defaultValue:-1,persist:false,convert:null},{name:"depth",type:"int",defaultValue:0,persist:false,convert:null},{name:"expanded",type:"bool",defaultValue:false,persist:false,convert:null},{name:"expandable",type:"bool",defaultValue:true,persist:false,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:false,convert:null},{name:"leaf",type:"bool",defaultValue:false},{name:"cls",type:"string",defaultValue:"",persist:false,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:false,convert:null},{name:"icon",type:"string",defaultValue:"",persist:false,convert:null},{name:"root",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isLast",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isFirst",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"loaded",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"loading",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"href",type:"string",defaultValue:"",persist:false,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:false,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:false,convert:null},{name:"children",type:"auto",defaultValue:null,persist:false,convert:null},{name:"visible",type:"boolean",defaultValue:true,persist:false},{name:"text",type:"string",persist:false}])},getPrototypeBody:function(){var a={idchanged:true,append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true,expand:true,collapse:true,beforeexpand:true,beforecollapse:true,sort:true},b={silent:true};return{isNode:true,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var c=this;c.mixins.observable.constructor.call(c);c.callParent(arguments);c.childNodes=[];return c},createNode:function(c){var i=this,g=i.childType,l,j,e,k,h,f,d=i.self;if(!c.isModel){if(g){d=i.schema.getEntity(g)}else{l=i.getTreeStore();j=l&&l.getProxy().getReader();e=i.getProxy();k=e?e.getReader():null;h=!j||(k&&k.initialConfig.typeProperty)?k:j;if(h){f=h.getTypeProperty();if(f){d=h.getChildType(i.schema,c,f)}}}c=new d(c)}if(!c.childNodes){c.firstChild=c.lastChild=c.parentNode=c.previousSibling=c.nextSibling=null;c.childNodes=[]}return c},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(c){this.firstChild=c},setLastChild:function(c){this.lastChild=c},updateInfo:function(h,t){var v=this,d=v.data,u=d.depth,f={},e=v.childNodes,s=e.length,j=v.phantom,q=v.fields,g=v.modified||(v.modified={}),o,n,c,k,w,l=t.parentId,m,p,r;for(o in t){c=q[v.fieldOrdinals[o]];n=t[o];p=c&&c.persist;k=d[o];m=p&&(o==="index")&&(k!==-1)&&(l&&l!==g.parentId);if(!m&&v.isEqual(k,n)){continue}d[o]=n;if(p){if(!m&&g.hasOwnProperty(o)){if(v.isEqual(g[o],n)){delete g[o];v.dirty=false;for(w in g){if(g.hasOwnProperty(w)){v.dirty=true;break}}}}else{v.dirty=true;g[o]=k}}}if(h){v.commit();v.phantom=j}if(v.data.depth!==u){f={depth:v.data.depth+1};for(r=0;r<s;r++){e[r].updateInfo(h,f)}}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var c=this;if(c.get("expandable")){return !(c.isLeaf()||(c.isLoaded()&&!c.phantom&&!c.hasChildNodes()))}return false},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(f,n,g){var l=this,h,k,j,m,c,p={isLast:true,parentId:l.getId(),depth:(l.data.depth||0)+1},o,e=l.getTreeStore(),d=e&&e.bulkUpdate;Ext.suspendLayouts();if(Ext.isArray(f)){k=f.length;o=new Array(k);l.callTreeStore("beginFill");for(h=0;h<k;h++){o[h]=l.appendChild(f[h],n,g)}l.callTreeStore("endFill",[o])}else{f=l.createNode(f);if(n!==true&&l.fireEventArgs("beforeappend",[l,f])===false){Ext.resumeLayouts(true);return false}j=l.childNodes.length;m=f.parentNode;if(m){if(n!==true&&f.fireEventArgs("beforemove",[f,m,l,j])===false){Ext.resumeLayouts(true);return false}if(m.removeChild(f,false,n,m.getTreeStore()===e)===false){Ext.resumeLayouts(true);return false}}e&&e.beginUpdate();j=l.childNodes.length;if(j===0){l.setFirstChild(f)}l.childNodes[j]=f;f.parentNode=l;f.nextSibling=null;l.setLastChild(f);c=l.childNodes[j-1];if(c){f.previousSibling=c;c.nextSibling=f;c.updateInfo(g,{isLast:false});if(!d){c.triggerUIUpdate()}}else{f.previousSibling=null}p.isFirst=j===0;p.index=j;f.updateInfo(g,p);if(l.isLeaf()){l.set("leaf",false)}if(!l.isLoaded()){if(d){l.data.loaded=true}else{l.set("loaded",true)}}else{if(l.childNodes.length===1&&!d){l.triggerUIUpdate()}}if(j&&l.childNodes[j-1].isExpanded()&&!d){l.childNodes[j-1].cascadeBy(l.triggerUIUpdate)}if(e){e.registerNode(l,!d);if(d){e.registerNode(f)}}if(n!==true){l.fireEventArgs("append",[l,f,j]);if(m){f.fireEventArgs("move",[f,m,l,j])}}l.callTreeStore("onNodeAppend",[f,j]);o=f;if(e){e.endUpdate()}}Ext.resumeLayouts(true);return o},getOwnerTree:function(){var c=this.getTreeStore();if(c){return c.ownerTree}},getTreeStore:function(){var c=this;while(c&&!c.treeStore){c=c.parentNode}return c&&c.treeStore},removeChild:function(g,e,o,n){var m=this,l=m.indexOf(g),j,h,c,f=m.getTreeStore(),d=f&&f.bulkUpdate,k;if(l===-1||(o!==true&&m.fireEventArgs("beforeremove",[m,g,!!n])===false)){return false}Ext.suspendLayouts();f&&f.beginUpdate();Ext.Array.erase(m.childNodes,l,1);if(m.firstChild===g){m.setFirstChild(g.nextSibling)}if(m.lastChild===g){m.setLastChild(g.previousSibling)}c=g.previousSibling;if(c){g.previousSibling.nextSibling=g.nextSibling}if(g.nextSibling){g.nextSibling.previousSibling=g.previousSibling;if(l===0){g.nextSibling.updateInfo(false,{isFirst:true})}for(j=l,h=m.childNodes.length;j<h;j++){m.childNodes[j].updateInfo(false,{index:j})}}else{if(c){c.updateInfo(false,{isLast:true});if(!d){if(c.isExpanded()){c.cascadeBy(m.triggerUIUpdate)}else{c.triggerUIUpdate()}}}}if(!m.childNodes.length&&!d){m.triggerUIUpdate()}Ext.resumeLayouts(true);if(o!==true){k={parentNode:g.parentNode,previousSibling:g.previousSibling,nextSibling:g.nextSibling};m.callTreeStore("beforeNodeRemove",[[g],!!n]);g.previousSibling=g.nextSibling=g.parentNode=null;m.fireEventArgs("remove",[m,g,!!n,k]);m.callTreeStore("onNodeRemove",[[g],!!n])}if(e){g.erase(true)}else{g.clear()}if(!n){g.set({parentId:null,lastParentId:m.getId()},b)}if(f){f.endUpdate()}return g},copy:function(f,e){var h=this,d=h.callParent([f]),c=h.childNodes?h.childNodes.length:0,g;if(e){for(g=0;g<c;g++){d.appendChild(h.childNodes[g].copy(undefined,true))}}return d},clear:function(c){var d=this;d.parentNode=d.previousSibling=d.nextSibling=null;if(c){d.firstChild=d.lastChild=d.childNodes=null}},drop:function(){var g=this,j=g.childNodes,d=g.parentNode,c=j?j.length:0,e,f,h;g.callParent();if(d){h=g.getTreeStore();d.removeChild(g)}else{if(g.get("root")){h=g.getTreeStore();h.setRoot(null)}}h&&h.beginUpdate();for(e=0;e<c;e++){f=j[e];f.clear();f.drop()}h&&h.endUpdate()},erase:function(d){var g=this,h=g.childNodes,c=h&&h.length,e,f;g.remove();g.clear(true);g.callParent([d]);for(e=0;e<c;e++){f=h[e];f.parentNode=null;f.erase(d)}},insertBefore:function(f,k,o){var l=this,j=l.indexOf(k),m=f.parentNode,n=j,g,c,h,e=l.getTreeStore(),d=e&&e.bulkUpdate;if(!k){return l.appendChild(f)}if(f===k){return false}f=l.createNode(f);if(o!==true&&l.fireEventArgs("beforeinsert",[l,f,k])===false){return false}if(m===l&&l.indexOf(f)<j){n--}if(m){if(o!==true&&f.fireEventArgs("beforemove",[f,m,l,j,k])===false){return false}if(m.removeChild(f,false,o,m.getTreeStore()===e)===false){return false}}e&&e.beginUpdate();if(n===0){l.setFirstChild(f)}Ext.Array.splice(l.childNodes,n,0,f);f.parentNode=l;f.nextSibling=k;k.previousSibling=f;c=l.childNodes[n-1];if(c){f.previousSibling=c;c.nextSibling=f}else{f.previousSibling=null}f.updateInfo(false,{parentId:l.getId(),index:n,isFirst:n===0,isLast:false,depth:(l.data.depth||0)+1});for(h=n+1,g=l.childNodes.length;h<g;h++){l.childNodes[h].updateInfo(false,{index:h})}if(!l.isLoaded()){if(d){l.data.loaded=true}else{l.set("loaded",true)}}else{if(l.childNodes.length===1&&!d){l.triggerUIUpdate()}}if(e){e.registerNode(l,!d)}if(o!==true){l.fireEventArgs("insert",[l,f,k]);if(m){f.fireEventArgs("move",[f,m,l,n,k])}}l.callTreeStore("onNodeInsert",[f,n]);if(e){e.endUpdate()}return f},insertChild:function(c,e){var d=this.childNodes[c];if(d){return this.insertBefore(e,d)}else{return this.appendChild(e)}},isLastVisible:function(){var e=this,c=e.data.isLast,d=e.nextSibling;if(!c&&e.getTreeStore().isFiltered()){while(d){if(d.data.visible){return false}d=d.nextSibling}return true}return c},remove:function(d,e){var f=this,c=f.parentNode;if(c){c.removeChild(f,d,e)}else{if(d){f.erase(true)}}return f},removeAll:function(c,l,f){var j=this,k=j.childNodes,h=k.length,e,d,g;if(!h){return}if(!f){d=j.getTreeStore();if(d){d.beginUpdate();d.suspendEvent("remove");j.callTreeStore("beforeNodeRemove",[k,false])}}for(g=0;g<h;++g){e=k[g];e.previousSibling=e.nextSibling=e.parentNode=null;j.fireEventArgs("remove",[j,e,false]);if(c){e.erase(true)}else{e.removeAll(false,l,true)}}if(!f&&d){d.resumeEvent("remove");j.callTreeStore("onNodeRemove",[k,false]);d.endUpdate()}j.firstChild=j.lastChild=null;k.length=0;if(!f){j.triggerUIUpdate()}return j},getChildAt:function(c){return this.childNodes[c]},replaceChild:function(c,f,e){var d=f?f.nextSibling:null;this.removeChild(f,false,e);this.insertBefore(c,d,e);return f},indexOf:function(c){return Ext.Array.indexOf(this.childNodes,c)},indexOfId:function(f){var e=this.childNodes,c=e.length,d=0;for(;d<c;++d){if(e[d].getId()===f){return d}}return -1},getPath:function(f,e){f=f||this.idProperty;e=e||"/";var d=[this.get(f)],c=this.parentNode;while(c){d.unshift(c.get(f));c=c.parentNode}return e+d.join(e)},getDepth:function(){return this.get("depth")},bubble:function(e,d,c){var f=this;while(f){if(e.apply(d||f,c||[f])===false){break}f=f.parentNode}},cascadeBy:function(h,e,c,k){var g=this;if(arguments.length===1&&!Ext.isFunction(h)){k=h.after;e=h.scope;c=h.args;h=h.before}if(!h||h.apply(e||g,c||[g])!==false){var j=g.childNodes,f=j.length,d;for(d=0;d<f;d++){j[d].cascadeBy.call(j[d],h,e,c,k)}if(k){k.apply(e||g,c||[g])}}},eachChild:function(f,e,c){var h=this.childNodes,g=h.length,d;for(d=0;d<g;d++){if(f.apply(e||this,c||[h[d]])===false){break}}},findChild:function(d,e,c){return this.findChildBy(function(){return this.get(d)==e},null,c)},findChildBy:function(j,h,d){var g=this.childNodes,c=g.length,f=0,k,e;for(;f<c;f++){k=g[f];if(j.call(h||k,k)===true){return k}else{if(d){e=k.findChildBy(j,h,d);if(e!==null){return e}}}}return null},contains:function(c){return c.isAncestor(this)},isAncestor:function(c){var d=this.parentNode;while(d){if(d===c){return true}d=d.parentNode}return false},sort:function(l,e,k){var h=this,j=h.childNodes,g=j.length,f,d,c={isFirst:true};if(g>0){if(!l){l=h.getTreeStore().getSortFn()}Ext.Array.sort(j,l);h.setFirstChild(j[0]);h.setLastChild(j[g-1]);for(f=0;f<g;f++){d=j[f];d.previousSibling=j[f-1];d.nextSibling=j[f+1];c.isLast=(f===g-1);c.index=f;d.updateInfo(false,c);c.isFirst=false;if(e&&!d.isLeaf()){d.sort(l,true,true)}}if(k!==true){h.fireEventArgs("sort",[h,j]);h.callTreeStore("onNodeSort",[j])}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isBranchLoaded:function(){var c=!this.isLeaf()&&this.isLoaded();if(c){this.cascadeBy(function(d){if(!d.isLeaf()){c=c||d.isBranchLoaded()}return c})}return c},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var c=this.parentNode;while(c){if(!c.isExpanded()){return false}c=c.parentNode}return true},expand:function(c,h,d){var e=this,f,g;if(!e.isLeaf()){if(e.isLoading()){e.on("expand",function(){e.expand(c,h,d)},e,{single:true})}else{if(!e.isExpanded()){if(e.fireEventArgs("beforeexpand",[e])!==false){if(c){if(e.parentNode&&e.parentNode.isSynchronousRecursiveExpand){e.isSynchronousRecursiveExpand=true}else{f=e.getTreeStore();if(f.getProxy().isSynchronous||e.isBranchLoaded()){e.isSynchronousRecursiveExpand=true;f.suspendEvent("add");g=true}}}e.callTreeStore("onBeforeNodeExpand",[e.onChildNodesAvailable,e,[c,h,d]]);if(g){f.resumeEvent("add");f.fireEvent("refresh",f)}e.isSynchronousRecursiveExpand=false}}else{if(c){e.expandChildren(true,h,d)}else{Ext.callback(h,d||e,[e.childNodes])}}}}else{Ext.callback(h,d||e)}},onChildNodesAvailable:function(f,e,l,m){var j=this,d=j.getTreeStore(),c=d&&d.bulkUpdate,h,g,k;Ext.suspendLayouts();for(h=j.parentNode;h;h=h.parentNode){if(!h.isExpanded()){(k||(k=[])).unshift(h)}}if(c){j.data.expanded=true}else{j.set("expanded",true)}if(k){for(g=1;g<k.length;g++){h=k[g];if(c){h.data.expanded=true}else{h.set("expanded",true)}}k[0].expand();for(g=1;g<k.length;g++){h=k[g];h.fireEventArgs("expand",[h,h.childNodes])}}else{j.callTreeStore("onNodeExpand",[f,false])}j.fireEventArgs("expand",[j,f]);if(e){j.expandChildren(true,l,m)}else{Ext.callback(l,m||j,[j.childNodes])}Ext.resumeLayouts(true)},expandChildren:function(g,n,o,h){var l=this,m,j,d,c,k,f,e;if(Ext.isBoolean(n)){m=n;n=o;o=h;h=m}if(h===undefined){e=l.getTreeStore();h=e&&e.singleExpand}d=l.childNodes;c=[];k=h?Math.min(d.length,1):d.length;for(j=0;j<k;++j){f=d[j];if(!f.isLeaf()){c[c.length]=f}}k=c.length;for(j=0;j<k;++j){c[j].expand(g)}if(n){Ext.callback(n,o||l,[l.childNodes])}},collapse:function(e,l,m){var k=this,h=k.isExpanded(),d=k.getTreeStore(),c=d&&d.bulkUpdate,j=k.childNodes.length,f,g;if(!k.isLeaf()&&((!h&&e)||k.fireEventArgs("beforecollapse",[k])!==false)){Ext.suspendLayouts();if(k.isExpanded()){if(e){g=function(){for(f=0;f<j;f++){k.childNodes[f].setCollapsed(true)}};if(l){l=Ext.Function.createSequence(g,Ext.Function.bind(l,m,[k.childNodes]))}else{l=g}}else{if(l){l=Ext.Function.bind(l,m,[k.childNodes])}}if(c){k.data.expanded=false}else{k.set("expanded",false)}k.callTreeStore("onNodeCollapse",[k.childNodes,l,m]);k.fireEventArgs("collapse",[k,k.childNodes]);l=null}else{if(e){for(f=0;f<j;f++){k.childNodes[f].setCollapsed(true)}}}Ext.resumeLayouts(true)}Ext.callback(l,m||k,[k.childNodes])},setCollapsed:function(d){var f=this,c=f.childNodes.length,e;if(!f.isLeaf()&&f.fireEventArgs("beforecollapse",[f])!==false){f.data.expanded=false;f.fireEventArgs("collapse",[f,f.childNodes]);if(d){for(e=0;e<c;e++){f.childNodes[e].setCollapsed(true)}}}},collapseChildren:function(e,k,l){var j=this,g,c=j.childNodes,h=c.length,f=[],d;for(g=0;g<h;++g){d=c[g];if(!d.isLeaf()&&d.isLoaded()&&d.isExpanded()){f.push(d)}}h=f.length;if(h){for(g=0;g<h;++g){d=f[g];if(g===h-1){d.collapse(e,k,l)}else{d.collapse(e)}}}else{Ext.callback(k,l)}},fireEvent:function(c){return this.fireEventArgs(c,Ext.Array.slice(arguments,1))},fireEventArgs:function(d,f){var h=Ext.mixin.Observable.prototype.fireEventArgs,c,g,e;if(a[d]){for(g=this;c!==false&&g;g=(e=g).parentNode){if(g.hasListeners&&g.hasListeners[d]){c=h.call(g,d,f)}}if(c!==false){g=e.getTreeStore();if(g&&g.hasListeners&&g.hasListeners[d="node"+d]){c=g.fireEventArgs(d,f)}}return c}else{return h.apply(this,arguments)}},serialize:function(e){var h=e||new Ext.data.writer.Json({writeAllFields:true}),d=h.getRecordData(this),j=this.childNodes,c=j.length,g,f;if(c>0){d.children=g=[];for(f=0;f<c;f++){g.push(j[f].serialize(h))}}return d},callTreeStore:function(g,c){var e=this,f=e.getTreeStore(),d=f&&f[g];if(f&&d){c=c||[];if(c[0]!==e){c.unshift(e)}d.apply(f,c)}},privates:{join:function(c){if(c.isTreeStore){if(this.isRoot()){this.treeStore=this.store=c}}else{this.callParent([c])}},callJoined:function(d,c){this.callParent([d,c]);this.callTreeStore(d,c)}}}}}},0,0,0,0,0,0,[Ext.data,"NodeInterface"],0));(Ext.cmd.derive("Ext.data.TreeModel",Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:"memory"}},0,0,0,0,0,[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.data,"TreeModel"],function(){Ext.data.NodeInterface.decorate(this)}));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:undefined,params:undefined,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:false,username:null,password:null,binary:false,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(a){var c=this.getParams(),b;if(c){return c[a]}return b},setParam:function(a,b){var c=this.getParams()||{};c[a]=b;this.setParams(c)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.TreeStore",Ext.data.Store,{isTreeStore:true,config:{root:null,rootVisible:false,defaultRootProperty:"children",parentIdProperty:null,clearOnLoad:true,clearRemovedOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",folderSort:false},lazyFill:false,fillCount:0,bulkUpdate:0,_silentOptions:{silent:true},implicitModel:"Ext.data.TreeModel",constructor:function(a){var b=this;b.byIdMap={};Ext.data.Store.prototype.constructor.call(this,a)},applyFields:function(a,c){var b=this;if(a){if(b.defaultRootProperty!==b.self.prototype.config.defaultRootProperty){a=a.concat({name:b.defaultRootProperty,type:"auto",defaultValue:null,persist:false})}}Ext.data.Store.prototype.applyFields.call(this,a,c)},onSorterEndUpdate:function(){var c=this,a=c.getSorters(),d=a.getRange(),b=c.getRoot(),e=c.getFolderSort();c.fireEvent("beforesort",c,d);if(b&&(e||d.length)){if(c.getRemoteSort()){if(d.length){c.load({callback:function(){c.fireEvent("sort",c,d)}})}}else{b.sort(this.getSortFn(),true);c.fireEvent("datachanged",c);c.fireEvent("refresh",c);c.fireEvent("sort",c,d)}}else{c.fireEvent("sort",c,d)}},updateFolderSort:function(a){this.needsFolderSort=a;this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var a=this,b=this.sorters.getSortFn();return function(e,d){var f,g,c=0;if(a.needsFolderSort){f=e.data.leaf?1:0;g=d.data.leaf?1:0;c=f-g}if(a.needsIndexSort&&c===0){c=e.data.index-d.data.index}return c||b(e,d)}},getTotalCount:function(){return this.getCount()},afterEdit:function(c,b){var a=this;if(a.needsLocalFilter()){a.doFilter(c)}Ext.data.Store.prototype.afterEdit.call(this,c,b)},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(a,c){var b=this;if(!c){c=null}if(b.contains(a)){b.onUpdate(a,Ext.data.Model.COMMIT,c);b.fireEvent("update",b,a,Ext.data.Model.COMMIT,c)}},fireChangeEvent:function(a){return !!this.byIdMap[a.id]},updateRootVisible:function(b){var a=this.getRoot(),c;if(a){c=this.getData();if(b){c.insert(0,a)}else{c.remove(a)}}},updateTrackRemoved:function(a){Ext.data.Store.prototype.updateTrackRemoved.apply(this,arguments);this.removedNodes=this.removed;this.removed=null},onDestroyRecords:function(b,a,c){if(c){this.removedNodes.length=0}},updateProxy:function(b){var a;if(b){if(b.setIdParam){b.setIdParam(this.getNodeParam())}a=b.getReader();if(Ext.isEmpty(a.getRootProperty())){a.setRootProperty(this.getDefaultRootProperty())}}},setProxy:function(a){this.changingProxy=true;(arguments.callee.$previous||Ext.data.Store.prototype.setProxy).call(this,a);this.changingProxy=false},updateModel:function(a){var b=a.prototype.isNode;Ext.data.NodeInterface.decorate(a);if(!b&&!this.changingProxy){this.getProxy().getReader().buildExtractors(true)}},onFilterEndUpdate:function(f){var e=this,d=f.length,a=e.getRoot(),h,c,g,b;if(!e.getRemoteFilter()){if(d){e.doFilter(a)}else{a.cascadeBy({after:function(i){i.set("visible",true,e._silentOptions)}})}if(d){g=[];h=a.childNodes;for(b=0,d=h.length;b<d;b++){c=h[b];if(c.get("visible")){g.push(c)}}}else{g=a.childNodes}e.onNodeFilter(a,g);a.fireEvent("filterchange",a,g);e.fireEvent("filterchange",e,f);e.suppressNextFilter=true;Ext.data.Store.prototype.onFilterEndUpdate.call(this,f);e.suppressNextFilter=false}else{Ext.data.Store.prototype.onFilterEndUpdate.call(this,f)}},onNodeFilter:function(a,e){var c=this,d=c.getData(),b=[];if(c.getRootVisible()){if(e.length){b.push(a)}else{a.set("visible",false,c._silentOptions)}}c.handleNodeExpand(a,e,b);c.suspendEvents();d.splice(0,d.getCount(),b);c.resumeEvents();if(!c.suppressNextFilter){c.fireEvent("datachanged",c);c.fireEvent("refresh",c)}},onBeforeNodeExpand:function(b,j,k,f){var g=this,h,d,i,e,a,c;if(b.isLoaded()){c=[b.childNodes];if(f){c.push.apply(c,f)}Ext.callback(j,k||b,c)}else{if(b.isLoading()){g.on("load",function(){c=[b.childNodes];if(f){c.push.apply(c,f)}Ext.callback(j,k||b,c)},g,{single:true,priority:1001})}else{h=g.getProxy().getReader();d=b.getProxy();i=d?d.getReader():null;e=i&&i.initialConfig.rootProperty?i:h;a=e.getRoot(b.raw||b.data);if(a||(b.phantom&&!b.isRoot())){if(a){g.fillNode(b,e.extractData(a,{model:b.childType,recordCreator:g.recordCreator}))}c=[b.childNodes];if(f){c.push.apply(c,f)}Ext.callback(j,k||b,c)}else{g.read({node:b,onChildNodesAvailable:function(){delete g.lastOptions.onChildNodesAvailable;c=[b.childNodes];if(f){c.push.apply(c,f)}Ext.callback(j,k||b,c)}});g.flushLoad()}}}},onNodeExpand:function(d,b){var e=this,a=e.indexOf(d)+1,c=[];e.handleNodeExpand(d,b,c);if(!e.refreshCounter&&d.isRoot()&&!d.get("visible")){e.loadRecords(c)}else{e.insert(a,c)}},handleNodeExpand:function(e,b,d){var g=this,f=b?b.length:0,c,a;if(e!==this.getRoot()&&!g.isVisible(e)){return}if(f){for(c=0;c<f;c++){a=b[c];if(a.get("visible")){d.push(a);if(a.isExpanded()){if(a.isLoaded()){g.handleNodeExpand(a,a.childNodes,d)}else{a.set("expanded",false);a.expand()}}}}}},onNodeCollapse:function(d,a,g,c){var e=this,b=e.indexOf(d)+1,f;if(e.needsLocalFilter()){a=Ext.Array.filter(a,e.filterVisible)}if(a.length&&e.data.contains(a[0])){f=e.indexOfNextVisibleNode(d);e.removeAt(b,f-b)}Ext.callback(g,c)},indexOfNextVisibleNode:function(b){var a;while(b.parentNode){for(a=b.nextSibling;a&&!a.get("visible");a=a.nextSibling){}if(a){return this.indexOf(a)}b=b.parentNode}return this.getCount()},filterNew:function(a){return !a.get("root")&&Ext.data.Store.prototype.filterNew.call(this,a)},filterRejects:function(a){return !a.get("root")&&Ext.data.Store.prototype.filterRejects.call(this,a)},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(b,f){if(!Ext.isArray(f)){f=[f]}var e=this,a=f.length,d,c;for(d=0;!c&&d<a;d++){if(f[d].get("visible")){c=f[d]}}if(c){e.startRemoveIndex=e.indexOf(f[0]);e.lastRemoveIndexPlusOne=e.indexOfNextVisibleNode(f[f.length-1])}else{e.startRemoveIndex=-1;e.lastRemoveIndexPlusOne=0}},afterDrop:Ext.emptyFn,onNodeRemove:function(d,j,h){var g=this,e=g.removedNodes,f=j.length,a=g.startRemoveIndex,b=g.lastRemoveIndexPlusOne,c;g.suspendAutoSync();if(a!==-1){g.removeIsMove=h;g.removeAt(a,b-a);g.removeIsMove=false}for(c=0;c<f;c++){j[c].cascadeBy(function(i){g.unregisterNode(i);if(e&&!h){if(!i.phantom&&!i.erasing&&!g.loading){i.removedFrom=g.indexOf(i);e.push(i);g.needsSync=true}}})}g.resumeAutoSync()},onNodeAppend:function(b,c,a){this.onNodeInsert(b,c,a)},onNodeInsert:function(l,a,f){var i=this,c=a.raw||a.data,e=i.removedNodes,g,m,h,b,j,d,k;if(l&&i.needsLocalFilter()){i.doFilter(l)}i.beginUpdate();if(i.isVisible(a)){if(f===0||!a.previousSibling){g=l}else{for(m=a.previousSibling;m&&!m.get("visible");m=m.previousSibling){}while(m.isExpanded()&&m.lastChild){m=m.lastChild}g=m}i.insert(i.indexOf(g)+1,a);if(!a.isLeaf()&&a.isExpanded()){if(a.isLoaded()){i.onNodeExpand(a,a.childNodes)}else{if(!i.fillCount){a.set("expanded",false);a.expand()}}}}Ext.Array.remove(e,a);i.needsSync=i.needsSync||a.phantom||a.dirty;if(!a.isLeaf()&&!a.isLoaded()&&!i.lazyFill){h=i.getProxy().getReader();b=a.getProxy();j=b?b.getReader():null;d=j&&j.initialConfig.rootProperty?j:h;k=d.getRoot(c);if(k){i.fillNode(a,d.extractData(k,{model:a.childType,recordCreator:i.recordCreator}))}}i.endUpdate()},registerNode:function(f,a){var e=this,c,d,b;e.byIdMap[f.id]=f;if(a===true){c=f.childNodes;d=c.length;for(b=0;b<d;b++){e.registerNode(c[b],true)}}},unregisterNode:function(f,a){var e=this,c,d,b;delete e.byIdMap[f.id];if(a===true){c=f.childNodes;d=c.length;for(b=0;b<d;b++){e.unregisterNode(c[b],true)}}},onNodeSort:function(b,c){var a=this;a.suspendAutoSync();if((a.indexOf(b)!==-1&&b.isExpanded())||(b===a.getRoot()&&!a.getRootVisible())){Ext.suspendLayouts();a.onNodeCollapse(b,c);a.onNodeExpand(b,c);Ext.resumeLayouts(true)}a.resumeAutoSync(a.autoSync)},applyRoot:function(e){var b=this,d=b.getModel(),a=d.prototype.idProperty,c=b.getDefaultRootId();if(e&&!e.isNode){e=Ext.apply({text:b.getDefaultRootText(),root:true,isFirst:true,isLast:true,depth:0,index:0,parentId:null,allowDrag:false},e);if(c&&e[a]===undefined){e[a]=c}e=new d(e)}return e},updateRoot:function(f,b){var d=this,e,a=!b,c;d.byIdMap={};d.getTrackRemoved();d.suspendEvent("add","remove");if(b&&b.isModel){if(d.getRootVisible()){c=[b]}else{c=b.childNodes}d.beforeNodeRemove(null,c);b.set("root",false);d.onNodeRemove(null,c);b.fireEvent("remove",null,b,false);b.fireEvent("rootchange",null);b.clearListeners();b.store=b.treeStore=null}d.getData().clear();if(f){if(f.fireEventArgs("beforeappend",[null,f])===false){f=null}else{e=f.parentNode;if(e){if(!e.removeChild(f,false,false,e.getTreeStore()===d)){return}}else{if((e=f.getTreeStore())&&e!==d&&f===e.getRoot()){e.setRoot(null)}}f.store=f.treeStore=d;f.set("root",true);f.updateInfo(true,{isFirst:true,isLast:true,depth:0,index:0,parentId:null});d.registerNode(f,true);f.fireEvent("append",null,f,false);f.fireEvent("rootchange",f);d.onNodeAppend(null,f,0);f.phantom=true}}d.fireEvent("rootchange",f,b);if(f&&(d.getAutoLoad()||f.isExpanded())){if(f.isLoaded()){d.onNodeExpand(f,f.childNodes);d.fireEvent("datachanged",d);d.fireEvent("refresh",d)}else{f.data.expanded=false;f.expand(false,function(){d.fireEvent("datachanged",d);d.fireEvent("refresh",d)})}}else{if(!a){d.fireEvent("datachanged",d);d.fireEvent("refresh",d)}}d.resumeEvent("add","remove")},getNodeById:function(a){return this.byIdMap[a]||null},findNode:function(g,f,d,c,b){if(Ext.isEmpty(f,false)){return null}if(f===this.model.idProperty&&arguments.length<3){return this.byIdMap[f]}var e=Ext.String.createRegex(f,d,c,b),a=null;Ext.Object.eachValue(this.byIdMap,function(h){if(h&&e.test(h.get(g))){a=h;return false}});return a},load:function(a){var b=a&&a.node;if(!b&!(b=this.getRoot())){b=this.setRoot({expanded:true});return}if(b.isLoading()){return}return Ext.data.Store.prototype.load.call(this,a)},flushLoad:function(){var f=this,i=f.pendingLoadOptions,a,g,h,d=f.getClearOnLoad(),e,b,c;f.clearLoadTask();if(!i){return}a=i.node||f.getRoot();e=a&&a.isRoot()&&a.isLoaded()&&d;g=i.callback;h=i.scope;i.params=i.params||{};if(a.data.expanded&&!e){a.data.loaded=false;if(d){a.data.expanded=false}i.callback=function(k,j,l){if(!d){a.collapse()}a.expand();Ext.callback(g,h,[k,j,l])}}i.id=a.getId();i=Ext.apply({filters:f.getFilters().items,sorters:f.getSorters().items,node:i.node||a,internalScope:f,internalCallback:f.onProxyLoad},i);f.lastOptions=Ext.apply({},i);i.isReload=e;b=f.createOperation("read",i);if(f.fireEvent("beforeload",f,b)!==false){f.loading=true;if(e){if(f.getClearRemovedOnLoad()){f.removedNodes.length=0}f.unregisterNode(a,true);a.childNodes.length=0;c=true}else{if(d){if(f.getTrackRemoved()&&f.getClearRemovedOnLoad()){f.clearRemoved(a)}a.removeAll(false)}}if(f.loading&&a){a.set("loading",true)}if(c){f.clearData(true);if(f.getRootVisible()){f.suspendEvents();f.add(a);f.resumeEvents()}}b.execute()}return f},onProxyLoad:function(c){var g=this,i=c.initialConfig,d=c.wasSuccessful(),b=c.getRecords(),a=i.node,f=i.isReload,h=c.getScope()||g,e=[b,c,d];if(g.destroyed){return}g.loading=false;a.set("loading",false);if(d){++g.loadCount;if(!g.getClearOnLoad()){b=g.cleanRecords(a,b)}if(g.getParentIdProperty()){b=g.treeify(a,b)}if(f){g.suspendEvent("add","update")}b=g.fillNode(a,b)}if(f){g.resumeEvent("add","update");g.callObservers("BeforePopulate");g.fireEvent("datachanged",g);g.fireEvent("refresh",g);g.callObservers("AfterPopulate")}else{Ext.callback(i.onChildNodesAvailable,h,e)}g.fireEvent("load",g,b,d,c,a)},clearRemoved:function(b){var j=this,e=j.removedNodes,a=b.getId(),d=e.length,c=d,m={},g=[],l={},h,f,k;if(b===j.getRoot()){j.removedNodes.length=0;return}for(;c--;){h=e[c];l[h.getId()]=h}for(c=d;c--;){h=e[c];f=h;while(f&&f.getId()!==a){k=f.get("parentId")||f.get("lastParentId");f=f.parentNode||j.getNodeById(k)||l[k]}if(f){m[h.getId()]=h}}for(c=0;c<d;c++){h=e[c];if(!m[h.getId()]){g.push(h)}}j.removedNodes=g},fillNode:function(c,a){var b=this,d=a?a.length:0;++b.bulkUpdate;if(d){b.setupNodes(a)}if(b.bulkUpdate===1){c.set("loaded",true)}else{c.data.loaded=true}if(a.length){c.appendChild(a,undefined,true)}--b.bulkUpdate;return a},setupNodes:function(c){var f=this,e=f.getSorters(),g=false,b=c.length,a=f.sortOnLoad&&b>1&&!f.getRemoteSort()&&f.getFolderSort()||e.length,k,h,d,j;if(f.needsLocalFilter()){j=f.getFilters().getFilterFn();c[0].set("visible",j(c[0]))}for(d=1;d<b;d++){k=c[d];h=c[d-1];if(j){k.set("visible",j(k))}g=k.data.index!==h.data.index}if(a){f.needsIndexSort=true;Ext.Array.sort(c,f.getSortFn());f.needsIndexSort=false}else{if(g){Ext.Array.sort(c,f.sortByIndex)}}},beginFill:function(){var a=this;if(!a.fillCount++){a.beginUpdate();a.suspendEvent("add","update");a.suspendAutoSync();a.fillArray=[]}},endFill:function(e,b){var f=this,g=f.fillArray,d,a,c;g.push(b);if(!--f.fillCount){f.resumeAutoSync();f.resumeEvent("add","update");for(d=0,a=g.length;d<a;d++){c=f.indexOf(g[d][0]);if(c!==-1){f.fireEvent("add",f,g[d],c)}}f.fillArray=null;f.endUpdate()}},sortByIndex:function(b,a){return b.data.index-a.data.index},onIdChanged:function(d,f,b){var e=d.childNodes,a=e&&e.length,c;Ext.data.Store.prototype.onIdChanged.apply(this,arguments);delete this.byIdMap[f];this.byIdMap[b]=d;for(c=0;c<a;c++){e[c].set("parentId",b)}},treeify:function(h,e){var l=this,n=h.getId(),c=l.getParentIdProperty(),j=e.length,o=[],k={},f,d,g,m,a,b;for(f=0;f<j;f++){d=e[f];k[d.id]=d}for(f=0;f<j;f++){d=e[f];g=d.data[c];if(!(g||g===0)||g===n){o.push(d)}else{m=k[g];m.$children=m.$children||[];m.$children.push(d)}}for(a in k){d=k[a];b=d.$children;if(b){delete d.$children;l.setupNodes(b);d.appendChild(b)}l.registerNode(d)}l.setupNodes(o);return o},cleanRecords:function(f,b){var e={},h=f.childNodes,d=0,a=h.length,c=[],g;for(;d<a;++d){e[h[d].getId()]=true}for(d=0,a=b.length;d<a;++d){g=b[d];if(!e[g.getId()]){c.push(g)}}return c},removeAll:function(){this.suspendEvents();this.setRoot(null);this.resumeEvents();Ext.data.Store.prototype.removeAll.call(this)},doSort:function(a){var b=this;if(b.getRemoteSort()){b.load()}else{b.tree.sort(a,true);b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}b.fireEvent("sort",b,b.sorters.getRange())},filterVisible:function(a){return a.get("visible")},isVisible:function(c){var a=c.parentNode,d=c.data.visible,b=this.getRoot();while(d&&a){d=a.data.expanded&&a.data.visible;a=a.parentNode}return d&&!(c===b&&!this.getRootVisible())},commitChanges:function(){var a=this.removedNodes;if(a){a.length=0}Ext.data.Store.prototype.commitChanges.call(this)},getRootNode:function(){return this.getRoot()},setRootNode:function(a){this.setRoot(a);return this.getRoot()},privates:{getRawRemovedRecords:function(){return this.removedNodes},recordCreator:function(a,b){return new b(a)},doFilter:function(b){var a=this.getRoot(),c=this.getFilters().getFilterFn();this.filterNodes(a,b,c)},filterNodes:function(b,e,f){var c=false,g=e.childNodes,a=g&&g.length,d;if(a){for(d=0;d<a;++d){this.filterNodes(b,g[d],f)}}c=e===b||f(e);e.set("visible",c,this._silentOptions);return c},needsLocalFilter:function(){return !this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(a,c){var b=this.getData();b.setFilters(null);if(a){a.on("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(b,c){var a=this.getData();a.setSorters(null);if(b){b.on("endupdate",this.onSorterEndUpdate,this)}}},deprecated:{5:{properties:{tree:null}}}},1,0,0,0,["store.tree"],0,[Ext.data,"TreeStore"],0));(Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:true,syncGeneration:0,attach:function(a){this.record=a;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return !a.dirty},refresh:function(b){var t=this,u=t.data,d=t.record,k=d.fields,n=d.generation,s=d.data,h=d.validationSeparator,c=null,e,g,l,a,q,o,m,r,p,f,w,v;if(b||t.syncGeneration!==n){t.syncGeneration=n;for(o=0,p=k.length;o<p;++o){a=k[o];v=a.name;w=s[v];e=a.defaultInvalidMessage;l=0;if(!(v in u)){u[v]=g=true}else{g=u[v]}if(a.validate!==Ext.emptyFn){f=a.validate(w,h,null,d);if(f!==true){l=f||e}}if(!l){l=true}if(l!==g){(c||(c={}))[v]=l}}if(c){t.set(c)}}}},0,0,0,0,0,0,[Ext.data,"Validation"],0));(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var a="afterbegin",f="afterend",g="beforebegin",d="beforeend",h=["BeforeBegin","previousSibling"],e=["AfterEnd","nextSibling"],c={beforebegin:h,afterend:e},b={beforebegin:h,afterend:e,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:true,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var k=/([a-z])([A-Z])/g,j={};function i(l,n,m){return n+"-"+m.toLowerCase()}return function(l){return j[l]||(j[l]=l.replace(k,i))}}(),generateMarkup:function(q,k){var p=this,o=typeof q,n,j,r,m,l;if(o==="string"||o==="number"){k.push(q)}else{if(Ext.isArray(q)){for(m=0;m<q.length;m++){if(q[m]){p.generateMarkup(q[m],k)}}}else{r=q.tag||"div";k.push("<",r);for(n in q){if(q.hasOwnProperty(n)){j=q[n];if(j!==undefined&&!p.confRe.test(n)){if(typeof j==="object"){k.push(" ",n,'="');p.generateStyles(j,k,true).push('"')}else{k.push(" ",p.attributeTransform[n]||n,'="',j,'"')}}}}if(p.emptyTags.test(r)){k.push("/>")}else{k.push(">");if((j=q.tpl)){j.applyOut(q.tplData,k)}if((j=q.html)){k.push(j)}if((j=q.cn||q.children)){p.generateMarkup(j,k)}l=p.closeTags;k.push(l[r]||(l[r]="</"+r+">"))}}}return k},generateStyles:function(m,j,l){var i=j||[],k,n;for(k in m){if(m.hasOwnProperty(k)){n=m[k];k=this.decamelizeName(k);if(l&&Ext.String.hasHtmlCharacters(n)){n=Ext.String.htmlEncode(n)}i.push(k,":",n,";")}}return j||i.join("")},markup:function(i){if(typeof i==="string"){return i}var j=this.generateMarkup(i,[]);return j.join("")},applyStyles:function(i,j){Ext.fly(i).applyStyles(j)},createContextualFragment:function(j){var m=this.detachedDiv,i=document.createDocumentFragment(),k,l;m.innerHTML=j;l=m.childNodes;k=l.length;while(k--){i.appendChild(l[0])}return i},createDom:function(l,i){var k=this,j=k.markup(l),n=k.detachedDiv,m;n.innerHTML=j;m=n.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?m.cloneNode(true):m},insertHtml:function(l,i,m){var q=this,j,n,k,p,r;l=l.toLowerCase();if(i.insertAdjacentHTML){if(q.ieInsertHtml){r=q.ieInsertHtml(l,i,m);if(r){return r}}j=b[l];if(j){i.insertAdjacentHTML(j[0],m);return i[j[1]]}}else{if(i.nodeType===3){l=l===a?g:l;l=l===d?f:l}n=Ext.supports.CreateContextualFragment?i.ownerDocument.createRange():undefined;p="setStart"+(this.endRe.test(l)?"After":"Before");if(c[l]){if(n){n[p](i);r=n.createContextualFragment(m)}else{r=this.createContextualFragment(m)}i.parentNode.insertBefore(r,l===g?i:i.nextSibling);return i[(l===g?"previous":"next")+"Sibling"]}else{k=(l===a?"first":"last")+"Child";if(i.firstChild){if(n){try{n[p](i[k]);r=n.createContextualFragment(m)}catch(o){r=this.createContextualFragment(m)}}else{r=this.createContextualFragment(m)}if(l===a){i.insertBefore(r,i.firstChild)}else{i.appendChild(r)}}else{i.innerHTML=m}return i[k]}}},insertBefore:function(i,k,j){return this.doInsert(i,k,j,g)},insertAfter:function(i,k,j){return this.doInsert(i,k,j,f)},insertFirst:function(i,k,j){return this.doInsert(i,k,j,a)},append:function(i,k,j){return this.doInsert(i,k,j,d)},overwrite:function(k,j,m){var l=this,i;k=Ext.getDom(k);j=l.markup(j);if(l.ieOverwrite){i=l.ieOverwrite(k,j)}if(!i){k.innerHTML=j;i=k.firstChild}return m?Ext.get(i):i},doInsert:function(k,n,m,i){var l=this,j;k=k.dom||Ext.getDom(k);if("innerHTML" in k){j=l.insertHtml(i,k,l.markup(n))}else{j=l.createDom(n,null);if(k.nodeType===3){i=i===a?g:i;i=i===d?f:i}if(c[i]){k.parentNode.insertBefore(j,i===g?k:k.nextSibling)}else{if(k.firstChild&&i===a){k.insertBefore(j,k.firstChild)}else{k.appendChild(j)}}}return m?Ext.get(j):j},createTemplate:function(j){var i=this.markup(j);return new Ext.Template(i)},createHtml:function(i){return this.markup(i)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0));Ext.define("Ext.overrides.dom.Helper",(function(){var c=/^(?:table|thead|tbody|tr|td)$/i,g=/td|tr|tbody|thead/i,f="<table>",h="</table>",b=f+"<tbody>",e="</tbody>"+h,a=b+"<tr>",d="</tr>"+e;return{override:"Ext.dom.Helper",ieInsertHtml:function(i,k,j){var l=null;if(Ext.isIE9m&&c.test(k.tagName)){l=this.insertIntoTable(k.tagName.toLowerCase(),i,k,j)}return l},ieOverwrite:function(j,i){if(Ext.isIE9m&&c.test(j.tagName)){while(j.firstChild){j.removeChild(j.firstChild)}if(i){return this.insertHtml("afterbegin",j,i)}}},ieTable:function(p,k,q,o){var l=-1,n=this.detachedDiv,m,j;n.innerHTML=[k,q,o].join("");while(++l<p){n=n.firstChild}m=n.nextSibling;if(m){m=n;n=document.createDocumentFragment();while(m){j=m.nextSibling;n.appendChild(m);m=j}}return n},insertIntoTable:function(r,k,j,l){var i,o,n=k==="beforebegin",q=k==="afterbegin",m=k==="beforeend",p=k==="afterend";if(r==="td"&&(q||m)||!g.test(r)&&(n||p)){return null}o=n?j:p?j.nextSibling:q?j.firstChild:null;if(n||p){j=j.parentNode}if(r==="td"||(r==="tr"&&(m||q))){i=this.ieTable(4,a,l,d)}else{if(((r==="tbody"||r==="thead")&&(m||q))||(r==="tr"&&(n||p))){i=this.ieTable(3,b,l,e)}else{i=this.ieTable(2,f,l,h)}}j.insertBefore(i,o);return i}}})());(Ext.cmd.derive("Ext.data.identifier.Uuid",Ext.data.identifier.Generator,{isUnique:true,config:{id:null},constructor:function(a){Ext.data.identifier.Generator.prototype.constructor.call(this,a);this.reconfigure(a)},reconfigure:function(b){var a=this.self;this.generate=(b&&b.version===1)?a.createSequential(b.salt,b.timestamp,b.clockSeq):a.createRandom()},clone:null,statics:{createRandom:function(){var c="xxxxxxxx-xxxx-4xxx-Rxxx-xMxxxxxxxxxx".split(""),b="0123456789abcdef".split(""),a=c.length,d=[];return function(){for(var f,g,e=0;e<a;++e){g=c[e];if(g!=="-"&&g!=="4"){f=Math.random()*16;f=(g==="R")?(f&3|8):(f|((g==="M")?1:0));g=b[f]}d[e]=g}return d.join("")}},createSequential:function(g,b,e){var f=[],j=Math.pow(2,32),h=g.lo,c=g.hi,i=b.lo,d=b.hi,a=function(m,l){var k=m.toString(16).toLowerCase();if(k.length>l){k=k.substring(k.length-l)}else{if(k.length<l){k=Ext.String.leftPad(k,l,"0")}}return k};if(typeof g==="number"){c=Math.floor(g/j);h=Math.floor(g-c*j)}if(typeof b==="number"){d=Math.floor(b/j);i=Math.floor(b-d*j)}c|=256;f[3]=a(128|((e>>>8)&63),2)+a(e&255,2);f[4]=a(c,4)+a(h,8);return function(){f[0]=a(i,8);f[1]=a(d&65535,4);f[2]=a(((d>>>16)&4095)|(1<<12),4);++i;if(i>=j){i=0;++d}return f.join("-")}}}},1,0,0,0,["data.identifier.uuid"],0,[Ext.data.identifier,"Uuid"],function(){this.Global=new this({id:"uuid"})}));(Ext.cmd.derive("Ext.data.proxy.WebStorage",Ext.data.proxy.Client,{alternateClassName:"Ext.data.WebStorageProxy",config:{id:undefined},constructor:function(a){Ext.data.proxy.Client.prototype.constructor.apply(this,arguments);this.cache={};this.initialize()},create:function(e){var j=this,d=e.getRecords(),c=d.length,a=j.getIds(),b,g,f,h;if(j.isHierarchical===undefined){j.isHierarchical=!!d[0].isNode;if(j.isHierarchical){j.getStorageObject().setItem(j.getTreeKey(),true)}}for(f=0;f<c;f++){g=d[f];if(g.phantom){g.phantom=false;h=g.identifier;if(h&&h.isUnique){b=g.getId()}else{b=j.getNextId()}}else{b=g.getId()}j.setRecord(g,b);g.commit();a.push(b)}j.setIds(a);e.setSuccessful(true)},read:function(h){var u=this,t,q=[],d=true,g=u.getModel(),e=0,s=h.getRecordCreator(),f,a,r,m,l,b,n,c,v,k,p,o;if(u.isHierarchical){q=u.getTreeData()}else{n=u.getIds();c=n.length;k=h.getId();if(k){v=u.getRecord(k);if(v!==null){b=s?s(v,g):new g(v)}if(b){q.push(b)}else{d=false}}else{a=h.getSorters();f=h.getFilters();r=h.getLimit();t=[];for(p=0;p<c;p++){v=u.getRecord(n[p]);b=s?s(v,g):new g(v);t.push(b)}if(a){Ext.Array.sort(t,Ext.util.Sorter.createComparator(a))}for(p=h.getStart()||0;p<c;p++){b=t[p];l=true;if(f){for(o=0,m=f.length;o<m;o++){l=f[o].filter(b)}}if(l){q.push(b);e++}if(r&&e===r){break}}}}if(d){h.setResultSet(new Ext.data.ResultSet({records:q,total:q.length,loaded:true}));h.setSuccessful(true)}else{h.setException("Unable to load records")}},update:function(c){var b=c.getRecords(),f=b.length,e=this.getIds(),a,g,d;for(d=0;d<f;d++){a=b[d];this.setRecord(a);a.commit();g=a.getId();if(g!==undefined&&Ext.Array.indexOf(e,g)===-1){e.push(g)}}this.setIds(e);c.setSuccessful(true)},erase:function(d){var f=this,c=d.getRecords(),a=f.getIds(),g=a.length,j=[],h={},e=c.length,b;for(;e--;){Ext.apply(h,f.removeRecord(c[e]))}for(e=0;e<g;e++){b=a[e];if(!h[b]){j.push(b)}}f.setIds(j);d.setSuccessful(true)},getRecord:function(d){var b=this,a=b.cache,c=!a[d]?Ext.decode(b.getStorageObject().getItem(b.getRecordKey(d))):a[d];if(!c){return null}a[d]=c;c[b.getModel().prototype.idProperty]=d;return Ext.merge({},c)},setRecord:function(j,c){if(c){j.set("id",c,{commit:true})}else{c=j.getId()}var l=this,a=j.getData(),g={},h=l.getModel(),k=h.getFields(),d=k.length,f=0,m,b,e,n;for(;f<d;f++){m=k[f];b=m.name;if(m.persist){g[b]=a[b]}}delete g[h.prototype.idProperty];if(j.isNode&&j.get("depth")===1){delete g.parentId}e=l.getStorageObject();n=l.getRecordKey(c);l.cache[c]=g;e.removeItem(n);e.setItem(n,Ext.encode(g))},removeRecord:function(a){var d=this,f=a.getId(),b={},c,e;b[f]=a;d.getStorageObject().removeItem(d.getRecordKey(f));delete d.cache[f];if(a.childNodes){e=a.childNodes;for(c=e.length;c--;){Ext.apply(b,d.removeRecord(e[c]))}}return b},getRecordKey:function(a){if(a.isModel){a=a.getId()}return Ext.String.format("{0}-{1}",this.getId(),a)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.getId())},getTreeKey:function(){return Ext.String.format("{0}-tree",this.getId())},getIds:function(){var e=this,c=(e.getStorageObject().getItem(e.getId())||"").split(","),d=c.length,a=this.getIdField().isStringField,b;if(d===1&&c[0]===""){c=[]}else{for(b=0;b<d;b++){c[b]=a?c[b]:+c[b]}}return c},getIdField:function(){return this.getModel().prototype.idField},setIds:function(a){var b=this.getStorageObject(),c=a.join(","),d=this.getId();b.removeItem(d);if(!Ext.isEmpty(c)){b.setItem(d,c)}},getNextId:function(){var c=this,d=c.getStorageObject(),b=c.getRecordCounterKey(),a=c.getIdField().isStringField,e;e=c.idGenerator.generate();d.setItem(b,e);if(a){e=e+""}return e},getTreeData:function(){var m=this,a=m.getIds(),e=a.length,h=[],b={},n=[],j=0,g=m.getModel(),p=g.prototype.idProperty,f,l,o,k,d,c;for(;j<e;j++){c=a[j];l=m.getRecord(c);h.push(l);b[c]=l;if(!l.parentId){n.push(l)}}f=n.length;Ext.Array.sort(h,m.sortByParentId);for(j=f;j<e;j++){l=h[j];k=l.parentId;if(!o||o[p]!==k){o=b[k];o.children=d=[]}d.push(l)}for(j=e;j--;){l=h[j];if(!l.children&&!l.leaf){l.loaded=true}}for(j=f;j--;){l=n[j];n[j]=new g(l)}return n},sortByParentId:function(b,a){return(b.parentId||0)-(a.parentId||0)},initialize:function(){var b=this,a=b.getStorageObject(),c=+a.getItem(b.getRecordCounterKey()),d=b.getId();a.setItem(d,a.getItem(d)||"");if(a.getItem(b.getTreeKey())){b.isHierarchical=true}b.idGenerator=new Ext.data.identifier.Sequential({seed:c?c+1:1})},clear:function(){var d=this,e=d.getStorageObject(),c=d.getIds(),a=c.length,b;for(b=0;b<a;b++){e.removeItem(d.getRecordKey(c[b]))}e.removeItem(d.getRecordCounterKey());e.removeItem(d.getTreeKey());e.removeItem(d.getId());d.cache={}},getStorageObject:function(){}},1,0,0,0,0,0,[Ext.data.proxy,"WebStorage",Ext.data,"WebStorageProxy"],0));(Ext.cmd.derive("Ext.data.proxy.LocalStorage",Ext.data.proxy.WebStorage,{alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}},0,0,0,0,["proxy.localstorage"],0,[Ext.data.proxy,"LocalStorage",Ext.data,"LocalStorageProxy"],0));(Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:true,interval:30000,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a);a.lastTime=Ext.now();a.resume()},collect:function(){var i=this,a=Ext.cache,b,f,c,j,g,d;for(b in a){if(!a.hasOwnProperty(b)){continue}c=a[b];if(c.skipGarbageCollection){continue}f=c.dom;try{g=Ext.isGarbage(f)}catch(h){delete a[b];continue}if(g){if(c&&c.dom){c.collect()}}}if(Ext.isIE9m){j={};for(b in a){if(a.hasOwnProperty(b)){j[b]=a[b]}}Ext.cache=Ext.dom.Element.cache=j}i.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;if(Ext.enableGarbageCollector&&(Ext.now()-b>a.interval)){a.collect()}a.timerId=Ext.interval(a.collect,a.interval)}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0));(Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return false},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0));(Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(a){if(a.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return false}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{priority:300,inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(c){var b=this,a;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}a=b.lastStartPoint=c.changedTouches[0].point;b.startPoint=b.startPoint||a;b.startTime=c.time;clearTimeout(b.singleTapTimer)},onTouchMove:function(c){var b=this,a=c.changedTouches[0].point;if(Math.abs(a.getDistanceTo(b.lastStartPoint))>=b.getMoveDistance()){b.startPoint=null;return b.fail(b.self.TOUCH_MOVED)}},onTouchEnd:function(f){var h=this,d=h.getMaxDuration(),a=f.time,g=f.target,i=h.lastTapTime,b=h.lastTarget,j=f.changedTouches[0].point,c;h.lastTapTime=a;h.lastTarget=g;if(i){c=a-i;if(c<=d&&Math.abs(j.getDistanceTo(h.startPoint))<=h.getTapDistance()){if(g!==b){return h.fail(h.self.DIFFERENT_TARGET)}h.lastTarget=null;h.lastTapTime=0;h.fire("doubletap",f,{touch:f.changedTouches[0],duration:c});h.startPoint=null;return}}if(a-h.startTime>d){h.fireSingleTap(f)}else{h.setSingleTapTimer(f)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(a,b){this.fire("singletap",a,{touch:b});this.startPoint=null},reset:function(){var a=this;a.startTime=a.lastTapTime=0;a.lastStartPoint=a.startPoint=a.singleTapTimer=null}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.doubleTap)}));(Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{priority:100,isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=false;this.onTouchEnd(this.lastMoveEvent)}return false}this.startTime=a.time;this.startPoint=a.changedTouches[0].point},tryDragStart:function(d){var b=this.startPoint,g=d.changedTouches[0],a=g.point,f=this.getMinDistance(),c=this.info;if(Math.abs(a.getDistanceTo(b))>=f){this.isStarted=true;this.previousPoint=this.lastPoint=a;this.resetInfo("x",d,g);this.resetInfo("y",d,g);c.time=d.time;this.fire("dragstart",d,c)}},onTouchMove:function(b){if(!this.isStarted){this.tryDragStart(b)}if(!this.isStarted){return}var c=b.changedTouches[0],a=c.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=a;this.lastMoveEvent=b;this.updateInfo("x",b,c);this.updateInfo("y",b,c);this.info.time=b.time;this.fire("drag",b,this.info)},onAxisDragEnd:function(a,c){var b=c.time-c.previousTime[a];if(b>0){c.flick.velocity[a]=(c[a]-c.previous[a])/b}},resetInfo:function(c,g,i){var d=this.lastPoint[c],b=this.startPoint[c],h=d-b,a=c.toUpperCase(),f=this.info;f.touch=i;f.delta[c]=h;f.absDelta[c]=Math.abs(h);f.previousTime[c]=this.startTime;f.previous[c]=b;f[c]=d;f.direction[c]=0;f["start"+a]=this.startPoint[c];f["previous"+a]=f.previous[c];f["page"+a]=f[c];f["delta"+a]=f.delta[c];f["absDelta"+a]=f.absDelta[c];f["previousDelta"+a]=0;f.startTime=this.startTime},updateInfo:function(d,i,h){var j=this,l=j.lastPoint[d],f=j.previousPoint[d],a=j.startPoint[d],m=l-a,c=j.info,k=c.direction,g=d.toUpperCase(),b=c.previous[d];c.touch=h;c.delta[d]=m;c.absDelta[d]=Math.abs(m);if(l!==b&&l!==c[d]){c.previous[d]=c[d];c.previousTime[d]=c.time}c[d]=l;if(l>f){k[d]=1}else{if(l<f){k[d]=-1}}c["start"+g]=a;c["previous"+g]=c.previous[d];c["page"+g]=c[d];c["delta"+g]=c.delta[d];c["absDelta"+g]=c.absDelta[d];c["previousDelta"+g]=c.previous[d]-a;c.startTime=j.startTime},onTouchEnd:function(a){this.doEnd(a)},onTouchCancel:function(a){this.doEnd(a,true);return false},doEnd:function(d,b){if(!this.isStarted){this.tryDragStart(d)}if(this.isStarted){var f=d.changedTouches[0],a=f.point,c=this.info;this.isStarted=false;this.lastPoint=a;this.updateInfo("x",d,f);this.updateInfo("y",d,f);c.time=d.time;this.onAxisDragEnd("x",c);this.onAxisDragEnd("y",c);this.fire(b?"dragcancel":"dragend",d,c);this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}},reset:function(){var a=this;a.isStarted=a.lastPoint=a.startPoint=a.previousPoint=a.lastPoint=a.lastMoveEvent=null;a.initInfo()}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.drag)}));(Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{priority:500,handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.startTime=a.time;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(j){var i=j.changedTouches[0],m=i.pageX,k=i.pageY,h=m-this.startX,g=k-this.startY,d=Math.abs(m-this.startX),c=Math.abs(k-this.startY),f=j.time-this.startTime,n=this.getMinDistance(),b=j.time,l,a;if(b-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&c>this.getMaxOffset()){this.isHorizontal=false}if(this.isVertical&&d>this.getMaxOffset()){this.isVertical=false}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&d<n){l=(h<0)?"left":"right";a=d}else{if(this.isVertical&&c<n){l=(g<0)?"up":"down";a=c}}}if(l&&!this.started){this.started=true;this.fire("swipestart",j,{touch:i,direction:l,distance:a,duration:f})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(i){if(this.onTouchMove(i)===false){return false}var h=i.changedTouches[0],l=h.pageX,j=h.pageY,g=l-this.startX,f=j-this.startY,c=Math.abs(g),b=Math.abs(f),m=this.getMinDistance(),d=i.time-this.startTime,k,a;if(this.isVertical&&b<m){this.isVertical=false}if(this.isHorizontal&&c<m){this.isHorizontal=false}if(this.isHorizontal){k=(g<0)?"left":"right";a=c}else{if(this.isVertical){k=(f<0)?"up":"down";a=b}else{return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.started=false;this.fire("swipe",i,{touch:h,direction:k,distance:a,duration:d})},onTouchCancel:function(a){this.fire("swipecancel",a);return false},reset:function(){var a=this;a.startTime=a.isHorizontal=a.isVertical=a.startX=a.startY=null}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.swipe)}));(Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{priority:800,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(a){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.started=false;this.direction=null;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(k){var i=k.changedTouches[0],o=i.pageX,l=i.pageY,h=o-this.startX,g=l-this.startY,b=Math.abs(l-this.startY),c=Math.abs(o-this.startX),p=this.getMinDistance(),f=this.getMaxOffset(),d=k.time-this.startTime,n=Ext.Viewport&&Ext.Element.getViewportWidth(),j=Ext.Viewport&&Ext.Element.getViewportHeight(),m,a;if(this.isVertical&&c>f){this.isVertical=false}if(this.isHorizontal&&b>f){this.isHorizontal=false}if(this.isVertical&&this.isHorizontal){if(b>c){this.isHorizontal=false}else{this.isVertical=false}}if(this.isHorizontal){m=(h<0)?"left":"right";a=h}else{if(this.isVertical){m=(g<0)?"up":"down";a=g}}m=this.direction||(this.direction=m);if(m==="up"){a=g*-1}else{if(m==="left"){a=h*-1}}this.distance=a;if(!a){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(m==="right"&&this.startX>p){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(m==="down"&&this.startY>p){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(m==="left"&&(n-this.startX)>p){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(m==="up"&&(j-this.startY)>p){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=true;this.startTime=k.time;this.fire("edgeswipestart",k,{touch:i,direction:m,distance:a,duration:d})}else{this.fire("edgeswipe",k,{touch:i,direction:m,distance:a,duration:d})}},onTouchEnd:function(b){var a;if(this.onTouchMove(b)!==false){a=b.time-this.startTime;this.fire("edgeswipeend",b,{touch:b.changedTouches[0],direction:this.direction,distance:this.distance,duration:a})}},onTouchCancel:function(a){this.fire("edgeswipecancel",a,{touch:a.changedTouches[0]});return false},reset:function(){var a=this;a.started=a.direction=a.isHorizontal=a.isVertical=a.startX=a.startY=a.startTime=a.distance=null}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.edgeSwipe)}));(Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1000},handledEvents:["longpress","taphold"],fireLongPress:function(a){this.fire("longpress",a,{touch:a.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=true},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}this.startPoint=a.changedTouches[0].point;this.isLongPress=false;this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(a){if(a==="longpress"){var b=Array.prototype.slice.call(arguments);b[0]="taphold";this.fire.apply(this,b)}return Ext.event.gesture.SingleTouch.prototype.fire.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.longPress)}));(Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:function(d){var a=this.requiredTouchesCount,c=d.touches,b=c.length;if(b===a){this.start(d)}else{if(b>a){this.end(d)}}},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){this.end(a,true);return false},start:function(){if(!this.isTracking){this.isTracking=true;this.isStarted=false}},end:function(b,a){if(this.isTracking){this.isTracking=false;if(this.isStarted){this.isStarted=false;this[a?"fireCancel":"fireEnd"](b)}}},reset:function(){this.isTracking=this.isStarted=false}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{priority:600,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(c){if(!this.isTracking){return}var b=c.touches,d,a,f;d=b[0].point;a=b[1].point;f=d.getDistanceTo(a);if(f===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=f;this.fire("pinchstart",c,{touches:b,distance:f,scale:1})}else{this.fire("pinch",c,{touches:b,distance:f,scale:f/this.startDistance})}},fireEnd:function(a){this.fire("pinchend",a)},fireCancel:function(a){this.fire("pinchcancel",a)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)},reset:function(){this.lastTouches=null;this.startDistance=0;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.pinch)}));(Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{priority:700,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(h){if(!this.isTracking){return}var g=h.touches,b=this.lastAngle,d,f,c,a,i,j;d=g[0].point;f=g[1].point;c=d.getAngleTo(f);if(b!==null){j=Math.abs(b-c);a=c+360;i=c-360;if(Math.abs(a-b)<j){c=a}else{if(Math.abs(i-b)<j){c=i}}}this.lastAngle=c;if(!this.isStarted){this.isStarted=true;this.startAngle=c;this.fire("rotatestart",h,{touches:g,angle:c,rotation:0})}else{this.fire("rotate",h,{touches:g,angle:c,rotation:c-this.startAngle})}this.lastTouches=Ext.Array.clone(g)},fireEnd:function(a){this.lastAngle=null;this.fire("rotateend",a)},fireCancel:function(a){this.lastAngle=null;this.fire("rotatecancel",a)},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.rotate)}));(Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,a)===false){return false}this.startPoint=a.changedTouches[0].point},onTouchMove:function(b){var c=b.changedTouches[0],a=c.point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire("tapcancel",b,{touch:c});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(a){this.fire("tap",a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){this.fire("tapcancel",a,{touch:a.changedTouches[0]});return false},reset:function(){this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.tap)}));(Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],doDelegatedEvent:function(d,c){var b=this,a;d=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,d,false);if(d){if(d.type==="focusout"){if(d.relatedTarget==null){b.processFocusIn(d,d.target,document.body,c)}}else{a=d.relatedTarget;b.processFocusIn(d,(a==null||!a.tagName)?document.body:a,d.target,c)}}},processFocusIn:function(i,j,c,l){var k=this,m,b,h=[],a,g,f,d;f=Ext.fly(j);d=Ext.fly(c);if((f&&f.isFocusSuspended())||(d&&d.isFocusSuspended())){return}for(b=j,m=Ext.dom.Element.getCommonAncestor(c,j,true);b&&b!==m;b=b.parentNode){h.push(b)}if(h.length){a=k.createSyntheticEvent("focusleave",i,j,c);k.publish("focusleave",h,a);if(a.isStopped){return}}h.length=0;for(b=c;b!==m;b=b.parentNode){h.push(b)}g=k.createSyntheticEvent("focusenter",i,c,j);if(h.length){k.publish("focusenter",h,g);if(g.isStopped){return}}h=k.getPropagatingTargets(m);if(h.length){a=k.createSyntheticEvent("focusmove",i,c,j);k.publish("focusmove",h,a);if(a.isStopped){return}}if(l){k.afterEvent(i)}Ext.GlobalEvents.fireEvent("focus",{event:g,toElement:c,fromElement:j})},createSyntheticEvent:function(b,e,d,a){var c=new Ext.event.Event(e);c.type=b;c.relatedTarget=a;c.target=d;return c}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(b){var a;b.instance=new b();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:["focus","blur"],doDelegatedEvent:function(g,f){var d=this;g=d.callSuper([g,false]);if(g){clearTimeout(a);a=0;if(g.type==="blur"){var c=g.target===window?document.body:g.target;a=setTimeout(function(){a=0;d.processFocusIn(g,c,document.body,f);b.previousActiveElement=null},0);if(g.target===window||g.target===document){b.previousActiveElement=null}else{b.previousActiveElement=g.target}}else{d.processFocusIn(g,b.previousActiveElement||document.body,g.target===window?document.body:g.target,f)}}}})}}));(Ext.cmd.derive("Ext.fx.State",Ext.Base,{isAnimatable:{"background-color":true,"background-image":true,"background-position":true,"border-bottom-color":true,"border-bottom-width":true,"border-color":true,"border-left-color":true,"border-left-width":true,"border-right-color":true,"border-right-width":true,"border-spacing":true,"border-top-color":true,"border-top-width":true,"border-width":true,bottom:true,color:true,crop:true,"font-size":true,"font-weight":true,height:true,left:true,"letter-spacing":true,"line-height":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,opacity:true,"outline-color":true,"outline-offset":true,"outline-width":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,right:true,"text-indent":true,"text-shadow":true,top:true,"vertical-align":true,visibility:true,width:true,"word-spacing":true,"z-index":true,zoom:true,transform:true},constructor:function(a){this.data={};this.set(a)},setConfig:function(a){this.set(a);return this},setRaw:function(a){this.data=a;return this},clear:function(){return this.setRaw({})},setTransform:function(c,g){var f=this.data,a=Ext.isArray(g),b=f.transform,e,d;if(!b){b=f.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof c=="string"){switch(c){case"translate":if(a){e=g.length;if(e==0){break}b.translateX=g[0];if(e==1){break}b.translateY=g[1];if(e==2){break}b.translateZ=g[2]}else{b.translateX=g}break;case"rotate":if(a){e=g.length;if(e==0){break}b.rotateX=g[0];if(e==1){break}b.rotateY=g[1];if(e==2){break}b.rotateZ=g[2]}else{b.rotate=g}break;case"scale":if(a){e=g.length;if(e==0){break}b.scaleX=g[0];if(e==1){break}b.scaleY=g[1];if(e==2){break}b.scaleZ=g[2]}else{b.scaleX=g;b.scaleY=g}break;case"skew":if(a){e=g.length;if(e==0){break}b.skewX=g[0];if(e==1){break}b.skewY=g[1]}else{b.skewX=g}break;default:b[c]=g}}else{for(d in c){if(c.hasOwnProperty(d)){g=c[d];this.setTransform(d,g)}}}},set:function(a,d){var c=this.data,b;if(typeof a!="string"){for(b in a){d=a[b];if(b==="transform"){this.setTransform(d)}else{c[b]=d}}}else{if(a==="transform"){this.setTransform(d)}else{c[a]=d}}return this},unset:function(a){var b=this.data;if(b.hasOwnProperty(a)){delete b[a]}return this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,"State"],0));(Ext.cmd.derive("Ext.fx.animation.Abstract",Ext.Evented,{isAnimation:true,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:false,replacePrevious:true},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};Ext.Evented.prototype.constructor.apply(this,arguments);return this},applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},applyAfter:function(b,a){if(b){return Ext.factory(b,Ext.fx.State,a)}},setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(a){var c=this.stateNameRegex,b;for(b in a){if(c.test(b)){this.setState(b,a[b])}}return this},getStates:function(){return this.states},updateCallback:function(a){if(a){this.setOnEnd(a)}},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop();Ext.Evented.prototype.destroy.call(this)},setState:function(b,d){var a=this.getStates(),c;c=Ext.factory(d,Ext.fx.State,a[b]);if(c){a[b]=c}return this},getState:function(a){return this.getStates()[a]},getData:function(){var g=this,l=g.getStates(),e={},h=g.getBefore(),c=g.getAfter(),i=l[g.STATE_FROM],j=l[g.STATE_TO],k=i.getData(),f=j.getData(),d,b,a;for(b in l){if(l.hasOwnProperty(b)){a=l[b];d=a.getData();e[b]=d}}return{before:h?h.getData():{},after:c?c.getData():{},states:e,from:k,to:f,duration:g.getDuration(),iteration:g.getIteration(),direction:g.getDirection(),easing:g.getEasing(),delay:g.getDelay(),onEnd:g.getOnEnd(),onBeforeEnd:g.getOnBeforeEnd(),onBeforeStart:g.getOnBeforeStart(),scope:g.getScope(),preserveEndState:g.getPreserveEndState(),replacePrevious:g.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,"Abstract"],0));(Ext.cmd.derive("Ext.fx.animation.Slide",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.SlideIn",config:{direction:"left",out:false,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:true,useCssTransform:true},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(a){if(a==="auto"){return"ease-"+((this.getOut())?"in":"out")}return a},getContainerBox:function(){var a=this._containerBox;if(a==="auto"){a=this.getElement().getParent().getBox()}return a},getElementBox:function(){var a=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(a==="auto"){a=this.getElement().getBox()}return a},getData:function(){var p=this.getElementBox(),c=this.getContainerBox(),g=p?p:c,n=this.getFrom(),o=this.getTo(),f=this.getOut(),e=this.getOffset(),m=this.getDirection(),b=this.getUseCssTransform(),h=this.getReverse(),d=0,a=0,l,j,k,i;if(h){m=this.reverseDirectionMap[m]}switch(m){case this.DIRECTION_UP:if(f){a=c.top-g.top-g.height-e}else{a=c.bottom-g.bottom+g.height+e}break;case this.DIRECTION_DOWN:if(f){a=c.bottom-g.bottom+g.height+e}else{a=c.top-g.height-g.top-e}break;case this.DIRECTION_RIGHT:if(f){d=c.right-g.right+g.width+e}else{d=c.left-g.left-g.width-e}break;case this.DIRECTION_LEFT:if(f){d=c.left-g.left-g.width-e}else{d=c.right-g.right+g.width+e}break}l=(f)?0:d;j=(f)?0:a;if(b){n.setTransform({translateX:l,translateY:j})}else{n.set("left",l);n.set("top",j)}k=(f)?d:0;i=(f)?a:0;if(b){o.setTransform({translateX:k,translateY:i})}else{o.set("left",k);o.set("top",i)}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.slide","animation.slideIn"],0,[Ext.fx.animation,"Slide",Ext.fx.animation,"SlideIn"],0));(Ext.cmd.derive("Ext.fx.animation.SlideOut",Ext.fx.animation.Slide,{config:{out:true}},0,0,0,0,["animation.slideOut"],0,[Ext.fx.animation,"SlideOut"],0));(Ext.cmd.derive("Ext.fx.animation.Fade",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.FadeIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(a){var c=this.getTo(),b=this.getFrom();if(a){b.set("opacity",1);c.set("opacity",0)}else{b.set("opacity",0);c.set("opacity",1)}}},0,0,0,0,["animation.fade","animation.fadeIn"],0,[Ext.fx.animation,"Fade",Ext.fx.animation,"FadeIn"],0));(Ext.cmd.derive("Ext.fx.animation.FadeOut",Ext.fx.animation.Fade,{config:{out:true,before:{}}},0,0,0,0,["animation.fadeOut"],0,[Ext.fx.animation,"FadeOut"],0));(Ext.cmd.derive("Ext.fx.animation.Flip",Ext.fx.animation.Abstract,{config:{easing:"ease-in",direction:"right",half:false,out:null},getData:function(){var g=this,i=g.getFrom(),j=g.getTo(),h=g.getDirection(),b=g.getOut(),m=g.getHalf(),c=m?90:180,e=1,a=1,l=0,k=0,f=0,d=0;if(b){a=0.8}else{e=0.8}switch(h){case this.DIRECTION_UP:if(b){f=c}else{l=-c}break;case this.DIRECTION_DOWN:if(b){f=-c}else{l=c}break;case this.DIRECTION_RIGHT:if(b){d=c}else{k=-c}break;case this.DIRECTION_LEFT:if(b){d=-c}else{k=c}break}i.setTransform({rotateX:l,rotateY:k,scale:e});j.setTransform({rotateX:f,rotateY:d,scale:a});return Ext.fx.animation.Abstract.prototype.getData.call(this)}},0,0,0,0,["animation.flip"],0,[Ext.fx.animation,"Flip"],0));(Ext.cmd.derive("Ext.fx.animation.Pop",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.PopIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var c=this.getTo(),b=this.getFrom(),a=this.getOut();if(a){b.set("opacity",1);b.setTransform({scale:1});c.set("opacity",0);c.setTransform({scale:0})}else{b.set("opacity",0);b.setTransform({scale:0});c.set("opacity",1);c.setTransform({scale:1})}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.pop","animation.popIn"],0,[Ext.fx.animation,"Pop",Ext.fx.animation,"PopIn"],0));(Ext.cmd.derive("Ext.fx.animation.PopOut",Ext.fx.animation.Pop,{config:{out:true,before:{}}},0,0,0,0,["animation.popOut"],0,[Ext.fx.animation,"PopOut"],0));(Ext.cmd.derive("Ext.fx.Animation",Ext.Base,{constructor:function(b){var a=Ext.fx.animation.Abstract,c;if(typeof b=="string"){c=b;b={}}else{if(b&&b.type){c=b.type}}if(c){a=Ext.ClassManager.getByAlias("animation."+c)}return Ext.factory(b,a)}},1,0,0,0,0,0,[Ext.fx,"Animation"],0));(Ext.cmd.derive("Ext.fx.runner.Css",Ext.Evented,{prefixedProperties:{transform:true,"transform-origin":true,perspective:true,"transform-style":true,transition:true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,animation:true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{top:true,right:true,bottom:true,left:true,width:true,height:true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,translate:true,translateX:true,translateY:true,translateZ:true,translate3d:true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var a=this;a.transformMethods=Ext.feature.has.Css3dTransforms?a.transformMethods3d:a.transformMethodsNo3d;a.vendorPrefix=Ext.browser.getStyleDashPrefix();a.ruleStylesCache={};Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var c=this.styleSheet,a,b;if(!c){a=document.createElement("style");a.type="text/css";(document.head||document.getElementsByTagName("head")[0]).appendChild(a);b=document.styleSheets;this.styleSheet=c=b[b.length-1]}return c},applyRules:function(i){var g=this.getStyleSheet(),k=this.ruleStylesCache,j=g.cssRules,c,e,h,b,d,a,f;for(c in i){e=i[c];h=k[c];if(h===undefined){d=j.length;g.insertRule(c+"{}",d);h=k[c]=j.item(d).style}b=h.$cache;if(!b){b=h.$cache={}}for(a in e){f=this.formatValue(e[a],a);a=this.formatName(a);if(b[a]!==f){b[a]=f;if(f===null){h.removeProperty(a)}else{h.setProperty(a,f,"important")}}}}return this},applyStyles:function(d){var g,c,f,b,a,e;for(g in d){if(d.hasOwnProperty(g)){c=document.getElementById(g);if(!c){continue}f=c.style;b=d[g];for(a in b){if(b.hasOwnProperty(a)){e=this.formatValue(b[a],a);a=this.formatName(a);if(e===null){f.removeProperty(a)}else{f.setProperty(a,e,"important")}}}}}return this},formatName:function(b){var a=this.formattedNameCache,c=a[b];if(!c){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[b]){c=this.vendorPrefix+b}else{c=b}a[b]=c}return c},formatValue:function(j,b){var g=typeof j,l=this.DEFAULT_UNIT_LENGTH,e,a,d,f,c,k,h;if(j===null){return""}if(g=="string"){if(this.lengthProperties[b]){h=j.match(this.lengthUnitRegex)[1];if(h.length>0){}else{return j+l}}return j}else{if(g=="number"){if(j==0){return"0"}if(this.lengthProperties[b]){return j+l}if(this.angleProperties[b]){return j+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[b]){return j+this.DEFAULT_UNIT_DURATION}}else{if(b==="transform"){e=this.transformMethods;c=[];for(d=0,f=e.length;d<f;d++){a=e[d];c.push(a+"("+this.formatValue(j[a],a)+")")}return c.join(" ")}else{if(Ext.isArray(j)){k=[];for(d=0,f=j.length;d<f;d++){k.push(this.formatValue(j[d],b))}return(k.length>0)?k.join(", "):"none"}}}}return j}},1,0,0,0,0,0,[Ext.fx.runner,"Css"],0));(Ext.cmd.derive("Ext.fx.runner.CssTransition",Ext.fx.runner.Css,{alternateClassName:"Ext.Animator",singleton:true,listenersAttached:false,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=true;Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(b){var a=b.target,c=a.id;if(c&&this.runningAnimationsData.hasOwnProperty(c)){this.refreshRunningAnimationsData(Ext.get(a),[b.browserEvent.propertyName])}},onAnimationEnd:function(g,f,d,j,n){var c=g.getId(),k=this.runningAnimationsData[c],o={},m={},b,h,e,l,a;d.un("stop","onAnimationStop",this);if(k){b=k.nameMap}o[c]=m;if(f.onBeforeEnd){f.onBeforeEnd.call(f.scope||this,g,j)}d.fireEvent("animationbeforeend",d,g,j);this.fireEvent("animationbeforeend",this,d,g,j);if(n||(!j&&!f.preserveEndState)){h=f.toPropertyNames;for(e=0,l=h.length;e<l;e++){a=h[e];if(b&&!b.hasOwnProperty(a)){m[a]=null}}}if(f.after){Ext.merge(m,f.after)}this.applyStyles(o);if(f.onEnd){f.onEnd.call(f.scope||this,g,j)}d.fireEvent("animationend",d,g,j);this.fireEvent("animationend",this,d,g,j);Ext.AnimationQueue.stop(Ext.emptyFn,d)},onAllAnimationsEnd:function(b){var c=b.getId(),a={};delete this.runningAnimationsData[c];a[c]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null};this.applyStyles(a);this.fireEvent("animationallend",this,b)},hasRunningAnimations:function(a){var c=a.getId(),b=this.runningAnimationsData;return b.hasOwnProperty(c)&&b[c].sessions.length>0},refreshRunningAnimationsData:function(d,k,t,p){var g=d.getId(),q=this.runningAnimationsData,a=q[g];if(!a){return}var m=a.nameMap,s=a.nameList,b=a.sessions,f,h,e,u,l,c,r,o,n=false;t=Boolean(t);p=Boolean(p);if(!b){return this}f=b.length;if(f===0){return this}if(p){a.nameMap={};s.length=0;for(l=0;l<f;l++){c=b[l];this.onAnimationEnd(d,c.data,c.animation,t,p)}b.length=0}else{for(l=0;l<f;l++){c=b[l];r=c.map;o=c.list;for(h=0,e=k.length;h<e;h++){u=k[h];if(r[u]){delete r[u];Ext.Array.remove(o,u);c.length--;if(--m[u]==0){delete m[u];Ext.Array.remove(s,u)}}}if(c.length==0){b.splice(l,1);l--;f--;n=true;this.onAnimationEnd(d,c.data,c.animation,t)}}}if(!p&&!t&&b.length==0&&n){this.onAllAnimationsEnd(d)}},getRunningData:function(b){var a=this.runningAnimationsData;if(!a.hasOwnProperty(b)){a[b]={nameMap:{},nameList:[],sessions:[]}}return a[b]},getTestElement:function(){var c=this.testElement,b,d,a;if(!c){b=document.createElement("iframe");b.setAttribute("tabIndex",-1);a=b.style;a.setProperty("visibility","hidden","important");a.setProperty("width","0px","important");a.setProperty("height","0px","important");a.setProperty("position","absolute","important");a.setProperty("border","0px","important");a.setProperty("zIndex","-1000","important");document.body.appendChild(b);d=b.contentDocument;d.open();d.writeln("</body>");d.close();this.testElement=c=d.createElement("div");c.style.setProperty("position","absolute","important");d.body.appendChild(c);this.testElementComputedStyle=window.getComputedStyle(c)}return c},getCssStyleValue:function(b,e){var d=this.getTestElement(),a=this.testElementComputedStyle,c=d.style;c.setProperty(b,e);if(Ext.browser.is.Firefox){d.offsetHeight}e=a.getPropertyValue(b);c.removeProperty(b);return e},run:function(q){var G=this,h=G.lengthProperties,y={},F={},H={},d,t,z,e,v,J,w,r,s,a,n,B,A,p,C,l,u,g,D,I,k,f,x,o,c,E,b,m;if(!G.listenersAttached){G.attachListeners()}q=Ext.Array.from(q);for(B=0,p=q.length;B<p;B++){C=q[B];C=Ext.factory(C,Ext.fx.Animation);d=C.getElement();Ext.AnimationQueue.start(Ext.emptyFn,C);g=window.getComputedStyle(d.dom);t=d.getId();H=Ext.merge({},C.getData());if(C.onBeforeStart){C.onBeforeStart.call(C.scope||G,d)}C.fireEvent("animationstart",C);G.fireEvent("animationstart",G,C);H[t]=H;v=H.before;z=H.from;e=H.to;H.fromPropertyNames=J=[];H.toPropertyNames=w=[];for(I in e){if(e.hasOwnProperty(I)){e[I]=k=G.formatValue(e[I],I);D=G.formatName(I);o=h.hasOwnProperty(I);if(!o){k=G.getCssStyleValue(D,k)}if(z.hasOwnProperty(I)){z[I]=x=G.formatValue(z[I],I);if(!o){x=G.getCssStyleValue(D,x)}if(k!==x){J.push(D);w.push(D)}}else{f=g.getPropertyValue(D);if(k!==f){w.push(D)}}}}l=w.length;if(l===0){G.onAnimationEnd(d,H,C);continue}a=G.getRunningData(t);b=a.sessions;if(b.length>0){G.refreshRunningAnimationsData(d,Ext.Array.merge(J,w),true,H.replacePrevious)}c=a.nameMap;E=a.nameList;u={};for(A=0;A<l;A++){I=w[A];u[I]=true;if(!c.hasOwnProperty(I)){c[I]=1;E.push(I)}else{c[I]++}}m={element:d,map:u,list:w.slice(),length:l,data:H,animation:C};b.push(m);C.on("stop","onAnimationStop",G);n=Ext.apply({},v);Ext.apply(n,z);if(E.length>0){J=Ext.Array.difference(E,J);w=Ext.Array.merge(J,w);n["transition-property"]=J}y[t]=n;F[t]=Ext.apply({},e);F[t]["transition-property"]=w;F[t]["transition-duration"]=H.duration;F[t]["transition-timing-function"]=H.easing;F[t]["transition-delay"]=H.delay;C.startTime=Date.now()}s=G.$className;G.applyStyles(y);r=function(i){if(i.data===s&&i.source===window){window.removeEventListener("message",r,false);G.applyStyles(F)}};if(window.requestAnimationFrame){window.requestAnimationFrame(function(){window.addEventListener("message",r,false);window.postMessage(s,"*")})}else{Ext.defer(function(){window.addEventListener("message",r,false);window.postMessage(s,"*")},1)}},onAnimationStop:function(d){var f=this.runningAnimationsData,h,a,g,b,c,e;for(h in f){if(f.hasOwnProperty(h)){a=f[h];g=a.sessions;for(b=0,c=g.length;b<c;b++){e=g[b];if(e.animation===d){this.refreshRunningAnimationsData(e.element,e.list.slice(),false)}}}}}},1,0,0,0,0,0,[Ext.fx.runner,"CssTransition",Ext,"Animator"],0));(Ext.cmd.derive("Ext.mixin.Responsive",Ext.Mixin,function(a){return{mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:undefined,merge:function(g,c,f,e){if(!g){return c}var b=c?Ext.Object.chain(c):{},d;for(d in g){if(!e||!(d in b)){b[d]={fn:null,config:g[d]}}}return b}},responsiveFormulas:{$value:0,merge:function(e,b,d,c){return this.mergeNew(e,b,d,c)}}},destroy:function(){a.unregister(this);this.callParent()},privates:{statics:{active:false,all:{},context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){a.active=true;a.updateContext();Ext.on("resize",a.onResize,a)},deactivate:function(){a.active=false;Ext.un("resize",a.onResize,a)},notify:function(){var d=a.all,c=a.context,b=Ext.GlobalEvents,f=a.timer,e;if(f){a.timer=null;Ext.Function.cancelAnimationFrame(f)}a.updateContext();Ext.suspendLayouts();b.fireEvent("beforeresponsiveupdate",c);for(e in d){d[e].setupResponsiveContext()}b.fireEvent("beginresponsiveupdate",c);for(e in d){d[e].updateResponsiveState()}b.fireEvent("responsiveupdate",c);Ext.resumeLayouts(true)},onResize:function(){if(!a.timer){a.timer=Ext.Function.requestAnimationFrame(a.onTimer)}},onTimer:function(){a.timer=null;a.notify()},processConfig:function(b,h,f){var g=h&&h[f],e=b.config,c,d;if(g){d=b.getConfigurator();c=d.configs[f];e[f]=c.merge(g,e[f],b)}},register:function(b){var c=b.$responsiveId;if(!c){b.$responsiveId=c=++a.nextId;a.all[c]=b;if(++a.count===1){a.activate()}}},unregister:function(b){var c=b.$responsiveId;if(c in a.all){b.$responsiveId=null;delete a.all[c];if(--a.count===0){a.deactivate()}}},updateContext:function(){var e=Ext.Element,d=e.getViewportWidth(),b=e.getViewportHeight(),c=a.context;c.width=d;c.height=b;c.tall=d<b;c.wide=!c.tall;c.landscape=c.portrait=false;if(!c.platform){c.platform=Ext.platformTags}c[Ext.dom.Element.getOrientation()]=true}},afterClassMixedIn:function(f){var e=f.prototype,b=e.responsiveConfig,d=e.responsiveFormulas,c;if(b||d){c={};if(b){delete e.responsiveConfig;c.responsiveConfig=b}if(d){delete e.responsiveFormulas;c.responsiveFormulas=d}f.getConfigurator().add(c)}},applyResponsiveConfig:function(c){for(var b in c){c[b].fn=Ext.createRuleFn(b)}return c},applyResponsiveFormulas:function(d){var c={},e,b;if(d){for(b in d){if(Ext.isString(e=d[b])){e=Ext.createRuleFn(e)}c[b]=e}}return c},getResponsiveState:function(){var c=a.context,f=this.getResponsiveConfig(),b={},d,e;if(f){for(e in f){d=f[e];if(d.fn.call(this,c)){Ext.merge(b,d.config)}}}return b},setupResponsiveContext:function(){var c=this.getResponsiveFormulas(),d=a.context,b;if(c){for(b in c){d[b]=c[b].call(this,d)}}},transformInstanceConfig:function(d){var c=this,b;a.register(c);if(d){a.processConfig(c,d,"responsiveConfig");a.processConfig(c,d,"responsiveFormulas")}c.setupResponsiveContext();b=c.getResponsiveState();if(d){b=Ext.merge({},d,b);delete b.responsiveConfig;delete b.responsiveFormulas}return b},updateResponsiveState:function(){var b=this.getResponsiveState();this.setConfig(b)}}}},0,0,0,0,0,0,[Ext.mixin,"Responsive"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){var c=null,g=Ext.global.chrome,d,b=function(){b=Ext.now;var j,k;if(Ext.isChrome&&g&&g.Interval){j=new g.Interval();j.start();b=function(){return j.microseconds()/1000}}else{if(window.ActiveXObject){try{k=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=k;b=function(){return k.milliseconds}}catch(l){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=b;return b()};function h(k,j){k.sum+=j;k.min=Math.min(k.min,j);k.max=Math.max(k.max,j)}function e(m){var k=m?m:(b()-this.time),l=this,j=l.accum;++j.count;if(!--j.depth){h(j.total,k)}h(j.pure,k-l.childTime);c=l.parent;if(c){++c.accum.childCount;c.childTime+=k}}function a(){return{min:Number.MAX_VALUE,max:0,sum:0}}function i(k,j){return function(){var m=k.enter(),l=j.apply(this,arguments);m.leave();return l}}function f(l,k,j,n){var m={avg:0,min:n.min,max:n.max,sum:0};if(l){j=j||0;m.sum=n.sum-k*j;m.avg=m.sum/l}return m}return{constructor:function(j){var k=this;k.count=k.childCount=k.depth=k.maxDepth=0;k.pure=a();k.total=a();k.name=j},statics:{getTimestamp:b},format:function(j){if(!d){d=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(l){return Math.round(l*100)/100}})}var k=this.getData(j);k.name=this.name;k.pure.type="Pure";k.total.type="Total";k.times=[k.pure,k.total];return d.apply(k)},getData:function(j){var k=this;return{count:k.count,childCount:k.childCount,depth:k.maxDepth,pure:f(k.count,k.childCount,j,k.pure),total:f(k.count,k.childCount,j,k.total)}},enter:function(){var j=this,k={accum:j,leave:e,childTime:0,parent:c};++j.depth;if(j.maxDepth<j.depth){j.maxDepth=j.depth}c=k;k.time=b();return k},monitor:function(l,k,j){var m=this.enter();if(j){l.apply(k,j)}else{l.call(k)}m.leave()},report:function(){Ext.log(this.format())},tap:function(r,t){var s=this,m=typeof t==="string"?[t]:t,q,u,o,n,l,k,j,p;p=function(){if(typeof r==="string"){q=Ext.global;n=r.split(".");for(o=0,l=n.length;o<l;++o){q=q[n[o]]}}else{q=r}for(o=0,l=m.length;o<l;++o){k=m[o];u=k.charAt(0)==="!";if(u){k=k.substring(1)}else{u=!(k in q.prototype)}j=u?q:q.prototype;j[k]=i(s,j[k])}};Ext.ClassManager.onCreated(p,s,r);return s}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var b=new Ext.perf.Accumulator("$"),f=b.total,c=Ext.perf.Accumulator.getTimestamp,e=0,g,a,d;d=c();do{g=b.enter();g.leave();++e}while(f.sum<100);a=c();return(a-d)/e},get:function(b){var c=this,a=c.accumulatorsByName[b];if(!a){c.accumulatorsByName[b]=a=new Ext.perf.Accumulator(b);c.accumulators.push(a)}return a},enter:function(a){return this.get(a).enter()},monitor:function(a,c,b){this.get(a).monitor(c,b)},report:function(){var c=this,b=c.accumulators,a=c.calibrate();b.sort(function(e,d){return(e.name<d.name)?-1:((d.name<e.name)?1:0)});c.updateGC();Ext.log("Calibration: "+Math.round(a*100)/100+" msec/sample");Ext.each(b,function(d){Ext.log(d.format(a))})},getData:function(c){var b={},a=this.accumulators;Ext.each(a,function(d){if(c||d.count){b[d.name]=d.getData()}});return b},reset:function(){Ext.each(this.accumulators,function(a){var b=a;b.count=b.childCount=b.depth=b.maxDepth=0;b.pure={min:Number.MAX_VALUE,max:0,sum:0};b.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var a=this.accumulatorsByName.GC,b=Ext.senchaToolbox,c;if(a){a.count=b.garbageCollectionCounter||0;if(a.count){c=a.pure;a.total.sum=c.sum=b.garbageCollectionMilliseconds;c.min=c.max=c.sum/a.count;c=a.total;c.min=c.max=c.sum/a.count}}},watchGC:function(){Ext.perf.getTimestamp();var a=Ext.senchaToolbox;if(a){this.get("GC");a.watchGarbageCollector(false)}},setup:function(c){if(!c){c={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=c;var d,f,b,e,a;for(d in c){if(c.hasOwnProperty(d)){f=c[d];b=Ext.Perf.get(d);for(e in f){if(f.hasOwnProperty(e)){a=f[e];b.tap(e,a)}}}}this.watchGC()},setupLog:function(c){var e,a,b,f,d;for(e in c){if(c.hasOwnProperty(e)){a=Ext.ClassManager.get(e);if(a){b=c[e];d={};for(f in b){d[f]=(function(g,h){return function(){var k,l,m,j,i;k=+Date.now();i=this.callParent(arguments);l=+Date.now()-k;if(window.console&&l>0){j=h==="this"?this:typeof h==="string"?this[h]:typeof h==="number"?arguments[h]:null;if(j){m=j.id}if(m!=null){console.log(g+" for "+m+": "+l+"ms")}else{console.log(g+" for unknown: "+l+"ms")}if(console.trace){console.trace()}}return i}})(f,b[f])}Ext.override(a,d)}}}}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));(Ext.cmd.derive("Ext.plugin.Abstract",Ext.Base,{alternateClassName:"Ext.AbstractPlugin",isPlugin:true,constructor:function(a){if(a){this.pluginConfig=a;this.initConfig(a)}},clonePlugin:function(a){return new this.self(Ext.apply({},a,this.pluginConfig))},setCmp:function(a){this.cmp=a},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:function(){this.cmp=this.pluginConfig=null;this.callParent()},onClassExtended:function(b,d,a){var c=d.alias;if(c&&!d.ptype){if(Ext.isArray(c)){c=c[0]}b.prototype.ptype=c.split("plugin.")[1]}},resolveListenerScope:function(d){var c=this,b=c.getCmp(),a;if(b){a=b.resolveSatelliteListenerScope(c,d)}return a||c.mixins.observable.resolveListenerScope.call(c,d)}},1,0,0,0,0,0,[Ext.plugin,"Abstract",Ext,"AbstractPlugin"],0));Ext.define("Ext.overrides.plugin.Abstract",{override:"Ext.plugin.Abstract",$configStrict:false,$configPrefixed:false,disabled:false,getState:null,applyState:null,enable:function(){this.disabled=false},disable:function(){this.disabled=true}});(Ext.cmd.derive("Ext.util.LocalStorage",Ext.Base,{id:null,destroyed:false,lazyKeys:true,prefix:"",session:false,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(e){var d=this,b=d.cache,c={_users:1},a;if(Ext.isString(e)){c.id=e}else{Ext.apply(c,e)}if(!(a=b[c.id])){a=new d(c)}else{++a._users}return a},supported:true},constructor:function(a){var b=this;Ext.apply(b,a);if(b._users){Ext.util.LocalStorage.cache[b.id]=b}b.init()},init:function(){var a=this,b=a.id;if(!a.prefix&&b){a.prefix=b+"-"}a._store=(a.session?window.sessionStorage:window.localStorage)},destroy:function(){var a=this;delete Ext.util.LocalStorage.cache[a.id];a._store=a._keys=null;a.callParent()},getKeys:function(){var e=this,a=e._store,f=e.prefix,d=e._keys,g=f.length,c,b;if(!d){e._keys=d=[];for(c=a.length;c--;){b=a.key(c);if(b.length>g){if(f===b.substring(0,g)){d.push(b.substring(g))}}}}return d},release:function(){if(!--this._users){this.destroy()}},save:Ext.emptyFn,clear:function(){var d=this,a=d._store,e=d.prefix,c=d._keys||d.getKeys(),b;for(b=c.length;b--;){a.removeItem(e+c[b])}c.length=0},key:function(a){var b=this._keys||this.getKeys();return(0<=a&&a<b.length)?b[a]:null},getItem:function(b){var a=this.prefix+b;return this._store.getItem(a)},removeItem:function(c){var f=this,b=f.prefix+c,a=f._store,e=f._keys,d=a.length;a.removeItem(b);if(e&&d!==a.length){if(f.lazyKeys){f._keys=null}else{Ext.Array.remove(e,c)}}},setItem:function(c,g){var f=this,b=f.prefix+c,a=f._store,e=a.length,d=f._keys;a.setItem(b,g);if(d&&e!==a.length){d.push(c)}}},1,0,0,0,0,0,[Ext.util,"LocalStorage"],function(){var a=this;if("localStorage" in window){return}if(!Ext.isIE){a.supported=false;return}a.override({data:null,flushDelay:1,init:function(){var c=this,d=c.data,b;c.el=b=document.createElement("div");b.id=(c.id||(c.id="extjs-localstore"));b.addBehavior("#default#userdata");Ext.getHead().dom.appendChild(b);b.load(c.id);d=b.getAttribute("xdata");c.data=d=(d?Ext.decode(d):{});c._flushFn=function(){c._timer=null;c.save(0)}},destroy:function(){var c=this,b=c.el;if(b){if(c._timer){c.save()}b.parentNode.removeChild(b);c.data=c.el=null;c.callParent()}},getKeys:function(){var c=this,b=c._keys;if(!b){c._keys=b=Ext.Object.getKeys(c.data)}return b},save:function(b){var c=this;if(!b){if(c._timer){clearTimeout(c._timer);c._timer=null}c.el.setAttribute("xdata",Ext.encode(c.data));c.el.save(c.id)}else{if(!c._timer){c._timer=Ext.defer(c._flushFn,b)}}},clear:function(){var b=this;b.data={};b._keys=null;b.save(b.flushDelay)},getItem:function(b){var c=this.data;return(b in c)?c[b]:null},removeItem:function(b){var d=this,c=d._keys,e=d.data;if(b in e){delete e[b];if(c){if(d.lazyKeys){d._keys=null}else{Ext.Array.remove(c,b)}}d.save(d.flushDelay)}},setItem:function(b,f){var d=this,e=d.data,c=d._keys;if(c&&!(b in e)){c.push(b)}e[b]=f;d.save(d.flushDelay)}})}));Ext.define(null,{override:"Ext.event.publisher.Focus",compatibility:Ext.isIE10m,doDelegatedEvent:function(d,c){var a=document.body,b=Ext.synchronouslyFocusing;if(b&&((d.type==="focusout"&&d.srcElement===b&&d.toElement===a)||(d.type==="focusin"&&d.srcElement===a&&d.fromElement===b&&d.toElement===null))){return}return this.callParent([d,c])}});Ext.define(null,{override:"Ext.scroll.DomScroller",compatibility:Ext.isIE8,privates:{doScrollTo:function(h,g,a){var f=this,c=f.getElement(),d,b,i,j,e;if(c&&!c.destroyed){b=this.getElement().dom;j=(h===Infinity);e=(g===Infinity);if(j||e){d=f.getMaxPosition();if(j){h=d.x}if(e){g=d.y}}h=f.convertX(h);if(a){i={};if(g!=null){i.scrollTop=g}if(h!=null){i.scrollLeft=h}c.animate(Ext.mergeIf({to:{scrollTop:g,scrollLeft:h}},a))}else{if(h!=null&&g!=null){f.deferDomScroll=true}if(g!=null){b.scrollTop=g}if(h!=null){b.scrollLeft=h}if(f.deferDomScroll){f.deferDomScroll=false;+b.scrollLeft;b.scrollLeft=h}}f.positionDirty=true}},onDomScroll:function(){var a=this;if(a.deferDomScroll){return}a.callParent()}}});(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(a,b,c){a.getTarget().setHtml(b.responseText,c.scripts===true,c.rendererScope);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(b){var c=this,a;c.mixins.observable.constructor.call(c,b);c.setTarget(c.target);if(c.autoLoad){a=c.autoLoad;if(a===true){a=null}c.load(a)}},setTarget:function(b){var a=this;b=Ext.get(b);if(a.target&&a.target!==b){a.abort()}a.target=b},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===true?null:a)},load:function(c){c=Ext.apply({},c);var e=this,a=Ext.isDefined(c.loadMask)?c.loadMask:e.loadMask,f=Ext.apply({},c.params),b=Ext.apply({},c.ajaxOptions),g=c.callback||e.callback,d=c.scope||e.scope||e;Ext.applyIf(b,e.ajaxOptions);Ext.applyIf(c,b);Ext.applyIf(f,e.params);Ext.apply(f,e.baseParams);Ext.applyIf(c,{url:e.url});Ext.apply(c,{scope:e,params:f,callback:e.onComplete});if(e.fireEvent("beforeload",e,c)===false){return}if(a){e.addMask(a)}e.active={options:c,mask:a,scope:d,callback:g,success:c.success||e.success,failure:c.failure||e.failure,renderer:c.renderer||e.renderer,scripts:Ext.isDefined(c.scripts)?c.scripts:e.scripts};e.active.request=Ext.Ajax.request(c);e.setOptions(e.active,c)},setOptions:function(b,a){b.rendererScope=a.rendererScope||this.rendererScope||this},onComplete:function(b,f,a){var d=this,e=d.active,g,c;if(e){c=e.scope;g=e.rendererScope;if(f){f=d.getRenderer(e.renderer).call(g,d,a,e)!==false}if(f){Ext.callback(e.success,c,[d,a,b]);d.fireEvent("load",d,a,b)}else{Ext.callback(e.failure,c,[d,a,b]);d.fireEvent("exception",d,a,b)}Ext.callback(e.callback,c,[d,f,a,b]);if(e.mask){d.removeMask()}}delete d.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(a,b){var c=this;c.stopAutoRefresh();c.autoRefresh=Ext.interval(function(){c.load(b)},a)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.callParent()}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(a,b,d){var f=true;try{a.getTarget().update(Ext.decode(b.responseText))}catch(c){f=false}return f},Component:function(a,c,g){var h=true,f=a.getTarget(),b=[];try{b=Ext.decode(c.responseText)}catch(d){h=false}if(h){f.suspendLayouts();if(g.removeAll){f.removeAll()}f.add(b);f.resumeLayouts(true)}return h}}},target:null,loadOnRender:false,loadMask:false,renderer:"html",setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!==b){a.abort()}a.target=b;if(b&&a.loadOnRender){if(b.rendered){a.doLoadOnRender()}else{a.mon(b,"render",a.doLoadOnRender,a)}}},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(false)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll;b.rendererScope=a.rendererScope||this.rendererScope||this.target},getRenderer:function(b){if(Ext.isFunction(b)){return b}var a=this.statics().Renderer;switch(b){case"component":return a.Component;case"data":return a.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.Img",Ext.Component,{autoEl:"img",baseCls:"x-img",config:{src:null},alt:"",title:"",imgCls:"",maskOnDisable:false,initComponent:function(){if(this.glyph){this.autoEl="div"}Ext.Component.prototype.initComponent.call(this)},applySrc:function(a){return a&&Ext.resolveResource(a)},getElConfig:function(){var e=this,g=e.autoEl,b=Ext.Component.prototype.getElConfig.call(this),f=Ext._glyphFontFamily,d=e.glyph,a,c;if(g==="img"||(Ext.isObject(g)&&g.tag==="img")){a=b}else{if(e.glyph){if(typeof d==="string"){c=d.split("@");d=c[0];f=c[1]||f}b.html="&#"+d+";";if(f){b.style=b.style||{};b.style.fontFamily=f}b.role="img"}else{b.cn=[a={tag:"img",id:e.id+"-img"}]}}if(a){if(e.imgCls){a.cls=(a.cls?a.cls+" ":"")+e.imgCls}a.src=e.src||Ext.BLANK_IMAGE_URL}if(e.alt){(a||b).alt=e.alt}else{(a||b).alt=""}if(e.title){(a||b).title=e.title}return b},onRender:function(){var b=this,c=b.autoEl,a;Ext.Component.prototype.onRender.apply(this,arguments);a=b.el;if(c==="img"||(Ext.isObject(c)&&c.tag==="img")){b.imgEl=a}else{b.imgEl=a.getById(b.id+"-img")}},onDestroy:function(){var a=this,b=a.imgEl;if(b&&a.el!==b){b.destroy()}this.imgEl=null;Ext.Component.prototype.onDestroy.call(this)},getTitle:function(){return this.title},setTitle:function(c){var a=this,b=a.imgEl;a.title=c||"";if(b){b.dom.title=c||""}},getAlt:function(){return this.alt},setAlt:function(c){var a=this,b=a.imgEl;a.alt=c||"";if(b){b.dom.alt=c||""}},updateSrc:function(b){var a=this.imgEl;if(a){a.dom.src=b||Ext.BLANK_IMAGE_URL}},setGlyph:function(e){var d=this,f=Ext._glyphFontFamily,a=d.glyph,b=d.el,c;d.glyph=e;if(d.rendered&&e!==a){if(typeof e==="string"){c=e.split("@");e=c[0];f=c[1]||f}b.dom.innerHTML="&#"+e+";";if(f){b.setStyle("font-family",f)}}}},0,["image","imagecomponent"],["component","box","image","imagecomponent"],{component:true,box:true,image:true,imagecomponent:true},["widget.image","widget.imagecomponent"],0,[Ext,"Img"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(d){var b=this,a,c;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!d.textEls){c=b.owner.textEl;if(c.isComposite){d.textEls=[];c=c.elements;for(a=c.length;a--;){d.textEls[a]=d.getEl(Ext.get(c[a]))}}else{d.textEls=[d.getEl("textEl")]}}},calculate:function(e){var c=this,a,d,b;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(b=e.getProp("width"))){b-=e.getBorderInfo().width;d=e.textEls;for(a=d.length;a--;){d[a].setWidth(b)}}else{c.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{baseCls:"x-progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var a=this,b=a.value||0;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!a.hasOwnProperty("textEl"),text:a.text||"&#160;",percentage:b*100})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else{a.textEl=a.el.select("."+a.baseCls+"-text")}},updateValue:function(a){this.updateProgress(a,Math.round(a*100)+"%")},updateProgress:function(e,f,a){e=e||0;var d=this,b=d.value,c=d.getTextTpl();d.value=e||(e=0);if(f!=null){d.updateText(f)}else{if(c){d.updateText(c.apply({value:e,percent:e*100}))}}if(d.rendered&&!d.destroyed){if(a===true||(a!==false&&d.animate)){d.bar.stopAnimation();d.bar.animate(Ext.apply({from:{width:(b*100)+"%"},to:{width:(e*100)+"%"}},d.animate))}else{d.bar.setStyle("width",(e*100)+"%")}}d.fireEvent("update",d,e,f);return d},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.setHtml(a.text)}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(c){var b=this,a;if(!b.waitTimer){a=b;c=c||{};b.updateText(c.text);b.waitTimer=Ext.TaskManager.start({run:function(d){var e=c.increment||10;d-=1;b.updateProgress(((((d+e)%e)+1)*(100/e))*0.01,null,c.animate)},interval:c.interval||1000,duration:c.duration,onStop:function(){if(c.fn){c.fn.apply(c.scope||b)}b.reset()},scope:a})}return b},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var b=this,a=b.bar;b.clearTimer();if(b.rendered){if(b.textEl.isComposite){b.textEl.clear()}Ext.destroyMembers(b,"textEl","progressBar");if(a&&b.animate){a.stopAnimation()}}Ext.Component.prototype.onDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],[[Ext.ProgressBase.prototype.mixinId||Ext.ProgressBase.$className,Ext.ProgressBase]],[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.button.Split",Ext.button.Button,{alternateClassName:"Ext.SplitButton",isSplitButton:true,arrowCls:"split",split:true,getTemplateArgs:function(){var b=this,a,c;c=Ext.button.Button.prototype.getTemplateArgs.call(this);if(b.disabled){c.tabIndex=null}a=b.ariaArrowElAttributes||{};a["aria-hidden"]=!!b.hidden;a["aria-disabled"]=!!b.disabled;if(b.arrowTooltip){a["aria-label"]=b.arrowTooltip}else{a["aria-labelledby"]=b.id}c.arrowElAttributes=a;return c},onRender:function(){var b=this,a;Ext.button.Button.prototype.onRender.call(this);a=b.getFocusEl();if(a){a.on({scope:b,focus:b.onMainElFocus,blur:b.onMainElBlur})}a=b.arrowEl;if(a){a.dom.setAttribute("data-componentid",b.id);a.setVisibilityMode(Ext.dom.Element.DISPLAY);a.on({scope:b,focus:b.onArrowElFocus,blur:b.onArrowElBlur})}},setArrowHandler:function(b,a){this.arrowHandler=b;this.scope=a},onClick:function(c){var b=this,a=c.type==="keydown"&&c.target===b.arrowEl.dom;b.doPreventDefault(c);if(!b.disabled){if(a||b.isWithinTrigger(c)){c.preventDefault();b.maybeShowMenu(c);b.fireEvent("arrowclick",b,c);if(b.arrowHandler){b.arrowHandler.call(b.scope||b,b,c)}}else{b.doToggle();b.fireHandler(c)}}},enable:function(b){var c=this,a=c.arrowEl;Ext.button.Button.prototype.enable.call(this,b);if(a){a.dom.setAttribute("tabIndex",c.tabIndex);a.dom.setAttribute("aria-disabled","false")}},disable:function(b){var c=this,a=c.arrowEl;Ext.button.Button.prototype.disable.call(this,b);if(a){a.dom.removeAttribute("tabIndex");a.dom.setAttribute("aria-disabled","true")}},afterHide:function(a,b){Ext.button.Button.prototype.afterHide.call(this,a,b);this.arrowEl.dom.setAttribute("aria-hidden","true")},afterShow:function(c,a,b){Ext.button.Button.prototype.afterShow.call(this,c,a,b);this.arrowEl.dom.setAttribute("aria-hidden","false")},privates:{isFocusing:function(d){var c=this,g=d.fromElement,f=d.toElement,b=c.focusEl&&c.focusEl.dom,a=c.arrowEl&&c.arrowEl.dom;if(c.focusable){if(f===b){return g===a?false:true}else{if(f===a){return g===b?false:true}}return true}return false},isBlurring:function(d){var c=this,g=d.fromElement,f=d.toElement,b=c.focusEl&&c.focusEl.dom,a=c.arrowEl&&c.arrowEl.dom;if(c.focusable){if(g===b){return f===a?false:true}else{if(g===a){return f===b?false:true}}return true}return false},getFocusClsEl:Ext.privateFn,onMainElFocus:function(a){this.el.addCls(this._focusCls)},onMainElBlur:function(a){this.el.removeCls(this._focusCls)},onArrowElFocus:function(a){this.el.addCls(this._arrowFocusCls)},onArrowElBlur:function(){this.el.removeCls(this._arrowFocusCls)},setTabIndex:function(a){Ext.button.Button.prototype.setTabIndex.call(this,a);if(this.arrowEl){this.arrowEl.set({tabIndex:a})}},_addSplitCls:function(){var a=this.arrowEl;Ext.button.Button.prototype._addSplitCls.call(this);a.dom.setAttribute("tabIndex",this.tabIndex);a.setVisible(true)},_removeSplitCls:function(){var a=this.arrowEl;Ext.button.Button.prototype._removeSplitCls.call(this);a.dom.removeAttribute("tabIndex");a.setVisible(false)}}},0,["splitbutton"],["component","box","button","splitbutton"],{component:true,box:true,button:true,splitbutton:true},["widget.splitbutton"],0,[Ext.button,"Split",Ext,"SplitButton"],0));(Ext.cmd.derive("Ext.plugin.Responsive",Ext.mixin.Responsive,{pluginId:"responsive",isPlugin:true,constructor:function(a){var d=this,b=a.cmp,e=Ext.apply({responsiveConfig:b.responsiveConfig,responsiveFormulas:b.responsiveFormulas},a);delete e.cmp;d.cmp=b;d.initConfig(e);if(d.transformed){b.setConfig(d.transformed);d.transformed=null}},init:Ext.emptyFn,privates:{transformInstanceConfig:function(c){var b=Ext.mixin.Responsive.prototype.transformInstanceConfig.call(this,c);if(b.ptype){b=Ext.apply({},b);delete b.ptype}this.transformed=b;var a=Ext.apply({},c);delete a.ptype;delete a.responsiveConfig;delete a.responsiveFormulas;return a},updateResponsiveState:function(){var a=this.getResponsiveState();this.cmp.setConfig(a)}}},1,0,0,0,["plugin.responsive"],0,[Ext.plugin,"Responsive"],0));(Ext.cmd.derive("Ext.plugin.Viewport",Ext.plugin.Responsive,{setCmp:function(a){this.cmp=a;if(a&&!a.isViewport){this.decorate(a);if(a.renderConfigs){a.flushRenderConfigs()}a.setupViewport()}},statics:{decorate:function(a){Ext.applyIf(a.prototype||a,{ariaRole:"application",viewportCls:"x-viewport"});Ext.override(a,{isViewport:true,preserveElOnDestroy:true,initComponent:function(){this.callParent();this.setupViewport()},getSizeModel:function(){var b=Ext.layout.SizeModel.configured;return b.pairsByHeightOrdinal[b.ordinal]},handleViewportResize:function(){var e=this,c=Ext.dom.Element,d=c.getViewportWidth(),b=c.getViewportHeight();if(d!==e.width||b!==e.height){e.setSize(d,b)}},setupViewport:function(){var d=this,c=document.body,b=Ext.scroll.DomScroller;if(b.document){b.document=b.document.destroy()}if(!c.id){c.id=d.id}c.setAttribute("data-componentid",d.id);if(!d.ariaStaticRoles[d.ariaRole]){c.setAttribute("role",d.ariaRole)}c=d.el=Ext.getBody();Ext.fly(document.documentElement).addCls(d.viewportCls);c.setHeight=c.setWidth=Ext.emptyFn;c.dom.scroll="no";d.allowDomMove=false;d.renderTo=c;if(Ext.supports.Touch){d.addMeta("apple-mobile-web-app-capable","yes")}Ext.getScrollbarSize();d.width=d.height=undefined;d.initialViewportHeight=Ext.Element.getViewportHeight();d.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(b){if(Ext.supports.Touch){document.body.scrollTop=0}this.callParent([b])},onRender:function(){var b=this;b.callParent(arguments);b.width=b.initialViewportWidth;b.height=b.initialViewportHeight;b.initialViewportWidth=b.initialViewportHeight=null;if(Ext.supports.TouchEvents){b.mon(Ext.getDoc(),{touchmove:function(c){c.preventDefault()},translate:false,delegated:false})}},initInheritedState:function(d,c){var e=this,b=Ext.rootInheritedState;if(d!==b){e.initInheritedState(e.inheritedState=b,e.inheritedStateInner=Ext.Object.chain(b))}else{e.callParent([d,c])}},beforeDestroy:function(){var d=this,b=Ext.rootInheritedState,c;for(c in b){if(c!=="rtl"){delete b[c]}}d.removeUIFromElement();d.el.removeCls(d.baseCls);Ext.fly(document.body.parentNode).removeCls(d.viewportCls);d.callParent()},addMeta:function(b,c){var d=document.createElement("meta");d.setAttribute("name",b);d.setAttribute("content",c);Ext.getHead().appendChild(d)},privates:{applyTargetCls:function(b){this.el.addCls(b)},disableTabbing:function(){var b=this.el;if(b){b.saveTabbableState({skipSelf:true})}},enableTabbing:function(){var b=this.el;if(b){b.restoreTabbableState(true)}}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize();Ext.plugin.Responsive.prototype.updateResponsiveState.call(this)}}},0,0,0,0,["plugin.viewport"],0,[Ext.plugin,"Viewport"],function(a){a.prototype.decorate=a.decorate}));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(f){var e=this,d=0,h,a,g,b,c;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);g=f.childItems;c=g.length;for(b=0;b<c;++b){a=g[b];h=a.target.anchorSpec;if(h){if(a.widthModel.calculated&&h.right){d|=1}if(a.heightModel.calculated&&h.bottom){d|=2}if(d===3){break}}}f.anchorDimensions=d},calculateItems:function(g,a){var p=this,k=g.childItems,f=k.length,n=a.gotHeight,h=a.gotWidth,e=a.height,c=a.width,b=(h?1:0)|(n?2:0),o=g.anchorDimensions,l,r,m,q,j,d;if(!o){return true}for(j=0;j<f;j++){r=k[j];m=r.getMarginInfo();l=r.target.anchorSpec;if(h&&r.widthModel.calculated){d=l.right(c)-m.width;d=p.adjustWidthAnchor(d,r);r.setWidth(d)}if(n&&r.heightModel.calculated){q=l.bottom(e)-m.height;q=p.adjustHeightAnchor(q,r);r.setHeight(q)}}return(b&o)===o},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(c,f,b){if(c&&c!=="none"){var d=this.anchorFactory,e;if(this.parseAnchorRE.test(c)){return d.standard(b-f)}if(c.indexOf("%")!==-1){return d.ratio(parseFloat(c.replace("%",""))*0.01)}e=parseInt(c,10);if(!isNaN(e)){return d.offset(e)}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(f){var e=this,a=e.owner,d=f.anchor,b,c,g;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!f.anchor&&f.items&&!Ext.isNumber(f.width)){f.anchor=d=e.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize==="number"){c=a.anchorSize}else{c=a.anchorSize.width;g=a.anchorSize.height}}else{c=a.initialConfig.width;g=a.initialConfig.height}if(d){b=d.split(" ");f.anchorSpec={right:e.parseAnchor(b[0],f.initialConfig.width,c),bottom:e.parseAnchor(b[1],f.initialConfig.height,g)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(c){var e=c.anchorSpec,a="$",d=this.sizePolicy,b;if(e){b=this.owner.getSizeModel();if(e.right&&!b.width.shrinkWrap){d=d.r}if(e.bottom&&!b.height.shrinkWrap){a="b"}}return d[a]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(a){var b=this;Ext.apply(b,a);b.dragRegion=new Ext.util.Region(0,0,0,0);if(b.el){b.initEl(b.el)}b.mixins.observable.constructor.call(b);if(b.disabled){b.disable()}},initEl:function(b){var c=this,a=c.delegate;c.el=b=Ext.get(b);if(a&&a.isElement){c.handle=a}c.delegate=c.handle?undefined:c.delegate;if(!c.handle){c.handle=b}c.handleListeners={scope:c,delegate:c.delegate,mousedown:c.onMouseDown,dragstart:c.onDragStart};if(!Ext.supports.TouchEvents&&(c.trackOver||c.overCls)){Ext.apply(c.handleListeners,{mouseover:c.onMouseOver,mouseout:c.onMouseOut})}c.mon(c.handle,c.handleListeners);c.keyNav=new Ext.util.KeyNav({target:b,up:c.onResizeKeyDown,left:c.onResizeKeyDown,right:c.onResizeKeyDown,down:c.onResizeKeyDown,scope:c})},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var a=this;a.endDrag({});a.el=a.handle=a.onBeforeStart=a.onStart=a.onDrag=a.onEnd=null;a.callParent()},onMouseOver:function(j,h){var f=this,g,d,c,a,b;if(!f.disabled){if(j.within(j.target,true,true)||f.delegate){g=f.handleCls;f.mouseIsOut=false;if(g){for(c=0,a=f.handleEls.length;c<a;c++){d=f.handleEls[c];b=d.delegateCls;if(!b){b=d.delegateCls=[g,"-",d.region,"-over"].join("")}d.addCls([b,f.overCls])}}f.fireEvent("mouseover",f,j,f.delegate?j.getTarget(f.delegate,h):f.handle)}}},onMouseOut:function(f){var d=this,c,b,a;if(d.mouseIsDown){d.mouseIsOut=true}else{if(d.handleCls){for(b=0,a=d.handleEls.length;b<a;b++){c=d.handleEls[b];c.removeCls([c.delegateCls,d.overCls])}}d.fireEvent("mouseout",d,f)}},onMouseDown:function(c,b){var a=this;if(a.disabled||c.dragTracked){return}a.dragTarget=a.delegate?b:a.handle.dom;a.startXY=a.lastXY=c.getXY();a.startRegion=Ext.fly(a.dragTarget).getRegion();if(a.fireEvent("mousedown",a,c)===false||a.fireEvent("beforedragstart",a,c)===false||a.onBeforeStart(c)===false){return}a.mouseIsDown=true;c.dragTracked=true;a.el.setCapture();c.stopPropagation();if(a.preventDefault!==false){c.preventDefault()}Ext.getDoc().on({scope:a,capture:true,mouseup:a.onMouseUp,mousemove:a.onMouseMove,selectstart:a.stopSelect});a.dragEnded=false;if(!a.tolerance){a.triggerStart()}else{if(a.autoStart){a.timer=Ext.defer(a.triggerStart,a.autoStart===true?1000:a.autoStart,a,[c])}}},onMouseMove:function(f,d){var b=this,c=f.getXY(),a=b.startXY;f.stopPropagation();if(b.preventDefault!==false){f.preventDefault()}if(b.dragEnded){return}b.lastXY=c;if(!b.active){if(Math.max(Math.abs(a[0]-c[0]),Math.abs(a[1]-c[1]))>b.tolerance){b.triggerStart(f)}else{return}}if(b.fireEvent("mousemove",b,f)===false){b.onMouseUp(f)}else{b.onDrag(f);b.fireEvent("drag",b,f)}},onMouseUp:function(b){var a=this;a.mouseIsDown=false;if(a.mouseIsOut){a.mouseIsOut=false;a.onMouseOut(b)}if(a.preventDefault!==false){b.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}a.fireEvent("mouseup",a,b);a.endDrag(b)},endDrag:function(c){var b=this,a=b.active;Ext.getDoc().un({mousemove:b.onMouseMove,mouseup:b.onMouseUp,selectstart:b.stopSelect,capture:true,scope:b});b.clearStart();b.active=false;if(a){b.dragEnded=true;b.onEnd(c);b.fireEvent("dragend",b,c)}b._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart();a.active=true;a.onStart(b);a.fireEvent("dragstart",a,b)},clearStart:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region){return a.constrainTo}if(!a._constrainRegion){a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion()}}else{if(!a._constrainRegion){a._constrainRegion=a.getDragCt().getViewRegion()}}return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[b[0]-a[0],b[1]-a[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(b,d){var c=b.dragRegion,a=b.getConstrainRegion();if(!a){return d}c.x=c.left=c[0]=c.right=d[0];c.y=c.top=c[1]=c.bottom=d[1];c.constrainTo(a);return[c.left,c.top]},dragTarget:function(c,f){var b=c.startXY,e=c.startRegion.copy(),a=c.getConstrainRegion(),d;if(!a){return f}e.translateBy(f[0]-b[0],f[1]-b[1]);if(e.right>a.right){f[0]+=d=(a.right-e.right);e.left+=d}if(e.left<a.left){f[0]+=(a.left-e.left)}if(e.bottom>a.bottom){f[1]+=d=(a.bottom-e.bottom);e.top+=d}if(e.top<a.top){f[1]+=(a.top-e.top)}return f}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.show()},getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling(":not([hidden])")},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling(":not([hidden])")},onBeforeStart:function(h){var d=this,f=d.getPrevCmp(),a=d.getNextCmp(),c=d.getSplitter().collapseEl,g=h.getTarget(),b;if(!f||!a){return false}if(c&&g===c.dom){return false}if(a.collapsed||f.collapsed){return false}d.prevBox=f.getEl().getBox();d.nextBox=a.getEl().getBox();d.constrainTo=b=d.calculateConstrainRegion();if(!b){return false}return b},onStart:function(b){var a=this.getSplitter();this.createDragOverlay();a.addCls(a.baseCls+"-active")},onResizeKeyDown:function(f){var b=this,d=b.getSplitter(),a=f.getKey(),c=d.orientation==="vertical"?0:1,h=a===f.UP||a===f.LEFT?-1:1,g;if(!b.active&&b.onBeforeStart(f)){Ext.fly(f.target).on("keyup",b.onResizeKeyUp,b);b.triggerStart(f);b.onMouseDown(f);b.startXY=d.getXY();b.lastKeyDownXY=Ext.Array.slice(b.startXY);g=b.easing=new Ext.fx.easing.Linear();g.setStartTime(Ext.Date.now());g.setStartValue(1);g.setEndValue(4);g.setDuration(2000)}if(b.active){b.lastKeyDownXY[c]=Math.round(b.lastKeyDownXY[c]+(h*b.easing.getValue()));b.lastXY=b.lastKeyDownXY;d.setXY(b.getXY("dragTarget"))}},onResizeKeyUp:function(a){this.onMouseUp(a)},calculateConstrainRegion:function(){var g=this,a=g.getSplitter(),h=a.getWidth(),i=a.defaultSplitMin,b=a.orientation,e=g.prevBox,j=g.getPrevCmp(),c=g.nextBox,f=g.getNextCmp(),l,k,d;if(b==="vertical"){d={prevCmp:j,nextCmp:f,prevBox:e,nextBox:c,defaultMin:i,splitWidth:h};l=new Ext.util.Region(e.y,g.getVertPrevConstrainRight(d),e.bottom,g.getVertPrevConstrainLeft(d));k=new Ext.util.Region(c.y,g.getVertNextConstrainRight(d),c.bottom,g.getVertNextConstrainLeft(d))}else{l=new Ext.util.Region(e.y+(j.minHeight||i),e.right,(j.maxHeight?e.y+j.maxHeight:c.bottom-(f.minHeight||i))+h,e.x);k=new Ext.util.Region((f.maxHeight?c.bottom-f.maxHeight:e.y+(j.minHeight||i))-h,c.right,c.bottom-(f.minHeight||i),c.x)}return l.intersect(k)},performResize:function(m,g){var o=this,a=o.getSplitter(),h=a.orientation,p=o.getPrevCmp(),n=o.getNextCmp(),b=a.ownerCt,k=b.query(">[flex]"),l=k.length,c=h==="vertical",j=0,f=c?"width":"height",d=0,q,r;for(;j<l;j++){q=k[j];r=c?q.getWidth():q.getHeight();d+=r;q.flex=r}g=c?g[0]:g[1];if(p){r=o.prevBox[f]+g;if(p.flex){p.flex=r}else{p[f]=r}}if(n){r=o.nextBox[f]-g;if(n.flex){n.flex=r}else{n[f]=r}}b.updateLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.destroy();delete a.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+"-active");a.performResize(c,a.getResizeOffset())},onDrag:function(f){var c=this,g=c.getOffset("dragTarget"),d=c.getSplitter(),b=d.getEl(),a=d.orientation;if(a==="vertical"){b.setX(c.startRegion.left+g[0])}else{b.setY(c.startRegion.top+g[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return(a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return(a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.initTarget(c,a,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.dd.ScrollManager",Ext.Base,{singleton:true,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=this.doScroll.bind(this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(a){var b=Ext.dd.ScrollManager;b.dragEl=null;b.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){var f=this;if(f.ddmInstance.dragCurrent){var a=f.proc,e=a.el,c=a.component,g=a.el.ddScrollConfig,h=g&&g.increment?g.increment:f.increment,b=g&&"animate" in g?g.animate:f.animate,d=function(){f.triggerRefresh()};if(b){if(b===true){b={callback:d}}else{b.callback=b.callback?Ext.Function.createSequence(b.callback,d):d}}if(c){h=h*f.dirTrans[a.dir];if(a.dir==="up"||a.dir==="down"){c.scrollBy(0,h,b)}else{c.scrollBy(h,0,b)}}else{e.scroll(a.dir,h,b)}if(!b){d()}}},clearProc:function(){var a=this.proc;if(a.id){clearInterval(a.id)}a.id=0;a.el=null;a.dir=""},startProc:function(c,b){var d=this,a=d.proc,f,e;d.clearProc();a.el=c;a.dir=b;f=c.ddScrollConfig?c.ddScrollConfig.ddGroup:undefined;e=(c.ddScrollConfig&&c.ddScrollConfig.frequency)?c.ddScrollConfig.frequency:d.frequency;if(f===undefined||d.ddmInstance.dragCurrent.ddGroup===f){a.id=Ext.interval(d.doScroll,e)}},onFire:function(g,j){var i=this,k,h,d,a,b,f,c;if(j||!i.ddmInstance.dragCurrent){return}if(!i.dragEl||i.dragEl!==i.ddmInstance.dragCurrent){i.dragEl=i.ddmInstance.dragCurrent;i.refreshCache()}k=g.getPoint();h=i.proc;d=i.els;for(a in d){b=d[a];f=b._region;c=b.ddScrollConfig||i;if(f&&f.contains(k)&&b.isScrollable()){if(f.bottom-k.y<=c.vthresh){if(h.el!==b){i.startProc(b,"down")}return}else{if(f.right-k.x<=c.hthresh){if(h.el!==b){i.startProc(b,"right")}return}else{if(k.y-f.top<=c.vthresh){if(h.el!==b){i.startProc(b,"up")}return}else{if(k.x-f.left<=c.hthresh){if(h.el!==b){i.startProc(b,"left")}return}}}}}}i.clearProc()},register:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.register(c[b])}}else{c=Ext.get(c);this.els[c.id]=c}},unregister:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.unregister(c[b])}}else{c=Ext.get(c);delete this.els[c.id]}},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]==="object"){a[b]._region=a[b].getRegion()}}}},1,0,0,0,0,0,[Ext.dd,"ScrollManager"],0));(Ext.cmd.derive("Ext.dd.DropTarget",Ext.dd.DDTarget,{constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DDTarget.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},containerScroll:false,dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}return false},destroy:function(){Ext.dd.DDTarget.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}},1,0,0,0,0,0,[Ext.dd,"DropTarget"],0));(Ext.cmd.derive("Ext.dd.DragZone",Ext.dd.DragSource,{constructor:function(c,b){var d=this,a=d.containerScroll;Ext.dd.DragSource.prototype.constructor.call(this,c,b);if(a){c=d.scrollEl||c;c=Ext.get(c);if(Ext.isObject(a)){c.ddScrollConfig=a}Ext.dd.ScrollManager.register(c)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},getRepairXY:function(a){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragSource.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}},1,0,0,0,0,0,[Ext.dd,"DragZone"],0));(Ext.cmd.derive("Ext.dd.Registry",Ext.Base,{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(b,a){if(typeof b==="string"){return b}var c=b.id;if(!c&&a!==false){c="extdd-"+(++this.autoIdSeed);b.id=c}return c},register:function(d,e){e=e||{};if(typeof d==="string"){d=document.getElementById(d)}e.ddel=d;this.elements[this.getId(d)]=e;if(e.isHandle!==false){this.handles[e.ddel.id]=e}if(e.handles){var c=e.handles,b,a;for(b=0,a=c.length;b<a;b++){this.handles[this.getId(c[b])]=e}}},unregister:function(d){var f=this.getId(d,false),e=this.elements[f],c,b,a;if(e){delete this.elements[f];if(e.handles){c=e.handles;for(b=0,a=c.length;b<a;b++){delete this.handles[this.getId(c[b],false)]}}}},getHandle:function(a){if(typeof a!=="string"){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!=="string"){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}},1,0,0,0,0,0,[Ext.dd,"Registry"],0));(Ext.cmd.derive("Ext.dd.DropZone",Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,a,c,b){},onNodeOver:function(d,a,c,b){return this.dropAllowed},onNodeOut:function(d,a,c,b){},onNodeDrop:function(d,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,d,c){var b=this,f=b.getTargetFromEvent(d);if(!f){if(b.lastOverNode){b.onNodeOut(b.lastOverNode,a,d,c);b.lastOverNode=null}return b.onContainerOver(a,d,c)}if(b.lastOverNode!==f){if(b.lastOverNode){b.onNodeOut(b.lastOverNode,a,d,c)}b.onNodeEnter(f,a,d,c);b.lastOverNode=f}return b.onNodeOver(f,a,d,c)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(b,f,d){var c=this,g=c.getTargetFromEvent(f),a=g?c.onNodeDrop(g,b,f,d):c.onContainerDrop(b,f,d);if(c.lastOverNode){c.onNodeOut(c.lastOverNode,b,f,d);c.lastOverNode=null}return a},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}},0,0,0,0,0,0,[Ext.dd,"DropZone"],0));(Ext.cmd.derive("Ext.event.publisher.MouseEnterLeave",Ext.event.publisher.Dom,{type:"mouseEnterLeave"},0,0,0,0,0,0,[Ext.event.publisher,"MouseEnterLeave"],function(a){var b={mouseover:"mouseenter",mouseout:"mouseleave"};if(!Ext.supports.MouseEnterLeave){a.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],doDelegatedEvent:function(i){var h,c,j,f,d,g;i=this.callParent([i]);h=i.getTarget();c=i.getRelatedTarget();if(c&&Ext.fly(h).contains(c)){return}j=h.id;if(j){f=Ext.cache[j];if(f){d=b[i.type];i=i.chain({type:d});if(f.hasListeners[d]){g=f.events[d];if(g){g=g.directs;if(g){i.setCurrentTarget(f.dom);g.fire(i,i.target)}}}}}}})}a.instance=new a()}));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(a){var c=this.form,b=c&&!c.destroying&&!c.destroyed;this.response=a;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(b){c.afterAction(this,false)}},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var a=this;return{success:a.onSuccess,failure:a.onFailure,scope:a,timeout:(a.timeout||a.form.timeout)*1000}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(b){var a=this.processResponse(b),d=this.form,c=d&&!d.destroying&&!d.destroyed;if(a===true||!a.success||!a.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(c){d.afterAction(this,false)}return}if(c){d.clearInvalid();d.setValues(a.data);d.afterAction(this,true)}},handleResponse:function(c){var a=this.form.reader,b,d;if(a){b=a.read(c);d=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:d}}return Ext.decode(c.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var b=this,a=b.form;if(b.clientValidation===false||a.isValid()){b.doSubmit()}else{b.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(b,false)}},doSubmit:function(){var d=this,b=Ext.apply(d.createCallback(),{url:d.getUrl(),method:d.getMethod(),headers:d.headers}),c=d.form,e=d.jsonSubmit||c.jsonSubmit,a=e?"jsonData":"params",f;if(c.hasUpload()){f=d.buildForm();b.form=f.formEl;b.isUpload=true}else{b[a]=d.getParams(e)}Ext.Ajax.request(b);if(f){d.cleanup(f)}},cleanup:function(g){var e=g.formEl,d=g.uploadEls,b=g.uploadFields,a=b.length,c,f;for(c=0;c<a;++c){f=b[c];if(!f.clearOnSubmit){f.restoreInput(d[c])}}if(e){Ext.removeNode(e)}},getParams:function(d){var c=false,b=Ext.form.action.Action.prototype.getParams.call(this),a=this.form.getValues(c,c,this.submitEmptyText!==c,d,true);return Ext.apply({},a,b)},buildForm:function(){var j=this,m=[],k,r,g=j.form,d=j.getParams(),c=[],a=[],f=g.getFields().items,e,h=f.length,l,q,o,p,n,b;for(e=0;e<h;++e){l=f[e];if(l.isFileUpload()){c.push(l)}}for(q in d){if(d.hasOwnProperty(q)){o=d[q];if(Ext.isArray(o)){n=o.length;for(p=0;p<n;p++){m.push(j.getFieldConfig(q,o[p]))}}else{m.push(j.getFieldConfig(q,o))}}}k={tag:"form",role:"presentation",action:j.getUrl(),method:j.getMethod(),target:j.target?(Ext.isString(j.target)?j.target:Ext.fly(j.target).dom.name):"_self",style:"display:none",cn:m};if(c.length){k.encoding=k.enctype="multipart/form-data"}r=Ext.DomHelper.append(Ext.getBody(),k);h=c.length;for(e=0;e<h;++e){b=c[e].extractFileInput();r.appendChild(b);a.push(b)}return{formEl:r,uploadFields:c,uploadEls:a}},getFieldConfig:function(a,b){return{tag:"input",type:"hidden",name:a,value:Ext.String.htmlEncode(b)}},onSuccess:function(b){var d=this.form,c=d&&!d.destroying&&!d.destroyed,e=true,a=this.processResponse(b);if(a!==true&&!a.success){if(a.errors&&c){d.markInvalid(a.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;e=false}if(c){d.afterAction(this,e)}},handleResponse:function(d){var a=this.form,c=a.errorReader,f,k,g,h,b,l;if(c){f=c.read(d);b=f.records;k=[];if(b){for(g=0,h=b.length;g<h;g++){k[g]=b[g].data}}if(k.length<1){k=null}l={success:f.success,errors:k}}else{try{l=Ext.decode(d.responseText)}catch(j){l={success:false,errors:[]}}}return l}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(a,b){this.comp=a;this.initialConstrainTo=b.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,b)},onStart:function(c){var b=this,a=b.comp;b.startPosition=a.getXY();if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}if(a.beginDrag){a.beginDrag()}if(a.el.shim){a.el.maskIframes()}},calculateConstrainRegion:function(){var h=this,f=h.comp,g=h.initialConstrainTo,e=f.constraintInsets,j,b,d,c=h.proxy?h.proxy.el:f.el,i=c.shadow,a=(i&&!h.constrainDelegate&&f.constrainShadow&&!i.disabled)?i.getShadowSize():0;if(!(g instanceof Ext.util.Region)){j=Ext.fly(g);g=j.getConstrainRegion()}else{g=g.copy()}if(e){e=Ext.isObject(e)?e:Ext.Element.parseBox(e);g.adjust(e.top,e.right,e.bottom,e.left)}if(a){g.adjust(a[0],-a[1],-a[2],a[3])}if(!h.constrainDelegate){b=Ext.fly(h.dragTarget).getRegion();d=c.getRegion();g.adjust(b.top-d.top,b.right-d.right,b.bottom-d.bottom,b.left-d.left)}return g},onDrag:function(c){var b=this,a=(b.proxy&&!b.comp.liveDrag)?b.proxy:b.comp,d=b.getOffset(b.constrain||b.constrainDelegate?"dragTarget":null);a.setPagePosition(b.startPosition[0]+d[0],b.startPosition[1]+d[1])},onEnd:function(b){var a=this.comp;if(a.destroyed||a.destroying){return}if(this.proxy&&!a.liveDrag){a.unghost()}if(a.endDrag){a.endDrag()}if(a.el.shim){a.el.unmaskIframes()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.util.FocusTrap",Ext.Mixin,{mixinConfig:{id:"focustrap",after:{afterRender:"initTabGuards",addTool:"initTabGuards",add:"initTabGuards",remove:"initTabGuards",addDocked:"initTabGuards",removeDocked:"initTabGuards",onShow:"initTabGuards",afterHide:"initTabGuards"}},config:{tabGuard:true,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" role="button" data-tabguardposition="{tabGuard}" aria-busy="true" style="height:0"class="x-hidden-clip"></div>',tabGuardIndex:0},tabGuardPositionAttribute:"data-tabguardposition",privates:{initTabGuards:function(){var e=this,c=e.tabGuardPositionAttribute,d=e.tabGuardBeforeEl,f=e.tabGuardAfterEl,a=e.tabGuardIndex,b;if(!e.rendered||!e.tabGuard){return}b=e.el.findTabbableElements({skipSelf:true});if(b[0]&&b[0].hasAttribute(c)){b.shift()}if(b.length&&b[b.length-1].hasAttribute(c)){b.pop()}if(b.length){d.dom.setAttribute("tabIndex",a);d.on("focusenter",e.onTabGuardFocusEnter,e);f.dom.setAttribute("tabIndex",a);f.on("focusenter",e.onTabGuardFocusEnter,e)}else{d.dom.removeAttribute("tabIndex");d.un("focusenter",e.onTabGuardFocusEnter,e);f.dom.removeAttribute("tabIndex");f.un("focusenter",e.onTabGuardFocusEnter,e)}},onTabGuardFocusEnter:function(f,g){var h=this,b=h.el,i=h.tabGuardPositionAttribute,d=g.getAttribute(i),j=f.relatedTarget,a,c,k;if(!j.hasAttribute(i)&&j!==b.dom&&b.contains(j)){c=d==="before"?false:true}else{c=d==="before"?true:false}a=b.findTabbableElements({skipSelf:true});a.shift();a.pop();k=c?a[0]:a[a.length-1];if(k){k.focus()}}}},0,0,0,0,0,0,[Ext.util,"FocusTrap"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:"x-window-item",overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var a=this;a.frame=false;Ext.panel.Panel.prototype.initComponent.call(this);if(a.plain){a.addClsWithUI("plain")}a.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var b=this,a;a=Ext.panel.Panel.prototype.getElConfig.call(this);a.tabIndex=-1;return a},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var b=this,d=Ext.panel.Panel.prototype.getState.call(this)||{},a=!!b.maximized,c=b.ghostBox,e;d.maximized=a;if(a){e=b.restorePos}else{if(c){e=[c.x,c.y]}else{e=b.getPosition()}}Ext.apply(d,{size:a?b.restoreSize:b.getSize(),pos:e});return d},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onRender:function(b,a){var c=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);if(c.header){c.header.on({scope:c,click:c.onHeaderClick})}if(c.maximizable){c.header.on({scope:c,dblclick:c.toggleMaximize})}},afterRender:function(){var a=this,c=a.header,b;if(a.maximized){a.maximized=false;a.maximize();if(c){c.removeCls(c.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);if(a.closable){b=a.getKeyMap();b.on(27,a.onEsc,a)}else{b=a.keyMap}if(b&&a.hidden){b.disable()}},onEsc:function(a,b){b.stopEvent();this.close()},beforeDestroy:function(){var a=this;if(a.rendered){Ext.un("resize",a.onWindowResize,a);delete a.animateTarget;a.hide();Ext.destroy(a.keyMap)}Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var a=this,b=[];Ext.panel.Panel.prototype.addTools.call(this);if(a.minimizable){b.push({type:"minimize",handler:"minimize",scope:a})}if(a.maximizable){b.push({type:a.maximized?"restore":"maximize",handler:"toggleMaximize",scope:a})}if(b.length){a.addTool(b)}},onShow:function(){var a=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(a.expandOnShow){a.expand(false)}a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction==="destroy"){a.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var b=this,a;if(!b.destroyed){if(b.maximized){b.fitContainer()}else{a=b.getSizeModel();if(a.width.natural||a.height.natural){b.updateLayout()}b.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,c=a.header,b=a.tools;if(c&&a.maximizable){c.suspendLayouts();b.maximize.hide();this.resumeHeaderLayout(true)}if(a.resizer){a.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var a=this,d=a.header,b=a.tools,c;if(d){d.suspendLayouts();if(a.maximizable){b.maximize.show();c=true}this.resumeHeaderLayout(c)}if(a.resizer){a.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(b){var e=this,h=e.header,f=e.tools,d=e.width,a=e.height,c,g;if(!e.maximized){e.expand(false);if(!e.hasSavedRestore){c=e.restoreSize={width:d?d:null,height:a?a:null};e.restorePos=e.getPosition()}if(h){h.suspendLayouts();if(f.maximize){f.maximize.setType("restore")}if(e.collapseTool){e.collapseTool.hide();g=true}e.resumeHeaderLayout(g)}e.el.disableShadow();if(e.dd){e.dd.disable();if(h){h.removeCls(h.indicateDragCls)}}if(e.resizer){e.resizer.disable()}e.el.addCls("x-window-maximized");e.container.addCls("x-window-maximized-ct");e.syncMonitorWindowResize();e.fitContainer(b=(b||!!e.animateTarget)?{callback:function(){e.maximized=true;e.fireEvent("maximize",e)}}:null);if(!b){e.maximized=true;e.fireEvent("maximize",e)}}return e},restore:function(b){var c=this,d=c.tools,f=c.header,a=c.restoreSize,e;if(c.maximized){c.hasSavedRestore=null;c.removeCls("x-window-maximized");if(f){f.suspendLayouts();if(d.maximize){d.maximize.setType("maximize")}if(c.collapseTool){c.collapseTool.show();e=true}c.resumeHeaderLayout(e)}a.x=c.restorePos[0];a.y=c.restorePos[1];c.setBox(a,b=(b||!!c.animateTarget)?{callback:function(){c.el.enableShadow(null,true);c.maximized=false;c.fireEvent("restore",c)}}:null);c.restorePos=c.restoreSize=null;if(c.dd){c.dd.enable();if(f){f.addCls(f.indicateDragCls)}}if(c.resizer){c.resizer.enable()}c.container.removeCls("x-window-maximized-ct");c.syncMonitorWindowResize();if(!b){c.el.enableShadow(null,true);c.maximized=false;c.fireEvent("restore",c)}}return c},syncMonitorWindowResize:function(){var b=this,c=b._monitoringResize,d=b.monitorResize||b.constrain||b.constrainHeader||b.maximized,a=b.hidden||b.destroying||b.destroyed;if(d&&!a){if(!c){Ext.on("resize",b.onWindowResize,b,{buffer:1});b._monitoringResize=true}}else{if(c){Ext.un("resize",b.onWindowResize,b);b._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var a=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);a.xtype="window";a.focusOnToFront=false;return a},getDefaultFocus:function(){var c=this,b,d=c.defaultFocus,a;if(d!==undefined){if(Ext.isNumber(d)){b=c.query("button")[d]}else{if(Ext.isString(d)){a=d;if(Ext.validIdRe.test(a)){b=c.down(Ext.makeIdSelector(a))}if(!b){b=c.down(a)}}else{if(d.focus){b=d}}}}return b},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(c,b){var a;if(c.el.contains(b.getTarget())){a=this.getDefaultFocus();if(a){a.focus()}}},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments);if(this.maximized){this.resizer.disable()}}}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],[[Ext.util.FocusTrap.prototype.mixinId||Ext.util.FocusTrap.$className,Ext.util.FocusTrap]],[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",ariaAttributes:{"aria-multiline":true},getSubTplData:function(b){var d=this,c=d.getFieldStyle(),a=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(d.grow){if(d.preventScrollbars){a.fieldStyle=(c||"")+";overflow:hidden;height:"+d.growMin+"px"}}return a},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on("paste",a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(a){a=this.stripReturns(a);return Ext.form.field.Text.prototype.valueToRaw.call(this,a)},stripReturns:function(a){if(a&&typeof a==="string"){a=a.replace(this.returnRe,"")}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var b=this,c=b.getValue(),a=b.maxLength;if(c.length>a){c=c.substr(0,a);b.setValue(c)}},fireKey:function(d){var b=this,a=d.getKey(),c;if(d.isSpecialKey()&&(b.enterIsSpecial||(a!==d.ENTER||d.hasModifier()))){b.fireEvent("specialkey",b,d)}if(b.needsMaxCheck&&a!==d.BACKSPACE&&a!==d.DELETE&&!d.isNavKeyPress()&&!b.isCutCopyPasteSelectAll(d,a)){c=b.getValue();if(c.length>=b.maxLength){d.stopEvent()}}},isCutCopyPasteSelectAll:function(b,a){if(b.ctrlKey){return a===b.A||a===b.C||a===b.V||a===b.X}return false},autoSize:function(){var c=this,e,a,b,d;if(c.grow&&c.rendered&&c.getSizeModel().height.auto){e=c.inputEl;b=e.getWidth(true);d=Ext.util.Format.htmlEncode(e.dom.value)||"&#160;";d+=c.growAppend;d=d.replace(/\n/g,"<br/>");a=Ext.util.TextMetrics.measure(e,d,b).height+e.getPadding("tb")+c.inputWrap.getBorderWidth("tb")+c.triggerWrap.getBorderWidth("tb");a=Math.min(Math.max(a,c.growMin),c.growMax);c.bodyEl.setHeight(a);c.updateLayout();c.fireEvent("autosize",c,a)}},beforeDestroy:function(){var a=this.pasteTask;if(a){a.cancel();this.pasteTask=null}Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,scrollable:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(a){var b=this.buttonIds[a];return new Ext.button.Button({handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a,c){var b=this,d,e;if(c&&c.type==="keydown"&&!c.isSpecialKey()){c.getTarget(null,null,true).on({keyup:function(f){b.btnCallback(a,f)},single:true});return}if(b.cfg.prompt||b.cfg.multiline){if(b.cfg.multiline){e=b.textArea}else{e=b.textField}d=e.getValue();e.reset()}b.hide();b.userCallback(a.itemId,d,b.cfg)},hide:function(){var b=this,a=b.cfg?b.cfg.cls:"";b.progressBar.reset();if(a){b.removeCls(a)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(a){var b=this;Ext.window.Window.prototype.constructor.apply(this,arguments);b.minWidth=b.defaultMinWidth=(b.minWidth||b.defaultMinWidth);b.maxWidth=b.defaultMaxWidth=(b.maxWidth||b.defaultMaxWidth);b.minHeight=b.defaultMinHeight=(b.minHeight||b.defaultMinHeight);b.maxHeight=b.defaultMaxHeight=(b.maxHeight||b.defaultMaxHeight)},initComponent:function(a){var e=this,b=e.id,d,c;e.title=e.title||"&#160;";e.iconCls=e.iconCls||"";e.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[e.iconComponent=new Ext.Component({cls:e.baseIconCls}),e.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[e.msg=new Ext.Component({id:b+"-msg",cls:e.baseCls+"-text"}),e.textField=new Ext.form.field.Text({id:b+"-textfield",enableKeyEvents:true,listeners:{keydown:e.onPromptKey,scope:e}}),e.textArea=new Ext.form.field.TextArea({id:b+"-textarea",height:75})]})]});e.progressBar=new Ext.ProgressBar({id:b+"-progressbar",margin:"0 10 10 10"});e.items=[e.topContainer,e.progressBar];e.msgButtons=[];for(d=0;d<4;d++){c=e.makeButton(d);e.msgButtons[c.itemId]=c;e.msgButtons.push(c)}e.bottomTb=new Ext.toolbar.Toolbar({id:b+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[e.msgButtons[0],e.msgButtons[1],e.msgButtons[2],e.msgButtons[3]]});e.dockedItems=[e.bottomTb];e.on("close",e.onClose,e);Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var a=this.header.child("[type=close]");if(a){a.itemId="cancel";this.btnCallback(a);delete a.itemId}},onPromptKey:function(a,c){var b=this;if(c.keyCode===c.RETURN||c.keyCode===10){if(b.msgButtons.ok.isVisible()){b.msgButtons.ok.handler.call(b,b.msgButtons.ok)}else{if(b.msgButtons.yes.isVisible()){b.msgButtons.yes.handler.call(b,b.msgButtons.yes)}}}},reconfigure:function(c){var s=this,p=0,f=true,t=s.buttonText,e=s.resizer,n=s.header,r=n&&!n.isHeader,d=c&&(c.message||c.msg),u,l,h,o,q,g,b,j,m,k,a;s.updateButtonText();s.cfg=c=c||{};k=c.wait;if(c.width){l=c.width}if(c.height){h=c.height}s.minWidth=c.minWidth||s.defaultMinWidth;s.maxWidth=c.maxWidth||s.defaultMaxWidth;s.minHeight=c.minHeight||s.defaultMinHeight;s.maxHeight=c.maxHeight||s.defaultMaxHeight;if(e){u=e.resizeTracker;e.minWidth=u.minWidth=s.minWidth;e.maxWidth=u.maxWidth=s.maxWidth;e.minHeight=u.minHeight=s.minHeight;e.maxHeight=u.maxHeight=s.maxHeight}delete s.defaultFocus;if(c.defaultFocus){s.defaultFocus=c.defaultFocus}s.animateTarget=c.animateTarget||undefined;s.modal=c.modal!==false;s.setTitle(c.title||(r&&n.title)||s.title);s.setIconCls(c.iconCls||(r&&n.iconCls)||s.iconCls);if(Ext.isObject(c.buttons)){s.buttonText=c.buttons;p=0}else{s.buttonText=c.buttonText||s.buttonText;p=Ext.isNumber(c.buttons)?c.buttons:0}p=p|s.updateButtonText();s.buttonText=t;Ext.suspendLayouts();s.width=s.height=null;if(l||h){if(l){s.setWidth(l)}if(h){s.setHeight(h)}}s.hidden=false;if(!s.rendered){s.render(Ext.getBody())}s.closable=c.closable!==false&&!k;n=s.header;if(n){a=n.child("[type=close]");if(a){a.setVisible(s.closable)}if(!c.title&&!s.closable&&!c.iconCls){n.hide()}else{n.show()}}s.liveDrag=!c.proxyDrag;s.userCallback=Ext.Function.bindCallback(c.callback||c.fn||Ext.emptyFn,c.scope||Ext.global);s.setIcon(c.icon);b=s.msg;if(d){b.setHtml(d);b.show()}else{b.hide()}q=s.textArea;g=s.textField;if(c.prompt||c.multiline){s.multiline=c.multiline;if(c.multiline){q.setValue(c.value);q.setHeight(c.defaultTextHeight||s.defaultTextHeight);q.show();g.hide();s.defaultFocus=q}else{g.setValue(c.value);q.hide();g.show();s.defaultFocus=g}}else{q.hide();g.hide()}j=s.progressBar;if(c.progress||k){j.show();s.updateProgress(0,c.progressText);if(k){j.wait(k===true?c.waitConfig:k)}}else{j.hide()}m=s.msgButtons;for(o=0;o<4;o++){if(p&Math.pow(2,o)){if(!s.defaultFocus){s.defaultFocus=m[o]}m[o].show();f=false}else{m[o].hide()}}if(f){s.bottomTb.hide()}else{s.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var d=this,c=d.buttonText,b=0,e,a;for(e in c){if(c.hasOwnProperty(e)){a=d.msgButtons[e];if(a){if(d.cfg&&d.cfg.buttonText){b=b|Math.pow(2,Ext.Array.indexOf(d.buttonIds,e))}if(a.text!==c[e]){a.setText(c[e])}}}}return b},show:function(a){var c=this,b;a=a||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){c.show(a)},single:true});return c}c.reconfigure(a);if(a.cls){c.addCls(a.cls)}b=c.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");c.preventFocusOnActivate=!b.length;c.hidden=true;Ext.window.Window.prototype.show.call(this);return c},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(a){this.msg.setHtml(a)},setIcon:function(d,c,a){var e=this,f=e.iconComponent,b=e.messageIconCls;if(b){f.removeCls(b)}if(d){f.show();if(c||a){f.setSize(c||f.getWidth(),a||f.getHeight())}f.addCls("x-dlg-icon");f.addCls(e.messageIconCls=d)}else{f.removeCls("x-dlg-icon");f.hide()}return e},updateProgress:function(c,a,b){this.progressBar.updateProgress(c,a);if(b){this.updateText(b)}return this},onEsc:function(){if(this.closable!==false){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(a,d,c,b){if(Ext.isString(a)){a={title:a,icon:this.QUESTION,message:d,buttons:this.YESNO,callback:c,scope:b}}return this.show(a)},prompt:function(f,d,c,b,a,e){if(Ext.isString(f)){f={prompt:true,title:f,minWidth:this.minPromptWidth,message:d,buttons:this.OKCANCEL,callback:c,scope:b,multiline:a,value:e}}return this.show(f)},wait:function(b,c,a){if(Ext.isString(b)){b={title:c,message:b,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:a}}return this.show(b)},alert:function(d,c,b,a){if(Ext.isString(d)){d={title:d,message:c,buttons:this.OK,fn:b,scope:a,minWidth:this.minWidth}}return this.show(d)},progress:function(c,b,a){if(Ext.isString(c)){c={title:c,message:b,progress:true,progressText:a}}return this.show(c)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(a){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new a()})}));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(b,c){var d=this,a;d.owner=b;d.fieldMonitors={validitychange:d.checkValidityDelay,enable:d.checkValidityDelay,disable:d.checkValidityDelay,dirtychange:d.checkDirtyDelay,errorchange:d.checkErrorDelay,scope:d};d.checkValidityTask=new Ext.util.DelayedTask(d.checkValidity,d);d.checkDirtyTask=new Ext.util.DelayedTask(d.checkDirty,d);d.checkErrorTask=new Ext.util.DelayedTask(d.checkError,d);d.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:d,addHandler:d.onFieldAdd,removeHandler:d.onFieldRemove,invalidateHandler:d.onMonitorInvalidate});d.monitor.bind(b);Ext.apply(d,c);if(Ext.isString(d.paramOrder)){d.paramOrder=d.paramOrder.split(/[\s,|]/)}a=d.reader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.reader=Ext.createByAlias("reader."+a.type,a)}a=d.errorReader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.errorReader=Ext.createByAlias("reader."+a.type,a)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var b=this,a=b.monitor;if(a){a.unbind();b.monitor=null}b.clearListeners();b.checkValidityTask.cancel();b.checkDirtyTask.cancel();b.checkErrorTask.cancel();b.checkValidityTask=b.checkDirtyTask=b.checkErrorTask=null;Ext.util.Observable.prototype.destroy.call(this)},onFieldAdd:function(a){a.on(this.fieldMonitors);this.onMonitorInvalidate()},onFieldRemove:function(a){a.un(this.fieldMonitors);this.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(c){var a=c.preventMark,b;c.preventMark=true;b=c.isValid();c.preventMark=a;return !b})},isValid:function(){var a=this,b;Ext.suspendLayouts();b=a.getFields().filterBy(function(c){return !c.validate()});Ext.resumeLayouts(true);return b.length<1},checkValidity:function(){var b=this,a;if(b.destroyed){return}a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else{this.checkError()}},onValidityChange:function(f){var d=this.getBoundItems(),b,c,a,e;if(d){b=d.items;a=b.length;for(c=0;c<a;c++){e=b[c];if(e.disabled===f){e.setDisabled(!f)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else{this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.destroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(a){a=a||{};var b=this,c;if(a.standardSubmit||b.standardSubmit){c="standardsubmit"}else{c=b.api?"directsubmit":"submit"}return b.doAction(c,a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(c){c=c||this._record;if(!c){return this}var b=c.self.fields,d=this.getFieldValues(),g={},f=0,a=b.length,e;for(;f<a;++f){e=b[f].name;if(d.hasOwnProperty(e)){g[e]=d[e]}}c.beginEdit();c.set(g);c.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(c){var g=this,b=c.waitMsg,j="x-mask-loading",d=g.getFields().items,e,i=d.length,h,a;for(e=0;e<i;e++){h=d[e];if(h.isFormField&&h.syncValue){h.syncValue()}}if(b){a=g.waitMsgTarget;if(a===true){g.owner.el.mask(b,j)}else{if(a){a=g.waitMsgTarget=Ext.get(a);a.mask(b,j)}else{g.floatingAncestor=g.owner.up("[floating]");if(g.floatingAncestor){g.savePreventFocusOnActivate=g.floatingAncestor.preventFocusOnActivate;g.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(b,c.waitTitle||g.waitTitle)}}}},afterAction:function(c,e){var a=this;if(c.waitMsg){var b=Ext.MessageBox,d=a.waitMsgTarget;if(d===true){a.owner.el.unmask()}else{if(d){d.unmask()}else{b.hide()}}}if(a.floatingAncestor){a.floatingAncestor.preventFocusOnActivate=a.savePreventFocusOnActivate}if(e){if(c.reset){a.reset()}Ext.callback(c.success,c.scope||c,[a,c]);a.fireEvent("actioncomplete",a,c)}else{Ext.callback(c.failure,c.scope||c,[a,c]);a.fireEvent("actionfailed",a,c)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(i){var d=this,g,a,b,f,c;function h(e,k){var j=d.findField(e);if(j){j.markInvalid(k)}}if(Ext.isArray(i)){a=i.length;for(g=0;g<a;g++){b=i[g];h(b.id||b.field,b.msg||b.message)}}else{if(i instanceof Ext.data.ErrorCollection){a=i.items.length;for(g=0;g<a;g++){b=i.items[g];h(b.field,b.message)}}else{for(c in i){if(i.hasOwnProperty(c)){f=i[c];h(c,f,i)}}}}return this},setValues:function(b){var d=this,a,c,f;function e(g,i){var h=d.findField(g);if(h){h.setValue(i);if(d.trackResetOnLoad){h.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(b)){c=b.length;for(a=0;a<c;a++){f=b[a];e(f.id,f.value)}}else{Ext.iterate(b,e)}Ext.resumeLayouts(true);return this},getValues:function(j,k,o,m,c){var n={},h=this.getFields().items,p=h.length,g=Ext.isArray,l,e,d,b,a,i;for(i=0;i<p;i++){l=h[i];if(!k||l.isDirty()){e=l[m?"getModelData":"getSubmitData"](o,c);if(Ext.isObject(e)){for(a in e){if(e.hasOwnProperty(a)){d=e[a];if(o&&d===""){d=l.emptyText||""}if(!l.isRadio){if(n.hasOwnProperty(a)){b=n[a];if(!g(b)){b=n[a]=[b]}if(g(d)){n[a]=b.concat(d)}else{b.push(d)}}else{n[a]=d}}else{n[a]=n[a]||d}}}}}}if(j){n=Ext.Object.toQueryString(n)}return n},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){Ext.suspendLayouts();var b=this,a=b.getFields().items,c,d=a.length;for(c=0;c<d;c++){a[c].clearInvalid()}Ext.resumeLayouts(true);return b},reset:function(b){Ext.suspendLayouts();var c=this,a=c.getFields().items,d,e=a.length;for(d=0;d<e;d++){a[d].reset()}Ext.resumeLayouts(true);if(b===true){delete c._record}return c},applyToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.apply(a[b],c)}return this},applyIfToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.applyIf(a[b],c)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.layout.container.CheckboxGroup",Ext.layout.container.Container,{autoFlex:true,type:"checkboxgroup",createsInnerCt:true,childEls:["innerCt"],renderTpl:['<table id="{ownerId}-innerCt" data-ref="innerCt" class="x-table-plain" cellpadding="0"','role="presentation" style="{tableStyle}"><tr role="presentation">','<tpl for="columns">','<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">',"{% this.renderColumn(out,parent,xindex-1) %}","</td>","</tpl>","</tr></table>"],lastOwnerItemsGeneration:null,beginLayout:function(b){var j=this,e,d,g,a,h,f=0,l=0,k=j.autoFlex,c=j.innerCt.dom.style;Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);e=j.columnNodes;b.innerCtContext=b.getEl("innerCt",j);if(!b.widthModel.shrinkWrap){d=e.length;if(j.columnsArray){for(g=0;g<d;g++){a=j.owner.columns[g];if(a<1){f+=a;l++}}for(g=0;g<d;g++){a=j.owner.columns[g];if(a<1){h=((a/f)*100)+"%"}else{h=a+"px"}e[g].style.width=h}}else{for(g=0;g<d;g++){h=k?(1/d*100)+"%":"";e[g].style.width=h;l++}}if(!l){c.tableLayout="fixed";c.width=""}else{if(l<d){c.tableLayout="fixed";c.width="100%"}else{c.tableLayout="auto";if(k){c.width="100%"}else{c.width=""}}}}else{c.tableLayout="auto";c.width=""}},cacheElements:function(){var a=this;Ext.layout.container.Container.prototype.cacheElements.call(this);a.rowEl=a.innerCt.down("tr");a.columnNodes=a.rowEl.dom.childNodes},calculate:function(g){var e=this,c,b,a,h,d,f;if(!g.getDomProp("containerChildrenSizeDone")){e.done=false}else{c=g.innerCtContext;b=g.widthModel.shrinkWrap;a=g.heightModel.shrinkWrap;h=a||b;d=c.el.dom;f=h&&c.getPaddingInfo();if(b){g.setContentWidth(d.offsetWidth+f.width,true)}if(a){g.setContentHeight(d.offsetHeight+f.height,true)}}},doRenderColumn:function(d,k,f){var h=k.$layout,c=h.owner,e=k.columnCount,g=c.items.items,b=g.length,l,a,i,j,m;if(c.vertical){i=Math.ceil(b/e);a=f*i;b=Math.min(b,a+i);j=1}else{a=f;j=e}for(;a<b;a+=j){l=g[a];h.configureItem(l);m=l.getRenderTree();Ext.DomHelper.generateMarkup(m,d)}},getColumnCount:function(){var b=this,a=b.owner,c=a.columns;if(b.columnsArray){return c.length}if(Ext.isNumber(c)){return c}return a.items.length},getItemSizePolicy:function(a){return this.autoSizePolicy},getRenderData:function(){var j=this,f=Ext.layout.container.Container.prototype.getRenderData.call(this),b=j.owner,g,d=j.getColumnCount(),a,c,h,k=j.autoFlex,e=0,l=0;if(j.columnsArray){for(g=0;g<d;g++){a=j.owner.columns[g];if(a<1){e+=a;l++}}}f.colCls=b.groupCls;f.columnCount=d;f.columns=[];for(g=0;g<d;g++){c=(f.columns[g]={});if(j.columnsArray){a=j.owner.columns[g];if(a<1){h=((a/e)*100)+"%"}else{h=a+"px"}c.style="width:"+h}else{c.style="width:"+(1/d*100)+"%";l++}}f.tableStyle=!l?"table-layout:fixed;":(l<d)?"table-layout:fixed;width:100%":(k)?"table-layout:auto;width:100%":"table-layout:auto;";return f},initLayout:function(){var b=this,a=b.owner;b.columnsArray=Ext.isArray(a.columns);b.autoColumns=!a.columns||a.columns==="auto";b.vertical=a.vertical;Ext.layout.container.Container.prototype.initLayout.call(this)},isValidParent:Ext.returnTrue,setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderColumn=this.doRenderColumn},renderChildren:function(){var a=this,b=a.owner.items.generation;if(a.lastOwnerItemsGeneration!==b){a.lastOwnerItemsGeneration=b;a.renderItems(a.getLayoutItems())}},renderItems:function(e){var f=this,a=e.length,b,j,h,d,g,c;if(a){Ext.suspendLayouts();if(f.autoColumns){f.addMissingColumns(a)}d=f.columnNodes.length;h=Math.ceil(a/d);for(b=0;b<a;b++){j=e[b];g=f.getRenderRowIndex(b,h,d);c=f.getRenderColumnIndex(b,h,d);if(!j.rendered){f.renderItem(j,g,c)}else{if(!f.isItemAtPosition(j,g,c)){f.moveItem(j,g,c)}}}if(f.autoColumns){f.removeExceedingColumns(a)}Ext.resumeLayouts(true)}},isItemAtPosition:function(b,c,a){return b.el.dom===this.getNodeAt(c,a)},getRenderColumnIndex:function(b,a,c){if(this.vertical){return Math.floor(b/a)}else{return b%c}},getRenderRowIndex:function(b,a,d){var c=this;if(c.vertical){return b%a}else{return Math.floor(b/d)}},getNodeAt:function(b,a){return this.columnNodes[a].childNodes[b]},addMissingColumns:function(a){var f=this,c=f.columnNodes.length,e,g,b,d;if(c<a){e=a-c;g=f.rowEl;b=f.owner.groupCls;for(d=0;d<e;d++){g.createChild({cls:b,tag:"td",vAlign:"top",role:"presentation"})}}},removeExceedingColumns:function(a){var e=this,b=e.columnNodes.length,d,f,c;if(b>a){d=b-a;f=e.rowEl;for(c=0;c<d;c++){f.last().destroy()}}},renderItem:function(c,d,a){var b=this;b.configureItem(c);c.render(Ext.get(b.columnNodes[a]),d)},moveItem:function(d,f,b){var c=this,a=c.columnNodes[b],e=a.childNodes[f];a.insertBefore(d.el.dom,e||null)}},0,0,0,0,["layout.checkboxgroup"],0,[Ext.layout.container,"CheckboxGroup"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name===a&&c.getFormId()===b})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl","innerWrapEl","displayEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls} {clipCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',"/>",'<span id="{cmpId}-displayEl" data-ref="displayEl" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}"></span>','<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:false,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:false,ariaRole:"checkbox",onRe:/^on$/i,inputCls:"x-form-cb",_checkboxCls:"x-form-cb-input",_clipCls:"x-hidden-clip",initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}Ext.form.field.Base.prototype.initComponent.call(this);a.getManager().add(a)},initDefaultName:Ext.emptyFn,initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}return Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(b){var d=this,c=d.boxLabel,g=d.boxLabelAlign,f=g==="before",e,a;e=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,b),{clipCls:d._clipCls,checkboxCls:d._checkboxCls,disabled:d.readOnly||d.disabled,wrapInnerCls:d.wrapInnerCls,boxLabel:c,boxLabelCls:d.boxLabelCls,boxLabelAlign:g,labelAlignedBefore:f,afterLabelCls:f?d.afterLabelCls:"",noBoxLabelCls:!c?d.noBoxLabelCls:"",inputName:d.name||d.id});a=e.inputElAriaAttributes;if(a){a["aria-checked"]=!!d.checked;a["aria-labelledby"]=d.id+"-boxLabelEl"}return e},initEvents:function(){var a=this;Ext.form.field.Base.prototype.initEvents.call(this);a.inputEl.on({click:"onBoxClick",scope:a,translate:false});a.displayEl.on({click:"onBoxClick",mousedown:"_onDisplayElMouseDown",scope:a})},setBoxLabel:function(a){var b=this;b.boxLabel=a;if(b.rendered){b.boxLabelEl.setHtml(a);b.boxLabelEl[a?"removeCls":"addCls"](b.noBoxLabelCls);b.updateLayout()}},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){a.setValue(!a.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(b,a){return(b===true||b==="true"||b==="1"||b===1||(((Ext.isString(b)||Ext.isNumber(b))&&a)?b==a:this.onRe.test(b)))},setRawValue:function(c){var b=this,d=b.inputEl,e=b.displayEl,a=b.isChecked(c,b.inputValue);if(d){b[a?"addCls":"removeCls"](b.checkedCls);if(b.ariaRole){b.ariaEl.dom.setAttribute("aria-checked",a)}}if(Ext.isIE8&&e&&a!==b.lastValue){e.repaint()}b.checked=b.rawValue=a;if(!b.duringSetValue){b.lastValue=a}return a},setValue:function(f){var e=this,c,b,a,d;if(Ext.isArray(f)){c=e.getManager().getByName(e.name,e.getFormId()).items;a=c.length;for(b=0;b<a;++b){d=c[b];d.setValue(Ext.Array.contains(f,d.inputValue))}}else{e.duringSetValue=true;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete e.duringSetValue}return e},valueToRaw:Ext.identityFn,onChange:function(b,a){var d=this,c=d.handler;if(c){Ext.callback(c,d.scope,[d,b],0,d)}Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(d.reference&&d.publishState){d.publishState("checked",b)}},resetOriginalValue:function(b){var f=this,d,e,a,c;if(!b){d=f.getManager().getByName(f.name,f.getFormId()).items;a=d.length;for(c=0;c<a;++c){e=d[c];if(e!==f){d[c].resetOriginalValue(true)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this);this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;Ext.form.field.Base.prototype.onEnable.call(this);if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.disabled=!!c||a.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var b=this,a;if(!b.formId){a=b.up("form");if(a){b.formId=a.id}}return b.formId},getFocusClsEl:function(){return this.displayEl},privates:{_onDisplayElMouseDown:function(a){a.preventDefault();this.inputEl.focus(1)}}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));(Ext.cmd.derive("Ext.form.CheckboxGroup",Ext.form.FieldContainer,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",defaultBindProperty:"value",groupCls:"x-form-check-group",extraFieldBodyCls:"x-form-checkboxgroup-body",layout:"checkboxgroup",componentCls:"x-form-checkboxgroup",ariaRole:"group",ariaEl:"containerEl",ariaRenderAttributes:{"aria-invalid":false},initComponent:function(){var a=this;a.name=a.name||a.id;Ext.form.FieldContainer.prototype.initComponent.call(this);a.initField()},initRenderData:function(){var f=this,g,b,d,c,a,e;g=Ext.form.FieldContainer.prototype.initRenderData.call(this);g.inputId=f.id+"-"+f.ariaEl;b=g.ariaAttributes;if(b){d=f.getBoxes();e=[];for(c=0,a=d.length;c<a;c++){e.push(d[c].id+"-inputEl")}b["aria-owns"]=e.join(" ")}return g},initValue:function(){var b=this,a=b.value;b.originalValue=b.lastValue=a||b.getValue();if(a){b.setValue(a)}},onAdd:function(e){var d=this,b,a,c;if(e.isCheckbox){if(!e.name){e.name=d.name}d.mon(e,"change",d.checkChange,d)}else{if(e.isContainer){b=e.items.items;for(c=0,a=b.length;c<a;c++){d.onAdd(b[c])}}}Ext.form.FieldContainer.prototype.onAdd.apply(this,arguments)},onRemove:function(e){var d=this,b,a,c;if(e.isCheckbox){d.mun(e,"change",d.checkChange,d)}else{if(e.isContainer){b=e.items.items;for(c=0,a=b.length;c<a;c++){d.onRemove(b[c])}}}Ext.form.FieldContainer.prototype.onRemove.apply(this,arguments)},isEqual:function(b,a){var c=Ext.Object.toQueryString;return c(b)===c(a)},getErrors:function(){var a=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){a.push(this.blankText)}return a},getBoxes:function(a){return this.query("[isCheckbox]"+(a||""))},eachBox:function(b,a){Ext.Array.forEach(this.getBoxes(),b,a||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){if(c[a].isDirty()){return true}}},setReadOnly:function(e){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){c[a].setReadOnly(e)}this.readOnly=e},reset:function(){var c=this,b=c.hasActiveError(),a=c.preventMark;c.preventMark=true;c.batchChanges(function(){var e=c.getBoxes(),d,f=e.length;for(d=0;d<f;d++){e[d].reset()}});c.preventMark=a;c.unsetActiveError();if(b){c.updateLayout()}},resetOriginalValue:function(){var d=this,c=d.getBoxes(),a,e=c.length;for(a=0;a<e;a++){c[a].resetOriginalValue()}d.originalValue=d.getValue();d.checkDirty()},setValue:function(g){var f=this,d=f.getBoxes(),a,i=d.length,e,c,h;f.batchChanges(function(){Ext.suspendLayouts();for(a=0;a<i;a++){e=d[a];c=e.getName();h=false;if(g){if(Ext.isArray(g[c])){h=Ext.Array.contains(g[c],e.inputValue)}else{h=g[c]}}e.setValue(h)}Ext.resumeLayouts(true)});return f},getValue:function(){var d={},f=this.getBoxes(),c,i=f.length,g,e,a,h;for(c=0;c<i;c++){g=f[c];e=g.getName();a=g.inputValue;if(g.getValue()){if(d.hasOwnProperty(e)){h=d[e];if(!Ext.isArray(h)){h=d[e]=[h]}h.push(a)}else{d[e]=a}}}return d},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,d,c,b;if(a.disabled){c=true}else{d=a.getErrors();c=Ext.isEmpty(d);b=a.wasValid;if(c){a.unsetActiveError()}else{a.setActiveError(d)}}if(c!==b){a.wasValid=c;a.fireEvent("validitychange",a,c);a.updateLayout()}return c}},0,["checkboxgroup"],["component","box","container","fieldcontainer","checkboxgroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true},["widget.checkboxgroup"],[["field",Ext.form.field.Field]],[Ext.form,"CheckboxGroup"],function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}));(Ext.cmd.derive("Ext.form.FieldSet",Ext.container.Container,{checkboxUI:"default",collapsed:false,toggleOnTitleClick:true,baseCls:"x-fieldset",layout:"anchor",descriptionText:"{0} field set",expandText:"Expand field set",componentLayout:"fieldset",ariaRole:"group",focusable:false,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:false,beforeDestroy:function(){var b=this,a=b.legend;if(a){delete a.ownerCt;a.destroy();b.legend=null}Ext.container.Container.prototype.beforeDestroy.call(this)},initComponent:function(){var b=this,a=b.baseCls;if(b.ariaRole&&!b.ariaLabel){b.ariaLabel=Ext.String.formatEncode(b.descriptionText,b.title||"")}b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes["aria-expanded"]=!b.collapsed;b.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);b.layout.managePadding=b.layout.manageOverflow=false;if(b.collapsed){b.addCls(a+"-collapsed");b.collapse()}if(b.title||b.checkboxToggle||b.collapsible){b.addTitleClasses();b.legend=b.createLegendCt()}b.initMonitor()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.bodyTargetCls=a.bodyTargetCls;a.protoBody.writeTo(b);delete a.protoBody;return b},getState:function(){var a=Ext.container.Container.prototype.getState.call(this);a=this.addPropertyToState(a,"collapsed");return a},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return true},collapsedVertical:function(){return true},createLegendCt:function(){var c=this,a=[],d={baseCls:c.baseCls+"-header",layout:"container",ui:c.ui,id:c.id+"-legend",autoEl:"legend",ariaRole:null,items:a,ownerCt:c,shrinkWrap:true,ownerLayout:c.componentLayout},b;if(c.checkboxToggle){a.push(c.createCheckboxCmp())}else{if(c.collapsible){a.push(c.createToggleCmp())}}a.push(c.createTitleCmp());b=new Ext.container.Container(d);b.collapseImmune=true;b.getInherited().collapseImmune=true;return b},createTitleCmp:function(){var b=this,a={html:b.title,ui:b.ui,cls:b.baseCls+"-header-text",id:b.id+"-legendTitle",ariaRole:"presentation"};if(b.collapsible&&b.toggleOnTitleClick){a.listeners={click:{element:"el",scope:b,fn:b.toggle}};a.cls+=" "+b.baseCls+"-header-text-collapsible"}b.titleCmp=new Ext.Component(a);return b.titleCmp},createCheckboxCmp:function(){var b=this,d="-checkbox",a=b.baseCls+"-header"+d,c;a+=" "+a+"-"+b.ui;b.checkboxCmp=c=new Ext.form.field.Checkbox({hideEmptyLabel:true,name:b.checkboxName||b.id+d,cls:a,id:b.id+"-legendChk",ui:b.checkboxUI,checked:!b.collapsed,msgTarget:"none",listeners:{change:b.onCheckChange,scope:b},ariaLabel:b.expandText});return c},createToggleCmp:function(){var a=this,b;a.toggleCmp=b=new Ext.panel.Tool({cacheHeight:false,cls:a.baseCls+"-header-tool-"+a.ui,type:"toggle",handler:a.toggle,id:a.id+"-legendToggle",scope:a,ariaRole:"checkbox",ariaLabel:a.expandText,ariaRenderAttributes:{"aria-checked":!a.collapsed}});return b},doRenderLegend:function(b,e){var d=e.$comp,c=d.legend,a;if(c){c.ownerLayout.configureItem(c);a=c.getRenderTree();Ext.DomHelper.generateMarkup(a,b)}},getCollapsed:function(){return this.collapsed?"top":false},getCollapsedDockedItems:function(){var a=this.legend;return a?[a]:[]},setTitle:function(c){var b=this,a=b.legend;b.title=c;b.ariaLabel=Ext.String.formatEncode(b.descriptionText,c||"");if(b.rendered){if(!a){b.legend=a=b.createLegendCt();b.addTitleClasses();a.ownerLayout.configureItem(a);a.render(b.el,0)}b.titleCmp.update(c);b.ariaEl.dom.setAttribute("aria-label",b.ariaLabel)}else{if(a){b.titleCmp.update(c)}else{b.addTitleClasses();b.legend=b.createLegendCt()}}return b},addTitleClasses:function(){var b=this,c=b.title,a=b.baseCls;if(c){b.addCls(a+"-with-title")}if(c||b.checkboxToggle||b.collapsible){b.addCls(a+"-with-legend")}},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(b){var c=this,d=c.checkboxCmp,e=c.toggleCmp,a=b?"expand":"collapse";if(!c.rendered||c.fireEvent("before"+a,c)!==false){b=!!b;if(d){d.setValue(b)}else{if(e&&e.ariaEl.dom){e.ariaEl.dom.setAttribute("aria-checked",b)}}if(b){c.removeCls(c.baseCls+"-collapsed")}else{c.addCls(c.baseCls+"-collapsed")}if(c.ariaEl.dom){c.ariaEl.dom.setAttribute("aria-expanded",!!b)}c.collapsed=!b;if(b){delete c.getInherited().collapsed}else{c.getInherited().collapsed=true}if(c.rendered){c.updateLayout({isRoot:false});c.fireEvent(a,c)}}return c},getRefItems:function(a){var c=Ext.container.Container.prototype.getRefItems.apply(this,arguments),b=this.legend;if(b){c.unshift(b);if(a){c.unshift.apply(c,b.getRefItems(true))}}return c},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},finishRender:function(){var a=this.legend;Ext.container.Container.prototype.finishRender.call(this);if(a){a.finishRender()}},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:true})}return a},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(e){var c=this,a=c.getProtoBody(),d=c.padding,b;if(d!==undefined){if(Ext.isIE8){d=c.parseBox(d);b=Ext.Element.parseBox(0);b.top=d.top;d.top=0;a.setStyle("padding",c.unitizeBox(b))}e.setStyle("padding",c.unitizeBox(d))}},onCheckChange:function(b,a){this.setExpanded(a)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderLegend=this.doRenderLegend}}},0,["fieldset"],["component","box","container","fieldset"],{component:true,box:true,container:true,fieldset:true},["widget.fieldset"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldSet"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",bodyAriaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var b={},d=this.basicFormConfigs,a=d.length,c=0,e;for(;c<a;++c){e=d[c];b[e]=this[e]}return new Ext.form.Basic(this,b)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,b,c,a){return this.getForm().getValues(d,b,c,a)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){var a=this.form.getFields().items,b,c=a.length;for(b=0;b<c;b++){a[b].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.RadioManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name===a&&c.getFormId()===b})},getWithValue:function(a,b,c){return this.filterBy(function(d){return d.name===a&&d.inputValue==b&&d.getFormId()===c})},getChecked:function(a,b){return this.findBy(function(c){return c.name===a&&c.checked&&c.getFormId()===b})}},0,0,0,0,0,0,[Ext.form,"RadioManager"],0));(Ext.cmd.derive("Ext.form.field.Radio",Ext.form.field.Checkbox,{alternateClassName:"Ext.form.Radio",isRadio:true,inputType:"radio",ariaRole:"radio",tabIndex:0,formId:null,getGroupValue:function(){var a=this.getManager().getChecked(this.name,this.getFormId());return a?a.inputValue:null},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(true)}},onRemoved:function(){Ext.form.field.Checkbox.prototype.onRemoved.apply(this,arguments);this.formId=null},setValue:function(b){var a=this,c;if(Ext.isBoolean(b)){Ext.form.field.Checkbox.prototype.setValue.apply(this,arguments)}else{c=a.getManager().getWithValue(a.name,b,a.getFormId()).getAt(0);if(c){c.setValue(true)}}return a},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){var a=Ext.form.field.Checkbox.prototype.getModelData.apply(this,arguments);if(a){a[this.getName()]=this.getSubmitValue()}return a},onChange:function(c,a){var f=this,e,d,b,g;Ext.form.field.Checkbox.prototype.onChange.apply(this,arguments);if(c){g=f.getManager().getByName(f.name,f.getFormId()).items;d=g.length;for(e=0;e<d;e++){b=g[e];if(b!==f){b.setValue(false)}}}},getManager:function(){return Ext.form.RadioManager}},0,["radiofield","radio"],["component","box","field","checkboxfield","checkbox","radiofield","radio"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,radiofield:true,radio:true},["widget.radio","widget.radiofield"],0,[Ext.form.field,"Radio",Ext.form,"Radio"],0));(Ext.cmd.derive("Ext.form.RadioGroup",Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",local:false,defaultBindProperty:"value",groupCls:"x-form-radio-group",ariaRole:"radiogroup",initRenderData:function(){var b=this,c,a;c=Ext.form.CheckboxGroup.prototype.initRenderData.call(this);a=c.ariaAttributes;if(a){a["aria-required"]=!b.allowBlank;a["aria-invalid"]=false}return c},lookupComponent:function(b){var a=Ext.form.CheckboxGroup.prototype.lookupComponent.call(this,b);if(this.local){a.formId=this.getId()}return a},getBoxes:function(b,a){return(a||this).query("[isRadio]"+(b||""))},checkChange:function(){var b=this.getValue(),a=Ext.Object.getKeys(b)[0];if(Ext.isArray(b[a])){return}Ext.form.CheckboxGroup.prototype.checkChange.apply(this,arguments)},setValue:function(d){var h,f,e,g,c,a,b;if(Ext.isObject(d)){Ext.suspendLayouts();f=this.items.first();e=f?f.getFormId():null;for(b in d){h=d[b];g=Ext.form.RadioManager.getWithValue(b,h,e).items;a=g.length;for(c=0;c<a;++c){g[c].setValue(true)}}Ext.resumeLayouts(true)}return this},markInvalid:function(b){var a=this.ariaEl.dom;Ext.form.CheckboxGroup.prototype.markInvalid.call(this,b);if(a){a.setAttribute("aria-invalid",true)}},clearInvalid:function(){var a=this.ariaEl.dom;Ext.form.CheckboxGroup.prototype.clearInvalid.call(this);if(a){a.setAttribute("aria-invalid",false)}},privates:{getFocusables:function(){return this.getBoxes()},initDefaultFocusable:function(a){var d=this,c,b;c=d.getChecked();if(c.length){b=c[0]}else{b=d.findNextFocusableChild({beforeRender:a,step:1})}if(b){d.activateFocusable(b)}return b},getFocusableContainerEl:function(){return this.containerEl},onFocusableContainerFocusLeave:function(){this.clearFocusables();this.initDefaultFocusable()},doFocusableChildAdd:function(f){var e=this,b=e.mixins.focusablecontainer,d,c,a;d=f.isContainer?e.getBoxes("",f):[f];for(c=0,a=d.length;c<a;c++){b.doFocusableChildAdd.call(e,d[c])}},doFocusableChildRemove:function(f){var e=this,b=e.mixins.focusablecontainer,d,c,a;d=f.isContainer?e.getBoxes("",f):[f];for(c=0,a=d.length;c<a;c++){b.doFocusableChildRemove.call(e,d[c])}},focusChild:function(c,b,d){var a=this.mixins.focusablecontainer.focusChild.apply(this,arguments);if(!d.ctrlKey){a.setValue(true)}}}},0,["radiogroup"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true},["widget.radiogroup"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.form,"RadioGroup"],0));(Ext.cmd.derive("Ext.picker.Month",Ext.Component,{alternateClassName:"Ext.MonthPicker",isMonthPicker:true,focusable:true,childEls:["bodyEl","prevEl","nextEl","monthEl","yearEl"],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>',"</div>","</tpl>","</div>",'<div class="x-clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:"x-monthpicker",showButtons:true,footerButtonUI:"default",measureWidth:35,measureMaxHeight:20,smallCls:"x-monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var a=this;a.selectedCls=a.baseCls+"-selected";if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear(new Date().getFullYear()-4,-4);if(a.showButtons){a.okBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.okText,handler:a.onOkClick,scope:a});a.cancelBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.cancelText,handler:a.onCancelClick,scope:a})}Ext.Component.prototype.initComponent.call(this)},beforeRender:function(){var f=this,c=0,b=[],a=Ext.Date.getShortMonthName,e=f.monthOffset,g=f.monthMargin,d="";if(f.padding&&!f.width){f.cacheWidth()}Ext.Component.prototype.beforeRender.call(this);for(;c<e;++c){b.push(a(c),a(c+e))}if(Ext.isDefined(g)){d="margin: 0 "+g+"px;"}Ext.apply(f.renderData,{months:b,years:f.getYears(),showButtons:f.showButtons,monthStyle:d})},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+" "+a.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},afterRender:function(){var b=this,a=b.bodyEl;Ext.Component.prototype.afterRender.call(this);if(b.up("[floating=true]")){b.el.on("mousedown",b.onElClick,b)}b.mon(a,"click",b.onBodyClick,b);b.mon(a,"dblclick",b.onBodyClick,b);b.years=a.select("."+b.baseCls+"-year a");b.months=a.select("."+b.baseCls+"-month a");b.backRepeater=new Ext.util.ClickRepeater(b.prevEl,{handler:Ext.Function.bind(b.adjustYear,b,[-b.totalYears])});b.prevEl.addClsOnOver(b.baseCls+"-yearnav-prev-over");b.nextRepeater=new Ext.util.ClickRepeater(b.nextEl,{handler:Ext.Function.bind(b.adjustYear,b,[b.totalYears])});b.nextEl.addClsOnOver(b.baseCls+"-yearnav-next-over");b.updateBody();if(!Ext.isDefined(b.monthMargin)){Ext.picker.Month.prototype.monthMargin=b.calculateMonthMargin()}},calculateMonthMargin:function(){var c=this,a=c.months,d=a.first(),b=d.getMargin("l");while(b&&c.getLargest()>c.measureMaxHeight){--b;a.setStyle("margin","0 "+b+"px")}return b},getLargest:function(a){var b=0;this.months.each(function(d){var c=d.getHeight();if(c>b){b=c}});return b},setValue:function(c){var b=this,d=b.activeYear,a;if(!c){b.value=[null,null]}else{if(Ext.isDate(c)){b.value=[c.getMonth(),c.getFullYear()]}else{b.value=[c[0],c[1]]}}if(b.rendered){a=b.value[1];if(a!==null){if((a<d||a>d+b.yearOffset)){b.activeYear=a-b.yearOffset+1}}b.updateBody()}return b},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var d=this,e=d.yearOffset,f=d.activeYear,a=f+e,c=f,b=[];for(;c<a;++c){b.push(c,c+e)}return b},updateBody:function(){var h=this,e=h.years,b=h.months,l=h.getYears(),m=h.selectedCls,j=h.getYear(null),f=h.value[0],k=h.monthOffset,g,d,i,a,c;if(h.rendered){e.removeCls(m);b.removeCls(m);d=e.elements;a=d.length;for(i=0;i<a;i++){c=Ext.fly(d[i]);g=l[i];c.dom.innerHTML=g;if(g===j){c.addCls(m)}}if(f!==null){if(f<k){f=f*2}else{f=(f-k)*2+1}b.item(f).addCls(m)}}},getYear:function(a,c){var b=this.value[1];c=c||0;return b===null?a:b+c},onElClick:function(a){a.stopEvent()},onBodyClick:function(d,b){var c=this,a=d.type==="dblclick";if(d.getTarget("."+c.baseCls+"-month")){d.stopEvent();c.onMonthClick(b,a)}else{if(d.getTarget("."+c.baseCls+"-year")){d.stopEvent();c.onYearClick(b,a)}}},adjustYear:function(a){if(typeof a!=="number"){a=this.totalYears}this.activeYear+=a;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(c,a){var b=this;b.value[0]=b.resolveOffset(b.months.indexOf(c),b.monthOffset);b.updateBody();b.fireEvent("month"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},onYearClick:function(c,a){var b=this;b.value[1]=b.activeYear+b.resolveOffset(b.years.indexOf(c),b.yearOffset);b.updateBody();b.fireEvent("year"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},resolveOffset:function(a,b){if(a%2===0){return(a/2)}else{return b+Math.floor(a/2)}},beforeDestroy:function(){var a=this;a.years=a.months=null;Ext.destroyMembers(a,"backRepeater","nextRepeater","okBtn","cancelBtn");Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.destroyMembers(this,"okBtn","cancelBtn");Ext.Component.prototype.onDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.apply(this,arguments);if(this.showButtons){a.okBtn.finishRender();a.cancelBtn.finishRender()}}}},0,["monthpicker"],["component","box","monthpicker"],{component:true,box:true,monthpicker:true},["widget.monthpicker"],0,[Ext.picker,"Month",Ext,"MonthPicker"],0));Ext.define("Ext.theme.neptune.picker.Month",{override:"Ext.picker.Month",measureMaxHeight:36});Ext.define("FBEditor.override.picker.Month",{override:"Ext.picker.Month"});(Ext.cmd.derive("Ext.picker.Date",Ext.Component,{alternateClassName:"Ext.DatePicker",todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",ariaMinText:"This date is before the minimum date",maxText:"This date is after the maximum date",ariaMaxText:"This date is after the maximum date",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date is disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:true,disableAnim:false,baseCls:"x-datepicker",longDayFormat:"F d, Y",footerButtonUI:"default",isDatePicker:true,ariaRole:"region",focusable:true,childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:true,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl" role="presentation">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="presentation" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="presentation" title="{nextText}"></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" cellspacing="0" tabindex="0">',"<thead>",'<tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr>","</thead>","<tbody>",'<tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr>","</tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>",'<div id="{id}-todayText" class="x-hidden-clip">{todayText}.</div>','<div id="{id}-ariaMinText" class="x-hidden-clip">{ariaMinText}.</div>','<div id="{id}-ariaMaxText" class="x-hidden-clip">{ariaMaxText}.</div>','<div id="{id}-ariaDisabledDaysText" class="x-hidden-clip">{ariaDisabledDaysText}.</div>','<div id="{id}-ariaDisabledDatesText" class="x-hidden-clip">{ariaDisabledDatesText}.</div>',"</div>",{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)},isEndOfWeek:function(b){b--;var a=b%7===0&&b!==0;return a?'</tr><tr role="row">':""},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)}}],initHour:12,numDays:42,initComponent:function(){var b=this,a=Ext.Date.clearTime;b.selectedCls=b.baseCls+"-selected";b.disabledCellCls=b.baseCls+"-disabled";b.prevCls=b.baseCls+"-prevday";b.activeCls=b.baseCls+"-active";b.cellCls=b.baseCls+"-cell";b.nextCls=b.baseCls+"-prevday";b.todayCls=b.baseCls+"-today";if(!b.format){b.format=Ext.Date.defaultFormat}if(!b.dayNames){b.dayNames=Ext.Date.dayNames}b.dayNames=b.dayNames.slice(b.startDay).concat(b.dayNames.slice(0,b.startDay));Ext.Component.prototype.initComponent.call(this);b.value=b.value?a(b.value,true):a(new Date());b.initDisabledDays()},getRefOwner:function(){return this.pickerField||Ext.Component.prototype.getRefOwner.call(this)},getRefItems:function(){var a=[],c=this.monthBtn,b=this.todayBtn;if(c){a.push(c)}if(b){a.push(b)}return a},beforeRender:function(){var c=this,b=Ext.String.htmlEncode,d=new Array(c.numDays),a=Ext.Date.format(new Date(),c.format);if(c.padding&&!c.width){c.cacheWidth()}c.monthBtn=new Ext.button.Split({ownerCt:c,ownerLayout:c.getComponentLayout(),text:"",tooltip:c.monthYearText,tabIndex:-1,ariaRole:"presentation",listeners:{click:c.doShowMonthPicker,arrowclick:c.doShowMonthPicker,scope:c}});if(c.showToday){c.todayBtn=new Ext.button.Button({ui:c.footerButtonUI,ownerCt:c,ownerLayout:c.getComponentLayout(),text:Ext.String.format(c.todayText,a),tooltip:Ext.String.format(c.todayTip,a),tooltipType:"title",tabIndex:-1,ariaRole:"presentation",handler:c.selectToday,scope:c})}Ext.Component.prototype.beforeRender.call(this);Ext.applyIf(c,{renderData:{}});Ext.apply(c.renderData,{dayNames:c.dayNames,showToday:c.showToday,prevText:b(c.prevText),nextText:b(c.nextText),todayText:b(c.todayText),ariaMinText:b(c.ariaMinText),ariaMaxText:b(c.ariaMaxText),ariaDisabledDaysText:b(c.ariaDisabledDaysText),ariaDisabledDatesText:b(c.ariaDisabledDatesText),days:d});c.protoEl.unselectable()},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+" "+a.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},onRender:function(b,a){var c=this;Ext.Component.prototype.onRender.apply(this,arguments);c.cells=c.eventEl.select("tbody td");c.textNodes=c.eventEl.query("tbody td div");c.eventEl.set({"aria-labelledby":c.monthBtn.id});c.mon(c.eventEl,{scope:c,mousewheel:c.handleMouseWheel,click:{fn:c.handleDateClick,delegate:"div."+c.baseCls+"-date"}})},initEvents:function(){var c=this,d=c.pickerField,a=Ext.Date,b=a.DAY;Ext.Component.prototype.initEvents.call(this);if(d){c.el.on("mousedown",c.onMouseDown,c)}c.monthBtn.el.on("mousedown",c.onMouseDown,c);c.prevRepeater=new Ext.util.ClickRepeater(c.prevEl,{handler:c.showPrevMonth,scope:c,mousedownStopEvent:true});c.nextRepeater=new Ext.util.ClickRepeater(c.nextEl,{handler:c.showNextMonth,scope:c,mousedownStopEvent:true});c.keyNav=new Ext.util.KeyNav(c.eventEl,Ext.apply({scope:c,left:function(f){if(f.ctrlKey){f.preventDefault();c.showPrevMonth()}else{c.update(a.add(c.activeDate,b,-1))}},right:function(f){if(f.ctrlKey){f.preventDefault();c.showNextMonth()}else{c.update(a.add(c.activeDate,b,1))}},up:function(f){if(f.ctrlKey){c.showNextYear()}else{c.update(a.add(c.activeDate,b,-7))}},down:function(f){if(f.ctrlKey){c.showPrevYear()}else{c.update(a.add(c.activeDate,b,7))}},pageUp:function(f){if(f.ctrlKey){c.showPrevYear()}else{c.showPrevMonth()}},pageDown:function(f){if(f.ctrlKey){c.showNextYear()}else{c.showNextMonth()}},tab:function(f){c.handleTabKey(f);return true},enter:function(f){c.handleDateClick(f,c.activeCell.firstChild)},space:function(){c.setValue(new Date(c.activeCell.firstChild.dateValue));var e=c.startValue,f=c.value,g;if(d){g=d.getValue();if(g&&e&&g.getTime()===f.getTime()){d.setValue(e)}else{d.setValue(f)}}},home:function(f){c.update(a.getFirstDateOfMonth(c.activeDate))},end:function(f){c.update(a.getLastDateOfMonth(c.activeDate))}},c.keyNavConfig));if(c.disabled){c.syncDisabled(true)}c.update(c.value)},onMouseDown:function(a){a.preventDefault()},handleTabKey:function(d){var c=this,a=c.getSelectedDate(c.activeDate),b=c.handler;if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.setValue(new Date(a.dateValue));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}else{c.fireEventArgs("tabout",[c])}},getSelectedDate:function(a){var d=this,h=a.getTime(),i=d.cells,j=d.selectedCls,f=i.elements,e=f.length,g,b;i.removeCls(j);for(b=0;b<e;b++){g=f[b].firstChild;if(g.dateValue===h){return g}}return null},initDisabledDays:function(){var g=this,b=g.disabledDates,f="(?:",a,h,c,e;if(!g.disabledDatesRE&&b){a=b.length-1;c=b.length;for(h=0;h<c;h++){e=b[h];f+=Ext.isDate(e)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(e,g.format))+"$":e;if(h!==a){f+="|"}}g.disabledDatesRE=new RegExp(f+")")}},setDisabledDates:function(a){var b=this;if(Ext.isArray(a)){b.disabledDates=a;b.disabledDatesRE=null}else{b.disabledDatesRE=a}b.initDisabledDays();b.update(b.value,true);return b},setDisabledDays:function(a){this.disabledDays=a;return this.update(this.value,true)},setMinDate:function(a){this.minDate=a;return this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;return this.update(this.value,true)},setValue:function(a){this.value=Ext.Date.clearTime(a||new Date(),true);return this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(a){return a.substr(0,1)},onEnable:function(){var a=this;Ext.Component.prototype.onEnable.call(this);a.syncDisabled(false);a.update(a.activeDate)},onShow:function(){var a=this;Ext.Component.prototype.onShow.call(this);a.syncDisabled(false);if(a.pickerField){a.startValue=a.pickerField.getValue()}},onHide:function(){Ext.Component.prototype.onHide.call(this);this.syncDisabled(true)},onDisable:function(){Ext.Component.prototype.onDisable.call(this);this.syncDisabled(true)},getActive:function(){return this.activeDate||this.value},runAnimation:function(c){var b=this.monthPicker,a={duration:200,callback:function(){b.setVisible(!c)}};if(c){b.el.slideOut("t",a)}else{b.el.slideIn("t",a)}},hideMonthPicker:function(a){var c=this,b=c.monthPicker;if(b&&b.isVisible()){if(c.shouldAnimate(a)){c.runAnimation(true)}else{b.hide()}}return c},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(a){var d=this,c=d.el,b;if(d.rendered&&!d.disabled){b=d.createMonthPicker();if(!b.isVisible()){b.setValue(d.getActive());b.setSize(c.getSize());b.floatParent=null;b.setPosition(-c.getBorderWidth("l"),-c.getBorderWidth("t"));if(d.shouldAnimate(a)){d.runAnimation(false)}else{b.show()}}}return d},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var b=this,a=b.monthPicker;if(!a){b.monthPicker=a=new Ext.picker.Month({renderTo:b.el,ownerCmp:b,floating:true,padding:b.padding,shadow:false,small:b.showToday===false,footerButtonUI:b.footerButtonUI,listeners:{scope:b,cancelclick:b.onCancelClick,okclick:b.onOkClick,yeardblclick:b.onOkClick,monthdblclick:b.onOkClick}});if(!b.disableAnim){a.el.setStyle("display","none")}a.hide();b.on("beforehide",b.doHideMonthPicker,b)}return a},onOkClick:function(b,e){var d=this,f=e[0],c=e[1],a=new Date(c,f,d.getActive().getDate());if(a.getMonth()!==f){a=Ext.Date.getLastDateOfMonth(new Date(c,f,1))}d.setValue(a);d.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate);this.hideMonthPicker()},showPrevMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(a){var b;a.stopEvent();if(!this.disabled){b=a.getWheelDelta();if(b>0){this.showPrevMonth()}else{if(b<0){this.showNextMonth()}}}},handleDateClick:function(d,a){var c=this,b=c.handler;d.stopEvent();if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.setValue(new Date(a.dateValue));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var c=this,a=c.todayBtn,b=c.handler;if(a&&!a.disabled){c.setValue(Ext.Date.clearTime(new Date()));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}return c},selectedUpdate:function(e){var g=this,f=e.getTime(),d=g.cells,b=g.selectedCls,i,h=d.getCount(),a;g.eventEl.dom.setAttribute("aria-busy","true");a=g.activeCell;if(a){Ext.fly(a).removeCls(b);a.setAttribute("aria-selected",false)}for(i=0;i<h;i++){a=d.item(i);if(g.textNodes[i].dateValue===f){g.activeCell=a.dom;g.eventEl.dom.setAttribute("aria-activedescendant",a.dom.id);a.dom.setAttribute("aria-selected",true);a.addCls(b);g.fireEvent("highlightitem",g,a);break}}g.eventEl.dom.removeAttribute("aria-busy")},fullUpdate:function(y){var C=this,d=C.cells.elements,c=C.textNodes,E=C.disabledCellCls,l=Ext.Date,u=0,B=0,j=+l.clearTime(y,true),x=+l.clearTime(new Date()),s=C.minDate?l.clearTime(C.minDate,true):Number.NEGATIVE_INFINITY,t=C.maxDate?l.clearTime(C.maxDate,true):Number.POSITIVE_INFINITY,A=C.disabledDatesRE,r=C.disabledDatesText,F=C.disabledDays?C.disabledDays.join(""):false,z=C.disabledDaysText,v=C.format,h=l.getDaysInMonth(y),o=l.getFirstDateOfMonth(y),e=o.getDay()-C.startDay,w=l.add(y,l.MONTH,-1),n=C.ariaTitleDateFormat,g,p,a,D,k,m,b,f,q;if(e<0){e+=7}h+=e;g=l.getDaysInMonth(w)-e;p=new Date(w.getFullYear(),w.getMonth(),g,C.initHour);if(C.showToday){D=l.clearTime(new Date());a=(D<s||D>t||(A&&v&&A.test(l.dateFormat(D,v)))||(F&&F.indexOf(D.getDay())!==-1));if(!C.disabled){C.todayBtn.setDisabled(a)}}k=function(H,G){var i=d[H],I=[];if(!i.hasAttribute("id")){i.setAttribute("id",C.id+"-cell-"+H)}q=+l.clearTime(p,true);i.firstChild.dateValue=q;i.setAttribute("aria-label",l.format(p,n));i.removeAttribute("aria-describedby");i.removeAttribute("data-qtip");if(q===x){G+=" "+C.todayCls;I.push(C.id+"-todayText")}if(q===j){C.activeCell=i;C.eventEl.dom.setAttribute("aria-activedescendant",i.id);i.setAttribute("aria-selected",true);G+=" "+C.selectedCls;C.fireEvent("highlightitem",C,i)}else{i.setAttribute("aria-selected",false)}if(q<s){G+=" "+E;I.push(C.id+"-ariaMinText");i.setAttribute("data-qtip",C.minText)}else{if(q>t){G+=" "+E;I.push(C.id+"-ariaMaxText");i.setAttribute("data-qtip",C.maxText)}else{if(F&&F.indexOf(p.getDay())!==-1){i.setAttribute("data-qtip",z);I.push(C.id+"-ariaDisabledDaysText");G+=" "+E}else{if(A&&v){f=l.dateFormat(p,v);if(A.test(f)){i.setAttribute("data-qtip",r.replace("%0",f));I.push(C.id+"-ariaDisabledDatesText");G+=" "+E}}}}}if(I.length){i.setAttribute("aria-describedby",I.join(" "))}i.className=G+" "+C.cellCls};C.eventEl.dom.setAttribute("aria-busy","true");for(;u<C.numDays;++u){if(u<e){m=(++g);b=C.prevCls}else{if(u>=h){m=(++B);b=C.nextCls}else{m=u-e+1;b=C.activeCls}}c[u].innerHTML=m;p.setDate(p.getDate()+1);k(u,b)}C.eventEl.dom.removeAttribute("aria-busy");C.monthBtn.setText(Ext.Date.format(y,C.monthYearFormat))},update:function(a,d){var b=this,c=b.activeDate;if(b.rendered){b.activeDate=a;if(!d&&c&&b.el&&c.getMonth()===a.getMonth()&&c.getFullYear()===a.getFullYear()){b.selectedUpdate(a,c)}else{b.fullUpdate(a,c)}}return b},beforeDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn,a.todayElSpan);delete a.textNodes;delete a.cells.elements}Ext.Component.prototype.beforeDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.call(this);a.monthBtn.finishRender();if(a.showToday){a.todayBtn.finishRender()}},getFocusEl:function(){return this.eventEl},syncDisabled:function(b){var c=this,a=c.keyNav;if(a){a.setDisabled(b);c.prevRepeater.setDisabled(b);c.nextRepeater.setDisabled(b);if(c.todayBtn){c.todayBtn.setDisabled(b)}}}}},0,["datepicker"],["component","box","datepicker"],{component:true,box:true,datepicker:true},["widget.datepicker"],0,[Ext.picker,"Date",Ext,"DatePicker"],0));Ext.define("FBEditor.override.picker.Date",{override:"Ext.picker.Date"});(Ext.cmd.derive("Ext.form.field.Date",Ext.form.field.Picker,{alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",ariaFormat:"M j Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date cannot be selected",minText:"The date in this field must be equal to or after {0}",ariaMinText:"The date must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",ariaMaxText:"The date must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",formatText:"Expected date format: {0}",triggerCls:"x-form-date-trigger",showToday:true,useStrict:undefined,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,valuePublishEvent:["select","blur"],ariaRole:"combobox",initComponent:function(){var d=this,b=Ext.isString,c,a;c=d.minValue;a=d.maxValue;if(b(c)){d.minValue=d.parseDate(c)}if(b(a)){d.maxValue=d.parseDate(a)}d.disabledDatesRE=null;d.initDisabledDays();Ext.form.field.Picker.prototype.initComponent.call(this)},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}Ext.form.field.Picker.prototype.initValue.call(this)},initDisabledDays:function(){if(this.disabledDates){var b=this.disabledDates,a=b.length-1,f="(?:",g,e=b.length,c;for(g=0;g<e;g++){c=b[g];f+=Ext.isDate(c)?"^"+Ext.String.escapeRegex(c.dateFormat(this.format))+"$":c;if(g!==a){f+="|"}}this.disabledDatesRE=new RegExp(f+")")}},setDisabledDates:function(c){var b=this,a=b.picker;b.disabledDates=c;b.initDisabledDays();if(a){a.setDisabledDates(b.disabledDatesRE)}},setDisabledDays:function(b){var a=this.picker;this.disabledDays=b;if(a){a.setDisabledDays(b)}},setMinValue:function(d){var b=this,a=b.picker,c=(Ext.isString(d)?b.parseDate(d):d);b.minValue=c;if(a){a.minText=Ext.String.format(b.minText,b.formatDate(b.minValue));a.setMinDate(c)}},setMaxValue:function(c){var b=this,a=b.picker,d=(Ext.isString(c)?b.parseDate(c):c);b.maxValue=d;if(a){a.maxText=Ext.String.format(b.maxText,b.formatDate(b.maxValue));a.setMaxDate(d)}},getErrors:function(p){p=arguments.length>0?p:this.formatDate(this.processRawValue(this.getRawValue()));var h=this,o=Ext.String.format,j=Ext.Date.clearTime,n=Ext.form.field.Picker.prototype.getErrors.call(this,p),m=h.disabledDays,d=h.disabledDatesRE,l=h.minValue,g=h.maxValue,f=m?m.length:0,e=0,a,b,k,c;if(p===null||p.length<1){return n}a=p;p=h.parseDate(p);if(!p){n.push(o(h.invalidText,a,Ext.Date.unescapeFormat(h.format)));return n}c=p.getTime();if(l&&c<j(l).getTime()){n.push(o(h.minText,h.formatDate(l)))}if(g&&c>j(g).getTime()){n.push(o(h.maxText,h.formatDate(g)))}if(m){k=p.getDay();for(;e<f;e++){if(k===m[e]){n.push(h.disabledDaysText);break}}}b=h.formatDate(p);if(d&&d.test(b)){n.push(o(h.disabledDatesText,b))}return n},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},safeParse:function(f,g){var e=this,c=Ext.Date,a=null,b=e.useStrict,d;if(c.formatContainsHourInfo(g)){a=c.parse(f,g,b)}else{d=c.parse(f+" "+e.initTime,g+" "+e.initTimeFormat,b);if(d){a=c.clearTime(d)}}return a},getSubmitValue:function(){var b=this.submitFormat||this.format,a=this.getValue();return a?Ext.Date.format(a,b):""},parseDate:function(e){if(!e||Ext.isDate(e)){return e}var d=this,g=d.safeParse(e,d.format),b=d.altFormats,f=d.altFormatsArray,c=0,a;if(!g&&b){f=f||b.split("|");a=f.length;for(;c<a&&!g;++c){g=d.safeParse(e,f[c])}}return g},formatDate:function(a,b){return Ext.isDate(a)?Ext.Date.dateFormat(a,b||this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return new Ext.picker.Date({pickerField:a,floating:true,preventRefocus:true,hidden:true,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,ariaDisabledDatesText:a.ariaDisabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,ariaDisabledDaysText:a.ariaDisabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),ariaMinText:b(a.ariaMinText,a.formatDate(a.minValue,a.ariaFormat)),maxText:b(a.maxText,a.formatDate(a.maxValue)),ariaMaxText:b(a.ariaMaxText,a.formatDate(a.maxValue,a.ariaFormat)),listeners:{scope:a,select:a.onSelect,tabout:a.onTabOut},keyNavConfig:{esc:function(){a.inputEl.focus();a.collapse()}}})},onSelect:function(a,c){var b=this;b.setValue(c);b.fireEvent("select",b,c);b.onTabOut(a)},onTabOut:function(a){this.inputEl.focus();this.collapse()},onExpand:function(){var a=this.getValue();this.picker.setValue(Ext.isDate(a)?a:new Date())},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(Ext.isDate(a)){b.setValue(a)}Ext.form.field.Picker.prototype.onBlur.call(this,c)}},0,["datefield"],["component","box","field","textfield","pickerfield","datefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true},["widget.datefield"],0,[Ext.form.field,"Date",Ext.form,"DateField",Ext.form,"Date"],0));Ext.define("FBEditor.override.form.field.Date",{override:"Ext.form.field.Date",panelPicker:null,createPicker:function(){var b=this,a;a=(arguments.callee.$previous||Ext.form.field.Picker.prototype.createPicker).apply(this,arguments);a.fireHierarchyEvent=function(c){};return a},collapseIf:function(d){var b=this,a=b.picker.monthPicker,c;c=a&&a.isVisible()?a.owns(d.target):b.owns(d.target);if(!b.isDestroyed&&!d.within(b.bodyEl,false,true)&&!c){b.collapse()}}});(Ext.cmd.derive("Ext.form.field.Display",Ext.form.field.Base,{alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],fieldSubTpl:['<div id="{id}" data-ref="inputEl" tabindex="-1" role="textbox" aria-readonly="true"',' aria-labelledby="{cmpId}-labelEl" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],ariaRole:undefined,focusable:false,readOnly:true,fieldCls:"x-form-display-field",fieldBodyCls:"x-form-display-field-body",htmlEncode:false,noWrap:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,getValue:function(){return this.value},valueToRaw:function(a){if(a||a===0||a===false){return a}else{return""}},isDirty:function(){return false},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.valueFrom(b,"");a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.getDisplayValue();a.updateLayout()}return b},getDisplayValue:function(){var a=this,b=this.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a.htmlEncode?Ext.util.Format.htmlEncode(b):b}return c},getSubTplData:function(b){var a=Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments);a.value=this.getDisplayValue();return a}},0,["displayfield"],["component","box","field","displayfield"],{component:true,box:true,field:true,displayfield:true},["widget.displayfield"],0,[Ext.form.field,"Display",Ext.form,"DisplayField",Ext.form,"Display"],0));(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:false,tabIndex:undefined,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],keyHandlers:null,ariaEl:"fileInputEl",getAfterMarkup:function(a){return this.getTpl("afterTpl").apply(a)},getTemplateArgs:function(){var b=this,a;a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.inputCls=b.inputCls;a.inputName=b.inputName||b.id;a.tabIndex=b.tabIndex||null;a.role=b.ariaRole;return a},afterRender:function(){var a=this;Ext.button.Button.prototype.afterRender.apply(this,arguments);a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},fireChange:function(a){this.fireEvent("change",this,a,this.fileInputEl.dom.value)},createFileInput:function(b){var c=this,a=c.fileInputEl=c.el.createChild({name:c.inputName,id:!b?c.id+"-fileInputEl":undefined,cls:c.inputCls,tag:"input",type:"file",size:1,role:"button"});a.dom.setAttribute("data-componentid",c.id);a.on({scope:c,change:c.fireChange,focus:c.onFileFocus,blur:c.onFileBlur})},onFileFocus:function(b){var a=this.ownerCt;if(!this.hasFocus){this.onFocus(b)}if(a&&!a.hasFocus){a.onFocus(b)}},onFileBlur:function(b){var a=this.ownerCt;if(this.hasFocus){this.onBlur(b)}if(a&&a.hasFocus){a.onBlur(b)}},reset:function(a){var b=this;if(a){b.fileInputEl.destroy()}b.createFileInput(!a)},restoreInput:function(a){var b=this;b.fileInputEl.destroy();a=Ext.get(a);b.el.appendChild(a);b.fileInputEl=a},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=true},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=false},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:false,inputType:"hidden",isTextInput:false,hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(b,a){return this.isEqualAsString(b,a)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hiddenfield","hidden"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.picker.Time",Ext.view.BoundList,{config:{store:true},statics:{createStore:function(g,c){var b=Ext.Date,d=b.clearTime,f=this.prototype.initDate,h=[],e=d(new Date(f[0],f[1],f[2])),a=b.add(d(new Date(f[0],f[1],f[2])),"mi",(24*60)-1);while(e<=a){h.push({disp:b.dateFormat(e,g),date:e});e=b.add(e,"mi",c)}return new Ext.data.Store({model:Ext.picker.Time.prototype.modelType,data:h})}},increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:"x-timepicker",loadMask:false,initComponent:function(){var c=this,a=Ext.Date,b=a.clearTime,d=c.initDate;c.absMin=b(new Date(d[0],d[1],d[2]));c.absMax=a.add(b(new Date(d[0],d[1],d[2])),"mi",(24*60)-1);c.updateList();Ext.view.BoundList.prototype.initComponent.call(this)},setStore:function(a){this.store=(a===true)?Ext.picker.Time.createStore(this.format,this.increment):a},setMinValue:function(a){this.minValue=a;this.updateList()},setMaxValue:function(a){this.maxValue=a;this.updateList()},normalizeDate:function(a){var b=this.initDate;a.setFullYear(b[0],b[1],b[2]);return a},updateList:function(){var e=this,b=e.normalizeDate(e.minValue||e.absMin),a=e.normalizeDate(e.maxValue||e.absMax),d=e.getStore().getFilters(),c=e.rangeFilter;d.beginUpdate();if(c){d.remove(c)}c=e.rangeFilter=new Ext.util.Filter({filterFn:function(f){var g=f.get("date");return g>=b&&g<=a}});d.add(c);d.endUpdate()}},0,["timepicker"],["component","box","dataview","boundlist","timepicker"],{component:true,box:true,dataview:true,boundlist:true,timepicker:true},["widget.timepicker"],0,[Ext.picker,"Time"],function(){this.prototype.modelType=Ext.define(null,{extend:"Ext.data.Model",fields:["disp","date"]})}));(Ext.cmd.derive("Ext.form.field.Time",Ext.form.field.ComboBox,{alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:"x-form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",formatText:"Expected time format: HH:MM space am/pm",increment:15,pickerMaxHeight:300,selectOnTab:true,snapToIncrement:false,valuePublishEvent:["select","blur"],initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var c=this,b=c.minValue,a=c.maxValue;if(b){c.setMinValue(b)}if(a){c.setMaxValue(a)}c.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+c.displayField+'"])]}<tpl if="xindex < xcount">'+c.delimiter+"</tpl></tpl>",{formatDate:c.formatDate.bind(c)});c.store=Ext.picker.Time.createStore(c.format,c.increment);Ext.form.field.ComboBox.prototype.initComponent.call(this);c.getPicker()},isEqual:function(f,e){var b=Ext.Array.from,d=Ext.Date.isEqual,c,a;f=b(f);e=b(e);a=f.length;if(a!==e.length){return false}for(c=0;c<a;c++){if(!(e[c] instanceof Date)||!(f[c] instanceof Date)||!d(e[c],f[c])){return false}}return true},setMinValue:function(c){var b=this,a=b.picker;b.setLimit(c,true);if(a){a.setMinValue(b.minValue)}},setMaxValue:function(c){var b=this,a=b.picker;b.setLimit(c,false);if(a){a.setMaxValue(b.maxValue)}},setLimit:function(b,f){var a=this,e,c;if(Ext.isString(b)){e=a.parseDate(b)}else{if(Ext.isDate(b)){e=b}}if(e){c=a.getInitDate();c.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}else{c=null}a[f?"minValue":"maxValue"]=c},getInitDate:function(a,b,d){var c=this.initDateParts;return new Date(c[0],c[1],c[2],a||0,b||0,d||0,0)},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},getErrors:function(k){k=arguments.length>0?k:this.getRawValue();var f=this,j=Ext.String.format,h=Ext.form.field.ComboBox.prototype.getErrors.call(this,k),g=f.minValue,e=f.maxValue,c=f.displayTplData,l=f.getRawValue(),b,d,a,m;if(c&&c.length>0){for(b=0,d=c.length;b<d;b++){m=c[b];m=m.date||m.disp;a=f.parseDate(m);if(!a){h.push(j(f.invalidText,m,Ext.Date.unescapeFormat(f.format)));continue}if(g&&a<g){h.push(j(f.minText,f.formatDate(g)))}if(e&&a>e){h.push(j(f.maxText,f.formatDate(e)))}}}else{if(l.length&&!f.parseDate(l)){h.push(j(f.invalidText,l,Ext.Date.unescapeFormat(f.format)))}}return h},formatDate:function(b){var d=[],c,a;b=Ext.Array.from(b);for(c=0,a=b.length;c<a;c++){d.push(Ext.form.field.Date.prototype.formatDate.call(this,b[c]))}return d.join(this.delimiter)},parseDate:function(e){var d=this,g=e,b=d.altFormats,f=d.altFormatsArray,c=0,a;if(e&&!Ext.isDate(e)){g=d.safeParse(e,d.format);if(!g&&b){f=f||b.split("|");a=f.length;for(;c<a&&!g;++c){g=d.safeParse(e,f[c])}}}if(g&&d.snapToIncrement){g=new Date(Ext.Number.snap(g.getTime(),d.increment*60*1000))}return g},safeParse:function(e,f){var d=this,b=Ext.Date,c,a=null;if(b.formatContainsDateInfo(f)){a=b.parse(e,f)}else{c=b.parse(d.initDate+" "+e,d.initDateFormat+" "+f);if(c){a=c}}return a},getSubmitValue:function(){var a=this,c=a.submitFormat||a.format,b=a.getValue();return b?Ext.Date.format(b,c):null},createPicker:function(){var a=this;a.listConfig=Ext.apply({xtype:"timepicker",pickerField:a,cls:undefined,minValue:a.minValue,maxValue:a.maxValue,increment:a.increment,format:a.format,maxHeight:a.pickerMaxHeight},a.listConfig);return Ext.form.field.ComboBox.prototype.createPicker.call(this)},completeEdit:function(){var a=this,b=a.getValue();Ext.form.field.ComboBox.prototype.completeEdit.apply(this,arguments);if(a.validateValue(b)){a.setValue(b)}},findRecordByValue:function(a){if(typeof a==="string"){a=this.parseDate(a)}return Ext.form.field.ComboBox.prototype.findRecordByValue.call(this,a)},rawToValue:function(f){var e=this,c,b,d,a;if(e.multiSelect){b=[];c=Ext.Array.from(f);for(d=0,a=c.length;d<a;d++){b.push(e.parseDate(c[d]))}return b}return e.parseDate(f)},setValue:function(a){var b=this;if(b.creatingPicker){return}b.getPicker();if(Ext.isDate(a)){a=b.getInitDate(a.getHours(),a.getMinutes(),a.getSeconds())}return Ext.form.field.ComboBox.prototype.setValue.call(this,a)},getValue:function(){return this.rawToValue(Ext.form.field.ComboBox.prototype.getValue.apply(this,arguments))}},0,["timefield"],["component","box","field","textfield","pickerfield","combobox","combo","timefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,timefield:true},["widget.timefield"],0,[Ext.form.field,"Time",Ext.form,"TimeField",Ext.form,"Time"],0));(Ext.cmd.derive("Ext.grid.CellContext",Ext.Base,{isCellContext:true,constructor:function(a){this.view=a},setPosition:function(c,a){var b=this;if(arguments.length===1){if(c.length){a=c[0];c=c[1]}else{if(c.isCellContext){return b.setAll(c.view,c.rowIdx,c.colIdx,c.record,c.columnHeader)}else{if(c.view){b.view=c.view}a=c.column;c=c.row}}}b.setRow(c);b.setColumn(a);return b},setAll:function(b,c,d,a,f){var e=this;e.view=b;e.rowIdx=c;e.colIdx=d;e.record=a;e.column=f;return e},setRow:function(c){var a=this,b=a.view.dataSource;if(c!==undefined){if(typeof c==="number"){a.rowIdx=Math.max(Math.min(c,b.getCount()-1),0);a.record=b.getAt(c)}else{if(c.isModel){a.record=c;a.rowIdx=b.indexOf(c)}else{if(c.tagName||c.isElement){a.record=a.view.getRecord(c);a.rowIdx=b.indexOf(a.record)}}}}return a},setColumn:function(a){var c=this,b=c.view.getVisibleColumnManager();if(a!==undefined){if(typeof a==="number"){c.colIdx=a;c.column=b.getHeaderAtIndex(a)}else{if(a.isHeader){c.column=a;c.colIdx=b.indexOf(a)}}}return c},getCell:function(a){return this.view.getCellByPosition(this,a)},getRow:function(b){var a=this.view.getRow(this.record);return b?a:Ext.get(a)},getNode:function(b){var a=this.view.getNode(this.record);return b?a:Ext.get(a)},isEqual:function(a){return(a&&a.isCellContext&&a.record===this.record&&a.column===this.column)},clone:function(){var b=this,a=new b.self(b.view);a.rowIdx=b.rowIdx;a.colIdx=b.colIdx;a.record=b.record;a.column=b.column;return a},privates:{isFirstColumn:function(){var a=this.getCell(true);if(a){return !a.previousSibling}},isLastColumn:function(){var a=this.getCell(true);if(a){return !a.nextSibling}},getLastColumnIndex:function(){var a=this.getRow(true);if(a){return a.lastChild.cellIndex}return -1},navigate:function(c){var b=this,a=b.view.getVisibleColumnManager().getColumns();switch(c){case -1:do{if(!b.colIdx){b.colIdx=a.length-1}else{b.colIdx--}b.setColumn(b.colIdx)}while(!b.getCell(true));break;case 1:do{if(b.colIdx>=a.length){b.colIdx=0}else{b.colIdx++}b.setColumn(b.colIdx)}while(!b.getCell(true));break}}},statics:{compare:function(b,a){return b.rowIdx-a.rowIdx||b.colIdx-a.colIdx}}},1,0,0,0,0,0,[Ext.grid,"CellContext"],0));(Ext.cmd.derive("Ext.grid.ColumnComponentLayout",Ext.layout.component.Auto,{type:"columncomponent",setWidthInDom:true,_paddingReset:{paddingTop:"",paddingBottom:""},columnAutoCls:"x-column-header-text-container-auto",beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.titleContext=a.getEl("titleEl")},beginLayoutCycle:function(c){var b=this,a=b.owner,d=c.widthModel.shrinkWrap;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(d){a.el.setWidth("")}a.textContainerEl[d&&!a.isGroupHeader?"addCls":"removeCls"](b.columnAutoCls);a.titleEl.setStyle(b._paddingReset)},publishInnerHeight:function(d,c){var b=this,a=b.owner,e;if(a.getRootHeaderCt().hiddenHeaders){d.setProp("innerHeight",0);return}if(!d.hasRawContent){if(a.headerWrap&&!d.hasDomProp("width")){b.done=false;return}e=c-d.getBorderInfo().height;d.setProp("innerHeight",e-a.titleEl.getHeight(),false)}},measureContentHeight:function(a){return a.el.dom.offsetHeight},publishInnerWidth:function(a,b){if(!a.hasRawContent){a.setProp("innerWidth",b-a.getBorderInfo().width,false)}},calculateOwnerHeightFromContentHeight:function(d,c){var b=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),a=this.owner;if(!d.hasRawContent){if(!a.headerWrap||d.hasDomProp("width")){return c+a.titleEl.getHeight()+d.getBorderInfo().height}return null}return b},calculateOwnerWidthFromContentWidth:function(f,b){var a=this.owner,e=f.getPaddingInfo().width,d=this.getTriggerOffset(a,f),c;if(a.isGroupHeader){c=b}else{c=Math.max(b,a.textEl.getWidth()+f.titleContext.getPaddingInfo().width)}return c+e+d},getTriggerOffset:function(a,c){var b=0;if(c.widthModel.shrinkWrap&&!a.menuDisabled){if(a.query(">:not([hidden])").length===0){b=a.getTriggerElWidth()}}return b}},0,0,0,0,["layout.columncomponent"],0,[Ext.grid,"ColumnComponentLayout"],0));(Ext.cmd.derive("Ext.layout.container.Fit",Ext.layout.container.Container,{alternateClassName:"Ext.layout.FitLayout",itemCls:"x-fit-item",type:"fit",manageMargins:true,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(b,c){var a=c||this.owner.getSizeModel(),d=(a.width.shrinkWrap?0:1)|(a.height.shrinkWrap?0:2);return this.sizePolicies[d]},beginLayoutCycle:function(j,f){var s=this,t=s.lastHeightModel&&s.lastHeightModel.calculated,g=s.lastWidthModel&&s.lastWidthModel.calculated,n=g||t,k=0,l=0,r,b,o,q,e,a,h,m,p,d;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);if(n&&j.targetContext.el.dom.tagName.toUpperCase()!=="TD"){n=g=t=false}b=j.childItems;e=b.length;for(o=0;o<e;++o){q=b[o];if(f){r=q.target;h=r.minHeight;m=r.minWidth;if(m||h){a=q.marginInfo||q.getMarginInfo();h+=a.height;m+=a.height;if(k<h){k=h}if(l<m){l=m}}}if(n){p=q.el.dom.style;if(t){p.height=""}if(g){p.width=""}}}if(f){j.maxChildMinHeight=k;j.maxChildMinWidth=l}r=j.target;j.overflowX=(!j.widthModel.shrinkWrap&&j.maxChildMinWidth&&r.scrollFlags.x)||d;j.overflowY=(!j.heightModel.shrinkWrap&&j.maxChildMinHeight&&r.scrollFlags.y)||d},calculate:function(f){var n=this,k=f.childItems,d=k.length,c=n.getContainerSize(f),e={length:d,ownerContext:f,targetSize:c},q=f.widthModel.shrinkWrap,l=f.heightModel.shrinkWrap,j=f.overflowX,g=f.overflowY,m,b,o,h,a,p;f.state.info=e;if(j||g){m=n.getScrollbarsNeeded(j&&c.width,g&&c.height,f.maxChildMinWidth,f.maxChildMinHeight);if(m){b=Ext.getScrollbarSize();if(m&1){c.height-=b.height}if(m&2){c.width-=b.width}}}if(d>0){for(h=0;h<d;++h){e.index=h;n.fitItem(k[h],e)}}else{e.contentWidth=e.contentHeight=0}if(l||q){o=f.targetContext.getPaddingInfo();if(q){if(g&&!c.gotHeight){n.done=false}else{a=e.contentWidth+o.width;if(m&2){a+=b.width}if(!f.setContentWidth(a)){n.done=false}}}if(l){if(j&&!c.gotWidth){n.done=false}else{p=e.contentHeight+o.height;if(m&1){p+=b.height}if(!f.setContentHeight(p)){n.done=false}}}}},fitItem:function(b,c){var a=this;if(b.invalid){a.done=false;return}c.margins=b.getMarginInfo();c.needed=c.got=0;a.fitItemWidth(b,c);a.fitItemHeight(b,c);if(c.got!==c.needed){a.done=false}},fitItemWidth:function(c,d){var a,b;if(d.ownerContext.widthModel.shrinkWrap){b=c.getProp("width")+d.margins.width;a=d.contentWidth;if(a===undefined){d.contentWidth=b}else{d.contentWidth=Math.max(a,b)}}else{if(c.widthModel.calculated){++d.needed;if(d.targetSize.gotWidth){++d.got;this.setItemWidth(c,d)}else{return}}}this.positionItemX(c,d)},fitItemHeight:function(c,d){var b,a;if(d.ownerContext.heightModel.shrinkWrap){a=c.getProp("height")+d.margins.height;b=d.contentHeight;if(b===undefined){d.contentHeight=a}else{d.contentHeight=Math.max(b,a)}}else{if(c.heightModel.calculated){++d.needed;if(d.targetSize.gotHeight){++d.got;this.setItemHeight(c,d)}else{return}}}this.positionItemY(c,d)},positionItemX:function(a,c){var b=c.margins;if(c.index||b.left){a.setProp("x",b.left)}if(b.width&&c.ownerContext.widthModel.shrinkWrap){a.setProp("margin-right",b.width)}},positionItemY:function(a,c){var b=c.margins;if(c.index||b.top){a.setProp("y",b.top)}if(b.height&&c.ownerContext.heightModel.shrinkWrap){a.setProp("margin-bottom",b.height)}},setItemHeight:function(a,b){a.setHeight(b.targetSize.height-b.margins.height)},setItemWidth:function(a,b){a.setWidth(b.targetSize.width-b.margins.width)}},0,0,0,0,["layout.fit"],0,[Ext.layout.container,"Fit",Ext.layout,"FitLayout"],0));(Ext.cmd.derive("Ext.panel.Table",Ext.panel.Panel,{extraBaseCls:"x-grid",extraBodyCls:"x-grid-body",actionableModeCls:"x-grid-actionable",noHeaderBordersCls:"x-no-header-borders",defaultBindProperty:"store",layout:"fit",ariaRole:"grid",config:{selection:null,headerBorders:true},publishes:["selection"],twoWayBindable:["selection"],autoLoad:false,variableRowHeight:false,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:false,viewType:null,deferRowRender:false,sortableColumns:true,multiColumnSort:false,enableLocking:false,scrollerOwner:true,enableColumnMove:true,sealedColumns:false,enableColumnResize:true,rowLines:true,bufferedRenderer:true,ownerGrid:null,colLinesCls:"x-grid-with-col-lines",rowLinesCls:"x-grid-with-row-lines",noRowLinesCls:"x-grid-no-row-lines",hiddenHeaderCtCls:"x-grid-header-ct-hidden",hiddenHeaderCls:"x-grid-header-hidden",resizeMarkerCls:"x-grid-resize-marker",emptyCls:"x-grid-empty",focusable:true,constructor:function(c){var d=this,a=c&&c.ownerGrid,b;d.ownerGrid=a||d;d.actionables=a?a.actionables:[];Ext.panel.Panel.prototype.constructor.call(this,c);b=d.store;b.trackStateChanges=true;if(d.autoLoad){if(!b.isEmptyStore){b.load()}}},registerActionable:function(a){Ext.Array.include(this.actionables,a)},initComponent:function(){var g=this,e=g.columns||g.colModel||[],j,h,d,f,k,c,b,a;j=g.store=Ext.data.StoreManager.lookup(g.store||"ext-empty-store");g.enableLocking=g.enableLocking||g.hasLockedColumns(e);if(g.plugins){g.plugins=g.constructPlugins()}if(g.columnLines){g.addBodyCls(g.colLinesCls)}g.addBodyCls(g.rowLines?g.rowLinesCls:g.noRowLinesCls);g.addBodyCls(g.extraBodyCls);if(g.enableLocking){g.self.mixin("lockable",Ext.grid.locking.Lockable);g.injectLockable();a=g.headerCt}else{if(e.isRootHeader){if(g.hideHeaders){e.setHeight(0);e.hiddenHeaders=true}else{e.setScrollable({x:false,y:false})}g.headerCt=a=e;a.grid=g;a.forceFit=!!g.forceFit;a.$initParent=g;g.columnManager=e.columnManager;g.visibleColumnManager=e.visibleColumnManager}else{if(Ext.isArray(e)){e={items:e}}Ext.apply(e,{grid:g,$initParent:g,forceFit:g.forceFit,sortable:g.sortableColumns,enableColumnMove:g.enableColumnMove,enableColumnResize:g.enableColumnResize,columnLines:g.columnLines,sealed:g.sealedColumns,scrollable:g.hideHeaders?undefined:{x:false,y:false}});if(g.hideHeaders){e.height=0;e.hiddenHeaders=true}if(Ext.isDefined(g.enableColumnHide)){e.enableColumnHide=g.enableColumnHide}g.headerCt=a=new Ext.grid.header.Container(e)}}g.columns=c=a.getGridColumns();g.scrollTask=new Ext.util.DelayedTask(g.syncHorizontalScroll,g);g.cls=(g.cls||"")+(" "+g.extraBaseCls);delete g.autoScroll;k=g.plugins&&Ext.Array.findBy(g.plugins,function(i){return i.isBufferedRenderer});if(k){g.bufferedRenderer=k}if(!g.hasView){if(j.isBufferedStore&&!j.getRemoteSort()){for(d=0,f=c.length;d<f;d++){c[d].sortable=false}}if(g.hideHeaders){g.headerCt.addCls(g.hiddenHeaderCtCls);g.addCls(g.hiddenHeaderCls)}g.relayHeaderCtEvents(a);g.features=g.features||[];if(!Ext.isArray(g.features)){g.features=[g.features]}g.dockedItems=[].concat(g.dockedItems||[]);g.dockedItems.unshift(a);g.viewConfig=g.viewConfig||{};h=g.getView();g.items=[h];g.hasView=true;if(!g.hideHeaders){b=h.getScrollable();if(b){a.getScrollable().addPartner(b,"x")}}g.bindStore(j,true);g.mon(h,{viewready:g.onViewReady,refresh:g.onRestoreHorzScroll,scope:g})}g.selModel=g.view.getSelectionModel();if(g.selModel.isRowModel){g.selModel.on({scope:g,lastselectedchanged:g.updateBindSelection,selectionchange:g.updateBindSelection})}g.relayEvents(g.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforeitemkeyup","itemkeyup","beforeitemkeypress","itemkeypress","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","beforecontainerkeyup","beforecontainerkeypress","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","containerkeyup","containerkeypress","selectionchange","beforeselect","select","beforedeselect","deselect"]);Ext.panel.Panel.prototype.initComponent.call(this);if(g.enableLocking){g.afterInjectLockable()}else{delete a.$initParent}g.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},beforeRender:function(){var b=this,c=b.bufferedRenderer,a;if(b.lockable){b.getProtoBody().addCls(b.lockingBodyCls)}else{if(c&&b.getSizeModel().height.auto){b.bufferedRenderer=c=false}if(c&&!c.isBufferedRenderer){c={xclass:"Ext.grid.plugin.BufferedRenderer"};Ext.copy(c,b,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer");b.bufferedRenderer=b.addPlugin(c)}a=b.ariaRenderAttributes||(b.ariaRenderAttributes={});a["aria-readonly"]=!b.isEditable;a["aria-multiselectable"]=b.selModel.selectionMode!=="SINGLE"}Ext.panel.Panel.prototype.beforeRender.apply(this,arguments)},onRender:function(){var b=this,a,c;if(b.isLocked&&b.getSizeModel().width.shrinkWrap){b.shrinkWrapColumns=true;c=b.headerCt.getTableWidth();a=b.gridPanelBorderWidth||(b.gridPanelBorderWidth=b.el.getBorderWidth("lr"));b.width=c+a}Ext.panel.Panel.prototype.onRender.call(this)},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getColumnManager().getColumns()},getVisibleColumns:function(){return this.getVisibleColumnManager().getColumns()},focus:function(){this.getView().focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(c){var b,a,d;if(c.isRootHeader){c=c.items.items}else{if(Ext.isObject(c)){c=c.items}}for(b=0,a=c.length;b<a;b++){d=c[b];if(!d.processed&&d.locked){return true}}},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var b=this,c=Ext.panel.Panel.prototype.getState.call(this),a=b.store.getState();c=b.addPropertyToState(c,"columns",b.headerCt.getColumnsState());if(a){c.storeState=a}return c},applyState:function(e){var d=this,f=e.sort,a=e.storeState,b=d.store,c=e.columns;delete e.columns;Ext.panel.Panel.prototype.applyState.apply(this,arguments);if(c){d.headerCt.applyColumnsState(c,a)}if(f){if(b.getRemoteSort()){b.sort({property:f.property,direction:f.direction,root:f.root},null,false)}else{b.sort(f.property,f.direction)}}else{if(a){b.applyState(a)}}},getStore:function(){return this.store},getView:function(){var c=this,a,d,b;if(!c.view){b=c.viewConfig;a=b.scroll||c.scroll;d=c.scrollable;if(d==null&&b.scrollable==null&&a!==null){if(a===true||a==="both"){d=true}else{if(a===false||a==="none"){d=false}else{if(a==="vertical"){d={x:false,y:true}}else{if(a==="horizontal"){d={x:true,y:false}}}}}}b=Ext.apply({grid:c,ownerGrid:c.ownerGrid,deferInitialRefresh:c.deferRowRender,variableRowHeight:c.variableRowHeight,preserveScrollOnRefresh:true,trackOver:c.trackMouseOver!==false,throttledUpdate:c.throttledUpdate===true,xtype:c.viewType,store:c.store,headerCt:c.headerCt,columnLines:c.columnLines,rowLines:c.rowLines,navigationModel:"grid",features:c.features,panel:c,emptyText:c.emptyText||""},c.viewConfig);if(d!=null){b.scrollable=d;c.scrollable=null}Ext.create(b);if(c.view.emptyText){c.view.emptyText='<div class="'+c.emptyCls+'">'+c.view.emptyText+"</div>"}c.view.getComponentLayout().headerCt=c.headerCt;c.mon(c.view,{uievent:c.processEvent,scope:c});c.headerCt.view=c.view;if(c.hasListeners.viewcreated){c.fireEvent("viewcreated",c,c.view)}}return c.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(a){if(this.view){this.view.setScrollable(a)}return a},getScrollable:function(){return null},processEvent:function(f,h,i,a,g,d,c,j){var b=d.position.column;if(b){return b.processEvent.apply(b,arguments)}},ensureVisible:function(a,b){this.doEnsureVisible(a,b)},scrollByDeltaY:function(b,a){this.getView().scrollBy(0,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,0,a)},afterCollapse:function(){this.saveScrollPos();Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){Ext.panel.Panel.prototype.afterExpand.apply(this,arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){var a=this.view.getScrollable(),b;if(a&&a.isTouchScroller){b=a.getSize();if(b){a.setSize({x:this.headerCt.getTableWidth(),y:b.y})}}},onHeaderMove:function(e,f,a,b,d){var c=this;if(c.optimizedColumnMove===false){c.view.refreshView()}else{c.view.moveColumn(b,d,a)}c.delayScroll()},onHeaderHide:function(b,c){var a=this.view;if(!b.childHideCount&&a.refreshCounter){a.refreshView()}},onHeaderShow:function(b,c){var a=this.view;if(a.refreshCounter){a.refreshView()}},onHeadersChanged:function(b,c){var a=this;if(a.rendered&&!a.reconfiguring){a.view.refreshView();a.delayScroll()}},delayScroll:function(){var a=this.view;if(a){this.scrollTask.delay(10,null,null,[a])}},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var b=this,a=b.scrollXPos;if(a){b.syncHorizontalScroll(b,true)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up("[scrollerOwner]")}return a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},updateHeaderBorders:function(a){this[a?"removeCls":"addCls"](this.noHeaderBordersCls)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var a=this.getScrollerOwner().query("tableview");return a[a.length-1]},syncHorizontalScroll:function(e,c){var d=this,a=d.view.getScrollX(),b;c=c===true;if(d.rendered&&(c||a!==d.scrollXPos)){if(c){b=d.getScrollTarget();b.setScrollX(a)}d.headerCt.setScrollX(a);d.scrollXPos=a}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(b,c){var d=this,a=d.getView();if(b){d.store=b;if(a.store!==b){a.bindStore(b,false)}d.mon(b,{load:d.onStoreLoad,scope:d});d.storeRelayers=d.relayEvents(b,["filterchange","groupchange"])}else{d.unbindStore()}},unbindStore:function(){var c=this,b=c.store,a;if(b){b.trackStateChanges=false;c.store=null;c.mun(b,{load:c.onStoreLoad,scope:c});Ext.destroy(c.storeRelayers);a=c.view;if(a.store){a.bindStore(null)}}},setColumns:function(a){if(a.length||this.getColumnManager().getColumns().length){this.reconfigure(undefined,a)}},setStore:function(a){this.reconfigure(a);if(this.autoLoad&&!a.isEmptyStore&&!(a.loading||a.isLoaded())){a.load()}},reconfigure:function(j,c){var g=this,a=g.store,b=g.headerCt,i=g.lockable,e=b?b.items.getRange():g.columns,h=g.getView(),d,f;if(arguments.length===1&&Ext.isArray(j)){c=j;j=null}if(c){c=Ext.Array.slice(c)}g.reconfiguring=true;if(j){j=Ext.StoreManager.lookup(j)}g.fireEvent("beforereconfigure",g,j,c,a,e);Ext.suspendLayouts();if(i){g.reconfigureLockable(j,c)}else{d=h.blockRefresh;h.blockRefresh=true;if(j&&j!==a){g.unbindStore();g.bindStore(j)}if(c){delete g.scrollXPos;b.removeAll();b.add(c)}h.blockRefresh=d;f=h.refreshCounter}Ext.resumeLayouts(true);if(i){g.afterReconfigureLockable()}else{if(h.refreshCounter===f){h.refreshView()}}g.fireEvent("reconfigure",g,j,c,a,e);delete g.reconfiguring},beforeDestroy:function(){var b=this,a=b.scrollTask;if(a){a.cancel();b.scrollTask=null}Ext.destroy(b.focusEnterLeaveListeners);Ext.panel.Panel.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.lockable){a.destroyLockable()}a.unbindStore();Ext.panel.Panel.prototype.onDestroy.call(this);a.columns=a.storeRelayers=a.columnManager=a.visibleColumnManager=null},destroy:function(){var a=this;Ext.panel.Panel.prototype.destroy.call(this);if(a.destroyed){a.view=a.selModel=a.headerCt=null}},privates:{initFocusableElement:function(){},doEnsureVisible:function(e,n){if(this.lockable){return this.ensureLockedVisible(e,n)}if(typeof e!=="number"&&!e.isEntity){e=this.store.getById(e)}var f=this,h=f.getView(),d=h.getNode(e),k,l,a,b,i,m,g,c,j;if(n){k=n.callback;l=n.scope;a=n.animate;b=n.highlight;i=n.select;m=n.focus;c=n.column}if(f.deferredEnsureVisible){f.deferredEnsureVisible.destroy()}if(!h.componentLayoutCounter){f.deferredEnsureVisible=h.on({resize:f.doEnsureVisible,args:Ext.Array.slice(arguments),scope:f,single:true,destroyable:true});return}if(typeof c==="number"){c=f.ownerGrid.getVisibleColumnManager().getColumns()[c]}if(d){g=h.getScrollable();if(c){j=Ext.fly(d).selectNode(c.getCellSelector())}if(g){g.scrollIntoView(j||d,!!c,a,b)}if(!e.isEntity){e=h.getRecord(d)}if(i){h.getSelectionModel().select(e)}if(m){h.getNavigationModel().setPosition(e,0)}Ext.callback(k,l||f,[true,e,d])}else{if(h.bufferedRenderer){h.bufferedRenderer.scrollTo(e,{animate:a,highlight:b,select:i,focus:m,column:c,callback:function(q,o,p){Ext.callback(k,l||f,[true,o,p])}})}else{Ext.callback(k,l||f,[false,null])}}},getFocusEl:function(){return this.getView().getFocusEl()},setActionableMode:function(b,a){var c=this.ownerGrid;if(!c.destroying&&c.view.setActionableMode(b,a)!==false){c.fireEvent("actionablemodechange",b);c[b?"addCls":"removeCls"](c.actionableModeCls);return true}}}},1,["tablepanel"],["component","box","container","panel","tablepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true},["widget.tablepanel"],0,[Ext.panel,"Table"],0));Ext.define("Ext.theme.neptune.panel.Table",{override:"Ext.panel.Table",lockableBodyBorder:true,initComponent:function(){var a=this;(arguments.callee.$previous||Ext.panel.Panel.prototype.initComponent).call(this);if(!a.hasOwnProperty("bodyBorder")&&!a.hideHeaders&&(a.lockableBodyBorder||!a.lockable)){a.bodyBorder=true}}});Ext.define("FBEditor.override.panel.Table",{override:"Ext.panel.Table",handleFocusEnter:function(c){var f=this,g=f.getView(),a,h=g.getNavigationModel(),i,b,j=g.bufferedRenderer,d;if(!f.containsFocus){i=b=g.getLastFocused();if(!b){a=g.isLockingView?(g.lockedGrid.isVisible()?g.lockedView:g.normalView):g;d=g.dataSource.getAt(j?j.getFirstVisibleRowIndex():0);if(d&&!d.isNonData){b=new Ext.grid.CellContext(a).setPosition({row:d,column:0})}}if(!b){c.stopEvent();c.getTarget().blur();return}h.setPosition(b,null,c,null,!!i);f.containsFocus=!!h.getPosition()}if(f.containsFocus){this.getView().el.dom.setAttribute("tabindex","-1")}}});(Ext.cmd.derive("Ext.grid.ColumnLayout",Ext.layout.container.HBox,{type:"gridcolumn",firstHeaderCls:"x-column-header-first",lastHeaderCls:"x-column-header-last",initLayout:function(){Ext.layout.container.HBox.prototype.initLayout.call(this);if(this.scrollbarWidth===undefined){this.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width}},beginLayout:function(c){var h=this,a=h.owner,d=h.firstHeaderCls,k=h.lastHeaderCls,b=[d,k],g=h.getVisibleItems(),f=g.length,e,j;Ext.layout.container.HBox.prototype.beginLayout.call(this,c);for(e=0;e<f;e++){j=g[e];if(f===1){j.addCls(b)}else{if(e===0){j.addCls(d);j.removeCls(k)}else{if(e===f-1){j.removeCls(d);j.addCls(k)}else{j.removeCls(b)}}}}h.scrollbarWidth=0;if(a.isRootHeader){h.determineScrollbarWidth(c)}if(!h.scrollbarWidth){c.manageScrollbar=false}},moveItemBefore:function(b,c){var a=b.ownerCt;if(b!==c&&a){a.remove(b,false)}return Ext.layout.container.HBox.prototype.moveItemBefore.call(this,b,c)},determineScrollbarWidth:function(g){var f=this,a=f.owner,e=a.grid,c=a.reserveScrollbar===false,b=e.reserveScrollbar&&!c,d=!b&&!c&&e.view.scrollFlags.y;g.manageScrollbar=d;if(!e.ownerGrid.collapsed&&(b||d)){delete f.scrollbarWidth}},calculate:function(d){var o=this,a=o.owner.grid,k=d.viewContext,b=d.state,c=d.context,j,p,l,g,n,m,f,h,e;Ext.layout.container.HBox.prototype.calculate.call(this,d);if(a&&b.parallelDone){j=k.lockingPartnerContext;p=a.ownerGrid;if(p.forceFit&&!b.reflexed){if(o.convertWidthsToFlexes(d)){o.cacheFlexes(d);o.done=false;d.invalidate({state:{reflexed:true,scrollbarAdjustment:o.getScrollbarAdjustment(d)}});return}}if((l=b.columnsChanged)===undefined){g=d.target.getVisibleGridColumns();l=false;for(m=0,n=g.length;m<n;m++){f=c.getCmp(g[m]);if(!f.lastBox||f.props.width!==f.lastBox.width){(l||(l=[]))[m]=f}}b.columnsChanged=l;d.setProp("columnsChanged",l)}if(d.manageScrollbar){h=o.getScrollbarAdjustment(d);if(h){e=k.getProp("viewOverflowY");if(e===undefined){o.done=false;return}if(!e){if(j){j.invalidate();j.headerContext.invalidate()}k.invalidate();d.invalidate({state:{scrollbarAdjustment:0}})}}}}},finishedLayout:function(a){Ext.layout.container.HBox.prototype.finishedLayout.call(this,a);if(this.owner.ariaRole==="rowgroup"){this.innerCt.dom.setAttribute("role","row")}a.props.columnsChanged=null},convertWidthsToFlexes:function(a){var f=this,d=0,g=f.sizeModels.calculated,c,e,b,j,h;c=a.childItems;e=c.length;for(b=0;b<e;b++){j=c[b];h=j.target;d+=j.props.width;if(!(h.fixed||h.resizable===false)){h.flex=a.childItems[b].flex=j.props.width;h.width=null;j.widthModel=g}}return d!==a.props.width},getScrollbarAdjustment:function(d){var b=this,c=d.state,a=b.owner.grid,e=c.scrollbarAdjustment;if(e===undefined){e=0;if(a.reserveScrollbar||(d.manageScrollbar&&!a.ownerGrid.layout.ownerContext.heightModel.shrinkWrap)){e=b.scrollbarWidth}c.scrollbarAdjustment=e}return e},getContainerSize:function(b){var e=this,f,h,g,c,d,a,i,j;if(e.owner.isRootHeader){j=Ext.layout.container.HBox.prototype.getContainerSize.call(this,b);if(j.gotWidth){j.width-=e.getScrollbarAdjustment(b)}}else{g=b.paddingContext.getPaddingInfo();f=h=0;if(!b.widthModel.shrinkWrap){++h;a=b.getProp("innerWidth");c=(typeof a==="number");if(c){++f;a-=g.width;if(a<0){a=0}}}if(!b.heightModel.shrinkWrap){++h;i=b.getProp("innerHeight");d=(typeof i==="number");if(d){++f;i-=g.height;if(i<0){i=0}}}return{width:a,height:i,needed:h,got:f,gotAll:f===h,gotWidth:c,gotHeight:d}}return j},publishInnerCtSize:function(e){var d=this,a=d.owner,b=e.peek("contentWidth"),c=0;if(b!=null&&a.isRootHeader){c=-e.state.scrollbarAdjustment}return Ext.layout.container.HBox.prototype.publishInnerCtSize.call(this,e,c)}},0,0,0,0,["layout.gridcolumn"],0,[Ext.grid,"ColumnLayout"],0));(Ext.cmd.derive("Ext.grid.ColumnManager",Ext.Base,{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(b,c,a){this.headerCt=c;if(a){this.secondHeaderCt=a}this.visibleOnly=!!b},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},hasVariableRowHeight:function(){var d=this,c=d.getColumns(),a=c.length,b;if(d.variableRowHeight==null){d.variableRowHeight=false;for(b=0;!d.variableRowHeight&&b<a;b++){d.variableRowHeight=!!c[b].variableRowHeight}}return d.variableRowHeight},getHeaderIndex:function(a){if(a.isGroupHeader){a=this.getHeaderColumns(a)[0]}return Ext.Array.indexOf(this.getColumns(),a)},getHeaderAtIndex:function(b){var c=this.getColumns(),a=c[b];return a||null},getPreviousSibling:function(c){var b=this.getHeaderIndex(c),a=null;if(b>0){a=this.getColumns()[b-1]}return a},getNextSibling:function(c){var b=this.getHeaderIndex(c),a;if(b!==-1){a=this.getColumns()[b+1]}return a||null},getFirst:function(){var a=this.getColumns();return a.length>0?a[0]:null},getLast:function(){var b=this.getColumns(),a=b.length;return a>0?b[a-1]:null},getHeaderByDataIndex:function(d){var c=this.getColumns(),a=c.length,b,e;for(b=0;b<a;++b){e=c[b];if(e.dataIndex===d){return e}}return null},getHeaderById:function(e){var c=this.getColumns(),a=c.length,b,d;for(b=0;b<a;++b){d=c[b];if(d.getItemId()===e){return d}}return null},getVisibleHeaderClosestToIndex:function(b){var a=this.getHeaderAtIndex(b);if(a&&a.hidden){a=a.next(":not([hidden])")||a.prev(":not([hidden])")}return a},cacheColumns:function(){var b=this.getHeaderColumns(this.headerCt),a=this.secondHeaderCt;if(a){b=b.concat(this.getHeaderColumns(a))}this.columns=b},getHeaderColumns:function(b){var a=this.visibleOnly?b.getVisibleGridColumns():b.getGridColumns();return Ext.Array.clone(a)},invalidate:function(){var a=this.rootColumns;this.columns=this.variableRowHeight=null;if(a){a.invalidate()}},destroy:function(){this.columns=this.rootColumns=null;this.callParent()}},1,0,0,0,0,0,[Ext.grid,"ColumnManager",Ext.grid,"ColumnModel"],function(){this.createAlias("indexOf","getHeaderIndex")}));(Ext.cmd.derive("Ext.grid.NavigationModel",Ext.view.NavigationModel,{focusCls:"x-grid-item-focused",getViewListeners:function(){var a=this;return{focusmove:{element:"el",fn:a.onFocusMove},containermousedown:a.onContainerMouseDown,cellmousedown:a.onCellMouseDown,cellclick:a.onCellClick,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemClick,scope:a}},initKeyNav:function(a){var b=this;if(!b.keyNav){b.keyNav=[];b.position=new Ext.grid.CellContext(a)}b.keyNav.push(new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:b.processViewEvent,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,space:b.onKeySpace,enter:b.onKeyEnter,esc:b.onKeyEsc,113:b.onKeyF2,tab:b.onKeyTab,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b}))},addKeyBindings:function(c){var a=this.keyNav.length,b;for(b=0;b<a;b++){this.keyNav[b].addBindings(c)}},enable:function(){var a=this.keyNav.length,b;for(b=0;b<a;b++){this.keyNav[b].enable()}this.disabled=false},disable:function(){var a=this.keyNav.length,b;for(b=0;b<a;b++){this.keyNav[b].disable()}this.disabled=true},processViewEvent:function(b,a,f,c,e){var d=e.getKey();if(b.actionableMode){this.map.ignoreInputFields=false;if(d===e.TAB||d===e.ESC||d===e.F2){return e}}else{this.map.ignoreInputFields=true;return d===e.TAB?null:e}},onCellMouseDown:function(f,g,e,d,i,c,b){var a=Ext.Component.fromElement(b.target,g),h;if(f.actionableMode&&(b.getTarget(null,null,true).isTabbable()||((h=Ext.ComponentManager.getActiveComponent())&&h.owns(b)))){return}if(b.pointerType!=="touch"){this.setPosition(b.position,null,b)}if(a&&a.isFocusable&&a.isFocusable()){f.setActionableMode(true,b.position);a.focus()}},onCellClick:function(f,g,e,c,j,b,h){var d=this,a=Ext.Component.fromElement(h.target,g),i=a&&a.isFocusable&&a.isFocusable();if(f.actionableMode){if(!h.position.isEqual(f.actionPosition)){if(!i){d.setPosition(h.position,null,h)}}d.fireEvent("navigate",{view:f,navigationModel:d,keyEvent:h,previousPosition:d.previousPosition,previousRecordIndex:d.previousRecordIndex,previousRecord:d.previousRecord,previousItem:d.previousItem,previousCell:d.previousCell,previousColumnIndex:d.previousColumnIndex,previousColumn:d.previousColumn,position:h.position,recordIndex:h.position.rowIdx,record:h.position.record,item:h.item,cell:h.position.cellElement,columnIndex:h.position.colIdx,column:h.position.column})}else{if(d.position.isEqual(h.position)||i){d.fireNavigateEvent(h)}else{d.setPosition(h.position,null,h)}}},onFocusMove:function(g){var a=g.target,c=Ext.Component.fromElement(g.delegatedTarget,null,"tableview"),a=g.target,b,f,d;if(c&&Ext.fly(a).is(c.cellSelector)){if(c.actionableModeTabbing){return}c.ownerGrid.setActionableMode(false);b=c.getRecord(a);f=c.getHeaderByCell(a);if(b&&f){d=new Ext.grid.CellContext(c).setPosition(b,f);if(!d.isEqual(this.position)){this.setPosition(d)}}}},onItemMouseDown:function(b,a,f,d,c){var e=this;if(!c.position.cellElement&&(c.pointerType!=="touch")){e.getClosestCell(c);e.setPosition(c.position,null,c)}},onItemClick:function(c,b,e,d,a){if(!a.position.cellElement){this.getClosestCell(a);if(a.pointerType==="touch"){this.setPosition(a.position,null,a)}this.fireNavigateEvent(a)}},getClosestCell:function(a){var g=a.position,c=g.cellElement,k,e,h,f,d,j;if(!c){k=a.getX();e=g.view.getVisibleColumnManager().getColumns();h=e.length;for(f=0;f<h;f++){d=e[f];j=e[f].getBox();if(k>=j.left&&k<j.right){g.setColumn(e[f]);g.rowElement=g.getRow(true);g.cellElement=g.getCell(true);return}}}},deferSetPosition:function(c,b,d,f,a,g){var e=this.view.getFocusTask();e.delay(c,this.setPosition,this,[b,d,f,a,g]);return e},setPosition:function(f,l,m,q,h){var n=this,p,j,i,a,c,b,d,k,g,o=f==null&&l==null,e=n.record==null&&n.recordIndex==null&&n.item==null;if(f&&f.isCellContext){p=f.view}else{if(m&&m.view){p=m.view}else{if(n.lastFocused){p=n.lastFocused.view}else{p=n.view}}}p.getFocusTask().cancel();if(p.destroyed||!p.refreshCounter||!p.ownerCt||o&&e||!p.all.getCount()){return}i=p.getSelectionModel();a=p.dataSource;c=p.getVisibleColumnManager();if(f&&f.isCellContext){k=f.record;b=f.rowIdx;d=f.colIdx;g=f.column;if(a.indexOf(k)===-1){j=p.getScrollable();n.recordIndex=-1;if(j.getPosition().y>=j.getMaxPosition().y-p.all.last(true).offsetHeight){f.rowIdx--}b=Math.min(f.rowIdx,a.getCount()-1);d=Math.min(d,c.getColumns().length);k=a.getAt(b);g=c.getColumns()[d]}}else{if(o){k=b=null}else{if(l==null){l=n.lastFocused?n.lastFocused.column:0}if(typeof f==="number"){b=Math.max(Math.min(f,a.getCount()-1),0);k=a.getAt(f)}else{if(f.isEntity){k=f;b=a.indexOf(k)}else{if(f.tagName){k=p.getRecord(f);b=a.indexOf(k);if(b===-1){k=null}}else{if(e){return}o=true;k=b=null}}}}if(k){if(b===-1){n.recordIndex=-1;k=a.getAt(0);b=0;l=null}if(l==null){if(!(g=n.column)){d=0;g=c.getColumns()[0]}}else{if(typeof l==="number"){g=c.getColumns()[l];d=l}else{g=l;d=c.indexOf(l)}}}else{o=true;g=d=null}}if(b===n.recordIndex&&d===n.columnIndex&&p===n.position.view){return n.focusPosition(n.position)}if(n.cell){n.cell.removeCls(n.focusCls)}n.previousRecordIndex=n.recordIndex;n.previousRecord=n.record;n.previousItem=n.item;n.previousCell=n.cell;n.previousColumn=n.column;n.previousColumnIndex=n.columnIndex;n.previousPosition=n.position.clone();n.selectionStart=i.selectionStart;n.position.setAll(p,n.recordIndex=b,n.columnIndex=d,n.record=k,n.column=g);if(o){n.item=n.cell=null}else{n.focusPosition(n.position,h)}if(!q){i.fireEvent("focuschange",i,n.previousRecord,n.record);p.fireEvent("rowfocus",n.record,n.item,n.recordIndex);p.fireEvent("cellfocus",n.record,n.cell,n.position)}if(m&&!h&&n.cell!==n.previousCell){n.fireNavigateEvent(m)}},focusPosition:function(a){var c=this,b,d;c.item=c.cell=null;if(a&&a.record&&a.column){b=a.view;if(a.rowElement){d=c.item=a.rowElement}else{d=b.getRowByRecord(a.record)}if(d){c.cell=a.cellElement||Ext.fly(d).down(a.column.getCellSelector(),true);if(c.cell){c.cell=new Ext.dom.Fly(c.cell);b.lastFocused=c.lastFocused=c.position.clone();c.focusItem(c.cell);b.focusEl=c.cell}else{c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}}else{d=b.dataSource.indexOf(a.record);c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null;if(d!==-1&&b.bufferedRenderer){c.lastKeyEvent=null;b.bufferedRenderer.scrollTo(d,false,c.afterBufferedScrollTo,c)}}}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getCell:function(){return this.cell},getPosition:function(c){var e=this,a=e.position,d,b,f;if(a.record&&a.column){if(c){return a}b=a.view;f=b.dataSource;d=f.indexOf(a.record);if(d===-1){d=a.rowIdx;if(!(a.record=f.getAt(d))){d=-1}}if(d===-1||b.getVisibleColumnManager().indexOf(a.column)===-1){a.setAll();e.record=e.column=e.recordIndex=e.columnIndex=null}else{return a}}return null},getLastFocused:function(){var c=this,a,b=c.lastFocused;if(b&&b.record&&b.column){a=b.view;if(a.dataSource.indexOf(b.record)!==-1&&a.getVisibleColumnManager().indexOf(b.column)!==-1){return b}}},onKeyTab:function(e){var b=!e.shiftKey,c=e.position.clone(),f=c.view,k=e.position.cellElement,g=Ext.fly(k).findTabbableElements(),h,j=f.ownerGrid.actionables,d=j.length,a;e.preventDefault();h=g[Ext.Array.indexOf(g,e.target)+(b?1:-1)];while(!h&&(k=k[b?"nextSibling":"previousSibling"])){c.setColumn(f.getHeaderByCell(k));for(a=0;a<d;a++){j[a].activateCell(c)}if((g=Ext.fly(k).findTabbableElements()).length){h=g[b?0:g.length-1]}}if(h){this.actionPosition=c.view.actionPosition=c;Ext.fly(h).focus();return}if(Ext.isIE){f.el.focus()}f.onRowExit(e.item,e.item[b?"nextSibling":"previousSibling"],b)},onKeyUp:function(b){var a=b.view.walkRecs(b.record,-1),c=this.getPosition();if(a){c.setRow(a);if(!c.getCell(true)){c.navigate(-1)}this.setPosition(c,null,b)}},onKeyDown:function(b){var a=b.record.isExpandingOrCollapsing?null:b.view.walkRecs(b.record,1),c=this.getPosition();if(a){c.setRow(a);if(!c.getCell(true)){c.navigate(-1)}this.setPosition(c,null,b)}},onKeyRight:function(b){var a=this.move("right",b);if(a){this.setPosition(a,null,b)}},onKeyLeft:function(b){var a=this.move("left",b);if(a){this.setPosition(a,null,b)}},onKeyEnter:function(b){var a=["cellclick",b.view,b.position.cellElement,b.position.colIdx,b.record,b.position.rowElement,b.recordIndex,b],c=b.position.getCell();if(c){if(!c.query('[tabIndex="-1"]').length){b.stopEvent();b.view.fireEvent.apply(b.view,a);a[0]="celldblclick";b.view.fireEvent.apply(b.view,a)}if(!this.view.actionableMode){this.view.ownerGrid.setActionableMode(true,this.getPosition())}}},onKeyF2:function(b){var a=this.view.ownerGrid,c=a.actionableMode;a.setActionableMode(!c,c?null:this.getPosition())},onKeyEsc:function(a){this.view.ownerGrid.setActionableMode(false)},move:function(b,d){var c=this,a=c.getPosition();if(a&&a.record){return a.view.walkCells(a,b,d.shiftKey&&(b==="right"||b==="left")?c.vetoRowChange:null,c)}},vetoRowChange:function(a){return this.getPosition().record===a.record},onKeyPageDown:function(e){var d=this,a=e.view,f=d.getRowsVisible(),c,b;if(f){if(a.bufferedRenderer){c=Math.min(e.recordIndex+f,a.dataSource.getCount()-1);d.lastKeyEvent=e;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(e.record,f);d.setPosition(b,null,e)}}},onKeyPageUp:function(e){var d=this,a=e.view,f=d.getRowsVisible(),c,b;if(f){if(a.bufferedRenderer){c=Math.max(e.recordIndex-f,0);d.lastKeyEvent=e;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(e.record,-f);d.setPosition(b,null,e)}}},onKeyHome:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(0,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,0,c)}},afterBufferedScrollTo:function(b,a){this.setPosition(a,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(a.store.getCount()-1,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,a.dataSource.getCount()-1-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,c.view.getVisibleColumnManager().getColumns().length-1,c)}},getRowsVisible:function(){var e=false,a=this.view,d=a.all.first(),b,c;if(d){b=d.getHeight();c=a.el.getHeight();e=Math.floor(c/b)}return e},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{view:a.position.view,navigationModel:a,keyEvent:b||new Ext.event.Event({}),previousPosition:a.previousPosition,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,previousCell:a.previousCell,previousColumnIndex:a.previousColumnIndex,previousColumn:a.previousColumn,position:a.position,recordIndex:a.recordIndex,record:a.record,selectionStart:a.selectionStart,item:a.item,cell:a.cell,columnIndex:a.columnIndex,column:a.column})}},0,0,0,0,["view.navigation.grid"],0,[Ext.grid,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.TableLayout",Ext.layout.component.Auto,{type:"tableview",beginLayout:function(f){var d=this,a=d.owner,e=a.ownerGrid,c=a.lockingPartner,b=f.context;f.doSyncRowHeights=c&&c.grid.isVisible()&&e.syncRowHeight;if(!d.columnFlusherId){d.columnFlusherId=d.id+"-columns";d.rowHeightFlusherId=d.id+"-rows"}if(d.owner.bufferedRenderer){d.owner.bufferedRenderer.beforeTableLayout(f)}Ext.layout.component.Auto.prototype.beginLayout.call(this,f);if(f.doSyncRowHeights){if(!f.lockingPartnerContext){(f.lockingPartnerContext=b.getCmp(c)).lockingPartnerContext=f}f.rowHeightSynchronizer=d.owner.syncRowHeightBegin()}(f.headerContext=b.getCmp(d.headerCt)).viewContext=f},beginLayoutCycle:function(b,a){Ext.layout.component.Auto.prototype.beginLayoutCycle.call(this,b,a);if(b.syncRowHeights){b.target.syncRowHeightClear(b.rowHeightSynchronizer);b.syncRowHeights=false}},calculate:function(e){var m=this,b=e.context,g=e.lockingPartnerContext,d=e.headerContext,j=e.ownerCtContext,c=m.owner,i=d.getProp("columnsChanged"),a=e.state,n,f,p,o,k=c.body.dom,q,l,h;if(!c.all.getCount()&&(!k||!c.body.child("table"))){e.setProp("viewOverflowY",false);Ext.layout.component.Auto.prototype.calculate.call(this,e);return}if(i===undefined){m.done=false;return}if(i){if(!(n=a.columnFlusher)){b.queueFlush(a.columnFlusher=n={ownerContext:e,columnsChanged:i,layout:m,id:m.columnFlusherId,flush:m.flushColumnWidths})}if(!n.flushed){m.done=false;return}}if(e.doSyncRowHeights){if(!(o=a.rowHeightFlusher)){if(!(p=a.rowHeights)){a.rowHeights=p=e.rowHeightSynchronizer;m.owner.syncRowHeightMeasure(p);e.setProp("rowHeights",p)}if(!(f=g.getProp("rowHeights"))){m.done=false;return}b.queueFlush(a.rowHeightFlusher=o={ownerContext:e,synchronizer:p,otherSynchronizer:f,layout:m,id:m.rowHeightFlusherId,flush:m.flushRowHeights})}if(!o.flushed){m.done=false;return}}Ext.layout.component.Auto.prototype.calculate.call(this,e);if(!e.heightModel.shrinkWrap){h=false;if(!j.heightModel.shrinkWrap){l=j.target.layout.getContainerSize(j);if(!l.gotHeight){m.done=false;return}q=k.offsetHeight;h=q>l.height}e.setProp("viewOverflowY",h)}},measureContentHeight:function(d){var a=this.owner,c=a.body.dom,b=a.emptyEl,e=0;if(b){e+=b.offsetHeight}if(c){e+=c.offsetHeight}if(d.headerContext.state.boxPlan.tooNarrow){e+=Ext.getScrollbarSize().height}return e},flushColumnWidths:function(){var k=this,j=k.layout,b=k.ownerContext,d=k.columnsChanged,a=b.target,h=d.length,c,f,e,g;if(b.state.columnFlusher!==k){return}for(f=0;f<h;f++){if(!(c=d[f])){continue}e=c.props.width;a.body.select(a.getColumnSizerSelector(c.target)).setWidth(e);g=c.lastBox;if(g){g.width=e}}k.flushed=true;if(!j.pending){b.context.queueLayout(j)}},flushRowHeights:function(){var a=this,b=a.layout,c=a.ownerContext;if(c.state.rowHeightFlusher!==a){return}c.target.syncRowHeightFinish(a.synchronizer,a.otherSynchronizer);a.flushed=true;c.syncRowHeights=true;if(!b.pending){c.context.queueLayout(b)}},finishedLayout:function(b){var a=this,c=Ext.fly(a.owner.getNodeContainer());Ext.layout.component.Auto.prototype.finishedLayout.call(this,b);if(c){c.setWidth(b.headerContext.props.contentWidth)}if(a.owner.bufferedRenderer){a.owner.bufferedRenderer.afterTableLayout(b)}}},0,0,0,0,["layout.tableview"],0,[Ext.view,"TableLayout"],0));(Ext.cmd.derive("Ext.grid.locking.RowSynchronizer",Ext.Base,{constructor:function(a,b){var c=this,d;c.view=a;c.rowEl=b;c.els={};c.add("data",a.rowSelector);for(d=a.rowTpl;d;d=d.nextTpl){if(d.beginRowSync){d.beginRowSync(c)}}},add:function(b,a){var c=Ext.fly(this.rowEl).down(a,true);if(c){this.els[b]={el:c}}},finish:function(f){var g=this,c=g.els,i=f.els,e,h=0,b=0,j,a,d;for(a in c){e=i[a];d=e?e.height:0;j=d-c[a].height;if(j>0){h+=j;Ext.fly(c[a].el).setHeight(d)}else{b-=j}}d=f.rowHeight+b;if(Ext.isIE9&&g.view.ownerGrid.rowLines){d--}if(g.rowHeight+h<d){Ext.fly(g.rowEl).setHeight(d)}},measure:function(){var c=this,b=c.els,a;c.rowHeight=c.rowEl.offsetHeight;for(a in b){b[a].height=b[a].el.offsetHeight}},reset:function(){var b=this.els,a;this.rowEl.style.height="";for(a in b){b[a].el.style.height=""}}},1,0,0,0,0,0,[Ext.grid.locking,"RowSynchronizer"],0));(Ext.cmd.derive("Ext.view.NodeCache",Ext.Base,{statics:{range:document.createRange&&document.createRange()},constructor:function(a){this.view=a;this.clear();this.el=new Ext.dom.Fly()},destroy:function(){var a=this;if(!a.destroyed){a.el.destroy();a.el=a.view=null;a.destroyed=true}a.callParent()},clear:function(e){var c=this,d=c.elements,a=c.statics().range,b;if(c.count&&e){if(a){a.setStartBefore(d[c.startIndex]);a.setEndAfter(d[c.endIndex]);a.deleteContents()}else{for(b in d){Ext.removeNode(d[b])}}}c.elements={};c.count=c.startIndex=0;c.endIndex=-1},fill:function(b,g,f){f=f||0;var d=this,e=d.elements={},c,a=b.length-f;if(!g){g=0}for(c=0;c<a;c++){e[g+c]=b[c+f]}d.startIndex=g;d.endIndex=g+a-1;d.count=a;return this},insert:function(f,b){var d=this,e=d.elements,c,a=b.length;if(d.count){if(f<d.count){for(c=d.endIndex+a;c>=f+a;c--){e[c]=e[c-a];e[c].setAttribute("data-recordIndex",c)}}d.endIndex=d.endIndex+a}else{d.startIndex=f;d.endIndex=f+a-1}for(c=0;c<a;c++,f++){e[f]=b[c];e[f].setAttribute("data-recordIndex",f)}d.count+=a},invoke:function(d,a){var e=this,c,b;d=Ext.dom.Element.prototype[d];for(b=e.startIndex;b<=e.endIndex;b++){c=e.item(b);if(c){d.apply(c,a)}}return e},item:function(c,b){var d=this.elements[c],a=null;if(d){a=b?this.elements[c]:this.el.attach(this.elements[c])}return a},first:function(a){return this.item(this.startIndex,a)},last:function(a){return this.item(this.endIndex,a)},moveBlock:function(a){var f=this,g=f.elements,e,b,d,c;if(!a){return}if(a<0){c=f.startIndex-1;b=f.endIndex;d=1}else{c=f.endIndex+1;b=f.startIndex;d=-1}f.startIndex+=a;f.endIndex+=a;do{c+=d;e=g[c+a]=g[c];e.setAttribute("data-recordIndex",c+a);if(c<f.startIndex||c>f.endIndex){delete g[c]}}while(c!==b);delete g[c]},getCount:function(){return this.count},slice:function(e,b){var d=this.elements,a=[],c;if(!b){b=this.endIndex}else{b=Math.min(this.endIndex,b-1)}for(c=e||this.startIndex;c<=b;c++){a.push(d[c])}return a},replaceElement:function(d,c,a){var e=this.elements,b=(typeof d==="number")?d:this.indexOf(d);if(b>-1){c=Ext.getDom(c);if(a){d=e[b];d.parentNode.insertBefore(c,d);Ext.removeNode(d);c.setAttribute("data-recordIndex",b)}this.elements[b]=c}return this},indexOf:function(b){var c=this.elements,a;b=Ext.getDom(b);for(a=this.startIndex;a<=this.endIndex;a++){if(c[a]===b){return a}}return -1},removeRange:function(c,f,d){var j=this,a=j.elements,h=[],e,g,b,k;if(f==null){f=j.endIndex+1}else{f=Math.min(j.endIndex+1,f+1)}if(c==null){c=j.startIndex}b=f-c;for(g=c,k=f;g<=j.endIndex;g++,k++){e=a[g];if(g<f){h.push(e);if(d){Ext.removeNode(e)}}if(k<=j.endIndex){e=a[g]=a[k];e.setAttribute("data-recordIndex",g)}else{delete a[g]}}j.count-=b;j.endIndex-=b;return h},removeElement:function(k,c){var g=this,j,i,a=g.elements,d,e,b=0,f,h;if(Ext.isArray(k)){j=k;k=[];e=j.length;for(b=0;b<e;b++){i=j[b];if(typeof i!=="number"){i=g.indexOf(i)}if(i>=g.startIndex&&i<=g.endIndex){k[k.length]=i}}Ext.Array.sort(k);e=k.length}else{if(k<g.startIndex||k>g.endIndex){return}e=1;k=[k]}for(f=h=k[0],b=0;f<=g.endIndex;f++,h++){if(b<e&&f===k[b]){h++;b++;if(c){Ext.removeNode(a[f])}}if(h<=g.endIndex&&h>=g.startIndex){d=a[f]=a[h];d.setAttribute("data-recordIndex",f)}else{delete a[f]}}g.endIndex-=e;g.count-=e},scroll:function(r,s,h){var t=this,k=t.view,f=k.store,l=t.elements,a=r.length,o=k.getNodeContainer(),g=k.hasListeners.itemremove,q=k.hasListeners.itemadd,m=t.statics().range,p,b,c,d,j,e,n,u;if(!r.length){return}if(s===-1){if(h){if(g){n=[];u=[]}e=(t.endIndex-h)+1;if(m){m.setStartBefore(l[e]);m.setEndAfter(l[t.endIndex]);m.deleteContents();for(p=e;p<=t.endIndex;p++){b=l[p];delete l[p];if(g){n.push(f.getByInternalId(b.getAttribute("data-recordId")));u.push(b)}}}else{for(p=e;p<=t.endIndex;p++){b=l[p];delete l[p];Ext.removeNode(b);if(g){n.push(f.getByInternalId(b.getAttribute("data-recordId")));u.push(b)}}}k.fireEvent("itemremove",n,e,u,k);t.endIndex-=h}if(r.length){j=k.bufferRender(r,t.startIndex-=a);d=j.children;for(p=0;p<a;p++){l[t.startIndex+p]=d[p]}o.insertBefore(j.fragment,o.firstChild);if(q){k.fireEvent("itemadd",r,t.startIndex,d)}}}else{if(h){if(g){n=[];u=[]}c=t.startIndex+h;if(m){m.setStartBefore(l[t.startIndex]);m.setEndAfter(l[c-1]);m.deleteContents();for(p=t.startIndex;p<c;p++){b=l[p];delete l[p];if(g){n.push(f.getByInternalId(b.getAttribute("data-recordId")));u.push(b)}}}else{for(p=t.startIndex;p<c;p++){b=l[p];delete l[p];Ext.removeNode(b);if(g){n.push(f.getByInternalId(b.getAttribute("data-recordId")));u.push(b)}}}k.fireEvent("itemremove",n,t.startIndex,u,k);t.startIndex=c}j=k.bufferRender(r,t.endIndex+1);d=j.children;for(p=0;p<a;p++){l[t.endIndex+=1]=d[p]}o.appendChild(j.fragment);if(q){k.fireEvent("itemadd",r,t.endIndex+1,d)}}t.count=t.endIndex-t.startIndex+1;return d},sumHeights:function(){var a=0,c=this.elements,b;for(b=this.startIndex;b<=this.endIndex;b++){a+=c[b].offsetHeight}return a}},1,0,0,0,0,0,[Ext.view,"NodeCache"],function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}));(Ext.cmd.derive("Ext.view.Table",Ext.view.View,{alternateClassName:"Ext.grid.View",isTableView:true,config:{selectionModel:{type:"rowmodel"}},inheritableStatics:{normalSideEvents:["deselect","select","beforedeselect","beforeselect","selectionchange"],events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","beforeitemupdate","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","rowclick","rowcontextmenu","rowdblclick","rowkeydown","rowmouseup","rowmousedown","rowkeydown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand","scroll"]},scrollable:true,componentLayout:"tableview",baseCls:"x-grid-view",unselectableCls:"x-unselectable",firstCls:"x-grid-cell-first",lastCls:"x-grid-cell-last",itemCls:"x-grid-item",selectedItemCls:"x-grid-item-selected",selectedCellCls:"x-grid-cell-selected",focusedItemCls:"x-grid-item-focused",overItemCls:"x-grid-item-over",altRowCls:"x-grid-item-alt",dirtyCls:"x-grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)x-grid-item-alt(?:\\s+|$)","g"),cellRe:new RegExp("x-grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:true,positionCells:false,stripeOnUpdate:null,actionableMode:false,trackOver:true,getRowClass:null,stripeRows:true,markDirty:true,ariaRole:"rowgroup",rowAriaRole:"row",cellAriaRole:"gridcell",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="x-grid-item-container" role="presentation" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>","{% ","view = columns = column = null;","%}",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" role="presentation" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellpadding="0" cellspacing="0" style="{itemStyle};width:0">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " x-grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ',"{cellInnerAttr:attributes}>{value}</div>","</td>",{priority:0}],refreshSelmodelOnRefresh:false,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:["x-grid-cell x-grid-td"]},constructor:function(a){if(a.grid.isTree){a.baseCls="x-tree-view"}Ext.view.View.prototype.constructor.call(this,a)},hasVariableRowHeight:function(a){var b=this;return b.variableRowHeight||b.store.isGrouped()||b.getVisibleColumnManager().hasVariableRowHeight()||(!a&&b.lockingPartner&&b.lockingPartner.hasVariableRowHeight(true))},initComponent:function(){var a=this;if(a.columnLines){a.addCls(a.grid.colLinesCls)}if(a.rowLines){a.addCls(a.grid.rowLinesCls)}a.body=new Ext.dom.Fly();a.body.id=a.id+"gridBody";if(!a.trackOver){a.overItemCls=null}a.headerCt.view=a;a.grid.view=a;a.initFeatures(a.grid);a.itemSelector=a.getItemSelector();a.all=new Ext.view.NodeCache(a);Ext.view.View.prototype.initComponent.call(this)},applySelectionModel:function(b,e){var d=this,c=d.ownerGrid,f=b.type,a=d.disableSelection||c.disableSelection;if(!e){if(!(b&&b.isSelectionModel)){b=c.selModel||b}}if(b){if(b.isSelectionModel){b.allowDeselect=c.allowDeselect||b.selectionMode!=="SINGLE";b.locked=a}else{if(typeof b==="string"){b={type:b}}else{b.type=c.selType||b.selType||b.type||f}if(!b.mode){if(c.simpleSelect){b.mode="SIMPLE"}else{if(c.multiSelect){b.mode="MULTI"}}}b=Ext.Factory.selection(Ext.apply({allowDeselect:c.allowDeselect,locked:a},b))}}return b},updateSelectionModel:function(a,c){var b=this;if(c){c.un({scope:b,lastselectedchanged:b.updateBindSelection,selectionchange:b.updateBindSelection});Ext.destroy(b.selModelRelayer)}b.selModelRelayer=b.relayEvents(a,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);a.on({scope:b,lastselectedchanged:b.updateBindSelection,selectionchange:b.updateBindSelection});b.selModel=a},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(a,t,h){var s=this,q=h>1,l=q&&document.createRange?document.createRange():null,b=q&&!l?document.createDocumentFragment():null,k=t,m=s.getGridColumns().length,r=m-1,e=(s.firstCls||s.lastCls)&&(t===0||t===m||a===0||a===r),o,n,g,p,c,d,f;if(s.rendered&&t!==a){g=s.el.query(s.rowSelector);for(o=0,p=g.length;o<p;o++){c=g[o];d=c.childNodes;if(e){if(d.length===1){Ext.fly(d[0]).addCls(s.firstCls);Ext.fly(d[0]).addCls(s.lastCls);continue}if(a===0){Ext.fly(d[0]).removeCls(s.firstCls);Ext.fly(d[1]).addCls(s.firstCls)}else{if(a===r){Ext.fly(d[r]).removeCls(s.lastCls);Ext.fly(d[r-1]).addCls(s.lastCls)}}if(t===0){Ext.fly(d[0]).removeCls(s.firstCls);Ext.fly(d[a]).addCls(s.firstCls)}else{if(t===m){Ext.fly(d[r]).removeCls(s.lastCls);Ext.fly(d[a]).addCls(s.lastCls)}}}if(q){if(l){l.setStartBefore(d[a]);l.setEndAfter(d[a+h-1]);b=l.extractContents()}else{for(n=0;n<h;n++){b.appendChild(d[a])}}c.insertBefore(b,d[k]||null)}else{c.insertBefore(d[a],d[k]||null)}}f=s.el.query("colgroup");for(o=0,p=f.length;o<p;o++){c=f[o];if(q){if(l){l.setStartBefore(c.childNodes[a]);l.setEndAfter(c.childNodes[a+h-1]);b=l.extractContents()}else{for(n=0;n<h;n++){b.appendChild(c.childNodes[a])}}c.insertBefore(b,c.childNodes[k]||null)}else{c.insertBefore(c.childNodes[a],c.childNodes[k]||null)}}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(a){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(a)},getCell:function(a,b){var c=this.getRow(a);if(typeof b==="number"){b=this.getHeaderAtIndex(b)}return Ext.fly(c).down(b.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},findFeature:function(a){if(this.features){return Ext.Array.findBy(this.features,function(b){if(b.ftype===a){return true}})}},initFeatures:function(d){var f=this,c,e,b,a;f.tpl=Ext.XTemplate.getTpl(this,"tpl");f.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl");f.addRowTpl(Ext.XTemplate.getTpl(this,"outerRowTpl"));f.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl");f.featuresMC=new Ext.util.MixedCollection();e=f.features=f.constructFeatures();a=e?e.length:0;for(c=0;c<a;c++){b=e[c];b.view=f;b.grid=d;f.featuresMC.add(b);b.init(d)}},renderTHead:function(b,c,e){var f=b.view.headerFns,a,d;if(f){for(d=0,a=f.length;d<a;++d){f[d].call(this,b,c,e)}}},addHeaderFn:function(a){var b=this.headerFns;if(!b){b=this.headerFns=[]}b.push(a)},renderTFoot:function(b,c,e){var f=b.view.footerFns,a,d;if(f){for(d=0,a=f.length;d<a;++d){f[d].call(this,b,c,e)}}},addFooterFn:function(a){var b=this.footerFns;if(!b){b=this.footerFns=[]}b.push(a)},addTpl:function(a){return this.insertTpl("tpl",a)},addRowTpl:function(a){return this.insertTpl("rowTpl",a)},addCellTpl:function(a){return this.insertTpl("cellTpl",a)},insertTpl:function(e,d){var c=this,a,b;if(d.isTemplate){d=Ext.Object.chain(d)}else{d=new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",d)}for(a=c[e];d.priority<a.priority;a=a.nextTpl){b=a}if(b){b.nextTpl=d}else{c[e]=d}d.nextTpl=a;return d},tplApplyOut:function(a,b,c){if(this.before){if(this.before(a,b,c)===false){return}}this.nextTpl.applyOut(a,b,c);if(this.after){this.after(a,b,c)}},constructFeatures:function(){var f=this,e=f.features,d,b,c=0,a;if(e){b=[];a=e.length;for(;c<a;c++){d=e[c];if(!d.isFeature){d=Ext.create("feature."+d.ftype,d)}b[c]=d}}return b},beforeRender:function(){Ext.view.View.prototype.beforeRender.call(this);if(!this.enableTextSelection){this.protoEl.unselectable()}},getElConfig:function(){var a=Ext.view.View.prototype.getElConfig.call(this);delete a["aria-hidden"];delete a["aria-disabled"];return a},onBindStore:function(a){var b=this,c=b.bufferedRenderer;if(c&&c.store!==a){c.bindStore(a)}if(b.all&&b.all.getCount()){if(c){c.setBodyTop(0)}b.clearViewEl()}Ext.view.View.prototype.onBindStore.apply(this,arguments)},getStoreListeners:function(){var a=Ext.view.View.prototype.getStoreListeners.call(this);if(this.bufferedRenderer){delete a.clear}a.beforepageremove=this.beforePageRemove;return a},beforePageRemove:function(c,b){var d=this.all,a=c.getPageSize();if(d.startIndex>=(b-1)*a&&d.endIndex<=(b*a-1)){c.get(b);return false}},onViewScroll:function(b,a,c){if(!this.ignoreScroll){Ext.view.View.prototype.onViewScroll.call(this,b,a,c)}},createRowElement:function(b,c,d){var e=this,f=e.renderBuffer,a=e.collectData([b],c);a.columns=d;e.tpl.overwrite(f,a);e.cleanupData();return Ext.fly(f).down(e.getNodeContainerSelector(),true).firstChild},bufferRender:function(c,d){var e=this,f=e.renderBuffer,a,b=document.createRange?document.createRange():null;e.tpl.overwrite(f,e.collectData(c,d));e.cleanupData();Ext.fly(f).saveTabbableState({skipSelf:true,includeHidden:true});f=Ext.fly(f).down(e.getNodeContainerSelector(),true);if(b){b.selectNodeContents(f);a=b.extractContents()}else{a=document.createDocumentFragment();while(f.firstChild){a.appendChild(f.firstChild)}}return{fragment:a,children:Ext.Array.toArray(a.childNodes)}},collectData:function(a,c){var b=this;b.rowValues.view=b;b.tableValues.view=b;b.tableValues.rows=a;b.tableValues.columns=null;b.tableValues.viewStartIndex=c;b.tableValues.touchScroll=b.touchScroll;b.tableValues.tableStyle="width:"+b.headerCt.getTableWidth()+"px";return b.tableValues},cleanupData:function(){var a=this.tableValues;a.view=a.columns=a.rows=this.rowValues.view=null},refreshSize:function(c){var b=this,a=b.getBodySelector();if(a){b.body.attach(b.el.down(a,true))}if(!b.hasLoadingHeight){Ext.suspendLayouts();Ext.view.View.prototype.refreshSize.apply(this,arguments);if(c||(b.hasVariableRowHeight()&&b.dataSource.getCount())){b.grid.updateLayout()}Ext.resumeLayouts(true)}},clearViewEl:function(a){var e=this,f=e.all,g=e.getStore(),c,d,h,j=f.slice(),b=[];if(e.hasListeners.itemremove){for(c=f.startIndex;c<=f.endIndex;c++){b.push(g.getByInternalId(f.item(c,true).getAttribute("data-recordId")))}}e.fireEvent("itemremove",b,f.startIndex,j,e);Ext.view.View.prototype.clearViewEl.call(this);d=Ext.fly(e.getNodeContainer());if(d&&!a){h=e.getTargetEl();if(h.dom!==d.dom){d.destroy()}}},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},getRecord:function(a){if(this.store.destroyed){return}if(a.isModel){return a}a=this.getNode(a);if(a){return this.dataSource.getByInternalId(a.getAttribute("data-recordId"))}},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}return this.all.indexOf(a)},indexInStore:function(a){return a?this.dataSource.indexOf(this.getRecord(a)):-1},indexOfRow:function(b){var c=this.dataSource,a;if(b.isCollapsedPlaceholder){a=c.indexOfPlaceholder(b)}else{a=c.indexOf(b)}return a},renderRows:function(g,e,d,b){var f=this,h=f.rowValues,a=g.length,c;h.view=f;h.columns=e;h.rowRole=f.rowAriaRole;f.cellValues.cellRole=f.cellAriaRole;for(c=0;c<a;c++,d++){h.itemClasses.length=h.rowClasses.length=0;f.renderRow(g[c],d,b)}h.view=h.columns=h.record=null},renderColumnSizer:function(b,c){var e=b.columns||this.getGridColumns(),a=e.length,d,g,f;c.push('<colgroup role="presentation">');for(d=0;d<a;d++){g=e[d];f=g.cellWidth?g.cellWidth:Ext.grid.header.Container.prototype.defaultWidth;c.push('<col role="presentation" class="',"x-","grid-cell-",e[d].getItemId(),'" style="width:'+f+'px">')}c.push("</colgroup>")},renderRow:function(g,a,f){var i=this,e=a===-1,h=i.selectionModel,l=i.rowValues,d=l.itemClasses,c=l.rowClasses,b=i.itemCls,k,j=i.rowTpl;l.rowAttr={};l.record=g;l.recordId=g.internalId;l.recordIndex=i.store.indexOf(g);l.rowIndex=a;l.rowId=i.getRowId(g);l.itemCls=l.rowCls="";if(!l.columns){l.columns=i.ownerCt.getVisibleColumnManager().getColumns()}d.length=c.length=0;if(!e){d[0]=b;if(!i.ownerCt.disableSelection&&h.isRowSelected){if(h.isRowSelected(g)){d.push(i.selectedItemCls)}}if(i.stripeRows&&a%2!==0){d.push(i.altRowCls)}if(i.getRowClass){k=i.getRowClass(g,a,null,i.dataSource);if(k){c.push(k)}}}if(f){j.applyOut(l,f,i.tableValues)}else{return j.apply(l,i.tableValues)}},renderCell:function(d,g,f,m,i,e){var k=this,b,h=k.selectionModel,j=k.cellValues,c=j.classes,a=g.data[d.dataIndex],n=k.cellTpl,o,l,p=k.navigationModel.getPosition();j.record=g;j.column=d;j.recordIndex=f;j.rowIndex=m;j.columnIndex=j.cellIndex=i;j.align=d.align;j.innerCls=d.innerCls;j.tdCls=j.tdStyle=j.tdAttr=j.style="";j.unselectableAttr=k.enableTextSelection?"":'unselectable="on"';c[1]=d.getCellId();l=2;if(d.renderer&&d.renderer.call){b=k.ownerCt.columnManager.getHeaderIndex(d);o=d.renderer.call(d.usingDefaultRenderer?d:d.scope||k.ownerCt,a,j,g,f,b,k.dataSource,k);if(j.css){g.cssWarning=true;j.tdCls+=" "+j.css;j.css=null}if(j.tdCls){c[l++]=j.tdCls}}else{o=a}j.value=(o==null||o==="")?d.emptyCellText:o;if(d.tdCls){c[l++]=d.tdCls}if(k.markDirty&&g.dirty&&g.isModified(d.dataIndex)){c[l++]=k.dirtyCls}if(d.isFirstVisible){c[l++]=k.firstCls}if(d.isLastVisible){c[l++]=k.lastCls}if(!k.enableTextSelection){c[l++]=k.unselectableCls}if(h&&(h.isCellModel||h.isSpreadsheetModel)&&h.isCellSelected(k,f,d)){c[l++]=k.selectedCellCls}if(p&&p.record.id===g.id&&p.column===d){c[l++]=k.focusedItemCls}c.length=l;j.tdCls=c.join(" ");n.applyOut(j,e);j.column=j.record=null},getRow:function(a){var b;if((!a&&a!==0)||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return Ext.fly(a).down(this.rowSelector,true)}if(Ext.isNumber(a)){b=this.all.item(a);return b&&b.down(this.rowSelector,true)}if(a.isModel){return this.getRowByRecord(a)}b=Ext.fly(a);if(b.is(this.itemSelector)){return this.getRowFromItem(b)}return b.findParent(this.rowSelector,this.getTargetEl())},getRowId:function(a){return this.id+"-record-"+a.internalId},constructRowId:function(a){return this.id+"-record-"+a},getNodeById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,false)},getRowById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,true)},getNodeByRecord:function(a){return this.retrieveNode(this.getRowId(a),false)},getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),true)},getRowFromItem:function(c){var d=Ext.getDom(c).tBodies[0].childNodes,a=d.length,b;for(b=0;b<a;b++){if(Ext.fly(d[b]).is(this.rowSelector)){return d[b]}}},retrieveNode:function(c,b){var a=this.el.getById(c,true);if(b&&a){return Ext.fly(a).down(this.rowSelector,true)}return a},updateIndexes:Ext.emptyFn,bodySelector:"div.x-grid-item-container",nodeContainerSelector:"div.x-grid-item-container",itemSelector:"table.x-grid-item",rowSelector:"tr.x-grid-row",cellSelector:"td.x-grid-cell",sizerSelector:".x-grid-cell",innerSelector:"div.x-grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(b){var a=this.sizerSelector+"-"+b.getItemId();return"td"+a+",col"+a},getItemSelector:function(){return this.itemSelector},getCellSelector:function(a){return a?a.getCellSelector():this.cellSelector},getCellInnerSelector:function(a){return this.getCellSelector(a)+" "+this.innerSelector},addRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).addCls(a)}},removeRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).removeCls(a)}},onRowSelect:function(c){var b=this,a;b.addItemCls(c,b.selectedItemCls);a=b.getRow(c);if(a){a.setAttribute("aria-selected",true)}if(Ext.isIE8){b.repaintBorder(c+1)}},onRowDeselect:function(c){var b=this,a;b.removeItemCls(c,b.selectedItemCls);a=b.getRow(c);if(a){a.removeAttribute("aria-selected")}if(Ext.isIE8){b.repaintBorder(c+1)}},onCellSelect:function(b){var a=this.getCellByPosition(b);if(a){a.addCls(this.selectedCellCls);a.dom.setAttribute("aria-selected",true)}},onCellDeselect:function(b){var a=this.getCellByPosition(b,true);if(a){Ext.fly(a).removeCls(this.selectedCellCls);a.removeAttribute("aria-selected")}},getCellInclusive:function(a,b){if(a){var c=this.getRow(a.row),d=this.ownerCt.getColumnManager().getHeaderAtIndex(a.column);if(d&&c){return Ext.fly(c).down(this.getCellSelector(d),b)}}return false},getCellByPosition:function(a,c){if(a){var b=a.view||this,d=b.getRow(a.record||a.row),e=a.column.isColumn?a.column:b.getVisibleColumnManager().getHeaderAtIndex(a.column);if(e&&d){return Ext.fly(d).down(b.getCellSelector(e),c)}}return false},onFocusEnter:function(d){var f=this,h=d.fromComponent,j=f.getNavigationModel(),b,k=f.bufferedRenderer,g,a,i,c;if(f.actionableMode){return}d=d.event;if(!f.cellFocused&&f.all.getCount()&&f.dataSource.getCount()){i=d.getTarget();if(Ext.fly(i).is(f.getCellSelector())){b=new Ext.grid.CellContext(f).setPosition(f.getRecord(i),f.getHeaderByCell(i))}else{if(i&&Ext.fly(i).isFocusable()&&f.el.contains(i)&&i!==f.el.dom){f.ownerGrid.setActionableMode(true,new Ext.grid.CellContext(f).setPosition(f.getRecord(i),f.getHeaderByCell(Ext.fly(i).up(f.getCellSelector()))));Ext.fly(i).focus()}else{b=f.lastFocused;if(b){c=f.getScrollable();if(!c||c.isInView(b.getRow()).y){g=b.record}}else{b=new Ext.grid.CellContext((f.isNormalView&&f.lockingPartner.grid.isVisible())?f.lockingPartner:f).setColumn(0)}if(h&&h.isColumn&&h.getView()===f){b.view=f;b.setColumn(h)}if(!g){a=k?k.getFirstVisibleRowIndex():0;g=f.dataSource.getAt(a);while(g&&g.isNonData){a++;g=f.dataSource.getAt(a)}if(g){b.setRow(g)}else{b=null}}if(!b){d.stopEvent();f.el.focus();return}}}}if(b){j.setPosition(b,null,d,null,true);f.cellFocused=!!j.getPosition();if(f.cellFocused){f.el.dom.setAttribute("tabIndex","-1");f.toggleChildrenTabbability(false)}}Ext.Component.prototype.onFocusEnter.call(f,d)},onFocusLeave:function(c){var b=this,a=!b.lockingPartner||!c.toComponent||(c.toComponent!==b.lockingPartner&&!b.lockingPartner.isAncestor(c.toComponent));if(!b.refreshing){if(b.cellFocused){if(a){b.getNavigationModel().setPosition(null,null,c.event,null,true)}b.cellFocused=false;b.focusEl=b.el;b.focusEl.dom.setAttribute("tabIndex",0)}if(a){if(b.ownerGrid.actionableMode){b.ownerGrid.setActionableMode(false)}}Ext.Component.prototype.onFocusLeave.call(b,c)}},onRowFocus:function(d,b,a){var c=this;if(b){c.addItemCls(d,c.focusedItemCls);if(!a){c.focusRow(d)}}else{c.removeItemCls(d,c.focusedItemCls)}if(Ext.isIE8){c.repaintBorder(d+1)}},focusRow:function(d,a){var c=this,b=c.getFocusTask();if(a){b.delay(Ext.isNumber(a)?a:10,c.focusRow,c,[d,false]);return}b.cancel();if(c.isVisible(true)){c.getNavigationModel().setPosition(c.getRecord(d))}},focusNode:function(b,a){this.focusRow(b,a)},scrollRowIntoView:function(b,a){b=this.getRow(b);if(b){this.scrollElIntoView(b,false,a)}},focusCell:function(b,c){var e=this,a,d=e.getFocusTask();if(c){d.delay(Ext.isNumber(c)?c:10,e.focusCell,e,[b,false]);return}d.cancel();if(e.isVisible(true)&&(a=e.getCellByPosition(b))){e.getNavigationModel().setPosition(b)}},getLastFocused:function(){var b=this,a=b.lastFocused;if(a&&a.record&&a.column){if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1&&b.getNode(a.record)){return a}}},scrollCellIntoView:function(a,b){if(a.isCellContext){a=this.getCellByPosition(a)}if(a){this.scrollElIntoView(a,null,b)}},scrollElIntoView:function(c,d,b){var a=this.getScrollable();if(a){a.scrollIntoView(c,d,b)}},syncRowHeightBegin:function(){var f=this,h=f.all,e=h.count,c=[],g=Ext.grid.locking.RowSynchronizer,b,a,d;for(b=0,a=h.startIndex;b<e;b++,a++){c[b]=d=new g(f,h.elements[a]);d.reset()}return c},syncRowHeightClear:function(b){var d=this,e=d.all,c=e.count,a;for(a=0;a<c;a++){b[a].reset()}},syncRowHeightMeasure:function(b){var c=b.length,a;for(a=0;a<c;a++){b[a].measure()}},syncRowHeightFinish:function(b,d){var c=b.length,e=this.bufferedRenderer,a;for(a=0;a<c;a++){b[a].finish(d[a])}if(e){e.syncRowHeightsFinish()}},handleUpdate:function(o,g,r,B){r=r||Ext.data.Model.EDIT;var J=this,h=J.store.indexOf(g),u=J.rowTpl,m=J.markDirty,y=J.dirtyCls,C=r!==Ext.data.Model.EDIT,x=[],z=J.variableRowHeight,v=0,G=J.ownerCt,d=J.cellFly||(J.self.prototype.cellFly=new Ext.dom.Fly()),s,p,j,q,E,H,l,w,c,f,F,D,n,b,e,A,I,a,k,t;if(J.viewReady){s=J.getNodeByRecord(g);if(s){if(g.isCollapsedPlaceholder){Ext.fly(s).syncContent(J.createRowElement(g,J.indexOfRow(g)));return}w=J.overItemCls;c=J.ownerCt.getVisibleColumnManager().getColumns();for(D=0,F=c.length;D<F;D++){f=c[D];if(f.preventUpdate){b=Ext.fly(s).down(f.getCellSelector(),true);if(b&&!C&&m){d.attach(b);if(g.isModified(f.dataIndex)){d.addCls(y)}else{d.removeCls(y)}}}else{n=J.shouldUpdateCell(g,f,B);if(n){v=v|n;x[x.length]=f;z=z||f.variableRowHeight}}}J.fireEvent("beforeitemupdate",g,h,s,x);if(J.getRowClass||!J.getRowFromItem(s)||(v&1)||(s.tBodies[0].childNodes.length>1)){k=s._extData;j=J.createRowElement(g,J.indexOfRow(g),x);if(Ext.fly(s,"_internal").hasCls(w)){Ext.fly(j).addCls(w)}if(Ext.isIE9m&&s.mergeAttributes){s.mergeAttributes(j,true)}else{q=j.attributes;E=q.length;for(l=0;l<E;l++){H=q[l].name;if(H!=="id"){s.setAttribute(H,q[l].value)}}}if(k){k.isSynchronized=false}if(c.length&&(p=J.getRow(s))){J.updateColumns(p,Ext.fly(j).down(J.rowSelector,true),x)}while(u){if(u.syncContent){if(u.syncContent(s,j,B?x:null)===false){break}}u=u.nextTpl}}else{for(D=0,F=x.length;D<F;D++){f=x[D];e=f.dataIndex;A=g.get(e);b=Ext.fly(s).down(f.getCellSelector(),true);d.attach(b);if(!C&&m){if(g.isModified(f.dataIndex)){d.addCls(y)}else{d.removeCls(y)}}I=f.usingDefaultRenderer;a=I?f:f.scope;if(f.updater){Ext.callback(f.updater,a,[b,A,g,J,J.dataSource],0,f,G)}else{if(f.renderer){A=Ext.callback(f.renderer,a,[A,null,g,0,0,J.dataSource,J],0,f,G)}t=A==null||A==="";A=t?f.emptyCellText:A;if(f.producesHTML||t){d.down(J.innerSelector,true).innerHTML=A}else{d.down(J.innerSelector,true).childNodes[0].data=A}}if(J.highlightClass){Ext.fly(b).addCls(J.highlightClass);if(!J.changedCells){J.self.prototype.changedCells=[];J.prototype.clearChangedTask=new Ext.util.DelayedTask(J.clearChangedCells,J.prototype);J.clearChangedTask.delay(J.unhighlightDelay)}J.changedCells.push({cell:b,cls:J.highlightClass,expires:Ext.Date.now()+1000})}}}if(C&&m&&!g.dirty){Ext.fly(s,"_internal").select("."+y).removeCls(y)}if(z){Ext.suspendLayouts()}J.fireEvent("itemupdate",g,h,s);if(z){J.ownerGrid.updateLayout();Ext.resumeLayouts(true)}}}},afterComponentLayout:function(){var a;Ext.view.View.prototype.afterComponentLayout.apply(this,arguments);if(this.touchScroll&&!this.bufferedRenderer&&(a=this.getScrollable())){a.refresh()}},clearChangedCells:function(){var d=this,b=Ext.Date.now(),e;for(var c=0,a=d.changedCells.length;c<a;){e=d.changedCells[c];if(e.expires<=b){Ext.fly(e.cell).removeCls(e.highlightClass);Ext.Array.erase(d.changedCells,c,1);a--}else{break}}if(a){d.clearChangedTask.delay(d.unhighlightDelay)}},updateColumns:function(i,j,k){var h=this,b,a,g,c,m=k.length,l,d,n,f,e=h.getCellSelector();if(i.mergeAttributes){i.mergeAttributes(j,true)}else{b=j.attributes;a=b.length;for(c=0;c<a;c++){g=b[c].name;if(g!=="id"){i.setAttribute(g,b[c].value)}}}for(l=0;l<m;l++){d=k[l];e=h.getCellSelector(d);n=Ext.fly(i).selectNode(e);f=Ext.fly(j).selectNode(e);Ext.fly(n).syncContent(f)}},shouldUpdateCell:function(a,c,b){return c.shouldUpdateCell(a,b)},refresh:function(){var b=this,a,c=b.saveFocusState();if(b.destroying){return}Ext.view.View.prototype.refresh.apply(this,arguments);c();b.headerCt.setSortState();if(b.touchScroll&&b.el&&!b.all.getCount()&&b.headerCt&&b.headerCt.tooNarrow){a=b.getScrollable();if(a&&a.isTouchScroller){a.setSize({x:b.headerCt.getTableWidth(),y:a.getSize().y})}}},processContainerEvent:function(b){var a=Ext.Component.fromElement(b.target.parentNode);if(a&&a.up(this.ownerCt)){return false}},processItemEvent:function(b,q,k,p){var t=this,m=t.self,s=m.EventMap,d=p.type,g=t.features,o=g.length,n,j,l,f,c,r=p.position=t.eventPosition||(t.eventPosition=new Ext.grid.CellContext()),h,a;if(Ext.isIE&&d==="mouseup"&&!p.within(t.el)){return false}if(t.indexInStore(q)!==-1){h=r.rowElement=Ext.fly(q).down(t.rowSelector,true);a=p.getTarget(t.getCellSelector(),h);d=m.TouchEventMap[d]||d;if(a){if(!a.parentNode){return false}c=t.getHeaderByCell(a);j=t.ownerCt.getColumnManager().getHeaderIndex(c)}else{j=-1}r.setAll(t,k,c?t.getVisibleColumnManager().getHeaderIndex(c):-1,b,c);r.cellElement=a;l=t.fireEvent("uievent",d,t,a,k,j,p,b,h);if((l===false||Ext.view.View.prototype.processItemEvent.apply(this,arguments)===false)){return false}for(n=0;n<o;++n){f=g[n];if(f.wrapsItem){if(f.vetoEvent(b,h,k,p)===false){t.processSpecialEvent(p);return false}}}if(a&&d!=="mouseover"&&d!=="mouseout"){l=!((t["onBeforeCell"+s[d]](a,j,b,h,k,p)===false)||(t.fireEvent("beforecell"+d,t,a,j,b,h,k,p)===false)||(t["onCell"+s[d]](a,j,b,h,k,p)===false)||(t.fireEvent("cell"+d,t,a,j,b,h,k,p)===false))}if(l!==false){l=t.fireEvent("row"+d,t,b,h,k,p)}return l}else{this.processSpecialEvent(p);p.preventDefault();return false}},processSpecialEvent:function(h){var l=this,c=l.features,k=c.length,m=h.type,d,n,f,g,b,j,a=l.ownerCt;Ext.view.View.prototype.processSpecialEvent.apply(this,arguments);if(m==="mouseover"||m==="mouseout"){return}m=l.self.TouchEventMap[m]||m;for(d=0;d<k;d++){n=c[d];if(n.hasFeatureEvent){g=h.getTarget(n.eventSelector,l.getTargetEl());if(g){f=n.eventPrefix;b=n.getFireEventArgs("before"+f+m,l,g,h);j=n.getFireEventArgs(f+m,l,g,h);if((l.fireEvent.apply(l,b)===false)||(a.fireEvent.apply(a,b)===false)||(l.fireEvent.apply(l,j)===false)||(a.fireEvent.apply(a,j)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(a){this.autoSizeColumn(a)},autoSizeColumn:function(a){if(Ext.isNumber(a)){a=this.getGridColumns()[a]}if(a){if(a.isGroupHeader){a.autoSize();return}delete a.flex;a.setWidth(this.getMaxContentWidth(a))}},getMaxContentWidth:function(d){var f=this,k=f.el.query(d.getCellInnerSelector()),b=d.getWidth(),c=0,e=k.length,a=f.body.select(f.getColumnSizerSelector(d)),h=Math.max,g=0,j;if(e>0){if(Ext.supports.ScrollWidthInlinePaddingBug){g+=f.getCellPaddingAfter(k[0])}if(f.columnLines){g+=Ext.fly(k[0].parentNode).getBorderWidth("lr")}}a.setWidth(1);d.textEl.setStyle({"text-overflow":"clip",display:"table-cell"});j=d.textEl.dom.offsetWidth+d.titleEl.getPadding("lr");d.textEl.setStyle({"text-overflow":"",display:""});for(;c<e;c++){j=h(j,k[c].scrollWidth)}j+=g;j=h(j+1,40);a.setWidth(b);return j},getPositionByEvent:function(f){var d=this,b=f.getTarget(d.cellSelector),c=f.getTarget(d.itemSelector),a=d.getRecord(c),g=d.getHeaderByCell(b);return d.getPosition(a,g)},getHeaderByCell:function(a){if(a){return this.ownerCt.getVisibleColumnManager().getHeaderById(Ext.getDom(a).getAttribute("data-columnId"))}return false},walkCells:function(g,h,c,i){var f=this,j=g.clone(),e=f.lockingPartner&&f.lockingPartner.grid.isVisible()?f.lockingPartner:null,b=g.rowIdx,a=f.dataSource.getCount()-1,d=f.ownerCt.getVisibleColumnManager().getColumns();switch(h.toLowerCase()){case"right":if(g.isLastColumn()){b=e&&f.isLockedView?b:b+1;if(b>a){return false}if(e){j.view=e}j.setPosition(b,0)}else{j.navigate(+1)}break;case"left":if(g.isFirstColumn()){b=e&&f.isNormalView?b:b-1;if(b<0){return false}if(e){j.view=e;d=e.getVisibleColumnManager().getColumns()}j.setPosition(b,d[d.length-1])}else{j.navigate(-1)}break;case"up":if(b===0){return false}else{j.setRow(b-1)}break;case"down":if(b===a){return false}else{j.setRow(b+1)}break}if(c&&c.call(i||f,j)!==true){return false}return j},walkRows:function(h,a){var d=this,g=d.dataSource,e=0,j=h,b,c=(a<0)?0:g.getCount()-1,f=c?1:-1,i=h;do{if(c?i>=c:i<=c){return j||c}i+=f;if((b=Ext.fly(d.getRow(i)))&&b.isVisible(true)){e+=f;j=i}}while(e!==a);return i},walkRecs:function(b,a){var g=this,j=g.dataSource,h=0,k=b,c,e=(a<0)?0:(j.isBufferedStore?j.getTotalCount():j.getCount())-1,i=e?1:-1,f=j.indexOf(b),d;do{if(e?f>=e:f<=e){return k}f+=i;d=j.getAt(f);if(!d.isCollapsedPlaceholder&&(c=Ext.fly(g.getNodeByRecord(d)))&&c.isVisible(true)){h+=i;k=d}}while(h!==a);return k},getFirstVisibleRowIndex:function(){var c=this,b=(c.dataSource.isBufferedStore?c.dataSource.getTotalCount():c.dataSource.getCount()),a=c.indexOf(c.all.first())-1;do{a+=1;if(a===b){return}}while(!Ext.fly(c.getRow(a)).isVisible(true));return a},getLastVisibleRowIndex:function(){var b=this,a=b.indexOf(b.all.last());do{a-=1;if(a===-1){return}}while(!Ext.fly(b.getRow(a)).isVisible(true));return a},getHeaderCt:function(){return this.headerCt},getPosition:function(a,b){return new Ext.grid.CellContext(this).setPosition(a,b)},onDestroy:function(){var d=this,c=d.featuresMC,a,b;if(c){for(b=0,a=c.getCount();b<a;++b){c.getAt(b).destroy()}}d.cellFly=d.featuresMC=null;Ext.view.View.prototype.onDestroy.apply(this,arguments);d.all.destroy();d.body.destroy();d.all=d.body=d.body.el=null;d.grid=d.ownerGrid=d.headerCt=d.panel=null;d.selection=d.actionPosition=d.eventPosition=d.lastFocused=null;d.actionRow=d.cellTpl=d.rowTpl=d.bufferedRenderer=null},onReplace:function(b,f,a,e){var c=this,g=c.bufferedRenderer,d;if(c.rendered&&g){d=c.saveFocusState();g.onReplace(b,f,a,e);d()}else{Ext.view.View.prototype.onReplace.apply(this,arguments)}c.setPendingStripe(f)},onResize:function(c,a,b,f){var d=this,e=d.bufferedRenderer;if(e){e.onViewResize(d,c,a,b,f)}Ext.view.View.prototype.onResize.call(this,c,a)},onAdd:function(b,a,c){var d=this,e=d.bufferedRenderer;if(d.rendered&&e&&(e.bodyTop||d.dataSource.getCount()+a.length>=e.viewSize)){e.onReplace(b,c,[],a)}else{Ext.view.View.prototype.onAdd.apply(this,arguments)}d.setPendingStripe(c)},onRemove:function(b,a,c){var d=this,f=d.bufferedRenderer,e;if(d.rendered&&f&&d.dataSource.getCount()+a.length>=f.viewSize){e=d.saveFocusState();f.onReplace(b,c,a,[]);e()}else{Ext.view.View.prototype.onRemove.apply(this,arguments)}d.setPendingStripe(c)},saveFocusState:function(){var e=this,a=e.dataSource,g=e.actionableMode,c=e.getNavigationModel(),d=g?e.actionPosition:c.getPosition(true),b,f;if(d){d=d.clone();if(g){e.ownerGrid.setActionableMode(false)}e.el.dom.focus();c.setPosition();return function(){if(a.getCount()){b=Math.min(d.rowIdx,e.all.getCount()-1);f=Math.min(d.colIdx,e.getVisibleColumnManager().getColumns().length-1);d=new Ext.grid.CellContext(e).setPosition(a.contains(d.record)?d.record:b,f);if(g){e.ownerGrid.setActionableMode(true,d)}else{e.cellFocused=true;c.setPosition(d,null,null,null,true)}}else{d.column.focus()}}}return Ext.emptyFn},onDataRefresh:function(b){var c=this,a=c.ownerCt;if(a&&a.isCollapsingOrExpanding===2){a.on("expand",c.onDataRefresh,c,{single:true});return}Ext.view.View.prototype.onDataRefresh.call(this,b)},getViewRange:function(){var a=this;if(a.bufferedRenderer){return a.bufferedRenderer.getViewRange()}return Ext.view.View.prototype.getViewRange.call(this)},setPendingStripe:function(a){var b=this.stripeOnUpdate;if(b===null){b=a}else{b=Math.min(b,a)}this.stripeOnUpdate=b},onEndUpdate:function(){var a=this,c=a.stripeOnUpdate,b=a.all.startIndex;if(a.rendered&&(c||c===0)){if(c<b){c=b}a.doStripeRows(c);a.stripeOnUpdate=null}Ext.view.View.prototype.onEndUpdate.apply(this,arguments)},doStripeRows:function(b,a){var d=this,e,g,c,f;if(d.rendered&&d.stripeRows){e=d.getNodes(b,a);for(c=0,g=e.length;c<g;c++){f=e[c];f.className=f.className.replace(d.rowClsRe," ");b++;if(b%2===0){f.className+=(" "+d.altRowCls)}}}},hasActiveFeature:function(){return(this.isGrouping&&this.store.isGrouped())||this.isRowWrapped},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding("r")},privates:{refreshScroll:function(){var a=this,b=a.bufferedRenderer;if(b){b.refreshSize()}else{Ext.view.View.prototype.refreshScroll.call(this)}},collectNodes:function(a){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},setActionableMode:function(j,f){var l=this,a=l.getNavigationModel(),b,p,m,c,n=l.grid.actionables,g=n.length,d,e,o,k,h;if(l.actionableMode===j){if(!j||f.isEqual(l.actionPosition)){return false}}if(j){if(f&&(f.view===l||(f.view===(k=l.lockingPartner)&&k.actionableMode))){f=f.clone();e=f.record;l.grid.ensureVisible(e,{column:f.column});b=l.all.item(f.rowIdx);if(!k){p=Ext.fly(b).down(f.column.getCellSelector());for(d=0;d<g;d++){o=o||n[d].activateCell(f)}}if(k||p.restoreTabbableState(true).length||o){for(d=0;d<g;d++){if(n[d].activateRow){n[d].activateRow(b)}}if(k||(m=p.findTabbableElements()).length){b.restoreTabbableState(true);if(k){l.actionableMode=true;l.actionPosition=null;return true}if(m){l.actionRow=b;l.actionableMode=l.ownerGrid.actionableMode=true;a.setPosition();a.actionPosition=l.actionPosition=f;Ext.fly(m[0]).focus();return true}}}}return false}else{c=Ext.fly(Ext.Element.getActiveElement());h=l.el.contains(c);if(h){e=l.actionPosition&&l.actionPosition.record}for(d=0;d<g;d++){if(n[d].deactivate){n[d].deactivate()}}if(l.actionRow){l.actionRow.saveTabbableState({skipSelf:true,includeSaved:false})}l.actionableMode=l.ownerGrid.actionableMode=false;l.actionPosition=a.actionPosition=l.actionRow=null;if(h){a.setPosition(new Ext.grid.CellContext(l).setPosition(e||0,l.getHeaderByCell(c.findParent(l.getCellSelector()))||0))}}},onRowExit:function(c,l,e){var h=this,j=e?"nextSibling":"previousSibling",g=h.lockingPartner,k=h.grid.actionables,f=k.length,d,b,a;h.refreshing=h.actionableModeTabbing=true;for(d=0;d<f;d++){if(k[d].deactivate){k[d].deactivate()}}if(g&&g.grid.isVisible()){b=h.all.indexOf(c);if(e){a=0;if(h.isNormalView){b++}}else{a=g.getVisibleColumnManager().getColumns().length-1;if(h.isLockedView){b--}}h.actionPosition=null;h=g;l=h.all.item(b,true)}h.findFirstActionableElement(l,j,e);h.refreshing=h.actionableModeTabbing=false;Ext.fly(c).saveTabbableState({skipSelf:true,includeSaved:false})},findFirstActionableElement:function(a,l,g){var k=this,c=k.getVisibleColumnManager().getColumns(),h=c.length,r,o,p=k.grid.actionables,n=p.length,e,d,b,f=new Ext.grid.CellContext(k),q,m;if(a){f.setRow(a);for(e=0;e<n;e++){if(p[e].activateRow){p[e].activateRow(a)}}for(e=(g?0:h-1);(g?e<h:e>-1)&&!o;e=e+(g?1:-1)){b=c[e];f.setColumn(b);r=Ext.fly(a).down(f.column.getCellSelector());for(d=0;d<n;d++){q=q||p[d].activateCell(f)}if(r.restoreTabbableState(true).length||q){m=r.findTabbableElements();k.actionRow=Ext.get(a);k.actionRow.restoreTabbableState(true);o=m[g?0:m.length-1]}}if(o){k.actionPosition=k.getNavigationModel().actionPosition=f;Ext.fly(o).focus()}else{k.onRowExit(a,k.all.item(f.rowIdx+(g?1:-1)),g)}}else{k.grid.ensureVisible(g?0:k.dataSource.getCount()-1,{callback:function(s,i,j){if(s){k.findFirstActionableElement(j,l,g)}else{k.ownerGrid.setActionableMode(false)}}})}}}},1,["tableview","gridview"],["component","box","dataview","tableview","gridview"],{component:true,box:true,dataview:true,tableview:true,gridview:true},["widget.gridview","widget.tableview"],0,[Ext.view,"Table",Ext.grid,"View"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderResizer",Ext.plugin.Abstract,{disabled:false,config:{dynamic:false},colHeaderCls:"x-column-header",minColWidth:40,maxColWidth:1000,eResizeCursor:"col-resize",init:function(b){var a=this;a.headerCt=b;b.on("render",a.afterHeaderRender,a,{single:a});if(!a.minColWidth){a.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth}},destroy:function(){var b=this,a=b.tracker;if(a){a.destroy();b.tracker=null}b.headerCt.un("render",b.afterHeaderRender,b);b.headerCt=null;Ext.plugin.Abstract.prototype.destroy.call(this)},afterHeaderRender:function(){var b=this,c=b.headerCt,a=c.el;c.mon(a,"mousemove",b.onHeaderCtMouseMove,b);b.markerOwner=b.ownerGrid=b.headerCt.up("tablepanel").ownerGrid;b.tracker=new Ext.dd.DragTracker({disabled:b.disabled,onBeforeStart:b.onBeforeStart.bind(b),onStart:b.onStart.bind(b),onDrag:b.onDrag.bind(b),onEnd:b.onEnd.bind(b),tolerance:3,autoStart:300,el:a})},onHeaderCtMouseMove:function(b){var a=this;if(a.headerCt.dragging||a.disabled){if(a.activeHd){a.activeHd.el.dom.style.cursor="";delete a.activeHd}}else{if(b.pointerType!=="touch"){a.findActiveHeader(b)}}},findActiveHeader:function(f){var g=this,c=g.headerCt,i=f.getTarget("."+g.colHeaderCls,c.el,true),j=g.ownerGrid,a=j.ownerLockable,k,h,b,d;g.activeHd=null;if(i){k=Ext.getCmp(i.id);if(k.isAtEndEdge(f)){if(c.visibleColumnManager.getColumns().length===1&&c.forceFit){return}h=k}else{if(k.isAtStartEdge(f)){b=c.visibleColumnManager.getColumns();d=k.isGroupHeader?k.getGridColumns()[0]:k;h=b[Ext.Array.indexOf(b,d)-1];if(!h&&a&&!j.isLocked){b=a.lockedGrid.headerCt.visibleColumnManager.getColumns();h=b[b.length-1]}}}if(h){if(h.isGroupHeader){b=h.getGridColumns();h=b[b.length-1]}if(h&&!(h.fixed||(h.resizable===false))){g.activeHd=h;k.el.dom.style.cursor=g.eResizeCursor;if(k.triggerEl){k.triggerEl.dom.style.cursor=g.eResizeCursor}}}else{k.el.dom.style.cursor="";if(k.triggerEl){k.triggerEl.dom.style.cursor=""}}}return g.activeHd},onBeforeStart:function(b){var a=this;a.dragHd=a.activeHd||b.pointerType==="touch"&&a.findActiveHeader(b);if(a.dragHd&&!a.headerCt.dragging){a.xDelta=a.dragHd.getX()+a.dragHd.getWidth()-a.tracker.getXY()[0];a.tracker.constrainTo=a.getConstrainRegion();return true}else{a.headerCt.dragging=false;return false}},getConstrainRegion:function(){var f=this,b=f.dragHd.el,e,g=f.ownerGrid,d=g.getSizeModel().width,c=d.shrinkWrap?f.headerCt.getWidth()-f.headerCt.visibleColumnManager.getColumns().length*f.minColWidth:f.maxColWidth,a;if(f.headerCt.forceFit){e=f.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(e&&f.headerInSameGrid(e)){c=b.getWidth()+(e.getWidth()-f.minColWidth)}}else{if(g.isLocked&&d.shrinkWrap){c=f.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(true)-g.getWidth()-(g.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*f.minColWidth+Ext.getScrollbarSize().width)}}a=f.adjustConstrainRegion(b.getRegion(),0,0,0,f.minColWidth);a.right=b.getX()+c;return a},onStart:function(g){var h=this,f=h.dragHd,b=f.el.getWidth(),d=f.getRootHeaderCt(),k,j,c,a,i,l;h.headerCt.dragging=true;h.origWidth=b;if(!h.dynamic){c=h.markerOwner;if(c.frame&&c.resizable){h.gridOverflowSetting=c.el.dom.style.overflow;c.el.dom.style.overflow="hidden"}k=h.getLeftMarkerX(c);a=c.getLhsMarker();i=c.getRhsMarker();l=h.ownerGrid.body.getHeight()+d.getHeight();j=d.getOffsetsTo(c)[1]-c.el.getBorderWidth("t");a.dom.style.cursor=h.eResizeCursor;i.dom.style.cursor=h.eResizeCursor;a.setLocalY(j);i.setLocalY(j);a.setHeight(l);i.setHeight(l);h.setMarkerX(a,k);h.setMarkerX(i,k+b)}},onDrag:function(b){var a=this;if(a.dynamic){a.doResize()}else{a.setMarkerX(a.getMovingMarker(a.markerOwner),a.calculateDragX(a.markerOwner))}},getMovingMarker:function(a){return a.getRhsMarker()},onEnd:function(b){var a=this,c=a.markerOwner;a.headerCt.dragging=false;if(a.dragHd){if(!a.dynamic){if("gridOverflowSetting" in a){c.el.dom.style.overflow=a.gridOverflowSetting}a.setMarkerX(c.getLhsMarker(),-9999);a.setMarkerX(c.getRhsMarker(),-9999)}a.doResize();if(b.pointerType!=="touch"){a.dragHd=null;a.activeHd.el.dom.style.cursor=a.eResizeCursor}else{a.dragHd=a.activeHd=null}}a.headerCt.blockNextEvent()},doResize:function(){var c=this,b=c.dragHd,a,d=c.tracker.getOffset("point");if(b&&d[0]){if(b.flex){delete b.flex}Ext.suspendLayouts();c.adjustColumnWidth(d[0]-c.xDelta);if(c.headerCt.forceFit){a=b.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(a&&!c.headerInSameGrid(a)){a=null}if(a){delete a.flex;a.setWidth(a.getWidth()-d[0])}}Ext.resumeLayouts(true)}},headerInSameGrid:function(b){var a=this.dragHd.up("tablepanel");return !!b.up(a)},disable:function(){var a=this.tracker;this.disabled=true;if(a){a.disable()}},enable:function(){var a=this.tracker;this.disabled=false;if(a){a.enable()}},calculateDragX:function(a){return this.tracker.getXY("point")[0]+this.xDelta-a.getX()-a.el.getBorderWidth("l")},getLeftMarkerX:function(a){return this.dragHd.getX()-a.getX()-a.el.getBorderWidth("l")-1},setMarkerX:function(b,a){b.setLocalX(a)},adjustConstrainRegion:function(f,d,e,a,c){return f.adjust(d,e,a,c)},adjustColumnWidth:function(a){this.dragHd.setWidth(this.origWidth+a)}},0,0,0,0,["plugin.gridheaderresizer"],0,[Ext.grid.plugin,"HeaderResizer"],0));(Ext.cmd.derive("Ext.grid.header.DragZone",Ext.dd.DragZone,{colHeaderSelector:".x-column-header",colInnerSelector:".x-column-header-inner",maxProxyWidth:120,constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;Ext.dd.DragZone.prototype.constructor.call(this,b.el);a.proxy.el.addCls("x-grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(b){if(b.getTarget(this.colInnerSelector)){var d=b.getTarget(this.colHeaderSelector),a,c;if(d){a=Ext.getCmp(d.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isAtStartEdge(b)||a.isAtEndEdge(b))){c=document.createElement("div");c.role="presentation";c.innerHTML=a.text;return{ddel:c,header:a}}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.headerCt.hideMenu();Ext.dd.DragZone.prototype.onInitDrag.apply(this,arguments)},onDragDrop:function(){this.headerCt.dragging=false;Ext.dd.DragZone.prototype.onDragDrop.apply(this,arguments)},afterRepair:function(){Ext.dd.DragZone.prototype.afterRepair.call(this);this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}},1,0,0,0,0,0,[Ext.grid.header,"DragZone"],0));(Ext.cmd.derive("Ext.grid.header.DropZone",Ext.dd.DropZone,{colHeaderCls:"x-column-header",proxyOffsets:[-4,-9],constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;Ext.dd.DropZone.prototype.constructor.call(this,b.el)},destroy:function(){Ext.dd.DropZone.prototype.destroy.call(this);Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-top",html:"&#160;"});this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-bottom",html:"&#160;"})}return this.bottomIndicator},getLocation:function(d,b){var a=d.getXY()[0],c=Ext.fly(b).getRegion(),f;if((c.right-a)<=(c.right-c.left)/2){f="after"}else{f="before"}return{pos:f,header:Ext.getCmp(b.id),node:b}},positionIndicator:function(y,o,u){var x=this,p=y.header,f=x.getLocation(u,o),j=f.header,d=f.pos,c,t,l,r,s,a,b,k,m,w,v,n,h,q,g;if(j===x.lastTargetHeader&&d===x.lastDropPos){return}c=p.nextSibling("gridcolumn:not([hidden])");t=p.previousSibling("gridcolumn:not([hidden])");x.lastTargetHeader=j;x.lastDropPos=d;if(!j.draggable&&d==="before"&&j.getIndex()===0){return false}y.dropLocation=f;if((p!==j)&&((d==="before"&&c!==j)||(d==="after"&&t!==j))&&!j.isDescendantOf(p)){n=Ext.dd.DragDropManager.getRelated(x);h=n.length;q=0;for(;q<h;q++){g=n[q];if(g!==x&&g.invalidateDrop){g.invalidateDrop()}}x.valid=true;l=x.getTopIndicator();r=x.getBottomIndicator();if(d==="before"){s="bc-tl";a="tc-bl"}else{s="bc-tr";a="tc-br"}b=l.getAlignToXY(j.el,s);k=r.getAlignToXY(j.el,a);m=x.headerCt.el;w=m.getX()-x.indicatorXOffset;v=m.getX()+m.getWidth();b[0]=Ext.Number.constrain(b[0],w,v);k[0]=Ext.Number.constrain(k[0],w,v);l.setXY(b);r.setXY(k);l.show();r.show()}else{x.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(c,g,f,d){var h=this,j=d.header,a,k,b,i;if(d.header.el.dom===c){a=false}else{d.isLock=d.isUnlock=d.crossPanel=false;k=h.getLocation(f,c).header;a=(j.ownerCt===k.ownerCt);if(!a&&(!j.ownerCt.sealed&&!k.ownerCt.sealed)){a=true;b=j.up("tablepanel");i=k.up("tablepanel");if(b!==i){d.crossPanel=true;d.isLock=i.isLocked&&!b.isLocked;d.isUnlock=!i.isLocked&&b.isLocked;if((d.isUnlock&&j.lockable===false)||(d.isLock&&!j.isLockable())){a=false}}}}if(a){h.positionIndicator(d,c,f)}else{h.valid=false}return h.valid?h.dropAllowed:h.dropNotAllowed},hideIndicators:function(){var a=this;a.getTopIndicator().hide();a.getBottomIndicator().hide();a.lastTargetHeader=a.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(d,b){var a=d.items,c;if(d.isGroupHeader&&a.length){c=!b?"first":"last";d=this.getNestedHeader(a[c](),b)}return d},onNodeDrop:function(l,c,p,t){this.headerCt.blockNextEvent();if(!this.valid){return}var q=this,m=t.header,h=t.dropLocation,o=h.pos,i=h.header,s=m.ownerCt,k=s.getRootHeaderCt(),a=i.ownerCt,d=q.headerCt.visibleColumnManager,n=d.getHeaderIndex(m),b,j,r,g,f;if(t.isLock||t.isUnlock){g=s.up("[scrollerOwner]");b=a.items.indexOf(i);if(o==="after"){b++}if(t.isLock){g.lock(m,b,a)}else{g.unlock(m,b,a)}}else{b=o==="after"?d.getHeaderIndex(q.getNestedHeader(i,1))+1:d.getHeaderIndex(q.getNestedHeader(i,0));q.invalidateDrop();f=m.getWidth();Ext.suspendLayouts();s.isDDMoveInGrid=a.isDDMoveInGrid=!t.crossPanel;if(m.isGroupHeader&&i.isGroupHeader){m.setNestedParent(i)}if(o==="before"){i.insertNestedHeader(m)}else{r="move"+o.charAt(0).toUpperCase()+o.substr(1);a[r](m,i)}if(b>=0&&!(i.isGroupHeader&&(!i.items||!i.items.length))&&n!==b){j=m.isGroupHeader?m.query(":not([hidden]):not([isGroupHeader])").length:1;if((n<=b)&&j>1){b-=j}a.getRootHeaderCt().grid.view.moveColumn(n,b,j)}k.fireEvent("columnmove",s,m,n,b);s.isDDMoveInGrid=a.isDDMoveInGrid=false;if(a.isGroupHeader&&!s.isGroupHeader){if(s!==a){m.savedFlex=m.flex;delete m.flex;m.width=f}}else{if(!s.isGroupHeader){if(m.savedFlex){m.flex=m.savedFlex;delete m.width}}}Ext.resumeLayouts(true)}}},1,0,0,0,0,0,[Ext.grid.header,"DropZone"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderReorderer",Ext.plugin.Abstract,{init:function(a){this.headerCt=a;a.on({boxready:this.onHeaderCtRender,single:true,scope:this})},destroy:function(){var a=this;a.headerCt.un("boxready",a.onHeaderCtRender,a);Ext.destroy(a.dragZone,a.dropZone);a.headerCt=a.dragZone=a.dropZone=null;Ext.plugin.Abstract.prototype.destroy.call(this)},onHeaderCtRender:function(){var a=this;a.dragZone=new Ext.grid.header.DragZone(a.headerCt);a.dropZone=new Ext.grid.header.DropZone(a.headerCt);if(a.disabled){a.dragZone.disable()}},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}},0,0,0,0,["plugin.gridheaderreorderer"],0,[Ext.grid.plugin,"HeaderReorderer"],0));(Ext.cmd.derive("Ext.grid.header.Container",Ext.container.Container,{border:true,baseCls:"x-grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:false,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:"x-column-header-open",menuSortAscCls:"x-hmenu-sort-asc",menuSortDescCls:"x-hmenu-sort-desc",menuColsIcon:"x-cols-icon",blockEvents:false,dragging:false,sortOnClick:true,enableFocusableContainer:false,childHideCount:0,sortable:true,enableColumnHide:true,initComponent:function(){var a=this;a.plugins=a.plugins||[];a.defaults=a.defaults||{};if(!a.isColumn){if(a.enableColumnResize){a.resizer=new Ext.grid.plugin.HeaderResizer();a.plugins.push(a.resizer)}if(a.enableColumnMove){a.reorderer=new Ext.grid.plugin.HeaderReorderer();a.plugins.push(a.reorderer)}}if(a.isColumn&&!a.isGroupHeader){if(!a.items||a.items.length===0){a.isContainer=a.isFocusableContainer=false;a.focusable=true;a.layout={type:"container",calculate:Ext.emptyFn}}}else{a.layout=Ext.apply({type:"gridcolumn",align:"stretch"},a.initialConfig.layout);a.defaults.columnLines=a.columnLines;if(!a.isGroupHeader){a.isRootHeader=true;if(!a.hiddenHeaders){a.enableFocusableContainer=true;a.ariaRole="rowgroup"}a.columnManager=new Ext.grid.ColumnManager(false,a);a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);if(a.grid){a.grid.columnManager=a.columnManager;a.grid.visibleColumnManager=a.visibleColumnManager}}else{a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);a.columnManager=new Ext.grid.ColumnManager(false,a)}}a.menuTask=new Ext.util.DelayedTask(a.updateMenuDisabledState,a);Ext.container.Container.prototype.initComponent.call(this)},insertNestedHeader:function(f){var b=this,e=f.ownerCt,a=b.ownerCt,d=a.layout.owner,c;if(e){if(b.isGroupHeader&&!a.isNestedParent){c=d.items.indexOf(b)}e.remove(f,false)}if(c===undefined){c=d.items.indexOf(b)}d.insert(c,f)},isNested:function(){return !!this.getRootHeaderCt().down("[isNestedParent]")},isNestedGroupHeader:function(){var b=this,a=b.getRefOwner().query(">:not([hidden])");return(a.length===1&&a[0]===b)},maybeShowNestedGroupHeader:function(){var a=this.items,b;if(a&&a.length===1&&(b=a.getAt(0))&&b.hidden){b.show()}},setNestedParent:function(a){a.isNestedParent=false;a.ownerCt.isNestedParent=!!(this.ownerCt.items.length===1&&a.ownerCt.items.length===1)},initEvents:function(){var c=this,a,b;Ext.container.Container.prototype.initEvents.call(this);if(!c.isColumn&&!c.isGroupHeader){a=c.onHeaderCtEvent;b={click:a,dblclick:a,contextmenu:a,mouseover:c.onHeaderCtMouseOver,mouseout:c.onHeaderCtMouseOut,scope:c};if(Ext.supports.Touch){b.longpress=c.onHeaderCtLongPress}c.mon(c.el,b)}},onHeaderCtEvent:function(d,b){var c=this,h=c.getHeaderElByEvent(d),g,f,a;if(c.longPressFired){c.longPressFired=false;return}if(h&&!c.blockEvents){g=Ext.getCmp(h.id);if(g){f=g[g.clickTargetName];if((!g.isGroupHeader&&!g.isContainer)||d.within(f)){if(d.type==="click"||d.type==="tap"){a=g.onTitleElClick(d,f,c.sortOnClick);if(a){c.onHeaderTriggerClick(a,d,d.pointerType==="touch"?a.el:a.triggerEl)}else{c.onHeaderClick(g,d,b)}}else{if(d.type==="contextmenu"){c.onHeaderContextMenu(g,d,b)}else{if(d.type==="dblclick"&&g.resizable){g.onTitleElDblClick(d,f.dom)}}}}}}},blockNextEvent:function(){this.blockEvents=true;Ext.asap(this.unblockEvents,this)},unblockEvents:function(){this.blockEvents=false},onHeaderCtMouseOver:function(b,a){var f,d,c;if(!b.within(this.el,true)){f=b.getTarget("."+Ext.grid.column.Column.prototype.baseCls);d=f&&Ext.getCmp(f.id);if(d){c=d[d.clickTargetName];if(b.within(c)){d.onTitleMouseOver(b,c.dom)}}}},onHeaderCtMouseOut:function(f,c){var d="."+Ext.grid.column.Column.prototype.baseCls,b=f.getTarget(d),a=f.getRelatedTarget(d),h,g;if(b!==a){if(b){h=Ext.getCmp(b.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOut(f,g.dom)}}if(a){h=Ext.getCmp(a.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOver(f,g.dom)}}}},onHeaderCtLongPress:function(b){var a=this,d=a.getHeaderElByEvent(b),c=Ext.getCmp(d.id);if(!c.menuDisabled){a.longPressFired=true;a.showMenuBy(b,d,c)}},getHeaderElByEvent:function(a){return a.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){if(this.hiddenHeaders){return false}return Ext.container.Container.prototype.isLayoutRoot.call(this)},getRootHeaderCt:function(){var a=this;return a.isRootHeader?a:a.up("[isRootHeader]")},onDestroy:function(){var a=this;if(a.menu){a.menu.un("hide",a.onMenuHide,a)}a.menuTask.cancel();Ext.container.Container.prototype.onDestroy.call(this);Ext.destroy(a.visibleColumnManager,a.columnManager,a.menu);a.columnManager=a.visibleColumnManager=null},applyColumnsState:function(h,e){if(!h||!h.length){return}var p=this,n=p.items.items,m=n.length,j=0,b=h.length,o,d,a,l,q=false,k=[],f={},g=[];for(o=0;o<b;o++){a=h[o];a.index=o;f[a.id]=a}for(j=0;j<m;j++){d=n[j];a=f[d.getStateId()];if(a){l=a.index;k[l]=d;if(j!==l){q=true}if(d.applyColumnState){d.applyColumnState(a,e)}}else{g.push({index:j,column:d})}}k=Ext.Array.clean(k);b=g.length;if(b){for(j=0;j<b;j++){a=g[j];l=a.index;if(l<k.length){q=true;Ext.Array.splice(k,l,0,a.column)}else{k.push(a.column)}}}if(q){p.applyingState=true;p.removeAll(false);delete p.applyingState;p.add(k);p.purgeCache()}},getColumnsState:function(){var b=this,a=[],c;b.items.each(function(d){c=d.getColumnState&&d.getColumnState();if(c){a.push(c)}});return a},onAdd:function(b){var a=this;Ext.container.Container.prototype.onAdd.apply(this,arguments);a.onHeadersChanged(b,a.isDDMoveInGrid)},move:function(c,e){var d=this,b=d.items,a;if(c.isComponent){a=c;c=b.indexOf(a)}else{a=b.getAt(c)}a.visibleFromIdx=d.getRootHeaderCt().visibleColumnManager.indexOf(a);Ext.container.Container.prototype.move.apply(this,arguments)},onMove:function(a,d,g){var f=this,e=f.getRootHeaderCt(),b=e.visibleColumnManager,h=1,c;f.onHeadersChanged(a,true);c=b.indexOf(a);if(c>=a.visibleFromIdx){c++}Ext.container.Container.prototype.onMove.apply(this,arguments);if(a.isGroupHeader){h=a.visibleColumnManager.getColumns().length}e.onHeaderMoved(a,h,a.visibleFromIdx,c)},maybeContinueRemove:function(){var a=this;return(a.isGroupHeader&&!a.applyingState)&&!a.isNestedParent&&a.ownerCt&&!a.items.getCount()},onRemove:function(f,d){var e=this,b=e.ownerCt,a=f.lastHiddenHeader;Ext.container.Container.prototype.onRemove.call(this,f,d);if(!e.destroying){if(!e.isDDMoveInGrid){e.onHeadersChanged(f,false)}if(e.maybeContinueRemove()){if(f.rendered){e.detachComponent(f)}Ext.suspendLayouts();b.remove(e);Ext.resumeLayouts(true)}}},onHeadersChanged:function(e,a){var b,d=this.getRootHeaderCt();this.purgeHeaderCtCache(this);if(d){d.onColumnsChanged();if(!e.isGroupHeader){b=d.ownerCt;if(b&&!a){b.onHeadersChanged(d,e)}}}},onHeaderMoved:function(f,a,c,e){var d=this,b=d.ownerCt;if(d.rendered){if(b&&b.onHeaderMove){b.onHeaderMove(d,f,a,c,e)}d.fireEvent("columnmove",d,f,c,e)}},onColumnsChanged:function(){var c=this,d=c.menu,a,b;if(c.rendered){c.fireEvent("columnschanged",c);if(d&&(a=d.child("#columnItemSeparator"))){b=d.child("#columnItem");a.destroy();b.destroy()}}},lookupComponent:function(b){var a=Ext.container.Container.prototype.lookupComponent.apply(this,arguments);if(!a.isGroupHeader&&a.width===undefined&&!a.flex){a.width=this.defaultWidth}return a},setSortState:function(){var b=this.up("[store]").store,d=this.visibleColumnManager.getColumns(),a=d.length,c,f,e;for(c=0;c<a;c++){f=d[c];e=f.getSorter();if(e){if(!b.getSorters().contains(e)){e=null}}else{e=b.getSorters().get(f.getSortParam())}f.setSortState(e)}},getHeaderMenu:function(){var b=this.getMenu(),a;if(b){a=b.child("#columnItem");if(a){return a.menu}}return null},onHeaderVisibilityChange:function(e,d){var b=this,c=b.getHeaderMenu(),a;b.purgeHeaderCtCache(e.ownerCt);if(c){a=b.getMenuItemForHeader(c,e);if(a){a.setChecked(d,true)}if(c.isVisible()){b.menuTask.delay(50)}}},updateMenuDisabledState:function(g){var f=this,d=f.query("gridcolumn:not([hidden])"),c,a=d.length,e,b,h;if(!g){g=f.getMenu()}for(c=0;c<a;++c){e=d[c];b=f.getMenuItemForHeader(g,e);if(b){h=e.isHideable()?"enable":"disable";if(b.menu){h+="CheckChange"}b[h]()}}},getMenuItemForHeader:function(a,b){return b?a.down("menucheckitem[headerId="+b.id+"]"):null},onHeaderShow:function(d){var c=this,b=c.ownerCt,a=d.lastHiddenHeader;if(!b){return}if(c.forceFit){delete c.flex}if(a&&!d.query("[hidden=false]").length){a.show();d.lastHiddenHeader=null}c.onHeaderVisibilityChange(d,true);b.onHeaderShow(c,d);c.fireEvent("columnshow",c,d);c.fireEvent("columnschanged",this)},onHeaderHide:function(c){var b=this,a=b.ownerCt;if(!a){return}b.onHeaderVisibilityChange(c,false);a.onHeaderHide(b,c);b.fireEvent("columnhide",b,c);b.fireEvent("columnschanged",this)},onHeaderResize:function(d,a){var c=this,b=c.ownerCt;if(b){b.onHeaderResize(c,d,a)}c.fireEvent("columnresize",c,d,a)},onHeaderClick:function(f,d,b){var c=this,a=f.getView().getSelectionModel();f.fireEvent("headerclick",c,f,d,b);if(c.fireEvent("headerclick",c,f,d,b)!==false){if(a.onHeaderClick){a.onHeaderClick(c,f,d)}}},onHeaderContextMenu:function(c,b,a){c.fireEvent("headercontextmenu",this,c,b,a);this.fireEvent("headercontextmenu",this,c,b,a)},onHeaderTriggerClick:function(d,c,a){var b=this;if(d.fireEvent("headertriggerclick",b,d,c,a)!==false&&b.fireEvent("headertriggerclick",b,d,c,a)!==false){if(d.activeMenu){if(c.pointerType){d.activeMenu.hide()}else{d.activeMenu.focus()}}else{b.showMenuBy(c,a,d)}}},showMenuBy:function(a,d,h){var f=this.getMenu(),g=f.down("#ascItem"),e=f.down("#descItem"),c,b=a&&a.pointerType==="touch";f.activeHeader=f.ownerCmp=h;h.setMenuActive(f);c=h.sortable?"enable":"disable";if(g){g[c]()}if(e){e[c]()}f.autoFocus=!a||a.keyCode;f.showBy(d,"tl-bl?");if(!f.isVisible()){this.onMenuHide(f)}},hideMenu:function(){if(this.menu){this.menu.hide()}},onMenuHide:function(a){a.activeHeader.setMenuActive(false)},purgeHeaderCtCache:function(a){while(a){a.purgeCache();if(a.isRootHeader){return}a=a.ownerCt}},purgeCache:function(){var c=this,b=c.visibleColumnManager,a=c.columnManager;c.gridVisibleColumns=c.gridDataColumns=c.hideableColumns=null;if(b){b.invalidate();a.invalidate()}},getMenu:function(){var b=this,a=b.view&&b.view.ownerGrid;if(!b.menu){b.menu=new Ext.menu.Menu({hideOnParentHide:false,items:b.getMenuItems(),listeners:{beforeshow:b.beforeMenuShow,hide:b.onMenuHide,scope:b}});b.fireEvent("menucreate",b,b.menu);if(a){a.fireEvent("headermenucreate",a,b.menu,b)}}return b.menu},beforeMenuShow:function(e){var c=this,b=e.child("#columnItem"),a,d;if(!b){a=c.enableColumnHide?c.getColumnMenu(c):null;d=c.sortable?2:0;if(a&&a.length){e.insert(d,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:{items:a},hideOnClick:false}])}}c.updateMenuDisabledState(c.menu)},getMenuItems:function(){var c=this,b=[],a=c.enableColumnHide?c.getColumnMenu(c):null;if(c.sortable){b=[{itemId:"ascItem",text:c.sortAscText,iconCls:c.menuSortAscCls,handler:c.onSortAscClick,scope:c},{itemId:"descItem",text:c.sortDescText,iconCls:c.menuSortDescCls,handler:c.onSortDescClick,scope:c}]}if(a&&a.length){if(c.sortable){b.push({itemId:"columnItemSeparator",xtype:"menuseparator"})}b.push({itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:a,hideOnClick:false})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("ASC")},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("DESC")},getColumnMenu:function(f){var c=[],b=0,e,a=f.query(">gridcolumn[hideable]"),g=a.length,d;for(;b<g;b++){e=a[b];d=new Ext.menu.CheckItem({text:e.menuText||e.text,checked:!e.hidden,hideOnClick:false,headerId:e.id,menu:e.isGroupHeader?this.getColumnMenu(e):undefined,checkHandler:this.onColumnCheckChange,scope:this});c.push(d)}return c.length?c:null},onColumnCheckChange:function(a,b){var c=Ext.getCmp(a.headerId);if(c.rendered){c[b?"show":"hide"]()}else{c.hidden=!b}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var c=0,b=this.getVisibleGridColumns(),d=b.length,a;for(a=0;a<d;a++){c+=b[a].getCellWidth()||0}return c},getVisibleGridColumns:function(){var g=this,c,e,b,a,d,f;if(g.gridVisibleColumns){return g.gridVisibleColumns}c=g.getGridColumns();e=g.getRootHeaderCt();b=[];a=c.length;for(d=0;d<a;d++){f=c[d];if(!f.hidden&&!f.isColumnHidden(e)){b[b.length]=f}}g.gridVisibleColumns=b;return b},isColumnHidden:function(b){var a=this.getRefOwner();while(a&&a!==b){if(a.hidden){return true}a=a.getRefOwner()}return false},getGridColumns:function(g,a){if(!g&&this.gridDataColumns){return this.gridDataColumns}var f=this,j=g||[],e,b,d,h,c;a=a||f.hidden;if(f.items){e=f.items.items;if(e){for(b=0,d=e.length;b<d;b++){h=e[b];if(h.isGroupHeader){h.visibleIndex=j.length;h.getGridColumns(j,a)}else{h.hiddenAncestor=a;j.push(h)}}}}if(!g){f.gridDataColumns=j}if(!g&&d){for(b=0,d=j.length;b<d;b++){h=j[b];h.fullColumnIndex=b;h.isFirstVisible=h.isLastVisible=false;if(!(h.hidden||h.hiddenAncestor)){if(!c){h.isFirstVisible=true}c=h}}if(c){c.isLastVisible=true}}return j},getHideableColumns:function(){var b=this,a=b.hideableColumns;if(!a){a=b.hideableColumns=b.query("[hideable]")}return a},getHeaderIndex:function(a){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderIndex(a)},getHeaderAtIndex:function(a){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(a)},getVisibleHeaderClosestToIndex:function(a){if(!this.visibleColumnManager){this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(a)},applyForceFit:function(g){var m=this,n=m.view,b=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,d=false,r=Ext.grid.header.Container.prototype.defaultWidth,a=m.el.dom.clientWidth-(n.el.dom.scrollHeight>n.el.dom.clientHeight?Ext.getScrollbarSize().width:0),e=0,l=m.getVisibleGridColumns(),h=g.hidden,k,f,q,j,c;function o(){for(f=0,k=l.length;f<k;f++){q=l[f];if(q===g){continue}q.flex=q.flex||q.width||q.getWidth();e+=q.flex;q.width=null}}function p(){var i;for(f=0,k=l.length;f<k;f++){q=l[f];i=(q===g);if(d&&!i){q.flex=b;q.width=null}else{if(!i){c=q.flex||r;q.flex=Math.max(Math.ceil((c/e)*a),b);q.width=null}}q.setWidth(q.width||q.flex)}}Ext.suspendLayouts();j=(a-((l.length+1)*b));g.flex=null;if(h){c=g.width||g.savedWidth;g.savedWidth=null}else{c=n.getMaxContentWidth(g)}if(c>j){g.width=j;d=true}else{g.width=c;a-=c+r;o()}p();Ext.resumeLayouts(true)},autoSizeColumn:function(b){var a=this.view;if(a){a.autoSizeColumn(b);if(this.forceFit){this.applyForceFit(b)}}},getRefItems:function(b){var a=Ext.container.Container.prototype.getRefItems.call(this,b);if(this.menu){a.push(this.menu)}return a},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{scope:b,down:b.showHeaderMenu,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey,home:b.onHomeKey,end:b.onEndKey,space:b.onHeaderActivate,enter:b.onHeaderActivate})},onHomeKey:function(a){return this.focusChild(null,true,a)},onEndKey:function(a){return this.focusChild(null,false,a)},showHeaderMenu:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.isColumn&&a.triggerEl){this.onHeaderTriggerClick(a,b,a.triggerEl)}},onHeaderActivate:function(d){var c=this.getFocusableFromEvent(d),a,b;if(c&&c.isColumn){a=c.getView();if(c.sortable&&this.sortOnClick){b=a.getNavigationModel().getLastFocused();c.toggleSortState();if(b){a.ownerCt.ensureVisible(b.record)}}this.onHeaderClick(c,d,c.el)}},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);if(a===this){c.preventDefault()}else{a.focus()}}}},0,["headercontainer"],["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},["widget.headercontainer"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.grid.header,"Container"],0));(Ext.cmd.derive("Ext.grid.column.Column",Ext.grid.header.Container,{alternateClassName:"Ext.grid.Column",config:{triggerVisible:false,sorter:null},baseCls:"x-column-header",hoverCls:"x-column-header-over",ariaRole:"columnheader",enableFocusableContainer:false,sortState:null,possibleSortStates:["ASC","DESC"],ariaSortStates:{ASC:"ascending",DESC:"descending"},childEls:["titleEl","triggerEl","textEl","textContainerEl"],headerWrap:false,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" role="presentation"','{tipMarkup}class="',"x-",'column-header-inner<tpl if="!$comp.isContainer"> ',"x-","leaf-column-header</tpl>",'<tpl if="empty"> ',"x-",'column-header-inner-empty</tpl>">','<div id="{id}-textContainerEl" data-ref="textContainerEl" role="presentation" class="',"x-",'column-header-text-container">','<div role="presentation" class="',"x-",'column-header-text-wrapper">','<div id="{id}-textEl" data-ref="textEl" role="presentation" class="',"x-","column-header-text",'{childElCls}">','<span role="presentation" class="',"x-",'column-header-text-inner">{text}</span>',"</div>","</div>","</div>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="',"x-","column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:true,resizable:true,hideable:true,menuDisabled:false,renderer:false,align:"left",draggable:true,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",producesHTML:true,ignoreExport:false,isHeader:true,isColumn:true,tabIndex:-1,ascSortCls:"x-column-header-sort-ASC",descSortCls:"x-column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:"x-group-sub-header",groupHeaderCls:"x-group-header",clickTargetName:"titleEl",detachOnRemove:true,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var a=this;if(!a.rendererScope){a.rendererScope=a.scope}if(a.header!=null){a.text=a.header;a.header=null}if(a.cellWrap){a.tdCls=(a.tdCls||"")+" x-wrap-cell"}if(a.columns!=null){a.isGroupHeader=true;a.ariaRole="presentation";a.items=a.columns;a.columns=a.flex=a.width=null;a.cls=(a.cls||"")+" "+a.groupHeaderCls;a.sortable=a.resizable=false;a.align="center"}else{if(a.flex){a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}a.addCls("x-column-header-align-"+a.align);a.setupRenderer();a.setupRenderer("edit");a.setupRenderer("summary");Ext.grid.header.Container.prototype.initComponent.apply(this,arguments)},onAdded:function(b,g,a){var c=this,f,d,e;Ext.grid.header.Container.prototype.onAdded.call(this,b,g,a);if(!c.headerId){d=c.up("tablepanel");e=d?d.ownerGrid:c.getRootHeaderCt();e.headerCounter=(e.headerCounter||0)+1;c.headerId="h"+e.headerCounter}if(!c.stateId){c.stateId=c.initialConfig.id||c.headerId}f=c.getSorter();if(f&&!f.initialConfig.id){f.setId((c.dataIndex||c.stateId)+"-sorter")}},applySorter:function(a){return this.getRootHeaderCt().up("tablepanel").store.getData().getSorters().decodeSorter(a)},bindFormatter:function(b){var a=this;return function(c){return b.format(c,b.scope||a.rendererScope||a.resolveListenerScope())}},bindRenderer:function(b){var a=this;a.hasCustomRenderer=true;return function(){return Ext.callback(b,a.rendererScope,arguments,0,a)}},setupRenderer:function(b){b=b||"column";var c=this,f=c[c.formatterNames[b]],d=c[c.rendererNames[b]],a=b==="column",g,e;if(!f){if(d){if(typeof d==="string"){d=c[c.rendererNames[b]]=c.bindRenderer(d);e=true}if(a){c.hasCustomRenderer=e||d.length>1}}else{if(a&&c.defaultRenderer){c.renderer=c.defaultRenderer;c.usingDefaultRenderer=true}}}else{g=f.indexOf("this.")===0;if(g){f=f.substring(5)}f=Ext.app.bind.Template.prototype.parseFormat(f);c[c.formatterNames[b]]=null;if(g){f.scope=null}c[c.rendererNames[b]]=c.bindFormatter(f)}},getView:function(){var a=this.getRootHeaderCt();if(a){return a.view}},onFocusLeave:function(a){Ext.grid.header.Container.prototype.onFocusLeave.call(this,a);if(this.activeMenu){this.activeMenu.hide()}},initItems:function(){var a=this;Ext.grid.header.Container.prototype.initItems.apply(this,arguments);if(a.isGroupHeader){if(a.config.hidden||!a.hasVisibleChildColumns()){a.hide()}}},hasVisibleChildColumns:function(){var b=this.items.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.isColumn&&!d.hidden){return true}}return false},onAdd:function(b){var a=this;if(b.isColumn){b.isSubHeader=true;b.addCls(a.groupSubHeaderCls)}if(a.isGroupHeader&&a.hidden&&a.hasVisibleChildColumns()){a.show()}Ext.grid.header.Container.prototype.onAdd.call(this,b)},onRemove:function(c,a){var b=this;if(c.isSubHeader){c.isSubHeader=false;c.removeCls(b.groupSubHeaderCls)}Ext.grid.header.Container.prototype.onRemove.call(this,c,a);if(!(b.destroyed||b.destroying)&&!b.hasVisibleChildColumns()&&!b.ownerCt.isNested()){b.hide()}},initRenderData:function(){var b=this,e="",c=b.tooltip,d=b.text,a=b.tooltipType==="qtip"?"data-qtip":"title";if(!Ext.isEmpty(c)){e=a+'="'+c+'" '}return Ext.applyIf(Ext.grid.header.Container.prototype.initRenderData.apply(this,arguments),{text:d,empty:d==="&#160;"||d===" "||d==="",menuDisabled:b.menuDisabled,tipMarkup:e,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(a,c){var g=this,j=g.getSorter(),f=c&&c.sorters,e,d,b,h;if(j&&f&&(e=f.length)){h=j.getId();for(d=0;!b&&d<e;d++){if(f[d].id===h){j.setDirection(f[d].direction);f[d]=j;break}}}g.applyColumnsState(a.columns);if(a.hidden!=null){g.hidden=a.hidden}if(a.locked!=null){g.locked=a.locked}if(a.sortable!=null){g.sortable=a.sortable}if(a.width!=null){g.flex=null;g.width=a.width}else{if(a.flex!=null){g.width=null;g.flex=a.flex}}},getColumnState:function(){var e=this,b=e.items.items,a=b?b.length:0,d,c=[],f={id:e.getStateId()};e.savePropsToState(["hidden","sortable","locked","flex","width"],f);if(e.isGroupHeader){for(d=0;d<a;d++){c.push(b[d].getColumnState())}if(c.length){f.columns=c}}if("width" in f){delete f.flex}return f},setText:function(a){this.text=a;if(this.rendered){this.textEl.setHtml(a)}},getIndex:function(){return this.isGroupColumn?false:this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.visibleIndex!=null?this.visibleIndex:this.isGroupColumn?false:Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},getLabelChain:function(){var c=this,b=[],a;while(a=c.up("headercontainer")){if(a.text){b.unshift(Ext.util.Format.stripTags(a.text))}c=a}return b},beforeRender:function(){var c=this,a=c.getRootHeaderCt(),d=c.isSortable(),e=[],b;Ext.grid.header.Container.prototype.beforeRender.call(this);if(!d&&!c.groupable&&!c.lockable&&(a.grid.enableColumnHide===false||!a.getHideableColumns().length)){c.menuDisabled=true}if(c.cellWrap){c.variableRowHeight=true}b=c.ariaRenderAttributes||(c.ariaRenderAttributes={});b["aria-readonly"]=true;if(d){b["aria-sort"]=c.ariaSortStates[c.sortState]}if(c.isSubHeader){e=c.getLabelChain();if(c.text){e.push(Ext.util.Format.stripTags(c.text))}if(e.length){b["aria-label"]=e.join(" ")}}c.protoEl.unselectable()},getTriggerElWidth:function(){var c=this,b=c.triggerEl,a=c.self.triggerElWidth;if(b&&a===undefined){b.setStyle("display","block");a=c.self.triggerElWidth=b.getWidth();b.setStyle("display","")}return a},afterComponentLayout:function(d,a,b,f){var e=this,c=e.getRootHeaderCt();Ext.grid.header.Container.prototype.afterComponentLayout.apply(this,arguments);if(c&&(b!=null||e.flex)&&d!==b){c.onHeaderResize(e,d)}},onDestroy:function(){var a=this;Ext.destroy(a.field);a.field=null;Ext.grid.header.Container.prototype.onDestroy.apply(this,arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onTitleElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onTitleElClick(a,this.el.dom)},onTitleElDblClick:function(d){var b=this,a,c,f;if(b.isAtStartEdge(d)){a=b.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(a&&a.getRootHeaderCt()===b.getRootHeaderCt()){a.autoSize()}}else{if(b.isAtEndEdge(d)){if(b.isGroupHeader&&d.getPoint().isContainedBy(b.layout.innerCt)){c=b.query("gridcolumn:not([hidden]):not([isGroupHeader])");b.getRootHeaderCt().autoSizeColumn(c[c.length-1]);return}else{f=b.getRootHeaderCt();if(f.visibleColumnManager.getColumns().length===1&&f.forceFit){return}}b.autoSize()}}},autoSize:function(){var b=this,c,e,a,d;if(b.isGroupHeader){c=b.query("gridcolumn:not([hidden]):not([isGroupHeader])");e=c.length;d=b.getRootHeaderCt();Ext.suspendLayouts();for(a=0;a<e;a++){d.autoSizeColumn(c[a])}Ext.resumeLayouts(true);return}b.getRootHeaderCt().autoSizeColumn(b)},onTitleElClick:function(g,c,d){var f=this,a,b;if(g.pointerType==="touch"){b=f.previousSibling(":not([hidden])");if(!f.menuDisabled&&f.isAtEndEdge(g,parseInt(f.triggerEl.getStyle("width"),10))){if(!f.menuDisabled){a=f}}else{if(b&&!b.menuDisabled&&f.isAtStartEdge(g)){a=b}}}else{a=f.triggerEl&&(g.target===f.triggerEl.dom||c===f.triggerEl||g.within(f.triggerEl))?f:null}if(d!==false&&(!a&&!f.isAtStartEdge(g)&&!f.isAtEndEdge(g)||g.getKey())){f.toggleSortState()}return a},processEvent:function(f,b,a,c,d,g){return this.fireEvent.apply(this,arguments)},isSortable:function(){var b=this.getRootHeaderCt(),a=b?b.grid:null,c=this.sortable;if(a&&a.sortableColumns===false){c=false}return c},toggleSortState:function(){if(this.isSortable()){this.sort()}},sort:function(d){var c=this,b=c.up("tablepanel"),a=b.store,e=c.getSorter();Ext.suspendLayouts();c.sorting=true;if(e){if(d){e.setDirection(d)}a.sort(e,b.multiColumnSort?"multi":"replace")}else{a.sort(c.getSortParam(),d,b.multiColumnSort?"multi":"replace")}delete c.sorting;Ext.resumeLayouts(true)},getSortParam:function(){return this.dataIndex},setSortState:function(h){var d=this,e=h&&h.getDirection(),g=d.ascSortCls,b=d.descSortCls,c=d.getRootHeaderCt(),a=d.ariaEl.dom,f;switch(e){case"DESC":if(!d.hasCls(b)){d.addCls(b);d.sortState="DESC";f=true}d.removeCls(g);break;case"ASC":if(!d.hasCls(g)){d.addCls(g);d.sortState="ASC";f=true}d.removeCls(b);break;default:d.removeCls([g,b]);d.sortState=null;break}if(a){if(d.sortState){a.setAttribute("aria-sort",d.ariaSortStates[d.sortState])}else{a.removeAttribute("aria-sort")}}if(f){c.fireEvent("sortchange",c,d,e)}},isHideable:function(){var a={hideCandidate:this,result:this.hideable};if(a.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[a])}return a.result},hasOtherMenuEnabledChildren:function(a){var b,c;if(!this.isXType("headercontainer")){a.result=false;return false}b=this.query(">gridcolumn:not([hidden]):not([menuDisabled])");c=b.length;if(Ext.Array.contains(b,a.hideCandidate)){c--}if(c){return false}a.hideCandidate=this},isLockable:function(){var a={result:this.lockable!==false};if(a.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[a])}return a.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(a){if(!this.isXType("headercontainer")){a.result=false;return false}if(this.query(">gridcolumn:not([hidden])").length>1){return false}},hide:function(){var c=this,b=c.getRootHeaderCt(),a=c.getRefOwner();if(a.constructing){Ext.grid.header.Container.prototype.hide.call(this);return c}if(c.rendered&&!c.isVisible()){return c}if(b.forceFit){c.visibleSiblingCount=b.getVisibleGridColumns().length-1;if(c.flex){c.savedWidth=c.getWidth();c.flex=null}}b.beginChildHide();Ext.suspendLayouts();if(a.isGroupHeader){if(c.isNestedGroupHeader()){a.hide()}if(c.isSubHeader&&!c.isGroupHeader&&a.query(">gridcolumn:not([hidden])").length===1){a.lastHiddenHeader=c}}Ext.grid.header.Container.prototype.hide.call(this);b.endChildHide();b.onHeaderHide(c);Ext.resumeLayouts(true);return c},show:function(){var c=this,a=c.getRootHeaderCt(),b=c.getRefOwner();if(c.isVisible()){return c}if(b.isGroupHeader){b.lastHiddenHeader=null}if(c.rendered){if(a.forceFit){a.applyForceFit(c)}}Ext.suspendLayouts();if(c.isSubHeader&&b.hidden){b.show(false,true)}Ext.grid.header.Container.prototype.show.apply(this,arguments);if(c.isGroupHeader){c.maybeShowNestedGroupHeader()}b=c.getRootHeaderCt();if(b){b.onHeaderShow(c)}Ext.resumeLayouts(true);return c},shouldUpdateCell:function(b,d){if(!this.preventUpdate){if(this.hasCustomRenderer){return 1}if(d){var a=d.length,c,e;for(c=0;c<a;++c){e=d[c];if(e===this.dataIndex||e===b.idProperty){return 2}}}else{return 2}}},getCellWidth:function(){var b=this,a;if(b.rendered&&b.componentLayout&&b.componentLayout.lastComponentSize){a=b.componentLayout.lastComponentSize.width}else{if(b.width){a=b.width}else{if(!b.isColumn){a=b.getTableWidth()}}}return a},getCellId:function(){return"x-grid-cell-"+this.getItemId()},getCellSelector:function(){var a=this.getView();return(a?a.getCellSelector():"")+"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" .x-grid-cell-inner"},isAtStartEdge:function(a){var b=a.getXY()[0]-this.getX();if(b<0&&this.getIndex()===0){return false}return(b<this.getHandleWidth(a))},isAtEndEdge:function(b,a){return(this.getX()+this.getWidth()-b.getXY()[0]<=(a||this.getHandleWidth(b)))},getHandleWidth:function(a){return a.pointerType==="touch"?10:4},setMenuActive:function(a){this.activeMenu=a;this.titleEl[a?"addCls":"removeCls"](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(a){return function(b){return Ext.util.Format[a](b)}}}}}},0,["gridcolumn"],["component","box","container","headercontainer","gridcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true},["widget.gridcolumn"],0,[Ext.grid.column,"Column",Ext.grid,"Column"],0));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,activated:false,activeCls:"x-menu-item-active",clickHideDelay:0,destroyMenu:true,disabledCls:"x-menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",initComponent:function(){var b=this,a=b.cls?[b.cls]:[],c;if(b.hasOwnProperty("canActivate")){b.focusable=b.canActivate}if(b.plain){a.push("x-menu-item-plain")}if(a.length){b.cls=a.join(" ")}if(b.menu){c=b.menu;b.menu=null;b.setMenu(c)}Ext.Component.prototype.initComponent.apply(this,arguments)},canFocus:function(){var a=this;return a.focusable&&a.rendered&&a.canActivate!==false&&!a.destroying&&!a.destroyed&&a.isVisible(true)},onFocus:function(b){var a=this;Ext.Component.prototype.onFocus.call(this,b);if(!a.disabled){if(!a.plain){a.addCls(a.activeCls)}a.activated=true;if(a.hasListeners.activate){a.fireEvent("activate",a)}}},onFocusLeave:function(b){var a=this;Ext.Component.prototype.onFocusLeave.call(this,b);if(a.activated){if(!a.plain){a.removeCls(a.activeCls)}a.doHideMenu();a.activated=false;if(a.hasListeners.deactivate){a.fireEvent("deactivate",a)}}},doHideMenu:function(){var a=this.menu;this.cancelDeferExpand();if(a&&a.isVisible()){a.hide()}},deferHideParentMenus:function(){for(var a=this.getRefOwner();a&&((a.isMenu&&a.floating)||a.isMenuItem);a=a.getRefOwner()){if(a.isMenu){a.hide()}}},expandMenu:function(c,a){var b=this;if(b.activated&&b.menu){b.hideOnClick=false;b.cancelDeferHide();a=a==null?b.menuExpandDelay:a;if(a===0){b.doExpandMenu(c)}else{b.cancelDeferExpand();b.expandMenuTimer=Ext.defer(b.doExpandMenu,a,b,[c])}}},doExpandMenu:function(a){var b=this,c=b.menu;if(!c.isVisible()){b.parentMenu.activeChild=c;c.ownerCmp=b;c.parentMenu=b.parentMenu;c.constrainTo=document.body;c.autoFocus=!a||!a.pointerType;c.showBy(b,b.menuAlign)}},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},getValue:function(){return this.value},hideMenu:function(a){var b=this;if(b.menu){b.cancelDeferExpand();b.hideMenuTimer=Ext.defer(b.doHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b)}},onClick:function(f){var d=this,c=d.clickHideDelay,g=f.browserEvent,b,a;if(!d.href||d.disabled){f.stopEvent();if(d.disabled){return false}}if(d.disabled||d.handlingClick){return}if(d.hideOnClick){if(!c){d.deferHideParentMenus()}else{d.deferHideParentMenusTimer=Ext.defer(d.deferHideParentMenus,c,d)}}b=d.fireEvent("click",d,f);if(d.destroyed){return}if(b!==false&&d.handler){Ext.callback(d.handler,d.scope,[d,f],0,d)}if(Ext.isIE9m){a=g.returnValue===false?true:false}else{a=!!g.defaultPrevented}if(d.href&&f.type!=="click"&&!a){d.handlingClick=true;d.itemEl.dom.click();d.handlingClick=false}if(!d.hideOnClick){d.focus()}return b},onRemoved:function(){var a=this;if(a.activated&&a.parentMenu.activeItem===a){a.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);a.parentMenu=a.ownerCmp=null},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;a.cancelDeferExpand();a.cancelDeferHide();clearTimeout(a.deferHideParentMenusTimer);a.setMenu(null);Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var i=this,j=i.glyph,h=Ext._glyphFontFamily,e=!!(i.icon||i.iconCls||j),k=!!i.menu,f=((i.iconAlign==="right")&&!k),c=i.isMenuCheckItem,a=[],d=i.ownerCt,g=d.plain,b;if(i.plain){i.ariaEl="el"}Ext.Component.prototype.beforeRender.call(this);if(e){if(k&&i.showCheckbox){e=false}}if(typeof j==="string"){b=j.split("@");j=b[0];h=b[1]}if(!g||(e&&!f)||c){if(d.showSeparator&&!g){a.push(i.indentCls)}else{a.push(i.indentNoSeparatorCls)}}if(k){a.push(i.indentRightArrowCls)}else{if(e&&(f||c)){a.push(i.indentRightIconCls)}}Ext.applyIf(i.renderData,{hasHref:!!i.href,href:i.href||"#",hrefTarget:i.hrefTarget,icon:i.icon,iconCls:i.iconCls,glyph:j,glyphCls:j?"x-menu-item-glyph":undefined,glyphFontFamily:h,hasIcon:e,hasMenu:k,indent:!g||e||c,isCheckItem:c,rightIcon:f,plain:i.plain,text:i.text,arrowCls:i.arrowCls,baseIconCls:i.baseIconCls,textCls:i.textCls,indentCls:a.join(" "),linkCls:i.linkCls,linkHrefCls:i.linkHrefCls,groupCls:i.group?i.groupCls:"",tabIndex:i.tabIndex})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.tooltip){a.setTooltip(a.tooltip,true)}},getMenu:function(){return this.menu||null},setMenu:function(h,g){var f=this,c=f.menu,b=f.arrowEl,a=f.ariaEl.dom,e,d;if(c){c.ownerCmp=c.parentMenu=null;if(g===true||(g!==false&&f.destroyMenu)){Ext.destroy(c)}if(a){a.removeAttribute("aria-haspopup");a.removeAttribute("aria-owns")}else{e=(f.ariaRenderAttributes||(f.ariaRenderAttributes={}));delete e["aria-haspopup"];delete e["aria-owns"]}}if(h){d=h.isMenu;h=f.menu=Ext.menu.Manager.get(h,{ownerCmp:f,focusOnToFront:false});h.setOwnerCmp(f,d);if(a){a.setAttribute("aria-haspopup",true);a.setAttribute("aria-owns",h.id)}else{e=(f.ariaRenderAttributes||(f.ariaRenderAttributes={}));e["aria-haspopup"]=true;e["aria-owns"]=h.id}}else{h=f.menu=null}if(h&&f.rendered&&!f.destroying&&b){b[h?"addCls":"removeCls"](f.arrowCls)}},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIcon:function(b){var a=this.iconEl,c=this.icon;if(a){a.src=b||Ext.BLANK_IMAGE_URL}this.icon=b;this.fireEvent("iconchange",this,c,b)},setIconCls:function(b){var d=this,a=d.iconEl,c=d.iconCls;if(a){if(d.iconCls){a.removeCls(d.iconCls)}if(b){a.addCls(b)}}d.iconCls=b;d.fireEvent("iconchange",d,c,b)},setText:function(d){var c=this,b=c.textEl||c.el,a=c.text;c.text=d;if(c.rendered){b.setHtml(d||"");c.updateLayout()}c.fireEvent("textchange",c,a,d)},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a){b.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.itemEl.id},c));b.tooltip=c}else{b.itemEl.dom.setAttribute(b.getTipAttr(),c)}}else{b.tooltip=c}return b},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:false,checkChangeDisabled:false,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var a=this;a.checked=!!a.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);if(a.group){Ext.menu.Manager.registerCheckable(a);if(a.initialConfig.hideOnClick!==false){a.hideOnClick=true}}},beforeRender:function(){var b=this,a;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(b.renderData,{checkboxCls:b.checkboxCls,showCheckbox:b.showCheckbox});a=(b.ariaRenderAttributes||(b.ariaRenderAttributes={}));a["aria-checked"]=b.menu?"mixed":b.checked;if(b.menu){a["aria-label"]=Ext.String.formatEncode(b.submenuText,b.text)}},afterRender:function(){var a=this;Ext.menu.Item.prototype.afterRender.call(this);a.checked=!a.checked;a.setChecked(!a.checked,true);if(a.checkChangeDisabled){a.disableCheckChange()}if(Ext.isGecko&&a.checkEl){a.checkEl.on("mousedown",a.onMouseDownCheck)}},disableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.addCls(b.disabledCls)}if(Ext.isIE8&&b.rendered){b.el.repaint()}b.checkChangeDisabled=true},enableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.removeCls(b.disabledCls)}b.checkChangeDisabled=false},onMouseDownCheck:function(a){a.preventDefault()},onClick:function(b){var a=this;if(!(a.disabled||a.checkChangeDisabled||a.checked&&a.group||a.menu&&"touch"===b.pointerType&&!a.checkEl.contains(b.target))){a.setChecked(!a.checked);if(b.type==="keydown"&&a.menu){return false}}Ext.menu.Item.prototype.onClick.call(this,b)},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setText:function(c){var b=this,a=b.ariaEl.dom;Ext.menu.Item.prototype.setText.call(this,c);if(a&&b.menu){a.setAttribute("aria-label",Ext.String.formatEncode(b.submenuText,c))}},setChecked:function(e,c){var d=this,f=d.checkedCls,g=d.uncheckedCls,b=d.el,a=d.ariaEl.dom;if(d.checked!==e&&(c||d.fireEvent("beforecheckchange",d,e)!==false)){if(b){if(e){b.addCls(f);b.removeCls(g)}else{b.addCls(g);b.removeCls(f)}}if(a){a.setAttribute("aria-checked",d.menu?"mixed":!!e)}d.checked=e;Ext.menu.Manager.onCheckChange(d,e);if(!c){Ext.callback(d.checkHandler,d.scope,[d,e],0,d);d.fireEvent("checkchange",d,e)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:false,canActivate:false,hideOnClick:false,plain:true,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls);Ext.menu.Item.prototype.beforeRender.call(this)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));Ext.define("Ext.theme.neptune.menu.Separator",{override:"Ext.menu.Separator",border:true});(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:false,bringParentToFront:false,defaultFocus:":focusable",menuClickBuffer:0,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var c=this,a=["x-menu"],d=c.bodyCls?[c.bodyCls]:[],e=c.floating!==false,b={element:"el",click:c.onClick,mouseover:c.onMouseOver,scope:c};if(Ext.supports.Touch){b.pointerdown=c.onMouseOver}c.on(b);c.on({beforeshow:c.onBeforeShow,scope:c});if(c.plain){a.push("x-menu-plain")}c.cls=a.join(" ");d.push("x-menu-body",Ext.dom.Element.unselectableCls);c.bodyCls=d.join(" ");if(e){if(c.minWidth===undefined){c.minWidth=c.defaultMinWidth}}else{c.hidden=!!c.initialConfig.hidden;c.constrain=false}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(c.getLayout(),{configureItem:c.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var a=Ext.panel.Panel.prototype.getInherited.call(this);a.hidden=this.hidden;return a},beforeRender:function(){var a=this;Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!a.getSizeModel().width.shrinkWrap){a.layout.align="stretch"}if(a.floating){a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes["aria-expanded"]=!!a.autoShow}},onBoxReady:function(){var b=this,c=b._iconSeparatorCls,a=b.focusableKeyNav;if(a){a.map.processEventScope=b;a.map.processEvent=function(d){if(d.keyCode===d.ESC){d.target=this.el.dom}return d};a.map.addBinding([{key:Ext.event.Event.ESC,handler:b.onEscapeKey,scope:b},{key:/[\w]/,handler:b.onShortcutKey,scope:b,shift:false,ctrl:false,alt:false}])}else{b.escapeKeyNav=new Ext.util.KeyNav(b.el,{eventName:"keydown",scope:b,esc:b.onEscapeKey})}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(b.showSeparator){b.iconSepEl=b.body.insertFirst({role:"presentation",cls:c+" "+c+"-"+b.ui,html:"&#160;"})}if(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents){b.el.on({scope:b,click:b.preventClick,translate:false})}b.mouseMonitor=b.el.monitorMouseLeave(100,b.onMouseLeave,b)},onFocusLeave:function(b){var a=this;Ext.panel.Panel.prototype.onFocusLeave.call(this,b);a.mixins.focusablecontainer.onFocusLeave.call(a,b);if(a.floating){a.hide()}},canActivateItem:function(a){return a&&a.isFocusable()},deactivateActiveItem:function(){var a=this,b=a.lastFocusedChild;if(b){b.blur()}},getItemFromEvent:function(d){var a=this,c=a.layout.getRenderTarget().dom,b=d.getTarget();while(b.parentNode!==c){b=b.parentNode;if(!b){return}}return Ext.getCmp(b.id)},lookupComponent:function(b){var a=this;if(typeof b==="string"){b=a.lookupItemFromString(b)}else{if(Ext.isObject(b)){b=a.lookupItemFromObject(b)}}if(!b.dock){b.minWidth=b.minWidth||a.minWidth}return b},lookupItemFromObject:function(b){var a=this;if(!b.isComponent){if(!b.xtype){b=Ext.create("Ext.menu."+(Ext.isBoolean(b.checked)?"Check":"")+"Item",b)}else{b=Ext.ComponentManager.create(b,b.xtype)}}if(b.isMenuItem){b.parentMenu=a}return b},lookupItemFromString:function(a){return(a==="separator"||a==="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:a})},configureItem:function(c){var b=this.owner,e="x-",d=b.ui,a,f;if(c.isMenuItem){c.setUI(d)}else{if(b.items.getCount()>1&&!c.rendered&&!c.dock){f=b._itemCmpCls;a=[f+" "+f+"-"+d];if(!b.plain&&(c.indent!==false||c.iconCls==="no-icon")){a.push(e+"menu-item-indent-"+d)}if(c.rendered){c.el.addCls(a)}else{c.cls=(c.cls||"")+" "+a.join(" ")}c.$extraMenuCls=a}}this.callParent(arguments)},onRemove:function(a){Ext.panel.Panel.prototype.onRemove.call(this,a);if(!a.destroyed&&a.$extraMenuCls){a.el.removeCls(a.$extraMenuCls)}},onClick:function(g){var f=this,c=g.type,d,b,a=c==="keydown";if(f.disabled){g.stopEvent();return}d=f.getItemFromEvent(g);if(d&&d.isMenuItem){if(!d.menu||!f.ignoreParentClicks){b=d.onClick(g)}else{g.stopEvent()}if(d.menu&&b!==false&&a){d.expandMenu(g,0)}}if(!d||d.disabled){d=undefined}f.fireEvent("click",f,d,g)},onDestroy:function(){var a=this;if(a.escapeKeyNav){a.escapeKeyNav.destroy()}a.parentMenu=a.ownerCmp=a.escapeKeyNav=null;if(a.rendered){a.el.un(a.mouseMonitor);Ext.destroy(a.iconSepEl)}Ext.menu.Manager.onHide(a);Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onMouseLeave:function(a){if(this.disabled){return}this.fireEvent("mouseleave",this,a)},onMouseOver:function(g){var f=this,h=g.getRelatedTarget(),b=!f.el.contains(h),d=f.getItemFromEvent(g),c=f.parentMenu,a=f.ownerCmp;if(b&&c){c.setActiveItem(a);a.cancelDeferHide();c.mouseMonitor.mouseenter()}if(f.disabled){return}if(d){if(!d.containsFocus){d.focus()}if(d.expandMenu){d.expandMenu(g)}}if(b){f.fireEvent("mouseenter",f,g)}f.fireEvent("mouseover",f,d,g)},setActiveItem:function(b){var a=this;if(b&&(b!==a.lastFocusedChild)){a.focusChild(b,1)}},onEscapeKey:function(){if(this.floating){this.hide()}},onShortcutKey:function(h,g){var b=String.fromCharCode(g.getCharCode()),c=this.query(">[text]"),a=c.length,f=this.lastFocusedChild,j=Ext.Array.indexOf(c,f),d=j;for(;;){if(++d===a){d=0}f=c[d];if(d===j){return}if(f.text&&f.text[0].toUpperCase()===b){f.focus();return}}},onFocusableContainerTabKey:function(a){if(this.floating){this.hide()}},onFocusableContainerEnterKey:function(a){this.onClick(a)},onFocusableContainerSpaceKey:function(a){this.onClick(a)},onFocusableContainerLeftKey:function(a){a.preventDefault();if(this.parentMenu){this.ownerCmp.focus();this.hide()}},onFocusableContainerRightKey:function(b){var a=this,c=a.lastFocusedChild;b.preventDefault();if(c&&c.expandMenu){c.expandMenu(b,0)}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer){return false}},beforeShow:function(){var c=this,b,d,a;if(c.floating){b=c.hasFloatMenuParent();if(!b&&!c.allowOtherMenus){Ext.menu.Manager.hideAll()}if(b){c.focusAnchor=b.focusAnchor}else{d=Ext.Element.getActiveElement();if(d===document.body||d===document.documentElement){c.focusAnchor=null}else{c.focusAnchor=d}}c.savedMaxHeight=c.maxHeight;a=c.container.getViewSize().height;c.maxHeight=Math.min(c.maxHeight||a,a)}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var b=this,a=b.ariaEl.dom;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);Ext.menu.Manager.onShow(b);if(b.floating&&a){a.setAttribute("aria-expanded",true)}if(b.floating&&b.autoFocus){b.maxHeight=b.savedMaxHeight;b.focus()}},onHide:function(f,c,d){var e=this,b=e.ariaEl.dom,a;if(e.el.contains(Ext.Element.getActiveElement())){a=e.focusAnchor||e.ownerCmp||e.up(":focusable");if(a){e.previousFocus=a}}Ext.panel.Panel.prototype.onHide.call(this,f,c,d);e.lastHide=Ext.Date.now();Ext.menu.Manager.onHide(e);if(e.floating&&b){b.setAttribute("aria-expanded",false)}},preventClick:function(b){var a=this.getItemFromEvent(b);if(a&&a.isMenuItem&&!a.href){b.preventDefault()}},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(b,a){var c=this;c.parentMenu=b.isMenuItem?b:null;c.ownerCmp=b;c.registerWithOwnerCt();delete c.hierarchicallyHidden;c.onInheritedAdd(b,a);c.containerOnAdded(b,a)}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.menu,"Menu"],0));Ext.define("Ext.theme.neptune.menu.Menu",{override:"Ext.menu.Menu",showSeparator:false});(Ext.cmd.derive("Ext.grid.locking.HeaderContainer",Ext.grid.header.Container,{headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(b){var a=this,d=b.lockedGrid,c=b.normalGrid;a.lockable=b;Ext.grid.header.Container.prototype.constructor.call(this);d.visibleColumnManager.rootColumns=c.visibleColumnManager.rootColumns=b.visibleColumnManager=a.visibleColumnManager=new Ext.grid.ColumnManager(true,d.headerCt,c.headerCt);d.columnManager.rootColumns=c.columnManager.rootColumns=b.columnManager=a.columnManager=new Ext.grid.ColumnManager(false,d.headerCt,c.headerCt);a.lockedEventRelayers=a.relayEvents(d.headerCt,a.headerCtRelayEvents);a.normalEventRelayers=a.relayEvents(c.headerCt,a.headerCtRelayEvents)},destroy:function(){var a=this;Ext.destroy(a.lockedEventRelayers,a.normalEventRelayers);a.lockedEventRelayers=a.normalEventRelayers=null;Ext.grid.header.Container.prototype.destroy.call(this)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var b=this,a=b.lockable.lockedGrid.headerCt.getColumnsState(),c=b.lockable.normalGrid.headerCt.getColumnsState();return a.concat(c)},applyColumnsState:function(h,d){var p=this,f=p.lockable.lockedGrid,g=f.headerCt,n=p.lockable.normalGrid.headerCt,q=Ext.Array.toValueMap(g.items.items,"stateId"),j=Ext.Array.toValueMap(n.items.items,"stateId"),m=[],o=[],l=1,b=h.length,k,a,e,c;for(k=0;k<b;k++){c=h[k];e=q[c.id];a=e||j[c.id];if(a){if(a.applyColumnState){a.applyColumnState(c,d)}if(a.locked===undefined){a.locked=!!e}if(a.locked){m.push(a);if(!a.hidden&&typeof a.width==="number"){l+=a.width}}else{o.push(a)}}}if(m.length+o.length===g.items.getCount()+n.items.getCount()){g.removeAll(false);n.removeAll(false);g.add(m);n.add(o);f.setWidth(l)}},disable:function(){var a=this.lockable;a.lockedGrid.headerCt.disable();a.normalGrid.headerCt.disable()},enable:function(){var a=this.lockable;a.lockedGrid.headerCt.enable();a.normalGrid.headerCt.enable()}},1,0,["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},0,0,[Ext.grid.locking,"HeaderContainer"],0));(Ext.cmd.derive("Ext.grid.locking.View",Ext.Base,{alternateClassName:"Ext.grid.LockingView",isLockingView:true,loadMask:true,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(a){var c=Ext,e=this,d,b;e.ownerGrid=a.ownerGrid;e.ownerGrid.view=e;e.navigationModel=a.locked.xtype==="treepanel"?new c.tree.NavigationModel(e):new c.grid.NavigationModel(e);a.locked.viewConfig.bindStore=c.emptyFn;a.normal.viewConfig.bindStore=e.subViewBindStore;a.normal.viewConfig.isNormalView=a.locked.viewConfig.isLockedView=true;a.locked.viewConfig.beforeLayout=a.normal.viewConfig.beforeLayout=e.beforeLayout;a.locked.viewConfig.navigationModel=a.normal.viewConfig.navigationModel=e.navigationModel;e.lockedGrid=e.ownerGrid.lockedGrid=c.ComponentManager.create(a.locked);e.lockedView=d=e.lockedGrid.getView();e.selModel=a.normal.viewConfig.selModel=d.getSelectionModel();if(e.lockedGrid.isTree){e.lockedView.animate=false;a.normal.store=d.store;a.normal.viewConfig.stripeRows=e.lockedView.stripeRows;a.normal.rowLines=e.lockedGrid.rowLines}e.normalGrid=e.ownerGrid.normalGrid=c.ComponentManager.create(a.normal);d.lockingPartner=b=e.normalView=e.normalGrid.getView();b.lockingPartner=d;e.loadMask=(a.loadMask!==undefined)?a.loadMask:e.loadMask;e.mixins.observable.constructor.call(e);e.lockedViewEventRelayers=e.relayEvents(d,c.view.Table.events);e.normalViewEventRelayers=e.relayEvents(b,c.view.Table.events.concat(c.view.Table.normalSideEvents));b.on({scope:e,itemmouseleave:e.onItemMouseLeave,itemmouseenter:e.onItemMouseEnter});d.on({scope:e,itemmouseleave:e.onItemMouseLeave,itemmouseenter:e.onItemMouseEnter});e.ownerGrid.on({render:e.onPanelRender,scope:e});e.loadingText=b.loadingText;e.loadingCls=b.loadingCls;e.loadingUseMsg=b.loadingUseMsg;e.itemSelector=e.getItemSelector();e.all=b.all;e.bindStore(b.dataSource,true,"dataSource")},subViewBindStore:function(b){var c=this,a;if(c.destroying||c.destroyed){return}a=c.getSelectionModel();a.bindStore(b);a.bindComponent(c)},beforeLayout:function(){var c=this.ownerCt.ownerLockable.view,b=c.lockedGrid.view,a=c.normalGrid.view;if(!c.relayingOperation){if(c.lockedGrid.isVisible()){if(b.refreshNeeded){b.doFirstRefresh(b.dataSource)}}if(a.refreshNeeded){a.doFirstRefresh(a.dataSource)}}},onPanelRender:function(){var c=this,b=c.loadMask,a={target:c.ownerGrid,msg:c.loadingText,msgCls:c.loadingCls,useMsg:c.loadingUseMsg,store:c.ownerGrid.store};c.el=c.ownerGrid.getTargetEl();c.rendered=true;c.initFocusableEvents();c.fireEvent("render",c);if(b){if(Ext.isObject(b)){a=Ext.apply(a,b)}c.loadMask=new Ext.LoadMask(a)}},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(a){return this.getViewForColumn(a).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},getViewForColumn:function(b){var a=this.lockedView,c;a.headerCt.cascade(function(d){if(d===b){c=true;return false}});return c?a:this.normalView},onItemMouseEnter:function(c,b){var f=this,d=f.lockedView,a=f.normalView,e;if(c.trackOver){if(c!==d){a=d}e=a.getNode(b);a.highlightItem(e)}},onItemMouseLeave:function(c,b){var e=this,d=e.lockedView,a=e.normalView;if(c.trackOver){if(c!==d){a=d}a.clearHighlight()}},relayFn:function(c,b){b=b||[];var d=this,a=d.lockedView;d.relayingOperation=true;a[c].apply(a,b);a=d.normalView;a[c].apply(a,b);d.relayingOperation=false},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(a,b,f){var e=this,d=e.lockedView,c=e.normalView;if(c.componentLayoutCounter&&!(d.blockRefresh&&c.blockRefresh)){Ext.suspendLayouts();d.doFirstRefresh(a);c.doFirstRefresh(a);Ext.resumeLayouts(true)}},getStoreListeners:function(){var a=this;return{priority:1000,refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){Ext.suspendLayouts();this.relayFn("onBeginUpdate",arguments);Ext.resumeLayouts(true)},onEndUpdate:function(){Ext.suspendLayouts();this.relayFn("onEndUpdate",arguments);Ext.resumeLayouts(true)},onDataRefresh:function(){Ext.suspendLayouts();this.relayFn("onDataRefresh",arguments);Ext.resumeLayouts(true)},onReplace:function(){Ext.suspendLayouts();this.relayFn("onReplace",arguments);Ext.resumeLayouts(true)},onAdd:function(){Ext.suspendLayouts();this.relayFn("onAdd",arguments);Ext.resumeLayouts(true)},onRemove:function(){Ext.suspendLayouts();this.relayFn("onRemove",arguments);Ext.resumeLayouts(true)},setActionableMode:function(d,b){var a,c;if(d){if(!b){b=this.getNavigationModel().getPosition()}if(b){b=b.clone();b.view=c=b.column.getView();a=c.setActionableMode(d,b);if(a!==false&&c.lockingPartner.grid.isVisible()){c.lockingPartner.setActionableMode(d,b);if(!c.lockingPartner.actionableMode){c.setActionableMode(false);a=false}}return a}else{return false}}else{this.relayFn("setActionableMode",[false])}},onUpdate:function(){Ext.suspendLayouts();this.relayFn("onUpdate",arguments);Ext.resumeLayouts(true)},refresh:function(){Ext.suspendLayouts();this.relayFn("refresh",arguments);Ext.resumeLayouts(true)},refreshView:function(){Ext.suspendLayouts();this.relayFn("refreshView",arguments);Ext.resumeLayouts(true)},getNode:function(a){return this.normalView.getNode(a)},getRow:function(a){return this.normalView.getRow(a)},getCell:function(b,c){var a=this.getViewForColumn(c),d=a.getRow(b);return Ext.fly(d).down(c.getCellSelector())},indexOf:function(b){var a=this.lockedView.indexOf(b);if(!a){a=this.normalView.indexOf(b)}return a},focus:function(){var a=this.ownerGrid.down(">tablepanel:not(hidden)>tableview");if(a){a.focus()}},focusRow:function(c){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;a.focusRow(c)},focusCell:function(a){a.view.focusCell(a)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(a){return this.ownerGrid.isVisible(a)},getFocusEl:function(){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;return a.getFocusEl()},getCellInclusive:function(d,b){var a=d.column,c=this.lockedGrid.getColumnManager().getColumns().length;if(a>=c){d=Ext.apply({},d);d.column-=c;return this.normalView.getCellInclusive(d,b)}else{return this.lockedView.getCellInclusive(d,b)}},getHeaderByCell:function(a){if(a){return this.getVisibleColumnManager().getHeaderById(a.getAttribute("data-columnId"))}return false},onRowSelect:function(){this.relayFn("onRowSelect",arguments)},onRowDeselect:function(){this.relayFn("onRowDeselect",arguments)},onCellSelect:function(a){a.column.getView().onCellSelect({record:a.record,column:a.column})},onCellDeselect:function(a){a.column.getView().onCellDeselect({record:a.record,column:a.column})},getCellByPosition:function(e,c){var d=this,a=e.view,b=e.column;if(a===d){e=new Ext.grid.CellContext(b.getView()).setPosition(e.record,e.column)}return a.getCellByPosition(e,c)},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!a){a=this.normalView.getRecord(b)}return a},scrollBy:function(){var a=this.normalView;a.scrollBy.apply(a,arguments)},ensureVisible:function(){var a=this.normalView;a.ensureVisible.apply(a,arguments)},disable:function(){this.relayFn("disable",arguments)},enable:function(){this.relayFn("enable",arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var a=this;a.rendered=false;a.bindStore(null,false,"dataSource");Ext.destroy(a.lockedViewEventRelayers,a.normalViewEventRelayers);a.lockedViewEventRelayers=a.normalViewEventRelayers=null;a.callParent();Ext.destroy(a.loadMask,a.navigationModel,a.selModel);a.lockedView.lockingPartner=a.normalView.lockingPartner=null;a.lockedGrid=a.lockedView=a.normalGrid=a.normalView=null;a.loadMask=a.navigationModel=a.selModel=a.headerCt=null;a.ownerGrid=a.storeListeners=null}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext.grid.locking,"View",Ext.grid,"LockingView"],function(){this.borrow(Ext.Component,["up"]);this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"]);this.borrow(Ext.view.Table,["cellSelector","selectedCellCls","selectedItemCls"])}));(Ext.cmd.derive("Ext.grid.locking.Lockable",Ext.Base,{alternateClassName:"Ext.grid.Lockable",syncRowHeight:true,headerCounter:0,scrollDelta:40,lockedGridCls:"x-grid-inner-locked",normalGridCls:"x-grid-inner-normal",lockingBodyCls:"x-grid-locking-body",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer","syncRowHeight"],normalCfgCopy:["scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(e){var c=this,g,d,b,f,a;if(c.subGridXType){g=c.subGridXType}else{if(!e){return"gridpanel"}d=this.getXTypes().split("/");b=d.length;f=d[b-1];a=d[b-2];if(a!=="tablepanel"){g=a}else{g=f}}return g},injectLockable:function(){this.focusable=false;this.lockable=true;this.hasView=true;var v=this,k=Ext.getScrollbarSize(),o=k.width,e=v.store=Ext.StoreManager.lookup(v.store),c=v.lockedViewConfig,u=v.normalViewConfig,m=Ext.Object,h,j,s,g,l,b,f,r,t=v.viewConfig,a=t&&t.loadMask,n=(a!==undefined)?a:v.loadMask,p=v.bufferedRenderer,q=o>0&&Ext.supports.touchScroll!==2,d=v.getInherited().rtl;h=v.constructLockableFeatures();v.features=null;j=v.constructLockablePlugins();v.plugins=j.topPlugins;s={id:v.id+"-locked",$initParent:v,isLocked:true,bufferedRenderer:p,ownerGrid:v,ownerLockable:v,xtype:v.determineXTypeToCreate(true),store:e,reserveScrollbar:q,scrollable:{indicators:{x:true,y:false}},scrollerOwner:false,animate:false,border:false,cls:v.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||v.normalGrid.floatedFromCollapse},features:h.lockedFeatures,plugins:j.lockedPlugins};g={id:v.id+"-normal",$initParent:v,isLocked:false,bufferedRenderer:p,ownerGrid:v,ownerLockable:v,xtype:v.determineXTypeToCreate(),store:e,reserveScrollbar:v.reserveScrollbar,scrollerOwner:false,border:false,cls:v.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||v.lockedGrid.floatedFromCollapse},features:h.normalFeatures,plugins:j.normalPlugins};v.addCls("x-grid-locked");Ext.copy(g,v,v.bothCfgCopy,true);Ext.copy(s,v,v.bothCfgCopy,true);Ext.copy(g,v,v.normalCfgCopy,true);Ext.copy(s,v,v.lockedCfgCopy,true);Ext.apply(g,v.normalGridConfig);Ext.apply(s,v.lockedGridConfig);for(l=0;l<v.normalCfgCopy.length;l++){delete v[v.normalCfgCopy[l]]}for(l=0;l<v.lockedCfgCopy.length;l++){delete v[v.lockedCfgCopy[l]]}v.addStateEvents(["lockcolumn","unlockcolumn"]);b=v.processColumns(v.columns||[],s);s.columns=b.locked;if(!s.columns.items.length){s.hidden=true}g.columns=b.normal;if(!g.columns.items.length){g.hidden=true}g.flex=1;s.viewConfig=c=(c?m.chain(c):{});g.viewConfig=u=(u?m.chain(u):{});c.loadingUseMsg=false;c.loadMask=false;if(q){if(d){c.margin="0 0 0 -"+o+"px"}else{c.margin="0 -"+o+"px 0 0"}}u.loadMask=false;Ext.applyIf(c,t);Ext.applyIf(u,t);if(!v.initialConfig.layout){v.layout={type:"hbox",align:"stretch"}}v.getLayout();if(v.layout.type==="border"){if(v.split){s.split=true}if(!s.region){s.region="west"}if(!g.region){g.region="center"}v.addCls("x-grid-locked-split")}if(!(v.layout instanceof Ext.layout.container.Box)){v.split=false}v.view=new Ext.grid.locking.View({loadMask:n,locked:s,normal:g,ownerGrid:v});s=v.lockedGrid;g=v.normalGrid;g.getView().getScrollable().addPartner(s.getView().getScrollable(),"y");if(k.height&&Ext.supports.touchScroll!==2){s.on({afterlayout:v.afterLockedViewLayout,scope:v});s.getView().getOverflowStyle()}f=s.headerCt;r=g.headerCt;if(q&&!d){f.reserveScrollbar=false}v.headerCt=v.view.headerCt=new Ext.grid.locking.HeaderContainer(v);f.lockedCt=true;f.lockableInjected=true;r.lockableInjected=true;f.on({add:v.delaySyncLockedWidth,remove:v.delaySyncLockedWidth,columnshow:v.delaySyncLockedWidth,columnhide:v.delaySyncLockedWidth,sortchange:v.onLockedHeaderSortChange,columnresize:v.delaySyncLockedWidth,scope:v});r.on({add:v.delaySyncLockedWidth,remove:v.delaySyncLockedWidth,columnshow:v.delaySyncLockedWidth,columnhide:v.delaySyncLockedWidth,sortchange:v.onNormalHeaderSortChange,scope:v});v.modifyHeaderCt();v.items=[s];if(v.split){v.addCls("x-grid-locked-split");v.items[1]={xtype:"splitter"}}v.items.push(g);v.relayHeaderCtEvents(f);v.relayHeaderCtEvents(r);v.storeRelayers=v.relayEvents(e,["filterchange","groupchange","beforeload","load"]);v.gridRelayers=v.relayEvents(g,["viewready"])},afterInjectLockable:function(){delete this.lockedGrid.$initParent;delete this.normalGrid.$initParent},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(f,d){var m=this,g,j,e,l=new Ext.grid.header.Container({"$initParent":m}),k=[],c=[],b={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:k},h={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:c},n={locked:b,normal:h},a;if(Ext.isObject(f)){Ext.applyIf(b,f);Ext.applyIf(h,f);a=Ext.apply({},f);delete a.items;Ext.apply(l,a);f=f.items}l.constructing=true;for(g=0,j=f.length;g<j;++g){e=f[g];if(!e.isComponent){e=l.applyDefaults(e);e.$initParent=l;e=l.lookupComponent(e);delete e.$initParent}e.processed=true;if(e.locked||e.autoLock){k.push(e)}else{c.push(e)}}m.fireEvent("processcolumns",m,k,c);l.destroy();return n},afterLockedViewLayout:function(){var d=this,a=d.lockedGrid,c=d.normalGrid,i=a.getView(),b=c.getView(),h=i.scrollFlags.x&&a.headerCt.tooNarrow,g=b.scrollFlags.x&&c.headerCt.tooNarrow,e=b.getScrollable(),f=i.getScrollable();if(h!==g){if(h){e.setX("scroll");f.setX(true)}else{f.setX("scroll");e.setX(true)}}else{f.setX(g?"scroll":true);e.setX(true)}},ensureLockedVisible:function(){this.lockedGrid.ensureVisible.apply(this.lockedGrid,arguments);this.normalGrid.ensureVisible.apply(this.normalGrid,arguments)},onLockedViewMouseWheel:function(i){var d=this,a=-d.scrollDelta*i.getWheelDeltas().y,c=d.lockedGrid.getView(),f=c.el.dom,h,b,g;if(!d.ignoreMousewheel){if(f){h=c.getScrollY();b=h!==f.scrollHeight-f.clientHeight;g=h!==0}if((a<0&&g)||(a>0&&b)){i.stopEvent();h+=a;c.setScrollY(h);d.normalGrid.getView().setScrollY(h);d.onNormalViewScroll()}}},onLockedViewScroll:function(){var f=this,e=f.lockedGrid.getView(),d=f.normalGrid.getView(),c=e.getScrollY(),g=d.getScrollY(),a,b;if(g!==c){d.setScrollY(c);if(d.bufferedRenderer){b=e.body.dom;a=d.body.dom;a.style.position="absolute";a.style.top=b.style.top}}},onNormalViewScroll:function(){var d=this,c=d.lockedGrid.getView(),b=d.normalGrid.getView(),a=c.getScrollY(),f=b.getScrollY(),e;if(f!==a){c.setScrollY(f);if(b.bufferedRenderer){e=c.body;if(e.dom){e.dom.style.position="absolute";e.translate(null,b.bufferedRenderer.bodyTop)}}}},syncRowHeights:function(){if(!this.destroyed){var d=this,b=d.normalGrid.getView(),c=d.lockedGrid.getView(),f=b.syncRowHeightBegin(),a=c.syncRowHeightBegin(),e;b.syncRowHeightMeasure(f);c.syncRowHeightMeasure(a);b.syncRowHeightFinish(f,a);c.syncRowHeightFinish(a,f);e=b.getScrollY();c.setScrollY(e)}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(a.lockedGrid.headerCt.getMenuItems,true);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(a.normalGrid.headerCt.getMenuItems,false);a.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.lockedGrid.headerCt.showMenuBy,a.showMenuBy);a.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.normalGrid.headerCt.showMenuBy,a.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(a,c,g){var f=this.getMenu(),d=f.down("#unlockItem"),e=f.down("#lockItem"),b=d.prev();if(g.lockable===false){b.hide();d.hide();e.hide()}else{b.show();d.show();e.show();if(!d.initialConfig.disabled){d.setDisabled(g.lockable===false)}if(!e.initialConfig.disabled){e.setDisabled(!g.isLockable())}}},getMenuItems:function(f,c){var g=this,h=g.unlockText,a=g.lockText,i="x-hmenu-unlock",b="x-hmenu-lock",e=g.onUnlockMenuClick.bind(g),d=g.onLockMenuClick.bind(g);return function(){var j=f.call(this);j.push("-",{itemId:"unlockItem",iconCls:i,text:h,handler:e,disabled:!c});j.push({itemId:"lockItem",iconCls:b,text:a,handler:d,disabled:c});return j}},delaySyncLockedWidth:function(){var b=this,a=b.syncLockedWidthTask;if(!b.view.all.getCount()){return}if(!a){a=b.syncLockedWidthTask=new Ext.util.DelayedTask(b.syncLockedWidth,b)}a.delay(1)},syncLockedWidth:function(){var e=this,h=e.rendered,c=e.lockedGrid,d=c.view,g=e.normalGrid,f=c.getVisibleColumnManager().getColumns().length,a=g.getVisibleColumnManager().getColumns().length,b=e.syncLockedWidthTask;if(b){b.cancel()}Ext.suspendLayouts();if(a){g.show();if(f){if(h&&c.shrinkWrapColumns&&!c.headerCt.forceFit){delete c.flex;c.setWidth(c.headerCt.getTableWidth()+c.gridPanelBorderWidth)}c.addCls(e.lockedGridCls);c.show();if(c.split){e.child("splitter").show();e.addCls("x-grid-locked-split")}}else{if(h){c.getView().clearViewEl(true)}c.hide();if(c.split){e.child("splitter").hide();e.removeCls("x-grid-locked-split")}}if(Ext.supports.touchScroll!==2&&Ext.Component.pendingLayouts){d.getScrollable().setX(true)}if(h){e.ignoreMousewheel=d.scrollFlags.y}}else{g.hide();c.flex=1;delete c.width;c.removeCls(e.lockedGridCls);c.show();e.ignoreMousewheel=true}Ext.resumeLayouts(true);return[f,a]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(f,k,e){var h=this,g=h.normalGrid,c=h.lockedGrid,d=g.view,m=c.view,j=g.headerCt,i,a,b,l;f=f||j.getMenu().activeHeader;b=f.hasFocus;e=e||c.headerCt;a=f.ownerCt;if(!f.isLockable()){return}if(f.flex&&c.shrinkWrapColumns){f.width=f.getWidth();f.flex=null}Ext.suspendLayouts();if(c.hidden){if(!c.componentLayoutCounter){if(m.bufferedRenderer){m.bufferedRenderer.onViewResize(m,0,d.getHeight())}l=d.getScrollY()}c.show()}d.blockRefresh=m.blockRefresh=true;f.ownerCmp=f.ownerCt;a.remove(f,false);f.locked=true;if(Ext.isDefined(k)){e.insert(k,f)}else{e.add(f)}d.blockRefresh=m.blockRefresh=false;f.ownerCmp=null;i=h.syncLockedWidth();if(i[0]){c.getView().refreshView()}if(i[1]){g.getView().refreshView()}h.fireEvent("lockcolumn",h,f);Ext.resumeLayouts(true);if(l){m.setScrollY(l);d.setScrollY(l)}if(b){f.focus()}},unlock:function(e,j,d){var g=this,f=g.normalGrid,b=g.lockedGrid,c=f.view,k=b.view,i=b.headerCt,h,a;if(!Ext.isDefined(j)){j=0}e=e||i.getMenu().activeHeader;a=e.hasFocus;d=d||f.headerCt;Ext.suspendLayouts();c.blockRefresh=k.blockRefresh=true;e.ownerCmp=e.ownerCt;e.ownerCt.remove(e,false);e.locked=false;d.insert(j,e);c.blockRefresh=k.blockRefresh=false;e.ownerCmp=null;h=g.syncLockedWidth();if(h[0]){b.getView().refreshView()}if(h[1]){f.getView().refreshView()}g.fireEvent("unlockcolumn",g,e);Ext.resumeLayouts(true);if(a){e.focus()}},reconfigureLockable:function(b,c){var e=this,h=e.store,g=e.lockedGrid,f=e.normalGrid,a,d;if(b&&b!==h){b=Ext.data.StoreManager.lookup(b);e.store=b;g.view.blockRefresh=f.view.blockRefresh=true;g.bindStore(b);a=g.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}if(a.bufferedRenderer){a.bufferedRenderer.bindStore(b)}f.bindStore(b);a=f.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}if(a.bufferedRenderer){a.bufferedRenderer.bindStore(b)}e.view.store=b;d=e.view.loadMask;if(d&&d.isLoadMask){d.bindStore(b)}e.view.bindStore(f.view.dataSource,false,"dataSource");g.view.blockRefresh=f.view.blockRefresh=false}if(c){g.reconfiguring=f.reconfiguring=true;g.headerCt.removeAll();f.headerCt.removeAll();c=e.processColumns(c,g);g.headerCt.add(c.locked.items);f.headerCt.add(c.normal.items);g.reconfiguring=f.reconfiguring=false;e.syncLockedWidth()}e.refreshCounter=g.view.refreshCounter},afterReconfigureLockable:function(){var a=this.lockedGrid.getView();if(this.refreshCounter===a.refreshCounter){this.view.refresh()}},constructLockableFeatures:function(){var e=this.features,c,d,f,g,b=0,a;if(e){if(!Ext.isArray(e)){e=[e]}f=[];g=[];a=e.length;for(;b<a;b++){c=e[b];if(!c.isFeature){c=Ext.create("feature."+c.ftype,c)}switch(c.lockableScope){case"locked":f.push(c);break;case"normal":g.push(c);break;default:c.lockableScope="both";f.push(c);g.push(d=c.clone());d.lockingPartner=c;c.lockingPartner=d}}}return{normalFeatures:g,lockedFeatures:f}},constructLockablePlugins:function(){var c=this.plugins,g,b,a,j,k,e,f=0,h,l,d;if(c){if(!Ext.isArray(c)){c=[c]}j=[];k=[];e=[];h=c.length;for(;f<h;f++){g=c[f];if(g.init){l=g.lockableScope}else{d=g.ptype?Ext.ClassManager.getByAlias(("plugin."+g.ptype)):Ext.ClassManager.get(g.xclass);l=d.prototype.lockableScope}switch(l){case"both":k.push(a=g.clonePlugin());e.push(b=g.clonePlugin());a.lockingPartner=b;b.lockingPartner=a;Ext.destroy(g);break;case"locked":k.push(g);break;case"normal":e.push(g);break;default:j.push(g)}}}return{topPlugins:j,normalPlugins:e,lockedPlugins:k}},destroyLockable:function(){var b=this,a=b.syncLockedWidthTask;if(a){a.cancel();b.syncLockedWidthTask=null}if(b.lockedGrid&&b.lockedGrid.headerCt){b.lockedGrid.headerCt.showMenuBy=null}if(b.normalGrid&&b.normalGrid.headerCt){b.normalGrid.headerCt.showMenuBy=null}Ext.destroy(b.view,b.headerCt)}},0,0,0,0,0,0,[Ext.grid.locking,"Lockable",Ext.grid,"Lockable"],function(){this.borrow(Ext.Component,["constructPlugin"])}));(Ext.cmd.derive("Ext.grid.plugin.BufferedRenderer",Ext.AbstractPlugin,{isBufferedRenderer:true,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:true,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,init:function(c){var d=this,a=c.view,b={scroll:d.onViewScroll,scrollend:d.onViewScrollEnd,refresh:d.onViewRefresh,columnschanged:d.checkVariableRowHeight,boxready:d.onViewBoxReady,scope:d,destroyable:true},e=a.initialConfig;if(c.isTree||(c.ownerLockable&&c.ownerLockable.isTree)){a.blockRefresh=false;if(e&&e.loadMask===undefined){a.loadMask=true}}if(a.positionBody){b.refresh=d.onViewRefresh}if(Ext.isWebKit&&Ext.supports.touchScroll!==2){d.needsPointerEventsFix=true;b.scrollEnd=d.onViewScrollEnd}d.grid=c;d.view=a;d.isRTL=a.getInherited().rtl;a.bufferedRenderer=d;a.preserveScrollOnRefresh=true;a.animate=false;d.bindStore(a.dataSource);if(a.hasOwnProperty("rowHeight")){d.rowHeight=a.rowHeight}d.position=0;d.viewListeners=a.on(b)},checkVariableRowHeight:function(){this.variableRowHeight=this.view.hasVariableRowHeight()},bindStore:function(c){var d=this,a=d.store,b=d.view;if(a&&a.isFeatureStore){return}if(a){d.unbindStore()}d.storeListeners=c.on({scope:d,groupchange:d.onStoreGroupChange,clear:d.onStoreClear,beforeload:d.onBeforeStoreLoad,load:d.onStoreLoad,destroyable:true});d.store=c;if(d.view.componentLayout.layoutCount){delete d.viewSize;if(c.isBufferedStore){c.setViewSize(d.viewSize)}d.onViewResize(d.view,0,d.view.getHeight())}},unbindStore:function(){this.storeListeners.destroy();this.storeListeners=this.store=null},onBeforeStoreLoad:function(b){var c=this,a=c.view;if(a&&a.refreshCounter){if(b.isTreeStore||a.preserveScrollOnReload){c.nextRefreshStartIndex=a.all.startIndex}else{if(c.scrollTop!==0){c.setBodyTop(c.bodyTop=c.scrollTop=c.position=c.scrollHeight=c.nextRefreshStartIndex=0);a.setScrollY(0)}}c.lastScrollDirection=c.scrollOffset=null}c.disable()},onStoreLoad:function(){this.enable()},onStoreClear:function(){var b=this,a=b.view;if(a.rendered&&!b.store.destroyed){if(b.scrollTop!==0){b.bodyTop=b.scrollTop=b.position=b.scrollHeight=0;b.nextRefreshStartIndex=null;a.setScrollY(0)}a.refresh();b.lastScrollDirection=b.scrollOffset=null}},onStoreGroupChange:function(a){this.refreshSize()},onViewBoxReady:function(a){this.refreshScroller(a,this.scrollHeight)},onViewRefresh:function(b,c){var d=this,e=b.all,a;d.checkVariableRowHeight();if(!b.componentLayoutCounter&&(b.headerCt.down("{flex}")||d.variableRowHeight)){b.on({boxready:Ext.Function.pass(d.onViewRefresh,[b,c],d),single:true});d.skipNextRefreshSize=true;return}d.skipNextRefreshSize=false;if(d.refreshing){return}d.refreshSize();if(d.scrollTop!==b.getScrollY()){d.onViewScroll();d.onViewScrollEnd()}else{if(!d.hasOwnProperty("bodyTop")){d.bodyTop=e.startIndex*d.rowHeight;b.setScrollY(d.bodyTop)}d.setBodyTop(d.bodyTop);a=b.getHeight();if(e.getCount()&&a>0){d.onViewResize(b,null,a);if(c&&(e.getCount()!==c.length)){c.length=0;c.push.apply(c,d.store.getRange(e.startIndex,e.endIndex))}}}},beforeTableLayout:function(a){var b=this.view.body.dom;if(b){a.bodyHeight=b.offsetHeight;a.bodyWidth=b.offsetWidth}},afterTableLayout:function(d){var b=this,a=b.view,c;if(d.bodyHeight&&a.body.dom){delete b.rowHeight;b.refreshSize();c=a.body.dom.offsetHeight;if(c!==d.bodyHeight){b.onViewResize(a,null,a.el.lastBox.height);if(c<d.bodyHeight){if(b.viewSize>=b.store.getCount()){b.setBodyTop(0)}else{if(b.bodyTop>b.scrollTop||b.bodyTop+c<b.scrollTop+b.viewClientHeight){b.setBodyTop(b.scrollTop-b.trailingBufferZone*b.rowHeight)}}}if(a.all.endIndex===(a.dataSource.getCount())-1){b.stretchView(a,b.scrollHeight=b.bodyTop+c-1)}}}},refreshSize:function(){var b=this,a=b.view,c=b.skipNextRefreshSize,d=a.body.dom;b.skipNextRefreshSize=false;if(c||!d){return}b.bodyHeight=a.body.dom.offsetHeight;b.scrollHeight=b.getScrollHeight();b.stretchView(a,b.scrollHeight)},onViewResize:function(c,e,a,b,g){var f=this,d;if(!g||a!==g){d=Math.ceil(a/f.rowHeight)+f.trailingBufferZone+f.leadingBufferZone;f.viewSize=f.setViewSize(d);f.viewClientHeight=c.el.dom.clientHeight}},stretchView:function(b,a){var c=this;if(c.scrollTop>a){c.position=c.scrollTop=Math.max(a-c.bodyHeight,0);b.setScrollY(c.scrollTop)}if(c.bodyTop>a){b.body.translate(null,c.bodyTop=c.position)}if(b.getScrollable()){c.refreshScroller(b,a)}},refreshScroller:function(c,b){var a=c.getScrollable();if(a){if(a.setElementSize){a.setElementSize()}a.setSize({x:c.headerCt.getTableWidth(),y:b})}},setViewSize:function(k,c){var j=this,n=j.store,l=j.view,o=l.all,f=o.getCount(),b,e,h=j.view.lockingPartner&&j.view.lockingPartner.bufferedRenderer,m=f-k,d,a,g,i;if(h&&!c&&h.view.componentLayoutCounter){if(h.viewSize>k){k=h.viewSize}else{h.setViewSize(k,true)}}m=f-k;if(m){j.scrollTop=l.getScrollY();j.viewSize=k;if(n.isBufferedStore){n.setViewSize(k)}if(f){i=n.getCount();b=o.startIndex;e=Math.min(b+k-1,i-1);if(b===o.startIndex&&e===o.endIndex){if(m<0){j.handleViewScroll(-1)}}else{if(h){h.disable()}if(m<0){if(i>f){n.getRange(o.endIndex+1,e,{callback:function(p,q){g=l.doAdd(p,q);l.fireEvent("itemadd",p,q,g);j.setBodyTop(j.bodyTop)}})}else{j.refreshView(0)}}else{b=o.endIndex-(m-1);e=o.endIndex;a=o.slice(b,e+1);o.removeRange(b,e,true);if(l.hasListeners.itemremove){d=n.getRange(b,e);l.fireEvent("itemremove",d,b,a)}j.setBodyTop(j.bodyTop)}if(h){h.enable()}}}}return k},getViewRange:function(){var b=this,c=b.view.all,a=b.store,d=0;if(c.getCount()){d=c.startIndex}else{if(a.isBufferedStore){if(!a.currentPage){a.currentPage=1}d=c.startIndex=(a.currentPage-1)*(a.pageSize||1);a.currentPage=1}}if(a.data.getCount()){return a.getRange(d,d+(b.viewSize||a.defaultViewSize)-1)}else{return[]}},onReplace:function(i,j,e,f){var g=this,h=g.view,l=h.all,a,d=l.getCount(),c=j+e.length-1,k=f.length-e.length,b=k*g.rowHeight;if(j>=l.startIndex+g.viewSize){g.refreshSize();return}if(d&&c<l.startIndex&&l.getCount()>=g.viewSize){l.moveBlock(k);g.refreshSize();a=l.startIndex;if(k>0){g.doNotMirror=true;g.handleViewScroll(-1);g.doNotMirror=false}if(l.startIndex===a){if(l.startIndex){g.setBodyTop(g.bodyTop+=b);h.suspendEvent("scroll");h.scrollBy(0,b);h.resumeEvent("scroll");g.position=g.scrollTop=h.getScrollY()}}else{h.suspendEvent("scroll");h.scrollBy(0,(a-l.startIndex)*g.rowHeight);h.resumeEvent("scroll")}h.refreshSize(l.getCount()!==d);return}if(d&&j>l.endIndex){g.refreshSize();if(k>0){g.onRangeFetched(null,l.startIndex,Math.min(i.getCount(),l.startIndex+g.viewSize)-1,null,true)}h.refreshSize(l.getCount()!==d);return}if(j<l.startIndex&&c<=l.endIndex){g.refreshView(l.startIndex-e.length+f.length);return}if(j<l.startIndex&&c<=l.endIndex&&b){h.suspendEvent("scroll");h.setScrollY(g.position=g.scrollTop+=b);h.resumeEvent("scroll")}g.refreshView()},scrollTo:function(m,p){var g=arguments,i=this,k=i.view,f=k.lockingPartner&&k.lockingPartner.grid.isVisible()&&k.lockingPartner.bufferedRenderer,n=i.store,j=n.getCount(),h,b,a,o,c,d,e,l;if(p!==undefined&&!(p instanceof Object)){p={select:g[1],callback:g[2],scope:g[3]}}if((c=k.dataSource.groupingFeature)&&(c.collapsible)){if(m.isEntity){e=m}else{e=k.store.getAt(Math.min(Math.max(m,0),k.store.getCount()-1))}d=c.getMetaGroup(e);if(d&&d.isCollapsed){if(!c.isExpandingOrCollapsing){c.expand(c.getGroup(e).getGroupKey());j=n.getCount();m=c.indexOf(e)}else{e=d.placeholder;m=c.indexOfPlaceholder(e)}}else{m=c.indexOf(e)}}else{if(m.isEntity){e=m;m=n.indexOf(e);if(m===-1){return}}else{m=Math.min(Math.max(m,0),j-1);e=n.getAt(m)}}if(e&&(a=k.getNode(e))){k.grid.ensureVisible(e,p);i.onViewScroll();i.onViewScrollEnd();return}if(m<k.all.startIndex){l=-1;h=Math.max(Math.min(m-(Math.floor((i.leadingBufferZone+i.trailingBufferZone)/2)),j-i.viewSize+1),0);b=Math.min(h+i.viewSize-1,j-1)}else{l=1;b=Math.min(m+(Math.floor((i.leadingBufferZone+i.trailingBufferZone)/2)),j-1);h=Math.max(b-(i.viewSize-1),0)}o=Math.max(h*i.rowHeight,0);n.getRange(h,b,{callback:function(r,s,q){i.renderRange(s,q,true,true);e=n.data.getRange(m,m+1)[0];a=k.getNode(e);k.body.translate(null,i.bodyTop=o);if(l===1){i.refreshSize()}if(f){f.renderRange(s,q,true,true);i.syncRowHeights();f.view.body.translate(null,f.bodyTop=o);if(l===1){f.refreshSize()}}if(!a){return}k.grid.ensureVisible(e,p);i.scrollTop=i.position=i.view.getScrollY();if(f){f.position=f.scrollTop=i.scrollTop}}})},onViewScroll:function(){var d=this,b=d.store,a=(b.getCount()),c,f,e=d.scrollTop=d.view.getScrollY();if(d.needsPointerEventsFix){d.view.body.dom.style.pointerEvents="none"}if(!(d.disabled||a<d.viewSize)){c=e-d.position;f=c>0?1:-1;if(Math.abs(c)>=20||(f!==d.lastScrollDirection)){d.lastScrollDirection=f;d.handleViewScroll(d.lastScrollDirection)}}},onViewScrollEnd:function(){if(this.needsPointerEventsFix){this.view.body.dom.style.pointerEvents=""}},handleViewScroll:function(g){var e=this,f=e.view.all,a=e.store,h=e.viewSize,c=a.getCount()-1,d,b;if(g===-1){if(f.startIndex){if(e.topOfViewCloseToEdge()){d=Math.max(0,e.getLastVisibleRowIndex()+e.trailingBufferZone-h)}}}else{if(f.endIndex<c){if(e.bottomOfViewCloseToEdge()){d=Math.max(0,e.getFirstVisibleRowIndex()-e.trailingBufferZone)}}}if(d==null){e.position=e.scrollTop;e.loadId++}else{b=Math.min(d+h-1,c);if(e.variableRowHeight&&b===f.endIndex&&b<c){b++;e.viewSize=h++;if(a.isBufferedStore){a.setViewSize(e.viewSize)}}if(d!==f.startIndex||b!==f.endIndex){e.renderRange(d,b);return true}}},bottomOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop+a.bodyHeight<a.scrollTop+a.view.lastBox.height+(a.numFromEdge*a.rowHeight)}else{return(a.view.all.endIndex-a.getLastVisibleRowIndex())<a.numFromEdge}},topOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop>a.scrollTop-(a.numFromEdge*a.rowHeight)}else{return(a.getFirstVisibleRowIndex()-a.view.all.startIndex)<a.numFromEdge}},refreshView:function(f){var c=this,h=c.viewSize,e=c.view.all,a=c.store,g=a.getCount(),b=Math.max(0,g-1),d;if(!g){return c.doRefreshView([],0,0)}else{if(g<h){f=0;d=b}else{if(f==null){if(c.nextRefreshStartIndex!=null){f=c.nextRefreshStartIndex;c.nextRefreshStartIndex=null}else{f=e.startIndex}}f=Math.max(0,Math.min(f,b-(h-c.leadingBufferZone)+1));d=Math.min(f+h-1,b);if(d-f+1>h){f=d-h+1}}}if(f===0&&d===0&&g===0){c.doRefreshView([],0,0)}else{a.getRange(f,d,{callback:c.doRefreshView,scope:c})}},doRefreshView:function(g,o,f,q){var m=this,n=m.view,p=n.all,k=p.startIndex,i=p.endIndex,l,j,b=p.getCount(),e,a=o!==p.startIndex,d,c,h;if(n.refreshCounter){if(n.hasListeners.beforerefresh&&n.fireEvent("beforerefresh",n)===false){return}n.refreshing=m.refreshing=true;h=n.saveFocusState();n.clearViewEl(true);n.refreshCounter++;if(g.length){e=n.doAdd(g,o);if(a){l=p.item(k,true);j=p.item(i,true);if(l){c=-l.offsetTop}else{if(j){c=p.last(true).offsetTop-j.offsetTop}}if(c){m.bodyTop=Math.max(m.bodyTop+c,0);m.scrollTop=m.bodyTop?m.scrollTop+c:0}else{m.bodyTop=d=o*m.rowHeight;m.scrollTop=Math.max(d-m.rowHeight*(d<m.bodyTop?m.leadingBufferZone:m.trailingBufferZone,0))}}}else{if(m.scrollTop){m.bodyTop=m.scrollTop=0}n.addEmptyText()}if(a){m.setBodyTop(m.bodyTop);n.suspendEvent("scroll");n.setScrollY(m.position=m.scrollTop);n.resumeEvent("scroll")}m.refreshSize();n.refreshSize(p.getCount()!==b);n.fireEvent("refresh",n,g);h();n.headerCt.setSortState();n.refreshNeeded=n.refreshing=m.refreshing=false}else{n.refresh()}},renderRange:function(g,a,f,c){var d=this,e=d.view.all,b=d.store;if(!(g===e.startIndex&&a===e.endIndex)){if(b.rangeCached(g,a)){d.cancelLoad();if(d.synchronousRender||f){d.onRangeFetched(null,g,a,null,c)}else{if(!d.renderTask){d.renderTask=new Ext.util.DelayedTask(d.onRangeFetched,d,null,false)}d.renderTask.delay(1,null,null,[null,g,a,null,c])}}else{d.attemptLoad(g,a)}}},onRangeFetched:function(p,g,e,d,r){var y=this,o=y.view,k=o.el,c,n=o.all,j,x=0,u,l,m=(o.lockingPartner&&!r&&!y.doNotMirror)&&o.lockingPartner.bufferedRenderer,v,b,w,a,t,s=y.variableRowHeight,f,q,h;if(o.destroyed){return}if(p){y.scrollTop=y.view.getScrollY()}else{p=y.store.getRange(g,e);if(!p){return}}f=Ext.Element.getActiveElement();q=k.contains(f);u=g*y.rowHeight;if(g<n.startIndex&&e>n.endIndex){w=n.startIndex-g;o.clearViewEl(true);v=o.doAdd(p,g);o.fireEvent("itemadd",p,g,v);for(t=0;t<w;t++){x-=v[t].offsetHeight}l=y.bodyTop+x}else{if(y.teleported||g>n.endIndex||e<n.startIndex){l=u;if(s){a=y.scrollTop<y.position?y.leadingBufferZone:y.trailingBufferZone;if(g>a){l=y.scrollTop-y.rowHeight*a}}o.clearViewEl(true);y.teleported=false}if(!n.getCount()){v=o.doAdd(p,g);o.fireEvent("itemadd",p,g,v)}else{if(e>n.endIndex){j=Math.max(g-n.startIndex,0);if(s){x=n.item(n.startIndex+j,true).offsetTop}v=n.scroll(Ext.Array.slice(p,n.endIndex+1-g),1,j);if(s){l=y.bodyTop+x}else{l=u}}else{j=Math.max(n.endIndex-e,0);c=n.startIndex;v=n.scroll(Ext.Array.slice(p,0,n.startIndex-g),-1,j);if(s){l=y.bodyTop-n.item(c,true).offsetTop;if(!n.startIndex){if(l){o.setScrollY(y.position=(y.scrollTop-=l));l=0}}else{if(l<0){x=n.startIndex*y.rowHeight;o.setScrollY(y.position=(y.scrollTop+=x));l=y.bodyTop+x}}}else{l=u}}}y.position=y.scrollTop}if(q&&!k.contains(f)){h=o.actionableMode?o.actionPosition:o.lastFocused;if(h&&h.column){o.onFocusLeave({});h.column.focus()}}l=Math.max(Math.floor(l),0);if(o.positionBody){y.setBodyTop(l)}if(v&&m&&!m.disabled){m.scrollTop=m.position=y.scrollTop;if(m.view.ownerCt.isVisible()){b=m.onRangeFetched(null,g,e,d,true);if(o.ownerGrid.syncRowHeight||(m.variableRowHeight!==s)){y.syncRowHeights(v,b);y.bodyHeight=o.body.dom.offsetHeight}}if(m.bodyTop!==l){m.setBodyTop(l)}m.view.setScrollY(y.scrollTop)}return v},syncRowHeights:function(f,a){var h=this,g=0,k=1,j=[],b=[],d=Ext.grid.locking.RowSynchronizer,c,e;if(f&&a){g=f.length;k=a.length}if(g!==k){f=h.view.all.slice();a=h.view.lockingPartner.all.slice();g=k=f.length}for(c=0;c<g;c++){j[c]=e=new d(h.view,f[c]);e.measure()}for(c=0;c<k;c++){b[c]=e=new d(h.view.lockingPartner,a[c]);e.measure()}for(c=0;c<g;c++){j[c].finish(b[c]);b[c].finish(j[c])}h.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var c=this,a=c.view,b=a.lockingPartner.bufferedRenderer;if(a.componentLayoutCounter){delete c.rowHeight;c.refreshSize();if(b.rowHeight!==c.rowHeight){delete b.rowHeight;b.refreshSize()}}},setBodyTop:function(d){var e=this,b=e.view,f=b.all,c=e.store,a=b.body;if(!a.dom){return}e.translateBody(a,d);if(e.variableRowHeight){e.bodyHeight=a.dom.offsetHeight;if(f.endIndex===c.getCount()-1){e.scrollHeight=d+e.bodyHeight-1}else{e.scrollHeight=e.getScrollHeight()}e.stretchView(b,e.scrollHeight)}else{e.bodyHeight=f.getCount()*e.rowHeight}},translateBody:function(a,b){a.translate(null,this.bodyTop=b)},getFirstVisibleRowIndex:function(j,c,b,f){var g=this,h=g.view,l=h.all,a=l.elements,d=g.viewClientHeight,e,k,i=g.bodyTop;if(l.getCount()&&g.variableRowHeight){if(!arguments.length){j=l.startIndex;c=l.endIndex;b=g.scrollTop;f=b+d;if(i>f||i+g.bodyHeight<b){g.teleported=true;return Math.floor(g.scrollTop/g.rowHeight)}e=j+Math.min(g.numFromEdge+((g.lastScrollDirection===-1)?g.leadingBufferZone:g.trailingBufferZone),Math.floor((c-j)/2))}else{e=j+Math.floor((c-j)/2)}k=i+a[e].offsetTop;if(k+a[e].offsetHeight<=b){return g.getFirstVisibleRowIndex(e+1,c,b,f)}if(k<=b){return e}else{if(e!==j){return g.getFirstVisibleRowIndex(j,e-1,b,f)}}}return Math.floor(g.scrollTop/g.rowHeight)},getLastVisibleRowIndex:function(k,c,b,f){var h=this,i=h.view,m=i.all,a=m.elements,d=h.viewClientHeight,e,l,g,j=h.bodyTop;if(m.getCount()&&h.variableRowHeight){if(!arguments.length){k=m.startIndex;c=m.endIndex;b=h.scrollTop;f=b+d;if(j>f||j+h.bodyHeight<b){h.teleported=true;return Math.floor(h.scrollTop/h.rowHeight)+Math.ceil(d/h.rowHeight)}e=c-Math.min(h.numFromEdge+((h.lastScrollDirection===1)?h.leadingBufferZone:h.trailingBufferZone),Math.floor((c-k)/2))}else{e=k+Math.floor((c-k)/2)}l=j+a[e].offsetTop;if(l>f){return h.getLastVisibleRowIndex(k,e-1,b,f)}g=l+a[e].offsetHeight;if(g>=f){return e}else{if(e!==c){return h.getLastVisibleRowIndex(e+1,c,b,f)}}}return h.getFirstVisibleRowIndex()+Math.ceil(d/h.rowHeight)},getScrollHeight:function(){var c=this,e=c.view,i=e.all,f=c.store,j=f.getCount(),d=i.getCount(),h,b,a,g;if(!j){return 0}if(!c.hasOwnProperty("rowHeight")){if(d){if(c.variableRowHeight){c.rowHeight=Math.floor(c.bodyHeight/d)}else{h=i.first();b=h.getHeight();if(Ext.isIE8){a=h.getBorderWidth("b");if(a>0){b-=a}}c.rowHeight=b}}else{delete c.rowHeight}}if(c.variableRowHeight){if(i.endIndex===j-1){g=c.bodyTop+c.bodyHeight-1}else{g=Math.floor((j-d)*c.rowHeight)+c.bodyHeight;g+=c.bodyTop-i.startIndex*c.rowHeight}}else{g=Math.floor(j*c.rowHeight)}return(c.scrollHeight=g)},attemptLoad:function(c,a){var b=this;if(b.scrollToLoadBuffer){if(!b.loadTask){b.loadTask=new Ext.util.DelayedTask(b.doAttemptLoad,b,[])}b.loadTask.delay(b.scrollToLoadBuffer,b.doAttemptLoad,b,[c,a])}else{b.doAttemptLoad(c,a)}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(c,a){var b=this;if(!b.destroyed){b.store.getRange(c,a,{loadId:++b.loadId,callback:function(e,g,d,f){if(f.loadId===b.loadId){b.onRangeFetched(e,g,d,f)}},fireEvent:false})}},destroy:function(){var b=this,a=b.view;b.cancelLoad();if(a&&a.el){a.un("scroll",b.onViewScroll,b)}if(b.store){b.unbindStore()}b.viewListeners=b.gridListeners=b.view=b.grid=Ext.destroy(b.viewListeners,b.stretcher,b.gridListeners);Ext.plugin.Abstract.prototype.destroy.call(this)}},0,0,0,0,["plugin.bufferedrenderer"],0,[Ext.grid.plugin,"BufferedRenderer"],function(a){if(Ext.supports.Touch){a.prototype.leadingBufferZone=a.prototype.trailingBufferZone=2;a.prototype.numFromEdge=1}}));(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(c){var b=this,a=b.getKey(c);if(!b.map[a]){++b.length;b.items.push(c);b.map[a]=c}return c},clear:function(){var b=this,a=b.items;b.items=[];b.map={};b.length=0;return a},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(e){var d=this,c=d.getKey(e),a=d.items,b;if(d.map[c]){b=Ext.Array.indexOf(a,e);Ext.Array.erase(a,b,1);delete d.map[c];--d.length}return e}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(q){var r=this,o=Ext.layout.SizeModel.sizeModels,j=o.configured,i=o.shrinkWrap,b,p,m,l,f,d,s,e,n,k,c,h,g,a;Ext.apply(r,q);s=r.target;b=r.el;r.id=s.id;r.flushedProps={};r.props=f={};r.styles={};if(!s.isComponent){p=b.lastBox}else{r.wrapsComponent=true;r.framing=s.frameSize||null;r.isComponentChild=s.ownerLayout&&s.ownerLayout.isComponentLayout;p=s.lastBox;m=s.ownerCt;if(m&&(l=m.el&&r.context.items[m.el.id])){r.ownerCtContext=l}r.sizeModel=d=s.getSizeModel(l&&l.widthModel.pairsByHeightOrdinal[l.heightModel.ordinal]);r.widthModel=h=d.width;r.heightModel=g=d.height;if(p&&p.invalid===false){k=(s.width===(e=p.width));c=(s.height===(n=p.height));if(h===i&&g===i){a=true}else{if(h===j&&k){a=g===i||(g===j&&c)}}if(a){r.optOut=true;f.width=e;f.height=n}}}r.lastBox=p},init:function(h,c){var s=this,a=s.props,d=s.dirty,k=s.ownerCtContext,o=s.target.ownerLayout,g=!s.state,t=h||g,e,m,l,p,b,u,v=s.heightModel,f=s.widthModel,j,q,r=0;s.dirty=s.invalid=false;s.props={};s.remainingChildDimensions=0;if(s.boxChildren){s.boxChildren.length=0}if(!g){s.clearAllBlocks("blocks");s.clearAllBlocks("domBlocks")}if(!s.wrapsComponent){return t}u=s.target;s.state={};if(g){if(u.beforeLayout&&u.beforeLayout!==Ext.emptyFn){u.beforeLayout()}if(!k&&(p=u.ownerCt)){k=s.context.items[p.el.id]}if(k){s.ownerCtContext=k;s.isBoxParent=o&&o.isItemBoxParent(s)}else{s.isTopLevel=true}s.frameBodyContext=s.getEl("frameBody")}else{k=s.ownerCtContext;s.isTopLevel=!k;e=s.children;for(m=0,l=e.length;m<l;++m){e[m].init(true)}}s.hasRawContent=!(u.isContainer&&u.items.items.length>0);if(h){s.widthModel=s.heightModel=null;b=u.getSizeModel(k&&k.widthModel.pairsByHeightOrdinal[k.heightModel.ordinal]);if(g){s.sizeModel=b}s.widthModel=b.width;s.heightModel=b.height;if(k&&!s.isComponentChild){if(o.needsItemSize||!u.liquidLayout){k.remainingChildDimensions+=2}else{if(s.widthModel.calculated){++k.remainingChildDimensions}if(s.heightModel.calculated){++k.remainingChildDimensions}}}}else{if(a){s.recoverProp("x",a,d);s.recoverProp("y",a,d);if(s.widthModel.calculated){s.recoverProp("width",a,d)}else{if("width" in a){++r}}if(s.heightModel.calculated){s.recoverProp("height",a,d)}else{if("height" in a){++r}}if(k&&!s.isComponentChild){k.remainingChildDimensions+=r}}}if(a&&o&&o.manageMargins){s.recoverProp("margin-top",a,d);s.recoverProp("margin-right",a,d);s.recoverProp("margin-bottom",a,d);s.recoverProp("margin-left",a,d)}if(c){j=c.heightModel;q=c.widthModel;if(q&&j&&f&&v){if(f.shrinkWrap&&v.shrinkWrap){if(q.constrainedMax&&j.constrainedMin){j=null}}}if(q){s.widthModel=q}if(j){s.heightModel=j}if(c.state){Ext.apply(s.state,c.state)}}return t},initContinue:function(e){var g=this,d=g.ownerCtContext,a=g.target,c=g.widthModel,f=a.getInherited(),b;if(c.fixed){f.inShrinkWrapTable=false}else{delete f.inShrinkWrapTable}if(e){if(d&&c.shrinkWrap){b=d.isBoxParent?d:d.boxParent;if(b){b.addBoxChild(g)}}else{if(c.natural){g.boxParent=d}}}return e},initDone:function(d){var b=this,a=b.props,c=b.state;if(b.remainingChildDimensions===0){a.containerChildrenSizeDone=true}if(d){a.containerLayoutDone=true}if(b.boxChildren&&b.boxChildren.length&&b.widthModel.shrinkWrap){b.el.setWidth(10000);c.blocks=(c.blocks||0)+1}},initAnimation:function(){var b=this,c=b.target,a=b.ownerCtContext;if(a&&a.isTopLevel){b.animatePolicy=c.ownerLayout.getAnimatePolicy(b)}else{if(!a&&c.isCollapsingOrExpanding&&c.animCollapse){b.animatePolicy=c.componentLayout.getAnimatePolicy(b)}}if(b.animatePolicy){b.context.queueAnimation(b)}},addBlock:function(b,d,e){var c=this,f=c[b]||(c[b]={}),a=f[e]||(f[e]={});if(!a[d.id]){a[d.id]=d;++d.blockCount;++c.context.blockCount}},addBoxChild:function(d){var c=this,b,a=d.widthModel;d.boxParent=this;d.measuresBox=a.shrinkWrap?d.hasRawContent:a.natural;if(d.measuresBox){b=c.boxChildren;if(b){b.push(d)}else{c.boxChildren=[d]}}},addPositionStyles:function(d,b){var a=b.x,e=b.y,c=0;if(a!==undefined){d.left=a+"px";++c}if(e!==undefined){d.top=e+"px";++c}return c},addTrigger:function(f,g){var e=this,a=g?"domTriggers":"triggers",h=e[a]||(e[a]={}),b=e.context,d=b.currentLayout,c=h[f]||(h[f]={});if(!c[d.id]){c[d.id]=d;++d.triggerCount;c=b.triggers[g?"dom":"data"];(c[d.id]||(c[d.id]=[])).push({item:this,prop:f});if(e.props[f]!==undefined){if(!g||!(e.dirty&&(f in e.dirty))){++d.firedTriggers}}}},boxChildMeasured:function(){var b=this,c=b.state,a=(c.boxesMeasured=(c.boxesMeasured||0)+1);if(a===b.boxChildren.length){c.clearBoxWidth=1;++b.context.progressCount;b.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(a){var b=a.getStyles(a.borderNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},marginInfo:function(a){var b=a.getStyles(a.marginNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},paddingInfo:function(b){var a=b.frameBodyContext||b,c=a.getStyles(b.paddingNames,b.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(a){var c=this[a],b;if(c){for(b in c){this.clearBlocks(a,b)}}},clearBlocks:function(c,f){var g=this[c],b=g&&g[f],d,e,a;if(b){delete g[f];d=this.context;for(a in b){e=b[a];--d.blockCount;if(!--e.blockCount&&!e.pending&&!e.done){d.queueLayout(e)}}}},block:function(a,b){this.addBlock("blocks",a,b)},domBlock:function(a,b){this.addBlock("domBlocks",a,b)},fireTriggers:function(b,f){var g=this[b],d=g&&g[f],c=this.context,e,a;if(d){for(a in d){e=d[a];++e.firedTriggers;if(!e.done&&!e.blockCount&&!e.pending){c.queueLayout(e)}}}},flush:function(){var b=this,a=b.dirty,c=b.state,d=b.el;b.dirtyCount=0;if("attributes" in b){d.set(b.attributes);delete b.attributes}if("innerHTML" in b){d.innerHTML=b.innerHTML;delete b.innerHTML}if(c&&c.clearBoxWidth){c.clearBoxWidth=0;b.el.setStyle("width",null);if(!--c.blocks){b.context.queueItemLayouts(b)}}if(a){delete b.dirty;b.writeProps(a,true)}},flushAnimations:function(){var n=this,c=n.previousSize,k,m,e,g,f,d,h,l,i,a,b;if(c){k=n.target;m=k.getAnimationProps();e=m.duration;g=Ext.Object.getKeys(n.animatePolicy);f=Ext.apply({},{from:{},to:{},duration:e||Ext.fx.Anim.prototype.duration},m);for(d=0,h=0,l=g.length;h<l;h++){i=g[h];a=c[i];b=n.peek(i);if(a!==b){i=n.translateProps[i]||i;f.from[i]=a;f.to[i]=b;++d}}if(d){if(n.isCollapsingOrExpanding===1){k.componentLayout.undoLayout(n)}else{n.writeProps(f.from)}n.el.animate(f);f=Ext.fx.Manager.getFxQueue(n.el.id)[0];k.$layoutAnim=f;f.on({afteranimate:function(){delete k.$layoutAnim;if(k.destroying||k.destroyed){return}if(n.isCollapsingOrExpanding===1){k.componentLayout.redoLayout(n);k.afterCollapse(true)}else{if(n.isCollapsingOrExpanding===2){k.afterExpand(true)}}if(k.hasListeners.afterlayoutanimation){k.fireEvent("afterlayoutanimation",k)}}})}}},getBorderInfo:function(){var a=this,b=a.borderInfo;if(!b){a.borderInfo=b=a.checkCache("borderInfo")}return b},getEl:function(c,a){var e=this,f,d,b;if(c){if(c.dom){d=c}else{f=e.target;if(a){f=a}d=f[c];if(typeof d==="function"){d=d.call(f);if(d===e.el){return this}}}if(d){b=e.context.getEl(e,d)}}return b||null},getFrameInfo:function(){var c=this,d=c.frameInfo,b,a;if(!d){b=c.framing;a=c.getBorderInfo();c.frameInfo=d=b?{top:b.top+a.top,right:b.right+a.right,bottom:b.bottom+a.bottom,left:b.left+a.left,width:b.width+a.width,height:b.height+a.height}:a}return d},getMarginInfo:function(){var d=this,f=d.marginInfo,b,a,e,c;if(!f){if(!d.wrapsComponent){f=d.checkCache("marginInfo")}else{b=d.target;e=b.ownerLayout;c=e?e.id:null;a=e&&e.manageMargins;f=b.margin$;if(f&&f.ownerId!==c){f=null}if(!f){f=d.parseMargins(b,b.margin)||d.checkCache("marginInfo");if(a){d.setProp("margin-top",0);d.setProp("margin-right",0);d.setProp("margin-bottom",0);d.setProp("margin-left",0)}f.ownerId=c;b.margin$=f}f.width=f.left+f.right;f.height=f.top+f.bottom}d.marginInfo=f}return f},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var a=this,b=a.paddingInfo;if(!b){a.paddingInfo=b=a.checkCache("paddingInfo")}return b},getProp:function(c){var b=this,a=b.props[c];b.addTrigger(c);return a},getDomProp:function(c){var b=this,a=(b.dirty&&(c in b.dirty))?undefined:b.props[c];b.addTrigger(c,true);return a},getStyle:function(a){var c=this,b=c.styles,e,d;if(a in b){d=b[a]}else{e=c.styleInfo[a];d=c.el.getStyle(a);if(e&&e.parseInt){d=parseInt(d,10)||0}b[a]=d}return d},getStyles:function(o,b){var l=this,e=l.styles,p={},f=0,d=o.length,j,h,k,a,c,g,q,m;b=b||o;for(j=0;j<d;++j){a=o[j];if(a in e){p[b[j]]=e[a];++f;if(j&&f===1){h=o.slice(0,j);k=b.slice(0,j)}}else{if(f){(h||(h=[])).push(a);(k||(k=[])).push(b[j])}}}if(f<d){h=h||o;k=k||b;g=l.styleInfo;q=l.el.getStyle(h);for(j=h.length;j--;){a=h[j];c=g[a];m=q[a];if(c&&c.parseInt){m=parseInt(m,10)||0}p[k[j]]=m;e[a]=m}}return p},hasProp:function(a){return this.getProp(a)!=null},hasDomProp:function(a){return this.getDomProp(a)!=null},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){if(++this.dirtyCount===1){this.context.queueFlush(this)}},onBoxMeasured:function(){var a=this.boxParent,b=this.state;if(a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox){b.boxMeasured=1;a.boxChildMeasured()}},parseMargins:function(a,d){if(d===true){d=5}var c=typeof d,b;if(c==="string"||c==="number"){b=a.parseBox(d)}else{if(d){b={top:0,right:0,bottom:0,left:0};if(d){d=Ext.apply(b,a.parseBox(d))}}}return b},peek:function(a){return this.props[a]},recalculateSizeModel:function(){var e=this,f=e.target,c=f.componentLayout,b=e.ownerCtContext,a=c.ownerContext,d;c.ownerContext=null;e.sizeModel=d=f.getSizeModel(b&&b.widthModel.pairsByHeightOrdinal[b.heightModel.ordinal]);e.widthModel=d.width;e.heightModel=d.height;if(a){c.ownerContext=e}},recoverProp:function(f,b,a){var e=this,d=e.props,c;if(f in b){d[f]=b[f];if(a&&f in a){c=e.dirty||(e.dirty={});c[f]=a[f]}}},redo:function(b){var e=this,c,a,d;e.revertProps(e.props);if(b&&e.wrapsComponent){if(e.childItems){for(d=0,c=e.childItems,a=c.length;d<a;d++){c[d].redo(b)}}for(d=0,c=e.children,a=c.length;d<a;d++){c[d].redo()}}},removeEl:function(b,a){var d=this,e,c;if(b){if(b.dom){c=b}else{e=d.target;if(a){e=a}c=e[b];if(typeof c==="function"){c=c.call(e);if(c===d.el){return this}}}if(c){d.context.removeEl(c,d)}}},revertProps:function(d){var a,b=this.flushedProps,c={};for(a in d){if(b.hasOwnProperty(a)){c[a]=d[a]}}this.writeProps(c)},setAttribute:function(a,c){var b=this;if(!b.attributes){b.attributes={}}b.attributes[a]=c;b.markDirty()},setBox:function(b){var a=this;if("left" in b){a.setProp("x",b.left)}if("top" in b){a.setProp("y",b.top)}a.setSize(b.width,b.height)},setContentHeight:function(a,b){if(!b&&this.hasRawContent){return 1}return this.setProp("contentHeight",a)},setContentWidth:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp("contentWidth",b)},setContentSize:function(c,a,b){return this.setContentWidth(c,b)+this.setContentHeight(a,b)===2},setProp:function(d,c,a){var b=this,f=typeof c,e;if(f==="undefined"||(f==="number"&&isNaN(c))){return 0}if(b.props[d]===c){return 1}b.props[d]=c;++b.context.progressCount;if(a===false){b.fireTriggers("domTriggers",d);b.clearBlocks("domBlocks",d)}else{e=b.styleInfo[d];if(e){if(!b.dirty){b.dirty={}}b.dirty[d]=c;b.markDirty()}}b.fireTriggers("triggers",d);b.clearBlocks("blocks",d);return 1},setHeight:function(j,a){var f=this,d=f.target,c=f.ownerCtContext,g,e,b,i,h;if(j<0){j=0}if(!f.wrapsComponent){if(!f.setProp("height",j,a)){return NaN}}else{b=f.collapsedVert?0:(d.minHeight||0);j=Ext.Number.constrain(j,b,d.maxHeight);i=f.props.height;if(!f.setProp("height",j,a)){return NaN}if(c&&!f.isComponentChild&&isNaN(i)){h=--c.remainingChildDimensions;if(!h){c.setProp("containerChildrenSizeDone",true)}}g=f.frameBodyContext;if(g){e=f.getFrameInfo();g[f.el.vertical?"setWidth":"setHeight"](j-e.height,a)}}return j},setWidth:function(b,a){var h=this,f=h.target,e=h.ownerCtContext,i,g,d,c,j;if(b<0){b=0}if(!h.wrapsComponent){if(!h.setProp("width",b,a)){return NaN}}else{d=h.collapsedHorz?0:(f.minWidth||0);b=Ext.Number.constrain(b,d,f.maxWidth);c=h.props.width;if(!h.setProp("width",b,a)){return NaN}if(e&&!h.isComponentChild&&isNaN(c)){j=--e.remainingChildDimensions;if(!j){e.setProp("containerChildrenSizeDone",true)}}i=h.frameBodyContext;if(i){g=h.getFrameInfo();i.setWidth(b-g.width,a)}}return b},setSize:function(c,a,b){this.setWidth(c,b);this.setHeight(a,b)},translateProps:{x:"left",y:"top"},undo:function(b){var e=this,c,a,d;e.revertProps(e.lastBox);if(b&&e.wrapsComponent){if(e.childItems){for(d=0,c=e.childItems,a=c.length;d<a;d++){c[d].undo(b)}}for(d=0,c=e.children,a=c.length;d<a;d++){c[d].undo()}}},unsetProp:function(b){var a=this.dirty;delete this.props[b];if(a){delete a[b]}},writeProps:function(e,d){if(!(e&&typeof e==="object")){return}var r=this,c=r.el,h={},f=0,b=r.styleInfo,q,i,l,n=e.width,j=e.height,s=r.target,g,a,m,o,p,k;if("displayed" in e){c.setDisplayed(e.displayed)}for(i in e){if(d){r.fireTriggers("domTriggers",i);r.clearBlocks("domBlocks",i);r.flushedProps[i]=1}q=b[i];if(q&&q.dom){if(q.suffix&&(l=parseInt(e[i],10))){h[i]=l+q.suffix}else{h[i]=e[i]}++f}}if("x" in e||"y" in e){if(s.isComponent){s.setPosition(e.x,e.y)}else{f+=r.addPositionStyles(h,e)}}if(r.wrapsComponent&&Ext.isIE9){if((g=n!==undefined&&r.hasOverflowY)||(a=j!==undefined&&r.hasOverflowX)){m=r.isAbsolute;if(m===undefined){m=false;k=r.target.getTargetEl();p=k.getStyle("position");r.isAbsolute=m=(p==="absolute")}if(m){o=Ext.getScrollbarSize();if(g){n=parseInt(n,10)+o.width;h.width=n+"px";++f}if(a){j=parseInt(j,10)+o.height;h.height=j+"px";++f}}}}if(f){c.setStyle(h)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var c={dom:true,parseInt:true,suffix:"px"},b={dom:true},a={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:a,containerLayoutDone:a,displayed:a,done:a,x:a,y:a,columnsChanged:a,rowHeights:a,viewOverflowY:a,left:c,top:c,right:c,bottom:c,width:c,height:c,"border-top-width":c,"border-right-width":c,"border-bottom-width":c,"border-left-width":c,"margin-top":c,"margin-right":c,"margin-bottom":c,"margin-left":c,"padding-top":c,"padding-right":c,"padding-bottom":c,"padding-left":c,"line-height":b,display:b,clear:b}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(a){var b=this;Ext.apply(b,a);b.items={};b.layouts={};b.blockCount=0;b.cycleCount=0;b.flushCount=0;b.calcCount=0;b.animateQueue=b.newQueue();b.completionQueue=b.newQueue();b.finalizeQueue=b.newQueue();b.finishQueue=b.newQueue();b.flushQueue=b.newQueue();b.invalidateData={};b.layoutQueue=b.newQueue();b.invalidQueue=[];b.triggers={data:{},dom:{}}},callLayout:function(b,a){this.currentLayout=b;b[a](this.getCmp(b.owner))},cancelComponent:function(h,a,l){var o=this,g=h,j=!h.isComponent,b=j?g.length:1,d,c,n,m,f,r,p,q,s,e;for(d=0;d<b;++d){if(j){h=g[d]}if(l){if(h.ownerCt){e=this.items[h.ownerCt.el.id];if(e){Ext.Array.remove(e.childItems,o.getCmp(h))}}else{if(h.rendered){o.removeEl(h.el)}}}if(!a){p=o.invalidQueue;n=p.length;if(n){o.invalidQueue=r=[];for(c=0;c<n;++c){q=p[c];s=q.item.target;if(s!==h&&!s.up(h)){r.push(q)}}}}f=h.componentLayout;o.cancelLayout(f);if(f.getLayoutItems){m=f.getLayoutItems();if(m.length){o.cancelComponent(m,true)}}if(h.isContainer&&!h.collapsed){f=h.layout;o.cancelLayout(f);m=f.getVisibleItems();if(m.length){o.cancelComponent(m,true)}}}},cancelLayout:function(b){var a=this;a.completionQueue.remove(b);a.finalizeQueue.remove(b);a.finishQueue.remove(b);a.layoutQueue.remove(b);if(b.running){a.layoutDone(b)}b.ownerContext=null},clearTriggers:function(f,g){var a=f.id,e=this.triggers[g?"dom":"data"],h=e&&e[a],b=(h&&h.length)||0,d,j,c;for(d=0;d<b;++d){c=h[d];j=c.item;e=g?j.domTriggers:j.triggers;delete e[c.prop][a]}},flush:function(){var d=this,a=d.flushQueue.clear(),c=a.length,b;if(c){++d.flushCount;for(b=0;b<c;++b){a[b].flush()}}},flushAnimations:function(){var d=this,b=d.animateQueue.clear(),a=b.length,c;if(a){for(c=0;c<a;c++){if(b[c].target.animate!==false){b[c].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var g=this,a=g.invalidQueue,f=a&&a.length,b,e,d,c;g.invalidQueue=[];if(f){e=[];for(c=0;c<f;++c){b=(d=a[c]).item.target;if(!b.container.isDetachedBody){e.push(b);if(d.options){g.invalidateData[b.id]=d.options}}}g.invalidate(e,null)}},flushLayouts:function(g,a,c){var f=this,h=c?f[g].items:f[g].clear(),e=h.length,b,d;if(e){for(b=0;b<e;++b){d=h[b];if(!d.running){f.callLayout(d,a)}}f.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(b,a){var c=this.getItem(a,a);if(!c.parent){c.parent=b;if(b.children.length){b.children.push(c)}else{b.children=[c]}}return c},getItem:function(d,b){var e=b.id,a=this.items,c=a[e]||(a[e]=new Ext.layout.ContextItem({context:this,target:d,el:b}));return c},handleFailure:function(){var c=this.layouts,b,a;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(a in c){b=c[a];if(c.hasOwnProperty(a)){b.running=false;b.ownerContext=null}}},invalidate:function(k,m){var o=this,l=!k.isComponent,c,p,a,f,j,q,n,b,g,h,e,d,r;for(f=0,b=l?k.length:1;f<b;++f){j=l?k[f]:k;if(j.rendered&&!j.hidden){p=j.ownerLayout;g=j.componentLayout;r=false;if((!p||!p.needsItemSize)&&j.liquidLayout){r=true}if(!r||(p&&p.setsItemSize)){q=o.getCmp(j);a=!q.state;h=(j.isContainer&&!j.collapsed)?j.layout:null;e=o.invalidateData[q.id];delete o.invalidateData[q.id];d=q.init(m,e)}if(r){continue}if(e){o.processInvalidate(e,q,"before")}if(g.beforeLayoutCycle){g.beforeLayoutCycle(q)}if(h&&h.beforeLayoutCycle){h.beforeLayoutCycle(q)}d=q.initContinue(d);c=true;if(g.getLayoutItems){g.renderChildren();n=g.getLayoutItems();if(n.length){o.invalidate(n,true)}}if(h){c=false;h.renderChildren();if(h.needsItemSize||h.activeItemCount){n=h.getVisibleItems();if(n.length){o.invalidate(n,true)}}}q.initDone(c);o.resetLayout(g,q,a);if(h){o.resetLayout(h,q,a)}q.initAnimation();if(e){o.processInvalidate(e,q,"after")}}}o.currentLayout=null},isDescendant:function(a,b){if(a.isContainer){for(var d=b.ownerCt;d;d=d.ownerCt){if(d===a){return true}}}return false},layoutDone:function(a){var b=a.ownerContext;a.running=false;if(a.isComponentLayout){if(b.measuresBox){b.onBoxMeasured()}b.setProp("done",true)}else{b.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(b,e,a){if(b[a]){var d=this,c=d.currentLayout;d.currentLayout=b.layout||null;b[a](e,b);d.currentLayout=c}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(a){this.flushQueue.add(a)},chainFns:function(a,h,f){var d=this,c=a.layout,e=h.layout,b=a[f],g=h[f];return function(i){var j=d.currentLayout;if(b){d.currentLayout=c;b.call(a.scope||a,i,a)}d.currentLayout=e;g.call(h.scope||h,i,h);d.currentLayout=j}},purgeInvalidates:function(){var g=this,j=[],h=g.invalidQueue,e=h.length,i,k,d,c,b,f,a;for(i=0;i<e;++i){b=h[i];f=b.item.target;a=true;for(k=j.length;k--;){d=j[k];c=d.item.target;if(f.isLayoutChild(c)){a=false;break}if(c.isLayoutChild(f)){Ext.Array.erase(j,k,1)}}if(a){j.push(b)}}g.invalidQueue=j},queueInvalidate:function(j,k){var g=this,i=[],h=g.invalidQueue,f=h.length,d,b,e,a,c;if(j.isComponent){d=j;j=g.items[d.el.id];if(j){j.recalculateSizeModel()}else{j=g.getCmp(d)}}else{d=j.target}j.invalid=true;while(f--){b=h[f];e=b.item.target;if(!d.isFloating&&d.up(e)){return}if(e===d){if(!(a=b.options)){b.options=k}else{if(k){if(k.widthModel){a.widthModel=k.widthModel}if(k.heightModel){a.heightModel=k.heightModel}if(!(c=a.state)){a.state=k.state}else{if(k.state){Ext.apply(c,k.state)}}if(k.before){a.before=g.chainFns(a,k,"before")}if(k.after){a.after=g.chainFns(a,k,"after")}}}return}if(!e.isLayoutChild(d)){i.push(b)}}i.push({item:j,options:k});g.invalidQueue=i},queueItemLayouts:function(c){var a=c.isComponent?c:c.target,b=a.componentLayout;if(!b.pending&&!b.invalid&&!b.done){this.queueLayout(b)}b=a.layout;if(b&&!b.pending&&!b.invalid&&!b.done&&!a.collapsed){this.queueLayout(b)}},queueLayout:function(a){this.layoutQueue.add(a);a.pending=true},removeEl:function(d,c){var e=d.id,b=c?c.children:null,a=this.items;if(b){Ext.Array.remove(b,a[e])}delete a[e]},resetLayout:function(b,c,d){var a=this;a.currentLayout=b;b.done=false;b.pending=true;b.firedTriggers=0;a.layoutQueue.add(b);if(d){a.layouts[b.id]=b;b.running=true;if(b.finishedLayout){a.finishQueue.add(b)}++a.remainingLayouts;++b.layoutCount;b.ownerContext=c;b.beginCount=0;b.blockCount=0;b.calcCount=0;b.triggerCount=0;if(!b.initialized){b.initLayout()}b.beginLayout(c)}else{++b.beginCount;if(!b.running){++a.remainingLayouts;b.running=true;b.ownerContext=c;if(b.isComponentLayout){c.unsetProp("done")}a.completionQueue.remove(b);a.finalizeQueue.remove(b)}}b.beginLayoutCycle(c,d)},run:function(){var c=this,b=false,a=c.cycleWatchDog;c.purgeInvalidates();c.flushInvalidates();c.state=1;c.totalCount=c.layoutQueue.getCount();c.flush();while((c.remainingLayouts||c.invalidQueue.length)&&a--){if(c.invalidQueue.length){c.flushInvalidates()}if(c.runCycle()){b=false}else{if(!b){c.flush();b=true;c.flushLayouts("completionQueue","completeLayout")}else{if(!c.invalidQueue.length){c.state=2;break}}}if(!(c.remainingLayouts||c.invalidQueue.length)){c.flush();c.flushLayouts("completionQueue","completeLayout");c.flushLayouts("finalizeQueue","finalizeLayout")}}return c.runComplete()},runComplete:function(){var a=this;a.state=2;if(a.remainingLayouts){a.handleFailure();return false}a.flush();a.flushLayouts("finishQueue","finishedLayout",true);a.flushLayouts("finishQueue","notifyOwner");a.flush();a.flushAnimations();return true},runCycle:function(){var c=this,d=c.layoutQueue.clear(),b=d.length,a;++c.cycleCount;c.progressCount=0;for(a=0;a<b;++a){c.runLayout(c.currentLayout=d[a])}c.currentLayout=null;return c.progressCount>0},runLayout:function(b){var a=this,c=a.getCmp(b.owner);b.pending=false;if(c.state.blocks){return}b.done=true;++b.calcCount;++a.calcCount;b.calculate(c);if(b.done){a.layoutDone(b);if(b.completeLayout){a.queueCompletion(b)}if(b.finalizeLayout){a.queueFinalize(b)}}else{if(!b.pending&&!b.invalid&&!(b.blockCount+b.triggerCount-b.firedTriggers)){a.queueLayout(b)}}},setItemSize:function(g,f,b){var d=g,a=1,c,e;if(g.isComposite){d=g.elements;a=d.length;g=d[0]}else{if(!g.dom&&!g.el){a=d.length;g=d[0]}}for(e=0;e<a;){c=this.get(g);c.setSize(f,b);g=d[++e]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.component.Body",Ext.layout.component.Auto,{type:"body",beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.bodyContext=a.getEl("body")},beginLayoutCycle:function(d,b){var c=this,f=c.lastWidthModel,e=c.lastHeightModel,a=c.owner.body;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(f&&f.fixed&&d.widthModel.shrinkWrap){a.setWidth(null)}if(e&&e.fixed&&d.heightModel.shrinkWrap){a.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(c,b){var a=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments);if(c.targetContext!==c){a+=c.getPaddingInfo().height}return a},calculateOwnerWidthFromContentWidth:function(c,a){var b=Ext.layout.component.Auto.prototype.calculateOwnerWidthFromContentWidth.apply(this,arguments);if(c.targetContext!==c){b+=c.getPaddingInfo().width}return b},measureContentWidth:function(a){return a.bodyContext.setWidth(a.bodyContext.el.dom.offsetWidth,false)},measureContentHeight:function(a){return a.bodyContext.setHeight(a.bodyContext.el.dom.offsetHeight,false)},publishInnerHeight:function(c,a){var d=a-c.getFrameInfo().height,b=c.targetContext;if(b!==c){d-=c.getPaddingInfo().height}return c.bodyContext.setHeight(d,!c.heightModel.natural)},publishInnerWidth:function(d,c){var a=c-d.getFrameInfo().width,b=d.targetContext;if(b!==d){a-=d.getPaddingInfo().width}d.bodyContext.setWidth(a,!d.widthModel.natural)}},0,0,0,0,["layout.body"],0,[Ext.layout.component,"Body"],0));(Ext.cmd.derive("Ext.layout.component.FieldSet",Ext.layout.component.Body,{type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(a){if(a.target.collapsed){a.heightModel=this.sizeModels.shrinkWrap}},beginLayout:function(b){var a=this.owner.legend;Ext.layout.component.Body.prototype.beginLayout.call(this,b);if(a){b.legendContext=b.context.getCmp(a)}},beginLayoutCycle:function(b){var c=b.target,a;Ext.layout.component.Body.prototype.beginLayoutCycle.apply(this,arguments);if(c.collapsed){b.setContentHeight(0);b.restoreMinHeight=c.minHeight;delete c.minHeight;if(b.widthModel.shrinkWrap){a=this.lastComponentSize;b.setContentWidth((a&&a.contentWidth)||this.defaultCollapsedWidth)}}},finishedLayout:function(c){var a=this.owner,b=c.restoreMinHeight;Ext.layout.component.Body.prototype.finishedLayout.apply(this,arguments);if(b){a.minHeight=b}},calculateOwnerWidthFromContentWidth:function(c,a){var b=c.legendContext;if(b){a=Math.max(a,b.getProp("width"))}return Ext.layout.component.Body.prototype.calculateOwnerWidthFromContentWidth.call(this,c,a)},calculateOwnerHeightFromContentHeight:function(d,c){var a=d.getBorderInfo(),b=d.legendContext;return d.getProp("contentHeight")+d.getPaddingInfo().height+(Ext.isIE8?d.bodyContext.getPaddingInfo().top:0)+(b?b.getProp("height"):a.top)+a.bottom},publishInnerHeight:function(d,a){var c=d.legendContext,b=0;if(c){b=c.getProp("height")}if(b===undefined){this.done=false}else{Ext.layout.component.Body.prototype.publishInnerHeight.call(this,d,a-b)}},getLayoutItems:function(){var a=this.owner.legend;return a?[a]:[]}},0,0,0,0,["layout.fieldset"],0,[Ext.layout.component,"FieldSet"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var a=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);a.xclass="Ext.resizer.BorderSplitterTracker";return a},onTargetCollapse:function(a){Ext.resizer.Splitter.prototype.onTargetCollapse.call(this,a);if(this.performCollapse!==false&&a.collapseMode=="mini"){a.addCls(a.baseCls+"-"+a.collapsedCls+"-mini")}},onTargetExpand:function(a){Ext.resizer.Splitter.prototype.onTargetExpand.call(this,a);if(this.performCollapse!==false&&a.collapseMode=="mini"){a.removeCls(a.baseCls+"-"+a.collapsedCls+"-mini")}}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(l,b,v){var t=this,c=t.axisProps[v],q=!c.horizontal,k=c.sizeProp,o=0,a=l.childItems,f=a.length,s,p,n,g,r,e,j,m,d,u,h;for(p=0;p<f;++p){n=a[p];r=n.target;n.layoutPos={};if(r.region){n.region=e=r.region;n.isCenter=r.isCenter;n.isHorz=r.isHorz;n.isVert=r.isVert;n.weight=r.weight||t.regionWeights[e]||0;r.weight=n.weight;b[r.id]=n;if(r.isCenter){s=n;g=r.flex;l.centerRegion=s;continue}if(q!==n.isVert){continue}n.reverseWeighting=(e===c.borderEnd);m=r[k];d=typeof m;if(!r.collapsed){if(d==="string"&&(j=t.percentageRe.exec(m))){n.percentage=parseInt(j[1],10)}else{if(r.flex){o+=n.flex=r.flex}}}}}if(s){u=s.target;if((h=u.placeholderFor)){if(!g&&q===h.collapsedVertical()){g=0;s.collapseAxis=v}}else{if(u.collapsed&&(q===u.collapsedVertical())){g=0;s.collapseAxis=v}}}if(g==null){g=1}o+=g;return Ext.apply({before:q?"top":"left",totalFlex:o},c)},beginLayout:function(d){var k=this,j=k.getLayoutItems(),e=k.padding,l=typeof e,o=false,p,n,b,g,f,a,c,h,m;if(e){if(l==="string"||l==="number"){e=Ext.util.Format.parseBox(e)}}else{e=d.getEl("getTargetEl").getPaddingInfo();o=true}d.outerPad=e;d.padOnContainer=o;for(g=0,b=j.length;g<b;++g){n=j[g];a=k.getSplitterTarget(n);if(a){c=undefined;h=!!n.hidden;if(!a.split){if(a.isCollapsingOrExpanding){c=!!a.collapsed}}else{if(h!==a.hidden){c=!a.hidden}}if(c){n.show()}else{if(c===false){n.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);j=d.childItems;b=j.length;f={};d.borderAxisHorz=k.beginAxis(d,f,"horz");d.borderAxisVert=k.beginAxis(d,f,"vert");for(g=0;g<b;++g){p=j[g];a=k.getSplitterTarget(p.target);if(a){m=f[a.id];if(!m){m=d.getEl(a.el,k);m.region=a.region}p.collapseTarget=a=m;p.weight=a.weight;p.reverseWeighting=a.reverseWeighting;a.splitter=p;p.isHorz=a.isHorz;p.isVert=a.isVert}}k.sortWeightedItems(j,"reverseWeighting");k.setupSplitterNeighbors(j)},calculate:function(d){var l=this,a=l.getContainerSize(d),h=d.childItems,c=h.length,b=d.borderAxisHorz,j=d.borderAxisVert,e=d.outerPad,n=d.padOnContainer,g,p,k,o,m,f;b.begin=e[l.padOnContainerProp];j.begin=e.top;m=b.end=b.flexSpace=a.width+(n?e[l.padOnContainerProp]:-e[l.padNotOnContainerProp]);f=j.end=j.flexSpace=a.height+(n?e.top:-e.bottom);for(g=0;g<c;++g){p=h[g];k=p.getMarginInfo();if(p.isHorz||p.isCenter){b.addUnflexed(k.width);m-=k.width}if(p.isVert||p.isCenter){j.addUnflexed(k.height);f-=k.height}if(!p.flex&&!p.percentage){if(p.isHorz||(p.isCenter&&p.collapseAxis==="horz")){o=p.getProp("width");b.addUnflexed(o);if(p.collapseTarget){m-=o}}else{if(p.isVert||(p.isCenter&&p.collapseAxis==="vert")){o=p.getProp("height");j.addUnflexed(o);if(p.collapseTarget){f-=o}}}}}for(g=0;g<c;++g){p=h[g];k=p.getMarginInfo();if(p.percentage){if(p.isHorz){o=Math.ceil(m*p.percentage/100);o=p.setWidth(o);b.addUnflexed(o)}else{if(p.isVert){o=Math.ceil(f*p.percentage/100);o=p.setHeight(o);j.addUnflexed(o)}}}}for(g=0;g<c;++g){p=h[g];if(!p.isCenter){l.calculateChildAxis(p,b);l.calculateChildAxis(p,j)}}if(l.finishAxis(d,j)+l.finishAxis(d,b)<2){l.done=false}else{l.finishPositions(h)}},calculateChildAxis:function(k,c){var a=k.collapseTarget,g="set"+c.sizePropCap,e=c.sizeProp,d=k.getMarginInfo()[e],i,b,f,h,j;if(a){i=a.region}else{i=k.region;f=k.flex}b=i===c.borderBegin;if(!b&&i!==c.borderEnd){k[g](c.end-c.begin-d);h=c.begin}else{if(f){j=Math.ceil(c.flexSpace*(f/c.totalFlex));j=k[g](j)}else{if(k.percentage){j=k.peek(e)}else{j=k.getProp(e)}}j+=d;if(b){h=c.begin;c.begin+=j}else{c.end=h=c.end-j}}k.layoutPos[c.posProp]=h},eachItem:function(g,d,c){var f=this,a=f.getLayoutItems(),b=0,e;if(Ext.isFunction(g)){d=g;c=d}for(b;b<a.length;b++){e=a[b];if(!g||e.region===g){if(d.call(c,e)===false){break}}}},finishAxis:function(d,c){var b=c.end-c.begin,a=d.centerRegion;if(a){a["set"+c.sizePropCap](b-a.getMarginInfo()[c.sizeProp]);a.layoutPos[c.posProp]=c.begin}return Ext.isNumber(b)?1:0},finishPositions:function(e){var c=e.length,b,a,d=this.horzPositionProp;for(b=0;b<c;++b){a=e[b];a.setProp("x",a.layoutPos.x+a.marginInfo[d]);a.setProp("y",a.layoutPos.y+a.marginInfo.top)}},getLayoutItems:function(){var a=this.owner,e=(a&&a.items&&a.items.items)||[],d=e.length,b=[],c=0,f,g;for(;c<d;c++){f=e[c];g=f.placeholderFor;if(f.hidden||((!f.floated||f.isCollapsingOrExpanding===2)&&!(g&&g.isCollapsingOrExpanding===2))){b.push(f)}}return b},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,true)},getMinMaxWeight:function(d,a){var b=this,c=null;b.eachItem(d,function(e){if(e.hasOwnProperty("weight")){if(c===null){c=e.weight;return}if((a&&e.weight<c)||e.weight>c){c=e.weight}}},this);return c},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},insertSplitter:function(d,c,f,b){var g=d.region,e=Ext.apply({xtype:"bordersplitter",collapseTarget:d,id:d.id+"-splitter",hidden:f,canResize:d.splitterResize!==false,splitterFor:d,synthetic:true},b),a=c+((g==="south"||g==="east")?0:1);if(d.collapseMode==="mini"){e.collapsedCls=d.collapsedCls}d.splitter=this.owner.add(a,e)},getMoveAfterIndex:function(b){var a=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(b.splitter){a++}return a},moveItemBefore:function(a,c){var b;if(c&&c.splitter){b=c.region;if(b==="south"||b==="east"){c=c.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,a,c)},onAdd:function(i,d){var f=this,c=i.placeholderFor,h=i.region,e,g,a,b;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(h){Ext.apply(i,f.regionFlags[h]);if(f.owner.isViewport){i.isViewportBorderChild=true}if(i.initBorderRegion){i.initBorderRegion()}e=h==="center";if(e){f.centerRegion=i}else{g=i.split;a=!!i.hidden;if(typeof g==="object"){b=g;g=true}if((i.isHorz||i.isVert)&&(g||i.collapseMode==="mini")){f.insertSplitter(i,d,a||!g,b)}}if(!e&&!i.hasOwnProperty("collapseMode")){i.collapseMode=f.panelCollapseMode}if(!i.hasOwnProperty("animCollapse")){if(i.collapseMode!=="placeholder"){i.animCollapse=false}else{i.animCollapse=f.panelCollapseAnimate}}}else{if(c){Ext.apply(i,f.regionFlags[c.region]);i.region=c.region;i.weight=c.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(b,d){var e=this,h=b.region,f=b.splitter,a=e.owner,g=a.destroying,c;if(h){if(b.isCenter){e.centerRegion=null}delete b.isCenter;delete b.isHorz;delete b.isVert;if(f&&!a.destroying){a.doRemove(f,true)}delete b.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!g&&!d&&b.rendered){c=b.getEl();if(c){c.setStyle("top","");c.setStyle(e.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(l){var o={},e=l.length,n=this.touchedRegions,g,f,a,k,d,h,m,b,c;for(g=0;g<e;++g){h=l[g].target;m=h.region;if(h.isCenter){a=h}else{if(m){c=n[m];for(f=0,k=c.length;f<k;++f){d=o[c[f]];if(d){d.neighbors.push(h)}}if(h.placeholderFor){b=h.placeholderFor.splitter}else{b=h.splitter}if(b){b.neighbors=[]}o[m]=b}}}if(a){c=n.center;for(f=0,k=c.length;f<k;++f){d=o[c[f]];if(d){d.neighbors.push(a)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e){var d=this,a=this.sizePolicies,c,b,f,g;if(e.isCenter){g=e.placeholderFor;if(g){if(g.collapsedVertical()){return a.vert}return a.horz}if(e.collapsed){if(e.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}c=e.collapseTarget;if(c){return c.isVert?a.vert:a.horz}if(e.region){if(e.isVert){b=e.height;f=a.vert}else{b=e.width;f=a.horz}if(e.flex||(typeof b==="string"&&d.percentageRe.test(b))){return a.flexAll}return f}return d.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var a={addUnflexed:function(c){this.flexSpace=Math.max(this.flexSpace-c,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)}));(Ext.cmd.derive("Ext.layout.container.Card",Ext.layout.container.Fit,{alternateClassName:"Ext.layout.CardLayout",type:"card",hideInactive:true,deferredRender:false,getRenderTree:function(){var a=this,b=a.getActiveItem();if(b){if(b.hasListeners.beforeactivate&&b.fireEvent("beforeactivate",b)===false){b=a.activeItem=a.owner.activeItem=null}else{if(b.hasListeners.activate){b.on({boxready:function(){b.fireEvent("activate",b)},single:true})}}if(a.deferredRender){if(b){return a.getItemsRenderTree([b])}}else{return Ext.layout.container.Fit.prototype.getRenderTree.apply(this,arguments)}}},renderChildren:function(){var a=this,b=a.getActiveItem();if(!a.deferredRender){Ext.layout.container.Fit.prototype.renderChildren.call(this)}else{if(b){a.renderItems([b],a.getRenderTarget())}}},isValidParent:function(c,d,a){var b=c.el?c.el.dom:Ext.getDom(c);return(b&&b.parentNode===(d.dom||d))||false},getActiveItem:function(){var c=this,b=c.activeItem===undefined?(c.owner&&c.owner.activeItem):c.activeItem,a=c.parseActiveItem(b);if(a&&c.owner.items.indexOf(a)!==-1){c.activeItem=a}return a==null?null:(c.activeItem||c.owner.activeItem)},parseActiveItem:function(a){var b;if(a&&a.isComponent){b=a}else{if(typeof a==="number"||a===undefined){b=this.getLayoutItems()[a||0]}else{if(a===null){b=null}else{b=this.owner.getComponent(a)}}}return b},configureItem:function(a){a.setHiddenState(a!==this.getActiveItem());Ext.layout.container.Fit.prototype.configureItem.apply(this,arguments)},onAdd:function(a,b){Ext.layout.container.Fit.prototype.onAdd.call(this,a,b);this.setItemHideMode(a)},onRemove:function(a){var b=this;Ext.layout.container.Fit.prototype.onRemove.call(this,a);b.resetItemHideMode(a);if(a===b.activeItem){b.activeItem=undefined}},getAnimation:function(b,a){var c=(b||{}).cardSwitchAnimation;if(c===false){return false}return c||a.cardSwitchAnimation},getNext:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b+1]||(c?a[0]:false)},next:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getNext(a),b)},getPrev:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b-1]||(c?a[a.length-1]:false)},prev:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getPrev(a),b)},setActiveItem:function(b){var e=this,a=e.owner,d=e.activeItem,g=a.rendered,c,f;b=e.parseActiveItem(b);c=a.items.indexOf(b);if(c===-1){c=a.items.items.length;Ext.suspendLayouts();b=a.add(b);Ext.resumeLayouts()}if(b&&d!==b){if(b.fireEvent("beforeactivate",b,d)===false){return false}if(d&&d.fireEvent("beforedeactivate",d,b)===false){return false}if(g){Ext.suspendLayouts();if(!b.rendered){e.renderItem(b,e.getRenderTarget(),a.items.length)}if(d){if(e.hideInactive){f=d.el.contains(Ext.Element.getActiveElement());d.hide();if(d.hidden){d.hiddenByLayout=true;d.fireEvent("deactivate",d,b)}else{return false}}}if(b.hidden){b.show()}if(b.hidden){e.activeItem=b=null}else{e.activeItem=b;if(f){if(!b.defaultFocus){b.defaultFocus=":focusable"}b.focus()}}Ext.resumeLayouts(true)}else{e.activeItem=b}b.fireEvent("activate",b,d);return e.activeItem}return false},resetItemHideMode:function(a){a.hideMode=a.originalHideMode;delete a.originalHideMode},setItemHideMode:function(a){a.originalHideMode=a.hideMode;a.hideMode="offsets"}},0,0,0,0,["layout.card"],0,[Ext.layout.container,"Card",Ext.layout,"CardLayout"],0));(Ext.cmd.derive("Ext.layout.container.Center",Ext.layout.container.Fit,{alternateClassName:"Ext.ux.layout.Center",type:"center",percentRe:/^\d+(?:\.\d+)?\%$/,itemCls:"x-center-layout-item",childEls:["targetEl"],renderTpl:['<div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div>'],targetElCls:"x-center-target",beginLayout:function(b){var j=this,c=j.percentRe,f,h,d,a,k,g,e;Ext.layout.container.Fit.prototype.beginLayout.call(this,b);f=b.childItems;for(d=0,h=f.length;d<h;++d){a=f[d];k=a.target;g=a.widthModel;e=a.heightModel;if(c.test(k.width)){k.getEl().setStyle("width","")}if(c.test(k.height)){k.getEl().setStyle("height","")}}b.targetElContext=b.getEl("targetEl",j)},beginLayoutCycle:function(b,a){var c=this.targetEl;Ext.layout.container.Fit.prototype.beginLayoutCycle.call(this,b,a);c.setStyle("width","");c.setStyle("height","")},getRenderData:function(){var a=Ext.layout.container.Fit.prototype.getRenderData.call(this);a.targetElCls=this.targetElCls;return a},getRenderTarget:function(){return this.targetEl},getItemSizePolicy:function(c,e){var b=this,a=e||b.owner.getSizeModel(),d=b.percentRe,f=((a.width.shrinkWrap||!d.test(c.width))?0:1)|((a.height.shrinkWrap||!d.test(c.height))?0:2);return b.sizePolicies[f]},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},calculate:function(b){var a=b.targetElContext,c;Ext.layout.container.Fit.prototype.calculate.call(this,b);c=b.state.info;if(b.widthModel.shrinkWrap){a.setWidth(c.contentWidth)}if(b.heightModel.shrinkWrap){a.setHeight(c.contentHeight)}},getPos:function(c,e,d){var a=d+"Model",b=c.props[d],f=0;if(!c[a].calculated){b+=e.margins[d]}if(!e.ownerContext[a].shrinkWrap){f=Math.round((e.targetSize[d]-b)/2);if(isNaN(f)){this.done=false}}return Math.max(f,0)},positionItemX:function(a,c){var b=this.getPos(a,c,"width");a.setProp("x",b)},positionItemY:function(a,c){var b=this.getPos(a,c,"height");a.setProp("y",b)},setItemHeight:function(b,c){var a=parseFloat(b.target.height)/100;b.setHeight(Math.round((c.targetSize.height-c.margins.height)*a))},setItemWidth:function(b,c){var a=parseFloat(b.target.width)/100;b.setWidth(Math.round((c.targetSize.width-c.margins.width)*a))}},0,0,0,0,["layout.center","layout.ux.center"],0,[Ext.layout.container,"Center",Ext.ux.layout,"Center"],0));(Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:true,typeName:"ptype",create:function(b,e,d){var a,c;if(b.init){a=b}else{if(d){b=Ext.apply({},b);b.cmp=d}else{d=b.cmp}if(b.xclass){a=Ext.create(b)}else{c="plugin."+(b.ptype||e);a=Ext.ClassManager.instantiateByAlias(c,b)}}if(a&&d&&a.setCmp&&!a.setCmpCalled){a.setCmp(d);a.setCmpCalled=true}return a}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var y=this,a=y.splitter,n=a.collapseTarget,d=a.defaultSplitMin,g=a.vertical?"Width":"Height",c="min"+g,u="max"+g,h="get"+g,t=a.neighbors,e=t.length,m=n.el.getBox(),f=m.x,o=m.y,x=m.right,j=m.bottom,q=a.vertical?(x-f):(j-o),w,k,r,l,v,s,p,b;l=(n[c]||Math.min(q,d))-q;v=n[u];if(!v){v=1000000000}else{v-=q}b=q;for(w=0;w<e;++w){k=t[w];q=k[h]();r=k[u];if(r===null){r=undefined}s=q-r;p=q-(k[c]||Math.min(q,d));if(!isNaN(s)){if(l<s){l=s}}if(v>p){v=p}}if(v-l<2){return null}m=new Ext.util.Region(o,x,j,f);y.constraintAdjusters[y.getCollapseDirection()](m,l,v,a);y.dragInfo={minRange:l,maxRange:v,targetSize:b};return m},constraintAdjusters:{left:function(c,a,b,d){c[0]=c.x=c.left=c.right+a;c.right+=b+d.getWidth()},top:function(c,a,b,d){c[1]=c.y=c.top=c.bottom+a;c.bottom+=b+d.getHeight()},bottom:function(c,a,b,d){c.bottom=c.top-a;c.top-=b+d.getHeight()},right:function(c,a,b,d){c.right=c.left-a;c[0]=c.x=c.left=c.x-b+d.getWidth()}},onBeforeStart:function(j){var f=this,g=f.splitter,d=g.collapseTarget,b=g.neighbors,c=b.length,a,h;if(d.collapsed){return false}for(a=0;a<c;++a){h=b[a];if(h.collapsed&&h.isHorz===d.isHorz){return false}}if(!(f.constrainTo=f.calculateConstrainRegion())){return false}return true},performResize:function(i,h){var j=this,b=j.splitter,g=b.getCollapseDirection(),a=b.collapseTarget,f=j.splitAdjusters[b.vertical?"horz":"vert"],k=h[f.index],d=j.dragInfo,c;if(g==="right"||g==="bottom"){k=-k}k=Math.min(Math.max(d.minRange,k),d.maxRange);if(k){(c=b.ownerCt).suspendLayouts();f.adjustTarget(a,d.targetSize,k);c.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(b,a,c){b.flex=null;b.setSize(a+c)}},vert:{index:1,adjustTarget:function(b,a,c){b.flex=null;b.setSize(undefined,a+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(b){var d=this,c,a,e;if(!b.el){if(b.target.isComponent){d.el=b.target.getEl()}else{d.el=b.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(d.preserveRatio&&d.minWidth&&d.minHeight){c=d.minWidth/d.el.getWidth();a=d.minHeight/d.el.getHeight();if(a>c){d.minWidth=d.el.getWidth()*a}else{d.minHeight=d.el.getHeight()*c}}if(d.throttle){e=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)},d.throttle);d.resize=function(g,h,f){if(f){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)}else{e.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(!a.dynamic&&!a.proxy){a.proxy=a.createProxy(a.target||a.el);a.hideProxy=true}if(a.proxy){a.proxy.show();return a.proxy}},createProxy:function(c){var b,a=this.proxyCls;if(c.isComponent){b=c.getProxy().addCls(a)}else{b=c.createProxy({tag:"div",role:"presentation",cls:a,id:c.id+"-rzproxy"},Ext.getBody())}b.removeCls("x-proxy-el");return b},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onMouseDown:function(b,a){var c=Ext.fly(a.parentNode);Ext.dd.DragTracker.prototype.onMouseDown.apply(this,arguments);if(c&&c.shim){c.maskIframes()}},onMouseUp:function(a){var b=Ext.fly(this.dragTarget.parentNode);Ext.dd.DragTracker.prototype.onMouseUp.apply(this,arguments);if(b&&b.shim){b.unmaskIframes()}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(p,l){var q=this,c=q.activeResizeHandle.region,f=q.getOffset(q.constrainTo?"dragTarget":null),j=q.startBox,g,n=0,r=0,i,o,a=0,t=0,s,h,b,d,m,k;c=q.convertRegionName(c);switch(c){case"south":r=f[1];b=2;break;case"north":r=-f[1];t=-r;b=2;break;case"east":n=f[0];b=1;break;case"west":n=-f[0];a=-n;b=1;break;case"northeast":r=-f[1];t=-r;n=f[0];h=[j.x,j.y+j.height];b=3;break;case"southeast":r=f[1];n=f[0];h=[j.x,j.y];b=3;break;case"southwest":n=-f[0];a=-n;r=f[1];h=[j.x+j.width,j.y];b=3;break;case"northwest":r=-f[1];t=-r;n=-f[0];a=-n;h=[j.x+j.width,j.y+j.height];b=3;break}d={width:j.width+n,height:j.height+r,x:j.x+a,y:j.y+t};i=Ext.Number.snap(d.width,q.widthIncrement);o=Ext.Number.snap(d.height,q.heightIncrement);if(i!==d.width||o!==d.height){switch(c){case"northeast":d.y-=o-d.height;break;case"north":d.y-=o-d.height;break;case"southwest":d.x-=i-d.width;break;case"west":d.x-=i-d.width;break;case"northwest":d.x-=i-d.width;d.y-=o-d.height}d.width=i;d.height=o}if(d.width<q.minWidth||d.width>q.maxWidth){d.width=Ext.Number.constrain(d.width,q.minWidth,q.maxWidth);if(a){d.x=j.x+(j.width-d.width)}}else{q.lastX=d.x}if(d.height<q.minHeight||d.height>q.maxHeight){d.height=Ext.Number.constrain(d.height,q.minHeight,q.maxHeight);if(t){d.y=j.y+(j.height-d.height)}}else{q.lastY=d.y}if(q.preserveRatio||p.shiftKey){g=q.startBox.width/q.startBox.height;m=Math.min(Math.max(q.minHeight,d.width/g),q.maxHeight);k=Math.min(Math.max(q.minWidth,d.height*g),q.maxWidth);if(b===1){d.height=m}else{if(b===2){d.width=k}else{s=Math.abs(h[0]-this.lastXY[0])/Math.abs(h[1]-this.lastXY[1]);if(s>g){d.height=m}else{d.width=k}if(c==="northeast"){d.y=j.y-(d.height-j.height)}else{if(c==="northwest"){d.y=j.y-(d.height-j.height);d.x=j.x-(d.width-j.width)}else{if(c==="southwest"){d.x=j.x-(d.width-j.width)}}}}}}q.setPosition=d.x!==q.startBox.x||d.y!==q.startBox.y;q.resize(d,l)},resize:function(d,a){var c=this,e,b=c.setPosition;if(c.dynamic||(!c.dynamic&&a)){if(b){c.target.setBox(d)}else{c.target.setSize(d.width,d.height)}}if(!a){e=c.getProxy();if(e&&e!==c.target){if(b||c.hideProxy){e.setBox(d)}else{e.setSize(d.width,d.height)}}}},onEnd:function(a){this.updateDimensions(a,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(a){return a}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(b){var k=this,p=k.handles,j=Ext.dom.Element.unselectableCls,n=[],o,c,m,r,g,e,l,a,f,d,q,h;if(Ext.isString(b)||Ext.isElement(b)||b.dom){o=b;b=arguments[1]||{};b.target=o}k.mixins.observable.constructor.call(k,b);o=k.target;if(o){if(o.isComponent){o.addClsWithUI("resizable");if(o.minWidth){k.minWidth=o.minWidth}if(o.minHeight){k.minHeight=o.minHeight}if(o.maxWidth){k.maxWidth=o.maxWidth}if(o.maxHeight){k.maxHeight=o.maxHeight}if(o.floating){if(!k.hasOwnProperty("handles")){k.handles="n ne e se s sw w nw"}}k.el=o.getEl()}else{o=k.el=k.target=Ext.get(o)}}else{o=k.target=k.el=Ext.get(k.el)}k.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(k.width)){k.width=Ext.Number.constrain(k.width,k.minWidth,k.maxWidth)}if(Ext.isNumber(k.height)){k.height=Ext.Number.constrain(k.height,k.minHeight,k.maxHeight)}if(k.width!==null||k.height!==null){k.target.setSize(k.width,k.height)}r=k.el.dom.tagName.toUpperCase();if(r==="TEXTAREA"||r==="IMG"||r==="TABLE"){k.originalTarget=k.target;d=o.isComponent?o.getEl():o;k.el.addCls(k.wrappedCls);k.target=k.el=k.el.wrap({role:"presentation",cls:k.wrapCls,id:k.el.id+"-rzwrap",style:d.getStyle(["margin-top","margin-bottom"])});q=d.getPositioning();k.el.setPositioning(q);d.clearPositioning();f=d.getBox();if(q.position!=="absolute"){f.x=0;f.y=0}k.el.setBox(f);d.setStyle("position","absolute");k.isTargetWrapped=true}k.el.position();if(k.pinned){k.el.addCls(k.pinnedCls)}k.resizeTracker=new Ext.resizer.ResizeTracker({disabled:k.disabled,target:o,el:k.el,constrainTo:k.constrainTo,handleCls:k.handleCls,overCls:k.overCls,throttle:k.throttle,proxy:k.originalTarget?k.el:null,dynamic:k.originalTarget?true:k.dynamic,originalTarget:k.originalTarget,delegate:"."+k.handleCls,preserveRatio:k.preserveRatio,heightIncrement:k.heightIncrement,widthIncrement:k.widthIncrement,minHeight:k.minHeight,maxHeight:k.maxHeight,minWidth:k.minWidth,maxWidth:k.maxWidth});k.resizeTracker.on({mousedown:k.onBeforeResize,drag:k.onResize,dragend:k.onResizeEnd,scope:k});if(k.handles==="all"){k.handles="n s e w ne nw se sw"}p=k.handles=k.handles.split(k.delimiterRe);m=k.possiblePositions;g=p.length;c=k.handleCls+" "+k.handleCls+"-{0}";if(k.target.isComponent){h=k.target.baseCls;c+=" "+h+"-handle "+h+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){c+=" "+h+"-handle-{0}-br"}}for(e=0;e<g;e++){if(p[e]&&m[p[e]]){l=m[p[e]];n.push('<div id="',k.el.id,"-",l,'-handle" class="',Ext.String.format(c,l)," ",j,'" unselectable="on" role="presentation"',"></div>")}}Ext.DomHelper.append(k.el,n.join(""));n.length=0;for(e=0;e<g;e++){if(p[e]&&m[p[e]]){l=m[p[e]];a=k[l]=k.el.getById(k.el.id+"-"+l+"-handle");n.push(a);a.region=l;if(k.transparent){a.setOpacity(0)}}}k.resizeTracker.handleEls=n},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){return this.fireResizeEvent("beforeresize",a,b)},onResize:function(a,b){return this.fireResizeEvent("resizedrag",a,b)},onResizeEnd:function(a,b){return this.fireResizeEvent("resize",a,b)},fireResizeEvent:function(a,d,f){var c=this,b;if(c.hasListeners[a]){b=c.el.getBox();return c.fireEvent(a,c,b.width,b.height,f)}},resizeTo:function(b,a){var c=this;c.target.setSize(b,a);c.fireEvent("resize",c,b,a,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var e=this,d,c=e.handles,a=c.length,b=e.possiblePositions,f;e.resizeTracker.destroy();if(e.isTargetWrapped){e.target.destroy()}for(d=0;d<a;d++){if((f=e[b[c[d]]])){f.destroy()}}e.callParent()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.selection.CellModel",Ext.selection.DataViewModel,{isCellModel:true,deselectOnContainerClick:false,enableKeyNav:true,preventWrap:false,bindComponent:function(a){var c=this,b;if(c.view&&c.gridListeners){c.gridListeners.destroy()}Ext.selection.DataViewModel.prototype.bindComponent.call(this,a);if(a){b=a.grid||a.ownerCt;if(b.optimizedColumnMove!==false){c.gridListeners=b.on({columnmove:c.onColumnMove,scope:c,destroyable:true})}}},getViewListeners:function(){var a=Ext.selection.DataViewModel.prototype.getViewListeners.call(this);a.refresh=this.onViewRefresh;return a},getHeaderCt:function(){var b=this.navigationModel.getPosition(),a=b?b.view:this.primaryView;return a.headerCt},onNavigate:function(a){if(!a.record||a.keyEvent.stopSelection){return}this.setPosition(a.position)},selectWithEvent:function(a,b){this.select(a)},select:function(g,e,b){var d=this,f,c=d.getPosition(),a=d.view.store;if(g||g===0){if(g.isModel){f=a.indexOf(g);if(f!==-1){g={row:f,column:c?c.column:0}}else{g=null}}else{if(typeof g==="number"){g={row:g,column:0}}}}if(g){d.selectByPosition(g,b)}else{d.deselect()}},getCurrentPosition:function(){var a=this.selecting?this.nextSelection:this.selection;return a?{view:a.view,record:a.record,row:a.rowIdx,columnHeader:a.column,column:a.view.getColumnManager().indexOf(a.column)}:a},getPosition:function(){return(this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(c,a,b){if(c&&!c.isCellContext){c=new Ext.grid.CellContext(this.view).setPosition({row:c.row,column:typeof c.column==="number"?this.view.getColumnManager().getColumns()[c.column]:c.column})}return this.setPosition(c,a,b)},setPosition:function(e,a,d){var c=this,b=c.selection;if(e){e=e.isCellContext?e.clone():new Ext.grid.CellContext(c.view).setPosition(e)}if(!d&&b){if(e&&(e.record===b.record&&e.column===b.column&&e.view===b.view)){e=null}else{c.onCellDeselect(c.selection,a)}}if(e){c.nextSelection=e;c.selecting=true;c.onCellSelect(c.nextSelection,a);c.selecting=false;return(c.selection=e)}},isCellSelected:function(a,e,c){var d=this,b,f=d.getPosition();if(f&&f.view===a){b=new Ext.grid.CellContext(a).setPosition({row:e,column:typeof c==="number"?a.getColumnManager().getColumns()[c]:c});return(b.record===f.record)&&(b.column===f.column)}},onStoreRemove:function(b,a,d){var c=this,e=c.getPosition();Ext.selection.DataViewModel.prototype.onStoreRemove.apply(this,arguments);if(e&&b.isMoving(e.record)){return}if(e&&b.getCount()&&b.indexOf(e.record)!==-1){e.setRow(e.record)}else{c.selection=null}},onStoreClear:function(){Ext.selection.DataViewModel.prototype.onStoreClear.apply(this,arguments);this.selection=null},onStoreAdd:function(){var a=this,b=a.getPosition();Ext.selection.DataViewModel.prototype.onStoreAdd.apply(this,arguments);if(b){b.setRow(b.record)}else{a.selection=null}},onCellClick:function(c,a,f,b,h,d,g){if(d!==-1){this.setPosition(g.position)}},onCellSelect:function(a,b){if(a&&a.rowIdx!==undefined&&a.rowIdx>-1){this.doSelect(a.record,false,b)}},onCellDeselect:function(a,b){if(a&&a.rowIdx!==undefined){this.doDeselect(a.record,b)}},onSelectChange:function(b,e,d,g){var f=this,h,c,a;if(e){h=f.nextSelection;c="select"}else{h=f.selection;c="deselect"}a=h.view||f.primaryView;if((d||f.fireEvent("before"+c,f,b,h.rowIdx,h.colIdx))!==false&&g()!==false){if(e){a.onCellSelect(h)}else{a.onCellDeselect(h);delete f.selection}if(!d){f.fireEvent(c,f,b,h.rowIdx,h.colIdx)}}},refresh:function(){var b=this.getPosition(),a;if(b&&(a=this.store.indexOf(this.selected.last()))!==-1){b.rowIdx=a}},onColumnMove:function(d,e,b,c){var a=d.up("tablepanel");if(a){this.onViewRefresh(a.view)}},onUpdate:function(a){var b=this,c;if(b.isSelected(a)){c=b.selecting?b.nextSelection:b.selection;b.view.onCellSelect(c)}},onViewRefresh:function(b){var e=this,g=e.getPosition(),c,f=b.headerCt,a,d;if(g&&g.view===b){a=g.record;d=g.column;if(!d.isDescendantOf(f)){d=f.queryById(d.id)||f.down('[text="'+d.text+'"]')||f.down('[dataIndex="'+d.dataIndex+'"]')}if(g.record){if(d&&(b.store.indexOfId(a.getId())!==-1)){c=new Ext.grid.CellContext(b).setPosition({row:a,column:d});e.setPosition(c)}}else{e.selection=null}}},selectByPosition:function(a,b){this.setPosition(a,b)}},0,0,0,0,["selection.cellmodel"],0,[Ext.selection,"CellModel"],0));(Ext.cmd.derive("Ext.selection.RowModel",Ext.selection.DataViewModel,{enableKeyNav:true,isRowModel:true,deselectOnContainerClick:false,onUpdate:function(b){var d=this,a=d.view,c;if(a&&d.isSelected(b)){c=a.indexOf(b);a.onRowSelect(c);if(b===d.lastFocused){a.onRowFocus(c,true)}}},onSelectChange:function(f,b,k,a){var h=this,l=h.views||[h.view],c=l.length,d=h.store.indexOf(f),g=b?"select":"deselect",e,j;if((k||h.fireEvent("before"+g,h,f,d))!==false&&a()!==false){for(e=0;e<c;e++){j=l[e];d=j.indexOf(f);if(j.indexOf(f)!==-1){if(b){j.onRowSelect(d,k)}else{j.onRowDeselect(d,k)}}}if(!k){h.fireEvent(g,h,f,d)}}},getCurrentPosition:function(){var a=this.selected.getAt(0);if(a){return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(a),0)}},selectByPosition:function(a,b){if(!a.isCellContext){a=new Ext.grid.CellContext(this.view).setPosition(a.row,a.column)}this.select(a.record,b)},selectNext:function(g,c){var f=this,b=f.store,e=f.getSelection(),a=e[e.length-1],d=f.view.indexOf(a)+1,h;if(d===b.getCount()||d===0){h=false}else{f.doSelect(d,g,c);h=true}return h},selectPrevious:function(f,b){var e=this,d=e.getSelection(),a=d[0],c=e.view.indexOf(a)-1,g;if(c<0){g=false}else{e.doSelect(c,f,b);g=true}return g},isRowSelected:function(a){return this.isSelected(a)},isCellSelected:function(b,a,c){return this.isSelected(a)},vetoSelection:function(c){var b=this.view.getNavigationModel(),a=c.getKey(),d=a===c.RIGHT||a===c.LEFT;return(d&&b.previousRecord===b.record)||Ext.selection.DataViewModel.prototype.vetoSelection.call(this,c)}},0,0,0,0,["selection.rowmodel"],0,[Ext.selection,"RowModel"],0));(Ext.cmd.derive("Ext.selection.CheckboxModel",Ext.selection.RowModel,{mode:"MULTI",injectCheckbox:0,checkOnly:false,showHeaderCheckbox:undefined,checkSelector:".x-grid-row-checker",allowDeselect:true,headerWidth:24,checkerOnCls:"x-grid-hd-checker-on",tdCls:"x-grid-cell-special x-grid-cell-row-checker",constructor:function(){var a=this;Ext.selection.RowModel.prototype.constructor.apply(this,arguments);if(a.mode==="SINGLE"){a.showHeaderCheckbox=false}},beforeViewRender:function(b){var c=this,a;Ext.selection.RowModel.prototype.beforeViewRender.apply(this,arguments);if(!c.hasLockedHeader()||b.headerCt.lockedCt){c.addCheckbox(b,true);a=b.ownerCt;if(b.headerCt.lockedCt){a=a.ownerCt}c.mon(a,"reconfigure",c.onReconfigure,c)}},bindComponent:function(a){this.sortable=false;Ext.selection.RowModel.prototype.bindComponent.apply(this,arguments)},hasLockedHeader:function(){var a=this.views,c=a.length,b;for(b=0;b<c;b++){if(a[b].headerCt.lockedCt){return true}}return false},addCheckbox:function(a,b){var c=this,d=c.injectCheckbox,e=a.headerCt;if(d!==false){if(d==="first"){d=0}else{if(d==="last"){d=e.getColumnCount()}}Ext.suspendLayouts();if(a.getStore().isBufferedStore){c.showHeaderCheckbox=false}c.column=e.add(d,c.getHeaderConfig());Ext.resumeLayouts()}if(b!==true){a.refresh()}},onReconfigure:function(c,a,b){if(b){this.addCheckbox(this.views[0])}},toggleUiHeader:function(e){var b=this.views[0],d=b.headerCt,c=d.child("gridcolumn[isCheckerHd]"),a=this.checkerOnCls;if(c){if(e){c.addCls(a)}else{c.removeCls(a)}}},onHeaderClick:function(c,f,b){var a=this,d;if(f===a.column&&a.mode!=="SINGLE"){b.stopEvent();d=f.el.hasCls("x-grid-hd-checker-on");if(d){a.deselectAll()}else{a.selectAll()}}},getHeaderConfig:function(){var a=this,b=a.showHeaderCheckbox!==false;return{xtype:"gridcolumn",ignoreExport:true,isCheckerHd:b,text:"&#160;",clickTargetName:"el",width:a.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,dataIndex:"",tdCls:a.tdCls,cls:b?"x-column-header-checkbox ":"",defaultRenderer:a.renderer.bind(a),editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader(),processEvent:a.processColumnEvent}},processColumnEvent:function(f,h,i,b,g,d,c,j){var a=h.getNavigationModel();if(d.type==="keydown"&&h.actionableMode&&d.getKey()===d.SPACE){a.fireEvent("navigate",{view:h,navigationModel:a,keyEvent:d,position:d.position,recordIndex:b,record:c,item:d.item,cell:d.position.cellElement,columnIndex:d.position.colIdx,column:d.position.column})}},renderEmpty:function(){return"&#160;"},refresh:function(){Ext.selection.RowModel.prototype.refresh.apply(this,arguments);this.updateHeaderState()},renderer:function(f,c,b,g,e,d,a){return'<div class="x-grid-row-checker" role="button" tabIndex="0">&#160;</div>'},selectByPosition:function(a,b){if(!a.isCellContext){a=new Ext.grid.CellContext(this.view).setPosition(a.row,a.column)}if(!this.checkOnly||a.column===this.column){Ext.selection.RowModel.prototype.selectByPosition.call(this,a,b)}},onSelectChange:function(){Ext.selection.RowModel.prototype.onSelectChange.apply(this,arguments);if(!this.suspendChange){this.updateHeaderState()}},onStoreLoad:function(){Ext.selection.RowModel.prototype.onStoreLoad.apply(this,arguments);this.updateHeaderState()},onStoreAdd:function(){Ext.selection.RowModel.prototype.onStoreAdd.apply(this,arguments);this.updateHeaderState()},onStoreRemove:function(){Ext.selection.RowModel.prototype.onStoreRemove.apply(this,arguments);this.updateHeaderState()},onStoreRefresh:function(){Ext.selection.RowModel.prototype.onStoreRefresh.apply(this,arguments);this.updateHeaderState()},maybeFireSelectionChange:function(a){if(a&&!this.suspendChange){this.updateHeaderState()}Ext.selection.RowModel.prototype.maybeFireSelectionChange.apply(this,arguments)},resumeChanges:function(){Ext.selection.RowModel.prototype.resumeChanges.call(this);if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var f=this,g=f.store,e=g.getCount(),h=f.views,j=false,a=0,b,d,c;if(!g.isBufferedStore&&e>0){b=f.selected;j=true;for(c=0,d=b.getCount();c<d;++c){if(g.indexOfId(b.getAt(c).id)===-1){break}++a}j=e===a}if(h&&h.length){f.toggleUiHeader(j)}},vetoSelection:function(f){var c=this,b=c.column,a,d,g;if(c.checkOnly){d=f.type==="click"&&f.getTarget(c.checkSelector);g=f.getKey()===f.SPACE&&f.position.column===b;a=!(d||g)}return a||Ext.selection.RowModel.prototype.vetoSelection.call(this,f)},destroy:function(){this.column=null;Ext.selection.RowModel.prototype.destroy.call(this)},privates:{onBeforeNavigate:function(a){var b=a.keyEvent;if(this.selectionMode!=="SINGLE"){a.ctrlKey=a.ctrlKey||b.ctrlKey||(b.type==="click"&&!b.shiftKey)||b.getKey()===b.SPACE}},selectWithEventMulti:function(a,d,b){var c=this;if(!d.shiftKey&&!d.ctrlKey&&d.getTarget(c.checkSelector)){if(b){c.doDeselect(a)}else{c.doSelect(a,true)}}else{Ext.selection.RowModel.prototype.selectWithEventMulti.call(this,a,d,b)}}}},1,0,0,0,["selection.checkboxmodel"],0,[Ext.selection,"CheckboxModel"],0));(Ext.cmd.derive("Ext.selection.TreeModel",Ext.selection.RowModel,{selectOnExpanderClick:false,constructor:function(a){var b=this;Ext.selection.RowModel.prototype.constructor.call(this,a);if(b.pruneRemoved){b.pruneRemoved=false;b.pruneRemovedNodes=true}},getStoreListeners:function(){var b=this,a=Ext.selection.RowModel.prototype.getStoreListeners.call(this);a.noderemove=b.onNodeRemove;return a},onNodeRemove:function(c,d,a){if(!a){var b=[];this.gatherSelected(d,b);if(b.length){this.deselect(b)}}},pruneRemovedOnRefresh:function(){return this.pruneRemovedNodes},vetoSelection:function(d){var c=this.view,b=this.selectOnExpanderClick,a=!b&&d.type==="click"&&d.getTarget(c.expanderSelector||(c.lockingPartner&&c.lockingPartner.expanderSelector));return a||Ext.selection.RowModel.prototype.vetoSelection.call(this,d)},privates:{gatherSelected:function(d,c){var e=d.childNodes,b,a,f;if(this.selected.containsKey(d.id)){c.push(d)}if(e){for(b=0,a=e.length;b<a;++b){f=e[b];this.gatherSelected(f,c)}}}}},1,0,0,0,["selection.treemodel"],0,[Ext.selection,"TreeModel"],0));(Ext.cmd.derive("Ext.state.CookieProvider",Ext.state.Provider,{constructor:function(a){var b=this;b.path="/";b.expires=new Date(Ext.Date.now()+(1000*60*60*24*7));b.domain=null;b.secure=false;Ext.state.Provider.prototype.constructor.apply(this,arguments);b.state=b.readCookies()},set:function(a,c){var b=this;if(typeof c==="undefined"||c===null){b.clear(a);return}b.setCookie(a,c);Ext.state.Provider.prototype.set.apply(this,arguments)},clear:function(a){this.clearCookie(a);Ext.state.Provider.prototype.clear.apply(this,arguments)},readCookies:function(){var e={},i=document.cookie+";",d=/\s?(.*?)=(.*?);/g,h=this.prefix,a=h.length,g,b,f;while((g=d.exec(i))!=null){b=g[1];f=g[2];if(b&&b.substring(0,a)===h){e[b.substr(a)]=this.decodeValue(f)}}return e},setCookie:function(a,c){var b=this;document.cookie=b.prefix+a+"="+b.encodeValue(c)+((b.expires==null)?"":("; expires="+b.expires.toUTCString()))+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+(b.secure?"; secure":"")},clearCookie:function(a){var b=this;document.cookie=b.prefix+a+"=null; expires=Thu, 01-Jan-1970 00:00:01 GMT"+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+(b.secure?"; secure":"")}},1,0,0,0,0,0,[Ext.state,"CookieProvider"],0));(Ext.cmd.derive("Ext.tab.Tab",Ext.button.Button,{isTab:true,baseCls:"x-tab",closeElOverCls:"x-tab-close-btn-over",closeElPressedCls:"x-tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:true,closeText:"Close Tab",active:false,childEls:["closeEl"],scale:false,ariaRole:"tab",tabIndex:-1,keyHandlers:{DELETE:"onDeleteKey"},_btnWrapCls:"x-tab-wrap",_btnCls:"x-tab-button",_baseIconCls:"x-tab-icon-el",_glyphCls:"x-tab-glyph",_innerCls:"x-tab-inner",_textCls:"x-tab-text",_noTextCls:"x-tab-no-text",_hasIconCls:"x-tab-icon",_activeCls:"x-tab-active",_closableCls:"x-tab-closable",overCls:"x-tab-over",_pressedCls:"x-tab-pressed",_disabledCls:"x-tab-disabled",_rotateClasses:{1:"x-tab-rotate-right",2:"x-tab-rotate-left"},_positions:{top:{"default":"top",0:"top",1:"left",2:"right"},right:{"default":"top",0:"right",1:"top",2:"bottom"},bottom:{"default":"bottom",0:"bottom",1:"right",2:"left"},left:{"default":"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var a=this;if(a.card){a.setCard(a.card)}Ext.button.Button.prototype.initComponent.apply(this,arguments)},getActualRotation:function(){var a=this.getRotation();return(a!=="default")?a:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var g=this,c=g._rotateClasses,b=g.getTabPosition(),f=g.getActualRotation(),e=g._rotateCls,h=g._rotateCls=c[f],d=g._positionCls,a=g._positionCls=g._positions[b][f];if(e!==h){if(e){g.removeCls(e)}if(h){g.addCls(h)}}if(d!==a){if(d){g.removeClsWithUI(d)}if(a){g.addClsWithUI(a)}if(g.rendered){g.updateFrame()}}if(g.rendered){g.setElOrientation()}},onAdded:function(b,c,a){Ext.button.Button.prototype.onAdded.call(this,b,c,a);this.syncRotationAndPosition()},getTemplateArgs:function(){var b=this,a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.closable=b.closable;a.closeText=b.closeText;return a},beforeRender:function(){var b=this,a=b.up("tabbar"),c=b.up("tabpanel");Ext.button.Button.prototype.beforeRender.call(this);b.ariaRenderAttributes=b.ariaRenderAttributes||{};if(b.active){b.ariaRenderAttributes["aria-selected"]=true;b.addCls(b._activeCls)}else{b.ariaRenderAttributes["aria-selected"]=false}b.syncClosableCls();if(!b.minWidth){b.minWidth=(a)?a.minTabWidth:b.minWidth;if(!b.minWidth&&c){b.minWidth=c.minTabWidth}if(b.minWidth&&b.iconCls){b.minWidth+=25}}if(!b.maxWidth){b.maxWidth=(a)?a.maxTabWidth:b.maxWidth;if(!b.maxWidth&&c){b.maxWidth=c.maxTabWidth}}},onRender:function(){var a=this;a.setElOrientation();Ext.button.Button.prototype.onRender.apply(this,arguments);if(a.closable){a.closeEl.addClsOnOver(a.closeElOverCls);a.closeEl.addClsOnClick(a.closeElPressedCls)}},setElOrientation:function(){var c=this,a=c.getActualRotation(),b=c.el;if(a){b.setVertical(a===1?90:270)}else{b.setHorizontal()}},enable:function(a){var b=this;Ext.button.Button.prototype.enable.apply(this,arguments);b.removeCls(b._disabledCls);return b},disable:function(a){var b=this;Ext.button.Button.prototype.disable.apply(this,arguments);b.addCls(b._disabledCls);return b},setClosable:function(a){var b=this;a=(!arguments.length||!!a);if(b.closable!==a){b.closable=a;if(b.card){b.card.closable=a}b.syncClosableCls();if(b.rendered){b.syncClosableElements();b.updateLayout()}}},syncClosableElements:function(){var a=this,b=a.closeEl;if(a.closable){if(!b){b=a.closeEl=a.btnWrap.insertSibling({tag:"span",id:a.id+"-closeEl",cls:a.baseCls+"-close-btn",html:a.closeText},"after")}b.addClsOnOver(a.closeElOverCls);b.addClsOnClick(a.closeElPressedCls)}else{if(b){b.destroy();delete a.closeEl}}},syncClosableCls:function(){var b=this,a=b._closableCls;if(b.closable){b.addCls(a)}else{b.removeCls(a)}},setCard:function(a){var b=this;b.card=a;if(a.iconAlign){b.setIconAlign(a.iconAlign)}if(a.textAlign){b.setTextAlign(a.textAlign)}b.setText(b.title||a.title);b.setIconCls(b.iconCls||a.iconCls);b.setIcon(b.icon||a.icon);b.setGlyph(b.glyph||a.glyph)},onCloseClick:function(){var a=this;if(a.fireEvent("beforeclose",a)!==false){if(a.tabBar){if(a.tabBar.closeTab(a)===false){return}}else{a.fireClose()}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(b){var a=this;if(a.tabBar){a.tabBar.onClick(b,a.el);b.stopEvent();return false}},onDeleteKey:function(a){if(this.closable){this.onCloseClick();a.stopEvent();return false}},beforeClick:function(a){if(!a){this.focus()}},activate:function(d){var c=this,b=c.card,a=c.ariaEl.dom;c.active=true;c.addCls(c._activeCls);if(a){a.setAttribute("aria-selected",true)}else{c.ariaRenderAttributes=c.ariaRenderAttributes||{};c.ariaRenderAttributes["aria-selected"]=true}if(b){if(b.ariaEl.dom){b.ariaEl.dom.setAttribute("aria-expanded",true)}else{b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes["aria-expanded"]=true}}if(d!==true){c.fireEvent("activate",c)}},deactivate:function(d){var c=this,b=c.card,a=c.ariaEl.dom;c.active=false;c.removeCls(c._activeCls);if(a){a.setAttribute("aria-selected",false)}else{c.ariaRenderAttributes=c.ariaRenderAttributes||{};c.ariaRenderAttributes["aria-selected"]=false}if(b){if(b.ariaEl.dom){b.ariaEl.dom.setAttribute("aria-expanded",false)}else{b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes["aria-expanded"]=false}}if(d!==true){c.fireEvent("deactivate",c)}},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(a){Ext.Button.superclass.wrapPrimaryEl.call(this,a)}}},0,["tab"],["component","box","button","tab"],{component:true,box:true,button:true,tab:true},["widget.tab"],0,[Ext.tab,"Tab"],0));(Ext.cmd.derive("Ext.tab.Bar",Ext.panel.Bar,{baseCls:"x-tab-bar",componentLayout:"body",isTabBar:true,config:{tabRotation:"default",tabStretchMax:true,activateOnFocus:true},defaultType:"tab",plain:false,ensureActiveVisibleOnChange:true,ariaRole:"tablist",childEls:["body","strip"],_stripCls:"x-tab-bar-strip",_baseBodyCls:"x-tab-bar-body",renderTpl:'<div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} {bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>{%this.renderContainer(out,values)%}</div><div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:"right",right:"left"},_layoutAlign:{top:"end",right:"begin",bottom:"begin",left:"end"},initComponent:function(){var d=this,a=d.initialConfig.layout,c=a&&a.align,b=a&&a.overflowHandler;if(d.plain){d.addCls(d.baseCls+"-plain")}Ext.panel.Bar.prototype.initComponent.call(this);d.setLayout({align:c||(d.getTabStretchMax()?"stretchmax":d._layoutAlign[d.dock]),overflowHandler:b||"scroller"});d.on({click:d.onClick,element:"el",scope:d})},ensureTabVisible:function(b){var c=this,d=c.tabPanel,a=c.layout.overflowHandler;if(c.rendered&&a&&c.tooNarrow&&a.scrollToItem){if(b||b===0){if(!b.isTab){if(Ext.isNumber(b)){b=this.items.getAt(b)}else{if(b.isComponent&&d&&d.items.contains(b)){b=b.tab}}}}if(!b){b=c.activeTab}if(b){a.scrollToItem(b)}}},initRenderData:function(){var a=this;return Ext.apply(Ext.panel.Bar.prototype.initRenderData.call(this),{bodyCls:a.bodyCls,baseBodyCls:a._baseBodyCls,bodyTargetCls:a.bodyTargetCls,stripCls:a._stripCls,dock:a.dock})},setDock:function(g){var f=this,a=f.items,c=f.ownerCt,e,b,d;a=a&&a.items;if(a){for(b=0,d=a.length;b<d;b++){e=a[b];if(e.isTab){e.setTabPosition(g)}}}if(f.rendered){f.resetItemMargins();if(c&&c.isHeader){c.resetItemMargins()}f.needsScroll=true}Ext.panel.Bar.prototype.setDock.call(this,g)},updateTabRotation:function(f){var e=this,a=e.items,b,d,c;a=a&&a.items;if(a){for(b=0,d=a.length;b<d;b++){c=a[b];if(c.isTab){c.setRotation(f)}}}if(e.rendered){e.resetItemMargins();e.needsScroll=true;e.updateLayout()}},onRender:function(){var a=this;Ext.panel.Bar.prototype.onRender.call(this);if(Ext.isIE8&&a.vertical){a.el.on({mousemove:a.onMouseMove,scope:a})}},afterLayout:function(){this.adjustTabPositions();Ext.panel.Bar.prototype.afterLayout.apply(this,arguments)},onAdd:function(b,c){var a=this.onTabContentChange;if(this.ensureActiveVisibleOnChange){b.barListeners=b.on({scope:this,destroyable:true,glyphchange:a,iconchange:a,textchange:a})}Ext.panel.Bar.prototype.onAdd.call(this,b,c)},onAdded:function(b,c,a){if(b.isHeader){this.addCls(b.baseCls+"-"+b.ui+"-tab-bar")}Ext.panel.Bar.prototype.onAdded.call(this,b,c,a)},onRemove:function(a,c){var b=this;if(b.ensureActiveVisibleOnChange){if(!c){a.barListeners.destroy()}a.barListeners=null}if(a===b.previousTab){b.previousTab=null}Ext.panel.Bar.prototype.onRemove.call(this,a,c)},onRemoved:function(b){var a=this.ownerCt;if(a.isHeader){this.removeCls(a.baseCls+"-"+a.ui+"-tab-bar")}Ext.panel.Bar.prototype.onRemoved.call(this,b)},onTabContentChange:function(a){if(a===this.activeTab){this.ensureTabVisible(a)}},afterComponentLayout:function(c){var d=this,b=d.needsScroll,a=d.layout.overflowHandler;Ext.panel.Bar.prototype.afterComponentLayout.apply(this,arguments);if(a&&b&&d.tooNarrow&&a.scrollToItem){a.scrollToItem(d.activeTab)}delete d.needsScroll},onMouseMove:function(f){var d=this,b=d._overTab,a,c;if(f.getTarget(".x-box-scroller")){return}a=d.getTabInfoFromPoint(f.getXY());c=a.tab;if(c!==b){if(b&&b.rendered){b.onMouseLeave(f);d._overTab=null}if(c){c.onMouseEnter(f);d._overTab=c;if(!c.disabled){d.el.setStyle("cursor","pointer")}}else{d.el.setStyle("cursor","default")}}},onMouseLeave:function(b){var a=this._overTab;if(a&&a.rendered){a.onMouseLeave(b)}},getTabInfoFromPoint:function(f){var z=this,v=z.items.items,e=v.length,n=z.layout.innerCt,t=n.getXY(),s=new Ext.util.Point(f[0],f[1]),u=0,w,b,a,o,x,h,g,d,q,k,j,m,l,r,p,y,c;for(;u<e;u++){c=v[u];w=c.lastBox;if(!w||!c.isTab){continue}k=t[0]+w.x;j=t[1]-n.dom.scrollTop+w.y;m=w.width;l=w.height;b=new Ext.util.Region(j,k+m,j+l,k);if(b.contains(s)){a=c.closeEl;if(a){if(z._isTabReversed===undefined){z._isTabReversed=p=(c.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")!==-1)}y=p?this._reverseDockNames[z.dock]:z.dock;d=a.getWidth();q=a.getHeight();x=z.getCloseXY(a,k,j,m,l,d,q,y);h=x[0];g=x[1];r=new Ext.util.Region(g,h+d,g+q,h);o=r.contains(s)}break}}return{tab:c,close:o}},getCloseXY:function(c,j,h,f,k,i,d,g){var e=c.getXY(),b,a;if(g==="right"){b=j+f-((e[1]-h)+d);a=h+(e[0]-j)}else{b=j+(e[1]-h);a=h+j+k-e[0]-i}return[b,a]},closeTab:function(c){var d=this,b=c.card,e=d.tabPanel,a;if(b&&b.fireEvent("beforeclose",b)===false){return false}a=d.findNextActivatable(c);Ext.suspendLayouts();if(e&&b){delete c.ownerCt;b.fireEvent("close",b);e.remove(b);if(!e.getComponent(b)){c.fireClose();d.remove(c)}else{c.ownerCt=d;Ext.resumeLayouts(true);return false}}if(a){if(e){e.setActiveTab(a.card)}else{d.setActiveTab(a)}a.focus()}Ext.resumeLayouts(true)},findNextActivatable:function(b){var c=this,d=c.previousTab,a;if(b.active&&c.items.getCount()>1){if(d&&d!==b&&!d.disabled){a=d}else{a=b.next("tab[disabled=false]")||b.prev("tab[disabled=false]")}}return a||c.activeTab},setActiveTab:function(b,a){var c=this;if(!b.disabled&&b!==c.activeTab){if(c.activeTab){if(c.activeTab.destroyed){c.previousTab=null}else{c.previousTab=c.activeTab;c.activeTab.deactivate();c.deactivateFocusable(c.activeTab)}}b.activate();c.activateFocusable(b);c.activeTab=b;c.needsScroll=true;if(!a){c.fireEvent("change",c,b,b.card);c.updateLayout()}}},privates:{adjustTabPositions:function(){var g=this,a=g.items.items,d=a.length,f,b,e,c,h;if(!Ext.isIE8){h=g._getTabAdjustProp();while(d--){f=a[d];e=f.el;b=f.lastBox;c=f.isTab?f.getActualRotation():0;if(c===1&&f.isVisible()){e.setStyle(h,(b.x+b.width)+"px")}else{if(c===2&&f.isVisible()){e.setStyle(h,(b.x-b.height)+"px")}}}}},applyTargetCls:function(a){this.bodyTargetCls=a},_getTabAdjustProp:function(){return"left"},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(g,f){var d=this,h,c,b,a;if(g.getTarget(".x-box-scroller")){return}if(Ext.isIE8&&d.vertical){a=d.getTabInfoFromPoint(g.getXY());c=a.tab;b=a.close}else{h=g.getTarget("."+Ext.tab.Tab.prototype.baseCls);c=h&&Ext.getCmp(h.id);b=c&&c.closeEl&&(f===c.closeEl.dom)}if(b){g.preventDefault()}if(c&&c.isDisabled&&!c.isDisabled()){c.beforeClick(b);if(c.closable&&b){c.onCloseClick()}else{d.doActivateTab(c)}}},doActivateTab:function(a){var b=this.tabPanel;if(b){if(!a.disabled){b.setActiveTab(a.card)}}else{this.setActiveTab(a)}},onFocusableContainerFocus:function(c){var b=this,a=b.mixins.focusablecontainer,d;d=a.onFocusableContainerFocus.call(b,c);if(d&&d.isTab){b.doActivateTab(d)}},onFocusableContainerFocusEnter:function(c){var b=this,a=b.mixins.focusablecontainer,d;d=a.onFocusableContainerFocusEnter.call(b,c);if(d&&d.isTab){b.doActivateTab(d)}},focusChild:function(e,b){var c=this,a=c.mixins.focusablecontainer,d;d=a.focusChild.call(c,e,b);if(c.activateOnFocus&&d&&d.isTab){c.doActivateTab(d)}}}},0,["tabbar"],["component","box","container","tabbar"],{component:true,box:true,container:true,tabbar:true},["widget.tabbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.tab,"Bar"],0));(Ext.cmd.derive("Ext.tab.Panel",Ext.panel.Panel,{alternateClassName:["Ext.TabPanel"],config:{tabBar:undefined,tabPosition:"top",tabRotation:"default",tabStretchMax:true},removePanelHeader:true,plain:false,itemCls:"x-tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var f=this,c=f.activeTab!==null?(f.activeTab||0):null,e=f.dockedItems,g=f.header,d=f.tabBarHeaderPosition,b=f.getTabBar(),a;f.layout=new Ext.layout.container.Card(Ext.apply({owner:f,deferredRender:f.deferredRender,itemCls:f.itemCls,activeItem:c},f.layout));if(d!=null){g=f.header=Ext.apply({},g);a=g.items=(g.items?g.items.slice():[]);g.itemPosition=d;a.push(b);g.hasTabBar=true}else{e=[].concat(f.dockedItems||[]);e.push(b);f.dockedItems=e}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);c=f.activeTab=f.getComponent(c);if(c){b.setActiveTab(c.tab,true)}},onRender:function(){var b=this.items.items,a=b.length,c;Ext.panel.Panel.prototype.onRender.apply(this,arguments);for(c=0;c<a;++c){b[c].getBind()}},setActiveTab:function(a){var c=this,b;if(!Ext.isObject(a)||a.isComponent){a=c.getComponent(a)}b=c.getActiveTab();if(a){Ext.suspendLayouts();if(!a.isComponent){a=c.add(a)}if(b===a||c.fireEvent("beforetabchange",c,a,b)===false){Ext.resumeLayouts(true);return b}c.activeTab=a;c.layout.setActiveItem(a);a=c.activeTab=c.layout.getActiveItem();if(a&&a!==b){c.tabBar.setActiveTab(a.tab);Ext.resumeLayouts(true);if(b!==a){c.fireEvent("tabchange",c,a,b)}}else{Ext.resumeLayouts(true)}return a}return b},setActiveItem:function(a){return this.setActiveTab(a)},getActiveTab:function(){var b=this,a=b.getComponent(b.activeTab);if(a&&b.items.indexOf(a)!==-1){b.activeTab=a}else{b.activeTab=undefined}return b.activeTab},applyTabBar:function(a){var c=this,b=(c.tabBarHeaderPosition!=null)?c.getHeaderPosition():c.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:c.ui,dock:b,tabRotation:c.getTabRotation(),vertical:(b==="left"||b==="right"),plain:c.plain,tabStretchMax:c.getTabStretchMax(),tabPanel:c},a))},updateHeaderPosition:function(c,b){var a=this.getTabBar();if(a&&(this.tabBarHeaderPosition!=null)){a.setDock(c)}Ext.panel.Panel.prototype.updateHeaderPosition.call(this,c,b)},updateTabPosition:function(b){var a=this.getTabBar();if(a&&(this.tabBarHeaderPosition==null)){a.setDock(b)}},updateTabRotation:function(b){var a=this.getTabBar();if(a){a.setTabRotation(b)}},onAdd:function(g,e){var f=this,d=Ext.apply({},g.tabConfig),c=f.getTabBar(),b,a={xtype:"tab",title:g.title,icon:g.icon,iconCls:g.iconCls,glyph:g.glyph,ui:c.ui,card:g,disabled:g.disabled,closable:g.closable,hidden:g.hidden&&!g.hiddenByLayout,tooltip:g.tooltip,tabBar:c,tabPosition:c.dock,rotation:c.getTabRotation()};if(g.closeText!==undefined){a.closeText=g.closeText}d=Ext.applyIf(d,a);g.tab=f.tabBar.insert(e,d);g.ariaRole="tabpanel";b=g.ariaEl.dom;if(b){b.setAttribute("aria-labelledby",g.tab.id)}else{g.ariaRenderAttributes=g.ariaRenderAttributes||{};g.ariaRenderAttributes["aria-labelledby"]=g.tab.id}g.on({scope:f,enable:f.onItemEnable,disable:f.onItemDisable,beforeshow:f.onItemBeforeShow,iconchange:f.onItemIconChange,iconclschange:f.onItemIconClsChange,glyphchange:f.onItemGlyphChange,titlechange:f.onItemTitleChange});if(g.isPanel){if(f.removePanelHeader){if(g.rendered){if(g.header){g.header.hide()}}else{g.header=false}}if(g.isPanel&&f.border){g.setBorder(false)}}if(f.rendered){g.getBind()}if(f.rendered&&f.loader&&f.activeTab===undefined&&f.layout.activeItem!==null){f.setActiveTab(0)}},onMove:function(c,b,d){var a=this.getTabBar();Ext.panel.Panel.prototype.onMove.call(this,c,b,d);if(a.items.indexOf(c.tab)!==d){a.move(c.tab,d)}},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab){this.setActiveTab(a);return false}},onItemGlyphChange:function(a,b){a.tab.setGlyph(b)},onItemIconChange:function(b,a){b.tab.setIcon(a)},onItemIconClsChange:function(b,a){b.tab.setIconCls(a)},onItemTitleChange:function(a,b){a.tab.setText(b)},onRemove:function(b,c){var a=this;b.un({scope:a,enable:a.onItemEnable,disable:a.onItemDisable,beforeshow:a.onItemBeforeShow,iconchange:a.onItemIconChange,iconclschange:a.onItemIconClsChange,glyphchange:a.onItemGlyphChange,titlechange:a.onItemTitleChange});if(b.tab&&!a.destroying&&b.tab.ownerCt===a.tabBar){a.tabBar.remove(b.tab)}},privates:{doRemove:function(d,b){var c=this,a;if(c.removingAll||c.destroying||c.items.getCount()===1){c.activeTab=null}else{if(d.tab&&(a=c.tabBar.items.indexOf(c.tabBar.findNextActivatable(d.tab)))!==-1){c.setActiveTab(a)}}Ext.panel.Panel.prototype.doRemove.apply(this,arguments);if(d.tab){delete d.tab.card;delete d.tab}}}},0,["tabpanel"],["component","box","container","panel","tabpanel"],{component:true,box:true,container:true,panel:true,tabpanel:true},["widget.tabpanel"],0,[Ext.tab,"Panel",Ext,"TabPanel"],0));(Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1},0,["tbfill"],["component","box","tbfill"],{component:true,box:true,tbfill:true},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0));(Ext.cmd.derive("Ext.toolbar.Spacer",Ext.Component,{alternateClassName:"Ext.Toolbar.Spacer",baseCls:"x-toolbar-spacer",ariaRole:"presentation"},0,["tbspacer"],["component","box","tbspacer"],{component:true,box:true,tbspacer:true},["widget.tbspacer"],0,[Ext.toolbar,"Spacer",Ext.Toolbar,"Spacer"],0));(Ext.cmd.derive("Ext.tree.Column",Ext.grid.column.Column,{tdCls:"x-grid-cell-treecolumn",autoLock:true,lockable:false,draggable:false,hideable:false,iconCls:"x-tree-icon",checkboxCls:"x-tree-checkbox",elbowCls:"x-tree-elbow",expanderCls:"x-tree-expander",textCls:"x-tree-node-text",innerCls:"x-grid-cell-inner-treecolumn",customIconCls:"x-tree-icon-custom",isTreeColumn:true,cellTpl:['<tpl for="lines">','<div class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"></div>',"</tpl>",'<div class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"></div>','<tpl if="checked !== null">','<div role="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"></div>',"</tpl>",'<tpl if="icon"><img src="{blankUrl}"<tpl else><div</tpl>',' role="presentation" class="{childCls} {baseIconCls} {customIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else><tpl if="expanded">parent-expanded<tpl else>parent</tpl></tpl> {iconCls}" ','<tpl if="icon">style="background-image:url({icon})"/><tpl else>></div></tpl>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],uiFields:{checked:1,icon:1,iconCls:1},rowFields:{expanded:1,loaded:1,expandable:1,leaf:1,loading:1,qtip:1,qtitle:1,cls:1},initComponent:function(){var a=this;a.rendererScope=a.scope;a.setupRenderer();a.innerRenderer=a.renderer;a.renderer=a.treeRenderer;Ext.grid.column.Column.prototype.initComponent.call(this);a.scope=a;a.hasCustomRenderer=a.innerRenderer&&a.innerRenderer.length>1},treeRenderer:function(h,a,e,b,c,i,g){var f=this,j=e.get("cls"),d;if(a&&j){a.tdCls+=" "+j}d=f.initTemplateRendererData(h,a,e,b,c,i,g);return f.getTpl("cellTpl").apply(d)},initTemplateRendererData:function(k,a,f,b,e,l,i){var h=this,c=h.innerRenderer,d=f.data,j=f.parentNode,m=i.rootVisible,n=[],g;while(j&&(m||j.data.depth>0)){g=j.data;n[m?g.depth:g.depth-1]=g.isLast?0:1;j=j.parentNode}return{record:f,baseIconCls:h.iconCls,customIconCls:(d.icon||d.iconCls)?h.customIconCls:"",iconCls:d.iconCls,icon:d.icon,checkboxCls:h.checkboxCls,checked:d.checked,elbowCls:h.elbowCls,expanderCls:h.expanderCls,textCls:h.textCls,leaf:d.leaf,expandable:f.isExpandable(),expanded:d.expanded,isLast:f.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:d.href,hrefTarget:d.hrefTarget,lines:n,metaData:a,childCls:h.getChildCls?h.getChildCls()+" ":"",value:c?c.apply(h.rendererScope,arguments):k}},shouldUpdateCell:function(b,d){var e=this,c=0,a,f;if(d){a=d.length;for(;c<a;++c){f=d[c];if(e.rowFields[f]){return 1}if(e.uiFields[f]){return 2}}}return Ext.grid.column.Column.prototype.shouldUpdateCell.call(this,b,d)}},0,["treecolumn"],["component","box","container","headercontainer","gridcolumn","treecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,treecolumn:true},["widget.treecolumn"],0,[Ext.tree,"Column"],0));(Ext.cmd.derive("Ext.tree.NavigationModel",Ext.grid.NavigationModel,{initKeyNav:function(b){var e=this,d=e.view.ownerGrid.columns,a,c;e.isTreeGrid=d&&d.length>1;Ext.grid.NavigationModel.prototype.initKeyNav.call(this,b);for(c=0,a=e.keyNav.length;c<a;c++){e.keyNav[c].map.addBinding([{key:"8",shift:true,handler:e.onAsterisk,scope:e},{key:Ext.event.Event.NUM_MULTIPLY,handler:e.onAsterisk,scope:e}])}e.view.grid.on({columnschanged:e.onColumnsChanged,scope:e})},onColumnsChanged:function(){this.isTreeGrid=this.view.ownerGrid.getVisibleColumnManager().getColumns().length>1},onCellClick:function(d,b,f,c,g,e,a){Ext.grid.NavigationModel.prototype.onCellClick.call(this,d,b,f,c,g,e,a);return !a.nodeToggled},onKeyLeft:function(d){var c=this,b=d.view,a=c.record;if(c.isTreeGrid&&!d.ctrlKey){return Ext.grid.NavigationModel.prototype.onKeyLeft.call(this,d)}if(d.position.column.isTreeColumn&&a.isExpanded()){b.collapse(a)}else{a=a.parentNode;if(a&&!(a.isRoot()&&!b.rootVisible)){c.setPosition(a,null,d)}}},onKeyRight:function(c){var b=this,a=b.record;if(b.isTreeGrid&&!c.ctrlKey){return Ext.grid.NavigationModel.prototype.onKeyRight.call(this,c)}if(!a.isLeaf()){if(c.position.column.isTreeColumn&&!a.isExpanded()){c.view.expand(a)}else{if(a.isExpanded()){a=a.childNodes[0];if(a){b.setPosition(a)}}}}},onKeyEnter:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else{Ext.grid.NavigationModel.prototype.onKeyEnter.call(this,a)}},onKeySpace:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else{Ext.grid.NavigationModel.prototype.onKeySpace.call(this,a)}},toggleCheck:function(a){this.view.onCheckChange(a)},onAsterisk:function(a){this.view.ownerCt.expandAll()}},0,0,0,0,["view.navigation.tree"],0,[Ext.tree,"NavigationModel"],0));(Ext.cmd.derive("Ext.tree.View",Ext.view.Table,{config:{selectionModel:{type:"treemodel"}},isTreeView:true,loadingCls:"x-grid-tree-loading",expandedCls:"x-grid-tree-node-expanded",leafCls:"x-grid-tree-node-leaf",expanderSelector:".x-tree-expander",checkboxSelector:".x-tree-checkbox",expanderIconOverCls:"x-tree-expander-over",nodeAnimWrapCls:"x-tree-animator-wrap",ariaRole:"tree",loadMask:false,rootVisible:true,expandDuration:250,collapseDuration:250,toggleOnDblClick:true,stripeRows:false,treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(c){var b=c.record,a=c.view;c.rowAttr["data-qtip"]=b.get("qtip")||"";c.rowAttr["data-qtitle"]=b.get("qtitle")||"";if(b.isExpanded()){c.rowClasses.push(a.expandedCls)}if(b.isLeaf()){c.rowClasses.push(a.leafCls)}if(b.isLoading()){c.rowClasses.push(a.loadingCls)}}}],initComponent:function(){var a=this;if(a.bufferedRenderer){a.animate=false}else{if(a.initialConfig.animate===undefined){a.animate=Ext.enableFx}}a.store=a.panel.getStore();a.onRootChange(a.store.getRoot());a.animQueue={};a.animWraps={};Ext.view.Table.prototype.initComponent.call(this);a.store.setRootVisible(a.rootVisible);a.addRowTpl(Ext.XTemplate.getTpl(a,"treeRowTpl"))},onFillComplete:function(e,d,b){var c=this,a=c.store,f=a.indexOf(b[0]);d.triggerUIUpdate();if(!b.length||f===-1){return}c.onAdd(c.store,b,f);c.refreshPartner()},refreshPartner:function(){var a=this.lockingPartner;if(a){a.refresh()}},afterComponentLayout:function(c,b,d,e){var a=this.getScrollable();Ext.view.Table.prototype.afterComponentLayout.call(this,c,b,d,e);if(a&&!this.bufferedRenderer){a.refresh()}},processUIEvent:function(a){if(a.getTarget("."+this.nodeAnimWrapCls,this.el)){return false}return Ext.view.Table.prototype.processUIEvent.call(this,a)},setRootNode:function(a){this.node=a},getChecked:function(){var a=[];this.node.cascadeBy(function(b){if(b.get("checked")){a.push(b)}});return a},isItemChecked:function(a){return a.get("checked")},createAnimWrap:function(a,b){var e=this,d=e.getNode(a),c;c=Ext.fly(d).insertSibling({role:"presentation",tag:"div",cls:e.nodeAnimWrapCls},"after");return{record:a,node:d,el:c,expanding:false,collapsing:false,animateEl:c,targetEl:c}},getAnimWrap:function(d,a){if(!this.animate){return null}var b=this.animWraps,c=b[d.internalId];if(a!==false){while(!c&&d){d=d.parentNode;if(d){c=b[d.internalId]}}}return c},doAdd:function(b,f){var g=this,d=b[0],h=d.parentNode,i=g.all,m,c=g.getAnimWrap(h),k,j,e,l,a;if(!c||!c.expanding){return Ext.view.Table.prototype.doAdd.call(this,b,f)}l=g.bufferRender(b,f,true);a=l.children;h=c.record;k=c.targetEl;j=k.dom.childNodes;e=j.length;m=f-g.indexInStore(h)-1;if(!e||m>=e){k.appendChild(l.fragment,true)}else{Ext.fly(j[m]).insertSibling(a,"before",true)}i.insert(f,a);return a},onRemove:function(f,a,b){var d=this,e,c,h=d.hasListeners.remove,g;if(d.viewReady){e=d.store.getCount()===0;if(d.bufferedRenderer){return Ext.view.Table.prototype.onRemove.call(this,f,a,b)}if(h){g=this.all.slice(b,b+a.length)}if(e){d.refresh()}else{for(c=a.length-1,b+=c;c>=0;--c,--b){d.doRemove(a[c],b)}d.refreshSizePending=true}if(h){d.fireEvent("itemremove",a,b,g,d)}}},doRemove:function(a,c){var g=this,d=g.all,b=g.getAnimWrap(a),f=d.item(c),e=f?f.dom:null;if(!e||!b||!b.collapsing){return Ext.view.Table.prototype.doRemove.call(this,a,c)}b.targetEl.dom.insertBefore(e,b.targetEl.dom.firstChild);d.removeElement(c)},onBeforeExpand:function(d,b,c){var e=this,a;if(e.rendered&&e.all.getCount()&&e.animate){if(e.getNode(d)){a=e.getAnimWrap(d,false);if(!a){a=e.animWraps[d.internalId]=e.createAnimWrap(d);a.animateEl.setHeight(0)}else{if(a.collapsing){a.targetEl.select(e.itemSelector).destroy()}}a.expanding=true;a.collapsing=false}}},onExpand:function(h){var g=this,e=g.animQueue,a=h.getId(),c=g.getNode(h),f=c?g.indexOf(c):-1,d,b,i;if(g.singleExpand){g.ensureSingleExpand(h)}if(f===-1){return}d=g.getAnimWrap(h,false);if(!d){h.isExpandingOrCollapsing=false;g.fireEvent("afteritemexpand",h,f,c);return}b=d.animateEl;i=d.targetEl;b.stopAnimation();e[a]=true;Ext.on("idle",function(){b.dom.style.height="0px"},null,{single:true});b.animate({from:{height:0},to:{height:i.dom.scrollHeight},duration:g.expandDuration,listeners:{afteranimate:function(){var j=i.dom.childNodes,k=Ext.Element.getActiveElement();if(j.length){if(!i.contains(k)){k=null}d.el.insertSibling(j,"before",true);if(k){Ext.fly(k).focus()}}d.el.destroy();g.animWraps[d.record.internalId]=e[a]=null}},callback:function(){h.isExpandingOrCollapsing=false;if(!g.destroyed){g.refreshSize(true)}g.fireEvent("afteritemexpand",h,f,c)}})},onBeforeCollapse:function(e,b,c,g,d){var f=this,a;if(f.rendered&&f.all.getCount()){if(f.animate){if(e.isVisible()){a=f.getAnimWrap(e);if(!a){a=f.animWraps[e.internalId]=f.createAnimWrap(e,c)}else{if(a.expanding){a.targetEl.select(this.itemSelector).destroy()}}a.expanding=false;a.collapsing=true;a.callback=g;a.scope=d}}else{f.onCollapseCallback=g;f.onCollapseScope=d}}},onCollapse:function(d){var f=this,a=f.animQueue,h=d.getId(),e=f.getNode(d),c=e?f.indexOf(e):-1,b=f.getAnimWrap(d),g;if(!f.all.getCount()||!d.isVisible()){return}if(!b){d.isExpandingOrCollapsing=false;f.fireEvent("afteritemcollapse",d,c,e);Ext.callback(f.onCollapseCallback,f.onCollapseScope);f.onCollapseCallback=f.onCollapseScope=null;return}g=b.animateEl;a[h]=true;g.stopAnimation();g.animate({to:{height:0},duration:f.collapseDuration,listeners:{afteranimate:function(){b.el.destroy();f.animWraps[b.record.internalId]=a[h]=null}},callback:function(){d.isExpandingOrCollapsing=false;if(!f.destroyed){f.refreshSize(true)}f.fireEvent("afteritemcollapse",d,c,e);Ext.callback(b.callback,b.scope);b.callback=b.scope=null}})},isAnimating:function(a){return !!this.animQueue[a.getId()]},expand:function(d,c,g,e){var f=this,b=!!f.animate,a;if(!b||!d.isExpandingOrCollapsing){if(!d.isLeaf()){d.isExpandingOrCollapsing=b}Ext.suspendLayouts();a=d.expand(c,g,e);Ext.resumeLayouts(true);return a}},collapse:function(c,b,f,d){var e=this,a=!!e.animate;if(!a||!c.isExpandingOrCollapsing){if(!c.isLeaf()){c.isExpandingOrCollapsing=a}return c.collapse(b,f,d)}},toggle:function(b,a,d,c){if(b.isExpanded()){this.collapse(b,a,d,c)}else{this.expand(b,a,d,c)}},onItemDblClick:function(a,f,c,g){var d=this,b=d.editingPlugin;Ext.view.Table.prototype.onItemDblClick.call(this,a,f,c,g);if(d.toggleOnDblClick&&a.isExpandable()&&!(b&&b.clicksToEdit===2)){d.toggle(a)}},onCellClick:function(h,f,b,j,g,c){var d=this,a=c.position.column,i;if(a.isTreeColumn){if(c.getTarget(d.checkboxSelector,h)&&Ext.isBoolean(i=b.get("checked"))&&d.fireEvent("beforecheckchange",b,i,c)!==false){d.onCheckChange(c);if(a.stopSelection){c.stopSelection=true}}else{if(c.getTarget(d.expanderSelector,h)&&b.isExpandable()){d.getNavigationModel().setPosition(c.position);d.toggle(b,c.ctrlKey);c.nodeToggled=true}}return Ext.view.Table.prototype.onCellClick.call(this,h,f,b,j,g,c)}},onCheckChange:function(c){var a=c.record,b=!a.get("checked");a.set("checked",b);this.fireEvent("checkchange",a,b,c)},onItemMouseOver:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)){d.getTarget(this.cellSelector,null,true).addCls(this.expanderIconOverCls)}},onItemMouseOut:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)){d.getTarget(this.cellSelector,null,true).removeCls(this.expanderIconOverCls)}},getStoreListeners:function(){return Ext.apply(Ext.view.Table.prototype.getStoreListeners.call(this),{rootchange:this.onRootChange,fillcomplete:this.onFillComplete})},onBindStore:function(a,c,d,e){var b=e&&e.getRootNode(),f=a&&a.getRootNode();Ext.view.Table.prototype.onBindStore.call(this,a,c,d,e);if(f!==b){this.onRootChange(f,b)}},onRootChange:function(d,a){var c=this,b=c.grid;if(a){c.rootListeners.destroy();c.rootListeners=null}if(d){c.rootListeners=d.on({beforeexpand:c.onBeforeExpand,expand:c.onExpand,beforecollapse:c.onBeforeCollapse,collapse:c.onCollapse,destroyable:true,scope:c});b.addRelayers(d)}},ensureSingleExpand:function(b){var a=b.parentNode;if(a){a.eachChild(function(c){if(c!==b&&c.isExpanded()){c.collapse()}})}}},0,["treeview"],["component","box","dataview","tableview","gridview","treeview"],{component:true,box:true,dataview:true,tableview:true,gridview:true,treeview:true},["widget.treeview"],0,[Ext.tree,"View"],0));(Ext.cmd.derive("Ext.tree.Panel",Ext.panel.Table,{alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",treeCls:"x-tree-panel",rowLines:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:true,arrowCls:"x-tree-arrows",linesCls:"x-tree-lines",noLinesCls:"x-tree-no-lines",autoWidthCls:"x-autowidth-table",constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;Ext.panel.Table.prototype.constructor.call(this,a)},initComponent:function(){var d=this,b=[d.treeCls],c,a;if(d.useArrows){b.push(d.arrowCls);d.lines=false}if(d.lines){b.push(d.linesCls)}else{if(!d.useArrows){b.push(d.noLinesCls)}}c=d.applyStore(d.store);if(!c.getRoot()){c.setRoot({})}c.setRootVisible(d.rootVisible);d.viewConfig=Ext.apply({rootVisible:d.rootVisible,animate:d.enableAnimations,singleExpand:d.singleExpand,node:c.getRoot(),hideHeaders:d.hideHeaders,navigationModel:"tree"},d.viewConfig);if(!d.columns){if(d.initialConfig.hideHeaders===undefined){d.hideHeaders=true}d.addCls(d.autoWidthCls);d.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:d.displayField}]}if(d.cls){b.push(d.cls)}d.cls=b.join(" ");Ext.panel.Table.prototype.initComponent.call(this);a=d.getView();d.relayEvents(a,["beforecheckchange","checkchange","afteritemexpand","afteritemcollapse"])},applyStore:function(a){var b=this;if(Ext.isString(a)){a=b.store=Ext.StoreMgr.lookup(a)}else{if(!a||!a.isStore){a=Ext.apply({type:"tree",proxy:"memory"},a);if(b.root){a.root=b.root}if(b.fields){a.fields=b.fields}else{if(b.model){a.model=b.model}}if(b.folderSort){a.folderSort=b.folderSort}a=b.store=Ext.StoreMgr.lookup(a)}else{if(b.root){a=b.store=Ext.data.StoreManager.lookup(a);a.setRoot(b.root);if(b.folderSort!==undefined){a.folderSort=b.folderSort;a.sort()}}}}return a},setStore:function(a){var b=this;a=b.applyStore(a);if(!a.getRoot()){a.setRoot({})}a.setRootVisible(b.rootVisible);if(b.view){b.view.setRootNode(a.getRootNode())}b.bindStore(a)},bindStore:function(b,c){var d=this,a=b.getRoot(),e=d.bufferedRenderer;Ext.panel.Table.prototype.bindStore.apply(this,arguments);if(e){if(e.store){e.bindStore(b)}}b.singleExpand=d.singleExpand;d.storeListeners=d.mon(b,{destroyable:true,rootchange:d.onRootChange,scope:d});d.storeRelayers=d.relayEvents(b,["beforeload","load"]);if(!d.rootVisible&&!b.autoLoad&&!(a.isExpanded()||a.isLoading())){if(a.isLoaded()){a.data.expanded=true;b.onNodeExpand(a,a.childNodes)}else{if(b.autoLoad!==false){a.data.expanded=false;a.expand()}}}b.ownerTree=d;if(!c){d.view.setRootNode(a)}},addRelayers:function(b){var a=this;if(a.rootRelayers){a.rootRelayers.destroy();a.rootRelayers=null}a.rootRelayers=a.mon(b,{destroyable:true,append:a.createRelayer("itemappend"),remove:a.createRelayer("itemremove"),move:a.createRelayer("itemmove",[0,4]),insert:a.createRelayer("iteminsert"),beforeappend:a.createRelayer("beforeitemappend"),beforeremove:a.createRelayer("beforeitemremove"),beforemove:a.createRelayer("beforeitemmove"),beforeinsert:a.createRelayer("beforeiteminsert"),expand:a.createRelayer("itemexpand",[0,1]),collapse:a.createRelayer("itemcollapse",[0,1]),beforeexpand:a.createRelayer("beforeitemexpand",[0,1]),beforecollapse:a.createRelayer("beforeitemcollapse",[0,1]),scope:a})},unbindStore:function(){var b=this,a=b.store;if(a){Ext.panel.Table.prototype.unbindStore.call(this);Ext.destroy(b.storeListeners,b.storeRelayers,b.rootRelayers);delete a.ownerTree;a.singleExpand=null}},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandNode:function(b,a,d,c){return this.getView().expand(b,a,d,c||this)},collapseNode:function(b,a,d,c){return this.getView().collapse(b,a,d,c||this)},expandAll:function(d,b){var c=this,a=c.getRootNode();if(a){Ext.suspendLayouts();a.expand(true,d,b||c);Ext.resumeLayouts(true)}},collapseAll:function(e,c){var d=this,b=d.getRootNode(),a=d.getView();if(b){Ext.suspendLayouts();c=c||d;if(a.rootVisible){b.collapse(true,e,c)}else{b.collapseChildren(true,e,c)}Ext.resumeLayouts(true)}},expandPath:function(n,p){var e=arguments,f=this,g=f.view,h=(p&&p.field)||f.store.model.idProperty,i,o,b=(p&&p.separator)||"/",j,m,d,c,l,a,k;if(p&&typeof p==="object"){h=p.field||f.store.model.idProperty;b=p.separator||"/";j=p.callback;m=p.scope;i=p.select;o=p.focus}else{h=e[1]||f.store.model.idProperty;b=e[2]||"/";j=e[3];m=e[4]}if(Ext.isEmpty(n)){return Ext.callback(j,m||f,[false,null])}l=n.split(b);a=!l[0];if(a){d=f.getRootNode();c=1}else{d=f.store.findNode(h,l[0]);c=0}if(!d||(a&&d.get(h)!==l[1])){return Ext.callback(j,m||f,[false,d])}k=function(u){var s=this,q,r,t;if(++c===l.length){if(i){g.getSelectionModel().select(s)}if(o){g.getNavigationModel().setPosition(s,0)}return Ext.callback(j,m||f,[true,s,g.getNode(s)])}for(r=0,q=u?u.length:0;r<q;r++){s=u[r];t=s.get(h);if(t||t===0){t=t.toString()}if(t===l[c]){return s.expand(false,k)}}s=this;Ext.callback(j,m||f,[false,s,g.getNode(s)])};d.expand(false,k)},ensureVisible:function(l,m){if(l.isEntity||typeof l==="number"){return Ext.panel.Table.prototype.ensureVisible.call(this,l,m)}var f=this,g=(m&&m.field)||f.store.model.idProperty,e=(m&&m.separator)||"/",i,k,j,a,h,b,d,c=function(q,o,n,p){if(!p&&q&&o){p=o.findChild(g,h)}if(p){f.doEnsureVisible(p,m)}else{Ext.callback(i,k||f,[false,o])}};if(m){i=m.callback;k=m.scope}j=l.split(e);a=!j[0];h=j.pop();if(j.length&&!(a&&j.length===1)){f.expandPath(j.join(e),g,e,c)}else{b=f.store.findNode(g,h);if(b){d=b.parentNode;if(d&&!d.isExpanded()){d.expand()}c(true,null,null,b)}else{Ext.callback(i,k||f,[false,null])}}},selectPath:function(d,c,b,e,a){this.ensureVisible(d,{field:c,separator:b,select:true,callback:e,scope:a})}},1,["treepanel"],["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},["widget.treepanel"],0,[Ext.tree,"Panel",Ext.tree,"TreePanel",Ext,"TreePanel"],0));Ext.define("FBEditor.override.tree.Panel",{override:"Ext.tree.Panel"});Ext.namespace("Ext.theme.is")["fb3-theme"]=true;Ext.theme.name="fb3-theme";(Ext.cmd.derive("FBEditor.command.HistoryCommand",Ext.Base,{singleton:true,alternateClassName:"FBEditor.HistoryCommand",commands:null,currentIndex:-1,init:function(){var a=this;a.commands=new Ext.util.MixedCollection()},add:function(c){var b=this,a;a=b.currentIndex;b.commands.add(a,c);a++;b.currentIndex=a}},0,0,0,0,0,0,[FBEditor.command,"HistoryCommand",FBEditor,"HistoryCommand"],0));(Ext.cmd.derive("FBEditor.file.File",Ext.Base,{LOAD_TYPE_TEXT:"text",LOAD_TYPE_ARRAYBUFFER:"arraybuffer",file:null,fileReader:null,constructor:function(b){var c=this,a;c.file=b;a=new FileReader();a.file=b;c.fileReader=a},read:function(g){var f=this,a=true,b=f.fileReader,c=f.file,d=g.type?g.type:f.LOAD_TYPE_TEXT,e;if(d===f.LOAD_TYPE_TEXT){e=f.getEncode();b.readAsText(c,e)}else{if(d===f.LOAD_TYPE_ARRAYBUFFER){b.readAsArrayBuffer(c)}else{a=false}}b.onload=g.load?function(){g.load(this.result)}:null;return a},getEncode:function(){var a;a="windows-1251";return a}},1,0,0,0,0,0,[FBEditor.file,"File"],0));(Ext.cmd.derive("FBEditor.file.Zip",Ext.Base,{zip:null,constructor:function(){var a=this;a.zip=new JSZip()},unPackage:function(c){var b=this,a=b.zip,d;d=new Promise(function(f,e){a.loadAsync(c).then(function(g){f(g)})["catch"](function(g){e(g)})});return d},getFiles:function(){var b=this,a=b.zip;return a.files},generateBlob:function(){var b=this,a=b.zip,c;c=new Promise(function(e,d){a.generateAsync({type:"blob"}).then(function(f){e(f)})});return c},file:function(b,e,a){var d=this,c=d.zip;b=b.replace(/^\//,"");c.file(b,e,a)},remove:function(a){var c=this,b=c.zip;b.remove(a)}},1,0,0,0,0,0,[FBEditor.file,"Zip"],0));(Ext.cmd.derive("FBEditor.file.event.Abstract",Ext.Base,{event:null,constructor:function(b){var a=this;a.event=b},getFiles:function(){throw Error("Необходимо переопределить метод FBEditor.file.event.Abstract#getFiles()")},getFile:function(){var c=this,b=c.getFiles(),a;a=b?b[0]:null;return a},clear:function(){var a=this,b=a.event;if(b.dataTransfer.items){b.dataTransfer.items.clear()}else{b.dataTransfer.clearData()}}},1,0,0,0,0,0,[FBEditor.file.event,"Abstract"],0));(Ext.cmd.derive("FBEditor.file.event.Button",FBEditor.file.event.Abstract,{getFiles:function(){var b=this,c=b.event,a=null;if(c.target.files){Ext.each(c.target.files,function(e){var d;a=a||[];d=Ext.create("FBEditor.file.File",e);a.push(d)})}return a}},0,0,0,0,0,0,[FBEditor.file.event,"Button"],0));(Ext.cmd.derive("FBEditor.file.event.Drop",FBEditor.file.event.Abstract,{getFile:function(){var c=this,b=c.getFiles(),a;a=b?b[0]:null;return a},getFiles:function(){var b=this,c=b.event,a=null;if(c.dataTransfer.items){Ext.each(c.dataTransfer.items,function(e){var d;if(e.kind==="file"){a=a||[];d=e.getAsFile();d=Ext.create("FBEditor.file.File",d);a.push(d)}})}else{if(c.dataTransfer.files){Ext.each(c.dataTransfer.files,function(e){var d;a=a||[];d=Ext.create("FBEditor.file.File",e);a.push(d)})}}return a}},0,0,0,0,0,0,[FBEditor.file.event,"Drop"],0));(Ext.cmd.derive("FBEditor.FB3.File",Ext.Base,{files:null,structure:null,zip:null,data:null,constructor:function(b){var a=this;a.zip=Ext.create("FBEditor.file.Zip");a.data=b},getStructure:function(){var c=this,b=c.zip,d=c.data.content,a=c.structure,e;if(!a){e=new Promise(function(g,f){b.unPackage(d).then(function(h){c.setFiles();a=Ext.create("FBEditor.FB3.Structure",c);c.structure=a.load();g(a)})["catch"](function(h){f(h)})})}else{e=Promise.resolve(a)}return e},updateStructure:function(d){var c=this,b=c.structure,a,e;e=new Promise(function(g,f){a=d.books;b.setThumb(d.thumb).then(function(h){return b.setMeta(d.meta)}).then(function(h){return b.getBooks()}).then(function(h){return c.setBooksContent(h,a)}).then(function(){g(b)})});return e},createStructure:function(){var b=this,c,a;a=Ext.create("FBEditor.FB3.Structure",b);b.structure=a.create();c=b.updateStructure(b.data);return c},getFiles:function(b){var c=this,a=null;if(c.files){b=b?b.replace(/^\//,""):b;a=b?c.files[b]:c.files;a=a||null;if(!a){Ext.log({level:"warn",msg:"В архиве отсутствует файл "+b+", на который ссылается один из существующих файлов",dump:c.files})}}return a},getName:function(){var b=this,c=b.data,d=FBEditor.file.Manager.defaultFb3FileName,a;a=c.file?c.file.name.replace(/(\.fb3(\.zip)?)$/,""):d;return a},setFiles:function(){var b=this,a=b.zip;b.files=a.getFiles()},generateBlob:function(){var b=this,a=b.zip;return a.generateBlob()},setBooksContent:function(f,b,e){var d=this,a=d.structure,c,h,g;e=e||0;g=new Promise(function(j,i){if(e<f.length){c=f[e];h=b[e];a.setDesc(c,h.desc);a.getBodies(c).then(function(k){return d.setBodiesContent(k,h.bodies)}).then(function(){return d.setBooksContent(f,b,e+1)}).then(function(){j()})}else{j()}});return g},setBodiesContent:function(d,b,e){var g=this,c=g.structure,a,f,h;e=e||0;h=new Promise(function(j,i){if(e<d.length){a=d[e];f=b[e];c.setContent(a,f.content);c.setImages(a,f.images).then(function(k){return g.setBodiesContent(d,b,e+1)}).then(function(){j()})}else{j()}});return h}},1,0,0,0,0,0,[FBEditor.FB3,"File"],0));(Ext.cmd.derive("FBEditor.FB3.InterfaceStructure",Ext.Base,{getContentTypes:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getContentTypes")},getThumb:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getThumb")},getMeta:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getMeta")},getBooks:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getBooks")},getDesc:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getDesc")},getBodies:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getBodies")},getContent:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getContent")},getImages:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getImages")},setThumb:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#setThumb")},setMeta:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#setMeta")},setDesc:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setDesc")},setContent:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setContent")},setImages:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setImages")}},0,0,0,0,0,0,[FBEditor.FB3,"InterfaceStructure"],0));(Ext.cmd.derive("FBEditor.FB3.rels.AbstractRels",Ext.Base,{defaultContent:"",prefix:"",rels:null,file:null,structure:null,fileName:null,relsName:null,parentDir:null,parentRelsDir:null,blob:null,getRels:function(){throw Error("Не реализован метод FB3.rels.AbstractRels#getRels")},constructor:function(a,f,b){var c=this,d,e;d=a.getFb3file();if(!d.getFiles(f)){c.create(a,f)}c.structure=a;c.fileName=decodeURI(f);c.parentRelsDir=b?b:null;c.relsName=c.getRelsName();c.file=c.structure.getFb3file().getFiles(f);c.prefix=FBEditor.util.xml.Json.prefix;c.getRels().then(function(g){c.rels=g;return c.getBlob()}).then(function(g){})},create:function(a,e){var c=this,d=a.getFb3file(),b;b=d.zip;b.file(e,c.defaultContent);d.setFiles()},getStructure:function(){var a=this;return a.structure},getFileName:function(){var a=this;return a.fileName},getBaseFileName:function(){var b=this,c=b.getFileName(),a;a=c.replace(/.*\/(.*?\.\w+)$/,"$1");return a},getExtension:function(){var b=this,c=b.getFileName(),a;a=c.replace(/.*\/.*?\.(\w+)$/,"$1");return a},getDate:function(){var b=this,a;a=b.file.date;return a},getRelsName:function(){var d=this,e=d.getFileName(),c,b,a=d.relsName;if(!a){e=e.split("/");b=e.pop();c=e.join("/");d.parentDir=/^\//.test(c)?c:"/"+c;a=c+"/_rels/"+b+".rels"}return a},getParentDir:function(){var a=this;return a.parentDir},getParentRelsDir:function(){var a=this;return a.parentRelsDir},getJson:function(){var a=this,b;b=new Promise(function(d,c){a.getText().then(function(g){var f=FBEditor.util.xml.Json,e;e=f.xmlToJson(g);d(e)})});return b},getText:function(){var b=this,a=b.file;return a.async("string")},getArrayBuffer:function(){var b=this,a=b.file;return a.async("arraybuffer")},getBlob:function(){var c=this,b=c.file,a=c.blob,d;if(!a){d=new Promise(function(f,e){b.async("blob").then(function(g){var h=c.parseMimeType();c.blob=new Blob([g],{type:h});f(c.blob)})})}else{d=Promise.resolve(a)}return d},getUrl:function(){var a=this,b;b=new Promise(function(d,c){a.getBlob().then(function(e){var f;f=window.URL.createObjectURL(e);d(f)})});return b},getSize:function(){var a=this,b;b=new Promise(function(d,c){a.getBlob().then(function(e){d(e.size)})});return b},getType:function(){var a=this,b;b=new Promise(function(d,c){a.getBlob().then(function(e){d(e.type)})});return b},setFileContent:function(d){var b=this,c=b.structure.fb3file,e=b.getFileName(),a;a=c.zip;e=encodeURI(e);a.file(e,d)},moveTo:function(d){var c=this,e=c.structure.fb3file,g=c.getFileName(),f,b,a;a=e.zip;b=d+"/"+c.getBaseFileName();f=new Promise(function(i,h){c.getArrayBuffer().then(function(j){a.file(b,j);a.remove(g);c.fileName=b;i(b)})});return f},parseMimeType:function(){var b=this,a="";a=/\.svg$/.test(b.fileName)?"image/svg+xml":a;a=/\.png$/.test(b.fileName)?"image/png":a;a=/\.(jpg|jpeg)$/.test(b.fileName)?"image/jpeg":a;a=/\.gif$/.test(b.fileName)?"image/gif":a;return a}},1,0,0,0,0,0,[FBEditor.FB3.rels,"AbstractRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.ContentTypes",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="png" ContentType="image/png"/><Default Extension="jpg" ContentType="image/jpeg"/><Default Extension="jpeg" ContentType="image/jpeg"/><Default Extension="gif" ContentType="image/gif"/><Default Extension="svg" ContentType="image/svg+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/meta/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/fb3/description.xml" ContentType="application/fb3-description+xml"/><Override PartName="/fb3/body.xml" ContentType="application/fb3-body+xml"/></Types>',getRels:function(){return Promise.resolve(null)},getContent:function(){var a=this,b;b=new Promise(function(d,c){a.getJson().then(function(e){d(e.Types)})});return b}},0,0,0,0,0,0,[FBEditor.FB3.rels,"ContentTypes"],0));(Ext.cmd.derive("FBEditor.resource.data.AbstractData",Ext.Base,{rootPath:"/fb3/img",getData:function(){throw Error("Нереализован метод FBEditor.resource.data.AbstractData#getData()")},getMimeType:function(a){return FBEditor.util.Format.getMimeType(a)},getBaseFileName:function(b){var a;a=b.replace(/.*\/(.*?\.\w+)$/,"$1");return a},getBlob:function(c,a){var b;c=Ext.isArray(c)?c:[c];b=new Blob(c,{type:a});return b}},0,0,0,0,0,0,[FBEditor.resource.data,"AbstractData"],0));(Ext.cmd.derive("FBEditor.resource.data.ZipData",FBEditor.resource.data.AbstractData,{getData:function(){var b=this,c,a,d;a=b.getFileName().substring(b.rootPath.length+1);c={fileId:b.getId(),name:a,baseName:b.getBaseFileName(),rootName:b.getFileName(),modifiedDate:b.getDate(),isCover:b.getIsCover()};d=new Promise(function(f,e){b.getArrayBuffer().then(function(g){c.content=g;return b.getBlob()}).then(function(g){c.blob=g;c.sizeBytes=g.size;c.type=g.type;return b.getUrl()}).then(function(g){c.url=g;f(c)})});return d}},0,0,0,0,0,0,[FBEditor.resource.data,"ZipData"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Image",FBEditor.FB3.rels.AbstractRels,{isCover:false,id:null,getData:function(){var a=this;return a.mixins.resData.getData.call(a)},getRels:function(){return Promise.resolve(null)},getIsCover:function(){return this.isCover},getId:function(){return this.id},setId:function(a){this.id=a}},0,0,0,0,0,[["resData",FBEditor.resource.data.ZipData]],[FBEditor.FB3.rels,"Image"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Thumb",FBEditor.FB3.rels.Image,{isCover:true,getRels:function(){return Promise.resolve(null)}},0,0,0,0,0,0,[FBEditor.FB3.rels,"Thumb"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Meta",FBEditor.FB3.rels.AbstractRels,{getRels:function(){return Promise.resolve(null)},getContent:function(){var a=this,b;b=new Promise(function(d,c){a.getJson().then(function(e){d(e.coreProperties)})});return b},setContent:function(b){var a=this;a.setFileContent(b)}},0,0,0,0,0,0,[FBEditor.FB3.rels,"Meta"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Book",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8"?><fb3-description xmlns="http://www.fictionbook.org/FictionBook3/description" id="29f8c76a-141c-102c-a3bc-9f4786c95f7d" version="1.0"></fb3-description>',desc:null,constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments);a.getDesc().then(function(b){a.desc=b})},getRels:function(){var d=this,c=d.rels,a=d.getRelsName(),b=d.getParentDir(),e;if(!c){e=new Promise(function(h,g){var f=Ext.create("FBEditor.FB3.rels.BookRels",d.getStructure(),a,b);h(f)})}else{e=Promise.resolve(c)}return e},getDesc:function(){var a=this,c=a.desc,b;b=!c?a.getText():Promise.resolve(c);return b},setDesc:function(b){var a=this;a.setFileContent(b)}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Book"],0));(Ext.cmd.derive("FBEditor.FB3.rels.BookRels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://www.fictionbook.org/FictionBook3/relationships/body" Target="body.xml"/></Relationships>',bodies:null,getRels:function(){var b=this,a=b.rels,c;if(!a){c=new Promise(function(e,d){b.getJson().then(function(f){a=f.Relationships.Relationship;a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,b.prefix+"Type",2);e(a)})})}else{c=Promise.resolve(a)}return c},getBodies:function(){var c=this,a=c.bodies,b=c.getParentRelsDir(),d;if(!a){d=new Promise(function(f,e){c.getRels().then(function(g){a=g[FBEditor.FB3.rels.RelType.body];a=Ext.isArray(a)?a:[a];Ext.each(a,function(k,h,l){var j=k[c.prefix+"Target"],m;m=j.substring(0,1)!=="/"?b+"/"+j:j.substring(1);l[h]=Ext.create("FBEditor.FB3.rels.Body",c.getStructure(),m)});f(a)})})}else{d=Promise.resolve(a)}return d}},0,0,0,0,0,0,[FBEditor.FB3.rels,"BookRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Body",FBEditor.FB3.rels.AbstractRels,{constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments)},getRels:function(){var d=this,c=d.rels,a=d.getRelsName(),b=d.getParentDir(),e;if(!c){e=new Promise(function(g,f){c=Ext.create("FBEditor.FB3.rels.BodyRels",d.getStructure(),a,b);g(c)})}else{e=Promise.resolve(c)}return e},getContent:function(){var a=this;return a.getText()},setContent:function(b){var a=this;a.setFileContent(b)},setImages:function(e){var c=this,a=c.getStructure(),f,d,b;d=a.getFb3file();b=d.zip;b.remove("fb3/img");b.remove("/fb3/img");Ext.each(e,function(g){var h=g.rootName;h=h.replace(/^\//,"");h=encodeURI(h);b.file(h,g.content,{createFolders:true})});f=new Promise(function(h,g){c.getRels().then(function(i){i.setContent(e);h(i)})});return f}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Body"],0));(Ext.cmd.derive("FBEditor.FB3.rels.BodyRels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"></Relationships>',images:null,getRels:function(){var b=this,a=b.rels,c;if(!a){c=new Promise(function(e,d){b.getJson().then(function(f){a=f.Relationships.Relationship||null;if(a){a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,b.prefix+"Type",2)}b.rels=a;e(a)})})}else{c=Promise.resolve(a)}return c},getImages:function(){var c=this,a=c.images,b=c.getParentRelsDir(),d;if(!a){d=new Promise(function(f,e){c.getRels().then(function(g){if(g){a=g[FBEditor.FB3.rels.RelType.image];a=Ext.isArray(a)?a:[a];Ext.each(a,function(k,h,l){var n=k[c.prefix+"Id"],j=k[c.prefix+"Target"],m;m=j.substring(0,1)!=="/"?b+"/"+j:j;l[h]=Ext.create("FBEditor.FB3.rels.Image",c.getStructure(),m);l[h].setId(decodeURI(n))});c.images=a;f(a)}else{f(null)}})})}else{if(a){d=Promise.resolve(a)}}return d},setContent:function(c){var b=this,a='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';Ext.each(c,function(e){var d='<Relationship Id="{%id}" Type="http://www.fictionbook.org/FictionBook3/relationships/image" Target="{%target}"/>';e.fileId=encodeURI(e.fileId);e.rootName=encodeURI(e.rootName);d=d.replace(/{%id}/ig,e.fileId);d=d.replace(/{%target}/ig,e.rootName);a+=d});a+="</Relationships>";b.setFileContent(a)}},0,0,0,0,0,0,[FBEditor.FB3.rels,"BodyRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Rels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="meta/core.xml"/><Relationship Id="rId2" Type="http://www.fictionbook.org/FictionBook3/relationships/Book" Target="fb3/description.xml"/></Relationships>',thumb:null,meta:null,books:null,constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments);a.getBooks().then(function(b){a.books=b})},create:function(a,e){var c=this,d=a.getFb3file(),b;b=d.zip;b.file("meta/core.xml");b.file("fb3/body.xml");FBEditor.FB3.rels.AbstractRels.prototype.create.apply(this,arguments)},getRels:function(){var b=this,a=b.rels,c;if(!a){c=new Promise(function(e,d){b.getJson().then(function(f){a=f.Relationships.Relationship;a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,b.prefix+"Type",2);e(a)})})}else{c=Promise.resolve(a)}return c},getBooks:function(a){var b=this,c=b.books,d;if(!c){d=new Promise(function(f,e){b.getRels().then(function(g){c=g[FBEditor.FB3.rels.RelType.book];c=Ext.isArray(c)?c:[c];Ext.each(c,function(l,j,h){var k=l[b.prefix+"Target"];k=k.replace(/^[/]/,"");h[j]=Ext.create("FBEditor.FB3.rels.Book",b.getStructure(),k)});c=Ext.isNumeric(a)?c[a]:c;f(c)})})}else{c=Ext.isNumeric(a)?c[a]:c;d=Promise.resolve(c)}return d},getThumb:function(){var b=this,a=b.thumb,c;if(!a){c=new Promise(function(e,d){b.getRels().then(function(f){a=f[FBEditor.FB3.rels.RelType.thumbnail];a=a?Ext.create("FBEditor.FB3.rels.Thumb",b.getStructure(),a[b.prefix+"Target"]):null;e(a)})})}else{c=Promise.resolve(a)}return c},getMeta:function(){var a=this,b=a.meta,c;if(!b){c=new Promise(function(e,d){a.getRels().then(function(f){b=f[FBEditor.FB3.rels.RelType.coreProperties];b=b?Ext.create("FBEditor.FB3.rels.Meta",a.getStructure(),b[a.prefix+"Target"]):null;e(b)})})}else{c=Promise.resolve(b)}return c},setThumb:function(c){var a=this,e,b,d;if(!c){return Promise.resolve()}d=c.rootName;e=new Promise(function(g,f){a.getText().then(function(h){if(/thumbnail" Target="(.*?)"/.test(h)){h=h.replace(/thumbnail" Target="(.*?)"/,'thumbnail" Target="'+d+'"')}else{b='<Relationship Id="rId0" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail" Target="'+d+'"/>';h=h.replace(/<Relationship Id="rId1"/ig,b+'<Relationship Id="rId1"')}a.setFileContent(h);console.log("save thumb",c,h);g(h)})});return e}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Rels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.RelType",Ext.Base,{singleton:true,book:"http://www.fictionbook.org/FictionBook3/relationships/Book",body:"http://www.fictionbook.org/FictionBook3/relationships/body",image:"http://www.fictionbook.org/FictionBook3/relationships/image",coreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",thumbnail:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail",digitalSignature:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/signature",digitalSignatureCertificate:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/certificate",digitalSignatureOrigin:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/origin"},0,0,0,0,0,0,[FBEditor.FB3.rels,"RelType"],0));(Ext.cmd.derive("FBEditor.util.xml.Json",Ext.Base,{singleton:true,prefix:"_",x2js:null,xmlToJson:function(c){var a=this,b=a.x2js||a.createX2Js();return b.xml_str2json(c)},jsonToXml:function(a){var b=this,c=b.x2js||b.createX2Js();return c.json2xml_str(a)},createX2Js:function(){var a=this,b=a.prefix?a.prefix:" ",c;c=new X2JS({attributePrefix:b,escapeMode:false});a.x2js=c;return c}},0,0,0,0,0,0,[FBEditor.util.xml,"Json"],0));(Ext.cmd.derive("FBEditor.FB3.Structure",FBEditor.FB3.InterfaceStructure,{contentTypes:{file:"[Content_Types].xml",rel:null},rels:{file:"_rels/.rels",rel:null},fb3file:null,constructor:function(b){var a=this;a.fb3file=b},create:function(){var c=this,b=c.rels,a=c.contentTypes;a.rel=Ext.create("FBEditor.FB3.rels.ContentTypes",c,a.file);b.rel=Ext.create("FBEditor.FB3.rels.Rels",c,b.file);return c},load:function(){var a=this;if(a.valid()){a.create()}else{throw Error("Ошибка структуры архива")}return a},getContentTypes:function(){var b=this,a=b.contentTypes.rel;return a.getContent()},getThumb:function(){var a=this;return a.getRels().getThumb()},getMeta:function(){var a=this,b;b=a.getRels().getMeta().then(function(c){return c.getContent()});return b},getBooks:function(){var a=this;return a.getRels().getBooks()},getDesc:function(a){return a.getDesc()},getBodies:function(a){var b;b=a.getRels().then(function(c){return c.getBodies()});return b},getContent:function(a){return a.getContent()},getImages:function(a){var b=this,c;c=a.getRels().then(function(d){return d.getImages()});return c},setThumb:function(b){var a=this,c;c=new Promise(function(e,d){a.getRels().setThumb(b).then(function(f){e(f)})});return c},setMeta:function(b){var a=this,c;c=new Promise(function(e,d){a.getRels().getMeta().then(function(f){f.setContent(b);e(f)})});return c},setDesc:function(a,b){a.setDesc(b)},setContent:function(a,b){a.setContent(b)},setImages:function(a,b){return a.setImages(b)},getFb3file:function(){var a=this;return a.fb3file},getRels:function(){var a=this;return a.rels.rel},valid:function(){var d=this,c=d.getFb3file().getFiles(),b=[d.contentTypes.file,d.rels.file],e=Ext.Object.getKeys(c),a=true;Ext.Object.each(b,function(f,g){if(!Ext.Array.contains(e,g)){a=false;return false}});return a}},1,0,0,0,0,0,[FBEditor.FB3,"Structure"],0));(Ext.cmd.derive("FBEditor.converter.AbstractConverter",Ext.Base,{normalize:function(c){var a=this,b=FBEditor.util.xml.Json.prefix,e;delete c[b+"id"];delete c[b+"version"];delete c[b+"xmlns"];e=a._normalize(c);return e},_normalize:function(e){var b=this,c=FBEditor.util.xml.Json.prefix,f={},a;a=new RegExp("^("+c+")+");Ext.Object.each(e,function(g,h){var d;d=g.replace(a,"");if(Ext.isObject(h)||Ext.isArray(h)){f[d]=b._normalize(h)}else{if(d!=="toString"){f[d]=h}}});return f}},0,0,0,0,0,0,[FBEditor.converter,"AbstractConverter"],0));(Ext.cmd.derive("FBEditor.converter.contentTypes.Data",FBEditor.converter.AbstractConverter,{singleton:true,toNormalize:function(b){var a=this,c;c=a.normalize(b);return c}},0,0,0,0,0,0,[FBEditor.converter.contentTypes,"Data"],0));(Ext.cmd.derive("FBEditor.file.Manager",Ext.Base,{singleton:true,fb3file:null,defaultFb3FileName:"Новая книга",openFB3:function(b){var c=this,a=false;if(b){a=b.read({type:b.LOAD_TYPE_ARRAYBUFFER,load:function(d){var e;c.fb3file=Ext.create("FBEditor.FB3.File",{file:b.file,content:d});e=c.fb3file.getName();c.fb3file.getStructure().then(function(j){var m=FBEditor.resource.Manager,i=FBEditor.desc.Manager,p=FBEditor.route.Manager,k,q,f,n,o,l,h,g;q=Ext.getCmp("panel-main-content");k=Ext.getCmp("panel-treenavigation");k.fireEvent("clearSelection");p.removeParams(["art","body_art"]);q.fireEvent("contentDesc");f=Ext.getCmp("panel-filename");f.fireEvent("setName",e);Ext.suspendLayouts();j.getBooks().then(function(r){n=r;return j.getDesc(r[0])}).then(function(r){o=r;i.reset();i.loadDataToForm(r);return j.getBodies(n[0])}).then(function(r){l=r;return j.getImages(l[0])}).then(function(r){h=r;return j.getThumb()}).then(function(r){var s;g=r;if(r&&!m.checkThumbInResources(r)){s=r.moveTo(m.getDefaultThumbPath());h.push(r)}else{s=Promise.resolve()}return s}).then(function(){m.reset();return m.load(h)}).then(function(){if(g){m.setCover(g.getFileName())}return j.getContent(l[0])}).then(function(s){var r,t;t=FBEditor.getEditorManager();t.reset();q.openBody();t.createContent(s);r=Ext.getCmp("panel-body-navigation");r.selectRoot();Ext.resumeLayouts(true)})["catch"](function(r){throw r})})["catch"](function(f){Ext.log({level:"error",msg:f,dump:f});Ext.Msg.show({title:"Ошибка",message:"Невозможно открыть книгу. Проверьте корректность загружаемого файла.",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR});Ext.resumeLayouts(true)})}})}return a},openResource:function(a){var c=this,b=c.getFileFromEvent(a),d=false;if(b){d=new Promise(function(f,e){b.read({type:b.LOAD_TYPE_ARRAYBUFFER,load:function(g){f({file:b.file,content:g})}})})}return d},getFileFromEvent:function(a){var b;b=a.target.files.length?Ext.create("FBEditor.file.File",a.target.files[0]):null;return b},saveFB3:function(e,b){var c=this,d=c.fb3file,f,g,a;if(d){f=d.updateStructure(e)}else{d=Ext.create("FBEditor.FB3.File",e);f=d.createStructure()}f.then(function(h){c.fb3file=d;d.generateBlob().then(function(i){g=Ext.getCmp("panel-filename-display").getValue()+".fb3";a=window.saveAs(i,g);a.onwriteend=b;a.onabort=b})})},saveResource:function(d,c){var b,a;b=d.blob||new Blob([d.content],{type:d.type});a=window.saveAs(b,d.baseName);if(c){a.onwriteend=c;a.onabort=c}return a?true:false}},0,0,0,0,0,0,[FBEditor.file,"Manager"],0));(Ext.cmd.derive("FBEditor.hotkeys.Model",Ext.data.Model,{fields:[{name:"slot",type:"int"},{name:"key",type:"string",defaultValue:""},{name:"ctrl",type:"boolean",defaultValue:false},{name:"alt",type:"boolean",defaultValue:false},{name:"shift",type:"boolean",defaultValue:false}]},0,0,0,0,0,0,[FBEditor.hotkeys,"Model"],0));(Ext.cmd.derive("FBEditor.hotkeys.Store",Ext.data.Store,{model:"FBEditor.hotkeys.Model",proxy:{type:"localstorage",id:"FBEditor-hotkeys"},autoSync:true,autoLoad:true,pageSize:0},0,0,0,0,0,0,[FBEditor.hotkeys,"Store"],0));(Ext.cmd.derive("FBEditor.hotkeys.Manager",Ext.Base,{singleton:true,store:null,defaultData:[{slot:1},{slot:2},{slot:3},{slot:4,key:"S",ctrl:true,shift:true},{slot:5,key:"H",ctrl:true},{slot:6,key:"E",ctrl:true},{slot:7},{slot:8},{slot:9,key:"D",ctrl:true},{slot:10,key:"H",ctrl:true,alt:true},{slot:11,key:"Q",ctrl:true},{slot:12,key:"M",ctrl:true},{slot:13,key:"T",ctrl:true,alt:true},{slot:14,key:"8",ctrl:true,shift:true},{slot:15,key:"7",ctrl:true,shift:true},{slot:16,key:"P",ctrl:true},{slot:17,key:"L",ctrl:true},{slot:18,key:"N",ctrl:true,alt:true},{slot:19,key:"B",ctrl:true},{slot:20,key:"I",ctrl:true},{slot:21,key:"U",ctrl:true},{slot:22,key:"5",alt:true,shift:true},{slot:23,key:"I",ctrl:true,shift:true},{slot:24,key:",",ctrl:true},{slot:25,key:".",ctrl:true},{slot:26,key:"C",ctrl:true,alt:true},{slot:27,key:"S",ctrl:true,alt:true},{slot:28,key:"D",ctrl:true,alt:true},{slot:29},{slot:30},{slot:31,key:"ENTER",shift:true},{slot:32,key:"F",ctrl:true},{slot:33,key:"R",ctrl:true}],constructor:function(a){this.mixins.observable.constructor.call(this,a)},init:function(){var b=this,a;a=Ext.create("FBEditor.hotkeys.Store");b.store=a;Ext.each(b.defaultData,function(c){var d;d=b.getSlot(c.slot);if(!d){a.add(c)}})},getStore:function(){return this.store},getSlot:function(a){var c=this,b=c.getStore(),d;d=b.findRecord("slot",a);return d},getFormatKeysText:function(c,b){var d,a;a=b||"+";d=c.shift?"SHIFT"+a:"";d+=c.ctrl?"CTRL"+a:"";d+=c.alt?"ALT"+a:"";d+=c.key?c.key:"";return d},getNumberSlot:function(e){var d=this,b=d.getStore(),a=null,c;c=b.findBy(function(g,h){var f=g.getData();a=f.slot;f={ctrl:f.ctrl,alt:f.alt,shift:f.shift,key:f.key.toUpperCase()};if(Ext.Object.equals(e,f)){return true}});a=c!==-1?a:null;return a},resetSlot:function(b){var c=this,a=c.defaultData;Ext.each(a,function(d){if(d.slot===b){c.updateSlotData(d);return true}})},updateSlotData:function(d){var c=this,b=c.getStore(),a;a=b.getById(d.slot);if(a){a.set(d)}else{b.add(d);a=b.getById(d.slot);a.set(d)}c.fireEvent("changed",d)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[FBEditor.hotkeys,"Manager"],0));(Ext.cmd.derive("FBEditor.view.window.resource.Resource",Ext.Window,{id:"window-resource",title:"Выбор ресурса",width:"80%",height:400,modal:true,closeAction:"hide",layout:"border",initComponent:function(){var a=this;a.items=[{xtype:"panel",id:"window-panel-resources-navigation",region:"west",split:{size:2},width:200,minWidth:200,bodyPadding:5,overflowY:"auto"},{xtype:"panel",id:"window-panel-resources",region:"center",bodyPadding:5,overflowY:"auto",cls:"window-panel-resources"}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},beforeShow:function(){var f=this,a=f.getWindowPanelResourcesNavigation(),b=f.getWindowPanelResources(),e=f.getPanelResourcesNavigation(),c=f.getPanelResourcesControl(),d=f.getViewResources();e.inWindow=true;a.add(e);b.add(c,d);Ext.window.Window.prototype.beforeShow.apply(this,arguments)},onHide:function(){var e=this,a=e.getPanelTreenavigation(),d=e.getPanelResourcesNavigation(),f=e.getPanelResources(),b=e.getPanelResourcesControl(),c=e.getViewResources();d.inWindow=false;a.insert(1,d);f.add(b,c);Ext.window.Window.prototype.onHide.apply(this,arguments)},getWindowPanelResourcesNavigation:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("window-panel-resources-navigation")},getWindowPanelResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("window-panel-resources")},getPanelTreenavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-treenavigation")},getPanelResourcesNavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-resources-navigation")},getPanelResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("panel-resources")},getPanelResourcesControl:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("panel-resources-control")},getViewResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("view-resources")}},0,["window-resource"],["component","box","container","panel","window","window-resource"],{component:true,box:true,container:true,panel:true,window:true,"window-resource":true},["widget.window-resource"],0,[FBEditor.view.window.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.resource.ExplorerManager",Ext.Base,{singleton:true,win:null,getWindow:function(){var a=this,b=a.win;if(!b){b=Ext.create("FBEditor.view.window.resource.Resource");a.win=b}return b}},0,0,0,0,0,0,[FBEditor.resource,"ExplorerManager"],0));(Ext.cmd.derive("FBEditor.resource.Resource",Ext.Base,{fileId:null,content:null,blob:null,url:"",name:"",baseName:"",rootName:"",modifiedDate:null,sizeBytes:null,size:"",type:"",date:"",extension:"",width:null,height:null,isFolder:false,isCover:false,totalElements:0,formatDate:"d.m.Y H:i",elements:null,pasteEl:null,constructor:function(b){var a=this;a.elements=[];a.setData(b)},getElements:function(){return Ext.clone(this.elements)},getPasteElement:function(){return this.pasteEl},setElements:function(a){this.elements=a},updateData:function(b){var a=this;a.setData(b);a.updateElements()},setData:function(c){var b=this,a=new Image();b.fileId=c.fileId||c.name;b.content=c.content;b.blob=c.blob;b.url=c.url;b.name=c.name;b.baseName=c.baseName;b.rootName=c.rootName;b.modifiedDate=c.modifiedDate;b.sizeBytes=c.sizeBytes;b.type=c.type;b.isCover=c.isCover;b.size=b.getSizeFormat();b.date=b.getDateFormat();b.extension=b.getExtension();a.src=b.url;a.onload=function(){b.width=a.width;b.height=a.height};if(b.blob){b.getBase64().then(function(d){b.base64=d})}},load:function(){return Promise.resolve(this)},addElement:function(b){var c=this,a=false;Ext.each(c.elements,function(d){if(d.equal(b)){a=true;return false}});if(!a){c.elements.push(b);c.totalElements=c.elements.length}},setPasteElement:function(a){var b=this;b.pasteEl=a},removeElement:function(a){var b=this,c=b.elements;Ext.Array.each(c,function(e,d){if(Ext.Object.equals(a,e)){c.splice(d,1)}});b.totalElements=c.length;b.elements=c},updateElement:function(c){var d=this,f,a,b,e;e=c.attributes;e.src=d.fileId;b=c.getManager();c.update(e);if(b){a=b.getFocusElement();if(c.equal(a)){f=b.getPanelProps();if(f){f.fireEvent("loadData",c)}}}},updateElements:function(){var a=this,b=a.elements;Ext.each(b,function(c){a.updateElement(c)})},clearElements:function(){var b=this,c=b.elements,a;while(c.length){a=c[0];if(a){a.deleteLinkResource()}c.splice(0,1)}b.totalElements=0},rename:function(a){var b=this;b.rootName=b.rootName.replace(b.name,a);b.name=a},getSizeFormat:function(){var b=this,a;a=b.sizeBytes?FBEditor.util.Format.fileSize(b.sizeBytes):null;return a},getDateFormat:function(){var b=this,a;a=b.modifiedDate?Ext.Date.format(b.modifiedDate,b.formatDate):null;return a},getExtension:function(){var b=this,c=b.baseName,a;a=FBEditor.util.Format.getExtensionFile(c);return a},getBase64:function(){var a=this,b;b=new Promise(function(e,d){var f,c;c=new FileReader();c.readAsDataURL(a.blob);c.onloadend=function(){f=c.result;e(f)}});return b}},1,0,0,0,0,0,[FBEditor.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.resource.ExternalResource",FBEditor.resource.Resource,{load:function(){var a=this,b;b=new Promise(function(d,c){if(a.blob){d()}Ext.Ajax.request({url:a.url,binary:true,scope:a,success:function(f){var e=200;if(f.status===e){a.updateData(f);d()}else{c(f)}},failure:function(e){c(e)}})});return b},updateData:function(c){var f=this,b=new Image(),a=c.responseBytes,e=f.type,d;if(!e){e=c.getResponseHeader("content-type");f.type=e;d=FBEditor.util.Format.getExtensionMime(e);if(d){d="."+d;f.name+=d;f.baseName+=d;f.rootName+=d}}f.content=a;f.blob=new Blob([a],{type:e});f.url=window.URL.createObjectURL(f.blob);f.sizeBytes=f.blob.size;b.src=f.url;b.onload=function(){f.width=b.width;f.height=b.height}}},0,0,0,0,0,0,[FBEditor.resource,"ExternalResource"],0));(Ext.cmd.derive("FBEditor.resource.FolderResource",FBEditor.resource.Resource,{total:0,constructor:function(b){var a=this;a.name=b.name;a.baseName=b.baseName;a.modifiedDate=b.modifiedDate;a.total=b.total;a.date=a.getDateFormat();a.extension="folder";a.isFolder=true;a.type="папка с файлами"}},1,0,0,0,0,0,[FBEditor.resource,"FolderResource"],0));(Ext.cmd.derive("FBEditor.resource.Paste",Ext.Base,{manager:null,resources:[],history:[],constructor:function(a){var b=this;b.manager=a},add:function(a){var b=this;b.resources.push(a)},reset:function(){var a=this;a.history=[]},save:function(){var c=this,d=Ext.clone(c.resources),a=c.manager,b=[];if(d.length){Ext.each(d,function(g){var f,e;f=a.getResource(g.fileId);if(!f){b.push(g)}else{e=f.getPasteElement();f.updateElement(e)}});if(b.length){a.load(b);c.afterSave()}}},remove:function(){var b=this,d=b.history,a=b.manager,c;if(d.length){c=d.pop();Ext.Array.each(c,function(e){a.deleteResource(e)});b.afterRemove()}},afterSave:function(){var a=this,b=a.resources;a.history.push(b);a.resources=[]},afterRemove:function(){}},1,0,0,0,0,0,[FBEditor.resource,"Paste"],0));(Ext.cmd.derive("FBEditor.view.window.resource.Tree",Ext.Window,{id:"window-resource-tree",title:"Перемещение ресурса",height:"60%",modal:true,closeAction:"hide",layout:"vbox",translateText:{moveTo:"Переместить",cancel:"Отмена"},nameResource:"",destinationFolder:"",initComponent:function(){var a=this;a.items=[{xtype:"box",id:"window-panel-resources-tree-name",cls:"window-panel-resources-tree-name",tpl:'Переместить ресурс <span>{name}</span><tpl if="folder"> в <span>{folder}</span></tpl>'},{xtype:"panel",id:"window-panel-resources-tree-navigation",flex:1,width:400,minWidth:400,bodyPadding:5,overflowY:"auto",buttonAlign:"left",buttons:[{text:a.translateText.moveTo,scope:a,handler:function(){var f=FBEditor.getBridgeWindow(),c,b;if(!a.destinationFolder){return false}try{c=f.FBEditor.resource.Manager;b=c.moveResource(a.nameResource,a.destinationFolder);if(b){c.setSelectFunction(null);a.close()}}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно переместить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}},{text:a.translateText.cancel,scope:a,handler:function(){this.close()}}]}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},beforeShow:function(){var c=this,a=c.getWindowPanelResourcesTreeNavigation(),b=c.getPanelResourcesNavigation();a.add(b);Ext.window.Window.prototype.beforeShow.apply(this,arguments)},onHide:function(){var c=this,a=c.getPanelTreenavigation(),b=c.getPanelResourcesNavigation();a.insert(1,b);Ext.window.Window.prototype.onHide.apply(this,arguments)},getWindowPanelResourcesTreeNavigation:function(){return Ext.getCmp("window-panel-resources-tree-navigation")},getWindowPanelResourcesTreeName:function(){return Ext.getCmp("window-panel-resources-tree-name")},getPanelTreenavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-treenavigation")},getPanelResourcesNavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-resources-navigation")},setNameResource:function(b){var c=this,a=c.getWindowPanelResourcesTreeName();c.nameResource=b;a.setData({name:b,folder:c.destinationFolder})},setFolder:function(b){var c=this,a=c.getWindowPanelResourcesTreeName();c.destinationFolder=b?b:"/";a.setData({name:c.nameResource,folder:c.destinationFolder})}},0,["window-resource-tree"],["component","box","container","panel","window","window-resource-tree"],{component:true,box:true,container:true,panel:true,window:true,"window-resource-tree":true},["widget.window-resource-tree"],0,[FBEditor.view.window.resource,"Tree"],0));(Ext.cmd.derive("FBEditor.resource.TreeManager",Ext.Base,{singleton:true,win:null,getWindow:function(){var a=this,b=a.win;if(!b){b=Ext.create("FBEditor.view.window.resource.Tree");a.win=b}return b}},0,0,0,0,0,0,[FBEditor.resource,"TreeManager"],0));(Ext.cmd.derive("FBEditor.resource.data.ExternalData",FBEditor.resource.data.AbstractData,{resData:null,data:null,constructor:function(b){var a=this;a.data=b},getData:function(){var f=this,b=f.data.url,c=f.resData,e,d,a;if(c){return c}e=FBEditor.util.Format.getExtensionFile(b);a="paste"+new Date().getTime()+(e?".":"")+e;d=f.getMimeType(a);c={url:b,name:a,baseName:a,rootName:f.rootPath+"/"+a,modifiedDate:new Date(),type:d};f.resData=c;return c}},1,0,0,0,0,0,[FBEditor.resource.data,"ExternalData"],0));(Ext.cmd.derive("FBEditor.resource.data.FileData",FBEditor.resource.data.AbstractData,{fileData:null,constructor:function(a){var b=this;b.fileData=a},getData:function(){var h=this,d=h.fileData.file,g=h.fileData.content,e=FBEditor.resource.Manager,i,b,c,a,f;i=e.getActiveFolder();b=i+(i?"/":"")+d.name;a=h.getBlob(g,d.type);d.size=d.size||a.size;c=window.URL.createObjectURL(a);f={blob:a,content:g,url:c,name:b,baseName:d.name,rootName:h.rootPath+"/"+b,modifiedDate:d.lastModifiedDate,sizeBytes:d.size,type:d.type};return f}},1,0,0,0,0,0,[FBEditor.resource.data,"FileData"],0));(Ext.cmd.derive("FBEditor.resource.data.PasteData",FBEditor.resource.data.AbstractData,{resData:null,data:null,constructor:function(b){var a=this;a.data=b},getData:function(){var g=this,a=g.data.blob,d=g.resData,f,e,c,b;if(d){return d}e=a.type;f=e?"."+g.getExtension(e):"";c="paste"+new Date().getTime()+f;b=window.URL.createObjectURL(a);d={blob:a,url:b,name:c,baseName:c,rootName:g.rootPath+"/"+c,modifiedDate:new Date(),sizeBytes:a.size,type:e};g.resData=d;return d},getExtension:function(b){var a;a=b.replace(/.*?(png|jpg|jpeg|gif|svg).*?/i,"$1");return a}},1,0,0,0,0,0,[FBEditor.resource.data,"PasteData"],0));(Ext.cmd.derive("FBEditor.resource.data.UrlData",FBEditor.resource.data.AbstractData,{rootPathUrl:["/fb3/img/","img/"],constructor:function(a){var b=this;b.fileData=a},getData:function(){var i=this,f=i.fileData.fileName,e=i.fileData.fileId,h=i.fileData.content,j=i.fileData.isCover,k=i.rootPathUrl,d,l,b,c,a,g;f=decodeURI(f);e=decodeURI(e);d=f;Ext.Array.each(k,function(n){var m;m=new RegExp("^"+n,"i");if(m.test(f)){d=f.replace(m,"");return false}});l=i.getMimeType(f);a=i.getBlob(h,l);c=window.URL.createObjectURL(a);b=i.getBaseFileName(f);g={blob:a,content:h,url:c,fileId:e,name:d,baseName:b,rootName:i.rootPath+"/"+d,sizeBytes:a.size,type:l,isCover:j};return g}},1,0,0,0,0,0,[FBEditor.resource.data,"UrlData"],0));(Ext.cmd.derive("FBEditor.resource.replacer.button.AbstractButton",Ext.Button,{listeners:{click:{el:"body",fn:"onClick"}},win:null,initComponent:function(){var b=this,a=b.translateText;b.text=a.text;Ext.button.Button.prototype.initComponent.apply(this,arguments)},getWindow:function(){return this.win}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.resource.replacer.button,"AbstractButton"],0));(Ext.cmd.derive("FBEditor.resource.replacer.button.cancel.CancelController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView(),c;c=a.getWindow();c.close()}},0,0,0,0,["controller.resource.replacer.button.cancel"],0,[FBEditor.resource.replacer.button.cancel,"CancelController"],0));(Ext.cmd.derive("FBEditor.resource.replacer.button.cancel.Cancel",FBEditor.resource.replacer.button.AbstractButton,{controller:"resource.replacer.button.cancel",translateText:{text:"Отменить операцию"}},0,["resource-replacer-button-cancel"],["component","box","button","resource-replacer-button-cancel"],{component:true,box:true,button:true,"resource-replacer-button-cancel":true},["widget.resource-replacer-button-cancel"],0,[FBEditor.resource.replacer.button.cancel,"Cancel"],0));(Ext.cmd.derive("FBEditor.resource.replacer.button.rename.RenameController",Ext.app.ViewController,{onClick:function(){var e=this,a=e.getView(),g,d,c,b,f;f=a.getWindow();f.close();c=f.getResourceData();b=f.getResourceManager();d=b.getNewResourceName(c.name);g=Ext.clone(c);g.rootName=c.rootName.replace(c.name,d);g.name=g.baseName=d;b.createResource(g)}},0,0,0,0,["controller.resource.replacer.button.rename"],0,[FBEditor.resource.replacer.button.rename,"RenameController"],0));(Ext.cmd.derive("FBEditor.resource.replacer.button.rename.Rename",FBEditor.resource.replacer.button.AbstractButton,{controller:"resource.replacer.button.rename",translateText:{text:"Добавить новый ресурс как "},afterRender:function(){var d=this,c=d.translateText,e=d.getWindow(),a,b;FBEditor.resource.replacer.button.AbstractButton.prototype.afterRender.apply(this,arguments);b=e.getResourceData();a=b.name;d.changeText(a)},changeText:function(a){var e=this,d=e.translateText,f=e.getWindow(),c,b;c=f.getResourceManager();b=c.getNewResourceName(a);e.setText(d.text+b)}},0,["resource-replacer-button-rename"],["component","box","button","resource-replacer-button-rename"],{component:true,box:true,button:true,"resource-replacer-button-rename":true},["widget.resource-replacer-button-rename"],0,[FBEditor.resource.replacer.button.rename,"Rename"],0));(Ext.cmd.derive("FBEditor.resource.replacer.button.replace.ReplaceController",Ext.app.ViewController,{onClick:function(){var d=this,a=d.getView(),c,b,e;e=a.getWindow();e.close();c=e.getResourceData();b=e.getResourceManager();b.replaceResource(c)}},0,0,0,0,["controller.resource.replacer.button.replace"],0,[FBEditor.resource.replacer.button.replace,"ReplaceController"],0));(Ext.cmd.derive("FBEditor.resource.replacer.button.replace.Replace",FBEditor.resource.replacer.button.AbstractButton,{controller:"resource.replacer.button.replace",translateText:{text:"Заменить имеющийся ресурс новым"}},0,["resource-replacer-button-replace"],["component","box","button","resource-replacer-button-replace"],{component:true,box:true,button:true,"resource-replacer-button-replace":true},["widget.resource-replacer-button-replace"],0,[FBEditor.resource.replacer.button.replace,"Replace"],0));(Ext.cmd.derive("FBEditor.resource.replacer.Window",Ext.Panel,{floating:true,modal:true,bodyPadding:10,closeAction:"hide",closable:true,defaultFocus:"resource-replacer-button-replace",defaults:{width:"100%",margin:"5 0 0 0"},translateText:{choose:"Выберите действие",title:"Ресурс с именем {name} уже существует"},resData:null,renameButton:null,replaceButton:null,constructor:function(a){var b=this;b.resData=a;Ext.panel.Panel.prototype.constructor.apply(this,arguments)},initComponent:function(){var b=this,a=b.translateText;b.items=[{xtype:"component",html:a.choose},{xtype:"resource-replacer-button-replace",win:b},{xtype:"resource-replacer-button-rename",win:b},{xtype:"resource-replacer-button-cancel",win:b}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;Ext.panel.Panel.prototype.afterRender.apply(this,arguments);a.setResourceData(a.resData)},getResourceManager:function(){return FBEditor.resource.Manager},setResourceData:function(b){var d=this,c=d.translateText,a,f,e;d.resData=b;a=b.name;f=c.title.replace("{name}",a);d.setTitle(f);e=d.getRenameButton();e.changeText(a)},getResourceData:function(){return this.resData},getReplaceButton:function(){var b=this,a=b.replaceButton;a=a||b.down("resource-replacer-button-replace");b.replaceButton=a;return a},getRenameButton:function(){var b=this,a=b.renameButton;a=a||b.down("resource-replacer-button-rename");b.renameButton=a;return a}},1,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.resource.replacer,"Window"],0));(Ext.cmd.derive("FBEditor.resource.Manager",Ext.Base,{singleton:true,data:[],defaultThumbPath:"thumb",types:["image/png","image/jpeg","image/gif","image/svg+xml"],rootPath:"/fb3/img",activeFolder:"",selectFn:null,paste:null,replacer:null,init:function(){var a=this;a.paste=Ext.create("FBEditor.resource.Paste",a)},getPaste:function(){return this.paste},getReplacer:function(b){var c=this,a=c.replacer,d=Ext.clone(b);if(a){a.setResourceData(d)}else{a=Ext.create("FBEditor.resource.replacer.Window",d);c.replacer=a}return a},reset:function(){var a=this;a.data=[];a.paste.reset()},addResource:function(a){var b=this;b.data.push(a)},load:function(e){var d=this,b,a,f;function c(g,h){var i;i=new Promise(function(k,j){g.load().then(function(){d.addResource(g);if(g.isCover){d.setCover(g.name)}g.updateElements();if(h.length){d.load(h).then(function(){k()})}else{d.sortData();d.updateNavigation();d.generateFolders();d.setActiveFolder("");k()}})});return i}if(!e){return Promise.resolve(null)}e=Ext.isArray(e)?e:[e];a=e.pop();f=new Promise(function(h,g){if(a.getData){a.getData().then(function(i){b=Ext.create("FBEditor.resource.Resource",i);c(b,e).then(function(){h()})})}else{b=a;c(b,e).then(function(){h()})}});return f},loadResource:function(f){var e=this,d=f.file,c,b,a;if(d&&!e.checkType(d.type)){throw Error("Недопустимый тип ресурса")}b=f.getData?f:Ext.create("FBEditor.resource.data.FileData",f);b=b.getData();if(e.containsResource(b.name)){c=e.getReplacer(b);c.show();return}e.createResource(b)},reloadResource:function(a,f){var e=this,d=f.file,c,b;if(d&&!e.checkType(d.type)){throw Error("Недопустимый тип ресурса")}b=e.getResource(a);c=f.getData?f:Ext.create("FBEditor.resource.data.FileData",f);c=c.getData();b.updateData(c);e.sortData();e.updateNavigation();e.updatePanelResources()},createResource:function(b){var c=this,a;a=Ext.create("FBEditor.resource.Resource",b);c.addResource(a);c.sortData();c.updateNavigation()},deleteResource:function(h){var e=this,g=e.data,a=true,c,f;function d(i){g.splice(i,1)}function b(j){var i=g[j].name,k=[];g.splice(j,1);Ext.each(g,function(l){if(l.name.indexOf(i)!==0){k.push(l)}});e.data=k}if(Ext.isString(h)){f=e.getResourceIndexByProp("name",h);h=f!==null?g.slice(f,f+1):null;h=h&&h[0]?h[0]:null}else{f=e.getResourceIndexByProp("name",h.name)}if(!h){c=h?h.name:h;console.log("Ресурс "+c+" не найден");return false}if(h.isFolder){if(e.containsCover(h)){Ext.getCmp("panel-cover").fireEvent("clear");b(f)}else{b(f)}}else{if(h.isCover){Ext.getCmp("panel-cover").fireEvent("clear");d(f)}else{if(h.elements.length){h.clearElements();d(f)}else{d(f)}}}e.updatePanelResources();e.generateFolders();e.sortData();e.updateNavigation();return a},saveResource:function(b){var c=this,f=c.data,e,d,a;e=c.getResourceIndexByProp("name",b);d=e!==null?f.slice(e,e+1):null;d=d&&d[0]?d[0]:null;if(!d){throw Error("Ресурс "+b+" не найден")}a=FBEditor.file.Manager.saveResource(d);return a},moveResource:function(a,b){var i=this,f=i.data,d=b==="/"?"":b,g,e,c,h,j=false;g=i.getResourceIndexByProp("name",a);e=g!==null?f.slice(g,g+1):null;e=e&&e[0]?e[0]:null;if(!e){throw Error("Ресурс "+a+" не найден")}if(a===d){throw Error("Невозможно переместить ресурс сам в себя")}c=e.name;if(c.indexOf(a)===0){h=c.indexOf("/")!==-1?c.replace(/.*(\/.*?)$/,d+"$1"):d+"/"+c;h=h.replace(/^[/]/,"");if(h!==c){j=true;e.rename(h);i.setActiveFolder(d)}}return j},replaceResource:function(b){var c=this,a,d;a=Ext.create("FBEditor.resource.Resource",b);c.deleteResource(a);a=Ext.create("FBEditor.resource.Resource",b);c.addResource(a)},createFolder:function(b){var d=this,e=d.activeFolder,f,a,c;f=e?e+"/"+b:b;if(!d.containsResource(f)){a={name:f,baseName:b,modifiedDate:new Date()};c=Ext.create("FBEditor.resource.FolderResource",a);d.data.unshift(c);d.sortData();d.updateNavigation();return true}else{throw Error("Папка с именем `"+b+"` уже существует")}return false},setActiveFolder:function(b){var a=this,c,d=FBEditor.getBridgeWindow();a.activeFolder=b;c=a.getFolderData(b);d.Ext.getCmp("view-resources").setStoreData(c)},setSelectFunction:function(a){this.selectFn=a},setSelectCoverFunction:function(){var a=this;a.selectFn=function(b){Ext.getCmp("window-resource").close();a.setCover(b.name);a.selectFn=null}},setSelectFolderFunction:function(){var a=this;a.selectFn=function(b){Ext.getCmp("window-resource-tree").setFolder(b.path)}},setCover:function(e){var f=this,g=f.data,a=Ext.getCmp("panel-cover"),h=null,d,c,b;if(!e){return false}d=new RegExp("^"+f.rootPath);b=/^\//.test(e)||!d.test("/"+e)?e:"/"+e;b=b.indexOf(f.rootPath)===0?b.substring(f.rootPath.length+1):b;Ext.Array.each(g,function(i){if(i.name===b){h=i}else{if(i.isCover){c=i}}});if(h){if(c){c.isCover=false}h.isCover=true;a.fireEvent("load",h)}},restoreActiveFolder:function(c){var b=this,a=FBEditor.getBridgeNavigation(),d;b.activeFolder=c;d=a.Ext.getCmp("panel-resources-navigation");d.restoreOpenNode()},getActiveFolder:function(a){return this.activeFolder},getSelectFunction:function(){return this.selectFn},getData:function(){return this.data},getCover:function(){var a=this,b=a.data,c;c=Ext.Array.findBy(b,function(d){return d.isCover});return c},getResources:function(){var a=this,b=a.data,c=[];Ext.each(b,function(d){if(!d.isFolder){c.push(d)}});return c},getResource:function(a){var b=this,e=b.data,d,c;c=b.getResourceIndexByProp("fileId",a);c=c===null?b.getResourceIndexByProp("url",a):c;c=c===null?b.getResourceIndexByProp("name",a):c;d=c!==null?e.slice(c,c+1):null;d=d&&d[0]?d[0]:null;return d},getNewResourceName:function(d){var e=this,a=1,b,c;do{b=d.replace(/(\.\w+)$/ig,"_"+a+"$1");c=e.getResource(b);a++}while(c);return b},getFolders:function(){var a=this,b=a.data,c=[];Ext.each(b,function(d){if(d.isFolder){c.push(d)}});return c},getFolderData:function(b){var a=this,d=a.data,c=b,e=[];Ext.each(d,function(i){var j,h=i.name,g,f;j=h.indexOf(c);f=j===0?true:false;g=f?h.substring(c.length+1):null;if(f&&g&&g.indexOf("/")===-1||!c&&!g){e.push(i)}});return e},getDefaultThumbPath:function(){var a=this,b;b=a.rootPath+(a.defaultThumbPath?"/"+a.defaultThumbPath:"");return b},checkType:function(c){var d=this,b=d.types,a;a=Ext.Array.contains(b,c);return a},containsResource:function(a){var c=this,d=c.data,b=false;Ext.each(d,function(e){if(e.name===a){b=true;return false}});return b},containsCover:function(d){var c=this,e=c.data,a=d.name,b;b=Ext.Array.findBy(e,function(f){if(f.name.indexOf(a)===0&&f.isCover){return true}});return b?true:false},checkThumbInResources:function(b){var d=this,c,a;c=b.getFileName();a=c.indexOf(d.rootPath)===0?true:false;return a},updateNavigation:function(){var b=this,a=FBEditor.getBridgeNavigation(),c;if(a.Ext.getCmp&&a.Ext.getCmp("panel-resources-navigation")){c=b.getData();a.Ext.getCmp("panel-resources-navigation").loadData(c)}else{Ext.defer(function(){this.updateNavigation()},100,b)}},updatePanelResources:function(c){var a=this,b=FBEditor.getBridgeProps(),d;d=b.Ext.getCmp("panel-props-resources");d.fireEvent("loadData",c)},convertImgToBase64:function(b){var c=this,a,d;d=b;a=d.match(/<img(.*?)>/ig);Ext.each(a,function(h){var e,i,f,g;e=h.match(/src="(.*?)"/i);i=e[1];f=c.getResource(i);g=new RegExp('<img src="'+i+'"',"ig");d=d.replace(g,'<img src="'+f.base64+'" id="'+f.fileId+'"')});return d},generateFolders:function(){var b=this,c=b.data,d=[],a=[];Ext.each(c,function(e){if(!e.isFolder){d.push(e)}});c=d;Ext.each(c,function(m,h){var e=false,l,k,g,i,f,j;if(m.name.indexOf("/")!==-1){k=m.name.replace(/(.*)\/.*?$/,"$1");Ext.each(a,function(n){if(n.name===k){e=true;return false}});if(!e){do{l=0;f=m.modifiedDate;Ext.each(c,function(n){if(n.name.indexOf(k)===0){l++;if(n.modifiedDate&&n.modifiedDate.getTime()>f.getTime()){f=n.modifiedDate}}});g=k.replace(/.*\/(.*?)$/,"$1");i={name:k,baseName:g,modifiedDate:f,total:l};j=Ext.create("FBEditor.resource.FolderResource",i);a.push(j);k=k.replace(/(.*)\/.*?$/,"$1")}while(k!==g)}}});if(a.length){c=Ext.Array.merge(a,c)}b.data=c},sortData:function(){var a=this,b=a.data;Ext.Array.sort(b,function(d,c){var e;e=d.isFolder&&c.isFolder&&d.name>c.name||!d.isFolder&&!c.isFolder&&d.name>c.name;return e});a.data=b},getResourceIndexByProp:function(a,f){var c=this,e=c.data,d,b;b=Ext.Array.findBy(e,function(h,g){d=g;return h[a]?h[a]===f:false});d=b?d:null;return d}},0,0,0,0,0,0,[FBEditor.resource,"Manager"],0));(Ext.cmd.derive("FBEditor.route.Manager",Ext.Base,{singleton:true,params:{},init:function(){var a=this,c,b;b=location.hash.substring(1);if(b){c=b.split("&");Ext.Array.each(c,function(f){var e,d,g;e=f.split("=");d=e[0];g=e[1]?unescape(e[1]):null;a.params[d]=g})}},getParams:function(){return this.params},setParam:function(a,c){var b=this;b.param[a]=c},removeParams:function(a){var c=this,e,d,b;d=Ext.isArray(a)?a:[a];Ext.Array.each(d,function(f){if(c.params[f]!==undefined){e=location.hash.substring(1);b=new RegExp(f+"=[^&]+","ig");e=e.replace(b,"");e=e.replace("&&","&");e=e.replace(/^&|&$/ig,"");location.hash=e;delete c.params[f]}})}},0,0,0,0,0,0,[FBEditor.route,"Manager"],0));(Ext.cmd.derive("FBEditor.scroll.Scroll",Ext.Base,{duration:500,startTime:0,cmp:null,constructor:function(a){var c=this,b;if(a.cmp){c.cmp=a.cmp;c.duration=a.duration||c.duration}else{c.cmp=a}b=c.cmp;b.on({scope:c,afterRender:function(){this.cmp.body.on({scope:this,scroll:this.event})}})},event:function(){var b=this,c=b.duration,a=new Date().getTime();if(!b.startTime){b.cmp.fireEvent("startScroll")}Ext.defer(b.endScroll,c,b);b.startTime=a},endScroll:function(){var c=this,d=c.duration,b=c.startTime,a=new Date().getTime();if(a-b>=d){c.startTime=0;c.cmp.fireEvent("endScroll")}else{c.cmp.fireEvent("scroll")}}},1,0,0,0,0,0,[FBEditor.scroll,"Scroll"],0));(Ext.cmd.derive("FBEditor.util.Ajax",Ext.Base,{singleton:true,request:function(a){var b=this,c,d;c=new Date().getTime();a.url+=/[?]/.test(a.url)?"&_d="+c:"?_d="+c;a.method=a.method||(a.data?"POST":"GET");a.async=a.async||true;a.data=a.data||null;d=b.xhr();d.open(a.method,a.url,a.async);d.responseType=a.responseType||"text";if(a.responseType==="arraybuffer"){if(Uint8Array){d.responseType="arraybuffer"}else{if(d.overrideMimeType){d.overrideMimeType("text/plain; charset=x-user-defined")}}}d.onreadystatechange=function(){var e=200,h,g,f;if(d.readyState==4){h=a.callback;g=a.success;f=a.failure;if(d.status==e&&g){g.call(a.scope,d)}else{if(f){f.call(a.scope,d)}else{h.call(a.scope,d)}}}};d.send(a.data)},xhr:function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}if(typeof XMLHttpRequest!==undefined){return new XMLHttpRequest()}}},0,0,0,0,0,0,[FBEditor.util,"Ajax"],0));(Ext.cmd.derive("FBEditor.util.ClipboardData",Ext.Base,{evt:null,imagesFromRtf:null,constructor:function(a){var b=this;b.evt=a},getText:function(){var a=this,c=a.evt,b=c.clipboardData,d;d=b.getData("text");return d},getHtml:function(){var b=this,d=b.evt,c=d.clipboardData,a;a=c.getData("text/html");return a},setHtml:function(a){var b=this,d=b.evt,c=d.clipboardData;c.setData("text/html",a)},setText:function(d){var a=this,c=a.evt,b=c.clipboardData;b.setData("text",d)},getImagesFromRtf:function(){var j=this,g=j.evt,f=g.clipboardData,l=j.imagesFromRtf,n,b,k,c,h,d,i,m,a;if(!l){n=f.getData("text/rtf");if(n){n=n.replace(/[\n\s]+/g,"");n=n.replace(/\\hich\\af37\\dbch\\af37\\loch\\f37/g,"");k=j.getImageHrefFromHtml();if(k){d=/\{\\field.*?includepicture"(.*?)".*?\{\\pict.*?([0-9a-f]{100,})\}/ig;while(h=d.exec(n)){c=h[1].replace(/\\{4}/g,"/");b=k[c];if(b){i=FBEditor.util.Format.getMimeType(b.src);m=FBEditor.util.Format.hexToBytes(h[2]);a=new Blob([m],{type:i});l=l||[];l.push({src:b.src,blob:a})}}}}}j.imagesFromRtf=l;return l},getImageHrefFromHtml:function(){var m=this,j=m.evt,h=j.clipboardData,n=null,i,f,g,l,b,d,a,c,k;i=h.getData("text/html");i=i.replace(/[\n\s]+/g,"");f=/<img.*?src="(.*?)".*?shapes="(.*?)"/ig;while(l=f.exec(i)){a=l[1];d=l[2];g=new RegExp('shape+id="'+d+'".*?imagedata+src="(.*?)"+.*?href="file:[/]{3}(.*?)"',"i");b=i.match(g);k=b[1];c=b[2];n=n||{};n[c]={dataSrc:k,src:a,href:c}}return n}},1,0,0,0,0,0,[FBEditor.util,"ClipboardData"],0));(Ext.cmd.derive("FBEditor.util.Diff",Ext.Base,{statics:{self:null,getInstance:function(){var b=this,a=FBEditor.util.Diff.self;a=a||Ext.create("FBEditor.util.Diff");FBEditor.util.Diff.self=a;return a}},diff:null,constructor:function(){var a=this;a.diff=JsDiff},getDiff:function(g,b,c,f,a){var d=this,e=d.diff;return e.createPatch(g,b,c,f,a)},applyDiff:function(d,c){var a=this,b=a.diff;return b.applyPatch(d,c)}},1,0,0,0,0,0,[FBEditor.util,"Diff"],0));(Ext.cmd.derive("FBEditor.util.Format",Ext.Base,{singleton:true,cacheFileSize:{},translateText:{bytes:"",kb:" КБ",mb:" МБ",gb:" ГБ"},byteLength:function(a){return unescape(encodeURIComponent(a)).length},fileSize:function(d){var e=this,b=1024,c=1048576,f=1073741824,a;if(e.cacheFileSize[d]){return e.cacheFileSize[d]}if(d<b){a=d+e.translateText.bytes}else{if(d<1000000){a=(Ext.util.Format.number(d/b,"0.00"))+e.translateText.kb}else{if(d<1000000000){a=(Ext.util.Format.number(d/c,"0.00"))+e.translateText.mb}else{a=(Ext.util.Format.number(d/f,"0.00"))+e.translateText.gb}}}e.cacheFileSize[d]=a;return a},getExtensionFile:function(a){var b="";if(/.*?\.(\w+)(\?.*?)?$/.test(a)){b=a.replace(/.*?\.(\w+)(\?.*?)?$/,"$1")}return b},getExtensionMime:function(b){var a="";a=b==="image/svg+xml"?"svg":a;a=b==="image/png"?"png":a;a=b==="image/jpeg"?"jpeg":a;a=b==="image/gif"?"gif":a;return a},getMimeType:function(a){var b="";b=/\.svg$/.test(a)?"image/svg+xml":b;b=/\.png$/.test(a)?"image/png":b;b=/\.(jpg|jpeg)$/.test(a)?"image/jpeg":b;b=/\.gif$/.test(a)?"image/gif":b;return b},hexToBytes:function(b){var a=[];a=new Uint8Array(b.length/2);Ext.each(a,function(d,c){a[c]=parseInt(b.substr(c*2,2),16)});return a},pixelsToMillimeters:function(b,c){var a=25.4,d;c=c||72;b=Number(b);d=b*a/c;return d}},0,0,0,0,0,0,[FBEditor.util,"Format"],0));(Ext.cmd.derive("FBEditor.util.Hotkey",Ext.Base,{singleton:true,listeners:null,on:function(c){var b=this,a;a=Ext.getBody();b.listeners=a.on({keydown:b.key,scope:b,destroyable:true,args:[c]})},un:function(){var b=this,a=b.listeners;a.destroy()},key:function(c,d){var b=this,a;if(!d.isSpecialKey()&&(d.ctrlKey||d.shiftKey||d.altKey)){d.preventDefault();a={ctrl:d.ctrlKey,shift:d.shiftKey,alt:d.altKey,key:d.event.key.toUpperCase()};c.resolve.call(c.scope,a)}}},0,0,0,0,0,0,[FBEditor.util,"Hotkey"],0));(Ext.cmd.derive("FBEditor.util.Img",Ext.Base,{singleton:true,urlDataToBlob:function(l,m,d){var c=/^data:(image\/.*?);base64,/i,j=[],g,k,h,b,a;d=d||512;m=m||"";m=!m&&c.test(l)?l.match(c)[1]:m;l=c.test(l)?l.replace(c,""):l;g=atob(l);for(var e=0;e<g.length;e+=d){k=g.slice(e,e+d);h=new Array(k.length);for(var f=0;f<k.length;f++){h[f]=k.charCodeAt(f)}b=new Uint8Array(h);j.push(b)}a=new Blob(j,{type:m});return a}},0,0,0,0,0,0,[FBEditor.util,"Img"],0));(Ext.cmd.derive("FBEditor.util.xml.Jsxml",Ext.Base,{singleton:true,jsxml:null,trans:function(a,b){var d=this,h,c,g;h=d.jsxml||d.createJsxml();try{g=h.transReady(a,b)}catch(f){c=f.message;c=c.match(/ errors:(.*?)\n/i);f.error=c[1]||c;throw f}return g},valid:function(b){var a,c;c={xml:b.xml,schema:b.xsd,"arguments":["--noout","--schema",b.schemaFileName,b.xmlFileName]};a=window.validateXML?window.validateXML(c):true;return a},createJsxml:function(){var a=this,b;b=window.JSXML;a.jsxml=b;return b}},0,0,0,0,0,0,[FBEditor.util.xml,"Jsxml"],0));(Ext.cmd.derive("FBEditor.webworker.AbstractMaster",Ext.Base,{name:"",needInit:false,worker:null,callback:[],initialized:false,constructor:function(a){var f=this,d=FBEditor.webworker.Manager,c,h,b;c="app/"+d.path+"/"+f.name+"/Worker.js?"+FBEditor.versionParam;try{h=new Worker(c);h.addEventListener("message",f.message,false);h.addEventListener("error",f.error,false);f.worker=h;if(f.needInit){b=function(e){f.initialized=e?true:false};f.post(null,b,f)}}catch(g){Ext.log({msg:"Ошибка создания потока: "+c,level:"error"})}},destroy:function(){var a=this;a.worker.terminate();delete a.worker},message:function(a){throw Error("Не реализован метод webworker.AbstractMaster#message()")},post:function(d,f,b){var c=this,e=c.worker,a=c.name;if(f){if(d&&d.callbackId){c.callback[d.callbackId]={fn:f,scope:b}}else{c.callback[a]=c.callback[a]||[];c.callback[a].push({fn:f,scope:b})}}e.postMessage(d)},error:function(a){throw Error("Не реализован метод webworker.AbstractMaster#error()")},getCallback:function(c){var b=this,a=b.name,d=null;if(c){d=b.callback[c]||null}else{if(b.callback[a].length){d=b.callback[a].splice(0,1)[0]}}return d}},1,0,0,0,0,0,[FBEditor.webworker,"AbstractMaster"],0));(Ext.cmd.derive("FBEditor.webworker.httpRequest.Master",FBEditor.webworker.AbstractMaster,{name:"httpRequest",abort:function(){var a=this;a.post({abort:true})},message:function(g){var f=g.data,b=FBEditor.webworker.Manager,c=b.getMaster(f.masterName),a=f.data.response,d=f.data.callbackId||null,h;h=c.getCallback(d);if(h&&!f.data.abort){h.fn.call(h.scope,a,f.data)}},error:function(c){var a=FBEditor.webworker.Manager,b=a.getMaster("httpRequest"),d,f;d="Ошибка выполнения потока "+c.filename+" в строке "+c.lineno+": "+c.message;Ext.log({msg:d,level:"error"});f=b.getCallback();if(f){f.fn.call(f.scope,false)}}},0,0,0,0,0,0,[FBEditor.webworker.httpRequest,"Master"],0));(Ext.cmd.derive("FBEditor.webworker.xmllint.Master",FBEditor.webworker.AbstractMaster,{name:"xmllint",needInit:true,message:function(d){var c=d.data,a=FBEditor.webworker.Manager,b=a.getMaster(c.masterName),f;f=b.getCallback();if(f){f.fn.call(f.scope,c)}},error:function(c){var a=FBEditor.webworker.Manager,b=a.getMaster("xmllint"),d,f;d="Ошибка выполнения потока "+c.filename+" в строке "+c.lineno+": "+c.message;Ext.log({msg:d,level:"error"});f=b.getCallback();if(f){f.fn.call(f.scope,false)}}},0,0,0,0,0,0,[FBEditor.webworker.xmllint,"Master"],0));(Ext.cmd.derive("FBEditor.webworker.Manager",Ext.Base,{singleton:true,path:"webworker",masters:[{name:"xmllint",cfg:{},_master:null},{name:"httpRequest",cfg:{},_master:null}],init:function(){var a=this,b=a.masters;Ext.Array.each(b,function(d){var c=d.cfg||null;d._master=a.factory(d.name,c)})},getMaster:function(a){var c=this,b=null;Ext.Array.each(c.masters,function(d){if(d.name===a){b=d._master;return false}});return b},factory:function(b,a){var d=this,c,g;g="FBEditor."+d.path+"."+b+".Master";try{c=Ext.create(g,a)}catch(f){Ext.log({msg:"Ошибка создания владельца потока "+g,level:"error"})}return c}},0,0,0,0,0,0,[FBEditor.webworker,"Manager"],0));(Ext.cmd.derive("FBEditor.xsd.Desc",Ext.Base,{singleton:true,getXsd:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:fb3d="http://www.fictionbook.org/FictionBook3/description" targetNamespace="http://www.fictionbook.org/FictionBook3/description" elementFormDefault="qualified" attributeFormDefault="unqualified">\t<simpleType name="SubjectRelationEnumType">\t\t\t\t  <restriction base="token">\t\t\t\t      <enumeration value="author" />\t\t\t\t      <enumeration value="translator" />\t\t\t\t      <enumeration value="editor" />\t\t\t\t      <enumeration value="compiler" />\t\t\t\t      <enumeration value="maker-up" />\t\t\t\t      <enumeration value="adapter" />\t\t\t\t      <enumeration value="dialogue" />\t\t\t\t      <enumeration value="conceptor" />\t\t\t\t      <enumeration value="reviewer" />\t\t\t\t      <enumeration value="introduction" />\t\t\t\t      <enumeration value="afterword" />\t\t\t\t      <enumeration value="accompanying" />\t\t\t\t      <enumeration value="quotations" />\t\t\t\t      <enumeration value="annotator" />\t\t\t\t      <enumeration value="associated" />\t\t\t\t      <enumeration value="copyright_holder" />\t\t\t\t      <enumeration value="commentator" />\t\t\t\t      <enumeration value="consultant" />\t\t\t\t      <enumeration value="corrector" />\t\t\t\t      <enumeration value="scientific_advisor" />\t\t\t\t      <enumeration value="dubious_author" />\t\t\t\t      <enumeration value="designer" />\t\t\t\t      <enumeration value="recipient_of_letters" />\t\t\t\t      <enumeration value="sponsor" />\t\t\t\t      <enumeration value="photographer" />\t\t\t\t      <enumeration value="narrator" />\t\t\t\t      <enumeration value="rendering" />\t\t\t\t      <enumeration value="performer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="maker">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="actor">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="director">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="producer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="composer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="sound_engineer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="screenwriter">\t\t\t\t\t</enumeration>\t\t\t\t\t\t<enumeration value="contributing_editor" />\t\t\t\t\t\t<enumeration value="editorial_board_member" />\t\t\t\t\t\t<enumeration value="managing_editor" />\t\t\t\t        <enumeration value="other" />\t\t\t\t        <enumeration value="undef" />\t\t\t      </restriction>\t\t</simpleType>          <simpleType name="ObjectRelationEnumType">\t          <restriction base="token">\t\t          <enumeration value="preceding_edition" />\t\t          <enumeration value="following_edition" />\t\t          <enumeration value="translated_from" />\t\t          <enumeration value="translation" />\t\t          <enumeration value="compilation" />\t\t          <enumeration value="part" />\t\t          <enumeration value="appendix" />\t\t          <enumeration value="appendix_to" />\t\t          <enumeration value="intersection" />\t\t          <enumeration value="same_subject" />\t\t          <enumeration value="alt_media" />\t\t          <enumeration value="sequel" />\t\t          <enumeration value="prequel" />\t\t          <enumeration value="reissue" />\t\t          <enumeration value="alt_translation" />\t\t          <enumeration value="alt_translation_and_media" />\t\t          <enumeration value="alt_translation_compilation" />\t\t          <enumeration value="alt_translation_part" />\t\t          <enumeration value="undef" />\t          </restriction>          </simpleType>\t<simpleType name="UUIDType">\t\t\t <restriction base="token">\t\t\t\t <pattern value="[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}"/>\t\t\t </restriction>\t\t</simpleType>\t\t<simpleType name="BookClassType">\t\t\t\t  <restriction base="token">\t\t\t\t      <enumeration value="novel" />\t\t\t\t      <enumeration value="short_story" />\t\t\t\t      <enumeration value="essay" />\t\t\t\t      <enumeration value="article" />\t\t\t\t      <enumeration value="play" />\t\t\t\t      <enumeration value="monograph" />\t\t\t\t      <enumeration value="diary" />\t\t\t\t      <enumeration value="manual" />\t\t\t\t      <enumeration value="thesis" />\t\t\t\t  </restriction>\t\t</simpleType>\t\t\t<simpleType name="SubjectType">\t\t\t <restriction base="token">\t\t\t  <enumeration value="accounting" />\t\t\t  <enumeration value="adv_geo" />\t\t\t  <enumeration value="adv_indian" />\t\t\t  <enumeration value="adv_western" />\t\t\t  <enumeration value="antique" />\t\t\t  <enumeration value="antique_east" />\t\t\t  <enumeration value="antique_myths" />\t\t\t  <enumeration value="banking" />\t\t\t  <enumeration value="child_det" />\t\t\t  <enumeration value="child_prose" />\t\t\t  <enumeration value="child_tale" />\t\t\t  <enumeration value="children" />\t\t\t  <enumeration value="comp_hard" />\t\t\t  <enumeration value="comp_programming" />\t\t\t  <enumeration value="comp_www" />\t\t\t  <enumeration value="design" />\t\t\t  <enumeration value="det_classic" />\t\t\t  <enumeration value="det_espionage" />\t\t\t  <enumeration value="det_history" />\t\t\t  <enumeration value="det_maniac" />\t\t\t  <enumeration value="det_political" />\t\t\t  <enumeration value="economics" />\t\t\t  <enumeration value="global_economy" />\t\t\t  <enumeration value="home_crafts" />\t\t\t  <enumeration value="home_entertain" />\t\t\t  <enumeration value="home_health" />\t\t\t  <enumeration value="home_sex" />\t\t\t  <enumeration value="humor_anecdote" />\t\t\t  <enumeration value="humor_verse" />\t\t\t  <enumeration value="job_hunting" />\t\t\t  <enumeration value="love_detective" />\t\t\t  <enumeration value="love_history" />\t\t\t  <enumeration value="love_short" />\t\t\t  <enumeration value="marketing" />\t\t\t  <enumeration value="nonf_criticism" />\t\t\t  <enumeration value="nonfiction" />\t\t\t  <enumeration value="paper_work" />\t\t\t  <enumeration value="poetry" />\t\t\t  <enumeration value="prose_classic" />\t\t\t  <enumeration value="prose_counter" />\t\t\t  <enumeration value="prose_military" />\t\t\t  <enumeration value="prose_su_classics" />\t\t\t  <enumeration value="ref_dict" />\t\t\t  <enumeration value="ref_guide" />\t\t\t  <enumeration value="reference" />\t\t\t  <enumeration value="religion_esoterics" />\t\t\t  <enumeration value="religion_self" />\t\t\t  <enumeration value="sci_chem" />\t\t\t  <enumeration value="sci_history" />\t\t\t  <enumeration value="sci_linguistic" />\t\t\t  <enumeration value="sci_medicine" />\t\t\t  <enumeration value="sci_phys" />\t\t\t  <enumeration value="sci_psychology" />\t\t\t  <enumeration value="sci_tech" />\t\t\t  <enumeration value="sf_action" />\t\t\t  <enumeration value="sf_detective" />\t\t\t  <enumeration value="sf_fantasy" />\t\t\t  <enumeration value="sf_history" />\t\t\t  <enumeration value="sf_humor" />\t\t\t  <enumeration value="sf_space" />\t\t\t  <enumeration value="stock" />\t\t\t </restriction>\t\t</simpleType>\t                        <element name="fb3-description">\t                        \t                        <complexType>\t\t                        <sequence>\t\t\t                        <element name="periodical" type="fb3d:PeriodicalType" minOccurs="0">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="title" type="fb3d:TitleType">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="sequence" type="fb3d:SequenceType" minOccurs="0" maxOccurs="unbounded">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element ref="fb3d:fb3-relations">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element ref="fb3d:fb3-classification">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="lang" type="language"/>\t\t\t                        <element name="written" minOccurs="0">\t\t\t\t                        <complexType mixed="false">\t\t\t\t\t                        <sequence>\t\t\t\t\t\t                        <element name="lang" type="language" minOccurs="0"/>\t\t\t\t\t\t                        <element name="date" minOccurs="0">\t\t\t\t\t\t\t                        <complexType>\t\t\t\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t\t\t\t                        <attribute name="value" type="date" use="optional"/>\t\t\t\t\t\t\t\t\t                        </extension>\t\t\t\t\t\t\t\t                        </simpleContent>\t\t\t\t\t\t\t                        </complexType>\t\t\t\t\t\t                        </element>\t\t\t\t\t\t                        <element name="country" minOccurs="0">\t\t\t\t\t\t\t                        <simpleType>\t\t\t\t\t\t\t\t                        <restriction base="token">\t\t\t\t\t\t\t\t\t                        <minLength value="2"/>\t\t\t\t\t\t\t\t                        </restriction>\t\t\t\t\t\t\t                        </simpleType>\t\t\t\t\t\t                        </element>\t\t\t\t\t\t                        <element name="date-public" minOccurs="0">\t\t\t\t\t\t\t                        <complexType>\t\t\t\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t\t\t\t                        <attribute name="value" type="date" use="optional"/>\t\t\t\t\t\t\t\t\t                        </extension>\t\t\t\t\t\t\t\t                        </simpleContent>\t\t\t\t\t\t\t                        </complexType>\t\t\t\t\t\t                        </element>\t\t\t\t\t                        </sequence>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="translated" minOccurs="0">                                        <complexType>\t                                        <simpleContent>\t\t                                        <extension base="string">\t\t\t                                        <attribute name="value" type="date" use="optional"/>\t\t                                        </extension>\t                                        </simpleContent>                                        </complexType>                                    </element>                                    <element name="copyrights" minOccurs="0">\t\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t\t<element name="copyright-owner" maxOccurs="unbounded">\t\t\t\t\t\t\t\t\t\t\t\t    <complexType mixed="false">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="title" use="required">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<restriction base="normalizedString">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minLength value="1"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</attribute>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="uuid" type="fb3d:UUIDType"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="url" type="anyURI"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="percent">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<restriction base="float">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minInclusive value="0"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<maxInclusive value="100"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</attribute>\t\t\t\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t</element>\t\t\t                        <element name="document-info">\t\t\t\t                        <complexType mixed="false">\t\t\t\t\t                        <attribute name="created" type="dateTime" use="required"/>\t\t\t\t\t                        <attribute name="updated" type="dateTime" use="required"/>\t\t\t\t\t                        <attribute name="program-used" type="normalizedString" use="optional"/>\t\t\t\t\t                        <attribute name="src-url" type="anyURI" use="optional"/>\t\t\t\t\t                        <attribute name="ocr" type="normalizedString" use="optional"/>\t\t\t\t\t                        <attribute name="editor" type="token" use="optional"/>\t\t\t\t\t                        <attribute name="fb3-lvl" type="integer" use="optional"/>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="history" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t                        <element name="paper-publish-info" minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t\t\t\t\t<complexType mixed="false">\t\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t\t<element name="isbn" type="fb3d:ISBNType" minOccurs="0" maxOccurs="unbounded"/>\t\t\t\t\t\t\t\t\t\t\t\t<element name="sequence" minOccurs="0" maxOccurs="unbounded">\t\t\t                                        <simpleType>\t\t\t\t                                        <restriction base="string">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minLength value="1"/>\t\t                                                </restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t\t\t\t\t<element name="biblio-description" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t\t<attribute name="title" type="token" use="required"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="publisher" type="token" use="optional"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="city" type="token" use="optional"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="year" type="gYear" use="optional"/>\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t</element>\t\t\t                        <element name="custom-info" minOccurs="0" maxOccurs="unbounded">\t\t\t\t                        \t\t\t\t                        <complexType>\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t                        <attribute name="info-type" use="required">\t\t\t\t\t\t\t\t                        <simpleType>\t\t\t\t\t\t\t\t\t                        <restriction base="token">\t\t\t\t\t\t\t\t\t\t                        <minLength value="1"/>\t\t\t\t\t\t\t\t\t                        </restriction>\t\t\t\t\t\t\t\t                        </simpleType>\t\t\t\t\t\t\t                        </attribute>\t\t\t\t\t\t                        </extension>\t\t\t\t\t                        </simpleContent>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="annotation" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t                        <element name="preamble" type="fb3d:AnnotationType" minOccurs="0"/>\t\t                        </sequence>\t\t                        <attribute name="id" type="fb3d:UUIDType" use="required">\t\t\t                        \t\t                        </attribute>\t\t                        <attribute name="version" type="float" use="required">\t\t\t                        \t\t                        </attribute>\t                        </complexType>\t                        <unique name="RelationUUID">\t\t                        <selector xpath="relations/subject|relations/object"/>\t\t                        <field xpath="@id"/>\t                        </unique>                        </element><element name="fb3-relations" type="fb3d:RelationsType">                                   </element>  <element name="fb3-classification" type="fb3d:ClassificationType">\t    </element><complexType name="PeriodicalType" mixed="false">\t\t <sequence>\t<element name="title" type="fb3d:TitleType" minOccurs="0">\t \t</element>\t<element name="issn" type="fb3d:ISSNType" minOccurs="0">\t    \t</element>  <element name="issue">\t  \t  <complexType>\t\t  <simpleContent>\t\t\t  <extension base="string">\t\t\t\t  <attribute name="number" type="positiveInteger" use="required">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t\t  <attribute name="year" type="gYear" use="required">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t\t  <attribute name="date" type="date" use="optional">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t  </extension>\t\t  </simpleContent>\t  </complexType>  </element></sequence><attribute name="id" type="fb3d:UUIDType" use="required"/></complexType><complexType name="ClassificationType" mixed="false">    <sequence>      <element name="class" minOccurs="0">                    <complexType>\t          <simpleContent>\t\t          <extension base="fb3d:BookClassType">\t\t\t          <attribute name="contents" use="required">\t\t\t\t          <simpleType>\t\t\t\t\t          <restriction base="token">\t\t\t\t\t\t          <enumeration value="standalone" />\t\t\t\t\t\t          <enumeration value="collection" />\t\t\t\t\t\t      </restriction>\t\t\t\t          </simpleType>\t\t\t          </attribute>\t\t          </extension>\t          </simpleContent>          </complexType>      </element>      <element name="subject" type="fb3d:SubjectType" maxOccurs="unbounded">                </element>      <element name="target-audience" minOccurs="0">                    <complexType mixed="true">\t          <attribute name="age-min" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="positiveInteger">\t\t\t\t          <minInclusive value="2"/>\t\t\t\t          <maxInclusive value="50"/>\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>\t          <attribute name="age-max" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="positiveInteger">\t\t\t\t          <minInclusive value="2"/>\t\t\t\t          <maxInclusive value="150"/>\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>\t          <attribute name="education" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="token">\t\t\t\t          <enumeration value="none" />\t\t\t\t          <enumeration value="high" />\t\t\t\t          <enumeration value="higher" />\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>          </complexType>      </element>      <element name="setting" minOccurs="0">          <complexType mixed="true">\t          <attribute name="country" type="token" use="optional"/>\t          <attribute name="place" type="token" use="optional"/>\t          <attribute name="date" type="date" use="optional"/>\t          <attribute name="date-from" type="date" use="optional"/>\t          <attribute name="date-to" type="date" use="optional"/>\t          <attribute name="age" type="token" use="optional"/>          </complexType>      </element>      <element name="udc" minOccurs="0" maxOccurs="unbounded">        <simpleType>\t          <restriction base="token">\t            <pattern value="[\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»\'/A-Яа-я]+"/>\t          </restriction>         </simpleType>      </element>      <element name="bbk" minOccurs="0" maxOccurs="unbounded">          <simpleType>\t          <restriction base="token">\t            <pattern value=\'[\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+\'/>\t          </restriction>          </simpleType>      </element>  </sequence></complexType><complexType name="TitleType" mixed="false">\t<sequence>\t    <element name="main">\t        <simpleType>\t            <restriction base="string">\t                <minLength value="1"/>\t            </restriction>\t        </simpleType>\t    </element>\t\t<element name="sub" minOccurs="0">            <simpleType>\t\t\t\t<restriction base="string">\t\t\t\t\t<minLength value="1"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</element>\t\t<element name="alt" minOccurs="0" maxOccurs="unbounded">\t\t\t<simpleType>\t\t\t\t<restriction base="string">\t\t\t\t\t<minLength value="1"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</element>\t</sequence></complexType><complexType name="SequenceType" mixed="false">    <sequence>      <element name="title" type="fb3d:TitleType"/>      <element name="sequence" type="fb3d:SequenceType" minOccurs="0"/>  </sequence>  <attribute name="number" type="positiveInteger" use="optional"/>  <attribute name="id" type="fb3d:UUIDType" use="required"/></complexType><complexType name="AnnotationType">                                <sequence>              <element name="p" type="fb3d:BasicTextType">\t                            </element><choice minOccurs="0" maxOccurs="unbounded">                                <element name="p" type="fb3d:BasicTextType">\t                                                                </element><element name="br">              </element>  </choice>  </sequence></complexType><complexType name="BasicTextType" mixed="true">    <choice minOccurs="0" maxOccurs="unbounded">      <element name="strong" type="fb3d:BasicTextType">                </element>      <element name="em" type="fb3d:BasicTextType">                </element>      <element name="a">                    <complexType mixed="true">\t          <complexContent mixed="true">\t\t          <extension base="fb3d:BasicTextType">\t\t\t          <attribute name="href" type="anyURI" use="required"/>\t\t          </extension>\t          </complexContent>          </complexType>      </element>  </choice></complexType><complexType name="RelationsType">                                <sequence>              <element name="subject" type="fb3d:SubjectRelationType" maxOccurs="unbounded">\t                            </element><element name="object" type="fb3d:ObjectRelationType" minOccurs="0" maxOccurs="unbounded"/>                                                                              </sequence>                                                                              </complexType><complexType name="SubjectRelationType" mixed="false">                                              \t                                              <sequence>                                              <element name="title" type="fb3d:TitleType">\t                                                                                            </element><element name="first-name" minOccurs="0">                                     \t                                     <simpleType>                                     <restriction base="string">\t                                     <minLength value="1"/>                                     </restriction></simpleType>  </element>\t  <element name="middle-name" minOccurs="0">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>\t  <element name="last-name">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>\t  <element name="description" minOccurs="0">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>  </sequence><attribute name="id" type="fb3d:UUIDType" use="required">                                          </attribute>  <attribute name="link" type="fb3d:SubjectRelationEnumType" use="required">\t    </attribute>\t<attribute name="percent" type="optional"/></complexType><complexType name="ObjectRelationType" mixed="false">    <sequence>      <element name="title" type="fb3d:TitleType">                </element>      <element name="description" minOccurs="0">                    <simpleType>\t          <restriction base="string">\t\t          <minLength value="1"/>\t          </restriction>          </simpleType>      </element>  </sequence>  <attribute name="id" type="fb3d:UUIDType" use="required">        </attribute>  <attribute name="link" type="fb3d:ObjectRelationEnumType" use="required">        </attribute></complexType><simpleType name="ISSNType">             <restriction base="string">                  <pattern value="d{4}-d{3}(d|X)"/></restriction>  </simpleType>\t  <simpleType name="ISBNType">\t\t  \t\t  <restriction base="string">\t\t\t  <pattern value="([0-9]+[-s]){3,6}[0-9]*[xX0-9]"/>\t\t  </restriction>\t  </simpleType>  </schema>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsd,"Desc"],0));(Ext.cmd.derive("FBEditor.Application",Ext.app.Application,{name:"FBEditor",stores:[],listen:{controller:{"#":{unmatchedroute:"onUnmatchedRoute"}}},init:function(){var a=this;FBEditor.version=Ext.manifest.loader?Ext.manifest.loader.cache:"developer";FBEditor.versionParam=Ext.manifest.loader?Ext.manifest.loader.cacheParam+"="+FBEditor.version:"developer";FBEditor.parentWindow=window.opener&&window.name?window.opener:null;FBEditor.childWindow={navigation:null,props:null};FBEditor.getBridgeWindow=function(){return FBEditor.parentWindow||window};FBEditor.getBridgeProps=function(){var b;b=FBEditor.parentWindow?(FBEditor.parentWindow.FBEditor.childWindow.props||FBEditor.parentWindow):(FBEditor.childWindow.props||window);return b};FBEditor.getBridgeNavigation=function(){return FBEditor.parentWindow?(FBEditor.parentWindow.FBEditor.childWindow.navigation||FBEditor.parentWindow):(FBEditor.childWindow.navigation||window)};FBEditor.getLocalStorage=function(){return Ext.util.LocalStorage.get("FBEditor")||new Ext.util.LocalStorage({id:"FBEditor"})};FBEditor.getEditorManager=function(b){var e=FBEditor.getBridgeWindow(),c,d;c=e.FBEditor.activeEditorManager;if(!c||b){d=e.Ext.getCmp("main-editor");c=d.getManager()}return c};FBEditor.setEditorManager=function(b){var c=FBEditor.getBridgeWindow();c.FBEditor.activeEditorManager=b};window.onbeforeunload=function(){a.onbeforeunload(a)};window.onfocus=function(){a.onfocus()};FBEditor.webworker.Manager.init();Ext.state.Manager.setProvider(new Ext.state.CookieProvider({prefix:a.getName()+"-"}));FBEditor.command.HistoryCommand.init();FBEditor.route.Manager.init();FBEditor.resource.Manager.init();FBEditor.hotkeys.Manager.init()},launch:function(){if(FBEditor.parentWindow){FBEditor.parentWindow.Ext.getCmp("main").removeDetachedPanel(window)}document.querySelector(".app-loading").parentNode.removeChild(document.querySelector(".app-loading"))},onUnmatchedRoute:function(a){if(FBEditor.parentWindow){window.close()}},onbeforeunload:function(a){if(FBEditor.parentWindow&&!FBEditor.closingWindow){FBEditor.closingWindow=true;if(!FBEditor.parentWindow.FBEditor.closingWindow){if(window.name==="navigation"){Ext.getCmp("panel-resources-navigation").destroy();Ext.getCmp("panel-body-navigation").destroy()}FBEditor.parentWindow.Ext.getCmp("main").attachPanel(window.name,window);FBEditor.getLocalStorage().removeItem(window.name)}window.close()}else{FBEditor.closingWindow=true;Ext.getCmp("main").fireEvent("closeapplication")}},onfocus:function(){if(!window.name){}},setTitle:function(b){var a;b=b||"Введите название книги";document.title=b;Ext.Object.each(FBEditor.childWindow,function(c,d){if(d){a=d.FBEditor.getApplication();a.setTitle(d.title+" | "+b)}})}},0,0,0,0,0,0,[FBEditor,"Application"],0));(function renderingInfo(){document.querySelector(".app-loading-info").firstChild.nodeValue="Рендеринг"}());(Ext.cmd.derive("FBEditor.ExcludedCompiler",Ext.Base,{singleton:true,regexpW:"([_$0-9a-z¢-¥ª²-³µ¹-º¼-¾ß-öø-ÿāăąćĉċčďđēĕėęěĝğġģĥħĩīĭįıĳĵķ-ĸĺļľŀłńņň-ŉŋōŏőœŕŗřśŝşšţťŧũūŭůűųŵŷźżž-ƀƃƅƈƌ-ƍƒƕƙ-ƛƞơƣƥƨƪ-ƫƭưƴƶƹ-ƺƽ-ƿǆǉǌǎǐǒǔǖǘǚǜ-ǝǟǡǣǥǧǩǫǭǯ-ǰǳǵǹǻǽǿȁȃȅȇȉȋȍȏȑȓȕȗșțȝȟȡȣȥȧȩȫȭȯȱȳ-ȹȼȿ-ɀɂɇɉɋɍɏ-ʓʕ-ʯͱͳͷͻ-ͽΐά-ώϐ-ϑϕ-ϗϙϛϝϟϡϣϥϧϩϫϭϯ-ϳϵϸϻ-ϼа-џѡѣѥѧѩѫѭѯѱѳѵѷѹѻѽѿҁҋҍҏґғҕҗҙқҝҟҡңҥҧҩҫҭүұҳҵҷҹһҽҿӂӄӆӈӊӌӎ-ӏӑӓӕӗәӛӝӟӡӣӥӧөӫӭӯӱӳӵӷӹӻӽӿԁԃԅԇԉԋԍԏԑԓԕԗԙԛԝԟԡԣա-և؋٠-٩۰-۹߀-߉०-९০-৯৲-৹੦-੯૦-૯૱୦-୯௦-௲௹౦-౯౸-౾೦-೯൦-൵฿๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ៛០-៩៰-៹᠐-᠙᥆-᥏᧐-᧙᭐-᭙᮰-᮹᱀-᱉᱐-᱙ᴀ-ᴫᵢ-ᵷᵹ-ᶚḁḃḅḇḉḋḍḏḑḓḕḗḙḛḝḟḡḣḥḧḩḫḭḯḱḳḵḷḹḻḽḿṁṃṅṇṉṋṍṏṑṓṕṗṙṛṝṟṡṣṥṧṩṫṭṯṱṳṵṷṹṻṽṿẁẃẅẇẉẋẍẏẑẓẕ-ẝẟạảấầẩẫậắằẳẵặẹẻẽếềểễệỉịọỏốồổỗộớờởỡợụủứừửữựỳỵỷỹỻỽỿ-ἇἐ-ἕἠ-ἧἰ-ἷὀ-ὅὐ-ὗὠ-ὧὰ-ώᾀ-ᾇᾐ-ᾗᾠ-ᾧᾰ-ᾴᾶ-ᾷιῂ-ῄῆ-ῇῐ-ΐῖ-ῗῠ-ῧῲ-ῴῶ-ῷ⁰-ⁱ⁴-⁹ⁿ-₉₠-₵ℊℎ-ℏℓℯℴℹℼ-ℽⅆ-ⅉⅎ⅓-ↂↄ-ↈ①-⒛⓪-⓿❶-➓ⰰ-ⱞⱡⱥ-ⱦⱨⱪⱬⱱⱳ-ⱴⱶ-ⱼⲁⲃⲅⲇⲉⲋⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱⲳⲵⲷⲹⲻⲽⲿⳁⳃⳅⳇⳉⳋⳍⳏⳑⳓⳕⳗⳙⳛⳝⳟⳡⳣ-ⳤ⳽ⴀ-ⴥ〇〡-〩〸-〺㆒-㆕㈠-㈩㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꙁꙃꙅꙇꙉꙋꙍꙏꙑꙓꙕꙗꙙꙛꙝꙟꙣꙥꙧꙩꙫꙭꚁꚃꚅꚇꚉꚋꚍꚏꚑꚓꚕꚗꜣꜥꜧꜩꜫꜭꜯ-ꜱꜳꜵꜷꜹꜻꜽꜿꝁꝃꝅꝇꝉꝋꝍꝏꝑꝓꝕꝗꝙꝛꝝꝟꝡꝣꝥꝧꝩꝫꝭꝯꝱ-ꝸꝺꝼꝿꞁꞃꞅꞇꞌ꣐-꣙꤀-꤉꩐-꩙ﬀ-ﬆﬓ-ﬗ﷼﹩＄０-９ａ-ｚ￠-￡￥-￦]|?[?-??-???-????-?]|?[?-??-?]|?[?-??-?]|?[?-?]|?[?-?]|?[?-??-??-??-??-???-??-??-??-??-??-??-??-??-??-??-??-??-??-??-??-??-??-??-??-??-???-?])",regexpUtf:/[^\u0020-\u005E\u0060-\u007E\u00A0-\u02AF\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u0482\u048A-\u0513\u0531-\u0556\u055A-\u055F\u0561-\u0587\u0589-\u058A\u0591-\u05F4\u05D0-\u05EA\u05F0-\u05F4\u0606-\u06DC\u06EE-\u070D\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07C0-\u07EA\u07F6-\u07F9\u0904-\u0939\u0958-\u0961\u0964-\u0970\u097B-\u097F\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B6-\u09B9\u09DC-\u09DD\u09DF-\u09E1\u09E6-\u09FA\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0AE0-\u0AE1\u0AE6-\u0AEF\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B5C-\u0B5D\u0B5F-\u0B61\u0B66-\u0B71\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BE6-\u0BFA\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C66-\u0C6F\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CE0-\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0D66-\u0D6F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DC0-\u0DC6\u0E01-\u0E5B\u0E32-\u0E33\u0E3F-\u0E45\u0E4F-\u0E5B\u0E81-\u0E82\u0E87-\u0E88\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EC0-\u0EC4\u0ED0-\u0ED9\u0EDC-\u0EDD\u0F00-\u0F17\u0F1A-\u0F34\u0F3A-\u0F3D\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCF-\u0FD1\u1000-\u1021\u1023-\u1027\u1029-\u102A\u1040-\u1055\u10A0-\u10C5\u10D0-\u10FB\u1100-\u11FF\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u1399\u13A0-\u13F4\u1401-\u1676\u1681-\u169C\u16A0-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D4-\u17D6\u17D8-\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1800-\u180A\u1810-\u1819\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u1900-\u191C\u1944-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u19D0-\u19D9\u19DE-\u1A16\u1A1E-\u1A1F\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B6A\u1B74-\u1B7C\u1D00-\u1D2B\u1D62-\u1D77\u1D79-\u1D9A\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200E-\u200F\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205F\u2070-\u2071\u2074-\u208E\u20A0-\u20B5\u2100-\u214E\u2153-\u2184\u2190-\u23E7\u2400-\u2426\u2440-\u244A\u2460-\u269C\u2600-\u26FF\u2701-\u2704\u2706-\u2709\u270C-\u2727\u2729-\u274B\u274F-\u2752\u2758-\u275E\u2761-\u2794\u2798-\u27AF\u27B1-\u27BE\u27C0-\u27CA\u27D0-\u27EB\u27F0-\u2B1A\u2B20-\u2B23\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C6C\u2C74-\u2C77\u2C80-\u2CEA\u2CF9-\u2D25\u2D30-\u2D65\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E00-\u2E17\u2E1C-\u2E1D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3006-\u3029\u3036-\u303A\u303C-\u303F\u3041-\u3096\u309B-\u309C\u309F-\u30FB\u3105-\u318F\u3131-\u318E\u3190-\u31B7\u31C0-\u31CF\u31F0-\u321E\u3220-\u3243\u3250-\u32FE\u3300-\u3400\u4DC0-\u9FFF\uA000-\uA014\uA016-\uA48C\uA490-\uA4C6\uA700-\uA716\uA720-\uA721\uA800-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA840-\uA877\uA960-\uA97F\uAC00-\uD7AF\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1F-\uFB36\uFB38-\uFB3C\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3F\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFD\uFE10-\uFE19\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFF01-\uFF3E\uFF40-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC-\uFFFD\u10000-\u1000B\u1000D-\u10026\u10028-\u1003A\u1003C-\u1003D\u1003F-\u1004D\u10050-\u1005D\u10080-\u100FA\u10100-\u10102\u10107-\u10133\u10137-\u1018A\u10300-\u1031E\u10320-\u10323\u10330-\u1034A\u10380-\u1039D\u1039F-\u103C3\u103C8-\u103D5\u10400-\u1049D\u104A0-\u104A9\u10800-\u10805\u1080A-\u10835\u10837-\u10838\u10900-\u10919\u10A10-\u10A13\u10A15-\u10A17\u10A19-\u10A33\u10A40-\u10A47\u10A50-\u10A58\u12000-\u1236E\u12400-\u12462\u12470-\u12473\u1D000-\u1D0F5\u1D100-\u1D126\u1D12A-\u1D164\u1D16A-\u1D16C\u1D183-\u1D184\u1D18C-\u1D1A9\u1D1AE-\u1D1DD\u1D200-\u1D241\u1D300-\u1D356\u1D360-\u1D371\u1D400-\u1D454\u1D456-\u1D49C\u1D49E-\u1D49F\u1D4A5-\u1D4A6\u1D4A9-\u1D4AC\u1D4AE-\u1D4B9\u1D4BD-\u1D4C3\u1D4C5-\u1D505\u1D507-\u1D50A\u1D50D-\u1D514\u1D516-\u1D51C\u1D51E-\u1D539\u1D53B-\u1D53E\u1D540-\u1D544\u1D54A-\u1D550\u1D552-\u1D6A5\u1D6A8-\u1D7CB\u1D7CE-\u1D7FF\u2F800-\u2FA1D]/g},0,0,0,0,0,0,[FBEditor,"ExcludedCompiler"],0));(Ext.cmd.derive("FBEditor.command.InterfaceCommand",Ext.Base,{execute:function(){throw Error("Необходимо реализовать метод command.InterfaceCommand#execute")},unExecute:function(){throw Error("Необходимо реализовать метод command.InterfaceCommand#unExecute")}},0,0,0,0,0,0,[FBEditor.command,"InterfaceCommand"],0));(Ext.cmd.derive("FBEditor.command.AbstractCommand",FBEditor.command.InterfaceCommand,{data:null,constructor:function(b){var a=this;a.data=b},getData:function(){return this.data},getBridgeWindow:function(){return FBEditor.getBridgeWindow()}},1,0,0,0,0,0,[FBEditor.command,"AbstractCommand"],0));(Ext.cmd.derive("FBEditor.command.CreateFolderResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,d=FBEditor.getBridgeWindow(),c=b.data,a=false;Ext.Msg.prompt("Новая папка","Имя:",function(g,f){if(g==="ok"&&!Ext.isEmpty(f)){try{a=d.FBEditor.resource.Manager.createFolder(f)}catch(h){Ext.log({level:"error",msg:h,dump:h});Ext.Msg.show({title:"Ошибка",message:"Невозможно создать папку "+(h?"("+h+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}});return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"CreateFolderResource"],0));(Ext.cmd.derive("FBEditor.command.DeleteResource",FBEditor.command.AbstractCommand,{execute:function(){var c=this,i=FBEditor.getBridgeWindow(),g=c.data,f=i.FBEditor.resource.Manager,b=g.nameResource,d,a=false;try{d=f.getResource(b);if(!d){throw Error("Ресурс "+b+" не найден")}if(d.isFolder){if(f.containsCover(d)){Ext.Msg.confirm("Удаление папки","Данная папка содержит обложку книги. Вы уверены, что хотите её удалить?",function(e){if(e==="yes"){c.deleteResource(b)}})}else{c.deleteResource(b)}}else{if(d.isCover){Ext.Msg.confirm("Удаление ресурса","Данный ресурс является обложкой книги. Вы уверены, что хотите его удалить?",function(e){if(e==="yes"){c.deleteResource(b)}})}else{if(d.elements.length){Ext.Msg.confirm("Удаление ресурса","Данный ресурс используется в теле книги. Вы уверены, что хотите его удалить?",function(e){if(e==="yes"){c.deleteResource(b)}})}else{c.deleteResource(b)}}}}catch(h){Ext.log({level:"error",msg:h,dump:h});Ext.Msg.show({title:"Ошибка",message:"Невозможно удалить ресурс "+(h?"("+h+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){},deleteResource:function(b){var d=FBEditor.getBridgeWindow(),c=d.FBEditor.resource.Manager,a;a=c.deleteResource(b);return a}},0,0,0,0,0,0,[FBEditor.command,"DeleteResource"],0));(Ext.cmd.derive("FBEditor.command.DropFile",FBEditor.command.AbstractCommand,{execute:function(){var d=this,f=d.getData(),e=FBEditor.file.Manager,b,g,c,a;b=f.evt;g=Ext.create("FBEditor.file.event.Drop",b);c=g.getFile();a=e.openFB3(c);g.clear();return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"DropFile"],0));(Ext.cmd.derive("FBEditor.command.LoadResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,e=FBEditor.getBridgeWindow(),d=b.data,c=e.FBEditor.file.Manager,a;a=c.openResource(d.evt).then(function(f){try{FBEditor.resource.Manager.loadResource(f)}catch(g){Ext.log({level:"error",msg:g,dump:g});Ext.Msg.show({title:"Ошибка",message:"Невозможно заугрузить ресурс "+(g?"("+g+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}});return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"LoadResource"],0));(Ext.cmd.derive("FBEditor.command.MoveResource",FBEditor.command.AbstractCommand,{execute:function(){var c=this,h=FBEditor.getBridgeWindow(),d=c.data,b=d.nameResource,g,a=false;try{g=h.FBEditor.resource.TreeManager.getWindow();if(g.show){a=true;g.setNameResource(b);g.show();h.FBEditor.resource.Manager.setSelectFolderFunction()}}catch(f){Ext.log({level:"error",msg:f,dump:f});Ext.Msg.show({title:"Ошибка",message:"Невозможно переместить ресурс "+(f?"("+f+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"MoveResource"],0));(Ext.cmd.derive("FBEditor.command.OpenBody",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var g=this,c=g.getData(),d=g.getBridgeWindow(),a=FBEditor.getBridgeProps(),h=FBEditor.getEditorManager(true),b=d.FBEditor.desc.Manager,i=true,e,f;e=d.Ext.getCmp("panel-main-content");g.activePanelContent=e.getLayout().getActiveItem();e.fireEvent("contentBody");f=a.Ext&&a.Ext.getCmp?a.Ext.getCmp("panel-main-props-card"):null;if(f){g.activePanelProps=f.getLayout().getActiveItem();f.fireEvent("activePanelBody")}return i},unExecute:function(){var e=this,h=e.getData(),c=e.activePanelContent,a=e.activePanelProps,g=e.getBridgeWindow(),f=FBEditor.getBridgeProps(),d,b;d=g.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=f.Ext.getCmp("panel-main-props-card");b.setActiveItem(a)}},0,0,0,0,0,0,[FBEditor.command,"OpenBody"],0));(Ext.cmd.derive("FBEditor.command.OpenDesc",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,g=d.getData(),f=d.getBridgeWindow(),e=FBEditor.getBridgeProps(),a=true,c,b;c=f.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentDesc");b=e.Ext.getCmp("panel-main-props-card");d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelDesc");return a},unExecute:function(){var e=this,h=e.getData(),c=e.activePanelContent,a=e.activePanelProps,g=e.getBridgeWindow(),f=FBEditor.getBridgeProps(),d,b;d=g.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=f.Ext.getCmp("panel-main-props-card");b.setActiveItem(a)}},0,0,0,0,0,0,[FBEditor.command,"OpenDesc"],0));(Ext.cmd.derive("FBEditor.command.OpenFile",FBEditor.command.AbstractCommand,{execute:function(){var d=this,f=d.getData(),e=FBEditor.file.Manager,b,g,c,a;b=f.evt;g=Ext.create("FBEditor.file.event.Button",b);c=g.getFile();a=e.openFB3(c);return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"OpenFile"],0));(Ext.cmd.derive("FBEditor.command.OpenResources",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,g=d.getData(),f=d.getBridgeWindow(),e=FBEditor.getBridgeProps(),a=true,c,b;c=f.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentResources");b=e.Ext.getCmp("panel-main-props-card");if(b){d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelResources")}return a},unExecute:function(){var e=this,h=e.getData(),c=e.activePanelContent,a=e.activePanelProps,g=e.getBridgeWindow(),f=FBEditor.getBridgeProps(),d,b;d=g.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=f.Ext.getCmp("panel-main-props-card");if(b){b.setActiveItem(a)}}},0,0,0,0,0,0,[FBEditor.command,"OpenResources"],0));(Ext.cmd.derive("FBEditor.command.OpenXml",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var g=this,c=g.getData(),d=g.getBridgeWindow(),a=FBEditor.getBridgeProps(),h=FBEditor.getEditorManager(true),b=d.FBEditor.desc.Manager,i=true,e,f;e=d.Ext.getCmp("panel-main-content");g.activePanelContent=e.getLayout().getActiveItem();e.fireEvent("contentXml");f=a.Ext&&a.Ext.getCmp?a.Ext.getCmp("panel-main-props-card"):null;if(f){g.activePanelProps=f.getLayout().getActiveItem();f.fireEvent("activePanelXml")}return i},unExecute:function(){var e=this,h=e.getData(),c=e.activePanelContent,a=e.activePanelProps,g=e.getBridgeWindow(),f=FBEditor.getBridgeProps(),d,b;d=g.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=f.Ext.getCmp("panel-main-props-card");b.setActiveItem(a)}},0,0,0,0,0,0,[FBEditor.command,"OpenXml"],0));(Ext.cmd.derive("FBEditor.command.ReplaceResource",FBEditor.command.AbstractCommand,{execute:function(){var c=this,f=FBEditor.getBridgeWindow(),e=c.data,b=e.nameResource,d=f.FBEditor.file.Manager,a;a=d.openResource(e.evt).then(function(g){try{FBEditor.resource.Manager.reloadResource(b,g)}catch(h){Ext.log({level:"error",msg:h,dump:h});Ext.Msg.show({title:"Ошибка",message:"Невозможно заменить ресурс "+(h?"("+h+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}});return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"ReplaceResource"],0));(Ext.cmd.derive("FBEditor.command.SaveAsFile",FBEditor.command.AbstractCommand,{execute:function(){var c=this,b=c.data.btn,a;try{a=c.save()}catch(d){b.enable();Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка сохранения",message:d.message?d.message:"Невозможно сохранить книгу",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR});a=false}return a},unExecute:function(){},save:function(){var h=this,a=h.data.btn,d=h.data.desc,l=true,b,g,e,k,j,i,f,c;if(!d.isValid()){throw Error("Некорректно заполнено описание книги")}k=FBEditor.resource.Manager.getCover();j=d.getValues();i=FBEditor.desc.Manager.getXml(j);g=Ext.getCmp("main-editor");e=g.getManager();f=e.getXml();b=FBEditor.resource.Manager.getResources();FBEditor.desc.Manager.getMetaXml(j).then(function(m){c={thumb:k,meta:m,books:[{desc:i,bodies:[{content:f,images:b}]}]};FBEditor.file.Manager.saveFB3(c,function(){Ext.log({level:"warn",msg:"Стали доступны методы FileSaver.onwriteend, FileSaver.onabort"});a.enable()})});return l}},0,0,0,0,0,0,[FBEditor.command,"SaveAsFile"],0));(Ext.cmd.derive("FBEditor.command.SaveResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,f=FBEditor.getBridgeWindow(),c=b.data,a=false;try{a=f.FBEditor.resource.Manager.saveResource(c.nameResource)}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveResource"],0));(Ext.cmd.derive("FBEditor.command.SelectCover",FBEditor.command.AbstractCommand,{execute:function(){var b=this,c=b.data,e=FBEditor.getBridgeWindow(),d,a=false;d=c.win;if(d.show){a=true;d.show();e.FBEditor.resource.Manager.setSelectCoverFunction()}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SelectCover"],0));(Ext.cmd.derive("FBEditor.command.SelectImg",FBEditor.command.AbstractCommand,{execute:function(){var d=this,e=d.data,a=false,b=FBEditor.resource.Manager,c,f;function g(j){var i,h=FBEditor.resource.Manager;f.close();i=h.getResource(j.fileId);c.updateData({url:i.url,name:i.name});h.setSelectFunction(null)}c=e.scope;f=e.win;if(f.show){a=true;f.show();b.setSelectFunction(g)}return a},unExecute:function(){return true}},0,0,0,0,0,0,[FBEditor.command,"SelectImg"],0));(Ext.cmd.derive("FBEditor.command.SplitEditor",FBEditor.command.AbstractCommand,{execute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("split");a=true;return a},unExecute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("unsplit");a=true;return a}},0,0,0,0,0,0,[FBEditor.command,"SplitEditor"],0));(Ext.cmd.derive("FBEditor.command.UnsplitEditor",FBEditor.command.AbstractCommand,{execute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("unsplit");a=true;return a},unExecute:function(){var d=this,e=d.data,b=e.btn,c=e.editor,a=false;c.fireEvent("split");a=true;return a}},0,0,0,0,0,0,[FBEditor.command,"UnsplitEditor"],0));(Ext.cmd.derive("FBEditor.converter.desc.Data",FBEditor.converter.AbstractConverter,{singleton:true,toForm:function(b){var a=this,c;c=a.normalize(b);c=a.convertPeriodical(c);c=a.convertTitle(c);c=a.convertRelations(c);c=a.convertClassification(c);c=a.convertWritten(c);c=a.convertDocumentInfo(c);c=a.convertPublishInfo(c);c=a.convertCustomInfo(c);c.lang=c.lang?c.lang:"ru";delete c.xml;return c},convertPeriodical:function(a){var b=a;if(b.periodical){b["periodical-id"]=b.periodical.id;b["periodical-number"]=b.periodical.issue.number;b["periodical-year"]=b.periodical.issue.year;b["periodical-date"]=b.periodical.issue.date?b.periodical.issue.date:"";b["periodical-text"]=b.periodical.issue.text?b.periodical.issue.text:"";b["periodical-issn"]=b.periodical.issn?b.periodical.issn:"";if(b.periodical.title){b["periodical-title-main"]=b.periodical.title.main;b["periodical-title-sub"]=b.periodical.title.sub?b.periodical.title.sub:"";b["periodical-title-alt"]=b.periodical.title.alt?b.periodical.title.alt:""}delete b.periodical}return b},convertTitle:function(b){var a=this,c=b;if(c.title){c["title-main"]=c.title.main?c.title.main:"";c["title-sub"]=c.title.sub?c.title.sub:"";c["title-alt"]=Ext.isString(c.title.alt)?{0:c.title.alt}:c.title.alt;delete c.title}return c},convertRelations:function(e){var c=this,f=e,a=FBEditor.view.form.desc.relations.subject.radio.Radio,b=a.numberGroup-1;if(f["fb3-relations"]){f.relations={"relations-subject":f["fb3-relations"].subject?f["fb3-relations"].subject:"","relations-object":f["fb3-relations"].object?f["fb3-relations"].object:""};f.relations["relations-subject"]=c._convertPropertyName(f.relations["relations-subject"],"relations-subject");f.relations["relations-object"]=c._convertPropertyName(f.relations["relations-object"],"relations-object");Ext.Object.each(f.relations["relations-subject"],function(d,g){g["relations-subject-link-radio-"+b]={};g["relations-subject-link-radio-"+b]["rel-subject-link-"+b]=g["relations-subject-link"];if(g["relations-subject-link"]!=="author"&&g["relations-subject-link"]!=="translator"&&g["relations-subject-link"]!=="publisher"){g["relations-subject-link-list"]=g["relations-subject-link"];g["relations-subject-link-radio-"+b]["rel-subject-link-"+b]="other-list"}delete g["relations-subject-link"];b++});delete f["fb3-relations"]}return f},convertClassification:function(b){var a=this,c=b;if(c["fb3-classification"]){if(c["fb3-classification"]["class"]){c["classification-class-contents"]=c["fb3-classification"]["class"].contents?c["fb3-classification"]["class"].contents:"";c["classification-class-text"]=c["fb3-classification"]["class"].text?c["fb3-classification"]["class"].text:""}c["classification-subject"]=a._convertValToObj(c["fb3-classification"].subject,"classification-subject");c["classification-udc"]=a._convertValToObj(c["fb3-classification"].udc,"classification-udc");c["classification-bbk"]=a._convertValToObj(c["fb3-classification"].bbk,"classification-bbk");if(c["fb3-classification"]["target-audience"]){c["classification-target-audience-text"]=c["fb3-classification"]["target-audience"].text?c["fb3-classification"]["target-audience"].text:"";c["classification-target-audience-education"]=c["fb3-classification"]["target-audience"].education?c["fb3-classification"]["target-audience"].education:"";c["classification-target-audience-age-min"]=c["fb3-classification"]["target-audience"]["age-min"]?c["fb3-classification"]["target-audience"]["age-min"]:"";c["classification-target-audience-age-max"]=c["fb3-classification"]["target-audience"]["age-max"]?c["fb3-classification"]["target-audience"]["age-max"]:""}if(c["fb3-classification"].setting){c["classification-setting-text"]=c["fb3-classification"].setting.text?c["fb3-classification"].setting.text:"";c["classification-setting-country"]=c["fb3-classification"].setting.country?c["fb3-classification"].setting.country:"";c["classification-setting-place"]=c["fb3-classification"].setting.place?c["fb3-classification"].setting.place:"";c["classification-setting-date"]=c["fb3-classification"].setting.date?c["fb3-classification"].setting.date:"";c["classification-setting-age"]=c["fb3-classification"].setting.age?c["fb3-classification"].setting.age:"";c["classification-setting-date-from"]=c["fb3-classification"].setting["date-from"]?c["fb3-classification"].setting["date-from"]:"";c["classification-setting-date-to"]=c["fb3-classification"].setting["date-to"]?c["fb3-classification"].setting["date-to"]:""}delete c["fb3-classification"]}return c},convertWritten:function(a){var b=a;if(b.written){b["written-lang"]=b.written.lang?b.written.lang:"";if(b.written.date){b["written-date-value"]=b.written.date.value?b.written.date.value:"";b["written-date-text"]=b.written.date.text?b.written.date.text:""}if(b.written["date-public"]){b["written-date-public-value"]=b.written["date-public"].value?b.written.date.value:"";b["written-date-public-text"]=b.written["date-public"].text?b.written.date.text:""}b["written-country"]=b.written.country?b.written.country:"";b["written-date-translation"]=b.written["date-translation"]?b.written["date-translation"]:"";delete b.written}if(b.translated){b["translated-value"]=b.translated.value?b.translated.value:"";b["translated-text"]=b.translated.text?b.translated.text:"";delete b.translated}return b},convertDocumentInfo:function(c){var a=this,e=c,b;if(e["document-info"]){if(e["document-info"].isbn){e["document-info-isbn"]=e["document-info"].isbn[0]?e["document-info"].isbn:{0:e["document-info"].isbn}}b=Ext.Date.format(new Date(),"Y-m-d")+"T"+Ext.Date.format(new Date(),"H:i:s");e["document-info"].created=e["document-info"].created?e["document-info"].created:b;e["document-info"].updated=e["document-info"].updated?e["document-info"].updated:b;e["document-info-created-date"]=e["document-info"].created.split("T")[0];e["document-info-created-time"]=e["document-info"].created.split("T")[1];e["document-info-updated-date"]=e["document-info"].updated.split("T")[0];e["document-info-updated-time"]=e["document-info"].updated.split("T")[1];e["document-info-program-used"]=e["document-info"]["program-used"]?e["document-info"]["program-used"]:"";e["document-info-src-url"]=e["document-info"]["src-url"]?e["document-info"]["src-url"]:"";e["document-info-ocr"]=e["document-info"].ocr?e["document-info"].ocr:"";e["document-info-editor"]=e["document-info"].editor?e["document-info"].editor:"";delete e["document-info"]}return e},convertPublishInfo:function(e){var c=this,f=e,a=f.xml,b;b=a.match(/<biblio-description>(.*?)<\/biblio-description>/g);if(b){f["paper-publish-info"]=f["paper-publish-info"][0]?f["paper-publish-info"]:{0:f["paper-publish-info"]};Ext.Object.each(f["paper-publish-info"],function(g,h){var d;if(h["biblio-description"]){d=b.shift();h["biblio-description"]=d.replace(/<\/?biblio-description>/g,"")}})}f["paper-publish-info"]=c._convertPropertyName(f["paper-publish-info"],"paper-publish-info");return f},convertCustomInfo:function(b){var a=this,c=b;c["custom-info"]=a._convertPropertyName(c["custom-info"],"custom-info");return c},_convertPropertyName:function(c,a){var e=c,b=a;e=e?e:"";e=e["0"]?e:{"0":e};Ext.Object.each(e,function(d,f){Ext.Object.each(f,function(g,h){if(Ext.isObject(h)&&!h["0"]){Ext.Object.each(h,function(j,i){e[d][b+"-"+g+"-"+j]=i})}else{e[d][b+"-"+g]=h}delete e[d][g]})});return e},_convertValToObj:function(e,a){var f=e,b=a,c;f=f?(Ext.isString(f)?[f]:f):"";c=f?{}:"";Ext.Object.each(f,function(d,g){c[d]={};c[d][b]=g});return c}},0,0,0,0,0,0,[FBEditor.converter.desc,"Data"],0));(Ext.cmd.derive("FBEditor.desc.Manager",Ext.Base,{singleton:true,editorNames:["annotation","history","preamble"],loadingProcess:false,fb3DescId:"",fieldsError:[],toolbar:null,_loadedData:false,launch:function(){},reset:function(){var a=this;a._loadedData=false},getToolbar:function(){var b=this,a=b.toolbar;b.toolbar=a||Ext.create("FBEditor.view.form.desc.editor.toolbar.Toolbar");return b.toolbar},isLoadedData:function(){return this._loadedData},setLoadedData:function(a){this._loadedData=a},loadDataToForm:function(b){var f=this,c=FBEditor.converter.desc.Data,e=Ext.getCmp("panel-main-content"),d=Ext.getCmp("form-desc"),a=f.getEditorNames(),g;g=FBEditor.util.xml.Json.xmlToJson(b);if(!g||!g["fb3-description"]){throw Error("Ошибка в description.xml")}g=g["fb3-description"];f.fb3DescId=g._id;g.xml=b;b=b.replace(/[\n\r\t]/g,"");g=c.toForm(g);f.loadingProcess=true;Ext.each(a,function(h){var j,k,i;i=new RegExp("<"+h+">(.*?)</"+h+">");k=b.match(i);k=k?"<desc:"+h+' xmlns:desc="http://www.fictionbook.org/FictionBook3/description">'+k[1]+"</desc:"+h+">":null;if(k){j=Ext.getCmp("form-desc-"+h);f.createContentEditor(j,k)}});d.fireEvent("loadDesc",g);f.loadingProcess=false},createContentEditor:function(a,d){var b=this,e;function c(h,i){var f,g;i='<?xml version="1.0" encoding="UTF-8"?>'+i;f=h.getBodyEditor();g=f.getManager();g.createContent(i)}if(a.rendered){c(a,d)}else{e=new Promise(function(g,f){a.on("afterrender",function(){g()})});e.then(function(){c(a,d)})}},getNewId:function(){var a=this,b;b=a.generateNewId();return b},getEditorNames:function(){return this.editorNames},getXml:function(a){var d=this,c=Ext.getCmp("form-desc"),b,e;e=a||c.getValues();e={"fb3-description":e};e["fb3-description"]._xmlns="http://www.fictionbook.org/FictionBook3/description";e["fb3-description"]._id=d.fb3DescId;e["fb3-description"]._version="1.0";b=FBEditor.util.xml.Json.jsonToXml(e);b=b.replace(d.getRegexpUtf(),"");b='<?xml version="1.0" encoding="UTF-8"?>'+b;console.log("xml desc",b);return b},getMetaXml:function(b){var f=this,e=Ext.getCmp("form-desc"),h,c,g,a;function d(j){var i=[];Ext.each(j,function(l){var k;if(l._link==="author"){k=l.title?l.title.main:l["last-name"];i.push(k)}});return i.join(", ")}g=b||e.getValues();h=new Promise(function(j,i){f.getNumberRev().then(function(k){a={coreProperties:{__prefix:"cp","_xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","_xmlns:dc":"http://purl.org/dc/elements/1.1/","_xmlns:dcterms":"http://purl.org/dc/terms/","_xmlns:dcmitype":"http://purl.org/dc/dcmitype/","dc:title":g.title.main,"dc:creator":d(g["fb3-relations"].subject),"cp:revision":k,"cp:contentStatus":g["fb3-classification"]["class"]?g["fb3-classification"]["class"]._contents:"","cp:category":g["fb3-classification"]["class"]?g["fb3-classification"]["class"].__text:"","dcterms:modified":g["document-info"]._updated,"dcterms:created":g["document-info"]._created}};if(g.title&&g.title.sub){a.coreProperties["dc:subject"]=g.title.sub}if(g.annotation){a.coreProperties["dc:description"]=Ext.util.Format.stripTags(g.annotation)}console.log("save meta",a);c=FBEditor.util.xml.Json.jsonToXml(a);c='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+c;j(c)})});return h},generateNewId:function(){var a;a=Ext.data.identifier.Uuid.Global.generate();return a},getRegexpUtf:function(){var a;a=FBEditor.ExcludedCompiler.regexpUtf;return a},setLoading:function(c){var a=this,b;b=new Promise(function(f,e){var d=Ext.getCmp("panel-empty"),g=Ext.getCmp("panel-main-content");if(!d||!d.rendered){Ext.defer(function(){f(a.setLoading(c))},500)}g.fireEvent("contentEmpty");c=c||"Загрузка описания...";d.setMessage(c);f()});return b},clearLoading:function(){var a=Ext.getCmp("panel-main-content");a.fireEvent("contentDesc")},getNumberRev:function(){var a=this,b=FBEditor.file.Manager,c;if(b.fb3file){c=new Promise(function(e,d){b.fb3file.getStructure().then(function(f){return f.getMeta()}).then(function(g){var f;f=g.revision?Number(g.revision.__text):0;f=Ext.isNumber(f)?f+1:1;e(f)})})}else{c=Promise.resolve(0)}return c}},0,0,0,0,0,0,[FBEditor.desc,"Manager"],0));(Ext.cmd.derive("FBEditor.editor.CreateContent",Ext.Base,{content:null,constructor:function(d){var c=this,b,e,a;e=function(h,f,g){return FBEditor.editor.Factory.createElement(h,f,g)};a=function(f){return FBEditor.editor.Factory.createElementText(f)};b=new Function("ce, ct","var a = "+d+"; return a;");c.content=b(e,a)},getContent:function(){return this.content}},1,0,0,0,0,0,[FBEditor.editor,"CreateContent"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCommand",FBEditor.command.InterfaceCommand,{data:null,syncButtons:true,constructor:function(b){var a=this;a.data=b||{}},getData:function(){return this.data},getHistory:function(b){var a,c;a=b.getEditor();c=a.getHistory();return c},verifyElement:function(e,a){var f=this,d=e.getManager(),g=d.getSchema(),c,b;if(!e||e.isText||e.isUndefined||e.isStyleHolder&&e.isEmpty()){return true}b=d.getContent().getXml(true);c={el:e,debug:a,syncButtons:f.syncButtons};g.validXml({xml:b,callback:f.verifyResult,scope:f,scopeData:c})},beforeUnExecute:function(){var a;a=Promise.resolve(true);return a},optimizeEqualIntersectEls:function(b){var c=this,d=c.getData(),f=true,a=[],e;while(f){f=false;if(e=c.joinEqualSibling(b)){a.push({type:"join",map:e})}if(e=c.removeEqualInner(b)){a.push({type:"remove",map:e});f=true}}d.optimizeQueue=a.length?a:null},unOptimizeEqualIntersectEls:function(b){var c=this,d=c.getData(),a=d.optimizeQueue.reverse();Ext.each(a,function(e){switch(e.type){case"remove":c.unRemoveEqualInner(e.map);break;case"join":c.unJoinEqualSibling(e.map,b);break}});delete d.optimizeQueue},joinEqualSibling:function(c,a){var d=this,e=d.getData(),g=e.viewportId,b={},f;if(c.isStyleFormat&&c.next()&&c.getName()===c.next().getName()){f={el:c,next:c.next(),child:[]};b.next=c.next();b.first=b.next.first();while(b.first){f.child.push(b.first);c.add(b.first,g);b.first=b.next.first()}c.parent.remove(b.next,g);a=a||{};a[c.elementId]=a[c.elementId]||[];a[c.elementId].push(f);a=d.joinEqualSibling(c,a)}c.each(function(h){a=d.joinEqualSibling(h,a)});return a},unJoinEqualSibling:function(i,c){var g=this,f=g.getData(),h=f.viewportId,e={},b={},a,d;if(c.isStyleFormat&&i[c.elementId]){a=i[c.elementId][i[c.elementId].length-1];e.old=a.next;d=e.old.getNodeHelper();b.old=d.getNode(h);if(!b.old.parentNode){if(e.next=c.next()){c.parent.insertBefore(e.old,e.next,h)}else{c.parent.add(e.old,h)}}e.child=a.child.shift();e.old.add(e.child,h);if(!a.child.length){i[c.elementId].pop()}if(!i[c.elementId].length){delete i[c.elementId]}g.unJoinEqualSibling(i,c)}c.each(function(j){g.unJoinEqualSibling(i,j)})},removeEqualInner:function(b,e){var c=this,d=c.getData(),g=d.viewportId,a={},f;if(b.isStyleFormat&&b.hasParentName(b.getName())){f={el:b,child:[]};while(a.first=b.first()){b.parent.insertBefore(a.first,b,g);f.child.push(a.first)}b.parent.remove(b,g);e=e||[];e.push(f)}b.each(function(h){e=c.removeEqualInner(h,e)});return e},unRemoveEqualInner:function(e){var b=this,c=b.getData(),d=c.viewportId,a={};Ext.each(e,function(f){a.el=f.el;a.parent=a.el.parent;a.first=f.child[0];a.parent.insertBefore(a.el,a.first,d);Ext.each(f.child,function(g){a.el.add(g,d)})})},verifyResult:function(d,c){var f=this,e=c.el,g=c.syncButtons,b,a;if(!d){a=e.getXml();f.beforeUnExecute().then(function(){f.unExecute();Ext.log({msg:"Полученная структура элемента не соответствует схеме:"+a,level:"info"});throw Error("Действие команды отменено для "+e.getName())},function(){})}b=e.getManager();if(g){b.syncButtons()}if(b.updateTree){b.updateTree()}}},1,0,0,0,0,0,[FBEditor.editor.command,"AbstractCommand"],0));(Ext.cmd.derive("FBEditor.editor.cutproxy.CutProxy",Ext.Base,{manager:null,html:null,clipboardData:null,constructor:function(c){var b=this,a=c.e;b.manager=c.manager;b.clipboardData=Ext.create("FBEditor.util.ClipboardData",a)},setData:function(a){var b=this,c=b.clipboardData;c.setHtml(a)}},1,0,0,0,0,0,[FBEditor.editor.cutproxy,"CutProxy"],0));(Ext.cmd.derive("FBEditor.editor.command.CutCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),i=g.e,b=window.getSelection(),k=false,a={},f={},c,d,h,j;try{h=b.getRangeAt(0);if(h.collapsed){return false}a.common=h.commonAncestorContainer;f.common=a.common.getElement();f.p=f.common.getStyleHolder();d=f.common.getManager();c=d.getRangeXml();j=g.proxy||Ext.create("FBEditor.editor.cutproxy.CutProxy",{e:i,manager:d});j.setData(c);if(f.p){f.p.fireEvent("keyDownDelete")}else{f.common.fireEvent("keyDownDelete")}k=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});l.getHistory(f.parent).removeNext()}d.setSuspendEvent(false);return k},unExecute:function(){var j=this,f=j.getData(),a={},e={},i=false,g=FBEditor.editor.Factory,b=FBEditor.resource.Manager.getPaste(),c,d,h}},0,0,0,0,0,0,[FBEditor.editor.command,"CutCommand"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.dom.SpanProxy",Ext.Base,{statics:{getImplementation:function(c){var b=this,a;a=b.self||Ext.create("FBEditor.editor.pasteproxy.dom.SpanProxy",c);a.node=c.node;a.domProxy=c.domProxy;b.self=a;return a},self:null},mapStyleSpan:{"font-weight":{bold:"strong"},"font-style":{italic:"em"},"text-decoration":{underline:"underline","none underline":"underline"},"letter-spacing":{pattern:/\d+(\.\d+)?(\w{2})/,el:"spacing"}},node:null,domProxy:null,constructor:function(b){var a=this;a.node=b.node;a.domProxy=b.domProxy},getNewName:function(){var e=this,a=e.mapStyleSpan,c=false,b,d;b=e.getClassStyles();d=e.getStyles();b=Ext.Object.merge(b,d);Ext.Object.each(a,function(f,g){if(b[f]){if(g.pattern){if(g.pattern.test(b[f])){c=g.el;return false}}else{if(g[b[f]]){c=g[b[f]];return false}}}});return c},getStyles:function(){var d=this,c=d.node,b={},a;a=c.getAttribute("style");if(a){a=a.split(/[\s]{0,};[\s]{0,}/);Ext.Array.each(a,function(g){var h,e,f;if(g){h=g.split(/[\s]{0,}:[\s]{0,}/);e=h[0];f=h[1];b[e]=f}})}return b},getClassStyles:function(){var f=this,e=f.node,a=f.domProxy,c=a.css,d={},b;b=e.getAttribute("class");if(b&&c){b=b.split(/[ ]+/);Ext.Array.each(b,function(g){if(g){if(c[g]){d=Ext.Object.merge(d,Ext.clone(c[g][0]))}g="span."+g;if(c[g]){d=Ext.Object.merge(d,Ext.clone(c[g][0]))}}})}return d}},1,0,0,0,0,0,[FBEditor.editor.pasteproxy.dom,"SpanProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.DomProxy",Ext.Base,{altNames:{em:["i","em"],strong:["b","strong"],underline:["u","underline"]},dom:null,css:null,pasteProxy:null,constructor:function(b){var a=this;a.dom=b.dom;a.pasteProxy=b.pasteProxy},getElement:function(){var c=this,d=c.dom,a,b;c.createCss();a=d.querySelector("fb3-body")||d.querySelector("body");b=c.createElement(a);return b},createCss:function(){var b=this,c=b.dom,a;a=c.querySelectorAll("style");Ext.Array.each(a,function(d){b.parseStyle(d.innerHTML)})},parseStyle:function(e){var f=this,b=f.css||{},d,h,g,c,a;e=e.replace(/<!--|-->/g,"");e=e.replace(/[\s]{0,}\/\*(.*?)\*\/[\s]{0,}/g,"");e=e.replace(/[\n]+/g,"");c=/[\s\n]{0,}(.*?)[\s\n]{0,}\{[\s\n]{0,}(.*?)[\s\n]{0,}\}/gm;while(a=c.exec(e)){d=a[1];h=a[2];h=h.split(/[\s]{0,};[\s]{0,}/);g={};Ext.Array.each(h,function(k){var l,i,j;if(k){l=k.split(/[\s]{0,}:[\s]{0,}/);i=l[0];j=l[1];g[i]=j}});b[d]=b[d]||[];b[d].push(g)}Ext.log({level:"info",msg:"STYLES",dump:b});f.css=b},createElement:function(e,j){var l=this,k=l.pasteProxy,g=k.manager,i=g.getFactory(),f=g.getSchema(),h={},a,b,d,c;j=j||i.createElement("body");b=e.nodeName.toLowerCase();if(e.nodeType===Node.TEXT_NODE&&e.nodeValue.trim()){d=l.cleanText(e);if(d){c=i.createElementText(d)}}else{if(b==="span"){b=l.convertSpan(e)}b=l.getNameElement(b);a=f.elements[b];if(a){h=l.getAttributes(e,a);c=i.createElement(b,h)}else{c=j}if(e.childNodes.length){Ext.Array.each(e.childNodes,function(n){var m;m=l.createElement(n,c);if(m&&!m.equal(c)){c.add(m)}})}}return c},getAttributes:function(c,a){var b={};Ext.Array.each(c.attributes,function(e){var d=e.name,f=e.value;switch(d){case"xlink:href":d="href";break;case"id":d=/^[_a-z0-9][0-9a-z._-]*$/i.test(f)?d:null}if(d&&Ext.isObject(a.attributes[e.name])&&f){b[d]=f}});return b},convertSpan:function(d){var c=this,a,b;a=FBEditor.editor.pasteproxy.dom.SpanProxy.getImplementation({node:d,domProxy:c});b=a.getNewName();return b},cleanText:function(c){var a=c.nodeValue,b=FBEditor.ExcludedCompiler.regexpUtf;if(c.previousSibling&&c.previousSibling.nodeType===Node.COMMENT_NODE&&c.previousSibling.nodeValue==="EndFragment"){return false}a=a.replace(/[\n\t\s]+/ig," ");a=a.replace(b,"");return a},getNameElement:function(g){var f=this,a=f.pasteProxy,d=a.manager,e=d.getSchema(),c=f.altNames,b;if(g==="span"){return false}else{if(g==="fb3-title"){return"title"}}b=e.elements[g]?g:false;if(!b){Ext.Object.each(c,function(h,i){if(Ext.Array.contains(i,g)){b=h;return false}})}return b}},1,0,0,0,0,0,[FBEditor.editor.pasteproxy,"DomProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.FileProxy",Ext.Base,{file:null,pasteProxy:null,constructor:function(b){var a=this;a.file=b.file;a.pasteProxy=b.pasteProxy},getModel:function(){var f=this,a=f.pasteProxy,e=a.manager,b=e.getFactory(),d={},c;c=f.createResource();d.body=b.createElement("body");d.img=b.createElement("img");d.body.add(d.img);c.addElement(d.img);return d.body},createResource:function(){var d=this,c=d.file,b=FBEditor.resource.Manager,f=b.getPaste(),a,e;e=Ext.create("FBEditor.resource.data.PasteData",{blob:c});a=Ext.create("FBEditor.resource.Resource",e.getData());f.add(a);return a}},1,0,0,0,0,0,[FBEditor.editor.pasteproxy,"FileProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.model.AbstractProxy",Ext.Base,{el:null,modelProxy:null,constructor:function(b){var a=this;a.el=b.el;a.modelProxy=b.modelProxy},normalize:function(){throw Error("Необходима реализация метода FBEditor.editor.pasteproxy.model.AbstractProxy#normalize()")},moveElsToNewHolder:function(f){var g=this,e=f.parent,h=g.modelProxy,a=h.pasteProxy,d=a.manager,b=d.getFactory(),c={};c.p=b.createElement("p");c.next=f;while(c.next){c.temp=c.next.next();if(c.next.isBr){e.remove(c.next);c.next=c.temp;break}if(!c.next.isStyleHolder){c.t=c.p.last();if(c.t&&c.t.isText&&c.next.isText){c.t.setText(c.t.text+c.next.text)}else{c.p.add(c.next)}}c.next=c.temp;if(c.next&&c.next.isEmpty()){e.remove(c.next);c.next=c.next.next()}else{if(c.next&&(c.next.isStyleHolder||!c.next.isStyleType)){c.next=c.next.prev()||c.next;break}}}if(c.p.first()){if(c.next){e.insertBefore(c.p,c.next)}else{e.add(c.p)}}},upChildren:function(){var b=this,a=b.el;a.upChildren()},checkSchema:function(c){var h=this,i=c.parent,b=h.modelProxy,g=b.pasteProxy,f=g.manager,e=f.getSchema(),d=i.getName(),a;a=d==="body"?true:e.isChild(i.getName(),c.getName());return a}},1,0,0,0,0,0,[FBEditor.editor.pasteproxy.model,"AbstractProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.model.ElementProxy",FBEditor.editor.pasteproxy.model.AbstractProxy,{normalize:function(){var d=this,c=d.el,b=c.parent,a=false;if(!d.checkSchema(c)){if(c.first()){d.upChildren()}else{b.remove(c)}a=true}else{if(c.isEmpty()&&!c.first()){b.remove(c);a=true}}return a}},0,0,0,0,0,0,[FBEditor.editor.pasteproxy.model,"ElementProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.model.ImgProxy",FBEditor.editor.pasteproxy.model.AbstractProxy,{normalize:function(){var l=this,d=l.el,i=FBEditor.resource.Manager,e=i.getPaste(),c=l.modelProxy,j=c.pasteProxy,m,f,b,a,h,g,k;if(d.normalized){return false}d.normalized=true;l.normalizeAttributes();b=d.attributes.src;f=d.attributes.id||null;k=f?i.getResource(f):null;if(!k){if(/^data:(image\/.*?);base64,/i.test(b)){a=FBEditor.util.Img.urlDataToBlob(b);h=Ext.create("FBEditor.resource.data.PasteData",{blob:a});k=Ext.create("FBEditor.resource.Resource",h.getData())}if(/^(http|https):/i.test(b)){h=Ext.create("FBEditor.resource.data.ExternalData",{url:b});k=Ext.create("FBEditor.resource.ExternalResource",h.getData())}if(/^file:/i.test(b)){g=j.getImageFromRtf(b);if(g){h=Ext.create("FBEditor.resource.data.PasteData",{blob:g.blob});k=Ext.create("FBEditor.resource.Resource",h.getData())}}}if(k){k.addElement(d);k.setPasteElement(d);e.add(k);if(!d.parent.isStyleType){l.moveElsToNewHolder(d)}}else{d.attributes.src="undefined";Ext.log({level:"warn",msg:"Невозможно создать ресурс из буфера "+b})}return true},normalizeAttributes:function(){var f=this,d=f.el,g=f.modelProxy,a=g.pasteProxy,c=a.manager,e=c.getSchema(),b;b=e.getAttributes("img");Ext.Object.each(b,function(i,k){var l,h,j;if(d.attributes[i]){h=d.attributes[i];l=k.type.pattern;if(/width/i.test(i)){l=l.replace(/d\+/g,"\\d+");j=new RegExp(l);if(!j.test(h)){if(/(\d+)(.\d+)?/.test(h)){h=FBEditor.util.Format.pixelsToMillimeters(h);if(Ext.isNumber(h)){d.attributes[i]=h.toFixed(2)+"mm"}else{delete d.attributes[i]}}else{delete d.attributes[i]}}}}})}},0,0,0,0,0,0,[FBEditor.editor.pasteproxy.model,"ImgProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.model.StyleProxy",FBEditor.editor.pasteproxy.model.AbstractProxy,{normalize:function(){var d=this,c=d.el,b=c.parent,a=true;if(c.isEmpty()){b.remove(c)}else{if(!b.isStyleType){d.moveElsToNewHolder(c)}else{if(c.next()&&c.hisName(c.next().getName())){d.joinNext()}else{if(c.hasParentName(c.getName())){d.upChildren()}else{a=false}}}}return a},joinNext:function(){var c=this,b=c.el,a={};a.next=b.next();a.first=a.next.first();while(a.first){b.add(a.first);a.first=a.next.first()}b.parent.remove(a.next)}},0,0,0,0,0,0,[FBEditor.editor.pasteproxy.model,"StyleProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.model.TextProxy",FBEditor.editor.pasteproxy.model.AbstractProxy,{normalize:function(){var c=this,b=c.el,a=false;if(b.next()&&b.next().isText){b.text=b.text+b.next().text;b.parent.remove(b.next());a=true}if(!b.parent.isStyleType){c.moveElsToNewHolder(b);a=true}return a}},0,0,0,0,0,0,[FBEditor.editor.pasteproxy.model,"TextProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.ModelProxy",Ext.Base,{el:null,pasteProxy:null,constructor:function(b){var a=this;a.el=b.el;a.pasteProxy=b.pasteProxy},getModel:function(){var b=this,a=b.el;b.normalizeElement(a);return a},normalizeElement:function(a){var b=this;if(a){a.each(function(c){b.normalizeStyle(c);b.normalizeText(c);b.normalizeList(c);b.normalizeImg(c);b.normalizeElement(c);b.normalizeEl(c)})}},normalizeEl:function(d){var e=this,c=d.parent,a,b;if(!d.isText&&!d.isBr){b=Ext.create("FBEditor.editor.pasteproxy.model.ElementProxy",{el:d,modelProxy:e});a=b.normalize()}if(a){e.normalizeElement(c)}},normalizeStyle:function(d){var e=this,c=d.parent,a=false,b;if(d.isStyleType&&!d.isStyleHolder){b=Ext.create("FBEditor.editor.pasteproxy.model.StyleProxy",{el:d,modelProxy:e});a=b.normalize()}if(a){e.normalizeElement(c)}},normalizeText:function(d){var e=this,c=d.parent,a=false,b;if(d.isText){b=Ext.create("FBEditor.editor.pasteproxy.model.TextProxy",{el:d,modelProxy:e});a=b.normalize()}if(a){e.normalizeElement(c)}},normalizeList:function(b){var i=this,j=b.parent,h=i.pasteProxy,d=h.manager,g=d.getFactory(),c=d.getSchema(),e={},f=false,a;if(j.isLiHolder){a=c.isChild(j.getName(),b.getName());if(!a){e.li=g.createElement("li");while(b.first()){e.li.add(b.first())}j.replace(e.li,b);f=true}}if(f){i.normalizeElement(j)}},normalizeImg:function(b){var c=this,a;if(b.isImg){a=Ext.create("FBEditor.editor.pasteproxy.model.ImgProxy",{el:b,modelProxy:c});a.normalize()}}},1,0,0,0,0,0,[FBEditor.editor.pasteproxy,"ModelProxy"],0));(Ext.cmd.derive("FBEditor.editor.pasteproxy.PasteProxy",Ext.Base,{manager:null,model:null,html:null,fileProxy:false,clipboardData:null,constructor:function(g){var e=this,a=g.e,d=g.html,b=a.clipboardData.items,c=FBEditor.resource.Manager,f=c.getPaste();e.manager=g.manager;e.clipboardData=Ext.create("FBEditor.util.ClipboardData",a);if(b.length===1&&b[0]&&b[0].kind==="file"){e.createModelFromFile(b[0].getAsFile())}else{if(!d){d=e.clipboardData.getHtml();if(!d){d=e.clipboardData.getText();d=e.convertTextToHtml(d)}else{d=d.replace(/\n+|\t+/g," ")}}e.createModel(d);e.html=d}f.save()},getModel:function(){return this.model},getCreateModel:function(){var c=this,b=FBEditor.resource.Manager,d=b.getPaste(),a;a=c.html?c.createModel(c.html):c.createModelFromFile();d.save();return a},getImageFromRtf:function(e){var c=this,b=c.clipboardData,d=null,a;a=b.getImagesFromRtf();if(a){Ext.each(a,function(f){if(f.src===e){d=f;return false}})}return d},createModelFromFile:function(b){var c=this,d=c.fileProxy,a;console.log("ВСТАВКА ИЗОБРАЖЕНИЯ",b);d=d||Ext.create("FBEditor.editor.pasteproxy.FileProxy",{file:b,pasteProxy:c});a=d.getModel();if(!a){return false}console.log(a.getXml());c.model=a;c.fileProxy=d;return a},createModel:function(c){var e=this,h=new DOMParser(),f,b,g,d,a;f=h.parseFromString(c,"text/html");console.log("--- [1] ВСТАВКА: ИСХОДНЫЙ HTML ---");console.log(f);b=Ext.create("FBEditor.editor.pasteproxy.DomProxy",{dom:f,pasteProxy:e});d=b.getElement();console.log("--- [2] ВСТАВКА: ПРОМЕЖУТОЧНАЯ МОДЕЛЬ ---");console.log(d.getXml());g=Ext.create("FBEditor.editor.pasteproxy.ModelProxy",{el:d,pasteProxy:e});a=g.getModel();console.log("--- [3] ВСТАВКА: ИТОГОВАЯ МОДЕЛЬ ---");console.log(a.getXml());console.log("--- КОНЕЦ ВСТАВКИ ---");e.model=d;return d},convertTextToHtml:function(b){var a;a=b.replace(/^(.*?)$/gim,"<p>$1</p>");return a}},1,0,0,0,0,0,[FBEditor.editor.pasteproxy,"PasteProxy"],0));(Ext.cmd.derive("FBEditor.editor.command.PasteCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),i=g.e,b=window.getSelection(),k=false,a={},f={},d={},m={},c,h,j;try{h=b.getRangeAt(0);a.node=h.startContainer;f.node=a.node.getElement();f.p=f.node.getStyleHolder();if(!h.collapsed){f.p.removeRangeNodes()}if(g.saveRange){f.node=g.saveRange.startNode.getElement();c=f.node.getManager();c.setCursor(g.saveRange)}h=b.getRangeAt(0);d={start:h.startOffset,end:h.endOffset};g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,collapsed:h.collapsed,offset:d};a.node=h.startContainer;f.node=a.node.getElement();c=f.node.getManager();c.setSuspendEvent(true);g.viewportId=a.node.viewportId;j=g.proxy||Ext.create("FBEditor.editor.pasteproxy.PasteProxy",{e:i,manager:c});f.fragment=g.proxy?j.getCreateModel():j.getModel();g.proxy=j;f.fragP=f.fragment.first();if(!f.fragP){return true}l.checkPasteIntoEl(f);if(f.fragP.isStyleHolder&&f.fragment.children.length===1&&!f.node.isEmpty()){f.next=f.fragP.first();while(f.next){f.temp=f.next.next();f.fragment.add(f.next);f.next=f.temp}f.fragment.remove(f.fragP)}a.fragment=f.fragment.getNode(g.viewportId);if(f.node.isEmpty()){f.fragP=f.fragment.first();a.needEmpty=true;if(f.fragP&&f.fragP.isBlock()){while(!f.node.isStyleHolder){a.node=a.node.parentNode;f.node=a.node.getElement()}}else{a.node=c.getDeepFirst(a.node);f.node=a.node.getElement()}}else{f.fragF=f.fragment.first();if(!f.fragF.isImg&&(f.fragF.isStyleHolder||!f.fragF.isStyleType&&!f.fragF.isText)){while(!f.node.isStyleHolder){a.node=a.node.parentNode;f.node=a.node.getElement()}m.isEnd=c.isLastNode(a.node,h.startContainer)&&h.startContainer.nodeValue.length===d.start;m.isStart=c.isFirstNode(a.node,h.startContainer)&&d.start===0}else{a.node=h.startContainer;f.node=a.node.getElement();m.isEnd=f.node.text.length===d.start;m.isStart=d.start===0}if(m.isStart){}else{if(m.isEnd){if(a.node.nextSibling){a.node=a.node.nextSibling}else{a.parent=a.node.parentNode;f.parent=a.parent.getElement();f.node=c.createEmptyElement();a.node=f.node.getNode(g.viewportId);f.parent.add(f.node);a.parent.appendChild(a.node)}}else{a.needJoin=true;a.container=h.startContainer;a.common=a.node.parentNode;f.common=a.common.getElement();a.node=c.splitNode(f,a,d.start);f.common.removeEmptyText()}}}a.parent=a.node.parentNode;f.parent=a.parent.getElement();a.fragmentFirst=a.fragment.firstChild;a.fragmentLast=a.fragment.lastChild;f.fragmentFirst=a.fragmentFirst.getElement();f.fragmentLast=a.fragmentLast.getElement();a.first=a.fragment.firstChild;f.first=a.first.getElement();while(a.first){f.first=a.first.getElement();f.parent.insertBefore(f.first,f.node);a.parent.insertBefore(a.first,a.node);a.first=a.fragment.firstChild}a.prev=a.fragmentFirst.previousSibling;f.prev=a.prev?a.prev.getElement():null;a.next=a.fragmentLast.nextSibling;f.next=a.next?a.next.getElement():null;if(f.prev&&f.prev.isText&&f.next&&f.next.isText&&f.fragmentFirst.isText&&f.fragmentFirst.equal(f.fragmentLast)){a.needReplaceText=f.prev.text+f.next.text;a.cursor=a.prev;d.cursor=f.prev.text.length+f.fragmentFirst.text.length;f.textValue=f.prev.text+f.fragmentFirst.text+f.next.text;f.prev.setText(f.textValue);a.prev.nodeValue=f.textValue;f.parent.remove(f.fragmentFirst);a.parent.removeChild(a.fragmentFirst);f.parent.remove(f.next);a.parent.removeChild(a.next);f.next=null}else{if(f.prev&&f.prev.isText&&f.fragmentFirst.isText){a.needSplitFirst=true;f.textValue=f.prev.text+f.fragmentFirst.text;f.prev.setText(f.textValue);a.prev.nodeValue=f.textValue;f.parent.remove(f.fragmentFirst);a.parent.removeChild(a.fragmentFirst);a.cursor=a.fragmentLast.parentNode?c.getDeepLast(a.fragmentLast):a.prev}}if(f.next&&f.next.isText&&f.fragmentLast.isText){a.needSplitLast=true;f.textValue=f.fragmentLast.text+f.next.text;f.next.setText(f.textValue);a.next.nodeValue=f.textValue;f.parent.remove(f.fragmentLast);a.parent.removeChild(a.fragmentLast);a.cursor=a.next;d.cursor=f.fragmentLast.text.length}if(f.node.isEmpty()){f.parent.remove(f.node);a.parent.removeChild(a.node)}f.parent.sync(g.viewportId);c.setSuspendEvent(false);a.cursor=a.cursor||c.getDeepLast(a.fragmentLast);d.cursor=d.cursor?d.cursor:(a.cursor.nodeValue?a.cursor.nodeValue.length:0);c.setCursor({startNode:a.cursor,startOffset:d.cursor});g.nodes=a;g.els=f;l.verifyElement(f.parent);k=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});l.getHistory(f.parent).removeNext()}c.setSuspendEvent(false);return k},unExecute:function(){var l=this,g=l.getData(),a={},f={},k=false,h=FBEditor.editor.Factory,b=FBEditor.resource.Manager.getPaste(),c,d,i;try{i=g.range;a=g.nodes;f=g.els;a.cursor=i.start;d=f.parent.getManager();d.setSuspendEvent(true);c=f.fragmentFirst.getNodeHelper();a.fragmentFirst=c.getNode(g.viewportId);console.log("undo paste",a,f,i);if(a.needReplaceText){f.prev.setText(a.needReplaceText);a.prev.nodeValue=a.needReplaceText;a.cursor=a.prev;f.prev.sync(g.viewportId)}else{if(a.needSplitFirst){f.startTextValue=f.prev.text.substring(0,i.offset.start);f.endTextValue=f.prev.text.substring(i.offset.start);f.t=h.createElementText(f.startTextValue);a.t=f.t.getNode(g.viewportId);a.fragmentFirst=a.prev;f.fragmentFirst=f.prev;f.fragmentFirst.setText(f.endTextValue);a.fragmentFirst.nodeValue=f.endTextValue;f.parent.insertBefore(f.t,f.fragmentFirst);a.parent.insertBefore(a.t,a.fragmentFirst);a.cursor=a.t}if(a.needSplitLast){f.startTextValue=f.next.text.substring(0,i.offset.cursor);f.endTextValue=f.next.text.substring(i.offset.cursor);f.fragmentLast=h.createElementText(f.startTextValue);a.fragmentLast=f.fragmentLast.getNode(g.viewportId);f.next.setText(f.endTextValue);a.next.nodeValue=f.endTextValue;f.parent.insertBefore(f.fragmentLast,f.next);a.parent.insertBefore(a.fragmentLast,a.next)}a.next=a.fragmentFirst;f.next=a.next.getElement();while(f.next&&!f.next.equal(f.fragmentLast)){a.buf=a.next.nextSibling;f.parent.remove(f.next);a.parent.removeChild(a.next);a.next=a.buf;f.next=a.next?a.next.getElement():null}if(f.next){f.parent.remove(f.next);a.parent.removeChild(a.next)}if(a.needJoin){d.joinNode(a.node)}if(a.needEmpty){f.parent.add(f.node);a.parent.appendChild(a.node)}f.parent.sync(g.viewportId)}d.setSuspendEvent(true);g.saveRange={startNode:a.cursor,startOffset:i.offset.start};d.setCursor(g.saveRange);b.remove();k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(f.parent).remove()}d.setSuspendEvent(false);return k},checkPasteIntoEl:function(a){var b=this;a.fragment.each(function(c){if(a.node.hasParentName("div")&&c.hisName("div")){c.upChildren()}})}},0,0,0,0,0,0,[FBEditor.editor.command,"PasteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.RemoveNodesCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var m=this,i=m.getData(),l=false,g={},a={},f={},n={},c={},b=window.getSelection(),h=FBEditor.editor.Factory,d,j;try{if(i.saveRange){g.node=i.saveRange.startNode.getElement();d=g.node.getManager();d.setCursor(i.saveRange)}j=b.getRangeAt(0);if(j.collapsed){throw Error("Отсутствует выделение")}a.common=j.commonAncestorContainer;g.common=a.common.getElement();d=g.common.getManager();d.setSuspendEvent(true);i.viewportId=a.common.viewportId;f={start:j.startOffset,end:j.endOffset};i.range={common:j.commonAncestorContainer,start:j.startContainer,end:j.endContainer,parentStart:j.commonAncestorContainer.parentNode,collapsed:j.collapsed,offset:f};console.log("remove nodes ",i.range);a.first=j.startContainer;g.first=a.first.getElement();g.commonId=g.common.elementId;while(g.first&&g.first.parent.elementId!==g.commonId){a.first=g.isRoot?a.first.firstChild:a.first.parentNode;g.first=a.first?a.first.getElement():null}a.last=j.endContainer;g.last=a.last.getElement();while(g.last&&g.last.parent.elementId!==g.commonId){a.last=g.isRoot?a.last.lastChild:a.last.parentNode;g.last=a.last?a.last.getElement():null}n.isStart=g.first.isStartRange(j);n.isEnd=g.last.isEndRange(j);i.range.pos=n;if(!n.isStart){a.container=j.startContainer;a.start=d.splitNode(g,a,f.start)}else{a.start=a.first}if(!n.isEnd){a.container=j.endContainer;a.end=d.splitNode(g,a,f.end);a.cursor=a.end;a.startCursor=0;a.end=a.end.previousSibling}else{a.end=a.last;if(a.start.previousSibling){a.cursor=d.getDeepFirst(a.start.previousSibling);a.startCursor=a.cursor.nodeValue?a.cursor.nodeValue.length:0}}g.start=a.start.getElement();g.end=a.end.getElement();a.parent=a.common;g.parent=g.common;g.removed=[];a.removed=[];a.next=a.start;g.next=a.next.getElement();while(g.next&&!g.next.equal(g.end)){g.removed.push(g.next);a.removed.push(a.next);a.buf=a.next.nextSibling;g.parent.remove(g.next);a.parent.removeChild(a.next);a.next=a.buf;g.next=a.next?a.next.getElement():null}a.nextCursor=a.next.nextSibling?a.next.nextSibling:null;g.removed.push(g.next);a.removed.push(a.next);g.parent.remove(g.next);a.parent.removeChild(a.next);a.first=a.parent.firstChild;if(!a.first){g.isEmpty=true;g.p=d.createEmptyP();g.newEl=g.p;if(g.parent.isRoot&&!g.parent.isDesc){g.s=h.createElement("section");g.s.add(g.p);g.newEl=g.s}a.newEl=g.newEl.getNode(i.viewportId);g.parent.add(g.newEl);a.parent.appendChild(a.newEl);a.cursor=d.getDeepFirst(a.newEl);a.startCursor=0}g.parent.sync(i.viewportId);d.setSuspendEvent(false);d.setCursor({startNode:a.cursor,startOffset:a.startCursor});i.nodes=a;i.els=g;m.verifyElement(g.parent);l=true}catch(k){Ext.log({level:"warn",msg:k,dump:k});console.log("nodes",a);m.getHistory(g.parent).removeNext()}d.setSuspendEvent(false);return l},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;b=h.nodes;d=h.els;c=d.parent.getManager();c.setSuspendEvent(true);console.log("undo remove nodes ",h,b);if(d.isEmpty){d.parent.remove(d.newEl);b.parent.removeChild(b.newEl);b.nextCursor=null}Ext.Array.each(b.removed,function(e){if(b.nextCursor){d.nextCursor=b.nextCursor.getElement();d.parent.insertBefore(e.getElement(),d.nextCursor);b.parent.insertBefore(e,b.nextCursor)}else{d.parent.add(e.getElement());b.parent.appendChild(e)}});if(!a.pos.isStart){b.prev=b.removed[0].previousSibling;c.joinNode(b.removed[0]);c.removeEmptyNodes(b.prev)}if(!a.pos.isEnd){c.joinNode(b.nextCursor);c.removeEmptyNodes(b.removed[b.removed.length-1])}d.parent.sync(h.viewportId);c.suspendEvent=false;h.saveRange={startNode:a.start,endNode:a.end,startOffset:a.offset.start,endOffset:a.offset.end};h.nodes=b;f=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command,"RemoveNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractElementController",Ext.Base,{el:null,createFromRange:false,constructor:function(a){this.el=a},onCreateElement:function(h,f){var e=this,b={},d={},a,g,c;b.focus=h?h.focusNode:null;d.focus=b.focus?b.focus.getElement():null;a=d.focus&&e.createFromRange&&(!h.getRangeAt(0).collapsed||d.focus.isImg);if(a){e.createRangeElement(h,f)}else{b.node=e.getNodeVerify(h,f);if(b.node){c=e.getNameElement();g=Ext.create("FBEditor.editor.command."+c+".CreateCommand",{node:b.node,sel:h,opts:f});if(g.execute()){d.el=b.node.getElement();e.getHistory(d.el).add(g)}}}},createRangeElement:function(h,f){var e=this,a={},d={},c,b,g;f=f||{};if(e.checkRangeVerify(h)){a.focus=h?h.focusNode:null;d.focus=a.focus?a.focus.getElement():null;f.focus=a.focus;b=e.getNameElement();c=d.focus.isImg?"CreateRangeObjectCommand":"CreateRangeCommand";c="FBEditor.editor.command."+b+"."+c;g=Ext.create(c,{sel:h,opts:f});if(g.execute()){d.el=h.getRangeAt(0).startContainer.getElement();e.getHistory(d.el).add(g)}}},onInsertElement:function(d,f){var c=this,e,a,b;f=f||false;b=d.getElement();a=b.getName();if(!f){e=Ext.create("FBEditor.editor.command."+a+".SplitCommand",{node:d})}else{e=Ext.create("FBEditor.editor.command."+a+".CreateCommand",{prevNode:d})}if(e.execute()){c.getHistory(b).add(e)}},onSplitElement:function(d,g){var j=this,h=FBEditor.editor.Factory,f={},c={},e,b,i,a,k;g=g||false;c.node=d;f.node=c.node.getElement();e=f.node.getManager();if(f.node.splittable){f.root=f.node.getRoot();c.parent=c.node.parentNode;f.parent=c.parent.getElement();b=f.node.getName();f.newEl=h.createElement(b);f.newEl.createScaffold();k=f.parent.getChildPosition(f.node)+1;f.parent.children.splice(k,0,f.newEl);i=f.root.getXml(true);f.parent.children.splice(k,1);a=e.getSchema();a.validXml({xml:i,callback:function(l){if(l){f.node.fireEvent("insertElement",c.node,g)}},scope:j})}else{c.node=c.node.parentNode;f.node=c.node.getElement?c.node.getElement():null;if(f.node&&!f.node.isRoot){f.node.fireEvent("splitElement",c.node,g)}}},onKeyUp:function(g){var f=this,d,c,a,b;g.stopPropagation();d=f.getFocusNode(g.target);c=d.getElement?d.getElement():null;if(c){b=c.getManager();a=c&&c.controller?c.controller:f;switch(g.keyCode){case Ext.event.Event.UP:return a.onKeyUpUp(g);case Ext.event.Event.DOWN:return a.onKeyUpDown(g);default:return a.onKeyUpDefault(g)}}return false},onKeyUpDefault:function(a){},onKeyUpUp:function(a){},onKeyUpDown:function(a){},onKeyPress:function(a){},onKeyPressDefault:function(a){},onKeyDown:function(f){var d=this,c,b,a;f.stopPropagation();c=d.getFocusNode(f.target);b=c.getElement?c.getElement():null;if(b){a=b&&b.controller?b.controller:d;switch(f.keyCode){case Ext.event.Event.ENTER:if(f.ctrlKey){return a.onKeyDownCtrlEnter(f)}else{if(f.shiftKey){return a.onKeyDownDefault(f)}}return a.onKeyDownEnter(f);case Ext.event.Event.DELETE:return a.onKeyDownDelete(f);case Ext.event.Event.BACKSPACE:return a.onKeyDownBackspace(f);case Ext.event.Event.LEFT:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlLeft(f)}else{if(f.shiftKey){return a.onKeyDownShiftLeft(f)}}return a.onKeyDownLeft(f);case Ext.event.Event.UP:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlUp(f)}else{if(f.shiftKey){return a.onKeyDownShiftUp(f)}}return a.onKeyDownUp(f);case Ext.event.Event.RIGHT:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlRight(f)}else{if(f.shiftKey){return a.onKeyDownShiftRight(f)}}return a.onKeyDownRight(f);case Ext.event.Event.DOWN:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlDown(f)}else{if(f.shiftKey){return a.onKeyDownShiftDown(f)}}return a.onKeyDownDown(f);case Ext.event.Event.Z:if(f.ctrlKey&&f.shiftKey){return a.onKeyDownCtrlShiftZ(f)}else{if(f.ctrlKey){return a.onKeyDownCtrlZ(f)}}return false;case Ext.event.Event.A:if(f.ctrlKey){return a.onKeyDownCtrlA(f)}return false;case Ext.event.Event.HOME:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlHome(f)}else{if(f.ctrlKey){return a.onKeyDownCtrlHome(f)}}return false;case Ext.event.Event.END:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlEnd(f)}else{if(f.ctrlKey){return a.onKeyDownCtrlEnd(f)}}return false;case Ext.event.Event.X:if(f.ctrlKey){return a.onKeyDownCtrlX(f)}return false;default:return a.onKeyDownDefault(f)}}},onKeyDownDefault:function(f){var c=this,d=f.target,a,b;b=d.getElement?d.getElement():null;if(b){a=b.getManager();a.checkHotkeys(f)}},onKeyDownCtrlEnter:function(d){var c=this,b,a;d.preventDefault();b=c.getFocusNode(d.target);a=b.getElement?b.getElement():null;a.fireEvent("splitElement",b,true);return false},onKeyDownEnter:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownEnter",f)}},onKeyDownDelete:function(b){var a=this;if(b){b.preventDefault()}a.removeNodes()},onKeyDownBackspace:function(b){var a=this;b.preventDefault();a.removeNodes()},onKeyDownLeft:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownLeft",f)}},onKeyDownUp:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownUp",f)}},onKeyDownRight:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownRight",f)}},onKeyDownDown:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownDown",f)}},onKeyDownShiftCtrlLeft:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlLeft",f)}},onKeyDownShiftCtrlRight:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlRight",f)}},onKeyDownShiftCtrlUp:function(a){},onKeyDownShiftCtrlDown:function(a){},onKeyDownShiftLeft:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftLeft",f)}},onKeyDownShiftRight:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftRight",f)}},onKeyDownShiftUp:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftUp",f)}},onKeyDownShiftDown:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftDown",f)}},onKeyDownCtrlA:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownCtrlA",f)}},onKeyDownShiftCtrlHome:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlHome",f)}},onKeyDownShiftCtrlEnd:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlEnd",f)}},onKeyDownCtrlHome:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownCtrlHome",f)}},onKeyDownCtrlEnd:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownCtrlEnd",f)}},onKeyDownCtrlZ:function(b){var a=this;b.preventDefault();a.getHistory().undo();return false},onKeyDownCtrlShiftZ:function(b){var a=this;b.preventDefault();a.getHistory().redo();return false},onKeyDownCtrlX:function(a){},onMouseDown:function(a){},onMouseUp:function(f){var d=this,a,c,b;c=d.getFocusNode(f.target);b=c.getElement?c.getElement():null;a=b?b.getManager():null;if(a){b.fireEvent("focus",f)}},onMouseMove:function(a){},onFocus:function(f){var d=this,a,c,b;c=d.getFocusNode(f.target);b=c.getElement?c.getElement():null;a=b?b.getManager():null;a.setFocusElement(c)},onNodeInserted:function(l){var m=this,b=l.relatedNode,f=l.target,n=b.viewportId,i=FBEditor.editor.Factory,g,c,d,h,a,j,k,o;g=b.getElement?b.getElement().getManager():null;if(b.firstChild.nodeName!=="MAIN"&&g&&!g.isSuspendEvent()){l.stopPropagation();j=b.getElement();if(f.nodeType===Node.TEXT_NODE){d=i.createElementText(f.nodeValue)}else{d=i.createElement(f.localName)}f.viewportId=n;d.setNode(f);h=f.nextSibling;a=f.previousSibling;if(h){k=h.getElement();console.log("new insert, nextSibling",h,k);if(k.isBr){j.remove(k,n)}j.insertBefore(d,k)}else{if(a){console.log("new add, previousSibling",a);o=a.getElement();if(o.isBr){j.remove(o,n)}j.add(d)}else{console.log("new add",f,j,d);if(j.isEmpty()){j.removeAll(n)}j.add(d)}}j.sync(n);c=d.getNodeHelper();g.setFocusElement(c.getNode(n))}},onNodeRemoved:function(i){var f=this,d=i.relatedNode,h=i.target,g=d.viewportId,a,c,b;if(h.getElement&&d.firstChild&&d.firstChild.nodeName!=="MAIN"){c=d.getElement();b=h.getElement();a=b.getManager();if(a&&!a.isSuspendEvent()){i.stopPropagation();console.log("DOMNodeRemoved:",h,d.outerHTML);c.remove(b);c.sync(g)}}},onDrop:function(a){a.preventDefault()},onScroll:function(a){},removeNodes:function(){var a=this,b;b=Ext.create("FBEditor.editor.command.RemoveNodesCommand");if(b.execute()){a.getHistory().add(b)}},getElement:function(){return this.el},getNameElement:function(){var a=this;return a.getElement().getName()},getNodeVerify:function(e,b){var k=this,h={},d={},f,j,a,c,i,g;e=e||window.getSelection();i=e.getRangeAt(0);d.node=i.endContainer;h.node=d.node.getElement();d.node=h.node.isText||h.node.hisName(f.emptyElement)?d.node.parentNode:d.node;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();g=k.getNameElementsVerify(d);f=h.node.getManager();a=f.getSchema();c=h.parent.getName();j=a.verify(c,g)?d.node:false;return j},getNameElementsVerify:function(b){var f=this,e={},d,a,c;c=f.getNameElement();b.node=b.parent.getElement().xmlTag===c?b.parent:b.node;b.parent=b.node.parentNode;e.parent=b.parent.getElement();d=e.parent.getManager();a=d.getNamesElements(e.parent);a.unshift(c);return a},getFocusNode:function(e){var c=this,d=window.getSelection(),b=e,a;a=d&&d.rangeCount?d.getRangeAt(0):null;if(a&&b.nodeName!=="IMG"){b=a.commonAncestorContainer.nodeType===Node.TEXT_NODE?a.commonAncestorContainer.parentNode:a.commonAncestorContainer}return b},getHistory:function(a){var c=this,b=a||c.getElement(),d;d=b.getHistory();return d},enableAllEditable:function(){var b=this,a={};a.pp=document.querySelectorAll(".el-styleholder[contenteditable=false]");Ext.Array.each(a.pp,function(c){c.setAttribute("contenteditable",true)})},convertTextToHtml:function(b){var a;a=b.replace(/^(.*?)$/gim,"<p>$1</p>");return a}},1,0,0,0,0,0,[FBEditor.editor.element,"AbstractElementController"],0));(Ext.cmd.derive("FBEditor.editor.helper.element.Node",Ext.Base,{selectCls:"mode-select",el:null,constructor:function(a){var b=this;b.el=a},getNode:function(d){var c=this,a=c.el,b=null;if(a.nodes){d=d||c.getViewportId();b=d&&a.nodes[d]?a.nodes[d]:Ext.Object.getValues(a.nodes)[0]}else{if(d){b=a.getNode(d)}}return b},getXY:function(m,c){var j=this,g=c,d=j.el,e=j.getNode(m),f=d.getManager(),b={},a,l,k;k={};if(d.isText){a=d.getMapCoords();g=g>d.getText().length?d.getText().length:g;if(!a){b.chars=[];b.fragment=document.createDocumentFragment();b.wrap=document.createElement("span");for(var h=0;h<d.text.length;h++){b.span=document.createElement("span");b.t=document.createTextNode(d.text[h]);b.span.appendChild(b.t);b.wrap.appendChild(b.span);b.chars.push(b.span)}b.fragment.appendChild(b.wrap);f.setSuspendEvent(true);b.parent=e.parentNode;b.parent.insertBefore(b.fragment,e);e.nodeValue="";a=[];for(h=0;h<d.text.length;h++){b.cur=b.chars[h];l=b.cur.getBoundingClientRect();k={x:l.left+Math.round((l.right-l.left)/2),y:l.top,w:l.right-l.left,h:l.bottom-l.top};a.push(k);d.setMapCoords(a)}b.cur=b.wrap.lastChild;l=b.cur.getBoundingClientRect();k={x:l.right,y:l.top,w:l.right-l.left,h:l.bottom-l.top};a.push(k);b.parent.removeChild(b.wrap);e.nodeValue=d.convertSpaces(d.text);f.setSuspendEvent(false)}k=a[g]}else{l=e.firstChild&&e.firstChild.getBoundingClientRect?e.firstChild.getBoundingClientRect():e.getBoundingClientRect();k={x:l.left,y:l.top,w:l.right-l.left,h:l.bottom-l.top}}return k},setNodeValue:function(c){var b=this,a=b.el;if(a.isText){Ext.Object.each(a.nodes,function(e,d){d.nodeValue=c})}},splitNode:function(h){var g=this,e=g.el,f=g.getNode(h),d=e.children,a={},c=e.getManager();if(d.length){e.each(function(i){i.getNodeHelper().splitNode(h)})}else{if(e.isText){a.fragment=document.createDocumentFragment();a.wrap=document.createElement("span");for(var b=0;b<e.text.length;b++){a.span=document.createElement("span");a.span.setAttribute("data-offset",b);a.span.getTextElement=function(){return e};a.t=document.createTextNode(e.text[b]);a.span.appendChild(a.t);a.wrap.appendChild(a.span)}a.span=document.createElement("span");a.span.setAttribute("data-offset",b);a.span.getTextElement=function(){return e};a.t=document.createTextNode(" ");a.span.appendChild(a.t);a.wrap.appendChild(a.span);a.fragment.appendChild(a.wrap);c.setSuspendEvent(true);a.parent=f.parentNode;a.parent.insertBefore(a.fragment,f);f.nodeValue="";c.setSuspendEvent(false)}}},joinNode:function(g){var f=this,d=f.el,e=f.getNode(g),c=d.children,a={},b=d.getManager();if(c.length){d.each(function(h){h.getNodeHelper().joinNode(g)})}else{if(d.isText){b.setSuspendEvent(true);a.parent=e.parentNode;a.wrap=e.previousSibling;a.parent.removeChild(a.wrap);e.nodeValue=d.convertSpaces(d.getText());b.setSuspendEvent(false)}}},scrollBy:function(a,e,d){var c=this,b;b=c.getNode(d);b.scrollLeft+=a;b.scrollTop+=e},selectNode:function(e,h){var g=this,d=g.el,a=d.cls,b=g.selectCls,f,c;f=g.getNode(h);if(f){c=new RegExp(b);if(!c.test(a)&&e){a=a+" "+b;f.setAttribute("class",a)}if(c.test(a)&&!e){a=a.replace(" "+b,"");f.setAttribute("class",a)}d.cls=a}},clearSelectNodes:function(){var b=this,a=b.el;Ext.Object.each(a.nodes,function(e,d){var c;c=d.querySelectorAll("."+b.selectCls);Ext.Array.each(c,function(f){var g=f.getElement(),h;h=g.getNodeHelper();h.selectNode(false,e)})})},getViewportId:function(){var b=window.getSelection(),c,a;a=b.rangeCount?b.getRangeAt(0):null;c=a?a.startContainer.viewportId:false;return c}},1,0,0,0,0,0,[FBEditor.editor.helper.element,"Node"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractElement",Ext.Base,{statics:{countSpaces:1},controllerClass:"FBEditor.editor.element.AbstractElementController",controllerClassWebkit:"",selectionClass:"",selectionClassWebKit:"",splittable:false,htmlTag:"",xmlTag:"",style:"",baseCls:"",cls:"",children:[],parent:null,marker:null,attributes:{},elementId:"",prefixId:"editor-el",showedOnTree:true,treePath:"",xml:null,constructor:function(a,b){var d=this,c=[];b=b||d.children;d.elementId=Ext.id({prefix:d.prefixId});Ext.Array.each(b,function(e){e.parent=d;if(e.isMarker){d.marker=e}else{c.push(e)}});d.children=c;d.attributes=Ext.clone(a)||d.attributes;d.attributes=d.defaultAttributes?Ext.applyIf(a,d.defaultAttributes):d.attributes;d.createController()},equal:function(b){var c=this,a;a=b.elementId===c.elementId;return a},add:function(b,e){var d=this,a={},c;if(b.parent){b.parent.remove(b,e)}b.parent=d;if(b.isMarker){d.marker=b}else{d.children.push(b)}if(e){c=d.getNodeHelper();a.node=c.getNode(e);c=b.getNodeHelper();a.child=c.getNode(e);a.node.appendChild(a.child)}},insertBefore:function(d,a,g){var f=this,c=f.children,h=f.getChildPosition(a),b={},e;if(d.parent){d.parent.remove(d)}d.parent=f;c.splice(h,0,d);f.children=c;if(g){e=f.getNodeHelper();b.node=e.getNode(g);e=d.getNodeHelper();b.child=e.getNode(g);e=a.getNodeHelper();b.next=e.getNode(g);b.node.insertBefore(b.child,b.next)}},replace:function(c,g,f){var e=this,b=e.children,h=e.getChildPosition(g),a={},d;if(c.parent){c.parent.remove(c)}c.parent=e;e.remove(g);b.splice(h,1,c);e.children=b;if(f){d=e.getNodeHelper();a.node=d.getNode(f);d=c.getNodeHelper();a.newChild=d.getNode(f);d=g.getNodeHelper();a.oldChild=d.getNode(f);a.node.replaceChild(a.newChild,a.oldChild)}},remove:function(b,j){var h=this,c=h.children,a={},d,i,f;if(b){i=h.getChildPosition(b);if(i!==null){if(!f){b.clear()}c.splice(i,1);h.children=c;if(j){d=h.getNodeHelper();a.node=d.getNode(j);d=b.getNodeHelper();a.child=d.getNode(j);try{if(a.node.contains(a.child)){a.node.removeChild(a.child)}}catch(g){Ext.log({msg:"Попытка удалить узел непринадлежащий элементу",level:"warn",dump:g})}}}}},upChildren:function(c){var b=this,a=b.parent;while(b.first()){a.insertBefore(b.first(),b,c)}a.remove(b,c)},first:function(){var b=this,a=b.children,c;c=a.length?a[0]:null;return c},last:function(){var c=this,a=c.children,b;b=a.length?a[a.length-1]:null;return b},prev:function(){var c=this,a=c.parent,d,b;if(!a){return null}d=a.getChildPosition(c);b=(d-1)>=0&&a.children[d-1]?a.children[d-1]:null;return b},next:function(){var c=this,b=c.parent,d,a;if(!b){return null}d=b.getChildPosition(c);a=b.children[d+1]?b.children[d+1]:null;return a},removeAll:function(d){var c=this,a=c.children,b;while(a.length){b=a[0];c.remove(b,d)}},each:function(b,a){var c=this,e=0,d;a=a||c;while(e<c.children.length){d=c.children[e];e++;b.apply(a,[d,e-1])}},clear:function(){},fireEvent:function(b,g,d){var c=this,a=c.controller,f;f="on"+Ext.String.capitalize(b);a[f].apply(a,[g,d])},clone:function(g){var f=this,e=f.children,c=FBEditor.editor.Factory,a,h,b,d;b=g&&g.ignoredText?true:false;d=g&&g.ignoredDeep?true:false;if(f.isText&&b){return null}a=f.attributes;h=f.isText?c.createElementText(f.text):c.createElement(f.getName(),a);if(!d){Ext.Array.each(e,function(j){var i=j.clone(g);if(i){h.add(i)}})}return h},setNode:function(b){var a=this;a.setStyleHtml();b=a.setAttributesHtml(b);b=a.setEvents(b);b.getElement=function(){return a};a.createSelection(b);a.nodes=a.nodes||{};a.nodes[b.viewportId]=b;if(a.isHide){a.hide()}},getNode:function(g){var f=this,d=f.children,a=f.htmlTag,b,c,e;e=document.createElement(a);e.viewportId=g;f.setNode(e);if(f.marker){c=document.createElement("div");c.getElement=function(){return f};e.appendChild(f.marker.getNode(g));e.appendChild(c)}if(d&&d.length){b=c?c:e;Ext.Array.each(d,function(h){b.appendChild(h.getNode(g))});if(c){e.appendChild(b)}}return e},removeNodes:function(c){var b=this,a=b.children;delete b.nodes[c];if(a.length){Ext.Array.each(a,function(d){d.removeNodes(c)})}},getXml:function(m,l){var k=this,b=k.children,o=k.xmlTag,n=FBEditor.editor.element.AbstractElement,j="",g="",d="",a="",c={},f,i;if(k.xml){return k.xml}if(!l){c=k.getFormatOptionsXml();d=c.spacesBefore;a=c.spacesAfter;j=c.nlBefore;g=c.nlAfter}try{i=k.getAttributesXml(m)}catch(h){i=""}f=d+"<"+o;f+=i?" "+i:"";if(b&&b.length){n.countSpaces++;f+=">"+j;Ext.Array.each(b,function(e){f+=e.getXml(m,l)});f+=a+"</"+o+">"+g;n.countSpaces--}else{f+="/>"+g}return f},setXml:function(a){this.xml=a},getData:function(){var d=this,c=d.getNodeHelper(),b,e,a;b=c.getNode();a=d.isText||d.isBr?d.parent:d;e={el:a,elementName:a.getName().toUpperCase()};Ext.Object.each(a.attributes,function(f,g){e[f]=g?g:""});return e},sync:function(d){var c=this,b=c.getManager(),a;b.setSuspendEvent(true);Ext.Object.each(c.nodes,function(f,e){if(f!==d){a=c.getNode(f);e.parentNode.replaceChild(a,e)}});b.setSuspendEvent(false)},update:function(f,e){var d=this,b={},a=null,c=/^marker-/;e=e||{};if(f.marker&&f.marker==="true"){a={};delete f.marker}Ext.Object.each(f,function(g,h){if(!c.test(g)){b[g]=h}else{if(a){a[g.replace(c,"")]=h}}});if(a){if(d.marker){d.updateMarker(a)}else{d.createMarker(a)}}else{d.removeMarker()}d.attributes=d.defaultAttributes?Ext.clone(d.defaultAttributes):{};Ext.Object.each(b,function(g,h){if(h){d.attributes[g]=h}});if(!e.withoutView){d.updateView()}},updateView:function(){var d=this,b=d.getManager(),c=d.getNodeHelper(),f,e,a;if(d.nodes){d.style="";b.setSuspendEvent(true);f=Ext.Object.getKeys(d.nodes)[0];e=c.getNode(f);a=d.getNode(f);e.parentNode.replaceChild(a,e);d.sync(f);b.setSuspendEvent(false)}},updateUnprintedSymbols:function(){var a=this;a.each(function(b){b.updateUnprintedSymbols()})},setEvents:function(a){return a},getName:function(){return this.xmlTag},getRoot:function(){var b=this,a=b.isRoot?b:b.parent;while(a&&!a.isRoot){a=a.parent}return a},getBlock:function(){var a=this;while(a.isStyleType||a.isText||a.isImg){a=a.parent}return a},getChildrenCountByProp:function(a,b){var d=this,c=0;Ext.Array.each(d.children,function(e){if(e[a]===b){c++}});return c},getChildPosition:function(b){var c=this,a=c.children,d=null;if(!b.elementId){console.error(b);return null}Ext.Array.each(a,function(f,e){if(b.elementId===f.elementId){d=e;return false}});return d},getSelection:function(a){return this.selection[a]},getEditor:function(){var c=this,a,b;a=c.getRoot();b=a&&a.getEditor?a.getEditor():null;return b},getHistory:function(){var b=this,a=b.getEditor(),c;c=a.getHistory();return c},getManager:function(){var d=this,a,c,b;b=d.getEditor?d.getEditor():null;a=b?b.getManager():null;return a},getNodeHelper:function(){return this.nodeHelper||this.createNodeHelper()},createScaffold:function(){var b=this,a={};a.node=b;return a},getText:function(b){var a=this,c="";a.each(function(d){c+=d.isText?d.getText():d.getText(b)});c+=b&&c&&a.isStyleHolder?" ":"";return c},getNameTree:function(){var b=this,c=b.first(),a="";if(c&&c.hisName("title")){a+=c.getText(true)}a+="&lt;"+b.xmlTag+"&gt;";return a},removeView:function(){var a=this;Ext.Object.each(a.nodes,function(d,c){var b=c.parentNode;if(b){b.removeChild(c)}});a.nodes={}},hisName:function(a){var c=this,b;b=c.xmlTag===a;return b},hasParentName:function(a){var c=this,b=c.parent;while(b){if(b.hisName(a)){return true}b=b.parent}return false},getParentName:function(a){var c=this,b=c.parent;while(b){if(b.hisName(a)){return b}b=b.parent}return null},getStyleHolder:function(){var b=this,a=b;while(a&&!a.isStyleHolder){a=a.parent?a.parent:null}return a},getDeepFirst:function(){var b=this,a=b;while(a.first()){a=a.first()}return a},getDeepLast:function(){var b=this,a=b;while(a.last()){a=a.last()}return a},getChildrenByName:function(c,b){var d=this,a=[];if(d.hisName(c)){a=Ext.Array.push(a,d)}d.each(function(f){var e;if(f.hisName(c)){a=Ext.Array.push(a,f)}e=f.getChildrenByName(c,b);if(e.length){a=Ext.Array.push(a,e)}});return a},isBlock:function(){var b=this,a;a=b.isStyleHolder||!b.isStyleType&&!b.isCell&&!b.isTr&&!b.isText&&!b.isImg;return a},isEmpty:function(){var a=this;if(!a.children.length){return true}if(a.children.length===1){return a.children[0].isEmpty()}else{return false}},isFirst:function(){var b=this,a;a=b.equal(b.parent.first());return a},isLast:function(){var a=this,b;b=a.equal(a.parent.last());return b},isStartRange:function(b){var d=this,e=d.getText(),c=b.toString(),a;a=(c.indexOf(e)===0)||(e.indexOf(c)===0);return a},isEndRange:function(a){var c=this,e=c.getText(),b=a.toString(),d;d=(b.lastIndexOf(e)===b.length-e.length)||(e.lastIndexOf(b)===e.length-b.length);return d},removeEmptyText:function(c){var b=this,a=b.children,e=0,d;while(e<a.length){d=a[e];if(d.isText&&d.isEmpty()||c&&d.isStyleHolder&&!d.children.length){b.remove(d);d.removeView()}else{d.removeEmptyText(c);e++}}},clearMapCoords:function(){var a=this;a.each(function(b){b.clearMapCoords()})},hide:function(){var b=this,a=b.nodes;b.isHide=true;Ext.Object.each(a,function(c,d){b.styleDisplay=d.style.display;d.style.display="none"})},show:function(){var b=this,a=b.nodes;b.isHide=false;Ext.Object.each(a,function(c,d){d.style.display=b.styleDisplay})},convertToText:function(a){var b=this,d=0,c;while(d<b.children.length){c=b.children[d];if(!c.isStyleType&&!c.isText){c.convertToText(a)}if(c&&(c.isStyleType||c.isText)){if(c.isStyleType){c.removeUndefinedElements()}if(c.children.length){a.add(c)}else{d++}}else{d++}}},removeUndefinedElements:function(){var c=this,a=c.children,d=0,b;while(c.children.length&&d<c.children.length){b=a[d];if(b.isUndefined){c.remove(b)}else{d++}}},getFormatOptionsXml:function(){var a=FBEditor.editor.element.AbstractElement,d=a.countSpaces,b={};try{b.spacesBefore=d?new Array(d).join("  "):"";b.spacesAfter=d?new Array(d).join("  "):""}catch(c){b.spacesBefore="";b.spacesAfter="";a.countSpaces=1}b.nlBefore="\n";b.nlAfter="\n";return b},getAttributesXml:function(b){var c=this,a="";try{Ext.Object.each(c.attributes,function(e,f){a+=e+'="'+f+'" '})}catch(d){a=""}return a.trim()},setStyleHtml:function(){var b=this,a;a=b.style;a+=b.marker?"display: flex":"";return a},setAttributesHtml:function(a){var c=this,b=a;Ext.Object.each(c.attributes,function(d,e){b.setAttribute(d,e)});if(c.style){b.setAttribute("style",c.style)}c.initCls();if(c.cls){b.setAttribute("class",c.cls)}return b},createSelection:function(d){var c=this,a=c.selectionClass,f=c.selectionClassWebKit,b;if(a||f){try{a=Ext.isWebKit&&f?f:a;b=Ext.create(a,d)}catch(g){b=Ext.create(c.selectionClass,d);Ext.log({msg:"Необходимо создать класс "+a,level:"error"})}c.selection=c.selection||{};c.selection[d.viewportId]=b}},createController:function(b){var d=this,g=d.controllerClass,c=d.controllerClassWebkit,a;if(g){try{g=Ext.isWebKit&&c?c:g;a=Ext.create(g,b||this)}catch(f){a=Ext.create(d.controllerClass,b||this);Ext.log({msg:"Необходимо создать класс "+g,level:"error"})}}d.controller=a;return a},initCls:function(){var c=this,b=c.baseCls,a=c.cls;a=b&&a.indexOf(b)===-1?a+" "+b:a;c.cls=a},createNodeHelper:function(){var b=this,a;a=Ext.create("FBEditor.editor.helper.element.Node",b);b.nodeHelper=a;return a},createMarker:function(e){var d=this,a,c,b=FBEditor.editor.Factory;c=b.createElement("img",e);a=b.createElement("marker",{},c);d.add(a)},updateMarker:function(b){var a=this;a.marker.img.update(b,{withoutView:true})},removeMarker:function(){this.marker=null}},1,0,0,0,0,0,[FBEditor.editor.element,"AbstractElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleElementController",FBEditor.editor.element.AbstractElementController,{createFromRange:true,onKeyDownDelete:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("keyDownDelete",c)},onKeyDownBackspace:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("keyDownBackspace",c)},onPaste:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("paste",c)},checkRangeVerify:function(g){var e=this,d={},b={},f=["p","li","subtitle"],c,a;a=g.getRangeAt(0);if(a.collapsed){return false}b.common=a.commonAncestorContainer;d.common=b.common.getElement();if(d.common.elementId===a.startContainer.getElement().elementId){return true}b.firstP=a.startContainer;d.firstP=b.firstP.getElement();while(!Ext.Array.contains(f,d.firstP.xmlTag)){b.firstP=b.firstP.parentNode;d.firstP=b.firstP.getElement()}b.lastP=a.endContainer;d.lastP=b.lastP.getElement();while(!Ext.Array.contains(f,d.lastP.xmlTag)){b.lastP=b.lastP.parentNode;d.lastP=b.lastP.getElement()}c=b.firstP&&b.lastP;return c}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.AbstractStyleElementController",showedOnTree:false,isStyleFormat:true,isStyleType:true,createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.t=a.createElementText("текст");c.add(b.t);return b},getFormatOptionsXml:function(){var d=this,c=d.parent,b=false,a=false,e;e=FBEditor.editor.element.AbstractElement.prototype.getFormatOptionsXml.apply(this,arguments);if(c&&c.children){Ext.Array.each(c.children,function(f){if(f.isText){b=true;return true}})}Ext.Array.each(d.children,function(f){if(f.isText){a=true;return true}});e.spacesBefore=e.spacesBefore&&!b?e.spacesBefore:"";e.spacesAfter=e.spacesAfter&&!a?e.spacesAfter:"";e.nlBefore=a?"":e.nlBefore;e.nlAfter=b?"":e.nlAfter;return e}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.a.AElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.a,"AElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateRangeStyleCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var n=this,i=n.getData(),j=FBEditor.editor.Factory,m=false,h={},a={},g={},o={},c,p,f,d,b,k;try{console.log("create "+n.elementName,i);if(i.saveRange){h.node=i.saveRange.startNode.getElement();d=h.node.getManager();d.setCursor(i.saveRange)}b=i.sel||window.getSelection();k=b.getRangeAt(0);if(k.collapsed){throw Error("Отсутствует выделение")}f=i.opts&&i.opts.attributes?i.opts.attributes:[];a.common=k.commonAncestorContainer;h.common=a.common.getElement();i.viewportId=a.common.viewportId;p=i.viewportId;d=d||h.common.getManager();d.setSuspendEvent(true);g={start:k.startOffset,end:k.endOffset};i.range={common:k.commonAncestorContainer,start:k.startContainer,end:k.endContainer,parentStart:k.startContainer.parentNode,collapsed:k.collapsed,offset:g};i.links={};if(h.common.isText){i.range.oldValue=h.common.getText();h.parent=h.common.parent;c=h.parent.getNodeHelper();a.parent=c.getNode();i.links.parent=a.parent;h.next=h.common.next();h.startValue=h.common.getText(0,g.start);h.selValue=h.common.getText(g.start,g.end);h.endValue=h.common.getText(g.end);if(h.startValue){h.common.setText(h.startValue,p)}else{h.parent.remove(h.common,p)}h.node=j.createElement(n.elementName,f);h=Ext.apply(h,h.node.createScaffold());h.t.setText(h.selValue);a.node=h.node.getNode(p);if(h.next){h.parent.insertBefore(h.node,h.next,p)}else{h.parent.add(h.node,p)}i.links.newNode=a.node;a.cursor=a.node.firstChild;if(h.endValue){h.node=j.createElementText(h.endValue);a.node=h.node.getNode(p);if(h.next){h.parent.insertBefore(h.node,h.next,p)}else{h.parent.add(h.node,p)}}}else{a.pp=[];h.firstP=k.startContainer.getElement();h.firstP=h.firstP.getStyleHolder();c=h.firstP.getNodeHelper();a.firstP=c.getNode(p);h.lastP=k.endContainer.getElement().getStyleHolder();c=h.lastP.getNodeHelper();a.lastP=c.getNode(p);if(!h.firstP.equal(h.lastP)){a.cur=a.firstP;while(!a.cur.nextSibling){a.cur=a.cur.parentNode}a.pp=d.getNodesPP(a.cur.nextSibling,a,h)}o.isStart=h.firstP.isStartRange(k);o.isEnd=h.lastP.isEndRange(k);i.range.pos=o;if(o.isStart){h.startContainer=h.firstP.first();c=h.startContainer.getNodeHelper();a.startContainer=c.getNode(p)}else{a.common=a.firstP;h.common=h.firstP;a.container=k.startContainer;a.startContainer=d.splitNode(h,a,g.start);h.startContainer=a.startContainer.getElement();h.common.removeEmptyText()}a.parentStart=a.startContainer.parentNode;h.parentStart=a.parentStart.getElement();a.endContainer=k.endContainer;h.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;h.parentEnd=a.parentEnd.getElement();if(o.isEnd){a.endContainer=a.lastP.lastChild}else{if(h.endContainer.isText&&h.parentEnd.elementId===h.lastP.elementId&&i.range.offset.end===h.endContainer.text.length){a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer}else{a.common=a.lastP;h.common=h.lastP;a.container=a.endContainer;a.endContainer=d.splitNode(h,a,g.end);h.common.removeEmptyText()}}h.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;h.parentEnd=a.parentEnd.getElement();if(!a.endContainer.firstChild&&!h.endContainer.isText){a.bufRemove=a.endContainer;a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer.previousSibling;h.parentEnd.remove(a.bufRemove.getElement(),p);h.endContainer=a.endContainer.getElement()}h.node=j.createElement(n.elementName,f);a.node=h.node.getNode(p);h.parentStart.insertBefore(h.node,h.startContainer);a.parentStart.insertBefore(a.node,a.startContainer);h.next=h.node.next();while(h.next&&(!h.next.equal(h.endContainer)||o.isEnd)){h.node.add(h.next,p);h.next=h.node.next()}if(!h.parentStart.equal(h.parentEnd)){a.prev=a.endContainer.previousSibling;h.node=j.createElement(n.elementName,f);a.node=h.node.getNode(i.viewportId);a.first=a.parentEnd.firstChild;h.first=a.first.getElement();h.parentEnd.insertBefore(h.node,h.first);a.parentEnd.insertBefore(a.node,a.first);h.next=h.node.next();while(h.next&&(!h.next.equal(h.endContainer)||o.isEnd)){h.node.add(h.next,p);h.next=h.node.next()}}Ext.Array.each(a.pp,function(r){var q={},e={};e.p=r;q.p=e.p.getElement();q.node=j.createElement(n.elementName,f);e.node=q.node.getNode(p);e.first=e.p.firstChild;q.first=e.first.getElement();q.p.insertBefore(q.node,q.first);e.p.insertBefore(e.node,e.first);while(q.next=q.node.next()){q.node.add(q.next,p)}});a.parent=a.parentStart.parentNode;h.parent=a.parent.getElement();a.cursor=o.isEnd?a.endContainer:a.endContainer.previousSibling;h.cursor=a.cursor.getElement();while(h.cursor&&!h.cursor.isText){a.cursor=a.cursor.lastChild;h.cursor=a.cursor?a.cursor.getElement():null}}n.optimizeEqualIntersectEls(h.parent);h.parent.sync(p);d.setSuspendEvent(false);h.focus=a.cursor.parentNode.getElement();d.cashSyncBtn=h.focus.elementId;d.setCursor({withoutSyncButtons:true,startNode:a.cursor,startOffset:a.cursor.nodeValue.length,focusElement:h.focus});i.saveNodes=a;n.verifyElement(h.parent);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});n.getHistory(h.parent).removeNext()}d.setSuspendEvent(false);return m},unExecute:function(){var j=this,d=j.getData(),i=false,c={},a={},f=FBEditor.editor.Factory,b,g,k;try{g=d.range;a=d.saveNodes;k=a.node.viewportId;a.common=g.common;c.common=a.common.getElement();b=c.common.getManager();b.setSuspendEvent(true);console.log("undo create "+j.elementName,d,a);if(d.optimizeQueue){j.unOptimizeEqualIntersectEls(a.parent.getElement())}if(c.common.elementId===g.start.getElement().elementId){a.parent=a.common.parentNode||d.links.parent;c.parent=a.parent.getElement();if(a.common.parentNode){c.common.setText(g.oldValue,k)}else{c.common=f.createElementText(g.oldValue);a.common=c.common.getNode(d.viewportId);a.newNode=d.links.newNode;c.newNode=a.newNode.getElement();c.parent.insertBefore(c.common,c.newNode);a.parent.insertBefore(a.common,a.newNode);g.start=a.common;g.end=a.common}a.next=a.common.nextSibling;c.next=a.next.getElement();c.parent.remove(c.next);a.parent.removeChild(a.next);if(g.offset.end<g.oldValue.length){a.next=a.common.nextSibling;c.next=a.next.getElement();c.parent.remove(c.next);a.parent.removeChild(a.next)}}else{c.firstP=a.firstP.getElement();a.parent=a.startContainer.parentNode;c.parent=a.parent.getElement();a.first=a.parent.firstChild;while(a.first){c.first=a.first.getElement();c.firstP.insertBefore(c.first,c.parent);a.firstP.insertBefore(a.first,a.parent);c.parent.remove(c.first);a.first=a.parent.firstChild}c.firstP.remove(c.parent);a.firstP.removeChild(a.parent);if(g.offset.start){b.joinNode(a.startContainer)}c.lastP=a.lastP.getElement();if(c.firstP.elementId!==c.lastP.elementId){c.lastP=a.lastP.getElement();a.parent=a.lastP.firstChild;c.parent=a.parent.getElement();a.first=a.parent.firstChild;while(a.first){c.first=a.first.getElement();c.lastP.insertBefore(c.first,c.parent);a.lastP.insertBefore(a.first,a.parent);c.parent.remove(c.first);a.first=a.parent.firstChild}c.lastP.remove(c.parent);a.lastP.removeChild(a.parent)}if(g.offset.end<g.end.length){b.joinNode(a.endContainer)}Ext.Array.each(a.pp,function(m){var l={},e={};e.p=m;l.p=e.p.getElement();e.parent=e.p.firstChild;l.parent=e.parent.getElement();e.first=e.parent.firstChild;while(e.first){l.first=e.first.getElement();l.p.add(l.first);e.p.appendChild(e.first);l.parent.remove(l.first);e.first=e.parent.firstChild}l.p.remove(l.parent);e.p.removeChild(e.parent)});c.parent=c.common}c.parent.sync(k);b.setSuspendEvent(false);d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end,focusElement:c.parent};b.setCursor(d.saveRange);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateRangeStyleCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.a.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"a"},0,0,0,0,0,0,[FBEditor.editor.command.a,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractDeleteWrapperCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),k=false,a={},f={},m={},d={},h=FBEditor.editor.Factory,b,n,c,i;try{c=g.opts.manager;i=g.range||c.getRange();g.viewportId=i.start.viewportId;n=g.viewportId;console.log("del wrapper "+l.elementName,i);a.node=i.common;f.node=a.node.getElement();a.parent=a.node.parentNode;f.parent=a.parent.getElement();c.setSuspendEvent(true);if(i.collapsed){while(!f.node.hisName(l.elementName)){a.node=a.node.parentNode;f.node=a.node.getElement();if(f.node.isRoot){return false}}a.parent=a.node.parentNode;f.parent=a.parent.getElement();g.first=a.node.firstChild;g.last=a.node.lastChild;a.first=a.node.firstChild;f.first=a.first?a.first.getElement():null;while(f.first){if(f.node.isLiHolder&&!f.first.isLi){g.first=a.first.nextSibling;f.node.remove(f.first);a.node.removeChild(a.first);i.start=c.getDeepFirst(g.first);i.end=i.start;i.offset.start=0;i.offset.end=0;i.common=i.start}else{f.parent.insertBefore(f.first,f.node);a.parent.insertBefore(a.first,a.node);if(f.first.isLi){f.p=h.createElement("p");a.p=f.p.getNode(g.viewportId);f.parent.insertBefore(f.p,f.first);a.parent.insertBefore(a.p,a.first);if(f.first.elementId===g.first.getElement().elementId){g.first=a.p}if(f.first.elementId===g.last.getElement().elementId){g.last=a.p}a.firstLi=a.first.firstChild;f.firstLi=a.firstLi?a.firstLi.getElement():null;while(f.firstLi){f.p.add(f.firstLi);a.p.appendChild(a.firstLi);a.firstLi=a.first.firstChild;f.firstLi=a.firstLi?a.firstLi.getElement():null}f.parent.remove(f.first);a.parent.removeChild(a.first);f.first=f.p;a.first=a.p}}a.first=a.node.firstChild;f.first=a.first?a.first.getElement():null}f.parent.remove(f.node);a.parent.removeChild(a.node)}else{d=Ext.clone(i.offset);g.range=i;g.links={};f.wrappers=[];g.range.oldValue=f.node.getText();f.parent=f.node.parent;b=f.parent.getNodeHelper();a.parent=b.getNode();g.links.parent=a.parent;f.next=f.parent.next();f.startValue=f.node.getText(0,d.start);f.selValue=f.node.getText(d.start,d.end);f.endValue=f.node.getText(d.end);if(f.node.isText&&f.selValue===f.node.getText()&&!f.node.prev()&&!f.node.next()){f.wrap=f.node.getParentName(l.elementName);f.wrappers.push(f.wrap)}else{a.pp=[];f.firstP=i.start.getElement();f.firstP=f.firstP.getStyleHolder();b=f.firstP.getNodeHelper();a.firstP=b.getNode(n);f.lastP=i.end.getElement().getStyleHolder();b=f.lastP.getNodeHelper();a.lastP=b.getNode(n);if(!f.firstP.equal(f.lastP)){a.cur=a.firstP;while(!a.cur.nextSibling){a.cur=a.cur.parentNode}a.pp=c.getNodesPP(a.cur.nextSibling,a,f);Ext.each(a.pp,function(e){var o;o=e.getElement();f.wrappersPP=Ext.Array.push(f.wrappers,o.getChildrenByName(l.elementName,true))})}m.isStart=f.firstP.isStartRange(i);m.isEnd=f.lastP.isEndRange(i);g.range.pos=m;if(m.isStart){f.startContainer=f.firstP.first();b=f.startContainer.getNodeHelper();a.startContainer=b.getNode(n)}else{a.common=a.firstP;f.common=f.firstP;a.container=i.start;a.startContainer=c.splitNode(f,a,d.start);f.startContainer=a.startContainer.getElement();f.common.removeEmptyText();b=f.startContainer.getDeepFirst().getNodeHelper();i.start=b.getNode(n);i.offset.start=0}a.parentStart=a.startContainer.parentNode;f.parentStart=a.parentStart.getElement();if(f.node.isText){i.end=a.startContainer.firstChild;i.offset.end=d.end=d.end-d.start}a.endContainer=i.end;f.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;f.parentEnd=a.parentEnd.getElement();if(m.isEnd){a.endContainer=a.lastP.lastChild}else{if(f.endContainer.isText&&f.parentEnd.equal(f.lastP)&&g.range.offset.end===f.endContainer.text.length){a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer}else{a.common=a.lastP;f.common=f.lastP;a.container=a.endContainer;a.endContainer=c.splitNode(f,a,d.end);f.common.removeEmptyText()}}f.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;f.parentEnd=a.parentEnd.getElement();if(!a.endContainer.firstChild&&!f.endContainer.isText){a.bufRemove=a.endContainer;a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer.previousSibling;f.parentEnd.remove(a.bufRemove.getElement(),n);f.endContainer=a.endContainer.getElement()}f.next=f.startContainer;while(f.next&&!f.next.equal(f.endContainer)){f.wrappers=Ext.Array.push(f.wrappers,f.next.getChildrenByName(l.elementName,true));f.next=f.next.next()}f.wrappers=f.wrappersPP?Ext.Array.push(f.wrappers,f.wrappersPP):f.wrappers;if(!f.firstP.equal(f.lastP)||m.isEnd){f.next=m.isEnd?f.endContainer:f.lastP.first();while(f.next&&(!f.next.equal(f.endContainer)||m.isEnd)){f.wrappers=Ext.Array.push(f.wrappers,f.next.getChildrenByName(l.elementName,true));f.next=f.next.next()}}}Ext.each(f.wrappers,function(o){var e=[];o.each(function(p){e.push(p)});g.wrappers=g.wrappers||[];g.wrappers.push({el:o,children:e});o.upChildren(n)})}f.parent.sync(g.viewportId);c.setSuspendEvent(false);c.setCursor({withoutSyncButtons:true,startNode:i.start,startOffset:i.offset.start,endNode:i.end,endOffset:i.offset.end,focusElement:i.common.getElement()});g.range=i;g.els=f;g.nodes=a;l.verifyElement(f.parent);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(f.parent).removeNext()}c.setSuspendEvent(false);return k},unExecute:function(){var j=this,d=j.getData(),k=d.viewportId,a={},c={},i=false,f=FBEditor.editor.Factory,b,g;try{g=d.range;c=d.els;a=d.nodes;b=c.node.getManager();b.setSuspendEvent(true);console.log("undo del wrapper "+j.elementName,d,g);if(g.collapsed){a.first=d.first;c.first=a.first.getElement();a.last=d.last;c.last=a.last.getElement();a.node=c.node.getNode(d.viewportId);c.parent.insertBefore(c.node,c.first,k);a.next=a.first;c.next=a.next.getElement();while(c.next.elementId!==c.last.elementId){a.buf=a.next.nextSibling;c.node.add(c.next,k);if(c.node.isLiHolder){c.li=f.createElement("li");a.li=c.li.getNode(d.viewportId);c.node.insertBefore(c.li,c.next,k);a.firstP=a.next.firstChild;c.firstP=a.firstP?a.firstP.getElement():null;while(c.firstP){c.li.add(c.firstP,k);a.firstP=a.next.firstChild;c.firstP=a.firstP?a.firstP.getElement():null}c.node.remove(c.next,k)}a.next=a.buf;c.next=a.next?a.next.getElement():null}c.node.add(c.last,k);if(c.node.isLiHolder){c.li=f.createElement("li");a.li=c.li.getNode(d.viewportId);c.node.insertBefore(c.li,c.last,k);a.firstP=a.last.firstChild;c.firstP=a.firstP?a.firstP.getElement():null;while(c.firstP){c.li.add(c.firstP,k);a.firstP=a.last.firstChild;c.firstP=a.firstP?a.firstP.getElement():null}c.node.remove(c.last,k)}}else{if(d.wrappers){Ext.each(d.wrappers,function(m){var l=m.el,n,e;n=m.children[0];e=n.parent;e.insertBefore(l,n,k);Ext.each(m.children,function(o){l.add(o,k)});j.optimizeEqualIntersectEls(e)});delete d.wrappers}}c.parent.sync(k);b.setSuspendEvent(false);d.saveRange={startNode:g.start,startOffset:g.offset.start,endNode:g.end,endOffset:g.offset.end,focusElement:g.common.getElement()};b.setCursor(d.saveRange);d.range=b.getRange();i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractDeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.a.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"a"},0,0,0,0,0,0,[FBEditor.editor.command.a,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.a.AElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.a.AElementController",htmlTag:"a",xmlTag:"a",cls:"el-a",showedOnTree:false,defaultAttributes:{href:"undefined"},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,e){if(d==="href"&&b){e=e.replace(/&/g,"")}a+=(d==="href"&&!b?"xlink:":"")+d+'="'+e+'" '});a=a.trim();return a},getBlock:function(){return this}},0,0,0,0,0,0,[FBEditor.editor.element.a,"AElement"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var j=this,f=j.getData(),i=false,d={},a={},c,b,g;try{b=f.sel||window.getSelection();g=b.getRangeAt(0);f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,parentStart:g.startContainer.parentNode,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};a.node=f.node||f.prevNode;d.node=a.node.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(!a.node.parentNode){a.parent=f.range.parentStart;d.parent=a.parent.getElement();while(d.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;d.parent=a.parent.getElement()}a.node=a.parent}f.viewportId=a.node.viewportId;j.createElement(d,a);d.parent.sync(f.viewportId);j.setCursor(d,a);f.saveNode=a.node;j.verifyElement(d.parent);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return i},unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{f=d.range;a.node=d.saveNode;c.node=a.node.getElement();b=c.node.getManager();b.setSuspendEvent(true);j=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(j);d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);b.updateTree();return h},createElement:function(b,a){},setCursor:function(c,a){var e=this,g=window.getSelection(),f=e.getData(),h,d,b;b=c.p.getManager();f.oldRange=g.getRangeAt(0);h=f.viewportId;c.cursor=c.p.getDeepFirst();d=c.cursor.getNodeHelper();a.cursor=d.getNode(h);f.saveRange={withoutSyncButtons:true,startNode:a.cursor,startOffset:c.cursor.getText().length};b.setCursor(f.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.annotation.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"annotation",createElement:function(d,c){var e=this,f=e.getData(),b=f.range,a=FBEditor.editor.Factory;d.node=a.createElement(e.elementName);c.parent=c.node.parentNode;c.first=c.parent.firstChild;d.parent=c.parent.getElement();if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Аннотация");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(f.viewportId);if(c.first){c.next=c.first.nextSibling;while(c.next&&(c.first.getElement().isEpigraph||c.first.getElement().isTitle)){c.first=c.next;c.next=c.next.nextSibling}d.first=c.first.getElement();d.parent.insertBefore(d.node,d.first);c.parent.insertBefore(c.node,c.first)}else{d.parent.add(d.node);c.parent.appendChild(c.node)}if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.parentP=c.p.parentNode;c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}e.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();d.parentP=b.parentP.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(b.next){d.next=b.next.getElement();d.parentP.insertBefore(d.p,d.next);b.parentP.insertBefore(b.p,b.next)}else{d.parentP.add(d.p);b.parentP.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);c.setSuspendEvent(false);b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.annotation,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.annotation.AnnotationElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,b){var k=this,h={},d={},c=k.getNameElement(),l=0,f,j,a,i,g;e=e||window.getSelection();i=e.getRangeAt(0);d.node=i.commonAncestorContainer;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();f=h.node.getManager();while(h.parent.isStyleHolder||h.parent.isStyleType){d.node=d.parent;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement()}d.title=d.parent;h.title=d.title.getElement();while(!(h.title.isTitle||h.title.isRoot)){d.title=d.title.parentNode;h.title=d.title.getElement()}if(h.title.isTitle){d.node=d.title;h.node=h.title}else{h.parent=d.parent.getElement();d.node=h.parent.hisName(c)?d.parent:d.node}d.parent=d.node.parentNode;h.parent=d.parent.getElement();d.first=d.parent.firstChild;h.first=d.first?d.first.getElement():null;g=f.getNamesElements(h.parent);while(h.first&&(h.first.isEpigraph||h.first.isTitle)){l++;d.first=d.first.nextSibling;h.first=d.first?d.first.getElement():null}g.splice(l,0,c);a=f.getSchema();c=h.parent.getName();j=a.verify(c,g)?d.node:false;return j}},0,0,0,0,0,0,[FBEditor.editor.element.annotation,"AnnotationElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.annotation.AnnotationElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.annotation.AnnotationElementController",htmlTag:"annotation",xmlTag:"annotation",cls:"el-annotation",createScaffold:function(){var c=this,a=FBEditor.editor.Factory,b={};b.p=a.createElement("p");b.t=a.createElementText("Аннотация");b.p.add(b.t);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.annotation,"AnnotationElement"],0));(Ext.cmd.derive("FBEditor.editor.element.b.BElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.strong.StrongElement")}},1,0,0,0,0,0,[FBEditor.editor.element.b,"BElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractUnboundedElementController",FBEditor.editor.element.AbstractElementController,{createFromRange:true,getNodeVerify:function(g,f){var e=this,d={},b={},c,a;c=e.getNameElement();g=g||window.getSelection();a=g.getRangeAt(0);b.node=a.commonAncestorContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node;return b.node},checkRangeVerify:function(a){return true},getNameElementsVerify:function(b){var f=this,e={},d,a,c;c=f.getNameElement();e.parent=b.parent.getElement();b.node=e.parent.hisName(c)?b.parent:b.node;b.parent=b.node.parentNode;e.node=b.node.getElement();e.parent=b.parent.getElement();d=e.parent.getManager();a=d.getNamesElements(e.parent);a.splice(e.parent.getChildPosition(e.node)+1,0,c);return a}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractUnboundedElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.blockquote.BlockquoteElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.blockquote,"BlockquoteElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractSplitCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var n=this,i=n.getData(),m=false,c={},o={},g={},a={},f={},b=window.getSelection(),h=FBEditor.editor.Factory,p,d,j,k,q;try{if(i.saveRange){g.node=i.startNode.getElement();d=g.node.getManager();d.setCursor(i.saveRange)}j=b.getRangeAt(0);console.log("split",n.elementName);if(!i.node){a.cur=j.startContainer;g.cur=a.cur.getElement();while(g.cur&&!g.cur.hisName(n.elementName)){a.cur=a.cur.parentNode;g.cur=a.cur?a.cur.getElement():null}i.node=a.cur}a.prevNode=i.node;p=i.viewportId=a.prevNode.viewportId;g.prevNode=a.prevNode.getElement();d=g.prevNode.getManager();d.setSuspendEvent(true);f={start:j.startOffset,end:j.endOffset};a.startContainer=j.startContainer;a.endContainer=j.endContainer;g.startContainer=a.startContainer.getElement();g.endContainer=a.endContainer.getElement();k=j.startOffset===0?!d.isFirstNode(i.node,j.startContainer):true;q=g.startContainer.equal(g.endContainer)&&j.collapsed?false:true;q=j.startOffset===0||j.endOffset===j.endContainer.nodeValue.length?!d.isLastNode(i.node,j.endContainer):q;i.range={common:j.commonAncestorContainer,start:j.startContainer,end:j.endContainer,prevParentStart:j.startContainer.parentNode.previousSibling,collapsed:j.collapsed,offset:f,joinStartContainer:k,joinEndContainer:q};if(!j.collapsed){c.start=new RegExp("^"+Ext.String.escapeRegex(j.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(g.startContainer.getText()));c.end=new RegExp(Ext.String.escapeRegex(j.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(g.endContainer.getText())+"$");o.isStart=c.start.test(g.startContainer.getText())||c.start2.test(j.toString());o.isEnd=c.end.test(g.endContainer.getText())||c.end2.test(j.toString())}else{o.isEnd=f.end===i.range.end.nodeValue.length?d.isLastNode(i.node,i.range.end):false;o.isStart=f.start===0?d.isFirstNode(i.node,i.range.start):false}i.range.pos=o;a.container=a.endContainer;a.common=i.node;g.common=i.node.getElement();a.endContainer=d.splitNode(g,a,f.end);g.endContainer=a.endContainer.getElement();if(g.endContainer.isEmpty()&&!g.common.isEmpty()&&a.endContainer.nextSibling){a.next=a.endContainer.nextSibling;g.common.remove(g.endContainer,p);a.endContainer=a.next;g.endContainer=a.endContainer.getElement()}if(g.endContainer.isEmpty()&&!g.common.isEmpty()){g.empty=d.createEmptyElement();g.endContainer.add(g.empty,p)}if(i.range.collapsed){a.startContainer=a.endContainer}else{a.container=a.startContainer;a.startContainer=d.splitNode(g,a,f.start)}g.startContainer=a.startContainer.getElement();g.endContainer=a.endContainer.getElement();g.node=h.createElement(n.elementName);a.parent=a.prevNode.parentNode;g.parent=a.parent.getElement();g.next=g.prevNode.next();g.nextPrevNode=g.next;a.node=g.node.getNode(p);if(g.next){g.parent.insertBefore(g.node,g.next,p)}else{g.parent.add(g.node,p)}n.createElement(a,g);n.moveToCreateElement(a,g);g.parent.sync(p);d.setSuspendEvent(false);a.cursor=a.cursor?a.cursor:a.node;a.cursor=d.getDeepFirst(a.cursor);d.setCursor({startNode:a.cursor});i.saveNodes=a;n.verifyElement(g.parent);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});n.getHistory(g.parent).removeNext()}d.setSuspendEvent(false);return m},unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{f=d.range;a=d.saveNodes;j=a.node.viewportId;console.log("undo split "+i.elementName,f,a);c.node=a.node.getElement();c.prevNode=a.prevNode.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.common=a.common.getElement();c.endContainer=a.endContainer.getElement();b=c.node.getManager();b.setSuspendEvent(true);if(c.prevNode.isEmpty()){c.prevNode.removeAll();a.prevNode.removeChild(a.prevNode.firstChild)}if(c.node.isEmpty()){c.node.removeAll();a.node.removeChild(a.node.firstChild);f.joinStartContainer=false}i.restoreElement(a,c,f);a.first=a.node.firstChild;if(a.first){i.moveNodes(a,c)}a.parent.removeChild(a.node);c.parent.remove(c.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}if(a.empty&&c.endContainer.isEmpty()){c.common.remove(c.endContainer,j)}c.parent.sync(j);b.setSuspendEvent(false);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);b.updateTree();return h},moveNodes:function(a,b){while(a.first){b.first=a.first.getElement();a.prevNode.appendChild(a.first);b.prevNode.add(b.first);a.first=a.node.firstChild}},restoreElement:function(b,c,a){var d=this;if(!a.collapsed){b.next=b.prevNode.nextSibling;b.first=b.next.firstChild;d.moveNodes(b,c);b.parent.removeChild(b.next);c.parent.remove(b.next.getElement())}},createElement:function(b,c){var d=this,e=d.getData(),a=FBEditor.editor.Factory,f;if(!e.range.collapsed){f=e.viewportId;b.next=b.startContainer;c.next=b.next?b.next.getElement():null;b.parentNext=b.next.parentNode;c.parentNext=b.parentNext.getElement();while(c.next&&c.next.elementId!==c.endContainer.elementId){b.buf=b.next.nextSibling;c.node.add(c.next,f);b.next=b.buf;c.next=b.next?b.next.getElement():null}c.node=a.createElement(d.elementName);if(c.nextPrevNode){c.parent.insertBefore(c.node,c.nextPrevNode,f)}else{c.parent.add(c.node,f)}}},moveToCreateElement:function(a,c){var d=this,e=d.getData(),f,b;f=e.viewportId;c.node=a.node.getElement();c.next=c.endContainer;c.parentNext=c.next.next()?c.next.next().parent:null;while(c.next){c.buf=c.next.next();c.node.add(c.next,f);c.next=c.buf}if(c.parentNext&&!c.parentNext.first()){b=c.node.getManager();c.p=b.createEmptyP();c.parentNext.add(c.p,f)}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractSplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateUnboundedCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:null,createElement:function(c,b){var d=this,e=d.getData(),a=FBEditor.editor.Factory;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.node=c.parent.hisName(d.elementName)?b.parent:b.node;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;c.node=a.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(e.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateUnboundedCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateRangeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var m=this,h=m.getData(),l=false,g={},a={},f={},c,b,d,i,j,n;try{if(h.saveRange){g.node=h.saveRange.startNode.getElement();c=g.node.getManager();c.setCursor(h.saveRange)}b=h.sel||window.getSelection();i=b.getRangeAt(0);a.common=i.commonAncestorContainer;g.common=a.common.getElement();c=g.common.getManager();c.setSuspendEvent(true);while(!g.common.splittable){a.common=a.common.parentNode;g.common=a.common.getElement();if(g.common.isRoot){return false}}h.viewportId=a.common.viewportId;d=i.collapsed;f={start:i.startOffset,end:i.endOffset};j=i.startOffset===0?!c.isFirstNode(a.common,i.startContainer):true;n=i.endOffset===i.endContainer.nodeValue.length?!c.isLastNode(a.common,i.endContainer):true;h.range={common:i.commonAncestorContainer,start:i.startContainer,end:i.endContainer,prevParentStart:i.startContainer.parentNode.previousSibling,collapsed:d,offset:f,joinStartContainer:j,joinEndContainer:n};a.startContainer=i.startContainer;a.endContainer=i.endContainer;a.container=a.endContainer;a.endContainer=c.splitNode(g,a,f.end);g.endContainer=a.endContainer.getElement();if(g.endContainer.isEmpty()&&!g.common.isEmpty()&&a.endContainer.previousSibling){a.prev=a.endContainer.previousSibling;g.common.remove(g.endContainer);a.common.removeChild(a.endContainer);a.endContainer=a.prev;a.endContainer=n?a.endContainer.previousSibling:a.endContainer}if(d){a.startContainer=a.endContainer}else{a.container=a.startContainer;a.startContainer=c.splitNode(g,a,f.start)}g.startContainer=a.startContainer.getElement();a.endContainer=a.endContainer.parentNode?a.endContainer:a.startContainer;g.endContainer=a.endContainer.getElement();m.createNewElement(g,a);g.common.sync(h.viewportId);c.setCursor({startNode:a.node.firstChild});h.saveNodes=a;m.verifyElement(g.common);l=true}catch(k){Ext.log({level:"warn",msg:k,dump:k});m.getHistory(g.common).removeNext()}c.setSuspendEvent(false);return l},unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{f=d.range;a=d.saveNodes;j=a.node.viewportId;console.log("undo create range "+i.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);a.first=a.node.firstChild;c.first=a.first.getElement();while(c.first){c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.node.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(j);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);b.updateTree();return h},createNewElement:function(c,b){var d=this,e=d.getData(),a=FBEditor.editor.Factory;c.node=a.createElement(d.elementName);b.node=c.node.getNode(e.viewportId);c.common.insertBefore(c.node,c.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;c.next=b.next.getElement();while(c.next&&c.next.elementId!==c.endContainer.elementId){b.buf=b.next.nextSibling;c.node.add(c.next);b.node.appendChild(b.next);b.next=b.buf;c.next=b.next?b.next.getElement():null}if(c.next&&c.next.elementId===c.endContainer.elementId&&!e.range.joinEndContainer){c.node.add(c.next);b.node.appendChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.blockquote.BlockquoteElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.blockquote.BlockquoteElementController",htmlTag:"blockquote",xmlTag:"blockquote",cls:"el-blockquote",splittable:true,isBlockquote:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Цитата");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.blockquote,"BlockquoteElement"],0));(Ext.cmd.derive("FBEditor.editor.element.body.BodyElement",FBEditor.editor.element.AbstractElement,{htmlTag:"body",xmlTag:"body",isRoot:true,getEditor:function(){return false}},0,0,0,0,0,0,[FBEditor.editor.element.body,"BodyElement"],0));(Ext.cmd.derive("FBEditor.editor.element.br.BrElementController",FBEditor.editor.element.AbstractStyleElementController,{onKeyDownDefault:function(c){var a=this,b;return true},isSpecialKey:function(a){var b=a.keyCode,c=Ext.event.Event;return a.ctrlKey||(b>=33&&b<=40)||b===c.RETURN||b===c.TAB||b===c.ESC||b===91||b===144||b===145||b===c.CONTEXT_MENU||(b===c.BACKSPACE)||(b>=112&&b<=123)||(b>=16&&b<=20)||(b>=44&&b<=46)}},0,0,0,0,0,0,[FBEditor.editor.element.br,"BrElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.br.CreateEmptyTextCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,g=k.getData(),j=false,a={},d={},b=window.getSelection(),l,c,f,h;try{h=b.getRangeAt(0);l=g.viewportId=h.startContainer.viewportId;console.log("replace br to empty text",h);a.node=h.startContainer;d.node=a.node.getElement();a.parent=a.node.parentNode;d.parent=a.parent.getElement();c=d.node.getManager();c.setSuspendEvent(true);c.setSuspendEvent(false);g.els=d;j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(d.parent).removeNext()}return j},unExecute:function(){return false}},0,0,0,0,0,0,[FBEditor.editor.command.br,"CreateEmptyTextCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.br.BrElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.br.BrElementController",htmlTag:"br",xmlTag:"br",showedOnTree:false,isBr:true,isStyleType:true,isEmpty:function(){return true}},0,0,0,0,0,0,[FBEditor.editor.element.br,"BrElement"],0));(Ext.cmd.derive("FBEditor.editor.element.clipped.ClippedElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.clipped,"ClippedElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.clipped.ClippedElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.clipped.ClippedElementController",htmlTag:"clipped",xmlTag:"clipped",cls:"el-clipped",isClipped:true},0,0,0,0,0,0,[FBEditor.editor.element.clipped,"ClippedElement"],0));(Ext.cmd.derive("FBEditor.editor.element.code.CodeElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.code,"CodeElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.code.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"code"},0,0,0,0,0,0,[FBEditor.editor.command.code,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.code.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"code"},0,0,0,0,0,0,[FBEditor.editor.command.code,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.code.CodeElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.code.CodeElementController",htmlTag:"code",xmlTag:"code",cls:"el-code"},0,0,0,0,0,0,[FBEditor.editor.element.code,"CodeElement"],0));(Ext.cmd.derive("FBEditor.editor.command.TextModifiedCommand",FBEditor.editor.command.AbstractCommand,{newValue:"",oldValue:"",execute:function(){var m=this,i=m.getData(),l=false,c=window.getSelection(),j=FBEditor.editor.Factory,g=c.getRangeAt(0).startOffset,a={},h={},f,d,o,n,b;try{m.newValue=m.newValue||i.newValue;m.oldValue=m.oldValue||i.oldValue;m.offset=m.offset?m.offset:g;a.node=i.saveRange?i.saveRange.startNode:i.node;h.node=a.node.getElement();f=h.node.getManager();f.setSuspendEvent(true);i.node=a.node;n=i.node.viewportId;a.parent=a.node.parentNode;h.parent=a.parent.getElement();if(h.node.isEmpty()&&!h.node.isText){h.text=j.createElementText("");a.text=h.text.getNode(a.node.viewportId);h.parent.replace(h.text,h.node,n);i.node=a.text}d=i.node;o=m.newValue;console.log("exec text");b=d.getElement();b.setText(o);b.sync(n);l=true}catch(k){Ext.log({level:"warn",msg:k,dump:k});m.getHistory(b).removeNext()}f.setSuspendEvent(false);return l},unExecute:function(){var j=this,g=j.getData(),i=false,a={},f={},d,c,l,k,b;try{c=g.node;l=j.oldValue;k=c.viewportId;b=c.getElement();d=b.getManager();d.setSuspendEvent(true);c.nodeValue=l;b.setText(l);a.parent=c.parentNode;f.parent=a.parent.getElement();a.cursor=c;console.log("undo exec text",j.offset,c,b);if(!l&&f.parent.isStyleHolder){f.empty=d.createEmptyElement();a.empty=f.empty.getNode(k);f.parent.replace(f.empty,b,k);a.cursor=a.empty;f.parent.sync(k)}else{b.sync(k)}g.saveRange={startNode:a.cursor,startOffset:j.offset-1};d.setCursor(g.saveRange);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(f.parent).remove()}d.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command,"TextModifiedCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootElementController",FBEditor.editor.element.AbstractElementController,{onTextModified:function(g){var c=this,f=g.target,a,b,d;b=c.getElement().getManager();if(b.isSuspendEvent()){return}a=f.parentNode;if(!a.getElement){Ext.defer(function(){this.onTextModified({target:f})},1,c);return}d=Ext.create("FBEditor.editor.command.TextModifiedCommand",{node:f,newValue:g.newValue,oldValue:g.prevValue});if(d.execute()){c.getHistory().add(d)}},onMouseUp:function(d){var c=this,a={},b={};a.target=d.target;b.target=a.target.getElement?a.target.getElement():null;if(!b.target.isRoot){FBEditor.editor.element.AbstractElementController.prototype.onMouseUp.apply(this,arguments)}},onFocus:function(h){var j=this,f={},a={},i=h.relatedTarget,b=window.getSelection(),d,c,g,k;f.root=j.getElement();d=f.root.getManager();g=b&&b.rangeCount?b.getRangeAt(0):null;f.start=g&&g.startContainer.getElement?g.startContainer.getElement():null;f.startRoot=f.start?f.start.getRoot():null;if(f.startRoot&&f.startRoot.equal(f.root)){return}if(i&&(!i.getElement||!i.getElement().getRoot().equal(f.root))){j.enableAllEditable();g=d.getRange();if(g){d.restoreCursor()}else{f.deepFirst=f.root.getDeepFirst();c=f.deepFirst.getNodeHelper();k=h.target.viewportId;a.deepFirst=c.getNode(k);d.setCursor({startNode:a.deepFirst});c=f.root.getNodeHelper();a.root=c.getNode(k);a.root.scrollTop=0}}},onPaste:function(c){var a=this,b;c.preventDefault();c.stopPropagation();b=Ext.create("FBEditor.editor.command.PasteCommand",{e:c});if(b.execute()){a.getHistory().add(b)}},onCut:function(f){var c=this,a=c.getFocusNode(f.target),b,d;if(a.nodeName==="IMG"){b=a.getElement();b.fireEvent("cut",f)}else{f.preventDefault();f.stopPropagation();d=Ext.create("FBEditor.editor.command.CutCommand",{e:f});d.execute()}},onBeforeCopy:function(a){},onCopy:function(d){var b=this,a=b.getElement(),h=a.getManager(),c=FBEditor.resource.Manager,i,g,f;d.preventDefault();g=h.getRangeXml();g=g.replace(/<([/]?)title(.*?)>/ig,"<$1fb3-title$2>");f=g.replace(/<(.*?)>/ig,"");g=c.convertImgToBase64(g);i=Ext.create("FBEditor.util.ClipboardData",d);i.setText(f);i.setHtml(g);d.preventDefault()}},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootElementControllerWebkit",FBEditor.editor.element.root.RootElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootElementControllerWebkit"],0));(Ext.cmd.derive("FBEditor.editor.selection.Selection",Ext.Base,{constructor:function(b){var a=this;a.node=b}},1,0,0,0,0,0,[FBEditor.editor.selection,"Selection"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootSelection",FBEditor.editor.selection.Selection,{},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootSelection"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootSelectionWebKit",FBEditor.editor.selection.Selection,{pOver:null,pOut:null,constructor:function(b){var a=this;b.addEventListener("mousedown",function(c){a.startSelection(c)});b.addEventListener("mouseout",function(c){a.outSelection(c)});b.addEventListener("mouseover",function(c){a.overSelection(c)});b.addEventListener("mousemove",function(c){a.moveSelection(c)});b.addEventListener("mouseup",function(c){a.endSelection(c)});FBEditor.editor.selection.Selection.prototype.constructor.apply(this,arguments)},startSelection:function(g){var i=this,h=g.target,d={},a={},c,f,j,b;d.target=h.getElement?h.getElement():null;c=d.target?d.target.getManager():null;j=h.viewportId;if(!g.shiftKey){i.enableAllEditable(g);c.selectionToLeft=null;c.selectionToUp=null}else{f=c?c.getRange():null;if(f&&f.collapsed){d.start=f.start.getElement();d.p=d.start.getStyleHolder();b=d.p.getNodeHelper();a.p=b.getNode(j);a.p.setAttribute("contenteditable",false)}}if(g.which===3){g.preventDefault()}},outSelection:function(h){var k=this,i=h.relatedTarget,f={},a={},b=window.getSelection(),g,d,j,l,c;g=b.rangeCount?b.getRangeAt(0):null;a.common=g?g.commonAncestorContainer:null;f.common=a.common&&a.common.getElement?a.common.getElement():null;f.relatedTarget=i&&i.getElement?i.getElement():null;f.p=f.relatedTarget?f.relatedTarget.getStyleHolder():null;d=f.p?f.p.getManager():null;j=d?d.getRange():null;f.start=j&&j.start.getElement?j.start.getElement():null;f.root=f.p?f.p.getRoot():null;f.rangeRoot=g&&g.startContainer.getElement?g.startContainer.getElement().getRoot():null;if(!f.rangeRoot&&f.root&&f.common||f.root&&f.rangeRoot&&f.rangeRoot.equal(f.root)){f.startP=f.start?f.start.getStyleHolder():null;if(!f.startP||f.startP&&!f.startP.equal(f.p)&&(!k.pOut||!k.pOut.equal(f.p))){k.pOut=f.p;l=i.viewportId;c=f.p.getNodeHelper();a.p=c.getNode(l);a.p.setAttribute("contenteditable",false)}}},overSelection:function(h){var k=this,i=h.relatedTarget,f={},a={},b=window.getSelection(),d,g,j,l,c;if(h.which===1&&h.buttons===1){g=b.rangeCount?b.getRangeAt(0):null;f.relatedTarget=i&&i.getElement?i.getElement():null;f.p=f.relatedTarget?f.relatedTarget.getStyleHolder():null;d=f.p?f.p.getManager():null;j=d?d.getRange():null;f.start=j&&j.start.getElement?j.start.getElement():null;f.root=f.p?f.p.getRoot():null;f.rangeRoot=g&&g.startContainer.getElement?g.startContainer.getElement().getRoot():null;if(f.root&&f.rangeRoot.equal(f.root)){f.startP=f.start?f.start.getStyleHolder():null;if(!f.startP||!k.pOver||k.pOver&&!k.pOver.equal(f.p)){k.pOver=f.p;l=i.viewportId;c=f.p.getNodeHelper();a.p=c.getNode(l);a.p.setAttribute("contenteditable",false)}}}},moveSelection:function(a){},endSelection:function(g){var d=this,f=g.target,b={},a={},c;b.target=f.getElement?f.getElement():null;if(b.target&&!b.target.isImg){b.root=b.target.getRoot();c=b.root.getNodeHelper();a.root=c.getNode(f.viewportId);a.root.focus()}d.pOver=null;d.pOut=null},enableAllEditable:function(f){var c=this,d=f.target,b={},a={};if(f.which===1){b.target=d.getElement?d.getElement():null;if(b.target){a.pp=document.querySelectorAll(".el-styleholder[contenteditable=false]");Ext.Array.each(a.pp,function(e){e.setAttribute("contenteditable",true)})}}}},1,0,0,0,0,0,[FBEditor.editor.element.root,"RootSelectionWebKit"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.root.RootElementController",controllerClassWebkit:"FBEditor.editor.element.root.RootElementControllerWebkit",selectionClass:"FBEditor.editor.element.root.RootSelection",xmlTag:"root",htmlTag:"main",cls:"el-root",isRoot:true,customListeners:{keydown:"onKeyDown",keyup:"onKeyUp",keypress:"onKeyPress",mouseup:"onMouseUp",mousedown:"onMouseDown",mousemove:"onMouseMove",DOMNodeInserted:"onNodeInserted",DOMNodeRemoved:"onNodeRemoved",DOMCharacterDataModified:"onTextModified",drop:"onDrop",paste:"onPaste",beforecopy:"onBeforeCopy",copy:"onCopy",beforecut:"onBeforecut",cut:"onCut",scroll:"onScroll",focus:"onFocus"},getXml:function(a,e){var f=this,c=FBEditor.editor.element.AbstractElement,b,d;b=e?"":"\n";d=b+FBEditor.editor.element.AbstractElement.prototype.getXml.apply(this,arguments);c.countSpaces=1;return d},setAttributesHtml:function(a){var c=this,b;b=FBEditor.editor.element.AbstractElement.prototype.setAttributesHtml.apply(this,arguments);b.setAttribute("tabindex",1);b.setAttribute("contentEditable",true);return b},setEvents:function(a){var c=this,b=c.customListeners;if(c.isRoot){Ext.Object.each(b,function(d,e){if(c.controller[e]){a.addEventListener(d,function(f){c.controller[e](f)},false)}})}return a},getEditor:function(){return this.editor},setEditor:function(a){this.editor=a}},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.AbstractRootElementController",FBEditor.editor.element.root.RootElementController,{onMouseDown:function(h){var f=this,a={},c={},b,d,g;a.target=h.target;c.target=a.target.getElement?a.target.getElement():null;if(c.target.isRoot){b=c.target.getManager();g=a.target.viewportId;c.last=c.target.getDeepLast();d=c.last.getNodeHelper();a.last=d.getNode(g);c.offset=c.last.isText?c.last.text.length:0;b.setCursor({startNode:a.last,startOffset:c.offset});h.preventDefault()}},onMouseUp:function(c){var b=this,a;FBEditor.editor.element.root.RootElementController.prototype.onMouseUp.apply(this,arguments);a=b.getFocusNode(c.target);b.checkActiveToolbar(a)},checkActiveToolbar:function(f){var e=this,a,c,d,b;b=f.getElement?f.getElement():null;if(b){a=b.getManager();c=a.getEditor();d=c.getToolbar();if(!d.isActive()){d.setActive()}}}},0,0,0,0,0,0,[FBEditor.editor.element.desc,"AbstractRootElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.AbstractRootElementControllerWebkit",FBEditor.editor.element.root.RootElementControllerWebkit,{onMouseUp:function(b){var a=this;a.mixins.controller.onMouseUp.call(a,b)},onMouseDown:function(b){var a=this;a.mixins.controller.onMouseDown.call(a,b)}},0,0,0,0,0,[["controller",FBEditor.editor.element.desc.AbstractRootElementController]],[FBEditor.editor.element.desc,"AbstractRootElementControllerWebkit"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.AbstractRootElement",FBEditor.editor.element.root.RootElement,{controllerClass:"FBEditor.editor.element.desc.AbstractRootElementController",controllerClassWebkit:"FBEditor.editor.element.desc.AbstractRootElementControllerWebkit",cls:"el-desc-root",defaultAttributes:{"xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.fictionbook.org/FictionBook3/description"},isDesc:true,getXml:function(a,c){var e=this,d,b;b=FBEditor.editor.element.root.RootElement.prototype.getXml.apply(this,arguments);b=b.replace(/xlink:href=/g,"href=");b=b.replace(/<p>(.*?)<br(.*?)\/>(.*?)<\/p>/gi,"<p>$1$3</p>");d=new RegExp("(<"+e.xmlTag+".*?>[\n ]{0,})<br(.*?)/>","i");b=b.replace(d,"$1<p></p>");return b},createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.p=a.createElement("p");b.t=a.createElementText(" ");b.p.add(b.t);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.desc,"AbstractRootElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.annotation.AnnotationElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"annotation",cls:"el-desc-annotation"},0,0,0,0,0,0,[FBEditor.editor.element.desc.annotation,"AnnotationElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.bibliodescription.BibliodescriptionElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"biblio-description",cls:"el-desc-bibliodescription"},0,0,0,0,0,0,[FBEditor.editor.element.desc.bibliodescription,"BibliodescriptionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.history.HistoryElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"history",cls:"el-desc-history"},0,0,0,0,0,0,[FBEditor.editor.element.desc.history,"HistoryElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.preamble.PreambleElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"preamble",cls:"el-desc-preamble"},0,0,0,0,0,0,[FBEditor.editor.element.desc.preamble,"PreambleElement"],0));(Ext.cmd.derive("FBEditor.editor.command.div.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.div.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.div.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateRangeObjectCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{a.focus=d.opts.focus;c.focus=a.focus.getElement();c.prev=c.focus.prev();c.holder=c.focus.getStyleHolder();c.nextHolder=c.holder.next();c.prevHolder=c.holder.prev();c.common=c.holder.parent;j=d.viewportId=a.focus.viewportId;b=d.manager=c.focus.getManager();f=b.getFactory();b.setSuspendEvent(true);a.container=a.focus;a.splitContainer=b.splitNode(c,a,0);c.splitContainer=a.splitContainer.getElement();c.node=f.createElement(i.elementName);c.common.insertBefore(c.node,c.splitContainer,j);c.p=f.createElement("p");c.node.add(c.p,j);c.p.add(c.focus,j);if(c.holder.isEmpty()){c.common.remove(c.holder,j)}if(c.splitContainer.isEmpty()){c.common.remove(c.splitContainer,j);c.splitIsEmpty=true}c.common.sync(d.viewportId);b.setCursor({startNode:a.focus});d.els=c;i.verifyElement(c.common);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.common).removeNext()}b.setSuspendEvent(false);return h},unExecute:function(){var i=this,f=i.getData(),h=false,d={},a={},c,b,j;try{d=f.els;j=f.viewportId;c=f.manager;c.setSuspendEvent(true);a.focus=f.opts.focus;console.log("undo create element "+i.elementName+" from object",d);if(d.holder.isEmpty()){d.common.insertBefore(d.holder,d.node,j);d.holder.add(d.focus,j)}else{if(d.prev){d.prev.parent.add(d.focus,j)}else{d.holder.add(d.focus,j)}}d.common.remove(d.node,j);d.first=d.splitContainer.first();d.join=d.first;while(d.first){d.holder.add(d.first,j);d.first=d.splitContainer.first()}if(!d.splitIsEmpty){d.common.remove(d.splitContainer,j)}if(d.prev&&!d.join.isText){b=d.join.getNodeHelper();a.join=b.getNode(j);c.joinNode(a.join);b=d.holder.getNodeHelper();a.holder=b.getNode(j);c.removeEmptyNodes(a.holder)}d.common.sync(f.viewportId);c.setCursor({startNode:a.focus});h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(d.parent).remove()}c.setSuspendEvent(false);c.updateTree();return h}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateRangeObjectCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.div.CreateRangeObjectCommand",FBEditor.editor.command.AbstractCreateRangeObjectCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"CreateRangeObjectCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.div.DivElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.div,"DivElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.div.DivElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.div.DivElementController",htmlTag:"div",xmlTag:"div",cls:"el-div",splittable:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Блок");a.p.add(a.t);b.add(a.p);return a},getXml:function(a,c){var e=this,f=e.first(),b,d;b=FBEditor.editor.element.AbstractElement.prototype.getXml.apply(this,arguments);if(e.marker){d=e.marker.getXml(a,c);if(f&&f.isTitle){b=b.replace(/^(\s+)?<\/title>(\n)?/i,"$1</title>$2"+d)}else{b=b.replace(/^(\s+)?<div(.*?)>(\n)?/i,"$1<div$2>$3"+d)}}return b},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,e){if(d!=="marker"){a+=d+'="'+e+'" '}});return a.trim()},setStyleHtml:function(){var d=this,a=d.attributes,c,b;b=FBEditor.editor.element.AbstractElement.prototype.setStyleHtml.call(this);b+=b?" ":"";b+=a["min-width"]?"min-width: "+a["min-width"]+"; ":"";b+=a["max-width"]?"max-width: "+a["max-width"]+"; ":"";b+=a["float"]?"float: "+a["float"]+"; ":"";b+=a.align?"text-align: "+a.align+"; ":"";c=a.width?a.width:false;b+=c?"width: "+c+"; ":"";d.style=b;return b},initCls:function(){var c=this,b=c.attributes,a;a=b.align?" el-div-align-"+b.align:"";a="el-div"+a;c.cls=a}},0,0,0,0,0,0,[FBEditor.editor.element.div,"DivElement"],0));(Ext.cmd.derive("FBEditor.editor.element.em.EmElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.em,"EmElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.em.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"em"},0,0,0,0,0,0,[FBEditor.editor.command.em,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.em.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"em"},0,0,0,0,0,0,[FBEditor.editor.command.em,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.em.EmElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.em.EmElementController",htmlTag:"em",xmlTag:"em",cls:"el-em"},0,0,0,0,0,0,[FBEditor.editor.element.em,"EmElement"],0));(Ext.cmd.derive("FBEditor.editor.command.epigraph.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"epigraph",createElement:function(d,a){var h=this,e=h.getData(),g=e.range,f=FBEditor.editor.Factory,c,i,b;i=a.node.viewportId;a.parent=a.node.parentNode;d.parent=a.parent.getElement();d.node=f.createElement(h.elementName);a.node=d.parent.hisName(h.elementName)?a.parent:a.node;a.parent=a.node.parentNode;d.parent=a.parent.getElement();d.prevNode=e.prevNode?e.prevNode.getElement():null;d.first=d.prevNode&&d.prevNode.next()?d.prevNode:d.parent.first();console.log("create epigraph",e,d,a);if(g.collapsed){d=Ext.apply(d,d.node.createScaffold())}a.node=d.node.getNode(e.viewportId);if(d.first){if(d.prevNode&&d.prevNode.hisName(d.node.getName())){d.first=d.first.next()}else{d.next=d.first.next();while(d.next&&(d.first.hisName(d.node.getName())||d.first.isTitle)){d.first=d.next;d.next=d.next.next()}}d.parent.insertBefore(d.node,d.first,i)}else{d.parent.add(d.node,i)}if(!g.collapsed){d.firstP=g.start.getElement();d.firstP=d.firstP.isStyleHolder?d.firstP:d.firstP.getStyleHolder();b=d.firstP.getNodeHelper();a.firstP=b.getNode(i);c=d.firstP.getManager();d.lastP=g.end.getElement();d.lastP=d.lastP.isStyleHolder?d.lastP:d.lastP.getStyleHolder();b=d.lastP.getNodeHelper();a.lastP=b.getNode(i);a.pp=c.getNodesPP(a.firstP,a,d);a.pp.push(a.lastP);Ext.each(a.pp,function(k){var j=k.getElement();j._oldLinks={parent:j.parent,next:j.next()};d.node.add(j,i)});d.p=d.lastP}e.nodes=a;e.els=d},unExecute:function(){var i=this,d=i.getData(),h=false,c,a,b,f,j;try{f=d.range;console.log("undo create epigraph",d);if(f.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}j=d.viewportId;a=d.nodes;c=d.els;b=c.node.getManager();b.setSuspendEvent(true);a.pp=a.pp.reverse();Ext.each(a.pp,function(k){var e=k.getElement(),l=e._oldLinks;if(l.next){l.parent.insertBefore(e,l.next,j)}else{l.parent.add(e,j)}e._oldLinks=null});c.parent.remove(c.node,j);c.parent.sync(j);b.setSuspendEvent(false);a.cursorStart=b.getDeepFirst(a.pp.pop());a.cursorEnd=b.getDeepLast(a.pp.shift());d.saveRange={startNode:a.cursorStart,startOffset:0,endNode:a.cursorEnd,endOffset:a.cursorEnd.length};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);b.updateTree();return h}},0,0,0,0,0,0,[FBEditor.editor.command.epigraph,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.epigraph.EpigraphElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(g,f){var e=this,d={},b={},c=e.getNameElement(),a;g=g||window.getSelection();a=g.getRangeAt(0);b.node=a.startContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}b.title=b.parent;d.title=b.title.getElement();while(!(d.title.isTitle||d.title.isRoot)){b.title=b.title.parentNode;d.title=b.title.getElement()}if(d.title.isTitle){b.node=b.title;d.node=d.title}else{d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node}return b.node}},0,0,0,0,0,0,[FBEditor.editor.element.epigraph,"EpigraphElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.epigraph.EpigraphElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.epigraph.EpigraphElementController",htmlTag:"epigraph",xmlTag:"epigraph",cls:"el-epigraph",splittable:true,isEpigraph:true,createScaffold:function(){var c=this,a=FBEditor.editor.Factory,b={};b.p=a.createElement("p");b.t=a.createElementText("Эпиграф");b.p.add(b.t);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.epigraph,"EpigraphElement"],0));(Ext.cmd.derive("FBEditor.editor.element.fb3body.Fb3bodyElement",FBEditor.editor.element.root.RootElement,{xmlTag:"fb3-body",defaultAttributes:{xmlns:"http://www.fictionbook.org/FictionBook3/body","xmlns:xlink":"http://www.w3.org/1999/xlink"},cls:"el-body",isBody:true,constructor:function(){var a=this,b;FBEditor.editor.element.root.RootElement.prototype.constructor.apply(this,arguments);b=a.attributes.id;delete a.attributes.id;a.attributes.id=b||Ext.data.identifier.Uuid.Global.generate()},createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.title=a.createElement("title");b=Ext.apply(b,b.title.createScaffold());c.add(b.title);b.section=a.createElement("section");b.p=a.createElement("p");b.t=a.createElementText("Текст книги");b.p.add(b.t);b.section.add(b.p);c.add(b.section);return b}},1,0,0,0,0,0,[FBEditor.editor.element.fb3body,"Fb3bodyElement"],0));(Ext.cmd.derive("FBEditor.editor.element.header.HeaderElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.title.TitleElement")}},1,0,0,0,0,0,[FBEditor.editor.element.header,"HeaderElement"],0));(Ext.cmd.derive("FBEditor.editor.element.i.IElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.em.EmElement")}},1,0,0,0,0,0,[FBEditor.editor.element.i,"IElement"],0));(Ext.cmd.derive("FBEditor.editor.element.img.ImgElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownDelete:function(b){var a=this;b.preventDefault();a.remove()},onKeyDownBackspace:function(b){var a=this;b.preventDefault();a.remove()},onKeyDownCtrlX:function(a){},onFocus:function(h){var j=this,c=j.getElement(),b=window.getSelection(),i=h.target,a={},f={},g,k,d;g=b.rangeCount?b.getRangeAt(0):null;if(g&&b.isCollapsed){a.focus=b.focusNode;f.focus=a.focus&&a.focus.getElement?a.focus.getElement():null;if(f.focus&&!f.focus.isImg){k=i.viewportId;b.removeAllRanges();d=c.getNodeHelper();a.focus=d.getNode(k);b.collapse(a.focus,0);a.focus.focus()}}FBEditor.editor.element.AbstractElementController.prototype.onFocus.apply(this,arguments)},onCut:function(b){var a=this;a.remove()},remove:function(){var a=this,b;b=Ext.create("FBEditor.editor.command.DeleteCommand",{el:a.getElement()});if(b.execute()){a.getHistory().add(b)}},getNodeVerify:function(e,d){var c=this,b={},a;a=d.range;b.node=a.start;return b.node}},0,0,0,0,0,0,[FBEditor.editor.element.img,"ImgElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.img.CreateCommand",FBEditor.editor.command.AbstractCommand,{syncButtons:false,elementName:"img",execute:function(){var j=this,d=j.getData(),i=false,c={},a={},f=FBEditor.editor.Factory,k,b,g;try{g=d.opts.range;console.log("create img",d.opts);k=d.viewportId=g.start.viewportId;d.oldValue=g.start.nodeValue;a.start=g.start;c.start=a.start.getElement();a.parent=!c.start.isStyleHolder?a.start.parentNode:a.start;c.parent=a.parent.getElement();b=c.start.getManager();b.setSuspendEvent(true);c.node=f.createElement(j.elementName,{src:d.opts.name});a.node=c.node.getNode(d.viewportId);if(!c.parent.isEmpty()){a.next=a.start.nextSibling;c.next=a.next?a.next.getElement():null;c.startValue=a.start.nodeValue.substring(0,g.offset);c.endValue=a.start.nodeValue.substring(g.offset);if(c.startValue){c.start.setText(c.startValue,k)}else{c.parent.remove(c.start,k)}}else{a.start=c.start.isStyleHolder?a.start.firstChild:a.start;c.start=a.start.getElement();c.parent.remove(c.start,k);d.isEmpty=true}if(c.next){c.parent.insertBefore(c.node,c.next,k)}else{c.parent.add(c.node,k)}if(c.endValue){c.t=f.createElementText(c.endValue);a.t=c.t.getNode(d.viewportId);if(c.next){c.parent.insertBefore(c.t,c.next,k)}else{c.parent.add(c.t,k)}}c.parent.sync(k);b.setCursor({withoutSyncButtons:true,startNode:a.node});d.saveNode=a.node;j.verifyElement(c.parent);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return i},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.opts.range;console.log("undo create img",h);b.node=h.saveNode;d.node=b.node.getElement();b.start=a.start;b.parent=b.node.parentNode;d.parent=b.parent.getElement();c=d.node.getManager();c.setSuspendEvent(true);d.parent.remove(d.node);b.parent.removeChild(b.node);b.cursor=a.start;if(h.isEmpty){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.parent.add(d.empty);b.parent.appendChild(b.empty);b.cursor=b.empty;a.start=b.empty}else{d.start=b.start.getElement();d.start.setText(h.oldValue);b.start.nodeValue=h.oldValue;b.next=b.start.nextSibling;if(a.offset<b.start.nodeValue.length&&b.next){d.next=b.next.getElement();d.parent.remove(d.next);b.parent.removeChild(b.next)}}d.parent.sync(h.viewportId);c.setCursor({startNode:b.cursor,startOffset:a.offset});f=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);c.updateTree();return f}},0,0,0,0,0,0,[FBEditor.editor.command.img,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.img.ImgElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.img.ImgElementController",htmlTag:"img",xmlTag:"img",cls:"el-img",listeners:{cut:"onCut"},defaultAttributes:{tabindex:0},createFromRange:true,resource:null,isImg:true,loadingResId:"",isEmpty:function(){return false},clear:function(){var a=this,b=a.resource;if(b){b.removeElement(a)}FBEditor.editor.element.AbstractElement.prototype.clear.call(this)},getNode:function(c){var b=this,a;if(!b.linkResource()&&!b.loadingResId){b.setStateLoading()}a=FBEditor.editor.element.AbstractElement.prototype.getNode.apply(this,arguments);return a},getAttributesXml:function(b){var d=this,c=Ext.clone(d.attributes),a="";c.src=d.resource?d.resource.fileId:"undefined";c.src=d.loadingResId?"undefined":encodeURI(c.src);Ext.Object.each(c,function(e,f){if(f){if(b&&Ext.Array.contains(["alt"],e)||e==="tabindex"){}else{a+=e+'="'+f+'" '}}});return a.trim()},setStyleHtml:function(){var c=this,a=c.attributes,b;b=FBEditor.editor.element.AbstractElement.prototype.setStyleHtml.call(this);b+=b?" ":"";b+=a.width?"width: "+a.width+"; ":"";b+=a["min-width"]?"min-width: "+a["min-width"]+"; ":"";b+=a["max-width"]?"max-width: "+a["max-width"]+"; ":"";c.style=b;return b},getData:function(){var b=this,c,a;c=FBEditor.editor.element.AbstractElement.prototype.getData.apply(this,arguments);a={name:b.resource?b.resource.name:null};Ext.Object.each(b.attributes,function(d,e){a[d]=e?e:""});a.src=b.attributes.src?b.attributes.src:"undefined";c=Ext.apply(c,a);return c},update:function(b){var a=this;a.loadingResId=null;if(b.src!==a.attributes.src){a.deleteLinkResource()}a.attributes=Ext.clone(a.defaultAttributes);Ext.Object.each(b,function(c,d){if(d){a.attributes[c]=d}});FBEditor.editor.element.AbstractElement.prototype.update.apply(this,arguments)},getNameTree:function(){var b=this,a;a=FBEditor.editor.element.AbstractElement.prototype.getNameTree.apply(this,arguments);if(b.resource){a+=" "+b.resource.name}return a},deleteLinkResource:function(c){var a=this,b=a.resource;if(b){b.removeElement(a)}a.resource=null;a.attributes.src=c||"undefined";a.updateSrc(a.attributes.src)},isLoadingRes:function(b){var a=this;return a.loadingResId===b},linkResource:function(){var c=this,a=c.attributes,b=FBEditor.resource.Manager,d;a.src=a.src||"undefined";d=c.resource||b.getResource(a.src);if(d){a.src=d.url;d.addElement(c);c.resource=d}return d},updateSrc:function(c){var b=this,a=b.getManager();a.setSuspendEvent(true);Ext.Object.each(b.nodes,function(d,e){e.setAttribute("src",c)});a.setSuspendEvent(false)},setStateLoading:function(){var a=this;a.loadingResId=a.attributes.src;a.attributes.src=Ext.manifest.resources?Ext.manifest.resources.path:"resources";a.attributes.src+="/images/loadmask/loading.gif"}},0,0,0,0,0,0,[FBEditor.editor.element.img,"ImgElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElement",FBEditor.editor.element.AbstractElement,{cls:"el-styleholder",isStyleHolder:true,isStyleType:true,showedOnTree:false,setAttributesHtml:function(a){var c=this,b;b=FBEditor.editor.element.AbstractElement.prototype.setAttributesHtml.apply(this,arguments);if(Ext.isWebKit){}return b},removeRangeNodes:function(){var b=this,a=b.getName(),c;c=Ext.create("FBEditor.editor.command."+a+".RemoveRangeNodesCommand");if(c.execute()){b.getHistory().add(c)}},getFormatOptionsXml:function(){var b=this,a=false,c;c=FBEditor.editor.element.AbstractElement.prototype.getFormatOptionsXml.apply(this,arguments);Ext.Array.each(b.children,function(d){if(d.isText){a=true;return true}});c.spacesAfter=c.spacesAfter&&!a?c.spacesAfter:"";c.nlBefore=c.nlBefore&&!a?c.nlBefore:"";return c}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElement"],0));(Ext.cmd.derive("FBEditor.editor.command.li.CreateEmptyPCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,g=k.getData(),b=window.getSelection(),j=false,f={},a={},l,c,h,d;try{if(g.saveRange){f.node=g.saveRange.startNode.getElement();d=f.node.getManager();d.setCursor(g.saveRange)}h=b.getRangeAt(0);l=g.viewportId=h.startContainer.viewportId;g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,parentStart:h.commonAncestorContainer.parentNode,collapsed:h.collapsed,offset:{start:h.startOffset,end:h.endOffset}};console.log("li to empty",g.range);a.node=h.startContainer;f.node=a.node.getElement();f.list=f.node.parent;f.parentList=f.list.parent;c=f.parentList.getNodeHelper();a.parentList=c.getNode(l);d=f.node.getManager();d.setSuspendEvent(true);f.p=d.createEmptyP();a.p=f.p.getNode(l);if(f.list.next()){f.next=f.list.next();f.parentList.insertBefore(f.p,f.next,l)}else{f.parentList.add(f.p,l)}f.list.remove(f.node,l);f.parentList.sync(l);c=f.p.getNodeHelper();a.cursor=c.getNode(l);d.setCursor({startNode:a.cursor});k.data.els=f;k.verifyElement(f.parentList);d.scrollViewDown();j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(f.parent).removeNext()}d.setSuspendEvent(false);return j},unExecute:function(){var i=this,f=i.getData(),h=false,d={},a={},b,j,c;try{d=f.els;j=f.viewportId;console.log("undo li to empty",a,f);c=d.node.getManager();c.setSuspendEvent(true);d.parentList.remove(d.p,j);d.list.add(d.node,j);d.parentList.sync(f.viewportId);b=d.node.getNodeHelper();a.cursor=b.getNode(j);f.saveRange={startNode:a.cursor};c.setCursor(f.saveRange);c.scrollViewUp();h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(d.parent).remove()}c.setSuspendEvent(false);return h}},0,0,0,0,0,0,[FBEditor.editor.command.li,"CreateEmptyPCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractGetNextHolderCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var l=this,g=l.getData(),k=false,f={},a={},b=window.getSelection(),h=FBEditor.editor.Factory,c,m,d,i;try{i=b.getRangeAt(0);m=g.viewportId=i.commonAncestorContainer.viewportId;a.p=i.commonAncestorContainer;f.p=a.p.getElement();d=f.p.getManager();d.setSuspendEvent(true);f.p=f.p.hisName(l.elementName)?f.p:f.p.getParentName(l.elementName);f.parentP=f.p.parent;f.parent=f.parentP.parent;f.nextP=l.getNextP(f);if(!f.nextP){return false}f.parentNextP=f.nextP.parent;if(f.parentNextP.isEmpty()){return false}console.log("get next holder "+l.elementName,f);if(f.parentP.isEmpty()){f.isEmpty=true;f.parentP.remove(f.p,m)}if(!f.nextP.hisName(l.elementName)){f.newP=h.createElement(l.elementName);a.newP=f.newP.getNode(m);while(f.first=f.nextP.first()){f.newP.add(f.first,m)}f.parentP.add(f.newP,m);f.nextNextP=f.nextP.next();f.parentNextP.remove(f.nextP,m)}else{f.next=f.p.next();if(!f.next){f.parentP.add(f.nextP,m)}else{f.parentP.insertBefore(f.nextP,f.next,m)}}if(f.parentNextP.isEmpty()){f.isEmptyParentNextP=true;f.parentNext=f.parentNextP.parent;f.nextParentNextP=f.parentNextP.next();f.parentNext.remove(f.parentNextP,m)}f.parent.sync(m);f.cursor=f.newP?f.newP.getDeepLast():f.nextP.getDeepLast();c=f.cursor.getNodeHelper();a.cursor=c.getNode(m);a.startCursor=f.cursor.getText().length;d.setCursor({startNode:a.cursor,startOffset:a.startCursor});g.nodes=a;g.els=f;l.verifyElement(f.parentP);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(f.parent).removeNext()}d.setSuspendEvent(false);return k},beforeUnExecute:function(){var d=this,e=d.getData(),g,f,c,a,b;a=e.nodes;c=e.els;console.log("before undo get next holder "+d.elementName,a,c);if(c.isEmptyParentNextP){f=e.viewportId;b=c.p.getManager();b.setSuspendEvent(true);if(c.nextParentNextP){c.parentNext.insertBefore(c.parentNextP,c.nextParentNextP,f)}else{c.parentNext.add(c.parentNextP,f)}c.emptyP=b.createEmptyP();c.parentNextP.add(c.emptyP,f);b.setSuspendEvent(false);c.parent.sync(f);console.log("cancel undo");g=Promise.reject(false)}else{g=FBEditor.editor.command.AbstractCommand.prototype.beforeUnExecute.apply(this,arguments)}return g},unExecute:function(){var i=this,f=i.getData(),h=false,b,j,d,a,c;try{a=f.nodes;d=f.els;console.log("undo get next holder "+i.elementName,d);j=f.viewportId;c=d.p.getManager();c.setSuspendEvent(true);if(d.parentNext){if(d.nextParentNextP){d.parentNext.insertBefore(d.parentNextP,d.nextParentNextP,j)}else{d.parentNext.add(d.parentNextP,j)}if(d.isEmptyParentNextP){d.parentNextP.remove(d.emptyP,j)}}if(d.newP){while(d.first=d.newP.first()){d.nextP.add(d.first,j)}d.parentP.remove(d.newP,j);if(d.nextNextP){d.parentNextP.insertBefore(d.nextP,d.nextNextP,j)}else{d.parentNextP.add(d.nextP,j)}}else{d.next=!d.parentNextP.equal(d.parent)?d.parentNextP.first():false;if(d.next){d.parentNextP.insertBefore(d.nextP,d.next,j)}else{d.parentNextP.add(d.nextP,j)}}if(d.isEmpty){d.parentP.add(d.p,j)}d.parent.sync(j);d.cursor=d.p.getDeepLast();b=d.cursor.getNodeHelper();a.cursor=b.getNode(j);a.startCursor=d.cursor.getText().length;f.saveRange={startNode:a.cursor,startOffset:a.startCursor};c.setCursor(f.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(d.parent).remove()}c.setSuspendEvent(false);return h},getNextP:function(a){var b=this;a.next=a.p.next();a.nextParent=a.next||a.parentP.next();if(a.nextParent){a.nextDeepFirst=a.nextParent.getDeepFirst();a.nextP=a.nextDeepFirst.getStyleHolder()}return a.nextP}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractGetNextHolderCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.GetNextHolderCommand",FBEditor.editor.command.styleholder.AbstractGetNextHolderCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"GetNextHolderCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,syncButtons:false,execute:function(){var k=this,g=k.getData(),j=false,f={},a={},b=window.getSelection(),c,l,d,h;try{h=b.getRangeAt(0);l=g.viewportId=h.commonAncestorContainer.viewportId;a.p=h.commonAncestorContainer;f.p=a.p.getElement();d=f.p.getManager();d.setSuspendEvent(true);while(!f.p.hisName(k.elementName)){a.p=a.p.parentNode;f.p=a.p.getElement()}a.parentP=a.p.parentNode;f.parentP=a.parentP.getElement();f.nextP=f.p.next();if(!f.nextP||!f.nextP.hisName(k.elementName)){return false}console.log("join next "+k.elementName,h,f);f.firstNext=f.nextP.first();f.last=f.p.last();c=f.firstNext.getNodeHelper();a.cursor=c.getNode(l);a.startCursor=0;if(f.p.isEmpty()&&f.nextP.isEmpty()){a.cursor=h.commonAncestorContainer;a.startCursor=0;a.bothEmpty=true}else{if(f.p.isEmpty()){f.p.remove(f.last,l);a.curEmpty=true}else{if(f.nextP.isEmpty()){a.cursor=d.getDeepLast(a.p);a.startCursor=a.cursor.nodeValue?a.cursor.nodeValue.length:0;a.nextEmpty=true}}}if(!f.nextP.isEmpty()){f.first=f.firstNext;while(f.first){f.p.add(f.first,l);f.first=f.nextP.first()}if(f.firstNext&&f.last&&f.firstNext.isText&&f.last.isText){a.offset=f.last.text.length;c=f.last.getNodeHelper();a.cursor=c.getNode(l);a.startCursor=a.offset;c=f.firstNext.getNodeHelper();a.firstNext=c.getNode(l);d.joinNode(a.firstNext)}}f.parentP.remove(f.nextP,l);f.parentP.sync(l);d.setCursor({withoutSyncButtons:true,startNode:a.cursor,startOffset:a.startCursor});g.nodes=a;g.els=f;k.verifyElement(f.parentP);j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(f.parent).removeNext()}d.setSuspendEvent(false);return j},unExecute:function(){var i=this,f=i.getData(),h=false,b,j,d,a,c;try{a=f.nodes;d=f.els;console.log("undo join next "+i.elementName,a,d);j=f.viewportId;c=d.p.getManager();c.setSuspendEvent(true);d.newP=d.nextP;d.next=d.p.next();if(d.next){d.parentP.insertBefore(d.newP,d.next,j)}else{d.parentP.add(d.newP,j)}if(a.bothEmpty||a.nextEmpty){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(j);d.newP.add(d.empty,j)}else{if(a.offset){d.common=d.p;a.container=a.cursor;a.cursor=c.splitNode(d,a,a.offset)}d.next=a.cursor.getElement();while(d.next){d.buf=d.next.next();d.newP.add(d.next,j);d.next=d.buf}if(d.p.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(j);d.p.add(d.empty,j)}}d.parentP.sync(j);b=d.p.getNodeHelper();a.p=b.getNode(j);a.cursor=c.getDeepLast(a.p);a.startCursor=a.cursor.getElement().getText().length;f.saveRange={startNode:a.cursor,startOffset:a.startCursor};c.setCursor(f.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(d.parent).remove()}c.setSuspendEvent(false);return h}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractJoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,syncButtons:false,execute:function(){var k=this,g=k.getData(),j=false,f={},a={},b=window.getSelection(),l,c,d,h;try{h=b.getRangeAt(0);l=g.viewportId=h.commonAncestorContainer.viewportId;a.p=h.commonAncestorContainer;f.p=a.p.getElement();d=f.p.getManager();d.setSuspendEvent(true);f.p=f.p.hisName(k.elementName)?f.p:f.p.getParentName(k.elementName);f.parentP=f.p.parent;f.prevP=f.p.prev();if(!f.prevP||!f.prevP.hisName(k.elementName)){return false}console.log("join prev "+k.elementName,h);f.lastPrev=f.prevP.last();f.firstP=f.p.first();f.cursor=f.lastPrev.getDeepLast();a.startCursor=f.lastPrev.getText()?f.lastPrev.getText().length:0;g.curEmpty=f.p.isEmpty();if(!g.curEmpty){if(f.prevP.isEmpty()){f.prevP.remove(f.lastPrev,l);a.prevEmpty=true}while(f.first=f.p.first()){f.prevP.add(f.first,l)}f.cursor=f.firstP.getDeepFirst();a.startCursor=0;if(f.lastPrev&&f.firstP&&f.lastPrev.isText&&f.firstP.isText){a.offset=f.lastPrev.getText().length;f.cursor=f.lastPrev;a.startCursor=a.offset;c=f.firstP.getNodeHelper();a.firstP=c.getNode(l);d.joinNode(a.firstP)}}f.parentP.remove(f.p,l);f.parentP.sync(l);c=f.cursor.getNodeHelper();a.cursor=c.getNode(l);d.setCursor({withoutSyncButtons:true,startNode:a.cursor,startOffset:a.startCursor});g.nodes=a;g.els=f;k.verifyElement(f.parentP);d.scrollViewUp();j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(f.parentP).removePrev()}d.setSuspendEvent(false);return j},unExecute:function(){var j=this,f=j.getData(),i=false,d={},a={},g=FBEditor.editor.Factory,k=f.viewportId,b,c;try{a=f.nodes;d=f.els;console.log("undo join prev "+j.elementName,a,f);c=d.parentP.getManager();c.setSuspendEvent(true);d.newP=g.createElement(j.elementName);a.newP=d.newP.getNode(k);if(d.nextP=d.prevP.next()){d.parentP.insertBefore(d.newP,d.nextP,k)}else{d.parentP.add(d.newP,k)}if(f.curEmpty){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(k);d.newP.add(d.empty,k)}else{if(a.offset){d.common=d.prevP;a.container=a.cursor;a.firstP=c.splitNode(d,a,a.offset);d.firstP=a.firstP.getElement()}d.next=d.firstP;while(d.next){d.buf=d.next.next();d.newP.add(d.next,k);d.next=d.buf}if(d.prevP.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(k);d.prevP.add(d.empty,k)}}d.parentP.sync(k);d.cursor=d.newP.getDeepFirst();b=d.cursor.getNodeHelper();a.cursor=b.getNode(k);f.saveRange={startNode:a.cursor};c.setCursor(f.saveRange);f.nodes=a;f.els=d;c.scrollViewDown();i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(d.parentP).remove()}c.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractJoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var j=this,f=j.getData(),i=false,d={},a={},b=window.getSelection(),k,g,c;try{if(f.saveRange){d.node=f.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(f.saveRange)}g=b.getRangeAt(0);if(g.collapsed){throw Error("Отсутствует выделение")}a.common=g.commonAncestorContainer;d.common=a.common.getElement();c=d.common.getManager();c.setSuspendEvent(true);k=f.viewportId=a.common.viewportId;d.startContainer=g.startContainer.getElement();d.endContainer=g.endContainer.getElement();if(d.startContainer.elementId===d.common.elementId&&d.endContainer.elementId===d.common.elementId&&!d.common.isText){throw Error("Некорректное выделение")}f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,parentStart:g.commonAncestorContainer.parentNode,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};if(d.startContainer.elementId===d.common.elementId&&!d.common.isText){f.range.start=a.common.firstChild;f.range.offset.start=0;d.startContainer=f.range.start.getElement()}else{if(d.endContainer.elementId===d.common.elementId&&!d.common.isText){f.range.end=a.common.lastChild;f.range.offset.end=0;d.endContainer=f.range.end.getElement()}}if(d.startContainer.elementId===d.endContainer.elementId&&!d.common.isText){a.common=f.range.start;f.range.common=a.common;d.common=a.common.getElement()}console.log("remove range "+j.elementName,f.range);a.removed=[];a.cursor=a.common;a.startCursor=f.range.offset.start;if(d.common.isText){a.needText=true;a.parent=a.common.parentNode;d.parent=a.parent.getElement();f.oldValue=a.common.nodeValue;if(f.range.offset.start===0&&f.range.offset.end===a.common.nodeValue.length){a.next=a.common.nextSibling;a.prev=a.common.previousSibling;d.parent.removeAll(d.common,k);if(!d.parent.isStyleHolder){a.needAddText=true;while(!d.parent.isStyleHolder&&d.parent.isEmpty){a.common=a.parent;d.common=a.common.getElement();a.parent=a.parent.parentNode;d.parent=a.parent.getElement()}a.next=a.common.nextSibling;a.prev=a.common.previousSibling;d.parent.remove(d.common);a.parent.removeChild(a.common)}if(!d.parent.isEmpty()){a.cursor=a.next?a.next:a.prev;if(a.next){while(a.cursor&&a.cursor.firstChild){a.cursor=a.cursor.firstChild}}else{while(a.cursor&&a.cursor.lastChild){a.cursor=a.cursor.lastChild}a.startCursor=a.cursor.getElement().isText?a.cursor.nodeValue.length:0}}}else{d.startValue=a.common.nodeValue.substring(0,f.range.offset.start);d.endValue=a.common.nodeValue.substring(f.range.offset.end);d.common.setText(d.startValue+d.endValue);a.common.nodeValue=d.startValue+d.endValue}}else{d.startContainer=g.startContainer.getElement();d.endContainer=g.endContainer.getElement();d.needPrevEnd=d.endContainer.isText&&f.range.offset.end<d.endContainer.text.length;a.common=f.range.common;d.common=a.common.getElement();a.container=f.range.end;a.end=c.splitNode(d,a,f.range.offset.end);a.end=d.needPrevEnd?a.end.previousSibling:a.end;d.end=a.end.getElement();if(d.end.isEmpty()){a.prev=a.end.previousSibling;d.common.remove(d.end);a.common.removeChild(a.end);a.end=a.prev;d.end=a.end.getElement()}a.container=f.range.start;a.start=c.splitNode(d,a,f.range.offset.start);d.start=a.start.getElement();a.prev=a.start.previousSibling;d.prev=a.prev?a.prev.getElement():null;if(d.prev&&d.prev.isEmpty()){d.common.remove(d.prev);a.common.removeChild(a.prev)}a.parent=a.common;d.parent=a.parent.getElement();a.nextCursor=a.end.nextSibling;a.prevCursor=a.start.previousSibling;d.nextCursor=a.nextCursor?a.nextCursor.getElement():null;d.prevCursor=a.prevCursor?a.prevCursor.getElement():null;a.next=a.start;d.next=a.next?a.next.getElement():null;while(d.next&&d.next.elementId!==d.end.elementId){a.buf=a.next.nextSibling;a.removed.push(a.next);d.parent.remove(d.next);a.parent.removeChild(a.next);a.next=a.buf;d.next=a.next?a.next.getElement():null}a.removed.push(a.end);d.parent.remove(d.end);a.parent.removeChild(a.end);a.start=a.prevCursor;d.start=a.start?a.start.getElement():null;a.end=a.nextCursor;d.end=a.end?a.end.getElement():null;if(d.prevCursor&&d.nextCursor&&d.prevCursor.isText&&d.nextCursor.isText){c.joinNode(a.nextCursor);a.cursor=a.prevCursor;f.range.needSplit=true}else{if(!d.parent.isEmpty()){a.cursor=a.nextCursor?a.nextCursor:a.prevCursor;if(a.nextCursor){a.startCursor=0}else{while(a.cursor.firstChild){a.cursor=a.cursor.firstChild}a.startCursor=a.cursor.nodeValue.length}}}}if(d.parent.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(f.viewportId);d.parent.add(d.empty);a.parent.appendChild(a.empty);a.cursor=a.empty}d.parent.sync(f.viewportId);c.setCursor({startNode:a.cursor,startOffset:a.startCursor,focusElement:a.cursor.getElement()});f.nodes=a;f.els=d;j.verifyElement(d.parent);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});console.log("nodes",a);j.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return i},unExecute:function(){var j=this,d=j.getData(),i=false,c={},a={},f=FBEditor.editor.Factory,b,g;try{g=d.range;a=d.nodes;c=d.els;console.log("undo remove range "+j.elementName,d,a);b=c.parent.getManager();b.setSuspendEvent(true);if(c.parent.isEmpty()){a.empty=a.parent.firstChild;c.empty=a.empty.getElement();c.parent.remove(c.empty);a.parent.removeChild(a.empty)}if(a.needText){c.text=f.createElementText(d.oldValue);a.text=c.text.getNode(d.viewportId);if(a.needAddText){a.common=c.common.getNode(d.viewportId);a.deep=b.getDeepFirst(a.common);c.deep=a.deep.getElement();c.deep.add(c.text);a.deep.appendChild(a.text);a.text=a.common;c.text=c.common}if(c.parent.isEmpty()){c.parent.add(c.text);a.parent.appendChild(a.text);g.start=a.text;g.end=a.text}else{if(a.next){c.next=a.next.getElement();c.parent.insertBefore(c.text,c.next);a.parent.insertBefore(a.text,a.next);g.start=a.text;g.end=a.text}else{if(a.prev){c.parent.add(c.text);a.parent.appendChild(a.text);g.start=a.text;g.end=a.text}else{c.common.setText(d.oldValue);a.common.nodeValue=d.oldValue}}}if(a.needAddText){g.start=b.getDeepFirst(a.text);g.end=g.start}}if(a.removed.length){if(g.needSplit){c.common=g.common.getElement();a.container=a.cursor;a.nextCursor=b.splitNode(c,a,g.offset.start)}a.startCursor=a.prevCursor?a.prevCursor:a.removed[0];while(a.startCursor.firstChild){a.startCursor=a.startCursor.firstChild}g.start=a.startCursor;if(a.nextCursor&&!a.nextCursor.parentNode){if(a.prevCursor&&a.prevCursor.parentNode&&a.prevCursor.nextSibling){a.nextCursor=a.prevCursor.nextSibling}else{}c.ignoreJoin=true;g.end=a.nextCursor}Ext.Array.each(a.removed,function(e){if(a.nextCursor){c.nextCursor=a.nextCursor.getElement();c.parent.insertBefore(e.getElement(),c.nextCursor);a.parent.insertBefore(e,a.nextCursor)}else{c.parent.add(e.getElement());a.parent.appendChild(e)}});a.endCursor=a.removed[a.removed.length-1];while(a.endCursor.lastChild){a.endCursor=a.endCursor.lastChild}g.end=a.endCursor;if(a.nextCursor&&!c.ignoreJoin){b.joinNode(a.nextCursor)}if(a.prevCursor){b.joinNode(a.removed[0])}c.parent.removeEmptyText(true)}c.parent.sync(d.viewportId);d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end};b.setCursor(d.saveRange);d.nodes=a;i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractRemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractSplitNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,syncButtons:false,execute:function(){var k=this,f=k.getData(),b=window.getSelection(),g=FBEditor.editor.Factory,j=false,d={},a={},l={},h,c;try{if(f.saveRange){d.node=f.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(f.saveRange)}h=b.getRangeAt(0);f.viewportId=h.startContainer.viewportId;f.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,parentStart:h.commonAncestorContainer.parentNode,collapsed:h.collapsed,offset:{start:h.startOffset,end:h.endOffset}};console.log("split "+k.elementName,f.range);a.node=h.startContainer;d.node=a.node.getElement();a.p=a.node.parentNode;d.p=a.p.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(d.node.isEmpty()&&a.node.firstChild||d.node.isStyleHolder){a.node=a.node.firstChild;d.node=a.node.getElement();a.p=a.node;d.p=a.p.getElement()}while(!d.p.hisName(k.elementName)){a.node=a.p;d.node=a.node.getElement();a.p=a.p.parentNode;d.p=a.p.getElement()}a.parentP=a.p.parentNode;d.parentP=a.parentP.getElement();a.nextP=a.p.nextSibling;d.newP=g.createElement(k.elementName);a.newP=d.newP.getNode(f.viewportId);if(a.nextP){d.nextP=a.nextP.getElement();d.parentP.insertBefore(d.newP,d.nextP);a.parentP.insertBefore(a.newP,a.nextP)}else{d.parentP.add(d.newP);a.parentP.appendChild(a.newP)}if(!d.p.isEmpty()&&f.range.start.getElement().isText){l.isEnd=f.range.end.nodeValue&&f.range.offset.end===f.range.end.nodeValue.length?c.isLastNode(a.p,f.range.end):false;l.isStart=f.range.offset.start===0?c.isFirstNode(a.p,f.range.start):false;a.common=a.p;d.common=d.p;a.container=f.range.start;a.parentContainer=a.container.parentNode;d.parentContainer=a.parentContainer.getElement();l.needSplit=!l.isStart&&!l.isEnd;l.needSplit=d.parentContainer.elementId===d.p.elementId&&f.range.end.nodeValue&&f.range.offset.end===f.range.end.nodeValue.length?false:l.needSplit;f.range.pos=l;if(l.needSplit){a.start=c.splitNode(d,a,f.range.offset.start);d.common.removeEmptyText();d.start=a.start.getElement();a.prev=a.start.previousSibling;d.prev=a.prev?a.prev.getElement():null;if(d.prev&&d.prev.isEmpty()){d.p.remove(d.prev);a.p.removeChild(a.prev)}if(d.start.isEmpty()){d.p.remove(d.start);a.p.removeChild(a.start);a.start=null}}else{if(f.range.offset.start===0){a.start=a.node}else{a.start=a.node.nextSibling}}a.next=a.start;while(a.next){a.buf=a.next.nextSibling;d.next=a.next.getElement();d.newP.add(d.next);a.newP.appendChild(a.next);a.next=a.buf}if(d.p.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(f.viewportId);d.p.add(d.empty);a.p.appendChild(a.empty);a.node=a.empty}}if(d.newP.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(f.viewportId);d.newP.add(d.empty);a.newP.appendChild(a.empty)}d.parentP.sync(f.viewportId);a.cursor=c.getDeepFirst(a.newP);c.setCursor({withoutSyncButtons:true,startNode:a.cursor});k.data.nodes=a;k.verifyElement(d.parentP);c.scrollViewDown();j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},a,c;try{b=h.nodes;a=h.range;console.log("undo split "+g.elementName,b,h);d.p=b.p.getElement();d.node=b.node.getElement();d.newP=b.newP.getElement();d.parentP=b.parentP.getElement();d.prev=b.prev?b.prev.getElement():null;d.start=b.start?b.start.getElement():null;c=d.node.getManager();c.setSuspendEvent(true);b.cursor=a.start;if(d.p.isEmpty()&&d.newP.isEmpty()){b.cursor=b.node}else{if(d.p.isEmpty()){d.p.remove(d.node);b.p.removeChild(b.node)}if(!d.newP.isEmpty()){b.first=b.newP.firstChild;while(b.first){d.first=b.first.getElement();d.p.add(d.first);b.p.appendChild(b.first);b.first=b.newP.firstChild}b.cursor=b.cursor.parentNode?b.cursor:b.p.firstChild}if(d.prev&&d.prev.hisName(d.start.xmlTag)){c.joinNode(b.start);d.parentP.removeEmptyText()}}d.parentP.remove(d.newP);b.parentP.removeChild(b.newP);d.parentP.sync(h.viewportId);h.saveRange={startOffset:a.offset.start,focusElement:d.p};c.setCursor(h.saveRange);h.nodes=b;c.scrollViewUp();f=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractSplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownEnter:function(h){var d=this,g=window.getSelection(),c=d.getNameElement(),a,f,b;h.preventDefault();b=g.getRangeAt(0);a=d.sameStyleHolder();if(!b.collapsed){d.removeRangeNodes()}if(a){f=Ext.create("FBEditor.editor.command."+c+".SplitNodeCommand");if(f.execute()){d.getHistory().add(f)}}},onKeyDownDelete:function(k){var l=this,c=window.getSelection(),a=l.getNameElement(),b={},i={},h=l.getElement().getManager(),m,d,g,j,f;if(k){k.preventDefault()}j=c.getRangeAt(0);b.node=j.startContainer;m=b.node.viewportId;i.node=b.node.getElement();i.p=i.node.hisName(a)?i.node:i.node.parent;d=i.p.getNodeHelper();b.p=d.getNode(m);if(i.node.isEmpty()&&b.node.firstChild){b.node=b.node.firstChild;i.node=b.node.getElement();b.p=b.node;i.p=b.p.getElement()}f=j.startOffset===i.node.getText().length;while(!i.p.hisName(a)){b.node=b.p;i.node=b.node.getElement();b.p=b.node.parentNode?b.node.parentNode:b.node;i.p=b.p.getElement()}b.next=b.node.nextSibling;if(!j.collapsed){l.removeRangeNodes()}else{if(f&&!b.next){i.nextP=i.p.next();if(!i.nextP||!i.nextP.isStyleHolder){g=Ext.create("FBEditor.editor.command."+a+".GetNextHolderCommand")}else{g=Ext.create("FBEditor.editor.command."+a+".JoinNextNodeCommand")}if(g.execute()){l.getHistory().add(g)}}else{b.text=f?b.next:b.node;b.text=h.getDeepFirst(b.text);h.setCursor({withoutSyncButtons:true,startNode:b.text,startOffset:f?0:j.startOffset});b.text.getElement().fireEvent("keyDownDelete",k)}}},onKeyDownBackspace:function(j){var k=this,d=window.getSelection(),b=k.getNameElement(),c={},h={},g=k.getElement().getManager(),f,i,a;j.preventDefault();i=d.getRangeAt(0);c.node=i.startContainer;h.node=c.node.getElement();c.p=c.node.parentNode;h.p=c.p.getElement();if(h.node.isEmpty()&&c.node.firstChild){c.node=c.node.firstChild;h.node=c.node.getElement();c.p=c.node;h.p=c.p.getElement()}a=i.startOffset===0;while(!h.p.hisName(b)){c.node=c.p;h.node=c.node.getElement();c.p=c.node.parentNode;h.p=c.p.getElement()}c.prev=c.node.previousSibling;if(!i.collapsed){k.removeRangeNodes()}else{if(a&&!c.prev){f=Ext.create("FBEditor.editor.command."+b+".JoinPrevNodeCommand");if(f.execute()){k.getHistory().add(f)}}else{c.text=a?c.prev:c.node;c.text=g.getDeepLast(c.text);h.text=c.text.getElement();g.setCursor({withoutSyncButtons:true,startNode:c.text,startOffset:a?h.text.getText().length:i.startOffset-1});c.text.getElement().fireEvent("keyDownBackspace",j)}}},removeRangeNodes:function(){var b=this,a=b.el;a.removeRangeNodes()},sameStyleHolder:function(){var d=this,e=window.getSelection(),c={},a,b;b=e.getRangeAt(0);c.start=b.startContainer.getElement();c.end=b.endContainer.getElement();c.startP=c.start.getStyleHolder();c.endP=c.end.getStyleHolder();a=c.startP.equal(c.endP);return a}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{onKeyDownBackspace:function(d){var b=this,a=b.el,c;if(a.isEmptyLast()){c=Ext.create("FBEditor.editor.command.li.CreateEmptyPCommand");if(c.execute()){b.getHistory().add(c)}}else{FBEditor.editor.element.AbstractStyleHolderElementController.prototype.onKeyDownBackspace.apply(this,arguments)}}},0,0,0,0,0,0,[FBEditor.editor.element.li,"LiElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementController,{scrollTopBy:20,onKeyDownCtrlA:function(h){var i=this,b=window.getSelection(),a={},f={},d,c,g,j;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();d=f.root.getManager();j=a.node.viewportId;f.deepFirst=f.root.getDeepFirst();c=f.deepFirst.getNodeHelper();a.deepFirst=c.getNode(j);f.deepLast=f.root.getDeepLast();c=f.deepLast.getNodeHelper();a.deepLast=c.getNode(j);f.endOffset=f.deepLast.isText?f.deepLast.text.length:0;f.firstP=f.deepFirst.getStyleHolder();c=f.firstP.getNodeHelper();a.firstP=c.getNode(j);a.firstP.setAttribute("contenteditable",false);f.lastP=f.deepLast.getStyleHolder();c=f.lastP.getNodeHelper();a.lastP=c.getNode(j);a.lastP.setAttribute("contenteditable",false);d.setCursor({startNode:a.deepFirst,startOffset:0,endNode:a.deepLast,endOffset:f.endOffset});h.preventDefault()},onKeyDownShiftCtrlHome:function(h){var i=this,b=window.getSelection(),a={},f={},d,c,g,j;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();f.p=f.node.getStyleHolder();d=f.root.getManager();j=a.node.viewportId;f.deepFirst=f.root.getDeepFirst();c=f.deepFirst.getNodeHelper();a.deepFirst=c.getNode(j);f.firstP=f.deepFirst.getStyleHolder();if(f.p.elementId!==f.firstP.elementId){c=f.p.getNodeHelper();a.p=c.getNode(j);a.p.setAttribute("contenteditable",false);c=f.firstP.getNodeHelper();a.firstP=c.getNode(j);a.firstP.setAttribute("contenteditable",false);d.setCursor({startNode:a.deepFirst,startOffset:0,endNode:a.node,endOffset:g.endOffset});c=f.root.getNodeHelper();a.root=c.getNode(j);a.root.scrollTop=0;h.preventDefault()}},onKeyDownShiftCtrlEnd:function(h){var i=this,b=window.getSelection(),a={},f={},d,c,g,j;h.preventDefault();g=b.getRangeAt(0);a.node=g.startContainer;j=a.node.viewportId;f.node=a.node.getElement();f.root=f.node.getRoot();f.p=f.node.getStyleHolder();d=f.root.getManager();f.deepLast=f.root.getDeepLast();c=f.deepLast.getNodeHelper();a.deepLast=c.getNode(j);f.endOffset=f.deepLast.isText?f.deepLast.text.length:0;f.lastP=f.deepLast.getStyleHolder();if(f.p.elementId!==f.lastP.elementId){c=f.p.getNodeHelper();a.p=c.getNode(j);a.p.setAttribute("contenteditable",false);c=f.lastP.getNodeHelper();a.lastP=c.getNode(j);a.lastP.setAttribute("contenteditable",false);d.setCursor({startNode:a.node,startOffset:g.startOffset,endNode:a.deepLast,endOffset:f.endOffset})}c=f.root.getNodeHelper();a.root=c.getNode(j);a.root.scrollTop=a.root.scrollHeight},onKeyDownCtrlHome:function(h){var i=this,b=window.getSelection(),a={},f={},d,c,g,j;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();d=f.root.getManager();j=a.node.viewportId;f.deepFirst=f.root.getDeepFirst();c=f.deepFirst.getNodeHelper();a.deepFirst=c.getNode(j);d.setCursor({startNode:a.deepFirst,startOffset:0});c=f.root.getNodeHelper();a.root=c.getNode(j);a.root.scrollTop=0;h.preventDefault()},onKeyDownCtrlEnd:function(h){var i=this,b=window.getSelection(),a={},f={},d,c,g,j;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();d=f.root.getManager();j=a.node.viewportId;f.deepLast=f.root.getDeepLast();c=f.deepLast.getNodeHelper();a.deepLast=c.getNode(j);f.endOffset=f.deepLast.isText?f.deepLast.text.length:0;d.setCursor({startNode:a.deepLast,startOffset:f.endOffset});c=f.root.getNodeHelper();a.root=c.getNode(j);a.root.scrollTop=a.root.scrollHeight;h.preventDefault()},onKeyDownShiftCtrlLeft:function(j){var k=this,d=window.getSelection(),c={},h={},g,f,i,l,a,b;i=d.getRangeAt(0);c.node=i.startContainer;h.node=c.node.getElement();l=c.node.viewportId;g=h.node.getManager();a=k.isStart();h.p=h.node.getStyleHolder();h.deepFirst=h.p.getDeepFirst();h.prev=k.getPrevElement(h.p);h.deepLast=h.prev?h.prev.getDeepLast():null;if(a&&h.deepLast){f=h.deepLast.getNodeHelper();c.deepLast=f.getNode(l);k.disableEditable(c.deepLast);k.disableEditable(c.node);if(i.collapsed){h.lastLength=h.deepLast.isText?h.deepLast.getText().length:0;g.setCursor({startNode:c.deepLast,startOffset:h.lastLength,endNode:i.endContainer,endOffset:i.endOffset})}}else{b=false;h.nodePrev=k.getPrevElement(h.node);if(h.deepFirst.equal(h.node)){h.firstText=h.node.getText().substr(0,i.startOffset);b=!/ /.test(h.firstText)&&/^[^\wа-яА-Я]+/i.test(h.firstText)}else{if(h.nodePrev){h.nodePrevFirst=h.nodePrev.getDeepLast();b=h.nodePrevFirst.equal(h.deepFirst)&&/^[^\wа-яА-Я]+/i.test(h.nodePrev.getText())}}if(b){f=h.deepFirst.getNodeHelper();c.deepFirst=f.getNode(l);g.setCursor({startNode:i.endContainer,startOffset:i.endOffset,endNode:c.deepFirst,endOffset:0})}}},onKeyDownShiftCtrlRight:function(j){var k=this,c=window.getSelection(),b={},h={},g,d,i,l,f,a;i=c.getRangeAt(0);b.node=i.endContainer;h.node=b.node.getElement();l=b.node.viewportId;g=h.node.getManager();h.p=h.node.getStyleHolder();h.deepLast=h.p.getDeepLast();h.next=k.getNextElement(h.p);h.deepFirst=h.next?h.next.getDeepFirst():null;f=k.isEnd();if(f&&h.deepFirst){d=h.deepFirst.getNodeHelper();b.deepFirst=d.getNode(l);k.disableEditable(b.deepFirst);k.disableEditable(b.node);if(i.collapsed){g.setCursor({startNode:i.startContainer,startOffset:i.startOffset,endNode:b.deepFirst,endOffset:0})}}else{a=false;h.nodeNext=k.getNextElement(h.node);if(h.deepLast.equal(h.node)){h.lastText=h.node.getText().substr(i.endOffset);h.lastText=h.lastText.replace(/^ /,"");a=!/ /.test(h.lastText)&&/[^\wа-яА-Я]+$/i.test(h.lastText)}else{if(h.nodeNext){h.nodeNextLast=h.nodeNext.getDeepLast();a=h.nodeNextLast.equal(h.deepLast)&&/[^\wа-яА-Я]+$/i.test(h.nodeNext.getText())}}if(a){d=h.deepLast.getNodeHelper();b.deepLast=d.getNode(l);h.lastLength=h.deepLast.getText().length;g.setCursor({startNode:i.startContainer,startOffset:i.startOffset,endNode:b.deepLast,endOffset:h.lastLength})}}},onKeyDownShiftLeft:function(h){var i=this,b=window.getSelection(),a={},f={},k,d,c,g,j;g=b.getRangeAt(0);a.node=g.startContainer;f.node=a.node.getElement();f.p=f.node.getStyleHolder();a.end=g.endContainer;f.end=a.end.getElement();f.endP=f.end.getStyleHolder();c=f.p.getNodeHelper();j=a.node.viewportId;a.p=c.getNode(j);d=f.node.getManager();k={startNode:g.startContainer,startOffset:g.startOffset,endNode:g.endContainer,endOffset:g.endOffset};if(g.collapsed){d.selectionToLeft=true;a.p.setAttribute("contenteditable",false)}if(d.selectionToLeft){if(k.startOffset===0){f.text=null;f.prev=i.getPrevElement(f.node);while(!f.text&&f.prev){f.text=f.prev.getDeepLast();f.prev=i.getPrevElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(j);k.startNode=a.text;k.startOffset=f.text.getText().length-1;f.prevP=f.text.getStyleHolder();if(!f.p.equal(f.prevP)){c=f.prevP.getNodeHelper();a.prevP=c.getNode(j);a.prevP.setAttribute("contenteditable",false)}}}else{k.startOffset--;if(f.p.equal(f.endP)){}}}else{if(k.endOffset===0){f.text=null;f.node=k.endNode.getElement();f.prev=i.getPrevElement(f.node);while(!f.text&&f.prev){f.text=f.prev.getDeepLast();f.prev=i.getPrevElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(j);k.endNode=a.text;k.endOffset=f.text.getText().length-1}}else{k.endOffset--}f.start=k.startNode.getElement();f.end=k.endNode.getElement();if(f.start.equal(f.end)&&k.startOffset===k.endOffset){i.enableAllEditable()}}d.setCursor(k);h.preventDefault()},onKeyDownShiftRight:function(h){var i=this,b=window.getSelection(),a={},f={},k,d,c,g,j;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.p=f.node.getStyleHolder();a.end=g.endContainer;f.end=a.end.getElement();f.endP=f.end.getStyleHolder();c=f.p.getNodeHelper();j=a.node.viewportId;a.p=c.getNode(j);d=f.node.getManager();if(g.collapsed){d.selectionToLeft=false;a.p.setAttribute("contenteditable",false)}k={startNode:g.startContainer,startOffset:g.startOffset,endNode:g.endContainer,endOffset:g.endOffset};if(g.collapsed){d.selectionToLeft=false;a.p.setAttribute("contenteditable",false)}if(!d.selectionToLeft){if(k.endOffset===f.node.getText().length){f.text=null;f.next=i.getNextElement(f.node);while(!f.text&&f.next){f.text=f.next.getDeepFirst();f.next=i.getNextElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(j);k.endNode=a.text;k.endOffset=1;f.nextP=f.text.getStyleHolder();if(!f.p.equal(f.nextP)){c=f.nextP.getNodeHelper();a.nextP=c.getNode(j);a.nextP.setAttribute("contenteditable",false)}}}else{k.endOffset++}}else{f.node=k.startNode.getElement();if(k.startOffset===f.node.getText().length){f.text=null;f.next=i.getNextElement(f.node);while(!f.text&&f.next){f.text=f.next.getDeepLast();f.next=i.getNextElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(j);k.startNode=a.text;k.startOffset=1}}else{k.startOffset++}f.start=k.startNode.getElement();f.end=k.endNode.getElement();if(f.start.equal(f.end)&&k.startOffset===k.endOffset){i.enableAllEditable()}}d.setCursor(k);h.preventDefault()},onKeyDownShiftUp:function(j){var k=this,c=window.getSelection(),a={},g={},i={},b,f,d,h,l;h=c.getRangeAt(0);a.start=h.startContainer;g.start=a.start.getElement();g.startP=g.start.getStyleHolder();a.end=h.endContainer;g.end=a.end.getElement();g.endP=g.end.getStyleHolder();l=a.start.viewportId;f=g.start.getManager();if(f.isSuspendEvent()){j.preventDefault();return}i.range={startOffset:h.startOffset,startContainer:h.startContainer,endContainer:h.endContainer,endOffset:h.endOffset};i.start=f.getCursorPosition();i.end=f.getCursorPosition(true);g.last=g.endP.getDeepLast();d=g.last.getNodeHelper();g.length=g.last.isText?g.last.getText().length:0;i.last=d.getXY(l,g.length);g.first=g.startP.getDeepFirst();d=g.first.getNodeHelper();i.first=d.getXY(l,0);if(f.selectionToUp===null||!f.selectionToUp&&i.start.y===i.end.y){f.selectionToUp=true;f.selectionToLeft=true}g.node=f.selectionToUp?g.startP:g.endP;i.pos=f.selectionToUp?i.start:i.end;b=i.pos.y===i.first.y;if(g.node.isEmpty()||b){j.preventDefault();k.selectionToUp(i)}else{if(!g.node.isEmpty()){if(f.selectionToUp){f.setCursor({endNode:i.range.startContainer,endOffset:i.range.startOffset,startNode:i.range.endContainer,startOffset:i.range.endOffset})}else{f.setCursor({startNode:i.range.startContainer,startOffset:i.range.startOffset,endNode:i.range.endContainer,endOffset:i.range.endOffset})}}}},onKeyDownShiftDown:function(j){var k=this,b=window.getSelection(),a={},g={},i={},d,f,c,h,l;h=b.getRangeAt(0);a.start=h.startContainer;l=a.start.viewportId;g.start=a.start.getElement();g.startP=g.start.getStyleHolder();f=g.start.getManager();if(f.isSuspendEvent()){j.preventDefault();return}a.end=h.endContainer;g.end=a.end.getElement();g.endP=g.end.getStyleHolder();i.range={startContainer:h.startContainer,startOffset:h.startOffset,endContainer:h.endContainer,endOffset:h.endOffset};i.start=f.getCursorPosition();i.end=f.getCursorPosition(true);g.last=g.endP.getDeepLast();c=g.last.getNodeHelper();g.length=g.last.isText?g.last.getText().length:0;i.last=c.getXY(l,g.length);g.first=g.startP.getDeepFirst();c=g.first.getNodeHelper();i.first=c.getXY(l,0);if(f.selectionToUp===null||f.selectionToUp&&i.start.y===i.end.y){f.selectionToUp=false;f.selectionToLeft=false}g.node=f.selectionToUp?g.startP:g.endP;i.pos=f.selectionToUp?i.start:i.end;d=i.pos.y===i.last.y;if(g.node.isEmpty()||d){j.preventDefault();k.selectionToDown(i)}else{if(!g.node.isEmpty()){if(!f.selectionToUp){f.setCursor({startOffset:i.range.startOffset,startNode:i.range.startContainer,endNode:i.range.endContainer,endOffset:i.range.endOffset})}else{f.setCursor({endNode:i.range.startContainer,endOffset:i.range.startOffset,startNode:i.range.endContainer,startOffset:i.range.endOffset})}}}},onKeyDownLeft:function(i){var g=this,h=window.getSelection(),c={},f={},d,b,a;b=h.getRangeAt(0);c.node=b.startContainer;f.node=c.node.getElement();d=f.node.getManager();g.enableAllEditable();d.selectionToLeft=null;d.selectionToUp=null;if(!b.collapsed){d.setCursor({startNode:c.node,startOffset:b.startOffset});i.preventDefault();return}a=g.isStart();if(a){g.cursorToLeft(i)}},onKeyDownRight:function(i){var f=this,h=window.getSelection(),b={},d={},c,a,g;a=h.getRangeAt(0);b.node=a.endContainer;d.node=b.node.getElement();c=d.node.getManager();f.enableAllEditable();c.selectionToLeft=null;c.selectionToUp=null;if(!a.collapsed){c.setCursor({startNode:b.node,startOffset:a.endOffset});i.preventDefault();return}g=f.isEnd();if(g){f.cursorToRight(i)}},onKeyDownUp:function(i){var j=this,b=window.getSelection(),a={},f={},h={},d,c,g,k;g=b.getRangeAt(0);a.node=g.startContainer;k=a.node.viewportId;f.node=a.node.getElement();f.p=f.node.getStyleHolder();d=f.node.getManager();if(d.isSuspendEvent()){i.preventDefault();return}j.enableAllEditable();d.selectionToLeft=null;d.selectionToUp=true;if(!g.collapsed){d.setCursor({startNode:g.startContainer,startOffset:g.startOffset})}h.range={startOffset:g.startOffset,startContainer:g.startContainer,endOffset:g.endOffset,endContainer:g.endContainer};h.pos=d.getCursorPosition();f.first=f.p.getDeepFirst();c=f.first.getNodeHelper();h.pos.first=c.getXY(k,0);if(f.node.isEmpty()||h.pos.y===h.pos.first.y){i.preventDefault();j.cursorToUp(h)}},onKeyDownDown:function(i){var j=this,b=window.getSelection(),a={},f={},h={},d,c,g,k;g=b.getRangeAt(0);a.node=g.endContainer;k=a.node.viewportId;f.node=a.node.getElement();f.p=f.node.getStyleHolder();d=f.node.getManager();if(d.isSuspendEvent()){i.preventDefault();return}j.enableAllEditable();d.selectionToLeft=null;d.selectionToUp=false;if(!g.collapsed){d.setCursor({startNode:a.node,startOffset:g.endOffset})}h.range={startOffset:g.startOffset,startContainer:g.startContainer,endOffset:g.endOffset,endContainer:g.endContainer};h.pos=d.getCursorPosition(true);f.last=f.p.getDeepLast();c=f.last.getNodeHelper();f.length=f.node.isText?f.node.getText().length:0;h.pos.last=c.getXY(k,f.length);if(f.node.isEmpty()||h.pos.y===h.pos.last.y){i.preventDefault();j.cursorToDown(h)}},isStart:function(){var e=this,f=window.getSelection(),c={},d={},b,a;b=f.getRangeAt(0);c.node=b.startContainer;d.node=c.node.getElement();d.p=d.node.getStyleHolder();d.deepFirst=d.p.getDeepFirst();a=d.node.isEmpty()||d.node.isImg&&!d.node.prev()||d.node.isStyleHolder&&d.node.children.length===1&&d.node.first().isImg||b.startOffset===0&&d.deepFirst.elementId===d.node.elementId;return a},isEnd:function(){var d=this,f=window.getSelection(),b={},c={},a,e;a=f.getRangeAt(0);b.node=a.endContainer;c.node=b.node.getElement();c.p=c.node.getStyleHolder();c.deepLast=c.p.getDeepLast();e=c.node.isEmpty()||c.node.isImg&&!c.node.next()||c.node.isStyleHolder&&c.node.children.length===1&&c.node.first().isImg||a.endOffset===b.node.length&&c.deepLast.elementId===c.node.elementId;return e},selectionToUp:function(g){var f=this,b={},d={},e=g,h,c,a;a=e.range;b.node=a.startContainer;d.node=b.node.getElement();c=d.node.getManager();h=f.getCursorUp(e);if(h){f.disableEditable(h.node);f.disableEditable(b.node);if(c.selectionToUp){c.setCursor({startNode:h.node,startOffset:h.offset,endNode:a.endContainer,endOffset:a.endOffset})}else{d.cur=h.node.getElement();if(d.cur.equal(d.node)){f.enableAllEditable()}c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:h.node,endOffset:h.offset})}c.syncButtons()}else{c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:a.endContainer,endOffset:a.endOffset})}},selectionToDown:function(g){var f=this,b={},d={},e=g,h,c,a;a=e.range;b.node=a.endContainer;d.node=b.node.getElement();c=d.node.getManager();h=f.getCursorDown(e);if(h){f.disableEditable(h.node);f.disableEditable(b.node);if(!c.selectionToUp){c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:h.node,endOffset:h.offset})}else{d.cur=h.node.getElement();if(d.cur.equal(d.node)){f.enableAllEditable()}c.setCursor({startNode:h.node,startOffset:h.offset,endNode:a.endContainer,endOffset:a.endOffset})}c.syncButtons()}else{c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:a.endContainer,endOffset:a.endOffset})}},cursorToDown:function(g){var f=this,b={},d={},e=g,h,c,a;a=e.range;b.node=a.endContainer;d.node=b.node.getElement();c=d.node.getManager();h=f.getCursorDown(e);if(h){c.setCursor({startNode:h.node,startOffset:h.offset});c.syncButtons()}},cursorToUp:function(g){var f=this,b={},d={},e=g,h,c,a;a=e.range;b.node=a.startContainer;d.node=b.node.getElement();c=d.node.getManager();h=f.getCursorUp(e);if(h){c.setCursor({startNode:h.node,startOffset:h.offset});c.syncButtons()}},cursorToLeft:function(h){var i=this,b=window.getSelection(),a={},f={},d,c,g,j;g=b.getRangeAt(0);a.node=g.startContainer;f.node=a.node.getElement();j=a.node.viewportId;d=f.node.getManager();f.p=f.node.getStyleHolder();f.prev=i.getPrevElement(f.p);if(f.prev){f.lastDeep=f.prev.getDeepLast();c=f.lastDeep.getNodeHelper();a.lastDeep=c.getNode(j);d.setCursor({startNode:a.lastDeep,startOffset:a.lastDeep.length});h.preventDefault()}},cursorToRight:function(h){var i=this,b=window.getSelection(),a={},f={},d,c,g,j;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();j=a.node.viewportId;d=f.node.getManager();f.p=f.node.getStyleHolder();f.next=i.getNextElement(f.p);if(f.next){f.firstDeep=f.next.getDeepFirst();c=f.firstDeep.getNodeHelper();a.firstDeep=c.getNode(j);d.setCursor({startNode:a.firstDeep});h.preventDefault()}},getCursorUp:function(f){var j=this,a={},d={},g=f,m=null,c,h,b,k,l;h=g.range;a.node=h.startContainer;d.node=a.node.getElement();l=a.node.viewportId;c=d.node.getManager();if(!c.selectionToUp){a.node=h.endContainer;d.node=a.node.getElement()}d.p=d.node.isStyleHolder?d.node:d.node.getStyleHolder();b=d.p.getNodeHelper();a.p=b.getNode(l);d.prev=j.getPrevElement(d.p);if(d.prev){d.lastDeep=d.prev.getDeepLast();b=d.lastDeep.getNodeHelper();a.lastDeep=b.getNode(l);if(d.lastDeep.isEmpty()){d.elem=d.lastDeep;d.offset=0}else{d.length=d.lastDeep.isText?d.lastDeep.getText().length:0;k=b.getXY(l,d.length);d.root=c.getContent();b=d.root.getNodeHelper();a.root=b.getNode(l);d.prevP=d.lastDeep.getStyleHolder();b=d.prevP.getNodeHelper();b.splitNode(l);try{k.curX=g.pos.x;a.elem=document.elementFromPoint(k.curX,k.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;while(!a.elem||!d.elem&&!a.elem.getTextElement){d.p.parent.clearMapCoords();a.root.scrollTop-=j.scrollTopBy;k.y+=j.scrollTopBy;a.elem=document.elementFromPoint(k.curX,k.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;if(k.y>10000){throw Error("Ошибка зацикливания. Не удается прокрутить окно вверх.")}}if(d.elem&&d.elem.isImg){d.offset=0}else{if(k.x>g.pos.x){while(!a.elem.getTextElement){k.curX+=5;a.elem=document.elementFromPoint(k.curX,k.y)}d.elem=a.elem.getTextElement();d.offset=Number(a.elem.getAttribute("data-offset"))}else{d.elem=d.lastDeep;d.offset=d.lastDeep.text.length}}}catch(i){Ext.log({level:"error",msg:"Не удалось рассчитать координаты курсора для смещения вверх"})}b.joinNode(l)}if(d.elem){b=d.elem.getNodeHelper();a.elem=b.getNode(l);m={node:a.elem,offset:d.offset}}}return m},getCursorDown:function(f){var j=this,a={},d={},g=f,n=null,c,h,b,l,m,k;h=g.range;a.node=h.endContainer;d.node=a.node.getElement();m=a.node.viewportId;c=d.node.getManager();if(c.selectionToUp){a.node=h.startContainer;d.node=a.node.getElement()}d.p=d.node.isStyleHolder?d.node:d.node.getStyleHolder();b=d.p.getNodeHelper();a.p=b.getNode(m);d.next=j.getNextElement(d.p);if(d.next){d.firstDeep=d.next.getDeepFirst();b=d.firstDeep.getNodeHelper();a.firstDeep=b.getNode(m);if(d.firstDeep.isEmpty()){d.elem=d.firstDeep;d.offset=0}else{l=b.getXY(m,0);d.lastDeep=d.next.getDeepLast();b=d.lastDeep.getNodeHelper();d.lastLength=d.lastDeep.isText?d.lastDeep.getText().length:0;k=b.getXY(m,d.lastLength);d.root=c.getContent();b=d.root.getNodeHelper();a.root=b.getNode(m);d.nextP=d.firstDeep.getStyleHolder();b=d.nextP.getNodeHelper();a.nextP=b.getNode(m);b.splitNode(m);try{l.curX=g.pos.x;a.elem=document.elementFromPoint(l.curX,l.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;while(!a.elem||!d.elem&&!a.elem.getTextElement){d.p.parent.clearMapCoords();a.root.scrollTop+=j.scrollTopBy;l.y-=j.scrollTopBy;a.elem=document.elementFromPoint(l.curX,l.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;if(l.y<-100){throw Error("Ошибка зацикливания. Не удается прокрутить окно вниз.")}}if(d.elem&&d.elem.isImg){d.offset=0}else{if(l.x>g.pos.x){while(!a.elem.getTextElement){l.curX+=5;a.elem=document.elementFromPoint(l.curX,l.y)}}else{if(k.x<g.pos.x){while(!a.elem.getTextElement){l.curX-=5;a.elem=document.elementFromPoint(l.curX,l.y)}}}d.elem=a.elem.getTextElement();d.offset=Number(a.elem.getAttribute("data-offset"))}}catch(i){Ext.log({level:"error",msg:"Не удалось рассчитать координаты курсора для смещения вниз"})}b.joinNode(m)}if(d.elem){b=d.elem.getNodeHelper();a.elem=b.getNode(m);n={node:a.elem,offset:d.offset}}}return n},getPrevElement:function(b){var a={};a.prev=b.prev();a.parent=b.parent;while(!a.prev&&a.parent){a.prev=a.parent.prev();a.parent=a.parent.parent}return a.prev},getNextElement:function(b){var a={};a.next=b.next();a.parent=b.parent;while(!a.next&&a.parent){a.next=a.parent.next();a.parent=a.parent.parent}return a.next},disableEditable:function(e){var d=this,b={},a={},c,f;b.node=e.getElement();f=e.viewportId;b.p=b.node.getStyleHolder();c=b.p.getNodeHelper();a.p=c.getNode(f);a.p.setAttribute("contenteditable",false)}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit,{onKeyDownBackspace:function(c){var b=this,a=b.el;b.mixins.controller.onKeyDownBackspace.apply(b,arguments)}},0,0,0,0,0,[["controller",FBEditor.editor.element.li.LiElementController]],[FBEditor.editor.element.li,"LiElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.li.LiElementController",htmlTag:"li",xmlTag:"li",cls:"el-li el-styleholder",isLi:true,getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<li(.*?)>\n\s+<br(.*?)\/>\n\s+<\/li>/gi,"<li></li>");return a},isEmptyLast:function(){var a=this,b,c;c=a.isEmpty();b=a.isLast();return b&&c}},0,0,0,0,0,0,[FBEditor.editor.element.li,"LiElement"],0));(Ext.cmd.derive("FBEditor.editor.element.marker.img.ImgElement",FBEditor.editor.element.img.ImgElement,{cls:"el-img-marker",setNode:function(b){var a=this;FBEditor.editor.element.img.ImgElement.prototype.setNode.apply(this,arguments);b.getElement=function(){return a.parent.parent}}},0,0,0,0,0,0,[FBEditor.editor.element.marker.img,"ImgElement"],0));(Ext.cmd.derive("FBEditor.editor.element.marker.MarkerElement",FBEditor.editor.element.AbstractElement,{htmlTag:"marker",xmlTag:"marker",cls:"el-marker",img:null,isMarker:true,constructor:function(){var b=this,a;FBEditor.editor.element.AbstractElement.prototype.constructor.apply(this,arguments);a=b.children[0];b.children=[];b.img=Ext.create("FBEditor.editor.element.marker.img.ImgElement",a.attributes);b.img.parent=b},getNode:function(d){var c=this,a=c.htmlTag,b;b=document.createElement(a);b.viewportId=d;c.setNode(b);b.appendChild(c.img.getNode(d));return b},getXml:function(k,j){var i=this,l=FBEditor.editor.element.AbstractElement,d=i.img,m=i.xmlTag,h="",f="",c="",a="",b={},e,g;l.countSpaces++;if(!j){b=i.getFormatOptionsXml();c=b.spacesBefore;a=b.spacesAfter;h=b.nlBefore;f=b.nlAfter}g=i.getAttributesXml();e=c+"<"+m;e+=g?" "+g:"";if(d){l.countSpaces++;e+=">"+h;e+=d.getXml(k,j);e+=a+"</"+m+">"+f;l.countSpaces--}else{e+="/>"+f}l.countSpaces--;return e},setNode:function(c){var b=this,a=b.parent;FBEditor.editor.element.AbstractElement.prototype.setNode.apply(this,arguments);c.getElement=function(){return a}},initCls:function(){var c=this,b=c.parent,e=b.first(),a,d;d=e.getName();a="el-marker-"+d;c.baseCls=a;FBEditor.editor.element.AbstractElement.prototype.initCls.apply(this,arguments)}},1,0,0,0,0,0,[FBEditor.editor.element.marker,"MarkerElement"],0));(Ext.cmd.derive("FBEditor.editor.element.note.NoteElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.note,"NoteElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.note.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"note"},0,0,0,0,0,0,[FBEditor.editor.command.note,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.note.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"note"},0,0,0,0,0,0,[FBEditor.editor.command.note,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.note.NoteElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.note.NoteElementController",htmlTag:"note",xmlTag:"note",cls:"el-note",showedOnTree:false,defaultAttributes:{href:"undefined",role:"auto",autotext:"1"},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,e){if(d==="href"&&b){e=e.replace(/&/g,"")}a+=(d==="role"&&!b?"xlink:":"")+d+'="'+e+'" '});a=a.trim();return a},getBlock:function(){return this}},0,0,0,0,0,0,[FBEditor.editor.element.note,"NoteElement"],0));(Ext.cmd.derive("FBEditor.editor.command.notebody.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"notebody",createElement:function(c,b){var d=this,e=d.getData(),a=FBEditor.editor.Factory;b.parent=b.node.parentNode;b.node=b.parent.getElement().isNote?b.parent:b.node;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;c.node=a.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(e.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command.notebody,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.notebody.NotebodyElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,b){var k=this,h={},d={},c=k.getNameElement(),f,j,a,i,g;e=e||window.getSelection();i=e.getRangeAt(0);d.node=i.endContainer;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement();f=h.node.getManager();while(!(h.parent.isNotes||h.parent.isRoot)){d.node=d.parent;h.node=d.node.getElement();d.parent=d.node.parentNode;h.parent=d.parent.getElement()}if(!h.parent.isNotes){return false}d.parent=d.node.parentNode;h.parent=d.parent.getElement();d.first=d.parent.firstChild;h.first=d.first?d.first.getElement():null;g=f.getNamesElements(h.parent);if(!h.first.isTitle){g.unshift(c)}else{g.splice(1,0,c)}a=f.getSchema();c=h.parent.getName();j=a.verify(c,g)?d.node:false;return j}},0,0,0,0,0,0,[FBEditor.editor.element.notebody,"NotebodyElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.notebody.NotebodyElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.notebody.NotebodyElementController",htmlTag:"notebody",xmlTag:"notebody",cls:"el-notebody",splittable:true,isNotebody:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Сноска");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.notebody,"NotebodyElement"],0));(Ext.cmd.derive("FBEditor.editor.command.notes.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"notes",createElement:function(b,a){var c=this,d=c.getData();a.parent=d.node;b.parent=a.parent.getElement();b.node=FBEditor.editor.Factory.createElement(c.elementName);b=Ext.apply(b,b.node.createScaffold());a.node=b.node.getNode(d.viewportId);b.parent.add(b.node);a.parent.appendChild(a.node)}},0,0,0,0,0,0,[FBEditor.editor.command.notes,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.notes.NotesElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,d){var c={},b={},a,f;a=e&&e.rangeCount?e.getRangeAt(0):null;if(!a){return false}b.node=a.startContainer;f=b.node.viewportId;c.node=b.node.getElement();c.root=c.node.getRoot();b.root=c.root.nodes[f];return b.root}},0,0,0,0,0,0,[FBEditor.editor.element.notes,"NotesElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.notes.NotesElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.notes.NotesElementController",htmlTag:"notes",xmlTag:"notes",cls:"el-notes",isNotes:true,createScaffold:function(){var b=this,a={};a.title=FBEditor.editor.Factory.createElement("title");a=Ext.apply(a,a.title.createScaffold());b.add(a.title);a.notebody=FBEditor.editor.Factory.createElement("notebody");a=Ext.apply(a,a.notebody.createScaffold());b.add(a.notebody);return a}},0,0,0,0,0,0,[FBEditor.editor.element.notes,"NotesElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractLiHolderElement",FBEditor.editor.element.AbstractElement,{isLiHolder:true,createScaffold:function(){var c=this,a=FBEditor.editor.Factory,b={};b.li=a.createElement("li");b.t=a.createElementText("Список");b.li.add(b.t);c.add(b.li);return b},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(d){var e=a.createElement("p");Ext.Array.each(d.children,function(f){e.add(f)});b.add(e)})}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractLiHolderElement"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateLiHolderCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var k=this,f=k.getData(),j=false,d={},a={},g=FBEditor.editor.Factory,c,m,l,b,h;try{if(f.saveRange){d.node=f.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(f.saveRange)}b=f.sel||window.getSelection();h=b.getRangeAt(0);d.node=f.node.getElement();c=d.node.getManager();c.setSuspendEvent(true);f.viewportId=f.node.viewportId;l=f.viewportId;f.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,parentStart:h.startContainer.parentNode,collapsed:h.collapsed,offset:{start:h.startOffset,end:h.endOffset}};a.pp=[];a.firstP=f.node;d.firstP=a.firstP.getElement();a.pp.push(a.firstP);m=d.firstP.isLi;f.isInner=m;a.lastP=h.endContainer;d.lastP=a.lastP.getElement();d.lastP=m?d.lastP.getParentName("li"):d.lastP.getParentName("p");a.lastP=d.lastP?d.lastP.nodes[l]:null;if(d.firstP.elementId!==d.lastP.elementId){a.next=a.firstP.nextSibling;d.next=a.next?a.next.getElement():null;while(d.next&&d.next.isP&&d.next.elementId!==d.lastP.elementId){a.pp.push(a.next);a.next=a.next.nextSibling;d.next=a.next?a.next.getElement():null}if(d.next&&d.next.elementId===d.lastP.elementId){a.pp.push(a.next)}}a.parent=a.firstP.parentNode;d.parent=a.parent.getElement();d.node=g.createElement(k.elementName);a.node=d.node.getNode(f.viewportId);d.parent.insertBefore(d.node,d.firstP);a.parent.insertBefore(a.node,a.firstP);Ext.Array.each(a.pp,function(o){var e={},n={};n.p=o;e.p=n.p.getElement();e.node=g.createElement("li");n.node=e.node.getNode(f.viewportId);d.node.add(e.node);a.node.appendChild(n.node);n.first=n.p.firstChild;e.first=n.first?n.first.getElement():null;while(e.first){e.node.add(e.first);n.node.appendChild(n.first);n.first=n.p.firstChild;e.first=n.first?n.first.getElement():null}d.parent.remove(e.p);a.parent.removeChild(n.p)});d.parent.sync(f.viewportId);c.setSuspendEvent(false);c.setCursor({withoutSyncButtons:true,startNode:f.range.start,startOffset:f.range.offset.start,focusElement:d.node.children[0]});f.saveNodes=a;k.verifyElement(d.parent);j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var j=this,d=j.getData(),i=false,c={},a={},f=FBEditor.editor.Factory,b,g,k,l;try{g=d.range;a=d.saveNodes;k=a.node.viewportId;l=d.isInner;c.node=a.node.getElement();c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);a.pp=[];a.li=a.node.firstChild;c.li=a.li?a.li.getElement():null;while(c.li){c.p=l?f.createElement("li"):f.createElement("p");a.p=c.p.getNode(k);a.pp.push(a.p);c.parent.insertBefore(c.p,c.node);a.parent.insertBefore(a.p,a.node);a.first=a.li.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){c.p.add(c.first);a.p.appendChild(a.first);a.first=a.li.firstChild;c.first=a.first?a.first.getElement():null}a.li=a.li.nextSibling;c.li=a.li?a.li.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(k);b.setSuspendEvent(false);d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end,focusElement:g.common.getElement()};b.setCursor(d.saveRange);d.node=a.pp[0];i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);b.updateTree();return i}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateLiHolderCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ol.CreateCommand",FBEditor.editor.command.AbstractCreateLiHolderCommand,{elementName:"ol"},0,0,0,0,0,0,[FBEditor.editor.command.ol,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ol.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"ol"},0,0,0,0,0,0,[FBEditor.editor.command.ol,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractLiHolderElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(d){var c={},b={},e,a;a=d.getRangeAt(0);b.node=a.startContainer;e=b.node.viewportId;c.node=b.node.getElement?b.node.getElement():null;c.p=c.node?c.node.getParentName("p"):null;b.p=c.p?c.p.nodes[e]:null;if(!b.p){c.li=c.node?c.node.getParentName("li"):null;b.node=c.li?c.li.nodes[e]:null}else{b.node=b.p}return b.node}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractLiHolderElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ol.OlElementController",FBEditor.editor.element.AbstractLiHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.ol,"OlElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ol.OlElement",FBEditor.editor.element.AbstractLiHolderElement,{controllerClass:"FBEditor.editor.element.ol.OlElementController",htmlTag:"ol",xmlTag:"ol",cls:"el-ol"},0,0,0,0,0,0,[FBEditor.editor.element.ol,"OlElement"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit,{},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.command.p.GetNextHolderCommand",FBEditor.editor.command.styleholder.AbstractGetNextHolderCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"GetNextHolderCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.p.PElementController",htmlTag:"p",xmlTag:"p",cls:"el-p el-styleholder",isP:true,getXml:function(a,c){var e=this,d=e.parent,b;b=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);if(e.isEmpty()){if(!c){b=b.replace(/<p(.*?)>\n\s*<br(.*?)\/>\n\s*<\/p>/gi,"<br$2/>")}else{b=b.replace(/<p(.*?)><br(.*?)\/><\/p>/gi,"<br$2/>")}if(!d.hisName("section")&&d.first().equal(e)){b="<p></p>"}}return b}},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElement"],0));(Ext.cmd.derive("FBEditor.editor.element.paperpagebreak.PaperpagebreakElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.paperpagebreak,"PaperpagebreakElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.paperpagebreak.PaperpagebreakElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.paperpagebreak.PaperpagebreakElementController",htmlTag:"paper-page-break",xmlTag:"paper-page-break",cls:"el-paperpagebreak"},0,0,0,0,0,0,[FBEditor.editor.element.paperpagebreak,"PaperpagebreakElement"],0));(Ext.cmd.derive("FBEditor.editor.command.poem.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"poem"},0,0,0,0,0,0,[FBEditor.editor.command.poem,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.poem.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"poem",unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{f=d.range;a=d.saveNodes;j=a.node.viewportId;console.log("undo create range "+i.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);a.first=a.stanza.firstChild;c.first=a.first.getElement();while(c.first){c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.stanza.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(j);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);b.updateTree();return h},createNewElement:function(c,b){var d=this,e=d.getData(),a=FBEditor.editor.Factory;c.node=a.createElement(d.elementName);b.node=c.node.getNode(e.viewportId);c.stanza=a.createElement("stanza");b.stanza=c.stanza.getNode(e.viewportId);c.node.add(c.stanza);b.node.appendChild(b.stanza);c.common.insertBefore(c.node,c.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;c.next=b.next.getElement();while(c.next&&c.next.elementId!==c.endContainer.elementId){b.buf=b.next.nextSibling;c.stanza.add(c.next);b.stanza.appendChild(b.next);b.next=b.buf;c.next=b.next?b.next.getElement():null}if(c.next&&c.next.elementId===c.endContainer.elementId&&!e.range.joinEndContainer){c.stanza.add(c.next);b.stanza.appendChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command.poem,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.poem.PoemElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.poem,"PoemElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.poem.PoemElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.poem.PoemElementController",htmlTag:"poem",xmlTag:"poem",cls:"el-poem",isPoem:true,createScaffold:function(){var b=this,a={};a.stanza=FBEditor.editor.Factory.createElement("stanza");a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Поэма");a.p.add(a.t);a.stanza.add(a.p);b.add(a.stanza);return a},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(e){var d=a.createElement("p");Ext.Array.each(e.children,function(f){d.add(f)});b.add(d)})}},0,0,0,0,0,0,[FBEditor.editor.element.poem,"PoemElement"],0));(Ext.cmd.derive("FBEditor.editor.element.pre.PreElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.pre,"PreElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.pre.PreElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.pre.PreElementController",htmlTag:"pre",xmlTag:"pre",cls:"el-pre",splittable:true,isPre:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Блок предварительно отформатированного текста");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.pre,"PreElement"],0));(Ext.cmd.derive("FBEditor.editor.command.section.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{syncButtons:false,elementName:"section",createElement:function(c,b){var d=this,e=d.getData(),a;a=e.opts&&e.opts.inner;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;if(a){while(!c.parent.isSection&&!c.parent.isRoot){b.parent=b.parent.parentNode;c.parent=b.parent.getElement()}b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next){if(c.next.isSection){throw Error("Section exists")}b.next=b.next.nextSibling;c.next=b.next?b.next.getElement():null}c.node=FBEditor.editor.Factory.createElement(d.elementName);b.node=c.node.getNode(e.viewportId);b.last=b.lastChild;c.last=b.last?b.last.getElement():null;if(c.last&&c.last.isNotes){c.parent.insertBefore(c.node,c.last);b.parent.insertBefore(b.node,b.last)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}c.except=["title","epigraph","annotation"];b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next&&c.next.elementId!==c.node.elementId){b.buf=b.next.nextSibling;if(!Ext.Array.contains(c.except,c.next.xmlTag)){c.node.add(c.next);b.node.appendChild(b.next);c.parent.remove(c.next)}b.next=b.buf;c.next=b.next?b.next.getElement():null}}else{c.node=FBEditor.editor.Factory.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(e.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{j=d.opts&&d.opts.inner;a.node=d.saveNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);if(j){a.first=a.node.firstChild;while(a.first){c.first=a.first.getElement();c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.node.firstChild}i.setCursor()}else{f=d.range;d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:c.parent};b.setCursor(d.saveRange)}c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(d.viewportId);b.suspendEvent=false;h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);b.updateTree();return h},setCursor:function(f,d){var g=this,h=g.getData(),c,b,a,e;a=h.opts&&h.opts.inner;if(!a){d.p=f.p.nodes[h.viewportId];h.saveRange={startNode:d.p.firstChild,startOffset:d.p.firstChild.length,focusElement:f.p}}else{c=h.range;b=!c.start.getElement().isText?c.start.getElement():c.parentStart.getElement();h.saveRange={startNode:c.start,startOffset:c.offset.start,focusElement:b}}e=h.saveRange.focusElement.getManager();e.setCursor(h.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.section,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.section.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{syncButtons:false,elementName:"section",createElement:function(a,b){var c=this,d=c.getData();if(!d.range.collapsed){b.title=FBEditor.editor.Factory.createElement("title");b.node.add(b.title);a.title=b.title.getNode(d.viewportId);a.node.appendChild(a.title);a.next=a.startContainer;b.next=a.next.getElement();a.parentNext=a.next.parentNode;b.parentNext=a.parentNext.getElement();while(b.next&&b.next.elementId!==b.endContainer.elementId){a.buf=a.next.nextSibling;b.title.add(b.next);a.title.appendChild(a.next);a.next=a.buf;b.next=a.next?a.next.getElement():null}a.cursor=a.title}},restoreElement:function(b,c,a){var d=this,e=d.getData();if(b.title){c.title=b.title.getElement();b.first=b.title.firstChild;while(b.first){c.first=b.first.getElement();b.prevNode.appendChild(b.first);c.prevNode.add(c.first);c.title.remove(c.first);b.first=b.title.firstChild}b.node.removeChild(b.title);c.node.remove(c.title)}}},0,0,0,0,0,0,[FBEditor.editor.command.section,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.section.SectionElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(c,b){var a;c=c||window.getSelection();a=c.getRangeAt(0);return a.startContainer}},0,0,0,0,0,0,[FBEditor.editor.element.section,"SectionElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.section.SectionElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.section.SectionElementController",htmlTag:"section",xmlTag:"section",cls:"el-section",splittable:true,isSection:true,constructor:function(){var a=this;FBEditor.editor.element.AbstractElement.prototype.constructor.apply(this,arguments);a.attributes.id=a.attributes.id||Ext.data.identifier.Uuid.Global.generate()},createScaffold:function(){var b=this,a={};a.title=FBEditor.editor.Factory.createElement("title");a.pT=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Заголовок");a.pT.add(a.t);a.title.add(a.pT);b.add(a.title);a.p=FBEditor.editor.Factory.createElement("p");a.t2=FBEditor.editor.Factory.createElementText("Текст");a.p.add(a.t2);b.add(a.p);return a}},1,0,0,0,0,0,[FBEditor.editor.element.section,"SectionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.smallcaps.SmallcapsElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.smallcaps,"SmallcapsElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.smallcaps.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"smallcaps"},0,0,0,0,0,0,[FBEditor.editor.command.smallcaps,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.smallcaps.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"smallcaps"},0,0,0,0,0,0,[FBEditor.editor.command.smallcaps,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.smallcaps.SmallcapsElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.smallcaps.SmallcapsElementController",htmlTag:"smallcaps",xmlTag:"smallcaps",cls:"el-smallcaps"},0,0,0,0,0,0,[FBEditor.editor.element.smallcaps,"SmallcapsElement"],0));(Ext.cmd.derive("FBEditor.editor.element.spacing.SpacingElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.spacing,"SpacingElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.spacing.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"spacing"},0,0,0,0,0,0,[FBEditor.editor.command.spacing,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.spacing.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"spacing"},0,0,0,0,0,0,[FBEditor.editor.command.spacing,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.spacing.SpacingElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.spacing.SpacingElementController",htmlTag:"spacing",xmlTag:"spacing",cls:"el-spacing"},0,0,0,0,0,0,[FBEditor.editor.element.spacing,"SpacingElement"],0));(Ext.cmd.derive("FBEditor.editor.element.span.SpanElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.span,"SpanElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.span.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"span"},0,0,0,0,0,0,[FBEditor.editor.command.span,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.span.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"span"},0,0,0,0,0,0,[FBEditor.editor.command.span,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.span.SpanElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.span.SpanElementController",htmlTag:"span",xmlTag:"span",cls:"el-span"},0,0,0,0,0,0,[FBEditor.editor.element.span,"SpanElement"],0));(Ext.cmd.derive("FBEditor.editor.command.stanza.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"stanza"},0,0,0,0,0,0,[FBEditor.editor.command.stanza,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.stanza.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"stanza"},0,0,0,0,0,0,[FBEditor.editor.command.stanza,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.stanza.StanzaElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.stanza,"StanzaElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.stanza.StanzaElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.stanza.StanzaElementController",htmlTag:"stanza",xmlTag:"stanza",cls:"el-stanza",splittable:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Стих");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.stanza,"StanzaElement"],0));(Ext.cmd.derive("FBEditor.editor.element.strikethrough.StrikethroughElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.strikethrough,"StrikethroughElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.strikethrough.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"strikethrough"},0,0,0,0,0,0,[FBEditor.editor.command.strikethrough,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.strikethrough.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"strikethrough"},0,0,0,0,0,0,[FBEditor.editor.command.strikethrough,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.strikethrough.StrikethroughElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.strikethrough.StrikethroughElementController",htmlTag:"strikethrough",xmlTag:"strikethrough",cls:"el-strikethrough"},0,0,0,0,0,0,[FBEditor.editor.element.strikethrough,"StrikethroughElement"],0));(Ext.cmd.derive("FBEditor.editor.element.strong.StrongElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.strong,"StrongElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.strong.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"strong"},0,0,0,0,0,0,[FBEditor.editor.command.strong,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.strong.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"strong"},0,0,0,0,0,0,[FBEditor.editor.command.strong,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.strong.StrongElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.strong.StrongElementController",htmlTag:"strong",xmlTag:"strong",cls:"el-strong"},0,0,0,0,0,0,[FBEditor.editor.element.strong,"StrongElement"],0));(Ext.cmd.derive("FBEditor.editor.element.sub.SubElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.sub,"SubElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.sub.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"sub"},0,0,0,0,0,0,[FBEditor.editor.command.sub,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.sub.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"sub"},0,0,0,0,0,0,[FBEditor.editor.command.sub,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.sub.SubElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"sub",xmlTag:"sub",cls:"el-sub"},0,0,0,0,0,0,[FBEditor.editor.element.sub,"SubElement"],0));(Ext.cmd.derive("FBEditor.editor.command.subscription.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"subscription",createElement:function(d,c){var e=this,f=e.getData(),b=f.range,a=FBEditor.editor.Factory;c.parent=c.node.parentNode;d.parent=c.parent.getElement();c.last=c.parent.lastChild;d.last=c.last?c.last.getElement():null;if(d.last&&d.last.isSubscription){throw Error("Subscription exists")}d.node=a.createElement(e.elementName);if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Подпись");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(f.viewportId);d.parent.add(d.node);c.parent.appendChild(c.node);if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}e.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.p,d.next);b.parent.insertBefore(b.p,b.next)}else{d.parent.add(d.p);b.parent.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.subscription,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.subscription.SubscriptionElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(e,d){var c={},b={},a;e=e||window.getSelection();a=e.getRangeAt(0);b.node=a.commonAncestorContainer;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();while(c.parent.isStyleHolder||c.parent.isStyleType){b.node=b.parent;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement()}return b.node},getNameElementsVerify:function(b){var f=this,e={},d=f.getElement().getManager(),a,c;c=f.getNameElement();e.parent=b.parent.getElement();a=d.getNamesElements(e.parent);a.push(c);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subscription,"SubscriptionElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.subscription.SubscriptionElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.subscription.SubscriptionElementController",htmlTag:"subscription",xmlTag:"subscription",cls:"el-subscription",isSubscription:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Подпись");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subscription,"SubscriptionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{createFromRange:true,getNodeVerify:function(g,f){var e=this,d={},b={},c,a;c=e.getNameElement();g=g||window.getSelection();a=g.getRangeAt(0);b.node=a.commonAncestorContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node;return b.node},checkRangeVerify:function(a){return true},getNameElementsVerify:function(b){var f=this,e={},d=f.getElement().getManager(),a,c;c=f.getNameElement();e.parent=b.parent.getElement();b.node=e.parent.hisName(c)?b.parent:b.node;b.parent=b.node.parentNode;e.node=b.node.getElement();e.parent=b.parent.getElement();a=d.getNamesElements(e.parent);a.splice(e.parent.getChildPosition(e.node)+1,0,c);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit,{},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"subtitle",setCursor:function(c,a){var d=this,f=window.getSelection(),e=d.getData(),b;e.oldRange=f.getRangeAt(0);a.p=c.node.nodes[e.viewportId];e.saveRange={withoutSyncButtons:true,startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b=c.node.getManager();b.setCursor(e.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"subtitle",unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{f=d.range;a=d.saveNodes;j=a.node.viewportId;console.log("undo create range "+i.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);Ext.Array.each(a.links,function(k){var l=k.el,e=l.getElement();c.parent.insertBefore(e,c.node);a.parent.insertBefore(l,a.node);Ext.Array.each(k.children,function(n){var m=n.getElement();e.add(m);l.appendChild(n)})});c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(j);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},createNewElement:function(d,b){var e=this,f=e.getData(),a=FBEditor.editor.Factory,c;d.node=a.createElement(e.elementName);b.node=d.node.getNode(f.viewportId);b.links=[];d.common.insertBefore(d.node,d.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;d.next=b.next.getElement();while(d.next&&d.next.elementId!==d.endContainer.elementId){b.buf=b.next.nextSibling;c={el:b.next,children:[]};b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null;while(d.first){c.children.push(b.first);d.node.add(d.first);b.node.appendChild(b.first);b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null}d.common.remove(d.next);b.common.removeChild(b.next);b.links.push(c);b.next=b.buf;d.next=b.next?b.next.getElement():null}if(d.next&&d.next.elementId===d.endContainer.elementId&&!f.range.joinEndContainer){b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null;while(d.first){d.node.add(d.first);b.node.appendChild(b.first);b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null}d.common.remove(d.next);b.common.removeChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.GetNextHolderCommand",FBEditor.editor.command.styleholder.AbstractGetNextHolderCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"GetNextHolderCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.subtitle.SubtitleElementController",htmlTag:"subtitle",xmlTag:"subtitle",cls:"el-subtitle el-styleholder",isSubtitle:true,showedOnTree:true,createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.t=a.createElementText("Подзаголовок");c.add(b.t);return b},getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<subtitle><br\/><\/subtitle>/gi,"<subtitle></subtitle>");return a}},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.sup.SupElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.sup,"SupElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.sup.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"sup"},0,0,0,0,0,0,[FBEditor.editor.command.sup,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.sup.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"sup"},0,0,0,0,0,0,[FBEditor.editor.command.sup,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.sup.SupElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"sup",xmlTag:"sup",cls:"el-sup"},0,0,0,0,0,0,[FBEditor.editor.element.sup,"SupElement"],0));(Ext.cmd.derive("FBEditor.editor.command.table.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"table",createElement:function(d,b){var e=this,f=e.getData(),a=FBEditor.editor.Factory,c;c=f.opts.size;b.parent=b.node.parentNode;d.parent=b.parent.getElement();b.node=d.parent.hisName(e.elementName)?b.parent:b.node;b.parent=b.node.parentNode;d.parent=b.parent.getElement();b.next=b.node.nextSibling;d.node=a.createElement(e.elementName);d=Ext.apply(d,d.node.createScaffold(c));b.node=d.node.getNode(f.viewportId);if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.node,d.next);b.parent.insertBefore(b.node,b.next)}else{d.parent.add(d.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command.table,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableElementController",FBEditor.editor.element.AbstractUnboundedElementController,{createFromRange:false},0,0,0,0,0,0,[FBEditor.editor.element.table,"TableElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableSelection",FBEditor.editor.selection.Selection,{size:null,constructor:function(b){var a=this;b.addEventListener("mousedown",function(c){a.startSelection.apply(a,[c])});b.addEventListener("mousemove",function(c){a.moveSelection.apply(a,[c])});FBEditor.editor.selection.Selection.prototype.constructor.apply(this,arguments)},startSelection:function(f){var d=this,c=d.node,b,a;d.size=null;a=c.getElement();b=a.getNodeHelper();b.clearSelectNodes()},moveSelection:function(b){var a=this;a.execute()},getSize:function(){return this.size},execute:function(){var e=this,f=window.getSelection(),a=f.getRangeAt(0),d=e.node,g=d.viewportId,c={},b;b=e.getSizeFromRange();if(a&&!a.collapsed){c.common=a.commonAncestorContainer.getElement();if(c.common.isTable||c.common.isTr){if(b&&!e.sizeEquals(b,e.size)){e.size=b;c.table=c.common.isTable?c.common:c.common.parent;c.table.each(function(i,h){var j=h;i.each(function(n,l){var k=l,m=n.getNodeHelper();if(j>=b.lt[1]&&j<=b.rb[1]&&k>=b.lt[0]&&k<=b.rb[0]){m.selectNode(true,g)}else{m.selectNode(false,g)}})})}}}},getSizeFromRange:function(){var d=this,e=window.getSelection(),c={},a,b;a=e.getRangeAt(0);if(a&&!a.collapsed){c.common=a.commonAncestorContainer.getElement();if(c.common.isTable||c.common.isTr){if(Ext.browser.is.Firefox){a={startTr:e.getRangeAt(0),endTr:e.getRangeAt(e.rangeCount-1)};c.startTr=a.startTr.startContainer.getElement();c.endTr=a.endTr.startContainer.getElement();b={lt:[a.startTr.startOffset,c.startTr.getPosition()],rb:[a.endTr.startOffset,c.endTr.getPosition()]}}else{c.start=a.startContainer.getElement();c.end=a.endContainer.getElement();c.startTd=c.start.getParentName("td");c.endTd=c.end.getParentName("td");b={lt:c.startTd.getPosition(),rb:c.endTd.getPosition()}}}}return b},sizeEquals:function(c,a){var b;b=c&&a&&c.lt[0]===a.lt[0]&&c.lt[1]===a.lt[1]&&c.rb[0]===a.rb[0]&&c.rb[1]===a.rb[1];return b}},1,0,0,0,0,0,[FBEditor.editor.element.table,"TableSelection"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.table.TableElementController",selectionClass:"FBEditor.editor.element.table.TableSelection",htmlTag:"table",xmlTag:"table",cls:"el-table",isTable:true,createScaffold:function(e){var f=this,d={},a;e=e||[0,0];for(var c=0;c<=e[1];c++){d.tr=FBEditor.editor.Factory.createElement("tr");for(var b=0;b<=e[0];b++){d.td=FBEditor.editor.Factory.createElement("td");d.p=FBEditor.editor.Factory.createElement("p");d.br=FBEditor.editor.Factory.createElement("br");d.p.add(d.br);d.td.add(d.p);d.tr.add(d.td);if(c===0&&b===0){a=d.p}}f.add(d.tr)}d.p=a;return d},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(d){Ext.Array.each(d.children,function(f){var e=a.createElement("p");Ext.Array.each(f.children,function(g){e.add(g)});b.add(e)})})}},0,0,0,0,0,0,[FBEditor.editor.element.table,"TableElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractCellElement",FBEditor.editor.element.AbstractElement,{showedOnTree:false,isCell:true,links:null,_sizeSelection:null,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.br=FBEditor.editor.Factory.createElement("br");a.p.add(a.br);b.add(a.p);return a},getXml:function(){var d=this,b=d.getName(),c,a;a=FBEditor.editor.element.AbstractElement.prototype.getXml.apply(this,arguments);c=new RegExp("<"+b+"(.*?)>\\n\\s+<br(.*?)/>","gi");a=a.replace(c,"<"+b+"$1><p></p>");return a},getPosition:function(){var c=this,b=c.parent,a,d;a=b.getChildPosition(c);d=b.parent.getChildPosition(b);return[a,d]},setColSpan:function(d){var c=this,a=c.attributes,b=c.nodes;if(d&&d>1){a.colspan=d;Ext.Object.each(b,function(e,f){f.setAttribute("colspan",d)})}else{if(a.colspan){delete a.colspan;Ext.Object.each(b,function(e,f){f.removeAttribute("colspan")})}}c.attributes=a},setRowSpan:function(d){var c=this,a=c.attributes,b=c.nodes;if(d&&d>1){a.rowspan=d;Ext.Object.each(b,function(e,f){f.setAttribute("rowspan",d)})}else{if(a.rowspan){delete a.rowspan;Ext.Object.each(b,function(e,f){f.removeAttribute("rowspan")})}}c.attributes=a},addLinks:function(a){var b=this;b.links=b.links||[];b.links.push(a)},getLinks:function(){return this.links},removeLinks:function(){this.links=null}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractCellElement"],0));(Ext.cmd.derive("FBEditor.editor.element.td.TdElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.td,"TdElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.td.TdElement",FBEditor.editor.element.AbstractCellElement,{controllerClass:"FBEditor.editor.element.td.TdElementController",htmlTag:"td",xmlTag:"td",cls:"el-td",isTd:true},0,0,0,0,0,0,[FBEditor.editor.element.td,"TdElement"],0));(Ext.cmd.derive("FBEditor.editor.element.th.ThElement",FBEditor.editor.element.AbstractCellElement,{htmlTag:"th",xmlTag:"th",cls:"el-th",isTh:true},0,0,0,0,0,0,[FBEditor.editor.element.th,"ThElement"],0));(Ext.cmd.derive("FBEditor.editor.command.title.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"title",createElement:function(d,b){var h=this,e=h.getData(),a=e.opts||{},g=e.range,f=FBEditor.editor.Factory,i,c;i=e.viewportId;c=d.node.getManager();d.newNode=f.createElement(h.elementName);if(a.body){d.parent=c.getContent()}else{d.parent=b.node.getElement().parent;d.node=d.parent.hisName(h.elementName)?d.parent:d.node;d.parent=d.node.parent}d.first=d.parent.first();b.p=g.start;d.p=b.p.getElement();d.p=d.p.getStyleHolder();if(g.collapsed){d=Ext.apply(d,d.newNode.createScaffold());if(d.first){d.parent.insertBefore(d.newNode,d.first,i)}else{d.parent.add(d.newNode,i)}}else{if(!a.body&&!d.p.isFirst()){d.section=d.p.getParentName("section");d.sectionParent=d.section.parent;d.newSection=f.createElement("section");if(d.section.next()){d.sectionNext=d.section.next();d.sectionParent.insertBefore(d.newSection,d.sectionNext,i)}else{d.sectionParent.add(d.newSection,i)}d.newSection.add(d.newNode,i);if(!d.p.next()){d.emptyP=c.createEmptyP();d.newSection.add(d.emptyP,i)}d.next=d.p;while(d.next){d.buf=d.next.next();d.newSection.add(d.next,i);d.next=d.buf}}else{d.next=d.p.next();d.oldParent=d.p.parent;d.parent.insertBefore(d.newNode,d.first,i)}d.newNode.add(d.p,i)}h.data.nodes=b;h.data.els=d},unExecute:function(){var j=this,f=j.getData(),i=false,d={},a={},b,k,c,g;try{g=f.range;a=f.nodes;d=f.els;k=f.viewportId;if(g.collapsed){b=d.newNode.getNodeHelper();f.saveNode=b.getNode(k);return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}c=d.p.getManager();c.setSuspendEvent(true);if(d.next){d.oldParent=d.next.parent;d.oldParent.insertBefore(d.p,d.next,k)}else{d.oldParent=d.oldParent?d.oldParent:d.parent;d.oldParent.add(d.p,k)}if(d.newSection){if(!d.emptyP){d.next=d.newNode.next();while(d.next){d.buf=d.next.next();d.section.add(d.next,k);d.next=d.buf}}d.sectionParent.remove(d.newSection,k)}else{d.parent.remove(d.newNode,k)}d.parent.sync(k);d.cursor=d.p.getDeepLast(d.p);b=d.cursor.getNodeHelper();a.cursor=b.getNode(k);f.saveRange={startNode:a.cursor,startOffset:0,endNode:a.cursor,endOffset:a.cursor.length};c.setCursor(f.saveRange);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(d.parent).remove()}c.setSuspendEvent(false);c.updateTree();return i}},0,0,0,0,0,0,[FBEditor.editor.command.title,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.title.TitleElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(f,e){var d=this,c={},b={},a;f=f||window.getSelection();a=f.getRangeAt(0);b.node=a.commonAncestorContainer;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();while(c.parent.isStyleHolder||c.parent.isStyleType){b.node=b.parent;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement()}return b.node}},0,0,0,0,0,0,[FBEditor.editor.element.title,"TitleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.title.TitleElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.title.TitleElementController",htmlTag:"header",xmlTag:"title",cls:"el-title",isTitle:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Заголовок");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.title,"TitleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.tr.TrElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.tr,"TrElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.tr.TrElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.tr.TrElementController",htmlTag:"tr",xmlTag:"tr",cls:"el-tr",showedOnTree:false,isTr:true,createScaffold:function(){var b=this,a={};a.td=FBEditor.editor.Factory.createElement("td");a.p=FBEditor.editor.Factory.createElement("p");a.br=FBEditor.editor.Factory.createElement("br");a.p.add(a.br);a.td.add(a.p);b.add(a.td);return a},getPosition:function(){var b=this,a=b.parent,c;c=a.getChildPosition(b);return c}},0,0,0,0,0,0,[FBEditor.editor.element.tr,"TrElement"],0));(Ext.cmd.derive("FBEditor.editor.command.ul.CreateCommand",FBEditor.editor.command.AbstractCreateLiHolderCommand,{elementName:"ul"},0,0,0,0,0,0,[FBEditor.editor.command.ul,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ul.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"ul"},0,0,0,0,0,0,[FBEditor.editor.command.ul,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.ul.UlElementController",FBEditor.editor.element.AbstractLiHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.ul,"UlElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ul.UlElement",FBEditor.editor.element.AbstractLiHolderElement,{controllerClass:"FBEditor.editor.element.ul.UlElementController",htmlTag:"ul",xmlTag:"ul",cls:"el-ul"},0,0,0,0,0,0,[FBEditor.editor.element.ul,"UlElement"],0));(Ext.cmd.derive("FBEditor.editor.command.text.ModifiedCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,g=k.getData(),j=false,b=window.getSelection(),a={},f={},l,c,d,h;try{if(g.saveRange){f.node=g.saveRange.startNode.getElement();c=f.node.getManager();c.setCursor(g.saveRange)}h=b.getRangeAt(0);d={start:h.startOffset,end:h.endOffset};g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,collapsed:h.collapsed,offset:d};a.node=h.startContainer;f.node=a.node.getElement();c=f.node.getManager();c.setSuspendEvent(true);l=g.viewportId=a.node.viewportId;console.log("edit text");g.oldValue=f.node.getText();f.node.setText(g.newValue,l);f.node.sync(l);c.setCursor({withoutSyncButtons:true,startNode:g.range.start,startOffset:d.start,focusElement:f.node});g.nodes=a;j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(f.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var j=this,f=j.getData(),i=false,a={},d={},k=f.viewportId,c,b,g,l;try{g=f.range;a=f.nodes;a.parent=a.node.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.isRoot){a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}if(!d.parent||!d.parent.isRoot){b=window.getSelection();l=b.getRangeAt(0);a.node=l.startContainer}d.node=a.node.getElement();console.log("undo text",a,f);c=d.node.getManager();c.setSuspendEvent(true);d.node.setText(f.oldValue,k);d.node.sync(k);a.startCursor=f.isBackspace?g.offset.start+1:g.offset.start;f.saveRange={startNode:a.node,startOffset:a.startCursor,focusElement:d.node};c.setCursor(f.saveRange);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(d.parent).remove()}c.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command.text,"ModifiedCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.text.DeleteEmptyCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var j=this,f=j.getData(),i=false,b=window.getSelection(),a={},d={},c,g;try{if(f.saveRange){d.node=f.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(f.saveRange)}g=b.getRangeAt(0);f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};a.node=g.startContainer;d.node=a.node.getElement();c=d.node.getManager();c.setSuspendEvent(true);f.viewportId=a.node.viewportId;console.log("del empty",d.node,g);c.suspendEvent=true;f.oldValue=d.node.getText();d.node.setText("");a.node.nodeValue="";a.empty=a.node;d.empty=a.empty.getElement();a.parentEmpty=a.empty.parentNode;d.parentEmpty=a.parentEmpty.getElement();if(d.parentEmpty.isEmpty()&&d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}a.cursorStart=0;if(!d.empty.isStyleHolder){while(d.parentEmpty.isEmpty()&&!d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}if(d.parentEmpty.isStyleHolder&&d.parentEmpty.isEmpty()){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}}if(!d.empty.isStyleHolder){a.next=a.empty.nextSibling;a.prev=a.empty.previousSibling;d.next=a.next?a.next.getElement():null;d.prev=a.prev?a.prev.getElement():null;d.parentEmpty.remove(d.empty);a.parentEmpty.removeChild(a.empty);a.cursor=a.next?c.getDeepFirst(a.next):c.getDeepLast(a.prev);a.cursorStart=a.next?0:(a.cursor&&a.cursor.nodeValue?a.cursor.nodeValue.length:0);if(d.next&&d.prev&&d.next.isText&&d.prev.isText){a.cursor=a.prev;a.cursorStart=a.prev.nodeValue.length;c.joinNode(a.next);a.needSplit=true}}if(d.parentEmpty.isEmpty()&&d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}if(d.empty.isStyleHolder&&d.empty.isEmpty()){d.newEmpty=c.createEmptyElement();a.newEmpty=d.newEmpty.getNode(f.viewportId);a.first=a.empty.firstChild;if(a.first){d.first=a.first.getElement();d.empty.replace(d.newEmpty,d.first);a.empty.replaceChild(a.newEmpty,a.first)}else{d.empty.add(d.newEmpty);a.empty.appendChild(a.newEmpty)}d.parentEmpty=d.empty;a.parentEmpty=a.empty;d.empty=d.first;a.cursor=a.newEmpty}d.parentEmpty.removeEmptyText();d.parentEmpty.sync(f.viewportId);c.setCursor({startNode:a.cursor,startOffset:a.cursorStart});f.els=d;f.nodes=a;i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return i},unExecute:function(){var j=this,f=j.getData(),i=false,a={},d={},g=FBEditor.editor.Factory,c,b,k;try{a=f.nodes;d=f.els;c=d.parentEmpty.getManager();c.setSuspendEvent(true);a.empty=d.empty.getNode(f.viewportId);console.log("undo del empty",a,d);if(a.newEmpty){d.parentEmpty.replace(d.empty,d.newEmpty);a.parentEmpty.replaceChild(a.empty,a.newEmpty)}else{if(a.needSplit){d.prevValue=d.prev.text.substring(0,a.cursorStart);d.prev.setText(d.prevValue);a.prev.nodeValue=d.prevValue;a.next=d.next.getNode(f.viewportId);a.nextNext=a.prev.nextSibling;if(a.nextNext){d.nextNext=a.nextNext.getElement();d.parentEmpty.insertBefore(d.next,d.nextNext);a.parentEmpty.insertBefore(a.next,a.nextNext)}else{d.parentEmpty.add(d.next);a.parentEmpty.appendChild(a.next)}}if(a.next){a.parent=a.next.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.isRoot){a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}if(!d.parent||!d.parent.isRoot){b=window.getSelection();k=b.getRangeAt(0);a.next=k.startContainer;d.next=a.next.getElement();a.parent=a.next.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.hisName(d.parentEmpty.xmlTag)){a.next=a.parent;d.next=d.parent;a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}a.parentEmpty=a.parent;d.parentEmpty=d.parent}d.parentEmpty.insertBefore(d.empty,d.next);a.parentEmpty.insertBefore(a.empty,a.next)}else{d.parentEmpty.add(d.empty);a.parentEmpty.appendChild(a.empty)}}a.deep=c.getDeepFirst(a.empty);d.deep=a.deep.getElement();if(d.deep.isText){d.deep.setText(f.oldValue);a.deep.nodeValue=f.oldValue;a.cursor=a.deep}else{d.text=g.createElementText(f.oldValue);a.text=d.text.getNode(f.viewportId);d.deep.add(d.text);a.deep.appendChild(a.text);a.cursor=a.text}d.parentEmpty.sync(f.viewportId);f.saveRange={startNode:a.cursor,startOffset:f.isBackspace?1:0};c.setCursor(f.saveRange);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(d.parent).remove()}c.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command.text,"DeleteEmptyCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.text.TextElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownDelete:function(h){var c=this,b=c.getElement(),f=window.getSelection(),d,g,a;if(h){h.preventDefault()}a=f.getRangeAt(0);g=b.text.substring(0,a.startOffset)+b.text.substring(a.startOffset+1);if(g){d=Ext.create("FBEditor.editor.command.text.ModifiedCommand",{newValue:g})}else{d=Ext.create("FBEditor.editor.command.text.DeleteEmptyCommand")}if(d.execute()){c.getHistory().add(d)}},onKeyDownBackspace:function(h){var c=this,b=c.getElement(),f=window.getSelection(),d,g,a;h.preventDefault();a=f.getRangeAt(0);g=b.text.substring(0,a.startOffset)+b.text.substring(a.startOffset+1);if(g){d=Ext.create("FBEditor.editor.command.text.ModifiedCommand",{newValue:g,isBackspace:true})}else{d=Ext.create("FBEditor.editor.command.text.DeleteEmptyCommand",{isBackspace:true})}if(d.execute()){c.getHistory().add(d)}},onPaste:function(c){var b=this,a=b.getElement();a.parent.fireEvent("paste",c)}},0,0,0,0,0,0,[FBEditor.editor.element.text,"TextElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.text.TextElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.text.TextElementController",showedOnTree:false,text:"",isText:true,mapCoords:null,unprintedSymbolSpace:"·",unprintedSymbolNbsp:"\u2022",constructor:function(b){var a=this;a.elementId=Ext.id({prefix:a.prefixId});a.text=Ext.isString(b)?b:a.text;a.createController();a.text=Ext.String.htmlDecode(a.text)},getNode:function(c){var b=this,a;a=b.createNode(c);return a},getXml:function(a,b){var c=this,d;d=a?"":c.text;d=d.replace(/</g,"&lt;");d=d.replace(/>/g,"&gt;");return d},sync:function(c){var b=this,a=b.getManager();a.setSuspendEvent(true);Ext.Object.each(b.nodes,function(e,d){if(e!==c){d.nodeValue=b.getText()}});a.setSuspendEvent(false)},setText:function(e,d){var c=this,b,a;c.text=c.convertUnprintedSymbols(e);if(d){b=c.getNodeHelper();a=b.getNode(d);a.nodeValue=c.convertSpaces(e)}c.clearMapCoords()},getText:function(d,a){var b=this,c;c=b.text;if(d!==undefined||a!==undefined){d=d!==undefined?d:0;a=a!==undefined?a:c.length;d=(d<0||d>c.length)?0:d;a=(a<0||a>c.length)?c.length:a;c=c.substring(d,a)}return c},getLength:function(){return this.text.length},createNode:function(c){var b=this,d,a;d=b.convertSpaces(b.text);a=document.createTextNode(d);a.viewportId=c;b.setNode(a);return a},isEmpty:function(){return this.text?false:true},setMapCoords:function(a){this.mapCoords=a},getMapCoords:function(){return this.mapCoords},clearMapCoords:function(){this.mapCoords=null},updateUnprintedSymbols:function(){var b=this,c,a;c=b.convertSpaces(b.text);a=b.getNodeHelper();a.setNodeValue(c)},convertSpaces:function(d){var b=this,c=d,a=b.getManager();if(a&&a.isUnprintedSymbols()){c=c.replace(/ /g,b.unprintedSymbolSpace);c=c.replace(/\u00a0/g,b.unprintedSymbolNbsp)}return c},convertUnprintedSymbols:function(d){var b=this,c=d,a;a=new RegExp(b.unprintedSymbolSpace,"g");c=c.replace(a," ");a=new RegExp(b.unprintedSymbolNbsp,"g");c=c.replace(a,"\xa0");return c}},1,0,0,0,0,0,[FBEditor.editor.element.text,"TextElement"],0));(Ext.cmd.derive("FBEditor.editor.element.u.UElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.underline.UnderlineElement")}},1,0,0,0,0,0,[FBEditor.editor.element.u,"UElement"],0));(Ext.cmd.derive("FBEditor.editor.element.undefined.UndefinedElement",FBEditor.editor.element.AbstractElement,{htmlTag:"undefined",xmlTag:"undefined",cls:"el-undefined",realName:"",isUndefined:true,constructor:function(b,a,c){var d=this,e;d.realName=b;e=b;d.htmlTag=e;d.xmlTag=e;FBEditor.editor.element.AbstractElement.prototype.constructor.call(this,a,c)},convertToText:function(a){}},1,0,0,0,0,0,[FBEditor.editor.element.undefined,"UndefinedElement"],0));(Ext.cmd.derive("FBEditor.editor.element.underline.UnderlineElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.underline,"UnderlineElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.underline.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"underline"},0,0,0,0,0,0,[FBEditor.editor.command.underline,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.underline.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"underline"},0,0,0,0,0,0,[FBEditor.editor.command.underline,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.underline.UnderlineElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.underline.UnderlineElementController",htmlTag:"underline",xmlTag:"underline",cls:"el-underline"},0,0,0,0,0,0,[FBEditor.editor.element.underline,"UnderlineElement"],0));(Ext.cmd.derive("FBEditor.editor.Factory",Ext.Base,{singleton:"true",createElement:function(d,a,f){var i=d,c,b,g;if(Ext.isEmpty(i)){throw Error("Невозможно создать элемент. Передано пустое назавние элемента.")}i=i.toLowerCase();i=i.replace(/-([a-z])/g,"$1");if(/:/.test(i)){i=i.split(":");c=i.pop();c=c+"."+Ext.String.capitalize(c);i.push(c);i=i.join(".")}else{i=i+"."+Ext.String.capitalize(i)}b="FBEditor.editor.element."+i+"Element";try{a=a||{};f=f||[];g=Ext.create(b,a,f)}catch(h){g=Ext.create("FBEditor.editor.element.undefined.UndefinedElement",d,a,f);Ext.log({level:"warn",msg:"Неопределенный элемент: "+b,dump:h})}return g},createElementText:function(c){var a;c=Ext.isString(c)?c:"";try{a=Ext.create("FBEditor.editor.element.text.TextElement",c)}catch(b){throw Error("Невозможно создать текстовый элемент: "+c)}return a}},0,0,0,0,0,0,[FBEditor.editor,"Factory"],0));(Ext.cmd.derive("FBEditor.editor.History",Ext.Base,{data:[],pos:-1,clear:function(){var a=this;a.data=[];a.pos=-1},add:function(c){var a=this,b=a.data;a.clearAfterCurrent();b.push(c);a.pos++},remove:function(){var a=this,b=a.data;console.log("remove cmd");if(a.pos!==-1){b.splice(a.pos,1);a.pos--}},removeNext:function(){var a=this,b=a.data;console.log("remove next cmd");if(a.pos+1<b.length){b.splice(a.pos+1,1)}},undo:function(){var a=this,b;b=a.getCurrentCmd();if(b&&b.unExecute()){a.pos--}},redo:function(){var a=this,b;b=a.getNextCmd();if(b&&b.execute()){a.pos++}},getCurrentCmd:function(){var a=this,c=a.data,b;b=a.pos!==-1?c.slice(a.pos,a.pos+1)[0]:null;return b},getNextCmd:function(){var a=this,c=a.data,b;b=a.pos+1<c.length?c.slice(a.pos+1,a.pos+2)[0]:null;return b},clearAfterCurrent:function(){var a=this,b=a.data;if((a.pos+1)<b.length){b.splice(a.pos+1)}}},0,0,0,0,0,0,[FBEditor.editor,"History"],0));(Ext.cmd.derive("FBEditor.xsd.Fb3body",Ext.Base,{getXsd:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns:fb3b="http://www.fictionbook.org/FictionBook3/body" xmlns="http://www.w3.org/2001/XMLSchema"\t\txmlns:xlink="http://www.w3.org/1999/xlink" targetNamespace="http://www.fictionbook.org/FictionBook3/body"\t\telementFormDefault="qualified" attributeFormDefault="unqualified">\t<element name="fb3-body">\t\t<complexType>\t\t\t<complexContent>\t\t\t\t<extension base="fb3b:TitledType">\t\t\t\t\t<sequence>\t\t\t\t\t\t<element name="section" type="fb3b:SectionType" maxOccurs="unbounded"/>\t\t\t\t\t\t<element name="notes" minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t<extension base="fb3b:TitledType">\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t<element name="notebody" type="fb3b:SemiSimpleBodyType"\t\t\t\t\t\t\t\t\t\t\t maxOccurs="unbounded"/>\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t<attribute name="show"/>\t\t\t\t\t\t\t\t\t</extension>\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t</element>\t\t\t\t\t</sequence>\t\t\t\t\t<attribute name="id" type="fb3b:UUIDType" use="required"/>\t\t\t\t</extension>\t\t\t</complexContent>\t\t</complexType>\t\t<unique name="SectionID">\t\t\t<selector xpath=".//section"/>\t\t\t<field xpath="@id"/>\t\t</unique>\t\t<key name="SimpleNotesLinks">\t\t\t<selector xpath=".//note"/>\t\t\t<field xpath="@fb3b:href"/>\t\t</key>\t\t<keyref name="SimpleNotesTargets" refer="fb3b:SimpleNotesLinks">\t\t\t<selector xpath="notes/note"/>\t\t\t<field xpath="@id"/>\t\t</keyref>\t</element>\t<complexType name="TitledType">\t\t<sequence>\t\t\t<element name="title" minOccurs="0">\t\t\t\t<complexType>\t\t\t\t\t<complexContent>\t\t\t\t\t\t<extension base="fb3b:SimpleTextType"/>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="epigraph" minOccurs="0" maxOccurs="25">\t\t\t\t<complexType>\t\t\t\t\t<sequence>\t\t\t\t\t    <choice>\t\t\t\t\t        <element name="poem" type="fb3b:PoemType"/>\t\t\t\t            <element name="p" type="fb3b:StyleType"/>\t\t\t\t        </choice>\t\t\t\t        <choice minOccurs="0" maxOccurs="unbounded">\t\t\t                <element name="poem" type="fb3b:PoemType"/>\t\t\t                <element name="p" type="fb3b:StyleType"/>\t\t\t                <element name="br" type="fb3b:BRType"/>\t\t\t            </choice>\t\t\t            <element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t        </sequence>\t\t\t\t</complexType>\t\t\t</element>\t\t</sequence>\t</complexType>\t<complexType name="SimpleTextType">\t\t<sequence>\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="SectionType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="annotation" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t\t<choice>\t\t\t\t\t\t<element name="section" type="fb3b:SectionType" maxOccurs="unbounded"></element>\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t<choice maxOccurs="unbounded">\t\t\t\t\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t\t\t\t\t<element name="subtitle" type="fb3b:StyleType"></element>\t\t\t\t\t\t\t\t<element name="ol">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="ul">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t\t\t\t\t<element name="table">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:TableType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="poem">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:PoemType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t\t\t\t\t\t<element name="div" type="fb3b:DivBlockType"></element>\t\t\t\t\t\t\t</choice>\t\t\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t\t\t\t\t</sequence>\t\t\t\t\t\t<element name="clipped"><complexType/></element>\t\t\t\t\t</choice>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="fb3b:UUIDType" use="required"/>\t\t\t\t<attribute name="article" type="boolean" use="optional"/>\t\t\t\t<attribute name="doi" type="fb3b:DOIType" use="optional"/>\t\t\t\t<attribute name="clipped" type="boolean"/>\t\t\t\t<attribute name="first-char-pos" type="positiveInteger"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="DivBlockType">\t\t<sequence>\t\t\t<element name="title" type="fb3b:SimpleTextType" minOccurs="0"/>\t\t\t<element name="marker" minOccurs="0">\t\t\t\t<complexType>\t\t\t\t\t<sequence>\t\t\t\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t\t\t</sequence>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<choice>\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t</choice>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t</sequence>\t\t<attributeGroup ref="fb3b:SizingAttributes"/>\t\t<attribute name="float" use="optional">\t\t\t<simpleType>\t\t\t\t<restriction base="token">\t\t\t\t\t<enumeration value="left"/>\t\t\t\t\t<enumeration value="right"/>\t\t\t\t\t<enumeration value="center"/>\t\t\t\t\t<enumeration value="default"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</attribute>\t\t<attribute name="align" type="fb3b:alignType" use="optional"/>\t\t<attribute name="bindto" type="IDREF" use="optional"/>\t\t<attribute name="border" type="boolean" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t\t<attribute name="on-one-page" type="boolean" use="optional"/>\t</complexType>\t<complexType name="BasicAnnotationType">\t\t<sequence>\t\t\t<choice>\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t</choice>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="BRType">\t\t<attribute name="clear" type="fb3b:BrClearType" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="TableType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="tr" maxOccurs="unbounded">\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t<choice maxOccurs="unbounded">\t\t\t\t\t\t\t\t<element name="th" type="fb3b:TDType"/>\t\t\t\t\t\t\t\t<element name="td" type="fb3b:TDType"/>\t\t\t\t\t\t\t</choice>\t\t\t\t\t\t\t<attribute name="align" type="fb3b:alignType" use="optional" default="left"/>\t\t\t\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t\t\t\t</complexType>\t\t\t\t\t</element>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="TDType">\t\t<complexContent>\t\t\t<extension base="fb3b:PHolderType">\t\t\t\t<attribute name="colspan" type="integer" use="optional"/>\t\t\t\t<attribute name="rowspan" type="integer" use="optional"/>\t\t\t\t<attribute name="align" type="fb3b:alignType" use="optional" default="left"/>\t\t\t\t<attribute name="valign" type="fb3b:vAlignType" use="optional" default="top"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="StyleType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3b:StyleType"></element>\t\t\t<element name="em" type="fb3b:StyleType"></element>\t\t\t<element name="strikethrough" type="fb3b:StyleType"></element>\t\t\t<element name="sub" type="fb3b:StyleType"></element>\t\t\t<element name="sup" type="fb3b:StyleType"></element>\t\t\t<element name="code" type="fb3b:StyleType"></element>\t\t\t<element name="underline" type="fb3b:StyleType"></element>\t\t\t<element name="spacing" type="fb3b:StyleType"></element>\t\t\t<element name="span">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3b:StyleType">\t\t\t\t\t\t\t<attribute name="class" type="normalizedString" use="optional"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="note" type="fb3b:NoteType"/>\t\t\t<element name="a" type="fb3b:LinkType"/>\t\t\t<element name="smallcaps" type="fb3b:StyleType"/>\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t<element name="paper-page-break" type="fb3b:PaperPageBreakType"/>\t\t</choice>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="StyleInLinkType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3b:StyleInLinkType"/>\t\t\t<element name="em" type="fb3b:StyleInLinkType"/>\t\t\t<element name="strikethrough" type="fb3b:StyleInLinkType"/>\t\t\t<element name="sub" type="fb3b:StyleInLinkType"/>\t\t\t<element name="sup" type="fb3b:StyleInLinkType"/>\t\t\t<element name="code" type="fb3b:StyleInLinkType"/>\t\t\t<element name="underline" type="fb3b:StyleInLinkType"/>\t\t\t<element name="spacing" type="fb3b:StyleInLinkType"/>\t\t\t<element name="span">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t\t\t\t<attribute name="class" type="normalizedString" use="optional"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="smallcaps" type="fb3b:StyleType"/>\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t<element name="paper-page-break" type="fb3b:PaperPageBreakType"/>\t\t</choice>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="LinkType" mixed="true">\t\t<complexContent mixed="true">\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t<attribute name="href" type="anyURI" use="required"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="NoteType" mixed="true">\t\t<complexContent mixed="true">\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t<attribute name="href" type="IDREF" use="required"/>\t\t\t\t<attribute name="role" use="optional" default="auto">\t\t\t\t\t<simpleType>\t\t\t\t\t\t<restriction base="token">\t\t\t\t\t\t\t<enumeration value="auto"/>\t\t\t\t\t\t\t<enumeration value="footnote"/>\t\t\t\t\t\t\t<enumeration value="endnote"/>\t\t\t\t\t\t\t<enumeration value="comment"/>\t\t\t\t\t\t\t<enumeration value="other"/>\t\t\t\t\t\t</restriction>\t\t\t\t\t</simpleType>\t\t\t\t</attribute>\t\t\t\t<attribute name="autotext" default="1" use="optional">\t\t\t\t\t<simpleType>\t\t\t\t\t\t<restriction base="token">\t\t\t\t\t\t\t<enumeration value="1"/>\t\t\t\t\t\t\t<enumeration value="i"/>\t\t\t\t\t\t\t<enumeration value="a"/>\t\t\t\t\t\t\t<enumeration value="*"/>\t\t\t\t\t\t\t<enumeration value="keep"/>\t\t\t\t\t\t</restriction>\t\t\t\t\t</simpleType>            \t</attribute>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="ImgType">\t\t<attribute name="src" type="anyURI" use="required"/>\t\t<attribute name="alt" type="string" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t\t<attributeGroup ref="fb3b:SizingAttributes"/>\t</complexType>\t<complexType name="PHolderType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence maxOccurs="unbounded">\t\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t            <element name="p" type="fb3b:StyleType"/>                        <element name="br" type="fb3b:BRType"/>                    </choice>\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t</sequence>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="LiHolderType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="li" type="fb3b:StyleType"/>\t\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t<element name="li" type="fb3b:StyleType"/>\t\t\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t\t</choice>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="PoemType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="stanza" type="fb3b:PHolderType" maxOccurs="unbounded"/>\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="SemiSimpleBodyType">\t\t<sequence>\t\t\t<element name="title" type="fb3b:SimpleTextType" minOccurs="0"/>\t\t\t<choice maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol">\t\t\t\t\t<complexType>\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t</complexContent>\t\t\t\t\t</complexType>\t\t\t\t</element>\t\t\t\t<element name="ul">\t\t\t\t\t<complexType>\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t</complexContent>\t\t\t\t\t</complexType>\t\t\t\t</element>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="PaperPageBreakType">\t\t<attribute name="page-before" type="positiveInteger" use="required"/>\t\t<attribute name="page-after" type="positiveInteger" use="optional"/>\t</complexType>\t<simpleType name="alignType">\t\t<restriction base="token">\t\t\t<enumeration value="left"/>\t\t\t<enumeration value="right"/>\t\t\t<enumeration value="center"/>\t\t\t<enumeration value="justify"/>\t\t</restriction>\t</simpleType>\t<simpleType name="vAlignType">\t\t<restriction base="token">\t\t\t<enumeration value="top"/>\t\t\t<enumeration value="middle"/>\t\t\t<enumeration value="bottom"/>\t\t</restriction>\t</simpleType>\t<simpleType name="BrClearType">\t\t<restriction base="token">\t\t\t<enumeration value="left"/>\t\t\t<enumeration value="right"/>\t\t\t<enumeration value="both"/>\t\t\t<enumeration value="page"/>\t\t</restriction>\t</simpleType>\t<simpleType name="ScreenSizeType">\t\t<restriction base="normalizedString">\t\t\t<pattern value="\\d+(\\.\\d+)?(em|ex|%|mm)"/>\t\t</restriction>\t</simpleType>\t<attributeGroup name="SizingAttributes">\t\t<attribute name="width" type="fb3b:ScreenSizeType" use="optional"/>\t\t<attribute name="min-width" type="fb3b:ScreenSizeType" use="optional"/>\t\t<attribute name="max-width" type="fb3b:ScreenSizeType" use="optional"/>\t</attributeGroup>\t<simpleType name="UUIDType">\t\t<restriction base="token">\t\t\t<pattern value="[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}"/>\t\t</restriction>\t</simpleType>\t<simpleType name="DOIType">        <restriction base="string">            <pattern value=\'(10[.][0-9]{3,})(\\.[0-9]+)*/[^"]([^"&amp;&lt;&gt;])+\'/>\t\t</restriction>\t</simpleType>\t<attribute name="role" default="auto">\t\t<simpleType>\t\t\t<restriction base="token">\t\t\t\t<enumeration value="auto"/>\t\t\t\t<enumeration value="footnote"/>\t\t\t\t<enumeration value="endnote"/>\t\t\t\t<enumeration value="comment"/>\t\t\t\t<enumeration value="other"/>\t\t\t</restriction>\t\t</simpleType>\t</attribute>\t<attribute name="href" type="anyURI"></attribute></schema>';return a}},0,0,0,0,0,0,[FBEditor.xsd,"Fb3body"],0));(Ext.cmd.derive("FBEditor.xsd.desc.AbstractAnnotation",Ext.Base,{getXsd:function(b){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:fb3d="http://www.fictionbook.org/FictionBook3/description" targetNamespace="http://www.fictionbook.org/FictionBook3/description" elementFormDefault="qualified" attributeFormDefault="unqualified">\t<element name="'+b+'">\t\t<complexType>\t\t\t<sequence>\t\t\t\t<element name="p" type="fb3d:BasicTextType"/>\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t<element name="p" type="fb3d:BasicTextType"/>\t\t\t\t\t<element name="br"/>\t\t\t\t</choice>\t\t\t</sequence>\t\t</complexType>\t</element>\t<complexType name="BasicTextType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3d:BasicTextType"/>\t\t\t<element name="em" type="fb3d:BasicTextType"/>\t\t\t<element name="a">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3d:BasicTextType">\t\t\t\t\t\t\t<attribute name="href" type="anyURI" use="required"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t</choice>\t</complexType></schema>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"AbstractAnnotation"],0));(Ext.cmd.derive("FBEditor.xsd.desc.Annotation",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"annotation");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"Annotation"],0));(Ext.cmd.derive("FBEditor.xsd.desc.Bibliodescription",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"biblio-description");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"Bibliodescription"],0));(Ext.cmd.derive("FBEditor.xsd.desc.History",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"history");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"History"],0));(Ext.cmd.derive("FBEditor.xsd.desc.Preamble",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"preamble");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"Preamble"],0));(Ext.cmd.derive("FBEditor.xsl.SchemaBody",Ext.Base,{singleton:true,getXsl:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">\t<xsl:output encoding="UTF-8" indent="no" method="html"/>\t<xsl:template match="/">\t\t<xsl:call-template name="types"/>\t\telements = {\t\t<xsl:for-each select=".//element">\t\t\t<xsl:variable name="elementName" select="@name"/>\t\t\t<xsl:variable name="extAttrs" select="complexType/complexContent/extension/attribute" />\t\t\t<xsl:if test="not(preceding::element[@name=$elementName]) and $elementName">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\'<xsl:value-of select="$elementName"/>\': cse(\'<xsl:value-of select="$elementName"/>\', {\t\t\t\t<xsl:call-template name="elements">\t\t\t\t\t<xsl:with-param name="typeName" select="@type"/>\t\t\t\t\t<xsl:with-param name="parentName" select="$elementName"/>\t\t\t\t</xsl:call-template>\t\t\t\t, attributes: {\t\t\t\t<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>\t\t\t\t<xsl:for-each select="$extAttrs"><xsl:if test="@*">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t}\t\t\t\t})\t\t\t</xsl:if>\t\t</xsl:for-each>};\t</xsl:template>\t\t<xsl:template match="@*">\'<xsl:value-of select="local-name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if></xsl:template>\t\t<xsl:template name="attrs">\t\t<xsl:param name="attrs"/>\t\t<xsl:for-each select="$attrs">\t\t\t\'<xsl:value-of select="name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if>\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="elements">\t\t<xsl:param name="typeName"/>\t\t<xsl:param name="parentName"/>\t\textend: \'<xsl:value-of select="$typeName"/><xsl:call-template name="extended"/>\'\t\t<xsl:if test="count(.//element)">\t\t\t, sequence: [\t\t\t<xsl:for-each select=".//element">\t\t\t\t<xsl:if test="not(@name=\'note\' and $parentName=\'fb3-body\')">\t\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\t{element: <xsl:call-template name="element"/>}\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t\t\t]\t\t</xsl:if>\t</xsl:template>\t\t<xsl:template name="element">\t\t<xsl:param name="attrs"/>\t\t<xsl:variable name="elementName">\t\t\t<xsl:choose>\t\t\t\t<xsl:when test="@name"><xsl:value-of select="@name"/></xsl:when>\t\t\t\t<xsl:when test="@ref"><xsl:value-of select="@ref"/></xsl:when>\t\t\t\t<xsl:otherwise><xsl:text>undefined</xsl:text></xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:variable>\t\t{\'<xsl:value-of select="$elementName"/>\': {\t\t\t<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>\t\t\t<xsl:if test="$attrs">\t\t\t\t<xsl:if test="@*">,</xsl:if>\t\t\t\t<xsl:call-template name="attrs"><xsl:with-param name="attrs" select="$attrs"/></xsl:call-template>\t\t\t</xsl:if>\t\t}}\t</xsl:template>\t\t<xsl:template name="extended">\t\t<xsl:for-each select="descendant::extension">\t\t\t<xsl:if test="position()=1"><xsl:value-of select="@base"/></xsl:if>\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="types">\t\t<xsl:for-each select="schema/simpleType">\t\t\tdse(\'<xsl:value-of select="@name"/>\', {\t\t\t\t<xsl:call-template name="restriction"><xsl:with-param name="rest" select="restriction"/></xsl:call-template>\t\t\t});\t\t</xsl:for-each>\t\t<xsl:for-each select="schema/complexType">\t\t\t<xsl:variable name="extSeq" select="complexContent/extension/sequence" />\t\t\t<xsl:variable name="attrs" select="attribute" />\t\t\t<xsl:variable name="extAttrs" select="complexContent/extension/attribute" />\t\t\tdse(\'<xsl:value-of select="@name"/>\', {\t\t\t\t<xsl:if test="complexContent/extension">\t\t\t\t\textend: \'<xsl:value-of select="complexContent/extension/@base"/>\',\t\t\t\t</xsl:if>\t\t\t\tsequence: [\t\t\t\t<xsl:if test="$extSeq">\t\t\t\t\t<xsl:call-template name="sequence"><xsl:with-param name="seq" select="$extSeq"/></xsl:call-template>\t\t\t\t</xsl:if>\t\t\t\t<xsl:if test="sequence">\t\t\t\t\t<xsl:if test="$extSeq">,</xsl:if>\t\t\t\t\t<xsl:call-template name="sequence"><xsl:with-param name="seq" select="sequence"/></xsl:call-template>\t\t\t\t</xsl:if>\t\t\t\t],\t\t\t\tchoice: {<xsl:call-template name="choice"><xsl:with-param name="choice" select="choice"/></xsl:call-template>}\t\t\t\t<xsl:if test="$extAttrs or $attrs or attributeGroup">\t\t\t\t\t, attributes: {\t\t\t\t\t<xsl:if test="@mixed">mixed: <xsl:value-of select="@mixed"/>,</xsl:if>\t\t\t\t\t<xsl:for-each select="$extAttrs"><xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t\t<xsl:for-each select="$attrs"><xsl:if test="position()!=1 or $extAttrs">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t\t<xsl:if test="attributeGroup and ($attrs or $extAttrs)">,</xsl:if><xsl:call-template name="attributeGroup"/>\t\t\t\t}</xsl:if>\t\t\t});\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="attribute">\t\t<xsl:variable name="attrName">\t\t\t<xsl:choose>\t\t\t\t<xsl:when test="@name"><xsl:value-of select="@name"/></xsl:when>\t\t\t\t<xsl:when test="@ref"><xsl:value-of select="@ref"/></xsl:when>\t\t\t\t<xsl:otherwise><xsl:text>undefined</xsl:text></xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:variable>\t\t\'<xsl:value-of select="$attrName"/>\': {\t\t\t<xsl:apply-templates select="@*"/>\t\t\t<xsl:if test="simpleType/restriction">, type: {<xsl:call-template name="restriction"><xsl:with-param name="rest" select="simpleType/restriction"/></xsl:call-template>}</xsl:if>\t\t}\t</xsl:template>\t\t<xsl:template name="attributeGroup">\t\t<xsl:variable name="groupName" select="substring(attributeGroup/@ref, 6)" />\t\t<xsl:variable name="group" select="/schema/attributeGroup[@name=$groupName]/attribute" />\t\t<xsl:for-each select="$group"><xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t</xsl:template>\t\t<xsl:template name="restriction">\t\t<xsl:param name="rest"/>\t\t<xsl:variable name="enums" select="$rest/enumeration"/>\t\tbase: \'<xsl:value-of select="$rest/@base"/>\',\t\t<xsl:if test="$enums">\t\t\tenumeration: [\t\t\t<xsl:for-each select="$enums">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\'<xsl:value-of select="@value"/>\'\t\t\t</xsl:for-each>\t\t]</xsl:if>\t\t<xsl:if test="$rest/pattern">pattern: \'<xsl:value-of select="$rest/pattern/@value"/>\'</xsl:if>\t\t<xsl:if test="$rest/minInclusive">minInclusive: \'<xsl:value-of select="$rest/minInclusive/@value"/>\'</xsl:if>\t\t<xsl:if test="$rest/maxInclusive"><xsl:if test="$rest/minInclusive">,</xsl:if> maxInclusive: \'<xsl:value-of select="$rest/maxInclusive/@value"/>\'</xsl:if>\t</xsl:template>\t\t<xsl:template name="choice">\t\t<xsl:param name="choice"/>\t\t<xsl:variable name="seq" select="$choice/sequence"/>\t\t<xsl:if test="$choice/@*">attributes: {<xsl:apply-templates select="$choice/@*"/>},</xsl:if>\t\t<xsl:if test="$choice/element">\t\t\telements: [\t\t\t<xsl:for-each select="$choice/element">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="element"/>\t\t\t</xsl:for-each>\t\t]</xsl:if>\t\t<xsl:if test="$seq">\t\t\t<xsl:if test="$choice/element">,</xsl:if>\t\t\tsequence: [<xsl:call-template name="sequence"><xsl:with-param name="seq" select="$seq"/></xsl:call-template>]\t\t</xsl:if>\t</xsl:template>\t\t<xsl:template name="sequence">\t\t<xsl:param name="seq"/>\t\t<xsl:for-each select="$seq/*">\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t<xsl:if test="name()=\'element\'">{element: <xsl:call-template name="element"><xsl:with-param name="attrs" select="$seq/@*"/></xsl:call-template>}</xsl:if>\t\t\t<xsl:if test="name()=\'choice\'">{choice: {<xsl:call-template name="choice"><xsl:with-param name="choice" select="."/></xsl:call-template>}}</xsl:if>\t\t</xsl:for-each>\t</xsl:template></xsl:stylesheet>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsl,"SchemaBody"],0));(Ext.cmd.derive("FBEditor.editor.schema.Factory",Ext.Base,{singleton:"true",definedTypes:[],_deferredTypes:{},createElement:function(b,k){var i=this,f=b,a=k,g=a.schemaName.replace(/:/g,"."),c,d,j;if(Ext.isEmpty(f)){throw Error("Невозможно создать элемент схемы текста. Передано пустое назавние элемента.")}try{f=f.replace(/-([a-z])/g,"$1");f=Ext.String.capitalize(f);c="FBEditor.editor.schema."+g+"."+f+"Element";if(!a.extend){delete a.extend}else{a.extend="FBEditor.editor.schema."+g+".extend."+a.extend.substring(5)}j={constructor:function(){var l=this,e=l.superclass;l.sequence=l.sequence||[];while(e){if(e.sequence){l.sequence=Ext.Array.merge(e.sequence,l.sequence)}if(e.choice){l.choice=l.choice||{};l.choice=Ext.applyIf(l.choice,e.choice)}if(e.attributes){l.attributes=l.attributes||{};l.attributes=Ext.applyIf(l.attributes,e.attributes)}e=e.superclass}Ext.Object.each(l.attributes,function(n,o){var m;if(o.type&&/:/.test(o.type)){m="FBEditor.editor.schema."+g+".extend."+o.type.substring(5);o.type=Ext.create(m)}})}};j=Ext.apply(a,j);Ext.define(c,j);d=Ext.create(c)}catch(h){Ext.log({level:"warn",msg:"Неопределенный элемент схемы текста: "+c,dump:h})}return d},defineType:function(b,k){var j=this,h=j.definedTypes,c=j._deferredTypes,d=b,a=Ext.clone(k),g=a.schemaName.replace(/:/g,"."),f;if(Ext.isEmpty(d)){throw Error("Невозможно определить тип схемы текста. Передано пустое назавние типа.")}try{d=d.replace(/-([a-z])/g,"$1");f="FBEditor.editor.schema."+g+".extend."+d;if(a.extend){a.extend="FBEditor.editor.schema."+g+".extend."+a.extend.substring(5);if(!Ext.Array.contains(h,a.extend)){c[f]={name:b,options:k};return}}Ext.define(f,a);h.push(f);delete c[f];j._checkDeferredTypes()}catch(i){Ext.log({level:"warn",msg:"Неопределенный тип схемы текста: "+f,dump:i})}},_checkDeferredTypes:function(){var b=this,a=b._deferredTypes;Ext.Object.each(a,function(c,d){b.defineType(d.name,d.options)})}},0,0,0,0,0,0,[FBEditor.editor.schema,"Factory"],0));(Ext.cmd.derive("FBEditor.editor.schema.Schema",Ext.Base,{elements:null,_xsd:"",callback:[],disableDebug:true,constructor:function(schemaName){var me=this,schName=schemaName,xsl,xsd,xsdJson,cse,dse,elements;cse=function(name,options){options.schemaName=schName;return FBEditor.editor.schema.Factory.createElement(name,options)};dse=function(name,options){options.schemaName=schName;return FBEditor.editor.schema.Factory.defineType(name,options)};try{me._xsd=me.createXsd(schName);xsd=me._xsd.replace(/<schema.*?>/,"<schema>");xsl=FBEditor.xsl.SchemaBody.getXsl();xsdJson=FBEditor.util.xml.Jsxml.trans(xsd,xsl);eval(xsdJson);me.elements=elements}catch(e){Ext.log({level:"error",msg:e,dump:e});Ext.Msg.show({title:"Ошибка",message:"Невозможно инициализировать схему "+schName,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},validXml:function(d){var c=this,a=FBEditor.webworker.Manager,b=a.getMaster("xmllint"),e;e={xml:d.xml,xsd:c._xsd,xmlFileName:"body.xml",schemaFileName:"fb3_body.xsd"};d.scopeData=d.scopeData||{};c.callback.push({fn:d.callback,scope:d.scope,scopeData:d.scopeData});b.post(e,c.messageValid,c)},isChild:function(c,e){var d=this,b=d.getChildrenForElement(c),a;a=Ext.Array.contains(b,e);return a},getChildrenForElement:function(a){var d=this,b=[],c;c=d.getElement(a);if(c){if(c.choice&&c.choice.elements){Ext.Array.each(c.choice.elements,function(f){var e=Ext.Object.getKeys(f)[0];b.push(e)})}if(c.sequence.length){Ext.Array.each(c.sequence,function(f){var e;if(f.element){e=Ext.Object.getKeys(f.element)[0];b.push(e)}if(f.choice){Ext.Array.each(f.choice.elements,function(g){var h;h=Ext.Object.getKeys(g)[0];b.push(h)});Ext.Array.each(f.choice.sequence,function(g){var h;if(g.element){h=Ext.Object.getKeys(g.element)[0];b.push(h)}else{if(g.choice){Ext.Array.each(g.choice.elements,function(i){var j;j=Ext.Object.getKeys(i)[0];b.push(j)})}}})}})}}return b},createXsd:function(d){var g=d,c,b,a;if(Ext.isEmpty(g)){throw Error("Невозможно создать схему. Передано пустое назавние схемы.")}g=g.toLowerCase();g=g.replace(/-([a-z])/g,"$1");if(/:/.test(g)){g=g.split(":");c=g.pop();c=Ext.String.capitalize(c);g.push(c);g=g.join(".")}else{g=Ext.String.capitalize(g)}b="FBEditor.xsd."+g;try{a=Ext.create(b);a=a.getXsd()}catch(f){a="";Ext.log({level:"error",msg:"Не найдена схема: "+b,dump:f})}return a},messageValid:function(a){var b=this,c=a.data,d;d=b.getCallback();!d.scopeData.debug||console.log("xmllint",c.res,c.valid,c);if(d){d.scopeData.loaded=c.loaded;d.scopeData.response=c;d.fn.call(d.scope,c.res,d.scopeData)}},getCallback:function(){var a=this,b=null;if(a.callback.length){b=a.callback.splice(0,1)[0]}return b},getElement:function(a){var c=this,b;b=c.elements[a]?c.elements[a]:null;return b},getAttributes:function(b){var d=this,c=d.getElement(b),a={};if(c){Ext.Object.each(c.attributes,function(e,f){if(f.name){a[e]=f}})}return a},getName:function(a){return a.attributes.name},verify:function(c,a,d){var k=this,j=true,l=Ext.clone(a),m,h,g,f,b=d?false:k.disableDebug;g=k.getElement(c);if(!g){return false}m=g.sequence.length?Ext.clone(g.sequence):null;h=g.choice&&g.choice.elements&&g.choice.elements.length?Ext.clone(g.choice):null;b||console.log("VERIFY name, srcEls, el",c,l,g);try{while(l.length){f=l[0];b||console.log("======================== (nameEl, seq, srcEls)",f,m,l);if(m&&!k.checkSequence(m,l,d)){b||console.log("=== ERROR VERIFY SEQ === (nameEl, seq, srcEls)",f,m,l);return false}if(h){if(!k.checkChoice(f,h,d)){b||console.log("=== ERROR VERIFY CHOICE === (nameEl, choice, srcEls)",f,h,l);return false}l.splice(0,1)}}}catch(i){b||console.log("=== THROW ERROR VERIFY === ",i);j=false}return j},checkSequence:function(i,g,c){var f=this,e=false,h,b,d,a=c?false:f.disableDebug;a||console.log("--- SEQUENCE --- (name, seq, srcEls)",g[0],i,g);while(i.length){b=g[0];h=i[0];if(h){if(h.element){d=g.length>1?g[1]:false;e=f.checkElement(b,d,h.element,i,c);if(e){g.splice(0,1)}}else{if(h.choice){if(b){while(b&&(e=f.checkChoice(b,h.choice,c))){a||console.log("< OK > sequence choice (name, choice)",b,h.choice);g.splice(0,1);b=g.length?g[0]:false}}else{e=f.checkChoice(b,h.choice,c)}i.splice(0,1)}}}}return e},checkElement:function(b,d,f,h,c){var i=this,g=false,e,a=c?false:i.disableDebug;e=Ext.Object.getValues(f)[0];a||console.log("--- ELEMENT --- (name, nextName, el, items)",b,d,e,h);if(e.name&&e.name===b||e.ref&&e.ref===b){a||console.log("< OK > sequence element (el, nextName)",e,d);g=true;if(e.maxOccurs&&e.maxOccurs==="unbounded"&&d===b){}else{if(e.maxOccurs&&Number(e.maxOccurs)>1&&d===b){e.maxOccurs=Number(e.maxOccurs)-1}else{h.splice(0,1)}}}else{if((e.name||e.ref)&&(!e.minOccurs||Number(e.minOccurs)!==0)){h.splice(0,h.length)}else{if(b===undefined){if(e.minOccurs&&Number(e.minOccurs)===0){g=true;h.splice(0,1)}else{h.splice(0,h.length)}}else{if(e.minOccurs&&Number(e.minOccurs)===0){h.splice(0,1)}else{h.splice(0,1)}}}}return g},checkChoice:function(d,b,a){var f=this,e=false,c,g=a?false:f.disableDebug;g||console.log("+++ CHOICE +++ (name, choice)",d,b);c=b.attributes||{};e=Ext.Array.findBy(b.elements,function(h){return h[d]});if(e){return true}if(b.sequence){e=f.checkChoiceSequence(d,b.sequence,a)}return e},checkChoiceSequence:function(b,e,a){var d=this,c=false,f=a?false:d.disableDebug;f||console.log("+++ CHOICE SEQUENCE +++ (name, choiceSeq)",b,e);c=Ext.Array.findBy(e,function(g){if(g.element){if(g.element[b]){f||console.log("-< OK >- choice sequence element (name, element)",b,g.element);return true}}else{if(g.choice){if(d.checkChoice(b,g.choice,a)){f||console.log("+< OK >+ choice sequence choice (name, choice)",b,g.choice);return true}}}return false});return c}},1,0,0,0,0,0,[FBEditor.editor.schema,"Schema"],0));(Ext.cmd.derive("FBEditor.xsl.Editor",Ext.Base,{singleton:true,getXsl:function(){var a;a='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">\t<xsl:output encoding="UTF-8" indent="no" method="text"/>\t<xsl:template match="*">\t\tce(\'<xsl:value-of select="name()"/>\', {<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>}<xsl:if test="* or .">, [<xsl:apply-templates/>]</xsl:if>)<xsl:if test="position()!=last()">, </xsl:if>\t</xsl:template>\t<xsl:template match="text()">\t\t<xsl:if test="normalize-space() or string()=\' \'">\t\t\tct(\'<xsl:value-of select="."/>\')\t\t\t<xsl:if test="position()!=last()">, </xsl:if>\t\t</xsl:if>\t</xsl:template>\t<xsl:template match="@*">\'<xsl:value-of select="local-name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if></xsl:template></xsl:stylesheet>\t\t\t';a='<?xml version="1.0" encoding="UTF-8"?>'+a;return a}},0,0,0,0,0,0,[FBEditor.xsl,"Editor"],0));(Ext.cmd.derive("FBEditor.editor.Manager",Ext.Base,{selection:null,range:null,suspendEvent:false,processSyncButtons:false,emptyElement:"br",selectionToLeft:null,selectionToUp:null,xml:null,unprintedSymbols:false,editor:null,history:null,schema:null,content:null,focusElement:null,stateExpandedNodesTree:{},cashSyncBtn:null,constructor:function(a){var c=this,b=a.rootElementName;c.editor=a;c.history=Ext.create("FBEditor.editor.History");c.schema=Ext.create("FBEditor.editor.schema.Schema",b)},createContent:function(a){var f=this,c=f.content,d,b;try{d=f.getModelFromXml(a);f.setXml(a);f.updateContent(d)}catch(g){f.content=c;throw g}},setXml:function(a){this.xml=a},updateContent:function(c){var b=this,a;b.content=c;b.resetFocus();a=b.getEditor();c.setEditor(a);b.getHistory().clear();a.fireEvent("loadData")},getModelFromXml:function(a){var f=this,g,e,d,b,c=new Date().getTime();a=a.replace(/\\/g,"\\\\");a=a.replace(/'/g,"\\'");a=a.replace(/<br(.*?)\/>/gi,"<p><br$1/></p>");a=a.replace(/<li><\/li>/gi,"<li><br/></li>");a=a.replace(/<subtitle><\/subtitle>/gi,"<subtitle><br/></subtitle>");b=FBEditor.xsl.Editor.getXsl();g=FBEditor.util.xml.Jsxml.trans(a,b);g=g.replace(/\n+|\t+/g," ");g=g.replace(/\), ?]/g,")]");g=g.replace(/, $/,"");d=Ext.create("FBEditor.editor.CreateContent",g);e=d.getContent();return e},createRootElement:function(c){var d=this,b=d.getFactory(),a;a=b.createElement(c);a.createScaffold();d.content=a;return a},setSuspendEvent:function(a){this.suspendEvent=a},isSuspendEvent:function(){return this.suspendEvent},isUnprintedSymbols:function(){return this.unprintedSymbols},getContent:function(){return this.content},getFactory:function(){return FBEditor.editor.Factory},getEditor:function(){return this.editor},getHistory:function(){return this.history},getNode:function(d){var c=this,b=c.content,a;c.suspendEvent=true;a=b.getNode(d);c.suspendEvent=false;return a},getXml:function(a,c){var e=this,d=e.content,b;b=d.getXml(a,c);b='<?xml version="1.0" encoding="UTF-8"?>'+b;return b},getRangeXml:function(){var h=this,b=window.getSelection(),e={},a={},i={},g="",c,d,j,f;f=b.getRangeAt(0);if(f.collapsed){return""}a.common=f.commonAncestorContainer;e.common=a.common.getElement();e.start=f.startContainer.getElement();e.end=f.endContainer.getElement();e.p=e.common.getStyleHolder();j=a.common.viewportId;if(e.start.equal(e.common)&&e.end.equal(e.common)&&!e.common.isText){return""}d={start:f.startOffset,end:f.endOffset};h.setSuspendEvent(true);if(e.common.isText){g=e.common.getText(d.start,d.end)}else{if(e.p){e.common=e.p;c=e.common.getNodeHelper();a.common=c.getNode(j);e.needPrevEnd=e.end.isText&&d.end<e.end.getLength();a.container=f.endContainer;a.end=h.splitNode(e,a,d.end);a.container=f.startContainer;a.start=h.splitNode(e,a,d.start);e.start=a.start.getElement();e.prev=e.start.prev();a.end=e.needPrevEnd?a.end.previousSibling:a.end;e.end=a.end.getElement();if(e.end.isEmpty()){a.prev=a.end.previousSibling;e.common.remove(e.end,j);a.end=a.prev;e.end=a.end.getElement()}if(e.prev&&e.prev.isEmpty()){e.common.remove(e.prev,j)}e.next=e.start;while(e.next&&!e.next.equal(e.end)){g+=e.next.getXml();e.next=e.next.next()}g+=e.end.getXml();if(a.end.nextSibling){h.joinNode(a.end.nextSibling)}if(e.prev){h.joinNode(a.start)}h.removeEmptyNodes(a.common);h.setCursor({withoutSyncButtons:true,startNode:h.getDeepFirst(f.startContainer),startOffset:d.start,endNode:h.getDeepLast(f.endContainer),endOffset:d.end})}else{e.first=e.start;while(e.first&&!e.first.parent.equal(e.common)){e.first=e.isRoot?e.first.first():e.first.parent}e.last=e.end;while(e.last&&!e.last.parent.equal(e.common)){e.last=e.isRoot?e.last.last():e.last.parent}i.isStart=e.first.isStartRange(f);i.isEnd=e.last.isEndRange(f);if(!i.isStart){a.container=f.startContainer;a.start=h.splitNode(e,a,d.start);e.start=a.start.getElement()}else{e.start=e.first}if(!i.isEnd){a.container=f.endContainer;a.end=h.splitNode(e,a,d.end);e.end=a.end.previousSibling.getElement()}else{e.end=e.last}e.next=e.start;while(e.next&&!e.next.equal(e.end)){g+=e.next.getXml();e.next=e.next.next()}g+=e.next.getXml();if(!i.isStart){a.prev=a.start.previousSibling;h.joinNode(a.start);h.removeEmptyNodes(a.prev)}if(!i.isEnd){a.next=a.end.nextSibling||a.end;h.joinNode(a.next);h.removeEmptyNodes(a.end)}h.setCursor({withoutSyncButtons:true,startNode:f.startContainer,startOffset:d.start,endNode:f.endContainer,endOffset:d.end})}}h.setSuspendEvent(false);return g},setFocusElement:function(d,f,h){var c=this,g=c.getPanelProps(),b,a,e;b=d.getElement?d.getElement():null;if(b){FBEditor.setEditorManager(c);if(g){g.fireEvent("loadData",b)}c.focusElement=b;c.selection=f||window.getSelection();a=c.selection.rangeCount?c.selection.getRangeAt(0):null;if(a){e=c.range?c.range.collapsed!==a.collapsed:true;c.range={collapsed:a.collapsed,common:a.commonAncestorContainer,start:a.startContainer,end:a.endContainer,offset:{start:a.startOffset,end:a.endOffset},toString:function(){return a.toString()}}}else{e=true;c.range={collapsed:true,common:d,start:d,end:d,offset:{start:0,end:0},toString:function(){return""}}}if(!b.isText&&c.cashSyncBtn!==b.elementId||e){c.cashSyncBtn=b.elementId;if(!h){c.syncButtons()}}}},setUnprintedSymbols:function(a){var c=this,b=c.getContent();if(c.unprintedSymbols!==a){c.unprintedSymbols=a;c.setSuspendEvent(true);b.updateUnprintedSymbols();c.setSuspendEvent(false)}},getPanelProps:function(){return null},resetFocus:function(){var a=this;a.focusElement=null;a.range=null;a.selection=null;a.selectionToLeft=null;a.selectionToUp=null},setCursor:function(g){var d=this,a=d.getContent(),f=window.getSelection(),b,c,i;try{g.focusElement=g.focusElement||g.startNode.getElement();g.startOffset=g.startOffset||0;g.startOffset=g.startOffset>g.startNode.length?g.startNode.length:g.startOffset;i=g.startNode.viewportId;c=a.getNodeHelper();if(g.focusElement.nodes[i].scrollIntoView){}if(g.startNode.getElement().isText){f.collapse(g.startNode,g.startOffset)}else{f.collapse(g.startNode,0)}if(g.endNode){g.endOffset=g.endOffset||0;f.extend(g.endNode,g.endOffset)}b=f.getRangeAt(0);d.range={common:b.commonAncestorContainer,start:b.startContainer,end:b.endContainer,offset:{start:b.startOffset,end:b.endOffset}};c=g.focusElement.getNodeHelper();d.setFocusElement(c.getNode(i),f,g.withoutSyncButtons)}catch(h){}},restoreCursor:function(){var b=this,a=b.getRange();if(a&&a.collapsed){b.setCursor({withoutSyncButtons:true,startNode:a.start,startOffset:a.offset.start})}},restoreSelection:function(){var b=this,a=b.getRange();if(a){b.setCursor({withoutSyncButtons:true,startNode:a.start,startOffset:a.offset.start,endNode:a.end,endOffset:a.offset.end})}},getFocusElement:function(){return this.focusElement},clearCacheSyncButton:function(){this.cashSyncBtn=null},availableSyncButtons:function(){return true},syncButtons:function(){var b=this,a=b.getEditor();console.log("sync");a.syncButtons()},disableButtons:function(){var c=this,a=c.getEditor(),b;b=a.getToolbar();if(b){b.fireEvent("disableButtons")}},checkHotkeys:function(f){var g=this,a=FBEditor.hotkeys.Manager,j,b,i,d,c,h;i=Ext.create("Ext.event.Event",f);j=i.getKeyName();if((!i.isSpecialKey()||j==="ENTER")&&(i.ctrlKey||i.shiftKey||i.altKey)){b={key:f.key.toUpperCase(),ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey};d=a.getNumberSlot(b);if(d){f.preventDefault();c=g.getEditor();h=c.getToolbar();h.callClickButton(d)}else{if(j==="ENTER"){f.preventDefault()}}}},removeNodes:function(c){var b=this,a=b.content;a.removeNodes(c)},createElement:function(b,e){var d=this,a=d.getFactory(),c,f;f=d.getSelection();c=a.createElement(b);c.fireEvent("createElement",f,e)},deleteWrapper:function(b,d){var c=this,a=d,e;a=a||{};a.manager=c;e=Ext.create("FBEditor.editor.command."+b+".DeleteWrapperCommand",{opts:a});if(e.execute()){c.getHistory().add(e)}},setRootContentEditable:function(b,f){var e=this,a=e.getContent(),d,c;d=a.getNodeHelper();c=d.getNode(f);c.setAttribute("contenteditable",Boolean(b))},getSelection:function(){return this.selection},getRange:function(){return this.range},getSchema:function(){return this.schema},getElementById:function(d,b){var c=this,a=null;b=b||c.getContent();if(b.elementId===d){return b}Ext.Array.each(b.children,function(e){a=c.getElementById(d,e);if(a){return false}});return a},getNamesElements:function(b){var a=[];Ext.Array.each(b.children,function(c){if(!c.isText){a.push(c.getName())}});return a},createEmptyElement:function(){var b=this,a;a=b.getFactory().createElement(b.emptyElement);return a},createEmptyP:function(){var c=this,b={},a=c.getFactory();b.empty=a.createElement(c.emptyElement);b.p=a.createElement("p");b.p.add(b.empty);return b.p},splitNode:function(c,b,f){var d=this,a=d.getFactory(),e;b.parentContainer=b.container.parentNode;e=b.parentContainer.viewportId;c.parentContainer=b.parentContainer.getElement();c.container=b.container.getElement();if(c.parentContainer.equal(c.common)&&c.container.isText){b.next=b.container.nextSibling;c.endTextValue=b.container.nodeValue.substring(f);c.startTextValue=b.container.nodeValue.substring(0,f);if(c.startTextValue){b.container.nodeValue=c.startTextValue;c.container.setText(c.startTextValue)}if(c.startTextValue&&c.endTextValue.trim()){c.container=a.createElementText(c.endTextValue);b.container=c.container.getNode(e);if(b.next){c.next=b.next.getElement();c.parentContainer.insertBefore(c.container,c.next);b.parentContainer.insertBefore(b.container,b.next)}else{c.parentContainer.add(c.container);b.parentContainer.appendChild(b.container)}}}else{while(!c.parentContainer.equal(c.common)){b.next=b.parentContainer.nextSibling;b.parent=b.parentContainer.parentNode;c.parent=b.parent.getElement();b.nextContainer=b.container.nextSibling;c.cloneContainer=c.parentContainer.clone({ignoredDeep:true});if(c.container.isText){c.endTextValue=b.container.nodeValue.substring(f);c.startTextValue=b.container.nodeValue.substring(0,f);if(!c.startTextValue){c.parentContainer.remove(c.container);b.parentContainer.removeChild(b.container)}else{b.container.nodeValue=c.startTextValue;c.container.setText(c.startTextValue)}if(c.endTextValue){c.t=a.createElementText(c.endTextValue);c.cloneContainer.add(c.t)}b.cloneContainer=c.cloneContainer.getNode(e);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.cloneContainer,c.next);b.parent.insertBefore(b.cloneContainer,b.next)}else{c.parent.add(c.cloneContainer);b.parent.appendChild(b.cloneContainer)}}else{b.cloneContainer=c.cloneContainer.getNode(e);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.cloneContainer,c.next);b.parent.insertBefore(b.cloneContainer,b.next)}else{c.parent.add(c.cloneContainer);b.parent.appendChild(b.cloneContainer)}if(b.container.firstChild){c.cloneContainer.add(c.container);b.cloneContainer.appendChild(b.container)}else{b.parentContainer.removeChild(b.container)}c.parentContainer.remove(c.container)}b.parent=b.cloneContainer;c.parent=b.parent.getElement();while(b.nextContainer){c.nextContainer=b.nextContainer.getElement();b.buf=b.nextContainer.nextSibling;c.parent.add(c.nextContainer);b.parent.appendChild(b.nextContainer);c.parentContainer.remove(c.nextContainer);b.nextContainer=b.buf}b.container=b.cloneContainer;c.container=b.container.getElement();if(!b.parentContainer.firstChild){b.parentContainer.parentNode.getElement().remove(c.parentContainer);b.parentContainer.parentNode.removeChild(b.parentContainer)}b.parentContainer=b.container.parentNode;c.parentContainer=b.parentContainer.getElement()}}return b.container},joinNode:function(d){var c=this,a={},b={},e=d.viewportId;a.node=d;b.node=d.getElement();a.prev=d.previousSibling;b.prev=a.prev.getElement();if(b.node.isText&&b.prev.isText){b.text=b.prev.getText()+b.node.getText();b.prev.setText(b.text,e)}else{a.first=a.node.firstChild;b.first=a.first?a.first.getElement():null;a.prevLast=a.prev;b.prevLast=b.prev;a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null;while(b.first&&b.last){a.firstChild=a.first.firstChild;a.next=a.first;if(b.last.isText&&!b.first.isText){while(a.next){a.buf=a.next.nextSibling;b.next=a.next.getElement();b.prevLast.add(b.next);a.next.parentNode.getElement().remove(b.next);a.prevLast.appendChild(a.next);a.next=a.buf}}else{while(a.next){a.buf=a.next.nextSibling;b.next=a.next.getElement();if(b.last&&b.last.isText&&b.next.isText){b.nodeValue=b.last.getText()+b.next.getText();b.last.setText(b.nodeValue,e)}else{b.prevLast.add(b.next);a.prevLast.appendChild(a.next);if(b.last.isText){a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null}}a.next=a.buf}if(b.last.isText){a.first.parentNode.getElement().remove(b.first);a.first.parentNode.removeChild(a.first)}}if(a.prevLast.firstChild.getElement().isEmpty()){b.prevLast.remove(a.prevLast.firstChild.getElement());a.prevLast.removeChild(a.prevLast.firstChild)}a.first=a.firstChild;b.first=a.first?a.first.getElement():null;a.prevLast=a.last;b.prevLast=b.last;a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null}}a.node.parentNode.getElement().remove(b.node);a.node.parentNode.removeChild(a.node)},isFirstNode:function(c,d){var a={},b={};b.common=c.getElement();a.node=d;b.node=a.node.getElement();do{a.parent=a.node.parentNode;b.parent=a.parent.getElement();a.parentParent=a.parent.parentNode;b.parentParent=a.parentParent.getElement();a.first=a.parent.firstChild;b.first=a.first.getElement();if(b.first.elementId!==b.node.elementId){return false}a.node=a.parent;b.node=a.node.getElement()}while(b.parentParent.elementId!==b.common.elementId&&b.parent.elementId!==b.common.elementId&&!b.parentParent.isRoot);return true},isLastNode:function(c,d){var a={},b={};b.common=c.getElement();a.node=d;b.node=a.node.getElement();do{a.parent=a.node.parentNode;b.parent=a.parent.getElement();a.parentParent=a.parent.parentNode;b.parentParent=a.parentParent.getElement();a.last=a.parent.lastChild;b.last=a.last.getElement();if(b.last.elementId!==b.node.elementId){return false}a.node=a.parent;b.node=a.node.getElement()}while(b.parentParent.elementId!==b.common.elementId&&b.parent.elementId!==b.common.elementId&&!b.parentParent.isRoot);return true},getNodesPP:function(f,b,c){var d=this,a=[],e=[];if(!f){return a}c.cur=f.getElement();if(c.cur.equal(c.lastP)){b.ppStop=true;return a}if(!c.cur.isStyleHolder){b.first=f.firstChild;c.first=b.first?b.first.getElement():null;if(c.first&&!c.first.isText){e=d.getNodesPP(b.first,b,c);Ext.Array.push(a,e)}}else{a=[f]}if(f.nextSibling&&!b.ppStop){f=f.nextSibling;e=d.getNodesPP(f,b,c);Ext.Array.push(a,e)}if(!b.ppStop){b.parent=f.parentNode;c.parent=b.parent.getElement();while(!b.parent.nextSibling&&!c.parent.equal(c.common)){b.parent=b.parent.parentNode;c.parent=b.parent.getElement()}b.parentNext=b.parent.nextSibling;if(b.parentNext&&!c.parent.equal(c.common)){e=d.getNodesPP(b.parentNext,b,c);Ext.Array.push(a,e)}}return a},getDeepFirst:function(a){if(a){while(a.firstChild){a=a.firstChild}}return a},getDeepLast:function(a){if(a){while(a.lastChild){a=a.lastChild}}return a},getCursorPosition:function(d){var g=this,b=window.getSelection(),e={},a={},k,h,f,j,c,i;f=b.getRangeAt(0);i=f.startContainer.viewportId;j={withoutSyncButtons:true,startNode:f.startContainer,startOffset:f.startOffset,endNode:f.endContainer,endOffset:f.endOffset};if(!d){k={node:f.startContainer,offset:f.startOffset}}else{a.cursor=f.endContainer;e.cursor=a.cursor.getElement();if(!e.cursor.isText){e.cursor=e.cursor.getDeepFirst();c=e.cursor.getNodeHelper();a.cursor=c.getNode(i)}k={node:a.cursor,offset:f.endOffset}}a.node=k.node;e.node=a.node.getElement();c=e.node.getNodeHelper();h=c.getXY(i,k.offset);g.setCursor(j);return h},createElementFromNode:function(g){var f=this,b=f.getFactory(),a={},c=g.nodeName.toLowerCase(),e=f.getSchema(),h,d;if(g.nodeType===Node.TEXT_NODE){h=g.nodeValue.trim();if(h&&!/^\n+$/.test(h)){d=b.createElementText(g.nodeValue)}}else{if(e.elements[c]){Ext.Array.each(g.attributes,function(i){if(Ext.isObject(e.elements[c].attributes[i.name])||Ext.Array.contains(["href"],i.name)&&e.elements[c].attributes["xlink:href"]){a[i.name]=i.value}})}d=b.createElement(c,a);Ext.Array.each(g.childNodes,function(j){var i;i=f.createElementFromNode(j);if(i){d.add(i)}})}return d},removeEmptyNodes:function(c){var b=this,e=0,a,d;a=c.getElement();while(e<a.children.length){d=a.children[e];if(d.isEmpty()){a.remove(d);c.removeChild(d.nodes[c.viewportId])}else{if(d.children.length){b.removeEmptyNodes(d.nodes[c.viewportId])}e++}}},scrollViewDown:function(){var f=this,d=f.getEditor(),b=f.getContent(),e,g,a,c;g=f.getCursorPosition(true);a=d.getPosition();c=d.getHeight();if(g.y+g.h>a[1]+c){e=b.getNodeHelper();e.scrollBy(0,g.h*3)}},scrollViewUp:function(){var e=this,c=e.getEditor(),b=e.getContent(),d,f,a;f=e.getCursorPosition();a=c.getPosition();if(f.y<a[1]){d=b.getNodeHelper();d.scrollBy(0,-f.h*2)}}},1,0,0,0,0,0,[FBEditor.editor,"Manager"],0));(Ext.cmd.derive("FBEditor.editor.command.ConvertToTextCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),k=false,b={},f={},h=FBEditor.editor.Factory,c,m,d,a,i;try{d=g.el.getManager();d.setSuspendEvent(true);a=d.getSchema();i=g.range||d.getRange();m=g.viewportId=i.start.viewportId;console.log("convert "+g.el.getName()+" to text ",g);f.node=g.el.getBlock();f.parent=f.node.parent;f.nameEl=f.parent.getName();f.pos=f.parent.getChildPosition(f.node);f.namesElements=d.getNamesElements(f.parent);f.namesElements.splice(f.pos,1,"p");if(a.verify(f.nameEl,f.namesElements)){f.verify=true}else{if(!a.verify(f.node.getName(),["p"])){return false}}f.fragment=h.createElement("div");f.node.convertToText(f.fragment);console.log("nodes",b);f.first=f.fragment.first();if(f.verify&&f.first){while(f.first){f.parent.insertBefore(f.first,f.node,m);f.first=f.fragment.first()}f.parent.remove(f.node,m)}else{c=f.node.getNodeHelper();b.node=c.getNode(m);c=f.parent.getNodeHelper();b.parent=c.getNode(m);f.node.removeAll();b.oldNode=b.node;b.node=f.node.getNode(m);b.parent.replaceChild(b.node,b.oldNode);while(f.first){f.node.add(f.first,m);f.first=f.fragment.first()}}f.parent.sync(m);d.setSuspendEvent(false);f.cursor=i.start.getElement();c=f.cursor.getNodeHelper();b.cursor=c.getNode(m);d.setCursor({startNode:b.cursor,startOffset:i.offset.start});k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(f.parent).removeNext()}d.setSuspendEvent(false);d.updateTree();return k},unExecute:function(){var e=this,f=e.getData(),b={},d={},c=false,a;console.log("Отмена превращения в текст нереализована");return c}},0,0,0,0,0,0,[FBEditor.editor.command,"ConvertToTextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.DeleteCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,a={},d={},g=FBEditor.editor.Factory,b,c,h;try{d.node=f.el;c=d.node.getManager();c.setSuspendEvent(true);h=f.range||c.getRange();f.viewportId=h.start.viewportId;console.log("del el",f,h);b=d.node.getNodeHelper();a.node=b.getNode(f.viewportId);d.parent=d.node.parent;b=d.parent.getNodeHelper();a.parent=b.getNode(f.viewportId);a.next=a.node.nextSibling;d.next=a.next?a.next.getElement():null;a.prev=a.node.previousSibling;d.prev=a.prev?a.prev.getElement():null;d.parent.remove(d.node);a.parent.removeChild(a.node);a.first=a.parent.firstChild;if(!a.first){if(d.parent.isStyleHolder){d.empty=c.createEmptyElement();d.newEl=d.empty}else{d.p=c.createEmptyP();d.newEl=d.p;if(d.parent.isRoot){d.s=g.createElement("section");d.s.add(d.p);d.newEl=d.s}}a.newEl=d.newEl.getNode(f.viewportId);d.parent.add(d.newEl);a.parent.appendChild(a.newEl)}d.parent.sync(f.viewportId);c.setSuspendEvent(false);a.cursor=a.newEl?a.newEl:a.next;a.cursor=a.cursor?a.cursor:a.prev;a.cursor=a.cursor?a.cursor:a.parent;f.saveRange={startNode:c.getDeepFirst(a.cursor)};c.setCursor(f.saveRange);f.els=d;f.range=h;k.verifyElement(d.parent);j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var j=this,f=j.getData(),a={},d={},i=false,b,c,g;try{g=f.range;d=f.els;c=d.parent.getManager();c.setSuspendEvent(true);b=d.node.getNodeHelper();a.node=b.getNode(f.viewportId);b=d.parent.getNodeHelper();a.parent=b.getNode(f.viewportId);console.log("undo del el",a,d,g);if(d.newEl){b=d.newEl.getNodeHelper();a.newEl=b.getNode(f.viewportId);a.parent.replaceChild(a.node,a.newEl);d.parent.replace(d.node,d.newEl)}else{if(d.next){b=d.next.getNodeHelper();a.next=b.getNode(f.viewportId);d.parent.insertBefore(d.node,d.next);a.parent.insertBefore(a.node,a.next)}else{d.parent.add(d.node);a.parent.appendChild(a.node)}}d.parent.sync(f.viewportId);f.saveRange={startNode:g.start,startOffset:g.offset.start,focusElement:d.node};c.setCursor(f.saveRange);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(d.parent).remove()}c.setSuspendEvent(false);return i}},0,0,0,0,0,0,[FBEditor.editor.command,"DeleteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.UnstyleCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,g=k.getData(),d=g.manager,b=window.getSelection(),j=false,a={},f={},m,h,c,l;try{d.setSuspendEvent(true);h=b.getRangeAt(0);g.cursor={start:h.startContainer,end:h.endContainer,offset:{start:h.startOffset,end:h.endOffset}};console.log("unstyle",g,h);f.common=h.commonAncestorContainer.getElement();g.viewportId=l=h.commonAncestorContainer.viewportId;f.first=h.startContainer.getElement();f.firstP=f.first.getStyleHolder();f.last=h.endContainer.getElement();f.lastP=f.last.getStyleHolder();a.pp=[];if(!f.firstP.equal(f.lastP)){a.pp=d.getNodesPP(h.startContainer,a,f);c=f.lastP.getNodeHelper();a.lastP=c.getNode();a.pp.push(a.lastP)}c=f.firstP.getNodeHelper();a.firstP=c.getNode();a.pp.unshift(a.firstP);Ext.each(a.pp,function(e){k.removeStyles(e)});g.nodes=a;g.els=f;f.common.sync(l);d.setCursor({startNode:a.firstP});j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(f.common).removeNext()}d.setSuspendEvent(false);return j},unExecute:function(){var h=this,d=h.getData(),a=d.nodes,c=d.els,b=d.manager,i=d.viewportId,j=d.cursor,g=false;try{console.log("undo unstyle",d);b.setSuspendEvent(true);Ext.each(a.pp,function(e){h.restoreStyles(e)});c.common.sync(i);b.setCursor({startNode:j.start,startOffset:j.offset.start,endNode:j.end,endOffset:j.offset.end});g=true}catch(f){Ext.log({level:"warn",msg:f,dump:f});h.getHistory(c.common).remove()}b.setSuspendEvent(false);return g},removeStyles:function(f){var d=this,b,a,c,g,e;c=f.getElement();e=f.viewportId;b=c.getManager();a=b.getFactory();g=a.createElementText(c.getText());f.restoreChildren=Ext.clone(c.children);c.removeAll(e);c.add(g,e)},restoreStyles:function(d){var b=this,a,c;a=d.getElement();c=d.viewportId;a.removeAll(c);Ext.each(d.restoreChildren,function(e){a.add(e,c)})}},0,0,0,0,0,0,[FBEditor.editor.command,"UnstyleCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.section.LeftCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,d={},b,g,l,c,a,h;try{a=window.getSelection();h=a.getRangeAt(0);b=h.commonAncestorContainer;f.viewportId=l=b.viewportId;d.node=b.getElement();c=d.node.getManager();g=c.getFactory();d.focus=c.getFocusElement();c.setSuspendEvent(true);d.section=d.focus.isSection?d.focus:d.focus.getParentName("section");d.parent=d.section.parent&&d.section.parent.isSection?d.section.parent:null;d.sectionParent=d.parent.parent;if(!d.parent){return false}d.sectionPrev=d.section.prev();if(d.sectionPrev){d.sectionNew=g.createElement("section");d.sectionParent.insertBefore(d.sectionNew,d.parent,l);d.first=d.parent.first();while(!d.first.equal(d.section)){d.sectionNew.add(d.first,l);d.first=d.parent.first()}if(!d.sectionPrev.isSection){d.emptyP=c.createEmptyP();d.sectionNew.add(d.emptyP,l)}}d.sectionParent.insertBefore(d.section,d.parent,l);if(d.parent.isEmpty()){d.sectionParent.remove(d.parent,l)}f.els=d;d.sectionParent.sync(l);c.restoreSelection();k.verifyElement(d.sectionParent);j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(d.sectionParent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var d=this,f=d.getData(),c=false,b={},a,h;try{h=f.viewportId;b=f.els;a=b.focus.getManager();a.setSuspendEvent(true);if(b.parent.isEmpty()){b.sectionParent.insertBefore(b.parent,b.section,h);b.parent.add(b.section,h)}else{b.parent.insertBefore(b.section,b.parent.first(),h)}if(b.sectionNew){if(b.emptyP){b.sectionNew.remove(b.emptyP)}b.first=b.sectionNew.first();while(b.first){b.parent.insertBefore(b.first,b.section,h);b.first=b.sectionNew.first()}b.sectionParent.remove(b.sectionNew,h)}b.sectionParent.sync(h);a.restoreSelection();d.verifyElement(b.sectionParent);c=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});d.getHistory(b.sectionParent).removeNext()}a.setSuspendEvent(false);return c}},0,0,0,0,0,0,[FBEditor.editor.command.section,"LeftCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.section.RightCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,d={},b,g,l,c,a,h;try{a=window.getSelection();h=a.getRangeAt(0);b=h.commonAncestorContainer;f.viewportId=l=b.viewportId;d.node=b.getElement();c=d.node.getManager();d.focus=c.getFocusElement();g=c.getFactory();c.setSuspendEvent(true);d.section=d.focus.isSection?d.focus:d.focus.getParentName("section");d.sectionPrev=d.section?d.section.prev():null;if(!d.sectionPrev||!d.sectionPrev.isSection){return false}d.parent=d.section.parent;d.sectionCommon=g.createElement("section");d.parent.insertBefore(d.sectionCommon,d.sectionPrev,l);d.sectionCommon.add(d.sectionPrev,l);d.sectionCommon.add(d.section,l);f.els=d;d.parent.sync(l);c.restoreSelection();k.verifyElement(d.parent);j=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var d=this,f=d.getData(),c=false,b={},h,a;try{h=f.viewportId;b=f.els;a=b.focus.getManager();a.setSuspendEvent(true);b.parent.insertBefore(b.sectionPrev,b.sectionCommon,h);b.parent.insertBefore(b.section,b.sectionCommon,h);b.parent.remove(b.sectionCommon,h);b.parent.sync(h);a.restoreSelection();d.verifyElement(b.parent);c=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});d.getHistory(b.parent).removeNext()}a.setSuspendEvent(false);return c}},0,0,0,0,0,0,[FBEditor.editor.command.section,"RightCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractCellCommand",FBEditor.editor.command.AbstractCommand,{joinCells:function(h,i,g){var f=this,c={},a={},b,d,e;b=h.getManager();d=i.rb[0]-i.lt[0]+1;e=i.rb[1]-i.lt[1]+1;h.each(function(j,k){j.each(function(o,m){var n=o.nodes[g],l;if(m===i.lt[0]&&k===i.lt[1]){a.joinTd=n;c.joinTd=o;c.joinTd._sizeSelection=i;o.setColSpan(d);o.setRowSpan(e);a.cursor=n}else{if(m>=i.lt[0]&&m<=i.rb[0]&&k>=i.lt[1]&&k<=i.rb[1]){o.hide();l={ownerTd:o,children:[]};if(!o.isEmpty()){a.first=n.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){l.children.push(c.first);c.joinTd.add(c.first);a.joinTd.appendChild(a.first);a.first=n.firstChild;c.first=a.first?a.first.getElement():null}c.emptyP=b.createEmptyP();o.add(c.emptyP)}c.joinTd.addLinks(l)}}})});return c.joinTd},splitCell:function(d,c){var b={},a={};Ext.Array.each(d.getLinks(),function(e){b.ownerTd=e.ownerTd;a.ownerTd=b.ownerTd.nodes[c];b.ownerTd.show();Ext.Array.each(e.children,function(f){a.child=f.nodes[c];b.ownerTd.remove(b.ownerTd.first());b.ownerTd.add(f);a.ownerTd.appendChild(a.child)})});d.setColSpan();d.setRowSpan();d.removeLinks()},setCursor:function(c,a){var d=this,e=d.getData(),b;b=a.cursor.getElement().getManager();e.saveRange={startNode:b.getDeepFirst(a.cursor)};b.setCursor(e.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractCellCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractInsertColCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var j=this,d=j.getData(),i=false,c={},a={},f=FBEditor.editor.Factory,b,g;try{a.node=d.node;c.node=a.node.getElement();b=c.node.getManager();b.setSuspendEvent(true);g=d.range||b.getRange();d.range={common:g.common,start:g.start,end:g.end,parentStart:g.start.parentNode,collapsed:g.collapsed,offset:g.offset};if(!a.node.parentNode){a.parent=d.range.parentStart;c.parent=a.parent.getElement();while(c.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;c.parent=a.parent.getElement()}a.node=a.parent}d.viewportId=a.node.viewportId;c.node=a.node.getElement();while(!c.node.isCell){a.node=a.node.parentNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement()}a.table=a.parent.parentNode;c.table=a.table.getElement();c.pos=c.parent.getChildPosition(c.node);d.saveNode=[];Ext.Array.each(c.table.children,function(e){Ext.Array.each(e.children,function(n,l){var k,m;if(l===c.pos){k=f.createElement(n.xmlTag);k.createScaffold();m=k.getNode(d.viewportId);d.saveNode.push(m);j.insertCol(n,m,c,a);return false}})});c.parent.sync(d.viewportId);j.setCursor(c,a);j.verifyElement(c.parent);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return i},unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{f=d.range;j=d.viewportId;b=d.saveRange.startNode.getElement().getManager();b.setSuspendEvent(true);Ext.Array.each(d.saveNode,function(e){a.node=e;c.node=a.node.getElement();j=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.parent.remove(c.node);a.parent.removeChild(a.node)});c.parent.sync(j);d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},insertCol:function(b,d,c,a){},setCursor:function(c,a){var d=this,f=window.getSelection(),e=d.getData(),b;b=c.p.getManager();e.oldRange=f.getRangeAt(0);a.p=c.p.nodes[e.viewportId];e.saveRange={withoutSyncButtons:true,startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b.setCursor(e.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractInsertColCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractInsertRowCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var j=this,d=j.getData(),i=false,c={},a={},f=FBEditor.editor.Factory,b,g;try{a.node=d.node;c.node=a.node.getElement();b=c.node.getManager();b.setSuspendEvent(true);g=d.range||b.getRange();d.range={common:g.common,start:g.start,end:g.end,parentStart:g.start.parentNode,collapsed:g.collapsed,offset:g.offset};if(!a.node.parentNode){a.parent=d.range.parentStart;c.parent=a.parent.getElement();while(c.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;c.parent=a.parent.getElement()}a.node=a.parent}d.viewportId=a.node.viewportId;c.node=a.node.getElement();while(!c.node.isTr){a.node=a.node.parentNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement()}c.tr=f.createElement("tr");Ext.Array.each(c.node.children,function(k){var e;e=f.createElement(k.xmlTag);e.createScaffold();c.tr.add(e)});a.tr=c.tr.getNode(d.viewportId);j.insertRow(c,a);c.parent.sync(d.viewportId);j.setCursor(c,a);d.saveNode=a.tr;j.verifyElement(c.parent);i=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return i},unExecute:function(){var i=this,d=i.getData(),h=false,c={},a={},b,f,j;try{f=d.range;a.node=d.saveNode;c.node=a.node.getElement();j=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(j);d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},insertRow:function(b,a){},setCursor:function(c,a){var d=this,f=window.getSelection(),e=d.getData(),b;b=c.tr.getManager();e.oldRange=f.getRangeAt(0);c.p=c.tr.first().first();a.p=c.p.nodes[e.viewportId];e.saveRange={withoutSyncButtons:true,startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b.setCursor(e.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractInsertRowCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DelColCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var g=this,h=g.getData(),b={},f={},d,a,c;b.node=h.node;f.node=b.node.getElement();d=f.node.getManager();a=h.range||d.getRange();h.range=a;while(!f.node.isTd){b.node=b.node.parentNode;f.node=b.node.getElement();f.pos=f.node.parent.getChildPosition(f.node);b.table=b.node.parentNode.parentNode;f.table=b.table.getElement();if(!b.table.parentNode){a=d.getRange();h.range=a;b.node=h.range.start;f.node=b.node.getElement();h.node=b.node}}if(f.node.parent.children.length===1){h.el=f.table;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments)}else{try{d.setSuspendEvent(true);h.viewportId=a.start.viewportId;b.next=b.node.nextSibling;b.prev=b.node.previousSibling;h.saveNode=[];console.log("del col",h,a);Ext.Array.each(f.table.children,function(e){f.tr=e;b.tr=f.tr.nodes[h.viewportId];f.td=f.tr.children[f.pos];b.td=f.td.nodes[h.viewportId];h.saveNode.push(b.td);f.tr.remove(f.td);b.tr.removeChild(b.td)});f.table.sync(h.viewportId);b.cursor=b.next;b.cursor=b.cursor?b.cursor:b.prev;b.cursor=b.cursor?b.cursor:b.table;h.saveRange={startNode:d.getDeepFirst(b.cursor)};d.setCursor(h.saveRange);h.els=f;h.range=a;g.verifyElement(f.node);c=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});g.getHistory(f.parent).removeNext()}}d.setSuspendEvent(false);return c},unExecute:function(){var g=this,h=g.getData(),b={},f={},d=false,c,a;if(h.el){d=FBEditor.editor.command.DeleteCommand.prototype.unExecute.apply(this,arguments)}else{try{a=h.range;f=h.els;c=f.table.getManager();c.setSuspendEvent(true);console.log("undo del col",b,f,a);Ext.Array.each(f.table.children,function(e){f.tr=e;b.tr=f.tr.nodes[h.viewportId];b.undoTd=h.saveNode.shift();f.undoTd=b.undoTd.getElement();if(f.tr.children[f.pos]){f.td=f.tr.children[f.pos];b.td=f.td.nodes[h.viewportId];f.tr.insertBefore(f.undoTd,f.td);b.tr.insertBefore(b.undoTd,b.td)}else{f.tr.add(f.undoTd);b.tr.appendChild(b.undoTd)}});f.table.sync(h.viewportId);h.saveRange={startNode:a.start,startOffset:a.offset.start,focusElement:f.node};c.setCursor(h.saveRange);d=true}catch(i){Ext.log({level:"warn",msg:i,dump:i});g.getHistory(f.parent).remove()}}c.setSuspendEvent(false);return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DelColCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DelRowCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var f=this,g=f.getData(),b={},e={},d,a,c;b.node=g.node;e.node=b.node.getElement();d=e.node.getManager();a=g.range||d.getRange();g.range=a;while(!e.node.isTr){b.node=b.node.parentNode;e.node=b.node.getElement();if(!b.node.parentNode.parentNode){a=d.getRange();g.range=a;b.node=g.range.start;e.node=b.node.getElement();g.node=b.node}}b.table=b.node.parentNode;e.table=b.table.getElement();g.el=e.table.children.length===1?e.table:e.node;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments);d.setSuspendEvent(false);return c}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DelRowCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DeleteCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var f=this,g=f.getData(),b={},e={},d,a,c;b.node=g.node;e.node=b.node.getElement();d=e.node.getManager();a=g.range||d.getRange();g.range=a;while(!e.node.isTable){b.node=b.node.parentNode;e.node=b.node.getElement();if(!b.node.parentNode.parentNode){a=d.getRange();g.range=a;b.node=g.range.start;e.node=b.node.getElement();g.node=b.node}}g.el=e.node;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments);d.setSuspendEvent(false);return c}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DeleteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertColNextCommand",FBEditor.editor.command.table.AbstractInsertColCommand,{insertCol:function(b,i,c,a){var d=this,f=d.getData(),g={},h={};g.td=b;h.td=g.td.nodes[f.viewportId];h.newTd=i;g.newTd=h.newTd.getElement();h.tr=h.td.parentNode;g.tr=h.tr.getElement();h.next=h.td.nextSibling;if(h.next){g.next=h.next.getElement();g.tr.insertBefore(g.newTd,g.next);h.tr.insertBefore(h.newTd,h.next)}else{g.tr.add(g.newTd);h.tr.appendChild(h.newTd)}c.p=c.table.first().children[c.pos+1].first()}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertColNextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertColPrevCommand",FBEditor.editor.command.table.AbstractInsertColCommand,{insertCol:function(b,i,c,a){var d=this,f=d.getData(),g={},h={};g.td=b;h.td=g.td.nodes[f.viewportId];h.newTd=i;g.newTd=h.newTd.getElement();h.tr=h.td.parentNode;g.tr=h.tr.getElement();g.tr.insertBefore(g.newTd,g.td);h.tr.insertBefore(h.newTd,h.td);c.p=c.table.first().children[c.pos].first()}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertColPrevCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertRowNextCommand",FBEditor.editor.command.table.AbstractInsertRowCommand,{insertRow:function(b,a){a.next=a.node.nextSibling;if(a.next){b.next=a.next.getElement();b.parent.insertBefore(b.tr,b.next);a.parent.insertBefore(a.tr,a.next)}else{b.parent.add(b.tr);a.parent.appendChild(a.tr)}}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertRowNextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertRowPrevCommand",FBEditor.editor.command.table.AbstractInsertRowCommand,{insertRow:function(b,a){b.parent.insertBefore(b.tr,b.node);a.parent.insertBefore(a.tr,a.node)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertRowPrevCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.JoinCellsCommand",FBEditor.editor.command.table.AbstractCellCommand,{execute:function(){var i=this,f=i.getData(),h=false,d={},a={},b,c,j,k;try{j=f.opts.viewportId;k=f.opts.size;d.table=f.opts.table;b=d.table.getNodeHelper();a.table=b.getNode(j);console.log("join cells",f);c=d.table.getManager();c.setSuspendEvent(true);b.clearSelectNodes();d.joinTd=i.joinCells(d.table,k,j);d.table.sync(j);b=d.joinTd.getNodeHelper();a.cursor=b.getNode(j);i.setCursor(d,a);f.nodes=a;f.els=d;i.verifyElement(d.table);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});i.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return h},unExecute:function(){var f=this,g=f.getData(),d=false,c={},a={},b,i;try{i=g.opts.viewportId;c=g.els;console.log("undo join cells",g);b=c.table.getManager();b.setSuspendEvent(true);f.splitCell(c.joinTd,i);c.table.sync(i);a.cursor=c.joinTd.nodes[i];f.setCursor(c,a);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});f.getHistory(c.parent).remove()}b.setSuspendEvent(false);return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"JoinCellsCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.SplitCellsCommand",FBEditor.editor.command.table.AbstractCellCommand,{execute:function(){var f=this,g=f.getData(),d=false,c={},a={},b,i;try{i=g.opts.viewportId;c.td=g.opts.td;c.table=c.td.getParentName("table");b=c.table.getManager();b.setSuspendEvent(true);f.splitCell(c.td,i);c.table.sync(i);a.cursor=c.td.nodes[i];f.setCursor(c,a);g.nodes=a;g.els=c;f.verifyElement(c.table);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});f.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return d},unExecute:function(){var f=this,g=f.getData(),d=false,c={},a={},b,i;try{i=g.opts.viewportId;a=g.nodes;c=g.els;b=c.table.getManager();b.setSuspendEvent(true);c.joinTd=f.joinCells(c.table,c.td._sizeSelection,i);c.table.sync(i);a.cursor=c.joinTd.nodes[i];f.setCursor(c,a);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});f.getHistory(c.parent).remove()}b.setSuspendEvent(false);return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"SplitCellsCommand"],0));(Ext.cmd.derive("FBEditor.editor.view.EditorController",Ext.app.ViewController,{onLoadData:function(){var e=this,b=e.getView(),a=b.getViewport(),c=b.getManager(),d,f;f=a.id;d=c.getNode(f);a.loadData(d)}},0,0,0,0,["controller.view.editor"],0,[FBEditor.editor.view,"EditorController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.ToolbarController",Ext.app.ViewController,{onSyncButtons:function(){var e=this,a=e.getView(),d=a.getSyncButtons(),c=a.getEditor(),b=c.getManager();if(d){Ext.Array.each(d,function(g){var f;if(g){if(Ext.isObject(g)&&g.sequence){if(!b.availableSyncButtons()){Ext.each(g.sequence,function(h){f=Ext.ComponentQuery.query(h)[0];f&&f.fireEvent("sync")})}else{f=Ext.ComponentQuery.query(g.sequence[0])[0];f&&f.setSequence(g.sequence.slice(1));f&&f.fireEvent("sync")}}else{f=Ext.ComponentQuery.query(g)[0];f&&f.fireEvent("sync")}}})}},onSyncHiddenButtons:function(c){var b=this,a=b.getView();c=c||a.getHiddenButtons();if(c){Ext.Array.each(c,function(d){d.fireEvent("sync")})}},onDisableButtons:function(){var c=this,a=c.getView(),b=a.getSyncButtons();if(b){Ext.Array.each(b,function(e){var d;if(e){if(Ext.isObject(e)&&e.sequence){Ext.Array.each(e.sequence,function(f){d=Ext.ComponentQuery.query(f)[0];d&&d.disable()})}else{d=Ext.ComponentQuery.query(e)[0];d&&d.disable()}}})}}},0,0,0,0,["controller.editor.toolbar"],0,[FBEditor.editor.view.toolbar,"ToolbarController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.ButtonController",Ext.app.ViewController,{onClick:function(c,f){var d=this,b=d.getView(),a=b.getEditorManager();if(f){f.stopPropagation()}a.createElement(b.elementName,b.createOpts)},onSync:function(){var b=this,a=b.getView();if(!a.isActiveSelection()){b.verifyResult(false)}else{b.verifyResult(true)}},verify:function(b,a){var f=this,e=f.getView(),d=e.getEditorManager(),g=d.getSchema(),c={};c.debug=a;g.validXml({xml:b,callback:f.verifyResult,scope:f,scopeData:c})},getContentXml:function(){var e=this,c=e.getView(),b=c.getEditorManager(),d,a;d=b.getContent();a=d.getXml(true,true);return a},verifyResult:function(a,c){var d=this,b=d.getView(),e;if(!b){return}e=b.getSequence();if(a){b.enable()}else{b.disable()}if(e){Ext.Array.each(e,function(f){if(a){f.enable()}else{f.disable()}})}b.fireEvent("afterVerifyResult",b,a)}},0,0,0,0,["controller.editor.toolbar.button"],0,[FBEditor.editor.view.toolbar.button,"ButtonController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.AbstractButton",Ext.button.Button,{controller:"editor.toolbar.button",listeners:{click:"onClick",sync:"onSync"},disabled:true,tooltipType:"title",elementName:"",tooltipText:"",numberSlot:null,createOpts:null,toolbar:null,sequence:null,afterRender:function(){var a=this;a.initHotkey();Ext.button.Button.prototype.afterRender.apply(this,arguments)},setSequence:function(a){var b=this,c=[];Ext.each(a,function(e){var d;d=Ext.ComponentQuery.query(e)[0];c.push(d)});b.sequence=c},getSequence:function(){return this.sequence},setToolbar:function(a){this.toolbar=a},getToolbar:function(){var b=this,a;a=b.toolbar||b.up("editor-toolbar");b.toolbar=a;return a},getEditor:function(){var b=this,a=b.getToolbar();return a.getEditor()},getEditorManager:function(){return FBEditor.getEditorManager()},isActiveSelection:function(){return false},getNumberSlot:function(){return this.numberSlot},initHotkey:function(){var d=this,c=d.getToolbar(),h=d.getXType(),b=FBEditor.hotkeys.Manager,a,f,g,e;f=c.getHotkeys();Ext.each(f,function(i){if(i.xtype===h){a=i.numberSlot;d.numberSlot=a;return false}});if(a){g=b.getSlot(a);e=g.getData()}d.updateTooltip(e)},updateTooltip:function(d){var b=this,c=b.tooltipText,a=FBEditor.hotkeys.Manager,e;if(d){e=a.getFormatKeysText(d);c+=e?" ("+e+")":""}b.setTooltip(c)}},0,["editor-toolbar-button"],["component","box","button","editor-toolbar-button"],{component:true,box:true,button:true,"editor-toolbar-button":true},["widget.editor-toolbar-button"],0,[FBEditor.editor.view.toolbar.button,"AbstractButton"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.ToggleButtonController",FBEditor.editor.view.toolbar.button.ButtonController,{onClick:function(d,h){var g=this,c=g.getView(),b=c.getEditorManager(),a,f;if(h){h.stopPropagation()}a=c.elementName;f=c.createOpts;if(!c.pressed){b.deleteWrapper(a)}else{b.createElement(a,f)}},onSync:function(){var f=this,e=f.getView(),d=e.getEditorManager(),b,h,a,c,g;b=d.getRange();if(!b){f.verifyResult(false);return}h=b.start.getElement?b.start.getElement():d.getFocusElement();a=b.end.getElement?b.end.getElement():h;c=e.elementName;g=(h.hisName(c)||h.hasParentName(c))&&(a.hisName(c)||a.hasParentName(c));e.toggle(g);f.verifyResult(true);if(!g){if(!e.isActiveSelection()){f.verifyResult(false)}else{f.verifyResult(true)}}}},0,0,0,0,["controller.editor.toolbar.button.togglebutton"],0,[FBEditor.editor.view.toolbar.button,"ToggleButtonController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.AbstractToggleButton",FBEditor.editor.view.toolbar.button.AbstractButton,{controller:"editor.toolbar.button.togglebutton",enableToggle:true},0,0,["component","box","button","editor-toolbar-button"],{component:true,box:true,button:true,"editor-toolbar-button":true},0,0,[FBEditor.editor.view.toolbar.button,"AbstractToggleButton"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.AbstractStyleButton",FBEditor.editor.view.toolbar.button.AbstractToggleButton,{isActiveSelection:function(){var d=this,c=d.getEditorManager(),b,a;a=c.getRange();b=!a.collapsed;return b}},0,0,["component","box","button","editor-toolbar-button"],{component:true,box:true,button:true,"editor-toolbar-button":true},0,0,[FBEditor.editor.view.toolbar.button,"AbstractStyleButton"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.a.AController",FBEditor.editor.view.toolbar.button.ToggleButtonController,{onClick:function(){var d=this,b=d.getView(),c=b.createOpts||{},a,e;if(b.pressed){e=b.translateText.enterAddress;a=window.prompt(e,"http://");if(!a){b.toggle();return}c.attributes=c.attributes||{};c.attributes.href=a;b.createOpts=c}FBEditor.editor.view.toolbar.button.ToggleButtonController.prototype.onClick.apply(this,arguments)}},0,0,0,0,["controller.editor.toolbar.button.a"],0,[FBEditor.editor.view.toolbar.button.a,"AController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.a.A",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{controller:"editor.toolbar.button.a",html:'<i class="fa fa-link"></i>',elementName:"a",tooltipText:"Ссылка",translateText:{enterAddress:"Пожалуйста, введите адрес"}},0,["editor-toolbar-button-a"],["component","box","button","editor-toolbar-button","editor-toolbar-button-a"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-a":true},["widget.editor-toolbar-button-a"],0,[FBEditor.editor.view.toolbar.button.a,"A"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.em.Em",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{html:'<i class="fa fa-italic"></i>',elementName:"em",tooltipText:"Курсив",numberSlot:20},0,["editor-toolbar-button-em"],["component","box","button","editor-toolbar-button","editor-toolbar-button-em"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-em":true},["widget.editor-toolbar-button-em"],0,[FBEditor.editor.view.toolbar.button.em,"Em"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.strong.Strong",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{html:'<i class="fa fa-bold"></i>',elementName:"strong",tooltipText:"Полужирный"},0,["editor-toolbar-button-strong"],["component","box","button","editor-toolbar-button","editor-toolbar-button-strong"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-strong":true},["widget.editor-toolbar-button-strong"],0,[FBEditor.editor.view.toolbar.button.strong,"Strong"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.unstyle.UnstyleController",FBEditor.editor.view.toolbar.button.ButtonController,{onClick:function(c,h){var d=this,b=d.getView(),a=b.getEditorManager(),f,g;if(h){h.stopPropagation()}f=Ext.create("FBEditor.editor.command.UnstyleCommand",{manager:a});if(f.execute()){g=a.getHistory();g.add(f)}}},0,0,0,0,["controller.editor.toolbar.button.unstyle"],0,[FBEditor.editor.view.toolbar.button.unstyle,"UnstyleController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.unstyle.Unstyle",FBEditor.editor.view.toolbar.button.AbstractButton,{controller:"editor.toolbar.button.unstyle",html:'<i class="fa fa-eraser"></i>',tooltipText:"Убрать форматирование",isActiveSelection:function(){var h=this,e=h.getEditorManager(),d=false,b=window.getSelection(),a={},f={},g,c;function i(l){var j=false,k=l.getElement();k.each(function(m){if(m.isStyleType){j=true;return false}});return j}g=b.rangeCount?b.getRangeAt(0):null;if(!g||!g.commonAncestorContainer.getElement){return false}f.common=g.commonAncestorContainer.getElement();f.first=g.startContainer.getElement();f.firstP=f.first.getStyleHolder();if(!f.firstP){return false}f.last=g.endContainer.getElement();f.lastP=f.last.getStyleHolder();a.pp=[];if(!f.firstP.equal(f.lastP)){a.pp=e.getNodesPP(g.startContainer,a,f);c=f.lastP.getNodeHelper();a.lastP=c.getNode();a.pp.push(a.lastP)}c=f.firstP.getNodeHelper();a.firstP=c.getNode();a.pp.unshift(a.firstP);Ext.each(a.pp,function(j){if(i(j)){d=true;return false}});return d}},0,["editor-toolbar-button-unstyle"],["component","box","button","editor-toolbar-button","editor-toolbar-button-unstyle"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-unstyle":true},["widget.editor-toolbar-button-unstyle"],0,[FBEditor.editor.view.toolbar.button.unstyle,"Unstyle"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.Toolbar",Ext.Toolbar,{controller:"editor.toolbar",listeners:{syncButtons:"onSyncButtons",disableButtons:"onDisableButtons"},hidden:true,defaultShow:false,syncButtons:null,hotkeys:null,editor:null,toolstab:null,afterRender:function(){var b=this,a=FBEditor.hotkeys.Manager;Ext.toolbar.Toolbar.prototype.afterRender.apply(this,arguments);b.createSyncButtons();b.linkHotkeys();a.on({changed:b.updateHotkeys,scope:b})},createSyncButtons:function(){var a=this;a.syncButtons=["editor-toolbar-button-a","editor-toolbar-button-em","editor-toolbar-button-strong","editor-toolbar-button-unstyle"]},linkHotkeys:function(){var a=this;a.hotkeys=[{xtype:"editor-toolbar-button-a",numberSlot:17},{xtype:"editor-toolbar-button-em",numberSlot:20},{xtype:"editor-toolbar-button-strong",numberSlot:19},{xtype:"editor-toolbar-button-unstyle",numberSlot:27}]},addSyncButton:function(a){this.syncButtons.push(a)},isActive:function(){var a=this,b=a.getToolstab(),c;c=b.isActiveToolbar(a);return c},setActive:function(){var a=this,b=a.getToolstab(),c;c=b.setActiveToolbar(a);return c},setEditor:function(a){this.editor=a},getEditor:function(){return this.editor},getHotkeys:function(){return this.hotkeys},getButton:function(a){var c=this,b,d;d="editor-toolbar-button-"+a;b=Ext.ComponentQuery.query(d)[0];return b},getButtonForSlot:function(a){var c=this,b,d;d="editor-toolbar-button[numberSlot="+a+"]";b=c.down(d);return b},callClickButton:function(a){var d=this,b=d.getButtonForSlot(a);function e(f){if(!f.disabled){if(f.enableToggle){f.toggle()}f.fireEvent("click")}}function c(f){f.removeListener("afterVerifyResult",c);e(f);f.destroy()}if(b){e(b)}else{b=d.createTempButton(a);b.on("afterVerifyResult",c);b.fireEvent("sync")}},createTempButton:function(a){var c=this,d=c.getHotkeys(),b=null,e;Ext.each(d,function(f){if(f.numberSlot===a){e=f.xtype;return false}});if(e){b=Ext.widget(e);b.setToolbar(c)}return b},getSyncButtons:function(){return this.syncButtons},setDefaultShow:function(a){this.defaultShow=a},isDefaultShow:function(){return this.defaultShow},getToolstab:function(){var a=this,b;b=a.toolstab||Ext.getCmp("panel-toolstab-main");a.toolstab=b;return b},updateHotkeys:function(d){var c=this,a,b;a=d.slot;b=c.getButtonForSlot(a);if(b){b.updateTooltip(d)}}},0,["editor-toolbar"],["component","box","container","toolbar","editor-toolbar"],{component:true,box:true,container:true,toolbar:true,"editor-toolbar":true},["widget.editor-toolbar"],0,[FBEditor.editor.view.toolbar,"Toolbar"],0));(Ext.cmd.derive("FBEditor.editor.view.viewport.ViewportController",Ext.app.ViewController,{},0,0,0,0,["controller.editor.viewport"],0,[FBEditor.editor.view.viewport,"ViewportController"],0));(Ext.cmd.derive("FBEditor.editor.view.viewport.Viewport",Ext.container.Container,{controller:"editor.viewport",cls:"editor-viewport",layout:"fit",editor:null,unprintSymbolsBtn:null,modeCls:"mode-unprintsymbols",afterRender:function(){var b=this,a;Ext.container.Container.prototype.afterRender.apply(this,b);b.createRoot();a=b.getUnprintedSymbolsBtn();if(a.isPressed()){b.showUnprintedSymbols(true)}},createRoot:function(){var e=this,d=e.getEditor(),c,a,b;c=d.getManager();a=c.getContent();if(!a){d.createRootElement()}b=c.getNode(e.id);e.loadData(b)},loadData:function(c){var b=this,d,a;d=b.getEl().dom;a=b.getContent();if(a){d.replaceChild(c,a)}else{d.appendChild(c)}},getContent:function(){return this.getEl().dom.firstChild},getEditor:function(){var b=this,a;a=b.editor||b.up("base-editor");b.editor=a;return a},getUnprintedSymbolsBtn:function(){var b=this,a;a=b.unprintSymbolsBtn||Ext.getCmp("panel-toolstab-tools-button-unprintsymbols");b.unprintSymbolsBtn=a;return a},showUnprintedSymbols:function(a){var e=this,f=e.modeCls,d=e.getEl(),c=e.getEditor(),b=c.getManager();if(d){b.setUnprintedSymbols(a);if(a){d.addCls(f)}else{d.removeCls(f)}}}},0,["editor-viewport"],["component","box","container","editor-viewport"],{component:true,box:true,container:true,"editor-viewport":true},["widget.editor-viewport"],0,[FBEditor.editor.view.viewport,"Viewport"],0));(Ext.cmd.derive("FBEditor.editor.view.Editor",Ext.panel.Panel,{controller:"view.editor",layout:"fit",listeners:{loadData:"onLoadData"},rootElementName:"root",viewport:null,toolbars:null,manager:null,defaultShowToolbar:false,afterRender:function(){var a=this;a.createManager();a.initEditor();a.addToolbars();Ext.panel.Panel.prototype.afterRender.apply(this,a)},createManager:function(){var a=this;a.manager=a.manager||Ext.create("FBEditor.editor.Manager",a)},initEditor:function(){var b=this,a;a=Ext.widget({xtype:"editor-viewport"});b.viewport=a;b.add(a)},addToolbars:function(){var c=this,b,a;b=c.createToolbar();b.setDefaultShow(c.defaultShowToolbar);c.setToolbar(b);a=Ext.getCmp("panel-toolstab-main");a.addToolbar(b)},createToolbar:function(){return Ext.create("FBEditor.editor.view.toolbar.Toolbar")},createRootElement:function(){var c=this,b=c.getManager(),a;a=b.createRootElement(c.rootElementName);a.setEditor(c)},getValue:function(){var d=this,c=d.getManager(),a,b;a=c.getContent();b=a.getXml(false,true);b=b.replace(/^<.*?>(.*)<\/.*?>$/g,"$1");b=b.replace(/^<p>[&#160; ]?<\/p>$/,"");b=b.replace(/^<p\/>$/,"");return b},getViewport:function(){var b=this,a;a=b.viewport||b.down("editor-viewport");b.viewport=a;return a},setToolbar:function(c){var b=this,a=c;b.toolbars=b.toolbars||[];b.toolbars.push(a);a.setEditor(b)},getToolbars:function(){return this.toolbars},getToolbar:function(){var b=this,c=b.toolbars,a;a=c.length?c[0]:null;return a},getManager:function(){var a=this;if(!a.manager){a.createManager()}return a.manager},getHistory:function(){var b=this,a=b.getManager();return a.getHistory()},syncButtons:function(){var a=this,b;b=a.getToolbars();Ext.each(b,function(c){c.fireEvent("syncButtons")})}},0,["base-editor"],["component","box","container","panel","base-editor"],{component:true,box:true,container:true,panel:true,"base-editor":true},["widget.base-editor"],0,[FBEditor.editor.view,"Editor"],0));(Ext.cmd.derive("FBEditor.model.resource.Resource",Ext.data.Model,{fields:[{name:"url",type:"string"},{name:"name",type:"string"},{name:"baseName",type:"string"},{name:"extension",type:"string"},{name:"date",type:"string"},{name:"size",type:"string"},{name:"type",type:"string"}]},0,0,0,0,0,0,[FBEditor.model.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.store.resource.Navigation",Ext.data.TreeStore,{defaultRootText:"Ресурсы",rootVisible:false,proxy:{type:"memory"},filters:[],root:{icon:" ",cls:"treenavigation-root treenavigation-root-resource"}},0,0,0,0,0,0,[FBEditor.store.resource,"Navigation"],0));(Ext.cmd.derive("FBEditor.store.resource.Resource",Ext.data.Store,{model:"FBEditor.model.resource.Resource"},0,0,0,0,0,0,[FBEditor.store.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.ux.FieldCleaner",Ext.plugin.Abstract,{pluginId:"fieldCleaner",style:"",toLowerCase:false,capitalize:false,btn:null,field:null,translateText:{cleaning:"Уборка"},constructor:function(a){var b=this;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(b){var a=this;a.field=b;b.on({scope:a,afterrender:a.afterRenderField})},handler:function(){var a=this,b=a.field;b.fireEvent("beforeFieldCleaner");a.convertVal();b.fireEvent("afterFieldCleaner")},convertVal:function(){var d=this,e=d.field,f=e.getValue(),a=FBEditor.desc.Manager,b=a.getRegexpUtf();function c(j,g,i,h){j=g?g:"";j+=Ext.String.capitalize(i)+h;j+=h==="</p>"?"":" ";return j}if(f){f=d.toLowerCase?f.toLowerCase():f;f=f.replace(b,"");f=d.capitalize?f.replace(/(<p>)? *(.+?)([.!?]+|<\/p>|$)/ig,c):f;f=f.trim();e.setValue(f)}},afterRenderField:function(){var b=this,c=b.field,a;a=Ext.dom.Element.create({tag:"i","class":"plugin-fieldCleaner fa fa-paint-brush x-btn x-btn-plain-toolbar-small",style:b.style,title:b.translateText.cleaning});b.btn=a;a.insertAfter(c.inputEl);a.addClsOnClick("x-btn-pressed");a.addClsOnOver("x-btn-over");a.on({scope:b,click:b.handler})}},1,0,0,0,["plugin.fieldCleaner"],0,[FBEditor.ux,"FieldCleaner"],0));(Ext.cmd.derive("FBEditor.ux.FieldContainerReplicator",Ext.plugin.Abstract,{pluginId:"fieldcontainerreplicator",groupName:"fieldcontainerreplicator",btnPos:"end",btnStyle:null,btnSize:null,btnCls:"",putStyle:{marginLeft:"20px"},enableBtnPut:false,btnAddCfg:null,btnRemoveCfg:null,btnPutCfg:null,alwaysInsertFirst:false,translateText:{add:"Добавить",remove:"Удалить",put:"Вложить"},constructor:function(a){var b=this;b.btnAddCfg={html:'<i class="fa fa-plus" title="'+b.translateText.add+'"></i>',cls:"btn-plus"};b.btnRemoveCfg={html:'<i class="fa fa-minus" title="'+b.translateText.remove+'"></i>',cls:"btn-minus"};b.btnPutCfg={html:'<i class="fa fa-level-up fa-rotate-90" title="'+b.translateText.put+'"></i>',cls:"btn-put"};b.groupName=a.groupName||b.groupName;b.btnPos=a.btnPos||b.btnPos;b.btnAddCfg=a.btnAddCfg?Ext.apply(b.btnAddCfg,a.btnAddCfg):b.btnAddCfg;b.btnRemoveCfg=a.btnRemoveCfg?Ext.apply(b.btnRemoveCfg,a.btnRemoveCfg):b.btnRemoveCfg;b.btnStyle=a.btnStyle?Ext.apply(b.btnStyle,a.btnStyle):b.btnStyle;b.btnSize=a.btnSize?Ext.apply(b.btnSize,a.btnSize):b.btnSize;b.putStyle=a.putStyle?Ext.apply(b.putStyle,a.putStyle):b.putStyle;b.enableBtnPut=a.enableBtnPut||b.enableBtnPut;b.btnPutCfg=a.btnPutCfg?Ext.apply(b.btnPutCfg,a.btnPutCfg):b.btnPutCfg;b.btnCls=a.btnCls||b.btnCls;b.alwaysInsertFirst=a.alwaysInsertFirst||b.alwaysInsertFirst;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(g){var e=this,b=g,a=e.btnPos,h=e.groupName,d=e.getButtons(),c=e.enableBtnPut,f;b.on("added",function(i){e.checkLastInGroup(i.ownerCt,i.replicatorId)});b.replicatorId=b.replicatorId||h+"-"+Ext.id();f=c?b.items.last():b;switch(a){case"begin":f.insert(0,d);break;case"end":f.add(d);break}},getBtnAdd:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-add-"+a.groupName+"]")[0]},getBtnRemove:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-remove-"+a.groupName+"]")[0]},getBtnPut:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-put-"+a.groupName+"]")[0]},setSizeButtons:function(f){var e=this,a=e.btnSize,d,b,c;c=[e.getBtnAdd(),e.getBtnRemove(),e.getBtnPut()];Ext.Array.each(c,function(g){if(g&&a&&a.bigWidth){d=f?a.bigWidth:a.smallWidth;b=f?a.bigHeight:a.smallHeight;g.setSize(d,b)}})},addFields:function(b){var g=this,c=g.enableBtnPut,a,j,h,d,f,e,i;b=b||g.getBtnAdd();if(b){j=b.prev();j.enable();a=c?b.ownerCt.ownerCt.ownerCt:b.ownerCt.ownerCt;h=a.replicatorId;d=a.ownerCt;f=a.cloneConfig({replicatorId:h});i=d.items.indexOf(a);if(g.alwaysInsertFirst){i=0;d.insert(i,f)}else{i=i+1;d.add(i,f)}f.fireEvent("addFields");e=d.items.getAt(i).down("field:focusable");if(e){e.focus()}g.checkLastInGroup(d,h)}},putFields:function(c){var d=this,f=d.putStyle,a,b,e,g;c=c||d.getBtnPut();a=c.ownerCt.ownerCt.ownerCt;e=a.replicatorId+"-child";g=a.cloneConfig({replicatorId:e,style:f});g.on("afterrender",function(){this.down("field:focusable").focus()});b=g.down("[name=fieldcontainerreplicator-btn-remove-"+d.groupName+"]");b.on("afterrender",function(){this.enable()});a.add(g);g.fireEvent("putFields",c);return g},removeFields:function(c){var e=this,b=e.enableBtnPut,a,d,f;c=c||e.getBtnRemove();a=b?c.ownerCt.ownerCt.ownerCt:c.ownerCt.ownerCt;d=a.ownerCt;f=a.replicatorId;d.remove(a);d.fireEvent("removeFields",c);if(!/child/.test(f)){e.checkLastInGroup(d,f)}},getButtons:function(){var h=this,i=h.btnStyle,a=h.btnAddCfg,b=h.btnRemoveCfg,c=h.enableBtnPut,j=h.btnPutCfg,d=h.btnCls,f=h.btnSize,g,e=[];j=Ext.apply(j,{handler:h.putFields,scope:h,name:"fieldcontainerreplicator-btn-put-"+h.groupName});a=Ext.apply(a,{handler:h.addFields,scope:h,name:"fieldcontainerreplicator-btn-add-"+h.groupName});b=Ext.apply(b,{handler:h.removeFields,scope:h,name:"fieldcontainerreplicator-btn-remove-"+h.groupName});e.push(b);e.push(a);if(c){e.push(j)}if(f){Ext.Array.each(e,function(k){k.width=f.bigWidth;k.height=f.bigHeight})}g=[{xtype:"fieldcontainer",cls:"plugin-fieldcontainerreplicator "+d,hideLabel:true,flex:0,height:"100%",listeners:{afterrender:function(){h.getCmp().fireEvent("afterRenderPlugin")}},defaults:{xtype:"button",tabIndex:-1,style:i},items:e}];return g},checkLastInGroup:function(b,e){var c=this,f,d,a;f=b.query("[replicatorId="+e+"]");if(f.length){d=f.length===1;a=f[f.length-1].query("[name=fieldcontainerreplicator-btn-remove-"+c.groupName+"]")[0];if(d){a.disable()}else{a.enable()}}return d}},1,0,0,0,["plugin.fieldcontainerreplicator"],0,[FBEditor.ux,"FieldContainerReplicator"],0));(Ext.cmd.derive("FBEditor.ux.SearchField",Ext.plugin.Abstract,{pluginId:"searchField",style:"",loader:null,field:null,isEmpty:false,translateText:{searching:"Идет поиск...",notFound:"Ничего не найдено"},constructor:function(a){var b=this;b.style=b.style||a.style;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(b){var a=this;a.field=b;b.on({scope:a,afterrender:a.afterRenderField,blur:a.blurField})},hideLoader:function(){var b=this,a=b.loader;b.isEmpty=false;a.hide();a.replaceCls("fa-check","fa-spinner fa-pulse");a.dom.setAttribute("title",b.translateText.searching)},showLoader:function(){var b=this,a=b.loader;a.show()},emptyLoader:function(){var b=this,a=b.loader;b.isEmpty=true;a.replaceCls("fa-spinner fa-pulse","fa-check");a.dom.setAttribute("title",b.translateText.notFound)},blurField:function(){var a=this;if(a.isEmpty){a.hideLoader()}},afterRenderField:function(){var b=this,c=b.field,a;a=Ext.dom.Element.create({tag:"i","class":"plugin-searchField-loader fa fa-spinner fa-pulse fa-lg",style:b.style});a.insertAfter(c.inputEl);b.loader=a;b.hideLoader()}},1,0,0,0,["plugin.searchField"],0,[FBEditor.ux,"SearchField"],0));(Ext.cmd.derive("FBEditor.view.button.AbstractFileButton",Ext.form.field.FileButton,{afterTpl:'<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" type="file" size="1" name="{inputName}" role="{role}" <tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl> ',accept:"",initComponent:function(){var a=this;if(a.accept){a.afterTpl+='accept="'+a.accept+'" '}a.afterTpl+=">";Ext.form.field.FileButton.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this,b;Ext.form.field.FileButton.prototype.afterRender.apply(this,arguments);b=a.fileInputEl.dom;a.fileInputEl.on({change:function(c){Ext.defer(function(){b.value=null},100)}})}},0,0,["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},0,0,[FBEditor.view.button,"AbstractFileButton"],0));(Ext.cmd.derive("FBEditor.view.button.AbstractOperationResourceController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView(),d=a.cmdClass,c;c=Ext.create(d,{nameResource:a.nameResource});if(c&&c.execute()){FBEditor.HistoryCommand.add(c)}}},0,0,0,0,["controller.button.operation.resource"],0,[FBEditor.view.button,"AbstractOperationResourceController"],0));(Ext.cmd.derive("FBEditor.view.button.AbstractOperationResource",Ext.button.Button,{controller:"button.operation.resource",listeners:{click:{el:"body",fn:"onClick"}},width:"100%",cmdClass:"",nameResource:null,setResource:function(a){this.nameResource=a}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.button,"AbstractOperationResource"],0));(Ext.cmd.derive("FBEditor.view.button.CreateFolderResource",Ext.button.Button,{id:"button-createfolder-resource",text:"Создать папку",handler:function(){var a;a=Ext.create("FBEditor.command.CreateFolderResource");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,["button-createfolder-resource"],["component","box","button","button-createfolder-resource"],{component:true,box:true,button:true,"button-createfolder-resource":true},["widget.button-createfolder-resource"],0,[FBEditor.view.button,"CreateFolderResource"],0));(Ext.cmd.derive("FBEditor.view.button.DeleteResource",FBEditor.view.button.AbstractOperationResource,{id:"button-delete-resource",text:"Удалить",cmdClass:"FBEditor.command.DeleteResource"},0,["button-delete-resource"],["component","box","button","button-delete-resource"],{component:true,box:true,button:true,"button-delete-resource":true},["widget.button-delete-resource"],0,[FBEditor.view.button,"DeleteResource"],0));(Ext.cmd.derive("FBEditor.view.button.MoveResource",FBEditor.view.button.AbstractOperationResource,{id:"button-move-resource",text:"Переместить",cmdClass:"FBEditor.command.MoveResource"},0,["button-move-resource"],["component","box","button","button-move-resource"],{component:true,box:true,button:true,"button-move-resource":true},["widget.button-move-resource"],0,[FBEditor.view.button,"MoveResource"],0));(Ext.cmd.derive("FBEditor.view.button.SaveResource",FBEditor.view.button.AbstractOperationResource,{id:"button-save-resource",text:"Сохранить как...",cmdClass:"FBEditor.command.SaveResource"},0,["button-save-resource"],["component","box","button","button-save-resource"],{component:true,box:true,button:true,"button-save-resource":true},["widget.button-save-resource"],0,[FBEditor.view.button,"SaveResource"],0));(Ext.cmd.derive("FBEditor.view.button.SelectCover",Ext.button.Button,{id:"button-select-cover",text:"Выбрать",handler:function(){var b,a={},c=FBEditor.getBridgeWindow();a.win=c.FBEditor.resource.ExplorerManager.getWindow();b=c.Ext.create("FBEditor.command.SelectCover",a);if(b.execute()){c.FBEditor.HistoryCommand.add(b)}}},0,["button-select-cover"],["component","box","button","button-select-cover"],{component:true,box:true,button:true,"button-select-cover":true},["widget.button-select-cover"],0,[FBEditor.view.button,"SelectCover"],0));(Ext.cmd.derive("FBEditor.view.button.editor.ConvertElement",Ext.button.Button,{id:"button-editor-convert-element",text:"Превратить в текст",element:null,handler:function(){var b=this,f=FBEditor.getBridgeWindow(),d={},a=b.element,e,c;d.el=a;c=f.Ext.create("FBEditor.editor.command.ConvertToTextCommand",d);if(c.execute()){e=a.getHistory();e.add(c)}},verify:function(){var f=this,e={},b={},d=FBEditor.getEditorManager(),g=d.getSchema(),h,a,c;a=d.getRange();if(!a){return false}h=a.start.viewportId;e.node=f.element;b.node=e.node.nodes[h];e.parent=e.node.parent;b.parent=e.parent.nodes[h];e.nameEl=e.parent.getName();e.pos=e.parent.getChildPosition(e.node);e.namesElements=d.getNamesElements(e.parent);e.namesElements.splice(e.pos,1,"p");c=g.verify(e.nameEl,e.namesElements);c=!c&&!e.node.isEmpty()?g.verify(e.node.getName(),["p"]):c;return c}},0,["button-editor-convert-element"],["component","box","button","button-editor-convert-element"],{component:true,box:true,button:true,"button-editor-convert-element":true},["widget.button-editor-convert-element"],0,[FBEditor.view.button.editor,"ConvertElement"],0));(Ext.cmd.derive("FBEditor.view.button.editor.DeleteElement",Ext.button.Button,{id:"button-editor-delete-element",text:"Удалить",element:null,handler:function(){var b=this,f=FBEditor.getBridgeWindow(),d={},a=b.element,e,c;d.el=a;c=f.Ext.create("FBEditor.editor.command.DeleteCommand",d);if(c.execute()){e=a.getHistory();e.add(c)}}},0,["button-editor-delete-element"],["component","box","button","button-editor-delete-element"],{component:true,box:true,button:true,"button-editor-delete-element":true},["widget.button-editor-delete-element"],0,[FBEditor.view.button.editor,"DeleteElement"],0));(Ext.cmd.derive("FBEditor.view.button.editor.SelectImg",Ext.button.Button,{text:"Выбрать",scope:null,handler:function(a){var c,b={},d=FBEditor.getBridgeWindow();b.win=d.FBEditor.resource.ExplorerManager.getWindow();b.scope=a.scope;c=d.Ext.create("FBEditor.command.SelectImg",b);if(c.execute()){d.FBEditor.HistoryCommand.add(c)}}},0,["button-editor-select-img"],["component","box","button","button-editor-select-img"],{component:true,box:true,button:true,"button-editor-select-img":true},["widget.button-editor-select-img"],0,[FBEditor.view.button.editor,"SelectImg"],0));(Ext.cmd.derive("FBEditor.view.button.resource.AbstractLoadResourceController",Ext.app.ViewController,{onChange:function(c,b){var d=this,a=d.getView(),f,e;f=a.cmdClass;e=Ext.create(f,{evt:b});if(e.execute()){FBEditor.HistoryCommand.add(e)}}},0,0,0,0,["controller.button.abstractload.resource"],0,[FBEditor.view.button.resource,"AbstractLoadResourceController"],0));(Ext.cmd.derive("FBEditor.view.button.resource.AbstractLoadResource",FBEditor.view.button.AbstractFileButton,{controller:"button.abstractload.resource",text:"Загрузить ресурс",cmdClass:"",listeners:{change:"onChange"},initComponent:function(){var b=this,a=FBEditor.resource.Manager.types;b.accept=a.join(",");FBEditor.view.button.AbstractFileButton.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},0,0,[FBEditor.view.button.resource,"AbstractLoadResource"],0));(Ext.cmd.derive("FBEditor.view.button.resource.LoadResource",FBEditor.view.button.resource.AbstractLoadResource,{id:"button-load-resource",text:"Загрузить ресурс",cmdClass:"FBEditor.command.LoadResource"},0,["button-load-resource"],["component","box","button","filebutton","button-load-resource"],{component:true,box:true,button:true,filebutton:true,"button-load-resource":true},["widget.button-load-resource"],0,[FBEditor.view.button.resource,"LoadResource"],0));(Ext.cmd.derive("FBEditor.view.button.resource.ReplaceResourceController",FBEditor.view.button.resource.AbstractLoadResourceController,{onChange:function(d,b){var e=this,a=e.getView(),c,g,f;g=a.cmdClass;c=a.nameResource;f=Ext.create(g,{evt:b,nameResource:c});if(f.execute()){FBEditor.HistoryCommand.add(f)}}},0,0,0,0,["controller.button.replace.resource"],0,[FBEditor.view.button.resource,"ReplaceResourceController"],0));(Ext.cmd.derive("FBEditor.view.button.resource.ReplaceResource",FBEditor.view.button.resource.AbstractLoadResource,{id:"button-replace-resource",controller:"button.replace.resource",width:"100%",text:"Заменить",cmdClass:"FBEditor.command.ReplaceResource",nameResource:null,setResource:function(a){this.nameResource=a}},0,["button-replace-resource"],["component","box","button","filebutton","button-replace-resource"],{component:true,box:true,button:true,filebutton:true,"button-replace-resource":true},["widget.button-replace-resource"],0,[FBEditor.view.button.resource,"ReplaceResource"],0));(Ext.cmd.derive("FBEditor.view.field.country.CountryStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Неизвестно"},{value:"RU",name:"Россия"},{value:"AU",name:"Австралия"},{value:"AT",name:"Австрия"},{value:"AZ",name:"Азербайджан"},{value:"AX",name:"Аландские острова"},{value:"AL",name:"Албания"},{value:"DZ",name:"Алжир"},{value:"VI",name:"Американские Виргинские острова"},{value:"AS",name:"Американское Самоа"},{value:"AO",name:"Ангола"},{value:"AI",name:"Ангуилла"},{value:"AD",name:"Андорра"},{value:"AQ",name:"Антарктика"},{value:"AG",name:"Антигуа и Барбуда"},{value:"AR",name:"Аргентина"},{value:"AM",name:"Армения"},{value:"AW",name:"Аруба"},{value:"AF",name:"Афганистан"},{value:"BS",name:"Багамские острова"},{value:"BD",name:"Бангладеш"},{value:"BB",name:"Барбадос"},{value:"BH",name:"Бахрейн"},{value:"BY",name:"Беларусь"},{value:"BZ",name:"Белиз"},{value:"BE",name:"Бельгия"},{value:"BJ",name:"Бенин"},{value:"BM",name:"Бермудские Острова"},{value:"BG",name:"Болгария"},{value:"BO",name:"Боливия"},{value:"BA",name:"Босния и Герцеговина"},{value:"BW",name:"Ботсвана"},{value:"BR",name:"Бразилия"},{value:"IO",name:"Британская территория в Индийском океане"},{value:"VG",name:"Британские Виргинские Острова"},{value:"BN",name:"Бруней Даруссалам"},{value:"BF",name:"Буркина Фасо"},{value:"BI",name:"Бурунди"},{value:"BT",name:"Бутан"},{value:"VU",name:"Вануату"},{value:"VA",name:"Ватикан"},{value:"GB",name:"Великобритания"},{value:"HU",name:"Венгрия"},{value:"VE",name:"Венесуэла"},{value:"UM",name:"Внешние малые острова (США)"},{value:"TL",name:"Восточный Тимор"},{value:"VN",name:"Вьетнам"},{value:"GA",name:"Габон"},{value:"HT",name:"Гаити"},{value:"GY",name:"Гайана"},{value:"GM",name:"Гамбия"},{value:"GH",name:"Гана"},{value:"GP",name:"Гваделупа"},{value:"GT",name:"Гватемала"},{value:"GN",name:"Гвинея"},{value:"GW",name:"Гвинея-Биссау"},{value:"DE",name:"Германия"},{value:"GG",name:"Гернси"},{value:"GI",name:"Гибралтар"},{value:"HN",name:"Гондурас"},{value:"HK",name:"Гонконг, Особый Административный Район Китая"},{value:"GD",name:"Гренада"},{value:"GL",name:"Гренландия"},{value:"GR",name:"Греция"},{value:"GE",name:"Грузия"},{value:"GU",name:"Гуам"},{value:"DK",name:"Дания"},{value:"CD",name:"Демократическая Республика Конго"},{value:"JE",name:"Джерси"},{value:"DJ",name:"Джибути"},{value:"DO",name:"Доминиканская Республика"},{value:"EG",name:"Египет"},{value:"ZM",name:"Замбия"},{value:"EH",name:"Западная Сахара"},{value:"ZW",name:"Зимбабве"},{value:"IL",name:"Израиль"},{value:"IN",name:"Индия"},{value:"ID",name:"Индонезия"},{value:"JO",name:"Иордания"},{value:"IQ",name:"Ирак"},{value:"IR",name:"Иран"},{value:"IE",name:"Ирландия"},{value:"IS",name:"Исландия"},{value:"ES",name:"Испания"},{value:"IT",name:"Италия"},{value:"YE",name:"Йемен"},{value:"KZ",name:"Казахстан"},{value:"KY",name:"Каймановы острова"},{value:"KH",name:"Камбоджа"},{value:"CM",name:"Камерун"},{value:"CA",name:"Канада"},{value:"QA",name:"Катар"},{value:"KE",name:"Кения"},{value:"CY",name:"Кипр"},{value:"KI",name:"Кирибати"},{value:"CN",name:"Китай"},{value:"CC",name:"Кокосовые острова"},{value:"CO",name:"Колумбия"},{value:"KM",name:"Коморские Острова"},{value:"CG",name:"Конго"},{value:"KP",name:"Корейская Народно-Демократическая Республика"},{value:"CR",name:"Коста-Рика"},{value:"CI",name:"Кот д\u2019Ивуар"},{value:"CU",name:"Куба"},{value:"KW",name:"Кувейт"},{value:"KG",name:"Кыргызстан"},{value:"LA",name:"Лаос"},{value:"LV",name:"Латвия"},{value:"LS",name:"Лесото"},{value:"LR",name:"Либерия"},{value:"LB",name:"Ливан"},{value:"LY",name:"Ливия"},{value:"LT",name:"Литва"},{value:"LI",name:"Лихтенштейн"},{value:"LU",name:"Люксембург"},{value:"MU",name:"Маврикий"},{value:"MR",name:"Мавритания"},{value:"MG",name:"Мадагаскар"},{value:"YT",name:"Майотта"},{value:"MO",name:"Макао (особый административный район КНР)"},{value:"MK",name:"Македония"},{value:"MW",name:"Малави"},{value:"MY",name:"Малайзия"},{value:"ML",name:"Мали"},{value:"MV",name:"Мальдивы"},{value:"MT",name:"Мальта"},{value:"MA",name:"Марокко"},{value:"MQ",name:"Мартиник"},{value:"MH",name:"Маршалловы Острова"},{value:"MX",name:"Мексика"},{value:"MZ",name:"Мозамбик"},{value:"MD",name:"Молдова"},{value:"MC",name:"Монако"},{value:"MN",name:"Монголия"},{value:"MS",name:"Монсеррат"},{value:"MM",name:"Мьянма"},{value:"NA",name:"Намибия"},{value:"NR",name:"Науру"},{value:"ZZ",name:"Неизвестный или недействительный регион"},{value:"NP",name:"Непал"},{value:"NE",name:"Нигер"},{value:"NG",name:"Нигерия"},{value:"AN",name:"Нидерландские Антильские острова"},{value:"NL",name:"Нидерланды"},{value:"NI",name:"Никарагуа"},{value:"NU",name:"Ниуе"},{value:"NZ",name:"Новая Зеландия"},{value:"NC",name:"Новая Каледония"},{value:"NO",name:"Норвегия"},{value:"AE",name:"Объединенные Арабские Эмираты"},{value:"OM",name:"Оман"},{value:"BV",name:"Остров Буве"},{value:"DM",name:"Остров Доминика"},{value:"IM",name:"Остров Мэн"},{value:"NF",name:"Остров Норфолк"},{value:"CX",name:"Остров Рождества"},{value:"BL",name:"Остров Святого Бартоломея"},{value:"MF",name:"Остров Святого Мартина"},{value:"SH",name:"Остров Святой Елены"},{value:"CV",name:"Острова Зеленого Мыса"},{value:"CK",name:"Острова Кука"},{value:"TC",name:"Острова Тёркс и Кайкос"},{value:"HM",name:"Острова Херд и Макдональд"},{value:"PK",name:"Пакистан"},{value:"PW",name:"Палау"},{value:"PS",name:"Палестинская автономия"},{value:"PA",name:"Панама"},{value:"PG",name:"Папуа-Новая Гвинея"},{value:"PY",name:"Парагвай"},{value:"PE",name:"Перу"},{value:"PN",name:"Питкерн"},{value:"PL",name:"Польша"},{value:"PT",name:"Португалия"},{value:"PR",name:"Пуэрто-Рико"},{value:"KR",name:"Республика Корея"},{value:"RE",name:"Реюньон"},{value:"RW",name:"Руанда"},{value:"RO",name:"Румыния"},{value:"US",name:"США"},{value:"SV",name:"Сальвадор"},{value:"WS",name:"Самоа"},{value:"SM",name:"Сан-Марино"},{value:"ST",name:"Сан-Томе и Принсипи"},{value:"SA",name:"Саудовская Аравия"},{value:"SZ",name:"Свазиленд"},{value:"SJ",name:"Свальбард и Ян-Майен"},{value:"MP",name:"Северные Марианские Острова"},{value:"SC",name:"Сейшельские Острова"},{value:"PM",name:"Сен-Пьер и Микелон"},{value:"SN",name:"Сенегал"},{value:"VC",name:"Сент-Винсент и Гренадины"},{value:"KN",name:"Сент-Киттс и Невис"},{value:"LC",name:"Сент-Люсия"},{value:"RS",name:"Сербия"},{value:"CS",name:"Сербия и Черногория"},{value:"SG",name:"Сингапур"},{value:"SY",name:"Сирийская Арабская Республика"},{value:"SK",name:"Словакия"},{value:"SI",name:"Словения"},{value:"SB",name:"Соломоновы Острова"},{value:"SO",name:"Сомали"},{value:"SD",name:"Судан"},{value:"SR",name:"Суринам"},{value:"SL",name:"Сьерра-Леоне"},{value:"TJ",name:"Таджикистан"},{value:"TH",name:"Таиланд"},{value:"TW",name:"Тайвань"},{value:"TZ",name:"Танзания"},{value:"TG",name:"Того"},{value:"TK",name:"Токелау"},{value:"TO",name:"Тонга"},{value:"TT",name:"Тринидад и Тобаго"},{value:"TV",name:"Тувалу"},{value:"TN",name:"Тунис"},{value:"TM",name:"Туркменистан"},{value:"TR",name:"Турция"},{value:"UG",name:"Уганда"},{value:"UZ",name:"Узбекистан"},{value:"UA",name:"Украина"},{value:"WF",name:"Уоллис и Футуна"},{value:"UY",name:"Уругвай"},{value:"FO",name:"Фарерские острова"},{value:"FM",name:"Федеративные Штаты Микронезии"},{value:"FJ",name:"Фиджи"},{value:"PH",name:"Филиппины"},{value:"FI",name:"Финляндия"},{value:"FK",name:"Фолклендские острова"},{value:"FR",name:"Франция"},{value:"GF",name:"Французская Гвиана"},{value:"PF",name:"Французская Полинезия"},{value:"TF",name:"Французские Южные Территории"},{value:"HR",name:"Хорватия"},{value:"CF",name:"Центрально-Африканская Республика"},{value:"TD",name:"Чад"},{value:"ME",name:"Черногория"},{value:"CZ",name:"Чешская республика"},{value:"CL",name:"Чили"},{value:"CH",name:"Швейцария"},{value:"SE",name:"Швеция"},{value:"LK",name:"Шри-Ланка"},{value:"EC",name:"Эквадор"},{value:"GQ",name:"Экваториальная Гвинея"},{value:"ER",name:"Эритрея"},{value:"EE",name:"Эстония"},{value:"ET",name:"Эфиопия"},{value:"ZA",name:"Южная Африка"},{value:"GS",name:"Южная Джорджия и Южные Сандвичевы Острова"},{value:"JM",name:"Ямайка"},{value:"JP",name:"Япония"}]},0,0,0,0,0,0,[FBEditor.view.field.country,"CountryStore"],0));(Ext.cmd.derive("FBEditor.view.field.country.CountryController",Ext.app.ViewController,{onChange:function(c,d){var b=c,e=d,a;a=b.findRecordByValue(e);if(!a||!e){b.reset()}}},0,0,0,0,["controller.countryfield"],0,[FBEditor.view.field.country,"CountryController"],0));(Ext.cmd.derive("FBEditor.view.field.country.Country",Ext.form.field.ComboBox,{controller:"countryfield",queryMode:"local",displayField:"name",valueField:"value",editable:false,listConfig:{style:{maxHeight:"auto"}},listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.field.country.CountryStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["countryfield"],["component","box","field","textfield","pickerfield","combobox","combo","countryfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,countryfield:true},["widget.countryfield"],0,[FBEditor.view.field.country,"Country"],0));(Ext.cmd.derive("FBEditor.view.field.datetime.Datetime",Ext.form.FieldContainer,{translateText:{date:"Дата",time:"Время"},initComponent:function(){var a=this;a.items=[{xtype:"datefield",fieldLabel:a.translateText.date,emptyText:a.translateText.date,hideLabel:true},{xtype:"timefield",format:"H:i:s",fieldLabel:a.translateText.time,emptyText:a.translateText.time,hideLabel:true}];Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments)}},0,["datetimefield"],["component","box","container","fieldcontainer","datetimefield"],{component:true,box:true,container:true,fieldcontainer:true,datetimefield:true},["widget.datetimefield"],0,[FBEditor.view.field.datetime,"Datetime"],0));(Ext.cmd.derive("FBEditor.view.field.lang.LangController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.expand()}},0,0,0,0,["controller.langfield"],0,[FBEditor.view.field.lang,"LangController"],0));(Ext.cmd.derive("FBEditor.view.field.lang.LangStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Это не перевод"},{value:"line",name:""},{value:"ru",name:"Русский"},{value:"uk",name:"Украинский"},{value:"en",name:"Английский"},{value:"de",name:"Немецкий"},{value:"fr",name:"Французский"},{value:"line",name:""},{value:"sq",name:"Албанский"},{value:"ar",name:"Арабский"},{value:"hy",name:"Армянский"},{value:"az",name:"Азербайджанский"},{value:"be",name:"Белорусский"},{value:"bg",name:"Болгарский"},{value:"bs",name:"Боснийский"},{value:"vi",name:"Вьетнамский"},{value:"hu",name:"Венгерский"},{value:"nl",name:"Голландский"},{value:"el",name:"Греческий"},{value:"ka",name:"Грузинский"},{value:"da",name:"Датский"},{value:"he",name:"Иврит"},{value:"id",name:"Индонезийский"},{value:"it",name:"Итальянский"},{value:"is",name:"Исландский"},{value:"es",name:"Испанский"},{value:"ca",name:"Каталанский"},{value:"zh",name:"Китайский"},{value:"lv",name:"Латышский"},{value:"lv",name:"Латышский"},{value:"lt",name:"Литовский"},{value:"ms",name:"Малайский"},{value:"mt",name:"Мальтийский"},{value:"mk",name:"Македонский"},{value:"no",name:"Норвежский"},{value:"pl",name:"Польский"},{value:"pt",name:"Португальский"},{value:"ro",name:"Румынский"},{value:"sr",name:"Сербский"},{value:"sk",name:"Словацкий"},{value:"sl",name:"Словенский"},{value:"th",name:"Тайский"},{value:"tr",name:"Турецкий"},{value:"fi",name:"Финский"},{value:"hr",name:"Хорватский"},{value:"cs",name:"Чешский"},{value:"sv",name:"Шведский"},{value:"et",name:"Эстонский"}]},0,0,0,0,0,0,[FBEditor.view.field.lang,"LangStore"],0));(Ext.cmd.derive("FBEditor.view.field.lang.Lang",Ext.form.field.ComboBox,{controller:"langfield",queryMode:"local",displayField:"name",valueField:"value",editable:true,typeAhead:true,value:"",hideTrigger:true,componentCls:"field-langfield",listConfig:{maxHeight:210,tpl:'<tpl for="."><tpl if="value!=\'line\'"><div class="x-boundlist-item">{name}</div><tpl else><div class="x-boundlist-item x-boundlist-item-line"></div></tpl></tpl>'},triggers:{ru:{cls:"langfield-trigger",extraCls:"langfield-trigger-ru",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},en:{cls:"langfield-trigger",extraCls:"langfield-trigger-en",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},fr:{cls:"langfield-trigger",extraCls:"langfield-trigger-fr",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},de:{cls:"langfield-trigger",extraCls:"langfield-trigger-de",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}}},listeners:{click:{element:"el",fn:"onClick"}},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.field.lang.LangStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},onTrigger:function(b,c,a){var d=this,e=c.id;d.setValue(e);a.stopPropagation()}},0,["langfield"],["component","box","field","textfield","pickerfield","combobox","combo","langfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,langfield:true},["widget.langfield"],0,[FBEditor.view.field.lang,"Lang"],0));(Ext.cmd.derive("FBEditor.view.field.textfieldclear.TextFieldClear",Ext.form.field.Text,{triggers:{foo:{cls:"textfieldclear-trigger",handler:function(){this.setValue("")}}}},0,["textfieldclear"],["component","box","field","textfield","textfieldclear"],{component:true,box:true,field:true,textfield:true,textfieldclear:true},["widget.textfieldclear"],0,[FBEditor.view.field.textfieldclear,"TextFieldClear"],0));(Ext.cmd.derive("FBEditor.view.form.desc.AbstractFieldController",Ext.app.ViewController,{onLoadData:function(e){var d=this,b=d.getView(),a,c;c=d.getPluginContainerReplicator(b);a=c.getCmp();Ext.Object.each(e,function(f,g){a.fireEvent("loadInnerData",g);Ext.Object.each(g,function(h,i){var j=a.query("[name="+h+"]")[0];if(j){if(Ext.isObject(i)){j.fireEvent("loadData",i)}else{if(j.setValue){j.setValue(i)}}}});if(e[parseInt(f)+1]){c.addFields();a=c.alwaysInsertFirst?a.previousSibling():a.nextSibling();c=a.getPlugin("fieldcontainerreplicator")}})},onLoadInnerData:function(a){},onEditable:function(c){var e=this,b=e.getView(),a,d;d=b.down("form-desc-title-alt").getPlugin("fieldcontainerreplicator");if(d){if(c){d.getBtnAdd().enable()}else{d.getBtnAdd().disable()}}a=b.query("[name]");Ext.Array.each(a,function(f){if(f.setEditable){f.setEditable(c)}})},onResetFields:function(){var a=this;a.resetContainer()},resetContainer:function(){var d=this,b=d.getView(),e,c,a,f;e=d.getContainersReplicator(b);Ext.each(e,function(h,g){if(g){b.remove(h)}else{h.fireEvent("resetContainer");c=d.getContainersReplicator(h);Ext.each(c,function(i){h.remove(i)});h.getPlugin("fieldcontainerreplicator").getBtnRemove().disable()}});a=document.querySelectorAll("#"+b.getId()+" .plugin-fieldreplicator");Ext.each(a,function(h,g){if(g){f=b.queryById(h.id);b.remove(f)}})},getContainersReplicator:function(a){return a.query("[name=plugin-fieldcontainerreplicator]")},getPluginContainerReplicator:function(a){var c=this,b;b=c.getContainersReplicator(a).length?c.getContainersReplicator(a)[0].getPlugin("fieldcontainerreplicator"):null;return b}},0,0,0,0,["controller.form.desc.abstractField"],0,[FBEditor.view.form.desc,"AbstractFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.AbstractFieldContainer",Ext.form.FieldContainer,{controller:"form.desc.abstractField",listeners:{resetFields:"onResetFields",loadData:"onLoadData",loadInnerData:"onLoadInnerData",editable:"onEditable"},fieldEventCache:[],afterRender:function(){var c=this,b,a;a=c.query("field");Ext.Array.each(a,function(d){if(!c.fieldEventCache[d.id]){c.initEventBlur(d)}});b=c.getPlugin("fieldcontainerreplicator");if(b){c.name="plugin-fieldcontainerreplicator"}Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments)},getFormDesc:function(){var a;a=Ext.getCmp("form-desc");return a},clearInvalid:function(){var b=this,a=b.query("field");Ext.Array.each(a,function(c){if(c.clearInvalid){c.clearInvalid()}})},isValid:function(){var f=this,h=true,b=false,d=FBEditor.desc.Manager,a,e,g,c;c=f.query("field");Ext.Array.each(c,function(i){g=i.getValue();if(!g){e=i.up("[cls=block-container]");b=e?e.isEmptyBlock():false;if(b){e.clearInvalid()}}if(!b&&i.isValid){if(!i.isValid()){d.fieldsError.push(i);a=i.up("desc-fieldset");a.expand();a=i.up("desc-fieldsetinner");if(a){a.expand()}h=false}}});return h},getValues:function(e){var b=this,a=b.items,c=e;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c},removeEmptyValues:function(a){var b=null;Ext.Object.each(a,function(c,d){if(!Ext.isEmpty(d)){b=b||{};b[c]=d}});return b},getDataFields:function(a){var b=this,c=null;Ext.Object.each(a,function(d,e){var f=e.getValue();if(f){c=c||[];c.push(f)}});return c},updateData:function(b){var a=this;Ext.Object.each(b,function(c,d){var e=a.down("[name="+c+"]");if(e){if(Ext.isObject(d)){e.updateData(d)}else{e.setValue(d)}}})},isEmptyBlock:function(){var b=this,c=true,a;a=b.query("field");Ext.Array.each(a,function(d){if(d.getValue()){c=false;return false}});return c},initEventBlur:function(b){var a=this;a.fieldEventCache[b.id]=true;b.on("blur",function(){var c=this,e=c.getValue(),d;if(!e){d=c.up("[cls=block-container]");if(d&&d.isEmptyBlock()){d.clearInvalid()}}})}},0,["desc-fieldcontainer"],["component","box","container","fieldcontainer","desc-fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true},["widget.desc-fieldcontainer"],0,[FBEditor.view.form.desc,"AbstractFieldContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.DescController",Ext.app.ViewController,{onLoadData:function(e){var d=this,a=d.getView(),c=a.getForm(),b=FBEditor.desc.Manager;a.fireEvent("reset");c.setValues(e);Ext.getCmp("form-desc-sequence").fireEvent("loadData",e.sequence);Ext.getCmp("form-desc-title").down("form-desc-title-alt").fireEvent("loadData",e["title-alt"]);Ext.getCmp("form-desc-periodical").down("form-desc-title-alt").fireEvent("loadData",e["periodical-title-alt"]);if(e.relations&&e.relations["relations-subject"]){Ext.getCmp("form-desc-relations-subject").fireEvent("loadData",e.relations["relations-subject"])}if(e.relations&&e.relations["relations-object"]){Ext.getCmp("form-desc-relations-object").fireEvent("loadData",e.relations["relations-object"])}Ext.getCmp("form-desc-classification-udc").fireEvent("loadData",e["classification-udc"]);Ext.getCmp("form-desc-classification-bbk").fireEvent("loadData",e["classification-bbk"]);Ext.getCmp("form-desc-subject").fireEvent("loadData",e["classification-subject"]);Ext.getCmp("form-desc-customInfo").fireEvent("loadData",e["custom-info"]);Ext.getCmp("form-desc-publishInfo").fireEvent("loadData",e["paper-publish-info"]);Ext.getCmp("form-desc-documentInfo-isbn").fireEvent("loadData",e["document-info-isbn"]);d.expandFieldset(e);b.setLoadedData(true)},onStartScroll:function(){},onResize:function(d,c,a,b,e){},onActivate:function(b){var c=b,a=c.items;if(!c._firstActivate){c._firstActivate=true;a.each(function(e){var d=e.require,f=e.autoExpand,g;g=d&&f?false:true;if(g){e.collapse()}})}},onReset:function(){var c=this,a=c.getView(),b=a.getForm(),d;d=a.query("[name=form-desc-plugin-fieldcontainerreplicator],form-desc-title, fieldset, form-desc-relations-subject-link");Ext.each(d,function(e){e.fireEvent("resetFields")});b.reset()},expandFieldset:function(d){var c=this,b=c.getView(),a;a=b.query("fieldset");Ext.each(a,function(e){e.fireEvent("checkExpand")})}},0,0,0,0,["controller.form.desc"],0,[FBEditor.view.form.desc,"DescController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.date.DateController",Ext.app.ViewController,{onBlur:function(){var e=this,a=e.getView(),d=a.getValue(),b=a.getRawValue(),c=new Date();a.fireEvent("beforeblur");if(/^[0-9]{4}$/.test(b)){a.setValue(b+"-01-01")}if(/^[0-9]{2}\.[0-9]{2}\.[0-9]{2}$/.test(b)){b=b.split(".");b[2]=c.getFullYear().toString().substr(0,2)+b[2];b[1]--;d=new Date(b[2],b[1],b[0]);if(c<d){b[2]=d.getFullYear()-100}d=new Date(b[2],b[1],b[0]);a.setValue(d)}}},0,0,0,0,["controller.form.desc.date"],0,[FBEditor.view.form.desc.date,"DateController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.date.Date",Ext.form.field.Date,{controller:"form.desc.date",altFormats:"Y-m-d|d.m.Y",format:"Y-m-d",listeners:{blur:"onBlur"}},0,["desc-date"],["component","box","field","textfield","pickerfield","datefield","desc-date"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true},["widget.desc-date"],0,[FBEditor.view.form.desc.date,"Date"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.Required",Ext.Base,{checkChangeCls:function(){var b=this,a=b._cls,c=b.isValid();b.removeCls(a);if(!c){b.addCls(a)}}},0,0,0,0,0,0,[FBEditor.view.form.desc.field,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.combobox.required.Required",Ext.form.field.ComboBox,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-combobox-required"],["component","box","field","textfield","pickerfield","combobox","combo","desc-field-combobox-required"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"desc-field-combobox-required":true},["widget.desc-field-combobox-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.combobox.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.link.Link",Ext.form.Display,{fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],linkTpl:'<a href="{href}" target="_blank" title="{title}">{value}</a>',_disableLink:true,disableLink:function(a){var b=this,c=b.getRawValue();b._disableLink=arguments.length?a:true;b.setValue(c)},getDisplayValue:function(){var a=this,b=a.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a._disableLink?b:new Ext.XTemplate(a.linkTpl).apply({href:b,value:b,title:""})}return c}},0,["form-desc-field-link"],["component","box","field","displayfield","form-desc-field-link"],{component:true,box:true,field:true,displayfield:true,"form-desc-field-link":true},["widget.form-desc-field-link"],0,[FBEditor.view.form.desc.field.link,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.link.uuid.Link",FBEditor.view.form.desc.field.link.Link,{cls:"form-desc-field-link-uuid",linkTpl:'<a href="https://hub.litres.ru/pages/any_uuid_redir/?uuid={href}" target="_blank" title="{title}">{value}</a>',translateText:{pageEditor:"Страница редактирования"},getDisplayValue:function(){var a=this,b=a.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a._disableLink?b:new Ext.XTemplate(a.linkTpl).apply({href:b,value:b,title:a.translateText.pageEditor})}return c}},0,["form-desc-field-link-uuid"],["component","box","field","displayfield","form-desc-field-link","form-desc-field-link-uuid"],{component:true,box:true,field:true,displayfield:true,"form-desc-field-link":true,"form-desc-field-link-uuid":true},["widget.form-desc-field-link-uuid"],0,[FBEditor.view.form.desc.field.link.uuid,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.number.required.Required",Ext.form.field.Number,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Number.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-number-required"],["component","box","field","textfield","spinnerfield","numberfield","desc-field-number-required"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true,"desc-field-number-required":true},["widget.desc-field-number-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.number.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.text.required.Required",Ext.form.field.Text,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-text-required"],["component","box","field","textfield","desc-field-text-required"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true},["widget.desc-field-text-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.text.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.textarea.required.Required",Ext.form.field.TextArea,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.TextArea.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-textarea-required"],["component","box","field","textfield","textareafield","textarea","desc-field-textarea-required"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true,"desc-field-textarea-required":true},["widget.desc-field-textarea-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.textarea.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.time.required.Required",Ext.form.field.Time,{allowBlank:false,_cls:"field-required",listeners:{change:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Time.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-time-required"],["component","box","field","textfield","pickerfield","combobox","combo","timefield","desc-field-time-required"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,timefield:true,"desc-field-time-required":true},["widget.desc-field-time-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.time.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetController",Ext.app.ViewController,{onCheckExpand:function(){var c=this,a=c.getView(),e,b,d;b=a.require;d=a.autoExpand;e=a.down('component[allowBlank/="true|false"]');if(!b&&d){if(e&&e.getValue()){a.expand()}}},onResetFields:function(){var a=this;a.resetFieldset()},resetFieldset:function(){var c=this,a=c.getView(),b,d;b=a.require;d=a.autoExpand;if(b&&d){a.expand()}else{a.collapse()}}},0,0,0,0,["controller.desc.fieldset"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldset",Ext.form.FieldSet,{controller:"desc.fieldset",collapsible:true,anchor:"100%",listeners:{resetFields:"onResetFields",checkExpand:"onCheckExpand",beforecollapse:function(a){Ext.suspendLayouts()},collapse:function(a){Ext.resumeLayouts()},beforeexpand:function(a){Ext.suspendLayouts()},expand:function(a){Ext.resumeLayouts()}},xtypeChild:"",require:false,autoExpand:true,initComponent:function(){var b=this,a=b.require,c=b.xtypeChild;b.title=b.title+'<a name="'+b.xtype+'"></a>';b.cls=b.xtype;if(!b.items){b.items=[{xtype:"form-desc-"+c,layout:"anchor",defaults:{anchor:"100%"}}]}Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,a=b.items,c=true;a.each(function(d){if(d.isValid&&!d.isValid()){c=false}});return c},getValues:function(e){var b=this,a=b.items,c=e;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c}},0,["desc-fieldset"],["component","box","container","fieldset","desc-fieldset"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true},["widget.desc-fieldset"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldset"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.annotation.AnnotationController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,a=c.getView(),b;b=a.items.first();if(b.getValue()){a.expand()}}},0,0,0,0,["controller.desc.fieldset.annotation"],0,[FBEditor.view.form.desc.fieldset.annotation,"AnnotationController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.EditorController",Ext.app.ViewController,{onLoadData:function(a){var d=this,b=d.getView(),c;c=b.getBodyEditor();c.fireEvent("loadData",a)}},0,0,0,0,["controller.form.desc.editor"],0,[FBEditor.view.form.desc.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.Manager",FBEditor.editor.Manager,{getPanelProps:function(){var b=FBEditor.getBridgeProps(),a;a=b.Ext.getCmp("panel-props-desc-editor-container");return a}},0,0,0,0,0,0,[FBEditor.view.form.desc.editor,"Manager"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.command.Clean",FBEditor.editor.command.AbstractCommand,{minLength:50,execute:function(){var k=this,g=k.getData(),j=false,c=FBEditor.desc.Manager,b=c.getRegexpUtf(),f={},a={},l,d,i;d=g.manager;i=d.getHistory();d.setSuspendEvent(true);try{l=d.getContent();f.p=l.first();while(f.p){if(f.p.isP){k.each(f.p,function(e){var o,n,m;if(e){m=e.getNodeHelper().getNode();o=e.getText();if(e.isText){n=o.replace(b,"");if(n!==o){e.setText(n);m.nodeValue=n}}}});a.p=f.p.getNodeHelper().getNode();f.text=f.p.getText();a.next=a.p.nextSibling;f.next=a.next?a.next.getElement():null;if(f.next&&/[.!?]+$/ig.test(f.text)){a.deepFirst=d.getDeepFirst(a.next);f.deepFirst=a.deepFirst.getElement();f.firstText=f.deepFirst.getText();f.firstText=f.firstText.replace(/^( )*([a-zа-я])(.+?)/ig,function(o,m,n,e){m=m?" ":"";o=m+Ext.String.capitalize(n)+e;return o});f.deepFirst.setText(f.firstText);a.deepFirst.nodeValue=f.firstText}if((/-$/.test(f.text)||f.text.length<k.minLength||/[^.,!?]+$/ig.test(f.text))&&f.next&&!f.next.isEmpty()){a.deepLast=d.getDeepLast(a.p);f.deepLast=a.deepLast.getElement();f.lastText=f.deepLast.getText();a.deepFirst=d.getDeepFirst(a.next);f.deepFirst=a.deepFirst.getElement();f.firstText=f.deepFirst.getText();if(/-$/.test(f.lastText)){f.lastText=f.lastText.replace(/(-)+$/g,"");f.deepLast.setText(f.lastText);a.deepLast.nodeValue=f.lastText}else{if(!/ $/.test(f.lastText)&&!/^ /.test(f.firstText)){f.lastText=f.lastText+" ";f.deepLast.setText(f.lastText);a.deepLast.nodeValue=f.lastText}}d.joinNode(a.next)}else{f.p=f.next}}}j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});i.removeNext()}d.setSuspendEvent(false);return j},unExecute:function(){return true},each:function(b,a){var c=this;if(b){b.each(function(d){a(d);c.each(d,a)})}}},0,0,0,0,0,0,[FBEditor.view.form.desc.editor.command,"Clean"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.toolbar.button.cleaner.CleanerController",Ext.app.ViewController,{onClick:function(){var d=this,a=d.getView(),c=a.getEditor(),b,f,e;b=c.getManager();f=b.getHistory();e=Ext.create("FBEditor.view.form.desc.editor.command.Clean",{manager:b});if(e.execute()){f.add(e)}},onSync:function(){var e=this,a=e.getView(),d=a.getEditor(),c,b;c=d.getManager();b=c.getFocusElement();if(b){a.enable()}else{a.disable()}}},0,0,0,0,["controller.form.desc.editor.toolbar.button.cleaner"],0,[FBEditor.view.form.desc.editor.toolbar.button.cleaner,"CleanerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.toolbar.button.cleaner.Cleaner",Ext.Button,{controller:"form.desc.editor.toolbar.button.cleaner",html:'<i class="fa fa-paint-brush"></i>',tooltip:"Уборка",tooltipType:"title",disabled:true,listeners:{sync:"onSync",click:"onClick"},getEditor:function(){var b=this,a;a=b.editor||b.up("form-desc-editor-toolbar").getEditor();b.editor=a;return a},setToolbar:function(a){this.toolbar=a}},0,["form-desc-editor-toolbar-button-cleaner"],["component","box","button","form-desc-editor-toolbar-button-cleaner"],{component:true,box:true,button:true,"form-desc-editor-toolbar-button-cleaner":true},["widget.form-desc-editor-toolbar-button-cleaner"],0,[FBEditor.view.form.desc.editor.toolbar.button.cleaner,"Cleaner"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.toolbar.Toolbar",FBEditor.editor.view.toolbar.Toolbar,{id:"form-desc-editor-toolbar",afterRender:function(){var b=this,a;FBEditor.editor.view.toolbar.Toolbar.prototype.afterRender.apply(this,arguments);a=Ext.widget("form-desc-editor-toolbar-button-cleaner");a.setToolbar(b);b.add([{xtype:"editor-toolbar-button-strong"},{xtype:"editor-toolbar-button-em"},{xtype:"editor-toolbar-button-a"},{xtype:"editor-toolbar-button-unstyle"},{xtype:"tbspacer",width:20},a]);b.addSyncButton("form-desc-editor-toolbar-button-cleaner")}},0,["form-desc-editor-toolbar"],["component","box","container","toolbar","editor-toolbar","form-desc-editor-toolbar"],{component:true,box:true,container:true,toolbar:true,"editor-toolbar":true,"form-desc-editor-toolbar":true},["widget.form-desc-editor-toolbar"],0,[FBEditor.view.form.desc.editor.toolbar,"Toolbar"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.body.Body",FBEditor.editor.view.Editor,{cls:"form-desc-editor-body",resizable:{handles:"s",minHeight:100,pinned:true},height:170,createManager:function(){var a=this;a.manager=a.manager||Ext.create("FBEditor.view.form.desc.editor.Manager",a)},createToolbar:function(){var c=this,a=FBEditor.desc.Manager,b;b=a.getToolbar();return b}},0,["form-desc-editor-body"],["component","box","container","panel","base-editor","form-desc-editor-body"],{component:true,box:true,container:true,panel:true,"base-editor":true,"form-desc-editor-body":true},["widget.form-desc-editor-body"],0,[FBEditor.view.form.desc.editor.body,"Body"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.Editor",Ext.Panel,{controller:"form.desc.editor",cls:"form-desc-editor",listeners:{loadData:"onLoadData"},bodyStyle:{background:"none"},layout:"fit",defaultShowToolbar:false,bodyEditor:null,rootElementName:"",afterRender:function(){var b=this,a;a=Ext.widget("form-desc-editor-body",{rootElementName:b.rootElementName,defaultShowToolbar:b.defaultShowToolbar});b.bodyEditor=a;b.add(a);Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},getValues:function(c){var a=this,b=c;b[a.name]=a.getValue();return b},getValue:function(){var b=this,a,c;a=b.getBodyEditor();c=a.getValue();return c},getBodyEditor:function(){return this.bodyEditor},getRootElementName:function(){return this.rootElementName}},0,["form-desc-editor"],["component","box","container","panel","form-desc-editor"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true},["widget.form-desc-editor"],0,[FBEditor.view.form.desc.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.form.desc.annotation.Annotation",FBEditor.view.form.desc.editor.Editor,{id:"form-desc-annotation",rootElementName:"desc:annotation",name:"annotation",defaultShowToolbar:true},0,["form-desc-annotation"],["component","box","container","panel","form-desc-editor","form-desc-annotation"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-annotation":true},["widget.form-desc-annotation"],0,[FBEditor.view.form.desc.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.annotation.Annotation",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.annotation",title:"Аннотация",xtypeChild:"annotation"},0,["desc-fieldset-annotation"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-annotation"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-annotation":true},["widget.desc-fieldset-annotation"],0,[FBEditor.view.form.desc.fieldset.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.history.HistoryController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,a=c.getView(),b;b=a.items.first();if(b.getValue()){a.expand()}}},0,0,0,0,["controller.desc.fieldset.history"],0,[FBEditor.view.form.desc.fieldset.history,"HistoryController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.history.History",FBEditor.view.form.desc.editor.Editor,{id:"form-desc-history",rootElementName:"desc:history",name:"history"},0,["form-desc-history"],["component","box","container","panel","form-desc-editor","form-desc-history"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-history":true},["widget.form-desc-history"],0,[FBEditor.view.form.desc.history,"History"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.history.History",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.history",title:"Комментарии редактора",xtypeChild:"history"},0,["desc-fieldset-history"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-history"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-history":true},["widget.desc-fieldset-history"],0,[FBEditor.view.form.desc.fieldset.history,"History"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.periodical.PeriodicalController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{},0,0,0,0,["controller.desc.fieldset.periodical"],0,[FBEditor.view.form.desc.fieldset.periodical,"PeriodicalController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.periodical.Periodical",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-periodical",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"periodical",cls:"desc-fieldcontainer",translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 18ea4ccf-daa9-102b-9003-10751c2f945c",title:"Заголовок",issn:"ISSN",issnError:"Значение должно соответствовать шаблону d{4}-d{3}(d|X). Например: 1748-7188",desc:"Описание",number:"Номер",year:"Год",date:"Дата"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"block-container",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:a,btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:100,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"desc-field-text-required",fieldLabel:b.translateText.id,name:a+"-id",regex:/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/,regexText:b.translateText.idError},{xtype:"desc-field-number-required",name:a+"-number",fieldLabel:b.translateText.number},{xtype:"desc-field-number-required",name:a+"-year",fieldLabel:b.translateText.year},{xtype:"desc-date",name:a+"-date",fieldLabel:b.translateText.date,cls:"field-optional"},{xtype:"textfield",name:a+"-issn",regex:/^\d{4}-\d{3}(\d|X)$/,regexText:b.translateText.issnError,fieldLabel:b.translateText.issn,cls:"field-optional"},{xtype:"textfield",name:a+"-text",fieldLabel:b.translateText.desc,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:a+"-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(g){var e=this,a=e.prefixName,c=e.items,f=g,b=null;c.each(function(d){var h;h={__text:d.down("[name="+a+"-text]").getValue(),_number:d.down("[name="+a+"-number]").getValue(),_year:d.down("[name="+a+"-year]").getValue(),_date:Ext.Date.format(d.down("[name="+a+"-date]").getValue(),"Y-m-d")};h=e.removeEmptyValues(h);h={_id:d.down("[name="+a+"-id]").getValue(),title:d.down("[name="+a+"-title]").getValues(),issn:d.down("[name="+a+"-issn]").getValue(),issue:h};h=e.removeEmptyValues(h);if(h){b=b||[];b.push(h)}});if(b){f[a]=b}return f}},0,["form-desc-periodical"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-periodical"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-periodical":true},["widget.form-desc-periodical"],0,[FBEditor.view.form.desc.periodical,"Periodical"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.periodical.Periodical",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-periodical",controller:"desc.fieldset.periodical",title:"Периодическое издание",cls:"desc-fieldset-periodical",xtypeChild:"periodical"},0,["desc-fieldset-periodical"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-periodical"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-periodical":true},["widget.desc-fieldset-periodical"],0,[FBEditor.view.form.desc.fieldset.periodical,"Periodical"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.preamble.PreambleController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,b=c.getView(),a;a=b.items.first();if(a.getValue()){b.expand()}}},0,0,0,0,["controller.desc.fieldset.preamble"],0,[FBEditor.view.form.desc.fieldset.preamble,"PreambleController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.preamble.Preamble",FBEditor.view.form.desc.editor.Editor,{id:"form-desc-preamble",rootElementName:"desc:preamble",name:"preamble"},0,["form-desc-preamble"],["component","box","container","panel","form-desc-editor","form-desc-preamble"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-preamble":true},["widget.form-desc-preamble"],0,[FBEditor.view.form.desc.preamble,"Preamble"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.preamble.Preamble",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.preamble",title:"Преамбула",xtypeChild:"preamble"},0,["desc-fieldset-preamble"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-preamble"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-preamble":true},["widget.desc-fieldset-preamble"],0,[FBEditor.view.form.desc.fieldset.preamble,"Preamble"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.publishInfo.PublishInfoController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{resetFieldset:function(c){var b=this,a=b.getView(),d;d=a.getPublishTitle();d.isChanged=false;FBEditor.view.form.desc.fieldset.AbstractFieldsetController.prototype.resetFieldset.apply(this,arguments)},onExpand:function(){var b=this,a=b.getView(),c;c=a.getPublishTitle();if(!c.isChanged&&!c.getValue()){c.fireEvent("copyTitle")}}},0,0,0,0,["controller.desc.fieldset.publishInfo"],0,[FBEditor.view.form.desc.fieldset.publishInfo,"PublishInfoController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.PublishInfoController",FBEditor.view.form.desc.AbstractFieldController,{},0,0,0,0,["controller.form.desc.publishInfo"],0,[FBEditor.view.form.desc.publishInfo,"PublishInfoController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.item.PublishInfoItemController",FBEditor.view.form.desc.AbstractFieldController,{onLoadInnerData:function(e){var d=this,a=d.getView(),c,b,f;c=a.getBiblio();b=c.getName();f=e[b];if(f){c.loadData(f)}}},0,0,0,0,["controller.form.desc.publishInfo.item"],0,[FBEditor.view.form.desc.publishInfo.item,"PublishInfoItemController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.biblio.Biblio",FBEditor.view.form.desc.editor.Editor,{rootElementName:"desc:biblio-description",getName:function(){return this.name},loadData:function(d){var c=this,a=FBEditor.desc.Manager,b=c.getRootElementName();d="<"+b+' xmlns:desc="http://www.fictionbook.org/FictionBook3/description">'+d+"</"+b+">";a.createContentEditor(c,d)}},0,["form-desc-biblio-description"],["component","box","container","panel","form-desc-editor","form-desc-biblio-description"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-biblio-description":true},["widget.form-desc-biblio-description"],0,[FBEditor.view.form.desc.publishInfo.biblio,"Biblio"],0));(Ext.cmd.derive("FBEditor.view.form.desc.isbn.IsbnController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(c){var b=this,a=b.getView();if(c){c=Ext.isString(c)?{0:c}:c;Ext.Object.each(c,function(d,g){var e=a.getPlugin("fieldcontainerreplicator"),f=a.down("textfield");if(f){f.setValue(g)}if(c[parseInt(d)+1]){e.addFields();a=a.nextSibling()}})}}},0,0,0,0,["controller.form.desc.isbn"],0,[FBEditor.view.form.desc.isbn,"IsbnController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.isbn.Isbn",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.isbn",defaults:{anchor:"100%",flex:1,labelWidth:60,labelAlign:"right"},layout:"hbox",translateText:{isbn:"ISBN",isbnError:"По шаблону ([0-9]+[-s]){3,6}[0-9]*[xX0-9]. Например 978-5-358-02523-3"},fieldConfig:{},fieldName:"",initComponent:function(){var b=this,a=b.fieldName,c;b.plugins={ptype:"fieldcontainerreplicator",groupName:a,btnStyle:{margin:"0 0 0 5px"}};c={xtype:"textfield",name:a,regex:/^([0-9]+[\-\s]){3,6}[0-9]*[xX0-9]$/,regexText:b.translateText.isbnError,fieldLabel:b.translateText.isbn,labelWidth:b.labelWidth||b.defaults.labelWidth,cls:"field-optional",keyEnterAsTab:true,afterBodyEl:'<span class="after-body">'+b.translateText.isbnError+"</span>",listeners:{loadData:function(d){b.fireEvent("loadData",d)},blur:function(d){b.splitField(d)}}};Ext.apply(c,b.fieldConfig);b.items=[c];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},splitField:function(d){var e=d.getValue(),a,c,b;b=e.split(/,[ ]*/);if(b.length>1){a=d.ownerCt;Ext.Array.each(b,function(h,g){var i;c=a.getPlugin("fieldcontainerreplicator");i=a.down("textfield");i.setValue(h);if(g+1<b.length){c.addFields();a=a.nextSibling()}})}},getValues:function(){var c=this,b=c.fieldName,d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(e){if(e.getValue()){d.push(e.getValue())}});return d}},0,["form-desc-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-isbn":true},["widget.form-desc-isbn"],0,[FBEditor.view.form.desc.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.isbn.Isbn",FBEditor.view.form.desc.isbn.Isbn,{fieldConfig:{plugins:"fieldCleaner"}},0,["form-desc-publishInfo-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-isbn","form-desc-publishInfo-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-isbn":true,"form-desc-publishInfo-isbn":true},["widget.form-desc-publishInfo-isbn"],0,[FBEditor.view.form.desc.publishInfo.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.sequence.SequenceController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;Ext.Object.each(d,function(e,g){b=a.getPlugin("fieldcontainerreplicator");var f=a.down("textfield");if(f){f.setValue(g)}if(d[parseInt(e)+1]){b.addFields();a=a.nextSibling()}})}},0,0,0,0,["controller.form.desc.publishInfo.sequence"],0,[FBEditor.view.form.desc.publishInfo.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.sequence.Sequence",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.publishInfo.sequence",layout:"hbox",defaults:{anchor:"100%",flex:1,labelWidth:130,labelAlign:"right"},fieldName:"",translateText:{sequence:"Серия"},initComponent:function(){var b=this,a=b.fieldName;b.plugins={ptype:"fieldcontainerreplicator",groupName:a,btnStyle:{margin:"0 0 0 5px"}};b.items=[{xtype:"textfield",name:a,fieldLabel:b.translateText.sequence,cls:"field-optional",keyEnterAsTab:true,plugins:"fieldCleaner",listeners:{loadData:function(c){b.fireEvent("loadData",c)}}}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var c=this,b=c.fieldName,d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(e){if(e.getValue()){d.push(e.getValue())}});return d}},0,["form-desc-publishInfo-sequence"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-publishInfo-sequence"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-publishInfo-sequence":true},["widget.form-desc-publishInfo-sequence"],0,[FBEditor.view.form.desc.publishInfo.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.title.TitleController",Ext.app.ViewController,{onChange:function(){var b=this,a=b.getView();if(a.getValue()){a.isChanged=true}},onFocus:function(){var b=this,a=b.getView();if(!a.isChanged&&!a.getValue()){b.onCopyTitle()}},onCopyTitle:function(){var b=this,a=b.getView(),c;c=Ext.getCmp("form-desc-title").getMain().getValue();a.setValue(c);Ext.defer(function(){a.focus(true)},1)}},0,0,0,0,["controller.form.desc.publishInfo.title"],0,[FBEditor.view.form.desc.publishInfo.title,"TitleController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.title.Title",FBEditor.view.form.desc.field.text.required.Required,{controller:"form.desc.publishInfo.title",listeners:{change:"onChange",focus:"onFocus",copyTitle:"onCopyTitle"},isChanged:false},0,["form-desc-publishInfo-title"],["component","box","field","textfield","desc-field-text-required","form-desc-publishInfo-title"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true,"form-desc-publishInfo-title":true},["widget.form-desc-publishInfo-title"],0,[FBEditor.view.form.desc.publishInfo.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.item.PublishInfoItem",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.publishInfo.item",cls:"desc-fieldcontainer",plugins:{ptype:"fieldcontainerreplicator",groupName:"publishInfo",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},layout:"hbox",prefixName:"",_biblio:null,translateText:{title:"Название",publisher:"Издательство",city:"Город",year:"Год",biblio:"Библиограф. описание"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"block-container",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:130,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"form-desc-publishInfo-title",name:a+"-title",allowBlank:false,fieldLabel:b.translateText.title,cls:"field-required",plugins:"fieldCleaner"},{xtype:"desc-fieldcontainer",items:[{xtype:"form-desc-biblio-description",name:a+"-biblio-description"}],fieldLabel:b.translateText.biblio,cls:"field-optional"},{xtype:"textfield",name:a+"-publisher",fieldLabel:b.translateText.publisher,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"textfield",name:a+"-city",fieldLabel:b.translateText.city,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:130,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"textfield",name:a+"-year",fieldLabel:b.translateText.year,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"form-desc-publishInfo-isbn",fieldName:a+"-isbn",labelWidth:130},{xtype:"form-desc-publishInfo-sequence",fieldName:a+"-sequence"}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getBiblio:function(){var b=this,a;a=b._biblio||b.down("form-desc-biblio-description");b._biblio=a;return a}},0,["form-desc-publishInfo-item"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-publishInfo-item"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-publishInfo-item":true},["widget.form-desc-publishInfo-item"],0,[FBEditor.view.form.desc.publishInfo.item,"PublishInfoItem"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.PublishInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-publishInfo",controller:"form.desc.publishInfo",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"paper-publish-info",initComponent:function(){var a=this;a.items=[{xtype:"form-desc-publishInfo-item",prefixName:a.prefixName}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(g){var e=this,a=e.prefixName,c=e.items,f=g,b=null;c.each(function(h){var i,d,j;d=h.down("form-desc-publishInfo-isbn").getValues();j=h.down("form-desc-publishInfo-sequence").getValues();i={isbn:d,sequence:j,_publisher:h.down("[name="+a+"-publisher]").getValue(),_city:h.down("[name="+a+"-city]").getValue(),_year:h.down("[name="+a+"-year]").getValue(),_title:h.down("[name="+a+"-title]").getValue(),"biblio-description":h.down("[name="+a+"-biblio-description]").getValue()};i=e.removeEmptyValues(i);if(i){b=b||[];b.push(i)}});if(b){f[a]=b}return f}},0,["form-desc-publishInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-publishInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-publishInfo":true},["widget.form-desc-publishInfo"],0,[FBEditor.view.form.desc.publishInfo,"PublishInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.publishInfo.PublishInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-publishInfo",controller:"desc.fieldset.publishInfo",title:"Информация о бумажной публикации",xtypeChild:"publishInfo",publishTitle:null,getPublishTitle:function(){var b=this,a;a=b.publishTitle||b.down("form-desc-publishInfo-title");b.publishTitle=a;return a}},0,["desc-fieldset-publishInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-publishInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-publishInfo":true},["widget.desc-fieldset-publishInfo"],0,[FBEditor.view.form.desc.fieldset.publishInfo,"PublishInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetInnerController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{},0,0,0,0,["controller.desc.fieldsetinner"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetInnerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetInner",Ext.form.FieldSet,{controller:"desc.fieldsetinner",collapsible:true,anchor:"100%",cls:"fieldset-inner",listeners:{resetFields:"onResetFields",checkExpand:"onCheckExpand"},require:false,autoExpand:true,initComponent:function(){var b=this,a=b.require;b.collapsed=a?false:true;b.cls+=a?"":" fieldset-optional";Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,a=b.items,c=true;a.each(function(d){if(d.isValid&&!d.isValid()){c=false}});return c},getValues:function(e){var b=this,a=b.items,c=e;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c}},0,["desc-fieldsetinner"],["component","box","container","fieldset","desc-fieldsetinner"],{component:true,box:true,container:true,fieldset:true,"desc-fieldsetinner":true},["widget.desc-fieldsetinner"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetInner"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClassStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Неизвестно"},{value:"novel",name:"Роман"},{value:"story",name:"Повесть"},{value:"short_story",name:"Рассказ"},{value:"poem",name:"Стихотворение"},{value:"essay",name:"Эссе"},{value:"sketch",name:"Очерк"},{value:"article",name:"Статья"},{value:"song",name:"Песня"},{value:"play",name:"Пьеса"},{value:"interview",name:"Интервью"},{value:"monograph",name:"Монография"},{value:"letters",name:"Переписка"},{value:"diary",name:"Дневник"},{value:"speech",name:"Речь"},{value:"manual",name:"Учебник"},{value:"reference",name:"Справочник"},{value:"thesis",name:"Диссертация"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.bookClass,"BookClassStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClassController",Ext.app.ViewController,{onChange:function(c,d){var b=c,e=d,a;a=b.findRecordByValue(e);if(!a||!e){b.reset()}}},0,0,0,0,["controller.form.desc.bookClass"],0,[FBEditor.view.form.desc.bookClass,"BookClassController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClass",Ext.form.field.ComboBox,{controller:"form.desc.bookClass",listeners:{change:"onChange"},queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Литературная форма",editable:false,listConfig:{styles:{maxHeight:"auto"}},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.bookClass.BookClassStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-bookClass"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-bookClass"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-bookClass":true},["widget.form-desc-bookClass"],0,[FBEditor.view.form.desc.bookClass,"BookClass"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.bbk.field.FieldController",Ext.app.ViewController,{onPaste:function(){var c=this,a=c.getView(),b;b=a.getPlugin("fieldCleaner");b.convertVal()}},0,0,0,0,["controller.form.desc.classification.bbk.field"],0,[FBEditor.view.form.desc.classification.bbk.field,"FieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.bbk.field.Field",FBEditor.view.field.textfieldclear.TextFieldClear,{controller:"form.desc.classification.bbk.field",name:"classification-bbk",listeners:{paste:"onPaste"},plugins:{ptype:"fieldCleaner",style:"display: none"},inputAttrTpl:'spellcheck="false"',flex:1,regex:/^[\(\)=:\d\.\-A-Яа-я/\+ "]+$/,translateText:{bbk:"Код ББК",bbkError:'По шаблону [\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+'},initComponent:function(){var a=this;a.fieldLabel=a.translateText.bbk;a.regexText=a.translateText.bbkError;a.afterBodyEl='<span class="after-body">'+a.translateText.bbkError+"</span>";FBEditor.view.field.textfieldclear.TextFieldClear.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-bbk-field"],["component","box","field","textfield","textfieldclear","form-desc-classification-bbk-field"],{component:true,box:true,field:true,textfield:true,textfieldclear:true,"form-desc-classification-bbk-field":true},["widget.form-desc-classification-bbk-field"],0,[FBEditor.view.form.desc.classification.bbk.field,"Field"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.bbk.Bbk",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-classification-bbk",name:"form-desc-plugin-fieldcontainerreplicator",flex:1,layout:"anchor",initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%",labelAlign:"right",labelWidth:100,cls:"field-optional",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-bbk",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"form-desc-classification-bbk-field"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-bbk"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-bbk"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-bbk":true},["widget.form-desc-classification-bbk"],0,[FBEditor.view.form.desc.classification.bbk,"Bbk"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.setting.Setting",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"hbox",translateText:{desc:"Описание",country:"Страна",place:"Место",date:"Дата",dateFrom:"Дата начала",dateTo:"Дата окончания",age:"Век"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"textfield",name:"classification-setting-age",fieldLabel:a.translateText.age},{xtype:"countryfield",name:"classification-setting-country",fieldLabel:a.translateText.country},{xtype:"textfield",name:"classification-setting-place",fieldLabel:a.translateText.place,plugins:"fieldCleaner"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"desc-date",name:"classification-setting-date",fieldLabel:a.translateText.date},{xtype:"desc-date",name:"classification-setting-date-from",fieldLabel:a.translateText.dateFrom},{xtype:"desc-date",name:"classification-setting-date-to",fieldLabel:a.translateText.dateTo},{xtype:"textfield",name:"classification-setting-text",fieldLabel:a.translateText.desc,plugins:"fieldCleaner"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var b=this,c,a={__text:b.down("[name=classification-setting-text]").getValue(),_country:b.down("[name=classification-setting-country]").getValue(),_place:b.down("[name=classification-setting-place]").getValue(),_age:b.down("[name=classification-setting-age]").getValue(),_date:Ext.Date.format(b.down("[name=classification-setting-date]").getValue(),"Y-m-d"),"_date-from":Ext.Date.format(b.down("[name=classification-setting-date-from]").getValue(),"Y-m-d"),"_date-to":Ext.Date.format(b.down("[name=classification-setting-date-to]").getValue(),"Y-m-d")};c=b.removeEmptyValues(a);return c}},0,["form-desc-classification-setting"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-setting"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-setting":true},["widget.form-desc-classification-setting"],0,[FBEditor.view.form.desc.classification.setting,"Setting"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.EducationStore",Ext.data.Store,{fields:["value","name"],data:[{value:"none",name:"без образования"},{value:"preschool_education",name:"дошкольное образование"},{value:"primary_education",name:"начальное общее образование"},{value:"basic_education",name:"основное общее"},{value:"secondary_education",name:"среднее (полное) общее"},{value:"technical_school_first_cycle",name:"начальное профессиональное"},{value:"technical_school_second_cycle",name:"среднее профессиональное"},{value:"higher_education",name:"высшее профессиональное"},{value:"university_postgraduate",name:"послевузовское профессиональное"},{value:"vocational_training",name:"профессиональная подготовка"},{value:"additional_education",name:"дополнительное образование"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.classification.target,"EducationStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.EducationController",Ext.app.ViewController,{onChange:function(c,d){var b=c,e=d,a;a=b.findRecordByValue(e);if(!a){b.setValue("")}}},0,0,0,0,["controller.form.desc.classification.target.education"],0,[FBEditor.view.form.desc.classification.target,"EducationController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.Education",Ext.form.field.ComboBox,{controller:"form.desc.classification.target.education",queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Образование",editable:false,listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.classification.target.EducationStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-target-education"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-classification-target-education"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-classification-target-education":true},["widget.form-desc-classification-target-education"],0,[FBEditor.view.form.desc.classification.target,"Education"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMinController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.expand()}},0,0,0,0,["controller.form.desc.classification.target.agemin"],0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMinController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMinStore",Ext.data.Store,{fields:["value","name"],data:[{value:"0",name:"0"},{value:"6",name:"6"},{value:"12",name:"12"},{value:"16",name:"16"},{value:"18",name:"18"},{value:"21",name:"21"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMinStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMin",Ext.form.field.ComboBox,{controller:"form.desc.classification.target.agemin",queryMode:"local",displayField:"name",valueField:"value",listeners:{click:{element:"el",fn:"onClick"}},initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.form.desc.classification.target.ageMin.AgeMinStore");Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-target-agemin"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-classification-target-agemin"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-classification-target-agemin":true},["widget.form-desc-classification-target-agemin"],0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMin"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.Target",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"hbox",translateText:{desc:"Описание",minAge:"Мин возраст",maxAge:"Макс возраст"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"form-desc-classification-target-agemin",name:"classification-target-audience-age-min",fieldLabel:a.translateText.minAge},{xtype:"form-desc-classification-target-education",name:"classification-target-audience-education"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"numberfield",name:"classification-target-audience-age-max",fieldLabel:a.translateText.maxAge,minValue:2,maxValue:150},{xtype:"textfield",name:"classification-target-audience-text",fieldLabel:a.translateText.desc,plugins:"fieldCleaner"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var b=this,c,a={__text:b.down("[name=classification-target-audience-text]").getValue(),_education:b.down("[name=classification-target-audience-education]").getValue(),"_age-min":b.down("[name=classification-target-audience-age-min]").getValue(),"_age-max":b.down("[name=classification-target-audience-age-max]").getValue()};c=b.removeEmptyValues(a);return c}},0,["form-desc-classification-target"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-target"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-target":true},["widget.form-desc-classification-target"],0,[FBEditor.view.form.desc.classification.target,"Target"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.udc.field.FieldController",Ext.app.ViewController,{onPaste:function(){var c=this,a=c.getView(),b;b=a.getPlugin("fieldCleaner");b.convertVal()}},0,0,0,0,["controller.form.desc.classification.udc.field"],0,[FBEditor.view.form.desc.classification.udc.field,"FieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.udc.field.Field",FBEditor.view.field.textfieldclear.TextFieldClear,{controller:"form.desc.classification.udc.field",name:"classification-udc",listeners:{paste:"onPaste"},plugins:{ptype:"fieldCleaner",style:"display: none"},inputAttrTpl:'spellcheck="false"',flex:1,regex:/^[\d\. \-\*\(\):\[\]\+:=&quot;«»'/A-Яа-я]+$/,translateText:{udc:"Код УДК",udcError:"По шаблону [\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»'/A-Яа-я]+"},initComponent:function(){var a=this;a.fieldLabel=a.translateText.udc;a.regexText=a.translateText.udcError;a.afterBodyEl='<span class="after-body">'+a.translateText.udcError+"</span>";FBEditor.view.field.textfieldclear.TextFieldClear.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-udc-field"],["component","box","field","textfield","textfieldclear","form-desc-classification-udc-field"],{component:true,box:true,field:true,textfield:true,textfieldclear:true,"form-desc-classification-udc-field":true},["widget.form-desc-classification-udc-field"],0,[FBEditor.view.form.desc.classification.udc.field,"Field"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.udc.Udc",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-classification-udc",name:"form-desc-plugin-fieldcontainerreplicator",flex:1,layout:"anchor",initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%",labelAlign:"right",labelWidth:100,cls:"field-optional",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-udc",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"form-desc-classification-udc-field"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-udc"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-udc"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-udc":true},["widget.form-desc-classification-udc"],0,[FBEditor.view.form.desc.classification.udc,"Udc"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectController",FBEditor.view.form.desc.AbstractFieldController,{},0,0,0,0,["controller.form.desc.subject"],0,[FBEditor.view.form.desc.subject,"SubjectController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.field.SubjectFieldController",Ext.app.ViewController,{onChange:function(){var d=this,a=d.getView(),c=a.getSubject(),b=FBEditor.desc.Manager;if(!b.loadingProcess){}else{if(a.isEmptyValue()){a.setRawValue("");a.setFieldLabel(c.translateText.undefined)}}},onBlur:function(g){var f=this,b=f.getView(),h=b.getValue(),d=b.getSubject(),c=d.nextSibling(),a=d.previousSibling(),e;if(!c&&a&&!h){Ext.defer(function(){e=d.getPlugin("fieldcontainerreplicator");e.removeFields()},100)}else{f.splitField(g)}},splitField:function(g){var f=this,b=f.getView(),h=g.getValue(),a,e,c,d;d=new RegExp(b.separator+"[ ]*");c=h.split(d);if(c.length>1){a=g.ownerCt;Ext.Array.each(c,function(j,i){var k;e=a.getPlugin("fieldcontainerreplicator");k=a.down("textfield");k.setValue(j);if(i+1<c.length){e.addFields();a=a.nextSibling()}})}}},0,0,0,0,["controller.form.desc.subject.field"],0,[FBEditor.view.form.desc.subject.field,"SubjectFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.field.SubjectField",FBEditor.view.form.desc.field.text.required.Required,{controller:"form.desc.subject.field",name:"classification-subject",listeners:{change:"onChange",blur:"onBlur"},checkChangeBuffer:200,translateText:{tip:"Допустимо вводить несколько жанров/тегов через"},separator:";",emptyValue:"Не определён",subject:null,initComponent:function(){var b=this,a=b.translateText,c;c='<span class="after-body">%t %s</span>'.replace("%t",a.tip).replace("%s",b.separator);b.afterBodyEl=c;FBEditor.view.form.desc.field.text.required.Required.prototype.initComponent.apply(this,arguments)},getSubject:function(){var b=this,a;a=b.subject||b.up("form-desc-subject");b.subject=a;return a},isEmptyValue:function(){var b=this,c=b.getValue(),a;a=c===b.emptyValue;return a}},0,["form-desc-subject-field"],["component","box","field","textfield","desc-field-text-required","form-desc-subject-field"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true,"form-desc-subject-field":true},["widget.form-desc-subject-field"],0,[FBEditor.view.form.desc.subject.field,"SubjectField"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.Subject",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.subject",plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-subject",btnStyle:{margin:"0 0 0 5px"}},layout:"hbox",translateText:{undefined:"Жанр/Тег",tip:"Допустимо вводить несколько жанров/тегов через запятую"},subjectField:null,initComponent:function(){var b=this,a=b.translateText;b.items=[{xtype:"form-desc-subject-field",flex:1,fieldLabel:a.undefined,labelAlign:"right",labelWidth:110,keyEnterAsTab:true}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getSubjectField:function(){var b=this,a;a=b.subjectField||b.down("form-desc-subject-field");b.subjectField=a;return a}},0,["form-desc-subject"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-subject"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-subject":true},["widget.form-desc-subject"],0,[FBEditor.view.form.desc.subject,"Subject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.AbstractDateText",Ext.form.Text,{plugins:"fieldCleaner",listeners:{blur:function(){this.onBlur()}},fieldDateValue:null,onBlur:function(){var c=this,a=c.getValue(),b,d;d=c.getFieldDateValue();b=d.getRawValue();if(/^[0-9]{4}$/.test(a)){a=c.getValue()}if(!b&&/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(a)){d.setRawValue(a)}},getFieldDateValue:function(){var a=this,b;b=a.fieldDateValue||a.prev();return b}},0,0,["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},0,0,[FBEditor.view.form.desc.written.date,"AbstractDateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.date.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-text"],["component","box","field","textfield","form-desc-written-date-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-text":true},["widget.form-desc-written-date-text"],0,[FBEditor.view.form.desc.written.date.date,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.AbstractDateValue",FBEditor.view.form.desc.date.Date,{listeners:{beforeblur:function(){this.onBlurField()}},fieldDateText:null,onBlurField:function(){var c=this,b=c.getRawValue(),a,d;d=c.getFieldDateText();a=d.getRawValue();if(!a){d.setValue(b)}},getFieldDateText:function(){var a=this,b;b=a.fieldDateText||a.next();return b}},0,0,["component","box","field","textfield","pickerfield","datefield","desc-date"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true},0,0,[FBEditor.view.form.desc.written.date,"AbstractDateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.date.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-value":true},["widget.form-desc-written-date-value"],0,[FBEditor.view.form.desc.written.date.date,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.publicated.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-publicated-text"],["component","box","field","textfield","form-desc-written-date-publicated-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-publicated-text":true},["widget.form-desc-written-date-publicated-text"],0,[FBEditor.view.form.desc.written.date.publicated,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.publicated.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-publicated-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-publicated-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-publicated-value":true},["widget.form-desc-written-date-publicated-value"],0,[FBEditor.view.form.desc.written.date.publicated,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.translated.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-translated-text"],["component","box","field","textfield","form-desc-written-date-translated-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-translated-text":true},["widget.form-desc-written-date-translated-text"],0,[FBEditor.view.form.desc.written.date.translated,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.translated.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-translated-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-translated-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-translated-value":true},["widget.form-desc-written-date-translated-value"],0,[FBEditor.view.form.desc.written.date.translated,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.Written",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-written",layout:"hbox",prefixName:"written",translateText:{lang:"Язык",writtenLang:"Язык оригинала",date:"Дата ",dateText:"Дата текстом",country:"Страна",translated:"Дата перевода",translatedText:"Дата перевода текстом",datePublic:"Дата публикации",datePublicText:"Дата публикации текстом"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"langfield",name:"lang",fieldLabel:b.translateText.lang,allowBlank:false,forceSelection:true,value:"ru",listeners:{afterrender:function(){var d=this,c=d.getStore();c.remove([0,1])}}},{xtype:"langfield",name:a+"-lang",fieldLabel:b.translateText.writtenLang,forceSelection:true,cls:"field-optional"},{xtype:"countryfield",name:a+"-country",fieldLabel:b.translateText.country,cls:"field-optional"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"form-desc-written-date-value",name:a+"-date-value",fieldLabel:b.translateText.date},{xtype:"form-desc-written-date-text",name:a+"-date-text",fieldLabel:b.translateText.dateText},{xtype:"form-desc-written-date-translated-value",name:"translated-value",fieldLabel:b.translateText.translated},{xtype:"form-desc-written-date-translated-text",name:"translated-text",fieldLabel:b.translateText.translatedText},{xtype:"form-desc-written-date-publicated-value",name:a+"-date-public-value",fieldLabel:b.translateText.datePublic},{xtype:"form-desc-written-date-publicated-text",name:a+"-date-public-text",fieldLabel:b.translateText.datePublicText}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,b;b=FBEditor.view.form.desc.AbstractFieldContainer.prototype.isValid.call(this);a.down("langfield").isValid();return b},getValues:function(g){var e=this,b=e.prefixName,f=g,c,a;f.lang=e.down(e.down("[name=lang]")).getValue();c={_value:Ext.Date.format(e.down(e.down("[name="+b+"-date-value]")).getValue(),"Y-m-d"),__text:e.down(e.down("[name="+b+"-date-text]")).getValue()};c=e.removeEmptyValues(c);a={_value:Ext.Date.format(e.down(e.down("[name="+b+"-date-public-value]")).getValue(),"Y-m-d"),__text:e.down(e.down("[name="+b+"-date-public-text]")).getValue()};a=e.removeEmptyValues(a);c={lang:e.down(e.down("[name="+b+"-lang]")).getValue(),date:c,country:e.down(e.down("[name="+b+"-country]")).getValue(),"date-public":a};c=e.removeEmptyValues(c);if(c){f[b]=c}c={_value:Ext.Date.format(e.down(e.down("[name=translated-value]")).getValue(),"Y-m-d"),__text:e.down(e.down("[name=translated-text]")).getValue()};c=e.removeEmptyValues(c);if(c){f.translated=c}return f}},0,["form-desc-written"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-written"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-written":true},["widget.form-desc-written"],0,[FBEditor.view.form.desc.written,"Written"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.Classification",FBEditor.view.form.desc.AbstractFieldContainer,{cls:"desc-fieldcontainer",translateText:{info:"Общая информация",bookClass:"Литературная форма",contents:"Тип лит. формы",target:"Целевая аудитория",setting:"Привязка к месту и времени",codes:"Коды",udc:"Код УДК",bbk:"Код ББК",udcError:"По шаблону [\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»'/A-Яа-я]+",bbkError:'По шаблону [\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+',written:"Дата и место написания",keywords:"Ключевые слова",keywordsHelp:"Перечислите через запятую. Например 1912, война, роман, отечественная, наполеон, кутузов"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldsetinner",title:a.translateText.info,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"classification-custom-subject",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"form-desc-bookClass",name:"classification-class-text",fieldLabel:a.translateText.bookClass,cls:"field-optional"},{xtype:"hiddenfield",name:"classification-class-contents",value:"standalone",fieldLabel:a.translateText.contents}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"form-desc-subject",flex:1,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"form-desc-subject"}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.target,items:[{xtype:"form-desc-classification-target"}]},{xtype:"desc-fieldsetinner",title:a.translateText.setting,items:[{xtype:"form-desc-classification-setting"}]},{xtype:"desc-fieldsetinner",layout:"hbox",title:a.translateText.codes,require:true,items:[{xtype:"form-desc-classification-udc"},{xtype:"fieldcontainer",width:10},{xtype:"form-desc-classification-bbk"}]},{xtype:"desc-fieldsetinner",title:a.translateText.written,require:true,items:[{xtype:"form-desc-written"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(f){var c=this,e=f,b={},a;a=c.down("form-desc-bookClass").getValue();if(a){b["class"]={_contents:c.down("[name=classification-class-contents]").getValue(),__text:a}}b.subject=c.getDataFields(c.query("[name=classification-subject]"));b["target-audience"]=c.down("form-desc-classification-target").getValues();b.setting=c.down("form-desc-classification-setting").getValues();b.udc=c.getDataFields(c.query("[name=classification-udc]"));b.bbk=c.getDataFields(c.query("[name=classification-bbk]"));e["fb3-classification"]=c.removeEmptyValues(b);e=c.down("form-desc-written").getValues(e);return e}},0,["form-desc-classification"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification":true},["widget.form-desc-classification"],0,[FBEditor.view.form.desc.classification,"Classification"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Classification",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Классификация произведения",xtypeChild:"classification",require:true},0,["desc-fieldset-classification"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-classification"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-classification":true},["widget.desc-fieldset-classification"],0,[FBEditor.view.form.desc.fieldset,"Classification"],0));(Ext.cmd.derive("FBEditor.view.form.desc.customInfo.CustomInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-customInfo",name:"form-desc-plugin-fieldcontainerreplicator",cls:"desc-fieldcontainer",translateText:{infoType:"Тип",desc:"Описание"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",defaults:{anchor:"100%",labelAlign:"right",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"customInfo",btnPos:"end",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"desc-field-text-required",name:"custom-info-info-type",flex:1,labelWidth:60,fieldLabel:a.translateText.infoType},{xtype:"desc-fieldcontainer",layout:"hbox",flex:3,items:[{xtype:"displayfield",fieldLabel:a.translateText.desc,labelAlign:"right",labelWidth:160},{xtype:"desc-field-textarea-required",cls:"custom-info-text",name:"custom-info-text",flex:1,height:100,plugins:{ptype:"fieldCleaner",style:"right: 17px; margin-top: -22px"},resizable:{handles:"s",minHeight:50,pinned:true}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(f){var c=this,b=c.items,e=f,a=null;b.each(function(d){var g;g={__text:d.down("[name=custom-info-text]").getValue(),"_info-type":d.down("[name=custom-info-info-type]").getValue()};g=c.removeEmptyValues(g);if(g){a=a||[];a.push(g)}});if(a){e["custom-info"]=a}return e}},0,["form-desc-customInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-customInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-customInfo":true},["widget.form-desc-customInfo"],0,[FBEditor.view.form.desc.customInfo,"CustomInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.CustomInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Пользовательская информация",xtypeChild:"customInfo"},0,["desc-fieldset-customInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-customInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-customInfo":true},["widget.desc-fieldset-customInfo"],0,[FBEditor.view.form.desc.fieldset,"CustomInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.createdDate.CreatedDate",FBEditor.view.form.desc.date.Date,{allowBlank:false,value:new Date(),_cls:"field-required",listeners:{change:function(){this.checkChangeCls()}},checkChangeCls:function(){this.mixins.fieldRequired.checkChangeCls.call(this)}},0,["form-desc-documentInfo-createdDate"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-documentInfo-createdDate"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-documentInfo-createdDate":true},["widget.form-desc-documentInfo-createdDate"],[["fieldRequired",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.documentInfo.createdDate,"CreatedDate"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.editor.EditorController",Ext.app.ViewController,{onChange:function(){var c=this,a=c.getView(),b=FBEditor.getLocalStorage(),d=a.getValue();b.setItem("form-desc-documentInfo-editor",d)}},0,0,0,0,["controller.form.desc.documentInfo.editor"],0,[FBEditor.view.form.desc.documentInfo.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.editor.Editor",Ext.form.field.Text,{controller:"form.desc.documentInfo.editor",listeners:{change:"onChange"},initComponent:function(){var b=this,a=FBEditor.getLocalStorage(),c;c=a.getItem("form-desc-documentInfo-editor")||"";b.value=c;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)}},0,["form-desc-documentInfo-editor"],["component","box","field","textfield","form-desc-documentInfo-editor"],{component:true,box:true,field:true,textfield:true,"form-desc-documentInfo-editor":true},["widget.form-desc-documentInfo-editor"],0,[FBEditor.view.form.desc.documentInfo.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.isbn.IsbnController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;b=a.down("form-desc-isbn");b.fireEvent("loadData",d)}},0,0,0,0,["controller.form.desc.documentInfo.isbn"],0,[FBEditor.view.form.desc.documentInfo.isbn,"IsbnController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.isbn.Isbn",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-documentInfo-isbn",controller:"form.desc.documentInfo.isbn",flex:1,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"form-desc-isbn",fieldName:"document-info-isbn"}]},0,["form-desc-documentInfo-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-documentInfo-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-documentInfo-isbn":true},["widget.form-desc-documentInfo-isbn"],0,[FBEditor.view.form.desc.documentInfo.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.DocumentInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-documentInfo",cls:"desc-fieldcontainer",translateText:{created:"Файл создан",date:"Дата",time:"Время",updated:"Последнее изменение",otherInfo:"Прочая информация",programUsed:"Программа",srcUrl:"URL",ocr:"OCR",editor:"Редактор",isbn:"ISBN"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldsetinner",title:a.translateText.created,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"form-desc-documentInfo-createdDate",name:"document-info-created-date",fieldLabel:a.translateText.date}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:110,keyEnterAsTab:true},items:[{xtype:"desc-field-time-required",name:"document-info-created-time",value:new Date(),format:"H:i:s",fieldLabel:a.translateText.time}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.updated,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-updated-date",fieldLabel:a.translateText.date}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:110,keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-updated-time",format:"H:i:s",fieldLabel:a.translateText.time}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.otherInfo,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{xtype:"textfield",anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-program-used",fieldLabel:a.translateText.programUsed,value:"FB3Editor"},{xtype:"form-desc-documentInfo-editor",name:"document-info-editor",fieldLabel:a.translateText.editor}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{xtype:"textfield",anchor:"100%",labelAlign:"right",labelWidth:110,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"textfieldclear",vtype:"url",name:"document-info-src-url",fieldLabel:a.translateText.srcUrl},{name:"document-info-ocr",fieldLabel:a.translateText.ocr}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.isbn,items:[{xtype:"form-desc-documentInfo-isbn",fieldName:"document-info-isbn"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(h){var e=this,f=h,i,a,g,b,c;i=Ext.Date.format(e.down("[name=document-info-created-date]").getValue(),"Y-m-d");g=Ext.Date.format(e.down("[name=document-info-created-time]").getValue(),"H:i:s");i=i&&g?i+"T"+g:null;a=Ext.Date.format(new Date(),"Y-m-d");g=Ext.Date.format(new Date(),"H:i:s");a=a&&g?a+"T"+g:null;c=e.down("form-desc-documentInfo-isbn").getValues();b={_created:i,_updated:a,"_program-used":e.down("[name=document-info-program-used]").getValue(),"_src-url":e.down("[name=document-info-src-url]").getValue(),_ocr:e.down("[name=document-info-ocr]").getValue(),_editor:e.down("[name=document-info-editor]").getValue(),isbn:c};f["document-info"]=e.removeEmptyValues(b);return f}},0,["form-desc-documentInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-documentInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-documentInfo":true},["widget.form-desc-documentInfo"],0,[FBEditor.view.form.desc.documentInfo,"DocumentInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.DocumentInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Информация о файле",xtypeChild:"documentInfo",require:true,autoExpand:true},0,["desc-fieldset-documentInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-documentInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-documentInfo":true},["widget.desc-fieldset-documentInfo"],0,[FBEditor.view.form.desc.fieldset,"DocumentInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.item.ObjectItemController",FBEditor.view.form.desc.AbstractFieldController,{onResetContainer:function(){var b=this,a=b.getView()}},0,0,0,0,["controller.form.desc.relations.object.item"],0,[FBEditor.view.form.desc.relations.object.item,"ObjectItemController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.CustomContainerController",FBEditor.view.form.desc.AbstractFieldController,{},0,0,0,0,["controller.form.desc.relations.object.container.custom"],0,[FBEditor.view.form.desc.relations.object,"CustomContainerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.LinkStore",Ext.data.Store,{sorters:[{property:"name",direction:"ASC"}],fields:["value","name"],data:[{value:"preceding_edition",name:"Прошлое издание"},{value:"following_edition",name:"Следующее издание"},{value:"translated_from",name:"Переведено с издания"},{value:"translation",name:"Перевод"},{value:"compilation",name:"Сборник, включающий это произведение"},{value:"part",name:"Часть, включенная в произведение"},{value:"appendix",name:"Приложение"},{value:"appendix_to",name:"Эта книга - приложение к"},{value:"intersection",name:"Пересекается с"},{value:"same_subject",name:"Тот же объект"},{value:"alt_media",name:"Другой носитель"},{value:"sequel",name:"Продолжение"},{value:"prequel",name:"Приквел"},{value:"reissue",name:"Переиздание"},{value:"alt_translation",name:"Другой перевод"},{value:"alt_translation_and_media",name:"Другой перевод на другом носителе"},{value:"alt_translation_compilation",name:"Сборник (другой перевод)"},{value:"alt_translation_part",name:"Часть (другой перевод)"},{value:"undef",name:"Не определено"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.relations.object,"LinkStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.Link",FBEditor.view.form.desc.field.combobox.required.Required,{queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Тип связи",name:"relations-object-link",allowBlank:false,editable:false,listConfig:{style:{maxHeight:"auto"}},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.relations.object.LinkStore");b.store=a;FBEditor.view.form.desc.field.combobox.required.Required.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-object-link"],["component","box","field","textfield","pickerfield","combobox","combo","desc-field-combobox-required","form-desc-relations-object-link"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"desc-field-combobox-required":true,"form-desc-relations-object-link":true},["widget.form-desc-relations-object-link"],0,[FBEditor.view.form.desc.relations.object,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.object.container.custom",layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",link:"Тип связи",desc:"Написание",pageEditor:"Страница редактирования"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:100,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:a.translateText.id,name:"relations-object-id",listeners:{afterrender:function(){a.setObjectId(this)}}},{xtype:"form-desc-relations-object-link",cls:"field-required"},{fieldLabel:a.translateText.desc,name:"relations-object-description",cls:"field-optional",plugins:"fieldCleaner"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:"relations-object-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,c=a.getValue(),b;b=c&&(c._link||c.title&&c.title.main)?FBEditor.view.form.desc.AbstractFieldContainer.prototype.isValid.apply(this,arguments):true;return b},getValue:function(){var a=this,b;b={_id:a.down("[name=relations-object-id]").getValue(),_link:a.down("form-desc-relations-object-link").getValue(),title:a.down("[name=relations-object-title]").getValues(),description:a.down("[name=relations-object-description]").getValue()};b=a.removeEmptyValues(b);return b},setObjectId:function(d){var c=this,e={},a=d,b=FBEditor.desc.Manager,f;f=a.getValue();if(!f){f=b.getNewId();e["relations-object-id"]=f;c.updateData(e)}}},0,["form-desc-relations-object-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object-container-custom":true},["widget.form-desc-relations-object-container-custom"],0,[FBEditor.view.form.desc.relations.object,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.item.ObjectItem",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.object.item",cls:"desc-fieldcontainer",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"object",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},listeners:{resetContainer:"onResetContainer"},_customContainer:null,initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"anchor",flex:1,items:[{xtype:"form-desc-relations-object-container-custom"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,b=a.getCustomContainer(),c;c=b.isValid();return c},getValues:function(){var b=this,c=b.getCustomContainer(),a;a=c.getValue();return a},getCustomContainer:function(){var b=this,a=b._customContainer;a=a||b.down("form-desc-relations-object-container-custom");b._customContainer=a;return a}},0,["form-desc-relations-object-item"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object-item"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object-item":true},["widget.form-desc-relations-object-item"],0,[FBEditor.view.form.desc.relations.object.item,"ObjectItem"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.Object",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-relations-object",name:"form-desc-plugin-fieldcontainerreplicator",initComponent:function(){var a=this;a.items=[{xtype:"form-desc-relations-object-item"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,a=b.items,c=true;a.each(function(d){if(!d.isValid()){c=false;return false}});return c},getValues:function(f){var c=this,b=c.items,e=f,a=null;b.each(function(d){var g;g=d.getValues();if(g&&!c.valContains(g,a)){a=a||[];a.push(g)}});if(a){e["fb3-relations"]=e["fb3-relations"]||{};e["fb3-relations"].object=a}return e},valContains:function(c,a){var b=false;Ext.each(a,function(d){if(c._id===d._id&&c._link===d._link){b=true;return false}});return b}},0,["form-desc-relations-object"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object":true},["widget.form-desc-relations-object"],0,[FBEditor.view.form.desc.relations.object,"Object"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.RelationsObject",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-relations-object",title:"Связанные объекты",xtypeChild:"relations-object"},0,["desc-fieldset-relations-object"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-relations-object"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-relations-object":true},["widget.desc-fieldset-relations-object"],0,[FBEditor.view.form.desc.fieldset,"RelationsObject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.CustomContainerController",FBEditor.view.form.desc.AbstractFieldController,{onShowCustom:function(b){var c=this,a=c.getView();a.setVisible(b)},onShowEditor:function(b){var d=this,a=d.getView(),c;c=a.getCustomEditor();c.setVisible(b)},onShowViewer:function(b){var c=this,a=c.getView(),d;d=a.getCustomViewer();d.setVisible(b)},onStateSwitcher:function(d){var c=this,a=c.getView(),e,b;e=a.getCustomViewer();b=e.getSwitcher();b.setStateCmp(d)}},0,0,0,0,["controller.form.desc.relations.subject.container.custom"],0,[FBEditor.view.form.desc.relations.subject,"CustomContainerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.editor.EditorController",FBEditor.view.form.desc.AbstractFieldController,{},0,0,0,0,["controller.form.desc.relations.subject.custom.editor"],0,[FBEditor.view.form.desc.relations.subject.custom.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.editor.uuid.Uuid",FBEditor.view.form.desc.field.link.uuid.Link,{afterRender:function(){var b=this,c=b.getValue(),a=FBEditor.desc.Manager,d;FBEditor.view.form.desc.field.link.uuid.Link.prototype.afterRender.apply(this,arguments);if(!c){d=a.getNewId();b.setValue(d)}}},0,["form-desc-relations-subject-custom-editor-uuid"],["component","box","field","displayfield","form-desc-field-link","form-desc-field-link-uuid","form-desc-relations-subject-custom-editor-uuid"],{component:true,box:true,field:true,displayfield:true,"form-desc-field-link":true,"form-desc-field-link-uuid":true,"form-desc-relations-subject-custom-editor-uuid":true},["widget.form-desc-relations-subject-custom-editor-uuid"],0,[FBEditor.view.form.desc.relations.subject.custom.editor.uuid,"Uuid"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.NameController",Ext.app.ViewController,{onChange:function(){var b=this,a=b.getView(),d=FBEditor.desc.Manager.loadingProcess,c;if(!d){c=a.getTitle();c.autoValue()}},onFocus:function(){}},0,0,0,0,["controller.form.desc.relations.subject.name"],0,[FBEditor.view.form.desc.relations.subject.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.Name",Ext.form.field.Text,{controller:"form.desc.relations.subject.name",checkChangeBuffer:200,plugins:[{ptype:"fieldCleaner"}],titleMain:null,listeners:{change:"onChange",focus:"onFocus"},getTitle:function(){var b=this,a;a=b.titleMain||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down("form-desc-relations-subject-title");return a},getResultContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-persons")},getArtsContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-arts")},afterLoad:function(c){var b=this,a;a=b.getPlugin("searchField");if(c){a.hideLoader()}else{a.emptyLoader()}}},0,["form-desc-relations-subject-name"],["component","box","field","textfield","form-desc-relations-subject-name"],{component:true,box:true,field:true,textfield:true,"form-desc-relations-subject-name":true},["widget.form-desc-relations-subject-name"],0,[FBEditor.view.form.desc.relations.subject.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.main.Main",FBEditor.view.form.desc.relations.subject.name.Name,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;FBEditor.view.form.desc.relations.subject.name.Name.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["form-desc-relations-subject-name-main"],["component","box","field","textfield","form-desc-relations-subject-name","form-desc-relations-subject-name-main"],{component:true,box:true,field:true,textfield:true,"form-desc-relations-subject-name":true,"form-desc-relations-subject-name-main":true},["widget.form-desc-relations-subject-name-main"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.relations.subject.name.main,"Main"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.alt.AltController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(e){var c=this,a=c.getView(),f=e,b;f=Ext.isObject(f)?f:{0:f};Ext.Object.each(f,function(d,h){var g;b=a.getPlugin("fieldcontainerreplicator");g=a.down("textfield");if(g){g.setValue(h)}if(f[parseInt(d)+1]){b.addFields();a=a.nextSibling()}})}},0,0,0,0,["controller.form.desc.title.alt"],0,[FBEditor.view.form.desc.title.alt,"AltController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.alt.Alt",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.title.alt",layout:"hbox",cls:"form-desc-title-alt",defaults:{anchor:"100%",flex:1,labelWidth:160,labelAlign:"right"},fieldLabelAlt:"",fieldName:"",initComponent:function(){var c=this,b=c.fieldName+"-alt",d,a;a={ptype:"fieldcontainerreplicator",groupName:b,btnStyle:{margin:"0 0 0 2px"}};Ext.applyIf(c.plugins,a);d={xtype:"textfield",name:b,fieldLabel:c.fieldLabelAlt,cls:"field-optional",keyEnterAsTab:true,plugins:{ptype:"fieldCleaner"},listeners:{loadData:function(e){c.fireEvent("loadData",e)},resize:function(e,h){var f,g;f=e.labelEl;g=f.first();e._label=e._label?e._label:{width:null,fontSize:null};if(h<300){e._label.width=e._label.width||f.getWidth();e._label.fontSize=e._label.fontSize||g.getStyle("fontSize");f.setWidth(100);g.setWidth(100);g.setStyle("fontSize","11px")}else{if(e._label.width){f.setWidth(e._label.width);g.setWidth(e._label.width);g.setStyle("fontSize",e._label.fontSize)}}}}};Ext.apply(d,c.fieldConfig);c.items=[d];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var c=this,b=c.fieldName+"-alt",d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(e){if(e.getValue()){d.push(e.getValue())}});return d}},0,["form-desc-title-alt"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title-alt"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title-alt":true},["widget.form-desc-title-alt"],0,[FBEditor.view.form.desc.title.alt,"Alt"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.Title",FBEditor.view.form.desc.AbstractFieldContainer,{cls:"form-desc-title",checkChangeBuffer:200,enableSub:true,enableAlt:true,mainConfig:{},subConfig:{},altConfig:{},translateText:{main:"Основное название",sub:"Подзаголовок",alt:"Альтернативное название"},initComponent:function(){var e=this,c=e.name,b=[],a,d,f;a={xtype:"desc-field-text-required",checkChangeBuffer:e.checkChangeBuffer,name:c+"-main",fieldLabel:e.translateText.main,keyEnterAsTab:true,plugins:{ptype:"fieldCleaner"},listeners:{change:function(i,h,g){this.ownerCt.fireEvent("changeTitle",i,h,g)},blur:function(g){this.ownerCt.fireEvent("blurTitle",g)},focus:function(g){this.ownerCt.fireEvent("focusTitle",g)}}};Ext.apply(a,e.mainConfig);b.push(a);if(e.enableSub){d={xtype:"textfield",name:c+"-sub",cls:"field-optional",keyEnterAsTab:true,fieldLabel:e.translateText.sub,plugins:{ptype:"fieldCleaner"}};b.push(d);Ext.apply(d,e.subConfig)}if(e.enableAlt){f={xtype:"form-desc-title-alt",fieldName:c,fieldLabelAlt:e.translateText.alt};b.push(f);Ext.apply(f,e.altConfig)}e.items=b;FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getMain:function(){var c=this,b=c.name,a;a=c.main||c.down("[name="+b+"-main]");return a},getValues:function(h){var e=this,f=h,b=e.name,a,c,g;c=e.down("[name="+b+"-sub]");g=e.down("form-desc-title-alt");a={main:e.getMain().getValue(),sub:c?c.getValue():null,alt:g?g.getValues():null};a=e.removeEmptyValues(a);if(h){f[b]=a}else{f=a}return f}},0,["form-desc-title"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true},["widget.form-desc-title"],0,[FBEditor.view.form.desc.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.title.TitleController",FBEditor.view.form.desc.AbstractFieldController,{onChangeTitle:function(e,c){var d=this,b=d.getView(),a,f;a=b.getCustomContainer();f=a.getCustomViewer();f.fireEvent("setTitle",c);b.autoFilled=false}},0,0,0,0,["controller.form.desc.relations.subject.title"],0,[FBEditor.view.form.desc.relations.subject.title,"TitleController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.title.Title",FBEditor.view.form.desc.title.Title,{controller:"form.desc.relations.subject.title",listeners:{changeTitle:"onChangeTitle"},layout:"anchor",enableSub:false,defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"},autoFilled:true,titleMain:null,lastName:null,middleName:null,firstName:null,_container:null,autoValue:function(){var b=this,d=b.getNames(),a,c;if(b.autoFilled){c=d.first?d.first+" ":"";c+=d.middle?d.middle+" ":"";c+=d.last?d.last:"";c=c.trim();a=b.getTitleMain();a.setRawValue(c);a.checkChangeCls()}},getNames:function(){var a=this,b={};b.last=a.getLastName().getValue();b.middle=a.getMiddleName().getValue();b.first=a.getFirstName().getValue();return b},getLastName:function(){var b=this,a;a=b.lastName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-last-name"]');return a},getMiddleName:function(){var b=this,a;a=b.middleName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-middle-name"]');return a},getFirstName:function(){var b=this,a;a=b.firstName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-first-name"]');return a},getTitleMain:function(){var b=this,a;a=b.titleMain||b.down('[name="'+b.name+'-main"]');return a},getCustomContainer:function(){var b=this,a=b._container;a=a||b.up("form-desc-relations-subject-container-custom");b._container=a;return a}},0,["form-desc-relations-subject-title"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title","form-desc-relations-subject-title"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true,"form-desc-relations-subject-title":true},["widget.form-desc-relations-subject-title"],0,[FBEditor.view.form.desc.relations.subject.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkController",FBEditor.view.form.desc.AbstractFieldController,{onResetFields:function(){var c=this,a=c.getView(),b=FBEditor.view.form.desc.relations.subject.radio.Radio;FBEditor.view.form.desc.AbstractFieldController.prototype.onResetFields.apply(this,arguments)},onChangeList:function(){var e=this,b=e.getView(),d=b.getCustomContainer(),c=b.getRadio(),g=b.getList(),h,a,f;c=c.child("[reference=linkRadioOther]");c.setValue(true);a=g.getValue();if(a){f=g.findRecordByValue(a).getData();h=d.getCustomViewer();h.fireEvent("setLink",f.name)}}},0,0,0,0,["controller.form.desc.relations.subject.link"],0,[FBEditor.view.form.desc.relations.subject,"LinkController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.radio.RadioController",Ext.app.ViewController,{onLoadData:function(c){var b=this,a=b.getView();a.setValue(c);b.setLinkViewer(Ext.Object.getValues(c)[0])},onChange:function(c,d,i){var h=this,b=0,j,e,f,g,a;e=Ext.Object.getValues(d)[0];if(e==="other-list"){j=c.up("form-desc-relations-subject-link").down("form-desc-relations-subject-link-list").getValue();if(!j){c.setValue(i)}}else{if(e==="publisher"){f=Ext.getCmp("form-desc-relations-subject").query("[name=relations-subject-percent]");Ext.Array.each(f,function(k){b+=k.getValue()});if(!b){g=c.up("form-desc-relations-subject-container-custom").down("[name=relations-subject-percent]");g.setValue(100)}}}h.setLinkViewer(e)},setLinkViewer:function(c){var d=this,a=d.getView(),e,b=a.getCustomContainer(),e=b.getCustomViewer();e.fireEvent("setLink",a.translateText[c])}},0,0,0,0,["controller.form.desc.relations.subject.link.radio"],0,[FBEditor.view.form.desc.relations.subject.radio,"RadioController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.radio.Radio",Ext.form.RadioGroup,{controller:"form.desc.relations.subject.link.radio",listeners:{change:"onChange",loadData:"onLoadData"},_container:null,statics:{numberGroup:0},allowBlank:false,defaults:{keyEnterAsTab:true},translateText:{author:"Автор",publisher:"Издатель",translator:"Переводчик"},initComponent:function(){var a=this,b=a.self.numberGroup;a.name="relations-subject-link-radio-"+b;a.items=[{name:"rel-subject-link-"+b,inputValue:"author",boxLabel:a.translateText.author,checked:true,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"translator",boxLabel:a.translateText.translator,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"publisher",boxLabel:a.translateText.publisher,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"other-list",reference:"linkRadioOther"}];b++;a.self.numberGroup=b;Ext.form.RadioGroup.prototype.initComponent.apply(this,arguments)},getCustomContainer:function(){var b=this,a=b._container;a=a||b.up("form-desc-relations-subject-container-custom");b._container=a;return a}},0,["relations-subject-link-radio"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup","relations-subject-link-radio"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true,"relations-subject-link-radio":true},["widget.relations-subject-link-radio"],0,[FBEditor.view.form.desc.relations.subject.radio,"Radio"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkStore",Ext.data.Store,{sorters:[{property:"name",direction:"ASC"}],fields:["value","name"],data:[{value:"editor",name:"Редактор"},{value:"illustrator",name:"Иллюстратор"},{value:"compiler",name:"Составитель"},{value:"maker-up",name:"Верстальщик"},{value:"adapter",name:"Адаптация"},{value:"dialogue",name:"Диалоги"},{value:"conceptor",name:"Концепция"},{value:"reviewer",name:"Отзыв"},{value:"introduction",name:"Предисловие"},{value:"afterword",name:"Послесловие"},{value:"accompanying",name:"Аккомпаниаторы"},{value:"quotations",name:"Цитаты"},{value:"annotator",name:"Аннотация"},{value:"associated",name:"Связывается с"},{value:"copyright_holder",name:"Владелец прав"},{value:"commentator",name:"Комментатор"},{value:"consultant",name:"Консультант"},{value:"corrector",name:"Корректор"},{value:"scientific_advisor",name:"Научный советник"},{value:"dubious_author",name:"Сомнительный автор"},{value:"designer",name:"Дизайнер"},{value:"recipient_of_letters",name:"Получатель писем"},{value:"sponsor",name:"Спонсор"},{value:"photographer",name:"Фотограф"},{value:"narrator",name:"Чтец"},{value:"rendering",name:"Пересказ"},{value:"performer",name:"Исполнитель"},{value:"maker",name:"Производитель"},{value:"actor",name:"Актер"},{value:"director",name:"Режиссер"},{value:"producer",name:"Продюсер"},{value:"composer",name:"Композитор"},{value:"sound_engineer",name:"Звукорежиссер"},{value:"screenwriter",name:"Сценарист"},{value:"contributing_editor",name:"Главный редактор"},{value:"editorial_board_member",name:"Член редколлегии"},{value:"managing_editor",name:"Ответственный редактор"},{value:"other",name:"Прочее"},{value:"undef",name:"Не определено"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.relations.subject,"LinkStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkList",Ext.form.field.ComboBox,{name:"relations-subject-link-list",listeners:{change:function(){this.ownerCt.fireEvent("changeList")}},queryMode:"local",displayField:"name",valueField:"value",editable:false,forceSelection:true,listConfig:{scrollable:true,style:{maxHeight:"auto"}},keyEnterAsTab:true,initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.relations.subject.LinkStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-subject-link-list"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-relations-subject-link-list"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-relations-subject-link-list":true},["widget.form-desc-relations-subject-link-list"],0,[FBEditor.view.form.desc.relations.subject,"LinkList"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.Link",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.subject.link",cls:"form-desc-relations-subject-link",listeners:{resetFields:"onResetFields",loadData:"onLoadData",changeList:"onChangeList"},layout:"hbox",radio:null,list:null,_container:null,translateText:{label:"Тип связи"},initComponent:function(){var a=this;a.fieldLabel=a.translateText.label;a.items=[{xtype:"relations-subject-link-radio"},{xtype:"form-desc-relations-subject-link-list",flex:1,margin:"0 0 0 10"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValue:function(){var c=this,a=c.getRadio(),b,e,d;b=a.getChecked();d=b[0]?b[0].getGroupValue():null;e=c.down("form-desc-relations-subject-link-list");d=d==="other-list"?e.getValue():d;return d},getList:function(){var a=this,b;b=a.list||a.down("form-desc-relations-subject-link-list");a.list=b;return b},getRadio:function(){var b=this,a;a=b.radio||b.down("relations-subject-link-radio");b.radio=a;return a},getCustomContainer:function(){var b=this,a=b._container;a=a||b.up("form-desc-relations-subject-container-custom");b._container=a;return a}},0,["form-desc-relations-subject-link"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-link"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-link":true},["widget.form-desc-relations-subject-link"],0,[FBEditor.view.form.desc.relations.subject,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.editor.Editor",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.subject.custom.editor",layout:"anchor",defaults:{anchor:"100%"},_container:null,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",firstName:"Имя",middleName:"Отчество (второе имя)",lastName:"Фамилия",titleMain:"Стандартное написание",titleAlt:"Альтернативное написание",percent:"Процент владения",pageEditor:"Страница редактирования"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-relations-subject-custom-editor-uuid",fieldLabel:a.translateText.id,name:"relations-subject-id"},{xtype:"form-desc-relations-subject-name-main",fieldLabel:a.translateText.lastName,name:"relations-subject-last-name"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.firstName,name:"relations-subject-first-name",cls:"field-optional"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.middleName,name:"relations-subject-middle-name",cls:"field-optional"},{xtype:"numberfield",fieldLabel:a.translateText.percent,name:"relations-subject-percent",hideTrigger:true,minValue:0,maxValue:100,autoStripChars:true,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-relations-subject-title",name:"relations-subject-title",translateText:{main:a.translateText.titleMain,alt:a.translateText.titleAlt}}]}]},{xtype:"form-desc-relations-subject-link",labelWidth:160,labelAlign:"right"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)},getCustomContainer:function(){var b=this,a=b._container;a=a||b.up("form-desc-relations-subject-container-custom");b._container=a;return a}},0,["form-desc-relations-subject-custom-editor"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-custom-editor"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-custom-editor":true},["widget.form-desc-relations-subject-custom-editor"],0,[FBEditor.view.form.desc.relations.subject.custom.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.viewer.ViewerController",FBEditor.view.form.desc.AbstractFieldController,{onSetTitle:function(d){var b=this,a=b.getView(),c=a.getTitle();c.setValue(d)},onSetLink:function(d){var c=this,a=c.getView(),b=a.getLink();b.setValue(d)},onClick:function(){var f=this,b=f.getView(),c=b.getCustomContainer(),d=b.getSubjectItem(),e=b.getSwitcher(),a;e.toggle();a=e.getStateCmp();d.fireEvent("resizeButtons",a);c.fireEvent("showEditor",a)}},0,0,0,0,["controller.form.desc.relations.subject.custom.viewer"],0,[FBEditor.view.form.desc.relations.subject.custom.viewer,"ViewerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.viewer.link.Link",Ext.form.field.Display,{translateText:{defaultText:"Автор"},initComponent:function(){var a=this;a.value=a.translateText.defaultText;Ext.form.field.Display.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-subject-custom-viewer-link"],["component","box","field","displayfield","form-desc-relations-subject-custom-viewer-link"],{component:true,box:true,field:true,displayfield:true,"form-desc-relations-subject-custom-viewer-link":true},["widget.form-desc-relations-subject-custom-viewer-link"],0,[FBEditor.view.form.desc.relations.subject.custom.viewer.link,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.viewer.switcher.SwitcherController",Ext.app.ViewController,{},0,0,0,0,["controller.form.desc.relations.subject.custom.viewer.switcher"],0,[FBEditor.view.form.desc.relations.subject.custom.viewer.switcher,"SwitcherController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.viewer.switcher.Switcher",Ext.Component,{controller:"form.desc.relations.subject.custom.viewer.switcher",listeners:{},margin:"5 10 0 10",stateCmp:false,_container:null,_subjectItem:null,initComponent:function(){var a=this;a.html="+";Ext.Component.prototype.initComponent.apply(this,arguments)},toggle:function(){var c=this,a=c.stateCmp,b;c.setStateCmp(!a);b=a?"+":"-";c.update(b)},getStateCmp:function(){return this.stateCmp},setStateCmp:function(a){this.stateCmp=a}},0,["form-desc-relations-subject-custom-viewer-switcher"],["component","box","form-desc-relations-subject-custom-viewer-switcher"],{component:true,box:true,"form-desc-relations-subject-custom-viewer-switcher":true},["widget.form-desc-relations-subject-custom-viewer-switcher"],0,[FBEditor.view.form.desc.relations.subject.custom.viewer.switcher,"Switcher"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.viewer.title.Title",Ext.form.field.Display,{fieldLabel:" ",labelWidth:0,labelAlign:"left",labelPad:2,initComponent:function(){var a=this;a.value="Стандартное написание";Ext.form.field.Display.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-subject-custom-viewer-title"],["component","box","field","displayfield","form-desc-relations-subject-custom-viewer-title"],{component:true,box:true,field:true,displayfield:true,"form-desc-relations-subject-custom-viewer-title":true},["widget.form-desc-relations-subject-custom-viewer-title"],0,[FBEditor.view.form.desc.relations.subject.custom.viewer.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.custom.viewer.Viewer",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.subject.custom.viewer",cls:"form-desc-relations-subject-custom-viewer",listeners:{setTitle:"onSetTitle",setLink:"onSetLink",click:{element:"el",fn:"onClick"}},layout:"hbox",height:20,_subjectItem:null,_switcher:null,_title:null,_link:null,initComponent:function(){var a=this;a.hidden=true;a.items=[{xtype:"form-desc-relations-subject-custom-viewer-switcher"},{xtype:"form-desc-relations-subject-custom-viewer-link"},{xtype:"form-desc-relations-subject-custom-viewer-title"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a=FBEditor.desc.Manager;if(a.isLoadedData()&&!b.hidden){b.setVisible(true)}FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)},getSubjectItem:function(){var b=this,a=b._subjectItem;a=a||b.up("form-desc-relations-subject-item");b._subjectItem=a;return a},getSwitcher:function(){var b=this,a=b._switcher;a=a||b.down("form-desc-relations-subject-custom-viewer-switcher");b._switcher=a;return a},getTitle:function(){var a=this,b=a._title;b=b||a.down("form-desc-relations-subject-custom-viewer-title");a._title=b;return b},getLink:function(){var b=this,a=b._link;a=a||b.down("form-desc-relations-subject-custom-viewer-link");b._link=a;return a},getCustomContainer:function(){var b=this,a=b._container;a=a||b.up("form-desc-relations-subject-container-custom");b._container=a;return a}},0,["form-desc-relations-subject-custom-viewer"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-custom-viewer"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-custom-viewer":true},["widget.form-desc-relations-subject-custom-viewer"],0,[FBEditor.view.form.desc.relations.subject.custom.viewer,"Viewer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.subject.container.custom",listeners:{showCustom:"onShowCustom",showEditor:"onShowEditor",showViewer:"onShowViewer",stateSwitcher:"onStateSwitcher"},layout:"anchor",flex:1,defaults:{anchor:"100%"},_customViewer:null,_customEditor:null,initComponent:function(){var a=this;a.items=[{xtype:"form-desc-relations-subject-custom-viewer"},{xtype:"form-desc-relations-subject-custom-editor"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,c=a.getValue(),b;b=c&&(c["last-name"]||c.title&&c.title.main)?FBEditor.view.form.desc.AbstractFieldContainer.prototype.isValid.apply(this,arguments):true;return b},getValue:function(){var a=this,b;b={_id:a.down("[name=relations-subject-id]").getValue(),_link:a.down("form-desc-relations-subject-link").getValue(),_percent:a.down("[name=relations-subject-percent]").getValue(),title:a.down("[name=relations-subject-title]").getValues(),"first-name":a.down("[name=relations-subject-first-name]").getValue(),"middle-name":a.down("[name=relations-subject-middle-name]").getValue(),"last-name":a.down("[name=relations-subject-last-name]").getValue()};b=a.removeEmptyValues(b);if(b&&(b["last-name"]||b.title&&b.title.main)){}else{b=null}return b},getCustomViewer:function(){var b=this,a=b._customViewer;a=a||b.down("form-desc-relations-subject-custom-viewer");b._customViewer=a;return a},getCustomEditor:function(){var b=this,a=b._customEditor;a=a||b.down("form-desc-relations-subject-custom-editor");b._customEditor=a;return a},getStateSwitcher:function(){var b=this,d,a,c;d=b.getCustomViewer();a=d.getSwitcher();c=a.getStateCmp();return c}},0,["form-desc-relations-subject-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-container-custom":true},["widget.form-desc-relations-subject-container-custom"],0,[FBEditor.view.form.desc.relations.subject,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.item.SubjectItemController",FBEditor.view.form.desc.AbstractFieldController,{onLoadInnerData:function(d){var c=this,a=c.getView(),b;b=a.getCustomContainer();b.fireEvent("showViewer",true);b.fireEvent("showEditor",false);c.onResizeButtons(false)},onResizeButtons:function(d){var c=this,a=c.getView(),b;b=a.getPlugin("fieldcontainerreplicator");b.setSizeButtons(d)},onAfterRenderPlugin:function(){},onResetContainer:function(){}},0,0,0,0,["controller.form.desc.relations.subject.item"],0,[FBEditor.view.form.desc.relations.subject.item,"SubjectItemController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.item.SubjectItem",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.subject.item",cls:"desc-fieldcontainer",listeners:{resetContainer:"onResetContainer",loadInnerData:"onLoadInnerData",resizeButtons:"onResizeButtons",afterRenderPlugin:"onAfterRenderPlugin"},plugins:{ptype:"fieldcontainerreplicator",groupName:"subject",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px"},btnSize:{bigWidth:40,bigHeight:65,smallWidth:40,smallHeight:25},alwaysInsertFirst:true},layout:"hbox",_customContainer:null,initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"anchor",flex:1,defaults:{anchor:"100%"},items:[{xtype:"form-desc-relations-subject-container-custom"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,b=a.getCustomContainer(),c;c=b.isValid();return c},getValues:function(){var b=this,c=b.getCustomContainer(),a;a=c.getValue();return a},getCustomContainer:function(){var b=this,a=b._customContainer;a=a||b.down("form-desc-relations-subject-container-custom");b._customContainer=a;return a}},0,["form-desc-relations-subject-item"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-item"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-item":true},["widget.form-desc-relations-subject-item"],0,[FBEditor.view.form.desc.relations.subject.item,"SubjectItem"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.Subject",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-relations-subject",name:"form-desc-plugin-fieldcontainerreplicator",translateText:{error:"Необходимо заполнить хотя бы одну персону"},initComponent:function(){var a=this;a.items=[{xtype:"form-desc-relations-subject-item"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(f){var c=this,b=c.items,e=f,a=null;b.each(function(d){var g;g=d.getValues();if(g&&!c.valContains(g,a)){a=a||[];a.push(g)}});e["fb3-relations"]=e["fb3-relations"]||{};e["fb3-relations"].subject=a;return e},valContains:function(c,a){var b=false;Ext.each(a,function(d){if(c._id===d._id&&c._link===d._link){b=true;return false}});return b}},0,["form-desc-relations-subject"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject":true},["widget.form-desc-relations-subject"],0,[FBEditor.view.form.desc.relations.subject,"Subject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.RelationsSubject",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Связанные персоны (автор, переводчик и т.д.)",xtypeChild:"relations-subject",require:true},0,["desc-fieldset-relations-subject"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-relations-subject"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-relations-subject":true},["widget.desc-fieldset-relations-subject"],0,[FBEditor.view.form.desc.fieldset,"RelationsSubject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.item.SequenceItemController",FBEditor.view.form.desc.AbstractFieldController,{onPutData:function(d){var c=this,a=c.getView(),b=a.getPlugin("fieldcontainerreplicator"),e=a.getSequenceContainer();d=d[0]?d:{0:d};e.setValues(d,b)},onAddFields:function(){},onRemoveFields:function(){var d=this,a=d.getView(),c=a.getPlugin("fieldcontainerreplicator"),b;if(c){b=c.getBtnPut();b.enable()}},onPutFields:function(e){var d=this,a=d.getView(),c=a.getPlugin("fieldcontainerreplicator"),b;e.disable();b=c.getBtnAdd();b.ownerCt.remove(b)},onResetContainer:function(){var b=this,a=b.getView()}},0,0,0,0,["controller.form.desc.sequence.item"],0,[FBEditor.view.form.desc.sequence.item,"SequenceItemController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",number:"Номер"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:80,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:a.translateText.id,name:"sequence-id",listeners:{afterrender:function(){a.setSequenceId(this)}}},{xtype:"numberfield",name:"sequence-number",fieldLabel:a.translateText.number,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:"sequence-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,c=a.getValue(),b;b=c&&(c.title||c._number)?FBEditor.view.form.desc.AbstractFieldContainer.prototype.isValid.apply(this,arguments):true;return b},getValue:function(){var a=this,b;b={_id:a.down("[name=sequence-id]").getValue(),_number:a.down("[name=sequence-number]").getValue(),title:a.down("[name=sequence-title]").getValues()};return b},setSequenceId:function(c){var b=this,d={},e=c,a=FBEditor.desc.Manager,f;f=e.getValue();if(!f){f=a.getNewId();d["sequence-id"]=f;b.updateData(d)}}},0,["form-desc-sequence-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence-container-custom":true},["widget.form-desc-sequence-container-custom"],0,[FBEditor.view.form.desc.sequence,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.item.SequenceItem",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.sequence.item",cls:"desc-fieldcontainer",layout:"anchor",anchor:"100%",plugins:{ptype:"fieldcontainerreplicator",groupName:"sequence",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",enableBtnPut:true,btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},listeners:{putData:"onPutData",addFields:"onAddFields",putFields:"onPutFields",removeFields:"onRemoveFields",resetContainer:"onResetContainer"},_sequenceContainer:null,_customContainer:null,_sequenceInner:null,initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",layout:"anchor",flex:1,items:[{xtype:"form-desc-sequence-container-custom"}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,c=b.getCustomContainer(),a=b.getCustomInnerContainer(),d;d=c.isValid();d=d&&a?a.isValid():d;return d},getValues:function(){var c=this,d=c.getCustomContainer(),b=c.getSequenceInner(),a;a=d.getValue();if(b){a.sequence=b.getValues()}a=c.removeEmptyValues(a);return a},getSequenceContainer:function(){var b=this,a=b._sequenceContainer;a=a||b.up("form-desc-sequence");b._sequenceContainer=a;return a},getSequenceInner:function(){var b=this,a=b._sequenceInner;a=a||b.items.getAt(1);b._sequenceInner=a;return a},getCustomInnerContainer:function(){var c=this,b=c.getSequenceInner(),a=c._customInnerContainer;a=a||(b?b.down("form-desc-sequence-container-custom"):null);c._customInnerContainer=a;return a},getCustomContainer:function(){var b=this,a=b._customContainer;a=a||b.down("form-desc-sequence-container-custom");b._customContainer=a;return a}},0,["form-desc-sequence-item"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence-item"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence-item":true},["widget.form-desc-sequence-item"],0,[FBEditor.view.form.desc.sequence.item,"SequenceItem"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.SequenceController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;if(d){d=d[0]?d:{0:d};b=c.getPluginContainerReplicator(a);a.setValues(d,b)}}},0,0,0,0,["controller.form.desc.sequence"],0,[FBEditor.view.form.desc.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.Sequence",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-sequence",controller:"form.desc.sequence",name:"form-desc-plugin-fieldcontainerreplicator",layout:"anchor",initComponent:function(){var a=this;a.items=[{xtype:"form-desc-sequence-item"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(f){var c=this,b=c.items,e=f||null,a=null;b.each(function(d){var g;g=d.getValues();if(g&&!c.valContains(g,a)){a=a||[];a.push(g)}});if(a){e=e||{};e.sequence=a}return e},setValues:function(d,a){var b=a.getCmp(),c=a;Ext.Object.each(d,function(f,g){var h,e;h=b.query("[name=sequence-id]")[0];h.setValue(g.id);h=b.query("[name=sequence-number]")[0];h.setValue(g.number?g.number:"");h=b.query("[name=sequence-title-main]")[0];h.setValue(g.title.main);h=b.query("[name=sequence-title-sub]")[0];h.setValue(g.title.sub?g.title.sub:"");if(g.title.alt){h=b.query("[name=sequence-title-alt]")[0];h.fireEvent("loadData",g.title.alt)}if(g.sequence){e=c.putFields();e.fireEvent("putData",g.sequence)}if(d[parseInt(f)+1]){c.addFields();b=b.nextSibling();c=b.getPlugin("fieldcontainerreplicator")}})},valContains:function(c,a){var b=false;Ext.each(a,function(d){if(c._id===d._id){b=true;return false}});return b}},0,["form-desc-sequence"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence":true},["widget.form-desc-sequence"],0,[FBEditor.view.form.desc.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Sequence",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Серия",xtypeChild:"sequence",require:true},0,["desc-fieldset-sequence"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-sequence"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-sequence":true},["widget.desc-fieldset-sequence"],0,[FBEditor.view.form.desc.fieldset,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.titleArt.TitleArtController",FBEditor.view.form.desc.AbstractFieldController,{onChangeTitle:function(){var b=this,a=b.getView(),c=a.getFormDesc();c.setTitleApp()},onFocusTitle:function(){},onBlurTitle:function(){}},0,0,0,0,["controller.form.desc.titleArt"],0,[FBEditor.view.form.desc.titleArt,"TitleArtController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.titleArt.TitleArt",FBEditor.view.form.desc.title.Title,{controller:"form.desc.titleArt",id:"form-desc-title",cls:"container-valid",listeners:{changeTitle:"onChangeTitle",blurTitle:"onBlurTitle",focusTitle:"onFocusTitle"},enableSub:true,enableAlt:true,mainConfig:{plugins:[{ptype:"fieldCleaner"}]},altConfig:{plugins:{btnStyle:{margin:"4px 0 0 5px"}}}},0,["form-desc-titleArt"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title","form-desc-titleArt"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true,"form-desc-titleArt":true},["widget.form-desc-titleArt"],0,[FBEditor.view.form.desc.titleArt,"TitleArt"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.CoverController",Ext.app.ViewController,{onLoad:function(d){var c=this,a=c.getView(),b=a.getCoverPicture();b.updateView(d)},onClear:function(){var c=this,a=c.getView(),b=a.getCoverPicture();b.setSrc("")}},0,0,0,0,["controller.panel.cover"],0,[FBEditor.view.panel.cover,"CoverController"],0));(Ext.cmd.derive("FBEditor.view.image.ImageController",Ext.app.ViewController,{onLoad:function(){var b=this,a=b.getView()}},0,0,0,0,["controller.baseimage"],0,[FBEditor.view.image,"ImageController"],0));(Ext.cmd.derive("FBEditor.view.image.Image",Ext.Img,{controller:"baseimage",listeners:{load:{element:"el",fn:"onLoad"}},updateView:function(c){var b=this,a=c;if(a.url!==b.src){b.setSrc(a.url);b.fireEvent("changeSrc",b)}}},0,["baseimage"],["component","box","image","imagecomponent","baseimage"],{component:true,box:true,image:true,imagecomponent:true,baseimage:true},["widget.baseimage"],0,[FBEditor.view.image,"Image"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.picture.PictureController",FBEditor.view.image.ImageController,{onLoad:function(){var c=this,b=c.getView(),a;a=b.getPanelCover();a.updateLayout()}},0,0,0,0,["controller.panel.cover.picture"],0,[FBEditor.view.panel.cover.picture,"PictureController"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.picture.Picture",FBEditor.view.image.Image,{id:"panel-cover-picture",controller:"panel.cover.picture",margin:"10 0 0 0",style:{maxWidth:"150px",maxHeight:"300px"},panelCover:null,constructor:function(a){var b=this;b.panelCover=a.panelCover;FBEditor.view.image.Image.prototype.constructor.apply(this,arguments)},getPanelCover:function(){return this.panelCover}},1,["panel-cover-picture"],["component","box","image","imagecomponent","baseimage","panel-cover-picture"],{component:true,box:true,image:true,imagecomponent:true,baseimage:true,"panel-cover-picture":true},["widget.panel-cover-picture"],0,[FBEditor.view.panel.cover.picture,"Picture"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.Cover",Ext.container.Container,{id:"panel-cover",controller:"panel.cover",margin:"0 0 0 40",listeners:{load:"onLoad",clear:"onClear"},picture:null,translateText:{cover:"Обложка"},initComponent:function(){var a=this;a.items=[{xtype:"container",layout:"hbox",items:[{xtype:"box",style:{margin:"0 10px 0 0",fontSize:"15px"},html:a.translateText.cover+":"},{xtype:"button-select-cover"}]},{xtype:"panel-cover-picture",panelCover:a}];Ext.container.Container.prototype.initComponent.apply(this,arguments)},getCoverPicture:function(){var a=this,b;b=a.picture||a.down("panel-cover-picture");a.picture=b;return b}},0,["panel-cover"],["component","box","container","panel-cover"],{component:true,box:true,container:true,"panel-cover":true},["widget.panel-cover"],0,[FBEditor.view.panel.cover,"Cover"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Title",FBEditor.view.form.desc.fieldset.AbstractFieldset,{layout:"hbox",title:"Название произведения",require:true,initComponent:function(){var a=this;a.items=[{xtype:"form-desc-titleArt",flex:1,name:"title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}},{xtype:"panel-cover"}];FBEditor.view.form.desc.fieldset.AbstractFieldset.prototype.initComponent.apply(this,arguments)}},0,["desc-fieldset-title"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-title"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-title":true},["widget.desc-fieldset-title"],0,[FBEditor.view.form.desc.fieldset,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.Desc",Ext.form.Panel,{id:"form-desc",controller:"form.desc",cls:"form-desc",listeners:{loadDesc:"onLoadData",reset:"onReset",activate:"onActivate",resize:"onResize",startScroll:"onStartScroll"},layout:{type:"anchor"},autoScroll:true,minWidth:730,bodyPadding:0,_firstActivate:false,_oldScrollY:0,beforeLayout:function(){var a=this;a._oldScrollY=a.getScrollY();Ext.form.Panel.prototype.beforeLayout.apply(this,arguments)},afterLayout:function(){var a=this;Ext.form.Panel.prototype.afterLayout.apply(this,arguments);a.setScrollY(a._oldScrollY)},initComponent:function(){var b=this,a=FBEditor.desc.Manager;Ext.create("FBEditor.scroll.Scroll",b);b.items=[{xtype:"desc-fieldset-title"},{xtype:"desc-fieldset-sequence"},{xtype:"desc-fieldset-relations-subject"},{xtype:"desc-fieldset-classification"},{xtype:"desc-fieldset-annotation"},{xtype:"desc-fieldset-preamble"},{xtype:"desc-fieldset-periodical"},{xtype:"desc-fieldset-relations-object"},{xtype:"desc-fieldset-publishInfo"},{xtype:"desc-fieldset-history"},{xtype:"desc-fieldset-customInfo"},{xtype:"desc-fieldset-documentInfo"}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var c=this,a=FBEditor.desc.Manager,e=FBEditor.getBridgeWindow(),b,d;if(Ext.browser.is.WebKit){d=c.body.down(".x-autocontainer-innerCt");d.setStyle("opacity","0.99")}Ext.form.Panel.prototype.afterRender.apply(this,arguments)},isValid:function(){var d=this,b=d.items,e=true,c=FBEditor.desc.Manager,a;c.fieldsError=[];b.each(function(f){if(f.isValid&&!f.isValid()){e=false}});if(c.fieldsError.length){a=c.fieldsError[0];a=a.getEl().dom;a.scrollIntoView()}return e},getValues:function(){var c=this,a=c.items,d={},b={},e=["_id","_version","_xmlns","periodical","title","sequence","fb3-relations","fb3-classification","lang","written","translated","document-info","history","paper-publish-info","custom-info","annotation","preamble"];a.each(function(f){if(f.getValues){d=f.getValues(d)}});Ext.Array.each(e,function(f){if(d[f]){b[f]=d[f]}});return b},setTitleApp:function(){var b=this,d=FBEditor.getApplication(),a,c;a=b.getBookName();c=a;d.setTitle(c)},getBookName:function(){var c=this,b=c.down("form-desc-titleArt"),a;a=b.getMain().getValue();return a}},0,["form-desc"],["component","box","container","panel","form","form-desc"],{component:true,box:true,container:true,panel:true,form:true,"form-desc":true},["widget.form-desc"],0,[FBEditor.view.form.desc,"Desc"],0));(Ext.cmd.derive("FBEditor.view.image.editor.Picture",FBEditor.view.image.Image,{style:{maxWidth:"150px",maxHeight:"200px"},src:"undefined"},0,["image-editor-picture"],["component","box","image","imagecomponent","baseimage","image-editor-picture"],{component:true,box:true,image:true,imagecomponent:true,baseimage:true,"image-editor-picture":true},["widget.image-editor-picture"],0,[FBEditor.view.image.editor,"Picture"],0));(Ext.cmd.derive("FBEditor.view.main.MainController",Ext.app.ViewController,{routes:{"panel/:name":{before:"beforeCreatePanel",action:"createPanel",conditions:{":name":"(navigation|props)"}}},init:function(){},beforeCreatePanel:function(a,b){if(FBEditor.parentWindow){b.resume()}},createPanel:function(b){var c=this,a;a=c.getView();a.createPanel(b)},onResize:function(e,c,a,b,f){var d=this;if(c!==b){d.onCheckWidthPanels()}},onDrop:function(c){var a=this,b;c.preventDefault();b=Ext.create("FBEditor.command.DropFile",{evt:c});if(b.execute()){FBEditor.HistoryCommand.add(b)}},onDragover:function(b){var a=this;b.preventDefault()},onCloseApplication:function(){var a=this,b=FBEditor.getBridgeProps();a.closeDetachPanels()},onRestoreDetachPanel:function(a){var c=this,b,e,d;b=FBEditor.getLocalStorage().getItem(a);b=Ext.Object.fromQueryString(b,true);e="width="+b.width+",height="+b.height+",top="+b.top+",left="+b.left+",toolbar=no,location=no";d=window.open("#panel/"+a,a,e);if(d){FBEditor.childWindow[a]=d}else{c.getView().attachPanel(a)}},onCheckWidthPanels:function(){var a={},b={};a.content=Ext.getCmp("panel-main-content");if(a.content){a.props=Ext.getCmp("panel-main-props");a.nav=Ext.getCmp("panel-main-navigation");b.main=Ext.getCmp("main").getWidth();b.content=a.content.getMinWidth();b.props=a.props?a.props.getWidth():0;b.nav=a.nav?a.nav.getWidth():0;b.sum=b.props+b.nav+b.content;if(b.main-b.sum<0){if(a.props){a.props.setWidth((b.main-b.content)/2)}if(a.nav){a.nav.setWidth((b.main-b.content)/2)}}}},onFocusDetachPanels:function(){var b=this,a;a=b.getView();Ext.Object.each(a.windowPanels,function(c,d){if(d){d.focus();if(!Ext.isIE){d.alert("Панель найдена")}}})},closeDetachPanels:function(){var c=this,a,b;a=c.getView();Ext.Object.each(a.windowPanels,function(d,e){if(e){b={width:e.innerWidth,height:e.innerHeight,left:e.screenX,top:e.screenY};FBEditor.getLocalStorage().setItem(d,Ext.Object.toQueryString(b,true));e.close();FBEditor.childWindow[name]=null}})}},0,0,0,0,["controller.main"],0,[FBEditor.view.main,"MainController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.Abstract",Ext.panel.Panel,{split:{size:2,collapsible:false},bodyPadding:5,stateful:true,panelName:null},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main,"Abstract"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsController",Ext.app.ViewController,{onResize:function(){var c=this,a=c.getView(),b;b=a.down("panel-filename");b.fireEvent("checkPosition")}},0,0,0,0,["controller.panel.main.tools"],0,[FBEditor.view.panel.main.tools,"ToolsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsTabController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.main.toolstab"],0,[FBEditor.view.panel.main.tools,"ToolsTabController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.open.OpenController",Ext.app.ViewController,{onChange:function(b,a){var c;c=Ext.create("FBEditor.command.OpenFile",{evt:a});if(c.execute()){FBEditor.HistoryCommand.add(c)}}},0,0,0,0,["controller.panel.toolstab.file.button.open"],0,[FBEditor.view.panel.toolstab.file.button.open,"OpenController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.open.Open",FBEditor.view.button.AbstractFileButton,{id:"panel-toolstab-file-button-open",controller:"panel.toolstab.file.button.open",listeners:{change:"onChange"},iconCls:"fa fa-upload",tooltipType:"title",accept:"",translateText:{open:"Открыть книгу (локально)"},initComponent:function(){var a=this;a.text=a.translateText.open;a.tooltip=a.translateText.open;FBEditor.view.button.AbstractFileButton.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-file-button-open"],["component","box","button","filebutton","panel-toolstab-file-button-open"],{component:true,box:true,button:true,filebutton:true,"panel-toolstab-file-button-open":true},["widget.panel-toolstab-file-button-open"],0,[FBEditor.view.panel.toolstab.file.button.open,"Open"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.saveas.SaveAsController",Ext.app.ViewController,{onClick:function(b,a){var d,c;c={btn:b,desc:Ext.getCmp("form-desc")};d=Ext.create("FBEditor.command.SaveAsFile",c);if(d.execute()){FBEditor.HistoryCommand.add(d)}}},0,0,0,0,["controller.panel.toolstab.file.button.saveas"],0,[FBEditor.view.panel.toolstab.file.button.saveas,"SaveAsController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.saveas.SaveAs",Ext.button.Button,{id:"panel-toolstab-file-button-saveas",controller:"panel.toolstab.file.button.saveas",listeners:{click:"onClick"},iconCls:"fa fa-download",tooltipType:"title",translateText:{save:"Сохранить книгу (локально)"},initComponent:function(){var a=this;a.text=a.translateText.save;Ext.button.Button.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-file-button-saveas"],["component","box","button","panel-toolstab-file-button-saveas"],{component:true,box:true,button:true,"panel-toolstab-file-button-saveas":true},["widget.panel-toolstab-file-button-saveas"],0,[FBEditor.view.panel.toolstab.file.button.saveas,"SaveAs"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.File",Ext.panel.Panel,{id:"panel-toolstab-file",title:"Файл",initComponent:function(){var a=this;a.tbar=[{xtype:"panel-toolstab-file-button-open"},{xtype:"panel-toolstab-file-button-saveas"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-file"],["component","box","container","panel","panel-toolstab-file"],{component:true,box:true,container:true,panel:true,"panel-toolstab-file":true},["widget.panel-toolstab-file"],0,[FBEditor.view.panel.toolstab.file,"File"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.MainController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.toolstab.main"],0,[FBEditor.view.panel.toolstab.main,"MainController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.Main",Ext.panel.Panel,{id:"panel-toolstab-main",controller:"panel.toolstab.main",title:"Форматирование",accessXmllint:false,mainEditor:null,activeToolbar:null,translateText:{loading:"Загрузка xmllint ..."},initComponent:function(){var a=this;a.items=[{xtype:"component",padding:10,style:{color:"gray"},html:a.translateText.loading}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var c=this,a,b,d;a=c.getMainEditor();b=a.getManager();d=b.getSchema();d.validXml({xml:"test",callback:c.verifyResult,scope:c});Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},addToolbar:function(b){var a=this;a.addDocked(b);if(b.isDefaultShow()){a.setActiveToolbar(b)}},isActiveToolbar:function(b){var a=this,d=a.getActiveToolbar(),c;c=d&&d.getId()===b.getId();return c},setActiveToolbar:function(c){var b=this,a=b.getDockedItems();Ext.Array.each(a,function(f){var e,d;f.setVisible(false);e=f.getEditor();d=e.getManager();d.resetFocus()});b.activeToolbar=c;c.setVisible(b.accessXmllint)},getActiveToolbar:function(){return this.activeToolbar},getMainEditor:function(){var b=this,a;a=b.mainEditor||Ext.getCmp("main-editor");b.mainEditor=a;return a},verifyResult:function(a,c){var b=this,d=b.getActiveToolbar();if(c.loaded){Ext.log({msg:"xmllint загружен",level:"info"});b.remove(b.items.first());b.accessXmllint=true;if(d){b.setActiveToolbar(d)}}}},0,["panel-toolstab-main"],["component","box","container","panel","panel-toolstab-main"],{component:true,box:true,container:true,panel:true,"panel-toolstab-main":true},["widget.panel-toolstab-main"],0,[FBEditor.view.panel.toolstab.main,"Main"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.split.SplitController",Ext.app.ViewController,{onClick:function(d,b){var f=Ext.getCmp("panel-main-content"),g,e,c,a;if(f.isActiveItem("main-editor")){e={btn:d,editor:Ext.getCmp("main-editor")};a=d.isSplited();c=!a?"FBEditor.command.SplitEditor":"FBEditor.command.UnsplitEditor";g=Ext.create(c,e);if(g.execute()){d.setSplited(!a);FBEditor.HistoryCommand.add(g)}}}},0,0,0,0,["controller.panel.toolstab.view.button.split"],0,[FBEditor.view.panel.toolstab.view.button.split,"SplitController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.split.Split",Ext.button.Button,{id:"panel-toolstab-view-button-split",controller:"panel.toolstab.view.button.split",listeners:{click:"onClick"},splited:false,translateText:{split:"Разделить окно текста",unsplit:"Снять разделение "},initComponent:function(){var a=this;a.text=a.translateText.split;Ext.button.Button.prototype.initComponent.apply(this,this)},setSplited:function(c){var a=this,b;a.splited=c;b=c?a.translateText.unsplit:a.translateText.split;a.setText(b)},isSplited:function(){return this.splited}},0,["panel-toolstab-view-button-split"],["component","box","button","panel-toolstab-view-button-split"],{component:true,box:true,button:true,"panel-toolstab-view-button-split":true},["widget.panel-toolstab-view-button-split"],0,[FBEditor.view.panel.toolstab.view.button.split,"Split"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.focusdetachpanels.FocusDetachPanels",Ext.button.Button,{id:"panel-toolstab-view-button-focusdetachpanels",text:"Показать отсоединенные панели",handler:function(){Ext.getCmp("main").fireEvent("focusDetachPanels")}},0,["panel-toolstab-view-button-focusdetachpanels"],["component","box","button","panel-toolstab-view-button-focusdetachpanels"],{component:true,box:true,button:true,"panel-toolstab-view-button-focusdetachpanels":true},["widget.panel-toolstab-view-button-focusdetachpanels"],0,[FBEditor.view.panel.toolstab.view.button.focusdetachpanels,"FocusDetachPanels"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.View",Ext.panel.Panel,{id:"panel-toolstab-view",title:"Вид",initComponent:function(){var a=this;a.tbar=[{xtype:"panel-toolstab-view-button-split"},{xtype:"panel-toolstab-view-button-focusdetachpanels"}];Ext.panel.Panel.prototype.initComponent.apply(this,this)}},0,["panel-toolstab-view"],["component","box","container","panel","panel-toolstab-view"],{component:true,box:true,container:true,panel:true,"panel-toolstab-view":true},["widget.panel-toolstab-view"],0,[FBEditor.view.panel.toolstab.view,"View"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.AbstractSlotController",Ext.app.ViewController,{alert:null,data:null,translateText:{pressKeys:"Нажмите сочетание клавиш, чтобы сменить текущее.",warningText:"Данное сочетание клавиш уже существует.",warningTitle:"Ошибка"},onClick:function(f){var d=this,b=d.getView(),c=d.translateText,g,a;g=b.getTitleText();g+=" "+b.getKeysText();d.alert=Ext.Msg.alert(g,c.pressKeys,d.alertClosed,d);a=FBEditor.util.Hotkey;a.on({resolve:d.hotkeyResolve,scope:d})},hotkeyResolve:function(d){var c=this,a=c.getView(),f=c.alert,b=FBEditor.hotkeys.Manager,e;c.data=d;e=a.getTitleText()+" "+b.getFormatKeysText(d);f.setTitle(e)},alertClosed:function(g){var h=this,i=h.getView(),f=h.translateText,c="ok",d=h.data,a=FBEditor.hotkeys.Manager,e,b;b=FBEditor.util.Hotkey;b.un();if(g===c&&d){e=a.getNumberSlot(d);if(!e){i.setHotkey(d)}else{Ext.Msg.show({title:f.warningTitle,message:f.warningText,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}h.data=null;h.alert=null}},0,0,0,0,["controller.window.hotkeys.slot"],0,[FBEditor.view.window.hotkeys.slot,"AbstractSlotController"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.component.keys.Keys",Ext.Component,{cls:"window-hotkeys-slot-keys",width:150,setText:function(b){var a=this;b=b||"";a.update(b)}},0,0,["component","box"],{component:true,box:true},0,0,[FBEditor.view.window.hotkeys.slot.component.keys,"Keys"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.component.title.Title",Ext.Component,{setText:function(b){var a=this;a.update(b)}},0,0,["component","box"],{component:true,box:true},0,0,[FBEditor.view.window.hotkeys.slot.component.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.AbstractSlot",Ext.Container,{controller:"window.hotkeys.slot",cls:"window-hotkeys-slot",listeners:{click:{element:"el",fn:"onClick"}},layout:"hbox",margin:"0 5",numberSlot:null,titleText:"",defaultKeys:null,keysText:"",hotkeysWin:null,keysCmp:null,titleCmp:null,initComponent:function(){var d=this,b=d.getNumberSlot(),c=FBEditor.hotkeys.Manager,a,e;a=c.getSlot(b);e=a.getData();d.setKeysText(e);Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var c=this,f,b,e,d,a;b=c.getKeysCmp();d=c.getKeysText();b.setText(d);e=c.getTitleCmp();a=c.getTitleText();e.setText(a);f=[b,e];c.add(f);Ext.container.Container.prototype.afterRender.apply(this,arguments)},getNumberSlot:function(){return this.numberSlot},getHotkeysWindow:function(){var a=this,b;b=a.hotkeysWin||Ext.getCmp("window-hotkeys");a.hotkeysWin=b;return b},getKeysText:function(){return this.keysText},getTitleText:function(){return this.titleText},setKeysText:function(c){var b=this,a=FBEditor.hotkeys.Manager;b.keysText=a.getFormatKeysText(c)},getKeysCmp:function(){var b=this,a;a=b.keysCmp||Ext.create("FBEditor.view.window.hotkeys.slot.component.keys.Keys");b.keysCmp=a;return a},getTitleCmp:function(){var a=this,b;b=a.titleCmp||Ext.create("FBEditor.view.window.hotkeys.slot.component.title.Title");a.titleCmp=b;return b},setHotkey:function(e){var d=this,b=d.getKeysCmp(),c=FBEditor.hotkeys.Manager,a=d.getNumberSlot(),f;f=c.getFormatKeysText(e);b.setText(f);d.setKeysText(e);e.slot=a;c.updateSlotData(e)}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[FBEditor.view.window.hotkeys.slot,"AbstractSlot"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.a.A",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-a",titleText:"Ссылка"},0,["window-hotkeys-slot-a"],["component","box","container","window-hotkeys-slot-a"],{component:true,box:true,container:true,"window-hotkeys-slot-a":true},["widget.window-hotkeys-slot-a"],0,[FBEditor.view.window.hotkeys.slot.a,"A"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.annotation.Annotation",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-annotation",titleText:"Аннотация"},0,["window-hotkeys-slot-annotation"],["component","box","container","window-hotkeys-slot-annotation"],{component:true,box:true,container:true,"window-hotkeys-slot-annotation":true},["widget.window-hotkeys-slot-annotation"],0,[FBEditor.view.window.hotkeys.slot.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.blockquote.Blockquote",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-blockquote",titleText:"Цитата"},0,["window-hotkeys-slot-blockquote"],["component","box","container","window-hotkeys-slot-blockquote"],{component:true,box:true,container:true,"window-hotkeys-slot-blockquote":true},["widget.window-hotkeys-slot-blockquote"],0,[FBEditor.view.window.hotkeys.slot.blockquote,"Blockquote"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.bold.Bold",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-bold",titleText:"Полужирный"},0,["window-hotkeys-slot-bold"],["component","box","container","window-hotkeys-slot-bold"],{component:true,box:true,container:true,"window-hotkeys-slot-bold":true},["widget.window-hotkeys-slot-bold"],0,[FBEditor.view.window.hotkeys.slot.bold,"Bold"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.code.Code",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-code",defaultKeys:{title:"Код",key:"C",ctrl:true,alt:true}},0,["window-hotkeys-slot-code"],["component","box","container","window-hotkeys-slot-code"],{component:true,box:true,container:true,"window-hotkeys-slot-code":true},["widget.window-hotkeys-slot-code"],0,[FBEditor.view.window.hotkeys.slot.code,"Code"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.div.Div",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-div",titleText:"Блок"},0,["window-hotkeys-slot-div"],["component","box","container","window-hotkeys-slot-div"],{component:true,box:true,container:true,"window-hotkeys-slot-div":true},["widget.window-hotkeys-slot-div"],0,[FBEditor.view.window.hotkeys.slot.div,"Div"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.epigraph.Epigraph",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-epigraph",titleText:"Эпиграф"},0,["window-hotkeys-slot-epigraph"],["component","box","container","window-hotkeys-slot-epigraph"],{component:true,box:true,container:true,"window-hotkeys-slot-epigraph":true},["widget.window-hotkeys-slot-epigraph"],0,[FBEditor.view.window.hotkeys.slot.epigraph,"Epigraph"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.img.Img",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-img",titleText:"Изображение"},0,["window-hotkeys-slot-img"],["component","box","container","window-hotkeys-slot-img"],{component:true,box:true,container:true,"window-hotkeys-slot-img":true},["widget.window-hotkeys-slot-img"],0,[FBEditor.view.window.hotkeys.slot.img,"Img"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.italic.Italic",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-italic",titleText:"Курсив"},0,["window-hotkeys-slot-italic"],["component","box","container","window-hotkeys-slot-italic"],{component:true,box:true,container:true,"window-hotkeys-slot-italic":true},["widget.window-hotkeys-slot-italic"],0,[FBEditor.view.window.hotkeys.slot.italic,"Italic"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.note.Note",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-note",titleText:"Сноска"},0,["window-hotkeys-slot-note"],["component","box","container","window-hotkeys-slot-note"],{component:true,box:true,container:true,"window-hotkeys-slot-note":true},["widget.window-hotkeys-slot-note"],0,[FBEditor.view.window.hotkeys.slot.note,"Note"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.notebody.Notebody",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-notebody",titleText:"Текст сноски"},0,["window-hotkeys-slot-notebody"],["component","box","container","window-hotkeys-slot-notebody"],{component:true,box:true,container:true,"window-hotkeys-slot-notebody":true},["widget.window-hotkeys-slot-notebody"],0,[FBEditor.view.window.hotkeys.slot.notebody,"Notebody"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.notes.Notes",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-notes",titleText:"Сноски"},0,["window-hotkeys-slot-notes"],["component","box","container","window-hotkeys-slot-notes"],{component:true,box:true,container:true,"window-hotkeys-slot-notes":true},["widget.window-hotkeys-slot-notes"],0,[FBEditor.view.window.hotkeys.slot.notes,"Notes"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.ol.Ol",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-ol",titleText:"Нумерованный список"},0,["window-hotkeys-slot-ol"],["component","box","container","window-hotkeys-slot-ol"],{component:true,box:true,container:true,"window-hotkeys-slot-ol":true},["widget.window-hotkeys-slot-ol"],0,[FBEditor.view.window.hotkeys.slot.ol,"Ol"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.pre.Pre",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-pre",titleText:"Предварительно отформатированный текст"},0,["window-hotkeys-slot-pre"],["component","box","container","window-hotkeys-slot-pre"],{component:true,box:true,container:true,"window-hotkeys-slot-pre":true},["widget.window-hotkeys-slot-pre"],0,[FBEditor.view.window.hotkeys.slot.pre,"Pre"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.replace.Replace",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-replace",titleText:"Замена в редакторе XML"},0,["window-hotkeys-slot-replace"],["component","box","container","window-hotkeys-slot-replace"],{component:true,box:true,container:true,"window-hotkeys-slot-replace":true},["widget.window-hotkeys-slot-replace"],0,[FBEditor.view.window.hotkeys.slot.replace,"Replace"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.search.Search",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-search",titleText:"Поиск в редакторе XML"},0,["window-hotkeys-slot-search"],["component","box","container","window-hotkeys-slot-search"],{component:true,box:true,container:true,"window-hotkeys-slot-search":true},["widget.window-hotkeys-slot-search"],0,[FBEditor.view.window.hotkeys.slot.search,"Search"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.section.Section",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-section",titleText:"Вложенная секция"},0,["window-hotkeys-slot-section"],["component","box","container","window-hotkeys-slot-section"],{component:true,box:true,container:true,"window-hotkeys-slot-section":true},["widget.window-hotkeys-slot-section"],0,[FBEditor.view.window.hotkeys.slot.section,"Section"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.smallcaps.Smallcaps",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-smallcaps",titleText:"Капитель"},0,["window-hotkeys-slot-smallcaps"],["component","box","container","window-hotkeys-slot-smallcaps"],{component:true,box:true,container:true,"window-hotkeys-slot-smallcaps":true},["widget.window-hotkeys-slot-smallcaps"],0,[FBEditor.view.window.hotkeys.slot.smallcaps,"Smallcaps"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.spacing.Spacing",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-spacing",titleText:"Межбуквенный интервал"},0,["window-hotkeys-slot-spacing"],["component","box","container","window-hotkeys-slot-spacing"],{component:true,box:true,container:true,"window-hotkeys-slot-spacing":true},["widget.window-hotkeys-slot-spacing"],0,[FBEditor.view.window.hotkeys.slot.spacing,"Spacing"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.span.Span",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-span",titleText:"Span"},0,["window-hotkeys-slot-span"],["component","box","container","window-hotkeys-slot-span"],{component:true,box:true,container:true,"window-hotkeys-slot-span":true},["widget.window-hotkeys-slot-span"],0,[FBEditor.view.window.hotkeys.slot.span,"Span"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.splitelement.SplitElement",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-splitelement",titleText:"Разделить элемент блочного типа"},0,["window-hotkeys-slot-splitelement"],["component","box","container","window-hotkeys-slot-splitelement"],{component:true,box:true,container:true,"window-hotkeys-slot-splitelement":true},["widget.window-hotkeys-slot-splitelement"],0,[FBEditor.view.window.hotkeys.slot.splitelement,"SplitElement"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.splitsection.SplitSection",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-splitsection",titleText:"Разделить секцию"},0,["window-hotkeys-slot-splitsection"],["component","box","container","window-hotkeys-slot-splitsection"],{component:true,box:true,container:true,"window-hotkeys-slot-splitsection":true},["widget.window-hotkeys-slot-splitsection"],0,[FBEditor.view.window.hotkeys.slot.splitsection,"SplitSection"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.stanza.Stanza",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-stanza",titleText:"Поэма"},0,["window-hotkeys-slot-stanza"],["component","box","container","window-hotkeys-slot-stanza"],{component:true,box:true,container:true,"window-hotkeys-slot-stanza":true},["widget.window-hotkeys-slot-stanza"],0,[FBEditor.view.window.hotkeys.slot.stanza,"Stanza"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.strikethrough.Strikethrough",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-strikethrough",titleText:"Зачёркнутый"},0,["window-hotkeys-slot-strikethrough"],["component","box","container","window-hotkeys-slot-strikethrough"],{component:true,box:true,container:true,"window-hotkeys-slot-strikethrough":true},["widget.window-hotkeys-slot-strikethrough"],0,[FBEditor.view.window.hotkeys.slot.strikethrough,"Strikethrough"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.sub.Sub",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-sub",titleText:"Подстрочный текст"},0,["window-hotkeys-slot-sub"],["component","box","container","window-hotkeys-slot-sub"],{component:true,box:true,container:true,"window-hotkeys-slot-sub":true},["widget.window-hotkeys-slot-sub"],0,[FBEditor.view.window.hotkeys.slot.sub,"Sub"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.subscription.Subscription",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-subscription",titleText:"Подпись"},0,["window-hotkeys-slot-subscription"],["component","box","container","window-hotkeys-slot-subscription"],{component:true,box:true,container:true,"window-hotkeys-slot-subscription":true},["widget.window-hotkeys-slot-subscription"],0,[FBEditor.view.window.hotkeys.slot.subscription,"Subscription"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.subtitle.Subtitle",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-subtitle",titleText:"Подзаголовок"},0,["window-hotkeys-slot-subtitle"],["component","box","container","window-hotkeys-slot-subtitle"],{component:true,box:true,container:true,"window-hotkeys-slot-subtitle":true},["widget.window-hotkeys-slot-subtitle"],0,[FBEditor.view.window.hotkeys.slot.subtitle,"Subtitle"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.sup.Sup",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-sup",titleText:"Надстрочный текст"},0,["window-hotkeys-slot-sup"],["component","box","container","window-hotkeys-slot-sup"],{component:true,box:true,container:true,"window-hotkeys-slot-sup":true},["widget.window-hotkeys-slot-sup"],0,[FBEditor.view.window.hotkeys.slot.sup,"Sup"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.title.Title",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-title",titleText:"Заголовок"},0,["window-hotkeys-slot-title"],["component","box","container","window-hotkeys-slot-title"],{component:true,box:true,container:true,"window-hotkeys-slot-title":true},["widget.window-hotkeys-slot-title"],0,[FBEditor.view.window.hotkeys.slot.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.titlebody.Titlebody",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-titlebody",titleText:"Заголовок для всей книги"},0,["window-hotkeys-slot-titlebody"],["component","box","container","window-hotkeys-slot-titlebody"],{component:true,box:true,container:true,"window-hotkeys-slot-titlebody":true},["widget.window-hotkeys-slot-titlebody"],0,[FBEditor.view.window.hotkeys.slot.titlebody,"Titlebody"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.ul.Ul",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-ul",titleText:"Маркированный список"},0,["window-hotkeys-slot-ul"],["component","box","container","window-hotkeys-slot-ul"],{component:true,box:true,container:true,"window-hotkeys-slot-ul":true},["widget.window-hotkeys-slot-ul"],0,[FBEditor.view.window.hotkeys.slot.ul,"Ul"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.underline.Underline",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-underline",titleText:"Подчёркнутый"},0,["window-hotkeys-slot-underline"],["component","box","container","window-hotkeys-slot-underline"],{component:true,box:true,container:true,"window-hotkeys-slot-underline":true},["widget.window-hotkeys-slot-underline"],0,[FBEditor.view.window.hotkeys.slot.underline,"Underline"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.slot.unstyle.Unstyle",FBEditor.view.window.hotkeys.slot.AbstractSlot,{id:"window-hotkeys-slot-unstyle",titleText:"Убрать форматирование"},0,["window-hotkeys-slot-unstyle"],["component","box","container","window-hotkeys-slot-unstyle"],{component:true,box:true,container:true,"window-hotkeys-slot-unstyle":true},["widget.window-hotkeys-slot-unstyle"],0,[FBEditor.view.window.hotkeys.slot.unstyle,"Unstyle"],0));(Ext.cmd.derive("FBEditor.view.window.hotkeys.Hotkeys",Ext.Window,{id:"window-hotkeys",width:500,height:"80%",modal:true,closeAction:"hide",scrollable:"y",translateText:{title:"Редактор горячих клавиш"},initComponent:function(){var b=this,a=b.translateText;b.title=a.title;Ext.window.Window.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;a=b.getSlots();b.add(a);Ext.window.Window.prototype.afterRender.apply(this,arguments)},getSlots:function(){var b=this,a;a=[{xtype:"window-hotkeys-slot-notes",numberSlot:1},{xtype:"window-hotkeys-slot-notebody",numberSlot:2},{xtype:"window-hotkeys-slot-titlebody",numberSlot:3},{xtype:"window-hotkeys-slot-section",numberSlot:4},{xtype:"window-hotkeys-slot-splitsection",numberSlot:30},{xtype:"window-hotkeys-slot-splitelement",numberSlot:31},{xtype:"window-hotkeys-slot-title",numberSlot:5},{xtype:"window-hotkeys-slot-epigraph",numberSlot:6},{xtype:"window-hotkeys-slot-annotation",numberSlot:7},{xtype:"window-hotkeys-slot-subscription",numberSlot:8},{xtype:"window-hotkeys-slot-div",numberSlot:9},{xtype:"window-hotkeys-slot-subtitle",numberSlot:10},{xtype:"window-hotkeys-slot-blockquote",numberSlot:11},{xtype:"window-hotkeys-slot-pre",numberSlot:12},{xtype:"window-hotkeys-slot-stanza",numberSlot:13},{xtype:"window-hotkeys-slot-ul",numberSlot:14},{xtype:"window-hotkeys-slot-ol",numberSlot:15},{xtype:"window-hotkeys-slot-img",numberSlot:16},{xtype:"window-hotkeys-slot-a",numberSlot:17},{xtype:"window-hotkeys-slot-note",numberSlot:18},{xtype:"window-hotkeys-slot-bold",numberSlot:19},{xtype:"window-hotkeys-slot-italic",numberSlot:20},{xtype:"window-hotkeys-slot-underline",numberSlot:21},{xtype:"window-hotkeys-slot-strikethrough",numberSlot:22},{xtype:"window-hotkeys-slot-spacing",numberSlot:23},{xtype:"window-hotkeys-slot-sub",numberSlot:24},{xtype:"window-hotkeys-slot-sup",numberSlot:25},{xtype:"window-hotkeys-slot-code",numberSlot:26},{xtype:"window-hotkeys-slot-span",numberSlot:27},{xtype:"window-hotkeys-slot-smallcaps",numberSlot:29},{xtype:"window-hotkeys-slot-unstyle",numberSlot:28},{xtype:"window-hotkeys-slot-search",numberSlot:32},{xtype:"window-hotkeys-slot-replace",numberSlot:33}];return a}},0,["window-hotkeys"],["component","box","container","panel","window","window-hotkeys"],{component:true,box:true,container:true,panel:true,window:true,"window-hotkeys":true},["widget.window-hotkeys"],0,[FBEditor.view.window.hotkeys,"Hotkeys"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.tools.button.hotkeys.Hotkeys",Ext.Button,{id:"panel-toolstab-tools-button-hotkeys",tooltipType:"title",html:'<i class="fa fa-keyboard-o"></i>',win:null,translateText:{tooltip:"Редактор горячих клавиш"},initComponent:function(){var b=this,a=b.translateText;b.tooltip=a.tooltip;Ext.button.Button.prototype.initComponent.apply(this,arguments)},handler:function(){var a=this,b;b=a.getWindow();b.show()},getWindow:function(){var a=this,b;b=a.win||Ext.create("FBEditor.view.window.hotkeys.Hotkeys");a.win=b;return b}},0,["panel-toolstab-tools-button-hotkeys"],["component","box","button","panel-toolstab-tools-button-hotkeys"],{component:true,box:true,button:true,"panel-toolstab-tools-button-hotkeys":true},["widget.panel-toolstab-tools-button-hotkeys"],0,[FBEditor.view.panel.toolstab.tools.button.hotkeys,"Hotkeys"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.tools.button.unprintsymbols.UnprintSymbols",Ext.Button,{id:"panel-toolstab-tools-button-unprintsymbols",enableToggle:true,tooltipType:"title",html:'<i class="fa fa-paragraph"></i>',tooltip:"Показывать непечатаемые символы в редакторе текста",handler:function(){var c=this,a=c.isPressed(),b;b=Ext.ComponentQuery.query("editor-viewport");Ext.each(b,function(d){d.showUnprintedSymbols(a)})},isPressed:function(){return this.pressed}},0,["panel-toolstab-tools-button-unprintsymbols"],["component","box","button","panel-toolstab-tools-button-unprintsymbols"],{component:true,box:true,button:true,"panel-toolstab-tools-button-unprintsymbols":true},["widget.panel-toolstab-tools-button-unprintsymbols"],0,[FBEditor.view.panel.toolstab.tools.button.unprintsymbols,"UnprintSymbols"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.tools.button.xmlwordwrap.XmlWordWrap",Ext.Button,{id:"panel-toolstab-tools-button-xmlwordwrap",enableToggle:true,tooltipType:"title",html:'<i class="fa fa-exchange"></i>',tooltip:"Переносить длинные строки в редакторе XML",handler:function(){var b=this,a=b.isPressed(),c=FBEditor.view.panel.main.xml.Manager.getInstance();c.lineWrap(a)},isPressed:function(){return this.pressed}},0,["panel-toolstab-tools-button-xmlwordwrap"],["component","box","button","panel-toolstab-tools-button-xmlwordwrap"],{component:true,box:true,button:true,"panel-toolstab-tools-button-xmlwordwrap":true},["widget.panel-toolstab-tools-button-xmlwordwrap"],0,[FBEditor.view.panel.toolstab.tools.button.xmlwordwrap,"XmlWordWrap"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.tools.Tools",Ext.panel.Panel,{id:"panel-toolstab-tools",title:"Инструменты",translateText:{version:"Версия: "},initComponent:function(){var b=this,a;a=FBEditor.version;b.tbar=[{xtype:"component",style:{color:"gray"},html:b.translateText.version+a},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-tools-button-unprintsymbols"},{xtype:"panel-toolstab-tools-button-xmlwordwrap"},{xtype:"panel-toolstab-tools-button-hotkeys"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-tools"],["component","box","container","panel","panel-toolstab-tools"],{component:true,box:true,container:true,panel:true,"panel-toolstab-tools":true},["widget.panel-toolstab-tools"],0,[FBEditor.view.panel.toolstab.tools,"Tools"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsTab",Ext.tab.Panel,{id:"panel-main-toolstab",controller:"panel.main.toolstab",activeTab:"panel-toolstab-main",items:[{xtype:"panel-toolstab-file"},{xtype:"panel-toolstab-main"},{xtype:"panel-toolstab-view"},{xtype:"panel-toolstab-tools"}]},0,["panel-main-toolstab"],["component","box","container","panel","tabpanel","panel-main-toolstab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"panel-main-toolstab":true},["widget.panel-main-toolstab"],0,[FBEditor.view.panel.main.tools,"ToolsTab"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.FileNameController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.setActiveItem("panel-filename-field")},onAfterRender:function(){var b=this,a=FBEditor.file.Manager.defaultFb3FileName;b.onSetName(a);b.onCheckPosition()},onSetName:function(d){var c=this,a=c.getView(),b=a.items;b.each(function(e){e.setValue(d)});a.setActiveItem("panel-filename-display")},onCheckPosition:function(){var b=this,a=b.getView(),c;if(a.rendered){c=Ext.getCmp("panel-main-tools");a.setWidth(c.getWidth()-440)}}},0,0,0,0,["controller.panel.filename"],0,[FBEditor.view.panel.filename,"FileNameController"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.display.Display",Ext.form.field.Display,{id:"panel-filename-display",cls:"panel-filename-display",width:"100%"},0,["panel-filename-display"],["component","box","field","displayfield","panel-filename-display"],{component:true,box:true,field:true,displayfield:true,"panel-filename-display":true},["widget.panel-filename-display"],0,[FBEditor.view.panel.filename.display,"Display"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.field.FieldController",Ext.app.ViewController,{onBlur:function(){var b=this,a=b.getView(),c=a.getValue();b.setNewValue(c)},onSpecialKey:function(f,d){var c=this,a=c.getView(),g=a.getValue(),b=d.getKey();if(b===d.ENTER||b===d.ESC){g=b===d.ENTER?g:c.getDisplayValue();c.setNewValue(g)}},onActivate:function(){var b=this,a=b.getView(),c=a.getValue();a.focus([c.length,c.length])},setNewValue:function(d){var c=this,b=c.getView(),e=d,a;a=Ext.getCmp("panel-filename");e=b.isValid()?e:c.getDisplayValue();a.fireEvent("setName",e)},getDisplayValue:function(){return Ext.getCmp("panel-filename").child("panel-filename-display").getValue()}},0,0,0,0,["controller.panel.filename.field"],0,[FBEditor.view.panel.filename.field,"FieldController"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.field.Field",Ext.form.field.Text,{id:"panel-filename-field",controller:"panel.filename.field",border:false,allowBlank:false,maxLength:250,enforceMaxLength:true,width:"100%",cls:"panel-filename-field",listeners:{blur:"onBlur",activate:"onActivate",specialkey:"onSpecialKey"}},0,["panel-filename-field"],["component","box","field","textfield","panel-filename-field"],{component:true,box:true,field:true,textfield:true,"panel-filename-field":true},["widget.panel-filename-field"],0,[FBEditor.view.panel.filename.field,"Field"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.FileName",Ext.container.Container,{id:"panel-filename",controller:"panel.filename",floating:true,autoShow:true,shadow:false,border:false,monitorResize:true,plain:true,x:400,y:3,layout:"card",listeners:{click:{element:"el",fn:"onClick"},setName:"onSetName",afterrender:"onAfterRender",checkPosition:"onCheckPosition"},items:[{xtype:"panel-filename-display"},{xtype:"panel-filename-field"}]},0,["panel-filename"],["component","box","container","panel-filename"],{component:true,box:true,container:true,"panel-filename":true},["widget.panel-filename"],0,[FBEditor.view.panel.filename,"FileName"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.Tools",FBEditor.view.panel.main.Abstract,{id:"panel-main-tools",controller:"panel.main.tools",panelName:"tools",region:"north",bodyPadding:0,stateful:false,split:false,height:75,margin:"0 0 4px 0",listeners:{resize:"onResize"},items:[{xtype:"panel-main-toolstab"},{xtype:"panel-filename"}]},0,["panel-main-tools"],["component","box","container","panel","panel-main-tools"],{component:true,box:true,container:true,panel:true,"panel-main-tools":true},["widget.panel-main-tools"],0,[FBEditor.view.panel.main.tools,"Tools"],0));(Ext.cmd.derive("FBEditor.view.panel.main.AbstractDetach",FBEditor.view.panel.main.Abstract,{listeners:{resize:"onResize",detachpanel:"onDetachPanel"},detachable:false,initComponent:function(){var a=this;if(a.detachable){a.tools=[{type:"maximize",callback:a.detachPanel}]}FBEditor.view.panel.main.Abstract.prototype.initComponent.apply(this,arguments)},detachPanel:function(a){a.fireEvent("detachpanel",a)}},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main,"AbstractDetach"],0));(Ext.cmd.derive("FBEditor.view.panel.main.DetachController",Ext.app.ViewController,{onResize:function(d,c,a,b,e){if(c!==b){Ext.getCmp("main").fireEvent("checkWidthPanels")}},onDetachPanel:function(a){var b,c,d;b=a.panelName;c=a.getBox();d=window.open("#panel/"+b,b,"width="+c.width+",height="+c.height+",top="+c.top+",left="+c.left+",toolbar=no,location=no");if(d){FBEditor.childWindow[b]=d}}},0,0,0,0,0,0,[FBEditor.view.panel.main,"DetachController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.NavigationController",FBEditor.view.panel.main.DetachController,{},0,0,0,0,["controller.panel.main.navigation"],0,[FBEditor.view.panel.main.navigation,"NavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.section.PanelController",Ext.app.ViewController,{onSync:function(){var c=this,a=c.getView(),b;b=a.getButtons();Ext.each(b,function(d){d.fireEvent("sync")})},onEnablePanel:function(){var b=this,a=b.getView();a.setVisible(true);b.onSync()},onDisablePanel:function(){var b=this,a=b.getView();a.setVisible(false)}},0,0,0,0,["controller.panel.navigation.section"],0,[FBEditor.view.panel.main.navigation.section,"PanelController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.section.button.AbstractButtonController",Ext.app.ViewController,{onClick:function(c,h){var d=this,a=d.getView(),i=a.cmdClass,b=a.getEditorManager(),g,f;if(h){h.stopPropagation()}f=Ext.create(i);if(f.execute()){g=b.getHistory();g.add(f)}},onSync:function(){var b=this,a=b.getView();if(a.isActiveSelection()){a.setDisabled(false)}else{a.setDisabled(true)}}},0,0,0,0,["controller.panel.navigation.section.button"],0,[FBEditor.view.panel.main.navigation.section.button,"AbstractButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.section.button.AbstractButton",Ext.Button,{controller:"panel.navigation.section.button",listeners:{click:"onClick",sync:"onSync"},tooltipType:"title",cmdClass:"",getEditorManager:function(){return FBEditor.getEditorManager()},isActiveSelection:function(){return false}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.main.navigation.section.button,"AbstractButton"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.section.button.left.Button",FBEditor.view.panel.main.navigation.section.button.AbstractButton,{html:'<i class="fa fa-arrow-left"></i>',tooltip:"Сдвинуть секцию влево",cmdClass:"FBEditor.editor.command.section.LeftCommand",isActiveSelection:function(){var e=this,d=false,c={},b,f,a;f=window.getSelection();a=f.rangeCount?f.getRangeAt(0):null;if(a&&a.commonAncestorContainer.getElement){c.node=a.commonAncestorContainer.getElement();b=c.node.getManager();c.focus=b.getFocusElement();if(c.focus){c.section=c.focus.isSection?c.focus:c.focus.getParentName("section");c.parent=c.section&&c.section.parent?c.section.parent:null;d=c.parent&&c.parent.isSection?true:d}}return d}},0,["panel-navigation-section-button-left"],["component","box","button","panel-navigation-section-button-left"],{component:true,box:true,button:true,"panel-navigation-section-button-left":true},["widget.panel-navigation-section-button-left"],0,[FBEditor.view.panel.main.navigation.section.button.left,"Button"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.section.button.right.Button",FBEditor.view.panel.main.navigation.section.button.AbstractButton,{html:'<i class="fa fa-arrow-right"></i>',tooltip:"Сдвинуть секцию вправо",cmdClass:"FBEditor.editor.command.section.RightCommand",isActiveSelection:function(){var e=this,d=false,c={},b,f,a;f=window.getSelection();a=f.rangeCount?f.getRangeAt(0):null;if(a&&a.commonAncestorContainer.getElement){c.node=a.commonAncestorContainer.getElement();b=c.node.getManager();c.focus=b.getFocusElement();if(c.focus){c.section=c.focus.isSection?c.focus:c.focus.getParentName("section");c.sectionPrev=c.section?c.section.prev():null;d=c.sectionPrev&&c.sectionPrev.isSection?true:d}}return d}},0,["panel-navigation-section-button-right"],["component","box","button","panel-navigation-section-button-right"],{component:true,box:true,button:true,"panel-navigation-section-button-right":true},["widget.panel-navigation-section-button-right"],0,[FBEditor.view.panel.main.navigation.section.button.right,"Button"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.section.Panel",Ext.Panel,{id:"panel-navigation-section",controller:"panel.navigation.section",listeners:{sync:"onSync",enablePanel:"onEnablePanel",disablePanel:"onDisablePanel"},defaults:{margin:"0 5 0 0"},margin:"5 0 5 45",hidden:true,buttonLeft:null,buttonRight:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-navigation-section-button-left"},{xtype:"panel-navigation-section-button-right"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},getButtons:function(){var b=this,a;a=[b.getButtonLeft(),b.getButtonRight()];return a},getButtonLeft:function(){var b=this,a;a=b.buttonLeft||b.down("panel-navigation-section-button-left");b.buttonLeft=a;return a},getButtonRight:function(){var b=this,a;a=b.buttonRight||b.down("panel-navigation-section-button-right");b.buttonRight=a;return a}},0,["panel-navigation-section"],["component","box","container","panel","panel-navigation-section"],{component:true,box:true,container:true,panel:true,"panel-navigation-section":true},["widget.panel-navigation-section"],0,[FBEditor.view.panel.main.navigation.section,"Panel"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.TreeNavigationController",Ext.app.ViewController,{onClearSelection:function(c){var d=this,a=d.getView(),b=a.items,e=c.id;b.each(function(f){if(f.id!==e&&f.clearSelection){f.clearSelection()}})}},0,0,0,0,["controller.panel.treenavigation"],0,[FBEditor.view.panel.treenavigation,"TreeNavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.AbstractTree",Ext.tree.Panel,{cls:"panel-treenavigation",listeners:{itemclick:"onItemClick",itemdblclick:"onItemDblClick",beforeitemclick:"onBeforeItemClick",selectionchange:"onSelectionChange",select:"onSelect"},syncContentId:"",cmdName:"",afterRender:function(){var a=this;Ext.defer(function(){a.syncContent()},2500);Ext.tree.Panel.prototype.afterRender.apply(this,arguments)},clearSelection:function(){var c=this,b=c.getSelection(),a=c.getView();if(b.length){a.deselect(b[0],false)}},openContent:function(){var c=this,b=c.cmdName,a=FBEditor.view.panel.main.xml.Manager.getInstance(),e,d;if(!c.isActivePanel()){if(!c.isActivePanel("main-xml")){e=Promise.resolve(true)}else{e=a.sync()}e.then(function(f){if(f){d=Ext.create(b);if(d.execute()){FBEditor.HistoryCommand.add(d)}}})}},isActivePanel:function(f){var c=this,e=f||c.syncContentId,d=FBEditor.getBridgeWindow(),a,b;a=d.Ext.getCmp("panel-main-content");b=a.isActiveItem(e);return b},syncContent:function(){var b=this,e=b.syncContentId,c=FBEditor.getBridgeWindow(),a,d;a=c.Ext.getCmp("panel-main-content");d=a.getLayout().getActiveItem();if(d.id===e){b.selectPath("/root")}}},0,0,["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},0,0,[FBEditor.view.panel.treenavigation,"AbstractTree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.AbstractTreeController",Ext.app.ViewController,{onItemClick:function(d,b){var c=this,a=c.getView();c.clearSelection();if(a.openContent){if(!a.inWindow){a.openContent()}Ext.getCmp("panel-treenavigation").saveSelectData({view:c.getView(),node:d,record:b});Ext.getCmp("panel-treenavigation").restoreSelectData()}},onItemDblClick:function(b,a){},onBeforeItemClick:function(c,a){var b=this;c.deselect(a,false);Ext.getCmp("panel-treenavigation").restoreSelectData()},onSelect:function(){},onSelectionChange:function(){},clearSelection:function(){var c=this,a=c.getView(),b=a.ownerCt;b.fireEvent("clearSelection",a)}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation,"AbstractTreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.navigation.NavigationController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(f,a){var e=this,h=FBEditor.getBridgeWindow(),g=a.getData(),c,b,d;FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);c=h.FBEditor.resource.Manager;if((b=c.getSelectFunction())&&!a.isLeaf()){b(g)}else{if(!a.isLeaf()){d=g.path?g.path:"";c.setActiveFolder(d)}}}},0,0,0,0,["controller.panel.resources.navigation"],0,[FBEditor.view.panel.resources.navigation,"NavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.navigation.Navigation",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-resources-navigation",controller:"panel.resources.navigation",useArrows:true,animate:false,manageHeight:false,syncContentId:"panel-resources",cmdName:"FBEditor.command.OpenResources",visibleFiles:false,expandableLastFolder:false,inWindow:false,initComponent:function(){var a=this;a.store=Ext.create("FBEditor.store.resource.Navigation");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,c=FBEditor.getBridgeWindow(),a;a=c.FBEditor.resource.Manager.getData();if(a.length){b.loadData(a)}FBEditor.view.panel.treenavigation.AbstractTree.prototype.afterRender.apply(this,arguments)},loadData:function(b){var a=this,c;c=a.getTreeData(b);a.store.loadData(c);Ext.defer(function(){a.restoreOpenNode()},200)},getTreeData:function(d){var c=this,b=c.store.getRoot().data,e=[],a;Ext.each(d,function(f){var g;g=Ext.clone(c.parseNameResource(f.name,{path:"",isFile:!f.isFolder}));if(g){if(e.length&&g.children&&g.children.length){e=c.groupTreeData(g,e)}else{e.push(g)}}});a=[{root:true,text:b.text,expandable:b.expandable,icon:b.icon,cls:b.cls,iconCls:b.iconCls,children:e}];return a},parseNameResource:function(a,g){var h=this,e=a,d=g,c={},b=null,i,k,f,j;i=e.indexOf("/");f=i===-1;k=f?e:e.substring(0,i);c.text=k;j=d.isFile||(f&&e.indexOf(".")!==-1?true:false);if(!h.visibleFiles){c.visible=j?false:true}c.leaf=j?true:false;if(f&&!j){b=[]}c.path=d.path?d.path+"/"+k:k;c.id=c.path;k=e.slice(i+1);c.childrenPath=k;c.expandable=k.indexOf("/")===-1?false:true;c.icon=" ";c.cls="treenavigation-children treenavigation-children-resource";if(!f){b=[];b.push(h.parseNameResource(k,Ext.clone(c)))}c.children=Ext.clone(b);return c},groupTreeData:function(b,c){var a=this,d=c;Ext.each(d,function(f,e){var g;if(f.text===b.text&&f.children&&b.children){if(f.children.length===0){g=b.children}else{g=b.children[0]?a.groupTreeData(b.children[0],f.children):[]}d[e].children=g;d[e].expandable=true}else{if(c.length===e+1){d.push(b)}}});return d},restoreOpenNode:function(){var b=this,d=FBEditor.getBridgeWindow(),a=b.store.getRoot().data.text,c;c=d.FBEditor.resource.Manager.getActiveFolder();c=c?"/"+c:"";c="/"+a+c;b.expandPath(c,"text","/",function(h,f){var g,e;if(h){g=f.getData();e=g.path?g.path:"";d.FBEditor.resource.Manager.setActiveFolder(e)}})},selectPath:function(d){var b=this,a=b.store.getRoot().data.text,c=d;c=c.indexOf("/root")===0?c:"/"+a+"/"+c;FBEditor.view.panel.treenavigation.AbstractTree.prototype.selectPath.call(this,c,"text")},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():c.callParrent();return a}},0,["panel-resources-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-resources-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-resources-navigation":true},["widget.panel-resources-navigation"],0,[FBEditor.view.panel.resources.navigation,"Navigation"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.TreeController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(c,a){var b=this,e=FBEditor.getBridgeWindow(),d=a.getData();FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);if(d.anchor){e.location="#"+d.anchor}}},0,0,0,0,["controller.panel.desc.navigation"],0,[FBEditor.view.panel.treenavigation.desc,"TreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.TreeStore",Ext.data.TreeStore,{defaultRootText:"Описание",rootVisible:true,proxy:{type:"memory"},root:{icon:" ",cls:"treenavigation-root treenavigation-root-desc",children:[{text:"Название произведения",expandable:false,anchor:"desc-fieldset-title",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Обложка",expandable:false,anchor:"desc-fieldset-title",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Серия",expandable:false,anchor:"desc-fieldset-sequence",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Аннотация",expandable:false,anchor:"desc-fieldset-annotation",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Классификация произведения",expandable:false,anchor:"desc-fieldset-classification",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Связанные персоны (автор, переводчик и т.д.)",expandable:false,anchor:"desc-fieldset-relations-subject",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Периодическое издание",expandable:false,anchor:"desc-fieldset-periodical",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Связанные объекты",expandable:false,anchor:"desc-fieldset-relations-object",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Информация о бумажной публикации",expandable:false,anchor:"desc-fieldset-publishInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Комментарии редактора",expandable:false,anchor:"desc-fieldset-history",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Пользовательская информация",expandable:false,anchor:"desc-fieldset-customInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Информация о файле",expandable:false,anchor:"desc-fieldset-documentInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"}]}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation.desc,"TreeStore"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.Tree",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-desc-navigation",controller:"panel.desc.navigation",useArrows:true,animate:false,syncContentId:"form-desc",cmdName:"FBEditor.command.OpenDesc",initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.treenavigation.desc.TreeStore");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)}},0,["panel-desc-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-desc-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-desc-navigation":true},["widget.panel-desc-navigation"],0,[FBEditor.view.panel.treenavigation.desc,"Tree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.TreeController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(c,a){var b=this;FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);b.setFocusElement(a)},setFocusElement:function(b){var f=this,a=f.getView(),g=b.getData(),e={},c={},d=FBEditor.getEditorManager();if(!a.isActivePanel()){Ext.defer(function(){f.setFocusElement(b)},200)}else{e.node=d.getElementById(g.elementId);if(e.node){c.nodes=Ext.Object.getValues(e.node.nodes);Ext.Array.each(c.nodes,function(h){h.scrollIntoView()});c.first=c.nodes[0];while(c.first.firstChild){c.first=c.first.firstChild}e.first=c.first.getElement();d.setCursor({startNode:c.first})}}}},0,0,0,0,["controller.panel.body.navigation"],0,[FBEditor.view.panel.treenavigation.body,"TreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.TreeStore",Ext.data.TreeStore,{proxy:{type:"memory"},root:{icon:" ",cls:"treenavigation-root treenavigation-root-body"},defaultRootText:"Текст",rootVisible:true},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation.body,"TreeStore"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.Tree",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-body-navigation",controller:"panel.body.navigation",stateId:"panel-body-navigation",stateful:true,useArrows:true,animate:false,selModel:{preventFocus:true},syncContentId:"main-editor",cmdName:"FBEditor.command.OpenBody",initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.treenavigation.body.TreeStore");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a,c;a=FBEditor.getEditorManager();c=a.getContent();if(c){b.loadData(c)}FBEditor.view.panel.treenavigation.AbstractTree.prototype.afterRender.apply(this,arguments)},destroy:function(){var a=this;a.saveStateNodes();FBEditor.view.panel.treenavigation.AbstractTree.prototype.destroy.apply(this,arguments)},loadData:function(b){var a=this,c;a.saveStateNodes();c=a.getTreeData(b);a.store.loadData(c);a.getView().expand(a.store.first())},getTreeData:function(b){var d=this,c=d.store.getRoot().data,e,a;e=d.getTreeChildren(b);a=[{root:true,text:c.text,expandable:c.expandable,icon:c.icon,cls:c.cls,iconCls:c.iconCls,children:e.children,elementId:b.elementId}];return a},getTreeChildren:function(c,a){var d=this,e=null,b=FBEditor.getEditorManager();if(c.showedOnTree){if(c.children){a=a||"";c.treePath=a+"/"+c.elementId}e={};e.text=c.getNameTree();e.elementId=c.elementId;e.expanded=b.stateExpandedNodesTree[c.elementId]?true:false;e.icon=" ";e.cls="treenavigation-children treenavigation-children-body";e.cls+=c.cls?" treenavigation-children-"+c.cls:"";Ext.Array.each(c.children,function(f){var g;if(f.showedOnTree){g=d.getTreeChildren(f,c.treePath);if(g){e.children=e.children||[];e.children.push(g)}}else{Ext.Array.each(f.children,function(h){g=d.getTreeChildren(h,c.treePath);if(g){e.children=e.children||[];e.children.push(g)}})}});e.leaf=!e.children}return e},saveStateNodes:function(c){var b=this,a=FBEditor.getEditorManager();c=c||b.store.getData().items[0].data.children;Ext.Array.each(c,function(d){if(d.expanded){a.stateExpandedNodesTree[d.elementId]=true}else{if(a.stateExpandedNodesTree[d.elementId]){delete a.stateExpandedNodesTree[d.elementId]}}if(d.children&&d.children.length){b.saveStateNodes(d.children)}})},expandElement:function(a){var b=this;if(Ext.isEmpty(a.treePath)&&a.parent){b.expandElement(a.parent);return}b.selectPath(a.treePath,"elementId")},selectRoot:function(){var b=this,a=b.getRootNode(),c;c="/"+a.id;b.selectPath(c)},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():FBEditor.view.panel.treenavigation.AbstractTree.prototype.getRootNode.call(this);return a}},0,["panel-body-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-body-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-body-navigation":true},["widget.panel-body-navigation"],0,[FBEditor.view.panel.treenavigation.body,"Tree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.TreeNavigation",Ext.panel.Panel,{id:"panel-treenavigation",controller:"panel.treenavigation",listeners:{clearSelection:"onClearSelection"},defaults:{width:"100%"},_selectData:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-desc-navigation"},{xtype:"panel-body-navigation"},{xtype:"panel-navigation-section"},{xtype:"panel-xml-navigation"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,c,a;c=Ext.getCmp("window-resource");a=Ext.getCmp("window-resource-tree");if(c&&!c.isHidden()){c.getWindowPanelResourcesNavigation().add({xtype:"panel-resources-navigation"})}else{if(a&&!a.isHidden()){a.getWindowPanelResourcesTreeNavigation().add({xtype:"panel-resources-navigation"})}else{b.insert(1,{xtype:"panel-resources-navigation"})}}Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},saveSelectData:function(b){var a=this;a._selectData=b},restoreSelectData:function(){var b=this,c=b._selectData,a;if(c&&c.view){a=c.record.getData();if(a.path){c.view.selectPath(a.path)}else{c.view.selectPath(c.record.getPath())}}}},0,["panel-treenavigation"],["component","box","container","panel","panel-treenavigation"],{component:true,box:true,container:true,panel:true,"panel-treenavigation":true},["widget.panel-treenavigation"],0,[FBEditor.view.panel.treenavigation,"TreeNavigation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.Navigation",FBEditor.view.panel.main.AbstractDetach,{id:"panel-main-navigation",controller:"panel.main.navigation",title:"Навигация",panelName:"navigation",layout:"anchor",overflowY:"auto",defaults:{anchor:"100%"},initComponent:function(){var a=this;a.items=[{xtype:"panel-treenavigation"}];FBEditor.view.panel.main.AbstractDetach.prototype.initComponent.apply(this,arguments)}},0,["panel-main-navigation"],["component","box","container","panel","panel-main-navigation"],{component:true,box:true,container:true,panel:true,"panel-main-navigation":true},["widget.panel-main-navigation"],0,[FBEditor.view.panel.main.navigation,"Navigation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.content.ContentController",Ext.app.ViewController,{onResize:function(d,c,a,b,e){if(c!==b){if(c<d.getMinWidth()){d.setWidth(d.getMinWidth())}}},onContentBody:function(){var g=this,a=g.getView(),f=a.getPanelMainToolstab(),h=a.getToolstab(),b=FBEditor.getEditorManager(true),e=a.getSectionPanel(),c,d;a.setActiveItem("main-editor");f.setActiveItem("panel-toolstab-main");c=b.getEditor();d=c.getToolbar();h.setActiveToolbar(d);e.fireEvent("enablePanel")},onContentXml:function(){var f=this,a=f.getView(),g=a.getToolstab(),b=FBEditor.getEditorManager(true),e=a.getSectionPanel(),c,d;a.setActiveItem("main-xml");d=g.getActiveToolbar();if(d){c=d.getEditor();b=c.getManager();b.disableButtons()}e.fireEvent("disablePanel")},onContentDesc:function(){var g=this,a=g.getView(),f=a.getPanelMainToolstab(),h=a.getToolstab(),e=a.getSectionPanel(),b,c,d;a.setActiveItem("form-desc");f.setActiveItem("panel-toolstab-main");c=Ext.getCmp("form-desc-annotation").getBodyEditor();d=c.getToolbar();h.setActiveToolbar(d);b=c.getManager();b.syncButtons();e.fireEvent("disablePanel")},onContentResources:function(){var f=this,a=f.getView(),g=a.getToolstab(),e=a.getSectionPanel(),b,c,d;a.setActiveItem("panel-resources");d=g.getActiveToolbar();if(d){c=d.getEditor();b=c.getManager();b.disableButtons()}e.fireEvent("disablePanel")},onContentEmpty:function(){var b=this,a=b.getView();a.setActiveItem("panel-empty")}},0,0,0,0,["controller.panel.main.content"],0,[FBEditor.view.panel.main.content,"ContentController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.EditorController",FBEditor.editor.view.EditorController,{onLoadData:function(){var e=this,a=e.getView(),c=a.getViewports(),d=a.getPanelContent(),b=a.getManager(),f,g;g=a.viewports.north;Ext.Array.each(c,function(h){if(h.rendered){f=b.getNode(h.id);h.loadData(f);if(h.id!==g.id&&d.isActiveItem("main-editor")){h.fireEvent("syncScroll",g)}}})},onSplit:function(){var b=this,a=b.getView();a.addSouthViewport()},onUnsplit:function(){var b=this,a=b.getView();a.removeSouthViewport()},onSyncContent:function(a){var e=this,b=e.getView(),d=b.getViewports(),c=b.getManager(),f;Ext.Array.each(d,function(g){if(g.id!==a.id){f=c.getNode(g.id);g.loadData(f)}})}},0,0,0,0,["controller.view.main.editor"],0,[FBEditor.view.panel.main.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.proxy.Hotkeys",Ext.Base,{HOTKEY_SLOT_SEARCH:32,HOTKEY_SLOT_REPLACE:33,proxy:null,hotkeysLinks:null,constructor:function(a){var b=this;b.proxy=a},init:function(a){var c=this,b=c.getHotkeysManager();c.manager=a;c.setEscFunction(a.doEsc);c.setHotkeysFn(a.doSearch,c.HOTKEY_SLOT_SEARCH);c.setHotkeysFn(a.doReplace,c.HOTKEY_SLOT_REPLACE);b.on({scope:c,changed:c.changeHotkeys})},getProxy:function(){return this.proxy},getLib:function(){var b=this,a=b.getProxy();return a.getLib()},getHotkeysManager:function(){return FBEditor.hotkeys.Manager},setEscFunction:function(b){var c=this,d=c.getLib(),a;a=d.getOption("extraKeys");a=a||{};a.Esc=b;d.setOption("extraKeys",a)},setHotkeysFn:function(g,d){var f=this,e=f.getLib(),a=f.getHotkeysManager(),j,i,h,b,c;j=f.getLinkKeys(d);f.setLinkFn(d,g);h=a.getSlot(d);b=h.getData();i=f.getFormatHotkeys(b);c=e.getOption("extraKeys");c=c||{};if(c[j]){delete c[j]}c[i]=g;e.setOption("extraKeys",c)},changeHotkeys:function(d){var c=this,a=d.slot,b;b=c.getLinkFn(a);if(b){c.setHotkeysFn(b,a)}},getFormatHotkeys:function(b){var c,a;a="-";c=b.shift?"Shift"+a:"";c+=b.ctrl?"Ctrl"+a:"";c+=b.alt?"Alt"+a:"";c+=b.key?b.key:"";return c},setLinkFn:function(a,d){var f=this,b=f.hotkeysLinks,c=f.getHotkeysManager(),e,h,g;h=c.getSlot(a);g=h.getData();e=f.getFormatHotkeys(g);b=b||{};b[a]={numberSlot:a,keys:e,fn:d};f.hotkeysLinks=b},getLinkFn:function(a){var d=this,b=d.hotkeysLinks,c;c=b&&b[a]?b[a].fn:null;return c},getLinkKeys:function(a){var d=this,b=d.hotkeysLinks,c;c=b&&b[a]?b[a].keys:null;return c}},1,0,0,0,0,0,[FBEditor.view.panel.main.xml.proxy,"Hotkeys"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.proxy.search.State",Ext.Base,{config:{queryText:null,query:null,isReg:null,ignoreCase:null,words:null,cursor:null,overlay:null,count:null}},0,0,0,0,0,0,[FBEditor.view.panel.main.xml.proxy.search,"State"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.proxy.search.Search",Ext.Base,{proxy:null,sate:null,constructor:function(a){var b=this;b.proxy=a;b.state=Ext.create("FBEditor.view.panel.main.xml.proxy.search.State")},getProxy:function(){return this.proxy},getState:function(){return this.state},getLib:function(){var b=this,a=b.getProxy();return a.getLib()},find:function(h,b,e,g){var i=this,f=i.getProxy(),a=i.getState(),d=0,c,j;a.setQueryText(h);a.setIgnoreCase(e);a.setIsReg(b);a.setWords(g);c=a.getOverlay();f.removeOverlay(c);if(!h){return false}c=i.getOverlay();a.setOverlay(c);if(c){f.addOverlay(c)}j=i.getCursor();a.setCursor(j);if(j){i.toCursor();d=i.getCount()}a.setCount(d);return d},findNext:function(){var b=this,c=b.getState(),a=c.getCount(),d;if(a){d=b.getCursor();c.setCursor(d);b.toCursor()}},findPrev:function(){var b=this,c=b.getState(),a=c.getCount(),d;if(a){d=b.getCursor(true);c.setCursor(d);b.toCursor()}},replace:function(j){var n=this,k=n.getProxy(),b=n.getState(),m=j,d,g,c,f,l,a,h,o;o=b.getCursor();h=b.getCount();a=b.getIsReg();if(o){f=b.getQueryText();if(f!==m){if(a){c=k.getSelection();l=n.parseQuery(true);g=c.match(l);if(g[1]){for(var e=1;e<g.length;e++){d=new RegExp("\\$"+e,"g");m=m.replace(d,g[e])}}}o.replace(m)}n.findNext();h=h-1;b.setCount(h)}return h},replaceAll:function(d){var e=this,f=e.getState(),c=e.getProxy(),b=false,a,g;a=f.getQueryText();if(a!==d){c.operation(function(){while(g=f.getCursor()){e.replace(d);b=true}})}return b},removeOverlay:function(){var c=this,d=c.getState(),b=c.getProxy(),a;a=d.getOverlay();b.removeOverlay(a)},getCount:function(){var d=this,b=d.getProxy(),g=d.getState(),f=g.getQueryText(),c=0,a,e;if(f){f=d.parseQuery();if(f){e=b.getData();a=e.match(f);c=a?a.length:c}}return c},toCursor:function(){var c=this,b=c.getProxy(),d=c.getState(),a=20,e,g,f;e=d.getCursor();if(e){g=e.from();f=e.to();b.setSelection(g,f);b.scrollIntoView(g,f,a)}},getCursor:function(f){var m=this,i=m.getProxy(),k=m.getLib(),b=m.getState(),l=b.getQueryText(),c=b.getIsReg(),g=b.getIgnoreCase(),j=b.getWords(),a=m.getBorderRegExp(),p=m.getBorderRegExp(true),h,n,o;if(c||j){try{l=m.compileQuery(l);l=j?a+l+p:l;l=new RegExp(l,g?"giu":"gu")}catch(d){return false}}n=i.getCursor(f?"from":"to");o=k.getSearchCursor(l,n,{caseFold:g});h=o.find(f);if(!h){n=f?i.createPos(k.lastLine()):i.createPos(k.firstLine(),0);o=k.getSearchCursor(l,n,{caseFold:g});h=o.find(f)}o=h?o:false;return o},parseQuery:function(k){var j=this,b=j.getState(),d=b.getQueryText(),c=b.getIsReg(),g=b.getIgnoreCase(),i=b.getWords(),a=j.getBorderRegExp(),m=j.getBorderRegExp(true),l,h;try{l=k?"u":"gu";l=g?l+"i":l;if(!c){d=d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}else{d=j.compileQuery(d)}h=i?a+d+m:d;h=new RegExp(h,l)}catch(f){return false}return h},compileQuery:function(b){var c,a;a=FBEditor.ExcludedCompiler.regexpW;c=b.replace(/\\\w/g,a);return c},getOverlay:function(){var b=this,c,a;function d(f){var e;c.lastIndex=f.pos;e=c.exec(f.string);if(e&&e.index==f.pos){f.pos+=e[0].length||1;return"searching"}else{if(e){f.pos=e.index}else{f.skipToEnd()}}}c=b.parseQuery();if(!c){return false}a={token:d};return a},getBorderRegExp:function(b){var a;a=(b?")":"")+"(?:"+(b?"$":"^")+"|[^_0-9a-zA-Zа-яА-ЯёЁ])"+(b?"":"(");a="\\b";return a}},1,0,0,0,0,0,[FBEditor.view.panel.main.xml.proxy.search,"Search"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.proxy.Editor",Ext.Base,{lib:null,manager:null,search:null,hotkeys:null,constructor:function(){var a=this;a.lib=CodeMirror;a.search=Ext.create("FBEditor.view.panel.main.xml.proxy.search.Search",a);a.hotkeys=Ext.create("FBEditor.view.panel.main.xml.proxy.Hotkeys",a)},init:function(b){var d=this,f=d.getLib(),e=d.hotkeys,a,c;d.manager=b;a=b.getPanel();c=a.getNode();d.lib=f=f(c,{mode:"xml"});f.setSize("100%","100%");f.getManager=function(){return b};e.init(b)},createPos:function(a,b){return CodeMirror.Pos(a,b)},getLib:function(){return this.lib},getSearch:function(){return this.search},setData:function(c){var b=this,d=b.getLib(),a;d.setValue(c)},getData:function(){var a=this,c=a.getLib(),b;b=c.getValue();return b},setLineWrap:function(a){var b=this,c=b.getLib();c.setOption("lineWrapping",a)},getLineCount:function(){var b=this,c=b.getLib(),a;a=c.lineCount();return a},getCursor:function(d){var a=this,c=a.getLib(),b;b=c.getCursor(d);return b},setSelection:function(d,c){var a=this,b=a.getLib();b.setSelection(d,c)},getSelection:function(){var a=this,c=a.getLib(),b;b=c.getSelection();return b},scrollIntoView:function(e,d,b){var a=this,c=a.getLib();c.scrollIntoView({from:e,to:d},b)},addOverlay:function(a){var b=this,c=b.getLib();c.addOverlay(a)},removeOverlay:function(a){var b=this,c=b.getLib();c.removeOverlay(a)},operation:function(a){var b=this,c=b.getLib();c.operation(a)},focus:function(){var a=this,b=a.getLib();if(!b.hasFocus()){b.focus()}}},1,0,0,0,0,0,[FBEditor.view.panel.main.xml.proxy,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.Manager",Ext.Base,{statics:{getInstance:function(){return FBEditor.view.panel.main.xml.Manager.self},self:null},managerEditor:null,proxyEditor:null,panel:null,el:null,srcXml:null,searchPanel:null,posCursor:null,translateText:{invalidXml:"Невалидный XML",invalidXmlMsg:"Покинуть редактор XML без сохранения всех изменений?"},constructor:function(a){var b=this;FBEditor.view.panel.main.xml.Manager.self=b;b.managerEditor=a;b.proxyEditor=Ext.create("FBEditor.view.panel.main.xml.proxy.Editor")},getManagerEditor:function(){return this.managerEditor},getProxyEditor:function(){return this.proxyEditor},getElement:function(){return this.el},setSrcXml:function(a){this.srcXml=a},loadData:function(d){var f=this,b=f.getManagerEditor(),e=b.getContent(),a=f.getPanel(),c;d=d||e;f.el=d;c=d.getXml();a.fireEvent("loadData",c)},sync:function(){var a=this,b;b=new Promise(function(n,o){var l=a.getProxyEditor(),f=a.getManagerEditor(),d=a.getElement(),c=a.srcXml,k,h,g,m,i;i=l.getData();if(i!==c){d.setXml(i);m=f.getContent();i=m.getXml();d.setXml(null);try{i='<?xml version="1.0" encoding="UTF-8"?>'+i;h={resolve:n,fullXml:i};k=f.getModelFromXml(i);h.content=k;i=k.getXml(true);g=f.getSchema();g.validXml({xml:i,callback:a.verifyResult,scope:a,scopeData:h})}catch(j){a.errorValidMessage(j,n)}}else{n(true)}});return b},updateTree:function(){var c=this,b=c.getManagerEditor(),d=b.getContent(),a=c.getPanelNavigation();a.loadData(d)},getPanel:function(){var a=this;a.panel=a.panel||Ext.getCmp("main-xml");return a.panel},getPanelNavigation:function(){var b=this,c=FBEditor.getBridgeNavigation(),a;a=c.Ext&&c.Ext.getCmp&&c.Ext.getCmp("panel-xml-navigation")?c.Ext.getCmp("panel-xml-navigation"):null;return a},lineWrap:function(b){var c=this,a=c.getProxyEditor();a.setLineWrap(b)},search:function(b){var h=this,e=h.getProxyEditor(),c=0,g,d,a,f,i;i=e.getSearch();if(b){g=b.searchText;a=b.isReg;d=b.ignoreCase;f=b.words;c=i.find(g,a,d,f)}else{i.removeOverlay()}return c},findNext:function(){var c=this,b=c.getProxyEditor(),a;a=b.getSearch();a.findNext()},findPrev:function(){var c=this,b=c.getProxyEditor(),a;a=b.getSearch();a.findPrev()},replace:function(c,d){var f=this,b=f.getProxyEditor(),e,g,a;a=b.getSearch();if(d){if(a.replaceAll(c)){e=0}}else{e=a.replace(c)}return e},doSearch:function(d){var b=d?d.getManager():this,a,c;a=b.getSearchPanel();if(a.isHidden()){a.show()}a.setFocusSearchField();c=a.getReplacePanel();c.hide()},doReplace:function(d){var b=d?d.getManager():this,a,c;a=b.getSearchPanel();if(a.isHidden()){a.show()}a.setFocusSearchField();c=a.getReplacePanel();c.show()},doEsc:function(d){var c=d?d.getManager():this,b=c.getProxyEditor(),a;a=c.getSearchPanel();if(!a.isHidden()){a.hide();b.focus()}},getSearchPanel:function(){var c=this,b=c.getPanel(),a;a=b.getSearchPanel();return a},verifyResult:function(d,c){var f=this,b=c.response,a=f.getManagerEditor(),g;try{if(!d){g=new Error();g.error=b.valid;f.errorValidMessage(g,c.resolve)}else{a.setXml(c.fullXml);a.updateContent(c.content);c.resolve(true)}}catch(g){f.errorValidMessage(g,c.resolve)}},errorValidMessage:function(f,d){var c=this,a=c.translateText,b;b=f.error;b=Ext.String.htmlEncode(b);b=b.replace(/\^/g,"");b=b.replace(/\n+/g,"<br/>");b=b+"<br/>"+a.invalidXmlMsg;Ext.Msg.show({title:a.invalidXml,message:b,buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.WARNING,fn:function(e){var g="ok";if(e===g){d(true)}}})}},1,0,0,0,0,0,[FBEditor.view.panel.main.xml,"Manager"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.Manager",FBEditor.editor.Manager,{fb3BodyId:"",managerXml:null,_availableSyncButtons:null,translateText:{loading:"Загрузка текста...",saving:"Сохранение текста..."},init:function(){var a=this;a.managerXml=a.managerXml||Ext.create("FBEditor.view.panel.main.xml.Manager",a)},reset:function(){var a=this;a.resetFocus();a._availableSyncButtons=null},createContent:function(){var a=this;FBEditor.editor.Manager.prototype.createContent.apply(this,arguments);a.updateTree()},getManagerXml:function(){return this.managerXml},availableSyncButtons:function(){var c=this,d=FBEditor.util.Format,b=c.xml,a;if(c._availableSyncButtons===null){c._availableSyncButtons=true;a=d.byteLength(b);if(a>1024*1024){c._availableSyncButtons=false}}return c._availableSyncButtons},syncButtons:function(){var b=this,a;FBEditor.editor.Manager.prototype.syncButtons.apply(this,arguments);a=b.getPanelSection();a.fireEvent("sync")},setFocusElement:function(e,d){var c=this,a=c.getPanelNavigation(),b;FBEditor.editor.Manager.prototype.setFocusElement.apply(this,arguments);b=c.getFocusElement();a.expandElement(b)},getPanelSection:function(){var b=FBEditor.getBridgeNavigation(),a;a=b.Ext.getCmp("panel-navigation-section");return a},getPanelProps:function(){var b=FBEditor.getBridgeProps(),a;a=b.Ext.getCmp("panel-props-body");return a},updateTree:function(){var c=this,d=c.content,b=c.getPanelNavigation(),a=c.getManagerXml();if(b){b.loadData(d);a.updateTree()}else{Ext.defer(function(){c.updateTree()},200)}},linkImagesToRes:function(a,b){var c=this;b=b||c.getContent();b.each(function(f){var g={},e,d;e=f.marker&&f.marker.img?f.marker.img:null;if(f.isImg&&f.isLoadingRes(a.fileId)){g=f.attributes;g.src=a.fileId;f.update(g)}else{if(e&&e.isLoadingRes(a.fileId)){d=e.attributes;Ext.Object.each(d,function(h,i){g["marker-"+h]=i});g["marker-src"]=a.fileId;g.marker="true";f.update(g)}else{if(f.children.length){c.linkImagesToRes(a,f)}}}})},loadDataToEditor:function(a){var c=this,b=Ext.getCmp("panel-main-content");c.createContent(a);b.fireEvent("contentBody")},getPanelNavigation:function(){var b=this,c=FBEditor.getBridgeNavigation(),a;a=c.Ext&&c.Ext.getCmp&&c.Ext.getCmp("panel-body-navigation")?c.Ext.getCmp("panel-body-navigation"):null;return a},setLoading:function(d,c){var a=this,b;b=new Promise(function(g,f){var e=Ext.getCmp("panel-empty"),h=Ext.getCmp("panel-main-content");if(!e||!e.rendered){Ext.defer(function(){g(a.setLoading(d))},500)}h.fireEvent("contentEmpty");c=c||a.translateText.loading;e.setMessage(c);g(d)});return b},clearLoading:function(){var a=Ext.getCmp("panel-main-content");a.fireEvent("contentBody")}},0,0,0,0,0,0,[FBEditor.view.panel.main.editor,"Manager"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.a.A",FBEditor.editor.view.toolbar.button.a.A,{},0,["main-editor-button-a"],["component","box","button","editor-toolbar-button","editor-toolbar-button-a","main-editor-button-a"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-a":true,"main-editor-button-a":true},["widget.main-editor-button-a"],0,[FBEditor.view.panel.main.editor.button.a,"A"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ButtonController",FBEditor.editor.view.toolbar.button.ButtonController,{},0,0,0,0,["controller.main.editor.button"],0,[FBEditor.view.panel.main.editor.button,"ButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.AbstractButton",FBEditor.editor.view.toolbar.button.AbstractButton,{controller:"main.editor.button"},0,0,["component","box","button","editor-toolbar-button"],{component:true,box:true,button:true,"editor-toolbar-button":true},0,0,[FBEditor.view.panel.main.editor.button,"AbstractButton"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.annotation.AnnotationController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var i=this,c=i.getView(),d=c.getEditorManager(),f=FBEditor.editor.Factory,b={},e={},j=0,a=c.elementName,h,g;if(!d.availableSyncButtons()){c.enable();return}h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}b.title=b.parent;e.title=b.title.getElement();while(!(e.title.isTitle||e.title.isRoot)){b.title=b.title.parentNode;e.title=b.title.getElement()}if(e.title.isTitle){b.node=b.title;e.node=e.title}else{e.parent=b.parent.getElement();b.node=e.parent.hisName(a)?b.parent:b.node}b.parent=e.node.isRoot?b.node:b.node.parentNode;e.parent=b.parent.getElement();b.first=b.parent.firstChild;e.first=b.first?b.first.getElement():null;while(e.first&&(e.first.isEpigraph||e.first.isTitle)){j++;b.first=b.first.nextSibling;e.first=b.first?b.first.getElement():null}e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}e.parent.children.splice(j,0,e.newEl);g=d.getContent().getXml(true);if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}e.parent.children.splice(j,1);i.verify(g)}},0,0,0,0,["controller.main.editor.button.annotation"],0,[FBEditor.view.panel.main.editor.button.annotation,"AnnotationController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.annotation.Annotation",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.annotation",html:'<i class="fa fa-font"></i>',tooltipText:"Аннотация",elementName:"annotation"},0,["main-editor-button-annotation"],["component","box","button","editor-toolbar-button","main-editor-button-annotation"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-annotation":true},["widget.main-editor-button-annotation"],0,[FBEditor.view.panel.main.editor.button.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.UnboundedButtonController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var k=this,c=k.getView(),d=c.getEditorManager(),g=FBEditor.editor.Factory,b={},e={},l={},a=c.elementName,j,h;if(!d.availableSyncButtons()){k.verifyResult(true);return}h=d.getRange();if(!h){k.verifyResult(false);return false}if(!h.collapsed){b.common=h.common;if(!b.common.getElement||b.common.getElement().isRoot){k.verifyResult(false);return false}e.common=b.common.getElement();b.start=h.start;e.start=b.start.getElement();b.end=h.end;e.end=b.end.getElement();while(!e.common.splittable){b.common=b.common.parentNode;e.common=b.common.getElement();if(e.common.isRoot){k.verifyResult(false);return false}}b.start=h.start;e.start=b.start.getElement();b.parentStart=b.start.parentNode;e.parentStart=b.parentStart.getElement();while(e.parentStart.elementId!==e.common.elementId){b.start=b.parentStart;e.start=b.start.getElement();b.parentStart=b.start.parentNode;e.parentStart=b.parentStart.getElement()}l.start=e.common.getChildPosition(e.start);b.end=h.end;e.end=b.end.getElement();b.parentEnd=b.end.parentNode;e.parentEnd=b.parentEnd.getElement();while(e.parentEnd.elementId!==e.common.elementId){b.end=b.parentEnd;e.end=b.end.getElement();b.parentEnd=b.end.parentNode;e.parentEnd=b.parentEnd.getElement()}l.end=e.common.getChildPosition(e.end);l.isStart=e.start.isStartRange(h);l.isEnd=e.end.isEndRange(h);e.newEl=g.createElement(a);e.newEl.createScaffold();l.count=l.end-l.start;l.start=!l.isStart?l.start+1:l.start;l.count=l.isStart&&l.isEnd?l.count+1:l.count;l.count=!l.isStart&&!l.isEnd?l.count-1:l.count;e.common.children.splice(l.start,0,e.newEl);e.rangeNext=e.common.children[l.start+l.count+1];e.range=e.common.children.splice(l.start+1,l.count);for(var f=0;f<l.count;f++){e.newEl.add(e.range[f])}j=k.getContentXml();for(f=0;f<l.count;f++){if(e.rangeNext){e.common.insertBefore(e.range[f],e.rangeNext)}else{e.common.add(e.range[f])}}e.common.children.splice(l.start,1);k.verify(j)}else{b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){k.verifyResult(false);return false}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}e.parent=b.parent.getElement();b.node=e.parent.hisName(a)?b.parent:b.node;b.parent=e.node.isRoot?b.node:b.node.parentNode;e.parent=b.parent.getElement();e.newEl=g.createElement(a);e.newEl.createScaffold();l=e.parent.getChildPosition(e.node)+1;e.parent.children.splice(l,0,e.newEl);j=k.getContentXml();e.parent.children.splice(l,1);k.verify(j)}return true}},0,0,0,0,0,0,[FBEditor.view.panel.main.editor.button,"UnboundedButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.blockquote.BlockquoteController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.blockquote"],0,[FBEditor.view.panel.main.editor.button.blockquote,"BlockquoteController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.blockquote.Blockquote",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.blockquote",html:'<i class="fa fa-quote-right"></i>',tooltipText:"Цитата",elementName:"blockquote"},0,["main-editor-button-blockquote"],["component","box","button","editor-toolbar-button","main-editor-button-blockquote"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-blockquote":true},["widget.main-editor-button-blockquote"],0,[FBEditor.view.panel.main.editor.button.blockquote,"Blockquote"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.AbstractStyleButton",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{},0,0,["component","box","button","editor-toolbar-button"],{component:true,box:true,button:true,"editor-toolbar-button":true},0,0,[FBEditor.view.panel.main.editor.button,"AbstractStyleButton"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.code.Code",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-code"></i>',tooltipText:"Код",elementName:"code"},0,["main-editor-button-code"],["component","box","button","editor-toolbar-button","main-editor-button-code"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-code":true},["widget.main-editor-button-code"],0,[FBEditor.view.panel.main.editor.button.code,"Code"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.div.DivController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.div"],0,[FBEditor.view.panel.main.editor.button.div,"DivController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.div.Div",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.div",html:'<i class="fa fa-cubes"></i>',tooltipText:"Блок",elementName:"div"},0,["main-editor-button-div"],["component","box","button","editor-toolbar-button","main-editor-button-div"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-div":true},["widget.main-editor-button-div"],0,[FBEditor.view.panel.main.editor.button.div,"Div"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.em.Em",FBEditor.editor.view.toolbar.button.em.Em,{},0,["main-editor-button-em"],["component","box","button","editor-toolbar-button","editor-toolbar-button-em","main-editor-button-em"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-em":true,"main-editor-button-em":true},["widget.main-editor-button-em"],0,[FBEditor.view.panel.main.editor.button.em,"Em"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.epigraph.EpigraphController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var i=this,c=i.getView(),d=c.getEditorManager(),f=FBEditor.editor.Factory,b={},e={},a=c.elementName,h,g,j;if(!d.availableSyncButtons()){c.enable();return}h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}b.title=b.parent;e.title=b.title.getElement();while(!(e.title.isTitle||e.title.isRoot)){b.title=b.title.parentNode;e.title=b.title.getElement()}if(e.title.isTitle){b.node=b.title;e.node=e.title}else{e.parent=b.parent.getElement();b.node=e.parent.hisName(a)?b.parent:b.node}b.parent=e.node.isRoot?b.node:b.node.parentNode;e.parent=b.parent.getElement();b.first=b.parent.firstChild;e.first=b.first?b.first.getElement():null;e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}j=!e.first.isTitle?0:1;e.parent.children.splice(j,0,e.newEl);g=d.getContent().getXml(true);if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}e.parent.children.splice(j,1);i.verify(g)}},0,0,0,0,["controller.main.editor.button.epigraph"],0,[FBEditor.view.panel.main.editor.button.epigraph,"EpigraphController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.epigraph.Epigraph",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.epigraph",html:'<i class="fa fa-pinterest-p"></i>',tooltipText:"Эпиграф",elementName:"epigraph"},0,["main-editor-button-epigraph"],["component","box","button","editor-toolbar-button","main-editor-button-epigraph"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-epigraph":true},["widget.main-editor-button-epigraph"],0,[FBEditor.view.panel.main.editor.button.epigraph,"Epigraph"],0));(Ext.cmd.derive("FBEditor.view.window.img.Create",Ext.Window,{id:"window-img-create",title:"Создание изображения",width:300,height:340,modal:true,closeAction:"hide",layout:"fit",translateText:{inText:"Вставить в текст",create:"Создать",emptyImg:"Пустое изображение"},selectionRange:null,initComponent:function(){var a=this;a.items=[{xtype:"form",defaults:{margin:"10 0 0 10"},items:[{xtype:"image-editor-picture"},{xtype:"button-editor-select-img",scope:a},{xtype:"hidden",name:"src",value:""},{xtype:"displayfield",name:"name",value:a.translateText.emptyImg,submitValue:true}],buttonAlign:"center",buttons:[{xtype:"button",text:a.translateText.create,handler:function(){var e=this,c=FBEditor.getEditorManager(),f=e.up("window-img-create"),d=e.up("form"),b;b=d.getValues();b.range=f.selectionRange;b.name=b.name===f.translateText.emptyImg?"":b.name;c.createElement("img",b);f.close()}}]}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},onHide:function(){var a=this,b;b={url:"undefined",name:a.translateText.emptyImg};a.updateData(b);Ext.window.Window.prototype.onHide.apply(this,arguments)},updateData:function(b){var a=this;a.down("image-editor-picture").updateView(b);a.down("[name=src]").setValue(b.url);a.down("[name=name]").setValue(b.name)}},0,["window-img-create"],["component","box","container","panel","window","window-img-create"],{component:true,box:true,container:true,panel:true,window:true,"window-img-create":true},["widget.window-img-create"],0,[FBEditor.view.window.img,"Create"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.img.ImgController",FBEditor.view.panel.main.editor.button.ButtonController,{onClick:function(d,i){var f=this,c=f.getView(),b=c.getEditorManager(),h,g,a;if(i){i.stopPropagation()}g=b.getSelection();if(g){h=c.win||Ext.create("FBEditor.view.window.img.Create");a=g.getRangeAt(0);h.selectionRange={start:a.startContainer,offset:a.startOffset,oldValue:a.startContainer.nodeValue};c.win=h;h.show()}},onSync:function(){var f=this,d=f.getView(),c=d.getEditorManager(),e,b,a;e=c.getFocusElement();if(!e){d.disable();return}b=d.elementName;a=e.hisName(b);if(!a){d.enable()}else{d.disable()}}},0,0,0,0,["controller.main.editor.button.img"],0,[FBEditor.view.panel.main.editor.button.img,"ImgController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.img.Img",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.img",html:'<i class="fa fa-picture-o"></i>',tooltipText:"Изображение",elementName:"img",win:null},0,["main-editor-button-img"],["component","box","button","editor-toolbar-button","main-editor-button-img"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-img":true},["widget.main-editor-button-img"],0,[FBEditor.view.panel.main.editor.button.img,"Img"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.note.Note",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-sticky-note-o"></i>',tooltipText:"Сноска",elementName:"note"},0,["main-editor-button-note"],["component","box","button","editor-toolbar-button","main-editor-button-note"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-note":true},["widget.main-editor-button-note"],0,[FBEditor.view.panel.main.editor.button.note,"Note"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notebody.NotebodyController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var g=this,f=g.getView(),e=f.getEditorManager(),b,a,d,c;b=e.getRange();if(!b){f.disable();return}a=b.end.getElement?b.end.getElement():e.getFocusElement();d=f.elementName;c=a.hisName("notes")||a.hasParentName(d);if(c){f.enable()}else{f.disable()}}},0,0,0,0,["controller.main.editor.button.notebody"],0,[FBEditor.view.panel.main.editor.button.notebody,"NotebodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notebody.Notebody",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.notebody",html:'<i class="fa fa-sticky-note"></i>',tooltipText:"Текст сноски",elementName:"notebody"},0,["main-editor-button-notebody"],["component","box","button","editor-toolbar-button","main-editor-button-notebody"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-notebody":true},["widget.main-editor-button-notebody"],0,[FBEditor.view.panel.main.editor.button.notebody,"Notebody"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notes.NotesController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var b=this,a=b.getView();a.enable()}},0,0,0,0,["controller.main.editor.button.notes"],0,[FBEditor.view.panel.main.editor.button.notes,"NotesController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notes.Notes",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.notes",html:'<i class="fa fa-clone"></i>',tooltipText:"Сноски",elementName:"notes"},0,["main-editor-button-notes"],["component","box","button","editor-toolbar-button","main-editor-button-notes"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-notes":true},["widget.main-editor-button-notes"],0,[FBEditor.view.panel.main.editor.button.notes,"Notes"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.AbstractLiHolderButton",FBEditor.view.panel.main.editor.button.AbstractButton,{isActiveSelection:function(){var i=this,d=i.getEditorManager(),c={},e={},b=i.elementName,h,f,a,g;h=d.getRange();if(!h){return false}c.first=h.start;e.first=c.first.getElement?c.first.getElement():null;e.first=e.first.getStyleHolder();if(!e.first){return false}e.parent=e.first.parent;e.pos=e.parent.getChildPosition(e.first);f=d.getNamesElements(e.parent);f.splice(e.pos,1,b);a=d.getSchema();b=e.parent.getName();g=a.verify(b,f,true);console.log("active",g,b,f);return g}},0,0,["component","box","button","editor-toolbar-button"],{component:true,box:true,button:true,"editor-toolbar-button":true},0,0,[FBEditor.view.panel.main.editor.button,"AbstractLiHolderButton"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.LiHolderButtonController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var i=this,c=i.getView(),d=c.getEditorManager(),f=FBEditor.editor.Factory,b={},e={},a=c.elementName,h,g;if(!d.availableSyncButtons()){c.enable();return}h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();e.p=e.node.getStyleHolder();if(!e.p){return}e.parent=e.p.parent;e["new"]=f.createElement(a);e["new"].createScaffold();e.parent.insertBefore(e["new"],e.p);e.parent.remove(e.p);g=d.getContent().getXml(true);e.parent.insertBefore(e.p,e["new"]);e.parent.remove(e["new"]);i.verify(g)}},0,0,0,0,0,0,[FBEditor.view.panel.main.editor.button,"LiHolderButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ol.OlController",FBEditor.view.panel.main.editor.button.LiHolderButtonController,{},0,0,0,0,["controller.main.editor.button.ol"],0,[FBEditor.view.panel.main.editor.button.ol,"OlController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ol.Ol",FBEditor.view.panel.main.editor.button.AbstractLiHolderButton,{controller:"main.editor.button.ol",html:'<i class="fa fa-list-ol"></i>',tooltipText:"Нумерованный список",elementName:"ol"},0,["main-editor-button-ol"],["component","box","button","editor-toolbar-button","main-editor-button-ol"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-ol":true},["widget.main-editor-button-ol"],0,[FBEditor.view.panel.main.editor.button.ol,"Ol"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.poem.PoemController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.poem"],0,[FBEditor.view.panel.main.editor.button.poem,"PoemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.poem.Poem",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.poem",html:'<i class="fa fa-pinterest fa-lg"></i>',tooltipText:"Поэма",elementName:"poem"},0,["main-editor-button-poem"],["component","box","button","editor-toolbar-button","main-editor-button-poem"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-poem":true},["widget.main-editor-button-poem"],0,[FBEditor.view.panel.main.editor.button.poem,"Poem"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.pre.PreController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.pre"],0,[FBEditor.view.panel.main.editor.button.pre,"PreController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.pre.Pre",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.pre",html:'<span style="position: relative; font-family: monospace; font-size: 1.4em; top: 2px;">M</span>',tooltipText:"Предварительно отформатированный текст",elementName:"pre"},0,["main-editor-button-pre"],["component","box","button","editor-toolbar-button","main-editor-button-pre"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-pre":true},["widget.main-editor-button-pre"],0,[FBEditor.view.panel.main.editor.button.pre,"Pre"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.section.SectionController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var f=this,e=f.getView(),d=e.getEditorManager(),c={},b={},g,a;a=d.getRange();if(!a){e.disable();return}b.node=a.common;if(!b.node.getElement||b.node.getElement().isRoot){e.disable();return}g=b.node.viewportId;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();c.parent=c.node.getParentName("section");c.parent=c.parent?c.parent:c.node.getParentName("main");if(!c.parent){e.disable();return}b.parent=c.parent.nodes[g];b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next){if(c.next.isSection){e.disable();return}b.next=b.next.nextSibling;c.next=b.next?b.next.getElement():null}e.enable()}},0,0,0,0,["controller.main.editor.button.section"],0,[FBEditor.view.panel.main.editor.button.section,"SectionController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.section.Section",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.section",html:'<i class="fa fa-cube"></i>',tooltipText:"Вложенная секция",elementName:"section",createOpts:{inner:true}},0,["main-editor-button-section"],["component","box","button","editor-toolbar-button","main-editor-button-section"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-section":true},["widget.main-editor-button-section"],0,[FBEditor.view.panel.main.editor.button.section,"Section"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.smallcaps.Smallcaps",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-text-height"></i>',tooltipText:"Капитель",elementName:"smallcaps"},0,["main-editor-button-smallcaps"],["component","box","button","editor-toolbar-button","main-editor-button-smallcaps"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-smallcaps":true},["widget.main-editor-button-smallcaps"],0,[FBEditor.view.panel.main.editor.button.smallcaps,"Smallcaps"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.spacing.Spacing",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-text-width"></i>',tooltipText:"Межбуквенный интервал",elementName:"spacing"},0,["main-editor-button-spacing"],["component","box","button","editor-toolbar-button","main-editor-button-spacing"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-spacing":true},["widget.main-editor-button-spacing"],0,[FBEditor.view.panel.main.editor.button.spacing,"Spacing"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.span.Span",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-anchor"></i>',tooltipText:"span",elementName:"span"},0,["main-editor-button-span"],["component","box","button","editor-toolbar-button","main-editor-button-span"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-span":true},["widget.main-editor-button-span"],0,[FBEditor.view.panel.main.editor.button.span,"Span"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.splitsection.SplitSectionController",FBEditor.editor.view.toolbar.button.ButtonController,{onClick:function(j,l){var m=this,c=m.getView(),g=c.getEditorManager(),b=window.getSelection(),h={},a={},d,i,f,k;if(l){l.stopPropagation()}i=b.rangeCount?b.getRangeAt(0):null;if(!i||!i.commonAncestorContainer.getElement){return false}h.common=i.commonAncestorContainer.getElement();h.section=h.common.getParentName("section");d=h.section.getNodeHelper();a.section=d.getNode();f=Ext.create("FBEditor.editor.command.section.SplitCommand",{node:a.node});if(f.execute()){k=g.getHistory();k.add(f)}}},0,0,0,0,["controller.editor.toolbar.button.splitsection"],0,[FBEditor.view.panel.main.editor.button.splitsection,"SplitSectionController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.splitsection.SplitSection",FBEditor.editor.view.toolbar.button.AbstractButton,{controller:"editor.toolbar.button.splitsection",html:'<i class="fa fa-cut"></i>',tooltipText:"Разделить секцию",isActiveSelection:function(){var c=this,e=false,d=window.getSelection(),b={},a;a=d.rangeCount?d.getRangeAt(0):null;if(!a||!a.commonAncestorContainer.getElement){return false}b.common=a.commonAncestorContainer.getElement();b.isSection=b.common.hasParentName("section");e=b.isSection?true:e;return e}},0,["main-editor-button-splitsection"],["component","box","button","editor-toolbar-button","main-editor-button-splitsection"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-splitsection":true},["widget.main-editor-button-splitsection"],0,[FBEditor.view.panel.main.editor.button.splitsection,"SplitSection"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.splitelement.SplitElementController",FBEditor.editor.view.toolbar.button.ButtonController,{onClick:function(c,g){var d=this,f=window.getSelection(),b={},a;if(g){g.stopPropagation()}a=f.rangeCount?f.getRangeAt(0):null;if(!a||!a.commonAncestorContainer.getElement){return false}b.common=a.commonAncestorContainer.getElement();b.common.fireEvent("splitElement",a.commonAncestorContainer,false)}},0,0,0,0,["controller.editor.toolbar.button.splitelement"],0,[FBEditor.view.panel.main.editor.button.splitelement,"SplitElementController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.splitelement.SplitElement",FBEditor.editor.view.toolbar.button.AbstractButton,{controller:"editor.toolbar.button.splitelement",html:'<i class="fa fa-border fa-cut"></i>',tooltipText:"Разделить элемент блочного типа",isActiveSelection:function(){var c=this,e=false,d=window.getSelection(),b={},a;a=d.rangeCount?d.getRangeAt(0):null;if(!a||!a.commonAncestorContainer.getElement){return false}b.common=a.commonAncestorContainer.getElement();b.isSection=b.common.hasParentName("section");e=b.isSection?true:e;return e}},0,["main-editor-button-splitelement"],["component","box","button","editor-toolbar-button","main-editor-button-splitelement"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-splitelement":true},["widget.main-editor-button-splitelement"],0,[FBEditor.view.panel.main.editor.button.splitelement,"SplitElement"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.strikethrough.Strikethrough",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-strikethrough"></i>',tooltipText:"Зачёркнутый",elementName:"strikethrough"},0,["main-editor-button-strikethrough"],["component","box","button","editor-toolbar-button","main-editor-button-strikethrough"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-strikethrough":true},["widget.main-editor-button-strikethrough"],0,[FBEditor.view.panel.main.editor.button.strikethrough,"Strikethrough"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.strong.Strong",FBEditor.editor.view.toolbar.button.strong.Strong,{},0,["main-editor-button-strong"],["component","box","button","editor-toolbar-button","editor-toolbar-button-strong","main-editor-button-strong"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-strong":true,"main-editor-button-strong":true},["widget.main-editor-button-strong"],0,[FBEditor.view.panel.main.editor.button.strong,"Strong"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.sub.Sub",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-subscript"></i>',tooltipText:"Подстрочный текст",elementName:"sub"},0,["main-editor-button-sub"],["component","box","button","editor-toolbar-button","main-editor-button-sub"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-sub":true},["widget.main-editor-button-sub"],0,[FBEditor.view.panel.main.editor.button.sub,"Sub"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subscription.SubscriptionController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var i=this,c=i.getView(),d=c.getEditorManager(),f=FBEditor.editor.Factory,b={},e={},a=c.elementName,h,g;if(!d.availableSyncButtons()){c.enable();return}h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}e.parent.children.push(e.newEl);g=d.getContent().getXml(true);e.parent.children.pop();if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}i.verify(g)}},0,0,0,0,["controller.main.editor.button.subscription"],0,[FBEditor.view.panel.main.editor.button.subscription,"SubscriptionController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subscription.Subscription",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.subscription",html:'<i class="fa fa-thumb-tack"></i>',tooltipText:"Подпись",elementName:"subscription"},0,["main-editor-button-subscription"],["component","box","button","editor-toolbar-button","main-editor-button-subscription"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-subscription":true},["widget.main-editor-button-subscription"],0,[FBEditor.view.panel.main.editor.button.subscription,"Subscription"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subtitle.SubtitleController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.subtitle"],0,[FBEditor.view.panel.main.editor.button.subtitle,"SubtitleController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subtitle.Subtitle",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.subtitle",html:'<i class="fa fa-h-square fa-lg"></i>',tooltipText:"Подзаголовок",elementName:"subtitle"},0,["main-editor-button-subtitle"],["component","box","button","editor-toolbar-button","main-editor-button-subtitle"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-subtitle":true},["widget.main-editor-button-subtitle"],0,[FBEditor.view.panel.main.editor.button.subtitle,"Subtitle"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.sup.Sup",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-superscript"></i>',tooltipText:"Надстрочный текст",elementName:"sup"},0,["main-editor-button-sup"],["component","box","button","editor-toolbar-button","main-editor-button-sup"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-sup":true},["widget.main-editor-button-sup"],0,[FBEditor.view.panel.main.editor.button.sup,"Sup"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.TableController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{onClick:function(a,b){b.stopPropagation()},verifyResult:function(g,e){var h=this,i=h.getView(),a={},d={},c,b,j,f;if(!i){return}c=i.getEditorManager();b=i.getMenu();j=i.getInsertTable();f=c.getRange();if(!f){return}FBEditor.view.panel.main.editor.button.UnboundedButtonController.prototype.verifyResult.apply(this,arguments);b.fireEvent("sync");if(!g){a.node=f.common;if(!a.node.getElement||a.node.getElement().isRoot){return false}d.node=a.node.getElement();if(d.node.hasParentName("table")||d.node.isTable){i.enable();j.disable()}}else{j.enable()}}},0,0,0,0,["controller.main.editor.button.table"],0,[FBEditor.view.panel.main.editor.button.table,"TableController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.MenuController",Ext.app.ViewController,{onSync:function(){var c=this,a=c.getView(),b;b=a.query("main-editor-button-table-menu-item");Ext.Array.each(b,function(d){d.fireEvent("sync")})}},0,0,0,0,["controller.main.editor.button.table.menu"],0,[FBEditor.view.panel.main.editor.button.table.menu,"MenuController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItemController",Ext.app.ViewController,{onSync:function(){var f=this,a=f.getView(),e=FBEditor.getEditorManager(),c={},d={},b;b=e.getRange();if(!b){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();if(!d.node.hasParentName("table")){a.disable();return false}a.enable();return true},onClick:function(){var g=this,h=g.getView(),j=h.cmdName,i=h.cmdOpts,d=FBEditor.getEditorManager(),c,a,f,e,b;if(j){e=d.getRange();c=e.start;b=Ext.create("FBEditor.editor.command.table."+j,{node:c,opts:i});if(b.execute()){a=c.getElement();f=a.getHistory();f.add(b)}}}},0,0,0,0,["controller.main.editor.button.table.menu.item"],0,[FBEditor.view.panel.main.editor.button.table.menu.item,"AbstractItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem",Ext.menu.Item,{controller:"main.editor.button.table.menu.item",cmdName:"",cmdOpts:{},listeners:{click:"onClick",sync:"onSync"}},0,["main-editor-button-table-menu-item"],["component","box","menuitem","main-editor-button-table-menu-item"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true},["widget.main-editor-button-table-menu-item"],0,[FBEditor.view.panel.main.editor.button.table.menu.item,"AbstractItem"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.delCol.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Удалить столбец",cmdName:"DelColCommand"},0,["main-editor-button-table-menu-delCol"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-delCol"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-delCol":true},["widget.main-editor-button-table-menu-delCol"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.delCol,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.delRow.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Удалить строку",cmdName:"DelRowCommand"},0,["main-editor-button-table-menu-delRow"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-delRow"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-delRow":true},["widget.main-editor-button-table-menu-delRow"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.delRow,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.delTable.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Удалить таблицу",cmdName:"DeleteCommand"},0,["main-editor-button-table-menu-delTable"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-delTable"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-delTable":true},["widget.main-editor-button-table-menu-delTable"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.delTable,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.joinCells.ItemController",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItemController,{onSync:function(){var e=this,f=e.getView(),b=FBEditor.getEditorManager(),a={},c={},g,h,i,d;d=b.getRange();if(!d||d.collapsed){f.disable();return false}a.node=d.common;if(!a.node.getElement||a.node.getElement().isRoot){f.disable();return false}g=a.node.viewportId;c.node=a.node.getElement();c.table=c.node.isTable?c.node:c.node.getParentName("table");if(c.table){h=c.table.getSelection(g);i=h.getSize()}if(!i){f.disable();return false}f.enable();f.cmdOpts={table:c.table,viewportId:g,size:i};return true}},0,0,0,0,["controller.main.editor.button.table.menu.item.joinCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.joinCells,"ItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.joinCells.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{controller:"main.editor.button.table.menu.item.joinCells",text:"Объединить ячейки",cmdName:"JoinCellsCommand"},0,["main-editor-button-table-menu-joinCells"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-joinCells"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-joinCells":true},["widget.main-editor-button-table-menu-joinCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.joinCells,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Вставить столбец справа",cmdName:"InsertColNextCommand"},0,["main-editor-button-table-menu-insertColNext"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertColNext"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertColNext":true},["widget.main-editor-button-table-menu-insertColNext"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Вставить столбец слева",cmdName:"InsertColPrevCommand"},0,["main-editor-button-table-menu-insertColPrev"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertColPrev"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertColPrev":true},["widget.main-editor-button-table-menu-insertColPrev"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Вставить строку ниже",cmdName:"InsertRowNextCommand"},0,["main-editor-button-table-menu-insertRowNext"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertRowNext"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertRowNext":true},["widget.main-editor-button-table-menu-insertRowNext"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Вставить строку выше",cmdName:"InsertRowPrevCommand"},0,["main-editor-button-table-menu-insertRowPrev"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertRowPrev"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertRowPrev":true},["widget.main-editor-button-table-menu-insertRowPrev"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.size.PickerController",Ext.app.ViewController,{onMouseOverCell:function(a){var c=this,b=c.getView();b.setActiveCell(a)},onClickCell:function(c){var d=this,a=d.getView(),b=FBEditor.getEditorManager();b.createElement("table",{size:c});a.up("main-editor-button-table-menu").hide()}},0,0,0,0,["controller.main.editor.button.table.menu.size"],0,[FBEditor.view.panel.main.editor.button.table.menu.size,"PickerController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.size.Picker",Ext.Container,{controller:"main.editor.button.table.menu.size",activeCell:[0,0],minCells:[5,5],maxCells:[20,20],rows:[],cellCls:"picker-create-table-cell",cellActiveCls:"picker-create-table-cell-active",listeners:{mouseOverCell:"onMouseOverCell",clickCell:"onClickCell"},afterRender:function(){var a=this;a.add(a.createGrid());a.add({xtype:"component",html:(a.activeCell[0]+1)+" x "+(a.activeCell[1]+1),style:"text-align: center"});Ext.container.Container.prototype.afterRender.apply(this,arguments)},createGrid:function(){var d=this,e=[],f,a;for(var c=0;c<d.maxCells[1];c++){f=[];for(var b=0;b<d.maxCells[0];b++){a=d.createCell(b,c);f.push(a)}d.rows.push(f);e.push({xtype:"container",layout:"hbox",items:f})}return e},createCell:function(d,h){var e=this,b,f,a,c,g;c=e.activeCell[0]<e.minCells[0]?e.minCells[0]:e.activeCell[0]+1;a=e.activeCell[1]<e.minCells[1]?e.minCells[1]:e.activeCell[1]+1;f=d>=c||h>=a;g=d<=e.activeCell[0]&&h<=e.activeCell[1]?e.cellActiveCls:"";b={xtype:"component",html:"<div></div>",cls:e.cellCls+" "+g,hidden:f,afterRender:function(){e.rows[h][d]=this;this.getEl().on({mouseover:function(){e.fireEvent("mouseOverCell",[d,h])},click:function(){e.fireEvent("clickCell",[d,h])}})}};return b},setActiveCell:function(d){var h=this,m=h.rows,b=h.items.last(),l,g,a,k,c;h.activeCell=d;k=h.activeCell[0]<h.minCells[0]-1?h.minCells[0]-1:h.activeCell[0]+1;a=h.activeCell[1]<h.minCells[1]-1?h.minCells[1]-1:h.activeCell[1]+1;for(var f=0;f<m.length;f++){for(var e=0;e<m[f].length;e++){l=m[f][e];g=e>k||f>a;l.setHidden(g);c=e<=h.activeCell[0]&&f<=h.activeCell[1];l.removeCls(h.cellActiveCls);if(c){l.addCls(h.cellActiveCls)}}}b.setHtml((h.activeCell[0]+1)+" x "+(h.activeCell[1]+1))}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[FBEditor.view.panel.main.editor.button.table.menu.size,"Picker"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.size.SizeMenu",Ext.menu.Menu,{minWidth:80,picker:null,initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.panel.main.editor.button.table.menu.size.Picker");b.picker=a;b.items=[a];Ext.menu.Menu.prototype.initComponent.apply(this,arguments)},onHide:function(){var a=this;a.picker.setActiveCell([0,0]);Ext.menu.Menu.prototype.onHide.apply(this,arguments)}},0,0,["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},0,0,[FBEditor.view.panel.main.editor.button.table.menu.size,"SizeMenu"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertTable.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{text:"Вставить таблицу",initComponent:function(){var a=this;a.menu=Ext.create("FBEditor.view.panel.main.editor.button.table.menu.size.SizeMenu");FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem.prototype.initComponent.apply(this,arguments)}},0,["main-editor-button-table-menu-insertTable"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertTable"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertTable":true},["widget.main-editor-button-table-menu-insertTable"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertTable,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.splitCells.ItemController",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItemController,{onSync:function(){var f=this,a=f.getView(),e=FBEditor.getEditorManager(),c={},d={},b;b=e.getRange();if(!b||!b.collapsed){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();d.td=d.node.isTable?d.node:d.node.getParentName("td");if(!d.td||!d.td.getLinks()){a.disable();return false}a.enable();a.cmdOpts={td:d.td,viewportId:c.node.viewportId};return true}},0,0,0,0,["controller.main.editor.button.table.menu.item.splitCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.splitCells,"ItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.splitCells.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{controller:"main.editor.button.table.menu.item.splitCells",text:"Разъединить ячейку",cmdName:"SplitCellsCommand"},0,["main-editor-button-table-menu-splitCells"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-splitCells"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-splitCells":true},["widget.main-editor-button-table-menu-splitCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.splitCells,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.Menu",Ext.menu.Menu,{controller:"main.editor.button.table.menu",listeners:{sync:"onSync"},initComponent:function(){var a=this;a.items=[{xtype:"main-editor-button-table-menu-insertTable"},{xtype:"menuseparator"},{xtype:"main-editor-button-table-menu-insertRowPrev"},{xtype:"main-editor-button-table-menu-insertRowNext"},{xtype:"main-editor-button-table-menu-insertColPrev"},{xtype:"main-editor-button-table-menu-insertColNext"},{xtype:"menuseparator"},{xtype:"main-editor-button-table-menu-delRow"},{xtype:"main-editor-button-table-menu-delCol"},{xtype:"main-editor-button-table-menu-delTable"},{xtype:"menuseparator"},{xtype:"main-editor-button-table-menu-joinCells"},{xtype:"main-editor-button-table-menu-splitCells"}];Ext.menu.Menu.prototype.initComponent.apply(this,arguments)}},0,["main-editor-button-table-menu"],["component","box","container","panel","menu","main-editor-button-table-menu"],{component:true,box:true,container:true,panel:true,menu:true,"main-editor-button-table-menu":true},["widget.main-editor-button-table-menu"],0,[FBEditor.view.panel.main.editor.button.table.menu,"Menu"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.Table",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.table",html:'<i class="fa fa-table fa-lg"></i>',tooltipText:"Таблица",elementName:"table",menu:null,insertTable:null,initComponent:function(){var a=this;a.menu=Ext.create("FBEditor.view.panel.main.editor.button.table.menu.Menu");FBEditor.view.panel.main.editor.button.AbstractButton.prototype.initComponent.apply(this,arguments)},getMenu:function(){return this.menu},getInsertTable:function(){var b=this,a;a=b.insertTable||b.down("main-editor-button-table-menu-insertTable");b.insertTable=a;return a}},0,["main-editor-button-table"],["component","box","button","editor-toolbar-button","main-editor-button-table"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-table":true},["widget.main-editor-button-table"],0,[FBEditor.view.panel.main.editor.button.table,"Table"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.title.TitleController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var i=this,c=i.getView(),d=c.getEditorManager(),f=FBEditor.editor.Factory,a=c.elementName,b={},e={},h,g;if(!d.availableSyncButtons()){c.enable();return}h=d.getRange();if(!h){c.disable();return}b.node=h.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement();while(e.parent.isStyleHolder||e.parent.isStyleType){b.node=b.parent;e.node=b.node.getElement();b.parent=b.node.parentNode;e.parent=b.parent.getElement()}e.newEl=f.createElement(a);e.newEl.createScaffold();if(!h.collapsed){e.p=h.start.getElement();e.isRoot=e.p.isRoot;while(e.p&&!e.p.isP){e.p=e.isRoot?e.p.first():e.p.parent}if(!e.p){c.disable();return}e.parentP=e.p.parent;e.next=e.p.next();e.newEl.add(e.p)}e.parent.children.unshift(e.newEl);g=d.getContent().getXml(true);if(!h.collapsed){if(e.next){e.parentP.insertBefore(e.p,e.next)}else{e.parentP.add(e.p)}}e.parent.children.splice(0,1);i.verify(g)}},0,0,0,0,["controller.main.editor.button.title"],0,[FBEditor.view.panel.main.editor.button.title,"TitleController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.title.Title",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.title",html:'<i class="fa fa-header"></i>',tooltipText:"Заголовок",elementName:"title"},0,["main-editor-button-title"],["component","box","button","editor-toolbar-button","main-editor-button-title"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-title":true},["widget.main-editor-button-title"],0,[FBEditor.view.panel.main.editor.button.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.titlebody.TitleBodyController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var f=this,e=f.getView(),d=e.getEditorManager(),a,c,b;a=d.getContent();c=e.elementName;b=a.children[0].hisName(c);if(!b){e.enable()}else{e.disable()}}},0,0,0,0,["controller.main.editor.button.titlebody"],0,[FBEditor.view.panel.main.editor.button.titlebody,"TitleBodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.titlebody.TitleBody",FBEditor.view.panel.main.editor.button.AbstractButton,{controller:"main.editor.button.titlebody",html:'<i class="fa fa-header fa-border"></i>',tooltipText:"Заголовок для всей книги",elementName:"title",createOpts:{body:true}},0,["main-editor-button-titlebody"],["component","box","button","editor-toolbar-button","main-editor-button-titlebody"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-titlebody":true},["widget.main-editor-button-titlebody"],0,[FBEditor.view.panel.main.editor.button.titlebody,"TitleBody"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ul.UlController",FBEditor.view.panel.main.editor.button.LiHolderButtonController,{},0,0,0,0,["controller.main.editor.button.ul"],0,[FBEditor.view.panel.main.editor.button.ul,"UlController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ul.Ul",FBEditor.view.panel.main.editor.button.AbstractLiHolderButton,{controller:"main.editor.button.ul",html:'<i class="fa fa-list-ul"></i>',tooltipText:"Маркированный список",elementName:"ul"},0,["main-editor-button-ul"],["component","box","button","editor-toolbar-button","main-editor-button-ul"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-ul":true},["widget.main-editor-button-ul"],0,[FBEditor.view.panel.main.editor.button.ul,"Ul"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.underline.Underline",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{html:'<i class="fa fa-underline"></i>',tooltipText:"Подчёркнутый",elementName:"underline"},0,["main-editor-button-underline"],["component","box","button","editor-toolbar-button","main-editor-button-underline"],{component:true,box:true,button:true,"editor-toolbar-button":true,"main-editor-button-underline":true},["widget.main-editor-button-underline"],0,[FBEditor.view.panel.main.editor.button.underline,"Underline"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.unstyle.Unstyle",FBEditor.editor.view.toolbar.button.unstyle.Unstyle,{},0,["main-editor-button-unstyle"],["component","box","button","editor-toolbar-button","editor-toolbar-button-unstyle","main-editor-button-unstyle"],{component:true,box:true,button:true,"editor-toolbar-button":true,"editor-toolbar-button-unstyle":true,"main-editor-button-unstyle":true},["widget.main-editor-button-unstyle"],0,[FBEditor.view.panel.main.editor.button.unstyle,"Unstyle"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.toolbar.responsive.button.ButtonController",Ext.app.ViewController,{onClick:function(b,f){var d=this,a=d.getView(),c;f.stopPropagation();f.preventDefault();c=a.getResponsivePanel();c.show()},onAlign:function(){var c=this,a=c.getView(),b;b=a.getResponsivePanel();b.close()}},0,0,0,0,["controller.main.editor.toolbar.responsive.button"],0,[FBEditor.view.panel.main.editor.toolbar.responsive.button,"ButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.toolbar.responsive.panel.PanelController",Ext.app.ViewController,{},0,0,0,0,["controller.main.editor.toolbar.responsive.panel"],0,[FBEditor.view.panel.main.editor.toolbar.responsive.panel,"PanelController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.toolbar.responsive.panel.Panel",Ext.Panel,{controller:"main.editor.toolbar.responsive.panel",cls:"main-editor-toolbar-responsive-panel",config:{keyHandlers:{ESC:"onEscKey"}},floating:true,closeAction:"hide",layout:{type:"vbox",padding:2,align:"stretchmax"},isShow:false,responsiveButton:null,onShow:function(){var a=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);a.updatePanel();a.align();a.isShow=true},afterShow:function(){var a=this;Ext.getBody().on("click",a.onClickBody,a);Ext.panel.Panel.prototype.afterShow.apply(this,arguments)},afterHide:function(){var a=this;a.isShow=false;Ext.getBody().un("click",a.onClickBody,a);Ext.panel.Panel.prototype.afterHide.apply(this,arguments);a.removeAll()},updatePanel:function(){var c=this,a=c.getResponsiveButton(),d,b;b=a.getToolbar();d=b.getHiddenButtons();if(d){c.add(d);b.fireEvent("syncHiddenButtons",d)}},setResponsiveButton:function(a){this.responsiveButton=a},getResponsiveButton:function(){return this.responsiveButton},align:function(){var b=this,a=b.getResponsiveButton(),c;if(a.isVisible()&&a.rendered){c=-(b.getWidth());b.alignTo(a,"br",[c,0])}},onClickBody:function(c,a){var b=this;b.close()}},0,["main-editor-toolbar-responsive-panel"],["component","box","container","panel","main-editor-toolbar-responsive-panel"],{component:true,box:true,container:true,panel:true,"main-editor-toolbar-responsive-panel":true},["widget.main-editor-toolbar-responsive-panel"],0,[FBEditor.view.panel.main.editor.toolbar.responsive.panel,"Panel"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.toolbar.responsive.button.Button",Ext.button.Button,{controller:"main.editor.toolbar.responsive.button",html:'<i class="fa fa-angle-double-right"></i>',listeners:{click:"onClick",align:"onAlign"},config:{keyHandlers:{ESC:"onEscKey"}},toolbar:null,responsivePanel:null,initComponent:function(){var a=this;a.getResponsivePanel();Ext.button.Button.prototype.initComponent.apply(this,arguments)},onDestroy:function(){var b=this,a=b.getToolbar();a.setResponsiveButton(null)},onEscKey:function(){var b=this,a=b.getResponsivePanel();a.close()},getResponsivePanel:function(){var b=this,a=b.responsivePanel;a=a||Ext.ComponentQuery.query("main-editor-toolbar-responsive-panel")[0]||Ext.widget("main-editor-toolbar-responsive-panel");b.responsivePanel=a;a.setResponsiveButton(b);return a},setToolbar:function(a){this.toolbar=a},getToolbar:function(){var b=this,a;a=b.toolbar||b.up("main-editor-toolbar");b.toolbar=a;return a}},0,["main-editor-toolbar-responsive-button"],["component","box","button","main-editor-toolbar-responsive-button"],{component:true,box:true,button:true,"main-editor-toolbar-responsive-button":true},["widget.main-editor-toolbar-responsive-button"],0,[FBEditor.view.panel.main.editor.toolbar.responsive.button,"Button"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.toolbar.ToolbarController",FBEditor.editor.view.toolbar.ToolbarController,{onResize:function(){var c=this,a=c.getView(),b;b=a.getResponsiveButton();b.fireEvent("align");a.updateButtons()}},0,0,0,0,["controller.main.editor.toolbar"],0,[FBEditor.view.panel.main.editor.toolbar,"ToolbarController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.toolbar.Toolbar",FBEditor.editor.view.toolbar.Toolbar,{controller:"main.editor.toolbar",listeners:{resize:"onResize",syncHiddenButtons:"onSyncHiddenButtons"},responsiveSizes:{group1:480,group2:780,group3:1010,fit:1390},responsiveBtn:null,currentResponsiveSize:null,visibleButtons:null,createSyncButtons:function(){var a=this;a.syncButtons=["main-editor-button-notes","main-editor-button-notebody","main-editor-button-titlebody","main-editor-button-section","main-editor-button-splitsection","main-editor-button-splitelement","main-editor-button-title","main-editor-button-epigraph","main-editor-button-annotation","main-editor-button-subscription",{sequence:["main-editor-button-div","main-editor-button-subtitle","main-editor-button-blockquote","main-editor-button-pre","main-editor-button-poem"]},"main-editor-button-ul","main-editor-button-ol","main-editor-button-table","main-editor-button-img","main-editor-button-a","main-editor-button-note","main-editor-button-strong","main-editor-button-em","main-editor-button-underline","main-editor-button-strikethrough","main-editor-button-spacing","main-editor-button-sub","main-editor-button-sup","main-editor-button-code","main-editor-button-span","main-editor-button-smallcaps","main-editor-button-unstyle"]},linkHotkeys:function(){var a=this;a.hotkeys=[{xtype:"main-editor-button-notes",numberSlot:1},{xtype:"main-editor-button-notebody",numberSlot:2},{xtype:"main-editor-button-titlebody",numberSlot:3},{xtype:"main-editor-button-section",numberSlot:4},{xtype:"main-editor-button-title",numberSlot:5},{xtype:"main-editor-button-epigraph",numberSlot:6},{xtype:"main-editor-button-annotation",numberSlot:7},{xtype:"main-editor-button-subscription",numberSlot:8},{xtype:"main-editor-button-div",numberSlot:9},{xtype:"main-editor-button-subtitle",numberSlot:10},{xtype:"main-editor-button-blockquote",numberSlot:11},{xtype:"main-editor-button-pre",numberSlot:12},{xtype:"main-editor-button-poem",numberSlot:13},{xtype:"main-editor-button-ul",numberSlot:14},{xtype:"main-editor-button-ol",numberSlot:15},{xtype:"main-editor-button-img",numberSlot:16},{xtype:"main-editor-button-a",numberSlot:17},{xtype:"main-editor-button-note",numberSlot:18},{xtype:"main-editor-button-strong",numberSlot:19},{xtype:"main-editor-button-em",numberSlot:20},{xtype:"main-editor-button-underline",numberSlot:21},{xtype:"main-editor-button-strikethrough",numberSlot:22},{xtype:"main-editor-button-spacing",numberSlot:23},{xtype:"main-editor-button-sub",numberSlot:24},{xtype:"main-editor-button-sup",numberSlot:25},{xtype:"main-editor-button-code",numberSlot:26},{xtype:"main-editor-button-span",numberSlot:27},{xtype:"main-editor-button-unstyle",numberSlot:28},{xtype:"main-editor-button-smallcaps",numberSlot:29},{xtype:"main-editor-button-splitsection",numberSlot:30},{xtype:"main-editor-button-splitelement",numberSlot:31}]},getButton:function(a){var c=this,b,d;d="main-editor-button-"+a;b=Ext.ComponentQuery.query(d)[0];return b},updateButtons:function(){var b=this,a;if(b.needUpdateButtons()){a=b.getVisibleButtons();b.removeAll();b.add(a)}},getHiddenButtons:function(){var b=this,a=b.getSyncButtons(),c=[];Ext.each(a,function(e){var d;if(Ext.isObject(e)&&e.sequence){Ext.each(e.sequence,function(f){d=Ext.ComponentQuery.query(f)[0];if(!d||d.hidden){if(!d){d=Ext.widget(f);d.setToolbar(b)}c.push(d)}})}else{d=Ext.ComponentQuery.query(e)[0];if(!d||d.hidden){if(!d){d=Ext.widget(e);d.setToolbar(b)}c.push(d)}}});c=c.length?c:null;return c},setResponsiveButton:function(a){var b=this;b.responsiveBtn=a},getResponsiveButton:function(){var b=this,a;a=b.responsiveBtn||Ext.widget("main-editor-toolbar-responsive-button");b.responsiveBtn=a;a.setToolbar(b);return a},getVisibleButtons:function(){var e=this,b=e.responsiveSizes,a=Ext.getBody().getWidth(),f,c,d;e.currentResponsiveSize=null;c=e.getSpacer();d=[{xtype:"main-editor-button-notes"},{xtype:"main-editor-button-notebody"},c,{xtype:"main-editor-button-titlebody"},{xtype:"main-editor-button-section"},{xtype:"main-editor-button-splitsection"},{xtype:"main-editor-button-splitelement"},c];if(a>=b.group1){e.currentResponsiveSize=b.group1;Ext.Array.push(d,[c,{xtype:"main-editor-button-title"},{xtype:"main-editor-button-epigraph"},{xtype:"main-editor-button-annotation"},{xtype:"main-editor-button-subscription"}])}if(a>=b.group2){e.currentResponsiveSize=b.group2;Ext.Array.push(d,[c,{xtype:"main-editor-button-div"},{xtype:"main-editor-button-subtitle"},{xtype:"main-editor-button-blockquote"},{xtype:"main-editor-button-pre"},{xtype:"main-editor-button-poem"},{xtype:"main-editor-button-ul"},{xtype:"main-editor-button-ol"}])}if(a>=b.group3){e.currentResponsiveSize=b.group3;Ext.Array.push(d,[c,{xtype:"main-editor-button-table"},c,{xtype:"main-editor-button-img"},{xtype:"main-editor-button-a"},{xtype:"main-editor-button-note"}])}if(a>=b.fit){e.currentResponsiveSize=b.fit;Ext.Array.push(d,[c,{xtype:"main-editor-button-strong"},{xtype:"main-editor-button-em"},{xtype:"main-editor-button-underline"},{xtype:"main-editor-button-strikethrough"},{xtype:"main-editor-button-spacing"},{xtype:"main-editor-button-sub"},{xtype:"main-editor-button-sup"},{xtype:"main-editor-button-code"},{xtype:"main-editor-button-span"},{xtype:"main-editor-button-smallcaps"},{xtype:"main-editor-button-unstyle"}])}else{e.setResponsiveButton(null);f=e.getResponsiveButton();d.push({xtype:"tbspacer",flex:1});d.push(f)}e.visibleButtons=d;return d},getSpacer:function(){var b=this,a;a={xtype:"tbspacer",width:20};return a},needUpdateButtons:function(){var f=this,c=f.responsiveSizes,b=Ext.getBody().getWidth(),d=f.currentResponsiveSize,a=null,e;a=b>=c.group1?c.group1:a;a=b>=c.group2?c.group2:a;a=b>=c.group3?c.group3:a;a=b>=c.fit?c.fit:a;e=a!==d;return e}},0,["main-editor-toolbar"],["component","box","container","toolbar","editor-toolbar","main-editor-toolbar"],{component:true,box:true,container:true,toolbar:true,"editor-toolbar":true,"main-editor-toolbar":true},["widget.main-editor-toolbar"],0,[FBEditor.view.panel.main.editor.toolbar,"Toolbar"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.viewport.ViewportController",FBEditor.editor.view.viewport.ViewportController,{onSyncScroll:function(a){var e=this,b=e.getView(),d=b.getContent(),c=a.getContent(),f=c.scrollTop;d.scrollTop=f+a.getHeight()}},0,0,0,0,["controller.main.editor.viewport"],0,[FBEditor.view.panel.main.editor.viewport,"ViewportController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.viewport.Viewport",FBEditor.editor.view.viewport.Viewport,{controller:"main.editor.viewport",cls:"editor-viewport main-editor-viewport",listeners:{syncScroll:"onSyncScroll"},createRootElement:false,createRoot:function(){var c=this,b=c.getEditor(),a;if(c.createRootElement){FBEditor.editor.view.viewport.Viewport.prototype.createRoot.apply(this,arguments);a=b.getManager();a.updateTree()}}},0,["main-editor-viewport"],["component","box","container","editor-viewport","main-editor-viewport"],{component:true,box:true,container:true,"editor-viewport":true,"main-editor-viewport":true},["widget.main-editor-viewport"],0,[FBEditor.view.panel.main.editor.viewport,"Viewport"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.Editor",FBEditor.editor.view.Editor,{id:"main-editor",controller:"view.main.editor",layout:"border",listeners:{loadData:"onLoadData",split:"onSplit",unsplit:"onUnsplit",syncContent:"onSyncContent"},rootElementName:"fb3-body",viewports:{north:null,south:null},southViewportConfig:{xtype:"main-editor-viewport",height:"50%",split:{size:8},region:"south"},panelContent:null,createManager:function(){var a=this;if(!a.manager){a.manager=Ext.create("FBEditor.view.panel.main.editor.Manager",a);a.manager.init()}},initEditor:function(){var a=this,b;b=Ext.widget({xtype:"main-editor-viewport",region:"center",createRootElement:true});a.viewports.north=b;a.add(b)},createToolbar:function(){return Ext.create("FBEditor.view.panel.main.editor.toolbar.Toolbar")},addSouthViewport:function(){var b=this,c,a;a=Ext.widget(b.southViewportConfig);b.viewports.south=a;b.add(a);c=b.viewports.north;b.fireEvent("syncContent",c);a.fireEvent("syncScroll",c)},removeSouthViewport:function(){var c=this,a=c.getManager(),b;b=c.viewports.south;a.removeNodes(b.id);c.remove(b);c.viewports.south=null},getPanelContent:function(){var b=this,a;a=b.panelContent||Ext.getCmp("panel-main-content");b.panelContent=a;return a},getViewports:function(){var b=this,a=[];a.push(b.viewports.north);if(b.viewports.south){a.push(b.viewports.south)}return a}},0,["main-editor"],["component","box","container","panel","base-editor","main-editor"],{component:true,box:true,container:true,panel:true,"base-editor":true,"main-editor":true},["widget.main-editor"],0,[FBEditor.view.panel.main.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.SearchController",Ext.app.ViewController,{onChange:function(){var d=this,a=d.getView(),c,e,f,b;e=a.getDataForSearch();f=a.getXmlPanel();b=f.getManager();c=b.search(e);a.setCount(c);a.syncButtons(c)},onFindNext:function(){var c=this,a=c.getView(),d,b;d=a.getXmlPanel();b=d.getManager();b.findNext()},onFindPrev:function(){var c=this,a=c.getView(),d,b;d=a.getXmlPanel();b=d.getManager();b.findPrev()},onDisableButtons:function(){var c=this,a=c.getView(),b=a.getButtonsSync();Ext.each(b,function(d){d.disable()})},onEnableButtons:function(){var c=this,a=c.getView(),b=a.getButtonsSync();Ext.each(b,function(d){d.enable()})}},0,0,0,0,["controller.panel.xml.search"],0,[FBEditor.view.panel.main.xml.search,"SearchController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.close.CloseController",Ext.app.ViewController,{onClick:function(){var c=this,b=c.getView(),a=b.getSearchPanel(),e,d;e=a.getXmlPanel();d=e.getManager();d.doEsc()}},0,0,0,0,["controller.panel.xml.search.close"],0,[FBEditor.view.panel.main.xml.search.close,"CloseController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.AbstractComponent",Ext.Base,{searchPanel:null,getSearchPanel:function(){var b=this,a;a=b.searchPanel||b.up("panel-xml-search");b.searchPanel=a;return a}},0,0,0,0,0,0,[FBEditor.view.panel.main.xml.search,"AbstractComponent"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.close.Close",Ext.Component,{controller:"panel.xml.search.close",cls:"panel-xml-search-close",listeners:{click:{element:"el",fn:"onClick"}},html:'<i class="fa fa-close"></i>',getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-close"],["component","box","panel-xml-search-close"],{component:true,box:true,"panel-xml-search-close":true},["widget.panel-xml-search-close"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.close,"Close"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.FindController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.xml.search.find"],0,[FBEditor.view.panel.main.xml.search.find,"FindController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.ignoreCase.IgnoreCaseController",Ext.app.ViewController,{onChange:function(f,d,c){var e=this,b=e.getView(),a;a=b.getSearchPanel();a.fireEvent("change")}},0,0,0,0,["controller.panel.xml.search.find.ignorecase"],0,[FBEditor.view.panel.main.xml.search.find.ignoreCase,"IgnoreCaseController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.ignoreCase.IgnoreCase",Ext.form.field.Checkbox,{controller:"panel.xml.search.find.ignorecase",cls:"panel-xml-search-ignorecase",listeners:{change:"onChange"},translateText:{ignoreCase:"Регистр"},initComponent:function(){var b=this,a=b.translateText;b.boxLabel=a.ignoreCase;Ext.form.field.Checkbox.prototype.initComponent.apply(this,arguments)},getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-find-ignorecase"],["component","box","field","checkboxfield","checkbox","panel-xml-search-find-ignorecase"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,"panel-xml-search-find-ignorecase":true},["widget.panel-xml-search-find-ignorecase"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.find.ignoreCase,"IgnoreCase"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.count.Count",Ext.Component,{cls:"panel-xml-search-count",tpl:'<tpl if="count">Найдено {count}</tpl>',setCount:function(b){var a=this;a.setData({count:b})}},0,["panel-xml-search-find-count"],["component","box","panel-xml-search-find-count"],{component:true,box:true,"panel-xml-search-find-count":true},["widget.panel-xml-search-find-count"],0,[FBEditor.view.panel.main.xml.search.find.count,"Count"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.findNext.FindNextController",Ext.app.ViewController,{onClick:function(){var c=this,b=c.getView(),a=b.getSearchPanel();a.fireEvent("findNext")}},0,0,0,0,["controller.panel.xml.search.find.findnext"],0,[FBEditor.view.panel.main.xml.search.find.findNext,"FindNextController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.findNext.FindNext",Ext.Component,{controller:"panel.xml.search.find.findnext",cls:"panel-xml-search-findnext",listeners:{click:{element:"el",fn:"onClick"}},translateText:{title:"Следующее совпадение"},initComponent:function(){var b=this,a=b.translateText;b.html='<i title="'+a.title+'" class="fa fa-arrow-down"></i>';Ext.Component.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a=b.getSearchPanel();a.addButtonSync(b);Ext.Component.prototype.afterRender.apply(this,arguments)},getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-find-findnext"],["component","box","panel-xml-search-find-findnext"],{component:true,box:true,"panel-xml-search-find-findnext":true},["widget.panel-xml-search-find-findnext"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.find.findNext,"FindNext"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.findPrev.FindPrevController",Ext.app.ViewController,{onClick:function(){var c=this,b=c.getView(),a=b.getSearchPanel();a.fireEvent("findPrev")}},0,0,0,0,["controller.panel.xml.search.find.findprev"],0,[FBEditor.view.panel.main.xml.search.find.findPrev,"FindPrevController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.findPrev.FindPrev",Ext.Component,{controller:"panel.xml.search.find.findprev",cls:"panel-xml-search-findprev",listeners:{click:{element:"el",fn:"onClick"}},translateText:{title:"Предыдущее совпадение"},initComponent:function(){var b=this,a=b.translateText;b.html='<i title="'+a.title+'" class="fa fa-arrow-up"></i>';Ext.Component.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a=b.getSearchPanel();a.addButtonSync(b);Ext.Component.prototype.afterRender.apply(this,arguments)},getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-find-findprev"],["component","box","panel-xml-search-find-findprev"],{component:true,box:true,"panel-xml-search-find-findprev":true},["widget.panel-xml-search-find-findprev"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.find.findPrev,"FindPrev"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.regex.RegexController",Ext.app.ViewController,{onChange:function(f,d,c){var e=this,b=e.getView(),a;a=b.getSearchPanel();a.fireEvent("change")}},0,0,0,0,["controller.panel.xml.search.find.regex"],0,[FBEditor.view.panel.main.xml.search.find.regex,"RegexController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.regex.Regex",Ext.form.field.Checkbox,{controller:"panel.xml.search.find.regex",cls:"panel-xml-search-regex",listeners:{change:"onChange"},translateText:{regex:"Регулярное выражение"},initComponent:function(){var b=this,a=b.translateText;b.boxLabel=a.regex;Ext.form.field.Checkbox.prototype.initComponent.apply(this,arguments)},getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-find-regex"],["component","box","field","checkboxfield","checkbox","panel-xml-search-find-regex"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,"panel-xml-search-find-regex":true},["widget.panel-xml-search-find-regex"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.find.regex,"Regex"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.textfield.TextfieldController",Ext.app.ViewController,{onChange:function(f,d,c){var e=this,b=e.getView(),a;a=b.getSearchPanel();a.fireEvent("change")},onKeydown:function(d,h){var c=this,b=c.getView(),a,g,i,f;a=b.getSearchPanel();g=a.getReplacePanel();i=a.getXmlPanel();f=i.getManager();if(h.getKey()===Ext.event.Event.ESC){f.doEsc()}else{if(h.getKey()===Ext.event.Event.F&&h.ctrlKey){h.preventDefault();g.hide()}else{if(h.getKey()===Ext.event.Event.R&&h.ctrlKey){h.preventDefault();f.doReplace()}}}}},0,0,0,0,["controller.panel.xml.search.find.textfield"],0,[FBEditor.view.panel.main.xml.search.find.textfield,"TextfieldController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.textfield.Textfield",Ext.form.field.Text,{controller:"panel.xml.search.find.textfield",listeners:{change:"onChange",keydown:"onKeydown"},enableKeyEvents:true,getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-find-textfield"],["component","box","field","textfield","panel-xml-search-find-textfield"],{component:true,box:true,field:true,textfield:true,"panel-xml-search-find-textfield":true},["widget.panel-xml-search-find-textfield"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.find.textfield,"Textfield"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.words.WordsController",Ext.app.ViewController,{onChange:function(f,d,c){var e=this,b=e.getView(),a;a=b.getSearchPanel();a.fireEvent("change")}},0,0,0,0,["controller.panel.xml.search.find.words"],0,[FBEditor.view.panel.main.xml.search.find.words,"WordsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.words.Words",Ext.form.field.Checkbox,{controller:"panel.xml.search.find.words",cls:"panel-xml-search-words",listeners:{change:"onChange"},translateText:{words:"Слова"},initComponent:function(){var b=this,a=b.translateText;b.boxLabel=a.words;Ext.form.field.Checkbox.prototype.initComponent.apply(this,arguments)},getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-find-words"],["component","box","field","checkboxfield","checkbox","panel-xml-search-find-words"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,"panel-xml-search-find-words":true},["widget.panel-xml-search-find-words"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.find.words,"Words"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.find.Find",Ext.Container,{id:"panel-xml-search-find",controller:"panel.xml.search.find",cls:"panel-xml-search-find",layout:"hbox",searchField:null,regexField:null,caseField:null,wordsField:null,countField:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-xml-search-find-textfield",width:300},{xtype:"panel-xml-search-find-findprev"},{xtype:"panel-xml-search-find-findnext"},{xtype:"panel-xml-search-find-ignorecase"},{xtype:"panel-xml-search-find-words",hidden:true},{xtype:"panel-xml-search-find-regex"},{xtype:"panel-xml-search-find-count"}];Ext.container.Container.prototype.initComponent.apply(this,arguments)},getSearchField:function(){var b=this,a;a=b.searchField||b.down("panel-xml-search-find-textfield");b.searchField=a;return a},getRegexField:function(){var b=this,a;a=b.regexField||b.down("panel-xml-search-find-regex");b.regexField=a;return a},getCaseField:function(){var b=this,a;a=b.caseField||b.down("panel-xml-search-find-ignorecase");b.caseField=a;return a},getWordsField:function(){var b=this,a;a=b.wordsField||b.down("panel-xml-search-find-words");b.wordsField=a;return a},getCountField:function(){var b=this,a;a=b.countField||b.down("panel-xml-search-find-count");b.countField=a;return a}},0,["panel-xml-search-find"],["component","box","container","panel-xml-search-find"],{component:true,box:true,container:true,"panel-xml-search-find":true},["widget.panel-xml-search-find"],0,[FBEditor.view.panel.main.xml.search.find,"Find"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.replace.ReplaceController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.xml.search.replace"],0,[FBEditor.view.panel.main.xml.search.replace,"ReplaceController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.replace.all.All",Ext.Button,{cls:"panel-xml-search-replace-all",text:"Заменить все",afterRender:function(){var b=this,a=b.getSearchPanel();a.addButtonSync(b);Ext.button.Button.prototype.afterRender.apply(this,arguments)},handler:function(){var c=this,b=true,a;a=c.getSearchPanel();a.replace(b)},getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-replace-all"],["component","box","button","panel-xml-search-replace-all"],{component:true,box:true,button:true,"panel-xml-search-replace-all":true},["widget.panel-xml-search-replace-all"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.replace.all,"All"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.replace.current.Current",Ext.Button,{cls:"panel-xml-search-replace-current",text:"Заменить",afterRender:function(){var b=this,a=b.getSearchPanel();a.addButtonSync(b);Ext.button.Button.prototype.afterRender.apply(this,arguments)},handler:function(){var b=this,a;a=b.getSearchPanel();a.replace()},getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-replace-current"],["component","box","button","panel-xml-search-replace-current"],{component:true,box:true,button:true,"panel-xml-search-replace-current":true},["widget.panel-xml-search-replace-current"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.replace.current,"Current"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.replace.textfield.TextfieldController",Ext.app.ViewController,{onChange:function(c,b,a){},onKeydown:function(d,h){var c=this,b=c.getView(),a,g,i,f;a=b.getSearchPanel();i=a.getXmlPanel();f=i.getManager();if(h.getKey()===Ext.event.Event.ENTER){a.replace()}else{if(h.getKey()===Ext.event.Event.ESC){f.doEsc()}else{if(h.getKey()===Ext.event.Event.F&&h.ctrlKey){g=a.getReplacePanel();g.hide();h.preventDefault()}else{if(h.getKey()===Ext.event.Event.R&&h.ctrlKey){h.preventDefault()}}}}}},0,0,0,0,["controller.panel.xml.search.replace.textfield"],0,[FBEditor.view.panel.main.xml.search.replace.textfield,"TextfieldController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.replace.textfield.Textfield",Ext.form.field.Text,{controller:"panel.xml.search.replace.textfield",listeners:{change:"onChange",keydown:"onKeydown"},enableKeyEvents:true,getSearchPanel:function(){return this.mixins.cmp.getSearchPanel.call(this)}},0,["panel-xml-search-replace-textfield"],["component","box","field","textfield","panel-xml-search-replace-textfield"],{component:true,box:true,field:true,textfield:true,"panel-xml-search-replace-textfield":true},["widget.panel-xml-search-replace-textfield"],[["cmp",FBEditor.view.panel.main.xml.search.AbstractComponent]],[FBEditor.view.panel.main.xml.search.replace.textfield,"Textfield"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.replace.Replace",Ext.Container,{id:"panel-xml-search-replace",controller:"panel.xml.search.replace",cls:"panel-xml-search-replace",layout:"hbox",hidden:true,replaceField:null,currentBtn:null,allBtn:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-xml-search-replace-textfield",width:300},{xtype:"panel-xml-search-replace-current"},{xtype:"panel-xml-search-replace-all"}];Ext.container.Container.prototype.initComponent.apply(this,arguments)},getReplaceField:function(){var b=this,a;a=b.searchField||b.down("panel-xml-search-replace-textfield");b.searchField=a;return a},getCurrentBtn:function(){var b=this,a;a=b.currentBtn||b.down("panel-xml-search-replace-current");b.currentBtn=a;return a},getAllBtn:function(){var b=this,a;a=b.allBtn||b.down("panel-xml-search-replace-all");b.allBtn=a;return a}},0,["panel-xml-search-replace"],["component","box","container","panel-xml-search-replace"],{component:true,box:true,container:true,"panel-xml-search-replace":true},["widget.panel-xml-search-replace"],0,[FBEditor.view.panel.main.xml.search.replace,"Replace"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.search.Search",Ext.Container,{id:"panel-xml-search",controller:"panel.xml.search",cls:"panel-xml-search",listeners:{change:"onChange",findNext:"onFindNext",findPrev:"onFindPrev",enableButtons:"onEnableButtons",disableButtons:"onDisableButtons"},layout:"hbox",width:"100%",xmlPanel:null,findPanel:null,replacePanel:null,buttonsSync:[],initComponent:function(){var a=this;a.items=[{xtype:"container",layout:"vbox",flex:1,items:[{xtype:"panel-xml-search-find"},{xtype:"panel-xml-search-replace"}]},{xtype:"panel-xml-search-close"}];Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterHide:function(){var b=this,c,a;c=b.getXmlPanel();a=c.getManager();a.search();Ext.container.Container.prototype.afterHide.apply(this,arguments)},getButtonsSync:function(){return this.buttonsSync},addButtonSync:function(a){var c=this,b=c.buttonsSync;b.push(a)},setFocusSearchField:function(){var c=this,g,b,d,f,a,e;g=c.getXmlPanel();b=g.getManager();d=b.getProxyEditor();a=c.getFindPanel();e=a.getSearchField();f=d.getSelection();if(f){e.setValue(f)}else{c.fireEvent("change")}e.focus(true)},replace:function(c){var e=this,g,a,h,f,b,d;g=e.getReplacePanel();h=e.getXmlPanel();f=h.getManager();a=g.getReplaceField();b=a.getValue();d=f.replace(b,c);if(Ext.isNumber(d)){e.setCount(d)}},setCount:function(c){var b=this,a=b.getFindPanel(),d=a.getCountField();d.setCount(c)},syncButtons:function(b){var a=this;if(b){a.fireEvent("enableButtons")}else{a.fireEvent("disableButtons")}},getXmlPanel:function(){var b=this,a;a=b.xmlPanel||b.up("main-xml");b.xmlPanel=a;return a},getFindPanel:function(){var b=this,a;a=b.findPanel||b.down("panel-xml-search-find");b.findPanel=a;return a},getReplacePanel:function(){var b=this,a;a=b.replacePanel||b.down("panel-xml-search-replace");b.replacePanel=a;return a},getDataForSearch:function(){var d=this,a=d.getFindPanel(),f=a.getSearchField(),b=a.getRegexField(),c=a.getCaseField(),g=a.getWordsField(),e;e={searchText:f.getValue(),isReg:b.getValue(),ignoreCase:!c.getValue(),words:g.getValue()};return e}},0,["panel-xml-search"],["component","box","container","panel-xml-search"],{component:true,box:true,container:true,"panel-xml-search":true},["widget.panel-xml-search"],0,[FBEditor.view.panel.main.xml.search,"Search"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.Content",Ext.Component,{id:"panel-xml-content",width:"100%",height:"100%",xmlPanel:null,afterRender:function(){var b=this,d=b.getXmlPanel(),a,c;a=d.getManager();c=a.getProxyEditor();c.init(a);Ext.Component.prototype.afterRender.apply(this,arguments)},getXmlPanel:function(){var b=this,a;a=b.xmlPanel||b.up("main-xml");b.xmlPanel=a;return a},getNode:function(){var b=this,a;a=b.getEl().dom;return a}},0,["panel-xml-content"],["component","box","panel-xml-content"],{component:true,box:true,"panel-xml-content":true},["widget.panel-xml-content"],0,[FBEditor.view.panel.main.xml,"Content"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.XmlController",Ext.app.ViewController,{onLoadData:function(c){var b=this,a=b.getView();a.loadData(c)}},0,0,0,0,["controller.view.xml"],0,[FBEditor.view.panel.main.xml,"XmlController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.xml.Xml",Ext.panel.Panel,{id:"main-xml",controller:"view.xml",listeners:{loadData:"onLoadData"},layout:"vbox",contentPanel:null,searchPanel:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-xml-search",hidden:true},{xtype:"panel-xml-content",flex:1}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},getManager:function(){return FBEditor.view.panel.main.xml.Manager.getInstance()},loadData:function(e){var c=this,b=c.getManager(),d=b.getProxyEditor(),a;e=e.trim();d.setData(e);a=d.getData();b.setSrcXml(a)},getNode:function(){var b=this,c=b.getContentPanel(),a;a=c.getNode();return a},getContentPanel:function(){var b=this,a;a=b.contentPanel||b.down("panel-xml-content");b.contentPanel=a;return a},getSearchPanel:function(){var b=this,a;a=b.searchPanel||b.down("panel-xml-search");b.searchPanel=a;return a}},0,["main-xml"],["component","box","container","panel","main-xml"],{component:true,box:true,container:true,panel:true,"main-xml":true},["widget.main-xml"],0,[FBEditor.view.panel.main.xml,"Xml"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.ResourcesController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.resources"],0,[FBEditor.view.panel.resources,"ResourcesController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.view.ResourcesViewController",Ext.app.ViewController,{onFocusChange:function(c,f,b){var d=this,e=FBEditor.getBridgeProps(),a;a=e.Ext.getCmp("panel-props-resources");if(a&&a.fireEvent){a.fireEvent("loadData",b)}},onItemDblClick:function(b,a){var c=this,d=a.getData(),e=FBEditor.getBridgeWindow();if(d.isFolder){e.FBEditor.resource.Manager.restoreActiveFolder(d.name)}},onItemClick:function(b,a){var d=this,e=a.getData(),f=FBEditor.getBridgeWindow(),c;if(!e.isFolder&&(c=f.FBEditor.resource.Manager.getSelectFunction())){c(e)}},onItemKeyDown:function(b,a,g,c,h,d){var f=this;h.stopPropagation();switch(h.keyCode){case Ext.event.Event.DELETE:return f.onItemKeyDownDelete(b,a,g,c,h,d)}},onItemKeyDownDelete:function(i,c,j,d,f,g){var h=this,a=i.getPanelResources(),b;b=a.getButtonDeleteResource();b.fireEvent("click")}},0,0,0,0,["controller.view.resources"],0,[FBEditor.view.panel.resources.view,"ResourcesViewController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.GreatResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><tpl if="isFolder"><div class="resource-thumb-wrap resource-great-thumb resource-folder-wrap"><tpl else><div class="resource-thumb-wrap resource-great-thumb"></tpl><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"GreatResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.LargeResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><tpl if="isFolder"><div class="resource-thumb-wrap resource-large-thumb resource-folder-wrap"><tpl else><div class="resource-thumb-wrap resource-large-thumb"></tpl><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"LargeResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.NormalResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><tpl if="isFolder"><div class="resource-thumb-wrap resource-normal-thumb resource-folder-wrap"><tpl else><div class="resource-thumb-wrap resource-normal-thumb"></tpl><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"NormalResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.SmallResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-small-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"SmallResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.ListResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-list-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"ListResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.TableResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-table-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span><span class="resource-thumb-date">{date}</span><span class="resource-thumb-size">{size}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"TableResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.view.ResourcesView",Ext.view.View,{id:"view-resources",controller:"view.resources",listeners:{focuschange:"onFocusChange",itemdblclick:"onItemDblClick",itemclick:"onItemClick",itemkeydown:"onItemKeyDown"},itemSelector:"div.resource-thumb-wrap",emptyText:"Нет доступных ресурсов",deferEmptyText:false,tplTypes:{great:"GreatResource",large:"LargeResource",normal:"NormalResource",small:"SmallResource",list:"ListResource",table:"TableResource"},tplDefaultType:"great",panelResources:null,initComponent:function(){var a=this,c=a.tplTypes[a.tplDefaultType],b;b=a.getTplName(c);a.tpl=Ext.create(b);a.store=Ext.create("FBEditor.store.resource.Resource");Ext.view.View.prototype.initComponent.apply(this,arguments)},setStoreData:function(c){var b=this,a=b.store;a.setData(c)},setTpl:function(a){var b=this,c=b.getTplName(a);b.tpl=Ext.create(c);b.refresh()},getTplName:function(b){var c=this,a=c.tplTypes,d;d=a[b]?a[b]:a[c.tplDefaultType];d="FBEditor.view.panel.resources.tpl."+d;return d},getPanelResources:function(){var a=this,b=a.panelResources;b=b||a.up("panel-resources");a.panelResources=b;return b}},0,["view-resources"],["component","box","dataview","view-resources"],{component:true,box:true,dataview:true,"view-resources":true},["widget.view-resources"],0,[FBEditor.view.panel.resources.view,"ResourcesView"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.selectview.SelectViewStore",Ext.data.Store,{fields:["type","name"],data:[{type:"great",name:"Огромные значки"},{type:"large",name:"Крупные значки"},{type:"normal",name:"Обычные значки"},{type:"small",name:"Мелкие значки"},{type:"list",name:"Список"},{type:"table",name:"Таблица"}]},0,0,0,0,0,0,[FBEditor.view.panel.resources.control.selectview,"SelectViewStore"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.selectview.SelectView",Ext.form.ComboBox,{fieldLabel:"Вид",labelWidth:30,queryMode:"local",displayField:"name",valueField:"type",forceSelection:true,editable:false,value:"great",listeners:{select:function(c,a){var b;b=a.getData().type;Ext.getCmp("view-resources").setTpl(b)}},initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.resources.control.selectview.SelectViewStore");Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["panel-resources-selectview"],["component","box","field","textfield","pickerfield","combobox","combo","panel-resources-selectview"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"panel-resources-selectview":true},["widget.panel-resources-selectview"],0,[FBEditor.view.panel.resources.control.selectview,"SelectView"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.Control",Ext.panel.Panel,{id:"panel-resources-control",layout:"hbox",defaults:{margin:"5"},initComponent:function(){var a=this;a.items=[{xtype:"button-load-resource"},{xtype:"button-createfolder-resource"},{xtype:"panel-resources-selectview"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-resources-control"],["component","box","container","panel","panel-resources-control"],{component:true,box:true,container:true,panel:true,"panel-resources-control":true},["widget.panel-resources-control"],0,[FBEditor.view.panel.resources.control,"Control"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.Resources",Ext.panel.Panel,{id:"panel-resources",controller:"panel.resources",autoScroll:true,bodyPadding:5,initComponent:function(){var a=this;a.items=[{xtype:"panel-resources-control"},{xtype:"view-resources"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},getButtonDeleteResource:function(){var b=this,c=FBEditor.getBridgeProps(),a;a=c.Ext.getCmp("button-delete-resource");return a}},0,["panel-resources"],["component","box","container","panel","panel-resources"],{component:true,box:true,container:true,panel:true,"panel-resources":true},["widget.panel-resources"],0,[FBEditor.view.panel.resources,"Resources"],0));(Ext.cmd.derive("FBEditor.view.panel.empty.Empty",Ext.panel.Panel,{id:"panel-empty",cls:"panel-empty",layout:"center",_textPanel:null,translateText:{defaultText:"Загрузка..."},afterRender:function(){var b=this,a;a=Ext.widget({xtype:"component",tpl:'<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><p class="message">{text}</p>'});b.add(a);b._textPanel=a;Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},afterHide:function(){var a=this;a.setMessage();Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},setMessage:function(e){var c=this,b=c._textPanel,a=c.translateText.defaultText,d;d={text:e||a};b.update(d)}},0,["panel-empty"],["component","box","container","panel","panel-empty"],{component:true,box:true,container:true,panel:true,"panel-empty":true},["widget.panel-empty"],0,[FBEditor.view.panel.empty,"Empty"],0));(Ext.cmd.derive("FBEditor.view.panel.main.content.Content",FBEditor.view.panel.main.Abstract,{id:"panel-main-content",controller:"panel.main.content",items:[{xtype:"panel-empty"},{xtype:"form-desc"},{xtype:"panel-resources"},{xtype:"main-editor"},{xtype:"main-xml"}],listeners:{resize:"onResize",contentBody:"onContentBody",contentXml:"onContentXml",contentDesc:"onContentDesc",contentResources:"onContentResources",contentEmpty:"onContentEmpty"},activeItem:"form-desc",panelName:"content",region:"center",collapsible:false,layout:"card",minWidth:320,overflowX:true,margin:"0 2px 0 2px",bodyPadding:0,mainEditor:null,panelToolstab:null,toolstab:null,afterRender:function(){var b=this,a,d,c;a=b.getMainEditor();a.createRootElement();FBEditor.view.panel.main.Abstract.prototype.afterRender.apply(this,arguments)},getMainEditor:function(){var b=this,a;a=b.mainEditor||Ext.getCmp("main-editor");b.mainEditor=a;return a},getPanelMainToolstab:function(){var b=this,a;a=b.panelToolstab||Ext.getCmp("panel-main-toolstab");b.panelToolstab=a;return a},getToolstab:function(){var a=this,b;b=a.toolstab||Ext.getCmp("panel-toolstab-main");a.toolstab=b;return b},getSectionPanel:function(){var b=FBEditor.getBridgeNavigation(),a;a=b.Ext.getCmp("panel-navigation-section");return a},isActiveItem:function(e){var c=this,a,b,d;b=c.getLayout();d=b.getActiveItem();a=d.getId()===e;return a},openBody:function(){var b=this,a=b.getMainEditor(),c;if(!a||!a.rendered){Ext.defer(function(){b.openBody()},500)}Ext.create("FBEditor.command.OpenBody").execute();c=Ext.getCmp("panel-body-navigation");c.selectRoot()}},0,["panel-main-content"],["component","box","container","panel","panel-main-content"],{component:true,box:true,container:true,panel:true,"panel-main-content":true},["widget.panel-main-content"],0,[FBEditor.view.panel.main.content,"Content"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.PropsController",FBEditor.view.panel.main.DetachController,{},0,0,0,0,["controller.panel.main.props"],0,[FBEditor.view.panel.main.props,"PropsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.CardController",Ext.app.ViewController,{onActivePanelResources:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-resources")},onActivePanelBody:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-body")},onActivePanelXml:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-xml")},onActivePanelDesc:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-desc")}},0,0,0,0,["controller.panel.main.props.card"],0,[FBEditor.view.panel.main.props,"CardController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Abstract",Ext.panel.Panel,{afterRender:function(){var a=this;a.syncContent();Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},getContentId:function(){throw Error("Не реализован метод view.panel.main.props.Abstract#getContentId")},syncContent:function(){var b=this,e=b.getContentId(),c=FBEditor.getBridgeWindow(),a,d;a=c.Ext.getCmp("panel-main-content");d=a.getLayout().getActiveItem();if(d.id===e){Ext.getCmp("panel-main-props-card").setActiveItem(b.id)}}},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main.props,"Abstract"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.BodyController",Ext.app.ViewController,{onBeforeActivate:function(){var d=this,a=d.getView(),g=a.getPropsInfo(),f=a.getPropsPath(),c,b,e;g.update();f.resetData();b=a.getConvertBtn();e=a.getDeleteBtn();b.setVisible(false);e.setVisible(false);c=a.editor;if(c){a.remove(c);a.editor=null}},onAfterRender:function(){var c=this,a=FBEditor.getEditorManager(),b;b=a.getFocusElement();if(b){c.onLoadData(b)}},onLoadData:function(d){var j=this,k=j.getView(),b=k.getPropsInfo(),l=k.getPropsPath(),m=k.getConvertBtn(),f=k.getDeleteBtn(),h=k.editor,g,a,c;g=d.getData();c=g.el;if(g){b.update(g);Ext.suspendLayouts();l.updateData(c);m.element=c;f.element=c;m.setVisible(true);f.setVisible(true);if(c.isRoot){f.setVisible(false)}if(c.isImg||c.isRoot||!m.verify()){m.setVisible(false)}if(!h||h&&!h.element.equal(g.el)){if(h){k.remove(h)}try{a=g.elementName.replace(/-/g,"");a=a.toLowerCase();a="FBEditor.view.panel.main.props.body.editor."+a+".Editor";h=Ext.create(a,{elementName:g.elementName});k.add(h)}catch(i){h=null}}Ext.resumeLayouts();if(h){h.updateData(g,true)}k.editor=h}}},0,0,0,0,["controller.panel.props.body"],0,[FBEditor.view.panel.main.props.body,"BodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.Info",Ext.Component,{id:"props-element-info",initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<div class="element-info">','<div class="element-info-name">{elementName}</div>',"</div>");Ext.Component.prototype.initComponent.apply(this,arguments)}},0,["props-element-info"],["component","box","props-element-info"],{component:true,box:true,"props-element-info":true},["widget.props-element-info"],0,[FBEditor.view.panel.main.props.body,"Info"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.AbstractEditorController",Ext.app.ViewController,{onChange:function(){var a=this;a.updateElement()},updateElement:function(){var c=this,a=c.getView(),b;if(!a.isLoad){b=a.getValues();if(a.isValid()){a.element.update(b)}}}},0,0,0,0,["controller.panel.props.body.editor"],0,[FBEditor.view.panel.main.props.body.editor,"AbstractEditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.id.Id",Ext.form.field.Text,{name:"id",fieldLabel:"ID",anchor:"100%",regex:/^[_a-z][0-9a-z._-]*$/i,translateText:{idError:"Не соответствует схеме xsd:ID"},initComponent:function(){var a=this;a.regexText=a.translateText.idError;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)}},0,["panel-props-body-editor-fields-id"],["component","box","field","textfield","panel-props-body-editor-fields-id"],{component:true,box:true,field:true,textfield:true,"panel-props-body-editor-fields-id":true},["widget.panel-props-body-editor-fields-id"],0,[FBEditor.view.panel.main.props.body.editor.fields.id,"Id"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.AbstractEditor",Ext.form.Panel,{controller:"panel.props.body.editor",listeners:{change:"onChange"},layout:"anchor",width:"100%",defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("form").fireEvent("change")}}},elementName:null,element:null,isLoad:false,panelProps:null,constructor:function(b){var a=this;a.elementName=b.elementName;Ext.form.Panel.prototype.constructor.apply(this,arguments)},updateData:function(c,d){var b=this,a;a=b.getForm();b.isLoad=d;b.element=c.el?c.el:b.element;a.reset();a.setValues(c);b.isLoad=false},setVisibleButtons:function(e){var b=this,d,a,c;d=b.getPanelProps();a=d.getConvertBtn();c=d.getDeleteBtn();a.setVisible(e);c.setVisible(e)},getPanelProps:function(){var a=this,b;b=a.panelProps||Ext.getCmp("panel-props-body");a.panelProps=b;return b}},1,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor,"AbstractEditor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.a.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{href:"Ссылка"},initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"},{name:"href",fieldLabel:a.translateText.href,anchor:"100%",allowBlank:false}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.a,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.annotation.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.annotation,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.blockquote.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.blockquote,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.clipped.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{afterRender:function(){var b=this,c=b.getPanelProps(),a=c.getConvertBtn();a.setVisible(false);FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.afterRender.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.clipped,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.code.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.code,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input.Controller",Ext.app.ViewController,{onBlur:function(){var d=this,a=d.getView(),c=a.getForm(),f=c.down("#"+a.getId()),e=f.getValue(),b;if(e==""){c.fireEvent("change");return}b=e.match(/^(\d+(\.\d+)?)(em|ex|%|mm)?$/);if(b!==null){f.setValue(b[1]);if(b[3]){c.down("combobox[name="+f.getName()+"-size]").setValue(b[3])}else{c.fireEvent("change")}}}},0,0,0,0,["controller.panel.main.props.body.editor.fields.sizeselect.input"],0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input,"Controller"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input.Input",Ext.form.field.Text,{controller:"panel.main.props.body.editor.fields.sizeselect.input",translateText:{widthError:"По шаблону d+(.d+)?(em|ex|%|mm). Например: 1.5em"},regex:/^\d+(\.\d+)?/,listeners:{blur:"onBlur"},initComponent:function(){var a=this;a.regexText=a.translateText.widthError;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)},setValue:function(d){var c=this,a,b;if(d){a=d.match(/^(\d+(\.\d+)?)(em|ex|%|mm)?$/);b=c.up("form");if(a!==null){arguments[0]=a[1];if(a[3]){b.down("combobox[name="+c.getName()+"-size]").setValue(a[3])}}else{arguments[0]=d}}Ext.form.field.Text.prototype.setValue.apply(this,arguments)},getSubmitValue:function(){var b=this,a=b.up("form"),d=a.down("#"+this.id),c;c=d.getValue();if(c==""){return""}c+=a.down("combobox[name="+d.getName()+"-size]").getValue();return c},getForm:function(){var b=this,a;a=b.form||b.up("form");b.form=a;return a}},0,["panel-props-body-editor-fields-sizeselect-input"],["component","box","field","textfield","panel-props-body-editor-fields-sizeselect-input"],{component:true,box:true,field:true,textfield:true,"panel-props-body-editor-fields-sizeselect-input":true},["widget.panel-props-body-editor-fields-sizeselect-input"],0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input,"Input"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.Store",Ext.data.Store,{sorters:[{property:"text",direction:"ASC"}],fields:["value","text"],data:[{value:"em",text:"em"},{value:"ex",text:"ex"},{value:"%",text:"%"},{value:"mm",text:"mm"}]},0,0,0,0,0,0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect,"Store"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.SizeSelect",Ext.form.FieldContainer,{layout:{type:"hbox",pack:"start",align:"stretch"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.Store");b.items=[{xtype:"panel-props-body-editor-fields-sizeselect-input",width:53,name:b.name},{xtype:"combo",width:60,name:b.name+"-size",store:a,queryMode:"local",valueField:"value",displayField:"text",value:"em",editable:false,submitValue:false,listeners:{change:function(){this.up("form").fireEvent("change")}}}];Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments)}},0,["panel-props-body-editor-fields-sizeselect"],["component","box","container","fieldcontainer","panel-props-body-editor-fields-sizeselect"],{component:true,box:true,container:true,fieldcontainer:true,"panel-props-body-editor-fields-sizeselect":true},["widget.panel-props-body-editor-fields-sizeselect"],0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect,"SizeSelect"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.img.picture.PictureController",FBEditor.view.image.ImageController,{onLoad:function(){var c=this,b=c.getView(),a;a=b.getPanelPropsBody();a.updateLayout()}},0,0,0,0,["controller.panel.props.body.editor.img.picture"],0,[FBEditor.view.panel.main.props.body.editor.img.picture,"PictureController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.img.picture.Picture",FBEditor.view.image.Image,{controller:"panel.props.body.editor.img.picture",style:{maxWidth:"150px",maxHeight:"200px"},src:"undefined",panelPropsBody:null,getPanelPropsBody:function(){var b=this,a;a=b.panelPropsBody||b.up("panel-props-body");b.panelPropsBody=a;return a}},0,["panel-props-body-editor-img-picture"],["component","box","image","imagecomponent","baseimage","panel-props-body-editor-img-picture"],{component:true,box:true,image:true,imagecomponent:true,baseimage:true,"panel-props-body-editor-img-picture":true},["widget.panel-props-body-editor-img-picture"],0,[FBEditor.view.panel.main.props.body.editor.img.picture,"Picture"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.img.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{prefixName:"",picture:null,translateText:{emptyImg:"Пустое изображение",alt:"Альтернативный текст",width:"Ширина",minWidth:"Мин. ширина",maxWidth:"Макс. ширина"},initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-img-picture"},{xtype:"button-editor-select-img",scope:a,style:{marginLeft:"10px"}},{xtype:"displayfield",name:a.prefixName+"name",value:a.translateText.emptyImg,listeners:{}},{xtype:"hidden",name:a.prefixName+"src",value:"undefined",submitValue:true},{xtype:"panel-props-body-editor-fields-id",name:a.prefixName+"id"},{name:a.prefixName+"alt",fieldLabel:a.translateText.alt,anchor:"100%"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:a.translateText.width,name:a.prefixName+"width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:a.translateText.minWidth,name:a.prefixName+"min-width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:a.translateText.maxWidth,name:a.prefixName+"max-width"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)},updateData:function(f,g){var c=this,e=c.prefixName,a={},b,d;c.isLoad=g;c.element=f.el?f.el:c.element;f.src=f.src?f.src:f.name;f.url=f.url?f.url:f.src;f[e+"name"]=f.name?f.name:c.translateText.emptyImg;Ext.Object.each(f,function(h,i){a[e+h]=i});b=c.getForm();b.setValues(a);d=c.getPicture();d.updateView({url:f.url});c.isLoad=false},reset:function(){var a=this,b;b={url:"undefined"};a.updateData(b);FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.reset.apply(this,arguments)},getPicture:function(){var a=this,b;b=a.picture||a.down("panel-props-body-editor-img-picture");return b}},0,["panel-props-body-editor-img"],["component","box","container","panel","form","panel-props-body-editor-img"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-img":true},["widget.panel-props-body-editor-img"],0,[FBEditor.view.panel.main.props.body.editor.img,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.img.ImgController",FBEditor.view.panel.main.props.body.editor.AbstractEditorController,{onChange:function(){var b=this,a=b.getView();a.up("panel-props-body-editor-div").fireEvent("change")}},0,0,0,0,["controller.panel.props.body.editor.marker.img"],0,[FBEditor.view.panel.main.props.body.editor.div.marker.img,"ImgController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.img.Img",FBEditor.view.panel.main.props.body.editor.img.Editor,{controller:"panel.props.body.editor.marker.img",defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("panel-props-body-editor-div").fireEvent("change")}}},prefixName:"marker-",updateData:function(e,f){var b=this,d=b.prefixName,a={},c;e.src=e.src?e.src:e.name;e.url=e.url?e.url:e.src;e.name=e.name?e.name:b.translateText.emptyImg;Ext.Object.each(e,function(g,h){a[d+g]=h});b.getForm().setValues(a);if(c=b.getPicture()){c.updateView({url:e.url})}}},0,["panel-props-body-editor-marker-img"],["component","box","container","panel","form","panel-props-body-editor-img","panel-props-body-editor-marker-img"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-img":true,"panel-props-body-editor-marker-img":true},["widget.panel-props-body-editor-marker-img"],0,[FBEditor.view.panel.main.props.body.editor.div.marker.img,"Img"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.Marker",Ext.form.FieldSet,{listeners:{collapse:function(){this.setMarker(false);this.reset()},expand:function(){this.setMarker(true)}},collapsible:true,collapsed:true,border:true,padding:10,margin:"10 0 0 0",img:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-marker-img"},{xtype:"hidden",name:"marker",value:false,submitValue:true}];Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},updateData:function(d,f){var c=this,b=c.getImg(),a,e;a=d.el.marker;if(a){c.expand();e=a.img.getData();b.updateData(e,f)}else{c.collapse()}},getImg:function(){var b=this,a;a=b.img||b.down("panel-props-body-editor-marker-img");b.img=a;return a},setMarker:function(b){var a=this;a.down("[name=marker]").setRawValue(b);a.up("form").fireEvent("change")},reset:function(){var b=this,a=b.getImg();a.reset()}},0,["panel-props-body-editor-marker"],["component","box","container","fieldset","panel-props-body-editor-marker"],{component:true,box:true,container:true,fieldset:true,"panel-props-body-editor-marker":true},["widget.panel-props-body-editor-marker"],0,[FBEditor.view.panel.main.props.body.editor.div.marker,"Marker"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{prefixName:"",translateText:{width:"Ширина",minWidth:"Мин. ширина",maxWidth:"Макс. ширина",floatText:"Обтекание",align:"Выравнивание",bindTo:"Привязать к",border:"Граница",onOnePage:"on-one-page",markerText:"Маркер"},initComponent:function(){var b=this,a;a={floatStore:Ext.create("Ext.data.Store",{fields:["value","text"],data:[{value:"",text:"ничего"},{value:"left",text:"прижать влево"},{value:"right",text:"прижать вправо"},{value:"center",text:"по центру"},{value:"default",text:"по умолчанию"}]}),alignStore:Ext.create("Ext.data.Store",{fields:["text"],data:[{value:"",text:"ничего"},{value:"left",text:"влево"},{value:"right",text:"вправо"},{value:"center",text:"по центру"},{value:"justify",text:"по ширине"}]})};b.items=[{xtype:"panel-props-body-editor-fields-id",name:b.prefixName+"id"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:b.translateText.width,name:b.prefixName+"width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:b.translateText.minWidth,name:b.prefixName+"min-width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:b.translateText.maxWidth,name:b.prefixName+"max-width"},{xtype:"combo",name:b.prefixName+"float",labelAlign:"left",fieldLabel:b.translateText.floatText,store:a.floatStore,queryMode:"local",valueField:"value",displayField:"text",editable:false},{xtype:"combo",name:b.prefixName+"align",labelAlign:"left",fieldLabel:b.translateText.align,store:a.alignStore,queryMode:"local",valueField:"value",displayField:"text",editable:false},{xtype:"checkbox",name:b.prefixName+"border",labelAlign:"left",fieldLabel:b.translateText.border,inputValue:"true"},{xtype:"checkbox",name:b.prefixName+"on-one-page",labelAlign:"left",fieldLabel:b.translateText.onOnePage,inputValue:"true"},{name:b.prefixName+"bindto",fieldLabel:b.translateText.bindTo,anchor:"100%"},{xtype:"panel-props-body-editor-marker",title:b.translateText.markerText}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)},updateData:function(d,e){var c=this,b=c.getForm(),a;c.isLoad=e;c.element=d.el?d.el:c.element;b.reset();b.setValues(d);c.down("panel-props-body-editor-marker").updateData(d,e);c.isLoad=false}},0,["panel-props-body-editor-div"],["component","box","container","panel","form","panel-props-body-editor-div"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-div":true},["widget.panel-props-body-editor-div"],0,[FBEditor.view.panel.main.props.body.editor.div,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.em.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.em,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.epigraph.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.epigraph,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fb3body.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.fb3body,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.li.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.li,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.note.AutotextStore",Ext.data.Store,{fields:["value","text"],data:[{value:"1",text:"1, 2, 3"},{value:"i",text:"I, II, III"},{value:"a",text:"a, b, c"},{value:"*",text:"*, **, ***"},{value:"keep",text:"без автонумерации"}]},0,0,0,0,0,0,[FBEditor.view.panel.main.props.body.editor.note,"AutotextStore"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.note.RoleStore",Ext.data.Store,{fields:["value","text"],data:[{value:"auto",text:"auto"},{value:"footnote",text:"footnote"},{value:"endnote",text:"endnote"},{value:"comment",text:"comment"},{value:"other",text:"other"}]},0,0,0,0,0,0,[FBEditor.view.panel.main.props.body.editor.note,"RoleStore"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.note.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{href:"Ссылка",autotext:"Автотекст",role:"Тип"},initComponent:function(){var b=this,c,a;c=Ext.create("FBEditor.view.panel.main.props.body.editor.note.RoleStore");a=Ext.create("FBEditor.view.panel.main.props.body.editor.note.AutotextStore");b.items=[{xtype:"panel-props-body-editor-fields-id"},{name:"href",fieldLabel:b.translateText.href,anchor:"100%",allowBlank:false},{xtype:"combobox",name:"role",fieldLabel:b.translateText.role,anchor:"100%",editable:false,store:c,valueField:"value",value:"auto"},{xtype:"combobox",name:"autotext",fieldLabel:b.translateText.autotext,anchor:"100%",editable:false,store:a,valueField:"value",value:"1"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.note,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.notebody.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.notebody,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.notes.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{show:"show"},initComponent:function(){var a=this;a.items=[{xtype:"checkbox",name:"show",labelAlign:"left",labelWidth:50,fieldLabel:a.translateText.show,inputValue:"true"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.notes,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.ol.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.ol,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.p.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.p,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.paperpagebreak.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{pageBefore:"page-before",pageAfter:"page-after"},initComponent:function(){var a=this;a.items=[{xtype:"numberfield",name:"page-before",labelAlign:"left",allowBlank:false,fieldLabel:a.translateText.pageBefore,minValue:0},{xtype:"numberfield",name:"page-after",labelAlign:"left",fieldLabel:a.translateText.pageAfter,minValue:0}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.paperpagebreak,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.poem.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.poem,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.pre.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.pre,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.section.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{article:"article",clipped:"clipped",doi:"doi",pos:"first-char-pos",idError:"Не соответствует схеме fb3d:UUIDType",doiError:"Не соответствует схеме fb3d:DOIType"},initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%",regex:/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/i},{xtype:"checkbox",name:"article",labelAlign:"left",labelWidth:50,fieldLabel:a.translateText.article,inputValue:"true"},{name:"doi",fieldLabel:a.translateText.doi,anchor:"100%",regex:/^(10[.][0-9]{3,})(\.[0-9]+)*\/[^"]([^"&amp;&lt;&gt;&apos;])+$/i},{xtype:"checkbox",name:"clipped",labelAlign:"left",labelWidth:50,fieldLabel:a.translateText.clipped,inputValue:"true"},{xtype:"numberfield",name:"first-char-pos",labelAlign:"left",fieldLabel:a.translateText.pos,minValue:0}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.section,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.smallcaps.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.smallcaps,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.spacing.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.spacing,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.span.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"},{name:"class",fieldLabel:"class",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.span,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.stanza.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.stanza,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.strikethrough.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.strikethrough,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.strong.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.strong,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.sub.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.sub,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.subscription.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.subscription,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.subtitle.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.subtitle,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.sup.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.sup,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.table.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.table,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.td.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{updateData:function(){var a=this;FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.updateData.apply(this,arguments);a.setVisibleButtons(false)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.td,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.th.Editor",FBEditor.view.panel.main.props.body.editor.td.Editor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.th,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.title.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.title,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.tr.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{updateData:function(){var a=this;FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.updateData.apply(this,arguments);a.setVisibleButtons(false)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.tr,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.ul.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.ul,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.underline.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-fields-id"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.underline,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.path.el.ElController",Ext.app.ViewController,{onClick:function(){var f=this,a=f.getView(),d=a.getFocusEl(),c=d.getManager(),b={},e;e=d.getNodeHelper();b.node=e.getNode();b.start=c.getDeepFirst(b.node);b.last=c.getDeepLast(b.node);c.setCursor({focusElement:d,startNode:b.start,endNode:b.last,endOffset:b.last.length})}},0,0,0,0,["controller.panel.props.body.path.el"],0,[FBEditor.view.panel.main.props.body.path.el,"ElController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.path.el.El",Ext.Component,{controller:"panel.props.body.path.el",cls:"panel-props-body-path-el",listeners:{click:{element:"el",fn:"onClick"}},focusEl:null,panelProps:null,constructor:function(d){var c=this,a=d.focusEl,b=a.getName();c.focusEl=a;c.html="<span>"+b.toUpperCase()+"</span>";Ext.Component.prototype.constructor.apply(this,arguments)},getFocusEl:function(){return this.focusEl},getPanelProps:function(){var a=this,b;b=a.panelProps||Ext.getCmp("panel-props-body");a.panelProps=b;return b}},1,["panel-props-body-path-el"],["component","box","panel-props-body-path-el"],{component:true,box:true,"panel-props-body-path-el":true},["widget.panel-props-body-path-el"],0,[FBEditor.view.panel.main.props.body.path.el,"El"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.path.edit.EditController",Ext.app.ViewController,{onClick:function(){var e=this,a=e.getView(),c=a.getFocusEl(),d,b;d=a.getTreePanel();d.clearSelection();b=a.getXmlTreePanel();b.fireEvent("openElement",c)}},0,0,0,0,["controller.panel.props.body.path.edit"],0,[FBEditor.view.panel.main.props.body.path.edit,"EditController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.path.edit.Edit",FBEditor.view.panel.main.props.body.path.el.El,{controller:"panel.props.body.path.edit",cls:"panel-props-body-path-edit",constructor:function(d){var c=this,a=d.focusEl,b=a.getName();FBEditor.view.panel.main.props.body.path.el.El.prototype.constructor.apply(this,arguments);c.html='<span class="fa fa-pencil"></span>'},getTreePanel:function(){var b=this,c=FBEditor.getBridgeNavigation(),a;a=c.Ext.getCmp("panel-body-navigation");return a},getXmlTreePanel:function(){var b=this,c=FBEditor.getBridgeNavigation(),a;a=c.Ext.getCmp("panel-xml-navigation");return a}},1,["panel-props-body-path-edit"],["component","box","panel-props-body-path-el","panel-props-body-path-edit"],{component:true,box:true,"panel-props-body-path-el":true,"panel-props-body-path-edit":true},["widget.panel-props-body-path-edit"],0,[FBEditor.view.panel.main.props.body.path.edit,"Edit"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.path.Path",Ext.Container,{id:"panel-props-body-path",margin:"0 0 10px 0",defaults:{style:{"float":"left"}},updateData:function(a){var e=this,c=a,f,b,d;e.resetData();f={xtype:"component",html:"&nbsp;>&nbsp;"};while(c&&!c.isRoot){if(c.equal(a)){b={xtype:"component",html:c.getName().toUpperCase()}}else{b=Ext.create("FBEditor.view.panel.main.props.body.path.el.El",{focusEl:c})}d=Ext.create("FBEditor.view.panel.main.props.body.path.edit.Edit",{focusEl:c});e.insert(0,d);e.insert(0,b);c=c.parent;if(c&&!c.isRoot){e.insert(0,f)}}},resetData:function(){var a=this;a.removeAll(true,true)}},0,["panel-props-body-path"],["component","box","container","panel-props-body-path"],{component:true,box:true,container:true,"panel-props-body-path":true},["widget.panel-props-body-path"],0,[FBEditor.view.panel.main.props.body.path,"Path"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.Body",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-body",controller:"panel.props.body",listeners:{beforeactivate:"onBeforeActivate",afterRender:"onAfterRender",loadData:"onLoadData"},layout:"anchor",defaults:{anchor:"100%"},editor:null,propsInfo:null,propsPath:null,convertBtn:null,deleteBtn:null,initComponent:function(){var a=this;a.items=[{xtype:"props-element-info"},{xtype:"panel-props-body-path"},{xtype:"button-editor-convert-element",hidden:true,style:{margin:"0 0 10px 0"}},{xtype:"button-editor-delete-element",hidden:true,style:{margin:"0 0 10px 0"}}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"main-editor"},getPropsInfo:function(){var a=this,b;b=a.propsInfo||a.down("props-element-info");a.propsInfo=b;return b},getPropsPath:function(){var a=this,b;b=a.propsPath||a.down("panel-props-body-path");a.propsPath=b;return b},getConvertBtn:function(){var b=this,a;a=b.convertBtn||b.down("button-editor-convert-element");b.convertBtn=a;return a},getDeleteBtn:function(){var a=this,b;b=a.deleteBtn||a.down("button-editor-delete-element");a.deleteBtn=b;return b}},0,["panel-props-body"],["component","box","container","panel","panel-props-body"],{component:true,box:true,container:true,panel:true,"panel-props-body":true},["widget.panel-props-body"],0,[FBEditor.view.panel.main.props.body,"Body"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.DescController",Ext.app.ViewController,{onShowContainer:function(c){var d=this,b=d.getView(),a=b.containerList;Ext.Array.each(a,function(g){var e,f;e=Ext.getCmp(g);f=c&&c.getId&&g===c.getId();e.setVisible(f);if(!f&&e.cleanContainer){e.cleanContainer()}})}},0,0,0,0,["controller.panel.props.desc"],0,[FBEditor.view.panel.main.props.desc,"DescController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.ContainerController",Ext.app.ViewController,{onBeforeActivate:function(){var c=this,a=c.getView(),b;b=a.editor;if(b){a.remove(b);a.editor=null}},onAfterRender:function(){var c=this,a=FBEditor.getEditorManager(),b;b=a.getFocusElement();if(b){c.onLoadData(b)}},onLoadData:function(f){var d=this,a=d.getView(),i=a.getPanelProps(),g,b,c;if(!a.isVisible()){i.fireEvent("showContainer",a)}g=f.getData();if(g){c=a.editor;if(!c||c&&c.elementName!==g.elementName){if(c){a.remove(c)}try{b=g.elementName.replace(/-/,"");b=b.toLowerCase();b="FBEditor.view.panel.main.props.desc.editor."+b+".Editor";c=Ext.create(b,{elementName:g.elementName});a.add(c)}catch(h){c=null}}if(c){c.updateData(g,true)}a.editor=c}}},0,0,0,0,["controller.panel.props.desc.editor.container"],0,[FBEditor.view.panel.main.props.desc.editor,"ContainerController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.AbstractEditorController",Ext.app.ViewController,{onChange:function(){var a=this;a.updateElement()},updateElement:function(){var c=this,a=c.getView(),b;if(!a.isLoad){b=a.getValues();if(a.isValid()){a.element.update(b)}}}},0,0,0,0,["controller.panel.props.desc.editor"],0,[FBEditor.view.panel.main.props.desc.editor,"AbstractEditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.AbstractEditor",Ext.form.Panel,{controller:"panel.props.desc.editor",listeners:{change:"onChange"},layout:"anchor",width:"100%",defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("form").fireEvent("change")}}},elementName:null,element:null,isLoad:false,constructor:function(b){var a=this;a.elementName=b.elementName;Ext.form.Panel.prototype.constructor.apply(this,arguments)},updateData:function(c,d){var b=this,a;a=b.getForm();b.isLoad=d;b.element=c.el?c.el:b.element;a.reset();a.setValues(c);b.isLoad=false}},1,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor,"AbstractEditor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.a.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{translateText:{href:"Ссылка"},initComponent:function(){var a=this;a.items=[{name:"href",fieldLabel:a.translateText.href,anchor:"100%",allowBlank:false}];FBEditor.view.panel.main.props.desc.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.a,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.annotation.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.annotation,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.bibliodescription.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.bibliodescription,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.em.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.em,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.history.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.history,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.p.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.p,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.preamble.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.preamble,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.strong.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.strong,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.Container",Ext.Container,{id:"panel-props-desc-editor-container",controller:"panel.props.desc.editor.container",listeners:{beforeactivate:"onBeforeActivate",afterRender:"onAfterRender",loadData:"onLoadData"},hidden:true,editor:null,panelProps:null,cleanContainer:function(){var b=this,a=FBEditor.getEditorManager();a.resetFocus()},getPanelProps:function(){var a=this,b;b=a.panelProps||Ext.getCmp("panel-props-desc");a.panelProps=b;return b}},0,["panel-props-desc-editor-container"],["component","box","container","panel-props-desc-editor-container"],{component:true,box:true,container:true,"panel-props-desc-editor-container":true},["widget.panel-props-desc-editor-container"],0,[FBEditor.view.panel.main.props.desc.editor,"Container"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.Desc",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-desc",controller:"panel.props.desc",listeners:{showContainer:"onShowContainer"},containerList:["panel-props-desc-editor-container"],initComponent:function(){var a=this;a.items=[{xtype:"panel-props-desc-editor-container"}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"form-desc"}},0,["panel-props-desc"],["component","box","container","panel","panel-props-desc"],{component:true,box:true,container:true,panel:true,"panel-props-desc":true},["widget.panel-props-desc"],0,[FBEditor.view.panel.main.props.desc,"Desc"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.ResourcesController",Ext.app.ViewController,{_deferId:null,onClick:function(){var a=this;clearTimeout(a._deferId)},onLoadData:function(a){var b=this,d=a?a.getData():null,c=FBEditor.getBridgeProps();if(d){c.Ext.getCmp("props-resources-info").update(d);b.setResourceButtons(d.name);b.setVisibleItems(true);if(d.isFolder){c.Ext.getCmp("button-save-resource").setVisible(false);c.Ext.getCmp("button-move-resource").setVisible(false);c.Ext.getCmp("button-replace-resource").setVisible(false)}}else{b._deferId=Ext.defer(function(){b.setVisibleItems(false);b.setResourceButtons(null)},200)}},setVisibleItems:function(d){var c=this,a=c.getView(),b=a.items;b.each(function(e){e.setVisible(d)})},setResourceButtons:function(c){var a,b=FBEditor.getBridgeProps();if(b.Ext&&b.Ext.getCmp){a=[b.Ext.getCmp("button-delete-resource"),b.Ext.getCmp("button-save-resource"),b.Ext.getCmp("button-move-resource"),b.Ext.getCmp("button-replace-resource")];Ext.Array.each(a,function(d){d.setResource(c)})}}},0,0,0,0,["controller.panel.props.resources"],0,[FBEditor.view.panel.main.props.resources,"ResourcesController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.Info",Ext.Component,{id:"props-resources-info",initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<div class="resource-info">','<div class="resource-info-name">{baseName}</div>','<tpl if="isCover"><div class="resource-info-cover">Обложка книги</div></tpl>','<tpl if="!isFolder"><div><span>Размеры:</span> {width} x {height}</div></tpl>',"<div><span>Тип:</span> {type}</div>",'<tpl if="isFolder"><div><span>Ресурсов:</span> {total}</div>',"<tpl else><div><span>Объём:</span> {size}</div></tpl>",'<tpl if="date"><div><span>Изменён:</span> {date}</div></tpl>','<tpl if="totalElements"><div><span>Использован в тексте:</span> {totalElements}</div></tpl>',"</div>");Ext.Component.prototype.initComponent.apply(this,arguments)}},0,["props-resources-info"],["component","box","props-resources-info"],{component:true,box:true,"props-resources-info":true},["widget.props-resources-info"],0,[FBEditor.view.panel.main.props.resources,"Info"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.Resources",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-resources",controller:"panel.props.resources",listeners:{loadData:"onLoadData",click:{element:"el",fn:"onClick"}},defaults:{hidden:true,margin:"2 0"},initComponent:function(){var a=this;a.items=[{xtype:"props-resources-info"},{xtype:"button-delete-resource"},{xtype:"button-save-resource"},{xtype:"button-move-resource"},{xtype:"button-replace-resource"}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"panel-resources"}},0,["panel-props-resources"],["component","box","container","panel","panel-props-resources"],{component:true,box:true,container:true,panel:true,"panel-props-resources":true},["widget.panel-props-resources"],0,[FBEditor.view.panel.main.props.resources,"Resources"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.xml.Xml",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-xml",getContentId:function(){return"main-xml"}},0,["panel-props-xml"],["component","box","container","panel","panel-props-xml"],{component:true,box:true,container:true,panel:true,"panel-props-xml":true},["widget.panel-props-xml"],0,[FBEditor.view.panel.main.props.xml,"Xml"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Card",Ext.panel.Panel,{id:"panel-main-props-card",controller:"panel.main.props.card",listeners:{activePanelResources:"onActivePanelResources",activePanelDesc:"onActivePanelDesc",activePanelBody:"onActivePanelBody",activePanelXml:"onActivePanelXml"},layout:"card",initComponent:function(){var a=this;a.items=[{xtype:"panel-props-desc"},{xtype:"panel-props-resources"},{xtype:"panel-props-body"},{xtype:"panel-props-xml"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-main-props-card"],["component","box","container","panel","panel-main-props-card"],{component:true,box:true,container:true,panel:true,"panel-main-props-card":true},["widget.panel-main-props-card"],0,[FBEditor.view.panel.main.props,"Card"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Props",FBEditor.view.panel.main.AbstractDetach,{id:"panel-main-props",controller:"panel.main.props",panelName:"props",title:"Свойства",overflowY:"auto",cls:"panel-main-props",initComponent:function(){var a=this;a.items=[{xtype:"panel-main-props-card"}];FBEditor.view.panel.main.AbstractDetach.prototype.initComponent.apply(this,arguments)}},0,["panel-main-props"],["component","box","container","panel","panel-main-props"],{component:true,box:true,container:true,panel:true,"panel-main-props":true},["widget.panel-main-props"],0,[FBEditor.view.panel.main.props,"Props"],0));(Ext.cmd.derive("FBEditor.view.main.Main",Ext.container.Container,{id:"main",controller:"main",cls:"fb3",listeners:{resize:"onResize",drop:"onDrop",dragover:"onDragover",focusDetachPanels:"onFocusDetachPanels",checkWidthPanels:"onCheckWidthPanels",closedetachpanels:"onDetachPanel",closeapplication:"onCloseApplication",restoredetachpanel:"onRestoreDetachPanel"},layout:{type:"border"},panelConfig:{navigation:{xtype:"panel-main-navigation",width:"15%",region:"west",detachable:true,collapsible:true},props:{xtype:"panel-main-props",width:"15%",region:"east",detachable:true,collapsible:true}},windowPanels:{navigation:null,props:null},initComponent:function(){var a=this;if(!FBEditor.parentWindow){a.items=[{xtype:"panel-main-tools"},{xtype:"panel-main-content"}]}Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;if(!FBEditor.parentWindow){Ext.Object.each(a.windowPanels,function(b){if(!FBEditor.getLocalStorage().getItem(b)){a.add(a.panelConfig[b])}else{a.fireEvent("restoredetachpanel",b)}});a.getEl().on({drop:function(b){this.fireEvent("drop",b.event,this)},dragover:function(b){this.fireEvent("dragover",b.event,this)},scope:a})}Ext.container.Container.prototype.afterRender.apply(this,arguments)},createPanel:function(b){var g=this,e=FBEditor.getBridgeWindow(),d=FBEditor.getApplication(),i,f,h,c,a;c="panel-main-"+b;a=g.add({xtype:c,region:"center"});f=e.Ext.getCmp("form-desc");h=f.getBookName();i=a.title+" | "+h;d.setTitle(i)},attachPanel:function(a,c){var b=this,d;d="panel-main-"+a;if(!b.contains(Ext.getCmp(d))){FBEditor.childWindow[a]=null;b.add(b.panelConfig[a]);b.windowPanels[a]=null}},removeDetachedPanel:function(c){var b=this,a,d;a=c.name;b.windowPanels[a]=c;d="panel-main-"+a;if(b.contains(Ext.getCmp(d))){Ext.getCmp(d).close()}}},0,["main"],["component","box","container","main"],{component:true,box:true,container:true,main:true},["widget.main"],0,[FBEditor.view.main,"Main"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.xml.TreeController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(c,a){var b=this;FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);b.setFocusElement(a)},onOpenElement:function(d){var e=this,b=e.getView(),c=d.getManager(),a;b.openContent();a=c.getManagerXml();a.loadData(d);b.expandElement(d)},setFocusElement:function(c){var f=this,b=f.getView(),g=c.getData(),d=FBEditor.getEditorManager(),a,e;if(!b.isActivePanel()){Ext.defer(function(){f.setFocusElement(c)},200)}else{e=d.getElementById(g.elementId);a=d.getManagerXml();a.loadData(e)}}},0,0,0,0,["controller.panel.xml.navigation"],0,[FBEditor.view.panel.treenavigation.xml,"TreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.xml.TreeStore",Ext.data.TreeStore,{proxy:{type:"memory"},root:{icon:" ",cls:"treenavigation-root treenavigation-root-xml"},defaultRootText:"XML",rootVisible:true},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation.xml,"TreeStore"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.xml.Tree",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-xml-navigation",controller:"panel.xml.navigation",listeners:{openElement:"onOpenElement"},stateId:"panel-xml-navigation",stateful:true,useArrows:true,animate:false,selModel:{preventFocus:true},syncContentId:"main-xml",cmdName:"FBEditor.command.OpenXml",initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.treenavigation.xml.TreeStore");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a,c;a=FBEditor.getEditorManager();c=a.getContent();if(c){b.loadData(c)}FBEditor.view.panel.treenavigation.AbstractTree.prototype.afterRender.apply(this,arguments)},destroy:function(){var a=this;a.saveStateNodes();FBEditor.view.panel.treenavigation.AbstractTree.prototype.destroy.apply(this,arguments)},loadData:function(b){var a=this,c;a.saveStateNodes();c=a.getTreeData(b);a.store.loadData(c);a.getView().expand(a.store.first())},getTreeData:function(b){var d=this,c=d.store.getRoot().data,e,a;e=d.getTreeChildren(b);a=[{root:true,text:c.text,expandable:c.expandable,icon:c.icon,cls:c.cls,iconCls:c.iconCls,children:e.children,elementId:b.elementId}];return a},getTreeChildren:function(c,a){var d=this,e=null,b=FBEditor.getEditorManager();if(c.showedOnTree){if(c.children){a=a||"";c.xmlTreePath=a+"/"+c.elementId}e={};e.text=c.getNameTree();e.elementId=c.elementId;e.expanded=b.stateExpandedNodesTree[c.elementId]?true:false;e.icon=" ";e.cls="treenavigation-children treenavigation-children-xml";e.cls+=c.cls?" treenavigation-children-"+c.cls:"";Ext.Array.each(c.children,function(f){var g;if(f.showedOnTree){g=d.getTreeChildren(f,c.treePath);if(g){e.children=e.children||[];e.children.push(g)}}else{Ext.Array.each(f.children,function(h){g=d.getTreeChildren(h,c.treePath);if(g){e.children=e.children||[];e.children.push(g)}})}});e.leaf=!e.children}return e},saveStateNodes:function(c){var b=this,a=FBEditor.getEditorManager();c=c||b.store.getData().items[0].data.children;Ext.Array.each(c,function(d){if(d.expanded){a.stateExpandedNodesTree[d.elementId]=true}else{if(a.stateExpandedNodesTree[d.elementId]){delete a.stateExpandedNodesTree[d.elementId]}}if(d.children&&d.children.length){b.saveStateNodes(d.children)}})},expandElement:function(a){var b=this;if(Ext.isEmpty(a.xmlTreePath)&&a.parent){b.expandElement(a.parent);return}b.selectPath(a.xmlTreePath,"elementId")},selectRoot:function(){var b=this,a=b.getRootNode(),c;c="/"+a.id;b.selectPath(c)},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():FBEditor.view.panel.treenavigation.AbstractTree.prototype.getRootNode.call(this);return a}},0,["panel-xml-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-xml-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-xml-navigation":true},["widget.panel-xml-navigation"],0,[FBEditor.view.panel.treenavigation.xml,"Tree"],0));
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(a){a.URL=a.URL||a.webkitURL;if(a.Blob&&a.URL){try{new Blob();return}catch(d){}}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||(function(p){var g=function(z){return Object.prototype.toString.call(z).match(/^\[object\s(.*)\]$/)[1]},y=function m(){this.data=[]},w=function i(B,z,A){this.data=B;this.size=B.length;this.type=z;this.encoding=A},q=y.prototype,v=w.prototype,s=p.FileReaderSync,e=function(z){this.code=this[this.name=z]},r=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),u=r.length,l=p.URL||p.webkitURL||p,t=l.createObjectURL,f=l.revokeObjectURL,k=l,o=p.btoa,j=p.atob,h=p.ArrayBuffer,n=p.Uint8Array,x=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;w.fake=v.fake=true;while(u--){e.prototype[r[u]]=u+1}if(!l.createObjectURL){k=p.URL=function(A){var z=document.createElementNS("http://www.w3.org/1999/xhtml","a"),B;z.href=A;if(!("origin" in z)){if(z.protocol.toLowerCase()==="data:"){z.origin=null}else{B=A.match(x);z.origin=B&&B[1]}}return z}}k.createObjectURL=function(A){var B=A.type,z;if(B===null){B="application/octet-stream"}if(A instanceof w){z="data:"+B;if(A.encoding==="base64"){return z+";base64,"+A.data}else{if(A.encoding==="URI"){return z+","+decodeURIComponent(A.data)}}if(o){return z+";base64,"+o(A.data)}else{return z+","+encodeURIComponent(A.data)}}else{if(t){return t.call(l,A)}}};k.revokeObjectURL=function(z){if(z.substring(0,5)!=="data:"&&f){f.call(l,z)}};q.append=function(D){var F=this.data;if(n&&(D instanceof h||D instanceof n)){var E="",A=new n(D),B=0,C=A.length;for(;B<C;B++){E+=String.fromCharCode(A[B])}F.push(E)}else{if(g(D)==="Blob"||g(D)==="File"){if(s){var z=new s();F.push(z.readAsBinaryString(D))}else{throw new e("NOT_READABLE_ERR")}}else{if(D instanceof w){if(D.encoding==="base64"&&j){F.push(j(D.data))}else{if(D.encoding==="URI"){F.push(decodeURIComponent(D.data))}else{if(D.encoding==="raw"){F.push(D.data)}}}}else{if(typeof D!=="string"){D+=""}F.push(unescape(encodeURIComponent(D)))}}}};q.getBlob=function(z){if(!arguments.length){z=null}return new w(this.data.join(""),z,"raw")};q.toString=function(){return"[object BlobBuilder]"};v.slice=function(C,z,B){var A=arguments.length;if(A<3){B=null}return new w(this.data.slice(C,A>1?z:this.data.length),B,this.encoding)};v.toString=function(){return"[object Blob]"};v.close=function(){this.size=0;delete this.data};return y}(a));a.Blob=function(j,h){var l=h?(h.type||""):"";var g=new c();if(j){for(var k=0,e=j.length;k<e;k++){if(Uint8Array&&j[k] instanceof Uint8Array){g.append(j[k].buffer)}else{g.append(j[k])}}}var f=g.getBlob(l);if(!f.slice&&f.webkitSlice){f.slice=f.webkitSlice}return f};var b=Object.getPrototypeOf||function(e){return e.__proto__};a.Blob.prototype=b(new a.Blob())}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this));!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.clipboard=b():a.clipboard=b()}(this,function(){return function(t){function e(r){if(n[r]){return n[r].exports}var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){function r(t,e,n){m("listener called"),t.success=!0,e.forEach(function(e,r){n.clipboardData.setData(r,e),r===g&&n.clipboardData.getData(r)!=e&&(m("setting text/plain failed"),t.success=!1)}),n.preventDefault()}function o(t){var e=new T(),n=r.bind(this,e,t);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return e}function i(t,e){c(t);var n=o(e);return a(),n}function u(t){var e=document.createElement("div");e.textContent="temporary element",document.body.appendChild(e);var n=i(e,t);return document.body.removeChild(e),n}function s(t){m("copyTextUsingDOM");var e=document.createElement("div"),n=e;e.attachShadow&&(m("Using shadow DOM."),n=e.attachShadow({mode:"open"}));var r=document.createElement("span");r.innerText=t,n.appendChild(r),document.body.appendChild(e),c(r);var o=document.execCommand("copy");return a(),document.body.removeChild(e),o}function c(t){var e=document.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}function a(){document.getSelection().removeAllRanges()}function l(t){var e=new v.DT();return e.setData(g,t),e}function f(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function d(t){var e=t.getData(g);if(void 0!==e){return window.clipboardData.setData("Text",e)}throw"No `text/plain` value was specified."}function p(){return new h.Promise(function(t,e){var n=window.clipboardData.getData("Text");""===n?e(new Error("Empty clipboard or could not read plain text from clipboard")):t(n)})}Object.defineProperty(e,"__esModule",{value:!0});var h=n(1),v=n(5),m=function(t){},y=!0,w=function(){(console.warn||console.log).call(arguments)},b=w.bind(console,"[clipboard-polyfill]"),g="text/plain",_=function(){function t(){}return t.setDebugLog=function(t){m=t},t.suppressWarnings=function(){y=!1,v.suppressDTWarnings()},t.write=function(t){return y&&!t.getData(g)&&b("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),new h.Promise(function(e,n){if(f()){return void (d(t)?e():n(new Error("Copying failed, possibly because the user rejected it.")))}var r=o(t);if(r.success){return m("regular execCopy worked"),void e()}if(navigator.userAgent.indexOf("Edge")>-1){return m('UA "Edge" => assuming success'),void e()}if(r=i(document.body,t),r.success){return m("copyUsingTempSelection worked"),void e()}if(r=u(t),r.success){return m("copyUsingTempElem worked"),void e()}var c=t.getData(g);if(void 0!==c&&s(c)){return m("copyTextUsingDOM worked"),void e()}n(new Error("Copy command failed."))})},t.writeText=function(t){if(navigator.clipboard&&navigator.clipboard.writeText){return navigator.clipboard.writeText(t)}var e=new v.DT();return e.setData(g,t),this.write(e)},t.read=function(){return new h.Promise(function(t,e){if(f()){return void p().then(function(e){return t(l(e))},e)}e("Read is not supported in your browser.")})},t.readText=function(){return navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText():f()?p():new h.Promise(function(t,e){e("Read is not supported in your browser.")})},t.DT=v.DT,t}();e["default"]=_;var T=function(){function t(){this.success=!1}return t}();t.exports=_},function(t,e,n){(function(e,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.1
 */
!function(e,n){t.exports=n()}(0,function(){function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function o(t){return"function"==typeof t}function i(t){G=t}function u(t){H=t}function s(){return void 0!==B?function(){B(a)}:c()}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<z;t+=2){(0,Z[t])(Z[t+1]),Z[t]=void 0,Z[t+1]=void 0}z=0}function l(t,e){var n=arguments,r=this,o=new this.constructor(d);void 0===o[tt]&&P(o);var i=r._state;return i?function(){var t=n[i-1];H(function(){return j(i,o,t,r._result)})}():D(r,o,t,e),o}function f(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e){return t}var n=new e(d);return g(n,t),n}function d(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(t){return ot.error=t,ot}}function m(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function y(t,e,n){H(function(t){var r=!1,o=m(n,e,function(n){r||(r=!0,e!==n?g(t,n):T(t,n))},function(e){r||(r=!0,x(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,x(t,o))},t)}function w(t,e){e._state===nt?T(t,e._result):e._state===rt?x(t,e._result):D(e,void 0,function(e){return g(t,e)},function(e){return x(t,e)})}function b(t,e,n){e.constructor===t.constructor&&n===l&&e.constructor.resolve===f?w(t,e):n===ot?(x(t,ot.error),ot.error=null):void 0===n?T(t,e):o(n)?y(t,e,n):T(t,e)}function g(e,n){e===n?x(e,p()):t(n)?b(e,n,v(n)):T(e,n)}function _(t){t._onerror&&t._onerror(t._result),E(t)}function T(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&H(E,t))}function x(t,e){t._state===et&&(t._state=rt,t._result=e,H(_,t))}function D(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+nt]=n,o[i+rt]=r,0===i&&t._state&&H(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,u=0;u<e.length;u+=3){r=e[u],o=e[u+n],r?j(n,r,o,i):o(i)}t._subscribers.length=0}}function A(){this.error=null}function C(t,e){try{return t(e)}catch(t){return it.error=t,it}}function j(t,e,n,r){var i=o(n),u=void 0,s=void 0,c=void 0,a=void 0;if(i){if(u=C(n,r),u===it?(a=!0,s=u.error,u.error=null):c=!0,e===u){return void x(e,h())}}else{u=r,c=!0}e._state!==et||(i&&c?g(e,u):a?x(e,s):t===nt?T(e,u):t===rt&&x(e,u))}function O(t,e){try{e(function(e){g(t,e)},function(e){x(t,e)})}catch(e){x(t,e)}}function S(){return ut++}function P(t){t[tt]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function M(t,e){this._instanceConstructor=t,this.promise=new t(d),this.promise[tt]||P(this.promise),q(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&T(this.promise,this._result))):x(this.promise,k())}function k(){return new Error("Array Methods must be provided an Array")}function L(t){return new M(this,t).promise}function U(t){var e=this;return new e(q(t)?function(n,r){for(var o=t.length,i=0;i<o;i++){e.resolve(t[i]).then(n,r)}}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function R(t){var e=this,n=new e(d);return x(n,t),n}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(t){this[tt]=S(),this._result=this._state=void 0,this._subscribers=[],d!==t&&("function"!=typeof t&&W(),this instanceof N?O(this,t):F())}function Y(){var t=void 0;if(void 0!==r){t=r}else{if("undefined"!=typeof self){t=self}else{try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}}}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast){return}}t.Promise=N}var K=void 0;K=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var q=K,z=0,B=void 0,G=void 0,H=function(t,e){Z[z]=t,Z[z+1]=e,2===(z+=2)&&(G?G(a):$())},I="undefined"!=typeof window?window:void 0,J=I||{},Q=J.MutationObserver||J.WebKitMutationObserver,V="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1000),$=void 0;$=V?function(){return function(){return e.nextTick(a)}}():Q?function(){var t=0,e=new Q(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():X?function(){var t=new MessageChannel();return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}():void 0===I?function(){try{var t=n(4);return B=t.runOnLoop||t.runOnContext,s()}catch(t){return c()}}():c();var tt=Math.random().toString(36).substring(16),et=void 0,nt=1,rt=2,ot=new A(),it=new A(),ut=0;return M.prototype._enumerate=function(t){for(var e=0;this._state===et&&e<t.length;e++){this._eachEntry(t[e],e)}},M.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===f){var o=v(t);if(o===l&&t._state!==et){this._settledAt(t._state,e,t._result)}else{if("function"!=typeof o){this._remaining--,this._result[e]=t}else{if(n===N){var i=new n(d);b(i,t,o),this._willSettleAt(i,e)}else{this._willSettleAt(new n(function(e){return e(t)}),e)}}}}else{this._willSettleAt(r(t),e)}},M.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?x(r,n):this._result[e]=n),0===this._remaining&&T(r,this._result)},M.prototype._willSettleAt=function(t,e){var n=this;D(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},N.all=L,N.race=U,N.resolve=f,N.reject=R,N._setScheduler=i,N._setAsap=u,N._asap=H,N.prototype={constructor:N,then:l,"catch":function(t){return this.then(null,t)}},N.polyfill=Y,N.Promise=N,N})}).call(e,n(2),n(3))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout){return setTimeout(t,0)}if((l===n||!l)&&setTimeout){return l=setTimeout,setTimeout(t,0)}try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(f===clearTimeout){return clearTimeout(t)}if((f===r||!f)&&clearTimeout){return f=clearTimeout,clearTimeout(t)}try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function u(){v&&p&&(v=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!v){var t=o(u);v=!0;for(var e=h.length;e;){for(p=h,h=[];++m<e;){p&&p[m].run()}m=-1,e=h.length}p=null,v=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var l,f,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,h=[],v=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}}h.push(new c(t,e)),1!==h.length||v||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=a,d.addListener=a,d.once=a,d.off=a,d.removeListener=a,d.removeAllListeners=a,d.emit=a,d.prependListener=a,d.prependOnceListener=a,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){},function(t,e,n){function r(){s=!1}Object.defineProperty(e,"__esModule",{value:!0});var o=["text/plain","text/html"],i=function(){(console.warn||console.log).call(arguments)},u=i.bind(console,"[clipboard-polyfill]"),s=!0;e.suppressDTWarnings=r;var c=function(){function t(){this.m={}}return t.prototype.setData=function(t,e){s&&-1===o.indexOf(t)&&u("Unknown data type: "+t,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[t]=e},t.prototype.getData=function(t){return this.m[t]},t.prototype.forEach=function(t){for(var e in this.m){t(this.m[e],e)}},t}();e.DT=c}])});
/*!

JSZip v3.1.5 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.JSZip=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,i,f){var e=g("./utils");var j=g("./support");var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(o){var k=[];var w,u,s,v,t,r,p;var l=0,n=o.length,q=n;var m=e.getTypeOf(o)!=="string";while(l<o.length){q=n-l;if(!m){w=o.charCodeAt(l++);u=l<n?o.charCodeAt(l++):0;s=l<n?o.charCodeAt(l++):0}else{w=o[l++];u=l<n?o[l++]:0;s=l<n?o[l++]:0}v=w>>2;t=((w&3)<<4)|(u>>4);r=q>1?(((u&15)<<2)|(s>>6)):64;p=q>2?(s&63):64;k.push(h.charAt(v)+h.charAt(t)+h.charAt(r)+h.charAt(p))}return k.join("")};f.decode=function(n){var w,u,s;var v,t,r,p;var m=0,o=0;var k="data:";if(n.substr(0,k.length)===k){throw new Error("Invalid base64 input, it looks like a data url.")}n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");var q=n.length*3/4;if(n.charAt(n.length-1)===h.charAt(64)){q--}if(n.charAt(n.length-2)===h.charAt(64)){q--}if(q%1!==0){throw new Error("Invalid base64 input, bad content length.")}var l;if(j.uint8array){l=new Uint8Array(q|0)}else{l=new Array(q|0)}while(m<n.length){v=h.indexOf(n.charAt(m++));t=h.indexOf(n.charAt(m++));r=h.indexOf(n.charAt(m++));p=h.indexOf(n.charAt(m++));w=(v<<2)|(t>>4);u=((t&15)<<4)|(r>>2);s=((r&3)<<6)|p;l[o++]=w;if(r!==64){l[o++]=u}if(p!==64){l[o++]=s}}return l}},{"./support":30,"./utils":32}],2:[function(g,h,e){var k=g("./external");var j=g("./stream/DataWorker");var f=g("./stream/DataLengthProbe");var l=g("./stream/Crc32Probe");var f=g("./stream/DataLengthProbe");function i(q,n,o,m,p){this.compressedSize=q;this.uncompressedSize=n;this.crc32=o;this.compression=m;this.compressedContent=p}i.prototype={getContentWorker:function(){var n=new j(k.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length"));var m=this;n.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize){throw new Error("Bug : uncompressed data size mismatch")}});return n},getCompressedWorker:function(){return new j(k.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};i.createWorkerFrom=function(n,m,o){return n.pipe(new l()).pipe(new f("uncompressedSize")).pipe(m.compressWorker(o)).pipe(new f("compressedSize")).withStreamInfo("compression",m)};h.exports=i},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(f,g,e){var h=f("./stream/GenericWorker");e.STORE={magic:"\x00\x00",compressWorker:function(i){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}};e.DEFLATE=f("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(h,f,i){var m=h("./utils");function j(){var r,p=[];for(var q=0;q<256;q++){r=q;for(var o=0;o<8;o++){r=((r&1)?(3988292384^(r>>>1)):(r>>>1))}p[q]=r}return p}var e=j();function g(s,p,n,u){var r=e,o=u+n;s=s^(-1);for(var q=u;q<o;q++){s=(s>>>8)^r[(s^p[q])&255]}return(s^(-1))}function k(r,s,n,u){var q=e,o=u+n;r=r^(-1);for(var p=u;p<o;p++){r=(r>>>8)^q[(r^s.charCodeAt(p))&255]}return(r^(-1))}f.exports=function l(o,p){if(typeof o==="undefined"||!o.length){return 0}var n=m.getTypeOf(o)!=="string";if(n){return g(p|0,o,o.length,0)}else{return k(p|0,o,o.length,0)}}},{"./utils":32}],5:[function(f,g,e){e.base64=false;e.binary=false;e.dir=false;e.createFolders=true;e.date=null;e.compression=null;e.compressionOptions=null;e.comment=null;e.unixPermissions=null;e.dosPermissions=null},{}],6:[function(f,g,e){var h=null;if(typeof Promise!=="undefined"){h=Promise}else{h=f("lie")}g.exports={Promise:h}},{lie:58}],7:[function(g,f,j){var k=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Uint32Array!=="undefined");var l=g("pako");var m=g("./utils");var e=g("./stream/GenericWorker");var i=k?"uint8array":"array";j.magic="\b\x00";function h(o,n){e.call(this,"FlateWorker/"+o);this._pako=null;this._pakoAction=o;this._pakoOptions=n;this.meta={}}m.inherits(h,e);h.prototype.processChunk=function(n){this.meta=n.meta;if(this._pako===null){this._createPako()}this._pako.push(m.transformTo(i,n.data),false)};h.prototype.flush=function(){e.prototype.flush.call(this);if(this._pako===null){this._createPako()}this._pako.push([],true)};h.prototype.cleanUp=function(){e.prototype.cleanUp.call(this);this._pako=null};h.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:true,level:this._pakoOptions.level||-1});var n=this;this._pako.onData=function(o){n.push({data:o,meta:n.meta})}};j.compressWorker=function(n){return new h("Deflate",n)};j.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:59}],8:[function(i,f,n){var r=i("../utils");var e=i("../stream/GenericWorker");var q=i("../utf8");var h=i("../crc32");var g=i("../signature");var k=function(w,t){var v="",u;for(u=0;u<t;u++){v+=String.fromCharCode(w&255);w=w>>>8}return v};var m=function(u,v){var t=u;if(!u){t=v?16893:33204}return(t&65535)<<16};var l=function(t,u){return(t||0)&63};var j=function(C,v,B,z,V,D){var P=C.file,T=C.compression,H=D!==q.utf8encode,Q=r.transformTo("string",D(P.name)),t=r.transformTo("string",q.utf8encode(P.name)),u=P.comment,F=r.transformTo("string",D(u)),y=r.transformTo("string",q.utf8encode(u)),U=t.length!==P.name.length,R=y.length!==u.length,w,L,E="",S="",x="",G=P.dir,O=P.date;var A={crc32:0,compressedSize:0,uncompressedSize:0};if(!v||B){A.crc32=C.crc32;A.compressedSize=C.compressedSize;A.uncompressedSize=C.uncompressedSize}var N=0;if(v){N|=8}if(!H&&(U||R)){N|=2048}var W=0;var M=0;if(G){W|=16}if(V==="UNIX"){M=798;W|=m(P.unixPermissions,G)}else{M=20;W|=l(P.dosPermissions,G)}w=O.getUTCHours();w=w<<6;w=w|O.getUTCMinutes();w=w<<5;w=w|O.getUTCSeconds()/2;L=O.getUTCFullYear()-1980;L=L<<4;L=L|(O.getUTCMonth()+1);L=L<<5;L=L|O.getUTCDate();if(U){S=k(1,1)+k(h(Q),4)+t;E+="up"+k(S.length,2)+S}if(R){x=k(1,1)+k(h(F),4)+y;E+="uc"+k(x.length,2)+x}var K="";K+="\n\x00";K+=k(N,2);K+=T.magic;K+=k(w,2);K+=k(L,2);K+=k(A.crc32,4);K+=k(A.compressedSize,4);K+=k(A.uncompressedSize,4);K+=k(Q.length,2);K+=k(E.length,2);var J=g.LOCAL_FILE_HEADER+K+Q+E;var I=g.CENTRAL_FILE_HEADER+k(M,2)+K+k(F.length,2)+"\x00\x00\x00\x00"+k(W,4)+k(z,4)+Q+E+F;return{fileRecord:J,dirRecord:I}};var o=function(x,y,v,z,w){var u="";var t=r.transformTo("string",w(z));u=g.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+k(x,2)+k(x,2)+k(y,4)+k(v,4)+k(t.length,2)+t;return u};var s=function(t){var u="";u=g.DATA_DESCRIPTOR+k(t.crc32,4)+k(t.compressedSize,4)+k(t.uncompressedSize,4);return u};function p(u,w,t,v){e.call(this,"ZipFileWorker");this.bytesWritten=0;this.zipComment=w;this.zipPlatform=t;this.encodeFileName=v;this.streamFiles=u;this.accumulate=false;this.contentBuffer=[];this.dirRecords=[];this.currentSourceOffset=0;this.entriesCount=0;this.currentFile=null;this._sources=[]}r.inherits(p,e);p.prototype.push=function(u){var t=u.meta.percent||0;var w=this.entriesCount;var v=this._sources.length;if(this.accumulate){this.contentBuffer.push(u)}else{this.bytesWritten+=u.data.length;e.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:w?(t+100*(w-v-1))/w:100}})}};p.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten;this.currentFile=v.file.name;var u=this.streamFiles&&!v.file.dir;if(u){var t=j(v,u,false,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else{this.accumulate=true}};p.prototype.closedSource=function(v){this.accumulate=false;var u=this.streamFiles&&!v.file.dir;var t=j(v,u,true,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.dirRecords.push(t.dirRecord);if(u){this.push({data:s(v),meta:{percent:100}})}else{this.push({data:t.fileRecord,meta:{percent:0}});while(this.contentBuffer.length){this.push(this.contentBuffer.shift())}}this.currentFile=null};p.prototype.flush=function(){var v=this.bytesWritten;for(var u=0;u<this.dirRecords.length;u++){this.push({data:this.dirRecords[u],meta:{percent:100}})}var w=this.bytesWritten-v;var t=o(this.dirRecords.length,w,v,this.zipComment,this.encodeFileName);this.push({data:t,meta:{percent:100}})};p.prototype.prepareNextSource=function(){this.previous=this._sources.shift();this.openedSource(this.previous.streamInfo);if(this.isPaused){this.previous.pause()}else{this.previous.resume()}};p.prototype.registerPrevious=function(u){this._sources.push(u);var t=this;u.on("data",function(v){t.processChunk(v)});u.on("end",function(){t.closedSource(t.previous.streamInfo);if(t._sources.length){t.prepareNextSource()}else{t.end()}});u.on("error",function(v){t.error(v)});return this};p.prototype.resume=function(){if(!e.prototype.resume.call(this)){return false}if(!this.previous&&this._sources.length){this.prepareNextSource();return true}if(!this.previous&&!this._sources.length&&!this.generatedError){this.end();return true}};p.prototype.error=function(v){var t=this._sources;if(!e.prototype.error.call(this,v)){return false}for(var u=0;u<t.length;u++){try{t[u].error(v)}catch(v){}}return true};p.prototype.lock=function(){e.prototype.lock.call(this);var t=this._sources;for(var u=0;u<t.length;u++){t[u].lock()}};f.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(g,h,e){var i=g("../compressions");var j=g("./ZipFileWorker");var f=function(m,l){var n=m||l;var k=i[n];if(!k){throw new Error(n+" is not a valid compression method !")}return k};e.generateWorker=function(m,k,p){var l=new j(k.streamFiles,p,k.platform,k.encodeFileName);var o=0;try{m.forEach(function(r,u){o++;var q=f(u.options.compression,k.compression);var v=u.options.compressionOptions||k.compressionOptions||{};var t=u.dir,s=u.date;u._compressWorker(q,v).withStreamInfo("file",{name:r,dir:t,date:s,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(l)});l.entriesCount=o}catch(n){l.error(n)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(f,g,e){function h(){if(!(this instanceof h)){return new h()}if(arguments.length){throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.")}this.files={};this.comment=null;this.root="";this.clone=function(){var j=new h();for(var k in this){if(typeof this[k]!=="function"){j[k]=this[k]}}return j}}h.prototype=f("./object");h.prototype.loadAsync=f("./load");h.support=f("./support");h.defaults=f("./defaults");h.version="3.1.5";h.loadAsync=function(j,i){return new h().loadAsync(j,i)};h.external=f("./external");g.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,g,j){var n=i("./utils");var l=i("./external");var m=i("./utf8");var n=i("./utils");var k=i("./zipEntries");var e=i("./stream/Crc32Probe");var h=i("./nodejsUtils");function f(o){return new l.Promise(function(q,p){var r=o.decompressed.getContentWorker().pipe(new e());r.on("error",function(s){p(s)}).on("end",function(){if(r.streamInfo.crc32!==o.decompressed.crc32){p(new Error("Corrupted zip : CRC32 mismatch"))}else{q()}}).resume()})}g.exports=function(r,o){var p=this;o=n.extend(o||{},{base64:false,checkCRC32:false,optimizedBinaryString:false,createFolders:false,decodeFileName:m.utf8decode});if(h.isNode&&h.isStream(r)){return l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file."))}return n.prepareContent("the loaded zip file",r,true,o.optimizedBinaryString,o.base64).then(function(u){var t=new k(o);t.load(u);return t}).then(function s(v){var u=[l.Promise.resolve(v)];var w=v.files;if(o.checkCRC32){for(var t=0;t<w.length;t++){u.push(f(w[t]))}}return l.Promise.all(u)}).then(function q(v){var w=v.shift();var x=w.files;for(var u=0;u<x.length;u++){var t=x[u];p.file(t.fileNameStr,t.decompressed,{binary:true,optimizedBinaryString:true,date:t.date,dir:t.dir,comment:t.fileCommentStr.length?t.fileCommentStr:null,unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions,createFolders:o.createFolders})}if(w.zipComment.length){p.comment=w.zipComment}return p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(g,h,f){var e=g("../utils");var i=g("../stream/GenericWorker");function j(k,l){i.call(this,"Nodejs stream input adapter for "+k);this._upstreamEnded=false;this._bindStream(l)}e.inherits(j,i);j.prototype._bindStream=function(l){var k=this;this._stream=l;l.pause();l.on("data",function(m){k.push({data:m,meta:{percent:0}})}).on("error",function(m){if(k.isPaused){this.generatedError=m}else{k.error(m)}}).on("end",function(){if(k.isPaused){k._upstreamEnded=true}else{k.end()}})};j.prototype.pause=function(){if(!i.prototype.pause.call(this)){return false}this._stream.pause();return true};j.prototype.resume=function(){if(!i.prototype.resume.call(this)){return false}if(this._upstreamEnded){this.end()}else{this._stream.resume()}return true};h.exports=j},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,j,g){var h=i("readable-stream").Readable;var f=i("../utils");f.inherits(e,h);function e(n,l,m){h.call(this,l);this._helper=n;var k=this;n.on("data",function(o,p){if(!k.push(o)){k._helper.pause()}if(m){m(p)}}).on("error",function(o){k.emit("error",o)}).on("end",function(){k.push(null)})}e.prototype._read=function(){this._helper.resume()};j.exports=e},{"../utils":32,"readable-stream":16}],14:[function(f,g,e){g.exports={isNode:typeof Buffer!=="undefined",newBufferFrom:function(i,h){return new Buffer(i,h)},allocBuffer:function(h){if(Buffer.alloc){return Buffer.alloc(h)}else{return new Buffer(h)}},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on==="function"&&typeof h.pause==="function"&&typeof h.resume==="function"}}},{}],15:[function(i,e,w){var f=i("./utf8");var t=i("./utils");var v=i("./stream/GenericWorker");var n=i("./stream/StreamHelper");var l=i("./defaults");var g=i("./compressedObject");var k=i("./zipObject");var o=i("./generate");var m=i("./nodejsUtils");var j=i("./nodejs/NodejsStreamInputAdapter");var r=function(x,C,E){var F=t.getTypeOf(C),G;var y=t.extend(E||{},l);y.date=y.date||new Date();if(y.compression!==null){y.compression=y.compression.toUpperCase()}if(typeof y.unixPermissions==="string"){y.unixPermissions=parseInt(y.unixPermissions,8)}if(y.unixPermissions&&(y.unixPermissions&16384)){y.dir=true}if(y.dosPermissions&&(y.dosPermissions&16)){y.dir=true}if(y.dir){x=h(x)}if(y.createFolders&&(G=s(x))){u.call(this,G,true)}var z=F==="string"&&y.binary===false&&y.base64===false;if(!E||typeof E.binary==="undefined"){y.binary=!z}var D=(C instanceof g)&&C.uncompressedSize===0;if(D||y.dir||!C||C.length===0){y.base64=false;y.binary=true;C="";y.compression="STORE";F="string"}var A=null;if(C instanceof g||C instanceof v){A=C}else{if(m.isNode&&m.isStream(C)){A=new j(x,C)}else{A=t.prepareContent(x,C,y.binary,y.optimizedBinaryString,y.base64)}}var B=new k(x,A,y);this.files[x]=B};var s=function(y){if(y.slice(-1)==="/"){y=y.substring(0,y.length-1)}var x=y.lastIndexOf("/");return(x>0)?y.substring(0,x):""};var h=function(x){if(x.slice(-1)!=="/"){x+="/"}return x};var u=function(x,y){y=(typeof y!=="undefined")?y:l.createFolders;x=h(x);if(!this.files[x]){r.call(this,x,null,{dir:true,createFolders:y})}return this.files[x]};function q(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var p={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var z,y,A;for(z in this.files){if(!this.files.hasOwnProperty(z)){continue}A=this.files[z];y=z.slice(this.root.length,z.length);if(y&&z.slice(0,this.root.length)===this.root){x(y,A)}}},filter:function(y){var x=[];this.forEach(function(z,A){if(y(z,A)){x.push(A)}});return x},file:function(x,z,B){if(arguments.length===1){if(q(x)){var y=x;return this.filter(function(C,D){return !D.dir&&y.test(C)})}else{var A=this.files[this.root+x];if(A&&!A.dir){return A}else{return null}}}else{x=this.root+x;r.call(this,x,z,B)}return this},folder:function(x){if(!x){return this}if(q(x)){return this.filter(function(B,C){return C.dir&&x.test(B)})}var z=this.root+x;var A=u.call(this,z);var y=this.clone();y.root=A.name;return y},remove:function(y){y=this.root+y;var A=this.files[y];if(!A){if(y.slice(-1)!=="/"){y+="/"}A=this.files[y]}if(A&&!A.dir){delete this.files[y]}else{var x=this.filter(function(B,C){return C.name.slice(0,y.length)===y});for(var z=0;z<x.length;z++){delete this.files[x[z].name]}}return this},generate:function(x){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var A,y={};try{y=t.extend(x||{},{streamFiles:false,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode});y.type=y.type.toLowerCase();y.compression=y.compression.toUpperCase();if(y.type==="binarystring"){y.type="string"}if(!y.type){throw new Error("No output type specified.")}t.checkSupport(y.type);if(y.platform==="darwin"||y.platform==="freebsd"||y.platform==="linux"||y.platform==="sunos"){y.platform="UNIX"}if(y.platform==="win32"){y.platform="DOS"}var B=y.comment||this.comment||"";A=o.generateWorker(this,y,B)}catch(z){A=new v("error");A.error(z)}return new n(A,y.type||"string",y.mimeType)},generateAsync:function(y,x){return this.generateInternalStream(y).accumulate(x)},generateNodeStream:function(y,x){y=y||{};if(!y.type){y.type="nodebuffer"}return this.generateInternalStream(y).toNodejsStream(x)}};e.exports=p},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(f,g,e){g.exports=f("stream")},{stream:undefined}],17:[function(g,h,f){var j=g("./DataReader");var e=g("../utils");function i(l){j.call(this,l);for(var k=0;k<this.data.length;k++){l[k]=l[k]&255}}e.inherits(i,j);i.prototype.byteAt=function(k){return this.data[this.zero+k]};i.prototype.lastIndexOfSignature=function(p){var o=p.charCodeAt(0),n=p.charCodeAt(1),m=p.charCodeAt(2),l=p.charCodeAt(3);for(var k=this.length-4;k>=0;--k){if(this.data[k]===o&&this.data[k+1]===n&&this.data[k+2]===m&&this.data[k+3]===l){return k-this.zero}}return -1};i.prototype.readAndCheckSignature=function(p){var o=p.charCodeAt(0),n=p.charCodeAt(1),l=p.charCodeAt(2),k=p.charCodeAt(3),m=this.readData(4);return o===m[0]&&n===m[1]&&l===m[2]&&k===m[3]};i.prototype.readData=function(l){this.checkOffset(l);if(l===0){return[]}var k=this.data.slice(this.zero+this.index,this.zero+this.index+l);this.index+=l;return k};h.exports=i},{"../utils":32,"./DataReader":18}],18:[function(g,h,f){var e=g("../utils");function i(j){this.data=j;this.length=j.length;this.index=0;this.zero=0}i.prototype={checkOffset:function(j){this.checkIndex(this.index+j)},checkIndex:function(j){if(this.length<this.zero+j||j<0){throw new Error("End of data reached (data length = "+this.length+", asked index = "+(j)+"). Corrupted zip ?")}},setIndex:function(j){this.checkIndex(j);this.index=j},skip:function(j){this.setIndex(this.index+j)},byteAt:function(j){},readInt:function(l){var j=0,k;this.checkOffset(l);for(k=this.index+l-1;k>=this.index;k--){j=(j<<8)+this.byteAt(k)}this.index+=l;return j},readString:function(j){return e.transformTo("string",this.readData(j))},readData:function(j){},lastIndexOfSignature:function(j){},readAndCheckSignature:function(j){},readDate:function(){var j=this.readInt(4);return new Date(Date.UTC(((j>>25)&127)+1980,((j>>21)&15)-1,(j>>16)&31,(j>>11)&31,(j>>5)&63,(j&31)<<1))}};h.exports=i},{"../utils":32}],19:[function(h,i,g){var f=h("./Uint8ArrayReader");var e=h("../utils");function j(k){f.call(this,k)}e.inherits(j,f);j.prototype.readData=function(l){this.checkOffset(l);var k=this.data.slice(this.zero+this.index,this.zero+this.index+l);this.index+=l;return k};i.exports=j},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(g,h,f){var j=g("./DataReader");var e=g("../utils");function i(k){j.call(this,k)}e.inherits(i,j);i.prototype.byteAt=function(k){return this.data.charCodeAt(this.zero+k)};i.prototype.lastIndexOfSignature=function(k){return this.data.lastIndexOf(k)-this.zero};i.prototype.readAndCheckSignature=function(l){var k=this.readData(4);return l===k};i.prototype.readData=function(l){this.checkOffset(l);var k=this.data.slice(this.zero+this.index,this.zero+this.index+l);this.index+=l;return k};h.exports=i},{"../utils":32,"./DataReader":18}],21:[function(h,i,g){var j=h("./ArrayReader");var e=h("../utils");function f(k){j.call(this,k)}e.inherits(f,j);f.prototype.readData=function(l){this.checkOffset(l);if(l===0){return new Uint8Array(0)}var k=this.data.subarray(this.zero+this.index,this.zero+this.index+l);this.index+=l;return k};i.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(h,g,j){var l=h("../utils");var m=h("../support");var f=h("./ArrayReader");var i=h("./StringReader");var e=h("./NodeBufferReader");var k=h("./Uint8ArrayReader");g.exports=function(o){var n=l.getTypeOf(o);l.checkSupport(n);if(n==="string"&&!m.uint8array){return new i(o)}if(n==="nodebuffer"){return new e(o)}if(m.uint8array){return new k(l.transformTo("uint8array",o))}return new f(l.transformTo("array",o))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(f,g,e){e.LOCAL_FILE_HEADER="PK\x03\x04";e.CENTRAL_FILE_HEADER="PK\x01\x02";e.CENTRAL_DIRECTORY_END="PK\x05\x06";e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07";e.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06";e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(g,h,f){var i=g("./GenericWorker");var e=g("../utils");function j(k){i.call(this,"ConvertWorker to "+k);this.destType=k}e.inherits(j,i);j.prototype.processChunk=function(k){this.push({data:e.transformTo(this.destType,k.data),meta:k.meta})};h.exports=j},{"../utils":32,"./GenericWorker":28}],25:[function(g,h,f){var i=g("./GenericWorker");var j=g("../crc32");var e=g("../utils");function k(){i.call(this,"Crc32Probe");this.withStreamInfo("crc32",0)}e.inherits(k,i);k.prototype.processChunk=function(l){this.streamInfo.crc32=j(l.data,this.streamInfo.crc32||0);this.push(l)};h.exports=k},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(h,i,f){var e=h("../utils");var j=h("./GenericWorker");function g(k){j.call(this,"DataLengthProbe for "+k);this.propName=k;this.withStreamInfo(k,0)}e.inherits(g,j);g.prototype.processChunk=function(k){if(k){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+k.data.length}j.prototype.processChunk.call(this,k)};i.exports=g},{"../utils":32,"./GenericWorker":28}],27:[function(g,h,f){var e=g("../utils");var i=g("./GenericWorker");var k=16*1024;function j(m){i.call(this,"DataWorker");var l=this;this.dataIsReady=false;this.index=0;this.max=0;this.data=null;this.type="";this._tickScheduled=false;m.then(function(n){l.dataIsReady=true;l.data=n;l.max=n&&n.length||0;l.type=e.getTypeOf(n);if(!l.isPaused){l._tickAndRepeat()}},function(n){l.error(n)})}e.inherits(j,i);j.prototype.cleanUp=function(){i.prototype.cleanUp.call(this);this.data=null};j.prototype.resume=function(){if(!i.prototype.resume.call(this)){return false}if(!this._tickScheduled&&this.dataIsReady){this._tickScheduled=true;e.delay(this._tickAndRepeat,[],this)}return true};j.prototype._tickAndRepeat=function(){this._tickScheduled=false;if(this.isPaused||this.isFinished){return}this._tick();if(!this.isFinished){e.delay(this._tickAndRepeat,[],this);this._tickScheduled=true}};j.prototype._tick=function(){if(this.isPaused||this.isFinished){return false}var m=k;var n=null,l=Math.min(this.max,this.index+m);if(this.index>=this.max){return this.end()}else{switch(this.type){case"string":n=this.data.substring(this.index,l);break;case"uint8array":n=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":n=this.data.slice(this.index,l);break}this.index=l;return this.push({data:n,meta:{percent:this.max?this.index/this.max*100:0}})}};h.exports=j},{"../utils":32,"./GenericWorker":28}],28:[function(f,g,e){function h(i){this.name=i||"default";this.streamInfo={};this.generatedError=null;this.extraStreamInfo={};this.isPaused=true;this.isFinished=false;this.isLocked=false;this._listeners={data:[],end:[],error:[]};this.previous=null}h.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished){return false}this.flush();try{this.emit("end");this.cleanUp();this.isFinished=true}catch(i){this.emit("error",i)}return true},error:function(i){if(this.isFinished){return false}if(this.isPaused){this.generatedError=i}else{this.isFinished=true;this.emit("error",i);if(this.previous){this.previous.error(i)}this.cleanUp()}return true},on:function(i,j){this._listeners[i].push(j);return this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null;this._listeners=[]},emit:function(k,j){if(this._listeners[k]){for(var l=0;l<this._listeners[k].length;l++){this._listeners[k][l].call(this,j)}}},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(j){if(this.isLocked){throw new Error("The stream '"+this+"' has already been used.")}this.streamInfo=j.streamInfo;this.mergeStreamInfo();this.previous=j;var i=this;j.on("data",function(k){i.processChunk(k)});j.on("end",function(){i.end()});j.on("error",function(k){i.error(k)});return this},pause:function(){if(this.isPaused||this.isFinished){return false}this.isPaused=true;if(this.previous){this.previous.pause()}return true},resume:function(){if(!this.isPaused||this.isFinished){return false}this.isPaused=false;var i=false;if(this.generatedError){this.error(this.generatedError);i=true}if(this.previous){this.previous.resume()}return !i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,j){this.extraStreamInfo[i]=j;this.mergeStreamInfo();return this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo){if(!this.extraStreamInfo.hasOwnProperty(i)){continue}this.streamInfo[i]=this.extraStreamInfo[i]}},lock:function(){if(this.isLocked){throw new Error("The stream '"+this+"' has already been used.")}this.isLocked=true;if(this.previous){this.previous.lock()}},toString:function(){var i="Worker "+this.name;if(this.previous){return this.previous+" -> "+i}else{return i}}};g.exports=h},{}],29:[function(j,h,k){var q=j("../utils");var i=j("./ConvertWorker");var g=j("./GenericWorker");var l=j("../base64");var r=j("../support");var n=j("../external");var t=null;if(r.nodestream){try{t=j("../nodejs/NodejsStreamOutputAdapter")}catch(m){}}function f(e,u,v){switch(e){case"blob":return q.newBlob(q.transformTo("arraybuffer",u),v);case"base64":return l.encode(u);default:return q.transformTo(e,u)}}function p(x,e){var w,u=0,v=null,y=0;for(w=0;w<e.length;w++){y+=e[w].length}switch(x){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":v=new Uint8Array(y);for(w=0;w<e.length;w++){v.set(e[w],u);u+=e[w].length}return v;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+x+"'")}}function s(e,u){return new n.Promise(function(z,y){var w=[];var v=e._internalType,x=e._outputType,A=e._mimeType;e.on("data",function(B,C){w.push(B);if(u){u(C)}}).on("error",function(B){w=[];y(B)}).on("end",function(){try{var B=f(x,p(v,w),A);z(B)}catch(C){y(C)}w=[]}).resume()})}function o(y,x,w){var u=x;switch(x){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string";break}try{this._internalType=u;this._outputType=x;this._mimeType=w;q.checkSupport(u);this._worker=y.pipe(new i(u));y.lock()}catch(v){this._worker=new g("error");this._worker.error(v)}}o.prototype={accumulate:function(e){return s(this,e)},on:function(e,v){var u=this;if(e==="data"){this._worker.on(e,function(w){v.call(u,w.data,w.meta)})}else{this._worker.on(e,function(){q.delay(v,arguments,u)})}return this},resume:function(){q.delay(this._worker.resume,[],this._worker);return this},pause:function(){this._worker.pause();return this},toNodejsStream:function(e){q.checkSupport("nodestream");if(this._outputType!=="nodebuffer"){throw new Error(this._outputType+" is not supported by this method")}return new t(this,{objectMode:this._outputType!=="nodebuffer"},e)}};h.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,j,h){h.base64=true;h.array=true;h.string=true;h.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";h.nodebuffer=typeof Buffer!=="undefined";h.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined"){h.blob=false}else{var f=new ArrayBuffer(0);try{h.blob=new Blob([f],{type:"application/zip"}).size===0}catch(k){try{var l=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;var g=new l();g.append(f);h.blob=g.getBlob("application/zip").size===0}catch(k){h.blob=false}}}try{h.nodestream=!!i("readable-stream").Readable}catch(k){h.nodestream=false}},{"readable-stream":16}],31:[function(m,f,n){var r=m("./utils");var s=m("./support");var k=m("./nodejsUtils");var e=m("./stream/GenericWorker");var j=new Array(256);for(var o=0;o<256;o++){j[o]=(o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1)}j[254]=j[254]=1;var u=function(B){var v,C,x,y,w,A=B.length,z=0;for(y=0;y<A;y++){C=B.charCodeAt(y);if((C&64512)===55296&&(y+1<A)){x=B.charCodeAt(y+1);if((x&64512)===56320){C=65536+((C-55296)<<10)+(x-56320);y++}}z+=C<128?1:C<2048?2:C<65536?3:4}if(s.uint8array){v=new Uint8Array(z)}else{v=new Array(z)}for(w=0,y=0;w<z;y++){C=B.charCodeAt(y);if((C&64512)===55296&&(y+1<A)){x=B.charCodeAt(y+1);if((x&64512)===56320){C=65536+((C-55296)<<10)+(x-56320);y++}}if(C<128){v[w++]=C}else{if(C<2048){v[w++]=192|(C>>>6);v[w++]=128|(C&63)}else{if(C<65536){v[w++]=224|(C>>>12);v[w++]=128|(C>>>6&63);v[w++]=128|(C&63)}else{v[w++]=240|(C>>>18);v[w++]=128|(C>>>12&63);v[w++]=128|(C>>>6&63);v[w++]=128|(C&63)}}}}return v};var p=function(v,i){var w;i=i||v.length;if(i>v.length){i=v.length}w=i-1;while(w>=0&&(v[w]&192)===128){w--}if(w<0){return i}if(w===0){return i}return(w+j[v[w]]>i)?w:i};var h=function(z){var B,A,y,C,x;var w=z.length;var v=new Array(w*2);for(y=0,A=0;A<w;){C=z[A++];if(C<128){v[y++]=C;continue}x=j[C];if(x>4){v[y++]=65533;A+=x-1;continue}C&=x===2?31:x===3?15:7;while(x>1&&A<w){C=(C<<6)|(z[A++]&63);x--}if(x>1){v[y++]=65533;continue}if(C<65536){v[y++]=C}else{C-=65536;v[y++]=55296|((C>>10)&1023);v[y++]=56320|(C&1023)}}if(v.length!==y){if(v.subarray){v=v.subarray(0,y)}else{v.length=y}}return r.applyFromCharCode(v)};n.utf8encode=function q(i){if(s.nodebuffer){return k.newBufferFrom(i,"utf-8")}return u(i)};n.utf8decode=function g(i){if(s.nodebuffer){return r.transformTo("nodebuffer",i).toString("utf-8")}i=r.transformTo(s.uint8array?"uint8array":"array",i);return h(i)};function l(){e.call(this,"utf-8 decode");this.leftOver=null}r.inherits(l,e);l.prototype.processChunk=function(w){var y=r.transformTo(s.uint8array?"uint8array":"array",w.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var i=y;y=new Uint8Array(i.length+this.leftOver.length);y.set(this.leftOver,0);y.set(i,this.leftOver.length)}else{y=this.leftOver.concat(y)}this.leftOver=null}var x=p(y);var v=y;if(x!==y.length){if(s.uint8array){v=y.subarray(0,x);this.leftOver=y.subarray(x,y.length)}else{v=y.slice(0,x);this.leftOver=y.slice(x,y.length)}}this.push({data:n.utf8decode(v),meta:w.meta})};l.prototype.flush=function(){if(this.leftOver&&this.leftOver.length){this.push({data:n.utf8decode(this.leftOver),meta:{}});this.leftOver=null}};n.Utf8DecodeWorker=l;function t(){e.call(this,"utf-8 encode")}r.inherits(t,e);t.prototype.processChunk=function(i){this.push({data:n.utf8encode(i.data),meta:i.meta})};n.Utf8EncodeWorker=t},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,f,j){var q=i("./support");var n=i("./base64");var h=i("./nodejsUtils");var k=i("core-js/library/fn/set-immediate");var o=i("./external");function m(u){var t=null;if(q.uint8array){t=new Uint8Array(u.length)}else{t=new Array(u.length)}return s(u,t)}j.newBlob=function(u,v){j.checkSupport("blob");try{return new Blob([u],{type:v})}catch(w){try{var x=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;var t=new x();t.append(u);return t.getBlob(v)}catch(w){throw new Error("Bug : can't construct the Blob.")}}};function p(t){return t}function s(u,v){for(var t=0;t<u.length;++t){v[t]=u.charCodeAt(t)&255}return v}var e={stringifyByChunk:function(y,x,w){var u=[],v=0,t=y.length;if(t<=w){return String.fromCharCode.apply(null,y)}while(v<t){if(x==="array"||x==="nodebuffer"){u.push(String.fromCharCode.apply(null,y.slice(v,Math.min(v+w,t))))}else{u.push(String.fromCharCode.apply(null,y.subarray(v,Math.min(v+w,t))))}v+=w}return u.join("")},stringifyByChar:function(v){var u="";for(var t=0;t<v.length;t++){u+=String.fromCharCode(v[t])}return u},applyCanBeUsed:{uint8array:(function(){try{return q.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(t){return false}})(),nodebuffer:(function(){try{return q.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch(t){return false}})()}};function r(x){var t=65536,u=j.getTypeOf(x),v=true;if(u==="uint8array"){v=e.applyCanBeUsed.uint8array}else{if(u==="nodebuffer"){v=e.applyCanBeUsed.nodebuffer}}if(v){while(t>1){try{return e.stringifyByChunk(x,u,t)}catch(w){t=Math.floor(t/2)}}}return e.stringifyByChar(x)}j.applyFromCharCode=r;function l(u,v){for(var t=0;t<u.length;t++){v[t]=u[t]}return v}var g={};g.string={string:p,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return g.string["uint8array"](t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:function(t){return s(t,h.allocBuffer(t.length))}};g.array={string:r,array:p,arraybuffer:function(t){return(new Uint8Array(t)).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return h.newBufferFrom(t)}};g.arraybuffer={string:function(t){return r(new Uint8Array(t))},array:function(t){return l(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:p,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return h.newBufferFrom(new Uint8Array(t))}};g.uint8array={string:r,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:p,nodebuffer:function(t){return h.newBufferFrom(t)}};g.nodebuffer={string:r,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return g.nodebuffer["uint8array"](t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:p};j.transformTo=function(w,u){if(!u){u=""}if(!w){return u}j.checkSupport(w);var v=j.getTypeOf(u);var t=g[v][w](u);return t};j.getTypeOf=function(t){if(typeof t==="string"){return"string"}if(Object.prototype.toString.call(t)==="[object Array]"){return"array"}if(q.nodebuffer&&h.isBuffer(t)){return"nodebuffer"}if(q.uint8array&&t instanceof Uint8Array){return"uint8array"}if(q.arraybuffer&&t instanceof ArrayBuffer){return"arraybuffer"}};j.checkSupport=function(u){var t=q[u.toLowerCase()];if(!t){throw new Error(u+" is not supported by this platform")}};j.MAX_VALUE_16BITS=65535;j.MAX_VALUE_32BITS=-1;j.pretty=function(w){var u="",v,t;for(t=0;t<(w||"").length;t++){v=w.charCodeAt(t);u+="\\x"+(v<16?"0":"")+v.toString(16).toUpperCase()}return u};j.delay=function(v,u,t){k(function(){v.apply(t||null,u||[])})};j.inherits=function(v,t){var u=function(){};u.prototype=t.prototype;v.prototype=new u()};j.extend=function(){var u={},v,t;for(v=0;v<arguments.length;v++){for(t in arguments[v]){if(arguments[v].hasOwnProperty(t)&&typeof u[t]==="undefined"){u[t]=arguments[v][t]}}}return u};j.prepareContent=function(t,w,v,u,y){var x=o.Promise.resolve(w).then(function(A){var z=q.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1);if(z&&typeof FileReader!=="undefined"){return new o.Promise(function(D,C){var B=new FileReader();B.onload=function(E){D(E.target.result)};B.onerror=function(E){C(E.target.error)};B.readAsArrayBuffer(A)})}else{return A}});return x.then(function(A){var z=j.getTypeOf(A);if(!z){return o.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}if(z==="arraybuffer"){A=j.transformTo("uint8array",A)}else{if(z==="string"){if(y){A=n.decode(A)}else{if(v){if(u!==true){A=m(A)}}}}}return A})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"core-js/library/fn/set-immediate":36}],33:[function(f,e,h){var i=f("./reader/readerFor");var l=f("./utils");var n=f("./signature");var j=f("./zipEntry");var k=f("./utf8");var m=f("./support");function g(o){this.files=[];this.loadOptions=o}g.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var o=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(o)+", expected "+l.pretty(p)+")")}},isSignature:function(s,r){var q=this.reader.index;this.reader.setIndex(s);var p=this.reader.readString(4);var o=p===r;this.reader.setIndex(q);return o},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var o=this.reader.readData(this.zipCommentLength);var q=m.uint8array?"uint8array":"array";var p=l.transformTo(q,o);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var s=this.zip64EndOfCentralSize-44,p=0,q,r,o;while(p<s){q=this.reader.readInt(2);r=this.reader.readInt(4);o=this.reader.readData(r);this.zip64ExtensibleData[q]={id:q,length:r,value:o}}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1){throw new Error("Multi-volumes zip are not supported")}},readLocalFiles:function(){var p,o;for(p=0;p<this.files.length;p++){o=this.files[p];this.reader.setIndex(o.localHeaderOffset);this.checkSignature(n.LOCAL_FILE_HEADER);o.readLocalPart(this.reader);o.handleUTF8();o.processAttributes()}},readCentralDir:function(){var o;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER)){o=new j({zip64:this.zip64},this.loadOptions);o.readCentralPart(this.reader);this.files.push(o)}if(this.centralDirRecords!==this.files.length){if(this.centralDirRecords!==0&&this.files.length===0){throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)}else{}}},readEndOfCentral:function(){var s=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(s<0){var q=!this.isSignature(0,n.LOCAL_FILE_HEADER);if(q){throw new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html")}else{throw new Error("Corrupted zip: can't find end of central directory")}}this.reader.setIndex(s);var o=s;this.checkSignature(n.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){this.zip64=true;s=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(s<0){throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator")}this.reader.setIndex(s);this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();if(!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)){this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END);if(this.relativeOffsetEndOfZip64CentralDir<0){throw new Error("Corrupted zip: can't find the ZIP64 end of central directory")}}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;if(this.zip64){r+=20;r+=12+this.zip64EndOfCentralSize}var p=o-r;if(p>0){if(this.isSignature(o,n.CENTRAL_FILE_HEADER)){}else{this.reader.zero=p}}else{if(p<0){throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")}}},prepareReader:function(o){this.reader=i(o)},load:function(o){this.prepareReader(o);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};e.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(g,e,i){var l=g("./reader/readerFor");var p=g("./utils");var k=g("./compressedObject");var h=g("./crc32");var o=g("./utf8");var r=g("./compressions");var q=g("./support");var j=0;var f=3;var n=function(s){for(var t in r){if(!r.hasOwnProperty(t)){continue}if(r[t].magic===s){return r[t]}}return null};function m(s,t){this.options=s;this.loadOptions=t}m.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(s){var t,u;s.skip(22);this.fileNameLength=s.readInt(2);u=s.readInt(2);this.fileName=s.readData(this.fileNameLength);s.skip(u);if(this.compressedSize===-1||this.uncompressedSize===-1){throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)")}t=n(this.compressionMethod);if(t===null){throw new Error("Corrupted zip : compression "+p.pretty(this.compressionMethod)+" unknown (inner file : "+p.transformTo("string",this.fileName)+")")}this.decompressed=new k(this.compressedSize,this.uncompressedSize,this.crc32,t,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2);s.skip(2);this.bitFlag=s.readInt(2);this.compressionMethod=s.readString(2);this.date=s.readDate();this.crc32=s.readInt(4);this.compressedSize=s.readInt(4);this.uncompressedSize=s.readInt(4);var t=s.readInt(2);this.extraFieldsLength=s.readInt(2);this.fileCommentLength=s.readInt(2);this.diskNumberStart=s.readInt(2);this.internalFileAttributes=s.readInt(2);this.externalFileAttributes=s.readInt(4);this.localHeaderOffset=s.readInt(4);if(this.isEncrypted()){throw new Error("Encrypted zip are not supported")}s.skip(t);this.readExtraFields(s);this.parseZIP64ExtraField(s);this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null;this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=this.externalFileAttributes&16?true:false;if(s===j){this.dosPermissions=this.externalFileAttributes&63}if(s===f){this.unixPermissions=(this.externalFileAttributes>>16)&65535}if(!this.dir&&this.fileNameStr.slice(-1)==="/"){this.dir=true}},parseZIP64ExtraField:function(s){if(!this.extraFields[1]){return}var t=l(this.extraFields[1].value);if(this.uncompressedSize===p.MAX_VALUE_32BITS){this.uncompressedSize=t.readInt(8)}if(this.compressedSize===p.MAX_VALUE_32BITS){this.compressedSize=t.readInt(8)}if(this.localHeaderOffset===p.MAX_VALUE_32BITS){this.localHeaderOffset=t.readInt(8)}if(this.diskNumberStart===p.MAX_VALUE_32BITS){this.diskNumberStart=t.readInt(4)}},readExtraFields:function(t){var u=t.index+this.extraFieldsLength,v,w,s;if(!this.extraFields){this.extraFields={}}while(t.index<u){v=t.readInt(2);w=t.readInt(2);s=t.readData(w);this.extraFields[v]={id:v,length:w,value:s}}},handleUTF8:function(){var v=q.uint8array?"uint8array":"array";if(this.useUTF8()){this.fileNameStr=o.utf8decode(this.fileName);this.fileCommentStr=o.utf8decode(this.fileComment)}else{var t=this.findExtraFieldUnicodePath();if(t!==null){this.fileNameStr=t}else{var u=p.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(u)}var w=this.findExtraFieldUnicodeComment();if(w!==null){this.fileCommentStr=w}else{var s=p.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var s=l(t.value);if(s.readInt(1)!==1){return null}if(h(this.fileName)!==s.readInt(4)){return null}return o.utf8decode(s.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var s=l(t.value);if(s.readInt(1)!==1){return null}if(h(this.fileComment)!==s.readInt(4)){return null}return o.utf8decode(s.readData(t.length-5))}return null}};e.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(j,g,l){var p=j("./stream/StreamHelper");var e=j("./stream/DataWorker");var q=j("./utf8");var o=j("./compressedObject");var f=j("./stream/GenericWorker");var h=function(r,s,i){this.name=r;this.dir=i.dir;this.date=i.date;this.comment=i.comment;this.unixPermissions=i.unixPermissions;this.dosPermissions=i.dosPermissions;this._data=s;this._dataBinary=i.binary;this.options={compression:i.compression,compressionOptions:i.compressionOptions}};h.prototype={internalStream:function(r){var i=null,u="string";try{if(!r){throw new Error("No output type specified.")}u=r.toLowerCase();var v=u==="string"||u==="text";if(u==="binarystring"||u==="text"){u="string"}i=this._decompressWorker();var t=!this._dataBinary;if(t&&!v){i=i.pipe(new q.Utf8EncodeWorker())}if(!t&&v){i=i.pipe(new q.Utf8DecodeWorker())}}catch(s){i=new f("error");i.error(s)}return new p(i,u,"")},async:function(r,i){return this.internalStream(r).accumulate(i)},nodeStream:function(r,i){return this.internalStream(r||"nodebuffer").toNodejsStream(i)},_compressWorker:function(r,s){if(this._data instanceof o&&this._data.compression.magic===r.magic){return this._data.getCompressedWorker()}else{var i=this._decompressWorker();if(!this._dataBinary){i=i.pipe(new q.Utf8EncodeWorker())}return o.createWorkerFrom(i,r,s)}},_decompressWorker:function(){if(this._data instanceof o){return this._data.getContentWorker()}else{if(this._data instanceof f){return this._data}else{return new e(this._data)}}}};var n=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"];var k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(var m=0;m<n.length;m++){h.prototype[n[m]]=k}g.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(f,g,e){f("../modules/web.immediate");g.exports=f("../modules/_core").setImmediate},{"../modules/_core":40,"../modules/web.immediate":56}],37:[function(f,g,e){g.exports=function(h){if(typeof h!="function"){throw TypeError(h+" is not a function!")}return h}},{}],38:[function(g,h,f){var e=g("./_is-object");h.exports=function(i){if(!e(i)){throw TypeError(i+" is not an object!")}return i}},{"./_is-object":51}],39:[function(f,g,e){var h={}.toString;g.exports=function(i){return h.call(i).slice(8,-1)}},{}],40:[function(g,h,f){var e=h.exports={version:"2.3.0"};if(typeof __e=="number"){__e=e}},{}],41:[function(g,h,f){var e=g("./_a-function");h.exports=function(i,k,j){e(i);if(k===undefined){return i}switch(j){case 1:return function(l){return i.call(k,l)};case 2:return function(m,l){return i.call(k,m,l)};case 3:return function(m,l,n){return i.call(k,m,l,n)}}return function(){return i.apply(k,arguments)}}},{"./_a-function":37}],42:[function(f,g,e){g.exports=!f("./_fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./_fails":45}],43:[function(h,i,g){var f=h("./_is-object"),e=h("./_global").document,j=f(e)&&f(e.createElement);i.exports=function(k){return j?e.createElement(k):{}}},{"./_global":46,"./_is-object":51}],44:[function(g,f,k){var e=g("./_global"),h=g("./_core"),m=g("./_ctx"),l=g("./_hide"),j="prototype";var i=function(y,p,n){var o=y&i.F,r=y&i.G,v=y&i.S,q=y&i.P,u=y&i.B,A=y&i.W,t=r?h:h[p]||(h[p]={}),x=t[j],w=r?e:v?e[p]:(e[p]||{})[j],z,B,s;if(r){n=p}for(z in n){B=!o&&w&&w[z]!==undefined;if(B&&z in t){continue}s=B?w[z]:n[z];t[z]=r&&typeof w[z]!="function"?n[z]:u&&B?m(s,e):A&&w[z]==s?(function(E){var D=function(F,C,G){if(this instanceof E){switch(arguments.length){case 0:return new E();case 1:return new E(F);case 2:return new E(F,C)}return new E(F,C,G)}return E.apply(this,arguments)};D[j]=E[j];return D})(s):q&&typeof s=="function"?m(Function.call,s):s;if(q){(t.virtual||(t.virtual={}))[z]=s;if(y&i.R&&x&&!x[z]){l(x,z,s)}}}};i.F=1;i.G=2;i.S=4;i.P=8;i.B=16;i.W=32;i.U=64;i.R=128;f.exports=i},{"./_core":40,"./_ctx":41,"./_global":46,"./_hide":47}],45:[function(f,g,e){g.exports=function(h){try{return !!h()}catch(i){return true}}},{}],46:[function(f,g,e){var h=g.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number"){__g=h}},{}],47:[function(g,h,f){var i=g("./_object-dp"),e=g("./_property-desc");h.exports=g("./_descriptors")?function(j,k,l){return i.f(j,k,e(1,l))}:function(j,k,l){j[k]=l;return j}},{"./_descriptors":42,"./_object-dp":52,"./_property-desc":53}],48:[function(f,g,e){g.exports=f("./_global").document&&document.documentElement},{"./_global":46}],49:[function(f,g,e){g.exports=!f("./_descriptors")&&!f("./_fails")(function(){return Object.defineProperty(f("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7})},{"./_descriptors":42,"./_dom-create":43,"./_fails":45}],50:[function(f,g,e){g.exports=function(j,i,k){var h=k===undefined;switch(i.length){case 0:return h?j():j.call(k);case 1:return h?j(i[0]):j.call(k,i[0]);case 2:return h?j(i[0],i[1]):j.call(k,i[0],i[1]);case 3:return h?j(i[0],i[1],i[2]):j.call(k,i[0],i[1],i[2]);case 4:return h?j(i[0],i[1],i[2],i[3]):j.call(k,i[0],i[1],i[2],i[3])}return j.apply(k,i)}},{}],51:[function(f,g,e){g.exports=function(h){return typeof h==="object"?h!==null:typeof h==="function"}},{}],52:[function(i,j,g){var f=i("./_an-object"),k=i("./_ie8-dom-define"),h=i("./_to-primitive"),l=Object.defineProperty;g.f=i("./_descriptors")?Object.defineProperty:function e(o,m,p){f(o);m=h(m,true);f(p);if(k){try{return l(o,m,p)}catch(n){}}if("get" in p||"set" in p){throw TypeError("Accessors not supported!")}if("value" in p){o[m]=p.value}return o}},{"./_an-object":38,"./_descriptors":42,"./_ie8-dom-define":49,"./_to-primitive":55}],53:[function(f,g,e){g.exports=function(i,h){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:h}}},{}],54:[function(j,g,x){var p=j("./_ctx"),y=j("./_invoke"),m=j("./_html"),v=j("./_dom-create"),r=j("./_global"),o=r.process,f=r.setImmediate,s=r.clearImmediate,e=r.MessageChannel,l=0,q={},w="onreadystatechange",h,z,k;var n=function(){var B=+this;if(q.hasOwnProperty(B)){var A=q[B];delete q[B];A()}};var i=function(A){n.call(A.data)};if(!f||!s){f=function u(C){var A=[],B=1;while(arguments.length>B){A.push(arguments[B++])}q[++l]=function(){y(typeof C=="function"?C:Function(C),A)};h(l);return l};s=function t(A){delete q[A]};if(j("./_cof")(o)=="process"){h=function(A){o.nextTick(p(n,A,1))}}else{if(e){z=new e();k=z.port2;z.port1.onmessage=i;h=p(k.postMessage,k,1)}else{if(r.addEventListener&&typeof postMessage=="function"&&!r.importScripts){h=function(A){r.postMessage(A+"","*")};r.addEventListener("message",i,false)}else{if(w in v("script")){h=function(A){m.appendChild(v("script"))[w]=function(){m.removeChild(this);n.call(A)}}}else{h=function(A){setTimeout(p(n,A,1),0)}}}}}}g.exports={set:f,clear:s}},{"./_cof":39,"./_ctx":41,"./_dom-create":43,"./_global":46,"./_html":48,"./_invoke":50}],55:[function(g,h,f){var e=g("./_is-object");h.exports=function(k,i){if(!e(k)){return k}var j,l;if(i&&typeof(j=k.toString)=="function"&&!e(l=j.call(k))){return l}if(typeof(j=k.valueOf)=="function"&&!e(l=j.call(k))){return l}if(!i&&typeof(j=k.toString)=="function"&&!e(l=j.call(k))){return l}throw TypeError("Can't convert object to primitive value")}},{"./_is-object":51}],56:[function(f,g,e){var i=f("./_export"),h=f("./_task");i(i.G+i.B,{setImmediate:h.set,clearImmediate:h.clear})},{"./_export":44,"./_task":54}],57:[function(f,g,e){(function(h){var r=h.MutationObserver||h.WebKitMutationObserver;var o;if(r){var p=0;var n=new r(l);var j=h.document.createTextNode("");n.observe(j,{characterData:true});o=function(){j.data=(p=++p%2)}}else{if(!h.setImmediate&&typeof h.MessageChannel!=="undefined"){var m=new h.MessageChannel();m.port1.onmessage=l;o=function(){m.port2.postMessage(0)}}else{if("document" in h&&"onreadystatechange" in h.document.createElement("script")){o=function(){var s=h.document.createElement("script");s.onreadystatechange=function(){l();s.onreadystatechange=null;s.parentNode.removeChild(s);s=null};h.document.documentElement.appendChild(s)}}else{o=function(){setTimeout(l,0)}}}}var q;var k=[];function l(){q=true;var t,u;var s=k.length;while(s){u=k;k=[];t=-1;while(++t<s){u[t]()}s=k.length}q=false}g.exports=i;function i(s){if(k.push(s)===1&&!q){o()}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],58:[function(q,h,w){var g=q("immediate");function e(){}var s={};var v=["REJECTED"];var f=["FULFILLED"];var o=["PENDING"];h.exports=j;function j(x){if(typeof x!=="function"){throw new TypeError("resolver must be a function")}this.state=o;this.queue=[];this.outcome=void 0;if(x!==e){m(this,x)}}j.prototype["catch"]=function(x){return this.then(null,x)};j.prototype.then=function(A,x){if(typeof A!=="function"&&this.state===f||typeof x!=="function"&&this.state===v){return this}var z=new this.constructor(e);if(this.state!==o){var y=this.state===f?A:x;t(z,y,this.outcome)}else{this.queue.push(new k(z,A,x))}return z};function k(z,y,x){this.promise=z;if(typeof y==="function"){this.onFulfilled=y;this.callFulfilled=this.otherCallFulfilled}if(typeof x==="function"){this.onRejected=x;this.callRejected=this.otherCallRejected}}k.prototype.callFulfilled=function(x){s.resolve(this.promise,x)};k.prototype.otherCallFulfilled=function(x){t(this.promise,this.onFulfilled,x)};k.prototype.callRejected=function(x){s.reject(this.promise,x)};k.prototype.otherCallRejected=function(x){t(this.promise,this.onRejected,x)};function t(z,x,y){g(function(){var A;try{A=x(y)}catch(B){return s.reject(z,B)}if(A===z){s.reject(z,new TypeError("Cannot resolve promise with itself"))}else{s.resolve(z,A)}})}s.resolve=function(A,C){var z=r(p,C);if(z.status==="error"){return s.reject(A,z.value)}var y=z.value;if(y){m(A,y)}else{A.state=f;A.outcome=C;var B=-1;var x=A.queue.length;while(++B<x){A.queue[B].callFulfilled(C)}}return A};s.reject=function(y,z){y.state=v;y.outcome=z;var A=-1;var x=y.queue.length;while(++A<x){y.queue[A].callRejected(z)}return y};function p(y){var z=y&&y.then;if(y&&(typeof y==="object"||typeof y==="function")&&typeof z==="function"){return function x(){z.apply(y,arguments)}}}function m(z,y){var C=false;function B(E){if(C){return}C=true;s.reject(z,E)}function D(E){if(C){return}C=true;s.resolve(z,E)}function A(){y(D,B)}var x=r(A);if(x.status==="error"){B(x.value)}}function r(y,z){var x={};try{x.value=y(z);x.status="success"}catch(A){x.status="error";x.value=A}return x}j.resolve=u;function u(x){if(x instanceof this){return x}return s.resolve(new this(e),x)}j.reject=n;function n(x){var y=new this(e);return s.reject(y,x)}j.all=i;function i(x){var E=this;if(Object.prototype.toString.call(x)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var z=x.length;var B=false;if(!z){return this.resolve([])}var C=new Array(z);var D=0;var y=-1;var F=new this(e);while(++y<z){A(x[y],y)}return F;function A(I,G){E.resolve(I).then(H,function(J){if(!B){B=true;s.reject(F,J)}});function H(J){C[G]=J;if(++D===z&&!B){B=true;s.resolve(F,C)}}}}j.race=l;function l(B){var y=this;if(Object.prototype.toString.call(B)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var x=B.length;var A=false;if(!x){return this.resolve([])}var z=-1;var D=new this(e);while(++z<x){C(B[z])}return D;function C(E){y.resolve(E).then(function(F){if(!A){A=true;s.resolve(D,F)}},function(F){if(!A){A=true;s.reject(D,F)}})}}},{immediate:57}],59:[function(g,j,f){var e=g("./lib/utils/common").assign;var i=g("./lib/deflate");var l=g("./lib/inflate");var h=g("./lib/zlib/constants");var k={};e(k,i,l,h);j.exports=k},{"./lib/deflate":60,"./lib/inflate":61,"./lib/utils/common":62,"./lib/zlib/constants":65}],60:[function(l,e,x){var p=l("./zlib/deflate");var v=l("./utils/common");var i=l("./utils/strings");var k=l("./zlib/messages");var u=l("./zlib/zstream");var s=Object.prototype.toString;var r=0;var y=4;var j=0;var n=1;var q=2;var f=-1;var g=0;var o=8;function w(A){if(!(this instanceof w)){return new w(A)}this.options=v.assign({level:f,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},A||{});var B=this.options;if(B.raw&&(B.windowBits>0)){B.windowBits=-B.windowBits}else{if(B.gzip&&(B.windowBits>0)&&(B.windowBits<16)){B.windowBits+=16}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new u();this.strm.avail_out=0;var z=p.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(z!==j){throw new Error(k[z])}if(B.header){p.deflateSetHeader(this.strm,B.header)}if(B.dictionary){var C;if(typeof B.dictionary==="string"){C=i.string2buf(B.dictionary)}else{if(s.call(B.dictionary)==="[object ArrayBuffer]"){C=new Uint8Array(B.dictionary)}else{C=B.dictionary}}z=p.deflateSetDictionary(this.strm,C);if(z!==j){throw new Error(k[z])}this._dict_set=true}}w.prototype.push=function(C,D){var A=this.strm;var E=this.options.chunkSize;var z,B;if(this.ended){return false}B=(D===~~D)?D:((D===true)?y:r);if(typeof C==="string"){A.input=i.string2buf(C)}else{if(s.call(C)==="[object ArrayBuffer]"){A.input=new Uint8Array(C)}else{A.input=C}}A.next_in=0;A.avail_in=A.input.length;do{if(A.avail_out===0){A.output=new v.Buf8(E);A.next_out=0;A.avail_out=E}z=p.deflate(A,B);if(z!==n&&z!==j){this.onEnd(z);this.ended=true;return false}if(A.avail_out===0||(A.avail_in===0&&(B===y||B===q))){if(this.options.to==="string"){this.onData(i.buf2binstring(v.shrinkBuf(A.output,A.next_out)))}else{this.onData(v.shrinkBuf(A.output,A.next_out))}}}while((A.avail_in>0||A.avail_out===0)&&z!==n);if(B===y){z=p.deflateEnd(this.strm);this.onEnd(z);this.ended=true;return z===j}if(B===q){this.onEnd(j);A.avail_out=0;return true}return true};w.prototype.onData=function(z){this.chunks.push(z)};w.prototype.onEnd=function(z){if(z===j){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=v.flattenChunks(this.chunks)}}this.chunks=[];this.err=z;this.msg=this.strm.msg};function m(z,A){var B=new w(A);B.push(z,true);if(B.err){throw B.msg||k[B.err]}return B.result}function t(z,A){A=A||{};A.raw=true;return m(z,A)}function h(z,A){A=A||{};A.gzip=true;return m(z,A)}x.Deflate=w;x.deflate=m;x.deflateRaw=t;x.gzip=h},{"./utils/common":62,"./utils/strings":63,"./zlib/deflate":67,"./zlib/messages":72,"./zlib/zstream":74}],61:[function(j,g,k){var e=j("./zlib/inflate");var o=j("./utils/common");var p=j("./utils/strings");var n=j("./zlib/constants");var i=j("./zlib/messages");var r=j("./zlib/zstream");var m=j("./zlib/gzheader");var f=Object.prototype.toString;function l(t){if(!(this instanceof l)){return new l(t)}this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var u=this.options;if(u.raw&&(u.windowBits>=0)&&(u.windowBits<16)){u.windowBits=-u.windowBits;if(u.windowBits===0){u.windowBits=-15}}if((u.windowBits>=0)&&(u.windowBits<16)&&!(t&&t.windowBits)){u.windowBits+=32}if((u.windowBits>15)&&(u.windowBits<48)){if((u.windowBits&15)===0){u.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new r();this.strm.avail_out=0;var s=e.inflateInit2(this.strm,u.windowBits);if(s!==n.Z_OK){throw new Error(i[s])}this.header=new m();e.inflateGetHeader(this.strm,this.header)}l.prototype.push=function(y,z){var D=this.strm;var w=this.options.chunkSize;var C=this.options.dictionary;var x,v;var t,A,s;var u;var B=false;if(this.ended){return false}v=(z===~~z)?z:((z===true)?n.Z_FINISH:n.Z_NO_FLUSH);if(typeof y==="string"){D.input=p.binstring2buf(y)}else{if(f.call(y)==="[object ArrayBuffer]"){D.input=new Uint8Array(y)}else{D.input=y}}D.next_in=0;D.avail_in=D.input.length;do{if(D.avail_out===0){D.output=new o.Buf8(w);D.next_out=0;D.avail_out=w}x=e.inflate(D,n.Z_NO_FLUSH);if(x===n.Z_NEED_DICT&&C){if(typeof C==="string"){u=p.string2buf(C)}else{if(f.call(C)==="[object ArrayBuffer]"){u=new Uint8Array(C)}else{u=C}}x=e.inflateSetDictionary(this.strm,u)}if(x===n.Z_BUF_ERROR&&B===true){x=n.Z_OK;B=false}if(x!==n.Z_STREAM_END&&x!==n.Z_OK){this.onEnd(x);this.ended=true;return false}if(D.next_out){if(D.avail_out===0||x===n.Z_STREAM_END||(D.avail_in===0&&(v===n.Z_FINISH||v===n.Z_SYNC_FLUSH))){if(this.options.to==="string"){t=p.utf8border(D.output,D.next_out);A=D.next_out-t;s=p.buf2string(D.output,t);D.next_out=A;D.avail_out=w-A;if(A){o.arraySet(D.output,D.output,t,A,0)}this.onData(s)}else{this.onData(o.shrinkBuf(D.output,D.next_out))}}}if(D.avail_in===0&&D.avail_out===0){B=true}}while((D.avail_in>0||D.avail_out===0)&&x!==n.Z_STREAM_END);if(x===n.Z_STREAM_END){v=n.Z_FINISH}if(v===n.Z_FINISH){x=e.inflateEnd(this.strm);this.onEnd(x);this.ended=true;return x===n.Z_OK}if(v===n.Z_SYNC_FLUSH){this.onEnd(n.Z_OK);D.avail_out=0;return true}return true};l.prototype.onData=function(s){this.chunks.push(s)};l.prototype.onEnd=function(s){if(s===n.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=o.flattenChunks(this.chunks)}}this.chunks=[];this.err=s;this.msg=this.strm.msg};function q(s,t){var u=new l(t);u.push(s,true);if(u.err){throw u.msg||i[u.err]}return u.result}function h(s,t){t=t||{};t.raw=true;return q(s,t)}k.Inflate=l;k.inflate=q;k.inflateRaw=h;k.ungzip=q},{"./utils/common":62,"./utils/strings":63,"./zlib/constants":65,"./zlib/gzheader":68,"./zlib/inflate":70,"./zlib/messages":72,"./zlib/zstream":74}],62:[function(f,g,e){var j=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");e.assign=function(n){var k=Array.prototype.slice.call(arguments,1);while(k.length){var l=k.shift();if(!l){continue}if(typeof l!=="object"){throw new TypeError(l+"must be non-object")}for(var m in l){if(l.hasOwnProperty(m)){n[m]=l[m]}}}return n};e.shrinkBuf=function(k,l){if(k.length===l){return k}if(k.subarray){return k.subarray(0,l)}k.length=l;return k};var h={arraySet:function(l,n,p,k,o){if(n.subarray&&l.subarray){l.set(n.subarray(p,p+k),o);return}for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(r){var p,n,m,q,o,k;m=0;for(p=0,n=r.length;p<n;p++){m+=r[p].length}k=new Uint8Array(m);q=0;for(p=0,n=r.length;p<n;p++){o=r[p];k.set(o,q);q+=o.length}return k}};var i={arraySet:function(l,n,p,k,o){for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(k){return[].concat.apply([],k)}};e.setTyped=function(k){if(k){e.Buf8=Uint8Array;e.Buf16=Uint16Array;e.Buf32=Int32Array;e.assign(e,h)}else{e.Buf8=Array;e.Buf16=Array;e.Buf32=Array;e.assign(e,i)}};e.setTyped(j)},{}],63:[function(h,f,i){var n=h("./common");var l=true;var j=true;try{String.fromCharCode.apply(null,[0])}catch(m){l=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){j=false}var g=new n.Buf8(256);for(var e=0;e<256;e++){g[e]=(e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1)}g[254]=g[254]=1;i.string2buf=function(u){var o,v,q,r,p,t=u.length,s=0;for(r=0;r<t;r++){v=u.charCodeAt(r);if((v&64512)===55296&&(r+1<t)){q=u.charCodeAt(r+1);if((q&64512)===56320){v=65536+((v-55296)<<10)+(q-56320);r++}}s+=v<128?1:v<2048?2:v<65536?3:4}o=new n.Buf8(s);for(p=0,r=0;p<s;r++){v=u.charCodeAt(r);if((v&64512)===55296&&(r+1<t)){q=u.charCodeAt(r+1);if((q&64512)===56320){v=65536+((v-55296)<<10)+(q-56320);r++}}if(v<128){o[p++]=v}else{if(v<2048){o[p++]=192|(v>>>6);o[p++]=128|(v&63)}else{if(v<65536){o[p++]=224|(v>>>12);o[p++]=128|(v>>>6&63);o[p++]=128|(v&63)}else{o[p++]=240|(v>>>18);o[p++]=128|(v>>>12&63);o[p++]=128|(v>>>6&63);o[p++]=128|(v&63)}}}}return o};function k(q,p){if(p<65537){if((q.subarray&&j)||(!q.subarray&&l)){return String.fromCharCode.apply(null,n.shrinkBuf(q,p))}}var o="";for(var r=0;r<p;r++){o+=String.fromCharCode(q[r])}return o}i.buf2binstring=function(o){return k(o,o.length)};i.binstring2buf=function(r){var p=new n.Buf8(r.length);for(var q=0,o=p.length;q<o;q++){p[q]=r.charCodeAt(q)}return p};i.buf2string=function(t,q){var u,s,v,r;var p=q||t.length;var o=new Array(p*2);for(s=0,u=0;u<p;){v=t[u++];if(v<128){o[s++]=v;continue}r=g[v];if(r>4){o[s++]=65533;u+=r-1;continue}v&=r===2?31:r===3?15:7;while(r>1&&u<p){v=(v<<6)|(t[u++]&63);r--}if(r>1){o[s++]=65533;continue}if(v<65536){o[s++]=v}else{v-=65536;o[s++]=55296|((v>>10)&1023);o[s++]=56320|(v&1023)}}return k(o,s)};i.utf8border=function(p,o){var q;o=o||p.length;if(o>p.length){o=p.length}q=o-1;while(q>=0&&(p[q]&192)===128){q--}if(q<0){return o}if(q===0){return o}return(q+g[p[q]]>o)?q:o}},{"./common":62}],64:[function(f,g,e){function h(l,k,i,p){var m=(l&65535)|0,j=((l>>>16)&65535)|0,o=0;while(i!==0){o=i>2000?2000:i;i-=o;do{m=(m+k[p++])|0;j=(j+m)|0}while(--o);m%=65521;j%=65521}return(m|(j<<16))|0}g.exports=h},{}],65:[function(f,g,e){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],66:[function(g,h,f){function i(){var p,m=[];for(var o=0;o<256;o++){p=o;for(var l=0;l<8;l++){p=((p&1)?(3988292384^(p>>>1)):(p>>>1))}m[o]=p}return m}var e=i();function j(p,m,k,q){var o=e,l=q+k;p^=-1;for(var n=q;n<l;n++){p=(p>>>8)^o[(p^m[n])&255]}return(p^(-1))}h.exports=j},{}],67:[function(ao,aC,L){var S=ao("../utils/common");var aA=ao("./trees");var K=ao("./adler32");var Z=ao("./crc32");var F=ao("./messages");var N=0;var Y=1;var at=3;var n=4;var T=5;var t=0;var x=1;var ap=-2;var w=-3;var i=-5;var k=-1;var O=1;var D=2;var z=3;var u=4;var au=0;var J=2;var X=8;var av=9;var Q=15;var p=8;var ak=29;var az=256;var aB=az+1+ak;var C=30;var af=19;var am=2*aB+1;var R=15;var H=3;var aq=258;var g=(aq+H+1);var l=32;var V=42;var r=69;var aa=73;var al=91;var s=103;var aE=113;var B=666;var an=1;var v=2;var U=3;var h=4;var ar=3;function ag(aG,aH){aG.msg=F[aH];return aH}function P(aG){return((aG)<<1)-((aG)>4?9:0)}function ay(aH){var aG=aH.length;while(--aG>=0){aH[aG]=0}}function j(aH){var aI=aH.state;var aG=aI.pending;if(aG>aH.avail_out){aG=aH.avail_out}if(aG===0){return}S.arraySet(aH.output,aI.pending_buf,aI.pending_out,aG,aH.next_out);aH.next_out+=aG;aI.pending_out+=aG;aH.total_out+=aG;aH.avail_out-=aG;aI.pending-=aG;if(aI.pending===0){aI.pending_out=0}}function m(aG,aH){aA._tr_flush_block(aG,(aG.block_start>=0?aG.block_start:-1),aG.strstart-aG.block_start,aH);aG.block_start=aG.strstart;j(aG.strm)}function f(aH,aG){aH.pending_buf[aH.pending++]=aG}function A(aH,aG){aH.pending_buf[aH.pending++]=(aG>>>8)&255;aH.pending_buf[aH.pending++]=aG&255}function E(aH,aI,aK,aJ){var aG=aH.avail_in;if(aG>aJ){aG=aJ}if(aG===0){return 0}aH.avail_in-=aG;S.arraySet(aI,aH.input,aH.next_in,aG,aK);if(aH.state.wrap===1){aH.adler=K(aH.adler,aI,aG,aK)}else{if(aH.state.wrap===2){aH.adler=Z(aH.adler,aI,aG,aK)}}aH.next_in+=aG;aH.total_in+=aG;return aG}function ax(aT,aK){var aN=aT.max_chain_length;var aU=aT.strstart;var aL;var aM;var aG=aT.prev_length;var aH=aT.nice_match;var aJ=(aT.strstart>(aT.w_size-g))?aT.strstart-(aT.w_size-g):0;var aR=aT.window;var aO=aT.w_mask;var aI=aT.prev;var aQ=aT.strstart+aq;var aS=aR[aU+aG-1];var aP=aR[aU+aG];if(aT.prev_length>=aT.good_match){aN>>=2}if(aH>aT.lookahead){aH=aT.lookahead}do{aL=aK;if(aR[aL+aG]!==aP||aR[aL+aG-1]!==aS||aR[aL]!==aR[aU]||aR[++aL]!==aR[aU+1]){continue}aU+=2;aL++;do{}while(aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aR[++aU]===aR[++aL]&&aU<aQ);aM=aq-(aQ-aU);aU=aQ-aq;if(aM>aG){aT.match_start=aK;aG=aM;if(aM>=aH){break}aS=aR[aU+aG-1];aP=aR[aU+aG]}}while((aK=aI[aK&aO])>aJ&&--aN!==0);if(aG<=aT.lookahead){return aG}return aT.lookahead}function aj(aI){var aM=aI.w_size;var aJ,aL,aG,aH,aK;do{aH=aI.window_size-aI.lookahead-aI.strstart;if(aI.strstart>=aM+(aM-g)){S.arraySet(aI.window,aI.window,aM,aM,0);aI.match_start-=aM;aI.strstart-=aM;aI.block_start-=aM;aL=aI.hash_size;aJ=aL;do{aG=aI.head[--aJ];aI.head[aJ]=(aG>=aM?aG-aM:0)}while(--aL);aL=aM;aJ=aL;do{aG=aI.prev[--aJ];aI.prev[aJ]=(aG>=aM?aG-aM:0)}while(--aL);aH+=aM}if(aI.strm.avail_in===0){break}aL=E(aI.strm,aI.window,aI.strstart+aI.lookahead,aH);aI.lookahead+=aL;if(aI.lookahead+aI.insert>=H){aK=aI.strstart-aI.insert;aI.ins_h=aI.window[aK];aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aK+1])&aI.hash_mask;while(aI.insert){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aK+H-1])&aI.hash_mask;aI.prev[aK&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aK;aK++;aI.insert--;if(aI.lookahead+aI.insert<H){break}}}}while(aI.lookahead<g&&aI.strm.avail_in!==0)}function M(aJ,aG){var aI=65535;if(aI>aJ.pending_buf_size-5){aI=aJ.pending_buf_size-5}for(;;){if(aJ.lookahead<=1){aj(aJ);if(aJ.lookahead===0&&aG===N){return an}if(aJ.lookahead===0){break}}aJ.strstart+=aJ.lookahead;aJ.lookahead=0;var aH=aJ.block_start+aI;if(aJ.strstart===0||aJ.strstart>=aH){aJ.lookahead=aJ.strstart-aH;aJ.strstart=aH;m(aJ,false);if(aJ.strm.avail_out===0){return an}}if(aJ.strstart-aJ.block_start>=(aJ.w_size-g)){m(aJ,false);if(aJ.strm.avail_out===0){return an}}}aJ.insert=0;if(aG===n){m(aJ,true);if(aJ.strm.avail_out===0){return U}return h}if(aJ.strstart>aJ.block_start){m(aJ,false);if(aJ.strm.avail_out===0){return an}}return an}function o(aI,aG){var aJ;var aH;for(;;){if(aI.lookahead<g){aj(aI);if(aI.lookahead<g&&aG===N){return an}if(aI.lookahead===0){break}}aJ=0;if(aI.lookahead>=H){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+H-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}if(aJ!==0&&((aI.strstart-aJ)<=(aI.w_size-g))){aI.match_length=ax(aI,aJ)}if(aI.match_length>=H){aH=aA._tr_tally(aI,aI.strstart-aI.match_start,aI.match_length-H);aI.lookahead-=aI.match_length;if(aI.match_length<=aI.max_lazy_match&&aI.lookahead>=H){aI.match_length--;do{aI.strstart++;aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+H-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}while(--aI.match_length!==0);aI.strstart++}else{aI.strstart+=aI.match_length;aI.match_length=0;aI.ins_h=aI.window[aI.strstart];aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+1])&aI.hash_mask}}else{aH=aA._tr_tally(aI,0,aI.window[aI.strstart]);aI.lookahead--;aI.strstart++}if(aH){m(aI,false);if(aI.strm.avail_out===0){return an}}}aI.insert=((aI.strstart<(H-1))?aI.strstart:H-1);if(aG===n){m(aI,true);if(aI.strm.avail_out===0){return U}return h}if(aI.last_lit){m(aI,false);if(aI.strm.avail_out===0){return an}}return v}function ah(aJ,aH){var aK;var aI;var aG;for(;;){if(aJ.lookahead<g){aj(aJ);if(aJ.lookahead<g&&aH===N){return an}if(aJ.lookahead===0){break}}aK=0;if(aJ.lookahead>=H){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+H-1])&aJ.hash_mask;aK=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}aJ.prev_length=aJ.match_length;aJ.prev_match=aJ.match_start;aJ.match_length=H-1;if(aK!==0&&aJ.prev_length<aJ.max_lazy_match&&aJ.strstart-aK<=(aJ.w_size-g)){aJ.match_length=ax(aJ,aK);if(aJ.match_length<=5&&(aJ.strategy===O||(aJ.match_length===H&&aJ.strstart-aJ.match_start>4096))){aJ.match_length=H-1}}if(aJ.prev_length>=H&&aJ.match_length<=aJ.prev_length){aG=aJ.strstart+aJ.lookahead-H;aI=aA._tr_tally(aJ,aJ.strstart-1-aJ.prev_match,aJ.prev_length-H);aJ.lookahead-=aJ.prev_length-1;aJ.prev_length-=2;do{if(++aJ.strstart<=aG){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+H-1])&aJ.hash_mask;aK=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}}while(--aJ.prev_length!==0);aJ.match_available=0;aJ.match_length=H-1;aJ.strstart++;if(aI){m(aJ,false);if(aJ.strm.avail_out===0){return an}}}else{if(aJ.match_available){aI=aA._tr_tally(aJ,0,aJ.window[aJ.strstart-1]);if(aI){m(aJ,false)}aJ.strstart++;aJ.lookahead--;if(aJ.strm.avail_out===0){return an}}else{aJ.match_available=1;aJ.strstart++;aJ.lookahead--}}}if(aJ.match_available){aI=aA._tr_tally(aJ,0,aJ.window[aJ.strstart-1]);aJ.match_available=0}aJ.insert=aJ.strstart<H-1?aJ.strstart:H-1;if(aH===n){m(aJ,true);if(aJ.strm.avail_out===0){return U}return h}if(aJ.last_lit){m(aJ,false);if(aJ.strm.avail_out===0){return an}}return v}function ad(aK,aH){var aJ;var aL;var aI,aG;var aM=aK.window;for(;;){if(aK.lookahead<=aq){aj(aK);if(aK.lookahead<=aq&&aH===N){return an}if(aK.lookahead===0){break}}aK.match_length=0;if(aK.lookahead>=H&&aK.strstart>0){aI=aK.strstart-1;aL=aM[aI];if(aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]){aG=aK.strstart+aq;do{}while(aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aL===aM[++aI]&&aI<aG);aK.match_length=aq-(aG-aI);if(aK.match_length>aK.lookahead){aK.match_length=aK.lookahead}}}if(aK.match_length>=H){aJ=aA._tr_tally(aK,1,aK.match_length-H);aK.lookahead-=aK.match_length;aK.strstart+=aK.match_length;aK.match_length=0}else{aJ=aA._tr_tally(aK,0,aK.window[aK.strstart]);aK.lookahead--;aK.strstart++}if(aJ){m(aK,false);if(aK.strm.avail_out===0){return an}}}aK.insert=0;if(aH===n){m(aK,true);if(aK.strm.avail_out===0){return U}return h}if(aK.last_lit){m(aK,false);if(aK.strm.avail_out===0){return an}}return v}function ae(aI,aG){var aH;for(;;){if(aI.lookahead===0){aj(aI);if(aI.lookahead===0){if(aG===N){return an}break}}aI.match_length=0;aH=aA._tr_tally(aI,0,aI.window[aI.strstart]);aI.lookahead--;aI.strstart++;if(aH){m(aI,false);if(aI.strm.avail_out===0){return an}}}aI.insert=0;if(aG===n){m(aI,true);if(aI.strm.avail_out===0){return U}return h}if(aI.last_lit){m(aI,false);if(aI.strm.avail_out===0){return an}}return v}function ac(aG,aK,aH,aJ,aI){this.good_length=aG;this.max_lazy=aK;this.nice_length=aH;this.max_chain=aJ;this.func=aI}var ab;ab=[new ac(0,0,0,0,M),new ac(4,4,8,4,o),new ac(4,5,16,8,o),new ac(4,6,32,32,o),new ac(4,4,16,16,ah),new ac(8,16,32,32,ah),new ac(8,16,128,128,ah),new ac(8,32,128,256,ah),new ac(32,128,258,1024,ah),new ac(32,258,258,4096,ah)];function I(aG){aG.window_size=2*aG.w_size;ay(aG.head);aG.max_lazy_match=ab[aG.level].max_lazy;aG.good_match=ab[aG.level].good_length;aG.nice_match=ab[aG.level].nice_length;aG.max_chain_length=ab[aG.level].max_chain;aG.strstart=0;aG.block_start=0;aG.lookahead=0;aG.insert=0;aG.match_length=aG.prev_length=H-1;aG.match_available=0;aG.ins_h=0}function e(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=X;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new S.Buf16(am*2);this.dyn_dtree=new S.Buf16((2*C+1)*2);this.bl_tree=new S.Buf16((2*af+1)*2);ay(this.dyn_ltree);ay(this.dyn_dtree);ay(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new S.Buf16(R+1);this.heap=new S.Buf16(2*aB+1);ay(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new S.Buf16(2*aB+1);ay(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function ai(aG){var aH;if(!aG||!aG.state){return ag(aG,ap)}aG.total_in=aG.total_out=0;aG.data_type=J;aH=aG.state;aH.pending=0;aH.pending_out=0;if(aH.wrap<0){aH.wrap=-aH.wrap}aH.status=(aH.wrap?V:aE);aG.adler=(aH.wrap===2)?0:1;aH.last_flush=N;aA._tr_init(aH);return t}function y(aG){var aH=ai(aG);if(aH===t){I(aG.state)}return aH}function aD(aG,aH){if(!aG||!aG.state){return ap}if(aG.state.wrap!==2){return ap}aG.state.gzhead=aH;return t}function G(aG,aN,aM,aJ,aL,aK){if(!aG){return ap}var aI=1;if(aN===k){aN=6}if(aJ<0){aI=0;aJ=-aJ}else{if(aJ>15){aI=2;aJ-=16}}if(aL<1||aL>av||aM!==X||aJ<8||aJ>15||aN<0||aN>9||aK<0||aK>u){return ag(aG,ap)}if(aJ===8){aJ=9}var aH=new e();aG.state=aH;aH.strm=aG;aH.wrap=aI;aH.gzhead=null;aH.w_bits=aJ;aH.w_size=1<<aH.w_bits;aH.w_mask=aH.w_size-1;aH.hash_bits=aL+7;aH.hash_size=1<<aH.hash_bits;aH.hash_mask=aH.hash_size-1;aH.hash_shift=~~((aH.hash_bits+H-1)/H);aH.window=new S.Buf8(aH.w_size*2);aH.head=new S.Buf16(aH.hash_size);aH.prev=new S.Buf16(aH.w_size);aH.lit_bufsize=1<<(aL+6);aH.pending_buf_size=aH.lit_bufsize*4;aH.pending_buf=new S.Buf8(aH.pending_buf_size);aH.d_buf=1*aH.lit_bufsize;aH.l_buf=(1+2)*aH.lit_bufsize;aH.level=aN;aH.strategy=aK;aH.method=aM;return y(aG)}function W(aG,aH){return G(aG,aH,X,Q,p,au)}function q(aL,aM){var aK,aO;var aJ,aH;if(!aL||!aL.state||aM>T||aM<0){return aL?ag(aL,ap):ap}aO=aL.state;if(!aL.output||(!aL.input&&aL.avail_in!==0)||(aO.status===B&&aM!==n)){return ag(aL,(aL.avail_out===0)?i:ap)}aO.strm=aL;aK=aO.last_flush;aO.last_flush=aM;if(aO.status===V){if(aO.wrap===2){aL.adler=0;f(aO,31);f(aO,139);f(aO,8);if(!aO.gzhead){f(aO,0);f(aO,0);f(aO,0);f(aO,0);f(aO,0);f(aO,aO.level===9?2:(aO.strategy>=D||aO.level<2?4:0));f(aO,ar);aO.status=aE}else{f(aO,(aO.gzhead.text?1:0)+(aO.gzhead.hcrc?2:0)+(!aO.gzhead.extra?0:4)+(!aO.gzhead.name?0:8)+(!aO.gzhead.comment?0:16));f(aO,aO.gzhead.time&255);f(aO,(aO.gzhead.time>>8)&255);f(aO,(aO.gzhead.time>>16)&255);f(aO,(aO.gzhead.time>>24)&255);f(aO,aO.level===9?2:(aO.strategy>=D||aO.level<2?4:0));f(aO,aO.gzhead.os&255);if(aO.gzhead.extra&&aO.gzhead.extra.length){f(aO,aO.gzhead.extra.length&255);f(aO,(aO.gzhead.extra.length>>8)&255)}if(aO.gzhead.hcrc){aL.adler=Z(aL.adler,aO.pending_buf,aO.pending,0)}aO.gzindex=0;aO.status=r}}else{var aI=(X+((aO.w_bits-8)<<4))<<8;var aN=-1;if(aO.strategy>=D||aO.level<2){aN=0}else{if(aO.level<6){aN=1}else{if(aO.level===6){aN=2}else{aN=3}}}aI|=(aN<<6);if(aO.strstart!==0){aI|=l}aI+=31-(aI%31);aO.status=aE;A(aO,aI);if(aO.strstart!==0){A(aO,aL.adler>>>16);A(aO,aL.adler&65535)}aL.adler=1}}if(aO.status===r){if(aO.gzhead.extra){aJ=aO.pending;while(aO.gzindex<(aO.gzhead.extra.length&65535)){if(aO.pending===aO.pending_buf_size){if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=Z(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}j(aL);aJ=aO.pending;if(aO.pending===aO.pending_buf_size){break}}f(aO,aO.gzhead.extra[aO.gzindex]&255);aO.gzindex++}if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=Z(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}if(aO.gzindex===aO.gzhead.extra.length){aO.gzindex=0;aO.status=aa}}else{aO.status=aa}}if(aO.status===aa){if(aO.gzhead.name){aJ=aO.pending;do{if(aO.pending===aO.pending_buf_size){if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=Z(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}j(aL);aJ=aO.pending;if(aO.pending===aO.pending_buf_size){aH=1;break}}if(aO.gzindex<aO.gzhead.name.length){aH=aO.gzhead.name.charCodeAt(aO.gzindex++)&255}else{aH=0}f(aO,aH)}while(aH!==0);if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=Z(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}if(aH===0){aO.gzindex=0;aO.status=al}}else{aO.status=al}}if(aO.status===al){if(aO.gzhead.comment){aJ=aO.pending;do{if(aO.pending===aO.pending_buf_size){if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=Z(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}j(aL);aJ=aO.pending;if(aO.pending===aO.pending_buf_size){aH=1;break}}if(aO.gzindex<aO.gzhead.comment.length){aH=aO.gzhead.comment.charCodeAt(aO.gzindex++)&255}else{aH=0}f(aO,aH)}while(aH!==0);if(aO.gzhead.hcrc&&aO.pending>aJ){aL.adler=Z(aL.adler,aO.pending_buf,aO.pending-aJ,aJ)}if(aH===0){aO.status=s}}else{aO.status=s}}if(aO.status===s){if(aO.gzhead.hcrc){if(aO.pending+2>aO.pending_buf_size){j(aL)}if(aO.pending+2<=aO.pending_buf_size){f(aO,aL.adler&255);f(aO,(aL.adler>>8)&255);aL.adler=0;aO.status=aE}}else{aO.status=aE}}if(aO.pending!==0){j(aL);if(aL.avail_out===0){aO.last_flush=-1;return t}}else{if(aL.avail_in===0&&P(aM)<=P(aK)&&aM!==n){return ag(aL,i)}}if(aO.status===B&&aL.avail_in!==0){return ag(aL,i)}if(aL.avail_in!==0||aO.lookahead!==0||(aM!==N&&aO.status!==B)){var aG=(aO.strategy===D)?ae(aO,aM):(aO.strategy===z?ad(aO,aM):ab[aO.level].func(aO,aM));if(aG===U||aG===h){aO.status=B}if(aG===an||aG===U){if(aL.avail_out===0){aO.last_flush=-1}return t}if(aG===v){if(aM===Y){aA._tr_align(aO)}else{if(aM!==T){aA._tr_stored_block(aO,0,0,false);if(aM===at){ay(aO.head);if(aO.lookahead===0){aO.strstart=0;aO.block_start=0;aO.insert=0}}}}j(aL);if(aL.avail_out===0){aO.last_flush=-1;return t}}}if(aM!==n){return t}if(aO.wrap<=0){return x}if(aO.wrap===2){f(aO,aL.adler&255);f(aO,(aL.adler>>8)&255);f(aO,(aL.adler>>16)&255);f(aO,(aL.adler>>24)&255);f(aO,aL.total_in&255);f(aO,(aL.total_in>>8)&255);f(aO,(aL.total_in>>16)&255);f(aO,(aL.total_in>>24)&255)}else{A(aO,aL.adler>>>16);A(aO,aL.adler&65535)}j(aL);if(aO.wrap>0){aO.wrap=-aO.wrap}return aO.pending!==0?t:x}function aw(aH){var aG;if(!aH||!aH.state){return ap}aG=aH.state.status;if(aG!==V&&aG!==r&&aG!==aa&&aG!==al&&aG!==s&&aG!==aE&&aG!==B){return ag(aH,ap)}aH.state=null;return aG===aE?ag(aH,w):t}function aF(aO,aN){var aP=aN.length;var aQ;var aL,aH;var aG;var aK;var aJ;var aM;var aI;if(!aO||!aO.state){return ap}aQ=aO.state;aG=aQ.wrap;if(aG===2||(aG===1&&aQ.status!==V)||aQ.lookahead){return ap}if(aG===1){aO.adler=K(aO.adler,aN,aP,0)}aQ.wrap=0;if(aP>=aQ.w_size){if(aG===0){ay(aQ.head);aQ.strstart=0;aQ.block_start=0;aQ.insert=0}aI=new S.Buf8(aQ.w_size);S.arraySet(aI,aN,aP-aQ.w_size,aQ.w_size,0);aN=aI;aP=aQ.w_size}aK=aO.avail_in;aJ=aO.next_in;aM=aO.input;aO.avail_in=aP;aO.next_in=0;aO.input=aN;aj(aQ);while(aQ.lookahead>=H){aL=aQ.strstart;aH=aQ.lookahead-(H-1);do{aQ.ins_h=((aQ.ins_h<<aQ.hash_shift)^aQ.window[aL+H-1])&aQ.hash_mask;aQ.prev[aL&aQ.w_mask]=aQ.head[aQ.ins_h];aQ.head[aQ.ins_h]=aL;aL++}while(--aH);aQ.strstart=aL;aQ.lookahead=H-1;aj(aQ)}aQ.strstart+=aQ.lookahead;aQ.block_start=aQ.strstart;aQ.insert=aQ.lookahead;aQ.lookahead=0;aQ.match_length=aQ.prev_length=H-1;aQ.match_available=0;aO.next_in=aJ;aO.input=aM;aO.avail_in=aK;aQ.wrap=aG;return t}L.deflateInit=W;L.deflateInit2=G;L.deflateReset=y;L.deflateResetKeep=ai;L.deflateSetHeader=aD;L.deflate=q;L.deflateEnd=aw;L.deflateSetDictionary=aF;L.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./messages":72,"./trees":73}],68:[function(f,g,e){function h(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}g.exports=h},{}],69:[function(g,h,f){var i=30;var j=12;h.exports=function e(I,p){var q;var K;var v;var J;var u;var o;var B;var l;var z;var m;var C;var y;var F;var D;var G;var t;var w;var k;var s;var H;var A;var E;var n;var x,r;q=I.state;K=I.next_in;x=I.input;v=K+(I.avail_in-5);J=I.next_out;r=I.output;u=J-(p-I.avail_out);o=J+(I.avail_out-257);B=q.dmax;l=q.wsize;z=q.whave;m=q.wnext;C=q.window;y=q.hold;F=q.bits;D=q.lencode;G=q.distcode;t=(1<<q.lenbits)-1;w=(1<<q.distbits)-1;top:do{if(F<15){y+=x[K++]<<F;F+=8;y+=x[K++]<<F;F+=8}k=D[y&t];dolen:for(;;){s=k>>>24;y>>>=s;F-=s;s=(k>>>16)&255;if(s===0){r[J++]=k&65535}else{if(s&16){H=k&65535;s&=15;if(s){if(F<s){y+=x[K++]<<F;F+=8}H+=y&((1<<s)-1);y>>>=s;F-=s}if(F<15){y+=x[K++]<<F;F+=8;y+=x[K++]<<F;F+=8}k=G[y&w];dodist:for(;;){s=k>>>24;y>>>=s;F-=s;s=(k>>>16)&255;if(s&16){A=k&65535;s&=15;if(F<s){y+=x[K++]<<F;F+=8;if(F<s){y+=x[K++]<<F;F+=8}}A+=y&((1<<s)-1);if(A>B){I.msg="invalid distance too far back";q.mode=i;break top}y>>>=s;F-=s;s=J-u;if(A>s){s=A-s;if(s>z){if(q.sane){I.msg="invalid distance too far back";q.mode=i;break top}}E=0;n=C;if(m===0){E+=l-s;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}else{if(m<s){E+=l+m-s;s-=m;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=0;if(m<H){s=m;H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}}else{E+=m-s;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}}while(H>2){r[J++]=n[E++];r[J++]=n[E++];r[J++]=n[E++];H-=3}if(H){r[J++]=n[E++];if(H>1){r[J++]=n[E++]}}}else{E=J-A;do{r[J++]=r[E++];r[J++]=r[E++];r[J++]=r[E++];H-=3}while(H>2);if(H){r[J++]=r[E++];if(H>1){r[J++]=r[E++]}}}}else{if((s&64)===0){k=G[(k&65535)+(y&((1<<s)-1))];continue dodist}else{I.msg="invalid distance code";q.mode=i;break top}}break}}else{if((s&64)===0){k=D[(k&65535)+(y&((1<<s)-1))];continue dolen}else{if(s&32){q.mode=j;break top}else{I.msg="invalid literal/length code";q.mode=i;break top}}}}break}}while(K<v&&J<o);H=F>>3;K-=H;F-=H<<3;y&=(1<<F)-1;I.next_in=K;I.next_out=J;I.avail_in=(K<v?5+(v-K):5-(K-v));I.avail_out=(J<o?257+(o-J):257-(J-o));q.hold=y;q.bits=F;return}},{}],70:[function(at,ay,N){var S=at("../utils/common");var M=at("./adler32");var ad=at("./crc32");var aq=at("./inffast");var n=at("./inftrees");var ac=0;var af=1;var J=2;var p=4;var T=5;var C=6;var v=0;var z=1;var t=2;var au=-2;var x=-3;var L=-4;var j=-5;var aa=8;var am=1;var al=2;var k=3;var ah=4;var E=5;var f=6;var s=7;var Y=8;var r=9;var ar=10;var w=11;var m=12;var aj=13;var h=14;var aA=15;var ap=16;var o=17;var A=18;var U=19;var Z=20;var e=21;var ax=22;var V=23;var av=24;var D=25;var F=26;var ao=27;var W=28;var B=29;var g=30;var az=31;var G=32;var X=852;var P=592;var Q=15;var K=Q;function u(aB){return(((aB>>>24)&255)+((aB>>>8)&65280)+((aB&65280)<<8)+((aB&255)<<24))}function ag(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new S.Buf16(320);this.work=new S.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function R(aB){var aC;if(!aB||!aB.state){return au}aC=aB.state;aB.total_in=aB.total_out=aC.total=0;aB.msg="";if(aC.wrap){aB.adler=aC.wrap&1}aC.mode=am;aC.last=0;aC.havedict=0;aC.dmax=32768;aC.head=null;aC.hold=0;aC.bits=0;aC.lencode=aC.lendyn=new S.Buf32(X);aC.distcode=aC.distdyn=new S.Buf32(P);aC.sane=1;aC.back=-1;return v}function aw(aB){var aC;if(!aB||!aB.state){return au}aC=aB.state;aC.wsize=0;aC.whave=0;aC.wnext=0;return R(aB)}function y(aB,aD){var aC;var aE;if(!aB||!aB.state){return au}aE=aB.state;if(aD<0){aC=0;aD=-aD}else{aC=(aD>>4)+1;if(aD<48){aD&=15}}if(aD&&(aD<8||aD>15)){return au}if(aE.window!==null&&aE.wbits!==aD){aE.window=null}aE.wrap=aC;aE.wbits=aD;return aw(aB)}function q(aB,aD){var aC;var aE;if(!aB){return au}aE=new ag();aB.state=aE;aE.window=null;aC=y(aB,aD);if(aC!==v){aB.state=null}return aC}function I(aB){return q(aB,K)}var ai=true;var an,l;function H(aC){if(ai){var aB;an=new S.Buf32(512);l=new S.Buf32(32);aB=0;while(aB<144){aC.lens[aB++]=8}while(aB<256){aC.lens[aB++]=9}while(aB<280){aC.lens[aB++]=7}while(aB<288){aC.lens[aB++]=8}n(af,aC.lens,0,288,an,0,aC.work,{bits:9});aB=0;while(aB<32){aC.lens[aB++]=5}n(J,aC.lens,0,32,l,0,aC.work,{bits:5});ai=false}aC.lencode=an;aC.lenbits=9;aC.distcode=l;aC.distbits=5}function O(aC,aF,aB,aG){var aE;var aD=aC.state;if(aD.window===null){aD.wsize=1<<aD.wbits;aD.wnext=0;aD.whave=0;aD.window=new S.Buf8(aD.wsize)}if(aG>=aD.wsize){S.arraySet(aD.window,aF,aB-aD.wsize,aD.wsize,0);aD.wnext=0;aD.whave=aD.wsize}else{aE=aD.wsize-aD.wnext;if(aE>aG){aE=aG}S.arraySet(aD.window,aF,aB-aG,aE,aD.wnext);aG-=aE;if(aG){S.arraySet(aD.window,aF,aB-aG,aG,0);aD.wnext=aG;aD.whave=aD.wsize}else{aD.wnext+=aE;if(aD.wnext===aD.wsize){aD.wnext=0}if(aD.whave<aD.wsize){aD.whave+=aE}}}return 0}function ab(aY,aS){var aG;var aL,aJ;var aQ;var aH;var aE,aF;var aO;var aU;var a2,a1;var aT;var aV;var aD;var aB=0;var aZ,aK,a0;var aP,aC,aM;var aX;var a3;var aI=new S.Buf8(4);var aN;var aR;var aW=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!aY||!aY.state||!aY.output||(!aY.input&&aY.avail_in!==0)){return au}aG=aY.state;if(aG.mode===m){aG.mode=aj}aH=aY.next_out;aJ=aY.output;aF=aY.avail_out;aQ=aY.next_in;aL=aY.input;aE=aY.avail_in;aO=aG.hold;aU=aG.bits;a2=aE;a1=aF;a3=v;inf_leave:for(;;){switch(aG.mode){case am:if(aG.wrap===0){aG.mode=aj;break}while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if((aG.wrap&2)&&aO===35615){aG.check=0;aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=ad(aG.check,aI,2,0);aO=0;aU=0;aG.mode=al;break}aG.flags=0;if(aG.head){aG.head.done=false}if(!(aG.wrap&1)||(((aO&255)<<8)+(aO>>8))%31){aY.msg="incorrect header check";aG.mode=g;break}if((aO&15)!==aa){aY.msg="unknown compression method";aG.mode=g;break}aO>>>=4;aU-=4;aX=(aO&15)+8;if(aG.wbits===0){aG.wbits=aX}else{if(aX>aG.wbits){aY.msg="invalid window size";aG.mode=g;break}}aG.dmax=1<<aX;aY.adler=aG.check=1;aG.mode=aO&512?ar:m;aO=0;aU=0;break;case al:while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.flags=aO;if((aG.flags&255)!==aa){aY.msg="unknown compression method";aG.mode=g;break}if(aG.flags&57344){aY.msg="unknown header flags set";aG.mode=g;break}if(aG.head){aG.head.text=((aO>>8)&1)}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=ad(aG.check,aI,2,0)}aO=0;aU=0;aG.mode=k;case k:while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aG.head){aG.head.time=aO}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aI[2]=(aO>>>16)&255;aI[3]=(aO>>>24)&255;aG.check=ad(aG.check,aI,4,0)}aO=0;aU=0;aG.mode=ah;case ah:while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aG.head){aG.head.xflags=(aO&255);aG.head.os=(aO>>8)}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=ad(aG.check,aI,2,0)}aO=0;aU=0;aG.mode=E;case E:if(aG.flags&1024){while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.length=aO;if(aG.head){aG.head.extra_len=aO}if(aG.flags&512){aI[0]=aO&255;aI[1]=(aO>>>8)&255;aG.check=ad(aG.check,aI,2,0)}aO=0;aU=0}else{if(aG.head){aG.head.extra=null}}aG.mode=f;case f:if(aG.flags&1024){aT=aG.length;if(aT>aE){aT=aE}if(aT){if(aG.head){aX=aG.head.extra_len-aG.length;if(!aG.head.extra){aG.head.extra=new Array(aG.head.extra_len)}S.arraySet(aG.head.extra,aL,aQ,aT,aX)}if(aG.flags&512){aG.check=ad(aG.check,aL,aT,aQ)}aE-=aT;aQ+=aT;aG.length-=aT}if(aG.length){break inf_leave}}aG.length=0;aG.mode=s;case s:if(aG.flags&2048){if(aE===0){break inf_leave}aT=0;do{aX=aL[aQ+aT++];if(aG.head&&aX&&(aG.length<65536)){aG.head.name+=String.fromCharCode(aX)}}while(aX&&aT<aE);if(aG.flags&512){aG.check=ad(aG.check,aL,aT,aQ)}aE-=aT;aQ+=aT;if(aX){break inf_leave}}else{if(aG.head){aG.head.name=null}}aG.length=0;aG.mode=Y;case Y:if(aG.flags&4096){if(aE===0){break inf_leave}aT=0;do{aX=aL[aQ+aT++];if(aG.head&&aX&&(aG.length<65536)){aG.head.comment+=String.fromCharCode(aX)}}while(aX&&aT<aE);if(aG.flags&512){aG.check=ad(aG.check,aL,aT,aQ)}aE-=aT;aQ+=aT;if(aX){break inf_leave}}else{if(aG.head){aG.head.comment=null}}aG.mode=r;case r:if(aG.flags&512){while(aU<16){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aO!==(aG.check&65535)){aY.msg="header crc mismatch";aG.mode=g;break}aO=0;aU=0}if(aG.head){aG.head.hcrc=((aG.flags>>9)&1);aG.head.done=true}aY.adler=aG.check=0;aG.mode=m;break;case ar:while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aY.adler=aG.check=u(aO);aO=0;aU=0;aG.mode=w;case w:if(aG.havedict===0){aY.next_out=aH;aY.avail_out=aF;aY.next_in=aQ;aY.avail_in=aE;aG.hold=aO;aG.bits=aU;return t}aY.adler=aG.check=1;aG.mode=m;case m:if(aS===T||aS===C){break inf_leave}case aj:if(aG.last){aO>>>=aU&7;aU-=aU&7;aG.mode=ao;break}while(aU<3){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.last=(aO&1);aO>>>=1;aU-=1;switch((aO&3)){case 0:aG.mode=h;break;case 1:H(aG);aG.mode=Z;if(aS===C){aO>>>=2;aU-=2;break inf_leave}break;case 2:aG.mode=o;break;case 3:aY.msg="invalid block type";aG.mode=g}aO>>>=2;aU-=2;break;case h:aO>>>=aU&7;aU-=aU&7;while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if((aO&65535)!==((aO>>>16)^65535)){aY.msg="invalid stored block lengths";aG.mode=g;break}aG.length=aO&65535;aO=0;aU=0;aG.mode=aA;if(aS===C){break inf_leave}case aA:aG.mode=ap;case ap:aT=aG.length;if(aT){if(aT>aE){aT=aE}if(aT>aF){aT=aF}if(aT===0){break inf_leave}S.arraySet(aJ,aL,aQ,aT,aH);aE-=aT;aQ+=aT;aF-=aT;aH+=aT;aG.length-=aT;break}aG.mode=m;break;case o:while(aU<14){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.nlen=(aO&31)+257;aO>>>=5;aU-=5;aG.ndist=(aO&31)+1;aO>>>=5;aU-=5;aG.ncode=(aO&15)+4;aO>>>=4;aU-=4;if(aG.nlen>286||aG.ndist>30){aY.msg="too many length or distance symbols";aG.mode=g;break}aG.have=0;aG.mode=A;case A:while(aG.have<aG.ncode){while(aU<3){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.lens[aW[aG.have++]]=(aO&7);aO>>>=3;aU-=3}while(aG.have<19){aG.lens[aW[aG.have++]]=0}aG.lencode=aG.lendyn;aG.lenbits=7;aN={bits:aG.lenbits};a3=n(ac,aG.lens,0,19,aG.lencode,0,aG.work,aN);aG.lenbits=aN.bits;if(a3){aY.msg="invalid code lengths set";aG.mode=g;break}aG.have=0;aG.mode=U;case U:while(aG.have<aG.nlen+aG.ndist){for(;;){aB=aG.lencode[aO&((1<<aG.lenbits)-1)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(a0<16){aO>>>=aZ;aU-=aZ;aG.lens[aG.have++]=a0}else{if(a0===16){aR=aZ+2;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aZ;aU-=aZ;if(aG.have===0){aY.msg="invalid bit length repeat";aG.mode=g;break}aX=aG.lens[aG.have-1];aT=3+(aO&3);aO>>>=2;aU-=2}else{if(a0===17){aR=aZ+3;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aZ;aU-=aZ;aX=0;aT=3+(aO&7);aO>>>=3;aU-=3}else{aR=aZ+7;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aZ;aU-=aZ;aX=0;aT=11+(aO&127);aO>>>=7;aU-=7}}if(aG.have+aT>aG.nlen+aG.ndist){aY.msg="invalid bit length repeat";aG.mode=g;break}while(aT--){aG.lens[aG.have++]=aX}}}if(aG.mode===g){break}if(aG.lens[256]===0){aY.msg="invalid code -- missing end-of-block";aG.mode=g;break}aG.lenbits=9;aN={bits:aG.lenbits};a3=n(af,aG.lens,0,aG.nlen,aG.lencode,0,aG.work,aN);aG.lenbits=aN.bits;if(a3){aY.msg="invalid literal/lengths set";aG.mode=g;break}aG.distbits=6;aG.distcode=aG.distdyn;aN={bits:aG.distbits};a3=n(J,aG.lens,aG.nlen,aG.ndist,aG.distcode,0,aG.work,aN);aG.distbits=aN.bits;if(a3){aY.msg="invalid distances set";aG.mode=g;break}aG.mode=Z;if(aS===C){break inf_leave}case Z:aG.mode=e;case e:if(aE>=6&&aF>=258){aY.next_out=aH;aY.avail_out=aF;aY.next_in=aQ;aY.avail_in=aE;aG.hold=aO;aG.bits=aU;aq(aY,a1);aH=aY.next_out;aJ=aY.output;aF=aY.avail_out;aQ=aY.next_in;aL=aY.input;aE=aY.avail_in;aO=aG.hold;aU=aG.bits;if(aG.mode===m){aG.back=-1}break}aG.back=0;for(;;){aB=aG.lencode[aO&((1<<aG.lenbits)-1)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if(aZ<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aK&&(aK&240)===0){aP=aZ;aC=aK;aM=a0;for(;;){aB=aG.lencode[aM+((aO&((1<<(aP+aC))-1))>>aP)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aP+aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aP;aU-=aP;aG.back+=aP}aO>>>=aZ;aU-=aZ;aG.back+=aZ;aG.length=a0;if(aK===0){aG.mode=F;break}if(aK&32){aG.back=-1;aG.mode=m;break}if(aK&64){aY.msg="invalid literal/length code";aG.mode=g;break}aG.extra=aK&15;aG.mode=ax;case ax:if(aG.extra){aR=aG.extra;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.length+=aO&((1<<aG.extra)-1);aO>>>=aG.extra;aU-=aG.extra;aG.back+=aG.extra}aG.was=aG.length;aG.mode=V;case V:for(;;){aB=aG.distcode[aO&((1<<aG.distbits)-1)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if((aK&240)===0){aP=aZ;aC=aK;aM=a0;for(;;){aB=aG.distcode[aM+((aO&((1<<(aP+aC))-1))>>aP)];aZ=aB>>>24;aK=(aB>>>16)&255;a0=aB&65535;if((aP+aZ)<=aU){break}if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aO>>>=aP;aU-=aP;aG.back+=aP}aO>>>=aZ;aU-=aZ;aG.back+=aZ;if(aK&64){aY.msg="invalid distance code";aG.mode=g;break}aG.offset=a0;aG.extra=(aK)&15;aG.mode=av;case av:if(aG.extra){aR=aG.extra;while(aU<aR){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}aG.offset+=aO&((1<<aG.extra)-1);aO>>>=aG.extra;aU-=aG.extra;aG.back+=aG.extra}if(aG.offset>aG.dmax){aY.msg="invalid distance too far back";aG.mode=g;break}aG.mode=D;case D:if(aF===0){break inf_leave}aT=a1-aF;if(aG.offset>aT){aT=aG.offset-aT;if(aT>aG.whave){if(aG.sane){aY.msg="invalid distance too far back";aG.mode=g;break}}if(aT>aG.wnext){aT-=aG.wnext;aV=aG.wsize-aT}else{aV=aG.wnext-aT}if(aT>aG.length){aT=aG.length}aD=aG.window}else{aD=aJ;aV=aH-aG.offset;aT=aG.length}if(aT>aF){aT=aF}aF-=aT;aG.length-=aT;do{aJ[aH++]=aD[aV++]}while(--aT);if(aG.length===0){aG.mode=e}break;case F:if(aF===0){break inf_leave}aJ[aH++]=aG.length;aF--;aG.mode=e;break;case ao:if(aG.wrap){while(aU<32){if(aE===0){break inf_leave}aE--;aO|=aL[aQ++]<<aU;aU+=8}a1-=aF;aY.total_out+=a1;aG.total+=a1;if(a1){aY.adler=aG.check=(aG.flags?ad(aG.check,aJ,a1,aH-a1):M(aG.check,aJ,a1,aH-a1))}a1=aF;if((aG.flags?aO:u(aO))!==aG.check){aY.msg="incorrect data check";aG.mode=g;break}aO=0;aU=0}aG.mode=W;case W:if(aG.wrap&&aG.flags){while(aU<32){if(aE===0){break inf_leave}aE--;aO+=aL[aQ++]<<aU;aU+=8}if(aO!==(aG.total&4294967295)){aY.msg="incorrect length check";aG.mode=g;break}aO=0;aU=0}aG.mode=B;case B:a3=z;break inf_leave;case g:a3=x;break inf_leave;case az:return L;case G:default:return au}}aY.next_out=aH;aY.avail_out=aF;aY.next_in=aQ;aY.avail_in=aE;aG.hold=aO;aG.bits=aU;if(aG.wsize||(a1!==aY.avail_out&&aG.mode<g&&(aG.mode<ao||aS!==p))){if(O(aY,aY.output,aY.next_out,a1-aY.avail_out)){aG.mode=az;return L}}a2-=aY.avail_in;a1-=aY.avail_out;aY.total_in+=a2;aY.total_out+=a1;aG.total+=a1;if(aG.wrap&&a1){aY.adler=aG.check=(aG.flags?ad(aG.check,aJ,a1,aY.next_out-a1):M(aG.check,aJ,a1,aY.next_out-a1))}aY.data_type=aG.bits+(aG.last?64:0)+(aG.mode===m?128:0)+(aG.mode===Z||aG.mode===aA?256:0);if(((a2===0&&a1===0)||aS===p)&&a3===v){a3=j}return a3}function ak(aB){if(!aB||!aB.state){return au}var aC=aB.state;if(aC.window){aC.window=null}aB.state=null;return v}function i(aB,aC){var aD;if(!aB||!aB.state){return au}aD=aB.state;if((aD.wrap&2)===0){return au}aD.head=aC;aC.done=false;return v}function ae(aC,aG){var aF=aG.length;var aE;var aB;var aD;if(!aC||!aC.state){return au}aE=aC.state;if(aE.wrap!==0&&aE.mode!==w){return au}if(aE.mode===w){aB=1;aB=M(aB,aG,aF,0);if(aB!==aE.check){return x}}aD=O(aC,aG,aF,aF);if(aD){aE.mode=az;return L}aE.havedict=1;return v}N.inflateReset=aw;N.inflateReset2=y;N.inflateResetKeep=R;N.inflateInit=I;N.inflateInit2=q;N.inflate=ab;N.inflateEnd=ak;N.inflateGetHeader=i;N.inflateSetDictionary=ae;N.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./inffast":69,"./inftrees":71}],71:[function(h,f,i){var r=h("../utils/common");var q=15;var n=852;var m=592;var p=0;var k=1;var g=2;var o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function l(v,Z,I,W,V,T,H,E){var L=E.bits;var R=0;var D=0;var K=0,Q=0;var J=0;var U=0;var B=0;var w=0;var z=0;var P=0;var O;var M;var aa;var N;var G;var y=null;var F=0;var u;var A=new r.Buf16(q+1);var x=new r.Buf16(q+1);var t=null;var Y=0;var S,C,X;for(R=0;R<=q;R++){A[R]=0}for(D=0;D<W;D++){A[Z[I+D]]++}J=L;for(Q=q;Q>=1;Q--){if(A[Q]!==0){break}}if(J>Q){J=Q}if(Q===0){V[T++]=(1<<24)|(64<<16)|0;V[T++]=(1<<24)|(64<<16)|0;E.bits=1;return 0}for(K=1;K<Q;K++){if(A[K]!==0){break}}if(J<K){J=K}w=1;for(R=1;R<=q;R++){w<<=1;w-=A[R];if(w<0){return -1}}if(w>0&&(v===p||Q!==1)){return -1}x[1]=0;for(R=1;R<q;R++){x[R+1]=x[R]+A[R]}for(D=0;D<W;D++){if(Z[I+D]!==0){H[x[Z[I+D]]++]=D}}if(v===p){y=t=H;u=19}else{if(v===k){y=o;F-=257;t=s;Y-=257;u=256}else{y=j;t=e;u=-1}}P=0;D=0;R=K;G=T;U=J;B=0;aa=-1;z=1<<J;N=z-1;if((v===k&&z>n)||(v===g&&z>m)){return 1}for(;;){S=R-B;if(H[D]<u){C=0;X=H[D]}else{if(H[D]>u){C=t[Y+H[D]];X=y[F+H[D]]}else{C=32+64;X=0}}O=1<<(R-B);M=1<<U;K=M;do{M-=O;V[G+(P>>B)+M]=(S<<24)|(C<<16)|X|0}while(M!==0);O=1<<(R-1);while(P&O){O>>=1}if(O!==0){P&=O-1;P+=O}else{P=0}D++;if(--A[R]===0){if(R===Q){break}R=Z[I+H[D]]}if(R>J&&(P&N)!==aa){if(B===0){B=J}G+=K;U=R-B;w=1<<U;while(U+B<Q){w-=A[U+B];if(w<=0){break}U++;w<<=1}z+=1<<U;if((v===k&&z>n)||(v===g&&z>m)){return 1}aa=P&N;V[aa]=(J<<24)|(U<<16)|(G-T)|0}}if(P!==0){V[G+P]=((R-B)<<24)|(64<<16)|0}E.bits=J;return 0}},{"../utils/common":62}],72:[function(f,g,e){g.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],73:[function(m,k,al){var aw=m("../utils/common");var T=4;var u=0;var E=1;var F=2;function e(ay){var ax=ay.length;while(--ax>=0){ay[ax]=0}}var X=0;var an=1;var M=2;var av=3;var G=258;var r=29;var h=256;var i=h+1+r;var f=30;var x=19;var j=2*i+1;var ar=15;var A=16;var ag=7;var g=256;var J=16;var I=17;var N=18;var l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var V=512;var P=new Array((i+2)*2);e(P);var ab=new Array(f*2);e(ab);var ah=new Array(V);e(ah);var B=new Array(G-av+1);e(B);var O=new Array(r);e(O);var aq=new Array(f);e(aq);function ae(aA,az,ay,ax,aB){this.static_tree=aA;this.extra_bits=az;this.extra_base=ay;this.elems=ax;this.max_length=aB;this.has_stree=aA&&aA.length}var aj;var aa;var z;function au(ay,ax){this.dyn_tree=ay;this.max_code=0;this.stat_desc=ax}function ac(ax){return ax<256?ah[ax]:ah[256+(ax>>>7)]}function p(ay,ax){ay.pending_buf[ay.pending++]=(ax)&255;ay.pending_buf[ay.pending++]=(ax>>>8)&255}function ai(ax,az,ay){if(ax.bi_valid>(A-ay)){ax.bi_buf|=(az<<ax.bi_valid)&65535;p(ax,ax.bi_buf);ax.bi_buf=az>>(A-ax.bi_valid);ax.bi_valid+=ay-A}else{ax.bi_buf|=(az<<ax.bi_valid)&65535;ax.bi_valid+=ay}}function am(ay,az,ax){ai(ay,ax[az*2],ax[az*2+1])}function C(az,ax){var ay=0;do{ay|=az&1;az>>>=1;ay<<=1}while(--ax>0);return ay>>>1}function w(ax){if(ax.bi_valid===16){p(ax,ax.bi_buf);ax.bi_buf=0;ax.bi_valid=0}else{if(ax.bi_valid>=8){ax.pending_buf[ax.pending++]=ax.bi_buf&255;ax.bi_buf>>=8;ax.bi_valid-=8}}}function o(aL,aG){var aM=aG.dyn_tree;var aH=aG.max_code;var aK=aG.stat_desc.static_tree;var az=aG.stat_desc.has_stree;var aB=aG.stat_desc.extra_bits;var ax=aG.stat_desc.extra_base;var aJ=aG.stat_desc.max_length;var aE;var ay,aA;var aI;var aD;var aF;var aC=0;for(aI=0;aI<=ar;aI++){aL.bl_count[aI]=0}aM[aL.heap[aL.heap_max]*2+1]=0;for(aE=aL.heap_max+1;aE<j;aE++){ay=aL.heap[aE];aI=aM[aM[ay*2+1]*2+1]+1;if(aI>aJ){aI=aJ;aC++}aM[ay*2+1]=aI;if(ay>aH){continue}aL.bl_count[aI]++;aD=0;if(ay>=ax){aD=aB[ay-ax]}aF=aM[ay*2];aL.opt_len+=aF*(aI+aD);if(az){aL.static_len+=aF*(aK[ay*2+1]+aD)}}if(aC===0){return}do{aI=aJ-1;while(aL.bl_count[aI]===0){aI--}aL.bl_count[aI]--;aL.bl_count[aI+1]+=2;aL.bl_count[aJ]--;aC-=2}while(aC>0);for(aI=aJ;aI!==0;aI--){ay=aL.bl_count[aI];while(ay!==0){aA=aL.heap[--aE];if(aA>aH){continue}if(aM[aA*2+1]!==aI){aL.opt_len+=(aI-aM[aA*2+1])*aM[aA*2];aM[aA*2+1]=aI}ay--}}}function ak(ay,aE,az){var aB=new Array(ar+1);var aA=0;var aC;var aD;for(aC=1;aC<=ar;aC++){aB[aC]=aA=(aA+az[aC-1])<<1}for(aD=0;aD<=aE;aD++){var ax=ay[aD*2+1];if(ax===0){continue}ay[aD*2]=C(aB[ax]++,ax)}}function W(){var aC;var aA;var az;var ay;var aB;var ax=new Array(ar+1);az=0;for(ay=0;ay<r-1;ay++){O[ay]=az;for(aC=0;aC<(1<<l[ay]);aC++){B[az++]=ay}}B[az-1]=ay;aB=0;for(ay=0;ay<16;ay++){aq[ay]=aB;for(aC=0;aC<(1<<y[ay]);aC++){ah[aB++]=ay}}aB>>=7;for(;ay<f;ay++){aq[ay]=aB<<7;for(aC=0;aC<(1<<(y[ay]-7));aC++){ah[256+aB++]=ay}}for(aA=0;aA<=ar;aA++){ax[aA]=0}aC=0;while(aC<=143){P[aC*2+1]=8;aC++;ax[8]++}while(aC<=255){P[aC*2+1]=9;aC++;ax[9]++}while(aC<=279){P[aC*2+1]=7;aC++;ax[7]++}while(aC<=287){P[aC*2+1]=8;aC++;ax[8]++}ak(P,i+1,ax);for(aC=0;aC<f;aC++){ab[aC*2+1]=5;ab[aC*2]=C(aC,5)}aj=new ae(P,l,h+1,i,ar);aa=new ae(ab,y,0,f,ar);z=new ae(new Array(0),D,0,x,ag)}function L(ax){var ay;for(ay=0;ay<i;ay++){ax.dyn_ltree[ay*2]=0}for(ay=0;ay<f;ay++){ax.dyn_dtree[ay*2]=0}for(ay=0;ay<x;ay++){ax.bl_tree[ay*2]=0}ax.dyn_ltree[g*2]=1;ax.opt_len=ax.static_len=0;ax.last_lit=ax.matches=0}function n(ax){if(ax.bi_valid>8){p(ax,ax.bi_buf)}else{if(ax.bi_valid>0){ax.pending_buf[ax.pending++]=ax.bi_buf}}ax.bi_buf=0;ax.bi_valid=0}function t(az,ay,ax,aA){n(az);if(aA){p(az,ax);p(az,~ax)}aw.arraySet(az.pending_buf,az.window,ay,ax,az.pending);az.pending+=ax}function Z(ay,aC,ax,aB){var aA=aC*2;var az=ax*2;return(ay[aA]<ay[az]||(ay[aA]===ay[az]&&aB[aC]<=aB[ax]))}function at(aB,ax,az){var ay=aB.heap[az];var aA=az<<1;while(aA<=aB.heap_len){if(aA<aB.heap_len&&Z(ax,aB.heap[aA+1],aB.heap[aA],aB.depth)){aA++}if(Z(ax,ay,aB.heap[aA],aB.depth)){break}aB.heap[az]=aB.heap[aA];az=aA;aA<<=1}aB.heap[az]=ay}function ap(ay,aE,aB){var aD;var aA;var aC=0;var az;var ax;if(ay.last_lit!==0){do{aD=(ay.pending_buf[ay.d_buf+aC*2]<<8)|(ay.pending_buf[ay.d_buf+aC*2+1]);aA=ay.pending_buf[ay.l_buf+aC];aC++;if(aD===0){am(ay,aA,aE)}else{az=B[aA];am(ay,az+h+1,aE);ax=l[az];if(ax!==0){aA-=O[az];ai(ay,aA,ax)}aD--;az=ac(aD);am(ay,az,aB);ax=y[az];if(ax!==0){aD-=aq[az];ai(ay,aD,ax)}}}while(aC<ay.last_lit)}am(ay,g,aE)}function Y(aF,aC){var aG=aC.dyn_tree;var aE=aC.stat_desc.static_tree;var az=aC.stat_desc.has_stree;var ax=aC.stat_desc.elems;var ay,aB;var aD=-1;var aA;aF.heap_len=0;aF.heap_max=j;for(ay=0;ay<ax;ay++){if(aG[ay*2]!==0){aF.heap[++aF.heap_len]=aD=ay;aF.depth[ay]=0}else{aG[ay*2+1]=0}}while(aF.heap_len<2){aA=aF.heap[++aF.heap_len]=(aD<2?++aD:0);aG[aA*2]=1;aF.depth[aA]=0;aF.opt_len--;if(az){aF.static_len-=aE[aA*2+1]}}aC.max_code=aD;for(ay=(aF.heap_len>>1);ay>=1;ay--){at(aF,aG,ay)}aA=ax;do{ay=aF.heap[1];aF.heap[1]=aF.heap[aF.heap_len--];at(aF,aG,1);aB=aF.heap[1];aF.heap[--aF.heap_max]=ay;aF.heap[--aF.heap_max]=aB;aG[aA*2]=aG[ay*2]+aG[aB*2];aF.depth[aA]=(aF.depth[ay]>=aF.depth[aB]?aF.depth[ay]:aF.depth[aB])+1;aG[ay*2+1]=aG[aB*2+1]=aA;aF.heap[1]=aA++;at(aF,aG,1)}while(aF.heap_len>=2);aF.heap[--aF.heap_max]=aF.heap[1];o(aF,aC);ak(aG,aD,aF.bl_count)}function s(aF,aG,aE){var ay;var aC=-1;var ax;var aA=aG[0*2+1];var aB=0;var az=7;var aD=4;if(aA===0){az=138;aD=3}aG[(aE+1)*2+1]=65535;for(ay=0;ay<=aE;ay++){ax=aA;aA=aG[(ay+1)*2+1];if(++aB<az&&ax===aA){continue}else{if(aB<aD){aF.bl_tree[ax*2]+=aB}else{if(ax!==0){if(ax!==aC){aF.bl_tree[ax*2]++}aF.bl_tree[J*2]++}else{if(aB<=10){aF.bl_tree[I*2]++}else{aF.bl_tree[N*2]++}}}}aB=0;aC=ax;if(aA===0){az=138;aD=3}else{if(ax===aA){az=6;aD=3}else{az=7;aD=4}}}}function v(aF,aG,aE){var ay;var aC=-1;var ax;var aA=aG[0*2+1];var aB=0;var az=7;var aD=4;if(aA===0){az=138;aD=3}for(ay=0;ay<=aE;ay++){ax=aA;aA=aG[(ay+1)*2+1];if(++aB<az&&ax===aA){continue}else{if(aB<aD){do{am(aF,ax,aF.bl_tree)}while(--aB!==0)}else{if(ax!==0){if(ax!==aC){am(aF,ax,aF.bl_tree);aB--}am(aF,J,aF.bl_tree);ai(aF,aB-3,2)}else{if(aB<=10){am(aF,I,aF.bl_tree);ai(aF,aB-3,3)}else{am(aF,N,aF.bl_tree);ai(aF,aB-11,7)}}}}aB=0;aC=ax;if(aA===0){az=138;aD=3}else{if(ax===aA){az=6;aD=3}else{az=7;aD=4}}}}function H(ay){var ax;s(ay,ay.dyn_ltree,ay.l_desc.max_code);s(ay,ay.dyn_dtree,ay.d_desc.max_code);Y(ay,ay.bl_desc);for(ax=x-1;ax>=3;ax--){if(ay.bl_tree[U[ax]*2+1]!==0){break}}ay.opt_len+=3*(ax+1)+5+5+4;return ax}function R(ay,az,ax,aA){var aB;ai(ay,az-257,5);ai(ay,ax-1,5);ai(ay,aA-4,4);for(aB=0;aB<aA;aB++){ai(ay,ay.bl_tree[U[aB]*2+1],3)}v(ay,ay.dyn_ltree,az-1);v(ay,ay.dyn_dtree,ax-1)}function Q(ay){var ax=4093624447;var az;for(az=0;az<=31;az++,ax>>>=1){if((ax&1)&&(ay.dyn_ltree[az*2]!==0)){return u}}if(ay.dyn_ltree[9*2]!==0||ay.dyn_ltree[10*2]!==0||ay.dyn_ltree[13*2]!==0){return E}for(az=32;az<h;az++){if(ay.dyn_ltree[az*2]!==0){return E}}return u}var af=false;function K(ax){if(!af){W();af=true}ax.l_desc=new au(ax.dyn_ltree,aj);ax.d_desc=new au(ax.dyn_dtree,aa);ax.bl_desc=new au(ax.bl_tree,z);ax.bi_buf=0;ax.bi_valid=0;L(ax)}function S(az,ax,ay,aA){ai(az,(X<<1)+(aA?1:0),3);t(az,ax,ay,true)}function ad(ax){ai(ax,an<<1,3);am(ax,g,P);w(ax)}function q(aC,az,aB,aD){var ay,ax;var aA=0;if(aC.level>0){if(aC.strm.data_type===F){aC.strm.data_type=Q(aC)}Y(aC,aC.l_desc);Y(aC,aC.d_desc);aA=H(aC);ay=(aC.opt_len+3+7)>>>3;ax=(aC.static_len+3+7)>>>3;if(ax<=ay){ay=ax}}else{ay=ax=aB+5}if((aB+4<=ay)&&(az!==-1)){S(aC,az,aB,aD)}else{if(aC.strategy===T||ax===ay){ai(aC,(an<<1)+(aD?1:0),3);ap(aC,P,ab)}else{ai(aC,(M<<1)+(aD?1:0),3);R(aC,aC.l_desc.max_code+1,aC.d_desc.max_code+1,aA+1);ap(aC,aC.dyn_ltree,aC.dyn_dtree)}}L(aC);if(aD){n(aC)}}function ao(ax,az,ay){ax.pending_buf[ax.d_buf+ax.last_lit*2]=(az>>>8)&255;ax.pending_buf[ax.d_buf+ax.last_lit*2+1]=az&255;ax.pending_buf[ax.l_buf+ax.last_lit]=ay&255;ax.last_lit++;if(az===0){ax.dyn_ltree[ay*2]++}else{ax.matches++;az--;ax.dyn_ltree[(B[ay]+h+1)*2]++;ax.dyn_dtree[ac(az)*2]++}return(ax.last_lit===ax.lit_bufsize-1)}al._tr_init=K;al._tr_stored_block=S;al._tr_flush_block=q;al._tr_tally=ao;al._tr_align=ad},{"../utils/common":62}],74:[function(f,g,e){function h(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}g.exports=h},{}]},{},[10])(10)});(function(o){function a(){for(var e=0;e<R.length;e++){R[e][0](R[e][1])}R=[];O=!1}function N(f,e){R.push([f,e]);O||(O=!0,L(a,0))}function K(f,e){function l(m){M(e,m)}function g(m){Q(e,m)}try{f(l,g)}catch(k){g(k)}}function i(f){var e=f.owner,l=e.state_,e=e.data_,g=f[l];f=f.then;if("function"===typeof g){l=P;try{e=g(e)}catch(k){Q(f,k)}}h(f,e)||(l===P&&M(f,e),l===J&&Q(f,e))}function h(f,e){var l;try{if(f===e){throw new TypeError("A promises callback cannot return that same promise.")}if(e&&("function"===typeof e||"object"===typeof e)){var g=e.then;if("function"===typeof g){return g.call(e,function(m){l||(l=!0,e!==m?M(f,m):d(f,m))},function(m){l||(l=!0,Q(f,m))}),!0}}}catch(k){return l||Q(f,k),!0}return !1}function M(f,e){f!==e&&h(f,e)||d(f,e)}function d(f,e){f.state_===I&&(f.state_=c,f.data_=e,N(H,f))}function Q(f,e){f.state_===I&&(f.state_=c,f.data_=e,N(G,f))}function b(f){var e=f.then_;f.then_=void 0;for(f=0;f<e.length;f++){i(e[f])}}function H(e){e.state_=P;b(e)}function G(e){e.state_=J;b(e)}function T(e){if("function"!==typeof e){throw new TypeError("Promise constructor takes a function argument")}if(!1===this instanceof T){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}this.then_=[];K(e,this)}var S=o.Promise,F=S&&"resolve" in S&&"reject" in S&&"all" in S&&"race" in S&&function(){var e;new S(function(f){e=f});return"function"===typeof e}();"undefined"!==typeof exports&&exports?(exports.Promise=F?S:T,exports.Polyfill=T):"function"==typeof define&&define.amd?define(function(){return F?S:T}):F||(o.Promise=T);var I="pending",c="sealed",P="fulfilled",J="rejected",j=function(){},L="undefined"!==typeof setImmediate?setImmediate:setTimeout,R=[],O;T.prototype={constructor:T,state_:I,then_:null,data_:void 0,then:function(f,e){var g={owner:this,then:new this.constructor(j),fulfilled:f,rejected:e};this.state_===P||this.state_===J?N(i,g):this.then_.push(g);return g.then},"catch":function(e){return this.then(null,e)}};T.all=function(e){if("[object Array]"!==Object.prototype.toString.call(e)){throw new TypeError("You must pass an array to Promise.all().")}return new this(function(k,r){function l(f){p++;return function(g){q[f]=g;--p||k(q)}}for(var q=[],p=0,n=0,m;n<e.length;n++){(m=e[n])&&"function"===typeof m.then?m.then(l(n),r):q[n]=m}p||k(q)})};T.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e)){throw new TypeError("You must pass an array to Promise.race().")}return new this(function(f,l){for(var g=0,k;g<e.length;g++){(k=e[g])&&"function"===typeof k.then?k.then(f,l):f(k)}})};T.resolve=function(e){return e&&"object"===typeof e&&e.constructor===this?e:new this(function(f){f(e)})};T.reject=function(e){return new this(function(f,g){g(e)})}})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator))||(function(l){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var m=l.document,i=function(){return l.URL||l.webkitURL||l},p=m.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download" in p,q=function(s){var r=m.createEvent("MouseEvents");r.initMouseEvent("click",true,false,l,0,0,0,0,0,false,false,false,false,0,null);s.dispatchEvent(r)},g=l.webkitRequestFileSystem,n=l.requestFileSystem||g||l.mozRequestFileSystem,e=function(r){(l.setImmediate||l.setTimeout)(function(){throw r},0)},k="application/octet-stream",h=0,c=10,o=function(s){var r=function(){if(typeof s==="string"){i().revokeObjectURL(s)}else{s.remove()}};if(l.chrome){r()}else{setTimeout(r,c)}},j=function(s,r,v){r=[].concat(r);var u=r.length;while(u--){var w=s["on"+r[u]];if(typeof w==="function"){try{w.call(s,v||s)}catch(t){e(t)}}}},b=function(r,s){var t=this,z=r.type,C=false,v,u,y=function(){j(t,"writestart progress write writeend".split(" "))},B=function(){if(C||!v){v=i().createObjectURL(r)}if(u){u.location.href=v}else{var D=l.open(v,"_blank");if(D==undefined&&typeof safari!=="undefined"){l.location.href=v}}t.readyState=t.DONE;y();o(v)},x=function(D){return function(){if(t.readyState!==t.DONE){return D.apply(this,arguments)}}},w={create:true,exclusive:false},A;t.readyState=t.INIT;if(!s){s="download"}if(d){v=i().createObjectURL(r);p.href=v;p.download=s;q(p);t.readyState=t.DONE;y();o(v);return}if(l.chrome&&z&&z!==k){A=r.slice||r.webkitSlice;r=A.call(r,0,r.size,k);C=true}if(g&&s!=="download"){s+=".download"}if(z===k||g){u=l}if(!n){B();return}h+=r.size;n(l.TEMPORARY,h,x(function(D){D.root.getDirectory("saved",w,x(function(E){var F=function(){E.getFile(s,w,x(function(G){G.createWriter(x(function(H){H.onwriteend=function(I){u.location.href=G.toURL();t.readyState=t.DONE;j(t,"writeend",I);o(G)};H.onerror=function(){var I=H.error;if(I.code!==I.ABORT_ERR){B()}};"writestart progress write abort".split(" ").forEach(function(I){H["on"+I]=t["on"+I]});H.write(r);t.abort=function(){H.abort();t.readyState=t.DONE};t.readyState=t.WRITING}),B)}),B)};E.getFile(s,{create:false},x(function(G){G.remove();F()}),x(function(G){if(G.code===G.NOT_FOUND_ERR){F()}else{B()}}))}),B)}),B)},a=b.prototype,f=function(r,s){return new b(r,s)};a.abort=function(){var r=this;r.readyState=r.DONE;j(r,"abort")};a.readyState=a.INIT=0;a.WRITING=1;a.DONE=2;a.error=a.onwritestart=a.onprogress=a.onwrite=a.onabort=a.onerror=a.onwriteend=null;return f}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content));if(typeof module!=="undefined"&&module!==null){module.exports=saveAs}else{if((typeof define!=="undefined"&&define!==null)&&(define.amd!=null)){define([],function(){return saveAs})}}function X2JS(v){var q="1.1.5";v=v||{};h();r();function h(){if(v.escapeMode===undefined){v.escapeMode=true}v.attributePrefix=v.attributePrefix||"_";v.arrayAccessForm=v.arrayAccessForm||"none";v.emptyNodeForm=v.emptyNodeForm||"text";if(v.enableToStringFunc===undefined){v.enableToStringFunc=true}v.arrayAccessFormPaths=v.arrayAccessFormPaths||[];if(v.skipEmptyTextNodesForObj===undefined){v.skipEmptyTextNodesForObj=true}if(v.stripWhitespaces===undefined){v.stripWhitespaces=true}v.datetimeAccessFormPaths=v.datetimeAccessFormPaths||[]}var g={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function r(){function x(z){var y=String(z);if(y.length===1){y="0"+y}return y}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}}if(typeof Date.prototype.toISOString!=="function"){Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+x(this.getUTCMonth()+1)+"-"+x(this.getUTCDate())+"T"+x(this.getUTCHours())+":"+x(this.getUTCMinutes())+":"+x(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}}function t(x){var y=x.localName;if(y==null){y=x.baseName}if(y==null||y==""){y=x.nodeName}return y}function o(x){return x.prefix}function p(x){if(typeof(x)=="string"){return x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}else{return x}}function j(x){return x.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function l(B,y,A){switch(v.arrayAccessForm){case"property":if(!(B[y] instanceof Array)){B[y+"_asArray"]=[B[y]]}else{B[y+"_asArray"]=B[y]}break}if(!(B[y] instanceof Array)&&v.arrayAccessFormPaths.length>0){var x=0;for(;x<v.arrayAccessFormPaths.length;x++){var z=v.arrayAccessFormPaths[x];if(typeof z==="string"){if(z==A){break}}else{if(z instanceof RegExp){if(z.test(A)){break}}else{if(typeof z==="function"){if(z(B,y,A)){break}}}}}if(x!=v.arrayAccessFormPaths.length){B[y]=[B[y]]}}}function a(C){var A=C.split(/[-T:+Z]/g);var B=new Date(A[0],A[1]-1,A[2]);var z=A[5].split(".");B.setHours(A[3],A[4],z[0]);if(z.length>1){B.setMilliseconds(z[1])}if(A[6]&&A[7]){var y=A[6]*60+Number(A[7]);var x=/\d\d-\d\d:\d\d$/.test(C)?"-":"+";y=0+(x=="-"?-1*y:y);B.setMinutes(B.getMinutes()-y-B.getTimezoneOffset())}else{if(C.indexOf("Z",C.length-1)!==-1){B=new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),B.getMilliseconds()))}}return B}function n(A,y,z){if(v.datetimeAccessFormPaths.length>0){var B=z.split(".#")[0];var x=0;for(;x<v.datetimeAccessFormPaths.length;x++){var C=v.datetimeAccessFormPaths[x];if(typeof C==="string"){if(C==B){break}}else{if(C instanceof RegExp){if(C.test(B)){break}}else{if(typeof C==="function"){if(C(obj,y,B)){break}}}}}if(x!=v.datetimeAccessFormPaths.length){return a(A)}else{return A}}else{return A}}function w(z,E){if(z.nodeType==g.DOCUMENT_NODE){var F=new Object();var x=z.childNodes;for(var G=0;G<x.length;G++){var y=x.item(G);if(y.nodeType==g.ELEMENT_NODE){var D=t(y);F[D]=w(y,D)}}return F}else{if(z.nodeType==g.ELEMENT_NODE){var F=new Object();F.__cnt=0;var x=z.childNodes;for(var G=0;G<x.length;G++){var y=x.item(G);var D=t(y);if(y.nodeType!=g.COMMENT_NODE){F.__cnt++;if(F[D]==null){F[D]=w(y,E+"."+D);l(F,D,E+"."+D)}else{if(F[D]!=null){if(!(F[D] instanceof Array)){F[D]=[F[D]];l(F,D,E+"."+D)}}(F[D])[F[D].length]=w(y,E+"."+D)}}}for(var A=0;A<z.attributes.length;A++){var B=z.attributes.item(A);F.__cnt++;F[v.attributePrefix+B.name]=B.value}var C=o(z);if(C!=null&&C!=""){F.__cnt++;F.__prefix=C}if(F["#text"]!=null){F.__text=F["#text"];if(F.__text instanceof Array){F.__text=F.__text.join("\n")}if(v.escapeMode){F.__text=j(F.__text)}if(v.stripWhitespaces){F.__text=F.__text.trim()}delete F["#text"];if(v.arrayAccessForm=="property"){delete F["#text_asArray"]}F.__text=n(F.__text,D,E+"."+D)}if(F["#cdata-section"]!=null){F.__cdata=F["#cdata-section"];delete F["#cdata-section"];if(v.arrayAccessForm=="property"){delete F["#cdata-section_asArray"]}}if(F.__cnt==1&&F.__text!=null){F=F.__text}else{if(F.__cnt==0&&v.emptyNodeForm=="text"){F=""}else{if(F.__cnt>1&&F.__text!=null&&v.skipEmptyTextNodesForObj){if((v.stripWhitespaces&&F.__text=="")||(F.__text.trim()=="")){delete F.__text}}}}delete F.__cnt;if(v.enableToStringFunc&&(F.__text!=null||F.__cdata!=null)){F.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}}return F}else{if(z.nodeType==g.TEXT_NODE||z.nodeType==g.CDATA_SECTION_NODE){return z.nodeValue}}}}function m(E,B,D,y){var A="<"+((E!=null&&E.__prefix!=null)?(E.__prefix+":"):"")+B;if(D!=null){for(var C=0;C<D.length;C++){var z=D[C];var x=E[z];if(v.escapeMode){x=p(x)}A+=" "+z.substr(v.attributePrefix.length)+"='"+x+"'"}}if(!y){A+=">"}else{A+="/>"}return A}function i(y,x){return"</"+(y.__prefix!=null?(y.__prefix+":"):"")+x+">"}function s(y,x){return y.indexOf(x,y.length-x.length)!==-1}function u(y,x){if((v.arrayAccessForm=="property"&&s(x.toString(),("_asArray")))||x.toString().indexOf(v.attributePrefix)==0||x.toString().indexOf("__")==0||(y[x] instanceof Function)){return true}else{return false}}function k(z){var y=0;if(z instanceof Object){for(var x in z){if(u(z,x)){continue}y++}}return y}function b(z){var y=[];if(z instanceof Object){for(var x in z){if(x.toString().indexOf("__")==-1&&x.toString().indexOf(v.attributePrefix)==0){y.push(x)}}}return y}function f(y){var x="";if(y.__cdata!=null){x+="<![CDATA["+y.__cdata+"]]>"}if(y.__text!=null){if(v.escapeMode){x+=p(y.__text)}else{x+=y.__text}}return x}function c(y){var x="";if(y instanceof Object){x+=f(y)}else{if(y!=null){if(v.escapeMode){x+=p(y)}else{x+=y}}}return x}function e(z,B,A){var x="";if(z.length==0){x+=m(z,B,A,true)}else{for(var y=0;y<z.length;y++){x+=m(z[y],B,b(z[y]),false);x+=d(z[y]);x+=i(z[y],B)}}return x}function d(D){var x="";var B=k(D);if(B>0){for(var A in D){if(u(D,A)){continue}var z=D[A];var C=b(z);if(z==null||z==undefined){x+=m(z,A,C,true)}else{if(z instanceof Object){if(z instanceof Array){x+=e(z,A,C)}else{if(z instanceof Date){x+=m(z,A,C,false);x+=z.toISOString();x+=i(z,A)}else{var y=k(z);if(y>0||z.__text!=null||z.__cdata!=null){x+=m(z,A,C,false);x+=d(z);x+=i(z,A)}else{x+=m(z,A,C,true)}}}}else{x+=m(z,A,C,false);x+=c(z);x+=i(z,A)}}}}x+=c(D);return x}this.parseXmlString=function(z){var B=window.ActiveXObject||"ActiveXObject" in window;if(z===undefined){return null}var A;if(window.DOMParser){var C=new window.DOMParser();var x=null;if(!B){try{x=C.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(y){x=null}}try{A=C.parseFromString(z,"text/xml");if(x!=null&&A.getElementsByTagNameNS(x,"parsererror").length>0){A=null}}catch(y){A=null}}else{if(z.indexOf("<?")==0){z=z.substr(z.indexOf("?>")+2)}A=new ActiveXObject("Microsoft.XMLDOM");A.async="false";A.loadXML(z)}return A};this.asArray=function(x){if(x instanceof Array){return x}else{return[x]}};this.toXmlDateTime=function(x){if(x instanceof Date){return x.toISOString()}else{if(typeof(x)==="number"){return new Date(x).toISOString()}else{return null}}};this.asDateTime=function(x){if(typeof(x)=="string"){return a(x)}else{return x}};this.xml2json=function(x){return w(x)};this.xml_str2json=function(x){var y=this.parseXmlString(x);if(y!=null){return this.xml2json(y)}else{return null}};this.json2xml_str=function(x){return d(x)};this.json2xml=function(y){var x=this.json2xml_str(y);return this.parseXmlString(x)};this.getVersion=function(){return q}}
/*!

 diff v2.2.2

Software License Agreement (BSD License)

Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>

All rights reserved.

Redistribution and use of this software in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above
  copyright notice, this list of conditions and the
  following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the
  following disclaimer in the documentation and/or other
  materials provided with the distribution.

* Neither the name of Kevin Decker nor the names of its
  contributors may be used to endorse or promote products
  derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
@license
*/
!function(d,c){"object"==typeof exports&&"object"==typeof module?module.exports=c():"function"==typeof define&&define.amd?define([],c):"object"==typeof exports?exports.JsDiff=c():d.JsDiff=c()}(this,function(){return function(e){function d(b){if(f[b]){return f[b].exports}var a=f[b]={exports:{},id:b,loaded:!1};return e[b].call(a.exports,a,a.exports,d),a.loaded=!0,a.exports}var f={};return d.m=e,d.c=f,d.p="",d(0)}([function(H,G,F){function E(b){return b&&b.__esModule?b:{"default":b}}G.__esModule=!0,G.canonicalize=G.convertChangesToXML=G.convertChangesToDMP=G.parsePatch=G.applyPatches=G.applyPatch=G.createPatch=G.createTwoFilesPatch=G.structuredPatch=G.diffJson=G.diffCss=G.diffSentences=G.diffTrimmedLines=G.diffLines=G.diffWordsWithSpace=G.diffWords=G.diffChars=G.Diff=void 0;var D=F(1),C=E(D),B=F(2),A=F(3),z=F(5),y=F(6),x=F(7),w=F(8),v=F(9),u=F(10),t=F(12),s=F(13),r=F(14);G.Diff=C["default"],G.diffChars=B.diffChars,G.diffWords=A.diffWords,G.diffWordsWithSpace=A.diffWordsWithSpace,G.diffLines=z.diffLines,G.diffTrimmedLines=z.diffTrimmedLines,G.diffSentences=y.diffSentences,G.diffCss=x.diffCss,G.diffJson=w.diffJson,G.structuredPatch=t.structuredPatch,G.createTwoFilesPatch=t.createTwoFilesPatch,G.createPatch=t.createPatch,G.applyPatch=v.applyPatch,G.applyPatches=v.applyPatches,G.parsePatch=u.parsePatch,G.convertChangesToDMP=s.convertChangesToDMP,G.convertChangesToXML=r.convertChangesToXML,G.canonicalize=w.canonicalize},function(g,f){function j(){}function i(z,y,x,w,v){for(var u=0,t=y.length,s=0,r=0;t>u;u++){var q=y[u];if(q.removed){if(q.value=w.slice(r,r+q.count).join(""),r+=q.count,u&&y[u-1].added){var p=y[u-1];y[u-1]=y[u],y[u]=p}}else{if(!q.added&&v){var o=x.slice(s,s+q.count);o=o.map(function(e,d){var k=w[r+d];return k.length>e.length?k:e}),q.value=o.join("")}else{q.value=x.slice(s,s+q.count).join("")}s+=q.count,q.added||(r+=q.count)}}var n=y[t-1];return t>1&&(n.added||n.removed)&&z.equals("",n.value)&&(y[t-2].value+=n.value,y.pop()),y}function h(b){return{newPos:b.newPos,components:b.components.slice(0)}}f.__esModule=!0,f["default"]=j,j.prototype={diff:function(D,C){function B(b){return y?(setTimeout(function(){y(void 0,b)},0),!0):b}function A(){for(var l=-1*u;u>=l;l+=2){var c=void 0,b=s[l-1],a=s[l+1],E=(a?a.newPos:0)-l;b&&(s[l-1]=void 0);var n=b&&b.newPos+1<w,k=a&&E>=0&&v>E;if(n||k){if(!n||k&&b.newPos<a.newPos?(c=h(a),x.pushComponent(c.components,void 0,!0)):(c=b,c.newPos++,x.pushComponent(c.components,!0,void 0)),E=x.extractCommon(c,C,D,l),c.newPos+1>=w&&E+1>=v){return B(i(x,c.components,C,D,x.useLongestToken))}s[l]=c}else{s[l]=void 0}}u++}var z=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],y=z.callback;"function"==typeof z&&(y=z,z={}),this.options=z;var x=this;D=this.castInput(D),C=this.castInput(C),D=this.removeEmpty(this.tokenize(D)),C=this.removeEmpty(this.tokenize(C));var w=C.length,v=D.length,u=1,t=w+v,s=[{newPos:-1,components:[]}],r=this.extractCommon(s[0],C,D,0);if(s[0].newPos+1>=w&&r+1>=v){return B([{value:C.join(""),count:C.length}])}if(y){!function d(){setTimeout(function(){return u>t?y():void (A()||d())},0)}()}else{for(;t>=u;){var e=A();if(e){return e}}}},pushComponent:function(k,e,m){var l=k[k.length-1];l&&l.added===e&&l.removed===m?k[k.length-1]={count:l.count+1,added:e,removed:m}:k.push({count:1,added:e,removed:m})},extractCommon:function(s,r,q,p){for(var o=r.length,n=q.length,m=s.newPos,l=m-p,k=0;o>m+1&&n>l+1&&this.equals(r[m+1],q[l+1]);){m++,l++,k++}return k&&s.components.push({count:k}),s.newPos=m,l},equals:function(d,c){return d===c},removeEmpty:function(e){for(var d=[],k=0;k<e.length;k++){e[k]&&d.push(e[k])}return d},castInput:function(b){return b},tokenize:function(b){return b.split("")}}},function(j,i,p){function o(b){return b&&b.__esModule?b:{"default":b}}function n(e,d,f){return k.diff(e,d,f)}i.__esModule=!0,i.characterDiff=void 0,i.diffChars=n;var m=p(1),l=o(m),k=i.characterDiff=new l["default"]()},function(x,w,v){function u(b){return b&&b.__esModule?b:{"default":b}}function t(f,e,h){var g=(0,p.generateOptions)(h,{ignoreWhitespace:!0});return m.diff(f,e,g)}function s(e,d,f){return m.diff(e,d,f)}w.__esModule=!0,w.wordDiff=void 0,w.diffWords=t,w.diffWordsWithSpace=s;var r=v(1),q=u(r),p=v(4),o=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,n=/\S/,m=w.wordDiff=new q["default"]();m.equals=function(d,c){return d===c||this.options.ignoreWhitespace&&!n.test(d)&&!n.test(c)},m.tokenize=function(e){for(var d=e.split(/(\s+|\b)/),f=0;f<d.length-1;f++){!d[f+1]&&d[f+2]&&o.test(d[f])&&o.test(d[f+2])&&(d[f]+=d[f+2],d.splice(f+1,2),f--)}return d}},function(e,d){function f(h,g){if("function"==typeof h){g.callback=h}else{if(h){for(var i in h){h.hasOwnProperty(i)&&(g[i]=h[i])}}}return g}d.__esModule=!0,d.generateOptions=f},function(t,s,r){function q(b){return b&&b.__esModule?b:{"default":b}}function p(e,d,f){return k.diff(e,d,f)}function o(f,e,h){var g=(0,l.generateOptions)(h,{ignoreWhitespace:!0});return k.diff(f,e,g)}s.__esModule=!0,s.lineDiff=void 0,s.diffLines=p,s.diffTrimmedLines=o;var n=r(1),m=q(n),l=r(4),k=s.lineDiff=new m["default"]();k.tokenize=function(g){var f=[],j=g.split(/(\n|\r\n)/);j[j.length-1]||j.pop();for(var i=0;i<j.length;i++){var h=j[i];i%2&&!this.options.newlineIsToken?f[f.length-1]+=h:(this.options.ignoreWhitespace&&(h=h.trim()),f.push(h))}return f}},function(j,i,p){function o(b){return b&&b.__esModule?b:{"default":b}}function n(e,d,f){return k.diff(e,d,f)}i.__esModule=!0,i.sentenceDiff=void 0,i.diffSentences=n;var m=p(1),l=o(m),k=i.sentenceDiff=new l["default"]();k.tokenize=function(b){return b.split(/(\S.+?[.!?])(?=\s+|$)/)}},function(j,i,p){function o(b){return b&&b.__esModule?b:{"default":b}}function n(e,d,f){return k.diff(e,d,f)}i.__esModule=!0,i.cssDiff=void 0,i.diffCss=n;var m=p(1),l=o(m),k=i.cssDiff=new l["default"]();k.tokenize=function(b){return b.split(/([{}:;,]|\s+)/)}},function(x,w,v){function u(b){return b&&b.__esModule?b:{"default":b}}function t(e,d,f){return m.diff(e,d,f)}function s(g,f,z){f=f||[],z=z||[];var y=void 0;for(y=0;y<f.length;y+=1){if(f[y]===g){return z[y]}}var l=void 0;if("[object Array]"===n.call(g)){for(f.push(g),l=new Array(g.length),z.push(l),y=0;y<g.length;y+=1){l[y]=s(g[y],f,z)}return f.pop(),z.pop(),l}if(g&&g.toJSON&&(g=g.toJSON()),"object"===("undefined"==typeof g?"undefined":r(g))&&null!==g){f.push(g),l={},z.push(l);var k=[],j=void 0;for(j in g){g.hasOwnProperty(j)&&k.push(j)}for(k.sort(),y=0;y<k.length;y+=1){j=k[y],l[j]=s(g[j],f,z)}f.pop(),z.pop()}else{l=g}return l}w.__esModule=!0,w.jsonDiff=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol?"symbol":typeof b};w.diffJson=t,w.canonicalize=s;var q=v(1),p=u(q),o=v(5),n=Object.prototype.toString,m=w.jsonDiff=new p["default"]();m.useLongestToken=!0,m.tokenize=o.lineDiff.tokenize,m.castInput=function(b){return"string"==typeof b?b:JSON.stringify(s(b),void 0,"  ")},m.equals=function(d,c){return p["default"].prototype.equals(d.replace(/,([\r\n])/g,"$1"),c.replace(/,([\r\n])/g,"$1"))}},function(r,q,p){function o(b){return b&&b.__esModule?b:{"default":b}}function n(ab,aa){function Z(h,e){for(var v=0;v<h.lines.length;v++){var u=h.lines[v],t=u[0],s=u.substr(1);if(" "===t||"-"===t){if(!V(e+1,X[e],t,s)&&(U++,U>T)){return !1}e++}}return !0}var Y=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if("string"==typeof aa&&(aa=(0,l.parsePatch)(aa)),Array.isArray(aa)){if(aa.length>1){throw new Error("applyPatch only works with a single input.")}aa=aa[0]}for(var X=ab.split("\n"),W=aa.hunks,V=Y.compareLine||function(f,e,s,h){return e===h},U=0,T=Y.fuzzFactor||0,S=0,R=0,Q=void 0,P=void 0,O=0;O<W.length;O++){for(var M=W[O],K=X.length-M.oldLines,I=0,H=R+M.oldStart-1,G=(0,j["default"])(H,S,K);void 0!==I;I=G()){if(Z(M,H+I)){M.offset=R+=I;break}}if(void 0===I){return !1}S=M.offset+M.oldStart+M.oldLines}for(var F=0;F<W.length;F++){for(var E=W[F],D=E.offset+E.newStart-1,i=0;i<E.lines.length;i++){var g=E.lines[i],N=g[0],L=g.substr(1);if(" "===N){D++}else{if("-"===N){X.splice(D,1)}else{if("+"===N){X.splice(D,0,L),D++}else{if("\\"===N){var J=E.lines[i-1]?E.lines[i-1][0]:null;"+"===J?Q=!0:"-"===J&&(P=!0)}}}}}}if(Q){for(;!X[X.length-1];){X.pop()}}else{P&&X.push("")}return X.join("\n")}function m(f,e){function h(){var a=f[g++];return a?void e.loadFile(a,function(b,i){if(b){return e.complete(b)}var c=n(i,a,e);e.patched(a,c),setTimeout(h,0)}):e.complete()}"string"==typeof f&&(f=(0,l.parsePatch)(f));var g=0;h()}q.__esModule=!0,q.applyPatch=n,q.applyPatches=m;var l=p(10),k=p(11),j=o(k)},function(e,d){function f(j){function i(){var g={};for(l.push(g);k<m.length;){var c=m[k];if(/^(\-\-\-|\+\+\+|@@)\s/.test(c)){break}var q=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(c);q&&(g.index=q[1]),k++}for(p(g),p(g),g.hunks=[];k<m.length;){var h=m[k];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(h)){break}if(/^@@/.test(h)){g.hunks.push(o())}else{if(h&&n.strict){throw new Error("Unknown line "+(k+1)+" "+JSON.stringify(h))}k++}}}function p(h){var g=/^(\-\-\-|\+\+\+)\s+(\S*)\s?(.*?)\s*$/.exec(m[k]);if(g){var q="---"===g[1]?"old":"new";h[q+"FileName"]=g[2],h[q+"Header"]=g[3],k++}}function o(){for(var q=k,h=m[k++],v=h.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),u={oldStart:+v[1],oldLines:+v[2]||1,newStart:+v[3],newLines:+v[4]||1,lines:[]},t=0,s=0;k<m.length;k++){var r=m[k][0];if("+"!==r&&"-"!==r&&" "!==r&&"\\"!==r){break}u.lines.push(m[k]),"+"===r?t++:"-"===r?s++:" "===r&&(t++,s++)}if(t||1!==u.newLines||(u.newLines=0),s||1!==u.oldLines||(u.oldLines=0),n.strict){if(t!==u.newLines){throw new Error("Added line count did not match for hunk at line "+(q+1))}if(s!==u.oldLines){throw new Error("Removed line count did not match for hunk at line "+(q+1))}}return u}for(var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],m=j.split("\n"),l=[],k=0;k<m.length;){i()}return l}d.__esModule=!0,d.parsePatch=f},function(d,c){c.__esModule=!0,c["default"]=function(j,i,p){var o=!0,n=!1,m=!1,l=1;return function k(){if(o&&!m){if(n?l++:o=!1,p>=j+l){return l}m=!0}return n?void 0:(m||(o=!0),j-l>=i?-l++:(n=!0,k()))}}},function(j,i,p){function o(e){if(Array.isArray(e)){for(var d=0,f=Array(e.length);d<e.length;d++){f[d]=e[d]}return f}return Array.from(e)}function n(G,F,E,D,C,B,A){function z(b){return b.map(function(c){return" "+c})}A||(A={context:4});var y=(0,k.diffLines)(E,D);y.push({value:"",lines:[]});for(var x=[],w=0,v=0,u=[],t=1,h=1,d=function(K){var J=y[K],I=J.lines||J.value.replace(/\n$/,"").split("\n");if(J.lines=I,J.added||J.removed){var q;if(!w){var e=y[K-1];w=t,v=h,e&&(u=A.context>0?z(e.lines.slice(-A.context)):[],w-=u.length,v-=u.length)}(q=u).push.apply(q,o(I.map(function(b){return(J.added?"+":"-")+b}))),J.added?h+=I.length:t+=I.length}else{if(w){if(I.length<=2*A.context&&K<y.length-2){var c;(c=u).push.apply(c,o(z(I)))}else{var P,O=Math.min(I.length,A.context);(P=u).push.apply(P,o(z(I.slice(0,O))));var N={oldStart:w,oldLines:t-w+O,newStart:v,newLines:h-v+O,lines:u};if(K>=y.length-2&&I.length<=A.context){var M=/\n$/.test(E),L=/\n$/.test(D);0!=I.length||M?M&&L||u.push("\\ No newline at end of file"):u.splice(N.oldLines,0,"\\ No newline at end of file")}x.push(N),w=0,v=0,u=[]}}t+=I.length,h+=I.length}},H=0;H<y.length;H++){d(H)}return{oldFileName:G,newFileName:F,oldHeader:C,newHeader:B,hunks:x}}function m(z,y,x,w,v,u,t){var s=n(z,y,x,w,v,u,t),r=[];z==y&&r.push("Index: "+z),r.push("==================================================================="),r.push("--- "+s.oldFileName+("undefined"==typeof s.oldHeader?"":"\t"+s.oldHeader)),r.push("+++ "+s.newFileName+("undefined"==typeof s.newHeader?"":"\t"+s.newHeader));for(var q=0;q<s.hunks.length;q++){var e=s.hunks[q];r.push("@@ -"+e.oldStart+","+e.oldLines+" +"+e.newStart+","+e.newLines+" @@"),r.push.apply(r,e.lines)}return r.join("\n")+"\n"}function l(h,f,t,s,r,q){return m(h,h,f,t,s,r,q)}i.__esModule=!0,i.structuredPatch=n,i.createTwoFilesPatch=m,i.createPatch=l;var k=p(5)},function(e,d){function f(h){for(var g=[],k=void 0,j=void 0,i=0;i<h.length;i++){k=h[i],j=k.added?1:k.removed?-1:0,g.push([j,k.value])}return g}d.__esModule=!0,d.convertChangesToDMP=f},function(f,e){function h(i){for(var d=[],k=0;k<i.length;k++){var j=i[k];j.added?d.push("<ins>"):j.removed&&d.push("<del>"),d.push(g(j.value)),j.added?d.push("</ins>"):j.removed&&d.push("</del>")}return d.join("")}function g(d){var c=d;return c=c.replace(/&/g,"&amp;"),c=c.replace(/</g,"&lt;"),c=c.replace(/>/g,"&gt;"),c=c.replace(/"/g,"&quot;")}e.__esModule=!0,e.convertChangesToXML=h}])});Ext.application({name:"FBEditor",extend:FBEditor.Application,autoCreateViewport:"FBEditor.view.main.Main"});