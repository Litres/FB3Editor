var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.header){Ext.grid.header={}}if(!Ext.grid.locking){Ext.grid.locking={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.locale){Ext.locale={}}if(!Ext.locale.ru){Ext.locale.ru={}}if(!Ext.locale.ru.form){Ext.locale.ru.form={}}if(!Ext.locale.ru.form.field){Ext.locale.ru.form.field={}}if(!Ext.locale.ru.grid){Ext.locale.ru.grid={}}if(!Ext.locale.ru.grid.header){Ext.locale.ru.grid.header={}}if(!Ext.locale.ru.grid.plugin){Ext.locale.ru.grid.plugin={}}if(!Ext.locale.ru.picker){Ext.locale.ru.picker={}}if(!Ext.locale.ru.tab){Ext.locale.ru.tab={}}if(!Ext.locale.ru.toolbar){Ext.locale.ru.toolbar={}}if(!Ext.locale.ru.view){Ext.locale.ru.view={}}if(!Ext.locale.ru.window){Ext.locale.ru.window={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.picker){Ext.picker={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.state){Ext.state={}}if(!Ext.tab){Ext.tab={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.tree){Ext.tree={}}if(!Ext.util){Ext.util={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var ExtThemeNeptune=ExtThemeNeptune||{};if(!ExtThemeNeptune.form){ExtThemeNeptune.form={}}if(!ExtThemeNeptune.form.field){ExtThemeNeptune.form.field={}}if(!ExtThemeNeptune.layout){ExtThemeNeptune.layout={}}if(!ExtThemeNeptune.layout.component){ExtThemeNeptune.layout.component={}}if(!ExtThemeNeptune.menu){ExtThemeNeptune.menu={}}if(!ExtThemeNeptune.panel){ExtThemeNeptune.panel={}}if(!ExtThemeNeptune.picker){ExtThemeNeptune.picker={}}if(!ExtThemeNeptune.resizer){ExtThemeNeptune.resizer={}}if(!ExtThemeNeptune.toolbar){ExtThemeNeptune.toolbar={}}var FBEditor=FBEditor||{};if(!FBEditor.FB3){FBEditor.FB3={}}if(!FBEditor.FB3.rels){FBEditor.FB3.rels={}}if(!FBEditor.command){FBEditor.command={}}if(!FBEditor.converter){FBEditor.converter={}}if(!FBEditor.converter.contentTypes){FBEditor.converter.contentTypes={}}if(!FBEditor.converter.desc){FBEditor.converter.desc={}}if(!FBEditor.desc){FBEditor.desc={}}if(!FBEditor.editor){FBEditor.editor={}}if(!FBEditor.editor.command){FBEditor.editor.command={}}if(!FBEditor.editor.command.a){FBEditor.editor.command.a={}}if(!FBEditor.editor.command.annotation){FBEditor.editor.command.annotation={}}if(!FBEditor.editor.command.blockquote){FBEditor.editor.command.blockquote={}}if(!FBEditor.editor.command.br){FBEditor.editor.command.br={}}if(!FBEditor.editor.command.code){FBEditor.editor.command.code={}}if(!FBEditor.editor.command.div){FBEditor.editor.command.div={}}if(!FBEditor.editor.command.em){FBEditor.editor.command.em={}}if(!FBEditor.editor.command.epigraph){FBEditor.editor.command.epigraph={}}if(!FBEditor.editor.command.img){FBEditor.editor.command.img={}}if(!FBEditor.editor.command.li){FBEditor.editor.command.li={}}if(!FBEditor.editor.command.note){FBEditor.editor.command.note={}}if(!FBEditor.editor.command.notebody){FBEditor.editor.command.notebody={}}if(!FBEditor.editor.command.notes){FBEditor.editor.command.notes={}}if(!FBEditor.editor.command.ol){FBEditor.editor.command.ol={}}if(!FBEditor.editor.command.p){FBEditor.editor.command.p={}}if(!FBEditor.editor.command.poem){FBEditor.editor.command.poem={}}if(!FBEditor.editor.command.pre){FBEditor.editor.command.pre={}}if(!FBEditor.editor.command.section){FBEditor.editor.command.section={}}if(!FBEditor.editor.command.spacing){FBEditor.editor.command.spacing={}}if(!FBEditor.editor.command.stanza){FBEditor.editor.command.stanza={}}if(!FBEditor.editor.command.strikethrough){FBEditor.editor.command.strikethrough={}}if(!FBEditor.editor.command.strong){FBEditor.editor.command.strong={}}if(!FBEditor.editor.command.styleholder){FBEditor.editor.command.styleholder={}}if(!FBEditor.editor.command.sub){FBEditor.editor.command.sub={}}if(!FBEditor.editor.command.subscription){FBEditor.editor.command.subscription={}}if(!FBEditor.editor.command.subtitle){FBEditor.editor.command.subtitle={}}if(!FBEditor.editor.command.sup){FBEditor.editor.command.sup={}}if(!FBEditor.editor.command.table){FBEditor.editor.command.table={}}if(!FBEditor.editor.command.text){FBEditor.editor.command.text={}}if(!FBEditor.editor.command.title){FBEditor.editor.command.title={}}if(!FBEditor.editor.command.ul){FBEditor.editor.command.ul={}}if(!FBEditor.editor.command.underline){FBEditor.editor.command.underline={}}if(!FBEditor.editor.element){FBEditor.editor.element={}}if(!FBEditor.editor.element.a){FBEditor.editor.element.a={}}if(!FBEditor.editor.element.annotation){FBEditor.editor.element.annotation={}}if(!FBEditor.editor.element.b){FBEditor.editor.element.b={}}if(!FBEditor.editor.element.blockquote){FBEditor.editor.element.blockquote={}}if(!FBEditor.editor.element.body){FBEditor.editor.element.body={}}if(!FBEditor.editor.element.br){FBEditor.editor.element.br={}}if(!FBEditor.editor.element.code){FBEditor.editor.element.code={}}if(!FBEditor.editor.element.desc){FBEditor.editor.element.desc={}}if(!FBEditor.editor.element.desc.annotation){FBEditor.editor.element.desc.annotation={}}if(!FBEditor.editor.element.desc.bibliodescription){FBEditor.editor.element.desc.bibliodescription={}}if(!FBEditor.editor.element.desc.history){FBEditor.editor.element.desc.history={}}if(!FBEditor.editor.element.desc.preamble){FBEditor.editor.element.desc.preamble={}}if(!FBEditor.editor.element.div){FBEditor.editor.element.div={}}if(!FBEditor.editor.element.em){FBEditor.editor.element.em={}}if(!FBEditor.editor.element.epigraph){FBEditor.editor.element.epigraph={}}if(!FBEditor.editor.element.fb3body){FBEditor.editor.element.fb3body={}}if(!FBEditor.editor.element.header){FBEditor.editor.element.header={}}if(!FBEditor.editor.element.i){FBEditor.editor.element.i={}}if(!FBEditor.editor.element.img){FBEditor.editor.element.img={}}if(!FBEditor.editor.element.li){FBEditor.editor.element.li={}}if(!FBEditor.editor.element.marker){FBEditor.editor.element.marker={}}if(!FBEditor.editor.element.marker.img){FBEditor.editor.element.marker.img={}}if(!FBEditor.editor.element.note){FBEditor.editor.element.note={}}if(!FBEditor.editor.element.notebody){FBEditor.editor.element.notebody={}}if(!FBEditor.editor.element.notes){FBEditor.editor.element.notes={}}if(!FBEditor.editor.element.ol){FBEditor.editor.element.ol={}}if(!FBEditor.editor.element.p){FBEditor.editor.element.p={}}if(!FBEditor.editor.element.poem){FBEditor.editor.element.poem={}}if(!FBEditor.editor.element.pre){FBEditor.editor.element.pre={}}if(!FBEditor.editor.element.root){FBEditor.editor.element.root={}}if(!FBEditor.editor.element.section){FBEditor.editor.element.section={}}if(!FBEditor.editor.element.spacing){FBEditor.editor.element.spacing={}}if(!FBEditor.editor.element.span){FBEditor.editor.element.span={}}if(!FBEditor.editor.element.stanza){FBEditor.editor.element.stanza={}}if(!FBEditor.editor.element.strikethrough){FBEditor.editor.element.strikethrough={}}if(!FBEditor.editor.element.strong){FBEditor.editor.element.strong={}}if(!FBEditor.editor.element.sub){FBEditor.editor.element.sub={}}if(!FBEditor.editor.element.subscription){FBEditor.editor.element.subscription={}}if(!FBEditor.editor.element.subtitle){FBEditor.editor.element.subtitle={}}if(!FBEditor.editor.element.sup){FBEditor.editor.element.sup={}}if(!FBEditor.editor.element.table){FBEditor.editor.element.table={}}if(!FBEditor.editor.element.td){FBEditor.editor.element.td={}}if(!FBEditor.editor.element.text){FBEditor.editor.element.text={}}if(!FBEditor.editor.element.title){FBEditor.editor.element.title={}}if(!FBEditor.editor.element.tr){FBEditor.editor.element.tr={}}if(!FBEditor.editor.element.u){FBEditor.editor.element.u={}}if(!FBEditor.editor.element.ul){FBEditor.editor.element.ul={}}if(!FBEditor.editor.element.undefined){FBEditor.editor.element.undefined={}}if(!FBEditor.editor.element.underline){FBEditor.editor.element.underline={}}if(!FBEditor.editor.helper){FBEditor.editor.helper={}}if(!FBEditor.editor.helper.element){FBEditor.editor.helper.element={}}if(!FBEditor.editor.schema){FBEditor.editor.schema={}}if(!FBEditor.editor.selection){FBEditor.editor.selection={}}if(!FBEditor.editor.view){FBEditor.editor.view={}}if(!FBEditor.editor.view.toggleButton){FBEditor.editor.view.toggleButton={}}if(!FBEditor.editor.view.toolbar){FBEditor.editor.view.toolbar={}}if(!FBEditor.editor.view.toolbar.button){FBEditor.editor.view.toolbar.button={}}if(!FBEditor.editor.view.toolbar.button.a){FBEditor.editor.view.toolbar.button.a={}}if(!FBEditor.editor.view.toolbar.button.em){FBEditor.editor.view.toolbar.button.em={}}if(!FBEditor.editor.view.toolbar.button.strong){FBEditor.editor.view.toolbar.button.strong={}}if(!FBEditor.editor.view.viewport){FBEditor.editor.view.viewport={}}if(!FBEditor.editor.view.viewport.source){FBEditor.editor.view.viewport.source={}}if(!FBEditor.file){FBEditor.file={}}if(!FBEditor.model){FBEditor.model={}}if(!FBEditor.model.resource){FBEditor.model.resource={}}if(!FBEditor.override){FBEditor.override={}}if(!FBEditor.override.form){FBEditor.override.form={}}if(!FBEditor.override.form.field){FBEditor.override.form.field={}}if(!FBEditor.override.panel){FBEditor.override.panel={}}if(!FBEditor.override.picker){FBEditor.override.picker={}}if(!FBEditor.override.tree){FBEditor.override.tree={}}if(!FBEditor.resource){FBEditor.resource={}}if(!FBEditor.resource.data){FBEditor.resource.data={}}if(!FBEditor.route){FBEditor.route={}}if(!FBEditor.scroll){FBEditor.scroll={}}if(!FBEditor.store){FBEditor.store={}}if(!FBEditor.store.desc){FBEditor.store.desc={}}if(!FBEditor.store.desc.relations){FBEditor.store.desc.relations={}}if(!FBEditor.store.resource){FBEditor.store.resource={}}if(!FBEditor.util){FBEditor.util={}}if(!FBEditor.util.xml){FBEditor.util.xml={}}if(!FBEditor.ux){FBEditor.ux={}}if(!FBEditor.view){FBEditor.view={}}if(!FBEditor.view.button){FBEditor.view.button={}}if(!FBEditor.view.button.desc){FBEditor.view.button.desc={}}if(!FBEditor.view.button.editor){FBEditor.view.button.editor={}}if(!FBEditor.view.container){FBEditor.view.container={}}if(!FBEditor.view.container.desc){FBEditor.view.container.desc={}}if(!FBEditor.view.container.desc.search){FBEditor.view.container.desc.search={}}if(!FBEditor.view.container.desc.search.arts){FBEditor.view.container.desc.search.arts={}}if(!FBEditor.view.container.desc.search.persons){FBEditor.view.container.desc.search.persons={}}if(!FBEditor.view.container.desc.search.sequence){FBEditor.view.container.desc.search.sequence={}}if(!FBEditor.view.container.desc.search.tag){FBEditor.view.container.desc.search.tag={}}if(!FBEditor.view.field){FBEditor.view.field={}}if(!FBEditor.view.field.combosearch){FBEditor.view.field.combosearch={}}if(!FBEditor.view.field.country){FBEditor.view.field.country={}}if(!FBEditor.view.field.datetime){FBEditor.view.field.datetime={}}if(!FBEditor.view.field.lang){FBEditor.view.field.lang={}}if(!FBEditor.view.field.textfieldclear){FBEditor.view.field.textfieldclear={}}if(!FBEditor.view.form){FBEditor.view.form={}}if(!FBEditor.view.form.desc){FBEditor.view.form.desc={}}if(!FBEditor.view.form.desc.annotation){FBEditor.view.form.desc.annotation={}}if(!FBEditor.view.form.desc.bookClass){FBEditor.view.form.desc.bookClass={}}if(!FBEditor.view.form.desc.classification){FBEditor.view.form.desc.classification={}}if(!FBEditor.view.form.desc.classification.bbk){FBEditor.view.form.desc.classification.bbk={}}if(!FBEditor.view.form.desc.classification.bbk.field){FBEditor.view.form.desc.classification.bbk.field={}}if(!FBEditor.view.form.desc.classification.setting){FBEditor.view.form.desc.classification.setting={}}if(!FBEditor.view.form.desc.classification.target){FBEditor.view.form.desc.classification.target={}}if(!FBEditor.view.form.desc.classification.target.ageMin){FBEditor.view.form.desc.classification.target.ageMin={}}if(!FBEditor.view.form.desc.classification.udc){FBEditor.view.form.desc.classification.udc={}}if(!FBEditor.view.form.desc.classification.udc.field){FBEditor.view.form.desc.classification.udc.field={}}if(!FBEditor.view.form.desc.customInfo){FBEditor.view.form.desc.customInfo={}}if(!FBEditor.view.form.desc.date){FBEditor.view.form.desc.date={}}if(!FBEditor.view.form.desc.documentInfo){FBEditor.view.form.desc.documentInfo={}}if(!FBEditor.view.form.desc.documentInfo.createdDate){FBEditor.view.form.desc.documentInfo.createdDate={}}if(!FBEditor.view.form.desc.documentInfo.editor){FBEditor.view.form.desc.documentInfo.editor={}}if(!FBEditor.view.form.desc.documentInfo.isbn){FBEditor.view.form.desc.documentInfo.isbn={}}if(!FBEditor.view.form.desc.editor){FBEditor.view.form.desc.editor={}}if(!FBEditor.view.form.desc.editor.body){FBEditor.view.form.desc.editor.body={}}if(!FBEditor.view.form.desc.editor.command){FBEditor.view.form.desc.editor.command={}}if(!FBEditor.view.form.desc.editor.toolbar){FBEditor.view.form.desc.editor.toolbar={}}if(!FBEditor.view.form.desc.editor.toolbar.button){FBEditor.view.form.desc.editor.toolbar.button={}}if(!FBEditor.view.form.desc.editor.toolbar.button.cleaner){FBEditor.view.form.desc.editor.toolbar.button.cleaner={}}if(!FBEditor.view.form.desc.field){FBEditor.view.form.desc.field={}}if(!FBEditor.view.form.desc.field.combobox){FBEditor.view.form.desc.field.combobox={}}if(!FBEditor.view.form.desc.field.combobox.required){FBEditor.view.form.desc.field.combobox.required={}}if(!FBEditor.view.form.desc.field.link){FBEditor.view.form.desc.field.link={}}if(!FBEditor.view.form.desc.field.link.uuid){FBEditor.view.form.desc.field.link.uuid={}}if(!FBEditor.view.form.desc.field.number){FBEditor.view.form.desc.field.number={}}if(!FBEditor.view.form.desc.field.number.required){FBEditor.view.form.desc.field.number.required={}}if(!FBEditor.view.form.desc.field.text){FBEditor.view.form.desc.field.text={}}if(!FBEditor.view.form.desc.field.text.required){FBEditor.view.form.desc.field.text.required={}}if(!FBEditor.view.form.desc.field.textarea){FBEditor.view.form.desc.field.textarea={}}if(!FBEditor.view.form.desc.field.textarea.required){FBEditor.view.form.desc.field.textarea.required={}}if(!FBEditor.view.form.desc.field.time){FBEditor.view.form.desc.field.time={}}if(!FBEditor.view.form.desc.field.time.required){FBEditor.view.form.desc.field.time.required={}}if(!FBEditor.view.form.desc.fieldset){FBEditor.view.form.desc.fieldset={}}if(!FBEditor.view.form.desc.fieldset.annotation){FBEditor.view.form.desc.fieldset.annotation={}}if(!FBEditor.view.form.desc.fieldset.history){FBEditor.view.form.desc.fieldset.history={}}if(!FBEditor.view.form.desc.fieldset.periodical){FBEditor.view.form.desc.fieldset.periodical={}}if(!FBEditor.view.form.desc.fieldset.preamble){FBEditor.view.form.desc.fieldset.preamble={}}if(!FBEditor.view.form.desc.fieldset.publishInfo){FBEditor.view.form.desc.fieldset.publishInfo={}}if(!FBEditor.view.form.desc.history){FBEditor.view.form.desc.history={}}if(!FBEditor.view.form.desc.isbn){FBEditor.view.form.desc.isbn={}}if(!FBEditor.view.form.desc.periodical){FBEditor.view.form.desc.periodical={}}if(!FBEditor.view.form.desc.preamble){FBEditor.view.form.desc.preamble={}}if(!FBEditor.view.form.desc.publishInfo){FBEditor.view.form.desc.publishInfo={}}if(!FBEditor.view.form.desc.publishInfo.biblio){FBEditor.view.form.desc.publishInfo.biblio={}}if(!FBEditor.view.form.desc.publishInfo.isbn){FBEditor.view.form.desc.publishInfo.isbn={}}if(!FBEditor.view.form.desc.publishInfo.sequence){FBEditor.view.form.desc.publishInfo.sequence={}}if(!FBEditor.view.form.desc.publishInfo.title){FBEditor.view.form.desc.publishInfo.title={}}if(!FBEditor.view.form.desc.relations){FBEditor.view.form.desc.relations={}}if(!FBEditor.view.form.desc.relations.object){FBEditor.view.form.desc.relations.object={}}if(!FBEditor.view.form.desc.relations.object.search){FBEditor.view.form.desc.relations.object.search={}}if(!FBEditor.view.form.desc.relations.object.search.name){FBEditor.view.form.desc.relations.object.search.name={}}if(!FBEditor.view.form.desc.relations.subject){FBEditor.view.form.desc.relations.subject={}}if(!FBEditor.view.form.desc.relations.subject.name){FBEditor.view.form.desc.relations.subject.name={}}if(!FBEditor.view.form.desc.relations.subject.name.main){FBEditor.view.form.desc.relations.subject.name.main={}}if(!FBEditor.view.form.desc.relations.subject.radio){FBEditor.view.form.desc.relations.subject.radio={}}if(!FBEditor.view.form.desc.relations.subject.search){FBEditor.view.form.desc.relations.subject.search={}}if(!FBEditor.view.form.desc.relations.subject.search.name){FBEditor.view.form.desc.relations.subject.search.name={}}if(!FBEditor.view.form.desc.relations.subject.search.name.window){FBEditor.view.form.desc.relations.subject.search.name.window={}}if(!FBEditor.view.form.desc.relations.subject.title){FBEditor.view.form.desc.relations.subject.title={}}if(!FBEditor.view.form.desc.searchField){FBEditor.view.form.desc.searchField={}}if(!FBEditor.view.form.desc.sequence){FBEditor.view.form.desc.sequence={}}if(!FBEditor.view.form.desc.sequence.search){FBEditor.view.form.desc.sequence.search={}}if(!FBEditor.view.form.desc.sequence.search.name){FBEditor.view.form.desc.sequence.search.name={}}if(!FBEditor.view.form.desc.sequence.search.name.window){FBEditor.view.form.desc.sequence.search.name.window={}}if(!FBEditor.view.form.desc.subject){FBEditor.view.form.desc.subject={}}if(!FBEditor.view.form.desc.subject.field){FBEditor.view.form.desc.subject.field={}}if(!FBEditor.view.form.desc.subject.tag){FBEditor.view.form.desc.subject.tag={}}if(!FBEditor.view.form.desc.title){FBEditor.view.form.desc.title={}}if(!FBEditor.view.form.desc.title.alt){FBEditor.view.form.desc.title.alt={}}if(!FBEditor.view.form.desc.titleArt){FBEditor.view.form.desc.titleArt={}}if(!FBEditor.view.form.desc.written){FBEditor.view.form.desc.written={}}if(!FBEditor.view.form.desc.written.date){FBEditor.view.form.desc.written.date={}}if(!FBEditor.view.form.desc.written.date.date){FBEditor.view.form.desc.written.date.date={}}if(!FBEditor.view.form.desc.written.date.publicated){FBEditor.view.form.desc.written.date.publicated={}}if(!FBEditor.view.form.desc.written.date.translated){FBEditor.view.form.desc.written.date.translated={}}if(!FBEditor.view.image){FBEditor.view.image={}}if(!FBEditor.view.image.editor){FBEditor.view.image.editor={}}if(!FBEditor.view.main){FBEditor.view.main={}}if(!FBEditor.view.panel){FBEditor.view.panel={}}if(!FBEditor.view.panel.cover){FBEditor.view.panel.cover={}}if(!FBEditor.view.panel.empty){FBEditor.view.panel.empty={}}if(!FBEditor.view.panel.filename){FBEditor.view.panel.filename={}}if(!FBEditor.view.panel.filename.display){FBEditor.view.panel.filename.display={}}if(!FBEditor.view.panel.filename.field){FBEditor.view.panel.filename.field={}}if(!FBEditor.view.panel.main){FBEditor.view.panel.main={}}if(!FBEditor.view.panel.main.content){FBEditor.view.panel.main.content={}}if(!FBEditor.view.panel.main.editor){FBEditor.view.panel.main.editor={}}if(!FBEditor.view.panel.main.editor.button){FBEditor.view.panel.main.editor.button={}}if(!FBEditor.view.panel.main.editor.button.a){FBEditor.view.panel.main.editor.button.a={}}if(!FBEditor.view.panel.main.editor.button.annotation){FBEditor.view.panel.main.editor.button.annotation={}}if(!FBEditor.view.panel.main.editor.button.blockquote){FBEditor.view.panel.main.editor.button.blockquote={}}if(!FBEditor.view.panel.main.editor.button.code){FBEditor.view.panel.main.editor.button.code={}}if(!FBEditor.view.panel.main.editor.button.div){FBEditor.view.panel.main.editor.button.div={}}if(!FBEditor.view.panel.main.editor.button.em){FBEditor.view.panel.main.editor.button.em={}}if(!FBEditor.view.panel.main.editor.button.epigraph){FBEditor.view.panel.main.editor.button.epigraph={}}if(!FBEditor.view.panel.main.editor.button.img){FBEditor.view.panel.main.editor.button.img={}}if(!FBEditor.view.panel.main.editor.button.note){FBEditor.view.panel.main.editor.button.note={}}if(!FBEditor.view.panel.main.editor.button.notebody){FBEditor.view.panel.main.editor.button.notebody={}}if(!FBEditor.view.panel.main.editor.button.notes){FBEditor.view.panel.main.editor.button.notes={}}if(!FBEditor.view.panel.main.editor.button.ol){FBEditor.view.panel.main.editor.button.ol={}}if(!FBEditor.view.panel.main.editor.button.poem){FBEditor.view.panel.main.editor.button.poem={}}if(!FBEditor.view.panel.main.editor.button.pre){FBEditor.view.panel.main.editor.button.pre={}}if(!FBEditor.view.panel.main.editor.button.section){FBEditor.view.panel.main.editor.button.section={}}if(!FBEditor.view.panel.main.editor.button.spacing){FBEditor.view.panel.main.editor.button.spacing={}}if(!FBEditor.view.panel.main.editor.button.strikethrough){FBEditor.view.panel.main.editor.button.strikethrough={}}if(!FBEditor.view.panel.main.editor.button.strong){FBEditor.view.panel.main.editor.button.strong={}}if(!FBEditor.view.panel.main.editor.button.sub){FBEditor.view.panel.main.editor.button.sub={}}if(!FBEditor.view.panel.main.editor.button.subscription){FBEditor.view.panel.main.editor.button.subscription={}}if(!FBEditor.view.panel.main.editor.button.subtitle){FBEditor.view.panel.main.editor.button.subtitle={}}if(!FBEditor.view.panel.main.editor.button.sup){FBEditor.view.panel.main.editor.button.sup={}}if(!FBEditor.view.panel.main.editor.button.table){FBEditor.view.panel.main.editor.button.table={}}if(!FBEditor.view.panel.main.editor.button.table.menu){FBEditor.view.panel.main.editor.button.table.menu={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item){FBEditor.view.panel.main.editor.button.table.menu.item={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.delCol){FBEditor.view.panel.main.editor.button.table.menu.item.delCol={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.delRow){FBEditor.view.panel.main.editor.button.table.menu.item.delRow={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.delTable){FBEditor.view.panel.main.editor.button.table.menu.item.delTable={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext){FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev){FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext){FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev){FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.insertTable){FBEditor.view.panel.main.editor.button.table.menu.item.insertTable={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.joinCells){FBEditor.view.panel.main.editor.button.table.menu.item.joinCells={}}if(!FBEditor.view.panel.main.editor.button.table.menu.item.splitCells){FBEditor.view.panel.main.editor.button.table.menu.item.splitCells={}}if(!FBEditor.view.panel.main.editor.button.table.menu.size){FBEditor.view.panel.main.editor.button.table.menu.size={}}if(!FBEditor.view.panel.main.editor.button.title){FBEditor.view.panel.main.editor.button.title={}}if(!FBEditor.view.panel.main.editor.button.titlebody){FBEditor.view.panel.main.editor.button.titlebody={}}if(!FBEditor.view.panel.main.editor.button.ul){FBEditor.view.panel.main.editor.button.ul={}}if(!FBEditor.view.panel.main.editor.button.underline){FBEditor.view.panel.main.editor.button.underline={}}if(!FBEditor.view.panel.main.editor.toolbar){FBEditor.view.panel.main.editor.toolbar={}}if(!FBEditor.view.panel.main.editor.viewport){FBEditor.view.panel.main.editor.viewport={}}if(!FBEditor.view.panel.main.navigation){FBEditor.view.panel.main.navigation={}}if(!FBEditor.view.panel.main.props){FBEditor.view.panel.main.props={}}if(!FBEditor.view.panel.main.props.body){FBEditor.view.panel.main.props.body={}}if(!FBEditor.view.panel.main.props.body.editor){FBEditor.view.panel.main.props.body.editor={}}if(!FBEditor.view.panel.main.props.body.editor.a){FBEditor.view.panel.main.props.body.editor.a={}}if(!FBEditor.view.panel.main.props.body.editor.annotation){FBEditor.view.panel.main.props.body.editor.annotation={}}if(!FBEditor.view.panel.main.props.body.editor.blockquote){FBEditor.view.panel.main.props.body.editor.blockquote={}}if(!FBEditor.view.panel.main.props.body.editor.div){FBEditor.view.panel.main.props.body.editor.div={}}if(!FBEditor.view.panel.main.props.body.editor.div.marker){FBEditor.view.panel.main.props.body.editor.div.marker={}}if(!FBEditor.view.panel.main.props.body.editor.div.marker.img){FBEditor.view.panel.main.props.body.editor.div.marker.img={}}if(!FBEditor.view.panel.main.props.body.editor.epigraph){FBEditor.view.panel.main.props.body.editor.epigraph={}}if(!FBEditor.view.panel.main.props.body.editor.fb3body){FBEditor.view.panel.main.props.body.editor.fb3body={}}if(!FBEditor.view.panel.main.props.body.editor.fields){FBEditor.view.panel.main.props.body.editor.fields={}}if(!FBEditor.view.panel.main.props.body.editor.fields.sizeselect){FBEditor.view.panel.main.props.body.editor.fields.sizeselect={}}if(!FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input){FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input={}}if(!FBEditor.view.panel.main.props.body.editor.img){FBEditor.view.panel.main.props.body.editor.img={}}if(!FBEditor.view.panel.main.props.body.editor.note){FBEditor.view.panel.main.props.body.editor.note={}}if(!FBEditor.view.panel.main.props.body.editor.notebody){FBEditor.view.panel.main.props.body.editor.notebody={}}if(!FBEditor.view.panel.main.props.body.editor.notes){FBEditor.view.panel.main.props.body.editor.notes={}}if(!FBEditor.view.panel.main.props.body.editor.ol){FBEditor.view.panel.main.props.body.editor.ol={}}if(!FBEditor.view.panel.main.props.body.editor.pre){FBEditor.view.panel.main.props.body.editor.pre={}}if(!FBEditor.view.panel.main.props.body.editor.section){FBEditor.view.panel.main.props.body.editor.section={}}if(!FBEditor.view.panel.main.props.body.editor.stanza){FBEditor.view.panel.main.props.body.editor.stanza={}}if(!FBEditor.view.panel.main.props.body.editor.subscription){FBEditor.view.panel.main.props.body.editor.subscription={}}if(!FBEditor.view.panel.main.props.body.editor.table){FBEditor.view.panel.main.props.body.editor.table={}}if(!FBEditor.view.panel.main.props.body.editor.td){FBEditor.view.panel.main.props.body.editor.td={}}if(!FBEditor.view.panel.main.props.body.editor.title){FBEditor.view.panel.main.props.body.editor.title={}}if(!FBEditor.view.panel.main.props.body.editor.tr){FBEditor.view.panel.main.props.body.editor.tr={}}if(!FBEditor.view.panel.main.props.body.editor.ul){FBEditor.view.panel.main.props.body.editor.ul={}}if(!FBEditor.view.panel.main.props.desc){FBEditor.view.panel.main.props.desc={}}if(!FBEditor.view.panel.main.props.desc.editor){FBEditor.view.panel.main.props.desc.editor={}}if(!FBEditor.view.panel.main.props.desc.editor.a){FBEditor.view.panel.main.props.desc.editor.a={}}if(!FBEditor.view.panel.main.props.desc.editor.annotation){FBEditor.view.panel.main.props.desc.editor.annotation={}}if(!FBEditor.view.panel.main.props.desc.editor.bibliodescription){FBEditor.view.panel.main.props.desc.editor.bibliodescription={}}if(!FBEditor.view.panel.main.props.desc.editor.history){FBEditor.view.panel.main.props.desc.editor.history={}}if(!FBEditor.view.panel.main.props.desc.editor.preamble){FBEditor.view.panel.main.props.desc.editor.preamble={}}if(!FBEditor.view.panel.main.props.desc.search){FBEditor.view.panel.main.props.desc.search={}}if(!FBEditor.view.panel.main.props.desc.search.arts){FBEditor.view.panel.main.props.desc.search.arts={}}if(!FBEditor.view.panel.main.props.desc.search.persons){FBEditor.view.panel.main.props.desc.search.persons={}}if(!FBEditor.view.panel.main.props.resources){FBEditor.view.panel.main.props.resources={}}if(!FBEditor.view.panel.main.tools){FBEditor.view.panel.main.tools={}}if(!FBEditor.view.panel.resources){FBEditor.view.panel.resources={}}if(!FBEditor.view.panel.resources.control){FBEditor.view.panel.resources.control={}}if(!FBEditor.view.panel.resources.control.selectview){FBEditor.view.panel.resources.control.selectview={}}if(!FBEditor.view.panel.resources.navigation){FBEditor.view.panel.resources.navigation={}}if(!FBEditor.view.panel.resources.tpl){FBEditor.view.panel.resources.tpl={}}if(!FBEditor.view.panel.resources.view){FBEditor.view.panel.resources.view={}}if(!FBEditor.view.panel.toolstab){FBEditor.view.panel.toolstab={}}if(!FBEditor.view.panel.toolstab.file){FBEditor.view.panel.toolstab.file={}}if(!FBEditor.view.panel.toolstab.file.button){FBEditor.view.panel.toolstab.file.button={}}if(!FBEditor.view.panel.toolstab.file.button.open){FBEditor.view.panel.toolstab.file.button.open={}}if(!FBEditor.view.panel.toolstab.file.button.saveas){FBEditor.view.panel.toolstab.file.button.saveas={}}if(!FBEditor.view.panel.toolstab.file.button.savebody){FBEditor.view.panel.toolstab.file.button.savebody={}}if(!FBEditor.view.panel.toolstab.file.button.savedesc){FBEditor.view.panel.toolstab.file.button.savedesc={}}if(!FBEditor.view.panel.toolstab.main){FBEditor.view.panel.toolstab.main={}}if(!FBEditor.view.panel.toolstab.tools){FBEditor.view.panel.toolstab.tools={}}if(!FBEditor.view.panel.toolstab.tools.button){FBEditor.view.panel.toolstab.tools.button={}}if(!FBEditor.view.panel.toolstab.tools.button.paragraph){FBEditor.view.panel.toolstab.tools.button.paragraph={}}if(!FBEditor.view.panel.toolstab.view){FBEditor.view.panel.toolstab.view={}}if(!FBEditor.view.panel.toolstab.view.button){FBEditor.view.panel.toolstab.view.button={}}if(!FBEditor.view.panel.toolstab.view.button.focusdetachpanels){FBEditor.view.panel.toolstab.view.button.focusdetachpanels={}}if(!FBEditor.view.panel.toolstab.view.button.split){FBEditor.view.panel.toolstab.view.button.split={}}if(!FBEditor.view.panel.treenavigation){FBEditor.view.panel.treenavigation={}}if(!FBEditor.view.panel.treenavigation.body){FBEditor.view.panel.treenavigation.body={}}if(!FBEditor.view.panel.treenavigation.desc){FBEditor.view.panel.treenavigation.desc={}}if(!FBEditor.view.window){FBEditor.view.window={}}if(!FBEditor.view.window.img){FBEditor.view.window.img={}}if(!FBEditor.view.window.resource){FBEditor.view.window.resource={}}if(!FBEditor.webworker){FBEditor.webworker={}}if(!FBEditor.webworker.httpRequest){FBEditor.webworker.httpRequest={}}if(!FBEditor.webworker.xmllint){FBEditor.webworker.xmllint={}}if(!FBEditor.xsd){FBEditor.xsd={}}if(!FBEditor.xsd.desc){FBEditor.xsd.desc={}}if(!FBEditor.xsl){FBEditor.xsl={}}(function(f){var b,n=["constructor","toString","valueOf","toLocaleString"],g={},r={},d=0,o,l,t,j,a,h,p,c,k,s=function(){var w,v;l=Ext.Base;t=Ext.ClassManager;for(w=n.length;w-->0;){v=(1<<w);r[g[v]=n[w]]=v}for(w in r){d|=r[w]}d=~d;Function.prototype.$isFunction=1;k=!!(t&&t.addAlias);j=Ext.Class.getPreprocessor("config").fn;a=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;h=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn;c=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;p=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;b=l.$staticMembers;if(!b){b=[];for(o in l){if(l.hasOwnProperty(o)){b.push(o)}}}f.derive=m;return m.apply(this,arguments)},u=function(E,A,D){var x=D.enumerableMembers,B=E.prototype,z,C,y,w,v;if(!A){return}if(k){E.addMembers(A)}else{for(z in A){w=A[z];if(w&&w.$isFunction&&!w.$isClass&&w!==Ext.emptyFn&&w!==Ext.identityFn){v=B.hasOwnProperty(z)&&B[z];if(v){w.$previous=v}B[z]=C=w;C.$owner=E;C.$name=z}else{B[z]=w}}for(y=1;x;y<<=1){if(x&y){x&=~y;z=g[y];B[z]=C=A[z];C.$owner=E;C.$name=z}}}},q=function(z){var v=function y(){return z.apply(this,arguments)||null},x,w;v.prototype=Ext.Object.chain(z.prototype);for(x=b.length;x-->0;){w=b[x];v[w]=l[w]}return v},m=function(A,D,Y,v,C,M,B,V,y,O,H){var w=function G(){return this.constructor.apply(this,arguments)||null},X=w,x={enumerableMembers:v&d,onCreated:H,onBeforeCreated:u,aliases:V},K=Y.alternateClassName||[],T=Ext.global,P,S,U,J,R,ab,aa,z,Q,F,W,N,I,Z,L=t.alternateToName||t.maps.alternateToName,E=t.nameToAlternates||t.maps.nameToAlternates;for(U=b.length;U-->0;){aa=b[U];w[aa]=l[aa]}if(Y.$isFunction){Y=Y(w)}x.data=Y;F=Y.statics;delete Y.statics;Y.$className=A;if("$className" in Y){w.$className=Y.$className}w.extend(D);Q=w.prototype;w.xtype=Y.xtype=C[0];if(C){Q.xtypes=C}Q.xtypesChain=M;Q.xtypesMap=B;Y.alias=V;X.triggerExtended(w,Y,x);if(Y.onClassExtended){w.onExtended(Y.onClassExtended,w);delete Y.onClassExtended}if(Y.privates&&c){c.call(Ext.Class,w,Y)}if(F){if(k){w.addStatics(F)}else{for(W in F){if(F.hasOwnProperty(W)){Z=F[W];if(Z&&Z.$isFunction&&!Z.$isClass&&Z!==Ext.emptyFn&&Z!==Ext.identityFn){w[W]=I=Z;I.$owner=w;I.$name=W}w[W]=Z}}}}if(Y.inheritableStatics){w.addInheritableStatics(Y.inheritableStatics);delete Y.inheritableStatics}if(Q.onClassExtended){X.onExtended(Q.onClassExtended,X);delete Q.onClassExtended}if(Y.platformConfig&&h){h.call(Ext.Class,w,Y);delete Y.platformConfig}if(Y.config){j.call(Ext.Class,w,Y)}if(Y.cachedConfig&&a){a.call(Ext.Class,w,Y);delete Y.cachedConfig}if(Y.deprecated&&p){p.call(Ext.ClassManager,A,w,Y)}x.onBeforeCreated(w,x.data,x);for(U=0,R=y&&y.length;U<R;++U){w.mixin.apply(w,y[U])}for(U=0,R=V.length;U<R;U++){P=V[U];t.setAlias?t.setAlias(w,P):t.addAlias(w,P)}if(Y.singleton){X=new w()}if(!(K instanceof Array)){K=[K]}N=t.getName(X);for(U=0,J=K.length;U<J;U++){S=K[U];t.classes[S]=X;if(k){t.addAlternate(w,S)}else{if(N){L[S]=N;K=E[N]||(E[N]=[]);K.push(S)}}}for(U=0,R=O.length;U<R;U+=2){ab=O[U];if(!ab){ab=T}ab[O[U+1]]=X}t.classes[A]=X;if(!k){if(N&&N!==A){L[A]=N;K=E[N]||(E[N]=[]);K.push(A)}}delete Q.alternateClassName;if(x.onCreated){x.onCreated.call(X,X)}if(A){t.triggerCreated(A)}return X};f.derive=s}(Ext.cmd={}));var Ext=Ext||{};Ext._startTime=Date.now?Date.now():(+new Date());(function(){var b=this,h=Object.prototype,c=h.toString,n=["valueOf","toLocaleString","toString","constructor"],l=function(){},g=function(){},j=function(p){return p},m=function(){var o=m.caller.caller;return o.$owner.prototype[o.$name].apply(this,arguments)},a=Ext.manifest||{},k,d=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,f=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=b;l.$nullFn=j.$nullFn=l.$emptyFn=j.$identityFn=g.$nullFn=true;g.$privacy="framework";Ext.suspendLayouts=Ext.resumeLayouts=l;for(k in {toString:1}){n=null}Ext.enumerables=n;Ext.apply=function(r,q,t){if(t){Ext.apply(r,t)}if(r&&q&&typeof q==="object"){var s,p,o;for(s in q){r[s]=q[s]}if(n){for(p=n.length;p--;){o=n[p];if(q.hasOwnProperty(o)){r[o]=q[o]}}}}return r};Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:false,enableListenerCollection:true,name:Ext.sandboxName||"Ext",privateFn:g,emptyFn:l,identityFn:j,frameStartTime:+new Date(),manifest:a,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,makeIdSelector:function(o){return"#"+o},id:function(q,p){if(q&&q.id){return q.id}var r=(p||Ext.idPrefix)+(++Ext.idSeed);if(q){q.id=r}return r},returnId:function(p){return p.getId()},returnTrue:function(){return true},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},applyIf:function(p,o){var q;if(p){for(q in o){if(p[q]===undefined){p[q]=o[q]}}}return p},now:(b.performance&&b.performance.now)?function(){return performance.now()}:(Date.now||(Date.now=function(){return +new Date()})),destroy:function(){var q=arguments.length,p,o;for(p=0;p<q;p++){o=arguments[p];if(o){if(Ext.isArray(o)){this.destroy.apply(this,o)}else{if(Ext.isFunction(o.destroy)){o.destroy()}}}}return null},destroyMembers:function(r){for(var t,q,s=1,p=arguments,o=p.length;s<o;s++){t=r[q=p[s]];if(t!=null){r[q]=Ext.destroy(t)}}},override:function(r,s){if(r.$isClass){r.override(s)}else{if(typeof r=="function"){Ext.apply(r.prototype,s)}else{var o=r.self,p,q;if(o&&o.$isClass){for(p in s){if(s.hasOwnProperty(p)){q=s[p];if(typeof q==="function"){q.$name=p;q.$owner=o;q.$previous=r.hasOwnProperty(p)?r[p]:m}r[p]=q}}}else{Ext.apply(r,s)}}}return r},valueFrom:function(q,o,p){return Ext.isEmpty(q,p)?o:q},isEmpty:function(o,p){return(o==null)||(!p?o==="":false)||(Ext.isArray(o)&&o.length===0)},isArray:("isArray" in Array)?Array.isArray:function(o){return c.call(o)==="[object Array]"},isDate:function(o){return c.call(o)==="[object Date]"},isMSDate:function(o){if(!Ext.isString(o)){return false}return f.test(o)},isObject:(c.call(null)==="[object Object]")?function(o){return o!==null&&o!==undefined&&c.call(o)==="[object Object]"&&o.ownerDocument===undefined}:function(o){return c.call(o)==="[object Object]"},isSimpleObject:function(o){return o instanceof Object&&o.constructor===Object},isPrimitive:function(p){var o=typeof p;return o==="string"||o==="number"||o==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(o){return !!o&&c.call(o)==="[object Function]"}:function(o){return !!o&&typeof o==="function"},isNumber:function(o){return typeof o==="number"&&isFinite(o)},isNumeric:function(o){return !isNaN(parseFloat(o))&&isFinite(o)},isString:function(o){return typeof o==="string"},isBoolean:function(o){return typeof o==="boolean"},isElement:function(o){return o?o.nodeType===1:false},isTextNode:function(o){return o?o.nodeName==="#text":false},isDefined:function(o){return typeof o!=="undefined"},isIterable:function(o){if(!o||typeof o.length!=="number"||typeof o==="string"||Ext.isFunction(o)){return false}if(!o.propertyIsEnumerable){return !!o.item}if(o.hasOwnProperty("length")&&!o.propertyIsEnumerable("length")){return true}return d.test(c.call(o))},isDebugEnabled:l,clone:function(t){if(t===null||t===undefined){return t}if(t.nodeType&&t.cloneNode){return t.cloneNode(true)}var s=c.call(t),r,p,o,u,q;if(s==="[object Date]"){return new Date(t.getTime())}if(s==="[object Array]"){r=t.length;u=[];while(r--){u[r]=Ext.clone(t[r])}}else{if(s==="[object Object]"&&t.constructor===Object){u={};for(q in t){u[q]=Ext.clone(t[q])}if(n){for(p=n.length;p--;){o=n[p];if(t.hasOwnProperty(o)){u[o]=t[o]}}}}}return u||t},getUniqueGlobalNamespace:function(){var p=this.uniqueGlobalNamespace,o;if(p===undefined){o=0;do{p="ExtBox"+(++o)}while(b[p]!==undefined);b[p]=Ext;this.uniqueGlobalNamespace=p}return p},functionFactoryCache:{},cacheableFunctionFactory:function(){var t=this,q=Array.prototype.slice.call(arguments),p=t.functionFactoryCache,o,r,s;if(Ext.isSandboxed){s=q.length;if(s>0){s--;q[s]="var Ext=window."+Ext.name+";"+q[s]}}o=q.join("");r=p[o];if(!r){r=Function.prototype.constructor.apply(Function.prototype,q);p[o]=r}return r},functionFactory:function(){var o=Array.prototype.slice.call(arguments),p;if(Ext.isSandboxed){p=o.length;if(p>0){p--;o[p]="var Ext=window."+Ext.name+";"+o[p]}}return Function.prototype.constructor.apply(Function.prototype,o)},Logger:{verbose:l,log:l,info:l,warn:l,error:function(o){throw new Error(o)},deprecate:l},getElementById:function(o){return document.getElementById(o)},splitAndUnescape:(function(){var o={};return function(r,q){if(!r){return[]}else{if(!q){return[r]}}var t=o[q]||(o[q]=new RegExp("\\\\"+q,"g")),p=[],u,s;u=r.split(q);while((s=u.shift())!==undefined){while(s.charAt(s.length-1)==="\\"&&u.length>0){s=s+q+u.shift()}s=s.replace(t,q);p.push(s)}return p}})()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=true}());(function(){function a(){var c=this,b=c.sourceClass,f=c.sourceMethod,d=c.msg;if(f){if(d){f+="(): ";f+=d}else{f+="()"}}if(b){f=f?(b+"."+f):b}return f||d||""}Ext.Error=function(c){if(Ext.isString(c)){c={msg:c}}var b=new Error();Ext.apply(b,c);b.message=b.message||b.msg;b.toString=a;return b};Ext.apply(Ext.Error,{ignore:false,raise:function(d){d=d||{};if(Ext.isString(d)){d={msg:d}}var c=this,g=c.raise.caller,f,b;if(g){if(!d.sourceMethod&&(b=g.$name)){d.sourceMethod=b}if(!d.sourceClass&&(b=g.$owner)&&(b=b.$className)){d.sourceClass=b}}if(c.handle(d)!==true){f=a.call(d);throw new Ext.Error(d)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.Array=new (function(){var c=Array.prototype,l=c.slice,n=(function(){var w=[],u,v=20;if(!w.splice){return false}while(v--){w.push("A")}w.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");u=w.length;w.splice(13,0,"XXX");if(u+1!==w.length){return false}return true}()),m="indexOf" in c,g=true;function k(z,w){var v=z.length,y=new Array(v),u=new Array(v),x;for(x=0;x<v;x++){y[x]=x}y.sort(function(B,A){return w(z[B],z[A])||(B-A)});for(x=0;x<v;x++){u[x]=z[y[x]]}for(x=0;x<v;x++){z[x]=u[x]}return z}try{if(typeof document!=="undefined"){l.call(document.getElementsByTagName("body"))}}catch(p){g=false}var j=function(v,u){return(u<0)?Math.max(0,v.length+u):Math.min(v.length,u)},t=function(C,B,v,F){var G=F?F.length:0,x=C.length,D=j(C,B);if(D===x){if(G){C.push.apply(C,F)}}else{var A=Math.min(v,x-D),E=D+A,w=E+G-A,u=x-E,y=x-A,z;if(w<E){for(z=0;z<u;++z){C[w+z]=C[E+z]}}else{if(w>E){for(z=u;z--;){C[w+z]=C[E+z]}}}if(G&&D===y){C.length=y;C.push.apply(C,F)}else{C.length=y+G;for(z=0;z<G;++z){C[D+z]=F[z]}}}return C},f=function(x,u,w,v){if(v&&v.length){if(u===0&&!w){x.unshift.apply(x,v)}else{if(u<x.length){x.splice.apply(x,[u,w].concat(v))}else{x.push.apply(x,v)}}}else{x.splice(u,w)}return x},b=function(w,u,v){return t(w,u,v)},o=function(w,u,v){w.splice(u,v);return w},h=function(y,u,w){var x=j(y,u),v=y.slice(u,j(y,x+w));if(arguments.length<4){t(y,x,w)}else{t(y,x,w,l.call(arguments,3))}return v},d=function(u){return u.splice.apply(u,l.call(arguments,1))},s=n?o:b,q=n?f:t,r=n?d:h,a={binarySearch:function(B,y,w,u,A){var x=B.length,v,z;if(w instanceof Function){A=w;w=0;u=x}else{if(u instanceof Function){A=u;u=x}else{if(w===undefined){w=0}if(u===undefined){u=x}A=A||a.lexicalCompare}}--u;while(w<=u){v=(w+u)>>1;z=A(y,B[v]);if(z>=0){w=v+1}else{if(z<0){u=v-1}}}return w},defaultCompare:function(u,v){return(u<v)?-1:((u>v)?1:0)},lexicalCompare:function(u,v){u=String(u);v=String(v);return(u<v)?-1:((u>v)?1:0)},each:function(z,x,w,u){z=a.from(z);var v,y=z.length;if(u!==true){for(v=0;v<y;v++){if(x.call(w||z[v],z[v],v,z)===false){return v}}}else{for(v=y-1;v>-1;v--){if(x.call(w||z[v],z[v],v,z)===false){return v}}}return true},forEach:("forEach" in c)?function(w,v,u){return w.forEach(v,u)}:function(y,w,v){for(var u=0,x=y.length;u<x;u++){w.call(v,y[u],u,y)}},indexOf:m?function(w,u,v){return c.indexOf.call(w,u,v)}:function(y,w,x){var u,v=y.length;for(u=(x<0)?Math.max(0,v+x):x||0;u<v;u++){if(y[u]===w){return u}}return -1},contains:m?function(v,u){return c.indexOf.call(v,u)!==-1}:function(x,w){var u,v;for(u=0,v=x.length;u<v;u++){if(x[u]===w){return true}}return false},toArray:function(w,y,u){if(!w||!w.length){return[]}if(typeof w==="string"){w=w.split("")}if(g){return l.call(w,y||0,u||w.length)}var x=[],v;y=y||0;u=u?((u<0)?w.length+u:u):w.length;for(v=y;v<u;v++){x.push(w[v])}return x},pluck:function(z,u){var v=[],w,y,x;for(w=0,y=z.length;w<y;w++){x=z[w];v.push(x[u])}return v},map:("map" in c)?function(w,v,u){return w.map(v,u)}:function(z,y,x){var w=[],v=0,u=z.length;for(;v<u;v++){w[v]=y.call(x,z[v],v,z)}return w},every:("every" in c)?function(w,v,u){return w.every(v,u)}:function(y,w,v){var u=0,x=y.length;for(;u<x;++u){if(!w.call(v,y[u],u,y)){return false}}return true},some:("some" in c)?function(w,v,u){return w.some(v,u)}:function(y,w,v){var u=0,x=y.length;for(;u<x;++u){if(w.call(v,y[u],u,y)){return true}}return false},equals:function(y,x){var v=y.length,u=x.length,w;if(y===x){return true}if(v!==u){return false}for(w=0;w<v;++w){if(y[w]!==x[w]){return false}}return true},clean:function(y){var v=[],u=0,x=y.length,w;for(;u<x;u++){w=y[u];if(!Ext.isEmpty(w)){v.push(w)}}return v},unique:function(y){var x=[],u=0,w=y.length,v;for(;u<w;u++){v=y[u];if(a.indexOf(x,v)===-1){x.push(v)}}return x},filter:("filter" in c)?function(w,v,u){return w.filter(v,u)}:function(z,x,w){var v=[],u=0,y=z.length;for(;u<y;u++){if(x.call(w,z[u],u,z)){v.push(z[u])}}return v},findBy:function(y,x,w){var v=0,u=y.length;for(;v<u;v++){if(x.call(w||y,y[v],v)){return y[v]}}return null},from:function(w,v){if(w===undefined||w===null){return[]}if(Ext.isArray(w)){return(v)?l.call(w):w}var u=typeof w;if(w&&w.length!==undefined&&u!=="string"&&(u!=="function"||!w.apply)){return a.toArray(w)}return[w]},remove:function(w,v){var u=a.indexOf(w,v);if(u!==-1){s(w,u,1)}return w},include:function(v,u){if(!a.contains(v,u)){v.push(u)}},clone:function(u){return l.call(u)},merge:function(){var u=l.call(arguments),x=[],v,w;for(v=0,w=u.length;v<w;v++){x=x.concat(u[v])}return a.unique(x)},intersect:function(){var u=[],w=l.call(arguments),H,F,B,E,I,x,v,D,G,y,C,A,z;if(!w.length){return u}H=w.length;for(C=I=0;C<H;C++){x=w[C];if(!E||x.length<E.length){E=x;I=C}}E=a.unique(E);s(w,I,1);v=E.length;H=w.length;for(C=0;C<v;C++){D=E[C];y=0;for(A=0;A<H;A++){F=w[A];B=F.length;for(z=0;z<B;z++){G=F[z];if(D===G){y++;break}}}if(y===H){u.push(D)}}return u},difference:function(v,u){var A=l.call(v),y=A.length,x,w,z;for(x=0,z=u.length;x<z;x++){for(w=0;w<y;w++){if(A[w]===u[x]){s(A,w,1);w--;y--}}}return A},slice:([1,2].slice(1,undefined).length?function(w,v,u){return l.call(w,v,u)}:function(w,v,u){if(typeof v==="undefined"){return l.call(w)}if(typeof u==="undefined"){return l.call(w,v)}return l.call(w,v,u)}),sort:function(v,u){return k(v,u||a.lexicalCompare)},flatten:function(w){var v=[];function u(x){var z,A,y;for(z=0,A=x.length;z<A;z++){y=x[z];if(Ext.isArray(y)){u(y)}else{v.push(y)}}return v}return u(w)},min:function(z,y){var v=z[0],u,x,w;for(u=0,x=z.length;u<x;u++){w=z[u];if(y){if(y(v,w)===1){v=w}}else{if(w<v){v=w}}}return v},max:function(z,y){var u=z[0],v,x,w;for(v=0,x=z.length;v<x;v++){w=z[v];if(y){if(y(u,w)===-1){u=w}}else{if(w>u){u=w}}}return u},mean:function(u){return u.length>0?a.sum(u)/u.length:undefined},sum:function(y){var v=0,u,x,w;for(u=0,x=y.length;u<x;u++){w=y[u];v+=w}return v},toMap:function(y,u,w){var x={},v=y.length;if(!u){while(v--){x[y[v]]=v+1}}else{if(typeof u==="string"){while(v--){x[y[v][u]]=v+1}}else{while(v--){x[u.call(w,y[v])]=v+1}}}return x},toValueMap:function(A,x,F,z){var u={},w=A.length,v,y,D,B,E,C;if(!x){while(w--){C=A[w];u[C]=C}}else{if(!(B=(typeof x!=="string"))){z=F}y=z===1;v=z===2;while(w--){C=A[w];E=B?x.call(F,C):C[x];if(y){if(E in u){u[E].push(C)}else{u[E]=[C]}}else{if(v&&(E in u)){if((D=u[E]) instanceof Array){D.push(C)}else{u[E]=[D,C]}}else{u[E]=C}}}}return u},erase:s,insert:function(w,v,u){return q(w,v,0,u)},replace:q,splice:r,push:function(x){var u=arguments.length,w=1,v;if(x===undefined){x=[]}else{if(!Ext.isArray(x)){x=[x]}}for(;w<u;w++){v=arguments[w];Array.prototype.push[Ext.isIterable(v)?"apply":"call"](x,v)}return x},numericSortFn:function(v,u){return v-u}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a})();Ext.String=(function(){var j=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,n=/('|\\)/g,b=/([-.*+?\^${}()|\[\]\/\\])/g,p=/^\s+|\s+$/g,k=/\s+/,m=/(^[^a-z]*|[^\w])/gi,f,a,h,d,g=function(r,q){return f[q]},l=function(r,q){return(q in a)?a[q]:String.fromCharCode(parseInt(q.substr(2),10))},c=function(r,q){if(r===null||r===undefined||q===null||q===undefined){return false}return q.length<=r.length},o;return o={insert:function(t,u,r){if(!t){return u}if(!u){return t}var q=t.length;if(!r&&r!==0){r=q}if(r<0){r*=-1;if(r>=q){r=0}else{r=q-r}}if(r===0){t=u+t}else{if(r>=t.length){t+=u}else{t=t.substr(0,r)+u+t.substr(r)}}return t},startsWith:function(t,u,r){var q=c(t,u);if(q){if(r){t=t.toLowerCase();u=u.toLowerCase()}q=t.lastIndexOf(u,0)===0}return q},endsWith:function(u,r,t){var q=c(u,r);if(q){if(t){u=u.toLowerCase();r=r.toLowerCase()}q=u.indexOf(r,u.length-r.length)!==-1}return q},createVarName:function(q){return q.replace(m,"")},htmlEncode:function(q){return(!q)?q:String(q).replace(h,g)},htmlDecode:function(q){return(!q)?q:String(q).replace(d,l)},hasHtmlCharacters:function(q){return h.test(q)},addCharacterEntities:function(r){var q=[],u=[],s,t;for(s in r){t=r[s];a[s]=t;f[t]=s;q.push(t);u.push(s)}h=new RegExp("("+q.join("|")+")","g");d=new RegExp("("+u.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){f={};a={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(r,q){if(!Ext.isEmpty(q)){return r+(r.indexOf("?")===-1?"?":"&")+q}return r},trim:function(q){if(q){q=q.replace(j,"")}return q||""},capitalize:function(q){if(q){q=q.charAt(0).toUpperCase()+q.substr(1)}return q||""},uncapitalize:function(q){if(q){q=q.charAt(0).toLowerCase()+q.substr(1)}return q||""},ellipsis:function(s,r,t){if(s&&s.length>r){if(t){var u=s.substr(0,r-2),q=Math.max(u.lastIndexOf(" "),u.lastIndexOf("."),u.lastIndexOf("!"),u.lastIndexOf("?"));if(q!==-1&&q>=(r-15)){return u.substr(0,q)+"..."}}return s.substr(0,r-3)+"..."}return s},escapeRegex:function(q){return q.replace(b,"\\$1")},createRegex:function(u,t,r,q){var s=u;if(u!=null&&!u.exec){s=o.escapeRegex(String(u));if(t!==false){s="^"+s}if(r!==false){s+="$"}s=new RegExp(s,(q!==false)?"i":"")}return s},escape:function(q){return q.replace(n,"\\$1")},toggle:function(r,s,q){return r===s?q:s},leftPad:function(r,s,t){var q=String(r);t=t||" ";while(q.length<s){q=t+q}return q},repeat:function(u,t,r){if(t<1){t=0}for(var q=[],s=t;s--;){q.push(u)}return q.join(r||"")},splitWords:function(q){if(q&&typeof q=="string"){return q.replace(p,"").split(k)}return q||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=(function(){var d,k=/(\\.)/g,a=/([gGhHisucUOPZ]|MS)/,f=/([djzmnYycU]|MS)/,j=/\\/gi,c=/\{(\d+)\}/g,g=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),b=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");function h(m){var l=Array.prototype.slice.call(arguments,1);return m.replace(c,function(n,o){return l[o]})}return d={now:Date.now,toString:function(l){if(!l){l=new Date()}var m=Ext.String.leftPad;return l.getFullYear()+"-"+m(l.getMonth()+1,2,"0")+"-"+m(l.getDate(),2,"0")+"T"+m(l.getHours(),2,"0")+":"+m(l.getMinutes(),2,"0")+":"+m(l.getSeconds(),2,"0")},getElapsed:function(m,l){return Math.abs(m-(l||d.now()))},useStrict:false,formatCodeToRegex:function(m,l){var n=d.parseCodes[m];if(n){n=typeof n=="function"?n():n;d.parseCodes[m]=n}return n?Ext.applyIf({c:n.c?h(n.c,l||"{0}"):n.c},n):{g:0,c:null,s:Ext.String.escapeRegex(m)}},parseFunctions:{MS:function(m,l){var n=(m||"").match(g);return n?new Date(((n[1]||"")+n[2])*1):null},time:function(m,l){var n=parseInt(m,10);if(n||n===0){return new Date(n)}return null},timestamp:function(m,l){var n=parseInt(m,10);if(n||n===0){return new Date(n*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return d.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(l){return Ext.Date.monthNames[l].substring(0,3)},getShortDayName:function(l){return Ext.Date.dayNames[l].substring(0,3)},getMonthNumber:function(l){return Ext.Date.monthNumbers[l.substring(0,1).toUpperCase()+l.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(l){return a.test(l.replace(k,""))},formatContainsDateInfo:function(l){return f.test(l.replace(k,""))},unescapeFormat:function(l){return l.replace(j,"")},formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){var q,o,n,m,p;for(q="Y-m-dTH:i:sP",o=[],n=0,m=q.length;n<m;++n){p=q.charAt(n);o.push(p=="T"?"'T'":d.getFormatCode(p))}return o.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(u,l,t,q,o,p,n){q=q||0;o=o||0;p=p||0;n=n||0;var r=d.add(new Date(u<100?100:u,l-1,t,q,o,p,n),d.YEAR,u<100?u-100:0);return u==r.getFullYear()&&l==r.getMonth()+1&&t==r.getDate()&&q==r.getHours()&&o==r.getMinutes()&&p==r.getSeconds()&&n==r.getMilliseconds()},parse:function(m,o,l){var n=d.parseFunctions;if(n[o]==null){d.createParser(o)}return n[o].call(d,m,Ext.isDefined(l)?l:d.useStrict)},parseDate:function(m,n,l){return d.parse(m,n,l)},getFormatCode:function(m){var l=d.formatCodes[m];if(l){l=typeof l=="function"?l():l;d.formatCodes[m]=l}return l||("'"+Ext.String.escape(m)+"'")},createFormat:function(p){var o=[],l=false,n="",m;for(m=0;m<p.length;++m){n=p.charAt(m);if(!l&&n=="\\"){l=true}else{if(l){l=false;o.push("'"+Ext.String.escape(n)+"'")}else{if(n=="\n"){o.push("'\\n'")}else{o.push(d.getFormatCode(n))}}}}d.formatFunctions[p]=Ext.functionFactory("return "+o.join("+"))},createParser:function(u){var m=d.parseRegexes.length,v=1,n=[],t=[],r=false,l="",p=0,q=u.length,s=[],o;for(;p<q;++p){l=u.charAt(p);if(!r&&l=="\\"){r=true}else{if(r){r=false;t.push(Ext.String.escape(l))}else{o=d.formatCodeToRegex(l,v);v+=o.g;t.push(o.s);if(o.g&&o.c){if(o.calcAtEnd){s.push(o.c)}else{n.push(o.c)}}}}}n=n.concat(s);d.parseRegexes[m]=new RegExp("^"+t.join("")+"$","i");d.parseFunctions[u]=Ext.functionFactory("input","strict",h(b,m,n.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var l=[],m=0;m<7;l.push(d.getShortDayName(m)),++m){}return{g:0,c:null,s:"(?:"+l.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+d.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+d.monthNames.join("|")+")"}},M:function(){for(var l=[],m=0;m<12;l.push(d.getShortMonthName(m)),++m){}return Ext.applyIf({s:"("+l.join("|")+")"},d.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var o=[],m=[d.formatCodeToRegex("Y",1),d.formatCodeToRegex("m",2),d.formatCodeToRegex("d",3),d.formatCodeToRegex("H",4),d.formatCodeToRegex("i",5),d.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",d.formatCodeToRegex("P",8).c,"}else{",d.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],p,n;for(p=0,n=m.length;p<n;++p){o.push(m[p].c)}return{g:1,c:o.join(""),s:[m[0].s,"(?:","-",m[1].s,"(?:","-",m[2].s,"(?:","(?:T| )?",m[3].s,":",m[4].s,"(?::",m[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(l,m){return d.format(l,m)},isEqual:function(m,l){if(m&&l){return(m.getTime()===l.getTime())}return !(m||l)},format:function(m,n){var l=d.formatFunctions;if(!Ext.isDate(m)){return""}if(l[n]==null){d.createFormat(n)}return l[n].call(m)+""},getTimezone:function(l){return l.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(l,m){var n=l.getTimezoneOffset();return(n>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(n)/60),2,"0")+(m?":":"")+Ext.String.leftPad(Math.abs(n%60),2,"0")},getDayOfYear:function(o){var n=0,q=Ext.Date.clone(o),l=o.getMonth(),p;for(p=0,q.setDate(1),q.setMonth(0);p<l;q.setMonth(++p)){n+=d.getDaysInMonth(q)}return n+o.getDate()-1},getWeekOfYear:(function(){var l=86400000,m=7*l;return function(o){var p=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()+3)/l,n=Math.floor(p/7),q=new Date(n*m).getUTCFullYear();return n-Math.floor(Date.UTC(q,0,7)/m)+1}}()),isLeapYear:function(l){var m=l.getFullYear();return !!((m&3)==0&&(m%100||(m%400==0&&m)))},getFirstDayOfMonth:function(m){var l=(m.getDay()-(m.getDate()-1))%7;return(l<0)?(l+7):l},getLastDayOfMonth:function(l){return d.getLastDateOfMonth(l).getDay()},getFirstDateOfMonth:function(l){return new Date(l.getFullYear(),l.getMonth(),1)},getLastDateOfMonth:function(l){return new Date(l.getFullYear(),l.getMonth(),d.getDaysInMonth(l))},getDaysInMonth:(function(){var l=[31,28,31,30,31,30,31,31,30,31,30,31];return function(o){var n=o.getMonth();return n==1&&d.isLeapYear(o)?29:l[n]}}()),getSuffix:function(l){switch(l.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(l){return new Date(l.getTime())},isDST:function(l){return new Date(l.getFullYear(),0,1).getTimezoneOffset()!=l.getTimezoneOffset()},clearTime:function(l,p){if(p){return Ext.Date.clearTime(Ext.Date.clone(l))}var n=l.getDate(),m,o;l.setHours(0);l.setMinutes(0);l.setSeconds(0);l.setMilliseconds(0);if(l.getDate()!=n){for(m=1,o=d.add(l,Ext.Date.HOUR,m);o.getDate()!=n;m++,o=d.add(l,Ext.Date.HOUR,m)){}l.setDate(n);l.setHours(o.getHours())}return l},add:function(o,n,r){var s=Ext.Date.clone(o),l=Ext.Date,m,q,p=0;if(!n||r===0){return s}q=r-parseInt(r,10);r=parseInt(r,10);if(r){switch(n.toLowerCase()){case Ext.Date.MILLI:s.setTime(s.getTime()+r);break;case Ext.Date.SECOND:s.setTime(s.getTime()+r*1000);break;case Ext.Date.MINUTE:s.setTime(s.getTime()+r*60*1000);break;case Ext.Date.HOUR:s.setTime(s.getTime()+r*60*60*1000);break;case Ext.Date.DAY:s.setDate(s.getDate()+r);break;case Ext.Date.MONTH:m=o.getDate();if(m>28){m=Math.min(m,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(o),Ext.Date.MONTH,r)).getDate())}s.setDate(m);s.setMonth(o.getMonth()+r);break;case Ext.Date.YEAR:m=o.getDate();if(m>28){m=Math.min(m,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(o),Ext.Date.YEAR,r)).getDate())}s.setDate(m);s.setFullYear(o.getFullYear()+r);break}}if(q){switch(n.toLowerCase()){case Ext.Date.MILLI:p=1;break;case Ext.Date.SECOND:p=1000;break;case Ext.Date.MINUTE:p=1000*60;break;case Ext.Date.HOUR:p=1000*60*60;break;case Ext.Date.DAY:p=1000*60*60*24;break;case Ext.Date.MONTH:m=d.getDaysInMonth(s);p=1000*60*60*24*m;break;case Ext.Date.YEAR:m=(d.isLeapYear(s)?366:365);p=1000*60*60*24*m;break}if(p){s.setTime(s.getTime()+p*q)}}return s},subtract:function(m,l,n){return d.add(m,l,-n)},between:function(m,o,l){var n=m.getTime();return o.getTime()<=n&&n<=l.getTime()},compat:function(){var m=window.Date,l,t=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],q=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],r=t.length,n=q.length,o,u,v;for(v=0;v<r;v++){o=t[v];m[o]=d[o]}for(l=0;l<n;l++){u=q[l];m.prototype[u]=function(){var p=Array.prototype.slice.call(arguments);p.unshift(this);return d[u].apply(d,p)}}},diff:function(n,l,p){var m=Ext.Date,o,q=+l-n;switch(p){case m.MILLI:return q;case m.SECOND:return Math.floor(q/1000);case m.MINUTE:return Math.floor(q/60000);case m.HOUR:return Math.floor(q/3600000);case m.DAY:return Math.floor(q/86400000);case"w":return Math.floor(q/604800000);case m.MONTH:o=(l.getFullYear()*12+l.getMonth())-(n.getFullYear()*12+n.getMonth());if(Ext.Date.add(n,p,o)>l){return o-1}else{return o}case m.YEAR:o=l.getFullYear()-n.getFullYear();if(Ext.Date.add(n,p,o)>l){return o-1}else{return o}}},align:function(m,o,n){var l=new Date(+m);switch(o.toLowerCase()){case Ext.Date.MILLI:return l;break;case Ext.Date.SECOND:l.setUTCSeconds(l.getUTCSeconds()-l.getUTCSeconds()%n);l.setUTCMilliseconds(0);return l;break;case Ext.Date.MINUTE:l.setUTCMinutes(l.getUTCMinutes()-l.getUTCMinutes()%n);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;break;case Ext.Date.HOUR:l.setUTCHours(l.getUTCHours()-l.getUTCHours()%n);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;break;case Ext.Date.DAY:if(n==7||n==14){l.setUTCDate(l.getUTCDate()-l.getUTCDay()+1)}l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;break;case Ext.Date.MONTH:l.setUTCMonth(l.getUTCMonth()-(l.getUTCMonth()-1)%n,1);l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;break;case Ext.Date.YEAR:l.setUTCFullYear(l.getUTCFullYear()-l.getUTCFullYear()%n,1,1);l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return m;break}}}}());Ext.Function=(function(){var b=0,l,d=[],m=[],g=0,h={},f=window,k=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||function(q){var n=Ext.now(),o=Math.max(0,16-(n-b)),p=f.setTimeout(function(){q(n+o)},o);b=n+o;return p},c=function(){var n=d.length,q,o,p;l=null;for(o=0;o<n;o++){p=d[o];q=p[3];if(h[q]){p[0].apply(p[1]||Ext.global,p[2]||m);delete h[q]}}d=d.slice(n)},a=function(){Ext.elevateFunction(c)},j={flexSetter:function(n){return function(p,r){var o,q;if(p!==null){if(typeof p!=="string"){for(o in p){if(p.hasOwnProperty(o)){n.call(this,o,p[o])}}if(Ext.enumerables){for(q=Ext.enumerables.length;q--;){o=Ext.enumerables[q];if(p.hasOwnProperty(o)){n.call(this,o,p[o])}}}}else{n.call(this,p,r)}}return this}},bind:function(q,p,o,n){if(arguments.length===2){return function(){return q.apply(p,arguments)}}var s=q,r=Array.prototype.slice;return function(){var t=o||arguments;if(n===true){t=r.call(arguments,0);t=t.concat(o)}else{if(typeof n=="number"){t=r.call(arguments,0);Ext.Array.insert(t,n,o)}}return s.apply(p||Ext.global,t)}},bindCallback:function(r,q,p,o,n){return function(){var s=Ext.Array.slice(arguments);return Ext.callback(r,q,p?p.concat(s):s,o,n)}},pass:function(p,n,o){if(!Ext.isArray(n)){if(Ext.isIterable(n)){n=Ext.Array.clone(n)}else{n=n!==undefined?[n]:[]}}return function(){var q=n.slice();q.push.apply(q,arguments);return p.apply(o||this,q)}},alias:function(o,n){return function(){return o[n].apply(o,arguments)}},clone:function(n){return function(){return n.apply(this,arguments)}},createInterceptor:function(q,p,o,n){if(!Ext.isFunction(p)){return q}else{n=Ext.isDefined(n)?n:null;return function(){var s=this,r=arguments;p.target=s;p.method=q;return(p.apply(o||s||Ext.global,r)!==false)?q.apply(s||Ext.global,r):n}}},createDelayed:function(r,p,q,o,n){if(q||o){r=Ext.Function.bind(r,q,o,n)}return function(){var t=this,s=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(r,t,s)}else{r.apply(t,s)}},p)}},defer:function(r,p,q,o,n){r=Ext.Function.bind(r,q,o,n);if(p>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(r)}else{r()}},p)}r();return 0},interval:function(r,p,q,o,n){r=Ext.Function.bind(r,q,o,n);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(r)}else{r()}},p)},createSequence:function(o,p,n){if(!p){return o}else{return function(){var q=o.apply(this,arguments);p.apply(n||this,arguments);return q}}},createBuffered:function(r,o,q,p){var n;return function(){var t=p||Array.prototype.slice.call(arguments,0),s=q||this;if(n){clearTimeout(n)}n=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(r,s,t)}else{r.apply(s,t)}},o)}},createAnimationFrame:function(q,p,o,r){var n;r=r||3;return function(){var s=o||Array.prototype.slice.call(arguments,0);p=p||this;if(r===3&&n){j.cancelAnimationFrame(n)}if((r&1)||!n){n=j.requestAnimationFrame(function(){n=null;q.apply(p,s)})}}},requestAnimationFrame:function(q,p,n){var r=++g,o=Array.prototype.slice.call(arguments,0);o[3]=r;h[r]=1;d.push(o);if(!l){l=k(Ext.elevateFunction?a:c)}return r},cancelAnimationFrame:function(n){delete h[n]},createThrottled:function(r,o,q){var s=0,n,p,u,t=function(){if(Ext.elevateFunction){Ext.elevateFunction(r,q,p)}else{r.apply(q,p)}s=Ext.now();u=null};return function(){if(!q){q=this}n=Ext.now()-s;p=arguments;if(n>=o){clearTimeout(u);t()}else{if(!u){u=Ext.defer(t,o-n)}}}},createBarrier:function(p,o,n){return function(){if(!--p){o.apply(n,arguments)}}},interceptBefore:function(o,n,q,p){var r=o[n]||Ext.emptyFn;return(o[n]=function(){var s=q.apply(p||this,arguments);r.apply(this,arguments);return s})},interceptAfter:function(o,n,q,p){var r=o[n]||Ext.emptyFn;return(o[n]=function(){r.apply(this,arguments);return q.apply(p||this,arguments)})},makeCallback:function(o,n){return function(){return n[o].apply(n,arguments)}}};Ext.defer=j.defer;Ext.interval=j.interval;Ext.pass=j.pass;Ext.bind=j.bind;Ext.deferCallback=j.requestAnimationFrame;return j})();Ext.Number=new function(){var d=this,c=(0.9).toFixed()!=="1",b=Math,a={count:false,inclusive:false,wrap:true};Ext.apply(d,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:true},a),INCLUSIVE:Ext.applyIf({inclusive:true},a),NOWRAP:Ext.applyIf({wrap:false},a)},clipIndices:function(m,n,h){h=h||a;var g=0,l=h.wrap,k,f,j;n=n||[];for(j=0;j<2;++j){k=f;f=n[j];if(f==null){f=g}else{if(j&&h.count){f+=k;f=(f>m)?m:f}else{if(l){f=(f<0)?(m+f):f}if(j&&h.inclusive){++f}f=(f<0)?0:((f>m)?m:f)}}g=m}n[0]=k;n[1]=(f<k)?k:f;return n},constrain:function(j,h,g){var f=parseFloat(j);if(h===null){h=j}if(g===null){g=j}return(f<h)?h:((f>g)?g:f)},snap:function(j,g,h,k){var f;if(j===undefined||j<h){return h||0}if(g){f=j%g;if(f!==0){j-=f;if(f*2>=g){j+=g}else{if(f*2<-g){j-=g}}}}return d.constrain(j,h,k)},snapInRange:function(j,f,h,k){var g;h=(h||0);if(j===undefined||j<h){return h}if(f&&(g=((j-h)%f))){j-=g;g*=2;if(g>=f){j+=f}}if(k!==undefined){if(j>(k=d.snapInRange(k,f,h))){j=k}}return j},toFixed:c?function(h,f){f=f||0;var g=b.pow(10,f);return(b.round(h*g)/g).toFixed(f)}:function(g,f){return g.toFixed(f)},from:function(g,f){if(isFinite(g)){g=parseFloat(g)}return !isNaN(g)?g:f},randomInt:function(g,f){return b.floor(b.random()*(f-g+1)+g)},correctFloat:function(f){return parseFloat(f.toPrecision(14))}});Ext.num=function(){return d.from.apply(this,arguments)}}();(function(){var a=function(){},b=Ext.Object={chain:Object.create||function(d){a.prototype=d;var c=new a();a.prototype=null;return c},clear:function(c){for(var d in c){delete c[d]}return c},freeze:Object.freeze?function(f,c){if(f&&typeof f==="object"&&!Object.isFrozen(f)){Object.freeze(f);if(c){for(var d in f){b.freeze(f[d],c)}}}return f}:Ext.identityFn,toQueryObjects:function(f,k,d){var c=b.toQueryObjects,j=[],g,h;if(Ext.isArray(k)){for(g=0,h=k.length;g<h;g++){if(d){j=j.concat(c(f+"["+g+"]",k[g],true))}else{j.push({name:f,value:k[g]})}}}else{if(Ext.isObject(k)){for(g in k){if(k.hasOwnProperty(g)){if(d){j=j.concat(c(f+"["+g+"]",k[g],true))}else{j.push({name:f,value:k[g]})}}}}else{j.push({name:f,value:k})}}return j},toQueryString:function(g,d){var h=[],f=[],l,k,m,c,n;for(l in g){if(g.hasOwnProperty(l)){h=h.concat(b.toQueryObjects(l,g[l],d))}}for(k=0,m=h.length;k<m;k++){c=h[k];n=c.value;if(Ext.isEmpty(n)){n=""}else{if(Ext.isDate(n)){n=Ext.Date.toString(n)}}f.push(encodeURIComponent(c.name)+"="+encodeURIComponent(String(n)))}return f.join("&")},fromQueryString:function(d,r){var m=d.replace(/^\?/,"").split("&"),u={},s,k,w,n,q,g,o,p,c,h,t,l,v,f;for(q=0,g=m.length;q<g;q++){o=m[q];if(o.length>0){k=o.split("=");w=decodeURIComponent(k[0]);n=(k[1]!==undefined)?decodeURIComponent(k[1]):"";if(!r){if(u.hasOwnProperty(w)){if(!Ext.isArray(u[w])){u[w]=[u[w]]}u[w].push(n)}else{u[w]=n}}else{h=w.match(/(\[):?([^\]]*)\]/g);t=w.match(/^([^\[]+)/);w=t[0];l=[];if(h===null){u[w]=n;continue}for(p=0,c=h.length;p<c;p++){v=h[p];v=(v.length===2)?"":v.substring(1,v.length-1);l.push(v)}l.unshift(w);s=u;for(p=0,c=l.length;p<c;p++){v=l[p];if(p===c-1){if(Ext.isArray(s)&&v===""){s.push(n)}else{s[v]=n}}else{if(s[v]===undefined||typeof s[v]==="string"){f=l[p+1];s[v]=(Ext.isNumeric(f)||f==="")?[]:{}}s=s[v]}}}}}return u},each:function(d,h,g){var c=Ext.enumerables,f,j;g=g||d;for(j in d){if(d.hasOwnProperty(j)){if(h.call(g,j,d[j],d)===false){return}}}if(c){for(f=c.length;f--;){if(d.hasOwnProperty(j=c[f])){if(h.call(g,j,d[j],d)===false){return}}}}},eachValue:function(d,h,g){var c=Ext.enumerables,f,j;g=g||d;for(j in d){if(d.hasOwnProperty(j)){if(h.call(g,d[j])===false){return}}}if(c){for(f=c.length;f--;){if(d.hasOwnProperty(j=c[f])){if(h.call(g,d[j])===false){return}}}}},merge:function(k){var h=1,j=arguments.length,c=b.merge,f=Ext.clone,g,m,l,d;for(;h<j;h++){g=arguments[h];for(m in g){l=g[m];if(l&&l.constructor===Object){d=k[m];if(d&&d.constructor===Object){c(d,l)}else{k[m]=f(l)}}else{k[m]=l}}}return k},mergeIf:function(c){var h=1,j=arguments.length,f=Ext.clone,d,g,k;for(;h<j;h++){d=arguments[h];for(g in d){if(!(g in c)){k=d[g];if(k&&k.constructor===Object){c[g]=f(k)}else{c[g]=k}}}}return c},getKey:function(c,f){for(var d in c){if(c.hasOwnProperty(d)&&c[d]===f){return d}}return null},getValues:function(d){var c=[],f;for(f in d){if(d.hasOwnProperty(f)){c.push(d[f])}}return c},getKeys:(typeof Object.keys=="function")?function(c){if(!c){return[]}return Object.keys(c)}:function(c){var d=[],f;for(f in c){if(c.hasOwnProperty(f)){d.push(f)}}return d},getSize:function(c){var d=0,f;for(f in c){if(c.hasOwnProperty(f)){d++}}return d},isEmpty:function(c){for(var d in c){if(c.hasOwnProperty(d)){return false}}return true},equals:(function(){var c=function(g,f){var d;for(d in g){if(g.hasOwnProperty(d)){if(g[d]!==f[d]){return false}}}return true};return function(f,d){if(f===d){return true}if(f&&d){return c(f,d)&&c(d,f)}else{if(!f&&!d){return f===d}else{return false}}}})(),fork:function(h){var g=Ext.Array,c,d,f;if(h&&h.constructor===Object){c=b.chain(h);for(d in h){f=h[d];if(f){if(f.constructor===Object){c[d]=b.fork(f)}else{if(f instanceof Array){c[d]=Ext.Array.clone(f)}}}}}else{c=h}return c},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(d,c,f){if(!Object.prototype.__defineGetter__){return}if(f.get){d.__defineGetter__(c,f.get)}if(f.set){d.__defineSetter__(c,f.set)}},classify:function(g){var f=g,j=[],d={},c=function(){var l=0,m=j.length,n;for(;l<m;l++){n=j[l];this[n]=new d[n]()}},h,k;for(h in g){if(g.hasOwnProperty(h)){k=g[h];if(k&&k.constructor===Object){j.push(h);d[h]=b.classify(k)}}}c.prototype=f;return c}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf}());Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:(function(){var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,d=/([\W]{1})/g,b=/^(\d)/g,a=function(h,g){return"\\"+g},f=function(h,g){return"\\00"+g.charCodeAt(0).toString(16)+" "};return function(g){return c.test(g)?g:g.replace(d,a).replace(b,f)}}()),callback:function(j,g,d,c,b,h){if(!j){return}var f=(g in Ext._namedScopes);if(j.charAt){if((!g||f)&&b){g=b.resolveListenerScope(f?g:h)}j=g[j]}else{if(f){g=h||b}else{if(!g){g=b}}}var a;if(j&&Ext.isFunction(j)){g=g||Ext.global;if(c){Ext.defer(j,c,g,d)}else{if(d){a=j.apply(g,d)}else{a=j.call(g)}}}return a},coerce:function(f,d){var c=Ext.typeOf(f),b=Ext.typeOf(d),a=typeof f==="string";if(c!==b){switch(b){case"string":return String(f);case"number":return Number(f);case"boolean":return a&&(!f||f==="false")?false:Boolean(f);case"null":return a&&(!f||f==="null")?null:f;case"undefined":return a&&(!f||f==="undefined")?undefined:f;case"date":return a&&isNaN(f)?Ext.Date.parse(f,Ext.Date.defaultFormat):Date(Number(f))}}return f},copyTo:function(b,d,g,f){if(typeof g=="string"){g=g.split(/[,;\s]/)}var h,c=g?g.length:0,a;for(h=0;h<c;h++){a=g[h];if(f||d.hasOwnProperty(a)){b[a]=d[a]}}return b},extend:(function(){var a=Object.prototype.constructor,b=function(d){for(var c in d){if(!d.hasOwnProperty(c)){continue}this[c]=d[c]}};return function(c,j,g){if(Ext.isObject(j)){g=j;j=c;c=g.constructor!==a?g.constructor:function(){j.apply(this,arguments)}}var f=function(){},d,h=j.prototype;f.prototype=h;d=c.prototype=new f();d.constructor=c;c.superclass=h;if(h.constructor===a){h.constructor=j}c.override=function(k){Ext.override(c,k)};d.override=b;d.proto=d;c.override(g);c.extend=function(k){return Ext.extend(c,k)};return c}}()),iterate:function(a,c,b){if(Ext.isEmpty(a)){return}if(b===undefined){b=a}if(Ext.isIterable(a)){Ext.Array.each.call(Ext.Array,a,c,b)}else{Ext.Object.each.call(Ext.Object,a,c,b)}},urlEncode:function(){var a=Ext.Array.from(arguments),b="";if(Ext.isString(a[1])){b=a[1]+"&";a[1]=false}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(c){var b=Ext._scrollbarSize;if(c||!b){var a=document.body,d=document.createElement("div");d.style.width=d.style.height="100px";d.style.overflow="scroll";d.style.position="absolute";a.appendChild(d);Ext._scrollbarSize=b={width:d.offsetWidth-d.clientWidth,height:d.offsetHeight-d.clientHeight};a.removeChild(d)}return b},typeOf:(function(){var a=/\S/,c=Object.prototype.toString,d={number:1,string:1,"boolean":1,"undefined":1},b={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(h){if(h===null){return"null"}var g=typeof h,f,j;if(d[g]){return g}f=b[j=c.call(h)];if(f){return f}if(g==="function"){return"function"}if(g==="object"){if(h.nodeType!==undefined){if(h.nodeType===3){return a.test(h.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}return j}}()),factory:function(b,f,a,g){var d=Ext.ClassManager,c;if(!b||b.isInstance){if(a&&a!==b){a.destroy()}return b}if(g){if(typeof b=="string"){return d.instantiateByAlias(g+"."+b)}else{if(Ext.isObject(b)&&"type" in b){return d.instantiateByAlias(g+"."+b.type,b)}}}if(b===true){return a||Ext.create(f)}if("xtype" in b){c=d.instantiateByAlias("widget."+b.xtype,b)}else{if("xclass" in b){c=Ext.create(b.xclass,b)}}if(c){if(a){a.destroy()}return c}if(a){return a.setConfig(b)}return Ext.create(f,b)},log:(function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}())});(function(){var d=[""],h=/([^\d\.])/,b=/[^\d]/g,a=/[\-+]/g,g=/\s/g,c=/_/g,f;Ext.Version=f=function(r,n){var s=this,l=s.padModes,j,p,m,o,t,k,q;if(r.isVersion){r=r.version}s.version=q=String(r).toLowerCase().replace(c,".").replace(a,"");j=q.charAt(0);if(j in l){q=q.substring(1);m=l[j]}else{m=n?l[n]:0}s.pad=m;k=q.search(h);s.shortVersion=q;if(k!==-1){s.release=t=q.substr(k,r.length);s.shortVersion=q.substr(0,k);t=f.releaseValueMap[t]||t}s.releaseValue=t||m;s.shortVersion=s.shortVersion.replace(b,"");s.parts=o=q.split(".");for(p=o.length;p--;){o[p]=parseInt(o[p],10)}if(m===Infinity){o.push(m)}s.major=o[0]||m;s.minor=o[1]||m;s.patch=o[2]||m;s.build=o[3]||m;return s};f.prototype={isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",compareTo:function(t){var u=this,n=u.pad,r=u.parts,v=r.length,m=t.isVersion?t:new f(t),k=m.pad,q=m.parts,p=q.length,j=Math.max(v,p),o,l,s;for(o=0;o<j;o++){l=(o<v)?r[o]:n;s=(o<p)?q[o]:k;if(l<s){return -1}if(l>s){return 1}}l=u.releaseValue;s=m.releaseValue;if(l<s){return -1}if(l>s){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(j){return this.compareTo(j)>0},isGreaterThanOrEqual:function(j){return this.compareTo(j)>=0},isLessThan:function(j){return this.compareTo(j)<0},isLessThanOrEqual:function(j){return this.compareTo(j)<=0},equals:function(j){return this.compareTo(j)===0},match:function(j){j=String(j);return this.version.substr(0,j.length)===j},toArray:function(){var j=this;return[j.getMajor(),j.getMinor(),j.getPatch(),j.getBuild(),j.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(j){return this.compareTo(j)>0},lt:function(j){return this.compareTo(j)<0},gtEq:function(j){return this.compareTo(j)>=0},ltEq:function(j){return this.compareTo(j)<=0}};Ext.apply(f,{aliases:{from:{extjs:"ext",core:"sencha-core"},to:{ext:["extjs"],"sencha-core":["core"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(j){return !j?0:(isNaN(j)?this.releaseValueMap[j]||j:parseInt(j,10))},compare:function(l,k){var j=l.isVersion?l:new f(l);return j.compareTo(k)},set:function(o,m,l){var k=f.aliases.to[m],j=l.isVersion?l:new f(l),n;o[m]=j;if(k){for(n=k.length;n-->0;){o[k[n]]=j}}return j}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(k){var j=Ext.compatVersions,l;if(!k){l=j.ext||j.touch||j.core}else{l=j[f.aliases.from[k]||k]}return l||Ext.getVersion(k)},setCompatVersion:function(k,j){f.set(Ext.compatVersions,k,j)},setVersion:function(k,j){Ext.lastRegisteredVersion=f.set(Ext.versions,k,j);return this},getVersion:function(k){var j=Ext.versions;if(!k){return j.ext||j.touch||j.core}return j[f.aliases.from[k]||k]},checkVersion:function(p,x){var t=Ext.isArray(p),l=f.aliases.from,y=t?p:d,k=y.length,m=Ext.versions,w=m.ext||m.touch,q,v,s,n,o,j,z,r,u;if(!t){d[0]=p}for(q=0;q<k;++q){if(!Ext.isString(z=y[q])){s=Ext.checkVersion(z.and||z.or,!z.or);if(z.not){s=!s}}else{if(z.indexOf(" ")>=0){z=z.replace(g,"")}v=z.indexOf("@");if(v<0){r=z;u=w}else{j=z.substring(0,v);if(!(u=m[l[j]||j])){if(x){return false}continue}r=z.substring(v+1)}v=r.indexOf("-");if(v<0){if(r.charAt(v=r.length-1)==="+"){n=r.substring(0,v);o=null}else{n=o=r}}else{if(v>0){n=r.substring(0,v);o=r.substring(v+1)}else{n=null;o=r.substring(v+1)}}s=true;if(n){n=new f(n,"~");s=n.ltEq(u)}if(s&&o){o=new f(o,"~");s=o.gtEq(u)}}if(s){if(!x){return true}}else{if(x){return false}}}return !!x},deprecate:function(j,l,m,k){if(f.compare(Ext.getVersion(j),l)<1){m.call(k)}}})}());(function(d){var f=(d&&d.packages)||{},c=d&&d.compatibility,b,a;for(b in f){a=f[b];Ext.setVersion(b,a.version)}if(c){if(Ext.isString(c)){Ext.setCompatVersion("core",c)}else{for(b in c){Ext.setCompatVersion(b,c[b])}}}if(!f.ext&&!f.touch){Ext.setVersion("ext","5")}})(Ext.manifest);Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b;c.names={internal:"_"+b,initializing:"is"+a+"Initializing",apply:"apply"+a,update:"update"+a,get:"get"+a,set:"set"+a,initGet:"initGet"+a,doSet:"doSet"+a,changeEvent:b.toLowerCase()+"change"};c.root=c};Ext.Config.map={};Ext.Config.get=function(b){var c=Ext.Config.map,a=c[b]||(c[b]=new Ext.Config(b));return a};Ext.Config.prototype={self:Ext.Config,isConfig:true,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(g,b,f,d){var a,c;if(!b){a=g}else{if(!g){a=b}else{a=Ext.Object.chain(b);for(c in g){if(!d||!(c in a)){a[c]=g[c]}}}}return a},mergeSets:function(f,c,a){var b=c?Ext.Object.chain(c):{},d,g;if(f instanceof Array){for(d=f.length;d--;){g=f[d];if(!a||!(g in b)){b[g]=true}}}else{if(f){if(f.constructor===Object){for(d in f){g=f[d];if(!a||!(d in b)){b[d]=g}}}else{if(!a||!(f in b)){b[f]=true}}}}return b},makeGetter:function(){var a=this.name,b=this.names.internal;return function(){var c=this.$configPrefixed?b:a;return this[c]}},makeInitGetter:function(){var a=this.name,f=this.names,d=f.set,b=f.get,c=f.initializing;return function(){var g=this;g[c]=true;delete g[b];g[d](g.config[a]);delete g[c];return g[b].apply(g,arguments)}},makeSetter:function(){var a=this.name,f=this.names,c=f.internal,d=f.get,b=f.apply,h=f.update,g;g=function(m){var l=this,k=l.$configPrefixed?c:a,j=l[k];delete l[d];if(!l[b]||(m=l[b](m,j))!==undefined){if(m!==(j=l[k])){l[k]=m;if(l[h]){l[h](m,j)}}}return l};g.$isDefault=true;return g}};(function(){var b=Ext.Config,c=b.map,a=Ext.Object;Ext.Configurator=function(d){var g=this,f=d.prototype,h=d.superclass?d.superclass.self.$config:null;g.cls=d;if(h){g.configs=a.chain(h.configs);g.cachedConfigs=a.chain(h.cachedConfigs);g.initMap=a.chain(h.initMap);g.values=a.chain(h.values)}else{g.configs={};g.cachedConfigs={};g.initMap={};g.values={}}f.config=f.defaultConfig=g.values;d.$config=g};Ext.Configurator.prototype={self:Ext.Configurator,initList:null,add:function(v,d){var w=this,j=w.cls,m=w.configs,x=w.cachedConfigs,o=w.initMap,r=j.prototype,y=d&&d.$config.configs,f=w.values,l,n,u,g,h,k,z,q,p,t;for(z in v){t=v[z];l=t&&t.constructor===Object;n=l&&"$value" in t?t:null;if(n){u=!!n.cached;t=n.$value}g=n&&n.merge;h=m[z];if(h){if(d){g=h.merge;if(!g){continue}n=null}else{g=g||h.merge}k=f[z];if(g){t=g.call(h,t,k,j,d)}else{if(l){if(k&&k.constructor===Object){t=a.merge({},k,t)}}}}else{if(y){h=y[z];n=null}else{h=b.get(z)}m[z]=h;if(h.cached||u){x[z]=true}q=h.names;if(!r[p=q.get]){r[p]=h.getGetter()}if(!r[p=q.set]){r[p]=h.getSetter()}}if(n){if(h.owner!==j){m[z]=h=Ext.Object.chain(h);h.owner=j}Ext.apply(h,n);delete h.$value}if(t!==null){o[z]=true}else{if(r.$configPrefixed){r[m[z].names.internal]=null}else{r[m[z].name]=null}if(z in o){o[z]=false}}f[z]=t}},configure:function(z,m){var B=this,l=B.configs,n=B.initMap,p=B.initListMap,x=B.initList,q=B.cls.prototype,d=a.fork(B.values),w=!z.$configStrict,r=0,t=!x,f,h,j,D,v,u,k,o,C,s,A,g,y;if(t){B.initList=x=[];B.initListMap=p={};z.isFirstInstance=true;for(C in n){D=n[C];h=l[C];A=h.cached;if(D){o=h.names;s=d[C];if(!q[o.set].$isDefault||q[o.apply]||q[o.update]||typeof s==="object"){if(A){(f||(f=[])).push(h)}else{x.push(h);p[C]=true}z[o.get]=h.initGetter||h.getInitGetter()}else{q[h.getInternalName(q)]=s}}else{if(A){q[h.getInternalName(q)]=undefined}}}}k=f&&f.length;if(k){for(v=0;v<k;++v){u=f[v].getInternalName(q);z[u]=null}for(v=0;v<k;++v){o=(h=f[v]).names;j=o.get;if(z.hasOwnProperty(j)){z[o.set](d[h.name]);delete z[j]}}for(v=0;v<k;++v){u=f[v].getInternalName(q);q[u]=z[u];delete z[u]}}if(t){if(z.afterCachedConfig&&!z.afterCachedConfig.$nullFn){z.afterCachedConfig(m)}}z.isConfiguring=true;z.config=d;for(v=0,k=x.length;v<k;++v){h=x[v];z[h.names.get]=h.initGetter||h.getInitGetter()}if(z.transformInstanceConfig){m=z.transformInstanceConfig(m)}if(m){for(C in m){s=m[C];h=l[C];if(!h){if(w){z[C]=s}}else{if(!h.lazy){++r}if(!p[C]){z[h.names.get]=h.initGetter||h.getInitGetter()}g=h.merge;if(g){s=g.call(h,s,d[C],z)}else{if(s&&s.constructor===Object){y=d[C];if(y&&y.constructor===Object){s=a.merge(d[C],s)}else{s=Ext.clone(s)}}}}d[C]=s}}if(z.beforeInitConfig&&!z.beforeInitConfig.$nullFn){if(z.beforeInitConfig(m)===false){return}}if(m){for(C in m){if(!r){break}h=l[C];if(h&&!h.lazy){--r;o=h.names;j=o.get;if(z.hasOwnProperty(j)){z[o.set](d[C]);delete z[o.get]}}}}for(v=0,k=x.length;v<k;++v){h=x[v];o=h.names;j=o.get;if(!h.lazy&&z.hasOwnProperty(j)){z[o.set](d[h.name]);delete z[j]}}delete z.isConfiguring},getCurrentConfig:function(f){var d=f.defaultConfig,h={},g;for(g in d){h[g]=f[c[g].names.get]()}return h},merge:function(n,l,g){var j=this.configs,f,m,d,h,k;for(f in g){m=g[f];h=j[f];if(h){k=h.merge;if(k){m=k.call(h,m,l[f],n)}else{if(m&&m.constructor===Object){d=l[f];if(d&&d.constructor===Object){m=Ext.Object.merge(d,m)}else{m=Ext.clone(m)}}}}l[f]=m}return l},reconfigure:function(t,o,v){var k=t.config,u=t.initialConfig,l=[],s=t.$configStrict,p=this.configs,g=v&&v.defaults,j=v&&v.strict===false,n,r,h,m,d,q,f;for(d in o){if(g&&t.hasOwnProperty(d)){continue}k[d]=o[d];n=p[d];if(n){t[n.names.get]=n.initGetter||n.getInitGetter()}else{if(s){continue}}l.push(d)}for(h=0,m=l.length;h<m;h++){d=l[h];n=p[d];if(n){q=n.names;r=q.get;if(t.hasOwnProperty(r)){t[q.set](o[d]);delete t[r]}}else{if(!s){n=c[d]||Ext.Config.get(d);q=n.names;if(t[q.set]){t[q.set](o[d])}else{if(j){t[d]=o[d]}}}}}}}}());Ext.Base=(function(c){var b=[],k,m=[],n=function(r,q){var t=this,p,o,s;if(r){o=Ext.Config.map[r];s=o.names.get;if(q&&t.hasOwnProperty(s)){p=t.config[r]}else{p=t[s]()}}else{p=t.getCurrentConfig()}return p},g=function(o){return function(){return this[o].apply(this,arguments)}},a=Ext.Version,j=/^\d/,l={},f={},h=function(){},d=h.prototype;Ext.apply(h,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(u){var D=this,p=[],r=Ext.getCompatVersion(u.name),C,y,t,z,E,w,B,v,A,F,x,o,s,q;for(y in u){if(j.test(y)){q=new Ext.Version(y);q.deprecations=u[y];p.push(q)}}p.sort(a.compare);for(t=p.length;t--;){C=(q=p[t]).deprecations;E=D.prototype;s=C.statics;w=r&&r.lt(q);if(!w){break}while(C){A=C.methods;if(A){for(F in A){o=A[F];v=null;if(!o){}else{if(Ext.isString(o)){if(w){v=g(o)}}else{z="";if(o.message||o.fn){o=o.fn}B=E.hasOwnProperty(F)&&E[F];if(w&&o){o.$owner=D;o.$name=F;if(B){o.$previous=B}v=o}}}if(v){E[F]=v}}}C=s;s=null;E=D}}},extend:function(s){var u=this,o=s.prototype,q,r,t,p,v;q=u.prototype=Ext.Object.chain(o);q.self=u;u.superclass=q.superclass=o;if(!s.$isClass){for(r in d){if(r in q){q[r]=d[r]}}}v=o.$inheritableStatics;if(v){for(r=0,t=v.length;r<t;r++){p=v[r];if(!u.hasOwnProperty(p)){u[p]=s[p]}}}if(s.$onExtended){u.$onExtended=s.$onExtended.slice()}u.getConfigurator()},$onExtended:[],triggerExtended:function(){var q=this.$onExtended,p=q.length,o,r;if(p>0){for(o=0;o<p;o++){r=q[o];r.fn.apply(r.scope||this,arguments)}}},onExtended:function(p,o){this.$onExtended.push({fn:p,scope:o});return this},addStatics:function(o){this.addMembers(o,true);return this},addInheritableStatics:function(p){var s,o,r=this.prototype,q,t;s=r.$inheritableStatics;o=r.$hasInheritableStatics;if(!s){s=r.$inheritableStatics=[];o=r.$hasInheritableStatics={}}for(q in p){if(p.hasOwnProperty(q)){t=p[q];this[q]=t;if(!o[q]){o[q]=true;s.push(q)}}}return this},addMembers:function(s,D,p){var B=this,w=Ext.Function.clone,z=D?B:B.prototype,t=!D&&z.defaultConfig,C=Ext.enumerables,x=s.privates,y,v,A,u,o,q,r;if(x){delete s.privates;if(!D){r=x.statics;delete x.statics}B.addMembers(x,D,q);if(r){B.addMembers(r,true,q)}}for(o in s){if(s.hasOwnProperty(o)){u=s[o];if(typeof u==="function"&&!u.$isClass&&!u.$nullFn){if(u.$owner){u=w(u)}if(z.hasOwnProperty(o)){u.$previous=z[o]}u.$owner=B;u.$name=o}else{if(t&&(o in t)&&!z.config.hasOwnProperty(o)){(y||(y={}))[o]=u;continue}}z[o]=u}}if(y){B.addConfig(y)}if(C){for(v=0,A=C.length;v<A;++v){if(s.hasOwnProperty(o=C[v])){u=s[o];if(u&&!u.$nullFn){if(u.$owner){u=w(u)}u.$owner=B;u.$name=o;if(z.hasOwnProperty(o)){u.$previous=z[o]}}z[o]=u}}}return this},addMember:function(o,p){l[o]=p;this.addMembers(l);delete l[o];return this},borrow:function(u,o){var q=u.prototype,s={},r,t,p;o=Ext.Array.from(o);for(r=0,t=o.length;r<t;r++){p=o[r];s[p]=q[p]}return this.addMembers(s)},override:function(p){var r=this,u=p.statics,t=p.inheritableStatics,q=p.config,o=p.mixins,s=p.cachedConfig;if(u||t||q){p=Ext.apply({},p)}if(u){r.addMembers(u,true);delete p.statics}if(t){r.addInheritableStatics(t);delete p.inheritableStatics}if(q){r.addConfig(q);delete p.config}if(s){r.addCachedConfig(s);delete p.cachedConfig}delete p.mixins;r.addMembers(p);if(o){r.mixin(o)}return r},callParent:function(o){var p;return(p=this.callParent.caller)&&(p.$previous||((p=p.$owner?p:p.caller)&&p.$owner.superclass.self[p.$name])).apply(this,o||b)},callSuper:function(o){var p;return(p=this.callSuper.caller)&&((p=p.$owner?p:p.caller)&&p.$owner.superclass.self[p.$name]).apply(this,o||b)},mixin:function(o,p){var u=this,A,w,z,v,q,t,y,x,s;if(typeof o!=="string"){s=o;if(s instanceof Array){for(q=0,t=s.length;q<t;q++){A=s[q];u.mixin(A.prototype.mixinId||A.$className,A)}}else{for(var r in s){u.mixin(r,s[r])}}return}A=p.prototype;w=u.prototype;if(A.onClassMixedIn){A.onClassMixedIn.call(p,u)}if(!w.hasOwnProperty("mixins")){if("mixins" in w){w.mixins=Ext.Object.chain(w.mixins)}else{w.mixins={}}}for(z in A){x=A[z];if(z==="mixins"){Ext.applyIf(w.mixins,x)}else{if(!(z==="mixinId"||z==="config")&&(w[z]===undefined)){w[z]=x}}}v=A.$inheritableStatics;if(v){for(q=0,t=v.length;q<t;q++){y=v[q];if(!u.hasOwnProperty(y)){u[y]=p[y]}}}if("config" in A){u.addConfig(A.config,p)}w.mixins[o]=A;if(A.afterClassMixedIn){A.afterClassMixedIn.call(p,u)}return u},addConfig:function(p,q){var o=this.$config||this.getConfigurator();o.add(p,q)},addCachedConfig:function(o,q){var r={},p;for(p in o){r[p]={cached:true,$value:o[p]}}this.addConfig(r,q)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:c(function(p,o){f[p]=function(){return this[o].apply(this,arguments)};this.override(f);delete f[p]})});for(k in h){if(h.hasOwnProperty(k)){m.push(k)}}h.$staticMembers=m;h.getConfigurator();h.addMembers({$className:"Ext.Base",isInstance:true,$configPrefixed:true,$configStrict:true,isConfiguring:false,isFirstInstance:false,statics:function(){var p=this.statics.caller,o=this.self;if(!p){return o}return p.$owner},callParent:function(p){var q,o=(q=this.callParent.caller)&&(q.$previous||((q=q.$owner?q:q.caller)&&q.$owner.superclass[q.$name]));return o.apply(this,p||b)},callSuper:function(p){var q,o=(q=this.callSuper.caller)&&((q=q.$owner?q:q.caller)&&q.$owner.superclass[q.$name]);return o.apply(this,p||b)},self:h,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(q){var p=this,o=p.getConfigurator();p.initConfig=Ext.emptyFn;p.initialConfig=q||{};o.configure(p,q);return p},beforeInitConfig:Ext.emptyFn,getConfig:n,setConfig:function(q,s,p){var r=this,o;if(q){if(typeof q==="string"){o={};o[q]=s}else{o=q}r.getConfigurator().reconfigure(r,o,p)}return r},getCurrentConfig:function(){var o=this.getConfigurator();return o.getCurrentConfig(this)},hasConfig:function(o){return o in this.defaultConfig},getInitialConfig:function(p){var o=this.config;if(!p){return o}return o[p]},$links:null,link:function(p,r){var q=this,o=q.$links||(q.$links={});o[p]=true;q[p]=r;return r},unlink:function(t){var r=this,o,q,p,s;for(o=0,q=t.length;o<q;o++){p=t[o];s=r[p];if(s){if(s.isInstance&&!s.isDestroyed){s.destroy()}else{if(s.parentNode&&"nodeType" in s){s.parentNode.removeChild(s)}}}r[p]=null}return r},destroy:function(){var p=this,o=p.$links;p.destroy=Ext.emptyFn;p.isDestroyed=true;if(o){p.$links=null;p.unlink(Ext.Object.getKeys(o))}}});d.callOverridden=d.callParent;return h}(Ext.Function.flexSetter));(function(){var c,b=Ext.Base,d=b.$staticMembers;function a(g){function f(){return this.constructor.apply(this,arguments)||null}return f}Ext.Class=c=function(g,h,f){if(typeof g!="function"){f=h;h=g;g=null}if(!h){h={}}g=c.create(g,h);c.process(g,h,f);return g};Ext.apply(c,{makeCtor:a,onBeforeCreated:function(g,h,f){g.addMembers(h);f.onCreated.call(g,g)},create:function(f,j){var h=d.length,g;if(!f){f=a()}while(h--){g=d[h];f[g]=b[g]}return f},process:function(f,n,h){var g=n.preprocessors||c.defaultPreprocessors,q=this.preprocessors,t={onBeforeCreated:this.onBeforeCreated},s=[],u,m,l,r,k,p,o;delete n.preprocessors;f._classHooks=t;for(l=0,r=g.length;l<r;l++){u=g[l];if(typeof u=="string"){u=q[u];m=u.properties;if(m===true){s.push(u.fn)}else{if(m){for(k=0,p=m.length;k<p;k++){o=m[k];if(n.hasOwnProperty(o)){s.push(u.fn);break}}}}}else{s.push(u)}}t.onCreated=h?h:Ext.emptyFn;t.preprocessors=s;this.doProcess(f,n,t)},doProcess:function(g,l,f){var k=this,m=f.preprocessors,h=m.shift(),j=k.doProcess;for(;h;h=m.shift()){if(h.call(k,g,l,f,j)===false){return}}f.onBeforeCreated.apply(k,arguments)},preprocessors:{},registerPreprocessor:function(g,k,h,f,j){if(!f){f="last"}if(!h){h=[g]}this.preprocessors[g]={name:g,properties:h||false,fn:k};this.setDefaultPreprocessorPosition(g,f,j);return this},getPreprocessor:function(f){return this.preprocessors[f]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(f){this.defaultPreprocessors=Ext.Array.from(f);return this},setDefaultPreprocessorPosition:function(h,k,j){var f=this.defaultPreprocessors,g;if(typeof k=="string"){if(k==="first"){f.unshift(h);return this}else{if(k==="last"){f.push(h);return this}}k=(k==="after")?1:-1}g=Ext.Array.indexOf(f,j);if(g!==-1){Ext.Array.splice(f,Math.max(0,g+k),0,h)}return this}});c.registerPreprocessor("extend",function(g,j,o){var k=Ext.Base,l=k.prototype,m=j.extend,f,n,h;delete j.extend;if(m&&m!==Object){f=m}else{f=k}n=f.prototype;if(!f.$isClass){for(h in l){if(!n[h]){n[h]=l[h]}}}g.extend(f);g.triggerExtended.apply(g,arguments);if(j.onClassExtended){g.onExtended(j.onClassExtended,g);delete j.onClassExtended}},true);c.registerPreprocessor("privates",function(f,j){var h=j.privates,k=h.statics,g=h.privacy||true;delete j.privates;delete h.statics;f.addMembers(h,false,g);if(k){f.addMembers(k,true,g)}});c.registerPreprocessor("statics",function(f,g){f.addStatics(g.statics);delete g.statics});c.registerPreprocessor("inheritableStatics",function(f,g){f.addInheritableStatics(g.inheritableStatics);delete g.inheritableStatics});c.registerPreprocessor("platformConfig",function(h,p,t){var q=p.platformConfig,l=p.config||{},r=Ext.theme||(Ext.theme={name:"Default"}),k,o,g,n,s,m,f;delete p.platformConfig;r=r&&r.name;if(!Ext.filterPlatform){Ext.filterPlatform=function(x){var G=false,v=navigator.userAgent,z,D;x=[].concat(x);function C(H){var j=/Mobile(\/|\s)/.test(H);return/(iPhone|iPod)/.test(H)||(!/(Silk)/.test(H)&&(/(Android)/.test(H)&&(/(Android 2)/.test(H)||j)))||(/(BlackBerry|BB)/.test(H)&&j)||/(Windows Phone)/.test(H)}function B(j){return !C(j)&&(/iPad/.test(j)||/Android/.test(j)||/(RIM Tablet OS)/.test(j)||(/MSIE 10/.test(j)&&/; Touch/.test(j)))}var u=window.location.search.substr(1),w=u.split("&"),y={},E,A;for(A=0;A<w.length;A++){var F=w[A].split("=");y[F[0]]=F[1]}E=y.platform;if(E){return x.indexOf(E)!=-1}for(z=0,D=x.length;z<D;z++){switch(x[z]){case"phone":G=C(v);break;case"tablet":G=B(v);break;case"desktop":G=!C(v)&&!B(v);break;case"ios":G=/(iPad|iPhone|iPod)/.test(v);break;case"android":G=/(Android|Silk)/.test(v);break;case"blackberry":G=/(BlackBerry|BB)/.test(v);break;case"safari":G=/Safari/.test(v)&&!(/(BlackBerry|BB)/.test(v));break;case"chrome":G=/Chrome/.test(v);break;case"ie10":G=/MSIE 10/.test(v);break}if(G){return true}}return false}}for(n=0,s=q.length;n<s;n++){g=q[n];k=g.platform;delete g.platform;o=[].concat(g.theme);f=o.length;delete g.theme;if(k&&Ext.filterPlatform(k)){Ext.merge(l,g)}if(f){for(m=0;m<f;m++){if(Ext.theme.name==o[m]){Ext.merge(l,g)}}}}});c.registerPreprocessor("config",function(f,g){if(g.hasOwnProperty("$configPrefixed")){f.prototype.$configPrefixed=g.$configPrefixed}f.addConfig(g.config);delete g.config});c.registerPreprocessor("cachedConfig",function(f,g){if(g.hasOwnProperty("$configPrefixed")){f.prototype.$configPrefixed=g.$configPrefixed}f.addCachedConfig(g.cachedConfig);delete g.cachedConfig});c.registerPreprocessor("mixins",function(j,k,f){var h=k.mixins,g=f.onCreated;delete k.mixins;f.onCreated=function(){f.onCreated=g;j.mixin(h);return f.onCreated.apply(this,arguments)}});Ext.extend=function(h,j,g){if(arguments.length===2&&Ext.isObject(j)){g=j;j=h;h=null}var f;if(!j){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}g.extend=j;g.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"];if(h){f=new c(h,g);f.prototype.constructor=h}else{f=new c(g)}f.prototype.override=function(l){for(var k in l){if(l.hasOwnProperty(k)){this[k]=l[k]}}};return f}}());Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(b,a){return this.addMapping(b,a,this.aliasToName,this.nameToAliases)},addAlternate:function(a,b){return this.addMapping(a,b,this.alternateToName,this.nameToAlternates)},addMapping:function(l,f,g,n){var b=l.$className||l,j=b,k=this._array1,o,d,p,h,c,m;if(Ext.isString(b)){j={};j[b]=f}for(p in j){d=j[p];if(Ext.isString(d)){k[0]=d;d=k}c=d.length;m=n[p]||(n[p]=[]);for(h=0;h<c;++h){if(!(o=d[h])){continue}if(g[o]!==p){g[o]=p;m.push(o)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||""},getNameByAlternate:function(a){return this.alternateToName[a]||""},getNamesByExpression:function(m,a,j){var v=this,s=v.aliasToName,p=v.alternateToName,b=v.nameToAliases,d=v.nameToAlternates,u=j?a:{},l=[],t=Ext.isString(m)?[m]:m,h=t.length,f=v.wildcardRe,c,q,r,k,o,w,g;for(q=0;q<h;++q){if((c=t[q]).indexOf("*")<0){if(!(w=s[c])){if(!(w=p[c])){w=c}}if(!(w in u)&&!(a&&(w in a))){u[w]=1;l.push(w)}}else{g=new RegExp("^"+c.replace(f,"(.*?)")+"$");for(w in b){if(!(w in u)&&!(a&&(w in a))){if(!(k=g.test(w))){o=(r=b[w]).length;while(!k&&o-->0){k=g.test(r[o])}r=d[w];if(r&&!k){o=r.length;while(!k&&o-->0){k=g.test(r[o])}}}if(k){u[w]=1;l.push(w)}}}}}return l},getPath:function(b){var c=this,f=c.paths,a="",d;if(b in f){a=f[b]}else{d=c.getPrefix(b);if(d){b=b.substring(d.length+1);a=f[d];if(a){a+="/"}}a+=b.replace(c.dotRe,"/")+".js"}return a},getPrefix:function(b){if(b in this.paths){return b}var f=this.getPrefixes(),a=f.length,c,d;while(a-->0){c=(d=f[a]).length;if(c<b.length&&b.charAt(c)==="."&&d===b.substring(0,c)){return d}}return""},getPrefixes:function(){var a=this,b=a.prefixes;if(!b){a.prefixes=b=a.names.slice(0);b.sort(a._compareNames)}return b},removeName:function(b){var g=this,k=g.aliasToName,m=g.alternateToName,l=g.nameToAliases,f=g.nameToAlternates,c=l[b],h=f[b],d,j;delete l[b];delete f[b];if(c){for(d=c.length;d--;){if(b===(j=c[d])){delete k[j]}}}if(h){for(d=h.length;d--;){if(b===(j=h[d])){delete m[j]}}}},resolveName:function(a){var b=this,c;if(!(a in b.nameToAliases)){if(!(c=b.aliasToName[a])){c=b.alternateToName[a]}}return c||a},select:function(f,c){var d=this,g={},b={excludes:g,exclude:function(){d.getNamesByExpression(arguments,g,true);return this}},a;for(a in f){b[a]=d.selectMethod(g,f[a],c||f)}return b},selectMethod:function(d,b,a){var c=this;return function(f){var g=Ext.Array.slice(arguments,1);g.unshift(c.getNamesByExpression(f,d));return b.apply(a,g)}},setPath:Ext.Function.flexSetter(function(a,c){var b=this;b.paths[a]=c;b.names.push(a);b.prefixes=null;return b}),_compareNames:function(a,c){var b=a.length-c.length;if(!b){b=(a<c)?-1:1}return b}};Ext.ClassManager=(function(f,m,c,q,g){var k=Ext.Class.makeCtor,a=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],enableNamespaceParseCache:true,namespaceParseCache:{},instantiators:[],isCreated:function(w){var v,x,u,t,y;if(a.classes[w]||a.existCache[w]){return true}t=g;y=a.parseNamespace(w);for(v=0,x=y.length;v<x;v++){u=y[v];if(typeof u!=="string"){t=u}else{if(!t||!t[u]){return false}t=t[u]}}a.triggerCreated(w);return true},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},triggerCreated:function(t){if(!a.existCache[t]){a.triggerExists(t)}a.classState[t]+=20;a.notify(t,a.createdListeners,a.nameCreatedListeners)},onCreated:function(v,u,t){a.addListener(v,u,t,a.createdListeners,a.nameCreatedListeners)},triggerExists:function(t,u){a.existCache[t]=u||1;a.classState[t]+=20;a.notify(t,a.existsListeners,a.nameExistsListeners)},onExists:function(v,u,t){a.addListener(v,u,t,a.existsListeners,a.nameExistsListeners)},notify:function(B,D,v){var w=a.getAlternatesByName(B),C=[B],y,A,x,z,u,t;for(y=0,A=D.length;y<A;y++){u=D[y];u.fn.call(u.scope,B)}while(C){for(y=0,A=C.length;y<A;y++){t=C[y];D=v[t];if(D){for(x=0,z=D.length;x<z;x++){u=D[x];u.fn.call(u.scope,t)}delete v[t]}}C=w;w=null}},addListener:function(y,x,w,v,u){if(Ext.isArray(w)){y=Ext.Function.createBarrier(w.length,y,x);for(t=0;t<w.length;t++){this.addListener(y,null,w[t],v,u)}return}var t,z={fn:y,scope:x};if(w){if(this.isCreated(w)){y.call(x,w);return}if(!u[w]){u[w]=[]}u[w].push(z)}else{v.push(z)}},parseNamespace:function(v){var t=this.namespaceParseCache,w,y,A,u,D,C,B,x,z;if(this.enableNamespaceParseCache){if(t.hasOwnProperty(v)){return t[v]}}w=[];y=this.namespaceRewrites;A=g;u=v;for(x=0,z=y.length;x<z;x++){D=y[x];C=D.from;B=D.to;if(u===C||u.substring(0,C.length)===C){u=u.substring(C.length);if(typeof B!=="string"){A=B}else{w=w.concat(B.split("."))}break}}w.push(A);w=w.concat(u.split("."));if(this.enableNamespaceParseCache){t[v]=w}return w},setNamespace:function(w,z){var u=g,A=this.parseNamespace(w),y=A.length-1,t=A[y],x,v;for(x=0;x<y;x++){v=A[x];if(typeof v!=="string"){u=v}else{if(!u[v]){u[v]={}}u=u[v]}}u[t]=z;return u[t]},createNamespaces:function(){var t=g,y,v,w,u,x,z;for(w=0,x=arguments.length;w<x;w++){y=this.parseNamespace(arguments[w]);for(u=0,z=y.length;u<z;u++){v=y[u];if(typeof v!=="string"){t=v}else{if(!t[v]){t[v]={}}t=t[v]}}}return t},set:function(t,w){var v=this,u=v.getName(w);v.classes[t]=v.setNamespace(t,w);if(u&&u!==t){v.addAlternate(u,t)}return this},get:function(v){var x=this.classes,t,z,u,w,y;if(x[v]){return x[v]}t=g;z=this.parseNamespace(v);for(w=0,y=z.length;w<y;w++){u=z[w];if(typeof u!=="string"){t=u}else{if(!t||!t[u]){return null}t=t[u]}}return t},addNameAliasMappings:function(t){this.addAlias(t)},addNameAlternateMappings:function(t){this.addAlternate(t)},getByAlias:function(t){return this.get(this.getNameByAlias(t))},getName:function(t){return t&&t.$className||""},getClass:function(t){return t&&t.self||null},create:function(u,w,t){var v=k(u);if(typeof w==="function"){w=w(v)}w.$className=u;return new f(v,w,function(){var x=w.postprocessors||a.defaultPostprocessors,E=a.postprocessors,F=[],D,z,C,y,B,A,G;delete w.postprocessors;for(z=0,C=x.length;z<C;z++){D=x[z];if(typeof D==="string"){D=E[D];A=D.properties;if(A===true){F.push(D.fn)}else{if(A){for(y=0,B=A.length;y<B;y++){G=A[y];if(w.hasOwnProperty(G)){F.push(D.fn);break}}}}}else{F.push(D)}}w.postprocessors=F;w.createdFn=t;a.processCreate(u,this,w)})},processCreate:function(w,u,y){var x=this,t=y.postprocessors.shift(),v=y.createdFn;if(!t){if(w){x.set(w,u)}delete u._classHooks;if(v){v.call(u,u)}if(w){x.triggerCreated(w)}return}if(t.call(x,w,u,y,x.processCreate)!==false){x.processCreate(w,u,y)}},createOverride:function(z,x,v){var B=this,C=x.override,E=x.requires,w=x.uses,y=x.mixins,t,D=x.compatibility,A,u=function(){var F,J,I,H,G;if(!A){J=E?E.slice(0):[];if(y){if(!(t=y instanceof Array)){for(H in y){if(Ext.isString(F=y[H])){J.push(F)}}}else{for(I=0,G=y.length;I<G;++I){if(Ext.isString(F=y[I])){J.push(F)}}}}A=true;if(J.length){Ext.require(J,u);return}}if(t){for(I=0,G=y.length;I<G;++I){if(Ext.isString(F=y[I])){y[I]=Ext.ClassManager.get(F)}}}else{if(y){for(H in y){if(Ext.isString(F=y[H])){y[H]=Ext.ClassManager.get(F)}}}}F=B.get(C);delete x.override;delete x.compatibility;delete x.requires;delete x.uses;Ext.override(F,x);B.triggerCreated(z);if(w){Ext.Loader.addUsedClasses(w)}if(v){v.call(F,F)}};B.triggerExists(z,2);if(!D||Ext.checkVersion(D)){B.onCreated(u,B,C)}return B},instantiateByAlias:function(){var u=arguments[0],t=c.call(arguments),v=this.getNameByAlias(u);t[0]=v;return Ext.create.apply(Ext,t)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(u,t){t=q(t,true);t.unshift(u);return Ext.create.apply(Ext,t)},getInstantiator:function(w){var v=this.instantiators,x,u,t;x=v[w];if(!x){u=w;t=[];for(u=0;u<w;u++){t.push("a["+u+"]")}x=v[w]=new Function("c","a","return new c("+t.join(",")+")")}return x},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(u,x,v,t,w){if(!t){t="last"}if(!v){v=[u]}this.postprocessors[u]={name:u,properties:v||false,fn:x};this.setDefaultPostprocessorPosition(u,t,w);return this},setDefaultPostprocessors:function(t){this.defaultPostprocessors=q(t);return this},setDefaultPostprocessorPosition:function(u,x,w){var v=this.defaultPostprocessors,t;if(typeof x==="string"){if(x==="first"){v.unshift(u);return this}else{if(x==="last"){v.push(u);return this}}x=(x==="after")?1:-1}t=Ext.Array.indexOf(v,w);if(t!==-1){Ext.Array.splice(v,Math.max(0,t+x),0,u)}return this}});a.registerPostprocessor("alias",function(v,u,y){var t=Ext.Array.from(y.alias),w,x;for(w=0,x=t.length;w<x;w++){m=t[w];this.addAlias(u,m)}},["xtype","alias"]);a.registerPostprocessor("singleton",function(u,t,w,v){if(w.singleton){v.call(this,u,new t(),w)}else{return true}return false});a.registerPostprocessor("alternateClassName",function(u,t,y){var w=y.alternateClassName,v,x,z;if(!(w instanceof Array)){w=[w]}for(v=0,x=w.length;v<x;v++){z=w[v];this.set(z,t)}});a.registerPostprocessor("debugHooks",function(u,t,v){var w=t.isInstance?t.self:t;delete w.prototype.debugHooks});a.registerPostprocessor("deprecated",function(u,t,v){var w=t.isInstance?t.self:t;w.addDeprecations(v.deprecated);delete w.prototype.deprecated});Ext.apply(Ext,{create:function(){var v=arguments[0],w=typeof v,u=c.call(arguments,1),t;if(w==="function"){t=v}else{if(w!=="string"&&u.length===0){u=[v];if(!(v=v.xclass)){v=u[0].xtype;if(v){v="widget."+v}}}v=a.resolveName(v);t=a.get(v)}if(!t){Ext.syncRequire(v);t=a.get(v)}return a.getInstantiator(u.length)(t,u)},widget:function(v,u){var y=v,w,x,t;if(typeof y!=="string"){u=v;y=u.xtype;x=u.xclass}else{u=u||{}}if(u.isComponent){return u}if(!x){w="widget."+y;x=a.getNameByAlias(w)}if(x){t=a.get(x)}if(!t){return Ext.create(x||w,u)}return new t(u)},createByAlias:m(a,"instantiateByAlias"),define:function(u,v,t){if(v.override){a.classState[u]=20;return a.createOverride.apply(a,arguments)}a.classState[u]=10;return a.create.apply(a,arguments)},undefine:function(w){var u=a.classes,y,z,v,t;delete a.namespaceParseCache[w];delete u[w];delete a.existCache[w];delete a.classState[w];a.removeName(w);y=a.parseNamespace(w);z=y.length-1;v=y[0];for(t=1;t<z;t++){v=v[y[t]];if(!v){return}}try{delete v[y[z]]}catch(x){v[y[z]]=undefined}},getClassName:m(a,"getName"),getDisplayName:function(t){if(t){if(t.displayName){return t.displayName}if(t.$name&&t.$class){return Ext.getClassName(t.$class)+"#"+t.$name}if(t.$className){return t.$className}}return"Anonymous"},getClass:m(a,"getClass"),namespace:m(a,"createNamespaces")});Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;f.registerPreprocessor("className",function(t,u){if("$className" in u){t.$className=u.$className}},true,"first");f.registerPreprocessor("alias",function(E,y){var C=E.prototype,v=q(y.xtype),t=q(y.alias),F="widget.",D=F.length,z=Array.prototype.slice.call(C.xtypesChain||[]),w=Ext.merge({},C.xtypesMap||{}),x,B,A,u;for(x=0,B=t.length;x<B;x++){A=t[x];if(A.substring(0,D)===F){u=A.substring(D);Ext.Array.include(v,u)}}E.xtype=y.xtype=v[0];y.xtypes=v;for(x=0,B=v.length;x<B;x++){u=v[x];if(!w[u]){w[u]=true;z.push(u)}}y.xtypesChain=z;y.xtypesMap=w;Ext.Function.interceptAfter(y,"onClassCreated",function(){var G=C.mixins,I,H;for(I in G){if(G.hasOwnProperty(I)){H=G[I];v=H.xtypes;if(v){for(x=0,B=v.length;x<B;x++){u=v[x];if(!w[u]){w[u]=true;z.push(u)}}}}}});for(x=0,B=v.length;x<B;x++){u=v[x];Ext.Array.include(t,F+u)}y.alias=t},["xtype","alias"]);if(Ext.manifest){var d=Ext.manifest,j=d.classes,s=d.paths,h={},p={},o,l,b,r,n;if(s){if(d.bootRelative){n=Ext.Boot.baseUrl;for(r in s){if(s.hasOwnProperty(r)){s[r]=n+s[r]}}}a.setPath(s)}if(j){for(o in j){p[o]=[];h[o]=[];l=j[o];if(l.alias){h[o]=l.alias}if(l.alternates){p[o]=l.alternates}}}a.addAlias(h);a.addAlternate(p)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));Ext.env||(Ext.env={});Ext.env.Browser=function(u,o){var v=this,a=v.browserPrefixes,b=v.enginePrefixes,r=u.match(new RegExp("((?:"+Ext.Object.getValues(a).join(")|(?:")+"))([\\w\\._]+)")),h=u.match(new RegExp("((?:"+Ext.Object.getValues(b).join(")|(?:")+"))([\\w\\._]+)")),c=v.browserNames,q=c.other,k=v.engineNames,t=k.other,m="",g="",d="",j=false,p,n,l,w,s;v.userAgent=u;if(r){q=c[Ext.Object.getKey(a,r[1])];if(q==="Safari"&&/^Opera/.test(u)){q="Opera"}m=new Ext.Version(r[2])}if(h){t=k[Ext.Object.getKey(b,h[1])];g=new Ext.Version(h[2])}if(t=="Trident"&&q!="IE"){q="IE";var f=u.match(/.*rv:(\d+.\d+)/);if(f&&f.length){f=f[1];m=new Ext.Version(f)}}if(u.match(/FB/)&&q=="Other"){q=c.safari;t=k.webkit}if(u.match(/Android.*Chrome/g)){q="ChromeMobile"}if(u.match(/OPR/)){q="Opera";r=u.match(/OPR\/(\d+.\d+)/);m=new Ext.Version(r[1])}Ext.apply(this,{engineName:t,engineVersion:g,name:q,version:m});this.setFlag(q,true,o);if(m){d=m.getMajor()||"";if(v.is.IE){d=parseInt(d,10);l=document.documentMode;if(l==7||(d==7&&l!=8&&l!=9&&l!=10)){d=7}else{if(l==8||(d==8&&l!=8&&l!=9&&l!=10)){d=8}else{if(l==9||(d==9&&l!=7&&l!=8&&l!=10)){d=9}else{if(l==10||(d==10&&l!=7&&l!=8&&l!=9)){d=10}else{if(l==11||(d==11&&l!=7&&l!=8&&l!=9&&l!=10)){d=11}}}}}s=Math.max(d,11);for(p=7;p<=s;++p){n="isIE"+p;if(d<=p){Ext[n+"m"]=true}if(d===p){Ext[n]=true}if(d>=p){Ext[n+"p"]=true}}}if(v.is.Opera&&parseInt(d,10)<=12){Ext.isOpera12m=true}Ext.chromeVersion=Ext.isChrome?d:0;Ext.firefoxVersion=Ext.isFirefox?d:0;Ext.ieVersion=Ext.isIE?d:0;Ext.operaVersion=Ext.isOpera?d:0;Ext.safariVersion=Ext.isSafari?d:0;Ext.webKitVersion=Ext.isWebKit?d:0;this.setFlag(q+d,true,o);this.setFlag(q+m.getShortVersion())}for(p in c){if(c.hasOwnProperty(p)){w=c[p];this.setFlag(w,q===w)}}this.setFlag(w);if(g){this.setFlag(t+(g.getMajor()||""));this.setFlag(t+g.getShortVersion())}for(p in k){if(k.hasOwnProperty(p)){w=k[p];this.setFlag(w,t===w,o)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined"){j=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}else{if(!!window.isNK){j=true;this.setFlag("Sencha")}}if(/(Glass)/i.test(u)){this.setFlag("GoogleGlass")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(u)){j=true}this.setFlag("WebView",j);this.isStrict=Ext.isStrict=document.compatMode=="CSS1Compat";this.isSecure=/^https/i.test(window.location.protocol);this.identity=q+d+(this.isStrict?"Strict":"Quirks")};Ext.env.Browser.prototype={constructor:Ext.env.Browser,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},browserPrefixes:{ie:"MSIE ",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(a){return !!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(a,c,b){if(typeof c=="undefined"){c=true}this.is[a]=c;this.is[a.toLowerCase()]=c;if(b){Ext["is"+a]=c}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(a){var b=this.propertyPrefixes[this.engineName];if(b.length>0){return b+Ext.String.capitalize(a)}return a},getPreferredTranslationMethod:function(a){if(typeof a=="object"&&"translationMethod" in a&&a.translationMethod!=="auto"){return a.translationMethod}else{if(this.is.AndroidStock2||this.is.IE){return"scrollposition"}else{return"csstransform"}}}};(function(a){Ext.browser=new Ext.env.Browser(a,true);Ext.userAgent=a.toLowerCase()}(Ext.global.navigator.userAgent));Ext.env.OS=function(p,b,m){var l=this,k=l.names,d=l.prefixes,a,j="",g=l.is,c,h,f,o,n;m=m||Ext.browser;for(c in d){if(d.hasOwnProperty(c)){h=d[c];f=p.match(new RegExp("(?:"+h+")([^\\s;]+)"));if(f){a=k[c];n=f[1];if(n&&n=="HTC_"){j=new Ext.Version("2.3")}else{if(n&&n=="Silk/"){j=new Ext.Version("2.3")}else{j=new Ext.Version(f[f.length-1])}}break}}}if(!a){a=k[(p.toLowerCase().match(/mac|win|linux/)||["other"])[0]];j=new Ext.Version("")}this.name=a;this.version=j;if(b){this.setFlag(b.replace(/ simulator$/i,""))}this.setFlag(a);if(j){this.setFlag(a+(j.getMajor()||""));this.setFlag(a+j.getShortVersion())}for(c in k){if(k.hasOwnProperty(c)){o=k[c];if(!g.hasOwnProperty(a)){this.setFlag(o,(a===o))}}}if(this.name=="iOS"&&window.screen.height==568){this.setFlag("iPhone5")}if(m.is.Safari||m.is.Silk){if(this.is.Android2||this.is.Android3||m.version.shortVersion==501){m.setFlag("AndroidStock");m.setFlag("AndroidStock2")}if(this.is.Android4){m.setFlag("AndroidStock");m.setFlag("AndroidStock4")}}};Ext.env.OS.prototype={constructor:Ext.env.OS,names:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chrome:"ChromeOS",other:"Other"},prefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chrome:"CrOS "},is:function(a){return !!this[a]},name:null,version:null,setFlag:function(a,b){if(typeof b=="undefined"){b=true}if(this.flags){this.flags[a]=b}this.is[a]=b;this.is[a.toLowerCase()]=b;return this}};(function(){var a=Ext.global.navigator,h=a.userAgent,g=Ext.env.OS,f=(Ext.is||(Ext.is={})),j,d,b;g.prototype.flags=f;Ext.os=j=new g(h,a.platform);d=j.name;Ext["is"+d]=true;Ext.isMac=f.Mac=f.MacOS;var k=window.location.search.match(/deviceType=(Tablet|Phone)/),c=window.deviceType;if(k&&k[1]){b=k[1]}else{if(c==="iPhone"){b="Phone"}else{if(c==="iPad"){b="Tablet"}else{if(!j.is.Android&&!j.is.iOS&&!j.is.WindowsPhone&&/Windows|Linux|MacOS/.test(d)){b="Desktop";Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else{if(j.is.iPad||j.is.RIMTablet||j.is.Android3||Ext.browser.is.Silk||(j.is.Android4&&h.search(/mobile/i)==-1)){b="Tablet"}else{b="Phone"}}}}}j.setFlag(b,true);j.deviceType=b;delete g.prototype.flags}());Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a="div"}else{if(typeof a!=="string"){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(c,b){var d=this.getTestElement(b).style,a=Ext.String.capitalize(c);if(typeof d[c]!=="undefined"||typeof d[Ext.browser.getStylePrefix(c)+a]!=="undefined"){return true}return false},isStyleSupportedWithoutPrefix:function(b,a){var c=this.getTestElement(a).style;if(typeof c[b]!=="undefined"){return true}return false},isEventSupported:function(c,a){if(a===undefined){a=window}var f=this.getTestElement(a),b="on"+c.toLowerCase(),d=(b in f);if(!d){if(f.setAttribute&&f.removeAttribute){f.setAttribute(b,"");d=typeof f[b]==="function";if(typeof f[b]!=="undefined"){f[b]=undefined}f.removeAttribute(b)}}return d},getStyle:function(c,b){var a=c.ownerDocument.defaultView,d=(a?a.getComputedStyle(c,null):c.currentStyle)||c.style;return d[b]},getSupportedPropertyName:function(b,a){var c=Ext.browser.getVendorProperyName(a);if(c in b){return c}else{if(a in b){return a}}return null},detect:function(j){var k=this,m=document,g=k.toRun||k.tests,f=g.length,b=m.createElement("div"),c=[],p=Ext.supports,o=k.has,a,h,d,l;if(!Ext.theme){Ext.theme={name:"Default"}}Ext.theme.is={};Ext.theme.is[Ext.theme.name]=true;b.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(j){m.body.appendChild(b)}d=k.preDetected[Ext.browser.identity]||[];while(f--){h=g[f];l=d[f];a=h.name;if(l===undefined){if(!j&&h.ready){c.push(h);continue}l=h.fn.call(k,m,b)}p[a]=o[a]=l}if(j){m.body.removeChild(b)}k.toRun=c},report:function(){var b=[],a=this.tests.length,c;for(c=0;c<a;++c){b.push(this.has[this.tests[c].name]?1:0)}Ext.log(Ext.browser.identity+": ["+b.join(",")+"]")},preDetected:{},tests:[{name:"CSSPointerEvents",fn:function(a){return"pointerEvents" in a.documentElement.style}},{name:"CSS3BoxShadow",fn:function(a){return"boxShadow" in a.documentElement.style||"WebkitBoxShadow" in a.documentElement.style||"MozBoxShadow" in a.documentElement.style}},{name:"ClassList",fn:function(a){return !!a.documentElement.classList}},{name:"Canvas",fn:function(){var a=this.getTestElement("canvas");return !!(a&&a.getContext&&a.getContext("2d"))}},{name:"Svg",fn:function(a){return !!(a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var b=this.getTestElement(),a=false;b.innerHTML="<!--[if vml]><br><![endif]-->";a=(b.childNodes.length===1);b.innerHTML="";return a}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"Touch",fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;return(this.isEventSupported("touchend")&&a!==1)||a>1}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation" in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase" in window}},{name:"WebSockets",fn:function(){return"WebSocket" in window}},{name:"Range",fn:function(){return !!document.createRange}},{name:"CreateContextualFragment",fn:function(){var a=!!document.createRange?document.createRange():false;return a&&!!a.createContextualFragment}},{name:"History",fn:function(){return("history" in window&&"pushState" in window.history)}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")&&!Ext.browser.is.AndroidStock2}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return !!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return !!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");return true}}catch(a){}return false}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&("withCredentials" in new XMLHttpRequest())}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var a=new XMLHttpRequest();return a&&("upload" in a)&&("onprogress" in a.upload)}return false}},{name:"NumericInputPlaceHolder",fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"ProperHBoxStretching",ready:true,fn:function(){var b=document.createElement("div"),c=b.appendChild(document.createElement("div")),d=c.appendChild(document.createElement("div")),a;b.setAttribute("style","width: 100px; height: 100px; position: relative;");c.setAttribute("style","position: absolute; display: -ms-flexbox; display: -webkit-flex; display: -moz-flexbox; display: flex; -ms-flex-direction: row; -webkit-flex-direction: row; -moz-flex-direction: row; flex-direction: row; min-width: 100%;");d.setAttribute("style","width: 200px; height: 50px;");document.body.appendChild(b);a=c.offsetWidth;document.body.removeChild(b);return(a>100)}},{name:"matchesSelector",fn:function(){var b=document.documentElement,f="matches",d="webkitMatchesSelector",a="msMatchesSelector",c="mozMatchesSelector";return b[f]?f:b[d]?d:b[a]?a:b[c]?c:null}},{name:"RightMargin",ready:true,fn:function(b,c){var a=b.defaultView;return !(a&&a.getComputedStyle(c.firstChild.firstChild,null).marginRight!="0px")}},{name:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:"TransparentColor",ready:true,fn:function(b,c,a){a=b.defaultView;return !(a&&a.getComputedStyle(c.lastChild,null).backgroundColor!="transparent")}},{name:"ComputedStyle",ready:true,fn:function(b,c,a){a=b.defaultView;return a&&a.getComputedStyle}},{name:"Float",fn:function(a){return"cssFloat" in a.documentElement.style}},{name:"CSS3BorderRadius",ready:true,fn:function(d){var b=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],c=false,a;for(a=0;a<b.length;a++){if(d.documentElement.style[b[a]]!==undefined){c=true}}return c&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(g,a){var j="background-image:",h="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",f="linear-gradient(left top, black, white)",d="-moz-"+f,b="-ms-"+f,c="-o-"+f,k=[j+h,j+f,j+d,j+b,j+c];a.style.cssText=k.join(";");return((""+a.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(a){return("onmouseenter" in a.documentElement&&"onmouseleave" in a.documentElement)}},{name:"MouseWheel",fn:function(a){return("onmousewheel" in a.documentElement)}},{name:"Opacity",fn:function(a,b){if(Ext.isIE8){return false}b.firstChild.style.cssText="opacity:0.73";return b.firstChild.style.opacity=="0.73"}},{name:"Placeholder",fn:function(a){return"placeholder" in a.createElement("input")}},{name:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(a){return"getBoundingClientRect" in a.documentElement}},{name:"RotatedBoundingClientRect",ready:true,fn:function(f){var a=f.body,b=false,d=this.getTestElement(),c=d.style;if(d.getBoundingClientRect){c.WebkitTransform=c.MozTransform=c.msTransform=c.OTransform=c.transform="rotate(90deg)";c.width="100px";c.height="30px";a.appendChild(d);b=d.getBoundingClientRect().height!==100;a.removeChild(d)}return b}},{name:"IncludePaddingInWidthCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetWidth==210}},{name:"IncludePaddingInHeightCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetHeight==210}},{name:"TextAreaMaxLength",fn:function(a){return("maxlength" in a.createElement("textarea"))}},{name:"GetPositionPercentage",ready:true,fn:function(a,b){return Ext.feature.getStyle(b.childNodes[2],"left")=="10%"}},{name:"PercentageHeightOverflowBug",ready:true,fn:function(d){var a=false,c,b;if(Ext.getScrollbarSize().height){b=this.getTestElement();c=b.style;c.height="50px";c.width="50px";c.overflow="auto";c.position="absolute";b.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");d.body.appendChild(b);if(b.firstChild.offsetHeight===50){a=true}d.body.removeChild(b)}return a}},{name:"xOriginBug",ready:true,fn:function(d,f){f.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var c=document.getElementById("b1").getBoundingClientRect(),b=document.getElementById("b2").getBoundingClientRect(),a=document.getElementById("b3").getBoundingClientRect();return(b.left!==c.left&&a.right!==c.right)}},{name:"ScrollWidthInlinePaddingBug",ready:true,fn:function(d){var a=false,c,b;b=d.createElement("div");c=b.style;c.height="50px";c.width="50px";c.padding="10px";c.overflow="hidden";c.position="absolute";b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';d.body.appendChild(b);if(b.scrollWidth===70){a=true}d.body.removeChild(b);return a}},{name:"rtlVertScrollbarOnRight",ready:true,fn:function(c,d){d.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var b=d.firstChild,a=b.firstChild;return(a.offsetLeft+a.offsetWidth!==b.offsetLeft+b.offsetWidth)}},{name:"rtlVertScrollbarOverflowBug",ready:true,fn:function(b,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=c.firstChild;return a.clientHeight===a.offsetHeight}},{identity:"defineProperty",fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return false}return true}},{identify:"nativeXhr",fn:function(){if(typeof XMLHttpRequest!=="undefined"){return true}XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}};return false}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||(Ext.isOpera&&Ext.operaVersion<12))}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange" in window&&(a===undefined||a>7)}},{name:"FixedTableWidthBug",ready:true,fn:function(){if(Ext.isIE8){return false}var b=document.createElement("div"),a=document.createElement("div"),c;b.setAttribute("style","display:table;table-layout:fixed;");a.setAttribute("style","display:table-cell;min-width:50px;");b.appendChild(a);document.body.appendChild(b);b.offsetWidth;b.style.width="25px";c=b.offsetWidth;document.body.removeChild(b);return c===50}},{name:"FocusinFocusoutEvents",fn:function(){return !Ext.isGecko}}]};Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:false,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState=="complete"){a.onReadyEvent({type:b.readyState||"body"})}else{a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener("deviceready",a.onReadyEvent,false)}b.addEventListener("DOMContentLoaded",a.onReadyEvent,false);window.addEventListener("load",a.onReadyEvent,false)}}},block:function(){++this.blocks;Ext.isReady=false},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.now();Ext.isDomReady=true;a.state=1;Ext.feature.detect(true);if(!a.delay){a.handleReady()}else{if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else{a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.now();a.invokeAll();Ext._afterReadytime=Ext.now()}},handleReadySoon:function(a){var b=this;if(!b.timer){b.timer=Ext.defer(function(){b.timer=null;b.handleReady()},a||b.delay)}},invoke:function(b){var a=b.delay;if(a){Ext.defer(function(){b.fn.call(b.scope)},a)}else{b.fn.call(b.scope)}},invokeAll:function(){var b=this,a=b.listeners,c;if(!b.blocks){Ext.isReady=true}b.firing=true;while(a.length){if(b.sortGeneration!==b.generation){b.sortGeneration=b.generation;a.sort(b.sortFn)}c=a.pop();if(b.blocks&&!c.dom){a.push(c);break}b.invoke(c)}b.firing=false},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:false,priority:0};if(b){Ext.apply(a,b)}a.phase=a.dom?0:1;return a},on:function(c,b,a){var d=Ext.env.Ready,f=d.makeListener(c,b,a);if(d.state===2&&!d.firing&&(f.dom||!d.blocks)){d.invoke(f)}else{d.listeners.push(f);++d.generation;if(!d.bound){d.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else{a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(d,c){return -((d.phase-c.phase)||(c.priority-d.priority)||(d.id-c.id))},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener("deviceready",a.onReadyEvent,false)}b.removeEventListener("DOMContentLoaded",a.onReadyEvent,false);window.removeEventListener("load",a.onReadyEvent,false)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=true;try{document.documentElement.doScroll("left")}catch(c){b=false}if(b&&document.body){a.onReadyEvent({type:"doScroll"})}else{a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){if(a.bound){return}var d=document,b;try{b=window.frameElement===undefined}catch(c){}if(!b||!d.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else{if(a.pollScroll()){return}}if(d.readyState=="complete"){a.onReadyEvent({type:"already "+(d.readyState||"body")})}else{d.attachEvent("onreadystatechange",a.onReadyStateChange);window.attachEvent("onload",a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent("onreadystatechange",a.onReadyStateChange);window.detachEvent("onload",a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){clearTimeout(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(f,d,b){var c={dom:true};if(b){Ext.apply(c,b)}a.on(f,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};a.bind()}());Ext.Loader=new function(){var c=this,a=Ext.ClassManager,h=Ext.Boot,d=Ext.Class,k=Ext.env.Ready,j=Ext.Function.alias,g=["extend","mixins","requires"],o={},l=[],b=[],f=[],p={},n={},m={enabled:true,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",paths:a.paths,preserveScripts:true,scriptCharset:undefined},q={disableCaching:true,disableCachingParam:true,preserveScripts:true,scriptChainDelay:"loadDelay"};Ext.apply(c,{isInHistory:o,isLoading:false,history:l,config:m,readyListeners:b,optionalRequires:f,requiresMap:p,hasFileLoadError:false,scriptsLoading:0,syncModeEnabled:false,missingQueue:n,init:function(){var w=document.getElementsByTagName("script"),r=w[w.length-1].src,B=r.substring(0,r.lastIndexOf("/")+1),z=Ext._classPathMetadata,A=Ext.Microloader,t=Ext.manifest,u,x,y,v,s;if(!a.getPath("Ext")){a.setPath("Ext",B+"src")}if(z){Ext._classPathMetadata=null;c.addClassPathMappings(z)}if(t){u=t.loadOrder;x=Ext.Boot.baseUrl;if(u&&t.bootRelative){for(y=u.length,v=0;v<y;v++){s=u[v];s.path=x+s.path}}}if(A){k.block();A.onMicroloaderReady(function(){k.unblock()})}},setConfig:Ext.Function.flexSetter(function(r,s){if(r==="paths"){c.setPath(s)}else{m[r]=s;var t=q[r];if(t){h.setConfig((t===true)?r:t,s)}}return c}),getConfig:function(r){return r?m[r]:m},setPath:function(){a.setPath.apply(a,arguments);return c},addClassPathMappings:function(r){a.setPath(r);return c},addBaseUrlClassPathMappings:function(r){for(var s in r){r[s]=h.baseUrl+r[s]}Ext.Loader.addClassPathMappings(r)},getPath:function(r){return a.getPath(r)},require:function(t,s,r,v){if(v){return c.exclude(v).require(t,s,r)}var u=a.getNamesByExpression(t);return c.load(u,s,r)},syncRequire:function(){var s=c.syncModeEnabled;c.syncModeEnabled=true;var r=c.require.apply(c,arguments);c.syncModeEnabled=s;return r},exclude:function(s){var r=a.select({require:function(v,u,t){return c.load(v,u,t)},syncRequire:function(x,v,u){var w=c.syncModeEnabled;c.syncModeEnabled=true;var t=c.load(x,v,u);c.syncModeEnabled=w;return t}});r.exclude(s);return r},load:function(r,z,A){if(z){if(z.length){z=c.makeLoadCallback(r,z)}z=z.bind(A||Ext.global)}var u=[],t=r.length,x,w,v,y=[],s=a.classState;for(w=0;w<t;++w){x=a.resolveName(r[w]);if(!a.isCreated(x)){u.push(x);n[x]=c.getPath(x);if(!s[x]){y.push(n[x])}}}v=u.length;if(v){c.missingCount+=v;a.onExists(function(){if(z){Ext.callback(z,A,arguments)}c.checkReady()},c,u);if(!m.enabled){Ext.Error.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((u.length>1)?"es":"")+": "+u.join(", "))}if(y.length){c.loadScripts({url:y,_classNames:u})}else{c.checkReady()}}else{if(z){z.call(A)}c.checkReady()}if(c.syncModeEnabled){if(t===1){return a.get(r[0])}}return c},makeLoadCallback:function(r,s){return function(){var u=[],t=r.length;while(t-->0){u[t]=a.get(r[t])}return s.apply(this,u)}},onLoadFailure:function(){var r=this,s=r.onError;c.hasFileLoadError=true;--c.scriptsLoading;if(s){s.call(r.userScope,r)}c.checkReady()},onLoadSuccess:function(){var r=this,s=r.onLoad;--c.scriptsLoading;if(s){s.call(r.userScope,r)}c.checkReady()},onReady:function(t,s,v,r){if(v){k.on(t,s,r)}else{var u=k.makeListener(t,s,r);if(c.isLoading){b.push(u)}else{k.invoke(u)}}},addUsedClasses:function(t){var r,s,u;if(t){t=(typeof t==="string")?[t]:t;for(s=0,u=t.length;s<u;s++){r=t[s];if(typeof r==="string"&&!Ext.Array.contains(f,r)){f.push(r)}}}return c},triggerReady:function(){var r,s=f;if(c.isLoading&&s.length){f=[];c.require(s)}else{c.isLoading=false;b.sort(k.sortFn);while(b.length&&!c.isLoading){r=b.pop();k.invoke(r)}k.unblock()}},historyPush:function(r){if(r&&!o[r]){o[r]=true;l.push(r)}return c},loadScripts:function(v){var u=Ext.manifest,r=u&&u.loadOrder,s=u&&u.loadOrderMap,t;++c.scriptsLoading;if(r&&!s){u.loadOrderMap=s=h.createLoadOrderMap(r)}c.checkReady();t=Ext.apply({loadOrder:r,loadOrderMap:s,charset:m.scriptCharset,success:c.onLoadSuccess,failure:c.onLoadFailure,sync:c.syncModeEnabled,_classNames:[]},v);t.userScope=t.scope;t.scope=t;h.load(t)},loadScriptsSync:function(s){var r=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:s});c.syncModeEnabled=r},loadScriptsSyncBasePrefix:function(s){var r=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:s,prependBaseUrl:true});c.syncModeEnabled=r},loadScript:function(z){var s=typeof z==="string",v=z instanceof Array,y=!v&&!s,r=y?z.url:z,u=y&&z.onError,w=y&&z.onLoad,x=y&&z.scope,t={url:r,scope:x,onLoad:w,onError:u,_classNames:[]};c.loadScripts(t)},flushMissingQueue:function(){var r,u,t=0,s=0;for(r in n){t++;u=n[r];if(a.isCreated(r)){delete n[r]}else{if(a.existCache[r]===2){delete n[r]}else{++s}}}this.missingCount=s},checkReady:function(){var s=c.isLoading,r;c.flushMissingQueue();r=c.missingCount+c.scriptsLoading;if(r&&!s){k.block();c.isLoading=!!r}else{if(!r&&s){c.triggerReady()}}}});Ext.require=j(c,"require");Ext.syncRequire=j(c,"syncRequire");Ext.exclude=j(c,"exclude");d.registerPreprocessor("loader",function(G,v,F,E){var B=this,z=[],r,A=a.getName(G),u,t,y,x,D,w,s,C;for(u=0,y=g.length;u<y;u++){w=g[u];if(v.hasOwnProperty(w)){s=v[w];if(typeof s=="string"){z.push(s)}else{if(s instanceof Array){for(t=0,x=s.length;t<x;t++){D=s[t];if(typeof D=="string"){z.push(D)}}}else{if(typeof s!="function"){for(t in s){if(s.hasOwnProperty(t)){D=s[t];if(typeof D=="string"){z.push(D)}}}}}}}}if(z.length===0){return}if(A){p[A]=z}(A?c.exclude(A):c).require(z,function(){for(u=0,y=g.length;u<y;u++){w=g[u];if(v.hasOwnProperty(w)){s=v[w];if(typeof s=="string"){v[w]=a.get(s)}else{if(s instanceof Array){for(t=0,x=s.length;t<x;t++){D=s[t];if(typeof D=="string"){v[w][t]=a.get(D)}}}else{if(typeof s!="function"){for(var H in s){if(s.hasOwnProperty(H)){D=s[H];if(typeof D=="string"){v[w][H]=a.get(D)}}}}}}}}E.call(B,G,v,F)});return false},true,"after","className");a.registerPostprocessor("uses",function(s,C,x){var r=Ext.manifest,t=r&&r.loadOrder,u=r&&r.classes,v,z,B,y,w,A;if(t){z=u[s];if(z&&!isNaN(w=z.idx)){B=t[w];v=B.uses;A={};for(y=v.length,w=0;w<y;w++){A[v[w]]=true}v=Ext.Boot.getPathsFromIndexes(A,t,true);if(v.length>0){c.loadScripts({url:v,sequential:true})}}}if(x.uses){v=x.uses;c.addUsedClasses(v)}});a.onCreated(c.historyPush);c.init()}();Ext._endTime=new Date().getTime();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}(Ext.cmd.derive("Ext.event.ListenerStack",Ext.Base,{currentOrder:"current",length:0,constructor:function(){this.listeners={before:[],current:[],after:[]};this.lateBindingMap={};return this},add:function(m,n,o,g,c){var b=this.lateBindingMap,l=this.getAll(g),h=l.length,j=typeof m==="string",a,f,d,k;if(j&&n&&n.isIdentifiable){d=n.getId();a=b[d];if(a){if(a[m]){return false}else{a[m]=true}}else{b[d]=a={};a[m]=true}}else{if(h>0){while(h--){f=l[h];if(f.fn===m&&f.scope===n){f.options=o;return false}}}}if(!j){k=Ext._namedScopes[n];if(k&&k.isController){Ext.Error.raise("Cannot resolve scope 'controller' for '"+o.type+"' listener declared on Observable: '"+c.id+"'")}n=(n&&!k)?n:c}f=this.create(m,n,o,g,c);if(j&&(!n||n in Ext._namedScopes)){f.boundFn=this.bindDynamicScope(c,m,n);f.isLateBinding=false}if(o&&o.prepend){delete o.prepend;l.unshift(f)}else{l.push(f)}this.length++;return true},bindDynamicScope:function(c,b,a){return function(){var d=c.resolveListenerScope(a);return d[b].apply(d,arguments)}},getAt:function(b,a){return this.getAll(a)[b]},getAll:function(a){return this.listeners[a||this.currentOrder]},count:function(a){return this.getAll(a).length},create:function(d,c,b,a,f){b=b||{};return{stack:this,fn:d,firingFn:false,boundFn:false,isLateBinding:typeof d==="string",scope:c,options:b,order:a,observable:f,type:b.type}},remove:function(j,k,f){var h=this.getAll(f),g=h.length,b=false,a=this.lateBindingMap,d,c;if(g>0){while(g--){d=h[g];if(d.fn===j&&d.scope===k){h.splice(g,1);b=true;this.length--;if(k&&k.isIdentifiable&&typeof j==="string"){c=k.getId();if(a[c]&&a[c][j]){delete a[c][j]}}break}}}return b}},1,0,0,0,0,0,[Ext.event,"ListenerStack"],0));(Ext.cmd.derive("Ext.event.Controller",Ext.Base,{isFiring:false,listenerStack:null,constructor:function(a){this.firingListeners=[];this.firingArguments=[];this.dispatcher=a;return this},setInfo:function(a){this.info=a},getInfo:function(){return this.info},setListenerStacks:function(a){this.listenerStacks=a},fire:function(j,f){var o=this.listenerStacks,n=this.firingListeners,d=this.firingArguments,l=n.push,h=o.length,k,m,c,p,a=false,b=false,g;n.length=0;if(f){if(f.order!=="after"){a=true}else{b=true}}if(h===1){k=o[0].listeners;m=k.before;c=k.current;p=k.after;if(m.length>0){l.apply(n,m)}if(a){l.call(n,f)}if(c.length>0){l.apply(n,c)}if(b){l.call(n,f)}if(p.length>0){l.apply(n,p)}}else{for(g=0;g<h;g++){m=o[g].listeners.before;if(m.length>0){l.apply(n,m)}}if(a){l.call(n,f)}for(g=0;g<h;g++){c=o[g].listeners.current;if(c.length>0){l.apply(n,c)}}if(b){l.call(n,f)}for(g=0;g<h;g++){p=o[g].listeners.after;if(p.length>0){l.apply(n,p)}}}if(n.length===0){return this}if(!j){j=[]}d.length=0;d.push.apply(d,j);d.push(null,this);this.doFire();return this},doFire:function(){var w=this,k=w.firingListeners,s=w.firingArguments,o=s[1],p=s.length-2,n=k[0].observable,v=w.info,q,r,l,g,f,j,t,c,u,a,b,m,d,h;if(n&&n.isElement){q=s[0];if(q&&!q.isEvent){q=null}}w.isPausing=w.isPaused=w.isStopped=false;w.isFiring=true;for(r=0,l=k.length;r<l;r++){g=k[r];f=g.options;j=g.fn;t=g.firingFn;c=g.boundFn;u=g.isLateBinding;a=g.scope;if(u&&c&&c!==a[j]){c=false;t=false}if(!c){if(u){c=a[j];if(!c){continue}}else{c=j}g.boundFn=c}if(q){d=g.type;if(d){s[0]=q.chain({type:d})}Ext.EventObject=s[0]}if(!t){t=c;if(f.delay){t=Ext.Function.createDelayed(t,f.delay,a)}else{if(f.buffer){t=Ext.Function.createBuffered(t,f.buffer,a)}else{if(f.onFrame){t=Ext.Function.createAnimationFrame(t,a)}}}g.firingFn=t}s[p]=f;b=s;if(f.args){b=f.args.concat(b)}if(f.delegate&&w.info.targetType==="element"){s[1]=Ext.fly(o).findParent(v.target,o)}if(f.single){w.dispatcher.removeListener(v.targetType,v.target,v.eventName,j,a,f,g.order,g.observable)}h=f.beforeFn;if(h){m=h.apply(Ext.global,b)!==false;if(m!==false){m=t.apply(a,b)}}else{m=t.apply(a,b)}if(f.delegate){s[1]=o}if(m===false){w.stop()}if(w.isStopped){break}if(w.isPausing){w.isPaused=true;k.splice(0,r+1);return}if(q){s[0]=q}}w.isFiring=false;w.listenerStacks=null;k.length=s.length=0;w.connectingController=null},connect:function(a){this.connectingController=a},resume:function(){var a=this.connectingController;this.isPausing=false;if(this.isPaused&&this.firingListeners.length>0){this.isPaused=false;this.doFire()}if(a){a.resume()}return this},isInterrupted:function(){return this.isStopped||this.isPaused},stop:function(){var a=this.connectingController;this.isStopped=true;if(a){this.connectingController=null;a.stop()}this.isFiring=false;this.listenerStacks=null;return this},pause:function(){var a=this.connectingController;this.isPausing=true;if(a){a.pause()}return this}},1,0,0,0,0,0,[Ext.event,"Controller"],0));(Ext.cmd.derive("Ext.event.Dispatcher",Ext.Base,{statics:{getInstance:function(){if(!this.instance){this.instance=new this()}return this.instance},setInstance:function(a){this.instance=a;return this}},baseHasListeners:{_decr_:function(a){if(!--this[a]){delete this[a]}},_incr_:function(a){if(this.hasOwnProperty(a)){++this[a]}else{this[a]=1}}},hasListeners:{},config:{publishers:{}},wildcard:"*",constructor:function(a){this.listenerStacks={};this.captureListenerStacks={};this.directListenerStacks={};this.activePublishers={};this.publishersCache={};this.noActivePublishers=[];this.controller=null;this.initConfig(a);return this},getListenerStack:function(c,d,b,a){return this.doGetListenerStack(this.listenerStacks,c,d,b,a)},getCaptureListenerStack:function(c,d,b,a){return this.doGetListenerStack(this.captureListenerStacks,c,d,b,a)},getDirectListenerStack:function(c,d,b,a){return this.doGetListenerStack(this.directListenerStacks,c,d,b,a)},doGetListenerStack:function(d,f,h,c,b){var g=d[f],a;if(!g){if(b){d[f]=g={}}else{return null}}g=g[h];if(!g){if(b){d[f][h]=g={}}else{return null}}a=g[c];if(!a){if(b){g[c]=a=new Ext.event.ListenerStack()}else{return null}}return a},getController:function(f,h,c,b){var d=this,a=d.controller,g={targetType:f,target:h,eventName:c};if(!a){d.controller=a=new Ext.event.Controller(d)}if(a.isFiring){a=new Ext.event.Controller(d)}a.setInfo(g);if(b&&a!==b){a.connect(b)}return a},applyPublishers:function(c){var a,b;this.publishersCache={};for(a in c){if(c.hasOwnProperty(a)){b=c[a];this.registerPublisher(b)}}return c},registerPublisher:function(b){var a=this.activePublishers,c=b.getTargetType(),d=a[c];if(!d){a[c]=d=[]}d.push(b);b.setDispatcher(this);return this},getCachedActivePublishers:function(c,b){var a=this.publishersCache,d;if((d=a[c])&&(d=d[b])){return d}return null},cacheActivePublishers:function(c,b,d){var a=this.publishersCache;if(!a[c]){a[c]={}}a[c][b]=d;return d},getActivePublishers:function(h,b){var j=this.getCachedActivePublishers(h,b),a,g,c,f,d;if(j){return j}a=this.activePublishers[h];if(a){j=[];for(c=0,f=a.length;c<f;c++){d=a[c];if(d.handles(b)){j.push(d)}}if(!j.length&&h==="element"){g=this.getPublisher("dom");if(g){j.push(g)}}}else{j=this.noActivePublishers}return this.cacheActivePublishers(h,b,j)},hasListener:function(f,g,c){var a=this.getListenerStack(f,g,c),d=this.getCaptureListenerStack(f,g,c),b=false;if(a){b=a.count()>0}if(!b&&f==="element"){b=d.count()>0}return b},getHasListeners:function(c,d){var b=this.hasListeners,a=d&&d.hasListeners;if(!a){a=b[c]||(b[c]=Ext.Object.chain(this.baseHasListeners));if(d){d.hasListeners=a=Ext.Object.chain(a)}}return a},addListener:function(b,g,f,j,l,n,c,a){n=n||{};var k=this.getActivePublishers(b,f),h=k.length,d,m;m=this.doAddListener(b,g,f,j,l,n,c,a);if(m){for(d=0;d<h;d++){k[d].subscribe(g,f,n,a)}}return m},doAddListener:function(b,h,f,k,l,m,c,a){m=m||{};var j=this,g,d;if(b==="element"){if(m.capture){g=j.getCaptureListenerStack(b,h,f,true)}else{d=j.getPublisher("dom");if(m.delegated===false||d.directEvents[f]||(!d.isTargetWin&&h==="#ext-window")){g=j.getDirectListenerStack(b,h,f,true)}}}if(!g){g=j.getListenerStack(b,h,f,true)}j.getHasListeners(b,a)._incr_(f);return g.add(k,l,m,c,a)},removeListener:function(b,g,f,j,l,n,c,a){n=n||{};var k=this.getActivePublishers(b,f),h=k.length,d,m;m=this.doRemoveListener(b,g,f,j,l,n,c,a);if(m){for(d=0;d<h;d++){k[d].unsubscribe(g,f,null,n,a)}}return m},doRemoveListener:function(b,h,f,k,l,m,c,a){m=m||{};var j=this,g,d;if(b==="element"){if(m.capture){g=j.getCaptureListenerStack(b,h,f)}else{d=j.getPublisher("dom");if(m.delegated===false||d.directEvents[f]||(!d.isTargetWin&&h==="#ext-window")){g=j.getDirectListenerStack(b,h,f)}}}if(!g){g=j.getListenerStack(b,h,f)}if(g&&g.remove(k,l,c)){j.getHasListeners(b,a)._decr_(f);return true}return false},clearListeners:function(f,h,g){var c=this,b=c.listenerStacks[f],d=c.captureListenerStacks[f],a;if(b){c.doClearListeners(b,f,h,{},g)}if(d){c.doClearListeners(d,f,h,{capture:true},g)}if(g){a=c.directListenerStacks[f];if(a){c.doClearListeners(a,f,h,{delegated:false},g)}}},doClearListeners:function(m,b,g,n,a){var k=this,c=m[g],j=k.getHasListeners(b,a),f,d,h,l;if(c){for(f in c){l=k.getActivePublishers(b,f);for(d=0,h=l.length;d<h;d++){l[d].unsubscribe(g,f,true,n,a)}if(!(j[f]-=c[f].length)){delete j[f]}}delete m[g]}},dispatchEvent:function(d,f,a){var g=this.getActivePublishers(d,a),c=g.length,b;if(c>0){for(b=0;b<c;b++){g[b].notify(f,a)}}return this.doDispatchEvent.apply(this,arguments)},doDispatchEvent:function(a,h,g,k,c,b,l){var j=l?this.getCaptureListenerStack(a,h,g):this.getListenerStack(a,h,g,l),d=this.getWildcardListenerStacks(a,h,g,l),f;if(!j||!j.length){if(!d.length&&!c){return}}else{d.push(j)}f=this.getController(a,h,g,b);f.setListenerStacks(d);f.fire(k,c);return !f.isInterrupted()},dispatchDirectEvent:function(f,g,c,d){var b=this.getDirectListenerStack(f,g,c),a;if(b&&b.length){a=this.getController(f,g,c);a.setListenerStacks([b]);a.fire(d);return !a.isInterrupted()}},getWildcardListenerStacks:function(a,g,f,k){var c=[],d=this.wildcard,b=f!==d,j=g!==d,h;if(b&&(h=this.getListenerStack(a,g,d,k))){c.push(h)}if(j&&(h=this.getListenerStack(a,d,f,k))){c.push(h)}return c},getPublisher:function(a){return this.getPublishers()[a]},destroy:function(){var b=this.getPublishers(),a;for(a in b){b[a].destroy()}}},1,0,0,0,0,0,[Ext.event,"Dispatcher"],0));(Ext.cmd.derive("Ext.Mixin",Ext.Base,function(a){return{statics:{addHook:function(j,f,c,d){var h=Ext.isFunction(j),g=function(){var l=arguments,m=h?j:d[j],k=this.callParent(l);m.apply(this,l);return k},b=f.hasOwnProperty(c)&&f[c];if(h){j.$previous=Ext.emptyFn}g.$name=c;g.$owner=f.self;if(b){g.$previous=b.$previous;b.$previous=g}else{f[c]=g}}},onClassExtended:function(m,d){var g=d.mixinConfig,k=d.xhooks,j=m.superclass,f=d.onClassMixedIn,b,h,l,c;if(k){delete d.xhooks;(g||(d.mixinConfig=g={})).on=k}if(g){b=j.mixinConfig;if(b){d.mixinConfig=g=Ext.merge({},b,g)}d.mixinId=g.id;h=g.before;l=g.after;k=g.on;c=g.extended}if(h||l||k||c){d.onClassMixedIn=function(q){var n=this.prototype,p=q.prototype,o;if(h){Ext.Object.each(h,function(r,s){q.addMember(r,function(){if(n[s].apply(this,arguments)!==false){return this.callParent(arguments)}})})}if(l){Ext.Object.each(l,function(r,s){q.addMember(r,function(){var t=this.callParent(arguments);n[s].apply(this,arguments);return t})})}if(k){for(o in k){a.addHook(k[o],p,o,n)}}if(c){q.onExtended(function(){var r=Ext.Array.slice(arguments,0);r.unshift(q);return c.apply(this,r)},this)}if(f){f.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,"Mixin"],0));(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var g=this.id,b,d,f,a,c;if(!(g||g===0)){b=this.self.prototype;d=this.defaultIdSeparator;a=Ext.mixin.Identifiable.uniqueIds;if(!b.hasOwnProperty("identifiablePrefix")){f=this.xtype;if(f){c=this.defaultIdPrefix+f.replace(this.idCleanRegex,d)+d}else{if(!(c=b.$className)){c=this.defaultIdPrefix+"anonymous"+d}else{c=c.replace(this.idCleanRegex,d).toLowerCase()+d}}b.identifiablePrefix=c}c=this.identifiablePrefix;if(!a.hasOwnProperty(c)){a[c]=0}g=this.id=c+(++a[c])}this.getUniqueId=this.getOptimizedId;return g},setId:function(a){this.id=a},getId:function(){var a=this.id;if(!a){a=this.getUniqueId()}this.getId=this.getOptimizedId;return a}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,{mixinConfig:{id:"observable",after:{destroy:"destroy"}},isObservable:true,observableType:"observable",validIdRe:Ext.validIdRe,observableIdPrefix:"#",listenerOptionsRegex:/^(?:scope|order|delegate|single|delay|buffer|args|prepend|destroyable)$/,eventFiringSuspended:0,config:{listeners:{$value:null,merge:function(g,a,f){var d=g,c,b;if(f.isInstance){if(f._hasDeclaredListeners){d=[f.self.getDeclaredListeners(),g]}}else{if(!f.listeners){f.listeners=f.getDeclaredListeners()}if(g){c=g.scope;if(!c){g.scope="self"}else{b=Ext._namedScopes[c];if(b&&b.isController){g.scope="self.controller"}}f.prototype._hasDeclaredListeners=true;f.listeners.push(g)}}return d}},bubbleEvents:null},inheritableStatics:{getDeclaredListeners:function(){var g=this,h=g.superclass,d=g.listeners,f=g.prototype,a,c,b;if(!d){d=g.listeners=[];if(h.isObservable){d.push(h.self.getDeclaredListeners())}if(f.hasOwnProperty("mixins")){a=f.mixins;for(c in a){b=a[c];if(b.isObservable){d.push(b.self.getDeclaredListeners())}}}}return d}},afterClassMixedIn:function(b){var a=b.prototype,c=a.listeners;if(c){delete a.listeners;b.getConfigurator().add({listeners:c})}},constructor:function(a){var b=this;b.initConfig(a);b.getEventDispatcher().getHasListeners(b.observableType,b)},applyListeners:function(a){if(a){if(a instanceof Array){Ext.each(a,this.applyListeners,this)}else{this.addListener(a)}}return a},resolveListenerScope:function(a){if(a==="this"){a=null}return a||this},applyBubbleEvents:function(a){if(a){this.enableBubble(a)}},getOptimizedObservableId:function(){return this.observableId},getObservableId:function(){var a=this,c,b;if(!a.observableId){c=a.getUniqueId();b=a.validIdRe;a.observableId=a.observableIdPrefix+c;a.getObservableId=a.getOptimizedObservableId}return a.observableId},getOptimizedEventDispatcher:function(){return this.eventDispatcher},createEventDispatcher:function(){var b=this,a;b.eventDispatcher=a=Ext.event.Dispatcher.getInstance();b.getEventDispatcher=b.getOptimizedEventDispatcher;b.getListeners();b.getBubbleEvents();return a},getEventDispatcher:function(){var a=this.eventDispatcher;if(!a){a=this.createEventDispatcher()}return a},getManagedListeners:function(c,b){var d=c.getUniqueId(),a=this.managedListeners;if(!a){this.managedListeners=a={}}if(!a[d]){a[d]={};c.doAddListener("destroy","clearManagedListeners",this,{single:true,args:[c]})}if(!a[d][b]){a[d][b]=[]}return a[d][b]},getUsedSelectors:function(){var a=this.usedSelectors;if(!a){a=this.usedSelectors=[];a.$map={}}return a},fireEvent:function(a){var b=Array.prototype.slice.call(arguments,1);return this.doFireEvent(a,b)},fireEventArgs:function(a,b){return this.doFireEvent(a,b)},fireAction:function(c,f,h,g,d,a){var b=typeof h,j;if(f===undefined){f=[]}if(b!=="undefined"){j={fn:h,isLateBinding:b==="string",scope:g||this,options:d||{},order:a}}return this.doFireEvent(c,f,j)},doFireEvent:function(d,h,c,b){var j=this,k=j.eventQueue,a=Ext.$eventNameMap,g=j.suspendedEvents,f=true;d=a[d]||(a[d]=d.toLowerCase());if(j.eventFiringSuspended||(g&&g[d])){if(k){k.push([d,h,c,b])}}else{f=j.getEventDispatcher().dispatchEvent(j.observableType,j.getObservableId(),d,h,c,b)}return f},doAddListener:function(a,l,n,o,c){var k=this,f=(n&&n!==k&&n.isIdentifiable),b=k.getUsedSelectors(),g=b.$map,d=k.getObservableId(),h,m,j;if(!o){o={}}if(!o.type){o.type=a}if(!n&&typeof l==="function"){n=k}if(o.delegate){j=o.delegate;d+=" "+j}if(!(d in g)){g[d]=true;b.push(d)}h=k.addDispatcherListener(d,a,l,n,o,c);if(h&&f){m=k.getManagedListeners(n,a);m.push({delegate:j,scope:n,fn:l,order:c})}return h},addDispatcherListener:function(b,d,g,f,c,a){return this.getEventDispatcher().addListener(this.observableType,b,d,g,f,c,a,this)},doRemoveListener:function(b,m,o,p,d){var l=this,h=(o&&o!==l&&o.isIdentifiable),f=l.getObservableId(),a,n,g,j,c,k;if(!p){p={}}if(!o&&typeof m==="function"){o=l}if(p.delegate){k=p.delegate;f+=" "+k}a=l.removeDispatcherListener(f,b,m,o,p,d);if(a&&h){n=l.getManagedListeners(o,b);for(g=0,j=n.length;g<j;g++){c=n[g];if(c.fn===m&&c.scope===o&&c.delegate===k&&c.order===d){n.splice(g,1);break}}}return a},removeDispatcherListener:function(b,d,g,f,c,a){return this.getEventDispatcher().removeListener(this.observableType,b,d,g,f,c,a,this)},clearManagedListeners:function(d){var j=this,l=j.managedListeners,a,c,k,g,f,h,b,m;if(!l){return j}if(d){if(typeof d!=="string"){a=d.getUniqueId()}else{a=d}c=l[a];for(g in c){if(c.hasOwnProperty(g)){k=c[g];for(f=0,h=k.length;f<h;f++){b=k[f];m={};if(b.delegate){m.delegate=b.delegate}if(j.doRemoveListener(g,b.fn,b.scope,m,b.order)){f--;h--}}}}delete l[a];return j}for(a in l){if(l.hasOwnProperty(a)){j.clearManagedListeners(a)}}},changeListener:function(m,j,k,b,g,r){var w=this,v=Ext.$eventNameMap,n,p,a,f,o,t,d,c,x,q,s,l,h,u;if(typeof k!=="undefined"){if(typeof j!=="string"){for(s=0,l=j.length;s<l;s++){x=j[s];x=v[x]||(v[x]=x.toLowerCase());m.call(w,x,k,b,g,r)}return w}j=v[j]||(v[j]=j.toLowerCase());if(g){g=Ext.Object.chain(g)}m.call(w,j,k,b,g,r)}else{if(Ext.isArray(j)){p=j;for(s=0,l=p.length;s<l;s++){h=p[s];j=h.event;j=v[j]||(v[j]=j.toLowerCase());m.call(w,j,h.fn,h.scope,h,h.order)}}else{if(j){a=w.listenerOptionsRegex;g=j;n=[];p=[];f={};r=g.order;b=g.scope;t=Ext._namedScopes;d=b&&t[b];o=d&&d.isSelf;for(x in g){q=g[x];if(!a.test(x)){x=v[x]||(v[x]=x.toLowerCase());u=typeof q;if(u!=="string"&&u!=="function"){c=q.scope;if(c&&o){d=t[c];if(d&&d.isController){c="self.controller"}}m.call(this,x,q.fn,c||b,q,q.order||r);continue}n.push(x);p.push(q)}else{f[x]=q}}for(s=0,l=n.length;s<l;s++){m.call(w,n[s],p[s],b,f,r)}}}}return w},addListener:function(b,h,g,d,a){var j=this,f,c;if(d){f=d.destroyable}else{if(typeof b==="object"){f=b.destroyable}}c=j.changeListener(j.doAddListener,b,h,g,d,a);if(f){c=new Ext.mixin.Observable.$ListenerRemover(j,b,h,g,d,a)}return c},toggleListener:function(b,c,g,f,d,a){return this.changeListener(b?this.doAddListener:this.doRemoveListener,c,g,f,d,a)},addBeforeListener:function(a,d,c,b){return this.addListener(a,d,c,b,"before")},addAfterListener:function(a,d,c,b){return this.addListener(a,d,c,b,"after")},removeListener:function(b,f,d,c,a){return this.changeListener(this.doRemoveListener,b,f,d,c,a)},removeBeforeListener:function(a,d,c,b){return this.removeListener(a,d,c,b,"before")},removeAfterListener:function(a,d,c,b){return this.removeListener(a,d,c,b,"after")},clearListeners:function(){var f=this,g=f.getUsedSelectors(),c=f.getEventDispatcher(),b,d,a;for(b=0,d=g.length;b<d;b++){a=g[b];c.clearListeners(f.observableType,a,f)}},hasListener:function(a){return this.getEventDispatcher().hasListener(this.observableType,this.getObservableId(),a)},isSuspended:function(a){var c=Ext.$eventNameMap,b=this.suspendedEvents;if(a){a=c[a]||(c[a]=a.toLowerCase())}return !!(this.eventFiringSuspended||(b&&b[a]))},suspendEvents:function(a){++this.eventFiringSuspended;if(a&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var b=arguments,f=this.suspendedEvents,g=Ext.$eventNameMap,d=b.length,c,a;if(!f){f=this.suspendedEvents={}}for(c=0;c<d;c++){a=b[c];a=g[a]||(g[a]=a.toLowerCase());if(!(a in f)){f[a]=0}++f[a]}},resumeEvents:function(h){var g=this,a=g.eventQueue||[],f=g.suspendedEvents,b,c,d;if(g.eventFiringSuspended&&!--g.eventFiringSuspended){if(!h){for(c=0,d=a.length;c<d;c++){b=a[c];if(!(f&&f[b[0]])){g.doFireEvent.apply(g,b)}}}g.eventQueue=null}},resumeEvent:function(){var g=this,b=arguments,f=g.suspendedEvents,h=Ext.$eventNameMap,d=b.length,c,a;for(c=0;c<d;c++){a=b[c];a=h[a]||(h[a]=a.toLowerCase());if(f&&f[a]){--f[a]}}if(!g.eventFiringSuspended){g.resumeEvents()}},relayEvents:function(b,d,h){var j=Ext.$eventNameMap,c,g,f,a;if(typeof h==="undefined"){h=""}h=h.toLowerCase();if(typeof d==="string"){d=[d]}if(Ext.isArray(d)){for(c=0,g=d.length;c<g;c++){f=d[c];f=j[f]||(j[f]=f.toLowerCase());a=h+f;b.addListener(f,this.createEventRelayer(a),this)}}else{for(f in d){if(d.hasOwnProperty(f)){f=j[f]||(j[f]=f.toLowerCase());a=h+d[f];b.addListener(f,this.createEventRelayer(a),this)}}}return this},relayEvent:function(f,g,j,k,a){var h=typeof g,c=f[f.length-1],d=c.getInfo().eventName,b;f=Array.prototype.slice.call(f,0,-2);f[0]=this;if(h!=="undefined"){b={fn:g,scope:j||this,options:k||{},order:a,isLateBinding:h==="string"}}return this.doFireEvent(d,f,b,c)},createEventRelayer:function(a){return function(){return this.doFireEvent(a,Array.prototype.slice.call(arguments,0,-2))}},enableBubble:function(d){var b=this.isBubblingEnabled,g=Ext.$eventNameMap,c,f,a;if(!b){b=this.isBubblingEnabled={}}if(typeof d==="string"){d=Ext.Array.clone(arguments)}for(c=0,f=d.length;c<f;c++){a=d[c];a=g[a]||(g[a]=a.toLowerCase());if(!b[a]){b[a]=true;this.addListener(a,this.createEventBubbler(a),this)}}},createEventBubbler:function(a){return function b(){var c=("getBubbleTarget" in this)?this.getBubbleTarget():null;if(c&&c!==this&&c.isObservable){c.fireAction(a,Array.prototype.slice.call(arguments,0,-2),b,c,null,"after")}}},getBubbleTarget:function(){return false},destroy:function(){var a=this;if(a.observableId){a.fireEvent("destroy",a);a.clearListeners();a.clearManagedListeners()}},deprecated:{"2.0":{methods:{addEvents:null,addManagedListener:function(){var a=arguments[0];a.addListener.apply(a,Ext.Array.slice(arguments,1))},removeManagedListener:function(){var a=arguments[0];a.removeListener.apply(a,Ext.Array.slice(arguments,1))},mon:function(){var a=arguments[0];a.addListener.apply(a,Ext.Array.slice(arguments,1))},mun:function(){var a=arguments[0];a.removeListener.apply(a,Ext.Array.slice(arguments,1))}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(b){var a=function(c){if(c instanceof a){return c}this.observable=c;this.args=Array.prototype.slice.call(arguments,1)};a.prototype.destroy=function(){var c=this.observable;c.un.apply(c,this.args)};b.$ListenerRemover=a;b.createAlias({on:"addListener",un:"removeListener",onBefore:"addBeforeListener",onAfter:"addAfterListener",unBefore:"removeBeforeListener",unAfter:"removeAfterListener"})}));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(a){var c=this,b;c.mixins.observable.constructor.call(c,a);c.clear(true);b=c.getKeyFn();if(b){c.getKey=b}},getCount:function(){return this.length},getData:function(a,b){if(b===undefined){b=a;a=this.getKey(b)}return[a,b]},getKey:function(a){return a.id},add:function(a,c){var b=this;if(arguments.length===1){c=a;a=b.getKey(c)}if(b.containsKey(a)){return b.replace(a,c)}b.map[a]=c;++b.length;b.generation++;if(b.hasListeners.add){b.fireEvent("add",b,a,c)}return c},replace:function(b,d){var c=this,f=c.map,a;if(arguments.length===1){d=b;b=c.getKey(d)}if(!c.containsKey(b)){c.add(b,d)}a=f[b];f[b]=d;c.generation++;if(c.hasListeners.replace){c.fireEvent("replace",c,b,d,a)}return d},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return false},removeAtKey:function(a){var b=this,c;if(b.containsKey(a)){c=b.map[a];delete b.map[a];--b.length;b.generation++;if(b.hasListeners.remove){b.fireEvent("remove",b,a,c)}return true}return false},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(a){var b=this;if(a||b.generation){b.map={};b.length=0;b.generation=a?0:b.generation+1}if(a!==true&&b.hasListeners.clear){b.fireEvent("clear",b)}return b},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(d){var a=[],b,c=this.map;for(b in c){if(c.hasOwnProperty(b)){a.push(d?b:c[b])}}return a},each:function(d,c){var a=Ext.apply({},this.map),b,f=this.length;c=c||this;for(b in a){if(a.hasOwnProperty(b)){if(d.call(c,b,a[b],f)===false){break}}}return this},clone:function(){var c=new this.self(this.initialConfig),b=this.map,a;c.suspendEvents();for(a in b){if(b.hasOwnProperty(a)){c.add(a,b[a])}}c.resumeEvents();return c},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a]===b){return a}}return undefined}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(d,c,b){var a;a=this.liveConnections[Number(d)];if(a){a.onFlashStateChange(c,b)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var b=this,a,c;b.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});a=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");c="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){c=Ext.flashPluginPath}Ext.Loader.loadScript({url:a,onLoad:function(){var f="11.4.0";var h="playerProductInstall.swf";var d={};var j={};j.quality="high";j.bgcolor="#ffffff";j.allowscriptaccess="sameDomain";j.allowfullscreen="true";var g={};g.id="ext-flash-polyfill";g.name="polyfill";g.align="middle";swfobject.embedSWF(c,"ext-flash-polyfill","0","0",f,h,d,j,g)},onError:function(){},scope:b});Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(a){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var b=this;Ext.apply(b,a);b.requestHeaders={}},abort:function(){var a=this;if(a.readyState==4){return}a.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(b,c){a.push(b+": "+c)});return a.join("\r\n")},getResponseHeader:function(b){var a=this.responseHeaders;return(a&&a[b])||null},open:function(g,c,d,a,b){var f=this;f.method=g;f.url=c;f.async=d!==false;f.user=a;f.password=b},overrideMimeType:function(a){this.mimeType=a},send:function(a){var b=this;b.body=a;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",b.onFlashReady,b)}else{this.onFlashReady()}},onFlashReady:function(){var c=this,b,a;c.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(c);b={method:c.method,url:c.url,user:c.user,password:c.password,mimeType:c.mimeType,requestHeaders:c.requestHeaders,body:c.body,javascriptId:c.javascriptId};a=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b)},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(b,a){this.requestHeaders[b]=a},onreadystatechange:Ext.emptyFn,parseData:function(b){var a=this;this.status=b.status||0;a.responseHeaders={};if(a.mimeType){a.responseHeaders["content-type"]=a.mimeType}if(b.reason=="complete"){this.responseBytes=b.data;a.responseHeaders["content-length"]=b.data.length}else{if(b.reason=="error"||b.reason=="securityError"){this.statusText=b.text;a.responseHeaders["content-length"]=0}}},onFlashStateChange:function(c,b){var a=this;if(c==4){a.parseData(b);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]}a.setReadyState(c)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},config:{url:null,async:true,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,extraParams:null,autoAbort:false,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest"},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(m){m=m||{};var h=this,l=m.scope||window,g=m.username||h.getUsername(),j=m.password||h.getPassword()||"",b,d,f,a,c,k;if(h.fireEvent("beforerequest",h,m)!==false){d=h.setOptions(m,l);if(h.isFormUpload(m)){h.upload(m.form,d.url,d.data,m);return null}if(m.autoAbort||h.getAutoAbort()){h.abort()}b=m.async!==false?(m.async||h.getAsync()):false;k=h.openRequest(m,d,b,g,j);c=h.getIsXdr();if(!c){a=h.setupHeaders(k,m,d.data,d.params)}f={id:++Ext.data.Connection.requestId,xhr:k,headers:a,options:m,async:b,binary:m.binary||h.getBinary(),timeout:Ext.defer(function(){f.timedout=true;h.abort(f)},m.timeout||h.getTimeout())};h.requests[f.id]=f;h.latestId=f.id;if(b){if(!c){k.onreadystatechange=Ext.Function.bind(h.onStateChange,h,[f])}}if(c){h.processXdrRequest(f,k)}k.send(d.data);if(!b){return h.onComplete(f)}return f}else{Ext.callback(m.callback,m.scope,[m,undefined,undefined]);return null}},processXdrRequest:function(b,c){var a=this;delete b.headers;b.contentType=b.options.contentType||a.getDefaultXdrContentType();c.onload=Ext.Function.bind(a.onStateChange,a,[b,true]);c.onerror=c.ontimeout=Ext.Function.bind(a.onStateChange,a,[b,false])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return[]};a.getResponseHeader=function(){return""};a.contentType=b.contentType||this.getDefaultXdrContentType()},upload:function(b,g,t,f){b=Ext.getDom(b);f=f||{};var o=Ext.id(),m=document.createElement("iframe"),c=[],d="multipart/form-data",s={target:b.target,method:b.method,encoding:b.encoding,enctype:b.enctype,action:b.action},a=function(h,v){j=document.createElement("input");Ext.fly(j).set({type:"hidden",value:v,name:h});b.appendChild(j);c.push(j)},j,l,q,u,p,k,n,r;Ext.fly(m).set({id:o,name:o,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(m);if(document.frames){document.frames[o].name=o}Ext.fly(b).set({target:o,method:"POST",enctype:d,encoding:d,action:g||s.action});if(t){l=Ext.Object.fromQueryString(t)||{};for(u in l){if(l.hasOwnProperty(u)){q=l[u];if(Ext.isArray(q)){p=q.length;for(k=0;k<p;k++){a(u,q[k])}}else{a(u,q)}}}}Ext.get(m).on({load:Ext.Function.bind(this.onUploadComplete,this,[m,f]),single:!Ext.isOpera});b.submit();Ext.fly(b).set(s);for(n=c.length,r=0;r<n;r++){Ext.removeNode(c[r])}},onUploadComplete:function(a,k){var f=this,b={responseText:"",responseXML:null},h,j,g,c;try{g=(a&&(a.contentWindow.document||a.contentDocument))||(window.frames[a.id]||{}).document;if(g){if(Ext.isOpera&&g.location==Ext.SSL_SECURE_URL){return}if(g.body){if((c=g.body.firstChild)&&/pre/i.test(c.tagName)){b.responseText=c.textContent||c.innerText}else{if((c=g.getElementsByTagName("textarea")[0])){b.responseText=c.value}else{b.responseText=g.body.textContent||g.body.innerText}}}b.responseXML=g.XMLDocument||g;h=k.success;j=true}else{Ext.Error.raise("Could not acquire a suitable connection for the file upload service.")}}catch(d){b.responseText='{success:false,message:"'+Ext.String.trim(d.message||d.description)+'"}';h=k.failure;j=false}f.fireEvent(j?"requestcomplete":"requestexception",f,b,k);Ext.callback(h,k.scope,[b,k]);Ext.callback(k.callback,k.scope,[k,j,b]);Ext.defer(Ext.removeNode,100,Ext,[a])},isFormUpload:function(a){var b=this.getForm(a);if(b){return(a.isUpload||(/multipart\/form-data/i).test(b.getAttribute("enctype")))}return false},getForm:function(a){var b=a.form||null;if(b){b=Ext.getDom(b)}return b},setOptions:function(m,l){var j=this,f=m.params||{},h=j.getExtraParams(),d=m.urlParams,c=m.url||j.getUrl(),k=m.jsonData,b,a,g;if(Ext.isFunction(f)){f=f.call(l,m)}if(Ext.isFunction(c)){c=c.call(l,m)}c=this.setupUrl(m,c);g=m.rawData||m.binaryData||m.xmlData||k||null;if(k&&!Ext.isPrimitive(k)){g=Ext.encode(g)}if(m.binaryData){if(j.nativeBinaryPostSupport()){g=(new Uint8Array(m.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){g=g.buffer}}}if(Ext.isObject(f)){f=Ext.Object.toQueryString(f)}if(Ext.isObject(h)){h=Ext.Object.toQueryString(h)}f=f+((h)?((f)?"&":"")+h:"");d=Ext.isObject(d)?Ext.Object.toQueryString(d):d;f=this.setupParams(m,f);b=(m.method||j.getMethod()||((f||g)?"POST":"GET")).toUpperCase();this.setupMethod(m,b);a=m.disableCaching!==false?(m.disableCaching||j.getDisableCaching()):false;if(b==="GET"&&a){c=Ext.urlAppend(c,(m.disableCachingParam||j.getDisableCachingParam())+"="+(new Date().getTime()))}if((b=="GET"||g)&&f){c=Ext.urlAppend(c,f);f=null}if(d){c=Ext.urlAppend(c,d)}return{url:c,method:b,data:g||f||null}},setupUrl:function(b,a){var c=this.getForm(b);if(c){a=a||c.action}return a},setupParams:function(a,d){var c=this.getForm(a),b;if(c&&!this.isFormUpload(a)){b=Ext.Element.serializeForm(c);d=d?(d+"&"+b):b}return d},setupMethod:function(a,b){if(this.isFormUpload(a)){return"POST"}return b},setupHeaders:function(o,p,f,d){var k=this,b=Ext.apply({},p.headers||{},k.getDefaultHeaders()||{}),n=k.getDefaultPostHeader(),l=p.jsonData,a=p.xmlData,j="Content-Type",c=Ext.isDefined(p.useDefaultXhrHeader)?p.useDefaultXhrHeader:k.getUseDefaultXhrHeader(),m,g;if(!b.hasOwnProperty(j)&&(f||d)){if(f){if(p.rawData){n="text/plain"}else{if(a&&Ext.isDefined(a)){n="text/xml"}else{if(l&&Ext.isDefined(l)){n="application/json"}}}}b[j]=n}if(c&&!b["X-Requested-With"]){b["X-Requested-With"]=k.getDefaultXhrHeader()}if(b[j]===undefined||b[j]===null){delete b[j]}try{for(m in b){if(b.hasOwnProperty(m)){g=b[m];o.setRequestHeader(m,g)}}}catch(h){k.fireEvent("exception",m,g)}return b},newRequest:function(a){var b=this,c;if(a.binaryData){if(b.nativeBinaryPostSupport()){c=b.getXhrInstance()}else{c=new Ext.data.flash.BinaryXhr()}}else{if((a.cors||b.getCors())&&Ext.isIE&&Ext.ieVersion<=9){c=b.getXdrInstance();b.setIsXdr(true)}else{c=b.getXhrInstance()}}return c},openRequest:function(c,a,d,h,b){var f=this,g=f.newRequest(c);if(h){g.open(a.method,a.url,d,h,b)}else{if(f.getIsXdr()){g.open(a.method,a.url)}else{g.open(a.method,a.url,d)}}if(c.binary||f.getBinary()){if(window.Uint8Array){g.responseType="arraybuffer"}else{if(g.overrideMimeType){g.overrideMimeType("text/plain; charset=x-user-defined")}}}if(c.withCredentials||f.getWithCredentials()){g.withCredentials=true}return g},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else{Ext.Error.raise({msg:"Your browser does not support CORS"})}return a},getXhrInstance:(function(){var b=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0,a=b.length,f;for(;c<a;++c){try{f=b[c];f();break}catch(d){}}return f}()),isLoading:function(a){if(!a){a=this.getLatest()}if(!(a&&a.xhr)){return false}var b=a.xhr.readyState,c=Ext.data.flash&&Ext.data.flash.BinaryXhr;return((a.xhr instanceof c)&&b!=4)||!(b===0||b==4)},abort:function(b){var a=this,d;if(!b){b=a.getLatest()}if(b&&a.isLoading(b)){d=b.xhr;try{d.onreadystatechange=null}catch(c){d.onreadystatechange=Ext.emptyFn}d.abort();a.clearTimeout(b);if(!b.timedout){b.aborted=true}a.onComplete(b);a.cleanup(b)}},abortAll:function(){var b=this.requests,a;for(a in b){if(b.hasOwnProperty(a)){this.abort(b[a])}}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},onStateChange:function(d,b){var c=this,a=Ext.GlobalEvents;if((d.xhr&&d.xhr.readyState==4)||c.isXdr){c.clearTimeout(d);c.onComplete(d,b);c.cleanup(d);if(a.hasListeners.idle){a.fireEvent("idle")}}},clearTimeout:function(a){clearTimeout(a.timeout);delete a.timeout},cleanup:function(a){a.xhr=null;delete a.xhr},onComplete:function(b,h){var d=this,j=b.options,g,k,f,a;try{g=b.xhr;k=d.parseStatus(g.status);if(k.success){k.success=g.readyState===4}}catch(c){k={success:false,isException:false}}f=d.isXdr?h:k.success;if(f){a=d.createResponse(b);d.fireEvent("requestcomplete",d,a,j);Ext.callback(j.success,j.scope,[a,j])}else{if(k.isException||b.aborted||b.timedout){a=d.createException(b)}else{a=d.createResponse(b)}d.fireEvent("requestexception",d,a,j);Ext.callback(j.failure,j.scope,[a,j])}Ext.callback(j.callback,j.scope,[j,f,a]);delete d.requests[b.id];return a},parseStatus:function(a){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break}}return{success:c,isException:b}},createResponse:function(f){var j=this,l=f.xhr,c=j.getIsXdr(),b={},m=c?[]:l.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),h=m.length,n,g,k,d,a;while(h--){n=m[h];g=n.indexOf(":");if(g>=0){k=n.substr(0,g).toLowerCase();if(n.charAt(g+1)==" "){++g}b[k]=n.substr(g+1)}}f.xhr=null;delete f.xhr;d={request:f,requestId:f.id,status:l.status,statusText:l.statusText,getResponseHeader:function(o){return b[o.toLowerCase()]},getAllResponseHeaders:function(){return b}};if(c){j.processXdrResponse(d,l)}if(f.binary){d.responseBytes=j.getByteArray(l)}else{d.responseText=l.responseText;d.responseXML=l.responseXML}l=null;return d},createException:function(a){return{request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?"transaction aborted":"communication failure",aborted:a.aborted,timedout:a.timedout}},getByteArray:function(j){var c=j.response,b=j.responseBody,k=Ext.data.flash&&Ext.data.flash.BinaryXhr,a,h,f,d;if(j instanceof k){a=j.responseBytes}else{if(window.Uint8Array){a=c?new Uint8Array(c):[]}else{if(Ext.isIE9p){try{a=new VBArray(b).toArray()}catch(g){a=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(j.responseBody,a=[])}else{a=[];h=j.responseText;f=h.length;for(d=0;d<f;d++){a.push(h.charCodeAt(d)&255)}}}}}return a},injectVBScript:function(){var a=document.createElement("script");a.type="text/vbscript";a.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=true},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:true,constructor:function(){this.queue=[];this.taskQueue=[];this.runningQueue=[];this.idleQueue=[];this.isRunning=false;this.isIdle=true;this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},start:function(c,b,a){this.queue.push(arguments);if(!this.isRunning){if(this.hasOwnProperty("idleTimer")){clearTimeout(this.idleTimer);delete this.idleTimer}if(this.hasOwnProperty("idleQueueTimer")){clearTimeout(this.idleQueueTimer);delete this.idleQueueTimer}this.isIdle=false;this.isRunning=true;this.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){if(!this.isRunning){return}var a=this.runningQueue,b,c;this.lastRunTime=Ext.now();this.frameStartTime=Ext.now();a.push.apply(a,this.queue);for(b=0,c=a.length;b<c;b++){this.invoke(a[b])}a.length=0;this.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(f,d,b){if(!this.isRunning){return}var a=this.queue,h=a.length,c,g;for(c=0;c<h;c++){g=a[c];if(g[0]===f&&g[1]===d&&g[2]===b){a.splice(c,1);c--;h--}}if(h===0){this.doStop();this.isRunning=false;this.idleTimer=Ext.defer(this.whenIdle,100,this)}},onIdle:function(f,d,a){var c=this.idleQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){return}}c.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(f,d,a){var c=this.idleQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){c.splice(b,1);return true}}return false},queueTask:function(c,b,a){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(f,d,a){var c=this.taskQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){c.splice(b,1);b--;g--}}},invoke:function(d){var c=d[0],b=d[1],a=d[2];c=(typeof c=="string"?b[c]:c);if(Ext.isArray(a)){c.apply(b,a)}else{c.call(b,a)}},whenIdle:function(){this.isIdle=true;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty("idleQueueTimer")){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var a=this.idleQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty("taskQueueTimer")){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var a=this.taskQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}},showFps:function(){Ext.onReady(function(){Ext.Viewport.add([{xtype:"component",bottom:50,left:0,width:50,height:20,html:"Average",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__averageFps",xtype:"component",bottom:0,left:0,width:50,height:50,html:"0",style:"background-color: red; color: white; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:50,width:50,height:20,html:"Min (Last 1k)",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__minFps",xtype:"component",bottom:0,left:50,width:50,height:50,html:"0",style:"background-color: orange; color: white; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:100,width:50,height:20,html:"Max (Last 1k)",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__maxFps",xtype:"component",bottom:0,left:100,width:50,height:50,html:"0",style:"background-color: yellow; color: black; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:150,width:50,height:20,html:"Current",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__currentFps",xtype:"component",bottom:0,left:150,width:50,height:50,html:"0",style:"background-color: green; color: white; text-align: center; line-height: 50px;"}]);Ext.AnimationQueue.resetFps()})},resetFps:function(){var c=Ext.getCmp("__currentFps"),b=Ext.getCmp("__averageFps"),j=Ext.getCmp("__minFps"),h=Ext.getCmp("__maxFps"),d=1000,a=0,g=0,f=0;Ext.AnimationQueue.onFpsChanged=function(k){g++;if(!(g%10)){d=1000;a=0}f+=k;d=Math.min(d,k);a=Math.max(a,k);c.setHtml(Math.round(k));b.setHtml(Math.round(f/g));j.setHtml(Math.round(d));h.setHtml(Math.round(a))}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],function(){}));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(a){Ext.apply(this,a||{});this.all={};this.references={};this.onAvailableCallbacks={}},create:function(a,b){if(typeof a=="string"){return Ext.widget(a)}if(a.isComponent){return a}if("xclass" in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(a){var f=this,d=f.all,c=a.getId(),b=f.onAvailableCallbacks;d[c]=a;if(a.reference){f.references[c]=a}++f.count;b=b&&b[c];if(b&&b.length){f.notifyAvailable(a)}},unregister:function(a){var b=a.getId();if(a.reference){delete this.references[b]}delete this.all[b];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var c=this,b=c.references,a;if(c.referencesDirty){for(a in b){if(b.hasOwnProperty(a)){b[a].fixReference()}}c.referencesDirty=false}},onAvailable:function(h,c,b){var g=this,f=g.onAvailableCallbacks,a=g.all,d;if(h in a){d=a[h];c.call(b||d,d)}else{if(h){if(!Ext.isArray(f[h])){f[h]=[]}f[h].push(function(j){c.call(b||j,j)})}}},notifyAvailable:function(b){var a=this.onAvailableCallbacks[b&&b.getId()]||[];while(a.length){(a.shift())(b)}},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}}));Ext.ns("Ext.util").Operators={"=":function(b,c){return b==c},"!=":function(b,c){return b!=c},"^=":function(b,c){return b&&b.substr(0,c.length)==c},"$=":function(b,c){return b&&b.substr(b.length-c.length)==c},"*=":function(b,c){return b&&b.indexOf(c)!==-1},"%=":function(b,c){return(b%c)===0},"|=":function(b,c){return b&&(b==c||b.substr(0,c.length+1)==c+"-")},"~=":function(b,c){return b&&(" "+b+" ").indexOf(" "+c+" ")!=-1}};(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(b,f){var d=this,a=d.findKey(f),c;if(a){d.unlinkEntry(c=d.map[a]);c.prev=d.last;c.next=null}else{c={prev:d.last,next:null,key:b,value:f}}if(d.last){d.last.next=c}else{d.first=c}d.last=c;Ext.util.HashMap.prototype.add.call(this,b,c);d.prune();return f},insertBefore:function(b,g,c){var f=this,a,d;if(c=this.map[this.findKey(c)]){a=f.findKey(g);if(a){f.unlinkEntry(d=f.map[a])}else{d={prev:c.prev,next:c,key:b,value:g}}if(c.prev){d.prev.next=d}else{f.first=d}d.next=c;c.prev=d;f.prune();return g}else{return f.add(b,g)}},get:function(a){var b=this.map[a];if(b){if(b.next){this.moveToEnd(b)}return b.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(a){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.apply(this,arguments)},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else{this.last=a.prev}if(a.prev){a.prev.next=a.next}else{this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else{this.first=a}this.last=a},getArray:function(c){var a=[],b=this.first;while(b){a.push(c?b.key:b.value);b=b.next}return a},each:function(c,b,a){var g=this,f=a?g.last:g.first,d=g.length;b=b||g;while(f){if(c.call(b,f.key,f.value,d)===false){break}f=a?f.prev:f.next}return g},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a].value===b){return a}}return undefined},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b].value)}}a.resumeEvents();return a},prune:function(){var b=this,a=b.getMaxSize(),c=a?(b.length-a):0;if(c>0){for(;b.first&&c;c--){b.removeAtKey(b.first.key)}}}},0,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var g=this,t=Ext.util.Operators,l=/(\d*)n\+?(\d*)/,f=/\D/,n=/^(\s)+/,m=/\\(.)/g,o=new Ext.util.LruCache({maxSize:100}),p=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),q=function(v,u){return u.method.apply(this,[v].concat(u.args))},a=function(w,A){var u=[],x=0,z=w.length,y,v=A!==">";for(;x<z;x++){y=w[x];if(y.getRefItems){u=u.concat(y.getRefItems(v))}}return u},h=function(v){var u=[],w=0,y=v.length,x;for(;w<y;w++){x=v[w];while(!!(x=x.getRefOwner())){u.push(x)}}return u},d=function(v,A,z){if(A==="*"){return v.slice()}else{var u=[],w=0,y=v.length,x;for(;w<y;w++){x=v[w];if(x.isXType(A,z)){u.push(x)}}return u}},b=function(C,D,x,w){var G=[],B=0,v=C.length,F,y,E,u,A,z;if(D.charAt(0)==="@"){F=true;D=D.substr(1)}if(D.charAt(0)==="?"){F=true;y=true;D=D.substr(1)}for(;B<v;B++){E=C[B];if(!F||E.hasOwnProperty(D)){u=E[D];if(y){G.push(E)}else{if(x==="~="){if(u){if(!Ext.isArray(u)){u=u.split(" ")}for(A=0,z=u.length;A<z;A++){if(t[x](Ext.coerce(u[A],w),w)){G.push(E);break}}}}else{if(x==="/="){if(E[D]!==undefined&&w.test(E[D])){G.push(E)}}else{if(!w?!!E[D]:t[x](Ext.coerce(u,w),w)){G.push(E)}}}}}}return G},j=function(v,z){var u=[],w=0,y=v.length,x;for(;w<y;w++){x=v[w];if(x.getItemId()===z){u.push(x)}}return u},s=function(u,v,w){return g.pseudos[v](u,w)},k=/^(\s?([>\^])\s?|\s|$)/,r=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,c=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:d,argTransform:function(u){if(u[1]!==undefined){u[1]=u[1].replace(m,"$1")}return u.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:b,argTransform:function(y){var u=y[0],z=y[1],w=y[2],v=y[3],x=y[4],A;if(x!==undefined){x=x.replace(m,"$1")}if(w==="/="){A=o.get(x);if(A){x=A}else{x=o.add(x,new RegExp(x))}}return[z,w,x]}},{re:/^#((?:\\\.|[\w\-])+)/,method:j},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:s,argTransform:function(u){if(u[2]!==undefined){u[2]=u[2].replace(m,"$1")}return u.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:p}];g.Query=Ext.extend(Object,{constructor:function(u){u=u||{};Ext.apply(this,u)},execute:function(w){var x=this.operations,v=[],z,y,u;for(y=0,u=x.length;y<u;y++){z=x[y];v=v.concat(this._execute(w,z))}return v},_execute:function(v,x){var y=0,z=x.length,w,u;if(!v){u=Ext.ComponentManager.getAll()}else{if(Ext.isIterable(v)){u=v}else{if(v.isMixedCollection){u=v.items}}}for(;y<z;y++){w=x[y];if(w.mode==="^"){u=h(u||[v])}else{if(w.mode){u=a(u||[v],w.mode)}else{u=q(u||a([v]),w)}}if(y===z-1){return u}}return[]},is:function(x){var w=this.operations,v=false,u=w.length,z,y;if(u===0){return true}for(y=0;y<u;y++){z=w[y];v=this._is(x,z);if(v){return v}}return false},_is:function(D,u){var B=u.length,v=[D],w,y,x,A,z,C,E;for(y=B-1;y>=0;--y){w=u[y];A=w.mode;if(A){if(A==="^"){v=a(v," ")}else{if(A===">"){C=[];for(x=0,B=v.length;x<B;++x){E=v[x].getRefOwner();if(E){C.push(E)}}v=C}else{v=h(v)}}if(v.length===0){return false}}else{v=q(v,w);if(v.length===0){return false}}}return true},getMatches:function(x,v){var u=v.length,w;for(w=0;w<u;++w){x=q(x,v[w]);if(x.length===0){break}}return x},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(this,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(A,u){var B=Ext.ComponentQuery,y=0,z=A.length,x=[],w=-1,v;for(;y<z;++y){v=A[y];if(!B.is(v,u)){x[++w]=v}}return x},first:function(v){var u=[];if(v.length>0){u.push(v[0])}return u},last:function(w){var u=w.length,v=[];if(u>0){v.push(w[u-1])}return v},focusable:function(v){var u=v.length,x=[],w=0,y;for(;w<u;w++){y=v[w];if(y.isFocusable()){x.push(y)}}return x},"nth-child":function(A,B){var C=[],v=l.exec(B=="even"&&"2n"||B=="odd"&&"2n+1"||!f.test(B)&&"n+"+B||B),z=(v[1]||1)-0,x=v[2]-0,y,u,w;for(y=0;u=A[y];y++){w=y+1;if(z==1){if(x==0||w==x){C.push(u)}}else{if((w+x)%z==0){C.push(u)}}}return C}},query:function(u,B){if(!u){return Ext.ComponentManager.all.getArray()}var w=[],C=[],z={},y=this.cache.get(u),x,A,v;if(!y){y=this.cache.add(u,this.parse(u))}w=y.execute(B);if(y.isMultiMatch()){x=w.length;for(v=0;v<x;v++){A=w[v];if(!z[A.id]){C.push(A);z[A.id]=true}}w=C}return w},visitPreOrder:function(u,w,y,x,v){this._visit(true,u,w,y,x,v)},visitPostOrder:function(u,w,y,x,v){this._visit(false,u,w,y,x,v)},_visit:function(F,v,E,D,G,z){var C=this,B=C.cache.get(v),y=[E],u,A=0,x,w;if(!B){B=C.cache.add(v,C.parse(v))}w=B.is(E);if(E.getRefItems){u=E.getRefItems();A=u.length}if(z){Ext.Array.push(y,z)}if(F){if(w){if(D.apply(G||E,y)===false){return false}}}for(x=0;x<A;x++){if(C._visit.call(C,F,v,u[x],D,G,z)===false){return false}}if(!F){if(w){if(D.apply(G||E,y)===false){return false}}}},is:function(v,u){if(!u){return true}var w=this.cache.get(u);if(!w){w=this.cache.add(u,this.parse(u))}return w.is(v)},parse:function(v){var w=[],y,z,x,u;y=Ext.splitAndUnescape(v,",");for(x=0,u=y.length;x<u;x++){z=Ext.String.trim(y[x]);w.push(this._parse(z))}return new g.Query({operations:w})},_parse:function(A){var v=[],y=Ext.String.trim,w=c.length,F,B,z,G,H,I,x,C,D,u,E;while(A&&F!==A){F=A;B=A.match(r);if(B){G=B[1];z=y(B[2]).replace(m,"$1");if(G==="#"){v.push({method:j,args:[z]})}else{v.push({method:d,args:[z,Boolean(B[3])]})}A=A.replace(B[0],"").replace(n,"$1")}while(!(H=A.match(k))){for(C=0;A&&C<w;C++){D=c[C];I=A.match(D.re);u=D.method;x=D.argTransform;if(I){if(x){E=x(I)}else{E=I.slice(1)}v.push({method:Ext.isString(D.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[u].concat(I.slice(1)))):D.method,args:E});A=A.replace(I[0],"").replace(n,"$1");break}if(C===(w-1)){Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(H[1]){v.push({mode:H[2]||H[1]});A=A.replace(H[0],"").replace(n,"")}}return v}})}));(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",statics:{generateSetter:function(a){var h=a.names,b=a.name,f=h.internal,d=h.apply,c=h.changeEvent,g=h.doSet;return function(n){var m=this,l=m.$configPrefixed?f:b,o=m.initialized,k,j=m[d];if(j){n=j.call(m,n,m[l]);if(n===undefined){return m}}k=m[l];if(n!==k){if(o){m.fireAction(c,[m,n,k],m.doSet,m,{nameMap:h})}else{m[l]=n;if(m[g]){m[g](n,k)}}}return this}}},initialized:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=true},doSet:function(c,d,b,a){var f=a.nameMap;c[f.internal]=d;if(c[f.doSet]){c[f.doSet].call(this,d,b)}},onClassExtended:function(b,f){if(!f.hasOwnProperty("eventedConfig")){return}var d=f.config,h=f.eventedConfig,g="eventedSetter",c,a;if(d){Ext.applyIf(d,h)}else{b.addConfig(h)}for(c in h){if(h.hasOwnProperty(c)){a=Ext.Config.get(c);f[a.names.set]=a[g]||(a[g]=this.generateSetter(a))}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)(\?)?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(c,b){var a=this.getConstrainVector(b,c);if(a){c[0]+=a[0];c[1]+=a[1]}return c},alignTo:function(c,a,g,b){var f=this,d=f.el;return f.setXY(f.getAlignToXY(c,a,g),d.anim&&!!b?d.anim(b):false)},calculateAnchorXY:function(g,j,h,d){var k=this,c=k.el,l=document,f=(c.dom===l.body||c.dom===l),m=Math.round,n,b,a;g=(g||"tl").toLowerCase();d=d||{};b=d.width||(f?Ext.Element.getViewportWidth():k.getWidth());a=d.height||(f?Ext.Element.getViewportHeight():k.getHeight());switch(g){case"tl":n=[0,0];break;case"bl":n=[0,a];break;case"tr":n=[b,0];break;case"c":n=[m(b*0.5),m(a*0.5)];break;case"t":n=[m(b*0.5),0];break;case"l":n=[0,m(a*0.5)];break;case"r":n=[b,m(a*0.5)];break;case"b":n=[m(b*0.5),a];break;case"tc":n=[m(b*0.5),0];break;case"bc":n=[m(b*0.5),a];break;case"br":n=[b,a]}return[n[0]+j,n[1]+h]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(k,z,f){var A=this,d,w,a,h,s,g,t,u,q,r,v,p,o,b,c,j,m,n,l;k=Ext.get(k.el||k);if(!k||!k.dom){}f=f||[0,0];z=(!z||z=="?"?"tl-bl?":(!(/-/).test(z)&&z!==""?"tl-"+z:z||"tl-bl")).toLowerCase();z=A.convertPositionSpec(z);a=z.match(A._alignRe);p=a[1];o=a[2];v=!!a[3];h=A.getAnchorXY(p,true);s=A.getAnchorToXY(k,o,false);n=s[0]-h[0]+f[0];l=s[1]-h[1]+f[1];if(v){d=A.constrainTo||A.container||A.el.parent();d=Ext.get(d.el||d);w=d.getViewRegion();w.right=w.left+d.el.dom.clientWidth;g=A.getWidth();t=A.getHeight();u=k.getRegion();b=p.charAt(0);c=p.charAt(p.length-1);j=o.charAt(0);m=o.charAt(o.length-1);q=(n<u.right&&n+g>=u.left)&&((b=="t"&&j=="b")||(b=="b"&&j=="t"));r=(l<u.bottom&&l+t>=u.top)&&((c=="r"&&m=="l")||(c=="l"&&m=="r"));if(n+g>w.right){if(r){n=u.left-g;r=false}else{n=w.right-g}}if(n<w.left){n=r?u.right:w.left}if(l+t>w.bottom){if(q){l=u.top-t;q=false}else{l=w.bottom-t}}if(l<w.top){l=q?u.bottom:w.top}}return[n,l]},getAnchorXY:function(d,j,b){var h=this,k=h.getXY(),a=h.el,m=document,c=a.dom==m.body||a.dom==m,l=a.getScroll(),g=c?l.left:j?0:k[0],f=c?l.top:j?0:k[1];return h.calculateAnchorXY(d,g,f,b)},getBox:function(d,j){var f=this,n=j?f.getLocalXY():f.getXY(),k=n[0],g=n[1],l=f.getWidth(),b=f.getHeight(),c,a,m;if(d){c=f.getBorderPadding();a=c.beforeX;m=c.beforeY;k+=a;g+=m;l-=(a+c.afterX);b-=(m+c.afterY)}return{x:k,left:k,0:k,y:g,top:g,1:g,width:l,height:b,right:k+l,bottom:g+b}},calculateConstrainedPosition:function(h,b,m,d){var l=this,c,j=l.floatParent,f=j?j.getTargetEl():null,a,g,k,n=false;if(m&&j){a=f.getXY();g=f.getBorderPadding();a[0]+=g.beforeX;a[1]+=g.beforeY;if(b){k=[b[0]+a[0],b[1]+a[1]]}}else{k=b}h=h||l.constrainTo||f||l.container||l.el.parent();c=l.getConstrainVector(h,k,d);n=b||l.getPosition(m);if(c){n[0]+=c[0];n[1]+=c[1]}return n},getConstrainVector:function(h,c,f){var a=this.getRegion(),d=[0,0],b=(this.shadow&&this.constrainShadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,k=false,j,g=this.constraintInsets;if(!(h instanceof Ext.util.Region)){h=Ext.get(h.el||h);j=h.getViewSize();h=h.getViewRegion();h.right=h.left+j.width;h.bottom=h.top+j.height}if(g){g=Ext.isObject(g)?g:Ext.Element.parseBox(g);h.adjust(g.top,g.right,g.bottom,g.length)}if(c){a.translateBy(c[0]-a.x,c[1]-a.y)}if(f){a.right=a.left+f[0];a.bottom=a.top+f[1]}if(b){h.adjust(b[0],-b[1],-b[2],b[3])}if(a.right>h.right){k=true;d[0]=(h.right-a.right)}if(a.left+d[0]<h.left){k=true;d[0]=(h.left-a.left)}if(a.bottom>h.bottom){k=true;d[1]=(h.bottom-a.bottom)}if(a.top+d[1]<h.top){k=true;d[1]=(h.top-a.top)}return k?d:false},getOffsetsTo:function(a){var c=this.getXY(),b=Ext.fly(a.el||a).getXY();return[c[0]-b[0],c[1]-b[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getViewRegion:function(){var g=this,c=g.el,a=c.dom.nodeName==="BODY",f,k,h,j,d,b,l;if(a){k=c.getScroll();d=k.left;j=k.top;b=Ext.Element.getViewportWidth();l=Ext.Element.getViewportHeight()}else{f=g.getBorderPadding();h=g.getXY();d=h[0]+f.beforeX;j=h[1]+f.beforeY;b=g.getWidth(true);l=g.getHeight(true)}return new Ext.util.Region(j,d+b,j+l,d)},move:function(k,b,c){var g=this,n=g.getXY(),l=n[0],j=n[1],d=[l-b,j],m=[l+b,j],h=[l,j-b],a=[l,j+b],f={l:d,left:d,r:m,right:m,t:h,top:h,up:h,b:a,bottom:a,down:a};k=k.toLowerCase();g.setXY([f[k][0],f[k][1]],c)},setBox:function(c){var b=this,a,d;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}b.constrainBox(c);a=c.x;d=c.y;b.setSize(c.width,c.height);b.setXY([a,d]);b.afterSetPosition(a,d);return b},constrainBox:function(d){var c=this,b,a,f;if(c.constrain||c.constrainHeader){a=("x" in d)?d.x:d.left;f=("y" in d)?d.y:d.top;b=c.calculateConstrainedPosition(null,[a,f],false,[d.width,d.height]);if(b){d.x=b[0];d.y=b[1]}}},translatePoints:function(a,c){var b=this.translateXY(a,c);return{left:b.x,top:b.y}},translateXY:function(h,f){var d=this,b=d.el,j=b.getStyle(d._positionTopLeft),a=j.position==="relative",c=parseFloat(j.left),g=parseFloat(j.top),k=d.getXY();if(Ext.isArray(h)){f=h[1];h=h[0]}if(isNaN(c)){c=a?0:b.dom.offsetLeft}if(isNaN(g)){g=a?0:b.dom.offsetTop}c=(typeof h==="number")?h-k[0]+c:undefined;g=(typeof f==="number")?f-k[1]+g:undefined;return{x:c,y:g}}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(h,f,b,a,k,l){var g=this,j=!Ext.isEmpty(k),c=function(){g.alignTo(h,f,b,a);Ext.callback(l,g)},d=g.getAnchor();g.removeAnchor();Ext.apply(d,{fn:c,scroll:j});Ext.on("resize",c,null);if(j){Ext.getWin().on("scroll",c,null,{buffer:!isNaN(k)?k:50})}c();return g},getAnchor:function(){var b=this.el,c,a;if(!b.dom){return}c=b.getData();a=c._anchor;if(!a){a=c._anchor={}}return a},removeAnchor:function(){var a=this.getAnchor();if(a&&a.fn){Ext.un("resize",a.fn);if(a.scroll){Ext.getWin().on("scroll",a.fn)}delete a.fn}return this},setBox:function(c,a){var b=this;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}if(a){b.constrainBox(c);b.animate(Ext.applyIf({to:c,listeners:{afteranimate:Ext.Function.bind(b.afterSetPosition,b,[c.x,c.y])}},a))}else{arguments.callee.$previous.call(this,c)}return b}});(Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(n){var s=window,J=document,V="ext-window",E="ext-document",f="width",H="height",S="min-width",c="min-height",o="max-width",y="max-height",K="top",W="right",F="bottom",B="left",h="visibility",T="hidden",b="display",L="none",l="z-index",N="position",q="relative",r="static",w="-",u=/\w/g,D=/\s+/,U=/[\s]+/,a=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,C=/table-row|table-.*-group/,t={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},R={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},k={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},A=[R.l,R.r,R.t,R.b],d=[t.l,t.r,t.t,t.b],Q=/\d+$/,g=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,I="px",G=/(-[a-z])/gi,X=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,p=/^\d+(?:\.\d*)?px$/i,v={},M=function(Y,Z){return Z.charAt(1).toUpperCase()},z="x-hidden-visibility",x="x-hidden-display",j="x-hidden-offsets",P="x-no-touch-scroll",m={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},O;return{alternateClassName:"Ext.Element",observableType:"element",isElement:true,skipGarbageCollection:true,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,listenerOptionsRegex:/^(?:scope|order|delegate|delegated|single|delay|buffer|args|prepend|capture|destroyable|translate)$/,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(aa,Y){var Z=this,ab;if(typeof aa==="string"){aa=J.getElementById(aa)}if(!aa){return null}Z.dom=aa;ab=aa.id;if(ab){Z.id=ab}else{ab=aa.id=Z.getUniqueId()}Z.el=Z;if(!Y){Ext.cache[ab]=Z}Z.mixins.observable.constructor.call(Z)},inheritableStatics:{cache:Ext.cache={},VISIBILITY:1,DISPLAY:2,OFFSETS:3,unitRe:g,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(Z,Y){if(typeof Z==="number"){return Z+(Y||I)}if(Z===""||Z==="auto"||Z==null){return Z||""}if(Q.test(Z)){return Z+(Y||I)}if(!g.test(Z)){return Z||""}return Z},create:function(aa,Z){var ag=this,ad=m.hidden,ac,ah,aj,ai,Y,ab,af,ae;if(!aa){aa={}}if(aa.isElement){return Z?aa.dom:aa}else{if("nodeType" in aa){return Z?aa:Ext.get(aa)}}if(typeof aa==="string"){return J.createTextNode(aa)}aj=aa.tag;if(!aj){aj="div"}if(aa.namespace){ac=J.createElementNS(aa.namespace,aj)}else{ac=J.createElement(aj)}ah=ac.style;if(aa[ad]){ae=aa.className;ae=(ae==null)?"":ae+" ";aa.className=ae+x;delete aa[ad]}for(Y in aa){if(Y!=="tag"){ai=aa[Y];switch(Y){case m.style:if(typeof ai==="string"){ac.setAttribute(Y,ai)}else{for(ab in ai){if(ai.hasOwnProperty(ab)){ah[ab]=ai[ab]}}}break;case m.className:case m.cls:ac.className=ai;break;case m.classList:ac.className=ai.join(" ");break;case m.text:ac.textContent=ai;break;case m.html:ac.innerHTML=ai;break;case m.children:for(ab=0,af=ai.length;ab<af;ab++){ac.appendChild(ag.create(ai[ab],true))}break;default:if(ai!=null){ac.setAttribute(Y,ai)}}}}if(Z){return ac}else{return ag.get(ac)}},detach:function(){var Y=this.dom;if(Y&&Y.parentNode&&Y.tagName!=="BODY"){Y.parentNode.removeChild(Y)}return this},fly:function(Z,Y){return Ext.fly(Z,Y)},fromPoint:function(Y,Z){return Ext.get(J.elementFromPoint(Y,Z))},get:function(ab){var ag=this,Y=Ext.cache,ad,ac,Z,ah,ae,aa,af;if(!ab){return null}if(ab.isFly){ab=ab.dom;ae=ab._extData}if(typeof ab==="string"){Z=ab;if(Y.hasOwnProperty(Z)){ah=Y[Z];if(ah.skipGarbageCollection||!Ext.isGarbage(ah.dom)){return ah}else{ah.destroy()}}if(Z===V){return n.get(s)}else{if(Z===E){return n.get(J)}}ac=Ext.getElementById?Ext.getElementById(Z):J.getElementById(Z);if(ac){return new n(ac)}}if(ab===J){if(!ag.docEl){J.id=E;ag.docEl=new n(J,true)}return ag.docEl}else{if(ab==s){if(!ag.winEl){s.id=V;ag.winEl=new n(s,true)}return ag.winEl}}ad=ab.nodeType;if(ag.validNodeTypes[ad]||(!ad&&(ab.window===ab))){Z=ab.id;if(Y.hasOwnProperty(Z)){ah=Y[Z];if(ah.skipGarbageCollection||ab===ah.dom||!Ext.isGarbage(ah.dom)){return ah}else{ah.destroy()}}return new n(ab)}if(ab.isElement){return ab}if(ab.isComposite){return ab}if(Ext.isIterable(ab)){return ag.select(ab)}return null},getActiveElement:function(){var Y=J.activeElement;if(!Y||!Y.focus){Y=J.body}return Y},getDocumentHeight:function(){return Math.max(!Ext.isStrict?J.body.scrollHeight:J.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?J.body.scrollWidth:J.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(s.orientation==0)?"portrait":"landscape"}return(s.innerHeight>s.innerWidth)?"portrait":"landscape"},getViewportHeight:function(){return s.innerHeight},getViewportWidth:function(){return s.innerWidth},getViewSize:function(){return{width:n.getViewportWidth(),height:n.getViewportHeight()}},normalize:function(Y){return v[Y]||(v[Y]=Y.replace(G,M))},parseBox:function(aa){aa=aa||0;var Y=typeof aa,ab,Z;if(Y==="number"){return{top:aa,right:aa,bottom:aa,left:aa}}else{if(Y!=="string"){return aa}}ab=aa.split(" ");Z=ab.length;if(Z===1){ab[1]=ab[2]=ab[3]=ab[0]}else{if(Z===2){ab[2]=ab[0];ab[3]=ab[1]}else{if(Z===3){ab[3]=ab[1]}}}return{top:parseFloat(ab[0])||0,right:parseFloat(ab[1])||0,bottom:parseFloat(ab[2])||0,left:parseFloat(ab[3])||0}},parseStyles:function(Z){var Y={},aa;if(Z){X.lastIndex=0;while((aa=X.exec(Z))){Y[aa[1]]=aa[2]||""}}return Y},select:function(Y,aa,Z){return Ext.fly(Z||J).select(Y,aa)},query:function(Z,Y,aa){return Ext.fly(aa||J).query(Z,Y)},unitizeBox:function(aa,Y){var Z=this;aa=Z.parseBox(aa);return Z.addUnits(aa.top,Y)+" "+Z.addUnits(aa.right,Y)+" "+Z.addUnits(aa.bottom,Y)+" "+Z.addUnits(aa.left,Y)},serializeForm:function(aa){var ab=aa.elements||(J.forms[aa]||Ext.getDom(aa)).elements,ak=false,aj=encodeURIComponent,ae="",ad=ab.length,af,Y,ai,am,al,ag,ac,ah,Z;for(ag=0;ag<ad;ag++){af=ab[ag];Y=af.name;ai=af.type;am=af.options;if(!af.disabled&&Y){if(/select-(one|multiple)/i.test(ai)){ah=am.length;for(ac=0;ac<ah;ac++){Z=am[ac];if(Z.selected){al=Z.hasAttribute("value");ae+=Ext.String.format("{0}={1}&",aj(Y),aj(al?Z.value:Z.text))}}}else{if(!(/file|undefined|reset|button/i.test(ai))){if(!(/radio|checkbox/i.test(ai)&&!af.checked)&&!(ai=="submit"&&ak)){ae+=aj(Y)+"="+aj(af.value)+"&";ak=/submit/i.test(ai)}}}}}return ae.substr(0,ae.length-1)}},addCls:function(ag,ae,ai){var ah=this,aj,ac,Z,aa,ad,af,Y,ab=ah.getData();if(!ag){return ah}if(!ab.isSynchronized){ah.synchronize()}ac=ah.dom;Z=ab.classMap;aa=ab.classList;ae=ae?ae+w:"";ai=ai?w+ai:"";if(typeof ag==="string"){ag=ag.split(D)}for(ad=0,af=ag.length;ad<af;ad++){Y=ae+ag[ad]+ai;if(!Z[Y]){Z[Y]=true;aa.push(Y);aj=true}}if(aj){ac.className=aa.join(" ")}return ah},addStyles:function(af,ae){var aa=0,ad=(af||"").match(u),ac,Y=ad.length,ab,Z=[];if(Y===1){aa=Math.abs(parseFloat(this.getStyle(ae[ad[0]]))||0)}else{if(Y){for(ac=0;ac<Y;ac++){ab=ad[ac];Z.push(ae[ab])}Z=this.getStyle(Z);for(ac=0;ac<Y;ac++){ab=ad[ac];aa+=parseFloat(Z[ae[ab]])||0}}}return aa},addUnits:function(Z,Y){return n.addUnits(Z,Y)},adjustDirect2DDimension:function(aa){var af=this,Z=af.dom,ad=af.getStyle("display"),ac=Z.style.display,ag=Z.style.position,ae=aa===f?0:1,Y=Z.currentStyle,ab;if(ad==="inline"){Z.style.display="inline-block"}Z.style.position=ad.match(C)?"absolute":"static";ab=(parseFloat(Y[aa])||parseFloat(Y.msTransformOrigin.split(" ")[ae])*2)%1;Z.style.position=ag;if(ad==="inline"){Z.style.display=ac}return ab},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(aa,Z){var ab=this,ad,Y,ac;if(aa.nodeType||aa.dom||typeof aa==="string"){aa=Ext.getDom(aa);ab.dom.appendChild(aa);return !Z?Ext.get(aa):aa}else{if(aa.length){ad=Ext.fly(document.createDocumentFragment());Y=aa.length;for(ac=0;ac<Y;ac++){ad.appendChild(aa[ac],Z)}ab.dom.appendChild(ad.dom);return Z?ad.dom:ad}else{return ab.createChild(aa,null,Z)}}},appendTo:function(Y){Ext.getDom(Y).appendChild(this.dom);return this},applyStyles:function(Y){if(Y){if(typeof Y==="function"){Y=Y.call()}if(typeof Y==="string"){Y=n.parseStyles(Y)}if(typeof Y==="object"){this.setStyle(Y)}}return this},blur:function(){var Y=this,aa=Y.dom;if(aa!==J.body){try{aa.blur()}catch(Z){}return Y}else{return Y.focus(undefined,aa)}},center:function(Y){return this.alignTo(Y||J,"c-c")},child:function(Y,Z){var aa=this,ab=Ext.get(aa).id;return aa.selectNode(Ext.makeIdSelector(ab)+" > "+Y,!!Z)},createChild:function(Z,Y,aa){Z=Z||{tag:"div"};if(Y){return Ext.DomHelper.insertBefore(Y,Z,aa!==true)}else{return Ext.DomHelper.append(this.dom,Z,aa!==true)}},createShim:function(){var Y=J.createElement("iframe"),Z;Y.frameBorder="0";Y.className="x-shim";Y.src=Ext.SSL_SECURE_URL;Y.setAttribute("role","presentation");Y.setAttribute("tabindex",-1);Z=Ext.get(this.dom.parentNode.insertBefore(Y,this.dom));return Z},contains:function(Y){if(!Y){return false}var Z=this,aa=Ext.getDom(Y);return(aa===Z.dom)||Z.isAncestor(aa)},destroy:function(){var Y=this,Z=Y.dom;if(!Y.isFly){Y.clearListeners();delete Ext.cache[Y.id];Y.isDestroyed=true}if(Z){if(Z.parentNode){Z.parentNode.removeChild(Z)}Z._extData=Y.dom=null}},detach:function(){var Y=this.dom;if(Y&&Y.parentNode&&Y.tagName!=="BODY"){Y.parentNode.removeChild(Y)}return this},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(Y){Y.preventDefault()},destroyable:true,delegated:false})},disableTouchScroll:function(){this.addCls(P);this.on({touchmove:function(Y){Y.preventDefault()},translate:false})},doAddListener:function(ab,ae,af,ag){var ad=this,Y,Z,aa,ac;if(!ad.blockedEvents[ab]){Z=ad.mixins.observable.doAddListener;ag=ag||{};if(ad.longpressEvents[ab]){ad.disableTouchContextMenu()}if(ad.normalizeEvent){Y=ad.normalizeEvent(ab);if(Y){ab=Y.eventName;ag.beforeFn=Y.normalizeFn}}if(n.useDelegatedEvents===false){ag.delegated=ag.delegated||false}if(ag.translate!==false){aa=ad.additiveEvents[ab];if(aa){ag.type=ab;ab=aa;Z.apply(ad,arguments)}ac=ad.eventMap[ab];if(ac){ag.type=ag.type||ab;ab=ac}}Z.apply(ad,arguments);delete ag.type}return ad},doRemoveListener:function(ab,ae,af,ag){var ad=this,Y,Z,aa,ac;if(!ad.blockedEvents[ab]){Z=ad.mixins.observable.doRemoveListener;ag=ag||{};if(ad.longpressEvents[ab]){ac=this._contextMenuListenerRemover;if(ac){ac.destroy()}}if(ad.normalizeEvent){Y=ad.normalizeEvent(ab);if(Y){ab=Y.eventName}}if(n.useDelegatedEvents===false){ag.delegated=ag.delegated||false}if(ag.translate!==false){aa=ad.additiveEvents[ab];if(aa){ab=aa;Z.apply(ad,arguments)}ab=ad.eventMap[ab]||ab}Z.apply(ad,arguments)}return ad},doReplaceWith:function(Y){var Z=this.dom;Z.parentNode.replaceChild(Ext.getDom(Y),Z)},down:function(Y,Z){return this.selectNode(Y,!!Z)},findParent:function(ae,Z,Y){var ab=this,ac=ab.dom,aa=J.documentElement,ad=0;Z=Z||50;if(isNaN(Z)){Z=Number.MAX_VALUE}while(ac&&ac.nodeType===1&&ad<Z&&ac!==aa){if(Ext.fly(ac).is(ae)){return Y?Ext.get(ac):ac}ad++;ac=ac.parentNode}return null},findParentNode:function(ab,Z,Y){var aa=Ext.fly(this.dom.parentNode);return aa?aa.findParent(ab,Z,Y):null},first:function(Y,Z){return this.matchNode("nextSibling","firstChild",Y,Z)},focus:function(ab,aa){var Y=this;aa=aa||Y.dom;try{if(Number(ab)){Ext.defer(Y.focus,ab,Y,[null,aa])}else{Ext.GlobalEvents.fireEvent("beforefocus",aa);aa.focus()}}catch(Z){}return Y},getAnchorToXY:function(ab,Y,aa,Z){return ab.getAnchorXY(Y,aa,Z)},getAttribute:function(Y,Z){var aa=this.dom;return Z?(aa.getAttributeNS(Z,Y)||aa.getAttribute(Z+":"+Y)):(aa.getAttribute(Y)||aa[Y]||null)},getBottom:function(Y){return(Y?this.getLocalY():this.getY())+this.getHeight()},getById:function(aa,Y){var Z=J.getElementById(aa)||this.dom.querySelector(Ext.makeIdSelector(aa));return Y?Z:(Z?Ext.get(Z):null)},getBorderPadding:function(){var Y=this.getStyle(A),Z=this.getStyle(d);return{beforeX:(parseFloat(Z[t.l])||0)+(parseFloat(Y[R.l])||0),afterX:(parseFloat(Z[t.r])||0)+(parseFloat(Y[R.r])||0),beforeY:(parseFloat(Z[t.t])||0)+(parseFloat(Y[R.t])||0),afterY:(parseFloat(Z[t.b])||0)+(parseFloat(Y[R.b])||0)}},getBorderWidth:function(Y){return this.addStyles(Y,t)},getData:function(){var Y=this.dom;return(Y._extData||(Y._extData={}))},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(ab,Z){var aa=this,ac=aa.isStyle("display","none"),Y,ad;if(ac){return 0}Y=aa.dom.offsetHeight;if(Ext.supports.Direct2DBug){ad=aa.adjustDirect2DDimension(H);if(Z){Y+=ad}else{if(ad>0&&ad<0.5){Y++}}}if(ab){Y-=aa.getBorderWidth("tb")+aa.getPadding("tb")}return(Y<0)?0:Y},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(Y){return Y?this.getLocalX():this.getX()},getLocalX:function(){var aa=this,Z,Y=aa.getStyle("left");if(!Y||Y==="auto"){Y=0}else{if(p.test(Y)){Y=parseFloat(Y)}else{Y=aa.getX();Z=aa.dom.offsetParent;if(Z){Y-=Ext.fly(Z).getX()}}}return Y},getLocalXY:function(){var ab=this,aa,Z=ab.getStyle(["left","top"]),Y=Z.left,ac=Z.top;if(!Y||Y==="auto"){Y=0}else{if(p.test(Y)){Y=parseFloat(Y)}else{Y=ab.getX();aa=ab.dom.offsetParent;if(aa){Y-=Ext.fly(aa).getX()}}}if(!ac||ac==="auto"){ac=0}else{if(p.test(ac)){ac=parseFloat(ac)}else{ac=ab.getY();aa=ab.dom.offsetParent;if(aa){ac-=Ext.fly(aa).getY()}}}return[Y,ac]},getLocalY:function(){var Z=this,Y,aa=Z.getStyle("top");if(!aa||aa==="auto"){aa=0}else{if(p.test(aa)){aa=parseFloat(aa)}else{aa=Z.getY();Y=Z.dom.offsetParent;if(Y){aa-=Ext.fly(Y).getY()}}}return aa},getMargin:function(aa){var ab=this,ac={t:"top",l:"left",r:"right",b:"bottom"},Z,ad,Y;if(!aa){Y=[];for(Z in k){Y.push(k[Z])}ad=ab.getStyle(k);if(ad&&typeof ad==="object"){for(Z in k){ad[ac[Z]]=parseFloat(ad[k[Z]])||0}}return ad}else{return ab.addStyles(aa,k)}},getPadding:function(Y){return this.addStyles(Y,R)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(Y){return(Y?this.getLocalX():this.getX())+this.getWidth()},getSize:function(Y){return{width:this.getWidth(Y),height:this.getHeight(Y)}},getStyle:function(ak,af){var ag=this,ab=ag.dom,an=typeof ak!=="string",al=ag.styleHooks,Z=ak,ah=Z,ae=1,ad,am,aj,ai,aa,Y,ac;if(an){aj={};Z=ah[0];ac=0;if(!(ae=ah.length)){return aj}}if(!ab||ab.documentElement){return aj||""}ad=ab.style;if(af){Y=ad}else{Y=ab.ownerDocument.defaultView.getComputedStyle(ab,null);if(!Y){af=true;Y=ad}}do{ai=al[Z];if(!ai){al[Z]=ai={name:n.normalize(Z)}}if(ai.get){aa=ai.get(ab,ag,af,Y)}else{am=ai.name;aa=Y[am]}if(!an){return aa}aj[Z]=aa;Z=ah[++ac]}while(ac<ae);return aj},getStyleValue:function(Y){return this.dom.style.getPropertyValue(Y)},getTop:function(Y){return Y?this.getLocalY():this.getY()},getValue:function(Z){var Y=this.dom.value;return Z?parseInt(Y,10):Y},getViewSize:function(){var Y=this.dom;if(Y===J||Y===J.body){return{width:n.getViewportWidth(),height:n.getViewportHeight()}}else{return{width:Y.clientWidth,height:Y.clientHeight}}},getVisibilityMode:function(){var Y=this,Z=Y.getData(),aa=Z.visibilityMode;if(aa===undefined){Z.visibilityMode=aa=n.DISPLAY}return aa},getWidth:function(Y,ad){var ab=this,ae=ab.dom,ac=ab.isStyle("display","none"),aa,Z,af;if(ac){return 0}if(Ext.supports.BoundingClientRect){aa=ae.getBoundingClientRect();Z=(ab.vertical&&!Ext.supports.RotatedBoundingClientRect)?(aa.bottom-aa.top):(aa.right-aa.left);Z=ad?Z:Math.ceil(Z)}else{Z=ae.offsetWidth}if(Ext.supports.Direct2DBug&&!ab.vertical){af=ab.adjustDirect2DDimension(f);if(ad){Z+=af}else{if(af>0&&af<0.5){Z++}}}if(Y){Z-=ab.getBorderWidth("lr")+ab.getPadding("lr")}return(Z<0)?0:Z},getX:function(){return this.getXY()[0]},getXY:function(){var Z=Math.round,ac=this.dom,Y=0,ad=0,ab;if(ac!==J&&ac!==J.body){try{ab=ac.getBoundingClientRect()}catch(aa){ab={left:0,top:0}}Y=Z(ab.left);ad=Z(ab.top)}return[Y,ad]},getY:function(){return this.getXY()[1]},hasCls:function(Y){var Z=this.getData();if(!Z.isSynchronized){this.synchronize()}return Z.classMap.hasOwnProperty(Y)},hide:function(){this.setVisible(false);return this},insertAfter:function(Y){Y=Ext.getDom(Y);Y.parentNode.insertBefore(this.dom,Y.nextSibling);return this},insertBefore:function(Y){Y=Ext.getDom(Y);Y.parentNode.insertBefore(this.dom,Y);return this},insertFirst:function(Z,Y){Z=Z||{};if(Z.nodeType||Z.dom||typeof Z==="string"){Z=Ext.getDom(Z);this.dom.insertBefore(Z,this.dom.firstChild);return !Y?Ext.get(Z):Z}else{return this.createChild(Z,this.dom.firstChild,Y)}},insertHtml:function(Z,aa,Y){var ab=Ext.DomHelper.insertHtml(Z,this.dom,aa);return Y?Ext.get(ab):ab},insertSibling:function(Z,ac,af){var ae=this,ag=Ext.DomHelper,ah=(ac||"before").toLowerCase()==="after",ab,Y,aa,ad;if(Ext.isIterable(Z)){aa=Z.length;Y=Ext.fly(document.createDocumentFragment());if(Ext.isArray(Z)){for(ad=0;ad<aa;ad++){ab=Y.appendChild(Z[ad],af)}}else{for(ad=0;ad<aa;ad++){Y.dom.appendChild(ab=Z[0])}if(af===false){ab=Ext.get(ab)}}ae.dom.parentNode.insertBefore(Y.dom,ah?ae.dom.nextSibling:ae.dom);return ab}Z=Z||{};if(Z.nodeType||Z.dom){ab=ae.dom.parentNode.insertBefore(Ext.getDom(Z),ah?ae.dom.nextSibling:ae.dom);if(!af){ab=Ext.get(ab)}}else{if(ah&&!ae.dom.nextSibling){ab=ag.append(ae.dom.parentNode,Z,!af)}else{ab=ag[ah?"insertAfter":"insertBefore"](ae.dom,Z,!af)}}return ab},is:function(Y){var aa=this.dom,Z;if(!Y){Z=true}else{if(!aa.tagName){Z=false}else{if(Ext.isFunction(Y)){Z=Y(aa)}else{Z=aa[Ext.supports.matchesSelector](Y)}}}return Z},isAncestor:function(Z){var Y=false,aa=this.dom,ab=Ext.getDom(Z);if(aa&&ab){if(aa.contains){return aa.contains(ab)}else{if(aa.compareDocumentPosition){return !!(aa.compareDocumentPosition(ab)&16)}else{while((ab=ab.parentNode)){Y=ab===aa||Y}}}}return Y},isPainted:(function(){return !Ext.browser.is.IE?function(){var Y=this.dom;return Boolean(Y&&Y.offsetParent)}:function(){var Y=this.dom;return Boolean(Y&&(Y.offsetHeight!==0&&Y.offsetWidth!==0))}})(),isStyle:function(Y,Z){return this.getStyle(Y)===Z},isVisible:function(Z){var aa=this.dom,Y;if(!aa){return false}if(!O){O=new Ext.dom.Fly()}for(Y=aa.ownerDocument.documentElement;aa!==Y;aa=aa.parentNode){if(!aa||aa.nodeType===11||(O.attach(aa)).isStyle(h,T)||O.isStyle(b,L)){return false}if(!Z){break}}return true},last:function(Y,Z){return this.matchNode("previousSibling","lastChild",Y,Z)},matchNode:function(Z,ad,Y,aa){var ab=this.dom,ac;if(!ab){return null}ac=ab[ad];while(ac){if(ac.nodeType===1&&(!Y||Ext.fly(ac,"_matchNode").is(Y))){return !aa?Ext.get(ac):ac}ac=ac[Z]}return null},next:function(Y,Z){return this.matchNode("nextSibling","nextSibling",Y,Z)},parent:function(Y,Z){return this.matchNode("parentNode","parentNode",Y,Z)},position:function(ac,ab,Y,aa){var Z=this;if(!ac&&Z.isStyle(N,r)){Z.setStyle(N,q)}else{if(ac){Z.setStyle(N,ac)}}if(ab){Z.setStyle(l,ab)}if(Y||aa){Z.setXY([Y||false,aa||false])}},prev:function(Y,Z){return this.matchNode("previousSibling","previousSibling",Y,Z)},query:function(aa,ai,ag){var ac=this.dom,ae,af,ah,Z,Y,ad,ab;if(!ac){return null}ai=(ai!==false);aa=aa.split(",");if(!ag){ae=[]}for(ad=0,af=aa.length;ad<af;ad++){if(typeof aa[ad]==="string"){if(ag){Z=ac.querySelector(aa[ad]);return ai?Z:Ext.get(Z)}Y=ac.querySelectorAll(aa[ad]);for(ab=0,ah=Y.length;ab<ah;ab++){ae.push(ai?Y[ab]:Ext.get(Y[ab]))}}}return ae},radioCls:function(ab){var ac=this.dom.parentNode.childNodes,Z;ab=Ext.isArray(ab)?ab:[ab];for(var aa=0,Y=ac.length;aa<Y;aa++){Z=ac[aa];if(Z&&Z.nodeType===1){Ext.fly(Z).removeCls(ab)}}return this.addCls(ab)},redraw:function(){var Z=this.dom,Y=Z.style;Y.display="none";Z.offsetHeight;Y.display=""},remove:function(){this.destroy()},removeChild:function(Y){this.dom.removeChild(Ext.getDom(Y));return this},removeCls:function(ag,ae,ai){var ah=this,aj,ac,Z,aa,ad,af,Y,ab=ah.getData();if(!ag){return ah}if(!ab.isSynchronized){ah.synchronize()}if(!ai){ai=""}ac=ah.dom;Z=ab.classMap;aa=ab.classList;ae=ae?ae+w:"";ai=ai?w+ai:"";if(typeof ag==="string"){ag=ag.split(D)}for(ad=0,af=ag.length;ad<af;ad++){Y=ae+ag[ad]+ai;if(Z[Y]){delete Z[Y];Ext.Array.remove(aa,Y);aj=true}}if(aj){ac.className=aa.join(" ")}return ah},repaint:function(){var Y=this;Y.addCls("x-repaint");Ext.defer(function(){if(Y.dom){Ext.fly(Y.dom).removeCls("x-repaint")}},1);return Y},replace:function(aa,Z){aa=Ext.getDom(aa);var Y=aa.parentNode,ac=aa.id,ab=this.dom;if(Z!==false&&ac&&Ext.cache[ac]){Y.insertBefore(ab,aa);Ext.get(aa).destroy()}else{Y.replaceChild(ab,aa)}return this},replaceCls:function(aa,ah,af,aj){var ai=this,ad,Z,ab,ae,ag,Y,ac=ai.getData();if(!aa&&!ah){return ai}aa=aa||[];ah=ah||[];if(!ac.isSynchronized){ai.synchronize()}if(!aj){aj=""}ad=ai.dom;Z=ac.classMap;ab=ac.classList;af=af?af+w:"";aj=aj?w+aj:"";if(typeof aa==="string"){aa=aa.split(D)}if(typeof ah==="string"){ah=ah.split(D)}for(ae=0,ag=aa.length;ae<ag;ae++){Y=af+aa[ae]+aj;if(Z[Y]){delete Z[Y];Ext.Array.remove(ab,Y)}}for(ae=0,ag=ah.length;ae<ag;ae++){Y=af+ah[ae]+aj;if(!Z[Y]){Z[Y]=true;ab.push(Y)}}ad.className=ab.join(" ");return ai},replaceWith:function(ab){var ac=this,ad=ac.dom,aa=ad.parentNode,Y=Ext.cache,Z;ac.clearListeners();if(ab.nodeType||ab.dom||typeof ab==="string"){ab=Ext.get(ab);Z=aa.insertBefore(ab.dom,ad)}else{Z=Ext.DomHelper.insertBefore(ad,ab)}aa.removeChild(ad);ac.dom=Z;if(!ac.isFly){delete Y[ac.id];Y[ac.id=Ext.id(Z)]=ac}return ac},resolveListenerScope:function(Z){var Y=this.component;return Y?Y.resolveListenerScope(Z):this},select:function(Z,ab){var Y,aa;if(typeof Z==="string"){aa=this.query(Z,!ab)}else{aa=Z;Y=true}return ab?new Ext.CompositeElement(aa,!Y):new Ext.CompositeElementLite(aa,true)},selectNode:function(Z,Y){return this.query(Z,Y,true)},set:function(Y,Z){var ab=this,ad=ab.dom,aa,ac;for(aa in Y){if(Y.hasOwnProperty(aa)){ac=Y[aa];if(aa==="style"){ab.applyStyles(ac)}else{if(aa==="cls"){ad.className=ac}else{if(Z!==false){if(ac===undefined){ad.removeAttribute(aa)}else{ad.setAttribute(aa,ac)}}else{ad[aa]=ac}}}}}return ab},setBottom:function(Y){this.dom.style[F]=n.addUnits(Y);return this},setBorder:function(Y){var aa=this,Z=aa.dom.style;if(Y||Y===0){Y=aa.self.unitizeBox((Y===true)?1:Y);Z.setProperty("border-width",Y,"important")}else{Z.removeProperty("border-top-width");Z.removeProperty("border-right-width");Z.removeProperty("border-bottom-width");Z.removeProperty("border-left-width")}},setCls:function(ab){var ad=this,aa=ad.getData(),ae=aa.classMap,Z,ac,Y;if(typeof ab==="string"){ab=ab.split(D)}for(Z=0,ac=ab.length;Z<ac;Z++){Y=ab[Z];if(!ae[Y]){ae[Y]=true}}aa.classList=ab.slice();ad.dom.className=ab.join(" ")},setHeight:function(Y){this.dom.style[H]=n.addUnits(Y);return this},setHtml:function(Y){if(this.dom){this.dom.innerHTML=Y}},setId:function(ab){var aa=this,Y=aa.id,Z=Ext.cache;if(Y){delete Z[Y]}aa.dom.id=ab;aa.id=ab;Z[ab]=aa;return aa},setLeft:function(Y){this.dom.style[B]=n.addUnits(Y);return this},setLocalX:function(Y){var Z=this.dom.style;Z.right="auto";Z.left=(Y===null)?"auto":Y+"px"},setLocalXY:function(Y,aa){var Z=this.dom.style;Z.right="auto";if(Y&&Y.length){aa=Y[1];Y=Y[0]}if(Y===null){Z.left="auto"}else{if(Y!==undefined){Z.left=Y+"px"}}if(aa===null){Z.top="auto"}else{if(aa!==undefined){Z.top=aa+"px"}}},setLocalY:function(Y){this.dom.style.top=(Y===null)?"auto":Y+"px"},setMargin:function(aa){var Z=this,Y=Z.dom.style;if(aa||aa===0){aa=Z.self.unitizeBox((aa===true)?5:aa);Y.setProperty("margin",aa,"important")}else{Y.removeProperty("margin-top");Y.removeProperty("margin-right");Y.removeProperty("margin-bottom");Y.removeProperty("margin-left")}},setMaxHeight:function(Y){this.dom.style[y]=n.addUnits(Y);return this},setMaxWidth:function(Y){this.dom.style[o]=n.addUnits(Y);return this},setMinHeight:function(Y){this.dom.style[c]=n.addUnits(Y);return this},setMinWidth:function(Y){this.dom.style[S]=n.addUnits(Y);return this},setPadding:function(aa){var Z=this,Y=Z.dom.style;if(aa||aa===0){aa=Z.self.unitizeBox((aa===true)?5:aa);Y.setProperty("padding",aa,"important")}else{Y.removeProperty("padding-top");Y.removeProperty("padding-right");Y.removeProperty("padding-bottom");Y.removeProperty("padding-left")}},setRight:function(Y){this.dom.style[W]=n.addUnits(Y);return this},setSize:function(aa,Y){var ab=this,Z=ab.dom.style;if(Ext.isObject(aa)){Y=aa.height;aa=aa.width}Z.width=n.addUnits(aa);Z.height=n.addUnits(Y);return ab},setSizeState:function(ac){var ab=this,aa=["x-sized","x-unsized","x-stretched"],Y=[true,false,null],Z=Y.indexOf(ac),ad;if(Z!==-1){ad=aa[Z];aa.splice(Z,1);ab.addCls(ad)}ab.removeCls(aa);return ab},setStyle:function(af,ad){var ab=this,ae=ab.dom,Y=ab.styleHooks,aa=ae.style,Z=af,ac;if(typeof Z==="string"){ac=Y[Z];if(!ac){Y[Z]=ac={name:n.normalize(Z)}}ad=(ad==null)?"":ad;if(ac.set){ac.set(ae,ad,ab)}else{aa[ac.name]=ad}if(ac.afterSet){ac.afterSet(ae,ad,ab)}}else{for(Z in af){if(af.hasOwnProperty(Z)){ac=Y[Z];if(!ac){Y[Z]=ac={name:n.normalize(Z)}}ad=af[Z];ad=(ad==null)?"":ad;if(ac.set){ac.set(ae,ad,ab)}else{aa[ac.name]=ad}if(ac.afterSet){ac.afterSet(ae,ad,ab)}}}}return ab},setText:function(Y){this.dom.textContent=Y},setTop:function(Y){this.dom.style[K]=n.addUnits(Y);return this},setVisibility:function(Y){var Z=this.dom.style;if(Y){Z.removeProperty("visibility")}else{Z.setProperty("visibility","hidden","important")}},setVisibilityMode:function(Y){this.getData().visibilityMode=Y;return this},setVisible:function(aa){var Y=this,Z=Y.getVisibilityMode(),ab=aa?"removeCls":"addCls";switch(Z){case n.DISPLAY:Y.removeCls([z,j]);Y[ab](x);break;case n.VISIBILITY:Y.removeCls([x,j]);Y[ab](z);break;case n.OFFSETS:Y.removeCls([z,x]);Y[ab](j);break}return Y},setWidth:function(Y){this.dom.style[f]=n.addUnits(Y);return this},setX:function(Y){return this.setXY([Y,false])},setXY:function(aa){var Z=this,ab=Z.translatePoints(aa),Y=Z.dom.style,ac;Z.position();Y.right="auto";for(ac in ab){if(!isNaN(ab[ac])){Y[ac]=ab[ac]+"px"}}return Z},setY:function(Y){return this.setXY([false,Y])},show:function(){this.setVisible(true);return this},swapCls:function(Z,ae,Y,ac){if(Y===undefined){Y=true}var ab=this,ad=Y?Z:ae,aa=Y?ae:Z;if(aa){ab.removeCls(ac?ac+"-"+aa:aa)}if(ad){ab.addCls(ac?ac+"-"+ad:ad)}return ab},synchronize:function(){var af=this,ab=af.dom,ag={},ae=ab.className,Z,ac,ad,Y,aa=af.getData();if(ae&&ae.length>0){Z=ab.className.split(U);for(ac=0,ad=Z.length;ac<ad;ac++){Y=Z[ac];ag[Y]=true}}else{Z=[]}aa.classList=Z;aa.classMap=ag;aa.isSynchronized=true;return af},toggleCls:function(Y,Z){if(typeof Z!=="boolean"){Z=!this.hasCls(Y)}return(Z)?this.addCls(Y):this.removeCls(Y)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var Y="webkitTransform" in J.createElement("div").style?"webkitTransform":"transform";return function(Z,ab,aa){this.dom.style[Y]="translate3d("+(Z||0)+"px, "+(ab||0)+"px, "+(aa||0)+"px)"}}(),unwrap:function(){var aa=this.dom,Y=aa.parentNode,Z;if(Y){Z=Y.parentNode;Z.insertBefore(aa,Y);Z.removeChild(Y)}else{Z=document.createDocumentFragment();Z.appendChild(aa)}return this},up:function(aa,Y,Z){return this.findParentNode(aa,Y,!Z)},update:function(Y){return this.setHtml(Y)},wrap:function(Z,aa,Y){var ab=this,ae=ab.dom,ad=Ext.DomHelper.insertBefore(ae,Z||{tag:"div"},true),ac=ad;if(Y){ac=ad.selectNode(Y)}ac.appendChild(ae);return aa?ad.dom:ad},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(aa){var ad=this,ab=ad.dom,af=ab.nodeName==="BODY",ag=af?n.getViewportWidth():ab.offsetWidth,ac=af?n.getViewportHeight():ab.offsetHeight,ai=ad.getXY(),ah=ai[1],Y=ai[0]+ag,ae=ai[1]+ac,Z=ai[0];if(aa){return new Ext.util.Region(ah,Y,ae,Z)}else{return{left:Z,top:ah,width:ag,height:ac,right:Y,bottom:ae}}},getScrollParent:null,isDescendent:null,isTransparent:function(Z){var Y=this.getStyle(Z);return Y?a.test(Y):false},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[["positionable",Ext.util.Positionable],["observable",Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(r){var b=document,n=r.prototype,y=Ext.supports,E="pointerdown",f="pointermove",c="pointerup",d="pointercancel",j="MSPointerDown",o="MSPointerMove",A="MSPointerUp",a="MSPointerCancel",u="mousedown",z="mousemove",v="mouseup",F="mouseover",D="mouseout",q="mouseenter",g="mouseleave",x="touchstart",m="touchmove",B="touchend",h="touchcancel",s="click",k="dblclick",w="tap",C="doubletap",l=n.eventMap={},t=n.additiveEvents={},p=Ext.id;Ext.id=function(I,H){var G=Ext.getDom(I,true),J,K;if(!G){K=p(I,H)}else{if(!(K=G.id)){K=p(null,H||r.prototype.identifiablePrefix);if(Ext.isSandboxed){J=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-");K=J+K}G.id=K}}return K};if(y.PointerEvents){l[u]=E;l[z]=f;l[v]=c;l[x]=E;l[m]=f;l[B]=c;l[h]=d;l[s]=w;l[k]=C;l[F]="pointerover";l[D]="pointerout";l[q]="pointerenter";l[g]="pointerleave"}else{if(y.MSPointerEvents){l[E]=j;l[f]=o;l[c]=A;l[d]=a;l[u]=j;l[z]=o;l[v]=A;l[x]=j;l[m]=o;l[B]=A;l[h]=a;l[s]=w;l[k]=C;l[F]="MSPointerOver";l[D]="MSPointerOut"}else{if(y.TouchEvents){l[E]=x;l[f]=m;l[c]=B;l[d]=h;l[u]=x;l[z]=m;l[v]=B;l[s]=w;l[k]=C;if(Ext.isWebKit&&Ext.os.is.Desktop){l[x]=u;l[m]=z;l[B]=v;l[h]=v;t[u]=u;t[z]=z;t[v]=v;t[x]=x;t[m]=m;t[B]=B;t[h]=h;t[E]=u;t[f]=z;t[c]=v;t[d]=v}}else{l[E]=u;l[f]=z;l[c]=v;l[d]=v;l[x]=u;l[m]=z;l[B]=v;l[h]=v}}}n.getTrueXY=n.getXY;Ext.select=r.select;Ext.query=r.query;Ext.apply(Ext,{get:function(G){return r.get(G)},getDom:function(G){if(!G||!b){return null}return G.dom||(typeof G==="string"?Ext.getElementById(G):G)},getBody:function(){if(!Ext._bodyEl){if(!b.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(b.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(b.head||b.getElementsByTagName("head")[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(b)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(I){var J=I&&I.id,H=Ext.cache[J],G;if(H){H.destroy()}else{if(I&&I.tagName.toUpperCase()!=="BODY"){G=I.parentNode;if(G){G.removeChild(I)}}}}});Ext.isGarbage=function(G){return G&&G.nodeType===1&&G.tagName!=="BODY"&&G.tagName!=="HTML"&&(!G.parentNode||(!G.offsetParent&&((Ext.isIE8?b.all[G.id]:b.getElementById(G.id))!==G)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(G))))}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:null,id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,operator:null,root:null},scope:null,$configStrict:false,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(g){var b=a.isCollection?a.items:a,h=b.length,c=true,d,f;for(d=0;c&&d<h;d++){f=b[d];if(!f.getDisabled()){c=f.filter(g)}}return c}},isInvalid:function(a){var b=a.value;if(!a.filterFn){if(!a.property){return"A Filter requires either a property or a filterFn to be set"}if(!(b||b===0||b===false||(b===""&&a.exatchMatch))){if(!a.operator){return"A Filter requires either a property and value, or a filterFn to be set"}}}return false}},constructor:function(a){this.initConfig(a)},filter:function(b){var a=this,c=a._filterFn||a.getFilterFn();return c.call(a.scope||a,b)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-filter-")}this._id=a}return a},getFilterFn:function(){var b=this,c=b._filterFn,a;if(!c){a=b.getOperator();if(a){c=b.operatorFns[a]}else{c=b.createRegexFilter()}b._filterFn=c}return c},createRegexFilter:function(){var b=this,f=!!b.getAnyMatch(),a=!!b.getExactMatch(),c=b.getValue(),d=Ext.String.createRegex(c,!f,!f&&a,!b.getCaseSensitive());return function(g){var h=b.getPropertyValue(g);return d?d.test(h):(h==null)}},getPropertyValue:function(b){var a=this._root,c=(a==null)?b:b[a];return c[this._property]},getState:function(){var c=this.getInitialConfig(),a={},b;for(b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}delete a.root;a.value=this.getValue();return a},getScope:function(){return this.scope},serialize:function(){var a=this.getState();delete a.id;return a}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var a=this.prototype,f=(a.operatorFns={"<":function(h){var g=this._value;return Ext.coerce(this.getPropertyValue(h),g)<g},"<=":function(h){var g=this._value;return Ext.coerce(this.getPropertyValue(h),g)<=g},"=":function(h){var g=this._value;return Ext.coerce(this.getPropertyValue(h),g)==g},">=":function(h){var g=this._value;return Ext.coerce(this.getPropertyValue(h),g)>=g},">":function(h){var g=this._value;return Ext.coerce(this.getPropertyValue(h),g)>g},"!=":function(h){var g=this._value;return Ext.coerce(this.getPropertyValue(h),g)!=g},"in":function(h){var g=this._value;return Ext.Array.contains(g,Ext.coerce(this.getPropertyValue(h),g))},like:function(h){var g=this._value;return g&&Ext.coerce(this.getPropertyValue(h),g).toLowerCase().indexOf(g.toLowerCase())>-1}}),d=function(){this._filterFn=null},c=["updateOperator","updateValue"],b;f["=="]=f["="];f.gt=f[">"];f.ge=f[">="];f.lt=f["<"];f.le=f["<="];f.eq=f["="];f.ne=f["!="];for(b=c.length;b-->0;){a[c[b]]=d}}));Ext.util=Ext.util||{};Ext.util.DelayedTask=function(f,d,b,j,h){var g=this,a,c=function(){var k=Ext.GlobalEvents;clearInterval(g.id);g.id=null;f.apply(d,b||[]);if(h!==false&&k.hasListeners.idle){k.fireEvent("idle")}};j=typeof j==="boolean"?j:true;g.id=null;g.delay=function(l,n,m,k){if(j){g.cancel()}if(typeof l==="number"){a=l}f=n||f;d=m||d;b=k||b;if(!g.id){g.id=Ext.interval(c,a)}};g.cancel=function(){if(g.id){clearInterval(g.id);g.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var d=Array.prototype.slice,a=Ext.Array.insert,c=Ext.Array.toArray,b={};return{isEvent:true,suspended:0,noOptions:{},constructor:function(g,f){this.name=f;this.observable=g;this.listeners=[]},addListener:function(q,s,u,j){var o=this,p,k,r,f,t,n,h,m,l,g;if(typeof q!=="string"){s=s||o.observable}if(!o.isListening(q,s)){k=o.createListener(q,s,u,j);if(o.firing){o.listeners=o.listeners.slice(0)}p=o.listeners;m=h=p.length;r=u&&u.priority;t=o._highestNegativePriorityIndex;n=(t!==undefined);if(r){f=(r<0);if(!f||n){for(l=(f?t:0);l<h;l++){g=p[l].o?p[l].o.priority||0:0;if(g<r){m=l;break}}}else{o._highestNegativePriorityIndex=m}}else{if(n){m=t}}if(!f&&m<=t){o._highestNegativePriorityIndex++}if(m===h){o.listeners[h]=k}else{a(o.listeners,m,[k])}}return k},createListener:function(m,n,f,g){var j=this,k=(n in Ext._namedScopes),h={fn:m,scope:n,ev:j,caller:g,namedScope:k,defaultScope:k?n:undefined,lateBound:(typeof m==="string"&&(!n||k))},p=m,l=true;if(f){h.o=f;if(f.single){p=j.createSingle(p,h,f,n);l=false}if(f.target){p=j.createTargeted(p,h,f,n,l);l=false}if(f.delay){p=j.createDelayed(p,h,f,n,l);l=false}if(f.buffer){p=j.createBuffered(p,h,f,n,l);l=false}}h.fireFn=p;h.allowLookup=l;return h},findListener:function(l,k){var j=this.listeners,g=j.length,m,h,f;while(g--){m=j[g];if(m){h=m.scope;f=(m.lateBound&&!m.namedScope)?undefined:(k||this.observable);if(m.fn==l&&h==f){return g}}}return -1},isListening:function(g,f){return this.findListener(g,f)!==-1},removeListener:function(j,h){var l=this,g,n,m,f;if(j.fireFn){g=Ext.Array.indexOf(listeners,j)}else{g=l.findListener(j,h)}if(g!=-1){n=l.listeners[g];m=l._highestNegativePriorityIndex;if(l.firing){l.listeners=l.listeners.slice(0)}if(n.task){n.task.cancel();delete n.task}f=n.tasks&&n.tasks.length;if(f){while(f--){n.tasks[f].cancel()}delete n.tasks}l.listeners.splice(g,1);if(m){if(g<m){l._highestNegativePriorityIndex--}else{if(g===m&&g===l.listeners.length){delete l._highestNegativePriorityIndex}}}return true}return false},clearListeners:function(){var g=this.listeners,f=g.length;while(f--){this.removeListener(g[f].fn,g[f].scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fire:function(){var l=this,j=l.listeners,k=j.length,n,h,g,m,f;if(!l.suspended&&k>0){l.firing=true;g=arguments.length?d.call(arguments,0):[];f=g.length;for(h=0;h<k;h++){m=j[h];if(m.o){g[f]=m.o}if(m){n=l.getFireInfo(m);if(n.fn.apply(n.scope,g)===false){return(l.firing=false)}}}}l.firing=false;return true},getFireInfo:function(l,f){var m=this.observable,k=f?l.fn:l.fireFn,j=l.scope,g=l.caller,h;if((f||l.allowLookup)&&l.lateBound){j=(g||m).resolveListenerScope(l.defaultScope);k=j[k]}else{if(l.allowLookup){h=Ext._namedScopes[j]}j=(j&&!h)?j:m}b.fn=k;b.scope=j;return b},createTargeted:function(h,j,k,g,f){return function(){if(k.target===arguments[0]){var l;if(f){l=j.ev.getFireInfo(j,true);h=l.fn;g=l.scope}h.apply(g,arguments)}}},createBuffered:function(h,j,k,g,f){j.task=new Ext.util.DelayedTask();return function(){var l;if(f){l=j.ev.getFireInfo(j,true);h=l.fn;g=l.scope}j.task.delay(k.buffer,h,g,c(arguments))}},createDelayed:function(h,j,k,g,f){return function(){var l=new Ext.util.DelayedTask(),m;if(f){m=j.ev.getFireInfo(j,true);h=m.fn;g=m.scope}if(!j.tasks){j.tasks=[]}j.tasks.push(l);l.delay(k.delay||10,h,g,c(arguments))}},createSingle:function(g,h,j,f){return function(){var k=h.ev,l=k.getFireInfo(h,true);if(k.removeListener(h.fn,f)&&k.observable){k.observable.hasListeners[k.name]--}l.fn.apply(l.scope,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));(Ext.cmd.derive("Ext.util.Observable",Ext.Base,function(a){var d=Ext.emptyFn,c=[],f=Array.prototype,g=f.slice,h=Ext.$eventNameMap,b=function(j){if(j instanceof b){return j}this.observable=j;if(arguments[1].isObservable){this.managedListeners=true}this.args=g.call(arguments,1)};b.prototype.destroy=function(){var j=this.observable;j[this.managedListeners?"mun":"un"].apply(j,this.args)};return{mixinId:"observable",statics:{releaseCapture:function(j){j.fireEventArgs=this.prototype.fireEventArgs},capture:function(m,k,j){var l=function(n,o){return k.apply(j,[n].concat(o))};this.captureArgs(m,l,j)},captureArgs:function(l,k,j){l.fireEventArgs=Ext.Function.createInterceptor(l.fireEventArgs,k,j)},observe:function(j,k){if(j){if(!j.isObservable){Ext.applyIf(j,new this());this.captureArgs(j.prototype,j.fireEventArgs,j)}if(Ext.isObject(k)){j.on(k)}}return j},prepareClass:function(n,t,o){var s=n.listeners=[],q=o||n.prototype,j=q.listeners,m=t?t.listeners:n.superclass.self.listeners,k,u,r;if(m){s.push(m)}if(j){u=j.scope;if(!u){j.scope="self"}else{r=Ext._namedScopes[u];if(r&&r.isController){j.scope="self.controller"}}s.push(j);q.listeners=null}if(!n.HasListeners){var p=function(){},l=n.superclass.HasListeners||(t&&t.HasListeners)||a.HasListeners;n.prototype.HasListeners=n.HasListeners=p;p.prototype=n.hasListeners=new l()}}},isObservable:true,isUtilObservable:true,eventsSuspended:0,constructor:function(l){var m=this,k=m.self,j;if(l){Ext.apply(m,l)}m.hasListeners=new m.HasListeners();m.events=m.events||{};j=k.listeners;if(j&&!m._addDeclaredListeners(j)){k.listeners=null}if(m.listeners){m.on(m.listeners);m.listeners=null}if(m.bubbleEvents){m.enableBubble(m.bubbleEvents)}},onClassExtended:function(j){if(!j.HasListeners){a.prepareClass(j)}},eventOptionsRe:/^(?:scope|delay|buffer|onFrame|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|destroyable|vertical|horizontal|priority)$/,_addDeclaredListeners:function(j){var k=this;if(j instanceof Array){Ext.each(j,k._addDeclaredListeners,k)}else{k._addedDeclaredListeners=true;k.addListener(j)}return k._addedDeclaredListeners},addManagedListener:function(q,m,o,r,s,l){var n=this,p=n.managedListeners=n.managedListeners||[],k,j;if(typeof m!=="string"){j=arguments.length>4?s:m;s=m;for(m in s){if(s.hasOwnProperty(m)){k=s[m];if(!n.eventOptionsRe.test(m)){n.addManagedListener(q,m,k.fn||k,k.scope||s.scope||r,k.fn?k:j,true)}}}if(s&&s.destroyable){return new b(n,q,s)}}else{if(o!==d){p.push({item:q,ename:m,fn:o,scope:r,options:s});if(q.isUtilObservable){q.on(m,o,r,s,n)}else{q.on(m,o,r,s)}if(!l&&s&&s.destroyable){return new b(n,q,m,o,r)}}}},removeManagedListener:function(q,l,o,r){var n=this,s,k,p,j,m;if(typeof l!=="string"){s=l;for(l in s){if(s.hasOwnProperty(l)){k=s[l];if(!n.eventOptionsRe.test(l)){n.removeManagedListener(q,l,k.fn||k,k.scope||s.scope||r)}}}}else{p=n.managedListeners?n.managedListeners.slice():[];for(m=0,j=p.length;m<j;m++){n.removeManagedListenerItem(false,p[m],q,l,o,r)}}},fireEvent:function(j){return this.fireEventArgs(j,g.call(arguments,1))},resolveListenerScope:function(j){if(j==="this"){j=null}return j||this},fireEventArgs:function(j,l){j=h[j]||(h[j]=j.toLowerCase());var o=this,m=o.events,n=m&&m[j],k=true;if(o.hasListeners[j]){k=o.doFireEvent(j,l||c,n?n.bubble:false)}return k},doFireEvent:function(l,n,k){var p=this,j,o,m=true;do{if(p.eventsSuspended){if((j=p.eventQueue)){j.push([l,n])}return m}else{o=p.events&&p.events[l];if(o&&o!==true){if((m=o.fire.apply(o,n))===false){break}}}}while(k&&(p=p.getBubbleParent()));return m},getBubbleParent:function(){var k=this,j=k.getBubbleTarget&&k.getBubbleTarget();if(j&&j.isObservable){return j}return null},addListener:function(m,s,u,v,k){var r=this,t=0,n=Ext._namedScopes,l,j,q,o,p;if(typeof m!=="string"){v=m;u=v.scope;q=u&&n[u];o=q&&q.isSelf;for(m in v){l=v[m];if(!r.eventOptionsRe.test(m)){p=l.scope;if(p&&o){q=n[p];if(q&&q.isController){p="self.controller"}}r.addListener(m,l.fn||l,p||u,l.fn?l:v,k)}}if(v&&v.destroyable){return new b(r,v)}}else{q=n[u];m=h[m]||(h[m]=m.toLowerCase());j=(r.events||(r.events={}))[m];if(j&&j.isEvent){t=j.listeners.length}else{r.events[m]=j=new Ext.util.Event(r,m)}if(typeof s==="string"&&u&&!q){s=r.resolveMethod(s,u)}if(s!==d){j.addListener(s,u,v,k);if(j.listeners.length!==t){r.hasListeners._incr_(m)}if(v&&v.destroyable){return new b(r,m,s,u,v)}}}},removeListener:function(m,o,n){var q=this,l=q.events,k,p,j;if(typeof m!=="string"){j=m;for(m in j){if(j.hasOwnProperty(m)){k=j[m];if(!q.eventOptionsRe.test(m)){q.removeListener(m,k.fn||k,k.scope||j.scope)}}}}else{m=h[m]||(h[m]=m.toLowerCase());p=l&&l[m];if(p&&p.isEvent){if(typeof o==="string"&&n&&n!=="this"&&n!=="controller"){o=q.resolveMethod(o,n)}if(p.removeListener(o,n)){q.hasListeners._decr_(m)}}}},clearListeners:function(){var n=this,l=n.events,j=n.hasListeners,m,k;if(l){for(k in l){if(l.hasOwnProperty(k)){m=l[k];if(m.isEvent){delete j[k];m.clearListeners()}}}}n.clearManagedListeners()},clearManagedListeners:function(){var m=this,k=m.managedListeners||[],l=0,j=k.length;for(;l<j;l++){m.removeManagedListenerItem(true,k[l])}m.managedListeners=[]},removeManagedListenerItem:function(k,j,o,l,n,m){if(k||(j.item===o&&j.ename===l&&(!n||j.fn===n)&&(!m||j.scope===m))){j.item.un(j.ename,j.fn,j.scope);if(!k){Ext.Array.remove(this.managedListeners,j)}}},resolveMethod:function(k,j){return j[k]},hasListener:function(j){j=h[j]||(h[j]=j.toLowerCase());return !!this.hasListeners[j]},isSuspended:function(l){var k=this.eventsSuspended>0,j=this.events;if(!k&&l&&j){l=j[l];if(l&&l.isEvent){return l.isSuspended()}}return k},suspendEvents:function(j){++this.eventsSuspended;if(j&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var o=this,m=o.events||(o.events={}),j=arguments.length,l,n,k;for(l=0;l<j;l++){k=arguments[l];k=h[k]||(h[k]=k.toLowerCase());n=m[k];if(!n||!n.isEvent){m[k]=n=new Ext.util.Event(o,k)}n.suspend()}},resumeEvent:function(){var l=this.events||0,j=l&&arguments.length,k,m;for(k=0;k<j;k++){m=l[arguments[k]];if(m&&m.resume){m.resume()}}},resumeEvents:function(j){var k=this,n=k.eventQueue,m,l;if(k.eventsSuspended&&!--k.eventsSuspended){delete k.eventQueue;if(!j&&n){m=n.length;for(l=0;l<m;l++){k.fireEventArgs.apply(k,n[l])}}}},relayEvents:function(k,m,p){var o=this,j=m.length,l=0,n,q={};for(;l<j;l++){n=m[l];q[n]=o.createRelayer(p?p+n:n)}o.mon(k,q,null,null,undefined);return new b(o,k,q)},createRelayer:function(j,k){var l=this;return function(){return l.fireEventArgs.call(l,j,k?g.apply(arguments,k):arguments)}},enableBubble:function(q){if(q){var o=this,p=(typeof q=="string")?arguments:q,l=o.events||(o.events={}),n=l&&p.length,k,m,j;for(j=0;j<n;++j){k=p[j];k=h[k]||(h[k]=k.toLowerCase());m=l[k];if(!m||!m.isEvent){l[k]=m=new Ext.util.Event(o,k)}o.hasListeners._incr_(k);m.bubble=true}}},deprecated:{"5.0":{methods:{addEvents:null}}}}},1,0,0,0,0,0,[Ext.util,"Observable"],function(){var a=this,d=a.prototype,b=function(){},f=function(g){if(!g.HasListeners){var h=g.prototype;a.prepareClass(g,this);g.onExtended(function(j,k){a.prepareClass(j,null,k)});if(h.onClassMixedIn){Ext.override(g,{onClassMixedIn:function(j){f.call(this,j);this.callParent(arguments)}})}else{h.onClassMixedIn=function(j){f.call(this,j)}}}};b.prototype={_decr_:function(g){if(!--this[g]){delete this[g]}},_incr_:function(g){if(this.hasOwnProperty(g)){++this[g]}else{this[g]=1}}};d.HasListeners=a.HasListeners=b;a.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"});a.observeClass=a.observe;function c(n){var m=(this.methodEvents=this.methodEvents||{})[n],j,h,k,l=this,g;if(!m){this.methodEvents[n]=m={};m.originalFn=this[n];m.methodName=n;m.before=[];m.after=[];g=function(q,p,o){if((h=q.apply(p||l,o))!==undefined){if(typeof h=="object"){if(h.returnValue!==undefined){j=h.returnValue}else{j=h}k=!!h.cancel}else{if(h===false){k=true}else{j=h}}}};this[n]=function(){var q=Array.prototype.slice.call(arguments,0),p,r,o;j=h=undefined;k=false;for(r=0,o=m.before.length;r<o;r++){p=m.before[r];g(p.fn,p.scope,q);if(k){return j}}if((h=m.originalFn.apply(l,q))!==undefined){j=h}for(r=0,o=m.after.length;r<o;r++){p=m.after[r];g(p.fn,p.scope,q);if(k){return j}}return j}}return m}Ext.apply(d,{onClassMixedIn:f,beforeMethod:function(j,h,g){c.call(this,j).before.push({fn:h,scope:g})},afterMethod:function(j,h,g){c.call(this,j).after.push({fn:h,scope:g})},removeMethodListener:function(m,k,j){var l=this.getMethodEvent(m),h,g;for(h=0,g=l.before.length;h<g;h++){if(l.before[h].fn==k&&l.before[h].scope==j){Ext.Array.erase(l.before,h,1);return}}for(h=0,g=l.after.length;h<g;h++){if(l.after[h].fn==k&&l.after[h].scope==j){Ext.Array.erase(l.after,h,1);return}}},toggleEventLogging:function(g){Ext.util.Observable[g?"capture":"releaseCapture"](this,function(h){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(h,arguments)}})}})}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(b,a){var c=this;if(arguments.length===1&&Ext.isObject(b)){c.initialConfig=b;Ext.apply(c,b)}else{c.allowFunctions=b===true;if(a){c.getKey=a}c.initialConfig={allowFunctions:c.allowFunctions,getKey:c.getKey}}c.items=[];c.map={};c.keys=[];c.indexMap={};c.length=0;c.mixins.observable.constructor.call(c)},allowFunctions:false,add:function(c,d){var a=this.length,b;if(arguments.length===1){b=this.insert(a,c)}else{b=this.insert(a,c,d)}return b},getKey:function(a){return a.id},replace:function(c,f){var d=this,a,b;if(arguments.length==1){f=arguments[0];c=d.getKey(f)}a=d.map[c];if(typeof c=="undefined"||c===null||typeof a=="undefined"){return d.add(c,f)}d.generation++;b=d.indexOfKey(c);d.items[b]=f;d.map[c]=f;if(d.hasListeners.replace){d.fireEvent("replace",c,a,f)}return f},updateKey:function(g,h){var d=this,f=d.map,a=d.indexOfKey(g),c=d.indexMap,b;if(a>-1){b=f[g];delete f[g];delete c[g];f[h]=b;c[h]=a;d.keys[a]=h;d.indexGeneration=++d.generation}},addAll:function(c){var b=this,a;if(arguments.length>1||Ext.isArray(c)){b.insert(b.length,arguments.length>1?arguments:c)}else{for(a in c){if(c.hasOwnProperty(a)){if(b.allowFunctions||typeof c[a]!="function"){b.add(a,c[a])}}}}},each:function(f,d){var b=Ext.Array.push([],this.items),c=0,a=b.length,g;for(;c<a;c++){g=b[c];if(f.call(d||g,g,c,a)===false){break}}},eachKey:function(f,d){var g=this.keys,b=this.items,c=0,a=g.length;for(;c<a;c++){f.call(d||window,g[c],b[c],c,a)}},findBy:function(f,d){var g=this.keys,b=this.items,c=0,a=b.length;for(;c<a;c++){if(f.call(d||window,b[c],g[c])){return b[c]}}return null},insert:function(b,c,d){var a;if(Ext.isIterable(c)){a=this.doInsert(b,c,d)}else{if(arguments.length>2){a=this.doInsert(b,[c],[d])}else{a=this.doInsert(b,[c])}a=a[0]}return a},doInsert:function(j,o,n){var l=this,b,c,g,k=o.length,a=k,f=l.hasListeners.add,d,h={},m,q,p;if(n!=null){l.useLinearSearch=true}else{n=o;o=new Array(k);for(g=0;g<k;g++){o[g]=this.getKey(n[g])}}l.suspendEvents();for(g=0;g<k;g++){b=o[g];c=l.indexOfKey(b);if(c!==-1){if(c<j){j--}l.removeAt(c)}if(b!=null){if(h[b]!=null){m=true;a--}h[b]=g}}l.resumeEvents();if(m){q=o;p=n;o=new Array(a);n=new Array(a);g=0;for(b in h){o[g]=q[h[b]];n[g]=p[h[b]];g++}k=a}d=j===l.length&&l.indexGeneration===l.generation;Ext.Array.insert(l.items,j,n);Ext.Array.insert(l.keys,j,o);l.length+=k;l.generation++;if(d){l.indexGeneration=l.generation}for(g=0;g<k;g++,j++){b=o[g];if(b!=null){l.map[b]=n[g];if(d){l.indexMap[b]=j}}if(f){l.fireEvent("add",j,n[g],b)}}return n},remove:function(d){var c=this,b,a;if(!c.useLinearSearch&&(b=c.getKey(d))){a=c.indexOfKey(b)}else{a=Ext.Array.indexOf(c.items,d)}return(a===-1)?false:c.removeAt(a)},removeAll:function(a){var c=this,b;if(a||c.hasListeners.remove){if(a){for(b=a.length-1;b>=0;--b){c.remove(a[b])}}else{while(c.length){c.removeAt(0)}}}else{c.length=c.items.length=c.keys.length=0;c.map={};c.indexMap={};c.generation++;c.indexGeneration=c.generation}},removeAt:function(a){var c=this,d,b;if(a<c.length&&a>=0){c.length--;d=c.items[a];Ext.Array.erase(c.items,a,1);b=c.keys[a];if(typeof b!="undefined"){delete c.map[b]}Ext.Array.erase(c.keys,a,1);if(c.hasListeners.remove){c.fireEvent("remove",d,b)}c.generation++;return d}return false},removeRange:function(h,a){var j=this,b,k,g,f,c,d;if(h<j.length&&h>=0){if(!a){a=1}f=Math.min(h+a,j.length);a=f-h;d=f===j.length;c=d&&j.indexGeneration===j.generation;for(g=h;g<f;g++){k=j.keys[g];if(k!=null){delete j.map[k];if(c){delete j.indexMap[k]}}}b=j.items[g-1];j.length-=a;j.generation++;if(c){j.indexGeneration=j.generation}if(d){j.items.length=j.keys.length=j.length}else{j.items.splice(h,a);j.keys.splice(h,a)}return b}return false},removeAtKey:function(b){var d=this,c=d.keys,a;if(b==null){for(a=c.length-1;a>=0;a--){if(c[a]==null){d.removeAt(a)}}}else{return d.removeAt(d.indexOfKey(b))}},getCount:function(){return this.length},indexOf:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.indexOfKey(a)}return Ext.Array.indexOf(b.items,c)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var f=this,d=f.indexMap={},c=f.keys,a=c.length,b;for(b=0;b<a;b++){d[c[b]]=b}f.indexGeneration=f.generation},get:function(b){var d=this,a=d.map[b],c=a!==undefined?a:(typeof b=="number")?d.items[b]:undefined;return typeof c!="function"||d.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.map[a]!=null}return Ext.Array.indexOf(this.items,c)!==-1}return false},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(h,b,j,a){var c=this.extractValues(h,b),g=c.length,f=0,d;j=j||0;a=(a||a===0)?a:g-1;for(d=j;d<=a;d++){f+=c[d]}return f},collect:function(k,f,h){var l=this.extractValues(k,f),a=l.length,b={},c=[],j,g,d;for(d=0;d<a;d++){j=l[d];g=String(j);if((h||!Ext.isEmpty(j))&&!b[g]){b[g]=true;c.push(j)}}return c},extractValues:function(c,a){var b=this.items;if(a){b=Ext.Array.pluck(b,a)}return Ext.Array.pluck(b,c)},hasRange:function(b,a){return(a<this.length)},getRange:function(j,b){var h=this,d=h.items,c=[],a=d.length,g,f;if(a<1){return c}if(j>b){f=true;g=j;j=b;b=g}if(j<0){j=0}if(b==null||b>=a){b=a-1}c=d.slice(j,b+1);if(f&&c.length){c.reverse()}return c},filter:function(d,c,f,a){var b=[];if(Ext.isString(d)){b.push(new Ext.util.Filter({property:d,value:c,anyMatch:f,caseSensitive:a}))}else{if(Ext.isArray(d)||d instanceof Ext.util.Filter){b=b.concat(d)}}return this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(f,d){var j=this,a=new j.self(j.initialConfig),h=j.keys,b=j.items,g=b.length,c;a.getKey=j.getKey;for(c=0;c<g;c++){if(f.call(d||j,b[c],h[c])){a.add(h[c],b[c])}}a.useLinearSearch=j.useLinearSearch;return a},findIndex:function(c,b,f,d,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(g){return g&&b.test(g[c])},null,f)},findIndexBy:function(f,d,j){var h=this,g=h.keys,b=h.items,c=j||0,a=b.length;for(;c<a;c++){if(f.call(d||h,b[c],g[c])){return c}}return -1},createValueMatcher:function(c,f,a,b){if(!c.exec){var d=Ext.String.escapeRegex;c=String(c);if(f===true){c=d(c)}else{c="^"+d(c);if(b===true){c+="$"}}c=new RegExp(c,a?"":"i")}return c},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(c,j){var f=b.isCollection?b.items:b,h=f.length,d,g;for(g=0;g<h;++g){d=f[g].sort(c,j);if(d){return d}}return a&&a(c,j)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-sorter-")}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,c){var g=this,f=g._transform,b=g._root,h=g._property,a,j;if(b){d=d[b];c=c[b]}a=d[h];j=c[h];if(f){a=f(a);j=f(j)}return(a>j)?1:(a<j?-1:0)},applyDirection:function(a){return a?a:"ASC"},updateDirection:function(a){this.multiplier=(a.toUpperCase()==="DESC")?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){return{root:this.getRoot(),property:this.getProperty(),direction:this.getDirection()}},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,$configPrefixed:false,$configStrict:false,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,c){var b=a[0].sort(d,c),g=a.length,f=1;for(;!b&&f<g;f++){b=a[f].sort.call(this,d,c)}return b}:function(){return 0}}},applySorters:function(c){var b=this,a=b.getSorters()||new Ext.util.MixedCollection(false,Ext.returnId);if(c){a.addAll(b.decodeSorters(c))}return a},sort:function(h,g,a,f){var b=this,j,d,c=b.getSorters();if(!c){b.setSorters(null);c=b.getSorters()}if(Ext.isArray(h)){f=a;a=g}else{if(Ext.isObject(h)){h=[h];f=a;a=g}else{if(Ext.isString(h)){j=c.get(h);if(!j){j={property:h,direction:g}}else{if(g==null){j.toggle()}else{j.setDirection(g)}}h=[j]}}}if(h&&h.length){h=b.decodeSorters(h);switch(a){case"multi":c.insert(0,h[0]);d=c.getCount()-b.multiSortLimit;if(d>0){c.removeRange(b.multiSortLimit,d)}break;case"prepend":c.insert(0,h);break;case"append":c.addAll(h);break;case undefined:case null:case"replace":c.clear();c.addAll(h);break;default:}}if(f!==false){b.fireEvent("beforesort",b,h);b.onBeforeSort(h);if(b.getSorterCount()){b.doSort(b.generateComparator())}}return h},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(g){if(!Ext.isArray(g)){if(g===undefined){g=[]}else{g=[g]}}var d=g.length,h=Ext.util.Sorter,b=this.getModel?this.getModel():this.model,f,a,c;for(c=0;c<d;c++){a=g[c];if(!(a instanceof h)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:"ASC"});if(a.fn){a.sorterFn=a.fn}if(typeof a=="function"){a={sorterFn:a}}if(b&&!a.transform){f=b.getField(a.property);a.transform=f&&f.sortType!==Ext.identityFn?f.sortType:undefined}g[c]=new Ext.util.Sorter(a)}}return g},getFirstSorter:function(){var c=this.getSorters().items,a=c.length,b=0,d;for(;b<a;++b){d=c[b];if(!d.isGrouper){return d}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){var a=this;a.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(a){this.sortBy(a)},_sort:function(m,b,l){var k=this,f,g,d=String(b).toUpperCase()=="DESC"?-1:1,j=[],n=k.keys,h=k.items,a;l=l||function(o,c){return o-c};for(f=0,g=h.length;f<g;f++){j[j.length]={key:n[f],value:h[f],index:f}}Ext.Array.sort(j,function(o,c){return l(o[m],c[m])*d||(o.index<c.index?-1:1)});for(f=0,g=j.length;f<g;f++){a=j[f];h[f]=a.value;n[f]=a.key;k.indexMap[a.key]=f}k.generation++;k.indexGeneration=k.generation;k.fireEvent("sort",k)},sortBy:function(b){var j=this,a=j.items,h,g=j.keys,d,f=a.length,c;for(c=0;c<f;c++){a[c].$extCollectionIndex=c}Ext.Array.sort(a,function(l,k){return b(l,k)||(l.$extCollectionIndex<k.$extCollectionIndex?-1:1)});for(c=0;c<f;c++){h=a[c];d=j.getKey(h);g[c]=d;j.indexMap[d]=c;delete a.$extCollectionIndex}j.generation++;j.indexGeneration=j.generation;j.fireEvent("sort",j,a,g)},findInsertionIndex:function(f,d){var g=this,b=g.items,j=0,a=b.length-1,c,h;if(!d){d=g.generateComparator()}while(j<=a){c=(j+a)>>1;h=d(f,b[c]);if(h>=0){j=c+1}else{if(h<0){a=c-1}}}return j},reorder:function(d){var h=this,b=h.items,c=0,g=b.length,a=[],f=[],j;h.suspendEvents();for(j in d){a[d[j]]=b[j]}for(c=0;c<g;c++){if(d[c]==undefined){f.push(b[c])}}for(c=0;c<g;c++){if(a[c]==undefined){a[c]=f.shift()}}h.clear();h.addAll(a);h.resumeEvents();h.fireEvent("sort",h)},sortByKey:function(a,b){this._sort("key",a,b||function(d,c){var g=String(d).toUpperCase(),f=String(c).toUpperCase();return g>f?1:(g<f?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(a){var b=this;if(typeof a=="number"){b.interval=a}else{if(a){Ext.apply(b,a)}}b.tasks=[];b.timerFn=Ext.Function.bind(b.onTick,b)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(a){var c=this,b=Ext.Date.now();if(!a.pending){c.tasks.push(a);a.pending=true}a.stopped=false;a.taskStartTime=b;a.taskRunTime=a.fireOnStart!==false?0:a.taskStartTime;a.taskRunCount=0;if(!c.firing){if(a.fireOnStart!==false){c.startTimer(0,b)}else{c.startTimer(a.interval,b)}}return a},stop:function(a){if(!a.stopped){a.stopped=true;if(a.onStop){a.onStop.call(a.scope||a,a)}}return a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var n=this,g=n.tasks,a=Ext.Date.now(),o=1e+99,l=g.length,d=Ext.GlobalEvents,c,p,j,b,f,h,q;n.timerId=null;n.firing=true;for(j=0;j<l||j<(l=g.length);++j){b=g[j];if(!(h=b.stopped)){c=b.taskRunTime+b.interval;if(c<=a){f=1;if(b.hasOwnProperty("fireIdleEvent")){q=b.fireIdleEvent}else{q=n.fireIdleEvent}try{f=b.run.apply(b.scope||b,b.args||[++b.taskRunCount])}catch(k){try{if(b.onError){f=b.onError.call(b.scope||b,b,k)}}catch(m){}}b.taskRunTime=a;if(f===false||b.taskRunCount===b.repeat){n.stop(b);h=true}else{h=b.stopped;c=a+b.interval}}if(!h&&b.duration&&b.duration<=(a-b.taskStartTime)){n.stop(b);h=true}}if(h){b.pending=false;if(!p){p=g.slice(0,j)}}else{if(p){p.push(b)}if(o>c){o=c}}}if(p){n.tasks=p}n.firing=false;if(n.tasks.length){n.startTimer(o-a,Ext.Date.now())}if(q!==false&&d.hasListeners.idle){d.fireEvent("idle")}},startTimer:function(f,c){var d=this,b=c+f,a=d.timerId;if(a&&d.nextExpires-b>d.interval){clearTimeout(a);a=null}if(!a){if(f<d.interval){f=d.interval}d.timerId=Ext.defer(d.timerFn,f);d.nextExpires=b}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(c){Ext.apply(this,c)},restart:function(c){if(c!==undefined){this.interval=c}this.manager.start(this)},start:function(c){if(this.stopped){this.restart(c)}},stop:function(){this.manager.stop(this)}});a=b.Task.prototype;a.destroy=a.stop}));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(b,a,c){if(c==undefined){if(a==="x"){c=b.getX()}else{if(a==="y"){c=b.getY()}else{if(a==="scrollTop"){c=b.getScroll().top}else{if(a==="scrollLeft"){c=b.getScroll().left}else{if(a==="height"){c=b.getHeight()}else{if(a==="width"){c=b.getWidth()}else{c=b.getStyle(a)}}}}}}}return c},getAttr:function(a,c){var b=this.target;return[[b,this.getElVal(b,a,c)]]},setAttr:function(k){var f=this.target,h=k.length,l,g,b,d,c,a;for(d=0;d<h;d++){l=k[d].attrs;for(g in l){if(l.hasOwnProperty(g)){a=l[g].length;for(c=0;c<a;c++){b=l[g][c];this.setElVal(b[0],g,b[1])}}}}},setElVal:function(b,a,c){if(a==="x"){b.setX(c)}else{if(a==="y"){b.setY(c)}else{if(a==="scrollTop"){b.scrollTo("top",c)}else{if(a==="scrollLeft"){b.scrollTo("left",c)}else{if(a==="width"){b.setWidth(c)}else{if(a==="height"){b.setHeight(c)}else{b.setStyle(a,c)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(n,f){var q={attrs:[],duration:[],easing:[]},m=n.length,g,p,k,l,c,b,h,d,a;for(h=0;h<m;h++){p=n[h];c=p.duration;l=p.easing;p=p.attrs;for(k in p){if(Ext.Array.indexOf(q.attrs,k)==-1){q.attrs.push(k.replace(/[A-Z]/g,function(j){return"-"+j.toLowerCase()}));q.duration.push(c+"ms");q.easing.push(l)}}}g=q.attrs.join(",");c=q.duration.join(",");l=q.easing.join(", ");for(h=0;h<m;h++){p=n[h].attrs;for(k in p){a=p[k].length;for(d=0;d<a;d++){b=p[k][d];b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",f?"":g);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",f?"":c);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",f?"":l);b[0].setStyle(k,b[1]);if(f){b=b[0].dom.offsetWidth}else{b[0].on(Ext.supports.CSS3TransitionEnd,function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},b[0],{single:true})}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-");Ext.fx.target.Element.prototype.constructor.call(this,a)},getAttr:function(a,j){var b=[],h=this.target,g=h.elements,f=g.length,c,d;for(c=0;c<f;c++){d=g[c];if(d){d=h.getElement(d);b.push([d,this.getElVal(d,a,j)])}}return b},setAttr:function(n){var l=this.target,m=n.length,b=l.elements,r=b.length,p,d,q,h,c,g,f,a;for(g=0;g<m;g++){q=n[g].attrs;for(h in q){if(q.hasOwnProperty(h)){a=q[h].length;for(f=0;f<a;f++){p=q[h][f][1];for(d=0;d<r;++d){el=b[d];if(el){el=l.getElement(el);this.setElVal(el,h,p)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(b,a){var c;switch(a){case"rotate":case"rotation":c=b.attr.rotation;return{x:c.x||0,y:c.y||0,degrees:c.degrees||0};case"scale":case"scaling":c=b.attr.scaling;return{x:c.x||1,y:c.y||1,cx:c.cx||0,cy:c.cy||0};case"translate":case"translation":c=b.attr.translation;return{x:c.x||0,y:c.y||0};default:return b.attr[a]}},getAttr:function(a,b){return[[this.target,b!=undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(m){var g=m.length,k=[],b,f,p,r,q,o,n,d,c,l,h,a;for(d=0;d<g;d++){b=m[d].attrs;for(f in b){p=b[f];a=p.length;for(c=0;c<a;c++){q=p[c][0];r=p[c][1];if(f==="translate"||f==="translation"){n={x:r.x,y:r.y}}else{if(f==="rotate"||f==="rotation"){l=r.x;if(isNaN(l)){l=null}h=r.y;if(isNaN(h)){h=null}n={degrees:r.degrees,x:l,y:h}}else{if(f==="scale"||f==="scaling"){l=r.x;if(isNaN(l)){l=null}h=r.y;if(isNaN(h)){h=null}n={x:l,y:h,cx:r.cx,cy:r.cy}}else{if(f==="width"||f==="height"||f==="x"||f==="y"){n=parseFloat(r)}else{n=r}}}}o=Ext.Array.indexOf(k,q);if(o==-1){k.push([q,{}]);o=k.length-1}k[o][1][f]=n}}}g=k.length;for(d=0;d<g;d++){k[d][0].setAttributes(k[d][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(a,h){var b=[],g=[].concat(this.target.items),f=g.length,d,c;for(d=0;d<f;d++){c=g[d];b.push([c,h!=undefined?h:this.getFromPrim(c,a)])}return b}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(s,g,b){var q=this,p=s.length,v,n,c,k,f,m,d,r,u,l,a={},t;for(k=0;k<p;k++){v=s[k].attrs;for(n in v){m=v[n].length;for(f=0;f<m;f++){c=v[n][f];t=a[q.setMethods[n]]||(a[q.setMethods[n]]={});t.target=c[0];t[n]=c[1]}}if(a.setPosition){c=a.setPosition;d=(c.left===undefined)?undefined:parseFloat(c.left);r=(c.top===undefined)?undefined:parseFloat(c.top);c.target.setPosition(d,r)}if(a.setPagePosition){c=a.setPagePosition;c.target.setPagePosition(c.x,c.y)}if(a.setSize){c=a.setSize;u=(c.width===undefined)?c.target.getWidth():parseFloat(c.width);l=(c.height===undefined)?c.target.getHeight():parseFloat(c.height);c.target.el.setSize(u,l);if(b||q.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(c.target.setSize,c.target,[u,l]),single:true})}}if(a.setOpacity){c=a.setOpacity;c.target.el.setStyle("opacity",c.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(a,c){var b=this.targets.get(a);if(b){b.fxDefaults=Ext.apply(b.fxDefaults||{},c)}},stopAnimation:function(b){var d=this,a=d.getFxQueue(b),c=a.length;while(c){a[c-1].end();c--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(b){if(!b){return false}var c=this,a=c.fxQueue[b],d=c.targets.get(b);if(!d){return false}if(!a){c.fxQueue[b]=[];if(d.type!="element"){d.target.on("destroy",function(){c.fxQueue[b]=[]})}}return c.fxQueue[b]},queueFx:function(d){var c=this,f=d.target,a,b;if(!f){return}a=c.getFxQueue(f.getId());b=a.length;if(b){if(d.concurrent){d.paused=false}else{a[b-1].on("afteranimate",function(){d.paused=false})}}else{d.paused=false}d.on("afteranimate",function(){Ext.Array.remove(a,d);if(a.length===0){c.targets.remove(d.target)}if(d.remove){if(f.type=="element"){var g=Ext.get(f.id);if(g){g.destroy()}}}},c,{single:true});a.push(d)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var a=this;a.items=new Ext.util.MixedCollection();a.targetArr={};a.mixins.queue.constructor.call(a);a.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(d){var b=this,c=!b.forceJS&&Ext.supports.Transitions,a;b.useCSS3=c;if(d){if(d.tagName||Ext.isString(d)||d.isFly){d=Ext.get(d);a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.dom){a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.isComposite){a=new Ext.fx.target["CompositeElement"+(c?"CSS":"")](d)}else{if(d.isSprite){a=new Ext.fx.target.Sprite(d)}else{if(d.isCompositeSprite){a=new Ext.fx.target.CompositeSprite(d)}else{if(d.isComponent){a=new Ext.fx.target.Component(d)}else{if(d.isAnimTarget){return d}else{return null}}}}}}}b.targets.add(a);return a}else{return null}},addAnim:function(d){var c=this,b=c.items,a=c.task;b.add(d.id,d);if(!a&&b.length){a=c.task={run:c.runner,interval:c.interval,scope:c};c.taskRunner.start(a)}},removeAnim:function(d){var c=this,b=c.items,a=c.task;b.removeAtKey(d.id);if(a&&!b.length){c.taskRunner.stop(a);delete c.task}},runner:function(){var d=this,b=d.items.getRange(),c=0,a=b.length,f;d.targetArr={};d.timestamp=new Date();for(;c<a;c++){f=b[c];if(f.isReady()){d.startAnim(f)}}for(c=0;c<a;c++){f=b[c];if(f.isRunning()){d.runAnim(f)}}d.applyPendingAttrs()},startAnim:function(a){a.start(this.timestamp)},runAnim:function(f,a){if(!f){return}var d=this,h=d.useCSS3&&f.target.type=="element",b=d.timestamp-f.startTime,c=(b>=f.duration),g,j;if(a){b=f.duration;c=true}g=this.collectTargetData(f,b,h,c);if(h){f.target.setAttr(g.anims[f.id].attributes,true);d.collectTargetData(f,f.duration,h,c);f.paused=true;g=f.target.target;if(f.target.isComposite){g=f.target.target.last()}j={};j[Ext.supports.CSS3TransitionEnd]=f.lastFrame;j.scope=f;j.single=true;g.on(j)}return g},jumpToEnd:function(a){var b=this.runAnim(a,true);this.applyAnimAttrs(b,b.anims[a.id])},collectTargetData:function(c,a,f,g){var b=c.target.getId(),d=this.targetArr[b];if(!d){d=this.targetArr[b]={id:b,el:c.target,anims:{}}}d.anims[c.id]={id:c.id,anim:c,elapsed:a,isLastFrame:g,attributes:[{duration:c.duration,easing:(f&&c.reverse)?c.easingFn.reverse().toCSS3():c.easing,attrs:c.runAnim(a)}]};return d},applyAnimAttrs:function(c,a){var b=a.anim;if(a.attributes&&b.isRunning()){c.el.setAttr(a.attributes,false,a.isLastFrame);if(a.isLastFrame){b.lastFrame()}}},applyPendingAttrs:function(){var f=this.targetArr,g,c,b,d,a;for(c in f){if(f.hasOwnProperty(c)){g=f[c];for(a in g.anims){if(g.anims.hasOwnProperty(a)){b=g.anims[a];d=b.anim;if(b.attributes&&d.isRunning()){g.el.setAttr(b.attributes,false,b.isLastFrame);if(b.isLastFrame){d.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.mixins.observable.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(d,c){return d.pct-c.pct},createTimeline:function(d){var h=this,l=[],j=h.to||{},b=h.duration,m,a,c,g,k,f;for(k in d){if(d.hasOwnProperty(k)&&h.animKeyFramesRE.test(k)){f={attrs:Ext.apply(d[k],j)};if(k=="from"){k=0}else{if(k=="to"){k=100}}f.pct=parseInt(k,10);l.push(f)}}Ext.Array.sort(l,h.sorter);g=l.length;for(c=0;c<g;c++){m=(l[c-1])?b*(l[c-1].pct/100):0;a=b*(l[c].pct/100);h.timeline.push({duration:a-m,attrs:l[c].attrs})}},applyAnimator:function(d){var h=this,j=[],l=h.timeline,g=l.length,b,f,a,k,c;if(h.fireEvent("beforeanimate",h)!==false){for(c=0;c<g;c++){b=l[c];k=b.attrs;f=k.easing||h.easing;a=k.damper||h.damper;delete k.easing;delete k.damper;b=new Ext.fx.Anim({target:d,easing:f,damper:a,duration:b.duration,paused:true,to:k});j.push(b)}h.animations=j;h.target=b.target;for(c=0;c<g-1;c++){b=j[c];b.nextAnim=j[c+1];b.on("afteranimate",function(){this.nextAnim.paused=false});b.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},h)}j[g-1].on("afteranimate",function(){this.lastFrame()},h)}},start:function(d){var f=this,c=f.delay,b=f.delayStart,a;if(c){if(!b){f.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=d;f.running=true;f.animations[f.keyframeStep].paused=false}},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){c.startTime=new Date();c.currentIteration=b;c.keyframeStep=0;c.applyAnimator(c.target);c.animations[c.keyframeStep].paused=false}else{c.currentIteration=0;c.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(p,d,b,o,n,j){var k=3*d,m=3*(o-d)-k,a=1-k-m,h=3*b,l=3*(n-b)-h,q=1-h-l;function g(r){return((a*r+m)*r+k)*r}function c(r,u){var s=f(r,u);return((q*s+l)*s+h)*s}function f(r,z){var y,w,u,s,v,t;for(u=r,t=0;t<8;t++){s=g(u)-r;if(Math.abs(s)<z){return u}v=(3*a*u+2*m)*u+k;if(Math.abs(v)<0.000001){break}u=u-s/v}y=0;w=1;u=r;if(u<y){return y}if(u>w){return w}while(y<w){s=g(u);if(Math.abs(s-r)<z){return u}if(r>s){y=u}else{w=u}u=(w-y)/2+y}return u}return c(p,1/(200*j))},cubicBezier:function(b,f,a,c){var d=function(g){return Ext.fx.CubicBezier.cubicBezierAtTime(g,b,f,a,c,1)};d.toCSS3=function(){return"cubic-bezier("+[b,f,a,c].join(",")+")"};d.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-a,1-c,1-b,1-f)};return d}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));Ext.require("Ext.fx.CubicBezier",function(){var f=Math,h=f.PI,d=f.pow,b=f.sin,g=f.sqrt,a=f.abs,c=1.70158;(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,{singleton:true,linear:Ext.identityFn,ease:function(m){var j=0.07813-m/2,o=-0.25,p=g(0.0066+j*j),s=p-j,l=d(a(s),1/3)*(s<0?-1:1),r=-p-j,k=d(a(r),1/3)*(r<0?-1:1),u=l+k+0.25;return d(1-u,2)*3*u*0.1+(1-u)*3*u*u+u*u*u},easeIn:function(j){return d(j,1.7)},easeOut:function(j){return d(j,0.48)},easeInOut:function(s){var m=0.48-s/1.04,l=g(0.1734+m*m),j=l-m,r=d(a(j),1/3)*(j<0?-1:1),p=-l-m,o=d(a(p),1/3)*(p<0?-1:1),k=r+o+0.5;return(1-k)*3*k*k+k*k*k},backIn:function(j){return j*j*((c+1)*j-c)},backOut:function(j){j=j-1;return j*j*((c+1)*j+c)+1},elasticIn:function(l){if(l===0||l===1){return l}var k=0.3,j=k/4;return d(2,-10*l)*b((l-j)*(2*h)/k)+1},elasticOut:function(j){return 1-Ext.fx.Easing.elasticIn(1-j)},bounceIn:function(j){return 1-Ext.fx.Easing.bounceOut(1-j)},bounceOut:function(o){var k=7.5625,m=2.75,j;if(o<(1/m)){j=k*o*o}else{if(o<(2/m)){o-=(1.5/m);j=k*o*o+0.75}else{if(o<(2.5/m)){o-=(2.25/m);j=k*o*o+0.9375}else{o-=(2.625/m);j=k*o*o+0.984375}}}return j}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(){var k=Ext.fx.Easing.self,j=k.prototype;k.addMembers({"back-in":j.backIn,"back-out":j.backOut,"ease-in":j.easeIn,"ease-out":j.easeOut,"elastic-in":j.elasticIn,"elastic-out":j.elasticOut,"bounce-in":j.bounceIn,"bounce-out":j.bounceOut,"ease-in-out":j.easeInOut})}))});(Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){c=b.pathClone(a)}if(!c.length){String(a).replace(b.pathCommandRE,function(g,f,k){var j=[],h=f.toLowerCase();k.replace(b.pathValuesRE,function(m,l){l&&j.push(+l)});if(h=="m"&&j.length>2){c.push([f].concat(Ext.Array.splice(j,0,2)));h="l";f=(f=="m")?"l":"L"}while(j.length>=d[h]){c.push([f].concat(Ext.Array.splice(j,0,d[h])));if(!d[h]){break}}})}c.toString=b.path2string;return c},pathClone:function(g){var c=[],a,f,b,d;if(!this.is(g,"array")||!this.is(g&&g[0],"array")){g=this.parsePathString(g)}for(b=0,d=g.length;b<d;b++){c[b]=[];for(a=0,f=g[b].length;a<f;a++){c[b][a]=g[b][a]}}c.toString=this.path2string;return c},pathToAbsolute:function(c){if(!this.is(c,"array")||!this.is(c&&c[0],"array")){c=this.parsePathString(c)}var k=[],m=0,l=0,o=0,n=0,g=0,h=c.length,b,d,f,a;if(h&&c[0][0]=="M"){m=+c[0][1];l=+c[0][2];o=m;n=l;g++;k[0]=["M",m,l]}for(;g<h;g++){b=k[g]=[];d=c[g];if(d[0]!=d[0].toUpperCase()){b[0]=d[0].toUpperCase();switch(b[0]){case"A":b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=+(d[6]+m);b[7]=+(d[7]+l);break;case"V":b[1]=+d[1]+l;break;case"H":b[1]=+d[1]+m;break;case"M":o=+d[1]+m;n=+d[2]+l;default:f=1;a=d.length;for(;f<a;f++){b[f]=+d[f]+((f%2)?m:l)}}}else{f=0;a=d.length;for(;f<a;f++){k[g][f]=d[f]}}switch(b[0]){case"Z":m=o;l=n;break;case"H":m=b[1];break;case"V":l=b[1];break;case"M":d=k[g];a=d.length;o=d[a-2];n=d[a-1];default:d=k[g];a=d.length;m=d[a-2];l=d[a-1]}}k.toString=this.path2string;return k},interpolatePaths:function(r,l){var j=this,d=j.pathToAbsolute(r),m=j.pathToAbsolute(l),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(p,s){if(p[s].length>7){p[s].shift();var t=p[s];while(t.length){Ext.Array.splice(p,s++,0,["C"].concat(Ext.Array.splice(t,0,6)))}Ext.Array.erase(p,s,1);o=Math.max(d.length,m.length||0)}},c=function(v,u,s,p,t){if(v&&u&&v[t][0]=="M"&&u[t][0]!="M"){Ext.Array.splice(u,t,0,["M",p.x,p.y]);s.bx=0;s.by=0;s.x=v[t][1];s.y=v[t][2];o=Math.max(d.length,m.length||0)}},h,o,g,q,f,k;for(h=0,o=Math.max(d.length,m.length||0);h<o;h++){d[h]=j.command2curve(d[h],n);b(d,h);(m[h]=j.command2curve(m[h],a));b(m,h);c(d,m,n,a,h);c(m,d,a,n,h);g=d[h];q=m[h];f=g.length;k=q.length;n.x=g[f-2];n.y=g[f-1];n.bx=parseFloat(g[f-4])||n.x;n.by=parseFloat(g[f-3])||n.y;a.bx=(parseFloat(q[k-4])||a.x);a.by=(parseFloat(q[k-3])||a.y);a.x=q[k-2];a.y=q[k-1]}return[d,m]},command2curve:function(c,b){var a=this;if(!c){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(c[0]!="T"&&c[0]!="Q"){b.qx=b.qy=null}switch(c[0]){case"M":b.X=c[1];b.Y=c[2];break;case"A":c=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(c.slice(1))));break;case"S":c=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(c.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));c=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,c[1],c[2]));break;case"Q":b.qx=c[1];b.qy=c[2];c=["C"].concat(a.quadratic2curve(b.x,b.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"].concat(b.x,b.y,c[1],c[2],c[1],c[2]);break;case"H":c=["C"].concat(b.x,b.y,c[1],b.y,c[1],b.y);break;case"V":c=["C"].concat(b.x,b.y,b.x,c[1],b.x,c[1]);break;case"Z":c=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return c},quadratic2curve:function(b,d,h,f,a,c){var g=1/3,j=2/3;return[g*b+j*h,g*d+j*f,g*a+j*h,g*c+j*f,a,c]},rotate:function(b,h,a){var d=Math.cos(a),c=Math.sin(a),g=b*d-h*c,f=b*c+h*d;return{x:g,y:f}},arc2curve:function(s,af,H,F,z,n,g,r,ae,A){var v=this,d=Math.PI,w=v.radian,E=d*120/180,b=w*(+z||0),M=[],J=Math,T=J.cos,a=J.sin,V=J.sqrt,u=J.abs,o=J.asin,I,O,N,aa,c,R,U,C,B,m,l,q,j,ad,f,ac,P,S,Q,ab,Z,Y,W,L,X,K,D,G,p;if(!A){I=v.rotate(s,af,-b);s=I.x;af=I.y;I=v.rotate(r,ae,-b);r=I.x;ae=I.y;O=(s-r)/2;N=(af-ae)/2;aa=(O*O)/(H*H)+(N*N)/(F*F);if(aa>1){aa=V(aa);H=aa*H;F=aa*F}c=H*H;R=F*F;U=(n==g?-1:1)*V(u((c*R-c*N*N-R*O*O)/(c*N*N+R*O*O)));C=U*H*N/F+(s+r)/2;B=U*-F*O/H+(af+ae)/2;m=o(((af-B)/F).toFixed(7));l=o(((ae-B)/F).toFixed(7));m=s<C?d-m:m;l=r<C?d-l:l;if(m<0){m=d*2+m}if(l<0){l=d*2+l}if(g&&m>l){m=m-d*2}if(!g&&l>m){l=l-d*2}}else{m=A[0];l=A[1];C=A[2];B=A[3]}q=l-m;if(u(q)>E){D=l;G=r;p=ae;l=m+E*(g&&l>m?1:-1);r=C+H*T(l);ae=B+F*a(l);M=v.arc2curve(r,ae,H,F,z,0,g,G,p,[l,D,C,B])}q=l-m;j=T(m);ad=a(m);f=T(l);ac=a(l);P=J.tan(q/4);S=4/3*H*P;Q=4/3*F*P;ab=[s,af];Z=[s+S*ad,af-Q*j];Y=[r+S*ac,ae-Q*f];W=[r,ae];Z[0]=2*ab[0]-Z[0];Z[1]=2*ab[1]-Z[1];if(A){return[Z,Y,W].concat(M)}else{M=[Z,Y,W].concat(M).join().split(",");L=[];K=M.length;for(X=0;X<K;X++){L[X]=X%2?v.rotate(M[X-1],M[X],b).y:v.rotate(M[X],M[X+1],b).x}return L}}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(k,c,a,g,j){a=(typeof a=="number")?a:1;var h=this.unitRE,d=h.exec(k),b,f;if(d){k=d[1];f=d[2];if(!this.scrollRE.test(j)&&!f&&this.pixelDefaultsRE.test(j)){f="px"}}k=+k||0;d=h.exec(c);if(d){c=d[1];f=d[2]||f}c=+c||0;b=(g!=null)?g:k;return{from:k,delta:(c-b)*a,units:f}},get:function(o,b,a,n,k){var m=o.length,d=[],f,h,l,c,g;for(f=0;f<m;f++){if(n){h=n[f][1].from}if(Ext.isArray(o[f][1])&&Ext.isArray(b)){l=[];c=0;g=o[f][1].length;for(;c<g;c++){l.push(this.computeDelta(o[f][1][c],b[c],a,h,k))}d.push([o[f][0],l])}else{d.push([o[f][0],this.computeDelta(o[f][1],b,a,h,k)])}}return d},set:function(l,g){var h=l.length,c=[],d,a,k,f,b;for(d=0;d<h;d++){a=l[d][1];if(Ext.isArray(a)){k=[];b=0;f=a.length;for(;b<f;b++){k.push(a[b].from+a[b].delta*g+(a[b].units||0))}c.push([l[d][0],k])}else{c.push([l[d][0],a.from+a.delta*g+(a.units||0)])}}return c}},stringHandler:{computeDelta:function(f,b,d,c,a){return{from:f,delta:b}},get:function(o,b,a,n,k){var m=o.length,d=[],f,h,l,c,g;for(f=0;f<m;f++){d.push([o[f][0],this.computeDelta(o[f][1],b,a,h,k)])}return d},set:function(l,g){var h=l.length,c=[],d,a,k,f,b;for(d=0;d<h;d++){a=l[d][1];c.push([l[d][0],a.delta])}return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(f,a){a=(typeof a=="number")?a:1;var g=false,c=[this.hexRE,this.rgbRE,this.hex3RE],d=c.length,j,b,k,h;for(h=0;h<d;h++){k=c[h];b=(h%2===0)?16:10;j=k.exec(f);if(j&&j.length===4){if(h===2){j[1]+=j[1];j[2]+=j[2];j[3]+=j[3]}g={red:parseInt(j[1],b),green:parseInt(j[2],b),blue:parseInt(j[3],b)};break}}return g||f},computeDelta:function(h,a,f,c){h=this.parseColor(h);a=this.parseColor(a,f);var g=c?c:h,b=typeof g,d=typeof a;if(b=="string"||b=="undefined"||d=="string"||d=="undefined"){return a||g}return{from:h,delta:{red:Math.round((a.red-g.red)*f),green:Math.round((a.green-g.green)*f),blue:Math.round((a.blue-g.blue)*f)}}},get:function(j,a,g,d){var h=j.length,c=[],f,b;for(f=0;f<h;f++){if(d){b=d[f][1].from}c.push([j[f][0],this.computeDelta(j[f][1],a,g,b)])}return c},set:function(k,f){var g=k.length,c=[],d,b,a,h,j;for(d=0;d<g;d++){b=k[d][1];if(b){h=b.from;j=b.delta;b=(typeof b=="object"&&"red" in b)?"rgb("+b.red+", "+b.green+", "+b.blue+")":b;b=(typeof b=="object"&&b.length)?b[0]:b;if(typeof b=="undefined"){return[]}a=typeof b=="string"?b:"rgb("+[(h.red+Math.round(j.red*f))%256,(h.green+Math.round(j.green*f))%256,(h.blue+Math.round(j.blue*f))%256].join(",")+")";c.push([k[d][0],a])}}return c}},object:{interpolate:function(d,b){b=(typeof b=="number")?b:1;var a={},c;for(c in d){a[c]=parseFloat(d[c])*b}return a},computeDelta:function(h,a,c,b){h=this.interpolate(h);a=this.interpolate(a,c);var g=b?b:h,f={},d;for(d in a){f[d]=a[d]-g[d]}return{from:h,delta:f}},get:function(j,a,g,d){var h=j.length,c=[],f,b;for(f=0;f<h;f++){if(d){b=d[f][1].from}c.push([j[f][0],this.computeDelta(j[f][1],a,g,b)])}return c},set:function(l,g){var h=l.length,c=[],f={},d,j,k,b,a;for(d=0;d<h;d++){b=l[d][1];j=b.from;k=b.delta;for(a in j){f[a]=j[a]+k[a]*g}c.push([l[d][0],f])}return c}},path:{computeDelta:function(f,a,c,b){c=(typeof c=="number")?c:1;var d;f=+f||0;a=+a||0;d=(b!=null)?b:f;return{from:f,delta:(a-d)*c}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.fx.DrawPath.parsePathString(a)}return a},get:function(b,l,a,q){var c=this.forcePath(l),n=[],s=b.length,d,h,o,g,p,m,f,t,r;for(o=0;o<s;o++){r=this.forcePath(b[o][1]);g=Ext.fx.DrawPath.interpolatePaths(r,c);r=g[0];c=g[1];d=r.length;t=[];for(m=0;m<d;m++){g=[r[m][0]];h=r[m].length;for(f=1;f<h;f++){p=q&&q[0][1][m][f].from;g.push(this.computeDelta(r[m][f],c[m][f],a,p))}t.push(g)}n.push([b[o][0],t])}return n},set:function(p,n){var o=p.length,f=[],h,g,d,l,m,c,a,b;for(h=0;h<o;h++){c=p[h][1];l=[];a=c.length;for(g=0;g<a;g++){m=[c[g][0]];b=c[g].length;for(d=1;d<b;d++){m.push(c[g][d].from+c[g][d].delta*n)}l.push(m.join(","))}f.push([p[h][0],l.join(",")])}return f}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var b=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],c=b.length,a=0,d;for(;a<c;a++){d=b[a];this[d]=this.color}b=["cursor"];c=b.length;a=0;for(;a<c;a++){d=b[a];this[d]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(a){var b=this,c;a=a||{};if(a.keyframes){return new Ext.fx.Animator(a)}Ext.apply(b,a);if(b.from===undefined){b.from={}}b.propHandlers={};b.config=a;b.target=Ext.fx.Manager.createTarget(b.target);b.easingFn=Ext.fx.Easing[b.easing];b.target.dynamic=b.dynamic;if(!b.easingFn){b.easingFn=String(b.easing).match(b.bezierRE);if(b.easingFn&&b.easingFn.length==5){c=b.easingFn;b.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}b.id=Ext.id(null,"ext-anim-");b.mixins.observable.constructor.call(b);Ext.fx.Manager.addAnim(b);if(a.autoEnd){b.running=true;b.jumpToEnd()}},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var f=this,h=f.from,j=f.to,g=f.initialFrom||{},c={},a,b,k,d;for(d in j){if(j.hasOwnProperty(d)){a=f.target.getAttr(d,h[d]);b=j[d];if(!Ext.fx.PropertyHandler[d]){if(Ext.isObject(b)){k=f.propHandlers[d]=Ext.fx.PropertyHandler.object}else{k=f.propHandlers[d]=Ext.fx.PropertyHandler.defaultHandler}}else{k=f.propHandlers[d]=Ext.fx.PropertyHandler[d]}c[d]=k.get(a,b,f.damper,g[d],d)}}f.currentAttrs=c},start:function(d){var f=this,c=f.delay,b=f.delayStart,a;if(c){if(!b){f.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=d;if(!f.paused&&!f.currentAttrs){f.initAttrs()}f.running=true;f.frameCount=0}},jumpToEnd:function(){var a=this;if(!a.endWasCalled){if(!a.currentAttrs){a.initAttrs()}Ext.fx.Manager.jumpToEnd(a);a.end()}},runAnim:function(m){var j=this,l=j.currentAttrs,d=j.duration,c=j.easingFn,b=j.propHandlers,g={},h,k,f,a;if(m>=d){m=d;a=true}if(j.reverse){m=d-m}for(f in l){if(l.hasOwnProperty(f)){k=l[f];h=a?1:c(m/d);g[f]=b[f].set(k,h)}}j.frameCount++;return g},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){if(c.alternate){c.reverse=!c.reverse}c.startTime=new Date();c.currentIteration=b;c.paused=false}else{c.currentIteration=0;c.end();c.fireEvent("lastframe",c,c.startTime)}},endWasCalled:0,end:function(){var a=this;if(a.endWasCalled++){return}a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime);Ext.callback(a.callback,a.scope,[a,a.startTime]);if(a.remove){a.target.destroy()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:true,animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(new Ext.fx.Anim(b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},getAnimationProps:function(){var b=this,a=b.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0));(Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:true,interval:30000,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a);a.resume()},collect:function(){var f=this,b=Ext.cache,a,g,d,c;if(!Ext.enableGarbageCollector){f.pause()}else{for(a in b){if(!b.hasOwnProperty(a)){continue}d=b[a];if(d.skipGarbageCollection){continue}g=d.dom;if(Ext.isGarbage(g)){d.clearListeners();delete b[a]}}if(Ext.isIE9m){c={};for(a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}b=Ext.cache=c}f.lastTime=Ext.now()}},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;if(b&&(Ext.now()-b>a.interval)){a.collect()}a.timerId=Ext.interval(a.collect,a.interval)}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0));(Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:true,constructor:function(a){this.dom=a;this.el=this},attach:function(b){var a=this;if(!b){return a.detach()}a.dom=b;if(!Ext.cache[b.id]){a.getData().isSynchronized=false}return a},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(a){var b={};a.cache=b;Ext.fly=function(h,d){var g=null,f=Ext.fly,c;d=d||(f.caller&&f.caller.$name)||"_global";h=Ext.getDom(h);if(h){c=h.nodeType;if(a.prototype.validNodeTypes[c]||(!c&&(h.window===h))){g=Ext.cache[h.id];if(!g||g.dom!==h){g=b[d]||(b[d]=new a());g.dom=h;g.isSynchronized=false}}}return g}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:true,isLite:true,statics:{importElementMethods:function(){var a=Ext.dom.Element,b=this.prototype;Ext.Object.each(a.prototype,function(c,d){if(typeof d==="function"&&!b[c]){b[c]=function(){return this.invoke(c,arguments)}}})}},constructor:function(b,a){if(a){this.elements=b||[]}else{this.elements=[];this.add(b)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(c,a){var f=this.elements,b,d;if(!c){return this}if(typeof c=="string"){c=Ext.fly(a||document).query(c)}else{if(c.isComposite){c=c.elements}else{if(!Ext.isIterable(c)){c=[c]}}}for(b=0,d=c.length;b<d;++b){f.push(this.transformElement(c[b]))}return this},invoke:function(f,b){var h=this,j=h.elements,g=j.length,a,d,c;if(c!==0){a=(h.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(c=0;c<g;c++){d=j[c];if(d){a[f].apply(h.getElement(d),b)}}}return h},item:function(b){var c=this.elements[b],a=null;if(c){a=this.getElement(c)}return a},slice:function(){return this.elements.slice.apply(this.elements,arguments)},each:function(f,d){var g=this,c=g.elements,a=c.length,b,h;for(b=0;b<a;b++){h=c[b];if(h){h=this.getElement(h);if(f.call(d||h,h,g,b)===false){break}}}return g},fill:function(a){var b=this;b.elements=[];b.add(a);return b},insert:function(b,a){Ext.Array.insert(this.elements,b,a)},filter:function(b){var h=this,c=h.elements,g=c.length,d=[],f=0,j=typeof b=="function",k,a;for(;f<g;f++){a=c[f];k=false;if(a){a=h.getElement(a);if(j){k=b.call(a,a,h,f)!==false}else{k=a.is(b)}if(k){d.push(h.transformElement(a))}}}h.elements=d;return h},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(f,c,a){var b=!isNaN(f)?f:this.indexOf(f),g;if(b>-1){c=Ext.getDom(c);if(a){g=this.elements[b];g.parentNode.insertBefore(c,g);Ext.removeNode(g)}Ext.Array.splice(this.elements,b,1,c)}return this},clear:function(d){var c=this,b=c.elements,a=b.length-1;if(d){for(;a>=0;a--){Ext.removeNode(b[a])}}this.elements=[]},addElements:function(d,b){if(!d){return this}if(typeof d==="string"){d=Ext.dom.Element.selectorFunction(d,b)}var c=this.elements,a=d.length,f;for(f=0;f<a;f++){c.push(Ext.get(d[f]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(f,j){f=[].concat(f);var d=this,g=d.elements,c=f.length,h,b,a;for(a=0;a<c;a++){h=f[a];if((b=(g[h]||g[h=d.indexOf(h)]))){if(j){if(b.dom){b.destroy()}else{Ext.removeNode(b)}}Ext.Array.erase(g,h,1)}}return d},destroy:function(){return this.invoke("destroy",arguments)}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(b){var a=b.prototype;b.importElementMethods();a.on=a.addListener}));Ext.define("Ext.overrides.dom.Element",(function(){var Element,WIN=window,DOC=document,HIDDEN="hidden",ISCLIPPED="isClipped",OVERFLOW="overflow",OVERFLOWX="overflow-x",OVERFLOWY="overflow-y",ORIGINALCLIP="originalClip",HEIGHT="height",WIDTH="width",VISIBILITY="visibility",DISPLAY="display",NONE="none",HIDDEN="hidden",OFFSETS="offsets",ORIGINALDISPLAY="originalDisplay",VISMODE="visibilityMode",ISVISIBLE="isVisible",OFFSETCLASS="x-hidden-offsets",boxMarkup=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),tabbableSelector="a[href],button,iframe,input,select,textarea,[tabindex]",tabbableRe=/^BUTTON|IFRAME|INPUT|SELECT|TEXTAREA$/,tabbableSavedFlagAttribute="data-tabindexsaved",tabbableSavedAttribute="data-savedtabindex",scriptTagRe=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,replaceScriptTagRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,srcRe=/\ssrc=([\'\"])(.*?)\1/i,focusRe=/^a|button|embed|iframe|input|object|select|textarea$/i,nonSpaceRe=/\S/,typeRe=/\stype=([\'\"])(.*?)\1/i,msRe=/^-ms-/,camelRe=/(-[a-z])/gi,camelReplaceFn=function(m,a){return a.charAt(1).toUpperCase()},XMASKED="x-masked",XMASKEDRELATIVE="x-masked-relative",EXTELMASKMSG="x-mask-msg",mouseEnterLeaveRe=/^(?:mouseenter|mouseleave)$/,bodyRe=/^body/i,scrollFly,propertyCache={},getDisplay=function(el){var data=el.getData(),display=data[ORIGINALDISPLAY];if(display===undefined){data[ORIGINALDISPLAY]=display=""}return display},getVisMode=function(el){var data=el.getData(),visMode=data[VISMODE];if(visMode===undefined){data[VISMODE]=visMode=Element.VISIBILITY}return visMode},garbageBin,emptyRange=DOC.createRange?DOC.createRange():null;return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:false,_init:function(E){Element=E},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",normalize:function(prop){if(prop==="float"){prop=Ext.supports.Float?"cssFloat":"styleFloat"}return propertyCache[prop]||(propertyCache[prop]=prop.replace(msRe,"ms-").replace(camelRe,camelReplaceFn))},getViewportHeight:function(){return Ext.isIE9m?DOC.documentElement.clientHeight:WIN.innerHeight},getViewportWidth:function(){return(!Ext.isStrict&&!Ext.isOpera)?document.body.clientWidth:Ext.isIE9m?DOC.documentElement.clientWidth:WIN.innerWidth}},addClsOnClick:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.on("mousedown",function(){if(hasTest&&testFn.call(scope||me,me)===false){return false}Ext.fly(dom).addCls(className);var d=Ext.getDoc(),fn=function(){Ext.fly(dom).removeCls(className);d.removeListener("mouseup",fn)};d.on("mouseup",fn)});return me},addClsOnFocus:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.on("focus",function(){if(hasTest&&testFn.call(scope||me,me)===false){return false}Ext.fly(dom).addCls(className)});me.on("blur",function(){Ext.fly(dom).removeCls(className)});return me},addClsOnOver:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.hover(function(){if(hasTest&&testFn.call(scope||me,me)===false){return}Ext.fly(dom).addCls(className)},function(){Ext.fly(dom).removeCls(className)});return me},addKeyListener:function(key,fn,scope){var config;if(typeof key!=="object"||Ext.isArray(key)){config={target:this,key:key,fn:fn,scope:scope}}else{config={target:this,key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:scope}}return new Ext.util.KeyMap(config)},addKeyMap:function(config){return new Ext.util.KeyMap(Ext.apply({target:this},config))},anchorAnimX:function(anchor){var xName=(anchor==="l")?"right":"left";this.dom.style[xName]="0px"},anim:function(config){if(!Ext.isObject(config)){return(config)?{}:false}var me=this,duration=config.duration||Ext.fx.Anim.prototype.duration,easing=config.easing||"ease",animConfig;if(config.stopAnimation){me.stopAnimation()}Ext.applyIf(config,Ext.fx.Manager.getFxDefaults(me.id));Ext.fx.Manager.setFxDefaults(me.id,{delay:0});animConfig={target:me.dom,remove:config.remove,alternate:config.alternate||false,duration:duration,easing:easing,callback:config.callback,listeners:config.listeners,iterations:config.iterations||1,scope:config.scope,block:config.block,concurrent:config.concurrent,delay:config.delay||0,paused:true,keyframes:config.keyframes,from:config.from||{},to:Ext.apply({},config)};Ext.apply(animConfig.to,config.to);delete animConfig.to.to;delete animConfig.to.from;delete animConfig.to.remove;delete animConfig.to.alternate;delete animConfig.to.keyframes;delete animConfig.to.iterations;delete animConfig.to.listeners;delete animConfig.to.target;delete animConfig.to.paused;delete animConfig.to.callback;delete animConfig.to.scope;delete animConfig.to.duration;delete animConfig.to.easing;delete animConfig.to.concurrent;delete animConfig.to.block;delete animConfig.to.stopAnimation;delete animConfig.to.delay;return animConfig},animate:function(config){var me=this,animId=me.dom.id||Ext.id(me.dom),listeners,anim,end;if(!Ext.fx.Manager.hasFxBlock(animId)){if(config.listeners){listeners=config.listeners;delete config.listeners}if(config.internalListeners){config.listeners=config.internalListeners;delete config.internalListeners}end=config.autoEnd;delete config.autoEnd;anim=new Ext.fx.Anim(me.anim(config));if(listeners){anim.on(listeners)}Ext.fx.Manager.queueFx(anim);if(end){anim.jumpToEnd()}}return me},boxWrap:function(cls){cls=cls||"x-box";var el=Ext.get(this.insertHtml("beforeBegin","<div class='"+cls+"' role='presentation'>"+Ext.String.format(boxMarkup,cls)+"</div>"));el.selectNode("."+cls+"-mc").appendChild(this.dom);return el},cacheScrollValues:function(){var me=this,scrollValues=[],scrolledDescendants=[],descendants,descendant,i,len;scrollFly=scrollFly||new Ext.dom.Fly();descendants=me.query("*");for(i=0,len=descendants.length;i<len;i++){descendant=descendants[i];if(descendant.scrollTop>0||descendant.scrollLeft!==0){scrolledDescendants.push(descendant);scrollValues.push(scrollFly.attach(descendant).getScroll())}}return function(){var scroll,i,len;for(i=0,len=scrolledDescendants.length;i<len;i++){scroll=scrollValues[i];scrollFly.attach(scrolledDescendants[i]);scrollFly.setScrollLeft(scroll.left);scrollFly.setScrollTop(scroll.top)}}},clean:function(forceReclean){var me=this,dom=me.dom,data=me.getData(),n=dom.firstChild,ni=-1,nx;if(data.isCleaned&&forceReclean!==true){return me}while(n){nx=n.nextSibling;if(n.nodeType===3){if(!(nonSpaceRe.test(n.nodeValue))){dom.removeChild(n)}else{if(nx&&nx.nodeType===3){n.appendData(Ext.String.trim(nx.data));dom.removeChild(nx);nx=n.nextSibling;n.nodeIndex=++ni}}}else{Ext.fly(n,"_clean").clean();n.nodeIndex=++ni}n=nx}data.isCleaned=true;return me},empty:emptyRange?function(){var dom=this.dom;if(dom.firstChild){emptyRange.setStartBefore(dom.firstChild);emptyRange.setEndAfter(dom.lastChild);emptyRange.deleteContents()}}:function(){var dom=this.dom;while(dom.lastChild){dom.removeChild(dom.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(value){value=value||"";return this.setStyle({left:value,right:value,top:value,bottom:value,"z-index":"",position:"static"})},createProxy:function(config,renderTo,matchBox){config=(typeof config==="object")?config:{tag:"div",role:"presentation",cls:config};var me=this,proxy=renderTo?Ext.DomHelper.append(renderTo,config,true):Ext.DomHelper.insertBefore(me.dom,config,true);proxy.setVisibilityMode(Element.DISPLAY);proxy.hide();if(matchBox&&me.setBox&&me.getBox){proxy.setBox(me.getBox())}return proxy},clearOpacity:function(){return this.setOpacity("")},clip:function(){var me=this,data=me.getData(),style;if(!data[ISCLIPPED]){data[ISCLIPPED]=true;style=me.getStyle([OVERFLOW,OVERFLOWX,OVERFLOWY]);data[ORIGINALCLIP]={o:style[OVERFLOW],x:style[OVERFLOWX],y:style[OVERFLOWY]};me.setStyle(OVERFLOW,HIDDEN);me.setStyle(OVERFLOWX,HIDDEN);me.setStyle(OVERFLOWY,HIDDEN)}return me},constrainScrollLeft:function(left){var dom=this.dom;return Math.max(Math.min(left,dom.scrollWidth-dom.clientWidth),0)},constrainScrollTop:function(top){var dom=this.dom;return Math.max(Math.min(top,dom.scrollHeight-dom.clientHeight),0)},destroy:function(){var me=this,dom=me.dom;if(dom&&me.isAnimate){me.stopAnimation()}arguments.callee.$previous.call(this);if(dom&&Ext.isIE8){garbageBin=garbageBin||DOC.createElement("div");garbageBin.appendChild(dom);garbageBin.innerHTML=""}},doScrollIntoView:function(container,hscroll,animate,highlight,getScrollX,scrollTo){scrollFly=scrollFly||new Ext.dom.Fly();var me=this,dom=me.dom,scrollX=scrollFly.attach(container)[getScrollX](),scrollY=container.scrollTop,position=me.getScrollIntoViewXY(container,scrollX,scrollY),newScrollX=position.x,newScrollY=position.y;if(highlight){if(animate){animate=Ext.apply({listeners:{afteranimate:function(){scrollFly.attach(dom).highlight()}}},animate)}else{scrollFly.attach(dom).highlight()}}if(newScrollY!==scrollY){scrollFly.attach(container).scrollTo("top",newScrollY,animate)}if(hscroll!==false&&(newScrollX!==scrollX)){scrollFly.attach(container)[scrollTo]("left",newScrollX,animate)}return me},enableDisplayMode:function(display){var me=this;me.setVisibilityMode(Element.DISPLAY);if(display!==undefined){me.getData()[ORIGINALDISPLAY]=display}return me},fadeIn:function(o){var me=this,dom=me.dom;me.animate(Ext.apply({},o,{opacity:1,internalListeners:{beforeanimate:function(anim){var el=Ext.fly(dom,"_anim");if(el.isStyle("display","none")){el.setDisplayed("")}else{el.show()}}}}));return this},fadeOut:function(o){var me=this,dom=me.dom;o=Ext.apply({opacity:0,internalListeners:{afteranimate:function(anim){if(dom&&anim.to.opacity===0){var el=Ext.fly(dom,"_anim");if(o.useDisplay){el.setDisplayed(false)}else{el.hide()}}}}},o);me.animate(o);return me},fixDisplay:function(){var me=this;if(me.isStyle(DISPLAY,NONE)){me.setStyle(VISIBILITY,HIDDEN);me.setStyle(DISPLAY,getDisplay(me));if(me.isStyle(DISPLAY,NONE)){me.setStyle(DISPLAY,"block")}}},frame:function(color,count,obj){var me=this,dom=me.dom,beforeAnim;color=color||"#C3DAF9";count=count||1;obj=obj||{};beforeAnim=function(){var el=Ext.fly(dom,"_anim"),animScope=this,box,proxy,proxyAnim;el.show();box=el.getBox();proxy=Ext.getBody().createChild({role:"presentation",id:el.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+color}});proxyAnim=new Ext.fx.Anim({target:proxy,duration:obj.duration||1000,iterations:count,from:{top:box.y,left:box.x,borderWidth:0,opacity:1,height:box.height,width:box.width},to:{top:box.y-20,left:box.x-20,borderWidth:10,opacity:0,height:box.height+40,width:box.width+40}});proxyAnim.on("afteranimate",function(){proxy.destroy();animScope.end()})};me.animate({duration:(Math.max(obj.duration,500)*2)||2000,listeners:{beforeanimate:{fn:beforeAnim}},callback:obj.callback,scope:obj.scope});return me},getColor:function(attr,defaultValue,prefix){var v=this.getStyle(attr),color=prefix||prefix===""?prefix:"#",h,len,i=0;if(!v||(/transparent|inherit/.test(v))){return defaultValue}if(/^r/.test(v)){v=v.slice(4,v.length-1).split(",");len=v.length;for(;i<len;i++){h=parseInt(v[i],10);color+=(h<16?"0":"")+h.toString(16)}}else{v=v.replace("#","");color+=v.length===3?v.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):v}return(color.length>5?color.toLowerCase():defaultValue)},getLoader:function(){var me=this,data=me.getData(),loader=data.loader;if(!loader){data.loader=loader=new Ext.ElementLoader({target:me})}return loader},getPositioning:function(autoPx){var styles=this.getStyle(["left","top","position","z-index"]),dom=this.dom;if(autoPx){if(styles.left==="auto"){styles.left=dom.offsetLeft+"px"}if(styles.top==="auto"){styles.top=dom.offsetTop+"px"}}return styles},getScroll:function(){var me=this,dom=me.dom,docElement=DOC.documentElement,left,top,body=document.body;if(dom===DOC||dom===body){left=docElement.scrollLeft||(body?body.scrollLeft:0);top=docElement.scrollTop||(body?body.scrollTop:0)}else{left=dom.scrollLeft;top=dom.scrollTop}return{left:left,top:top}},getScrollIntoViewXY:function(container,scrollX,scrollY){var me=this,dom=me.dom,ct=Ext.getDom(container),offsets=me.getOffsetsTo(ct),width=dom.offsetWidth,height=dom.offsetHeight,left=offsets[0]+scrollX,top=offsets[1]+scrollY,bottom=top+height,right=left+width,ctClientHeight=ct.clientHeight,ctClientWidth=ct.clientWidth,ctBottom=scrollY+ctClientHeight,ctRight=scrollX+ctClientWidth,scrollX,scrollY;if(height>ctClientHeight||top<scrollY){scrollY=top}else{if(bottom>ctBottom){scrollY=bottom-ctClientHeight}}if(width>ctClientWidth||left<scrollX){scrollX=left}else{if(right>ctRight){scrollX=right-ctClientWidth}}return{x:scrollX,y:scrollY}},getScrollLeft:function(){var dom=this.dom;if(dom===DOC||dom===document.body){return this.getScroll().left}else{return dom.scrollLeft}},getScrollTop:function(){var dom=this.dom;if(dom===DOC||dom===document.body){return this.getScroll().top}else{return dom.scrollTop}},getXY:function(){var xy=arguments.callee.$previous.call(this),scroll=Ext.getDoc().getScroll();xy[0]+=scroll.left;xy[1]+=scroll.top;return xy},ghost:function(anchor,obj){var me=this,dom=me.dom,beforeAnim;anchor=anchor||"b";beforeAnim=function(){var el=Ext.fly(dom,"_anim"),width=el.getWidth(),height=el.getHeight(),xy=el.getXY(),position=el.getPositioning(),to={opacity:0};switch(anchor){case"t":to.y=xy[1]-height;break;case"l":to.x=xy[0]-width;break;case"r":to.x=xy[0]+width;break;case"b":to.y=xy[1]+height;break;case"tl":to.x=xy[0]-width;to.y=xy[1]-height;break;case"bl":to.x=xy[0]-width;to.y=xy[1]+height;break;case"br":to.x=xy[0]+width;to.y=xy[1]+height;break;case"tr":to.x=xy[0]+width;to.y=xy[1]-height;break}this.to=to;this.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");if(el){el.hide();el.clearOpacity();el.setPositioning(position)}})};me.animate(Ext.applyIf(obj||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:beforeAnim}}));return me},hide:function(animate){if(typeof animate==="string"){this.setVisible(false,animate);return this}this.setVisible(false,this.anim(animate));return this},highlight:function(color,o){var me=this,dom=me.dom,from={},restore,to,attr,lns,event,fn;o=o||{};lns=o.listeners||{};attr=o.attr||"backgroundColor";from[attr]=color||"ffff9c";if(!o.to){to={};to[attr]=o.endColor||me.getColor(attr,"ffffff","")}else{to=o.to}o.listeners=Ext.apply(Ext.apply({},lns),{beforeanimate:function(){restore=dom.style[attr];var el=Ext.fly(dom,"_anim");el.clearOpacity();el.show();event=lns.beforeanimate;if(event){fn=event.fn||event;return fn.apply(event.scope||lns.scope||WIN,arguments)}},afteranimate:function(){if(dom){dom.style[attr]=restore}event=lns.afteranimate;if(event){fn=event.fn||event;fn.apply(event.scope||lns.scope||WIN,arguments)}}});me.animate(Ext.apply({},o,{duration:1000,easing:"ease-in",from:from,to:to}));return me},hover:function(overFn,outFn,scope,options){var me=this;me.on("mouseenter",overFn,scope||me.dom,options);me.on("mouseleave",outFn,scope||me.dom,options);return me},initDD:function(group,config,overrides){var dd=new Ext.dd.DD(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDProxy:function(group,config,overrides){var dd=new Ext.dd.DDProxy(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDTarget:function(group,config,overrides){var dd=new Ext.dd.DDTarget(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},isFocusable:function(asFocusEl){var me=this,dom=me.dom,hasTabIndex=dom.hasAttribute("tabindex"),tabIndex=hasTabIndex&&dom.getAttribute("tabindex"),nodeName=dom.nodeName,canFocus=false;if(dom&&!dom.disabled){if(tabIndex=="-1"){canFocus=asFocusEl}else{if(focusRe.test(nodeName)){if((nodeName!=="A")||dom.href){canFocus=true}}else{canFocus=tabIndex!=null&&tabIndex>=0}}canFocus=canFocus&&me.isVisible(true)}return canFocus},isMasked:function(deep){var me=this,data=me.getData(),maskEl=data.maskEl,maskMsg=data.maskMsg,hasMask=false,parent;if(maskEl&&maskEl.isVisible()){if(maskMsg){maskMsg.center(me)}hasMask=true}else{if(deep){parent=me.findParentNode();if(parent){return Ext.fly(parent).isMasked(deep)}}}return hasMask},isScrollable:function(){var dom=this.dom;return dom.scrollHeight>dom.clientHeight||dom.scrollWidth>dom.clientWidth},load:function(options){this.getLoader().load(options);return this},mask:function(msg,msgCls,elHeight){var me=this,dom=me.dom,data=me.getData(),maskEl=data.maskEl,maskMsg=data.maskMsg;if(!(bodyRe.test(dom.tagName)&&me.getStyle("position")=="static")){me.addCls(XMASKEDRELATIVE)}if(maskEl){maskEl.destroy()}if(maskMsg){maskMsg.destroy()}Ext.DomHelper.append(dom,[{role:"presentation",cls:"x-mask",style:"top:0;left:0;"},{role:"presentation",cls:msgCls?EXTELMASKMSG+" "+msgCls:EXTELMASKMSG,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:msg||""}}}]);maskMsg=Ext.get(dom.lastChild);maskEl=Ext.get(maskMsg.dom.previousSibling);data.maskMsg=maskMsg;data.maskEl=maskEl;me.addCls(XMASKED);maskEl.setDisplayed(true);if(typeof msg==="string"){maskMsg.setDisplayed(true);maskMsg.center(me)}else{maskMsg.setDisplayed(false)}if(dom===DOC.body){maskEl.addCls("x-mask-fixed")}else{me.saveTabbableState()}me.saveChildrenTabbableState();if(Ext.isIE9m&&dom!==DOC.body&&me.isStyle("height","auto")){maskEl.setSize(undefined,elHeight||me.getHeight())}return maskEl},monitorMouseLeave:function(delay,handler,scope){var me=this,timer,listeners={mouseleave:function(e){if(Ext.isIE9m){e.enableIEAsync()}timer=Ext.defer(handler,delay,scope||me,[e])},mouseenter:function(){clearTimeout(timer)}};me.on(listeners);return listeners},needsTabIndex:function(){var me=this;if(me.dom){if((me.dom.nodeName==="A")&&(!me.dom.href)){return true}return !focusRe.test(me.dom.nodeName)}},normalizeEvent:function(eventName){var fn,newName;if(!Ext.supports.MouseEnterLeave&&mouseEnterLeaveRe.test(eventName)){fn=this.normalizeWithin;newName=eventName=="mouseenter"?"mouseover":"mouseout"}else{if(eventName=="mousewheel"&&!Ext.supports.MouseWheel&&!Ext.isOpera){newName="DOMMouseScroll"}}return newName?{eventName:newName,normalizeFn:fn}:null},normalizeWithin:function(event){var parent=event.currentTarget,child=event.getRelatedTarget();if(parent&&parent.firstChild){while(child){if(child===parent){return false}child=child.parentNode;if(child&&(child.nodeType!==1)){child=null}}}return true},puff:function(obj){var me=this,dom=me.dom,beforeAnim,box=me.getBox(),originalStyles=me.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],true);obj=Ext.applyIf(obj||{},{easing:"ease-out",duration:500,useDisplay:false});beforeAnim=function(){var el=Ext.fly(dom,"_anim");el.clearOpacity();el.show();this.to={width:box.width*2,height:box.height*2,x:box.x-(box.width/2),y:box.y-(box.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");if(el){if(obj.useDisplay){el.setDisplayed(false)}else{el.hide()}el.setStyle(originalStyles);Ext.callback(obj.callback,obj.scope)}})};me.animate({duration:obj.duration,easing:obj.easing,listeners:{beforeanimate:{fn:beforeAnim}}});return me},scroll:function(direction,distance,animate){if(!this.isScrollable()){return false}direction=direction.charAt(0);var me=this,dom=me.dom,side=direction==="r"||direction==="l"?"left":"top",scrolled=false,currentScroll,constrainedScroll;if(direction==="l"||direction==="t"||direction==="u"){distance=-distance}if(side==="left"){currentScroll=dom.scrollLeft;constrainedScroll=me.constrainScrollLeft(currentScroll+distance)}else{currentScroll=dom.scrollTop;constrainedScroll=me.constrainScrollTop(currentScroll+distance)}if(constrainedScroll!==currentScroll){this.scrollTo(side,constrainedScroll,animate);scrolled=true}return scrolled},scrollBy:function(deltaX,deltaY,animate){var me=this,dom=me.dom;if(deltaX.length){animate=deltaY;deltaY=deltaX[1];deltaX=deltaX[0]}else{if(typeof deltaX!="number"){animate=deltaY;deltaY=deltaX.y;deltaX=deltaX.x}}if(deltaX){me.scrollTo("left",me.constrainScrollLeft(dom.scrollLeft+deltaX),animate)}if(deltaY){me.scrollTo("top",me.constrainScrollTop(dom.scrollTop+deltaY),animate)}return me},scrollChildIntoView:function(child,hscroll){Ext.fly(child).scrollIntoView(this,hscroll)},scrollIntoView:function(container,hscroll,animate,highlight){container=Ext.getDom(container)||Ext.getBody().dom;return this.doScrollIntoView(container,hscroll,animate,highlight,"getScrollLeft","scrollTo")},scrollTo:function(side,value,animate){var top=/top/i.test(side),me=this,prop=top?"scrollTop":"scrollLeft",dom=me.dom,animCfg;if(!animate||!me.anim){dom[prop]=value;dom[prop]=value}else{animCfg={to:{}};animCfg.to[prop]=value;if(Ext.isObject(animate)){Ext.applyIf(animCfg,animate)}me.animate(animCfg)}return me},selectable:function(){var me=this;me.dom.unselectable="";me.removeCls(Element.unselectableCls);me.addCls(Element.selectableCls);return me},setCapture:function(){var dom=this.dom;if(Ext.isIE9m&&dom.setCapture){dom.setCapture()}},setDisplayed:function(value){if(typeof value==="boolean"){value=value?getDisplay(this):NONE}this.setStyle(DISPLAY,value);return this},setHeight:function(height,animate){var me=this;if(!animate||!me.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(animate)){animate={}}me.animate(Ext.applyIf({to:{height:height}},animate))}return me},setHorizontal:function(){var me=this,cls=me.verticalCls;delete me.vertical;if(cls){delete me.verticalCls;me.removeCls(cls)}delete me.setWidth;delete me.setHeight;if(!Ext.isIE8){delete me.getWidth;delete me.getHeight}delete me.styleHooks},updateText:function(text){var me=this,dom,textNode;if(dom){textNode=dom.firstChild;if(!textNode||(textNode.nodeType!==3||textNode.nextSibling)){textNode=DOC.createTextNode();me.empty();dom.appendChild(textNode)}if(text){textNode.data=text}}},setHtml:function(html,loadScripts,callback){var me=this,id,dom,interval;if(!me.dom){return me}html=html||"";dom=me.dom;if(loadScripts!==true){dom.innerHTML=html;Ext.callback(callback,me);return me}id=Ext.id();html+='<span id="'+id+'" role="presentation"></span>';interval=Ext.interval(function(){var hd,match,attrs,srcMatch,typeMatch,el,s;if(!(el=DOC.getElementById(id))){return false}clearInterval(interval);Ext.removeNode(el);hd=Ext.getHead().dom;while((match=scriptTagRe.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement("script");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(WIN.execScript){WIN.execScript(match[2])}else{WIN.eval(match[2])}}}}Ext.callback(callback,me)},20);dom.innerHTML=html.replace(replaceScriptTagRe,"");return me},setOpacity:function(opacity,animate){var me=this;if(!me.dom){return me}if(!animate||!me.anim){me.setStyle("opacity",opacity)}else{if(typeof animate!="object"){animate={duration:350,easing:"ease-in"}}me.animate(Ext.applyIf({to:{opacity:opacity}},animate))}return me},setPositioning:function(pc){return this.setStyle(pc)},setScrollLeft:function(left){this.dom.scrollLeft=left;return this},setScrollTop:function(top){this.dom.scrollTop=top;return this},setVertical:function(angle,cls){var me=this,proto=Element.prototype;me.vertical=true;if(cls){me.addCls(me.verticalCls=cls)}me.setWidth=proto.setHeight;me.setHeight=proto.setWidth;if(!Ext.isIE8){me.getWidth=proto.getHeight;me.getHeight=proto.getWidth}me.styleHooks=(angle===270)?proto.verticalStyleHooks270:proto.verticalStyleHooks90},setSize:function(width,height,animate){var me=this;if(Ext.isObject(width)){animate=height;height=width.height;width=width.width}if(!animate||!me.anim){me.dom.style.width=Element.addUnits(width);me.dom.style.height=Element.addUnits(height)}else{if(animate===true){animate={}}me.animate(Ext.applyIf({to:{width:width,height:height}},animate))}return me},setVisible:function(visible,animate){var me=this,dom=me.dom,visMode=getVisMode(me);if(typeof animate==="string"){switch(animate){case DISPLAY:visMode=Element.DISPLAY;break;case VISIBILITY:visMode=Element.VISIBILITY;break;case OFFSETS:visMode=Element.OFFSETS;break}me.setVisibilityMode(visMode);animate=false}if(!animate||!me.anim){if(visMode===Element.DISPLAY){return me.setDisplayed(visible)}else{if(visMode===Element.OFFSETS){me[visible?"removeCls":"addCls"](OFFSETCLASS)}else{if(visMode===Element.VISIBILITY){me.fixDisplay();dom.style.visibility=visible?"":HIDDEN}}}}else{if(visible){me.setOpacity(0.01);me.setVisible(true)}if(!Ext.isObject(animate)){animate={duration:350,easing:"ease-in"}}me.animate(Ext.applyIf({callback:function(){if(!visible){Ext.fly(dom).setVisible(false).setOpacity(1)}},to:{opacity:(visible)?1:0}},animate))}me.getData()[ISVISIBLE]=visible;return me},setWidth:function(width,animate){var me=this;if(!animate||!me.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(animate)){animate={}}me.animate(Ext.applyIf({to:{width:width}},animate))}return me},setX:function(x,animate){return this.setXY([x,this.getY()],animate)},setXY:function(xy,animate){var me=this;if(!animate||!me.anim){arguments.callee.$previous.call(this,xy)}else{if(!Ext.isObject(animate)){animate={}}me.animate(Ext.applyIf({to:{x:xy[0],y:xy[1]}},animate))}return this},setY:function(y,animate){return this.setXY([this.getX(),y],animate)},show:function(animate){if(typeof animate==="string"){this.setVisible(true,animate);return this}this.setVisible(true,this.anim(animate));return this},slideIn:function(anchor,obj,slideOut){var me=this,dom=me.dom,elStyle=dom.style,beforeAnim,wrapAnim,restoreScroll,wrapDomParentNode;anchor=anchor||"t";obj=obj||{};beforeAnim=function(){var animScope=this,listeners=obj.listeners,el=Ext.fly(dom,"_anim"),box,originalStyles,anim,wrap;if(!slideOut){el.fixDisplay()}box=el.getBox();if((anchor=="t"||anchor=="b")&&box.height===0){box.height=dom.scrollHeight}else{if((anchor=="l"||anchor=="r")&&box.width===0){box.width=dom.scrollWidth}}originalStyles=el.getStyle(["width","height","left","right","top","bottom","position","z-index"],true);el.setSize(box.width,box.height);if(obj.preserveScroll){restoreScroll=el.cacheScrollValues()}wrap=el.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+el.dom.id,style:{visibility:slideOut?"visible":"hidden"}});wrapDomParentNode=wrap.dom.parentNode;wrap.setPositioning(el.getPositioning(true));if(wrap.isStyle("position","static")){wrap.position("relative")}el.clearPositioning("auto");wrap.clip();if(restoreScroll){restoreScroll()}el.setStyle({visibility:"",position:"absolute"});if(slideOut){wrap.setSize(box.width,box.height)}switch(anchor){case"t":anim={from:{width:box.width+"px",height:"0px"},to:{width:box.width+"px",height:box.height+"px"}};elStyle.bottom="0px";break;case"l":anim={from:{width:"0px",height:box.height+"px"},to:{width:box.width+"px",height:box.height+"px"}};me.anchorAnimX(anchor);break;case"r":anim={from:{x:box.x+box.width,width:"0px",height:box.height+"px"},to:{x:box.x,width:box.width+"px",height:box.height+"px"}};me.anchorAnimX(anchor);break;case"b":anim={from:{y:box.y+box.height,width:box.width+"px",height:"0px"},to:{y:box.y,width:box.width+"px",height:box.height+"px"}};break;case"tl":anim={from:{x:box.x,y:box.y,width:"0px",height:"0px"},to:{width:box.width+"px",height:box.height+"px"}};elStyle.bottom="0px";me.anchorAnimX("l");break;case"bl":anim={from:{y:box.y+box.height,width:"0px",height:"0px"},to:{y:box.y,width:box.width+"px",height:box.height+"px"}};me.anchorAnimX("l");break;case"br":anim={from:{x:box.x+box.width,y:box.y+box.height,width:"0px",height:"0px"},to:{x:box.x,y:box.y,width:box.width+"px",height:box.height+"px"}};me.anchorAnimX("r");break;case"tr":anim={from:{x:box.x+box.width,width:"0px",height:"0px"},to:{x:box.x,width:box.width+"px",height:box.height+"px"}};elStyle.bottom="0px";me.anchorAnimX("r");break}wrap.show();wrapAnim=Ext.apply({},obj);delete wrapAnim.listeners;wrapAnim=new Ext.fx.Anim(Ext.applyIf(wrapAnim,{target:wrap,duration:500,easing:"ease-out",from:slideOut?anim.to:anim.from,to:slideOut?anim.from:anim.to}));wrapAnim.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");el.setStyle(originalStyles);if(slideOut){if(obj.useDisplay){el.setDisplayed(false)}else{el.hide()}}if(wrap.dom){if(wrap.dom.parentNode){wrap.dom.parentNode.insertBefore(el.dom,wrap.dom)}else{wrapDomParentNode.appendChild(el.dom)}wrap.destroy()}if(restoreScroll){restoreScroll()}animScope.end()});if(listeners){wrapAnim.on(listeners)}};me.animate({duration:obj.duration?Math.max(obj.duration,500)*2:1000,listeners:{beforeanimate:beforeAnim}});return me},slideOut:function(anchor,o){return this.slideIn(anchor,o,true)},swallowEvent:function(eventName,preventDefault){var me=this,e,eLen,fn=function(e){e.stopPropagation();if(preventDefault){e.preventDefault()}};if(Ext.isArray(eventName)){eLen=eventName.length;for(e=0;e<eLen;e++){me.on(eventName[e],fn)}return me}me.on(eventName,fn);return me},switchOff:function(obj){var me=this,dom=me.dom,beforeAnim;obj=Ext.applyIf(obj||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});beforeAnim=function(){var el=Ext.fly(dom,"_anim"),animScope=this,size=el.getSize(),xy=el.getXY(),keyframe,position;el.clearOpacity();el.clip();position=el.getPositioning();keyframe=new Ext.fx.Animator({target:dom,duration:obj.duration,easing:obj.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:xy[1]+size.height/2},100:{width:1,x:xy[0]+size.width/2}}});keyframe.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");if(obj.useDisplay){el.setDisplayed(false)}else{el.hide()}el.clearOpacity();el.setPositioning(position);el.setSize(size);animScope.end()})};me.animate({duration:(Math.max(obj.duration,500)*2),listeners:{beforeanimate:{fn:beforeAnim}},callback:obj.callback,scope:obj.scope});return me},syncContent:function(source){source=Ext.getDom(source);var sourceNodes=source.childNodes,sourceLen=sourceNodes.length,dest=this.dom,destNodes=dest.childNodes,destLen=destNodes.length,i,destNode,sourceNode,nodeType,newAttrs,attLen,attName;if(Ext.isIE9m&&dest.mergeAttributes){dest.mergeAttributes(source,true);dest.src=source.src}else{newAttrs=source.attributes;attLen=newAttrs.length;for(i=0;i<attLen;i++){attName=newAttrs[i].name;if(attName!=="id"){dest.setAttribute(attName,newAttrs[i].value)}}}if(sourceLen!==destLen){dest.innerHTML=source.innerHTML;return}for(i=0;i<sourceLen;i++){sourceNode=sourceNodes[i];destNode=destNodes[i];nodeType=sourceNode.nodeType;if(nodeType!==destNode.nodeType||(nodeType===1&&sourceNode.tagName!==destNode.tagName)){dest.innerHTML=source.innerHTML;return}if(nodeType===3){destNode.data=sourceNode.data}else{if(sourceNode.id&&destNode.id!==sourceNode.id){destNode.id=sourceNode.id}destNode.style.cssText=sourceNode.style.cssText;destNode.className=sourceNode.className;Ext.fly(destNode,"_syncContent").syncContent(sourceNode)}}},toggle:function(animate){var me=this;me.setVisible(!me.isVisible(),me.anim(animate));return me},unmask:function(){var me=this,data=me.getData(),maskEl=data.maskEl,maskMsg=data.maskMsg,style;if(maskEl){style=maskEl.dom.style;if(style.clearExpression){style.clearExpression("width");style.clearExpression("height")}if(maskEl){maskEl.destroy();delete data.maskEl}if(maskMsg){maskMsg.destroy();delete data.maskMsg}me.removeCls([XMASKED,XMASKEDRELATIVE])}me.restoreChildrenTabbableState();if(me.dom!==DOC.body){me.restoreTabbableState()}},unclip:function(){var me=this,data=me.getData(),clip;if(data[ISCLIPPED]){data[ISCLIPPED]=false;clip=data[ORIGINALCLIP];if(clip.o){me.setStyle(OVERFLOW,clip.o)}if(clip.x){me.setStyle(OVERFLOWX,clip.x)}if(clip.y){me.setStyle(OVERFLOWY,clip.y)}}return me},translate:function(x,y,z){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else{if(x!=null){this.dom.style.left=x+"px"}if(y!=null){this.dom.style.top=y+"px"}this.dom.style.position="absolute"}},unselectable:function(){var me=this;if(Ext.isOpera){me.dom.unselectable="on"}me.removeCls(Element.selectableCls);me.addCls(Element.unselectableCls);return me},privates:{isTabbable:function(){var me=this,dom=me.dom,tag=dom.nodeName,editable=dom.isContentEditable,hasIdx,idx;if(dom.hasAttribute("disabled")&&(Ext.isIE8||!editable)){return false}if(!me.isVisible(true)){return false}hasIdx=dom.hasAttribute("tabindex");idx=hasIdx&&dom.getAttribute("tabindex")-0;if(tag==="A"){if(dom.href){return hasIdx&&idx<0?false:true}else{if(editable){return !hasIdx||(hasIdx&&idx>=0)?true:false}else{return hasIdx&&idx>=0?true:false}}}else{if(editable||tabbableRe.test(tag)||(Ext.isIE8&&tag==="OBJECT")){return hasIdx&&idx<0?false:true}else{if(hasIdx&&idx>=0){return true}}}return false},selectTabbableElements:function(asDom,selector,limit,backward){var selection,nodes,node,el,i,len,to,step;asDom=asDom!=undefined?asDom:true;nodes=this.dom.querySelectorAll(selector||tabbableSelector);len=nodes.length;if(!len){return nodes}if(backward){i=len-1;to=0;step=-1}else{i=0;to=len-1;step=1}selection=[];for(;;i+=step){if((step>0&&i>to)||(step<0&&i<to)){break}node=nodes[i];el=asDom?Ext.fly(node):Ext.get(node);if(el.isTabbable()){selection.push(asDom?node:el)}if(selection.length>=limit){return selection}}return selection},selectFirstTabbableElement:function(asDom,selector){var els=this.selectTabbableElements(asDom,selector,1,false);return els[0]},selectLastTabbableElement:function(asDom,selector){var els=this.selectTabbableElements(asDom,selector,1,true);return els[0]},saveTabbableState:function(attribute){var dom=this.dom;if(dom.hasAttribute(tabbableSavedFlagAttribute)){return}attribute=attribute||tabbableSavedAttribute;if(dom.hasAttribute("tabindex")){dom.setAttribute(attribute,dom.getAttribute("tabindex"))}else{dom.setAttribute(attribute,"none")}dom.setAttribute("tabindex",-1);dom.setAttribute(tabbableSavedFlagAttribute,true);return this},restoreTabbableState:function(attribute){var dom=this.dom,idx;attribute=attribute||tabbableSavedAttribute;if(!dom.hasAttribute(tabbableSavedFlagAttribute)||!dom.hasAttribute(attribute)){return}idx=dom.getAttribute(attribute);if(idx==="none"){dom.removeAttribute("tabindex")}else{dom.setAttribute("tabindex",idx)}dom.removeAttribute(attribute);dom.removeAttribute(tabbableSavedFlagAttribute);return this},saveChildrenTabbableState:function(attribute){var children,child,i,len;if(this.dom){children=this.selectTabbableElements();for(i=0,len=children.length;i<len;i++){child=Ext.fly(children[i]);child.saveTabbableState(attribute)}}return this},restoreChildrenTabbableState:function(attribute){var children,child,i,len;attribute=attribute||tabbableSavedAttribute;children=this.dom.querySelectorAll("["+attribute+"]");for(i=0,len=children.length;i<len;i++){child=Ext.fly(children[i]);child.restoreTabbableState(attribute)}return this}},deprecated:{"4.0":{methods:{pause:function(ms){var me=this;Ext.fx.Manager.setFxDefaults(me.id,{delay:ms});return me},scale:function(w,h,o){this.animate(Ext.apply({},o,{width:w,height:h}));return this},shift:function(config){this.animate(config);return this}}},"4.2":{methods:{moveTo:function(x,y,animate){return this.setXY([x,y],animate)},setBounds:function(x,y,width,height,animate){return this.setBox({x:x,y:y,width:width,height:height},animate)},setLeftTop:function(left,top){var me=this,style=me.dom.style;style.left=Element.addUnits(left);style.top=Element.addUnits(top);return me},setLocation:function(x,y,animate){return this.setXY([x,y],animate)}}},"5.0":{methods:{getAttributeNS:function(namespace,name){return this.getAttribute(name,namespace)},getCenterXY:function(){return this.getAlignToXY(DOC,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(HEIGHT))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(WIDTH))||0},getStyleSize:function(){var me=this,d=this.dom,isDoc=(d===DOC||d===DOC.body),s,w,h;if(isDoc){return{width:Element.getViewportWidth(),height:Element.getViewportHeight()}}s=me.getStyle(["height","width"],true);if(s.width&&s.width!=="auto"){w=parseFloat(s.width)}if(s.height&&s.height!=="auto"){h=parseFloat(s.height)}return{width:w||me.getWidth(true),height:h||me.getHeight(true)}},isBorderBox:function(){return true},isDisplayed:function(){return !this.isStyle("display","none")},focusable:"isFocusable"}}}}})(),function(){var s=Ext.dom.Element,r=s.prototype,z=!Ext.isIE8,b=document,o=b.defaultView,y=/alpha\(opacity=(.*)\)/i,l=/^\s+|\s+$/g,A=r.styleHooks,w=Ext.supports,d=0,v,h,g,q,f,u,j,B;r._init(s);delete r._init;if(Ext.os.is.iOS||Ext.os.is.Android){d=2}else{if(navigator.msMaxTouchPoints||(Ext.isWebKit&&w.TouchEvents&&Ext.os.is.Desktop)){d=1}}Ext.apply(w,{touchScroll:d});Ext.plainTableCls="x-table-plain";Ext.plainListCls="x-list-plain";if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}A.opacity={name:"opacity",afterSet:function(D,C,k){if(k.isLayer){k.onOpacitySet(C)}}};if(!w.Opacity&&Ext.isIE){Ext.apply(A.opacity,{get:function(E){var D=E.style.filter,C,k;if(D.match){C=D.match(y);if(C){k=parseFloat(C[1]);if(!isNaN(k)){return k?k/100:0}}}return 1},set:function(E,C){var k=E.style,D=k.filter.replace(y,"").replace(l,"");k.zoom=1;if(typeof(C)==="number"&&C>=0&&C<1){C*=100;k.filter=D+(D.length?" ":"")+"alpha(opacity="+C+")"}else{k.filter=D}}})}if(!w.matchesSelector){var m=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,n=/\-/g,a,x=function(k,C){var D=new RegExp("(?:^|\\s+)"+C.replace(n,"\\-")+"(?:\\s+|$)");if(k&&k!=="*"){k=k.toUpperCase();return function(E){return E.tagName===k&&D.test(E.className)}}return function(E){return D.test(E.className)}},t=function(k){k=k.toUpperCase();return function(C){return C.tagName===k}},p={};r.matcherCache=p;r.is=function(k){if(!k){return true}var C=this.dom,I,E,H,G,F,D,J;if(C.nodeType!==1){return false}if(!(H=Ext.isFunction(k)?k:p[k])){if(!(E=k.match(m))){G=C.parentNode;if(!G){F=true;G=a||(a=b.createDocumentFragment());a.appendChild(C)}D=Ext.Array.indexOf(Ext.fly(G,"_is").query(k),C)!==-1;if(F){a.removeChild(C)}return D}J=E[1];I=E[2];p[k]=H=I?x(J,I):t(J)}return H(C)}}if(!o||!o.getComputedStyle){r.getStyle=function(P,K){var L=this,G=L.dom,R=typeof P!=="string",D=P,M=D,J=1,E=K,C=L.styleHooks,Q,I,O,N,F,k,H;if(R){O={};D=M[0];H=0;if(!(J=M.length)){return O}}if(!G||G.documentElement){return O||""}I=G.style;if(K){k=I}else{k=G.currentStyle;if(!k){E=true;k=I}}do{N=C[D];if(!N){C[D]=N={name:s.normalize(D)}}if(N.get){F=N.get(G,L,E,k)}else{Q=N.name;F=k[Q]}if(!R){return F}O[D]=F;D=M[++H]}while(H<J);return O}}if(Ext.isIE8){function c(E,C,D,k){if(k[this.styleName]==="none"){return"0px"}return k[this.name]}f=["Top","Right","Bottom","Left"];u=f.length;while(u--){j=f[u];B="border"+j+"Width";A["border-"+j.toLowerCase()+"-width"]=A[B]={name:B,styleName:"border"+j+"Style",get:c}}}Ext.apply(Ext,{enableGarbageCollector:true,isBorderBox:true,getDetachedBody:function(){var k=Ext.detachedBodyEl;if(!k){k=b.createElement("div");Ext.detachedBodyEl=k=new Ext.dom.Fly(k);k.isDetachedBody=true}return k},getElementById:function(D){var C=b.getElementById(D),k;if(!C&&(k=Ext.detachedBodyEl)){C=k.dom.querySelector(Ext.makeIdSelector(D))}return C},addBehaviors:function(F){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(F)})}else{var C={},E,k,D;for(k in F){if((E=k.split("@"))[1]){D=E[0];if(!C[D]){C[D]=Ext.fly(document).select(D,true)}C[D].on(E[1],F[k])}}C=null}}});if(Ext.isIE8){v=Ext.removeNode;Ext.removeNode=function(k){v(k);h=h||b.createElement("div");h.appendChild(k);h.innerHTML=""}}if(Ext.isIE9m){Ext.getElementById=function(D){var C=b.getElementById(D),k;if(!C&&(k=Ext.detachedBodyEl)){C=k.dom.all[D]}return C};r.getById=function(G,k){var F=this.dom,C=null,E,D;if(F){D=(z&&b.getElementById(G))||F.all[G];if(D){if(k){C=D}else{E=Ext.cache[G];if(E){if(E.skipGarbageCollection||!Ext.isGarbage(E.dom)){C=E}else{E.destroy()}}C=C||new Ext.Element(D)}}}return C}}else{if(!b.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(k){return b.getElementById(k)};r.getById=function(D,k){var C=b.getElementById(D);return k?C:(C?Ext.get(C):null)}}}if(Ext.isIE&&!(Ext.isIE9p&&b.documentMode>=9)){r.getAttribute=function(k,D){var E=this.dom,C;if(D){C=typeof E[D+":"+k];if(C!="undefined"&&C!="unknown"){return E[D+":"+k]||null}return null}if(k==="for"){k="htmlFor"}return E[k]||null}}Ext.onReady(function(){var E=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,C=[],J=r.setWidth,K=r.setHeight,O=r.setSize,P=/^\d+(?:\.\d*)?px$/i,I,G,k,N;if(w.FixedTableWidthBug){A.width={name:"width",set:function(V,U,S){var R=V.style,Q=S._needsTableWidthFix,T=R.display;if(Q){R.display="none"}R.width=U;if(Q){V.scrollWidth;R.display=T}}};r.setWidth=function(T,R){var V=this,W=V.dom,S=W.style,Q=V._needsTableWidthFix,U=S.display;if(Q&&!R){S.display="none"}J.call(V,T,R);if(Q&&!R){W.scrollWidth;S.display=U}return V};r.setSize=function(U,R,S){var W=this,X=W.dom,T=X.style,Q=W._needsTableWidthFix,V=T.display;if(Q&&!S){T.display="none"}O.call(W,U,R,S);if(Q&&!S){X.scrollWidth;T.display=V}return W}}if(Ext.isIE8){A.height={name:"height",set:function(V,U,S){var R=S.component,T,Q;if(R&&R._syncFrameHeight&&this===R.el){Q=R.frameBody.dom.style;if(P.test(U)){T=R.getFrameInfo();if(T){Q.height=(parseInt(U,10)-T.height)+"px"}}else{if(!U||U==="auto"){Q.height=""}}}V.style.height=U}};r.setHeight=function(Q,S){var T=this.component,U,R;if(T&&T._syncFrameHeight&&this===T.el){R=T.frameBody.dom.style;if(!Q||Q==="auto"){R.height=""}else{U=T.getFrameInfo();if(U){R.height=(Q-U.height)+"px"}}}return K.call(this,Q,S)};r.setSize=function(U,Q,S){var T=this.component,V,R;if(T&&T._syncFrameHeight&&this===T.el){R=T.frameBody.dom.style;if(!Q||Q==="auto"){R.height=""}else{V=T.getFrameInfo();if(V){R.height=(Q-V.height)+"px"}}}return O.call(this,U,Q,S)}}Ext.getDoc().on("selectstart",function(U,V){var T=s.selectableCls,S=s.unselectableCls,Q=V&&V.tagName;Q=Q&&Q.toLowerCase();if(Q==="input"||Q==="textarea"){return}while(V&&V.nodeType===1&&V!==b.documentElement){var R=Ext.fly(V);if(R.hasCls(T)){return}if(R.hasCls(S)){U.stopEvent();return}V=V.parentNode}});function H(U,R,T,Q){var S=Q[this.name]||"";return E.test(S)?"transparent":S}function M(R,S,Q){return function(){R.selectionStart=S;R.selectionEnd=Q}}function L(U){var S=w.DisplayChangeInputSelectionBug,T=w.DisplayChangeTextAreaSelectionBug,V,Q,W,R;if(S||T){V=s.getActiveElement();Q=V&&V.tagName;if((T&&Q==="TEXTAREA")||(S&&Q==="INPUT"&&V.type==="text")){if(Ext.fly(U).isAncestor(V)){W=V.selectionStart;R=V.selectionEnd;if(Ext.isNumber(W)&&Ext.isNumber(R)){return M(V,W,R)}}}}return Ext.emptyFn}function F(W,T,V,S){var Q=S.marginRight,R,U;if(Q!=="0px"){R=W.style;U=R.display;R.display="inline-block";Q=(V?S:W.ownerDocument.defaultView.getComputedStyle(W,null)).marginRight;R.display=U}return Q}function D(X,U,W,T){var Q=T.marginRight,S,R,V;if(Q!=="0px"){S=X.style;R=L(X);V=S.display;S.display="inline-block";Q=(W?T:X.ownerDocument.defaultView.getComputedStyle(X,"")).marginRight;S.display=V;R()}return Q}if(!w.RightMargin){A.marginRight=A["margin-right"]={name:"marginRight",get:(w.DisplayChangeInputSelectionBug||w.DisplayChangeTextAreaSelectionBug)?D:F}}if(!w.TransparentColor){I=["background-color","border-color","color","outline-color"];for(G=I.length;G--;){k=I[G];N=s.normalize(k);A[k]=A[N]={name:N,get:H}}}r.verticalStyleHooks90=g=Ext.Object.chain(A);r.verticalStyleHooks270=q=Ext.Object.chain(A);g.width=A.height||{name:"height"};g.height=A.width||{name:"width"};g["margin-top"]={name:"marginLeft"};g["margin-right"]={name:"marginTop"};g["margin-bottom"]={name:"marginRight"};g["margin-left"]={name:"marginBottom"};g["padding-top"]={name:"paddingLeft"};g["padding-right"]={name:"paddingTop"};g["padding-bottom"]={name:"paddingRight"};g["padding-left"]={name:"paddingBottom"};g["border-top"]={name:"borderLeft"};g["border-right"]={name:"borderTop"};g["border-bottom"]={name:"borderRight"};g["border-left"]={name:"borderBottom"};q.width=A.height||{name:"height"};q.height=A.width||{name:"width"};q["margin-top"]={name:"marginRight"};q["margin-right"]={name:"marginBottom"};q["margin-bottom"]={name:"marginLeft"};q["margin-left"]={name:"marginTop"};q["padding-top"]={name:"paddingRight"};q["padding-right"]={name:"paddingBottom"};q["padding-bottom"]={name:"paddingLeft"};q["padding-left"]={name:"paddingTop"};q["border-top"]={name:"borderRight"};q["border-right"]={name:"borderBottom"};q["border-bottom"]={name:"borderLeft"};q["border-left"]={name:"borderTop"};if(!Ext.scopeCss){C.push("x-body")}if(w.Touch){C.push("x-touch")}if(Ext.isIE&&Ext.isIE9m){C.push("x-ie","x-ie9m");C.push("x-ie8p");if(Ext.isIE8){C.push("x-ie8")}else{C.push("x-ie9","x-ie9p")}if(Ext.isIE8m){C.push("x-ie8m")}}if(Ext.isIE10){C.push("x-ie10")}if(Ext.isIE11){C.push("x-ie11")}if(Ext.isGecko){C.push("x-gecko")}if(Ext.isOpera){C.push("x-opera")}if(Ext.isOpera12m){C.push("x-opera12m")}if(Ext.isWebKit){C.push("x-webkit")}if(Ext.isSafari){C.push("x-safari")}if(Ext.isChrome){C.push("x-chrome")}if(Ext.isMac){C.push("x-mac")}if(Ext.isLinux){C.push("x-linux")}if(!w.CSS3BorderRadius){C.push("x-nbr")}if(!w.CSS3LinearGradient){C.push("x-nlg")}if(w.Touch){C.push("x-touch")}Ext.getBody().addCls(C)},null,{priority:1500})});(Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:true,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent();Ext.onReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer})},fireResize:function(){var d=this,b=Ext.Element,a=b.getViewportWidth(),c=b.getViewportHeight();if(d.curHeight!==c||d.curWidth!==a){d.curHeight=c;d.curWidth=a;d.fireEvent("resize",a,c)}}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(a){Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)}}));Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",attachListeners:function(){this.callParent();Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent("mousedown",a)},deprecated:{5:{methods:{addListener:function(c,f,d,b){var a,g;if(c==="ready"){g=f}else{if(typeof c!=="string"){for(a in c){if(a==="ready"){g=c[a]}}}}if(g){Ext.onReady(g)}this.callParent([c,f,d,b])}}}}});Ext.USE_NATIVE_JSON=false;Ext.JSON=(new (function(){var me=this,hasNative=window.JSON&&JSON.toString()=="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return me.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return me.encodeMSDate(o)}else{return me.encodeString(o)}}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i),":",me.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(o)}return me.encodeValue(o)};me.decode=function(json,safe){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(json)}return doDecode(json)}catch(e){if(safe){return null}Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode})());(Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var a;return{singleton:true,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:false,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(b){return b!==undefined?b:""},defaultValue:function(c,b){return c!==undefined&&c!==""?c:b},substr:"ab".substr(-1)!="b"?function(c,f,b){var d=String(c);return(f<0)?d.substr(Math.max(d.length+f,0),b):d.substr(f,b)}:function(c,d,b){return String(c).substr(d,b)},lowercase:function(b){return String(b).toLowerCase()},uppercase:function(b){return String(b).toUpperCase()},usMoney:function(b){return a.currency(b,"$",2)},currency:function(d,g,c,b){var j="",h=",0",f=0;d=d-0;if(d<0){d=-d;j="-"}c=Ext.isDefined(c)?c:a.currencyPrecision;h+=(c>0?".":"");for(;f<c;f++){h+="0"}d=a.number(d,h);if((b||a.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",j,d,g||a.currencySign)}else{return Ext.String.format("{0}{1}{2}",j,g||a.currencySign,d)}},date:function(b,c){if(!b){return""}if(!Ext.isDate(b)){b=new Date(Date.parse(b))}return Ext.Date.dateFormat(b,c||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(d,c){var b=parseInt(d||0,10).toString(16);if(c){if(c<0){c=-c;if(b.length>c){b=b.substring(b.length-c)}}while(b.length<c){b="0"+b}}return b},or:function(c,b){return c||b},pick:function(d,c,f){if(Ext.isNumber(d)){var b=arguments[d+1];if(b){return b}}return d?f:c},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,"")},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,"")},fileSize:(function(){var b=1024,c=1048576,d=1073741824;return function(g){var f;if(g<b){if(g===1){f="1 byte"}else{f=g+" bytes"}}else{if(g<c){f=(Math.round(((g*10)/b))/10)+" KB"}else{if(g<d){f=(Math.round(((g*10)/c))/10)+" MB"}else{f=(Math.round(((g*10)/d))/10)+" GB"}}}return f}})(),math:(function(){var b={};return function(d,c){if(!b[c]){b[c]=Ext.functionFactory("v","return v "+c+";")}return b[c](d)}}()),round:function(d,c){var b=Number(d);if(typeof c==="number"){c=Math.pow(10,c);b=Math.round(d*c)/c}else{if(c===undefined){b=Math.round(b)}}return b},number:function(n,g){if(!g){return n}if(isNaN(n)){return""}var f=a.formatFns[g];if(!f){var k=g,q=a.thousandSeparator,o=a.decimalSeparator,h=0,d="",c,l,m,p,b,j;if(g.substr(g.length-2)==="/i"){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==o){a.I18NFormatCleanRe=new RegExp("[^\\d\\"+o+"]","g");a.lastDecimalSeparator=o}g=g.substr(0,g.length-2);c=g.indexOf(q)!==-1;l=g.replace(a.I18NFormatCleanRe,"").split(o)}else{c=g.indexOf(",")!==-1;l=g.replace(a.formatCleanRe,"").split(".")}m=g.replace(a.formatPattern,"");if(l.length>2){}else{if(l.length===2){h=l[1].length;p=l[1].match(a.hashRe);if(p){j=p[0].length;d='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+j+'}$")'}}}b=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(c?",thousandSeparator,thousands=[],j,n,i":"")+(m?',formatString="'+g+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+h+");",d,";"];if(c){if(h){b[b.length]='parts=fnum.split(".");';b[b.length]="fnum=parts[0];"}b[b.length]="if(absVal>=1000) {";b[b.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(h){b[b.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(h){b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}if(p){b[b.length]='fnum=fnum.replace(trailingZeroes,"");'}b[b.length]='if(neg&&fnum!=="'+(h?"0."+Ext.String.repeat("0",h):"0")+'")fnum="-"+fnum;';b[b.length]="return ";if(m){b[b.length]="formatString.replace(formatPattern, fnum);"}else{b[b.length]="fnum;"}b[b.length]="};";f=a.formatFns[k]=Ext.functionFactory("Ext",b.join(""))(Ext)}return f(n)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||"0")+a.percentSign},attributes:function(c){if(typeof c==="object"){var b=[],d;for(d in c){if(c.hasOwnProperty(d)){b.push(d,'="',d==="style"?Ext.DomHelper.generateStyles(c[d],null,true):Ext.htmlEncode(c[d]),'" ')}}c=b.join("")}return c||""},plural:function(b,c,d){return b+" "+(b===1?c:(d?d:c+"s"))},nl2br:function(b){return Ext.isEmpty(b)?"":b.replace(a.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(c){c=c||0;if(typeof c==="number"){return{top:c,right:c,bottom:c,left:c}}var d=c.split(" "),b=d.length;if(b===1){d[1]=d[2]=d[3]=d[0]}else{if(b===2){d[2]=d[0];d[3]=d[1]}else{if(b===3){d[3]=d[1]}}}return{top:parseInt(d[0],10)||0,right:parseInt(d[1],10)||0,bottom:parseInt(d[2],10)||0,left:parseInt(d[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(b,a){b=Ext.getDom(b);return new this(b.value||b.innerHTML,a||"")}},useEval:Ext.isGecko,constructor:function(d){var g=this,b=arguments,a=[],c,f=b.length,h;g.initialConfig={};if(f===1&&Ext.isArray(d)){b=d;f=b.length}if(f>1){for(c=0;c<f;c++){h=b[c];if(typeof h=="object"){Ext.apply(g.initialConfig,h);Ext.apply(g,h)}else{a.push(h)}}}else{a.push(d)}g.html=a.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(a){var b=this;if(b.compiled){if(!b.fn){b.compile()}return b.fn(a).join("")}return b.evaluate(a)},evaluate:function(a){var g=this,c=!g.disableFormats,f=Ext.util.Format,b=g;function d(l,k,j,m,h){if(j==null||j==""){j=k}if(m&&c){if(h){h=[a[j]].concat(Ext.functionFactory("return ["+h+"];")())}else{h=[a[j]]}if(m.substr(0,5)==="this."){return b[m.substr(5)].apply(b,h)}else{if(f[m]){return f[m].apply(f,h)}else{return l}}}else{return a[j]!==undefined?a[j]:""}}return g.html.replace(g.tokenRe,d)},applyOut:function(a,b){var c=this;if(c.compiled){if(!c.fn){c.compile()}b.push.apply(b,c.fn(a))}else{b.push(c.apply(a))}return b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(a,c){var b=this;b.html=a;b.compiled=!!c;b.fn=null;return b},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var b=this,a;a=b.html.replace(b.compileARe,"\\\\").replace(b.compileBRe,"\\n").replace(b.compileCRe,"\\'").replace(b.tokenRe,b.regexReplaceFn.bind(b));a=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(b.useEval?"$=":"return")+" function(v){return ['"+a+"'];};";b.fn=b.useEval?b.evalCompiled(a):(new Function("Ext",a))(Ext);b.compiled=true;return b},evalCompiled:function($){eval($);return $},regexReplaceFn:function(d,c,b,f,a){if(c==null||c==""){c='"'+b+'"'}else{if(this.stringFormat){c=parseInt(c)+1}}if(f&&this.disableFormats!==true){a=a?","+a:"";if(f.substr(0,5)==="this."){f=f+"("}else{if(Ext.util.Format[f]){f="fm."+f+"("}else{return d}}return"',"+f+"v["+c+"]"+a+"),'"}else{return"',v["+c+"] == undefined ? '' : v["+c+"],'"}},insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:function(b,a,c){return this.doInsert("beforeEnd",b,a,c)},doInsert:function(b,d,a,f){var c=Ext.DomHelper.insertHtml(b,Ext.getDom(d),this.apply(a));return f?Ext.get(c):c},overwrite:function(c,a,d){var b=Ext.DomHelper.overwrite(Ext.getDom(c),this.apply(a));return d?Ext.get(b):b}},1,0,0,0,0,0,[Ext,"Template"],function(d){var c=/\{\d+\}/,a=function(g){if(c.test(g)){g=new d(g,b);return function(){return g.apply(arguments)}}else{return function(){return g}}},b={useFormat:false,compiled:true,stringFormat:true},f={};Ext.String.format=Ext.util.Format.format=function(h){var g=f[h]||(f[h]=a(h));return g.apply(this,arguments)}}));(Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(b){var h=this,g=(b&&h.inheritedStateInner)||h.inheritedState,f=h.ownerCt||h.initOwnerCt,d=h.isContainer,c,a,j;if(!g||g.invalid){c=h.getRefOwner();if(f){j=h.ownerLayout===f.layout}h.inheritedState=g=Ext.Object.chain(c?c.getInherited(j):Ext.rootInheritedState);if(d){h.inheritedStateInner=a=Ext.Object.chain(g)}h.initInheritedState(g,a);g=(d&&b)?h.inheritedStateInner:h.inheritedState}return g},getInheritedConfig:function(f,a){var d=this.inheritedState,b,c;if(!d||d.invalid){d=this.getInherited()}c=d[f];if(a&&d.hasOwnProperty(f)){b=c;delete d[f];c=d[f];d[f]=b}return c},fixReference:function(){var a=this,b;if(a.reference){b=a.lookupReferenceHolder();if(b){b.attachReference(a)}}},resolveListenerScope:function(d){var c=this,b=Ext._namedScopes[d],a;if(!b){a=c.getInheritedConfig("defaultListenerScope",true)||d||c}else{if(b.isController){a=c.getInheritedConfig("controller",!b.isSelf)}else{if(b.isSelf){a=c.getInheritedConfig("defaultListenerScope")||c}else{if(b.isThis){a=c}}}}return a||null},lookupReferenceHolder:function(a){return this.getInheritedConfig("referenceHolder",a!==false)||null},getRefOwner:function(){return this.ownerCt||this.initOwnerCt||this.ownerCmp||this.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=true;delete this.inheritedState}}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:true},controller:null,defaultListenerScope:false,publishes:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},reference:null,session:{$value:null,lazy:true},twoWayBindable:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},viewModel:{$value:null,lazy:true}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(d){var f=this,a=f.getReference(),b=f.getController(),c=f.getConfig("viewModel",true),h=f.getConfig("session",true),g=f.getDefaultListenerScope();if(b){d.controller=b}if(g){d.defaultListenerScope=f}else{if(b){d.defaultListenerScope=b}}if(c){if(!c.isViewModel){c=f}d.viewModel=c}if(h){if(!h.isSession){h=f}d.session=h}if(a){f.referenceKey=(d.referencePath||"")+a;f.viewModelKey=(d.viewModelPath||"")+a}},lookupController:function(a){return this.getInheritedConfig("controller",a)||null},lookupSession:function(a){var b=a?null:this.getSession();if(!b){b=this.getInheritedConfig("session",a);if(b&&!b.isSession){b=b.getInherited().session=b.getSession()}}return b||null},lookupViewModel:function(a){var b=a?null:this.getViewModel();if(!b){b=this.getInheritedConfig("viewModel",a);if(b&&!b.isViewModel){b=b.getInherited().viewModel=b.getViewModel()}}return b||null},publishState:function(l,k){var j=this,m=j.viewModelKey,c=j.publishedState,f=j.getBind(),h=f&&l&&f[l],g=0,b,a,d;if(h&&!h.syncing&&!h.isReadOnly()){h.setValue(k)}if(!m||!(a=j.getPublishes())){return}if(!(d=j.lookupViewModel())){return}if(l&&c){if(!a[l]){return}if(!(k&&k.constructor===Object)&&!(k instanceof Array)){if(c[l]===k){return}}m+=".";m+=l}else{c=c||(j.publishedState={});for(b in a){++g;if(b===l){c[b]=k}else{c[b]=j[b]}}if(!g){return}k=c}d.set(m,k)},privates:{addBindableUpdater:function(c){var b=this,d=b.self.$config.configs,a=d[c],f;if(a&&!b.hasOwnProperty(f=a.names.update)){b[f]=a.bindableUpdater||(a.root.bindableUpdater=b.makeBindableUpdater(a))}},applyBind:function(d,l){var g=this,j=g.lookupViewModel(),f=g.getTwoWayBindable(),a=g._getBindTemplateScope,h,k,c;if(!l||typeof l==="string"){l={}}if(Ext.isString(d)){h=d;d={};d[g.defaultBindProperty]=h}for(k in d){c=d[k];h=l[k];if(h&&typeof h!=="string"){h.destroy();h=null}if(c){h=j.bind(c,g.onBindNotify,g);h._config=Ext.Config.get(k);h.getTemplateScope=a}l[k]=h;if(f&&f[k]&&!h.isReadOnly()){g.addBindableUpdater(k)}}return l},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}return a},applyPublishes:function(a){if(this.lookupViewModel()){for(var b in a){this.addBindableUpdater(b)}}return a},applySession:function(c){if(!c){return null}if(!c.isSession){var b=this.lookupSession(true),a=(c===true)?{}:c;if(b){c=b.spawn(a)}else{c=new Ext.data.Session(a)}}return c},applyViewModel:function(b){var c=this,a,d;if(!(b&&b.isViewModel)){a={parent:c.lookupViewModel(true)};a.session=c.getSession();if(!d&&!a.parent){a.session=c.lookupSession()}if(b){if(b.constructor===Object){Ext.apply(a,b)}else{if(typeof b==="string"){a.type=b}}}b=Ext.Factory.viewModel(a)}return b},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(f,c){var d=this,g=d.self.prototype[b];if(g){g.call(d,f,c)}d.publishState(a.name,f)}},onBindNotify:function(b,a,c){c.syncing=(c.syncing+1)||1;this[c._config.names.set](b);--c.syncing},removeBindings:function(){var c=this.bind,a,b;if(c&&typeof c!=="string"){for(a in c){b=c[a];b.destroy();b._config=b.getTemplateScope=null}}this.bind=null},updateSession:function(b){var a=this.getInherited();if(b){a.session=b}else{delete a.session}},updateViewModel:function(b){var c=this.getInherited(),a=this.getController();if(b){c.viewModel=b;b.setView(this);if(a){a.initViewModel(b)}}else{delete c.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.Widget",Ext.Evented,{isWidget:true,element:{reference:"element"},listenerOptionsRegex:/^(?:scope|order|delegate|single|delay|buffer|args|prepend|destroyable|element)$/,observableType:"component",eventedConfig:{width:null,height:null},template:[],constructor:function(a){var b=this;b.initId(a);b.initElement();b.mixins.observable.constructor.call(b,a);Ext.ComponentManager.register(b)},addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else{Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:true})}},addElementReference:function(c,f){var g=this,b=g[c]=Ext.get(f),d=g._elementListeners[c],a,h;b.skipGarbageCollection=true;b.component=g;if(d){d=Ext.clone(d);d.scope=g;for(a in d){h=d[a];if(typeof h==="object"){h.scope=g}}b.on(d)}return b},afterCachedConfig:function(){var j=this,k=j.self.prototype,l=j.referenceList,c=j.renderElement.dom,g,d,f,h,b,a;k.renderTemplate=g=document.createDocumentFragment();g.appendChild(c.cloneNode(true));a=g.querySelectorAll("[id]");for(f=0,h=a.length;f<h;f++){d=a[f];d.removeAttribute("id")}for(f=0,h=l.length;f<h;f++){b=l[f];j[b].dom.removeAttribute("reference")}},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},destroy:function(){var f=this,b=f.referenceList,c,d,a;for(c=0,d=b.length;c<d;c++){a=b[c];if(f.hasOwnProperty(a)){f[a].destroy();f[a]=null}}Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(f)},doAddListener:function(c,f,d,b,a){if(b&&"element" in b){return this[b.element].doAddListener(c,f,d||this,b,a)}return Ext.Evented.prototype.doAddListener.call(this,c,f,d,b,a)},doRemoveListener:function(c,f,d,b,a){if(b&&"element" in b){this[b.element].doRemoveListener(c,f,d||this,b,a)}return Ext.Evented.prototype.doRemoveListener.call(this,c,f,d,b,a)},doSetWidth:function(a){this.element.setWidth(a)},doSetHeight:function(a){this.element.setHeight(a)},filterLengthValue:function(a){if(a==="auto"||(!a&&a!==0)){return null}return a},getElementConfig:function(){var b=this,a=b.element;if(!("children" in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var m=this,n=m.self.prototype,a=m.getId(),p=m.referenceList=[],c=true,j,f,h,b,g,l,k,d,o;if(n.hasOwnProperty("renderTemplate")){j=m.renderTemplate.cloneNode(true);f=j.firstChild}else{c=false;j=document.createDocumentFragment();o=m.getElementConfig();m.initElementListeners(o);f=Ext.Element.create(o,true);j.appendChild(f)}b=j.querySelectorAll("[reference]");for(g=0,l=b.length;g<l;g++){k=b[g];d=k.getAttribute("reference");if(c){k.removeAttribute("reference")}if(d==="element"){k.id=a;h=m.el=m.addElementReference(d,k)}else{m.addElementReferenceOnDemand(d,k)}p.push(d)}if(f===h.dom){m.renderElement=h}else{m.addElementReferenceOnDemand("renderElement",f)}},initElementListeners:function(j){var h=this,g=h._elementListeners||(h.self.prototype._elementListeners={}),a=j.reference,c=j.children,d,f,b;if(a){d=j.listeners;if(d){g[a]=d;j.listeners=null}}if(c){for(b=0,f=c.length;b<f;b++){h.initElementListeners(c[b])}}},initId:function(b){var c=this,a=c.config,d=(b&&b.id)||(a&&a.id);if(d){c.setId(d);c.id=d}else{c.getId()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},resolveListenerScope:function(a){return this.mixins.inheritable.resolveListenerScope.call(this,a)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}}},1,["widget"],["widget"],{widget:true},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable]],[Ext,"Widget"],0));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var b=Ext.String.splitWords,a=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(d){var g=this,c,f;if(d){Ext.apply(g,d);c=g.cls;f=g.style;delete g.cls}g.classList=c?b(c):[];g.classMap=c?a(g.classList):{};if(f){if(typeof f==="string"){g.style=Ext.Element.parseStyles(f)}else{if(Ext.isFunction(f)){g.styleFn=f;delete g.style}else{g.style=Ext.apply({},f)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(n){if(!n){return this}var l=this,m=(typeof n==="string")?b(n):n,f=m.length,j=l.classList,d=l.classMap,g=l.flushClassList,h=0,k;for(;h<f;++h){k=m[h];if(!d[k]){d[k]=true;j.push(k);if(g){g.push(k);delete l.removedClasses[k]}}}return l},hasCls:function(c){return c in this.classMap},removeCls:function(o){var n=this,l=n.classList,g=(n.classList=[]),j=a(b(o)),f=l.length,d=n.classMap,k=n.removedClasses,h,m;for(h=0;h<f;++h){m=l[h];if(j[m]){if(k){if(d[m]){k[m]=true;Ext.Array.remove(n.flushClassList,m)}}delete d[m]}else{g.push(m)}}return n},setStyle:function(g,f){var d=this,c=d.style||(d.style={});if(typeof g=="string"){if(arguments.length===1){d.setStyle(Ext.Element.parseStyles(g))}else{c[g]=f}}else{Ext.apply(c,g)}return d},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(h){var f=this,g=f.flushClassList||f.classList,d=f.removedClasses,c;if(f.styleFn){c=Ext.apply({},f.styleFn());Ext.apply(c,f.style)}else{c=f.style}h[f.clsProp]=g.join(" ");if(c){h[f.styleProp]=f.styleIsText?Ext.DomHelper.generateStyles(c,null,true):c}if(d){d=Ext.Object.getKeys(d);if(d.length){h[f.removedProp]=d.join(" ")}}if(f.unselectableAttr){h.unselectable="on"}return h}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:false,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:true,lazy:true,merge:function(g,a,f,d){var c=a?Ext.Object.chain(a):{},b,h;if(g instanceof Array){for(b=g.length;b--;){h=g[b];if(!d||!(h in c)){if(typeof h==="string"){c[h]={name:h,itemId:h}}else{c[h.name]=h}}}}else{if(g){if(g.constructor===Object){for(b in g){if(!d||!(b in c)){h=g[b];if(h===true){c[b]={itemId:b}}else{if(typeof h==="string"){c[b]={itemId:h}}else{c[b]=h;if(!("itemId" in h)){h.itemId=b}}}c[b].name=b}}}else{if(!d||!(g in c)){c[g]={name:g,itemId:g}}}}}return c}}},destroy:function(){var c=this,b=c.getChildEls(),d,a;for(a in b){d=c[a];if(d){if(d.destroy){d.destroy()}c[a]=null}}},privates:{afterClassMixedIn:function(c){var b=c.prototype,a=b.childEls;if(a){delete b.childEls;c.getConfigurator().add({childEls:a})}},attachChildEls:function(d,c){var j=this,l=j.getChildEls(),h=c||j,p=h.id+"-",o=!h.frame,q,a,n,g,f,m,b;for(q in l){n=l[q];if(o&&n.frame){continue}f=n.select;if(f){m=d.select(f,true)}else{if(!(f=n.selectNode)){if(!(b=n.id)){b=p+n.itemId;m=Ext.cache[b]}else{m=Ext.cache[b]||d.getById(b)}}else{m=d.selectNode(f,false)}}if(m){if(m.isElement){m.component=h}else{if(m.isComposite&&!m.isLite){a=m.elements;for(g=a.length;g--;){a[g].component=h}}}}j[q]=m||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,statics:{makeRenderSetter:function(a,c){var b=a.name;return function(f){var d=this,h=(d.renderConfigs||(d.renderConfigs={})),g=h[c];if(d._renderState>=c){(a.setter||a.getSetter()).call(d,f)}else{if(!g){h[c]=g={}}if(!(b in g)){g[b]=d[b]}d[b]=f}return d}},processRenderConfig:function(a,m,c){var h=this.prototype,f=this.getConfigurator(),n=Ext.util.Renderable,l=n.makeRenderSetter,d=a[m],j,k,b,g;for(b in d){k=Ext.Config.get(b);if(!h[g=k.names.set]){j=(k.renderSetter||(k.renderSetter={}));h[g]=j[c]||(j[c]=l(k,c))}}delete a[m];f.add(d)}},onClassMixedIn:function(c){var a=c.override,f=this.processRenderConfig,d=function(g){if(g.beforeRenderConfig){this.processRenderConfig(g,"beforeRenderConfig",1)}if(g.renderConfig){this.processRenderConfig(g,"renderConfig",3)}a.call(this,g)},b=function(h,g){h.override=d;h.processRenderConfig=f;if(g.beforeRenderConfig){h.processRenderConfig(g,"beforeRenderConfig",1)}if(g.renderConfig){h.processRenderConfig(g,"renderConfig",3)}};b(c,c.prototype);c.onExtended(b)},afterRender:function(){var c=this,f={},j=c.protoEl,h=c.el,b,g,d,a;c.finishRenderChildren();c._renderState=4;if(c.contentEl){g="x-";d=g+"hidden-";a=Ext.get(c.contentEl);a.component=c;a.removeCls([g+"hidden",d+"display",d+"offsets"]);c.getContentTarget().appendChild(a.dom)}j.writeTo(f);b=f.removed;if(b){h.removeCls(b)}b=f.cls;if(b.length){h.addCls(b)}b=f.style;if(f.style){h.setStyle(b)}c.protoEl=null;if(!c.ownerCt){c.updateLayout()}if(!(c.x&&c.y)&&(c.pageX||c.pageY)){c.setPagePosition(c.pageX,c.pageY)}if(c.disableOnRender){c.onDisable()}else{if(c.enableOnRender){c.onEnable()}}if(Ext.enableAria){c.ariaApplyAfterRenderAttributes()}},afterFirstLayout:function(c,l){var f=this,k=f.x,h=f.y,d,b,j,m,g=f.defaultAlign,a=f.alignOffset;if(!f.ownerLayout){d=k!==undefined;b=h!==undefined}if(f.floating&&(!d||!b)){if(f.floatParent){j=f.floatParent.getTargetEl().getViewRegion();m=f.el.getAlignToXY(f.alignTarget||f.floatParent.getTargetEl(),g,a);j.x=m[0]-j.x;j.y=m[1]-j.y}else{m=f.el.getAlignToXY(f.alignTarget||f.container,g,a);j=f.container.translateXY(m[0],m[1])}k=d?k:j.x;h=b?h:j.y;d=b=true}if(d||b){f.setPosition(k,h)}f.onBoxReady(c,l)},beforeRender:function(){var c=this,d=c.floating,b=c.getComponentLayout(),a;c._renderState=1;c.initBindable();if(c.renderConfigs){c.flushRenderConfigs()}if(c.reference){c.publishState()}if(d){c.addCls("x-layer");a=d.cls;if(a){c.addCls(a)}}c.frame=c.frame||c.alwaysFramed;if(!b.initialized){b.initLayout()}c.initOverflow();c.setUI(c.ui);if(c.disabled){c.disable(true)}},doApplyRenderTpl:function(c,a){var d=a.$comp,b;if(!d.rendered){b=d.initRenderTpl();b.applyOut(a.renderData,c)}},getElConfig:function(){var d=this,g=d.autoEl,c=d.getFrameInfo(),a={tag:"div",tpl:c?d.initFramingTpl(c.table):d.initRenderTpl()},f=d.protoEl,b;d.initStyles(f);f.writeTo(a);f.flush();if(Ext.isString(g)){a.tag=g}else{Ext.apply(a,g)}if(Ext.enableAria&&d.ariaRenderAttributesToElement){Ext.apply(a,d.ariaGetRenderAttributes())}a.id=d.id;if(a.tpl){if(c){a.tplData=b=d.getFrameRenderData();b.renderData=d.initRenderData()}else{a.tplData=d.initRenderData()}}return a},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},getRenderTree:function(){var b=this,a=null;if(!b.hasListeners.beforerender||b.fireEvent("beforerender",b)!==false){b._renderState=1;b.beforeRender();b.rendering=true;b._renderState=2;a=b.getElConfig();if(b.el){a.id=b.$pid=Ext.id(null,b.el.identifiablePrefix)}}return a},initRenderData:function(){var a=this;return Ext.apply({$comp:a,id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame,renderScroller:a.touchScroll,scrollerCls:a.scrollerCls,role:a.ariaRole,childElCls:""},a.renderData)},onRender:function(d,f){var g=this,j=g.x,h=g.y,c=null,b=g.el,a,k;g.applyRenderSelectors();g.rendering=null;g.rendered=true;g._renderState=3;if(g.renderConfigs){g.flushRenderConfigs()}if(j!=null){c={x:j}}if(h!=null){(c=c||{}).y=h}if(!g.getFrameInfo()){a=g.width;k=g.height;if(typeof a==="number"){c=c||{};c.width=a}if(typeof k==="number"){c=c||{};c.height=k}}if(g.touchScroll===1){g.getOverflowEl().disableTouchScroll()}g.lastBox=b.lastBox=c},render:function(c,b){var f=this,d=f.el,j=f.ownerLayout,h,a,g;if(d&&!d.isElement){f.el=d=f.wrapPrimaryEl(d)}Ext.suspendLayouts();c=f.initContainer(c);g=f.getInsertPosition(b);if(!d){a=f.getRenderTree();if(j&&j.transformItemRenderTree){a=j.transformItemRenderTree(a)}if(a){if(g){d=Ext.DomHelper.insertBefore(g,a)}else{d=Ext.DomHelper.append(c,a)}f.wrapPrimaryEl(d);f.cacheRefEls(d)}}else{if(!f.hasListeners.beforerender||f.fireEvent("beforerender",f)!==false){f.beforeRender();f.needsRenderTpl=f.rendering=true;f._renderState=2;f.initStyles(d);if(f.allowDomMove!==false){if(g){c.dom.insertBefore(d.dom,g)}else{c.dom.appendChild(d.dom)}}}else{h=true}}if(d&&!h){f.finishRender(b)}Ext.resumeLayouts(!f.hidden&&!c.isDetachedBody)},ensureAttachedToBody:function(c){var b=this,a;while(b.ownerCt){b=b.ownerCt}if(b.container.isDetachedBody){b.container=a=Ext.getBody();a.appendChild(b.el.dom);if(c){b.updateLayout()}if(typeof b.x=="number"||typeof b.y=="number"){b.setPosition(b.x,b.y)}}},privates:{applyRenderSelectors:function(){var d=this,b=d.renderSelectors,c=d.el,f,a;d.attachChildEls(c);if(b){for(a in b){f=b[a];if(f){d[a]=c.selectNode(f,false)}}}},cacheRefEls:function(f){f=f||this.el;var c=Ext.cache,h=Ext.dom.Element,j=f.isElement?f.dom:f,b=j.querySelectorAll("[data-ref]"),a=b.length,g,d;for(d=0;d<a;d++){g=b[d];if(!c[g.id]){new h(g)}}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(a.renderTo||document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(a,d){var b=d.$comp,c=b.data;if(b.html){Ext.DomHelper.generateMarkup(b.html,a);delete b.html}if(b.tpl){if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}if(c){b.data=c=c.isEntity?c.getData(true):c;b.tpl.applyOut(c,a)}}},doRenderFramingDockedItems:function(a,c,d){var b=c.$comp;if(!b.rendered&&b.doRenderDockedItems){c.renderData.$skipDockedItems=true;b.doRenderDockedItems.call(this,a,c,d)}},flushRenderConfigs:function(){var d=this,h=d.renderConfigs,g=d._renderState,j,c,b,a,f;if(h){for(c=0;c<=g;++c){j=h[c];if(j){h[c]=null;for(b in j){f=j[b];(a||(a={}))[b]=d[b];d[b]=f}}}if(a){d.setConfig(a)}}},finishRender:function(h){var l=this,a=Ext.cache,k,g,b,j,f,d,c;if(!l.el||l.$pid){if(l.container){c=a[l.id];d=c?c.dom:l.container.getById(l.id,true)}else{b=l.$pid||l.id;c=a[b];d=c?c.dom:Ext.getDom(b)}if(!l.el){l.wrapPrimaryEl(d)}else{delete l.$pid;if(!l.el.dom){l.wrapPrimaryEl(l.el)}d.parentNode.insertBefore(l.el.dom,d);k=d;d=l.el.dom;g=d.firstChild;while(k.firstChild){d.insertBefore(k.firstChild,g)}l.el.addCls(k.className);Ext.removeNode(k)}}else{if(l.needsRenderTpl){j=l.initRenderTpl();if(j){f=l.initRenderData();j.insertFirst(l.getTargetEl(),f)}l.cacheRefEls()}}l.el.component=l;if(!l.container){l.container=Ext.get(l.el.dom.parentNode)}if(l.ctCls){l.container.addCls(l.ctCls)}l.onRender(l.container,h);if(!l.overflowInited){l.initOverflow()}l.el.setVisibilityMode(Ext.Element[l.hideMode.toUpperCase()]);if(l.overCls){l.el.hover(l.addOverCls,l.removeOverCls,l)}if(l.hasListeners.render){l.fireEvent("render",l)}l.afterRender();if(l.hasListeners.afterrender){l.fireEvent("afterrender",l)}l.initEvents();if(l.hidden){l.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getFrameRenderData:function(){var c=this,b=c.frameSize,a="";if(c._syncFrameHeight&&c.height){a="height:"+(c.height-b.height)+"px"}return{$comp:c,fgid:c.id+"-frame",ui:c.ui,uiCls:c.uiCls,frameCls:c.frameCls,baseCls:c.baseCls,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom,mcStyle:a,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var r=this,k=r.frameInfoCache,c=r.getFramingInfoCls()+"-frameInfo",s=k[c],j,n,h,t,d,g,l,m,u,q,b,o,a,f,p;if(s==null){j=Ext.fly(r.getStyleProxy(c),"frame-style-el");n=j.getStyle("font-family");if(n){n=n.split("-");h=parseInt(n[1],10);t=parseInt(n[2],10);d=parseInt(n[3],10);g=parseInt(n[4],10);m=parseInt(n[5],10);u=parseInt(n[6],10);q=parseInt(n[7],10);b=parseInt(n[8],10);o=parseInt(n[9],10);a=parseInt(n[10],10);f=parseInt(n[11],10);p=parseInt(n[12],10);s={table:n[0].charAt(0)==="t",vertical:n[0].charAt(1)==="v",top:h,right:t,bottom:d,left:g,width:g+t,height:h+d,border:{top:m,right:u,bottom:q,left:b,width:b+u,height:m+q},padding:{top:o,right:a,bottom:f,left:p,width:p+a,height:o+f}}}else{s=false}k[c]=s}r.frame=!!s;r.frameSize=s;return s},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));a.className=b;return a},getFrameTpl:function(a){return this.getTpl(a?"frameTableTpl":"frameTpl")},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=a.dom?a:Ext.get(a);return b.container},initOverflow:function(){var c=this,a=c.getOverflowStyle(),f=c.scrollFlags,d=c.getOverflowEl(),b=c.touchScroll=(f.y||f.x)&&Ext.supports.touchScroll;if(!d||!d.isElement){return}c.overflowInited=true;if(b===2){d.setStyle("overflow","hidden")}else{d.setStyle(a)}},doRenderPadding:function(a,c){var b=c.$comp;if(b.touchScroll){a.push("padding:",b.unitizeBox(b.padding))}},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},initRenderTpl:function(){var a=this.getTpl("renderTpl");if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent;a.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var n=this,h=n.el.dom,m=n.frameTable,c=n.frameBody,p=c.dom,l=n.getFrameInfo(),q,g,b,f,k,r,s,d,j,a,o;b=document.createElement("div");r=n.getFrameRenderData();d=n.getFrameTpl(l.table);d.insertFirst(b,r);o=b.querySelectorAll("[data-ref]");a=b.querySelector('[data-ref="frameBody"]');for(k=p;k.parentNode!==h;){k=k.parentNode}while(b.firstChild){h.insertBefore(b.firstChild,k)}a.parentNode.replaceChild(p,a);p.className=a.className;c.setSize();q=n.getChildEls();if(m){m.destroy();n.frameTable=null}for(g in q){if(q[g].frame){f=n[g];if(f&&f!==c){f.destroy();n[g]=null}}}for(j=o.length;j--;){g=(s=o[j]).getAttribute("data-ref");if(g!=="frameBody"){n[g]=new Ext.dom.Element(s)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(a){var b=this;Ext.apply(b,a);b.state={};b.mixins.observable.constructor.call(b)},get:function(b,a){return typeof this.state[b]=="undefined"?a:this.state[b]},clear:function(a){var b=this;delete b.state[a];b.fireEvent("statechange",b,a,null)},set:function(a,c){var b=this;b.state[a]=c;b.fireEvent("statechange",b,a,c)},decodeValue:function(g){var c=this,l=/^(a|n|d|b|s|o|e)\:(.*)$/,b=l.exec(unescape(g)),h,d,a,k,f,j;if(!b||!b[1]){return}d=b[1];g=b[2];switch(d){case"e":return null;case"n":return parseFloat(g);case"d":return new Date(Date.parse(g));case"b":return(g=="1");case"a":h=[];if(g!=""){k=g.split("^");f=k.length;for(j=0;j<f;j++){g=k[j];h.push(c.decodeValue(g))}}return h;case"o":h={};if(g!=""){k=g.split("^");f=k.length;for(j=0;j<f;j++){g=k[j];a=g.split("=");h[a[0]]=c.decodeValue(a[1])}}return h;default:return g}},encodeValue:function(f){var g="",d=0,b,a,c;if(f==null){return"e:1"}else{if(typeof f=="number"){b="n:"+f}else{if(typeof f=="boolean"){b="b:"+(f?"1":"0")}else{if(Ext.isDate(f)){b="d:"+f.toUTCString()}else{if(Ext.isArray(f)){for(a=f.length;d<a;d++){g+=this.encodeValue(f[d]);if(d!=a-1){g+="^"}}b="a:"+g}else{if(typeof f=="object"){for(c in f){if(typeof f[c]!="function"&&f[c]!==undefined){g+=c+"="+this.encodeValue(f[c])+"^"}}b="o:"+g.substring(0,g.length-1)}else{b="s:"+f}}}}}}return escape(b)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",stateful:false,saveDelay:100,constructor:function(){var a=this;if(!a.stateEvents){a.stateEvents=[]}if(a.stateful!==false){a.addStateEvents(a.stateEvents);a.initState()}},addStateEvents:function(d){var g=this,c,f,b,a;if(g.stateful&&g.getStateId()){a=(typeof d==="string")?arguments:d;b=g.stateEventsByName||(g.stateEventsByName={});for(c=a.length;c--;){f=a[c];if(f&&!b[f]){b[f]=1;g.on(f,g.onStateChange,g)}}}},onStateChange:function(){var c=this,a=c.saveDelay,d,b;if(!c.stateful){return}if(a){if(!c.stateTask){d=Ext.state.Stateful;b=d.runner||(d.runner=new Ext.util.TaskRunner());c.stateTask=b.newTask({run:c.saveState,scope:c,interval:a,repeat:1,fireIdleEvent:false})}c.stateTask.start()}else{c.saveState()}},saveState:function(){var j=this,b=j.stateful&&j.getStateId(),h=j.hasListeners,c,f,d,g,a,k;if(b){a=j.getState()||{};c=j.getPlugins()||[];for(d=0,g=c.length;d<g;d++){f=c[d];if(f&&f.getState){k=f.getState(a);if(k&&!a[f.ptype]){a[f.ptype]=k}}}if(!h.beforestatesave||j.fireEvent("beforestatesave",j,a)!==false){Ext.state.Manager.set(b,a);if(h.statesave){j.fireEvent("statesave",j,a)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var k=this,b=k.stateful&&k.getStateId(),j=k.hasListeners,a,l,f,h,d,g,c;if(b){l=Ext.state.Manager.get(b);if(l){a=Ext.apply({},l);if(!j.beforestaterestore||k.fireEvent("beforestaterestore",k,l)!==false){d=k.getPlugins()||[];for(f=0,h=d.length;f<h;f++){g=d[f];if(g){c=g.ptype;if(g.applyState){g.applyState(a[c],l)}delete a[c]}}k.applyState(a);if(j.staterestore){k.fireEvent("staterestore",k,l)}}}}},savePropToState:function(g,f,d){var b=this,c=b[g],a=b.initialConfig;if(b.hasOwnProperty(g)){if(!a||a[g]!==c){if(f){f[d||g]=c}return true}}return false},savePropsToState:function(f,c){var b=this,a,d;if(typeof f==="string"){b.savePropToState(f,c)}else{for(a=0,d=f.length;a<d;++a){b.savePropToState(f[a],c)}}return c},destroy:function(){var b=this,a=b.stateTask;if(a){a.destroy();b.stateTask=null}b.clearListeners()}},1,0,0,0,0,0,[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:true,shadow:"sides",constrain:false,config:{activeCounter:0,alwaysOnTop:false},constructor:function(b){var a=this;a.el=new Ext.dom.Layer(Ext.apply({preventSync:true,hideMode:a.hideMode,shadow:(typeof a.shadow!="undefined")?a.shadow:"sides",shadowOffset:a.shadowOffset,constrain:false,fixed:a.fixed,shim:(a.shim===false)?false:undefined},a.floating),b);if(a.modal&&!(Ext.enableFocusManager)){a.mon(a.el,{keydown:a.onKeyDown,scope:a})}a.mon(a.el,{mousedown:a.onMouseDown,scope:a,capture:true});a.floating=true;a.registerWithOwnerCt();a.initHierarchyEvents()},initFloatConstrain:function(){var a=this,b=a.floatParent;if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},initHierarchyEvents:function(){var b=this,a=this.syncHidden;if(!b.hasHierarchyEventListeners){b.mon(Ext.GlobalEvents,{hide:a,collapse:a,show:a,expand:a,added:a,scope:b});b.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var c=this,b=c.ownerCt,a=c.zIndexParent;if(a){a.unregisterFloatingItem(c)}a=c.zIndexParent=c.up("[floating]");c.floatParent=b||a;c.initFloatConstrain();delete c.ownerCt;if(a){a.registerFloatingItem(c)}else{Ext.WindowManager.register(c)}},onKeyDown:function(d){var c=this,a,g,f,b;if(d.getKey()===d.TAB){a=d.shiftKey;g=c.query(":focusable");if(g.length){f=g[0];b=g[g.length-1];if(!a&&b.hasFocus){d.stopEvent();f.focus()}else{if(a&&f.hasFocus){d.stopEvent();b.focus()}}}}},onMouseDown:function(g){var c=this,a=c.focusTask,b=g.parentEvent,d=b&&b.type==="touchstart",f,h;if(c.floating&&(!a||!a.id)){f=g.target;h=c.el.dom;while(!d&&f&&f!==h){if(Ext.fly(f).isFocusable()){d=true}f=f.parentNode}c.toFront(d)}},syncShadow:function(){if(this.floating){this.el.sync(true)}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){delete this.el.preventSync;this.syncShadow()},syncHidden:function(){var c=this,d=c.hidden||!c.rendered,a=c.hierarchicallyHidden=c.isHierarchicallyHidden(),b=c.pendingShow;if(d!==a){if(a){c.hide();c.pendingShow=true}else{if(b){delete c.pendingShow;if(b.length){c.show.apply(c,b)}else{c.show()}}}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingDescendants){a=Math.floor(b.floatingDescendants.setBase(a)/100)*100+10000}return a},doConstrain:function(a){var b=this,c=b.calculateConstrainedPosition(a,null,true);if(c){b.setPosition(c)}},updateActiveCounter:function(a){var b=this.zIndexParent;if(b&&this.bringParentToFront!==false){b.setActiveCounter(++Ext.ZIndexManager.activeCounter)}if(b=this.zIndexManager){b.onComponentUpdate(this)}},updateAlwaysOnTop:function(a){var b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},toFront:function(b){var a=this;if(a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)){if(a.hasListeners.tofront){a.fireEvent("tofront",a,a.el.getZIndex())}}return a},setActive:function(c,d,a){var b=this;if(c){if(b.el.shadow&&!b.maximized){b.el.enableShadow(true)}if(a){b.previousFocus=Ext.Element.getActiveElement();b.focus(false,true)}else{b.previousFocus=null}b.fireEvent("activate",b)}else{if(b.isWindow&&(d&&d.isWindow)&&b.hideShadowOnDeactivate){b.el.disableShadow()}b.fireEvent("deactivate",b);if(b.previousFocus&&(!Ext.isIE8||Ext.fly(b.previousFocus).isFocusable())){b.previousFocus.focus();b.previousFocus=null}}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b;if(a.isVisible()){b=a.getAlignToXY(a.container,"c-c");a.setPagePosition(b)}else{a.needsCenter=true}return a},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(c){var g=this,f=g.floatParent,b=f?f.getTargetEl():g.container,a=b.getViewSize(),d=f||(b.dom!==document.body)?[0,0]:b.getXY();a.x=d[0];a.y=d[1];g.setBox(a,c)}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",focusable:false,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.addFocusListener()},destroyFocusable:function(){Ext.destroy(this.focusListeners);delete this.focusTask},enableFocusable:Ext.emptyFn,disableFocusable:function(){var c=this,b=c.focusCls,a=c.getFocusEl();if(b&&a){a.removeCls(c.removeClsWithUI(b,true))}},isFocusable:function(){var b=this,a;if(!b.focusable){return false}a=b.getFocusEl();if(a&&b.canFocus()){return a.isFocusable(true)}},canFocus:function(){var a=this;return a.focusable&&a.rendered&&!a.destroying&&!a.isDestroyed&&!a.disabled&&a.isVisible(true)},addFocusListener:function(){var d=this,a=d.tabIndex,c=d.getFocusEl(),b;if(c){if(c.isComponent){return c.addFocusListener()}b=c.needsTabIndex()&&!c.dom.hasAttribute("tabindex");if(!d.focusListenerAdded&&(!b||a!=null)){if(b&&!c.dom.getAttribute("tabIndex")){c.dom.setAttribute("tabIndex",a)}d.focusListeners=c.on({focus:d.onFocus,blur:d.onBlur,scope:d,destroyable:true});c.dom.setAttribute(Ext.Component.componentIdAttribute,d.id);d.focusListenerAdded=true}}},focus:function(g,c,j,d){var f=this,a,h,b;if(!f.focusable||f.isDestroyed||f.destroying){return}if(c){f.getFocusTask().delay(Ext.isNumber(c)?c:10,f.focus,f,[g,false,j,d]);return f}f.cancelFocus();if(f.canFocus()&&(a=f.getFocusEl())){if(a.isComponent){return a.focus(g,c,j,d)}h=a.dom;if(h){if(a.needsTabIndex()&&!h.hasAttribute("tabindex")){h.tabIndex=-1}if(f.floating){b=f.container.dom.scrollTop}a.focus();if(g){if(Ext.isArray(g)){if(f.selectText){f.selectText.apply(f,g)}}else{h.select()}}Ext.callback(j,d)}if(f.floating){if(f!==f.zIndexManager.getActive()){f.toFront(true)}if(b!==undefined){f.container.dom.scrollTop=b}}}return f},cancelFocus:function(){var a=this.getFocusTask();if(a){a.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable||d.destroying){return}d.beforeBlur(f);if(b){b.beforeFocusableChildBlur(d,f)}a=d.getFocusClsEl();if(c&&a){a.removeCls(d.removeClsWithUI(c,true))}if(d.validateOnBlur){d.validate()}d.hasFocus=false;d.fireEvent("blur",d,f);d.postBlur(f);if(b){b.afterFocusableChildBlur(d,f)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable){return}if(d.canFocus()){d.beforeFocus(f);if(b){b.beforeFocusableChildFocus(d,f)}a=d.getFocusClsEl();if(c&&a){a.addCls(d.addClsWithUI(c,true))}if(!d.hasFocus){d.hasFocus=true;d.fireEvent("focus",d,f)}d.postFocus(f);if(b){b.afterFocusableChildFocus(d,f)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var c=this,b,a;if(!c.focusable){return}b=c.getFocusEl();if(b){a=b.isComponent?b.getTabIndex():b.getAttribute("tabindex");c.tabIndex=a}else{a=c.tabIndex}return a},setTabIndex:function(c){var b=this,a;if(!b.focusable){return}b.tabIndex=c;a=b.getFocusEl();if(a){if(a.isComponent){a.setTabIndex(c)}else{a.set({tabindex:c})}}},privates:{privacy:"framework",getFocusEl:Ext.privateFn,getFocusClsEl:function(){return this.getFocusEl()},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},blur:function(){var b=this,a;if(!b.focusable||!b.rendered){return}a=b.getFocusEl();if(a){b.blurring=true;a.blur();delete b.blurring}return b},disableTabbing:function(){var c=this,b=c.el,a;if(!c.focusable){return}a=c.getFocusEl();if(b){b.saveChildrenTabbableState()}if(a){a.saveTabbableState()}},enableTabbing:function(){var c=this,b=c.el,a;if(!c.focusable){return}a=c.getFocusEl();if(a){a.restoreTabbableState()}if(b){b.restoreChildrenTabbableState()}}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}}));(Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,componentIdAttribute:"componentId",cancelLayout:function(a,c){var b=this.runningLayoutContext||this.pendingLayouts;if(b){b.cancelComponent(a,false,c)}},flushLayouts:function(){var b=this,a=b.pendingLayouts;if(a&&a.invalidQueue.length){b.pendingLayouts=null;b.runningLayoutContext=a;Ext.override(a,{runComplete:function(){b.runningLayoutContext=null;var c=this.callParent();if(Ext.GlobalEvents.hasListeners.afterlayout){Ext.GlobalEvents.fireEvent("afterlayout")}return c}});a.run()}},resumeLayouts:function(a){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(a){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(b,f){var c=this,a=c.runningLayoutContext,d;if(a){a.queueInvalidate(b)}else{d=c.pendingLayouts||(c.pendingLayouts=new Ext.layout.Context());d.queueInvalidate(b);if(!f&&!c.layoutSuspendCount&&!b.isLayoutSuspended()){c.flushLayouts()}}}},$configPrefixed:false,$configStrict:false,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null},defaultBindProperty:"html",alignTarget:null,autoRender:false,autoShow:false,baseCls:"x-component",childEls:{frameTable:{frame:true},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var a=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){a.push("p")}return new RegExp("^(?:"+a.join("|")+")$","i")}()),disabledCls:"x-item-disabled",draggable:false,floating:false,hidden:false,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:true,synthetic:false,tplWriteMode:"overwrite",ui:"default",uiCls:[],weight:null,allowDomMove:true,autoGenId:false,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:false,frameSize:null,horizontalPosProp:"left",isComponent:true,_isLayoutRoot:false,layoutSuspendCount:0,liquidLayout:false,maskOnDisable:true,offsetsCls:"x-hidden-offsets",rendered:false,rootCls:"x-body",scrollerCls:"x-touch-scroller",scrollerSelector:".x-touch-scroller",validIdRe:Ext.validIdRe,constructor:function(d){var g=this,f,a,c,b;d=d||{};if(d.initialConfig){if(d.isAction){g.baseAction=d}d=d.initialConfig}else{if(d.tagName||d.dom||Ext.isString(d)){d={applyTo:d,id:d.id||d}}}g.initialConfig=d;g.getId();g.protoEl=new Ext.util.ProtoElement();g.initConfig(d);c=g.xhooks;if(c){delete g.xhooks;Ext.override(g,c)}g.mixins.elementCt.constructor.call(g);g.setupProtoEl();if(g.cls){g.initialCls=g.cls;g.protoEl.addCls(g.cls)}if(g.style){g.initialStyle=g.style;g.protoEl.setStyle(g.style)}g.renderData=g.renderData||{};g.initComponent();if(!g.preventRegister){Ext.ComponentManager.register(g)}g.mixins.state.constructor.call(g);g.addStateEvents("resize");b=g.getController();if(b){b.init(g)}if(g.plugins){for(f=0,a=g.plugins.length;f<a;f++){g.plugins[f]=g.initPlugin(g.plugins[f])}}g.loader=g.getLoader();if(g.renderTo){g.render(g.renderTo)}if(g.autoShow&&!g.initOwnerCt){g.show()}if(g.baseAction){g.baseAction.addComponent(g)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.addCls.apply(b,arguments);return c},addClsWithUI:function(c,j){var h=this,g=[],f=0,d=h.uiCls=Ext.Array.clone(h.uiCls),b=h.activeUI,a,k;if(typeof c==="string"){c=(c.indexOf(" ")<0)?[c]:Ext.String.splitWords(c)}a=c.length;for(;f<a;f++){k=c[f];if(k&&!h.hasUICls(k)){d.push(k);if(b){g=g.concat(h.addUIClsToElement(k))}}}if(j!==true&&b){h.addCls(g)}return g},afterComponentLayout:function(c,a,b,f){var d=this;if(++d.componentLayoutCounter===1){d.afterFirstLayout(c,a)}if(c!==b||a!==f){d.onResize(c,a,b,f)}if(this.floating){this.onAfterFloatLayout()}},addListener:function(b,g,f,a){var h=this,d,c;if(Ext.isString(b)&&(Ext.isObject(g)||a&&a.element)){if(a.element){d=g;g={};g[b]=d;b=a.element;if(f){g.scope=f}for(c in a){if(a.hasOwnProperty(c)){if(h.eventOptionsRe.test(c)){g[c]=a[c]}}}}if(h[b]&&h[b].on){h.mon(h[b],g)}else{h.afterRenderEvents=h.afterRenderEvents||{};if(!h.afterRenderEvents[b]){h.afterRenderEvents[b]=[]}h.afterRenderEvents[b].push(g)}return}return h.mixins.observable.addListener.apply(h,arguments)},addPlugin:function(b){var a=this;b=a.constructPlugin(b);if(a.plugins){a.plugins.push(b)}else{a.plugins=[b]}if(a.pluginsInitialized){a.initPlugin(b)}return b},addPropertyToState:function(f,d,c){var b=this,a=arguments.length;if(a===3||b.hasOwnProperty(d)){if(a<3){c=b[d]}if(c!==b.initialConfig[d]){(f||(f={}))[d]=c}}return f},addUIClsToElement:function(j){var f=this,b=f.baseCls+"-"+f.ui+"-"+j,a=["x-"+j,f.baseCls+"-"+j,b],d,h,c,g;if(f.rendered&&f.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=f.getChildEls();for(h in d){g=d[h].frame;if(g&&g!==true){c=f[h];if(c){c.addCls(b+g)}}}}return a},removeUIClsFromElement:function(j){var f=this,b=f.baseCls+"-"+f.ui+"-"+j,a=["x-"+j,f.baseCls+"-"+j,b],d,h,c,g;if(f.rendered&&f.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=f.getChildEls();for(h in d){g=d[h].frame;if(g&&g!==true){c=f[h];if(c){c.removeCls(b+g)}}}}return a},adjustPosition:function(a,d){var b=this,c;if(b.isContainedFloater()){c=b.floatParent.getTargetEl().getViewRegion();a+=c.left;d+=c.top}return{x:a,y:d}},afterHide:function(a,c){var d=this,b=d.focusableContainer;d.hiddenByLayout=null;if(this.ownerLayout){this.updateLayout({isRoot:false})}Ext.callback(a,c||d);d.fireEvent("hide",d);d.fireHierarchyEvent("hide");if(b){b.onFocusableChildHide(d)}},afterSetPosition:function(a,c){var b=this;b.onPosition(a,c);if(b.hasListeners.move){b.fireEvent("move",b,a,c)}},afterShow:function(h,b,f){var g=this,j=g.el,a,c,d;h=g.getAnimateTarget(h);if(!g.ghost){h=null}if(h){c={x:j.getX(),y:j.getY(),width:j.dom.offsetWidth,height:j.dom.offsetHeight};a={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};j.addCls(g.offsetsCls);d=g.ghost();d.el.stopAnimation();d.setX(-10000);g.ghostBox=c;d.el.animate({from:a,to:c,listeners:{afteranimate:function(){delete d.componentLayout.lastComponentSize;g.unghost();delete g.ghostBox;j.removeCls(g.offsetsCls);g.onShowComplete(b,f)}}})}else{g.onShowComplete(b,f)}g.fireHierarchyEvent("show")},animate:function(c){var u=this,g,m,l,a,d,b,t,q,n,f,r,o,j,p,s,k;c=c||{};d=c.to||{};if(Ext.fx.Manager.hasFxBlock(u.id)){return u}g=Ext.isDefined(d.width);if(g){a=Ext.Number.constrain(d.width,u.minWidth,u.maxWidth)}m=Ext.isDefined(d.height);if(m){l=Ext.Number.constrain(d.height,u.minHeight,u.maxHeight)}if(!c.dynamic&&(g||m)){q=(c.from?c.from.width:undefined)||u.getWidth();n=q;f=(c.from?c.from.height:undefined)||u.getHeight();r=f;o=false;if(m&&l>f){r=l;o=true}if(g&&a>q){n=a;o=true}if(m||g){k=u.el.getStyle("overflow");if(k!=="hidden"){u.el.setStyle("overflow","hidden")}}if(o){b=!Ext.isNumber(u.width);t=!Ext.isNumber(u.height);u.setSize(n,r);u.el.setSize(q,f);if(b){delete u.width}if(t){delete u.height}}if(g){d.width=a}if(m){d.height=l}}j=u.constrain;p=u.constrainHeader;if(j||p){u.constrain=u.constrainHeader=false;s=c.callback;c.callback=function(){u.constrain=j;u.constrainHeader=p;if(s){s.call(c.scope||u,arguments)}if(k!=="hidden"){u.el.setStyle("overflow",k)}}}return u.mixins.animate.animate.apply(u,arguments)},beforeComponentLayout:function(){return true},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(k,h,b){var g=this,j=null,d,c,a,f;if(k){if(Ext.isNumber(d=k[0])){b=h;h=k[1];k=d}else{if((d=k.x)!==undefined){b=h;h=k.y;k=d}}}if(g.constrain||g.constrainHeader){j=g.calculateConstrainedPosition(null,[k,h],true);if(j){k=j[0];h=j[1]}}c=(k!==undefined);a=(h!==undefined);if(c||a){g.x=k;g.y=h;f=g.adjustPosition(k,h);j={x:f.x,y:f.y,anim:b,hasX:c,hasY:a}}return j},beforeShow:Ext.emptyFn,bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.getBubbleTarget()}return this},cloneConfig:function(c){c=c||{};var d=c.id||Ext.id(),a=Ext.applyIf(c,this.initialConfig),b;a.id=d;b=Ext.getClass(this);return new b(a)},destroy:function(){var g=this,c=g.renderSelectors,b=g.getConfig("viewModel",true),h=g.getConfig("session",true),a,f,d;if(!g.isDestroyed){if(!g.hasListeners.beforedestroy||g.fireEvent("beforedestroy",g)!==false){g.destroying=true;f=g.floatParent||g.ownerCt;if(g.floating){delete g.floatParent;if(g.zIndexManager){g.zIndexManager.unregister(g);g.zIndexManager=null}}g.removeBindings();g.beforeDestroy();if(b&&b.isViewModel){b.destroy();g.viewModel=null}if(h&&h.isSession){if(h.getAutoDestroy()){h.destroy()}g.session=null}if(f&&f.remove){f.remove(g,false)}g.stopAnimation();g.onDestroy();Ext.destroy(g.plugins);g.componentLayout=null;if(g.hasListeners.destroy){g.fireEvent("destroy",g)}if(!g.preventRegister){Ext.ComponentManager.unregister(g)}g.mixins.state.destroy.call(g);g.clearListeners();if(g.rendered){if(!g.preserveElOnDestroy){g.el.destroy()}g.mixins.elementCt.destroy.call(g);if(c){for(a in c){if(c.hasOwnProperty(a)){d=g[a];if(d){delete g[a];d.destroy()}}}}g.data=g.el=g.frameBody=g.rendered=null}g.destroying=false;g.isDestroyed=true}}},disable:function(b){var c=this,a=c.focusableContainer;c.enableOnRender=false;c.addCls(c.disabledCls);if(c.rendered){c.onDisable()}else{c.disableOnRender=true}c.disabled=true;if(b!==true){delete c.resetDisable;c.fireEvent("disable",c)}if(a){a.onFocusableChildDisable(c)}return c},enable:function(b){var c=this,a=c.focusableContainer;c.disableOnRender=false;c.removeCls(c.disabledCls);if(c.rendered){c.onEnable()}else{c.enableOnRender=true}c.disabled=false;delete c.resetDisable;if(b!==true){c.fireEvent("enable",c)}if(a){a.onFocusableChildEnable(c)}return c},findParentBy:function(a){var b;for(b=this.getRefOwner();b&&!a(b,this);b=b.getRefOwner()){}return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},findPlugin:function(d){var b,a=this.plugins,c=a&&a.length;for(b=0;b<c;b++){if(a[b].ptype===d){return a[b]}}},getAnimateTarget:function(a){a=a||this.animateTarget;if(a){a=a.isComponent?a.getEl():Ext.get(a)}return a||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent"))}return a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(a){var c=this,b=c.componentLayout;if(c.hidden){a.hidden=true}if(c.collapseImmune){a.collapseImmune=true}if(c.modelValidation!==undefined){a.modelValidation=c.modelValidation}c.mixins.bindable.initInheritedState.call(c,a);if(b&&b.initInheritedState){b.initInheritedState(a)}},getId:function(){var a=this,b;if(!(a.id||(a.id=a.initialConfig.id))){b=a.getXType();if(b){b=b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{b=Ext.name.toLowerCase()+"-comp"}a.id=b+"-"+a.getAutoId()}return a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var b=this,a=b.loader;if(a){if(!a.isLoader){b.loader=new Ext.ComponentLoader(Ext.apply({target:b},a))}else{a.setTarget(b)}return b.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(b){var c,a=this.plugins,d=a&&a.length;for(c=0;c<d;c++){if(a[c].pluginId===b){return a[c]}}return null},getPosition:function(a){var b=this,d,c=b.isContainedFloater(),f;if((a===true)&&!c){return[b.getLocalX(),b.getLocalY()]}d=b.getXY();if((a===true)&&c){f=b.floatParent.getTargetEl().getViewRegion();d[0]-=f.left;d[1]-=f.top}return d},getScrollX:function(){var a=this,b=a.scrollManager;return b?b.getPosition().x:a.getScrollLeft()},getScrollY:function(){var a=this,b=a.scrollManager;return b?b.getPosition().y:a.getOverflowEl().getScrollTop()},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(l){var p=this,a=Ext.layout.SizeModel,d=p.componentLayout.ownerContext,b=p.width,r=p.height,s,c,h,g,j,q,n,o,m,k,f=p.floating||p.floated;if(d){k=d.widthModel;j=d.heightModel}if(!k||!j){h=((s=typeof b)=="number");g=((c=typeof r)=="number");m=f||!(q=p.ownerLayout);if(m){n=Ext.layout.Layout.prototype.autoSizePolicy;o=f?3:p.shrinkWrap;if(h){k=a.configured}if(g){j=a.configured}}else{n=q.getItemSizePolicy(p,l);o=q.isItemShrinkWrap(p)}if(d){d.ownerSizePolicy=n}o=(o===true)?3:(o||0);if(m&&o){if(b&&s=="string"){o&=2}if(r&&c=="string"){o&=1}}if(o!==3){if(!l){l=p.ownerCt&&p.ownerCt.getSizeModel()}if(l){o|=(l.width.shrinkWrap?1:0)|(l.height.shrinkWrap?2:0)}}if(!k){if(!n.setsWidth){if(h){k=a.configured}else{k=(o&1)?a.shrinkWrap:a.natural}}else{if(n.readsWidth){if(h){k=a.calculatedFromConfigured}else{k=(o&1)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{k=a.calculated}}}if(!j){if(!n.setsHeight){if(g){j=a.configured}else{j=(o&2)?a.shrinkWrap:a.natural}}else{if(n.readsHeight){if(g){j=a.calculatedFromConfigured}else{j=(o&2)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{j=a.calculated}}}}return k.pairsByHeightOrdinal[j.ordinal]},getState:function(){var b=this,c=null,a=b.getSizeModel();if(a.width.configured){c=b.addPropertyToState(c,"width")}if(a.height.configured){c=b.addPropertyToState(c,"height")}return c},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var c=this.self,d,b,a;if(!c.xtypes){d=[];b=this;while(b){a=b.xtypes;if(a!==undefined){d.unshift.apply(d,a)}b=b.superclass}c.xtypeChain=d;c.xtypes=d.join("/")}return c.xtypes},hasCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;return b.hasCls.apply(b,arguments)},hasUICls:function(a){var b=this,c=b.uiCls||[];return Ext.Array.contains(c,a)},hide:function(f,b,c){var d=this,a;if(d.pendingShow){delete d.pendingShow}if(!(d.rendered&&!d.isVisible())){a=(d.fireEvent("beforehide",d)!==false);if(d.hierarchicallyHidden||a){d.hidden=true;d.getInherited().hidden=true;if(d.rendered){d.onHide.apply(d,arguments)}}}return d},initComponent:function(){var c=this,b=c.width,a=c.height;if(c.plugins&&!c.plugins.processed){c.plugins=c.constructPlugins()}c.pluginsInitialized=true;if(b!=null||a!=null){c.setSize(b,a)}if(c.listeners){c.on(c.listeners);c.listeners=null}if(c.focusable){c.initFocusable()}},initEvents:function(){var f=this,h=f.afterRenderEvents,b,d,g,c,a;if(h){for(g in h){d=f[g];if(d&&d.on){b=h[g];for(c=0,a=b.length;c<a;++c){f.mon(d,b[c])}}}}if(f.focusable){f.initFocusableEvents()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isDescendantOf:function(a){return !!this.findParentBy(function(b){return b===a})},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var d=this,c=false,a,b;for(;(a=d.ownerCt||d.floatParent);d=a){b=a.getInherited();if(b.hidden){c=true;break}if(d.getInherited().collapseImmune){if(a.collapsed&&!d.collapseImmune){c=true;break}}else{c=!!b.collapsed;break}}return c},isLayoutRoot:function(){var a=this,b=a.ownerLayout;if(!b||a._isLayoutRoot||a.floating){return true}return b.isItemLayoutRoot(a)},isLayoutSuspended:function(){var a=this,b;while(a){if(a.layoutSuspendCount||a.suspendLayout){return true}b=a.ownerLayout;if(!b){break}a=b.owner}return false},isVisible:function(a){var b=this,c;if(b.hidden||!b.rendered||b.isDestroyed){c=true}else{if(a){c=b.isHierarchicallyHidden()}}return !c},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},isMasked:function(a){var b=this;return b.masked||(b.loadMask&&b.loadMask.isVisible())||(a&&!!b.getInherited().masked)},setMasked:function(c){var b=this,a=b.focusableContainer;if(c){b.masked=true;b.getInherited().masked=c}else{b.masked=false;delete b.getInherited().masked}if(a){a.onFocusableChildMasked(b,c)}return b},mask:function(f,c,a){var b=this.lastBox,d=this.getMaskTarget()||this.el;if(b){a=b.height}d.mask(f,c,a);this.setMasked(true)},nextNode:function(d,j){var b=this,c=b.ownerCt,k,f,h,g,a;if(j&&b.is(d)){return b}if(c){for(f=c.items.items,g=Ext.Array.indexOf(f,b)+1,h=f.length;g<h;g++){a=f[g];if(a.is(d)){return a}if(a.down){k=a.down(d);if(k){return k}}}return c.nextNode(d)}return null},nextSibling:function(b){var g=this.ownerCt,d,f,a,h;if(g){d=g.items;a=d.indexOf(this)+1;if(a){if(b){for(f=d.getCount();a<f;a++){if((h=d.getAt(a)).is(b)){return h}}}else{if(a<d.getCount()){return d.getAt(a)}}}}return null},onAdded:function(b,f,a){var d=this,c=d.inheritedState;d.ownerCt=b;if(c&&a){d.invalidateInheritedState()}if(d.reference){d.fixReference()}if(d.hasListeners&&d.hasListeners.added){d.fireEvent("added",d,b,f)}if(Ext.GlobalEvents.hasListeners.added){d.fireHierarchyEvent("added")}},onRemoved:function(b){var a=this,c;if(Ext.GlobalEvents.hasListeners.removed){a.fireHierarchyEvent("removed")}if(a.hasListeners.removed){a.fireEvent("removed",a,a.ownerCt)}if(a.reference){c=a.lookupReferenceHolder();if(c){c.clearReference(a)}}if(!b){a.removeBindings()}if(a.inheritedState&&!b){a.invalidateInheritedState()}a.ownerCt=a.ownerLayout=null},onBoxReady:function(b,a){var c=this;if(c.resizable){c.initResizable(c.resizable)}if(c.draggable){c.initDraggable()}if(c.touchScroll){c.initScrollManager()}if(c.hasListeners.boxready){c.fireEvent("boxready",c,b,a)}},onDestroy:function(){var c=this,b=c.controller,a=c.focusableContainer;if(c.bind){c.removeBindings()}if(b){b.destroy()}c.controller=null;if(c.rendered){Ext.destroy(c.dd,c.resizer,c.proxy,c.proxyWrap,c.resizerComponent)}if(a){a.onFocusableChildDestroy(c)}if(c.focusable){c.destroyFocusable()}Ext.destroy(c.componentLayout,c.loadMask,c.floatingDescendants)},onDisable:function(){var a=this,b,c;if(a.focusable){a.disableFocusable()}if(a.maskOnDisable){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=true}if(!a.nonMaskableRe.test(c)){a.mask()}}},onEnable:function(){var a=this,b,c;if(a.focusable){a.enableFocusable()}if(a.maskOnDisable){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=false}if(!a.nonMaskableRe.test(c)){a.unmask()}}},onHide:function(j,a,f){var g=this,c,d,b,h=Ext.Element.getActiveElement();if(h===g.el||g.el.contains(h)){Ext.fly(h).blur()}j=g.getAnimateTarget(j);if(!g.ghost){j=null}if(j){b={x:j.getX(),y:j.getY(),width:j.dom.offsetWidth,height:j.dom.offsetHeight};c=g.ghost();c.el.stopAnimation();d=g.getSize();c.el.animate({to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();c.setHiddenState(true);c.el.setSize(d);g.afterHide(a,f)}}})}g.el.hide();if(!j){g.afterHide(a,f)}},onPosition:Ext.emptyFn,onResize:function(c,a,b,f){var d=this;if(d.floating&&d.constrain){d.doConstrain()}if(b){d.refreshScroll()}if(d.hasListeners.resize){d.fireEvent("resize",d,c,a,b,f)}},onShow:function(){var a=this;a.el.show();a.updateLayout({isRoot:false});if(a.floating){if(a.maximized){a.fitContainer()}else{if(a.constrain){a.doConstrain()}}}},onShowComplete:function(a,c){var d=this,b=d.focusableContainer;if(d.floating){d.onFloatShow()}Ext.callback(a,c||d);d.fireEvent("show",d);if(b){b.onFocusableChildShow(d)}delete d.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(b,d){var j=this,h=j.ownerCt,a,g,f,c;if(d&&j.is(b)){return j}if(h){for(g=h.items.items,f=Ext.Array.indexOf(g,j)-1;f>-1;f--){c=g[f];if(c.query){a=c.query(b);a=a[a.length-1];if(a){return a}}if(c.is(b)){return c}}return h.previousNode(b,true)}return null},previousSibling:function(b){var f=this.ownerCt,d,a,g;if(f){d=f.items;a=d.indexOf(this);if(a!=-1){if(b){for(--a;a>=0;a--){if((g=d.getAt(a)).is(b)){return g}}}else{if(a){return d.getAt(--a)}}}}return null},registerFloatingItem:function(b){var a=this;if(!a.floatingDescendants){a.floatingDescendants=new Ext.ZIndexManager(a)}a.floatingDescendants.register(b)},removeCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.removeCls.apply(b,arguments);return c},removeClsWithUI:function(d,l){var k=this,j=[],g=0,a=Ext.Array,h=a.remove,f=k.uiCls=a.clone(k.uiCls),c=k.activeUI,b,m;if(typeof d==="string"){d=(d.indexOf(" ")<0)?[d]:Ext.String.splitWords(d)}b=d.length;for(g=0;g<b;g++){m=d[g];if(m&&k.hasUICls(m)){h(f,m);if(c){j=j.concat(k.removeUIClsFromElement(m))}}}if(l!==true&&c){k.removeCls(j)}return j},resumeLayouts:function(b){var a=this;if(!a.rendered){return}if(a.layoutSuspendCount&&!--a.layoutSuspendCount){a.suspendLayout=false;if(b&&!a.isLayoutSuspended()){a.updateLayout(b)}}},scrollBy:function(b,a,c){var d=this,f=d.scrollManager;if(f){f.scrollBy(b,a,c)}else{d.doScrollBy(b,a,c)}},scrollTo:function(a,f,b){var c=this,d=c.scrollManager;if(d){d.scrollTo(a,f,b)}else{c.doScrollTo(a,f,b)}},setAutoScroll:function(a){var b=this;b.autoScroll=!!a;if(b.rendered){b.getOverflowEl().setStyle(b.getOverflowStyle())}b.updateLayout();return b},setBorder:function(b,d){var c=this,a=!!d;if(c.rendered||a){if(!a){d=c.el}if(!b){b=0}else{if(b===true){b="1px"}else{b=this.unitizeBox(b)}}d.setStyle("border-width",b);if(!a){c.updateLayout()}}c.border=b},setDock:function(c){var b=this,a=b.ownerCt;if(c!==b.dock){if(a&&a.moveDocked){a.moveDocked(b,c)}else{b.dock=c}}return b},setDisabled:function(a){return this[a?"disable":"enable"]()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(undefined,a)},setLoading:function(c,d){var b=this,a={target:b};if(b.rendered){if(c!==false){if(Ext.isString(c)){a.msg=c}else{Ext.apply(a,c)}if(!b.loadMask||!b.loadMask.isLoadMask){if(d&&a.useTargetEl==null){a.useTargetEl=true}b.loadMask=new Ext.LoadMask(a)}else{Ext.apply(b.loadMask,a)}if(b.loadMask.isVisible()){b.loadMask.afterShow()}else{b.loadMask.show()}}else{if(b.loadMask&&b.loadMask.isLoadMask){b.loadMask.hide()}}}return b.loadMask},setMargin:function(c,b){var a=this;if(a.rendered){if(!c&&c!==0){c=""}else{if(c===true){c=5}c=this.unitizeBox(c)}a.getTargetEl().setStyle("margin",c);if(!b){a.updateLayout()}}else{a.margin=c}},setOverflowXY:function(b,a){var d=this,f=arguments.length,c=d.ownerCt;if(f){d.overflowX=b||"";if(f>1){d.overflowY=a||""}}if(d.rendered){d.getOverflowEl().setStyle(d.getOverflowStyle())}(c||d).updateLayout();return d},setPagePosition:function(a,g,b){var c=this,d,f;if(Ext.isArray(a)){g=a[1];a=a[0]}c.pageX=a;c.pageY=g;if(c.floating){if(c.isContainedFloater()){f=c.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(f.left)){a-=f.left}if(Ext.isNumber(g)&&Ext.isNumber(f.top)){g-=f.top}}else{d=c.el.translateXY(a,g);a=d.x;g=d.y}c.setPosition(a,g,b)}else{d=c.el.translateXY(a,g);c.setPosition(d.x,d.y,b)}return c},setPosition:function(a,f,b){var c=this,d=c.beforeSetPosition.apply(c,arguments);if(d&&c.rendered){a=d.x;f=d.y;if(b){if(a!==c.getLocalX()||f!==c.getLocalY()){c.stopAnimation();c.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(c.afterSetPosition,c,[a,f])},to:{left:a,top:f}},b))}}else{c.setLocalXY(a,f);c.afterSetPosition(a,f)}}return c},setScrollX:function(a){var b=this,c=b.scrollManager;if(c){c.scrollTo(a,c.getPosition().y)}else{b.setScrollLeft(a)}},setScrollY:function(c){var a=this,b=a.scrollManager;if(b){b.scrollTo(b.getPosition().x,c)}else{a.getOverflowEl().setScrollTop(c)}},setSize:function(b,a){var c=this;if(b&&typeof b=="object"){a=b.height;b=b.width}if(typeof b=="number"){c.width=Ext.Number.constrain(b,c.minWidth,c.maxWidth)}else{if(b===null){delete c.width}}if(typeof a=="number"){c.height=Ext.Number.constrain(a,c.minHeight,c.maxHeight)}else{if(a===null){delete c.height}}if(c.rendered&&c.isVisible()){if(c.liquidLayout){c.el.setSize(c.width,c.height)}c.updateLayout(c._notAsLayoutRoot)}return c},setStyle:function(d,c){var b=this,a=b.el||b.protoEl;a.setStyle(d,c);return b},setUI:function(c){var b=this,f=b.uiCls,d=b.activeUI,a;if(c===d){return}if(d){a=b.removeClsWithUI(f,true);if(a.length){b.removeCls(a)}b.removeUIFromElement()}else{b.uiCls=[]}b.ui=c;b.activeUI=c;b.addUIToElement();a=b.addClsWithUI(f,true);if(a.length){b.addCls(a)}if(b.rendered){b.updateLayout()}},setVisible:function(a){return this[a?"show":"hide"]()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(d,a,b){var c=this,f=c.rendered;if(c.hierarchicallyHidden||(c.floating&&!f&&c.isHierarchicallyHidden())){if(!f){c.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;c.pendingShow=arguments}else{c.pendingShow=true}}else{if(f&&c.isVisible()){if(c.floating){c.onFloatShow()}}else{if(c.fireEvent("beforeshow",c)!==false){c.hidden=false;delete this.getInherited().hidden;Ext.suspendLayouts();if(!f&&(c.autoRender||c.floating)){c.doAutoRender();f=c.rendered}if(f){c.beforeShow();Ext.resumeLayouts();c.onShow.apply(c,arguments);c.afterShow.apply(c,arguments)}else{Ext.resumeLayouts(true)}}else{c.onShowVeto()}}}return c},showAt:function(a,d,b){var c=this;if(!c.rendered&&(c.autoRender||c.floating)){c.x=a;c.y=d;return c.show()}if(c.floating){c.setPosition(a,d,b)}else{c.setPagePosition(a,d,b)}c.show()},showBy:function(b,d,c){var a=this;if(a.floating&&b){a.alignTarget=b;if(d){a.defaultAlign=d}if(c){a.alignOffset=c}a.show();if(!a.hidden){a.alignTo(b,d||a.defaultAlign,c||a.alignOffset)}}return a},suspendLayouts:function(){var a=this;if(!a.rendered){return}if(++a.layoutSuspendCount===1){a.suspendLayout=true}},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(false)},unregisterFloatingItem:function(b){var a=this;if(a.floatingDescendants){a.floatingDescendants.unregister(b)}},up:function(d,f){var c=this.getRefOwner(),b=typeof f==="string",h=typeof f==="number",a=f&&f.isComponent,g=0;if(d){for(;c;c=c.getRefOwner()){g++;if(d.isComponent){if(c===d){return c}}else{if(Ext.ComponentQuery.is(c,d)){return c}}if(b&&c.is(f)){return}if(h&&g===f){return}if(a&&c===f){return}}}return c},update:function(c,g,k){var j=this,l=(j.tpl&&!Ext.isString(c)),h=j.scrollManager,b=j.focusableContainer,f,a,d;if(l){j.data=(c&&c.isEntity)?c.getData(true):c}else{j.html=Ext.isObject(c)?Ext.DomHelper.markup(c):c}if(j.rendered){f=j.getSizeModel();a=f.width.shrinkWrap||f.height.shrinkWrap;if(j.isContainer){d=j.layout.getRenderTarget();a=a||j.items.items.length>0}else{d=j.touchScroll?j.getScrollerEl():j.getTargetEl()}if(l){j.tpl[j.tplWriteMode](d,j.data||{})}else{d.setHtml(j.html,g,k)}if(a){j.updateLayout()}if(h){h.refresh()}if(b){b.onFocusableChildUpdate(j)}}},setHtml:function(a){this.update(a)},applyData:function(a){this.update(a)},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},_asLayoutRoot:{isRoot:true},_notAsLayoutRoot:{isRoot:false},updateLayout:function(c){var d=this,f,b=d.lastBox,a=c&&c.isRoot;if(b){b.invalid=true}if(!d.rendered||d.layoutSuspendCount||d.suspendLayout){return}if(d.hidden){Ext.Component.cancelLayout(d)}else{if(typeof a!="boolean"){a=d.isLayoutRoot()}}if(a||!d.ownerLayout||!d.ownerLayout.onContentChange(d)){if(!d.isLayoutSuspended()){f=(c&&c.hasOwnProperty("defer"))?c.defer:d.deferLayouts;Ext.Component.updateLayout(d,f)}}},updateMaxHeight:function(b,a){this.changeConstraint(b,a,"min","max-height","height")},updateMaxWidth:function(b,a){this.changeConstraint(b,a,"min","max-width","width")},updateMinHeight:function(b,a){this.changeConstraint(b,a,"max","min-height","height")},updateMinWidth:function(a,b){this.changeConstraint(a,b,"max","min-width","width")},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(a,b){this.el.setX(a,b)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{statics:{findComponentByElement:function(c){var a=document.body,d=c,b;while(d&&d.nodeType===1&&d!==a){b=Ext.getCmp(d.id);if(b){return b}d=d.parentNode}return null},getComponentByElement:function(a){var c=Ext.Component.componentIdAttribute,b;a=Ext.fly(a);if(!a){return null}b=a.getAttribute(c);if(b){return Ext.getCmp(b)}else{return Ext.Component.findComponentByElement(a.dom)}},getActiveComponent:function(){var a=Ext.dom.Element.getActiveElement();return Ext.Component.getComponentByElement(a)}},addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},addUIToElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,g,b,f;d.addCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(g in c){f=c[g].frame;if(f&&f!==true){b=d[g];if(b){b.addCls(a+f)}}}}},changeConstraint:function(h,c,a,f,b){var g=this,d=g[b];if(h!=null&&typeof d==="number"){g[b]=Math[a](d,h)}if(g.liquidLayout){if(h!=null){g.setStyle(f,h+"px")}else{if(c){g.setStyle(f,"")}}}if(g.rendered){g.updateLayout()}},constructPlugin:function(b){var a=this;if(typeof b==="string"){b=Ext.PluginManager.create({},b,a)}else{b=Ext.PluginManager.create(b,null,a)}return b},constructPlugins:function(){var f=this,c=f.plugins,b,d,a;if(c){b=[];b.processed=true;if(!Ext.isArray(c)){c=[c]}for(d=0,a=c.length;d<a;d++){b[d]=f.constructPlugin(c[d])}}f.pluginsInitialized=true;return b},doScrollBy:function(b,a,c){var d=this.getOverflowEl();if(d){d.scrollBy(b,a,c)}},doScrollTo:function(a,d,b){var c=this.getOverflowEl();c.scrollTo("left",a,b);c.scrollTo("top",d,b)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;if(a.hasListeners[b]){a.fireEvent(b,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=true;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var f=this,b=null,g=f.autoScroll,d,c,a;if(typeof g==="boolean"){b={overflow:a=(g?"auto":"")};f.scrollFlags={overflowX:a,overflowY:a,x:g,y:g,both:g}}else{d=f.overflowX;c=f.overflowY;if(d!==undefined||c!==undefined){if(d&&d===true){d="auto"}if(c&&c===true){c="auto"}b={overflowX:d=d||"",overflowY:c=c||""};f.scrollFlags={overflowX:d,overflowY:c,x:d=(d==="auto"||d==="scroll"),y:c=(c==="auto"||c==="scroll"),both:d&&c}}else{f.scrollFlags={overflowX:"",overflowY:"",x:false,y:false,both:false}}}return b},getPlugins:function(){var a=this.plugins;a=(a&&a.processed)?a:this.constructPlugins();return a||null},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();a.proxy=a.el.createProxy("x-proxy-el",b,true)}return a.proxy},getScrollLeft:function(){return this.getOverflowEl().getScrollLeft()},getScrollerEl:function(){var a=this;return a.scrollerEl||(a.scrollerEl=a.componentLayout.getScrollerEl()||a.getOverflowEl().child(a.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(a){return Ext.XTemplate.getTpl(this,a)},initCls:function(){var b=this,a=[b.baseCls,b.getComponentLayout().targetCls];if(b.componentCls){a.push(b.componentCls)}else{b.componentCls=b.baseCls}return a},initDraggable:function(){var c=this,a=(c.resizer&&c.resizer.el!==c.el)?c.resizerComponent=new Ext.Component({ariaRole:"presentation",el:c.resizer.el,rendered:true,container:c.container}):c,b=Ext.applyIf({el:a.getDragEl(),constrainTo:(c.constrain||c.draggable.constrain)?(c.constrainTo||(c.floatParent?c.floatParent.getTargetEl():c.container)):undefined},c.draggable);if(c.constrain||c.constrainDelegate){b.constrain=c.constrain;b.constrainDelegate=c.constrainDelegate}c.dd=new Ext.util.ComponentDragger(a,b)},initPadding:function(c){var a=this,b=a.padding;if(b!=null){if(a.touchScroll||(a.layout&&a.layout.managePadding&&a.contentPaddingProperty==="padding")){c.setStyle("padding",0)}else{c.setStyle("padding",this.unitizeBox((b===true)?5:b))}}},initPlugin:function(a){a.init(this);return a},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:false,constrainTo:(b.constrain||(a&&a.constrain))?(b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.container)):undefined,handles:b.resizeHandles},a);a.target=b;b.resizer=new Ext.resizer.Resizer(a)},initScrollManager:function(){var b=this,c=b.scrollFlags,a=b.getScrollerEl();if(a&&!b.scrollManager){return b.scrollManager=new Ext.scroll.Manager({owner:b,el:a,direction:c.both?"auto":c.y?"vertical":"horizontal"})}},initStyles:function(l){var g=this,d=g.margin,f=g.border,m=g.cls,a=g.style,j=g.x,h=g.y,c=g.liquidLayout,b,k;g.initPadding(l);if(d!=null){l.setStyle("margin",this.unitizeBox((d===true)?5:d))}if(f!=null){g.setBorder(f,l)}if(m&&m!=g.initialCls){l.addCls(m);g.cls=g.initialCls=null}if(a&&a!=g.initialStyle){l.setStyle(a);g.style=g.initialStyle=null}if(j!=null){l.setStyle(g.horizontalPosProp,(typeof j=="number")?(j+"px"):j)}if(h!=null){l.setStyle("top",(typeof h=="number")?(h+"px"):h)}if(!g.ownerCt||g.floating){if(Ext.scopeCss){l.addCls(g.rootCls)}l.addCls(g.borderBoxCls)}if(c||!g.getFrameInfo()){b=g.width;k=g.height;if(b!=null){if(typeof b==="number"){l.setStyle("width",b+"px")}else{l.setStyle("width",b)}}if(k!=null){if(typeof k==="number"){l.setStyle("height",k+"px")}else{l.setStyle("height",k)}}}},isContainedFloater:function(){return(this.floating&&this.floatParent)},isDescendant:function(a){if(a.isContainer){for(var b=this.ownerCt;b;b=b.ownerCt){if(b===a){return true}}}return false},makeFloating:function(a){this.mixins.floating.constructor.call(this,a)},owns:function(b){var a=false,c;if(b.isEvent){b=b.target}else{if(b.isElement){b=b.dom}}c=Ext.Component.findComponentByElement(b);if(c){a=(c===this)||(!!c.up(this))}return a},parseBox:function(a){return Ext.Element.parseBox(a)},refreshScroll:function(){var a=this.scrollManager;if(a){a.refresh()}},removeManagedListenerItem:function(b,a,j,d,g,f){var h=this,c=a.options?a.options.element:null;if(c){c=h[c];if(c&&c.un){if(b||(a.item===j&&a.ename===d&&(!g||a.fn===g)&&(!f||a.scope===f))){c.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(h.managedListeners,a)}}}}else{return h.mixins.observable.removeManagedListenerItem.apply(h,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a);a.destroy()},removeUIFromElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,g,b,f;d.removeCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(g in c){f=c[g].frame;if(f&&f!==true){b=d[g];if(b){b.removeCls(a+f)}}}}},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!=b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},setHiddenState:function(b){var a=this.getInherited();this.hidden=b;if(b){a.hidden=true}else{delete a.hidden}this.zIndexManager&&this.zIndexManager.onComponentShowHide(this)},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},setScrollLeft:function(a){this.getOverflowEl().setScrollLeft(a)},wrapPrimaryEl:function(a){if(this.floating){this.makeFloating(a)}else{this.el=Ext.get(a)}}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){this.updateLayout();return this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext,"Component",Ext,"AbstractComponent"],function(a){a.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(b){a.resumeLayouts(b)};Ext.suspendLayouts=function(){a.suspendLayouts()};Ext.batchLayouts=function(c,b){a.suspendLayouts();c.call(b);a.resumeLayouts(true)};Ext.setGlyphFontFamily=function(b){Ext._glyphFontFamily=b};a.hierarchyEventSource=a.prototype.hierarchyEventSource=Ext.GlobalEvents}));(Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);return this},getHandledEvents:function(){return this.handledEvents},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return false},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0));(Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(a){if(a.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return false}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(c){var b=this,a;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}a=b.lastStartPoint=c.changedTouches[0].point;b.startPoint=b.startPoint||a;b.startTime=c.time;clearTimeout(b.singleTapTimer)},onTouchMove:function(c){var b=this,a=c.changedTouches[0].point;if(Math.abs(a.getDistanceTo(b.lastStartPoint))>=b.getMoveDistance()){b.startPoint=null;return b.fail(b.self.TOUCH_MOVED)}},onTouchEnd:function(f){var h=this,d=h.getMaxDuration(),a=f.time,g=f.target,j=h.lastTapTime,b=h.lastTarget,k=f.changedTouches[0].point,c;h.lastTapTime=a;h.lastTarget=g;if(j){c=a-j;if(c<=d&&Math.abs(k.getDistanceTo(h.startPoint))<=h.getTapDistance()){if(g!==b){return h.fail(h.self.DIFFERENT_TARGET)}h.lastTarget=null;h.lastTapTime=0;h.fire("doubletap",f,{touch:f.changedTouches[0],duration:c});h.startPoint=null;return}}if(a-h.startTime>d){h.fireSingleTap(f)}else{h.setSingleTapTimer(f)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(a,b){this.fire("singletap",a,{touch:b});this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],0));(Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=false;this.onTouchEnd(this.lastMoveEvent)}return false}this.startTime=a.time;this.startPoint=a.changedTouches[0].point},tryDragStart:function(d){var b=this.startPoint,g=d.changedTouches[0],a=g.point,f=this.getMinDistance(),c=this.info;if(Math.abs(a.getDistanceTo(b))>=f){this.isStarted=true;this.previousPoint=this.lastPoint=a;this.resetInfo("x",d,g);this.resetInfo("y",d,g);c.time=d.time;this.fire("dragstart",d,c)}},onTouchMove:function(b){if(!this.isStarted){this.tryDragStart(b)}if(!this.isStarted){return}var c=b.changedTouches[0],a=c.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=a;this.lastMoveEvent=b;this.updateInfo("x",b,c);this.updateInfo("y",b,c);this.info.time=b.time;this.fire("drag",b,this.info)},onAxisDragEnd:function(a,c){var b=c.time-c.previousTime[a];if(b>0){c.flick.velocity[a]=(c[a]-c.previous[a])/b}},resetInfo:function(c,g,j){var d=this.lastPoint[c],b=this.startPoint[c],h=d-b,a=c.toUpperCase(),f=this.info;f.touch=j;f.delta[c]=h;f.absDelta[c]=Math.abs(h);f.previousTime[c]=this.startTime;f.previous[c]=b;f[c]=d;f.direction[c]=0;f["start"+a]=this.startPoint[c];f["previous"+a]=f.previous[c];f["page"+a]=f[c];f["delta"+a]=f.delta[c];f["absDelta"+a]=f.absDelta[c];f["previousDelta"+a]=0;f.startTime=this.startTime},updateInfo:function(d,j,h){var k=this,m=k.lastPoint[d],f=k.previousPoint[d],a=k.startPoint[d],n=m-a,c=k.info,l=c.direction,g=d.toUpperCase(),b=c.previous[d];c.touch=h;c.delta[d]=n;c.absDelta[d]=Math.abs(n);if(m!==b&&m!==c[d]){c.previous[d]=c[d];c.previousTime[d]=c.time}c[d]=m;if(m>f){l[d]=1}else{if(m<f){l[d]=-1}}c["start"+g]=a;c["previous"+g]=c.previous[d];c["page"+g]=c[d];c["delta"+g]=c.delta[d];c["absDelta"+g]=c.absDelta[d];c["previousDelta"+g]=c.previous[d]-a;c.startTime=k.startTime},onTouchEnd:function(a){this.doEnd(a)},onTouchCancel:function(a){this.doEnd(a,true);return false},doEnd:function(d,b){if(!this.isStarted){this.tryDragStart(d)}if(this.isStarted){var f=d.changedTouches[0],a=f.point,c=this.info;this.isStarted=false;this.lastPoint=a;this.updateInfo("x",d,f);this.updateInfo("y",d,f);c.time=d.time;this.onAxisDragEnd("x",c);this.onAxisDragEnd("y",c);this.fire(b?"dragcancel":"dragend",d,c);this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],0));(Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.startTime=a.time;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(k){var j=k.changedTouches[0],n=j.pageX,l=j.pageY,h=n-this.startX,g=l-this.startY,d=Math.abs(n-this.startX),c=Math.abs(l-this.startY),f=k.time-this.startTime,o=this.getMinDistance(),b=k.time,m,a;if(b-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&c>this.getMaxOffset()){this.isHorizontal=false}if(this.isVertical&&d>this.getMaxOffset()){this.isVertical=false}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&d<o){m=(h<0)?"left":"right";a=d}else{if(this.isVertical&&c<o){m=(g<0)?"up":"down";a=c}}}if(m&&!this.started){this.started=true;this.fire("swipestart",k,{touch:j,direction:m,distance:a,duration:f})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(j){if(this.onTouchMove(j)===false){return false}var h=j.changedTouches[0],m=h.pageX,k=h.pageY,g=m-this.startX,f=k-this.startY,c=Math.abs(g),b=Math.abs(f),n=this.getMinDistance(),d=j.time-this.startTime,l,a;if(this.isVertical&&b<n){this.isVertical=false}if(this.isHorizontal&&c<n){this.isHorizontal=false}if(this.isHorizontal){l=(g<0)?"left":"right";a=c}else{if(this.isVertical){l=(f<0)?"up":"down";a=b}else{return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.started=false;this.fire("swipe",j,{touch:h,direction:l,distance:a,duration:d})},onTouchCancel:function(a){this.fire("swipecancel",a);return false}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],0));(Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(a){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.started=false;this.direction=null;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(l){var j=l.changedTouches[0],p=j.pageX,m=j.pageY,h=p-this.startX,g=m-this.startY,b=Math.abs(m-this.startY),c=Math.abs(p-this.startX),q=this.getMinDistance(),f=this.getMaxOffset(),d=l.time-this.startTime,o=Ext.Viewport&&Ext.Element.getViewportWidth(),k=Ext.Viewport&&Ext.Element.getViewportHeight(),n,a;if(this.isVertical&&c>f){this.isVertical=false}if(this.isHorizontal&&b>f){this.isHorizontal=false}if(this.isVertical&&this.isHorizontal){if(b>c){this.isHorizontal=false}else{this.isVertical=false}}if(this.isHorizontal){n=(h<0)?"left":"right";a=h}else{if(this.isVertical){n=(g<0)?"up":"down";a=g}}this.direction=this.direction||n;if(this.direction=="up"){a=g*-1}else{if(this.direction=="left"){a=h*-1}}this.distance=a;if(a==0){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(this.direction=="right"&&this.startX>q){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(this.direction=="down"&&this.startY>q){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(this.direction=="left"&&(o-this.startX)>q){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(this.direction=="up"&&(k-this.startY)>q){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=true;this.startTime=l.time;this.fire("edgeswipestart",l,{touch:j,direction:this.direction,distance:this.distance,duration:d})}else{this.fire("edgeswipe",l,{touch:j,direction:this.direction,distance:this.distance,duration:d})}},onTouchEnd:function(b){var a;if(this.onTouchMove(b)!==false){a=b.time-this.startTime;this.fire("edgeswipeend",b,{touch:b.changedTouches[0],direction:this.direction,distance:this.distance,duration:a})}},onTouchCancel:function(a){this.fire("edgeswipecancel",a,{touch:a.changedTouches[0]});return false}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],0));(Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1000},handledEvents:["longpress"],fireLongPress:function(a){this.fire("longpress",a,{touch:a.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=true},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}this.startPoint=a.changedTouches[0].point;this.isLongPress=false;this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(){this.override({handledEvents:["longpress","taphold"],fire:function(a){if(a==="longpress"){var b=Array.prototype.slice.call(arguments);b[0]="taphold";this.fire.apply(this,b)}return this.callOverridden(arguments)}})}));(Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:function(d){var a=this.requiredTouchesCount,c=d.touches,b=c.length;if(b===a){this.start(d)}else{if(b>a){this.end(d)}}},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){this.end(a,true);return false},start:function(){if(!this.isTracking){this.isTracking=true;this.isStarted=false}},end:function(b,a){if(this.isTracking){this.isTracking=false;if(this.isStarted){this.isStarted=false;this[a?"fireCancel":"fireEnd"](b)}}}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(c){if(!this.isTracking){return}var b=c.touches,d,a,f;d=b[0].point;a=b[1].point;f=d.getDistanceTo(a);if(f===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=f;this.fire("pinchstart",c,{touches:b,distance:f,scale:1})}else{this.fire("pinch",c,{touches:b,distance:f,scale:f/this.startDistance})}},fireEnd:function(a){this.fire("pinchend",a)},fireCancel:function(a){this.fire("pinchcancel",a)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],0));(Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(h){if(!this.isTracking){return}var g=h.touches,b=this.lastAngle,d,f,c,a,j,k;d=g[0].point;f=g[1].point;c=d.getAngleTo(f);if(b!==null){k=Math.abs(b-c);a=c+360;j=c-360;if(Math.abs(a-b)<k){c=a}else{if(Math.abs(j-b)<k){c=j}}}this.lastAngle=c;if(!this.isStarted){this.isStarted=true;this.startAngle=c;this.fire("rotatestart",h,{touches:g,angle:c,rotation:0})}else{this.fire("rotate",h,{touches:g,angle:c,rotation:c-this.startAngle})}this.lastTouches=Ext.Array.clone(g)},fireEnd:function(a){this.lastAngle=null;this.fire("rotateend",a)},fireCancel:function(a){this.lastAngle=null;this.fire("rotatecancel",a)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],0));(Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,a)===false){return false}this.startPoint=a.changedTouches[0].point},onTouchMove:function(b){var c=b.changedTouches[0],a=c.point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire("tapcancel",b,{touch:c});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(a){this.fire("tap",a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){this.fire("tapcancel",a,{touch:a.changedTouches[0]});return false}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{targetType:"",idSelectorRegex:/^#([\w\-]+)$/i,constructor:function(){var b=this.handledEvents||[],a,c,f,d;a=this.handledEventsMap={};for(c=0,f=b.length;c<f;c++){d=b[c];a[d]=true}this.subscribers={};return this},handles:function(a){var b=this.handledEventsMap;return !!b[a]||!!b["*"]||a==="*"},getHandledEvents:function(){return this.handledEvents},setDispatcher:function(a){this.dispatcher=a},subscribe:function(){return false},unsubscribe:function(){return false},unsubscribeAll:function(){delete this.subscribers;this.subscribers={};return this},notify:function(){return false},getTargetType:function(){return this.targetType},dispatch:function(d,b,c,a){this.dispatcher.doDispatchEvent(this.targetType,d,b,c,null,null,a)},destroy:Ext.emptyFn},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,{isRegion:true,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(d,g,a,c){var f=this;f.y=f.top=f[1]=d;f.right=g;f.bottom=a;f.x=f.left=f[0]=c},contains:function(b){var a=this;return(b.x>=a.x&&b.right<=a.right&&b.y>=a.y&&b.bottom<=a.bottom)},intersect:function(h){var g=this,d=Math.max(g.y,h.y),f=Math.min(g.right,h.right),a=Math.min(g.bottom,h.bottom),c=Math.max(g.x,h.x);if(a>d&&f>c){return new this.self(d,f,a,c)}else{return false}},union:function(h){var g=this,d=Math.min(g.y,h.y),f=Math.max(g.right,h.right),a=Math.max(g.bottom,h.bottom),c=Math.min(g.x,h.x);return new this.self(d,f,a,c)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(d,g,a,c){var f=this;f.top=f.y+=d;f.left=f.x+=c;f.right+=g;f.bottom+=a;return f},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.getOutOfBoundOffsetX(b)}else{return this.getOutOfBoundOffsetY(b)}}else{b=a;var c=new Ext.util.Offset();c.x=this.getOutOfBoundOffsetX(b.x);c.y=this.getOutOfBoundOffsetY(b.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else{if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else{if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.isOutOfBoundX(b)}else{return this.isOutOfBoundY(b)}}else{b=a;return(this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y))}},isOutOfBoundX:function(a){return(a<this.x||a>this.right)},isOutOfBoundY:function(a){return(a<this.y||a>this.bottom)},restrict:function(b,d,a){if(Ext.isObject(b)){var c;a=d;d=b;if(d.copy){c=d.copy()}else{c={x:d.x,y:d.y}}c.x=this.restrictX(d.x,a);c.y=this.restrictY(d.y,a);return c}else{if(b=="x"){return this.restrictX(d,a)}else{return this.restrictY(d,a)}}},restrictX:function(b,a){if(!a){a=1}if(b<=this.x){b-=(b-this.x)*a}else{if(b>=this.right){b-=(b-this.right)*a}}return b},restrictY:function(b,a){if(!a){a=1}if(b<=this.y){b-=(b-this.y)*a}else{if(b>=this.bottom){b-=(b-this.bottom)*a}}return b},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a,c){if(arguments.length==1){c=a.y;a=a.x}var b=this;b.top=b.y+=c;b.right+=a;b.bottom+=c;b.left=b.x+=a;return b},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return(this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left)}},3,0,0,0,0,0,[Ext.util,"Region"],0));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=(a&&a.length>0)?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}Ext.util.Region.prototype.constructor.call(this,b,a,b,a)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},isCloseTo:function(c,b){if(typeof b=="number"){return this.getDistanceTo(c)<=b}var a=c.x,g=c.y,f=b.x,d=b.y;return(this.x<=a+f&&this.x>=a-f&&this.y<=g+d&&this.y>=g-d)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(typeof a!="object"){a=this.origin}return(Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y))},getDistanceTo:function(b){if(typeof b!="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.sqrt(c*c+a*a)},getAngleTo:function(b){if(typeof b!="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.atan2(a,c)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",isStopped:false,isEvent:true,statics:{resolveTextNode:function(a){return(a&&a.nodeType===3)?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(b){var g=this,k=g.self,f=g.self.resolveTextNode,j=b.changedTouches,c=j?j[0]:b,h=b.type,a,d;g.pageX=c.pageX;g.pageY=c.pageY;g.target=g.delegatedTarget=f(b.target);d=b.relatedTarget;if(d){g.relatedTarget=f(d)}g.browserEvent=g.event=b;g.type=h;g.button=b.button||0;g.shiftKey=b.shiftKey;g.ctrlKey=b.ctrlKey||b.metaKey||false;g.altKey=b.altKey;g.charCode=b.charCode;g.keyCode=b.keyCode;if(k.forwardTab!==undefined&&k.focusEvents[h]){g.forwardTab=k.forwardTab}if(k.mouseEvents[h]){a="mouse"}else{if(k.pointerEvents[h]){a=k.pointerTypes[b.pointerType]}else{if(k.touchEvents[h]){a="touch"}}}if(a){g.pointerType=a}g.timeStamp=g.time=+(b.timeStamp||new Date())},chain:function(a){var b=Ext.Object.chain(this);b.parentEvent=this;return Ext.apply(b,a)},correctWheelDelta:function(c){var b=this.WHEEL_SCALE,a=Math.round(c/b);if(!a&&c){a=(c<0)?-1:1}return a},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(b,f,a){var c=this.relatedTarget,d=null;if(c){if(b){d=Ext.fly(c).findParent(b,f,a)}else{d=a?Ext.get(c):c}}return d},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):(a?Ext.get(this.target):this.target)},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var d=this,c=d.browserEvent,b=0,a=0;if(Ext.isDefined(c.wheelDeltaX)){b=c.wheelDeltaX;a=c.wheelDeltaY}else{if(c.wheelDelta){a=c.wheelDelta}else{if(c.detail){a=-c.detail;if(a>100){a=3}else{if(a<-100){a=-3}}if(Ext.isDefined(c.axis)&&c.axis===c.HORIZONTAL_AXIS){b=a;a=0}}}}return{x:d.correctWheelDelta(b),y:d.correctWheelDelta(a)}},getX:function(){return this.getXY()[0]},getXY:function(){var c=this,f=c.xy;if(!f){f=c.xy=[c.pageX,c.pageY];var b=f[0],h,d,g,a;if(!b&&b!==0){h=c.browserEvent;d=document;g=d.documentElement;a=d.body;f[0]=h.clientX+(g&&g.scrollLeft||a&&a.scrollLeft||0)-(g&&g.clientLeft||a&&a.clientLeft||0);f[1]=h.clientY+(g&&g.scrollTop||a&&a.scrollTop||0)-(g&&g.clientTop||a&&a.clientTop||0)}}return f},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(){var b=this,a=b.keyCode;return(a>=33&&a<=40)||a===b.RETURN||a===b.TAB||a===b.ESC},isSpecialKey:function(){var a=this.keyCode;return(this.type==="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(a===this.BACKSPACE)||(a>=16&&a<=20)||(a>=44&&a<=46)},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){this.browserEvent.preventDefault();return this},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var b=this,c=b.browserEvent,a=b.parentEvent;b.isStopped=true;if(a){a.isStopped=true}if(!c.stopPropagation){c.cancelBubble=true;return b}c.stopPropagation();return b},within:function(c,d,a){if(c){var b=d?this.getRelatedTarget():this.getTarget()}return b?Ext.fly(c).contains(b)||!!(a&&b===Ext.getDom(c)):false},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(a){var b=a.prototype,c={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var d;if(Ext.isGecko){d=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){d=120}else{d=12}d*=3}else{d=120}}return d}())};Ext.apply(a,c);Ext.apply(b,c);b.getTrueXY=b.getXY}));Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:(function(){var d,f={},c;if(!Ext.isIE9m&&document.createEvent){d={createHtmlEvent:function(l,j,h,g){var k=l.createEvent("HTMLEvents");k.initEvent(j,h,g);return k},createMouseEvent:function(v,t,n,m,p,l,j,k,g,s,r,o,q){var h=v.createEvent("MouseEvents"),u=v.defaultView||window;if(h.initMouseEvent){h.initMouseEvent(t,n,m,u,p,l,j,l,j,k,g,s,r,o,q)}else{h=v.createEvent("UIEvents");h.initEvent(t,n,m);h.view=u;h.detail=p;h.screenX=l;h.screenY=j;h.clientX=l;h.clientY=j;h.ctrlKey=k;h.altKey=g;h.metaKey=r;h.shiftKey=s;h.button=o;h.relatedTarget=q}return h},createUIEvent:function(n,l,j,h,k){var m=n.createEvent("UIEvents"),g=n.defaultView||window;m.initUIEvent(l,j,h,g,k);return m},fireEvent:function(j,g,h){j.dispatchEvent(h)}}}else{if(document.createEventObject){c={0:1,1:4,2:2};d={createHtmlEvent:function(l,j,h,g){var k=l.createEventObject();k.bubbles=h;k.cancelable=g;return k},createMouseEvent:function(u,t,n,m,p,l,j,k,g,s,r,o,q){var h=u.createEventObject();h.bubbles=n;h.cancelable=m;h.detail=p;h.screenX=l;h.screenY=j;h.clientX=l;h.clientY=j;h.ctrlKey=k;h.altKey=g;h.shiftKey=s;h.metaKey=r;h.button=c[o]||o;h.relatedTarget=q;return h},createUIEvent:function(m,k,h,g,j){var l=m.createEventObject();l.bubbles=h;l.cancelable=g;return l},fireEvent:function(j,g,h){j.fireEvent("on"+g,h)}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(j,k){var h=k[0],g=k[1];f[j]=function(n,l){var m=d.createHtmlEvent(j,h,g);d.fireEvent(n,j,m)}});function b(j,h){var g=(j!="mousemove");return function(n,k){var m=k.getXY(),l=d.createMouseEvent(n.ownerDocument,j,true,g,h,m[0],m[1],k.ctrlKey,k.altKey,k.shiftKey,k.metaKey,k.button,k.relatedTarget);d.fireEvent(n,j,l)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(g){f[g]=b(g,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(j,k){var h=k[0],g=k[1];f[j]=function(n,l){var m=d.createUIEvent(n.ownerDocument,j,h,g,1);d.fireEvent(n,j,m)}});if(!d){f={};d={}}function a(h,g){}return function(k){var j=this,h=f[j.type]||a,g=k?(k.dom||k):j.getTarget();h(g,j)}}()),preventDefault:function(){var b=this,a=b.browserEvent;if(typeof a.type!=="unknown"){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false;if(a.ctrlKey||a.keyCode>111&&a.keyCode<124){a.keyCode=-1}}}return b},stopPropagation:function(){var b=this,a=b.browserEvent;if(typeof a.type!=="unknown"){if(b.mousedownEvents[b.type]){Ext.GlobalEvents.fireMouseDown(b)}arguments.callee.$previous.call(this)}return b},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var a=this,d,c=function(f){if(f.keyCode===9){a.forwardTab=!f.shiftKey}},b=function(f){if(f.keyCode===9){delete a.forwardTab}};if(Ext.isIE9m){d={1:0,4:1,2:2};a.override({statics:{enableIEAsync:function(h){var f,g={};for(f in h){g[f]=h[f]}return g}},constructor:function(j,k,g,f){var h=this;h.callParent([j,k,g,f]);h.button=d[j.button];h.toElement=j.toElement;h.fromElement=j.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(f){this.browserEvent=this.self.enableIEAsync(f)},getRelatedTarget:function(g,l,f){var j=this,h,k;if(!j.relatedTarget){h=j.type;if(j.mouseLeaveRe.test(h)){k=j.toElement}else{if(j.mouseEnterRe.test(h)){k=j.fromElement}}if(k){j.relatedTarget=j.self.resolveTextNode(k)}}return j.callParent([g,l,f])}});document.attachEvent("onkeydown",c);document.attachEvent("onkeyup",b);window.attachEvent("onunload",function(){document.detachEvent("onkeydown",c);document.detachEvent("onkeyup",b)})}else{if(document.addEventListener){document.addEventListener("keydown",c,true);document.addEventListener("keyup",b,true)}}});(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{reEnterCount:0,targetType:"element",idOrClassSelectorRegex:/^([#|\.])([\w\-]+)$/,classNameSplitRegex:/\s+/,SELECTOR_ALL:"*",captureEvents:{resize:1,focus:1,blur:1,paste:1,input:1,change:1,animationstart:1,animationend:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var j=this,k=document,g=k.defaultView,l=j.eventToVendorMap={},f=j.vendorToEventMap={},a=j.handledEvents,d=Ext.browser,c,h,b;j.captureSubscribers={};j.directSubscribers={};j.globalListeners={};if((Ext.os.is.iOS&&Ext.os.version.getMajor()<5)||!(g&&g.addEventListener)){j.target=k;j.isTargetWin=false}else{j.target=g;j.isTargetWin=true}j.initHandlers();if(a){for(c=0,h=a.length;c<h;c++){this.addDelegatedListener(a[c])}}else{if(d.is.WebKit){l.transitionend=d.getVendorProperyName("transitionEnd");l.animationstart=d.getVendorProperyName("animationStart");l.animationend=d.getVendorProperyName("animationEnd");for(b in l){f[l[b]]=b}}}return Ext.event.publisher.Publisher.prototype.constructor.call(this)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a)},handles:function(){return false},getSubscribers:function(b,a){var d=a?this.captureSubscribers:this.subscribers,c=d[b];if(!c){c=d[b]={id:{$length:0},className:{$length:0},selector:[],all:0,$length:0}}return c},getDirectSubscribers:function(f,a){var c=this.directSubscribers,d=c[f]||(c[f]={}),b=d[a]||(d[a]={$length:0});return b},addDelegatedListener:function(a){this.target.addEventListener(a,this.onDelegatedEvent,this.captureEvents[a])},removeDelegatedListener:function(a){this.target.removeEventListener(a,this.onDelegatedEvent,this.captureEvents[a])},addDirectListener:function(b,c,a){c.addEventListener(b,this.onDirectEvent,a)},removeDirectListener:function(b,c,a){c.removeEventListener(b,this.onDirectEvent,a)},subscribe:function(l,j,q,a){var n=this,p=!!q.capture,h=l.match(n.idOrClassSelectorRegex),b,d,f,c,k,g,m,o;if(q.delegated!==false&&!n.directEvents[j]&&!(l==="#ext-window"&&!n.isTargetWin)){if(!n.handledEvents&&!n.globalListeners[j]){n.addDelegatedListener(n.eventToVendorMap[j]||j);this.globalListeners[j]=1}}else{g=a.dom;k=this.getDirectSubscribers(g.id,j);if(++k.$length===1){n.addDirectListener(j,g,p)}if(!h){(k.selector||(k.selector=[])).push(l)}return}b=n.getSubscribers(j,p);d=b.id;f=b.className;c=b.selector;if(h){m=h[1];o=h[2];if(m==="#"){if(d.hasOwnProperty(o)){d[o]++;return}d[o]=1;d.$length++}else{if(f.hasOwnProperty(o)){f[o]++;return}f[o]=1;f.$length++}}else{if(l===this.SELECTOR_ALL){b.all++}else{if(c.hasOwnProperty(l)){c[l]++;return}c[l]=1;c.push(l)}}b.$length++},unsubscribe:function(m,k,q,s,b){var o=this,r=!!s.capture,j=m.match(o.idOrClassSelectorRegex),a,f,g,c,l,n,p,h,d;if(s.delegated===false||o.directEvents[k]||(m===Ext.windowId&&!o.isTargetWin)){h=b.dom;d=h.id;l=o.getDirectSubscribers(d,k);if(q){if(l.$length){o.removeDirectListener(k,h,r)}delete o.directSubscribers[d]}else{if(!--l.$length){o.removeDirectListener(k,h,r);delete o.directSubscribers[d][k]}else{if(!j){Ext.Array.remove(l.selector,m)}}}return}a=o.getSubscribers(k,r);f=a.id;g=a.className;c=a.selector;if(j){n=j[1];p=j[2];if(n==="#"){if(!f.hasOwnProperty(p)||(!q&&--f[p]>0)){return}delete f[p];f.$length--}else{if(!g.hasOwnProperty(p)||(!q&&--g[p]>0)){return}delete g[p];g.$length--}}else{if(m===o.SELECTOR_ALL){if(q){a.all=0}else{a.all--}}else{if(!c.hasOwnProperty(m)||(!q&&--c[m]>0)){return}delete c[m];Ext.Array.remove(c,m)}}a.$length--},getPropagatingTargets:function(b){var a=[];if(!b){return a}do{a[a.length]=b;b=b.parentNode}while(b);return a},dispatch:function(c,a,b){b.push(b[0].target);Ext.event.publisher.Publisher.prototype.dispatch.apply(this,arguments)},publish:function(g,j,a){var l=this.getSubscribers(g,true),c=this.getSubscribers(g),b=this.getSubscribers("*",true),n=this.getSubscribers("*"),k=l.$length,f=c.$length,d=b.$length,m=n.$length,h;if(!k&&!f&&!d&&!m){return}if(Ext.isArray(j)){h=j}else{if(this.captureEvents[g]){h=[j]}else{h=this.getPropagatingTargets(j)}}if(!k||!this.doPublish(l,g,h,a,true)){if(d){this.doPublish(b,g,h,a,true)}}if(!a.isStopped&&(!f||!this.doPublish(c,g,h,a))){if(m){this.doPublish(n,g,h,a)}}return this},doPublish:function(g,m,C,y,v){var u=g.id,k=g.className,b=g.selector,s=u.$length>0,a=k.$length>0,o=b.length>0,r=g.all>0,D={},f=[y],t=false,p=this.classNameSplitRegex,l=0,h=C.length,B=1,z,n,x,d,E,q,c,A,w;if(v){l=h-1;h=B=-1}for(z=l;z!==h;z+=B){E=C[z];y.setCurrentTarget(E);if(s){q=(E.tagName==="FORM")?E.getAttribute("id"):(E===window)?"ext-window":E.id;if(q){if(u.hasOwnProperty(q)){t=true;this.dispatch("#"+q,m,f,v)}}}if(a){c=E.className;if(c){A=c.split(p);for(x=0,d=A.length;x<d;x++){c=A[x];if(!D[c]){D[c]=true;if(k.hasOwnProperty(c)){t=true;this.dispatch("."+c,m,f)}}}}}if(y.isStopped){return t}}if(r&&!t){y.setCurrentTarget(y.browserEvent.target);t=true;this.dispatch(this.SELECTOR_ALL,m,f);if(y.isStopped){return t}}if(o){for(x=0,d=C.length;x<d;x++){E=C[x];for(z=0,n=b.length;z<n;z++){w=b[z];if(Ext.fly(E).is(w)){y.setCurrentTarget(E);t=true;this.dispatch(w,m,f)}if(y.isStopped){return t}}}}return t},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else{this.doDelegatedEvent(a)}},doDelegatedEvent:function(f,d){var c=this,a=f.type,b;b=new Ext.event.Event(f);if(c.isEventBlocked(b)){return false}c.beforeEvent(b);a=b.type=c.vendorToEventMap[a]||a;Ext.frameStartTime=f.timeStamp;c.reEnterCount++;c.publish(a,b.target,b);c.reEnterCount--;if(d!==false){c.afterEvent(b)}return b},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a])}else{this.doDirectEvent(a)}},doDirectEvent:function(m){var n=this,o=m.type,b=new Ext.event.Event(m),j,f,c,p,q,a,l,d,h,k,g;if(n.isEventBlocked(b)){return}n.beforeEvent(b);j=b.type=this.vendorToEventMap[o]||o;f=m.currentTarget;c=f.id;p=n.getDirectSubscribers(c,j).selector;q=n.dispatcher;a=n.targetType;l=m.target;d=l;Ext.frameStartTime=m.timeStamp;if(l.navigator){c="ext-window"}b.setCurrentTarget(f);if(p){k=p.length;while(d!==f){for(h=0;h<k;h++){g=p[h];if(Ext.fly(d).is(g)){q.dispatchDirectEvent(a,g,j,[b,l])}}d=d.parentNode}}n.reEnterCount++;q.dispatchDirectEvent(a,"#"+c,j,[b,l]);n.reEnterCount--;n.afterEvent(b)},beforeEvent:function(c){var f=c.browserEvent,a=Ext.event.publisher.Dom,b,d;if(f.type==="touchstart"){b=f.touches;if(b.length===1){d=b[0];a.lastTouchStartX=d.pageX;a.lastTouchStartY=d.pageY}}},afterEvent:function(d){var f=d.browserEvent,c=f.type,b=Ext.event.publisher.Dom,a=Ext.GlobalEvents;if(d.self.pointerEvents[c]&&d.pointerType!=="mouse"){b.lastScreenPointerEventTime=Ext.now()}if(c==="touchend"){b.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&a.hasListeners.idle&&!a.idleEventMask[c]){a.fireEvent("idle")}},isEventBlocked:function(f){var d=this,c=f.type,a=Ext.event.publisher.Dom,b=Ext.now();return(d.blockedPointerEvents[c]&&f.pointerType!=="mouse")||(d.blockedCompatibilityMouseEvents[c]&&(b-a.lastScreenPointerEventTime<1000))||(Ext.supports.TouchEvents&&f.self.mouseEvents[f.type]&&Math.abs(f.pageX-a.lastTouchStartX)<15&&Math.abs(f.pageY-a.lastTouchStartY)<15&&(Ext.now()-a.lastTouchEndTime)<1000)},getSubscribersCount:function(a){return this.getSubscribers(a).$length+this.getSubscribers("*").$length},destroy:function(){var f=this,b=f.handledEvents,c,d,a;if(b){for(c=0,d=b.length;c<d;c++){f.removeDelegatedListener(b[c])}}else{for(a in f.globalListeners){f.removeDelegatedListener(a)}}}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],0));Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(){var b=Ext.event.publisher.Dom,a=b.prototype;if(Ext.isIE9m){b.override({initHandlers:function(){var f=this,d=document.body,g,c;f.callParent();g=f.onDelegatedEvent;c=f.onDirectEvent;f.target=document;f.targetIsWin=false;f.onDelegatedEvent=function(h){h.target=h.srcElement||window;if(h.type==="focusin"){h.relatedTarget=h.fromElement===d?null:h.fromElement}else{if(h.type==="focusout"){h.relatedTarget=h.toElement===d?null:h.toElement}}g.call(f,h)};f.onDirectEvent=function(h){h.target=h.srcElement||window;h.currentTarget=this;c.call(f,h)}},addDelegatedListener:function(c){this.target.attachEvent("on"+c,this.onDelegatedEvent)},removeDelegatedListener:function(c){this.target.detachEvent("on"+c,this.onDelegatedEvent)},addDirectListener:function(c,d){var g=this,f=Ext.Function.bind(g.onDirectEvent,d);g.directSubscribers[d.id][c].fn=f;if(d.attachEvent){d.attachEvent("on"+c,f)}else{g.callParent(arguments)}},removeDirectListener:function(c,d){if(d.detachEvent){d.detachEvent("on"+c,this.directSubscribers[d.id][c].fn)}else{this.callParent(arguments)}}});Ext.apply(a.directEvents,a.captureEvents);a.captureEvents={}}});(Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{alternateClassName:"Ext.event.publisher.TouchGesture",config:{recognizers:{}},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},constructor:function(a){var c=this,d=c.onTouchStart,b=c.onTouchMove=Ext.Function.createAnimationFrame(c.onTouchMove,c),f=c.onTouchEnd=Ext.Function.createAnimationFrame(c.onTouchEnd,c,null,1);c.handlers={touchstart:d,touchmove:b,touchend:f,touchcancel:f,pointerdown:d,pointermove:b,pointerup:f,pointercancel:f,MSPointerDown:d,MSPointerMove:b,MSPointerUp:f,MSPointerCancel:f,mousedown:d,mousemove:b,mouseup:f};c.recognizedEvents={};c.activeTouchesMap={};c.activeTouches=[];c.changedTouches=[];if(Ext.supports.TouchEvents){c.onTargetTouchMove=c.onTargetTouchMove.bind(c);c.onTargetTouchEnd=c.onTargetTouchEnd.bind(c)}c.initConfig(a);return Ext.event.publisher.Dom.prototype.constructor.call(this)},applyRecognizers:function(b){var c,a;for(c in b){a=b[c];if(a){this.registerRecognizer(a)}}return b},handles:function(a){var b=this.handledEventsMap;return !!b[a]||!!b["*"]||a==="*"||this.recognizedEvents.hasOwnProperty(a)},registerRecognizer:function(a){var f=this,g=f.recognizedEvents,b=a.getHandledEvents(),c,d;a.setOnRecognized(f.onRecognized);a.setCallbackScope(f);for(c=0,d=b.length;c<d;c++){g[b[c]]=1}},onRecognized:function(d,g,a){var j=this,k=g.changedTouches,h=k.length,l,f,c,b;a=a||{};a.type=d;a.target=k[0].target;a.isStopped=false;g=g.chain(a);if(h>1){l=[];for(c=0;c<h;c++){b=k[c];l.push(b.targets)}f=j.getCommonTargets(l)}else{f=k[0].targets}j.publish(d,f,g)},getCommonTargets:function(a){var k=a[0],g=a.length;if(g===1){return k}var d=[],f=1,h,b,c;while(true){h=k[k.length-f];if(!h){return d}for(c=1;c<g;c++){b=a[c];if(b[b.length-f]!==h){return d}}d.unshift(h);f++}return d},invokeRecognizers:function(c,f){var b=this.getRecognizers(),d,a;if(c==="onStart"){for(d in b){b[d].isActive=true}}for(d in b){a=b[d];if(a.isActive&&a[c].call(a,f)===false){a.isActive=false}}},updateTouches:function(j,b){var n=this,r=j.browserEvent,f=r.changedTouches||[r],a=n.activeTouches,k=n.activeTouchesMap,p=[],m,h,d,g,c,l,q,o;for(c=0,l=f.length;c<l;c++){m=f[c];if("identifier" in m){h=m.identifier}else{if("pointerId" in m){h=m.pointerId}else{h=1}}d=k[h];if(b){delete k[h];Ext.Array.remove(a,d)}else{if(!d){g=Ext.event.Event.resolveTextNode(m.target);d=k[h]={identifier:h,target:g,targets:n.getPropagatingTargets(g)};a.push(d)}}q=m.pageX;o=m.pageY;d.pageX=q;d.pageY=o;d.point=new Ext.util.Point(q,o);p.push(d)}j.touches=Ext.Array.clone(a);j.changedTouches=p},doDelegatedEvent:function(b){var a=this;b=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,b,false);if(b){if(!b.button||b.button<1){a.handlers[b.type].call(a,b)}a.afterEvent(b)}},onTouchStart:function(c){var a=this,b=c.target;if(c.browserEvent.type==="touchstart"){b.addEventListener("touchmove",a.onTargetTouchMove);b.addEventListener("touchend",a.onTargetTouchEnd);b.addEventListener("touchcancel",a.onTargetTouchEnd)}a.updateTouches(c);if(!a.isStarted){a.isStarted=true;a.invokeRecognizers("onStart",c);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}a.invokeRecognizers("onTouchStart",c)},onTouchMove:function(a){if(this.isStarted){this.updateTouches(a);if(a.changedTouches.length>0){this.invokeRecognizers("onTouchMove",a)}}},onTouchEnd:function(b){var a=this;if(!a.isStarted){return}a.updateTouches(b,true);a.invokeRecognizers(a.isCancelEvent[b.type]?"onTouchCancel":"onTouchEnd",b);if(!a.activeTouches.length){a.isStarted=false;a.invokeRecognizers("onEnd",b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else{this.doTargetTouchMove(a)}},doTargetTouchMove:function(a){if(!Ext.getBody().contains(a.target)){this.onTouchMove(new Ext.event.Event(a))}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else{this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(c){var a=this,b=c.target;b.removeEventListener("touchmove",a.onTargetTouchMove);b.removeEventListener("touchend",a.onTargetTouchEnd);b.removeEventListener("touchcancel",a.onTargetTouchEnd);if(!Ext.getBody().contains(b)){a.onTouchEnd(new Ext.event.Event(c))}}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture",Ext.event.publisher,"TouchGesture"],function(){var b=[],a=Ext.supports,c=a.TouchEvents;if(a.PointerEvents){b.push("pointerdown","pointermove","pointerup","pointercancel")}else{if(a.MSPointerEvents){b.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel")}else{if(c){b.push("touchstart","touchmove","touchend","touchcancel")}}}if(!b.length||(c&&Ext.isWebKit&&Ext.os.is.Desktop)){b.push("mousedown","mousemove","mouseup")}this.prototype.handledEvents=b}));Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){if(Ext.isIE9m){this.override({updateTouches:function(c,a){var d=c.browserEvent,b=c.getXY();d.pageX=b[0];d.pageY=b[1];this.callParent([c,a])},initHandlers:function(){var a=this,b;a.callParent();b=a.onDelegatedEvent;a.onDelegatedEvent=function(c){b.call(a,Ext.event.Event.enableIEAsync(c))}}})}});(Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{handledEvents:["focusin","focusout"],syntheticEvents:{focusenter:true,focusleave:true},eventMap:{focus:"focusenter",focusin:"focusenter",blur:"focusleave",focusout:"focusleave"},handles:function(a){return this.syntheticEvents[a]},doDelegatedEvent:function(c,b){var a=this;c=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,c,false);if(c){a.processSyntheticEvent(a.eventMap[c.type],c);if(b){a.afterEvent(c)}}},createSyntheticEvent:function(b,a,c){var d=new Ext.event.Event(a.browserEvent);d.type=b;if(c){d.relatedTarget=d.target;d.target=c}else{d.target=a.target;d.relatedTarget=a.relatedTarget||null}return d},processSyntheticEvent:function(f,j,l){var k=this,a,b,c,d,h,g;a=k.getSubscribers(f);if(a.$length){b=k.gatherSubscriberNodes(f,a);g=[];for(d=0,h=b.length;d<h;d++){c=b[d];if(k.isEventTarget(c,f,j,l)){g.push(c)}}for(d=0,h=g.length;d<h;d++){c=g[d];if(c){k.fireNodeEvent(c,f,j,l)}}}},gatherSubscriberNodes:function(g,a){var d=a.id,f=a.className,b=a.selector,j=d.$length>0,h=f.$length>0,c=b.$length>0,m=[],l,k;if(j){for(k in d){if(k==="$length"){continue}l=document.getElementById(k);if(l){m.push(l)}}}if(h){Ext.Error.raise("Class name subscribers in Focus publisher")}if(c){Ext.Error.raise("Selector subscribers in Focus publisher")}return m},isEventTarget:function(c,a,d,b){return a==="focusenter"?this.isFocusEnterTarget(c,d,b):a==="focusleave"?this.isFocusLeaveTarget(c,d,b):null},isFocusEnterTarget:function(c,f,d){var b=f.browserEvent,h=d||b.relatedTarget,g=b.target,a;if(g===window){return false}a=Ext.fly(c);if(!a.isAncestor(g)){return false}if(!h){return true}if(!a.isAncestor(h)){return true}return false},isFocusLeaveTarget:function(c,f,d){var b=f.browserEvent,h=d!==undefined?d:b.target,g=d!==undefined?b.target:b.relatedTarget,a;if(h===window||g===window){return false}a=Ext.fly(c);if(!a.isAncestor(h)){return false}if(!g){return true}if(!a.isAncestor(g)){return true}return false},fireNodeEvent:function(d,b,a,c){var f=this.createSyntheticEvent(b,a,c);f.setCurrentTarget(d);this.dispatch("#"+d.id,b,[f,d])}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(){if(!Ext.supports.FocusinFocusoutEvents){document.addEventListener("blur",function(a){if(a.target===window||a.target===document){delete document.previousActiveElement}else{document.previousActiveElement=a.target}},true);this.override({handledEvents:["focus"],doDelegatedEvent:function(d,c){var b=this,a;d=b.callSuper([d,false]);if(d){a=document.previousActiveElement;if(a!==undefined){b.processSyntheticEvent("focusleave",d,a)}b.processSyntheticEvent(b.eventMap[d.type],d,a||null);if(c){b.afterEvent(d)}}}})}}));Ext.onReady(function(){var a=Ext.event.Dispatcher.getInstance();a.setPublishers({dom:new Ext.event.publisher.Dom(),gesture:new Ext.event.publisher.Gesture({recognizers:{drag:new Ext.event.gesture.Drag(),tap:new Ext.event.gesture.Tap(),doubleTap:new Ext.event.gesture.DoubleTap(),longPress:new Ext.event.gesture.LongPress(),swipe:new Ext.event.gesture.Swipe(),pinch:new Ext.event.gesture.Pinch(),rotate:new Ext.event.gesture.Rotate(),edgeSwipe:new Ext.event.gesture.EdgeSwipe()}}),focus:new Ext.event.publisher.Focus()});Ext.get(window).on("unload",a.destroy,a)},null,{priority:2000});Ext.apply(Ext,{SSL_SECURE_URL:Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank",BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="});Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=true;a.addStateEvents(["changeregion","changeweight"]);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,"region");b=a.addPropertyToState(b,"weight");return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return(a&&a.isBorderLayout)?a:null},setRegion:function(l){var k=this,c,d=k.region;if(l!==d){c=k.getOwningBorderLayout();if(c){var g=c.regionFlags[l],m=k.placeholder,a=k.splitter,b=c.owner,o=c.regionMeta,f=k.collapsed||k.floated,n,j,h;if(k.fireEventArgs("beforechangeregion",[k,l])===false){return d}Ext.suspendLayouts();k.region=l;Ext.apply(k,g);if(k.updateCollapseTool){k.updateCollapseTool()}if(a){Ext.apply(a,g);a.updateOrientation();j=b.items;h=j.indexOf(k);if(h>=0){n=o[l].splitterDelta;if(j.getAt(h+n)!==a){j.remove(a);h=j.indexOf(k);if(n>0){++h}j.insert(h,a)}}}if(m){if(f){k.expand(false)}b.remove(m);k.placeholder=null;if(f){k.collapse(null,false)}}b.updateLayout();Ext.resumeLayouts(true);k.fireEventArgs("changeregion",[k,d])}else{k.region=l}}return d},setWeight:function(d){var c=this,b=c.getOwningBorderContainer(),f=c.placeholder,a=c.weight;if(d!==a){if(c.fireEventArgs("beforechangeweight",[c,d])!==false){c.weight=d;if(f){f.weight=d}if(b){b.updateLayout()}c.fireEventArgs("changeweight",[c,a])}}return a}},function(a){var b=a.prototype;b.setBorderRegion=b.setRegion;b.setRegionWeight=b.setWeight});Ext.define("ExtThemeNeptune.Component",{override:"Ext.Component",initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=false}},privates:{initStyles:function(){var c=this,b=c.hasOwnProperty("border"),a=c.border;if(c.dock){c.border=null}arguments.callee.$previous.apply(this,arguments);if(b){c.border=a}else{delete c.border}}}});(Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(o){var x=this,r=o.length,q={elseif:"elif"},u=x.topRe,c=x.actionsRe,f,d,k,p,h,l,j,w,v,b,g,a,n;x.level=0;x.stack=d=[];for(f=0;f<r;f=b){u.lastIndex=f;p=u.exec(o);if(!p){x.doText(o.substring(f,r));break}v=p.index;b=u.lastIndex;if(f<v){k=o.substring(f,v);if(!(n&&Ext.String.trim(k)==="")){x.doText(k)}}n=false;if(p[1]){b=o.indexOf("%}",v+2);x.doEval(o.substring(v+2,b));b+=2}else{if(p[2]){b=o.indexOf("]}",v+2);x.doExpr(o.substring(v+2,b));b+=2}else{if(p[3]){x.doTag(p[3])}else{if(p[4]){g=null;while((w=c.exec(p[4]))!==null){k=w[2]||w[3];if(k){k=Ext.String.htmlDecode(k);h=w[1];h=q[h]||h;g=g||{};l=g[h];if(typeof l=="string"){g[h]=[l,k]}else{if(l){g[h].push(k)}else{g[h]=k}}}}if(!g){if(x.elseRe.test(p[4])){x.doElse()}else{if(x.defaultRe.test(p[4])){x.doDefault()}else{x.doTpl();d.push({type:"tpl"})}}}else{if(g["if"]){x.doIf(g["if"],g);d.push({type:"if"})}else{if(g["switch"]){x.doSwitch(g["switch"],g);d.push({type:"switch"});n=true}else{if(g["case"]){x.doCase(g["case"],g)}else{if(g.elif){x.doElseIf(g.elif,g)}else{if(g["for"]){++x.level;if(a=x.propRe.exec(p[4])){g.propName=a[1]||a[2]}x.doFor(g["for"],g);d.push({type:"for",actions:g})}else{if(g.foreach){++x.level;if(a=x.propRe.exec(p[4])){g.propName=a[1]||a[2]}x.doForEach(g.foreach,g);d.push({type:"foreach",actions:g})}else{if(g.exec){x.doExec(g.exec,g);d.push({type:"exec",actions:g})}}}}}}}}}else{if(p[0].length===5){d.push({type:"tpl"})}else{j=d.pop();x.doEnd(j.type,j.actions);if(j.type=="for"||j.type=="foreach"){--x.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0));(Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(a){var c=this,b=c.generate(a);return c.useEval?c.evalTpl(b):(new Function("Ext",b))(Ext)},generate:function(a){var d=this,b="var fm=Ext.util.Format,ts=Object.prototype.toString;",c;d.maxLevel=0;d.body=["var c0=values, a0="+d.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(d.definitions){if(typeof d.definitions==="string"){d.definitions=[d.definitions,b]}else{d.definitions.push(b)}}else{d.definitions=[b]}d.switches=[];d.parse(a);d.definitions.push((d.useEval?"$=":"return")+" function ("+d.fnArgs+") {",d.body.join(""),"}");c=d.definitions.join("\n");d.definitions.length=d.body.length=d.switches.length=0;delete d.definitions;delete d.body;delete d.switches;return c},doText:function(c){var b=this,a=b.body;c=c.replace(b.aposRe,"\\'").replace(b.newLineRe,"\\n");if(b.useIndex){a.push("out[out.length]='",c,"'\n")}else{a.push("out.push('",c,"')\n")}},doExpr:function(b){var a=this.body;a.push("if ((v="+b+") != null) out");if(this.useIndex){a.push("[out.length]=v+''\n")}else{a.push(".push(v+'')\n")}},doTag:function(a){var b=this.parseTag(a);if(b){this.doExpr(b)}else{this.doText("{"+a+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(a){this.body.push(a,"\n")},doIf:function(b,c){var a=this;if(b==="."){a.body.push("if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("if (",a.parseTag(b),") {\n")}else{a.body.push("if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(b==="."){a.body.push("else if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("} else if (",a.parseTag(b),") {\n")}else{a.body.push("} else if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doSwitch:function(c){var b=this,a;if(c==="."||c==="#"){a=c==="."?"values":"xindex";b.body.push("switch (",a,") {\n")}else{if(b.propNameRe.test(c)){b.body.push("switch (",b.parseTag(c),") {\n")}else{b.body.push("switch (",b.addFn(c),b.callFn,") {\n")}}b.switches.push(0)},doCase:function(f){var d=this,c=Ext.isArray(f)?f:[f],g=d.switches.length-1,a,b;if(d.switches[g]){d.body.push("break;\n")}else{d.switches[g]++}for(b=0,g=c.length;b<g;++b){a=d.intRe.exec(c[b]);c[b]=a?a[1]:("'"+c[b].replace(d.aposRe,"\\'")+"'")}d.body.push("case ",c.join(": case "),":\n")},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push("break;\n")}else{a.switches[b]++}a.body.push("default:\n")},doEnd:function(b,d){var c=this,a=c.level-1;if(b=="for"||b=="foreach"){if(d.exec){c.doExec(d.exec)}c.body.push("}\n");c.body.push("parent=p",a,";values=r",a+1,";xcount=n"+a+";xindex=i",a,"+1;xkey=k",a,";\n")}else{if(b=="if"||b=="switch"){c.body.push("}\n")}}},doFor:function(f,h){var d=this,c,b=d.level,a=b-1,g;if(f==="."){c="values"}else{if(d.propNameRe.test(f)){c=d.parseTag(f)}else{c=d.addFn(f)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(f=="."){g="c"+b}else{g="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=0,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",g,"\n","if (c",b,"){if(a",b,"){n",b,"=c",b,".length;}else if (c",b,".isMixedCollection){c",b,"=c",b,".items;n",b,"=c",b,".length;}else if(c",b,".isStore){c",b,"=c",b,".data.items;n",b,"=c",b,".length;}else{c",b,"=[c",b,"];n",b,"=1;}}\n","for (xcount=n",b,";i",b,"<n"+b+";++i",b,"){\n","values=c",b,"[i",b,"]");if(h.propName){d.body.push(".",h.propName)}d.body.push("\n","xindex=i",b,"+1\n");if(h.between){d.body.push('if(xindex>1){ out.push("',h.between,'"); } \n')}},doForEach:function(f,h){var d=this,c,b=d.level,a=b-1,g;if(f==="."){c="values"}else{if(d.propNameRe.test(f)){c=d.parseTag(f)}else{c=d.addFn(f)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(f=="."){g="c"+b}else{g="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=-1,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",g,"\n","for(k",b," in c",b,"){\n","xindex=++i",b,"+1;\n","xkey=k",b,";\n","values=c",b,"[k",b,"];");if(h.propName){d.body.push(".",h.propName)}if(h.between){d.body.push('if(xindex>1){ out.push("',h.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(a){return"Array.isArray(c"+a+")"}:function(a){return"ts.call(c"+a+')==="[object Array]"'},doExec:function(d,f){var c=this,a="f"+c.definitions.length,b=c.guards[c.strict?0:1];c.definitions.push("function "+a+"("+c.fnArgs+") {",b.doTry," var $v = values; with($v) {","  "+d," }",b.doCatch,"}");c.body.push(a+c.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(a){var d=this,b="f"+d.definitions.length,c=d.guards[d.strict?0:1];if(a==="."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return values","}")}else{if(a===".."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return parent","}")}else{d.definitions.push("function "+b+"("+d.fnArgs+") {",c.doTry," var $v = values; with($v) {","  return("+a+")"," }",c.doCatch,"}")}}return b},parseTag:function(b){var h=this,a=h.tagRe.exec(b),f,j,d,g,c;if(!a){return null}f=a[1];j=a[2];d=a[3];g=a[4];if(f=="."){if(!h.validTypes){h.definitions.push("var validTypes={string:1,number:1,boolean:1};");h.validTypes=true}c='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(f=="#"){c="xindex"}else{if(f=="$"){c="xkey"}else{if(f.substr(0,7)=="parent."){c=f}else{if(isNaN(f)&&f.indexOf("-")==-1&&f.indexOf(".")!=-1){c="values."+f}else{c="values['"+f+"']"}}}}}if(g){c="("+c+g+")"}if(j&&h.useFormat){d=d?","+d:"";if(j.substr(0,5)!="this."){j="fm."+j+"("}else{j+="("}}else{return c}return j+c+d+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var a=this.prototype;a.fnArgs="out,values,parent,xindex,xcount,xkey";a.callFn=".call(this,"+a.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{emptyObj:{},fn:null,strict:false,apply:function(a,b){return this.applyOut(a,[],b).join("")},applyOut:function(a,b,d){var f=this,c;if(!f.fn){c=new Ext.util.XTemplateCompiler({useFormat:f.disableFormats!==true,definitions:f.definitions,strict:f.strict});f.fn=c.compile(f.html)}if(f.strict){f.fn(b,a,d||f.emptyObj,1,1)}else{try{f.fn(b,a,d||f.emptyObj,1,1)}catch(g){}}return b},compile:function(){return this},statics:{getTpl:function(b,d){var c=b[d],a;if(c&&!c.isTemplate){c=Ext.ClassManager.dynInstantiate("Ext.XTemplate",c);if(b.hasOwnProperty(d)){a=b}else{for(a=b.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass){}}a[d]=c;c.owner=a}return c||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="alert" aria-live="polite" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{id}-inputEl">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel"><div>{fieldLabel}</div></tpl>',"</tpl>",'<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel">{fieldLabel}\n</tpl>',"</tpl>",'<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",fieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var b=this.tip,a,c;if(b){return}a={id:"ext-form-error-tip",ui:"form-invalid"};if(Ext.supports.Touch){a.dismissDelay=0;a.anchor="top";a.showDelay=0;a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}b=this.tip=Ext.create("Ext.tip.QuickTip",a);c=Ext.apply({},b.tagConfig);c.attribute="errorqtip";b.setTagConfig(c)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(!a.activeErrorsTpl){if(a.msgTarget=="title"){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else{a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+"-"+a.ui]);a.lastActiveError="";a.enableBubble("errorchange")},trimLabelSeparator:function(){var c=this,d=c.labelSeparator,a=c.fieldLabel||"",b=a.substr(a.length-1);return b===d?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(c){c=c||"";var d=this,f=d.labelSeparator,b=d.labelEl,a=d.errorWrapEl,h=(d.labelAlign!=="top"),g=d.errorWrapUnderSideLabelCls;d.fieldLabel=c;if(d.rendered){if(Ext.isEmpty(c)&&d.hideEmptyLabel){b.setDisplayed("none");if(h&&a){a.removeCls(g)}}else{if(f){c=d.trimLabelSeparator()+f}b.first().setHtml(c);b.setDisplayed("");if(h&&a){a.addCls(g)}}d.updateLayout()}},getInsertionRenderData:function(d,f){var b=f.length,a,c;while(b--){a=f[b];c=this[a];if(c){if(typeof c!="string"){if(!c.isTemplate){c=Ext.XTemplate.getTpl(this,a)}c=c.apply(d)}}d[a]=c||""}return d},getLabelableRenderData:function(){var q=this,t=q.labelAlign,f=(t==="top"),n=(t==="right"),k=(q.msgTarget==="side"),g=(q.msgTarget==="under"),s=q.errorMsgCls,h=q.labelPad,p=q.labelWidth,b=q.labelClsExtra||"",j=k?q.errorWrapSideCls:q.errorWrapUnderCls,a="",m="",d=q.hasVisibleLabel(),o=q.autoFitErrors,l=q.defaultBodyWidth,c,r;if(f){b+=" "+q.topLabelCls;if(h){m="padding-bottom:"+h+"px;"}if(k&&!o){b+=" "+q.topLabelSideErrorCls}}else{if(n){b+=" "+q.rightLabelCls}if(h){a+=q.getHorizontalPaddingStyle()+h+"px;"}a+="width:"+(p+(h?h:0))+"px;";m="width:"+p+"px"}if(d){if(!f&&g){j+=" "+q.errorWrapUnderSideLabelCls}}else{a+="display:none;"}if(l){c="min-width:"+l+"px;max-width:"+l+"px;"}r={id:q.id,inputId:q.getInputId(),labelCls:q.labelCls,labelClsExtra:b,labelStyle:a+(q.labelStyle||""),labelInnerStyle:m,labelInnerCls:q.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:c,baseBodyCls:q.baseBodyCls,fieldBodyCls:q.fieldBodyCls,extraFieldBodyCls:q.extraFieldBodyCls,errorWrapCls:q.errorWrapCls,errorWrapExtraCls:j,renderError:k||g,invalidMsgCls:k?q.invalidIconCls:g?q.invalidUnderCls:"",errorMsgCls:s,growCls:q.grow?q.growCls:"",errorWrapStyle:(k&&!o)?"visibility:hidden":"display:none",fieldLabel:q.getFieldLabel(),labelSeparator:q.labelSeparator};q.getInsertionRenderData(r,q.labelableInsertions);return r},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls("x-"+a.ownerLayout.type+"-form-item")}},onLabelRender:function(){var d=this,c={},g=Ext.Element,a=d.errorWrapEl,f,b;if(a){a.setVisibilityMode((d.msgTarget==="side"&&!d.autoFitErrors)?g.VISIBILITY:g.DISPLAY)}if(d.extraMargins){f=d.el.getMargin();for(b in f){if(f.hasOwnProperty(b)){c["margin-"+b]=(f[b]+d.extraMargins[b])+"px"}}d.el.setStyle(c)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(h){var f=this,g=f.errorWrapEl,c=f.msgTarget,b=c==="side",k=c==="qtip",a,d,j;h=Ext.Array.from(h);d=f.getTpl("activeErrorsTpl");f.activeErrors=h;a=f.activeError=d.apply({fieldLabel:f.fieldLabel,errors:h,listCls:Ext.plainListCls});f.renderActiveError();if(f.rendered){if(b){f.errorEl.dom.setAttribute("data-errorqtip",a)}else{if(k){f.getActionEl().dom.setAttribute("data-errorqtip",a)}else{if(c==="title"){f.getActionEl().dom.setAttribute("title",a)}}}if(b||k){Ext.form.Labelable.initTip()}if(!f.msgTargets[c]){j=Ext.get(c);if(j){j.dom.innerHTML=a}}}if(g){g.setVisible(h.length>0);if(b&&f.autoFitErrors){f.labelEl.addCls(f.topLabelSideErrorCls)}f.updateLayout()}},unsetActiveError:function(){var c=this,a=c.errorWrapEl,b=c.msgTarget,d;delete c.activeError;delete c.activeErrors;c.renderActiveError();if(c.rendered){if(b==="qtip"){c.getActionEl().dom.removeAttribute("data-errorqtip")}else{if(b==="title"){c.getActionEl().dom.removeAttribute("title")}}if(!c.msgTargets[b]){d=Ext.get(b);if(d){d.dom.innerHTML=""}}if(a){a.hide();if(b==="side"&&c.autoFitErrors){c.labelEl.removeCls(c.topLabelSideErrorCls)}c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.getActiveError(),a=!!b;if(b!==c.lastActiveError){c.lastActiveError=b;c.fireEvent("errorchange",c,b)}if(c.rendered&&!c.isDestroyed&&!c.preventMark){c.toggleInvalidCls(a);if(c.errorEl){c.errorEl.dom.innerHTML=b}}},toggleInvalidCls:function(a){this.el[a?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}}));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var d=this,c=d.valuePublishEvent,a,b;d.initValue();if(Ext.isString(c)){d.on(c,d.publishValue,d)}else{for(b=0,a=c.length;b<a;++b){d.on(c[b],d.publishValue,d)}}},initValue:function(){var a=this;a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--;a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.valueFrom(b,""))===String(Ext.valueFrom(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(a,b){var c=this,d=null;if(!c.disabled&&(c.submitValue||!b)){d={};d[c.getFieldIdentifier()]=c.getValue()}return d},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var c=this,b,a;if(!c.suspendCheckChange){b=c.getValue();a=c.lastValue;if(!c.isDestroyed&&c.didValueChange(b,a)){c.lastValue=b;c.fireEvent("change",c,b,a);c.onChange(b,a)}}},didValueChange:function(b,a){return !this.isEqual(b,a)},onChange:function(a){var b=this;if(b.validateOnChange){b.validate()}b.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(d){var f=[],c=this.getValidationField(),b=this.getValidation(),a;if(c){a=c.validate(d);if(a!==true){f.push(a)}}if(b&&b!==true){f.push(b)}return f},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){var a=this,b=a.isValid();if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(a,b){if(b){this.validate()}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:"x-form-readonly",validateOnBlur:true,hasFocus:false,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:false,stretchInputElFixed:true,initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.subTplData=a.subTplData||{};a.initLabelable();a.initField();if(!a.name){a.name=a.getInputId()}if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls("x-form-type-"+a.inputType)},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(b){var d=this,c=d.inputType,a=d.getInputId(),f;f=Ext.apply({ui:d.ui,id:a,cmpId:d.id,name:d.name||a,disabled:d.disabled,readOnly:d.readOnly,value:d.getRawValue(),type:c,fieldCls:d.fieldCls,fieldStyle:d.getFieldStyle(),childElCls:b.childElCls,tabIdx:d.tabIndex,inputCls:d.inputCls,typeCls:"x-form-"+(d.isTextInput?"text":c),role:d.ariaRole},d.subTplData);d.getInsertionRenderData(f,d.subTplInsertions);return f},getSubTplMarkup:function(b){var c=this,d=c.getSubTplData(b),f=c.getTpl("preSubTpl"),g=c.getTpl("postSubTpl"),a="";if(f){a+=f.apply(d)}a+=c.getTpl("fieldSubTpl").apply(d);if(g){a+=g.apply(d)}return a},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;if(c){c.applyStyles(a)}b.fieldStyle=a},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,true):a||""},onRender:function(){(arguments.callee.$previous||Ext.Component.prototype.onRender).apply(this,arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.valueFrom(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(c){var a=this,b=a.rawValue;if(!a.transformRawValue.$nullFn){c=a.transformRawValue(c)}c=Ext.valueFrom(c,"");if(b===undefined||b!==c){a.rawValue=c;if(a.inputEl){a.bindPropertyChange(false);a.inputEl.dom.value=c;a.bindPropertyChange(true)}if(a.rendered&&a.reference){a.publishState("rawValue",c)}}return c},transformRawValue:Ext.identityFn,valueToRaw:function(a){return""+Ext.valueFrom(a,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;Ext.Component.prototype.onBoxReady.call(this);if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onDisable.call(this);if(b){b.dom.disabled=true;if(a.hasActiveError()){a.clearInvalid();a.needsValidateOnEnable=true}}},onEnable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onEnable.call(this);if(b){b.dom.disabled=false;if(a.needsValidateOnEnable){delete a.needsValidateOnEnable;a.forceValidation=true;a.isValid();delete a.forceValidation}}},setReadOnly:function(c){var a=this,b=a.inputEl;c=!!c;a[c?"addCls":"removeCls"](a.readOnlyCls);a.readOnly=c;if(b){b.dom.readOnly=c}else{if(a.rendering){a.setReadOnlyOnBoxReady=true}}a.fireEvent("writeablechange",a,c)},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,a)}},initEvents:function(){var g=this,h=g.inputEl,c,f,j=g.checkChangeEvents,k=g.ignoreChangeRe,b=j.length,d,a;if(h){g.mon(h,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",g.fireKey,g);c=new Ext.util.DelayedTask(g.checkChange,g);g.onChangeEvent=f=function(l){if(!(l.type=="propertychange"&&k.test(l.browserEvent.propertyName))){c.delay(g.checkChangeBuffer)}};for(d=0;d<b;d++){a=j[d];if(a==="propertychange"){g.usesPropertychange=true}g.mon(h,a,f)}}Ext.Component.prototype.initEvents.call(this)},bindPropertyChange:function(c){var b=this,a=b.usesPropertychange;if(a){b[c?"mon":"mun"](b.inputEl,"propertychange",b.onChangeEvent)}},onDirtyChange:function(b){var a=this;a[b?"addCls":"removeCls"](a.dirtyCls);if(a.rendered&&a.reference){a.publishState("dirty",b)}},isValid:function(){var b=this,a=b.disabled,c=b.forceValidation||!a;return c?b.validateValue(b.processRawValue(b.getRawValue())):a},validateValue:function(b){var a=this,d=a.getErrors(b),c=Ext.isEmpty(d);if(!a.preventMark){if(c){a.clearInvalid()}else{a.markInvalid(d)}}return c},markInvalid:function(d){var b=this,a=b.getActiveError(),c;b.setActiveErrors(Ext.Array.from(d));c=b.getActiveError();if(a!==c){b.setError(c)}},clearInvalid:function(){var b=this,a=b.hasActiveError();delete b.needsValidateOnEnable;b.unsetActiveError();if(a){b.setError("")}},setError:function(a){var c=this,b=c.msgTarget,d;if(c.rendered){if(b=="title"||b=="qtip"){d=b=="qtip"?"data-errorqtip":"title";c.getActionEl().dom.setAttribute(d,a||"")}else{c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.hasActiveError(),a=c.invalidCls+"-field";if(c.inputEl){c.inputEl[b?"addCls":"removeCls"]([a,a+"-"+c.ui])}c.mixins.labelable.renderActiveError.call(c)},privates:{applyBind:function(f,c){var b=this,a=c&&c.value,d;d=Ext.Component.prototype.applyBind.call(this,f,c);if(d.value!==a&&b.getInherited().modelValidation){b.updateValueBinding(d)}return d},applyRenderSelectors:function(){var a=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.Component.prototype.initRenderTpl.call(this)},updateValueBinding:function(d){var c=this,b=d.value,a=d.$fieldBinding;if(a){a.destroy();d.$fieldBinding=null}if(b&&b.bindValidationField){c.fieldBinding=b.bindValidationField("setValidationField",c)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindPropertyChange(false);this.callParent(arguments);this.bindPropertyChange(true)}}}}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));Ext.define("FBEditor.override.form.field.Base",{override:"Ext.form.field.Base",msgTarget:"title",tabIndex:1,keyEnterAsTab:false,initComponent:function(){var a=this;(arguments.callee.$previous||Ext.Component.prototype.initComponent).call(this);a.on("specialkey",a.checkEnterKey,a)},checkEnterKey:function(f,d){var c=this,g,b,a;if(d.getKey()===d.ENTER&&c.keyEnterAsTab){g=Ext.getCmp("form-desc").query("field:focusable");b=g[g.length-1];if(c.getId()===b.getId()){a=g[0]}else{a=c.nextNode(":focusable")}while(a){if(a.isXType("field")&&a.tabIndex){d.stopEvent();a.focus();break}else{if(a.isXType("container")){if(a.down("htmleditor")){a=a.down("htmleditor");a.focus([0,0],0);break}else{a=a.down(":focusable")}}else{a=a.nextNode(":focusable")}}}}}});(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(f){return b.test(f)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(f){return a.test(f)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(f){return c.test(f)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(f){return d.test(f)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(b,a){var c=this;c.el=Ext.get(b);c.el.unselectable();Ext.apply(c,a);Ext.util.Observable.prototype.constructor.call(this);if(!c.disabled){c.disabled=true;c.enable()}if(c.handler){c.on("click",c.handler,c.scope||c)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE8){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.clearListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);this.clearListeners()},handleDblClick:function(a){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);this.el.blur();if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a])},click:function(a){this.fireEvent("click",this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(a){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(a)},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,a)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));Ext.Factory=function(a){var b=this;b.aliasPrefix=a+".";b.cache={};b.name=a.replace(b.fixNameRe,b.fixNameFn);b.type=a};Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(c,f){var j=this,a=Ext.ClassManager,b=j.cache,d,h,g,k;if(c){if(c[j.instanceProp]){return c}if(typeof c==="string"){k=c;c={};c[j.defaultProperty]=k}h=c.xclass;k=c.type}if(h){if(!(g=a.get(h))){return a.instantiate(h,c)}}else{if(!(k=k||f||j.defaultType)){g=j.defaultClass}if(!g&&!(g=b[k])){d=j.aliasPrefix+k;h=a.getNameByAlias(d);if(!(g=h&&a.get(h))){return a.instantiateByAlias(d,c)}b[k]=g}}return g.isInstance?g:new g(c)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(g,d){var a=Ext.Factory,b,c,f;if(g.constructor===Object){Ext.Object.each(g,a.define,a)}else{c=new Ext.Factory(g);if(d){if(d.constructor===Object){Ext.apply(c,d);if(typeof(b=c.xclass)==="string"){c.defaultClass=Ext.ClassManager.get(b)}}else{c.defaultType=d}}a[c.name]=f=c.create.bind(c);f.instance=c}return f};(Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(f){var d=f.prototype,g=d.factoryConfig,c=d.alias,b={},a;c=c&&c.length&&c[0];if(c&&(a=c.lastIndexOf("."))>0){b.type=c.substring(0,a);b.defaultType=c.substring(a+1)}if(g){delete d.factoryConfig;Ext.apply(b,g)}f.create=Ext.Factory.define(b.type,b)}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0));(Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,weight:0,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(b){var c=this,a;Ext.apply(c,b);if(c.compat4Mode){a=c.cls;c.focusCls=[c.focusCls,a+"-focus"];c.overCls=[c.overCls,a+"-over"];c.clickCls=[c.clickCls,a+"-click"]}},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this,b=a.clickRepeater;if(b){b.destroy()}if(a.el){a.el.destroy()}a.el=null;a.isDestroyed=true},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=true;if(a){a.hide()}},initEvents:function(){var d=this,a=d.isFieldEnabled,c=d.getStateEl(),b=d.el;c.addClsOnOver(d.overCls,a,d);c.addClsOnClick(d.clickCls,a,d);if(d.repeatClick){d.clickRepeater=new Ext.util.ClickRepeater(b,{preventDefault:true,handler:d.onClick,listeners:{mousedown:d.onClickRepeaterMouseDown,scope:d},scope:d})}else{d.field.mon(b,{click:d.onClick,mousedown:d.onMouseDown,scope:d})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var a=this,c=a.field,b=false;if(a.hidden||!c||!a.rendered||a.isDestroyed){b=true}return !b},onClick:function(){var c=this,a=arguments,f=c.clickRepeater?a[1]:a[0],b=c.handler,d=c.field;if(b&&!d.readOnly&&c.isFieldEnabled()){Ext.callback(c.handler,c.scope,[d,c,f],0,d)}},resolveListenerScope:function(a){return this.field.resolveListenerScope(a)},onMouseDown:function(a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var b=this,a=b.el=b.field.triggerWrap.selectNode("#"+b.domId,false);a.setVisibilityMode(Ext.Element.DISPLAY);b.rendered=true},renderBody:function(b){var a=this,c=a.bodyTpl;Ext.apply(b,a.getBodyRenderData());return c?Ext.XTemplate.getTpl(a,"bodyTpl").apply(b):""},renderTrigger:function(a){var c=this,b=c.width,d=c.hidden?"display:none;":"";if(b){d+="width:"+b}return Ext.XTemplate.getTpl(c,"renderTpl").apply({$trigger:c,fieldData:a,ui:a.ui,childElCls:a.childElCls,triggerId:c.domId=c.field.id+"-trigger-"+c.id,cls:c.cls,triggerStyle:d,extraCls:c.extraCls,baseCls:c.baseCls})},setHidden:function(a){if(a!==this.hidden){this[a?"hide":"show"]()}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=false;if(a){a.show()}}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(a,d,f){var b=this,c=b.shared;if(!c){c=b.shared=new b(a,f)}c.bind(a);c.setFixedWidth(f||"auto");return c.getSize(d)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(a,d){var c=this,b=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});c.measure=b;if(a){c.bind(a)}b.position("absolute");b.setLocalXY(-1000,-1000);b.hide();if(d){b.setWidth(d)}},getSize:function(c){var b=this.measure,a;b.setHtml(c);a=b.getSize();b.setHtml("");return a},bind:function(a){var b=this;b.el=Ext.get(a);b.measure.setStyle(b.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width="auto";return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.measure.destroy();delete a.el;delete a.measure}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(c,b,a){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(c,this.dom.innerHTML,true)).width,b||0,a||1000000)}})}));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:"x-form-empty-field",requiredCls:"x-form-required-field",valueContainsPlaceholder:false,ariaRole:"textbox",editable:true,repeatTriggerClick:false,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",monitorTab:true,mimicing:false,needArrowKeys:true,childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var b=this,a=b.emptyCls;if(b.allowOnlyWhitespace===false){b.allowBlank=false}if(b.size){b.defaultBodyWidth=b.size*6.5+20}if(!b.onTrigger1Click){b.onTrigger1Click=b.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);b.setReadOnly(b.readOnly);b.fieldFocusCls=b.baseCls+"-focus";b.emptyUICls=a+" "+a+"-"+b.ui;b.addStateEvents("change")},initEvents:function(){var b=this,a=b.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(b,a){Ext.form.field.Base.prototype.onChange.apply(this,arguments);this.autoSize()},getSubTplData:function(b){var c=this,d=c.getRawValue(),g=c.emptyText&&d.length<1,a=c.maxLength,f;if(c.enforceMaxLength){if(a===Number.MAX_VALUE){a=undefined}}else{a=undefined}if(g){if(Ext.supports.Placeholder){f=c.emptyText}else{d=c.emptyText;c.valueContainsPlaceholder=true}}return Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{triggerWrapCls:c.triggerWrapCls,inputWrapCls:c.inputWrapCls,triggers:c.orderedTriggers,maxLength:a,readOnly:!c.editable||c.readOnly,placeholder:f,value:d,fieldCls:c.fieldCls+((g&&(f||d))?" "+c.emptyUICls:"")+(c.allowBlank?"":" "+c.requiredCls)})},onRender:function(){var c=this,b=c.getTriggers(),d=[],f,a;if(Ext.supports.FixedTableWidthBug){c.el._needsTableWidthFix=true}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(b){this.invokeTriggers("onFieldRender");for(f in b){d.push(b[f].el)}a=c.triggerEl=c.triggerCell=new Ext.CompositeElement(d,true)}c.inputCell=c.inputWrap},afterRender:function(){var a=this;a.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);this.invokeTriggers("afterFieldRender")},onMouseDown:function(){var a=this;if(!a.hasFocus){a.mon(a.inputEl,"mouseup",Ext.emptyFn,a,{single:true,preventDefault:true})}},applyTriggers:function(h){var j=this,c=j.getHideTrigger(),l=j.readOnly,m=j.orderedTriggers=[],k=j.repeatTriggerClick,b,g,d,a,f;if(!h){h={};if(j.triggerCls&&!j.trigger1Cls){j.trigger1Cls=j.triggerCls}for(f=1;a=j["trigger"+f+"Cls"];f++){h["trigger"+f]={cls:a,extraCls:"x-trigger-index-"+f,handler:"onTrigger"+f+"Click",compat4Mode:true,scope:j}}}for(b in h){if(h.hasOwnProperty(b)){g=h[b];g.field=j;g.id=b;if((l&&g.hideOnReadOnly!==false)||(c&&g.hidden!==false)){g.hidden=true}if(k&&(g.repeatClick!==false)){g.repeatClick=true}d=h[b]=Ext.form.trigger.Trigger.create(g);m.push(d)}}Ext.Array.sort(m,Ext.form.trigger.Trigger.weightComparator);return h},invokeTriggers:function(a,c){var f=this,d=f.getTriggers(),g,b;if(d){for(g in d){if(d.hasOwnProperty(g)){b=d[g];b[a].apply(b,c||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){if(this.rendered){this.invokeTriggers(a?"hide":"show")}},setEditable:function(a){var b=this;b.editable=a;if(b.rendered){b.setReadOnlyAttr(!a||b.readOnly)}},setReadOnly:function(g){var d=this,c=d.getTriggers(),b=d.getHideTrigger(),a,f;g=!!g;Ext.form.field.Base.prototype.setReadOnly.call(this,g);if(d.rendered){d.setReadOnlyAttr(g||!d.editable);if(c){for(f in c){a=c[f];if(a.hideOnReadOnly===true||(a.hideOnReadOnly!==false&&!b)){a[g?"hide":"show"].call(a)}}}}},setReadOnlyAttr:function(d){var b=this,a="readonly",c=b.inputEl.dom;if(d){c.setAttribute(a,a)}else{c.removeAttribute(a)}},processRawValue:function(b){var a=this,d=a.stripCharsRe,c;if(d){c=b.replace(d,"");if(c!==b){a.setRawValue(c);b=c}}return b},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.field.Base.prototype.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){var b=this,a=b.emptyText,c;if(b.rendered&&a){c=b.getRawValue().length<1&&!b.hasFocus;if(Ext.supports.Placeholder){b.inputEl.dom.placeholder=a}else{if(c){b.setRawValue(a);b.valueContainsPlaceholder=true}}if(c){b.inputEl.addCls(b.emptyUICls)}b.autoSize()}},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var a=this.inputEl;if(a){a.dom.unselectable="on"}}},toggleInvalidCls:function(a){var b=a?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this);this.triggerWrap[b](this.triggerWrapInvalidCls);this.inputWrap[b](this.inputWrapInvalidCls)},beforeFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,d;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments);if((a&&!Ext.supports.Placeholder)&&(c.dom.value===b.emptyText&&b.valueContainsPlaceholder)){b.setRawValue("");d=true;c.removeCls(b.emptyUICls);b.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){c.removeCls(b.emptyUICls)}}if(b.selectOnFocus||d){if(Ext.isWebKit){if(!b.inputFocusTask){b.inputFocusTask=new Ext.util.DelayedTask(b.focusInput,b)}b.inputFocusTask.delay(1)}else{b.focusInput()}}},focusInput:function(){var a=this.inputEl;if(a){a=a.dom;if(a){a.select()}}},onFocus:function(b){var a=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments);if(a.emptyText){a.autoSize()}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldFocus",[b])},onBlur:function(b){var a=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments);a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldBlur",[b]);a.postBlur()},postBlur:function(){var a=this.inputFocusTask;Ext.form.field.Base.prototype.postBlur.apply(this,arguments);this.applyEmptyText();if(a){a.cancel()}},filterKeys:function(c){if(c.ctrlKey&&!c.altKey){return}var b=c.getKey(),a=String.fromCharCode(c.getCharCode());if((Ext.isGecko||Ext.isOpera)&&(c.isNavKeyPress()||b===c.BACKSPACE||(b===c.DELETE&&c.button===-1))){return}if((!Ext.isGecko&&!Ext.isOpera)&&c.isSpecialKey()&&!a){return}if(!this.maskRe.test(a)){c.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(a){Ext.form.field.Base.prototype.applyState.apply(this,arguments);if(a.hasOwnProperty("value")){this.setValue(a.value)}},getRawValue:function(){var b=this,a=Ext.form.field.Base.prototype.getRawValue.call(this);if(a===b.emptyText&&b.valueContainsPlaceholder){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyUICls);a.valueContainsPlaceholder=false}Ext.form.field.Base.prototype.setValue.apply(this,arguments);a.applyEmptyText();return a},getErrors:function(m){m=arguments.length?(m==null?"":m):this.processRawValue(this.getRawValue());var g=this,k=Ext.form.field.Base.prototype.getErrors.call(this,m),a=g.validator,d=g.vtype,h=Ext.form.field.VTypes,j=g.regex,l=Ext.String.format,b,f,c;if(Ext.isFunction(a)){b=a.call(g,m);if(b!==true){k.push(b)}}f=g.allowOnlyWhitespace?m:Ext.String.trim(m);if(f.length<1||(m===g.emptyText&&g.valueContainsPlaceholder)){if(!g.allowBlank){k.push(g.blankText)}if(!g.validateBlank){return k}c=true}if(!c&&m.length<g.minLength){k.push(l(g.minLengthText,g.minLength))}if(m.length>g.maxLength){k.push(l(g.maxLengthText,g.maxLength))}if(d){if(!h[d](m,g)){k.push(g.vtypeText||h[d+"Text"])}}if(j&&!j.test(m)){k.push(g.regexText||g.invalidText)}return k},selectText:function(j,a){var h=this,c=h.getRawValue(),d=true,g=h.inputEl.dom,f,b;if(c.length>0){j=j===f?0:j;a=a===f?c.length:a;if(g.setSelectionRange){g.setSelectionRange(j,a)}else{if(g.createTextRange){b=g.createTextRange();b.moveStart("character",j);b.moveEnd("character",a-c.length);b.select()}}d=Ext.isGecko||Ext.isOpera}if(d){h.focus()}},autoSize:function(){var f=this,d,k,b,h,j,c,a,g;if(f.grow&&f.rendered&&f.getSizeModel().width.auto){j=f.inputEl;d=f.getTriggers();h=0;g=Ext.util.Format.htmlEncode(j.dom.value||(f.hasFocus?"":f.emptyText)||"");g+=f.growAppend;for(k in d){h+=d[k].el.getWidth()}a=j.getTextWidth(g)+h+f.inputWrap.getBorderWidth("lr")+f.triggerWrap.getBorderWidth("lr");a=Math.min(Math.max(a,f.growMin),f.growMax);f.bodyEl.setWidth(a);f.updateLayout();f.fireEvent("autosize",f,a)}},onDestroy:function(){var a=this;a.invokeTriggers("destroy");Ext.destroy(a.triggerRepeater);Ext.form.field.Base.prototype.onDestroy.call(this);if(a.inputFocusTask){a.inputFocusTask.cancel();a.inputFocusTask=null}},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var b=this.getTriggers(),a=0,c;if(b&&this.rendered){for(c in b){if(b.hasOwnProperty(c)){a+=b[c].el.getWidth()}}}return a}}}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));Ext.define("FBEditor.override.form.field.Text",{override:"Ext.form.field.Text",fieldSubTpl:['<tpl if="triggers.length"><span class="input-fade-triggers"></span>','<tpl else><span class="input-fade"></span></tpl>','<input id="{id}" data-ref="inputEl" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],afterRender:function(){var a=this;(arguments.callee.$previous||Ext.form.field.Base.prototype.afterRender).apply(this,arguments);a.inputEl.on({scope:this,paste:function(b){this.fireEvent("paste",b)}})},getValue:function(){var a=this,b;b=Ext.form.field.Base.prototype.getValue.apply(this,arguments);if(b&&Ext.isString(b)){b=b.trim();b=b.replace(/\t/ig," ")}return b}});(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",inputTagRe:/input|textarea/i,eventName:"keydown",constructor:function(a){var b=this;if((arguments.length!==1)||(typeof a==="string")||a.dom||a.tagName||a===document||a.isComponent){b.legacyConstructor.apply(b,arguments);return}Ext.apply(b,a);b.bindings=[];if(!b.target.isComponent){b.target=Ext.get(b.target)}if(b.binding){b.addBinding(b.binding)}else{if(a.key){b.addBinding(a)}}b.enable()},legacyConstructor:function(b,d,a){var c=this;Ext.apply(c,{target:Ext.get(b),eventName:a||c.eventName,bindings:[]});if(d){c.addBinding(d)}c.enable()},addBinding:function(f){var c=this,d=f.key,b,a;if(c.processing){c.bindings=bindings.slice(0)}if(Ext.isArray(f)){for(b=0,a=f.length;b<a;b++){c.addBinding(f[b])}return}c.bindings.push(Ext.apply({keyCode:c.processKeys(d)},f))},removeBinding:function(g){var f=this,h=f.bindings,a=h.length,b,d,c;if(f.processing){f.bindings=h.slice(0)}c=f.processKeys(g.key);for(b=0;b<a;++b){d=h[b];if((d.fn||d.handler)===(g.fn||g.handler)&&d.scope===g.scope){if(g.alt===d.alt&&g.crtl===d.crtl&&g.shift===d.shift){if(Ext.Array.equals(d.keyCode,c)){Ext.Array.erase(f.bindings,b,1);return}}}}},processKeys:function(g){var h=false,d,f,b,a,c;if(Ext.isString(g)){f=[];b=g.toUpperCase();for(c=0,a=b.length;c<a;++c){f.push(b.charCodeAt(c))}g=f;h=true}if(!Ext.isArray(g)){g=[g]}if(!h){for(c=0,a=g.length;c<a;++c){d=g[c];if(Ext.isString(d)){g[c]=d.toUpperCase().charCodeAt(0)}}}return g},handleTargetEvent:function(g){var f=this,b=f.inputTagRe,j,c,a,h,d;if(f.enabled){j=f.bindings;c=0;a=j.length;f.lastKeyEvent=g=f.processEvent.apply(f||f.processEventScope,arguments);if(f.ignoreInputFields){h=g.target;d=h.contentEditable;if((b.test(h.tagName)&&h.type!=="button")||(d===""||d==="true")){return}}if(!g.getKey){return g}f.processing=true;for(;c<a;++c){f.processBinding(j[c],g)}f.processing=false}},processEvent:Ext.identityFn,processBinding:function(f,a){if(this.checkModifiers(f,a)){var g=a.getKey(),j=f.fn||f.handler,k=f.scope||this,h=f.keyCode,b=f.defaultEventAction,c,d;for(c=0,d=h.length;c<d;++c){if(g===h[c]){if(j.call(k,g,a)!==true&&b){a[b]()}break}}}},checkModifiers:function(h,f){var d=["shift","ctrl","alt"],c=0,a=d.length,g,b;for(;c<a;++c){b=d[c];g=h[b];if(!(g===undefined||(g===f[b+"Key"]))){return false}}return true},on:function(b,d,c){var h,a,f,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;f=b.ctrl;g=b.alt}else{h=b}this.addBinding({key:h,shift:a,ctrl:f,alt:g,fn:d,scope:c})},un:function(b,d,c){var h,a,f,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;f=b.ctrl;g=b.alt}else{h=b}this.removeBinding({key:h,shift:a,ctrl:f,alt:g,fn:d,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture});a.enabled=true}},disable:function(){var a=this;if(a.enabled){a.target.removeListener(a.eventName,a.handleTargetEvent,a);a.enabled=false}},setDisabled:function(a){if(a){this.disable()}else{this.enable()}},destroy:function(c){var a=this,b=a.target;a.bindings=[];a.disable();if(c){b.destroy()}delete a.target}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(a){var b=this;if(arguments.length===2){b.legacyConstructor.apply(b,arguments);return}b.setConfig(a)},legacyConstructor:function(b,a){this.setConfig(Ext.apply({target:b},a))},setConfig:function(a){var c=this,b={target:a.target,ignoreInputFields:a.ignoreInputFields,eventName:c.getKeyEvent("forceKeyDown" in a?a.forceKeyDown:c.forceKeyDown,a.eventName),capture:a.capture},d;if(c.map){c.map.destroy()}if(a.processEvent){b.processEvent=a.processEvent;b.processEventScope=a.processEventScope||c}if(a.keyMap){d=c.map=a.keyMap}else{d=c.map=new Ext.util.KeyMap(b);c.destroyKeyMap=true}this.addBindings(a);d.disable();if(!a.disabled){d.enable()}},addBindings:function(h){var c=this,b,f,d=c.map,a=Ext.util.KeyNav.keyOptions,g=h.scope||c;for(b in h){f=h[b];if(f&&(b.length===1||(b=a[b])||(!isNaN(b=parseInt(b,10))))){if(typeof f==="function"){f={handler:f,defaultEventAction:(h.defaultEventAction!==undefined)?h.defaultEventAction:c.defaultEventAction}}d.addBinding({key:b,ctrl:f.ctrl,shift:f.shift,alt:f.alt,handler:Ext.Function.bind(c.handleEvent,f.scope||g,[f.handler||f.fn,c],true),defaultEventAction:(f.defaultEventAction!==undefined)?f.defaultEventAction:c.defaultEventAction})}}},handleEvent:function(d,c,b,a){a.lastKeyEvent=c;return b.call(this,c)},disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,eventName:"keypress",destroy:function(a){if(this.destroyKeyMap){this.map.destroy(a)}delete this.map},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(b,a){if(b||(Ext.supports.SpecialKeyDownRepeat&&!a)){return"keydown"}else{return a||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",editable:true,applyTriggers:function(b){var c=this,a=b.picker;if(!a.cls){a.cls=c.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},initEvents:function(){var a=this;Ext.form.field.Text.prototype.initEvents.call(this);a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:false},scope:a,forceKeyDown:true});if(!a.editable){a.mon(a.inputEl,"click",a.onTriggerClick,a)}if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(){if(!this.isExpanded){this.onTriggerClick()}},expand:function(){var c=this,a,b,d;if(c.rendered&&!c.isExpanded&&!c.isDestroyed){c.expanding=true;a=c.bodyEl;b=c.getPicker();d=c.collapseIf;b.show();c.isExpanded=true;c.alignPicker();a.addCls(c.openCls);c.mon(Ext.getDoc(),{mousewheel:d,mousedown:d,scope:c});Ext.on("resize",c.alignPicker,c);c.fireEvent("expand",c);c.onExpand();delete c.expanding}},onExpand:Ext.emptyFn,alignPicker:function(){var c=this,b,a=c.getPicker();if(c.isExpanded){if(c.matchFieldWidth){b=c.bodyEl.getWidth();a.setWidth(b)}if(a.isFloating()){c.doAlign()}}},doAlign:function(){var d=this,c=d.picker,a="-above",b;d.picker.alignTo(d.triggerWrap,d.pickerAlign,d.pickerOffset);b=c.el.getY()<d.inputEl.getY();d.bodyEl[b?"addCls":"removeCls"](d.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},collapse:function(){var d=this;if(d.isExpanded&&!d.isDestroyed&&!d.destroying){var c=d.openCls,b=d.picker,f=Ext.getDoc(),g=d.collapseIf,a="-above";b.hide();d.isExpanded=false;d.bodyEl.removeCls([c,c+a]);b.el.removeCls(b.baseCls+a);f.un("mousewheel",g,d);f.un("mousedown",g,d);Ext.un("resize",d.alignPicker,d);d.fireEvent("collapse",d);d.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.isDestroyed&&!b.within(a.bodyEl,false,true)&&!a.owns(b.target)){a.collapse()}},getPicker:function(){var b=this,a=b.picker;if(!a){b.picker=a=b.createPicker();a.ownerCmp=b}return b.picker},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}}},onOtherFocus:function(a){if(this.hasFocus&&!this.owns(a)){this.callParent([a])}},beforeDestroy:function(){var b=this,a=b.picker;b.collapse();Ext.form.field.Text.prototype.beforeDestroy.call(this);Ext.un("resize",b.alignPicker,b);Ext.destroy(b.keyNav,a);if(a){delete b.picker;delete a.pickerField}}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",bindStore:function(b,c,a){a=a||"store";var d=this,f=d[a];if(!c&&f){d.onUnbindStore(f,c,a);if(b!==f){if(a==="store"&&f.autoDestroy){f.destroy()}else{d.unbindStoreListeners(f)}}}if(b){d[a]=b=Ext.data.StoreManager.lookup(b);d.bindStoreListeners(b);d.onBindStore(b,c,a,f)}else{d[a]=null}return d},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(a){var b=this.storeListeners;if(b){a.un(b)}},bindStoreListeners:function(a){var b=this.getStoreListeners(a);if(b){b=Ext.apply({},b);if(!b.scope){b.scope=this}this.storeListeners=b;a.on(b)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:"x-mask-loading",maskCls:"x-mask",cls:"x-mask-msg",useMsg:true,useTargetEl:false,ariaRole:"presentation",childEls:["msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgEl" data-ref="msgEl" role="{role}"','<tpl if="ariaAttr"> {ariaAttr}</tpl>',' class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}">{msg}</div>',"</div>"],constructor:function(b){var c=this,a;if(arguments.length===2){a=c.target=b;b=arguments[1]}else{a=b.target}Ext.Component.prototype.constructor.call(this,b);if(a.isComponent){c.ownerCt=a;c.hidden=true;c.renderTo=c.getMaskTarget();c.external=c.renderTo===Ext.getBody();c.bindComponent(a)}else{a=Ext.get(a);c.isElement=true;c.renderTo=c.target}c.render(c.renderTo);if(c.store){c.bindStore(c.store,true)}},getRenderTree:function(){return[{cls:this.maskCls,style:"display:none"},Ext.Component.prototype.getRenderTree.call(this)]},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el.prev()},initRenderData:function(){var a=Ext.Component.prototype.initRenderData.apply(this,arguments);a.msg=this.msg||"";return a},bindComponent:function(a){var c=this,b={scope:this,resize:c.sizeMask};if(c.external){b.added=c.onComponentAdded;b.removed=c.onComponentRemoved;if(a.floating){b.move=c.sizeMask;c.activeOwner=a}else{if(a.ownerCt){c.onComponentAdded(a.ownerCt)}}}c.mon(a,b);if(c.external){c.mon(Ext.GlobalEvents,{show:c.onContainerShow,hide:c.onContainerHide,expand:c.onContainerExpand,collapse:c.onContainerCollapse,scope:c})}},onComponentAdded:function(a){var b=this;delete b.activeOwner;b.floatParent=a;if(!a.floating){a=a.up("[floating]")}if(a){b.activeOwner=a;b.mon(a,"move",b.sizeMask,b);b.mon(a,"tofront",b.onOwnerToFront,b)}else{b.preventBringToFront=true}a=b.floatParent.ownerCt;if(b.rendered&&b.isVisible()&&a){b.floatOwner=a;b.mon(a,"afterlayout",b.sizeMask,b,{single:true})}},onComponentRemoved:function(a){var c=this,d=c.activeOwner,b=c.floatOwner;if(d){c.mun(d,"move",c.sizeMask,c);c.mun(d,"tofront",c.onOwnerToFront,c)}if(b){c.mun(b,"afterlayout",c.sizeMask,c)}delete c.activeOwner;delete c.floatOwner},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);this.el.skipGarbageCollection=true;this.maskEl.skipGarbageCollection=true},onOwnerToFront:function(a,b){this.maskEl.setStyle("zIndex",b+1);this.el.setStyle("zIndex",b+2)},onContainerShow:function(a){this.onComponentShow()},onContainerHide:function(a){this.onComponentHide()},onContainerExpand:function(a){this.onComponentShow()},onContainerCollapse:function(a){this.onComponentHide()},onComponentHide:function(){var a=this;if(a.rendered&&a.isVisible()){a.hide();a.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var b=this,c=b.target,a=b.external?b.getOwner().el:b.getMaskTarget();if(b.rendered&&b.isVisible()){if(b.external){if(!b.isElement&&c.floating){b.onOwnerToFront(c,c.el.getZIndex())}b.maskEl.setSize(a.getSize()).alignTo(a,"tl-tl")}b.el.center(b.maskEl)}},bindStore:function(a,b){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);a=c.store;if(a&&a.isLoading()){c.onBeforeLoad()}},getStoreListeners:function(b){var d=this.onLoad,c=this.onBeforeLoad,a={cachemiss:c,cachefilled:d};if(!b.proxy.isSynchronous){a.beforeload=c;a.load=d}return a},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?a.getTargetEl():(a.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var c=this,a=c.getOwner(),b;if(!c.disabled){c.loading=true;if(a.componentLayoutCounter){c.maybeShow()}else{b=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=b;b.apply(a,arguments);c.maybeShow()}}}},maybeShow:function(){var b=this,a=b.getOwner();if(!a.isVisible(true)){b.showNext=true}else{if(b.loading&&a.rendered){b.show()}}},hide:function(){var a=this;if(a.isElement){a.ownerCt.unmask();a.fireEvent("hide",this);return}else{a.ownerCt.enableTabbing()}delete a.showNext;a.maskEl.setDisplayed(false);a.ownerCt.setMasked(false);return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var a=this;if(a.isElement){a.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);a.fireEvent("show",this);return}else{a.ownerCt.disableTabbing()}a.maskEl.setDisplayed(true);a.ownerCt.setMasked(true);return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var a=this;a.loading=true;Ext.Component.prototype.afterShow.apply(this,arguments);if(a.hasOwnProperty("maskCls")){a.maskEl.dom.className=a.maskCls}if(a.useMsg){a.msgTextEl.setHtml(a.msg)}else{a.el.hide()}a.sizeMask()},onLoad:function(){this.loading=false;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.bindStore(null);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.isElement){a.ownerCt.unmask()}Ext.destroy(a.maskEl);Ext.Component.prototype.onDestroy.call(this)}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:true},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},getRootProperty:function(){var b=this,a=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(k,f){var a=this.map||this.getMap(),l=a[k],g=this.getCollection(),b=g.length,d,h,j,c;if(!l){return -1}if(f===undefined){f=-1}if(l instanceof Array){j=l;h=b;for(c=j.length;c-->0;){d=g.indexOf(j[c]);if(d<h&&d>f){h=d}}if(h===b){return -1}}else{h=g.indexOf(l)}return(h>f)?h:-1},updateKey:function(c,f){var b=this,d=b.map,g,a;if(d){g=d[f];if(g instanceof Array){a=Ext.Array.indexOf(g,c);if(a>=0){if(g.length>2){g.splice(a,1)}else{d[f]=g[1-a]}}}else{if(g){delete d[f]}}b.add([c])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(b,a){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(f,d){var h=this,a=h.map,g=d.items,b=g.length,c,k,j;if(a){if(h.getUnique()&&b<f.length/2){for(c=0;c<b;++c){j=h.getKey(k=g[c]);delete a[j]}}else{h.map=null}}},add:function(g){var h=this,a=h.map,b,f,k,j,c,d;c=g.length;d=h.getUnique();for(f=0;f<c;++f){j=h.getKey(k=g[f]);if(d||!(j in a)){a[j]=k}else{if(!((b=a[j]) instanceof Array)){a[j]=b=[b]}b.push(k)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else{this.getKey=a}},applyProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return(a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(a){a.addObserver(this)}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null},constructor:function(a){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(a){var b=this._groupFn(a);return(b!=null)?String(b):""},sortFn:function(d,c){var g=this,b=g._groupFn(d),f=g._groupFn(c),k=g._sortProperty,j=g._root,h=g._sorterFn,a=g._transform;if(b===f){return 0}if(k||h){if(h){return h.call(this,d,c)}if(j){d=d[j];c=c[j]}b=d[k];f=c[k];if(a){b=a(b);f=a(f)}}return(b>f)?1:(b<f?-1:0)},standardGroupFn:function(b){var a=this._root;return(a?b[a]:b)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:true,config:{autoFilter:true,autoSort:true,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:false,sorted:false,filtered:false,constructor:function(a){var b=this;b.items=[];b.map={};b.length=0;if(a&&a.keyFn){b.getKey=a.keyFn}b.mixins.observable.constructor.call(b,a)},destroy:function(){var c=this,b=c._filters,d=c._sorters,a=c._groups;if(b){b.destroy();c._filters=null}if(d){d.destroy();c._sorters=null}if(a){a.destroy();c._groups=null}c.setSource(null);c.observers=c.items=c.map=null},add:function(d){var c=this,a=c.decodeItems(arguments,0),b=a;if(a.length){c.splice(c.length,0,a);b=(a.length===1)?a[0]:a}return b},replaceAll:function(){var d=this,a=d.length,c,b;if(a===0){return d.add.apply(d,arguments)}b=d.decodeItems(arguments,0);c=b;if(b.length){d.splice(0,d.length,b);c=(b.length===1)?b[0]:b}else{d.removeAll()}return c},aggregate:function(h,b,f,a,d){var g=this,c=Ext.Array.slice(arguments);c.unshift(g.items);return g.aggregateItems.apply(g,c)},aggregateByGroup:function(d,b,c){var a=this.getGroups();return this.aggregateGroups(a,d,b,c)},aggregateItems:function(l,r,d,a,f,s){var m=this,k=Ext.Number.clipIndices(l.length,[a,f]),b=(a!==0&&f!==l.length),h,g,c,n,p,q,o;a=k[0];f=k[1];if(!Ext.isFunction(d)){d=m._aggregators[d];return d.call(m,l,a,f,r,m.getRootProperty())}n=m.getRootProperty();q=new Array(c);o=b?new Array(c):l;for(h=a,g=0;h<f;++h,g++){if(b){o[g]=p=l[h]}q[g]=(n?p[n]:p)[r]}return d.call(s||m,l,q,0)},aggregateGroups:function(a,k,c,l){var h=a.items,g=h.length,b=!Ext.isFunction(c),d={},f,j,m;for(f=0;f<g;++f){j=h[f];if(!b){m=this.aggregateItems(j.items,k,c,null,null,l)}else{m=j[c](k)}d[j.getGroupKey()]=m}return d},beginUpdate:function(){if(!this.updating++){this.notify("beginupdate")}},clear:function(){var b=this,c=b.generation,a=c?b.items:[];if(c){b.items=[];b.length=0;b.map={};b.indices={};b.generation++}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(l,g,j){var f=this.items,b=f.length,a={},d=[],c,h,k;for(c=0;c<b;++c){k=f[c];k=(g?k[g]:k)[l];h=String(k);if((j||!Ext.isEmpty(k))&&!a[h]){a[h]=1;d.push(k)}}return d},contains:function(c){var a=false,b;if(c!=null){b=this.getKey(c);a=this.map[b]===c}return a},containsKey:function(a){return a in this.map},createFiltered:function(o,n,f,k,d){var j=this,g=new j.self(j.initialConfig),m=j.getRootProperty(),h=j.items,b,c,a,l,p;if(Ext.isFunction(o)){l=o;p=n}else{if(Ext.isString(o)){a=[new Ext.util.Filter({property:o,value:n,root:m,anyMatch:f,caseSensitive:k,exactMatch:d})]}else{if(o instanceof Ext.util.Filter){a=[o];o.setRoot(m)}else{if(Ext.isArray(o)){a=o.slice(0);for(c=0,b=a.length;c<b;++c){a[c].setRoot(m)}}}}l=Ext.util.Filter.createFilterFn(a)}p=p||j;for(c=0,b=h.length;c<b;c++){if(l.call(p,h[c])){g.add(h[c])}}return g},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(g,f){var b=this.items,a=b.length,d,c;if(a){f=f||this;b=b.slice(0);for(d=0;d<a;d++){c=g.call(f,b[d],d,a);if(c===false){break}}}return c},eachKey:function(g,k){var f=this,d=f.items,b=d.length,a,j,h,c;if(b){k=k||f;d=d.slice(0);for(a=0;a<b;a++){h=f.getKey(j=d[a]);c=g.call(k,h,j,a,b);if(c===false){break}}}return c},endUpdate:function(){if(!--this.updating){this.notify("endupdate")}},find:function(h,g,j,d,c,b){if(Ext.isEmpty(g,false)){return null}var f=Ext.String.createRegex(g,d,c,b),a=this.getRootProperty();return this.findBy(function(k){return k&&f.test((a?k[a]:k)[h])},null,j)},findBy:function(g,k,a){var f=this,d=f.items,c=d.length,b,j,h;k=k||f;for(b=a||0;b<c;b++){h=f.getKey(j=d[b]);if(g.call(k,j,h)){return d[b]}}return null},findIndex:function(g,f,h,c,b,a){var d=this.find(g,f,h,c,b,a);return d?this.indexOf(d):-1},findIndexBy:function(b,a,d){var c=this.findBy(b,a,d);return c?this.indexOf(c):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"first"):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"last"):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(a){var b=a.id;return(b===0||b)?b:((b=a._id)===0||b)?b:a.getId()},getRange:function(d,a){var c=this.items,f=c.length,b;if(!f){b=[]}else{b=Ext.Number.clipIndices(f,[d,a]);b=c.slice(b[0],b[1])}return b},getValues:function(k,h,a,b){var g=this.items,d=Ext.Number.clipIndices(g.length,[a,b]),f=[],c,j;for(c=d[0],b=d[1];c<b;++c){j=g[c];j=(h?j[h]:j)[k];f.push(j)}return f},indexOf:function(b){if(!b){return -1}var a=this.getKey(b);return this.indexOfKey(a)},indexOfKey:function(a){var b=this,c=b.indices;if(a in b.map){if(!c){c=b.getIndices()}return c[a]}return -1},insert:function(c,f){var d=this,a=d.decodeItems(arguments,1),b=a;if(a.length){d.splice(c,0,a);b=(a.length===1)?a[0]:a}return b},itemChanged:function(v,h,n,o){var w=this,c=n===0||!!n,k=w.filtered&&w.getAutoFilter(),f=false,d=0,q=w.items,m=w.length-1,a=w.sorted&&m>0,s=w.getSource(),x,r=0,j,l=false,b,p=false,u,t,g;if(s&&!s.updating){s.itemChanged(v,h,n,o)}else{t=w.getKey(v);if(k){j=w.indexOfKey(c?n:t);p=(j<0);l=w.isItemFiltered(v);f=(p!==l)}if(f){if(l){r=[v];b=-1}else{x=[v];b=w.length}}else{if(a&&!l){if(!k){j=w.indexOfKey(c?n:t)}g=w.getSortFn();if(j&&g(q[j-1],q[j])>0){d=-1;b=Ext.Array.binarySearch(q,v,0,j,g)}else{if(j<m&&g(q[j],q[j+1])>0){d=1;b=Ext.Array.binarySearch(q,v,j+1,g)}}if(d){x=[v]}}}u={item:v,key:t,index:b,filterChanged:f,keyChanged:c,indexChanged:!!d,filtered:l,oldIndex:j,newIndex:b,wasFiltered:p,meta:o};if(c){u.oldKey=n}if(h){u.modified=h}w.beginUpdate();w.notify("beforeitemchange",[u]);if(c){w.updateKey(v,n)}if(x||r){w.splice(b,r,x)}if(d>0){u.newIndex--}else{if(d<0){u.oldIndex++}}w.notify(l?"filtereditemchange":"itemchange",[u]);w.endUpdate()}},remove:function(d){var c=this,a=c.decodeRemoveItems(arguments,0),b=c.length;c.splice(0,a);return b-c.length},removeAll:function(){var b=this,a=b.length;if(b.generation&&a){b.splice(0,a)}return b},removeAt:function(j,h){var k=this,b=k.length,f=Ext.Number,d=f.clipIndices(b,[j,(h===undefined)?1:h],f.Clip.COUNT),c=d[0],a=d[1]-c,l=(a===1)&&k.getAt(c),g;k.splice(c,a);g=k.length-b;return(l&&g)?l:g},removeByKey:function(a){var b=this.getByKey(a);if(!b||!this.remove(b)){return false}return b},splice:function(E,o,C){var m=this,d=m.sorted&&m.getAutoSort(),A=m.map,s=m.items,q=m.length,w=(o instanceof Array)?m.decodeRemoveItems(o):null,x=!w,F=Ext.Number,f=F.clipIndices(q,[E,x?o:0],F.Clip.COUNT),h=f[0],l=f[1],L=l-h,u=m.decodeItems(arguments,2),K=u?u.length:0,D,y,v,c=h,b=m.indices||((K||w)?m.getIndices():null),r=null,j=L?[h]:null,g=null,t=m.getSource(),a,H,I,N,B,G,M,p,z,J,P,O;if(t&&!t.updating){if(x){w=[];for(N=0;N<L;++N){w.push(s[h+N])}}if(h<q){N=t.indexOf(s[h])}else{N=t.length}t.splice(N,w,u);return m}if(K){D=u;g=[];y={};if(d){O=m.getSorters();if(K>1){if(!D.$cloned){u=D=D.slice(0)}m.sortData(D)}}for(N=0;N<K;++N){p=m.getKey(B=u[N]);if((M=y[p])!==undefined){(P||(P={}))[M]=1}else{G=b[p];if(G<h||l<=G){(j||(j=[])).push(G)}}y[p]=N;g.push(p)}if(P){z=g;D=[];g=[];D.$cloned=true;for(N=0;N<K;++N){if(!P[N]){B=u[N];D.push(B);g.push(z[N])}}K=D.length}r={items:D,keys:g}}for(N=w?w.length:0;N-->0;){p=m.getKey(w[N]);if((G=b[p])!==undefined){(j||(j=[])).push(G)}}if(!r&&!j){return m}m.beginUpdate();if(j){a=null;I=[];v={};if(j.length>1){j.sort(Ext.Array.numericSortFn)}for(N=0,J=j.length;N<J;++N){p=m.getKey(B=s[G=j[N]]);if(!(p in A)){continue}delete A[p];if(!a||G>(a.at+H.length)){I.push(a={at:G,items:(H=[]),keys:(z=[]),map:v,next:a,replacement:r});if(r){r.replaced=a}}H.push(v[p]=B);z.push(p);if(G<c){--c}if(L>1&&G===h){--L;j[N--]=++h}}if(r){r.at=c}for(M=I.length;M-->0;){a=I[M];N=a.at;J=a.items.length;if(N+J<q){m.indices=b=null}m.length=q-=J;s.splice(N,J);if(b){z=a.keys;for(N=0;N<J;++N){delete b[z[N]]}}++m.generation;m.notify("remove",[a])}}if(r){if(d&&K>1&&q){m.spliceMerge(D)}else{if(d){if(K>1){c=0;m.indices=b=null}else{c=O.findInsertionIndex(r.items[0],s,m.getSortFn())}}if(c===q){s.push.apply(s,D);b=m.indices;if(b){for(N=0;N<K;++N){b[g[N]]=c+N}}}else{m.indices=null;Ext.Array.insert(s,c,D)}for(N=0;N<K;++N){A[g[N]]=D[N]}m.length+=K;r.at=c;r.atItem=c===0?null:s[c-1];++m.generation;m.notify("add",[r])}}m.endUpdate();return m},update:function(b,a){var c=this;c.beginUpdate();try{return b.call(a||c,c)}catch(d){throw d}finally{c.endUpdate()}},updateKey:function(b,f){var a=this,d=a.map,h=a.indices,c=a.getSource(),g;if(c&&!c.updating){c.updateKey(b,f)}else{if((g=a.getKey(b))!==f){if(f in d||d[g]!==b){if(f in d){delete d[f]}a.updating++;a.generation++;d[g]=b;if(h){h[g]=h[f];delete h[f]}a.notify("updatekey",[{item:b,newKey:g,oldKey:f}]);a.updating--}}}},findInsertIndex:function(d){var f=this.getSource(),g=f.items,b=f.indexOf(d)-1,c,a;while(b>-1){c=g[b];a=this.indexOf(c);if(a>-1){return a+1}--b}return 0},onCollectionAdd:function(a,b){var k=this,m=b.atItem,j=b.items,h,g,c,f,l,d;if(m){g=k.indexOf(m);if(g===-1){g=k.findInsertIndex(j[0])}else{++g}}else{g=0}if(k.getAutoFilter()&&k.filtered){for(f=0,d=j.length;f<d;++f){l=j[f];if(k.isItemFiltered(l)){if(!c){c=j.slice(0,f)}if(!h){h=[]}h.push(l)}else{if(c){c.push(l)}}}}k.splice((g<0)?k.length:g,0,c||j);if(h){k.notify("filteradd",[h])}},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(a){var g=this,b={},j={},d,k,f,h,c;f=a.items;f=g.filtered&&g.getAutoFilter()?Ext.Array.filter(f,g.getFilterFn()):f.slice(0);if(g.sorted){g.sortData(f)}g.items=f;g.length=c=f.length;g.map=b;g.indices=j;for(d=0;d<c;++d){h=g.getKey(k=f[d]);b[h]=k;j[h]=d}g.notify("refresh")},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(c,d,b,f,a){var g=b-d;return g&&this._aggregators.sum.call(this,c,d,b,f,a)/g},bounds:function(f,a,b,k,g){for(var j,h,c,d=a;d<b;++d){j=f[d];j=(g?j[g]:j)[k];if(!(j<h)){h=j}if(!(j>c)){c=j}}return[c,h]},count:function(a){return a.length},extremes:function(g,a,c,m,k){var h=null,b=null,f,n,j,d,l;for(f=a;f<c;++f){n=g[f];l=(k?n[k]:n)[m];if(!(l<j)){j=l;h=n}if(!(l>d)){d=l;b=n}}return[b,h]},max:function(f,g,d,h,c){var a=this._aggregators.bounds.call(this,f,g,d,h,c);return a[1]},maxItem:function(f,g,d,h,c){var a=this._aggregators.extremes.call(this,f,g,d,h,c);return a[1]},min:function(f,g,d,h,c){var a=this._aggregators.bounds.call(this,f,g,d,h,c);return a[0]},minItem:function(f,g,d,h,c){var a=this._aggregators.extremes.call(this,f,g,d,h,c);return a[0]},sum:function(c,g,b,j,a){for(var h,f=0,d=g;d<b;++d){h=c[d];h=(a?h[a]:h)[j];f+=h}return f}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(a){var d=this.observers,b,c=a.getId();if(!d){d=this.observers=[];this.observerMap={}}b=this.observerMap;if(!b[c]){d.push(a);b[c]=a;Ext.Array.sort(d,this.prioritySortFn)}},prioritySortFn:function(g,f){var d=g.observerPriority||0,c=f.observerPriority||0;return d-c},applyExtraKeys:function(f){var g=this,c={},b,d,a,h;for(a in f){b={collection:g};if(Ext.isString(h=f[a])){b.property=h}else{Ext.apply(b,h)}c[a]=g[a]=d=new Ext.util.CollectionKey(b);d.name=a}return c},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,"Ext.util.Grouper")}return a},decodeItems:function(d,c){var g=this,b=(c===undefined)?d:d[c],a,h,f;if(!b||!b.$cloned){a=d.length>c+1||!Ext.isIterable(b);if(a){b=Ext.Array.slice(d,c);if(b.length===1&&b[0]===undefined){b.length=0}}h=g.getDecoder();if(h){if(!a){b=b.slice(0);a=true}for(f=b.length;f-->0;){if((b[f]=h.call(g,b[f]))===false){b.splice(f,1)}}}if(a){b.$cloned=true}}return b},getIndices:function(){var d=this,f=d.indices,a=d.items,g=a.length,c,b;if(!f){d.indices=f={};++d.indexRebuilds;for(c=0;c<g;++c){b=d.getKey(a[c]);f[b]=c}}return f},notify:function(d,h){var j=this,c=j.observers,l=j._eventToMethodMap[d],k=0,f,b,a,g;h=h||[];if(c&&l){for(f=0,b=c.length;f<b;++f){a=(g=c[f])[l];if(a){if(!k++){h.unshift(j)}a.apply(g,h)}}}if(!j.hasListeners){return}if(j.hasListeners[d]){if(!k){h.unshift(j)}j.fireEventArgs(d,h)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(b){var a=this,c=a.getSource();if(!c){c=new Ext.util.Collection({keyFn:a.getKey,extraKeys:a.getInitialConfig().extraKeys,rootProperty:a.getRootProperty()});if(a.length){c.add(a.items)}a.setSource(c);a.autoSource=c}else{if(c.length||a.length){a.onCollectionRefresh(c)}}a.notify("filter")},applyFilters:function(a,b){if(a==null||(a&&a.isFilterCollection)){return a}if(a){if(!b){b=this.getFilters()}b.splice(0,b.length,a)}return b},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on("endupdate","onEndUpdateFilters",c,{prepend:true});a.$filterable=c}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(c){var b=this,d=b.filtered,a=!!c&&(c.length>0);if(d||a){b.filtered=a;b.onFilterChange(c)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==false){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(a,c,d){var b=this.getSorters();b.addSort.apply(b,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify("beforesort",[a.getSorters()]);if(a.length){Ext.Array.sort(a.items,b)}a.notify("sort")},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(c,a,b){if(!a){a=this.items}if(!b){b=this.getSortFn()}return Ext.Array.binarySearch(a,c,b)},applySorters:function(a,b){if(a==null||(a&&a.isSorterCollection)){return a}if(a){if(!b){b=this.getSorters()}b.splice(0,b.length,a)}return b},createSortFn:function(){var c=this,a=c.getGrouper(),b=c.getSorters().getSortFn();if(!a){return b}return function(d,f){return a.sort(d,f)||b(d,f)}},updateGrouper:function(b){var d=this,a=d.getGroups(),g=d.getSorters(),f,c;d.onSorterChange();d.grouped=!!b;if(b){if(!a){a=new Ext.util.GroupCollection({itemRoot:d.getRootProperty()});d.addObserver(a);d.setGroups(a)}c=a.getSorters();c.splice(0,c.length,{property:"_groupKey",direction:b.getDirection()});f=true}else{if(a){d.removeObserver(a);a.destroy()}d.setGroups(null)}if(!g.updating){d.onEndUpdateSorters(g)}if(f){a.onCollectionRefresh(d)}},updateSorters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateSorters",c)}if(a){a.on("endupdate","onEndUpdateSorters",c,{prepend:true});a.$sortable=c}c.onSorterChange();c.onEndUpdateSorters(a)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(c){var b=this,d=b.sorted,a=b.grouped||(c&&(c.length>0));if(d||a){b.sorted=!!a;b.onSortChange(c)}},removeObserver:function(a){var b=this.observers;if(b){Ext.Array.remove(b,a);delete this.observerMap[a.getId()]}},spliceMerge:function(q){var l=this,o,b=q.length,m=0,n=l.items,a=n.length,j=[],g=0,h=[],k=l.getSorters(),p,c,d,f,r;l.items=h;for(o=0;o<b;o=c){f=q[o];for(;m<a;++m){if(k.sortFn(f,r=n[m])<0){break}h.push(r)}if(m===a){j[g++]={at:h.length,itemAt:h[h.length-1],items:(p=[])};if(g>1){j[g-2].next=j[g-1]}for(;o<b;++o){p.push(f=q[o]);h.push(f)}break}j[g++]={at:h.length,itemAt:h[h.length-1],items:(p=[f])};if(g>1){j[g-2].next=j[g-1]}h.push(f);for(c=o+1;c<b;++c){if(k.sortFn(f=q[c],r)>=0){break}h.push(f);p.push(f)}}for(;m<a;++m){h.push(n[m])}l.length=h.length;++l.generation;for(d=0;d<g;++d){l.notify("add",[j[d]])}},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(b,a){var c=this.autoSource;if(a){a.removeObserver(this);if(a===c){c.destroy();this.autoSource=null}}if(b){b.addObserver(this);if(b.length||this.length){this.onCollectionRefresh(b)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(f,d,c){return this.aggregate(f,b,d,c)};a[b+"ByGroup"]=function(c){return this.aggregateByGroup(c,b)}})}));(Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:true,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(b,a){return b.isObjectTemplate?b:new Ext.util.ObjectTemplate(b,a)}},constructor:function(b,a){Ext.apply(this,a);this.template=b},apply:function(a){var b=this;delete b.apply;b.apply=b.compile(b.template);return b.apply(a)},privates:{compile:function(f){var g=this,b=g.excludeProperties,h,c,a,d;if(Ext.isString(f)){if(f.indexOf("{")<0){d=function(){return f}}else{if(g.valueRe.test(f)){f=f.substring(1,f.length-1).split(".");d=function(l){for(var j=l,k=0;j&&k<f.length;++k){j=j[f[k]]}return j}}else{f=new Ext.XTemplate(f);d=function(j){return f.apply(j)}}}}else{if(Ext.isPrimitive(f)||Ext.isFunction(f)){d=function(){return f}}else{if(f instanceof Array){h=[];for(c=0,a=f.length;c<a;++c){h[c]=g.compile(f[c])}d=function(l){var j=[],k;for(k=0;k<a;++k){j[k]=h[k](l)}return j}}else{h={};for(c in f){if(!b[c]){h[c]=g.compile(f[c])}}d=function(m){var k={},l,j;for(l in f){j=b[l]?f[l]:h[l](m);if(j!==undefined){k[l]=j}}return k}}}}return d}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0));(Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:true,left:true,owner:false,side:"left",isMany:false,defaultReaderType:"json",constructor:function(b,c){var d=this,a=c.extra;Ext.apply(d,c);if(a){delete a.type;Ext.apply(d,a);delete d.extra}d.association=b;if(b.owner===d.side){b.owner=d;d.owner=true}},processUpdate:function(){Ext.Error.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},validateAssociationRecords:function(c,b,a){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(b,c){var a=this.getAssociatedItem(b);if(a){c.adopt(a)}},createAssociationStore:function(g,n,f,o){var j=this,d=j.association,h=d.getFieldName(),k=d.isManyToMany,b=j.storeConfig,a=n.getId(),c={model:j.cls,data:f,role:j,session:g,associatedEntity:n,disableMetaChangeEvent:true,pageSize:null,remoteFilter:true,trackRemoved:!g},l,m;if(k){c.filters=[{property:j.inverse.field,value:a,exactMatch:true}]}else{if(h){c.filters=[{property:h,value:a,exactMatch:true}];c.foreignKeyName=h}}if(b){Ext.apply(c,b)}m=Ext.Factory.store(c);if(f){m.complete=!!o}if(k){if(g){l=g.getMatrixSlice(j.inverse,a);l.attach(m);l.notify=j.onMatrixUpdate;l.scope=j}}if(h||(k&&g)){m.on({add:"onAddToMany",load:"onLoadMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany",scope:j});if(f){j.onLoadMany(m,m.getData().items,true)}}return m},getAssociatedStore:function(g,s,r,b,q){var l=this,h=l.storeName||l.getStoreName(),n=g[h],p=s&&s.reload,a=g.$source,k=g.session,j,d,f,o,c,m;if(!n){if(!b&&a){a=a[h];if(a&&!a.isLoading()){m=a;b=[];o=a.getData().items;for(d=0,f=o.length;d<f;++d){c=o[d];b.push(k.getRecord(c.self,c.id))}q=true}}n=l.createAssociationStore(k,g,b,q);n.$source=m;if(!b&&(l.autoLoad||s)){p=true}g[h]=n}if(s){if(p||n.isLoading()){n.on("load",function(v,u,w,t){j=[v,t];r=r||s.scope||g;if(w){Ext.callback(s.success,r,j)}else{Ext.callback(s.failure,r,j)}j.push(w);Ext.callback(s,r,j);Ext.callback(s.callback,r,j)},null,{single:true})}else{j=[n,null];r=r||s.scope||g;Ext.callback(s.success,r,j);j.push(true);Ext.callback(s,r,j);Ext.callback(s.callback,r,j)}}if(p&&!n.isLoading()){n.load()}return n},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.role;return b[a]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var c=this,a=c.reader,d=c.cls,f=!c.associationKey,b=this.getReaderRoot();if(a){if(Ext.isString(a)){a={type:a,rootProperty:b,useSimpleAccessors:f}}if(a.isReader){a.setModel(d);a.setRootProperty(b);a.setUseSimpleAccessors(f)}else{Ext.applyIf(a,{model:d,rootProperty:b,useSimpleAccessors:f,type:c.defaultReaderType})}a=c.reader=Ext.createByAlias("reader."+a.type,a)}return a},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(d){var f=this,a=f.getReader(),g=f.cls,h=!f.associationKey,b=f.getReaderRoot(),c;if(!a){c=g.getProxy();if(c){a=c.getReader();f.savedRoot=a.getRootProperty();a.setRootProperty(b)}else{a=new d.self({model:g,useSimpleAccessors:h,rootProperty:b})}}return a},read:function(c,j,d,h){var g=this,b=this.constructReader(d),a=b.read(j,h),f=g.savedRoot;if(f!==undefined){b.setRootProperty(f);delete g.savedRoot}return a},getCallbackOptions:function(a,b,c){if(typeof a==="function"){a={callback:a,scope:b||c}}else{if(a){a=Ext.apply({},a);a.scope=b||a.scope||c}}return a},doGetFK:function(b,o,m){var k=this,n=k.cls,g=k.association.getFieldName(),f=k.role,l=b[f],a=o&&o.reload,d=l!==undefined&&!a,j=b.session,c,h;if(!d){if(j){c=b.get(g);if(c||c===0){d=j.peekRecord(n,c,true)&&!a;l=j.getRecord(n,c,false)}else{d=true;b[f]=l=null}}else{if(g){c=b.get(g);if(!c&&c!==0){d=true;b[f]=l=null}else{if(!l){l=n.createWithId(c)}}}else{d=true}}}else{if(l){d=!l.isLoading()}}if(d){if(o){h=[l,null];m=m||o.scope||b;Ext.callback(o.success,m,h);h.push(true);Ext.callback(o,m,h);Ext.callback(o.callback,m,h)}}else{b[f]=l;o=k.getCallbackOptions(o,m,b);l.load(o)}return l},doSetFK:function(a,k,n,m){var j=this,f=j.association.getFieldName(),d=j.role,g=a[d],b=j.inverse,c=b.setterName,h=a.session,l;if(k&&k.isEntity){if(g!==k){if(f){a.set(f,k.getId())}a[d]=k;if(c){k[c](a)}}}else{l=(a.changingKey&&!b.isMany)||a.set(f,k);if(l&&g&&g.isEntity&&!g.isEqual(g.getId(),k)){a[d]=undefined;if(!b.isMany){g[b.role]=undefined}}}if(n){if(Ext.isFunction(n)){n={callback:n,scope:m||a}}return a.save(n)}}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0));(Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:false,isManyToOne:false,isManyToMany:false,owner:null,field:null,constructor:function(a){var c=this,d,b;Ext.apply(c,a);c.left=d=new c.Left(c,c.left);c.right=b=new c.Right(c,c.right);d.inverse=b;b.inverse=d},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0));(Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:true,isToOne:true,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(a,b){a[this.role]=null},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(a){var b=this.role,c=a[b],d=a.session;if(!c&&d){}return c||null},doSet:function(a,f){var b=this.role,d=a[b],c=this.inverse.setterName;if(d!==f){a[b]=f;if(c){f[c](a)}}return d},read:function(b,g,d,h){var f=this,a=f.callParent([b,g,d,h]),j=a.getRecords()[0],c=f.role;if(j){j[f.inverse.role]=b;b[c]=j;delete b.data[c]}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(g,d){var b=this,c=b.association.field,a,f;if(b.inverse.owner){if(d){f=g.get(c.name);if(f||f===0){a=d.getEntry(b.cls,f).record;if(a){a.drop()}}}else{a=b.getAssociatedItem(g);if(a){a.drop()}}}if(c){g.set(c.name,null)}g[b.role]=null},onValueChange:function(f,d,c){var b=this,a=b.getAssociatedItem(f);f.changingKey=true;b.doSetFK(f,c);if(b.inverse.owner&&a){b.association.schema.queueKeyCheck(a,b)}f.changingKey=false},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(c,d,l,f){var h=this,m=h.callParent([c,d,l,f]),j=m.getRecords()[0],a=h.role,k=this.association.field,g=c.session,b;if(j){j[h.inverse.role]=c;c[a]=j;delete c.data[a];if(k){b=c.data[k.name];if(b!==j.id){c.data[k.name]=j.id;if(g){g.updateReference(c,k,j.id,b)}}}}}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:true,isToOne:true,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,onDrop:function(h,f){var g=this,k=g.getAssociatedItem(h),b,d,c,j,a;if(k){b=k.removeAll();if(b&&g.inverse.owner){for(c=0,d=b.length;c<d;++c){b[c].drop()}}k.destroy();h[g.getStoreName()]=null}else{if(f){b=f.getRefs(h,g);if(b){for(a in b){b[a].drop()}}}}},processUpdate:function(g,b){var h=this,d=h.inverse.cls,f=b.R,a,j,k,c;if(f){for(a in f){j=g.peekRecord(d,a);if(j){c=g.getEntityList(h.cls,f[a]);k=h.getAssociatedItem(j);if(k){c=h.validateAssociationRecords(g,j,c);k.loadRecords(c);k.complete=true}else{j[h.getterName](null,null,c)}}else{g.onInvalidAssociationEntity(d,a)}}}},validateAssociationRecords:function(k,j,d){var l=k.getRefs(j,this,true),h=[],a,c,b,f,g;if(l){if(d){a={};for(f=0,g=d.length;f<g;++f){c=d[f];b=c.id;if(l[b]){h.push(c)}a[b]=true}}for(b in l){if(!a||!a[b]){h.push(l[b])}}}return h},adoptAssociated:function(b,g){var c=this.getAssociatedItem(b),f,d,a;if(c){c.setSession(g);f=c.getData().items;for(d=0,a=f.length;d<a;++d){g.adopt(f[d])}}},createGetter:function(){var a=this;return function(c,d,g){var f=this.session,b=!!g;if(f){g=a.validateAssociationRecords(f,this,g);if(!b&&!g.length){g=null}}return a.getAssociatedStore(this,c,d,g,b)}},createSetter:null,onAddToMany:function(a,b){this.syncFK(b,a.associatedEntity,false)},onLoadMany:function(m,d,g){var n=this.inverse.role,k=m.associatedEntity,a=k.getId(),l=this.association.field,j=m.getSession(),f,h,c,b;if(g){for(f=0,h=d.length;f<h;++f){c=d[f];c[n]=k;if(l){b=c.data[l.name];if(b!==a){c.data[l.name]=a;if(j){j.updateReference(c,l,a,b)}}}}}},onRemoveFromMany:function(a,b){this.syncFK(b,a.associatedEntity,true)},read:function(h,a,l,c){var g=this,k=g.inverse.role,m=g.callParent([h,a,l,c]),j,b,f,d;if(m.getReadRoot()){j=h[g.getterName](null,null,m.getRecords());delete h.data[g.role];b=j.getData().items;for(d=0,f=b.length;d<f;++d){b[d][k]=h}}},syncFK:function(d,j,k){var h=this.association.getFieldName(),f=this.inverse.setterName,g=d.length,a=j.getId(),b,c;while(g-->0){c=d[g];b=!c.isEqual(a,c.get(h));if(b!==k){c.changingKey=true;if(f){c[f](k?null:j)}else{c.set(h,k?null:a)}c.changingKey=false}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",onDrop:function(c,b){var a=this.association.field;if(a){c.set(a.name,null)}c[this.role]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(c,d){var b=this.association.field,a;a=this.getSessionStore(c,d.get(b.name));if(a&&!a.contains(d)){a.add(d)}},onValueChange:function(c,g,b,a){var h=this,l,k,d,f,j;if(!c.changingKey){if(g){k=h.getSessionStore(g,a);if(k){k.remove(c)}if(b||b===0){k=h.getSessionStore(g,b);if(k&&!k.isLoading()){k.add(c)}}}else{l=c.joined;if(l){for(d=0,f=l.length;d<f;++d){k=l[d];if(k.isStore){j=k.getAssociatedEntity();if(j&&j.self===h.cls&&j.getId()===a){k.remove(c)}}}}}}if(h.owner&&b===null){h.association.schema.queueKeyCheck(c,h)}},checkKeyForDrop:function(b){var a=this.association.field;if(b.get(a.name)===null){b.drop()}},getSessionStore:function(c,b){var a=this.cls,d;if(a){d=c.peekRecord(a,b);if(d){return this.inverse.getAssociatedItem(d)}}},read:function(g,d,c,f){var b=this.callParent([g,d,c,f]),a=b.getRecords()[0];if(a){g[this.role]=a}}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:true,isToMany:true,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,digitRe:/^\d+$/,validateAssociationRecords:function(m,l,d){var n=m.getMatrixSlice(this.inverse,l.id),f=n.members,o=this.cls,k=[],a,h,j,b,g,c;if(d){a={};for(h=0,j=d.length;h<j;++h){c=d[h];b=c.id;g=f[b];if(!(g&&g[2]===-1)){k.push(c)}a[b]=true}}for(b in f){g=f[b];if(!a||!a[b]&&(g&&g[2]!==-1)){c=m.peekRecord(o,b);if(c){k.push(c)}}}return k},processUpdate:function(g,b){var h=this,d=h.inverse.cls,f=b.R,a,j,k,c;if(f){for(a in f){j=g.peekRecord(d,a);if(j){c=g.getEntityList(h.cls,f[a]);k=h.getAssociatedItem(j);if(k){c=h.validateAssociationRecords(g,j,c);k.loadRecords(c);k.complete=true;h.onAddToMany(k,c,true)}else{j[h.getterName](null,null,c)}}else{g.onInvalidAssociationEntity(d,a)}}}h.processMatrixBlock(g,b.C,1);h.processMatrixBlock(g,b.D,-1)},checkMembership:function(j,k){var l=j.getMatrix(this.association,true),h,d,f,n,o,a,c,g,b,m;if(!l){return}h=this.left?l.right:l.left;d=h.inverse.role.cls;f=this.inverse;o=h.slices;if(o){n=o[k.id];if(n){c=n.members;for(a in c){g=c[a];if(g[2]!==-1){b=j.peekRecord(d,a);if(b){m=f.getAssociatedItem(b);if(m){m.matrixUpdate=1;m.add(k);m.matrixUpdate=0}}}}}}},processMatrixBlock:function(f,d,c){var a=this.inverse,b=this.digitRe,g,h;if(d){for(h in d){if(b.test(h)){h=parseInt(h,10)}g=f.getMatrixSlice(a,h);g.update(d[h],c)}}},createGetter:function(){var a=this;return function(c,d,g){var f=this.session,b;if(f){b=!!g;g=a.validateAssociationRecords(f,this,g);if(!b&&!g.length){g=null}}return a.getAssociatedStore(this,c,d,g,b)}},onAddToMany:function(a,c,b){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(c,b===true?0:1);a.matrixUpdate=0}},onLoadMany:Ext.emptyFn,onRemoveFromMany:function(b,a){if(!b.matrixUpdate){b.matrixUpdate=1;b.matrix.update(a,-1);b.matrixUpdate=0}},read:function(b,f,c,g){var d=this,a=d.callParent([b,f,c,g]);if(a.getReadRoot()){b[d.getterName](null,null,a.getRecords());delete b.data[d.role]}},onMatrixUpdate:function(f,h,d){var a=f.store,b,g,c;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(h);if(d<0){if(b>=0){a.remove([b])}}else{if(b<0){c=a.getSession().getEntry(this.type,h);g=c&&c.record;if(g){a.add(g)}}}a.matrixUpdate=0}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:false,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^(p)erson$/i),"$1eople"],[(/^(m)an$/i),"$1en"],[(/(.*)(child)(ren)?$/i),"$1$2ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(address)$/i),"$1"],[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/(p)eople$/i),"$1erson"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(g){if(this.isTransnumeral(g)){return g}var f=this.plurals,d=f.length,a,c,b;for(b=0;b<d;b++){a=f[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},singularize:function(g){if(this.isTransnumeral(g)){return g}var f=this.singulars,d=f.length,a,c,b;for(b=0;b<d;b++){a=f[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(d){var b=parseInt(d,10),c=b%10,a=b%100;if(11<=a&&a<=13){return d+"th"}else{switch(c){case 1:return d+"st";case 2:return d+"nd";case 3:return d+"rd";default:return d+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},a;for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}}));(Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:true,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(b){var a=b.match(this.endsWithIdRe,"");if(a){b=b.substr(0,b.length-(a[1]||a[2]).length)}return this.apply("uncapitalize",b)},idField:function(a){return this.apply("uncapitalize,singularize",a)+"Id"},multiRole:function(a){return this.apply("undotted,uncapitalize,pluralize",a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply("uncapitalize",a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply("underscore",a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return"_"+a},uniRole:function(a){return this.apply("undotted,uncapitalize,singularize",a)},undotted:function(b){if(b.indexOf(".")<0){return b}var c=b.split("."),a=c.length;while(a-->1){c[a]=this.apply("capitalize",c[a])}return c.join("")},getterName:function(b){var a=b.role;if(b&&b.isMany){return a}return"get"+this.apply("capitalize",a)},inverseFieldRole:function(h,j,f,b){var g=this,a=g.apply(j?"uniRole":"multiRole",h),d=g.apply("pluralize",f),c=g.apply("undotted,pluralize",b);if(d.toLowerCase()!==c.toLowerCase()){a=f+g.apply("capitalize",a)}return a},manyToMany:function(f,d,a){var c=this,b=c.apply("undotted,capitalize,singularize",d)+c.apply("undotted,capitalize,pluralize",a);if(f){b=c.apply("capitalize",f+b)}return b},manyToOne:function(d,b,a,c){return this.apply("capitalize,singularize",a)+this.apply("capitalize",b)},matrixRole:function(c,b){var a=this.apply(c?"multiRole,capitalize":"multiRole",b);return c?c+a:a},oneToOne:function(d,b,a,c){return this.apply("undotted,capitalize,singularize",a)+this.apply("capitalize",b)},setterName:function(a){return"set"+this.apply("capitalize",a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(f,c){var j=this,b=j.cache,k=b[c]||(b[c]={}),h=k[f],g,d,a;if(!h){if(f.indexOf(",")<0){h=j[f](c)}else{d=(a=f.split(",")).length;h=c;for(g=0;g<d;++g){h=j.apply(a[g],h)}}k[f]=h}return h}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0));(Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:true,type:"default",statics:{instances:{},get:function(d){var g=this,c=g.instances,h="default",b=d&&Ext.isString(d),a,f;if(d){if(d.isSchema){return d}h=b?d:(d.id||h)}if(!(a=c[h])){c[h]=a=g.create(d);a.id=h}else{if(d&&!b){f=Ext.merge({},a.config);Ext.merge(f,d);a.setConfig(f);a.config=f}}return a},lookupEntity:function(a){var d=null,g=this.instances,c,b,f;if(a){if(a.isEntity){d=a.self}else{if(Ext.isFunction(a)){d=a}else{if(Ext.isString(a)){d=Ext.ClassManager.get(a);if(d&&(!d.prototype||!d.prototype.isEntity)){d=null}if(!d){for(b in g){f=g[b];c=f.getEntity(a);if(c){if(d){Ext.Error.raise('Ambiguous entity name "'+a+'". Defined by schema "'+d.schema.type+'" and "'+b+'"')}d=c}}}if(!d){Ext.Error.raise('No such Entity "'+a+'".')}}}}}return d}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(a,c){var b=c.alias;if(b&&!c.type){if(!Ext.isString(b)){b=b[0]}a.prototype.type=b.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(b){if(b){var a=b.length-1;if(b.charAt(a)!=="."){b+="."}}return b},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var b=this.associations,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a])===false){break}}}},eachEntity:function(c,b){var d=this.entities,a;for(a in d){if(d.hasOwnProperty(a)){if(c.call(b,a,d[a].cls)===false){break}}}},getAssociation:function(a){var b=this.associations[a];return b||null},getEntity:function(a){var b=this.entityClasses[a]||this.entities[a];return(b&&b.cls)||null},getEntityName:function(a){var d=this.getNamespace(),c,b;if(typeof a==="string"){b=a}else{b=a.$className||null}if(b){if(d){c=d.length;if(b.substring(0,c)!==d){return b}}if(c){b=b.substring(c)}}return b},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(a){var b=this.getEntityName(a);return !!(this.entities[b]||this.entityClasses[b])},addMatrix:function(o,h,d,c,s){var t=this,m=t.getNamer(),q=t.associations,a=t.entities,g=c.type,r=s.type,f=c.field||m.apply("idField",g),k=s.field||m.apply("idField",r),b=c.role||m.matrixRole(d,g),n=s.role||m.matrixRole(d,r),p,j,l;j=a[g]||(a[g]={cls:null,name:g,associations:{}});l=a[r]||(a[r]={cls:null,name:r,associations:{}});++t.assocCount;q[h]=p=new Ext.data.schema.ManyToMany({name:h,schema:t,definedBy:o,left:{cls:j.cls,type:g,role:b,field:f},right:{cls:l.cls,type:r,role:n,field:k}});j.associations[p.right.role]=p.right;l.associations[p.left.role]=p.left;t.associationEntityMap[o.entityName]=true;t.decorateModel(p)},addReference:function(s,a,q,b){var v=this,o=v.getNamer(),d=v.entities,t=v.associations,n=s.entityName,f=q.association,r=!!q.legacy,k=q.child,m=q.parent,p=q.role,u=q.type||m||k,l=q.inverse,j=Ext.isString(l)?{role:l}:l,h=j&&j.role,c,g;if(!p){if(r){p=o.apply("uncapitalize",u)}else{p=o.apply("fieldRole",a.name)}}if(!h){h=o.inverseFieldRole(n,b,p,u)}if(!f){if(b){f=o.oneToOne(s,h,u,p)}else{f=o.manyToOne(s,h,u,p)}}c=d[u]||(d[u]={cls:null,name:u,associations:{}});g=b?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;f=new g({name:f,owner:k?"left":(m?"right":null),definedBy:s,schema:v,field:a,nullable:a?!!a.allowBlank:true,legacy:q.legacy,left:{cls:s,type:n,role:h,extra:j},right:{cls:c.cls,type:u,role:p,extra:q}});s.associations[p]=f.right;c.associations[h]=f.left;if(a){a.reference=f.right;s.references.push(a)}++v.assocCount;v.associationEntityMap[n]=true;if(c.cls){v.associationEntityMap[c.cls.entityName]=true}t[f.name]=f;if(f.right.cls){v.decorateModel(f)}},privates:{addEntity:function(d){var j=this,h=j.entities,l=d.entityName,m=h[l],g=d.fields,c,k,f,b,a;if(!m){h[l]=m={name:l,associations:{}}}else{c=m.associations;for(a in c){c[a].inverse.cls=d;j.associationEntityMap[l]=true;j.decorateModel(c[a].association)}}m.cls=d;d.prototype.associations=d.associations=m.associations;j.entityClasses[d.$className]=m;++j.entityCount;for(f=0,b=g.length;f<b;++f){k=g[f];if(k.reference){j.addReferenceDescr(d,k)}}},addMatrices:function(g,a){var f=this,b,d,c;if(Ext.isString(a)){f.addMatrixDescr(g,null,a)}else{if(a[0]){for(b=0,d=a.length;b<d;++b){f.addMatrixDescr(g,null,a[b])}}else{for(c in a){f.addMatrixDescr(g,c,a[c])}}}},addMatrixDescr:function(f,a,g){var h=this,k=f.entityName,d=h.associations,j=h.getNamer(),c=g.left,m=g.right,l,b;if(Ext.isString(g)){if(g.charAt(0)==="#"){c={type:k};m={type:g.substring(1)}}else{if(g.charAt(l=g.length-1)==="#"){c={type:g.substring(0,l)};m={type:k}}else{if(j.apply("multiRole",k)<j.apply("multiRole",g)){c={type:k};m={type:g}}else{c={type:g};m={type:k}}}}}else{b=g.relation;if(c||(!m&&j.apply("multiRole",k)<j.apply("multiRole",g.type))){if(!c||c===true){c={type:k}}else{c=Ext.apply({type:k},c)}m=g}else{if(!m||m===true){m={type:k}}else{m=Ext.apply({type:k},m)}c=g}}if(!a){a=j.manyToMany(b,c.type,m.type)}if(!(a in d)){h.addMatrix(f,a,b,c,m)}},addReferenceDescr:function(b,d){var a=this,c=d.$reference;if(Ext.isString(c)){c={type:c}}else{c=Ext.apply({},c)}if(c.legacy){if(c.single){a.addLegacySingle(b,c)}else{a.addLegacyHasMany(b,c)}}else{a.addReference(b,d,c,d.unique)}},addPending:function(a,c,f,b){var d=this.pending;if(!d[a]){d[a]=[]}d[a].push([c,f,b])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(c,f){var b,a,d;f=this.constructLegacyAssociation(c,f);f.single=true;a=f.type;b=f.foreignKey||(a.toLowerCase()+"_id");d=c.getField(b);if(d){d.$reference=f}this.addReference(c,d,f,true)},addLegacyHasMany:function(d,k){var l=this,g=l.entities,c=l.pending,a=k.associationKey,n,b,m,j,h,f;k=this.constructLegacyAssociation(d,k);b=k.type;j=g[b];if(j&&j.cls){k.type=d.entityName;h=k.foreignKey||(k.type.toLowerCase()+"_id");n=j.cls;m=n.getField(h);k.inverse=k;f=k.name;if(f||a){k.inverse={};if(f){k.inverse.role=f}if(a){k.inverse.associationKey=a}}if(m){m.$reference=k}l.addReference(n,m,k,false)}else{if(!c[b]){c[b]=[]}c[b].push([d,k])}},constructLegacyAssociation:function(b,c){if(Ext.isString(c)){c={model:c}}c.legacy=true;c.type=this.getEntityName(c.model);var a=c.associatedName||c.name;if(a){c.role=a}return c},afterLegacyAssociations:function(b){var g=this.pending,c=b.entityName,f=g[c],d,a;if(f){for(d=0,a=f.length;d<a;++d){this.addLegacyHasMany.apply(this,f[d])}delete g[c]}},clear:function(b){var a=this,c=a.timer;delete a.setConfig;if(c){window.clearTimeout(c);a.timer=null}a.associations={};a.associationEntityMap={};a.entities={};a.entityClasses={};a.pending={};a.assocCount=a.entityCount=0;if(b){a.setNamespace(null)}},constructProxy:function(d){var b=this,c=Ext.Object.chain(d),a=b.getProxy();c.schema=b;c.prefix=b.getUrlPrefix();return a.apply(c)},applyDecoration:function(h){var f=this,a=h.inverse.cls,g=f.getNamer(),c,b,d;if(a&&!h.decorated){h.decorated=true;d=a.prototype;if(!(c=h.getterName)){h.getterName=c=g.getterName(h)}d[c]=h.createGetter();if(h.createSetter){if(!(b=h.setterName)){h.setterName=b=g.setterName(h)}d[b]=h.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(d){var g=this,b=g.keyCheckQueue,h=g.timer,a,c,f;if(h){window.clearTimeout(h);g.timer=null}if(!b){return}do{b=g.keyCheckQueue;g.keyCheckQueue=[];for(c=0,a=b.length;c<a;++c){f=b[c];f.role.checkKeyForDrop(f.record)}}while(d&&g.keyCheckQueue.length)},queueKeyCheck:function(a,f){var c=this,b=c.keyCheckQueue,d=c.timer;if(!b){c.keyCheckQueue=b=[]}b.push({record:a,role:f});if(!d){c.timer=d=Ext.Function.defer(c.processKeyChecks,c.getKeyCheckDelay(),c)}},rankEntities:function(){var f=this,g=f.entities,a=Ext.Object.getKeys(g),d=a.length,c,b;f.nextRank=1;a.sort();for(b=0;b<d;++b){c=g[a[b]].cls;if(!c.rank){f.rankEntity(c)}}},rankEntity:function(c){var b=c.associations,f,d,a;for(a in b){d=b[a];if(!d.left&&d.association.field){f=d.cls;if(!f.rank){this.rankEntity(f)}}}c.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{autoFilter:true,autoSort:true,filters:undefined,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:undefined,remoteSort:false,remoteFilter:false,groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:false,isDestroyed:false,isStore:true,updating:0,constructor:function(b){var c=this,a;c.isInitializing=true;c.mixins.observable.constructor.call(c,b);c.isInitializing=false;a=c.getStoreId();if(!a&&(b&&b.id)){c.setStoreId(a=b.id)}if(a){Ext.data.StoreManager.register(c)}},getId:function(){return this.getObservableId()},getCount:function(){return this.getData().getCount()},rangeCached:function(b,a){return this.getData().getCount()>=Math.max(b,a)},find:function(g,f,h,j,a,d){var c=!j,b=c&&d;return this.getData().findIndex(g,f,h,c,b,!a)},findRecord:function(){var b=this,a=b.find.apply(b,arguments);return a!==-1?b.getAt(a):null},findExact:function(b,a,c){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(b),a)},this,c)},findBy:function(b,a,c){return this.getData().findIndexBy(b,a,c)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,c){var a=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);if(c&&c.callback){c.callback.call(c.scope||this,a,d,b,c)}return a},applyFilters:function(b,a){if(!a){a=this.createFiltersCollection();a.setRootProperty("data")}a.add(b);return a},applySorters:function(b,a){if(!a){a=this.createSortersCollection();a.setRootProperty("data")}a.add(b);return a},updateAutoFilter:function(b){var a=this.getData();if(a.setAutoFilter){a.setAutoFilter(b)}},updateAutoSort:function(a){var b=this.getData();if(b.setAutoSort){b.setAutoSort(a)}},filter:function(a,b){if(Ext.isString(a)){a={property:a,value:b}}this.getFilters().add(a)},removeFilter:function(a){var c=this,b=c.getFilters();if(a instanceof Ext.util.Filter){b.remove(a)}else{b.removeByKey(a)}},updateRemoteSort:function(c){var a=this,d=a.getSorters(),b=a.getData();if(c){d.on("endupdate",a.onSorterEndUpdate,a);b.un("beforesort",a.onBeforeCollectionSort,a)}else{d.un("endupdate",a.onSorterEndUpdate,a);b.on("beforesort",a.onBeforeCollectionSort,a)}},updateRemoteFilter:function(c){var b=this,a=b.getFilters();if(c){a.on("endupdate",b.onFilterEndUpdate,b)}else{a.un("endupdate",b.onFilterEndUpdate,b)}},addFilter:function(a){this.getFilters().add(a)},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(false);if(!a||a.getCount()===0){return}b.suppressNextFilter=!!c;a.removeAll();b.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){return this.getSorters().getCount()>0||this.isGrouped()},addFieldTransform:function(f){if(f.getTransform()){return}var d=f.getProperty(),c=this.getModel(),a,b;if(c){a=c.getField(d);b=a?a.getSortType():null}if(b&&b!==Ext.identityFn){f.setTransform(b)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var g=this,h=[],f=g.getFilters(),b=g.getGrouper(),j,d,c,a;g.getSorters().each(function(k){h[h.length]=k.getState();d=true});if(g.statefulFilters&&g.saveStatefulFilters){d=true;j=[];f.each(function(k){j[j.length]=k.getState()})}if(b){d=true}if(d){a={};if(h.length){a.sorters=h}if(j){a.filters=j}if(b){a.grouper=b.getState()}}return a},applyState:function(g){var d=this,h=d.getSorters(),c=d.getFilters(),b=g.sorters,a=g.filters,f=g.grouper;if(b){h.replaceAll(b)}if(a){d.saveStatefulFilters=true;c.replaceAll(a)}if(f){this.setGrouper(f)}},hasPendingLoad:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;a.clearListeners();if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.onDestroy();a.callParent()},sort:function(c,b,d){var a=this;if(arguments.length===0){if(a.getRemoteSort()){a.attemptLoad()}else{a.forceLocalSort()}}else{a.getSorters().addSort(c,b,d)}},onBeforeCollectionSort:function(a,b){this.fireEvent("beforesort",this,b.getRange())},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){if(a.getRemoteSort()){a.attemptLoad({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("datachanged",a);a.fireEvent("refresh",a);a.fireEvent("sort",a,b)}}else{a.fireEvent("sort",a,b)}},onFilterEndUpdate:function(){var b=this,a=b.suppressNextFilter;if(b.getAutoFilter()){if(b.getRemoteFilter()){b.currentPage=1;if(!a){b.attemptLoad()}}else{if(!a){b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}}}if(b.trackStateChanges){b.saveStatefulFilters=true}b.fireEvent("filterchange",b,b.getFilters().getRange())},updateGroupField:function(b){var a=this.getData();if(b){a.setGrouper({property:b,direction:this.getGroupDir()})}else{a.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(a,d,b){var c=this,f=a||c.getSorters().getCount()>0;if(a&&typeof a==="string"){a={property:a,direction:d||c.getGroupDir()}}c.getData().setGrouper(a);if(c.isLoadBlocked()){return}if(f){if(c.getRemoteSort()){c.attemptLoad({callback:function(){c.fireEvent("groupchange",c,c.getGrouper())}})}else{c.fireEvent("datachanged",c);c.fireEvent("refresh",c);c.fireEvent("groupchange",c,c.getGrouper())}}else{c.fireEvent("groupchange",c,c.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b="";if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:true,$configPrefixed:false,config:{field:null,message:""},constructor:function(a){this.initConfig(a);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(g){var k=this,h=g.fields,d=g.data,m,l,n,f,j,c,b,a;for(f=0,j=h.length;f<j;++f){l=h[f];a=l.name;b=d[a];if(l.validate&&!l.validate.$nullFn){m=k.length;c=l.validate(b,null,k);if(m===k.length&&c!==true){k.add(a,c)}}}return k},add:function(b,d){var c=this,a=Ext.data.field.Field.defaultInvalidMessage,g=b,f;if(Ext.isString(b)){g=new Ext.data.Error({field:b,message:d||a})}else{if(!(g.isError)){g=new Ext.data.Error({field:g.field||g.name,message:g.error||g.message||g.msg||a})}b=g.field}f=c.get(b);if(f){if(Ext.isArray(f)){f.push(g);return f}c.removeAtKey(b);g=[f,g];g.field=b;g=[g]}return Ext.util.MixedCollection.prototype.add.call(this,g)},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:true,config:{synchronous:false,url:"",params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}},getAction:function(){return this.action},execute:function(){var a=this;delete a.error;delete a.success;a.complete=a.exception=false;a.setStarted();return a.request=a.doExecute()},doExecute:Ext.emptyFn,abort:function(){var b=this,a=b.request;if(b.running&&a){b.getProxy().abort(a);b.request=null}},process:function(b,d,a,f){var c=this;f=f!==false;c.setResponse(a);c.setResultSet(b);if(b.getSuccess()){c.doProcess(b,d,a);c.setSuccessful(f)}else{if(f){c.setException(b.getMessage())}}},_commitSetOptions:{convert:true,commit:true},doProcess:function(n,g,f){var l=this,d=l._commitSetOptions,a=l.getRecords(),c=a.length,o=a[0].clientIdProperty,p=n.getRecords(),k=p?p.length:0,m,j,b,h;if(k&&o){m=Ext.Array.toValueMap(a,"id");for(h=0;h<k;++h){j=p[h];b=m[j[o]];if(b){delete m[b.id];delete j[o];b.set(j,d)}}for(h in m){m[h].commit()}}else{for(h=0;h<c;++h){b=a[h];if(k===0||!(j=p[h])){b.commit()}else{b.set(j,d)}}}},setStarted:function(){this.started=this.running=true},setCompleted:function(){this.complete=true;this.running=false;this.triggerCallbacks()},setSuccessful:function(a){this.success=true;if(a){this.setCompleted()}},setException:function(a){var b=this;b.exception=true;b.success=b.running=false;b.error=a;b.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);a.setInternalCallback(null);a.setInternalScope(null)}if(b=a.getCallback()){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return true}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:true,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0));(Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:true,order:30,foreignKeyDirection:-1,doProcess:function(){var c=this.getRecords(),a=c.length,b;for(b=0;b<a;++b){c[b].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,c){var f={},d=a.idField,b=this.getNameProperty()||"name";f[d[b]]=a.id;return f}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0));(Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:true,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:false},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return false}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0));(Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:true,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:true,type:"base",statics:{all:{},register:function(b,a){var c=this.all;c[b.toUpperCase()]=c[b.toLowerCase()]=c[b]=a.prototype}},onClassExtended:function(a,b){if(b.type){Ext.data.validator.Validator.register(b.type,a)}},constructor:function(a){if(typeof a==="function"){this.fnOnly=true;this.validate=a}else{this.initConfig(a)}},validate:function(){return true},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}));(Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:true,isField:true,allowBlank:true,allowNull:false,critical:false,defaultInvalidMessage:"This field is invalid",defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,sortDir:"ASC",unique:false,rank:null,stripRe:/[\$,%]/g,calculated:false,evil:false,identifier:false,onClassExtended:function(c,f){var g=f.sortType,d=c.prototype,a=d.validators,b=f.validators;if(g&&Ext.isString(g)){d.sortType=Ext.data.SortTypes[g]}if(b){if(!Ext.isArray(b)){b=[b]}delete f.validators;if(a){b=a.concat(b)}d.validators=b}},argumentNamesRe:/^function\s+\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var m=this,o=m.calculateRe,h,p,n,j,c,a,k,b,l,f,g;if(d){if(Ext.isString(d)){m.name=d}else{g=d.validators;if(g){delete d.validators;m.instanceValidators=g}Ext.apply(m,d)}}if(!m.allowNull){m.allowNull=!!m.reference}h=m.calculate;c=m.depends;if(h){m.convert=m.doCalculate;if(!c){if(!(c=h.$depends)){a={};l=h.toString();h.$depends=c=[];k=m.argumentNamesRe.exec(l);b=k?k[1]:"data";while((k=o.exec(l))){if(b===k[1]&&!a[f=k[2]]){a[f]=1;c.push(f)}}}m.depends=c}}n=m.defaultValue;if(m.convert){if(n!==undefined){m.defaultValue=n=m.convert(n)}m.calculated=p=m.convert.length>1;m.evil=p&&!c}if(m.persist===null){m.persist=!p}j=m.sortType;if(!m.sortType){m.sortType=Ext.data.SortTypes.none}else{if(Ext.isString(j)){m.sortType=Ext.data.SortTypes[j]}}if(c&&typeof c==="string"){m.depends=[c]}m.cloneDefaultValue=n!==undefined&&(Ext.isDate(n)||Ext.isArray(n)||Ext.isObject(n))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)},constructValidators:function(a){if(a){if(!(a instanceof Array)){a=[a]}var f=a.length,c=this._validators,b,d;for(b=0;b<f;++b){d=a[b];if(d.fn){d=d.fn}c.push(Ext.Factory.dataValidator(d))}}},collate:function(c,b){var d=this,a=c,f=b;if(d.sortType){a=d.sortType(a);f=d.sortType(f)}return(a<f)?-1:((a>f)?1:0)},compare:function(a,b){return(a===b)?0:((a<b)?-1:1)},isEqual:function(a,b){return !this.compare(a,b)},convert:null,serialize:null,validate:function(j,d,h){var g=this,f="",k,a,c,b;if(!g._validators){g.compileValidators()}c=g._validators;for(i=0,b=c.length;i<b;++i){a=c[i];k=a.validate(j);if(k!==true){k=k||g.defaultInvalidMessage;if(h){h.add(g.name,k);f=f||k}else{if(d){if(f){f+=d}f+=k}else{f=k;break}}}}return f||true},doCalculate:function(a,b){return b?this.calculate(b.data):a},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortDir:function(){return this.sortDir},getSortType:function(){return this.sortType},getType:function(){return"auto"}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:true,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==="boolean"){return a}if(this.allowNull&&(a===undefined||a===null||a==="")){return null}return this.trueRe.test(String(a))},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0));(Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:true,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(b,f){var d=b instanceof Date,c=f instanceof Date,a;if(c&&d){a=b.getTime()-f.getTime();if(a===0){a=0}else{a=a<0?-1:1}}else{if(d===c){a=0}else{a=d?1:-1}}return a},convert:function(c){if(!c){return null}if(c instanceof Date){return c}var a=this.dateReadFormat||this.dateFormat,b;if(a){return Ext.Date.parse(c,a)}b=Date.parse(c);return b?new Date(b):null},serialize:function(b){var a=null,c;if(Ext.isDate(b)){c=this.getDateWriteFormat();a=c?Ext.Date.format(b,c):b}return a},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty("dateWriteFormat")){return a.dateWriteFormat}if(a.hasOwnProperty("dateFormat")){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0));(Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:true,isIntegerField:true,convert:function(b){if(typeof b=="number"){return parseInt(b)}var d=b===undefined||b===null||b==="",a=this.allowNull,c;if(d){c=a?null:0}else{c=parseInt(String(b).replace(this.stripRe,""),10);if(a&&isNaN(c)){c=null}}return c},getType:function(){return"int"}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0));(Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Field,{isNumeric:true,isNumberField:true,convert:function(b){if(typeof b==="number"){return b}var d=b===undefined||b===null||b==="",a=this.allowNull,c;if(d){c=a?null:0}else{c=parseFloat(String(b).replace(this.stripRe,""));if(a&&isNaN(c)){c=null}}return c},getType:function(){return"float"}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0));(Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:true,convert:function(b){var a=this.allowNull?null:"";return(b===undefined||b===null)?a:String(b)},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0));(Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":true,factoryConfig:{defaultType:"sequential"},isGenerator:true,config:{id:null},constructor:function(b){var c=this,a,d;c.initConfig(b);d=c.getId();if(d){a=(b&&b.cache)||Ext.data.identifier.Generator.all;a[d]=c}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var c=this,a=Ext.Factory,b=a.dataIdentifier;a.dataIdentifier=function(d){var g=Ext.isString(d)?d:(d&&d.id),f=g&&((d&&d.cache)||c.all)[g];return f||b(d)}}));(Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var b=this,a=b._seed,c=b._prefix;b._seed+=b._increment;return(c!==null)?c+a:a}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:true,isModel:true,validIdRe:null,observableType:"record",constructor:function(f,m){var n=this,q=n.self,l=q.identifier,c=Ext.data.Model,o=c.identifier,p=n.idField.name,k,a,b,j,h,d,g;n.data=f||(f={});n.session=m||null;n.internalId=j=o.generate();if((k=f) instanceof Array){n.data=f={};g=n.getFields();h=Math.min(g.length,k.length);for(d=0;d<h;++d){f[g[d].name]=k[d]}}if(!(b=q.initializeFn)){q.initializeFn=b=c.makeInitializeFn(q)}if(!b.$nullFn){q.initializeFn(n)}if(!(n.id=a=f[p])&&a!==0){if(m){l=m.getIdentifier(q);a=l.generate()}else{if(o===l){a=j}else{a=l.generate()}}f[p]=n.id=a;n.phantom=true}if(m){m.add(n)}if(n.init&&Ext.isFunction(n.init)){n.init()}},editing:false,dirty:false,session:null,dropped:false,erased:false,clientIdProperty:null,evented:false,phantom:false,idProperty:"id",identifier:null,previousValues:undefined,proxy:undefined,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:true,beginEdit:function(){var c=this,b=c.modified,a=c.previousValues;if(!c.editing){c.editing=true;c.editMemento={dirty:c.dirty,data:Ext.apply({},c.data),generation:c.generation,modified:b&&Ext.apply({},b),previousValues:a&&Ext.apply({},a)}}},cancelEdit:function(){var b=this,a=b.editMemento;if(a){b.editing=false;Ext.apply(b,a);b.editMemento=null}},endEdit:function(b,d){var c=this,a=c.editMemento;if(a){c.editing=false;c.editMemento=null;c.previousValues=a.previousValues;if(!b){if(!d){d=c.getModifiedFieldNames(a.data)}if(c.dirty||(d&&d.length)){c.callJoined("afterEdit",[d])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(a){this.set(this.idProperty,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(b){var a;if(this.isModified(b)){a=this.modified[b]}return a},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:false,commit:true,silent:true},set:function(g,v,h){var H=this,d=H.self,I=H.data,o=H.modified,w=H.previousValues,a=H.session,G=Ext.isString(g),b=(G?h:v),r=b?b.convert!==false:H.convertOnSet,k=H.fieldsMap,E=b&&b.silent,s=b&&b.commit,q=!(b&&b.refs===false)&&a,p=!(b&&b.dirty===false&&!s),B=null,t,c,D,K,J,y,j,n,x,C,z=0,F,u,m,l,A,f;if(G){f=H._singleProp;f[g]=v}else{f=g}if(!(m=d.rankedFields)){m=d.rankFields()}F=m.length;do{for(J in f){A=f[J];t=I[J];j=H;c=k[J];if(c){if(r&&c.convert){A=c.convert(A,H)}j=c;l=c.reference}else{l=null}if(j.isEqual(t,A)){continue}I[J]=A;(B||(B=[])).push(J);(w||(H.previousValues=w={}))[J]=t;if(l&&l.cls){if(q){a.updateReference(H,c,A,t)}l.onValueChange(H,a,A,t)}C=(x=c&&c.dependents)&&x.length;while(C-->0){(n=x[C]).dirty=true;z=z?Math.min(z,n.rank):n.rank}if(!c||c.persist){if(o&&o.hasOwnProperty(J)){if(!p||j.isEqual(o[J],A)){delete o[J];H.dirty=-1}}else{if(p){if(!o){H.modified=o={}}H.dirty=true;o[J]=t}}}if(J===H.idField.name){D=true;y=t;u=A}}if(!z){break}c=m[z-1];c.dirty=false;if(G){delete f[g]}else{f=H._singleProp;G=true}g=c.name;f[g]=I[g];r=true;for(;z<F;++z){if(m[z].dirty){break}}if(z<F){++z}else{z=0}}while(1);if(H.dirty<0){H.dirty=false;for(K in o){if(o.hasOwnProperty(K)){H.dirty=true;break}}}if(G){delete f[g]}++H.generation;if(D){H.id=u;H.callJoined("onIdChanged",[y,u])}if(s){H.commit(E,B)}else{if(!E&&!H.editing&&B){H.callJoined("afterEdit",[B])}}return B},reject:function(a){var c=this,b=c.modified;c.rejecting=true;if(b){c.set(b,c._rejectOptions)}delete c.rejecting;c.clearState();if(!a){c.callJoined("afterReject")}},commit:function(b,d){var c=this,a;c.clearState();if(!c.rejecting){c.phantom=false}if(c.dropped){c.erased=a=true}if(!b){if(a){c.callJoined("afterErase")}else{c.callJoined("afterCommit",[d])}}},clearState:function(){var a=this;a.dirty=a.editing=false;a.editMemento=a.modified=null},drop:function(b){var f=this,d=f.associations,g=f.session,c=f.phantom,a;if(f.erased||f.dropped){return}f.dropped=true;if(d&&b!==false){for(a in d){d[a].onDrop(f,g)}}f.callJoined("afterDrop");if(f.phantom){f.setErased()}},join:function(b){var a=this,c=a.joined;if(!c){c=a.joined=[b]}else{if(!c.length){c[0]=b}else{Ext.Array.include(c,b)}}if(b.isStore){a.store=a.store||b}},unjoin:function(f){var d=this,g=d.joined,a=g&&g.length,b=d.store,c;if(a===1&&g[0]===f){g.length=0}else{if(a){Ext.Array.remove(g,f)}}if(b===f){b=null;if(g){for(c=0,a=g.length;c<a;++c){f=g[c];if(f.isStore){b=f;break}}}d.store=b}},clone:function(d){var c=this,b=c.modified,a=c.copy(c.id,d);if(b){a.modified=Ext.apply({},b)}a.dirty=c.dirty;a.dropped=c.dropped;a.phantom=c.phantom;return a},copy:function(c,g){var d=this,f=Ext.apply({},d.data),b=d.idProperty,a=d.self;if(c||c===0){f[b]=c}else{if(c===null){delete f[b]}}return new a(f,g)},getProxy:function(){return this.self.getProxy()},getValidation:function(b){var c=this,a=c.validation;if(!a){c.validation=a=new Ext.data.Validation();a.attach(c)}if(b===true||(b!==false&&a.syncGeneration!==c.generation)){a.refresh(b)}return a},validate:function(){return new Ext.data.ErrorCollection().init(this)},isValid:function(){var a=this.getValidation();return !a.dirty},toUrl:function(){var b=this.$className.split("."),a=b[b.length-1].toLowerCase();return a+"/"+this.getId()},erase:function(a){this.drop();return this.save(a)},setErased:function(){this.erased=true;this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(n){var k=this,b=k.associations,l,g,m,j,c,a,h,f,d;n=n||{};k.$gathering=1;for(d in b){f=b[d];m=f.getAssociatedItem(k);if(!m||m.$gathering){continue}if(m.isStore){m.$gathering=1;j=m.getData().items;a=j.length;c=[];for(g=0;g<a;++g){h=j[g];l=!h.$gathering;h.$gathering=1;c.push(h.getData(l));delete h.$gathering}delete m.$gathering}else{c=m.getData(true)}n[d]=c}delete k.$gathering;return n},getData:function(t){var l=this,k={},a=(t===true)?l._getAssociatedOptions:(t||k),f=l.data,m=a.associated,q=a.changes,p=q&&a.critical,j=q?l.modified:f,h=l.fieldsMap,g=a.persist,s=a.serialize,c,o,d,b,r;if(j){for(b in j){r=f[b];o=h[b];if(o){if(g&&!o.persist){continue}if(s&&o.serialize){r=o.serialize(r,l)}}k[b]=r}}if(p){c=l.self.criticalFields||l.getCriticalFields();for(d=c.length;d-->0;){b=(o=c[d]).name;if(!(b in k)){r=f[b];if(s&&o.serialize){r=o.serialize(r,l)}k[b]=r}}}if(m){l.getAssociatedData(k)}return k},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(b){b=Ext.apply({},b);var g=this,f=b.scope||g,c=g.getProxy(),j=b.callback,a=g.loadOperation,h=g.getId(),d;if(a){d=a.extraCalls;if(!d){d=a.extraCalls=[]}d.push(b);return a}b.id=h;b.recordCreator=function(m,k,l){var n=g.session;l.recordCreator=n?n.recordCreator:null;g.set(m,g._commitOptions);return g};b.internalCallback=function(m){var q=m.wasSuccessful()&&m.getRecords().length>0,r=g.loadOperation,o=r.extraCalls,l=[g,m],p=[g,m,q],n,k;g.loadOperation=null;if(q){Ext.callback(b.success,f,l)}else{Ext.callback(b.failure,f,l)}Ext.callback(j,f,p);if(o){for(n=0,k=o.length;n<k;++n){b=o[n];if(q){Ext.callback(b.success,f,l)}else{Ext.callback(b.failure,f,l)}Ext.callback(b.callback,f,p)}}g.callJoined("afterLoad")};delete b.callback;g.loadOperation=a=c.createOperation("read",b);a.execute();return a},save:function(k){k=Ext.apply({},k);var g=this,d=g.phantom,a=g.dropped,c=a?"destroy":(d?"create":"update"),j=k.scope||g,h=k.callback,f=g.getProxy(),b;k.records=[g];k.internalCallback=function(l){var m=[g,l],n=l.wasSuccessful();if(n){Ext.callback(k.success,j,m)}else{Ext.callback(k.failure,j,m)}m.push(n);Ext.callback(h,j,m)};delete k.callback;b=f.createOperation(c,k);if(a&&d){b.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);g.setErased();b.setSuccessful(true)}else{b.execute()}return b},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(n,k){var o=this,f=o.prototype,j=Ext.data.field.Field,g=o.fields,m=o.fieldsMap,c=o.fieldOrdinals,p,d,b,h,a,l;if(k===true){g.length=0;o.fieldsMap=m={};o.fieldOrdinals=c={}}else{if(k){for(d=k.length;d-->0;){a=k[d];if(a in c){delete c[a];delete m[a]}}for(d=0,h=g.length;d<h;++d){a=(p=g[d]).name;if(a in c){c[a]=d}else{g.splice(d,1);--d;--h}}}}for(d=0,h=n?n.length:0;d<h;d++){a=(p=n[d]).name;if(!(a in c)){c[a]=l=g.length;g.push(p=j.create(p));m[a]=p;p.ordinal=l;p.definedBy=p.owner=this}}o.idField=f.idField=b=m[f.idProperty];b.allowNull=b.critical=b.identifier=true;b.defaultValue=null;o.initializeFn=o.rankedFields=o.transientFields=o.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(c){var b=this,a=b.idField,d=a.calculated?(new b(c)).id:c[a.name];return d},createWithId:function(g,b,c){var f=b,a=this;if(g||g===0){f={};if(b){Ext.apply(f,b)}f[a.idField.name]=g}return new a(f,c)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var b=this,a=b.proxy,c;if(!a){a=b.proxyConfig;if(!a||!a.isProxy){if(typeof a==="string"){a={type:a}}c=b.schema.constructProxy(b);a=a?Ext.merge(c,a):c}a=b.setProxy(a)}return a},setProxy:function(b){var c=this,a;if(b){if(!b.isProxy){b=Ext.Factory.proxy(b)}else{a=b.getModel();if(a&&a!==c){b=b.clone()}}b.setModel(c)}return(c.prototype.proxy=c.proxy=b)},load:function(f,a,c){var b={},d;b[this.prototype.idProperty]=f;d=new this(b,c);d.load(a);return d}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(g,d){var f=this,b=f.stores,a=b.length,c;for(c=0;c<a;++c){g.call(d,b[c])}},join:function(c){var b=this,a=b.stores,d=b.joined;if(!d){d=b.joined=[c]}else{d.push(c)}if(c.isStore){b.store=b.store||c;if(!a){a=b.stores=[]}a.push(c)}},unjoin:function(c){var b=this,a=b.stores,d=b.joined;if(d.length===1){d.length=0}else{Ext.Array.remove(d,c)}if(c.isStore){Ext.Array.remove(a,c);b.store=a[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:true},_getChangesOptions:{changes:true},_getAssociatedOptions:{associated:true},copyFrom:function(j){var h=this,f=h.fields,m=f.length,b=[],k,c=0,g,d,n=h.idProperty,a,l;if(j){g=h.data;d=j.data;for(;c<m;c++){k=f[c];a=k.name;if(a!=n){l=d[a];if(l!==undefined&&!h.isEqual(g[a],l)){g[a]=l;b.push(a)}}}if(h.phantom&&!j.phantom){h.beginEdit();h.setId(j.getId());h.endEdit(true);h.commit(true)}}return b},callJoined:function(d,c){var g=this,j=g.joined,f=g.session,a,b,h,k;if(!j&&!f){return}if(c){c.unshift(g)}else{c=[g]}if(j){for(a=0,b=j.length;a<b;++a){k=j[a];if(k&&(h=k[d])){h.apply(k,c)}}}h=f&&f[d];if(h){h.apply(f,c)}},setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(a){var d=this,f=d.data,b=[],g=a||d.editMemento.data,c;for(c in f){if(f.hasOwnProperty(c)){if(!d.isEqual(f[c],g[c],c)){b.push(c)}}}return b},isEqual:function(a,d,c){var b;if(c){b=c.isField?c:this.fieldsMap[c];if(b){return b.compare(a,d)===0}}if(a instanceof Date&&d instanceof Date){return a.getTime()===d.getTime()}return a===d},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",rankFields:function(){var k=this,j=k.prototype,d=k.fields,b=d.length,g=[],a=[],f=[],l,h,c;k.rankedFields=j.rankedFields=g;k.criticalFields=j.criticalFields=a;k.transientFields=j.transientFields=f;for(c=0;c<b;++c){h=d[c];if(h.critical){a.push(h)}if(!h.persist){f.push(h)}if(h.evil){(l||(l=[])).push(h)}else{if(!h.depends){g.push(h);h.rank=g.length}}}for(c=0;c<b;++c){if(!(h=d[c]).rank&&!h.evil){k.topoAdd(h)}}if(l){for(c=0,b=l.length;c<b;++c){g.push(h=l[c]);h.rank=g.length}}return g},topoAdd:function(h){var b=this,g=h.depends,a=g?g.length:0,d=b.rankedFields,c,f;for(c=0;c<a;++c){f=b.fieldsMap[g[c]];(f.dependents||(f.dependents=[])).push(h);if(!f.rank){b.topoAdd(f)}}d.push(h);h.rank=d.length},initFields:function(t,b,o){var k=Ext.data.field.Field,d=t.fields,p=[],l={},g={},a=[],s=o.fields,m=t.versionProperty||o.versionProperty,n=t.idProperty||o.idProperty,h,c,r,f,u,q,j;b.fields=o.fields=p;b.fieldOrdinals=o.fieldOrdinals=l;b.fieldsMap=o.fieldsMap=g;b.references=o.references=a;if(s){for(r=0,f=s.length;r<f;++r){p[r]=c=Ext.Object.chain(s[r]);c.dependents=null;c.owner=b;l[u=c.name]=r;g[u]=c}}if(d){delete t.fields;for(r=0,f=d.length;r<f;++r){c=d[r];j=c.reference;if(j&&typeof j!=="string"){j=Ext.merge({},j)}c.$reference=j;c=k.create(d[r]);u=c.name;q=l[u];if(q===undefined){l[u]=q=p.length}g[u]=c;p[q]=c;c.definedBy=c.owner=b;c.ordinal=q;if(u===m){c.critical=true}}}if(!(h=g[n])){h=new k(n);q=p.length;p[q]=h;l[n]=q;g[n]=h;h.definedBy=b;h.ordinal=q}h.allowNull=h.critical=h.identifier=true;h.defaultValue=null;b.idField=o.idField=h},initValidators:function(h,p,k){var n=k.validators,f,m,c,l,g,d,j,b,a,o;if(n){f={};for(m in n){f[m]=Ext.Array.clone(n[m])}}l=h.validators||h.validations;if(l){delete h.validators;f=f||{};if(Ext.isArray(l)){c={};for(g=0,d=l.length;g<d;++g){o=l[g];b=o.field;if(!c[b]){c[b]=[]}o=o.fn||o;c[b].push(o)}l=c}for(b in l){j=l[b];if(!Ext.isArray(j)){j=[j]}a=f[b];if(f[b]){Ext.Array.push(a,j)}else{f[b]=j}}}if(f){for(b in f){m=p.getField(b);if(m){m.setModelValidators(f[b])}}}p.validators=k.validators=f},initAssociations:function(c,g,l){var b=g.associations,d=g.belongsTo,j=g.hasMany,m=g.hasOne,k=g.manyToMany,f,a,h;delete g.manyToMany;if(k){c.addMatrices(l,k)}delete g.associations;delete g.belongsTo;delete g.hasMany;delete g.hasOne;if(b){b=Ext.isArray(b)?b:[b];for(f=0,a=b.length;f<a;++f){h=b[f];switch(h.type){case"belongsTo":c.addLegacyBelongsTo(l,h);break;case"hasMany":c.addLegacyHasMany(l,h);break;case"hasOne":c.addLegacyHasOne(l,h);break}}}if(d){d=Ext.isArray(d)?d:[d];for(f=0,a=d.length;f<a;++f){c.addLegacyBelongsTo(l,d[f])}}if(j){j=Ext.isArray(j)?j:[j];for(f=0,a=j.length;f<a;++f){c.addLegacyHasMany(l,j[f])}}if(m){m=Ext.isArray(m)?m:[m];for(f=0,a=m.length;f<a;++f){c.addLegacyHasOne(l,m[f])}}c.afterLegacyAssociations(l)},initIdentifier:function(g,a,f){var b=g.identifier||g.idgen,d=f.identifier||a.schema._defaultIdentifier,c;if(b){delete g.identifier;delete g.idgen;b=Ext.Factory.dataIdentifier(b)}else{if(d){if(d.clone&&!d.getId()){b=d.clone()}else{if(d.isGenerator){b=d}else{b=Ext.Factory.dataIdentifier(d)}}}}a.identifier=f.identifier=b;if(!b){c=a.entityName;if(!c){c=Ext.id(null,"extModel")}a.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:c+"-"})}},findValidator:function(c,d,b){var g=b.type||b,j=c[d],a,f,h;if(j){for(f=0,a=j.length;f<a;++f){h=j[f];if(h.type===g){return h}}}return null},makeInitializeFn:function(r){var a=["var "],j=["\nreturn function (e) {\n    var data = e.data, v;\n"],f=[],o=0,l,k,m,q,d,n,h,g,p,c,b;if(!(h=r.rankedFields)){h=r.rankFields()}for(c=0,b=h.length;c<b;++c){n=h[c];f[c]=g="f"+c;m=n.convert;if(c){a.push(",  \n    ")}a.push(g," = $fields["+c+"]");if((p=(n.defaultValue!==undefined))||m){q='data["'+n.name+'"]';++o;l=k="";if(n.cloneDefaultValue){l="Ext.clone(";k=")"}j.push("\n");if(m&&p){j.push("    v = ",q,";\n    if (v !== undefined) {\n        v = ",g,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",l,g,".defaultValue",k,";\n    }\n    ",q," = v;")}else{if(m){j.push("    v = ",g,".convert(",q,",e);\n    if (v !== undefined) {\n        ",q," = v;\n    }\n")}else{if(p){j.push("    if (",q," === undefined) {\n        ",q," = ",l,g,".defaultValue",k,";\n    }\n")}}}}}if(!o){return Ext.emptyFn}a.push(";\n");a.push.apply(a,j);a.push("}");a=a.join("");d=new Function("$fields",a);return d(h)}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var d=this,c=d.prototype,b=Ext.data.schema.Schema,a;d.proxyConfig=c.proxy;delete c.proxy;d.fields=[];d.fieldsMap=c.fieldsMap={};d.schema=c.schema=b.get(c.schema);c.idField=new Ext.data.field.Field(c.idProperty);d.identifier=new Ext.data.identifier.Sequential();d.onExtended(function(f,l){var k=f.prototype,n=l.schema,m=k.superclass.self,j,h,g;f.idProperty=k.idProperty;if(n){delete l.schema;j=b.get(n)}else{if(!(j=k.schema)){j=a||(a=b.get("default"))}}f.rankFields=d.rankFields;f.topoAdd=d.topoAdd;k.schema=f.schema=j;if(!(h=l.entityName)){k.entityName=h=j.getEntityName(f)}f.entityName=h;f.fieldExtractors={};d.initIdentifier(l,f,k);d.initFields(l,f,k);d.initValidators(l,f,k);f.fields.items=f.fields;if(h){j.addEntity(f);d.initAssociations(j,l,f)}g=l.proxy;if(g){delete l.proxy}else{if(m!==d){g=m.proxyConfig||m.proxy}}f.proxyConfig=g})}));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:true,$configPrefixed:false,config:{loaded:true,count:null,total:null,success:false,records:null,message:null,readRoot:false},constructor:function(a){this.initConfig(a)},applyCount:function(a){if(!a&&a!==0){return this.getRecords().length}return a},updateRecords:function(a){this.setCount(a.length)}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:true,readRecordsOnFailure:true,model:null,proxy:null,transform:null},isReader:true,constructor:function(a){if(a&&a.hasOwnProperty("root")){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}var b=this;b.duringInit=true;b.mixins.observable.constructor.call(b,a);delete b.duringInit;b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(true)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(b,d){var c,a;if(b){if(b.responseText){a=this.getResponseData(b);if(a&&a.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:a.msg})}else{c=this.readRecords(a,d)}}else{c=this.readRecords(b,d)}}return c||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return{__$isError:true,msg:a}},readRecords:function(f,c){var g=this,l,d,b,j,h,k,m,a;a=this.getTransform();if(a){f=a(f)}g.buildExtractors();g.rawData=f;f=g.getData(f);l=true;d=0;b=[];if(g.getSuccessProperty()){k=g.getSuccess(f);if(k===false||k==="false"){l=false}}if(g.getMessageProperty()){m=g.getMessage(f)}if(g.getReadRecordsOnFailure()||l){j=Ext.isArray(f)?f:g.getRoot(f);if(j){h=j.length}if(g.getTotalProperty()){k=parseInt(g.getTotal(f),10);if(!isNaN(k)){h=k}}if(j){b=g.extractData(j,c);d=b.length}}return new Ext.data.ResultSet({total:h||d,count:d,records:b,success:l,message:m,readRoot:!!j})},extractData:function(p,g){var n=this,h=g&&g.model?Ext.data.schema.Schema.lookupEntity(g.model):n.getModel(),d=h.schema,q=d.hasAssociations(h)&&n.getImplicitIncludes(),o=n.getFieldExtractorInfo(h.fieldExtractors),a=p.length,c=new Array(a),l=n.getTypeProperty(),m,b,f,k,j;if(!a&&Ext.isObject(p)){p=[p];a=1}for(j=0;j<a;j++){k=p[j];if(!k.isModel){b=k;if(l&&(f=n.getChildType(d,b,l))){m=f.getProxy().getReader();k=m.extractRecord(b,g,f,d.hasAssociations(f)&&m.getImplicitIncludes(),m.getFieldExtractorInfo(f.fieldExtractors))}else{k=n.extractRecord(b,g,h,q,o)}if(k.isModel){k.raw=b}}if(k.onLoad){k.onLoad()}c[j]=k}return c},getChildType:function(b,c,d){var a;switch(typeof d){case"string":return b.getEntity(c[d]);case"object":a=d.namespace;return b.getEntity((a?a+".":"")+c[d.name]);case"function":return b.getEntity(d(c))}},extractRecordData:function(c,d){var b=d&&d.model?Ext.data.schema.Schema.lookupEntity(d.model):this.getModel(),a=this.getFieldExtractorInfo(b.fieldExtractors);return this.extractRecord(c,d,b,false,a)},extractRecord:function(a,b,c,k,h){var g=this,f=(b&&b.recordCreator)||g.defaultRecordCreator,j,d;j=g.extractModelData(a,h);d=f.call(g,j,c||g.getModel(),b);if(k&&d.isModel){g.readAssociated(d,a,b)}return d},getFieldExtractorInfo:function(c){if(!c){return}var a=this.$className,b=c[a];if(b===undefined){c[a]=b=this.buildFieldExtractors()}return b},buildFieldExtractors:function(){var h=this.getFields(),j=h.length,f=[],l=[],d=null,b=0,k,a,g,c;for(g=0;g<j;++g){k=h[g];c=this.createFieldAccessor(k);if(c){a=k.name;f.push("data['"+a+"'] = extractors["+b+"](raw);");l.push(c);++b}}if(f.length){d={extractors:l,fn:new Function("raw","data","extractors",f.join(""))}}return d},defaultRecordCreator:function(b,c){var a=new c(b);a.phantom=false;return a},getModelData:function(a){return{}},extractModelData:function(b,a){var d=this.getModelData(b),c;if(a){c=a.fn;c(b,d,a.extractors)}return d},readAssociated:function(a,f,d){var c=a.associations,b,g;for(b in c){if(c.hasOwnProperty(b)){g=c[b];if(g.cls){g.read(a,f,this,d)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(h){var g=this,b=h.fields||g.getFields(),c,f,a,d;g.metaData=h;if(h.root){g.setRootProperty(h.root)}if(h.totalProperty){g.setTotalProperty(h.totalProperty)}if(h.successProperty){g.setSuccessProperty(h.successProperty)}if(h.messageProperty){g.setMessageProperty(h.messageProperty)}a=h.clientIdProperty;f=Ext.define(null,{extend:"Ext.data.Model",fields:b,clientIdProperty:a});g.setModel(f);d=g.getProxy();if(d){d.setModel(f)}g.buildExtractors(true)},buildExtractors:function(d){var b=this,c=b.getTotalProperty(),a=b.getSuccessProperty(),f=b.getMessageProperty();if(d||!b.hasExtractors){if(c){b.getTotal=b.createAccessor(c)}if(a){b.getSuccess=b.createAccessor(a)}if(f){b.getMessage=b.createAccessor(f)}b.hasExtractors=true;return true}},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;delete a.model;delete a.getTotal;delete a.getSuccess;delete a.getMessage}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(){var a=this.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""})})}));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(f){var c=f.getOperation(),b=c.getRecords()||[],a=b.length,g=[],d;for(d=0;d<a;d++){g.push(this.getRecordData(b[d],c))}return this.writeRecords(f,g)},writeRecords:Ext.emptyFn,getRecordData:function(k,h){var n=this,f=n.getNameProperty(),a=f!=="name",c=k.self.idField,r=c.name,q=k.id,d=n.getWriteAllFields(),m;if(c.serialize){q=c.serialize(q)}if(!d&&h&&h.isDestroyOperation){m={};m[f?c[f]:r]=q}else{var b=n.getDateFormat(),g=k.phantom,s=(g||d)?n.getAllDataOptions():n.getPartialDataOptions(),p=g&&n.getClientIdProperty(),l=k.getFieldsMap(),j,o;s.serialize=false;j=k.getData(s);m=a?{}:j;if(p){m[p]=q;delete j[r]}else{if(!n.getWriteRecordId()){delete j[r]}}for(r in j){q=j[r];if(!(o=l[r])){if(a){m[r]=q}}else{if(o.isDateField&&b&&Ext.isDate(q)){q=Ext.Date.format(q,b)}else{if(o.serialize){q=o.serialize(q,k)}}if(a){r=o[f]||r}m[r]=q}}}return m}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:false,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:undefined,reader:{type:"json"},writer:{type:"json"}},isProxy:true,isSynchronous:false,constructor:function(a){this.mixins.observable.constructor.call(this,a)},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){return Ext.Factory.reader(a)},updateReader:function(a){if(a){var c=this,b=c.getModel();if(!b){b=a.getModel();if(b){c.setModel(b)}}else{a.setModel(b)}if(a.onMetaChange){a.onMetaChange=Ext.Function.createSequence(a.onMetaChange,c.onMetaChange,c)}}},applyWriter:function(a){return Ext.Factory.writer(a)},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent("metachange",this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(p,m){var l=this,k=l.getBatchActions(),h,c,g,d,f,n,b,o,j;if(p.operations===undefined){p={operations:p,listeners:m}}if(p.batch){if(Ext.isDefined(p.batch.runOperation)){h=Ext.applyIf(p.batch,{proxy:l,listeners:{}})}}else{p.batch={proxy:l,listeners:p.listeners||{}}}if(!h){h=new Ext.data.Batch(p.batch)}h.on("complete",Ext.bind(l.onBatchComplete,l,[p],0));g=l.getBatchOrder().split(",");d=g.length;for(n=0;n<d;n++){f=g[n];c=p.operations[f];if(c){if(k){h.add(l.createOperation(f,{records:c,params:p.params}))}else{o=c.length;for(b=0;b<o;b++){j=c[b];h.add(l.createOperation(f,{records:[j],params:p.params}))}}}}h.start();return h},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException()){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else{if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}},createOperation:function(c,b){var a=Ext.createByAlias("data.operation."+c,b);a.setProxy(this);return a},clone:function(){return new this.self(this.getInitialConfig())}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{enablePaging:false,data:null},finishOperation:function(b){var c=0,d=b.getRecords(),a=d.length;for(c;c<a;c++){d[c].commit()}b.setSuccessful(true)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(g){var j=this,k=j.getReader().read(j.getData()),d=k.getRecords(),h=g.getSorters(),a=g.getGrouper(),c=g.getFilters(),b=g.getStart(),f=g.getLimit();if(g.process(k,null,null,false)!==false){if(c&&c.length){k.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(c)));k.setTotal(d.length)}if(a){h=h?h.concat(a):h}if(h&&h.length){k.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(h)))}if(j.getEnablePaging()&&b!==undefined&&f!==undefined){if(b>=k.getTotal()){k.setConfig({success:false,records:[],total:0})}else{k.setRecords(Ext.Array.slice(d,b,b+f))}}g.setCompleted()}},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",sortOnLoad:true,trackRemoved:true},onClassExtended:function(b,d,a){var c=d.model,f;if(typeof c==="string"){f=a.onBeforeCreated;a.onBeforeCreated=function(){var h=this,g=arguments;Ext.require(c,function(){f.apply(h,g)})}}},implicitModel:false,blockLoadCounter:0,autoSyncSuspended:0,constructor:function(a){var b=this;b.removed=[];b.blockLoad();Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);b.unblockLoad()},updateAutoLoad:function(b){var c=this,a;c.getData();if(b){a=c.loadTask||(c.loadTask=new Ext.util.DelayedTask(null,null,null,null,false));a.delay(1,c.attemptLoad,c,Ext.isObject(b)?[b]:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){var d=this,b,c;if(a){d.implicitModel=true;d.setModel(b=Ext.define(null,{extend:"Ext.data.Model",fields:a,proxy:(c=d.getProxy())}));if(c&&!c.getModel()){c.setModel(b)}}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else{this.getFields();return this.getModel()}return a},applyProxy:function(b){var c=this,a=c.getModel();if(b){if(b.isProxy){b.setModel(a)}else{if(Ext.isString(b)){b={type:b,model:a}}else{if(!b.model){b=Ext.apply({model:a},b)}}b=Ext.createByAlias("proxy."+b.type,b)}}else{if(a){b=a.getProxy()}}if(!b){b=Ext.createByAlias("proxy.memory")}if(!c.disableMetaChangeEvent){b.on("metachange",c.onMetaChange,c)}return b},updateTrackRemoved:function(a){this.removed=a?[]:null},onMetaChange:function(a,b){this.fireEvent("metachange",this,b)},create:function(g,c){var f=this,a=new f.model(g),d=f.getProxy(),b;c=Ext.apply({},c);if(!c.records){c.records=[a]}c.internalScope=f;c.internalCallback=f.onProxyWrite;b=d.createOperation("create",c);return b.execute()},read:function(){return this.load.apply(this,arguments)},update:function(b){var d=this,c=d.getProxy(),a;b=Ext.apply({},b);if(!b.records){b.records=d.getUpdatedRecords()}b.internalScope=d;b.internalCallback=d.onProxyWrite;a=c.createOperation("update",b);return a.execute()},onProxyWrite:function(b){var c=this,d=b.wasSuccessful(),a=b.getRecords();switch(b.getAction()){case"create":c.onCreateRecords(a,b,d);break;case"update":c.onUpdateRecords(a,b,d);break;case"destroy":c.onDestroyRecords(a,b,d);break}if(d){c.fireEvent("write",c,b);c.fireEvent("datachanged",c);c.fireEvent("refresh",c)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(b,a,c){if(c){this.removed.length=0}},erase:function(b){var d=this,c=d.getProxy(),a;b=Ext.apply({},b);if(!b.records){b.records=d.getRemovedRecords()}b.internalScope=d;b.internalCallback=d.onProxyWrite;a=c.createOperation("destroy",b);return a.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(c,a){var g=this,b=c.operations,f=b.length,d;if(g.batchUpdateMode!="operation"){g.suspendEvents();for(d=0;d<f;d++){g.onProxyWrite(b[d])}g.resumeEvents()}g.isSyncing=false;g.fireEvent("datachanged",g);g.fireEvent("refresh",g)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===true&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty===true&&a.phantom!==true&&a.isValid()},getRemovedRecords:function(){return this.removed},sync:function(c){var f=this,b={},g=f.getNewRecords(),d=f.getUpdatedRecords(),a=f.getRemovedRecords(),h=false;f.needsSync=false;if(g.length>0){b.create=g;h=true}if(d.length>0){b.update=d;h=true}if(a.length>0){b.destroy=a;h=true}if(h&&f.fireEvent("beforesync",b)!==false){f.isSyncing=true;c=c||{};f.proxy.batch(Ext.apply(c,{operations:b,listeners:f.getBatchListeners()}))}return f},getBatchListeners:function(){var b=this,a={scope:b,exception:b.onBatchException,complete:b.onBatchComplete};if(b.batchUpdateMode=="operation"){a.operationcomplete=b.onBatchOperationComplete}return a},save:function(){return this.sync.apply(this,arguments)},blockLoad:function(a){if(a!==undefined){this.blockLoadCounter=a}else{++this.blockLoadCounter}},unblockLoad:function(b){var c=this,a=c.blockLoadCounter;if(b){c.blockLoadCounter=0}else{if(a){--c.blockLoadCounter}}return a},isLoadBlocked:function(){return !!this.blockLoadCounter},attemptLoad:function(a){if(!this.isLoadBlocked()){this.load(a)}},load:function(b){if(this.isLoadBlocked()){return}var g=this,c=g.getProxy(),f=g.loadTask,a={internalScope:g,internalCallback:g.onProxyLoad},d,h;if(g.getRemoteFilter()){d=g.getFilters();if(d.getCount()){a.filters=d.getRange()}}if(g.getRemoteSort()){h=g.getSorters();if(h.getCount()){a.sorters=h.getRange()}g.fireEvent("beforesort",g,a.sorters)}Ext.apply(a,b);a.scope=a.scope||g;g.lastOptions=a;a=c.createOperation("read",a);if(g.fireEvent("beforeload",g,a)!==false){g.loading=true;if(f){f.cancel();g.loadTask=null}a.execute()}return g},reload:function(a){var b=Ext.apply({},a,this.lastOptions);return this.load(b)},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(a,c){var b=this;if(!c){c=null}if(b.contains(a)){b.onUpdate(a,Ext.data.Model.COMMIT,c);b.fireEvent("update",b,a,Ext.data.Model.COMMIT,c)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var a=this;a.blockLoad();a.clearData();a.setProxy(null);a.setModel(null)},hasPendingLoad:function(){return !!this.loadTask||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0));(Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},constructDataCollection:function(){var a=new Ext.util.Collection({rootProperty:"data",extraKeys:{byInternalId:{property:"internalId",rootProperty:""}}}),b;b=a.getSorters();b.setSorterConfigure(this.addFieldTransform,this);return a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){return this.getData().getSorters()},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return this.indexOf(a)>-1},each:function(f,d){var g=this.data.items,a=g.length,b,c;for(c=0;c<a;++c){b=g[c];if(f.call(d||b,b,c,a)===false){break}}},collect:function(b,a,c){var d=this,f=d.getData();if(c===true&&f.filtered){f=f.getSource()}return f.collect(b,"data",a)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(a){var b=this.getData();if(b.filtered){b=b.getSource()}return b.byInternalId.get(a)||null},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},queryBy:function(b,a){var c=this.getData();return(c.getSource()||c).createFiltered(b,a)},query:function(f,d,g,a,b){var c=this.getData();return(c.getSource()||c).createFiltered(f,d,g,a,b)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.sumByGroup(c):b.sum(c)},count:function(a){var b=this.getData();return(a&&this.isGrouped())?b.countByGroup():b.count()},min:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.minByGroup(c):b.min(c)},max:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.maxByGroup(c):b.max(c)},average:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.averageByGroup(c):b.average(c)},aggregate:function(h,l,f,j){var g=this,a,d,b,k,c;if(f&&g.isGrouped()){a=g.getGroups().items;d=a.length;b={};for(c=0;c<d;++c){k=a[c];b[k.getGroupKey()]=g.getAggregate(h,l||g,k.items,j)}return b}else{return g.getAggregate(h,l,g.getData().items,j)}},getAggregate:function(g,f,c,h){var b=[],a=c.length,d;for(d=0;d<a;++d){b[d]=c[d].get(h)}return g.call(f||this,c,b)},addObserver:function(a){var b=this.observers;if(!b){this.observers=b=new Ext.util.Collection()}b.add(a)},removeObserver:function(a){var b=this.observers;if(b){b.remove(a)}},callObservers:function(h,d){var j=this.observers,a,c,f,b,g;if(j){c=j.items;if(d){d.unshift(this)}else{d=[this]}for(f=0,a=c.length;f<a;++f){g=c[f];b="onSource"+h;if(g[b]){g[b].apply(g,d)}}}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:true,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(a,b){this.getExtraParams()[a]=b},buildRequest:function(a){var g=this,b=Ext.apply({},a.getParams()),h=Ext.applyIf(b,g.getExtraParams()||{}),f,d,c;Ext.applyIf(h,g.getParams(a));d=a.getId();c=g.getIdParam();if(d!==undefined&&h[c]===undefined){h[c]=d}f=new Ext.data.Request({params:h,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:g});f.setUrl(g.buildUrl(f));a.setRequest(f);return f},processResponse:function(j,c,h,b){var g=this,d,a,f;if(j===true){a=g.getReader();if(b.status===204){f=a.getNullResultSet()}else{f=a.read(g.extractResponseData(b),{recordCreator:c.getRecordCreator()})}c.process(f,h,b);d=!c.wasSuccessful()}else{g.setException(c,b);d=true}if(d){g.fireEvent("exception",g,b,c)}g.afterRequest(h,j)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(f,c){var a=[],d=f.length,b;for(b=0;b<d;b++){a[b]=f[b].serialize()}return this.applyEncoding(c?a[0]:a)},encodeFilters:function(d){var a=[],c=d.length,b,f;for(b=0;b<c;b++){a[b]=d[b].serialize()}return this.applyEncoding(a)},getParams:function(q){if(!q.isReadOperation){return{}}var w=this,v={},t=q.getGrouper(),a=q.getSorters(),o=q.getFilters(),j=q.getPage(),h=q.getStart(),u=q.getLimit(),m=w.getSimpleSortMode(),d=w.getSimpleGroupMode(),s=w.getPageParam(),f=w.getStartParam(),b=w.getLimitParam(),c=w.getGroupParam(),n=w.getGroupDirectionParam(),g=w.getSortParam(),r=w.getFilterParam(),p=w.getDirectionParam(),l,k;if(s&&j){v[s]=j}if(f&&(h||h===0)){v[f]=h}if(b&&u){v[b]=u}l=c&&t;if(l){if(d){v[c]=t.getProperty();v[n]=t.getDirection()}else{v[c]=w.encodeSorters([t],true)}}if(g&&a&&a.length>0){if(m){k=0;if(a.length>1&&l){k=1}v[g]=a[k].getProperty();v[p]=a[k].getDirection()}else{v[g]=w.encodeSorters(a)}}if(r&&o&&o.length>0){v[r]=w.encodeFilters(o)}return v},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.getCacheString(),Ext.Date.now()))}return a},getUrl:function(b){var a;if(b){a=b.getUrl()||this.getApi()[b.getAction()]}return a?a:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(a){},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.getReader(),this.getWriter())}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(a){var d=this,f=d.getWriter(),c=d.buildRequest(a),h=d.getMethod(c),b,g;if(f&&a.allowWrite()){c=f.write(c)}c.setConfig({binary:d.getBinary(),headers:d.getHeaders(),timeout:d.getTimeout(),scope:d,callback:d.createRequestCallback(c,a),method:h,useDefaultXhrHeader:d.getUseDefaultXhrHeader(),disableCaching:false});if(h.toUpperCase()!=="GET"&&d.getParamsAsJson()){g=c.getParams();if(g){b=c.getJsonData();if(b){b=Ext.Object.merge({},b,g)}else{b=g}c.setJsonData(b);c.setParams(undefined)}}if(d.getWithCredentials()){c.setWithCredentials(true);c.setUsername(d.getUsername());c.setPassword(d.getPassword())}return d.sendRequest(c)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(a){var c=this.getActionMethods(),b=a.getAction(),d;if(c){d=c[b]}return d||this.defaultActionMethods[b]},createRequestCallback:function(c,a){var b=this;return function(f,g,d){if(c===b.lastRequest){b.lastRequest=null}b.processResponse(g,a,c,d)}}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:false,preserveRawData:false},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(c,b){var a=this,d;if(a.getMeta){d=a.getMeta(c);if(d){a.onMetaChange(d)}}else{if(c.metaData){a.onMetaChange(c.metaData)}}return Ext.data.reader.Reader.prototype.readRecords.call(this,c,b)},getResponseData:function(a){try{return Ext.decode(a.responseText)}catch(b){Ext.Logger.warn("Unable to parse the JSON returned by the server");return this.createReadError(b.message)}},buildExtractors:function(){var c=this,b=c.getMetaProperty(),a=c.getRootProperty();if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){if(a){c.getRoot=c.createAccessor(a)}else{c.getRoot=Ext.identityFn}if(b){c.getMeta=c.createAccessor(b)}}},extractData:function(a,f){var g=this.getRecord(),d=[],c,b;if(g){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][g]}}else{d=a}return Ext.data.reader.Reader.prototype.extractData.call(this,d,f)},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:(function(){var a=/[\[\.]/;return function(r){var n=this,b=n.getUseSimpleAccessors(),f,u,k,g,d,q,t,p,o,l,m,h,s,j;if(!(r||r===0)){return}if(typeof r==="function"){return r}if(!b){f=String(r).search(a)}if(b===true||f<0){u=function(c){return c[r]}}else{k="raw";g=[];d="";q=0;j=r.length;for(h=0;h<=j;++h){m=r[h];t=m===".";p=m==="[";o=m==="]";l=t||p||o||!m;if(!l||q>1||(q&&!o)){d+=m}else{if(l){s=false;if(p){++q}else{if(o){--q;s=true}}if(d){if(s){d="["+d+"]"}else{d="."+d}k+=d;g.push(""+k);d=""}}}}u=g.join(" && ");u=Ext.functionFactory("raw","return "+u)}return u}}()),createFieldAccessor:function(f){var b=this,a=f.mapping,c=a||a===0,d=c?a:f.name;if(c){if(typeof d==="function"){return function(g){return f.mapping(g,b)}}else{return b.createAccessor(d)}}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,expandData:false},getExpandedData:function(d){var b=d.length,f=0,k,a,g,c,h,l=function(j,m){var n={};n[j]=m;return n};for(;f<b;f++){k=d[f];for(a in k){if(k.hasOwnProperty(a)){g=a.split(".");c=g.length-1;if(c>0){h=k[a];for(;c>0;c--){h=l(g[c],h)}k[g[0]]=k[g[0]]||{};Ext.Object.merge(k[g[0]],h);delete k[a]}}}}return d},writeRecords:function(f,g){var d=this,a=d.getRootProperty(),c,h,b;if(d.getExpandData()){g=d.getExpandedData(g)}if(d.getAllowSingle()&&g.length===1){g=g[0];h=true}b=this.getTransform();if(b){g=b(g,f);f.setJsonData(g)}if(d.getEncode()){if(a){f.setParam(a,Ext.encode(g))}else{}}else{if(h||(g&&g.length)){c=f.getJsonData()||{};if(a){c[a]=g}else{c=g}f.setJsonData(c)}}return f}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null}},0,0,0,0,0,0,[Ext.util,"Group"],0));(Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:true,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(a){var b=this;b.sortFn=Ext.util.Sorter.createComparator(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeSorter)},addSort:function(k,j,c){var h=this,d,f,b,m,a,l,g;if(!k){h.beginUpdate();h.endUpdate()}else{m=h.getOptions();if(k instanceof Array){g=k;c=j;j=null}else{if(Ext.isString(k)){if(!(l=h.get(k))){g=[{property:k,direction:j||m.getDefaultSortDirection()}]}else{g=[l]}}else{if(Ext.isFunction(k)){g=[{sorterFn:k,direction:j||m.getDefaultSortDirection()}]}else{g=[k];c=j;j=null}}}c=h._sortModes[c||"replace"];a=h.getAt(0);d=h.length;f=c.append?d:0;h.beginUpdate();h.splice(f,c.replace?d:0,g);if(c.multi){d=h.length;b=m.getMultiSortLimit();if(d>b){h.removeAt(b,d)}}if(l&&j){l.setDirection(j)}else{if(f===0&&a&&a===h.getAt(0)){a.toggle()}}h.endUpdate()}},getSortFn:function(){return this.sortFn},getByProperty:function(f){var b=this.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getProperty()===f){return d}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(j,a){var g=this,k=g.getOptions(),h=k.getRootProperty(),b=g.getSorterOptionsFn(),c,f,d;if(j.isSorter){if(!j.getRoot()){j.setRoot(h)}}else{f={direction:k.getDefaultSortDirection(),root:h};d=typeof j;if(d==="string"){c=g.get(j);if(c){return c}f.property=j}else{if(d==="function"){f.sorterFn=j}else{f=Ext.apply(f,j);if(f.fn){f.sorterFn=f.fn;delete f.fn}}}j=Ext.create(a||"Ext.util.Sorter",f)}if(b){b.call(g.getSorterOptionsScope()||g,j)}return j},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(h,d){var k=this,f=(d===undefined)?h:h[d];if(!f||!f.$cloned){if(h.length>d+1||!Ext.isIterable(f)){f=Ext.Array.slice(h,d)}var l=k.items,g=f.length,c=[],b,m,a,o,j;for(b=0;b<g;b++){o=f[b];if(o&&o.isFilter){c.push(o)}else{j=typeof o;if(j==="string"){o=k.get(o);if(o){c.push(o)}}else{if(j==="function"){for(a=l.length;a-->0;){m=l[a];if(m.getSorterFn()===o){c.push(m)}}}}}}f=c;f.$cloned=true}return f},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0));(Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(a){var b=this;b.filterFn=Ext.util.Filter.createFilterFn(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},decodeFilter:function(c){var b=this.getOptions(),a=b.getRootProperty(),d;if(c.isFilter){if(!c.getRoot()){c.setRoot(a)}}else{d={root:a};if(Ext.isFunction(c)){d.filterFn=c}else{d=Ext.apply(d,c);if(d.fn){d.filterFn=d.fn;delete d.fn}if(Ext.util.Filter.isInvalid(d)){return false}}c=new Ext.util.Filter(d)}return c},decodeRemoveItems:function(p,k){var r=this,l=(k===undefined)?p:p[k];if(!l.$cloned){if(p.length>k+1||!Ext.isIterable(l)){l=Ext.Array.slice(p,k)}var f=r.items,o=l.length,h=[],b,g,c,m,a,s,j,d,q;for(g=0;g<o;g++){b=l[g];if(b&&b.isFilter){h.push(b)}else{q=typeof b;c=q==="function";m=b.property!==undefined&&b.value!==undefined;a=q==="string";for(d=f.length;d-->0;){s=f[d];j=false;if(a){j=s.getProperty()===b}else{if(c){j=s.getFilterFn()===b}else{if(m){j=s.getProperty()===b.property&&s.getValue()===b.value}}}if(j){h.push(s)}}}}l=h;l.$cloned=true}return l},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0));(Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:true,config:{itemRoot:null},observerPriority:-100,onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(d,a){var c=this,b=a.item,f=d.getKey(b);c.onCollectionAdd=c.onCollectionRemove=c.onCollectionUpdateKey=null;c.syncItemGrouping(d,b,f,a.oldKey)},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionAdd;delete this.onCollectionRemove;delete this.onCollectionUpdateKey},onCollectionRefresh:function(a){this.removeAll();this.addItemsToGroups(a,a.items)},onCollectionRemove:function(a,b){var h=this,g=h.groupItems(a,b.items,false),j,k,f,c,d;for(f=0,c=g.length;f<c;++f){k=(j=g[f]).group;if(k){k.remove(j.items);if(!k.length){(d||(d=[])).push(k)}}}if(d){h.remove(d)}},onCollectionSort:function(f){var d=this,h=f.getSorters(),a=d.items,c=d.length,b,g;for(b=0;b<c;++b){g=a[b];if(g.getSorters()!==h){g.setSorters(h)}}},onCollectionUpdateKey:function(b,a){this.syncItemGrouping(b,a.item,a.newKey,a.oldKey)},addItemsToGroups:function(g,b){var f=this,a=f.groupItems(g,b,true),d,c,h;for(c=0,h=a.length;c<h;++c){d=a[c];d.group.add(d.items)}},groupItems:function(b,l,d){var m=this,a={},k=[],c=b.getGrouper(),p=m.itemGroupKeys,o,q,s,j,r,f,g,h;for(j=0,g=l.length;j<g;++j){s=c.getGroupString(r=l[j]);f=b.getKey(r);if(d){(p||(m.itemGroupKeys=p={}))[f]=s}else{if(p){delete p[f]}}if(!(o=a[s])){if(!(q=m.getByKey(s))&&d){(h||(h=[])).push(q=m.createGroup(b,s))}k.push(a[s]=o={group:q,items:[]})}o.items.push(r)}if(h){m.add(h)}return k},syncItemGrouping:function(a,n,d,h){var l=this,j=l.itemGroupKeys||(l.itemGroupKeys={}),b=a.getGrouper(),o=b.getGroupString(n),f=0,k,m,c,g;if(h){g=j[h];delete j[h]}else{g=j[d]}j[d]=o;if(!(m=l.get(o))){m=l.createGroup(a,o);k=[m]}if(m.get(d)!==n){m.add(n)}else{m.itemChanged(n)}if(o!==g&&(g===0||g)){c=l.get(g);if(c){c.remove(n);if(!c.length){f=[c]}}}if(k){l.splice(0,f,k)}else{if(f){l.splice(0,f)}}},createGroup:function(b,a){var c=new Ext.util.Group({groupKey:a,rootProperty:this.getItemRoot(),sorters:b.getSorters()});return c},getKey:function(a){return a.getGroupKey()},getGroupByRecord:function(b){var c=this.items,a=c.length,f,d;for(d=0;d<a;d++){f=c[d];if(f.indexOf(b)){return f}}return null}},0,0,0,0,0,0,[Ext.util,"GroupCollection"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:true,clearOnPageLoad:true,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:true},loadCount:0,complete:false,constructor:function(a){var b=this,c;if(a){if(a.buffered){return new Ext.data.BufferedStore(a)}}Ext.data.ProxyStore.prototype.constructor.apply(this,arguments);b.getData().addObserver(this);c=b.inlineData;if(c){delete b.inlineData;b.loadInlineData(c)}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(c,a){var b=this;b.getFields();b.getModel();if(!a){a=b.constructDataCollection()}if(c){if(b.isInitializing){b.inlineData=c}else{b.loadData(c)}}return a},loadInlineData:function(d){var c=this,b=c.getProxy(),a;if(b&&b.isMemoryProxy){b.setData(d);a=c.unblockLoad(true);c.suspendEvents();c.read();c.resumeEvents();c.blockLoad(a)}else{c.removeAll(true);c.suspendEvents();c.loadData(d);c.resumeEvents()}},updateRemoteFilter:function(c){var b=this.getData(),a=this.getFilters();if(c){b.setFilters(null)}else{b.setFilters(a)}Ext.data.ProxyStore.prototype.updateRemoteFilter.apply(this,arguments)},updateRemoteSort:function(b){var a=this.getData(),c=this.getSorters();if(b){a.setSorters(null)}else{a.setSorters(c)}Ext.data.ProxyStore.prototype.updateRemoteSort.apply(this,arguments)},insert:function(c,b){var f=this,a,d;if(b){if(!Ext.isIterable(b)){b=[b]}else{b=Ext.Array.clone(b)}a=b.length}if(!a){return[]}for(d=0;d<a;++d){b[d]=f.createModel(b[d])}f.getData().insert(c,b);return b},onCollectionAdd:function(g,a){var l=this,b=a.items,j=b.length,n=!a.next,h=l.getRemovedRecords(),f=l.ignoreCollectionAdd,k=l.getSession(),c,m,d;for(c=0;c<j;++c){d=b[c];if(k){k.adopt(d)}if(!f){d.join(l);if(h&&h.length){Ext.Array.remove(h,d)}m=m||d.phantom||d.dirty}}if(f){return}l.fireEvent("add",l,b,a.at);if(n){l.fireEvent("datachanged",l)}l.needsSync=l.needsSync||m},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(g,f){var d=this,a=f.item,c=f.modified||null,b=f.meta;d.onUpdate(a,b,c,f);d.fireEvent("update",d,a,b,c,f)},afterCommit:function(a,b){this.getData().itemChanged(a,b||null,undefined,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.getData().itemChanged(a,b||null,undefined,Ext.data.Model.EDIT)},afterReject:function(a){this.getData().itemChanged(a,null,undefined,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},onCollectionFilterAdd:function(g,c){var a=c.length,f=this.getSession(),d,b;for(d=0;d<a;++d){b=c[d];b.join(this);if(f){f.adopt(b)}}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},addSorted:function(a){var c=this,f=c.getRemoteSort(),d=c.getData(),b;if(f){d.setSorters(c.getSorters())}b=d.findInsertionIndex(a);if(f){d.setSorters(null)}return c.insert(b,a)},createModel:function(a){var b=this.getSession();if(!a.isModel){var c=this.getModel();a=new c(a)}return a},remove:function(b,k,h){var j=this,c=j.getData(),g,d,a,f;if(b){if(b.isModel){if(j.indexOf(b)>-1){a=[b];g=1}else{g=0}}else{a=[];for(d=0,g=b.length;d<g;++d){f=b[d];if(f&&f.isEntity){if(!c.contains(f)){continue}}else{if(!(f=c.getAt(f))){continue}}a.push(f)}g=a.length}}if(!g){return[]}j.removeIsMove=k===true;j.removeIsSilent=h;c.remove(a);j.removeIsSilent=false;return a},onCollectionRemove:function(g,a){var m=this,h=m.removed,b=a.items,j=a.at,k=b.length,p=m.removeIsMove,l=m.removeIsSilent,o=!a.next,c,d,n,f;if(m.ignoreCollectionRemove){return}for(c=0;c<k;++c){d=b[c];d.unjoin(m);f=!d.phantom;if(h&&!p&&f){d.removedFrom=j+c;h.push(d)}n=n||f}if(!l){m.fireEvent("remove",m,b,j,p);if(o){m.fireEvent("datachanged",m)}}m.needsSync=m.needsSync||(n&&!p)},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},removeAt:function(a,b){var c=this.getData();a=Math.max(a,0);if(a<c.length){if(arguments.length===1){b=1}else{if(!b){return}}c.removeAt(a,b)}},removeAll:function(b){var c=this,d=c.getData(),f=c.hasListeners.clear,a=d.getRange();if(d.length){c.removeIsSilent=true;c.callObservers("BeforeRemoveAll");d.removeAll();if(!b){c.fireEvent("clear",c,a);c.fireEvent("datachanged",c)}c.callObservers("AfterRemoveAll",[!!b])}return a},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else{this.add(a)}},splice:function(a,c,b){return this.getData().splice(a,c,b)},load:function(b){var c=this,a=c.getPageSize(),d;if(typeof b==="function"){b={callback:b}}else{b=Ext.apply({},b)}if(c.getRemoteSort()&&!b.grouper&&c.getGrouper()){b.grouper=c.getGrouper()}if(a||"start" in b||"limit" in b||"page" in b){b.page=b.page||c.currentPage;b.start=(b.start!==undefined)?b.start:(b.page-1)*a;b.limit=b.limit||a}b.addRecords=b.addRecords||false;if(!b.recordCreator){d=c.getSession();if(d){b.recordCreator=d.recordCreator}}return Ext.data.ProxyStore.prototype.load.call(this,b)},onProxyLoad:function(b){var f=this,d=b.getResultSet(),a=b.getRecords(),h=b.wasSuccessful(),g,c;if(f.isDestroyed){return}if(d){f.totalCount=d.getTotal()}f.loading=false;if(h){g=f.getSession();c=f.getAssociatedEntity();if(g&&c&&!c.phantom){a=f.getRole().validateAssociationRecords(g,c,a)}f.loadRecords(a,b.getAddRecords()?{addRecords:true}:undefined)}if(f.hasListeners.load){f.fireEvent("load",f,a,h,b)}},getUnfiltered:function(){var a=this.getData();return a.getSource()||a},getNewRecords:function(){return this.getUnfiltered().createFiltered(this.filterNew).getRange()},getUpdatedRecords:function(){return this.getUnfiltered().createFiltered(this.filterUpdated).getRange()},loadData:function(f,a){var d=f.length,c=[],b;for(b=0;b<d;b++){c.push(this.createModel(f[b]))}this.loadRecords(c,a?this.addRecordsOptions:undefined)},loadRawData:function(f,b){var d=this,g=d.getSession(),a=d.getProxy().getReader().read(f,g?{recordCreator:g.recordCreator}:undefined),c=a.getRecords(),h=a.getSuccess();if(h){d.totalCount=a.getTotal();d.loadRecords(c,b?d.addRecordsOptions:undefined)}return h},loadRecords:function(c,k){var h=this,b=c.length,f=h.getData(),a,j,g,d;if(k){a=k.addRecords}g=h.getRemoteSort()||!h.getSortOnLoad();if(g){j=f.getAutoSort();f.setAutoSort(false)}if(!a){h.clearData(true)}h.ignoreCollectionAdd=true;h.callObservers("BeforeLoad");f.add(c);h.ignoreCollectionAdd=false;for(d=0;d<b;d++){c[d].join(h)}if(g){f.setAutoSort(j)}++h.loadCount;h.complete=true;h.fireEvent("datachanged",h);h.fireEvent("refresh",h);h.callObservers("AfterLoad")},loadPage:function(d,a){var c=this,b=c.getPageSize();c.currentPage=d;a=Ext.apply({page:d,start:(d-1)*b,limit:b,addRecords:!c.getClearOnPageLoad()},a);c.read(a)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(h,f){var d=this,g=d.removed,b,c,a;f=f||d.getData();if(f){b=f.items;for(c=0,a=b.length;c<a;++c){b[c].unjoin(d)}d.ignoreCollectionRemove=true;d.callObservers("BeforeClear");f.removeAll();d.ignoreCollectionRemove=false;d.callObservers("AfterClear")}if(g&&(h!==true||d.getClearRemovedOnLoad())){g.length=0}},onIdChanged:function(c,b,a){this.getData().updateKey(c,b);this.fireEvent("idchanged",this,c,b,a)},commitChanges:function(){var c=this,d=c.getModifiedRecords(),a=d.length,f=c.removed,b=0;for(;b<a;b++){d[b].commit()}if(f){f.length=0}},filterNewOnly:function(a){return a.phantom===true},filterRejects:function(a){return a.phantom||a.dirty},getRejectRecords:function(){return this.getData().createFiltered(this.filterRejects).getRange()},rejectChanges:function(){var c=this,d=c.getRejectRecords(),a=d.length,b=0,f;for(;b<a;b++){f=d[b];f.reject();if(f.phantom){c.remove(f)}}d=c.removed;if(d){a=d.length;for(b=a-1;b>=0;b--){f=d[b];c.insert(f.removedFrom||0,f);f.reject()}d.length=0}},onDestroy:function(){var b=this,a=b.loadTask,d=b.getData(),c=d.getSource();Ext.data.ProxyStore.prototype.onDestroy.call(this);b.setSession(null);b.observers=null;if(a){a.cancel();b.loadTask=null}b.clearData(false,c||d);d.destroy();if(c){c.destroy()}b.setData(null)}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(d){var b=d.mapping,c=d.hasMapping()?b:d.ordinal,a;d.mapping=c;a=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);d.mapping=b;return a},getModelData:function(a){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(f,a){if(this.expandData){var d=[],b=0,c=f.length;for(;b<c;b++){d[d.length]=[f[b]]}f=d}Ext.data.Store.prototype.loadData.call(this,f,a)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(c){if(Ext.isArray(c)){var b=["field1"],f=!Ext.isArray(c[0]),g=c,d,a;if(f){g=[];for(d=0,a=c.length;d<a;++d){g.push([c[d]])}}else{for(d=2,a=c[0].length;d<=a;++d){b.push("field"+d)}}return new Ext.data.ArrayStore({data:g,fields:b,autoDestroy:true,autoCreated:true,expanded:f})}if(Ext.isString(c)){return this.get(c)}else{return Ext.Factory.store(c)}},getKey:function(a){return a.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(d,c){var b;if(Ext.isObject(d)){c=d}else{if(Ext.data.StoreManager.containsKey(d)){return Ext.data.StoreManager.lookup(d)}c.storeId=d}if(c instanceof Ext.data.Store){b=c}else{b=new Ext.data.Store(c)}Ext.data.StoreManager.register(b);return b};Ext.getStore=function(b){return Ext.data.StoreManager.lookup(b)};var a=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:false});a.isEmptyStore=true}));(Ext.cmd.derive("Ext.selection.Model",Ext.util.Observable,{alternateClassName:"Ext.AbstractSelectionModel",allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.modes={SINGLE:true,SIMPLE:true,MULTI:true};b.setSelectionMode(a.mode||b.mode);b.selected=new Ext.util.MixedCollection();Ext.util.Observable.prototype.constructor.apply(this,arguments)},bindStore:function(a,b){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);if(c.store&&!b){c.refresh()}},getStoreListeners:function(){var a=this;return{add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(b){var f=this,d=f.store.getRange(),c=0,a=d.length,g=f.getSelection().length;f.suspendChanges();for(;c<a;c++){f.doSelect(d[c],true,b)}f.resumeChanges();if(!b){f.maybeFireSelectionChange(f.getSelection().length!==g)}},deselectAll:function(k){var g=this,b=g.getSelection(),h={},j=g.store,a=b.length,f,c,d;for(f=0,c=b.length;f<c;f++){d=b[f];h[d.id]=j.indexOf(d)}b=Ext.Array.sort(b,function(n,l){var o=h[n.id],m=h[l.id];return o<m?-1:1});g.suspendChanges();g.doDeselect(b,k);g.resumeChanges();if(!k){g.maybeFireSelectionChange(g.getSelection().length!==a)}},getSelectionStart:function(){var c=this,b=c.view,a;if(!c.selectionStart&&b&&b.rendered){a=b.getNavigationModel();if(a){c.setSelectionStart(a.getRecord())}}return c.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(j,l){var m=this,d=m.isSelected(j),f=l.shiftKey,a=l.ctrlKey,c=f?(m.getSelectionStart()):null,g=m.getSelection(),k=g.length,n=m.allowDeselect,b,h,o;switch(m.selectionMode){case"MULTI":if(f&&c){m.selectRange(c,j,a)}else{if(a&&d){m.doDeselect(j,false)}else{if(a){m.doSelect(j,true,false)}else{if(d&&!f&&!a&&k>1){b=[];for(h=0;h<k;++h){o=g[h];if(o!==j){b.push(o)}}m.doDeselect(b)}else{if(!d){m.doSelect(j,false)}}}}}break;case"SIMPLE":if(d){m.doDeselect(j)}else{m.doSelect(j,true)}break;case"SINGLE":if(n&&!a){n=m.toggleOnClick}if(n&&d){m.doDeselect(j)}else{m.doSelect(j,false)}break}if(!f){if(m.isSelected(j)){m.selectionStart=j}else{m.selectionStart=null}}},vetoSelection:function(a){if(a.type!=="keydown"&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return true}}else{return a.type==="mousedown"}},onNavigate:function(g){var j=this,h=g.keyEvent,b=h.ctrlKey,d=g.recordIndex,f=g.record,n=g.previousRecord,c=j.isSelected(f),l=(j.selectionStart&&j.isSelected(g.previousRecord))?j.selectionStart:(j.selectionStart=g.previousRecord),a=g.previousRecordIndex,m=h.getCharCode(),o=m===h.SPACE,k=m===h.UP||m===h.PAGE_UP?"up":(m===h.DOWN||m===h.DOWN?"down":null);if(!f||j.vetoSelection(h)){return}switch(j.selectionMode){case"MULTI":if(m===h.A&&b){j.selectRange(0,j.store.getCount()-1)}else{if(o){if(h.shiftKey){j.selectRange(l,f,b)}else{if(c){j.doDeselect(f,b)}else{j.doSelect(f,b)}}}else{if(h.shiftKey&&l){if(k==="up"&&a<=d){j.deselectRange(n,d+1)}else{if(k==="down"&&a>=d){j.deselectRange(n,d-1)}else{if(l!==f){j.selectRange(l,f,b)}}}j.lastSelected=f}else{if(m){if(!b){j.doSelect(f,false)}}else{j.selectWithEvent(f,h)}}}}break;case"SIMPLE":if(c){j.doDeselect(f)}else{j.doSelect(f,true)}break;case"SINGLE":if(o){if(c){if(j.allowDeselect){j.doDeselect(f)}}else{j.doSelect(f)}}else{if(b){break}else{if(o&&j.allowDeselect&&c){j.doDeselect(f)}else{j.doSelect(f,false)}}}break}if(!h.shiftKey){if(j.isSelected(f)){j.selectionStart=f}}},selectRange:function(m,d,n){var j=this,l=j.store,c=j.selected.items,o,g,h,f,a,k,b;if(j.isLocked()){return}o=j.normalizeRowRange(m,d);m=o[0];d=o[1];f=[];for(g=m;g<=d;g++){if(!j.isSelected(l.getAt(g))){f.push(l.getAt(g))}}if(!n){a=[];j.suspendChanges();for(g=0,h=c.length;g<h;++g){b=c[g];k=l.indexOf(b);if(k<m||k>d){a.push(b)}}for(g=0,h=a.length;g<h;++g){j.doDeselect(a[g])}j.resumeChanges()}if(f.length){j.doMultiSelect(f,true)}else{j.maybeFireSelectionChange(a.length>0)}},deselectRange:function(f,d){var j=this,c=j.store,a,h,g,b;if(j.isLocked()){return}a=j.normalizeRowRange(f,d);f=a[0];d=a[1];g=[];for(h=f;h<=d;h++){b=c.getAt(h);if(j.isSelected(b)){g.push(b)}}if(g.length){j.doDeselect(g)}},normalizeRowRange:function(c,b){var a=this.store,d;if(!Ext.isNumber(c)){c=a.indexOf(c)}c=Math.max(0,c);if(!Ext.isNumber(b)){b=a.indexOf(b)}b=Math.min(b,a.getCount()-1);if(c>b){d=b;b=c;c=d}return[c,b]},select:function(b,c,a){if(Ext.isDefined(b)&&!(Ext.isArray(b)&&!b.length)){this.doSelect(b,c,a)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(c,f,b){var d=this,a;if(d.locked||!d.store){return}if(typeof c==="number"){a=d.store.getAt(c);if(!a){return}c=[a]}if(d.selectionMode==="SINGLE"&&c){a=c.length?c[0]:c;d.doSingleSelect(a,b)}else{d.doMultiSelect(c,f,b)}},doMultiSelect:function(a,n,l){var h=this,b=h.selected,k=false,o,d,g,f,c,j=h.view,m;if(h.locked){return}a=!Ext.isArray(a)?[a]:a;g=a.length;if(!n&&b.getCount()>0){o=h.deselectDuringSelect(a,b.getRange(),l);if(o[0]){h.maybeFireSelectionChange(o[1]>0&&!l);return}else{k=o[1]>0}}c=function(){b.add(f);k=true};for(d=0;d<g;d++){f=a[d];if(h.isSelected(f)){continue}h.onSelectChange(f,true,l,c)}h.lastSelected=f;if(j&&j.rendered&&!l&&!h.preventFocus){m=j.getNavigationModel();if(m){m.setPosition(f,null,null,l,true)}}h.maybeFireSelectionChange(k&&!l)},deselectDuringSelect:function(d,a,j){var h=this,g=a.length,c=0,f=false,k,b;h.suspendChanges();for(b=0;b<g;++b){k=a[b];if(!Ext.Array.contains(d,k)){if(h.doDeselect(k,j)){++c}else{f=true}}}h.resumeChanges();return[f,c]},doDeselect:function(a,k){var j=this,b=j.selected,d=0,h,f,l=0,g=0,c;if(j.locked||!j.store){return false}if(typeof a==="number"){f=j.store.getAt(a);if(!f){return false}a=[f]}else{if(!Ext.isArray(a)){a=[a]}}c=function(){++g;b.remove(f)};h=a.length;j.suspendChanges();for(;d<h;d++){f=a[d];if(j.isSelected(f)){if(j.lastSelected===f){j.lastSelected=b.last()}++l;j.onSelectChange(f,false,k,c)}}j.resumeChanges();j.maybeFireSelectionChange(g>0&&!k);return g===l},doSingleSelect:function(c,d){var g=this,b=g.view,a,j=false,f=g.selected,h;if(g.locked){return}if(g.isSelected(c)){return}h=function(){if(f.getCount()){g.suspendChanges();if(!g.doDeselect(g.lastSelected,d)){g.resumeChanges();return false}g.resumeChanges()}f.add(c);g.lastSelected=c;j=true};g.onSelectChange(c,true,d,h);if(j){if(b&&b.rendered&&!d&&!g.preventFocus){a=b.getNavigationModel();if(a){a.setPosition(c,null,null,d,true)}}g.maybeFireSelectionChange(!d)}},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.suspendChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(d,c){var g=this,b=g.store,f,a;a=g.normalizeRowRange(d,c);d=a[0];c=a[1];for(f=d;f<=c;f++){if(!g.isSelected(b.getAt(f))){return false}}return true},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.contains(a)},hasSelection:function(){return this.selected.getCount()>0},pruneIf:function(){var h=this,f=h.selected,b=h.store,d=[],a=f.length,c,g;if(h.pruneRemoved){for(c=0;c<a;c++){g=f.getAt(c);if(b.indexOfId(g.id)===-1){d.push(g)}}if(d.length){for(c=0,a=d.length;c<a;c++){g=d[c];f.remove(g);h.onPrune(g)}h.maybeFireSelectionChange(true)}}},onPrune:Ext.emptyFn,refresh:function(){var h=this,l=h.store,a,d=[],g=[],c=h.getSelection(),f=c.length,k,j,b=0;if(!l){return}for(;b<f;b++){k=c[b];if(l.indexOf(k)!==-1){d.push(k)}else{if(!h.pruneRemoved){a=l.getById(k.getId());if(a){d.push(a)}else{g.push(k)}}}if(h.mode==="SINGLE"&&g.length){break}}if(h.selected.getCount()!==(d.length+g.length)){j=true}h.clearSelections();if(d.length){h.doSelect(d,false,true)}if(g.length){h.selected.addAll(g);if(!h.lastSelected){h.lastSelected=g[g.length-1]}}h.maybeFireSelectionChange(j)},clearSelections:function(){this.selected.clear();this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(this.selected.getCount()>0){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(c,b,d,a){var f=this;if(f.selectionStart&&Ext.Array.contains(b,f.selectionStart)){f.selectionStart=null}if(a||f.locked||!f.pruneRemoved){return}f.deselect(b)},deselectDeletedRecords:function(b){var g=this,d=g.selected,c,f=b.length,h=0,a;for(c=0;c<f;c++){a=b[c];if(d.remove(a)){if(g.lastSelected===a){g.lastSelected=null}++h}}if(h){g.maybeFireSelectionChange(true)}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){this.clearListeners();this.clearSelections();this.bindStore(null)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(a,d,c,b){this.selected.updateKey(c,b)},onStoreRefresh:function(){var g=this,j=g.getStore(),c=g.selected,h=g.lastSelected,f,a,d,k,b;if(g.store.isBufferedStore){return}f=c.items;a=f.length;if(h){g.lastSelected=j.getById(h.id)}for(d=0;d<a;++d){k=f[d];b=j.getById(k.id);if(b){g.selected.replace(b)}else{g.selected.remove(k)}}},onStoreLoad:Ext.emptyFn,onSelectChange:function(a,d,c,g){var f=this,b=d?"select":"deselect";if((c||f.fireEvent("before"+b,f,a))!==false&&g()!==false){if(!c){f.fireEvent(b,f,a)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){this.views=this.views||[];this.views.push(a)},resolveListenerScope:function(c){var a=this.view,b;if(a){b=a.resolveListenerScope(c)}return b||Ext.util.Observable.prototype.resolveListenerScope.call(this,c)},onVetoUIEvent:Ext.emptyFn,bindComponent:Ext.emptyFn},1,0,0,0,0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,enableKeyNav:true,bindComponent:function(a){var b=this;b.view=a;b.navigationModel=a.getNavigationModel();a.on(b.getViewListeners());b.navigationModel.on({navigate:b.onNavigate,scope:b})},getViewListeners:function(){var b=this,a=b.view,c={refresh:b.refresh,scope:b};c[a.triggerCtEvent]=b.onContainerClick;return c},onUpdate:function(b){var a=this.view;if(a&&this.isSelected(b)){a.onItemSelect(b)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(b,f,d,h){var g=this,a=g.view,c=f?"select":"deselect";if((d||g.fireEvent("before"+c,g,b))!==false&&h()!==false){if(a){if(f){a.onItemSelect(b)}else{a.onItemDeselect(b)}}if(!d){g.fireEvent(c,g,b)}}},destroy:function(){Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){this.view=a;this.bindView(a)},bindView:function(a){var c=this,b;c.initKeyNav(a);b=c.getStoreListeners();b.destroyable=true;c.dataSourceListeners=a.dataSource.on(b);b=c.getViewListeners();b.destroyable=true;c.viewListeners=a.on(b)},getStoreListeners:function(){var a=this;return{clear:a.onStoreClear,remove:a.onStoreRemove,scope:a}},getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,refresh:a.onViewRefresh,scope:a}},initKeyNav:function(a){var b=this;b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"itemkeydown",processEvent:function(d,c,h,f,g){return g},up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(a,b){b.preventDefault()},onItemMouseDown:function(b,a,g,d,c){var f=c.parentEvent;if(!f||f.type!=="touchstart"){this.setPosition(d)}},onItemClick:function(c,b,f,d,a){if(this.record===b){this.fireNavigateEvent(a)}else{this.setPosition(d,a)}},onStoreClear:function(){this.setPosition()},onStoreRemove:function(){this.setPosition(this.getRecord())},onViewRefresh:function(){this.setPosition(this.getRecord())},setPosition:function(c,g,l,h){var j=this,k=j.view,d=k.getSelectionModel(),a=k.dataSource,f,b;if(c==null){j.record=j.recordIndex=null}else{if(typeof c==="number"){b=Math.max(Math.min(c,a.getCount()-1),0);f=a.getAt(c)}else{if(c.isEntity){f=c;b=a.indexOf(c)}else{if(c.tagName){f=k.getRecord(c);b=a.indexOf(f)}else{f=b=null}}}}if(b===j.recordIndex){return}if(j.item){j.item.removeCls(j.focusCls)}j.previousRecordIndex=j.recordIndex;j.previousRecord=j.record;j.previousItem=j.item;j.recordIndex=b;j.record=f;if(f){j.focusPosition(j.recordIndex)}else{j.item=null}if(!l){d.fireEvent("focuschange",d,j.previousRecord,j.record)}if(!h&&g&&j.record!==j.previousRecord){j.fireNavigateEvent(g)}},focusPosition:function(a){var b=this;if(a!=null&&a!==-1){if(a.isEntity){a=b.view.dataSource.indexOf(a)}b.item=b.view.all.item(a);if(b.item){b.lastFocused=b.record;b.focusItem(b.item)}else{b.record=null}}else{b.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeyTab:Ext.returnTrue,onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.view.fireEvent("itemclick",a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){Ext.destroy(this.dataSourceListeners,this.viewListeners)}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.view,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.boundView)}},defaultBindProperty:"store",statics:{updateDelay:200,queueRecordChange:function(n,p,h,b,c){var m=this,a=m.changeQueue||(m.changeQueue={}),j=h.internalId,l,g,k,d,q,o,f;l=a[j]||(a[j]={operation:b,record:h,data:{},views:[]});g=l.data;Ext.Array.include(l.views,n);if(c&&(k=c.length)){for(d=0;d<k;d++){q=c[d];o=h.data[q];if(g.hasOwnProperty(q)){if(h.isEqual(g[q],o)){delete g[q];f=true}}else{g[q]=o}}if(f&&!Ext.Object.getKeys(g).length){delete a[j]}}else{Ext.apply(g,h.data)}if(!m.flushQueueTask){m.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(m.onFlushTick,m):Ext.Function.bind(m.onFlushTick,m),interval:Ext.view.AbstractView.updateDelay,repeat:1})}m.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var f=this,g,a,j,d,h,c,b;if(Ext.isScrolling){f.flushQueueTask.start();return}j=f.changeQueue;this.changeQueue={};for(h in j){d=j[h];g=d.views;a=g.length;for(c=0;c<a;c++){b=g[c];if(!b.isDestroyed){b.handleUpdate(b.dataSource,d.record,d.operation,Ext.Object.getKeys(d.data))}}}Ext.AnimationQueue.stop(f.flushChangeQueue,f)}},config:{selection:null,navigationModel:"default"},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,addCmpEvents:Ext.emptyFn,initComponent:function(){var c=this,a=Ext.isDefined,d=c.itemTpl,b={};if(d){if(Ext.isArray(d)){d=d.join("")}else{if(Ext.isObject(d)){b=Ext.apply(b,d.initialConfig);d=d.html}}if(!c.itemSelector){c.itemSelector="."+c.itemCls}d=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',c.itemCls,d,c.itemAriaRole);c.tpl=new Ext.XTemplate(d,b)}Ext.Component.prototype.initComponent.call(this);c.tpl=c.getTpl("tpl");if(c.overItemCls){c.trackOver=true}c.addCmpEvents();c.store=Ext.data.StoreManager.lookup(c.store||"ext-empty-store");if(!c.dataSource){c.dataSource=c.store}c.bindStore(c.dataSource,true,"dataSource");if(!c.all){c.all=new Ext.CompositeElementLite()}c.scrollState={top:0,left:0};c.on({scroll:c.onViewScroll,element:"el",onFrame:!!Ext.global.requestAnimationFrame,scope:c});c.savedTabIndexAttribute="data-savedtabindex-"+c.id;this.getNavigationModel().bindComponent(this);this.getSelectionModel().bindComponent(this)},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(){var f=this,b=f.loadMask,d=f.getMaskStore(),a={target:f,msg:f.loadingText,useMsg:f.loadingUseMsg,store:d},c;Ext.Component.prototype.onRender.apply(this,arguments);if(b){c=d.getProxy();if(c&&!c.isSynchronous){if(f.loadingCls){a.msgCls=f.loadingCls}if(Ext.isObject(b)){a=Ext.apply(a,b)}f.loadMask=new Ext.LoadMask(a);f.loadMask.on({scope:f,beforeshow:f.onMaskBeforeShow,hide:f.onMaskHide})}}},beforeLayout:function(){var a=this;Ext.Component.prototype.beforeLayout.apply(this,arguments);if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refresh()}else{a.doFirstRefresh(a.dataSource)}}},getMaskStore:function(){return this.store},onMaskBeforeShow:function(){var b=this,a=b.loadingHeight;if(a&&a>b.getHeight()){b.hasLoadingHeight=true;b.oldMinHeight=b.minHeight;b.minHeight=a;b.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var b=this.loadMask,a=[];if(b&&b.isComponent){a.push(b)}return a},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},getSelectionModel:function(){var b=this,c="SINGLE",a=b.selModel;if(b.simpleSelect){c="SIMPLE"}else{if(b.multiSelect){c="MULTI"}}if(!a||!a.events){a=b.selModel=new Ext.selection.DataViewModel(Ext.apply({allowDeselect:b.allowDeselect,mode:c},a))}if(!a.hasRelaySetup){b.relayEvents(a,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);a.hasRelaySetup=true;a.on("selectionchange",b.updateBindSelection,b)}if(b.disableSelection){a.locked=true}return a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},initFocusableEvents:function(){var a=this;this.mixins.focusable.initFocusableEvents.call(this);a.focusEnterLeaveListeners=a.el.on({focusenter:a.onFocusEnter,focusleave:a.onFocusLeave,scope:a,destroyable:true})},onFocus:function(a){Ext.Component.prototype.onFocus.call(this,a);this.handleFocusEnter(a)},onFocusEnter:function(a){this.handleFocusEnter(a)},handleFocusEnter:function(d){var c=this,b=c.getNavigationModel(),a;if(!c.containsFocus){a=b.getLastFocused();b.setPosition(a||0,d,null,!a);c.containsFocus=b.getPosition()!=null}if(c.containsFocus){this.focusEl.dom.setAttribute("tabindex","-1")}},onFocusLeave:function(b){var a=this;if(a.containsFocus){a.getNavigationModel().setPosition(null,b,null,true);a.containsFocus=false;a.focusEl.dom.setAttribute("tabindex",0)}},onRemoved:function(a){Ext.Component.prototype.onRemoved.call(this,a);this.onFocusLeave()},refresh:function(){var j=this,m=j.all,a=m.getCount(),f=j.refreshCounter,k,g,d,c,h,l=f&&m.getCount()&&j.preserveScrollOnRefresh&&!j.bufferedRenderer,b;if(!j.rendered||j.isDestroyed||j.preventRefresh){return}if(!j.hasListeners.beforerefresh||j.fireEvent("beforerefresh",j)!==false){j.refreshing=true;k=j.getTargetEl();c=j.getViewRange();d=k.dom;if(l){g=j.getOverflowEl();b=g.getScroll()}if(f){h=true;j.clearViewEl();j.refreshCounter++}else{j.refreshCounter=1}j.tpl.append(k,j.collectData(c,m.startIndex||0));if(c.length<1){if(j.emptyText&&!j.getStore().isLoading()&&(!j.deferEmptyText||h)){j.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",k.dom,j.emptyText)}m.clear()}else{j.collectNodes(k.dom);j.updateIndexes(0)}Ext.deferCallback(k.saveChildrenTabbableState,k,[j.savedTabIndexAttribute]);if(h){if(j.refreshSelmodelOnRefresh!==false){j.selModel.refresh()}else{if(!j.preventPrune){j.selModel.pruneIf()}}}j.refreshNeeded=false;j.refreshSize(m.getCount()!==a);j.fireEvent("refresh",j,c);if(l){g.setScrollLeft(b.left);g.setScrollTop(b.top)}if(!j.viewReady){j.viewReady=true;j.fireEvent("viewready",j)}j.refreshing=false;j.refreshScroll()}},collectNodes:function(b){var a=this.all;a.fill(Ext.fly(b).query(this.getItemSelector()),a.startIndex||0);if(this.focusable){a.set({tabindex:"-1"})}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(d){var b=this,a=b.getSizeModel(),c=b.scrollManager;if(a.height.shrinkWrap||a.width.shrinkWrap||d){b.updateLayout()}else{if(b.touchScroll&&!b.bufferedRenderer){if(c){c.refresh()}else{b.on({boxready:b.refreshScroll,scope:b,single:true})}}}},onResize:function(){var a=this,b=a.scrollManager;if(b&&!a._hasScrollListener){b.on({scroll:a.onViewScroll,scope:a,onFrame:!!Ext.global.requestAnimationFrame});a._hasScrollListener=true}Ext.Component.prototype.onResize.apply(this,arguments)},clearViewEl:function(){var b=this,c=b.getTargetEl(),a=b.getNodeContainer()===c;b.clearEmptyEl();b.all.clear(!a);if(a){c.dom.innerHTML=""}},clearEmptyEl:function(){var a=this.emptyEl;if(a){a.parentNode.removeChild(a)}this.emptyEl=null},onViewScroll:function(){this.fireEvent("scroll",this)},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(f,d,c){var b,a,g;if(c){b=c.getAssociatedData();for(a in b){if(b.hasOwnProperty(a)){if(!g){f=Ext.Object.chain(f);g=true}f[a]=b[a]}}}return f},collectData:function(c,g){var f=[],d=0,a=c.length,b;for(;d<a;d++){b=c[d];f[d]=this.prepareData(b.data,g+d,b)}return f},bufferRender:function(a,b){var c=this,d=c.renderBuffer||(c.self.prototype.renderBuffer=document.createElement("div"));c.tpl.overwrite(d,c.collectData(a,b));return Ext.fly(d).query(c.getItemSelector())},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,true):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(d,b,c,h,f){var g=this,a=f&&f.filtered;if(!a&&g.getNode(b)){if(g.throttledUpdate){g.statics().queueRecordChange(g,d,b,c,h)}else{g.handleUpdate.apply(g,arguments)}}},handleUpdate:function(b,a){var f=this,c,d;if(f.viewReady){c=f.dataSource.indexOf(a);if(c>-1){if(f.getNode(a)){d=f.bufferRender([a],c)[0];f.all.replaceElement(c,d,true);f.updateIndexes(c,c);f.selModel.onUpdate(a);f.refreshSizePending=true;if(f.selModel.isSelected(a)){f.onItemSelect(a)}if(f.hasListeners.itemupdate){f.fireEvent("itemupdate",a,c,d)}return d}}}},onReplace:function(k,l,b,c){var h=this,g,n=h.all,a,m,f,d;if(h.rendered){a=h.bufferRender(c,l,true);m=n.item(l);if(m){n.item(l).insertSibling(a,"before",true)}else{h.appendNodes(a)}n.insert(l,a);l+=c.length;g=l+b.length-1;n.removeRange(l,g,true);if(h.refreshSelmodelOnRefresh!==false){h.selModel.refresh()}h.updateIndexes(l);h.refreshSizePending=true;if(h.hasListeners.itemremove){for(f=b.length,d=g;f>=0;--f,--d){h.fireEvent("itemremove",b[f],d,h)}}if(h.hasListeners.itemadd){h.fireEvent("itemadd",c,l,a)}}},onAdd:function(c,b,d){var f=this,a;if(f.rendered){if(f.all.getCount()===0){f.refresh();a=f.all.slice()}else{a=f.doAdd(b,d);if(f.refreshSelmodelOnRefresh!==false){f.selModel.refresh()}f.updateIndexes(d);f.refreshSizePending=true}if(f.hasListeners.itemadd){f.fireEvent("itemadd",b,d,a)}}},appendNodes:function(b){var c=document.createDocumentFragment(),a=b.length,d;for(d=0;d<a;++d){c.appendChild(b[d])}this.getNodeContainer().appendChild(c)},doAdd:function(c,d){var j=this,b=j.bufferRender(c,d,true),g=j.all,h=g.getCount(),f=g.startIndex||0,a=g.endIndex||h-1;if(h===0||d>a){j.appendNodes(b)}else{if(d<=f){g.item(f).insertSibling(b,"before",true)}else{g.item(d).insertSibling(b,"before",true)}}g.insert(d,b);return b},onRemove:function(b,f,j){var k=this,m=k.all,c=k.hasListeners.itemremove,l,g,h,a,d;if(m.getCount()){if(k.dataSource.getCount()===0){if(c){k.fireEvent("itemremove",f,j,k.getNodes(j,j+f.length-1))}k.preventPrune=true;k.refresh();k.preventPrune=false}else{if(c){a=[]}for(g=f.length-1;g>=0;--g){h=f[g];l=j+g;if(a){d=m.item(l);a[g]=d?d.dom:undefined}if(m.item(l)){k.doRemove(h,l)}}if(c){k.fireEvent("itemremove",f,j,a,k)}k.updateIndexes(j)}k.refreshSizePending=true}},doRemove:function(a,b){this.all.removeElement(b,true)},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(f,d){var b=this.all.elements,a=this.getViewRange(),c;f=f||0;d=d||((d===0)?0:(b.length-1));for(c=f;c<=d;c++){b[c].viewIndex=c;b[c].viewRecordId=a[c].internalId;if(!b[c].boundView){b[c].boundView=this.id}}},bindStore:function(a,b,d){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);if(c.componentLayoutCounter&&!c.preventRefresh){c.doFirstRefresh(a,!b)}},doFirstRefresh:function(a,c){var b=this;if(b.deferInitialRefresh&&!c){Ext.defer(b.doFirstRefresh,1,b,[a,true])}else{if(a&&!a.loading){b.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null)},onBindStore:function(a,b,d){var c=this;c.getSelectionModel().bindStore(a);c.setMaskBind(a);if(!b&&d==="store"){c.preventRefresh=true;c.store=a;c.bindStore(a,false,"dataSource");c.preventRefresh=false}},setMaskBind:function(b){var a=this.loadMask;if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.refresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:Ext.emptyFn,onEndUpdate:function(){if(this.refreshSizePending){this.refreshSize(true);this.refreshSizePending=false}},onDataRefresh:function(){this.refreshView()},refreshView:function(){var b=this,a=b.blockRefresh||!b.rendered||b.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(a){b.refreshNeeded=true}else{if(b.bufferedRenderer&&b.all.getCount()){b.bufferedRenderer.refreshView()}else{b.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var b=[],a=this.selModel.getSelection(),d=a.length,c=0;for(;c<d;c++){b.push(this.getNode(a[c]))}return b},getRecords:function(c){var b=[],d=0,a=c.length,f=this.dataSource.data;for(;d<a;d++){b[b.length]=f.getByKey(c[d].viewRecordId)}return b},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).viewRecordId)},isSelected:function(b){var a=this.getRecord(b);return this.selModel.isSelected(a)},select:function(b,c,a){this.selModel.select(b,c,a)},deselect:function(b,a){this.selModel.deselect(b,a)},getNode:function(a){if((!a&&a!==0)||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return document.getElementById(a)}if(Ext.isNumber(a)){return this.all.elements[a]}if(a.isModel){return this.getNodeByRecord(a)}return Ext.fly(a).findParent(this.itemSelector,this.getTargetEl())},getNodeByRecord:function(a){var c=this.all.elements,d=c.length,b=0;for(;b<d;b++){if(c[b].viewRecordId===a.internalId){return c[b]}}return null},getNodes:function(c,a){var b=this.all;if(a!==undefined){a++}return b.slice(c,a)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(Ext.isNumber(a.viewIndex)){return a.viewIndex}return this.all.indexOf(a)},onDestroy:function(){var a=this;a.all.clear();a.emptyEl=null;Ext.Component.prototype.onDestroy.call(this);a.bindStore(null);Ext.destroy(a.navigationModel,a.selModel,a.scrollManager)},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).addCls(a)}},removeItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).removeCls(a)}},privates:{getFocusEl:function(){return this.el},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},0,0,["component","box"],{component:true,box:true},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(a,b,d){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var c=this.getSelectionModel();return c.select.apply(c,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var a=this;Ext.view.AbstractView.prototype.afterRender.call(this);a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(d){var c=this,a=c.getTargetSelector(),b=d.getTarget(a);if(!c.isDestroyed){if(b){if(c.mouseOverItem!==b&&c.el.contains(b)){c.mouseOverItem=d.item=b;d.newType="mouseenter";c.handleEvent(d)}}else{c.handleEvent(d)}}},handleMouseOut:function(f){var b=this.getTargetSelector(),c=f.getTarget(b),d=f.getRelatedTarget(b),a;if((c===d)&&!(c===null&&d===null)){return}if(!this.isDestroyed){if(c&&(a=this.self.getBoundView(c))){f.item=c;f.newType="mouseleave";a.handleEvent(f);a.mouseOverItem=null}else{this.handleEvent(f)}}},handleEvent:function(f){var d=this,b=Ext.String.startsWith(f.type,"key"),c=b&&f.getKey(),a=d.getNavigationModel();f.view=d;if(b){f.item=a.getItem();f.record=a.getRecord()}if(!f.item){f.item=f.getTarget(d.itemSelector)}if(f.item&&!f.record){f.record=d.getRecord(f.item)}if(d.processUIEvent(f)!==false){d.processSpecialEvent(f)}if(c===f.SPACE){if(!d.inputTagRe.test(f.getTarget().tagName)){f.stopEvent()}}},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(f){if(!Ext.getBody().isAncestor(f.target)){return}var j=this,k=f.item,l=j.self,a=l.EventMap,g=l.TouchEventMap,d,c=f.record,h=f.type,b=h;if(f.newType){b=f.newType}if(k){b=g[b]||b;d=f.recordIndex=j.indexInStore?j.indexInStore(c):j.indexOf(k);if(!c||j.processItemEvent(c,k,d,f)===false){return false}if((j["onBeforeItem"+a[b]](c,k,d,f)===false)||(j.fireEvent("beforeitem"+b,j,c,k,d,f)===false)||(j["onItem"+a[b]](c,k,d,f)===false)){return false}j.fireEvent("item"+b,j,c,k,d,f)}else{h=g[h]||h;if((j.processContainerEvent(f)===false)||(j["onBeforeContainer"+a[h]](f)===false)||(j.fireEvent("beforecontainer"+h,j,f)===false)||(j["onContainer"+a[h]](f)===false)){return false}j.fireEvent("container"+h,j,f)}return true},onItemMouseEnter:function(a,c,b,d){if(this.trackOver){this.highlightItem(c)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var b=this,a=b.highlightedItem,d=b.overItemCls;if(a!==c){if(a){Ext.fly(a).removeCls(d);if(Ext.isIE8){b.repaintBorder(a);b.repaintBorder(a.nextSibling)}if(b.hasListeners.unhighlightitem){b.fireEvent("unhighlightitem",b,a)}}b.highlightedItem=c;if(c){Ext.fly(c).addCls(b.overItemCls);if(Ext.isIE8){b.repaintBorder(c.nextSibling)}if(b.hasListeners.highlightitem){b.fireEvent("highlightitem",b,c)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(b,a){var g=this,f,c,d;if(g.viewReady){f=g.getNode(a);c=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);d=g.highlightedItem;if(d&&d===f){delete g.highlightedItem;if(c){g.highlightItem(c)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(j){var g=this,f=g.getNode(j),d=g.el,a=0,b=0,h=d.getRegion(),c;h.bottom=h.top+d.dom.clientHeight;h.right=h.left+d.dom.clientWidth;if(f){c=Ext.fly(f).getRegion();if(c.top<h.top){a=c.top-h.top}else{if(c.bottom>h.bottom){a=c.bottom-h.bottom}}if(c.left<h.left){b=c.left-h.left}else{if(c.right>h.right){b=c.right-h.right}}if(b||a){g.scrollBy(b,a,false)}Ext.fly(f).set({tabIndex:-1});f.focus()}},bindStore:function(b,c,a){var d=this[a];if(d&&d.isFeatureStore){if(b.isFeatureStore){this.bindStoreListeners(b);d.bindStore(d.store)}else{d.bindStore(b)}this.getSelectionModel().bindStore(d.store)}else{Ext.view.AbstractView.prototype.bindStore.apply(this,arguments)}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(c){var f=this,d=f.self,a=d.sizeModelsArray,b;Ext.apply(f,c);f[b=f.name]=true;f.fixed=!(f.auto=f.natural||f.shrinkWrap);a[f.ordinal=a.length]=d[b]=d.sizeModels[b]=f},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var f=this,a=f.sizeModelsArray,c,b,h,g,d;new f({name:"calculated"});new f({name:"configured",names:{width:"width",height:"height"}});new f({name:"natural"});new f({name:"shrinkWrap"});new f({name:"calculatedFromConfigured",configured:true,names:{width:"width",height:"height"}});new f({name:"calculatedFromNatural",natural:true});new f({name:"calculatedFromShrinkWrap",shrinkWrap:true});new f({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new f({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new f({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(c=0,h=a.length;c<h;++c){d=a[c];d.pairsByHeightOrdinal=g=[];for(b=0;b<h;++b){g.push({width:d,height:a[b]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(a){var b=this;b.id=Ext.id(null,b.type+"-");b.initConfig(a);delete b.type;b.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(c){var b=this,a=b.context,d;if(b.lastWidthModel!=c.widthModel){if(b.lastWidthModel){d=true}b.lastWidthModel=c.widthModel}if(b.lastHeightModel!=c.heightModel){if(b.lastWidthModel){d=true}b.lastHeightModel=c.heightModel}if(d){(a=c.context).clearTriggers(b,false);a.clearTriggers(b,true);b.triggerCount=0}},finishedLayout:function(a){this.lastWidthModel=a.widthModel;this.lastHeightModel=a.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(a){return false},isItemLayoutRoot:function(d){var c=d.getSizeModel(),b=c.width,a=c.height;if(!d.componentLayout.lastComponentSize&&(b.calculated||a.calculated)){return false}return !b.shrinkWrap&&!a.shrinkWrap},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(d,b){var h=d.length,f,g,c,a;if(h){a=[];for(f=0;f<h;++f){g=d[f];if(!g.rendered){if(b&&(b[g.id]!==undefined)){c=b[g.id]}else{this.configureItem(g);c=g.getRenderTree();if(b){b[g.id]=c}}if(c){a.push(c)}}}}return a},finishRender:Ext.emptyFn,finishRenderItems:function(f,a){var d=a.length,b,c;for(b=0;b<d;b++){c=a[b];if(c.rendering){c.finishRender(b)}}},renderChildren:function(){var b=this,a=b.getLayoutItems(),c=b.getRenderTarget();b.renderItems(a,c)},renderItems:function(a,g){var f=this,d=a.length,b=0,c;if(d){Ext.suspendLayouts();for(;b<d;b++){c=a[b];if(c&&!c.rendered){f.renderItem(c,g,b)}else{if(!f.isValidParent(c,g,b)){f.moveItem(c,g,b)}else{f.configureItem(c)}}}Ext.resumeLayouts(true)}},isValidParent:function(d,f,a){var c=(f&&f.dom)||f,b=this.getItemLayoutEl(d);if(b&&c){if(typeof a=="number"){a=this.getPositionOffset(a);return b===c.childNodes[a]}return b.parentNode===c}return false},getItemLayoutEl:function(c){var d=c.el?c.el.dom:Ext.getDom(c),a=d.parentNode,b;if(a){b=a.className;if(b&&b.indexOf("x-resizable-wrap")!==-1){d=d.parentNode}}return d},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(c,d,a){var b=this;if(!c.rendered){b.configureItem(c);c.render(d,a)}},moveItem:function(b,c,a){c=c.dom||c;if(typeof a=="number"){a=c.childNodes[a]}c.insertBefore(b.el.dom,a||null);b.container=Ext.get(c);this.configureItem(b)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(f){var d=this,c=f.el,b=d.owner,a;if(f.rendered){a=[].concat(d.itemCls||[]);if(b.itemCls){a=Ext.Array.push(a,b.itemCls)}if(a.length){c.removeCls(a)}}delete f.ownerLayout},destroy:function(){var a=this,b;if(a.targetCls){b=a.getTarget();if(b){b.removeCls(a.targetCls)}}a.onDestroy()},sortWeightedItems:function(a,d){for(var b=0,c=a.length;b<c;++b){a[b].$i=b}Ext.Array.sort(a,function(g,f){var h=f.weight-g.weight;if(!h){h=g.$i-f.$i;if(g[d]){h=-h}}return h});for(b=0;b<c;++b){delete a[b].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var a=this;a.prototype.sizeModels=a.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,widthCache:{},heightCache:{},beginLayoutCycle:function(c,q){var l=this,b=l.owner,f=c.ownerCtContext,g=c.heightModel,h=c.widthModel,j=b.el.dom===document.body,d=b.lastBox||l.nullBox,o=b.el.lastBox||l.nullBox,a=!j,n,p,m,k;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(q){if(l.usesContentWidth){++c.consumersContentWidth}if(l.usesContentHeight){++c.consumersContentHeight}if(l.usesWidth){++c.consumersWidth}if(l.usesHeight){++c.consumersHeight}if(f&&!f.hasRawContent){n=b.ownerLayout;if(n){if(n.usesWidth){++c.consumersWidth}if(n.usesHeight){++c.consumersHeight}}}}if(h.configured){m=h.names.width;if(!j){a=l.setWidthInDom||(q?b[m]!==o.width:h.constrained)}c.setWidth(b[m],a)}else{if(c.isTopLevel){if(h.calculated){p=d.width;c.setWidth(p,p!=o.width)}p=d.x;c.setProp("x",p,p!=o.x)}}if(g.configured){k=g.names.height;if(!j){a=q?b[k]!==o.height:g.constrained}c.setHeight(b[k],a)}else{if(c.isTopLevel){if(g.calculated){p=d.height;c.setHeight(p,p!=o.height)}p=d.y;c.setProp("y",p,p!=o.y)}}},finishedLayout:function(b){var h=this,k=b.children,a=h.owner,f,c,j,d,g;if(k){f=k.length;for(c=0;c<f;c++){j=k[c];j.el.lastBox=j.props}}b.previousSize=h.lastComponentSize;h.lastComponentSize=a.el.lastBox=g=b.props;d=a.lastBox||(a.lastBox={});d.x=g.x;d.y=g.y;d.width=g.width;d.height=g.height;d.invalid=false;Ext.layout.Layout.prototype.finishedLayout.apply(this,arguments)},notifyOwner:function(d){var c=this,a=c.lastComponentSize,f=d.previousSize,b=[a.width,a.height];if(f){b.push(f.width,f.height)}c.owner.afterComponentLayout.apply(c.owner,b)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(b){var a=this,d=a.targetInfo,c;if(!d){c=b.getEl("getTarget",a);a.targetInfo=d={padding:c.getPaddingInfo(),border:c.getBorderInfo()}}return d},measureAutoDimensions:function(n,j){var v=this,a=v.owner,s=a.layout,d=n.heightModel,h=n.widthModel,c=n.boxParent,p=n.isBoxParent,w=n.target,b=n.props,k,x={gotWidth:false,gotHeight:false,isContainer:(k=!n.hasRawContent)},u=j||3,r,f,l=0,g=0,m,q,t,y,o;if(h.shrinkWrap&&n.consumersContentWidth){++l;r=!(u&1);if(k){if(r){x.contentWidth=0;x.gotWidth=true;++g}else{if((x.contentWidth=n.getProp("contentWidth"))!==undefined){x.gotWidth=true;++g}}}else{q=b.contentWidth;if(typeof q=="number"){x.contentWidth=q;x.gotWidth=true;++g}else{if(r){m=true}else{if(!n.hasDomProp("containerChildrenSizeDone")){m=false}else{if(p||!c||c.widthModel.shrinkWrap){m=true}else{m=c.hasDomProp("width")}}}if(m){if(r){t=0}else{if(s&&s.measureContentWidth){t=s.measureContentWidth(n)}else{if(w.cacheWidth){y=w.xtype+"-"+w.ui;o=v.widthCache;t=o[y]||(o[y]=v.measureContentWidth(n))}else{t=v.measureContentWidth(n)}}}if(!isNaN(x.contentWidth=t)){n.setContentWidth(t,true);x.gotWidth=true;++g}}}}}else{if(h.natural&&n.consumersWidth){++l;q=b.width;if(typeof q=="number"){x.width=q;x.gotWidth=true;++g}else{if(p||!c){m=true}else{m=c.hasDomProp("width")}if(m){if(!isNaN(x.width=v.measureOwnerWidth(n))){n.setWidth(x.width,false);x.gotWidth=true;++g}}}}}if(d.shrinkWrap&&n.consumersContentHeight){++l;f=!(u&2);if(k){if(f){x.contentHeight=0;x.gotHeight=true;++g}else{if((x.contentHeight=n.getProp("contentHeight"))!==undefined){x.gotHeight=true;++g}}}else{q=b.contentHeight;if(typeof q=="number"){x.contentHeight=q;x.gotHeight=true;++g}else{if(f){m=true}else{if(!n.hasDomProp("containerChildrenSizeDone")){m=false}else{if(a.noWrap){m=true}else{if(!h.shrinkWrap){m=(n.bodyContext||n).hasDomProp("width")}else{if(p||!c||c.widthModel.shrinkWrap){m=true}else{m=c.hasDomProp("width")}}}}}if(m){if(f){t=0}else{if(s&&s.measureContentHeight){t=s.measureContentHeight(n)}else{if(w.cacheHeight){y=w.xtype+"-"+w.ui;o=v.heightCache;t=o[y]||(o[y]=v.measureContentHeight(n))}else{t=v.measureContentHeight(n)}}}if(!isNaN(x.contentHeight=t)){n.setContentHeight(t,true);x.gotHeight=true;++g}}}}}else{if(d.natural&&n.consumersHeight){++l;q=b.height;if(typeof q=="number"){x.height=q;x.gotHeight=true;++g}else{if(p||!c){m=true}else{m=c.hasDomProp("width")}if(m){if(!isNaN(x.height=v.measureOwnerHeight(n))){n.setHeight(x.height,false);x.gotHeight=true;++g}}}}}if(c){n.onBoxMeasured()}x.gotAll=g==l;return x},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(d,a){var c=this,g=c.lastWidthModel,f=c.lastHeightModel,b=c.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(g&&g.fixed&&d.widthModel.shrinkWrap){b.setWidth(null)}if(f&&f.fixed&&d.heightModel.shrinkWrap){b.setHeight(null)}},calculate:function(h){var g=this,f=g.measureAutoDimensions(h),b=h.heightModel,c=h.widthModel,d,a;if(f.gotWidth){if(c.shrinkWrap){g.publishOwnerWidth(h,f.contentWidth)}else{if(g.publishInnerWidth){g.publishInnerWidth(h,f.width)}}}else{if(!c.auto&&g.publishInnerWidth){d=g.waitForOuterWidthInDom?h.getDomProp("width"):h.getProp("width");if(d===undefined){g.done=false}else{g.publishInnerWidth(h,d)}}}if(f.gotHeight){if(b.shrinkWrap){g.publishOwnerHeight(h,f.contentHeight)}else{if(g.publishInnerHeight){g.publishInnerHeight(h,f.height)}}}else{if(!b.auto&&g.publishInnerHeight){a=g.waitForOuterHeightInDom?h.getDomProp("height"):h.getProp("height");if(a===undefined){g.done=false}else{g.publishInnerHeight(h,a)}}}if(!f.gotAll){g.done=false}},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(j,g){var f=this,b=f.owner,a=f.calculateOwnerHeightFromContentHeight(j,g),h,d,c;if(isNaN(a)){f.done=false}else{h=Ext.Number.constrain(a,b.minHeight,b.maxHeight);if(h==a){d=f.setHeightInDom}else{c=f.sizeModels[(h<a)?"constrainedMax":"constrainedMin"];a=h;if(j.heightModel.calculatedFromShrinkWrap){j.heightModel=c}else{j.invalidate({heightModel:c})}}j.setHeight(a,d)}},publishOwnerWidth:function(h,b){var g=this,a=g.owner,f=g.calculateOwnerWidthFromContentWidth(h,b),j,d,c;if(isNaN(f)){g.done=false}else{j=Ext.Number.constrain(f,a.minWidth,a.maxWidth);if(j==f){d=g.setWidthInDom}else{c=g.sizeModels[(j<f)?"constrainedMax":"constrainedMin"];f=j;if(h.widthModel.calculatedFromShrinkWrap){h.widthModel=c}else{h.invalidate({widthModel:c})}}h.setWidth(f,d)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(d){var c=this,a=c.owner,b=a.pagingToolbar;c.scrollPos=a.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(a.floating){d.savedXY=a.getXY();a.setXY([0,-9999])}if(b){d.toolbarContext=d.context.getCmp(b)}d.listContext=d.getEl("listWrap")},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.heightModel.auto){a.el.setHeight("auto");a.listWrap.setHeight("auto")}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return true},finishedLayout:function(d){var c=this,f=d.savedXY,a=c.owner,b=a.listWrap,g=c.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(f){c.owner.setXY(f)}b.setScrollLeft(g.left);b.setScrollTop(g.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(c,a){var b=c.toolbarContext,d=0;if(b){d=b.getProp("height")}if(d===undefined){this.done=false}else{c.listContext.setHeight(a-c.getFrameInfo().height-d)}},calculateOwnerHeightFromContentHeight:function(c){var a=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),b=c.toolbarContext;if(b){a+=b.getProp("height")}return a}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this);this.mixins.elementCt.destroy.call(this)},beginLayout:function(a){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);a.targetContext=a.paddingContext=a.getEl("getTarget",this);this.cacheChildItems(a)},beginLayoutCycle:function(c,a){var b=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(a){if(b.usesContainerHeight){++c.consumersContainerHeight}if(b.usesContainerWidth){++c.consumersContainerWidth}}},cacheChildItems:function(g){var f=this,c,h,a,d,b;if(f.needsItemSize||f.setsItemSize){c=g.context;h=g.childItems=[];a=g.visibleItems=f.getVisibleItems();d=a.length;for(b=0;b<d;++b){h.push(c.getCmp(a[b]))}}},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(c){var b=c.props,a=c.el;if(c.widthModel.shrinkWrap&&isNaN(b.width)){c.setContentWidth(a.getWidth())}if(c.heightModel.shrinkWrap&&isNaN(b.height)){c.setContentHeight(a.getHeight())}},configureItem:function(d){var c=this,f=c.itemCls,b=c.owner.itemCls,a,g;d.ownerLayout=c;if(f){if(typeof f==="string"){g=[f]}else{g=f;a=!!g}}if(b){if(a){g=Ext.Array.clone(g)}g=Ext.Array.push(g||[],b)}if(g){d.addCls(g)}},doRenderBody:function(a,b){this.renderItems(a,b);this.renderContent(a,b)},doRenderContainer:function(b,f){var c=f.$comp.layout,a=c.getRenderTpl(),d=c.getRenderData();a.applyOut(d,b)},doRenderItems:function(b,d){var c=d.$layout,a=c.getRenderTree();if(a){Ext.DomHelper.generateMarkup(a,b)}},finishRender:function(){var b=this,c,a;Ext.layout.Layout.prototype.finishRender.call(this);b.cacheElements();c=b.getRenderTarget();a=b.getLayoutItems();b.finishRenderItems(c,a)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(b,g){var c=b.targetContext,f=c.getFrameInfo(),k=b.paddingContext.getPaddingInfo(),j=0,l=0,d,h,a,m;if(!b.widthModel.shrinkWrap){++l;a=g?c.getDomProp("width"):c.getProp("width");d=(typeof a=="number");if(d){++j;a-=f.width+k.width;if(a<0){a=0}}}if(!b.heightModel.shrinkWrap){++l;m=g?c.getDomProp("height"):c.getProp("height");h=(typeof m=="number");if(h){++j;m-=f.height+k.height;if(m<0){m=0}}}return{width:a,height:m,needed:l,got:j,gotAll:j==l,gotWidth:d,gotHeight:h}},getPositionOffset:function(a){if(!this.createsInnerCt){var b=this.owner.itemNodeOffset;if(b){a+=b}}return a},getLayoutItems:function(){var a=this.owner,b=a&&a.items;return(b&&b.items)||[]},getRenderData:function(){var a=this.owner;return{$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var f=this,h=f.getRenderTarget(),a=f.getLayoutItems(),d=a.length,g=[],b,c;for(b=0;b<d;b++){c=a[b];if(c.rendered&&f.isValidParent(c,h,b)){g.push(c)}}return g},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var a=this,b=Ext.XTemplate.getTpl(this,"renderTpl");if(!b.renderContent){a.owner.setupRenderTpl(b)}return b},getRenderTree:function(){var a,c=this.owner.items,d,b={};do{d=c.generation;a=this.getItemsRenderTree(this.getLayoutItems(),b)}while(c.generation!==d);return a},renderChildren:function(){var b=this,c=b.owner.items,f=b.getRenderTarget(),d,a;do{d=c.generation;a=b.getLayoutItems();b.renderItems(a,f)}while(c.generation!==d)},getScrollbarsNeeded:function(c,j,b,h){var a=Ext.getScrollbarSize(),f=typeof c=="number",k=typeof j=="number",g=0,d=0;if(!a.width){return 0}if(k&&j<h){d=2;c-=a.width}if(f&&c<b){g=1;if(!d&&k){j-=a.height;if(j<h){d=2}}}return d+g},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var g=this.getRenderTarget(),b=this.getLayoutItems(),f=b.length,a=[],c,d;for(c=0;c<f;c++){d=b[c];if(d.rendered&&this.isValidParent(d,g,c)&&d.hidden!==true&&!d.floated){a.push(d)}}return a},getMoveAfterIndex:function(c){var a=this.owner,b=a.items;return b.indexOf(c)+1},moveItemBefore:function(d,f){var a=this.owner,b=d.ownerCt,c=a.items,g;if(d===f){return d}if(b){b.remove(d,false)}if(f){g=c.indexOf(f)}else{g=c.length}return a.insert(g,d)},setupRenderTpl:function(b){var a=this;b.renderBody=a.doRenderBody;b.renderContainer=a.doRenderContainer;b.renderItems=a.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){if(!a.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,a)},onRemove:function(a){if(!a.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,a)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(a){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(a)},beforeLayoutCycle:function(d){var b=this.owner,c=b.inheritedState,a=b.inheritedStateInner;if(!c||c.invalid){c=b.getInherited();a=b.inheritedStateInner}if(d.widthModel.shrinkWrap){a.inShrinkWrapTable=true}else{delete a.inShrinkWrapTable}},beginLayoutCycle:function(d){var k=this,b=k.outerCt,h=k.lastOuterCtWidth||"",g=k.lastOuterCtHeight||"",l=k.lastOuterCtTableLayout||"",a=d.state,m,f,n,c,j;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);f=n=c="";if(!d.widthModel.shrinkWrap){f="100%";j=k.owner.inheritedStateInner;m=k.getOverflowXStyle(d);c=(j.inShrinkWrapTable||m==="auto"||m==="scroll")?"":"fixed"}if(!d.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){n="100%"}if((f!==h)||k.hasOuterCtPxWidth){b.setStyle("width",f);k.lastOuterCtWidth=f;k.hasOuterCtPxWidth=false}if(c!==l){b.setStyle("table-layout",c);k.lastOuterCtTableLayout=c}if((n!==g)||k.hasOuterCtPxHeight){b.setStyle("height",n);k.lastOuterCtHeight=n;k.hasOuterCtPxHeight=false}if(k.hasInnerCtPxHeight){k.innerCt.setStyle("height","");k.hasInnerCtPxHeight=false}a.overflowAdjust=a.overflowAdjust||k.lastOverflowAdjust},calculate:function(c){var a=this,b=c.state,f=a.getContainerSize(c,true),d=b.calculatedItems||(b.calculatedItems=a.calculateItems?a.calculateItems(c,f):true);a.setCtSizeIfNeeded(c,f);if(d&&c.hasDomProp("containerChildrenSizeDone")){a.calculateContentSize(c);if(f.gotAll){if(a.manageOverflow&&!c.state.secondPass&&!a.reserveScrollbar){a.calculateOverflow(c,f)}return}}a.done=false},calculateContentSize:function(g){var f=this,a=((g.widthModel.shrinkWrap?1:0)|(g.heightModel.shrinkWrap?2:0)),c=(a&1)||undefined,h=(a&2)||undefined,d=0,b=g.props;if(c){if(isNaN(b.contentWidth)){++d}else{c=undefined}}if(h){if(isNaN(b.contentHeight)){++d}else{h=undefined}}if(d){if(c&&!g.setContentWidth(f.measureContentWidth(g))){f.done=false}if(h&&!g.setContentHeight(f.measureContentHeight(g))){f.done=false}}},calculateOverflow:function(c){var h=this,b,k,a,g,f,d,j;f=(h.getOverflowXStyle(c)==="auto");d=(h.getOverflowYStyle(c)==="auto");if(f||d){a=Ext.getScrollbarSize();j=c.overflowContext.el.dom;g=0;if(j.scrollWidth>j.clientWidth){g|=1}if(j.scrollHeight>j.clientHeight){g|=2}b=(d&&(g&2))?a.width:0;k=(f&&(g&1))?a.height:0;if(b!==h.lastOverflowAdjust.width||k!==h.lastOverflowAdjust.height){h.done=false;c.invalidate({state:{overflowAdjust:{width:b,height:k},overflowState:g,secondPass:true}})}}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(c,f){var d=f.$layout,a=Ext.XTemplate,g=d.beforeBodyTpl,b=d.afterBodyTpl;if(g){a.getTpl(d,"beforeBodyTpl").applyOut(f,c)}this.renderItems(c,f);this.renderContent(c,f);if(b){a.getTpl(d,"afterBodyTpl").applyOut(f,c)}},doRenderPadding:function(b,d){var c=d.$layout,a=d.$layout.owner,f=a[a.contentPaddingProperty];if(c.managePadding&&f){b.push("padding:",a.unitizeBox(f))}},finishedLayout:function(b){var a=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){a.repaint()}if(Ext.isOpera){a.setStyle("position","relative");a.dom.scrollWidth;a.setStyle("position","")}},getContainerSize:function(b,c){var a=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),d=b.state.overflowAdjust;if(d){a.width-=d.width;a.height-=d.height}return a},getRenderData:function(){var a=this,b=Ext.layout.container.Container.prototype.getRenderData.call(this);b.innerCtCls=a.innerCtCls;b.outerCtCls=a.outerCtCls;return b},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle("overflow-y"))},initContextItems:function(c){var b=this,d=c.target,a=b.owner.customOverflowEl;c.outerCtContext=c.getEl("outerCt",b);c.innerCtContext=c.getEl("innerCt",b);if(a){c.overflowContext=c.getEl(a)}else{c.overflowContext=c.targetContext}if(d[d.contentPaddingProperty]!==undefined){c.paddingContext=c.innerCtContext}},initLayout:function(){var c=this,b=Ext.getScrollbarSize().width,a=c.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(b&&c.manageOverflow&&!c.hasOwnProperty("lastOverflowAdjust")){if(a.autoScroll||c.reserveScrollbar){c.lastOverflowAdjust={width:b,height:0}}}},measureContentHeight:function(b){var a=this.outerCt.getHeight(),c=b.target;if(this.managePadding&&(c[c.contentPaddingProperty]===undefined)){a+=b.targetContext.getPaddingInfo().height}return a},measureContentWidth:function(d){var g,c,b,a,f;if(this.chromeCellMeasureBug){g=this.innerCt.dom;c=g.style;b=c.display;if(b=="table-cell"){c.display="";g.offsetWidth;c.display=b}}if(Ext.isSafari){g=this.outerCt.dom;c=g.style;c.display="table-cell";g.offsetWidth;g.style.display=""}a=this.outerCt.getWidth();f=d.target;if(this.managePadding&&(f[f.contentPaddingProperty]===undefined)){a+=d.targetContext.getPaddingInfo().width}return a},setCtSizeIfNeeded:function(d,b){var f=this,m=b.height,h=d.paddingContext.getPaddingInfo(),k=f.getTarget(),l=f.getOverflowXStyle(d),c=(l==="auto"||l==="scroll"),a=Ext.getScrollbarSize(),g,j;if(m&&!d.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){g=true}if(Ext.isIE8){j=true}if((g||j)&&c&&(k.dom.scrollWidth>k.dom.clientWidth)){m=Math.max(m-a.height,0)}if(g){d.outerCtContext.setProp("height",m+h.height);f.hasOuterCtPxHeight=true}if(j){d.innerCtContext.setProp("height",m);f.hasInnerCtPxHeight=true}}},setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000,activeCounter:0},constructor:function(a){var b=this;b.id=Ext.id(null,"zindex-mgr-");b.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(f,d){var c=(f.alwaysOnTop||0)-(d.alwaysOnTop||0);if(!c){c=f.getActiveCounter()-d.getActiveCounter()}return c}},filters:{filterFn:function(c){return c.isVisible()}}});b.zIndexStack.addObserver(b);b.front=null;b.globalListeners=Ext.globalEvents.on({hide:b.onComponentShowHide,show:b.onComponentShowHide,scope:b,destroyable:true});if(a){if(a.isContainer){a.on("resize",b._onContainerResize,b);b.zseed=Ext.Number.from(b.rendered?a.getEl().getStyle("zIndex"):undefined,b.getNextZSeed());b.targetEl=a.getTargetEl();b.container=a}else{Ext.on("resize",b._onContainerResize,b);b.zseed=b.getNextZSeed();b.targetEl=Ext.get(a)}}else{b.zseed=b.getNextZSeed();Ext.onReady(function(){Ext.on("resize",b._onContainerResize,b);b.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(a){this.zseed=a;return this.onCollectionSort()},onCollectionSort:function(){var h=this,d=h.front,k=h.zIndexStack.getRange(),g=k.length,c,j=h.zseed,f,b,l;for(c=0;c<g;c++){f=k[c];j=f.setZIndex(j);if(f.modal){b=f}}if(f&&f!==d){if(d&&!d.destroying){d.setActive(false,f)}l=f.modal||(f.focusOnToFront&&!f.preventFocusOnActivate);f.setActive(true,null,l)}h.front=f;if(b){h._showModalMask(b)}else{h._hideModalMask()}return j},onComponentUpdate:function(a){if(this.zIndexStack.contains(a)){this.zIndexStack.sort()}},onComponentShowHide:function(a){var b=this.zIndexStack;if(a.isFloating()&&!this.hidingAll&&(b.getSource()||b).contains(a)){b.itemChanged(a,"hidden");b.sort();if(!a.isVisible()){a.setActive(false)}}},_showModalMask:function(c){var f=this,j=c.el.getStyle("zIndex")-4,d=c.floatParent?c.floatParent.getTargetEl():c.container,b=f.mask,h=f.maskShim,g,a;if(!b){b=f.mask=Ext.getBody().createChild({role:"presentation",cls:"x-mask",style:"height:0;width:0"});b.setVisibilityMode(Ext.Element.DISPLAY);b.on("click",f._onMaskClick,f)}b.maskTarget=d;g=f._getMaskBox();if(h){h.setStyle("zIndex",j);h.show();h.setBox(g)}b.setStyle("zIndex",j);a="data-savedtabindex-"+d.getId();d.saveTabbableState(a);d.saveChildrenTabbableState(a);b.show();b.setBox(g)},_hideModalMask:function(){var c=this.mask,a=this.maskShim,d,b;if(c&&c.isVisible()){d=c.maskTarget;b="data-savedtabindex-"+d.getId();d.restoreChildrenTabbableState(b);d.restoreTabbableState(b);c.maskTarget=undefined;c.hide();if(a){a.hide()}}},_onMaskClick:function(){if(this.front){this.front.focus()}},_getMaskBox:function(){var a=this.mask.maskTarget;if(a.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return a.getBox()}},_onContainerResize:function(){var c=this,b=c.mask,a=c.maskShim,d;if(b&&b.isVisible()){b.hide();if(a){a.hide()}d=c._getMaskBox();if(a){a.setSize(d);a.show()}b.setSize(d);b.show()}},register:function(a){var b=this;if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=b;b.zIndexStack.add(a)},unregister:function(a){delete a.zIndexManager;this.zIndexStack.remove(a);this.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(b,f){var c=this,h=c.zIndexStack,a=h.last(),d,g=b.preventFocusOnActivate;if(h.find("alwaysOnTop",true)){return false}b=c.get(b);b.preventFocusOnActivate=f;b.setActiveCounter(++Ext.ZIndexManager.activeCounter);b.preventFocusOnActivate=g;d=h.last();return(d===b&&d!==a)},sendToBack:function(a){a=this.get(a);a.setActiveCounter(0);return a},hideAll:function(){var c=this.zIndexStack.getRange(),a=c.length,b;this.hidingAll=true;for(b=0;b<a;b++){c[b].hide()}this.hidingAll=true},hide:function(){var f=this,d=f.tempHidden=f.zIndexStack.getRange(),a=d.length,c,b;for(c=0;c<a;c++){b=d[c];b.el.hide();b.hidden=true}},show:function(){var c,d=this.tempHidden,a=d?d.length:0,b;for(c=0;c<a;c++){b=d[c];b.el.show();b.hidden=false;b.setPosition(b.x,b.y)}this.tempHidden=null},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(g,f){var b=this.zIndexStack.getRange(),d,a=b.length,c;for(d=0;d<a;d++){c=b[d];if(c.isComponent&&g.call(f||c,c)===false){return}}},eachTopDown:function(f,d){var a=this.zIndexStack.getRange(),c,b;for(c=a.length;c-->0;){b=a[c];if(b.isComponent&&f.call(d||b,b)===false){return}}},destroy:function(){var d=this,b=d.zIndexStack.getRange(),a=b.length,c;for(c=0;c<a;c++){Ext.destroy(b[c])}Ext.destroy(d.mask,d.maskShim,d.zIndexStack,d.globalListeners);d.zIndexStack=d.container=d.targetEl=d.globalListeners=null}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:true,query:function(a){a=a||"*";return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(g,f){var c=[],b=this.getQueryRoot().getRefItems(true),d=0,a=b.length,h;for(;d<a;++d){h=b[d];if(g.call(f||h,h)!==false){c.push(h)}}return c},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(a){var b=this.getQueryRoot().getRefItems();if(a&&a.isComponent){return this.matchById(b,a.getItemId())}if(a){b=Ext.ComponentQuery.query(a,b)}if(b.length){return b[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(true),a.getItemId())}a=a||"";return this.query(a)[0]||null},visitPreOrder:function(a,d,c,b){Ext.ComponentQuery._visit(true,a,this.getQueryRoot(),d,c,b)},visitPostOrder:function(a,d,c,b){Ext.ComponentQuery._visit(false,a,this.getQueryRoot(),d,c,b)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(b,f){var a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getItemId()===f){return d}}return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0));(Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"{%this.renderContainer(out,values)%}",isContainer:true,autoDestroy:true,defaultType:"panel",detachOnRemove:true,items:undefined,layout:"auto",suspendLayout:false,_applyDefaultsOptions:{defaults:true,strict:false},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var l=this,h=Ext.Array.slice(arguments),f=(typeof h[0]=="number")?h.shift():-1,c=l.getLayout(),d=false,n,j,b,a,o,m,g,k;if(h.length==1&&Ext.isArray(h[0])){j=h[0];n=true}else{j=h}if(l.rendered){Ext.suspendLayouts()}g=j=l.prepareItems(j,true);a=j.length;if(!n&&a==1){g=j[0]}for(b=0;b<a;b++){o=j[b];m=(f<0)?l.items.length:(f+b);k=!!o.instancedCmp;delete o.instancedCmp;if(o.floating){l.floatingItems.add(o);o.onAdded(l,m,k);delete o.initOwnerCt;if(l.hasListeners.add){l.fireEvent("add",l,o,m)}}else{if((!l.hasListeners.beforeadd||l.fireEvent("beforeadd",l,o,m)!==false)&&l.onBeforeAdd(o)!==false){l.items.insert(m,o);o.onAdded(l,m,k);delete o.initOwnerCt;l.onAdd(o,m);c.onAdd(o,m);d=true;if(l.hasListeners.add){l.fireEvent("add",l,o,m)}}}}if(d){l.updateLayout()}if(l.rendered){Ext.resumeLayouts(true)}return g},onAdded:function(b,c,a){Ext.Component.prototype.onAdded.apply(this,arguments);if(a){Ext.ComponentManager.markReferencesDirty()}},onRemoved:function(a){var b;if(!a){b=this.lookupReferenceHolder();if(b){Ext.ComponentManager.markReferencesDirty();b.clearReferences()}}Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var b=this.floatingItems.items,a=b.length,d,c;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);for(d=0;d<a;d++){c=b[d];if(!c.rendered&&c.autoShow){c.show()}}},afterLayout:function(b){var a=this,c=a.scrollManager;++a.layoutCounter;if(c&&a.layoutCounter>1){c.refresh()}if(a.hasListeners.afterlayout){a.fireEvent("afterlayout",a,b)}},onDestroy:function(){Ext.Component.prototype.onDestroy.call(this);this.refs=null},beforeDestroy:function(){var b=this,a=b.items,d=b.floatingItems,f;if(a){while((f=a.first())){b.doRemove(f,true)}}if(d){while((f=d.first())){b.doRemove(f,true)}}Ext.destroy(b.layout);Ext.Component.prototype.beforeDestroy.call(this)},beforeRender:function(){var b=this,a=b.getLayout(),c;Ext.Component.prototype.beforeRender.call(this);if(!a.initialized){a.initLayout()}c=a.targetCls;if(c){b.applyTargetCls(c)}},cascade:function(l,m,a){var k=this,f=k.items?k.items.items:[],g=f.length,d=0,j,h=a?a.concat(k):[k],b=h.length-1;if(l.apply(m||k,h)!==false){for(;d<g;d++){j=f[d];if(j.cascade){j.cascade(l,m,a)}else{h[b]=j;l.apply(m||j,h)}}}return this},contains:function(c,b){var a=false;if(b){this.cascade(function(d){if(d.contains&&d.contains(c)){a=true;return false}});return a}else{return this.items.contains(c)||this.floatingItems.contains(c)}},disable:function(){Ext.Component.prototype.disable.apply(this,arguments);var d=this.getChildItemsToDisable(),c=d.length,b,a;for(a=0;a<c;a++){b=d[a];if(b.resetDisable!==false&&!b.disabled){b.disable();b.resetDisable=true}}return this},doLayout:function(){this.updateLayout();return this},enable:function(){Ext.Component.prototype.enable.apply(this,arguments);var d=this.getChildItemsToDisable(),c=d.length,b,a;for(a=0;a<c;a++){b=d[a];if(b.resetDisable){b.enable()}}return this},getChildByElement:function(f,a){var h,c,b=0,d=this.getRefItems(),g=d.length;f=Ext.getDom(f);for(;b<g;b++){h=d[b];c=h.getEl();if(c&&((c.dom===f)||c.contains(f))){return(a&&h.getChildByElement)?h.getChildByElement(f,a):h}}return null},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}var b=this.items.get(a);if(!b&&typeof a!="number"){b=this.floatingItems.get(a)}return b},getLayout:function(){var b=this,a=b.layout;if(!a||!a.isLayout){b.setLayout(a)}return b.layout},getRefItems:function(c){var h=this,d=h.items.items,b=d.length,f=0,g,a=[];for(;f<b;f++){g=d[f];a[a.length]=g;if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}d=h.floatingItems.items;b=d.length;for(f=0;f<b;f++){g=d[f];a[a.length]=g;if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}return a},initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.getLayout();a.constructing=true;a.initItems();delete a.constructing},getReferences:function(){var a=Ext.ComponentManager;if(a.referencesDirty){a.fixReferences()}return this.refs||null},lookupReference:function(b){var a=this.getReferences();return(a&&a[b])||null},initItems:function(){var b=this,a=b.items;if(!a||!a.isMixedCollection){b.items=new Ext.util.AbstractMixedCollection(false,b.getComponentId);b.floatingItems=new Ext.util.MixedCollection(false,b.getComponentId);if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}}},initInheritedState:function(j,c){var h=this,d=h.controller,f=h.layout,g=h.session,k=h.viewModel,b=h.reference,a=h.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,j,c);if(h.collapsed){j.collapsed=true}if(d){j.referenceHolder=d;a=true}else{if(a){j.referenceHolder=h}}if(a){j.referencePath=""}else{if(b&&h.isParentReference){j.referencePath=h.referenceKey+"."}}if(g){j.session=g}if(k){j.viewModelPath=""}else{if(b&&h.isParentReference){j.viewModelPath=h.viewModelKey+"."}}if(f&&f.initInheritedState){f.initInheritedState(j,c)}},insert:function(c,b){var a;if(b&&b.isComponent){a=this.items.indexOf(b);if(a!==-1){return this.move(a,c)}}return this.add(c,b)},isAncestor:function(a){while(a){if(a.ownerCt===this){return true}a=a.ownerCt}},lookupComponent:function(a){if(!a.isComponent){if(typeof a==="string"){a=Ext.ComponentManager.get(a)}else{a=Ext.ComponentManager.create(a,this.defaultType)}}return a},move:function(b,f){var d=this,a=d.items,c;if(b.isComponent){b=a.indexOf(b)}c=a.getAt(b);if(b!==f){c=a.removeAt(b);if(c===false){return false}a.insert(f,c);d.onMove(c,b,f);if(d.hasListeners.move){d.fireEvent("move",d,c,b,f)}d.updateLayout()}return c},moveBefore:function(a,b){return this.layout.moveItemBefore(a,b)},moveAfter:function(f,h){var d=this,a=d.items,c=d.layout,b=h?c.getMoveAfterIndex(h):0,g=a.getAt(b);return c.moveItemBefore(f,g)},nextChild:function(j,c){var g=this,d=g.items,h=d.indexOf(j),f=0,b=d.length,a;if(h!==-1){if(c){for(;f<b;f++){a=d.getAt(h+f);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(h+1)}if(!a&&g.ownerCt){a=g.ownerCt.nextChild(g,c)}}return a},onAdd:Ext.emptyFn,onBeforeAdd:function(b){var a=b.ownerCt;if(a&&a!==this){a.remove(b,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(j,c){var g=this,d=g.items,h=d.indexOf(j),f=0,b=d.length,a;if(h!==-1){if(c){for(;f<b;f++){a=d.getAt(h-f);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(h-1)}if(!a&&g.ownerCt){a=g.ownerCt.nextChild(g,c)}}return a},remove:function(b,a){var d=this,f=d.getComponent(b);if(f&&(!d.hasListeners.beforeremove||d.fireEvent("beforeremove",d,f)!==false)){d.doRemove(f,a);if(d.hasListeners.remove){d.fireEvent("remove",d,f)}if(!d.destroying&&!f.floating){d.updateLayout()}}return f},removeAll:function(c){var h=this,f=h.items.items.slice().concat(h.floatingItems.items),b=[],d=0,a=f.length,g;Ext.suspendLayouts();h.removingAll=true;for(;d<a;d++){g=f[d];h.remove(g,c);if(g.ownerCt!==h){b.push(g)}}h.removingAll=false;Ext.resumeLayouts(!!a);return b},setLayout:function(f){var d=this,b=d.layout,g=b&&b.isLayout,a,c;if(typeof f==="string"){f={type:f}}c=f.type;if(g&&(!c||(c===b.type))){delete f.type;b.setConfig(f)}else{if(g){b.setOwner(null)}a=d.self.prototype.layout;if(typeof a==="string"){f.type=c||a}else{Ext.merge(Ext.merge({},a),f)}f=this.layout=Ext.Factory.layout(f);f.setOwner(this)}if(d.rendered){d.updateLayout()}},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},privates:{applyDefaults:function(a){var b=this,c=b.defaults;if(c){if(Ext.isFunction(c)){c=c.call(b,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}if(a.isComponent){a.setConfig(c,null,b._applyDefaultsOptions)}else{a=b.getConfigurator().merge(b,Ext.Object.fork(c),a)}}return a},applyReference:function(b){var a;if(b&&b.charAt(a=b.length-1)===">"){this.isParentReference=true;b=b.substring(0,a)}return b},applyTargetCls:function(a){this.addCls(a)},attachReference:function(b){var d=this,c,a;if(d.destroying||d.isDestroyed){return}a=d.refs||(d.refs={});c=b.referenceKey;a[c]=b},clearReference:function(b){var a=this.refs,c=b.referenceKey;if(a&&c){b.viewModelKey=b.referenceKey=a[c]=null}},clearReferences:function(){this.refs=null},detachComponent:function(a){Ext.getDetachedBody().appendChild(a.getEl())},doRemove:function(c,b){b=b===true||(b!==false&&this.autoDestroy);var g=this,f=g.layout,a=f&&g.rendered,d=c.destroying||b,h=c.floating;if(h){g.floatingItems.remove(c)}else{g.items.remove(c)}if(a&&!h){if(f.running){Ext.Component.cancelLayout(c,d)}f.onRemove(c,d)}c.onRemoved(d);g.onRemove(c,d);if(b){c.destroy()}else{if(a&&!h){f.afterRemove(c)}if(g.detachOnRemove&&c.rendered){g.detachComponent(c)}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var a=this.getLayout();if(a){a.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],button")},getComponentId:function(a){return a.getItemId&&a.getItemId()},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getFocusEl:function(){return this.getTargetEl()},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(b,d){if(Ext.isArray(b)){b=b.slice()}else{b=[b]}var g=this,c=0,a=b.length,f;for(;c<a;c++){f=b[c];if(f==null){Ext.Array.erase(b,c,1);--c;--a}else{if(d){f=this.applyDefaults(f)}f.initOwnerCt=g;if(f.isComponent){f.instancedCmp=true}b[c]=g.lookupComponent(f);delete f.initOwnerCt}}return b},repositionFloatingItems:function(){var b=this.floatingItems.items,a=b.length,d,c;for(d=0;d<a;d++){c=b[d];if(c.el&&!c.hidden){c.setPosition(c.x,c.y)}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var a=this.items.items,c=a.length,b=this._noMargin,d;while(c--){d=a[c];d.margin$=null;d.el.setStyle(b)}},setupRenderTpl:function(a){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(a)}}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0));(Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1},0,["tbfill"],["component","box","tbfill"],{component:true,box:true,tbfill:true},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:true,$configPrefixed:false,$configStrict:false,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(b){var a=this,c=b.state.boxPlan,d;if(c&&c.tooNarrow){d=a.handleOverflow(b);if(d){if(d.reservedSpace){a.layout.publishInnerCtSize(b,d.reservedSpace)}}}else{a.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(d){var c=this,a=c.layout.owner,b,f;if(a.hasListeners.overflowchange){b=a.query(">[hidden]");f=b.length;if(f!==c.lastHiddenCount){a.fireEvent("overflowchange",c.lastHiddenCount,f,b);c.lastHiddenCount=f}}},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(a){var b;if(a.isToolbar){b="toolbar"}else{if(a.isTabBar){b="tab-bar"}else{if(a.isMenu){b="menu"}else{if(a.isBreadcrumb){b="breadcrumb"}else{b=a.getXType()}}}}return b},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var b=this,a=b.layout,c=a.innerCt;c.removeCls(b.getOverflowCls(a.oppositeDirection));c.addCls(b.getOverflowCls(a.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));Ext.define("Ext.toolbar.Item",{extend:Ext.Component,alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.define("Ext.toolbar.Separator",{extend:Ext.toolbar.Item,alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"});(Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(d,a,b){var f=this,c=f.component;Ext.dom.Element.prototype.setSize.call(this,d,a,b);c.btnWrap.setStyle("table-layout",(!d||d==="auto")?"":"fixed");c.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return f},setStyle:function(g,f){var d=this,b=d.component,c,a;Ext.dom.Element.prototype.setStyle.call(this,g,f);if(g){if(g==="width"||(typeof g!=="string"&&"width" in g)){c=f||g.width;b.btnWrap.setStyle("table-layout",(!c||c==="auto")?"":"fixed")}if(g==="height"||(typeof g!=="string"&&"height" in g)){a=f||g.height;b.btnEl.setStyle("height",(!a||a==="auto")?"":"auto")}}return d},setHeight:function(a,b){Ext.dom.Element.prototype.setHeight.call(this,a,b);this.component.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return this},setWidth:function(b,a){Ext.dom.Element.prototype.setWidth.call(this,b,a);this.component.btnWrap.setStyle("table-layout",(!b||b==="auto")?"":"fixed");return this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0));(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,buttonSelector:".x-btn",init:function(){var a=this;if(!a.initialized){Ext.getDoc().on({keydown:a.onDocumentKeyDown,mouseup:a.onDocumentMouseUp,scope:a});a.initialized=true}},onDocumentKeyDown:function(c){var a=c.getKey(),b;if(a===c.SPACE||a===c.ENTER){b=c.getTarget(this.buttonSelector);if(b){Ext.getCmp(b.id).onClick(c)}}},onButtonMousedown:function(a,c){var b=this.pressedButton;if(b){b.onMouseUp(c)}this.pressedButton=a},onDocumentMouseUp:function(b){var a=this.pressedButton;if(a){a.onMouseUp(b);this.pressedButton=null}},toggleGroup:function(b,f){if(f){var d=this.groups[b.toggleGroup],c=d.length,a;for(a=0;a<c;a++){if(d[a]!==b){d[a].toggle(false)}}}},register:function(b){var c=this,a=this.groups,d=a[b.toggleGroup];c.init();if(!b.toggleGroup){return}if(!d){d=a[b.toggleGroup]=[]}d.push(b);b.on("toggle",c.toggleGroup,c)},unregister:function(a){if(!a.toggleGroup){return}var b=this,c=b.groups[a.toggleGroup];if(c){Ext.Array.remove(c,a);a.un("toggle",b.toggleGroup,b)}},getPressed:function(d){var c=this.groups[d],b=0,a;if(c){for(a=c.length;b<a;b++){if(c[b].pressed===true){return c[b]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",menuSelector:".x-menu",menus:{},groups:{},attached:false,lastShow:new Date(),constructor:function(){this.active=new Ext.util.MixedCollection()},init:function(){var a=this;if(!a.initialized){Ext.onReady(function(){Ext.getDoc().addKeyListener(27,a.hideAll,a)})}a.initialized=true},hideAll:function(){var c=this.active,b,a,d;if(c.length>0){b=Ext.Array.slice(c.items);d=b.length;for(a=0;a<d;a++){b[a].hide()}return true}return false},onHide:function(a){var b=this,c=b.active;c.remove(a);if(c.length<1){Ext.un("mousedown",b.onMouseDown,b);b.attached=false}},onShow:function(a){var c=this,d=c.active,b=c.attached;c.lastShow=new Date();d.add(a);if(!b){Ext.on("mousedown",c.onMouseDown,c,{buffer:Ext.isIE9m?10:undefined});c.attached=true}a.toFront()},onBeforeHide:function(a){if(a.activeChild){a.activeChild.hide()}if(a.autoHideTimer){clearTimeout(a.autoHideTimer);delete a.autoHideTimer}},onBeforeShow:function(a){var c=this.active,b=a.parentMenu;c.remove(a);if(!b&&!a.allowOtherMenus){this.hideAll()}else{if(b&&b.activeChild&&a!=b.activeChild){b.activeChild.hide()}}},onMouseDown:function(g){var d=this,f=d.active,b=f.length,a=d.lastShow,c;if(Ext.Date.getElapsed(a)>50&&b){if(Ext.isIE9m&&!Ext.getDoc().contains(g.target)){return}else{for(c=0;c<b;c++){if(f.items[c].owns(g.target)){return}}}d.hideAll()}},register:function(b){var a=this;a.init();if(b.floating){a.menus[b.id]=b;b.on({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})}},get:function(c,a){var b=this.menus;if(typeof c=="string"){if(!b){c=null}else{c=b[c]}}else{if(Ext.isArray(c)){a=Ext.apply({items:c},a);c=new Ext.menu.Menu(a)}else{if(!c.isComponent){a=Ext.apply({},c,a);c=Ext.ComponentManager.create(a,"menu")}}}return c},unregister:function(d){var a=this,b=a.menus,c=a.active;delete b[d.id];c.remove(d);d.un({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})},registerCheckable:function(c){var a=this.groups,b=c.group;if(b){if(!a[b]){a[b]=[]}a[b].push(c)}},unregisterCheckable:function(c){var a=this.groups,b=c.group;if(b){Ext.Array.remove(a[b],c)}},onCheckChange:function(d,g){var a=this.groups,c=d.group,b=0,j,f,h;if(c&&g){j=a[c];f=j.length;for(;b<f;b++){h=j[b];if(h!=d){h.setChecked(false)}}}}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:true},isButton:true,_syncFrameHeight:true,liquidLayout:true,hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:true,focusable:true,ariaRole:"button",defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl"],publishes:{pressed:1},menuClickBuffer:250,_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_operaArrowCls:"x-opera12m-btn-arrow",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var a=this;a.addCls("x-unselectable");if(Ext.isOpera12m&&(a.split||a.menu)&&a.getArrowVisible()){a.addCls(a._operaArrowCls+"-"+a.arrowAlign)}Ext.Component.prototype.initComponent.call(this);if(a.menu){a.split=true;a.setMenu(a.menu,false,true)}if(a.url){a.href=a.url}a.configuredWithPreventDefault=a.hasOwnProperty("preventDefault");if(a.href&&!a.configuredWithPreventDefault){a.preventDefault=false}if(Ext.isString(a.toggleGroup)&&a.toggleGroup!==""){a.enableToggle=true}if(a.html&&!a.text){a.text=a.html;delete a.html}},getElConfig:function(){var c=this,b=Ext.Component.prototype.getElConfig.call(this),a=c.getHref(),d=c.hrefTarget;if(b.tag==="a"){if(!c.disabled){b.tabIndex=c.tabIndex}if(a){if(!c.disabled){b.href=a}if(d){b.target=d}}}return b},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(f,d,b){var c=this,a=c.menu;if(a&&!b){if(d!==false&&c.destroyMenu){a.destroy()}a.ownerCmp=null}if(f){f=Ext.menu.Manager.get(f,{ownerCmp:c});f.ownerCmp=c;c.mon(f,{scope:c,show:c.onMenuShow,hide:c.onMenuHide});if(!a&&c.getArrowVisible()){c.split=true;if(c.rendered){c._addSplitCls();c.updateLayout()}}c.menu=f}else{if(c.rendered){c._removeSplitCls();c.updateLayout()}c.split=false;c.menu=null}},onRender:function(){var c=this,d,a,b;c.doc=Ext.getDoc();Ext.Component.prototype.onRender.apply(this,arguments);a=c.el;if(c.tooltip){c.setTooltip(c.tooltip,true)}if(c.handleMouseEvents){b={scope:c,mouseover:c.onMouseOver,mouseout:c.onMouseOut,mousedown:c.onMouseDown};if(c.split){b.mousemove=c.onMouseMove}}else{b={scope:c}}if(Ext.supports.Touch){b.touchstart=c.onTouchStart}if(c.menu){c.keyMap=new Ext.util.KeyMap({target:c.el,key:Ext.event.Event.prototype.DOWN,handler:c.onDownKey,scope:c})}if(c.repeat){c.mon(new Ext.util.ClickRepeater(a,Ext.isObject(c.repeat)?c.repeat:{}),"click",c.onRepeatClick,c)}else{if(b[c.clickEvent]){d=true}else{b[c.clickEvent]=c.onClick}}c.mon(a,b);if(c.hasFrameTable()){c.mon(c.frameTable,"click",c.frameTableListener,c)}if(d){c.mon(a,c.clickEvent,c.onClick,c)}Ext.button.Manager.register(c)},getTemplateArgs:function(){var j=this,c=j._btnCls,f=j._baseIconCls,a=j.getIconAlign(),k=j.glyph,h=Ext._glyphFontFamily,l=j.text,d=j._hasIcon(),g=j._hasIconCls,b;if(typeof k==="string"){b=k.split("@");k=b[0];h=b[1]}return{innerCls:j._innerCls,splitCls:j.getArrowVisible()?j.getSplitCls():"",iconUrl:j.icon,iconCls:j.iconCls,glyph:k,glyphCls:k?j._glyphCls:"",glyphFontFamily:h,text:l||"&#160;",closeText:j.closeText,textCls:l?j._textCls:"",noTextCls:l?"":j._noTextCls,hasIconCls:d?g:"",btnWrapCls:j._btnWrapCls,btnWrapStyle:j.width?"table-layout:fixed;":"",btnElStyle:j.height?"height:auto;":"",btnCls:c,baseIconCls:f,iconBeforeText:a==="left"||a==="top",iconAlignCls:d?(g+"-"+a):"",textAlignCls:c+"-"+j.getTextAlign()}},renderIcon:function(a){return this.getTpl("iconTpl").apply(a)},setHref:function(a){var b=this;b.href=a;if(!b.configuredWithPreventDefault){b.preventDefault=!a}if(b.rendered){if(!a||b.disabled){b.el.dom.removeAttribute("href")}else{b.el.dom.href=b.getHref()}}},getHref:function(){var b=this,a=b.href;return a?Ext.urlAppend(a,Ext.Object.toQueryString(Ext.apply({},b.params,b.baseParams))):false},setParams:function(b){var a=this;a.params=b;if(a.disabled){a.el.dom.removeAttribute("href")}else{a.el.dom.href=a.getHref()}},getSplitCls:function(){var a=this;return a.split?(a.baseCls+"-"+a.arrowCls)+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},setIcon:function(b){b=b||"";var c=this,a=c.btnIconEl,d=c.icon||"";c.icon=b;if(b!=d){if(a){a.setStyle("background-image",b?"url("+b+")":"");c._syncHasIconCls();if(c.didIconStateChange(d,b)){c.updateLayout()}}c.fireEvent("iconchange",c,d,b)}return c},setIconCls:function(b){b=b||"";var d=this,a=d.btnIconEl,c=d.iconCls||"";d.iconCls=b;if(c!=b){if(a){a.removeCls(c);a.addCls(b);d._syncHasIconCls();if(d.didIconStateChange(c,b)){d.updateLayout()}}d.fireEvent("iconchange",d,c,b)}return d},setGlyph:function(g){g=g||0;var f=this,b=f.btnIconEl,c=f.glyph,h=f._glyphCls,a,d;f.glyph=g;if(b){if(typeof g==="string"){d=g.split("@");g=d[0];a=d[1]||Ext._glyphFontFamily}if(!g){b.dom.innerHTML="";b.removeCls(h)}else{if(c!=g){b.dom.innerHTML="&#"+g+";";b.addCls(h)}}if(a){b.setStyle("font-family",a)}f._syncHasIconCls();if(f.didIconStateChange(c,g)){f.updateLayout()}}f.fireEvent("glyphchange",f,f.glyph,c);return f},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a||!c){b.clearTip()}if(c){if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.el.id},c));b.tooltip=c}else{b.el.dom.setAttribute(b.getTipAttr(),c)}}}else{b.tooltip=c}return b},updateIconAlign:function(g,d){var c=this,b,a,f;if(c.rendered){b=c.btnEl;a=c.btnIconEl;f=c._hasIconCls;if(d){b.removeCls(f+"-"+d)}b.addCls(f+"-"+g);if(g==="top"||g==="left"){b.insertFirst(a)}else{b.appendChild(a)}c.updateLayout()}},updateTextAlign:function(f,d){var c=this,b=c.btnEl,a=c._btnCls;if(c.rendered){b.removeCls(a+"-"+d);b.addCls(a+"-"+f)}},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},clearTip:function(){var b=this,a=b.el;if(Ext.quickTipsActive&&Ext.isObject(b.tooltip)){Ext.tip.QuickTipManager.unregister(a)}else{a.dom.removeAttribute(b.getTipAttr())}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}if(a.menu&&a.destroyMenu){a.menu.destroy()}Ext.destroy(a.repeater);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.rendered){a.doc.un("mouseover",a.monitorMouseOver,a);delete a.doc;Ext.destroy(a.keyMap);delete a.keyMap}Ext.button.Manager.unregister(a);Ext.Component.prototype.onDestroy.call(this)},setHandler:function(b,a){this.handler=b;if(arguments.length>1){this.scope=a}return this},applyText:function(d){d=d==null?"":String(d);var c=this,f=c.btnInnerEl,b=c.btnEl,a=c.text||"";if(d!=a){c.text=d;if(c.rendered){f.setHtml(d||"&#160;");b[d?"addCls":"removeCls"](c._textCls);b[d?"removeCls":"addCls"](c._noTextCls);c.updateLayout()}c.fireEvent("textchange",c,a,d)}},didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},setPressed:function(a){return this.toggle(a!==false)},toggle:function(c,a){var b=this;c=c===undefined?!b.pressed:!!c;if(c!==b.pressed){b[c?"addCls":"removeCls"](b._pressedCls);b.pressed=c;if(!a){b.fireEvent("toggle",b,c);Ext.callback(b.toggleHandler,b.scope,[b,c],0,b);if(b.reference&&b.publishState){b.publishState("pressed",c)}}}return b},maybeShowMenu:function(){var a=this;if(a.menu&&!a.hasVisibleMenu()&&!a.ignoreNextClick){a.showMenu(true)}},showMenu:function(b){var a=this,c=a.menu;if(a.rendered){if(a.tooltip&&Ext.quickTipsActive&&a.getTipAttr()!="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.el)}if(c.isVisible()){c.hide()}if(!b||a.showEmptyMenu||c.items.getCount()>0){c.showBy(a.el,a.menuAlign)}}return a},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onTouchStart:function(a){this.doPreventDefault(a)},onClick:function(b){var a=this;a.doPreventDefault(b);if(b.type!=="keydown"&&b.button){return}if(!a.disabled){a.doToggle();a.maybeShowMenu();a.fireHandler(b)}},doPreventDefault:function(a){if(a&&(this.preventDefault||(this.disabled&&this.getHref()))){a.preventDefault()}},fireHandler:function(b){var a=this;if(a.fireEvent("click",a,b)!==false){Ext.callback(a.handler,a.scope,[a,b],0,a)}},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==false||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,true,true)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,true,true)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(c){var a=this,b=a.overMenuTrigger;if(a.split){if(a.isWithinTrigger(c)){if(!b){a.onMenuTriggerOver(c)}}else{if(b){a.onMenuTriggerOut(c)}}}},isWithinTrigger:function(d){var c=this,b=c.el,f,a;f=(c.arrowAlign==="right")?d.getX()-c.getX():d.getY()-b.getY();a=c.getTriggerRegion();return f>a.begin&&f<a.end},getTriggerRegion:function(){var d=this,f=d._triggerRegion,c=d.arrowAlign==="right",b=c?"getRight":"getBottom",a=c?d.getWidth():d.getHeight();f.begin=a-(d.el[b]()-d.btnEl[b]());f.end=a;return f},onMouseEnter:function(a){this.fireEvent("mouseover",this,a)},onMouseLeave:function(a){this.fireEvent("mouseout",this,a)},onMenuTriggerOver:function(c){var b=this,a=b.arrowTooltip;b.overMenuTrigger=true;if(b.split&&a){b.btnWrap.dom.setAttribute(b.getTipAttr(),a)}b.fireEvent("menutriggerover",b,b.menu,c)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;if(a.split&&a.arrowTooltip){a.btnWrap.dom.setAttribute(a.getTipAttr(),"")}a.fireEvent("menutriggerout",a,a.menu,b)},enable:function(a){var b=this;Ext.Component.prototype.enable.apply(this,arguments);b.removeCls(b._disabledCls);if(b.rendered){b.el.dom.setAttribute("tabindex",b.tabIndex);if(b.href){b.el.dom.href=b.href}}return b},disable:function(a){var b=this;Ext.Component.prototype.disable.apply(this,arguments);b.addCls(b._disabledCls);b.removeCls(b.overCls);if(b.rendered){b.el.dom.removeAttribute("tabindex");if(b.href){b.el.dom.removeAttribute("href")}}return b},setScale:function(c){var a=this,b=a.ui.replace("-"+a.scale,"");if(!Ext.Array.contains(a.allowedScales,c)){throw ("#setScale: scale must be an allowed scale ("+a.allowedScales.join(", ")+")")}a.scale=c;a.setUI(b)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+"-"+a.scale}Ext.Component.prototype.setUI.call(this,b)},onMouseDown:function(b){var a=this;if(Ext.isIE){a.getFocusEl().focus()}if(!a.disabled&&b.button===0){Ext.button.Manager.onButtonMousedown(a,b);a.addCls(a._pressedCls)}},onMouseUp:function(b){var a=this;if(!a.isDestroyed&&b.button===0){if(!a.pressed){a.removeCls(a._pressedCls)}}},onMenuShow:function(){var a=this;a.ignoreNextClick=0;a.addCls(a._menuActiveCls);a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this,c=a.menuClickBuffer;a.removeCls(a._menuActiveCls);if(c){a.ignoreNextClick=Ext.defer(a.restoreClick,c,a)}a.fireEvent("menuhide",a,a.menu);a.focus()},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(a,c){var b=this;if(b.menu&&!b.disabled){b.showMenu();c.stopEvent();return false}},updateArrowVisible:function(b){var a=this;if(a.rendered){if(b){if(a.menu||a.isSplitButton){a.split=true;a._addSplitCls()}}else{a._removeSplitCls();a.split=false}}return b},privates:{addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var a=this;a.btnWrap.addCls(a.getSplitCls());if(Ext.isOpera12m){a.addCls(a._operaArrowCls+"-"+a.arrowAlign)}},getFocusEl:function(){return this.el},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var a=this;a.btnWrap.removeCls(a.getSplitCls());if(Ext.isOpera12m){a.removeCls(a._operaArrowCls+"-"+a.arrowAlign)}},_syncHasIconCls:function(){var b=this,a=b.btnEl,c=b._hasIconCls;if(a){a[b._hasIcon()?"addCls":"removeCls"]([c,c+"-"+b.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a)}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Menu",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="x-toolbar-no-items" role="menuitem">(None)</div>',menuCls:"x-box-menu",constructor:function(a){var b=this;Ext.layout.container.boxOverflow.None.prototype.constructor.apply(this,arguments);b.menuItems=[]},beginLayout:function(a){Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments);this.clearOverflow(a)},beginLayoutCycle:function(b,a){Ext.layout.container.boxOverflow.None.prototype.beginLayoutCycle.apply(this,arguments);if(!a){this.clearOverflow(b);this.layout.cacheChildItems(b)}},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},getSuffixConfig:function(){var d=this,c=d.layout,a=c.owner,b=a.id;d.menu=new Ext.menu.Menu({listeners:{scope:d,beforeshow:d.beforeMenuShow}});d.menuTrigger=new Ext.button.Button({id:b+"-menu-trigger",cls:d.menuCls+"-after x-toolbar-item",plain:a.usePlainButtons,ownerCt:a,ownerLayout:c,iconCls:"x-"+d.getOwnerType(a)+"-more-icon",ui:a.defaultButtonUI||"default",menu:d.menu,showEmptyMenu:true,getSplitCls:function(){return""}});return d.menuTrigger.getRenderTree()},getOverflowCls:function(a){return this.menuCls+"-body-"+a},handleOverflow:function(c){var b=this,a=b.layout;b.showTrigger(c);if(a.direction!=="vertical"){b.menuTrigger.setLocalY((c.state.boxPlan.maxSize-b.menuTrigger[a.names.getHeight]())/2)}return{reservedSpace:b.triggerTotalWidth}},captureChildElements:function(){var a=this,c=a.menuTrigger,b=a.layout.names;if(c.rendering){c.finishRender();a.triggerTotalWidth=c[b.getWidth]()+c.el.getMargin(b.parallelMargins)}},clearOverflow:function(h){var g=this,b=g.menuItems,f,c=0,d=b.length,a=g.layout.owner,j=a._asLayoutRoot;a.suspendLayouts();g.captureChildElements();g.hideTrigger();a.resumeLayouts();for(;c<d;c++){f=b[c];f.suspendLayouts();f.show();f.resumeLayouts(j)}b.length=0},showTrigger:function(c){var o=this,k=o.layout,a=k.owner,n=k.names,r=n.x,f=n.width,p=c.state.boxPlan,b=p.targetSize[f],h=c.childItems,l=h.length,g=o.menuTrigger,q,j,d,m;g.suspendLayouts();g.show();g.resumeLayouts(o._asLayoutRoot);b-=o.triggerTotalWidth;a.suspendLayouts();o.menuItems.length=0;for(d=0;d<l;d++){q=h[d];m=q.props;if(m[r]+m[f]>b){j=q.target;o.menuItems.push(j);j.hide()}}a.resumeLayouts()},hideTrigger:function(){var a=this.menuTrigger;if(a){a.hide()}},beforeMenuShow:function(j){var h=this,b=h.menuItems,d=0,a=b.length,g,f,c=function(l,k){return l.isXType("buttongroup")&&!(k instanceof Ext.toolbar.Separator)};j.suspendLayouts();h.clearMenu();j.removeAll();for(;d<a;d++){g=b[d];if(!d&&(g instanceof Ext.toolbar.Separator)){continue}if(f&&(c(g,f)||c(f,g))){j.add("-")}h.addComponentToMenu(j,g);f=g}if(j.items.length<1){j.add(h.noItemsMenuText)}j.resumeLayouts()},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]);Ext.applyIf(b,{text:c.overflowText||c.text,hideOnClick:a,destroyMenu:false,listeners:{}});if(c.isFormField){b.value=c.getValue();b.listeners.change=function(h,g,f){c.setValue(g)}}else{if(d||c.enableToggle){Ext.apply(b,{hideOnClick:false,group:d,checked:c.pressed,handler:function(f,g){c.onClick(g)}})}}if(c.isButton&&!c.changeListenersAdded){c.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle});c.changeListenersAdded=true}delete b.margin;delete b.ownerCt;delete b.xtype;delete b.id;delete b.itemId;return b},onButtonAttrChange:function(a){var b=a.overflowClone;b.suspendLayouts();b.setText(a.text);b.setIcon(a.icon);b.setIconCls(a.iconCls);b.resumeLayouts(true)},onButtonToggle:function(a,b){if(a.overflowClone.checked!==b){a.overflowClone.setChecked(b)}},addComponentToMenu:function(g,c){var f=this,d,b,a;if(c instanceof Ext.toolbar.Fill){return}else{if(c instanceof Ext.toolbar.Separator){g.add("-")}else{if(c.isComponent){if(c.isXType("splitbutton")){c.overflowClone=g.add(f.createMenuConfig(c,true))}else{if(c.isXType("button")){c.overflowClone=g.add(f.createMenuConfig(c,!c.menu))}else{if(c.isXType("buttongroup")){b=c.items.items;a=b.length;for(d=0;d<a;d++){f.addComponentToMenu(g,b[d])}}else{c.overflowClone=g.add(Ext.create(Ext.getClassName(c),f.createMenuConfig(c)))}}}}}}},clearMenu:function(){var f=this.menu,b,c,a,d;if(f&&f.items){b=f.items.items;a=b.length;for(c=0;c<a;c++){d=b[c];if(d.setMenu){d.setMenu(null)}}}},destroy:function(){var a=this.menuTrigger;if(a&&!this.layout.owner.items.contains(a)){delete a.ownerCt}Ext.destroy(this.menu,a)}},1,0,0,0,["box.overflow.Menu","box.overflow.menu"],0,[Ext.layout.container.boxOverflow,"Menu",Ext.layout.boxOverflow,"Menu"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.scrollPosition=0;b.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(f){var h=this,g=h.layout,b=g.owner,j="x-",d=h.getOwnerType(b),a=h.scrollerCls,c=a+" "+a+"-"+g.names[f]+" "+a+"-"+d+" "+a+"-"+d+"-"+b.ui;if(b.plain){c+=" "+a+"-plain"}return c},getOverflowCls:function(a){return this.scrollerCls+"-body-"+a},beginLayout:function(b){var a=this.layout;b.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(f){var d=this,h=f.state.boxPlan,c=d.layout,g=c.names,j=Math.min(d.getMaxScrollPosition(),f.innerCtScrollPos),a,b;if(h&&h.tooNarrow){a=f.childItems[f.childItems.length-1].props;d.scrollSize=a[g.x]+a[g.width];d.updateScrollButtons()}c.innerCt[g.setScrollLeft](j);Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,f)},handleOverflow:function(b){var h=this,g=h.layout.names,j=g.getWidth,k=g.parallelMargins,c,f,d,a;h.showScrollers();d=h.getBeforeScroller();a=h.getAfterScroller();c=d[j]()+a[j]()+d.getMargin(k)+a.getMargin(k);f=b.targetContext.getPaddingInfo()[g.width];return{reservedSpace:Math.max(c-f,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(g,d,h){var f=this,c=f.layout.owner,b=f.scrollerCls,a;a=c.el.getById(c.id+g);a.addClsOnOver(b+"-hover");a.addClsOnClick(b+"-pressed");a.setVisibilityMode(Ext.Element.DISPLAY);f[d]=new Ext.util.ClickRepeater(a,{interval:f.scrollRepeatInterval,handler:h,scope:f});return a},createWheelListener:function(){var a=this;a.layout.innerCt.on({mousewheel:function(b){a.scrollBy(a.getWheelDelta(b)*a.wheelIncrement*-1,false)},stopEvent:true})},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;a.createWheelListener();a.getBeforeScroller().show();a.getAfterScroller().show();a.layout.owner.addClsWithUI(a.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var b=this,c=b.getBeforeScroller(),a=b.getAfterScroller();if(c){c.hide();a.hide();b.layout.owner.removeClsWithUI(b.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){var a=this;Ext.destroy(a.beforeRepeater,a.afterRepeater,a._beforeScroller,a._afterScroller)},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var b=this,d=b.getBeforeScroller(),a=b.getAfterScroller(),c;if(!d||!a){return}c=b.scrollerCls+"-disabled";d[b.atExtremeBefore()?"addCls":"removeCls"](c);a[b.atExtremeAfter()?"addCls":"removeCls"](c);b.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var c=this,b=c.layout,a;if(isNaN(c.scrollPosition)){a=b.innerCt[b.names.getScrollLeft]()}else{a=c.scrollPosition}return a},getMaxScrollPosition:function(){var b=this,a=b.layout,c=b.scrollSize-a.innerCt[a.names.getWidth]();return(c<0)?0:c},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var c=this,d=c.getBeforeScroller(),b=c.getAfterScroller(),f=c.layout.names,a=c.scrollerCls;d.removeCls(a+"-"+f.beforeY);b.removeCls(a+"-"+f.afterY);d.addCls(a+"-"+f.beforeX);b.addCls(a+"-"+f.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(a,b){var g=this,f=g.layout,h=f.names,d=g.getScrollPosition(),c=Ext.Number.constrain(a,0,g.getMaxScrollPosition());if(c!=d&&!g.scrolling){g.scrollPosition=NaN;if(b===undefined){b=g.animateScroll}f.innerCt[h.scrollTo](h.beforeScrollX,c,b?g.getScrollAnim():false);if(b){g.scrolling=true}else{g.updateScrollButtons()}g.fireEvent("scroll",g,c,b?g.getScrollAnim():false)}},scrollToItem:function(l,c){var k=this,g=k.layout,d=g.owner,j=g.names,b=g.innerCt,a,f,h;l=k.getItem(l);if(l!==undefined){if(l==d.items.first()){h=0}else{if(l===d.items.last()){h=k.getMaxScrollPosition()}else{a=k.getItemVisibility(l);if(!a.fullyVisible){f=l.getBox(false,true);h=f[j.x];if(a.hiddenEnd){h-=(b[j.getWidth]()-f[j.width])}}}}if(h!==undefined){k.scrollTo(h,c)}}},getItemVisibility:function(k){var h=this,b=h.getItem(k).getBox(true,true),c=h.layout,g=c.names,f=b[g.x],d=f+b[g.width],a=h.getScrollPosition(),j=a+c.innerCt[g.getWidth]();return{hiddenStart:f<a,hiddenEnd:d>j,fullyVisible:f>a&&d<j}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:"x-dd-drag-current",_execOnAll:function(c,b){var f=this.ids,d,a,h,g;for(d in f){if(f.hasOwnProperty(d)){g=f[d];for(a in g){if(g.hasOwnProperty(a)){h=g[a];if(!this.isTypeOfDD(h)){continue}h[c].apply(h,b)}}}}},addListeners:function(){var a=this;a.init();Ext.getDoc().on({mouseup:a.handleMouseUp,mousemove:{fn:a.handleMouseMove,capture:false},dragstart:a.preventDrag,drag:a.preventDrag,dragend:a.preventDrag,capture:true,scope:a});Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},preventDrag:function(a){if(this.isMouseDown){a.stopPropagation()}},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:8,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){if(!this.ids[a]){this.ids[a]={}}var b=this.ids[a];if(b&&b[c.id]){delete b[c.id]}},_remove:function(h,b){var f=this,c=f.ids,a=h.groups,d;if(f.clearingAll){return}if(f.dragCurrent===h){f.dragCurrent=null}for(d in a){if(a.hasOwnProperty(d)){if(b){delete c[d]}else{if(c[d]){delete c[d][h.id]}}}}delete f.handleIds[h.id]},regHandle:function(b,a){if(!this.handleIds[b]){this.handleIds[b]={}}this.handleIds[b][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(g,b){var f=[],d,c,a;for(d in g.groups){for(c in this.ids[d]){a=this.ids[d][c];if(!this.isTypeOfDD(a)){continue}if(!b||a.isTarget){f[f.length]=a}}}return f},isLegalTarget:function(f,d){var b=this.getRelated(f,true),c,a;for(c=0,a=b.length;c<a;++c){if(b[c].id==d.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(b,a){return(this.handleIds[b]&&this.handleIds[b][a])},getDDById:function(d,c){var b,a;for(b in this.ids){a=this.ids[b][d];if(a instanceof Ext.dd.DDTarget||c){return a}}return null},handleMouseDown:function(f,d){var b=this,c,a;b.isMouseDown=true;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}b.currentPoint=f.getPoint();if(b.dragCurrent){b.handleMouseUp(f)}b.mousedownEvent=f;b.currentTarget=f.getTarget();b.dragCurrent=d;a=d.getEl();Ext.fly(a).setCapture();c=f.getXY();b.startX=c[0];b.startY=c[1];b.offsetX=b.offsetY=0;b.deltaX=b.startX-a.offsetLeft;b.deltaY=b.startY-a.offsetTop;b.dragThreshMet=false},startDrag:function(b,f){var c=this,d=c.dragCurrent,a;clearTimeout(c.clickTimeout);if(d){d.b4StartDrag(b,f);d.startDrag(b,f);a=d.getDragEl();if(a){Ext.fly(a).addCls(c.dragCls)}}c.dragThreshMet=true},handleMouseUp:function(b){var a=this;a.isMouseDown=false;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!a.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(a.clickTimeout);if(a.dragThreshMet){a.fireEvents(b,true)}a.stopDrag(b);a.stopEvent(b)},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(d){var b=this,c=b.dragCurrent,a;if(c){if(b.dragThreshMet){a=c.getDragEl();if(a){Ext.fly(a).removeCls(b.dragCls)}c.b4EndDrag(d);c.endDrag(d)}b.dragCurrent.onMouseUp(d)}b.dragCurrent=null;b.dragOvers={}},handleMouseMove:function(j){var g=this,h=g.dragCurrent,a=g.currentPoint=j.getPoint(),d=a.x,b=a.y,f,c;g.offsetX=d-g.startX;g.offsetY=b-g.startY;if(!h){return true}if(!g.dragThreshMet){f=Math.abs(g.offsetX);c=Math.abs(g.offsetY);if(f>g.clickPixelThresh||c>g.clickPixelThresh){g.startDrag(g.startX,g.startY)}}if(g.dragThreshMet){h.b4Drag(j);h.onDrag(j);if(!h.moveOnly){g.fireEvents(j,false)}}g.stopEvent(j);return true},fireEvents:function(x,m){var z=this,n=Ext.supports.Touch,g=z.dragCurrent,v=z.currentPoint,r=v.x,p=v.y,d,q,f,l,o=[],h=[],k=[],b=[],y=[],w=[],c,t,u,s,a=n?document.documentElement.clientWidth/window.innerWidth:1,j;if(!g||g.isLocked()){return}j=!(g.deltaX<0||g.deltaY<0);if(n||(!z.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&j)){d=g.getDragEl();if(j){d.style.visibility="hidden"}x.target=document.elementFromPoint(r/a,p/a);if(j){d.style.visibility="visible"}}for(t in z.dragOvers){f=z.dragOvers[t];delete z.dragOvers[t];if(!z.isTypeOfDD(f)||f.isDestroyed){continue}if(z.notifyOccluded){if(!this.isOverTarget(v,f,z.mode)){k.push(f)}}else{if(!x.within(f.getEl())){k.push(f)}}h[t]=true}for(s in g.groups){if("string"!=typeof s){continue}for(t in z.ids[s]){f=z.ids[s][t];if(z.isTypeOfDD(f)&&(l=f.getEl())&&(f.isTarget)&&(!f.isLocked())&&(Ext.fly(l).isVisible(true))&&((f!=g)||(g.ignoreSelf===false))){if(z.notifyOccluded){if((f.zIndex=z.getZIndex(l))!==-1){c=true}o.push(f)}else{if(x.within(f.getEl())){o.push(f);break}}}}}if(c){Ext.Array.sort(o,z.byZIndex)}for(t=0,u=o.length;t<u;t++){f=o[t];if(z.isOverTarget(v,f,z.mode)){if(m){y.push(f)}else{if(!h[f.id]){w.push(f)}else{b.push(f)}z.dragOvers[f.id]=f}if(!z.notifyOccluded){break}}}if(z.mode){if(k.length){g.b4DragOut(x,k);g.onDragOut(x,k)}if(w.length){g.onDragEnter(x,w)}if(b.length){g.b4DragOver(x,b);g.onDragOver(x,b)}if(y.length){g.b4DragDrop(x,y);g.onDragDrop(x,y)}}else{for(t=0,u=k.length;t<u;++t){g.b4DragOut(x,k[t].id);g.onDragOut(x,k[t].id)}for(t=0,u=w.length;t<u;++t){g.onDragEnter(x,w[t].id)}for(t=0,u=b.length;t<u;++t){g.b4DragOver(x,b[t].id);g.onDragOver(x,b[t].id)}for(t=0,u=y.length;t<u;++t){g.b4DragDrop(x,y[t].id);g.onDragDrop(x,y[t].id)}}if(m&&!y.length){g.onInvalidDrop(x)}},getZIndex:function(b){var a=document.body,c,d=-1;b=Ext.getDom(b);while(b!==a){if(!isNaN(c=Number(Ext.fly(b).getStyle("zIndex")))){d=c}b=b.parentNode}return d},byZIndex:function(b,a){return b.zIndex<a.zIndex},getBestMatch:function(c){var f=null,b=c.length,d,a;if(b==1){f=c[0]}else{for(d=0;d<b;++d){a=c[d];if(a.cursorIsOver){f=a;break}else{if(!f||f.overlap.getArea()<a.overlap.getArea()){f=a}}}}return f},refreshCache:function(b){var a,c,d,f;for(a in b){if("string"!=typeof a){continue}for(c in this.ids[a]){d=this.ids[a][c];if(this.isTypeOfDD(d)){f=this.getLocation(d);if(f){this.locationCache[d.id]=f}else{delete this.locationCache[d.id]}}}}},verifyEl:function(b){if(b){var a;if(Ext.isIE){try{a=b.offsetParent}catch(c){}}else{a=b.offsetParent}if(a){return true}}return false},getLocation:function(h){if(!this.isTypeOfDD(h)){return null}if(h.getRegion){return h.getRegion()}var f=h.getEl(),m,d,c,o,n,p,a,k,g;try{m=Ext.fly(f).getXY()}catch(j){}if(!m){return null}d=m[0];c=d+f.offsetWidth;o=m[1];n=o+f.offsetHeight;p=o-h.padding[0];a=c+h.padding[1];k=n+h.padding[2];g=d-h.padding[3];return new Ext.util.Region(p,a,k,g)},isOverTarget:function(k,a,c){var f=this.locationCache[a.id],j,g,b,d,h;if(!f||!this.useCache){f=this.getLocation(a);this.locationCache[a.id]=f}if(!f){return false}a.cursorIsOver=f.contains(k);j=this.dragCurrent;if(!j||!j.getTargetCoord||(!c&&!j.constrainX&&!j.constrainY)){return a.cursorIsOver}a.overlap=null;g=j.getTargetCoord(k.x,k.y);b=j.getDragEl();d=new Ext.util.Region(g.y,g.x+b.offsetWidth,g.y+b.offsetHeight,g.x);h=d.intersect(f);if(h){a.overlap=h;return(c)?true:a.cursorIsOver}else{return false}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var c=this,a=c.elementCache,b;if(c.dragCurrent){c.stopDrag();c.dragCurrent=null}c.clearingAll=true;c._execOnAll("unreg",[]);delete c.clearingAll;for(b in a){delete a[b]}c.elementCache={};c.ids={};c.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(c,a){if(c.swapNode){c.swapNode(a)}else{var d=a.parentNode,b=a.nextSibling;if(b==c){d.insertBefore(c,a)}else{if(a==c.nextSibling){d.insertBefore(a,c)}else{c.parentNode.replaceChild(a,c);d.insertBefore(c,b)}}}},getScroll:function(){var d=window.document,f=d.documentElement,a=d.body,c=0,b=0;if(f&&(f.scrollTop||f.scrollLeft)){c=f.scrollTop;b=f.scrollLeft}else{if(a){c=a.scrollTop;b=a.scrollLeft}}return{top:c,left:b}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,c){var b=Ext.fly(c).getXY();Ext.fly(a).setXY(b)},numericSort:function(d,c){return(d-c)},handleWasClicked:function(a,c){if(this.isHandle(c,a.id)){return true}else{var b=a.parentNode;while(b){if(this.isHandle(c,b.id)){return true}else{b=b.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(a){Ext.onReady(function(){a.addListeners()})}));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">&#160;',"</div>","</tpl>"],isSplitter:true,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var b=this,c=b.getCollapseTarget(),a=b.collapsible;Ext.Component.prototype.beforeRender.call(this);if(c.collapsed){b.addCls(b.collapsedClsInternal)}if(!b.canResize){b.addCls(b.baseCls+"-noresize")}Ext.applyIf(b.renderData,{collapseDir:b.getCollapseDirection(),collapsible:(a!==null)?a:c.collapsible});b.protoEl.unselectable()},onRender:function(){var c=this,b,a;Ext.Component.prototype.onRender.apply(this,arguments);if(c.performCollapse!==false){if(c.renderData.collapsible){c.mon(c.collapseEl,"click",c.toggleTargetCmp,c)}if(c.collapseOnDblClick){c.mon(c.el,"dblclick",c.toggleTargetCmp,c)}}c.mon(c.getCollapseTarget(),{collapse:c.onTargetCollapse,expand:c.onTargetExpand,beforeexpand:c.onBeforeTargetExpand,beforecollapse:c.onBeforeTargetCollapse,scope:c});if(c.canResize){c.tracker=Ext.create(c.getTrackerConfig());c.relayEvents(c.tracker,["beforedragstart","dragstart","dragend"])}b=c.collapseEl;if(b){b.lastCollapseDirCls=c.collapseDirProps[c.collapseDirection].cls}},getCollapseDirection:function(){var g=this,c=g.collapseDirection,f,a,b,d;if(!c){f=g.collapseTarget;if(f.isComponent){c=f.collapseDirection}if(!c){d=g.ownerCt.layout.type;if(f.isComponent){b=g.ownerCt.items;a=Number(b.indexOf(f)===b.indexOf(g)-1)<<1|Number(d==="hbox")}else{a=Number(g.collapseTarget==="prev")<<1|Number(d==="hbox")}c=["bottom","right","top","left"][a]}g.collapseDirection=c}g.setOrientation((c==="top"||c==="bottom")?"horizontal":"vertical");return c},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget==="prev"?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;if(a){a.setDisplayed(b)}},onBeforeTargetExpand:function(a){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(a){this.el.addCls(this.collapsedClsInternal+" "+(this.collapsedCls||""));this.setCollapseEl("")},onTargetExpand:function(a){this.el.removeCls(this.collapsedClsInternal+" "+(this.collapsedCls||""));this.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var c=this,b=c.collapseEl,d=c.collapseDirProps[c.collapseDirection],a;if(b){a=b.lastCollapseDirCls;if(a){b.removeCls(a)}b.addCls(b.lastCollapseDirCls=d.cls)}},applyOrientation:function(){var f=this,c=f.orientation,d=f.orientationProps[c],g=f.size,b=d.fixedAxis,h=d.stretchedAxis,a=f.baseCls+"-";f[c]=true;f[d.opposite]=false;if(!f.hasOwnProperty(b)||f[b]==="100%"){f[b]=g}if(!f.hasOwnProperty(h)||f[h]===g){f[h]="100%"}f.removeCls(a+d.opposite);f.addCls(a+c)},setOrientation:function(a){var b=this;if(b.orientation!==a){b.orientation=a;b.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(d,b){var c=this.getCollapseTarget(),f=c.placeholder,a;if(Ext.isFunction(c.expand)&&Ext.isFunction(c.collapse)){if(f&&!f.hidden){a=true}else{a=!c.hidden}if(a){if(c.collapsed){c.expand()}else{if(c.collapseDirection){c.collapse()}else{c.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var a=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&a.el){a.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.beforeDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));Ext.define("ExtThemeNeptune.resizer.Splitter",{override:"Ext.resizer.Splitter",size:8});(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:false,enableSplitters:true,overflowHandler:{$value:null,merge:function(b,a){if(typeof b=="string"){b={type:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},padding:0,pack:"start",stretchMaxPartner:undefined,vertical:false,alignRoundingMethod:"round"},scrollOffset:0,itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",availableSpaceOffset:0,reserveOffset:true,manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(a){var c=this,b;Ext.layout.container.Container.prototype.constructor.apply(this,arguments);c.setVertical(c.vertical);c.flexSortFn=c.flexSort.bind(c);b=typeof c.padding;if(b==="string"||b==="number"){c.padding=Ext.util.Format.parseBox(c.padding);c.padding.height=c.padding.top+c.padding.bottom;c.padding.width=c.padding.left+c.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(p,q){var l=this,j=l.sizePolicy,h=l.align,g=p.flex,n=h,k=l.names,b=p[k.width],o=p[k.height],d=l._percentageRe,c=d.test(b),f=(h==="stretch"),a=(h==="stretchmax"),m=l.constrainAlign;if(!q&&(f||g||c||(m&&!a))){q=l.owner.getSizeModel()}if(f){if(!d.test(o)&&q[k.height].shrinkWrap){n="stretchmax"}}else{if(!a){if(d.test(o)){n="stretch"}else{if(m&&!q[k.height].shrinkWrap){n="stretchmax"}else{n=""}}}}if(g||c){if(!q[k.width].shrinkWrap){j=j.flex}}return j[n]},flexSort:function(p,o){var m=this.names.maxWidth,f=this.names.minWidth,n=Infinity,l=p.target,s=o.target,j=l.flex,h=s.flex,t=0,c,q,k,d,r,g;k=l[m]||n;d=s[m]||n;c=l[f]||0;q=s[f]||0;r=isFinite(c)||isFinite(q);g=isFinite(k)||isFinite(d);if(r||g){if(g){t=k-d}if(t===0&&r){t=q-c}if(t===0){if(g){t=h-j}else{t=j-h}}}return t},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},roundFlex:function(a){return Math.ceil(a)},beginCollapse:function(b){var a=this;if(a.direction==="vertical"&&b.collapsedVertical()){b.collapseMemento.capture(["flex"]);delete b.flex}else{if(a.direction==="horizontal"&&b.collapsedHorizontal()){b.collapseMemento.capture(["flex"]);delete b.flex}}},beginExpand:function(a){a.collapseMemento.restore(["flex"])},beginLayout:function(f){var d=this,a=d.owner,h=a.stretchMaxPartner,c=d.innerCt.dom.style,g=d.names,b=d.overflowHandler;f.boxNames=g;if(b){b.beginLayout(f)}if(typeof h==="string"){h=Ext.getCmp(h)||a.query(h)[0]}f.stretchMaxPartner=h&&f.context.getCmp(h);Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);f.innerCtContext=f.getEl("innerCt",d);f.targetElContext=f.getEl("targetEl",d);d.scrollParallel=a.scrollFlags[g.x];d.scrollPerpendicular=a.scrollFlags[g.y];if(d.scrollParallel){d.scrollPos=a.getTargetEl().dom[g.scrollLeft]}c.width="";c.height=""},beginLayoutCycle:function(b,k){var g=this,d=g.align,f=b.boxNames,j=g.pack,a=g._centerRe,h=f.heightModel,c=g.overflowHandler;if(c){c.beginLayoutCycle(b,k)}Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);b.parallelSizeModel=b[f.widthModel];b.perpendicularSizeModel=b[h];b.boxOptions={align:d={stretch:d==="stretch",stretchmax:d==="stretchmax",center:a.test(d),bottom:g._endRe.test(d)},pack:j={center:a.test(j),end:j==="end"}};if(d.stretch&&b.perpendicularSizeModel.shrinkWrap){d.stretchmax=true;d.stretch=false}d.nostretch=!(d.stretch||d.stretchmax);if(b.parallelSizeModel.shrinkWrap){j.center=j.end=false}g.cacheFlexes(b);g.targetEl.setWidth(20000)},cacheFlexes:function(k){var u=this,l=k.boxNames,a=l.widthModel,d=l.heightModel,c=k.boxOptions.align.nostretch,o=0,b=k.childItems,q=b.length,s=[],m=0,j=l.minWidth,g=u._percentageRe,r=0,t=0,f,n,p,h;while(q--){n=b[q];f=n.target;if(n[a].calculated){n.flex=p=f.flex;if(p){o+=p;s.push(n);m+=f[j]||0}else{h=g.exec(f[l.width]);n.percentageParallel=parseFloat(h[1])/100;++r}}if(c&&n[d].calculated){h=g.exec(f[l.height]);n.percentagePerpendicular=parseFloat(h[1])/100;++t}}k.flexedItems=s;k.flexedMinSize=m;k.totalFlex=o;k.percentageWidths=r;k.percentageHeights=t;Ext.Array.sort(s,u.flexSortFn)},calculate:function(g){var d=this,c=d.getContainerSize(g),j=g.boxNames,f=g.state,h=f.boxPlan||(f.boxPlan={}),b=g.targetContext,a=d.overflowHandler;h.targetSize=c;if(!f.parallelDone){f.parallelDone=d.calculateParallel(g,j,h)}if(!f.perpendicularDone){f.perpendicularDone=d.calculatePerpendicular(g,j,h)}if(f.parallelDone&&f.perpendicularDone){d.publishInnerCtSize(g,d.reserveOffset?d.availableSpaceOffset:0);if(d.done&&g.boxOptions.align.stretchmax&&!f.stretchMaxDone){d.calculateStretchMax(g,j,h);f.stretchMaxDone=true}if(a){a.calculate(g)}}else{d.done=false}},calculateParallel:function(l,o,b){var G=this,A=o.width,a=l.childItems,t=o.beforeX,f=o.afterX,r=o.setWidth,B=a.length,y=l.flexedItems,s=y.length,w=l.boxOptions.pack,n=G.padding,d=b.targetSize,j=d[A],C=0,g=n[t],F=g+n[f]+G.scrollOffset+(G.reserveOffset?G.availableSpaceOffset:0),x=Ext.getScrollbarSize()[o.width],v,m,h,z,p,u,E,q,D,c,k;if(!l.parallelSizeModel.shrinkWrap&&!d[o.gotWidth]){return false}if(x&&G.scrollPerpendicular&&l.parallelSizeModel.shrinkWrap&&!l.boxOptions.align.stretch&&!l.perpendicularSizeModel.shrinkWrap){if(!l.state.perpendicularDone){return false}D=true}for(v=0;v<B;++v){p=a[v];m=p.marginInfo||p.getMarginInfo();C+=m[A];if(!p[o.widthModel].calculated){c=p.getProp(A);F+=c;if(isNaN(F)){return false}}}F+=C;if(l.percentageWidths){k=j-C;if(isNaN(k)){return false}for(v=0;v<B;++v){p=a[v];if(p.percentageParallel){c=Math.ceil(k*p.percentageParallel);c=p.setWidth(c);F+=c}}}if(l.parallelSizeModel.shrinkWrap){b.availableSpace=0;b.tooNarrow=false}else{b.availableSpace=j-F;b.tooNarrow=b.availableSpace<l.flexedMinSize;if(b.tooNarrow&&Ext.getScrollbarSize()[o.height]&&G.scrollParallel&&l.state.perpendicularDone){l.state.perpendicularDone=false;for(v=0;v<B;++v){a[v].invalidate()}}}q=F;h=b.availableSpace;z=l.totalFlex;for(v=0;v<s;v++){p=y[v];u=p.flex;E=G.roundFlex((u/z)*h);E=p[r](E);q+=E;h=Math.max(0,h-E);z-=u}if(w.center){g+=h/2;if(g<0){g=0}}else{if(w.end){g+=h}}for(v=0;v<B;++v){p=a[v];m=p.marginInfo;g+=m[t];p.setProp(o.x,g);g+=m[f]+p.props[A]}q+=l.targetContext.getPaddingInfo()[A];l.state.contentWidth=q;if(D&&(l.peek(o.contentHeight)>b.targetSize[o.height])){q+=x;l[o.hasOverflowY]=true;l.target.componentLayout[o.setWidthInDom]=true;l[o.invalidateScrollY]=Ext.isIE8}l[o.setContentWidth](q);return true},calculatePerpendicular:function(u,K,z){var t=this,d=u.perpendicularSizeModel.shrinkWrap,b=z.targetSize,j=u.childItems,y=j.length,m=Math.max,l=K.height,n=K.setHeight,h=K.beforeY,s=K.y,H=t.padding,k=H[h],o=b[l]-k-H[K.afterY],E=u.boxOptions.align,p=E.stretch,q=E.stretchmax,N=E.center,M=E.bottom,G=t.constrainAlign,F=0,B=0,D=t.onBeforeConstrainInvalidateChild,A=t.onAfterConstrainInvalidateChild,a=Ext.getScrollbarSize().height,x,I,C,v,w,c,r,f,L,J,g;if(p||((N||M)&&!d)){if(isNaN(o)){return false}}if(!p&&!u.parallelSizeModel.shrinkWrap&&!u.state.parallelDone&&t.scrollParallel){return false}if(t.scrollParallel&&z.tooNarrow){if(d){J=true}else{o-=a;z.targetSize[l]-=a}}if(p){c=o}else{for(I=0;I<y;I++){r=j[I];v=(r.marginInfo||r.getMarginInfo())[l];if(!(g=r.percentagePerpendicular)){C=r.getProp(l)}else{++B;if(d){continue}else{C=g*o-v;C=r[K.setHeight](C)}}if(!d&&G&&r[K.heightModel].shrinkWrap&&C>o){r.invalidate({before:D,after:A,layout:t,childHeight:o,names:K});u.state.parallelDone=false}if(isNaN(F=m(F,C+v,r.target[K.minHeight]||0))){return false}}if(J){F+=a;u[K.hasOverflowX]=true;u.target.componentLayout[K.setHeightInDom]=true;u[K.invalidateScrollX]=Ext.isIE8}f=u.stretchMaxPartner;if(f){u.setProp("maxChildHeight",F);L=f.childItems;if(L&&L.length){F=m(F,f.getProp("maxChildHeight"));if(isNaN(F)){return false}}}u[K.setContentHeight](F+t.padding[l]+u.targetContext.getPaddingInfo()[l]);if(J){F-=a}z.maxSize=F;if(q){c=F}else{if(N||M||B){if(G){c=d?F:o}else{c=d?F:m(o,F)}c-=u.innerCtContext.getBorderInfo()[l]}}}for(I=0;I<y;I++){r=j[I];v=r.marginInfo||r.getMarginInfo();x=k+v[h];if(p){r[n](c-v[l])}else{g=r.percentagePerpendicular;if(d&&g){v=r.marginInfo||r.getMarginInfo();C=g*c-v[l];C=r.setHeight(C)}if(N){w=c-r.props[l];if(w>0){x=k+Math[t.alignRoundingMethod](w/2)}}else{if(M){x=m(0,c-x-r.props[l])}}}r.setProp(s,x)}return true},onBeforeConstrainInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMin){b[c]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(b,a){var c=a.names;b.setProp(c.beforeY,0);if(b[c.heightModel].calculated){b[c.setHeight](a.childHeight)}},calculateStretchMax:function(c,k,m){var l=this,h=k.height,n=k.width,g=c.childItems,a=g.length,p=m.maxSize,o=l.onBeforeStretchMaxInvalidateChild,f=l.onAfterStretchMaxInvalidateChild,q,j,d,b;for(d=0;d<a;++d){q=g[d];j=q.props;b=p-q.getMarginInfo()[h];if(b!==j[h]||q[k.heightModel].constrained){q.invalidate({before:o,after:f,layout:l,childWidth:j[n],childHeight:b,childX:j.x,childY:j.y,names:k})}}},onBeforeStretchMaxInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMax){b[c]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(d,c){var f=c.names,a=c.childHeight,b=c.childWidth;d.setProp("x",c.childX);d.setProp("y",c.childY);if(d[f.heightModel].calculated){d[f.setHeight](a)}if(d[f.widthModel].calculated){d[f.setWidth](b)}},completeLayout:function(b){var l=this,k=b.boxNames,j=b.invalidateScrollX,h=b.invalidateScrollY,c=l.overflowHandler,f,a,g,d,m;if(c){c.completeLayout(b)}if(j||h){a=l.getTarget();f=a.dom;m=f.style;if(j){g=a.getStyle("overflowX");if(g==="auto"){g=m.overflowX;m.overflowX="scroll"}else{j=false}}if(h){d=a.getStyle("overflowY");if(d==="auto"){d=m.overflowY;m.overflowY="scroll"}else{h=false}}if(j||h){f.scrollWidth;if(j){m.overflowX=g}if(h){m.overflowY=d}}}if(l.scrollParallel){l.owner.getTargetEl().dom[k.scrollLeft]=l.scrollPos}},finishedLayout:function(b){var a=this.overflowHandler;if(a){a.finishedLayout(b)}Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var j=Ext.layout.container.Container.prototype.getLayoutItems.call(this),b=j.length,f,d,c,k,h,g,a;for(c=0;c<b;++c){if((k=j[c]).isSplitter){continue}a=k.splitter;if(k.hidden){if(a){if(!a.hidden){a.hidden=true;if(a.el){a.el.hide()}}}continue}if(a){g=a.collapseTarget==="next"}else{g=false}d=null;if(f&&h){if(h.hidden){h.hidden=false;if(h.el){h.el.show()}}if(g){d=true}}else{if(g){d=!f}}if(d!==null&&a.hidden!==d){a.hidden=d;if(a.el){a.el.setVisible(!d)}}h=!g&&a;f=k}if(f&&h&&!h.hidden){h.hidden=true;if(h.el){h.el.hide()}}return j},getScrollerEl:function(){return this.innerCt},insertSplitter:function(d,c,g,b){var f={xtype:"splitter",id:d.id+"-splitter",hidden:g,splitterFor:d,synthetic:true},a=c+((b.collapseTarget==="prev")?1:0);f[this.names.height]="100%";if(b){Ext.apply(f,b)}d.splitter=this.owner.add(a,f)},publishInnerCtSize:function(a,d){var j=this,h=a.boxNames,g=h.height,l=h.width,f=a.boxOptions.align,p=j.owner.dock,m=j.padding,k=a.state.boxPlan,c=k.targetSize,o=c[g],q=a.innerCtContext,b=(a.parallelSizeModel.shrinkWrap||(k.tooNarrow&&j.scrollParallel)?a.state.contentWidth-a.targetContext.getPaddingInfo()[l]:c[l])-(d||0),n;j.owner.tooNarrow=k.tooNarrow;if(f.stretch){n=o}else{n=k.maxSize+m[h.beforeY]+m[h.afterY]+q.getBorderInfo()[g];if(!a.perpendicularSizeModel.shrinkWrap&&(f.center||f.bottom)){n=Math.max(o,n)}}q[h.setWidth](b);q[h.setHeight](n);a.targetElContext.setWidth(a.innerCtContext.props.width-(this.vertical?0:(d||0)));if(isNaN(b+n)){j.done=false}if(k.calculatedWidth&&(p==="left"||p==="right")){a.setWidth(k.calculatedWidth,true,true)}},onAdd:function(d,a){var c=this,b=c.enableSplitters&&d.split&&!d.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(b){if(b===true){b={collapseTarget:"next"}}else{if(Ext.isString(b)){b={collapseTarget:b==="before"?"next":"prev"}}else{b=Ext.apply({collapseTarget:b.side==="before"?"next":"prev"},b)}}c.insertSplitter(d,a,!!d.hidden,b)}},onRemove:function(b,f){var g=this,j=g.names,a=g.owner,h=b.splitter,c=g.overflowHandler,d;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(h&&a.contains(h)){a.doRemove(h,true);b.splitter=null}if(c){c.onRemove(b)}if(b.layoutMarginCap===g.id){delete b.layoutMarginCap}if(!a.destroying&&!f&&b.rendered){d=b.getEl();if(d){d.setStyle(j.beforeY,"");d.setStyle(j.beforeX,"");d.setStyle("margin","")}}},applyOverflowHandler:function(b,a){var c;if(typeof b==="string"){b={type:b}}c=b.type;if(a&&a.type===b.type){delete b.type;a.setConfig(b);return a}b.layout=this;return Ext.Factory.boxOverflow(b)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler);a.flexSortFn=a.innerCt=null;Ext.layout.container.Container.prototype.destroy.apply(this,arguments)},getRenderData:function(){var a=Ext.layout.container.Container.prototype.getRenderData.call(this);a.targetElCls=this.targetElCls;return a},updateVertical:function(b){var d=(b&&"vbox")||"hbox",c=this.overflowHandler,a=this.owner;Ext.apply(this,this._props[d]);if(c&&a&&a.rendered){c.setVertical(b)}},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:true,vertical:false,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:false,vertical:true,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:false},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:true},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));(Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer"},after:{afterRender:"initFocusableContainer"}},isFocusableContainer:true,enableFocusableContainer:true,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(){if(this.enableFocusableContainer){this.doInitFocusableContainer()}},doInitFocusableContainer:function(){var b=this,a;a=b.getFocusableContainerEl();b.activateFocusableContainerEl(a);b.mon(a,{scope:b,mousedown:b.onFocusableContainerMousedown,focus:b.onFocusableContainerFocus,focusenter:b.onFocusableContainerFocusEnter,focusleave:b.onFocusableContainerFocusLeave});b.focusableKeyNav=b.createFocusableContainerKeyNav(a)},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{ignoreInputFields:true,scope:b,up:b.onFocusableContainerUpKey,down:b.onFocusableContainerDownKey,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey})},destroyFocusableContainer:function(){this.doDestroyFocusableContainer()},doDestroyFocusableContainer:function(){var a=this.focusableKeyNav;if(a){a.destroy();delete this.focusableKeyNav}},getFocusables:function(){return this.items.items},initDefaultFocusable:function(k){var g=this,j=g.activeChildTabIndex,c=false,f,h,b,d,a;f=g.getFocusables();d=f.length;if(!d){return}for(b=0;b<d;b++){h=f[b];if(h.focusable){c=c||h.focusable}else{continue}a=h.getTabIndex();if(a!=null&&a>=j){return}}if(!c){return}h=g.findNextFocusableChild(null,true,f,k);if(h){g.activateFocusable(h)}return h},clearFocusables:function(){var f=this,b,d,c,a;b=f.getFocusables();for(c=0,a=b.length;c<a;c++){d=b[c];if(d.focusable){f.deactivateFocusable(d)}}},activateFocusable:function(c,b){var a=b!=null?b:this.activeChildTabIndex;c.setTabIndex(a)},deactivateFocusable:function(c,b){var a=b!=null?b:this.inactiveChildTabIndex;c.setTabIndex(a)},onFocusableContainerUpKey:function(a){return this.moveChildFocus(a,false)},onFocusableContainerLeftKey:function(a){return this.moveChildFocus(a,false)},onFocusableContainerRightKey:function(a){return this.moveChildFocus(a,true)},onFocusableContainerDownKey:function(a){return this.moveChildFocus(a,true)},getFocusableFromEvent:function(a){var b=Ext.Component.getComponentByElement(a.getTarget());return b},moveChildFocus:function(b,a){var c=this.getFocusableFromEvent(b);return this.focusChild(c,a,b)},focusChild:function(c,a){var b=this.findNextFocusableChild(c,a);if(b){b.focus()}return b},findNextFocusableChild:function(j,h,c,f){var g,b,d,a;c=c||this.getFocusables();b=Ext.Array.indexOf(c,j);h=h===true?1:h===false?-1:h;a=c.length;d=h>0?(b<a?b+h:0):(b>0?b+h:a-1);for(;;d+=h){if(b<0&&(d>=a||d<0)){return null}else{if(d>=a){d=-1;continue}else{if(d<0){d=a;continue}else{if(d===b){return null}}}}g=c[d];if(!g||!g.focusable){continue}if(f||g.isFocusable()){return g}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(a){return this.doFocusableChildAdd(a)},activateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();a.set({tabindex:this.activeChildTabIndex})},deactivateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();a.set({tabindex:this.inactiveChildTabIndex})},doFocusableChildAdd:function(a){if(a.focusable){a.focusableContainer=this;this.deactivateFocusable(a)}},onFocusableChildRemove:function(a){return this.doFocusableChildRemove(a)},doFocusableChildRemove:function(a){delete a.focusableContainer},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.getComponentByElement(b);if(a===this){c.preventDefault()}},onFocusableContainerFocus:function(c){var b=this,a,d;d=b.initDefaultFocusable();if(d){b.deactivateFocusableContainerEl();d.focus()}},onFocusableContainerFocusEnter:function(c){var b=this,a=b.lastFocusedChild;if(a){b.deactivateFocusableContainerEl()}},onFocusableContainerFocusLeave:function(c){var b=this,a=b.lastFocusedChild;b.clearFocusables();if(a){b.activateFocusable(a)}else{b.activateFocusableContainerEl()}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(c){var b=this,a;b.clearFocusables();b.activateFocusable(c);if(c.needArrowKeys){b.guardFocusableChild(c)}},guardFocusableChild:function(d){var c=this,a=c.activeChildTabIndex,b;b=c.findNextFocusableChild(d,-1);if(b){b.setTabIndex(a)}b=c.findNextFocusableChild(d,1);if(b){b.setTabIndex(a)}},afterFocusableChildFocus:function(a){this.lastFocusedChild=a},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildEnable:Ext.privateFn,onFocusableChildDisable:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0));Ext.define("Ext.toolbar.Toolbar",{extend:Ext.container.Container,alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",mixins:[Ext.util.FocusableContainer],isToolbar:true,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:false,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var b=this,a=b.layout;if(b.dock==="right"||b.dock==="left"){b.vertical=true}b.layout=a=Ext.applyIf(Ext.isString(a)?{type:a}:a||{},{type:b.vertical?"vbox":"hbox",align:b.vertical?"stretchmax":"middle"});if(b.overflowHandler){a.overflowHandler=b.overflowHandler}else{if(b.enableOverflow){a.overflowHandler="menu"}}if(b.vertical){b.addClsWithUI("vertical")}if(b.ui==="footer"){b.ignoreBorderManagement=true}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(a){var f=this,b=Ext.container.Container.prototype.getRefItems.apply(this,arguments),d=f.layout,c;if(a&&(f.enableOverflow||(f.overflowHandler==="menu"))){c=d.overflowHandler;if(c&&c.menu){b=b.concat(c.menu.getRefItems(a))}}return b},lookupComponent:function(f){var d=arguments;if(typeof f==="string"){var b=Ext.toolbar.Toolbar,a=b.shortcutsHV[this.vertical?1:0][f]||b.shortcuts[f];if(typeof a==="string"){f={xtype:a}}else{if(a){f=Ext.apply({},a)}else{f={xtype:"tbtext",text:f}}}this.applyDefaults(f);d=[f]}return Ext.container.Container.prototype.lookupComponent.apply(this,d)},onBeforeAdd:function(b){var c=this,d=c.ui==="footer",a=d?c.defaultFooterButtonUI:c.defaultButtonUI;if(b.isSegmentedButton){if(b.getDefaultUI()==="default"&&!b.config.hasOwnProperty("defaultUI")){b.setDefaultUI(a)}}else{if(b.ui==="default"&&!b.hasOwnProperty("ui")){if(b.isButton){b.ui=a}else{if(b.isFormField){b.ui=d?c.defaultFooterFieldUI:c.defaultFieldUI}}}}if(b instanceof Ext.toolbar.Separator){b.setUI((c.vertical)?"vertical":"horizontal")}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(a){Ext.container.Container.prototype.onAdd.apply(this,arguments);this.trackMenu(a)},onRemove:function(a){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(a,true)},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return a},trackMenu:function(c,a){if(this.trackMenus&&c.menu){var d=a?"mun":"mon",b=this;b[d](c,"mouseover",b.onButtonOver,b);b[d](c,"menushow",b.onButtonMenuShow,b);b[d](c,"menuhide",b.onButtonMenuHide,b)}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(a){if(this.activeMenuBtn&&this.activeMenuBtn!==a){this.activeMenuBtn.hideMenu();a.showMenu();this.activeMenuBtn=a}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){delete this.activeMenuBtn}}});Ext.define("ExtThemeNeptune.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",usePlainButtons:false,border:false});Ext.define("Ext.toolbar.TextItem",{extend:Ext.toolbar.Item,alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var a=this;Ext.toolbar.Item.prototype.beforeRender.call(this);Ext.apply(a.renderData,{text:a.text})},setText:function(b){var a=this;a.text=b;if(a.rendered){a.el.setHtml(b);a.updateLayout()}}});(Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',getBodyRenderData:function(){var a=this;return{vertical:a.vertical,upDisabledCls:a.upEnabled?"":(a.spinnerUpCls+"-disabled"),downDisabledCls:a.downEnabled?"":(a.spinnerDownCls+"-disabled"),spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(d){var b=this,a=arguments,d=b.clickRepeater?a[1]:a[0],c=b.field;if(!c.readOnly&&!c.disabled){if(b.upEl.contains(d.target)){Ext.callback(b.upHandler,b.scope,[c,b,d],0,c)}else{if(b.downEl.contains(d.target)){Ext.callback(b.downHandler,b.scope,[c,b,d],0,c)}}}c.inputEl.focus()},onFieldRender:function(){var b=this,a=b.vertical,d,c;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);d=b.spinnerEl=b.el.select("."+b.spinnerCls,true);c=d.elements;b.upEl=a?c[0]:c[1];b.downEl=a?c[1]:c[0]},setUpEnabled:function(a){this.upEl[a?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(a){this.downEl[a?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(b){var c=this,a=b.spinner;a.upEnabled=c.spinUpEnabled;a.downEnabled=c.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},onRender:function(){var b=this,a=b.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(b.keyNavEnabled){b.spinnerKeyNav=new Ext.util.KeyNav(b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}b.spinUpEl=a.upEl;b.spinDownEl=a.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setUpEnabled(a)}},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setDownEnabled(a)}},onMouseWheel:function(b){var a=this,c;if(a.hasFocus){c=b.getWheelDelta();if(c>0){a.spinUp()}else{if(c<0){a.spinDown()}}b.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");Ext.form.field.Text.prototype.onDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getErrors:function(c){c=arguments.length>0?c:this.processRawValue(this.getRawValue());var b=this,f=Ext.form.field.Spinner.prototype.getErrors.call(this,c),d=Ext.String.format,a;if(c.length<1){return f}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){f.push(d(b.nanText,c))}a=b.parseValue(c);if(b.minValue===0&&a<0){f.push(this.negativeText)}else{if(a<b.minValue){f.push(d(b.minText,b.minValue))}}if(a>b.maxValue){f.push(d(b.maxText,b.maxValue))}return f},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=b.parseValue(c);c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(String(c).replace(a,"."));c=isNaN(c)?"":String(c).replace(".",a);return c},getSubmitValue:function(){var a=this,b=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!a.submitLocaleSeparator){b=b.replace(a.decimalSeparator,".")}return b},onChange:function(){this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments)},toggleSpinners:function(){var c=this,d=c.getValue(),b=d===null,a;if(c.spinUpEnabled||c.spinUpDisabledByToggle){a=b||d<c.maxValue;c.setSpinUpEnabled(a,true)}if(c.spinDownEnabled||c.spinDownDisabledByToggle){a=b||d>c.minValue;c.setSpinDownEnabled(a,true)}},setMinValue:function(b){var a=this,c;a.minValue=Ext.Number.from(b,Number.NEGATIVE_INFINITY);a.toggleSpinners();if(a.disableKeyFilter!==true){c=a.baseChars+"";if(a.allowExponential){c+=a.decimalSeparator+"e+-"}else{if(a.allowDecimals){c+=a.decimalSeparator}if(a.minValue<0){c+="-"}}c=Ext.String.escapeRegex(c);a.maskRe=new RegExp("["+c+"]");if(a.autoStripChars){a.stripCharsRe=new RegExp("[^"+c+"]","gi")}}},setMaxValue:function(a){this.maxValue=Ext.Number.from(a,Number.MAX_VALUE);this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(b||!d){return b?"":d}else{if(!c.allowDecimals||a<=0){a=0}}return parseFloat(Ext.Number.toFixed(parseFloat(d),a))},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(!Ext.isEmpty(a)){b.setValue(a)}Ext.form.field.Spinner.prototype.onBlur.call(this,c)},setSpinUpEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!a){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!a){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var b=this,a={scope:b,blur:b.onPagingBlur};a[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=b.onPagingKeyDown;return[{itemId:"first",tooltip:b.firstText,overflowText:b.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:b.moveFirst,scope:b},{itemId:"prev",tooltip:b.prevText,overflowText:b.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:b.movePrevious,scope:b},"-",b.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:b.inputItemWidth,margin:"-1 2 3 2",listeners:a},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(b.afterPageText,1)},"-",{itemId:"next",tooltip:b.nextText,overflowText:b.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:b.moveNext,scope:b},{itemId:"last",tooltip:b.lastText,overflowText:b.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:b.moveLast,scope:b},"-",{itemId:"refresh",tooltip:b.refreshText,overflowText:b.refreshText,iconCls:"x-tbar-loading",disabled:b.store.isLoading(),handler:b.doRefresh,scope:b}]},initComponent:function(){var b=this,a=b.items||b.buttons||[],c;b.bindStore(b.store||"ext-empty-store",true);c=b.getPagingItems();if(b.prependButtons){b.items=a.concat(c)}else{b.items=c.concat(a)}delete b.buttons;if(b.displayInfo){b.items.push("->");b.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){var a=this;Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);if(!a.store.isLoading()){a.calledFromRender=true;a.onLoad();delete a.calledFromRender}},updateInfo:function(){var f=this,c=f.child("#displayItem"),a=f.store,b=f.getPageData(),d,g;if(c){d=a.getCount();if(d===0){g=f.emptyMsg}else{g=Ext.String.format(f.displayMsg,b.fromRecord,b.toRecord,b.total)}c.setText(g)}},onLoad:function(){var h=this,d,b,c,a,g,j,f;g=h.store.getCount();j=g===0;if(!j){d=h.getPageData();b=d.currentPage;c=d.pageCount;if(b>c){h.store.loadPage(c);return}a=Ext.String.format(h.afterPageText,isNaN(c)?1:c)}else{b=0;c=0;a=Ext.String.format(h.afterPageText,0)}Ext.suspendLayouts();f=h.child("#afterTextItem");if(f){f.setText(a)}f=h.getInputItem();if(f){f.setDisabled(j).setValue(b)}h.setChildDisabled("#first",b===1||j);h.setChildDisabled("#prev",b===1||j);h.setChildDisabled("#next",b===c||j);h.setChildDisabled("#last",b===c||j);h.setChildDisabled("#refresh",false);h.updateInfo();Ext.resumeLayouts(true);if(!h.calledFromRender){h.fireEvent("change",h,d)}},setChildDisabled:function(a,b){var c=this.child(a);if(c){c.setDisabled(b)}},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(b){var c=this.getInputItem(),d=false,a;if(c){a=c.getValue();d=parseInt(a,10);if(!a||isNaN(d)){c.setValue(b.currentPage);return false}}return d},onPagingBlur:function(c){var b=this.getInputItem(),a;if(b){a=this.getPageData().currentPage;b.setValue(a)}},onPagingKeyDown:function(b,a){this.processKeyEvent(b,a)},processKeyEvent:function(h,g){var d=this,b=g.getKey(),c=d.getPageData(),a=g.shiftKey?10:1,f;if(b==g.RETURN){g.stopEvent();f=d.readPageFromInput(c);if(f!==false){f=Math.min(Math.max(1,f),c.pageCount);if(f!==c.currentPage&&d.fireEvent("beforechange",d,f)!==false){d.store.loadPage(f)}}}else{if(b==g.HOME||b==g.END){g.stopEvent();f=b==g.HOME?1:c.pageCount;h.setValue(f)}else{if(b==g.UP||b==g.PAGE_UP||b==g.DOWN||b==g.PAGE_DOWN){g.stopEvent();f=d.readPageFromInput(c);if(f){if(b==g.DOWN||b==g.PAGE_DOWN){a*=-1}f+=a;if(f>=1&&f<=c.pageCount){h.setValue(f)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var c=this,a=c.store,b=a.currentPage-1;if(b>0){if(c.fireEvent("beforechange",c,b)!==false){a.previousPage();return true}}return false},moveNext:function(){var d=this,a=d.store,c=d.getPageData().pageCount,b=a.currentPage+1;if(b<=c){if(d.fireEvent("beforechange",d,b)!==false){a.nextPage();return true}}return false},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a);return true}return false},doRefresh:function(){var b=this,a=b.store,c=a.currentPage;if(b.fireEvent("beforechange",b,c)!==false){a.loadPage(c);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onDestroy:function(){this.bindStore(null);Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));Ext.define("ExtThemeNeptune.toolbar.Paging",{override:"Ext.toolbar.Paging",defaultButtonUI:"plain-toolbar",inputItemWidth:40});(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,componentLayout:"boundlist",navigationModel:"boundlist",autoScroll:true,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap" role="presentation" class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="'+Ext.plainListCls+'">',"</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusable:false,initComponent:function(){var b=this,a=b.baseCls,c=b.itemCls;b.selectedItemCls=a+"-selected";if(b.trackOver){b.overItemCls=a+"-item-over"}b.itemSelector="."+c;b.scrollerSelector="ul."+Ext.plainListCls;if(b.floating){b.addCls(a+"-floating")}if(!b.tpl){b.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+c+'">'+b.getInnerTpl(b.displayField)+"</li>","</tpl>")}else{if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}}if(b.pageSize){b.pagingToolbar=b.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this);b.getSelectionModel().preventFocus=true},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var a=Ext.view.View.prototype.getRefItems.call(this),b=this.pagingToolbar;if(b){a.push(b)}return a},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var c=this,a=c.tpl,b=c.pagingToolbar,d=c.rendered;a.field=c.pickerField;a.store=c.store;Ext.view.View.prototype.refresh.call(this);a.field=a.store=null;if(d&&b&&b.rendered&&!c.preserveScrollOnRefresh){c.el.appendChild(b.el,true)}},bindStore:function(a,b){var c=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(c){c.bindStore(a,b)}},getInnerTpl:function(a){return"{"+a+"}"},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this);Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(a){a.finishRender()}}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{initKeyNav:function(a){var b=this,c=b.view.pickerField;if(!a.pickerField){return}if(!c.rendered){c.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}b.keyNav=new Ext.util.KeyNav({target:c.inputEl,forceKeyDown:true,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,scope:b})},onItemMouseDown:function(b,a,f,c,d){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,b,a,f,c,d);d.preventDefault()},onKeyUp:function(){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c>0?c-1:d.getCount()-1;f.setPosition(a)},onKeyDown:function(){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c<d.getCount()-1?c+1:0;f.setPosition(a)},onKeyLeft:Ext.emptyFn,onKeyRight:Ext.emptyFn,onKeyTab:function(c){var a=this.view,b=a.pickerField;if(a.isVisible()){if(b.selectOnTab){this.selectHighlighted(c)}b.collapse()}return true},onKeyEnter:function(d){var a=this.view.getSelectionModel(),c=this.view.pickerField,b=a.getCount();this.selectHighlighted(d);if(!c.multiSelect&&b===a.getCount()){c.collapse()}},onKeySpace:function(){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments);return true},focusItem:function(c){var b=this,a=b.view;if(typeof c==="number"){c=a.all.item(c)}if(c){c=c.dom;a.highlightItem(c);a.getOverflowEl().scrollChildIntoView(c,false)}},selectHighlighted:function(d){var b=this.view,a=b.getSelectionModel(),c;c=b.getNavigationModel().getRecord();if(c){if(d.getKey()===d.ENTER||!a.isSelected(c)){a.selectWithEvent(c,d)}}}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var a=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);a.setHiddenValue(a.value)},multiSelect:false,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,ignoreSelection:0,removingRecords:null,resizeComboToGrow:function(){var a=this;return a.grow&&a.growToLongestValue},initComponent:function(){var f=this,c=Ext.isDefined,b=f.store,d=f.transform,h=f.displayTpl,a,g;if(d){a=Ext.getDom(d);if(a){if(!f.store){b=Ext.Array.map(Ext.Array.from(a.options),function(j){return[j.value,j.text]})}if(!f.name){f.name=a.name}if(!("value" in f)){f.value=a.value}}}f.bindStore(b||"ext-empty-store",true,true);b=f.store;if(b.autoCreated){f.queryMode="local";f.valueField=f.displayField="field1";if(!b.expanded){f.displayField="field2"}}if(!c(f.valueField)){f.valueField=f.displayField}g=f.queryMode==="local";if(!c(f.queryDelay)){f.queryDelay=g?10:500}if(!c(f.minChars)){f.minChars=g?0:4}if(!h){f.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+f.displayField+'"]]}<tpl if="xindex < xcount">'+f.delimiter+"</tpl></tpl>")}else{if(!h.isTemplate){f.displayTpl=new Ext.XTemplate(h)}}Ext.form.field.Picker.prototype.initComponent.call(this);f.doQueryTask=new Ext.util.DelayedTask(f.doRawQuery,f);if(f.store.getCount()>0){f.setValue(f.value)}if(a){if(f.transformInPlace){f.render(a.parentNode,a);delete f.renderTo}Ext.removeNode(a)}},getSubTplMarkup:function(c){var d=this,a="",b=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(d.hiddenName){a='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+d.hiddenDataCls+'" role="presentation"></div>'}return a+b},applyFilters:function(b,c){var a=this;if(b===null||b.isFilterCollection){return b}if(b){if(!c){c=this.getFilters()}c.beginUpdate();c.splice(0,c.length,b);c.each(function(d){d.ownerId=a.id});c.endUpdate()}return c},getFilters:function(b){var a=this.filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on("endupdate","onEndUpdateFilters",c)}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(f){var d=this,g=d.filtered,c=!!f&&(f.length>0),a,b;if(g||c){d.filtered=c;a=[];b=d.store.getFilters();b.each(function(h){if(h.ownerId===d.id&&!f.contains(h)){a.push(h)}});b.splice(0,a,f.items)}},getStore:function(){return this.store},onBlur:function(c){var b=this,a=b.queryFilter;b.doQueryTask.cancel();b.assertValue();if(a&&b.queryMode==="local"&&b.clearFilterOnBlur){b.getStore().getFilters().remove(a)}Ext.form.field.Picker.prototype.onBlur.call(this,c)},onFocus:function(b){var a=this;Ext.form.field.Picker.prototype.onFocus.call(this,b);if(!a.duringTriggerClick&&a.triggerAction!=="all"&&a.queryFilter&&a.queryMode==="local"&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},assertValue:function(){var b=this,c=b.getRawValue(),d,a;if(b.forceSelection){if(b.multiSelect){if(c!==b.getDisplayValue()){b.setValue(b.lastSelection)}}else{d=b.findRecordByDisplay(c);if(d){a=b.value;if(!b.findRecordByValue(a)){b.select(d,true)}}else{b.setValue(b.lastSelection)}}}b.collapse()},onTypeAhead:function(){var f=this,d=f.displayField,b=f.store.findRecord(d,f.getRawValue()),c=f.getPicker(),g,a,h;if(b){g=b.get(d);a=g.length;h=f.getRawValue().length;c.highlightItem(c.getNode(b));if(h!==0&&h!==a){f.setRawValue(g);f.selectText(h,g.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this);if(a){this.getStore().getFilters().remove(a)}},onUnbindStore:function(){var c=this,a=c.picker,b=c.queryFilter;if(b&&!c.store.isDestroyed){c.getStore().getFilters().remove(b)}if(a){a.bindStore(null)}},onBindStore:function(a,c){var b=this.picker;if(!c){this.resetToDefault()}if(b){b.bindStore(a)}},bindStore:function(a,f,b){var d=this,c=d.queryFilter;d.mixins.storeholder.bindStore.call(d,a,b);a=d.getStore();if(a&&c&&!f){a.getFilters().add(c)}if(!b&&a){d.setValueOnData()}},getStoreListeners:function(){var a=this;return{beforeload:a.onBeforeLoad,clear:a.onClear,datachanged:a.onDataChanged,load:a.onLoad,exception:a.onException,remove:a.onRemove}},onBeforeLoad:function(){++this.ignoreSelection},onDataChanged:function(){var a=this;if(a.resizeComboToGrow()){a.updateLayout()}},onClear:function(){var a=this;if(a.resizeComboToGrow()){a.removingRecords=true;a.onDataChanged()}},onRemove:function(){var a=this;if(a.resizeComboToGrow()){a.removingRecords=true}},onException:function(){if(this.ignoreSelection>0){--this.ignoreSelection}this.collapse()},onLoad:function(b,a,c){if(this.ignoreSelection>0){--this.ignoreSelection}if(c&&!b.lastOptions.rawQuery){this.setValueOnData()}},setValueOnData:function(){var a=this;if(a.value==null){if(a.getStore().getCount()){a.doAutoSelect()}else{a.setValue(a.value)}}else{a.setValue(a.value)}},doRawQuery:function(){this.doQuery(this.getRawValue(),false,true)},doQuery:function(f,b,d){var c=this,a=c.beforeQuery({query:f||"",rawQuery:d,forceAll:b,combo:c,cancel:false});if(a===false||a.cancel){return false}if(c.queryCaching&&a.query===c.lastQuery){c.expand();if(c.queryMode==="local"){c.doAutoSelect()}}else{c.lastQuery=a.query;if(c.queryMode==="local"){c.doLocalQuery(a)}else{c.doRemoteQuery(a)}}return true},beforeQuery:function(a){var b=this;if(b.fireEvent("beforequery",a)===false){a.cancel=true}else{if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=true}}}return a},doLocalQuery:function(a){var d=this,f=a.query,c=d.getStore().getFilters(),b=d.queryFilter;d.queryFilter=null;c.beginUpdate();if(b){c.remove(b)}if(f){b=d.queryFilter=new Ext.util.Filter({id:d.id+"-filter",anyMatch:d.anyMatch,caseSensitive:d.caseSensitive,root:"data",property:d.displayField,value:d.enableRegEx?new RegExp(f):f});c.add(b)}c.endUpdate();if(d.store.getCount()||d.getPicker().emptyText){d.expand()}else{d.collapse()}d.afterQuery(a)},doRemoteQuery:function(b){var c=this,a=function(){c.afterQuery(b)};c.expand();if(c.pageSize){c.loadPage(1,{rawQuery:b.rawQuery,callback:a})}else{c.store.load({params:c.getParams(b.query),rawQuery:b.rawQuery,callback:a})}},afterQuery:function(a){var b=this;if(b.store.getCount()){if(b.typeAhead){b.doTypeAhead()}if(b.getRawValue()!==b.getDisplayValue()){b.ignoreSelection++;b.picker.getSelectionModel().deselectAll();b.ignoreSelection--}if(a.rawQuery){b.syncSelection();if(b.picker&&!b.picker.getSelectionModel().hasSelection()){b.doAutoSelect()}}else{b.doAutoSelect()}}},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(c){var b={},a=this.queryParam;if(a){b[a]=c}return b},doAutoSelect:function(){var b=this,a=b.picker;if(a&&b.autoSelect&&b.store.getCount()>0){a.getNavigationModel().setPosition(b.picker.getSelectionModel().lastSelected||0)}},doTypeAhead:function(){var b=this,a=Ext.event.Event;if(!b.typeAheadTask){b.typeAheadTask=new Ext.util.DelayedTask(b.onTypeAhead,b)}if(b.lastKey!==a.BACKSPACE&&b.lastKey!==a.DELETE){b.typeAheadTask.delay(b.typeAheadDelay)}},onTriggerClick:function(){var a=this;a.duringTriggerClick=true;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.onFocus({});if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{if(a.triggerAction==="last"){a.doQuery(a.lastQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}}}delete a.duringTriggerClick},onPaste:function(){var a=this;if(!a.readOnly&&!a.disabled&&a.editable){a.doQueryTask.delay(a.queryDelay)}},onKeyUp:function(d,b){var c=this,a=d.getKey();if(!c.readOnly&&!c.disabled&&c.editable){c.lastKey=a;if(!d.isSpecialKey()||a===d.BACKSPACE||a===d.DELETE){c.doQueryTask.delay(c.queryDelay)}}if(c.enableKeyEvents){Ext.form.field.Picker.prototype.onKeyUp.apply(this,arguments)}},initEvents:function(){var a=this;Ext.form.field.Picker.prototype.initEvents.call(this);if(!a.enableKeyEvents){a.mon(a.inputEl,"keyup",a.onKeyUp,a)}a.mon(a.inputEl,"paste",a.onPaste,a)},onDestroy:function(){var a=this;if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var a=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(a.picker){a.picker.ownerCt=a.up("[floating]");a.picker.registerWithOwnerCt()}},createPicker:function(){var c=this,b,a=Ext.apply({xtype:"boundlist",pickerField:c,selModel:{mode:c.multiSelect?"SIMPLE":"SINGLE",enableInitialSelection:false},floating:true,hidden:true,store:c.store,displayField:c.displayField,preserveScrollOnRefresh:true,pageSize:c.pageSize,tpl:c.tpl},c.listConfig,c.defaultListConfig);b=c.picker=Ext.widget(a);if(c.pageSize){b.pagingToolbar.on("beforechange",c.onPageChange,c)}c.mon(b,{refresh:c.onListRefresh,scope:c});c.mon(b.getSelectionModel(),{beforeselect:c.onBeforeSelect,beforedeselect:c.onBeforeDeselect,selectionchange:c.onListSelectionChange,scope:c});return b},alignPicker:function(){var d=this,c=d.getPicker(),h=d.getPosition()[1]-Ext.getBody().getScroll().top,g=Ext.Element.getViewportHeight()-h-d.getHeight(),f=Math.max(h,g),b=c.getTargetEl().dom,a=b.scrollTop;if(c.height){delete c.height;c.updateLayout()}if(c.getHeight()>f-5){c.setHeight(f-5)}Ext.form.field.Picker.prototype.alignPicker.call(this);b.scrollTop=a},onListRefresh:function(){if(!this.expanding){this.alignPicker()}this.syncSelection()},onBeforeSelect:function(b,a){return this.fireEvent("beforeselect",this,a,this.getStore().indexOf(a))},onBeforeDeselect:function(b,a){return this.fireEvent("beforedeselect",this,a,this.getStore().indexOf(a))},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getPicker().getSelectionModel();b.processSelectionChange=true;if(a){c.select(a)}else{c.deselectAll()}b.processSelectionChange=false;b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},onListSelectionChange:function(a,f){var b=this,g=b.multiSelect,d=f.length>0,c=b.processSelectionChange;b.updateBindSelection(a,f);if(!b.ignoreSelection&&(b.isExpanded||c)){if(!g){b.collapse()}if(g||d||c){b.setValue(f,false)}if(d){b.fireEvent("select",b,f)}}},onExpand:function(){var b=this,a;if(b.selectOnTab){b.ignoreMonitorTab=true}a=b.getPicker().getNavigationModel();Ext.defer(a.enable,1,a)},onCollapse:function(){var b=this,a=b.getPicker().getNavigationModel();if(a){a.disable();b.ignoreMonitorTab=false}},select:function(d,a){var c=this,b=c.picker,f;if(d&&d.isModel&&a===true&&b){f=!b.getSelectionModel().isSelected(d)}c.setValue(d,true);if(f){c.fireEvent("select",c,d)}},findRecord:function(d,c){var b=this.store,a=b.findExact(d,c);return a!==-1?b.getAt(a):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(a){return this.findRecord(this.valueField,a)},findRecordByDisplay:function(a){return this.findRecord(this.displayField,a)},setValue:function(o,f){var l=this,c=l.valueNotFoundText,p=l.getStore(),q=l.inputEl,n=[],b=[],d=[],k=l.autoLoadOnValue,m=p.hasPendingLoad(),r=k&&p.loadCount===0&&!m,g,j,h,a;if(o!=null&&(m||r||p.isEmptyStore)){l.value=o;l.setHiddenValue(l.value);if(r&&p.getProxy().isRemote){p.load()}return l}o=Ext.Array.from(o);for(g=0,j=o.length;g<j;g++){h=o[g];if(!h||!h.isModel){h=l.findRecordByValue(h)}if(h){n.push(h);b.push(h.data);d.push(h.get(l.valueField))}else{if(!l.forceSelection){d.push(o[g]);a={};a[l.displayField]=o[g];b.push(a)}else{if(Ext.isDefined(c)){b.push(c)}}}}l.setHiddenValue(d);l.value=l.multiSelect?d:d[0];if(!Ext.isDefined(l.value)){l.value=undefined}l.displayTplData=b;l.lastSelection=l.valueModels=n;if(q&&l.emptyText&&!Ext.isEmpty(o)){q.removeCls(l.emptyCls)}l.setRawValue(l.getDisplayValue());l.checkChange();if(f!==false){l.syncSelection()}l.applyEmptyText();return l},setHiddenValue:function(j){var f=this,a=f.hiddenName,d,b,k,h,g,c;if(!f.hiddenDataEl||!a){return}j=Ext.Array.from(j);b=f.hiddenDataEl.dom;k=b.childNodes;h=k[0];g=j.length;c=k.length;if(!h&&g>0){f.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:a}));c=1;h=b.firstChild}while(c>g){b.removeChild(k[0]);--c}while(c<g){b.appendChild(h.cloneNode(true));++c}for(d=0;d<g;d++){k[d].value=j[d]}},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var b=this,a=b.picker,d=b.getRawValue(),c=b.value;if(b.getDisplayValue()!==d){c=d;b.value=b.displayTplData=b.valueModels=undefined;if(a){b.ignoreSelection++;a.getSelectionModel().deselectAll();b.ignoreSelection--}}b.value=c==null?null:c;return b.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=""}return a},isEqual:function(f,d){var b=Ext.Array.from,c,a;f=b(f);d=b(d);a=f.length;if(a!==d.length){return false}for(c=0;c<a;c++){if(d[c]!==f[c]){return false}}return true},clearValue:function(){this.setValue([])},syncSelection:function(){var h=this,d=h.getPicker(),g,c,b=h.valueModels||[],f=b.length,a,j;if(d){g=[];for(a=0;a<f;a++){j=b[a];if(j&&j.isModel&&h.store.indexOf(j)>=0){g.push(j)}}h.ignoreSelection++;c=d.getSelectionModel();if(g.length){c.select(g,false)}else{c.deselectAll()}h.ignoreSelection--}},onEditorTab:function(b){var a=this.getPicker().getNavigationModel();if(this.selectOnTab&&a){a.selectHighlighted(b)}}},0,["combo","combobox"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));Ext.define("FBEditor.override.form.field.ComboBox",{override:"Ext.form.field.ComboBox",createPicker:function(){var b=this,a;a=(arguments.callee.$previous||Ext.form.field.Picker.prototype.createPicker).apply(this,arguments);a.fireHierarchyEvent=function(c){};return a}});(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;a.target=b;b.on("beforedestroy",a.disable,a);a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;if(b){b.un("beforedestroy",a.disable,a)}a.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(a.is(this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(c,b){var f=this,a=f.items,d=f.addHandler;if(!f.disabled){if(d){d.call(f.scope||b,b)}if(a){a.add(b)}}},onItemRemove:function(c,b){var f=this,a=f.items,d=f.removeHandler;if(!f.disabled){if(d){d.call(f.scope||b,b)}if(a){a.remove(b)}}},onContainerAdd:function(g,b){var k=this,j,h,c=k.handleAdd,a=k.handleRemove,d,f;if(g.isContainer){g.on("add",c,k);g.on("dockedadd",c,k);g.on("remove",a,k);g.on("dockedremove",a,k)}if(b!==true){j=g.query(k.selector);for(d=0,h=j.length;d<h;++d){f=j[d];k.onItemAdd(f.ownerCt,f)}}j=g.query(">container");for(d=0,h=j.length;d<h;++d){k.onContainerAdd(j[d],true)}},handleRemove:function(b,a){var c=this;if(!c.disabled){if(a.is(c.selector)){c.onItemRemove(b,a)}if(a.isQueryable){c.onContainerRemove(b,a)}}},onContainerRemove:function(f,c){var h=this,b,d,a,g;if(!c.isDestroyed&&!c.destroying&&c.isContainer){h.removeCtListeners(c);b=c.query(h.selector);for(d=0,a=b.length;d<a;++d){g=b[d];h.onItemRemove(g.ownerCt,g)}b=c.query("container");for(d=0,a=b.length;d<a;++d){h.removeCtListeners(b[d])}}else{h.invalidateItems(true)}},removeCtListeners:function(a){var b=this;a.un("add",b.handleAdd,b);a.un("dockedadd",b.handleAdd,b);a.un("remove",b.handleRemove,b);a.un("dockedremove",b.handleRemove,b)},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(c){var b=this,a=b.invalidateHandler;if(c&&a){a.call(b.scope||b,b)}b.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:"[isFormField]:not([excludeForm])",addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(b){var a=b.fieldDefaults,c=this.fieldDefaults;if(c){if(a){b.fieldDefaults=Ext.apply(Ext.Object.chain(a),c)}else{b.fieldDefaults=c}}},onChildFieldAdd:function(b){var a=this;a.mon(b,"errorchange",a.handleFieldErrorChange,a);a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,"errorchange",a.handleFieldErrorChange,a);a.mun(b,"validitychange",a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(c,b){var a=this;if(c!==a){a.fireEvent("fieldvaliditychange",a,c,b);a.onFieldValidityChange(c,b)}},handleFieldErrorChange:function(b,a){var c=this;if(b!==c){c.fireEvent("fielderrorchange",c,b,a);c.onFieldErrorChange(b,a)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);b.hasRawContent=true;a.containerEl.setStyle("height","");b.containerElContext=b.getEl("containerEl")},measureContentHeight:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(c,b){var a=this.owner;if(a.labelAlign==="top"&&a.hasVisibleLabel()){b-=a.labelEl.getHeight()}if(a.msgTarget==="under"&&a.hasActiveError()){b-=a.errorWrapEl.getHeight()}b-=a.bodyEl.getPadding("tb");c.containerElContext.setHeight(b,false)},publishInnerWidth:function(c,b){var a=this.owner;if(a.labelAlign!=="top"&&a.hasVisibleLabel()){b-=(a.labelWidth+(a.labelPad||0))}if(a.msgTarget==="side"&&a.hasActiveError()){b-=a.errorWrapEl.getWidth()}b-=a.bodyEl.getPadding("lr");c.containerElContext.setWidth(b,false)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:true,customOverflowEl:"containerEl",childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}" role="presentation">',"{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var a=this;a.initLabelable();a.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);a.initMonitor()},onAdd:function(a){var b=this;if(a.isLabelable&&Ext.isGecko&&b.layout.type==="absolute"&&!b.hideLabel&&b.labelAlign!=="top"){a.x+=(b.labelWidth+b.labelPad)}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(a.isLabelable&&b.combineLabels){a.oldHideLabel=a.hideLabel;a.hideLabel=true}b.updateLabel()},onRemove:function(a,b){var c=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!b){if(a.isLabelable&&c.combineLabels){a.hideLabel=a.oldHideLabel}c.updateLabel()}},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.containerElCls=a.containerElCls;return Ext.applyIf(b,a.getLabelableRenderData())},getFieldLabel:function(){var a=this.fieldLabel||"";if(!a&&this.combineLabels){a=Ext.Array.map(this.query("[isFieldLabelable]"),function(b){return b.getFieldLabel()}).join(this.labelConnector)}return a},getSubTplData:function(){var a=this.initRenderData();Ext.apply(a,this.subTplData);return a},getSubTplMarkup:function(b){var d=this,a=d.getTpl("fieldSubTpl"),c;if(!a.renderContent){d.setupRenderTpl(a)}c=a.apply(d.getSubTplData(b));return c},updateLabel:function(){var b=this,a=b.labelEl;if(a){b.setFieldLabel(b.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var c=this,d=c.getActiveError(),b=Ext.Array.filter(c.query("[isFormField]"),function(f){return f.hasActiveError()}),a=c.getCombinedErrors(b);if(a){c.setActiveErrors(a)}else{c.unsetActiveError()}if(d!==c.getActiveError()){c.updateLayout()}}},getCombinedErrors:function(g){var m=[],c,n=g.length,k,d,l,b,h,j;for(c=0;c<n;c++){k=g[c];d=k.getActiveErrors();b=d.length;for(l=0;l<b;l++){h=d[l];j=k.getFieldLabel();m.push((j?j+": ":"")+h)}}return m},privates:{applyTargetCls:function(b){var a=this.containerElCls;this.containerElCls=a?a+" "+b:b},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:false,_verticalSides:{left:1,right:1},initComponent:function(){var b=this,a=b.vertical;b.dock=b.dock||(a?"left":"top");b.layout=Ext.apply(a?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},b.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(b,c,a){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,b,c,a)},onRemoved:function(a){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,a)},beforeRender:function(){if(!this.ownerCt){this.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(d){var c=this,b,a;if(d!==c.dock){Ext.suspendLayouts();c.clearOrientation();Ext.container.Container.prototype.setDock.call(this,d);c.initOrientation();a=c.vertical;b=c.layout;b.setVertical(a);b.setAlignRoundingMethod(a?"ceil":"floor");Ext.resumeLayouts(true)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var c=this,b=c.dock,a=c.vertical=(b?b in c._verticalSides:c.vertical);c.addClsWithUI([this.vertical?"vertical":"horizontal",c.getDockName()])}}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[Ext.panel,"Bar"],0));(Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{unselectable:"on"},childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="headerRole"> role="{headerRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var d=this,b=d.getRotation(),a,f,c;if(b&&!Ext.isIE8){c=d.el;a=d.lastBox;f=a.x;c.setStyle(d._getVerticalAdjustDirection(),(f+((b===1)?a.width:-a.height))+"px")}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var c=this,a=c.getRotation(),b=c.el;Ext.Component.prototype.onRender.call(this);if(a){b.setVertical(c._rotationAngles[a])}if(Ext.supports.FixedTableWidthBug){b._needsTableWidthFix=true}},applyText:function(a){if(!a){a="&#160;"}return a},beforeRender:function(){var a=this;Ext.Component.prototype.beforeRender.call(this);a.addCls(a._rotationClasses[a.getRotation()]);a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var g=this,c=g.getIcon(),b=g.getIconCls(),f=g.getGlyph(),h=Ext._glyphFontFamily,a=g.getIconAlign(),d;if(typeof f==="string"){d=f.split("@");f=d[0];h=d[1]}return{id:g.id,ui:g.ui,itemCls:g._itemCls,iconUrl:c,iconCls:b,iconWrapCls:g._iconWrapCls,baseIconCls:g._baseIconCls,iconAlignCls:g._iconAlignClasses[a],glyph:f,glyphCls:f?g._glyphCls:"",glyphFontFamily:h}},initRenderData:function(){var b=this,a,c;c=Ext.apply({text:b.getText(),headerRole:b.headerRole,id:b.id,ui:b.ui,itemCls:b._itemCls,textCls:b._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(b._hasIcon()){a=b.getIconAlign();c.iconMarkup=b.getIconMarkup();c.iconBeforeTitle=(a==="top"||a==="left")}return c},onAdded:function(c,h,b){var f=this,a=f.cls||"",g=f._titleSuffix,d=c.baseCls;f.addCls([d+g,d+g+"-"+c.ui]);Ext.Component.prototype.onAdded.call(this,c,h,b)},updateGlyph:function(g,c){g=g||0;var f=this,h=f._glyphCls,b,a,d;f.glyph=g;if(f.rendered){f._syncIconVisibility();b=f.iconEl;if(typeof g==="string"){d=g.split("@");g=d[0];a=d[1]||Ext._glyphFontFamily}if(!g){b.dom.innerHTML="";b.removeCls(h)}else{if(c!=g){b.dom.innerHTML="&#"+g+";";b.addCls(h)}}if(a){b.setStyle("font-family",a)}if(f._didIconStateChange(c,g)){f.updateLayout()}}},updateIcon:function(b,d){b=b||"";var c=this,a;if(c.rendered&&b!=d){c._syncIconVisibility();a=c.iconEl;a.setStyle("background-image",b?"url("+b+")":"");if(c._didIconStateChange(d,b)){c.updateLayout()}}},updateIconAlign:function(g,c){var b=this,f=b.iconWrapEl,a,f,d;if(b.iconWrapEl){a=b.el;d=b._iconAlignClasses;if(c){f.removeCls(d[c])}f.addCls(d[g]);if(g==="top"||g==="left"){a.insertFirst(f)}else{a.appendChild(f)}b.updateLayout()}},updateIconCls:function(b,c){b=b||"";var d=this,a;if(d.rendered&&c!=b){d._syncIconVisibility();a=d.iconEl;if(c){a.removeCls(c)}a.addCls(b);if(d._didIconStateChange(c,b)){d.updateLayout()}}},updateRotation:function(c,a){var f=this,b,d,g;if(f.rendered){d=f.el;g=f._rotationClasses;f.removeCls(g[a]);f.addCls(g[c]);d.setHorizontal();if(c){d.setVertical(f._rotationAngles[c])}d.setStyle({right:"",left:"",top:"",height:"",width:""});f.lastBox=null;f.updateLayout()}},updateText:function(a){if(this.rendered){this.textEl.setHtml(a)}},updateTextAlign:function(d,b){var a=this,c=a._textAlignClasses;if(a.rendered){if(b){a.removeCls(c[b])}a.addCls(c[d]);a.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var f=this,d=f.el,a=f._hasIcon(),g=f.iconWrapEl,c,b;if(a&&!g){b=f.iconAlign;c=(b==="left"||b==="top");d.dom.insertAdjacentHTML(c?"afterbegin":"beforeend",f.getIconMarkup());g=f.iconWrapEl=d[c?"first":"last"]();f.iconEl=g.first()}if(g){g.setDisplayed(a)}}}},0,["title"],["component","box","title"],{component:true,box:true,title:true},["widget.title"],0,[Ext.panel,"Title"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:true,focusable:true,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",ariaRole:"button",childEls:["toolEl"],renderTpl:['<img id="{id}-toolEl" data-ref="toolEl" src="{blank}" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"/>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,cacheHeight:true,cacheWidth:true,initComponent:function(){var a=this;a.type=a.type||a.id;Ext.applyIf(a.renderData,{baseCls:a.baseCls,blank:Ext.BLANK_IMAGE_URL,type:a.type});a.tooltip=a.tooltip||a.qtip;Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a});b=a.tooltip;if(b){a.setTooltip(b)}},tipAttrs:{qtip:"data-qtip"},setTooltip:function(h,d){var f=this,b=f.tooltip,g=f.tooltipType,j=f.id,c=f.el,a;if(b&&Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.unregister(j)}f.tooltip=h;if(d){f.tooltipType=d}if(h){if(Ext.quickTipsActive&&Ext.isObject(h)){Ext.tip.QuickTipManager.register(Ext.apply({target:j},h))}else{if(c){if(d&&g&&d!==g){a=f.tipAttrs[g]||"title";c.dom.removeAttribute(a)}a=f.tipAttrs[d||g]||"title";c.dom.setAttribute(a,h)}}}},setType:function(a){var b=this,c=b.type;b.type=a;if(b.rendered){if(c){b.toolEl.removeCls(b.baseCls+"-"+c)}b.toolEl.addCls(b.baseCls+"-"+a)}else{b.renderData.type=a}return b},onDestroy:function(){var a=this,b=a.keyMap;a.setTooltip(null);if(b){b.destroy();a.keyMap=null}delete a.toolOwner;Ext.Component.prototype.onDestroy.call(this)},privates:{getFocusEl:function(){return this.el},onClick:function(c,b){var a=this;if(a.disabled){return false}a.el.removeCls(a.toolPressedCls+" "+a.toolOverCls);if(a.stopEvent!==false){c.stopEvent()}if(a.handler){Ext.callback(a.handler,a.scope,[c,b,a.ownerCt,a],0,a)}else{if(a.callback){Ext.callback(a.callback,a.scope,[a.toolOwner||a.ownerCt,a,c],0,a)}}a.fireEvent("click",a,c,a.toolOwner||a.ownerCt);return true},onMouseDown:function(){if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{ariaRole:"presentation",xtype:"title",flex:1},merge:function(b,a){if(typeof b=="string"){b={text:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var d=this,c=d.items,b=d.itemPosition,a=[d.headerCls];d.tools=d.tools||[];d.items=c=(c?c.slice():[]);if(b!==undefined){d._userItems=c.slice();d.items=c=[]}d.indicateDragCls=d.headerCls+"-draggable";if(d.indicateDrag){a.push(d.indicateDragCls)}d.addCls(a);d.syncNoBorderCls();Ext.Array.push(c,d.tools);d.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);d.on({dblclick:d.onDblClick,click:d.onClick,element:"el",scope:d})},addTool:function(a){this.add(Ext.ComponentManager.create(a,"tool"))},afterLayout:function(){var b=this,f,a,c,d;if(b.vertical){a=b.frameTR;if(a){f=b.frameBR;c=b.frameTL;d=(b.getWidth()-a.getPadding("r")-((c)?c.getPadding("l"):b.el.getBorderWidth("l")))+"px";f.setStyle("background-position-x",d);a.setStyle("background-position-x",d)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(f,c){var d=this,a,b;f=f||"";if(typeof f==="string"){f={text:f}}if(c){Ext.suspendLayouts();c.setConfig(f);Ext.resumeLayouts(true);f=c}else{f.ui=d.ui;f.headerRole=d.headerRole;b=("rotation" in f);f=Ext.create(f);if(!b&&d.vertical&&d.titleRotation==="default"){f.rotation=1}}return f},applyTitlePosition:function(b){var a=this.items.getCount();if(this._titleInItems){--a}return Math.max(Math.min(b,a),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var b=this,a=b.itemPosition;b.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(a!==undefined){b.insert(a,b._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(b,a){var c=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,b,a);if(b.isTool){c.push(b);c[b.type]=b}},onAdded:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,b,c,a)},onRemoved:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,b,c,a)},setDock:function(c){var b=this,f=b.getTitle(),a=b.getTitleRotation(),d=f.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,c);if(a==="default"){a=(b.vertical?1:0);if(a!==d){f.setRotation(a)}if(b.rendered){b.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(b,a){this.getTitle().setIconAlign(b)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(b,a){if(!a){this.insert(this.getTitlePosition(),b);this._titleInItems=true}this.titleCmp=b},updateTitleAlign:function(b,a){this.getTitle().setTextAlign(b)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){if(a==="default"){a=(this.vertical?1:0)}this.getTitle().setRotation(a)},privates:{fireClickEvent:function(a,c){var b="."+Ext.panel.Tool.prototype.baseCls;if(!c.getTarget(b)){this.fireEvent(a,this,c)}},getFocusEl:function(){return this.el},getFramingInfoCls:function(){var c=this,b=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),a=c.ownerCt;if(!c.expanding&&a&&(a.collapsed||c.isCollapsedExpander)){b+="-"+a.collapsedCls}return b+"-"+c.dock},onClick:function(a){this.fireClickEvent("click",a)},onDblClick:function(a){this.fireClickEvent("dblclick",a)},syncBeforeAfterTitleClasses:function(c){var k=this,j=k.items,g=j.items,b=k.getTitlePosition(),a=g.length,h=j.generation,l=k.syncBeforeAfterGen,n,f,d,m;if(!c&&(l===h)){return}k.syncBeforeAfterGen=h;for(d=0;d<a;++d){m=g[d];n=m.afterTitleCls||(m.afterTitleCls=m.baseCls+"-after-title");f=m.beforeTitleCls||(m.beforeTitleCls=m.baseCls+"-before-title");if(!k.title||d<b){if(l){m.removeCls(n)}m.addCls(f)}else{if(d>b){if(l){m.removeCls(f)}m.addCls(n)}}}},syncNoBorderCls:function(){var b=this,a=this.ownerCt,c=b.headerCls+"-noborder";if(a?(a.border===false&&!a.frame):b.border===false){b.addCls(c)}else{b.removeCls(c)}}}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],0,[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,triggerEvent:"mousedown",b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(f,b,m){if(Ext.isNumber(b)){b={left:b,right:b,top:b,bottom:b}}b=b||this.defaultPadding;var h=Ext.get(this.getEl()).getBox(),n=Ext.get(f),l=n.getScroll(),g,j=n.dom,k,d,a;if(j==document.body){g={x:l.left,y:l.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else{k=n.getXY();g={x:k[0],y:k[1],width:j.clientWidth,height:j.clientHeight}}d=h.y-g.y;a=h.x-g.x;this.resetConstraints();this.setXConstraint(a-(b.left||0),g.width-a-h.width-(b.right||0),this.xTickSize);this.setYConstraint(d-(b.top||0),g.height-d-h.height-(b.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(d,a,b){var c=this;c.el=c.el||Ext.get(d);c.initTarget(d,a,b);Ext.get(c.id).on(c.triggerEvent,c.handleMouseDown,c)},initTarget:function(c,a,b){this.config=b||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof c!=="string"){c=Ext.id(c)}this.id=c;this.addToGroup((a)?a:"default");this.handleElId=c;this.setDragElId(c);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(c,a,d,b){if(!a&&0!==a){this.padding=[c,c,c,c]}else{if(!d&&0!==d){this.padding=[c,a,c,a]}else{this.padding=[c,a,d,b]}}},setInitPosition:function(d,c){var f=this.getEl(),b,a,g;if(!this.DDMInstance.verifyEl(f)){return}b=d||0;a=c||0;g=Ext.fly(f).getXY();this.initPageX=g[0]-b;this.initPageY=g[1]-a;this.lastPageX=g[0];this.lastPageY=g[1];this.setStartPosition(g)},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=true;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){var b=this,a;if(b._domRef){a=Ext.fly(b.id);if(a){a.un(b.triggerEvent,b.handleMouseDown,b)}}b._domRef=null;b.DDMInstance._remove(b,b.autoGroup)},destroy:function(){this.unreg();this.isDestroyed=true},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(c,b){var a=this;if((a.primaryButtonOnly&&c.button!=0)||a.isLocked()){return}a.DDMInstance.refreshCache(a.groups);if(a.hasOuterHandles||a.DDMInstance.isOverTarget(c.getPoint(),a)){if(a.clickValidator(c)){a.setStartPosition();a.b4MouseDown(c);a.onMouseDown(c);a.DDMInstance.handleMouseDown(c,a);a.DDMInstance.stopEvent(c)}}},clickValidator:function(b){var a=b.getTarget();return(this.isValidHandleChild(a)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(a,this.id)))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(b){for(var c=0,a=this.invalidHandleClasses.length;c<a;++c){if(this.invalidHandleClasses[c]==b){delete this.invalidHandleClasses[c]}}},isValidHandleChild:function(d){var c=true,g,b,a;try{g=d.nodeName.toUpperCase()}catch(f){g=d.nodeName}c=c&&!this.invalidHandleTypes[g];c=c&&!this.invalidHandleIds[d.id];for(b=0,a=this.invalidHandleClasses.length;c&&b<a;++b){c=!Ext.fly(d).hasCls(this.invalidHandleClasses[b])}return c},setXTicks:function(d,a){this.xTicks=[];this.xTickSize=a;var c={},b;for(b=this.initPageX;b>=this.minX;b=b-a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}for(b=this.initPageX;b<=this.maxX;b=b+a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,a){this.yTicks=[];this.yTickSize=a;var c={},b;for(b=this.initPageY;b>=this.minY;b=b-a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}for(b=this.initPageY;b<=this.maxY;b=b+a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(a,c,b){this.topConstraint=a;this.bottomConstraint=c;this.minY=this.initPageY-a;this.maxY=this.initPageY+c;if(b){this.setYTicks(this.initPageY,b)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var b=(this.maintainOffset)?this.lastPageX-this.initPageX:0,a=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(b,a)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(h,d){if(!d){return h}else{if(d[0]>=h){return d[0]}else{var b,a,c,g,f;for(b=0,a=d.length;b<a;++b){c=b+1;if(d[c]&&d[c]>=h){g=h-d[b];f=d[c]-h;return(f>g)?d[b]:d[c]}}return d[d.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},scroll:true,autoOffset:function(c,b){var a=c-this.startPageX,d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(b,f,c){var g=this.getTargetCoord(f,c),d=b.dom?b:Ext.fly(b,"_dd"),m=d.getSize(),j=Ext.Element,k,a,l,h;if(!this.deltaSetXY){k=this.cachedViewportSize={width:j.getDocumentWidth(),height:j.getDocumentHeight()};a=[Math.max(0,Math.min(g.x,k.width-m.width)),Math.max(0,Math.min(g.y,k.height-m.height))];d.setXY(a);l=this.getLocalX(d);h=d.getLocalY();this.deltaSetXY=[l-g.x,h-g.y]}else{k=this.cachedViewportSize;this.setLocalXY(d,Math.max(0,Math.min(g.x+this.deltaSetXY[0],k.width-m.width)),Math.max(0,Math.min(g.y+this.deltaSetXY[1],k.height-m.height)))}this.cachePosition(g.x,g.y);this.autoScroll(g.x,g.y,b.offsetHeight,b.offsetWidth);return g},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.fly(this.getEl()).getXY();this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(m,l,f,n){if(this.scroll){var o=Ext.Element.getViewportHeight(),b=Ext.Element.getViewportWidth(),q=this.DDMInstance.getScrollTop(),d=this.DDMInstance.getScrollLeft(),k=f+l,p=n+m,j=(o+q-l-this.deltaY),g=(b+d-m-this.deltaX),c=40,a=(document.all)?80:30;if(k>o&&j<c){window.scrollTo(d,q+a)}if(l<q&&q>0&&l-q<c){window.scrollTo(d,q-a)}if(p>b&&g<c){window.scrollTo(d+a,q)}if(m<d&&d>0&&m-d<c){window.scrollTo(d-a,q)}}},getTargetCoord:function(c,b){var a=c-this.deltaX,d=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}a=this.getTick(a,this.xTicks);d=this.getTick(d,this.yTicks);return{x:a,y:d}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return("DD "+this.id)},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(b,a,c){b.setLocalXY(a,c)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var b=this,a=document.body,d,c;if(!a||!a.firstChild){Ext.defer(function(){b.createFrame()},50);return}d=this.getDragEl();if(!d){d=document.createElement("div");d.id=this.dragElId;d.setAttribute("role","presentation");c=d.style;c.position="absolute";c.visibility="hidden";c.cursor="move";c.border="2px solid #aaa";c.zIndex=999;a.insertBefore(d,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(f,d){var c=this.getEl(),a=this.getDragEl(),b=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}this.setDragElPos(f,d);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d);this.setDragElPos(a,d)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl(),a=this.getDragEl();a.style.visibility="";this.beforeMove();b.style.visibility="hidden";Ext.dd.DDM.moveToEl(b,a);a.style.visibility="hidden";b.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",constructor:function(a){var b=this;a=a||{};Ext.apply(b,{hideMode:"visibility",hidden:true,floating:true,id:b.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:a.shadow||false,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!=a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(b){var c=this,a="x-dd-drag-proxy ";c.el.replaceCls(a+c.dropAllowed,a+c.dropNotAllowed);c.dropStatus=c.dropNotAllowed;if(b){c.ghost.setHtml("")}},update:function(a){if(typeof a=="string"){this.ghost.setHtml(a)}else{this.ghost.setHtml("");a.style.margin="0";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(a){Ext.Component.prototype.hide.call(this);if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.sync()},repair:function(c,d,a){var b=this;b.callback=d;b.scope=a;if(c&&b.animRepair!==false){b.el.addCls(b.repairCls);b.el.hideUnders(true);b.anim=b.el.animate({duration:b.repairDuration||500,easing:"ease-out",to:{x:c[0],y:c[1]},stopAnimation:true,callback:b.afterRepair,scope:b})}else{b.afterRepair()}},afterRepair:function(){var a=this;a.hide(true);a.el.removeCls(a.repairCls);if(typeof a.callback=="function"){a.callback.call(a.scope||a)}delete a.callback;delete a.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},getDragData:function(a){return this.dragData},onDragEnter:function(c,d){var b=Ext.dd.DragDropManager.getDDById(d),a;this.cachedTarget=b;if(this.beforeDragEnter(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,d)}}},beforeDragEnter:function(b,a,c){return true},onDragOver:function(c,d){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(d),a;if(this.beforeDragOver(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,d)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)!==false){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(c,b,d){var a=this;if(!b){b=c;c=null;d=b.getTarget().id}if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}a.proxy.repair(a.getRepairXY(b,a.dragData),a.afterRepair,a);if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(a,b){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this);Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(a,b){var c=this;c.panel=a;c.id=c.panel.id+"-ddproxy";Ext.apply(c,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;if(a.ghost){if(a.proxy){a.proxy.destroy();delete a.proxy}a.panel.unghost(null,a.moveOnDrag);delete a.ghost}},show:function(){var b=this,a;if(!b.ghost){a=b.panel.getSize();b.panel.el.setVisibilityMode(Ext.Element.DISPLAY);b.ghost=b.panel.ghost();if(b.insertProxy){b.proxy=b.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"});b.proxy.setSize(a)}}},repair:function(b,c,a){this.hide();Ext.callback(c,a||this)},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(b,a){var c=this;c.panel=b;c.dragData={panel:b};c.panelProxy=new Ext.panel.Proxy(b,a);c.proxy=c.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,b.el,a);c.setupEl(b)},setupEl:function(a){var c=this,d=a.header,b=a.body;if(d){c.setHandleElId(d.id);b=d.el}if(b){b.setStyle("cursor","move");c.scroll=false}else{a.on("boxready",c.setupEl,c,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a){return a.el.dom}},endDrag:function(a){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)},onInvalidDrop:function(c,b,d){var a=this;if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var b=this,c,a;Ext.layout.component.Component.prototype.finishRender.call(this);c=b.getRenderTarget();a=b.getDockedItems();b.finishRenderItems(c,a)},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var m=this,a=m.owner,l,q,h=m.lastDockedItems,g=m.borders,b=a.dockedItems.generation,c=m.noBorderClassesSides,n=m.borderWidthProps,f,k,p,o,j,d=m.collapsed;if(m.initializedBorders==b||(a.border&&!a.manageBodyBorders)){return}m.initializedBorders=b;m.collapsed=false;m.lastDockedItems=q=m.getLayoutItems();m.collapsed=d;l={top:[],right:[],bottom:[],left:[]};for(f=0,k=q.length;f<k;f++){p=q[f];o=p.dock;if(p.ignoreBorderManagement){continue}if(!l[o].satisfied){l[o].push(p);l[o].satisfied=true}if(!l.top.satisfied&&o!=="bottom"){l.top.push(p)}if(!l.right.satisfied&&o!=="left"){l.right.push(p)}if(!l.bottom.satisfied&&o!=="top"){l.bottom.push(p)}if(!l.left.satisfied&&o!=="right"){l.left.push(p)}}if(h){for(f=0,k=h.length;f<k;f++){p=h[f];if(!p.isDestroyed&&!p.ignoreBorderManagement&&!a.manageBodyBorders){p.removeCls(m.noBorderClasses)}}}if(g){for(j in g){if(a.manageBodyBorders&&g[j].satisfied){a.setBodyStyle(n[j],"")}}}for(j in l){k=l[j].length;if(!a.manageBodyBorders){for(f=0;f<k;f++){l[j][f].addCls(c[j])}if((!l[j].satisfied&&!a.bodyBorder)||a.bodyBorder===false){a.addBodyCls(c[j])}else{a.removeBodyCls(c[j])}}else{if(l[j].satisfied){a.setBodyStyle(n[j],"1px")}}}m.borders=l},beforeLayoutCycle:function(g){var c=this,b=c.owner,h=c.sizeModels.shrinkWrap,f=b.shrinkWrapDock,d,a;if(b.collapsed){if(b.collapsedVertical()){a=true;g.measureDimensions=1}else{d=true;g.measureDimensions=2}}g.collapsedVert=a;g.collapsedHorz=d;if(a){g.heightModel=h}else{if(d){g.widthModel=h}}f=f===true?3:(f||0);g.shrinkWrapDockHeight=(f&1)&&g.heightModel.shrinkWrap;g.shrinkWrapDockWidth=(f&2)&&g.widthModel.shrinkWrap},beginLayout:function(d){var l=this,c=l.owner,p=l.getLayoutItems(),b=d.context,g=p.length,k=l.lastCollapsedState,m,j,o,a,f,h,n;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);h=c.getCollapsed();if(h!==k&&k!==undefined){if(l.owner.collapsed){d.isCollapsingOrExpanding=1;c.addClsWithUI(c.collapsedCls)}else{d.isCollapsingOrExpanding=2;c.removeClsWithUI(c.collapsedCls);d.lastCollapsedState=l.lastCollapsedState}}l.lastCollapsedState=h;d.dockedItems=m=[];for(j=0;j<g;j++){o=p[j];if(o.rendered){n=o.dock;a=b.getCmp(o);a.dockedAt={x:0,y:0};a.offsets=f=Ext.Element.parseBox(o.offsets||0);a.horizontal=n=="top"||n=="bottom";f.width=f.left+f.right;f.height=f.top+f.bottom;m.push(a)}}d.bodyContext=d.getEl("body")},beginLayoutCycle:function(b){var f=this,l=b.dockedItems,d=l.length,a=f.owner,g=a.frameBody,k=f.lastHeightModel,c,j,h;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(f.owner.manageHeight){if(f.lastBodyDisplay){a.body.dom.style.display=f.lastBodyDisplay=""}}else{if(f.lastBodyDisplay!=="inline-block"){a.body.dom.style.display=f.lastBodyDisplay="inline-block"}if(k&&k.shrinkWrap&&!b.heightModel.shrinkWrap){a.body.dom.style.marginBottom=""}}if(b.widthModel.auto){if(b.widthModel.shrinkWrap){a.el.setWidth(null)}a.body.setWidth(null);if(g){g.setWidth(null)}}if(b.heightModel.auto){a.body.setHeight(null);if(g){g.setHeight(null)}}if(b.collapsedVert){b.setContentHeight(0)}else{if(b.collapsedHorz){b.setContentWidth(0)}}for(c=0;c<d;c++){j=l[c].target;h=j.dock;if(h=="right"){j.setLocalX(0)}else{if(h!="left"){continue}}}},calculate:function(d){var m=this,c=m.measureAutoDimensions(d,d.measureDimensions),b=d.state,l=b.horzDone,f=b.vertDone,g=d.bodyContext,k,a,j,h,n;d.borderInfo||d.getBorderInfo();d.paddingInfo||d.getPaddingInfo();d.frameInfo||d.getFrameInfo();g.borderInfo||g.getBorderInfo();g.paddingInfo||g.getPaddingInfo();if(!d.frameBorder){if(!(k=d.framing)){d.frameBorder=d.borderInfo;d.framePadding=d.paddingInfo}else{d.frameBorder=k.border;d.framePadding=k.padding}}a=!l&&m.createAxis(d,c.contentWidth,d.widthModel,m.horzAxisProps,d.collapsedHorz);j=!f&&m.createAxis(d,c.contentHeight,d.heightModel,m.vertAxisProps,d.collapsedVert);for(h=0,n=d.dockedItems.length;n--;++h){if(a){m.dockChild(d,a,n,h)}if(j){m.dockChild(d,j,n,h)}}if(a&&m.finishAxis(d,a)){b.horzDone=l=a}if(j&&m.finishAxis(d,j)){b.vertDone=f=j}if(l&&f&&m.finishConstraints(d,l,f)){m.finishPositions(d,l,f)}else{m.done=false}},createAxis:function(q,k,f,n,d){var v=this,u=0,b=v.owner,g=b[n.maxSize],c=b[n.minSize]||0,o=n.dockBegin,j=n.dockEnd,s=n.pos,m=n.size,l=g!=null,p=f.shrinkWrap,a,t,r,h;if(p){if(d){h=0}else{a=q.bodyContext;h=k+a.borderInfo[m]}}else{t=q.frameBorder;r=q.framePadding;u=t[o]+r[o];h=q.getProp(m)-(t[j]+r[j])}return{shrinkWrap:f.shrinkWrap,sizeModel:f,initialBegin:u,begin:u,end:h,collapsed:d,horizontal:n.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:h-u,maxChildSize:0,hasMinMaxConstraints:(c||l)&&f.shrinkWrap,minSize:c,maxSize:l?g:1000000000,bodyPosProp:v.owner.manageHeight?s:n.marginBegin,dockBegin:o,dockEnd:j,posProp:s,sizeProp:m,setSize:n.setSize,shrinkWrapDock:q[n.shrinkWrapDock],sizeModelName:n.sizeModel,dockedPixelsEnd:0}},dockChild:function(b,c,m,f){var g=this,a=b.dockedItems[c.shrinkWrap?m:f],j=a.target,k=j.dock,d=c.sizeProp,h,l;if(j.ignoreParentFrame&&b.isCollapsingOrExpanding){a.clearMarginCache()}a.marginInfo||a.getMarginInfo();if(k==c.dockBegin){if(c.shrinkWrap){h=g.dockOutwardBegin(b,a,j,c)}else{h=g.dockInwardBegin(b,a,j,c)}}else{if(k==c.dockEnd){if(c.shrinkWrap){h=g.dockOutwardEnd(b,a,j,c)}else{h=g.dockInwardEnd(b,a,j,c)}}else{if(c.shrinkWrapDock){l=a.getProp(d)+a.marginInfo[d];c.maxChildSize=Math.max(c.maxChildSize,l);h=0}else{h=g.dockStretch(b,a,j,c)}}}a.dockedAt[c.posProp]=h},dockInwardBegin:function(b,a,k,d){var g=d.begin,f=d.sizeProp,c=k.ignoreParentFrame,h,l,j;if(c){d.ignoreFrameBegin=a;j=k.dock;h=b.frameBorder[j];g-=h+b.framePadding[j]}if(!k.overlay){l=a.getProp(f)+a.marginInfo[f];d.begin+=l;if(c){d.begin-=h}}return g},dockInwardEnd:function(f,d,c,b){var j=b.sizeProp,a=d.getProp(j)+d.marginInfo[j],h=b.end-a,g;if(!c.overlay){b.end=h}if(c.ignoreParentFrame){b.ignoreFrameEnd=d;g=f.frameBorder[c.dock];h+=g+f.framePadding[c.dock];b.end+=g}return h},dockOutwardBegin:function(f,d,c,b){var h=b.begin,g=b.sizeProp,a;if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameBegin=d}}if(!c.overlay){a=d.getProp(g)+d.marginInfo[g];h-=a;b.begin=h}return h},dockOutwardEnd:function(f,d,c,b){var h=b.end,g=b.sizeProp,a;a=d.getProp(g)+d.marginInfo[g];if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameEnd=d}}if(!c.overlay){b.end=h+a;b.dockedPixelsEnd+=a}return h},dockStretch:function(c,b,n,d){var o=n.dock,k=d.sizeProp,a=o=="top"||o=="bottom",j=c.frameBorder,f=b.offsets,m=c.framePadding,h=a?"right":"bottom",q=a?"left":"top",l=d.begin+f[q],g,p;if(n.stretch!==false){p=d.end-l-f[h];if(n.ignoreParentFrame){l-=m[q]+j[q];p+=m[k]+j[k]}g=b.marginInfo;p-=g[k];b[d.setSize](p)}return l},finishAxis:function(n,f){if(isNaN(f.maxChildSize)){return false}var d=f.begin,q=f.end-d,h=f.collapsed,x=f.setSize,l=f.dockBegin,v=f.dockEnd,p=n.framePadding,s=n.frameBorder,g=s[l],t=n.framing,o=t&&t[l],b=h?0:p[l],k=f.sizeProp,u=f.ignoreFrameBegin,r=f.ignoreFrameEnd,a=n.bodyContext,m=Math.max(g+b-o,0),c,y,w,j;if(f.shrinkWrap){y=f.initialSize;if(t){w=-d+g+b;c=w-o-m}else{c=-d;w=c+b}if(!h){q+=p[k]}if(u){w-=g;c-=g;u.dockedAt[f.posProp]-=b}else{q+=g}if(h){}else{if(r){r.dockedAt[f.posProp]+=p[v]}else{q+=s[v]}}f.size=q;if(!f.horizontal&&!this.owner.manageHeight){j=false}}else{if(t){w=0;c=d-o-m}else{w=-g;c=d-b-g}y=q}f.delta=w;a[x](y,j);a.setProp(f.bodyPosProp,c);return !isNaN(q)},beforeInvalidateShrinkWrapDock:function(c,b){var a=b.axis.sizeModelName;if(!c[a].constrainedMin){c[a]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(d,a){var b=a.axis,c=a.layout,f;if(d[b.sizeModelName].calculated){f=c.dockStretch(a.ownerContext,d,d.target,b);d.setProp(b.posProp,b.delta+f)}},finishConstraints:function(l,c,q){var t=this,s=t.sizeModels,p=c.shrinkWrap,r=q.shrinkWrap,a=t.owner,j,n,o,g,h,m,b,d,f,k;if(p){m=c.size;b=c.collapsed?0:c.minSize;d=c.maxSize;f=c.maxChildSize;k=Math.max(m,f);if(k>d){h=s.constrainedMax;o=d}else{if(k<b){h=s.constrainedMin;o=b}else{if(m<f){h=s.constrainedDock;a.dockConstrainedWidth=o=f}else{o=m}}}}if(r){m=q.size;b=q.collapsed?0:q.minSize;d=q.maxSize;f=q.maxChildSize;k=Math.max(m,f+m-q.initialSize);if(k>d){g=s.constrainedMax;n=d}else{if(k<b){g=s.constrainedMin;n=b}else{if(m<f){g=s.constrainedDock;a.dockConstrainedHeight=n=f}else{if(!l.collapsedVert&&!a.manageHeight){j=false;l.bodyContext.setProp("margin-bottom",q.dockedPixelsEnd)}n=m}}}}if(h||g){if(h&&g&&h.constrainedMax&&g.constrainedByMin){l.invalidate({widthModel:h});return false}if(!l.widthModel.calculatedFromShrinkWrap&&!l.heightModel.calculatedFromShrinkWrap){l.invalidate({widthModel:h,heightModel:g});return false}}else{t.invalidateAxes(l,c,q)}if(p){l.setWidth(o);if(h){l.widthModel=h}}if(r){l.setHeight(n,j);if(g){l.heightModel=g}}return true},invalidateAxes:function(g,a,l){var p=this.beforeInvalidateShrinkWrapDock,b=this.afterInvalidateShrinkWrapDock,f=a.end-a.begin,s=l.initialSize,c=a.shrinkWrapDock&&a.maxChildSize<=f,m=l.shrinkWrapDock&&l.maxChildSize<=s,q,n,k,d,r,o,h,j;if(c||m){if(m){l.begin=l.initialBegin;l.end=l.begin+l.initialSize}q=g.dockedItems;for(k=0,n=q.length;k<n;++k){d=q[k];o=d.horizontal;h=null;if(c&&o){j=a.sizeProp;r=f;h=a}else{if(m&&!o){j=l.sizeProp;r=s;h=l}}if(h){r-=d.getMarginInfo()[j];if(r!==d.props[j]){d.invalidate({before:p,after:b,axis:h,ownerContext:g,layout:this})}}}}},finishPositions:function(d,a,h){var k=d.dockedItems,c=k.length,g=a.delta,f=h.delta,j,b;for(j=0;j<c;++j){b=k[j];b.setProp("x",g+b.dockedAt.x);b.setProp("y",f+b.dockedAt.y)}},finishedLayout:function(b){var a=this,c=b.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!b.animatePolicy){if(b.isCollapsingOrExpanding===1){c.afterCollapse(false)}else{if(b.isCollapsingOrExpanding===2){c.afterExpand(false)}}}},getAnimatePolicy:function(c){var b=this,a,d;if(c.isCollapsingOrExpanding==1){a=b.lastCollapsedState}else{if(c.isCollapsingOrExpanding==2){a=c.lastCollapsedState}}if(a=="left"||a=="right"){d=b.horizontalCollapsePolicy}else{if(a=="top"||a=="bottom"){d=b.verticalCollapsePolicy}}return d},getDockedItems:function(c,n){var j=this,f=(c==="visual"),k=f?Ext.ComponentQuery.query("[rendered]",j.owner.dockedItems.items):j.owner.dockedItems.items,h=k&&k.length&&c!==false,b,m,l,g,d,a;if(n==null){l=h&&!f?k.slice():k}else{l=[];for(g=0,a=k.length;g<a;++g){m=k[g].dock;d=(m=="top"||m=="left");if(n?d:!d){l.push(k[g])}}h=h&&l.length}if(h){b=(c=c||"render")=="render";Ext.Array.sort(l,function(p,o){var q,r;if(b&&((q=j.owner.dockOrder[p.dock])!==(r=j.owner.dockOrder[o.dock]))){if(!(q+r)){return q-r}}q=j.getItemWeight(p,c);r=j.getItemWeight(o,c);if((q!==undefined)&&(r!==undefined)){return q-r}return 0})}return l||[]},getItemWeight:function(b,a){var c=b.weight||this.owner.defaultDockWeights[b.dock];return c[a]||c},getLayoutItems:function(){var f=this,b,g,d,c,a;if(f.owner.collapsed){a=f.owner.getCollapsedDockedItems()}else{b=f.getDockedItems("visual");g=b.length;a=[];for(c=0;c<g;c++){d=b[c];if(!d.hidden){a.push(d)}}}return a},measureContentWidth:function(a){var b=a.bodyContext;return b.el.getWidth()-b.getBorderInfo().width},measureContentHeight:function(a){var b=a.bodyContext;return b.el.getHeight()-b.getBorderInfo().height},redoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding==1){if(a.reExpander){a.reExpander.el.show()}a.addClsWithUI(a.collapsedCls);c.redo(true)}else{if(c.isCollapsingOrExpanding==2){a.removeClsWithUI(a.collapsedCls);c.bodyContext.redo()}}},renderChildren:function(){var b=this,a=b.getDockedItems(),c=b.getRenderTarget();b.handleItemBorders();b.renderItems(a,c)},renderItems:function(k,h){var l=this,c=k.length,a=0,b=0,p=0,m=l.getRenderTarget().dom.childNodes,n=m.length,g,d,f,o;for(g=0,d=0;g<n;g++){f=m[g];if(f.nodeType===1&&Ext.fly(f).hasCls("x-resizable-handle")){break}for(d=0;d<c;d++){o=k[d];if(o.rendered&&o.el.dom===f){break}}if(d===c){p++}}for(;a<c;a++,b++){o=k[a];if(a===b&&(o.dock==="right"||o.dock==="bottom")){b+=p}if(o&&!o.rendered){l.renderItem(o,h,b)}else{if(!l.isValidParent(o,h,b)){l.moveItem(o,h,b)}}}},undoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding==1){if(a.reExpander){a.reExpander.el.hide()}a.removeClsWithUI(a.collapsedCls);c.undo(true)}else{if(c.isCollapsingOrExpanding==2){a.addClsWithUI(a.collapsedCls);c.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(d,g){var c=this,h=c.sizePolicy,f=c.owner.shrinkWrapDock,b,a;if(d.stretch===false){return h.nostretch}b=d.dock;a=(b=="left"||b=="right");f=f===true?3:(f||0);if(a){h=h.vert;f=f&1}else{h=h.horz;f=f&2}if(f){if(!g){g=c.owner.getSizeModel()}if(g[a?"height":"width"].shrinkWrap){return h.shrinkWrap}}return h.stretch},configureItem:function(a,b){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);a.addCls(this._itemCls);if(!a.ignoreBorderManagement){a.addClsWithUI(this.getDockCls(a.dock))}},getDockCls:function(a){return"docked-"+a},afterRemove:function(a){var b;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);a.removeCls(this._itemCls);if(!a.ignoreBorderManagement){a.removeClsWithUI(this.getDockCls(a.dock))}b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var d=this,g=d.borderCollapseMap,a=d.owner,b=a.baseCls,f=a.ui,c;g=g[b]||(g[b]={});c=g[f];if(!c){b+="-"+f+"-outer-border-";g[f]=c=[0,b+"l",b+"b",b+"bl",b+"r",b+"rl",b+"rb",b+"rbl",b+"t",b+"tl",b+"tb",b+"tbl",b+"tr",b+"trl",b+"trb",b+"trbl"]}return c}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));Ext.define("ExtThemeNeptune.layout.component.Dock",{override:"Ext.layout.component.Dock",noBorderClassTable:[0,"x-noborder-l","x-noborder-b","x-noborder-bl","x-noborder-r","x-noborder-rl","x-noborder-rb","x-noborder-rbl","x-noborder-t","x-noborder-tl","x-noborder-tb","x-noborder-tbl","x-noborder-tr","x-noborder-trl","x-noborder-trb","x-noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var z=this,g=0,A=8,B=4,m=2,f=1,a=z.owner,t=a.bodyBorder,o=a.border,k=z.collapsed,q=z.edgeMasks,l=z.noBorderClassTable,y=a.dockedItems.generation,x,d,w,j,s,n,v,p,h,r,u,c;if(z.initializedBorders===y){return}u=[];c=[];d=z.getBorderCollapseTable();l=z.getBorderClassTable?z.getBorderClassTable():l;z.initializedBorders=y;z.collapsed=false;w=z.getDockedItems();z.collapsed=k;for(s=0,n=w.length;s<n;s++){v=w[s];if(v.ignoreBorderManagement){continue}p=v.dock;r=j=0;u.length=0;c.length=0;if(p!=="bottom"){if(g&A){x=v.border}else{x=o;if(x!==false){j+=A}}if(x===false){r+=A}}if(p!=="left"){if(g&B){x=v.border}else{x=o;if(x!==false){j+=B}}if(x===false){r+=B}}if(p!=="top"){if(g&m){x=v.border}else{x=o;if(x!==false){j+=m}}if(x===false){r+=m}}if(p!=="right"){if(g&f){x=v.border}else{x=o;if(x!==false){j+=f}}if(x===false){r+=f}}if((h=v.lastBorderMask)!==r){v.lastBorderMask=r;if(h){c[0]=l[h]}if(r){u[0]=l[r]}}if((h=v.lastBorderCollapse)!==j){v.lastBorderCollapse=j;if(h){c[c.length]=d[h]}if(j){u[u.length]=d[j]}}if(c.length){v.removeCls(c)}if(u.length){v.addCls(u)}g|=q[p]}r=j=0;u.length=0;c.length=0;if(g&A){x=t}else{x=o;if(x!==false){j+=A}}if(x===false){r+=A}if(g&B){x=t}else{x=o;if(x!==false){j+=B}}if(x===false){r+=B}if(g&m){x=t}else{x=o;if(x!==false){j+=m}}if(x===false){r+=m}if(g&f){x=t}else{x=o;if(x!==false){j+=f}}if(x===false){r+=f}if((h=z.lastBodyBorderMask)!==r){z.lastBodyBorderMask=r;if(h){c[0]=l[h]}if(r){u[0]=l[r]}}if((h=z.lastBodyBorderCollapse)!==j){z.lastBodyBorderCollapse=j;if(h){c[c.length]=d[h]}if(j){u[u.length]=d[j]}}if(c.length){a.removeBodyCls(c)}if(u.length){a.addBodyCls(u)}},onRemove:function(b){var a=b.lastBorderMask;if(!b.isDestroyed&&!b.ignoreBorderManagement&&a){b.lastBorderMask=0;b.removeCls(this.noBorderClassTable[a])}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,b)}});(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function d(j,h,k,g){j[g?g+k:k]=h[k]}function c(h,g,j){delete h[j]}function f(l,k,m,j){var g=j?j+m:m,h=l[g];if(h||l.hasOwnProperty(g)){a(k,m,h)}}function a(h,j,g){if(Ext.isDefined(g)){h[j]=g}else{delete h[j]}}function b(h,n,m,j,k){if(n){if(Ext.isArray(j)){var l,g=j.length;for(l=0;l<g;l++){h(n,m,j[l],k)}}else{h(n,m,j,k)}}}return{data:null,target:null,constructor:function(h,g){this.data={};if(h){this.target=h;if(g){this.capture(g)}}},capture:function(g,k,j){var h=this;b(d,h.data||(h.data={}),k||h.target,g,j)},remove:function(g){b(c,this.data,null,g)},restore:function(h,g,k,j){b(f,this.data,k||this.target,h,j);if(g!==false){this.remove(h)}},restoreAll:function(g,l){var j=this,h=l||this.target,k=j.data,m;g=g!==false;for(m in k){if(k.hasOwnProperty(m)){a(h,m,k[m]);if(g){delete k[m]}}}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(b,h){var g=this,c=0,a,f,d;b=g.prepareItems(b);d=b.length;for(;c<d;c++){f=b[c];f.dock=f.dock||"top";if(f.dock==="left"||f.dock==="right"){g.horizontalDocks++}if(h!==undefined){c+=h;g.dockedItems.insert(c,f)}else{g.dockedItems.add(f)}a=!!f.instancedCmp;delete f.instancedCmp;f.onAdded(g,c,a);delete f.initOwnerCt;if(g.hasListeners.dockedadd){g.fireEvent("dockedadd",g,f,c)}if(g.onDockedAdd!==Ext.emptyFn){g.onDockedAdd(f)}}if(g.rendered&&!g.suspendLayout){g.updateLayout()}return b},destroyDockedItems:function(){var a=this.dockedItems,b;if(a){while((b=a.first())){this.removeDocked(b,true)}}},doRenderDockedItems:function(c,g,h){var f=g.$comp,d=f.componentLayout,b,a;if(d.getDockedItems&&!g.$skipDockedItems){b=d.getDockedItems("render",!h);a=b&&d.getItemsRenderTree(b);if(a){Ext.DomHelper.generateMarkup(a,c)}}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getDockedItems:function(a,c){var b=this.getComponentLayout().getDockedItems("render",c);if(a&&b.length){b=Ext.ComponentQuery.query(a,b)}return b},getDockingRefItems:function(b,f){var a=b&&"*,* *",d=this.getDockedItems(a,true),c;d.push.apply(d,f);c=this.getDockedItems(a,false);d.push.apply(d,c);return d},initDockingItems:function(){var b=this,a=b.dockedItems;if(!a||!a.isMixedCollection){b.dockedItems=new Ext.util.AbstractMixedCollection(false,b.getComponentId);if(a){b.addDocked(a)}}},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(f,b){var d=this,c,a;b=b===true||(b!==false&&d.autoDestroy);if(!d.dockedItems.contains(f)){return f}if(f.dock==="left"||f.dock==="right"){d.horizontalDocks--}c=d.componentLayout;a=c&&d.rendered;if(a){c.onRemove(f)}d.dockedItems.remove(f);f.onRemoved(f.destroying||b);d.onDockedRemove(f);if(b){f.destroy()}else{if(a){c.afterRemove(f)}}if(d.hasListeners.dockedremove){d.fireEvent("dockedremove",d,f)}if(!d.destroying&&!d.suspendLayout){d.updateLayout()}return f},moveDocked:function(b,a){if(this.rendered){Ext.suspendLayouts()}this.removeDocked(b,false);b.dock=a;this.addDocked(b);if(this.rendered){if(b.frame){Ext.getDetachedBody().appendChild(b.el);b.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["body"],renderTpl:["{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyRole"> role="{bodyRole}"<tpl else> role="presentation"</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.addCls(b);return c},addTool:function(f){if(!Ext.isArray(f)){f=[f]}var d=this,h=d.header,a=f.length,g=d.tools,c,b;if(!h||!h.isHeader){h=null;if(!g){d.tools=g=[]}}for(c=0;c<a;c++){b=f[c];b.toolOwner=d;if(h){h.addTool(b)}else{g.push(b)}}d.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(c){var b=this,d=b.collapsible,a=b.collapseTool;b.collapsible=c;if(c&&!d){b.updateCollapseTool();a=b.collapseTool;if(a){a.show()}}else{if(!c&&d){if(a){a.hide()}}}},addUIClsToElement:function(b){var c=this,a=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);c.addBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},afterCollapse:function(b){var a=this,c=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(b){a.removeCls("x-animating-size")}a.setHiddenDocked();a.fireEvent("collapse",a)},afterExpand:function(b){var a=this,c=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(b){a.removeCls("x-animating-size")}a.fireEvent("expand",a);a.fireHierarchyEvent("expand")},beforeDestroy:function(){var a=this;Ext.destroy(a.placeholder,a.ghostPanel,a.dd);this.destroyDockedItems();Ext.container.Container.prototype.beforeDestroy.call(this)},beforeRender:function(){var b=this,a;Ext.container.Container.prototype.beforeRender.call(this);b.initTools();if(!(b.preventHeader||(b.header===false))){b.updateHeader()}if(b.collapsed){if(b.isPlaceHolderCollapse()){if(!b.hidden){b.setHiddenState(true);b.preventCollapseFire=true;b.placeholderCollapse();delete b.preventCollapseFire;a=b.collapsed;b.collapsed=false}}else{b.beginCollapse();b.addClsWithUI(b.collapsedCls)}}if(a){b.collapsed=a}},getMemento:function(a){var b=this;if(a&&typeof a=="string"){a+="Memento";return b[a]||(b[a]=new Ext.util.Memento(b))}},beginCollapse:function(){var f=this,c=f.lastBox,h=f.rendered,b=f.getMemento("collapse"),d=f.getSizeModel(),g=f.header,a;b.capture(["height","minHeight","width","minWidth"]);if(c){b.capture(f.restoreDimension(),c,"last.")}if(f.collapsedVertical()){if(d.width.shrinkWrap){f.width=h?f.getWidth():f.width||f.minWidth||100}delete f.height;f.minHeight=0}else{if(f.collapsedHorizontal()){if(d.height.shrinkWrap){f.height=h?f.getHeight():f.height||f.minHeight||100}delete f.width;f.minWidth=0}}if(f.ownerCt){f.ownerCt.getLayout().beginCollapse(f)}if(!f.isPlaceHolderCollapse()&&g!==false){if(g===(a=f.getReExpander())){g.collapseImmune=true;g.getInherited().collapseImmune=true;g.addClsWithUI(f.getHeaderCollapsedClasses(g));if(g.rendered){g.updateFrame()}}else{if(a.el){a.el.show();a.hidden=false}}}if(f.resizer){f.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var f=this,d=f.lastBox,c=f.getMemento("collapse"),a=f.restoreDimension(),g=f.header,b;if(c){c.restore(["minHeight","minWidth",a]);if(d){c.restore(a,true,d,"last.")}}if(f.ownerCt){f.ownerCt.getLayout().beginExpand(f)}if(!f.isPlaceHolderCollapse()&&g!==false){if(g===(b=f.getReExpander())){delete g.collapseImmune;delete g.getInherited().collapseImmune;g.removeClsWithUI(f.getHeaderCollapsedClasses(g));if(g.rendered){g.expanding=true;g.updateFrame();delete g.expanding}}else{b.hidden=true;b.el.hide()}}if(f.resizer){f.resizer.enable()}},bridgeToolbars:function(){var a=this,g=[],f=a.minButtonWidth,c,b;function d(h,k,j){if(Ext.isArray(h)){h={xtype:"toolbar",items:h}}else{if(!h.xtype){h.xtype="toolbar"}}h.dock=k;if(k=="left"||k=="right"){h.vertical=true}if(j){h.layout=Ext.applyIf(h.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})}return h}if(a.tbar){g.push(d(a.tbar,"top"));a.tbar=null}if(a.bbar){g.push(d(a.bbar,"bottom"));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null}if(a.fbar){c=d(a.fbar,"bottom",true);c.ui="footer";if(f){b=c.defaults;c.defaults=function(k){var l=b||{},j=!k.xtype||k.isButton,h;if(!j){h=Ext.ClassManager.getByAlias("widget."+k.xtype);if(h){j=h.prototype.isButton}}if(j&&!("minWidth" in l)){l=Ext.apply({minWidth:f},l)}return l}}g.push(c);a.fbar=null}if(a.lbar){g.push(d(a.lbar,"left"));a.lbar=null}if(a.rbar){g.push(d(a.rbar,"right"));a.rbar=null}if(a.dockedItems){if(a.dockedItems.isMixedCollection){a.addDocked(g)}else{if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(g)}}else{a.dockedItems=g}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(f,a){var d=this,g=f||d.collapseDirection,b=d.ownerCt,c=d.ownerLayout,h=d.rendered;if(d.isCollapsingOrExpanding){return d}if(arguments.length<2){a=d.animCollapse}if(d.collapsed||d.fireEvent("beforecollapse",d,f,a)===false){return d}if(c&&c.onBeforeComponentCollapse){if(c.onBeforeComponentCollapse(d)===false){return d}}if(h&&b&&d.isPlaceHolderCollapse()){return d.placeholderCollapse(f,a)}d.collapsed=g;if(h){d.beginCollapse()}d.getInherited().collapsed=true;d.fireHierarchyEvent("collapse");if(h){d.doCollapseExpand(1,a)}return d},collapsedHorizontal:function(){var a=this.getCollapsed();return a==="left"||a==="right"},collapsedVertical:function(){var a=this.getCollapsed();return a==="top"||a==="bottom"},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(a){var b=this,d=b.header,c=b.frame&&!b.alwaysFramed;return{xtype:"panel",hidden:false,header:d?{titleAlign:d.getTitleAlign()}:null,ui:c?b.ui.replace(/-framed$/,""):b.ui,id:b.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,floating:{shadow:false},frame:c,alwaysFramed:b.alwaysFramed,overlapHeader:b.overlapHeader,headerPosition:b.getHeaderPosition(),titleRotation:b.getTitleRotation(),baseCls:b.baseCls,getRefOwner:function(){return b.getRefOwner()},cls:b.baseCls+"-ghost "+(a||"")}},createReExpander:function(g,f){var d=this,j=g==="left",c=g==="right",h=j||c,b=d.ownerCt,a=Ext.apply({hideMode:"offsets",title:d.getTitle(),titleAlign:d.getTitleAlign(),vertical:h,textCls:d.headerTextCls,icon:d.getIcon(),iconCls:d.getIconCls(),iconAlign:d.getIconAlign(),glyph:d.getGlyph(),baseCls:d.self.prototype.baseCls+"-header",ui:d.ui,frame:d.frame&&d.frameHeader,ignoreParentFrame:d.frame||d.overlapHeader,ignoreBorderManagement:d.frame||d.ignoreHeaderBorderManagement,indicateDrag:d.draggable,collapseImmune:true,headerRole:d.headerRole,ownerCt:(b&&d.collapseMode==="placeholder")?b:d,ownerLayout:d.componentLayout,margin:d.margin},f);if(d.collapseMode==="mini"){if(h){a.width=1}else{a.height=1}}if(!d.hideCollapseTool){if(j||(c&&d.isPlaceHolderCollapse())){a.titlePosition=1}a.tools=[{xtype:"tool",type:"expand-"+d.getOppositeDirection(g),uiCls:["top"],handler:d.toggleCollapse,scope:d}]}a=new Ext.panel.Header(a);a.addClsWithUI(d.getHeaderCollapsedClasses(a));return a},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(a,b){var d=this,c=d.animCollapse,f=d.ownerLayout;d.animCollapse=b;d.isCollapsingOrExpanding=a;if(b){d.addCls("x-animating-size")}if(f&&!b){f.onContentChange(d)}else{d.updateLayout({isRoot:true})}d.animCollapse=c;return d},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(a){var c=this,b=c.ownerLayout,d=c.rendered;if(c.isCollapsingOrExpanding){return c}if(!arguments.length){a=c.animCollapse}if(!c.collapsed&&!c.floatedFromCollapse){return c}if(c.fireEvent("beforeexpand",c,a)===false){return c}if(b&&b.onBeforeComponentExpand){if(b.onBeforeComponentExpand(c)===false){return c}}delete c.getInherited().collapsed;if(d&&c.isPlaceHolderCollapse()){return c.placeholderExpand(a)}c.restoreHiddenDocked();if(d){c.beginExpand()}c.collapsed=false;if(c.rendered){c.doCollapseExpand(2,a)}return c},findReExpander:function(h){var g=this,j=Ext.Component,f=g.dockedItems.items,a=f.length,b,d;if(g.collapseMode==="mini"){return}switch(h){case j.DIRECTION_TOP:case j.DIRECTION_BOTTOM:for(d=0;d<a;d++){b=f[d];if(!b.hidden){if(b.isHeader&&(!b.dock||b.dock==="top"||b.dock==="bottom")){return b}}}break;case j.DIRECTION_LEFT:case j.DIRECTION_RIGHT:for(d=0;d<a;d++){b=f[d];if(!b.hidden){if(b.isHeader&&(b.dock==="left"||b.dock==="right")){return b}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var h=this,j=h.placeholder,a=j.getSize(),f,g="x-border-region-slide-in",d=h.collapsed,k=h.ownerCt||h,b,c;if(h.isSliding){return}if(h.el.hasCls(g)){h.slideOutFloatedPanel();return}h.isSliding=true;j.el.hide();j.hidden=true;h.el.show();h.setHiddenState(false);h.collapsed=false;k.updateLayout();f=h.getBox(false,true);j.el.show();j.hidden=false;h.el.hide();h.setHiddenState(true);h.collapsed=d;k.updateLayout();h.slideOutTask=h.slideOutTask||new Ext.util.DelayedTask(h.slideOutFloatedPanel,h);if(Ext.supports.Touch){Ext.on("mousedown",c=function(l){if(!l.within(h.el)){Ext.un("mousedown",c);h.slideOutFloatedPanel()}});if(!h.placeholderListener){h.placeholderListener=j.on({resize:h.onPlaceholderResize,scope:h,destroyable:true})}}j.el.on("mouseleave",h.onMouseLeaveFloated,h);h.el.on("mouseleave",h.onMouseLeaveFloated,h);j.el.on("mouseenter",h.onMouseEnterFloated,h);h.el.on("mouseenter",h.onMouseEnterFloated,h);h.el.addCls(g);h.floated=d;if(h.collapseTool){h.collapseTool.el.hide()}switch(h.collapsed){case"top":h.setLocalXY(f.x,f.y+a.height-1);break;case"right":h.setLocalXY(f.x-a.width+1,f.y);break;case"bottom":h.setLocalXY(f.x,f.y-a.height+1);break;case"left":h.setLocalXY(f.x+a.width-1,f.y);break}b=h.convertCollapseDir(h.collapsed);h.floatedFromCollapse=h.collapsed;h.collapsed=false;h.setHiddenState(false);h.el.slideIn(b,{preserveScroll:true,duration:Ext.Number.from(h.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){h.isSliding=false;h.fireEvent("float",h)}}})},onPlaceholderResize:function(f,c,a){var b=this,d=b.getBox(false,true),g=b.placeholder.getBox(false,true);switch(b.floated){case"top":this.width=c;b.setLocalY(g.y+g.height);break;case"right":this.height=a;b.setLocalX(g.x-d.width);break;case"bottom":this.width=c;b.setLocalY(g.y-d.height);break;case"left":this.height=a;b.setLocalX(g.x+g.width);break}this.updateLayout({isRoot:true})},getAnimationProps:function(){var b=this,c=b.animCollapse,a;a=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof c==="number"){a.duration=c}return a},getCollapsed:function(){var a=this;if(a.collapsed===true){return a.collapseDirection}return a.collapsed},getCollapsedDockedItems:function(){var a=this;return a.header===false||a.collapseMode=="placeholder"?a.emptyArray:[a.getReExpander()]},getComponent:function(a){var b=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(b===undefined&&!Ext.isNumber(a)){b=this.getDockedComponent(a)}return b},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(d){var b=this,c=b.collapsedCls,a;a=[c,c+"-"+d.getDockName()];if(b.border&&(!b.frame||(b.frame&&Ext.supports.CSS3BorderRadius))){a.push(c+"-border-"+d.getDockName())}return a},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},getPlaceholder:function(f){var d=this,h=f||d.collapseDirection,c=null,g=d.placeholder,b=d.floatable,a=d.titleCollapse;if(!g){if(b||(d.collapsible&&a)){c={click:{fn:(!a&&b)?d.floatCollapsedPanel:d.toggleCollapse,element:"el",scope:d}}}d.placeholder=g=Ext.widget(d.createReExpander(h,{id:d.id+"-placeholder",listeners:c}))}if(!g.placeholderFor){if(!g.isComponent){d.placeholder=g=d.lookupComponent(g)}Ext.applyIf(g,{margin:d.margin,placeholderFor:d,synthetic:true});g.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+h+"-placeholder",d.collapsedCls])}return g},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({cls:b.bodyCls,style:b.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return a},getReExpander:function(c){var b=this,d=c||b.collapseDirection,a=b.reExpander||b.findReExpander(d);b.expandDirection=b.getOppositeDirection(d);if(!a){b.reExpander=a=b.createReExpander(d,{dock:d,cls:"x-docked "+b.baseCls+"-"+b.ui+"-collapsed",isCollapsedExpander:true});b.dockedItems.insert(0,a)}return a},getRefItems:function(a){var b=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(a,b)},getState:function(){var a=this,c=Ext.container.Container.prototype.getState.call(this)||{},f=a.collapsed,b=a.floated,d;if(b){a.collapsed=b}c=a.addPropertyToState(c,"collapsed");if(b){a.collapsed=f}if(a.getCollapsed()){d=a.getMemento("collapse").data;c=a.addPropertyToState(c,"collapsed",d);if(a.collapsedVertical()){delete c.height;if(d){c=a.addPropertyToState(c,"height",d.height)}}else{delete c.width;if(d){c=a.addPropertyToState(c,"width",d.width)}}}return c},applyState:function(c){var b=this,a={},d;if(c){d=c.collapsed;if(d){a=b.getMemento("collapse");Ext.Object.merge(a.data,d);c.collapsed=true}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(m){var h=this,a=h.ghostPanel,d=h.getBox(),c=h.header,k,f,j,l,g,b;if(!a){h.ghostPanel=a=Ext.widget(h.createGhost(m))}else{a.el.show()}a.setHiddenState(false);a.floatParent=h.floatParent;a.toFront();if(c&&!h.preventHeader){k=a.header;k.suspendLayouts();f=k.query("tool");for(b=f.length;b--;){k.remove(f[b])}k.setTitlePosition(0);a.addTool(h.ghostTools());a.setTitle(h.getTitle());k.setTitlePosition(c.titlePosition);l=h.getIconCls();if(l){a.setIconCls(l)}else{j=h.getIcon();if(j){a.setIcon(j)}else{g=h.getGlyph();if(g){a.setGlyph(g)}}}k.addCls("x-header-ghost");k.resumeLayouts()}a.setPagePosition(d.x,d.y);a.setSize(d.width,d.height);h.el.hide();return a},ghostTools:function(){var f=[],g=this.header,d=g?g.query("tool[hidden=false]"):[],c,a,b;if(d.length){c=0;a=d.length;for(;c<a;c++){b=d[c];f.push({type:b.type})}}else{f=[{type:"placeholder"}]}return f},initBodyBorder:function(){var a=this;if(a.frame&&a.bodyBorder){if(!Ext.isNumber(a.bodyBorder)){a.bodyBorder=1}a.getProtoBody().setStyle("border-width",this.unitizeBox(a.bodyBorder))}},initBodyStyles:function(){var b=this,a=b.getProtoBody();if(b.bodyPadding!==undefined){if(b.layout.managePadding){a.setStyle("padding",0)}else{a.setStyle("padding",this.unitizeBox((b.bodyPadding===true)?5:b.bodyPadding))}}b.initBodyBorder()},initBorderProps:function(){var a=this;if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=false}if(a.frame&&a.border&&(a.bodyBorder===false||a.bodyBorder===0)){a.manageBodyBorders=true}},initComponent:function(){var a=this;if(a.collapsible){a.addStateEvents(["expand","collapse"])}if(a.unstyled){a.setUI("plain")}if(a.frame){a.setUI(a.ui+"-framed")}a.bridgeToolbars();a.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP;a.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);a.initBodyStyles();a.protoBody.writeTo(b);delete a.protoBody;return b},calculateConstrainedPosition:function(f,b,d,a){var g=this,c;if(g.constrainHeader){if(a){if(!g.header.vertical){a=[a[0],g.header.lastBox.height]}else{a=[g.header.lastBox.width,a[1]]}}else{a=[g.header.lastBox.width,g.header.lastBox.height]}c=g.floatParent;f=f||g.constrainTo||(c?c.getTargetEl():null)||g.container||g.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,f,b,d,a)},initTools:function(){var c=this,d=c.tools,b,a;c.tools=[];for(b=d&&d.length;b;){--b;c.tools[b]=a=d[b];a.toolOwner=c}if(c.collapsible&&!(c.hideCollapseTool||c.header===false||c.preventHeader)){c.updateCollapseTool();if(c.collapseFirst){c.tools.unshift(c.collapseTool)}}c.addTools();if(c.pinnable){c.initPinnable()}if(c.closable){c.addClsWithUI("closable");c.addTool({xtype:"tool",type:"close",scope:c,handler:c.close})}if(c.collapseTool&&!c.collapseFirst){c.addTool(c.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode=="placeholder"},isVisible:function(a){var b=this;if(b.collapsed&&b.placeholder){return b.placeholder.isVisible(a)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){Ext.container.Container.prototype.onBoxReady.call(this);if(this.collapsed){this.setHiddenDocked()}},onHide:function(){var b=this,a=b.dd;if(b.floatedFromCollapse){b.slideOutFloatedPanel(true)}if(b.draggable&&a){a.endDrag()}if(b.collapsed&&b.placeholder){b.placeholder.hide()}else{Ext.container.Container.prototype.onHide.apply(this,arguments)}},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(a){this.slideOutTask.delay(500)},onRemoved:function(b){var a=this;if(a.placeholder&&!b){a.ownerCt.remove(a.placeholder,false)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var a=this;if(a.collapsed&&a.isPlaceHolderCollapse()){a.setHiddenState(true);a.placeholderCollapse()}else{Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(g,a){var d=this,c=d.ownerCt,j=g||d.collapseDirection,b="x-border-region-slide-in",h=d.getPlaceholder(j),f;d.isCollapsingOrExpanding=1;d.setHiddenState(true);d.collapsed=j;if(h.rendered){if(h.el.dom.parentNode!==d.el.dom.parentNode){d.el.dom.parentNode.insertBefore(h.el.dom,d.el.dom)}h.hidden=false;h.setHiddenState(false);h.el.show();c.updateLayout()}else{c.insert(c.items.indexOf(d),h)}if(d.rendered){d.el.setVisibilityMode(d.placeholderCollapseHideMode);if(a){d.el.addCls(b);h.el.hide();f=d.convertCollapseDir(j);d.el.slideOut(f,{preserveScroll:true,duration:Ext.Number.from(a,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){d.el.removeCls(b);h.el.show().setStyle("display","none").slideIn(f,{easing:"linear",duration:100,listeners:{afteranimate:function(){h.focus();h.setHiddenState(false);d.isCollapsingOrExpanding=0;d.fireEvent("collapse",d)}}})}}})}else{d.el.hide();h.setHiddenState(false);d.isCollapsingOrExpanding=0;d.fireEvent("collapse",d)}}else{d.isCollapsingOrExpanding=0;if(!d.preventCollapseFire){d.fireEvent("collapse",d)}}return d},placeholderExpand:function(c){var f=this,h=f.collapsed,d="x-border-region-slide-in",g,b,a=f.ownerLayout?f.ownerLayout.centerRegion:null;if(Ext.Component.layoutSuspendCount){c=false}if(f.floatedFromCollapse){b=f.getPosition(true);f.slideOutFloatedPanelBegin();f.slideOutFloatedPanelEnd();f.floated=false}if(c){Ext.suspendLayouts();f.placeholder.hide();f.el.show();f.collapsed=false;f.setHiddenState(false);if(a&&!b){a.hidden=true}Ext.resumeLayouts(true);a.hidden=false;f.el.addCls(d);f.isCollapsingOrExpanding=2;if(b){g=f.getXY();f.setLocalXY(b[0],b[1]);f.setXY([g[0],g[1]],{duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){f.el.removeCls(d);f.isCollapsingOrExpanding=0;f.fireEvent("expand",f)}}})}else{f.el.hide();f.placeholder.el.show();f.placeholder.hidden=false;f.setHiddenState(false);f.el.slideIn(f.convertCollapseDir(h),{preserveScroll:true,duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){f.el.removeCls(d);f.placeholder.hide();f.updateLayout();f.isCollapsingOrExpanding=0;f.fireEvent("expand",f)}}})}}else{f.floated=f.collapsed=false;f.el.removeCls(d);Ext.suspendLayouts();f.placeholder.hide();f.show();Ext.resumeLayouts(true);f.fireEvent("expand",f)}return f},removeBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.removeCls(b);return c},removeUIClsFromElement:function(b){var c=this,a=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);c.removeBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},restoreDimension:function(){var a=this.collapseDirection;return(a==="top"||a==="bottom")?"height":"width"},restoreHiddenDocked:function(){var a=this.hiddenOnCollapse;a.setStyle("visibility","");a.clear()},setBodyStyle:function(b,d){var c=this,a=c.rendered?c.body:c.getProtoBody();if(Ext.isFunction(b)){b=b()}if(arguments.length==1){if(Ext.isString(b)){b=Ext.Element.parseStyles(b)}a.setStyle(b)}else{a.setStyle(b,d)}return c},setBorder:function(a,c){if(c){return}var b=this,d=b.header;if(!a){a=0}else{if(a===true){a="1px"}else{a=b.unitizeBox(a)}}if(d){if(d.isHeader){d.setBorder(a)}else{d.border=a}}if(b.rendered&&b.bodyBorder!==false){b.body.setStyle("border-width",a)}b.updateLayout();b.border=a},setCollapsed:function(a){this[a?"collapse":"expand"]()},setGlyph:function(c){var b=this,a=b.glyph,f=b.header,d=b.placeholder;if(c!==a){b.glyph=c;if(f){if(f.isHeader){f.setGlyph(c)}else{f.glyph=c}}else{if(b.rendered){b.updateHeader()}}if(d&&d.setGlyph){d.setGlyph(c)}b.fireEvent("glyphchange",b,c,a)}},setIcon:function(a){var b=this,c=b.icon,f=b.header,d=b.placeholder;if(a!==c){b.icon=a;if(f){if(f.isHeader){f.setIcon(a)}else{f.icon=a}}else{if(b.rendered){b.updateHeader()}}if(d&&d.setIcon){d.setIcon(a)}b.fireEvent("iconchange",b,a,c)}},setIconCls:function(b){var c=this,a=c.iconCls,f=c.header,d=c.placeholder;if(b!==a){c.iconCls=b;if(f){if(f.isHeader){f.setIconCls(b)}else{f.iconCls=b}}else{if(c.rendered){c.updateHeader()}}if(d&&d.setIconCls){d.setIconCls(b)}c.fireEvent("iconclschange",c,b,a)}},setTitle:function(f){var c=this,b=c.title,g=c.header,a=c.reExpander,d=c.placeholder;if(f!==b){c.title=f;if(g){if(g.isHeader){g.setTitle(f)}}else{if(c.rendered){c.updateHeader()}}if(a){a.setTitle(f)}if(d&&d.setTitle){d.setTitle(f)}c.fireEvent("titlechange",c,f,b)}},setHiddenDocked:function(){var h=this,d=h.hiddenOnCollapse,c=h.getDockedItems(),a=c.length,f=0,g,b;if(h.header!==false){b=h.getReExpander()}d.add(h.body);for(;f<a;f++){g=c[f];if(g&&g!==b&&g.el){d.add(g.el)}}d.setStyle("visibility","hidden")},setUI:function(b){var a=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(a.header&&a.header.rendered){a.header.setUI(b)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var b=this,a=b.collapseTool;if(!a&&b.collapsible){b.collapseDirection=b.collapseDirection||b.getHeaderPosition()||"top";b.collapseTool=b.expandTool=a=Ext.widget({xtype:"tool",handler:b.toggleCollapse,scope:b})}if(a){if(b.collapsed&&!b.isPlaceHolderCollapse()){a.setType("expand-"+b.getOppositeDirection(b.collapseDirection))}else{a.setType("collapse-"+b.collapseDirection)}}},updateHeaderPosition:function(a){var b=this.header;if(b&&b.isHeader){b.setDock(a)}},updateIconAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setIconAlign(b)}},updateTitleAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setTitleAlign(b)}},updateTitleRotation:function(a){var b=this.header;if(b&&b.isHeader){b.setTitleRotation(a)}},unghost:function(c,a,b){var f=this,d=f.ghostPanel;if(!d){return}if(c!==false){f.el.show();if(a!==false){f.setPagePosition(d.getXY());if(f.hideMode==="offsets"){delete f.el.hideModeStyles}}if(b){f.focus(false,10)}}d.el.hide();d.setHiddenState(true)},updateHeader:function(a){var h=this,d=h.header,l=h.getTitle(),g=h.tools,k=h.getIcon(),j=h.getGlyph(),m=h.getIconCls(),c=j||k||m,f=h.getHeaderPosition(),b=f==="left"||f==="right";if(Ext.isObject(d)||(d!==false&&(a||(l||c)||(g&&g.length)||(h.collapsible&&!h.titleCollapse)))){if(d&&d.isHeader){d.show()}else{d=h.header=Ext.widget(Ext.merge({xtype:"header",title:l,titleAlign:h.getTitleAlign(),vertical:b,dock:h.getHeaderPosition()||"top",titleRotation:h.getTitleRotation(),textCls:h.headerTextCls,iconCls:m,iconAlign:h.getIconAlign(),icon:k,glyph:j,baseCls:h.baseCls+"-header",tools:g,ui:h.ui,id:h.id+"_header",overCls:h.headerOverCls,indicateDrag:h.draggable,frame:(h.frame||h.alwaysFramed)&&h.frameHeader,ignoreParentFrame:h.frame||h.overlapHeader,ignoreBorderManagement:h.frame||h.ignoreHeaderBorderManagement,headerRole:h.headerRole,ownerCt:h,synthetic:true,listeners:h.collapsible&&h.titleCollapse?{click:h.toggleCollapse,scope:h}:null},h.header));h.addDocked(d,0)}}else{if(d){d.hide()}}},privates:{addUIToElement:function(){var a=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);a.addBodyCls(a.baseCls+"-body-"+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getFocusEl:function(){return this.el},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;if(a.simpleDrag){a.initSimpleDraggable()}else{a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)}},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var c=this,b,a;if(!c.header){c.updateHeader(true)}if(c.header){b=Ext.applyIf({el:c.el,delegate:"#"+c.header.id},c.draggable);if(c.constrain||c.constrainHeader){b.constrain=c.constrain;b.constrainDelegate=c.constrainHeader;b.constrainTo=c.constrainTo||c.container}a=c.dd=new Ext.util.ComponentDragger(c,b);c.relayEvents(a,["dragstart","drag","dragend"]);if(c.maximized){a.disable()}}},removeUIFromElement:function(){var a=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);a.removeBodyCls(a.baseCls+"-body-"+a.ui)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(a){var b=this,d=b.el,c;if(b.isSliding||b.isDestroyed){return}b.isSliding=true;b.floated=false;b.slideOutFloatedPanelBegin();if(typeof b.collapsed=="string"){c=b.convertCollapseDir(b.collapsed)}d.slideOut(c,{preserveScroll:true,duration:Ext.Number.from(b.animCollapse,Ext.fx.Anim.prototype.duration),autoEnd:a===true,listeners:{afteranimate:function(){b.slideOutFloatedPanelEnd();b.el.removeCls("x-border-region-slide-in")}}})},slideOutFloatedPanelBegin:function(){var b=this,c=b.placeholder.el,a=b.el;b.collapsed=b.floatedFromCollapse;b.setHiddenState(true);b.floatedFromCollapse=null;c.un("mouseleave",b.onMouseLeaveFloated,b);a.un("mouseleave",b.onMouseLeaveFloated,b);c.un("mouseenter",b.onMouseEnterFloated,b);a.un("mouseenter",b.onMouseEnterFloated,b)},slideOutFloatedPanelEnd:function(a){var b=this;if(b.collapseTool){b.collapseTool.el.show()}b.slideOutTask.cancel();b.isSliding=false;if(!a){b.fireEvent("unfloat",b)}}}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var a=this.prototype;a.animCollapse=Ext.enableFx;a.placeholderCollapseHideMode=Ext.Element.VISIBILITY}));Ext.define("ExtThemeNeptune.panel.Panel",{override:"Ext.panel.Panel",border:false,bodyBorder:false,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==true){arguments.callee.$previous.call(this)}}});(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,autoRender:true,hidden:true,baseCls:"x-tip",floating:{shadow:true,shim:true},focusOnToFront:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow,constrain:a.constrainPosition},a.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(a)}},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1000,ariaRole:"tooltip",initComponent:function(){var a=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(b,a){var c=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);c.anchorCls="x-tip-anchor-"+c.getAnchorPosition();c.anchorEl=c.el.createChild({role:"presentation",cls:"x-tip-anchor "+c.anchorCls})},setTarget:function(d){var b=this,a=Ext.get(d),c;if(b.target){c=Ext.get(b.target);if(Ext.supports.Touch){b.mun(c,"tap",b.onTargetOver,b)}else{b.mun(c,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}b.target=a;if(a){if(Ext.supports.Touch){b.mon(a,{tap:b.onTargetOver,scope:b})}else{b.mon(a,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}if(b.anchor){b.anchorTarget=b.target}},onMouseMove:function(d){var b=this,a,c;if(!b.target||b.target.contains(d.target)){a=b.delegate?d.getTarget(b.delegate):b.triggerElement=true;if(a){b.targetXY=d.getXY();if(a===b.triggerElement){if(!b.hidden&&b.trackMouse){c=b.getTargetXY();if(b.constrainPosition){c=b.el.adjustForConstraints(c,b.el.parent())}b.setPagePosition(c)}}else{b.hide();b.lastActive=new Date(0);b.onTargetOver(d)}}else{if((!b.closable&&b.isVisible())&&b.autoHide!==false){b.delayHide()}}}},getTargetXY:function(){var k=this,d,c,o,a,j,m,f,n,l,b,h,g;if(k.delegate){k.anchorTarget=k.triggerElement}if(k.anchor){k.targetCounter++;c=k.getOffsets();o=(k.anchorToTarget&&!k.trackMouse)?k.getAlignToXY(k.anchorTarget,k.getAnchorAlign()):k.targetXY;a=Ext.Element.getViewportWidth()-5;j=Ext.Element.getViewportHeight()-5;m=document.documentElement;f=document.body;n=(m.scrollLeft||f.scrollLeft||0)+5;l=(m.scrollTop||f.scrollTop||0)+5;b=[o[0]+c[0],o[1]+c[1]];h=k.getSize();g=k.constrainPosition;k.anchorEl.removeCls(k.anchorCls);if(k.targetCounter<2&&g){if(b[0]<n){if(k.anchorToTarget){k.defaultAlign="l-r";if(k.mouseOffset){k.mouseOffset[0]*=-1}}k.anchor="left";return k.getTargetXY()}if(b[0]+h.width>a){if(k.anchorToTarget){k.defaultAlign="r-l";if(k.mouseOffset){k.mouseOffset[0]*=-1}}k.anchor="right";return k.getTargetXY()}if(b[1]<l){if(k.anchorToTarget){k.defaultAlign="t-b";if(k.mouseOffset){k.mouseOffset[1]*=-1}}k.anchor="top";return k.getTargetXY()}if(b[1]+h.height>j){if(k.anchorToTarget){k.defaultAlign="b-t";if(k.mouseOffset){k.mouseOffset[1]*=-1}}k.anchor="bottom";return k.getTargetXY()}}k.anchorCls="x-tip-anchor-"+k.getAnchorPosition();k.anchorEl.addCls(k.anchorCls);k.targetCounter=0;return b}else{d=k.getMouseOffset();return(k.targetXY)?[k.targetXY[0]+d[0],k.targetXY[1]+d[1]]:d}},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide();a.el.setOpacity("")}})},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c=this,d,b,a=c.getAnchorPosition().charAt(0);if(c.anchorToTarget&&!c.trackMouse){switch(a){case"t":b=[0,9];break;case"b":b=[0,-13];break;case"r":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case"t":b=[-15-c.anchorOffset,30];break;case"b":b=[-19-c.anchorOffset,-13-c.el.dom.offsetHeight];break;case"r":b=[-15-c.el.dom.offsetWidth,-13-c.anchorOffset];break;default:b=[25,-13-c.anchorOffset];break}}d=c.getMouseOffset();b[0]+=d[0];b[1]+=d[1];return b},onTargetOver:function(d){var c=this,b=c.delegate,a;if(c.disabled||d.within(c.target.dom,true)){return}a=b?d.getTarget(b):true;if(a){c.triggerElement=a;c.triggerEvent=d;c.clearTimer("hide");c.targetXY=d.getXY();c.delayShow()}},delayShow:function(c){var a=this,b=a.el&&(c===false||!a.trackMouse)&&a.getTargetXY();if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.showFromDelay,a.showDelay,a,[b])}}else{if(!a.hidden&&a.autoHide!==false){a.show(b)}}},showFromDelay:function(a){this.fromDelayShow=true;this.show(a);delete this.fromDelayShow},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this);delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(d){var b=this,a=b.triggerElement,c=a===true?b.target:a;if(b.disabled||!a||d.within(c,true)){return}if(b.showTimer){b.clearTimer("show");b.triggerElement=null}if(b.autoHide!==false){b.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);delete a.triggerElement},show:function(b){var a=this;Ext.tip.Tip.prototype.show.call(this);if(this.hidden===false){if(a.anchor){a.anchor=a.origAnchor}if(!a.calledFromShowAt){a.showAt(b||a.getTargetXY())}if(a.anchor){a.syncAnchor();a.anchorEl.show()}else{a.anchorEl.hide()}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();a.calledFromShowAt=true;if(!a.isVisible()){Ext.tip.Tip.prototype.showAt.apply(this,arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true);a.el.sync(true);if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}if(a.anchor){a.syncAnchor();if(!a.anchorEl.isVisible()){a.anchorEl.show()}}else{a.anchorEl.hide()}}delete a.calledFromShowAt},syncAnchor:function(){var c=this,a,b,d;switch(c.tipAnchor.charAt(0)){case"t":a="b";b="tl";d=[20+c.anchorOffset,1];break;case"r":a="l";b="tr";d=[-1,12+c.anchorOffset];break;case"b":a="t";b="bl";d=[20+c.anchorOffset,-1];break;default:a="r";b="tl";d=[1,12+c.anchorOffset];break}c.anchorEl.alignTo(c.el,a+"-"+b,d);c.anchorEl.setStyle("z-index",parseInt(c.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},setPagePosition:function(a,c){var b=this;Ext.tip.Tip.prototype.setPagePosition.apply(this,arguments);if(b.anchor){b.syncAnchor()}},_timerNames:{},clearTimer:function(a){var b=this,d=b._timerNames,c=d[a]||(d[a]=a+"Timer"),f=b[c];if(f){clearTimeout(f);b[c]=null}},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;Ext.tip.Tip.prototype.onShow.call(this);a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;Ext.tip.Tip.prototype.onHide.call(this);a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.tip.Tip.prototype.onDestroy.call(this)}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},shrinkWrapDock:true,initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(a){this.tagConfig=Ext.apply({},a);delete this.tagConfig.attr},register:function(c){var h=Ext.isArray(c)?c:arguments,d=0,a=h.length,g,b,f;for(;d<a;d++){c=h[d];g=c.target;if(g){if(Ext.isArray(g)){for(b=0,f=g.length;b<f;b++){this.targets[Ext.id(g[b])]=c}}else{this.targets[Ext.id(g)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom;if(b.isVisible()){if(c&&c.el===a){b.hide()}}else{if(c&&c.el===a){b.clearTimer("show")}}},getTipCfg:function(f,d){var c=f.title,b,a,g;if(this.interceptTitles&&c&&Ext.isString(c)){f.qtip=c;f.removeAttribute("title");if(d){d.preventDefault()}return{text:c}}else{b=this.tagConfig;a=b.attr||(b.attr=b.namespace+b.attribute);f=Ext.fly(f).findParent(function(h){return(g=h.getAttribute(a))});if(f){return{target:f,text:g}}}},onTargetOver:function(a){this.doTargetOver(a.getTarget(this.delegate),null,a)},doTargetOver:function(k,r,b){var l=this,a,f,g,c,j,m,d,o,h,q,n,p;if(l.disabled){return}if(typeof k==="string"){k=Ext.getDom(k)}l.targetXY=r||(b?b.getXY():Ext.fly(k).getXY());if(!k||k.nodeType!==1||k==document.documentElement||k==document.body){return}if(l.activeTarget&&((k===l.activeTarget.el)||Ext.fly(l.activeTarget.el).contains(k))){if(l.targetTextEmpty()){l.onShowVeto();delete l.activeTarget}else{l.clearTimer("hide");l.show()}return}if(k){h=l.targets;for(p in h){if(h.hasOwnProperty(p)){n=h[p];q=Ext.fly(n.target);if(q&&(q.dom===k||q.contains(k))){c=q.dom;break}}}if(c){l.activeTarget=l.targets[c.id];l.activeTarget.el=k;l.anchor=l.activeTarget.anchor;if(l.anchor){l.anchorTarget=k}a=parseInt(l.activeTarget.showDelay,10);if(a){g=l.showDelay;l.showDelay=a}l.delayShow();if(a){l.showDelay=g}if(!(f=l.activeTarget.hideAction)){delete l.hideAction}else{l.hideAction=f}return}}c=Ext.fly(k,"_quicktip-target");j=l.tagConfig;m=j.namespace;d=l.getTipCfg(k,b);if(d){if(d.target){k=d.target;c=Ext.fly(k,"_quicktip-target")}o=c.getAttribute(m+j.hide);l.activeTarget={el:k,text:d.text,width:+c.getAttribute(m+j.width)||null,autoHide:o!="user"&&o!=="false",title:c.getAttribute(m+j.title),cls:c.getAttribute(m+j.cls),align:c.getAttribute(m+j.align),showDelay:parseInt(c.getAttribute(m+j.showDelay)||0,10),hideAction:c.getAttribute(m+j.hideAction),anchorTarget:c.getAttribute(m+j.anchorTarget)};if(!l.initialConfig.hasOwnProperty("anchor")){l.anchor=c.getAttribute(m+j.anchor)}if(l.anchor&&!l.initialConfig.hasOwnProperty("anchorTarget")){l.anchorTarget=l.activeTarget.anchorTarget||k}a=parseInt(l.activeTarget.showDelay,10);if(a){g=l.showDelay;l.showDelay=a}l.delayShow();if(a){l.showDelay=g}}},onTargetOut:function(f){var c=this,d=c.activeTarget,a,b;if(d&&f.within(c.activeTarget.el)&&!c.getTipCfg(f.getTarget(),f)){return}c.clearTimer("show");delete c.activeTarget;if(c.autoHide!==false){a=d&&parseInt(d.hideDelay,10);if(a){b=c.hideDelay;c.hideDelay=a}c.delayHide();if(a){c.hideDelay=b}}},targetTextEmpty:function(){var c=this,d=c.activeTarget,a=c.tagConfig,b,f;if(d){b=d.el;if(b){f=b.getAttribute(a.namespace+a.attribute);if(!f&&!c.targets[Ext.id(d.target)]){return true}}}return false},show:function(){var b=this,a=b.fromDelayShow;if(a&&b.targetTextEmpty()){b.onShowVeto();delete b.activeTarget;return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(f){var c=this,d=c.activeTarget,g=c.header,b,a;if(d){if(!c.rendered){c.render(Ext.getBody());c.activeTarget=d}c.suspendLayouts();if(d.title){c.setTitle(d.title);g.show()}else{if(g){g.hide()}}c.update(d.text);c.autoHide=d.autoHide;b=d.dismissDelay;c.dismissDelay=Ext.isNumber(b)?b:c.dismissDelay;if(d.mouseOffset){f[0]+=d.mouseOffset[0];f[1]+=d.mouseOffset[1]}a=c.lastCls;if(a){c.removeCls(a);delete c.lastCls}a=d.cls;if(a){c.addCls(a);c.lastCls=a}c.setWidth(d.width);if(c.anchor){c.constrainPosition=false}else{if(d.align){f=c.getAlignToXY(d.el,d.align);c.constrainPosition=false}else{c.constrainPosition=true}}c.resumeLayouts(true)}Ext.tip.ToolTip.prototype.showAt.call(this,f)},hide:function(){delete this.activeTarget;Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(f,b){var d=this;if(!d.tip){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTipManager.init(f,b)});return false}var a=Ext.apply({disabled:d.disabled,id:"ext-quicktips-tip"},b),c=a.className,g=a.xtype;if(c){delete a.className}else{if(g){c="widget."+g;delete a.xtype}}if(f!==false){a.renderTo=document.body}d.tip=Ext.create(c||"Ext.tip.QuickTip",a);Ext.quickTipsActive=true}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.disable()}},ddEnable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.enable()}},enable:function(){var a=this,b=a.tip;if(b){b.enable()}a.disabled=false},disable:function(){var a=this,b=a.tip;if(b){b.disable()}a.disabled=true},isEnabled:function(){var a=this.tip;return a!==undefined&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.picker.Color",Ext.Component,{alternateClassName:"Ext.ColorPalette",focusable:true,componentCls:"x-color-picker",selectedCls:"x-color-picker-selected",itemCls:"x-color-picker-item",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>',"</a>","</tpl>"],initComponent:function(){var a=this;Ext.Component.prototype.initComponent.apply(this,arguments);if(a.handler){a.on("select",a.handler,a.scope,true)}},initRenderData:function(){var a=this;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{itemCls:a.itemCls,colors:a.colors})},onRender:function(){var b=this,a=b.clickEvent;Ext.Component.prototype.onRender.apply(this,arguments);b.mon(b.el,a,b.handleClick,b,{delegate:"a"});if(a!=="click"){b.mon(b.el,"click",Ext.emptyFn,b,{delegate:"a",stopEvent:true})}},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);if(a.value){b=a.value;a.value=null;a.select(b,true)}},handleClick:function(c){var b=this,a;c.stopEvent();if(!b.disabled){a=c.currentTarget.className.match(b.colorRe)[1];b.select(a.toUpperCase())}},select:function(b,a){var d=this,g=d.selectedCls,f=d.value,c;b=b.replace("#","");if(!d.rendered){d.value=b;return}if(b!=f||d.allowReselect){c=d.el;if(d.value){c.down("a.color-"+f).removeCls(g)}c.down("a.color-"+b).addCls(g);d.value=b;if(a!==true){d.fireEvent("select",d,b)}}},clear:function(){var b=this,c=b.value,a;if(c&&b.rendered){a=b.el.down("a.color-"+c);a.removeCls(b.selectedCls)}b.value=null},getValue:function(){return this.value||null}},0,["colorpicker"],["component","box","colorpicker"],{component:true,box:true,colorpicker:true},["widget.colorpicker"],0,[Ext.picker,"Color",Ext,"ColorPalette"],0));(Ext.cmd.derive("Ext.layout.component.field.HtmlEditor",Ext.layout.component.field.FieldContainer,{type:"htmleditor",naturalHeight:150,naturalWidth:300,beginLayout:function(b){var a=this.owner,c;if(Ext.isGecko){c=a.textareaEl.dom;this.lastValue=c.value;c.value=""}Ext.layout.component.field.FieldContainer.prototype.beginLayout.apply(this,arguments);b.toolbarContext=b.context.getCmp(a.toolbar);b.inputCmpContext=b.context.getCmp(a.inputCmp);b.bodyCellContext=b.getEl("bodyEl");b.textAreaContext=b.getEl("textareaEl");b.iframeContext=b.getEl("iframeEl")},beginLayoutCycle:function(h){var g=this,c=h.widthModel,b=h.heightModel,a=g.owner,f=a.iframeEl,d=a.textareaEl;Ext.layout.component.field.FieldContainer.prototype.beginLayoutCycle.apply(this,arguments);if(c.shrinkWrap){f.setStyle("width","");d.setStyle("width","")}else{if(c.natural){h.bodyCellContext.setWidth(g.naturalWidth)}}if(b.natural||b.shrinkWrap){f.setHeight(g.naturalHeight);d.setHeight(g.naturalHeight)}},finishedLayout:function(){var a=this.owner;Ext.layout.component.field.FieldContainer.prototype.finishedLayout.apply(this,arguments);if(Ext.isGecko){a.textareaEl.dom.value=this.lastValue}}},0,0,0,0,["layout.htmleditor"],0,[Ext.layout.component.field,"HtmlEditor"],0));(Ext.cmd.derive("Ext.form.field.HtmlEditor",Ext.form.FieldContainer,{alternateClassName:"Ext.form.HtmlEditor",focusable:true,componentLayout:"htmleditor",textareaCls:"x-htmleditor-textarea",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:true}],stretchInputElFixed:true,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:Ext.isOpera?"&#160;":"&#8203;",extraFieldBodyCls:"x-html-editor-wrap",defaultButtonUI:"default-toolbar",initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,containerElCls:"x-html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,initComponent:function(){var a=this;a.items=[a.createToolbar(),a.createInputCmp()];a.layout={type:"vbox",align:"stretch"};Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments);a.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var a=this,c=a.id+"-inputCmp",b={id:c,name:a.name,textareaCls:a.textareaCls+" x-hidden",value:a.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:"x-htmleditor-iframe"};a.getInsertionRenderData(b,a.subTplInsertions);return{flex:1,xtype:"component",tpl:a.getTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:c,cls:"x-html-editor-input",data:b}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var h=this,b=[],f,a=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),d="x-",j,g;function c(m,k,l){return{itemId:m,cls:d+"btn-icon",iconCls:d+"edit-"+m,enableToggle:k!==false,scope:h,handler:l||h.relayBtnCmd,clickEvent:"mousedown",tooltip:a?h.buttonTips[m]||g:g,overflowText:h.buttonTips[m].title||g,tabIndex:-1}}if(h.enableFont&&!Ext.isSafari2){j=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+d+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){h.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var k=this.selectEl;if(k){k.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var k=this.selectEl;if(k){k.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){h.win.focus();h.relayCmd("fontName",h.fontSelect.dom.value);h.deferFocus()},element:"selectEl"}});b.push(j,"-")}if(h.enableFormat){b.push(c("bold"),c("italic"),c("underline"))}if(h.enableFontSize){b.push("-",c("increasefontsize",false,h.adjustFont),c("decreasefontsize",false,h.adjustFont))}if(h.enableColors){b.push("-",{itemId:"forecolor",cls:d+"btn-icon",iconCls:d+"edit-forecolor",overflowText:h.buttonTips.forecolor.title,tooltip:a?h.buttonTips.forecolor||g:g,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(l,k){h.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+k:k);this.up("menu").hide()}}]})},{itemId:"backcolor",cls:d+"btn-icon",iconCls:d+"edit-backcolor",overflowText:h.buttonTips.backcolor.title,tooltip:a?h.buttonTips.backcolor||g:g,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(l,k){if(Ext.isGecko){h.execCmd("useCSS",false);h.execCmd("hilitecolor","#"+k);h.execCmd("useCSS",true);h.deferFocus()}else{h.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+k:k)}this.up("menu").hide()}}]})})}if(h.enableAlignments){b.push("-",c("justifyleft"),c("justifycenter"),c("justifyright"))}if(!Ext.isSafari2){if(h.enableLinks){b.push("-",c("createlink",false,h.createLink))}if(h.enableLists){b.push("-",c("insertorderedlist"),c("insertunorderedlist"))}if(h.enableSourceEdit){b.push("-",c("sourceedit",true,function(){h.toggleSourceEdit(!h.sourceEditMode)}))}}for(f=0;f<b.length;f++){if(b[f].itemId!=="sourceedit"){b[f].disabled=true}}return{xtype:"toolbar",defaultButtonUI:h.defaultButtonUI,cls:"x-html-editor-tb",enableOverflow:true,items:b,listeners:{click:function(k){k.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(f){var d=this,c=d.textareaEl,b=d.iframeEl,a;d.readOnly=f;if(c){c.dom.readOnly=f}if(d.initialized){a=d.getEditorBody();if(Ext.isIE){b.setDisplayed(false);a.contentEditable=!f;b.setDisplayed(true)}else{d.setDesignMode(!f)}if(a){a.style.cursor=f?"default":"text"}d.disableItems(f)}},getDocMarkup:function(){var b=this,a=b.iframeEl.getHeight()-b.iframePad*2;return Ext.String.format('<!DOCTYPE html><html><head><style type="text/css">'+(Ext.isOpera?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(b.rtl?"rtl;":"ltr;")+(Ext.isIE8?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",b.iframePad,a,b.defaultFont)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var h=this,a=0,j,b,k,f,d,g,c;if(!h.defaultFont){b=h.textareaEl.getStyle("font-family");b=Ext.String.capitalize(b.split(",")[0]);j=Ext.Array.clone(h.fontFamilies);Ext.Array.include(j,b);j.sort();h.defaultFont=b;k=h.down("#fontSelect").selectEl.dom;for(d=0,g=j.length;d<g;++d){b=j[d];c=b.toLowerCase();f=new Option(b,c);if(b===h.defaultFont){a=d}f.style.fontFamily=c;if(Ext.isIE){k.add(f)}else{k.options.add(f)}}k.options[a].selected=true}},isEqual:function(b,a){return this.isEqualAsString(b,a)},afterRender:function(){var b=this,a=b.inputCmp;Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments);b.iframeEl=a.iframeEl;b.textareaEl=a.textareaEl;b.inputEl=b.iframeEl;if(b.enableFont){b.initDefaultFont()}b.monitorTask=Ext.TaskManager.start({run:b.checkDesignMode,scope:b,interval:100})},initFrameDoc:function(){var b=this,c,a;Ext.TaskManager.stop(b.monitorTask);c=b.getDoc();b.win=b.getWin();c.open();c.write(b.getDocMarkup());c.close();a={run:function(){var d=b.getDoc();if(d.body||d.readyState==="complete"){Ext.TaskManager.stop(a);b.setDesignMode(true);Ext.defer(b.initEditor,10,b)}},interval:10,duration:10000,scope:b};Ext.TaskManager.start(a)},checkDesignMode:function(){var a=this,b=a.getDoc();if(b&&(!b.editorInitialized||a.getDesignMode()!=="on")){a.initFrameDoc()}},setDesignMode:function(c){var a=this,b=a.getDoc();if(b){if(a.readOnly){c=false}b.designMode=(/on|true/i).test(String(c).toLowerCase())?"on":"off"}},getDesignMode:function(){var a=this.getDoc();return !a?"":String(a.designMode).toLowerCase()},disableItems:function(d){var b=this.getToolbar().items.items,c,a=b.length,f;for(c=0;c<a;c++){f=b[c];if(f.getItemId()!=="sourceedit"){f.setDisabled(d)}}},toggleSourceEdit:function(b){var g=this,d=g.iframeEl,a=g.textareaEl,f="x-hidden",c=g.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(b)){b=!g.sourceEditMode}g.sourceEditMode=b;if(c.pressed!==b){c.toggle(b)}if(b){g.disableItems(true);g.syncValue();d.addCls(f);a.removeCls(f);a.dom.removeAttribute("tabindex");a.focus();g.inputEl=a}else{if(g.initialized){g.disableItems(g.readOnly)}g.pushValue();d.removeCls(f);a.addCls(f);a.dom.setAttribute("tabindex",-1);g.deferFocus();g.inputEl=d}g.fireEvent("editmodechange",g,b);g.updateLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=="http://"){this.relayCmd("createlink",a)}},clearInvalid:Ext.emptyFn,setValue:function(d){var c=this,b=c.textareaEl,a=c.inputCmp;if(d===null||d===undefined){d=""}if(b){b.dom.value=d}c.pushValue();if(!c.rendered&&c.inputCmp){c.inputCmp.data.value=d}c.mixins.field.setValue.call(c,d);return c},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,"")}if(a.charCodeAt(0)===parseInt(this.defaultValue.replace(/\D/g,""),10)){a=a.substring(1)}return a},syncValue:function(){var g=this,b,h,d,a,c,f;if(g.initialized){b=g.getEditorBody();d=b.innerHTML;f=g.textareaEl.dom;if(Ext.isWebKit){a=b.getAttribute("style");c=a.match(/text-align:(.*?);/i);if(c&&c[1]){d='<div style="'+c[0]+'">'+d+"</div>"}}d=g.cleanHtml(d);if(g.fireEvent("beforesync",g,d)!==false){if(Ext.isGecko&&f.value===""&&d==="<br>"){d=""}if(f.value!==d){f.value=d;h=true}g.fireEvent("sync",g,d);if(h){g.checkChange()}}}},getValue:function(){var a=this,b;if(!a.sourceEditMode){a.syncValue()}b=a.rendered?a.textareaEl.dom.value:a.value;a.value=b;return b},pushValue:function(){var b=this,a;if(b.initialized){a=b.textareaEl.dom.value||"";if(!b.activated&&a.length<1){a=b.defaultValue}if(b.fireEvent("beforepush",b,a)!==false){b.getEditorBody().innerHTML=a;if(Ext.isGecko){b.setDesignMode(false);b.setDesignMode(true)}b.fireEvent("push",b,a)}}},focus:function(d,b){var c=this,f,a;if(b){if(!c.focusTask){c.focusTask=new Ext.util.DelayedTask(c.focus)}c.focusTask.delay(Ext.isNumber(b)?b:10,null,c,[d,false])}else{if(d){if(c.textareaEl&&c.textareaEl.dom){f=c.textareaEl.dom.value}if(f&&f.length){c.execCmd("selectall",true)}}a=c.getFocusEl();if(a&&a.focus){a.focus()}}return c},initEditor:function(){var d=this,c,a,g,h,b;if(d.destroying||d.isDestroyed){return}c=d.getEditorBody();a=d.textareaEl.getStyle(["font-size","font-family","background-image","background-repeat","background-color","color"]);a["background-attachment"]="fixed";c.bgProperties="fixed";Ext.DomHelper.applyStyles(c,a);g=d.getDoc();h=Ext.get(g);if(h){try{h.clearListeners()}catch(f){}b=d.onEditorEvent.bind(d);h.on({mousedown:b,dblclick:b,click:b,keyup:b,delegated:false,buffer:100});b=d.onRelayedEvent;h.on({mousedown:b,mousemove:b,mouseup:b,click:b,dblclick:b,delegated:false,scope:d});if(Ext.isGecko){h.on("keypress",d.applyCommand,d)}if(d.fixKeys){h.on("keydown",d.fixKeys,d)}if(d.fixKeysAfter){h.on("keyup",d.fixKeysAfter,d)}if(Ext.isIE9){Ext.get(g.documentElement).on("focus",d.focus,d)}if(Ext.isIE8){h.on("focusout",function(){d.savedSelection=g.selection.type!=="None"?g.selection.createRange():null},d);h.on("focusin",function(){if(d.savedSelection){d.savedSelection.select()}},d)}Ext.getWin().on("beforeunload",d.beforeDestroy,d);g.editorInitialized=true;d.initialized=true;d.pushValue();d.setReadOnly(d.readOnly);d.fireEvent("initialize",d)}},beforeDestroy:function(){var a=this,d=a.monitorTask,c,f;if(d){Ext.TaskManager.stop(d)}if(a.rendered){Ext.getWin().un(a.beforeDestroy,a);c=a.getDoc();if(c){Ext.get(c).clearListeners();if(c.hasOwnProperty){for(f in c){try{if(c.hasOwnProperty(f)){delete c[f]}}catch(b){}}}}delete a.iframeEl;delete a.textareaEl;delete a.toolbar;delete a.inputCmp}Ext.form.FieldContainer.prototype.beforeDestroy.call(this)},onRelayedEvent:function(c){var b=this.iframeEl,d=Ext.fly(b).getTrueXY(),f=c.getXY(),a=c.getXY();c.xy=[d[0]+a[0],d[1]+a[1]];c.injectEvent(b);c.xy=f},onFirstFocus:function(){var c=this,b,a;c.activated=true;c.disableItems(c.readOnly);if(Ext.isGecko){c.win.focus();b=c.win.getSelection();if(b.focusNode&&!c.getValue().length){a=b.getRangeAt(0);a.selectNodeContents(c.getEditorBody());a.collapse(true);c.deferFocus()}try{c.execCmd("useCSS",true);c.execCmd("styleWithCSS",false)}catch(d){}}c.fireEvent("activate",c)},adjustFont:function(d){var f=d.getItemId()==="increasefontsize"?1:-1,c=this.getDoc().queryCommandValue("FontSize")||"2",a=Ext.isString(c)&&c.indexOf("px")!==-1,b;c=parseInt(c,10);if(a){if(c<=10){c=1+f}else{if(c<=13){c=2+f}else{if(c<=16){c=3+f}else{if(c<=18){c=4+f}else{if(c<=24){c=5+f}else{c=6+f}}}}}c=Ext.Number.constrain(c,1,6)}else{b=Ext.isSafari;if(b){f*=2}c=Math.max(1,c+f)+(b?"px":0)}this.relayCmd("FontSize",c)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var j=this,f,c,d,k,b,g,a,h;if(j.readOnly){return}if(!j.activated){j.onFirstFocus();return}d=j.getToolbar().items.map;k=j.getDoc();if(j.enableFont&&!Ext.isSafari2){g=k.queryCommandValue("fontName");b=(g?g.split(",")[0].replace(j.reStripQuotes,""):j.defaultFont).toLowerCase();a=j.fontSelect.dom;if(b!==a.value||b!==g){a.value=b}}function m(){var l;for(f=0,c=arguments.length,b;f<c;f++){b=arguments[f];try{l=k.queryCommandState(b)}catch(n){l=false}d[b].toggle(l)}}if(j.enableFormat){m("bold","italic","underline")}if(j.enableAlignments){m("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&j.enableLists){m("insertorderedlist","insertunorderedlist")}h=j.toolbar.query("menu");for(f=0;f<h.length;f++){h[f].hide()}j.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){Ext.defer(function(){var c=this;if(!this.isDestroyed){c.win.focus();c.execCmd(b,a);c.updateToolbar()}},10,this)},execCmd:function(c,b){var a=this,d=a.getDoc();d.execCommand(c,false,(b===undefined?null:b));a.syncValue()},applyCommand:function(d){if(d.ctrlKey){var a=this,f=d.getCharCode(),b;if(f>0){f=String.fromCharCode(f);switch(f){case"b":b="bold";break;case"i":b="italic";break;case"u":b="underline";break}if(b){a.win.focus();a.execCmd(b);a.deferFocus();d.preventDefault()}}}},insertAtCursor:function(c){var b=this,a;if(b.activated){b.win.focus();if(Ext.isIE){a=b.getDoc().selection.createRange();if(a){a.pasteHTML(c);b.syncValue();b.deferFocus()}}else{b.execCmd("InsertHTML",c);b.deferFocus()}}},fixKeys:(function(){var a;if(Ext.isIE){return function(h){var d=this,c=h.getKey(),g=d.getDoc(),j=d.readOnly,b,f;if(c===h.TAB){h.stopEvent();if(!j){b=g.selection.createRange();if(b){if(b.collapse){b.collapse(true);b.pasteHTML("&#160;&#160;&#160;&#160;")}d.deferFocus()}}}else{if(c===h.ENTER){if(!j){if(Ext.isIE10m){b=g.selection.createRange();if(b){f=b.parentElement();if(!f||f.tagName.toLowerCase()!=="li"){h.stopEvent();b.pasteHTML("<br />");b.collapse(false);b.select()}}}else{b=g.getSelection().getRangeAt(0);if(b&&b.commonAncestorContainer.parentNode.tagName.toLowerCase()!=="li"){h.stopEvent();a=g.createElement("div");b.insertNode(a)}}}}}}}if(Ext.isOpera){return function(d){var c=this,b=d.getKey(),f=c.readOnly;if(b===d.TAB){d.stopEvent();if(!f){c.win.focus();c.execCmd("InsertHTML","&#160;&#160;&#160;&#160;");c.deferFocus()}}}}return null}()),fixKeysAfter:(function(){if(Ext.isIE){return function(d){var b=this,a=d.getKey(),c=b.getDoc(),g=b.readOnly,f;if(!g&&(a===d.BACKSPACE||a===d.DELETE)){f=c.body.innerHTML;if(f==="<p>&nbsp;</p>"||f==="<P>&nbsp;</P>"){c.body.innerHTML=""}}}}return null}()),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}},privates:{deferFocus:function(){this.focus(false,true)},getFocusEl:function(){var a=this,b=a.win;return b&&!a.sourceEditMode?b:a.textareaEl}}},0,["htmleditor"],["component","box","container","fieldcontainer","htmleditor"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true},["widget.htmleditor"],[["field",Ext.form.field.Field]],[Ext.form.field,"HtmlEditor",Ext.form,"HtmlEditor"],0));Ext.define("ExtThemeNeptune.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",defaultButtonUI:"plain-toolbar"});Ext.onReady(function(){if(Ext.Date){Ext.Date.monthNames=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];Ext.Date.shortMonthNames=["Янв","Февр","Март","Апр","Май","Июнь","Июль","Авг","Сент","Окт","Нояб","Дек"];Ext.Date.getShortMonthName=function(a){return Ext.Date.shortMonthNames[a]};Ext.Date.monthNumbers={"Янв":0,"Фев":1,"Мар":2,"Апр":3,"Май":4,"Июн":5,"Июл":6,"Авг":7,"Сен":8,"Окт":9,"Ноя":10,"Дек":11};Ext.Date.getMonthNumber=function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Ext.Date.dayNames=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];Ext.Date.getShortDayName=function(a){return Ext.Date.dayNames[a].substring(0,3)}}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:".",decimalSeparator:",",currencySign:"руб",dateFormat:"d.m.Y"})}});Ext.define("Ext.locale.ru.view.View",{override:"Ext.view.View",emptyText:""});Ext.define("Ext.locale.ru.grid.plugin.DragDrop",{override:"Ext.grid.plugin.DragDrop",dragText:"{0} выбранных строк"});Ext.define("Ext.locale.ru.tab.Tab",{override:"Ext.tab.Tab",closeText:"Закрыть эту вкладку"});Ext.define("Ext.locale.ru.form.field.Base",{override:"Ext.form.field.Base",invalidText:"Значение в этом поле неверное"});Ext.define("Ext.locale.ru.view.AbstractView",{override:"Ext.view.AbstractView",loadingText:"Загрузка..."});Ext.define("Ext.locale.ru.picker.Date",{override:"Ext.picker.Date",todayText:"Сегодня",minText:"Эта дата раньше минимальной даты",maxText:"Эта дата позже максимальной даты",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",nextText:"Следующий месяц (Control+Вправо)",prevText:"Предыдущий месяц (Control+Влево)",monthYearText:"Выбор месяца (Control+Вверх/Вниз для выбора года)",todayTip:"{0} (Пробел)",format:"d.m.y",startDay:1});Ext.define("Ext.locale.ru.picker.Month",{override:"Ext.picker.Month",okText:"&#160;OK&#160;",cancelText:"Отмена"});Ext.define("Ext.locale.ru.toolbar.Paging",{override:"Ext.PagingToolbar",beforePageText:"Страница",afterPageText:"из {0}",firstText:"Первая страница",prevText:"Предыдущая страница",nextText:"Следующая страница",lastText:"Последняя страница",refreshText:"Обновить",displayMsg:"Отображаются записи с {0} по {1}, всего {2}",emptyMsg:"Нет данных для отображения"});Ext.define("Ext.locale.ru.form.field.Text",{override:"Ext.form.field.Text",minLengthText:"Минимальная длина этого поля {0}",maxLengthText:"Максимальная длина этого поля {0}",blankText:"Это поле обязательно для заполнения",regexText:"",emptyText:null});Ext.define("Ext.locale.ru.form.field.Number",{override:"Ext.form.field.Number",minText:"Значение этого поля не может быть меньше {0}",maxText:"Значение этого поля не может быть больше {0}",nanText:"{0} не является числом",negativeText:"Значение не может быть отрицательным"});Ext.define("Ext.locale.ru.form.field.Date",{override:"Ext.form.field.Date",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",minText:"Дата в этом поле должна быть позже {0}",maxText:"Дата в этом поле должна быть раньше {0}",invalidText:"{0} не является правильной датой - дата должна быть указана в формате {1}",format:"d.m.y",altFormats:"d.m.y|d/m/Y|d-m-y|d-m-Y|d/m|d-m|dm|dmy|dmY|d|Y-m-d"});Ext.define("Ext.locale.ru.form.field.ComboBox",{override:"Ext.form.field.ComboBox",valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:"Загрузка..."})});Ext.define("Ext.locale.ru.form.field.VTypes",{override:"Ext.form.field.VTypes",emailText:'Это поле должно содержать адрес электронной почты в формате "user@example.com"',urlText:'Это поле должно содержать URL в формате "http://www.example.com"',alphaText:'Это поле должно содержать только латинские буквы и символ подчеркивания "_"',alphanumText:'Это поле должно содержать только латинские буквы, цифры и символ подчеркивания "_"'});Ext.define("Ext.locale.ru.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",createLinkText:"Пожалуйста, введите адрес:"},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:"Полужирный (Ctrl+B)",text:"Применение полужирного начертания к выделенному тексту.",cls:"x-html-editor-tip"},italic:{title:"Курсив (Ctrl+I)",text:"Применение курсивного начертания к выделенному тексту.",cls:"x-html-editor-tip"},underline:{title:"Подчёркнутый (Ctrl+U)",text:"Подчёркивание выделенного текста.",cls:"x-html-editor-tip"},increasefontsize:{title:"Увеличить размер",text:"Увеличение размера шрифта.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Уменьшить размер",text:"Уменьшение размера шрифта.",cls:"x-html-editor-tip"},backcolor:{title:"Заливка",text:"Изменение цвета фона для выделенного текста или абзаца.",cls:"x-html-editor-tip"},forecolor:{title:"Цвет текста",text:"Измение цвета текста.",cls:"x-html-editor-tip"},justifyleft:{title:"Выровнять текст по левому краю",text:"Вырaвнивание текста по левому краю.",cls:"x-html-editor-tip"},justifycenter:{title:"По центру",text:"Вырaвнивание текста по центру.",cls:"x-html-editor-tip"},justifyright:{title:"Выровнять текст по правому краю",text:"Вырaвнивание текста по правому краю.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Маркеры",text:"Начать маркированный список.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Нумерация",text:"Начать нумернованный список.",cls:"x-html-editor-tip"},createlink:{title:"Вставить гиперссылку",text:"Создание ссылки из выделенного текста.",cls:"x-html-editor-tip"},sourceedit:{title:"Исходный код",text:"Переключиться на исходный код.",cls:"x-html-editor-tip"}}})});Ext.define("Ext.locale.ru.form.Basic",{override:"Ext.form.Basic",waitTitle:"Пожалуйста, подождите..."});Ext.define("Ext.locale.ru.grid.header.Container",{override:"Ext.grid.header.Container",sortAscText:"Сортировать по возрастанию",sortDescText:"Сортировать по убыванию",lockText:"Закрепить столбец",unlockText:"Снять закрепление столбца",columnsText:"Столбцы"});Ext.define("Ext.locale.ru.grid.GroupingFeature",{override:"Ext.grid.feature.Grouping",emptyGroupText:"(Пусто)",groupByText:"Группировать по этому полю",showGroupsText:"Отображать по группам"});Ext.define("Ext.locale.ru.grid.PropertyColumnModel",{override:"Ext.grid.PropertyColumnModel",nameText:"Название",valueText:"Значение",dateFormat:"d.m.Y"});Ext.define("Ext.locale.ru.window.MessageBox",{override:"Ext.window.MessageBox",buttonText:{ok:"OK",cancel:"Отмена",yes:"Да",no:"Нет"}});Ext.define("Ext.locale.ru.form.field.File",{override:"Ext.form.field.File",buttonText:"Обзор..."});Ext.define("Ext.locale.ru.Component",{override:"Ext.Component"});Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,cachedConfig:{baseCls:"x-widget"},constructor:function(a){(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,a);this.getComponentLayout()},addCls:function(a){this.el.addCls(a)},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,finishRender:function(){this.rendering=false;this.initBindable()},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,f,a){var d=this,c=d.inheritedState;d.ownerCt=b;if(c&&a){d.invalidateInheritedState()}if(d.reference){d.fixReference()}},onRemoved:function(b){var a=this,c;if(a.reference){c=a.lookupReferenceHolder();if(c){c.clearReference(a)}}if(!b){a.removeBindings()}if(a.inheritedState&&!b){a.invalidateInheritedState()}a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},render:function(b,a){var c=this.element,d;if(a){nextSibiling=b.childNodes[a];if(d){b.insertBefore(c,d);return}}b.appendChild(c)},setPosition:function(a,b){this.el.setLocalXY(a,b)}},function(){var a;if(Ext.isIE8){a=Ext.Widget.prototype;a.addElementReferenceOnDemand=a.addElementReference}this.borrow(Ext.Component,["up"])});(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:false},current:-1,total:0,running:false,complete:false,exception:false,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.operations=[];b.exceptions=[]},add:function(b){var d=this,c,a;if(Ext.isArray(b)){for(c=0,a=b.length;c<a;++c){d.add(b[c])}}else{d.total++;b.setBatch(d);d.operations.push(b)}return d},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(c,a){var b=c.order-a.order;if(b){return b}var g=c.entityType,d=a.entityType,f;if(!g||!d){return 0}if(!(f=g.rank)){g.schema.rankEntities();f=g.rank}return(f-d.rank)*c.foreignKeyDirection},start:function(a){var b=this;if(!b.operations.length||b.running){return b}b.exceptions.length=0;b.exception=false;b.running=true;return b.runOperation(Ext.isDefined(a)?a:b.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=false;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var a=null,b=this.current;if(!(b===-1||this.complete)){a=this.operations[b]}return a},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(c){var d=this,b=d.operations,a=b[c];if(a===undefined){d.running=false;d.complete=true;d.fireEvent("complete",d,b[b.length-1])}else{d.current=c;a.setInternalCallback(d.onOperationComplete);a.setInternalScope(d);a.execute()}return d},onOperationComplete:function(a){var c=this,b=a.hasException();if(b){c.exception=true;c.exceptions.push(a);c.fireEvent("exception",c,a)}if(b&&c.getPauseOnException()){c.pause()}else{c.fireEvent("operationcomplete",c,a);c.runNextOperation()}}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var c=this,b=c._initters,a;c.text=d;for(a in b){c[a]=b[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(j,k){var f=this,d=f.slots,b=f.buffer,a=d.length,c,h,g;for(c=0;c<a;++c){h=d[c];if(h){if((g=j[h.pos])==null){g=""}if(h.not){g=!g}if(h.format){g=h.format(g,k)}b[c]=g}}return b.join("")},getTokens:function(){return this.tokens},parse:function(){var l=this,q=l.text,f=[],j=[],k=[],p={},o=0,d=l.tokenRe,m=0,b,g,a,h,r,n,c;for(g in l._initters){delete l[g]}l.buffer=f;l.slots=j;l.tokens=k;while((h=d.exec(q))){a=h.index-o;if(a){f[m++]=q.substring(o,o+a);o+=a}o+=(r=h[0]).length;n={fmt:(b=h[3]||null),index:h[1]?parseInt(h[1],10):null,not:r.charAt(1)==="!",token:h[2]||null};c=n.token||String(n.index);if(c in p){n.pos=p[c]}else{p[c]=n.pos=k.length;k.push(c)}if(b){if(b.substring(0,5)==="this."){n.fmt=b.substring(5)}else{n.scope=Ext.util.Format}l.parseArgs(h[4],n)}j[m++]=n}if(o<q.length){f[m++]=q.substring(o)}return l},parseArgs:function(g,h){var f=this,b=f.numberRe,j=f.stringRe,k,d,c,a;if(!g){d=[]}else{if(g.indexOf(",")<0){d=[g]}else{d=g.split(",")}}h=h||{};a=d.length;h.args=d;for(c=0;c<a;++c){k=d[c];if(k==="true"){d[c]=true}else{if(k==="false"){d[c]=false}else{if(k==="null"){d[c]=null}else{if(b.test(k)){d[c]=parseFloat(k)}else{if(j.test(k)){d[c]=k.substring(1,k.length-1)}else{h.fn=Ext.functionFactory("return ["+g+"];");h.format=f._formatEval;break}}}}}}if(!h.format){d.unshift(0);h.format=f._formatArgs}return h},parseFormat:function(a){var d=this,c=d.formatRe.exec(a),f={fmt:a,scope:Ext.util.Format},b;b=c[2];if(b){f.fmt=c[1];d.parseArgs(b,f)}else{f.args=[0];f.format=d._formatArgs}return f},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(c,b){var a=this.fn();a.unshift(c);b=this.scope||b;return b[this.fmt].apply(b,a)}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{pageSize:0,rootProperty:""},clear:function(a){var b=this;b.pageMapGeneration=(b.pageMapGeneration||0)+1;Ext.util.LruCache.prototype.clear.apply(this,arguments)},forEach:function(l,n){var h=this,d=Ext.Object.getKeys(h.map),a=d.length,k=h.getPageSize(),c,b,m,g,f;for(c=0;c<a;c++){d[c]=Number(d[c])}Ext.Array.sort(d);n=n||h;for(c=0;c<a;c++){m=d[c];g=h.getPage(m);f=g.length;for(b=0;b<f;b++){if(l.call(n,g[b],(m-1)*k+b)===false){return}}}},findBy:function(c,b){var d=this,a=null;b=b||d;d.forEach(function(g,f){if(c.call(b,g,f)){a=g;return false}});return a},findIndexBy:function(c,b){var d=this,a=-1;b=b||d;d.forEach(function(g,f){if(c.call(b,g)){a=f;return false}});return a},find:function(h,g,j,d,c,b){if(Ext.isEmpty(g,false)){return null}var f=Ext.String.createRegex(g,d,c,b),a=this.getRootProperty();return this.findBy(function(k){return k&&f.test((a?k[a]:k)[h])},null,j)},findIndex:function(h,g,j,d,c,b){if(Ext.isEmpty(g,false)){return null}var f=Ext.String.createRegex(g,d,c,b),a=this.getRootProperty();return this.findIndexBy(function(k){return k&&f.test((a?k[a]:k)[h])},null,j)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(b,c){var f=this,a=f.getPageSize(),h=b+Math.floor((c.length-1)/a),d,g;for(d=0;b<=h;b++,d+=a){g=Ext.Array.slice(c,d,d+a);f.add(b,g);f.fireEvent("pageadded",b,g)}},getCount:function(){var a=Ext.util.LruCache.prototype.getCount.call(this);if(a){a=(a-1)*this.getPageSize()+this.last.value.length}return a},indexOf:function(a){return a?a.index:-1},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(b){var a=this.getPage(b);if(a&&a.value){a.value.length=0}return Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments)},getPage:function(a){return this.get(a)},hasRange:function(d,b){var a=this.getPageFromRecordIndex(d),c=this.getPageFromRecordIndex(b);for(;a<=c;a++){if(!this.hasPage(a)){return false}}return true},hasPage:function(a){return !!this.get(a)},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(a,b){b--;if(!this.hasRange(a,b)){Ext.Error.raise("PageMap asked for range which it does not have")}var j=this,k=j.getPageSize(),n=j.getPageFromRecordIndex(a),f=j.getPageFromRecordIndex(b),c=(n-1)*k,p=(f*k)-1,l=n,q=[],o,h,m,d=0,g;for(;l<=f;l++){if(l===n){o=a-c;m=true}else{o=0;m=false}if(l===f){h=k-(p-b);m=true}if(m){Ext.Array.push(q,Ext.Array.slice(j.getPage(l),o,h))}else{Ext.Array.push(q,j.getPage(l))}}for(g=q.length;d<g;d++){q[d].index=a++}return q}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:true,buffered:true,config:{data:0,pageSize:25,remoteSort:true,remoteFilter:true,sortOnLoad:false,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0},applyData:function(b){var a=this.data||(this.data=this.createDataCollection());return a},applyProxy:function(a){a=Ext.data.ProxyStore.prototype.applyProxy.call(this,a);if(a.setEnablePaging){a.setEnablePaging(true)}return a},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(a){if(this.isInitializing){this.blockLoad()}this.group(a);if(this.isInitializing){this.unblockLoad()}},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var b=this,a=new Ext.data.PageMap({store:b,rootProperty:"data",pageSize:b.getPageSize(),maxSize:b.getPurgePageCount(),listeners:{clear:b.onPageMapClear,scope:b}});b.pageRequests={};return a},removeAll:function(a){var b=this,c=b.getData();if(c){if(a){b.suspendEvent("clear")}c.clear();if(a){b.resumeEvent("clear")}}},load:function(a){var b=this;a=a||{};b.getData().clear();a.page=1;a.start=0;a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;delete a.callback;return b.loadToPrefetch(a)},reload:function(m){var h=this,j,b,g,l,f,a,k,c,d=h.getData();if(!m){m={}}delete h.totalCount;d.clear(true);a=function(){if(h.rangeCached(j,b)){h.loading=false;d.un("pageadded",a);c=d.getRange(j,b+1);h.fireEvent("load",h,c,true)}};k=Math.ceil((h.getLeadingBufferZone()+h.getTrailingBufferZone())/2);if(!h.lastRequestStart){j=m.start||0;b=j+(m.count||h.getPageSize())-1}else{j=h.lastRequestStart;b=h.lastRequestEnd}g=h.getPageFromRecordIndex(Math.max(j-k,0));l=h.getPageFromRecordIndex(b+k);if(h.fireEvent("beforeload",h,m)!==false){h.loading=true;d.on("pageadded",a);for(f=g;f<=l;f++){h.prefetchPage(f,m)}}},filter:function(){if(this.remoteSort){this.getData().clear();Ext.data.ProxyStore.prototype.filter.apply(this,arguments)}Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},clearFilter:function(){this.getData().clear();Ext.data.ProxyStore.prototype.clearFilter.apply(this,arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(c,a){var b=this;a=a||{};a.page=b.currentPage=c;a.start=(c-1)*b.getPageSize();a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;delete a.callback;return b.loadToPrefetch(a)},clearData:function(c){var a=this,b=a.getData();if(b){b.clear()}if(c!==true||a.clearRemovedOnLoad){a.removed.length=0}},getCount:function(){return this.totalCount||0},getRange:function(c,g,l){var k=this,d=k.totalCount-1,f=k.lastRequestStart,m=[],h=k.getData(),b,j,a;l=Ext.apply({prefetchStart:c,prefetchEnd:g},l);g=(g>=k.totalCount)?d:g;j=c===0?0:c-1;a=g===d?g:g+1;k.lastRequestStart=c;k.lastRequestEnd=g;if(k.rangeCached(j,a)){k.onRangeAvailable(l);m=h.getRange(c,g+1)}else{k.fireEvent("cachemiss",k,c,g);b=function(o,n){if(k.rangeCached(j,a)){k.fireEvent("cachefilled",k,c,g);h.un("pageadded",b);k.onRangeAvailable(l)}};h.on("pageadded",b);k.prefetchRange(c,g)}k.primeCache(c,g,c<f?-1:1);return m},getById:function(b){var a=this.data.findBy(function(c){return c.getId()===b});return a},getByInternalId:function(b){var a;a=this.data.findBy(function(c){return c.internalId===b});return a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(b,d){var c=this,a;if(b&&typeof b==="string"){a=c.grouper;if(!a){c.grouper=new Ext.util.Grouper({property:b,direction:d||"ASC",root:"data"})}else{if(d===undefined){a.toggle()}else{a.setDirection(d)}}}else{c.grouper=b?c.getSorters().decodeSorter(b,"Ext.util.Grouper"):null}if(c.isLoadBlocked()){return}c.getData().clear();c.loadPage(1,{callback:function(){c.fireEvent("groupchange",c,c.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},loadToPrefetch:function(q){var m=this,c=q,h=m.getPurgePageCount(),j,b,o,n=q.start,a=q.start+q.limit-1,k=Math.min(a,q.start+(m.getViewSize()||q.limit)-1),l=m.getPageFromRecordIndex(Math.max(n-m.getTrailingBufferZone(),0)),p=m.getPageFromRecordIndex(a+m.getLeadingBufferZone()),g=m.getData(),d=function(){if(m.rangeCached(n,k)){m.loading=false;b=g.getRange(n,k+1);g.un("pageadded",d);if(m.hasListeners.guaranteedrange){m.guaranteeRange(n,k,q.callback,q.scope)}if(q.loadCallback){q.loadCallback.call(q.scope||m,b,f,true)}if(q.callback){q.callback.call(q.scope||m,b,n,a,q)}m.fireEvent("datachanged",m);m.fireEvent("refresh",m);m.fireEvent("load",m,b,true)}},f;if(h){g.setMaxSize(h=Math.max(h,p-l+1))}if(m.fireEvent("beforeload",m,q)!==false){delete m.totalCount;m.loading=true;if(q.callback){c=Ext.apply({},q);delete c.callback}m.on("prefetch",function(s,r,u,t){if(u){f=t;if((o=m.getTotalCount())){g.on("pageadded",d);k=Math.min(k,o-1);p=m.getPageFromRecordIndex(Math.min(k+m.getLeadingBufferZone(),o-1));for(j=l+1;j<=p;++j){m.prefetchPage(j,c)}}else{m.fireEvent("datachanged",m);m.fireEvent("refresh",m);m.fireEvent("load",m,r,true)}}else{m.fireEvent("load",m,r,false)}},null,{single:true});m.prefetchPage(l,c)}},prefetch:function(c){var f=this,a=f.getPageSize(),g=f.getData(),d,b;if(a){if(f.lastPageSize&&a!=f.lastPageSize){Ext.Error.raise("pageSize cannot be dynamically altered")}if(!g.pageSize){g.setPageSize(a)}}else{f.pageSize=g.setPageSize(a=c.limit)}f.lastPageSize=a;if(!c.page){c.page=f.getPageFromRecordIndex(c.start);c.start=(c.page-1)*a;c.limit=Math.ceil(c.limit/a)*a}if(!f.pageRequests[c.page]){d=f.proxy;c=Ext.apply({action:"read",filters:f.getFilters().items,sorters:f.getSorters().items,grouper:f.getGrouper(),internalCallback:f.onProxyPrefetch,internalScope:f},c);b=d.createOperation("read",c);b.pageMapGeneration=g.pageMapGeneration;if(f.fireEvent("beforeprefetch",f,b)!==false){f.pageRequests[c.page]=b.execute();if(d.isSynchronous){delete f.pageRequests[c.page]}}}return f},onPageMapClear:function(){var d=this,c=d.wasLoading,a=d.pageRequests,g=d.getData(),b,f;g.clearListeners();g.on("clear",d.onPageMapClear,d);d.loading=true;d.totalCount=0;for(f in a){if(a.hasOwnProperty(f)){b=a[f];delete a[f];delete b.callback}}d.fireEvent("clear",d);d.loading=c},prefetchPage:function(f,b){var d=this,a=d.getPageSize(),g=(f-1)*a,c=d.totalCount;if(c!==undefined&&d.data.getCount()===c){return}d.prefetch(Ext.applyIf({page:f,start:g,limit:a},b))},onProxyPrefetch:function(c){var f=this,d=c.getResultSet(),b=c.getRecords(),h=c.wasSuccessful(),g=c.getPage(),a=f.totalCount;if(c.pageMapGeneration===f.getData().pageMapGeneration){if(d){f.totalCount=d.getTotal();if(f.totalCount!==a){f.fireEvent("totalcountchange",f.totalCount)}}if(g!==undefined){delete f.pageRequests[g]}f.loading=false;f.fireEvent("prefetch",f,b,h,c);if(h){f.cachePage(b,c.getPage())}Ext.callback(c.getCallback(),c.getScope()||f,[b,c,h])}},cachePage:function(b,f){var d=this,a=b.length,c;if(!Ext.isDefined(d.totalCount)){d.totalCount=b.length;d.fireEvent("totalcountchange",d.totalCount)}for(c=0;c<a;c++){b[c].join(d)}d.getData().addPage(f,b)},rangeCached:function(b,a){return this.getData().hasRange(b,a)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return !!this.pageRequests[a]},rangeSatisfied:function(b,a){return this.rangeCached(b,a)},onRangeAvailable:function(d){var f=this,b=f.getTotalCount(),g=d.prefetchStart,a=(d.prefetchEnd>b-1)?b-1:d.prefetchEnd,c;a=Math.max(0,a);c=f.getData().getRange(g,a+1);if(d.fireEvent!==false){f.fireEvent("guaranteedrange",c,g,a,d)}if(d.callback){d.callback.call(d.scope||f,c,g,a,d)}},guaranteeRange:function(f,a,d,c,b){b=Ext.apply({callback:d,scope:c},b);this.getRange(f,a+1,b)},prefetchRange:function(h,b){var f=this,d=f.getPurgePageCount(),c,a,g;if(!f.rangeCached(h,b)){c=f.getPageFromRecordIndex(h);a=f.getPageFromRecordIndex(b);f.getData().setMaxSize(d?(a-c+1)+d:0);for(g=c;g<=a;g++){if(!f.pageCached(g)){f.prefetchPage(g)}}}},primeCache:function(j,c,h){var g=this,f=g.getLeadingBufferZone(),d=g.getTrailingBufferZone(),b=g.getPageSize(),a=g.totalCount;if(h===-1){j=Math.max(j-f,0);c=Math.min(c+d,a-1)}else{if(h===1){j=Math.max(Math.min(j-d,a-b),0);c=Math.min(c+f,a-1)}else{j=Math.min(Math.max(Math.floor(j-((f+d)/2)),0),a-g.pageSize);c=Math.min(Math.max(Math.ceil(c+((f+d)/2)),0),a-1)}}g.prefetchRange(j,c)},sort:function(b,a,c){if(arguments.length===0){this.clearAndLoad()}else{this.getSorters().addSort(b,a,c)}},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){a.clearAndLoad({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("sort",a,b)}},clearAndLoad:function(a){this.getData().clear();this.loadPage(1,a)}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0));(Ext.cmd.derive("Ext.data.NodeInterface",Ext.Base,{statics:{decorate:function(b){var d=Ext.data.schema.Schema.lookupEntity(b),g=d.prototype,a,c,f;if(!d.prototype.isObservable){d.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable)}if(g.isNode){return}a=g.idProperty;c=d.getField(a);f=c.type;d.override(this.getPrototypeBody());d.addFields([{name:"parentId",type:f,defaultValue:null,allowNull:c.allowNull},{name:"index",type:"int",defaultValue:-1,persist:false,convert:null},{name:"depth",type:"int",defaultValue:0,persist:false,convert:null},{name:"expanded",type:"bool",defaultValue:false,persist:false,convert:null},{name:"expandable",type:"bool",defaultValue:true,persist:false,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:false,convert:null},{name:"leaf",type:"bool",defaultValue:false},{name:"cls",type:"string",defaultValue:"",persist:false,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:false,convert:null},{name:"icon",type:"string",defaultValue:"",persist:false,convert:null},{name:"root",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isLast",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isFirst",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"loaded",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"loading",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"href",type:"string",defaultValue:"",persist:false,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:false,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:false,convert:null},{name:"children",type:"auto",defaultValue:null,persist:false,convert:null},{name:"visible",type:"boolean",defaultValue:true,persist:false},{name:"text",type:"string",persist:false}])},getPrototypeBody:function(){var a={idchanged:true,append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true,expand:true,collapse:true,beforeexpand:true,beforecollapse:true,sort:true};return{isNode:true,constructor:function(){var b=this;b.mixins.observable.constructor.call(b);b.callParent(arguments);b.firstChild=b.lastChild=b.parentNode=b.previousSibling=b.nextSibling=null;b.childNodes=[];return b},createNode:function(b){var j=this,g=j.childType,m,k,d,l,h,f,c=j.self;if(!b.isModel){if(g){c=j.schema.getEntity(g)}else{m=j.getTreeStore();k=m&&m.getProxy().getReader();d=j.getProxy();l=d?d.getReader():null;h=!k||(l&&l.initialConfig.typeProperty)?l:k;if(h){f=h.getTypeProperty();if(f){c=h.getChildType(j.schema,b,f)}}}b=new c(b)}if(!b.childNodes){b.firstChild=b.lastChild=b.parentNode=b.previousSibling=b.nextSibling=null;b.childNodes=[]}return b},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(b){this.firstChild=b},setLastChild:function(b){this.lastChild=b},updateInfo:function(h,t){var v=this,u=v.data.depth,f={},d=v.childNodes,s=d.length,r,j=v.phantom,c=v.data,q=v.fields,g=v.modified||(v.modified={}),o,n,b,l,w,k=t.parentId,m,p;if(!t){Ext.Error.raise("NodeInterface expects update info to be passed")}for(o in t){b=q[v.fieldOrdinals[o]];n=t[o];p=b&&b.persist;l=c[o];m=p&&(o==="index")&&(l!==-1)&&(k&&k!==g.parentId);if(!m&&v.isEqual(l,n)){continue}c[o]=n;if(p){if(!m&&g.hasOwnProperty(o)){if(v.isEqual(g[o],n)){delete g[o];v.dirty=false;for(w in g){if(g.hasOwnProperty(w)){v.dirty=true;break}}}}else{v.dirty=true;g[o]=l}}}if(h){v.commit();v.phantom=j}if(v.data.depth!==u){f={depth:v.data.depth+1};for(r=0;r<s;r++){d[r].updateInfo(h,f)}}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var b=this;if(b.get("expandable")){return !(b.isLeaf()||(b.isLoaded()&&!b.phantom&&!b.hasChildNodes()))}return false},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(d,m,f){var k=this,g,j,h,l,b,o={isLast:true,parentId:k.getId(),depth:(k.data.depth||0)+1},n,c=k.getTreeStore();Ext.suspendLayouts();if(Ext.isArray(d)){j=d.length;n=new Array(j);k.callTreeStore("beginFill");for(g=0;g<j;g++){n[g]=k.appendChild(d[g],m,f)}k.callTreeStore("endFill",[n])}else{d=k.createNode(d);if(m!==true&&k.fireEventArgs("beforeappend",[k,d])===false){return false}h=k.childNodes.length;l=d.parentNode;if(l){if(l.removeChild(d,false,m,l.getTreeStore()===k.getTreeStore())===false){return false}}c&&c.beginUpdate();h=k.childNodes.length;if(h===0){k.setFirstChild(d)}k.childNodes[h]=d;d.parentNode=k;d.nextSibling=null;k.setLastChild(d);b=k.childNodes[h-1];if(b){d.previousSibling=b;b.nextSibling=d;b.updateInfo(f,{isLast:false});b.triggerUIUpdate()}else{d.previousSibling=null}o.isFirst=h===0;o.index=h;d.updateInfo(f,o);if(k.isLeaf()){k.set("leaf",false)}if(!k.isLoaded()){k.set("loaded",true)}else{if(k.childNodes.length===1){k.triggerUIUpdate()}}if(h&&k.childNodes[h-1].isExpanded()){k.childNodes[h-1].cascadeBy(k.triggerUIUpdate)}if(m!==true){k.fireEventArgs("append",[k,d,h]);if(l){d.fireEventArgs("move",[d,l,k,h])}}k.callTreeStore("onNodeAppend",[d,h]);n=d;c&&c.endUpdate()}Ext.resumeLayouts(true);return n},getOwnerTree:function(){var b=this.getTreeStore();if(b){return b.ownerTree}},getTreeStore:function(){var b=this;while(b&&!b.treeStore){b=b.parentNode}return b&&b.treeStore},removeChild:function(d,c,l,k){var j=this,h=j.indexOf(d),g,f,b;if(h===-1||(l!==true&&j.fireEventArgs("beforeremove",[j,d,!!k])===false)){return false}Ext.suspendLayouts();Ext.Array.erase(j.childNodes,h,1);if(j.firstChild===d){j.setFirstChild(d.nextSibling)}if(j.lastChild===d){j.setLastChild(d.previousSibling)}b=d.previousSibling;if(b){d.previousSibling.nextSibling=d.nextSibling}if(d.nextSibling){d.nextSibling.previousSibling=d.previousSibling;if(h===0){d.nextSibling.updateInfo(false,{isFirst:true})}for(g=h,f=j.childNodes.length;g<f;g++){j.childNodes[g].updateInfo(false,{index:g})}}else{if(b){b.updateInfo(false,{isLast:true});if(b.isExpanded()){b.cascadeBy(j.triggerUIUpdate)}else{b.triggerUIUpdate()}}}if(!j.childNodes.length){j.triggerUIUpdate()}Ext.resumeLayouts(true);if(l!==true){j.callTreeStore("beforeNodeRemove",[[d],!!k]);d.previousSibling=d.nextSibling=d.parentNode=null;j.fireEventArgs("remove",[j,d,!!k]);j.callTreeStore("onNodeRemove",[[d],!!k])}if(c){d.erase(true)}else{d.clear()}return d},copy:function(f,d){var h=this,c=h.callParent([f,d]),b=h.childNodes?h.childNodes.length:0,g;if(d){for(g=0;g<b;g++){c.appendChild(h.childNodes[g].copy(undefined,true))}}return c},clear:function(b){var c=this;c.parentNode=c.previousSibling=c.nextSibling=null;if(b){c.firstChild=c.lastChild=null}},drop:function(){var f=this,g=f.childNodes,c=f.parentNode,b=g?g.length:0,d;f.callParent();for(d=0;d<b;d++){g[d].drop()}if(c){c.removeChild(f)}},erase:function(b){var f=this,d=f.destroyOptions,c=f.childNodes,g=c.length,h;if(b===true){f.clear(true);for(h=0;h<g;h++){c[h].erase(true)}f.childNodes=null;delete f.destroyOptions;f.callParent([d])}else{f.destroyOptions=b;f.remove(true)}},insertBefore:function(d,j,n){var k=this,h=k.indexOf(j),l=d.parentNode,m=h,f,b,g,c=k.getTreeStore();if(!j){return k.appendChild(d)}if(d===j){return false}d=k.createNode(d);if(n!==true&&k.fireEventArgs("beforeinsert",[k,d,j])===false){return false}if(l===k&&k.indexOf(d)<h){m--}if(l){if(l.removeChild(d,false,n,l.getTreeStore()===k.getTreeStore())===false){return false}}c&&c.beginUpdate();if(m===0){k.setFirstChild(d)}Ext.Array.splice(k.childNodes,m,0,d);d.parentNode=k;d.nextSibling=j;j.previousSibling=d;b=k.childNodes[m-1];if(b){d.previousSibling=b;b.nextSibling=d}else{d.previousSibling=null}d.updateInfo(false,{parentId:k.getId(),index:m,isFirst:m===0,isLast:false,depth:(k.data.depth||0)+1});for(g=m+1,f=k.childNodes.length;g<f;g++){k.childNodes[g].updateInfo(false,{index:g})}if(!k.isLoaded()){k.set("loaded",true)}else{if(k.childNodes.length===1){k.triggerUIUpdate()}}if(n!==true){k.fireEventArgs("insert",[k,d,j]);if(l){d.fireEventArgs("move",[d,l,k,m,j])}}k.callTreeStore("onNodeInsert",[d,m]);c&&c.endUpdate();return d},insertChild:function(b,d){var c=this.childNodes[b];if(c){return this.insertBefore(d,c)}else{return this.appendChild(d)}},isLastVisible:function(){var d=this,b=d.data.isLast,c=d.nextSibling;if(!b&&d.getTreeStore().isFiltered()){while(c){if(c.data.visible){return false}c=c.nextSibling}return true}return b},remove:function(c,d){var f=this,b=f.parentNode;if(b){b.removeChild(f,c,d)}else{if(c){f.erase(true)}}return f},removeAll:function(d,f,k){var h=this,j=h.childNodes,c=0,b=j.length,g;if(!b){return}if(!k){h.callTreeStore("beforeNodeRemove",[j,false])}for(;c<b;++c){g=j[c];g.previousSibling=g.nextSibling=g.parentNode=null;h.fireEventArgs("remove",[h,g,false]);if(d){g.erase(true)}else{g.removeAll(false,f,true)}}if(!k){h.callTreeStore("onNodeRemove",[j,false])}h.firstChild=h.lastChild=null;h.childNodes.length=0;if(!k){h.triggerUIUpdate()}return h},getChildAt:function(b){return this.childNodes[b]},replaceChild:function(b,f,d){var c=f?f.nextSibling:null;this.removeChild(f,false,d);this.insertBefore(b,c,d);return f},indexOf:function(b){return Ext.Array.indexOf(this.childNodes,b)},indexOfId:function(f){var d=this.childNodes,b=d.length,c=0;for(;c<b;++c){if(d[c].getId()===f){return c}}return -1},getPath:function(f,d){f=f||this.idProperty;d=d||"/";var c=[this.get(f)],b=this.parentNode;while(b){c.unshift(b.get(f));b=b.parentNode}return d+c.join(d)},getDepth:function(){return this.get("depth")},bubble:function(d,c,b){var f=this;while(f){if(d.apply(c||f,b||[f])===false){break}f=f.parentNode}},cascadeBy:function(h,d,b,k){var g=this;if(arguments.length===1&&!Ext.isFunction(h)){k=h.after;d=h.scope;b=h.args;h=h.before}if(!h||h.apply(d||g,b||[g])!==false){var j=g.childNodes,f=j.length,c;for(c=0;c<f;c++){j[c].cascadeBy.call(j[c],h,d,b,k)}if(k){k.apply(d||g,b||[g])}}},eachChild:function(f,d,b){var h=this.childNodes,g=h.length,c;for(c=0;c<g;c++){if(f.apply(d||this,b||[h[c]])===false){break}}},findChild:function(c,d,b){return this.findChildBy(function(){return this.get(c)==d},null,b)},findChildBy:function(j,h,c){var g=this.childNodes,b=g.length,f=0,k,d;for(;f<b;f++){k=g[f];if(j.call(h||k,k)===true){return k}else{if(c){d=k.findChildBy(j,h,c);if(d!==null){return d}}}}return null},contains:function(b){return b.isAncestor(this)},isAncestor:function(b){var c=this.parentNode;while(c){if(c===b){return true}c=c.parentNode}return false},sort:function(l,d,k){var h=this,j=h.childNodes,g=j.length,f,c,b={isFirst:true};if(g>0){if(!l){l=h.getTreeStore().getSortFn()}Ext.Array.sort(j,l);h.setFirstChild(j[0]);h.setLastChild(j[g-1]);for(f=0;f<g;f++){c=j[f];c.previousSibling=j[f-1];c.nextSibling=j[f+1];b.isLast=(f===g-1);b.index=f;c.updateInfo(false,b);b.isFirst=false;if(d&&!c.isLeaf()){c.sort(l,true,true)}}if(k!==true){h.fireEventArgs("sort",[h,j]);h.callTreeStore("onNodeSort",[j])}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var b=this.parentNode;while(b){if(!b.isExpanded()){return false}b=b.parentNode}return true},expand:function(b,f,c){var d=this;if(!d.isLeaf()){if(d.isLoading()){d.on("expand",function(){d.expand(b,f,c)},d,{single:true})}else{if(!d.isExpanded()){if(d.fireEventArgs("beforeexpand",[d])!==false){d.callTreeStore("onBeforeNodeExpand",[d.onChildNodesAvailable,d,[b,f,c]])}}else{if(b){d.expandChildren(true,f,c)}else{Ext.callback(f,c||d,[d.childNodes])}}}}else{Ext.callback(f,c||d)}},onChildNodesAvailable:function(b,c,g,d){var f=this;Ext.suspendLayouts();f.set("expanded",true);f.callTreeStore("onNodeExpand",[b,false]);f.fireEventArgs("expand",[f,b]);if(c){f.expandChildren(true,g,d)}else{Ext.callback(g,d||f,[f.childNodes])}Ext.resumeLayouts(true)},expandChildren:function(g,n,o,h){var l=this,m,j,c,b,k,f,d;if(Ext.isBoolean(n)){m=n;n=o;o=h;h=m}if(h===undefined){d=l.getTreeStore();h=d&&d.singleExpand}c=l.childNodes;b=[];k=h?Math.min(c.length,1):c.length;for(j=0;j<k;++j){f=c[j];if(!f.isLeaf()){b[b.length]=f}}k=b.length;for(j=0;j<k;++j){b[j].expand(g)}if(n){Ext.callback(n,o||l,[l.childNodes])}},collapse:function(d,k,g){var h=this,c=h.isExpanded(),b=h.childNodes.length,f,j;if(!h.isLeaf()&&((!c&&d)||h.fireEventArgs("beforecollapse",[h])!==false)){Ext.suspendLayouts();if(h.isExpanded()){if(d){j=function(){for(f=0;f<b;f++){h.childNodes[f].setCollapsed(true)}};if(k){k=Ext.Function.createSequence(j,Ext.Function.bind(k,g,[h.childNodes]))}else{k=j}}else{if(k){k=Ext.Function.bind(k,g,[h.childNodes])}}h.set("expanded",false);h.callTreeStore("onNodeCollapse",[h.childNodes,k,g]);h.fireEventArgs("collapse",[h,h.childNodes]);k=null}else{if(d){for(f=0;f<b;f++){h.childNodes[f].setCollapsed(true)}}}Ext.resumeLayouts(true)}Ext.callback(k,g||h,[h.childNodes])},setCollapsed:function(c){var f=this,b=f.childNodes.length,d;if(!f.isLeaf()&&f.fireEventArgs("beforecollapse",[f])!==false){f.data.expanded=false;f.fireEventArgs("collapse",[f,f.childNodes]);if(c){for(d=0;d<b;d++){f.childNodes[d].setCollapsed(true)}}}},collapseChildren:function(d,k,l){var j=this,g,b=j.childNodes,h=b.length,f=[],c;for(g=0;g<h;++g){c=b[g];if(!c.isLeaf()&&c.isLoaded()&&c.isExpanded()){f.push(c)}}h=f.length;if(h){for(g=0;g<h;++g){c=f[g];if(g===h-1){c.collapse(d,k,l)}else{c.collapse(d)}}}else{Ext.callback(k,l)}},fireEvent:function(b){return this.fireEventArgs(b,Ext.Array.slice(arguments,1))},fireEventArgs:function(c,f){var h=Ext.mixin.Observable.prototype.fireEventArgs,b,g,d;if(a[c]){for(g=this;b!==false&&g;g=(d=g).parentNode){if(g.hasListeners&&g.hasListeners[c]){b=h.call(g,c,f)}}if(b!==false){g=d.getTreeStore();if(g&&g.hasListeners&&g.hasListeners[c="node"+c]){b=g.fireEventArgs(c,f)}}return b}else{return h.apply(this,arguments)}},serialize:function(){var c=Ext.data.writer.Json.prototype.getRecordData(this),g=this.childNodes,b=g.length,f,d;if(b>0){f=[];for(d=0;d<b;d++){f.push(g[d].serialize())}c.children=f}return c},callTreeStore:function(f,b){var d=this.getTreeStore(),c=d&&d[f];if(d&&c){(b||(b=[])).unshift(this);c.apply(d,b)}},privates:{join:function(b){if(b.isTreeStore){if(this.isRoot()){this.treeStore=this.store=b}}else{this.callParent([b])}},callJoined:function(c,b){this.callParent([c,b]);this.callTreeStore(c,b)}}}}}},0,0,0,0,0,0,[Ext.data,"NodeInterface"],0));(Ext.cmd.derive("Ext.data.NodeStore",Ext.data.Store,{isNodeStore:true,config:{node:null,recursive:false,rootVisible:false,folderSort:false},isExpandingOrCollapsing:0,getTotalCount:function(){return this.getCount()},afterEdit:function(a,b){if(this.getNode()&&b){if(b.indexOf("loaded")!==-1){return this.add(this.retrieveChildNodes(a))}if(b.indexOf("expanded")!==-1){return this.filter()}if(b.indexOf("sorted")!==-1){return this.sort()}}Ext.data.Store.prototype.afterEdit.apply(this,arguments)},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(a,c){var b=this;if(!c){c=null}if(b.contains(a)){b.onUpdate(a,Ext.data.Model.COMMIT,c);b.fireEvent("update",b,a,Ext.data.Model.COMMIT,c)}},onNodeAppend:function(a,b){this.add([b].concat(this.retrieveChildNodes(b)))},onNodeInsert:function(a,b){this.add([b].concat(this.retrieveChildNodes(b)))},onNodeRemove:function(a,b){this.remove([b].concat(this.retrieveChildNodes(b)))},onNodeExpand:function(b,a){this.loadRecords(a)},applyNode:function(a){if(a){Ext.data.NodeInterface.decorate(a)}return a},updateNode:function(b,d){var a=this,c;if(d&&!d.isDestroyed){d.un({append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad",scope:a});d.unjoin(a)}if(b){b.on({scope:a,append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad"});b.join(a);c=[];if(b.childNodes.length){c=c.concat(a.retrieveChildNodes(b))}if(a.getRootVisible()){c.push(b)}else{if(b.isLoaded()||b.isLoading()){b.set("expanded",true)}}a.getData().clear();a.fireEvent("clear",a);a.suspendEvents();a.add(c);a.resumeEvents();if(c.length===0){a.loaded=b.loaded=true}a.fireEvent("refresh",a,a.data)}},retrieveChildNodes:function(a){var d=this.getNode(),b=this.getRecursive(),c=[],f=a;if(!a.childNodes.length||(!b&&a!==d)){return c}if(!b){return a.childNodes}while(f){if(f._added){delete f._added;if(f===a){break}else{f=f.nextSibling||f.parentNode}}else{if(f!==a){c.push(f)}if(f.firstChild){f._added=true;f=f.firstChild}else{f=f.nextSibling||f.parentNode}}}return c},isVisible:function(b){var a=b.parentNode;if(!this.getRecursive()&&a!==this.getNode()){return false}while(a){if(!a.isExpanded()){return false}if(a===this.getNode()){break}a=a.parentNode}return true}},0,0,0,0,["store.node"],0,[Ext.data,"NodeStore"],0));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:undefined,params:undefined,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:false,username:null,password:null,binary:false,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(a){var c=this.getParams(),b;if(c){return c[a]}return b},setParam:function(a,b){var c=this.getParams()||{};c[a]=b;this.setParams(c)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.TreeModel",Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode}},0,0,0,0,0,[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.data,"TreeModel"],function(){Ext.data.NodeInterface.decorate(this)}));(Ext.cmd.derive("Ext.data.TreeStore",Ext.data.NodeStore,{isTreeStore:true,config:{root:null,rootVisible:false,recursive:true,defaultRootProperty:"children",parentIdProperty:null},clearOnLoad:true,clearRemovedOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",fillCount:0,folderSort:false,constructor:function(a){var b=this;b.byIdMap={};b.byInternalIdMap={};Ext.data.NodeStore.prototype.constructor.call(this,a)},applyFields:function(a){var b=this;if(a){if(b.defaultRootProperty!==b.self.prototype.config.defaultRootProperty){a=a.concat({name:b.defaultRootProperty,type:"auto",defaultValue:null,persist:false})}b.setModel(Ext.define(null,{extend:"Ext.data.TreeModel",fields:a,proxy:b.getProxy()}));b.implicitModel=true}},onSorterEndUpdate:function(){var c=this,a=c.getSorters(),d=a.getRange(),b=c.getRoot();if(b&&d.length){if(c.getRemoteSort()){c.attemptLoad({callback:function(){c.fireEvent("sort",c,d)}})}else{b.sort(this.getSortFn(),true);c.fireEvent("datachanged",c);c.fireEvent("refresh",c);c.fireEvent("sort",c,d)}}else{c.fireEvent("sort",c,d)}},updateRemoteFilter:function(){var b=this.getData(),a=this.getFilters();b.setFilters(null);a.on("endupdate",this.onFilterEndUpdate,this)},updateRemoteSort:function(){var a=this.getData(),b=this.getSorters();a.setSorters(null);b.on("endupdate",this.onSorterEndUpdate,this)},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var b=this.sorters.getSortFn(),a=b;if(this.getFolderSort()){a=function(d,c){var f=d.get("leaf")?1:0,g=c.get("leaf")?1:0;return(f-g)||b(d,c)}}return a},updateRootVisible:function(b){var a=this.getRoot(),c;if(a){c=this.getData();if(b){c.insert(0,a)}else{c.remove(a)}}},updateTrackRemoved:function(a){Ext.data.NodeStore.prototype.updateTrackRemoved.apply(this,arguments);this.removedNodes=this.removed;this.removed=null},getRemovedRecords:function(){return this.removedNodes},onDestroyRecords:function(b,a,c){if(c){this.removedNodes.length=0}},applyProxy:function(b){var c=this,a;c.changingProxy=true;b=Ext.data.NodeStore.prototype.applyProxy.apply(this,arguments);if(b.setIdParam){b.setIdParam(c.nodeParam)}if(Ext.isEmpty(b.getReader().getRootProperty())){a=b.getReader();a.setRootProperty(c.defaultRootProperty);a.buildExtractors(true)}c.changingProxy=false;return b},applyModel:function(a){return Ext.data.NodeStore.prototype.applyModel.apply(this,arguments)||Ext.data.TreeModel},updateModel:function(a){var b=a.prototype.isNode;Ext.data.NodeInterface.decorate(a);if(!b&&!this.changingProxy){this.getProxy().getReader().buildExtractors(true)}},onFilterEndUpdate:function(f){var d=this,b,c=f.length,h=f.getFilterFn(),a=d.getRoot(),g;if(c){g=[];a.cascadeBy({after:function(j){j.set("visible",h(j))}});for(b=0,c=a.childNodes.length;b<c;b++){if(a.childNodes[b].get("visible")){g.push(a.childNodes[b])}}}else{g=a.childNodes}d.onNodeFilter(a,g);a.fireEvent("filterchange",a,g);d.fireEvent("filterchange",d,f);Ext.data.NodeStore.prototype.onFilterEndUpdate.call(this,f)},clearFilter:function(){var b=this,a=b.getRoot();Ext.data.NodeStore.prototype.clearFilter.call(this);b.filterFn=null;a.cascadeBy(function(c){c.set("visible",true)});b.onNodeFilter(a,a.childNodes);a.fireEvent("filterchange",a,a.childNodes);b.fireEvent("filterchange",b,[])},onNodeFilter:function(a,f){var c=this,d=c.getData(),b=[];c.handleNodeExpand(a,f,b);c.suspendEvents();d.splice(0,d.getCount(),b);c.resumeEvents();c.fireEvent("datachanged",c);c.fireEvent("refresh",c)},onBeforeNodeExpand:function(b,m,n,h){var j=this,k,d,l,g,a,c,f;if(b.isLoaded()){c=[b.childNodes];if(h){c.push.apply(c,h)}Ext.callback(m,n||b,c)}else{if(b.isLoading()){j.on("load",function(){c=[b.childNodes];if(h){c.push.apply(c,h)}Ext.callback(m,n||b,c)},j,{single:true,priority:1001})}else{k=j.getProxy().getReader();d=b.getProxy();l=d?d.getReader():null;g=l&&l.initialConfig.rootProperty?l:k;a=g.getRoot(b.raw||b.data);if(a||b.phantom){f=b.childType;if(a){j.fillNode(b,g.extractData(a,f?{model:f}:undefined))}c=[b.childNodes];if(h){c.push.apply(c,h)}Ext.callback(m,n||b,c)}else{j.read({node:b,onChildNodesAvailable:function(){delete j.lastOptions.onChildNodesAvailable;c=[b.childNodes];if(h){c.push.apply(c,h)}Ext.callback(m,n||b,c)}})}}}},onNodeExpand:function(d,b){var f=this,a=f.indexOf(d)+1,c=[];f.handleNodeExpand(d,b,c);if(!f.refreshCounter&&d.isRoot()&&!d.get("visible")){f.loadRecords(c)}else{f.insert(a,c)}},handleNodeExpand:function(f,b,d){var h=this,g=b?b.length:0,c,a;if(f!==this.getRoot()&&!h.isVisible(f)){return}if(g){for(c=0;c<g;c++){a=b[c];if(a.get("visible")){d.push(a);if(a.isExpanded()){if(a.isLoaded()){h.handleNodeExpand(a,a.childNodes,d)}else{a.set("expanded",false);a.expand()}}}}}},onNodeCollapse:function(d,a,h,c){var f=this,b=f.indexOf(d)+1,g;if(!f.recursive&&d!==f.getRoot()){return}if(!f.remoteFilter&&f.getFilters().getCount()){a=Ext.Array.filter(a,f.filterVisible)}if(a.length&&f.data.contains(a[0])){g=f.indexOfNextVisibleNode(d);f.removeAt(b,g-b)}Ext.callback(h,c)},indexOfNextVisibleNode:function(b){var a;while(b.parentNode){for(a=b.nextSibling;a&&!a.get("visible");a=a.nextSibling){}if(a){return this.indexOf(a)}b=b.parentNode}return this.getCount()},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(b,g){if(!Ext.isArray(g)){g=[g]}var f=this,a=g.length,d,c;for(d=0;!c&&d<a;d++){if(g[d].get("visible")){c=g[d]}}if(c){f.startRemoveIndex=f.indexOf(g[0]);f.lastRemoveIndexPlusOne=f.indexOfNextVisibleNode(g[g.length-1])}else{f.startRemoveIndex=-1;f.lastRemoveIndexPlusOne=0}},onNodeRemove:function(d,k,j){var h=this,f=h.removedNodes,g=k.length,a=h.startRemoveIndex,b=h.lastRemoveIndexPlusOne,c;if(a!==-1){h.removeIsMove=j;h.removeAt(a,b-a);h.removeIsMove=false}for(c=0;c<g;c++){k[c].cascadeBy(function(l){if(f&&!j&&!l.phantom&&!h.loading){l.removedFrom=h.indexOf(l);f.push(l)}h.unregisterNode(l)})}},onNodeAppend:function(b,c,a){this.onNodeInsert(b,c,a)},onNodeInsert:function(o,a,h){var k=this,j,p,l,b,m,g,c=a.raw||a.data,n,f,d;if(k.filterFn){f=k.filterFn(a);a.set("visible",f);if(f){o.set("visible",k.filterFn(o))}}k.registerNode(a,true);k.beginUpdate();if(k.isVisible(a)){if(h===0||!a.previousSibling){j=o}else{for(p=a.previousSibling;p&&!p.get("visible");p=p.previousSibling){}while(p.isExpanded()&&p.lastChild){p=p.lastChild}j=p}k.insert(k.indexOf(j)+1,a);if(!a.isLeaf()&&a.isExpanded()){if(a.isLoaded()){k.onNodeExpand(a,a.childNodes)}else{if(!k.fillCount){a.set("expanded",false);a.expand()}}}}else{k.needsSync=k.needsSync||a.phantom||a.dirty}if(!a.isLeaf()&&!a.isLoaded()&&!k.lazyFill){l=k.getProxy().getReader();b=a.getProxy();m=b?b.getReader():null;g=m&&m.initialConfig.rootProperty?m:l;n=g.getRoot(c);if(n){d=a.childType;k.fillNode(a,g.extractData(n,d?{model:d}:undefined))}}k.endUpdate()},registerNode:function(g,a){var f=this,c,d,b;f.byIdMap[g.id]=g;f.byInternalIdMap[g.internalId]=g;if(a===true){c=g.childNodes;d=c.length;for(b=0;b<d;b++){f.registerNode(c[b],true)}}},unregisterNode:function(g,a){var f=this,c,d,b;delete f.byIdMap[g.id];delete f.byInternalIdMap[g.internalId];if(a===true){c=g.childNodes;d=c.length;for(b=0;b<d;b++){f.unregisterNode(c[b],true)}}},onNodeSort:function(b,c){var a=this;a.suspendAutoSync();if((a.indexOf(b)!==-1||(b===a.getRoot()&&!a.rootVisible)&&b.isExpanded())){Ext.suspendLayouts();a.onNodeCollapse(b,c);a.onNodeExpand(b,c);Ext.resumeLayouts(true)}a.resumeAutoSync(a.autoSync)},applyRoot:function(d){var b=this,c=b.getModel(),a=c.prototype.idProperty;if(d&&!d.isNode){d=Ext.apply({text:b.defaultRootText,root:true,isFirst:true,isLast:true,depth:0,index:0,parentId:null,allowDrag:false},d);if(b.defaultRootId&&d[a]===undefined){d[a]=b.defaultRootId}d=new c(d);d.store=d.treeStore=b}return d},updateRoot:function(d,a){var b=this,c;b.byIdMap={};b.byInternalIdMap={};b.getTrackRemoved();b.suspendEvents();b.getData().clear();if(d){if(d.fireEventArgs("beforeappend",[null,d])===false){d=null}else{if(c=d.parentNode){if(!c.removeChild(d,false,false,c.getTreeStore()===b)){return}}else{if((c=d.getTreeStore())&&c!==b&&d===c.getRoot()){c.setRoot(null)}}d.set("root",true);d.updateInfo(true,{isFirst:true,isLast:true,depth:0,index:0,parentId:null});d.fireEvent("append",null,d,false);d.fireEvent("rootchange",d);b.onNodeAppend(null,d,0)}}b.fireEvent("rootchange",d,a);if(a&&a.isModel){a.set("root",false);b.remove(a);a.fireEvent("remove",null,a,false);a.fireEvent("rootchange",null);a.store=a.treeStore=null}b.resumeEvents();if(d&&(b.autoLoad||d.isExpanded())){if(d.isLoaded()){b.onNodeExpand(d,d.childNodes);b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}else{d.data.expanded=false;d.expand(false,function(){b.fireEvent("datachanged",b);b.fireEvent("refresh",b)})}}return d},getNodeById:function(a){return this.byIdMap[a]||null},load:function(b){b=b||{};b.params=b.params||{};var g=this,f=b.node||g.getRoot(),c=g.getProxy(),h=b.callback,d=b.scope,a;if(!f){g.setRoot({expanded:true});return}if(f.data.expanded){f.data.loaded=false;if(g.clearOnLoad){f.data.expanded=false}b.callback=function(){if(!g.clearOnLoad){f.collapse()}f.expand();Ext.callback(h,d,arguments)}}b.id=f.getId();b=Ext.apply({filters:g.getFilters().items,sorters:g.getSorters().items,node:b.node||f,internalScope:g,internalCallback:g.onProxyLoad},b);g.lastOptions=Ext.apply({},b);a=c.createOperation("read",b);if(g.fireEvent("beforeload",g,a)!==false){g.loading=true;if(g.clearOnLoad){if(g.clearRemovedOnLoad){g.clearRemoved(f)}f.removeAll(false)}a.execute()}if(g.loading&&f){f.set("loading",true)}return g},clearRemoved:function(b){var k=this,f=k.removedNodes,a=b.getId(),d=f.length,c=d,n={},h=[],m={},j,g,l;if(b===k.getRoot()){k.removedNodes=[];return}for(;c--;){j=f[c];m[j.getId()]=j}for(c=d;c--;){j=f[c];g=j;while(g&&g.getId()!==a){l=g.get("parentId");g=g.parentNode||k.getNodeById(l)||m[l]}if(g){n[j.getId()]=j}}for(c=0;c<d;c++){j=f[c];if(!n[j.getId()]){h.push(j)}}k.removedNodes=h},fillNode:function(c,d){var h=this,b=d?d.length:0,g=h.getSorters(),f,j=false,a=h.sortOnLoad&&b>1&&!h.remoteSort&&g&&g.items&&g.items.length,l,k;if(b){if(!h.remoteFilter&&h.getFilters().getCount()){d[0].set("visible",h.filterFn(d[0]))}for(f=1;!j&&f<b;f++){l=d[f];k=d[f-1];if(h.filterFn){l.set("visible",h.filterFn(l))}j=l.data.index!==k.data.index}if(a){if(j){h.indexSorter=g.insert(0,h.indexSorter)}Ext.Array.sort(d,g.getSortFn());if(j){g.remove(h.indexSorter)}}else{if(j){Ext.Array.sort(d,h.sortByIndex)}}}c.set("loaded",true);if(d.length){c.appendChild(d,undefined,true)}return d},beginFill:function(){var a=this;if(!a.fillCount++){a.beginUpdate();a.suspendEvent("add","update");a.suspendAutoSync();a.fillArray=[]}},endFill:function(f,b){var g=this,d,a,c;g.fillArray.push(b);if(!--g.fillCount){g.resumeAutoSync();g.resumeEvent("add","update");for(d=0,a=g.fillArray.length;d<a;d++){c=g.indexOf(g.fillArray[d][0]);if(c!==-1){g.fireEvent("add",g,g.fillArray[d],c)}}g.fillArray=null;g.endUpdate()}},sortByIndex:function(b,a){return b.data.index-a.data.index},onIdChanged:function(d,g,b){var f=d.childNodes,a=f&&f.length,c;Ext.data.NodeStore.prototype.onIdChanged.apply(this,arguments);delete this.byIdMap[g];this.byIdMap[b]=d;for(c=0;c<a;c++){f[c].set("parentId",b)}},onProxyLoad:function(b){var h=this,d=b.initialConfig,j=b.wasSuccessful(),a=b.getRecords(),g=d.node,f=b.getScope()||h,c=[a,b,j];if(h.isDestroyed){return}h.loading=false;g.set("loading",false);if(j){if(!h.clearOnLoad){a=h.cleanRecords(g,a)}if(h.parentIdProperty){a=h.treeify(g,a)}a=h.fillNode(g,a)}Ext.callback(d.onChildNodesAvailable,f,c);h.fireEvent("load",h,a,j,b,g)},treeify:function(f,b){var j=this,k=f.getId(),g=b.length,c,a,d,l=[],h={};for(c=0;c<g;c++){a=b[c];h[a.getId()]=a}for(c=0;c<g;c++){a=b[c];d=a.data[j.parentIdProperty];if(!d||d===k){l.push(a)}else{h[d].appendChild(a)}}return l},cleanRecords:function(g,b){var f={},j=g.childNodes,d=0,a=j.length,c=[],h;for(;d<a;++d){f[j[d].getId()]=true}for(d=0,a=b.length;d<a;++d){h=b[d];if(!f[h.getId()]){c.push(h)}}return c},removeAll:function(){this.suspendEvents();this.setRoot(null);this.resumeEvents();Ext.data.NodeStore.prototype.removeAll.call(this)},doSort:function(a){var b=this;if(b.remoteSort){b.load()}else{b.tree.sort(a,true);b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}b.fireEvent("sort",b,b.sorters.getRange())},filterVisible:function(a){return a.get("visible")},isVisible:function(c){var a=c.parentNode,d=c.data.visible,b=this.getRoot();while(d&&a){d=a.data.expanded&&a.data.visible;a=a.parentNode}return d&&!(c===b&&!this.rootVisible)},getRootNode:function(){return this.getRoot()},setRootNode:function(a){this.setRoot(a);return this.getRoot()},deprecated:{5:{properties:{tree:null}}}},1,0,0,0,["store.tree"],0,[Ext.data,"TreeStore"],function(){var a=this.prototype;a.indexSorter=new Ext.util.Sorter({sorterFn:a.sortByIndex})}));(Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:true,syncGeneration:0,attach:function(a){this.record=a;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return a.dirty},refresh:function(b){var u=this,v=u.data,d=u.record,l=d.fields,o=d.generation,t=d.data,k=d.validationSeparator,c=null,f,h,m,a,r,p,n,s,q,g,x,w;if(b||u.syncGeneration!==o){u.syncGeneration=o;for(p=0,q=l.length;p<q;++p){a=l[p];w=a.name;x=t[w];f=a.defaultInvalidMessage;m=0;if(!(w in v)){v[w]=h=true}else{h=v[w]}if(a.validate!==Ext.emptyFn){g=a.validate(x,k);if(g!==true){m=g||f}}if(!m){m=true}if(m!==h){(c||(c={}))[w]=m}}if(c){u.set(c)}}}},0,0,0,0,0,0,[Ext.data,"Validation"],0));(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var a="afterbegin",g="afterend",h="beforebegin",d="beforeend",j=["BeforeBegin","previousSibling"],f=["AfterEnd","nextSibling"],c={beforebegin:j,afterend:f},b={beforebegin:j,afterend:f,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:true,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var m=/([a-z])([A-Z])/g,l={};function k(n,p,o){return p+"-"+o.toLowerCase()}return function(n){return l[n]||(l[n]=n.replace(m,k))}}(),generateMarkup:function(r,l){var q=this,p=typeof r,o,k,s,n,m;if(p==="string"||p==="number"){l.push(r)}else{if(Ext.isArray(r)){for(n=0;n<r.length;n++){if(r[n]){q.generateMarkup(r[n],l)}}}else{s=r.tag||"div";l.push("<",s);for(o in r){if(r.hasOwnProperty(o)){k=r[o];if(k!==undefined&&!q.confRe.test(o)){if(typeof k==="object"){l.push(" ",o,'="');q.generateStyles(k,l,true).push('"')}else{l.push(" ",q.attributeTransform[o]||o,'="',k,'"')}}}}if(q.emptyTags.test(s)){l.push("/>")}else{l.push(">");if((k=r.tpl)){k.applyOut(r.tplData,l)}if((k=r.html)){l.push(k)}if((k=r.cn||r.children)){q.generateMarkup(k,l)}m=q.closeTags;l.push(m[s]||(m[s]="</"+s+">"))}}}return l},generateStyles:function(o,l,n){var k=l||[],m,p;for(m in o){if(o.hasOwnProperty(m)){p=o[m];m=this.decamelizeName(m);if(n&&Ext.String.hasHtmlCharacters(p)){p=Ext.String.htmlEncode(p)}k.push(m,":",p,";")}}return l||k.join("")},markup:function(k){if(typeof k==="string"){return k}var l=this.generateMarkup(k,[]);return l.join("")},applyStyles:function(k,l){Ext.fly(k).applyStyles(l)},createContextualFragment:function(l){var o=this.detachedDiv,k=document.createDocumentFragment(),m,n;o.innerHTML=l;n=o.childNodes;m=n.length;while(m--){k.appendChild(n[0])}return k},createDom:function(n,k){var m=this,l=m.markup(n),p=m.detachedDiv;p.innerHTML=l;return p.firstChild},insertHtml:function(n,k,o){var s=this,l,p,m,r,t;n=n.toLowerCase();if(k.insertAdjacentHTML){if(s.ieInsertHtml){t=s.ieInsertHtml(n,k,o);if(t){return t}}l=b[n];if(l){k.insertAdjacentHTML(l[0],o);return k[l[1]]}}else{if(k.nodeType===3){n=n===a?h:n;n=n===d?g:n}p=Ext.supports.CreateContextualFragment?k.ownerDocument.createRange():undefined;r="setStart"+(this.endRe.test(n)?"After":"Before");if(c[n]){if(p){p[r](k);t=p.createContextualFragment(o)}else{t=this.createContextualFragment(o)}k.parentNode.insertBefore(t,n===h?k:k.nextSibling);return k[(n===h?"previous":"next")+"Sibling"]}else{m=(n===a?"first":"last")+"Child";if(k.firstChild){if(p){try{p[r](k[m]);t=p.createContextualFragment(o)}catch(q){t=this.createContextualFragment(o)}}else{t=this.createContextualFragment(o)}if(n===a){k.insertBefore(t,k.firstChild)}else{k.appendChild(t)}}else{k.innerHTML=o}return k[m]}}},insertBefore:function(k,m,l){return this.doInsert(k,m,l,h)},insertAfter:function(k,m,l){return this.doInsert(k,m,l,g)},insertFirst:function(k,m,l){return this.doInsert(k,m,l,a)},append:function(k,m,l){return this.doInsert(k,m,l,d)},overwrite:function(m,l,o){var n=this,k;m=Ext.getDom(m);l=n.markup(l);if(n.ieOverwrite){k=n.ieOverwrite(m,l)}if(!k){m.innerHTML=l;k=m.firstChild}return o?Ext.get(k):k},doInsert:function(m,q,p,k){var n=this,l;m=m.dom||Ext.getDom(m);if("innerHTML" in m){l=n.insertHtml(k,m,n.markup(q))}else{l=n.createDom(q,null);if(m.nodeType===3){k=k===a?h:k;k=k===d?g:k}if(c[k]){m.parentNode.insertBefore(l,k===h?m:m.nextSibling)}else{if(m.firstChild&&k===a){m.insertBefore(l,m.firstChild)}else{m.appendChild(l)}}}return p?Ext.get(l):l},createTemplate:function(l){var k=this.markup(l);return new Ext.Template(k)},createHtml:function(k){return this.markup(k)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0));Ext.define("Ext.overrides.dom.Helper",(function(){var c=/^(?:table|thead|tbody|tr|td)$/i,h=/td|tr|tbody|thead/i,g="<table>",j="</table>",b=g+"<tbody>",f="</tbody>"+j,a=b+"<tr>",d="</tr>"+f;return{override:"Ext.dom.Helper",ieInsertHtml:function(k,m,l){var n=null;if(Ext.isIE9m&&c.test(m.tagName)){n=this.insertIntoTable(m.tagName.toLowerCase(),k,m,l)}return n},ieOverwrite:function(l,k){if(Ext.isIE9m&&c.test(l.tagName)){while(l.firstChild){l.removeChild(l.firstChild)}if(k){return this.insertHtml("afterbegin",l,k)}}},ieTable:function(q,l,r,p){var m=-1,o=this.detachedDiv,n,k;o.innerHTML=[l,r,p].join("");while(++m<q){o=o.firstChild}n=o.nextSibling;if(n){n=o;o=document.createDocumentFragment();while(n){k=n.nextSibling;o.appendChild(n);n=k}}return o},insertIntoTable:function(t,m,l,n){var k,q,p=m==="beforebegin",s=m==="afterbegin",o=m==="beforeend",r=m==="afterend";if(t==="td"&&(s||o)||!h.test(t)&&(p||r)){return null}q=p?l:r?l.nextSibling:s?l.firstChild:null;if(p||r){l=l.parentNode}if(t==="td"||(t==="tr"&&(o||s))){k=this.ieTable(4,a,n,d)}else{if(((t==="tbody"||t==="thead")&&(o||s))||(t==="tr"&&(p||r))){k=this.ieTable(3,b,n,f)}else{k=this.ieTable(2,g,n,j)}}l.insertBefore(k,q);return k}}})());(Ext.cmd.derive("Ext.data.identifier.Uuid",Ext.data.identifier.Generator,{isUnique:true,config:{id:null},constructor:function(a){Ext.data.identifier.Generator.prototype.constructor.call(this,a);this.reconfigure(a)},reconfigure:function(b){var a=this.self;this.generate=(b&&b.version===1)?a.createSequential(b.salt,b.timestamp,b.clockSeq):a.createRandom()},clone:null,statics:{createRandom:function(){var c="xxxxxxxx-xxxx-4xxx-Rxxx-xMxxxxxxxxxx".split(""),b="0123456789abcdef".split(""),a=c.length,d=[];return function(){for(var g,h,f=0;f<a;++f){h=c[f];if(h!=="-"&&h!=="4"){g=Math.random()*16;g=(h==="R")?(g&3|8):(g|((h==="M")?1:0));h=b[g]}d[f]=h}return d.join("")}},createSequential:function(h,b,f){var g=[],l=Math.pow(2,32),j=h.lo,c=h.hi,k=b.lo,d=b.hi,a=function(o,n){var m=o.toString(16).toLowerCase();if(m.length>n){m=m.substring(m.length-n)}else{if(m.length<n){m=Ext.String.leftPad(m,n,"0")}}return m};if(typeof h==="number"){c=Math.floor(h/l);j=Math.floor(h-c*l)}if(typeof b==="number"){d=Math.floor(b/l);k=Math.floor(b-d*l)}c|=256;g[3]=a(128|((f>>>8)&63),2)+a(f&255,2);g[4]=a(c,4)+a(j,8);return function(){g[0]=a(k,8);g[1]=a(d&65535,4);g[2]=a(((d>>>16)&4095)|(1<<12),4);++k;if(k>=l){k=0;++d}return g.join("-")}}}},1,0,0,0,["data.identifier.uuid"],0,[Ext.data.identifier,"Uuid"],function(){this.Global=new this({id:"uuid"})}));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var b=Ext.Date.now()-this.getStartTime(),c=(b/this.getAcceleration()),a=c*Math.pow(Math.E,-this.getSpringTension()*c);return this.getStartValue()+(this.getStartVelocity()*a)}},0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0));(Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-(b/10));this.theta=a;this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a;this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0));(Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(a,b){return Ext.factory(a,Ext.fx.easing.Momentum,b)},applyBounce:function(a,b){return Ext.factory(a,Ext.fx.easing.Bounce,b)},updateStartTime:function(a){this.getMomentum().setStartTime(a);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){this.lastValue=null;this.isBouncingBack=false;this.isOutOfBound=false;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var a=this.getMomentum(),l=this.getBounce(),f=a.getStartVelocity(),g=f>0?1:-1,h=this.getMinMomentumValue(),d=this.getMaxMomentumValue(),c=(g==1)?d:h,j=this.lastValue,k,b;if(f===0){return this.getStartValue()}if(!this.isOutOfBound){k=a.getValue();b=a.getVelocity();if(Math.abs(b)<this.getMinVelocity()){this.isEnded=true}if(k>=h&&k<=d){return k}this.isOutOfBound=true;l.setStartTime(Ext.Date.now()).setStartVelocity(b).setStartValue(c)}k=l.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(j!==null){if((g==1&&k<j)||(g==-1&&k>j)){this.isBouncingBack=true}}}else{if(Math.round(k)==c){this.isEnded=true}}}this.lastValue=k;return k}},0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((a/b)*this.distance)}}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var g=Ext.Date.now()-this.getStartTime(),d=this.getDuration(),b=this.getStartValue(),j=this.getEndValue(),a=this.distance,c=g/d,h=1-c,f=1-Math.pow(h,this.getExponent()),k=b+(f*a);if(g>=d){this.isEnded=true;return j}return k}},0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0));(Ext.cmd.derive("Ext.mixin.Responsive",Ext.Mixin,function(a){return{mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:undefined,merge:function(h,c,g,f){if(!h){return c}var b=c?Ext.Object.chain(c):{},d;for(d in h){if(!f||!(d in b)){b[d]={fn:null,config:h[d]}}}return b}},responsiveFormulas:{$value:0,merge:function(f,b,d,c){return this.mergeNew(f,b,d,c)}}},destroy:function(){a.unregister(this);this.callParent()},privates:{statics:{active:false,all:{},context:{},count:0,nextId:0,activate:function(){a.active=true;a.updateContext();Ext.on("resize",a.onResize,a)},createRuleFn:function(b){return new Function("$c","with($c) { return ("+b+"); }")},deactivate:function(){a.active=false;Ext.un("resize",a.onResize,a)},notify:function(){var d=a.all,c=a.context,b=Ext.GlobalEvents,g=a.timer,f;if(g){a.timer=null;Ext.Function.cancelAnimationFrame(g)}a.updateContext();Ext.suspendLayouts();b.fireEvent("beforeresponsiveupdate",c);for(f in d){d[f].setupResponsiveContext()}b.fireEvent("beginresponsiveupdate",c);for(f in d){d[f].updateResponsiveState()}b.fireEvent("responsiveupdate",c);Ext.resumeLayouts(true)},onResize:function(){if(!a.timer){a.timer=Ext.Function.requestAnimationFrame(a.onTimer)}},onTimer:function(){a.timer=null;a.notify()},processConfig:function(b,j,g){var h=j&&j[g],f=b.config,c,d;if(h){d=b.getConfigurator();c=d.configs[g];f[g]=c.merge(h,f[g],b)}},register:function(b){var c=b.$responsiveId;if(!c){b.$responsiveId=c=++a.nextId;a.all[c]=b;if(++a.count===1){a.activate()}}},unregister:function(b){var c=b.$responsiveId;if(c in a.all){b.$responsiveId=null;delete a.all[c];if(--a.count===0){a.deactivate()}}},updateContext:function(){var g=Ext.Element,f=g.getViewportWidth(),b=g.getViewportHeight(),c=Ext.Microloader,d=a.context;d.width=f;d.height=b;d.tall=f<b;d.wide=!d.tall;d.landscape=d.portrait=false;if(!d.platform){d.platform=(c&&c.platformTags)||{desktop:true}}if(!d.platform.desktop||Ext.supports.OrientationChange){d[Ext.dom.Element.getOrientation()]=true}else{d.landscape=true}}},afterClassMixedIn:function(g){var f=g.prototype,b=f.responsiveConfig,d=f.responsiveFormulas,c;if(b||d){c={};if(b){delete f.responsiveConfig;c.responsiveConfig=b}if(d){delete f.responsiveFormulas;c.responsiveFormulas=d}g.getConfigurator().add(c)}},applyResponsiveConfig:function(c){for(var b in c){c[b].fn=a.createRuleFn(b)}return c},applyResponsiveFormulas:function(d){var c={},f,b;if(d){for(b in d){if(Ext.isString(f=d[b])){f=a.createRuleFn(f)}c[b]=f}}return c},getResponsiveState:function(){var c=a.context,g=this.getResponsiveConfig(),b={},d,f;if(g){for(f in g){d=g[f];if(d.fn.call(this,c)){Ext.merge(b,d.config)}}}return b},setupResponsiveContext:function(){var c=this.getResponsiveFormulas(),d=a.context,b;if(c){for(b in c){d[b]=c[b].call(this,d)}}},transformInstanceConfig:function(d){var c=this,b;a.register(c);if(d){a.processConfig(c,d,"responsiveConfig");a.processConfig(c,d,"responsiveFormulas")}c.setupResponsiveContext();b=c.getResponsiveState();if(d){b=Ext.merge({},d,b);delete b.responsiveConfig;delete b.responsiveFormulas}return b},updateResponsiveState:function(){var b=this.getResponsiveState();this.setConfig(b)}}}},0,0,0,0,0,0,[Ext.mixin,"Responsive"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){var c=null,h=Ext.global.chrome,d,b=function(){b=Ext.now;var m,n;if(Ext.isChrome&&h&&h.Interval){m=new h.Interval();m.start();b=function(){return m.microseconds()/1000}}else{if(window.ActiveXObject){try{n=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=n;b=function(){return n.milliseconds}}catch(o){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=b;return b()};function j(n,m){n.sum+=m;n.min=Math.min(n.min,m);n.max=Math.max(n.max,m)}function f(p){var n=p?p:(b()-this.time),o=this,m=o.accum;++m.count;if(!--m.depth){j(m.total,n)}j(m.pure,n-o.childTime);c=o.parent;if(c){++c.accum.childCount;c.childTime+=n}}function a(){return{min:Number.MAX_VALUE,max:0,sum:0}}function k(n,m){return function(){var p=n.enter(),o=m.apply(this,arguments);p.leave();return o}}function l(m){return Math.round(m*100)/100}function g(o,n,m,q){var p={avg:0,min:q.min,max:q.max,sum:0};if(o){m=m||0;p.sum=q.sum-n*m;p.avg=p.sum/o}return p}return{constructor:function(m){var n=this;n.count=n.childCount=n.depth=n.maxDepth=0;n.pure=a();n.total=a();n.name=m},statics:{getTimestamp:b},format:function(m){if(!d){d=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(o){return Math.round(o*100)/100}})}var n=this.getData(m);n.name=this.name;n.pure.type="Pure";n.total.type="Total";n.times=[n.pure,n.total];return d.apply(n)},getData:function(m){var n=this;return{count:n.count,childCount:n.childCount,depth:n.maxDepth,pure:g(n.count,n.childCount,m,n.pure),total:g(n.count,n.childCount,m,n.total)}},enter:function(){var m=this,n={accum:m,leave:f,childTime:0,parent:c};++m.depth;if(m.maxDepth<m.depth){m.maxDepth=m.depth}c=n;n.time=b();return n},monitor:function(o,n,m){var p=this.enter();if(m){o.apply(n,m)}else{o.call(n)}p.leave()},report:function(){Ext.log(this.format())},tap:function(u,w){var v=this,p=typeof w=="string"?[w]:w,t,x,r,q,o,n,m,s;s=function(){if(typeof u=="string"){t=Ext.global;q=u.split(".");for(r=0,o=q.length;r<o;++r){t=t[q[r]]}}else{t=u}for(r=0,o=p.length;r<o;++r){n=p[r];x=n.charAt(0)=="!";if(x){n=n.substring(1)}else{x=!(n in t.prototype)}m=x?t:t.prototype;m[n]=k(v,m[n])}};Ext.ClassManager.onCreated(s,v,u);return v}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var b=new Ext.perf.Accumulator("$"),g=b.total,c=Ext.perf.Accumulator.getTimestamp,f=0,h,a,d;d=c();do{h=b.enter();h.leave();++f}while(g.sum<100);a=c();return(a-d)/f},get:function(b){var c=this,a=c.accumulatorsByName[b];if(!a){c.accumulatorsByName[b]=a=new Ext.perf.Accumulator(b);c.accumulators.push(a)}return a},enter:function(a){return this.get(a).enter()},monitor:function(a,c,b){this.get(a).monitor(c,b)},report:function(){var c=this,b=c.accumulators,a=c.calibrate();b.sort(function(f,d){return(f.name<d.name)?-1:((d.name<f.name)?1:0)});c.updateGC();Ext.log("Calibration: "+Math.round(a*100)/100+" msec/sample");Ext.each(b,function(d){Ext.log(d.format(a))})},getData:function(c){var b={},a=this.accumulators;Ext.each(a,function(d){if(c||d.count){b[d.name]=d.getData()}});return b},reset:function(){Ext.each(this.accumulators,function(a){var b=a;b.count=b.childCount=b.depth=b.maxDepth=0;b.pure={min:Number.MAX_VALUE,max:0,sum:0};b.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var a=this.accumulatorsByName.GC,b=Ext.senchaToolbox,c;if(a){a.count=b.garbageCollectionCounter||0;if(a.count){c=a.pure;a.total.sum=c.sum=b.garbageCollectionMilliseconds;c.min=c.max=c.sum/a.count;c=a.total;c.min=c.max=c.sum/a.count}}},watchGC:function(){Ext.perf.getTimestamp();var a=Ext.senchaToolbox;if(a){this.get("GC");a.watchGarbageCollector(false)}},setup:function(c){if(!c){c={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=c;var d,g,b,f,a;for(d in c){if(c.hasOwnProperty(d)){g=c[d];b=Ext.Perf.get(d);for(f in g){if(g.hasOwnProperty(f)){a=g[f];b.tap(f,a)}}}}this.watchGC()}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(a,c,b){if(b){return this.translateAnimated(a,c,b)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(a)&&typeof a=="number"){this.x=a}if(!isNaN(c)&&typeof c=="number"){this.y=c}this.doTranslate(a,c)},translateAxis:function(b,d,c){var a,f;if(b=="x"){a=d}else{f=d}return this.translate(a,f,c)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(b,a){this.activeEasingX=b;this.activeEasingY=a;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(b,j,g){var f=this;if(!Ext.isObject(g)){g={}}if(f.isAnimating){f.stopAnimation()}f.callback=g.callback;f.callbackScope=g.scope;var d=Ext.Date.now(),h=g.easing,c=(typeof b=="number")?(g.easingX||h||f.getEasingX()||true):null,a=(typeof j=="number")?(g.easingY||h||f.getEasingY()||true):null;if(c){c=f.factoryEasing(c);c.setStartTime(d);c.setStartValue(f.x);c.setEndValue(b);if("duration" in g){c.setDuration(g.duration)}}if(a){a=f.factoryEasing(a);a.setStartTime(d);a.setStartValue(f.y);a.setEndValue(j);if("duration" in g){a.setDuration(g.duration)}}return f.animate(c,a)},doAnimationFrame:function(){var f=this,c=f.activeEasingX,b=f.activeEasingY,d=Date.now(),a,g;if(!f.isAnimating){return}f.lastRun=d;if(c===null&&b===null){f.stopAnimation();return}if(c!==null){f.x=a=Math.round(c.getValue());if(c.isEnded){f.activeEasingX=null;f.fireEvent("axisanimationend",f,"x",a)}}else{a=f.x}if(b!==null){f.y=g=Math.round(b.getValue());if(b.isEnded){f.activeEasingY=null;f.fireEvent("axisanimationend",f,"y",g)}}else{g=f.y}if(f.lastX!==a||f.lastY!==g){f.doTranslate(a,g);f.lastX=a;f.lastY=g}f.fireEvent("animationframe",f,a,g)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=false;Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent("animationend",a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.apply(this,arguments)}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement();if(!this.isDestroyed&&!b.isDestroyed){b.translate(a,c)}},destroy:function(){var a=this.getElement();if(a&&!a.isDestroyed){a.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:true},getWrapper:function(){var c=this.wrapper,b=this.getElement(),a;if(!c){a=b.getParent();if(!a){return null}if(a.hasCls("x-translatable-hboxfix")){a=a.getParent()}if(this.getUseWrapper()){c=b.wrap()}else{c=a}b.addCls("x-translatable");c.addCls("x-translatable-container");this.wrapper=c;c.on("painted",function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return c},doTranslate:function(a,d){var c=this.getWrapper(),b;if(c){b=c.dom;if(typeof a=="number"){b.scrollLeft=500000-a}if(typeof d=="number"){b.scrollTop=500000-d}}},destroy:function(){var a=this.getElement(),b=this.wrapper;if(b){if(!a.isDestroyed){if(this.getUseWrapper()){b.doReplaceWith(a)}a.removeCls("x-translatable")}if(!b.isDestroyed){b.removeCls("x-translatable-container");b.un("painted","refresh",this)}delete this.wrapper;delete this._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollParent",Ext.util.translatable.Dom,{applyElement:function(a){var b=Ext.get(a);this.parent=b.parent();return b},doTranslate:function(a,c){var b=this.parent;b.setScrollLeft(Math.round(-a));b.setScrollTop(Math.round(-c))},getPosition:function(){var c=this,a=c.position,b=c.parent;a.x=b.getScrollLeft();a.y=b.getScrollTop();return a}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollParent"],0));(Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement().dom.style;if(typeof a=="number"){b.left=a+"px"}if(typeof c=="number"){b.top=c+"px"}},destroy:function(){var a=this.getElement().dom.style;a.left=null;a.top=null;Ext.util.translatable.Dom.prototype.destroy.apply(this,arguments)}},0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0));(Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case"scrollposition":return new b.ScrollPosition(a);case"scrollparent":return new b.ScrollParent(a);case"csstransform":return new b.CssTransform(a);case"cssposition":return new b.CssPosition(a)}}},1,0,0,0,0,0,[Ext.util,"Translatable"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{config:{element:null,direction:"auto",fps:"auto",disabled:null,directionLock:false,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},bounceEasing:{duration:400},outOfBoundRestrictFactor:0.5,startMomentumResetTime:300,maxAbsoluteVelocity:6,containerSize:"auto",size:"auto",autoRefresh:true,initialOffset:{x:0,y:0},slotSnapSize:{x:0,y:0},slotSnapOffset:{x:0,y:0},slotSnapEasing:{duration:150},translatable:{translationMethod:"auto",useWrapper:false},mouseEnabled:false,snapToBoundary:true},statics:{instances:{}},cls:"x-scroll-scroller",containerCls:"x-scroll-container",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},constructor:function(a){var c=this,b=a&&a.element,d="onEvent";c.listenerMap={touchstart:"onTouchStart",touchend:"onTouchEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"};c.listeners={touchstart:d,touchend:d,dragstart:d,drag:d,dragend:d,scope:c};c.minPosition={x:0,y:0};c.startPosition={x:0,y:0};c.lastMaxPosition={x:0,y:0};c.velocity={x:0,y:0};c.isAxisEnabledFlags={x:false,y:false};c.flickStartPosition={x:0,y:0};c.flickStartTime={x:0,y:0};c.lastDragPosition={x:0,y:0};c.dragDirection={x:0,y:0};c.initialConfig=a;if(b){c.setElement(b)}c.self.instances[c.id]=c;return this},initialize:function(){var a=this;if(!a.initialized){a.mixins.observable.constructor.call(a,a.initialConfig);a.initialized=true}},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(c){var f=this;f.initialize();if(!f.FixedHBoxStretching){c.addCls(f.cls)}if(!f.getDisabled()){f.attachListeners()}var d=function(){f.refreshMaxPosition()},g=Ext.Function.createSequence,b=f.updateContainerSize,a=f.updateSize;f.updateContainerSize=b?g(b,d):d;f.updateSize=a?g(a,d):d;f.on({maxpositionchange:"snapToBoundary",minpositionchange:"snapToBoundary",scope:f});return f},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},updateTranslatable:function(a){a.setConfig({element:this.getElement(),listeners:{animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this}})},updateFps:function(a){if(a!=="auto"){this.getTranslatable().setFps(a)}},attachListeners:function(){this.getContainer().on(this.listeners)},detachListeners:function(){this.getContainer().un(this.listeners)},updateDisabled:function(a){if(a){this.detachListeners()}else{this.attachListeners()}},updateInitialOffset:function(a){if(typeof a=="number"){a={x:a,y:a}}this.getTranslatable().translate(-a.x,-a.y)},applyDirection:function(a){var f=this.getMinPosition(),d=this.getMaxPosition(),c,b;this.givenDirection=a;if(a==="auto"){c=d.x>f.x;b=d.y>f.y;if(c&&b){a="both"}else{if(c){a="horizontal"}else{a="vertical"}}}return a},updateDirection:function(g,f){var b=this.isAxisEnabledFlags,d=this.cls+"-vertical",a=this.cls+"-horizontal",c=this.getElement();if(f==="both"||f==="horizontal"){c.removeCls(a)}if(f==="both"||f==="vertical"){c.removeCls(d)}b.x=b.y=false;if(g==="both"||g==="horizontal"){b.x=true;c.addCls(a)}if(g==="both"||g==="vertical"){b.y=true;c.addCls(d)}},isAxisEnabled:function(a){this.getDirection();return this.isAxisEnabledFlags[a]},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},getPosition:function(){return this.getTranslatable().getPosition()},getMinPosition:function(){var a=this.minPosition;if(!a){this.minPosition=a={x:0,y:0};this.fireEvent("minpositionchange",this,a)}return a},getMaxPosition:function(){var b=this,d=b.maxPosition,a,c;if(!d){a=b.getSize();c=b.getContainerSize();b.maxPosition=d={x:Math.max(0,a.x-c.x),y:Math.max(0,a.y-c.y)};if(d.x!==b.lastMaxPosition.x||d.y!==b.lastMaxPosition.y){b.fireEvent("maxpositionchange",b,d);b.lastMaxPosition.x=d.x;b.lastMaxPosition.y=d.y}}return d},refreshMaxPosition:function(){this.maxPosition=null;this.getMaxPosition()},applyContainerSize:function(b){var c=this.getContainer().dom,a,d;if(!c){return}this.givenContainerSize=b;if(b==="auto"){a=c.clientWidth;d=c.clientHeight}else{a=b.x;d=b.y}return{x:a,y:d}},applySize:function(b){var d=this.getElement().dom,c=this.getContainer().dom,a,f;if(!d){return}this.givenSize=b;if(b==="auto"){a=Math.max(d.offsetWidth,c.clientWidth);f=Math.max(d.offsetHeight,c.clientHeight)}else{if(typeof b=="number"){a=b;f=b}else{a=b.x;f=b.y}}return{x:a,y:f}},updateAutoRefresh:function(a){this.getElement().toggleListener(a,"resize","onElementResize",this);this.getContainer().toggleListener(a,"resize","onContainerResize",this)},applySlotSnapSize:function(a){if(typeof a=="number"){return{x:a,y:a}}return a},applySlotSnapOffset:function(a){if(typeof a=="number"){return{x:a,y:a}}return a},getContainer:function(){var a=this.container,b;if(!a){b=this.getElement().getParent();this.container=a=this.FixedHBoxStretching?b.getParent():b;a.addCls(this.containerCls)}return a},refresh:function(){this.stopAnimation();this.getTranslatable().refresh();this.setSize(this.givenSize);this.setContainerSize(this.givenContainerSize);this.setDirection(this.givenDirection);this.fireEvent("refresh",this);return this},onElementResize:function(a,b){this.setSize({x:b.width,y:b.height});this.refresh()},onContainerResize:function(a,b){this.setContainerSize({x:b.width,y:b.height});this.refresh()},scrollTo:function(j,h,b){var g=this,a;if(g.isDestroyed){return g}if(typeof j!="number"&&arguments.length===1){h=j.y;j=j.x}var k=g.getTranslatable(),c=g.getPosition(),l=false,f,d;if(g.isAxisEnabled("x")){if(isNaN(j)||typeof j!="number"){j=c.x}else{if(c.x!==j){l=true}}f=this.convertX(-j)}if(g.isAxisEnabled("y")){if(isNaN(h)||typeof h!="number"){h=c.y}else{if(c.y!==h){l=true}}d=-h}if(l){if(b!==undefined&&b!==false){a=function(){g.fireEvent("scroll",g,j,h)};if(b===true){b={callback:a}}else{if(b.callback){b.callback=Ext.Function.createSequence(b.callback,a)}else{b.callback=a}}k.translateAnimated(f,d,b)}else{k.translate(f,d);g.fireEvent("scroll",g,j,h)}}return this},scrollToTop:function(b){var a=this.getInitialOffset();return this.scrollTo(a.x,a.y,b)},scrollToEnd:function(c){var b=this.getSize(),a=this.getContainerSize();return this.scrollTo(b.x-a.x,b.y-a.y,c)},scrollBy:function(b,d,c){var a=this.getPosition();b=(typeof b=="number")?b+a.x:null;d=(typeof d=="number")?d+a.y:null;return this.scrollTo(b,d,c)},onEvent:function(b){var a=this,c=b.browserEvent;if(!Ext.supports.Touch||a.getMouseEnabled()||(!a.isMouseEvent[c.type]&&c.pointerType!=="mouse")){a[a.listenerMap[b.type]](b)}},onTouchStart:function(){this.isTouching=this.self.isTouching=true;this.stopAnimation()},onTouchEnd:function(){var a=this.getPosition();this.isTouching=this.self.isTouching=false;if(!this.isDragging&&this.snapToSlot()){this.fireEvent("scrollstart",this,a.x,a.y)}},onDragStart:function(m){var p=this.getDirection(),g=m.absDeltaX,f=m.absDeltaY,k=this.getDirectionLock(),j=this.startPosition,d=this.flickStartPosition,l=this.flickStartTime,h=this.lastDragPosition,c=this.getPosition(),b=this.dragDirection,o=c.x,n=c.y,a=Ext.Date.now();this.isDragging=true;if(k&&p!=="both"){if((p==="horizontal"&&g>f)||(p==="vertical"&&f>g)){m.stopPropagation()}else{this.isDragging=false;return}}h.x=o;h.y=n;d.x=o;d.y=n;j.x=o;j.y=n;l.x=a;l.y=a;b.x=0;b.y=0;this.dragStartTime=a;this.isDragging=true;this.fireEvent("scrollstart",this,o,n)},onAxisDrag:function(k,s){if(!this.isAxisEnabled(k)){return}var j=this.flickStartPosition,n=this.flickStartTime,l=this.lastDragPosition,f=this.dragDirection,h=this.getPosition()[k],m=this.getMinPosition()[k],q=this.getMaxPosition()[k],d=this.startPosition[k],r=l[k],p=d-s,c=f[k],o=this.getOutOfBoundRestrictFactor(),g=this.getStartMomentumResetTime(),b=Ext.Date.now(),a;if(p<m){p*=o}else{if(p>q){a=p-q;p=q+a*o}}if(p>r){f[k]=1}else{if(p<r){f[k]=-1}}if((c!==0&&(f[k]!==c))||(b-n[k])>g){j[k]=h;n[k]=b}l[k]=p},onDrag:function(b){if(!this.isDragging){return}var a=this.lastDragPosition;this.onAxisDrag("x",this.convertX(b.deltaX));this.onAxisDrag("y",b.deltaY);this.scrollTo(a.x,a.y)},onDragEnd:function(c){var b,a;if(!this.isDragging){return}this.dragEndTime=Ext.Date.now();this.onDrag(c);this.isDragging=false;b=this.getAnimationEasing("x",c);a=this.getAnimationEasing("y",c);if(b||a){this.getTranslatable().animate(b,a)}else{this.onScrollEnd()}},getAnimationEasing:function(h,l){if(!this.isAxisEnabled(h)){return null}var g=this.getPosition()[h],d=this.getMinPosition()[h],k=this.getMaxPosition()[h],b=this.getMaxAbsoluteVelocity(),f=null,c=this.dragEndTime,j=l.flick.velocity[h],n=h==="x",a,m;if(g<d){f=d}else{if(g>k){f=k}}if(n){g=this.convertX(g);f=this.convertX(f)}if(f!==null){m=this.getBounceEasing()[h];m.setConfig({startTime:c,startValue:-g,endValue:-f});return m}if(j===0){return null}if(j<-b){j=-b}else{if(j>b){j=b}}if(Ext.browser.is.IE){j*=2}m=this.getMomentumEasing()[h];a={startTime:c,startValue:-g,startVelocity:j*1.5,minMomentumValue:-k,maxMomentumValue:0};if(n){this.convertEasingConfig(a)}m.setConfig(a);return m},onAnimationFrame:function(c,b,d){var a=this.getPosition();this.fireEvent("scroll",this,this.convertX(a.x),a.y)},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},stopAnimation:function(){this.getTranslatable().stopAnimation()},onScrollEnd:function(){var a=this.getPosition();if(this.isTouching||!this.snapToSlot()){this.fireEvent("scrollend",this,a.x,a.y)}},snapToSlot:function(){var b=this.getSnapPosition("x"),a=this.getSnapPosition("y"),c=this.getSlotSnapEasing();if(b!==null||a!==null){this.scrollTo(b,a,{easingX:c.x,easingY:c.y});return true}return false},getSnapPosition:function(c){var h=this.getSlotSnapSize()[c],d=null,a,g,f,b;if(h!==0&&this.isAxisEnabled(c)){a=this.getPosition()[c];g=this.getSlotSnapOffset()[c];f=this.getMaxPosition()[c];b=Math.floor((a-g)%h);if(b!==0){if(a!==f){if(Math.abs(b)>h/2){d=Math.min(f,a+((b>0)?h-b:b-h))}else{d=a-b}}else{d=a-b}}}return d},snapToBoundary:function(){if(!this.getSnapToBoundary()){return}var h=this.getPosition(),c=this.getMinPosition(),g=this.getMaxPosition(),f=c.x,d=c.y,b=g.x,a=g.y,k=Math.round(h.x),j=Math.round(h.y);if(k<f){k=f}else{if(k>b){k=b}}if(j<d){j=d}else{if(j>a){j=a}}this.scrollTo(k,j)},destroy:function(){var c=this.getElement(),b=this.sizeMonitors,a;if(b){b.element.destroy();b.container.destroy()}if(c&&!c.isDestroyed){c.removeCls(this.cls);a=this.getContainer();if(a&&!a.isDestroyed){a.removeCls(this.containerCls)}}Ext.destroy(this.getTranslatable());delete this.self.instances[this.id];Ext.Evented.prototype.destroy.apply(this,arguments)},convertX:function(a){return a},convertEasingConfig:function(a){return a}},1,0,0,0,0,0,[Ext.scroll,"Scroller"],function(){this.override({constructor:function(b){var d,f,a,h,c,g;if(!b){b={}}if(typeof b=="string"){b={direction:b}}if(arguments.length==2){d=b;b=arguments[1];if(!b){b={}}b.element=d}if(b.hasOwnProperty("acceleration")){f=b.acceleration;delete b.acceleration;Ext.merge(b,{momentumEasing:{momentum:{acceleration:f},bounce:{acceleration:f}}})}if(b.hasOwnProperty("snap")){b.slotSnapOffset=b.snap}if(b.hasOwnProperty("friction")){h=b.friction;delete b.friction;Ext.merge(b,{momentumEasing:{momentum:{friction:h}}})}if(b.hasOwnProperty("springTension")){c=b.springTension;delete b.springTension;Ext.merge(b,{momentumEasing:{momentum:{springTension:c}}})}if(b.hasOwnProperty("minVelocityForAnimation")){g=b.minVelocityForAnimation;delete b.minVelocityForAnimation;Ext.merge(b,{momentumEasing:{minVelocity:g}})}this.callOverridden(arguments)},scrollToAnimated:function(a,c,b){return this.scrollTo.apply(this,arguments)},scrollBy:function(a,c,b){if(Ext.isObject(a)){c=a.y;a=a.x}return this.callOverridden([a,c,b])},setOffset:function(a){return this.scrollToAnimated(-a.x,-a.y)}})}));(Ext.cmd.derive("Ext.util.LocalStorage",Ext.Base,{id:null,destroyed:false,lazyKeys:true,prefix:"",session:false,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(f){var d=this,b=d.cache,c={_users:1},a;if(Ext.isString(f)){c.id=f}else{Ext.apply(c,f)}if(!(a=b[c.id])){a=new d(c)}else{++a._users}return a},supported:true},constructor:function(a){var b=this;Ext.apply(b,a);if(b._users){Ext.util.LocalStorage.cache[b.id]=b}b.init()},init:function(){var a=this,b=a.id;if(!a.prefix&&b){a.prefix=b+"-"}a._store=(a.session?window.sessionStorage:window.localStorage)},destroy:function(){var a=this;delete Ext.util.LocalStorage.cache[a.id];a._store=a._keys=null;a.destroyed=true;a.destroy=Ext.emptyFn},getKeys:function(){var f=this,a=f._store,g=f.prefix,d=f._keys,h=g.length,c,b;if(!d){f._keys=d=[];for(c=a.length;c--;){b=a.key(c);if(b.length>h){if(g===b.substring(0,h)){d.push(b.substring(h))}}}}return d},release:function(){if(!--this._users){this.destroy()}},save:Ext.emptyFn,clear:function(){var d=this,a=d._store,f=d.prefix,c=d._keys||d.getKeys(),b;for(b=c.length;b--;){a.removeItem(f+c[b])}c.length=0},key:function(a){var b=this._keys||this.getKeys();return(0<=a&&a<b.length)?b[a]:null},getItem:function(b){var a=this.prefix+b;return this._store.getItem(a)},removeItem:function(c){var g=this,b=g.prefix+c,a=g._store,f=g._keys,d=a.length;a.removeItem(b);if(f&&d!==a.length){if(g.lazyKeys){g._keys=null}else{Ext.Array.remove(f,c)}}},setItem:function(c,h){var g=this,b=g.prefix+c,a=g._store,f=a.length,d=g._keys;a.setItem(b,h);if(d&&f!==a.length){d.push(c)}}},1,0,0,0,0,0,[Ext.util,"LocalStorage"],function(){var a=this;if("localStorage" in window){return}if(!Ext.isIE){a.supported=false;return}a.override({data:null,flushDelay:1,init:function(){var c=this,d=c.data,b;c.el=b=document.createElement("div");b.id=(c.id||(c.id="extjs-localstore"));b.addBehavior("#default#userdata");Ext.getHead().dom.appendChild(b);b.load(c.id);d=b.getAttribute("xdata");c.data=d=(d?Ext.decode(d):{});c._flushFn=function(){c._timer=null;c.save(0)}},destroy:function(){var c=this,b=c.el;if(b){if(c._timer){c.save()}b.parentNode.removeChild(b);c.data=c.el=null;c.callParent()}},getKeys:function(){var c=this,b=c._keys;if(!b){c._keys=b=Ext.Object.getKeys(c.data)}return b},save:function(b){var c=this;if(!b){if(c._timer){clearTimeout(c._timer);c._timer=null}c.el.setAttribute("xdata",Ext.encode(c.data));c.el.save(c.id)}else{if(!c._timer){c._timer=Ext.defer(c._flushFn,b)}}},clear:function(){var b=this;b.data={};b._keys=null;b.save(b.flushDelay)},getItem:function(b){var c=this.data;return(b in c)?c[b]:null},removeItem:function(b){var d=this,c=d._keys,f=d.data;if(b in f){delete f[b];if(c){if(d.lazyKeys){d._keys=null}else{Ext.Array.remove(c,b)}}d.save(d.flushDelay)}},setItem:function(b,g){var d=this,f=d.data,c=d._keys;if(c&&!(b in f)){c.push(b)}f[b]=g;d.save(d.flushDelay)}})}));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(a,b,c){a.getTarget().setHtml(b.responseText,c.scripts===true);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(b){var c=this,a;b=b||{};Ext.apply(c,b);c.mixins.observable.constructor.call(c);c.setTarget(c.target);if(c.autoLoad){a=c.autoLoad;if(a===true){a=null}c.load(a)}},setTarget:function(b){var a=this;b=Ext.get(b);if(a.target&&a.target!=b){a.abort()}a.target=b},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===true?null:a)},load:function(c){c=Ext.apply({},c);var f=this,a=Ext.isDefined(c.loadMask)?c.loadMask:f.loadMask,g=Ext.apply({},c.params),b=Ext.apply({},c.ajaxOptions),j=c.callback||f.callback,d=c.scope||f.scope||f,h=c.rendererScope||f.rendererScope||f;Ext.applyIf(b,f.ajaxOptions);Ext.applyIf(c,b);Ext.applyIf(g,f.params);Ext.apply(g,f.baseParams);Ext.applyIf(c,{url:f.url});Ext.apply(c,{scope:f,params:g,callback:f.onComplete});if(f.fireEvent("beforeload",f,c)===false){return}if(a){f.addMask(a)}f.active={options:c,mask:a,scope:d,rendererScope:h,callback:j,success:c.success||f.success,failure:c.failure||f.failure,renderer:c.renderer||f.renderer,scripts:Ext.isDefined(c.scripts)?c.scripts:f.scripts};f.active.request=Ext.Ajax.request(c);f.setOptions(f.active,c)},setOptions:Ext.emptyFn,onComplete:function(b,g,a){var d=this,f=d.active,h,c;if(f){c=f.scope;h=f.rendererScope;if(g){g=d.getRenderer(f.renderer).call(h,d,a,f)!==false}if(g){Ext.callback(f.success,c,[d,a,b]);d.fireEvent("load",d,a,b)}else{Ext.callback(f.failure,c,[d,a,b]);d.fireEvent("exception",d,a,b)}Ext.callback(f.callback,c,[d,g,a,b]);if(f.mask){d.removeMask()}}delete d.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(a,b){var c=this;c.stopAutoRefresh();c.autoRefresh=Ext.interval(function(){c.load(b)},a)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.clearListeners()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(a,b,d){var f=true;try{a.getTarget().update(Ext.decode(b.responseText))}catch(c){f=false}return f},Component:function(a,c,g){var h=true,f=a.getTarget(),b=[];try{b=Ext.decode(c.responseText)}catch(d){h=false}if(h){f.suspendLayouts();if(g.removeAll){f.removeAll()}f.add(b);f.resumeLayouts(true)}return h}}},target:null,loadOnRender:false,loadMask:false,renderer:"html",setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!=b){a.abort()}a.target=b;if(b&&a.loadOnRender){if(b.rendered){a.doLoadOnRender()}else{a.mon(b,"render",a.doLoadOnRender,a)}}},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(false)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll},getRenderer:function(b){if(Ext.isFunction(b)){return b}var a=this.statics().Renderer;switch(b){case"component":return a.Component;case"data":return a.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.Img",Ext.Component,{autoEl:"img",baseCls:"x-img",src:"",alt:"",title:"",imgCls:"",ariaRole:"img",maskOnDisable:false,initComponent:function(){if(this.glyph){this.autoEl="div"}Ext.Component.prototype.initComponent.call(this)},getElConfig:function(){var f=this,h=f.autoEl,b=Ext.Component.prototype.getElConfig.call(this),g=Ext._glyphFontFamily,d=f.glyph,a,c;if(h==="img"||(Ext.isObject(h)&&h.tag==="img")){a=b}else{if(f.glyph){if(typeof d==="string"){c=d.split("@");d=c[0];g=c[1]}b.html="&#"+d+";";if(g){b.style="font-family:"+g}}else{b.cn=[a={tag:"img",role:f.ariaRole,id:f.id+"-img"}]}}if(a){if(f.imgCls){a.cls=(a.cls?a.cls+" ":"")+f.imgCls}a.src=f.src||Ext.BLANK_IMAGE_URL}if(f.alt){(a||b).alt=f.alt}if(f.title){(a||b).title=f.title}return b},onRender:function(){var b=this,c=b.autoEl,a;Ext.Component.prototype.onRender.apply(this,arguments);a=b.el;if(c==="img"||(Ext.isObject(c)&&c.tag==="img")){b.imgEl=a}else{b.imgEl=a.getById(b.id+"-img")}},onDestroy:function(){Ext.destroy(this.imgEl);this.imgEl=null;Ext.Component.prototype.onDestroy.call(this)},setSrc:function(c){var a=this,b=a.imgEl;a.src=c;if(b){b.dom.src=c||Ext.BLANK_IMAGE_URL}},setGlyph:function(c){var b=this,d=Ext._glyphFontFamily,a,f;if(c!=b.glyph){if(typeof c==="string"){a=c.split("@");c=a[0];d=a[1]}f=b.el.dom;f.innerHTML="&#"+c+";";if(d){f.style="font-family:"+d}}}},0,["image","imagecomponent"],["component","box","image","imagecomponent"],{component:true,box:true,image:true,imagecomponent:true},["widget.image","widget.imagecomponent"],0,[Ext,"Img"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(d){var b=this,a,c;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!d.textEls){c=b.owner.textEl;if(c.isComposite){d.textEls=[];c=c.elements;for(a=c.length;a--;){d.textEls[a]=d.getEl(Ext.get(c[a]))}}else{d.textEls=[d.getEl("textEl")]}}},calculate:function(f){var c=this,a,d,b;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(b=f.getProp("width"))){b-=f.getBorderInfo().width;d=f.textEls;for(a=d.length;a--;){d[a].setWidth(b)}}else{c.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{config:{value:0,textTpl:null},baseCls:"x-progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var a=this;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!a.hasOwnProperty("textEl"),text:a.text||"&#160;",percentage:a.value?a.value*100:0})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else{a.textEl=a.el.select("."+a.baseCls+"-text")}},updateValue:function(a){this.updateProgress(a,Math.round(a*100)+"%")},updateProgress:function(f,g,a){var d=this,b=d.value,c=d.getTextTpl();d.value=f||(f=0);if(g!=null){d.updateText(g)}else{if(c){d.updateText(c.apply({value:f,percent:f*100}))}}if(d.rendered&&!d.isDestroyed){if(a===true||(a!==false&&d.animate)){d.bar.stopAnimation();d.bar.animate(Ext.apply({from:{width:(b*100)+"%"},to:{width:(f*100)+"%"}},d.animate))}else{d.bar.setStyle("width",(f*100)+"%")}}d.fireEvent("update",d,f,g);return d},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.setHtml(a.text)}return a},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(c){var b=this,a;if(!b.waitTimer){a=b;c=c||{};b.updateText(c.text);b.waitTimer=Ext.TaskManager.start({run:function(d){var f=c.increment||10;d-=1;b.updateProgress(((((d+f)%f)+1)*(100/f))*0.01,null,c.animate)},interval:c.interval||1000,duration:c.duration,onStop:function(){if(c.fn){c.fn.apply(c.scope||b)}b.reset()},scope:a})}return b},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var b=this,a=b.bar;b.clearTimer();if(b.rendered){if(b.textEl.isComposite){b.textEl.clear()}Ext.destroyMembers(b,"textEl","progressBar");if(a&&b.animate){a.stopAnimation()}}Ext.Component.prototype.onDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],0,[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.ShadowPool",Ext.Base,{singleton:true,markup:(function(){return Ext.String.format('<div class="{0}{1}-shadow" role="presentation"></div>',"x-",Ext.isIE&&!Ext.supports.CSS3BoxShadow?"ie":"css")}()),shadows:[],pull:function(){var a=this.shadows.shift();if(!a){a=Ext.get(Ext.DomHelper.insertHtml("afterBegin",document.body,this.markup));a.autoBoxAdjust=false}return a},push:function(a){this.shadows.push(a)},reset:function(){var c=[].concat(this.shadows),b,a=c.length;for(b=0;b<a;b++){c[b].destroy()}this.shadows=[]}},0,0,0,0,0,0,[Ext,"ShadowPool"],0));(Ext.cmd.derive("Ext.Shadow",Ext.Base,{localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(b){var c=this,d,f,a;Ext.apply(c,b);if(!Ext.isString(c.mode)){c.mode=c.defaultMode}f=c.offset;a=Math.floor(f/2);c.opacity=50;switch(c.mode.toLowerCase()){case"drop":if(Ext.supports.CSS3BoxShadow){d={t:f,l:f,h:-f,w:-f}}else{d={t:-a,l:-a,h:-a,w:-a}}break;case"sides":if(Ext.supports.CSS3BoxShadow){d={t:f,l:0,h:-f,w:0}}else{d={t:-(1+a),l:1+a-2*f,h:-1,w:a-1}}break;case"frame":if(Ext.supports.CSS3BoxShadow){d={t:0,l:0,h:0,w:0}}else{d={t:1+a-2*f,l:1+a-2*f,h:f-a-1,w:f-a-1}}break;case"bottom":if(Ext.supports.CSS3BoxShadow){d={t:f,l:0,h:-f,w:0}}else{d={t:f,l:0,h:0,w:0}}break}c.adjusts=d},getShadowSize:function(){var b=this,d=b.el?b.offset:0,a=[d,d,d,d],c=b.mode.toLowerCase();if(b.el&&c!=="frame"){a[0]=0;if(c=="drop"){a[3]=0}}return a},offset:4,defaultMode:"drop",boxShadowProperty:(function(){var b="boxShadow",a=document.documentElement.style;if(!("boxShadow" in a)){if("WebkitBoxShadow" in a){b="WebkitBoxShadow"}else{if("MozBoxShadow" in a){b="MozBoxShadow"}}}return b}()),show:function(d){var b=this,a,c;d=Ext.get(d);a=(parseInt(d.getStyle("z-index"),10)-1)||0;c=d[b.localXYNames.get]();if(!b.el){b.el=Ext.ShadowPool.pull();if(b.fixed){b.el.dom.style.position="fixed"}else{b.el.dom.style.position=""}if(b.el.dom.nextSibling!=d.dom){b.el.insertBefore(d)}}b.el.setStyle("z-index",b.zIndex||a);if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){b.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(b.offset)+")"}b.realign(c[0],c[1],d.dom.offsetWidth,d.dom.offsetHeight);b.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(c,n,k,g){if(!this.el){return}var b=this.adjusts,a=this.el,j=a.dom.style,d,f,h,m;a[this.localXYNames.set](c+b.l,n+b.t);d=Math.max(k+b.w,0);f=Math.max(g+b.h,0);h=d+"px";m=f+"px";if(j.width!=h||j.height!=m){j.width=h;j.height=m;if(Ext.supports.CSS3BoxShadow){j[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888"}}},hide:function(){var a=this;if(a.el){a.el.dom.style.display="none";Ext.ShadowPool.push(a.el);delete a.el}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}},setOpacity:function(a){if(this.el){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;this.el.setOpacity(a)}}},1,0,0,0,0,0,[Ext,"Shadow"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(j,n,l){var m=this,k=m.bus,o=k[n],f,c,b,d,p,h,g,a;if(!o){return true}for(f in o){if(o.hasOwnProperty(f)&&m.match(j,f,m.controller)){c=o[f];for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d.controller.isActive()){p=d.list;h=p.length;for(g=0;g<h;g++){a=p[g];if(a.fire.apply(a,l)===false){return false}}}}}}}return true},listen:function(d,n){var v=this,m=v.bus,h=v.idProperty,j=v.monitoredClasses,f=j.length,l=n.getId(),u=Ext.$eventNameMap,r,k,s,p,b,c,a,q,o,t,g;for(p in d){o=d[p];if(o){if(h){p=p==="*"?p:p.substring(1)}for(t in o){b=null;c=o[t];a=n;t=u[t]||(u[t]=t.toLowerCase());q=new Ext.util.Event(n,t);if(Ext.isObject(c)){b=c;c=b.fn;a=b.scope||n;delete b.fn;delete b.scope}if(typeof c==="string"){c=a[c]}q.addListener(c,a,b);for(r=0;r<f;++r){g=j[r].hasListeners;if(g){g._incr_(t)}}k=m[t]||(m[t]={});k=k[p]||(k[p]={});s=k[l]||(k[l]={controller:n,list:[]});s.list.push(q)}}}},match:function(c,a){var b=this.idProperty;if(b){return a==="*"||c[b]===a}return false},monitor:function(c){var b=this,a=c.isInstance?c:c.prototype,d=a.doFireEvent;b.monitoredClasses.push(c);a.doFireEvent=function(h,g){var f=d.apply(this,arguments);if(f!==false&&!this.isSuspended(h)){f=b.dispatch(this,h,g)}return f}},unlisten:function(f){var o=this.bus,a=f,t=this.monitoredClasses,m=t.length,d=Ext.$eventNameMap,b,p,s,n,r,g,q,l,k,c,h;if(f.isController){a=f.getId()}for(p in o){p=d[p]||(d[p]=p.toLowerCase());if(o.hasOwnProperty(p)&&(q=o[p])){for(g in q){b=q[g];c=b[a];if(c){s=c.list;if(s){for(l=0,n=s.length;l<n;++l){r=s[l];r.clearListeners();for(k=0;k<m;++k){h=t[k].hasListeners;if(h){h._decr_(r.name)}}}delete b[a]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){var b=this,a=Ext.Component;b.callParent();b.monitor(Ext.Widget);if(!a.prototype.isWidget){b.monitor(a)}},dispatch:function(g,d,c){var b=g.lookupController(false),f,a;while(b){f=b.compDomain;if(f){if(f.dispatch(g,d,c)===false){return false}}a=b.getView();b=a?a.lookupController(true):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var b=this,a=Ext.app.EventDomain.instances;b.callParent();b.domains=a;b.bus=a.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(d,b){var a=this.domains,c;for(c in d){if(d.hasOwnProperty(c)){a[c].listen(d[c],b)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",listen:function(b,a){b.scope=b.scope||a;Ext.on(b)},match:Ext.returnTrue},0,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:true,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);delete b.control;delete b.listen;b.eventbus=Ext.app.EventBus;b.initConfig(a)},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){if(a){this.control(a)}},updateListen:function(a){if(a){this.listen(a)}},updateRoutes:function(b){if(b){var f=this,g=f.getBefore()||{},a=Ext.app.route.Router,d,c,h;for(d in b){c=b[d];if(Ext.isString(c)){c={action:c}}h=c.action;if(!c.before){c.before=g[h]}a.connect(d,c,f)}}},isActive:function(){return true},control:function(b,c,a){var d=this,f=a,g;if(Ext.isString(b)){g={};g[b]=c}else{g=b;f=c}d.eventbus.control(g,f||d)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var b=this,a=b.eventbus;Ext.app.route.Router.disconnectAll(b);if(a){a.unlisten(b);b.eventbus=null}b.clearListeners();b.callParent()},redirectTo:function(b,c){if(!c){var a=Ext.util.History.getToken();if(a===b){return false}}else{Ext.app.route.Router.onStateChange(b)}Ext.util.History.add(b);return true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.app,"BaseController"],0));(Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(c){var d=Ext.app.namespaces,b,a;if(!Ext.isArray(c)){c=[c]}for(b=0,a=c.length;b<a;b++){d[c[b]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(b){var d=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),a="",c;for(c in d){if(d.hasOwnProperty(c)&&c.length>a.length&&(c+"."===b.substring(0,c.length+1))){a=c}}return a===""?undefined:a}})}));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(this.idMatchRe.test(b)){a=d.getStoreId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var a=this.queue,c=a.removeAt(0),b;if(c){b=c&&c.route;b.execute(this.token,c.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else{this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0));(Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(b){var c=this,a;Ext.apply(c,b,{conditions:{}});a=c.url;c.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);c.paramsInMatchString=a.match(c.paramMatchingRegex)||[];c.matcherRegex=c.createMatcherRegex(a)},recognize:function(c){var d=this,a=d.controller,f,b;if((d.allowInactive||a.isActive())&&d.recognizes(c)){f=d.matchesFor(c);b=c.match(d.matcherRegex);b.shift();return Ext.applyIf(f,{controller:a,action:d.action,historyUrl:c,args:b})}return false},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(c,h,j,d){var b=h.args||[],g=this.before,a=this.controller,f=this.createCallback(h,j,d);if(g){b.push(f);if(Ext.isString(g)){g=this.before=a[g]}if(g){g.apply(a,b)}}else{f.resume()}},matchesFor:function(c){var g={},f=this.paramsInMatchString,b=c.match(this.matcherRegex),d=0,a=f.length;b.shift();for(;d<a;d++){g[f[d].replace(":","")]=b[d]}return g},createMatcherRegex:function(a){var c=this.paramsInMatchString,j=this.conditions,d=0,g=c.length,k=Ext.util.Format.format,l=this.caseInsensitive?"i":"",b,h,f;for(;d<g;d++){b=c[d];h=j[b];f=k("{0}",h||"([%a-zA-Z0-9\\-\\_\\s,]+)");a=a.replace(new RegExp(b),f)}return new RegExp("^"+a+"$",l)},createCallback:function(a,d,b){var c=this;b=b||c;return{resume:function(){var f=c.controller,h=c.action,g;if(Ext.isString(h)){h=f[h]}a=a&&a.args?a.args:[];g=a.pop();if(g&&!Ext.isObject(g)){a.push(g)}if(h){c.action=h;h.apply(f,a)}if(d){d.call(b)}},stop:function(f){if(d){d.call(b,f)}}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:false,constructor:function(){var a=this;a.hiddenField=null;a.ready=false;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(b){try{this.win.location.hash=b;this.currentToken=b}catch(a){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent("change",a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on("hashchange",a.onHashChange,a)}else{Ext.TaskManager.start({fireIdleEvent:false,run:a.onHashChange,interval:50,scope:a})}a.ready=true;a.fireEvent("ready",a)},onHashChange:function(){var b=this,a=b.getHash();if(a!==b.hash){b.hash=a;b.handleStateChange(a)}},init:function(c,a){var b=this;if(b.ready){Ext.callback(c,a,[b]);return}if(!Ext.isReady){Ext.onReady(function(){b.init(c,a)});return}b.win=b.useTopWindow?window.top:window;b.hash=b.getHash();if(c){b.on("ready",c,a,{single:true})}b.startUp()},add:function(a,b){var c=this,d=false;if(b===false||c.getToken()!==a){c.setHash(a);d=true}return d},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));(Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on("change",this.onStateChange,this);this.clear()},onStateChange:function(d){var l=this,c=l.application,n=l.routes,h=n.length,p=l.queueRoutes,k=d.split(l.multipleToken),o=0,b=k.length,f,g,m,j,a;for(;o<b;o++){d=k[o];a=false;if(p){g=new Ext.app.route.Queue({token:d})}for(f=0;f<h;f++){m=n[f];j=m.recognize(d);if(j){a=true;if(p){g.queueAction(m,j)}else{m.execute(d,j)}}}if(p){g.runQueue()}if(!a&&c){c.fireEvent("unmatchedroute",d)}}},connect:function(c,d,a){var b={url:c,action:d,controller:a};if(Ext.isObject(d)){Ext.merge(b,d)}this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(c){var b=this.routes,a=b.length,f=[],g,d;for(g=0;g<a;++g){d=b[g];if(d.controller!==c){f.push(d)}}this.routes=f},recognize:function(f){var b=this.routes||[],g=0,a=b.length,c,d;for(;g<a;g++){c=b[g];d=c.recognize(f);if(d){return{route:c,args:d}}}return false},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"}},controllerRegex:/^(.*)\.controller\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(c,a){var d="get",f=c.split("."),g=f.length,b;for(b=0;b<g;b++){d+=Ext.String.capitalize(f[b])}d+=a;return d},processDependencies:function(r,s,c,d,k){if(!k||!k.length){return}var l=this,q=l.strings[d],b,p,n,a,f,g,m,h;if(!Ext.isArray(k)){k=[k]}for(f=0,g=k.length;f<g;f++){a=k[f];b=l.getFullName(a,d,c);p=b.absoluteName;n=b.shortName;s.push(p);m=l.getGetterName(n,q.upper);r[m]=h=l.createGetter(q.getter,a);if(d!=="controller"){h["Ext.app.getter"]=true}}},getFullName:function(c,f,d){var a=c,b,g;if((b=c.indexOf("@"))>0){a=c.substring(0,b);g=c.substring(b+1)+"."+a}else{if(c.indexOf(".")>0&&(Ext.ClassManager.isCreated(c)||this.hasRegisteredPrefix(c))){g=c}else{if(d){g=d+"."+f+"."+c;a=c}else{g=c}}}return{absoluteName:g,shortName:a}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(b,c,a){var d=a.onBeforeCreated;a.onBeforeCreated=function(n,h){var g=Ext.app.Controller,l=g.controllerRegex,o=[],m,f,k,j;k=n.prototype;m=Ext.getClassName(n);f=h.$namespace||h.namespace||Ext.app.getNamespace(m)||((j=l.exec(m))&&j[1]);if(f){k.$namespace=f}g.processDependencies(k,o,f,"model",h.models);g.processDependencies(k,o,f,"view",h.views);g.processDependencies(k,o,f,"store",h.stores);g.processDependencies(k,o,f,"controller",h.controllers);Ext.require(o,Ext.Function.pass(d,arguments,this))}},constructor:function(a){Ext.app.BaseController.prototype.constructor.apply(this,arguments);this.initAutoGetters();this.ensureId()},normalizeRefs:function(b){var c=this,a=[];if(b){if(Ext.isObject(b)){Ext.Object.each(b,function(d,f){if(Ext.isString(f)){f={selector:f}}f.ref=d;a.push(f)})}else{if(Ext.isArray(b)){a=Ext.Array.merge(a,b)}}}b=c.refs;if(b){c.refs=null;b=c.normalizeRefs(b);if(b){a=Ext.Array.merge(a,b)}}return a},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a["Ext.app.getter"]){a.call(this)}}},updateControl:function(a){this.ensureId();Ext.app.BaseController.prototype.updateControl.call(this,a)},updateListen:function(a){this.ensureId();Ext.app.BaseController.prototype.updateListen.call(this,a)},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=true}},finishInit:function(g){var d=this,f=d.controllers,b,c,a;if(d._initialized&&f&&f.length){for(c=0,a=f.length;c<a;c++){b=d.getController(f[c]);b.finishInit(g)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(a){var g=this,b=0,f=a.length,h,d,c;a=Ext.Array.from(a);g.references=g.references||[];for(;b<f;b++){h=a[b];d=h.ref;c="get"+Ext.String.capitalize(d);if(!g[c]){g[c]=Ext.Function.pass(g.getRef,[d,h],g)}g.references.push(d.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,g,a){var c=this,f=c.refCache||(c.refCache={}),b=f[d];g=g||{};a=a||{};Ext.apply(g,a);if(g.forceCreate){return Ext.ComponentManager.create(g,"component")}if(!b){if(g.selector){f[d]=b=Ext.ComponentQuery.query(g.selector)[0]}if(!b&&g.autoCreate){f[d]=b=Ext.ComponentManager.create(g,"component")}if(b){b.on("beforedestroy",function(){f[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.application;if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(c){var a,b;a=(c.indexOf("@")===-1)?c:c.split("@")[0];b=Ext.StoreManager.get(a);if(!b){c=Ext.app.Controller.getFullName(c,"store",this.$namespace);if(c){b=Ext.create(c.absoluteName,{storeId:a})}}return b},getModel:function(c){var b=Ext.app.Controller.getFullName(c,"model",this.$namespace),a=Ext.ClassManager.get(b.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(c)}return a},getView:function(a){var b=Ext.app.Controller.getFullName(a,"view",this.$namespace);return b&&Ext.ClassManager.get(b.absoluteName)},ensureId:function(){var a=this.getId();if(!a){this.setId(this.getModuleClassName(this.$className,"controller"))}},destroy:function(a,b){var d=this,g=d.application,f,c;if(!b&&g){g.unregister(d)}d.application=null;if(a){f=d.refCache;for(c in f){if(f.hasOwnProperty(c)){Ext.destroy(f[c])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.app.Application",Ext.app.Controller,{isApplication:true,scope:undefined,namespaces:[],paths:null,appFolder:"app",config:{name:"",enableQuickTips:true,appProperty:"app",autoCreateViewport:false,defaultToken:null,glyphFontFamily:null},onClassExtended:function(l,c,k){var b=Ext.app.Controller,d=l.prototype,n=[],h=c.autoCreateViewport,f,m,a,g,j;a=c.name||l.superclass.name;j=c.appFolder||l.superclass.appFolder;if(a){c.$namespace=a;Ext.app.addNamespaces(a)}if(c.namespaces){Ext.app.addNamespaces(c.namespaces)}if(!c["paths processed"]){if(a&&j){Ext.Loader.setPath(a,j)}m=c.paths;if(m){for(g in m){if(m.hasOwnProperty(g)){Ext.Loader.setPath(g,m[g])}}}}else{delete c["paths processed"]}if(h){if(h===true){h="Viewport"}else{n.push("Ext.plugin.Viewport")}b.processDependencies(d,n,a,"view",h)}if(n.length){f=k.onBeforeCreated;k.onBeforeCreated=function(o,q){var p=Ext.Array.clone(arguments);Ext.require(n,function(){return f.apply(this,p)})}}},constructor:function(a){var b=this;Ext.app.route.Router.application=b;Ext.app.Controller.prototype.constructor.apply(this,arguments);b.doInit(b);b.initNamespace();b.initControllers();b.onBeforeLaunch();b.finishInitControllers()},initNamespace:function(){var c=this,a=c.getAppProperty(),b;b=Ext.namespace(c.getName());if(b){b.getApplication=function(){return c};if(a){if(!b[a]){b[a]=c}}}},initControllers:function(){var c=this,d=Ext.Array.from(c.controllers);c.controllers=new Ext.util.MixedCollection();for(var a=0,b=d.length;a<b;a++){c.getController(d[a])}},finishInitControllers:function(){var c=this,d,b,a;d=c.controllers.getRange();for(b=0,a=d.length;b<a;b++){d[b].finishInit(c)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var f=this,d=Ext.util.History,j=f.getDefaultToken(),h,k,g,a,b;if(f.getEnableQuickTips()){f.initQuickTips()}if(f.getAutoCreateViewport()){f.initViewport()}f.launch.call(f.scope||f);f.launched=true;f.fireEvent("launch",f);h=f.controllers.items;g=h.length;for(k=0;k<g;k++){a=h[k];a.onLaunch(f)}if(!d.ready){d.init()}b=d.getToken();if(b){f.redirectTo(b,true)}else{if(j){d.add(j)}}},getModuleClassName:function(a,b){return Ext.app.Controller.getFullName(a,b,this.getName()).absoluteName},getViewportName:function(){var a=null,b=this.getAutoCreateViewport();if(b){a=(b===true)?"Viewport":b}return a},initQuickTips:function(){Ext.tip.QuickTipManager.init()},initViewport:function(){var a=this.getView(this.getViewportName()),d=a.prototype,c,b;if(a){if(!d.isViewport){b=d.plugins;b=["viewport"].concat(b?Ext.Array.from(b,true):[]);c={plugins:b}}this.viewport=a.create(c)}},createController:function(a){return this.getController(a)},destroyController:function(a){if(typeof a==="string"){a=this.getController(a,true)}Ext.destroy(a)},getController:function(b,a){var l=this,d=l.controllers,j,g,h,f,k,m;g=d.get(b);if(!g){m=d.items;for(f=0,h=m.length;f<h;++f){k=m[f];j=k.getModuleClassName();if(j&&j===b){g=k;break}}}if(!g&&!a){j=l.getModuleClassName(b,"controller");g=Ext.create(j,{application:l,moduleClassName:b});d.add(g);if(l._initialized){g.doInit(l)}}return g},unregister:function(a){this.controllers.remove(a)},getApplication:function(){return this},destroy:function(a){var c=this,f=c.controllers,b=Ext.namespace(c.getName()),d=c.getAppProperty();Ext.destroy(c.viewport);if(f){f.each(function(g){g.destroy(a,true)})}c.controllers=null;Ext.app.Controller.prototype.destroy.call(this,a,true);if(b&&b[d]===c){delete b[d]}},updateGlyphFontFamily:function(a){Ext.setGlyphFontFamily(a)}},1,0,0,0,0,0,[Ext.app,"Application"],0));Ext.define("Ext.overrides.app.Application",{override:"Ext.app.Application"});Ext.application=function(a){var c=function(f){Ext.onReady(function(){Ext.app.Application.instance=new f()})},d=a.paths,b;if(typeof a==="string"){Ext.require(a,function(){c(Ext.ClassManager.get(a))})}else{a=Ext.apply({extend:"Ext.app.Application"},a);Ext.Loader.setPath(a.name,a.appFolder||"app");if(d){for(b in d){if(d.hasOwnProperty(b)){Ext.Loader.setPath(b,d[b])}}}a["paths processed"]=true;Ext.define(a.name+".$application",a,function(){c(this)})}};(Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:true,constructor:function(a){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=a;this.monitoredClasses=[Ext.Component]},match:function(d,a,b){var c=false;if(a==="#"){c=b===d.getController()}else{c=d.is(a)}return c},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0));(Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:true,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var a=this.getView(),b;if(a){b=this.getCloseViewAction();a[b]()}},control:function(a,b){var c=a;if(Ext.isString(a)){c={};c[a]=b}this.compDomain.listen(c,this)},listen:function(c,a){var b=c.component;if(b){c=Ext.apply({},c);delete c.component;this.control(b)}this.callParent([c,a])},getReferences:function(){return this.view.getReferences()},getView:function(){return this.view},lookupReference:function(b){var a=this.view;return a&&a.lookupReference(b)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(c){var b=this.view,a=false;if(b){a=b.fireEvent.apply(b,arguments)}return a},privates:{view:null,ensureId:function(){var a=this.getId();if(!a){this.setId(Ext.id(null,"controller-"))}},attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},clearReference:function(b){var a=this.view;if(a){a.clearReference(b)}},clearReferences:function(){var a=this.view;if(a){a.clearReferences()}},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit()}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0));(Ext.cmd.derive("Ext.form.field.Display",Ext.form.field.Base,{alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],ariaRole:"textbox",fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],focusable:false,readOnly:true,fieldCls:"x-form-display-field",fieldBodyCls:"x-form-display-field-body",htmlEncode:false,noWrap:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,valueToRaw:function(a){if(!a&&a!==0){return""}else{return a}},isDirty:function(){return false},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.valueFrom(b,"");a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.getDisplayValue();a.updateLayout()}return b},getDisplayValue:function(){var a=this,b=this.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a.htmlEncode?Ext.util.Format.htmlEncode(b):b}return c},getSubTplData:function(b){var a=Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments);a.value=this.getDisplayValue();return a}},0,["displayfield"],["component","box","field","displayfield"],{component:true,box:true,field:true,displayfield:true},["widget.displayfield"],0,[Ext.form.field,"Display",Ext.form,"DisplayField",Ext.form,"Display"],0));(Ext.cmd.derive("Ext.layout.container.Fit",Ext.layout.container.Container,{alternateClassName:"Ext.layout.FitLayout",itemCls:"x-fit-item",targetCls:"x-layout-fit",type:"fit",manageMargins:true,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(b,c){var a=c||this.owner.getSizeModel(),d=(a.width.shrinkWrap?0:1)|(a.height.shrinkWrap?0:2);return this.sizePolicies[d]},beginLayoutCycle:function(k,g){var t=this,u=t.lastHeightModel&&t.lastHeightModel.calculated,h=t.lastWidthModel&&t.lastWidthModel.calculated,o=h||u,l=0,m=0,s,b,p,r,f,a,j,n,q,d;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);if(o&&k.targetContext.el.dom.tagName.toUpperCase()!="TD"){o=h=u=false}b=k.childItems;f=b.length;for(p=0;p<f;++p){r=b[p];if(g){s=r.target;j=s.minHeight;n=s.minWidth;if(n||j){a=r.marginInfo||r.getMarginInfo();j+=a.height;n+=a.height;if(l<j){l=j}if(m<n){m=n}}}if(o){q=r.el.dom.style;if(u){q.height=""}if(h){q.width=""}}}if(g){k.maxChildMinHeight=l;k.maxChildMinWidth=m}s=k.target;k.overflowX=(!k.widthModel.shrinkWrap&&k.maxChildMinWidth&&s.scrollFlags.x)||d;k.overflowY=(!k.heightModel.shrinkWrap&&k.maxChildMinHeight&&s.scrollFlags.y)||d},calculate:function(g){var o=this,l=g.childItems,d=l.length,c=o.getContainerSize(g),f={length:d,ownerContext:g,targetSize:c},r=g.widthModel.shrinkWrap,m=g.heightModel.shrinkWrap,k=g.overflowX,h=g.overflowY,n,b,p,j,a,q;if(k||h){n=o.getScrollbarsNeeded(k&&c.width,h&&c.height,g.maxChildMinWidth,g.maxChildMinHeight);if(n){b=Ext.getScrollbarSize();if(n&1){c.height-=b.height}if(n&2){c.width-=b.width}}}if(d>0){for(j=0;j<d;++j){f.index=j;o.fitItem(l[j],f)}}else{f.contentWidth=f.contentHeight=0}if(m||r){p=g.targetContext.getPaddingInfo();if(r){if(h&&!c.gotHeight){o.done=false}else{a=f.contentWidth+p.width;if(n&2){a+=b.width}if(!g.setContentWidth(a)){o.done=false}}}if(m){if(k&&!c.gotWidth){o.done=false}else{q=f.contentHeight+p.height;if(n&1){q+=b.height}if(!g.setContentHeight(q)){o.done=false}}}}},fitItem:function(b,c){var a=this;if(b.invalid){a.done=false;return}c.margins=b.getMarginInfo();c.needed=c.got=0;a.fitItemWidth(b,c);a.fitItemHeight(b,c);if(c.got!=c.needed){a.done=false}},fitItemWidth:function(c,d){var a,b;if(d.ownerContext.widthModel.shrinkWrap){b=c.getProp("width")+d.margins.width;a=d.contentWidth;if(a===undefined){d.contentWidth=b}else{d.contentWidth=Math.max(a,b)}}else{if(c.widthModel.calculated){++d.needed;if(d.targetSize.gotWidth){++d.got;this.setItemWidth(c,d)}else{return}}}this.positionItemX(c,d)},fitItemHeight:function(c,d){var b,a;if(d.ownerContext.heightModel.shrinkWrap){a=c.getProp("height")+d.margins.height;b=d.contentHeight;if(b===undefined){d.contentHeight=a}else{d.contentHeight=Math.max(b,a)}}else{if(c.heightModel.calculated){++d.needed;if(d.targetSize.gotHeight){++d.got;this.setItemHeight(c,d)}else{return}}}this.positionItemY(c,d)},positionItemX:function(a,c){var b=c.margins;if(c.index||b.left){a.setProp("x",b.left)}if(b.width){a.setProp("margin-right",b.width)}},positionItemY:function(a,c){var b=c.margins;if(c.index||b.top){a.setProp("y",b.top)}if(b.height){a.setProp("margin-bottom",b.height)}},setItemHeight:function(a,b){a.setHeight(b.targetSize.height-b.margins.height)},setItemWidth:function(a,b){a.setWidth(b.targetSize.width-b.margins.width)}},0,0,0,0,["layout.fit"],0,[Ext.layout.container,"Fit",Ext.layout,"FitLayout"],0));(Ext.cmd.derive("Ext.panel.Table",Ext.panel.Panel,{extraBaseCls:"x-grid",extraBodyCls:"x-grid-body",defaultBindProperty:"store",layout:"fit",ariaRole:"grid",config:{selection:null},publishes:["selection"],twoWayBindable:["selection"],autoLoad:false,variableRowHeight:false,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:false,viewType:null,selType:"rowmodel",scroll:true,deferRowRender:false,sortableColumns:true,multiColumnSort:false,enableLocking:false,scrollerOwner:true,enableColumnMove:true,sealedColumns:false,enableColumnResize:true,rowLines:true,bufferedRenderer:true,ownerGrid:null,colLinesCls:"x-grid-with-col-lines",rowLinesCls:"x-grid-with-row-lines",noRowLinesCls:"x-grid-no-row-lines",hiddenHeaderCtCls:"x-grid-header-ct-hidden",hiddenHeaderCls:"x-grid-header-hidden",resizeMarkerCls:"x-grid-resize-marker",emptyCls:"x-grid-empty",focusable:true,tabIndex:0,constructor:function(b){var c=this,a;c.ownerGrid=(b&&b.ownerGrid)||c;Ext.panel.Panel.prototype.constructor.call(this,b);a=this.store;a.trackStateChanges=true;if(c.autoLoad){a.unblockLoad();a.load()}},initComponent:function(){var g=this,j=g.columns||g.colModel||[],b,f,a,h,c=g.store=Ext.data.StoreManager.lookup(g.store||"ext-empty-store"),d;g.enableLocking=g.enableLocking||g.hasLockedColumns(j);if(g.autoLoad){g.store.blockLoad()}if(g.plugins){g.plugins=g.constructPlugins()}if(g.columnLines){g.addBodyCls(g.colLinesCls)}g.addBodyCls(g.rowLines?g.rowLinesCls:g.noRowLinesCls);g.addBodyCls(g.extraBodyCls);if(g.enableLocking){g.self.mixin("lockable",Ext.grid.locking.Lockable);g.injectLockable()}else{if(j.isRootHeader){g.headerCt=j;g.headerCt.forceFit=!!g.forceFit;g.columnManager=j.columnManager;g.visibleColumnManager=j.visibleColumnManager}else{if(Ext.isArray(j)){j={items:j}}Ext.apply(j,{grid:g,forceFit:g.forceFit,sortable:g.sortableColumns,enableColumnMove:g.enableColumnMove,enableColumnResize:g.enableColumnResize,columnLines:g.columnLines,sealed:g.sealedColumns});if(g.hideHeaders){j.height=0;j.hiddenHeaders=true}if(Ext.isDefined(g.enableColumnHide)){j.enableColumnHide=g.enableColumnHide}g.headerCt=new Ext.grid.header.Container(j)}}g.columns=d=g.headerCt.getGridColumns();g.scrollTask=new Ext.util.DelayedTask(g.syncHorizontalScroll,g);g.cls=(g.cls||"")+(" "+g.extraBaseCls);delete g.autoScroll;h=g.plugins&&Ext.Array.findBy(g.plugins,function(k){return k.isBufferedRenderer});if(h){g.bufferedRenderer=h}if(!g.hasView){if(c.isBufferedStore&&!c.remoteSort){for(f=0,a=d.length;f<a;f++){d[f].sortable=false}}if(g.hideHeaders){g.headerCt.addCls(g.hiddenHeaderCtCls);g.addCls(g.hiddenHeaderCls)}g.relayHeaderCtEvents(g.headerCt);g.features=g.features||[];if(!Ext.isArray(g.features)){g.features=[g.features]}g.dockedItems=[].concat(g.dockedItems||[]);g.dockedItems.unshift(g.headerCt);g.viewConfig=g.viewConfig||{};b=g.getView();g.items=[b];g.hasView=true;if(!g.hideHeaders){b.on({scroll:g.onHorizontalScroll,scope:g,onFrame:!!Ext.global.requestAnimationFrame})}g.bindStore(c,true);g.mon(b,{viewready:g.onViewReady,refresh:g.onRestoreHorzScroll,scope:g})}g.relayEvents(g.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","select","beforedeselect","deselect"]);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);g.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},beforeRender:function(){var a=this,b=a.bufferedRenderer;if(!a.lockable){if(b&&a.getSizeModel().height.auto){a.bufferedRenderer=b=false}if(b&&!b.isBufferedRenderer){b={xclass:"Ext.grid.plugin.BufferedRenderer"};Ext.copyTo(b,a,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer");a.bufferedRenderer=a.addPlugin(b)}}Ext.panel.Panel.prototype.beforeRender.apply(this,arguments)},initFocusableEvents:function(){var b=this,a=b.getView();Ext.panel.Panel.prototype.initFocusableEvents.call(this);b.focusEnterLeaveListeners=a.getFocusEl().on({focusenter:b.onFocusEnter,focusleave:b.onFocusLeave,scope:b,destroyable:true})},onFocus:function(a){Ext.panel.Panel.prototype.onFocus.call(this,a);this.handleFocusEnter(a)},onFocusEnter:function(a){this.handleFocusEnter(a)},handleFocusEnter:function(c){var f=this,g=f.getView(),a,h=g.getNavigationModel(),j,b,k=g.bufferedRenderer,d;if(!f.containsFocus){j=b=g.getLastFocused();if(!b){a=g.isLockingView?(g.lockedGrid.isVisible()?g.lockedView:g.normalView):g;d=g.dataSource.getAt(k?k.getFirstVisibleRowIndex():0);if(!d.isNonData){b=new Ext.grid.CellContext(a).setPosition({row:d,column:0})}}if(!b){c.stopEvent();c.getTarget().blur();return}h.setPosition(b,null,c,null,!!j);f.containsFocus=!!h.getPosition()}if(f.containsFocus){this.getView().el.dom.setAttribute("tabindex","-1")}},onFocusLeave:function(b){var a=this.getView();if(this.containsFocus){a.getNavigationModel().setPosition(null,null,b,null,true);this.containsFocus=false;a.focusEl=a.el;a.focusEl.dom.setAttribute("tabindex",0)}},hasLockedColumns:function(c){var b,a,d;if(c.isRootHeader){c=c.items.items}else{if(Ext.isObject(c)){c=c.items}}for(b=0,a=c.length;b<a;b++){d=c[b];if(!d.processed&&d.locked){return true}}},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var b=this,c=Ext.panel.Panel.prototype.getState.call(this),a=b.store.getState();c=b.addPropertyToState(c,"columns",b.headerCt.getColumnsState());if(a){c.storeState=a}return c},applyState:function(f){var d=this,g=f.sort,a=f.storeState,b=d.store,c=f.columns;delete f.columns;Ext.panel.Panel.prototype.applyState.apply(this,arguments);if(c){d.headerCt.applyColumnsState(c)}if(g){if(b.remoteSort){b.sort({property:g.property,direction:g.direction,root:g.root},null,false)}else{b.sort(g.property,g.direction)}}else{if(a){b.applyState(a)}}},getStore:function(){return this.store},getView:function(){var b=this,c,a;if(!b.view){c=b.getSelectionModel();a=Ext.apply({grid:b,ownerGrid:b.ownerGrid,deferInitialRefresh:b.deferRowRender,variableRowHeight:b.variableRowHeight,preserveScrollOnRefresh:true,trackOver:b.trackMouseOver!==false,throttledUpdate:b.throttledUpdate===true,scroll:b.scroll,xtype:b.viewType,store:b.store,headerCt:b.headerCt,columnLines:b.columnLines,rowLines:b.rowLines,selModel:c,navigationModel:"grid",features:b.features,panel:b,emptyText:b.emptyText||""},b.viewConfig);if(b.scroll&&b.viewConfig.scroll&&b.scroll!==b.viewConfig.scroll){a.scroll="both"}Ext.widget(a);if(b.view.emptyText){b.view.emptyText='<div class="'+b.emptyCls+'">'+b.view.emptyText+"</div>"}b.view.getComponentLayout().headerCt=b.headerCt;b.mon(b.view,{uievent:b.processEvent,scope:b});c.view=b.view;b.headerCt.view=b.view;if(b.hasListeners.viewcreated){b.fireEvent("viewcreated",b,b.view)}}return b.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,processEvent:function(f,h,j,a,g,d,c,k){var b=d.position.column;if(b){return b.processEvent.apply(b,arguments)}},scrollByDeltaY:function(b,a){this.getView().scrollBy(0,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,0,a)},afterCollapse:function(){this.saveScrollPos();Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){Ext.panel.Panel.prototype.afterExpand.apply(this,arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){if(this.view.scrollManager){this.view.scrollManager.refresh()}},onHeaderMove:function(f,g,a,b,d){var c=this;if(c.optimizedColumnMove===false){c.view.refreshView()}else{c.view.moveColumn(b,d,a)}c.delayScroll()},onHeaderHide:function(a,b){if(this.view.refreshCounter){this.view.refreshView()}},onHeaderShow:function(a,b){if(this.view.refreshCounter){this.view.refreshView()}},onHeadersChanged:function(b,c){var a=this;if(a.rendered&&!a.reconfiguring){a.view.refreshView();a.delayScroll()}},delayScroll:function(){var a=this.view;if(a){this.scrollTask.delay(10,null,null,[a])}},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var b=this,a=b.scrollXPos;if(a){b.syncHorizontalScroll(b,true)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up("[scrollerOwner]")}return a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){var c=this,a=c.selModel,f,d,b;if(!a){a={};f=true}if(!a.events){b=a.selType||c.selType;f=!a.mode;a=c.selModel=Ext.create("selection."+b,a)}if(c.simpleSelect){d="SIMPLE"}else{if(c.multiSelect){d="MULTI"}}Ext.applyIf(a,{allowDeselect:c.allowDeselect});if(d&&f){a.setSelectionMode(d)}if(!a.hasRelaySetup){c.relayEvents(a,["selectionchange","beforeselect","beforedeselect","select","deselect"]);a.hasRelaySetup=true;if(a.isRowModel){a.on("selectionchange",c.updateBindSelection,c)}}if(c.disableSelection){a.locked=true}return a},getScrollTarget:function(){var a=this.getScrollerOwner(),b=a.query("tableview");return b[1]||b[0]},onHorizontalScroll:function(a){this.syncHorizontalScroll(a)},syncHorizontalScroll:function(f,c){var d=this,a=d.view.getScrollX(),b;c=c===true;if(d.rendered&&(c||a!==d.scrollXPos)){if(c){b=d.getScrollTarget();b.setScrollX(a)}d.headerCt.setScrollX(a);d.scrollXPos=a}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(b,c){var d=this,a=d.getView(),f=d.bufferedRenderer;if(b){d.store=b;if(f&&f.isBufferedRenderer&&f.store){f.bindStore(b)}if(a.store!==b){a.bindStore(b,false)}d.mon(b,{load:d.onStoreLoad,scope:d});d.storeRelayers=d.relayEvents(b,["filterchange","groupchange"])}else{d.unbindStore()}},unbindStore:function(){var c=this,b=c.store,a;if(b){c.store=null;c.mun(b,{load:c.onStoreLoad,scope:c});Ext.destroy(c.storeRelayers);a=c.view;if(a.store){a.bindStore(null)}}},setColumns:function(a){if(a.length||this.getColumnManager().getColumns().length){this.reconfigure(undefined,a)}},setStore:function(a){this.reconfigure(a)},reconfigure:function(a,c){var d=this,g=d.store,f=d.headerCt,b=f?f.items.getRange():d.columns;if(arguments.length===1&&Ext.isArray(a)){c=a;a=null}if(c){c=Ext.Array.slice(c)}d.reconfiguring=true;d.fireEvent("beforereconfigure",d,a,c,g,b);if(d.lockable){d.reconfigureLockable(a,c)}else{Ext.suspendLayouts();if(c){delete d.scrollXPos;f.removeAll();f.add(c)}if(a&&(a=Ext.StoreManager.lookup(a))!==g){d.unbindStore();d.bindStore(a)}else{d.getView().refreshView()}Ext.resumeLayouts(true)}d.fireEvent("reconfigure",d,a,c,g,b);delete d.reconfiguring},beforeDestroy:function(){var a=this.scrollTask;if(a){a.cancel();this.scrollTask=null}Ext.destroy(this.focusEnterLeaveListeners);Ext.panel.Panel.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.lockable){a.destroyLockable()}a.unbindStore();Ext.panel.Panel.prototype.onDestroy.call(this);a.columns=a.storeRelayers=a.columnManager=a.visibleColumnManager=null},destroy:function(){var a=this;Ext.panel.Panel.prototype.destroy.call(this);if(a.isDestroyed){a.view=a.selModel=a.headerCt=null}},privates:{getFocusEl:function(){return this.getView().getFocusEl()}}},1,["tablepanel"],["component","box","container","panel","tablepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true},["widget.tablepanel"],0,[Ext.panel,"Table"],0));Ext.define("ExtThemeNeptune.panel.Table",{override:"Ext.panel.Table",initComponent:function(){var a=this;if(!a.hasOwnProperty("bodyBorder")&&!a.hideHeaders){a.bodyBorder=true}(arguments.callee.$previous||Ext.panel.Panel.prototype.initComponent).call(this)}});Ext.define("FBEditor.override.panel.Table",{override:"Ext.panel.Table",handleFocusEnter:function(c){var f=this,g=f.getView(),a,h=g.getNavigationModel(),j,b,k=g.bufferedRenderer,d;if(!f.containsFocus){j=b=g.getLastFocused();if(!b){a=g.isLockingView?(g.lockedGrid.isVisible()?g.lockedView:g.normalView):g;d=g.dataSource.getAt(k?k.getFirstVisibleRowIndex():0);if(d&&!d.isNonData){b=new Ext.grid.CellContext(a).setPosition({row:d,column:0})}}if(!b){c.stopEvent();c.getTarget().blur();return}h.setPosition(b,null,c,null,!!j);f.containsFocus=!!h.getPosition()}if(f.containsFocus){this.getView().el.dom.setAttribute("tabindex","-1")}}});(Ext.cmd.derive("Ext.grid.CellContext",Ext.Base,{isCellContext:true,constructor:function(a){this.view=a},isEqual:function(a){if(a){return this.record===a.record&&this.column===a.column}return false},setPosition:function(c,a){var b=this;if(arguments.length===1){if(c.view){b.view=c.view}a=c.column;c=c.row}b.setRow(c);b.setColumn(a);return b},setAll:function(b,c,d,a,g){var f=this;f.view=b;f.rowIdx=c;f.colIdx=d;f.record=a;f.column=g;return f},setRow:function(c){var a=this,b=a.view.dataSource;if(c!==undefined){if(typeof c==="number"){a.rowIdx=Math.max(Math.min(c,b.getCount()-1),0);a.record=b.getAt(c)}else{if(c.isModel){a.record=c;a.rowIdx=b.indexOf(c)}else{if(c.tagName){a.record=a.view.getRecord(c);a.rowIdx=b.indexOf(a.record)}}}}},setColumn:function(a){var b=this,c=b.view.getVisibleColumnManager();if(a!==undefined){if(typeof a==="number"){b.colIdx=a;b.column=c.getHeaderAtIndex(a)}else{if(a.isHeader){b.column=a;b.colIdx=c.getHeaderIndex(a)}}}},equal:function(a){return(a&&a.isCellContext&&a.view===this.view&&a.record===this.record&&a.column===this.column)},clone:function(){var b=this,a=new b.self(b.view);a.rowIdx=b.rowIdx;a.colIdx=b.colIdx;a.record=b.record;a.column=b.column;return a}},1,0,0,0,0,0,[Ext.grid,"CellContext"],0));(Ext.cmd.derive("Ext.util.CSS",Ext.Base,function(){var c,f=null,d=document,b=/(-[a-z])/gi,a=function(g,h){return h.charAt(1).toUpperCase()};return{singleton:true,rules:f,initialized:false,constructor:function(){c=this},createStyleSheet:function(j,l){var h,g=d.getElementsByTagName("head")[0],k=d.createElement("style");k.setAttribute("type","text/css");if(l){k.setAttribute("id",l)}h=k.styleSheet;if(h){g.appendChild(k);h.cssText=j}else{k.appendChild(d.createTextNode(j));g.appendChild(k);h=k.sheet}c.cacheStyleSheet(h);return h},removeStyleSheet:function(h){var g=d.getElementById(h);if(g){g.parentNode.removeChild(g)}},swapStyleSheet:function(j,g){var h;c.removeStyleSheet(j);h=d.createElement("link");h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");h.setAttribute("id",j);h.setAttribute("href",g);d.getElementsByTagName("head")[0].appendChild(h)},cacheStyleSheet:function(m){if(!f){f=c.rules={}}try{var p=m.cssRules||m.rules,l=p.length-1,h=m.imports,g=h?h.length:0,o,k;for(k=0;k<g;++k){c.cacheStyleSheet(h[k])}for(;l>=0;--l){o=p[l];if(o.styleSheet){c.cacheStyleSheet(o.styleSheet)}c.cacheRule(o,m)}}catch(n){}},cacheRule:function(h,m){if(h.styleSheet){return c.cacheStyleSheet(h.styleSheet)}var l=h.selectorText,k,g;if(l){l=l.split(",");k=l.length;for(g=0;g<k;g++){f[Ext.String.trim(l[g]).toLowerCase()]={parentStyleSheet:m,cssRule:h}}}},getRules:function(j){var h={},g;if(f===null||j){c.refreshCache()}for(g in f){h[g]=f[g].cssRule}return h},refreshCache:function(){var j=d.styleSheets,h=0,g=j.length;f=c.rules={};for(;h<g;h++){try{if(!j[h].disabled){c.cacheStyleSheet(j[h])}}catch(k){}}},getRule:function(h,k,j){var l,g;if(!f||k){c.refreshCache()}if(!Ext.isArray(h)){g=f[h.toLowerCase()];if(g&&!j){g=g.cssRule}return g||null}for(l=0;l<h.length;l++){if(f[h[l]]){return j?f[h[l].toLowerCase()]:f[h[l].toLowerCase()].cssRule}}return null},createRule:function(m,h,k){var g,l=m.cssRules||m.rules,j=l.length;if(m.insertRule){m.insertRule(h+" {"+k+"}",j)}else{m.addRule(h,k||" ")}c.cacheRule(g=l[j],m);return g},updateRule:function(g,l,k){var m,h,j;if(!Ext.isArray(g)){m=c.getRule(g);if(m){if(arguments.length===2){j=Ext.Element.parseStyles(l);for(l in j){m.style[l.replace(b,a)]=j[l]}}else{m.style[l.replace(b,a)]=k}return true}}else{for(h=0;h<g.length;h++){if(c.updateRule(g[h],l,k)){return true}}}return false},deleteRule:function(g){var j=c.getRule(g,false,true),k,h;if(j){k=j.parentStyleSheet;h=Ext.Array.indexOf(k.cssRules||k.rules,j.cssRule);if(k.deleteRule){k.deleteRule(h)}else{k.removeRule(h)}delete f[g]}}}},1,0,0,0,0,0,[Ext.util,"CSS"],0));(Ext.cmd.derive("Ext.view.TableLayout",Ext.layout.component.Auto,{type:"tableview",beginLayout:function(c){var b=this,a=b.owner.lockingPartner;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(a){b.lockedGrid=b.owner.up("[lockable]");b.lockedGrid.needsRowHeightSync=true;if(!c.lockingPartner){c.lockingPartner=c.context.getItem(a,a.el);if(c.lockingPartner&&!c.lockingPartner.lockingPartner){c.lockingPartner.lockingPartner=c}}}c.headerContext=c.context.getCmp(b.headerCt);if(b.owner.body.dom){c.bodyContext=c.getEl(b.owner.body)}},calculate:function(g){var f=this,c=f.lockingPartner,a=f.owner,d=0,b;if(!a.store.getCount()){g.state.columnWidthsSynced=true;if(g.bodyContext){g.bodyContext.setHeight(d,false)}g.setProp("contentHeight",d);Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);return}if(g.headerContext.hasProp("columnsChanged")){if(g.headerContext.getProp("columnsChanged")&&!f.setColumnWidths(g)){f.done=false;return}g.state.columnWidthsSynced=true;if(g.bodyContext){b=f.owner.el.down("."+a.ownerCt.emptyCls,true);if(!b){d=g.bodyContext.el.dom.offsetHeight;g.bodyContext.setHeight(d,false)}else{d=b.offsetHeight}if(g.headerContext.state.boxPlan.tooNarrow&&g.ownerCtContext.sizeModel.height.shrinkWrap){d+=Ext.getScrollbarSize().height}g.setProp("contentHeight",d)}if(c&&!c.state.columnWidthsSynced){f.done=false}else{Ext.layout.component.Auto.prototype.calculate.apply(this,arguments)}}else{f.done=false}},measureContentHeight:function(b){var a=b.lockingPartner;if(!b.bodyContext||(b.state.columnWidthsSynced&&(!a||a.state.columnWidthsSynced))){return Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments)}},setColumnWidths:function(c){if(!this.owner.body.dom){return true}var l=this,b=l.owner,a=c.context,g=c.headerContext.getProp("columnsChanged"),f=l.headerCt.getVisibleGridColumns(),d,j=0,k=g.length,m,h;if(a){a.currentLayout=l}for(j=0;j<k;j++){d=f[g[j]];m=a.getCmp(d);h=m.props.width;if(isNaN(h)){m.getProp("width");return false}b.body.select(b.getColumnSizerSelector(d)).setWidth(h)}return true},finishedLayout:function(c){var b=this,a=c.headerContext.props.contentWidth,d=Ext.fly(b.owner.getNodeContainer());Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);d&&d.setWidth(a);if(b.owner.refreshCounter&&b.lockedGrid&&b.lockedGrid.syncRowHeight&&b.lockedGrid.needsRowHeightSync){b.lockedGrid.syncRowHeights();b.lockedGrid.needsRowHeightSync=false}}},0,0,0,0,["layout.tableview"],0,[Ext.view,"TableLayout"],0));(Ext.cmd.derive("Ext.view.NodeCache",Ext.Base,{statics:{range:document.createRange&&document.createRange()},constructor:function(a){this.view=a;this.clear();this.el=new Ext.dom.Fly()},clear:function(g){var d=this,f=d.elements,b,c,a=d.statics().range;if(d.count&&g){if(a){a.setStartBefore(f[d.startIndex]);a.setEndAfter(f[d.endIndex]);a.deleteContents()}else{for(b in f){c=f[b];c.parentNode.removeChild(c)}}}d.elements={};d.count=d.startIndex=0;d.endIndex=-1},fill:function(b,h,g){g=g||0;var d=this,f=d.elements={},c,a=b.length-g;if(!h){h=0}for(c=0;c<a;c++){f[h+c]=b[c+g]}d.startIndex=h;d.endIndex=h+a-1;d.count=a;return this},insert:function(g,b){var d=this,f=d.elements,c,a=b.length;if(d.count){if(g<d.count){for(c=d.endIndex+a;c>=g+a;c--){f[c]=f[c-a];f[c].setAttribute("data-recordIndex",c)}}d.endIndex=d.endIndex+a}else{d.startIndex=g;d.endIndex=g+a-1}for(c=0;c<a;c++,g++){f[g]=b[c];f[g].setAttribute("data-recordIndex",g)}d.count+=a},invoke:function(d,a){var f=this,c,b;d=Ext.dom.Element.prototype[d];for(b=f.startIndex;b<=f.endIndex;b++){c=f.item(b);if(c){d.apply(c,a)}}return f},item:function(c,b){var d=this.elements[c],a=null;if(d){a=b?this.elements[c]:this.el.attach(this.elements[c])}return a},first:function(a){return this.item(this.startIndex,a)},last:function(a){return this.item(this.endIndex,a)},getCount:function(){return this.count},slice:function(f,b){var d=this.elements,a=[],c;if(!b){b=this.endIndex}else{b=Math.min(this.endIndex,b-1)}for(c=f||this.startIndex;c<=b;c++){a.push(d[c])}return a},replaceElement:function(d,c,a){var f=this.elements,b=(typeof d==="number")?d:this.indexOf(d);if(b>-1){c=Ext.getDom(c);if(a){d=f[b];d.parentNode.insertBefore(c,d);Ext.removeNode(d);c.setAttribute("data-recordIndex",b)}this.elements[b]=c}return this},indexOf:function(b){var c=this.elements,a;b=Ext.getDom(b);for(a=this.startIndex;a<=this.endIndex;a++){if(c[a]===b){return a}}return -1},removeRange:function(b,g,d){var j=this,a=j.elements,f,h,c,k;if(g==null){g=j.endIndex+1}else{g=Math.min(j.endIndex+1,g+1)}if(b==null){b=j.startIndex}c=g-b;for(h=b,k=g;h<=j.endIndex;h++,k++){if(d&&h<g){Ext.removeNode(a[h])}if(k<=j.endIndex){f=a[h]=a[k];f.setAttribute("data-recordIndex",h)}else{delete a[h]}}j.count-=c;j.endIndex-=c},removeElement:function(m,c){var h=this,l,k,a=h.elements,d,f,b=0,g,j;if(Ext.isArray(m)){l=m;m=[];f=l.length;for(b=0;b<f;b++){k=l[b];if(typeof k!=="number"){k=h.indexOf(k)}if(k>=h.startIndex&&k<=h.endIndex){m[m.length]=k}}Ext.Array.sort(m);f=m.length}else{if(m<h.startIndex||m>h.endIndex){return}f=1;m=[m]}for(g=j=m[0],b=0;g<=h.endIndex;g++,j++){if(b<f&&g===m[b]){j++;b++;if(c){Ext.removeNode(a[g])}}if(j<=h.endIndex&&j>=h.startIndex){d=a[g]=a[j];d.setAttribute("data-recordIndex",g)}else{delete a[g]}}h.endIndex-=f;h.count-=f},scroll:function(g,p,c){var n=this,o=n.view,q=o.store,a=n.elements,s=g.length,j,d,b,h,m=o.getNodeContainer(),r=document.createDocumentFragment(),f=o.hasListeners.itemremove,l=o.hasListeners.itemadd,k=n.statics().range;if(p===-1){if(c){if(k){k.setStartBefore(a[(n.endIndex-c)+1]);k.setEndAfter(a[n.endIndex]);k.deleteContents();for(j=(n.endIndex-c)+1;j<=n.endIndex;j++){d=a[j];delete a[j];if(f){o.fireEvent("itemremove",q.getByInternalId(d.getAttribute("data-recordId")),j,d,o)}}}else{for(j=(n.endIndex-c)+1;j<=n.endIndex;j++){d=a[j];delete a[j];d.parentNode.removeChild(d);if(f){o.fireEvent("itemremove",q.getByInternalId(d.getAttribute("data-recordId")),j,d,o)}}}n.endIndex-=c}if(g.length){h=o.bufferRender(g,n.startIndex-=s);for(j=0;j<s;j++){a[n.startIndex+j]=h[j];r.appendChild(h[j])}m.insertBefore(r,m.firstChild);if(l){o.fireEvent("itemadd",g,n.startIndex,h)}}}else{if(c){b=n.startIndex+c;if(k){k.setStartBefore(a[n.startIndex]);k.setEndAfter(a[b-1]);k.deleteContents();for(j=n.startIndex;j<b;j++){d=a[j];delete a[j];if(f){o.fireEvent("itemremove",q.getByInternalId(d.getAttribute("data-recordId")),j,d,o)}}}else{for(j=n.startIndex;j<b;j++){d=a[j];delete a[j];d.parentNode.removeChild(d);if(f){o.fireEvent("itemremove",q.getByInternalId(d.getAttribute("data-recordId")),j,d,o)}}}n.startIndex=b}h=o.bufferRender(g,n.endIndex+1);for(j=0;j<s;j++){a[n.endIndex+=1]=h[j];r.appendChild(h[j])}m.appendChild(r);if(l){o.fireEvent("itemadd",g,n.endIndex+1,h)}}n.count=n.endIndex-n.startIndex+1},sumHeights:function(){var a=0,c=this.elements,b;for(b=this.startIndex;b<=this.endIndex;b++){a+=c[b].offsetHeight}return a}},1,0,0,0,0,0,[Ext.view,"NodeCache"],function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}));(Ext.cmd.derive("Ext.view.Table",Ext.view.View,{inheritableStatics:{events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","deselect","select","beforedeselect","beforeselect","selectionchange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand"]},componentLayout:"tableview",baseCls:"x-grid-view",unselectableCls:"x-unselectable",firstCls:"x-grid-cell-first",lastCls:"x-grid-cell-last",itemCls:"x-grid-item",selectedItemCls:"x-grid-item-selected",selectedCellCls:"x-grid-cell-selected",focusedItemCls:"x-grid-item-focused",overItemCls:"x-grid-item-over",altRowCls:"x-grid-item-alt",dirtyCls:"x-grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)x-grid-row-(first|last|alt)(?:\\s+|$)","g"),cellRe:new RegExp("x-grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:true,positionCells:false,stripeOnUpdate:null,trackOver:true,focusable:false,getRowClass:null,stripeRows:true,markDirty:true,ariaRole:"grid",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="x-grid-item-container" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellPadding="0" cellSpacing="0" {ariaTableAttr} style="width:100%;{itemStyle}">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " x-grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}" {rowAttr:attributes} {ariaRowAttr}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>" tabindex="-1" {ariaCellAttr} data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</td>",{priority:0}],refreshSelmodelOnRefresh:false,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:["x-grid-cell x-grid-td"]},renderBuffer:document.createElement("div"),constructor:function(a){if(a.grid.isTree){a.baseCls="x-tree-view"}Ext.view.View.prototype.constructor.call(this,a)},hasVariableRowHeight:function(a){var b=this;return b.variableRowHeight||b.store.isGrouped()||b.getVisibleColumnManager().hasVariableRowHeight()||(!a&&b.lockingPartner&&b.lockingPartner.hasVariableRowHeight(true))},initComponent:function(){var b=this,a=b.scroll;if(b.columnLines){b.addCls(b.grid.colLinesCls)}if(b.rowLines){b.addCls(b.grid.rowLinesCls)}b.body=new Ext.dom.Fly();b.body.id=b.id+"gridBody";b.autoScroll=undefined;if(!b.trackOver){b.overItemCls=null}if(a===true||a==="both"){b.autoScroll=true}else{if(a==="horizontal"){b.overflowX="auto"}else{if(a==="vertical"){b.overflowY="auto"}}}b.selModel.view=b.headerCt.view=b;b.grid.view=b;b.initFeatures(b.grid);b.itemSelector=b.getItemSelector();b.all=new Ext.view.NodeCache(b);Ext.view.View.prototype.initComponent.call(this)},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},beforeLayout:function(){var b=this,a=!b.firstRefreshDone&&b.headerCt.layout.running;Ext.view.View.prototype.beforeLayout.apply(this,arguments);if(a&&b.body.dom){b.headerCt.layout.injectViewContext(b.headerCt.layout.ownerContext,b)}},moveColumn:function(a,u,k){var t=this,r=k>1,m=r&&document.createRange?document.createRange():null,b=r&&!m?document.createDocumentFragment():null,l=u,n=t.getGridColumns().length,s=n-1,f=(t.firstCls||t.lastCls)&&(u===0||u===n||a===0||a===s),p,o,h,q,c,d,g;if(t.rendered&&u!==a){h=t.el.query(t.rowSelector);if(u>a&&b){l-=1}for(p=0,q=h.length;p<q;p++){c=h[p];d=c.childNodes;if(f){if(d.length===1){Ext.fly(d[0]).addCls(t.firstCls);Ext.fly(d[0]).addCls(t.lastCls);continue}if(a===0){Ext.fly(d[0]).removeCls(t.firstCls);Ext.fly(d[1]).addCls(t.firstCls)}else{if(a===s){Ext.fly(d[s]).removeCls(t.lastCls);Ext.fly(d[s-1]).addCls(t.lastCls)}}if(u===0){Ext.fly(d[0]).removeCls(t.firstCls);Ext.fly(d[a]).addCls(t.firstCls)}else{if(u===n){Ext.fly(d[s]).removeCls(t.lastCls);Ext.fly(d[a]).addCls(t.lastCls)}}}if(r){if(m){m.setStartBefore(d[a]);m.setEndAfter(d[a+k-1]);b=m.extractContents()}else{for(o=0;o<k;o++){b.appendChild(d[a])}}c.insertBefore(b,d[l]||null)}else{c.insertBefore(d[a],d[l]||null)}}g=t.el.query("colgroup");for(p=0,q=g.length;p<q;p++){c=g[p];if(r){if(m){m.setStartBefore(c.childNodes[a]);m.setEndAfter(c.childNodes[a+k-1]);b=m.extractContents()}else{for(o=0;o<k;o++){b.appendChild(c.childNodes[a])}}c.insertBefore(b,c.childNodes[l]||null)}else{c.insertBefore(c.childNodes[a],c.childNodes[l]||null)}}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(a){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(a)},getCell:function(a,b){var c=this.getRow(a);return Ext.fly(c).down(b.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},findFeature:function(a){if(this.features){return Ext.Array.findBy(this.features,function(b){if(b.ftype===a){return true}})}},initFeatures:function(d){var g=this,c,f,b,a;g.tpl=Ext.XTemplate.getTpl(this,"tpl");g.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl");g.addRowTpl(Ext.XTemplate.getTpl(this,"outerRowTpl"));g.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl");g.featuresMC=new Ext.util.MixedCollection();f=g.features=g.constructFeatures();a=f?f.length:0;for(c=0;c<a;c++){b=f[c];b.view=g;b.grid=d;g.featuresMC.add(b);b.init(d)}},renderTHead:function(b,c,f){var g=b.view.headerFns,a,d;if(g){for(d=0,a=g.length;d<a;++d){g[d].call(this,b,c,f)}}},addHeaderFn:function(a){var b=this.headerFns;if(!b){b=this.headerFns=[]}b.push(a)},renderTFoot:function(b,c,f){var g=b.view.footerFns,a,d;if(g){for(d=0,a=g.length;d<a;++d){g[d].call(this,b,c,f)}}},addFooterFn:function(a){var b=this.footerFns;if(!b){b=this.footerFns=[]}b.push(a)},addTpl:function(a){return this.insertTpl("tpl",a)},addRowTpl:function(a){return this.insertTpl("rowTpl",a)},addCellTpl:function(a){return this.insertTpl("cellTpl",a)},insertTpl:function(f,d){var c=this,a,b;if(d.isTemplate){d=Ext.Object.chain(d)}else{d=new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",d)}for(a=c[f];d.priority<a.priority;a=a.nextTpl){b=a}if(b){b.nextTpl=d}else{c[f]=d}d.nextTpl=a;return d},tplApplyOut:function(a,b,c){if(this.before){if(this.before(a,b,c)===false){return}}this.nextTpl.applyOut(a,b,c);if(this.after){this.after(a,b,c)}},constructFeatures:function(){var g=this,f=g.features,d,b,c=0,a;if(f){b=[];a=f.length;for(;c<a;c++){d=f[c];if(!d.isFeature){d=Ext.create("feature."+d.ftype,d)}b[c]=d}}return b},beforeRender:function(){var a=this;Ext.view.View.prototype.beforeRender.call(this);if(!a.enableTextSelection){a.protoEl.unselectable()}},onBindStore:function(){var a=this;if(a.all&&a.all.getCount()){if(a.bufferedRenderer){a.bufferedRenderer.setBodyTop(0)}a.clearViewEl()}Ext.view.View.prototype.onBindStore.apply(this,arguments)},onViewScroll:function(b,a){if(!this.ignoreScroll){Ext.view.View.prototype.onViewScroll.apply(this,arguments);this.fireEvent("bodyscroll",b,a)}},createRowElement:function(b,c,d){var f=this,g=f.renderBuffer,a=f.collectData([b],c);a.columns=d;f.tpl.overwrite(g,a);return Ext.fly(g).down(f.getNodeContainerSelector(),true).firstChild},bufferRender:function(a,b){var c=this,d=c.renderBuffer;c.tpl.overwrite(d,c.collectData(a,b));return Ext.Array.toArray(Ext.fly(d).down(c.getNodeContainerSelector(),true).childNodes)},collectData:function(a,c){var b=this;b.rowValues.view=b;b.tableValues.view=b;b.tableValues.rows=a;b.tableValues.columns=null;b.tableValues.viewStartIndex=c;b.tableValues.touchScroll=b.touchScroll;b.tableValues.tableStyle="width:"+b.headerCt.getTableWidth()+"px";return b.tableValues},collectNodes:function(a){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},refreshSize:function(c){var b=this,a=b.getBodySelector();if(a){b.body.attach(b.el.down(a,true))}if(!b.hasLoadingHeight){Ext.suspendLayouts();Ext.view.View.prototype.refreshSize.apply(this,arguments);if(c||(b.hasVariableRowHeight()&&b.dataSource.getCount())){b.grid.updateLayout()}Ext.resumeLayouts(true)}},clearViewEl:function(j){var f=this,c=f.all,a=f.getStore(),b,d,g,h;for(b=c.startIndex;b<=c.endIndex;b++){d=c.item(b,true);f.fireEvent("itemremove",a.getByInternalId(d.getAttribute("data-recordId")),b,d,f)}Ext.view.View.prototype.clearViewEl.call(this);g=Ext.fly(f.getNodeContainer());if(g&&!j){h=f.getTargetEl();if(h.dom!==g.dom){g.destroy()}}},getMaskTarget:function(){var a=this.ownerCt;if(a.ownerLockable){a=a.ownerLockable}return a.getMaskTarget()},statics:{getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},getRecord:function(c){var b=this,a;if(b.store.isDestroyed){return}if(c.isModel){return c}c=b.getNode(c);if(c){if(!b.hasActiveFeature()){a=c.getAttribute("data-recordIndex");if(a){a=parseInt(a,10);if(a>-1){return b.store.data.getAt(a)}}}return b.dataSource.getByInternalId(c.getAttribute("data-recordId"))}},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}return this.all.indexOf(a)},indexInStore:function(a){return a?this.dataSource.indexOf(this.getRecord(a)):-1},renderRows:function(g,f,d,b){var h=this.rowValues,a=g.length,c;h.view=this;h.columns=f;for(c=0;c<a;c++,d++){h.itemClasses.length=h.rowClasses.length=0;this.renderRow(g[c],d,b)}h.view=h.columns=h.record=null},renderColumnSizer:function(b,c){var f=b.columns||this.getGridColumns(),a=f.length,d,h,g;c.push('<colgroup role="presentation">');for(d=0;d<a;d++){h=f[d];g=h.cellWidth?h.cellWidth:Ext.grid.header.Container.prototype.defaultWidth;c.push('<col role="presentation" class="',"x-","grid-cell-",f[d].getItemId(),'" style="width:'+g+'px">')}c.push("</colgroup>")},renderRow:function(h,a,g){var k=this,f=a===-1,j=k.selModel,n=k.rowValues,d=n.itemClasses,c=n.rowClasses,b=k.itemCls,m,l=k.rowTpl;n.rowAttr={};n.record=h;n.recordId=h.internalId;n.recordIndex=k.store.indexOf(h);n.rowIndex=a;n.rowId=k.getRowId(h);n.itemCls=n.rowCls="";if(!n.columns){n.columns=k.ownerCt.getVisibleColumnManager().getColumns()}d.length=c.length=0;if(!f){d[0]=b;if(!k.ownerCt.disableSelection&&j.isRowSelected){if(j.isRowSelected(h)){d.push(k.selectedItemCls)}}if(k.stripeRows&&a%2!==0){d.push(k.altRowCls)}if(k.getRowClass){m=k.getRowClass(h,a,null,k.dataSource);if(m){c.push(m)}}}if(g){l.applyOut(n,g,k.tableValues)}else{return l.apply(n,k.tableValues)}},renderCell:function(d,h,g,o,k,f){var m=this,b,j=m.selModel,l=m.cellValues,c=l.classes,a=h.data[d.dataIndex],p=m.cellTpl,q,n;l.record=h;l.column=d;l.recordIndex=g;l.rowIndex=o;l.columnIndex=k;l.cellIndex=k;l.align=d.align;l.innerCls=d.innerCls;l.tdCls=l.tdStyle=l.tdAttr=l.style="";l.unselectableAttr=m.enableTextSelection?"":'unselectable="on"';c[1]=d.getCellId();n=2;if(d.renderer&&d.renderer.call){b=m.ownerCt.columnManager.getHeaderIndex(d);q=d.renderer.call(d.usingDefaultRenderer?d:d.scope||m.ownerCt,a,l,h,g,b,m.dataSource,m);if(l.css){h.cssWarning=true;l.tdCls+=" "+l.css;l.css=null}if(l.tdCls){c[n++]=l.tdCls}}else{q=a}l.value=(q==null||q==="")?d.emptyCellText:q;if(d.tdCls){c[n++]=d.tdCls}if(m.markDirty&&h.isModified(d.dataIndex)){c[n++]=m.dirtyCls}if(d.isFirstVisible){c[n++]=m.firstCls}if(d.isLastVisible){c[n++]=m.lastCls}if(!m.enableTextSelection){c[n++]=m.unselectableCls}if(j&&j.isCellModel&&j.isCellSelected(m,g,d)){c[n++]=(m.selectedCellCls)}c.length=n;l.tdCls=c.join(" ");p.applyOut(l,f);l.column=null},getRow:function(a){var b;if((!a&&a!==0)||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return Ext.fly(a).down(this.rowSelector,true)}if(Ext.isNumber(a)){b=this.all.item(a);return b&&b.down(this.rowSelector,true)}if(a.isModel){return this.getRowByRecord(a)}b=Ext.fly(a);if(b.is(this.itemSelector)){return this.getRowFromItem(b)}return b.findParent(this.rowSelector,this.getTargetEl())},getRowId:function(a){return this.id+"-record-"+a.internalId},constructRowId:function(a){return this.id+"-record-"+a},getNodeById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,false)},getRowById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,true)},getNodeByRecord:function(a){return this.retrieveNode(this.getRowId(a),false)},getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),true)},getRowFromItem:function(c){var d=Ext.getDom(c).tBodies[0].childNodes,a=d.length,b;for(b=0;b<a;b++){if(Ext.fly(d[b]).is(this.rowSelector)){return d[b]}}},retrieveNode:function(c,b){var a=this.el.getById(c,true);if(b&&a){return Ext.fly(a).down(this.rowSelector,true)}return a},updateIndexes:Ext.emptyFn,bodySelector:"div.x-grid-item-container",nodeContainerSelector:"div.x-grid-item-container",itemSelector:"table.x-grid-item",rowSelector:"tr.x-grid-row",cellSelector:"td.x-grid-cell",sizerSelector:".x-grid-cell",innerSelector:"div.x-grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(b){var a=this.sizerSelector+"-"+b.getItemId();return"td"+a+",col"+a},getItemSelector:function(){return this.itemSelector},getCellSelector:function(a){return a?a.getCellSelector():this.cellSelector},getCellInnerSelector:function(a){return this.getCellSelector(a)+" "+this.innerSelector},addRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).addCls(a)}},removeRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).removeCls(a)}},onRowSelect:function(b){var a=this;a.addItemCls(b,a.selectedItemCls);if(Ext.isIE8){a.repaintBorder(b+1)}},onRowDeselect:function(b){var a=this;a.removeItemCls(b,a.selectedItemCls);if(Ext.isIE8){a.repaintBorder(b+1)}},onCellSelect:function(b){var a=this.getCellByPosition(b);if(a){a.addCls(this.selectedCellCls)}},onCellDeselect:function(b){var a=this.getCellByPosition(b,true);if(a){Ext.fly(a).removeCls(this.selectedCellCls)}},getCellInclusive:function(a,b){if(a){var c=this.getRow(a.row),d=this.ownerCt.getColumnManager().getHeaderAtIndex(a.column);if(d&&c){return Ext.fly(c).down(this.getCellSelector(d),b)}}return false},getCellByPosition:function(a,c){if(a){var b=a.view||this,d=b.getRow(a.record||a.row),f=a.column.isColumn?a.column:b.getVisibleColumnManager().getHeaderAtIndex(a.column);if(f&&d){return Ext.fly(d).down(b.getCellSelector(f),c)}}return false},onRowFocus:function(d,b,a){var c=this;if(b){c.addItemCls(d,c.focusedItemCls);if(!a){c.focusRow(d)}}else{c.removeItemCls(d,c.focusedItemCls)}if(Ext.isIE8){c.repaintBorder(d+1)}},focusRow:function(d,a){var c=this,b=c.getFocusTask();if(a){b.delay(Ext.isNumber(a)?a:10,c.focusRow,c,[d,false]);return}b.cancel();if(c.isVisible(true)){c.getNavigationModel().setPosition(c.getRecord(d))}},focusNode:function(b,a){this.focusRow(b,a)},scrollRowIntoView:function(b,a){b=this.getRow(b);if(b){this.scrollElIntoView(b,false,a)}},focusCell:function(b,c){var f=this,a,d=f.getFocusTask();if(c){d.delay(Ext.isNumber(c)?c:10,f.focusCell,f,[b,false]);return}d.cancel();if(f.isVisible(true)&&(a=f.getCellByPosition(b))){f.getNavigationModel().setPosition(b)}},getLastFocused:function(){var b=this,a=b.lastFocused;if(a&&a.record&&a.column){if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1){return a}}},scrollCellIntoView:function(a,b){if(a.isCellContext){a=this.getCellByPosition(a)}if(a){this.scrollElIntoView(a,null,b)}},scrollElIntoView:function(b,d,a){var c=this,f=c.scrollManager;if(f){f.scrollIntoView(b,d,a)}else{Ext.fly(b).scrollIntoView(c.el,d,a)}},syncRowHeights:function(f,b){f.style.height=b.style.height="";var d=this,g=d.rowTpl,c=f.offsetHeight,a=b.offsetHeight;if(c!==a){while(g){if(g.syncRowHeights){if(g.syncRowHeights(f,b)===false){break}}g=g.nextTpl}c=f.offsetHeight;a=b.offsetHeight;if(c!==a){f=Ext.fly(f).down(d.rowSelector,true)||f;b=Ext.fly(b).down(d.rowSelector,true)||b;if(f&&b){f.style.height=b.style.height="";c=f.offsetHeight;a=b.offsetHeight;if(c>a){Ext.fly(f).setHeight(c);Ext.fly(b).setHeight(c)}else{if(a>c){Ext.fly(f).setHeight(a);Ext.fly(b).setHeight(a)}}}}}},handleUpdate:function(l,g,o,x){var F=this,r=F.rowTpl,D,q,n,h,p,z,C,j,u,m,G,c,f,t=[],B,y,v=F.variableRowHeight,k,s=0,b,d,w,E,a,A=F.ownerCt;if(F.viewReady){q=F.getNodeByRecord(g);if(q){u=F.overItemCls;m=F.focusedItemCls;G=F.selectedItemCls;c=F.ownerCt.getVisibleColumnManager().getColumns();for(y=0,B=c.length;y<B;y++){f=c[y];k=F.shouldUpdateCell(g,f,x);if(k){s=s|k;t[t.length]=f;v=v||f.variableRowHeight}}if(!F.getRowFromItem(q)||(s&1)||(q.tBodies[0].childNodes.length>1)){D=Ext.fly(q,"_internal");h=F.createRowElement(g,F.dataSource.indexOf(g),t);if(D.hasCls(u)){Ext.fly(h).addCls(u)}if(D.hasCls(m)){Ext.fly(h).addCls(m)}if(D.hasCls(G)){Ext.fly(h).addCls(G)}if(Ext.isIE9m&&q.mergeAttributes){q.mergeAttributes(h,true)}else{p=h.attributes;z=p.length;for(j=0;j<z;j++){C=p[j].name;if(C!=="id"){q.setAttribute(C,p[j].value)}}}if(c.length&&(n=F.getRow(q))){F.updateColumns(n,Ext.fly(h).down(F.rowSelector,true),t)}while(r){if(r.syncContent){if(r.syncContent(q,h,x?t:null)===false){break}}r=r.nextTpl}}else{if(!F.cellFly){F.cellFly=new Ext.dom.Fly()}for(y=0,B=t.length;y<B;y++){f=t[y];d=f.dataIndex;w=g.get(d);b=q.firstChild.firstChild.childNodes[f.getVisibleIndex()];if(F.markDirty){F.cellFly.attach(b);if(g.isModified(f.dataIndex)){F.cellFly.addCls(F.dirtyCls)}else{F.cellFly.removeCls(F.dirtyCls)}}E=f.usingDefaultRenderer;a=E?f:f.scope;if(f.updater){Ext.callback(f.updater,a,[b,w,g,F,F.dataSource],0,f,A)}else{if(f.renderer){w=Ext.callback(f.renderer,a,[w,null,g,0,0,F.dataSource,F],0,f,A)}if(f.producesHTML){b.childNodes[0].innerHTML=w}else{b.childNodes[0].childNodes[0].data=w}}if(F.highlightClass){Ext.fly(b).addCls(F.highlightClass);if(!F.changedCells){F.self.prototype.changedCells=[];F.prototype.clearChangedTask=new Ext.util.DelayedTask(F.clearChangedCells,F.prototype);F.clearChangedTask.delay(F.unhighlightDelay)}F.changedCells.push({cell:b,cls:F.highlightClass,expires:Ext.Date.now()+1000})}}}if(v){Ext.suspendLayouts()}F.fireEvent("itemupdate",g,F.store.indexOf(g),q);if(v){F.refreshSize();Ext.resumeLayouts(true)}}}},clearChangedCells:function(){var d=this,b=Ext.Date.now(),f;for(var c=0,a=d.changedCells.length;c<a;){f=d.changedCells[c];if(f.expires<=b){Ext.fly(f.cell).removeCls(f.highlightClass);Ext.Array.erase(d.changedCells,c,1);a--}else{break}}if(a){d.clearChangedTask.delay(d.unhighlightDelay)}},updateColumns:function(k,l,m){var j=this,b,a,h,c,o=m.length,n,d,p,g,f=j.getCellSelector();if(k.mergeAttributes){k.mergeAttributes(l,true)}else{b=l.attributes;a=b.length;for(c=0;c<a;c++){h=b[c].name;if(h!=="id"){k.setAttribute(h,b[c].value)}}}for(n=0;n<o;n++){d=m[n];f=j.getCellSelector(d);p=Ext.fly(k).selectNode(f);g=Ext.fly(l).selectNode(f);Ext.fly(p).syncContent(g)}},shouldUpdateCell:function(b,f,d){if(!f.preventUpdate){if(f.hasCustomRenderer){return 1}if(d){var a=d.length,c,g;for(c=0;c<a;++c){g=d[c];if(g===f.dataIndex||g===b.idProperty){return 2}}}else{return 2}}return 0},refresh:function(){var c=this,d,b=c.grid.containsFocus,a=c.getNavigationModel();Ext.view.View.prototype.refresh.apply(this,arguments);if(b){a.setPosition(a.getLastFocused(),null,null,null,true)}c.headerCt.setSortState();if(c.touchScroll&&c.el&&!c.all.getCount()&&c.headerCt&&c.headerCt.tooNarrow){d=c.scrollManager.scroller.getSize();d.x=c.headerCt.getTableWidth();c.scrollManager.scroller.setSize(d);c.scrollManager.refresh()}},processItemEvent:function(d,s,l,r){var w=this,n=w.self,v=n.EventMap,f=r.type,j,a,o,h=w.features,q=h.length,p,k,m,g,c,b=w.getNavigationModel(),u,t=r.position=w.eventPosition||(w.eventPosition=new Ext.grid.CellContext());if(Ext.isIE&&f==="mouseup"&&!r.within(w.el)){return false}if(w.indexInStore(s)!==-1){j=t.rowElement=Ext.fly(s).down(w.rowSelector,true);if(Ext.String.startsWith(r.type,"key")&&(u=b.getPosition())){a=(a=b.getCell())&&a.dom;c=u.column}if(!a){a=r.getTarget(w.getCellSelector(),j)}f=n.TouchEventMap[f]||f;if(a){if(!a.parentNode){return false}if(!c){c=w.getHeaderByCell(a)}k=w.ownerCt.getColumnManager().getHeaderIndex(c)}else{k=-1}t.setAll(w,l,c?w.getVisibleColumnManager().getHeaderIndex(c):-1,d,c);t.cellElement=a;m=w.fireEvent("uievent",f,w,a,l,k,r,d,j);if((m===false||Ext.view.View.prototype.processItemEvent.apply(this,arguments)===false)){o=w.getSelectionModel();if(o.onVetoUIEvent){o.onVetoUIEvent(f,w,a,l,k,r,d,j)}return false}for(p=0;p<q;++p){g=h[p];if(g.wrapsItem){if(g.vetoEvent(d,j,l,r)===false){w.processSpecialEvent(r);return false}}}if(a&&f!=="mouseover"&&f!=="mouseout"){m=!((w["onBeforeCell"+v[f]](a,k,d,j,l,r)===false)||(w.fireEvent("beforecell"+f,w,a,k,d,j,l,r)===false)||(w["onCell"+v[f]](a,k,d,j,l,r)===false)||(w.fireEvent("cell"+f,w,a,k,d,j,l,r)===false))}if(m!==false){m=w.fireEvent("row"+f,w,d,j,l,r)}return m}else{this.processSpecialEvent(r);return false}},processSpecialEvent:function(h){var l=this,c=l.features,k=c.length,m=h.type,d,n,f,g,b,j,a=l.ownerCt;Ext.view.View.prototype.processSpecialEvent.apply(this,arguments);if(m=="mouseover"||m=="mouseout"){return}m=l.self.TouchEventMap[m]||m;for(d=0;d<k;d++){n=c[d];if(n.hasFeatureEvent){g=h.getTarget(n.eventSelector,l.getTargetEl());if(g){f=n.eventPrefix;b=n.getFireEventArgs("before"+f+m,l,g,h);j=n.getFireEventArgs(f+m,l,g,h);if((l.fireEvent.apply(l,b)===false)||(a.fireEvent.apply(a,b)===false)||(l.fireEvent.apply(l,j)===false)||(a.fireEvent.apply(a,j)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(a){this.autoSizeColumn(a)},autoSizeColumn:function(a){if(Ext.isNumber(a)){a=this.getGridColumns[a]}if(a){if(a.isGroupHeader){a.autoSize();return}delete a.flex;a.setWidth(this.getMaxContentWidth(a))}},getMaxContentWidth:function(d){var g=this,l=g.el.query(d.getCellInnerSelector()),b=d.getWidth(),c=0,f=l.length,a=g.body.select(g.getColumnSizerSelector(d)),j=Math.max,h=0,k;if(f>0){if(Ext.supports.ScrollWidthInlinePaddingBug){h+=g.getCellPaddingAfter(l[0])}if(g.columnLines){h+=Ext.fly(l[0].parentNode).getBorderWidth("lr")}}a.setWidth(1);d.titleEl.setStyle("text-overflow","clip");k=d.textEl.dom.offsetWidth+d.titleEl.getPadding("lr");d.titleEl.setStyle("text-overflow","");for(;c<f;c++){k=j(k,l[c].scrollWidth)}k+=h;k=j(k,40);a.setWidth(b);return k},getPositionByEvent:function(f){var d=this,b=f.getTarget(d.cellSelector),c=f.getTarget(d.itemSelector),a=d.getRecord(c),g=d.getHeaderByCell(b);return d.getPosition(a,g)},getHeaderByCell:function(a){if(a){return this.ownerCt.getVisibleColumnManager().getHeaderById(a.getAttribute("data-columnId"))}return false},walkCells:function(m,n,j,o,b,q){if(!m){return false}var k=this,r=typeof m.row==="number"?m.row:m.rowIdx,f=typeof m.column==="number"?m.column:m.colIdx,l=k.dataSource.getCount(),d=k.ownerCt.getVisibleColumnManager(),a=d.getHeaderIndex(d.getFirst()),h=d.getHeaderIndex(d.getLast()),p=r,g=f,c=d.getHeaderAtIndex(f);if(!c||c.hidden||!l){return false}j=j||{};n=n.toLowerCase();switch(n){case"right":if(f===h){if(o||r===l-1){return false}if(!j.ctrlKey){p=k.walkRows(r,1);if(p!==r){g=a}}}else{if(!j.ctrlKey){g=d.getHeaderIndex(d.getNextSibling(c))}else{g=h}}break;case"left":if(f===a){if(o||r===0){return false}if(!j.ctrlKey){p=k.walkRows(r,-1);if(p!==r){g=h}}}else{if(!j.ctrlKey){g=d.getHeaderIndex(d.getPreviousSibling(c))}else{g=a}}break;case"up":if(r===0){return false}else{if(!j.ctrlKey){p=k.walkRows(r,-1)}else{p=k.walkRows(-1,1)}}break;case"down":if(r===l-1){return false}else{if(!j.ctrlKey){p=k.walkRows(r,1)}else{p=k.walkRows(l,-1)}}break}if(b&&b.call(q||k,{row:p,column:g})!==true){return false}g=d.getHeaderAtIndex(g);return new Ext.grid.CellContext(k).setPosition(p,g)},walkRows:function(j,a){var d=this,h=d.dataSource,f=0,l=j,b,c=(a<0)?0:(h.isBufferedStore?h.getTotalCount():h.getCount())-1,g=c?1:-1,k=j;do{if(c?k>=c:k<=c){return l||c}k+=g;if((b=Ext.fly(d.getRow(k)))&&b.isVisible(true)){f+=g;l=k}}while(f!==a);return k},walkRecs:function(b,a){var h=this,l=h.dataSource,j=0,m=b,c,f=(a<0)?0:(l.isBufferedStore?l.getTotalCount():l.getCount())-1,k=f?1:-1,g=l.indexOf(b),d;do{if(f?g>=f:g<=f){return m}g+=k;d=l.getAt(g);if(!d.isCollapsedPlaceholder&&(c=Ext.fly(h.getNodeByRecord(d)))&&c.isVisible(true)){j+=k;m=d}}while(j!==a);return m},getFirstVisibleRowIndex:function(){var c=this,b=(c.dataSource.isBufferedStore?c.dataSource.getTotalCount():c.dataSource.getCount()),a=c.indexOf(c.all.first())-1;do{a+=1;if(a===b){return}}while(!Ext.fly(c.getRow(a)).isVisible(true));return a},getLastVisibleRowIndex:function(){var b=this,a=b.indexOf(b.all.last());do{a-=1;if(a===-1){return}}while(!Ext.fly(b.getRow(a)).isVisible(true));return a},getHeaderCt:function(){return this.headerCt},getPosition:function(a,b){return new Ext.grid.CellContext(this).setPosition(a,b)},beforeDestroy:function(){var a=this;if(a.rendered){a.el.clearListeners()}Ext.view.View.prototype.beforeDestroy.apply(this,arguments)},onDestroy:function(){var d=this,c=d.featuresMC,a,b;if(c){for(b=0,a=c.getCount();b<a;++b){c.getAt(b).destroy()}}d.featuresMC=null;Ext.view.View.prototype.onDestroy.apply(this,arguments)},onReplace:function(b,f,a,d){var c=this,g=c.bufferedRenderer;if(c.rendered&&g){g.onReplace(b,f,a,d)}else{Ext.view.View.prototype.onReplace.apply(this,arguments);c.doStripeRows(f)}},onAdd:function(b,a,c){var d=this,f=d.bufferedRenderer;if(d.rendered&&f){f.onReplace(b,c,[],a)}else{Ext.view.View.prototype.onAdd.apply(this,arguments);d.setPendingStripe(c)}},onRemove:function(b,a,c){var d=this,f=d.bufferedRenderer;if(d.rendered&&f){f.onReplace(b,c,a,[])}else{Ext.view.View.prototype.onRemove.apply(this,arguments);d.setPendingStripe(c)}},onDataRefresh:function(){var b=this,a=b.ownerCt;if(a&&a.isCollapsingOrExpanding===2){a.on("expand",b.onDataRefresh,b,{single:true});return}if(b.bufferedRenderer){b.all.clear();b.bufferedRenderer.onStoreClear()}Ext.view.View.prototype.onDataRefresh.call(this)},getViewRange:function(){var a=this;if(a.bufferedRenderer){return a.bufferedRenderer.getViewRange()}return Ext.view.View.prototype.getViewRange.call(this)},setPendingStripe:function(a){var b=this.stripeOnUpdate;if(b===null){b=a}else{b=Math.min(b,a)}this.stripeOnUpdate=b},onEndUpdate:function(){var a=this,b=a.stripeOnUpdate;if(b||b===0){a.doStripeRows(b);a.stripeOnUpdate=null}Ext.view.View.prototype.onEndUpdate.apply(this,arguments)},doStripeRows:function(b,a){var d=this,f,h,c,g;if(d.rendered&&d.stripeRows){f=d.getNodes(b,a);for(c=0,h=f.length;c<h;c++){g=f[c];g.className=g.className.replace(d.rowClsRe," ");b++;if(b%2===0){g.className+=(" "+d.altRowCls)}}}},hasActiveFeature:function(){return(this.isGrouping&&this.store.isGrouped())||this.isRowWrapped},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding("r")},privates:{refreshScroll:function(){var a=this,b=a.bufferedRenderer;if(b){b.stretchView(a,b.getScrollHeight(true))}else{Ext.view.View.prototype.refreshScroll.call(this)}}}},1,["tableview"],["component","box","dataview","tableview"],{component:true,box:true,dataview:true,tableview:true},["widget.tableview"],0,[Ext.view,"Table"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name==a&&c.getFormId()==b})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl"],fieldSubTpl:['<div class="{wrapInnerCls} {noBoxLabelCls}" role="presentation">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" data-ref="inputEl" role="{role}" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}" autocomplete="off" hidefocus="true" />','<tpl if="boxLabel && !labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:false,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-wrap-inner-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:false,ariaRole:"checkbox",onRe:/^on$/i,inputCls:"x-form-cb",initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}Ext.form.field.Base.prototype.initComponent.apply(this,arguments);a.getManager().add(a)},initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}return Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(a){var c=this,b=c.boxLabel,f=c.boxLabelAlign,d=b&&f==="before";return Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{disabled:c.readOnly||c.disabled,wrapInnerCls:c.wrapInnerCls,boxLabel:b,boxLabelCls:c.boxLabelCls,boxLabelAlign:f,labelAlignedBefore:d,afterLabelCls:d?c.afterLabelCls:"",noBoxLabelCls:!b?c.noBoxLabelCls:"",role:c.ariaRole})},initEvents:function(){var a=this;Ext.form.field.Base.prototype.initEvents.call(this);a.mon(a.inputEl,"click",a.onBoxClick,a,{translate:false})},setBoxLabel:function(a){var b=this;b.boxLabel=a;if(b.rendered){b.boxLabelEl.setHtml(a)}},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(!this.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(b,a){return(b===true||b==="true"||b==="1"||b===1||(((Ext.isString(b)||Ext.isNumber(b))&&a)?b==a:this.onRe.test(b)))},setRawValue:function(c){var b=this,d=b.inputEl,a=b.isChecked(c,b.inputValue);if(d){b[a?"addCls":"removeCls"](b.checkedCls)}b.checked=b.rawValue=a;if(!b.duringSetValue){b.lastValue=a}return a},setValue:function(g){var f=this,c,b,a,d;if(Ext.isArray(g)){c=f.getManager().getByName(f.name,f.getFormId()).items;a=c.length;for(b=0;b<a;++b){d=c[b];d.setValue(Ext.Array.contains(g,d.inputValue))}}else{f.duringSetValue=true;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete f.duringSetValue}return f},valueToRaw:Ext.identityFn,onChange:function(b,a){var d=this,c=d.handler;Ext.callback(d.handler,d.scope,[d,b],0,d);Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(d.reference&&d.publishState){d.publishState("checked",b)}},resetOriginalValue:function(b){var g=this,d,f,a,c;if(!b){d=g.getManager().getByName(g.name,g.getFormId()).items;a=d.length;for(c=0;c<a;++c){f=d[c];if(f!==g){d[c].resetOriginalValue(true)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this);this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;Ext.form.field.Base.prototype.onEnable.call(this);if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.disabled=!!c||a.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var b=this,a;if(!b.formId){a=b.up("form");if(a){b.formId=a.id}}return b.formId}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));(Ext.cmd.derive("Ext.tree.View",Ext.view.Table,{isTreeView:true,loadingCls:"x-grid-tree-loading",expandedCls:"x-grid-tree-node-expanded",leafCls:"x-grid-tree-node-leaf",expanderSelector:".x-tree-expander",checkboxSelector:".x-tree-checkbox",expanderIconOverCls:"x-tree-expander-over",nodeAnimWrapCls:"x-tree-animator-wrap",ariaRole:"tree",loadMask:false,rootVisible:true,expandDuration:250,collapseDuration:250,toggleOnDblClick:true,stripeRows:false,uiFields:["expanded","loaded","checked","expandable","leaf","icon","iconCls","loading","qtip","qtitle"],treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(c){var b=c.record,a=c.view;c.rowAttr["data-qtip"]=b.get("qtip")||"";c.rowAttr["data-qtitle"]=b.get("qtitle")||"";if(b.isExpanded()){c.rowClasses.push(a.expandedCls)}if(b.isLeaf()){c.rowClasses.push(a.leafCls)}if(b.isLoading()){c.rowClasses.push(a.loadingCls)}}}],initComponent:function(){var a=this;if(a.bufferedRenderer){a.animate=false}else{if(a.initialConfig.animate===undefined){a.animate=Ext.enableFx}}a.store=a.panel.getStore();a.onRootChange(a.store.getRoot());a.animQueue={};a.animWraps={};Ext.view.Table.prototype.initComponent.apply(this,arguments);a.store.setRootVisible(a.rootVisible);a.addRowTpl(Ext.XTemplate.getTpl(a,"treeRowTpl"))},onFillComplete:function(f,d,b){var c=this,a=c.store,g=a.indexOf(b[0]);d.triggerUIUpdate();if(!b.length||g===-1){return}c.onAdd(c.store,b,g);c.refreshPartner()},onBeforeSort:function(){this.store.suspendEvents()},onSort:function(a){if(a.isStore){this.store.resumeEvents();this.refresh();this.refreshPartner()}},refreshPartner:function(){var a=this.lockingPartner;if(a){a.refresh()}},getMaskStore:function(){return this.panel.getStore()},afterRender:function(){var a=this;Ext.view.Table.prototype.afterRender.apply(this,arguments);a.el.on({scope:a,delegate:a.expanderSelector,mouseover:a.onExpanderMouseOver,mouseout:a.onExpanderMouseOut,click:{delegate:a.checkboxSelector,fn:a.onCheckboxChange,scope:a}})},afterComponentLayout:function(){var b=this,a=b.stretcher,c=b.scrollManager;Ext.view.Table.prototype.afterComponentLayout.apply(this,arguments);if(a){a.setWidth((this.getWidth()-Ext.getScrollbarSize().width))}if(c){c.refresh()}},processUIEvent:function(a){if(a.getTarget("."+this.nodeAnimWrapCls,this.el)){return false}return Ext.view.Table.prototype.processUIEvent.apply(this,arguments)},setRootNode:function(b,a){if(!a){this.store.setNode(b)}this.node=b},onCheckboxChange:function(d,a){var c=this,b=d.getTarget(c.getItemSelector(),c.getTargetEl());if(b){c.onCheckChange(c.getRecord(b))}},onCheckChange:function(a){var b=a.get("checked");if(Ext.isBoolean(b)){b=!b;a.set("checked",b);this.fireEvent("checkchange",a,b)}},getChecked:function(){var a=[];this.node.cascadeBy(function(b){if(b.get("checked")){a.push(b)}});return a},isItemChecked:function(a){return a.get("checked")},createAnimWrap:function(a,b){var f=this,d=f.getNode(a),c;c=Ext.fly(d).insertSibling({role:"presentation",tag:"div",cls:f.nodeAnimWrapCls},"after");return{record:a,node:d,el:c,expanding:false,collapsing:false,animateEl:c,targetEl:c}},getAnimWrap:function(d,a){if(!this.animate){return null}var b=this.animWraps,c=b[d.internalId];if(a!==false){while(!c&&d){d=d.parentNode;if(d){c=b[d.internalId]}}}return c},doAdd:function(c,h){var j=this,a=j.bufferRender(c,h,true),f=c[0],k=f.parentNode,l=j.all,n,d=j.getAnimWrap(k),m,b,g;if(!d||!d.expanding){return Ext.view.Table.prototype.doAdd.apply(this,arguments)}k=d.record;m=d.targetEl;b=m.dom.childNodes;g=b.length;n=h-j.indexInStore(k)-1;if(!g||n>=g){m.appendChild(a,true)}else{Ext.fly(b[n]).insertSibling(a,"before",true)}l.insert(h,a);return a},onRemove:function(g,a,b){var d=this,f,c;if(d.viewReady){f=d.store.getCount()===0;if(d.bufferedRenderer){return Ext.view.Table.prototype.onRemove.apply(this,arguments)}if(f){d.refresh()}else{for(c=a.length-1,b+=c;c>=0;--c,--b){d.doRemove(a[c],b)}}if(d.hasListeners.itemremove){for(c=a.length-1,b+=c;c>=0;--c,--b){d.fireEvent("itemremove",a[c],b,d)}}}},doRemove:function(a,c){var h=this,d=h.all,b=h.getAnimWrap(a),g=d.item(c),f=g?g.dom:null;if(!f||!b||!b.collapsing){return Ext.view.Table.prototype.doRemove.apply(this,arguments)}b.targetEl.dom.insertBefore(f,b.targetEl.dom.firstChild);d.removeElement(c)},onBeforeExpand:function(d,b,c){var f=this,a;if(f.rendered&&f.all.getCount()&&f.animate){if(f.getNode(d)){a=f.getAnimWrap(d,false);if(!a){a=f.animWraps[d.internalId]=f.createAnimWrap(d);a.animateEl.setHeight(0)}else{if(a.collapsing){a.targetEl.select(f.itemSelector).destroy()}}a.expanding=true;a.collapsing=false}}},onExpand:function(j){var h=this,f=h.animQueue,a=j.getId(),c=h.getNode(j),g=c?h.indexOf(c):-1,d,b,k;if(h.singleExpand){h.ensureSingleExpand(j)}if(g===-1){return}d=h.getAnimWrap(j,false);if(!d){j.isExpandingOrCollapsing=false;h.fireEvent("afteritemexpand",j,g,c);h.refreshSize();return}b=d.animateEl;k=d.targetEl;b.stopAnimation();f[a]=true;b.dom.style.height="0px";b.animate({from:{height:0},to:{height:k.dom.scrollHeight},duration:h.expandDuration,listeners:{afteranimate:function(){var l=k.dom.childNodes;if(l.length){d.el.insertSibling(l,"before",true)}d.el.destroy();delete h.animWraps[d.record.internalId];delete f[a];if(!h.isDestroyed){h.refreshSize()}}},callback:function(){j.isExpandingOrCollapsing=false;h.fireEvent("afteritemexpand",j,g,c)}});d.isAnimating=true},onBeforeCollapse:function(f,b,c,h,d){var g=this,a;if(g.rendered&&g.all.getCount()){if(g.animate){if(f.isVisible()){a=g.getAnimWrap(f);if(!a){a=g.animWraps[f.internalId]=g.createAnimWrap(f,c)}else{if(a.expanding){a.targetEl.select(this.itemSelector).destroy()}}a.expanding=false;a.collapsing=true;a.callback=h;a.scope=d}}else{g.onCollapseCallback=h;g.onCollapseScope=d}}},onCollapse:function(d){var g=this,a=g.animQueue,j=d.getId(),f=g.getNode(d),c=f?g.indexOf(f):-1,b=g.getAnimWrap(d),h;if(!g.all.getCount()||!d.isVisible()){return}if(!b){d.isExpandingOrCollapsing=false;g.fireEvent("afteritemcollapse",d,c,f);g.refreshSize();Ext.callback(g.onCollapseCallback,g.onCollapseScope);g.onCollapseCallback=g.onCollapseScope=null;return}h=b.animateEl;a[j]=true;h.stopAnimation();h.animate({to:{height:0},duration:g.collapseDuration,listeners:{afteranimate:function(){b.el.destroy();delete g.animWraps[b.record.internalId];delete a[j];if(!g.isDestroyed){g.refreshSize()}}},callback:function(){d.isExpandingOrCollapsing=false;g.fireEvent("afteritemcollapse",d,c,f);Ext.callback(b.callback,b.scope);b.callback=b.scope=null}});b.isAnimating=true},isAnimating:function(a){return !!this.animQueue[a.getId()]},expand:function(d,c,h,f){var g=this,b=!!g.animate,a;if(!b||!d.isExpandingOrCollapsing){if(!d.isLeaf()){d.isExpandingOrCollapsing=b}Ext.suspendLayouts();a=d.expand(c,h,f);Ext.resumeLayouts(true);return a}},collapse:function(c,b,g,d){var f=this,a=!!f.animate;if(!a||!c.isExpandingOrCollapsing){if(!c.isLeaf()){c.isExpandingOrCollapsing=a}return c.collapse(b,g,d)}},toggle:function(b,a,d,c){if(b.isExpanded()){this.collapse(b,a,d,c)}else{this.expand(b,a,d,c)}},onItemDblClick:function(a,f,c){var d=this,b=d.editingPlugin;Ext.view.Table.prototype.onItemDblClick.apply(this,arguments);if(d.toggleOnDblClick&&a.isExpandable()&&!(b&&b.clicksToEdit===2)){d.focusRow(a);d.toggle(a)}},onBeforeItemMouseDown:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)){return false}return Ext.view.Table.prototype.onBeforeItemMouseDown.apply(this,arguments)},onItemClick:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)&&a.isExpandable()){this.focusRow(a);this.toggle(a,d.ctrlKey);return false}return Ext.view.Table.prototype.onItemClick.apply(this,arguments)},onExpanderMouseOver:function(b,a){b.getTarget(this.cellSelector,10,true).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(b,a){b.getTarget(this.cellSelector,10,true).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){var b=this,a=Ext.apply(Ext.view.Table.prototype.getStoreListeners.call(this),{rootchange:b.onRootChange,fillcomplete:b.onFillComplete});if(!this.getStore().remoteSort){Ext.apply(a,{beforesort:b.onBeforeSort,sort:b.onSort})}return a},onBindStore:function(a,c,d,f){var b=f&&f.getRootNode(),g=a&&a.getRootNode();Ext.view.Table.prototype.onBindStore.apply(this,arguments);if(g!==b){this.onRootChange(g,b)}},onRootChange:function(c,a){var b=this;if(a){b.rootListeners.destroy();b.rootListeners=null}if(c){b.rootListeners=c.on({beforeexpand:b.onBeforeExpand,expand:b.onExpand,beforecollapse:b.onBeforeCollapse,collapse:b.onCollapse,destroyable:true,scope:b})}},ensureSingleExpand:function(b){var a=b.parentNode;if(a){a.eachChild(function(c){if(c!==b&&c.isExpanded()){c.collapse()}})}},shouldUpdateCell:function(b,f,d){if(d){var c=0,a=d.length;for(;c<a;++c){if(Ext.Array.contains(this.uiFields,d[c])){return true}}}return Ext.view.Table.prototype.shouldUpdateCell.apply(this,arguments)}},0,["treeview"],["component","box","dataview","tableview","treeview"],{component:true,box:true,dataview:true,tableview:true,treeview:true},["widget.treeview"],0,[Ext.tree,"View"],0));(Ext.cmd.derive("Ext.selection.RowModel",Ext.selection.DataViewModel,{enableKeyNav:true,isRowModel:true,onUpdate:function(b){var d=this,a=d.view,c;if(a&&d.isSelected(b)){c=a.indexOf(b);a.onRowSelect(c);if(b===d.lastFocused){a.onRowFocus(c,true)}}},getRowsVisible:function(){var f=false,a=this.view,d=a.all.first(),b,c;if(d){b=d.getHeight();c=a.el.getHeight();f=Math.floor(c/b)}return f},onSelectChange:function(g,c,l,a){var j=this,m=j.views||[j.view],d=m.length,b,h=c?"select":"deselect",f,k;if((l||j.fireEvent("before"+h,j,g,b))!==false&&a()!==false){for(f=0;f<d;f++){k=m[f];b=k.indexOf(g);if(b!==-1){if(c){k.onRowSelect(b,l)}else{k.onRowDeselect(b,l)}}}if(!l){j.fireEvent(h,j,g,b)}}},onLastFocusChanged:function(h,c,b){var a=this.views||[this.view],g=a.length,f,d=0;if(h&&g){f=a[0].indexOf(h);if(f!==-1){for(;d<g;d++){a[d].onRowFocus(f,false,true)}}}if(c&&g){f=a[0].indexOf(c);if(f!==-1){for(d=0;d<g;d++){a[d].onRowFocus(f,true,b)}}}},onEditorTab:function(d,j){var f=this,c=d.context.view,b=d.getActiveRecord(),a=d.context,h=j.shiftKey?"left":"right",g;do{g=a;a=c.walkCells(a,h,j,f.preventWrap);if(g&&g.isEqual(a)){return}}while(a&&(!a.column.getEditor(b)||!d.startEditByPosition(a)))},getCurrentPosition:function(){var a=this.selected.getAt(0);if(a){return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(a),0)}},selectByPosition:function(a,c){var b=new Ext.grid.CellContext(this.view);b.setPosition(a.row,a.column);this.select(b.record,c)},selectNext:function(h,c){var g=this,b=g.store,f=g.getSelection(),a=f[f.length-1],d=g.view.indexOf(a)+1,j;if(d===b.getCount()||d===0){j=false}else{g.doSelect(d,h,c);j=true}return j},selectPrevious:function(g,b){var f=this,d=f.getSelection(),a=d[0],c=f.view.indexOf(a)-1,h;if(c<0){h=false}else{f.doSelect(c,g,b);h=true}return h},isRowSelected:function(a){return this.isSelected(a)},isCellSelected:function(b,a,c){return this.isSelected(a)}},0,0,0,0,["selection.rowmodel"],0,[Ext.selection,"RowModel"],0));(Ext.cmd.derive("Ext.selection.TreeModel",Ext.selection.RowModel,{constructor:function(a){var b=this;Ext.selection.RowModel.prototype.constructor.call(this,a);if(b.pruneRemoved){b.pruneRemoved=false;b.pruneRemovedNodes=true}},bindStore:function(a,b){var c=this;Ext.selection.RowModel.prototype.bindStore.call(this,a,b);if(c.store&&c.pruneRemovedNodes){c.view.mon(c.store,{noderemove:c.onNodeRemove,scope:c})}},onNodeRemove:function(b,c,a){if(!a){this.deselectDeletedRecords([c])}}},1,0,0,0,["selection.treemodel"],0,[Ext.selection,"TreeModel"],0));(Ext.cmd.derive("Ext.grid.ColumnLayout",Ext.layout.container.HBox,{type:"gridcolumn",reserveOffset:false,firstHeaderCls:"x-column-header-first",lastHeaderCls:"x-column-header-last",initLayout:function(){var a=this;if(a.scrollbarWidth===undefined){a.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width}a.grid=a.owner.up("tablepanel");a.controllingGrid=a.owner.up("[scrollerOwner]");Ext.layout.container.HBox.prototype.initLayout.call(this)},beginLayout:function(c){var j=this,b=j.owner,a=j.controllingGrid,l=j.grid.view,h=j.getVisibleItems(),g=h.length,d=j.firstHeaderCls,n=j.lastHeaderCls,k=[d,n],f,m;if(!l.scrollFlags.y){j.scrollbarWidth=0}else{delete j.scrollbarWidth}for(f=0;f<g;f++){m=h[f];m.margin=null;m.removeCls(k);if(f===0){m.addCls(d)}if(f===g-1){m.addCls(n)}}j.scrollbarAdjustment=j.scrollbarWidth;Ext.layout.container.HBox.prototype.beginLayout.apply(this,arguments);if(!b.isColumn&&!a.collapsed&&l&&l.rendered&&(c.viewTable=l.body.dom)&&j.scrollbarWidth){c.viewContext=c.context.getCmp(l)}},injectViewContext:function(b,a){if(!this.controllingGrid.collapsed&&a.rendered&&(b.viewTable=a.body.dom)&&this.scrollbarWidth){b.viewContext=b.context.getCmp(a)}},roundFlex:function(a){return Math.floor(a)},calculate:function(j){var h=this,b=h.grid.view,d,a,c,g,f=false;h.viewScrollX=b.getScrollX();Ext.layout.container.HBox.prototype.calculate.apply(this,arguments);if(j.state.parallelDone&&h.owner.isRootHeader){d=j.target.getVisibleGridColumns();a=d.length;for(c=0;c<a;c++){g=j.context.getItem(null,d[c].el);if(!g.lastBox||g.props.width!==g.lastBox.width){(f||(f=[])).push(c)}}j.setProp("columnsChanged",f)}if(j.viewContext&&!j.state.tableHeight){j.state.tableHeight=j.viewTable?j.viewTable.offsetHeight:b.all.sumHeights()}},completeLayout:function(d){var b=this,a=b.owner,c=d.state;Ext.layout.container.HBox.prototype.completeLayout.apply(this,arguments);if(d.viewTable&&!c.flexesCalculated&&!d.flexedItems.length&&a.forceFit&&b.convertWidthsToFlexes(d)){b.cacheFlexes(d);d.invalidate({state:{flexesCalculated:true,tableHeight:d.viewTable.offsetHeight}})}else{delete d.props.columnChanged}},finishedLayout:function(b){var a=this.grid.getView();Ext.layout.container.HBox.prototype.finishedLayout.apply(this,arguments);if(this.viewScrollX&&!this.owner.isColumn&&a.scrollFlags.x&&this.owner.tooNarrow&&this.owner.componentLayoutCounter){this.owner.setScrollX(this.viewScrollX)}},convertWidthsToFlexes:function(a){var g=this,d=0,h=g.sizeModels.calculated,c,f,b,k,j;c=a.childItems;f=c.length;for(b=0;b<f;b++){k=c[b];j=k.target;d+=k.props.width;if(!(j.fixed||j.resizable===false)){j.flex=a.childItems[b].flex=k.props.width;j.width=null;k.widthModel=h}}return d!==a.props.width},getContainerSize:function(g){var f=this,a,d=g.viewContext,c,h,b=d&&d.heightModel.shrinkWrap;if(f.owner.isColumn){a=f.getColumnContainerSize(g)}else{a=Ext.layout.container.HBox.prototype.getContainerSize.apply(this,arguments);if(!a.gotAll){f.done=false;return a}if(f.scrollbarWidth&&!f.controllingGrid.reserveScrollbar&&d){h=d.target.componentLayout.ownerContext;if(!b&&d.target.scrollFlags.y&&(g.flexedItems&&g.flexedItems.length||f.owner.forceFit)&&h){c=d.getProp("height");if(isNaN(c)){f.done=false}else{if(g.state.tableHeight<=c&&d.target.scrollFlags.y){g.state.parallelDone=false;h.invalidate();return a}}}}}if(!b){a.width-=f.scrollbarWidth}return a},getColumnContainerSize:function(g){var j=g.paddingContext.getPaddingInfo(),b=0,f=0,h,d,c,a;if(!g.widthModel.shrinkWrap){++f;c=g.getProp("innerWidth");h=(typeof c=="number");if(h){++b;c-=j.width;if(c<0){c=0}}}if(!g.heightModel.shrinkWrap){++f;a=g.getProp("innerHeight");d=(typeof a=="number");if(d){++b;a-=j.height;if(a<0){a=0}}}return{width:c,height:a,needed:f,got:b,gotAll:b==f,gotWidth:h,gotHeight:d}},publishInnerCtSize:function(f){var d=this,a=d.owner,c=f.state.boxPlan.targetSize,b=f.peek("contentWidth");if((b!=null)&&!a.isColumn){c.width=b;if(a.ownerCt.view.scrollFlags.y){c.width+=d.scrollbarAdjustment}}return Ext.layout.container.HBox.prototype.publishInnerCtSize.apply(this,arguments)}},0,0,0,0,["layout.gridcolumn"],0,[Ext.grid,"ColumnLayout"],0));(Ext.cmd.derive("Ext.plugin.Abstract",Ext.Base,{alternateClassName:"Ext.AbstractPlugin",disabled:false,isPlugin:true,stateEvents:undefined,constructor:function(a){if(a){this.pluginConfig=a;Ext.apply(this,a)}},clonePlugin:function(a){return new this.self(Ext.apply({},a,this.pluginConfig))},setCmp:function(a){this.cmp=a},getCmp:function(){return this.cmp},init:Ext.emptyFn,getState:null,applyState:null,destroy:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true},onClassExtended:function(b,d,a){var c=d.alias;if(c&&!d.ptype){if(Ext.isArray(c)){c=c[0]}b.prototype.ptype=c.split("plugin.")[1]}}},1,0,0,0,0,0,[Ext.plugin,"Abstract",Ext,"AbstractPlugin"],0));(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(a){var b=this;Ext.apply(b,a);b.dragRegion=new Ext.util.Region(0,0,0,0);if(b.el){b.initEl(b.el)}b.mixins.observable.constructor.call(b);if(b.disabled){b.disable()}},initEl:function(b){var c=this,a=c.delegate;c.el=b=Ext.get(b);if(a&&a.isElement){c.handle=a}c.delegate=c.handle?undefined:c.delegate;if(!c.handle){c.handle=b}c.handleListeners={scope:c,delegate:c.delegate,mousedown:c.onMouseDown,dragstart:c.onDragStart};if(!Ext.supports.TouchEvents&&(c.trackOver||c.overCls)){Ext.apply(c.handleListeners,{mouseover:c.onMouseOver,mouseout:c.onMouseOut})}c.mon(c.handle,c.handleListeners)},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var a=this;a.endDrag({});a.clearListeners();a.el=a.handle=null},onMouseOver:function(j,h){var f=this,g,d,c,a,b;if(!f.disabled){if(j.within(j.target,true,true)||f.delegate){g=f.handleCls;f.mouseIsOut=false;if(g){for(c=0,a=f.handleEls.length;c<a;c++){d=f.handleEls[c];b=d.delegateCls;if(!b){b=d.delegateCls=[g,"-",d.region,"-over"].join("")}d.addCls([b,f.overCls])}}f.fireEvent("mouseover",f,j,f.delegate?j.getTarget(f.delegate,h):f.handle)}}},onMouseOut:function(f){var d=this,c,b,a;if(d.mouseIsDown){d.mouseIsOut=true}else{if(d.handleCls){for(b=0,a=d.handleEls.length;b<a;b++){c=d.handleEls[b];c.removeCls([c.delegateCls,d.overCls])}}d.fireEvent("mouseout",d,f)}},onMouseDown:function(c,b){var a=this;if(a.disabled||c.dragTracked){return}a.dragTarget=a.delegate?b:a.handle.dom;a.startXY=a.lastXY=c.getXY();a.startRegion=Ext.fly(a.dragTarget).getRegion();if(a.fireEvent("mousedown",a,c)===false||a.fireEvent("beforedragstart",a,c)===false||a.onBeforeStart(c)===false){return}a.mouseIsDown=true;c.dragTracked=true;a.el.setCapture();c.stopPropagation();if(a.preventDefault!==false){c.preventDefault()}Ext.getDoc().on({scope:a,capture:true,mouseup:a.onMouseUp,mousemove:a.onMouseMove,selectstart:a.stopSelect});a.dragEnded=false;if(!a.tolerance){a.triggerStart()}else{if(a.autoStart){a.timer=Ext.defer(a.triggerStart,a.autoStart===true?1000:a.autoStart,a,[c])}}},onMouseMove:function(f,d){var b=this,c=f.getXY(),a=b.startXY;f.stopPropagation();if(b.preventDefault!==false){f.preventDefault()}if(b.dragEnded){return}b.lastXY=c;if(!b.active){if(Math.max(Math.abs(a[0]-c[0]),Math.abs(a[1]-c[1]))>b.tolerance){b.triggerStart(f)}else{return}}if(b.fireEvent("mousemove",b,f)===false){b.onMouseUp(f)}else{b.onDrag(f);b.fireEvent("drag",b,f)}},onMouseUp:function(b){var a=this;a.mouseIsDown=false;if(a.mouseIsOut){a.mouseIsOut=false;a.onMouseOut(b)}if(a.preventDefault!==false){b.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}a.fireEvent("mouseup",a,b);a.endDrag(b)},endDrag:function(c){var b=this,a=b.active;Ext.getDoc().un({mousemove:b.onMouseMove,mouseup:b.onMouseUp,selectstart:b.stopSelect,capture:true,scope:b});b.clearStart();b.active=false;if(a){b.dragEnded=true;b.onEnd(c);b.fireEvent("dragend",b,c)}b._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart();a.active=true;a.onStart(b);a.fireEvent("dragstart",a,b)},clearStart:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region){return a.constrainTo}if(!a._constrainRegion){a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion()}}else{if(!a._constrainRegion){a._constrainRegion=a.getDragCt().getViewRegion()}}return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[b[0]-a[0],b[1]-a[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(b,d){var c=b.dragRegion,a=b.getConstrainRegion();if(!a){return d}c.x=c.left=c[0]=c.right=d[0];c.y=c.top=c[1]=c.bottom=d[1];c.constrainTo(a);return[c.left,c.top]},dragTarget:function(c,g){var b=c.startXY,f=c.startRegion.copy(),a=c.getConstrainRegion(),d;if(!a){return g}f.translateBy(g[0]-b[0],g[1]-b[1]);if(f.right>a.right){g[0]+=d=(a.right-f.right);f.left+=d}if(f.left<a.left){g[0]+=(a.left-f.left)}if(f.bottom>a.bottom){g[1]+=d=(a.bottom-f.bottom);f.top+=d}if(f.top<a.top){g[1]+=(a.top-f.top)}return g}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderResizer",Ext.plugin.Abstract,{disabled:false,config:{dynamic:false},colHeaderCls:"x-column-header",minColWidth:40,maxColWidth:1000,eResizeCursor:"col-resize",init:function(b){var a=this;a.headerCt=b;b.on("render",a.afterHeaderRender,a,{single:a});if(!a.minColWidth){a.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth}},destroy:function(){var a=this.tracker;if(a){delete a.onBeforeStart;delete a.onStart;delete a.onDrag;delete a.onEnd;a.destroy();this.tracker=null}},afterHeaderRender:function(){var b=this,c=b.headerCt,a=c.el;c.mon(a,"mousemove",b.onHeaderCtMouseMove,b);b.markerOwner=b.ownerGrid=b.headerCt.up("tablepanel");if(b.markerOwner.ownerLockable){b.markerOwner=b.markerOwner.ownerLockable}b.tracker=new Ext.dd.DragTracker({disabled:b.disabled,onBeforeStart:b.onBeforeStart.bind(b),onStart:b.onStart.bind(b),onDrag:b.onDrag.bind(b),onEnd:b.onEnd.bind(b),tolerance:3,autoStart:300,el:a})},onHeaderCtMouseMove:function(b){var a=this;if(a.headerCt.dragging||a.disabled){if(a.activeHd){a.activeHd.el.dom.style.cursor="";delete a.activeHd}}else{a.findActiveHeader(b)}},findActiveHeader:function(c){var b=this,g=c.getTarget("."+b.colHeaderCls,3,true),a,f,d;if(g){a=Ext.getCmp(g.id);if(a.isOnRightEdge(c)){if(b.headerCt.visibleColumnManager.getColumns().length===1&&b.headerCt.forceFit){return}f=a}else{if(a.isOnLeftEdge(c)){d=b.headerCt.visibleColumnManager.getColumns();f=d[Ext.Array.indexOf(d,a)-1];if(!f&&b.ownerGrid.ownerLockable&&!b.ownerGrid.isLocked){d=b.ownerGrid.ownerLockable.lockedGrid.headerCt.visibleColumnManager.getColumns();f=d[d.length-1]}}}if(f){if(f.isGroupHeader){d=f.getGridColumns();f=d[d.length-1]}if(f&&!(f.fixed||(f.resizable===false))){b.activeHd=f;a.el.dom.style.cursor=b.eResizeCursor;if(a.triggerEl){a.triggerEl.dom.style.cursor=b.eResizeCursor}}}else{a.el.dom.style.cursor="";if(a.triggerEl){a.triggerEl.dom.style.cursor=""}b.activeHd=null}}return b.activeHd},onBeforeStart:function(b){var a=this;a.dragHd=Ext.supports.Touch?a.findActiveHeader(b):a.activeHd;if(!!a.dragHd&&!a.headerCt.dragging){a.xDelta=a.dragHd.getX()+a.dragHd.getWidth()-a.tracker.getXY()[0];a.tracker.constrainTo=a.getConstrainRegion();return true}else{a.headerCt.dragging=false;return false}},getConstrainRegion:function(){var g=this,b=g.dragHd.el,f,h=g.ownerGrid,d=h.getSizeModel().width,c=d.shrinkWrap?g.headerCt.getWidth()-g.headerCt.visibleColumnManager.getColumns().length*g.minColWidth:g.maxColWidth,a;if(g.headerCt.forceFit){f=g.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(f&&g.headerInSameGrid(f)){c=b.getWidth()+(f.getWidth()-g.minColWidth)}}else{if(h.isLocked&&d.shrinkWrap){c=g.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(true)-h.getWidth()-(h.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*g.minColWidth+Ext.getScrollbarSize().width)}}a=g.adjustConstrainRegion(b.getRegion(),0,0,0,g.minColWidth);a.right=b.getX()+c;return a},onStart:function(g){var h=this,f=h.dragHd,b=f.el.getWidth(),d=f.getOwnerHeaderCt(),l,k,c,a,j,m;h.headerCt.dragging=true;h.origWidth=b;if(!h.dynamic){c=h.markerOwner;if(c.frame&&c.resizable){h.gridOverflowSetting=c.el.dom.style.overflow;c.el.dom.style.overflow="hidden"}l=h.getLeftMarkerX(c);a=c.getLhsMarker();j=c.getRhsMarker();m=h.ownerGrid.body.getHeight()+d.getHeight();k=d.getOffsetsTo(c)[1]-c.el.getBorderWidth("t");a.setLocalY(k);j.setLocalY(k);a.setHeight(m);j.setHeight(m);h.setMarkerX(a,l);h.setMarkerX(j,l+b)}},onDrag:function(b){var a=this;if(a.dynamic){a.doResize()}else{a.setMarkerX(a.getMovingMarker(a.markerOwner),a.calculateDragX(a.markerOwner))}},getMovingMarker:function(a){return a.getRhsMarker()},onEnd:function(b){var a=this,c;a.headerCt.dragging=false;if(a.dragHd){if(!a.dynamic){c=a.headerCt.up("tablepanel");if(c.ownerLockable){c=c.ownerLockable}if("gridOverflowSetting" in a){c.el.dom.style.overflow=a.gridOverflowSetting}a.setMarkerX(c.getLhsMarker(),-9999);a.setMarkerX(c.getRhsMarker(),-9999)}a.doResize()}a.onHeaderCtMouseMove(b)},doResize:function(){var c=this,b=c.dragHd,a,d=c.tracker.getOffset("point");if(b&&d[0]){if(b.flex){delete b.flex}Ext.suspendLayouts();c.adjustColumnWidth(d[0]-c.xDelta);if(c.headerCt.forceFit){a=b.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(a&&!c.headerInSameGrid(a)){a=null}if(a){delete a.flex;a.setWidth(a.getWidth()-d[0])}}Ext.resumeLayouts(true)}},headerInSameGrid:function(b){var a=this.dragHd.up("tablepanel");return !!b.up(a)},disable:function(){var a=this.tracker;this.disabled=true;if(a){a.disable()}},enable:function(){var a=this.tracker;this.disabled=false;if(a){a.enable()}},calculateDragX:function(a){return this.tracker.getXY("point")[0]+this.xDelta-a.getX()-a.el.getBorderWidth("l")},getLeftMarkerX:function(a){return this.dragHd.getX()-a.getX()-a.el.getBorderWidth("l")-1},setMarkerX:function(b,a){b.setLocalX(a)},adjustConstrainRegion:function(g,d,f,a,c){return g.adjust(d,f,a,c)},adjustColumnWidth:function(a){this.dragHd.setWidth(this.origWidth+a)}},0,0,0,0,["plugin.gridheaderresizer"],0,[Ext.grid.plugin,"HeaderResizer"],0));(Ext.cmd.derive("Ext.dd.DragZone",Ext.dd.DragSource,{constructor:function(c,b){var d=this,a=d.containerScroll;Ext.dd.DragSource.prototype.constructor.call(this,c,b);if(a){c=d.scrollEl||c;c=Ext.get(c);if(Ext.isObject(a)){c.ddScrollConfig=a}Ext.dd.ScrollManager.register(c)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},getRepairXY:function(a){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragSource.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}},1,0,0,0,0,0,[Ext.dd,"DragZone"],0));(Ext.cmd.derive("Ext.grid.header.DragZone",Ext.dd.DragZone,{colHeaderSelector:".x-column-header",colInnerSelector:".x-column-header-inner",maxProxyWidth:120,constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;Ext.dd.DragZone.prototype.constructor.call(this,b.el);a.proxy.el.addCls("x-grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(b){if(b.getTarget(this.colInnerSelector)){var d=b.getTarget(this.colHeaderSelector),a,c;if(d){a=Ext.getCmp(d.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isOnLeftEdge(b)||a.isOnRightEdge(b))){c=document.createElement("div");c.role="presentation";c.innerHTML=a.text;return{ddel:c,header:a}}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.headerCt.hideMenu();Ext.dd.DragZone.prototype.onInitDrag.apply(this,arguments)},onDragDrop:function(){this.headerCt.dragging=false;Ext.dd.DragZone.prototype.onDragDrop.apply(this,arguments)},afterRepair:function(){Ext.dd.DragZone.prototype.afterRepair.call(this);this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}},1,0,0,0,0,0,[Ext.grid.header,"DragZone"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.initTarget(c,a,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.dd.ScrollManager",Ext.Base,{singleton:true,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=this.doScroll.bind(this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(a){var b=Ext.dd.ScrollManager;b.dragEl=null;b.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){var g=this;if(g.ddmInstance.dragCurrent){var a=g.proc,f=a.el,c=a.component,h=a.el.ddScrollConfig,j=h&&h.increment?h.increment:g.increment,b=h&&"animate" in h?h.animate:g.animate,d=function(){g.triggerRefresh()};if(b){if(b===true){b={callback:d}}else{b.callback=b.callback?Ext.Function.createSequence(b.callback,d):d}}if(c){j=j*g.dirTrans[a.dir];if(a.dir==="up"||a.dir==="down"){c.scrollBy(0,j,b)}else{c.scrollBy(j,0,b)}}else{f.scroll(a.dir,j,b)}if(!b){d()}}},clearProc:function(){var a=this.proc;if(a.id){clearInterval(a.id)}if(a.scroller){a.scroller.setSnapToBoundary(true);a.scroller.snapToBoundary()}a.id=0;a.el=a.component=a.scroller=null;a.dir=""},startProc:function(d,b){var f=this,h,g,c,a=f.proc;f.clearProc();a.el=d;a.dir=b;if(Ext.supports.touchScroll===2&&(c=d.component)&&d===c.getOverflowEl()){a.component=c;a.scroller=c.scrollManager.scroller;a.scroller.setSnapToBoundary(false)}h=d.ddScrollConfig?d.ddScrollConfig.ddGroup:undefined;g=(d.ddScrollConfig&&d.ddScrollConfig.frequency)?d.ddScrollConfig.frequency:f.frequency;if(h===undefined||f.ddmInstance.dragCurrent.ddGroup===h){a.id=Ext.interval(f.doScroll,g)}},onFire:function(g,k){var j=this,l,h,d,a,b,f,c;if(k||!j.ddmInstance.dragCurrent){return}if(!j.dragEl||j.dragEl!==j.ddmInstance.dragCurrent){j.dragEl=j.ddmInstance.dragCurrent;j.refreshCache()}l=g.getPoint();h=j.proc;d=j.els;for(a in d){b=d[a];f=b._region;c=b.ddScrollConfig||j;if(f&&f.contains(l)&&b.isScrollable()){if(f.bottom-l.y<=c.vthresh){if(h.el!==b){j.startProc(b,"down")}return}else{if(f.right-l.x<=c.hthresh){if(h.el!==b){j.startProc(b,"right")}return}else{if(l.y-f.top<=c.vthresh){if(h.el!==b){j.startProc(b,"up")}return}else{if(l.x-f.left<=c.hthresh){if(h.el!==b){j.startProc(b,"left")}return}}}}}}j.clearProc()},register:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.register(c[b])}}else{c=Ext.get(c);this.els[c.id]=c}},unregister:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.unregister(c[b])}}else{c=Ext.get(c);delete this.els[c.id]}},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]=="object"){a[b]._region=a[b].getRegion()}}}},1,0,0,0,0,0,[Ext.dd,"ScrollManager"],0));(Ext.cmd.derive("Ext.dd.DropTarget",Ext.dd.DDTarget,{constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DDTarget.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}return false},destroy:function(){Ext.dd.DDTarget.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}},1,0,0,0,0,0,[Ext.dd,"DropTarget"],0));(Ext.cmd.derive("Ext.dd.Registry",Ext.Base,{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(b,a){if(typeof b=="string"){return b}var c=b.id;if(!c&&a!==false){c="extdd-"+(++this.autoIdSeed);b.id=c}return c},register:function(d,f){f=f||{};if(typeof d=="string"){d=document.getElementById(d)}f.ddel=d;this.elements[this.getId(d)]=f;if(f.isHandle!==false){this.handles[f.ddel.id]=f}if(f.handles){var c=f.handles,b,a;for(b=0,a=c.length;b<a;b++){this.handles[this.getId(c[b])]=f}}},unregister:function(d){var g=this.getId(d,false),f=this.elements[g],c,b,a;if(f){delete this.elements[g];if(f.handles){c=f.handles;for(b=0,a=c.length;b<a;b++){delete this.handles[this.getId(c[b],false)]}}}},getHandle:function(a){if(typeof a!="string"){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!="string"){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}},1,0,0,0,0,0,[Ext.dd,"Registry"],0));(Ext.cmd.derive("Ext.dd.DropZone",Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,a,c,b){},onNodeOver:function(d,a,c,b){return this.dropAllowed},onNodeOut:function(d,a,c,b){},onNodeDrop:function(d,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,c,b){var d=this.getTargetFromEvent(c);if(!d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}return this.onContainerOver(a,c,b)}if(this.lastOverNode!=d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b)}this.onNodeEnter(d,a,c,b);this.lastOverNode=d}return this.onNodeOver(d,a,c,b)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(b,f,d){var c=this,g=c.getTargetFromEvent(f),a=g?c.onNodeDrop(g,b,f,d):c.onContainerDrop(b,f,d);if(c.lastOverNode){c.onNodeOut(c.lastOverNode,b,f,d);c.lastOverNode=null}return a},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}},0,0,0,0,0,0,[Ext.dd,"DropZone"],0));(Ext.cmd.derive("Ext.grid.header.DropZone",Ext.dd.DropZone,{colHeaderCls:"x-column-header",proxyOffsets:[-4,-9],constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;Ext.dd.DropZone.prototype.constructor.call(this,b.el)},destroy:function(){Ext.dd.DropZone.prototype.destroy.call(this);Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-top",html:"&#160;"});this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-bottom",html:"&#160;"})}return this.bottomIndicator},getLocation:function(d,b){var a=d.getXY()[0],c=Ext.fly(b).getRegion(),f;if((c.right-a)<=(c.right-c.left)/2){f="after"}else{f="before"}return{pos:f,header:Ext.getCmp(b.id),node:b}},positionIndicator:function(y,o,u){var x=this,p=y.header,f=x.getLocation(u,o),j=f.header,d=f.pos,c,t,l,r,s,a,b,k,m,w,v,n,h,q,g;if(j===x.lastTargetHeader&&d===x.lastDropPos){return}c=p.nextSibling("gridcolumn:not([hidden])");t=p.previousSibling("gridcolumn:not([hidden])");x.lastTargetHeader=j;x.lastDropPos=d;if(!j.draggable&&d==="before"&&j.getIndex()===0){return false}y.dropLocation=f;if((p!==j)&&((d==="before"&&c!==j)||(d==="after"&&t!==j))&&!j.isDescendantOf(p)){n=Ext.dd.DragDropManager.getRelated(x);h=n.length;q=0;for(;q<h;q++){g=n[q];if(g!==x&&g.invalidateDrop){g.invalidateDrop()}}x.valid=true;l=x.getTopIndicator();r=x.getBottomIndicator();if(d==="before"){s="bc-tl";a="tc-bl"}else{s="bc-tr";a="tc-br"}b=l.getAlignToXY(j.el,s);k=r.getAlignToXY(j.el,a);m=x.headerCt.el;w=m.getX()-x.indicatorXOffset;v=m.getX()+m.getWidth();b[0]=Ext.Number.constrain(b[0],w,v);k[0]=Ext.Number.constrain(k[0],w,v);l.setXY(b);r.setXY(k);l.show();r.show()}else{x.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(c,g,f,d){var h=this,k=d.header,a,l,b,j;if(d.header.el.dom===c){a=false}else{d.isLock=d.isUnlock=d.crossPanel=false;l=h.getLocation(f,c).header;a=(k.ownerCt===l.ownerCt);if(!a&&(!k.ownerCt.sealed&&!l.ownerCt.sealed)){a=true;b=k.up("tablepanel");j=l.up("tablepanel");if(b!==j){d.crossPanel=true;d.isLock=j.isLocked&&!b.isLocked;d.isUnlock=!j.isLocked&&b.isLocked;if((d.isUnlock&&k.lockable===false)||(d.isLock&&!k.isLockable())){a=false}}}}if(a){h.positionIndicator(d,c,f)}else{h.valid=false}return h.valid?h.dropAllowed:h.dropNotAllowed},hideIndicators:function(){var a=this;a.getTopIndicator().hide();a.getBottomIndicator().hide();a.lastTargetHeader=a.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(o,c,s,v){if(this.valid){var q=v.header,h=v.dropLocation,l=h.header,u=q.ownerCt,a=l.ownerCt,k=u===a,m=u.items.indexOf(v.header),p=a.items.indexOf(l),j=this.headerCt,d=j.visibleColumnManager,r=d.getHeaderIndex(q),b=l.isGroupHeader?a.items.indexOf(l):d.getHeaderIndex(l),n=q.isGroupHeader?q.query(":not([hidden]):not([isGroupHeader])").length:1,t=l.isGroupHeader?(h.pos==="after"):d.getHeaderIndex(l)>d.getHeaderIndex(q),g,f;if(h.pos==="after"){p++;b+=l.isGroupHeader?l.query(":not([hidden]):not([isGroupHeader])").length:1}if(v.isLock){g=u.up("[scrollerOwner]");g.lock(q,p,a)}else{if(v.isUnlock){g=u.up("[scrollerOwner]");g.unlock(q,p,a)}else{this.invalidateDrop();f=q.getWidth();if(k){if(p>m){p-=1}if(p===m){j.onHeaderMoved(q,n,r,b);return}}Ext.suspendLayouts();if(k){a.move(m,p)}else{if(t&&(b===p)){p-=1}u.isDDMoveInGrid=a.isDDMoveInGrid=!v.crossPanel;u.remove(q,false);a.insert(p,q);u.isDDMoveInGrid=a.isDDMoveInGrid=false}if(a.isGroupHeader){if(!k){q.savedFlex=q.flex;delete q.flex;q.width=f}}else{if(q.savedFlex){q.flex=q.savedFlex;delete q.width}}Ext.resumeLayouts(true);if(!k){j.onHeaderMoved(q,n,r,b)}}}}}},1,0,0,0,0,0,[Ext.grid.header,"DropZone"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderReorderer",Ext.plugin.Abstract,{init:function(a){this.headerCt=a;a.on({render:this.onHeaderCtRender,single:true,scope:this})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){var a=this;a.dragZone=new Ext.grid.header.DragZone(a.headerCt);a.dropZone=new Ext.grid.header.DropZone(a.headerCt);if(a.disabled){a.dragZone.disable()}},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}},0,0,0,0,["plugin.gridheaderreorderer"],0,[Ext.grid.plugin,"HeaderReorderer"],0));(Ext.cmd.derive("Ext.grid.header.Container",Ext.container.Container,{border:true,baseCls:"x-grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:false,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:"x-column-header-open",menuSortAscCls:"x-hmenu-sort-asc",menuSortDescCls:"x-hmenu-sort-desc",menuColsIcon:"x-cols-icon",ddLock:false,dragging:false,enableFocusableContainer:false,sortable:true,enableColumnHide:true,initComponent:function(){var a=this;a.headerCounter=0;a.plugins=a.plugins||[];a.defaults=a.defaults||{};if(!a.isColumn){if(a.enableColumnResize){a.resizer=new Ext.grid.plugin.HeaderResizer();a.plugins.push(a.resizer)}if(a.enableColumnMove){a.reorderer=new Ext.grid.plugin.HeaderReorderer();a.plugins.push(a.reorderer)}}if(a.isColumn&&!a.isGroupHeader){if(!a.items||a.items.length===0){a.isContainer=false;a.focusable=true;a.layout={type:"container",calculate:Ext.emptyFn}}}else{a.layout=Ext.apply({type:"gridcolumn",align:"stretch"},a.initialConfig.layout);a.defaults.columnLines=a.columnLines;if(!a.isGroupHeader){a.isRootHeader=true;if(!a.hiddenHeaders){a.enableFocusableContainer=true;a.ariaRole="row"}a.columnManager=new Ext.grid.ColumnManager(false,a);a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);if(a.grid){a.grid.columnManager=a.columnManager;a.grid.visibleColumnManager=a.visibleColumnManager}}else{a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);a.columnManager=new Ext.grid.ColumnManager(false,a)}}a.menuTask=new Ext.util.DelayedTask(a.updateMenuDisabledState,a);Ext.container.Container.prototype.initComponent.call(this)},initEvents:function(){var c=this,a=c.onHeaderCtEvent,b={click:a,dblclick:a,contextmenu:a,mouseover:c.onHeaderCtMouseOver,mouseout:c.onHeaderCtMouseOut,scope:c};if(Ext.supports.Touch){b.longpress=c.onHeaderCtLongPress}Ext.container.Container.prototype.initEvents.call(this);if(!c.isColumn&&!c.isGroupHeader){c.mon(c.el,b)}},onHeaderCtEvent:function(d,b){var c=this,h=c.getHeaderElByEvent(d),g,f,a;if(c.longPressFired){c.longPressFired=false;return}if(h&&!c.ddLock){g=Ext.getCmp(h.id);if(g){f=g[g.clickTargetName];if(d.within(f)){if(d.type==="click"||d.type==="tap"){a=g.onTitleElClick(d,f);if(a){c.onHeaderTriggerClick(a,d,Ext.supports.Touch?a.el:a.triggerEl)}else{c.onHeaderClick(g,d,b)}}else{if(d.type==="contextmenu"){c.onHeaderContextMenu(g,d,b)}else{if(d.type==="dblclick"&&g.resizable){g.onTitleElDblClick(d,f.dom)}}}}}}},onHeaderCtMouseOver:function(b,a){var f,d,c;if(!b.within(this.el,true)){f=b.getTarget("."+Ext.grid.column.Column.prototype.baseCls);d=f&&Ext.getCmp(f.id);if(d){c=d[d.clickTargetName];if(b.within(c)){d.onTitleMouseOver(b,c.dom)}}}},onHeaderCtMouseOut:function(f,c){var d="."+Ext.grid.column.Column.prototype.baseCls,b=f.getTarget(d),a=f.getRelatedTarget(d),h,g;if(b!==a){if(b){h=Ext.getCmp(b.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOut(f,g.dom)}}if(a){h=Ext.getCmp(a.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOver(f,g.dom)}}}},onHeaderCtLongPress:function(b){var a=this,d=a.getHeaderElByEvent(b),c=Ext.getCmp(d.id);if(!c.menuDisabled){a.longPressFired=true;a.showMenuBy(d,c)}},getHeaderElByEvent:function(a){return a.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){if(this.hiddenHeaders){return false}return Ext.container.Container.prototype.isLayoutRoot.call(this)},getOwnerHeaderCt:function(){var a=this;return a.isRootHeader?a:a.up("[isRootHeader]")},onDestroy:function(){var a=this;if(a.menu){a.menu.un("hide",a.onMenuHide,a)}a.menuTask.cancel();Ext.container.Container.prototype.onDestroy.call(this);Ext.destroy(a.visibleColumnManager,a.columnManager,a.menu);a.columnManager=a.visibleColumnManager=null},applyColumnsState:function(f){if(!f||!f.length){return}var m=this,k=m.items.items,j=k.length,g=0,b=f.length,l,d,a,h,n=false;for(l=0;l<b;l++){a=f[l];for(h=j;h--;){d=k[h];if(d.getStateId&&d.getStateId()==a.id){if(g!==h){this.items.insert(g,this.items.getAt(h));n=true}if(d.applyColumnState){d.applyColumnState(a)}++g;break}}}if(n){m.purgeCache()}},getColumnsState:function(){var b=this,a=[],c;b.items.each(function(d){c=d.getColumnState&&d.getColumnState();if(c){a.push(c)}});return a},onAdd:function(b){var a=this;if(!b.headerId){b.headerId=b.initialConfig.id||Ext.id(null,"header-")}if(b.sortable===undefined){b.sortable=a.sortable}if(!b.getStateId()){b.stateId=b.initialConfig.id||("h"+(++a.headerCounter))}Ext.container.Container.prototype.onAdd.apply(this,arguments);a.onHeadersChanged(b,a.isDDMoveInGrid)},move:function(b,d){var c=this,a=c.items.items[b];a.visibleFromIdx=c.getOwnerHeaderCt().visibleColumnManager.indexOf(a);Ext.container.Container.prototype.move.apply(this,arguments)},onMove:function(a,d,h){var g=this,f=g.getOwnerHeaderCt(),b=f.visibleColumnManager,j=1,c;g.onHeadersChanged(a,true);c=b.indexOf(a);if(c>=a.visibleFromIdx){c++}Ext.container.Container.prototype.onMove.apply(this,arguments);if(a.isGroupHeader){j=a.visibleColumnManager.getColumns().length}f.onHeaderMoved(a,j,a.visibleFromIdx,c)},onRemove:function(d){var b=this,a=b.ownerCt;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!b.destroying){if(!b.isDDMoveInGrid){b.onHeadersChanged(d,false)}if(b.isGroupHeader&&!b.items.getCount()&&a){if(d.rendered){b.detachComponent(d)}Ext.suspendLayouts();a.remove(b);Ext.resumeLayouts(true)}}},onHeadersChanged:function(f,a){var b,d=this.getOwnerHeaderCt();this.purgeHeaderCtCache(this);if(d){d.onColumnsChanged();if(!f.isGroupHeader){b=d.ownerCt;if(b&&!a){b.onHeadersChanged(d,f)}}}},onHeaderMoved:function(g,a,c,f){var d=this,b=d.ownerCt;if(d.rendered){if(b&&b.onHeaderMove){b.onHeaderMove(d,g,a,c,f)}d.fireEvent("columnmove",d,g,c,f)}},onColumnsChanged:function(){var c=this,d=c.menu,a,b;if(c.rendered){c.fireEvent("columnschanged",c);if(d&&(a=d.child("#columnItemSeparator"))){b=d.child("#columnItem");a.destroy();b.destroy()}}},lookupComponent:function(b){var a=Ext.container.Container.prototype.lookupComponent.apply(this,arguments);if(!a.isGroupHeader&&a.width===undefined&&!a.flex){a.width=this.defaultWidth}return a},setSortState:function(){var b=this.up("[store]").store,d=this.visibleColumnManager.getColumns(),a=d.length,c,g,f;for(c=0;c<a;c++){g=d[c];f=b.getSorters().get(g.getSortParam());g.setSortState(f)}},getHeaderMenu:function(){var b=this.getMenu(),a;if(b){a=b.child("#columnItem");if(a){return a.menu}}return null},onHeaderVisibilityChange:function(f,d){var b=this,c=b.getHeaderMenu(),a;b.purgeHeaderCtCache(f.ownerCt);if(c){a=b.getMenuItemForHeader(c,f);if(a){a.setChecked(d,true)}if(c.isVisible()){b.menuTask.delay(50)}}},updateMenuDisabledState:function(h){var g=this,d=g.query(":not([hidden])"),c,a=d.length,f,b,j;if(!h){h=g.getMenu()}for(c=0;c<a;++c){f=d[c];b=g.getMenuItemForHeader(h,f);if(b){j=f.isHideable()?"enable":"disable";if(b.menu){j+="CheckChange"}b[j]()}}},getMenuItemForHeader:function(a,b){return b?a.down("menucheckitem[headerId="+b.id+"]"):null},onHeaderShow:function(c){var b=this,a=b.ownerCt;if(b.forceFit){delete b.flex}b.onHeaderVisibilityChange(c,true);if(!c.isGroupHeader){if(a){a.onHeaderShow(b,c)}}b.fireEvent("columnshow",b,c);b.fireEvent("columnschanged",this)},onHeaderHide:function(c){var b=this,a=b.ownerCt;b.onHeaderVisibilityChange(c,false);if(!c.isGroupHeader){if(a){a.onHeaderHide(b,c)}}b.fireEvent("columnhide",b,c);b.fireEvent("columnschanged",this)},tempLock:function(){this.ddLock=true;Ext.Function.defer(function(){this.ddLock=false},200,this)},onHeaderResize:function(d,a){var c=this,b=c.ownerCt;if(b){b.onHeaderResize(c,d,a)}c.fireEvent("columnresize",c,d,a)},onHeaderClick:function(c,b,a){c.fireEvent("headerclick",this,c,b,a);this.fireEvent("headerclick",this,c,b,a)},onHeaderContextMenu:function(c,b,a){c.fireEvent("headercontextmenu",this,c,b,a);this.fireEvent("headercontextmenu",this,c,b,a)},onHeaderTriggerClick:function(d,c,a){var b=this;if(d.fireEvent("headertriggerclick",b,d,c,a)!==false&&b.fireEvent("headertriggerclick",b,d,c,a)!==false){b.showMenuBy(a,d)}},showMenuBy:function(b,g){var d=this.getMenu(),f=d.down("#ascItem"),c=d.down("#descItem"),a;d.activeHeader=d.ownerCmp=g;g.setMenuActive(true);a=g.sortable?"enable":"disable";if(f){f[a]()}if(c){c[a]()}d.showBy(b,"tl-bl?")},hideMenu:function(){if(this.menu){this.menu.hide()}},onMenuHide:function(a){a.activeHeader.setMenuActive(false)},moveHeader:function(a,b){this.tempLock();this.move(a,b)},purgeHeaderCtCache:function(a){while(a){a.purgeCache();if(a.isRootHeader){return}a=a.ownerCt}},purgeCache:function(){var c=this,b=c.visibleColumnManager,a=c.columnManager;c.gridVisibleColumns=c.gridDataColumns=c.hideableColumns=null;if(b){b.invalidate();a.invalidate()}},getMenu:function(){var a=this;if(!a.menu){a.menu=new Ext.menu.Menu({hideOnParentHide:false,items:a.getMenuItems(),listeners:{beforeshow:a.beforeMenuShow,hide:a.onMenuHide,scope:a}});a.fireEvent("menucreate",a,a.menu)}return a.menu},beforeMenuShow:function(f){var c=this,b=f.child("#columnItem"),a,d,f;if(!b){a=c.enableColumnHide?c.getColumnMenu(c):null;d=c.sortable?2:0;if(a&&a.length){f.insert(d,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:{items:a},hideOnClick:false}])}}c.updateMenuDisabledState(c.menu)},getMenuItems:function(){var c=this,b=[],a=c.enableColumnHide?c.getColumnMenu(c):null;if(c.sortable){b=[{itemId:"ascItem",text:c.sortAscText,iconCls:c.menuSortAscCls,handler:c.onSortAscClick,scope:c},{itemId:"descItem",text:c.sortDescText,iconCls:c.menuSortDescCls,handler:c.onSortDescClick,scope:c}]}if(a&&a.length){if(c.sortable){b.push({itemId:"columnItemSeparator",xtype:"menuseparator"})}b.push({itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:a,hideOnClick:false})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("ASC")},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("DESC")},getColumnMenu:function(g){var c=[],b=0,f,a=g.query(">gridcolumn[hideable]"),h=a.length,d;for(;b<h;b++){f=a[b];d=new Ext.menu.CheckItem({text:f.menuText||f.text,checked:!f.hidden,hideOnClick:false,headerId:f.id,menu:f.isGroupHeader?this.getColumnMenu(f):undefined,checkHandler:this.onColumnCheckChange,scope:this});c.push(d)}return c},onColumnCheckChange:function(a,b){var c=Ext.getCmp(a.headerId);if(c.rendered){c[b?"show":"hide"]()}else{c.hidden=!b}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var c=0,b=this.getVisibleGridColumns(),d=b.length,a;for(a=0;a<d;a++){c+=b[a].getCellWidth()||0}return c},getVisibleGridColumns:function(){if(this.gridVisibleColumns){return this.gridVisibleColumns}var c=this.getGridColumns(),f,b=[],a=c.length,d;for(d=0;d<a;d++){if(!c[d].hidden){f=c[d];f.visibleIndex=b.length;b[b.length]=f}}this.gridVisibleColumns=b;return b},getGridColumns:function(h,a){if(!h&&this.gridDataColumns){return this.gridDataColumns}var g=this,k=h||[],f,b,d,j,c;a=a||g.hidden;if(g.items){f=g.items.items;for(b=0,d=f.length;b<d;b++){j=f[b];if(j.isGroupHeader){j.getGridColumns(k,a)}else{j.hiddenAncestor=a;k.push(j)}}}if(!h){g.gridDataColumns=k}if(!h&&d){for(b=0,d=k.length;b<d;b++){j=k[b];j.fullColumnIndex=b;j.isFirstVisible=j.isLastVisible=false;if(!(j.hidden||j.hiddenAncestor)){if(!c){j.isFirstVisible=true}c=j}}if(c){c.isLastVisible=true}}return k},getHideableColumns:function(){var b=this,a=b.hideableColumns;if(!a){a=b.hideableColumns=b.query("[hideable]")}return a},getHeaderIndex:function(a){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderIndex(a)},getHeaderAtIndex:function(a){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(a)},getVisibleHeaderClosestToIndex:function(a){if(!this.visibleColumnManager){this.visibleColumnManager=this.getOwnerHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(a)},applyForceFit:function(h){var n=this,o=n.view,b=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,d=false,s=Ext.grid.header.Container.prototype.defaultWidth,a=n.el.dom.clientWidth-(o.el.dom.scrollHeight>o.el.dom.clientHeight?Ext.getScrollbarSize().width:0),f=0,m=n.getVisibleGridColumns(),j=h.hidden,l,g,r,k,c;function p(){for(g=0,l=m.length;g<l;g++){r=m[g];if(r===h){continue}r.flex=r.flex||r.width||r.getWidth();f+=r.flex;r.width=null}}function q(){var t;for(g=0,l=m.length;g<l;g++){r=m[g];t=(r===h);if(d&&!t){r.flex=b;r.width=null}else{if(!t){c=r.flex||s;r.flex=Math.max(Math.ceil((c/f)*a),b);r.width=null}}r.setWidth(r.width||r.flex)}}Ext.suspendLayouts();k=(a-((m.length+1)*b));h.flex=null;if(j){c=h.width||h.savedWidth;h.savedWidth=null}else{c=o.getMaxContentWidth(h)}if(c>k){h.width=k;d=true}else{h.width=c;a-=c+s;p()}q();Ext.resumeLayouts(true)},autoSizeColumn:function(b){var a=this.view;if(a){a.autoSizeColumn(b);if(this.forceFit){this.applyForceFit(b)}}},privates:{getFocusables:function(){return this.getVisibleGridColumns()},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{scope:b,down:b.showHeaderMenu,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey,space:b.toggleColumnSort,enter:b.toggleColumnSort})},showHeaderMenu:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.triggerEl){this.onHeaderTriggerClick(a,b,a.triggerEl)}},toggleColumnSort:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.sortable){a.toggleSortState();this.onHeaderClick(a,b,a.el)}},onFocusableContainerMousedown:Ext.privateFn}},0,["headercontainer"],["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},["widget.headercontainer"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.grid.header,"Container"],0));(Ext.cmd.derive("Ext.grid.ColumnComponentLayout",Ext.layout.component.Auto,{type:"columncomponent",setWidthInDom:true,beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.titleContext=a.getEl("titleEl");a.triggerContext=a.getEl("triggerEl")},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.widthModel.shrinkWrap){a.el.setWidth("")}a.titleEl.setStyle({paddingTop:"",paddingBottom:""})},publishInnerHeight:function(f,k){var h=this,b=h.owner,a,d,j,g,l,c;if(b.getOwnerHeaderCt().hiddenHeaders){f.setProp("innerHeight",0);return}a=k-f.getBorderInfo().height;d=a;if(b.headerWrap&&!f.hasDomProp("width")){h.done=false;return}if(f.hasRawContent){j=b.textEl.getHeight();if(j){d-=j;if(d>0){l=Math.floor(d/2);c=d-l;f.titleContext.setProp("padding-top",l);f.titleContext.setProp("padding-bottom",c)}}}else{f.setProp("innerHeight",a-b.titleEl.getHeight(),false)}},measureContentHeight:function(a){return a.el.dom.offsetHeight},publishInnerWidth:function(a,b){if(!a.hasRawContent){a.setProp("innerWidth",b-a.getBorderInfo().width,false)}},calculateOwnerHeightFromContentHeight:function(d,c){var b=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),a=this.owner;if(!d.hasRawContent){if(!a.headerWrap||d.hasDomProp("width")){return c+a.titleEl.getHeight()+d.getBorderInfo().height}return null}return b},calculateOwnerWidthFromContentWidth:function(g,b){var a=this.owner,f=g.getPaddingInfo().width,d=this.getTriggerOffset(a,g),c;if(a.isGroupHeader){c=b}else{c=Math.max(b,a.textEl.getWidth()+g.titleContext.getPaddingInfo().width)}return c+f+d},getTriggerOffset:function(a,c){var b=0;if(c.widthModel.shrinkWrap&&!a.menuDisabled){if(a.query(">:not([hidden])").length===0){b=a.self.triggerElWidth}}return b}},0,0,0,0,["layout.columncomponent"],0,[Ext.grid,"ColumnComponentLayout"],0));(Ext.cmd.derive("Ext.grid.column.Column",Ext.grid.header.Container,{alternateClassName:"Ext.grid.Column",config:{triggerVisible:false},baseCls:"x-column-header",hoverCls:"x-column-header-over",handleWidth:Ext.supports.Touch?10:4,ariaRole:"columnheader",enableFocusableContainer:false,sortState:null,possibleSortStates:["ASC","DESC"],childEls:["titleEl","triggerEl","textEl"],headerWrap:false,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" {tipMarkup}class="',"x-","column-header-inner",'<tpl if="empty"> ',"x-",'column-header-inner-empty</tpl>">','<span id="{id}-textEl" data-ref="textEl" class="',"x-","column-header-text",'{childElCls}">',"{text}","</span>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="',"x-","column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:true,resizable:true,hideable:true,menuDisabled:false,renderer:false,align:"left",draggable:true,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",isHeader:true,isColumn:true,producesHTML:true,tabIndex:-1,ascSortCls:"x-column-header-sort-ASC",descSortCls:"x-column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:"x-group-sub-header",groupHeaderCls:"x-group-header",clickTargetName:"titleEl",detachOnRemove:true,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var a=this;if(a.header!=null){a.text=a.header;a.header=null}if(a.cellWrap){a.tdCls=(a.tdCls||"")+" x-wrap-cell"}if(a.columns!=null){a.isGroupHeader=true;a.items=a.columns;a.columns=a.flex=a.width=null;a.cls=(a.cls||"")+" "+a.groupHeaderCls;a.sortable=a.resizable=false;a.align="center"}else{if(a.flex){a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}a.addCls("x-column-header-align-"+a.align);a.setupRenderer();a.setupRenderer("edit");a.setupRenderer("summary");Ext.grid.header.Container.prototype.initComponent.apply(this,arguments)},bindFormatter:function(b){var a=this;return function(c){return b.format(c,b.scope||a.scope||a.resolveListenerScope())}},bindRenderer:function(b){var a=this;a.hasCustomRenderer=true;return function(){return Ext.callback(b,a.scope,arguments,0,a)}},setupRenderer:function(b){b=b||"column";var c=this,f=c[c.formatterNames[b]],d=c[c.rendererNames[b]],a=b==="column",g;if(!f){if(d){if(typeof d==="string"){d=c[c.rendererNames[b]]=c.bindRenderer(d)}if(a){c.hasCustomRenderer=d.length>1}}else{if(a&&c.defaultRenderer){c.renderer=c.defaultRenderer;c.usingDefaultRenderer=true}}}else{g=f.indexOf("this.")===0;if(g){f=f.substring(5)}f=Ext.app.bind.Template.prototype.parseFormat(f);c[c.formatterNames[b]]=null;if(g){f.scope=null}c[c.rendererNames[b]]=c.bindFormatter(f)}},getView:function(){var a=this.getOwnerHeaderCt();if(a){return a.view}},onResize:function(d,a,c,h){var f=this,b,g;Ext.grid.header.Container.prototype.onResize.apply(this,arguments);if(c&&f.cellWrap){b=f.getView();if(b){g=b.bufferedRenderer;if(g){g.onWrappedColumnWidthChange(c,d)}}}},initItems:function(){var a=this;Ext.grid.header.Container.prototype.initItems.apply(this,arguments);if(a.isGroupHeader){if(!a.hasVisibleChildColumns()){a.hide()}}},hasVisibleChildColumns:function(){var b=this.items.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.isColumn&&!d.hidden){return true}}return false},onAdd:function(b){var a=this;if(b.isColumn){b.isSubHeader=true;b.addCls(this.groupSubHeaderCls)}if(a.hidden&&b.isColumn){if(a.constructing){b.hide()}else{if(!b.hidden){a.show()}}}Ext.grid.header.Container.prototype.onAdd.apply(this,arguments)},onRemove:function(b){var a=this;if(b.isSubHeader){b.isSubHeader=false;b.removeCls(a.groupSubHeaderCls)}Ext.grid.header.Container.prototype.onRemove.apply(this,arguments);if(!(a.isDestroyed||a.destroying)&&a.isGroupHeader&&!a.hasVisibleChildColumns()){a.hide()}},initRenderData:function(){var b=this,f="",c=b.tooltip,d=b.text,a=b.tooltipType=="qtip"?"data-qtip":"title";if(!Ext.isEmpty(c)){f=a+'="'+c+'" '}return Ext.applyIf(Ext.grid.header.Container.prototype.initRenderData.apply(this,arguments),{text:d,empty:d==="&#160;"||d===" "||d==="",menuDisabled:b.menuDisabled,tipMarkup:f,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(b){var a=this;a.applyColumnsState(b.columns);if(b.hidden!=null){a.hidden=b.hidden}if(b.locked!=null){a.locked=b.locked}if(b.sortable!=null){a.sortable=b.sortable}if(b.width!=null){a.flex=null;a.width=b.width}else{if(b.flex!=null){a.width=null;a.flex=b.flex}}},getColumnState:function(){var f=this,b=f.items.items,a=b?b.length:0,d,c=[],g={id:f.getStateId()};f.savePropsToState(["hidden","sortable","locked","flex","width"],g);if(f.isGroupHeader){for(d=0;d<a;d++){c.push(b[d].getColumnState())}if(c.length){g.columns=c}}else{if(f.isSubHeader&&f.ownerCt.hidden){delete f.hidden}}if("width" in g){delete g.flex}return g},getStateId:function(){return this.stateId||this.headerId},setText:function(a){this.text=a;if(this.rendered){this.textEl.setHtml(a)}},getIndex:function(){return this.isGroupColumn?false:this.getOwnerHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.visibleIndex!=null?this.visibleIndex:this.isGroupColumn?false:Ext.Array.indexOf(this.getOwnerHeaderCt().getVisibleGridColumns(),this)},beforeRender:function(){var b=this,a=b.up("tablepanel");Ext.grid.header.Container.prototype.beforeRender.call(this);if(a){if((!b.sortable||a.sortableColumns===false)&&!b.groupable&&!b.lockable&&(a.enableColumnHide===false||!b.getOwnerHeaderCt().getHideableColumns().length)){b.menuDisabled=true}}if(b.cellWrap){b.variableRowHeight=true}b.protoEl.unselectable()},afterRender:function(){var b=this,a=b.triggerEl;Ext.grid.header.Container.prototype.afterRender.apply(this,arguments);if(a&&b.self.triggerElWidth===undefined){a.setStyle("display","block");b.self.triggerElWidth=a.getWidth();a.setStyle("display","")}},afterComponentLayout:function(d,a,c,g){var f=this,b=f.getOwnerHeaderCt();Ext.grid.header.Container.prototype.afterComponentLayout.apply(this,arguments);if(b&&(c!=null||f.flex)&&d!==c){b.onHeaderResize(f,d)}},onDestroy:function(){var a=this;Ext.destroy(a.field);a.field=null;Ext.grid.header.Container.prototype.onDestroy.apply(this,arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onTitleElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onTitleElClick(a,this.el.dom)},onTitleElDblClick:function(f,a){var c=this,b,d,g;if(c.isOnLeftEdge(f)){b=c.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(b&&b.getOwnerHeaderCt()===c.getOwnerHeaderCt()){b.autoSize()}}else{if(c.isOnRightEdge(f)){if(c.isGroupHeader&&f.getPoint().isContainedBy(c.layout.innerCt)){d=c.query("gridcolumn:not([hidden]):not([isGroupHeader])");c.getOwnerHeaderCt().autoSizeColumn(d[d.length-1]);return}else{g=c.getOwnerHeaderCt();if(g.visibleColumnManager.getColumns().length===1&&g.forceFit){return}}c.autoSize()}}},autoSize:function(){var b=this,c,f,a,d;if(b.isGroupHeader){c=b.query("gridcolumn:not([hidden]):not([isGroupHeader])");f=c.length;d=this.getOwnerHeaderCt();Ext.suspendLayouts();for(a=0;a<f;a++){d.autoSizeColumn(c[a])}Ext.resumeLayouts(true);return}this.getOwnerHeaderCt().autoSizeColumn(this)},onTitleElClick:function(f,c){var d=this,a,b;if(Ext.supports.Touch){b=d.previousSibling(":not([hidden])");if(!d.menuDisabled&&d.isOnRightEdge(f,parseInt(d.triggerEl.getStyle("width")))){if(!d.menuDisabled){a=d}}else{if(b&&!b.menuDisabled&&d.isOnLeftEdge(f)){a=b}}}else{a=d.triggerEl&&(f.target===d.triggerEl.dom||c===d.triggerEl.dom||f.within(d.triggerEl))?d:null}if(!a&&!d.isOnLeftEdge(f)&&!d.isOnRightEdge(f)||f.getKey()){d.toggleSortState()}return a},processEvent:function(f,b,a,c,d,g){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var b=this,a,c;if(b.sortable){a=Ext.Array.indexOf(b.possibleSortStates,b.sortState);c=(a+1)%b.possibleSortStates.length;b.sort()}},sort:function(d){var c=this,b=c.up("tablepanel"),a=b.store;Ext.suspendLayouts();c.sorting=true;a.sort(c.getSortParam(),d,b.multiColumnSort?"multi":"replace");delete c.sorting;Ext.resumeLayouts(true)},getSortParam:function(){return this.dataIndex},setSortState:function(h){var c=this,d=h&&h.getDirection(),g=c.ascSortCls,b=c.descSortCls,a=c.getOwnerHeaderCt(),f;switch(d){case"DESC":if(!c.hasCls(b)){c.addCls(b);c.sortState="DESC";f=true}c.removeCls(g);break;case"ASC":if(!c.hasCls(g)){c.addCls(g);c.sortState="ASC";f=true}c.removeCls(b);break;default:c.removeCls([g,b]);c.sortState=null;break}if(f){a.fireEvent("sortchange",a,c,d)}},isHideable:function(){var a={hideCandidate:this,result:this.hideable};if(a.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[a])}return a.result},hasOtherMenuEnabledChildren:function(a){var b,c;if(!this.isXType("headercontainer")){a.result=false;return false}b=this.query(">:not([hidden]):not([menuDisabled])");c=b.length;if(Ext.Array.contains(b,a.hideCandidate)){c--}if(c){return false}a.hideCandidate=this},isLockable:function(){var a={result:this.lockable!==false};if(a.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[a])}return a.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(a){if(!this.isXType("headercontainer")){a.result=false;return false}if(this.query(">:not([hidden])").length>1){return false}},hide:function(c){var j=this,f=j.getOwnerHeaderCt(),b=j.getRefOwner(),a,k,h,g,d;if(b.constructing){Ext.grid.header.Container.prototype.hide.call(this);return j}if(j.rendered&&!j.isVisible()){return j}if(f.forceFit){j.visibleSiblingCount=f.getVisibleGridColumns().length-1;if(j.flex){j.savedWidth=j.getWidth();j.flex=null}}a=b.isGroupHeader;if(a&&!c){h=b.query(">:not([hidden])");if(h.length===1&&h[0]===j){j.ownerCt.hide();return}}Ext.suspendLayouts();if(j.isGroupHeader){h=j.items.items;for(d=0,g=h.length;d<g;d++){k=h[d];if(!k.hidden){k.hide(true)}}}Ext.grid.header.Container.prototype.hide.call(this);f.onHeaderHide(j);Ext.resumeLayouts(true);return j},show:function(b,c){var j=this,f=j.getOwnerHeaderCt(),a=j.ownerCt,h,g,d,k;if(j.isVisible()){return j}if(j.rendered){if(f.forceFit){f.applyForceFit(j)}}Ext.suspendLayouts();if(j.isSubHeader&&a.hidden){a.show(false,true)}Ext.grid.header.Container.prototype.show.apply(this,arguments);if(j.isGroupHeader&&c!==true&&!j.query(":not([hidden])").length){h=j.items.items;for(d=0,g=h.length;d<g;d++){k=h[d];if(k.hidden){k.show(true)}}}a=j.getOwnerHeaderCt();if(a){a.onHeaderShow(j)}Ext.resumeLayouts(true);return j},getCellWidth:function(){var b=this,a;if(b.rendered&&b.componentLayout&&b.componentLayout.lastComponentSize){a=b.componentLayout.lastComponentSize.width}else{if(b.width){a=b.width}else{if(!b.isColumn){a=b.getTableWidth()}}}return a},getCellId:function(){return"x-grid-cell-"+this.getItemId()},getCellSelector:function(){return"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" .x-grid-cell-inner"},isOnLeftEdge:function(a){return(a.getXY()[0]-this.getX()<this.handleWidth)},isOnRightEdge:function(b,a){return(this.getX()+this.getWidth()-b.getXY()[0]<=(a||this.handleWidth))},setMenuActive:function(a){this.titleEl[a?"addCls":"removeCls"](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(a){return function(b){return Ext.util.Format[a](b)}}}}}},0,["gridcolumn"],["component","box","container","headercontainer","gridcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true},["widget.gridcolumn"],0,[Ext.grid.column,"Column",Ext.grid,"Column"],0));(Ext.cmd.derive("Ext.tree.Column",Ext.grid.column.Column,{tdCls:"x-grid-cell-treecolumn",autoLock:true,lockable:false,draggable:false,hideable:false,iconCls:"x-tree-icon",checkboxCls:"x-tree-checkbox",elbowCls:"x-tree-elbow",expanderCls:"x-tree-expander",textCls:"x-tree-node-text",innerCls:"x-grid-cell-inner-treecolumn",isTreeColumn:true,cellTpl:['<tpl for="lines">','<img src="{parent.blankUrl}" class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"/>',"</tpl>",'<img src="{blankUrl}" class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"/>','<tpl if="checked !== null">','<input type="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"/>',"</tpl>",'<img src="{blankUrl}" role="presentation" class="{childCls} {baseIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else>parent</tpl> {iconCls}"','<tpl if="icon">style="background-image:url({icon})"</tpl>/>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],initComponent:function(){var a=this;a.setupRenderer();a.origRenderer=a.renderer;a.origScope=a.scope||window;a.renderer=a.treeRenderer;a.scope=a;Ext.grid.column.Column.prototype.initComponent.call(this)},treeRenderer:function(j,a,f,b,c,k,h){var g=this,l=f.get("cls"),d;if(l){a.tdCls+=" "+l}d=g.initTemplateRendererData(j,a,f,b,c,k,h);return g.getTpl("cellTpl").apply(d)},initTemplateRendererData:function(m,a,f,b,d,n,k){var j=this,h=j.origRenderer,c=f.data,l=f.parentNode,o=k.rootVisible,p=[],g;while(l&&(o||l.data.depth>0)){g=l.data;p[o?g.depth:g.depth-1]=g.isLast?0:1;l=l.parentNode}return{record:f,baseIconCls:j.iconCls,iconCls:c.iconCls,icon:c.icon,checkboxCls:j.checkboxCls,checked:c.checked,elbowCls:j.elbowCls,expanderCls:j.expanderCls,textCls:j.textCls,leaf:c.leaf,expandable:f.isExpandable(),isLast:f.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:c.href,hrefTarget:c.hrefTarget,lines:p,metaData:a,childCls:j.getChildCls?j.getChildCls()+" ":"",value:h?h.apply(j.origScope,arguments):m}}},0,["treecolumn"],["component","box","container","headercontainer","gridcolumn","treecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,treecolumn:true},["widget.treecolumn"],0,[Ext.tree,"Column"],0));(Ext.cmd.derive("Ext.grid.NavigationModel",Ext.view.NavigationModel,{focusCls:"x-grid-item-focused",getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,cellmousedown:a.onCellMouseDown,cellclick:a.onCellClick,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemClick,refresh:a.onViewRefresh,scope:a}},initKeyNav:function(a){var b=this;b.position=new Ext.grid.CellContext(a);b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"cellkeydown",processEvent:function(f,c,h,d,k,g,j){return j},up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},onCellMouseDown:function(c,a,g,b,j,f,d){var h=d.parentEvent;if(!h||h.type!=="touchstart"){this.setPosition(d.position,null,d)}},onCellClick:function(d,b,g,c,h,f,a){if(this.position.isEqual(a.position)){this.fireNavigateEvent(a)}else{this.setPosition(a.position,null,a)}},onItemMouseDown:function(m,g,p,j,a){var k=this,n,d,h,f,c,l,o=a.parentEvent;if(!o||o.type!=="touchstart"){if(!a.position.cellElement){n=a.getX();d=m.getVisibleColumnManager().getColumns();h=d.length;for(f=0;f<h;f++){c=d[f];l=d[f].getBox();if(n>=l.left&&n<l.right){k.setPosition(g,d[f],a);return}}}}},onItemClick:function(c,b,f,d,a){if(!a.position.cellElement){this.fireNavigateEvent(a)}},deferSetPosition:function(c,b,d,g,a,h){var f=this.view.getFocusTask();f.delay(c,this.setPosition,this,[b,d,g,a,h]);return f},setPosition:function(f,k,l,q,m){var n=this,p,h,a,b,c,j,g,o=f==null&&k==null,d=n.record==null&&n.recordIndex==null&&n.item==null;if(f&&f.isCellContext){p=f.view}else{if(l&&l.view){p=l.view}else{if(n.lastFocused){p=n.lastFocused.view}else{p=n.view}}}h=p.getSelectionModel();a=p.dataSource;p.getFocusTask().cancel();if(p.isDestroyed||!p.refreshCounter||o&&d){return}if(f&&f.isCellContext){j=f.record;b=f.rowIdx;c=f.colIdx;g=f.column}else{if(o){j=b=null}else{if(k==null){k=n.lastFocused?n.lastFocused.column:0}if(typeof f==="number"){b=Math.max(Math.min(f,a.getCount()-1),0);j=a.getAt(f)}else{if(f.isEntity){j=f;b=a.indexOf(j);if(b===-1){j=null}}else{if(f.tagName){j=p.getRecord(f);b=a.indexOf(j);if(b===-1){j=null}}else{if(d){return}o=true;j=b=null}}}}if(j){if(k==null){if(!(g=n.column)){c=0;g=p.getVisibleColumnManager().getColumns()[c]}}else{if(typeof k==="number"){g=p.getVisibleColumnManager().getColumns()[k];c=k}else{g=k;c=p.getVisibleColumnManager().indexOf(k)}}}else{o=true;g=c=null}}if(b===n.recordIndex&&c===n.columnIndex){return}if(n.cell){n.cell.removeCls(n.focusCls)}n.previousRecordIndex=n.recordIndex;n.previousRecord=n.record;n.previousItem=n.item;n.previousCell=n.cell;n.previousColumn=n.column;n.previousColumnIndex=n.columnIndex;n.previousPosition=n.position.clone();n.position.setAll(p,n.recordIndex=b,n.columnIndex=c,n.record=j,n.column=g);if(o){n.item=n.cell=null}else{n.focusPosition(n.position)}if(!q){h.fireEvent("focuschange",h,n.previousRecord,n.record);p.fireEvent("rowfocus",n.record,n.item,n.recordIndex);p.fireEvent("cellfocus",n.record,n.cell,n.position)}if(!m&&n.cell!==n.previousCell){n.fireNavigateEvent(l)}},focusPosition:function(a){var c=this,b,d;c.item=c.cell=null;if(a&&a.record&&a.column){b=a.view;if(a.rowElement){d=c.item=a.rowElement}else{d=b.getRowByRecord(a.record)}if(d){c.cell=a.cellElement||Ext.fly(d).down(a.column.getCellSelector(),true);if(c.cell){c.cell=new Ext.dom.Fly(c.cell);b.lastFocused=c.lastFocused=c.position.clone();c.focusItem(c.cell);b.focusEl=c.cell}else{c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}}else{d=a.rowIdx;c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null;if(b.bufferedRenderer){b.bufferedRenderer.scrollTo(d,false,c.afterBufferedScrollTo,c)}}}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getCell:function(){return this.cell},getPosition:function(){var c=this,a=c.position,b;if(a.record&&a.column){b=a.view;if(b.dataSource.indexOf(a.record)===-1||b.getVisibleColumnManager().indexOf(a.column)==-1){a.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}else{return a}}},getLastFocused:function(){var c=this,a,b=c.lastFocused;if(b&&b.record&&b.column){a=b.view;if(a.dataSource.indexOf(b.record)!==-1&&a.getVisibleColumnManager().indexOf(b.column)!==-1){return b}}},onKeyUp:function(b){var a=b.view.walkRecs(b.record,-1);if(a){this.setPosition(a,this.columnIndex,b)}},onKeyDown:function(b){var a=b.record.isExpandingOrCollapsing?null:b.view.walkRecs(b.record,1);if(a){this.setPosition(a,this.columnIndex,b)}},onKeyRight:function(b){var a=this.move("right",b);if(a){this.setPosition(a,null,b)}},onKeyLeft:function(b){var a=this.move("left",b);if(a){this.setPosition(a,null,b)}},move:function(b,d){var c=this,a=c.getPosition();if(a&&a.record){return a.view.walkCells(a,b,null,c.preventWrap)}},onKeyPageDown:function(f){var d=this,a=f.view,g=d.getRowsVisible(),c,b;if(g){if(a.bufferedRenderer){c=Math.min(f.recordIndex+g,a.dataSource.getCount()-1);d.lastKeyEvent=f;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(f.record,g);d.setPosition(b,null,f)}}},onKeyPageUp:function(f){var d=this,a=f.view,g=d.getRowsVisible(),c,b;if(g){if(a.bufferedRenderer){c=Math.max(f.recordIndex-g,0);d.lastKeyEvent=f;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(f.record,-g);d.setPosition(b,null,f)}}},onKeyHome:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(0,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,0,c)}},afterBufferedScrollTo:function(b,a){this.setPosition(a,null,this.lastKeyEvent)},onKeyEnd:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(a.store.getCount()-1,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,a.dataSource.getCount()-1-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,c.view.getVisibleColumnManager().getColumns().length-1,c)}},getRowsVisible:function(){var f=false,a=this.view,d=a.all.first(),b,c;if(d){b=d.getHeight();c=a.el.getHeight();f=Math.floor(c/b)}return f},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{view:a.position.view,navigationModel:a,keyEvent:b||new Ext.event.Event({}),previousPosition:a.previousPosition,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,previousCell:a.previousCell,previousColumnIndex:a.previousColumnIndex,previousColumn:a.previousColumn,position:a.position,recordIndex:a.recordIndex,record:a.record,item:a.item,cell:a.cell,columnIndex:a.columnIndex,column:a.column})}},0,0,0,0,["view.navigation.grid"],0,[Ext.grid,"NavigationModel"],0));(Ext.cmd.derive("Ext.tree.NavigationModel",Ext.grid.NavigationModel,{initKeyNav:function(a){var b=this;Ext.grid.NavigationModel.prototype.initKeyNav.call(this,a);b.keyNav.map.addBinding([{key:"8",shift:true,handler:b.onAsterisk,scope:b},{key:Ext.event.Event.NUM_MULTIPLY,handler:b.onAsterisk,scope:b}])},onKeyLeft:function(d){var c=this,b=c.view,a=c.record;if(!a.isLeaf()&&a.isExpanded()){b.collapse(a)}else{a=a.parentNode;if(a&&!(a.isRoot()&&!b.rootVisible)){c.setPosition(a,null,d)}}},onKeyRight:function(c){var b=this,a=b.record;if(!a.isLeaf()){if(!a.isExpanded()){b.view.expand(a)}else{a=a.childNodes[0];if(a){b.setPosition(a)}}}},onKeyEnter:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else{Ext.grid.NavigationModel.prototype.onKeyEnter.call(this,a)}},onKeySpace:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else{Ext.grid.NavigationModel.prototype.onKeySpace.call(this,a)}},toggleCheck:function(a){this.view.onCheckChange(this.record)},onAsterisk:function(a){this.view.ownerCt.expandAll()}},0,0,0,0,["view.navigation.tree"],0,[Ext.tree,"NavigationModel"],0));(Ext.cmd.derive("Ext.tree.Panel",Ext.panel.Table,{alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",selType:"treemodel",treeCls:"x-tree-panel",rowLines:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:true,arrowCls:"x-tree-arrows",linesCls:"x-tree-lines",noLinesCls:"x-tree-no-lines",autoWidthCls:"x-autowidth-table",constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;Ext.panel.Table.prototype.constructor.call(this,a)},initComponent:function(){var d=this,b=[d.treeCls],c=d.store,a;if(d.useArrows){b.push(d.arrowCls);d.lines=false}if(d.lines){b.push(d.linesCls)}else{if(!d.useArrows){b.push(d.noLinesCls)}}if(Ext.isString(c)){c=d.store=Ext.StoreMgr.lookup(c)}else{if(!c||!c.isStore){c=Ext.apply({type:"tree",root:d.root,fields:d.fields,model:d.model,proxy:"memory",folderSort:d.folderSort},c);c=d.store=Ext.StoreMgr.lookup(c)}else{if(d.root){c=d.store=Ext.data.StoreManager.lookup(c);c.setRoot(d.root);if(d.folderSort!==undefined){c.folderSort=d.folderSort;c.sort()}}}}c.setRootVisible(d.rootVisible);if(!c.getRoot()){c.setRoot({})}d.viewConfig=Ext.apply({rootVisible:d.rootVisible,animate:d.enableAnimations,singleExpand:d.singleExpand,node:c.getRoot(),hideHeaders:d.hideHeaders,navigationModel:"tree"},d.viewConfig);if(!d.columns){if(d.initialConfig.hideHeaders===undefined){d.hideHeaders=true}d.addCls(d.autoWidthCls);d.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:d.displayField}]}if(d.cls){b.push(d.cls)}d.cls=b.join(" ");Ext.panel.Table.prototype.initComponent.call(this);a=d.getView();d.relayEvents(a,["checkchange","afteritemexpand","afteritemcollapse"])},getSelectionModel:function(){var a=Ext.panel.Table.prototype.getSelectionModel.call(this);a.treeStore=this.getStore();return a},bindStore:function(b,c){var d=this,a=b.getRoot(),f=d.bufferedRenderer;Ext.panel.Table.prototype.bindStore.apply(this,arguments);if(f){if(f.store){f.bindStore(b)}}else{f={xclass:"Ext.grid.plugin.BufferedRenderer"};Ext.copyTo(f,d,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer");d.bufferedRenderer=f=d.addPlugin(f)}b.singleExpand=d.singleExpand;d.storeListeners=d.mon(b,{destroyable:true,rootchange:d.onRootChange,scope:d});d.storeRelayers=d.relayEvents(b,["beforeload","load"]);d.rootRelayers=d.mon(a,{destroyable:true,append:d.createRelayer("itemappend"),remove:d.createRelayer("itemremove"),move:d.createRelayer("itemmove",[0,4]),insert:d.createRelayer("iteminsert"),beforeappend:d.createRelayer("beforeitemappend"),beforeremove:d.createRelayer("beforeitemremove"),beforemove:d.createRelayer("beforeitemmove"),beforeinsert:d.createRelayer("beforeiteminsert"),expand:d.createRelayer("itemexpand",[0,1]),collapse:d.createRelayer("itemcollapse",[0,1]),beforeexpand:d.createRelayer("beforeitemexpand",[0,1]),beforecollapse:d.createRelayer("beforeitemcollapse",[0,1])});if(!d.rootVisible&&!b.autoLoad&&!(a.isExpanded()||a.isLoading())){if(a.isLoaded()){a.data.expanded=true;b.onNodeExpand(a,a.childNodes)}else{a.data.expanded=false;a.expand()}}b.ownerTree=d;if(!c){d.view.setRootNode(a,true)}},unbindStore:function(){var b=this,a=b.store;if(a){Ext.panel.Table.prototype.unbindStore.call(this);Ext.destroy(b.storeListeners,b.storeRelayers,b.rootRelayers);delete a.ownerTree;a.singleExpand=null}},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandNode:function(b,a,d,c){return this.getView().expand(b,a,d,c||this)},collapseNode:function(b,a,d,c){return this.getView().collapse(b,a,d,c||this)},expandAll:function(f,c){var d=this,a=d.getRootNode(),b=d.enableAnimations;if(a){if(!b){Ext.suspendLayouts()}a.expand(true,f,c||d);if(!b){Ext.resumeLayouts(true)}}},collapseAll:function(g,d){var f=this,b=f.getRootNode(),c=f.enableAnimations,a=f.getView();if(b){if(!c){Ext.suspendLayouts()}d=d||f;if(a.rootVisible){b.collapse(true,g,d)}else{b.collapseChildren(true,g,d)}if(!c){Ext.resumeLayouts(true)}}},expandPath:function(l,f,a,g,k){var d=this,c=d.getRootNode(),b=1,j,h;f=f||d.getRootNode().idProperty;a=a||"/";if(Ext.isEmpty(l)){Ext.callback(g,k||d,[false,null]);return}j=l.split(a);if(c.get(f)!=j[1]){Ext.callback(g,k||d,[false,c]);return}h=function(){if(++b===j.length){Ext.callback(g,k||d,[true,c]);return}var m=c.findChild(f,j[b]);if(!m){Ext.callback(g,k||d,[false,c]);return}c=m;c.expand(false,h)};c.expand(false,h)},selectPath:function(k,d,a,g,j){var b=this,c,h,f;d=d||b.getRootNode().idProperty;a=a||"/";h=k.split(a);f=h.pop();if(h.length>1){b.expandPath(h.join(a),d,a,function(n,m){var l=m;if(n&&m){m=m.findChild(d,f);if(m){b.getSelectionModel().select(m);Ext.callback(g,j||b,[true,m]);return}}Ext.callback(g,j||b,[false,l])},b)}else{c=b.getRootNode();if(c.getId()===f){b.getSelectionModel().select(c);Ext.callback(g,j||b,[true,c])}else{Ext.callback(g,j||b,[false,null])}}}},1,["treepanel"],["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},["widget.treepanel"],0,[Ext.tree,"Panel",Ext.tree,"TreePanel",Ext,"TreePanel"],0));Ext.define("FBEditor.override.tree.Panel",{override:"Ext.tree.Panel"});(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var a=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);a.xclass="Ext.resizer.BorderSplitterTracker";return a}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(m,b,w){var u=this,c=u.axisProps[w],r=!c.horizontal,l=c.sizeProp,p=0,a=m.childItems,g=a.length,t,q,o,h,s,f,k,n,d,v,j;for(q=0;q<g;++q){o=a[q];s=o.target;o.layoutPos={};if(s.region){o.region=f=s.region;o.isCenter=s.isCenter;o.isHorz=s.isHorz;o.isVert=s.isVert;o.weight=s.weight||u.regionWeights[f]||0;s.weight=o.weight;b[s.id]=o;if(s.isCenter){t=o;h=s.flex;m.centerRegion=t;continue}if(r!==o.isVert){continue}o.reverseWeighting=(f==c.borderEnd);n=s[l];d=typeof n;if(!s.collapsed){if(d=="string"&&(k=u.percentageRe.exec(n))){o.percentage=parseInt(k[1],10)}else{if(s.flex){p+=o.flex=s.flex}}}}}if(t){v=t.target;if((j=v.placeholderFor)){if(!h&&r===j.collapsedVertical()){h=0;t.collapseAxis=w}}else{if(v.collapsed&&(r===v.collapsedVertical())){h=0;t.collapseAxis=w}}}if(h==null){h=1}p+=h;return Ext.apply({before:r?"top":"left",totalFlex:p},c)},beginLayout:function(d){var l=this,k=l.getLayoutItems(),f=l.padding,m=typeof f,p=false,q,o,b,h,g,a,c,j,n;if(f){if(m=="string"||m=="number"){f=Ext.util.Format.parseBox(f)}}else{f=d.getEl("getTargetEl").getPaddingInfo();p=true}d.outerPad=f;d.padOnContainer=p;for(h=0,b=k.length;h<b;++h){o=k[h];a=l.getSplitterTarget(o);if(a){c=undefined;j=!!o.hidden;if(!a.split){if(a.isCollapsingOrExpanding){c=!!a.collapsed}}else{if(j!==a.hidden){c=!a.hidden}}if(c){o.show()}else{if(c===false){o.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);k=d.childItems;b=k.length;g={};d.borderAxisHorz=l.beginAxis(d,g,"horz");d.borderAxisVert=l.beginAxis(d,g,"vert");for(h=0;h<b;++h){q=k[h];a=l.getSplitterTarget(q.target);if(a){n=g[a.id];if(!n){n=d.getEl(a.el,l);n.region=a.region}q.collapseTarget=a=n;q.weight=a.weight;q.reverseWeighting=a.reverseWeighting;a.splitter=q;q.isHorz=a.isHorz;q.isVert=a.isVert}}l.sortWeightedItems(k,"reverseWeighting");l.setupSplitterNeighbors(k)},calculate:function(d){var m=this,a=m.getContainerSize(d),j=d.childItems,c=j.length,b=d.borderAxisHorz,k=d.borderAxisVert,f=d.outerPad,o=d.padOnContainer,h,q,l,p,n,g;b.begin=f[m.padOnContainerProp];k.begin=f.top;n=b.end=b.flexSpace=a.width+(o?f[m.padOnContainerProp]:-f[m.padNotOnContainerProp]);g=k.end=k.flexSpace=a.height+(o?f.top:-f.bottom);for(h=0;h<c;++h){q=j[h];l=q.getMarginInfo();if(q.isHorz||q.isCenter){b.addUnflexed(l.width);n-=l.width}if(q.isVert||q.isCenter){k.addUnflexed(l.height);g-=l.height}if(!q.flex&&!q.percentage){if(q.isHorz||(q.isCenter&&q.collapseAxis==="horz")){p=q.getProp("width");b.addUnflexed(p);if(q.collapseTarget){n-=p}}else{if(q.isVert||(q.isCenter&&q.collapseAxis==="vert")){p=q.getProp("height");k.addUnflexed(p);if(q.collapseTarget){g-=p}}}}}for(h=0;h<c;++h){q=j[h];l=q.getMarginInfo();if(q.percentage){if(q.isHorz){p=Math.ceil(n*q.percentage/100);p=q.setWidth(p);b.addUnflexed(p)}else{if(q.isVert){p=Math.ceil(g*q.percentage/100);p=q.setHeight(p);k.addUnflexed(p)}}}}for(h=0;h<c;++h){q=j[h];if(!q.isCenter){m.calculateChildAxis(q,b);m.calculateChildAxis(q,k)}}if(m.finishAxis(d,k)+m.finishAxis(d,b)<2){m.done=false}else{m.finishPositions(j)}},calculateChildAxis:function(m,c){var a=m.collapseTarget,h="set"+c.sizePropCap,f=c.sizeProp,d=m.getMarginInfo()[f],k,b,g,j,l;if(a){k=a.region}else{k=m.region;g=m.flex}b=k==c.borderBegin;if(!b&&k!=c.borderEnd){m[h](c.end-c.begin-d);j=c.begin}else{if(g){l=Math.ceil(c.flexSpace*(g/c.totalFlex));l=m[h](l)}else{if(m.percentage){l=m.peek(f)}else{l=m.getProp(f)}}l+=d;if(b){j=c.begin;c.begin+=l}else{c.end=j=c.end-l}}m.layoutPos[c.posProp]=j},eachItem:function(h,d,c){var g=this,a=g.getLayoutItems(),b=0,f;if(Ext.isFunction(h)){d=h;c=d}for(b;b<a.length;b++){f=a[b];if(!h||f.region===h){if(d.call(c,f)===false){break}}}},finishAxis:function(d,c){var b=c.end-c.begin,a=d.centerRegion;if(a){a["set"+c.sizePropCap](b-a.getMarginInfo()[c.sizeProp]);a.layoutPos[c.posProp]=c.begin}return Ext.isNumber(b)?1:0},finishPositions:function(f){var c=f.length,b,a,d=this.horzPositionProp;for(b=0;b<c;++b){a=f[b];a.setProp("x",a.layoutPos.x+a.marginInfo[d]);a.setProp("y",a.layoutPos.y+a.marginInfo.top)}},getLayoutItems:function(){var a=this.owner,f=(a&&a.items&&a.items.items)||[],d=f.length,b=[],c=0,g,h;for(;c<d;c++){g=f[c];h=g.placeholderFor;if(g.hidden||((!g.floated||g.isCollapsingOrExpanding===2)&&!(h&&h.isCollapsingOrExpanding===2))){b.push(g)}}return b},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,true)},getMinMaxWeight:function(d,a){var b=this,c=null;b.eachItem(d,function(f){if(f.hasOwnProperty("weight")){if(c===null){c=f.weight;return}if((a&&f.weight<c)||f.weight>c){c=f.weight}}},this);return c},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},insertSplitter:function(d,c,g,b){var h=d.region,f=Ext.apply({xtype:"bordersplitter",collapseTarget:d,id:d.id+"-splitter",hidden:g,canResize:d.splitterResize!==false,splitterFor:d,synthetic:true},b),a=c+((h==="south"||h==="east")?0:1);if(d.collapseMode==="mini"){f.collapsedCls=d.collapsedCls}d.splitter=this.owner.add(a,f)},getMoveAfterIndex:function(b){var a=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(b.splitter){a++}return a},moveItemBefore:function(b,d){var a=this.owner,c;if(d&&d.splitter){c=d.region;if(c==="south"||c==="east"){d=d.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,b,d)},onAdd:function(k,d){var g=this,c=k.placeholderFor,j=k.region,f,h,a,b;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(j){Ext.apply(k,g.regionFlags[j]);if(k.initBorderRegion){k.initBorderRegion()}f=j==="center";if(f){g.centerRegion=k}else{h=k.split;a=!!k.hidden;if(typeof h==="object"){b=h;h=true}if((k.isHorz||k.isVert)&&(h||k.collapseMode=="mini")){g.insertSplitter(k,d,a||!h,b)}}if(!f&&!k.hasOwnProperty("collapseMode")){k.collapseMode=g.panelCollapseMode}if(!k.hasOwnProperty("animCollapse")){if(k.collapseMode!=="placeholder"){k.animCollapse=false}else{k.animCollapse=g.panelCollapseAnimate}}}else{if(c){Ext.apply(k,g.regionFlags[c.region]);k.region=c.region;k.weight=c.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(b,d){var f=this,j=b.region,g=b.splitter,a=f.owner,h=a.destroying,c;if(j){if(b.isCenter){f.centerRegion=null}delete b.isCenter;delete b.isHorz;delete b.isVert;if(g&&!a.destroying){a.doRemove(g,true)}delete b.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!h&&!d&&b.rendered){c=b.getEl();if(c){c.setStyle("top","");c.setStyle(f.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(m){var p={},f=m.length,o=this.touchedRegions,h,g,a,l,d,k,n,b,c;for(h=0;h<f;++h){k=m[h].target;n=k.region;if(k.isCenter){a=k}else{if(n){c=o[n];for(g=0,l=c.length;g<l;++g){d=p[c[g]];if(d){d.neighbors.push(k)}}if(k.placeholderFor){b=k.placeholderFor.splitter}else{b=k.splitter}if(b){b.neighbors=[]}p[n]=b}}}if(a){c=o.center;for(g=0,l=c.length;g<l;++g){d=p[c[g]];if(d){d.neighbors.push(a)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(f){var d=this,a=this.sizePolicies,c,b,g,h;if(f.isCenter){h=f.placeholderFor;if(h){if(h.collapsedVertical()){return a.vert}return a.horz}if(f.collapsed){if(f.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}c=f.collapseTarget;if(c){return c.isVert?a.vert:a.horz}if(f.region){if(f.isVert){b=f.height;g=a.vert}else{b=f.width;g=a.horz}if(f.flex||(typeof b=="string"&&d.percentageRe.test(b))){return a.flexAll}return g}return d.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var a={addUnflexed:function(c){this.flexSpace=Math.max(this.flexSpace-c,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)}));(Ext.cmd.derive("Ext.layout.container.Card",Ext.layout.container.Fit,{alternateClassName:"Ext.layout.CardLayout",type:"card",hideInactive:true,deferredRender:false,getRenderTree:function(){var a=this,b=a.getActiveItem();if(b){if(b.hasListeners.beforeactivate&&b.fireEvent("beforeactivate",b)===false){b=a.activeItem=a.owner.activeItem=null}else{if(b.hasListeners.activate){b.on({boxready:function(){b.fireEvent("activate",b)},single:true})}}if(a.deferredRender){if(b){return a.getItemsRenderTree([b])}}else{return Ext.layout.container.Fit.prototype.getRenderTree.apply(this,arguments)}}},renderChildren:function(){var a=this,b=a.getActiveItem();if(!a.deferredRender){Ext.layout.container.Fit.prototype.renderChildren.call(this)}else{if(b){a.renderItems([b],a.getRenderTarget())}}},isValidParent:function(c,d,a){var b=c.el?c.el.dom:Ext.getDom(c);return(b&&b.parentNode===(d.dom||d))||false},getActiveItem:function(){var b=this,a=b.parseActiveItem(b.activeItem||(b.owner&&b.owner.activeItem));if(a&&b.owner.items.indexOf(a)!=-1){b.activeItem=a}else{b.activeItem=null}return b.activeItem},parseActiveItem:function(a){if(a&&a.isComponent){return a}else{if(typeof a=="number"||a===undefined){return this.getLayoutItems()[a||0]}else{return this.owner.getComponent(a)}}},configureItem:function(a){if(a===this.getActiveItem()){a.hidden=false}else{a.hidden=true}Ext.layout.container.Fit.prototype.configureItem.apply(this,arguments)},onRemove:function(a){Ext.layout.container.Fit.prototype.onRemove.apply(this,arguments);if(a===this.activeItem){this.activeItem=null}},getAnimation:function(b,a){var c=(b||{}).cardSwitchAnimation;if(c===false){return false}return c||a.cardSwitchAnimation},getNext:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b+1]||(c?a[0]:false)},next:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getNext(a),b)},getPrev:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b-1]||(c?a[a.length-1]:false)},prev:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getPrev(a),b)},setActiveItem:function(b){var f=this,a=f.owner,d=f.activeItem,g=a.rendered,c;b=f.parseActiveItem(b);c=a.items.indexOf(b);if(c==-1){c=a.items.items.length;Ext.suspendLayouts();b=a.add(b);Ext.resumeLayouts()}if(b&&d!=b){if(b.fireEvent("beforeactivate",b,d)===false){return false}if(d&&d.fireEvent("beforedeactivate",d,b)===false){return false}if(g){Ext.suspendLayouts();if(!b.rendered){f.renderItem(b,f.getRenderTarget(),a.items.length)}if(d){if(f.hideInactive){d.hide();d.hiddenByLayout=true}d.fireEvent("deactivate",d,b)}if(b.hidden){b.show()}if(!b.hidden){f.activeItem=b}Ext.resumeLayouts(true)}else{f.activeItem=b}b.fireEvent("activate",b,d);return f.activeItem}return false}},0,0,0,0,["layout.card"],0,[Ext.layout.container,"Card",Ext.layout,"CardLayout"],0));(Ext.cmd.derive("Ext.tab.Tab",Ext.button.Button,{isTab:true,tabIndex:-1,baseCls:"x-tab",closeElOverCls:"x-tab-close-btn-over",closeElPressedCls:"x-tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:true,closeText:"Close Tab",active:false,childEls:["closeEl"],scale:false,ariaRole:"tab",_btnWrapCls:"x-tab-wrap",_btnCls:"x-tab-button",_baseIconCls:"x-tab-icon-el",_glyphCls:"x-tab-glyph",_innerCls:"x-tab-inner",_textCls:"x-tab-text",_noTextCls:"x-tab-no-text",_hasIconCls:"x-tab-icon",_activeCls:"x-tab-active",_closableCls:"x-tab-closable",overCls:"x-tab-over",_pressedCls:"x-tab-pressed",_disabledCls:"x-tab-disabled",_rotateClasses:{1:"x-tab-rotate-right",2:"x-tab-rotate-left"},_positions:{top:{"default":"top",0:"top",1:"left",2:"right"},right:{"default":"top",0:"right",1:"top",2:"bottom"},bottom:{"default":"bottom",0:"bottom",1:"right",2:"left"},left:{"default":"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var a=this;if(a.card){a.setCard(a.card)}Ext.button.Button.prototype.initComponent.apply(this,arguments)},getActualRotation:function(){var a=this.getRotation();return(a!=="default")?a:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var g=this,b=g._positions,a=g._rotateClasses,c=g.getTabPosition(),k=g.getActualRotation(),j=g._rotateCls,d=g._rotateCls=a[k],f=g._positionCls,h=g._positionCls=g._positions[c][k];if(j!==d){if(j){g.removeCls(j)}if(d){g.addCls(d)}}if(f!==h){if(f){g.removeClsWithUI(f)}if(h){g.addClsWithUI(h)}if(g.rendered){g.updateFrame()}}if(g.rendered){g.setElOrientation()}},onAdded:function(b,c,a){Ext.button.Button.prototype.onAdded.call(this,b,c,a);this.syncRotationAndPosition()},getTemplateArgs:function(){var b=this,a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.closable=b.closable;a.closeText=b.closeText;return a},beforeRender:function(){var b=this,a=b.up("tabbar"),c=b.up("tabpanel");Ext.button.Button.prototype.beforeRender.call(this);if(b.active){b.addCls(b._activeCls)}b.syncClosableCls();if(!b.minWidth){b.minWidth=(a)?a.minTabWidth:b.minWidth;if(!b.minWidth&&c){b.minWidth=c.minTabWidth}if(b.minWidth&&b.iconCls){b.minWidth+=25}}if(!b.maxWidth){b.maxWidth=(a)?a.maxTabWidth:b.maxWidth;if(!b.maxWidth&&c){b.maxWidth=c.maxTabWidth}}},onRender:function(){var a=this;a.setElOrientation();Ext.button.Button.prototype.onRender.apply(this,arguments);if(a.closable){a.closeEl.addClsOnOver(a.closeElOverCls);a.closeEl.addClsOnClick(a.closeElPressedCls)}a.initKeyNav()},initKeyNav:function(){var a=this;a.keyNav=new Ext.util.KeyNav(a.el,{enter:a.onEnterKey,del:a.onDeleteKey,scope:a})},setElOrientation:function(){var c=this,a=c.getActualRotation(),b=c.el;if(a){b.setVertical(a===1?90:270)}else{b.setHorizontal()}},enable:function(a){var b=this;Ext.button.Button.prototype.enable.apply(this,arguments);b.removeCls(b._disabledCls);return b},disable:function(a){var b=this;Ext.button.Button.prototype.disable.apply(this,arguments);b.addCls(b._disabledCls);return b},onDestroy:function(){var a=this;Ext.destroy(a.keyNav);delete a.keyNav;Ext.button.Button.prototype.onDestroy.apply(this,arguments)},setClosable:function(a){var b=this;a=(!arguments.length||!!a);if(b.closable!=a){b.closable=a;if(b.card){b.card.closable=a}b.syncClosableCls();if(b.rendered){b.syncClosableElements();b.updateLayout()}}},syncClosableElements:function(){var a=this,b=a.closeEl;if(a.closable){if(!b){b=a.closeEl=a.btnWrap.insertSibling({tag:"a",role:"presentation",cls:a.baseCls+"-close-btn",href:"#",title:a.closeText},"after")}b.addClsOnOver(a.closeElOverCls);b.addClsOnClick(a.closeElPressedCls)}else{if(b){b.destroy();delete a.closeEl}}},syncClosableCls:function(){var b=this,a=b._closableCls;if(b.closable){b.addCls(a)}else{b.removeCls(a)}},setCard:function(a){var b=this;b.card=a;if(a.iconAlign){b.setIconAlign(a.iconAlign)}if(a.textAlign){b.setTextAlign(a.textAlign)}b.setText(b.title||a.title);b.setIconCls(b.iconCls||a.iconCls);b.setIcon(b.icon||a.icon);b.setGlyph(b.glyph||a.glyph)},onCloseClick:function(){var a=this;if(a.fireEvent("beforeclose",a)!==false){if(a.tabBar){if(a.tabBar.closeTab(a)===false){return}}else{a.fireClose()}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(b){var a=this;if(a.tabBar){a.tabBar.onClick(b,a.el)}},onDeleteKey:function(a){if(this.closable){this.onCloseClick()}},afterClick:function(a){if(!a){this.focus()}},activate:function(b){var a=this;a.active=true;a.addCls(a._activeCls);if(b!==true){a.fireEvent("activate",a)}},deactivate:function(b){var a=this;a.active=false;a.removeCls(a._activeCls);if(b!==true){a.fireEvent("deactivate",a)}},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(a){this.el=new Ext.dom.Element(a)}}},0,["tab"],["component","box","button","tab"],{component:true,box:true,button:true,tab:true},["widget.tab"],0,[Ext.tab,"Tab"],0));(Ext.cmd.derive("Ext.layout.component.Body",Ext.layout.component.Auto,{type:"body",beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.bodyContext=a.getEl("body")},beginLayoutCycle:function(d,b){var c=this,g=c.lastWidthModel,f=c.lastHeightModel,a=c.owner.body;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(g&&g.fixed&&d.widthModel.shrinkWrap){a.setWidth(null)}if(f&&f.fixed&&d.heightModel.shrinkWrap){a.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(c,b){var a=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments);if(c.targetContext!=c){a+=c.getPaddingInfo().height}return a},calculateOwnerWidthFromContentWidth:function(c,a){var b=Ext.layout.component.Auto.prototype.calculateOwnerWidthFromContentWidth.apply(this,arguments);if(c.targetContext!=c){b+=c.getPaddingInfo().width}return b},measureContentWidth:function(a){return a.bodyContext.setWidth(a.bodyContext.el.dom.offsetWidth,false)},measureContentHeight:function(a){return a.bodyContext.setHeight(a.bodyContext.el.dom.offsetHeight,false)},publishInnerHeight:function(c,a){var d=a-c.getFrameInfo().height,b=c.targetContext;if(b!=c){d-=c.getPaddingInfo().height}return c.bodyContext.setHeight(d,!c.heightModel.natural)},publishInnerWidth:function(d,c){var a=c-d.getFrameInfo().width,b=d.targetContext;if(b!=d){a-=d.getPaddingInfo().width}d.bodyContext.setWidth(a,!d.widthModel.natural)}},0,0,0,0,["layout.body"],0,[Ext.layout.component,"Body"],0));(Ext.cmd.derive("Ext.tab.Bar",Ext.panel.Bar,{baseCls:"x-tab-bar",componentLayout:"body",isTabBar:true,config:{tabRotation:"default",tabStretchMax:true},defaultType:"tab",plain:false,ariaRole:"tablist",childEls:["body","strip"],_stripCls:"x-tab-bar-strip",_baseBodyCls:"x-tab-bar-body",renderTpl:'<div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} {bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>{%this.renderContainer(out,values)%}</div><div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:"right",right:"left"},_layoutAlign:{top:"end",right:"begin",bottom:"begin",left:"end"},initComponent:function(){var f=this,a=f.initialConfig.layout,c=a&&a.align,b=a&&a.overflowHandler,d;if(f.plain){f.addCls(f.baseCls+"-plain")}Ext.panel.Bar.prototype.initComponent.call(this);f.setLayout({align:c||(f.getTabStretchMax()?"stretchmax":f._layoutAlign[f.dock]),overflowHandler:b||"scroller"});f.on({click:f.onClick,element:"el",scope:f})},initRenderData:function(){var a=this;return Ext.apply(Ext.panel.Bar.prototype.initRenderData.call(this),{bodyCls:a.bodyCls,baseBodyCls:a._baseBodyCls,bodyTargetCls:a.bodyTargetCls,stripCls:a._stripCls,dock:a.dock})},setDock:function(h){var g=this,a=g.items,c=g.ownerCt,f,b,d;a=a&&a.items;if(a){for(b=0,d=a.length;b<d;b++){f=a[b];if(f.isTab){f.setTabPosition(h)}}}if(g.rendered){g.resetItemMargins();if(c&&c.isHeader){c.resetItemMargins()}g.needsScroll=true}Ext.panel.Bar.prototype.setDock.call(this,h)},updateTabRotation:function(g){var f=this,a=f.items,b,d,c;a=a&&a.items;if(a){for(b=0,d=a.length;b<d;b++){c=a[b];if(c.isTab){c.setRotation(g)}}}if(f.rendered){f.resetItemMargins();f.needsScroll=true;f.updateLayout()}},onRender:function(){var a=this;Ext.panel.Bar.prototype.onRender.call(this);if(Ext.isIE8&&a.vertical){a.el.on({mousemove:a.onMouseMove,scope:a})}},afterLayout:function(){this.adjustTabPositions();Ext.panel.Bar.prototype.afterLayout.apply(this,arguments)},adjustTabPositions:function(){var a=this.items.items,d=a.length,g,b,f,c;if(!Ext.isIE8){while(d--){g=a[d];f=g.el;b=g.lastBox;c=g.isTab?g.getActualRotation():0;if(c===1&&g.isVisible()){f.setStyle("left",(b.x+b.width)+"px")}else{if(c===2&&g.isVisible()){f.setStyle("left",(b.x-b.height)+"px")}}}}},onAdded:function(b,c,a){if(b.isHeader){this.addCls(b.baseCls+"-"+b.ui+"-tab-bar")}Ext.panel.Bar.prototype.onAdded.call(this,b,c,a)},onRemove:function(a){var b=this;if(a===b.previousTab){b.previousTab=null}Ext.panel.Bar.prototype.onRemove.apply(this,arguments)},onRemoved:function(b){var a=this.ownerCt;if(a.isHeader){this.removeCls(a.baseCls+"-"+a.ui+"-tab-bar")}Ext.panel.Bar.prototype.onRemoved.call(this,b)},afterComponentLayout:function(c){var d=this,b=d.needsScroll,a=d.layout.overflowHandler;Ext.panel.Bar.prototype.afterComponentLayout.apply(this,arguments);if(a&&b&&d.tooNarrow&&a.scrollToItem){a.scrollToItem(d.activeTab)}delete d.needsScroll},onMouseMove:function(f){var d=this,b=d._overTab,a,c;if(f.getTarget(".x-box-scroller")){return}a=d.getTabInfoFromPoint(f.getXY());c=a.tab;if(c!==b){if(b&&b.rendered){b.onMouseLeave(f);d._overTab=null}if(c){c.onMouseEnter(f);d._overTab=c;if(!c.disabled){d.el.setStyle("cursor","pointer")}}else{d.el.setStyle("cursor","default")}}},onMouseLeave:function(b){var a=this._overTab;if(a&&a.rendered){a.onMouseLeave(b)}},getTabInfoFromPoint:function(g){var A=this,w=A.items.items,f=w.length,o=A.layout.innerCt,u=o.getXY(),t=new Ext.util.Point(g[0],g[1]),v=0,x,b,a,p,y,j,h,d,r,l,k,n,m,s,q,z,c;for(;v<f;v++){c=w[v];x=c.lastBox;if(!x||!c.isTab){continue}l=u[0]+x.x;k=u[1]-o.dom.scrollTop+x.y;n=x.width;m=x.height;b=new Ext.util.Region(k,l+n,k+m,l);if(b.contains(t)){a=c.closeEl;if(a){if(A._isTabReversed===undefined){A._isTabReversed=q=(c.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")!==-1)}z=q?this._reverseDockNames[A.dock]:A.dock;d=a.getWidth();r=a.getHeight();y=A.getCloseXY(a,l,k,n,m,d,r,z);j=y[0];h=y[1];s=new Ext.util.Region(h,j+d,h+r,j);p=s.contains(t)}break}}return{tab:c,close:p}},getCloseXY:function(c,l,j,g,m,k,d,h){var f=c.getXY(),b,a;if(h==="right"){b=l+g-((f[1]-j)+d);a=j+(f[0]-l)}else{b=l+(f[1]-j);a=j+l+m-f[0]-k}return[b,a]},closeTab:function(c){var d=this,b=c.card,f=d.tabPanel,a;if(b&&b.fireEvent("beforeclose",b)===false){return false}a=d.findNextActivatable(c);Ext.suspendLayouts();if(f&&b){delete c.ownerCt;b.fireEvent("close",b);f.remove(b);if(!f.getComponent(b)){c.fireClose();d.remove(c)}else{c.ownerCt=d;Ext.resumeLayouts(true);return false}}if(a){if(f){f.setActiveTab(a.card)}else{d.setActiveTab(a)}a.focus()}Ext.resumeLayouts(true)},findNextActivatable:function(a){var b=this;if(a.active&&b.items.getCount()>1){return(b.previousTab&&b.previousTab!==a&&!b.previousTab.disabled)?b.previousTab:(a.next("tab[disabled=false]")||a.prev("tab[disabled=false]"))}},setActiveTab:function(b,a){var c=this;if(!b.disabled&&b!==c.activeTab){if(c.activeTab){if(c.activeTab.isDestroyed){c.previousTab=null}else{c.previousTab=c.activeTab;c.activeTab.deactivate()}}b.activate();c.activeTab=b;c.needsScroll=true;if(!a){c.fireEvent("change",c,b,b.card);c.updateLayout()}}},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(g,f){var d=this,j=d.tabPanel,h,c,b,a;if(g.getTarget(".x-box-scroller")){return}if(Ext.isIE8&&d.vertical){a=d.getTabInfoFromPoint(g.getXY());c=a.tab;b=a.close}else{h=g.getTarget("."+Ext.tab.Tab.prototype.baseCls);c=h&&Ext.getCmp(h.id);b=c&&c.closeEl&&(f===c.closeEl.dom)}if(b){g.preventDefault()}if(c&&c.isDisabled&&!c.isDisabled()){if(c.closable&&b){c.onCloseClick()}else{d.doActivateTab(c)}c.afterClick(b)}},doActivateTab:function(a){var b=this.tabPanel;if(b){b.setActiveTab(a.card)}else{this.setActiveTab(a)}},beforeFocusableChildFocus:function(d,c){var b=this,a=b.mixins.focusablecontainer;a.beforeFocusableChildFocus.call(b,d,c);if(!d.active){d.activate()}b.doActivateTab(d)}}},0,["tabbar"],["component","box","container","tabbar"],{component:true,box:true,container:true,tabbar:true},["widget.tabbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.tab,"Bar"],0));(Ext.cmd.derive("Ext.tab.Panel",Ext.panel.Panel,{alternateClassName:["Ext.TabPanel"],config:{tabBar:undefined,tabPosition:"top",tabRotation:"default",tabStretchMax:true},removePanelHeader:true,plain:false,itemCls:"x-tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var h=this,a=h.activeTab||(h.activeTab=0),k=h.getTabPosition(),g=h.getTabRotation(),j=h.dockedItems,f=h.header,b=h.tabBarHeaderPosition,c=h.getTabBar(),d;h.layout=new Ext.layout.container.Card(Ext.apply({owner:h,deferredRender:h.deferredRender,itemCls:h.itemCls,activeItem:a},h.layout));if(b!=null){if(!f){f=h.header={}}d=f.items=(f.items?f.items.slice():[]);f.itemPosition=b;d.push(c);f.hasTabBar=true}else{j=[].concat(h.dockedItems||[]);j.push(c);h.dockedItems=j}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a=h.activeTab=h.getComponent(a);if(a){c.setActiveTab(a.tab,true)}},onRender:function(){var b=this.items.items,a=b.length,c;Ext.panel.Panel.prototype.onRender.apply(this,arguments);for(c=0;c<a;++c){b[c].getBind()}},setActiveTab:function(a){var c=this,b;a=c.getComponent(a);if(a){b=c.getActiveTab();if(b===a||c.fireEvent("beforetabchange",c,a,b)===false){return false}if(!a.isComponent){Ext.suspendLayouts();a=c.add(a);Ext.resumeLayouts()}c.activeTab=a;Ext.suspendLayouts();c.layout.setActiveItem(a);a=c.activeTab=c.layout.getActiveItem();if(a&&a!==b){c.tabBar.setActiveTab(a.tab);Ext.resumeLayouts(true);if(b!==a){c.fireEvent("tabchange",c,a,b)}}else{Ext.resumeLayouts(true)}return a}},setActiveItem:function(a){return this.setActiveTab(a)},getActiveTab:function(){var b=this,a=b.getComponent(b.activeTab);if(a&&b.items.indexOf(a)!=-1){b.activeTab=a}else{b.activeTab=null}return b.activeTab},applyTabBar:function(a){var c=this,b=(c.tabBarHeaderPosition!=null)?c.getHeaderPosition():c.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:c.ui,dock:b,tabRotation:c.getTabRotation(),vertical:(b=="left"||b=="right"),plain:c.plain,tabStretchMax:c.getTabStretchMax(),tabPanel:c},a))},updateHeaderPosition:function(c,b){var a=this.getTabBar();if(a&&(this.tabBarHeaderPosition!=null)){a.setDock(c)}Ext.panel.Panel.prototype.updateHeaderPosition.call(this,c,b)},updateTabPosition:function(b){var a=this.getTabBar();if(a&&(this.tabBarHeaderPosition==null)){a.setDock(b)}},updateTabRotation:function(b){var a=this.getTabBar();if(a){a.setTabRotation(b)}},onAdd:function(g,d){var f=this,c=Ext.apply({},g.tabConfig),b=f.getTabBar(),a={xtype:"tab",title:g.title,icon:g.icon,iconCls:g.iconCls,glyph:g.glyph,ui:b.ui,card:g,disabled:g.disabled,closable:g.closable,hidden:g.hidden&&!g.hiddenByLayout,tooltip:g.tooltip,tabBar:b,tabPosition:b.dock,rotation:b.getTabRotation()};if(g.closeText!==undefined){a.closeText=g.closeText}c=Ext.applyIf(c,a);g.tab=f.tabBar.insert(d,c);g.on({scope:f,enable:f.onItemEnable,disable:f.onItemDisable,beforeshow:f.onItemBeforeShow,iconchange:f.onItemIconChange,iconclschange:f.onItemIconClsChange,glyphchange:f.onItemGlyphChange,titlechange:f.onItemTitleChange});if(g.isPanel){if(f.removePanelHeader){if(g.rendered){if(g.header){g.header.hide()}}else{g.header=false}}if(g.isPanel&&f.border){g.setBorder(false)}}if(f.rendered){g.getBind()}},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab){this.setActiveTab(a);return false}},onItemGlyphChange:function(a,b){a.tab.setGlyph(b)},onItemIconChange:function(b,a){b.tab.setIcon(a)},onItemIconClsChange:function(b,a){b.tab.setIconCls(a)},onItemTitleChange:function(a,b){a.tab.setText(b)},onRemove:function(b,c){var a=this;b.un({scope:a,enable:a.onItemEnable,disable:a.onItemDisable,beforeshow:a.onItemBeforeShow,iconchange:a.onItemIconChange,iconclschange:a.onItemIconClsChange,glyphchange:a.onItemGlyphChange,titlechange:a.onItemTitleChange});if(b.tab&&!a.destroying&&b.tab.ownerCt===a.tabBar){a.tabBar.remove(b.tab)}},privates:{doRemove:function(d,b){var c=this,a;if(c.removingAll||c.destroying||c.items.getCount()==1){c.activeTab=null}else{if(d.tab&&(a=c.tabBar.items.indexOf(c.tabBar.findNextActivatable(d.tab)))!==-1){c.setActiveTab(a)}}Ext.panel.Panel.prototype.doRemove.apply(this,arguments);if(d.tab){delete d.tab.card;delete d.tab}}}},0,["tabpanel"],["component","box","container","panel","tabpanel"],{component:true,box:true,container:true,panel:true,tabpanel:true},["widget.tabpanel"],0,[Ext.tab,"Panel",Ext,"TabPanel"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(a,b){this.comp=a;this.initialConstrainTo=b.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,b)},onStart:function(c){var b=this,a=b.comp;b.startPosition=a.getXY();if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}if(a.beginDrag){a.beginDrag()}},calculateConstrainRegion:function(){var j=this,g=j.comp,h=j.initialConstrainTo,f=g.constraintInsets,k,b,d,c=j.proxy?j.proxy.el:g.el,a=(!j.constrainDelegate&&c.shadow&&g.constrainShadow&&!c.shadowDisabled)?c.shadow.getShadowSize():0;if(!(h instanceof Ext.util.Region)){k=Ext.fly(h);h=k.getViewRegion();h.right=h.left+k.dom.clientWidth}else{h=h.copy()}if(f){f=Ext.isObject(f)?f:Ext.Element.parseBox(f);h.adjust(f.top,f.right,f.bottom,f.length)}if(a){h.adjust(a[0],-a[1],-a[2],a[3])}if(!j.constrainDelegate){b=Ext.fly(j.dragTarget).getRegion();d=c.getRegion();h.adjust(b.top-d.top,b.right-d.right,b.bottom-d.bottom,b.left-d.left)}return h},onDrag:function(c){var b=this,a=(b.proxy&&!b.comp.liveDrag)?b.proxy:b.comp,d=b.getOffset(b.constrain||b.constrainDelegate?"dragTarget":null);a.setPagePosition(b.startPosition[0]+d[0],b.startPosition[1]+d[1])},onEnd:function(b){var a=this.comp;if(a.isDestroyed||a.destroying){return}if(this.proxy&&!a.liveDrag){a.unghost()}if(a.endDrag){a.endDrag()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:"x-window-item",initialAlphaNum:/^[a-z0-9]/,overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var a=this;a.frame=false;Ext.panel.Panel.prototype.initComponent.call(this);if(a.plain){a.addClsWithUI("plain")}a.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var b=this,a;a=Ext.panel.Panel.prototype.getElConfig.call(this);a.tabIndex=-1;return a},getState:function(){var b=this,d=Ext.panel.Panel.prototype.getState.call(this)||{},a=!!b.maximized,c=b.ghostBox,f;d.maximized=a;if(a){f=b.restorePos}else{if(c){f=[c.x,c.y]}else{f=b.getPosition()}}Ext.apply(d,{size:a?b.restoreSize:b.getSize(),pos:f});return d},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onRender:function(b,a){var c=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);c.focusable=!!c.getFocusEl();if(c.maximizable){c.header.on({scope:c,dblclick:c.toggleMaximize})}},afterRender:function(){var a=this,c=a.header,b;if(a.maximized){a.maximized=false;a.maximize();if(c){c.removeCls(c.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);if(a.closable){b=a.getKeyMap();b.on(27,a.onEsc,a)}else{b=a.keyMap}if(b&&a.hidden){b.disable()}},onEsc:function(a,c){var b=Ext.FocusManager;if(!Ext.enableFocusManager||b.focusedCmp===this){c.stopEvent();this.close()}},beforeDestroy:function(){var a=this;if(a.rendered){Ext.un("resize",a.onWindowResize,a);delete a.animateTarget;a.hide();Ext.destroy(a.keyMap)}Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var a=this,c=[],b=[];Ext.panel.Panel.prototype.addTools.call(this);if(a.minimizable){c.push({type:"minimize",handler:"minimize",scope:a})}if(a.maximizable){c.push({type:"maximize",handler:"toggleMaximize",scope:a})}if(c.length){a.addTool(c)}},getDefaultFocus:function(){var c=this,b,d=c.defaultButton||c.defaultFocus,a;if(d!==undefined){if(Ext.isNumber(d)){b=c.query("button")[d]}else{if(Ext.isString(d)){a=d;if(a.match(c.initialAlphaNum)){b=c.down(Ext.makeIdSelector(a))}if(!b){b=c.down(a)}}else{if(d.focus){b=d}}}}return b||c.el},onFocus:function(){var b=this,a;if(Ext.enableFocusManager||((a=b.getDefaultFocus())===b)){Ext.panel.Panel.prototype.onFocus.apply(this,arguments)}else{a.focus()}},onShow:function(){var a=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(a.expandOnShow){a.expand(false)}a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction=="destroy"){a.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var b=this,a;if(!b.isDestroyed){if(b.maximized){b.fitContainer()}else{a=b.getSizeModel();if(a.width.natural||a.height.natural){b.updateLayout()}b.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,c=a.header,b=a.tools;if(c&&a.maximizable){c.suspendLayouts();b.maximize.hide();this.resumeHeaderLayout(true)}if(a.resizer){a.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var a=this,d=a.header,b=a.tools,c;if(d){d.suspendLayouts();if(a.maximizable){b.maximize.show();c=true}this.resumeHeaderLayout(c)}if(a.resizer){a.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(b){var f=this,j=f.header,g=f.tools,d=f.width,a=f.height,c,h;if(!f.maximized){f.expand(false);if(!f.hasSavedRestore){c=f.restoreSize={width:Ext.isNumber(d)?d:null,height:Ext.isNumber(a)?a:null};f.restorePos=f.getPosition(true)}if(j){j.suspendLayouts();if(g.maximize){g.maximize.setType("restore")}if(f.collapseTool){f.collapseTool.hide();h=true}f.resumeHeaderLayout(h)}f.el.disableShadow();if(f.dd){f.dd.disable();if(j){j.removeCls(j.indicateDragCls)}}if(f.resizer){f.resizer.disable()}f.el.addCls("x-window-maximized");f.container.addCls("x-window-maximized-ct");f.syncMonitorWindowResize();f.fitContainer(b=(b||!!f.animateTarget)?{callback:function(){f.maximized=true;f.fireEvent("maximize",f)}}:null);if(!b){f.maximized=true;f.fireEvent("maximize",f)}}return f},restore:function(b){var c=this,d=c.tools,g=c.header,a=c.restoreSize,f;if(c.maximized){c.hasSavedRestore=null;c.removeCls("x-window-maximized");if(g){g.suspendLayouts();if(d.maximize){d.maximize.setType("maximize")}if(c.collapseTool){c.collapseTool.show();f=true}c.resumeHeaderLayout(f)}a.x=c.restorePos[0];a.y=c.restorePos[1];c.setBox(a,b=(b||!!c.animateTarget)?{callback:function(){c.el.enableShadow(true);c.maximized=false;c.fireEvent("restore",c)}}:null);c.restorePos=c.restoreSize=null;if(c.dd){c.dd.enable();if(g){g.addCls(g.indicateDragCls)}}if(c.resizer){c.resizer.enable()}c.container.removeCls("x-window-maximized-ct");c.syncMonitorWindowResize();if(!b){c.el.enableShadow(true);c.maximized=false;c.fireEvent("restore",c)}}return c},syncMonitorWindowResize:function(){var b=this,c=b._monitoringResize,d=b.constrain||b.constrainHeader||b.maximized,a=b.hidden||b.destroying||b.isDestroyed;if(d&&!a){if(!c){Ext.on("resize",b.onWindowResize,b,{buffer:1});b._monitoringResize=true}}else{if(c){Ext.un("resize",b.onWindowResize,b);b._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var a=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);a.xtype="window";return a},privates:{getFocusEl:function(){return this.getDefaultFocus()},initDraggable:function(){this.initSimpleDraggable()},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments);if(this.maximized){this.resizer.disable()}}}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],0,[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(b==="#"){a=!!d.isApplication}else{if(this.idMatchRe.test(b)){a=d.getId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.button.Split",Ext.button.Button,{alternateClassName:"Ext.SplitButton",isSplitButton:true,arrowCls:"split",split:true,setArrowHandler:function(b,a){this.arrowHandler=b;this.scope=a},onClick:function(b){var a=this;a.doPreventDefault(b);if(!a.disabled){if(a.isWithinTrigger(b)){b.preventDefault();a.maybeShowMenu();a.fireEvent("arrowclick",a,b);if(a.arrowHandler){a.arrowHandler.call(a.scope||a,a,b)}}else{a.doToggle();a.fireHandler(b)}}}},0,["splitbutton"],["component","box","button","splitbutton"],{component:true,box:true,button:true,splitbutton:true},["widget.splitbutton"],0,[Ext.button,"Split",Ext,"SplitButton"],0));(Ext.cmd.derive("Ext.plugin.Responsive",Ext.mixin.Responsive,{pluginId:"responsive",isPlugin:true,constructor:function(a){var d=this,b=a.cmp,f=Ext.apply({responsiveConfig:b.responsiveConfig,responsiveFormulas:b.responsiveFormulas},a);delete f.cmp;d.cmp=b;d.initConfig(f);if(d.transformed){b.setConfig(d.transformed);d.transformed=null}},init:Ext.emptyFn,privates:{transformInstanceConfig:function(c){var b=Ext.mixin.Responsive.prototype.transformInstanceConfig.call(this,c);if(b.ptype){b=Ext.apply({},b);delete b.ptype}this.transformed=b;var a=Ext.apply({},c);delete a.ptype;delete a.responsiveConfig;delete a.responsiveFormulas;return a},updateResponsiveState:function(){var a=this.getResponsiveState();this.cmp.setConfig(a)}}},1,0,0,0,["plugin.responsive"],0,[Ext.plugin,"Responsive"],0));(Ext.cmd.derive("Ext.plugin.Viewport",Ext.plugin.Responsive,{setCmp:function(a){this.cmp=a;if(a&&!a.isViewport){this.apply(a);if(a.renderConfigs){a.flushRenderConfigs()}a.setupViewport()}},statics:{apply:function(a){Ext.applyIf(a.prototype||a,{ariaRole:"application",viewportCls:"x-viewport"});Ext.override(a,{isViewport:true,preserveElOnDestroy:true,initComponent:function(){this.callParent();this.setupViewport()},handleViewportResize:function(){var f=this,c=Ext.dom.Element,d=c.getViewportWidth(),b=c.getViewportHeight();if(d!=f.width||b!=f.height){f.setSize(d,b)}},setupViewport:function(){var d=this,b=document.body.parentNode,c=d.el=Ext.getBody();Ext.getScrollbarSize();d.width=d.height=undefined;Ext.fly(b).addCls(d.viewportCls);if(d.autoScroll){Ext.fly(b).setStyle(d.getOverflowStyle());delete d.autoScroll}c.setHeight=c.setWidth=Ext.emptyFn;c.dom.scroll="no";d.allowDomMove=false;d.renderTo=d.el;if(Ext.supports.Touch){d.initMeta()}},afterLayout:function(b){if(Ext.supports.Touch){document.body.scrollTop=0}this.callParent([b])},onRender:function(){var b=this;b.callParent(arguments);b.width=Ext.Element.getViewportWidth();b.height=Ext.Element.getViewportHeight();if(Ext.supports.TouchEvents){b.mon(Ext.getDoc(),{touchmove:function(c){c.preventDefault()},translate:false,delegated:false})}},initInheritedState:function(d,c){var f=this,b=Ext.rootInheritedState;if(d!==b){f.initInheritedState(f.inheritedState=b,f.inheritedStateInner=Ext.Object.chain(b))}else{f.callParent([d,c])}},beforeDestroy:function(){var b=this;b.removeUIFromElement();b.el.removeCls(b.baseCls);Ext.fly(document.body.parentNode).removeCls(b.viewportCls);b.callParent()},addMeta:function(b,c){var d=document.createElement("meta");d.setAttribute("name",b);d.setAttribute("content",c);Ext.getHead().appendChild(d)},initMeta:function(){var b=this,c=b.maxUserScale||1;b.addMeta("viewport","width=device-width, initial-scale=1, maximum-scale="+c+", user-scalable="+(c!==1?"yes":"no"));b.addMeta("apple-mobile-web-app-capable","yes")},privates:{applyTargetCls:function(b){this.el.addCls(b)},disableTabbing:function(){var b=this.el;if(b){b.saveChildrenTabbableState()}},enableTabbing:function(){var b=this.el;if(b){b.restoreChildrenTabbableState()}}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize();Ext.plugin.Responsive.prototype.updateResponsiveState.call(this)}}},0,0,0,0,["plugin.viewport"],0,[Ext.plugin,"Viewport"],function(a){a.prototype.apply=a.apply}));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(c){var j=this,a=0,g,k,f,d,b,h;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);f=c.childItems;b=f.length;for(d=0;d<b;++d){k=f[d];g=k.target.anchorSpec;if(g){if(k.widthModel.calculated&&g.right){a|=1}if(k.heightModel.calculated&&g.bottom){a|=2}if(a==3){break}}}c.anchorDimensions=a},calculateItems:function(h,a){var q=this,l=h.childItems,g=l.length,o=a.gotHeight,j=a.gotWidth,f=a.height,c=a.width,b=(j?1:0)|(o?2:0),p=h.anchorDimensions,m,s,n,r,k,d;if(!p){return true}for(k=0;k<g;k++){s=l[k];n=s.getMarginInfo();m=s.target.anchorSpec;if(j&&s.widthModel.calculated){d=m.right(c)-n.width;d=q.adjustWidthAnchor(d,s);s.setWidth(d)}if(o&&s.heightModel.calculated){r=m.bottom(f)-n.height;r=q.adjustHeightAnchor(r,s);s.setHeight(r)}}return(b&p)===p},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(c,g,b){if(c&&c!="none"){var d=this.anchorFactory,f;if(this.parseAnchorRE.test(c)){return d.standard(b-g)}if(c.indexOf("%")!=-1){return d.ratio(parseFloat(c.replace("%",""))*0.01)}f=parseInt(c,10);if(!isNaN(f)){return d.offset(f)}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(g){var f=this,a=f.owner,d=g.anchor,b,c,h;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!g.anchor&&g.items&&!Ext.isNumber(g.width)){g.anchor=d=f.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize=="number"){c=a.anchorSize}else{c=a.anchorSize.width;h=a.anchorSize.height}}else{c=a.initialConfig.width;h=a.initialConfig.height}if(d){b=d.split(" ");g.anchorSpec={right:f.parseAnchor(b[0],g.initialConfig.width,c),bottom:f.parseAnchor(b[1],g.initialConfig.height,h)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(c){var f=c.anchorSpec,a="$",d=this.sizePolicy,b;if(f){b=this.owner.getSizeModel();if(f.right&&!b.width.shrinkWrap){d=d.r}if(f.bottom&&!b.height.shrinkWrap){a="b"}}return d[a]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.show()},getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling(":not([hidden])")},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling(":not([hidden])")},onBeforeStart:function(h){var d=this,f=d.getPrevCmp(),a=d.getNextCmp(),c=d.getSplitter().collapseEl,g=h.getTarget(),b;if(!f||!a){return false}if(c&&g===c.dom){return false}if(a.collapsed||f.collapsed){return false}d.prevBox=f.getEl().getBox();d.nextBox=a.getEl().getBox();d.constrainTo=b=d.calculateConstrainRegion();if(!b){return false}return b},onStart:function(b){var a=this.getSplitter();this.createDragOverlay();a.addCls(a.baseCls+"-active")},calculateConstrainRegion:function(){var h=this,a=h.getSplitter(),j=a.getWidth(),k=a.defaultSplitMin,b=a.orientation,f=h.prevBox,l=h.getPrevCmp(),c=h.nextBox,g=h.getNextCmp(),n,m,d;if(b==="vertical"){d={prevCmp:l,nextCmp:g,prevBox:f,nextBox:c,defaultMin:k,splitWidth:j};n=new Ext.util.Region(f.y,h.getVertPrevConstrainRight(d),f.bottom,h.getVertPrevConstrainLeft(d));m=new Ext.util.Region(c.y,h.getVertNextConstrainRight(d),c.bottom,h.getVertNextConstrainLeft(d))}else{n=new Ext.util.Region(f.y+(l.minHeight||k),f.right,(l.maxHeight?f.y+l.maxHeight:c.bottom-(g.minHeight||k))+j,f.x);m=new Ext.util.Region((g.maxHeight?c.bottom-g.maxHeight:f.y+(l.minHeight||k))-j,c.right,c.bottom-(g.minHeight||k),c.x)}return n.intersect(m)},performResize:function(m,g){var o=this,a=o.getSplitter(),h=a.orientation,p=o.getPrevCmp(),n=o.getNextCmp(),b=a.ownerCt,k=b.query(">[flex]"),l=k.length,c=h==="vertical",j=0,f=c?"width":"height",d=0,q,r;for(;j<l;j++){q=k[j];r=c?q.getWidth():q.getHeight();d+=r;q.flex=r}g=c?g[0]:g[1];if(p){r=o.prevBox[f]+g;if(p.flex){p.flex=r}else{p[f]=r}}if(n){r=o.nextBox[f]-g;if(n.flex){n.flex=r}else{n[f]=r}}b.updateLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.destroy();delete a.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+"-active");a.performResize(c,a.getResizeOffset())},onDrag:function(f){var c=this,g=c.getOffset("dragTarget"),d=c.getSplitter(),b=d.getEl(),a=d.orientation;if(a==="vertical"){b.setX(c.startRegion.left+g[0])}else{b.setY(c.startRegion.top+g[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return(a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return(a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.dom.Layer",Ext.Element,{alternateClassName:"Ext.Layer",isLayer:true,localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(c,h){c=c||{};var l=this,k=Ext.DomHelper,j=c.parentEl,g=j?Ext.getDom(j):document.body,a=c.hideMode,m="x-"+(c.fixed?"fixed-layer":"layer"),d,b,f;if(h){d=Ext.getDom(h);if(!d.parentNode){g.appendChild(d)}}if(!d){d=k.append(g,c.dh||{tag:"div",cls:m})}if(c.id){d.id=c.id}b=d.id;if(b){f=Ext.cache[b];if(f){delete Ext.cache[b];f.dom=null}}Ext.dom.Element.prototype.constructor.call(this,d);if(h){l.addCls(m)}if(c.preventSync){l.preventSync=true}if(c.cls){l.addCls(c.cls)}l.constrain=c.constrain!==false;if(a){l.setVisibilityMode(Ext.Element[a.toUpperCase()])}else{if(c.useDisplay){l.setVisibilityMode(Ext.Element.DISPLAY)}else{l.setVisibilityMode(Ext.Element.VISIBILITY)}}if(c.shadow){l.shadowOffset=c.shadowOffset||4;l.shadow=new Ext.Shadow({offset:l.shadowOffset,mode:c.shadow,fixed:c.fixed});l.disableShadow()}else{l.shadowOffset=0}if(c.hidden===true){l.hide()}else{if(c.hidden===false){l.show()}}},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},disableShadow:function(){var a=this;if(a.shadow&&!a.shadowDisabled){a.shadowDisabled=true;a.shadow.hide();a.lastShadowOffset=a.shadowOffset;a.shadowOffset=0}},enableShadow:function(a){var b=this;if(b.shadow&&b.shadowDisabled){b.shadowDisabled=false;b.shadowOffset=b.lastShadowOffset;delete b.lastShadowOffset;if(a){b.sync(true)}}},sync:function(d){var f=this,k=f.shadow,g,a,j,b,c;if(f.preventSync){return}if(!f.updating&&f.isVisible()&&k){g=f[f.localXYNames.get]();a=g[0];j=g[1];b=f.dom.offsetWidth;c=f.dom.offsetHeight;if(k&&!f.shadowDisabled){if(d&&!k.isVisible()){k.show(f)}else{k.realign(a,j,b,c)}}}return f},destroy:function(){this.hideUnders();Ext.dom.Element.prototype.destroy.call(this)},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(){if(this.shadow){this.shadow.hide()}},constrainXY:function(){if(this.constrain){var g=Ext.Element.getViewportWidth(),b=Ext.Element.getViewportHeight(),m=Ext.getDoc().getScroll(),l=this.getXY(),j=l[0],f=l[1],a=this.shadowOffset,k=this.dom.offsetWidth+a,c=this.dom.offsetHeight+a,d=false;if((j+k)>g+m.left){j=g-k-a;d=true}if((f+c)>b+m.top){f=b-c-a;d=true}if(j<m.left){j=m.left;d=true}if(f<m.top){f=m.top;d=true}if(d){Ext.Layer.superclass.setXY.call(this,[j,f]);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(f,b,d,h,g){var c=this,a;a=function(){if(f){c.sync(true)}if(h){h()}};if(!f){c.hideUnders(true)}Ext.dom.Element.prototype.setVisible.call(this,f,b,d,h,g);if(!b){a()}return c},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(a){Ext.dom.Element.prototype.setLeft.apply(this,arguments);return this.sync()},setTop:function(a){Ext.dom.Element.prototype.setTop.apply(this,arguments);return this.sync()},setLocalX:function(){Ext.dom.Element.prototype.setLocalX.apply(this,arguments);return this.sync()},setLocalXY:function(){Ext.dom.Element.prototype.setLocalXY.apply(this,arguments);return this.sync()},setLocalY:function(){Ext.dom.Element.prototype.setLocalY.apply(this,arguments);return this.sync()},setXY:function(d,a,c,g,f){var b=this;g=b.createCB(g);b.fixDisplay();b.beforeAction();Ext.dom.Element.prototype.setXY.call(this,d,a,c,g,f);if(!a){g()}return b},createCB:function(c){var a=this,b=a.shadow&&a.shadow.isVisible();return function(){a.constrainXY();a.sync(b);if(c){c()}}},setX:function(a,b,c,f,d){this.setXY([a,this.getY()],b,c,f,d);return this},setY:function(f,a,b,d,c){this.setXY([this.getX(),f],a,b,d,c);return this},setSize:function(a,c,b,f,j,g){var d=this;j=d.createCB(j);d.beforeAction();Ext.dom.Element.prototype.setSize.call(this,a,c,b,f,j,g);if(!b){j()}return d},setWidth:function(a,b,d,g,f){var c=this;g=c.createCB(g);c.beforeAction();Ext.dom.Element.prototype.setWidth.call(this,a,b,d,g,f);if(!b){g()}return c},setHeight:function(b,a,d,g,f){var c=this;g=c.createCB(g);c.beforeAction();Ext.dom.Element.prototype.setHeight.call(this,b,a,d,g,f);if(!a){g()}return c},setZIndex:function(a){var b=this;b.zindex=a;if(b.shadow){b.shadow.setZIndex(a)}return b.setStyle("z-index",a)},onOpacitySet:function(a){var b=this.shadow;if(b){b.setOpacity(a)}},deprecated:{"4.2":{methods:{setBounds:function(h,g,a,k,b,c,j,d){var f=this;j=f.createCB(j);f.beforeAction();if(!b){Ext.Layer.superclass.setXY.call(f,[h,g]);Ext.Layer.superclass.setSize.call(f,a,k);j()}else{f.callParent([h,g,a,k,b,c,j,d])}return f},setLeftTop:function(b,a){this.callParent(arguments);return this.sync()}}}}},1,0,0,0,0,0,[Ext.dom,"Layer",Ext,"Layer"],0));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(a){this.response=a;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var c=this,a,b=c.form;return{success:c.onSuccess,failure:c.onFailure,scope:c,timeout:(this.timeout*1000)||(b.timeout*1000),upload:b.fileUpload?c.onSuccess:a}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(b){var a=this.processResponse(b),c=this.form;if(a===true||!a.success||!a.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;c.afterAction(this,false);return}c.clearInvalid();c.setValues(a.data);c.afterAction(this,true)},handleResponse:function(c){var a=this.form.reader,b,d;if(a){b=a.read(c);d=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:d}}return Ext.decode(c.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var b=this,a=b.form;if(b.clientValidation===false||a.isValid()){b.doSubmit()}else{b.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(b,false)}},doSubmit:function(){var d=this,b=Ext.apply(d.createCallback(),{url:d.getUrl(),method:d.getMethod(),headers:d.headers}),c=d.form,f=d.jsonSubmit||c.jsonSubmit,a=f?"jsonData":"params",g;if(c.hasUpload()){g=d.buildForm();b.form=g.formEl;b.isUpload=true}else{b[a]=d.getParams(f)}Ext.Ajax.request(b);if(g){d.cleanup(g)}},cleanup:function(h){var f=h.formEl,d=h.uploadEls,b=h.uploadFields,a=b.length,c,g;for(c=0;c<a;++c){g=b[c];if(!g.clearOnSubmit){g.restoreInput(d[c])}}if(f){Ext.removeNode(f)}},getParams:function(d){var c=false,b=Ext.form.action.Action.prototype.getParams.call(this),a=this.form.getValues(c,c,this.submitEmptyText!==c,d,true);return Ext.apply({},a,b)},buildForm:function(){var k=this,n=[],l,s,h=k.form,d=k.getParams(),c=[],a=[],g=h.getFields().items,f,j=g.length,m,r,p,q,o,b;for(f=0;f<j;++f){m=g[f];if(m.isFileUpload()){c.push(m)}}for(r in d){if(d.hasOwnProperty(r)){p=d[r];if(Ext.isArray(p)){o=p.length;for(q=0;q<o;q++){n.push(k.getFieldConfig(r,p[q]))}}else{n.push(k.getFieldConfig(r,p))}}}l={tag:"form",role:"presentation",action:k.getUrl(),method:k.getMethod(),target:k.target||"_self",style:"display:none",cn:n};if(c.length){l.encoding=l.enctype="multipart/form-data"}s=Ext.DomHelper.append(Ext.getBody(),l);j=c.length;for(f=0;f<j;++f){b=c[f].extractFileInput();s.appendChild(b);a.push(b)}return{formEl:s,uploadFields:c,uploadEls:a}},getFieldConfig:function(a,b){return{tag:"input",type:"hidden",name:a,value:Ext.String.htmlEncode(b)}},onSuccess:function(b){var c=this.form,d=true,a=this.processResponse(b);if(a!==true&&!a.success){if(a.errors){c.markInvalid(a.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;d=false}c.afterAction(this,d)},handleResponse:function(d){var a=this.form,c=a.errorReader,f,k,g,h,b,l;if(c){f=c.read(d);b=f.records;k=[];if(b){for(g=0,h=b.length;g<h;g++){k[g]=b[g].data}}if(k.length<1){k=null}l={success:f.success,errors:k}}else{try{l=Ext.decode(d.responseText)}catch(j){l={success:false,errors:[]}}}return l}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" role="{role}" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",getSubTplData:function(b){var d=this,c=d.getFieldStyle(),a=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(d.grow){if(d.preventScrollbars){a.fieldStyle=(c||"")+";overflow:hidden;height:"+d.growMin+"px"}}return a},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on("paste",a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(a){a=this.stripReturns(a);return Ext.form.field.Text.prototype.valueToRaw.call(this,a)},stripReturns:function(a){if(a&&typeof a==="string"){a=a.replace(this.returnRe,"")}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var b=this,c=b.getValue(),a=b.maxLength;if(c.length>a){c=c.substr(0,a);b.setValue(c)}},fireKey:function(d){var b=this,a=d.getKey(),c;if(d.isSpecialKey()&&(b.enterIsSpecial||(a!==d.ENTER||d.hasModifier()))){b.fireEvent("specialkey",b,d)}if(b.needsMaxCheck&&a!==d.BACKSPACE&&a!==d.DELETE&&!d.isNavKeyPress()&&!b.isCutCopyPasteSelectAll(d,a)){c=b.getValue();if(c.length>=b.maxLength){d.stopEvent()}}},isCutCopyPasteSelectAll:function(b,a){if(b.ctrlKey){return a===b.A||a===b.C||a===b.V||a===b.X}return false},autoSize:function(){var d=this,g,c,a,b,f;if(d.grow&&d.rendered&&d.getSizeModel().height.auto){g=d.inputEl;b=g.getWidth(true);f=Ext.util.Format.htmlEncode(g.dom.value)||"&#160;";f+=d.growAppend;f=f.replace(/\n/g,"<br/>");a=Ext.util.TextMetrics.measure(g,f,b).height+g.getPadding("tb")+d.inputWrap.getBorderWidth("tb")+d.triggerWrap.getBorderWidth("tb");a=Math.min(Math.max(a,d.growMin),d.growMax);d.bodyEl.setHeight(a);d.updateLayout();d.fireEvent("autosize",d,a)}},beforeDestroy:function(){var a=this.pasteTask;if(a){a.cancel();this.pasteTask=null}Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,autoScroll:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(a){var b=this.buttonIds[a];return new Ext.button.Button({handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a){var b=this,c,d;if(b.cfg.prompt||b.cfg.multiline){if(b.cfg.multiline){d=b.textArea}else{d=b.textField}c=d.getValue();d.reset()}b.hide();b.userCallback(a.itemId,c,b.cfg)},hide:function(){var b=this,a=b.cfg?b.cfg.cls:"";b.progressBar.reset();if(a){b.removeCls(a)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(a){var b=this;Ext.window.Window.prototype.constructor.apply(this,arguments);b.minWidth=b.defaultMinWidth=(b.minWidth||b.defaultMinWidth);b.maxWidth=b.defaultMaxWidth=(b.maxWidth||b.defaultMaxWidth);b.minHeight=b.defaultMinHeight=(b.minHeight||b.defaultMinHeight);b.maxHeight=b.defaultMaxHeight=(b.maxHeight||b.defaultMaxHeight)},initComponent:function(a){var f=this,b=f.id,d,c;f.title=f.title||"&#160;";f.iconCls=f.iconCls||"";f.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[f.iconComponent=new Ext.Component({cls:f.baseIconCls}),f.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[f.msg=new Ext.form.field.Display({id:b+"-displayfield",cls:f.baseCls+"-text"}),f.textField=new Ext.form.field.Text({id:b+"-textfield",enableKeyEvents:true,listeners:{keydown:f.onPromptKey,scope:f}}),f.textArea=new Ext.form.field.TextArea({id:b+"-textarea",height:75})]})]});f.progressBar=new Ext.ProgressBar({id:b+"-progressbar",margin:"0 10 10 10"});f.items=[f.topContainer,f.progressBar];f.msgButtons=[];for(d=0;d<4;d++){c=f.makeButton(d);f.msgButtons[c.itemId]=c;f.msgButtons.push(c)}f.bottomTb=new Ext.toolbar.Toolbar({id:b+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[f.msgButtons[0],f.msgButtons[1],f.msgButtons[2],f.msgButtons[3]]});f.dockedItems=[f.bottomTb];f.on("close",f.onClose,f);Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var a=this.header.child("[type=close]");a.itemId="cancel";this.btnCallback(a);delete a.itemId},onPromptKey:function(a,c){var b=this;if(c.keyCode===c.RETURN||c.keyCode===10){if(b.msgButtons.ok.isVisible()){b.msgButtons.ok.handler.call(b,b.msgButtons.ok)}else{if(b.msgButtons.yes.isVisible()){b.msgButtons.yes.handler.call(b,b.msgButtons.yes)}}}},reconfigure:function(b){var s=this,p=0,f=true,t=s.buttonText,d=s.resizer,n=s.header,r=n&&!n.isHeader,c=b&&(b.message||b.msg),u,l,h,o,q,g,a,j,m,k;s.updateButtonText();s.cfg=b=b||{};if(b.width){l=b.width}if(b.height){h=b.height}s.minWidth=b.minWidth||s.defaultMinWidth;s.maxWidth=b.maxWidth||s.defaultMaxWidth;s.minHeight=b.minHeight||s.defaultMinHeight;s.maxHeight=b.maxHeight||s.defaultMaxHeight;if(d){u=d.resizeTracker;d.minWidth=u.minWidth=s.minWidth;d.maxWidth=u.maxWidth=s.maxWidth;d.minHeight=u.minHeight=s.minHeight;d.maxHeight=u.maxHeight=s.maxHeight}delete s.defaultFocus;if(b.defaultFocus){s.defaultFocus=b.defaultFocus}s.animateTarget=b.animateTarget||undefined;s.modal=b.modal!==false;s.setTitle(b.title||(r&&n.title)||s.title);s.setIconCls(b.iconCls||(r&&n.iconCls)||s.iconCls);if(Ext.isObject(b.buttons)){s.buttonText=b.buttons;p=0}else{s.buttonText=b.buttonText||s.buttonText;p=Ext.isNumber(b.buttons)?b.buttons:0}p=p|s.updateButtonText();s.buttonText=t;Ext.suspendLayouts();delete s.width;delete s.height;if(l||h){if(l){s.setWidth(l)}if(h){s.setHeight(h)}}s.hidden=false;if(!s.rendered){s.render(Ext.getBody())}s.closable=b.closable!==false&&!b.wait;n=s.header;if(n){n.child("[type=close]").setVisible(s.closable);if(!b.title&&!s.closable&&!b.iconCls){n.hide()}else{n.show()}}s.liveDrag=!b.proxyDrag;s.userCallback=Ext.Function.bindCallback(b.callback||b.fn||Ext.emptyFn,b.scope||Ext.global);s.setIcon(b.icon);a=s.msg;if(c){a.setValue(c);a.show()}else{a.hide()}q=s.textArea;g=s.textField;if(b.prompt||b.multiline){s.multiline=b.multiline;if(b.multiline){q.setValue(b.value);q.setHeight(b.defaultTextHeight||s.defaultTextHeight);q.show();g.hide();s.defaultFocus=q}else{g.setValue(b.value);q.hide();g.show();s.defaultFocus=g}}else{q.hide();g.hide()}j=s.progressBar;if(b.progress||b.wait){j.show();s.updateProgress(0,b.progressText);k=b.wait;if(k===true){b=b.waitConfig}if(k){j.wait(k)}}else{j.hide()}m=s.msgButtons;for(o=0;o<4;o++){if(p&Math.pow(2,o)){if(!s.defaultFocus){s.defaultFocus=m[o]}m[o].show();f=false}else{m[o].hide()}}if(f){s.bottomTb.hide()}else{s.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var d=this,c=d.buttonText,b=0,f,a;for(f in c){if(c.hasOwnProperty(f)){a=d.msgButtons[f];if(a){if(d.cfg&&d.cfg.buttonText){b=b|Math.pow(2,Ext.Array.indexOf(d.buttonIds,f))}if(a.text!=c[f]){a.setText(c[f])}}}}return b},show:function(a){var c=this,b;a=a||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){c.show(a)},single:true});return c}c.reconfigure(a);if(a.cls){c.addCls(a.cls)}b=c.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");c.preventFocusOnActivate=!b.length;c.hidden=true;Ext.window.Window.prototype.show.call(this);return c},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(a){this.msg.setValue(a)},setIcon:function(d,c,a){var f=this,g=f.iconComponent,b=f.messageIconCls;if(b){g.removeCls(b)}if(d){g.show();if(c||a){g.setSize(c||g.getWidth(),a||g.getHeight())}g.addCls("x-dlg-icon");g.addCls(f.messageIconCls=d)}else{g.removeCls("x-dlg-icon");g.hide()}return f},updateProgress:function(c,a,b){this.progressBar.updateProgress(c,a);if(b){this.updateText(b)}return this},onEsc:function(){if(this.closable!==false){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(a,d,c,b){if(Ext.isString(a)){a={title:a,icon:this.QUESTION,message:d,buttons:this.YESNO,callback:c,scope:b}}return this.show(a)},prompt:function(g,d,c,b,a,f){if(Ext.isString(g)){g={prompt:true,title:g,minWidth:this.minPromptWidth,message:d,buttons:this.OKCANCEL,callback:c,scope:b,multiline:a,value:f}}return this.show(g)},wait:function(b,c,a){if(Ext.isString(b)){b={title:c,message:b,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:a}}return this.show(b)},alert:function(d,c,b,a){if(Ext.isString(d)){d={title:d,message:c,buttons:this.OK,fn:b,scope:a,minWidth:this.minWidth}}return this.show(d)},progress:function(c,b,a){if(Ext.isString(c)){c={title:c,message:b,progress:true,progressText:a}}return this.show(c)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(){Ext.MessageBox=Ext.Msg=new this()}));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(b,c){var d=this,a;d.owner=b;d.checkValidityTask=new Ext.util.DelayedTask(d.checkValidity,d);d.checkDirtyTask=new Ext.util.DelayedTask(d.checkDirty,d);d.checkErrorTask=new Ext.util.DelayedTask(d.checkError,d);d.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:d,addHandler:d.onFieldAdd,removeHandler:d.onFieldRemove,invalidateHandler:d.onMonitorInvalidate});d.monitor.bind(b);Ext.apply(d,c);if(Ext.isString(d.paramOrder)){d.paramOrder=d.paramOrder.split(/[\s,|]/)}a=d.reader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.reader=Ext.createByAlias("reader."+a.type,a)}a=d.errorReader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.errorReader=Ext.createByAlias("reader."+a.type,a)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var b=this,a=b.monitor;if(a){a.unbind();b.monitor=null}b.clearListeners();b.checkValidityTask.cancel();b.checkDirtyTask.cancel();b.checkErrorTask.cancel();b.checkValidityTask=b.checkDirtyTask=checkErrorTask=null;b.isDestroyed=true},onFieldAdd:function(b){var a=this;a.mon(b,"validitychange",a.checkValidityDelay,a);a.mon(b,"dirtychange",a.checkDirtyDelay,a);a.mon(b,"errorchange",a.checkErrorDelay,a);a.onMonitorInvalidate()},onFieldRemove:function(b){var a=this;a.mun(b,"validitychange",a.checkValidityDelay,a);a.mun(b,"dirtychange",a.checkDirtyDelay,a);a.mun(b,"errorchange",a.checkErrorDelay,a);a.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(c){var a=c.preventMark,b;c.preventMark=true;b=c.isValid();c.preventMark=a;return !b})},isValid:function(){var a=this,b;Ext.suspendLayouts();b=a.getFields().filterBy(function(c){return !c.validate()});Ext.resumeLayouts(true);return b.length<1},checkValidity:function(){var b=this,a;if(b.isDestroyed){return}a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else{this.checkError()}},onValidityChange:function(g){var d=this.getBoundItems(),b,c,a,f;if(d){b=d.items;a=b.length;for(c=0;c<a;c++){f=b[c];if(f.disabled===g){f.setDisabled(!g)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else{this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.isDestroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(a){a=a||{};var b=this,c;if(a.standardSubmit||b.standardSubmit){c="standardsubmit"}else{c=b.api?"directsubmit":"submit"}return b.doAction(c,a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(c){c=c||this._record;if(!c){return this}var b=c.self.fields,d=this.getFieldValues(),h={},g=0,a=b.length,f;for(;g<a;++g){f=b[g].name;if(d.hasOwnProperty(f)){h[f]=d[f]}}c.beginEdit();c.set(h);c.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(c){var h=this,b=c.waitMsg,l="x-mask-loading",d=h.getFields().items,g,k=d.length,j,a;for(g=0;g<k;g++){j=d[g];if(j.isFormField&&j.syncValue){j.syncValue()}}if(b){a=h.waitMsgTarget;if(a===true){h.owner.el.mask(b,l)}else{if(a){a=h.waitMsgTarget=Ext.get(a);a.mask(b,l)}else{h.floatingAncestor=h.owner.up("[floating]");if(h.floatingAncestor){h.savePreventFocusOnActivate=h.floatingAncestor.preventFocusOnActivate;h.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(b,c.waitTitle||h.waitTitle)}}}},afterAction:function(c,f){var a=this;if(c.waitMsg){var b=Ext.MessageBox,d=a.waitMsgTarget;if(d===true){a.owner.el.unmask()}else{if(d){d.unmask()}else{b.hide()}}}if(a.floatingAncestor){a.floatingAncestor.preventFocusOnActivate=a.savePreventFocusOnActivate}if(f){if(c.reset){a.reset()}Ext.callback(c.success,c.scope||c,[a,c]);a.fireEvent("actioncomplete",a,c)}else{Ext.callback(c.failure,c.scope||c,[a,c]);a.fireEvent("actionfailed",a,c)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(j){var d=this,g,a,b,f,c;function h(k,m){var l=d.findField(k);if(l){l.markInvalid(m)}}if(Ext.isArray(j)){a=j.length;for(g=0;g<a;g++){b=j[g];h(b.id,b.msg)}}else{if(j instanceof Ext.data.ErrorCollection){a=j.items.length;for(g=0;g<a;g++){b=j.items[g];h(b.field,b.message)}}else{for(c in j){if(j.hasOwnProperty(c)){f=j[c];h(c,f,j)}}}}return this},setValues:function(b){var d=this,a,c,g;function f(h,k){var j=d.findField(h);if(j){j.setValue(k);if(d.trackResetOnLoad){j.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(b)){c=b.length;for(a=0;a<c;a++){g=b[a];f(g.id,g.value)}}else{Ext.iterate(b,f)}Ext.resumeLayouts(true);return this},getValues:function(l,m,q,o,c){var p={},j=this.getFields().items,r=j.length,h=Ext.isArray,n,g,d,b,a,k;for(k=0;k<r;k++){n=j[k];if(!m||n.isDirty()){g=n[o?"getModelData":"getSubmitData"](q,c);if(Ext.isObject(g)){for(a in g){if(g.hasOwnProperty(a)){d=g[a];if(q&&d===""){d=n.emptyText||""}if(!n.isRadio){if(p.hasOwnProperty(a)){b=p[a];if(!h(b)){b=p[a]=[b]}if(h(d)){p[a]=b.concat(d)}else{b.push(d)}}else{p[a]=d}}else{p[a]=p[a]||d}}}}}}if(l){p=Ext.Object.toQueryString(p)}return p},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){Ext.suspendLayouts();var b=this,a=b.getFields().items,c,d=a.length;for(c=0;c<d;c++){a[c].clearInvalid()}Ext.resumeLayouts(true);return b},reset:function(b){Ext.suspendLayouts();var c=this,a=c.getFields().items,d,g=a.length;for(d=0;d<g;d++){a[d].reset()}Ext.resumeLayouts(true);if(b===true){delete c._record}return c},applyToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.apply(a[b],c)}return this},applyIfToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.applyIf(a[b],c)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.layout.container.CheckboxGroup",Ext.layout.container.Container,{autoFlex:true,type:"checkboxgroup",createsInnerCt:true,childEls:["innerCt"],renderTpl:['<table id="{ownerId}-innerCt" data-ref="innerCt" class="'+Ext.plainTableCls+'" cellpadding="0"','role="presentation" style="{tableStyle}"><tr role="presentation">','<tpl for="columns">','<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">',"{% this.renderColumn(out,parent,xindex-1) %}","</td>","</tpl>","</tr></table>"],lastOwnerItemsGeneration:null,beginLayout:function(b){var k=this,f,d,h,a,j,g=0,m=0,l=k.autoFlex,c=k.innerCt.dom.style;Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);f=k.columnNodes;b.innerCtContext=b.getEl("innerCt",k);if(!b.widthModel.shrinkWrap){d=f.length;if(k.columnsArray){for(h=0;h<d;h++){a=k.owner.columns[h];if(a<1){g+=a;m++}}for(h=0;h<d;h++){a=k.owner.columns[h];if(a<1){j=((a/g)*100)+"%"}else{j=a+"px"}f[h].style.width=j}}else{for(h=0;h<d;h++){j=l?(1/d*100)+"%":"";f[h].style.width=j;m++}}if(!m){c.tableLayout="fixed";c.width=""}else{if(m<d){c.tableLayout="fixed";c.width="100%"}else{c.tableLayout="auto";if(l){c.width="100%"}else{c.width=""}}}}else{c.tableLayout="auto";c.width=""}},cacheElements:function(){var a=this;Ext.layout.container.Container.prototype.cacheElements.call(this);a.rowEl=a.innerCt.down("tr");a.columnNodes=a.rowEl.dom.childNodes},calculate:function(h){var f=this,c,b,a,j,d,g;if(!h.getDomProp("containerChildrenSizeDone")){f.done=false}else{c=h.innerCtContext;b=h.widthModel.shrinkWrap;a=h.heightModel.shrinkWrap;j=a||b;d=c.el.dom;g=j&&c.getPaddingInfo();if(b){h.setContentWidth(d.offsetWidth+g.width,true)}if(a){h.setContentHeight(d.offsetHeight+g.height,true)}}},doRenderColumn:function(d,m,g){var j=m.$layout,c=j.owner,f=m.columnCount,h=c.items.items,b=h.length,n,a,k,l,o;if(c.vertical){k=Math.ceil(b/f);a=g*k;b=Math.min(b,a+k);l=1}else{a=g;l=f}for(;a<b;a+=l){n=h[a];j.configureItem(n);o=n.getRenderTree();Ext.DomHelper.generateMarkup(o,d)}},getColumnCount:function(){var b=this,a=b.owner,c=a.columns;if(b.columnsArray){return c.length}if(Ext.isNumber(c)){return c}return a.items.length},getItemSizePolicy:function(a){return this.autoSizePolicy},getRenderData:function(){var k=this,g=Ext.layout.container.Container.prototype.getRenderData.call(this),b=k.owner,h,d=k.getColumnCount(),a,c,j,l=k.autoFlex,f=0,m=0;if(k.columnsArray){for(h=0;h<d;h++){a=k.owner.columns[h];if(a<1){f+=a;m++}}}g.colCls=b.groupCls;g.columnCount=d;g.columns=[];for(h=0;h<d;h++){c=(g.columns[h]={});if(k.columnsArray){a=k.owner.columns[h];if(a<1){j=((a/f)*100)+"%"}else{j=a+"px"}c.style="width:"+j}else{c.style="width:"+(1/d*100)+"%";m++}}g.tableStyle=!m?"table-layout:fixed;":(m<d)?"table-layout:fixed;width:100%":(l)?"table-layout:auto;width:100%":"table-layout:auto;";return g},initLayout:function(){var b=this,a=b.owner;b.columnsArray=Ext.isArray(a.columns);b.autoColumns=!a.columns||a.columns==="auto";b.vertical=a.vertical;Ext.layout.container.Container.prototype.initLayout.call(this)},isValidParent:Ext.returnTrue,setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderColumn=this.doRenderColumn},renderChildren:function(){var a=this,b=a.owner.items.generation;if(a.lastOwnerItemsGeneration!==b){a.lastOwnerItemsGeneration=b;a.renderItems(a.getLayoutItems())}},renderItems:function(f){var g=this,a=f.length,b,k,j,d,h,c;if(a){Ext.suspendLayouts();if(g.autoColumns){g.addMissingColumns(a)}d=g.columnNodes.length;j=Math.ceil(a/d);for(b=0;b<a;b++){k=f[b];h=g.getRenderRowIndex(b,j,d);c=g.getRenderColumnIndex(b,j,d);if(!k.rendered){g.renderItem(k,h,c)}else{if(!g.isItemAtPosition(k,h,c)){g.moveItem(k,h,c)}}}if(g.autoColumns){g.removeExceedingColumns(a)}Ext.resumeLayouts(true)}},isItemAtPosition:function(b,c,a){return b.el.dom===this.getNodeAt(c,a)},getRenderColumnIndex:function(b,a,c){if(this.vertical){return Math.floor(b/a)}else{return b%c}},getRenderRowIndex:function(b,a,d){var c=this;if(c.vertical){return b%a}else{return Math.floor(b/d)}},getNodeAt:function(b,a){return this.columnNodes[a].childNodes[b]},addMissingColumns:function(a){var g=this,c=g.columnNodes.length,f,h,b,d;if(c<a){f=a-c;h=g.rowEl;b=g.owner.groupCls;for(d=0;d<f;d++){h.createChild({cls:b,tag:"td",vAlign:"top",role:"presentation"})}}},removeExceedingColumns:function(a){var f=this,b=f.columnNodes.length,d,g,c;if(b>a){d=b-a;g=f.rowEl;for(c=0;c<d;c++){g.last().destroy()}}},renderItem:function(c,d,a){var b=this;b.configureItem(c);c.render(Ext.get(b.columnNodes[a]),d)},moveItem:function(d,g,b){var c=this,a=c.columnNodes[b],f=a.childNodes[g];a.insertBefore(d.el.dom,f||null)}},0,0,0,0,["layout.checkboxgroup"],0,[Ext.layout.container,"CheckboxGroup"],0));(Ext.cmd.derive("Ext.form.CheckboxGroup",Ext.form.FieldContainer,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:"x-form-check-group",extraFieldBodyCls:"x-form-checkboxgroup-body",layout:"checkboxgroup",componentCls:"x-form-checkboxgroup",ariaRole:"group",initComponent:function(){var a=this;Ext.form.FieldContainer.prototype.initComponent.call(this);a.initField()},initValue:function(){var b=this,a=b.value;b.originalValue=b.lastValue=a||b.getValue();if(a){b.setValue(a)}},onAdd:function(f){var d=this,b,a,c;if(f.isCheckbox){d.mon(f,"change",d.checkChange,d)}else{if(f.isContainer){b=f.items.items;for(c=0,a=b.length;c<a;c++){d.onAdd(b[c])}}}Ext.form.FieldContainer.prototype.onAdd.apply(this,arguments)},onRemove:function(f){var d=this,b,a,c;if(f.isCheckbox){d.mun(f,"change",d.checkChange,d)}else{if(f.isContainer){b=f.items.items;for(c=0,a=b.length;c<a;c++){d.onRemove(b[c])}}}Ext.form.FieldContainer.prototype.onRemove.apply(this,arguments)},isEqual:function(b,a){var c=Ext.Object.toQueryString;return c(b)===c(a)},getErrors:function(){var a=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){a.push(this.blankText)}return a},getBoxes:function(a){return this.query("[isCheckbox]"+(a||""))},eachBox:function(b,a){Ext.Array.forEach(this.getBoxes(),b,a||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){if(c[a].isDirty()){return true}}},setReadOnly:function(f){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){c[a].setReadOnly(f)}this.readOnly=f},reset:function(){var c=this,b=c.hasActiveError(),a=c.preventMark;c.preventMark=true;c.batchChanges(function(){var f=c.getBoxes(),d,g=f.length;for(d=0;d<g;d++){f[d].reset()}});c.preventMark=a;c.unsetActiveError();if(b){c.updateLayout()}},resetOriginalValue:function(){var d=this,c=d.getBoxes(),a,f=c.length;for(a=0;a<f;a++){c[a].resetOriginalValue()}d.originalValue=d.getValue();d.checkDirty()},setValue:function(h){var g=this,d=g.getBoxes(),a,k=d.length,f,c,j;g.batchChanges(function(){for(a=0;a<k;a++){f=d[a];c=f.getName();j=false;if(h&&h.hasOwnProperty(c)){if(Ext.isArray(h[c])){j=Ext.Array.contains(h[c],f.inputValue)}else{j=h[c]}}f.setValue(j)}});return g},getValue:function(){var d={},g=this.getBoxes(),c,k=g.length,h,f,a,j;for(c=0;c<k;c++){h=g[c];f=h.getName();a=h.inputValue;if(h.getValue()){if(d.hasOwnProperty(f)){j=d[f];if(!Ext.isArray(j)){j=d[f]=[j]}j.push(a)}else{d[f]=a}}}return d},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,d,c,b;if(a.disabled){c=true}else{d=a.getErrors();c=Ext.isEmpty(d);b=a.wasValid;if(c){a.unsetActiveError()}else{a.setActiveError(d)}}if(c!==b){a.wasValid=c;a.fireEvent("validitychange",a,c);a.updateLayout()}return c}},0,["checkboxgroup"],["component","box","container","fieldcontainer","checkboxgroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true},["widget.checkboxgroup"],[["field",Ext.form.field.Field]],[Ext.form,"CheckboxGroup"],function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}));(Ext.cmd.derive("Ext.form.FieldSet",Ext.container.Container,{focusable:true,checkboxUI:"default",collapsed:false,toggleOnTitleClick:true,baseCls:"x-fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:null,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:false,beforeDestroy:function(){var b=this,a=b.legend;if(a){delete a.ownerCt;a.destroy();b.legend=null}Ext.container.Container.prototype.beforeDestroy.call(this)},initComponent:function(){var b=this,a=b.baseCls;b.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);b.layout.managePadding=b.layout.manageOverflow=false;if(b.collapsed){b.addCls(a+"-collapsed");b.collapse()}if(b.title||b.checkboxToggle||b.collapsible){b.addTitleClasses();b.legend=Ext.widget(b.createLegendCt())}b.initMonitor()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.bodyTargetCls=a.bodyTargetCls;a.protoBody.writeTo(b);delete a.protoBody;return b},getState:function(){var a=Ext.container.Container.prototype.getState.call(this);a=this.addPropertyToState(a,"collapsed");return a},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return true},collapsedVertical:function(){return true},createLegendCt:function(){var c=this,a=[],b={xtype:"container",baseCls:c.baseCls+"-header",layout:"container",ui:c.ui,id:c.id+"-legend",autoEl:"legend",ariaRole:null,ariaLabelledBy:"."+c.baseCls+"-header-text",items:a,ownerCt:c,shrinkWrap:true,ownerLayout:c.componentLayout};if(c.checkboxToggle){a.push(c.createCheckboxCmp())}else{if(c.collapsible){a.push(c.createToggleCmp())}}a.push(c.createTitleCmp());return b},createTitleCmp:function(){var b=this,a={xtype:"component",html:b.title,ui:b.ui,cls:b.baseCls+"-header-text",id:b.id+"-legendTitle"};if(b.collapsible&&b.toggleOnTitleClick){a.listeners={click:{element:"el",scope:b,fn:b.toggle}};a.cls+=" "+b.baseCls+"-header-text-collapsible"}return(b.titleCmp=Ext.widget(a))},createCheckboxCmp:function(){var b=this,c="-checkbox",a=b.baseCls+"-header"+c;a+=" "+a+"-"+b.ui;b.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:true,name:b.checkboxName||b.id+c,cls:a,id:b.id+"-legendChk",ui:b.checkboxUI,checked:!b.collapsed,msgTarget:"none",listeners:{change:b.onCheckChange,scope:b}});return b.checkboxCmp},createToggleCmp:function(){var a=this;a.toggleCmp=Ext.widget({xtype:"tool",cacheHeight:false,cls:a.baseCls+"-header-tool-"+a.ui,type:"toggle",handler:a.toggle,id:a.id+"-legendToggle",scope:a});return a.toggleCmp},doRenderLegend:function(b,f){var d=f.$comp,c=d.legend,a;if(c){c.ownerLayout.configureItem(c);a=c.getRenderTree();Ext.DomHelper.generateMarkup(a,b)}},getCollapsed:function(){return this.collapsed?"top":false},getCollapsedDockedItems:function(){var a=this.legend;return a?[a]:[]},setTitle:function(c){var b=this,a=b.legend;b.title=c;if(b.rendered){if(!a){b.legend=a=Ext.widget(b.createLegendCt());b.addTitleClasses();a.ownerLayout.configureItem(a);a.render(b.el,0)}b.titleCmp.update(c)}else{if(a){b.titleCmp.update(c)}else{b.addTitleClasses();b.legend=Ext.widget(b.createLegendCt())}}return b},addTitleClasses:function(){var b=this,c=b.title,a=b.baseCls;if(c){b.addCls(a+"-with-title")}if(c||b.checkboxToggle||b.collapsible){b.addCls(a+"-with-legend")}},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(b){var c=this,d=c.checkboxCmp,a=b?"expand":"collapse";if(!c.rendered||c.fireEvent("before"+a,c)!==false){b=!!b;if(d){d.setValue(b)}if(b){c.removeCls(c.baseCls+"-collapsed")}else{c.addCls(c.baseCls+"-collapsed")}c.collapsed=!b;if(b){delete c.getInherited().collapsed}else{c.getInherited().collapsed=true}if(c.rendered){c.updateLayout({isRoot:false});c.fireEvent(a,c)}}return c},getRefItems:function(a){var c=Ext.container.Container.prototype.getRefItems.apply(this,arguments),b=this.legend;if(b){c.unshift(b);if(a){c.unshift.apply(c,b.getRefItems(true))}}return c},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},finishRender:function(){var a=this.legend;Ext.container.Container.prototype.finishRender.call(this);if(a){a.finishRender()}},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:true})}return a},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(f){var c=this,a=c.getProtoBody(),d=c.padding,b;if(d!==undefined){if(Ext.isIE8){d=c.parseBox(d);b=Ext.Element.parseBox(0);b.top=d.top;d.top=0;a.setStyle("padding",c.unitizeBox(b))}f.setStyle("padding",c.unitizeBox(d))}},onCheckChange:function(b,a){this.setExpanded(a)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderLegend=this.doRenderLegend}}},0,["fieldset"],["component","box","container","fieldset"],{component:true,box:true,container:true,fieldset:true},["widget.fieldset"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldSet"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",ariaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var b={},d=this.basicFormConfigs,a=d.length,c=0,f;for(;c<a;++c){f=d[c];b[f]=this[f]}return new Ext.form.Basic(this,b)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,b,c,a){return this.getForm().getValues(d,b,c,a)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){var a=this.form.getFields().items,b,c=a.length;for(b=0;b<c;b++){a[b].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.RadioManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name==a&&c.getFormId()==b})},getWithValue:function(a,b,c){return this.filterBy(function(d){return d.name==a&&d.inputValue==b&&d.getFormId()==c})},getChecked:function(a,b){return this.findBy(function(c){return c.name==a&&c.checked&&c.getFormId()==b})}},0,0,0,0,0,0,[Ext.form,"RadioManager"],0));(Ext.cmd.derive("Ext.form.field.Radio",Ext.form.field.Checkbox,{alternateClassName:"Ext.form.Radio",isRadio:true,inputType:"radio",ariaRole:"radio",tabIndex:0,formId:null,getGroupValue:function(){var a=this.getManager().getChecked(this.name,this.getFormId());return a?a.inputValue:null},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(true)}},onRemoved:function(){Ext.form.field.Checkbox.prototype.onRemoved.apply(this,arguments);this.formId=null},setValue:function(c){var b=this,a,d;if(Ext.isBoolean(c)){Ext.form.field.Checkbox.prototype.setValue.apply(this,arguments)}else{d=b.getManager().getWithValue(b.name,c,b.getFormId()).getAt(0);if(d){d.setValue(true)}}return b},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){var a=Ext.form.field.Checkbox.prototype.getModelData.apply(this,arguments);if(a){a[this.getName()]=this.getSubmitValue()}return a},onChange:function(c,a){var g=this,f,d,b,h;Ext.form.field.Checkbox.prototype.onChange.apply(this,arguments);if(c){h=g.getManager().getByName(g.name,g.getFormId()).items;d=h.length;for(f=0;f<d;f++){b=h[f];if(b!==g){b.setValue(false)}}}},getManager:function(){return Ext.form.RadioManager}},0,["radiofield","radio"],["component","box","field","checkboxfield","checkbox","radiofield","radio"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,radiofield:true,radio:true},["widget.radio","widget.radiofield"],0,[Ext.form.field,"Radio",Ext.form,"Radio"],0));(Ext.cmd.derive("Ext.form.RadioGroup",Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:"x-form-radio-group",ariaRole:"radiogroup",getBoxes:function(b,a){return(a||this).query("[isRadio]"+(b||""))},checkChange:function(){var b=this.getValue(),a=Ext.Object.getKeys(b)[0];if(Ext.isArray(b[a])){return}Ext.form.CheckboxGroup.prototype.checkChange.apply(this,arguments)},setValue:function(d){var j,g,f,h,c,a,b;if(Ext.isObject(d)){for(b in d){if(d.hasOwnProperty(b)){j=d[b];g=this.items.first();f=g?g.getFormId():null;h=Ext.form.RadioManager.getWithValue(b,j,f).items;a=h.length;for(c=0;c<a;++c){h[c].setValue(true)}}}}return this},privates:{getFocusables:function(){return this.getBoxes()},initDefaultFocusable:function(a){var d=this,c,b;c=d.getChecked();if(c.length){b=c[0]}else{b=d.findNextFocusableChild(null,true,null,a)}if(b){d.activateFocusable(b)}return b},onFocusableContainerFocusLeave:function(){this.clearFocusables();this.initDefaultFocusable()},doFocusableChildAdd:function(g){var f=this,b=f.mixins.focusablecontainer,d,c,a;d=g.isContainer?f.getBoxes("",g):[g];for(c=0,a=d.length;c<a;c++){b.doFocusableChildAdd.call(f,d[c])}},doFocusableChildRemove:function(g){var f=this,b=f.mixins.focusablecontainer,d,c,a;d=g.isContainer?f.getBoxes("",g):[g];for(c=0,a=d.length;c<a;c++){b.doFocusableChildRemove.call(f,d[c])}},focusChild:function(c,b,d){var a=this.mixins.focusablecontainer.focusChild.apply(this,arguments);if(!d.ctrlKey){a.setValue(true)}}}},0,["radiogroup"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true},["widget.radiogroup"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.form,"RadioGroup"],0));(Ext.cmd.derive("Ext.picker.Month",Ext.Component,{alternateClassName:"Ext.MonthPicker",isMonthPicker:true,focusable:true,childEls:["bodyEl","prevEl","nextEl","monthEl","yearEl"],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>',"</div>","</tpl>","</div>",'<div class="x-clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:"x-monthpicker",showButtons:true,measureWidth:35,measureMaxHeight:20,smallCls:"x-monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var a=this;a.selectedCls=a.baseCls+"-selected";if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear(new Date().getFullYear()-4,-4);if(a.showButtons){a.okBtn=new Ext.button.Button({text:a.okText,handler:a.onOkClick,scope:a});a.cancelBtn=new Ext.button.Button({text:a.cancelText,handler:a.onCancelClick,scope:a})}Ext.Component.prototype.initComponent.call(this)},beforeRender:function(){var g=this,c=0,b=[],a=Ext.Date.getShortMonthName,f=g.monthOffset,h=g.monthMargin,d="";if(g.padding&&!g.width){g.cacheWidth()}Ext.Component.prototype.beforeRender.call(this);for(;c<f;++c){b.push(a(c),a(c+f))}if(Ext.isDefined(h)){d="margin: 0 "+h+"px;"}Ext.apply(g.renderData,{months:b,years:g.getYears(),showButtons:g.showButtons,monthStyle:d})},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+" "+a.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},afterRender:function(){var b=this,a=b.bodyEl;Ext.Component.prototype.afterRender.call(this);b.mon(a,"click",b.onBodyClick,b);b.mon(a,"dblclick",b.onBodyClick,b);b.years=a.select("."+b.baseCls+"-year a");b.months=a.select("."+b.baseCls+"-month a");b.backRepeater=new Ext.util.ClickRepeater(b.prevEl,{handler:Ext.Function.bind(b.adjustYear,b,[-b.totalYears])});b.prevEl.addClsOnOver(b.baseCls+"-yearnav-prev-over");b.nextRepeater=new Ext.util.ClickRepeater(b.nextEl,{handler:Ext.Function.bind(b.adjustYear,b,[b.totalYears])});b.nextEl.addClsOnOver(b.baseCls+"-yearnav-next-over");b.updateBody();if(!Ext.isDefined(b.monthMargin)){Ext.picker.Month.prototype.monthMargin=b.calculateMonthMargin()}},calculateMonthMargin:function(){var d=this,b=d.monthEl,a=d.months,f=a.first(),c=f.getMargin("l");while(c&&d.getLargest()>d.measureMaxHeight){--c;a.setStyle("margin","0 "+c+"px")}return c},getLargest:function(a){var b=0;this.months.each(function(d){var c=d.getHeight();if(c>b){b=c}});return b},setValue:function(d){var c=this,f=c.activeYear,g=c.monthOffset,b,a;if(!d){c.value=[null,null]}else{if(Ext.isDate(d)){c.value=[d.getMonth(),d.getFullYear()]}else{c.value=[d[0],d[1]]}}if(c.rendered){b=c.value[1];if(b!==null){if((b<f||b>f+c.yearOffset)){c.activeYear=b-c.yearOffset+1}}c.updateBody()}return c},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var d=this,f=d.yearOffset,g=d.activeYear,a=g+f,c=g,b=[];for(;c<a;++c){b.push(c,c+f)}return b},updateBody:function(){var j=this,f=j.years,b=j.months,n=j.getYears(),o=j.selectedCls,l=j.getYear(null),g=j.value[0],m=j.monthOffset,h,d,k,a,c;if(j.rendered){f.removeCls(o);b.removeCls(o);d=f.elements;a=d.length;for(k=0;k<a;k++){c=Ext.fly(d[k]);h=n[k];c.dom.innerHTML=h;if(h==l){c.addCls(o)}}if(g!==null){if(g<m){g=g*2}else{g=(g-m)*2+1}b.item(g).addCls(o)}}},getYear:function(a,c){var b=this.value[1];c=c||0;return b===null?a:b+c},onBodyClick:function(d,b){var c=this,a=d.type=="dblclick";if(d.getTarget("."+c.baseCls+"-month")){d.stopEvent();c.onMonthClick(b,a)}else{if(d.getTarget("."+c.baseCls+"-year")){d.stopEvent();c.onYearClick(b,a)}}},adjustYear:function(a){if(typeof a!="number"){a=this.totalYears}this.activeYear+=a;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(c,a){var b=this;b.value[0]=b.resolveOffset(b.months.indexOf(c),b.monthOffset);b.updateBody();b.fireEvent("month"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},onYearClick:function(c,a){var b=this;b.value[1]=b.activeYear+b.resolveOffset(b.years.indexOf(c),b.yearOffset);b.updateBody();b.fireEvent("year"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},resolveOffset:function(a,b){if(a%2===0){return(a/2)}else{return b+Math.floor(a/2)}},beforeDestroy:function(){var a=this;a.years=a.months=null;Ext.destroyMembers(a,"backRepeater","nextRepeater","okBtn","cancelBtn");Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.destroyMembers(this,"okBtn","cancelBtn");Ext.Component.prototype.onDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.apply(this,arguments);if(this.showButtons){a.okBtn.finishRender();a.cancelBtn.finishRender()}}}},0,["monthpicker"],["component","box","monthpicker"],{component:true,box:true,monthpicker:true},["widget.monthpicker"],0,[Ext.picker,"Month",Ext,"MonthPicker"],0));Ext.define("ExtThemeNeptune.picker.Month",{override:"Ext.picker.Month",measureMaxHeight:36});Ext.define("FBEditor.override.picker.Month",{override:"Ext.picker.Month"});(Ext.cmd.derive("Ext.picker.Date",Ext.Component,{alternateClassName:"Ext.DatePicker",isDatePicker:true,focusable:true,childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:true,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="button" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="button" title="{nextText}"></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" {%','if (values.$comp.focusable) {out.push("tabindex=\\"0\\"");}','%} cellspacing="0">','<thead><tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr></thead>",'<tbody><tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>","</div>",{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)},isEndOfWeek:function(b){b--;var a=b%7===0&&b!==0;return a?'</tr><tr role="row">':""},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)}}],todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:true,disableAnim:false,baseCls:"x-datepicker",longDayFormat:"F d, Y",initHour:12,numDays:42,initComponent:function(){var b=this,a=Ext.Date.clearTime;b.selectedCls=b.baseCls+"-selected";b.disabledCellCls=b.baseCls+"-disabled";b.prevCls=b.baseCls+"-prevday";b.activeCls=b.baseCls+"-active";b.cellCls=b.baseCls+"-cell";b.nextCls=b.baseCls+"-prevday";b.todayCls=b.baseCls+"-today";if(!b.format){b.format=Ext.Date.defaultFormat}if(!b.dayNames){b.dayNames=Ext.Date.dayNames}b.dayNames=b.dayNames.slice(b.startDay).concat(b.dayNames.slice(0,b.startDay));Ext.Component.prototype.initComponent.call(this);b.value=b.value?a(b.value,true):a(new Date());b.initDisabledDays()},getRefOwner:function(){return this.pickerField||Ext.Component.prototype.getRefOwner.call(this)},getRefItems:function(){var a=[],c=this.monthBtn,b=this.todayBtn;if(c){a.push(c)}if(b){a.push(b)}return a},beforeRender:function(){var b=this,c=new Array(b.numDays),a=Ext.Date.format(new Date(),b.format);if(b.padding&&!b.width){b.cacheWidth()}b.monthBtn=new Ext.button.Split({ownerCt:b,ownerLayout:b.getComponentLayout(),text:"",tooltip:b.monthYearText,listeners:{click:b.doShowMonthPicker,arrowclick:b.doShowMonthPicker,scope:b}});if(b.showToday){b.todayBtn=new Ext.button.Button({ownerCt:b,ownerLayout:b.getComponentLayout(),text:Ext.String.format(b.todayText,a),tooltip:Ext.String.format(b.todayTip,a),tooltipType:"title",handler:b.selectToday,scope:b})}Ext.Component.prototype.beforeRender.call(this);Ext.applyIf(b,{renderData:{}});Ext.apply(b.renderData,{dayNames:b.dayNames,showToday:b.showToday,prevText:b.prevText,nextText:b.nextText,days:c});b.protoEl.unselectable()},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+" "+a.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},onRender:function(b,a){var c=this;Ext.Component.prototype.onRender.apply(this,arguments);c.cells=c.eventEl.select("tbody td");c.textNodes=c.eventEl.query("tbody td div");c.eventEl.set({"aria-labelledby":c.monthBtn.id});c.mon(c.eventEl,{scope:c,mousewheel:c.handleMouseWheel,click:{fn:c.handleDateClick,delegate:"div."+c.baseCls+"-date"}})},initEvents:function(){var c=this,d=c.pickerField,a=Ext.Date,b=a.DAY;Ext.Component.prototype.initEvents.call(this);if(!c.focusable){c.el.on({mousedown:c.onMouseDown})}c.prevRepeater=new Ext.util.ClickRepeater(c.prevEl,{handler:c.showPrevMonth,scope:c,preventDefault:true,stopDefault:true});c.nextRepeater=new Ext.util.ClickRepeater(c.nextEl,{handler:c.showNextMonth,scope:c,preventDefault:true,stopDefault:true});c.keyNav=new Ext.util.KeyNav(d?d.inputEl:c.eventEl,Ext.apply({scope:c,capture:true,left:function(f){if(f.ctrlKey){c.showPrevMonth()}else{c.update(a.add(c.activeDate,b,-1))}},right:function(f){if(f.ctrlKey){c.showNextMonth()}else{c.update(a.add(c.activeDate,b,1))}},up:function(f){if(f.ctrlKey){c.showNextYear()}else{c.update(a.add(c.activeDate,b,-7))}},down:function(f){if(f.ctrlKey){c.showPrevYear()}else{c.update(a.add(c.activeDate,b,7))}},pageUp:function(f){if(f.ctrlKey){c.showPrevYear()}else{c.showPrevMonth()}},pageDown:function(f){if(f.ctrlKey){c.showNextYear()}else{c.showNextMonth()}},tab:function(f){c.handleTabClick(f);return true},enter:function(f){c.handleDateClick(f,c.activeCell.firstChild)},space:function(){c.setValue(new Date(c.activeCell.firstChild.dateValue));var f=c.startValue,g=c.value,h;if(d){h=d.getValue();if(h&&f&&h.getTime()===g.getTime()){d.setValue(f)}else{d.setValue(g)}}},home:function(f){c.update(a.getFirstDateOfMonth(c.activeDate))},end:function(f){c.update(a.getLastDateOfMonth(c.activeDate))}},c.keyNavConfig));if(c.disabled){c.syncDisabled(true)}c.update(c.value)},onMouseDown:function(a){a.preventDefault()},handleTabClick:function(d){var c=this,a=c.getSelectedDate(c.activeDate),b=c.handler;if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.setValue(new Date(a.dateValue));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}},getSelectedDate:function(a){var d=this,j=a.getTime(),k=d.cells,l=d.selectedCls,g=k.elements,b,f=g.length,h;k.removeCls(l);for(b=0;b<f;b++){h=Ext.fly(g[b]);if(h.dom.firstChild.dateValue==j){return h.dom.firstChild}}return null},initDisabledDays:function(){var h=this,b=h.disabledDates,g="(?:",a,j,c,f;if(!h.disabledDatesRE&&b){a=b.length-1;c=b.length;for(j=0;j<c;j++){f=b[j];g+=Ext.isDate(f)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(f,h.format))+"$":f;if(j!==a){g+="|"}}h.disabledDatesRE=new RegExp(g+")")}},setDisabledDates:function(a){var b=this;if(Ext.isArray(a)){b.disabledDates=a;b.disabledDatesRE=null}else{b.disabledDatesRE=a}b.initDisabledDays();b.update(b.value,true);return b},setDisabledDays:function(a){this.disabledDays=a;return this.update(this.value,true)},setMinDate:function(a){this.minDate=a;return this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;return this.update(this.value,true)},setValue:function(a){this.value=Ext.Date.clearTime(a||new Date(),true);return this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(a){return a.substr(0,1)},onEnable:function(){Ext.Component.prototype.onEnable.call(this);this.syncDisabled(false);this.update(this.activeDate)},onShow:function(){Ext.Component.prototype.onShow.call(this);this.syncDisabled(false);if(this.pickerField){this.startValue=this.pickerField.getValue()}},onHide:function(){Ext.Component.prototype.onHide.call(this);this.syncDisabled(true)},onDisable:function(){Ext.Component.prototype.onDisable.call(this);this.syncDisabled(true)},getActive:function(){return this.activeDate||this.value},runAnimation:function(c){var b=this.monthPicker,a={duration:200,callback:function(){b.setVisible(!c)}};if(c){b.el.slideOut("t",a)}else{b.el.slideIn("t",a)}},hideMonthPicker:function(a){var c=this,b=c.monthPicker;if(b&&b.isVisible()){if(c.shouldAnimate(a)){c.runAnimation(true)}else{b.hide()}}return c},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(a){var d=this,c=d.el,b;if(d.rendered&&!d.disabled){b=d.createMonthPicker();if(!b.isVisible()){b.setValue(d.getActive());b.setSize(c.getSize());b.setPosition(-c.getBorderWidth("l"),-c.getBorderWidth("t"));if(d.shouldAnimate(a)){d.runAnimation(false)}else{b.show()}}}return d},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var b=this,a=b.monthPicker;if(!a){b.monthPicker=a=new Ext.picker.Month({renderTo:b.el,floating:true,padding:b.padding,shadow:false,small:b.showToday===false,listeners:{scope:b,cancelclick:b.onCancelClick,okclick:b.onOkClick,yeardblclick:b.onOkClick,monthdblclick:b.onOkClick}});if(!b.disableAnim){a.el.setStyle("display","none")}a.hide();b.on("beforehide",b.doHideMonthPicker,b)}return a},onOkClick:function(b,f){var d=this,g=f[0],c=f[1],a=new Date(c,g,d.getActive().getDate());if(a.getMonth()!==g){a=Ext.Date.getLastDateOfMonth(new Date(c,g,1))}d.setValue(a);d.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate);this.hideMonthPicker()},showPrevMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();if(b>0){this.showPrevMonth()}else{if(b<0){this.showNextMonth()}}}},handleDateClick:function(d,a){var c=this,b=c.handler;d.stopEvent();if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.setValue(new Date(a.dateValue));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var c=this,a=c.todayBtn,b=c.handler;if(a&&!a.disabled){c.setValue(Ext.Date.clearTime(new Date()));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}return c},selectedUpdate:function(f){var h=this,g=f.getTime(),d=h.cells,b=h.selectedCls,k,j=d.getCount(),a;a=h.activeCell;if(a){Ext.fly(a).removeCls(b);a.setAttribute("aria-selected",false)}for(k=0;k<j;k++){a=d.item(k);if(h.textNodes[k].dateValue==g){h.activeCell=a.dom;h.eventEl.dom.setAttribute("aria-activedescendant",a.dom.id);a.dom.setAttribute("aria-selected",true);a.addCls(b);h.fireEvent("highlightitem",h,a);break}}},fullUpdate:function(z){var D=this,d=D.cells.elements,c=D.textNodes,F=D.disabledCellCls,m=Ext.Date,v=0,C=0,k=+m.clearTime(z,true),y=+m.clearTime(new Date()),t=D.minDate?m.clearTime(D.minDate,true):Number.NEGATIVE_INFINITY,u=D.maxDate?m.clearTime(D.maxDate,true):Number.POSITIVE_INFINITY,B=D.disabledDatesRE,s=D.disabledDatesText,G=D.disabledDays?D.disabledDays.join(""):false,A=D.disabledDaysText,w=D.format,j=m.getDaysInMonth(z),p=m.getFirstDateOfMonth(z),f=p.getDay()-D.startDay,x=m.add(z,m.MONTH,-1),o=D.ariaTitleDateFormat,h,q,a,E,l,n,b,g,r;if(f<0){f+=7}j+=f;h=m.getDaysInMonth(x)-f;q=new Date(x.getFullYear(),x.getMonth(),h,D.initHour);if(D.showToday){E=m.clearTime(new Date());a=(E<t||E>u||(B&&w&&B.test(m.dateFormat(E,w)))||(G&&G.indexOf(E.getDay())!=-1));if(!D.disabled){D.todayBtn.setDisabled(a)}}l=function(J,I){var H=d[J];r=+m.clearTime(q,true);H.setAttribute("aria-label",m.format(q,o));H.firstChild.dateValue=r;if(r==y){I+=" "+D.todayCls;H.firstChild.title=D.todayText;D.todayElSpan=Ext.DomHelper.append(H.firstChild,{tag:"span",cls:"x-hidden-clip",html:D.todayText},true)}if(r==k){D.activeCell=H;D.eventEl.dom.setAttribute("aria-activedescendant",H.id);H.setAttribute("aria-selected",true);I+=" "+D.selectedCls;D.fireEvent("highlightitem",D,H)}else{H.setAttribute("aria-selected",false)}if(r<t){I+=" "+F;H.setAttribute("aria-label",D.minText)}else{if(r>u){I+=" "+F;H.setAttribute("aria-label",D.maxText)}else{if(G&&G.indexOf(q.getDay())!==-1){H.setAttribute("aria-label",A);I+=" "+F}else{if(B&&w){g=m.dateFormat(q,w);if(B.test(g)){H.setAttribute("aria-label",s.replace("%0",g));I+=" "+F}}}}}H.className=I+" "+D.cellCls};for(;v<D.numDays;++v){if(v<f){n=(++h);b=D.prevCls}else{if(v>=j){n=(++C);b=D.nextCls}else{n=v-f+1;b=D.activeCls}}c[v].innerHTML=n;q.setDate(q.getDate()+1);l(v,b)}D.monthBtn.setText(Ext.Date.format(z,D.monthYearFormat))},update:function(a,d){var b=this,c=b.activeDate;if(b.rendered){b.activeDate=a;if(!d&&c&&b.el&&c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear()){b.selectedUpdate(a,c)}else{b.fullUpdate(a,c)}}return b},beforeDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn);delete a.textNodes;delete a.cells.elements}Ext.Component.prototype.beforeDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.call(this);a.monthBtn.finishRender();if(a.showToday){a.todayBtn.finishRender()}},getFocusEl:function(){return this.eventEl},syncDisabled:function(b){var c=this,a=c.keyNav;if(a){a.setDisabled(b);c.prevRepeater.setDisabled(b);c.nextRepeater.setDisabled(b);if(c.todayBtn){c.todayBtn.setDisabled(b)}}}}},0,["datepicker"],["component","box","datepicker"],{component:true,box:true,datepicker:true},["widget.datepicker"],0,[Ext.picker,"Date",Ext,"DatePicker"],0));Ext.define("FBEditor.override.picker.Date",{override:"Ext.picker.Date"});(Ext.cmd.derive("Ext.form.field.Date",Ext.form.field.Picker,{alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:"x-form-date-trigger",showToday:true,useStrict:undefined,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,valuePublishEvent:["select","blur"],initComponent:function(){var d=this,b=Ext.isString,c,a;c=d.minValue;a=d.maxValue;if(b(c)){d.minValue=d.parseDate(c)}if(b(a)){d.maxValue=d.parseDate(a)}d.disabledDatesRE=null;d.initDisabledDays();Ext.form.field.Picker.prototype.initComponent.call(this)},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}Ext.form.field.Picker.prototype.initValue.call(this)},initDisabledDays:function(){if(this.disabledDates){var b=this.disabledDates,a=b.length-1,g="(?:",h,f=b.length,c;for(h=0;h<f;h++){c=b[h];g+=Ext.isDate(c)?"^"+Ext.String.escapeRegex(c.dateFormat(this.format))+"$":c;if(h!==a){g+="|"}}this.disabledDatesRE=new RegExp(g+")")}},setDisabledDates:function(c){var b=this,a=b.picker;b.disabledDates=c;b.initDisabledDays();if(a){a.setDisabledDates(b.disabledDatesRE)}},setDisabledDays:function(b){var a=this.picker;this.disabledDays=b;if(a){a.setDisabledDays(b)}},setMinValue:function(d){var b=this,a=b.picker,c=(Ext.isString(d)?b.parseDate(d):d);b.minValue=c;if(a){a.minText=Ext.String.format(b.minText,b.formatDate(b.minValue));a.setMinDate(c)}},setMaxValue:function(c){var b=this,a=b.picker,d=(Ext.isString(c)?b.parseDate(c):c);b.maxValue=d;if(a){a.maxText=Ext.String.format(b.maxText,b.formatDate(b.maxValue));a.setMaxDate(d)}},getErrors:function(q){q=arguments.length>0?q:this.formatDate(this.processRawValue(this.getRawValue()));var j=this,p=Ext.String.format,k=Ext.Date.clearTime,o=Ext.form.field.Picker.prototype.getErrors.call(this,q),n=j.disabledDays,d=j.disabledDatesRE,m=j.minValue,h=j.maxValue,g=n?n.length:0,f=0,a,b,l,c;if(q===null||q.length<1){return o}a=q;q=j.parseDate(q);if(!q){o.push(p(j.invalidText,a,Ext.Date.unescapeFormat(j.format)));return o}c=q.getTime();if(m&&c<k(m).getTime()){o.push(p(j.minText,j.formatDate(m)))}if(h&&c>k(h).getTime()){o.push(p(j.maxText,j.formatDate(h)))}if(n){l=q.getDay();for(;f<g;f++){if(l===n[f]){o.push(j.disabledDaysText);break}}}b=j.formatDate(q);if(d&&d.test(b)){o.push(p(j.disabledDatesText,b))}return o},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},safeParse:function(g,h){var f=this,c=Ext.Date,a=null,b=f.useStrict,d;if(c.formatContainsHourInfo(h)){a=c.parse(g,h,b)}else{d=c.parse(g+" "+f.initTime,h+" "+f.initTimeFormat,b);if(d){a=c.clearTime(d)}}return a},getSubmitValue:function(){var b=this.submitFormat||this.format,a=this.getValue();return a?Ext.Date.format(a,b):""},parseDate:function(f){if(!f||Ext.isDate(f)){return f}var d=this,h=d.safeParse(f,d.format),b=d.altFormats,g=d.altFormatsArray,c=0,a;if(!h&&b){g=g||b.split("|");a=g.length;for(;c<a&&!h;++c){h=d.safeParse(f,g[c])}}return h},formatDate:function(a){return Ext.isDate(a)?Ext.Date.dateFormat(a,this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return new Ext.picker.Date({pickerField:a,floating:true,focusable:false,hidden:true,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),maxText:b(a.maxText,a.formatDate(a.maxValue)),listeners:{scope:a,select:a.onSelect},keyNavConfig:{esc:function(){a.collapse()}}})},onSelect:function(a,c){var b=this;b.setValue(c);b.fireEvent("select",b,c);b.collapse()},onExpand:function(){var a=this.getValue();this.picker.setValue(Ext.isDate(a)?a:new Date())},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(Ext.isDate(a)){b.setValue(a)}Ext.form.field.Picker.prototype.onBlur.call(this,c)}},0,["datefield"],["component","box","field","textfield","pickerfield","datefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true},["widget.datefield"],0,[Ext.form.field,"Date",Ext.form,"DateField",Ext.form,"Date"],0));Ext.define("FBEditor.override.form.field.Date",{override:"Ext.form.field.Date",panelPicker:null,createPicker:function(){var b=this,a;a=(arguments.callee.$previous||Ext.form.field.Picker.prototype.createPicker).apply(this,arguments);a.fireHierarchyEvent=function(c){};return a},collapseIf:function(d){var b=this,a=b.picker.monthPicker,c;c=a&&a.isVisible()?a.owns(d.target):b.owns(d.target);if(!b.isDestroyed&&!d.within(b.bodyEl,false,true)&&!c){b.collapse()}}});(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:false,tabIndex:null,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],getAfterMarkup:function(a){return this.getTpl("afterTpl").apply(a)},getTemplateArgs:function(){var a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.inputCls=this.inputCls;a.inputName=this.inputName;a.tabIndex=this.ownerCt.tabIndex;return a},afterRender:function(){var a=this;Ext.button.Button.prototype.afterRender.apply(this,arguments);a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFocus,blur:a.onBlur})},fireChange:function(a){this.fireEvent("change",this,a,this.fileInputEl.dom.value)},createFileInput:function(a){var b=this;b.fileInputEl=b.el.createChild({name:b.inputName,id:!a?b.id+"-fileInputEl":undefined,cls:b.inputCls,tag:"input",type:"file",size:1,role:"button"});b.fileInputEl.on({scope:b,change:b.fireChange,focus:b.onFocus,blur:b.onBlur})},reset:function(a){if(a){this.fileInputEl.destroy()}this.createFileInput(!a)},restoreInput:function(a){this.fileInputEl.destroy();a=Ext.get(a);this.el.appendChild(a);this.fileInputEl=a},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=true},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=false},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:false,inputType:"hidden",isTextInput:false,hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(b,a){return this.isEqualAsString(b,a)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hiddenfield","hidden"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.picker.Time",Ext.view.BoundList,{increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:"x-timepicker",loadMask:false,initComponent:function(){var c=this,a=Ext.Date,b=a.clearTime,d=c.initDate;c.absMin=b(new Date(d[0],d[1],d[2]));c.absMax=a.add(b(new Date(d[0],d[1],d[2])),"mi",(24*60)-1);c.store=c.createStore();c.updateList();Ext.view.BoundList.prototype.initComponent.call(this)},setMinValue:function(a){this.minValue=a;this.updateList()},setMaxValue:function(a){this.maxValue=a;this.updateList()},normalizeDate:function(a){var b=this.initDate;a.setFullYear(b[0],b[1],b[2]);return a},updateList:function(){var f=this,b=f.normalizeDate(f.minValue||f.absMin),a=f.normalizeDate(f.maxValue||f.absMax),d=f.getStore().getFilters(),c=f.rangeFilter;d.beginUpdate();if(c){d.remove(c)}c=f.rangeFilter=new Ext.util.Filter({filterFn:function(g){var h=g.get("date");return h>=b&&h<=a}});d.add(c);d.endUpdate()},createStore:function(){var d=this,c=Ext.Date,f=[],b=d.absMin,a=d.absMax;while(b<=a){f.push({disp:c.dateFormat(b,d.format),date:b});b=c.add(b,"mi",d.increment)}return new Ext.data.Store({model:d.modelType,autoDestroy:true,data:f})}},0,["timepicker"],["component","box","dataview","boundlist","timepicker"],{component:true,box:true,dataview:true,boundlist:true,timepicker:true},["widget.timepicker"],0,[Ext.picker,"Time"],function(){this.prototype.modelType=Ext.define(null,{extend:"Ext.data.Model",fields:["disp","date"]})}));(Ext.cmd.derive("Ext.form.field.Time",Ext.form.field.ComboBox,{alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:"x-form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:true,snapToIncrement:false,valuePublishEvent:["select","blur"],initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",ignoreSelection:0,queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var c=this,b=c.minValue,a=c.maxValue;if(b){c.setMinValue(b)}if(a){c.setMaxValue(a)}c.store=c.getPicker().store;c.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+c.displayField+'"])]}<tpl if="xindex < xcount">'+c.delimiter+"</tpl></tpl>",{formatDate:c.formatDate.bind(c)});Ext.form.field.ComboBox.prototype.initComponent.call(this)},isEqual:function(g,f){var b=Ext.Array.from,d=Ext.Date.isEqual,c,a;g=b(g);f=b(f);a=g.length;if(a!==f.length){return false}for(c=0;c<a;c++){if(!d(f[c],g[c])){return false}}return true},setMinValue:function(c){var b=this,a=b.picker;b.setLimit(c,true);if(a){a.setMinValue(b.minValue)}},setMaxValue:function(c){var b=this,a=b.picker;b.setLimit(c,false);if(a){a.setMaxValue(b.maxValue)}},setLimit:function(b,g){var a=this,f,c;if(Ext.isString(b)){f=a.parseDate(b)}else{if(Ext.isDate(b)){f=b}}if(f){c=a.getInitDate();c.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds())}else{c=null}a[g?"minValue":"maxValue"]=c},getInitDate:function(a,b,d){var c=this.initDateParts;return new Date(c[0],c[1],c[2],a||0,b||0,d||0,0)},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},getErrors:function(l){l=arguments.length>0?l:this.getRawValue();var g=this,k=Ext.String.format,j=Ext.form.field.ComboBox.prototype.getErrors.call(this,l),h=g.minValue,f=g.maxValue,c=g.displayTplData,m=g.getRawValue(),b,d,a,n;if(c&&c.length>0){for(b=0,d=c.length;b<d;b++){n=c[b];n=n.date||n.disp;a=g.parseDate(n);if(!a){j.push(k(g.invalidText,n,Ext.Date.unescapeFormat(g.format)));continue}if(h&&a<h){j.push(k(g.minText,g.formatDate(h)))}if(f&&a>f){j.push(k(g.maxText,g.formatDate(f)))}}}else{if(m.length&&!g.parseDate(m)){j.push(k(g.invalidText,m,Ext.Date.unescapeFormat(g.format)))}}return j},formatDate:function(b){var d=[],c,a;b=Ext.Array.from(b);for(c=0,a=b.length;c<a;c++){d.push(Ext.form.field.Date.prototype.formatDate.call(this,b[c]))}return d.join(this.delimiter)},parseDate:function(f){var d=this,h=f,b=d.altFormats,g=d.altFormatsArray,c=0,a;if(f&&!Ext.isDate(f)){h=d.safeParse(f,d.format);if(!h&&b){g=g||b.split("|");a=g.length;for(;c<a&&!h;++c){h=d.safeParse(f,g[c])}}}if(h&&d.snapToIncrement){h=new Date(Ext.Number.snap(h.getTime(),d.increment*60*1000))}return h},safeParse:function(f,g){var d=this,b=Ext.Date,c,a=null;if(b.formatContainsDateInfo(g)){a=b.parse(f,g)}else{c=b.parse(d.initDate+" "+f,d.initDateFormat+" "+g);if(c){a=c}}return a},getSubmitValue:function(){var a=this,c=a.submitFormat||a.format,b=a.getValue();return b?Ext.Date.format(b,c):null},createPicker:function(){var b=this,a;b.listConfig=Ext.apply({xtype:"timepicker",pickerField:b,selModel:{mode:b.multiSelect?"SIMPLE":"SINGLE"},cls:undefined,minValue:b.minValue,maxValue:b.maxValue,increment:b.increment,format:b.format,maxHeight:b.pickerMaxHeight},b.listConfig);a=Ext.form.field.ComboBox.prototype.createPicker.call(this);return a},onItemClick:function(b,a){var d=this,c=b.getSelectionModel().getSelection();if(!d.multiSelect&&c.length){if(c.length>0){c=c[0];if(c&&Ext.Date.isEqual(a.get("date"),c.get("date"))){d.collapse()}}}},syncSelection:function(){var n=this,k=n.picker,m=Ext.Date.isEqual,c=[],h,o,p,f,j,q,b,l,g,a;if(k){k.clearHighlight();o=n.getValue();h=k.getSelectionModel();n.ignoreSelection++;if(o===null){h.deselectAll()}else{p=Ext.Array.from(o);b=k.store.data.items;g=b.length;for(f=0,j=p.length;f<j;f++){q=p[f];if(Ext.isDate(q)){for(l=0;l<g;l++){a=b[l];if(m(a.get("date"),q)){c.push(a);if(!n.multiSelect){break}}}if(c.length){h.select(c)}}}}n.ignoreSelection--}},postBlur:function(){var a=this,b=a.getValue();Ext.form.field.ComboBox.prototype.postBlur.apply(this,arguments);if(a.validateValue(b)){a.setValue(b)}},findRecordByValue:function(a){if(typeof a==="string"){a=this.parseDate(a)}return Ext.form.field.ComboBox.prototype.findRecordByValue.call(this,a)},rawToValue:function(g){var f=this,c,b,d,a;if(f.multiSelect){b=[];c=Ext.Array.from(g);for(d=0,a=c.length;d<a;d++){b.push(f.parseDate(c[d]))}return b}return f.parseDate(g)},setValue:function(a){this.getPicker();if(Ext.isDate(a)){a=this.getInitDate(a.getHours(),a.getMinutes(),a.getSeconds())}return Ext.form.field.ComboBox.prototype.setValue.call(this,a)},getValue:function(){return this.rawToValue(Ext.form.field.ComboBox.prototype.getValue.apply(this,arguments))}},0,["timefield"],["component","box","field","textfield","pickerfield","combobox","combo","timefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,timefield:true},["widget.timefield"],0,[Ext.form.field,"Time",Ext.form,"TimeField",Ext.form,"Time"],0));(Ext.cmd.derive("Ext.grid.ColumnManager",Ext.Base,{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(b,c,a){this.headerCt=c;if(a){this.secondHeaderCt=a}this.visibleOnly=!!b},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},hasVariableRowHeight:function(){var d=this,c=d.getColumns(),a=c.length,b;if(d.variableRowHeight==null){d.variableRowHeight=false;for(b=0;!d.variableRowHeight&&b<a;b++){d.variableRowHeight=!!c[b].variableRowHeight}}return d.variableRowHeight},getHeaderIndex:function(a){if(a.isGroupHeader){a=this.getHeaderColumns(a)[0]}return Ext.Array.indexOf(this.getColumns(),a)},getHeaderAtIndex:function(b){var c=this.getColumns(),a=c[b];return a||null},getPreviousSibling:function(c){var b=this.getHeaderIndex(c),a=null;if(b>0){a=this.getColumns()[b-1]}return a},getNextSibling:function(c){var b=this.getHeaderIndex(c),a;if(b!==-1){a=this.getColumns()[b+1]}return a||null},getFirst:function(){var a=this.getColumns();return a.length>0?a[0]:null},getLast:function(){var b=this.getColumns(),a=b.length;return a>0?b[a-1]:null},getHeaderByDataIndex:function(d){var c=this.getColumns(),a=c.length,b,f;for(b=0;b<a;++b){f=c[b];if(f.dataIndex===d){return f}}return null},getHeaderById:function(f){var c=this.getColumns(),a=c.length,b,d;for(b=0;b<a;++b){d=c[b];if(d.getItemId()===f){return d}}return null},getVisibleHeaderClosestToIndex:function(b){var a=this.getHeaderAtIndex(b);if(a&&a.hidden){a=a.next(":not([hidden])")||a.prev(":not([hidden])")}return a},cacheColumns:function(){var b=this.getHeaderColumns(this.headerCt),a=this.secondHeaderCt;if(a){b=b.concat(this.getHeaderColumns(a))}this.columns=b},getHeaderColumns:function(b){var a=this.visibleOnly?b.getVisibleGridColumns():b.getGridColumns();return Ext.Array.clone(a)},invalidate:function(){var a=this.rootColumns;this.columns=this.variableRowHeight=null;if(a){a.invalidate()}},destroy:function(){this.columns=this.rootColumns=null}},1,0,0,0,0,0,[Ext.grid,"ColumnManager",Ext.grid,"ColumnModel"],function(){this.createAlias("indexOf","getHeaderIndex")}));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,activeCls:"x-menu-item-active",ariaRole:"menuitem",canActivate:true,clickHideDelay:0,destroyMenu:true,disabledCls:"x-menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" role="menuitem" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",activate:function(b){var a=this;if(b||(!a.activated&&a.canActivate&&a.rendered&&!a.isDisabled()&&a.isVisible())){if(!a.plain){a.el.addCls(a.activeCls)}a.focus(false,true);a.activated=true;if(a.hasListeners.activate){a.fireEvent("activate",a)}}},deactivate:function(){var b=this,a;if(b.activated){a=b.up("");if(!b.plain){b.el.removeCls(b.activeCls)}if(a){a.focus(false,true)}b.hideMenu();b.activated=false;if(b.hasListeners.deactivate){b.fireEvent("deactivate",b)}}},deferHideMenu:function(){if(this.menu.isVisible()){this.menu.hide()}},cancelDeferHide:function(){clearTimeout(this.hideMenuTimer)},deferHideParentMenus:function(){var a;Ext.menu.Manager.hideAll();if(!Ext.Element.getActiveElement()){a=this.up(":not([hidden])");if(a){a.focus()}}},expandMenu:function(a){var b=this;if(b.menu){b.cancelDeferHide();if(a===0){b.doExpandMenu()}else{clearTimeout(b.expandMenuTimer);b.expandMenuTimer=Ext.defer(b.doExpandMenu,Ext.isNumber(a)?a:b.menuExpandDelay,b)}}},doExpandMenu:function(){var a=this,b=a.menu;if(a.activated&&(!b.rendered||!b.isVisible())){a.parentMenu.activeChild=b;b.ownerCmp=a;b.parentMenu=a.parentMenu;b.constrainTo=document.body;b.showBy(a,a.menuAlign)}},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},hideMenu:function(a){var b=this;if(b.menu){clearTimeout(b.expandMenuTimer);b.hideMenuTimer=Ext.defer(b.deferHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b)}},initComponent:function(){var b=this,c="x-",a="",d;if(b.plain){a+=c+"menu-item-plain"}if(b.cls){a+=" "+b.cls}b.cls=a;if(b.menu){d=b.menu;delete b.menu;b.setMenu(d)}Ext.Component.prototype.initComponent.apply(this,arguments)},onClick:function(d){var c=this,b=c.clickHideDelay,f=d.browserEvent,a;if(!c.href||c.disabled){d.stopEvent()}if(c.disabled||c.handlingClick){return}if(c.hideOnClick&&d.browserEvent.type!=="touchcancel"&&!(d.type==="tap"&&c.menu)){if(!b){c.deferHideParentMenus()}else{c.deferHideParentMenusTimer=Ext.defer(c.deferHideParentMenus,b,c)}}Ext.callback(c.handler,c.scope,[c,d],0,c);c.fireEvent("click",c,d);if(Ext.isIE9m){a=(f.returnValue===false)?true:false}else{a=!!f.defaultPrevented}if(c.href&&d.type!=="click"&&!a){c.handlingClick=true;c.itemEl.dom.click();delete c.handlingClick}if(!c.hideOnClick){c.focus()}},onRemoved:function(){var a=this;if(a.activated&&a.parentMenu.activeItem===a){a.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);a.parentMenu=a.ownerCmp=null},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;clearTimeout(a.expandMenuTimer);a.cancelDeferHide();clearTimeout(a.deferHideParentMenusTimer);a.setMenu(null);Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var k=this,l=k.glyph,j=Ext._glyphFontFamily,f=!!(k.icon||k.iconCls||l),m=!!k.menu,g=((k.iconAlign==="right")&&!m),c=k.isMenuCheckItem,a=[],d=k.ownerCt,h=d.plain,b;Ext.Component.prototype.beforeRender.call(this);if(f){if(m&&k.showCheckbox){f=false}}if(typeof l==="string"){b=l.split("@");l=b[0];j=b[1]}if(!h||(f&&!g)||c){if(d.showSeparator&&!h){a.push(k.indentCls)}else{a.push(k.indentNoSeparatorCls)}}if(m){a.push(k.indentRightArrowCls)}else{if(f&&(g||c)){a.push(k.indentRightIconCls)}}Ext.applyIf(k.renderData,{hasHref:!!k.href,href:k.href||"#",hrefTarget:k.hrefTarget,icon:k.icon,iconCls:k.iconCls,glyph:l,glyphCls:l?"x-menu-item-glyph":undefined,glyphFontFamily:j,hasIcon:f,hasMenu:m,indent:!h||f||c,isCheckItem:c,rightIcon:g,plain:k.plain,text:k.text,arrowCls:k.arrowCls,baseIconCls:k.baseIconCls,textCls:k.textCls,indentCls:a.join(" "),linkCls:k.linkCls,linkHrefCls:k.linkHrefCls,groupCls:k.group?k.groupCls:"",tabIndex:k.tabIndex})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.tooltip){a.setTooltip(a.tooltip,true)}},setMenu:function(f,d){var c=this,b=c.menu,a=c.arrowEl;if(b){b.ownerCmp=b.parentMenu=null;if(d===true||(d!==false&&c.destroyMenu)){Ext.destroy(b)}}if(f){f=c.menu=Ext.menu.Manager.get(f,{ownerCmp:c});f.ownerCmp=c}else{f=c.menu=null}if(f&&c.rendered&&!c.destroying&&a){a[f?"addCls":"removeCls"](c.arrowCls)}},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIcon:function(b){var a=this.iconEl,c=this.icon;if(a){a.src=b||Ext.BLANK_IMAGE_URL}this.icon=b;this.fireEvent("iconchange",this,c,b)},setIconCls:function(b){var d=this,a=d.iconEl,c=d.iconCls;if(a){if(d.iconCls){a.removeCls(d.iconCls)}if(b){a.addCls(b)}}d.iconCls=b;d.fireEvent("iconchange",d,c,b)},setText:function(d){var c=this,b=c.textEl||c.el,a=c.text;c.text=d;if(c.rendered){b.setHtml(d||"");c.ownerCt.updateLayout()}c.fireEvent("textchange",c,a,d)},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a){b.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.itemEl.id},c));b.tooltip=c}else{b.itemEl.dom.setAttribute(b.getTipAttr(),c)}}else{b.tooltip=c}return b},privates:{getFocusEl:function(){return this.itemEl}}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:false,checkChangeDisabled:false,ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var a=this;a.checked=!!a.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);Ext.menu.Manager.registerCheckable(a);if(a.group){if(a.initialConfig.hideOnClick!==false){a.hideOnClick=true}}},beforeRender:function(){var a=this;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(a.renderData,{checkboxCls:a.checkboxCls,showCheckbox:a.showCheckbox})},afterRender:function(){var a=this;Ext.menu.Item.prototype.afterRender.call(this);a.checked=!a.checked;a.setChecked(!a.checked,true);if(a.checkChangeDisabled){a.disableCheckChange()}},disableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.addCls(b.disabledCls)}if(Ext.isIE8&&b.rendered){b.el.repaint()}b.checkChangeDisabled=true},enableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.removeCls(b.disabledCls)}b.checkChangeDisabled=false},onClick:function(b){var a=this;if(!a.disabled&&!a.checkChangeDisabled&&!(a.checked&&a.group)){a.setChecked(!a.checked)}Ext.menu.Item.prototype.onClick.call(this,b)},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setChecked:function(d,b){var c=this,f=c.checkedCls,g=c.uncheckedCls,a=c.el;if(c.checked!==d&&(b||c.fireEvent("beforecheckchange",c,d)!==false)){if(a){if(d){a.addCls(f);a.removeCls(g)}else{a.addCls(g);a.removeCls(f)}}c.checked=d;Ext.menu.Manager.onCheckChange(c,d);if(!b){Ext.callback(c.checkHandler,c.scope||c,[c,d]);c.fireEvent("checkchange",c,d)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.KeyNav",Ext.util.KeyNav,{constructor:function(a){var b=this;b.menu=a.target;Ext.util.KeyNav.prototype.constructor.call(this,Ext.apply({down:b.down,enter:b.enter,esc:b.escape,left:b.left,right:b.right,space:b.enter,tab:b.tab,up:b.up},a))},down:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==b.DOWN&&a.isWhitelisted(c)){return true}a.focusNextItem(1)},enter:function(b){var c=this.menu,a=c.focusedItem;if(c.activeItem){c.onClick(b)}else{if(a&&a.isFormField){return true}}},escape:function(a){Ext.menu.Manager.hideAll()},focusNextItem:function(b){var a=this.menu,f=a.items,h=a.focusedItem,g=h?f.indexOf(h):-1,j=g+b,d=f.length,c=0,k;while(c<d&&j!==g){if(j<0){j=d-1}else{if(j>=d){j=0}}k=f.getAt(j);if(a.canActivateItem(k)){a.setActiveItem(k);break}j+=b;++c}},isWhitelisted:function(a){return !!a.needArrowKeys},left:function(a){var b=this.menu,c=b.focusedItem;if(c&&this.isWhitelisted(c)){return true}if(b.parentMenu){b.hide();b.parentMenu.focus()}},right:function(c){var d=this.menu,f=d.focusedItem,a=d.activeItem,b;if(f&&this.isWhitelisted(f)){return true}if(a){b=d.activeItem.menu;if(b){a.expandMenu(0);b.setActiveItem(b.child(":focusable"))}}},tab:function(b){var a=this;if(b.shiftKey){a.up(b)}else{a.down(b)}},up:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==b.UP&&a.isWhitelisted(c)){return true}a.focusNextItem(-1)}},1,0,0,0,0,0,[Ext.menu,"KeyNav"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:false,canActivate:false,hideOnClick:false,plain:true,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(a,c){var b=this;Ext.menu.Item.prototype.beforeRender.call(this);b.addCls(b.separatorCls)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));Ext.define("ExtThemeNeptune.menu.Separator",{override:"Ext.menu.Separator",border:true});(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",focusable:true,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var b=this,a=["x-menu"],c=b.bodyCls?[b.bodyCls]:[],d=b.floating!==false;Ext.menu.Manager.register(b);if(b.plain){a.push("x-menu-plain")}b.cls=a.join(" ");c.push("x-menu-body",Ext.dom.Element.unselectableCls);b.bodyCls=c.join(" ");if(d){if(b.minWidth===undefined){b.minWidth=b.defaultMinWidth}}else{b.hidden=!!b.initialConfig.hidden;b.constrain=false}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(b.getLayout(),{configureItem:b.configureItem})},initFloatConstrain:Ext.emptyFn,initHierarchyEvents:Ext.emptyFn,getInherited:function(){var a=Ext.panel.Panel.prototype.getInherited.call(this);a.hidden=this.hidden;return a},beforeRender:function(){Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!this.getSizeModel().width.shrinkWrap){this.layout.align="stretch"}},onBoxReady:function(){var b=this,a={click:b.onClick,mouseover:b.onMouseOver,scope:b},c=b._iconSeparatorCls;if(Ext.supports.Touch){a.pointerdown=b.onMouseOver;b.mon(Ext.GlobalEvents,"mousedown",b.onDocMouseDown,b)}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(b.showSeparator){b.iconSepEl=b.body.insertFirst({role:"presentation",cls:c+" "+c+"-"+b.ui,html:"&#160;"})}b.mon(b.el,a);b.mouseMonitor=b.el.monitorMouseLeave(100,b.onMouseLeave,b);if(b.enableKeyNav){b.keyNav=new Ext.menu.KeyNav({target:b,keyMap:b.getKeyMap()})}},canActivateItem:function(a){return a&&!a.isDisabled()&&a.isVisible()&&(a.canActivate||!a.isMenuItem)},deactivateActiveItem:function(b){var c=this,d=c.activeItem,a=c.focusedItem;if(d){d.deactivate();if(!d.activated){delete c.activeItem}}if(a&&b){a.blur();delete c.focusedItem}},hide:function(){this.deactivateActiveItem(true);Ext.panel.Panel.prototype.hide.apply(this,arguments)},getItemFromEvent:function(d){var a=this,c=a.layout.getRenderTarget().dom,b=d.getTarget();while(b.parentNode!==c){b=b.parentNode;if(!b){return}}return Ext.getCmp(b.id)},lookupComponent:function(b){var a=this;if(typeof b=="string"){b=a.lookupItemFromString(b)}else{if(Ext.isObject(b)){b=a.lookupItemFromObject(b)}}b.minWidth=b.minWidth||a.minWidth;return b},lookupItemFromObject:function(b){var a=this;if(!b.isComponent){if(!b.xtype){b=Ext.create("Ext.menu."+(Ext.isBoolean(b.checked)?"Check":"")+"Item",b)}else{b=Ext.ComponentManager.create(b,b.xtype)}}if(b.isMenuItem){b.parentMenu=a}return b},lookupItemFromString:function(a){return(a=="separator"||a=="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:a})},configureItem:function(c){var b=this.owner,f="x-",d=b.ui,a,g;if(c.isMenuItem){c.setUI(d)}else{if(b.items.getCount()>1&&!c.rendered&&!c.dock){g=b._itemCmpCls;a=[g+" "+g+"-"+d];if(!b.plain&&(c.indent!==false||c.iconCls==="no-icon")){a.push(f+"menu-item-indent-"+d)}if(c.rendered){c.el.addCls(a)}else{c.cls=(c.cls||"")+" "+a.join(" ")}}}this.callParent(arguments)},onClick:function(d){var c=this,a=d.type,b;if(c.disabled){d.stopEvent();return}b=(a!=="keydown")?c.getItemFromEvent(d):c.activeItem;if(b&&b.isMenuItem){if(!b.menu||!c.ignoreParentClicks){b.onClick(d)}else{d.stopEvent()}}if(!b||b.disabled){b=undefined}c.fireEvent("click",c,b,d)},onDestroy:function(){var a=this;Ext.menu.Manager.unregister(a);a.parentMenu=a.ownerCmp=null;if(a.rendered){a.el.un(a.mouseMonitor);Ext.destroy(a.keyNav);a.keyNav=null}Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onDocMouseDown:function(a){if(!this.owns(a.target)){this.deactivateActiveItem()}},onMouseLeave:function(b){var a=this;a.deactivateActiveItem();if(a.disabled){return}a.fireEvent("mouseleave",a,b)},onMouseOver:function(g){var f=this,h=g.getRelatedTarget(),b=!f.el.contains(h),d=f.getItemFromEvent(g),c=f.parentMenu,a=f.ownerCmp;if(b&&c){c.setActiveItem(a);a.cancelDeferHide();c.mouseMonitor.mouseenter()}if(f.disabled){return}if(d&&!d.activated){f.setActiveItem(d);if(d.activated&&d.expandMenu){d.expandMenu()}}if(b){f.fireEvent("mouseenter",f,g)}f.fireEvent("mouseover",f,d,g)},setActiveItem:function(b){var a=this;if(b&&(b!=a.activeItem)){a.deactivateActiveItem();if(a.canActivateItem(b)){if(b.activate){b.activate(true);if(b.activated){a.activeItem=b;a.focusedItem=b}}else{b.focus();a.focusedItem=b}}}},beforeShow:function(){var b=this,a;if(b.floating){b.savedMaxHeight=b.maxHeight;a=b.container.getViewSize().height;b.maxHeight=Math.min(b.maxHeight||a,a)}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var a=this;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);if(a.floating){a.maxHeight=a.savedMaxHeight}},privates:{getFocusEl:function(){return this.el}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],0,[Ext.menu,"Menu"],0));Ext.define("ExtThemeNeptune.menu.Menu",{override:"Ext.menu.Menu",showSeparator:false});(Ext.cmd.derive("Ext.grid.locking.HeaderContainer",Ext.grid.header.Container,{headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(b){var a=this,d=b.lockedGrid,c=b.normalGrid;a.lockable=b;Ext.grid.header.Container.prototype.constructor.call(this);d.visibleColumnManager.rootColumns=c.visibleColumnManager.rootColumns=b.visibleColumnManager=a.visibleColumnManager=new Ext.grid.ColumnManager(true,d.headerCt,c.headerCt);d.columnManager.rootColumns=c.columnManager.rootColumns=b.columnManager=a.columnManager=new Ext.grid.ColumnManager(false,d.headerCt,c.headerCt);a.relayEvents(d.headerCt,a.headerCtRelayEvents);a.relayEvents(c.headerCt,a.headerCtRelayEvents)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var b=this,a=b.lockable.lockedGrid.headerCt.getColumnsState(),c=b.lockable.normalGrid.headerCt.getColumnsState();return a.concat(c)},applyColumnsState:function(h){var p=this,f=p.lockable.lockedGrid,g=f.headerCt,n=p.lockable.normalGrid.headerCt,q=Ext.Array.toValueMap(g.items.items,"headerId"),j=Ext.Array.toValueMap(n.items.items,"headerId"),m=[],o=[],l=1,b=h.length,k,a,d,c;for(k=0;k<b;k++){c=h[k];d=q[c.id];a=d||j[c.id];if(a){if(a.applyColumnState){a.applyColumnState(c)}if(a.locked===undefined){a.locked=!!d}if(a.locked){m.push(a);if(!a.hidden&&typeof a.width=="number"){l+=a.width}}else{o.push(a)}}}if(m.length+o.length==g.items.getCount()+n.items.getCount()){g.removeAll(false);n.removeAll(false);g.add(m);n.add(o);f.setWidth(l)}}},1,0,["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},0,0,[Ext.grid.locking,"HeaderContainer"],0));(Ext.cmd.derive("Ext.grid.locking.View",Ext.Base,{alternateClassName:"Ext.grid.LockingView",isLockingView:true,loadMask:true,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(a){var d=this,c,b;d.ownerGrid=a.ownerGrid;d.navigationModel=new Ext.grid.NavigationModel(d);a.locked.viewConfig.bindStore=a.normal.viewConfig.bindStore=Ext.emptyFn;a.locked.viewConfig.beforeLayout=a.normal.viewConfig.beforeLayout=d.beforeLayout;a.locked.viewConfig.navigationModel=a.normal.viewConfig.navigationModel=d.navigationModel;d.lockedGrid=d.ownerGrid.lockedGrid=Ext.ComponentManager.create(a.locked);d.lockedView=c=d.lockedGrid.getView();if(d.lockedGrid.isTree){d.lockedView.animate=false;a.normal.store=c.store;a.normal.viewConfig.stripeRows=d.lockedView.stripeRows;a.normal.rowLines=d.lockedGrid.rowLines}d.normalGrid=d.ownerGrid.normalGrid=Ext.ComponentManager.create(a.normal);c.lockingPartner=b=d.normalView=d.normalGrid.getView();b.lockingPartner=c;c.isLockedView=b.isNormalView=true;d.loadMask=(a.loadMask!==undefined)?a.loadMask:d.loadMask;d.mixins.observable.constructor.call(d);d.relayEvents(c,Ext.view.Table.events);d.relayEvents(b,Ext.view.Table.events);b.on({scope:d,itemmouseleave:d.onItemMouseLeave,itemmouseenter:d.onItemMouseEnter});c.on({scope:d,itemmouseleave:d.onItemMouseLeave,itemmouseenter:d.onItemMouseEnter});d.ownerGrid.on({render:d.onPanelRender,scope:d});d.loadingText=b.loadingText;d.loadingCls=b.loadingCls;d.loadingUseMsg=b.loadingUseMsg;d.bindStore(b.dataSource,true,"dataSource");d.getSelectionModel().bindStore(d.ownerGrid.store)},beforeLayout:function(){var c=this.ownerCt.ownerLockable.view,b=c.lockedGrid.view,a=c.normalGrid.view;if(!c.relayingOperation){if(c.lockedGrid.isVisible()){if(b.refreshNeeded){b.doFirstRefresh(b.dataSource)}}if(a.refreshNeeded){a.doFirstRefresh(a.dataSource)}}},onPanelRender:function(){var c=this,b=c.loadMask,a={target:c.ownerGrid,msg:c.loadingText,msgCls:c.loadingCls,useMsg:c.loadingUseMsg,store:c.ownerGrid.store};c.el=c.ownerGrid.getTargetEl();c.rendered=true;c.initFocusableEvents();c.fireEvent("render",c);if(b){if(Ext.isObject(b)){a=Ext.apply(a,b)}c.loadMask=new Ext.LoadMask(a)}},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(a){return this.getViewForColumn(a).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getViewForColumn:function(b){var a=this.lockedView,c;a.headerCt.cascade(function(d){if(d===b){c=true;return false}});return c?a:this.normalView},onItemMouseEnter:function(c,b){var g=this,d=g.lockedView,a=g.normalView,f;if(c.trackOver){if(c!==d){a=d}f=a.getNode(b);a.highlightItem(f)}},onItemMouseLeave:function(c,b){var f=this,d=f.lockedView,a=f.normalView;if(c.trackOver){if(c!==d){a=d}a.clearHighlight()}},relayFn:function(c,b){b=b||[];var a=this.lockedView;this.relayingOperation=true;a[c].apply(a,b);a=this.normalView;a[c].apply(a,b);this.relayingOperation=false},getSelectionModel:function(){return this.ownerGrid.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(a,b,d){var c=this;if(!b&&d!=="dataSource"){c.getSelectionModel().bindStore(a)}if(c.normalView.componentLayoutCounter){Ext.suspendLayouts();c.normalView.doFirstRefresh(a);c.lockedView.doFirstRefresh(a);Ext.resumeLayouts(true)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.refresh}},onDataRefresh:function(){this.relayFn("onDataRefresh",arguments)},onReplace:function(){this.relayFn("onReplace",arguments)},onAdd:function(){this.relayFn("onAdd",arguments)},onRemove:function(){this.relayFn("onRemove",arguments)},onUpdate:function(){this.relayFn("onUpdate",arguments)},refresh:function(){this.relayFn("refresh",arguments)},getNode:function(a){return this.normalView.getNode(a)},getRow:function(a){return this.normalView.getRow(a)},getCell:function(b,c){var a=this.getViewForColumn(c),d=a.getRow(b);return Ext.fly(d).down(c.getCellSelector())},indexOf:function(b){var a=this.lockedView.indexOf(b);if(!a){a=this.normalView.indexOf(b)}return a},focus:function(){this.getFocusEl().focus()},focusRow:function(c){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;a.focusRow(c)},focusCell:function(a){a.view.focusCell(a)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(a){return this.ownerGrid.isVisible(a)},getFocusEl:function(){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;return a.getFocusEl()},getCellInclusive:function(d,b){var a=d.column,c=this.lockedGrid.getColumnManager().getColumns().length;if(a>=c){d=Ext.apply({},d);d.column-=c;return this.normalView.getCellInclusive(d,b)}else{return this.lockedView.getCellInclusive(d,b)}},getCellByPosition:function(f,c){var d=this,a=f.view,b=f.column;if(a===d){a=b.getView()}return a.getCellByPosition(f,c)},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!a){a=this.normalView.getRecord(b)}return a},scrollBy:function(){var a=this.normalView;a.scrollBy.apply(a,arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var a=this;a.bindStore(null,false,"dataSource");a.isDestroyed=true;a.clearListeners();Ext.destroy(a.loadMask,a.navigationModel,a.selModel)}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext.grid.locking,"View",Ext.grid,"LockingView"],function(){this.borrow(Ext.Component,["up"]);this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"])}));(Ext.cmd.derive("Ext.grid.locking.Lockable",Ext.Base,{alternateClassName:"Ext.grid.Lockable",supportsOverflowX:"overflow-x" in document.documentElement.style,syncRowHeight:true,headerCounter:0,scrollDelta:40,lockedGridCls:"x-grid-inner-locked",normalGridCls:"x-grid-inner-normal",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["invalidateScrollerOnRefresh","hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer"],normalCfgCopy:["verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(f){var c=this,h,d,b,g,a;if(c.subGridXType){h=c.subGridXType}else{if(!f){return"gridpanel"}d=this.getXTypes().split("/");b=d.length;g=d[b-1];a=d[b-2];if(a!=="tablepanel"){h=a}else{h=g}}return h},injectLockable:function(){this.focusable=false;this.lockable=true;this.hasView=true;var t=this,f=Ext.getScrollbarSize().height,c=t.store=Ext.StoreManager.lookup(t.store),j=t.getSelectionModel(),l,m,r,h,n,b,d,q,g,u,k,s=t.viewConfig,a=s&&s.loadMask,o=(a!==undefined)?a:t.loadMask,p=t.findPlugin("bufferedrenderer");l=t.constructLockableFeatures();t.features=null;m=t.constructLockablePlugins();t.plugins=m.topPlugins;r=Ext.apply({id:t.id+"-locked",isLocked:true,ownerGrid:t,ownerLockable:t,xtype:t.determineXTypeToCreate(true),store:c,bufferedRenderer:t.bufferedRenderer,scrollerOwner:false,animate:false,scroll:f?false:"vertical",selModel:j,border:false,cls:t.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||t.normalGrid.floatedFromCollapse},features:l.lockedFeatures,plugins:m.lockedPlugins},t.lockedGridConfig);h=Ext.apply({id:t.id+"-normal",isLocked:false,ownerGrid:t,ownerLockable:t,xtype:t.determineXTypeToCreate(),store:c,bufferedRenderer:t.bufferedRenderer,scrollerOwner:false,selModel:j,border:false,cls:t.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||t.lockedGrid.floatedFromCollapse},features:l.normalFeatures,plugins:m.normalPlugins},t.normalGridConfig);t.addCls("x-grid-locked");Ext.copyTo(h,t,t.bothCfgCopy,true);Ext.copyTo(r,t,t.bothCfgCopy,true);Ext.copyTo(h,t,t.normalCfgCopy,true);Ext.copyTo(r,t,t.lockedCfgCopy,true);for(n=0;n<t.normalCfgCopy.length;n++){delete t[t.normalCfgCopy[n]]}for(n=0;n<t.lockedCfgCopy.length;n++){delete t[t.lockedCfgCopy[n]]}t.addStateEvents(["lockcolumn","unlockcolumn"]);b=t.processColumns(t.columns,r);r.columns=b.locked;if(!r.columns.items.length){r.hidden=true}h.columns=b.normal;if(!h.columns.items.length){h.hidden=true}h.flex=1;r.viewConfig=t.lockedViewConfig||{};h.viewConfig=t.normalViewConfig||{};r.viewConfig.loadingUseMsg=false;r.viewConfig.loadMask=false;if(f&&!t.supportsOverflowX){r.viewConfig.style="border-bottom:"+f+"px solid #f6f6f6;"+(r.viewConfig.style||"");h.viewConfig.style="border-bottom:"+f+"px solid #f6f6f6;"+(r.viewConfig.style||"")}h.viewConfig.loadMask=false;Ext.applyIf(r.viewConfig,s);Ext.applyIf(h.viewConfig,s);if(!t.initialConfig.layout){t.layout={type:"hbox",align:"stretch"}}t.getLayout();if(t.layout.type==="border"){if(t.split){r.split=true}if(!h.title){r.header=false}if(!r.region){r.region="west"}if(!h.region){h.region="center"}t.addCls("x-grid-locked-split")}if(!(t.layout instanceof Ext.layout.container.Box)){t.split=false}t.view=new Ext.grid.locking.View({loadMask:o,locked:r,normal:h,ownerGrid:t});g=t.lockedGrid.getView();u=t.normalGrid.getView();k=p?{}:{scroll:t.onLockedViewScroll,scope:t};if(f){t.lockedGrid.on({afterlayout:t.afterLockedViewLayout,scope:t});g.getOverflowStyle();if(!g.scrollFlags.y){k.mousewheel={fn:t.onLockedViewMouseWheel,element:"el",scope:t}}}g.on(k);k=p?{}:{scroll:t.onNormalViewScroll,scope:t};u.on(k);d=t.lockedGrid.headerCt;q=t.normalGrid.headerCt;t.headerCt=t.view.headerCt=new Ext.grid.locking.HeaderContainer(t);d.lockedCt=true;d.lockableInjected=true;q.lockableInjected=true;d.on({add:t.delaySyncLockedWidth,remove:t.delaySyncLockedWidth,columnshow:t.delaySyncLockedWidth,columnhide:t.delaySyncLockedWidth,sortchange:t.onLockedHeaderSortChange,columnresize:t.delaySyncLockedWidth,scope:t});q.on({add:t.delaySyncLockedWidth,remove:t.delaySyncLockedWidth,columnshow:t.delaySyncLockedWidth,columnhide:t.delaySyncLockedWidth,sortchange:t.onNormalHeaderSortChange,scope:t});t.modifyHeaderCt();t.items=[t.lockedGrid];if(t.split){t.addCls("x-grid-locked-split");t.items[1]={xtype:"splitter"}}t.items.push(t.normalGrid);t.relayHeaderCtEvents(d);t.relayHeaderCtEvents(q);t.storeRelayers=t.relayEvents(c,["filterchange","groupchange"]);t.gridRelayers=t.relayEvents(t.normalGrid,["viewready"])},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(g,d){var n=this,h,k,f,m=new Ext.grid.header.Container(),l=[],c=[],b={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:l},j={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:c},p={lockedWidth:d.width||0,locked:b,normal:j},o=!(d.width||d.flex),a;if(!n.hasOwnProperty("shrinkWrapLocked")){n.shrinkWrapLocked=o}if(Ext.isObject(g)){Ext.applyIf(b,g);Ext.applyIf(j,g);a=Ext.apply({},g);delete a.items;Ext.apply(m,a);g=g.items}for(h=0,k=g.length;h<k;++h){f=g[h];if(!f.isComponent){f=m.lookupComponent(m.applyDefaults(f))}f.processed=true;if(f.locked||f.autoLock){if(o&&!f.hidden){p.lockedWidth+=n.getColumnWidth(f)||m.defaultWidth}l.push(f)}else{c.push(f)}if(!f.headerId){f.headerId=(f.initialConfig||f).id||("h"+(++n.headerCounter))}}n.fireEvent("processcolumns",n,l,c);m.destroy();if(o){d.width=(p.lockedWidth+=Ext.num(n.getSelectionModel().headerWidth,0)+(l.length?1:0))}return p},getColumnWidth:function(f){var b=f.width||0,d,a,c;if(!b&&f.isGroupHeader){d=f.items.items;a=d.length;for(c=0;c<a;c++){b+=this.getColumnWidth(d[c])}}return b},afterLockedViewLayout:function(){var g=this,f=g.lockedGrid.getView(),d=g.normalGrid.getView(),a=f.el,b=d.el,h=Ext.getScrollbarSize().height,c=(f.scrollFlags.x&&g.lockedGrid.headerCt.tooNarrow?h:0),j=(d.scrollFlags.x&&g.normalGrid.headerCt.tooNarrow?h:0);if(c!==j){if(c){if(g.supportsOverflowX){b.dom.style.overflowX="scroll";f.getOverflowEl().setStyle(f.getOverflowStyle())}else{b.dom.style.borderBottomWidth=c+"px";a.dom.style.borderBottomWidth="0px"}}else{if(g.supportsOverflowX){a.dom.style.overflowX="scroll";d.getOverflowEl().setStyle(d.getOverflowStyle())}else{a.dom.style.borderBottomWidth=j+"px";b.dom.style.borderBottomWidth="0px"}}}else{if(g.supportsOverflowX){f.getOverflowEl().dom.style.overflowX=j?"scroll":"";d.getOverflowEl().setStyle(d.getOverflowStyle())}else{b.dom.style.borderBottomWidth=a.dom.style.borderBottomWidth="0px"}}},onLockedViewMouseWheel:function(j){var d=this,a=-d.scrollDelta*j.getWheelDeltas().y,c=d.lockedGrid.getView(),f=c.el.dom,h,b,g;if(!d.ignoreMousewheel){if(f){h=c.getScrollY();b=h!==f.scrollHeight-f.clientHeight;g=h!==0}if((a<0&&g)||(a>0&&b)){j.stopEvent();h+=a;c.setScrollY(h);d.normalGrid.getView().setScrollY(h);d.onNormalViewScroll()}}},onLockedViewScroll:function(){var g=this,f=g.lockedGrid.getView(),d=g.normalGrid.getView(),c=f.getScrollY(),h=d.getScrollY(),a,b;if(h!==c){d.setScrollY(c);if(d.bufferedRenderer){b=f.body.dom;a=d.body.dom;a.style.position="absolute";a.style.top=b.style.top}}},onNormalViewScroll:function(){var d=this,c=d.lockedGrid.getView(),b=d.normalGrid.getView(),a=c.getScrollY(),g=b.getScrollY(),f;if(g!==a){c.setScrollY(g);if(b.bufferedRenderer){f=c.body;if(f.dom){f.dom.style.position="absolute";f.translate(null,b.bufferedRenderer.bodyTop)}}}},syncRowHeights:function(){if(!this.isDestroyed){var g=this,a,f=g.lockedGrid.getView(),b=g.normalGrid.getView(),h=f.all.slice(),d=b.all.slice(),c=h.length,j;if(d.length===c){for(a=0;a<c;a++){b.syncRowHeights(h[a],d[a])}j=b.getScrollY();b.setScrollY(j);f.setScrollY(j)}}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(a.lockedGrid.headerCt.getMenuItems,true);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(a.normalGrid.headerCt.getMenuItems,false);a.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.lockedGrid.headerCt.showMenuBy,a.showMenuBy);a.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.normalGrid.headerCt.showMenuBy,a.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(b,g){var f=this.getMenu(),c=f.down("#unlockItem"),d=f.down("#lockItem"),a=c.prev();if(g.lockable===false){a.hide();c.hide();d.hide()}else{a.show();c.show();d.show();if(!c.initialConfig.disabled){c.setDisabled(g.lockable===false)}if(!d.initialConfig.disabled){d.setDisabled(!g.isLockable())}}},getMenuItems:function(g,c){var h=this,j=h.unlockText,a=h.lockText,k="x-hmenu-unlock",b="x-hmenu-lock",f=h.onUnlockMenuClick.bind(h),d=h.onLockMenuClick.bind(h);return function(){var l=g.call(this);l.push("-",{itemId:"unlockItem",iconCls:k,text:j,handler:f,disabled:!c});l.push({itemId:"lockItem",iconCls:b,text:a,handler:d,disabled:c});return l}},delaySyncLockedWidth:function(){var b=this,a=b.syncLockedWidthTask;if(!a){a=b.syncLockedWidthTask=new Ext.util.DelayedTask(b.syncLockedWidth,b)}a.delay(1)},syncLockedWidth:function(){var g=this,c=g.lockedGrid,f=c.view,d=f.el.dom,j=g.normalGrid,h=c.headerCt.getVisibleGridColumns().length,a=j.headerCt.getVisibleGridColumns().length,b=g.syncLockedWidthTask;if(b){b.cancel()}Ext.suspendLayouts();if(a){j.show();if(h){if(g.shrinkWrapLocked&&!c.headerCt.forceFit){delete c.flex;c.setWidth(c.headerCt.getTableWidth()+c.el.getBorderWidth("lr"))}c.addCls(g.lockedGridCls);c.show();if(g.split){g.child("splitter").show()}}else{c.getView().clearViewEl(true);c.hide();if(g.split){g.child("splitter").hide()}}f.el.setStyle(f.getOverflowStyle());g.ignoreMousewheel=f.scrollFlags.y}else{j.hide();d.style.borderBottomWidth="0";c.flex=1;delete c.width;c.removeCls(g.lockedGridCls);c.show();f.el.setStyle(j.view.getOverflowStyle());g.ignoreMousewheel=true}Ext.resumeLayouts(true);return[h,a]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(f,l,d){var h=this,g=h.normalGrid,b=h.lockedGrid,c=g.view,m=b.view,k=g.headerCt,j,a;f=f||k.getMenu().activeHeader;d=d||b.headerCt;a=f.ownerCt;if(!f.isLockable()){return}if(f.flex){f.width=f.getWidth();f.flex=null}Ext.suspendLayouts();c.blockRefresh=m.blockRefresh=true;a.remove(f,false);f.locked=true;h.ignoreAddLockedColumn=true;if(Ext.isDefined(l)){d.insert(l,f)}else{d.add(f)}h.ignoreAddLockedColumn=false;c.blockRefresh=m.blockRefresh=false;j=h.syncLockedWidth();if(j[0]){b.getView().refreshView()}if(j[1]){g.getView().refreshView()}Ext.resumeLayouts(true);h.fireEvent("lockcolumn",h,f)},unlock:function(d,k,c){var g=this,f=g.normalGrid,a=g.lockedGrid,b=f.view,l=a.view,j=a.headerCt,h;if(!Ext.isDefined(k)){k=0}d=d||j.getMenu().activeHeader;c=c||f.headerCt;Ext.suspendLayouts();b.blockRefresh=l.blockRefresh=true;d.ownerCt.remove(d,false);d.locked=false;c.insert(k,d);b.blockRefresh=l.blockRefresh=false;h=g.syncLockedWidth();if(h[0]){a.getView().refreshView()}if(h[1]){f.getView().refreshView()}Ext.resumeLayouts(true);g.fireEvent("unlockcolumn",g,d)},reconfigureLockable:function(b,c){var d=this,h=d.store,g=d.lockedGrid,f=d.normalGrid,a;Ext.suspendLayouts();if(c){g.reconfiguring=f.reconfiguring=true;g.headerCt.removeAll();f.headerCt.removeAll();c=d.processColumns(c,g);d.ignoreAddLockedColumn=true;g.headerCt.add(c.locked.items);d.ignoreAddLockedColumn=false;f.headerCt.add(c.normal.items);g.reconfiguring=f.reconfiguring=false;d.syncLockedWidth()}if(b&&b!==h){b=Ext.data.StoreManager.lookup(b);d.store=b;g.bindStore(b);a=g.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}f.bindStore(b);a=f.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}d.view.store=b;d.view.bindStore(b,false,"dataSource")}else{g.getView().refreshView();f.getView().refreshView()}Ext.resumeLayouts(true)},constructLockableFeatures:function(){var f=this.features,c,d,g,h,b=0,a;if(f){if(!Ext.isArray(f)){f=[f]}g=[];h=[];a=f.length;for(;b<a;b++){c=f[b];if(!c.isFeature){c=Ext.create("feature."+c.ftype,c)}switch(c.lockableScope){case"locked":g.push(c);break;case"normal":h.push(c);break;default:c.lockableScope="both";g.push(c);h.push(d=c.clone());d.lockingPartner=c;c.lockingPartner=d}}}return{normalFeatures:h,lockedFeatures:g}},constructLockablePlugins:function(){var c=this.plugins,h,b,a,k,l,f,g=0,j,m,d;if(c){if(!Ext.isArray(c)){c=[c]}k=[];l=[];f=[];j=c.length;for(;g<j;g++){h=c[g];if(h.init){m=h.lockableScope}else{d=h.ptype?Ext.ClassManager.getByAlias(("plugin."+h.ptype)):Ext.ClassManager.get(h.xclass);m=d.prototype.lockableScope}switch(m){case"both":l.push(a=h.clonePlugin());f.push(b=h.clonePlugin());a.lockingPartner=b;b.lockingPartner=a;Ext.destroy(h);break;case"locked":l.push(h);break;case"normal":f.push(h);break;default:k.push(h)}}}return{topPlugins:k,normalPlugins:f,lockedPlugins:l}},destroyLockable:function(){var b=this,a=b.syncLockedWidthTask;if(a){a.cancel();b.syncLockedWidthTask=null}Ext.destroy(b.view,b.headerCt)}},0,0,0,0,0,0,[Ext.grid.locking,"Lockable",Ext.grid,"Lockable"],function(){this.borrow(Ext.Component,["constructPlugin"])}));(Ext.cmd.derive("Ext.grid.plugin.BufferedRenderer",Ext.AbstractPlugin,{isBufferedRenderer:true,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:true,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,init:function(c){var d=this,a=c.view,b={scroll:d.onViewScroll,resize:d.onViewResize,refresh:d.onViewRefresh,columnschanged:d.checkVariableRowHeight,scope:d,destroyable:true},f=a.initialConfig;if(c.isTree||(c.ownerLockable&&c.ownerLockable.isTree)){a.blockRefresh=false;if(f&&f.loadMask===undefined){a.loadMask=true}}if(a.positionBody){b.refresh=d.onViewRefresh}d.grid=c;d.view=a;d.isRTL=a.getInherited().rtl;a.bufferedRenderer=d;a.preserveScrollOnRefresh=true;a.animate=false;d.bindStore(a.dataSource);if(a.hasOwnProperty("rowHeight")){d.rowHeight=a.rowHeight}d.position=0;d.gridListeners=c.on("reconfigure",d.onReconfigure,d);d.viewListeners=a.on(b)},checkVariableRowHeight:function(){var b=this,a=b.grid;b.variableRowHeight=b.view.hasVariableRowHeight();if(a.ownerLockable){a.ownerLockable.syncRowHeight=b.variableRowHeight}},bindStore:function(c){var d=this,b=d.view,f=b.dataSource,a=f&&f.isFeatureStore;if(a===c.isFeatureStore){if(d.store){d.unbindStore()}d.storeListeners=c.on({scope:d,groupchange:d.onStoreGroupChange,clear:d.onStoreClear,destroyable:true});d.store=c}if(d.view.componentLayout.layoutCount){delete d.viewSize;if(c.isBufferedStore){c.setViewSize(d.viewSize)}d.onViewResize(d.view,0,d.view.getHeight())}},onReconfigure:function(b,a){if(a&&a!==this.store){this.bindStore(a)}},unbindStore:function(){this.storeListeners.destroy();this.store=null},onStoreClear:function(){var b=this,a=b.view;if(a.rendered&&!b.store.isDestroyed){if(b.scrollTop!==0){b.bodyTop=b.scrollTop=b.position=b.scrollHeight=0;b.view.setScrollY(0)}b.lastScrollDirection=b.scrollOffset=null;if(!a.hasOwnProperty("rowHeight")){delete b.rowHeight}}},onStoreGroupChange:function(a){var b=this;delete b.rowHeight;b.stretchView(b.view,b.getScrollHeight())},onViewRefresh:function(b,c){var f=this,g=b.all,h=f.scrollHeight,a,d;f.checkVariableRowHeight();if(f.variableRowHeight&&!b.componentLayoutCounter){b.on({boxready:f.onViewRefresh,scope:f,single:true});return}if(!b.hasOwnProperty("rowHeight")&&g.getCount()){delete f.rowHeight}d=f.getScrollHeight();if(d!=h){f.stretchView(b,d)}if(f.refreshing){return}if(f.scrollTop!==b.getScrollY()){f.onViewScroll()}else{if(!f.hasOwnProperty("bodyTop")){f.bodyTop=g.startIndex*f.rowHeight;b.setScrollY(f.bodyTop)}f.setBodyTop(f.bodyTop);a=b.getHeight();if(g.getCount()&&a>0){f.onViewResize(b,null,a);if(c&&(g.getCount()!==c.length)){c.length=0;c.push.apply(c,f.store.getRange(g.startIndex,g.endIndex))}}}},onViewResize:function(c,f,a,b,h){var g=this,d;g.tableTopBorderWidth=c.body.getBorderWidth("t");if(!h||a!==h){d=Math.ceil(a/g.rowHeight)+g.trailingBufferZone+g.leadingBufferZone;g.viewSize=g.setViewSize(d);g.viewClientHeight=c.el.dom.clientHeight}},onWrappedColumnWidthChange:function(b,d){var c=this,a=c.view;if(c.store.getCount()&&c.bodyTop){delete c.rowHeight;c.stretchView(a,c.getScrollHeight(true));c.setViewSize(Math.ceil(a.getHeight()/c.rowHeight)+c.trailingBufferZone+c.leadingBufferZone);if(c.viewSize>=c.store.getCount()){c.setBodyTop(0)}else{if(d>b&&c.bodyTop+a.body.dom.offsetHeight-1>c.scrollHeight){c.setBodyTop(Math.max(0,c.scrollHeight-a.body.dom.offsetHeight))}else{if(c.bodyTop>c.scrollTop||c.bodyTop+a.body.dom.offsetHeight<c.scrollTop+a.getHeight(true)){c.setBodyTop(c.scrollTop-c.trailingBufferZone*c.rowHeight)}}}}},stretchView:function(b,a){var f=this,d=f.store.getCount(),c=b.getTargetEl(),g;if(f.scrollTop>a){f.position=f.scrollTop=a-b.body.dom.offsetHeight;f.view.setScrollY(f.scrollTop)}if(f.bodyTop>a){b.body.translate(null,f.bodyTop=f.position)}if(b.touchScroll){if(b.scrollManager){f.refreshScroller(b,a)}else{if(!f.pendingScrollerRefresh){b.on({boxready:function(){f.refreshScroller(b,a);f.pendingScrollerRefresh=false},single:true});f.pendingScrollerRefresh=true}}}if(!Ext.supports.touchScroll||Ext.supports.touchScroll===1){if(!f.stretcher){c=b.getTargetEl();if(b.refreshCounter){b.fixedNodes++}g={style:{width:"1px",height:"1px",marginTop:(a-1)+"px",position:"absolute"}};g.style[f.isRTL?"right":"left"]=0;f.stretcher=c.createChild(g,c.dom.firstChild)}if(f.hasOwnProperty("viewSize")&&d<=f.viewSize){f.stretcher.dom.style.display="none"}else{f.stretcher.dom.style.marginTop=(a-1)+"px";f.stretcher.dom.style.display=""}}},refreshScroller:function(b,a){b.scrollManager.scroller.setSize({x:b.headerCt.getTableWidth(),y:a});b.scrollManager.refresh()},setViewSize:function(n){var m=this,q=m.store,o=m.view,r=o.all,c=r.getCount(),a,d,k=m.view.lockingPartner&&m.view.lockingPartner.bufferedRenderer,p=c-n,g,f,b,h,l;if(p){m.scrollTop=m.view.getScrollY();m.viewSize=n;if(q.isBufferedStore){q.setViewSize(n)}if(c){l=q.getCount();a=r.startIndex;d=Math.min(a+n-1,l-1);if(!(a===r.startIndex&&d===r.endIndex)){if(k){k.disable()}if(p<0){if(l>c){q.getRange(r.endIndex+1,d,{callback:function(j,s){h=o.doAdd(j,s);o.fireEvent("itemadd",j,s,h)}})}}else{a=r.endIndex-(p-1);d=r.endIndex;r.removeRange(a,d,true);if(o.hasListeners.itemremove){b=q.getRange(a,d);for(g=d,f=b.length-1;f>=0;--g,--f){o.fireEvent("itemremove",b[f],g,m)}}}if(k){k.enable()}}}}return n},getViewRange:function(){var b=this,c=b.view.all,a=b.store,d=0;if(c.getCount()){d=c.startIndex}else{if(a.isBufferedStore){if(!a.currentPage){a.currentPage=1}d=c.startIndex=(a.currentPage-1)*(a.pageSize||1);a.currentPage=1}}if(a.data.getCount()){return a.getRange(d,d+b.viewSize-1)}else{return[]}},onReplace:function(j,k,b,d){var g=this,h=g.view,l=h.all,a=l.getCount(),f=j.getCount(),c=l.first(true);if(!a||k<=g.getLastVisibleRowIndex()+g.leadingBufferZone||(a<g.viewSize&&d.length>b.length)||f<a){g.refreshView();a=l.getCount();if(d.length<b.length){if(l.endIndex===f-1&&a<g.viewSize&&a<f){l.scroll(j.getRange(Math.max(0,f-g.viewSize),l.startIndex-1),-1,0);if(f>g.viewSize){g.setBodyTop(g.bodyTop-c.offsetTop)}}if(f<=g.viewSize){if(g.stretcher){g.setBodyTop(0);g.stretcher.dom.style.display="none"}}else{if(g.bodyTop+h.body.dom.offsetHeight-1>g.scrollHeight){g.setBodyTop(g.scrollHeight-(h.body.dom.offsetHeight-1))}}}}else{g.refreshing=true;g.onViewRefresh(h);g.refreshing=false}},scrollTo:function(m,d,q,s){var j=this,l=j.view,r=l.el.dom,n=j.store,k=n.getCount(),h,b,g,a,p,c,o,f;if((c=l.dataSource.groupingFeature)&&(c.collapsible!==false)){m=Math.min(Math.max(m,0),l.store.getCount()-1);f=l.store.getAt(m);o=c.getGroup(f);if(o.isCollapsed){c.expand(o.getGroupKey());k=n.getCount()}m=c.indexOf(f)}else{m=Math.min(Math.max(m,0),k-1)}h=Math.max(Math.min(m-(Math.floor((j.leadingBufferZone+j.trailingBufferZone)/2)),k-j.viewSize+1),0);p=Math.max(h*j.rowHeight-j.tableTopBorderWidth,0);b=Math.min(h+j.viewSize-1,k-1);n.getRange(h,b,{callback:function(u,v,t){j.renderRange(v,t,true);g=n.data.getRange(m,m+1)[0];a=l.getNode(g);l.body.translate(null,j.bodyTop=p);j.position=j.scrollTop=p=Math.min(Math.max(0,p-l.body.getOffsetsTo(a)[1]),r.scrollHeight-r.clientHeight);l.setScrollY(p);if(Ext.isIE){l.setScrollY(p)}if(d){l.selModel.select(g)}if(q){q.call(s||j,m,g)}}})},onViewScroll:function(){var g=this,c=g.store,a=(c.getCount()),f,j,h=g.scrollTop=g.view.getScrollY(),b=false,d=g.view.lockingPartner&&g.view.lockingPartner.bufferedRenderer;if(!(g.disabled||a<g.viewSize)){f=h-g.position;j=f>0?1:-1;if(Math.abs(f)>=20||(j!==g.lastScrollDirection)){g.lastScrollDirection=j;b=g.handleViewScroll(g.lastScrollDirection)}}if(!b){if(d&&d.scrollTop!==h){d.view.setScrollY(d.position=h)}}},handleViewScroll:function(h){var f=this,g=f.view.all,a=f.store,j=f.viewSize,c=(a.getCount())-1,d,b;if(h===-1){if(g.startIndex){if(f.topOfViewCloseToEdge()){d=Math.max(0,f.getLastVisibleRowIndex()+f.trailingBufferZone-j)}}}else{if(g.endIndex<c){if(f.bottomOfViewCloseToEdge()){d=Math.max(0,f.getFirstVisibleRowIndex()-f.trailingBufferZone)}}}if(d!=null){b=Math.min(d+j-1,c);if(f.variableRowHeight&&b===g.endIndex&&b<c){b++;f.viewSize=j++;if(a.isBufferedStore){a.setViewSize(f.viewSize)}}if(d!==g.startIndex||b!==g.endIndex){f.renderRange(d,b);return true}}},bottomOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop+a.view.body.dom.offsetHeight<a.scrollTop+a.view.lastBox.height+(a.numFromEdge*a.rowHeight)}else{return(a.view.all.endIndex-a.getLastVisibleRowIndex())<a.numFromEdge}},topOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop>a.scrollTop-(a.numFromEdge*a.rowHeight)}else{return(a.getFirstVisibleRowIndex()-a.view.all.startIndex)<a.numFromEdge}},refreshView:function(h){var d=this,g=d.view.all,a=d.store,b=(a.getCount())-1,f,c=d.view.grid.containsFocus;h=Math.max(0,Math.min(h==null?g.startIndex:h,b-(d.viewSize-d.leadingBufferZone)+1));f=Math.min(Math.max(g.startIndex+d.viewSize-1,d.getLastVisibleRowIndex()+d.leadingBufferZone),b);if(f-h+1>d.viewSize){h=f-d.viewSize+1}a.getRange(h,f,{callback:d.doRefreshView,scope:d,containedFocus:c})},doRefreshView:function(h,l,g,n){var j=this,k=j.view,c=k.getNavigationModel(),m=k.all,b=m.getCount(),f,a=l!==m.startIndex,d;if(k.refreshCounter){k.refreshing=j.refreshing=true;k.clearViewEl(true);if(h.length){f=k.doAdd(h,l);k.refreshSize(m.getCount()!==b);if(a){if(l>m.startIndex){d+=m.item(l,true).offsetTop}else{if(j.variableRowHeight){d=j.scrollTop-j.rowHeight*(j.scrollTop<j.position?j.leadingBufferZone:j.trailingBufferZone)}else{d=l*j.rowHeight-j.tableTopBorderWidth}}j.setBodyTop(d)}k.fireEvent("refresh",k,h)}if(n.containedFocus){c.setPosition(c.getLastFocused(),null,null,null,true)}k.headerCt.setSortState();k.refreshNeeded=k.refreshing=j.refreshing=false}else{k.refresh()}},renderRange:function(g,a,f){var c=this,d=c.view.all,b=c.store;if(!(g===d.startIndex&&a===d.endIndex)){if(b.rangeCached(g,a)){c.cancelLoad();if(c.synchronousRender||f){c.onRangeFetched(null,g,a)}else{if(!c.renderTask){c.renderTask=new Ext.util.DelayedTask(c.onRangeFetched,c,null,false)}c.renderTask.delay(1,null,null,[null,g,a])}}else{c.attemptLoad(g,a)}}},onRangeFetched:function(l,d,c,b,m){var t=this,k=t.view,a,j=k.all,f,s=0,p,g,h=t.view.lockingPartner&&t.view.lockingPartner.bufferedRenderer,q,r,o,n=t.variableRowHeight;if(k.isDestroyed){return}if(l){t.scrollTop=t.view.getScrollY()}else{l=t.store.getRange(d,c);if(!l){return}}if(n){p=t.scrollTop-t.rowHeight*(t.scrollTop<t.position?t.leadingBufferZone:t.trailingBufferZone)}else{p=d*t.rowHeight-t.tableTopBorderWidth}if(d<j.startIndex&&c>j.endIndex){r=j.startIndex-d;k.clearViewEl(true);q=k.doAdd(l,d);k.fireEvent("itemadd",l,d,q);for(o=0;o<r;o++){s-=q[o].offsetHeight}t.setBodyTop(t.bodyTop+s);return}if(t.teleported||d>j.endIndex||c<j.startIndex){k.clearViewEl(true);g=p;t.teleported=false}if(!j.getCount()){q=k.doAdd(l,d);k.fireEvent("itemadd",l,d,q)}else{if(c>j.endIndex){f=Math.max(d-j.startIndex,0);if(n){s=j.item(j.startIndex+f,true).offsetTop}j.scroll(Ext.Array.slice(l,j.endIndex+1-d),1,f,d,c);if(n){g=t.bodyTop+s}else{g=p}}else{f=Math.max(j.endIndex-c,0);a=j.startIndex;j.scroll(Ext.Array.slice(l,0,j.startIndex-d),-1,f,d,c);if(n){g=t.bodyTop-j.item(a,true).offsetTop;if(!j.startIndex){if(g){k.setScrollY(t.position=(t.scrollTop-=g));g=0}}else{if(g<0){s=j.startIndex*t.rowHeight;k.setScrollY(t.position=(t.scrollTop+=s));g=t.bodyTop+s}}}else{g=p}}}t.position=t.scrollTop;g=Math.max(Math.floor(g),0);if(k.positionBody){t.setBodyTop(g)}if(h&&!h.disabled&&!m){h.onRangeFetched(null,d,c,b,true);if(h.bodyTop!==g){h.setBodyTop(g)}if(h.scrollTop!==t.scrollTop){h.view.setScrollY(h.scrollTop=h.position=t.scrollTop)}}},setBodyTop:function(d){var f=this,b=f.view,c=f.store,a=b.body;a.translate((f.isRTL&&Ext.supports.xOriginBug&&b.scrollFlags.y)?Ext.getScrollbarSize().width:null,f.bodyTop=d);if(f.variableRowHeight){if(b.all.endIndex===(c.getCount())-1){f.stretchView(b,f.bodyTop+a.dom.offsetHeight-1)}else{if(f.bodyTop+a.dom.offsetHeight-1>f.scrollHeight){f.stretchView(b,f.scrollHeight+=((c.getCount())-b.all.endIndex)*f.rowHeight)}}}},getFirstVisibleRowIndex:function(l,c,b,g){var h=this,j=h.view,n=j.all,a=n.elements,d=h.viewClientHeight,f,m,k=h.bodyTop;if(n.getCount()&&h.variableRowHeight){if(!arguments.length){l=n.startIndex;c=n.endIndex;b=h.scrollTop;g=b+d;if(k>g||k+j.body.dom.offsetHeight<b){h.teleported=true;return Math.floor(h.scrollTop/h.rowHeight)}f=l+Math.min(h.numFromEdge+((h.lastScrollDirection===-1)?h.leadingBufferZone:h.trailingBufferZone),Math.floor((c-l)/2))}else{f=l+Math.floor((c-l)/2)}m=k+a[f].offsetTop;if(m+a[f].offsetHeight<b){return h.getFirstVisibleRowIndex(f+1,c,b,g)}if(m<=b){return f}else{if(f!==l){return h.getFirstVisibleRowIndex(l,f-1,b,g)}}}return Math.floor(h.scrollTop/h.rowHeight)},getLastVisibleRowIndex:function(m,c,b,g){var j=this,k=j.view,o=k.all,a=o.elements,d=j.viewClientHeight,f,n,h,l=j.bodyTop;if(o.getCount()&&j.variableRowHeight){if(!arguments.length){m=o.startIndex;c=o.endIndex;b=j.scrollTop;g=b+d;if(l>g||l+k.body.dom.offsetHeight<b){j.teleported=true;return Math.floor(j.scrollTop/j.rowHeight)+Math.ceil(d/j.rowHeight)}f=c-Math.min(j.numFromEdge+((j.lastScrollDirection===1)?j.leadingBufferZone:j.trailingBufferZone),Math.floor((c-m)/2))}else{f=m+Math.floor((c-m)/2)}n=l+a[f].offsetTop;if(n>g){return j.getLastVisibleRowIndex(m,f-1,b,g)}h=n+a[f].offsetHeight;if(h>=g){return f}else{if(f!==c){return j.getLastVisibleRowIndex(f+1,c,b,g)}}}return j.getFirstVisibleRowIndex()+Math.ceil(d/j.rowHeight)},getScrollHeight:function(g){var h=this,a=h.view,j=a.all,c=h.store,d=c.getCount(),b,f;if(!d){return 0}if(!h.hasOwnProperty("rowHeight")){if(b=j.getCount()){h.rowHeight=h.variableRowHeight?Math.floor(a.body.dom.clientHeight/b):j.first(true).offsetHeight}}f=Math.floor(d*h.rowHeight);if(!g){if(f&&(j.endIndex===d-1)){f=Math.max(f,h.bodyTop+a.body.dom.offsetHeight-1)}}return h.scrollHeight=f},attemptLoad:function(c,a){var b=this;if(b.scrollToLoadBuffer){if(!b.loadTask){b.loadTask=new Ext.util.DelayedTask(b.doAttemptLoad,b,[])}b.loadTask.delay(b.scrollToLoadBuffer,b.doAttemptLoad,b,[c,a])}else{b.store.getRange(c,a,{callback:b.onRangeFetched,scope:b,fireEvent:false})}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(b,a){this.store.getRange(b,a,{callback:this.onRangeFetched,scope:this,fireEvent:false})},destroy:function(){var b=this,a=b.view;if(a&&a.el){a.un("scroll",b.onViewScroll,b)}Ext.destroy(b.viewListeners,b.storeListeners,b.gridListeners)}},0,0,0,0,["plugin.bufferedrenderer"],0,[Ext.grid.plugin,"BufferedRenderer"],function(a){if(Ext.supports.Touch){a.prototype.leadingBufferZone=a.prototype.trailingBufferZone=2;a.prototype.numFromEdge=1}}));(Ext.cmd.derive("Ext.layout.ClassList",Ext.Base,(function(){var b=Ext.String.splitWords,a=Ext.Array.toMap;return{dirty:false,constructor:function(c){this.owner=c;this.map=a(this.classes=b(c.el.className))},add:function(c){var d=this;if(!d.map[c]){d.map[c]=true;d.classes.push(c);if(!d.dirty){d.dirty=true;d.owner.markDirty()}}},addMany:function(c){Ext.each(b(c),this.add,this)},contains:function(c){return this.map[c]},flush:function(){this.owner.el.className=this.classes.join(" ");this.dirty=false},remove:function(c){var d=this;if(d.map[c]){delete d.map[c];d.classes=Ext.Array.filter(d.classes,function(f){return f!=c});if(!d.dirty){d.dirty=true;d.owner.markDirty()}}},removeMany:function(d){var f=this,c=a(b(d));f.classes=Ext.Array.filter(f.classes,function(g){if(!c[g]){return true}delete f.map[g];if(!f.dirty){f.dirty=true;f.owner.markDirty()}return false})}}}()),1,0,0,0,0,0,[Ext.layout,"ClassList"],0));(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(c){var b=this,a=b.getKey(c);if(!b.map[a]){++b.length;b.items.push(c);b.map[a]=c}return c},clear:function(){var b=this,a=b.items;b.items=[];b.map={};b.length=0;return a},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(f){var d=this,c=d.getKey(f),a=d.items,b;if(d.map[c]){b=Ext.Array.indexOf(a,f);Ext.Array.erase(a,b,1);delete d.map[c];--d.length}return f}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(s){var t=this,q=Ext.layout.SizeModel.sizeModels,l=q.configured,k=q.shrinkWrap,b,r,o,n,g,d,u,f,p,m,c,j,h,a;Ext.apply(t,s);b=t.el;t.id=b.id;t.flushedProps={};t.props=g={};t.styles={};u=t.target;if(!u.isComponent){r=b.lastBox}else{t.wrapsComponent=true;t.framing=u.frameSize||null;t.isComponentChild=u.ownerLayout&&u.ownerLayout.isComponentLayout;r=u.lastBox;o=u.ownerCt;if(o&&(n=o.el&&t.context.items[o.el.id])){t.ownerCtContext=n}t.sizeModel=d=u.getSizeModel(n&&n.widthModel.pairsByHeightOrdinal[n.heightModel.ordinal]);t.widthModel=j=d.width;t.heightModel=h=d.height;if(r&&r.invalid===false){m=(u.width===(f=r.width));c=(u.height===(p=r.height));if(j===k&&h===k){a=true}else{if(j===l&&m){a=h===k||(h===l&&c)}}if(a){t.optOut=true;g.width=f;g.height=p}}}t.lastBox=r},init:function(j,c){var t=this,a=t.props,d=t.dirty,l=t.ownerCtContext,p=t.target.ownerLayout,h=!t.state,u=j||h,f,o,m,q,b,v,w=t.heightModel,g=t.widthModel,k,r,s=0;t.dirty=t.invalid=false;t.props={};t.remainingChildDimensions=0;if(t.boxChildren){t.boxChildren.length=0}if(!h){t.clearAllBlocks("blocks");t.clearAllBlocks("domBlocks")}if(!t.wrapsComponent){return u}v=t.target;t.state={};if(h){if(v.beforeLayout&&v.beforeLayout!==Ext.emptyFn){v.beforeLayout()}if(!l&&(q=v.ownerCt)){l=t.context.items[q.el.id]}if(l){t.ownerCtContext=l;t.isBoxParent=p&&p.isItemBoxParent(t)}else{t.isTopLevel=true}t.frameBodyContext=t.getEl("frameBody")}else{l=t.ownerCtContext;t.isTopLevel=!l;f=t.children;for(o=0,m=f.length;o<m;++o){f[o].init(true)}}t.hasRawContent=!(v.isContainer&&v.items.items.length>0);if(j){t.widthModel=t.heightModel=null;b=v.getSizeModel(l&&l.widthModel.pairsByHeightOrdinal[l.heightModel.ordinal]);if(h){t.sizeModel=b}t.widthModel=b.width;t.heightModel=b.height;if(l&&!t.isComponentChild){if(p.needsItemSize||!v.liquidLayout){l.remainingChildDimensions+=2}else{if(t.widthModel.calculated){++l.remainingChildDimensions}if(t.heightModel.calculated){++l.remainingChildDimensions}}}}else{if(a){t.recoverProp("x",a,d);t.recoverProp("y",a,d);if(t.widthModel.calculated){t.recoverProp("width",a,d)}else{if("width" in a){++s}}if(t.heightModel.calculated){t.recoverProp("height",a,d)}else{if("height" in a){++s}}if(l&&!t.isComponentChild){l.remainingChildDimensions+=s}}}if(a&&p&&p.manageMargins){t.recoverProp("margin-top",a,d);t.recoverProp("margin-right",a,d);t.recoverProp("margin-bottom",a,d);t.recoverProp("margin-left",a,d)}if(c){k=c.heightModel;r=c.widthModel;if(r&&k&&g&&w){if(g.shrinkWrap&&w.shrinkWrap){if(r.constrainedMax&&k.constrainedMin){k=null}}}if(r){t.widthModel=r}if(k){t.heightModel=k}if(c.state){Ext.apply(t.state,c.state)}}return u},initContinue:function(f){var h=this,d=h.ownerCtContext,a=h.target,c=h.widthModel,g=a.getInherited(),b;if(c.fixed){g.inShrinkWrapTable=false}else{delete g.inShrinkWrapTable}if(f){if(d&&c.shrinkWrap){b=d.isBoxParent?d:d.boxParent;if(b){b.addBoxChild(h)}}else{if(c.natural){h.boxParent=d}}}return f},initDone:function(d){var b=this,a=b.props,c=b.state;if(b.remainingChildDimensions===0){a.containerChildrenSizeDone=true}if(d){a.containerLayoutDone=true}if(b.boxChildren&&b.boxChildren.length&&b.widthModel.shrinkWrap){b.el.setWidth(10000);c.blocks=(c.blocks||0)+1}},initAnimation:function(){var b=this,c=b.target,a=b.ownerCtContext;if(a&&a.isTopLevel){b.animatePolicy=c.ownerLayout.getAnimatePolicy(b)}else{if(!a&&c.isCollapsingOrExpanding&&c.animCollapse){b.animatePolicy=c.componentLayout.getAnimatePolicy(b)}}if(b.animatePolicy){b.context.queueAnimation(b)}},addCls:function(a){this.getClassList().addMany(a)},removeCls:function(a){this.getClassList().removeMany(a)},addBlock:function(b,d,f){var c=this,g=c[b]||(c[b]={}),a=g[f]||(g[f]={});if(!a[d.id]){a[d.id]=d;++d.blockCount;++c.context.blockCount}},addBoxChild:function(d){var c=this,b,a=d.widthModel;d.boxParent=this;d.measuresBox=a.shrinkWrap?d.hasRawContent:a.natural;if(d.measuresBox){b=c.boxChildren;if(b){b.push(d)}else{c.boxChildren=[d]}}},addPositionStyles:function(d,b){var a=b.x,f=b.y,c=0;if(a!==undefined){d.left=a+"px";++c}if(f!==undefined){d.top=f+"px";++c}return c},addTrigger:function(g,h){var f=this,a=h?"domTriggers":"triggers",j=f[a]||(f[a]={}),b=f.context,d=b.currentLayout,c=j[g]||(j[g]={});if(!c[d.id]){c[d.id]=d;++d.triggerCount;c=b.triggers[h?"dom":"data"];(c[d.id]||(c[d.id]=[])).push({item:this,prop:g});if(f.props[g]!==undefined){if(!h||!(f.dirty&&(g in f.dirty))){++d.firedTriggers}}}},boxChildMeasured:function(){var b=this,c=b.state,a=(c.boxesMeasured=(c.boxesMeasured||0)+1);if(a==b.boxChildren.length){c.clearBoxWidth=1;++b.context.progressCount;b.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(a){var b=a.getStyles(a.borderNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},marginInfo:function(a){var b=a.getStyles(a.marginNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},paddingInfo:function(b){var a=b.frameBodyContext||b,c=a.getStyles(b.paddingNames,b.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(a){var c=this[a],b;if(c){for(b in c){this.clearBlocks(a,b)}}},clearBlocks:function(c,g){var h=this[c],b=h&&h[g],d,f,a;if(b){delete h[g];d=this.context;for(a in b){f=b[a];--d.blockCount;if(!--f.blockCount&&!f.pending&&!f.done){d.queueLayout(f)}}}},block:function(a,b){this.addBlock("blocks",a,b)},domBlock:function(a,b){this.addBlock("domBlocks",a,b)},fireTriggers:function(b,g){var h=this[b],d=h&&h[g],c=this.context,f,a;if(d){for(a in d){f=d[a];++f.firedTriggers;if(!f.done&&!f.blockCount&&!f.pending){c.queueLayout(f)}}}},flush:function(){var b=this,a=b.dirty,c=b.state,d=b.el;b.dirtyCount=0;if(b.classList&&b.classList.dirty){b.classList.flush()}if("attributes" in b){d.set(b.attributes);delete b.attributes}if("innerHTML" in b){d.innerHTML=b.innerHTML;delete b.innerHTML}if(c&&c.clearBoxWidth){c.clearBoxWidth=0;b.el.setStyle("width",null);if(!--c.blocks){b.context.queueItemLayouts(b)}}if(a){delete b.dirty;b.writeProps(a,true)}},flushAnimations:function(){var p=this,c=p.previousSize,m,o,f,h,g,d,k,n,l,a,b;if(c){m=p.target;o=m.getAnimationProps();f=o.duration;h=Ext.Object.getKeys(p.animatePolicy);g=Ext.apply({},{from:{},to:{},duration:f||Ext.fx.Anim.prototype.duration},o);for(d=0,k=0,n=h.length;k<n;k++){l=h[k];a=c[l];b=p.peek(l);if(a!=b){l=p.translateProps[l]||l;g.from[l]=a;g.to[l]=b;++d}}if(d){if(p.isCollapsingOrExpanding===1){m.componentLayout.undoLayout(p)}else{p.writeProps(g.from)}p.el.animate(g);Ext.fx.Manager.getFxQueue(p.el.id)[0].on({afteranimate:function(){if(p.isCollapsingOrExpanding===1){m.componentLayout.redoLayout(p);m.afterCollapse(true)}else{if(p.isCollapsingOrExpanding===2){m.afterExpand(true)}}}})}}},getBorderInfo:function(){var a=this,b=a.borderInfo;if(!b){a.borderInfo=b=a.checkCache("borderInfo")}return b},getClassList:function(){return this.classList||(this.classList=new Ext.layout.ClassList(this))},getEl:function(c,a){var f=this,g,d,b;if(c){if(c.dom){d=c}else{g=f.target;if(a){g=a}d=g[c];if(typeof d=="function"){d=d.call(g);if(d===f.el){return this}}}if(d){b=f.context.getEl(f,d)}}return b||null},getFrameInfo:function(){var c=this,d=c.frameInfo,b,a;if(!d){b=c.framing;a=c.getBorderInfo();c.frameInfo=d=b?{top:b.top+a.top,right:b.right+a.right,bottom:b.bottom+a.bottom,left:b.left+a.left,width:b.width+a.width,height:b.height+a.height}:a}return d},getMarginInfo:function(){var d=this,h=d.marginInfo,b,a,g,f,c;if(!h){if(!d.wrapsComponent){h=d.checkCache("marginInfo")}else{b=d.target;f=b.ownerLayout;c=f?f.id:null;a=f&&f.manageMargins;h=b.margin$;if(h&&h.ownerId!==c){h=null}if(!h){h=d.parseMargins(b,b.margin)||d.checkCache("marginInfo");if(a){d.setProp("margin-top",0);d.setProp("margin-right",0);d.setProp("margin-bottom",0);d.setProp("margin-left",0)}h.ownerId=c;b.margin$=h}h.width=h.left+h.right;h.height=h.top+h.bottom}d.marginInfo=h}return h},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var a=this,b=a.paddingInfo;if(!b){a.paddingInfo=b=a.checkCache("paddingInfo")}return b},getProp:function(c){var b=this,a=b.props[c];b.addTrigger(c);return a},getDomProp:function(c){var b=this,a=(b.dirty&&(c in b.dirty))?undefined:b.props[c];b.addTrigger(c,true);return a},getStyle:function(a){var c=this,b=c.styles,f,d;if(a in b){d=b[a]}else{f=c.styleInfo[a];d=c.el.getStyle(a);if(f&&f.parseInt){d=parseInt(d,10)||0}b[a]=d}return d},getStyles:function(p,b){var m=this,f=m.styles,q={},g=0,d=p.length,k,j,l,a,c,h,r,o;b=b||p;for(k=0;k<d;++k){a=p[k];if(a in f){q[b[k]]=f[a];++g;if(k&&g==1){j=p.slice(0,k);l=b.slice(0,k)}}else{if(g){(j||(j=[])).push(a);(l||(l=[])).push(b[k])}}}if(g<d){j=j||p;l=l||b;h=m.styleInfo;r=m.el.getStyle(j);for(k=j.length;k--;){a=j[k];c=h[a];o=r[a];if(c&&c.parseInt){o=parseInt(o,10)||0}q[l[k]]=o;f[a]=o}}return q},hasProp:function(a){return this.getProp(a)!=null},hasDomProp:function(a){return this.getDomProp(a)!=null},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){if(++this.dirtyCount==1){this.context.queueFlush(this)}},onBoxMeasured:function(){var a=this.boxParent,b=this.state;if(a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox){b.boxMeasured=1;a.boxChildMeasured()}},parseMargins:function(a,d){if(d===true){d=5}var c=typeof d,b;if(c=="string"||c=="number"){b=a.parseBox(d)}else{if(d){b={top:0,right:0,bottom:0,left:0};if(d){d=Ext.apply(b,a.parseBox(d))}}}return b},peek:function(a){return this.props[a]},recoverProp:function(g,b,a){var f=this,d=f.props,c;if(g in b){d[g]=b[g];if(a&&g in a){c=f.dirty||(f.dirty={});c[g]=a[g]}}},redo:function(b){var f=this,c,a,d;f.revertProps(f.props);if(b&&f.wrapsComponent){if(f.childItems){for(d=0,c=f.childItems,a=c.length;d<a;d++){c[d].redo(b)}}for(d=0,c=f.children,a=c.length;d<a;d++){c[d].redo()}}},removeEl:function(b,a){var d=this,f,c;if(b){if(b.dom){c=b}else{f=d.target;if(a){f=a}c=f[b];if(typeof c=="function"){c=c.call(f);if(c===d.el){return this}}}if(c){d.context.removeEl(d,c)}}},revertProps:function(d){var a,b=this.flushedProps,c={};for(a in d){if(b.hasOwnProperty(a)){c[a]=d[a]}}this.writeProps(c)},setAttribute:function(a,c){var b=this;if(!b.attributes){b.attributes={}}b.attributes[a]=c;b.markDirty()},setBox:function(b){var a=this;if("left" in b){a.setProp("x",b.left)}if("top" in b){a.setProp("y",b.top)}a.setSize(b.width,b.height)},setContentHeight:function(a,b){if(!b&&this.hasRawContent){return 1}return this.setProp("contentHeight",a)},setContentWidth:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp("contentWidth",b)},setContentSize:function(c,a,b){return this.setContentWidth(c,b)+this.setContentHeight(a,b)==2},setProp:function(d,c,a){var b=this,g=typeof c,f;if(g=="undefined"||(g==="number"&&isNaN(c))){return 0}if(b.props[d]===c){return 1}b.props[d]=c;++b.context.progressCount;if(a===false){b.fireTriggers("domTriggers",d);b.clearBlocks("domBlocks",d)}else{f=b.styleInfo[d];if(f){if(!b.dirty){b.dirty={}}b.dirty[d]=c;b.markDirty()}}b.fireTriggers("triggers",d);b.clearBlocks("blocks",d);return 1},setHeight:function(l,a){var g=this,d=g.target,c=g.ownerCtContext,h,f,b,k,j;if(l<0){l=0}if(!g.wrapsComponent){if(!g.setProp("height",l,a)){return NaN}}else{b=g.collapsedVert?0:(d.minHeight||0);l=Ext.Number.constrain(l,b,d.maxHeight);k=g.props.height;if(!g.setProp("height",l,a)){return NaN}if(c&&!g.isComponentChild&&isNaN(k)){j=--c.remainingChildDimensions;if(!j){c.setProp("containerChildrenSizeDone",true)}}h=g.frameBodyContext;if(h){f=g.getFrameInfo();h[g.el.vertical?"setWidth":"setHeight"](l-f.height,a)}}return l},setWidth:function(b,a){var j=this,g=j.target,f=j.ownerCtContext,k,h,d,c,l;if(b<0){b=0}if(!j.wrapsComponent){if(!j.setProp("width",b,a)){return NaN}}else{d=j.collapsedHorz?0:(g.minWidth||0);b=Ext.Number.constrain(b,d,g.maxWidth);c=j.props.width;if(!j.setProp("width",b,a)){return NaN}if(f&&!j.isComponentChild&&isNaN(c)){l=--f.remainingChildDimensions;if(!l){f.setProp("containerChildrenSizeDone",true)}}k=j.frameBodyContext;if(k){h=j.getFrameInfo();k.setWidth(b-h.width,a)}}return b},setSize:function(c,a,b){this.setWidth(c,b);this.setHeight(a,b)},translateProps:{x:"left",y:"top"},undo:function(b){var f=this,c,a,d;f.revertProps(f.lastBox);if(b&&f.wrapsComponent){if(f.childItems){for(d=0,c=f.childItems,a=c.length;d<a;d++){c[d].undo(b)}}for(d=0,c=f.children,a=c.length;d<a;d++){c[d].undo()}}},unsetProp:function(b){var a=this.dirty;delete this.props[b];if(a){delete a[b]}},writeProps:function(f,d){if(!(f&&typeof f=="object")){return}var t=this,c=t.el,j={},g=0,b=t.styleInfo,s,k,n,p=f.width,l=f.height,u=t.target,h,a,o,q,r,m;if("displayed" in f){c.setDisplayed(f.displayed)}for(k in f){if(d){t.fireTriggers("domTriggers",k);t.clearBlocks("domBlocks",k);t.flushedProps[k]=1}s=b[k];if(s&&s.dom){if(s.suffix&&(n=parseInt(f[k],10))){j[k]=n+s.suffix}else{j[k]=f[k]}++g}}if("x" in f||"y" in f){if(u.isComponent){u.setPosition(f.x,f.y)}else{g+=t.addPositionStyles(j,f)}}if(t.wrapsComponent&&Ext.isIE9){if((h=p!==undefined&&t.hasOverflowY)||(a=l!==undefined&&t.hasOverflowX)){o=t.isAbsolute;if(o===undefined){o=false;m=t.target.getTargetEl();r=m.getStyle("position");t.isAbsolute=(r==="absolute")}if(o){q=Ext.getScrollbarSize();if(h){p=parseInt(p,10)+q.width;j.width=p+"px";++g}if(a){l=parseInt(l,10)+q.height;j.height=l+"px";++g}}}}if(g){c.setStyle(j)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var c={dom:true,parseInt:true,suffix:"px"},b={dom:true},a={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:a,containerLayoutDone:a,displayed:a,done:a,x:a,y:a,columnWidthsDone:a,left:c,top:c,right:c,bottom:c,width:c,height:c,"border-top-width":c,"border-right-width":c,"border-bottom-width":c,"border-left-width":c,"margin-top":c,"margin-right":c,"margin-bottom":c,"margin-left":c,"padding-top":c,"padding-right":c,"padding-bottom":c,"padding-left":c,"line-height":b,display:b}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,constructor:function(a){var b=this;Ext.apply(b,a);b.items={};b.layouts={};b.blockCount=0;b.cycleCount=0;b.flushCount=0;b.calcCount=0;b.animateQueue=b.newQueue();b.completionQueue=b.newQueue();b.finalizeQueue=b.newQueue();b.finishQueue=b.newQueue();b.flushQueue=b.newQueue();b.invalidateData={};b.layoutQueue=b.newQueue();b.invalidQueue=[];b.triggers={data:{},dom:{}}},callLayout:function(b,a){this.currentLayout=b;b[a](this.getCmp(b.owner))},cancelComponent:function(j,a,m){var p=this,h=j,l=!j.isComponent,b=l?h.length:1,d,c,o,n,g,s,q,r,t,f;for(d=0;d<b;++d){if(l){j=h[d]}if(m&&j.ownerCt){f=this.items[j.ownerCt.el.id];if(f){Ext.Array.remove(f.childItems,p.getCmp(j))}}if(!a){q=p.invalidQueue;o=q.length;if(o){p.invalidQueue=s=[];for(c=0;c<o;++c){r=q[c];t=r.item.target;if(t!=j&&!t.isDescendantOf(j)){s.push(r)}}}}g=j.componentLayout;p.cancelLayout(g);if(g.getLayoutItems){n=g.getLayoutItems();if(n.length){p.cancelComponent(n,true)}}if(j.isContainer&&!j.collapsed){g=j.layout;p.cancelLayout(g);n=g.getVisibleItems();if(n.length){p.cancelComponent(n,true)}}}},cancelLayout:function(b){var a=this;a.completionQueue.remove(b);a.finalizeQueue.remove(b);a.finishQueue.remove(b);a.layoutQueue.remove(b);if(b.running){a.layoutDone(b)}b.ownerContext=null},clearTriggers:function(g,h){var a=g.id,f=this.triggers[h?"dom":"data"],j=f&&f[a],b=(j&&j.length)||0,d,k,c;for(d=0;d<b;++d){c=j[d];k=c.item;f=h?k.domTriggers:k.triggers;delete f[c.prop][a]}},flush:function(){var d=this,a=d.flushQueue.clear(),c=a.length,b;if(c){++d.flushCount;for(b=0;b<c;++b){a[b].flush()}}},flushAnimations:function(){var d=this,b=d.animateQueue.clear(),a=b.length,c;if(a){for(c=0;c<a;c++){if(b[c].target.animate!==false){b[c].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var h=this,a=h.invalidQueue,g=a&&a.length,b,f,d,c;h.invalidQueue=[];if(g){f=[];for(c=0;c<g;++c){b=(d=a[c]).item.target;if(!b.container.isDetachedBody){f.push(b);if(d.options){h.invalidateData[b.id]=d.options}}}h.invalidate(f,null)}},flushLayouts:function(h,a,c){var g=this,j=c?g[h].items:g[h].clear(),f=j.length,b,d;if(f){for(b=0;b<f;++b){d=j[b];if(!d.running){g.callLayout(d,a)}}g.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(b,a){var c=this.getItem(a,a);if(!c.parent){c.parent=b;if(b.children.length){b.children.push(c)}else{b.children=[c]}}return c},getItem:function(d,b){var f=b.id,a=this.items,c=a[f]||(a[f]=new Ext.layout.ContextItem({context:this,target:d,el:b}));return c},handleFailure:function(){var c=this.layouts,b,a;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(a in c){b=c[a];if(c.hasOwnProperty(a)){b.running=false;b.ownerContext=null}}},invalidate:function(l,n){var p=this,m=!l.isComponent,c,q,a,g,k,r,o,b,h,j,f,d,s;for(g=0,b=m?l.length:1;g<b;++g){k=m?l[g]:l;if(k.rendered&&!k.hidden){q=k.ownerLayout;h=k.componentLayout;a=!h.ownerContext;s=false;if((!q||!q.needsItemSize)&&k.liquidLayout){s=true}if(!s||(q&&q.setsItemSize)){r=p.getCmp(k);j=(k.isContainer&&!k.collapsed)?k.layout:null;f=p.invalidateData[r.id];delete p.invalidateData[r.id];d=r.init(n,f)}if(s){continue}if(f){p.processInvalidate(f,r,"before")}if(h.beforeLayoutCycle){h.beforeLayoutCycle(r)}if(j&&j.beforeLayoutCycle){j.beforeLayoutCycle(r)}d=r.initContinue(d);c=true;if(h.getLayoutItems){h.renderChildren();o=h.getLayoutItems();if(o.length){p.invalidate(o,true)}}if(j){c=false;j.renderChildren();if(j.needsItemSize||j.activeItemCount){o=j.getVisibleItems();if(o.length){p.invalidate(o,true)}}}r.initDone(c);p.resetLayout(h,r,a);if(j){p.resetLayout(j,r,a)}r.initAnimation();if(f){p.processInvalidate(f,r,"after")}}}p.currentLayout=null},layoutDone:function(a){var b=a.ownerContext;a.running=false;if(a.isComponentLayout){if(b.measuresBox){b.onBoxMeasured()}b.setProp("done",true)}else{b.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(b,f,a){if(b[a]){var d=this,c=d.currentLayout;d.currentLayout=b.layout||null;b[a](f,b);d.currentLayout=c}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(a){this.flushQueue.add(a)},chainFns:function(a,j,g){var d=this,c=a.layout,f=j.layout,b=a[g],h=j[g];return function(k){var l=d.currentLayout;if(b){d.currentLayout=c;b.call(a.scope||a,k,a)}d.currentLayout=f;h.call(j.scope||j,k,j);d.currentLayout=l}},purgeInvalidates:function(){var h=this,l=[],j=h.invalidQueue,f=j.length,k,m,d,c,b,g,a;for(k=0;k<f;++k){b=j[k];g=b.item.target;a=true;for(m=l.length;m--;){d=l[m];c=d.item.target;if(g.isDescendant(c)){a=false;break}if(c.isDescendant(g)){Ext.Array.erase(l,m,1)}}if(a){l.push(b)}}h.invalidQueue=l},queueInvalidate:function(l,m){var h=this,k=[],j=h.invalidQueue,g=j.length,d,b,f,a,c;if(l.isComponent){l=h.getCmp(d=l)}else{d=l.target}l.invalid=true;while(g--){b=j[g];f=b.item.target;if(d.isDescendantOf(f)){return}if(f==d){if(!(a=b.options)){b.options=m}else{if(m){if(m.widthModel){a.widthModel=m.widthModel}if(m.heightModel){a.heightModel=m.heightModel}if(!(c=a.state)){a.state=m.state}else{if(m.state){Ext.apply(c,m.state)}}if(m.before){a.before=h.chainFns(a,m,"before")}if(m.after){a.after=h.chainFns(a,m,"after")}}}return}if(!f.isDescendantOf(d)){k.push(b)}}k.push({item:l,options:m});h.invalidQueue=k},queueItemLayouts:function(c){var a=c.isComponent?c:c.target,b=a.componentLayout;if(!b.pending&&!b.invalid&&!b.done){this.queueLayout(b)}b=a.layout;if(b&&!b.pending&&!b.invalid&&!b.done){this.queueLayout(b)}},queueLayout:function(a){this.layoutQueue.add(a);a.pending=true},removeEl:function(d,c){var f=c.id,b=d.children,a=this.items;if(b){Ext.Array.remove(b,a[f])}delete a[f]},resetLayout:function(b,c,d){var a=this;a.currentLayout=b;b.done=false;b.pending=true;b.firedTriggers=0;a.layoutQueue.add(b);if(d){a.layouts[b.id]=b;b.running=true;if(b.finishedLayout){a.finishQueue.add(b)}++a.remainingLayouts;++b.layoutCount;b.ownerContext=c;b.beginCount=0;b.blockCount=0;b.calcCount=0;b.triggerCount=0;if(!b.initialized){b.initLayout()}b.beginLayout(c)}else{++b.beginCount;if(!b.running){++a.remainingLayouts;b.running=true;if(b.isComponentLayout){c.unsetProp("done")}a.completionQueue.remove(b);a.finalizeQueue.remove(b)}}b.beginLayoutCycle(c,d)},run:function(){var c=this,b=false,a=100;c.purgeInvalidates();c.flushInvalidates();c.state=1;c.totalCount=c.layoutQueue.getCount();c.flush();while((c.remainingLayouts||c.invalidQueue.length)&&a--){if(c.invalidQueue.length){c.flushInvalidates()}if(c.runCycle()){b=false}else{if(!b){c.flush();b=true;c.flushLayouts("completionQueue","completeLayout")}else{if(!c.invalidQueue.length){c.state=2;break}}}if(!(c.remainingLayouts||c.invalidQueue.length)){c.flush();c.flushLayouts("completionQueue","completeLayout");c.flushLayouts("finalizeQueue","finalizeLayout")}}return c.runComplete()},runComplete:function(){var a=this;a.state=2;if(a.remainingLayouts){a.handleFailure();return false}a.flush();a.flushLayouts("finishQueue","finishedLayout",true);a.flushLayouts("finishQueue","notifyOwner");a.flush();a.flushAnimations();return true},runCycle:function(){var c=this,d=c.layoutQueue.clear(),b=d.length,a;++c.cycleCount;c.progressCount=0;for(a=0;a<b;++a){c.runLayout(c.currentLayout=d[a])}c.currentLayout=null;return c.progressCount>0},runLayout:function(b){var a=this,c=a.getCmp(b.owner);b.pending=false;if(c.state.blocks){return}b.done=true;++b.calcCount;++a.calcCount;b.calculate(c);if(b.done){a.layoutDone(b);if(b.completeLayout){a.queueCompletion(b)}if(b.finalizeLayout){a.queueFinalize(b)}}else{if(!b.pending&&!b.invalid&&!(b.blockCount+b.triggerCount-b.firedTriggers)){a.queueLayout(b)}}},setItemSize:function(h,g,b){var d=h,a=1,c,f;if(h.isComposite){d=h.elements;a=d.length;h=d[0]}else{if(!h.dom&&!h.el){a=d.length;h=d[0]}}for(f=0;f<a;){c=this.get(h);c.setSize(g,b);h=d[++f]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.component.FieldSet",Ext.layout.component.Body,{type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(a){if(a.target.collapsed){a.heightModel=this.sizeModels.shrinkWrap}},beginLayoutCycle:function(b){var c=b.target,a;Ext.layout.component.Body.prototype.beginLayoutCycle.apply(this,arguments);if(c.collapsed){b.setContentHeight(0);b.restoreMinHeight=c.minHeight;delete c.minHeight;if(b.widthModel.shrinkWrap){a=c.lastComponentSize;b.setContentWidth((a&&a.contentWidth)||this.defaultCollapsedWidth)}}},finishedLayout:function(c){var a=this.owner,b=c.restoreMinHeight;Ext.layout.component.Body.prototype.finishedLayout.apply(this,arguments);if(b){a.minHeight=b}},calculateOwnerHeightFromContentHeight:function(d,c){var a=d.getBorderInfo(),b=d.target.legend;return d.getProp("contentHeight")+d.getPaddingInfo().height+(Ext.isIE8?d.bodyContext.getPaddingInfo().top:0)+(b?b.getHeight():a.top)+a.bottom},publishInnerHeight:function(c,a){var b=c.target.legend;if(b){a-=b.getHeight()}Ext.layout.component.Body.prototype.publishInnerHeight.call(this,c,a)},getLayoutItems:function(){var a=this.owner.legend;return a?[a]:[]}},0,0,0,0,["layout.fieldset"],0,[Ext.layout.component,"FieldSet"],0));(Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:true,typeName:"ptype",create:function(b,f,d){var a,c;if(b.init){a=b}else{if(d){b=Ext.apply({},b);b.cmp=d}else{d=b.cmp}if(b.xclass){a=Ext.create(b)}else{c="plugin."+(b.ptype||f);a=Ext.ClassManager.instantiateByAlias(c,b)}}if(a&&d&&a.setCmp&&!a.setCmpCalled){a.setCmp(d);a.setCmpCalled=true}return a}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var z=this,a=z.splitter,o=a.collapseTarget,d=a.defaultSplitMin,h=a.vertical?"Width":"Height",c="min"+h,v="max"+h,j="get"+h,u=a.neighbors,f=u.length,n=o.el.getBox(),g=n.x,p=n.y,y=n.right,k=n.bottom,r=a.vertical?(y-g):(k-p),x,l,s,m,w,t,q,b;m=(o[c]||Math.min(r,d))-r;w=o[v];if(!w){w=1000000000}else{w-=r}b=r;for(x=0;x<f;++x){l=u[x];r=l[j]();s=l[v];if(s===null){s=undefined}t=r-s;q=r-(l[c]||Math.min(r,d));if(!isNaN(t)){if(m<t){m=t}}if(w>q){w=q}}if(w-m<2){return null}n=new Ext.util.Region(p,y,k,g);z.constraintAdjusters[z.getCollapseDirection()](n,m,w,a);z.dragInfo={minRange:m,maxRange:w,targetSize:b};return n},constraintAdjusters:{left:function(c,a,b,d){c[0]=c.x=c.left=c.right+a;c.right+=b+d.getWidth()},top:function(c,a,b,d){c[1]=c.y=c.top=c.bottom+a;c.bottom+=b+d.getHeight()},bottom:function(c,a,b,d){c.bottom=c.top-a;c.top-=b+d.getHeight()},right:function(c,a,b,d){c.right=c.left-a;c[0]=c.x=c.left=c.x-b+d.getWidth()}},onBeforeStart:function(j){var f=this,g=f.splitter,d=g.collapseTarget,b=g.neighbors,c=b.length,a,h;if(d.collapsed){return false}for(a=0;a<c;++a){h=b[a];if(h.collapsed&&h.isHorz===d.isHorz){return false}}if(!(f.constrainTo=f.calculateConstrainRegion())){return false}return true},performResize:function(j,h){var k=this,b=k.splitter,g=b.getCollapseDirection(),a=b.collapseTarget,f=k.splitAdjusters[b.vertical?"horz":"vert"],l=h[f.index],d=k.dragInfo,c;if(g=="right"||g=="bottom"){l=-l}l=Math.min(Math.max(d.minRange,l),d.maxRange);if(l){(c=b.ownerCt).suspendLayouts();f.adjustTarget(a,d.targetSize,l);c.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(b,a,c){b.flex=null;b.setSize(a+c)}},vert:{index:1,adjustTarget:function(b,a,c){b.flex=null;b.setSize(undefined,a+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(b){var d=this,c,a,f;if(!b.el){if(b.target.isComponent){d.el=b.target.getEl()}else{d.el=b.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(d.preserveRatio&&d.minWidth&&d.minHeight){c=d.minWidth/d.el.getWidth();a=d.minHeight/d.el.getHeight();if(a>c){d.minWidth=d.el.getWidth()*a}else{d.minHeight=d.el.getHeight()*c}}if(d.throttle){f=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)},d.throttle);d.resize=function(h,j,g){if(g){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)}else{f.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(!a.dynamic&&!a.proxy){a.proxy=a.createProxy(a.target||a.el);a.hideProxy=true}if(a.proxy){a.proxy.show();return a.proxy}},createProxy:function(c){var b,a=this.proxyCls;if(c.isComponent){b=c.getProxy().addCls(a)}else{b=c.createProxy({tag:"div",role:"presentation",cls:a,id:c.id+"-rzproxy"},Ext.getBody())}b.removeCls("x-proxy-el");return b},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(q,m){var r=this,c=r.activeResizeHandle.region,f=r.getOffset(r.constrainTo?"dragTarget":null),k=r.startBox,g,o=0,s=0,j,p,a=0,u=0,t,h,b,d,n,l;c=r.convertRegionName(c);switch(c){case"south":s=f[1];b=2;break;case"north":s=-f[1];u=-s;b=2;break;case"east":o=f[0];b=1;break;case"west":o=-f[0];a=-o;b=1;break;case"northeast":s=-f[1];u=-s;o=f[0];h=[k.x,k.y+k.height];b=3;break;case"southeast":s=f[1];o=f[0];h=[k.x,k.y];b=3;break;case"southwest":o=-f[0];a=-o;s=f[1];h=[k.x+k.width,k.y];b=3;break;case"northwest":s=-f[1];u=-s;o=-f[0];a=-o;h=[k.x+k.width,k.y+k.height];b=3;break}d={width:k.width+o,height:k.height+s,x:k.x+a,y:k.y+u};j=Ext.Number.snap(d.width,r.widthIncrement);p=Ext.Number.snap(d.height,r.heightIncrement);if(j!=d.width||p!=d.height){switch(c){case"northeast":d.y-=p-d.height;break;case"north":d.y-=p-d.height;break;case"southwest":d.x-=j-d.width;break;case"west":d.x-=j-d.width;break;case"northwest":d.x-=j-d.width;d.y-=p-d.height}d.width=j;d.height=p}if(d.width<r.minWidth||d.width>r.maxWidth){d.width=Ext.Number.constrain(d.width,r.minWidth,r.maxWidth);if(a){d.x=k.x+(k.width-d.width)}}else{r.lastX=d.x}if(d.height<r.minHeight||d.height>r.maxHeight){d.height=Ext.Number.constrain(d.height,r.minHeight,r.maxHeight);if(u){d.y=k.y+(k.height-d.height)}}else{r.lastY=d.y}if(r.preserveRatio||q.shiftKey){g=r.startBox.width/r.startBox.height;n=Math.min(Math.max(r.minHeight,d.width/g),r.maxHeight);l=Math.min(Math.max(r.minWidth,d.height*g),r.maxWidth);if(b==1){d.height=n}else{if(b==2){d.width=l}else{t=Math.abs(h[0]-this.lastXY[0])/Math.abs(h[1]-this.lastXY[1]);if(t>g){d.height=n}else{d.width=l}if(c=="northeast"){d.y=k.y-(d.height-k.height)}else{if(c=="northwest"){d.y=k.y-(d.height-k.height);d.x=k.x-(d.width-k.width)}else{if(c=="southwest"){d.x=k.x-(d.width-k.width)}}}}}}r.setPosition=d.x!==r.startBox.x||d.y!==r.startBox.y;r.resize(d,m)},resize:function(d,a){var c=this,f,b=c.setPosition;if(c.dynamic||(!c.dynamic&&a)){if(b){c.target.setBox(d)}else{c.target.setSize(d.width,d.height)}}if(!a){f=c.getProxy();if(f&&f!==c.target){if(b||c.hideProxy){f.setBox(d)}else{f.setSize(d.width,d.height)}}}},onEnd:function(a){this.updateDimensions(a,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(a){return a}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(b){var l=this,q=l.handles,k=Ext.dom.Element.unselectableCls,o=[],p,c,n,s,h,f,m,a,g,d,r,j;if(Ext.isString(b)||Ext.isElement(b)||b.dom){p=b;b=arguments[1]||{};b.target=p}l.mixins.observable.constructor.call(l,b);p=l.target;if(p){if(p.isComponent){p.addClsWithUI("resizable");if(p.minWidth){l.minWidth=p.minWidth}if(p.minHeight){l.minHeight=p.minHeight}if(p.maxWidth){l.maxWidth=p.maxWidth}if(p.maxHeight){l.maxHeight=p.maxHeight}if(p.floating){if(!l.hasOwnProperty("handles")){l.handles="n ne e se s sw w nw"}}l.el=p.getEl()}else{p=l.el=l.target=Ext.get(p)}}else{p=l.target=l.el=Ext.get(l.el)}l.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(l.width)){l.width=Ext.Number.constrain(l.width,l.minWidth,l.maxWidth)}if(Ext.isNumber(l.height)){l.height=Ext.Number.constrain(l.height,l.minHeight,l.maxHeight)}if(l.width!==null||l.height!==null){l.target.setSize(l.width,l.height)}s=l.el.dom.tagName.toUpperCase();if(s==="TEXTAREA"||s==="IMG"||s==="TABLE"){l.originalTarget=l.target;d=p.isComponent?p.getEl():p;l.el.addCls(l.wrappedCls);l.target=l.el=l.el.wrap({role:"presentation",cls:l.wrapCls,id:l.el.id+"-rzwrap",style:d.getStyle(["margin-top","margin-bottom"])});r=d.getPositioning();l.el.setPositioning(r);d.clearPositioning();g=d.getBox();if(r.position!="absolute"){g.x=0;g.y=0}l.el.setBox(g);d.setStyle("position","absolute");l.isTargetWrapped=true}l.el.position();if(l.pinned){l.el.addCls(l.pinnedCls)}l.resizeTracker=new Ext.resizer.ResizeTracker({disabled:l.disabled,target:p,el:l.el,constrainTo:l.constrainTo,handleCls:l.handleCls,overCls:l.overCls,throttle:l.throttle,proxy:l.originalTarget?l.el:null,dynamic:l.originalTarget?true:l.dynamic,originalTarget:l.originalTarget,delegate:"."+l.handleCls,preserveRatio:l.preserveRatio,heightIncrement:l.heightIncrement,widthIncrement:l.widthIncrement,minHeight:l.minHeight,maxHeight:l.maxHeight,minWidth:l.minWidth,maxWidth:l.maxWidth});l.resizeTracker.on({mousedown:l.onBeforeResize,drag:l.onResize,dragend:l.onResizeEnd,scope:l});if(l.handles=="all"){l.handles="n s e w ne nw se sw"}q=l.handles=l.handles.split(l.delimiterRe);n=l.possiblePositions;h=q.length;c=l.handleCls+" "+l.handleCls+"-{0}";if(l.target.isComponent){j=l.target.baseCls;c+=" "+j+"-handle "+j+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){c+=" "+j+"-handle-{0}-br"}}for(f=0;f<h;f++){if(q[f]&&n[q[f]]){m=n[q[f]];o.push('<div id="',l.el.id,"-",m,'-handle" class="',Ext.String.format(c,m)," ",k,'" unselectable="on" role="presentation"',"></div>")}}Ext.DomHelper.append(l.el,o.join(""));o.length=0;for(f=0;f<h;f++){if(q[f]&&n[q[f]]){m=n[q[f]];a=l[m]=l.el.getById(l.el.id+"-"+m+"-handle");o.push(a);a.region=m;if(l.transparent){a.setOpacity(0)}}}l.resizeTracker.handleEls=o},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){return this.fireResizeEvent("beforeresize",a,b)},onResize:function(a,b){return this.fireResizeEvent("resizedrag",a,b)},onResizeEnd:function(a,b){return this.fireResizeEvent("resize",a,b)},fireResizeEvent:function(a,d,f){var c=this,b;if(c.hasListeners[a]){b=c.el.getBox();return c.fireEvent(a,c,b.width,b.height,f)}},resizeTo:function(b,a){var c=this;c.target.setSize(b,a);c.fireEvent("resize",c,b,a,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var f=this,d,c=f.handles,a=c.length,b=f.possiblePositions,g;f.resizeTracker.destroy();if(f.isTargetWrapped){f.target.destroy()}for(d=0;d<a;d++){if((g=f[b[c[d]]])){g.destroy()}}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.scroll.Indicator",Ext.Base,{config:{axis:null,containerEl:null,scroller:null,minLength:null,scrollSize:null,maxScrollPosition:null,hasOpposite:null},hideAnimConfig:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",clientSize:"clientWidth",setLength:"setWidth",setPosition:"setLocalX"},y:{side:"t",getSize:"getWidth",clientSize:"clientHeight",setLength:"setHeight",setPosition:"setLocalY"}},cls:"x-scroll-indicator",constructor:function(b){var f=this,a,c,d;f.initConfig(b);d=f.getAxis();f.names=f.names[d];f.el=f.getContainerEl().createChild({cls:f.cls+" "+f.cls+"-"+d});if(!f.size){f.cacheStyles()}a=f.getMinLength();c=f.size;if(!a||a<c){f.setMinLength(c)}},cacheStyles:function(){var d=this,c=d.self.prototype,b=d.el,a=d.getAxis(),f=d.names;c.size=b[f.getSize]();c.margin=b.getMargin(f.side)},hide:function(){this.el.animate(this.hideAnimConfig)},refreshLength:function(){var j=this,h=j.names,b=j.getScrollSize(),a=j.getContainerEl().dom[h.clientSize],g=a/b,k=j.getHasOpposite(),d=j.margin*2,f=k?(d+j.size):d,c=Math.max(Math.round((a-f)*g),j.getMinLength());j.sizeAdjust=f;j.length=c;j.el[h.setLength](c)},setValue:function(n){var l=this,c=l.el,j=l.names,h=l.getMaxScrollPosition(),a=l.getContainerEl().dom[j.clientSize],k=l.length,d=l.getMinLength(),b=k,g=a-k-l.sizeAdjust,o=Math.round,m=Math.max,f;if(n<0){b=o(m(k+(k*n/a),d));f=0}else{if(n>h){b=o(m(k-(k*(n-h)/a),d));f=g+k-b}else{f=o(n/h*g)}}c[j.setPosition](f);c[j.setLength](b)},show:function(){var b=this,a=b.el,c=a.getActiveAnimation();if(c){c.end()}b.refreshLength();a.setStyle("opacity","")},destroy:function(){this.el.destroy()}},1,0,0,0,0,0,[Ext.scroll,"Indicator"],0));(Ext.cmd.derive("Ext.scroll.Manager",Ext.util.Observable,{minIndicatorLength:24,refreshCounter:0,translationMethods:{1:"scrollparent",2:"csstransform"},constructor:function(b){var c=this,a={dragend:"onDragEnd",dragcancel:"onDragEnd",scope:c},d;if(Ext.supports.touchScroll===2){a.mousewheel="onMouseWheel";a.scroll={fn:"onElementScroll",delegated:false,scope:c}}Ext.util.Observable.prototype.constructor.apply(this,arguments);c.scroller=new Ext.scroll.Scroller({autoRefresh:false,element:c.el,direction:c.direction,momentumEasing:{bounce:{springTension:1}},outOfBoundRestrictFactor:0,translatable:{translationMethod:c.translationMethods[Ext.supports.touchScroll]},listeners:{scrollstart:"onScrollStart",scroll:"onScroll",scrollend:"onScrollEnd",scope:c}});Ext.GlobalEvents.on("idle",c.doRefresh,c);d=c.containerEl=c.el.parent();c.owner.mon(d,a);c.initIndicators()},onElementScroll:function(a,b){b.scrollTop=b.scrollLeft=0},destroy:function(){var a=this;a.clearListeners();Ext.GlobalEvents.un("idle",a.doRefresh,a);a.scroller.destroy()},initIndicators:function(){var c=this,d=c.containerEl,a=c.scroller,b=c.minIndicatorLength;if(Ext.supports.touchScroll===2){c.xIndicator=new Ext.scroll.Indicator({axis:"x",scroller:a,containerEl:d,minLength:b});c.yIndicator=new Ext.scroll.Indicator({axis:"y",scroller:a,containerEl:d,minLength:b});c.refreshIndicators()}},invokeIndicators:function(f,d,b){var g=this,a=g.xIndicator,c=g.yIndicator;if(a&&g.isAxisEnabled("x")){a[f].apply(a,d)}if(c&&g.isAxisEnabled("y")){c[f].apply(c,b||d)}},getPosition:function(){return this.scroller.getPosition()},refresh:function(a){++this.refreshCounter;if(a){this.doRefresh()}},refreshIndicators:function(){var c=this,a=c.scroller,d=a.getMaxPosition(),b=a.getSize();c.invokeIndicators("setMaxScrollPosition",[d.x],[d.y]);c.invokeIndicators("setScrollSize",[b.x],[b.y]);c.invokeIndicators("setHasOpposite",[c.isAxisEnabled("y")],[c.isAxisEnabled("x")])},doRefresh:function(){var b=this,a=b.scroller;if(b.refreshCounter){a.refresh();b.refreshIndicators();b.refreshCounter=0}},onScrollStart:function(){this.isTouching=Ext.isScrolling=true;this.invokeIndicators("show");this.toggleOthers(true)},onScroll:function(b,a,d){var c=this;c.invokeIndicators("setValue",[a],[d]);c.fireEvent("scroll",c,a,d)},onScrollEnd:function(){var a=this;Ext.isScrolling=false;if(a.isTouching){return}a.invokeIndicators("hide")},onDragEnd:function(){this.isTouching=false;this.toggleOthers(false)},onMouseWheel:function(l){var m=this,h=m.scroller,o=l.getWheelDeltas(),d=-o.x,b=-o.y,g=h.getPosition(),f=h.getMaxPosition(),a=h.getMinPosition(),n=Math.max,c=Math.min,k=n(c(g.x+d,f.x),a.x),j=n(c(g.y+b,f.y),a.y);d=k-g.x;b=j-g.y;if(!d&&!b){return}l.stopEvent();m.onScrollStart();m.scrollBy(d,b);m.onScroll(h,k,j);m.onScrollEnd(h)},isAxisEnabled:function(a){return this.scroller.isAxisEnabled(a)},setScrollX:function(b){var a=this.scroller;a.scrollTo(b,a.getPosition().y)},setScrollY:function(b){var a=this.scroller;a.scrollTo(a.getPosition().x,b)},scrollTo:function(a,c,b){this.scroller.scrollTo(a,c,b)},scrollBy:function(a,c,b){if(a.length){b=c;c=a[1];a=a[0]}else{if(!Ext.isNumber(a)){b=c;c=a.y;a=a.x}}this.scroller.scrollBy(a,c,b)},scrollIntoView:function(d,f,b){var m=this,l=m.containerEl,k=m.scroller,h=k.getPosition(),g=h.x,c=h.y,j=Ext.fly(d).getScrollIntoViewXY(l,g,c),a=j.x,n=j.y;if(f===false){a=g}if(a!==g||n!==c){k.scrollTo(a,n,b)}},toggleOthers:function(b){var c=Ext.scroll.Scroller.instances,a,d;for(d in c){a=c[d];if(a!==this.scroller){a.setDisabled(b)}}},preventDefault:function(a){if(a.touches.length===1){a.preventDefault()}}},1,0,0,0,0,0,[Ext.scroll,"Manager"],0));(Ext.cmd.derive("Ext.selection.CellModel",Ext.selection.DataViewModel,{isCellModel:true,enableKeyNav:true,preventWrap:false,bindComponent:function(a){var c=this,b=a.grid||a.ownerCt;Ext.selection.DataViewModel.prototype.bindComponent.call(this,a);if(b.optimizedColumnMove!==false){b.on("columnmove",c.onColumnMove,c)}},getViewListeners:function(){var a=this;return{refresh:a.onViewRefresh,scope:a}},getHeaderCt:function(){var b=this.navigationModel.getPosition(),a=b?b.view:this.primaryView;return a.headerCt},onNavigate:function(a){if(!a.record){return}this.setPosition(a.position)},selectWithEvent:function(a,b){this.select(a)},select:function(h,f,b){var d=this,g,c=d.getPosition(),a=d.view.store;if(h||h===0){if(h.isModel){g=a.indexOf(h);if(g!==-1){h={row:g,column:c?c.column:0}}else{h=null}}else{if(typeof h==="number"){h={row:h,column:0}}}}if(h){d.selectByPosition(h,b)}else{d.deselect()}},getCurrentPosition:function(){var a=this.selecting?this.nextSelection:this.selection;return a?{view:a.view,record:a.record,row:a.rowIdx,columnHeader:a.column,column:a.view.getColumnManager().indexOf(a.column)}:a},getPosition:function(){return this.selecting?this.nextSelection:this.selection},setCurrentPosition:function(c,a,b){if(c&&!c.isCellContext){c=new Ext.grid.CellContext(this.view).setPosition({row:c.row,column:typeof c.column==="number"?this.view.getColumnManager().getColumns()[c.column]:c.column})}return this.setPosition(c,a,b)},setPosition:function(f,a,d){var c=this,b=c.selection;if(f){f=f.isCellContext?f.clone():new Ext.grid.CellContext(c.view).setPosition(f)}if(!d&&b){if(f&&(f.record===b.record&&f.column===b.column&&f.view===b.view)){f=null}else{c.onCellDeselect(c.selection,a)}}if(f){c.nextSelection=f;c.selecting=true;c.onCellSelect(c.nextSelection,a);c.selecting=false;return(c.selection=f)}},isCellSelected:function(a,f,c){var d=this,b,g=d.getPosition();if(g&&g.view===a){b=new Ext.grid.CellContext(a).setPosition({row:f,column:typeof c==="number"?a.getColumnManager().getColumns()[c]:c});return(b.record===g.record)&&(b.column===g.column)}},onStoreRemove:function(b,a,d){var c=this,f=c.getPosition();Ext.selection.DataViewModel.prototype.onStoreRemove.apply(this,arguments);if(f&&b.getCount()&&b.indexOf(f.record)!==-1){f.setRow(f.record)}else{c.selection=null}},onStoreClear:function(){Ext.selection.DataViewModel.prototype.onStoreClear.apply(this,arguments);this.selection=null},onStoreAdd:function(){var a=this,b=a.getPosition();Ext.selection.DataViewModel.prototype.onStoreAdd.apply(this,arguments);if(b){b.setRow(b.record)}else{a.selection=null}},onCellClick:function(c,a,f,b,h,d,g){if(d!==-1){this.setPosition(g.position)}},onCellSelect:function(a,b){if(a&&a.rowIdx!==undefined&&a.rowIdx>-1){this.doSelect(a.record,false,b)}},onCellDeselect:function(a,b){if(a&&a.rowIdx!==undefined){this.doDeselect(a.record,b)}},onSelectChange:function(c,b,j,a){var f=this,g,d,h,k;if(b){g=f.nextSelection;d="select"}else{g=f.selection;d="deselect"}h=g.view||f.primaryView;if((j||f.fireEvent("before"+d,f,c,g.rowIdx,g.colIdx))!==false&&a()!==false){if(b){if(!f.preventFocus){k=h.getNavigationModel();if(!g.isEqual(k.getPosition())){k.setPosition(g,null,null,null,true)}}h.onCellSelect(g)}else{h.onCellDeselect(g);delete f.selection}if(!j){f.fireEvent(d,f,c,g.rowIdx,g.colIdx)}}},onEditorTab:function(b,f){var c=this,d=f.shiftKey?"left":"right",g=b.context,a=g.view.walkCells(g,d,f,c.preventWrap);if(a){if(b.startEdit(a.record,a.column)){c.wasEditing=false}else{a.view.getNavigationModel().setPosition(a,null,f);c.wasEditing=true}}},refresh:function(){var b=this.getPosition(),a;if(b&&(a=this.store.indexOf(this.selected.last()))!==-1){b.rowIdx=a}},onColumnMove:function(d,f,b,c){var a=d.up("tablepanel");if(a){this.onViewRefresh(a.view)}},onUpdate:function(a){var b=this,c;if(b.isSelected(a)){c=b.selecting?b.nextSelection:b.selection;b.view.onCellSelect(c)}},onViewRefresh:function(b){var f=this,h=f.getPosition(),c,g=b.headerCt,a,d;if(h&&h.view===b){a=h.record;d=h.column;if(!d.isDescendantOf(g)){d=g.queryById(d.id)||g.down('[text="'+d.text+'"]')||g.down('[dataIndex="'+d.dataIndex+'"]')}if(h.record){if(d&&(b.store.indexOfId(a.getId())!==-1)){c=new Ext.grid.CellContext(b).setPosition({row:a,column:d});f.setPosition(c)}}else{f.selection=null}}},selectByPosition:function(a,b){this.setPosition(a,b)}},0,0,0,0,["selection.cellmodel"],0,[Ext.selection,"CellModel"],0));(Ext.cmd.derive("Ext.selection.CheckboxModel",Ext.selection.RowModel,{mode:"MULTI",injectCheckbox:0,checkOnly:false,showHeaderCheckbox:undefined,checkSelector:".x-grid-row-checker",headerWidth:24,checkerOnCls:"x-grid-hd-checker-on",tdCls:"x-grid-cell-special x-grid-cell-row-checker",constructor:function(){var a=this;Ext.selection.RowModel.prototype.constructor.apply(this,arguments);if(a.mode==="SINGLE"&&a.showHeaderCheckbox!==true){a.showHeaderCheckbox=false}},beforeViewRender:function(b){var c=this,a;Ext.selection.RowModel.prototype.beforeViewRender.apply(this,arguments);if(!c.hasLockedHeader()||b.headerCt.lockedCt){if(c.showHeaderCheckbox!==false){b.headerCt.on("headerclick",c.onHeaderClick,c)}c.addCheckbox(b,true);a=b.ownerCt;if(b.headerCt.lockedCt){a=a.ownerCt}c.mon(a,"reconfigure",c.onReconfigure,c)}},bindComponent:function(a){var b=this;b.sortable=false;Ext.selection.RowModel.prototype.bindComponent.apply(this,arguments)},hasLockedHeader:function(){var a=this.views,c=a.length,b;for(b=0;b<c;b++){if(a[b].headerCt.lockedCt){return true}}return false},addCheckbox:function(a,b){var c=this,d=c.injectCheckbox,f=a.headerCt;if(d!==false){if(d==="first"){d=0}else{if(d==="last"){d=f.getColumnCount()}}Ext.suspendLayouts();if(a.getStore().isBufferedStore){c.showHeaderCheckbox=false}f.add(d,c.getHeaderConfig());Ext.resumeLayouts()}if(b!==true){a.refresh()}},onReconfigure:function(c,a,b){if(b){this.addCheckbox(this.views[0])}},toggleUiHeader:function(f){var b=this.views[0],d=b.headerCt,c=d.child("gridcolumn[isCheckerHd]"),a=this.checkerOnCls;if(c){if(f){c.addCls(a)}else{c.removeCls(a)}}},onHeaderClick:function(c,f,b){if(f.isCheckerHd){b.stopEvent();var a=this,d=f.el.hasCls("x-grid-hd-checker-on");a.preventFocus=true;if(d){a.deselectAll()}else{a.selectAll()}delete a.preventFocus}},getHeaderConfig:function(){var a=this,b=a.showHeaderCheckbox!==false;return{isCheckerHd:b,text:"&#160;",clickTargetName:"el",width:a.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,dataIndex:"",tdCls:a.tdCls,cls:b?"x-column-header-checkbox ":"",defaultRenderer:a.renderer.bind(a),editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader()}},renderEmpty:function(){return"&#160;"},refresh:function(){Ext.selection.RowModel.prototype.refresh.apply(this,arguments);this.updateHeaderState()},renderer:function(g,c,b,h,f,d,a){return'<div class="x-grid-row-checker" role="presentation">&#160;</div>'},onSelectChange:function(){Ext.selection.RowModel.prototype.onSelectChange.apply(this,arguments);if(!this.suspendChange){this.updateHeaderState()}},onStoreLoad:function(){Ext.selection.RowModel.prototype.onStoreLoad.apply(this,arguments);this.updateHeaderState()},onStoreAdd:function(){Ext.selection.RowModel.prototype.onStoreAdd.apply(this,arguments);this.updateHeaderState()},onStoreRemove:function(){Ext.selection.RowModel.prototype.onStoreRemove.apply(this,arguments);this.updateHeaderState()},onStoreRefresh:function(){Ext.selection.RowModel.prototype.onStoreRefresh.apply(this,arguments);this.updateHeaderState()},maybeFireSelectionChange:function(a){if(a&&!this.suspendChange){this.updateHeaderState()}Ext.selection.RowModel.prototype.maybeFireSelectionChange.apply(this,arguments)},resumeChanges:function(){Ext.selection.RowModel.prototype.resumeChanges.call(this);if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var g=this,h=g.store,f=h.getCount(),j=g.views,k=false,a=0,b,d,c;if(!h.isBufferedStore&&f>0){b=g.selected;k=true;for(c=0,d=b.getCount();c<d;++c){if(h.indexOfId(b.getAt(c).id)===-1){break}++a}k=f===a}if(j&&j.length){g.toggleUiHeader(k)}}},1,0,0,0,["selection.checkboxmodel"],0,[Ext.selection,"CheckboxModel"],0));(Ext.cmd.derive("Ext.state.CookieProvider",Ext.state.Provider,{constructor:function(a){var b=this;b.path="/";b.expires=new Date(Ext.Date.now()+(1000*60*60*24*7));b.domain=null;b.secure=false;Ext.state.Provider.prototype.constructor.apply(this,arguments);b.state=b.readCookies()},set:function(a,c){var b=this;if(typeof c=="undefined"||c===null){b.clear(a);return}b.setCookie(a,c);Ext.state.Provider.prototype.set.apply(this,arguments)},clear:function(a){this.clearCookie(a);Ext.state.Provider.prototype.clear.apply(this,arguments)},readCookies:function(){var f={},k=document.cookie+";",d=/\s?(.*?)=(.*?);/g,j=this.prefix,a=j.length,h,b,g;while((h=d.exec(k))!=null){b=h[1];g=h[2];if(b&&b.substring(0,a)==j){f[b.substr(a)]=this.decodeValue(g)}}return f},setCookie:function(a,c){var b=this;document.cookie=b.prefix+a+"="+b.encodeValue(c)+((b.expires==null)?"":("; expires="+b.expires.toUTCString()))+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+((b.secure==true)?"; secure":"")},clearCookie:function(a){var b=this;document.cookie=b.prefix+a+"=null; expires=Thu, 01-Jan-1970 00:00:01 GMT"+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+((b.secure==true)?"; secure":"")}},1,0,0,0,0,0,[Ext.state,"CookieProvider"],0));(Ext.cmd.derive("Ext.toolbar.Spacer",Ext.Component,{alternateClassName:"Ext.Toolbar.Spacer",baseCls:"x-toolbar-spacer",ariaRole:"presentation"},0,["tbspacer"],["component","box","tbspacer"],{component:true,box:true,tbspacer:true},["widget.tbspacer"],0,[Ext.toolbar,"Spacer",Ext.Toolbar,"Spacer"],0));(Ext.cmd.derive("FBEditor.command.HistoryCommand",Ext.Base,{singleton:true,alternateClassName:"FBEditor.HistoryCommand",commands:null,currentIndex:-1,init:function(){var a=this;a.commands=new Ext.util.MixedCollection()},add:function(c){var b=this,a;a=b.currentIndex;b.commands.add(a,c);a++;b.currentIndex=a}},0,0,0,0,0,0,[FBEditor.command,"HistoryCommand",FBEditor,"HistoryCommand"],0));(Ext.cmd.derive("FBEditor.file.File",Ext.Base,{LOAD_TYPE_TEXT:"text",LOAD_TYPE_ARRAYBUFFER:"arraybuffer",file:null,fileReader:null,constructor:function(b){var c=this,a;c.file=b;a=new FileReader();a.file=b;c.fileReader=a},read:function(h){var g=this,a=true,b=g.fileReader,c=g.file,d=h.type?h.type:g.LOAD_TYPE_TEXT,f;if(d===g.LOAD_TYPE_TEXT){f=g.getEncode();b.readAsText(c,f)}else{if(d===g.LOAD_TYPE_ARRAYBUFFER){b.readAsArrayBuffer(c)}else{a=false}}b.onload=h.load?function(){h.load(this.result)}:null;return a},getEncode:function(){var a;a="windows-1251";return a}},1,0,0,0,0,0,[FBEditor.file,"File"],0));(Ext.cmd.derive("FBEditor.file.Zip",Ext.Base,{zip:null,constructor:function(){var a=this;a.zip=new JSZip()},unPackage:function(d){var c=this,b=c.zip,a;a=b.load(d);return a},getFiles:function(){var b=this,a=b.zip;return a.files},generateBlob:function(){var b=this,a=b.zip;return a.generate({type:"blob"})},file:function(b,f,a){var d=this,c=d.zip;c.file(b,f,a)},remove:function(a){var c=this,b=c.zip;b.remove(a)}},1,0,0,0,0,0,[FBEditor.file,"Zip"],0));(Ext.cmd.derive("FBEditor.FB3.File",Ext.Base,{files:null,structure:null,zip:null,data:null,constructor:function(b){var a=this;a.zip=Ext.create("FBEditor.file.Zip");a.data=b},getStructure:function(){var c=this,b=c.zip,d=c.data.content,a=c.structure;if(!a){b.unPackage(d);c.setFiles();a=Ext.create("FBEditor.FB3.Structure",c);c.structure=a.load()}return a},updateStructure:function(d){var c=this,a=c.structure,f,b;a.setThumb(d.thumb);a.setMeta(d.meta);f=a.getBooks();Ext.Object.each(d.books,function(g,h){a.setDesc(f[g],h.desc);b=a.getBodies(f[g]);Ext.each(h.bodies,function(k,j){a.setContent(b[j],k.content);a.setImages(b[j],k.images)})})},createStructure:function(){var b=this,a;a=Ext.create("FBEditor.FB3.Structure",b);b.structure=a.create();b.updateStructure(b.data)},getFiles:function(b){var c=this,a=null;if(c.files){a=b?c.files[b]:c.files;a=a||null;if(!a){Ext.log({level:"warn",msg:"В архиве отсутствует файл "+b+", на который ссылается один из существующих файлов",dump:c.files})}}return a},getName:function(){var b=this,c=b.data,d=FBEditor.file.Manager.defaultFb3FileName,a;a=c.file?c.file.name.replace(/(\.fb3(\.zip)?)$/,""):d;return a},setFiles:function(){var b=this,a=b.zip;b.files=a.getFiles()},generateBlob:function(){var b=this,a=b.zip;return a.generateBlob()}},1,0,0,0,0,0,[FBEditor.FB3,"File"],0));(Ext.cmd.derive("FBEditor.FB3.InterfaceStructure",Ext.Base,{getContentTypes:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getContentTypes")},getThumb:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getThumb")},getMeta:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getMeta")},getBooks:function(){throw Error("Не реализован метод FB3.InterfaceStructure#getBooks")},getDesc:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getDesc")},getBodies:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getBodies")},getContent:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getContent")},getImages:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#getImages")},setThumb:function(a){throw Error("Не реализован метод FB3.InterfaceStructure#setThumb")},setMeta:function(){throw Error("Не реализован метод FB3.InterfaceStructure#setMeta")},setDesc:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setDesc")},setContent:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setContent")},setImages:function(a,b){throw Error("Не реализован метод FB3.InterfaceStructure#setImages")}},0,0,0,0,0,0,[FBEditor.FB3,"InterfaceStructure"],0));(Ext.cmd.derive("FBEditor.FB3.rels.AbstractRels",Ext.Base,{defaultContent:"",prefix:"",rels:null,file:null,structure:null,fileName:null,relsName:null,parentDir:null,parentRelsDir:null,blob:null,constructor:function(a,f,b){var c=this,d;d=a.getFb3file();if(!d.getFiles(f)){c.create(a,f)}c.structure=a;c.fileName=f;c.parentRelsDir=b?b:null;c.relsName=c.getRelsName();c.file=c.structure.getFb3file().getFiles(f);c.prefix=FBEditor.util.xml.Json.prefix;c.rels=c.getRels();c.blob=new Blob([c.file.asArrayBuffer()],{type:c.parseMimeType()})},create:function(a,f){var c=this,d=a.getFb3file(),b;b=d.zip;b.file(f,c.defaultContent);d.setFiles()},getRels:function(){throw Error("Не реализован метод FB3.rels.AbstractRels#getRels")},getStructure:function(){var a=this;return a.structure},getFileName:function(){var a=this;return a.fileName},getBaseFileName:function(){var b=this,c=b.fileName,a;a=c.replace(/.*\/(.*?\.\w+)$/,"$1");return a},getExtension:function(){var b=this,c=b.fileName,a;a=c.replace(/.*\/.*?\.(\w+)$/,"$1");return a},getDate:function(){var b=this,a;a=b.file.date;return a},getRelsName:function(){var d=this,f=d.getFileName(),c,b,a=d.relsName;if(!a){f=f.split("/");b=f.pop();c=f.join("/");d.parentDir=c;a=c+"/_rels/"+b+".rels"}return a},getParentDir:function(){var a=this;return a.parentDir},getParentRelsDir:function(){var a=this;return a.parentRelsDir},getJson:function(){var b=this,c=b.getText(),a;a=FBEditor.util.xml.Json.xmlToJson(c);return a},getText:function(){var b=this,a=b.file;return a.asText()},getArrayBuffer:function(){return this.file.asArrayBuffer()},getUrl:function(){var c=this,a=c.blob,b;b=window.URL.createObjectURL(a);return b},getSize:function(){return this.blob.size},getType:function(){return this.blob.type},setFileContent:function(d){var b=this,c=b.structure.fb3file,f=b.fileName,a;a=c.zip;a.file(f,d)},moveTo:function(d){var c=this,g=c.structure.fb3file,h=c.fileName,b,f,a;a=g.zip;b=d+"/"+c.getBaseFileName();f=c.file.asArrayBuffer();a.file(b,f);a.remove(h);c.fileName=b},parseMimeType:function(){var b=this,a="";a=/\.svg$/.test(b.fileName)?"image/svg+xml":a;a=/\.png$/.test(b.fileName)?"image/png":a;a=/\.(jpg|jpeg)$/.test(b.fileName)?"image/jpeg":a;a=/\.gif$/.test(b.fileName)?"image/gif":a;return a}},1,0,0,0,0,0,[FBEditor.FB3.rels,"AbstractRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.ContentTypes",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="png" ContentType="image/png"/><Default Extension="jpg" ContentType="image/jpeg"/><Default Extension="gif" ContentType="image/gif"/><Default Extension="svg" ContentType="image/svg+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/meta/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/fb3/description.xml" ContentType="application/fb3-description+xml"/><Override PartName="/fb3/body.xml" ContentType="application/fb3-body+xml"/></Types>',getRels:function(){return null},getContent:function(){var a=this;return a.getJson().Types}},0,0,0,0,0,0,[FBEditor.FB3.rels,"ContentTypes"],0));(Ext.cmd.derive("FBEditor.resource.data.AbstractData",Ext.Base,{rootPath:"fb3/img",getData:function(){throw Error("Нереализован метод FBEditor.resource.data.AbstractData#getData()")},getMimeType:function(b){var a="";a=/\.svg$/.test(b)?"image/svg+xml":a;a=/\.png$/.test(b)?"image/png":a;a=/\.(jpg|jpeg)$/.test(b)?"image/jpeg":a;a=/\.gif$/.test(b)?"image/gif":a;return a},getBaseFileName:function(b){var a;a=b.replace(/.*\/(.*?\.\w+)$/,"$1");return a}},0,0,0,0,0,0,[FBEditor.resource.data,"AbstractData"],0));(Ext.cmd.derive("FBEditor.resource.data.ZipData",FBEditor.resource.data.AbstractData,{getData:function(){var b=this,a,c;a=b.getFileName().substring(b.rootPath.length+1);c={fileId:b.getId(),content:b.getArrayBuffer(),url:b.getUrl(),name:a,baseName:b.getBaseFileName(),rootName:b.getFileName(),modifiedDate:b.getDate(),sizeBytes:b.getSize(),type:b.getType(),isCover:b.getIsCover()};return c}},0,0,0,0,0,0,[FBEditor.resource.data,"ZipData"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Image",FBEditor.FB3.rels.AbstractRels,{isCover:false,id:null,getData:function(){var a=this;return a.mixins.resData.getData.call(a)},getRels:function(){return null},getIsCover:function(){return this.isCover},getId:function(){return this.id},setId:function(a){this.id=a}},0,0,0,0,0,[["resData",FBEditor.resource.data.ZipData]],[FBEditor.FB3.rels,"Image"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Thumb",FBEditor.FB3.rels.Image,{isCover:true,getRels:function(){return null}},0,0,0,0,0,0,[FBEditor.FB3.rels,"Thumb"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Meta",FBEditor.FB3.rels.AbstractRels,{getRels:function(){return null},getContent:function(){var a=this;return a.getJson().coreProperties},setContent:function(b){var a=this;a.setFileContent(b)}},0,0,0,0,0,0,[FBEditor.FB3.rels,"Meta"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Book",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8"?><fb3-description xmlns="http://www.fictionbook.org/FictionBook3/description" id="29f8c76a-141c-102c-a3bc-9f4786c95f7d" version="1.0"></fb3-description>',desc:null,constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments);a.desc=a.getDesc()},getRels:function(){var d=this,c=d.rels,a=d.getRelsName(),b=d.getParentDir();if(!c){c=Ext.create("FBEditor.FB3.rels.BookRels",d.getStructure(),a,b)}return c},getDesc:function(){var a=this,b=a.desc;if(!b){b=a.getText()}return b},setDesc:function(b){var a=this;a.setFileContent(b)}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Book"],0));(Ext.cmd.derive("FBEditor.FB3.rels.BookRels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://www.fictionbook.org/FictionBook3/relationships/body" Target="body.xml"/></Relationships>',bodies:null,getRels:function(){var c=this,a=c.rels,b;if(!a){b=c.getJson();a=b.Relationships.Relationship;a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,c.prefix+"Type",2)}return a},getBodies:function(){var d=this,a=d.bodies,c=d.getParentRelsDir(),b;if(!a){b=d.getRels();a=b[FBEditor.FB3.rels.RelType.body];a=Ext.isArray(a)?a:[a];Ext.each(a,function(h,f,j){var g=h[d.prefix+"Target"],k;k=g.substring(0,1)!=="/"?c+"/"+g:g.substring(1);j[f]=Ext.create("FBEditor.FB3.rels.Body",d.getStructure(),k)})}return a}},0,0,0,0,0,0,[FBEditor.FB3.rels,"BookRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Body",FBEditor.FB3.rels.AbstractRels,{constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments)},getRels:function(){var d=this,c=d.rels,a=d.getRelsName(),b=d.getParentDir();if(!c){c=Ext.create("FBEditor.FB3.rels.BodyRels",d.getStructure(),a,b)}return c},getContent:function(){var a=this;return a.getText()},setContent:function(b){var a=this;a.setFileContent(b)},setImages:function(g){var d=this,b=d.getRels(),a=d.getStructure(),f,c;f=a.getFb3file();c=f.zip;c.remove("fb3/img");Ext.each(g,function(h){c.file(h.rootName,h.content,{createFolders:true})});b.setContent(g)}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Body"],0));(Ext.cmd.derive("FBEditor.FB3.rels.BodyRels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"></Relationships>',images:null,getRels:function(){var c=this,a=c.rels,b;if(!a){b=c.getJson();a=b.Relationships.Relationship||null;if(a){a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,c.prefix+"Type",2)}}return a},getImages:function(){var d=this,a=d.images,c=d.getParentRelsDir(),b=d.getRels();if(!a&&b){a=b[FBEditor.FB3.rels.RelType.image];a=Ext.isArray(a)?a:[a];Ext.each(a,function(h,f,j){var l=h[d.prefix+"Id"],g=h[d.prefix+"Target"],k;k=g.substring(0,1)!=="/"?c+"/"+g:g.substring(1);j[f]=Ext.create("FBEditor.FB3.rels.Image",d.getStructure(),k);j[f].setId(l)})}return a},setContent:function(c){var b=this,a='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';Ext.each(c,function(f){var d='<Relationship Id="{%s}" Type="http://www.fictionbook.org/FictionBook3/relationships/image" Target="img/{%s}"/>';d=d.replace(/{%s}/g,f.name);a+=d});a+="</Relationships>";b.setFileContent(a)}},0,0,0,0,0,0,[FBEditor.FB3.rels,"BodyRels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.Rels",FBEditor.FB3.rels.AbstractRels,{defaultContent:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId0" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail" Target="cover.jpg"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="meta/core.xml"/><Relationship Id="rId2" Type="http://www.fictionbook.org/FictionBook3/relationships/Book" Target="fb3/description.xml"/></Relationships>',thumb:null,meta:null,books:null,constructor:function(){var a=this;FBEditor.FB3.rels.AbstractRels.prototype.constructor.apply(this,arguments);a.books=a.getBooks()},create:function(a,f){var c=this,d=a.getFb3file(),b;b=d.zip;b.file("meta/core.xml");b.file("fb3/body.xml");FBEditor.FB3.rels.AbstractRels.prototype.create.apply(this,arguments)},getRels:function(){var c=this,a=c.rels,b;if(!a){b=c.getJson();a=b.Relationships.Relationship;a=Ext.isArray(a)?a:[a];a=Ext.Array.toValueMap(a,c.prefix+"Type",2)}return a},getBooks:function(b){var c=this,d=c.books,a;if(!d){a=c.getRels();d=a[FBEditor.FB3.rels.RelType.book];d=Ext.isArray(d)?d:[d];Ext.each(d,function(j,g,f){var h=j[c.prefix+"Target"];h=h.replace(/^[/]/,"");f[g]=Ext.create("FBEditor.FB3.rels.Book",c.getStructure(),h)})}d=Ext.isNumeric(b)?d[b]:d;return d},getThumb:function(){var c=this,a=c.thumb,b;if(!a){b=c.getRels();a=b[FBEditor.FB3.rels.RelType.thumbnail];a=Ext.create("FBEditor.FB3.rels.Thumb",c.getStructure(),a[c.prefix+"Target"])}return a},getMeta:function(){var b=this,c=b.meta,a;if(!c){a=b.getRels();c=a[FBEditor.FB3.rels.RelType.coreProperties];c=Ext.create("FBEditor.FB3.rels.Meta",b.getStructure(),c[b.prefix+"Target"])}return c},setThumb:function(c){var b=this,a=b.getText(),d;d=c.rootName;a=a.replace(/thumbnail" Target="(.*?)"/,'thumbnail" Target="'+d+'"');b.setFileContent(a);console.log("save thumb",c,a)}},1,0,0,0,0,0,[FBEditor.FB3.rels,"Rels"],0));(Ext.cmd.derive("FBEditor.FB3.rels.RelType",Ext.Base,{singleton:true,book:"http://www.fictionbook.org/FictionBook3/relationships/Book",body:"http://www.fictionbook.org/FictionBook3/relationships/body",image:"http://www.fictionbook.org/FictionBook3/relationships/image",coreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",thumbnail:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail",digitalSignature:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/signature",digitalSignatureCertificate:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/certificate",digitalSignatureOrigin:"http://schemas.openxmlformats.org/package/2006/relationships/digital-signature/origin"},0,0,0,0,0,0,[FBEditor.FB3.rels,"RelType"],0));(Ext.cmd.derive("FBEditor.util.xml.Json",Ext.Base,{singleton:true,prefix:"_",x2js:null,xmlToJson:function(c){var a=this,b=a.x2js||a.createX2Js();return b.xml_str2json(c)},jsonToXml:function(a){var b=this,c=b.x2js||b.createX2Js();return c.json2xml_str(a)},createX2Js:function(){var a=this,b=a.prefix?a.prefix:" ",c;c=new X2JS({attributePrefix:b,escapeMode:false});a.x2js=c;return c}},0,0,0,0,0,0,[FBEditor.util.xml,"Json"],0));(Ext.cmd.derive("FBEditor.FB3.Structure",FBEditor.FB3.InterfaceStructure,{contentTypes:{file:"[Content_Types].xml",rel:null},rels:{file:"_rels/.rels",rel:null},fb3file:null,constructor:function(b){var a=this;a.fb3file=b},create:function(){var c=this,b=c.rels,a=c.contentTypes;a.rel=Ext.create("FBEditor.FB3.rels.ContentTypes",c,a.file);b.rel=Ext.create("FBEditor.FB3.rels.Rels",c,b.file);return c},load:function(){var a=this;if(a.valid()){a.create()}else{throw Error("Ошибка структуры архива")}return a},getContentTypes:function(){var a=this;return a.contentTypes.rel.getContent()},getThumb:function(){var a=this;return a.getRels().getThumb()},getMeta:function(){var a=this;return a.getRels().getMeta().getContent()},getBooks:function(){var a=this;return a.getRels().getBooks()},getDesc:function(a){return a.getDesc()},getBodies:function(a){return a.getRels().getBodies()},getContent:function(a){return a.getContent()},getImages:function(a){return a.getRels().getImages()},setThumb:function(b){var a=this;a.getRels().setThumb(b)},setMeta:function(b){var a=this;a.getRels().getMeta().setContent(b)},setDesc:function(a,b){a.setDesc(b)},setContent:function(a,b){a.setContent(b)},setImages:function(a,b){a.setImages(b)},getFb3file:function(){var a=this;return a.fb3file},getRels:function(){var a=this;return a.rels.rel},valid:function(){var d=this,c=d.getFb3file().getFiles(),b=[d.contentTypes.file,d.rels.file],f=Ext.Object.getKeys(c),a=true;Ext.Object.each(b,function(g,h){if(!Ext.Array.contains(f,h)){a=false;return false}});return a}},1,0,0,0,0,0,[FBEditor.FB3,"Structure"],0));(Ext.cmd.derive("FBEditor.converter.AbstractConverter",Ext.Base,{normalize:function(c){var a=this,b=FBEditor.util.xml.Json.prefix,f;delete c[b+"id"];delete c[b+"version"];delete c[b+"xmlns"];f=a._normalize(c);return f},_normalize:function(f){var b=this,c=FBEditor.util.xml.Json.prefix,g={},a;a=new RegExp("^("+c+")+");Ext.Object.each(f,function(h,j){var d;d=h.replace(a,"");if(Ext.isObject(j)||Ext.isArray(j)){g[d]=b._normalize(j)}else{if(d!=="toString"){g[d]=j}}});return g}},0,0,0,0,0,0,[FBEditor.converter,"AbstractConverter"],0));(Ext.cmd.derive("FBEditor.converter.contentTypes.Data",FBEditor.converter.AbstractConverter,{singleton:true,toNormalize:function(b){var a=this,c;c=a.normalize(b);return c}},0,0,0,0,0,0,[FBEditor.converter.contentTypes,"Data"],0));(Ext.cmd.derive("FBEditor.file.Manager",Ext.Base,{singleton:true,fb3file:null,defaultFb3FileName:"Новая книга",openFB3:function(b){var d=this,c=d.getFileFromEvent(b),a=false;if(c){a=c.read({type:c.LOAD_TYPE_ARRAYBUFFER,load:function(m){var o=FBEditor.resource.Manager,h=FBEditor.desc.Manager,s=Ext.getCmp("panel-main-content"),t,q,j,g,w,l,p,f,v,u,n,k;try{Ext.getCmp("panel-treenavigation").fireEvent("clearSelection");d.fb3file=Ext.create("FBEditor.FB3.File",{file:c.file,content:m});j=d.fb3file.getStructure();k=d.fb3file.getName();g=j.getThumb();n=j.getContentTypes();n=FBEditor.converter.contentTypes.Data.toNormalize(n);w=j.getMeta();l=j.getBooks();p=j.getDesc(l[0]);f=j.getBodies(l[0]);v=j.getImages(f[0]);u=j.getContent(f[0]);s.fireEvent("contentDesc");Ext.getCmp("panel-filename").fireEvent("setName",k);Ext.suspendLayouts();h.loadUrl=null;h.loadDataToForm(p);if(!o.checkThumbInResources(g)){g.moveTo(o.getDefaultThumbPath());v.push(g)}o.load(v);o.setCover(g.getFileName());s.openBody();q=FBEditor.getEditorManager();q.createContent(u)}catch(r){Ext.log({level:"error",msg:r,dump:r});Ext.Msg.show({title:"Ошибка",message:"Невозможно открыть книгу",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}Ext.getCmp("panel-body-navigation").selectRoot();Ext.resumeLayouts(true)}})}return a},openResource:function(b){var d=this,c=d.getFileFromEvent(b),a=false;if(c){a=c.read({type:c.LOAD_TYPE_ARRAYBUFFER,load:function(f){try{FBEditor.resource.Manager.loadResource({file:c.file,content:f})}catch(g){Ext.log({level:"error",msg:g,dump:g});Ext.Msg.show({title:"Ошибка",message:"Невозможно заугрузить ресурс "+(g?"("+g+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}})}return a},getFileFromEvent:function(a){var b;b=a.target.files.length?Ext.create("FBEditor.file.File",a.target.files[0]):null;return b},saveFB3:function(g,c){var d=this,f=d.fb3file,h,b,a;if(f){f.updateStructure(g)}else{f=Ext.create("FBEditor.FB3.File",g);f.createStructure()}d.fb3file=f;b=f.generateBlob();h=Ext.getCmp("panel-filename-display").getValue()+".fb3";a=window.saveAs(b,h);a.onwriteend=c;a.onabort=c;return a?true:false},saveResource:function(f,c){var d=f,b,a;b=new Blob([d.content],{type:d.type});a=window.saveAs(b,d.baseName);if(c){a.onwriteend=c;a.onabort=c}return a?true:false}},0,0,0,0,0,0,[FBEditor.file,"Manager"],0));(Ext.cmd.derive("FBEditor.view.window.resource.Resource",Ext.Window,{id:"window-resource",title:"Выбор ресурса",width:"80%",height:400,modal:true,closeAction:"hide",layout:"border",initComponent:function(){var a=this;a.items=[{xtype:"panel",id:"window-panel-resources-navigation",region:"west",split:{size:2},width:200,minWidth:200,bodyPadding:5,overflowY:"auto"},{xtype:"panel",id:"window-panel-resources",region:"center",bodyPadding:5,overflowY:"auto",cls:"window-panel-resources"}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},beforeShow:function(){var g=this,a=g.getWindowPanelResourcesNavigation(),b=g.getWindowPanelResources(),f=g.getPanelResourcesNavigation(),c=g.getPanelResourcesControl(),d=g.getViewResources();f.inWindow=true;a.add(f);b.add(c,d);Ext.window.Window.prototype.beforeShow.apply(this,arguments)},onHide:function(){var f=this,a=f.getPanelTreenavigation(),d=f.getPanelResourcesNavigation(),g=f.getPanelResources(),b=f.getPanelResourcesControl(),c=f.getViewResources();d.inWindow=false;a.insert(1,d);g.add(b,c);Ext.window.Window.prototype.onHide.apply(this,arguments)},getWindowPanelResourcesNavigation:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("window-panel-resources-navigation")},getWindowPanelResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("window-panel-resources")},getPanelTreenavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-treenavigation")},getPanelResourcesNavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-resources-navigation")},getPanelResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("panel-resources")},getPanelResourcesControl:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("panel-resources-control")},getViewResources:function(){var a=FBEditor.getBridgeWindow();return a.Ext.getCmp("view-resources")}},0,["window-resource"],["component","box","container","panel","window","window-resource"],{component:true,box:true,container:true,panel:true,window:true,"window-resource":true},["widget.window-resource"],0,[FBEditor.view.window.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.resource.ExplorerManager",Ext.Base,{singleton:true,win:null,getWindow:function(){var a=this,b=a.win;if(!b){b=Ext.create("FBEditor.view.window.resource.Resource");a.win=b}return b}},0,0,0,0,0,0,[FBEditor.resource,"ExplorerManager"],0));(Ext.cmd.derive("FBEditor.view.window.resource.Tree",Ext.Window,{id:"window-resource-tree",title:"Перемещение ресурса",height:"60%",modal:true,closeAction:"hide",layout:"vbox",translateText:{moveTo:"Переместить",cancel:"Отмена"},nameResource:"",destinationFolder:"",initComponent:function(){var a=this;a.items=[{xtype:"box",id:"window-panel-resources-tree-name",cls:"window-panel-resources-tree-name",tpl:'Переместить ресурс <span>{name}</span><tpl if="folder"> в <span>{folder}</span></tpl>'},{xtype:"panel",id:"window-panel-resources-tree-navigation",flex:1,width:400,minWidth:400,bodyPadding:5,overflowY:"auto",buttonAlign:"left",buttons:[{text:a.translateText.moveTo,scope:a,handler:function(){var f=FBEditor.getBridgeWindow(),c,b;if(!a.destinationFolder){return false}try{c=f.FBEditor.resource.Manager;b=c.moveResource(a.nameResource,a.destinationFolder);if(b){c.setSelectFunction(null);a.close()}}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно переместить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}},{text:a.translateText.cancel,scope:a,handler:function(){this.close()}}]}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},beforeShow:function(){var c=this,a=c.getWindowPanelResourcesTreeNavigation(),b=c.getPanelResourcesNavigation();a.add(b);Ext.window.Window.prototype.beforeShow.apply(this,arguments)},onHide:function(){var c=this,a=c.getPanelTreenavigation(),b=c.getPanelResourcesNavigation();a.insert(1,b);Ext.window.Window.prototype.onHide.apply(this,arguments)},getWindowPanelResourcesTreeNavigation:function(){return Ext.getCmp("window-panel-resources-tree-navigation")},getWindowPanelResourcesTreeName:function(){return Ext.getCmp("window-panel-resources-tree-name")},getPanelTreenavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-treenavigation")},getPanelResourcesNavigation:function(){var a=FBEditor.getBridgeNavigation();return a.Ext.getCmp("panel-resources-navigation")},setNameResource:function(b){var c=this,a=c.getWindowPanelResourcesTreeName();c.nameResource=b;a.setData({name:b,folder:c.destinationFolder})},setFolder:function(b){var c=this,a=c.getWindowPanelResourcesTreeName();c.destinationFolder=b?b:"/";a.setData({name:c.nameResource,folder:c.destinationFolder})}},0,["window-resource-tree"],["component","box","container","panel","window","window-resource-tree"],{component:true,box:true,container:true,panel:true,window:true,"window-resource-tree":true},["widget.window-resource-tree"],0,[FBEditor.view.window.resource,"Tree"],0));(Ext.cmd.derive("FBEditor.resource.TreeManager",Ext.Base,{singleton:true,win:null,getWindow:function(){var a=this,b=a.win;if(!b){b=Ext.create("FBEditor.view.window.resource.Tree");a.win=b}return b}},0,0,0,0,0,0,[FBEditor.resource,"TreeManager"],0));(Ext.cmd.derive("FBEditor.resource.Resource",Ext.Base,{fileId:null,content:null,url:"",name:"",baseName:"",rootName:"",modifiedDate:null,sizeBytes:null,size:"",type:"",date:"",extension:"",width:null,height:null,isFolder:false,isCover:false,totalElements:0,formatDate:"d.m.Y H:i",elements:null,constructor:function(c){var b=this,a=new Image();b.fileId=c.fileId||c.name;b.content=c.content;b.url=c.url;b.name=c.name;b.baseName=c.baseName;b.rootName=c.rootName;b.modifiedDate=c.modifiedDate;b.sizeBytes=c.sizeBytes;b.type=c.type;b.isCover=c.isCover;b.size=b.getSizeFormat();b.date=b.getDateFormat();b.extension=b.getExtension();b.elements=[];a.src=b.url;a.onload=function(){b.width=a.width;b.height=a.height}},addElement:function(a){var b=this;b.elements.push(a);b.totalElements=b.elements.length},removeElement:function(a){var b=this,c=b.elements;Ext.Array.each(c,function(f,d){if(Ext.Object.equals(a,f)){c.splice(d,1)}});b.totalElements=c.length;b.elements=c},clearElements:function(){var b=this,a,c=b.elements;while(c.length){a=c[0];if(a){a.deleteLinkResource()}else{c.splice(0,1)}}b.totalElements=0},rename:function(a){var b=this;b.rootName=b.rootName.replace(b.name,a);b.name=a},getSizeFormat:function(){var b=this,a;a=FBEditor.util.Format.fileSize(b.sizeBytes);return a},getDateFormat:function(){var b=this,a;a=Ext.Date.format(b.modifiedDate,b.formatDate);return a},getExtension:function(){var b=this,c=b.baseName,a;a=c.replace(/.*?\.(\w+)$/,"$1");return a}},1,0,0,0,0,0,[FBEditor.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.resource.FolderResource",FBEditor.resource.Resource,{total:0,constructor:function(b){var a=this;a.name=b.name;a.baseName=b.baseName;a.modifiedDate=b.modifiedDate;a.total=b.total;a.date=a.getDateFormat();a.extension="folder";a.isFolder=true;a.type="папка с файлами"}},1,0,0,0,0,0,[FBEditor.resource,"FolderResource"],0));(Ext.cmd.derive("FBEditor.resource.data.FileData",FBEditor.resource.data.AbstractData,{constructor:function(a){var b=this;b.fileData=a},getData:function(){var j=this,d=j.fileData.file,h=j.fileData.content,f=FBEditor.resource.Manager,k,b,c,a,g;k=f.getActiveFolder();b=k+(k?"/":"")+d.name;a=new Blob([h],{type:d.type});d.size=d.size||a.size;c=window.URL.createObjectURL(a);g={content:h,url:c,name:b,baseName:d.name,rootName:j.rootPath+"/"+b,modifiedDate:d.lastModifiedDate,sizeBytes:d.size,type:d.type};return g}},1,0,0,0,0,0,[FBEditor.resource.data,"FileData"],0));(Ext.cmd.derive("FBEditor.resource.data.UrlData",FBEditor.resource.data.AbstractData,{rootPathUrl:"img",constructor:function(a){var b=this;b.fileData=a},getData:function(){var k=this,g=k.fileData.fileName,f=k.fileData.fileId,j=k.fileData.content,l,b,c,d,a,h;c=g.substring(k.rootPathUrl.length+1);l=k.getMimeType(g);a=new Blob([j],{type:l});d=window.URL.createObjectURL(a);b=k.getBaseFileName(g);h={content:j,url:d,fileId:f,name:c,baseName:b,rootName:k.rootPath+"/"+c,sizeBytes:a.size,type:l};return h}},1,0,0,0,0,0,[FBEditor.resource.data,"UrlData"],0));(Ext.cmd.derive("FBEditor.resource.Manager",Ext.Base,{singleton:true,data:[],defaultThumbPath:"thumb",types:["image/png","image/jpeg","image/gif","image/svg+xml"],url:"https://hub.litres.ru/pages/get_fb3_body_rels/",loadUrl:null,saveUrl:null,urlRes:"https://hub.litres.ru/pages/get_fb3_body_image/",art:null,rootPath:"fb3/img",activeFolder:"",selectFn:null,loadFromUrl:function(d,c){var b=this,a;b.art=d;a=b.url+"?art="+b.art;b.loadUrl=a;Ext.log({level:"info",msg:"Загрузка ресурсов из "+a});Ext.Ajax.request({url:a,scope:b,success:function(f){this.responseLoad(f,c)},failure:function(f){this.responseLoad(f,c)}})},load:function(a){var b=this,c=[];Ext.each(a,function(g){var f,d;d=g.getData();f=Ext.create("FBEditor.resource.Resource",d);c.push(f)});b.data=c;b.sortData();b.updateNavigation();b.generateFolders();b.setActiveFolder("")},loadResource:function(f){var d=this,c=f.file,b,a;if(!d.checkType(c.type)){throw Error("Недопустимый тип ресурса")}a=Ext.create("FBEditor.resource.data.FileData",f);a=a.getData();if(d.containsResource(a.name)){throw Error("Ресурс с именем "+a.name+" уже существует")}b=Ext.create("FBEditor.resource.Resource",a);d.data.push(b);d.sortData();d.updateNavigation()},deleteResource:function(c){var f=this,j=f.data,h,g,a=true;function d(k){j.splice(k,1);f.updateNavigation()}function b(l){var k=j[l].name,m=[];j.splice(l,1);Ext.each(j,function(o,n){if(o.name.indexOf(k)!==0){m.push(o)}});f.data=m;f.updateNavigation()}g=f.getResourceIndexByName(c);h=g!==null?j.slice(g,g+1):null;h=h&&h[0]?h[0]:null;if(!h){throw Error("Ресурс "+c+" не найден")}if(h.isFolder){if(f.containsCover(h)){Ext.Msg.confirm("Удаление папки","Данная папка содержит обложку книги. Вы уверены, что хотите её удалить?",function(k){if(k==="yes"){Ext.getCmp("panel-cover").fireEvent("clear");b(g)}})}else{b(g)}}else{if(h.isCover){Ext.Msg.confirm("Удаление ресурса","Данный ресурс является обложкой книги. Вы уверены, что хотите его удалить?",function(k){if(k==="yes"){Ext.getCmp("panel-cover").fireEvent("clear");d(g)}})}else{if(h.elements.length){Ext.Msg.confirm("Удаление ресурса","Данный ресурс используется в теле книги. Вы уверены, что хотите его удалить?",function(k){if(k==="yes"){h.clearElements();d(g)}})}else{d(g)}}}return a},saveResource:function(b){var c=this,g=c.data,f,d,a;f=c.getResourceIndexByName(b);d=f!==null?g.slice(f,f+1):null;d=d&&d[0]?d[0]:null;if(!d){throw Error("Ресурс "+b+" не найден")}a=FBEditor.file.Manager.saveResource(d);return a},moveResource:function(a,b){var k=this,g=k.data,d=b==="/"?"":b,h,f,c,j,l=false;h=k.getResourceIndexByName(a);f=h!==null?g.slice(h,h+1):null;f=f&&f[0]?f[0]:null;if(!f){throw Error("Ресурс "+a+" не найден")}if(a===d){throw Error("Невозможно переместить ресурс сам в себя")}c=f.name;if(c.indexOf(a)===0){j=c.indexOf("/")!==-1?c.replace(/.*(\/.*?)$/,d+"$1"):d+"/"+c;j=j.replace(/^[/]/,"");if(j!==c){l=true;f.rename(j);k.setActiveFolder(d)}}return l},createFolder:function(b){var d=this,f=d.activeFolder,g,a,c;g=f?f+"/"+b:b;if(!d.containsResource(g)){a={name:g,baseName:b,modifiedDate:new Date()};c=Ext.create("FBEditor.resource.FolderResource",a);d.data.unshift(c);d.sortData();d.updateNavigation();return true}else{throw Error("Папка с именем `"+b+"` уже существует")}return false},setActiveFolder:function(b){var a=this,c,d=FBEditor.getBridgeWindow();a.activeFolder=b;c=a.getFolderData(b);d.Ext.getCmp("view-resources").setStoreData(c)},setSelectFunction:function(a){this.selectFn=a},setSelectCoverFunction:function(){var a=this;a.selectFn=function(b){Ext.getCmp("window-resource").close();a.setCover(b.name);a.selectFn=null}},setSelectFolderFunction:function(){var a=this;a.selectFn=function(b){Ext.getCmp("window-resource-tree").setFolder(b.path)}},setCover:function(b){var c=this,d=c.data,a,f=null;if(!b){return false}a=b.indexOf(c.rootPath)===0?b.substring(c.rootPath.length+1):b;Ext.Array.each(d,function(g){g.isCover=false;if(g.name===a){f=g}});if(f){f.isCover=true;Ext.getCmp("panel-cover").fireEvent("load",f)}},restoreActiveFolder:function(c){var b=this,a=FBEditor.getBridgeNavigation(),d;b.activeFolder=c;d=a.Ext.getCmp("panel-resources-navigation");d.restoreOpenNode()},getActiveFolder:function(a){return this.activeFolder},getSelectFunction:function(){return this.selectFn},getData:function(){return this.data},getCover:function(){var a=this,b=a.data,c=null;c=Ext.Array.findBy(b,function(d){return d.isCover});return c},getResources:function(){var a=this,b=a.data,c=[];Ext.each(b,function(d){if(!d.isFolder){c.push(d)}});return c},getResourceByName:function(a){var b=this,f=b.data,d,c;d=b.getResourceIndexByName(a);c=d!==null?f.slice(d,d+1):null;c=c&&c[0]?c[0]:null;return c},getResourceByFileId:function(f){var a=this,d=a.data,c,b;c=a.getResourceIndexByFileId(f);b=c!==null?d.slice(c,c+1):null;b=b&&b[0]?b[0]:null;return b},getFolders:function(){var a=this,b=a.data,c=[];Ext.each(b,function(d){if(d.isFolder){c.push(d)}});return c},getFolderData:function(b){var a=this,d=a.data,c=b,g=[];Ext.each(d,function(k){var l,j=k.name,h,f;l=j.indexOf(c);f=l===0?true:false;h=f?j.substring(c.length+1):null;if(f&&h&&h.indexOf("/")===-1||!c&&!h){g.push(k)}});return g},getDefaultThumbPath:function(){var a=this,b;b=a.rootPath+(a.defaultThumbPath?"/"+a.defaultThumbPath:"");return b},checkType:function(c){var d=this,b=d.types,a;a=Ext.Array.contains(b,c);return a},containsResource:function(a){var c=this,d=c.data,b=false;Ext.each(d,function(f){if(f.name===a){b=true;return false}});return b},checkThumbInResources:function(b){var c=this,a;a=b.getFileName().indexOf(c.rootPath)===0?true:false;return a},updateNavigation:function(){var b=this,a=FBEditor.getBridgeNavigation(),c;c=b.getData();a.Ext.getCmp("panel-resources-navigation").loadData(c)},generateFolders:function(){var b=this,c=b.data,a=[];Ext.each(c,function(n,h){var m=0,d=false,l,g,j,f,k;if(n.name.indexOf("/")!==-1){l=n.name.replace(/(.*)\/.*?$/,"$1");Ext.each(a,function(o){if(o.name===l){d=true;return false}});if(!d){f=n.modifiedDate;Ext.each(c,function(o){if(o.name.indexOf(l)===0){m++;if(o.modifiedDate.getTime()>f.getTime()){f=o.modifiedDate}}});g=l.replace(/.*\/(.*?)$/,"$1");j={name:l,baseName:g,modifiedDate:f,total:m};k=Ext.create("FBEditor.resource.FolderResource",j);a.push(k)}}});if(a.length){c=Ext.Array.merge(a,c)}b.data=c},sortData:function(){var a=this,b=a.data;Ext.Array.sort(b,function(d,c){var f;f=d.isFolder&&c.isFolder&&d.name>c.name||!d.isFolder&&!c.isFolder&&d.name>c.name;return f});a.data=b},getResourceIndexByName:function(a){var c=this,f=c.data,d,b;b=Ext.Array.findBy(f,function(h,g){d=g;return h.name===a});d=b?d:null;return d},getResourceIndexByFileId:function(f){var b=this,d=b.data,c,a;a=Ext.Array.findBy(d,function(h,g){c=g;return h.fileId===f});c=a?c:null;return c},containsCover:function(d){var c=this,f=c.data,a=d.name,b;b=Ext.Array.findBy(f,function(g){if(g.name.indexOf(a)===0&&g.isCover){return true}});return b?true:false},responseLoad:function(a,f){var d=this,c=d.loadUrl,b,h;try{if(a&&a.responseText&&/^<\?xml/ig.test(a.responseText)){b=a.responseText;d.loadDataResources(b,f)}else{throw Error()}}catch(g){h=" ("+g+")";Ext.log({level:"error",msg:"Ошибка загрузки списка ресурсов",dump:{response:a,error:g}});Ext.Msg.show({title:"Ошибка",message:"Невозможно загрузить список ресурсов по адресу "+c+h,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},loadDataResources:function(c,j){var g=this,f=FBEditor.util.xml.Json,a=[],b=0,d,h;d=f.xmlToJson(c);h=d.Relationships.Relationship;Ext.Array.each(h,function(m){var l,n,k;n=m._Id;k=m._Target;l=g.urlRes+"?art="+g.art+"&image="+n;Ext.Ajax.request({url:l,scope:g,binary:true,success:function(p){var q={},o;b++;q.content=p.responseBytes;q.fileName=k;q.fileId=n;o=Ext.create("FBEditor.resource.data.UrlData",q);a.push(o);if(b===h.length){g.load(a);j()}},failure:function(o){var p;b++;p=" "+o.status+" ("+o.statusText+")";Ext.log({level:"error",msg:"Ошибка загрузки ресурса",dump:{response:o,error:e}});Ext.Msg.show({title:"Ошибка",message:"Невозможно загрузить ресурс по адресу "+l+p,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR});if(b===h.length){g.load(a);j()}}})})}},0,0,0,0,0,0,[FBEditor.resource,"Manager"],0));(Ext.cmd.derive("FBEditor.route.Manager",Ext.Base,{singleton:true,params:{},init:function(){var a=this,c,b;b=location.hash.substring(1);if(b){c=b.split("&");Ext.Array.each(c,function(g){var f,d,h;f=g.split("=");d=f[0];h=f[1]?unescape(f[1]):null;a.params[d]=h})}},getParams:function(){return this.params}},0,0,0,0,0,0,[FBEditor.route,"Manager"],0));(Ext.cmd.derive("FBEditor.scroll.Scroll",Ext.Base,{duration:500,startTime:0,cmp:null,constructor:function(a){var c=this,b;if(a.cmp){c.cmp=a.cmp;c.duration=a.duration||c.duration}else{c.cmp=a}b=c.cmp;b.on({scope:c,afterRender:function(){this.cmp.body.on({scope:this,scroll:this.event})}})},event:function(){var b=this,c=b.duration,a=new Date().getTime();if(!b.startTime){b.cmp.fireEvent("startScroll")}Ext.defer(b.endScroll,c,b);b.startTime=a},endScroll:function(){var c=this,d=c.duration,b=c.startTime,a=new Date().getTime();if(a-b>=d){c.startTime=0;c.cmp.fireEvent("endScroll")}else{c.cmp.fireEvent("scroll")}}},1,0,0,0,0,0,[FBEditor.scroll,"Scroll"],0));(Ext.cmd.derive("FBEditor.util.xml.Jsxml",Ext.Base,{singleton:true,jsxml:null,trans:function(a,b){var c=this,d=c.jsxml||c.createJsxml();return d.transReady(a,b)},valid:function(b){var a,c;c={xml:b.xml,schema:b.xsd,"arguments":["--noout","--schema",b.schemaFileName,b.xmlFileName]};a=window.validateXML?window.validateXML(c):true;return a},createJsxml:function(){var a=this,b;b=window.JSXML;a.jsxml=b;return b}},0,0,0,0,0,0,[FBEditor.util.xml,"Jsxml"],0));(Ext.cmd.derive("FBEditor.util.Format",Ext.Base,{singleton:true,cacheFileSize:{},translateText:{bytes:"",kb:" КБ",mb:" МБ",gb:" ГБ"},fileSize:function(d){var f=this,b=1024,c=1048576,g=1073741824,a;if(f.cacheFileSize[d]){return f.cacheFileSize[d]}if(d<b){a=d+f.translateText.bytes}else{if(d<1000000){a=(Ext.util.Format.number(d/b,"0.00"))+f.translateText.kb}else{if(d<1000000000){a=(Ext.util.Format.number(d/c,"0.00"))+f.translateText.mb}else{a=(Ext.util.Format.number(d/g,"0.00"))+f.translateText.gb}}}f.cacheFileSize[d]=a;return a}},0,0,0,0,0,0,[FBEditor.util,"Format"],0));(Ext.cmd.derive("FBEditor.webworker.AbstractMaster",Ext.Base,{name:"",needInit:false,worker:null,callback:[],initialized:false,constructor:function(a){var f=this,d=FBEditor.webworker.Manager,c,h,b;c="app/"+d.path+"/"+f.name+"/Worker.js?"+FBEditor.versionParam;try{h=new Worker(c);h.addEventListener("message",f.message,false);h.addEventListener("error",f.error,false);f.worker=h;if(f.needInit){b=function(j){f.initialized=j?true:false};f.post(null,b,f)}}catch(g){Ext.log({msg:"Ошибка создания потока: "+c,level:"error"})}},message:function(a){throw Error("Не реализован метод webworker.AbstractMaster#message()")},post:function(d,g,b){var c=this,f=c.worker,a=c.name;if(g){if(d&&d.callbackId){c.callback[d.callbackId]={fn:g,scope:b}}else{c.callback[a]=c.callback[a]||[];c.callback[a].push({fn:g,scope:b})}}f.postMessage(d)},error:function(a){throw Error("Не реализован метод webworker.AbstractMaster#error()")},getCallback:function(c){var b=this,a=b.name,d=null;if(c){d=b.callback[c]||null}else{if(b.callback[a].length){d=b.callback[a].splice(0,1)[0]}}return d}},1,0,0,0,0,0,[FBEditor.webworker,"AbstractMaster"],0));(Ext.cmd.derive("FBEditor.webworker.httpRequest.Master",FBEditor.webworker.AbstractMaster,{name:"httpRequest",abort:function(){var a=this;a.post({abort:true})},message:function(g){var f=g.data,b=FBEditor.webworker.Manager,c=b.getMaster(f.masterName),a=f.data.response,d=f.data.callbackId||null,h;h=c.getCallback(d);if(h&&!f.data.abort){h.fn.call(h.scope,a,f.data)}},error:function(c){var a=FBEditor.webworker.Manager,b=a.getMaster("httpRequest"),d,f;d="Ошибка выполнения потока "+c.filename+" в строке "+c.lineno+": "+c.message;Ext.log({msg:d,level:"error"});f=b.getCallback();if(f){f.fn.call(f.scope,false)}}},0,0,0,0,0,0,[FBEditor.webworker.httpRequest,"Master"],0));(Ext.cmd.derive("FBEditor.webworker.xmllint.Master",FBEditor.webworker.AbstractMaster,{name:"xmllint",needInit:true,message:function(d){var c=d.data,a=FBEditor.webworker.Manager,b=a.getMaster(c.masterName),f;f=b.getCallback();if(f){f.fn.call(f.scope,c)}},error:function(c){var a=FBEditor.webworker.Manager,b=a.getMaster("xmllint"),d,f;d="Ошибка выполнения потока "+c.filename+" в строке "+c.lineno+": "+c.message;Ext.log({msg:d,level:"error"});f=b.getCallback();if(f){f.fn.call(f.scope,false)}}},0,0,0,0,0,0,[FBEditor.webworker.xmllint,"Master"],0));(Ext.cmd.derive("FBEditor.webworker.Manager",Ext.Base,{singleton:true,path:"webworker",masters:[{name:"xmllint",cfg:{},_master:null},{name:"httpRequest",cfg:{},_master:null}],init:function(){var a=this,b=a.masters;Ext.Array.each(b,function(d){var c=d.cfg||null;d._master=a.factory(d.name,c)})},getMaster:function(a){var c=this,b=null;Ext.Array.each(c.masters,function(d){if(d.name===a){b=d._master;return false}});return b},factory:function(b,a){var d=this,c,g;g="FBEditor."+d.path+"."+b+".Master";try{c=Ext.create(g,a)}catch(f){Ext.log({msg:"Ошибка создания владельца потока "+g,level:"error"})}return c}},0,0,0,0,0,0,[FBEditor.webworker,"Manager"],0));(Ext.cmd.derive("FBEditor.xsd.Desc",Ext.Base,{singleton:true,getXsd:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:fb3d="http://www.fictionbook.org/FictionBook3/description" targetNamespace="http://www.fictionbook.org/FictionBook3/description" elementFormDefault="qualified" attributeFormDefault="unqualified">\t<simpleType name="SubjectRelationEnumType">\t\t\t\t  <restriction base="token">\t\t\t\t      <enumeration value="author" />\t\t\t\t      <enumeration value="translator" />\t\t\t\t      <enumeration value="editor" />\t\t\t\t      <enumeration value="compiler" />\t\t\t\t      <enumeration value="maker-up" />\t\t\t\t      <enumeration value="adapter" />\t\t\t\t      <enumeration value="dialogue" />\t\t\t\t      <enumeration value="conceptor" />\t\t\t\t      <enumeration value="reviewer" />\t\t\t\t      <enumeration value="introduction" />\t\t\t\t      <enumeration value="afterword" />\t\t\t\t      <enumeration value="accompanying" />\t\t\t\t      <enumeration value="quotations" />\t\t\t\t      <enumeration value="annotator" />\t\t\t\t      <enumeration value="associated" />\t\t\t\t      <enumeration value="copyright_holder" />\t\t\t\t      <enumeration value="commentator" />\t\t\t\t      <enumeration value="consultant" />\t\t\t\t      <enumeration value="corrector" />\t\t\t\t      <enumeration value="scientific_advisor" />\t\t\t\t      <enumeration value="dubious_author" />\t\t\t\t      <enumeration value="designer" />\t\t\t\t      <enumeration value="recipient_of_letters" />\t\t\t\t      <enumeration value="sponsor" />\t\t\t\t      <enumeration value="photographer" />\t\t\t\t      <enumeration value="narrator" />\t\t\t\t      <enumeration value="rendering" />\t\t\t\t      <enumeration value="performer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="maker">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="actor">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="director">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="producer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="composer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="sound_engineer">\t\t\t\t\t</enumeration>\t\t\t\t\t<enumeration value="screenwriter">\t\t\t\t\t</enumeration>\t\t\t\t      <enumeration value="other" />\t\t\t\t      <enumeration value="undef" />\t\t\t      </restriction>\t\t</simpleType>          <simpleType name="ObjectRelationEnumType">\t          <restriction base="token">\t\t          <enumeration value="preceding_edition" />\t\t          <enumeration value="following_edition" />\t\t          <enumeration value="translated_from" />\t\t          <enumeration value="translation" />\t\t          <enumeration value="compilation" />\t\t          <enumeration value="part" />\t\t          <enumeration value="appendix" />\t\t          <enumeration value="appendix_to" />\t\t          <enumeration value="intersection" />\t\t          <enumeration value="same_subject" />\t\t          <enumeration value="alt_media" />\t\t          <enumeration value="sequel" />\t\t          <enumeration value="prequel" />\t\t          <enumeration value="reissue" />\t\t          <enumeration value="undef" />\t          </restriction>          </simpleType>\t<simpleType name="UUIDType">\t\t\t <restriction base="token">\t\t\t\t <pattern value="[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}"/>\t\t\t </restriction>\t\t</simpleType>\t\t<simpleType name="BookClassType">\t\t\t\t  <restriction base="token">\t\t\t\t      <enumeration value="novel" />\t\t\t\t      <enumeration value="short_story" />\t\t\t\t      <enumeration value="essay" />\t\t\t\t      <enumeration value="article" />\t\t\t\t      <enumeration value="play" />\t\t\t\t      <enumeration value="monograph" />\t\t\t\t      <enumeration value="diary" />\t\t\t\t      <enumeration value="manual" />\t\t\t\t      <enumeration value="thesis" />\t\t\t\t  </restriction>\t\t</simpleType>\t\t\t<simpleType name="SubjectType">\t\t\t <restriction base="token">\t\t\t  <enumeration value="accounting" />\t\t\t  <enumeration value="adv_geo" />\t\t\t  <enumeration value="adv_indian" />\t\t\t  <enumeration value="adv_western" />\t\t\t  <enumeration value="antique" />\t\t\t  <enumeration value="antique_east" />\t\t\t  <enumeration value="antique_myths" />\t\t\t  <enumeration value="banking" />\t\t\t  <enumeration value="child_det" />\t\t\t  <enumeration value="child_prose" />\t\t\t  <enumeration value="child_tale" />\t\t\t  <enumeration value="children" />\t\t\t  <enumeration value="comp_hard" />\t\t\t  <enumeration value="comp_programming" />\t\t\t  <enumeration value="comp_www" />\t\t\t  <enumeration value="design" />\t\t\t  <enumeration value="det_classic" />\t\t\t  <enumeration value="det_espionage" />\t\t\t  <enumeration value="det_history" />\t\t\t  <enumeration value="det_maniac" />\t\t\t  <enumeration value="det_political" />\t\t\t  <enumeration value="economics" />\t\t\t  <enumeration value="global_economy" />\t\t\t  <enumeration value="home_crafts" />\t\t\t  <enumeration value="home_entertain" />\t\t\t  <enumeration value="home_health" />\t\t\t  <enumeration value="home_sex" />\t\t\t  <enumeration value="humor_anecdote" />\t\t\t  <enumeration value="humor_verse" />\t\t\t  <enumeration value="job_hunting" />\t\t\t  <enumeration value="love_detective" />\t\t\t  <enumeration value="love_history" />\t\t\t  <enumeration value="love_short" />\t\t\t  <enumeration value="marketing" />\t\t\t  <enumeration value="nonf_criticism" />\t\t\t  <enumeration value="nonfiction" />\t\t\t  <enumeration value="paper_work" />\t\t\t  <enumeration value="poetry" />\t\t\t  <enumeration value="prose_classic" />\t\t\t  <enumeration value="prose_counter" />\t\t\t  <enumeration value="prose_military" />\t\t\t  <enumeration value="prose_su_classics" />\t\t\t  <enumeration value="ref_dict" />\t\t\t  <enumeration value="ref_guide" />\t\t\t  <enumeration value="reference" />\t\t\t  <enumeration value="religion_esoterics" />\t\t\t  <enumeration value="religion_self" />\t\t\t  <enumeration value="sci_chem" />\t\t\t  <enumeration value="sci_history" />\t\t\t  <enumeration value="sci_linguistic" />\t\t\t  <enumeration value="sci_medicine" />\t\t\t  <enumeration value="sci_phys" />\t\t\t  <enumeration value="sci_psychology" />\t\t\t  <enumeration value="sci_tech" />\t\t\t  <enumeration value="sf_action" />\t\t\t  <enumeration value="sf_detective" />\t\t\t  <enumeration value="sf_fantasy" />\t\t\t  <enumeration value="sf_history" />\t\t\t  <enumeration value="sf_humor" />\t\t\t  <enumeration value="sf_space" />\t\t\t  <enumeration value="stock" />\t\t\t </restriction>\t\t</simpleType>\t                        <element name="fb3-description">\t                        \t                        <complexType>\t\t                        <sequence>\t\t\t                        <element name="periodical" type="fb3d:PeriodicalType" minOccurs="0">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="title" type="fb3d:TitleType">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="sequence" type="fb3d:SequenceType" minOccurs="0" maxOccurs="unbounded">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element ref="fb3d:fb3-relations">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element ref="fb3d:fb3-classification">\t\t\t\t                        \t\t\t                        </element>\t\t\t                        <element name="lang" type="language"/>\t\t\t                        <element name="written" minOccurs="0">\t\t\t\t                        <complexType mixed="false">\t\t\t\t\t                        <sequence>\t\t\t\t\t\t                        <element name="lang" type="language" minOccurs="0"/>\t\t\t\t\t\t                        <element name="date" minOccurs="0">\t\t\t\t\t\t\t                        <complexType>\t\t\t\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t\t\t\t                        <attribute name="value" type="date" use="optional"/>\t\t\t\t\t\t\t\t\t                        </extension>\t\t\t\t\t\t\t\t                        </simpleContent>\t\t\t\t\t\t\t                        </complexType>\t\t\t\t\t\t                        </element>\t\t\t\t\t\t                        <element name="country" minOccurs="0">\t\t\t\t\t\t\t                        <simpleType>\t\t\t\t\t\t\t\t                        <restriction base="token">\t\t\t\t\t\t\t\t\t                        <minLength value="2"/>\t\t\t\t\t\t\t\t                        </restriction>\t\t\t\t\t\t\t                        </simpleType>\t\t\t\t\t\t                        </element>\t\t\t\t\t\t                        <element name="date-public" minOccurs="0">\t\t\t\t\t\t\t                        <complexType>\t\t\t\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t\t\t\t                        <attribute name="value" type="date" use="optional"/>\t\t\t\t\t\t\t\t\t                        </extension>\t\t\t\t\t\t\t\t                        </simpleContent>\t\t\t\t\t\t\t                        </complexType>\t\t\t\t\t\t                        </element>\t\t\t\t\t                        </sequence>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="translated" minOccurs="0">                                        <complexType>\t                                        <simpleContent>\t\t                                        <extension base="string">\t\t\t                                        <attribute name="value" type="date" use="optional"/>\t\t                                        </extension>\t                                        </simpleContent>                                        </complexType>                                    </element>                                    <element name="copyrights" minOccurs="0">\t\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t\t<element name="copyright-owner" maxOccurs="unbounded">\t\t\t\t\t\t\t\t\t\t\t\t    <complexType mixed="false">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="title" use="required">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<restriction base="normalizedString">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minLength value="1"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</attribute>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="uuid" type="fb3d:UUIDType"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="url" type="anyURI"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<attribute name="percent">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<restriction base="float">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minInclusive value="0"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<maxInclusive value="100"/>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</attribute>\t\t\t\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t</element>\t\t\t                        <element name="document-info">\t\t\t\t                        <complexType mixed="false">\t\t\t\t\t                        <attribute name="created" type="dateTime" use="required"/>\t\t\t\t\t                        <attribute name="updated" type="dateTime" use="required"/>\t\t\t\t\t                        <attribute name="program-used" type="normalizedString" use="optional"/>\t\t\t\t\t                        <attribute name="src-url" type="anyURI" use="optional"/>\t\t\t\t\t                        <attribute name="ocr" type="normalizedString" use="optional"/>\t\t\t\t\t                        <attribute name="editor" type="token" use="optional"/>\t\t\t\t\t                        <attribute name="fb3-lvl" type="integer" use="optional"/>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="history" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t                        <element name="paper-publish-info" minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t\t\t\t\t<complexType mixed="false">\t\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t\t<element name="isbn" type="fb3d:ISBNType" minOccurs="0" maxOccurs="unbounded"/>\t\t\t\t\t\t\t\t\t\t\t\t<element name="sequence" minOccurs="0" maxOccurs="unbounded">\t\t\t                                        <simpleType>\t\t\t\t                                        <restriction base="string">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<minLength value="1"/>\t\t                                                </restriction>\t\t\t\t\t\t\t\t\t\t\t\t\t</simpleType>\t\t\t\t\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t\t\t\t\t<element name="biblio-description" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t\t<attribute name="title" type="token" use="required"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="publisher" type="token" use="optional"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="city" type="token" use="optional"/>\t\t\t\t\t\t\t\t\t\t\t<attribute name="year" type="gYear" use="optional"/>\t\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t\t</element>\t\t\t                        <element name="custom-info" minOccurs="0" maxOccurs="unbounded">\t\t\t\t                        \t\t\t\t                        <complexType>\t\t\t\t\t                        <simpleContent>\t\t\t\t\t\t                        <extension base="string">\t\t\t\t\t\t\t                        <attribute name="info-type" use="required">\t\t\t\t\t\t\t\t                        <simpleType>\t\t\t\t\t\t\t\t\t                        <restriction base="token">\t\t\t\t\t\t\t\t\t\t                        <minLength value="1"/>\t\t\t\t\t\t\t\t\t                        </restriction>\t\t\t\t\t\t\t\t                        </simpleType>\t\t\t\t\t\t\t                        </attribute>\t\t\t\t\t\t                        </extension>\t\t\t\t\t                        </simpleContent>\t\t\t\t                        </complexType>\t\t\t                        </element>\t\t\t                        <element name="annotation" type="fb3d:AnnotationType" minOccurs="0"/>\t\t\t                        <element name="preamble" type="fb3d:AnnotationType" minOccurs="0"/>\t\t                        </sequence>\t\t                        <attribute name="id" type="fb3d:UUIDType" use="required">\t\t\t                        \t\t                        </attribute>\t\t                        <attribute name="version" type="float" use="required">\t\t\t                        \t\t                        </attribute>\t                        </complexType>\t                        <unique name="RelationUUID">\t\t                        <selector xpath="relations/subject|relations/object"/>\t\t                        <field xpath="@id"/>\t                        </unique>                        </element><element name="fb3-relations" type="fb3d:RelationsType">                                   </element>  <element name="fb3-classification" type="fb3d:ClassificationType">\t    </element><complexType name="PeriodicalType" mixed="false">\t\t <sequence>\t<element name="title" type="fb3d:TitleType" minOccurs="0">\t \t</element>\t<element name="issn" type="fb3d:ISSNType" minOccurs="0">\t    \t</element>  <element name="issue">\t  \t  <complexType>\t\t  <simpleContent>\t\t\t  <extension base="string">\t\t\t\t  <attribute name="number" type="positiveInteger" use="required">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t\t  <attribute name="year" type="gYear" use="required">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t\t  <attribute name="date" type="date" use="optional">\t\t\t\t\t  \t\t\t\t  </attribute>\t\t\t  </extension>\t\t  </simpleContent>\t  </complexType>  </element></sequence><attribute name="id" type="fb3d:UUIDType" use="required"/></complexType><complexType name="ClassificationType" mixed="false">    <sequence>      <element name="class" minOccurs="0">                    <complexType>\t          <simpleContent>\t\t          <extension base="fb3d:BookClassType">\t\t\t          <attribute name="contents" use="required">\t\t\t\t          <simpleType>\t\t\t\t\t          <restriction base="token">\t\t\t\t\t\t          <enumeration value="standalone" />\t\t\t\t\t\t          <enumeration value="collection" />\t\t\t\t\t\t      </restriction>\t\t\t\t          </simpleType>\t\t\t          </attribute>\t\t          </extension>\t          </simpleContent>          </complexType>      </element>      <element name="subject" type="fb3d:SubjectType" maxOccurs="unbounded">                </element>      <element name="target-audience" minOccurs="0">                    <complexType mixed="true">\t          <attribute name="age-min" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="positiveInteger">\t\t\t\t          <minInclusive value="2"/>\t\t\t\t          <maxInclusive value="50"/>\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>\t          <attribute name="age-max" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="positiveInteger">\t\t\t\t          <minInclusive value="2"/>\t\t\t\t          <maxInclusive value="150"/>\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>\t          <attribute name="education" use="optional">\t\t          <simpleType>\t\t\t          <restriction base="token">\t\t\t\t          <enumeration value="none" />\t\t\t\t          <enumeration value="high" />\t\t\t\t          <enumeration value="higher" />\t\t\t          </restriction>\t\t          </simpleType>\t          </attribute>          </complexType>      </element>      <element name="setting" minOccurs="0">          <complexType mixed="true">\t          <attribute name="country" type="token" use="optional"/>\t          <attribute name="place" type="token" use="optional"/>\t          <attribute name="date" type="date" use="optional"/>\t          <attribute name="date-from" type="date" use="optional"/>\t          <attribute name="date-to" type="date" use="optional"/>\t          <attribute name="age" type="token" use="optional"/>          </complexType>      </element>      <element name="udc" minOccurs="0" maxOccurs="unbounded">        <simpleType>\t          <restriction base="token">\t            <pattern value="[\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»\'/A-Яа-я]+"/>\t          </restriction>         </simpleType>      </element>      <element name="bbk" minOccurs="0" maxOccurs="unbounded">          <simpleType>\t          <restriction base="token">\t            <pattern value=\'[\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+\'/>\t          </restriction>          </simpleType>      </element>  </sequence></complexType><complexType name="TitleType" mixed="false">\t<sequence>\t    <element name="main">\t        <simpleType>\t            <restriction base="string">\t                <minLength value="1"/>\t            </restriction>\t        </simpleType>\t    </element>\t\t<element name="sub" minOccurs="0">            <simpleType>\t\t\t\t<restriction base="string">\t\t\t\t\t<minLength value="1"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</element>\t\t<element name="alt" minOccurs="0" maxOccurs="unbounded">\t\t\t<simpleType>\t\t\t\t<restriction base="string">\t\t\t\t\t<minLength value="1"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</element>\t</sequence></complexType><complexType name="SequenceType" mixed="false">    <sequence>      <element name="title" type="fb3d:TitleType"/>      <element name="sequence" type="fb3d:SequenceType" minOccurs="0"/>  </sequence>  <attribute name="number" type="positiveInteger" use="optional"/>  <attribute name="id" type="fb3d:UUIDType" use="required"/></complexType><complexType name="AnnotationType">                                <sequence>              <element name="p" type="fb3d:BasicTextType">\t                            </element><choice minOccurs="0" maxOccurs="unbounded">                                <element name="p" type="fb3d:BasicTextType">\t                                                                </element><element name="br">              </element>  </choice>  </sequence></complexType><complexType name="BasicTextType" mixed="true">    <choice minOccurs="0" maxOccurs="unbounded">      <element name="strong" type="fb3d:BasicTextType">                </element>      <element name="em" type="fb3d:BasicTextType">                </element>      <element name="a">                    <complexType mixed="true">\t          <complexContent mixed="true">\t\t          <extension base="fb3d:BasicTextType">\t\t\t          <attribute name="href" type="anyURI" use="required"/>\t\t          </extension>\t          </complexContent>          </complexType>      </element>  </choice></complexType><complexType name="RelationsType">                                <sequence>              <element name="subject" type="fb3d:SubjectRelationType" maxOccurs="unbounded">\t                            </element><element name="object" type="fb3d:ObjectRelationType" minOccurs="0" maxOccurs="unbounded"/>                                                                              </sequence>                                                                              </complexType><complexType name="SubjectRelationType" mixed="false">                                              \t                                              <sequence>                                              <element name="title" type="fb3d:TitleType">\t                                                                                            </element><element name="first-name" minOccurs="0">                                     \t                                     <simpleType>                                     <restriction base="string">\t                                     <minLength value="1"/>                                     </restriction></simpleType>  </element>\t  <element name="middle-name" minOccurs="0">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>\t  <element name="last-name">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>\t  <element name="description" minOccurs="0">\t\t  \t\t  <simpleType>\t\t\t  <restriction base="string">\t\t\t\t  <minLength value="1"/>\t\t\t  </restriction>\t\t  </simpleType>\t  </element>  </sequence><attribute name="id" type="fb3d:UUIDType" use="required">                                          </attribute>  <attribute name="link" type="fb3d:SubjectRelationEnumType" use="required">\t    </attribute>\t<attribute name="percent" type="optional"/></complexType><complexType name="ObjectRelationType" mixed="false">    <sequence>      <element name="title" type="fb3d:TitleType">                </element>      <element name="description" minOccurs="0">                    <simpleType>\t          <restriction base="string">\t\t          <minLength value="1"/>\t          </restriction>          </simpleType>      </element>  </sequence>  <attribute name="id" type="fb3d:UUIDType" use="required">        </attribute>  <attribute name="link" type="fb3d:ObjectRelationEnumType" use="required">        </attribute></complexType><simpleType name="ISSNType">             <restriction base="string">                  <pattern value="d{4}-d{3}(d|X)"/></restriction>  </simpleType>\t  <simpleType name="ISBNType">\t\t  \t\t  <restriction base="string">\t\t\t  <pattern value="([0-9]+[-s]){3,6}[0-9]*[xX0-9]"/>\t\t  </restriction>\t  </simpleType>  </schema>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsd,"Desc"],0));(Ext.cmd.derive("FBEditor.Application",Ext.app.Application,{name:"FBEditor",stores:[],listen:{controller:{"#":{unmatchedroute:"onUnmatchedRoute"}}},init:function(){var a=this;a.initApplicationCache();FBEditor.version=Ext.manifest.loader.cache;FBEditor.versionParam=Ext.manifest.loader.cacheParam+"="+FBEditor.version;FBEditor.parentWindow=window.opener;FBEditor.childWindow={navigation:null,props:null};FBEditor.getBridgeWindow=function(){return FBEditor.parentWindow||window};FBEditor.getBridgeProps=function(){var b;b=FBEditor.parentWindow?(FBEditor.parentWindow.FBEditor.childWindow.props||FBEditor.parentWindow):(FBEditor.childWindow.props||window);return b};FBEditor.getBridgeNavigation=function(){return FBEditor.parentWindow?(FBEditor.parentWindow.FBEditor.childWindow.navigation||FBEditor.parentWindow):(FBEditor.childWindow.navigation||window)};FBEditor.getLocalStorage=function(){return Ext.util.LocalStorage.get("FBEditor")||new Ext.util.LocalStorage({id:"FBEditor"})};FBEditor.getEditorManager=function(b){var f=FBEditor.getBridgeWindow(),c,d;c=f.FBEditor.activeEditorManager;if(!c||b){d=f.Ext.getCmp("main-editor");c=d.getManager()}return c};FBEditor.setEditorManager=function(b){var c=FBEditor.getBridgeWindow();c.FBEditor.activeEditorManager=b};window.onbeforeunload=function(){a.onbeforeunload(a)};window.onfocus=function(){a.onfocus()};FBEditor.webworker.Manager.init();Ext.state.Manager.setProvider(new Ext.state.CookieProvider({prefix:a.getName()+"-"}));FBEditor.command.HistoryCommand.init();FBEditor.route.Manager.init();a.getAccessHub()},launch:function(){if(FBEditor.parentWindow){FBEditor.parentWindow.Ext.getCmp("main").removeDetachedPanel(window)}document.querySelector(".app-loading").parentNode.removeChild(document.querySelector(".app-loading"))},initApplicationCache:function(){var a;if(window.applicationCache){a=window.applicationCache;a.addEventListener("updateready",function(c){var b=window.applicationCache;b.swapCache();Ext.log("Swap Application Cache")},false)}},onUnmatchedRoute:function(a){if(FBEditor.parentWindow){window.close()}},onbeforeunload:function(a){if(FBEditor.parentWindow&&!FBEditor.closingWindow){FBEditor.closingWindow=true;if(!FBEditor.parentWindow.FBEditor.closingWindow){if(window.name==="navigation"){Ext.getCmp("panel-resources-navigation").destroy();Ext.getCmp("panel-body-navigation").destroy()}FBEditor.parentWindow.Ext.getCmp("main").attachPanel(window.name,window);FBEditor.getLocalStorage().removeItem(window.name)}window.close()}else{FBEditor.closingWindow=true;Ext.getCmp("main").fireEvent("closeapplication")}},onfocus:function(){if(!window.name){}},getAccessHub:function(){var a=FBEditor.webworker.Manager,b;FBEditor.accessHub=false;b=a.factory("httpRequest");b.post({url:"https://hub.litres.ru/pages/machax_arts/?uuid=1"},function(c,d){if(c){FBEditor.accessHub=c.substring(0,1)==="{"?true:false;Ext.log({msg:"Хаб доступен",level:"info"});if(FBEditor.accessHub){Ext.getCmp("main").fireEvent("accessHub")}}})}},0,0,0,0,0,0,[FBEditor,"Application"],0));(function renderingInfo(){document.querySelector(".app-loading-info").firstChild.nodeValue="Рендеринг"}());(Ext.cmd.derive("FBEditor.command.InterfaceCommand",Ext.Base,{execute:function(){throw Error("Необходимо реализовать метод command.InterfaceCommand#execute")},unExecute:function(){throw Error("Необходимо реализовать метод command.InterfaceCommand#unExecute")}},0,0,0,0,0,0,[FBEditor.command,"InterfaceCommand"],0));(Ext.cmd.derive("FBEditor.command.AbstractCommand",FBEditor.command.InterfaceCommand,{data:null,constructor:function(b){var a=this;a.data=b},getData:function(){return this.data},getBridgeWindow:function(){return FBEditor.getBridgeWindow()}},1,0,0,0,0,0,[FBEditor.command,"AbstractCommand"],0));(Ext.cmd.derive("FBEditor.command.CreateFolderResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,d=FBEditor.getBridgeWindow(),c=b.data,a=false;Ext.Msg.prompt("Новая папка","Имя:",function(g,f){if(g==="ok"&&!Ext.isEmpty(f)){try{a=d.FBEditor.resource.Manager.createFolder(f)}catch(h){Ext.log({level:"error",msg:h,dump:h});Ext.Msg.show({title:"Ошибка",message:"Невозможно создать папку "+(h?"("+h+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}});return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"CreateFolderResource"],0));(Ext.cmd.derive("FBEditor.command.DeleteResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,f=FBEditor.getBridgeWindow(),c=b.data,a=false;try{a=f.FBEditor.resource.Manager.deleteResource(c.nameResource)}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно удалить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"DeleteResource"],0));(Ext.cmd.derive("FBEditor.command.LoadDesc",FBEditor.command.AbstractCommand,{execute:function(){var d=this,f=d.data,a=false,c=FBEditor.desc.Manager,b;b=c.loadUrl;try{if(b){c.loadFromUrl(b);a=true}}catch(g){}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"LoadDesc"],0));(Ext.cmd.derive("FBEditor.command.LoadResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,d=FBEditor.getBridgeWindow(),c=b.data,a;a=d.FBEditor.file.Manager.openResource(c.evt);return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"LoadResource"],0));(Ext.cmd.derive("FBEditor.command.MoveResource",FBEditor.command.AbstractCommand,{execute:function(){var c=this,h=FBEditor.getBridgeWindow(),d=c.data,b=d.nameResource,g,a=false;try{g=h.FBEditor.resource.TreeManager.getWindow();if(g.show){a=true;g.setNameResource(b);g.show();h.FBEditor.resource.Manager.setSelectFolderFunction()}}catch(f){Ext.log({level:"error",msg:f,dump:f});Ext.Msg.show({title:"Ошибка",message:"Невозможно переместить ресурс "+(f?"("+f+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"MoveResource"],0));(Ext.cmd.derive("FBEditor.command.OpenBody",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,h=d.getData(),g=d.getBridgeWindow(),f=FBEditor.getBridgeProps(),a=true,c,b;c=g.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentBody");b=f.Ext&&f.Ext.getCmp?f.Ext.getCmp("panel-main-props-card"):null;if(b){d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelBody")}return a},unExecute:function(){var f=this,j=f.getData(),c=f.activePanelContent,a=f.activePanelProps,h=f.getBridgeWindow(),g=FBEditor.getBridgeProps(),d,b;d=h.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=g.Ext.getCmp("panel-main-props-card");b.setActiveItem(a)}},0,0,0,0,0,0,[FBEditor.command,"OpenBody"],0));(Ext.cmd.derive("FBEditor.command.OpenDesc",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,h=d.getData(),g=d.getBridgeWindow(),f=FBEditor.getBridgeProps(),a=true,c,b;c=g.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentDesc");b=f.Ext.getCmp("panel-main-props-card");d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelDesc");return a},unExecute:function(){var f=this,j=f.getData(),c=f.activePanelContent,a=f.activePanelProps,h=f.getBridgeWindow(),g=FBEditor.getBridgeProps(),d,b;d=h.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=g.Ext.getCmp("panel-main-props-card");b.setActiveItem(a)}},0,0,0,0,0,0,[FBEditor.command,"OpenDesc"],0));(Ext.cmd.derive("FBEditor.command.OpenFile",FBEditor.command.AbstractCommand,{execute:function(){var b=this,c,a;c=b.data;a=FBEditor.file.Manager.openFB3(c.evt);return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"OpenFile"],0));(Ext.cmd.derive("FBEditor.command.OpenResources",FBEditor.command.AbstractCommand,{activePanelContent:null,activePanelProps:null,execute:function(){var d=this,h=d.getData(),g=d.getBridgeWindow(),f=FBEditor.getBridgeProps(),a=true,c,b;c=g.Ext.getCmp("panel-main-content");d.activePanelContent=c.getLayout().getActiveItem();c.fireEvent("contentResources");b=f.Ext.getCmp("panel-main-props-card");if(b){d.activePanelProps=b.getLayout().getActiveItem();b.fireEvent("activePanelResources")}return a},unExecute:function(){var f=this,j=f.getData(),c=f.activePanelContent,a=f.activePanelProps,h=f.getBridgeWindow(),g=FBEditor.getBridgeProps(),d,b;d=h.Ext.getCmp("panel-main-content");d.setActiveItem(c);b=g.Ext.getCmp("panel-main-props-card");if(b){b.setActiveItem(a)}}},0,0,0,0,0,0,[FBEditor.command,"OpenResources"],0));(Ext.cmd.derive("FBEditor.command.SaveAsFile",FBEditor.command.AbstractCommand,{execute:function(){var h=this,a=h.data.btn,c=h.data.desc,g,d,m,k,j,b,l;try{if(!(m=FBEditor.resource.Manager.getCover())){throw Error("Загрузите обложку для книги")}if(!c.isValid()){throw Error("Некорректно заполнено описание книги")}k=c.getValues();j=FBEditor.desc.Manager.getXml(k);g=Ext.getCmp("main-editor");d=g.getManager();b={thumb:m,meta:FBEditor.desc.Manager.getMetaXml(k),books:[{desc:j,bodies:[{content:d.getXml(),images:FBEditor.resource.Manager.getResources()}]}]};l=FBEditor.file.Manager.saveFB3(b,function(){Ext.log({level:"warn",msg:"Стали доступны методы FileSaver.onwriteend, FileSaver.onabort"});a.enable()})}catch(f){a.enable();Ext.log({level:"error",msg:f,dump:f});Ext.Msg.show({title:"Ошибка сохранения",message:f.message?f.message:"Невозможно сохранить книгу",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR});l=false}return l},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveAsFile"],0));(Ext.cmd.derive("FBEditor.command.SaveBody",FBEditor.command.AbstractCommand,{execute:function(){var c=this,d=c.data,a=false,b;try{alert("В разработке");console.log("save body")}catch(f){Ext.log({level:"error",msg:"Ошибка сохранения тела книги",dump:f});Ext.Msg.show({title:"Ошибка",message:f,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveBody"],0));(Ext.cmd.derive("FBEditor.command.SaveDesc",FBEditor.command.AbstractCommand,{execute:function(){var f=this,g=f.data,a=false,c=FBEditor.desc.Manager,d=Ext.getCmp("form-desc"),b;b=c.saveUrl;try{if(b){if(!d.isValid()){throw Error("Некорректно заполнено описание книги")}c.saveToUrl(b);a=true}}catch(h){Ext.log({level:"error",msg:"Ошибка сохранения описания книги",dump:h});Ext.Msg.show({title:"Ошибка",message:h,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveDesc"],0));(Ext.cmd.derive("FBEditor.command.SaveResource",FBEditor.command.AbstractCommand,{execute:function(){var b=this,f=FBEditor.getBridgeWindow(),c=b.data,a=false;try{a=f.FBEditor.resource.Manager.saveResource(c.nameResource)}catch(d){Ext.log({level:"error",msg:d,dump:d});Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить ресурс "+(d?"("+d+")":""),buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SaveResource"],0));(Ext.cmd.derive("FBEditor.command.SelectCover",FBEditor.command.AbstractCommand,{execute:function(){var b=this,c=b.data,f=FBEditor.getBridgeWindow(),d,a=false;d=c.win;if(d.show){a=true;d.show();f.FBEditor.resource.Manager.setSelectCoverFunction()}return a},unExecute:function(){}},0,0,0,0,0,0,[FBEditor.command,"SelectCover"],0));(Ext.cmd.derive("FBEditor.command.SelectImg",FBEditor.command.AbstractCommand,{execute:function(){var d=this,f=d.data,a=false,b=FBEditor.resource.Manager,c,g;function h(l){var k,j=FBEditor.resource.Manager;g.close();k=j.getResourceByFileId(l.fileId);c.updateData({url:k.url,name:k.name});j.setSelectFunction(null)}c=f.scope;g=f.win;if(g.show){a=true;g.show();b.setSelectFunction(h)}return a},unExecute:function(){return true}},0,0,0,0,0,0,[FBEditor.command,"SelectImg"],0));(Ext.cmd.derive("FBEditor.command.SplitEditor",FBEditor.command.AbstractCommand,{execute:function(){var d=this,f=d.data,b=f.btn,c=f.editor,a=false;c.fireEvent("split");a=true;return a},unExecute:function(){var d=this,f=d.data,b=f.btn,c=f.editor,a=false;c.fireEvent("unsplit");a=true;return a}},0,0,0,0,0,0,[FBEditor.command,"SplitEditor"],0));(Ext.cmd.derive("FBEditor.command.UnsplitEditor",FBEditor.command.AbstractCommand,{execute:function(){var d=this,f=d.data,b=f.btn,c=f.editor,a=false;c.fireEvent("unsplit");a=true;return a},unExecute:function(){var d=this,f=d.data,b=f.btn,c=f.editor,a=false;c.fireEvent("split");a=true;return a}},0,0,0,0,0,0,[FBEditor.command,"UnsplitEditor"],0));(Ext.cmd.derive("FBEditor.converter.desc.Data",FBEditor.converter.AbstractConverter,{singleton:true,toForm:function(b){var a=this,c;c=a.normalize(b);c=a.convertPeriodical(c);c=a.convertTitle(c);c=a.convertRelations(c);c=a.convertClassification(c);c=a.convertWritten(c);c=a.convertDocumentInfo(c);c=a.convertPublishInfo(c);c=a.convertCustomInfo(c);c.lang=c.lang?c.lang:"ru";delete c.xml;return c},convertPeriodical:function(a){var b=a;if(b.periodical){b["periodical-id"]=b.periodical.id;b["periodical-number"]=b.periodical.number.number;b["periodical-year"]=b.periodical.number.year;b["periodical-date"]=b.periodical.number.date?b.periodical.number.date:"";b["periodical-text"]=b.periodical.number.text?b.periodical.number.text:"";b["periodical-issn"]=b.periodical.issn?b.periodical.issn:"";if(b.periodical.title){b["periodical-title-main"]=b.periodical.title.main;b["periodical-title-sub"]=b.periodical.title.sub?b.periodical.title.sub:"";b["periodical-title-alt"]=b.periodical.title.alt?b.periodical.title.alt:""}delete b.periodical}return b},convertTitle:function(b){var a=this,c=b;if(c.title){c["title-main"]=c.title.main?c.title.main:"";c["title-sub"]=c.title.sub?c.title.sub:"";c["title-alt"]=Ext.isString(c.title.alt)?{0:c.title.alt}:c.title.alt;delete c.title}return c},convertRelations:function(f){var c=this,g=f,a=FBEditor.view.form.desc.relations.subject.radio.Radio,b=a.numberGroup-1;if(g["fb3-relations"]){g.relations={"relations-subject":g["fb3-relations"].subject?g["fb3-relations"].subject:"","relations-object":g["fb3-relations"].object?g["fb3-relations"].object:""};g.relations["relations-subject"]=c._convertPropertyName(g.relations["relations-subject"],"relations-subject");g.relations["relations-object"]=c._convertPropertyName(g.relations["relations-object"],"relations-object");Ext.Object.each(g.relations["relations-subject"],function(d,h){h["relations-subject-link-radio-"+b]={};h["relations-subject-link-radio-"+b]["rel-subject-link-"+b]=h["relations-subject-link"];if(h["relations-subject-link"]!=="author"&&h["relations-subject-link"]!=="translator"&&h["relations-subject-link"]!=="publisher"){h["relations-subject-link-list"]=h["relations-subject-link"];h["relations-subject-link-radio-"+b]["rel-subject-link-"+b]="other-list"}delete h["relations-subject-link"];b++});delete g["fb3-relations"]}return g},convertClassification:function(b){var a=this,c=b;if(c["fb3-classification"]){if(c["fb3-classification"]["class"]){c["classification-class-contents"]=c["fb3-classification"]["class"].contents?c["fb3-classification"]["class"].contents:"";c["classification-class-text"]=c["fb3-classification"]["class"].text?c["fb3-classification"]["class"].text:""}c["classification-subject"]=a._convertValToObj(c["fb3-classification"].subject,"classification-subject");c["classification-udc"]=a._convertValToObj(c["fb3-classification"].udc,"classification-udc");c["classification-bbk"]=a._convertValToObj(c["fb3-classification"].bbk,"classification-bbk");if(c["fb3-classification"]["target-audience"]){c["classification-target-audience-text"]=c["fb3-classification"]["target-audience"].text?c["fb3-classification"]["target-audience"].text:"";c["classification-target-audience-education"]=c["fb3-classification"]["target-audience"].education?c["fb3-classification"]["target-audience"].education:"";c["classification-target-audience-age-min"]=c["fb3-classification"]["target-audience"]["age-min"]?c["fb3-classification"]["target-audience"]["age-min"]:"";c["classification-target-audience-age-max"]=c["fb3-classification"]["target-audience"]["age-max"]?c["fb3-classification"]["target-audience"]["age-max"]:""}if(c["fb3-classification"].setting){c["classification-setting-text"]=c["fb3-classification"].setting.text?c["fb3-classification"].setting.text:"";c["classification-setting-country"]=c["fb3-classification"].setting.country?c["fb3-classification"].setting.country:"";c["classification-setting-place"]=c["fb3-classification"].setting.place?c["fb3-classification"].setting.place:"";c["classification-setting-date"]=c["fb3-classification"].setting.date?c["fb3-classification"].setting.date:"";c["classification-setting-age"]=c["fb3-classification"].setting.age?c["fb3-classification"].setting.age:"";c["classification-setting-date-from"]=c["fb3-classification"].setting["date-from"]?c["fb3-classification"].setting["date-from"]:"";c["classification-setting-date-to"]=c["fb3-classification"].setting["date-to"]?c["fb3-classification"].setting["date-to"]:""}delete c["fb3-classification"]}return c},convertWritten:function(a){var b=a;if(b.written){b["written-lang"]=b.written.lang?b.written.lang:"";if(b.written.date){b["written-date-value"]=b.written.date.value?b.written.date.value:"";b["written-date-text"]=b.written.date.text?b.written.date.text:""}if(b.written["date-public"]){b["written-date-public-value"]=b.written["date-public"].value?b.written.date.value:"";b["written-date-public-text"]=b.written["date-public"].text?b.written.date.text:""}b["written-country"]=b.written.country?b.written.country:"";b["written-date-translation"]=b.written["date-translation"]?b.written["date-translation"]:"";delete b.written}if(b.translated){b["translated-value"]=b.translated.value?b.translated.value:"";b["translated-text"]=b.translated.text?b.translated.text:"";delete b.translated}return b},convertDocumentInfo:function(c){var a=this,f=c,b;if(f["document-info"]){if(f["document-info"].isbn){f["document-info-isbn"]=f["document-info"].isbn[0]?f["document-info"].isbn:{0:f["document-info"].isbn}}b=Ext.Date.format(new Date(),"Y-m-d")+"T"+Ext.Date.format(new Date(),"H:i:s");f["document-info"].created=f["document-info"].created?f["document-info"].created:b;f["document-info"].updated=f["document-info"].updated?f["document-info"].updated:b;f["document-info-created-date"]=f["document-info"].created.split("T")[0];f["document-info-created-time"]=f["document-info"].created.split("T")[1];f["document-info-updated-date"]=f["document-info"].updated.split("T")[0];f["document-info-updated-time"]=f["document-info"].updated.split("T")[1];f["document-info-program-used"]=f["document-info"]["program-used"]?f["document-info"]["program-used"]:"";f["document-info-src-url"]=f["document-info"]["src-url"]?f["document-info"]["src-url"]:"";f["document-info-ocr"]=f["document-info"].ocr?f["document-info"].ocr:"";f["document-info-editor"]=f["document-info"].editor?f["document-info"].editor:"";delete f["document-info"]}return f},convertPublishInfo:function(f){var c=this,g=f,a=g.xml,b;b=a.match(/<biblio-description>(.*?)<\/biblio-description>/g);if(b){g["paper-publish-info"]=g["paper-publish-info"][0]?g["paper-publish-info"]:{0:g["paper-publish-info"]};Ext.Object.each(g["paper-publish-info"],function(h,j){var d;if(j["biblio-description"]){d=b.shift();j["biblio-description"]=d.replace(/<\/?biblio-description>/g,"")}})}g["paper-publish-info"]=c._convertPropertyName(g["paper-publish-info"],"paper-publish-info");return g},convertCustomInfo:function(b){var a=this,c=b;c["custom-info"]=a._convertPropertyName(c["custom-info"],"custom-info");return c},_convertPropertyName:function(c,a){var f=c,b=a;f=f?f:"";f=f["0"]?f:{"0":f};Ext.Object.each(f,function(d,g){Ext.Object.each(g,function(h,j){if(Ext.isObject(j)&&!j["0"]){Ext.Object.each(j,function(m,l){f[d][b+"-"+h+"-"+m]=l})}else{f[d][b+"-"+h]=j}delete f[d][h]})});return f},_convertValToObj:function(f,a){var g=f,b=a,c;g=g?(Ext.isString(g)?[g]:g):"";c=g?{}:"";Ext.Object.each(g,function(d,h){c[d]={};c[d][b]=h});return c}},0,0,0,0,0,0,[FBEditor.converter.desc,"Data"],0));(Ext.cmd.derive("FBEditor.desc.Manager",Ext.Base,{singleton:true,url:"https://hub.litres.ru/pages/get_fb3_meta/",editorNames:["annotation","biblio-description","history","preamble"],loadUrl:null,saveUrl:null,loadingProcess:false,fb3DescId:"",fieldsError:[],cleanResultContainer:{},init:function(){var b=this,a=FBEditor.route.Manager,c;c=a.getParams();if(c.art){b.loadUrl=b.url+"?art="+c.art}else{if(c.desc){b.loadUrl=c.desc}else{if(c.desc===null){b.loadUrl="undefined"}}}b.saveUrl=c.save_desc||b.url||null},launch:function(){var a=this;if(a.isLoadUrl()){}},loadFromUrl:function(){var b=this,a=b.loadUrl;if(!Ext.getCmp("panel-empty")||!Ext.getCmp("panel-empty").rendered){Ext.defer(function(){b.loadFromUrl()},500);return}Ext.log({level:"info",msg:"Загрузка описания из "+a});Ext.Ajax.request({url:a,scope:this,success:function(c){b.responseLoad(c)},failure:function(c){b.responseLoad(c)}})},saveToUrl:function(b){var f=this,d=Ext.getCmp("panel-toolstab-file-button-savedesc"),c=FBEditor.route.Manager,a,h;h=c.getParams().art;if(h){a=f.getXml();Ext.log({level:"info",msg:"Сохранение описания в "+b});d.disable();try{Ext.Ajax.request({url:b,params:{action:"update_hub_on_fb3_meta",fb3_meta:a,art:h},disableCaching:true,success:function(k){var l,j;d.enable();if(k.responseXML){Ext.log({level:"info",msg:"Описание сохранено"});j=k.responseText;f.loadDataToForm(j)}else{l=k.responseText.match(/(unknown.*?)\n/ig);Ext.log({level:"error",msg:"Ошибка сохранения описания книги "+h,dump:l});l=l&&l.length?"<p>Ошибки:</p>"+l.join("</br></br>"):k.responseText;Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить описание книги по адресу "+b+l,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},failure:function(k){var j;j=k.statusText?" ("+k.statusText+")":"";d.enable();Ext.log({level:"error",msg:"Ошибка сохранения описания книги "+h,dump:k});Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить описание книги по адресу "+b+j,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}})}catch(g){Ext.log({level:"error",msg:"Ошибка сохранения описания книги",dump:g});Ext.Msg.show({title:"Ошибка",message:"Невозможно сохранить описание книги по адресу "+b+status,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}},getNewId:function(l){var f=this,g=10,b=[],h=l.fn,k=l.scope,a=l.url,j=l.property,c;for(c=0;c<g;c++){b.push(f.generateNewId())}try{Ext.Ajax.request({url:a,method:"GET",params:{uuid:b.join(",")},success:function(n){var p=JSON.parse(n.responseText),o=b[0],m;m=p[j]||[];Ext.Array.each(b,function(r){var q;q=Ext.Array.findBy(m,function(s){return s.uuid===r});if(!q){o=r;return false}});Ext.callback(h,k,[o])},failure:function(){Ext.callback(h,k,[b[0]])}})}catch(d){Ext.callback(h,k,[b[0]])}},getEditorNames:function(){return this.editorNames},loadDataToForm:function(d){var j=this,b=FBEditor.converter.desc.Data,h=Ext.getCmp("panel-main-content"),a=Ext.getCmp("form-desc"),k=j.getEditorNames(),f,c;try{if(h.isActiveItem("form-desc")){j.needShowForm=true;h.fireEvent("contentEmpty")}f=FBEditor.util.xml.Json.xmlToJson(d);f=f["fb3-description"];j.fb3DescId=f._id;f.xml=d;d=d.replace(/[\n\r\t]/g,"");f=b.toForm(f)}catch(g){if(j.needShowForm){h.fireEvent("contentBody");j.needShowForm=false;h.fireEvent("contentDesc")}throw g}c=j.isLoadUrl()?100:0;Ext.defer(function(){j.loadingProcess=true;Ext.Array.each(k,function(l){var o,m,p,n;n=new RegExp("<"+l+">(.*?)</"+l+">");p=d.match(n);p=p?"<desc:"+l+' xmlns:desc="http://www.fictionbook.org/FictionBook3/description">'+p[1]+"</desc:"+l+">":null;if(p){p='<?xml version="1.0" encoding="UTF-8"?>'+p;o=Ext.getCmp("form-desc-"+l).getBodyEditor();m=o.getManager();m.createContent(p)}});a.fireEvent("loadDesc",f);j.loadingProcess=false;if(FBEditor.accessHub){a.fireEvent("accessHub")}if(j.needShowForm){h.fireEvent("contentBody");j.needShowForm=false;h.fireEvent("contentDesc")}},c)},isLoadUrl:function(){var c=this,a=c.loadUrl,b;b=a&&a!=="undefined"?true:false;return b},getXml:function(a){var d=this,c=Ext.getCmp("form-desc"),b,f;f=a||c.getValues();f={"fb3-description":f};f["fb3-description"]._xmlns="http://www.fictionbook.org/FictionBook3/description";f["fb3-description"]._id=d.fb3DescId;f["fb3-description"]._version="1.0";b=FBEditor.util.xml.Json.jsonToXml(f);b=b.replace(d.getRegexpUtf(),"");b='<?xml version="1.0" encoding="UTF-8"?>'+b;console.log("xml desc",b);return b},getMetaXml:function(j){var h=this,c=Ext.getCmp("form-desc"),a=FBEditor.file.Manager,f,d,g,b;function k(m){var l=[];Ext.each(m,function(o){var n;if(o._link==="author"){n=o.title?o.title.main:o["last-name"];l.push(n)}});return l.join(", ")}d=j||c.getValues();g=a.fb3file?Number(a.fb3file.getStructure().getMeta().revision.__text):0;g=Ext.isNumber(g)?g+1:1;b={coreProperties:{__prefix:"cp","_xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","_xmlns:dc":"http://purl.org/dc/elements/1.1/","_xmlns:dcterms":"http://purl.org/dc/terms/","_xmlns:dcmitype":"http://purl.org/dc/dcmitype/","dc:title":d.title.main,"dc:creator":k(d["fb3-relations"].subject),"cp:revision":g,"cp:contentStatus":d["fb3-classification"]["class"]?d["fb3-classification"]["class"]._contents:"","cp:category":d["fb3-classification"]["class"]?d["fb3-classification"]["class"].__text:"","dcterms:modified":d["document-info"]._updated,"dcterms:created":d["document-info"]._created}};if(d.title&&d.title.sub){b.coreProperties["dc:subject"]=d.title.sub}if(d.annotation){b.coreProperties["dc:description"]=Ext.util.Format.stripTags(d.annotation)}console.log("save meta",b);f=FBEditor.util.xml.Json.jsonToXml(b);f='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+f;return f},generateNewId:function(){var a;a=Ext.data.identifier.Uuid.Global.generate();return a},getRegexpUtf:function(){var a;a=/[^\u0020-\u005E\u0060-\u007E\u00A0-\u02AF\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u0482\u048A-\u0513\u0531-\u0556\u055A-\u055F\u0561-\u0587\u0589-\u058A\u0591-\u05F4\u05D0-\u05EA\u05F0-\u05F4\u0606-\u06DC\u06EE-\u070D\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07C0-\u07EA\u07F6-\u07F9\u0904-\u0939\u0958-\u0961\u0964-\u0970\u097B-\u097F\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B6-\u09B9\u09DC-\u09DD\u09DF-\u09E1\u09E6-\u09FA\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0AE0-\u0AE1\u0AE6-\u0AEF\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B5C-\u0B5D\u0B5F-\u0B61\u0B66-\u0B71\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BE6-\u0BFA\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C66-\u0C6F\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CE0-\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0D66-\u0D6F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DC0-\u0DC6\u0E01-\u0E5B\u0E32-\u0E33\u0E3F-\u0E45\u0E4F-\u0E5B\u0E81-\u0E82\u0E87-\u0E88\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EC0-\u0EC4\u0ED0-\u0ED9\u0EDC-\u0EDD\u0F00-\u0F17\u0F1A-\u0F34\u0F3A-\u0F3D\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCF-\u0FD1\u1000-\u1021\u1023-\u1027\u1029-\u102A\u1040-\u1055\u10A0-\u10C5\u10D0-\u10FB\u1100-\u11FF\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u1399\u13A0-\u13F4\u1401-\u1676\u1681-\u169C\u16A0-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D4-\u17D6\u17D8-\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1800-\u180A\u1810-\u1819\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u1900-\u191C\u1944-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u19D0-\u19D9\u19DE-\u1A16\u1A1E-\u1A1F\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B6A\u1B74-\u1B7C\u1D00-\u1D2B\u1D62-\u1D77\u1D79-\u1D9A\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200E-\u200F\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205F\u2070-\u2071\u2074-\u208E\u20A0-\u20B5\u2100-\u214E\u2153-\u2184\u2190-\u23E7\u2400-\u2426\u2440-\u244A\u2460-\u269C\u2600-\u26FF\u2701-\u2704\u2706-\u2709\u270C-\u2727\u2729-\u274B\u274F-\u2752\u2758-\u275E\u2761-\u2794\u2798-\u27AF\u27B1-\u27BE\u27C0-\u27CA\u27D0-\u27EB\u27F0-\u2B1A\u2B20-\u2B23\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C6C\u2C74-\u2C77\u2C80-\u2CEA\u2CF9-\u2D25\u2D30-\u2D65\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E00-\u2E17\u2E1C-\u2E1D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3006-\u3029\u3036-\u303A\u303C-\u303F\u3041-\u3096\u309B-\u309C\u309F-\u30FB\u3105-\u318F\u3131-\u318E\u3190-\u31B7\u31C0-\u31CF\u31F0-\u321E\u3220-\u3243\u3250-\u32FE\u3300-\u3400\u4DC0-\u9FFF\uA000-\uA014\uA016-\uA48C\uA490-\uA4C6\uA700-\uA716\uA720-\uA721\uA800-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA840-\uA877\uA960-\uA97F\uAC00-\uD7AF\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1F-\uFB36\uFB38-\uFB3C\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3F\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFD\uFE10-\uFE19\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFF01-\uFF3E\uFF40-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC-\uFFFD\u10000-\u1000B\u1000D-\u10026\u10028-\u1003A\u1003C-\u1003D\u1003F-\u1004D\u10050-\u1005D\u10080-\u100FA\u10100-\u10102\u10107-\u10133\u10137-\u1018A\u10300-\u1031E\u10320-\u10323\u10330-\u1034A\u10380-\u1039D\u1039F-\u103C3\u103C8-\u103D5\u10400-\u1049D\u104A0-\u104A9\u10800-\u10805\u1080A-\u10835\u10837-\u10838\u10900-\u10919\u10A10-\u10A13\u10A15-\u10A17\u10A19-\u10A33\u10A40-\u10A47\u10A50-\u10A58\u12000-\u1236E\u12400-\u12462\u12470-\u12473\u1D000-\u1D0F5\u1D100-\u1D126\u1D12A-\u1D164\u1D16A-\u1D16C\u1D183-\u1D184\u1D18C-\u1D1A9\u1D1AE-\u1D1DD\u1D200-\u1D241\u1D300-\u1D356\u1D360-\u1D371\u1D400-\u1D454\u1D456-\u1D49C\u1D49E-\u1D49F\u1D4A5-\u1D4A6\u1D4A9-\u1D4AC\u1D4AE-\u1D4B9\u1D4BD-\u1D4C3\u1D4C5-\u1D505\u1D507-\u1D50A\u1D50D-\u1D514\u1D516-\u1D51C\u1D51E-\u1D539\u1D53B-\u1D53E\u1D540-\u1D544\u1D54A-\u1D550\u1D552-\u1D6A5\u1D6A8-\u1D7CB\u1D7CE-\u1D7FF\u2F800-\u2FA1D]/g;return a},responseLoad:function(a){var d=this,c=d.loadUrl,b,g;try{if(a&&a.responseText){b=a.responseText;d.loadDataToForm(b)}else{throw Error()}}catch(f){g=" ("+f+")";Ext.log({level:"error",msg:"Ошибка загрузки описания книги",dump:{response:a,error:f}});Ext.Msg.show({title:"Ошибка",message:"Невозможно загрузить описание книги по адресу "+c+g,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}},0,0,0,0,0,0,[FBEditor.desc,"Manager"],0));(Ext.cmd.derive("FBEditor.editor.CreateContent",Ext.Base,{content:null,constructor:function(content){var me=this,ce,ct;ce=function(el,attr,ch){return FBEditor.editor.Factory.createElement(el,attr,ch)};ct=function(text){return FBEditor.editor.Factory.createElementText(text)};eval("me.content = "+content)},getContent:function(){return this.content}},1,0,0,0,0,0,[FBEditor.editor,"CreateContent"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCommand",FBEditor.command.InterfaceCommand,{data:null,constructor:function(b){var a=this;a.data=b||{}},getData:function(){return this.data},getHistory:function(b){var a,c;a=b.getEditor();c=a.getHistory();return c},verifyElement:function(f,a){var g=this,d=f.getManager(),h=d.getSchema(),c,b;if(!f||f.isText||f.isUndefined||f.isStyleHolder&&f.isEmpty()){return true}b=d.content.getXml(true);c={el:f,debug:a};h.validXml({xml:b,callback:g.verifyResult,scope:g,scopeData:c})},verifyResult:function(d,c){var g=this,f=c.el,b,a;if(!d){a=f.getXml();g.unExecute();Ext.log({msg:"Полученная структура элемента не соответствует схеме:"+a,level:"info"});throw Error("Действие команды отменено для "+f.getName())}b=f.getManager();b.syncButtons()}},1,0,0,0,0,0,[FBEditor.editor.command,"AbstractCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.PasteCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),k=false,a={},f={},d={},m={},b=window.getSelection(),c,h;try{if(g.saveRange){f.node=g.saveRange.startNode.getElement();c=f.node.getManager();c.setCursor(g.saveRange)}h=b.getRangeAt(0);d={start:h.startOffset,end:h.endOffset};g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,collapsed:h.collapsed,offset:d};a.node=h.startContainer;f.node=a.node.getElement();c=f.node.getManager();c.setSuspendEvent(true);g.viewportId=a.node.viewportId;a.paste=g.html.querySelector("body");console.log("paste",a.paste,g);f.paste=c.createElementFromNode(a.paste);f.fragment=FBEditor.editor.Factory.createElement("div");f.paste.getOnlyStylesChildren(f.fragment);a.fragment=f.fragment.getNode(g.viewportId);if(f.node.isEmpty()){a.needEmpty=true;if(f.fragment.children[0].isStyleHolder){while(!f.node.isStyleHolder){a.node=a.node.parentNode;f.node=a.node.getElement()}}else{a.node=c.getDeepFirst(a.node);f.node=a.node.getElement()}}else{if(f.fragment.children[0].isStyleHolder){while(!f.node.isStyleHolder){a.node=a.node.parentNode;f.node=a.node.getElement()}m.isEnd=c.isLastNode(a.node,h.startContainer)&&h.startContainer.nodeValue.length===d.start;m.isStart=c.isFirstNode(a.node,h.startContainer)&&d.start===0}else{a.node=h.startContainer;f.node=a.node.getElement();m.isEnd=f.node.text.length===d.start;m.isStart=d.start===0}if(m.isStart){}else{if(m.isEnd){if(a.node.nextSibling){a.node=a.node.nextSibling}else{a.parent=a.node.parentNode;f.parent=a.parent.getElement();f.node=c.createEmptyElement();a.node=f.node.getNode(g.viewportId);f.parent.add(f.node);a.parent.appendChild(a.node)}}else{a.needJoin=true;a.container=h.startContainer;a.common=a.node.parentNode;f.common=a.common.getElement();a.node=c.splitNode(f,a,d.start);f.common.removeEmptyText()}}}a.parent=a.node.parentNode;f.parent=a.parent.getElement();a.fragmentFirst=a.fragment.firstChild;a.fragmentLast=a.fragment.lastChild;f.fragmentFirst=a.fragmentFirst.getElement();f.fragmentLast=a.fragmentLast.getElement();a.first=a.fragment.firstChild;f.first=a.first.getElement();while(a.first){f.first=a.first.getElement();f.parent.insertBefore(f.first,f.node);a.parent.insertBefore(a.first,a.node);a.first=a.fragment.firstChild}a.prev=a.fragmentFirst.previousSibling;f.prev=a.prev?a.prev.getElement():null;a.next=a.fragmentLast.nextSibling;f.next=a.next?a.next.getElement():null;if(f.prev&&f.prev.isText&&f.next&&f.next.isText&&f.fragmentFirst.isText&&f.fragmentFirst.elementId===f.fragmentLast.elementId){a.needReplaceText=f.prev.text+f.next.text;a.cursor=a.prev;d.cursor=f.prev.text.length+f.fragmentFirst.text.length;f.textValue=f.prev.text+f.fragmentFirst.text+f.next.text;f.prev.setText(f.textValue);a.prev.nodeValue=f.textValue;f.parent.remove(f.fragmentFirst);a.parent.removeChild(a.fragmentFirst);f.parent.remove(f.next);a.parent.removeChild(a.next);f.next=null}else{if(f.prev&&f.prev.isText&&f.fragmentFirst.isText){a.needSplitFirst=true;f.textValue=f.prev.text+f.fragmentFirst.text;f.prev.setText(f.textValue);a.prev.nodeValue=f.textValue;f.parent.remove(f.fragmentFirst);a.parent.removeChild(a.fragmentFirst);a.cursor=a.fragmentLast.parentNode?c.getDeepLast(a.fragmentLast):a.prev}}if(f.next&&f.next.isText&&f.fragmentLast.isText){a.needSplitLast=true;f.textValue=f.fragmentLast.text+f.next.text;f.next.setText(f.textValue);a.next.nodeValue=f.textValue;f.parent.remove(f.fragmentLast);a.parent.removeChild(a.fragmentLast);a.cursor=a.next;d.cursor=f.fragmentLast.text.length}if(f.node.isEmpty()){f.parent.remove(f.node);a.parent.removeChild(a.node)}f.parent.sync(g.viewportId);c.setSuspendEvent(false);a.cursor=a.cursor||c.getDeepLast(a.fragmentLast);d.cursor=d.cursor?d.cursor:(a.cursor.nodeValue?a.cursor.nodeValue.length:0);c.setCursor({startNode:a.cursor,startOffset:d.cursor});g.nodes=a;g.els=f;l.verifyElement(f.parent);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(f.parent).removeNext()}c.setSuspendEvent(false);return k},unExecute:function(){var k=this,d=k.getData(),a={},c={},j=false,f=FBEditor.editor.Factory,b,g;try{g=d.range;a=d.nodes;c=d.els;a.cursor=g.start;b=c.parent.getManager();b.setSuspendEvent(true);console.log("undo paste",a,g,c);if(a.needReplaceText){c.prev.setText(a.needReplaceText);a.prev.nodeValue=a.needReplaceText;a.cursor=a.prev;c.prev.sync(d.viewportId)}else{if(a.needSplitFirst){c.startTextValue=c.prev.text.substring(0,g.offset.start);c.endTextValue=c.prev.text.substring(g.offset.start);c.t=f.createElementText(c.startTextValue);a.t=c.t.getNode(d.viewportId);a.fragmentFirst=a.prev;c.fragmentFirst=c.prev;c.fragmentFirst.setText(c.endTextValue);a.fragmentFirst.nodeValue=c.endTextValue;c.parent.insertBefore(c.t,c.fragmentFirst);a.parent.insertBefore(a.t,a.fragmentFirst);a.cursor=a.t}if(a.needSplitLast){c.startTextValue=c.next.text.substring(0,g.offset.cursor);c.endTextValue=c.next.text.substring(g.offset.cursor);c.fragmentLast=f.createElementText(c.startTextValue);a.fragmentLast=c.fragmentLast.getNode(d.viewportId);c.next.setText(c.endTextValue);a.next.nodeValue=c.endTextValue;c.parent.insertBefore(c.fragmentLast,c.next);a.parent.insertBefore(a.fragmentLast,a.next)}a.next=a.fragmentFirst;c.next=a.next.getElement();while(c.next&&c.next.elementId!==c.fragmentLast.elementId){a.buf=a.next.nextSibling;c.parent.remove(c.next);a.parent.removeChild(a.next);a.next=a.buf;c.next=a.next?a.next.getElement():null}if(c.next){c.parent.remove(c.next);a.parent.removeChild(a.next)}if(a.needJoin){b.joinNode(a.node)}if(a.needEmpty){c.parent.add(c.node);a.parent.appendChild(a.node)}c.parent.sync(d.viewportId)}b.setSuspendEvent(true);d.saveRange={startNode:a.cursor,startOffset:g.offset.start};b.setCursor(d.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).remove()}b.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command,"PasteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.RemoveNodesCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var n=this,j=n.getData(),m=false,g={},a={},f={},o={},c={},b=window.getSelection(),h=FBEditor.editor.Factory,d,k;try{if(j.saveRange){g.node=j.saveRange.startNode.getElement();d=g.node.getManager();d.setCursor(j.saveRange)}k=b.getRangeAt(0);if(k.collapsed){throw Error("Отсутствует выделение")}a.common=k.commonAncestorContainer;g.common=a.common.getElement();d=g.common.getManager();d.setSuspendEvent(true);j.viewportId=a.common.viewportId;f={start:k.startOffset,end:k.endOffset};j.range={common:k.commonAncestorContainer,start:k.startContainer,end:k.endContainer,parentStart:k.commonAncestorContainer.parentNode,collapsed:k.collapsed,offset:f};console.log("remove nodes ",j.range);a.first=k.startContainer;g.first=a.first.getElement();g.commonId=g.common.elementId;while(g.first&&g.first.parent.elementId!==g.commonId){a.first=g.isRoot?a.first.firstChild:a.first.parentNode;g.first=a.first?a.first.getElement():null}a.last=k.endContainer;g.last=a.last.getElement();while(g.last&&g.last.parent.elementId!==g.commonId){a.last=g.isRoot?a.last.lastChild:a.last.parentNode;g.last=a.last?a.last.getElement():null}c.start=new RegExp("^"+Ext.String.escapeRegex(k.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(g.first.getText()));c.end=new RegExp(Ext.String.escapeRegex(k.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(g.last.getText())+"$");o.isStart=c.start.test(g.first.getText())||c.start2.test(k.toString());o.isEnd=c.end.test(g.last.getText())||c.end2.test(k.toString());j.range.pos=o;if(!o.isStart){a.container=k.startContainer;a.start=d.splitNode(g,a,f.start)}else{a.start=a.first}if(!o.isEnd){a.container=k.endContainer;a.end=d.splitNode(g,a,f.end);a.cursor=a.end;a.startCursor=0;a.end=a.end.previousSibling}else{a.end=a.last;if(a.start.previousSibling){a.cursor=d.getDeepFirst(a.start.previousSibling);a.startCursor=a.cursor.nodeValue?a.cursor.nodeValue.length:0}}g.start=a.start.getElement();g.end=a.end.getElement();a.parent=a.common;g.parent=g.common;g.removed=[];a.removed=[];a.next=a.start;g.next=a.next.getElement();while(g.next&&g.next.elementId!==g.end.elementId){g.removed.push(g.next);a.removed.push(a.next);a.buf=a.next.nextSibling;g.parent.remove(g.next);a.parent.removeChild(a.next);a.next=a.buf;g.next=a.next?a.next.getElement():null}a.nextCursor=a.next.nextSibling?a.next.nextSibling:null;g.removed.push(g.next);a.removed.push(a.next);g.parent.remove(g.next);a.parent.removeChild(a.next);a.first=a.parent.firstChild;if(!a.first){g.isEmpty=true;g.p=d.createEmptyP();g.newEl=g.p;if(g.parent.isRoot&&!g.parent.isDesc){g.s=h.createElement("section");g.s.add(g.p);g.newEl=g.s}a.newEl=g.newEl.getNode(j.viewportId);g.parent.add(g.newEl);a.parent.appendChild(a.newEl);a.cursor=d.getDeepFirst(a.newEl);a.startCursor=0}g.parent.sync(j.viewportId);d.setSuspendEvent(false);d.setCursor({startNode:a.cursor,startOffset:a.startCursor});j.nodes=a;j.els=g;n.verifyElement(g.parent);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});console.log("nodes",a);n.getHistory(g.parent).removeNext()}d.setSuspendEvent(false);return m},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;b=h.nodes;d=h.els;c=d.parent.getManager();c.setSuspendEvent(true);console.log("undo remove nodes ",h,b);if(d.isEmpty){d.parent.remove(d.newEl);b.parent.removeChild(b.newEl);b.nextCursor=null}Ext.Array.each(b.removed,function(k){if(b.nextCursor){d.nextCursor=b.nextCursor.getElement();d.parent.insertBefore(k.getElement(),d.nextCursor);b.parent.insertBefore(k,b.nextCursor)}else{d.parent.add(k.getElement());b.parent.appendChild(k)}});if(!a.pos.isStart){b.prev=b.removed[0].previousSibling;c.joinNode(b.removed[0]);c.removeEmptyNodes(b.prev)}if(!a.pos.isEnd){c.joinNode(b.nextCursor);c.removeEmptyNodes(b.removed[b.removed.length-1])}d.parent.sync(h.viewportId);c.suspendEvent=false;h.saveRange={startNode:a.start,endNode:a.end,startOffset:a.offset.start,endOffset:a.offset.end};h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command,"RemoveNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractElementController",Ext.Base,{el:null,createFromRange:false,constructor:function(c){var d=this,b={},a,g;d.el=c;for(g in d){if(Ext.isFunction(d[g])&&/^on[A-Z]/.test(g)){a=g.replace(/^on/,"");a=Ext.String.uncapitalize(a);b[a]=function(j,h){var f=h,k=j;return function(){f[k].apply(f,arguments)}}(g,d)}}c.listeners=b;c.mixins.observable.constructor.call(c,{})},onCreateElement:function(h,f){var d=this,b,g,a,c;if(h&&!h.getRangeAt(0).collapsed&&d.createFromRange){d.createRangeElement(h,f)}else{c=d.getNodeVerify(h,f);if(c){a=d.getNameElement();g=Ext.create("FBEditor.editor.command."+a+".CreateCommand",{node:c,sel:h,opts:f});if(g.execute()){b=c.getElement();d.getHistory(b).add(g)}}}},createRangeElement:function(g,d){var c=this,b,a,f;if(c.checkRangeVerify(g)){a=c.getNameElement();f=Ext.create("FBEditor.editor.command."+a+".CreateRangeCommand",{sel:g,opts:d});if(f.execute()){b=g.getRangeAt(0).startContainer.getElement();c.getHistory(b).add(f)}}},onInsertElement:function(d,g){var c=this,f,a,b;g=g||false;b=d.getElement();a=b.getName();if(!g){f=Ext.create("FBEditor.editor.command."+a+".SplitCommand",{node:d})}else{f=Ext.create("FBEditor.editor.command."+a+".CreateCommand",{prevNode:d})}if(f.execute()){c.getHistory(b).add(f)}},onSplitElement:function(d,h){var l=this,j=FBEditor.editor.Factory,g={},c={},f,b,k,a,m;h=h||false;c.node=d;g.node=c.node.getElement();f=g.node.getManager();if(g.node.splittable){g.root=g.node.getRoot();c.parent=c.node.parentNode;g.parent=c.parent.getElement();b=g.node.getName();g.newEl=j.createElement(b);g.newEl.createScaffold();m=g.parent.getChildPosition(g.node)+1;g.parent.children.splice(m,0,g.newEl);k=g.root.getXml(true);g.parent.children.splice(m,1);a=f.getSchema();a.validXml({xml:k,callback:function(n){if(n){g.node.fireEvent("insertElement",c.node,h)}},scope:l})}else{c.node=c.node.parentNode;g.node=c.node.getElement?c.node.getElement():null;if(g.node&&!g.node.isRoot){g.node.fireEvent("splitElement",c.node,h)}}},onKeyUp:function(g){var f=this,d,c,a,b;g.stopPropagation();d=f.getFocusNode(g.target);c=d.getElement?d.getElement():null;if(c){b=c.getManager();b.setFocusElement(c);a=c&&c.controller?c.controller:f;switch(g.keyCode){case Ext.event.Event.UP:return a.onKeyUpUp(g);case Ext.event.Event.DOWN:return a.onKeyUpDown(g);default:return a.onKeyUpDefault(g)}}return false},onKeyUpDefault:function(a){},onKeyUpUp:function(a){},onKeyUpDown:function(a){},onKeyPress:function(a){},onKeyPressDefault:function(a){},onKeyDown:function(f){var d=this,c,b,a;f.stopPropagation();c=d.getFocusNode(f.target);b=c.getElement?c.getElement():null;if(b){a=b&&b.controller?b.controller:d;switch(f.keyCode){case Ext.event.Event.ENTER:if(f.shiftKey){return a.onKeyDownShiftEnter(f)}else{if(f.ctrlKey){return a.onKeyDownCtrlEnter(f)}}return a.onKeyDownEnter(f);case Ext.event.Event.DELETE:return a.onKeyDownDelete(f);case Ext.event.Event.BACKSPACE:return a.onKeyDownBackspace(f);case Ext.event.Event.LEFT:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlLeft(f)}else{if(f.shiftKey){return a.onKeyDownShiftLeft(f)}}return a.onKeyDownLeft(f);case Ext.event.Event.UP:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlUp(f)}else{if(f.shiftKey){return a.onKeyDownShiftUp(f)}}return a.onKeyDownUp(f);case Ext.event.Event.RIGHT:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlRight(f)}else{if(f.shiftKey){return a.onKeyDownShiftRight(f)}}return a.onKeyDownRight(f);case Ext.event.Event.DOWN:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlDown(f)}else{if(f.shiftKey){return a.onKeyDownShiftDown(f)}}return a.onKeyDownDown(f);case Ext.event.Event.Z:if(f.ctrlKey&&f.shiftKey){return a.onKeyDownCtrlShiftZ(f)}else{if(f.ctrlKey){return a.onKeyDownCtrlZ(f)}}return false;case Ext.event.Event.A:if(f.ctrlKey){return a.onKeyDownCtrlA(f)}return false;case Ext.event.Event.HOME:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlHome(f)}else{if(f.ctrlKey){return a.onKeyDownCtrlHome(f)}}return false;case Ext.event.Event.END:if(f.shiftKey&&f.ctrlKey){return a.onKeyDownShiftCtrlEnd(f)}else{if(f.ctrlKey){return a.onKeyDownCtrlEnd(f)}}return false;default:return a.onKeyDownDefault(f)}}},onKeyDownDefault:function(g){var d=this,f=g.target,b,a,c;c=f.getElement?f.getElement():null;if(c){b=c.getManager();a=b.getKeymap();a.key(g)}},onKeyDownShiftEnter:function(d){var c=this,b,a;d.preventDefault();b=c.getFocusNode(d.target);a=b.getElement?b.getElement():null;a.fireEvent("splitElement",b,false);return false},onKeyDownCtrlEnter:function(d){var c=this,b,a;d.preventDefault();b=c.getFocusNode(d.target);a=b.getElement?b.getElement():null;a.fireEvent("splitElement",b,true);return false},onKeyDownEnter:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownEnter",f)}},onKeyDownDelete:function(b){var a=this;b.preventDefault();a.removeNodes()},onKeyDownBackspace:function(b){var a=this;b.preventDefault();a.removeNodes()},onKeyDownLeft:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownLeft",f)}},onKeyDownUp:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownUp",f)}},onKeyDownRight:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownRight",f)}},onKeyDownDown:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownDown",f)}},onKeyDownShiftCtrlLeft:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlLeft",f)}},onKeyDownShiftCtrlRight:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlRight",f)}},onKeyDownShiftCtrlUp:function(a){},onKeyDownShiftCtrlDown:function(a){},onKeyDownShiftLeft:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftLeft",f)}},onKeyDownShiftRight:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftRight",f)}},onKeyDownShiftUp:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftUp",f)}},onKeyDownShiftDown:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftDown",f)}},onKeyDownCtrlA:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownCtrlA",f)}},onKeyDownShiftCtrlHome:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlHome",f)}},onKeyDownShiftCtrlEnd:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.endContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownShiftCtrlEnd",f)}},onKeyDownCtrlHome:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownCtrlHome",f)}},onKeyDownCtrlEnd:function(f){var c=this,d=window.getSelection(),b={},a;a=d.getRangeAt(0);b.node=a.startContainer.getElement();b.p=b.node.getStyleHolder();if(b.p&&!c.getElement().equal(b.p)){b.p.fireEvent("keyDownCtrlEnd",f)}},onKeyDownCtrlZ:function(b){var a=this;b.preventDefault();a.getHistory().undo();return false},onKeyDownCtrlShiftZ:function(b){var a=this;b.preventDefault();a.getHistory().redo();return false},onMouseDown:function(a){},onMouseUp:function(f){var d=this,a,c,b;c=d.getFocusNode(f.target);b=c.getElement?c.getElement():null;a=b?b.getManager():null;if(a){a.setFocusElement(b)}},onMouseMove:function(a){},onFocus:function(a){},onNodeInserted:function(l){var m=this,b=l.relatedNode,d=l.target,n=b.viewportId,h=FBEditor.editor.Factory,f,c,g,a,j,k;f=b.getElement?b.getElement().getManager():null;if(b.firstChild.nodeName!=="MAIN"&&f&&!f.isSuspendEvent()){l.stopPropagation();if(d.nodeType===Node.TEXT_NODE){c=h.createElementText(d.nodeValue)}else{c=h.createElement(d.localName)}d.viewportId=n;c.setNode(d);g=d.nextSibling;a=d.previousSibling;j=b.getElement();if(g){k=g.getElement();console.log("new insert, nextSibling",g);j.insertBefore(c,k)}else{if(a){j.add(c);console.log("new add, previousSibling",a)}else{console.log("new add",j,c.elementId,c);j.add(c)}}j.sync(n);f.setFocusElement(c)}},onNodeRemoved:function(j){var f=this,d=j.relatedNode,h=j.target,g=d.viewportId,a,c,b;if(h.getElement&&d.firstChild&&d.firstChild.nodeName!=="MAIN"){c=d.getElement();b=h.getElement();a=b.getManager();if(!a.isSuspendEvent()){j.stopPropagation();console.log("DOMNodeRemoved:",h,d.outerHTML);c.remove(b);c.sync(g)}}},onDrop:function(a){a.preventDefault()},onPaste:function(a){a.preventDefault();a.stopPropagation()},onBeforeCopy:function(d){var c=this,b=c.getElement(),a;d.stopPropagation();a=b.getRoot();a.beforeCopy()},onCopy:function(d){var c=this,b=c.getElement(),a;d.stopPropagation();a=b.getRoot();Ext.defer(function(){a.afterCopy()},10)},onScroll:function(a){},removeNodes:function(){var a=this,b;b=Ext.create("FBEditor.editor.command.RemoveNodesCommand");if(b.execute()){a.getHistory().add(b)}},getElement:function(){return this.el},getNameElement:function(){var a=this;return a.getElement().getName()},getNodeVerify:function(f,b){var m=this,j={},d={},g,l,a,c,k,h;f=f||window.getSelection();k=f.getRangeAt(0);d.node=k.endContainer;j.node=d.node.getElement();d.node=j.node.isText||j.node.hisName(g.emptyElement)?d.node.parentNode:d.node;j.node=d.node.getElement();d.parent=d.node.parentNode;j.parent=d.parent.getElement();h=m.getNameElementsVerify(d);g=j.node.getManager();a=g.getSchema();c=j.parent.getName();console.log("name, nameElements",c,h);l=a.verify(c,h)?d.node:false;return l},getNameElementsVerify:function(b){var g=this,f={},d,a,c;c=g.getNameElement();b.node=b.parent.getElement().xmlTag===c?b.parent:b.node;b.parent=b.node.parentNode;f.parent=b.parent.getElement();d=f.parent.getManager();a=d.getNamesElements(f.parent);a.unshift(c);return a},getFocusNode:function(f){var c=this,d=window.getSelection(),b=f,a;a=d&&d.rangeCount?d.getRangeAt(0):null;if(a&&b.nodeName!=="IMG"){b=a.commonAncestorContainer.nodeType===Node.TEXT_NODE?a.commonAncestorContainer.parentNode:a.commonAncestorContainer}return b},getHistory:function(a){var c=this,b=a||c.getElement(),d;d=b.getHistory();return d},enableAllEditable:function(){var b=this,a={};a.pp=document.querySelectorAll(".el-styleholder[contenteditable=false]");Ext.Array.each(a.pp,function(c){c.setAttribute("contenteditable",true)})}},1,0,0,0,0,0,[FBEditor.editor.element,"AbstractElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractSelection",Ext.Base,{el:null,constructor:function(a){var b=this;b.el=a},execute:function(){throw Error("Не реализован метод FBEditor.editor.element.AbstractSelection#execute")},isActive:function(){throw Error("Не реализован метод FBEditor.editor.element.AbstractSelection#isActive")}},1,0,0,0,0,0,[FBEditor.editor.element,"AbstractSelection"],0));(Ext.cmd.derive("FBEditor.editor.helper.element.Node",Ext.Base,{el:null,constructor:function(a){var b=this;b.el=a},getNode:function(d){var c=this,a=c.el,b;b=d?a.nodes[d]:Ext.Object.getValues(a.nodes)[0];return b},getXY:function(n,c){var k=this,h=c,d=k.el,f=k.getNode(n),g=d.getManager(),b={},a,m,l;l={};if(d.isText){a=d.getMapCoords();h=h>d.getText().length?d.getText().length:h;if(!a){b.chars=[];b.fragment=document.createDocumentFragment();b.wrap=document.createElement("span");for(var j=0;j<d.text.length;j++){b.span=document.createElement("span");b.t=document.createTextNode(d.text[j]);b.span.appendChild(b.t);b.wrap.appendChild(b.span);b.chars.push(b.span)}b.fragment.appendChild(b.wrap);g.setSuspendEvent(true);b.parent=f.parentNode;b.parent.insertBefore(b.fragment,f);f.nodeValue="";a=[];for(j=0;j<d.text.length;j++){b.cur=b.chars[j];m=b.cur.getBoundingClientRect();l={x:m.left+Math.round((m.right-m.left)/2),y:m.top,w:m.right-m.left,h:m.bottom-m.top};a.push(l);d.setMapCoords(a)}b.cur=b.wrap.lastChild;m=b.cur.getBoundingClientRect();l={x:m.right,y:m.top,w:m.right-m.left,h:m.bottom-m.top};a.push(l);b.parent.removeChild(b.wrap);f.nodeValue=d.text;g.setSuspendEvent(false)}l=a[h]}else{m=f.firstChild&&f.firstChild.getBoundingClientRect?f.firstChild.getBoundingClientRect():f.getBoundingClientRect();l={x:m.left,y:m.top,w:m.right-m.left,h:m.bottom-m.top}}return l},splitNode:function(j){var h=this,f=h.el,g=h.getNode(j),d=f.children,a={},c=f.getManager();if(d.length){f.each(function(k){k.getNodeHelper().splitNode(j)})}else{if(f.isText){a.fragment=document.createDocumentFragment();a.wrap=document.createElement("span");for(var b=0;b<f.text.length;b++){a.span=document.createElement("span");a.span.setAttribute("data-offset",b);a.span.getTextElement=function(){return f};a.t=document.createTextNode(f.text[b]);a.span.appendChild(a.t);a.wrap.appendChild(a.span)}a.span=document.createElement("span");a.span.setAttribute("data-offset",b);a.span.getTextElement=function(){return f};a.t=document.createTextNode(" ");a.span.appendChild(a.t);a.wrap.appendChild(a.span);a.fragment.appendChild(a.wrap);c.setSuspendEvent(true);a.parent=g.parentNode;a.parent.insertBefore(a.fragment,g);g.nodeValue="";c.setSuspendEvent(false)}}},joinNode:function(h){var g=this,d=g.el,f=g.getNode(h),c=d.children,a={},b=d.getManager();if(c.length){d.each(function(j){j.getNodeHelper().joinNode(h)})}else{if(d.isText){b.setSuspendEvent(true);a.parent=f.parentNode;a.wrap=f.previousSibling;a.parent.removeChild(a.wrap);f.nodeValue=d.text;b.setSuspendEvent(false)}}}},1,0,0,0,0,0,[FBEditor.editor.helper.element,"Node"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractElement",Ext.Base,{controllerClass:"FBEditor.editor.element.AbstractElementController",controllerClassWebkit:"",selectionClass:"",customListeners:{keydown:"onKeyDown",keyup:"onKeyUp",keypress:"onKeyPress",mouseup:"onMouseUp",mousedown:"onMouseDown",mousemove:"onMouseMove",DOMNodeInserted:"onNodeInserted",DOMNodeRemoved:"onNodeRemoved",DOMCharacterDataModified:"onTextModified",drop:"onDrop",paste:"onPaste",beforecopy:"onBeforeCopy",copy:"onCopy",scroll:"onScroll",focus:"onFocus"},splittable:false,htmlTag:"",xmlTag:"",style:"",baseCls:"",cls:"",children:[],parent:null,marker:null,attributes:{},elementId:"",prefixId:"editor-el",showedOnTree:true,treePath:"",constructor:function(a,b){var d=this,c=[];b=b||d.children;d.elementId=Ext.id({prefix:d.prefixId});Ext.Array.each(b,function(g,f){g.parent=d;if(g.isMarker){d.marker=g}else{c.push(g)}});d.children=c;d.attributes=Ext.clone(a)||d.attributes;d.attributes=d.defaultAttributes?Ext.applyIf(a,d.defaultAttributes):d.attributes;d.createController()},equal:function(b){var c=this,a;a=b.elementId===c.elementId;return a},add:function(a){var b=this;if(a.parent){a.parent.remove(a)}a.parent=b;if(a.isMarker){b.marker=a}else{b.children.push(a)}},insertBefore:function(c,a){var d=this,b=d.children,f=d.getChildPosition(a);if(c.parent){c.parent.remove(c)}c.parent=d;b.splice(f,0,c);d.children=b},replace:function(b,d){var c=this,a=c.children,f=c.getChildPosition(d);if(b.parent){b.parent.remove(b)}b.parent=c;c.remove(d);a.splice(f,1,b);c.children=a},remove:function(c){var d=this,a=d.children,f,b;if(c){f=d.getChildPosition(c);if(f!==null){if(!b){c.clear()}a.splice(f,1);d.children=a}}},first:function(){var b=this,a=b.children,c;c=a.length?a[0]:null;return c},last:function(){var c=this,a=c.children,b;b=a.length?a[a.length-1]:null;return b},prev:function(){var c=this,a=c.parent,d,b;if(!a){return null}d=a.getChildPosition(c);b=(d-1)>=0&&a.children[d-1]?a.children[d-1]:null;return b},next:function(){var c=this,b=c.parent,d,a;if(!b){return null}d=b.getChildPosition(c);a=b.children[d+1]?b.children[d+1]:null;return a},removeAll:function(){var c=this,a=c.children,b;while(a.length){b=a[0];c.remove(b)}},each:function(a){Ext.Array.each(this.children,a)},clear:function(){},clone:function(g){var f=this,d=f.children,b=FBEditor.editor.Factory,h,a,c;a=g&&g.ignoredText?true:false;c=g&&g.ignoredDeep?true:false;if(f.isText&&a){return null}h=f.isText?b.createElementText(f.text):b.createElement(f.getName());if(!c){Ext.Array.each(d,function(k){var j=k.clone(g);if(j){h.add(j)}})}return h},setNode:function(b){var a=this;a.setStyleHtml();b=a.setAttributesHtml(b);b=a.setEvents(b);b.getElement=function(){return a};a.createSelection(b);a.nodes=a.nodes||{};a.nodes[b.viewportId]=b;if(a.isHide){a.hide()}},getNode:function(f){var d=this,b=d.children,a=d.htmlTag,c;c=document.createElement(a);c.viewportId=f;d.setNode(c);if(d.marker){c.appendChild(d.marker.getNode(f))}if(b&&b.length){Ext.Array.each(b,function(g){c.appendChild(g.getNode(f))})}return c},removeNodes:function(c){var b=this,a=b.children;delete b.nodes[c];if(a.length){Ext.Array.each(a,function(d){d.removeNodes(c)})}},selectNode:function(f,j){var h=this,g=h.nodes[j],a=h.cls,c=h.getManager(),b=c.selectCls,d;d=new RegExp(b);if(!d.test(a)&&f){a=a+" "+b;g.setAttribute("class",a)}if(d.test(a)&&!f){a=a.replace(" "+b,"");g.setAttribute("class",a)}h.cls=a},getXml:function(c){var g=this,f=g.children,b=g.xmlTag,d,a;a=g.getAttributesXml(c);d="<"+b;d+=a?" "+a:"";if(g.marker){d+=">"+g.marker.getXml(c)}if(f&&f.length){d+=g.marker?"":">";Ext.Array.each(f,function(h){d+=h.getXml(c)});d+="</"+b+">"}else{d+=g.marker?"</"+b+">":"/>"}return d},getData:function(){var c=this,b,d,a;b=Ext.Object.getValues(c.nodes)[0];a=c.getBlock();d={el:a,elementName:a.xmlTag,htmlPath:c.getHtmlPath(b)};Ext.Object.each(a.attributes,function(f,g){d[f]=g?g:""});return d},sync:function(d){var c=this,b=c.getManager(),a;b.setSuspendEvent(true);Ext.Object.each(c.nodes,function(g,f){if(g!==d){a=c.getNode(g);f.parentNode.replaceChild(a,f)}});b.setSuspendEvent(false)},update:function(g,f){var d=this,b={},a=null,c=/^marker-/;f=f||{};if(g.marker&&g.marker==="true"){a={};delete g.marker}Ext.Object.each(g,function(h,j){if(!c.test(h)){b[h]=j}else{if(a){a[h.replace(c,"")]=j}}});if(a){if(d.marker){d.updateMarker(a)}else{d.createMarker(a)}}else{d.removeMarker()}d.attributes=d.defaultAttributes?Ext.clone(d.defaultAttributes):{};Ext.Object.each(b,function(h,j){if(j){d.attributes[h]=j}});if(!f.withoutView){d.updateView()}},updateView:function(){var c=this,b=c.getManager(),f,d,a;c.style="";f=Ext.Object.getKeys(c.nodes)[0];d=c.nodes[f];b.setSuspendEvent(true);a=c.getNode(f);d.parentNode.replaceChild(a,d);c.sync(f);b.setSuspendEvent(false)},setEvents:function(a){var c=this,b=c.customListeners;Ext.Object.each(b,function(d,f){if(c.controller[f]){a.addEventListener(d,function(g){c.controller[f](g)},false)}});return a},getName:function(){return this.xmlTag},getRoot:function(){var b=this,a=b.isRoot?b:b.parent;while(a&&!a.isRoot){a=a.parent}return a},getBlock:function(){var a=this;while(a.isStyleType||a.isText){a=a.parent}return a},getHtmlPath:function(f,g){var d=this,b,a,c;a=f&&f.parentNode?f.parentNode:null;b=f&&f.nodeType!==Node.TEXT_NODE?f.nodeName:"";c=b+(g?" > "+g:"");if(b!=="MAIN"&&a){c=d.getHtmlPath(a,c)}return c},getChildrenCountByProp:function(a,b){var d=this,c=0;Ext.Array.each(d.children,function(f){if(f[a]===b){c++}});return c},getChildPosition:function(b){var c=this,a=c.children,d=null;if(!b.elementId){console.error(b);return null}Ext.Array.each(a,function(g,f){if(b.elementId===g.elementId){d=f;return false}});return d},getSelection:function(){return this.selection},getEditor:function(){var c=this,a,b;a=c.getRoot();b=a?a.getEditor():null;return b},getHistory:function(){var b=this,a=b.getEditor(),c;c=a.getHistory();return c},getManager:function(){var c=this,b,a;b=c.getEditor?c.getEditor():null;a=b?b.getManager():null;return a},getNodeHelper:function(){return this.nodeHelper||this.createNodeHelper()},createScaffold:function(){var b=this,a={};a.node=b;return a},getText:function(){var b=this,a,c;a=Ext.Object.getValues(b.nodes)[0];c=a?a.textContent||a.innerText:"";return c||""},getNameTree:function(){var b=this,a;a="&lt;"+b.xmlTag+"&gt;";if(b.children.length&&b.children[0].xmlTag==="title"){a+=" "+b.children[0].getText()}return a},removeView:function(){var a=this;Ext.Object.each(a.nodes,function(d,c){var b=c.parentNode;if(b){b.removeChild(c)}});a.nodes={}},hisName:function(a){var c=this,b;b=c.xmlTag===a;return b},hasParentName:function(a){var c=this,b=c.parent;while(b){if(b.hisName(a)){return true}b=b.parent}return false},getParentName:function(a){var c=this,b=c.parent;while(b){if(b.hisName(a)){return b}b=b.parent}return null},getStyleHolder:function(){var b=this,a=b;while(a&&!a.isStyleHolder){a=a.parent?a.parent:null}return a},getDeepFirst:function(){var b=this,a=b;while(a.first()){a=a.first()}return a},getDeepLast:function(){var b=this,a=b;while(a.last()){a=a.last()}return a},isEmpty:function(){var a=this;if(!a.children.length){return true}if(a.children.length===1){return a.children[0].isEmpty()}else{return false}},removeEmptyText:function(c){var b=this,a=b.children,f=0,d;while(f<a.length){d=a[f];if(d.isText&&d.isEmpty()||c&&d.isStyleHolder&&!d.children.length){b.remove(d);d.removeView()}else{d.removeEmptyText(c);f++}}},clearMapCoords:function(){var a=this;a.each(function(b){b.clearMapCoords()})},hide:function(){var b=this,a=b.nodes;b.isHide=true;Ext.Object.each(a,function(c,d){b.styleDisplay=d.style.display;d.style.display="none"})},show:function(){var b=this,a=b.nodes;b.isHide=false;Ext.Object.each(a,function(c,d){d.style.display=b.styleDisplay})},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,f){a+=d+'="'+f+'" '});return a},setStyleHtml:function(){return this.style},setAttributesHtml:function(a){var c=this,b=a;Ext.Object.each(c.attributes,function(d,f){b.setAttribute(d,f)});if(c.style){b.setAttribute("style",c.style)}c.initCls();if(c.cls){b.setAttribute("class",c.cls)}return b},createSelection:function(c){var b=this,a=b.selectionClass;if(a){try{a=Ext.isWebKit?a+"WebKit":a;b.selection=Ext.create(a,c)}catch(d){b.selection=Ext.create(b.selectionClass,c);Ext.log({msg:"Необходимо создать класс "+a,level:"error"})}}},createController:function(b){var d=this,g=d.controllerClass,c=d.controllerClassWebkit,a;if(g){try{g=Ext.isWebKit&&c?c:g;a=Ext.create(g,b||this)}catch(f){a=Ext.create(d.controllerClass,b||this);Ext.log({msg:"Необходимо создать класс "+g,level:"error"})}}d.controller=a;return a},initCls:function(){var b=this,a="";if(b.baseCls||b.cls){a=b.baseCls?b.baseCls:"";a+=a?" "+b.cls:b.cls}b.cls=a},createNodeHelper:function(){var b=this,a;a=Ext.create("FBEditor.editor.helper.element.Node",b);b.nodeHelper=a;return a},createMarker:function(f){var d=this,a,c,b=FBEditor.editor.Factory;c=b.createElement("img",f);a=b.createElement("marker",{},c);d.add(a)},updateMarker:function(b){var a=this;a.marker.img.update(b,{withoutView:true})},removeMarker:function(){this.marker=null},getOnlyStylesChildren:function(a){var b=this,d=0,c;while(d<b.children.length){c=b.children[d];if(!c.isStyleType&&!c.isText){c.getOnlyStylesChildren(a)}if(c&&(c.isStyleType||c.isText)){a.add(c)}else{d++}}},convertToText:function(a){var b=this,d=0,c;while(d<b.children.length){c=b.children[d];if(!c.isStyleType&&!c.isText){c.convertToText(a)}if(c&&(c.isStyleType||c.isText)){if(c.isStyleType){c.removeUndefinedElements()}if(c.children.length){a.add(c)}else{d++}}else{d++}}},removeUndefinedElements:function(){var c=this,a=c.children,d=0,b;while(c.children.length&&d<c.children.length){b=a[d];if(b.isUndefined){c.remove(b)}else{d++}}},beforeCopy:function(){var a=this;Ext.Array.each(a.children,function(b){b.beforeCopy()})},afterCopy:function(){var a=this;Ext.Array.each(a.children,function(b){b.afterCopy()})}},1,0,0,0,0,[["observable",Ext.util.Observable]],[FBEditor.editor.element,"AbstractElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleElementController",FBEditor.editor.element.AbstractElementController,{createFromRange:true,onKeyDownDelete:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("keyDownDelete",c)},onKeyDownBackspace:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("keyDownBackspace",c)},onPaste:function(c){var b=this,a=b.getElement();c.preventDefault();a.parent.fireEvent("paste",c)},checkRangeVerify:function(h){var f=this,d={},b={},g=["p","li","subtitle"],c,a;a=h.getRangeAt(0);if(a.collapsed){return false}b.common=a.commonAncestorContainer;d.common=b.common.getElement();if(d.common.elementId===a.startContainer.getElement().elementId){return true}b.firstP=a.startContainer;d.firstP=b.firstP.getElement();while(!Ext.Array.contains(g,d.firstP.xmlTag)){b.firstP=b.firstP.parentNode;d.firstP=b.firstP.getElement()}b.lastP=a.endContainer;d.lastP=b.lastP.getElement();while(!Ext.Array.contains(g,d.lastP.xmlTag)){b.lastP=b.lastP.parentNode;d.lastP=b.lastP.getElement()}c=b.firstP&&b.lastP;return c}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.AbstractStyleElementController",showedOnTree:false,isStyleType:true,createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.t=a.createElementText("текст");c.add(b.t);return b}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.a.AElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.a,"AElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateRangeStyleCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var o=this,k=o.getData(),n=false,h={},a={},g={},c={},p={},j=FBEditor.editor.Factory,f,d,b,l;try{if(k.saveRange){h.node=k.saveRange.startNode.getElement();d=h.node.getManager();d.setCursor(k.saveRange)}b=k.sel||window.getSelection();l=b.getRangeAt(0);if(l.collapsed){throw Error("Отсутствует выделение")}f=k.opts&&k.opts.attributes?k.opts.attributes:[];a.common=l.commonAncestorContainer;h.common=a.common.getElement();k.viewportId=a.common.viewportId;d=d||h.common.getManager();d.setSuspendEvent(true);g={start:l.startOffset,end:l.endOffset};k.range={common:l.commonAncestorContainer,start:l.startContainer,end:l.endContainer,parentStart:l.startContainer.parentNode,collapsed:l.collapsed,offset:g};k.links={};if(h.common.isText){k.range.oldValue=a.common.nodeValue;a.parent=a.common.parentNode;h.parent=a.parent.getElement();k.links.parent=a.parent;a.next=a.common.nextSibling;h.startValue=a.common.nodeValue.substring(0,g.start);h.selValue=a.common.nodeValue.substring(g.start,g.end);h.endValue=a.common.nodeValue.substring(g.end);if(h.startValue){h.common.setText(h.startValue);a.common.nodeValue=h.startValue}else{h.parent.remove(h.common);a.parent.removeChild(a.common)}h.node=j.createElement(o.elementName,f);h=Ext.apply(h,h.node.createScaffold());h.t.setText(h.selValue);a.node=h.node.getNode(k.viewportId);if(a.next){h.next=a.next.getElement();h.parent.insertBefore(h.node,h.next);a.parent.insertBefore(a.node,a.next)}else{h.parent.add(h.node);a.parent.appendChild(a.node)}k.links.newNode=a.node;a.cursor=a.node.firstChild;if(h.endValue){h.node=j.createElementText(h.endValue);a.node=h.node.getNode(k.viewportId);if(a.next){h.next=a.next.getElement();h.parent.insertBefore(h.node,h.next);a.parent.insertBefore(a.node,a.next)}else{h.parent.add(h.node);a.parent.appendChild(a.node)}}}else{a.pp=[];a.firstP=l.startContainer;h.firstP=a.firstP.getElement();h.isRoot=h.firstP.isRoot;while(h.firstP&&!h.firstP.isStyleHolder){a.firstP=h.isRoot?a.firstP.firstChild:a.firstP.parentNode;h.firstP=a.firstP?a.firstP.getElement():null}a.lastP=l.endContainer;h.lastP=a.lastP.getElement();while(h.lastP&&!h.lastP.isStyleHolder){a.lastP=h.isRoot?a.lastP.lastChild:a.lastP.parentNode;h.lastP=a.lastP?a.lastP.getElement():null}if(h.firstP.elementId!==h.lastP.elementId){a.ppStop=false;a.cur=a.firstP;while(!a.cur.nextSibling){a.cur=a.cur.parentNode}a.pp=d.getNodesPP(a.cur.nextSibling,a,h)}c.start=new RegExp("^"+Ext.String.escapeRegex(l.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(h.firstP.getText()));c.end=new RegExp(Ext.String.escapeRegex(l.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(h.lastP.getText())+"$");p.isStart=c.start.test(h.firstP.getText())||c.start2.test(l.toString());p.isEnd=c.end.test(h.lastP.getText())||c.end2.test(l.toString());k.range.pos=p;if(p.isStart){a.startContainer=a.firstP.firstChild;h.startContainer=a.startContainer.getElement()}else{a.common=a.firstP;h.common=h.firstP;a.container=l.startContainer;a.startContainer=d.splitNode(h,a,g.start);h.startContainer=a.startContainer.getElement();h.common.removeEmptyText()}a.parentStart=a.startContainer.parentNode;h.parentStart=a.parentStart.getElement();a.endContainer=h.isRoot?a.lastP.lastChild:l.endContainer;h.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;h.parentEnd=a.parentEnd.getElement();if(p.isEnd){a.endContainer=a.lastP.lastChild}else{if(h.endContainer.isText&&h.parentEnd.elementId===h.lastP.elementId&&k.range.offset.end===h.endContainer.text.length){a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer}else{a.common=a.lastP;h.common=h.lastP;a.container=a.endContainer;a.endContainer=d.splitNode(h,a,g.end);h.common.removeEmptyText()}}h.endContainer=a.endContainer.getElement();a.parentEnd=a.endContainer.parentNode;h.parentEnd=a.parentEnd.getElement();if(!a.endContainer.firstChild&&!h.endContainer.isText){a.bufRemove=a.endContainer;a.endContainer=a.endContainer.nextSibling?a.endContainer.nextSibling:a.endContainer.previousSibling;a.parentEnd.removeChild(a.bufRemove);h.parentEnd.remove(a.bufRemove.getElement());h.endContainer=a.endContainer.getElement()}h.node=j.createElement(o.elementName,f);a.node=h.node.getNode(k.viewportId);h.parentStart.insertBefore(h.node,h.startContainer);a.parentStart.insertBefore(a.node,a.startContainer);a.next=a.node.nextSibling;h.next=a.next?a.next.getElement():null;while(h.next&&(h.next.elementId!==h.endContainer.elementId||p.isEnd)){h.node.add(h.next);a.node.appendChild(a.next);h.parentStart.remove(h.next);a.next=a.node.nextSibling;h.next=a.next?a.next.getElement():null}if(h.parentStart.elementId!==h.parentEnd.elementId){a.prev=a.endContainer.previousSibling;h.node=j.createElement(o.elementName,f);a.node=h.node.getNode(k.viewportId);a.first=a.parentEnd.firstChild;h.first=a.first.getElement();h.parentEnd.insertBefore(h.node,h.first);a.parentEnd.insertBefore(a.node,a.first);a.next=a.node.nextSibling;h.next=a.next?a.next.getElement():null;while(h.next&&(h.next.elementId!==h.endContainer.elementId||p.isEnd)){h.node.add(h.next);a.node.appendChild(a.next);h.parentEnd.remove(h.next);a.next=a.node.nextSibling;h.next=a.next?a.next.getElement():null}}Ext.Array.each(a.pp,function(s){var r={},q={};q.p=s;r.p=q.p.getElement();r.node=j.createElement(o.elementName,f);q.node=r.node.getNode(k.viewportId);q.first=q.p.firstChild;r.first=q.first.getElement();r.p.insertBefore(r.node,r.first);q.p.insertBefore(q.node,q.first);q.next=q.node.nextSibling;while(q.next){r.next=q.next.getElement();r.node.add(r.next);q.node.appendChild(q.next);r.p.remove(r.next);q.next=q.node.nextSibling}});a.parent=a.parentStart.parentNode;h.parent=a.parent.getElement();a.cursor=p.isEnd?a.endContainer:a.endContainer.previousSibling;h.cursor=a.cursor.getElement();while(h.cursor&&!h.cursor.isText){a.cursor=a.cursor.lastChild;h.cursor=a.cursor?a.cursor.getElement():null}}h.parent.sync(k.viewportId);d.setSuspendEvent(false);h.focus=a.cursor.parentNode.getElement();d.cashSyncBtn=h.focus.elementId;d.setCursor({startNode:a.cursor,startOffset:a.cursor.nodeValue.length,focusElement:h.focus});k.saveNodes=a;o.verifyElement(h.parent);n=true}catch(m){Ext.log({level:"warn",msg:m,dump:m});o.getHistory(h.parent).removeNext()}d.setSuspendEvent(false);return n},unExecute:function(){var k=this,d=k.getData(),j=false,c={},a={},f=FBEditor.editor.Factory,b,g,l;try{g=d.range;a=d.saveNodes;l=a.node.viewportId;a.common=g.common;c.common=a.common.getElement();b=c.common.getManager();b.setSuspendEvent(true);console.log("undo create "+k.elementName,d,a);if(c.common.elementId===g.start.getElement().elementId){a.parent=a.common.parentNode||d.links.parent;c.parent=a.parent.getElement();if(a.common.parentNode){c.common.setText(g.oldValue);a.common.nodeValue=g.oldValue}else{c.common=f.createElementText(g.oldValue);a.common=c.common.getNode(d.viewportId);a.newNode=d.links.newNode;c.newNode=a.newNode.getElement();c.parent.insertBefore(c.common,c.newNode);a.parent.insertBefore(a.common,a.newNode);g.start=a.common;g.end=a.common}a.next=a.common.nextSibling;c.next=a.next.getElement();c.parent.remove(c.next);a.parent.removeChild(a.next);if(g.offset.end<g.oldValue.length){a.next=a.common.nextSibling;c.next=a.next.getElement();c.parent.remove(c.next);a.parent.removeChild(a.next)}}else{c.firstP=a.firstP.getElement();a.parent=a.startContainer.parentNode;c.parent=a.parent.getElement();a.first=a.parent.firstChild;while(a.first){c.first=a.first.getElement();c.firstP.insertBefore(c.first,c.parent);a.firstP.insertBefore(a.first,a.parent);c.parent.remove(c.first);a.first=a.parent.firstChild}c.firstP.remove(c.parent);a.firstP.removeChild(a.parent);if(g.offset.start){b.joinNode(a.startContainer)}c.lastP=a.lastP.getElement();if(c.firstP.elementId!==c.lastP.elementId){c.lastP=a.lastP.getElement();a.parent=a.lastP.firstChild;c.parent=a.parent.getElement();a.first=a.parent.firstChild;while(a.first){c.first=a.first.getElement();c.lastP.insertBefore(c.first,c.parent);a.lastP.insertBefore(a.first,a.parent);c.parent.remove(c.first);a.first=a.parent.firstChild}c.lastP.remove(c.parent);a.lastP.removeChild(a.parent)}if(g.offset.end<g.end.length){b.joinNode(a.endContainer)}Ext.Array.each(a.pp,function(o){var n={},m={};m.p=o;n.p=m.p.getElement();m.parent=m.p.firstChild;n.parent=m.parent.getElement();m.first=m.parent.firstChild;while(m.first){n.first=m.first.getElement();n.p.add(n.first);m.p.appendChild(m.first);n.parent.remove(n.first);m.first=m.parent.firstChild}n.p.remove(n.parent);m.p.removeChild(m.parent)});c.parent=c.common}c.parent.sync(l);b.setSuspendEvent(false);d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end,focusElement:c.parent};b.setCursor(d.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).remove()}b.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateRangeStyleCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.a.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"a"},0,0,0,0,0,0,[FBEditor.editor.command.a,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractDeleteWrapperCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,d=k.getData(),j=false,a={},c={},f=FBEditor.editor.Factory,b,g;try{b=d.opts.manager;g=d.range||b.getRange();d.viewportId=g.start.viewportId;console.log("del wrapper "+k.elementName,g);a.node=g.common;c.node=a.node.getElement();b.setSuspendEvent(true);if(g.collapsed){while(!c.node.hisName(k.elementName)){a.node=a.node.parentNode;c.node=a.node.getElement();if(c.node.isRoot){return false}}a.parent=a.node.parentNode;c.parent=a.parent.getElement();d.first=a.node.firstChild;d.last=a.node.lastChild;a.first=a.node.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){if(c.node.isLiHolder&&!c.first.isLi){d.first=a.first.nextSibling;c.node.remove(c.first);a.node.removeChild(a.first);g.start=b.getDeepFirst(d.first);g.end=g.start;g.offset.start=0;g.offset.end=0;g.common=g.start}else{c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);if(c.first.isLi){c.p=f.createElement("p");a.p=c.p.getNode(d.viewportId);c.parent.insertBefore(c.p,c.first);a.parent.insertBefore(a.p,a.first);if(c.first.elementId===d.first.getElement().elementId){d.first=a.p}if(c.first.elementId===d.last.getElement().elementId){d.last=a.p}a.firstLi=a.first.firstChild;c.firstLi=a.firstLi?a.firstLi.getElement():null;while(c.firstLi){c.p.add(c.firstLi);a.p.appendChild(a.firstLi);a.firstLi=a.first.firstChild;c.firstLi=a.firstLi?a.firstLi.getElement():null}c.parent.remove(c.first);a.parent.removeChild(a.first);c.first=c.p;a.first=a.p}}a.first=a.node.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node)}else{throw Error("Выделение в разработке!")}c.parent.sync(d.viewportId);b.setSuspendEvent(false);b.setCursor({startNode:g.start,startOffset:g.offset.start,endNode:g.end,endOffset:g.offset.end,focusElement:g.common.getElement()});d.range=g;d.els=c;d.nodes=a;k.verifyElement(c.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return j},unExecute:function(){var k=this,d=k.getData(),a={},c={},j=false,f=FBEditor.editor.Factory,b,g;try{g=d.range;c=d.els;a=d.nodes;b=c.node.getManager();b.setSuspendEvent(true);console.log("undo del wrapper "+k.elementName,d,g);if(g.collapsed){a.first=d.first;c.first=a.first.getElement();a.last=d.last;c.last=a.last.getElement();a.node=c.node.getNode(d.viewportId);c.parent.insertBefore(c.node,c.first);a.parent.insertBefore(a.node,a.first);a.next=a.first;c.next=a.next.getElement();while(c.next.elementId!==c.last.elementId){a.buf=a.next.nextSibling;c.node.add(c.next);a.node.appendChild(a.next);if(c.node.isLiHolder){c.li=f.createElement("li");a.li=c.li.getNode(d.viewportId);c.node.insertBefore(c.li,c.next);a.node.insertBefore(a.li,a.next);a.firstP=a.next.firstChild;c.firstP=a.firstP?a.firstP.getElement():null;while(c.firstP){c.li.add(c.firstP);a.li.appendChild(a.firstP);a.firstP=a.next.firstChild;c.firstP=a.firstP?a.firstP.getElement():null}c.node.remove(c.next);a.node.removeChild(a.next)}a.next=a.buf;c.next=a.next?a.next.getElement():null}c.node.add(c.last);a.node.appendChild(a.last);if(c.node.isLiHolder){c.li=f.createElement("li");a.li=c.li.getNode(d.viewportId);c.node.insertBefore(c.li,c.last);a.node.insertBefore(a.li,a.last);a.firstP=a.last.firstChild;c.firstP=a.firstP?a.firstP.getElement():null;while(c.firstP){c.li.add(c.firstP);a.li.appendChild(a.firstP);a.firstP=a.last.firstChild;c.firstP=a.firstP?a.firstP.getElement():null}c.node.remove(c.last);a.node.removeChild(a.last)}}c.parent.sync(d.viewportId);b.setSuspendEvent(false);d.saveRange={startNode:g.start,startOffset:g.offset.start,endNode:g.end,endOffset:g.offset.end,focusElement:g.common.getElement()};b.setCursor(d.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).remove()}b.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractDeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.a.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"a"},0,0,0,0,0,0,[FBEditor.editor.command.a,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.a.AElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.a.AElementController",htmlTag:"a",xmlTag:"a",cls:"el-a",showedOnTree:false,defaultAttributes:{href:"undefined"},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,f){a+=d+'="'+f+'" '});a=a.trim();return a},getBlock:function(){return this}},0,0,0,0,0,0,[FBEditor.editor.element.a,"AElement"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,d={},a={},c,b,g;try{b=f.sel||window.getSelection();g=b.getRangeAt(0);f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,parentStart:g.startContainer.parentNode,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};a.node=f.node||f.prevNode;d.node=a.node.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(!a.node.parentNode){a.parent=f.range.parentStart;d.parent=a.parent.getElement();while(d.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;d.parent=a.parent.getElement()}a.node=a.parent}f.viewportId=a.node.viewportId;k.createElement(d,a);d.parent.sync(f.viewportId);k.setCursor(d,a);f.saveNode=a.node;k.verifyElement(d.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{f=d.range;a.node=d.saveNode;c.node=a.node.getElement();b=c.node.getManager();b.setSuspendEvent(true);k=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(k);d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},createElement:function(b,a){},setCursor:function(c,a){var d=this,g=window.getSelection(),f=d.getData(),b;f.oldRange=g.getRangeAt(0);a.p=c.p.nodes[f.viewportId];f.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b=c.p.getManager();b.setCursor(f.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.annotation.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"annotation",createElement:function(d,c){var f=this,g=f.getData(),b=g.range,a=FBEditor.editor.Factory;d.node=a.createElement(f.elementName);c.parent=c.node.parentNode;c.first=c.parent.firstChild;d.parent=c.parent.getElement();if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Аннотация");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(g.viewportId);if(c.first){c.next=c.first.nextSibling;while(c.next&&(c.first.getElement().isEpigraph||c.first.getElement().isTitle)){c.first=c.next;c.next=c.next.nextSibling}d.first=c.first.getElement();d.parent.insertBefore(d.node,d.first);c.parent.insertBefore(c.node,c.first)}else{d.parent.add(d.node);c.parent.appendChild(c.node)}if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.parentP=c.p.parentNode;c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}f.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();d.parentP=b.parentP.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(b.next){d.next=b.next.getElement();d.parentP.insertBefore(d.p,d.next);b.parentP.insertBefore(b.p,b.next)}else{d.parentP.add(d.p);b.parentP.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);c.setSuspendEvent(false);b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.annotation,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.annotation.AnnotationElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(f,b){var m=this,j={},d={},c=m.getNameElement(),n=0,g,l,a,k,h;f=f||window.getSelection();k=f.getRangeAt(0);d.node=k.commonAncestorContainer;j.node=d.node.getElement();d.parent=d.node.parentNode;j.parent=d.parent.getElement();g=j.node.getManager();while(j.parent.isStyleHolder||j.parent.isStyleType){d.node=d.parent;j.node=d.node.getElement();d.parent=d.node.parentNode;j.parent=d.parent.getElement()}d.title=d.parent;j.title=d.title.getElement();while(!(j.title.isTitle||j.title.isRoot)){d.title=d.title.parentNode;j.title=d.title.getElement()}if(j.title.isTitle){d.node=d.title;j.node=j.title}else{j.parent=d.parent.getElement();d.node=j.parent.hisName(c)?d.parent:d.node}d.parent=d.node.parentNode;j.parent=d.parent.getElement();d.first=d.parent.firstChild;j.first=d.first?d.first.getElement():null;h=g.getNamesElements(j.parent);while(j.first&&(j.first.isEpigraph||j.first.isTitle)){n++;d.first=d.first.nextSibling;j.first=d.first?d.first.getElement():null}h.splice(n,0,c);a=g.getSchema();c=j.parent.getName();l=a.verify(c,h)?d.node:false;return l}},0,0,0,0,0,0,[FBEditor.editor.element.annotation,"AnnotationElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.annotation.AnnotationElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.annotation.AnnotationElementController",htmlTag:"annotation",xmlTag:"annotation",cls:"el-annotation",createScaffold:function(){var c=this,a=FBEditor.editor.Factory,b={};b.p=a.createElement("p");b.t=a.createElementText("Аннотация");b.p.add(b.t);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.annotation,"AnnotationElement"],0));(Ext.cmd.derive("FBEditor.editor.element.b.BElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.strong.StrongElement")}},1,0,0,0,0,0,[FBEditor.editor.element.b,"BElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractUnboundedElementController",FBEditor.editor.element.AbstractElementController,{createFromRange:true,getNodeVerify:function(h,g){var f=this,d={},b={},c,a;c=f.getNameElement();h=h||window.getSelection();a=h.getRangeAt(0);b.node=a.commonAncestorContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node;return b.node},checkRangeVerify:function(a){return true},getNameElementsVerify:function(b){var g=this,f={},d,a,c;c=g.getNameElement();f.parent=b.parent.getElement();b.node=f.parent.hisName(c)?b.parent:b.node;b.parent=b.node.parentNode;f.node=b.node.getElement();f.parent=b.parent.getElement();d=f.parent.getManager();a=d.getNamesElements(f.parent);a.splice(f.parent.getChildPosition(f.node)+1,0,c);return a}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractUnboundedElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.blockquote.BlockquoteElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.blockquote,"BlockquoteElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractSplitCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var o=this,j=o.getData(),n=false,c={},p={},g={},a={},f={},b=window.getSelection(),h=FBEditor.editor.Factory,d,k,l,q;try{if(j.saveRange){g.node=j.startNode.getElement();d=g.node.getManager();d.setCursor(j.saveRange)}k=b.getRangeAt(0);if(!j.node){a.cur=k.startContainer;g.cur=a.cur.getElement();while(g.cur&&!g.cur.hisName(o.elementName)){a.cur=a.cur.parentNode;g.cur=a.cur?a.cur.getElement():null}j.node=a.cur}a.prevNode=j.node;j.viewportId=a.prevNode.viewportId;g.prevNode=a.prevNode.getElement();d=g.prevNode.getManager();d.setSuspendEvent(true);f={start:k.startOffset,end:k.endOffset};l=k.startOffset===0?!d.isFirstNode(j.node,k.startContainer):true;q=k.endOffset===k.endContainer.nodeValue.length?!d.isLastNode(j.node,k.endContainer):true;j.range={common:k.commonAncestorContainer,start:k.startContainer,end:k.endContainer,prevParentStart:k.startContainer.parentNode.previousSibling,collapsed:k.collapsed,offset:f,joinStartContainer:l,joinEndContainer:q};a.startContainer=k.startContainer;a.endContainer=k.endContainer;g.startContainer=a.startContainer.getElement();g.endContainer=a.endContainer.getElement();if(!k.collapsed){c.start=new RegExp("^"+Ext.String.escapeRegex(k.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(g.startContainer.getText()));c.end=new RegExp(Ext.String.escapeRegex(k.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(g.endContainer.getText())+"$");p.isStart=c.start.test(g.startContainer.getText())||c.start2.test(k.toString());p.isEnd=c.end.test(g.endContainer.getText())||c.end2.test(k.toString())}else{p.isEnd=f.end===j.range.end.nodeValue.length?d.isLastNode(j.node,j.range.end):false;p.isStart=f.start===0?d.isFirstNode(j.node,j.range.start):false}j.range.pos=p;a.container=a.endContainer;a.common=j.node;g.common=j.node.getElement();a.endContainer=d.splitNode(g,a,f.end);g.endContainer=a.endContainer.getElement();if(g.endContainer.isEmpty()&&!g.common.isEmpty()){g.empty=d.createEmptyElement();a.empty=g.empty.getNode(j.viewportId);g.endContainer.add(g.empty);a.endContainer.appendChild(a.empty)}if(j.range.collapsed){a.startContainer=a.endContainer}else{a.container=a.startContainer;a.startContainer=d.splitNode(g,a,f.start)}g.startContainer=a.startContainer.getElement();g.endContainer=a.endContainer.getElement();g.node=h.createElement(o.elementName);a.parent=a.prevNode.parentNode;g.parent=a.parent.getElement();a.next=a.prevNode.nextSibling;a.nextPrevNode=a.next;a.node=g.node.getNode(j.viewportId);if(a.next){g.next=a.next.getElement();g.parent.insertBefore(g.node,g.next);a.parent.insertBefore(a.node,a.next)}else{g.parent.add(g.node);a.parent.appendChild(a.node)}o.createElement(a,g);o.moveToCreateElement(a,g);g.parent.sync(j.viewportId);d.setSuspendEvent(false);a.cursor=a.cursor?a.cursor:a.node;d.setCursor({startNode:a.cursor.firstChild});j.saveNodes=a;o.verifyElement(g.parent);n=true}catch(m){Ext.log({level:"warn",msg:m,dump:m});o.getHistory(g.parent).removeNext()}d.setSuspendEvent(false);return n},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo split "+j.elementName,f,a);c.node=a.node.getElement();c.prevNode=a.prevNode.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.common=a.common.getElement();c.endContainer=a.endContainer.getElement();b=c.node.getManager();b.setSuspendEvent(true);if(c.prevNode.isEmpty()){c.prevNode.removeAll();a.prevNode.removeChild(a.prevNode.firstChild)}if(c.node.isEmpty()){c.node.removeAll();a.node.removeChild(a.node.firstChild);f.joinStartContainer=false}j.restoreElement(a,c,f);a.first=a.node.firstChild;if(a.first){j.moveNodes(a,c)}a.parent.removeChild(a.node);c.parent.remove(c.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}if(a.empty&&c.endContainer.isEmpty()){c.common.remove(c.endContainer);a.common.removeChild(a.endContainer)}c.parent.sync(k);b.setSuspendEvent(false);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},moveNodes:function(a,b){while(a.first){b.first=a.first.getElement();a.prevNode.appendChild(a.first);b.prevNode.add(b.first);a.first=a.node.firstChild}},restoreElement:function(b,c,a){var d=this;if(!a.collapsed){b.next=b.prevNode.nextSibling;b.first=b.next.firstChild;d.moveNodes(b,c);b.parent.removeChild(b.next);c.parent.remove(b.next.getElement())}},createElement:function(b,c){var d=this,f=d.getData(),a=FBEditor.editor.Factory;if(!f.range.collapsed){b.next=b.startContainer;c.next=b.next?b.next.getElement():null;b.parentNext=b.next.parentNode;c.parentNext=b.parentNext.getElement();while(c.next&&c.next.elementId!==c.endContainer.elementId){b.buf=b.next.nextSibling;c.node.add(c.next);b.node.appendChild(b.next);b.next=b.buf;c.next=b.next?b.next.getElement():null}c.node=a.createElement(d.elementName);b.node=c.node.getNode(f.viewportId);if(b.nextPrevNode){c.nextPrevNode=b.nextPrevNode.getElement();c.parent.insertBefore(c.node,c.nextPrevNode);b.parent.insertBefore(b.node,b.nextPrevNode)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},moveToCreateElement:function(a,c){var d=this,f=d.getData(),b;c.node=a.node.getElement();a.next=a.endContainer;a.parentNext=a.next.parentNode?a.next.parentNode:null;c.parentNext=a.parentNext?a.parentNext.getElement():null;while(a.next){a.buf=a.next.nextSibling;c.next=a.next.getElement();c.node.add(c.next);a.node.appendChild(a.next);a.next=a.buf}if(!a.parentNext.firstChild){b=c.node.getManager();c.p=b.createEmptyP();c.parentNext.add(c.p);a.parentNext.appendChild(c.p.getNode(f.viewportId))}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractSplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateUnboundedCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:null,createElement:function(c,b){var d=this,f=d.getData(),a=FBEditor.editor.Factory;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.node=c.parent.hisName(d.elementName)?b.parent:b.node;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;c.node=a.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(f.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateUnboundedCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateRangeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var n=this,h=n.getData(),m=false,g={},a={},f={},c,b,d,j,k,o;try{if(h.saveRange){g.node=h.saveRange.startNode.getElement();c=g.node.getManager();c.setCursor(h.saveRange)}b=h.sel||window.getSelection();j=b.getRangeAt(0);a.common=j.commonAncestorContainer;g.common=a.common.getElement();c=g.common.getManager();c.setSuspendEvent(true);while(!g.common.splittable){a.common=a.common.parentNode;g.common=a.common.getElement();if(g.common.isRoot){return false}}h.viewportId=a.common.viewportId;d=j.collapsed;f={start:j.startOffset,end:j.endOffset};k=j.startOffset===0?!c.isFirstNode(a.common,j.startContainer):true;o=j.endOffset===j.endContainer.nodeValue.length?!c.isLastNode(a.common,j.endContainer):true;h.range={common:j.commonAncestorContainer,start:j.startContainer,end:j.endContainer,prevParentStart:j.startContainer.parentNode.previousSibling,collapsed:d,offset:f,joinStartContainer:k,joinEndContainer:o};a.startContainer=j.startContainer;a.endContainer=j.endContainer;a.container=a.endContainer;a.endContainer=c.splitNode(g,a,f.end);g.endContainer=a.endContainer.getElement();if(g.endContainer.isEmpty()&&!g.common.isEmpty()&&a.endContainer.previousSibling){a.prev=a.endContainer.previousSibling;g.common.remove(g.endContainer);a.common.removeChild(a.endContainer);a.endContainer=a.prev;a.endContainer=o?a.endContainer.previousSibling:a.endContainer}if(d){a.startContainer=a.endContainer}else{a.container=a.startContainer;a.startContainer=c.splitNode(g,a,f.start)}g.startContainer=a.startContainer.getElement();a.endContainer=a.endContainer.parentNode?a.endContainer:a.startContainer;g.endContainer=a.endContainer.getElement();n.createNewElement(g,a);g.common.sync(h.viewportId);c.setCursor({startNode:a.node.firstChild});h.saveNodes=a;n.verifyElement(g.parent);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});n.getHistory(g.common).removeNext()}c.setSuspendEvent(false);return m},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo create range "+j.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);a.first=a.node.firstChild;c.first=a.first.getElement();while(c.first){c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.node.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(k);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},createNewElement:function(c,b){var d=this,f=d.getData(),a=FBEditor.editor.Factory;c.node=a.createElement(d.elementName);b.node=c.node.getNode(f.viewportId);c.common.insertBefore(c.node,c.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;c.next=b.next.getElement();while(c.next&&c.next.elementId!==c.endContainer.elementId){b.buf=b.next.nextSibling;c.node.add(c.next);b.node.appendChild(b.next);b.next=b.buf;c.next=b.next?b.next.getElement():null}if(c.next&&c.next.elementId===c.endContainer.elementId&&!f.range.joinEndContainer){c.node.add(c.next);b.node.appendChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.blockquote.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"blockquote"},0,0,0,0,0,0,[FBEditor.editor.command.blockquote,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.blockquote.BlockquoteElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.blockquote.BlockquoteElementController",htmlTag:"blockquote",xmlTag:"blockquote",cls:"el-blockquote",splittable:true,isBlockquote:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Цитата");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.blockquote,"BlockquoteElement"],0));(Ext.cmd.derive("FBEditor.editor.element.body.BodyElement",FBEditor.editor.element.AbstractElement,{},0,0,0,0,0,0,[FBEditor.editor.element.body,"BodyElement"],0));(Ext.cmd.derive("FBEditor.editor.element.br.BrElementController",FBEditor.editor.element.AbstractStyleElementController,{onKeyDownDefault:function(c){var a=this,b;if(!a.isSpecialKey(c)){b=Ext.create("FBEditor.editor.command.br.CreateEmptyTextCommand");if(b.execute()){}}return true},isSpecialKey:function(a){var b=a.keyCode,c=Ext.event.Event;return a.ctrlKey||(b>=33&&b<=40)||b===c.RETURN||b===c.TAB||b===c.ESC||b===91||b===144||b===145||b===c.CONTEXT_MENU||(b===c.BACKSPACE)||(b>=112&&b<=123)||(b>=16&&b<=20)||(b>=44&&b<=46)}},0,0,0,0,0,0,[FBEditor.editor.element.br,"BrElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.br.CreateEmptyTextCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,a={},d={},b=window.getSelection(),c,g;try{g=b.getRangeAt(0);f.viewportId=g.startContainer.viewportId;console.log("replace br to empty text",g);a.node=g.startContainer;d.node=a.node.getElement();a.parent=a.node.parentNode;d.parent=a.parent.getElement();c=d.node.getManager();c.setSuspendEvent(true);d.parent.removeAll();a.parent.removeChild(a.parent.firstChild);d.parent.sync(f.viewportId);c.setSuspendEvent(false);f.els=d;j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){return false}},0,0,0,0,0,0,[FBEditor.editor.command.br,"CreateEmptyTextCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.br.BrElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.br.BrElementController",htmlTag:"br",xmlTag:"br",showedOnTree:false,isStyleType:true,isEmpty:function(){return true}},0,0,0,0,0,0,[FBEditor.editor.element.br,"BrElement"],0));(Ext.cmd.derive("FBEditor.editor.element.code.CodeElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.code,"CodeElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.code.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"code"},0,0,0,0,0,0,[FBEditor.editor.command.code,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.code.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"code"},0,0,0,0,0,0,[FBEditor.editor.command.code,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.code.CodeElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.code.CodeElementController",htmlTag:"code",xmlTag:"code",cls:"el-code"},0,0,0,0,0,0,[FBEditor.editor.element.code,"CodeElement"],0));(Ext.cmd.derive("FBEditor.editor.command.TextModifiedCommand",FBEditor.editor.command.AbstractCommand,{newValue:"",oldValue:"",execute:function(){var n=this,j=n.getData(),m=false,c=window.getSelection(),k=FBEditor.editor.Factory,g=c.getRangeAt(0).startOffset,a={},h={},f,d,p,o,b;try{n.newValue=n.newValue||j.newValue;n.oldValue=n.oldValue||j.oldValue;n.offset=n.offset?n.offset:g;a.node=j.saveRange?j.saveRange.startNode:j.node;h.node=a.node.getElement();f=h.node.getManager();f.setSuspendEvent(true);j.node=a.node;a.parent=a.node.parentNode;h.parent=a.parent.getElement();if(h.node.isEmpty()){h.text=k.createElementText("");a.text=h.text.getNode(a.node.viewportId);h.parent.replace(h.text,h.node);a.parent.replaceChild(a.text,a.node);j.node=a.text}d=j.node;p=n.newValue;o=d.viewportId;console.log("exec text",d,n.newValue,n.oldValue,"offset=",n.offset);b=d.getElement();b.setText(p);b.sync(o);m=true}catch(l){Ext.log({level:"warn",msg:l,dump:l});n.getHistory(b).removeNext()}f.setSuspendEvent(false);return m},unExecute:function(){var k=this,g=k.getData(),j=false,a={},f={},d,c,m,l,b;try{c=g.node;m=k.oldValue;l=c.viewportId;b=c.getElement();d=b.getManager();d.setSuspendEvent(true);c.nodeValue=m;b.setText(m);a.parent=c.parentNode;f.parent=a.parent.getElement();a.cursor=c;if(!m&&f.parent.isStyleHolder){f.empty=d.createEmptyElement();a.empty=f.empty.getNode(l);f.parent.replace(f.empty,b);a.parent.replaceChild(a.empty,c);a.cursor=a.empty;f.parent.sync(l)}else{b.sync(l)}d.setSuspendEvent(false);g.saveRange={startNode:a.cursor,startOffset:k.offset};d.setCursor(g.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(f.parent).remove()}d.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command,"TextModifiedCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootElementController",FBEditor.editor.element.AbstractElementController,{onTextModified:function(g){var c=this,f=g.target,a,b,d;b=c.getElement().getManager();if(b.isSuspendEvent()){return}a=f.parentNode;if(!a.getElement){Ext.defer(function(){this.onTextModified({target:f})},1,c);return}d=Ext.create("FBEditor.editor.command.TextModifiedCommand",{node:f,newValue:g.newValue,oldValue:g.prevValue});if(d.execute()){c.getHistory().add(d)}},onMouseDown:function(h){var f=this,a={},c={},b,d,g;a.target=h.target;c.target=a.target.getElement?a.target.getElement():null;if(c.target.isRoot){b=c.target.getManager();g=a.target.viewportId;c.last=c.target.getDeepLast();d=c.last.getNodeHelper();a.last=d.getNode(g);c.offset=c.last.isText?c.last.text.length:0;b.setCursor({startNode:a.last,startOffset:c.offset});h.preventDefault()}},onFocus:function(j){var g=this,d={},b={},a=j.relatedTarget,c,f,h;d.root=g.getElement();c=d.root.getManager();if(a&&(!a.getElement||!a.getElement().getRoot().equal(d.root))){g.enableAllEditable();d.deepFirst=d.root.getDeepFirst();f=d.deepFirst.getNodeHelper();h=j.target.viewportId;b.deepFirst=f.getNode(h);c.setCursor({startNode:b.deepFirst});f=d.root.getNodeHelper();b.root=f.getNode(h);b.root.scrollTop=0}}},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootElementControllerWebkit",FBEditor.editor.element.root.RootElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootElementControllerWebkit"],0));(Ext.cmd.derive("FBEditor.editor.selection.Selection",Ext.Base,{node:null,constructor:function(b){var a=this;a.node=b}},1,0,0,0,0,0,[FBEditor.editor.selection,"Selection"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootSelection",FBEditor.editor.selection.Selection,{},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootSelection"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootSelectionWebKit",FBEditor.editor.selection.Selection,{pOver:null,pOut:null,constructor:function(b){var a=this;b.addEventListener("mousedown",function(c){a.startSelection(c)});b.addEventListener("mouseout",function(c){a.outSelection(c)});b.addEventListener("mouseover",function(c){a.overSelection(c)});b.addEventListener("mousemove",function(c){a.moveSelection(c)});b.addEventListener("mouseup",function(c){a.endSelection(c)});FBEditor.editor.selection.Selection.prototype.constructor.apply(this,arguments)},startSelection:function(g){var j=this,h=g.target,d={},a={},c,f,k,b;d.target=h.getElement?h.getElement():null;c=d.target?d.target.getManager():null;k=h.viewportId;if(!g.shiftKey){j.enableAllEditable(g);c.selectionToLeft=null;c.selectionToUp=null}else{f=c?c.getRange():null;if(f&&f.collapsed){d.start=f.start.getElement();d.p=d.start.getStyleHolder();b=d.p.getNodeHelper();a.p=b.getNode(k);a.p.setAttribute("contenteditable",false)}}if(g.which===3){g.preventDefault()}},outSelection:function(h){var l=this,j=h.relatedTarget,f={},a={},b=window.getSelection(),g,d,k,m,c;g=b.rangeCount?b.getRangeAt(0):null;a.common=g?g.commonAncestorContainer:null;f.common=a.common&&a.common.getElement?a.common.getElement():null;f.relatedTarget=j&&j.getElement?j.getElement():null;f.p=f.relatedTarget?f.relatedTarget.getStyleHolder():null;d=f.p?f.p.getManager():null;k=d?d.getRange():null;f.start=k&&k.start.getElement?k.start.getElement():null;f.root=f.p?f.p.getRoot():null;f.rangeRoot=g&&g.startContainer.getElement?g.startContainer.getElement().getRoot():null;if(!f.rangeRoot&&f.root&&f.common||f.root&&f.rangeRoot&&f.rangeRoot.equal(f.root)){f.startP=f.start?f.start.getStyleHolder():null;if(!f.startP||f.startP&&!f.startP.equal(f.p)&&(!l.pOut||!l.pOut.equal(f.p))){l.pOut=f.p;m=j.viewportId;c=f.p.getNodeHelper();a.p=c.getNode(m);a.p.setAttribute("contenteditable",false)}}},overSelection:function(h){var l=this,j=h.relatedTarget,f={},a={},b=window.getSelection(),d,g,k,m,c;if(h.which===1&&h.buttons===1){g=b.rangeCount?b.getRangeAt(0):null;f.relatedTarget=j&&j.getElement?j.getElement():null;f.p=f.relatedTarget?f.relatedTarget.getStyleHolder():null;d=f.p?f.p.getManager():null;k=d?d.getRange():null;f.start=k&&k.start.getElement?k.start.getElement():null;f.root=f.p?f.p.getRoot():null;f.rangeRoot=g&&g.startContainer.getElement?g.startContainer.getElement().getRoot():null;if(f.root&&f.rangeRoot.equal(f.root)){f.startP=f.start?f.start.getStyleHolder():null;if(!f.startP||!l.pOver||l.pOver&&!l.pOver.equal(f.p)){l.pOver=f.p;m=j.viewportId;c=f.p.getNodeHelper();a.p=c.getNode(m);a.p.setAttribute("contenteditable",false)}}}},moveSelection:function(a){},endSelection:function(g){var d=this,f=g.target,b={},a={},c;b.target=f.getElement?f.getElement():null;if(b.target){b.root=b.target.getRoot();c=b.root.getNodeHelper();a.root=c.getNode(f.viewportId);a.root.focus()}d.pOver=null;d.pOut=null},enableAllEditable:function(f){var c=this,d=f.target,b={},a={};if(f.which===1){b.target=d.getElement?d.getElement():null;if(b.target){a.pp=document.querySelectorAll(".el-styleholder[contenteditable=false]");Ext.Array.each(a.pp,function(g){g.setAttribute("contenteditable",true)})}}}},1,0,0,0,0,0,[FBEditor.editor.element.root,"RootSelectionWebKit"],0));(Ext.cmd.derive("FBEditor.editor.element.root.RootElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.root.RootElementController",controllerClassWebkit:"FBEditor.editor.element.root.RootElementControllerWebkit",selectionClass:"FBEditor.editor.element.root.RootSelection",xmlTag:"root",htmlTag:"main",cls:"el-root",isRoot:true,setAttributesHtml:function(a){var c=this,b;b=FBEditor.editor.element.AbstractElement.prototype.setAttributesHtml.apply(this,arguments);b.setAttribute("tabindex",1);if(Ext.isWebKit){b.style.opacity=0.9}else{b.setAttribute("contentEditable",true)}return b},getEditor:function(){return this.editor},setEditor:function(a){this.editor=a}},0,0,0,0,0,0,[FBEditor.editor.element.root,"RootElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.AbstractRootElementController",FBEditor.editor.element.root.RootElementController,{onMouseUp:function(c){var b=this,a;FBEditor.editor.element.root.RootElementController.prototype.onMouseUp.apply(this,arguments);a=b.getFocusNode(c.target);b.checkActiveToolbar(a)},checkActiveToolbar:function(g){var f=this,a,c,d,b;b=g.getElement?g.getElement():null;if(b){a=b.getManager();c=a.getEditor();d=c.getToolbar();if(!d.isActive()){d.setActive()}}}},0,0,0,0,0,0,[FBEditor.editor.element.desc,"AbstractRootElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.AbstractRootElementControllerWebkit",FBEditor.editor.element.root.RootElementControllerWebkit,{onMouseUp:function(b){var a=this;a.mixins.controller.onMouseUp.call(a,b)}},0,0,0,0,0,[["controller",FBEditor.editor.element.desc.AbstractRootElementController]],[FBEditor.editor.element.desc,"AbstractRootElementControllerWebkit"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.AbstractRootElement",FBEditor.editor.element.root.RootElement,{controllerClass:"FBEditor.editor.element.desc.AbstractRootElementController",controllerClassWebkit:"FBEditor.editor.element.desc.AbstractRootElementControllerWebkit",cls:"el-desc-root",defaultAttributes:{"xmlns:l":"http://www.w3.org/1999/xlink",xmlns:"http://www.fictionbook.org/FictionBook3/description"},isDesc:true,getXml:function(){var b=this,a;a=FBEditor.editor.element.root.RootElement.prototype.getXml.apply(this,arguments);if(b.first().isEmpty()){a=a.replace(/<br\/>/,"<p>&#160;</p>")}return a},createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.p=a.createElement("p");b.br=a.createElement("br");b.p.add(b.br);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.desc,"AbstractRootElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.annotation.AnnotationElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"annotation",cls:"el-desc-annotation"},0,0,0,0,0,0,[FBEditor.editor.element.desc.annotation,"AnnotationElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.bibliodescription.BibliodescriptionElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"biblio-description",cls:"el-desc-bibliodescription"},0,0,0,0,0,0,[FBEditor.editor.element.desc.bibliodescription,"BibliodescriptionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.history.HistoryElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"history",cls:"el-desc-history"},0,0,0,0,0,0,[FBEditor.editor.element.desc.history,"HistoryElement"],0));(Ext.cmd.derive("FBEditor.editor.element.desc.preamble.PreambleElement",FBEditor.editor.element.desc.AbstractRootElement,{xmlTag:"preamble",cls:"el-desc-preamble"},0,0,0,0,0,0,[FBEditor.editor.element.desc.preamble,"PreambleElement"],0));(Ext.cmd.derive("FBEditor.editor.command.div.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.div.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.div.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"div"},0,0,0,0,0,0,[FBEditor.editor.command.div,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.div.DivElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.div,"DivElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.div.DivElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.div.DivElementController",htmlTag:"div",xmlTag:"div",cls:"el-div",splittable:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Блок");a.p.add(a.t);b.add(a.p);return a},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,f){if(d!=="marker"){a+=d+'="'+f+'" '}});return a},setStyleHtml:function(){var c=this,a=c.attributes,b;b=FBEditor.editor.element.AbstractElement.prototype.setStyleHtml.call(this);b+=b?" ":"";b+=a.width?"width: "+a.width+"; ":"";b+=a["min-width"]?"min-width: "+a["min-width"]+"; ":"";b+=a["max-width"]?"max-width: "+a["max-width"]+"; ":"";b+=a["float"]?"float: "+a["float"]+"; ":"";b+=a.align?"text-align: "+a.align+"; ":"";b+=a.border?"border: 1px solid black; ":"";c.style=b;return b},initCls:function(){var c=this,b=c.attributes,a;a=b.align?" el-div-align-"+b.align:"";a="el-div"+a;c.cls=a}},0,0,0,0,0,0,[FBEditor.editor.element.div,"DivElement"],0));(Ext.cmd.derive("FBEditor.editor.element.em.EmElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.em,"EmElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.em.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"em"},0,0,0,0,0,0,[FBEditor.editor.command.em,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.em.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"em"},0,0,0,0,0,0,[FBEditor.editor.command.em,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.em.EmElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.em.EmElementController",htmlTag:"em",xmlTag:"em",cls:"el-em"},0,0,0,0,0,0,[FBEditor.editor.element.em,"EmElement"],0));(Ext.cmd.derive("FBEditor.editor.command.epigraph.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"epigraph",createElement:function(d,c){var f=this,g=f.getData(),b=g.range,a=FBEditor.editor.Factory;c.parent=c.node.parentNode;d.parent=c.parent.getElement();d.node=a.createElement(f.elementName);c.node=d.parent.hisName(f.elementName)?c.parent:c.node;c.parent=c.node.parentNode;d.parent=c.parent.getElement();c.first=g.prevNode&&g.prevNode.nextSibling?g.prevNode:c.parent.firstChild;if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Эпиграф");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(g.viewportId);if(c.first){if(g.prevNode&&g.prevNode.getElement().xmlTag===d.node.xmlTag){c.first=c.first.nextSibling}else{c.next=c.first.nextSibling;while(c.next&&(c.first.getElement().xmlTag===d.node.xmlTag||c.first.getElement().xmlTag==="title")){c.first=c.next;c.next=c.next.nextSibling}}d.first=c.first.getElement();d.parent.insertBefore(d.node,d.first);c.parent.insertBefore(c.node,c.first)}else{d.parent.add(d.node);c.parent.appendChild(c.node)}if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.parentP=c.p.parentNode;c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}f.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();d.parentP=b.parentP.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(b.next){d.next=b.next.getElement();d.parentP.insertBefore(d.p,d.next);b.parentP.insertBefore(b.p,b.next)}else{d.parentP.add(d.p);b.parentP.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);c.setSuspendEvent(false);b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.epigraph,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.epigraph.EpigraphElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(h,g){var f=this,d={},b={},c=f.getNameElement(),a;h=h||window.getSelection();a=h.getRangeAt(0);b.node=a.commonAncestorContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}b.title=b.parent;d.title=b.title.getElement();while(!(d.title.isTitle||d.title.isRoot)){b.title=b.title.parentNode;d.title=b.title.getElement()}if(d.title.isTitle){b.node=b.title;d.node=d.title}else{d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node}return b.node}},0,0,0,0,0,0,[FBEditor.editor.element.epigraph,"EpigraphElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.epigraph.EpigraphElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.epigraph.EpigraphElementController",htmlTag:"epigraph",xmlTag:"epigraph",cls:"el-epigraph",splittable:true,isEpigraph:true,createScaffold:function(){var c=this,a=FBEditor.editor.Factory,b={};b.p=a.createElement("p");b.t=a.createElementText("Эпиграф");b.p.add(b.t);c.add(b.p);return b}},0,0,0,0,0,0,[FBEditor.editor.element.epigraph,"EpigraphElement"],0));(Ext.cmd.derive("FBEditor.editor.element.fb3body.Fb3bodyElement",FBEditor.editor.element.root.RootElement,{xmlTag:"fb3-body",defaultAttributes:{"xmlns:l":"http://www.w3.org/1999/xlink",xmlns:"http://www.fictionbook.org/FictionBook3/body","xmlns:fb3d":"http://www.fictionbook.org/FictionBook3/description"},cls:"el-body",isBody:true,constructor:function(){var a=this;FBEditor.editor.element.root.RootElement.prototype.constructor.apply(this,arguments);a.attributes.id=Ext.data.identifier.Uuid.Global.generate()},createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.title=a.createElement("title");b=Ext.apply(b,b.title.createScaffold());c.add(b.title);b.section=a.createElement("section");b.p=a.createElement("p");b.t=a.createElementText("Текст книги");b.p.add(b.t);b.section.add(b.p);c.add(b.section);return b}},1,0,0,0,0,0,[FBEditor.editor.element.fb3body,"Fb3bodyElement"],0));(Ext.cmd.derive("FBEditor.editor.element.header.HeaderElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.title.TitleElement")}},1,0,0,0,0,0,[FBEditor.editor.element.header,"HeaderElement"],0));(Ext.cmd.derive("FBEditor.editor.element.i.IElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.em.EmElement")}},1,0,0,0,0,0,[FBEditor.editor.element.i,"IElement"],0));(Ext.cmd.derive("FBEditor.editor.element.img.ImgElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownDelete:function(b){var a=this;b.preventDefault();a.remove()},onKeyDownBackspace:function(b){var a=this;b.preventDefault();a.remove()},remove:function(){var a=this,b;b=Ext.create("FBEditor.editor.command.DeleteCommand",{el:a.getElement()});if(b.execute()){a.getHistory().add(b)}},getNodeVerify:function(f,d){var c=this,b={},a;a=d.range;b.node=a.start;return b.node}},0,0,0,0,0,0,[FBEditor.editor.element.img,"ImgElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.img.CreateCommand",FBEditor.editor.command.AbstractCommand,{elementName:"img",execute:function(){var k=this,d=k.getData(),j=false,c={},a={},f=FBEditor.editor.Factory,b,g;try{g=d.opts.range;console.log("create img",d.opts);d.viewportId=g.start.viewportId;d.oldValue=g.start.nodeValue;a.start=g.start;c.start=a.start.getElement();a.parent=!c.start.isStyleHolder?a.start.parentNode:a.start;c.parent=a.parent.getElement();b=c.start.getManager();b.setSuspendEvent(true);c.node=f.createElement(k.elementName,{src:d.opts.name});a.node=c.node.getNode(d.viewportId);if(!c.parent.isEmpty()){a.next=a.start.nextSibling;c.next=a.next?a.next.getElement():null;c.startValue=a.start.nodeValue.substring(0,g.offset);c.endValue=a.start.nodeValue.substring(g.offset);c.start.setText(c.startValue);a.start.nodeValue=c.startValue}else{a.start=c.start.isStyleHolder?a.start.firstChild:a.start;c.start=a.start.getElement();c.parent.remove(c.start);a.parent.removeChild(a.start);d.isEmpty=true}if(c.next){c.parent.insertBefore(c.node,c.next);a.parent.insertBefore(a.node,a.next)}else{c.parent.add(c.node);a.parent.appendChild(a.node)}if(c.endValue){c.t=f.createElementText(c.endValue);a.t=c.t.getNode(d.viewportId);if(c.next){c.parent.insertBefore(c.t,c.next);a.parent.insertBefore(a.t,a.next)}else{c.parent.add(c.t);a.parent.appendChild(a.t)}}c.parent.sync(d.viewportId);b.setCursor({startNode:a.node});d.saveNode=a.node;k.verifyElement(c.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return j},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.opts.range;console.log("undo create img",h);b.node=h.saveNode;d.node=b.node.getElement();b.start=a.start;b.parent=b.node.parentNode;d.parent=b.parent.getElement();c=d.node.getManager();c.setSuspendEvent(true);d.parent.remove(d.node);b.parent.removeChild(b.node);b.cursor=a.start;if(h.isEmpty){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.parent.add(d.empty);b.parent.appendChild(b.empty);b.cursor=b.empty;a.start=b.empty}else{d.start=b.start.getElement();d.start.setText(h.oldValue);b.start.nodeValue=h.oldValue;b.next=b.start.nextSibling;if(a.offset<b.start.nodeValue.length&&b.next){d.next=b.next.getElement();d.parent.remove(d.next);b.parent.removeChild(b.next)}}d.parent.sync(h.viewportId);c.setCursor({startNode:b.cursor,startOffset:a.offset});f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.img,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.img.ImgElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.img.ImgElementController",htmlTag:"img",xmlTag:"img",cls:"el-img",defaultAttributes:{tabindex:0},createFromRange:true,resource:null,isImg:true,isEmpty:function(){return false},clear:function(){var a=this,b=a.resource;if(b){b.removeElement(a)}FBEditor.editor.element.AbstractElement.prototype.clear.call(this)},getNode:function(c){var b=this,a;b.linkResource();a=FBEditor.editor.element.AbstractElement.prototype.getNode.apply(this,arguments);return a},getAttributesXml:function(b){var d=this,c=Ext.clone(d.attributes),a="";c.src=d.resource?d.resource.name:"undefined";Ext.Object.each(c,function(f,g){if(b&&f==="alt"||f==="tabindex"){}else{a+=f+'="'+g+'" '}});return a},setStyleHtml:function(){var c=this,a=c.attributes,b;b=FBEditor.editor.element.AbstractElement.prototype.setStyleHtml.call(this);b+=b?" ":"";b+=a.width?"width: "+a.width+"; ":"";b+=a["min-width"]?"min-width: "+a["min-width"]+"; ":"";b+=a["max-width"]?"max-width: "+a["max-width"]+"; ":"";c.style=b;return b},getData:function(){var b=this,c,a;c=FBEditor.editor.element.AbstractElement.prototype.getData.apply(this,arguments);a={name:b.resource?b.resource.name:null};Ext.Object.each(b.attributes,function(d,f){a[d]=f?f:""});a.src=b.attributes.src?b.attributes.src:"undefined";c=Ext.apply(c,a);return c},update:function(b){var a=this;if(a.resource){a.resource.removeElement(a);a.resource=null}a.attributes=Ext.clone(a.defaultAttributes);Ext.Object.each(b,function(c,d){if(d){a.attributes[c]=d}});FBEditor.editor.element.AbstractElement.prototype.update.apply(this,arguments)},getNameTree:function(){var b=this,a;a=FBEditor.editor.element.AbstractElement.prototype.getNameTree.apply(this,arguments);if(b.resource){a+=" "+b.resource.name}return a},getOnlyStylesChildren:function(a){var b=this;if(b.attributes.src.substring(0,1)==="#"){b.attributes.src=b.attributes.src.substring(1)}a.add(b)},beforeCopy:function(){var a=this;if(a.resource){a.updateSrc("#"+a.resource.name)}},afterCopy:function(){var a=this;if(a.resource){a.updateSrc(a.attributes.src)}},deleteLinkResource:function(c){var a=this,b=a.resource;if(b){b.removeElement(a)}a.resource=null;a.attributes.src=c||"undefined";a.updateSrc(a.attributes.src)},linkResource:function(){var c=this,a=c.attributes,b=FBEditor.resource.Manager,d;a.src=a.src||"undefined";d=b.getResourceByFileId(a.src)||b.getResourceByName(a.src);if(d){a.src=d.url;d.addElement(c);c.resource=d}},updateSrc:function(c){var b=this,a=b.getManager();a.setSuspendEvent(true);Ext.Object.each(b.nodes,function(d,f){f.setAttribute("src",c)});a.setSuspendEvent(false)}},0,0,0,0,0,0,[FBEditor.editor.element.img,"ImgElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElement",FBEditor.editor.element.AbstractElement,{cls:"el-styleholder",isStyleHolder:true,isStyleType:true,showedOnTree:false,setAttributesHtml:function(a){var c=this,b;b=FBEditor.editor.element.AbstractElement.prototype.setAttributesHtml.apply(this,arguments);b.setAttribute("tabindex",-1);if(Ext.isWebKit){b.setAttribute("contentEditable",true)}return b}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownEnter:function(h){var d=this,g=window.getSelection(),c=d.getNameElement(),a,f,b;h.preventDefault();b=g.getRangeAt(0);a=d.sameStyleHolder();if(!b.collapsed){d.removeRangeNodes()}if(a){f=Ext.create("FBEditor.editor.command."+c+".SplitNodeCommand");if(f.execute()){d.getHistory().add(f)}}},onKeyDownDelete:function(k){var l=this,c=window.getSelection(),a=l.getNameElement(),b={},h={},g=l.getElement().getManager(),f,j,d;k.preventDefault();j=c.getRangeAt(0);b.node=j.startContainer;h.node=b.node.getElement();b.p=b.node.parentNode;h.p=b.p.getElement();if(h.node.isEmpty()&&b.node.firstChild){b.node=b.node.firstChild;h.node=b.node.getElement();b.p=b.node;h.p=b.p.getElement()}d=j.startOffset===h.node.getText().length;while(!h.p.hisName(a)){b.node=b.p;h.node=b.node.getElement();b.p=b.node.parentNode;h.p=b.p.getElement()}b.next=b.node.nextSibling;if(!j.collapsed){l.removeRangeNodes()}else{if(d&&!b.next){f=Ext.create("FBEditor.editor.command."+a+".JoinNextNodeCommand");if(f.execute()){l.getHistory().add(f)}}else{b.text=d?b.next:b.node;b.text=g.getDeepFirst(b.text);g.setCursor({startNode:b.text,startOffset:d?0:j.startOffset});b.text.getElement().fireEvent("keyDownDelete",k)}}},onKeyDownBackspace:function(k){var l=this,d=window.getSelection(),b=l.getNameElement(),c={},h={},g=l.getElement().getManager(),f,j,a;k.preventDefault();j=d.getRangeAt(0);c.node=j.startContainer;h.node=c.node.getElement();c.p=c.node.parentNode;h.p=c.p.getElement();if(h.node.isEmpty()&&c.node.firstChild){c.node=c.node.firstChild;h.node=c.node.getElement();c.p=c.node;h.p=c.p.getElement()}a=j.startOffset===0;while(!h.p.hisName(b)){c.node=c.p;h.node=c.node.getElement();c.p=c.node.parentNode;h.p=c.p.getElement()}c.prev=c.node.previousSibling;if(!j.collapsed){l.removeRangeNodes()}else{if(a&&!c.prev){f=Ext.create("FBEditor.editor.command."+b+".JoinPrevNodeCommand");if(f.execute()){l.getHistory().add(f)}}else{c.text=a?c.prev:c.node;c.text=g.getDeepLast(c.text);h.text=c.text.getElement();g.setCursor({startNode:c.text,startOffset:a?h.text.getText().length:j.startOffset-1});c.text.getElement().fireEvent("keyDownBackspace",k)}}},onPaste:function(k){var l=this,d=window.getSelection(),b=l.getNameElement(),c={},g={},m,a=new DOMParser(),j,h,f;k.preventDefault();k.stopPropagation();h=d.getRangeAt(0);c.node=h.startContainer;g.node=c.node.getElement();c.p=c.node.parentNode;g.p=c.p.getElement();if(g.node.isEmpty()&&c.node.firstChild){c.node=c.node.firstChild;g.node=c.node.getElement();c.p=c.node;g.p=c.p.getElement()}while(!g.p.hisName(b)){c.node=c.p;g.node=c.node.getElement();c.p=c.node.parentNode;g.p=c.p.getElement()}if(!h.collapsed){l.removeRangeNodes()}m=k.clipboardData.getData("text/html");if(!m){m=k.clipboardData.getData("text");m=l.convertTextToHtml(m)}else{m=m.replace(/\n+|\t+/g," ")}j=a.parseFromString(m,"text/html");f=Ext.create("FBEditor.editor.command.PasteCommand",{html:j});if(f.execute()){l.getHistory().add(f)}},removeRangeNodes:function(){var b=this,a=b.getNameElement(),c;c=Ext.create("FBEditor.editor.command."+a+".RemoveRangeNodesCommand");if(c.execute()){b.getHistory().add(c)}},sameStyleHolder:function(){var d=this,f=window.getSelection(),c={},a,b;b=f.getRangeAt(0);c.start=b.startContainer.getElement();c.end=b.endContainer.getElement();c.startP=c.start.getStyleHolder();c.endP=c.end.getStyleHolder();a=c.startP.equal(c.endP);return a},convertTextToHtml:function(b){var a;a=b.replace(/^(.*?)$/gim,"<p>$1</p>");return a}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.li,"LiElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementController,{scrollTopBy:20,onKeyDownCtrlA:function(h){var j=this,b=window.getSelection(),a={},f={},d,c,g,k;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();d=f.root.getManager();k=a.node.viewportId;f.deepFirst=f.root.getDeepFirst();c=f.deepFirst.getNodeHelper();a.deepFirst=c.getNode(k);f.deepLast=f.root.getDeepLast();c=f.deepLast.getNodeHelper();a.deepLast=c.getNode(k);f.endOffset=f.deepLast.isText?f.deepLast.text.length:0;f.firstP=f.deepFirst.getStyleHolder();c=f.firstP.getNodeHelper();a.firstP=c.getNode(k);a.firstP.setAttribute("contenteditable",false);f.lastP=f.deepLast.getStyleHolder();c=f.lastP.getNodeHelper();a.lastP=c.getNode(k);a.lastP.setAttribute("contenteditable",false);d.setCursor({startNode:a.deepFirst,startOffset:0,endNode:a.deepLast,endOffset:f.endOffset});h.preventDefault()},onKeyDownShiftCtrlHome:function(h){var j=this,b=window.getSelection(),a={},f={},d,c,g,k;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();f.p=f.node.getStyleHolder();d=f.root.getManager();k=a.node.viewportId;f.deepFirst=f.root.getDeepFirst();c=f.deepFirst.getNodeHelper();a.deepFirst=c.getNode(k);f.firstP=f.deepFirst.getStyleHolder();if(f.p.elementId!==f.firstP.elementId){c=f.p.getNodeHelper();a.p=c.getNode(k);a.p.setAttribute("contenteditable",false);c=f.firstP.getNodeHelper();a.firstP=c.getNode(k);a.firstP.setAttribute("contenteditable",false);d.setCursor({startNode:a.deepFirst,startOffset:0,endNode:a.node,endOffset:g.endOffset});c=f.root.getNodeHelper();a.root=c.getNode(k);a.root.scrollTop=0;h.preventDefault()}},onKeyDownShiftCtrlEnd:function(h){var j=this,b=window.getSelection(),a={},f={},d,c,g,k;h.preventDefault();g=b.getRangeAt(0);a.node=g.startContainer;k=a.node.viewportId;f.node=a.node.getElement();f.root=f.node.getRoot();f.p=f.node.getStyleHolder();d=f.root.getManager();f.deepLast=f.root.getDeepLast();c=f.deepLast.getNodeHelper();a.deepLast=c.getNode(k);f.endOffset=f.deepLast.isText?f.deepLast.text.length:0;f.lastP=f.deepLast.getStyleHolder();if(f.p.elementId!==f.lastP.elementId){c=f.p.getNodeHelper();a.p=c.getNode(k);a.p.setAttribute("contenteditable",false);c=f.lastP.getNodeHelper();a.lastP=c.getNode(k);a.lastP.setAttribute("contenteditable",false);d.setCursor({startNode:a.node,startOffset:g.startOffset,endNode:a.deepLast,endOffset:f.endOffset})}c=f.root.getNodeHelper();a.root=c.getNode(k);a.root.scrollTop=a.root.scrollHeight},onKeyDownCtrlHome:function(h){var j=this,b=window.getSelection(),a={},f={},d,c,g,k;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();d=f.root.getManager();k=a.node.viewportId;f.deepFirst=f.root.getDeepFirst();c=f.deepFirst.getNodeHelper();a.deepFirst=c.getNode(k);d.setCursor({startNode:a.deepFirst,startOffset:0});c=f.root.getNodeHelper();a.root=c.getNode(k);a.root.scrollTop=0;h.preventDefault()},onKeyDownCtrlEnd:function(h){var j=this,b=window.getSelection(),a={},f={},d,c,g,k;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.root=f.node.getRoot();d=f.root.getManager();k=a.node.viewportId;f.deepLast=f.root.getDeepLast();c=f.deepLast.getNodeHelper();a.deepLast=c.getNode(k);f.endOffset=f.deepLast.isText?f.deepLast.text.length:0;d.setCursor({startNode:a.deepLast,startOffset:f.endOffset});c=f.root.getNodeHelper();a.root=c.getNode(k);a.root.scrollTop=a.root.scrollHeight;h.preventDefault()},onKeyDownShiftCtrlLeft:function(k){var l=this,d=window.getSelection(),c={},h={},g,f,j,m,a,b;j=d.getRangeAt(0);c.node=j.startContainer;h.node=c.node.getElement();m=c.node.viewportId;g=h.node.getManager();a=l.isStart();h.p=h.node.getStyleHolder();h.deepFirst=h.p.getDeepFirst();h.prev=l.getPrevElement(h.p);h.deepLast=h.prev?h.prev.getDeepLast():null;if(a&&h.deepLast){f=h.deepLast.getNodeHelper();c.deepLast=f.getNode(m);l.disableEditable(c.deepLast);l.disableEditable(c.node);if(j.collapsed){h.lastLength=h.deepLast.isText?h.deepLast.getText().length:0;g.setCursor({startNode:c.deepLast,startOffset:h.lastLength,endNode:j.endContainer,endOffset:j.endOffset})}}else{b=false;h.nodePrev=l.getPrevElement(h.node);if(h.deepFirst.equal(h.node)){h.firstText=h.node.getText().substr(0,j.startOffset);b=!/ /.test(h.firstText)&&/^[^\wа-яА-Я]+/i.test(h.firstText)}else{if(h.nodePrev){h.nodePrevFirst=h.nodePrev.getDeepLast();b=h.nodePrevFirst.equal(h.deepFirst)&&/^[^\wа-яА-Я]+/i.test(h.nodePrev.getText())}}if(b){f=h.deepFirst.getNodeHelper();c.deepFirst=f.getNode(m);g.setCursor({startNode:j.endContainer,startOffset:j.endOffset,endNode:c.deepFirst,endOffset:0})}}},onKeyDownShiftCtrlRight:function(k){var l=this,c=window.getSelection(),b={},h={},g,d,j,m,f,a;j=c.getRangeAt(0);b.node=j.endContainer;h.node=b.node.getElement();m=b.node.viewportId;g=h.node.getManager();h.p=h.node.getStyleHolder();h.deepLast=h.p.getDeepLast();h.next=l.getNextElement(h.p);h.deepFirst=h.next?h.next.getDeepFirst():null;f=l.isEnd();if(f&&h.deepFirst){d=h.deepFirst.getNodeHelper();b.deepFirst=d.getNode(m);l.disableEditable(b.deepFirst);l.disableEditable(b.node);if(j.collapsed){g.setCursor({startNode:j.startContainer,startOffset:j.startOffset,endNode:b.deepFirst,endOffset:0})}}else{a=false;h.nodeNext=l.getNextElement(h.node);if(h.deepLast.equal(h.node)){h.lastText=h.node.getText().substr(j.endOffset);h.lastText=h.lastText.replace(/^ /,"");a=!/ /.test(h.lastText)&&/[^\wа-яА-Я]+$/i.test(h.lastText)}else{if(h.nodeNext){h.nodeNextLast=h.nodeNext.getDeepLast();a=h.nodeNextLast.equal(h.deepLast)&&/[^\wа-яА-Я]+$/i.test(h.nodeNext.getText())}}if(a){d=h.deepLast.getNodeHelper();b.deepLast=d.getNode(m);h.lastLength=h.deepLast.getText().length;g.setCursor({startNode:j.startContainer,startOffset:j.startOffset,endNode:b.deepLast,endOffset:h.lastLength})}}},onKeyDownShiftLeft:function(h){var j=this,b=window.getSelection(),a={},f={},l,d,c,g,k;g=b.getRangeAt(0);a.node=g.startContainer;f.node=a.node.getElement();f.p=f.node.getStyleHolder();a.end=g.endContainer;f.end=a.end.getElement();f.endP=f.end.getStyleHolder();c=f.p.getNodeHelper();k=a.node.viewportId;a.p=c.getNode(k);d=f.node.getManager();l={startNode:g.startContainer,startOffset:g.startOffset,endNode:g.endContainer,endOffset:g.endOffset};if(g.collapsed){d.selectionToLeft=true;a.p.setAttribute("contenteditable",false)}if(d.selectionToLeft){if(l.startOffset===0){f.text=null;f.prev=j.getPrevElement(f.node);while(!f.text&&f.prev){f.text=f.prev.getDeepLast();f.prev=j.getPrevElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(k);l.startNode=a.text;l.startOffset=f.text.getText().length-1;f.prevP=f.text.getStyleHolder();if(!f.p.equal(f.prevP)){c=f.prevP.getNodeHelper();a.prevP=c.getNode(k);a.prevP.setAttribute("contenteditable",false)}}}else{l.startOffset--;if(f.p.equal(f.endP)){j.enableAllEditable()}}}else{if(l.endOffset===0){f.text=null;f.node=l.endNode.getElement();f.prev=j.getPrevElement(f.node);while(!f.text&&f.prev){f.text=f.prev.getDeepLast();f.prev=j.getPrevElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(k);l.endNode=a.text;l.endOffset=f.text.getText().length-1}}else{l.endOffset--}f.start=l.startNode.getElement();f.end=l.endNode.getElement();if(f.start.equal(f.end)&&l.startOffset===l.endOffset){j.enableAllEditable()}}d.setCursor(l);h.preventDefault()},onKeyDownShiftRight:function(h){var j=this,b=window.getSelection(),a={},f={},l,d,c,g,k;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();f.p=f.node.getStyleHolder();a.end=g.endContainer;f.end=a.end.getElement();f.endP=f.end.getStyleHolder();c=f.p.getNodeHelper();k=a.node.viewportId;a.p=c.getNode(k);d=f.node.getManager();if(g.collapsed){d.selectionToLeft=false;a.p.setAttribute("contenteditable",false)}l={startNode:g.startContainer,startOffset:g.startOffset,endNode:g.endContainer,endOffset:g.endOffset};if(g.collapsed){d.selectionToLeft=false;a.p.setAttribute("contenteditable",false)}if(!d.selectionToLeft){if(l.endOffset===f.node.getText().length){f.text=null;f.next=j.getNextElement(f.node);while(!f.text&&f.next){f.text=f.next.getDeepFirst();f.next=j.getNextElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(k);l.endNode=a.text;l.endOffset=1;f.nextP=f.text.getStyleHolder();if(!f.p.equal(f.nextP)){c=f.nextP.getNodeHelper();a.nextP=c.getNode(k);a.nextP.setAttribute("contenteditable",false)}}}else{l.endOffset++}}else{f.node=l.startNode.getElement();if(l.startOffset===f.node.getText().length){f.text=null;f.next=j.getNextElement(f.node);while(!f.text&&f.next){f.text=f.next.getDeepLast();f.next=j.getNextElement(f.text);f.text=f.text.isText?f.text:null}if(f.text){c=f.text.getNodeHelper();a.text=c.getNode(k);l.startNode=a.text;l.startOffset=1}}else{l.startOffset++}f.start=l.startNode.getElement();f.end=l.endNode.getElement();if(f.start.equal(f.end)&&l.startOffset===l.endOffset){j.enableAllEditable()}}d.setCursor(l);h.preventDefault()},onKeyDownShiftUp:function(k){var l=this,c=window.getSelection(),a={},g={},j={},b,f,d,h,m;h=c.getRangeAt(0);a.start=h.startContainer;g.start=a.start.getElement();g.startP=g.start.getStyleHolder();a.end=h.endContainer;g.end=a.end.getElement();g.endP=g.end.getStyleHolder();m=a.start.viewportId;f=g.start.getManager();if(f.isSuspendEvent()){k.preventDefault();return}j.range={startOffset:h.startOffset,startContainer:h.startContainer,endContainer:h.endContainer,endOffset:h.endOffset};j.start=f.getCursorPosition();j.end=f.getCursorPosition(true);g.last=g.endP.getDeepLast();d=g.last.getNodeHelper();g.length=g.last.isText?g.last.getText().length:0;j.last=d.getXY(m,g.length);g.first=g.startP.getDeepFirst();d=g.first.getNodeHelper();j.first=d.getXY(m,0);if(f.selectionToUp===null||!f.selectionToUp&&j.start.y===j.end.y){f.selectionToUp=true;f.selectionToLeft=true}g.node=f.selectionToUp?g.startP:g.endP;j.pos=f.selectionToUp?j.start:j.end;b=j.pos.y===j.first.y;if(g.node.isEmpty()||b){k.preventDefault();l.selectionToUp(j)}else{if(!g.node.isEmpty()){if(f.selectionToUp){f.setCursor({endNode:j.range.startContainer,endOffset:j.range.startOffset,startNode:j.range.endContainer,startOffset:j.range.endOffset})}else{f.setCursor({startNode:j.range.startContainer,startOffset:j.range.startOffset,endNode:j.range.endContainer,endOffset:j.range.endOffset})}}}},onKeyDownShiftDown:function(k){var l=this,b=window.getSelection(),a={},g={},j={},d,f,c,h,m;h=b.getRangeAt(0);a.start=h.startContainer;m=a.start.viewportId;g.start=a.start.getElement();g.startP=g.start.getStyleHolder();f=g.start.getManager();if(f.isSuspendEvent()){k.preventDefault();return}a.end=h.endContainer;g.end=a.end.getElement();g.endP=g.end.getStyleHolder();j.range={startContainer:h.startContainer,startOffset:h.startOffset,endContainer:h.endContainer,endOffset:h.endOffset};j.start=f.getCursorPosition();j.end=f.getCursorPosition(true);g.last=g.endP.getDeepLast();c=g.last.getNodeHelper();g.length=g.last.isText?g.last.getText().length:0;j.last=c.getXY(m,g.length);g.first=g.startP.getDeepFirst();c=g.first.getNodeHelper();j.first=c.getXY(m,0);if(f.selectionToUp===null||f.selectionToUp&&j.start.y===j.end.y){f.selectionToUp=false;f.selectionToLeft=false}g.node=f.selectionToUp?g.startP:g.endP;j.pos=f.selectionToUp?j.start:j.end;d=j.pos.y===j.last.y;if(g.node.isEmpty()||d){k.preventDefault();l.selectionToDown(j)}else{if(!g.node.isEmpty()){if(!f.selectionToUp){f.setCursor({startOffset:j.range.startOffset,startNode:j.range.startContainer,endNode:j.range.endContainer,endOffset:j.range.endOffset})}else{f.setCursor({endNode:j.range.startContainer,endOffset:j.range.startOffset,startNode:j.range.endContainer,startOffset:j.range.endOffset})}}}},onKeyDownLeft:function(j){var g=this,h=window.getSelection(),c={},f={},d,b,a;b=h.getRangeAt(0);c.node=b.startContainer;f.node=c.node.getElement();d=f.node.getManager();g.enableAllEditable();d.selectionToLeft=null;d.selectionToUp=null;if(!b.collapsed){d.setCursor({startNode:c.node,startOffset:b.startOffset});j.preventDefault();return}a=g.isStart();if(a){g.cursorToLeft(j)}},onKeyDownRight:function(j){var f=this,h=window.getSelection(),b={},d={},c,a,g;a=h.getRangeAt(0);b.node=a.endContainer;d.node=b.node.getElement();c=d.node.getManager();f.enableAllEditable();c.selectionToLeft=null;c.selectionToUp=null;if(!a.collapsed){c.setCursor({startNode:b.node,startOffset:a.endOffset});j.preventDefault();return}g=f.isEnd();if(g){f.cursorToRight(j)}},onKeyDownUp:function(j){var k=this,b=window.getSelection(),a={},f={},h={},d,c,g,l;g=b.getRangeAt(0);a.node=g.startContainer;l=a.node.viewportId;f.node=a.node.getElement();f.p=f.node.getStyleHolder();d=f.node.getManager();if(d.isSuspendEvent()){j.preventDefault();return}k.enableAllEditable();d.selectionToLeft=null;d.selectionToUp=true;if(!g.collapsed){d.setCursor({startNode:g.startContainer,startOffset:g.startOffset})}h.range={startOffset:g.startOffset,startContainer:g.startContainer,endOffset:g.endOffset,endContainer:g.endContainer};h.pos=d.getCursorPosition();f.first=f.p.getDeepFirst();c=f.first.getNodeHelper();h.pos.first=c.getXY(l,0);if(f.node.isEmpty()||h.pos.y===h.pos.first.y){j.preventDefault();k.cursorToUp(h)}},onKeyDownDown:function(j){var k=this,b=window.getSelection(),a={},f={},h={},d,c,g,l;g=b.getRangeAt(0);a.node=g.endContainer;l=a.node.viewportId;f.node=a.node.getElement();f.p=f.node.getStyleHolder();d=f.node.getManager();if(d.isSuspendEvent()){j.preventDefault();return}k.enableAllEditable();d.selectionToLeft=null;d.selectionToUp=false;if(!g.collapsed){d.setCursor({startNode:a.node,startOffset:g.endOffset})}h.range={startOffset:g.startOffset,startContainer:g.startContainer,endOffset:g.endOffset,endContainer:g.endContainer};h.pos=d.getCursorPosition(true);f.last=f.p.getDeepLast();c=f.last.getNodeHelper();f.length=f.node.isText?f.node.getText().length:0;h.pos.last=c.getXY(l,f.length);if(f.node.isEmpty()||h.pos.y===h.pos.last.y){j.preventDefault();k.cursorToDown(h)}},isStart:function(){var f=this,g=window.getSelection(),c={},d={},b,a;b=g.getRangeAt(0);c.node=b.startContainer;d.node=c.node.getElement();d.p=d.node.getStyleHolder();d.deepFirst=d.p.getDeepFirst();a=d.node.isEmpty()||d.node.isImg&&!d.node.prev()||d.node.isStyleHolder&&d.node.children.length===1&&d.node.first().isImg||b.startOffset===0&&d.deepFirst.elementId===d.node.elementId;return a},isEnd:function(){var d=this,g=window.getSelection(),b={},c={},a,f;a=g.getRangeAt(0);b.node=a.endContainer;c.node=b.node.getElement();c.p=c.node.getStyleHolder();c.deepLast=c.p.getDeepLast();f=c.node.isEmpty()||c.node.isImg&&!c.node.next()||c.node.isStyleHolder&&c.node.children.length===1&&c.node.first().isImg||a.endOffset===b.node.length&&c.deepLast.elementId===c.node.elementId;return f},selectionToUp:function(h){var g=this,b={},d={},f=h,j,c,a;a=f.range;b.node=a.startContainer;d.node=b.node.getElement();c=d.node.getManager();j=g.getCursorUp(f);if(j){g.disableEditable(j.node);g.disableEditable(b.node);if(c.selectionToUp){c.setCursor({startNode:j.node,startOffset:j.offset,endNode:a.endContainer,endOffset:a.endOffset})}else{d.cur=j.node.getElement();if(d.cur.equal(d.node)){g.enableAllEditable()}c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:j.node,endOffset:j.offset})}c.syncButtons()}else{c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:a.endContainer,endOffset:a.endOffset})}},selectionToDown:function(h){var g=this,b={},d={},f=h,j,c,a;a=f.range;b.node=a.endContainer;d.node=b.node.getElement();c=d.node.getManager();j=g.getCursorDown(f);if(j){g.disableEditable(j.node);g.disableEditable(b.node);if(!c.selectionToUp){c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:j.node,endOffset:j.offset})}else{d.cur=j.node.getElement();if(d.cur.equal(d.node)){g.enableAllEditable()}c.setCursor({startNode:j.node,startOffset:j.offset,endNode:a.endContainer,endOffset:a.endOffset})}c.syncButtons()}else{c.setCursor({startNode:a.startContainer,startOffset:a.startOffset,endNode:a.endContainer,endOffset:a.endOffset})}},cursorToDown:function(h){var g=this,b={},d={},f=h,j,c,a;a=f.range;b.node=a.endContainer;d.node=b.node.getElement();c=d.node.getManager();j=g.getCursorDown(f);if(j){c.setCursor({startNode:j.node,startOffset:j.offset});c.syncButtons()}},cursorToUp:function(h){var g=this,b={},d={},f=h,j,c,a;a=f.range;b.node=a.startContainer;d.node=b.node.getElement();c=d.node.getManager();j=g.getCursorUp(f);if(j){c.setCursor({startNode:j.node,startOffset:j.offset});c.syncButtons()}},cursorToLeft:function(h){var j=this,b=window.getSelection(),a={},f={},d,c,g,k;g=b.getRangeAt(0);a.node=g.startContainer;f.node=a.node.getElement();k=a.node.viewportId;d=f.node.getManager();f.p=f.node.getStyleHolder();f.prev=j.getPrevElement(f.p);if(f.prev){f.lastDeep=f.prev.getDeepLast();c=f.lastDeep.getNodeHelper();a.lastDeep=c.getNode(k);d.setCursor({startNode:a.lastDeep,startOffset:a.lastDeep.length});h.preventDefault()}},cursorToRight:function(h){var j=this,b=window.getSelection(),a={},f={},d,c,g,k;g=b.getRangeAt(0);a.node=g.endContainer;f.node=a.node.getElement();k=a.node.viewportId;d=f.node.getManager();f.p=f.node.getStyleHolder();f.next=j.getNextElement(f.p);if(f.next){f.firstDeep=f.next.getDeepFirst();c=f.firstDeep.getNodeHelper();a.firstDeep=c.getNode(k);d.setCursor({startNode:a.firstDeep});h.preventDefault()}},getCursorUp:function(f){var k=this,a={},d={},g=f,n=null,c,h,b,l,m;h=g.range;a.node=h.startContainer;d.node=a.node.getElement();m=a.node.viewportId;c=d.node.getManager();if(!c.selectionToUp){a.node=h.endContainer;d.node=a.node.getElement()}d.p=d.node.isStyleHolder?d.node:d.node.getStyleHolder();b=d.p.getNodeHelper();a.p=b.getNode(m);d.prev=k.getPrevElement(d.p);if(d.prev){d.lastDeep=d.prev.getDeepLast();b=d.lastDeep.getNodeHelper();a.lastDeep=b.getNode(m);if(d.lastDeep.isEmpty()){d.elem=d.lastDeep;d.offset=0}else{d.length=d.lastDeep.isText?d.lastDeep.getText().length:0;l=b.getXY(m,d.length);d.root=c.getContent();b=d.root.getNodeHelper();a.root=b.getNode(m);d.prevP=d.lastDeep.getStyleHolder();b=d.prevP.getNodeHelper();b.splitNode(m);try{l.curX=g.pos.x;a.elem=document.elementFromPoint(l.curX,l.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;while(!a.elem||!d.elem&&!a.elem.getTextElement){d.p.parent.clearMapCoords();a.root.scrollTop-=k.scrollTopBy;l.y+=k.scrollTopBy;a.elem=document.elementFromPoint(l.curX,l.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;if(l.y>10000){throw Error("Ошибка зацикливания. Не удается прокрутить окно вверх.")}}if(d.elem&&d.elem.isImg){d.offset=0}else{if(l.x>g.pos.x){while(!a.elem.getTextElement){l.curX+=5;a.elem=document.elementFromPoint(l.curX,l.y)}d.elem=a.elem.getTextElement();d.offset=Number(a.elem.getAttribute("data-offset"))}else{d.elem=d.lastDeep;d.offset=d.lastDeep.text.length}}}catch(j){Ext.log({level:"error",msg:"Не удалось рассчитать координаты курсора для смещения вверх"})}b.joinNode(m)}if(d.elem){b=d.elem.getNodeHelper();a.elem=b.getNode(m);n={node:a.elem,offset:d.offset}}}return n},getCursorDown:function(f){var k=this,a={},d={},g=f,o=null,c,h,b,m,n,l;h=g.range;a.node=h.endContainer;d.node=a.node.getElement();n=a.node.viewportId;c=d.node.getManager();if(c.selectionToUp){a.node=h.startContainer;d.node=a.node.getElement()}d.p=d.node.isStyleHolder?d.node:d.node.getStyleHolder();b=d.p.getNodeHelper();a.p=b.getNode(n);d.next=k.getNextElement(d.p);if(d.next){d.firstDeep=d.next.getDeepFirst();b=d.firstDeep.getNodeHelper();a.firstDeep=b.getNode(n);if(d.firstDeep.isEmpty()){d.elem=d.firstDeep;d.offset=0}else{m=b.getXY(n,0);d.lastDeep=d.next.getDeepLast();b=d.lastDeep.getNodeHelper();d.lastLength=d.lastDeep.isText?d.lastDeep.getText().length:0;l=b.getXY(n,d.lastLength);d.root=c.getContent();b=d.root.getNodeHelper();a.root=b.getNode(n);d.nextP=d.firstDeep.getStyleHolder();b=d.nextP.getNodeHelper();a.nextP=b.getNode(n);b.splitNode(n);try{m.curX=g.pos.x;a.elem=document.elementFromPoint(m.curX,m.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;while(!a.elem||!d.elem&&!a.elem.getTextElement){d.p.parent.clearMapCoords();a.root.scrollTop+=k.scrollTopBy;m.y-=k.scrollTopBy;a.elem=document.elementFromPoint(m.curX,m.y);d.elem=a.elem&&a.elem.getElement?a.elem.getElement():null;if(m.y<-100){throw Error("Ошибка зацикливания. Не удается прокрутить окно вниз.")}}if(d.elem&&d.elem.isImg){d.offset=0}else{if(m.x>g.pos.x){while(!a.elem.getTextElement){m.curX+=5;a.elem=document.elementFromPoint(m.curX,m.y)}}else{if(l.x<g.pos.x){while(!a.elem.getTextElement){m.curX-=5;a.elem=document.elementFromPoint(m.curX,m.y)}}}d.elem=a.elem.getTextElement();d.offset=Number(a.elem.getAttribute("data-offset"))}}catch(j){Ext.log({level:"error",msg:"Не удалось рассчитать координаты курсора для смещения вниз"})}b.joinNode(n)}if(d.elem){b=d.elem.getNodeHelper();a.elem=b.getNode(n);o={node:a.elem,offset:d.offset}}}return o},getPrevElement:function(b){var a={};a.prev=b.prev();a.parent=b.parent;while(!a.prev&&a.parent){a.prev=a.parent.prev();a.parent=a.parent.parent}return a.prev},getNextElement:function(b){var a={};a.next=b.next();a.parent=b.parent;while(!a.next&&a.parent){a.next=a.parent.next();a.parent=a.parent.parent}return a.next},disableEditable:function(f){var d=this,b={},a={},c,g;b.node=f.getElement();g=f.viewportId;b.p=b.node.getStyleHolder();c=b.p.getNodeHelper();a.p=c.getNode(g);a.p.setAttribute("contenteditable",false)}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractStyleHolderElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit,{},0,0,0,0,0,0,[FBEditor.editor.element.li,"LiElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractSplitNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var l=this,g=l.getData(),k=false,d={},a={},m={},b=window.getSelection(),h,f=FBEditor.editor.Factory,c;try{if(g.saveRange){d.node=g.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(g.saveRange)}h=b.getRangeAt(0);g.viewportId=h.startContainer.viewportId;g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,parentStart:h.commonAncestorContainer.parentNode,collapsed:h.collapsed,offset:{start:h.startOffset,end:h.endOffset}};console.log("split "+l.elementName,g.range);a.node=h.startContainer;d.node=a.node.getElement();a.p=a.node.parentNode;d.p=a.p.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(d.node.isEmpty()&&a.node.firstChild||d.node.isP){a.node=a.node.firstChild;d.node=a.node.getElement();a.p=a.node;d.p=a.p.getElement()}while(!d.p.hisName(l.elementName)){a.node=a.p;d.node=a.node.getElement();a.p=a.p.parentNode;d.p=a.p.getElement()}a.parentP=a.p.parentNode;d.parentP=a.parentP.getElement();a.nextP=a.p.nextSibling;d.newP=f.createElement(l.elementName);a.newP=d.newP.getNode(g.viewportId);if(a.nextP){d.nextP=a.nextP.getElement();d.parentP.insertBefore(d.newP,d.nextP);a.parentP.insertBefore(a.newP,a.nextP)}else{d.parentP.add(d.newP);a.parentP.appendChild(a.newP)}if(!d.p.isEmpty()&&g.range.start.getElement().isText){m.isEnd=g.range.end.nodeValue&&g.range.offset.end===g.range.end.nodeValue.length?c.isLastNode(a.p,g.range.end):false;m.isStart=g.range.offset.start===0?c.isFirstNode(a.p,g.range.start):false;a.common=a.p;d.common=d.p;a.container=g.range.start;a.parentContainer=a.container.parentNode;d.parentContainer=a.parentContainer.getElement();m.needSplit=!m.isStart&&!m.isEnd;m.needSplit=d.parentContainer.elementId===d.p.elementId&&g.range.end.nodeValue&&g.range.offset.end===g.range.end.nodeValue.length?false:m.needSplit;g.range.pos=m;console.log("pos",m,h.toString());if(m.needSplit){a.start=c.splitNode(d,a,g.range.offset.start);d.common.removeEmptyText();d.start=a.start.getElement();a.prev=a.start.previousSibling;d.prev=a.prev?a.prev.getElement():null;if(d.prev&&d.prev.isEmpty()){d.p.remove(d.prev);a.p.removeChild(a.prev)}if(d.start.isEmpty()){d.p.remove(d.start);a.p.removeChild(a.start);a.start=null}}else{if(g.range.offset.start===0){a.start=a.node}else{a.start=a.node.nextSibling}}a.next=a.start;while(a.next){a.buf=a.next.nextSibling;d.next=a.next.getElement();d.newP.add(d.next);a.newP.appendChild(a.next);a.next=a.buf}if(d.p.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(g.viewportId);d.p.add(d.empty);a.p.appendChild(a.empty);a.node=a.empty}}if(d.newP.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(g.viewportId);d.newP.add(d.empty);a.newP.appendChild(a.empty)}d.parentP.sync(g.viewportId);a.cursor=c.getDeepFirst(a.newP);c.setCursor({startNode:a.cursor});l.data.nodes=a;l.verifyElement(d.parentP);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return k},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},a,c;try{b=h.nodes;a=h.range;console.log("undo split "+g.elementName,b,h);d.p=b.p.getElement();d.node=b.node.getElement();d.newP=b.newP.getElement();d.parentP=b.parentP.getElement();d.prev=b.prev?b.prev.getElement():null;d.start=b.start?b.start.getElement():null;c=d.node.getManager();c.setSuspendEvent(true);b.cursor=a.start;if(d.p.isEmpty()&&d.newP.isEmpty()){b.cursor=b.node}else{if(d.p.isEmpty()){d.p.remove(d.node);b.p.removeChild(b.node)}if(!d.newP.isEmpty()){b.first=b.newP.firstChild;while(b.first){d.first=b.first.getElement();d.p.add(d.first);b.p.appendChild(b.first);b.first=b.newP.firstChild}b.cursor=b.cursor.parentNode?b.cursor:b.p.firstChild}if(d.prev&&d.prev.hisName(d.start.xmlTag)){c.joinNode(b.start);d.parentP.removeEmptyText()}}d.parentP.remove(d.newP);b.parentP.removeChild(b.newP);d.parentP.sync(h.viewportId);h.saveRange={startNode:b.cursor,startOffset:a.offset.start,focusElement:d.p};c.setCursor(h.saveRange);h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractSplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var k=this,f=k.getData(),j=false,d={},a={},b=window.getSelection(),g,c;try{if(f.saveRange){d.node=f.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(f.saveRange)}g=b.getRangeAt(0);if(g.collapsed){throw Error("Отсутствует выделение")}a.common=g.commonAncestorContainer;d.common=a.common.getElement();c=d.common.getManager();c.setSuspendEvent(true);f.viewportId=a.common.viewportId;d.startContainer=g.startContainer.getElement();d.endContainer=g.endContainer.getElement();if(d.startContainer.elementId===d.common.elementId&&d.endContainer.elementId===d.common.elementId&&!d.common.isText){throw Error("Некорректное выделение")}f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,parentStart:g.commonAncestorContainer.parentNode,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};if(d.startContainer.elementId===d.common.elementId&&!d.common.isText){f.range.start=a.common.firstChild;f.range.offset.start=0;d.startContainer=f.range.start.getElement()}else{if(d.endContainer.elementId===d.common.elementId&&!d.common.isText){f.range.end=a.common.lastChild;f.range.offset.end=0;d.endContainer=f.range.end.getElement()}}if(d.startContainer.elementId===d.endContainer.elementId&&!d.common.isText){a.common=f.range.start;f.range.common=a.common;d.common=a.common.getElement()}console.log("remove range "+k.elementName,f.range);a.removed=[];a.cursor=a.common;a.startCursor=f.range.offset.start;if(d.common.isText){a.needText=true;a.parent=a.common.parentNode;d.parent=a.parent.getElement();f.oldValue=a.common.nodeValue;if(f.range.offset.start===0&&f.range.offset.end===a.common.nodeValue.length){a.next=a.common.nextSibling;a.prev=a.common.previousSibling;d.parent.removeAll(d.common);a.parent.removeChild(a.parent.firstChild);if(!d.parent.isStyleHolder){a.needAddText=true;while(!d.parent.isStyleHolder&&d.parent.isEmpty){a.common=a.parent;d.common=a.common.getElement();a.parent=a.parent.parentNode;d.parent=a.parent.getElement()}a.next=a.common.nextSibling;a.prev=a.common.previousSibling;d.parent.remove(d.common);a.parent.removeChild(a.common)}if(!d.parent.isEmpty()){a.cursor=a.next?a.next:a.prev;if(a.next){while(a.cursor&&a.cursor.firstChild){a.cursor=a.cursor.firstChild}}else{while(a.cursor&&a.cursor.lastChild){a.cursor=a.cursor.lastChild}a.startCursor=a.cursor.getElement().isText?a.cursor.nodeValue.length:0}}}else{d.startValue=a.common.nodeValue.substring(0,f.range.offset.start);d.endValue=a.common.nodeValue.substring(f.range.offset.end);d.common.setText(d.startValue+d.endValue);a.common.nodeValue=d.startValue+d.endValue}}else{d.startContainer=g.startContainer.getElement();d.endContainer=g.endContainer.getElement();d.needPrevEnd=d.endContainer.isText&&f.range.offset.end<d.endContainer.text.length;a.common=f.range.common;d.common=a.common.getElement();a.container=f.range.end;a.end=c.splitNode(d,a,f.range.offset.end);a.end=d.needPrevEnd?a.end.previousSibling:a.end;d.end=a.end.getElement();if(d.end.isEmpty()){a.prev=a.end.previousSibling;d.common.remove(d.end);a.common.removeChild(a.end);a.end=a.prev;d.end=a.end.getElement()}a.container=f.range.start;a.start=c.splitNode(d,a,f.range.offset.start);d.start=a.start.getElement();a.prev=a.start.previousSibling;d.prev=a.prev?a.prev.getElement():null;if(d.prev&&d.prev.isEmpty()){d.common.remove(d.prev);a.common.removeChild(a.prev)}a.parent=a.common;d.parent=a.parent.getElement();a.nextCursor=a.end.nextSibling;a.prevCursor=a.start.previousSibling;d.nextCursor=a.nextCursor?a.nextCursor.getElement():null;d.prevCursor=a.prevCursor?a.prevCursor.getElement():null;a.next=a.start;d.next=a.next?a.next.getElement():null;while(d.next&&d.next.elementId!==d.end.elementId){a.buf=a.next.nextSibling;a.removed.push(a.next);d.parent.remove(d.next);a.parent.removeChild(a.next);a.next=a.buf;d.next=a.next?a.next.getElement():null}a.removed.push(a.end);d.parent.remove(d.end);a.parent.removeChild(a.end);a.start=a.prevCursor;d.start=a.start?a.start.getElement():null;a.end=a.nextCursor;d.end=a.end?a.end.getElement():null;if(d.prevCursor&&d.nextCursor&&d.prevCursor.isText&&d.nextCursor.isText){c.joinNode(a.nextCursor);a.cursor=a.prevCursor;f.range.needSplit=true}else{if(!d.parent.isEmpty()){a.cursor=a.nextCursor?a.nextCursor:a.prevCursor;if(a.nextCursor){a.startCursor=0}else{while(a.cursor.firstChild){a.cursor=a.cursor.firstChild}a.startCursor=a.cursor.nodeValue.length}}}}if(d.parent.isEmpty()){d.empty=c.createEmptyElement();a.empty=d.empty.getNode(f.viewportId);d.parent.add(d.empty);a.parent.appendChild(a.empty);a.cursor=a.empty}d.parent.sync(f.viewportId);c.setCursor({startNode:a.cursor,startOffset:a.startCursor,focusElement:a.cursor.getElement()});f.nodes=a;f.els=d;k.verifyElement(d.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});console.log("nodes",a);k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var k=this,d=k.getData(),j=false,c={},a={},f=FBEditor.editor.Factory,b,g;try{g=d.range;a=d.nodes;c=d.els;console.log("undo remove range "+k.elementName,d,a);b=c.parent.getManager();b.setSuspendEvent(true);if(c.parent.isEmpty()){a.empty=a.parent.firstChild;c.empty=a.empty.getElement();c.parent.remove(c.empty);a.parent.removeChild(a.empty)}if(a.needText){c.text=f.createElementText(d.oldValue);a.text=c.text.getNode(d.viewportId);if(a.needAddText){a.common=c.common.getNode(d.viewportId);a.deep=b.getDeepFirst(a.common);c.deep=a.deep.getElement();c.deep.add(c.text);a.deep.appendChild(a.text);a.text=a.common;c.text=c.common}if(c.parent.isEmpty()){c.parent.add(c.text);a.parent.appendChild(a.text);g.start=a.text;g.end=a.text}else{if(a.next){c.next=a.next.getElement();c.parent.insertBefore(c.text,c.next);a.parent.insertBefore(a.text,a.next);g.start=a.text;g.end=a.text}else{if(a.prev){c.parent.add(c.text);a.parent.appendChild(a.text);g.start=a.text;g.end=a.text}else{c.common.setText(d.oldValue);a.common.nodeValue=d.oldValue}}}if(a.needAddText){g.start=b.getDeepFirst(a.text);g.end=g.start}}if(a.removed.length){if(g.needSplit){c.common=g.common.getElement();a.container=a.cursor;a.nextCursor=b.splitNode(c,a,g.offset.start)}a.startCursor=a.prevCursor?a.prevCursor:a.removed[0];while(a.startCursor.firstChild){a.startCursor=a.startCursor.firstChild}g.start=a.startCursor;if(a.nextCursor&&!a.nextCursor.parentNode){if(a.prevCursor&&a.prevCursor.parentNode&&a.prevCursor.nextSibling){a.nextCursor=a.prevCursor.nextSibling}else{}c.ignoreJoin=true;g.end=a.nextCursor}Ext.Array.each(a.removed,function(l){if(a.nextCursor){c.nextCursor=a.nextCursor.getElement();c.parent.insertBefore(l.getElement(),c.nextCursor);a.parent.insertBefore(l,a.nextCursor)}else{c.parent.add(l.getElement());a.parent.appendChild(l)}});a.endCursor=a.removed[a.removed.length-1];while(a.endCursor.lastChild){a.endCursor=a.endCursor.lastChild}g.end=a.endCursor;if(a.nextCursor&&!c.ignoreJoin){b.joinNode(a.nextCursor)}if(a.prevCursor){b.joinNode(a.removed[0])}c.parent.removeEmptyText(true)}c.parent.sync(d.viewportId);d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end};b.setCursor(d.saveRange);d.nodes=a;j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).remove()}b.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractRemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var k=this,f=k.getData(),j=false,d={},a={},b=window.getSelection(),c,g;try{g=b.getRangeAt(0);f.viewportId=g.commonAncestorContainer.viewportId;a.p=g.commonAncestorContainer;d.p=a.p.getElement();c=d.p.getManager();c.setSuspendEvent(true);while(!d.p.hisName(k.elementName)){a.p=a.p.parentNode;d.p=a.p.getElement()}a.parentP=a.p.parentNode;d.parentP=a.parentP.getElement();a.nextP=a.p.nextSibling;d.nextP=a.nextP?a.nextP.getElement():null;if(!d.nextP||!d.nextP.hisName(k.elementName)){return false}console.log("join next "+k.elementName,g);a.firstNext=a.nextP.firstChild;d.firstNext=a.firstNext.getElement();a.last=a.p.lastChild;d.last=a.last.getElement();a.cursor=a.firstNext;a.startCursor=0;if(d.p.isEmpty()&&d.nextP.isEmpty()){a.cursor=g.commonAncestorContainer;a.startCursor=0;a.bothEmpty=true}else{if(d.p.isEmpty()){d.p.remove(d.last);a.p.removeChild(a.last);a.curEmpty=true}else{if(d.nextP.isEmpty()){a.cursor=c.getDeepLast(a.p);a.startCursor=a.cursor.nodeValue?a.cursor.nodeValue.length:0;a.nextEmpty=true}}}if(!d.nextP.isEmpty()){a.first=a.firstNext;while(a.first){d.first=a.first.getElement();d.p.add(d.first);a.p.appendChild(a.first);a.first=a.nextP.firstChild}if(d.firstNext&&d.last&&d.firstNext.isText&&d.last.isText){a.offset=d.last.text.length;a.cursor=a.last;a.startCursor=a.offset;c.joinNode(a.firstNext)}}d.parentP.remove(d.nextP);a.parentP.removeChild(a.nextP);d.parentP.sync(f.viewportId);c.setCursor({startNode:a.cursor,startOffset:a.startCursor});f.nodes=a;k.verifyElement(d.parentP);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},a=FBEditor.editor.Factory,c;try{b=h.nodes;console.log("undo join next "+g.elementName,b,d);d.p=b.p.getElement();d.parentP=b.parentP.getElement();c=d.p.getManager();c.setSuspendEvent(true);d.newP=a.createElement(g.elementName);b.newP=d.newP.getNode(h.viewportId);b.nextP=b.p.nextSibling;d.nextP=b.nextP?b.nextP.getElement():null;if(d.nextP){d.parentP.insertBefore(d.newP,d.nextP);b.parentP.insertBefore(b.newP,b.nextP)}else{d.parentP.add(d.newP);b.parentP.appendChild(b.newP)}if(b.bothEmpty||b.nextEmpty){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.newP.add(d.empty);b.newP.appendChild(b.empty)}else{if(b.offset){d.common=d.p;b.container=b.cursor;b.cursor=c.splitNode(d,b,b.offset)}b.next=b.cursor;while(b.next){b.buf=b.next.nextSibling;d.next=b.next.getElement();d.newP.add(d.next);b.newP.appendChild(b.next);b.next=b.buf}if(d.p.isEmpty()){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.p.add(d.empty);b.p.appendChild(b.empty)}}d.parentP.sync(h.viewportId);b.cursor=c.getDeepLast(b.p);b.startCursor=b.cursor.getElement().getText().length;h.saveRange={startNode:b.cursor,startOffset:b.startCursor};c.setCursor(h.saveRange);h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractJoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var k=this,f=k.getData(),j=false,d={},a={},b=window.getSelection(),c,g;try{g=b.getRangeAt(0);f.viewportId=g.commonAncestorContainer.viewportId;a.p=g.commonAncestorContainer;d.p=a.p.getElement();c=d.p.getManager();c.setSuspendEvent(true);while(!d.p.hisName(k.elementName)){a.p=a.p.parentNode;d.p=a.p.getElement()}a.parentP=a.p.parentNode;d.parentP=a.parentP.getElement();a.prevP=a.p.previousSibling;d.prevP=a.prevP?a.prevP.getElement():null;if(!d.prevP||!d.prevP.hisName(k.elementName)){return false}console.log("join prev "+k.elementName,g);a.lastPrev=a.prevP.lastChild;d.lastPrev=a.lastPrev.getElement();a.firstP=a.p.firstChild;d.firstP=a.firstP.getElement();a.cursor=c.getDeepLast(a.lastPrev);a.startCursor=d.lastPrev.getText()?d.lastPrev.getText().length:0;f.curEmpty=d.p.isEmpty();if(!d.p.isEmpty()){if(d.prevP.isEmpty()){d.prevP.remove(d.lastPrev);a.prevP.removeChild(a.lastPrev);a.prevEmpty=true}a.first=a.firstP;while(a.first){d.first=a.first.getElement();d.prevP.add(d.first);a.prevP.appendChild(a.first);a.first=a.p.firstChild}a.cursor=c.getDeepFirst(a.firstP);a.startCursor=0;if(d.lastPrev&&d.firstP&&d.lastPrev.isText&&d.firstP.isText){a.offset=d.lastPrev.text.length;a.cursor=a.lastPrev;a.startCursor=a.offset;c.joinNode(a.firstP)}}d.parentP.remove(d.p);a.parentP.removeChild(a.p);d.parentP.sync(f.viewportId);c.setCursor({startNode:a.cursor,startOffset:a.startCursor});f.nodes=a;k.verifyElement(d.parentP);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(d.parent).removePrev()}c.setSuspendEvent(false);return j},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},a=FBEditor.editor.Factory,c;try{b=h.nodes;console.log("undo join prev "+g.elementName,b,h);d.prevP=b.prevP.getElement();d.parentP=b.parentP.getElement();c=d.parentP.getManager();c.setSuspendEvent(true);d.newP=a.createElement(g.elementName);b.newP=d.newP.getNode(h.viewportId);b.nextP=b.prevP.nextSibling;d.nextP=b.nextP?b.nextP.getElement():null;if(d.nextP){d.parentP.insertBefore(d.newP,d.nextP);b.parentP.insertBefore(b.newP,b.nextP)}else{d.parentP.add(d.newP);b.parentP.appendChild(b.newP)}if(h.curEmpty){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.newP.add(d.empty);b.newP.appendChild(b.empty)}else{if(b.offset){d.common=d.prevP;b.container=b.cursor;b.firstP=c.splitNode(d,b,b.offset)}b.next=b.firstP;while(b.next){b.buf=b.next.nextSibling;d.next=b.next.getElement();d.newP.add(d.next);b.newP.appendChild(b.next);b.next=b.buf}if(d.prevP.isEmpty()){d.empty=c.createEmptyElement();b.empty=d.empty.getNode(h.viewportId);d.prevP.add(d.empty);b.prevP.appendChild(b.empty)}}d.parentP.sync(h.viewportId);b.cursor=c.getDeepFirst(b.newP);h.saveRange={startNode:b.cursor};c.setCursor(h.saveRange);h.nodes=b;f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.styleholder,"AbstractJoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.li.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"li"},0,0,0,0,0,0,[FBEditor.editor.command.li,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.li.LiElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.li.LiElementController",controllerClassWebkit:"FBEditor.editor.element.li.LiElementControllerWebKit",htmlTag:"li",xmlTag:"li",cls:"el-li el-styleholder",isLi:true,getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<li><br\/><\/li>/gi,"<li></li>");return a}},0,0,0,0,0,0,[FBEditor.editor.element.li,"LiElement"],0));(Ext.cmd.derive("FBEditor.editor.element.marker.img.ImgElement",FBEditor.editor.element.img.ImgElement,{cls:"el-img-marker",setNode:function(b){var a=this;FBEditor.editor.element.img.ImgElement.prototype.setNode.apply(this,arguments);b.getElement=function(){return a.parent.parent}}},0,0,0,0,0,0,[FBEditor.editor.element.marker.img,"ImgElement"],0));(Ext.cmd.derive("FBEditor.editor.element.marker.MarkerElement",FBEditor.editor.element.AbstractElement,{htmlTag:"marker",xmlTag:"marker",cls:"el-marker",img:null,isMarker:true,constructor:function(){var b=this,a;FBEditor.editor.element.AbstractElement.prototype.constructor.apply(this,arguments);a=b.children[0];b.children=[];b.img=Ext.create("FBEditor.editor.element.marker.img.ImgElement",a.attributes);b.img.parent=b},getNode:function(d){var c=this,a=c.htmlTag,b;b=document.createElement(a);b.viewportId=d;c.setNode(b);b.appendChild(c.img.getNode(d));return b},getXml:function(){var d=this,b=d.xmlTag,c,a;a=d.getAttributesXml();c="<"+b;c+=a?" "+a:"";if(d.img){c+=">"+d.img.getXml()+"</"+b+">"}else{c+="/>"}return c},setNode:function(b){var a=this;FBEditor.editor.element.AbstractElement.prototype.setNode.apply(this,arguments);b.getElement=function(){return a.parent}}},1,0,0,0,0,0,[FBEditor.editor.element.marker,"MarkerElement"],0));(Ext.cmd.derive("FBEditor.editor.element.note.NoteElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.note,"NoteElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.note.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"note"},0,0,0,0,0,0,[FBEditor.editor.command.note,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.note.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"note"},0,0,0,0,0,0,[FBEditor.editor.command.note,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.note.NoteElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.note.NoteElementController",htmlTag:"note",xmlTag:"note",cls:"el-note",showedOnTree:false,defaultAttributes:{href:"undefined"},getAttributesXml:function(b){var c=this,a="";Ext.Object.each(c.attributes,function(d,f){a+=(d==="href"&&!b?"l:":"")+d+'="'+f+'" '});return a},getBlock:function(){return this}},0,0,0,0,0,0,[FBEditor.editor.element.note,"NoteElement"],0));(Ext.cmd.derive("FBEditor.editor.command.notebody.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"notebody",createElement:function(c,b){var d=this,f=d.getData(),a=FBEditor.editor.Factory;b.parent=b.node.parentNode;b.node=b.parent.getElement().isNote?b.parent:b.node;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;c.node=a.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(f.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command.notebody,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.notebody.NotebodyElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(f,b){var m=this,j={},d={},c=m.getNameElement(),g,l,a,k,h;f=f||window.getSelection();k=f.getRangeAt(0);d.node=k.endContainer;j.node=d.node.getElement();d.parent=d.node.parentNode;j.parent=d.parent.getElement();g=j.node.getManager();while(!(j.parent.isNotes||j.parent.isRoot)){d.node=d.parent;j.node=d.node.getElement();d.parent=d.node.parentNode;j.parent=d.parent.getElement()}if(!j.parent.isNotes){return false}d.parent=d.node.parentNode;j.parent=d.parent.getElement();d.first=d.parent.firstChild;j.first=d.first?d.first.getElement():null;h=g.getNamesElements(j.parent);if(!j.first.isTitle){h.unshift(c)}else{h.splice(1,0,c)}a=g.getSchema();c=j.parent.getName();l=a.verify(c,h)?d.node:false;return l}},0,0,0,0,0,0,[FBEditor.editor.element.notebody,"NotebodyElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.notebody.NotebodyElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.notebody.NotebodyElementController",htmlTag:"notebody",xmlTag:"notebody",cls:"el-notebody",splittable:true,isNotebody:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Сноска");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.notebody,"NotebodyElement"],0));(Ext.cmd.derive("FBEditor.editor.command.notes.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"notes",createElement:function(b,a){var c=this,d=c.getData();a.parent=d.node;b.parent=a.parent.getElement();b.node=FBEditor.editor.Factory.createElement(c.elementName);b=Ext.apply(b,b.node.createScaffold());a.node=b.node.getNode(d.viewportId);b.parent.add(b.node);a.parent.appendChild(a.node)}},0,0,0,0,0,0,[FBEditor.editor.command.notes,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.notes.NotesElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(f,d){var c={},b={},a,g;a=f&&f.rangeCount?f.getRangeAt(0):null;if(!a){return false}b.node=a.startContainer;g=b.node.viewportId;c.node=b.node.getElement();c.root=c.node.getRoot();b.root=c.root.nodes[g];return b.root}},0,0,0,0,0,0,[FBEditor.editor.element.notes,"NotesElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.notes.NotesElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.notes.NotesElementController",htmlTag:"notes",xmlTag:"notes",cls:"el-notes",isNotes:true,createScaffold:function(){var b=this,a={};a.title=FBEditor.editor.Factory.createElement("title");a=Ext.apply(a,a.title.createScaffold());b.add(a.title);a.notebody=FBEditor.editor.Factory.createElement("notebody");a=Ext.apply(a,a.notebody.createScaffold());b.add(a.notebody);return a}},0,0,0,0,0,0,[FBEditor.editor.element.notes,"NotesElement"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractLiHolderElement",FBEditor.editor.element.AbstractElement,{isLiHolder:true,getOnlyStylesChildren:function(a){var b=this;Ext.Array.each(b.children,function(c){var d=c.children[0];if(d.isP){while(d.children.length){c.add(d.children[0])}c.remove(d)}});a.add(b)},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(d){var f=a.createElement("p");Ext.Array.each(d.children,function(g){f.add(g)});b.add(f)})}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractLiHolderElement"],0));(Ext.cmd.derive("FBEditor.editor.command.AbstractCreateLiHolderCommand",FBEditor.editor.command.AbstractCommand,{elementName:null,execute:function(){var l=this,f=l.getData(),k=false,d={},a={},g=FBEditor.editor.Factory,c,n,m,b,h;try{if(f.saveRange){d.node=f.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(f.saveRange)}b=f.sel||window.getSelection();h=b.getRangeAt(0);d.node=f.node.getElement();c=d.node.getManager();c.setSuspendEvent(true);f.viewportId=f.node.viewportId;m=f.viewportId;f.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,parentStart:h.startContainer.parentNode,collapsed:h.collapsed,offset:{start:h.startOffset,end:h.endOffset}};a.pp=[];a.firstP=f.node;d.firstP=a.firstP.getElement();a.pp.push(a.firstP);n=d.firstP.isLi;f.isInner=n;a.lastP=h.endContainer;d.lastP=a.lastP.getElement();d.lastP=n?d.lastP.getParentName("li"):d.lastP.getParentName("p");a.lastP=d.lastP?d.lastP.nodes[m]:null;if(d.firstP.elementId!==d.lastP.elementId){a.next=a.firstP.nextSibling;d.next=a.next?a.next.getElement():null;while(d.next&&d.next.isP&&d.next.elementId!==d.lastP.elementId){a.pp.push(a.next);a.next=a.next.nextSibling;d.next=a.next?a.next.getElement():null}if(d.next&&d.next.elementId===d.lastP.elementId){a.pp.push(a.next)}}a.parent=a.firstP.parentNode;d.parent=a.parent.getElement();d.node=g.createElement(l.elementName);a.node=d.node.getNode(f.viewportId);d.parent.insertBefore(d.node,d.firstP);a.parent.insertBefore(a.node,a.firstP);Ext.Array.each(a.pp,function(r){var o={},q={};q.p=r;o.p=q.p.getElement();o.node=g.createElement("li");q.node=o.node.getNode(f.viewportId);d.node.add(o.node);a.node.appendChild(q.node);q.first=q.p.firstChild;o.first=q.first?q.first.getElement():null;while(o.first){o.node.add(o.first);q.node.appendChild(q.first);q.first=q.p.firstChild;o.first=q.first?q.first.getElement():null}d.parent.remove(o.p);a.parent.removeChild(q.p)});d.parent.sync(f.viewportId);c.setSuspendEvent(false);c.setCursor({startNode:f.range.start,startOffset:f.range.offset.start,focusElement:d.node.children[0]});f.saveNodes=a;l.verifyElement(d.parent);k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return k},unExecute:function(){var k=this,d=k.getData(),j=false,c={},a={},f=FBEditor.editor.Factory,b,g,l,m;try{g=d.range;a=d.saveNodes;l=a.node.viewportId;m=d.isInner;c.node=a.node.getElement();c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);a.pp=[];a.li=a.node.firstChild;c.li=a.li?a.li.getElement():null;while(c.li){c.p=m?f.createElement("li"):f.createElement("p");a.p=c.p.getNode(l);a.pp.push(a.p);c.parent.insertBefore(c.p,c.node);a.parent.insertBefore(a.p,a.node);a.first=a.li.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){c.p.add(c.first);a.p.appendChild(a.first);a.first=a.li.firstChild;c.first=a.first?a.first.getElement():null}a.li=a.li.nextSibling;c.li=a.li?a.li.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(l);b.setSuspendEvent(false);d.saveRange={startNode:g.start,endNode:g.end,startOffset:g.offset.start,endOffset:g.offset.end,focusElement:g.common.getElement()};b.setCursor(d.saveRange);d.node=a.pp[0];j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).remove()}b.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command,"AbstractCreateLiHolderCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ol.CreateCommand",FBEditor.editor.command.AbstractCreateLiHolderCommand,{elementName:"ol"},0,0,0,0,0,0,[FBEditor.editor.command.ol,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ol.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"ol"},0,0,0,0,0,0,[FBEditor.editor.command.ol,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.AbstractLiHolderElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(d){var c={},b={},f,a;a=d.getRangeAt(0);b.node=a.startContainer;f=b.node.viewportId;c.node=b.node.getElement?b.node.getElement():null;c.p=c.node?c.node.getParentName("p"):null;b.p=c.p?c.p.nodes[f]:null;if(!b.p){c.li=c.node?c.node.getParentName("li"):null;b.node=c.li?c.li.nodes[f]:null}else{b.node=b.p}return b.node}},0,0,0,0,0,0,[FBEditor.editor.element,"AbstractLiHolderElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ol.OlElementController",FBEditor.editor.element.AbstractLiHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.ol,"OlElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ol.OlElement",FBEditor.editor.element.AbstractLiHolderElement,{controllerClass:"FBEditor.editor.element.ol.OlElementController",htmlTag:"ol",xmlTag:"ol",cls:"el-ol"},0,0,0,0,0,0,[FBEditor.editor.element.ol,"OlElement"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit,{},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.command.p.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.p.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"p"},0,0,0,0,0,0,[FBEditor.editor.command.p,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.p.PElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.p.PElementController",controllerClassWebkit:"FBEditor.editor.element.p.PElementControllerWebKit",htmlTag:"p",xmlTag:"p",cls:"el-p el-styleholder",isP:true,getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<p><br(.*?)\/><\/p>/gi,"<br$1/>");return a}},0,0,0,0,0,0,[FBEditor.editor.element.p,"PElement"],0));(Ext.cmd.derive("FBEditor.editor.command.poem.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"poem"},0,0,0,0,0,0,[FBEditor.editor.command.poem,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.poem.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"poem",unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo create range "+j.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);a.first=a.stanza.firstChild;c.first=a.first.getElement();while(c.first){c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.stanza.firstChild;c.first=a.first?a.first.getElement():null}c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(k);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},createNewElement:function(c,b){var d=this,f=d.getData(),a=FBEditor.editor.Factory;c.node=a.createElement(d.elementName);b.node=c.node.getNode(f.viewportId);c.stanza=a.createElement("stanza");b.stanza=c.stanza.getNode(f.viewportId);c.node.add(c.stanza);b.node.appendChild(b.stanza);c.common.insertBefore(c.node,c.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;c.next=b.next.getElement();while(c.next&&c.next.elementId!==c.endContainer.elementId){b.buf=b.next.nextSibling;c.stanza.add(c.next);b.stanza.appendChild(b.next);b.next=b.buf;c.next=b.next?b.next.getElement():null}if(c.next&&c.next.elementId===c.endContainer.elementId&&!f.range.joinEndContainer){c.stanza.add(c.next);b.stanza.appendChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command.poem,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.poem.PoemElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.poem,"PoemElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.poem.PoemElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.poem.PoemElementController",htmlTag:"poem",xmlTag:"poem",cls:"el-poem",isPoem:true,createScaffold:function(){var b=this,a={};a.stanza=FBEditor.editor.Factory.createElement("stanza");a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Поэма");a.p.add(a.t);a.stanza.add(a.p);b.add(a.stanza);return a},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(f){var d=a.createElement("p");Ext.Array.each(f.children,function(g){d.add(g)});b.add(d)})}},0,0,0,0,0,0,[FBEditor.editor.element.poem,"PoemElement"],0));(Ext.cmd.derive("FBEditor.editor.element.pre.PreElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.pre,"PreElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.pre.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"pre"},0,0,0,0,0,0,[FBEditor.editor.command.pre,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.pre.PreElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.pre.PreElementController",htmlTag:"pre",xmlTag:"pre",cls:"el-pre",splittable:true,isPre:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Блок предварительно отформатированного текста");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.pre,"PreElement"],0));(Ext.cmd.derive("FBEditor.editor.command.section.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"section",createElement:function(c,b){var d=this,f=d.getData(),a;a=f.opts&&f.opts.inner;b.parent=b.node.parentNode;c.parent=b.parent.getElement();b.next=b.node.nextSibling;if(a){while(!c.parent.isSection&&!c.parent.isRoot){b.parent=b.parent.parentNode;c.parent=b.parent.getElement()}b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next){if(c.next.isSection){throw Error("Section exists")}b.next=b.next.nextSibling;c.next=b.next?b.next.getElement():null}c.node=FBEditor.editor.Factory.createElement(d.elementName);b.node=c.node.getNode(f.viewportId);b.last=b.lastChild;c.last=b.last?b.last.getElement():null;if(c.last&&c.last.isNotes){c.parent.insertBefore(c.node,c.last);b.parent.insertBefore(b.node,b.last)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}c.except=["title","epigraph","annotation"];b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next&&c.next.elementId!==c.node.elementId){b.buf=b.next.nextSibling;if(!Ext.Array.contains(c.except,c.next.xmlTag)){c.node.add(c.next);b.node.appendChild(b.next);c.parent.remove(c.next)}b.next=b.buf;c.next=b.next?b.next.getElement():null}}else{c.node=FBEditor.editor.Factory.createElement(d.elementName);c=Ext.apply(c,c.node.createScaffold());b.node=c.node.getNode(f.viewportId);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.node,c.next);b.parent.insertBefore(b.node,b.next)}else{c.parent.add(c.node);b.parent.appendChild(b.node)}}},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{k=d.opts&&d.opts.inner;a.node=d.saveNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);if(k){a.first=a.node.firstChild;while(a.first){c.first=a.first.getElement();c.parent.insertBefore(c.first,c.node);a.parent.insertBefore(a.first,a.node);a.first=a.node.firstChild}j.setCursor()}else{f=d.range;d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:c.parent};b.setCursor(d.saveRange)}c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(d.viewportId);b.suspendEvent=false;h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},setCursor:function(g,d){var h=this,j=h.getData(),c,b,a,f;a=j.opts&&j.opts.inner;if(!a){d.p=g.p.nodes[j.viewportId];j.saveRange={startNode:d.p.firstChild,startOffset:d.p.firstChild.length,focusElement:g.p}}else{c=j.range;b=!c.start.getElement().isText?c.start.getElement():c.parentStart.getElement();j.saveRange={startNode:c.start,startOffset:c.offset.start,focusElement:b}}f=j.saveRange.focusElement.getManager();f.setCursor(j.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.section,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.section.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"section",createElement:function(a,b){var c=this,d=c.getData();if(!d.range.collapsed){b.title=FBEditor.editor.Factory.createElement("title");b.node.add(b.title);a.title=b.title.getNode(d.viewportId);a.node.appendChild(a.title);a.next=a.startContainer;b.next=a.next.getElement();a.parentNext=a.next.parentNode;b.parentNext=a.parentNext.getElement();while(b.next&&b.next.elementId!==b.endContainer.elementId){a.buf=a.next.nextSibling;b.title.add(b.next);a.title.appendChild(a.next);a.next=a.buf;b.next=a.next?a.next.getElement():null}a.cursor=a.title}},restoreElement:function(b,c,a){var d=this,f=d.getData();if(b.title){c.title=b.title.getElement();b.first=b.title.firstChild;while(b.first){c.first=b.first.getElement();b.prevNode.appendChild(b.first);c.prevNode.add(c.first);c.title.remove(c.first);b.first=b.title.firstChild}b.node.removeChild(b.title);c.node.remove(c.title)}}},0,0,0,0,0,0,[FBEditor.editor.command.section,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.section.SectionElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(c,b){var a;c=c||window.getSelection();a=c.getRangeAt(0);return a.startContainer}},0,0,0,0,0,0,[FBEditor.editor.element.section,"SectionElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.section.SectionElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.section.SectionElementController",htmlTag:"section",xmlTag:"section",cls:"el-section",splittable:true,isSection:true,constructor:function(){var a=this;FBEditor.editor.element.AbstractElement.prototype.constructor.apply(this,arguments);a.attributes.id=Ext.data.identifier.Uuid.Global.generate()},createScaffold:function(){var b=this,a={};a.title=FBEditor.editor.Factory.createElement("title");a.pT=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Заголовок");a.pT.add(a.t);a.title.add(a.pT);b.add(a.title);a.p=FBEditor.editor.Factory.createElement("p");a.t2=FBEditor.editor.Factory.createElementText("Текст");a.p.add(a.t2);b.add(a.p);return a}},1,0,0,0,0,0,[FBEditor.editor.element.section,"SectionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.spacing.SpacingElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.spacing,"SpacingElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.spacing.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"spacing"},0,0,0,0,0,0,[FBEditor.editor.command.spacing,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.spacing.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"spacing"},0,0,0,0,0,0,[FBEditor.editor.command.spacing,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.spacing.SpacingElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.spacing.SpacingElementController",htmlTag:"spacing",xmlTag:"spacing",cls:"el-spacing"},0,0,0,0,0,0,[FBEditor.editor.element.spacing,"SpacingElement"],0));(Ext.cmd.derive("FBEditor.editor.element.span.SpanElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"span",xmlTag:"span",cls:"el-span"},0,0,0,0,0,0,[FBEditor.editor.element.span,"SpanElement"],0));(Ext.cmd.derive("FBEditor.editor.command.stanza.SplitCommand",FBEditor.editor.command.AbstractSplitCommand,{elementName:"stanza"},0,0,0,0,0,0,[FBEditor.editor.command.stanza,"SplitCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.stanza.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"stanza"},0,0,0,0,0,0,[FBEditor.editor.command.stanza,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.stanza.StanzaElementController",FBEditor.editor.element.AbstractUnboundedElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.stanza,"StanzaElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.stanza.StanzaElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.stanza.StanzaElementController",htmlTag:"stanza",xmlTag:"stanza",cls:"el-stanza",splittable:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Стих");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.stanza,"StanzaElement"],0));(Ext.cmd.derive("FBEditor.editor.element.strikethrough.StrikethroughElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.strikethrough,"StrikethroughElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.strikethrough.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"strikethrough"},0,0,0,0,0,0,[FBEditor.editor.command.strikethrough,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.strikethrough.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"strikethrough"},0,0,0,0,0,0,[FBEditor.editor.command.strikethrough,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.strikethrough.StrikethroughElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.strikethrough.StrikethroughElementController",htmlTag:"strikethrough",xmlTag:"strikethrough",cls:"el-strikethrough"},0,0,0,0,0,0,[FBEditor.editor.element.strikethrough,"StrikethroughElement"],0));(Ext.cmd.derive("FBEditor.editor.element.strong.StrongElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.strong,"StrongElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.strong.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"strong"},0,0,0,0,0,0,[FBEditor.editor.command.strong,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.strong.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"strong"},0,0,0,0,0,0,[FBEditor.editor.command.strong,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.strong.StrongElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.strong.StrongElementController",htmlTag:"strong",xmlTag:"strong",cls:"el-strong"},0,0,0,0,0,0,[FBEditor.editor.element.strong,"StrongElement"],0));(Ext.cmd.derive("FBEditor.editor.element.sub.SubElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.sub,"SubElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.sub.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"sub"},0,0,0,0,0,0,[FBEditor.editor.command.sub,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.sub.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"sub"},0,0,0,0,0,0,[FBEditor.editor.command.sub,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.sub.SubElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"sub",xmlTag:"sub",cls:"el-sub"},0,0,0,0,0,0,[FBEditor.editor.element.sub,"SubElement"],0));(Ext.cmd.derive("FBEditor.editor.command.subscription.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"subscription",createElement:function(d,c){var f=this,g=f.getData(),b=g.range,a=FBEditor.editor.Factory;c.parent=c.node.parentNode;d.parent=c.parent.getElement();c.last=c.parent.lastChild;d.last=c.last?c.last.getElement():null;if(d.last&&d.last.isSubscription){throw Error("Subscription exists")}d.node=a.createElement(f.elementName);if(b.collapsed){d.p=a.createElement("p");d.t=a.createElementText("Подпись");d.p.add(d.t);d.node.add(d.p)}c.node=d.node.getNode(g.viewportId);d.parent.add(d.node);c.parent.appendChild(c.node);if(!b.collapsed){c.p=b.start;d.p=c.p.getElement();d.isRoot=d.p.isRoot;while(d.p&&!d.p.isP){c.p=d.isRoot?c.p.firstChild:c.p.parentNode;d.p=c.p?c.p.getElement():null}c.next=c.p.nextSibling;d.node.add(d.p);c.node.appendChild(c.p)}f.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.p,d.next);b.parent.insertBefore(b.p,b.next)}else{d.parent.add(d.p);b.parent.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.subscription,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.subscription.SubscriptionElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(f,d){var c={},b={},a;f=f||window.getSelection();a=f.getRangeAt(0);b.node=a.commonAncestorContainer;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();while(c.parent.isStyleHolder||c.parent.isStyleType){b.node=b.parent;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement()}return b.node},getNameElementsVerify:function(b){var g=this,f={},d=g.getElement().getManager(),a,c;c=g.getNameElement();f.parent=b.parent.getElement();a=d.getNamesElements(f.parent);a.push(c);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subscription,"SubscriptionElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.subscription.SubscriptionElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.subscription.SubscriptionElementController",htmlTag:"subscription",xmlTag:"subscription",cls:"el-subscription",isSubscription:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Подпись");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subscription,"SubscriptionElement"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElementController",FBEditor.editor.element.AbstractStyleHolderElementController,{createFromRange:true,getNodeVerify:function(h,g){var f=this,d={},b={},c,a;c=f.getNameElement();h=h||window.getSelection();a=h.getRangeAt(0);b.node=a.commonAncestorContainer;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement();while(d.parent.isStyleHolder||d.parent.isStyleType){b.node=b.parent;d.node=b.node.getElement();b.parent=b.node.parentNode;d.parent=b.parent.getElement()}d.parent=b.parent.getElement();b.node=d.parent.hisName(c)?b.parent:b.node;return b.node},checkRangeVerify:function(a){return true},getNameElementsVerify:function(b){var g=this,f={},d=g.getElement().getManager(),a,c;c=g.getNameElement();f.parent=b.parent.getElement();b.node=f.parent.hisName(c)?b.parent:b.node;b.parent=b.node.parentNode;f.node=b.node.getElement();f.parent=b.parent.getElement();a=d.getNamesElements(f.parent);a.splice(f.parent.getChildPosition(f.node)+1,0,c);return a}},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElementControllerWebKit",FBEditor.editor.element.AbstractStyleHolderElementControllerWebKit,{},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElementControllerWebKit"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"subtitle",setCursor:function(c,a){var d=this,g=window.getSelection(),f=d.getData(),b;f.oldRange=g.getRangeAt(0);a.p=c.node.nodes[f.viewportId];f.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b=c.node.getManager();b.setCursor(f.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeCommand,{elementName:"subtitle",unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{f=d.range;a=d.saveNodes;k=a.node.viewportId;console.log("undo create range "+j.elementName,f,a);c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);Ext.Array.each(a.links,function(m){var n=m.el,l=n.getElement();c.parent.insertBefore(l,c.node);a.parent.insertBefore(n,a.node);Ext.Array.each(m.children,function(p){var o=p.getElement();l.add(o);n.appendChild(p)})});c.parent.remove(c.node);a.parent.removeChild(a.node);if(f.joinStartContainer){b.joinNode(a.startContainer)}if(f.joinEndContainer){b.joinNode(a.endContainer)}c.parent.sync(k);if(!f.joinStartContainer){f.start=a.startContainer;f.common=f.start.getElement().isText?f.start.parentNode:f.start}else{f.common=f.common.getElement().isText?f.common.parentNode:f.common}f.common=f.common?f.common:f.prevParentStart.parentNode;f.start=f.start.parentNode?f.start:f.prevParentStart.nextSibling;f.end=f.collapsed||!f.end.parentNode?f.start:f.end;f.end=!f.collapsed&&f.end.firstChild?f.end.firstChild:f.end;d.saveRange={startNode:f.start,endNode:f.end,startOffset:f.offset.start,endOffset:f.offset.end};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},createNewElement:function(d,b){var f=this,g=f.getData(),a=FBEditor.editor.Factory,c;d.node=a.createElement(f.elementName);b.node=d.node.getNode(g.viewportId);b.links=[];d.common.insertBefore(d.node,d.startContainer);b.common.insertBefore(b.node,b.startContainer);b.next=b.startContainer;d.next=b.next.getElement();while(d.next&&d.next.elementId!==d.endContainer.elementId){b.buf=b.next.nextSibling;c={el:b.next,children:[]};b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null;while(d.first){c.children.push(b.first);d.node.add(d.first);b.node.appendChild(b.first);b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null}d.common.remove(d.next);b.common.removeChild(b.next);b.links.push(c);b.next=b.buf;d.next=b.next?b.next.getElement():null}if(d.next&&d.next.elementId===d.endContainer.elementId&&!g.range.joinEndContainer){b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null;while(d.first){d.node.add(d.first);b.node.appendChild(b.first);b.first=b.next.firstChild;d.first=b.first?b.first.getElement():null}d.common.remove(d.next);b.common.removeChild(b.next)}}},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.SplitNodeCommand",FBEditor.editor.command.styleholder.AbstractSplitNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"SplitNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.RemoveRangeNodesCommand",FBEditor.editor.command.styleholder.AbstractRemoveRangeNodesCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"RemoveRangeNodesCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.JoinNextNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinNextNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"JoinNextNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.subtitle.JoinPrevNodeCommand",FBEditor.editor.command.styleholder.AbstractJoinPrevNodeCommand,{elementName:"subtitle"},0,0,0,0,0,0,[FBEditor.editor.command.subtitle,"JoinPrevNodeCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.subtitle.SubtitleElement",FBEditor.editor.element.AbstractStyleHolderElement,{controllerClass:"FBEditor.editor.element.subtitle.SubtitleElementController",controllerClassWebkit:"FBEditor.editor.element.subtitle.SubtitleElementControllerWebKit",htmlTag:"subtitle",xmlTag:"subtitle",cls:"el-subtitle el-styleholder",isSubtitle:true,showedOnTree:true,createScaffold:function(){var c=this,b={},a=FBEditor.editor.Factory;b.t=a.createElementText("Подзаголовок");c.add(b.t);return b},getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractStyleHolderElement.prototype.getXml.apply(this,arguments);a=a.replace(/<subtitle><br\/><\/subtitle>/gi,"<subtitle></subtitle>");return a}},0,0,0,0,0,0,[FBEditor.editor.element.subtitle,"SubtitleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.sup.SupElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.sup,"SupElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.sup.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"sup"},0,0,0,0,0,0,[FBEditor.editor.command.sup,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.sup.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"sup"},0,0,0,0,0,0,[FBEditor.editor.command.sup,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.sup.SupElement",FBEditor.editor.element.AbstractStyleElement,{htmlTag:"sup",xmlTag:"sup",cls:"el-sup"},0,0,0,0,0,0,[FBEditor.editor.element.sup,"SupElement"],0));(Ext.cmd.derive("FBEditor.editor.command.table.CreateCommand",FBEditor.editor.command.AbstractCreateUnboundedCommand,{elementName:"table",createElement:function(d,b){var f=this,g=f.getData(),a=FBEditor.editor.Factory,c;c=g.opts.size;b.parent=b.node.parentNode;d.parent=b.parent.getElement();b.node=d.parent.hisName(f.elementName)?b.parent:b.node;b.parent=b.node.parentNode;d.parent=b.parent.getElement();b.next=b.node.nextSibling;d.node=a.createElement(f.elementName);d=Ext.apply(d,d.node.createScaffold(c));b.node=d.node.getNode(g.viewportId);if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.node,d.next);b.parent.insertBefore(b.node,b.next)}else{d.parent.add(d.node);b.parent.appendChild(b.node)}}},0,0,0,0,0,0,[FBEditor.editor.command.table,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableElementController",FBEditor.editor.element.AbstractUnboundedElementController,{createFromRange:false},0,0,0,0,0,0,[FBEditor.editor.element.table,"TableElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.table.TableElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.table.TableElementController",htmlTag:"table",xmlTag:"table",cls:"el-table",isTable:true,createScaffold:function(f){var g=this,d={},a;f=f||[0,0];for(var c=0;c<=f[1];c++){d.tr=FBEditor.editor.Factory.createElement("tr");for(var b=0;b<=f[0];b++){d.td=FBEditor.editor.Factory.createElement("td");d.p=FBEditor.editor.Factory.createElement("p");d.br=FBEditor.editor.Factory.createElement("br");d.p.add(d.br);d.td.add(d.p);d.tr.add(d.td);if(c===0&&b===0){a=d.p}}g.add(d.tr)}d.p=a;return d},convertToText:function(b){var c=this,a=FBEditor.editor.Factory;Ext.Array.each(c.children,function(d){Ext.Array.each(d.children,function(g){var f=a.createElement("p");Ext.Array.each(g.children,function(h){f.add(h)});b.add(f)})})}},0,0,0,0,0,0,[FBEditor.editor.element.table,"TableElement"],0));(Ext.cmd.derive("FBEditor.editor.element.td.TdElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.td,"TdElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.td.TdElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.td.TdElementController",htmlTag:"td",xmlTag:"td",cls:"el-td",showedOnTree:false,isTd:true,isCell:true,links:null,_sizeSelection:null,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.br=FBEditor.editor.Factory.createElement("br");a.p.add(a.br);b.add(a.p);return a},getXml:function(){var b=this,a;a=FBEditor.editor.element.AbstractElement.prototype.getXml.apply(this,arguments);a=a.replace(/<td( .*?)?><br\/?>/gi,"<td$1><p></p>");return a},getPosition:function(){var c=this,b=c.parent,a,d;a=b.getChildPosition(c);d=b.parent.getChildPosition(b);return[a,d]},setColSpan:function(d){var c=this,a=c.attributes,b=c.nodes;if(d&&d>1){a.colspan=d;Ext.Object.each(b,function(f,g){g.setAttribute("colspan",d)})}else{if(a.colspan){delete a.colspan;Ext.Object.each(b,function(f,g){g.removeAttribute("colspan")})}}c.attributes=a},setRowSpan:function(d){var c=this,a=c.attributes,b=c.nodes;if(d&&d>1){a.rowspan=d;Ext.Object.each(b,function(f,g){g.setAttribute("rowspan",d)})}else{if(a.rowspan){delete a.rowspan;Ext.Object.each(b,function(f,g){g.removeAttribute("rowspan")})}}c.attributes=a},addLinks:function(a){var b=this;b.links=b.links||[];b.links.push(a)},getLinks:function(){return this.links},removeLinks:function(){this.links=null}},0,0,0,0,0,0,[FBEditor.editor.element.td,"TdElement"],0));(Ext.cmd.derive("FBEditor.editor.command.title.CreateCommand",FBEditor.editor.command.AbstractCreateCommand,{elementName:"title",createElement:function(f,c){var h=this,j=h.getData(),g=j.opts||{},b=j.range,a=FBEditor.editor.Factory,d;d=f.node.getManager();f.node=a.createElement(h.elementName);if(g.body){f.parent=d.getContent();c.parent=f.parent.nodes[j.viewportId]}else{c.parent=c.node.parentNode;c.node=c.parent.getElement().hisName(f.node.getName())?c.parent:c.node;c.parent=c.node.parentNode}c.first=c.parent.firstChild;f.parent=c.parent.getElement();if(b.collapsed){f.p=a.createElement("p");f.t=a.createElementText("Заголовок");f.p.add(f.t);f.node.add(f.p)}c.node=f.node.getNode(j.viewportId);if(c.first){f.first=c.first.getElement();f.parent.insertBefore(f.node,f.first);c.parent.insertBefore(c.node,c.first)}else{f.parent.add(f.node);c.parent.appendChild(c.node)}if(!b.collapsed){c.p=b.start;f.p=c.p.getElement();f.isRoot=f.p.isRoot;while(f.p&&!f.p.isP){c.p=f.isRoot?c.p.firstChild:c.p.parentNode;f.p=c.p?c.p.getElement():null}c.next=c.p.nextSibling;f.node.add(f.p);c.node.appendChild(c.p)}h.data.nodes=c},unExecute:function(){var g=this,h=g.getData(),f=false,d={},b={},c,a;try{a=h.range;if(a.collapsed){return FBEditor.editor.command.AbstractCreateCommand.prototype.unExecute.apply(this,arguments)}b=h.nodes;d.node=b.node.getElement();d.parent=b.parent.getElement();d.p=b.p.getElement();c=d.node.getManager();c.setSuspendEvent(true);if(b.next){d.next=b.next.getElement();d.parent.insertBefore(d.p,d.next);b.parent.insertBefore(b.p,b.next)}else{d.parent.add(d.p);b.parent.appendChild(b.p)}d.parent.remove(d.node);b.parent.removeChild(b.node);d.parent.sync(h.viewportId);b.cursor=c.getDeepLast(b.p);h.saveRange={startNode:b.cursor,startOffset:0,endNode:b.cursor,endOffset:b.cursor.length};c.setCursor(h.saveRange);f=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(d.parent).remove()}c.setSuspendEvent(false);return f}},0,0,0,0,0,0,[FBEditor.editor.command.title,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.title.TitleElementController",FBEditor.editor.element.AbstractElementController,{getNodeVerify:function(g,f){var d=this,c={},b={},a;g=g||window.getSelection();a=g.getRangeAt(0);b.node=a.commonAncestorContainer;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();while(c.parent.isStyleHolder||c.parent.isStyleType){b.node=b.parent;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement()}return b.node}},0,0,0,0,0,0,[FBEditor.editor.element.title,"TitleElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.title.TitleElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.title.TitleElementController",htmlTag:"header",xmlTag:"title",cls:"el-title",isTitle:true,createScaffold:function(){var b=this,a={};a.p=FBEditor.editor.Factory.createElement("p");a.t=FBEditor.editor.Factory.createElementText("Заголовок");a.p.add(a.t);b.add(a.p);return a}},0,0,0,0,0,0,[FBEditor.editor.element.title,"TitleElement"],0));(Ext.cmd.derive("FBEditor.editor.element.tr.TrElementController",FBEditor.editor.element.AbstractElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.tr,"TrElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.tr.TrElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.tr.TrElementController",htmlTag:"tr",xmlTag:"tr",cls:"el-tr",showedOnTree:false,isTr:true,createScaffold:function(){var b=this,a={};a.td=FBEditor.editor.Factory.createElement("td");a.p=FBEditor.editor.Factory.createElement("p");a.br=FBEditor.editor.Factory.createElement("br");a.p.add(a.br);a.td.add(a.p);b.add(a.td);return a}},0,0,0,0,0,0,[FBEditor.editor.element.tr,"TrElement"],0));(Ext.cmd.derive("FBEditor.editor.command.ul.CreateCommand",FBEditor.editor.command.AbstractCreateLiHolderCommand,{elementName:"ul"},0,0,0,0,0,0,[FBEditor.editor.command.ul,"CreateCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.ul.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"ul"},0,0,0,0,0,0,[FBEditor.editor.command.ul,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.ul.UlElementController",FBEditor.editor.element.AbstractLiHolderElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.ul,"UlElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.ul.UlElement",FBEditor.editor.element.AbstractLiHolderElement,{controllerClass:"FBEditor.editor.element.ul.UlElementController",htmlTag:"ul",xmlTag:"ul",cls:"el-ul"},0,0,0,0,0,0,[FBEditor.editor.element.ul,"UlElement"],0));(Ext.cmd.derive("FBEditor.editor.command.text.ModifiedCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,g=l.getData(),k=false,b=window.getSelection(),a={},f={},c,d,h;try{if(g.saveRange){f.node=g.saveRange.startNode.getElement();c=f.node.getManager();c.setCursor(g.saveRange)}h=b.getRangeAt(0);d={start:h.startOffset,end:h.endOffset};g.range={common:h.commonAncestorContainer,start:h.startContainer,end:h.endContainer,collapsed:h.collapsed,offset:d};a.node=h.startContainer;f.node=a.node.getElement();c=f.node.getManager();c.setSuspendEvent(true);g.viewportId=a.node.viewportId;console.log("edit text",g.newValue,f.node,h);g.oldValue=f.node.getText();f.node.setText(g.newValue);a.node.nodeValue=g.newValue;f.node.sync(g.viewportId);c.setCursor({startNode:g.range.start,startOffset:d.start,focusElement:f.node});g.nodes=a;k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(f.parent).removeNext()}c.setSuspendEvent(false);return k},unExecute:function(){var k=this,f=k.getData(),j=false,a={},d={},c,b,g,l;try{g=f.range;a=f.nodes;a.parent=a.node.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.isRoot){a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}if(!d.parent||!d.parent.isRoot){b=window.getSelection();l=b.getRangeAt(0);a.node=l.startContainer}d.node=a.node.getElement();c=d.node.getManager();c.setSuspendEvent(true);console.log("undo text",a,f);d.node.setText(f.oldValue);a.node.nodeValue=f.oldValue;d.node.sync(f.viewportId);a.startCursor=f.isBackspace?g.offset.start+1:g.offset.start;f.saveRange={startNode:a.node,startOffset:a.startCursor,focusElement:d.node};c.setCursor(f.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(d.parent).remove()}c.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command.text,"ModifiedCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.text.DeleteEmptyCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,f=k.getData(),j=false,b=window.getSelection(),a={},d={},c,g;try{if(f.saveRange){d.node=f.saveRange.startNode.getElement();c=d.node.getManager();c.setCursor(f.saveRange)}g=b.getRangeAt(0);f.range={common:g.commonAncestorContainer,start:g.startContainer,end:g.endContainer,collapsed:g.collapsed,offset:{start:g.startOffset,end:g.endOffset}};a.node=g.startContainer;d.node=a.node.getElement();c=d.node.getManager();c.setSuspendEvent(true);f.viewportId=a.node.viewportId;console.log("del empty",d.node,g);c.suspendEvent=true;f.oldValue=d.node.getText();d.node.setText("");a.node.nodeValue="";a.empty=a.node;d.empty=a.empty.getElement();a.parentEmpty=a.empty.parentNode;d.parentEmpty=a.parentEmpty.getElement();if(d.parentEmpty.isEmpty()&&d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}a.cursorStart=0;if(!d.empty.isStyleHolder){while(d.parentEmpty.isEmpty()&&!d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}if(d.parentEmpty.isStyleHolder&&d.parentEmpty.isEmpty()){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}}if(!d.empty.isStyleHolder){a.next=a.empty.nextSibling;a.prev=a.empty.previousSibling;d.next=a.next?a.next.getElement():null;d.prev=a.prev?a.prev.getElement():null;d.parentEmpty.remove(d.empty);a.parentEmpty.removeChild(a.empty);a.cursor=a.next?c.getDeepFirst(a.next):c.getDeepLast(a.prev);a.cursorStart=a.next?0:(a.cursor&&a.cursor.nodeValue?a.cursor.nodeValue.length:0);if(d.next&&d.prev&&d.next.isText&&d.prev.isText){a.cursor=a.prev;a.cursorStart=a.prev.nodeValue.length;c.joinNode(a.next);a.needSplit=true}}if(d.parentEmpty.isEmpty()&&d.parentEmpty.isStyleHolder){a.empty=a.parentEmpty;d.empty=a.empty.getElement();a.parentEmpty=a.parentEmpty.parentNode;d.parentEmpty=a.parentEmpty.getElement()}if(d.empty.isStyleHolder&&d.empty.isEmpty()){d.newEmpty=c.createEmptyElement();a.newEmpty=d.newEmpty.getNode(f.viewportId);a.first=a.empty.firstChild;if(a.first){d.first=a.first.getElement();d.empty.replace(d.newEmpty,d.first);a.empty.replaceChild(a.newEmpty,a.first)}else{d.empty.add(d.newEmpty);a.empty.appendChild(a.newEmpty)}d.parentEmpty=d.empty;a.parentEmpty=a.empty;d.empty=d.first;a.cursor=a.newEmpty}d.parentEmpty.removeEmptyText();d.parentEmpty.sync(f.viewportId);c.setCursor({startNode:a.cursor,startOffset:a.cursorStart});f.els=d;f.nodes=a;j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return j},unExecute:function(){var k=this,f=k.getData(),j=false,a={},d={},g=FBEditor.editor.Factory,c,b,l;try{a=f.nodes;d=f.els;c=d.parentEmpty.getManager();c.setSuspendEvent(true);a.empty=d.empty.getNode(f.viewportId);console.log("undo del empty",a,d);if(a.newEmpty){d.parentEmpty.replace(d.empty,d.newEmpty);a.parentEmpty.replaceChild(a.empty,a.newEmpty)}else{if(a.needSplit){d.prevValue=d.prev.text.substring(0,a.cursorStart);d.prev.setText(d.prevValue);a.prev.nodeValue=d.prevValue;a.next=d.next.getNode(f.viewportId);a.nextNext=a.prev.nextSibling;if(a.nextNext){d.nextNext=a.nextNext.getElement();d.parentEmpty.insertBefore(d.next,d.nextNext);a.parentEmpty.insertBefore(a.next,a.nextNext)}else{d.parentEmpty.add(d.next);a.parentEmpty.appendChild(a.next)}}if(a.next){a.parent=a.next.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.isRoot){a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}if(!d.parent||!d.parent.isRoot){b=window.getSelection();l=b.getRangeAt(0);a.next=l.startContainer;d.next=a.next.getElement();a.parent=a.next.parentNode;d.parent=a.parent?a.parent.getElement():null;while(d.parent&&!d.parent.hisName(d.parentEmpty.xmlTag)){a.next=a.parent;d.next=d.parent;a.parent=a.parent.parentNode;d.parent=a.parent?a.parent.getElement():null}a.parentEmpty=a.parent;d.parentEmpty=d.parent}d.parentEmpty.insertBefore(d.empty,d.next);a.parentEmpty.insertBefore(a.empty,a.next)}else{d.parentEmpty.add(d.empty);a.parentEmpty.appendChild(a.empty)}}a.deep=c.getDeepFirst(a.empty);d.deep=a.deep.getElement();if(d.deep.isText){d.deep.setText(f.oldValue);a.deep.nodeValue=f.oldValue;a.cursor=a.deep}else{d.text=g.createElementText(f.oldValue);a.text=d.text.getNode(f.viewportId);d.deep.add(d.text);a.deep.appendChild(a.text);a.cursor=a.text}d.parentEmpty.sync(f.viewportId);f.saveRange={startNode:a.cursor,startOffset:f.isBackspace?1:0};c.setCursor(f.saveRange);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(d.parent).remove()}c.setSuspendEvent(false);return j}},0,0,0,0,0,0,[FBEditor.editor.command.text,"DeleteEmptyCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.text.TextElementController",FBEditor.editor.element.AbstractElementController,{onKeyDownDelete:function(h){var c=this,b=c.getElement(),f=window.getSelection(),d,g,a;h.preventDefault();a=f.getRangeAt(0);g=b.text.substring(0,a.startOffset)+b.text.substring(a.startOffset+1);if(g){d=Ext.create("FBEditor.editor.command.text.ModifiedCommand",{newValue:g})}else{d=Ext.create("FBEditor.editor.command.text.DeleteEmptyCommand")}if(d.execute()){c.getHistory().add(d)}},onKeyDownBackspace:function(h){var c=this,b=c.getElement(),f=window.getSelection(),d,g,a;h.preventDefault();a=f.getRangeAt(0);g=b.text.substring(0,a.startOffset)+b.text.substring(a.startOffset+1);if(g){d=Ext.create("FBEditor.editor.command.text.ModifiedCommand",{newValue:g,isBackspace:true})}else{d=Ext.create("FBEditor.editor.command.text.DeleteEmptyCommand",{isBackspace:true})}if(d.execute()){c.getHistory().add(d)}},onPaste:function(c){var b=this,a=b.getElement();a.parent.fireEvent("paste",c)}},0,0,0,0,0,0,[FBEditor.editor.element.text,"TextElementController"],0));(Ext.cmd.derive("FBEditor.editor.element.text.TextElement",FBEditor.editor.element.AbstractElement,{controllerClass:"FBEditor.editor.element.text.TextElementController",showedOnTree:false,text:"",isText:true,mapCoords:null,constructor:function(b){var a=this;a.elementId=Ext.id({prefix:a.prefixId});a.text=Ext.isString(b)?b:a.text;a.createController();a.text=a.text.replace(/&lt;/g,"<");a.text=a.text.replace(/&gt;/g,">");a.text=a.text.replace(/&nbsp;/g," ")},getNode:function(c){var b=this,a;a=b.createNode(c);return a},getXml:function(a){var b=this,c;c=a?"":b.text;c=c.replace(/</g,"&#60;");c=c.replace(/>/g,"&#62;");c=c.replace(/[ ]{2}/g,"  &#160;");c=c.replace(/^ | $/g," &#160;");return c},sync:function(c){var b=this,a=b.getManager();a.setSuspendEvent(true);Ext.Object.each(b.nodes,function(f,d){if(f!==c){d.nodeValue=b.getText()}});a.setSuspendEvent(false)},setText:function(b){var a=this;a.text=b;a.clearMapCoords()},getText:function(){return this.text},createNode:function(c){var b=this,a;a=document.createTextNode(b.text);a.viewportId=c;b.setNode(a);return a},isEmpty:function(){return this.text?false:true},setMapCoords:function(a){this.mapCoords=a},getMapCoords:function(){return this.mapCoords},clearMapCoords:function(){this.mapCoords=null}},1,0,0,0,0,0,[FBEditor.editor.element.text,"TextElement"],0));(Ext.cmd.derive("FBEditor.editor.element.u.UElement",Ext.Base,{constructor:function(){return Ext.create("FBEditor.editor.element.underline.UnderlineElement")}},1,0,0,0,0,0,[FBEditor.editor.element.u,"UElement"],0));(Ext.cmd.derive("FBEditor.editor.element.undefined.UndefinedElement",FBEditor.editor.element.AbstractElement,{htmlTag:"undefined",xmlTag:"undefined",cls:"el-undefined",realName:"",isUndefined:true,constructor:function(b,a,c){var d=this,f;d.realName=b;f=b;d.htmlTag=f;d.xmlTag=f;FBEditor.editor.element.AbstractElement.prototype.constructor.call(this,a,c)},convertToText:function(a){}},1,0,0,0,0,0,[FBEditor.editor.element.undefined,"UndefinedElement"],0));(Ext.cmd.derive("FBEditor.editor.element.underline.UnderlineElementController",FBEditor.editor.element.AbstractStyleElementController,{},0,0,0,0,0,0,[FBEditor.editor.element.underline,"UnderlineElementController"],0));(Ext.cmd.derive("FBEditor.editor.command.underline.CreateRangeCommand",FBEditor.editor.command.AbstractCreateRangeStyleCommand,{elementName:"underline"},0,0,0,0,0,0,[FBEditor.editor.command.underline,"CreateRangeCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.underline.DeleteWrapperCommand",FBEditor.editor.command.AbstractDeleteWrapperCommand,{elementName:"underline"},0,0,0,0,0,0,[FBEditor.editor.command.underline,"DeleteWrapperCommand"],0));(Ext.cmd.derive("FBEditor.editor.element.underline.UnderlineElement",FBEditor.editor.element.AbstractStyleElement,{controllerClass:"FBEditor.editor.element.underline.UnderlineElementController",htmlTag:"underline",xmlTag:"underline",cls:"el-underline"},0,0,0,0,0,0,[FBEditor.editor.element.underline,"UnderlineElement"],0));(Ext.cmd.derive("FBEditor.editor.Factory",Ext.Base,{singleton:"true",createElement:function(d,a,f){var j=d,c,b,g;if(Ext.isEmpty(j)){throw Error("Невозможно создать элемент. Передано пустое назавние элемента.")}j=j.toLowerCase();j=j.replace(/-([a-z])/g,"$1");if(/:/.test(j)){j=j.split(":");c=j.pop();c=c+"."+Ext.String.capitalize(c);j.push(c);j=j.join(".")}else{j=j+"."+Ext.String.capitalize(j)}b="FBEditor.editor.element."+j+"Element";try{a=a||{};f=f||[];g=Ext.create(b,a,f)}catch(h){g=Ext.create("FBEditor.editor.element.undefined.UndefinedElement",d,a,f);Ext.log({level:"warn",msg:"Неопределенный элемент: "+b,dump:h})}return g},createElementText:function(c){var a;c=Ext.isString(c)?c:"";try{a=Ext.create("FBEditor.editor.element.text.TextElement",c)}catch(b){throw Error("Невозможно создать текстовый элемент: "+c)}return a}},0,0,0,0,0,0,[FBEditor.editor,"Factory"],0));(Ext.cmd.derive("FBEditor.editor.History",Ext.Base,{data:[],pos:-1,clear:function(){var a=this;a.data=[];a.pos=-1},add:function(c){var a=this,b=a.data;a.clearAfterCurrent();b.push(c);a.pos++},remove:function(){var a=this,b=a.data;console.log("remove cmd");if(a.pos!==-1){b.splice(a.pos,1);a.pos--}},removeNext:function(){var a=this,b=a.data;console.log("remove next cmd");if(a.pos+1<b.length){b.splice(a.pos+1,1)}},undo:function(){var a=this,b;b=a.getCurrentCmd();if(b&&b.unExecute()){a.pos--}},redo:function(){var a=this,b;b=a.getNextCmd();if(b&&b.execute()){a.pos++}},getCurrentCmd:function(){var a=this,c=a.data,b;b=a.pos!==-1?c.slice(a.pos,a.pos+1)[0]:null;return b},getNextCmd:function(){var a=this,c=a.data,b;b=a.pos+1<c.length?c.slice(a.pos+1,a.pos+2)[0]:null;return b},clearAfterCurrent:function(){var a=this,b=a.data;if((a.pos+1)<b.length){b.splice(a.pos+1)}}},0,0,0,0,0,0,[FBEditor.editor,"History"],0));(Ext.cmd.derive("FBEditor.editor.KeyMap",Ext.Base,{map:[{key:"B",ctrl:true,fn:"onBtn",args:{name:"strong"}},{key:"D",ctrl:true,fn:"onBtn",args:{name:"div"}},{key:"E",ctrl:true,fn:"onBtn",args:{name:"epigraph"}},{key:"H",ctrl:true,fn:"onBtn",args:{name:"title"}},{key:"I",ctrl:true,fn:"onBtn",args:{name:"em"}},{key:"I",ctrl:true,shift:true,fn:"onBtn",args:{name:"spacing"}},{key:"L",ctrl:true,fn:"onBtn",args:{name:"a"}},{key:"M",ctrl:true,fn:"onBtn",args:{name:"pre"}},{key:"N",ctrl:true,alt:true,fn:"onBtn",args:{name:"note"}},{key:"P",ctrl:true,fn:"onBtn",args:{name:"img"}},{key:"Q",ctrl:true,fn:"onBtn",args:{name:"blockquote"}},{key:"S",ctrl:true,shift:true,fn:"onBtn",args:{name:"section"}},{key:"U",ctrl:true,fn:"onBtn",args:{name:"underline"}},{key:"X",ctrl:true,fn:"onBtn",args:{name:"sub"}},{key:"X",ctrl:true,shift:true,fn:"onBtn",args:{name:"sup"}}],manager:null,constructor:function(a){var b=this;this.manager=a},key:function(c){var a=this,b=a.map;Ext.Array.each(b,function(d){if(Ext.event.Event[d.key]&&c.keyCode===Ext.event.Event[d.key]){a.executeFn(c,d)}})},executeFn:function(d,a){var c=this,b;if(d.ctrlKey&&a.ctrl&&!d.shiftKey&&!a.shift||d.shiftKey&&a.shift&&!d.ctrlKey&&!a.ctrl||d.shiftKey&&a.shift&&d.ctrlKey&&a.ctrl||!d.ctrlKey&&!a.ctrl&&!d.shiftKey&&!a.shift){d.preventDefault();if(a.fn&&c[a.fn]){b=a.args||{};b.e=d;c[a.fn](b)}}},onBtn:function(b){var h=this,d=h.manager,a=b.name,f,g,c;f=d.getEditor();g=f.getToolbar();c=g.getButton(a);if(c&&!c.disabled){if(c.enableToggle){c.toggle()}c.fireEvent("click")}}},1,0,0,0,0,0,[FBEditor.editor,"KeyMap"],0));(Ext.cmd.derive("FBEditor.xsd.Fb3body",Ext.Base,{getXsd:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns:fb3b="http://www.fictionbook.org/FictionBook3/body" xmlns="http://www.w3.org/2001/XMLSchema"\t\txmlns:xlink="http://www.w3.org/1999/xlink" targetNamespace="http://www.fictionbook.org/FictionBook3/body"\t\telementFormDefault="qualified" attributeFormDefault="unqualified">\t<element name="fb3-body">\t\t<complexType>\t\t\t<complexContent>\t\t\t\t<extension base="fb3b:TitledType">\t\t\t\t\t<sequence>\t\t\t\t\t\t<element name="section" type="fb3b:SectionType" maxOccurs="unbounded"/>\t\t\t\t\t\t<element name="notes" minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t<extension base="fb3b:TitledType">\t\t\t\t\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t\t\t\t\t<element name="notebody" type="fb3b:SemiSimpleBodyType"\t\t\t\t\t\t\t\t\t\t\t maxOccurs="unbounded"/>\t\t\t\t\t\t\t\t\t\t</sequence>\t\t\t\t\t\t\t\t\t\t<attribute name="show"/>\t\t\t\t\t\t\t\t\t</extension>\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t</element>\t\t\t\t\t</sequence>\t\t\t\t\t<attribute name="id" type="fb3b:UUIDType" use="required"/>\t\t\t\t</extension>\t\t\t</complexContent>\t\t</complexType>\t\t<unique name="SectionID">\t\t\t<selector xpath=".//section"/>\t\t\t<field xpath="@id"/>\t\t</unique>\t\t<key name="SimpleNotesLinks">\t\t\t<selector xpath=".//note"/>\t\t\t<field xpath="@fb3b:href"/>\t\t</key>\t\t<keyref name="SimpleNotesTargets" refer="fb3b:SimpleNotesLinks">\t\t\t<selector xpath="notes/note"/>\t\t\t<field xpath="@id"/>\t\t</keyref>\t</element>\t<complexType name="TitledType">\t\t<sequence>\t\t\t<element name="title" minOccurs="0">\t\t\t\t<complexType>\t\t\t\t\t<complexContent>\t\t\t\t\t\t<extension base="fb3b:SimpleTextType"/>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="epigraph" minOccurs="0" maxOccurs="25">\t\t\t\t<complexType>\t\t\t\t\t<sequence>\t\t\t\t\t    <choice>\t\t\t\t\t        <element name="poem" type="fb3b:PoemType"/>\t\t\t\t            <element name="p" type="fb3b:StyleType"/>\t\t\t\t        </choice>\t\t\t\t        <choice minOccurs="0" maxOccurs="unbounded">\t\t\t                <element name="poem" type="fb3b:PoemType"/>\t\t\t                <element name="p" type="fb3b:StyleType"/>\t\t\t                <element name="br" type="fb3b:BRType"/>\t\t\t            </choice>\t\t\t            <element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t        </sequence>\t\t\t\t</complexType>\t\t\t</element>\t\t</sequence>\t</complexType>\t<complexType name="SimpleTextType">\t\t<sequence>\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="SectionType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="annotation" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t\t<choice>\t\t\t\t\t\t<element name="section" type="fb3b:SectionType" maxOccurs="unbounded"></element>\t\t\t\t\t\t<sequence>\t\t\t\t\t\t\t<choice maxOccurs="unbounded">\t\t\t\t\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t\t\t\t\t<element name="subtitle" type="fb3b:StyleType"></element>\t\t\t\t\t\t\t\t<element name="ol">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="ul">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t\t\t\t\t<element name="table">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:TableType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="poem">\t\t\t\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t\t\t\t\t<extension base="fb3b:PoemType"/>\t\t\t\t\t\t\t\t\t\t</complexContent>\t\t\t\t\t\t\t\t\t</complexType>\t\t\t\t\t\t\t\t</element>\t\t\t\t\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t\t\t\t\t\t<element name="div" type="fb3b:DivBlockType"></element>\t\t\t\t\t\t\t</choice>\t\t\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t\t\t\t\t</sequence>\t\t\t\t\t</choice>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="fb3b:UUIDType" use="required"/>\t\t\t\t<attribute name="article" type="boolean" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="DivBlockType">\t\t<sequence>\t\t\t<element name="title" type="fb3b:SimpleTextType" minOccurs="0"/>\t\t\t<element name="marker" minOccurs="0">\t\t\t\t<complexType>\t\t\t\t\t<sequence>\t\t\t\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t\t\t</sequence>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<choice>\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t</choice>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"></element>\t\t</sequence>\t\t<attributeGroup ref="fb3b:SizingAttributes"/>\t\t<attribute name="float" use="optional">\t\t\t<simpleType>\t\t\t\t<restriction base="token">\t\t\t\t\t<enumeration value="left"/>\t\t\t\t\t<enumeration value="right"/>\t\t\t\t\t<enumeration value="center"/>\t\t\t\t\t<enumeration value="default"/>\t\t\t\t</restriction>\t\t\t</simpleType>\t\t</attribute>\t\t<attribute name="align" type="fb3b:alignType" use="optional"/>\t\t<attribute name="bindto" type="IDREF" use="optional"/>\t\t<attribute name="border" type="boolean" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t\t<attribute name="on-one-page" type="boolean" use="optional"/>\t</complexType>\t<complexType name="BasicAnnotationType">\t\t<sequence>\t\t\t<choice>\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t</choice>\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="BRType">\t\t<attribute name="clear" type="fb3b:BrClearType" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="TableType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="tr" maxOccurs="unbounded">\t\t\t\t\t\t<complexType>\t\t\t\t\t\t\t<choice maxOccurs="unbounded">\t\t\t\t\t\t\t\t<element name="th" type="fb3b:TDType"/>\t\t\t\t\t\t\t\t<element name="td" type="fb3b:TDType"/>\t\t\t\t\t\t\t</choice>\t\t\t\t\t\t\t<attribute name="align" type="fb3b:alignType" use="optional" default="left"/>\t\t\t\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t\t\t\t</complexType>\t\t\t\t\t</element>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="TDType">\t\t<complexContent>\t\t\t<extension base="fb3b:PHolderType">\t\t\t\t<attribute name="style" type="string" use="optional"/>\t\t\t\t<attribute name="colspan" type="integer" use="optional"/>\t\t\t\t<attribute name="rowspan" type="integer" use="optional"/>\t\t\t\t<attribute name="align" type="fb3b:alignType" use="optional" default="left"/>\t\t\t\t<attribute name="valign" type="fb3b:vAlignType" use="optional" default="top"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="StyleType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3b:StyleType"></element>\t\t\t<element name="em" type="fb3b:StyleType"></element>\t\t\t<element name="strikethrough" type="fb3b:StyleType"></element>\t\t\t<element name="sub" type="fb3b:StyleType"></element>\t\t\t<element name="sup" type="fb3b:StyleType"></element>\t\t\t<element name="code" type="fb3b:StyleType"></element>\t\t\t<element name="underline" type="fb3b:StyleType"></element>\t\t\t<element name="spacing" type="fb3b:StyleType"></element>\t\t\t<element name="span">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3b:StyleType">\t\t\t\t\t\t\t<attribute name="class" type="normalizedString" use="optional"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="note" type="fb3b:NoteType"/>\t\t\t<element name="a" type="fb3b:LinkType"/>\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t<element name="paper-page-break" type="fb3b:PaperPageBreakType"/>\t\t</choice>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="StyleInLinkType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3b:StyleInLinkType"/>\t\t\t<element name="em" type="fb3b:StyleInLinkType"/>\t\t\t<element name="strikethrough" type="fb3b:StyleInLinkType"/>\t\t\t<element name="sub" type="fb3b:StyleInLinkType"/>\t\t\t<element name="sup" type="fb3b:StyleInLinkType"/>\t\t\t<element name="code" type="fb3b:StyleInLinkType"/>\t\t\t<element name="underline" type="fb3b:StyleInLinkType"/>\t\t\t<element name="spacing" type="fb3b:StyleInLinkType"/>\t\t\t<element name="span">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t\t\t\t<attribute name="class" type="normalizedString" use="optional"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t\t<element name="img" type="fb3b:ImgType"/>\t\t\t<element name="paper-page-break" type="fb3b:PaperPageBreakType"/>\t\t</choice>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="LinkType" mixed="true">\t\t<complexContent mixed="true">\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t<attribute name="href" type="anyURI" use="required"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="NoteType" mixed="true">\t\t<complexContent mixed="true">\t\t\t<extension base="fb3b:StyleInLinkType">\t\t\t\t<attribute name="href" type="IDREF" use="required"/>\t\t\t\t<attribute ref="fb3b:role" use="optional"/>\t\t\t\t<attribute name="autotext" type="boolean" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="ImgType">\t\t<attribute name="src" type="anyURI" use="required"/>\t\t<attribute name="alt" type="string" use="optional"/>\t\t<attribute name="id" type="ID" use="optional"/>\t\t<attributeGroup ref="fb3b:SizingAttributes"/>\t</complexType>\t<complexType name="PHolderType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence maxOccurs="unbounded">\t\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t            <element name="p" type="fb3b:StyleType"/>                        <element name="br" type="fb3b:BRType"/>                    </choice>\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t</sequence>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="LiHolderType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="li" type="fb3b:StyleType"/>\t\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t\t<element name="li" type="fb3b:StyleType"/>\t\t\t\t\t\t<element name="ol" type="fb3b:LiHolderType"/>\t\t\t\t\t\t<element name="ul" type="fb3b:LiHolderType"/>\t\t\t\t\t</choice>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="PoemType">\t\t<complexContent>\t\t\t<extension base="fb3b:TitledType">\t\t\t\t<sequence>\t\t\t\t\t<element name="stanza" type="fb3b:PHolderType" maxOccurs="unbounded"/>\t\t\t\t\t<element name="subscription" type="fb3b:BasicAnnotationType" minOccurs="0"/>\t\t\t\t</sequence>\t\t\t\t<attribute name="id" type="ID" use="optional"/>\t\t\t</extension>\t\t</complexContent>\t</complexType>\t<complexType name="SemiSimpleBodyType">\t\t<sequence>\t\t\t<element name="title" type="fb3b:SimpleTextType" minOccurs="0"/>\t\t\t<choice maxOccurs="unbounded">\t\t\t\t<element name="p" type="fb3b:StyleType"/>\t\t\t\t<element name="ol">\t\t\t\t\t<complexType>\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t</complexContent>\t\t\t\t\t</complexType>\t\t\t\t</element>\t\t\t\t<element name="ul">\t\t\t\t\t<complexType>\t\t\t\t\t\t<complexContent>\t\t\t\t\t\t\t<extension base="fb3b:LiHolderType"/>\t\t\t\t\t\t</complexContent>\t\t\t\t\t</complexType>\t\t\t\t</element>\t\t\t\t<element name="pre" type="fb3b:PHolderType"/>\t\t\t\t<element name="table" type="fb3b:TableType"/>\t\t\t\t<element name="poem" type="fb3b:PoemType"/>\t\t\t\t<element name="blockquote" type="fb3b:PHolderType"/>\t\t\t\t<element name="br" type="fb3b:BRType"/>\t\t\t</choice>\t\t</sequence>\t\t<attribute name="id" type="ID" use="optional"/>\t</complexType>\t<complexType name="PaperPageBreakType">\t\t<attribute name="page-before" type="positiveInteger" use="required"/>\t\t<attribute name="page-after" type="positiveInteger" use="optional"/>\t</complexType>\t<simpleType name="alignType">\t\t<restriction base="token">\t\t\t<enumeration value="left"/>\t\t\t<enumeration value="right"/>\t\t\t<enumeration value="center"/>\t\t\t<enumeration value="justify"/>\t\t</restriction>\t</simpleType>\t<simpleType name="vAlignType">\t\t<restriction base="token">\t\t\t<enumeration value="top"/>\t\t\t<enumeration value="middle"/>\t\t\t<enumeration value="bottom"/>\t\t</restriction>\t</simpleType>\t<simpleType name="BrClearType">\t\t<restriction base="token">\t\t\t<enumeration value="left"/>\t\t\t<enumeration value="right"/>\t\t\t<enumeration value="both"/>\t\t\t<enumeration value="page"/>\t\t</restriction>\t</simpleType>\t<simpleType name="ScreenSizeType">\t\t<restriction base="normalizedString">\t\t\t<pattern value="\\d+(\\.\\d+)?(em|ex|%|mm)"/>\t\t</restriction>\t</simpleType>\t<attributeGroup name="SizingAttributes">\t\t<attribute name="width" type="fb3b:ScreenSizeType" use="optional"/>\t\t<attribute name="min-width" type="fb3b:ScreenSizeType" use="optional"/>\t\t<attribute name="max-width" type="fb3b:ScreenSizeType" use="optional"/>\t</attributeGroup>\t<simpleType name="UUIDType">\t\t<restriction base="token">\t\t\t<pattern value="[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}"/>\t\t</restriction>\t</simpleType>\t<attribute name="role" default="auto">\t\t<simpleType>\t\t\t<restriction base="token">\t\t\t\t<enumeration value="auto"/>\t\t\t\t<enumeration value="footnote"/>\t\t\t\t<enumeration value="endnote"/>\t\t\t\t<enumeration value="comment"/>\t\t\t\t<enumeration value="other"/>\t\t\t</restriction>\t\t</simpleType>\t</attribute>\t<attribute name="href" type="anyURI"></attribute></schema>';return a}},0,0,0,0,0,0,[FBEditor.xsd,"Fb3body"],0));(Ext.cmd.derive("FBEditor.xsd.desc.AbstractAnnotation",Ext.Base,{getXsd:function(b){var a;a='<?xml version="1.0" encoding="UTF-8"?><schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:fb3d="http://www.fictionbook.org/FictionBook3/description" targetNamespace="http://www.fictionbook.org/FictionBook3/description" elementFormDefault="qualified" attributeFormDefault="unqualified">\t<element name="'+b+'">\t\t<complexType>\t\t\t<sequence>\t\t\t\t<element name="p" type="fb3d:BasicTextType"/>\t\t\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t\t\t<element name="p" type="fb3d:BasicTextType"/>\t\t\t\t\t<element name="br"/>\t\t\t\t</choice>\t\t\t</sequence>\t\t</complexType>\t</element>\t<complexType name="BasicTextType" mixed="true">\t\t<choice minOccurs="0" maxOccurs="unbounded">\t\t\t<element name="strong" type="fb3d:BasicTextType"/>\t\t\t<element name="em" type="fb3d:BasicTextType"/>\t\t\t<element name="a">\t\t\t\t<complexType mixed="true">\t\t\t\t\t<complexContent mixed="true">\t\t\t\t\t\t<extension base="fb3d:BasicTextType">\t\t\t\t\t\t\t<attribute name="href" type="anyURI" use="required"/>\t\t\t\t\t\t</extension>\t\t\t\t\t</complexContent>\t\t\t\t</complexType>\t\t\t</element>\t\t</choice>\t</complexType></schema>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"AbstractAnnotation"],0));(Ext.cmd.derive("FBEditor.xsd.desc.Annotation",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"annotation");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"Annotation"],0));(Ext.cmd.derive("FBEditor.xsd.desc.Bibliodescription",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"biblio-description");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"Bibliodescription"],0));(Ext.cmd.derive("FBEditor.xsd.desc.History",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"history");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"History"],0));(Ext.cmd.derive("FBEditor.xsd.desc.Preamble",FBEditor.xsd.desc.AbstractAnnotation,{getXsd:function(){var b=this,a;a=FBEditor.xsd.desc.AbstractAnnotation.prototype.getXsd.call(this,"preamble");return a}},0,0,0,0,0,0,[FBEditor.xsd.desc,"Preamble"],0));(Ext.cmd.derive("FBEditor.xsl.SchemaBody",Ext.Base,{singleton:true,getXsl:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">\t<xsl:output encoding="UTF-8" indent="no" method="html"/>\t<xsl:template match="/">\t\t<xsl:call-template name="types"/>\t\telements = {\t\t<xsl:for-each select=".//element">\t\t\t<xsl:variable name="elementName" select="@name"/>\t\t\t<xsl:variable name="extAttrs" select="complexType/complexContent/extension/attribute" />\t\t\t<xsl:if test="not(preceding::element[@name=$elementName]) and $elementName">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\'<xsl:value-of select="$elementName"/>\': cse(\'<xsl:value-of select="$elementName"/>\', {\t\t\t\t<xsl:call-template name="elements">\t\t\t\t\t<xsl:with-param name="typeName" select="@type"/>\t\t\t\t\t<xsl:with-param name="parentName" select="$elementName"/>\t\t\t\t</xsl:call-template>\t\t\t\t, attributes: {\t\t\t\t<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>\t\t\t\t<xsl:for-each select="$extAttrs"><xsl:if test="@*">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t}\t\t\t\t})\t\t\t</xsl:if>\t\t</xsl:for-each>};\t</xsl:template>\t\t<xsl:template match="@*">\'<xsl:value-of select="local-name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if></xsl:template>\t\t<xsl:template name="attrs">\t\t<xsl:param name="attrs"/>\t\t<xsl:for-each select="$attrs">\t\t\t\'<xsl:value-of select="name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if>\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="elements">\t\t<xsl:param name="typeName"/>\t\t<xsl:param name="parentName"/>\t\textend: \'<xsl:value-of select="$typeName"/><xsl:call-template name="extended"/>\'\t\t<xsl:if test="count(.//element)">\t\t\t, sequence: [\t\t\t<xsl:for-each select=".//element">\t\t\t\t<xsl:if test="not(@name=\'note\' and $parentName=\'fb3-body\')">\t\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\t{element: <xsl:call-template name="element"/>}\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t\t\t]\t\t</xsl:if>\t</xsl:template>\t\t<xsl:template name="element">\t\t<xsl:param name="attrs"/>\t\t<xsl:variable name="elementName">\t\t\t<xsl:choose>\t\t\t\t<xsl:when test="@name"><xsl:value-of select="@name"/></xsl:when>\t\t\t\t<xsl:when test="@ref"><xsl:value-of select="@ref"/></xsl:when>\t\t\t\t<xsl:otherwise><xsl:text>undefined</xsl:text></xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:variable>\t\t{\'<xsl:value-of select="$elementName"/>\': {\t\t\t<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>\t\t\t<xsl:if test="$attrs">\t\t\t\t<xsl:if test="@*">,</xsl:if>\t\t\t\t<xsl:call-template name="attrs"><xsl:with-param name="attrs" select="$attrs"/></xsl:call-template>\t\t\t</xsl:if>\t\t}}\t</xsl:template>\t\t<xsl:template name="extended">\t\t<xsl:for-each select="descendant::extension">\t\t\t<xsl:if test="position()=1"><xsl:value-of select="@base"/></xsl:if>\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="types">\t\t<xsl:for-each select="schema/simpleType">\t\t\tdse(\'<xsl:value-of select="@name"/>\', {\t\t\t\t<xsl:call-template name="restriction"><xsl:with-param name="rest" select="restriction"/></xsl:call-template>\t\t\t});\t\t</xsl:for-each>\t\t<xsl:for-each select="schema/complexType">\t\t\t<xsl:variable name="extSeq" select="complexContent/extension/sequence" />\t\t\t<xsl:variable name="attrs" select="attribute" />\t\t\t<xsl:variable name="extAttrs" select="complexContent/extension/attribute" />\t\t\tdse(\'<xsl:value-of select="@name"/>\', {\t\t\t\t<xsl:if test="complexContent/extension">\t\t\t\t\textend: \'<xsl:value-of select="complexContent/extension/@base"/>\',\t\t\t\t</xsl:if>\t\t\t\tsequence: [\t\t\t\t<xsl:if test="$extSeq">\t\t\t\t\t<xsl:call-template name="sequence"><xsl:with-param name="seq" select="$extSeq"/></xsl:call-template>\t\t\t\t</xsl:if>\t\t\t\t<xsl:if test="sequence">\t\t\t\t\t<xsl:if test="$extSeq">,</xsl:if>\t\t\t\t\t<xsl:call-template name="sequence"><xsl:with-param name="seq" select="sequence"/></xsl:call-template>\t\t\t\t</xsl:if>\t\t\t\t],\t\t\t\tchoice: {<xsl:call-template name="choice"><xsl:with-param name="choice" select="choice"/></xsl:call-template>}\t\t\t\t<xsl:if test="$extAttrs or $attrs or attributeGroup">\t\t\t\t\t, attributes: {\t\t\t\t\t<xsl:if test="@mixed">mixed: <xsl:value-of select="@mixed"/>,</xsl:if>\t\t\t\t\t<xsl:for-each select="$extAttrs"><xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t\t<xsl:for-each select="$attrs"><xsl:if test="position()!=1 or $extAttrs">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t\t\t\t\t<xsl:if test="attributeGroup and ($attrs or $extAttrs)">,</xsl:if><xsl:call-template name="attributeGroup"/>\t\t\t\t}</xsl:if>\t\t\t});\t\t</xsl:for-each>\t</xsl:template>\t\t<xsl:template name="attribute">\t\t<xsl:variable name="attrName">\t\t\t<xsl:choose>\t\t\t\t<xsl:when test="@name"><xsl:value-of select="@name"/></xsl:when>\t\t\t\t<xsl:when test="@ref"><xsl:value-of select="@ref"/></xsl:when>\t\t\t\t<xsl:otherwise><xsl:text>undefined</xsl:text></xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:variable>\t\t\'<xsl:value-of select="$attrName"/>\': {\t\t\t<xsl:apply-templates select="@*"/>\t\t\t<xsl:if test="simpleType/restriction">, type: {<xsl:call-template name="restriction"><xsl:with-param name="rest" select="simpleType/restriction"/></xsl:call-template>}</xsl:if>\t\t}\t</xsl:template>\t\t<xsl:template name="attributeGroup">\t\t<xsl:variable name="groupName" select="substring(attributeGroup/@ref, 6)" />\t\t<xsl:variable name="group" select="/schema/attributeGroup[@name=$groupName]/attribute" />\t\t<xsl:for-each select="$group"><xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="attribute"/></xsl:for-each>\t</xsl:template>\t\t<xsl:template name="restriction">\t\t<xsl:param name="rest"/>\t\t<xsl:variable name="enums" select="$rest/enumeration"/>\t\tbase: \'<xsl:value-of select="$rest/@base"/>\',\t\t<xsl:if test="$enums">\t\t\tenumeration: [\t\t\t<xsl:for-each select="$enums">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t\t\'<xsl:value-of select="@value"/>\'\t\t\t</xsl:for-each>\t\t]</xsl:if>\t\t<xsl:if test="$rest/pattern">pattern: \'<xsl:value-of select="$rest/pattern/@value"/>\'</xsl:if>\t\t<xsl:if test="$rest/minInclusive">minInclusive: \'<xsl:value-of select="$rest/minInclusive/@value"/>\'</xsl:if>\t\t<xsl:if test="$rest/maxInclusive"><xsl:if test="$rest/minInclusive">,</xsl:if> maxInclusive: \'<xsl:value-of select="$rest/maxInclusive/@value"/>\'</xsl:if>\t</xsl:template>\t\t<xsl:template name="choice">\t\t<xsl:param name="choice"/>\t\t<xsl:variable name="seq" select="$choice/sequence"/>\t\t<xsl:if test="$choice/@*">attributes: {<xsl:apply-templates select="$choice/@*"/>},</xsl:if>\t\t<xsl:if test="$choice/element">\t\t\telements: [\t\t\t<xsl:for-each select="$choice/element">\t\t\t\t<xsl:if test="position()!=1">,</xsl:if><xsl:call-template name="element"/>\t\t\t</xsl:for-each>\t\t]</xsl:if>\t\t<xsl:if test="$seq">\t\t\t<xsl:if test="$choice/element">,</xsl:if>\t\t\tsequence: [<xsl:call-template name="sequence"><xsl:with-param name="seq" select="$seq"/></xsl:call-template>]\t\t</xsl:if>\t</xsl:template>\t\t<xsl:template name="sequence">\t\t<xsl:param name="seq"/>\t\t<xsl:for-each select="$seq/*">\t\t\t<xsl:if test="position()!=1">,</xsl:if>\t\t\t<xsl:if test="name()=\'element\'">{element: <xsl:call-template name="element"><xsl:with-param name="attrs" select="$seq/@*"/></xsl:call-template>}</xsl:if>\t\t\t<xsl:if test="name()=\'choice\'">{choice: {<xsl:call-template name="choice"><xsl:with-param name="choice" select="."/></xsl:call-template>}}</xsl:if>\t\t</xsl:for-each>\t</xsl:template></xsl:stylesheet>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsl,"SchemaBody"],0));(Ext.cmd.derive("FBEditor.editor.schema.Factory",Ext.Base,{singleton:"true",definedTypes:[],_deferredTypes:{},createElement:function(b,l){var j=this,f=b,a=l,g=a.schemaName.replace(/:/g,"."),c,d,k;if(Ext.isEmpty(f)){throw Error("Невозможно создать элемент схемы текста. Передано пустое назавние элемента.")}try{f=f.replace(/-([a-z])/g,"$1");f=Ext.String.capitalize(f);c="FBEditor.editor.schema."+g+"."+f+"Element";if(!a.extend){delete a.extend}else{a.extend="FBEditor.editor.schema."+g+".extend."+a.extend.substring(5)}k={constructor:function(){var n=this,m=n.superclass;n.sequence=n.sequence||[];while(m){if(m.sequence){n.sequence=Ext.Array.merge(m.sequence,n.sequence)}if(m.choice){n.choice=n.choice||{};n.choice=Ext.applyIf(n.choice,m.choice)}if(m.attributes){n.attributes=n.attributes||{};n.attributes=Ext.applyIf(n.attributes,m.attributes)}m=m.superclass}Ext.Object.each(n.attributes,function(p,q){var o;if(q.type&&/:/.test(q.type)){o="FBEditor.editor.schema."+g+".extend."+q.type.substring(5);q.type=Ext.create(o)}})}};k=Ext.apply(a,k);Ext.define(c,k);d=Ext.create(c)}catch(h){Ext.log({level:"warn",msg:"Неопределенный элемент схемы текста: "+c,dump:h})}return d},defineType:function(b,l){var k=this,h=k.definedTypes,c=k._deferredTypes,d=b,a=Ext.clone(l),g=a.schemaName.replace(/:/g,"."),f;if(Ext.isEmpty(d)){throw Error("Невозможно определить тип схемы текста. Передано пустое назавние типа.")}try{d=d.replace(/-([a-z])/g,"$1");f="FBEditor.editor.schema."+g+".extend."+d;if(a.extend){a.extend="FBEditor.editor.schema."+g+".extend."+a.extend.substring(5);if(!Ext.Array.contains(h,a.extend)){c[f]={name:b,options:l};return}}Ext.define(f,a);h.push(f);delete c[f];k._checkDeferredTypes()}catch(j){Ext.log({level:"warn",msg:"Неопределенный тип схемы текста: "+f,dump:j})}},_checkDeferredTypes:function(){var b=this,a=b._deferredTypes;Ext.Object.each(a,function(c,d){b.defineType(d.name,d.options)})}},0,0,0,0,0,0,[FBEditor.editor.schema,"Factory"],0));(Ext.cmd.derive("FBEditor.editor.schema.Schema",Ext.Base,{_xsd:"",elements:null,callback:[],disableDebug:true,constructor:function(schemaName){var me=this,schName=schemaName,xsl,xsd,xsdJson,cse,dse,elements;cse=function(name,options){options.schemaName=schName;return FBEditor.editor.schema.Factory.createElement(name,options)};dse=function(name,options){options.schemaName=schName;return FBEditor.editor.schema.Factory.defineType(name,options)};try{me._xsd=me.createXsd(schName);xsd=me._xsd.replace(/<schema.*?>/,"<schema>");xsl=FBEditor.xsl.SchemaBody.getXsl();xsdJson=FBEditor.util.xml.Jsxml.trans(xsd,xsl);eval(xsdJson);me.elements=elements}catch(e){Ext.log({level:"error",msg:e,dump:e});Ext.Msg.show({title:"Ошибка",message:"Невозможно инициализировать схему "+schName,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},validXml:function(d){var c=this,a=FBEditor.webworker.Manager,b=a.getMaster("xmllint"),f;f={xml:d.xml,xsd:c._xsd,xmlFileName:"body.xml",schemaFileName:"fb3_body.xsd"};d.scopeData=d.scopeData||{};c.callback.push({fn:d.callback,scope:d.scope,scopeData:d.scopeData});b.post(f,c.messageValid,c)},createXsd:function(d){var g=d,c,b,a;if(Ext.isEmpty(g)){throw Error("Невозможно создать схему. Передано пустое назавние схемы.")}g=g.toLowerCase();g=g.replace(/-([a-z])/g,"$1");if(/:/.test(g)){g=g.split(":");c=g.pop();c=Ext.String.capitalize(c);g.push(c);g=g.join(".")}else{g=Ext.String.capitalize(g)}b="FBEditor.xsd."+g;try{a=Ext.create(b);a=a.getXsd()}catch(f){a="";Ext.log({level:"error",msg:"Не найдена схема: "+b,dump:f})}return a},messageValid:function(a){var b=this,c=a.data,d;d=b.getCallback();!d.scopeData.debug||console.log("xmllint",c.res,c.valid,c);if(d){d.scopeData.loaded=c.loaded;d.fn.call(d.scope,c.res,d.scopeData)}},getCallback:function(){var a=this,b=null;if(a.callback.length){b=a.callback.splice(0,1)[0]}return b},getElement:function(a){var c=this,b;b=c.elements[a]?c.elements[a]:null;return b},getName:function(a){return a.attributes.name},verify:function(c,a,d){var l=this,k=true,m=Ext.clone(a),n,h,g,f,b=d?false:l.disableDebug;g=l.getElement(c);if(!g){return false}n=g.sequence.length?Ext.clone(g.sequence):null;h=g.choice&&g.choice.elements&&g.choice.elements.length?Ext.clone(g.choice):null;b||console.log("VERIFY name, srcEls, el",c,m,g);try{while(m.length){f=m[0];b||console.log("======================== (nameEl, seq, srcEls)",f,n,m);if(n&&!l.checkSequence(n,m,d)){b||console.log("=== ERROR VERIFY SEQ === (nameEl, seq, srcEls)",f,n,m);return false}if(h){if(!l.checkChoice(f,h,d)){b||console.log("=== ERROR VERIFY CHOICE === (nameEl, choice, srcEls)",f,h,m);return false}m.splice(0,1)}}}catch(j){b||console.log("=== THROW ERROR VERIFY === ",j);k=false}return k},checkSequence:function(k,h,c){var g=this,f=false,j,b,d,a=c?false:g.disableDebug;a||console.log("--- SEQUENCE --- (name, seq, srcEls)",h[0],k,h);while(k.length){b=h[0];j=k[0];if(j){if(j.element){d=h.length>1?h[1]:false;f=g.checkElement(b,d,j.element,k,c);if(f){h.splice(0,1)}}else{if(j.choice){if(b){while(b&&(f=g.checkChoice(b,j.choice,c))){a||console.log("< OK > sequence choice (name, choice)",b,j.choice);h.splice(0,1);b=h.length?h[0]:false}}else{f=g.checkChoice(b,j.choice,c)}k.splice(0,1)}}}}return f},checkElement:function(b,d,g,j,c){var k=this,h=false,f,a=c?false:k.disableDebug;f=Ext.Object.getValues(g)[0];a||console.log("--- ELEMENT --- (name, nextName, el, items)",b,d,f,j);if(f.name&&f.name===b||f.ref&&f.ref===b){a||console.log("< OK > sequence element (el, nextName)",f,d);h=true;if(f.maxOccurs&&f.maxOccurs==="unbounded"&&d===b){}else{if(f.maxOccurs&&Number(f.maxOccurs)>1&&d===b){f.maxOccurs=Number(f.maxOccurs)-1}else{j.splice(0,1)}}}else{if((f.name||f.ref)&&(!f.minOccurs||Number(f.minOccurs)!==0)){j.splice(0,j.length)}else{if(b===undefined){if(f.minOccurs&&Number(f.minOccurs)===0){h=true;j.splice(0,1)}else{j.splice(0,j.length)}}else{if(f.minOccurs&&Number(f.minOccurs)===0){j.splice(0,1)}else{j.splice(0,1)}}}}return h},checkChoice:function(d,b,a){var g=this,f=false,c,h=a?false:g.disableDebug;h||console.log("+++ CHOICE +++ (name, choice)",d,b);c=b.attributes||{};f=Ext.Array.findBy(b.elements,function(j){return j[d]});if(f){return true}if(b.sequence){f=g.checkChoiceSequence(d,b.sequence,a)}return f},checkChoiceSequence:function(b,f,a){var d=this,c=false,g=a?false:d.disableDebug;g||console.log("+++ CHOICE SEQUENCE +++ (name, choiceSeq)",b,f);c=Ext.Array.findBy(f,function(h){if(h.element){if(h.element[b]){g||console.log("-< OK >- choice sequence element (name, element)",b,h.element);return true}}else{if(h.choice){if(d.checkChoice(b,h.choice,a)){g||console.log("+< OK >+ choice sequence choice (name, choice)",b,h.choice);return true}}}return false});return c}},1,0,0,0,0,0,[FBEditor.editor.schema,"Schema"],0));(Ext.cmd.derive("FBEditor.xsl.Editor",Ext.Base,{singleton:true,getXsl:function(){var a;a='<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">\t<xsl:output encoding="UTF-8" indent="no" method="html"/>\t<xsl:template match="*">\t\tce(\'<xsl:value-of select="name()"/>\', {<xsl:if test="@*"><xsl:apply-templates select="@*"/></xsl:if>}<xsl:if test="* or .">, [<xsl:apply-templates/>]</xsl:if>)<xsl:if test="position()!=last()">, </xsl:if>\t</xsl:template>\t<xsl:template match="text()">\t\t<xsl:if test="normalize-space()">\t\t\tct(\'<xsl:value-of select="."/>\')\t\t\t<xsl:if test="position()!=last()">, </xsl:if>\t\t</xsl:if>\t</xsl:template>\t<xsl:template match="@*">\'<xsl:value-of select="local-name()"/>\': \'<xsl:value-of select="."/>\'<xsl:if test="position()!=last()">, </xsl:if></xsl:template></xsl:stylesheet>\t\t\t';return a}},0,0,0,0,0,0,[FBEditor.xsl,"Editor"],0));(Ext.cmd.derive("FBEditor.editor.Manager",Ext.Base,{selectCls:"mode-select",history:null,keymap:null,schema:null,content:null,selection:null,range:null,suspendEvent:false,processSyncButtons:false,emptyElement:"br",selectionToLeft:null,selectionToUp:null,editor:null,focusElement:null,stateExpandedNodesTree:{},cashSyncBtn:null,constructor:function(a){var c=this,b=a.rootElementName;c.editor=a;c.history=Ext.create("FBEditor.editor.History");c.keymap=Ext.create("FBEditor.editor.KeyMap",c);c.schema=Ext.create("FBEditor.editor.schema.Schema",b)},createContent:function(j){var g=this,a=j,h,f,d,c,b;g.resetFocus();a=a.replace(/\\/g,"\\\\");a=a.replace(/'/g,"\\'");a=a.replace(/<br(.*?)\/>/gi,"<p><br$1/></p>");a=a.replace(/<li><\/li>/gi,"<li><br/></li>");a=a.replace(/<subtitle><\/subtitle>/gi,"<subtitle><br/></subtitle>");b=FBEditor.xsl.Editor.getXsl();h=FBEditor.util.xml.Jsxml.trans(a,b);h=h.replace(/\n+|\t+/g," ");h=h.replace(/\), ?]/g,")]");c=Ext.create("FBEditor.editor.CreateContent",h);f=c.getContent();d=g.getEditor();f.setEditor(d);g.getHistory().clear();g.content=f;d.fireEvent("loadData")},createRootElement:function(c){var d=this,b=d.getFactory(),a;a=b.createElement(c);a.createScaffold();d.content=a;return a},setSuspendEvent:function(a){this.suspendEvent=a},isSuspendEvent:function(){return this.suspendEvent},getContent:function(){return this.content},getFactory:function(){return FBEditor.editor.Factory},getEditor:function(){return this.editor},getHistory:function(){return this.history},getKeymap:function(){return this.keymap},getNode:function(d){var c=this,b=c.content,a;c.suspendEvent=true;a=b.getNode(d);c.suspendEvent=false;return a},getXml:function(){var c=this,b=c.content,a;console.log("content",b);a=b.getXml();a='<?xml version="1.0" encoding="UTF-8"?>'+a;console.log(a);return a},setFocusElement:function(g,f){var c=this,h=c.getPanelProps(),b,a,d;b=g.getElement?g.getElement():g;c.focusElement=b;c.selection=f||window.getSelection();a=c.selection.rangeCount?c.selection.getRangeAt(0):null;if(a){d=c.range?c.range.collapsed!==a.collapsed:true;c.range={collapsed:a.collapsed,common:a.commonAncestorContainer,start:a.startContainer,end:a.endContainer,offset:{start:a.startOffset,end:a.endOffset},toString:function(){return a.toString()}}}else{d=true;c.range={collapsed:true,common:g,start:g,end:g,offset:{start:0,end:0},toString:function(){return""}}}if(!b.isText&&c.cashSyncBtn!==b.elementId||d){c.cashSyncBtn=b.elementId;c.syncButtons()}if(h){FBEditor.setEditorManager(c);h.fireEvent("loadData",b)}},getPanelProps:function(){return null},resetFocus:function(){var a=this;a.focusElement=null;a.range=null;a.selection=null;a.selectionToLeft=null;a.selectionToUp=null},setCursor:function(f){var c=this,a=c.getContent(),d=window.getSelection(),b,h;try{f.focusElement=f.focusElement||f.startNode.getElement();f.startOffset=f.startOffset||0;f.startOffset=f.startOffset>f.startNode.length?f.startNode.length:f.startOffset;h=f.startNode.viewportId;b=a.getNodeHelper();b.getNode(h).focus();if(f.focusElement.nodes[h].scrollIntoView){}if(f.startNode.getElement().isText){d.collapse(f.startNode,f.startOffset)}else{d.collapse(f.startNode,0)}if(f.endNode){f.endOffset=f.endOffset||0;d.extend(f.endNode,f.endOffset)}c.setFocusElement(f.focusElement,d)}catch(g){}},restoreCursor:function(){var b=this,a=b.getRange();if(a&&a.collapsed){b.setCursor({startNode:a.start,startOffset:a.offset.start})}},restoreSelection:function(){var b=this,a=b.getRange();if(a){b.setCursor({startNode:a.start,startOffset:a.offset.start,endNode:a.end,endOffset:a.offset.end})}},getFocusElement:function(){return this.focusElement},clearCacheSyncButton:function(){this.cashSyncBtn=null},syncButtons:function(){var c=this,a=c.getEditor(),b;b=a.getToolbar();b.fireEvent("syncButtons")},disableButtons:function(){var c=this,a=c.getEditor(),b;b=a.getToolbar();if(b){b.fireEvent("disableButtons")}},removeNodes:function(c){var b=this,a=b.content;a.removeNodes(c)},createElement:function(b,f){var d=this,a=d.getFactory(),c,g;g=d.getSelection();c=a.createElement(b);c.fireEvent("createElement",g,f)},deleteWrapper:function(b,d){var c=this,a=d,f;a=a||{};a.manager=c;f=Ext.create("FBEditor.editor.command."+b+".DeleteWrapperCommand",{opts:a});if(f.execute()){c.getHistory().add(f)}},setRootContentEditable:function(b,g){var f=this,a=f.getContent(),d,c;d=a.getNodeHelper();c=d.getNode(g);c.setAttribute("contenteditable",Boolean(b))},getSelection:function(){return this.selection},getRange:function(){return this.range},getSchema:function(){return this.schema},getElementById:function(d,b){var c=this,a=null;b=b||c.getContent();if(b.elementId===d){return b}Ext.Array.each(b.children,function(f){a=c.getElementById(d,f);if(a){return false}});return a},getNamesElements:function(b){var a=[];Ext.Array.each(b.children,function(c){if(!c.isText){a.push(c.getName())}});return a},createEmptyElement:function(){var b=this,a;a=b.getFactory().createElement(b.emptyElement);return a},createEmptyP:function(){var c=this,b={},a=c.getFactory();b.empty=a.createElement(c.emptyElement);b.p=a.createElement("p");b.p.add(b.empty);return b.p},splitNode:function(c,b,g){var d=this,a=d.getFactory(),f;b.parentContainer=b.container.parentNode;f=b.parentContainer.viewportId;c.parentContainer=b.parentContainer.getElement();c.container=b.container.getElement();if(c.parentContainer.elementId===c.common.elementId&&c.container.isText){b.next=b.container.nextSibling;c.endTextValue=b.container.nodeValue.substring(g);c.startTextValue=b.container.nodeValue.substring(0,g);if(c.startTextValue){b.container.nodeValue=c.startTextValue;c.container.setText(c.startTextValue)}if(c.startTextValue&&c.endTextValue.trim()){c.container=a.createElementText(c.endTextValue);b.container=c.container.getNode(f);if(b.next){c.next=b.next.getElement();c.parentContainer.insertBefore(c.container,c.next);b.parentContainer.insertBefore(b.container,b.next)}else{c.parentContainer.add(c.container);b.parentContainer.appendChild(b.container)}}}else{while(c.parentContainer.elementId!==c.common.elementId){b.next=b.parentContainer.nextSibling;b.parent=b.parentContainer.parentNode;c.parent=b.parent.getElement();b.nextContainer=b.container.nextSibling;c.cloneContainer=c.parentContainer.clone({ignoredDeep:true});if(c.container.isText){c.endTextValue=b.container.nodeValue.substring(g);c.startTextValue=b.container.nodeValue.substring(0,g);if(!c.startTextValue){c.parentContainer.remove(c.container);b.parentContainer.removeChild(b.container)}else{b.container.nodeValue=c.startTextValue;c.container.setText(c.startTextValue)}if(c.endTextValue.trim()){c.t=a.createElementText(c.endTextValue);c.cloneContainer.add(c.t)}b.cloneContainer=c.cloneContainer.getNode(f);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.cloneContainer,c.next);b.parent.insertBefore(b.cloneContainer,b.next)}else{c.parent.add(c.cloneContainer);b.parent.appendChild(b.cloneContainer)}}else{b.cloneContainer=c.cloneContainer.getNode(f);if(b.next){c.next=b.next.getElement();c.parent.insertBefore(c.cloneContainer,c.next);b.parent.insertBefore(b.cloneContainer,b.next)}else{c.parent.add(c.cloneContainer);b.parent.appendChild(b.cloneContainer)}if(b.container.firstChild){c.cloneContainer.add(c.container);b.cloneContainer.appendChild(b.container)}else{b.parentContainer.removeChild(b.container)}c.parentContainer.remove(c.container)}b.parent=b.cloneContainer;c.parent=b.parent.getElement();while(b.nextContainer){c.nextContainer=b.nextContainer.getElement();b.buf=b.nextContainer.nextSibling;c.parent.add(c.nextContainer);b.parent.appendChild(b.nextContainer);c.parentContainer.remove(c.nextContainer);b.nextContainer=b.buf}b.container=b.cloneContainer;c.container=b.container.getElement();if(!b.parentContainer.firstChild){b.parentContainer.parentNode.getElement().remove(c.parentContainer);b.parentContainer.parentNode.removeChild(b.parentContainer)}b.parentContainer=b.container.parentNode;c.parentContainer=b.parentContainer.getElement()}}return b.container},joinNode:function(d){var c=this,a={},b={};a.node=d;b.node=d.getElement();a.prev=d.previousSibling;b.prev=a.prev.getElement();if(b.node.isText&&b.prev.isText){b.text=b.prev.text+b.node.text;b.prev.setText(b.text);a.prev.nodeValue=b.text}else{a.first=a.node.firstChild;b.first=a.first?a.first.getElement():null;a.prevLast=a.prev;b.prevLast=b.prev;a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null;while(b.first&&b.last){a.firstChild=a.first.firstChild;a.next=a.first;if(b.last.isText&&!b.first.isText){while(a.next){a.buf=a.next.nextSibling;b.next=a.next.getElement();b.prevLast.add(b.next);a.next.parentNode.getElement().remove(b.next);a.prevLast.appendChild(a.next);a.next=a.buf}}else{while(a.next){a.buf=a.next.nextSibling;b.next=a.next.getElement();if(b.last&&b.last.isText&&b.next.isText){b.nodeValue=a.last.nodeValue+a.next.nodeValue;a.last.nodeValue=b.nodeValue;b.last.setText(b.nodeValue)}else{b.prevLast.add(b.next);a.prevLast.appendChild(a.next);if(b.last.isText){a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null}}a.next=a.buf}if(b.last.isText){a.first.parentNode.getElement().remove(b.first);a.first.parentNode.removeChild(a.first)}}if(a.prevLast.firstChild.getElement().isEmpty()){b.prevLast.remove(a.prevLast.firstChild.getElement());a.prevLast.removeChild(a.prevLast.firstChild)}a.first=a.firstChild;b.first=a.first?a.first.getElement():null;a.prevLast=a.last;b.prevLast=b.last;a.last=a.prevLast.lastChild;b.last=a.last?a.last.getElement():null}}a.node.parentNode.getElement().remove(b.node);a.node.parentNode.removeChild(a.node)},isFirstNode:function(c,d){var a={},b={};b.common=c.getElement();a.node=d;b.node=a.node.getElement();do{a.parent=a.node.parentNode;b.parent=a.parent.getElement();a.parentParent=a.parent.parentNode;b.parentParent=a.parentParent.getElement();a.first=a.parent.firstChild;b.first=a.first.getElement();if(b.first.elementId!==b.node.elementId){return false}a.node=a.parent;b.node=a.node.getElement()}while(b.parentParent.elementId!==b.common.elementId&&b.parent.elementId!==b.common.elementId&&!b.parentParent.isRoot);return true},isLastNode:function(c,d){var a={},b={};b.common=c.getElement();a.node=d;b.node=a.node.getElement();do{a.parent=a.node.parentNode;b.parent=a.parent.getElement();a.parentParent=a.parent.parentNode;b.parentParent=a.parentParent.getElement();a.last=a.parent.lastChild;b.last=a.last.getElement();if(b.last.elementId!==b.node.elementId){return false}a.node=a.parent;b.node=a.node.getElement()}while(b.parentParent.elementId!==b.common.elementId&&b.parent.elementId!==b.common.elementId&&!b.parentParent.isRoot);return true},getNodesPP:function(g,b,c){var d=this,a=[],f=[];if(!g){return a}c.cur=g.getElement();if(c.cur.elementId===c.lastP.elementId){b.ppStop=true;return a}if(!c.cur.isStyleHolder){b.first=g.firstChild;c.first=b.first?b.first.getElement():null;if(c.first&&!c.first.isText){f=d.getNodesPP(b.first,b,c);Ext.Array.push(a,f)}}else{a=[g]}if(g.nextSibling&&!b.ppStop){g=g.nextSibling;f=d.getNodesPP(g,b,c);Ext.Array.push(a,f)}if(!b.ppStop){b.parent=g.parentNode;c.parent=b.parent.getElement();while(!b.parent.nextSibling&&c.parent.elementId!==c.common.elementId){b.parent=b.parent.parentNode;c.parent=b.parent.getElement()}b.parentNext=b.parent.nextSibling;if(b.parentNext&&c.parent.elementId!==c.common.elementId){f=d.getNodesPP(b.parentNext,b,c);Ext.Array.push(a,f)}}return a},getDeepFirst:function(a){if(a){while(a.firstChild){a=a.firstChild}}return a},getDeepLast:function(a){if(a){while(a.lastChild){a=a.lastChild}}return a},getCursorPosition:function(d){var h=this,b=window.getSelection(),f={},a={},m,j,g,l,c,k;g=b.getRangeAt(0);k=g.startContainer.viewportId;l={startNode:g.startContainer,startOffset:g.startOffset,endNode:g.endContainer,endOffset:g.endOffset};if(!d){m={node:g.startContainer,offset:g.startOffset}}else{a.cursor=g.endContainer;f.cursor=a.cursor.getElement();if(!f.cursor.isText){f.cursor=f.cursor.getDeepFirst();c=f.cursor.getNodeHelper();a.cursor=c.getNode(k)}m={node:a.cursor,offset:g.endOffset}}a.node=m.node;f.node=a.node.getElement();c=f.node.getNodeHelper();j=c.getXY(k,m.offset);h.setCursor(l);return j},createElementFromNode:function(h){var g=this,b=g.getFactory(),a={},c=h.nodeName.toLowerCase(),f=g.getSchema(),j,d;if(h.nodeType===Node.TEXT_NODE){j=h.nodeValue.trim();if(j&&!/^\n+$/.test(j)){d=b.createElementText(h.nodeValue)}}else{if(f.elements[c]){Ext.Array.each(h.attributes,function(k){if(Ext.isObject(f.elements[c].attributes[k.name])||Ext.Array.contains(["href"],k.name)&&f.elements[c].attributes["xlink:href"]){a[k.name]=k.value}})}d=b.createElement(c,a);Ext.Array.each(h.childNodes,function(l){var k;k=g.createElementFromNode(l);if(k){d.add(k)}})}return d},removeEmptyNodes:function(c){var b=this,f=0,a,d;a=c.getElement();while(f<a.children.length){d=a.children[f];if(d.isEmpty()){a.remove(d);c.removeChild(d.nodes[c.viewportId])}else{if(d.children.length){b.removeEmptyNodes(d.nodes[c.viewportId])}f++}}},clearSelectNodes:function(c){var b=this,a;a=document.querySelectorAll("."+b.selectCls);Ext.Array.each(a,function(f){var d=f.getElement();d.selectNode(false,c)})},checkSelectNodes:function(){var b=this,a;a=document.querySelectorAll("."+b.selectCls);if(a.length){window.getSelection().removeAllRanges()}}},1,0,0,0,0,0,[FBEditor.editor,"Manager"],0));(Ext.cmd.derive("FBEditor.editor.command.ConvertToTextCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var l=this,f=l.getData(),k=false,b={},d={},g=FBEditor.editor.Factory,c,a,h;try{c=f.el.getManager();c.setSuspendEvent(true);a=c.getSchema();h=f.range||c.getRange();f.viewportId=h.start.viewportId;console.log("convert "+f.el.getName()+" to text ",f);d.node=f.el;b.node=d.node.nodes[f.viewportId];d.parent=d.node.parent;b.parent=d.parent.nodes[f.viewportId];d.nameEl=d.parent.getName();d.pos=d.parent.getChildPosition(d.node);d.namesElements=c.getNamesElements(d.parent);d.namesElements.splice(d.pos,1,"p");if(a.verify(d.nameEl,d.namesElements)){d.verify=true}else{if(!a.verify(d.node.getName(),["p"])){return false}}d.fragment=g.createElement("div");d.node.convertToText(d.fragment);b.fragment=d.fragment.getNode(f.viewportId);if(d.verify){b.first=b.fragment.firstChild;d.first=b.first.getElement();while(d.first){d.parent.insertBefore(d.first,d.node);b.parent.insertBefore(b.first,b.node);b.first=b.fragment.firstChild;d.first=b.first?b.first.getElement():null}d.parent.remove(d.node);b.parent.removeChild(b.node)}else{d.node.removeAll();b.oldNode=b.node;b.node=d.node.getNode(f.viewportId);b.parent.replaceChild(b.node,b.oldNode);b.first=b.fragment.firstChild;d.first=b.first.getElement();while(d.first){d.node.add(d.first);b.node.appendChild(b.first);b.first=b.fragment.firstChild;d.first=b.first?b.first.getElement():null}}d.parent.sync(f.viewportId);c.setSuspendEvent(false);d.cursor=h.start.getElement();b.cursor=d.cursor.nodes[f.viewportId];c.setCursor({startNode:b.cursor,startOffset:h.offset.start});k=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});l.getHistory(d.parent).removeNext()}c.setSuspendEvent(false);return k},unExecute:function(){var f=this,g=f.getData(),b={},d={},c=false,a;console.log("Отмена превращения в текст нереализована");return c}},0,0,0,0,0,0,[FBEditor.editor.command,"ConvertToTextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.DeleteCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,d=k.getData(),j=false,a={},c={},f=FBEditor.editor.Factory,b,g;try{c.node=d.el;b=c.node.getManager();b.setSuspendEvent(true);g=d.range||b.getRange();d.viewportId=g.start.viewportId;console.log("del el",d,g);a.node=c.node.nodes[d.viewportId];c.parent=c.node.parent;a.parent=c.parent.nodes[d.viewportId];a.next=a.node.nextSibling;c.next=a.next?a.next.getElement():null;a.prev=a.node.previousSibling;c.prev=a.prev?a.prev.getElement():null;c.parent.remove(c.node);a.parent.removeChild(a.node);a.first=a.parent.firstChild;if(!a.first){if(c.parent.isStyleHolder){c.empty=b.createEmptyElement();c.newEl=c.empty}else{c.p=b.createEmptyP();c.newEl=c.p;if(c.parent.isRoot){c.s=f.createElement("section");c.s.add(c.p);c.newEl=c.s}}a.newEl=c.newEl.getNode(d.viewportId);c.parent.add(c.newEl);a.parent.appendChild(a.newEl)}c.parent.sync(d.viewportId);b.setSuspendEvent(false);a.cursor=a.newEl?a.newEl:a.next;a.cursor=a.cursor?a.cursor:a.prev;a.cursor=a.cursor?a.cursor:a.parent;d.saveRange={startNode:b.getDeepFirst(a.cursor)};b.setCursor(d.saveRange);d.els=c;d.range=g;k.verifyElement(c.node);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return j},unExecute:function(){var g=this,h=g.getData(),b={},f={},d=false,c,a;try{a=h.range;f=h.els;c=f.parent.getManager();c.setSuspendEvent(true);b.node=f.node.nodes[h.viewportId];b.parent=f.parent.nodes[h.viewportId];console.log("undo del el",b,f,a);if(f.newEl){b.newEl=f.newEl.nodes[h.viewportId];f.parent.replace(f.node,f.newEl);b.parent.replaceChild(b.node,b.newEl)}else{if(f.next){b.next=f.next.nodes[h.viewportId];f.parent.insertBefore(f.node,f.next);b.parent.insertBefore(b.node,b.next)}else{f.parent.add(f.node);b.parent.appendChild(b.node)}}f.parent.sync(h.viewportId);c.setSuspendEvent(false);h.saveRange={startNode:a.start,startOffset:a.offset.start,focusElement:f.node};c.setCursor(h.saveRange);d=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(f.parent).remove()}c.setSuspendEvent(false);return d}},0,0,0,0,0,0,[FBEditor.editor.command,"DeleteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractCellCommand",FBEditor.editor.command.AbstractCommand,{joinCells:function(j,k,h){var g=this,c={},a={},b,d,f;b=j.getManager();d=k.rb[0]-k.lt[0]+1;f=k.rb[1]-k.lt[1]+1;j.each(function(l,m){l.each(function(q,o){var p=q.nodes[h],n;if(o===k.lt[0]&&m===k.lt[1]){a.joinTd=p;c.joinTd=q;c.joinTd._sizeSelection=k;q.setColSpan(d);q.setRowSpan(f);a.cursor=p}else{if(o>=k.lt[0]&&o<=k.rb[0]&&m>=k.lt[1]&&m<=k.rb[1]){q.hide();n={ownerTd:q,children:[]};a.first=p.firstChild;c.first=a.first?a.first.getElement():null;while(c.first){n.children.push(c.first);c.joinTd.add(c.first);a.joinTd.appendChild(a.first);a.first=p.firstChild;c.first=a.first?a.first.getElement():null}c.joinTd.addLinks(n);c.emptyP=b.createEmptyP();q.add(c.emptyP)}}})});return c.joinTd},splitCell:function(d,c){var b={},a={};Ext.Array.each(d.getLinks(),function(f){b.ownerTd=f.ownerTd;a.ownerTd=b.ownerTd.nodes[c];b.ownerTd.show();Ext.Array.each(f.children,function(g){a.child=g.nodes[c];b.ownerTd.remove(b.ownerTd.first());b.ownerTd.add(g);a.ownerTd.appendChild(a.child)})});d.setColSpan();d.setRowSpan();d.removeLinks()},setCursor:function(c,a){var d=this,f=d.getData(),b;b=a.cursor.getElement().getManager();f.saveRange={startNode:b.getDeepFirst(a.cursor)};b.setCursor(f.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractCellCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractInsertColCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,d=k.getData(),j=false,c={},a={},f=FBEditor.editor.Factory,b,g;try{a.node=d.node;c.node=a.node.getElement();b=c.node.getManager();b.setSuspendEvent(true);g=d.range||b.getRange();d.range={common:g.common,start:g.start,end:g.end,parentStart:g.start.parentNode,collapsed:g.collapsed,offset:g.offset};if(!a.node.parentNode){a.parent=d.range.parentStart;c.parent=a.parent.getElement();while(c.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;c.parent=a.parent.getElement()}a.node=a.parent}d.viewportId=a.node.viewportId;c.node=a.node.getElement();while(!c.node.isCell){a.node=a.node.parentNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement()}a.table=a.parent.parentNode;c.table=a.table.getElement();c.pos=c.parent.getChildPosition(c.node);d.saveNode=[];Ext.Array.each(c.table.children,function(l){Ext.Array.each(l.children,function(p,n){var m,o;if(n===c.pos){m=f.createElement(p.xmlTag);m.createScaffold();o=m.getNode(d.viewportId);d.saveNode.push(o);k.insertCol(p,o,c,a);return false}})});c.parent.sync(d.viewportId);k.setCursor(c,a);k.verifyElement(c.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return j},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{f=d.range;k=d.viewportId;b=d.saveRange.startNode.getElement().getManager();b.setSuspendEvent(true);Ext.Array.each(d.saveNode,function(l){a.node=l;c.node=a.node.getElement();k=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();c.parent.remove(c.node);a.parent.removeChild(a.node)});c.parent.sync(k);d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},insertCol:function(b,d,c,a){},setCursor:function(c,a){var d=this,g=window.getSelection(),f=d.getData(),b;b=c.p.getManager();f.oldRange=g.getRangeAt(0);a.p=c.p.nodes[f.viewportId];f.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b.setCursor(f.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractInsertColCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.AbstractInsertRowCommand",FBEditor.editor.command.AbstractCommand,{execute:function(){var k=this,d=k.getData(),j=false,c={},a={},f=FBEditor.editor.Factory,b,g;try{a.node=d.node;c.node=a.node.getElement();b=c.node.getManager();b.setSuspendEvent(true);g=d.range||b.getRange();d.range={common:g.common,start:g.start,end:g.end,parentStart:g.start.parentNode,collapsed:g.collapsed,offset:g.offset};if(!a.node.parentNode){a.parent=d.range.parentStart;c.parent=a.parent.getElement();while(c.parent.xmlTag!==a.node.getElement().xmlTag){a.parent=a.parent.parentNode;c.parent=a.parent.getElement()}a.node=a.parent}d.viewportId=a.node.viewportId;c.node=a.node.getElement();while(!c.node.isTr){a.node=a.node.parentNode;c.node=a.node.getElement();a.parent=a.node.parentNode;c.parent=a.parent.getElement()}c.tr=f.createElement("tr");Ext.Array.each(c.node.children,function(m){var l;l=f.createElement(m.xmlTag);l.createScaffold();c.tr.add(l)});a.tr=c.tr.getNode(d.viewportId);k.insertRow(c,a);c.parent.sync(d.viewportId);k.setCursor(c,a);d.saveNode=a.tr;k.verifyElement(c.parent);j=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});k.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return j},unExecute:function(){var j=this,d=j.getData(),h=false,c={},a={},b,f,k;try{f=d.range;a.node=d.saveNode;c.node=a.node.getElement();k=a.node.viewportId;a.parent=a.node.parentNode;c.parent=a.parent.getElement();b=c.node.getManager();b.setSuspendEvent(true);c.parent.remove(c.node);a.parent.removeChild(a.node);c.parent.sync(k);d.saveRange={startNode:f.start,startOffset:f.offset.start,focusElement:f.parentStart.getElement()};b.setCursor(d.saveRange);h=true}catch(g){Ext.log({level:"warn",msg:g,dump:g});j.getHistory(c.parent).remove()}b.setSuspendEvent(false);return h},insertRow:function(b,a){},setCursor:function(c,a){var d=this,g=window.getSelection(),f=d.getData(),b;b=c.tr.getManager();f.oldRange=g.getRangeAt(0);c.p=c.tr.first().first();a.p=c.p.nodes[f.viewportId];f.saveRange={startNode:a.p.firstChild,startOffset:a.p.firstChild.length};b.setCursor(f.saveRange)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"AbstractInsertRowCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DelColCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var g=this,h=g.getData(),b={},f={},d,a,c;b.node=h.node;f.node=b.node.getElement();d=f.node.getManager();a=h.range||d.getRange();h.range=a;while(!f.node.isTd){b.node=b.node.parentNode;f.node=b.node.getElement();f.pos=f.node.parent.getChildPosition(f.node);b.table=b.node.parentNode.parentNode;f.table=b.table.getElement();if(!b.table.parentNode){a=d.getRange();h.range=a;b.node=h.range.start;f.node=b.node.getElement();h.node=b.node}}if(f.node.parent.children.length===1){h.el=f.table;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments)}else{try{d.setSuspendEvent(true);h.viewportId=a.start.viewportId;b.next=b.node.nextSibling;b.prev=b.node.previousSibling;h.saveNode=[];console.log("del col",h,a);Ext.Array.each(f.table.children,function(k){f.tr=k;b.tr=f.tr.nodes[h.viewportId];f.td=f.tr.children[f.pos];b.td=f.td.nodes[h.viewportId];h.saveNode.push(b.td);f.tr.remove(f.td);b.tr.removeChild(b.td)});f.table.sync(h.viewportId);b.cursor=b.next;b.cursor=b.cursor?b.cursor:b.prev;b.cursor=b.cursor?b.cursor:b.table;h.saveRange={startNode:d.getDeepFirst(b.cursor)};d.setCursor(h.saveRange);h.els=f;h.range=a;g.verifyElement(f.node);c=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(f.parent).removeNext()}}d.setSuspendEvent(false);return c},unExecute:function(){var g=this,h=g.getData(),b={},f={},d=false,c,a;if(h.el){d=FBEditor.editor.command.DeleteCommand.prototype.unExecute.apply(this,arguments)}else{try{a=h.range;f=h.els;c=f.table.getManager();c.setSuspendEvent(true);console.log("undo del col",b,f,a);Ext.Array.each(f.table.children,function(k){f.tr=k;b.tr=f.tr.nodes[h.viewportId];b.undoTd=h.saveNode.shift();f.undoTd=b.undoTd.getElement();if(f.tr.children[f.pos]){f.td=f.tr.children[f.pos];b.td=f.td.nodes[h.viewportId];f.tr.insertBefore(f.undoTd,f.td);b.tr.insertBefore(b.undoTd,b.td)}else{f.tr.add(f.undoTd);b.tr.appendChild(b.undoTd)}});f.table.sync(h.viewportId);h.saveRange={startNode:a.start,startOffset:a.offset.start,focusElement:f.node};c.setCursor(h.saveRange);d=true}catch(j){Ext.log({level:"warn",msg:j,dump:j});g.getHistory(f.parent).remove()}}c.setSuspendEvent(false);return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DelColCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DelRowCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var g=this,h=g.getData(),b={},f={},d,a,c;b.node=h.node;f.node=b.node.getElement();d=f.node.getManager();a=h.range||d.getRange();h.range=a;while(!f.node.isTr){b.node=b.node.parentNode;f.node=b.node.getElement();if(!b.node.parentNode.parentNode){a=d.getRange();h.range=a;b.node=h.range.start;f.node=b.node.getElement();h.node=b.node}}b.table=b.node.parentNode;f.table=b.table.getElement();h.el=f.table.children.length===1?f.table:f.node;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments);d.setSuspendEvent(false);return c}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DelRowCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.DeleteCommand",FBEditor.editor.command.DeleteCommand,{execute:function(){var g=this,h=g.getData(),b={},f={},d,a,c;b.node=h.node;f.node=b.node.getElement();d=f.node.getManager();a=h.range||d.getRange();h.range=a;while(!f.node.isTable){b.node=b.node.parentNode;f.node=b.node.getElement();if(!b.node.parentNode.parentNode){a=d.getRange();h.range=a;b.node=h.range.start;f.node=b.node.getElement();h.node=b.node}}h.el=f.node;c=FBEditor.editor.command.DeleteCommand.prototype.execute.apply(this,arguments);d.setSuspendEvent(false);return c}},0,0,0,0,0,0,[FBEditor.editor.command.table,"DeleteCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertColNextCommand",FBEditor.editor.command.table.AbstractInsertColCommand,{insertCol:function(b,j,c,a){var d=this,f=d.getData(),g={},h={};g.td=b;h.td=g.td.nodes[f.viewportId];h.newTd=j;g.newTd=h.newTd.getElement();h.tr=h.td.parentNode;g.tr=h.tr.getElement();h.next=h.td.nextSibling;if(h.next){g.next=h.next.getElement();g.tr.insertBefore(g.newTd,g.next);h.tr.insertBefore(h.newTd,h.next)}else{g.tr.add(g.newTd);h.tr.appendChild(h.newTd)}c.p=c.table.first().children[c.pos+1].first()}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertColNextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertColPrevCommand",FBEditor.editor.command.table.AbstractInsertColCommand,{insertCol:function(b,j,c,a){var d=this,f=d.getData(),g={},h={};g.td=b;h.td=g.td.nodes[f.viewportId];h.newTd=j;g.newTd=h.newTd.getElement();h.tr=h.td.parentNode;g.tr=h.tr.getElement();g.tr.insertBefore(g.newTd,g.td);h.tr.insertBefore(h.newTd,h.td);c.p=c.table.first().children[c.pos].first()}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertColPrevCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertRowNextCommand",FBEditor.editor.command.table.AbstractInsertRowCommand,{insertRow:function(b,a){a.next=a.node.nextSibling;if(a.next){b.next=a.next.getElement();b.parent.insertBefore(b.tr,b.next);a.parent.insertBefore(a.tr,a.next)}else{b.parent.add(b.tr);a.parent.appendChild(a.tr)}}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertRowNextCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.InsertRowPrevCommand",FBEditor.editor.command.table.AbstractInsertRowCommand,{insertRow:function(b,a){b.parent.insertBefore(b.tr,b.node);a.parent.insertBefore(a.tr,a.node)}},0,0,0,0,0,0,[FBEditor.editor.command.table,"InsertRowPrevCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.JoinCellsCommand",FBEditor.editor.command.table.AbstractCellCommand,{execute:function(){var h=this,d=h.getData(),g=false,c={},a={},b,j,k;try{j=d.opts.viewportId;k=d.opts.size;a.table=d.opts.table;c.table=a.table.getElement();b=c.table.getManager();b.setSuspendEvent(true);b.clearSelectNodes(j);c.joinTd=h.joinCells(c.table,k,j);c.table.sync(j);a.cursor=c.joinTd.nodes[j];h.setCursor(c,a);d.nodes=a;d.els=c;h.verifyElement(c.table);g=true}catch(f){Ext.log({level:"warn",msg:f,dump:f});h.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return g},unExecute:function(){var f=this,g=f.getData(),d=false,c={},a={},b,j;try{j=g.opts.viewportId;c=g.els;b=c.table.getManager();b.setSuspendEvent(true);f.splitCell(c.joinTd,j);c.table.sync(j);a.cursor=c.joinTd.nodes[j];f.setCursor(c,a);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});f.getHistory(c.parent).remove()}b.setSuspendEvent(false);return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"JoinCellsCommand"],0));(Ext.cmd.derive("FBEditor.editor.command.table.SplitCellsCommand",FBEditor.editor.command.table.AbstractCellCommand,{execute:function(){var f=this,g=f.getData(),d=false,c={},a={},b,j;try{j=g.opts.viewportId;c.td=g.opts.td;c.table=c.td.getParentName("table");b=c.table.getManager();b.setSuspendEvent(true);f.splitCell(c.td,j);c.table.sync(j);a.cursor=c.td.nodes[j];f.setCursor(c,a);g.nodes=a;g.els=c;f.verifyElement(c.table);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});f.getHistory(c.parent).removeNext()}b.setSuspendEvent(false);return d},unExecute:function(){var f=this,g=f.getData(),d=false,c={},a={},b,j;try{j=g.opts.viewportId;a=g.nodes;c=g.els;b=c.table.getManager();b.setSuspendEvent(true);c.joinTd=f.joinCells(c.table,c.td._sizeSelection,j);c.table.sync(j);a.cursor=c.joinTd.nodes[j];f.setCursor(c,a);d=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});f.getHistory(c.parent).remove()}b.setSuspendEvent(false);return d}},0,0,0,0,0,0,[FBEditor.editor.command.table,"SplitCellsCommand"],0));(Ext.cmd.derive("FBEditor.editor.view.EditorController",Ext.app.ViewController,{onLoadData:function(){var f=this,b=f.getView(),a=b.getViewport(),c=b.getManager(),d,g;g=a.id;d=c.getNode(g);a.loadData(d)},onSwitchToSource:function(){var d=this,a=d.getView(),c=a.getSourceViewport(),b=a.getManager();c.setVisible(true)},onSwitchToText:function(){var d=this,a=d.getView(),c=a.getSourceViewport(),b=a.getManager();c.setHidden(true)}},0,0,0,0,["controller.view.editor"],0,[FBEditor.editor.view,"EditorController"],0));(Ext.cmd.derive("FBEditor.editor.view.toggleButton.ToggleButtonController",Ext.app.ViewController,{onClick:function(){var c=this,b=c.getView(),a=b.pressed;if(a){b.switchToSource()}else{b.switchToText()}}},0,0,0,0,["controller.editor.toggleButton"],0,[FBEditor.editor.view.toggleButton,"ToggleButtonController"],0));(Ext.cmd.derive("FBEditor.editor.view.toggleButton.ToggleButton",Ext.button.Button,{controller:"editor.toggleButton",hidden:true,html:'<i class="fa fa-pencil"></i>',tooltipType:"title",enableToggle:true,disabled:true,listeners:{click:"onClick"},toolbar:null,translateText:{sourceEdit:"Переключить на исходный xml",textEdit:"Переключить на обычный текст"},initComponent:function(){var a=this;a.tooltip=a.translateText.sourceEdit;Ext.button.Button.prototype.initComponent.apply(this,arguments)},switchToSource:function(){var c=this,b=c.getToolbar(),a;c.setTooltip(c.translateText.textEdit);a=b.getEditor();a.fireEvent("switchToSource")},switchToText:function(){var c=this,b=c.getToolbar(),a;c.setTooltip(c.translateText.sourceEdit);a=b.getEditor();a.fireEvent("switchToText")},getToolbar:function(){var b=this,a;a=b.toolbar||b.up("editor-toolbar");b.toolbar=a;return a}},0,["editor-toggleButton"],["component","box","button","editor-toggleButton"],{component:true,box:true,button:true,"editor-toggleButton":true},["widget.editor-toggleButton"],0,[FBEditor.editor.view.toggleButton,"ToggleButton"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.ToolbarController",Ext.app.ViewController,{onSyncButtons:function(){var c=this,a=c.getView(),b=a.getButtons(),d=a.getToggleButton();if(b){Ext.Array.each(b,function(g){var f;if(g){if(g.sequence){f=g.sequence[0];f.setSequence(g.sequence.slice(1));f.fireEvent("sync")}else{g.fireEvent("sync")}}})}d.enable()},onDisableButtons:function(){var c=this,a=c.getView(),b=a.getButtons(),d=a.getToggleButton();if(b){Ext.Array.each(b,function(f){if(f){if(f.sequence){Ext.Array.each(f.sequence,function(g){g.disable()})}else{f.disable()}}})}d.disable()}},0,0,0,0,["controller.editor.toolbar"],0,[FBEditor.editor.view.toolbar,"ToolbarController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.ButtonController",Ext.app.ViewController,{onClick:function(){var c=this,b=c.getView(),a=b.getEditorManager();a.createElement(b.elementName,b.createOpts)},onSync:function(){var b=this,a=b.getView();if(!a.isActiveSelection()){a.disable()}else{a.enable()}},verify:function(b,a){var g=this,f=g.getView(),d=f.getEditorManager(),h=d.getSchema(),c={};c.debug=a;h.validXml({xml:b,callback:g.verifyResult,scope:g,scopeData:c})},getContentXml:function(){var c=this,b=c.getView(),a=b.getEditorManager();return a.getContent().getXml(true)},verifyResult:function(a,c){var d=this,b=d.getView(),f;f=b.getSequence();if(a){b.enable()}else{b.disable()}if(f){Ext.Array.each(f,function(g){if(a){g.enable()}else{g.disable()}})}}},0,0,0,0,["controller.editor.toolbar.button"],0,[FBEditor.editor.view.toolbar.button,"ButtonController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.AbstractButton",Ext.button.Button,{controller:"editor.toolbar.button",disabled:true,tooltipType:"title",listeners:{click:"onClick",sync:"onSync"},createOpts:null,toolbar:null,sequence:null,setSequence:function(a){this.sequence=a},getSequence:function(a){return this.sequence},getToolbar:function(){var b=this,a;a=b.toolbar||b.up("editor-toolbar");b.toolbar=a;return a},getEditor:function(){var b=this,a=b.getToolbar();return a.getEditor()},getEditorManager:function(){var b=this,a=b.getEditor();return a.getManager()},isActiveSelection:function(){return false}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.editor.view.toolbar.button,"AbstractButton"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.ToggleButtonController",FBEditor.editor.view.toolbar.button.ButtonController,{onClick:function(){var f=this,c=f.getView(),b=c.getEditorManager(),a,d;a=c.elementName;d=c.createOpts;if(!c.pressed){b.deleteWrapper(a)}else{b.createElement(a,d)}},onSync:function(){var g=this,f=g.getView(),d=f.getEditorManager(),b,j,a,c,h;b=d.getRange();if(!b){f.disable();return}j=b.start.getElement?b.start.getElement():d.getFocusElement();a=b.end.getElement?b.end.getElement():j;c=f.elementName;h=(j.hisName(c)||j.hasParentName(c))&&(a.hisName(c)||a.hasParentName(c));f.toggle(h);f.enable();if(!h){if(!f.isActiveSelection()){f.disable()}else{f.enable()}}}},0,0,0,0,["controller.editor.toolbar.button.togglebutton"],0,[FBEditor.editor.view.toolbar.button,"ToggleButtonController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.AbstractToggleButton",FBEditor.editor.view.toolbar.button.AbstractButton,{controller:"editor.toolbar.button.togglebutton",enableToggle:true},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.editor.view.toolbar.button,"AbstractToggleButton"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.AbstractStyleButton",FBEditor.editor.view.toolbar.button.AbstractToggleButton,{isActiveSelection:function(){var d=this,c=d.getEditorManager(),b,a;a=c.getRange();b=!a.collapsed;return b}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.editor.view.toolbar.button,"AbstractStyleButton"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.a.AController",FBEditor.editor.view.toolbar.button.ToggleButtonController,{onClick:function(){var d=this,b=d.getView(),c=b.createOpts||{},a,f;if(b.pressed){f=b.translateText.enterAddress;a=window.prompt(f,"http://");c.attributes=c.attributes||{};c.attributes.href=a;b.createOpts=c}FBEditor.editor.view.toolbar.button.ToggleButtonController.prototype.onClick.apply(this,arguments)}},0,0,0,0,["controller.editor.toolbar.button.a"],0,[FBEditor.editor.view.toolbar.button.a,"AController"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.a.A",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{controller:"editor.toolbar.button.a",html:'<i class="fa fa-link"></i>',tooltip:"Ссылка (Ctrl+L)",elementName:"a",translateText:{enterAddress:"Пожалуйста, введите адрес"}},0,["editor-toolbar-button-a"],["component","box","button","editor-toolbar-button-a"],{component:true,box:true,button:true,"editor-toolbar-button-a":true},["widget.editor-toolbar-button-a"],0,[FBEditor.editor.view.toolbar.button.a,"A"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.em.Em",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{html:'<i class="fa fa-italic"></i>',tooltip:"Курсив (Ctrl+I)",elementName:"em"},0,["editor-toolbar-button-em"],["component","box","button","editor-toolbar-button-em"],{component:true,box:true,button:true,"editor-toolbar-button-em":true},["widget.editor-toolbar-button-em"],0,[FBEditor.editor.view.toolbar.button.em,"Em"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.button.strong.Strong",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{html:'<i class="fa fa-bold"></i>',tooltip:"Полужирный (Ctrl+B)",elementName:"strong"},0,["editor-toolbar-button-strong"],["component","box","button","editor-toolbar-button-strong"],{component:true,box:true,button:true,"editor-toolbar-button-strong":true},["widget.editor-toolbar-button-strong"],0,[FBEditor.editor.view.toolbar.button.strong,"Strong"],0));(Ext.cmd.derive("FBEditor.editor.view.toolbar.Toolbar",Ext.Toolbar,{controller:"editor.toolbar",items:[{xtype:"editor-toolbar-button-strong"},{xtype:"editor-toolbar-button-em"},{xtype:"editor-toolbar-button-a"},{xtype:"tbspacer",width:20},{xtype:"editor-toggleButton"}],listeners:{syncButtons:"onSyncButtons",disableButtons:"onDisableButtons"},hidden:true,defaultShow:false,buttons:null,editor:null,toggleButton:null,toolstab:null,afterRender:function(){var a=this;Ext.toolbar.Toolbar.prototype.afterRender.apply(this,arguments);a.createButtons()},createButtons:function(){var a=this;a.buttons=[a.down("editor-toolbar-button-a"),a.down("editor-toolbar-button-em"),a.down("editor-toolbar-button-strong")]},isActive:function(){var a=this,b=a.getToolstab(),c;c=b.isActiveToolbar(a);return c},setActive:function(){var a=this,b=a.getToolstab(),c;c=b.setActiveToolbar(a);return c},setEditor:function(a){this.editor=a},getEditor:function(){return this.editor},getToggleButton:function(){var b=this,a;a=b.toggleButton||b.down("editor-toggleButton");b.toggleButton=a;return a},getButton:function(a){var c=this,b,d;d="editor-toolbar-button-"+a;b=c.down(d);return b},getButtons:function(){return this.buttons},setDefaultShow:function(a){this.defaultShow=a},isDefaultShow:function(){return this.defaultShow},getToolstab:function(){var a=this,b;b=a.toolstab||Ext.getCmp("panel-toolstab-main");a.toolstab=b;return b}},0,["editor-toolbar"],["component","box","container","toolbar","editor-toolbar"],{component:true,box:true,container:true,toolbar:true,"editor-toolbar":true},["widget.editor-toolbar"],0,[FBEditor.editor.view.toolbar,"Toolbar"],0));(Ext.cmd.derive("FBEditor.editor.view.viewport.ViewportController",Ext.app.ViewController,{},0,0,0,0,["controller.editor.viewport"],0,[FBEditor.editor.view.viewport,"ViewportController"],0));(Ext.cmd.derive("FBEditor.editor.view.viewport.Viewport",Ext.container.Container,{controller:"editor.viewport",cls:"editor-viewport",layout:"fit",editor:null,paragraphBtn:null,afterRender:function(){var b=this,a;Ext.container.Container.prototype.afterRender.apply(this,b);b.createRoot();a=b.getParagraphBtn();if(a.isPressed()){b.addCls(a.modeCls)}},createRoot:function(){var f=this,d=f.getEditor(),c,a,b;c=d.getManager();a=c.getContent();if(!a){d.createRootElement()}b=c.getNode(f.id);f.loadData(b)},loadData:function(c){var b=this,d,a;d=b.getEl().dom;a=b.getContent();if(a){d.replaceChild(c,a)}else{d.appendChild(c)}},getContent:function(){return this.getEl().dom.firstChild},getEditor:function(){var b=this,a;a=b.editor||b.up("base-editor");b.editor=a;return a},getParagraphBtn:function(){var b=this,a;a=b.paragraphBtn||Ext.getCmp("panel-toolstab-tools-button-paragraph");b.paragraphBtn=a;return a}},0,["editor-viewport"],["component","box","container","editor-viewport"],{component:true,box:true,container:true,"editor-viewport":true},["widget.editor-viewport"],0,[FBEditor.editor.view.viewport,"Viewport"],0));(Ext.cmd.derive("FBEditor.editor.view.viewport.source.Source",FBEditor.editor.view.viewport.Viewport,{},0,["editor-viewport-source"],["component","box","container","editor-viewport","editor-viewport-source"],{component:true,box:true,container:true,"editor-viewport":true,"editor-viewport-source":true},["widget.editor-viewport-source"],0,[FBEditor.editor.view.viewport.source,"Source"],0));(Ext.cmd.derive("FBEditor.editor.view.Editor",Ext.panel.Panel,{controller:"view.editor",layout:"fit",listeners:{loadData:"onLoadData",switchToSource:"onSwitchToSource",switchToText:"onSwitchToText"},rootElementName:"root",viewport:null,sourceViewport:null,toolbar:null,manager:null,defaultShowToolbar:false,afterRender:function(){var c=this,b,a;c.createManager();c.initEditor();c.addSource();a=c.createToolbar();a.setDefaultShow(c.defaultShowToolbar);c.setToolbar(a);b=Ext.getCmp("panel-toolstab-main");b.addToolbar(a);Ext.panel.Panel.prototype.afterRender.apply(this,c)},createManager:function(){var a=this;a.manager=a.manager||Ext.create("FBEditor.editor.Manager",a)},initEditor:function(){var a=this;a.add({xtype:"editor-viewport"})},createToolbar:function(){return Ext.create("FBEditor.editor.view.toolbar.Toolbar")},addSource:function(){var a=this,b;b=Ext.widget({xtype:"editor-viewport-source",hidden:true});a.sourceViewport=b;a.add(b)},createRootElement:function(){var c=this,b=c.getManager(),a;a=b.createRootElement(c.rootElementName);a.setEditor(c)},getValue:function(){var d=this,c=d.getManager(),a,b;a=c.getContent();b=a.getXml();b=b.replace(/^<.*?>(.*)<\/.*?>$/g,"$1");b=b.replace(/<p>&#160;<\/p>/,"");return b},getViewport:function(){var b=this,a;a=b.viewport||b.down("editor-viewport");b.viewport=a;return a},getSourceViewport:function(){return this.sourceViewport},setToolbar:function(c){var b=this,a=c;b.toolbar=a;a.setEditor(b)},getToolbar:function(){return this.toolbar},getManager:function(){var a=this;if(!a.manager){a.createManager()}return a.manager},getHistory:function(){var b=this,a=b.getManager();return a.getHistory()}},0,["base-editor"],["component","box","container","panel","base-editor"],{component:true,box:true,container:true,panel:true,"base-editor":true},["widget.base-editor"],0,[FBEditor.editor.view,"Editor"],0));(Ext.cmd.derive("FBEditor.model.resource.Resource",Ext.data.Model,{fields:[{name:"url",type:"string"},{name:"name",type:"string"},{name:"baseName",type:"string"},{name:"extension",type:"string"},{name:"date",type:"string"},{name:"size",type:"string"},{name:"type",type:"string"}]},0,0,0,0,0,0,[FBEditor.model.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.store.AbstractStore",Ext.Base,{url:"",rootProperty:null,data:null,params:null,callback:null,cacheData:{},setParams:function(a){this.params=Ext.clone(a)},getParams:function(){return this.params},setCallback:function(a){this.callback=a},load:function(){var d=this,b=FBEditor.webworker.Manager,a=d.getUrl(),c;if(true){
/*!me.cacheData[url]*/
if(d._master){d.abort()}c=b.factory("httpRequest");d._master=c;c.post({callbackId:d.url,url:a},function(f,h){var g;g=f?JSON.parse(f):null;if(g&&d.rootProperty){g=g[d.rootProperty]?g[d.rootProperty]:null}d.cacheData[a]=g;d.data=g;d.afterLoad(g)},d)}else{d.data=d.cacheData[a];d.afterLoad(d.data)}},loadData:function(b){var a=this;a.data=b||null;a.afterLoad(b)},afterLoad:function(b){var a=this,c=a.callback;if(c){c.fn.apply(c.scope,[b])}},abort:function(){var a=this;if(a._master){a._master.abort()}},getUrl:function(){var b=this,c=b.params,a=b.url;if(c){a+="?";Ext.Object.each(c,function(f,g){var d;d=encodeURI(g);a+=f+"="+d+"&"});a=a.trim("&")}return a},getRecord:function(b,f){var c=this,d=c.data,a=null;if(d){Ext.Array.each(d,function(g){if(g[b]&&g[b]==f){a=g;return false}})}return a}},0,0,0,0,0,0,[FBEditor.store,"AbstractStore"],0));(Ext.cmd.derive("FBEditor.store.desc.relations.Object",Ext.data.Store,{storeId:"desc-relations-object",pageSize:50,sorters:[{property:"name",direction:"ASC"}],fields:["id","uuid","name","persons","series"],proxy:{type:"ajax",url:"https://hub.litres.ru/pages/machax_arts/",reader:{type:"json",rootProperty:"arts"}}},0,0,0,0,0,0,[FBEditor.store.desc.relations,"Object"],0));(Ext.cmd.derive("FBEditor.store.desc.relations.Subject",Ext.data.Store,{storeId:"desc-relations-subject",pageSize:50,sorters:[{property:"last_name",direction:"ASC"},{property:"first_name",direction:"ASC"},{property:"middle_name",direction:"ASC"}],fields:["id","uuid","last_name","first_name","middle_name"],proxy:{type:"ajax",url:"https://hub.litres.ru/pages/machax_persons/",reader:{type:"json",rootProperty:"persons"}}},0,0,0,0,0,0,[FBEditor.store.desc.relations,"Subject"],0));(Ext.cmd.derive("FBEditor.store.resource.Navigation",Ext.data.TreeStore,{defaultRootText:"Ресурсы",rootVisible:false,proxy:{type:"memory"},filters:[],root:{icon:" ",cls:"treenavigation-root treenavigation-root-resource"}},0,0,0,0,0,0,[FBEditor.store.resource,"Navigation"],0));(Ext.cmd.derive("FBEditor.store.resource.Resource",Ext.data.Store,{model:"FBEditor.model.resource.Resource"},0,0,0,0,0,0,[FBEditor.store.resource,"Resource"],0));(Ext.cmd.derive("FBEditor.ux.FieldCleaner",Ext.plugin.Abstract,{pluginId:"fieldCleaner",style:"",toLowerCase:false,capitalize:false,btn:null,field:null,translateText:{cleaning:"Уборка"},constructor:function(a){var b=this;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(b){var a=this;a.field=b;b.on({scope:a,afterrender:a.afterRenderField})},handler:function(){var a=this,b=a.field;b.fireEvent("beforeFieldCleaner");a.convertVal();b.fireEvent("afterFieldCleaner")},convertVal:function(){var d=this,f=d.field,g=f.getValue(),a=FBEditor.desc.Manager,b=a.getRegexpUtf();function c(l,h,k,j){l=h?h:"";l+=Ext.String.capitalize(k)+j;l+=j==="</p>"?"":" ";return l}if(g){g=d.toLowerCase?g.toLowerCase():g;g=g.replace(b,"");g=d.capitalize?g.replace(/(<p>)? *(.+?)([.!?]+|<\/p>|$)/ig,c):g;g=g.trim();f.setValue(g)}},afterRenderField:function(){var b=this,c=b.field,a;a=Ext.dom.Element.create({tag:"i","class":"plugin-fieldCleaner fa fa-paint-brush x-btn x-btn-plain-toolbar-small",style:b.style,title:b.translateText.cleaning});b.btn=a;a.insertAfter(c.inputEl);a.addClsOnClick("x-btn-pressed");a.addClsOnOver("x-btn-over");a.on({scope:b,click:b.handler})}},1,0,0,0,["plugin.fieldCleaner"],0,[FBEditor.ux,"FieldCleaner"],0));(Ext.cmd.derive("FBEditor.ux.FieldContainerReplicator",Ext.plugin.Abstract,{pluginId:"fieldcontainerreplicator",groupName:"fieldcontainerreplicator",btnPos:"end",btnStyle:{},btnCls:"",putStyle:{marginLeft:"20px"},enableBtnPut:false,btnAddCfg:null,btnRemoveCfg:null,btnPutCfg:null,alwaysInsertFirst:false,translateText:{add:"Добавить",remove:"Удалить",put:"Вложить"},constructor:function(a){var b=this;b.btnAddCfg={html:'<i class="fa fa-plus" title="'+b.translateText.add+'"></i>',cls:"btn-plus"};b.btnRemoveCfg={html:'<i class="fa fa-minus" title="'+b.translateText.remove+'"></i>',cls:"btn-minus"};b.btnPutCfg={html:'<i class="fa fa-level-up fa-rotate-90" title="'+b.translateText.put+'"></i>',cls:"btn-put"};b.groupName=a.groupName||b.groupName;b.btnPos=a.btnPos||b.btnPos;b.btnAddCfg=a.btnAddCfg?Ext.apply(b.btnAddCfg,a.btnAddCfg):b.btnAddCfg;b.btnRemoveCfg=a.btnRemoveCfg?Ext.apply(b.btnRemoveCfg,a.btnRemoveCfg):b.btnRemoveCfg;b.btnStyle=a.btnStyle?Ext.apply(b.btnStyle,a.btnStyle):b.btnStyle;b.putStyle=a.putStyle?Ext.apply(b.putStyle,a.putStyle):b.putStyle;b.enableBtnPut=a.enableBtnPut||b.enableBtnPut;b.btnPutCfg=a.btnPutCfg?Ext.apply(b.btnPutCfg,a.btnPutCfg):b.btnPutCfg;b.btnCls=a.btnCls||b.btnCls;b.alwaysInsertFirst=a.alwaysInsertFirst||b.alwaysInsertFirst;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(h){var f=this,b=h,a=f.btnPos,j=f.groupName,d=f.getButtons(),c=f.enableBtnPut,g;b.on("added",function(k){f.checkLastInGroup(k.ownerCt,k.replicatorId)});b.replicatorId=b.replicatorId||j+"-"+Ext.id();g=c?b.items.last():b;switch(a){case"begin":g.insert(0,d);break;case"end":g.add(d);break}},getBtnAdd:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-add-"+a.groupName+"]")[0]},getBtnRemove:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-remove-"+a.groupName+"]")[0]},getBtnPut:function(){var a=this;return a.getCmp().query("[name=fieldcontainerreplicator-btn-put-"+a.groupName+"]")[0]},getButtons:function(){var g=this,j=g.btnStyle,a=g.btnAddCfg,b=g.btnRemoveCfg,c=g.enableBtnPut,k=g.btnPutCfg,d=g.btnCls,h,f=[];k=Ext.apply(k,{handler:g.putFields,scope:g,name:"fieldcontainerreplicator-btn-put-"+g.groupName});a=Ext.apply(a,{handler:g.addFields,scope:g,name:"fieldcontainerreplicator-btn-add-"+g.groupName});b=Ext.apply(b,{handler:g.removeFields,scope:g,name:"fieldcontainerreplicator-btn-remove-"+g.groupName});f.push(b);f.push(a);if(c){f.push(k)}h=[{xtype:"fieldcontainer",cls:"plugin-fieldcontainerreplicator "+d,hideLabel:true,flex:0,height:"100%",defaults:{xtype:"button",tabIndex:-1,style:j},items:f}];return h},addFields:function(b){var h=this,c=h.enableBtnPut,a,l,j,d,g,f,k;b=b||h.getBtnAdd();if(b){l=b.prev();l.enable();a=c?b.ownerCt.ownerCt.ownerCt:b.ownerCt.ownerCt;j=a.replicatorId;d=a.ownerCt;g=a.cloneConfig({replicatorId:j});k=d.items.indexOf(a);if(h.alwaysInsertFirst){k=0;d.insert(k,g)}else{k=k+1;d.add(k,g)}f=d.items.getAt(k).down("field:focusable");if(f){f.focus()}h.checkLastInGroup(d,j)}},putFields:function(d){var f=this,h=f.putStyle,a,c,g,b,j;d=d||f.getBtnPut();a=d.ownerCt.ownerCt.ownerCt;g=a.replicatorId+"-child";j=a.cloneConfig({replicatorId:g,style:h});c=j.down("[name=fieldcontainerreplicator-btn-remove-"+f.groupName+"]");c.on("afterrender",function(){this.enable()});a.add(j);j.fireEvent("putFields",d);b=j.down("field:focusable");b.focus();return j},removeFields:function(c){var f=this,b=f.enableBtnPut,a,d,g;c=c||f.getBtnRemove();a=b?c.ownerCt.ownerCt.ownerCt:c.ownerCt.ownerCt;d=a.ownerCt;g=a.replicatorId;d.remove(a);d.fireEvent("removeFields");if(!/child/.test(g)){f.checkLastInGroup(d,g)}},checkLastInGroup:function(b,f){var c=this,g,d,a;g=b.query("[replicatorId="+f+"]");if(g.length){d=g.length===1;a=g[g.length-1].query("[name=fieldcontainerreplicator-btn-remove-"+c.groupName+"]")[0];if(d){a.disable()}else{a.enable()}}return d}},1,0,0,0,["plugin.fieldcontainerreplicator"],0,[FBEditor.ux,"FieldContainerReplicator"],0));(Ext.cmd.derive("FBEditor.ux.SearchField",Ext.plugin.Abstract,{pluginId:"searchField",style:"",loader:null,field:null,isEmpty:false,translateText:{searching:"Идет поиск...",notFound:"Ничего не найдено"},constructor:function(a){var b=this;b.style=b.style||a.style;Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(b){var a=this;a.field=b;b.on({scope:a,afterrender:a.afterRenderField,blur:a.blurField})},hideLoader:function(){var b=this,a=b.loader;b.isEmpty=false;a.hide();a.replaceCls("fa-check","fa-spinner fa-pulse");a.dom.setAttribute("title",b.translateText.searching)},showLoader:function(){var b=this,a=b.loader;a.show()},emptyLoader:function(){var b=this,a=b.loader;b.isEmpty=true;a.replaceCls("fa-spinner fa-pulse","fa-check");a.dom.setAttribute("title",b.translateText.notFound)},blurField:function(){var a=this;if(a.isEmpty){a.hideLoader()}},afterRenderField:function(){var b=this,c=b.field,a;a=Ext.dom.Element.create({tag:"i","class":"plugin-searchField-loader fa fa-spinner fa-pulse fa-lg",style:b.style});a.insertAfter(c.inputEl);b.loader=a;b.hideLoader()}},1,0,0,0,["plugin.searchField"],0,[FBEditor.ux,"SearchField"],0));(Ext.cmd.derive("FBEditor.view.button.AbstractFileButton",Ext.form.field.FileButton,{afterTpl:'<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" type="file" size="1" name="{inputName}" role="{role}" <tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl> ',accept:"",initComponent:function(){var a=this;if(a.accept){a.afterTpl+='accept="'+a.accept+'" '}a.afterTpl+=">";Ext.form.field.FileButton.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this,b;Ext.form.field.FileButton.prototype.afterRender.apply(this,arguments);b=a.fileInputEl.dom;a.fileInputEl.on({change:function(c){Ext.defer(function(){b.value=null},100)}})}},0,0,["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},0,0,[FBEditor.view.button,"AbstractFileButton"],0));(Ext.cmd.derive("FBEditor.view.button.AbstractOperationResource",Ext.button.Button,{width:"100%",cmdClass:"",nameResource:null,handler:function(){var a=this,c=a.cmdClass,b;b=Ext.create(c,{nameResource:a.nameResource});if(b&&b.execute()){FBEditor.HistoryCommand.add(b)}},setResource:function(a){this.nameResource=a}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.button,"AbstractOperationResource"],0));(Ext.cmd.derive("FBEditor.view.button.CreateFolderResource",Ext.button.Button,{id:"button-createfolder-resource",text:"Создать папку",handler:function(){var a;a=Ext.create("FBEditor.command.CreateFolderResource");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,["button-createfolder-resource"],["component","box","button","button-createfolder-resource"],{component:true,box:true,button:true,"button-createfolder-resource":true},["widget.button-createfolder-resource"],0,[FBEditor.view.button,"CreateFolderResource"],0));(Ext.cmd.derive("FBEditor.view.button.DeleteResource",FBEditor.view.button.AbstractOperationResource,{id:"button-delete-resource",text:"Удалить",cmdClass:"FBEditor.command.DeleteResource"},0,["button-delete-resource"],["component","box","button","button-delete-resource"],{component:true,box:true,button:true,"button-delete-resource":true},["widget.button-delete-resource"],0,[FBEditor.view.button,"DeleteResource"],0));(Ext.cmd.derive("FBEditor.view.button.LoadResource",FBEditor.view.button.AbstractFileButton,{id:"button-load-resource",text:"Загрузить ресурс",listeners:{change:function(b,a){var c;c=Ext.create("FBEditor.command.LoadResource",{evt:a});if(c.execute()){FBEditor.HistoryCommand.add(c)}}},initComponent:function(){var b=this,a=FBEditor.resource.Manager.types;b.accept=a.join(",");FBEditor.view.button.AbstractFileButton.prototype.initComponent.apply(this,arguments)}},0,["button-load-resource"],["component","box","button","filebutton","button-load-resource"],{component:true,box:true,button:true,filebutton:true,"button-load-resource":true},["widget.button-load-resource"],0,[FBEditor.view.button,"LoadResource"],0));(Ext.cmd.derive("FBEditor.view.button.MoveResource",FBEditor.view.button.AbstractOperationResource,{id:"button-move-resource",text:"Переместить",cmdClass:"FBEditor.command.MoveResource"},0,["button-move-resource"],["component","box","button","button-move-resource"],{component:true,box:true,button:true,"button-move-resource":true},["widget.button-move-resource"],0,[FBEditor.view.button,"MoveResource"],0));(Ext.cmd.derive("FBEditor.view.button.SaveResource",FBEditor.view.button.AbstractOperationResource,{id:"button-save-resource",text:"Сохранить как...",cmdClass:"FBEditor.command.SaveResource"},0,["button-save-resource"],["component","box","button","button-save-resource"],{component:true,box:true,button:true,"button-save-resource":true},["widget.button-save-resource"],0,[FBEditor.view.button,"SaveResource"],0));(Ext.cmd.derive("FBEditor.view.button.SelectCover",Ext.button.Button,{id:"button-select-cover",text:"Выбрать",handler:function(){var b,a={},c=FBEditor.getBridgeWindow();a.win=c.FBEditor.resource.ExplorerManager.getWindow();b=c.Ext.create("FBEditor.command.SelectCover",a);if(b.execute()){c.FBEditor.HistoryCommand.add(b)}}},0,["button-select-cover"],["component","box","button","button-select-cover"],{component:true,box:true,button:true,"button-select-cover":true},["widget.button-select-cover"],0,[FBEditor.view.button,"SelectCover"],0));(Ext.cmd.derive("FBEditor.view.button.desc.Load",Ext.button.Button,{id:"button-desc-load",text:"Загрузить",handler:function(){var b,a={},c=FBEditor.getBridgeWindow();b=c.Ext.create("FBEditor.command.LoadDesc",a);if(b.execute()){c.FBEditor.HistoryCommand.add(b)}}},0,["button-desc-load"],["component","box","button","button-desc-load"],{component:true,box:true,button:true,"button-desc-load":true},["widget.button-desc-load"],0,[FBEditor.view.button.desc,"Load"],0));(Ext.cmd.derive("FBEditor.view.button.desc.Save",Ext.button.Button,{id:"button-desc-save",text:"Сохранить",handler:function(){var b,a={},c=FBEditor.getBridgeWindow();b=c.Ext.create("FBEditor.command.SaveDesc",a);if(b.execute()){c.FBEditor.HistoryCommand.add(b)}}},0,["button-desc-save"],["component","box","button","button-desc-save"],{component:true,box:true,button:true,"button-desc-save":true},["widget.button-desc-save"],0,[FBEditor.view.button.desc,"Save"],0));(Ext.cmd.derive("FBEditor.view.button.editor.ConvertElement",Ext.button.Button,{id:"button-editor-convert-element",text:"Превратить в текст",handler:function(){var b=this,g=FBEditor.getBridgeWindow(),d={},a=b.element,f,c;d.el=a;c=g.Ext.create("FBEditor.editor.command.ConvertToTextCommand",d);if(c.execute()){f=a.getHistory();f.add(c)}},verify:function(){var g=this,f={},b={},d=FBEditor.getEditorManager(),h=d.getSchema(),j,a,c;a=d.getRange();if(!a){return false}j=a.start.viewportId;f.node=g.element;b.node=f.node.nodes[j];f.parent=f.node.parent;b.parent=f.parent.nodes[j];f.nameEl=f.parent.getName();f.pos=f.parent.getChildPosition(f.node);f.namesElements=d.getNamesElements(f.parent);f.namesElements.splice(f.pos,1,"p");c=h.verify(f.nameEl,f.namesElements);c=!c&&!f.node.isEmpty()?h.verify(f.node.getName(),["p"]):c;return c}},0,["button-editor-convert-element"],["component","box","button","button-editor-convert-element"],{component:true,box:true,button:true,"button-editor-convert-element":true},["widget.button-editor-convert-element"],0,[FBEditor.view.button.editor,"ConvertElement"],0));(Ext.cmd.derive("FBEditor.view.button.editor.DeleteElement",Ext.button.Button,{id:"button-editor-delete-element",text:"Удалить",element:null,handler:function(){var b=this,g=FBEditor.getBridgeWindow(),d={},a=b.element,f,c;d.el=a;c=g.Ext.create("FBEditor.editor.command.DeleteCommand",d);if(c.execute()){f=a.getHistory();f.add(c)}}},0,["button-editor-delete-element"],["component","box","button","button-editor-delete-element"],{component:true,box:true,button:true,"button-editor-delete-element":true},["widget.button-editor-delete-element"],0,[FBEditor.view.button.editor,"DeleteElement"],0));(Ext.cmd.derive("FBEditor.view.button.editor.SelectImg",Ext.button.Button,{text:"Выбрать",scope:null,handler:function(a){var c,b={},d=FBEditor.getBridgeWindow();b.win=d.FBEditor.resource.ExplorerManager.getWindow();b.scope=a.scope;c=d.Ext.create("FBEditor.command.SelectImg",b);if(c.execute()){d.FBEditor.HistoryCommand.add(c)}}},0,["button-editor-select-img"],["component","box","button","button-editor-select-img"],{component:true,box:true,button:true,"button-editor-select-img":true},["widget.button-editor-select-img"],0,[FBEditor.view.button.editor,"SelectImg"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.ContainerController",Ext.app.ViewController,{onLoadData:function(d){var c=this,a=c.getView(),b=a.store;if(d){a.maskSearching(true);b.setParams(d);b.load()}}},0,0,0,0,["controller.container.desc.search"],0,[FBEditor.view.container.desc.search,"ContainerController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.OwnerContainerBehavior",Ext.Base,{xtypeContainerItems:"",clean:function(){var b=this,a;a=b.getContainerItems();a.clean()},abort:function(){var b=this,a;a=b.getContainerItems();a.abort()},getContainerItems:function(){var b=this,a;a=b.containerItems||b.down(b.xtypeContainerItems);return a}},0,0,0,0,0,0,[FBEditor.view.container.desc.search,"OwnerContainerBehavior"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.Container",Ext.Container,{controller:"container.desc.search",minWidth:300,listeners:{loadData:"onLoadData"},selectFn:Ext.emptyFn,maskEl:null,translateText:{searching:"Поиск...",notFound:"Ничего не найдено"},initComponent:function(){var b=this,a;a=b.createStore();b.store=a;a.setCallback({fn:b.load,scope:b});Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;Ext.container.Container.prototype.afterRender.apply(this,arguments);a=b.getEl().createChild({tag:"div",html:b.translateText.searching,"class":"mask-container-desc-search",children:[{tag:"i","class":"fa fa-spinner fa-pulse fa-3x"}]});a.setVisibilityMode(Ext.dom.Element.DISPLAY);b.maskEl=a;b.maskSearching(false)},createStore:function(){throw Error("Необходимо определить метод FBEditor.view.container.desc.search.Container#createStore()")},load:function(a){throw Error("Необходимо определить метод FBEditor.view.container.desc.search.Container#load()")},maskSearching:function(a){var c=this,b=c.maskEl;if(b){b.setVisible(a);c.doLayout()}},clean:function(){var a=this;Ext.suspendLayouts();a.removeAll();Ext.resumeLayouts();a.doLayout()},abort:function(){var b=this,a=b.store;b.maskSearching(false);a.abort();b.fireEvent("abort")},notFound:function(){var a=this;a.clean();a.add({border:true,layout:"fit",style:"text-align: center",html:a.translateText.notFound})}},0,["container-desc-search"],["component","box","container","container-desc-search"],{component:true,box:true,container:true,"container-desc-search":true},["widget.container-desc-search"],0,[FBEditor.view.container.desc.search,"Container"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.arts.ArtsController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.arts"],0,[FBEditor.view.container.desc.search.arts,"ArtsController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.arts.ArtsStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/machax_arts/",rootProperty:"arts"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.arts,"ArtsStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.arts.Arts",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.arts",cls:"container-search-arts",translateText:{searching:"Поиск произведений...",notFound:"Ничего не найдено",author:"Автор"},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.arts.ArtsStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(b&&b.length){Ext.Array.each(b,function(d){var f,c;if(d){c=[{xtype:"component",html:a.getHtmlItems(d),afterRender:function(){a.afterRenderItem(this)}}];f={xtype:"container",width:"100%",cls:"panel-arts-item",items:c};a.add(f)}})}else{a.notFound()}a.doLayout()},afterRenderItem:function(a){var c=this,b;b=a.getEl().query(".panel-arts-item-name")[0];b.addEventListener("click",function(){var d,f;f=this.getAttribute("art-id");d=c.store.getRecord("id",f);c.selectFn(d)})},getHtmlItems:function(d){var c=this,f=c.store.params||{},a,b;a=new Ext.XTemplate('<div class="panel-arts-item-common " style="background-color: {bgcolor}">   <tpl if="sale"><div class="panel-arts-item-sale"><span>$</span></div></tpl>   <tpl if="type"><div class="panel-arts-item-type"><span>{type_code}</span></div></tpl>   <div class="panel-arts-item-center">       <div class="panel-arts-item-name" art-id="{id}">           <a style="color: {link_color}" target="_blank"               title="{owner_login}"               href="https://hub.litres.ru/pages/edit_object/?art={id}">{name}</a>       </div>       <div class="panel-arts-item-author">{authors}</div>       <div class="panel-arts-item-date">{registered}</div>   </div></div>');d.name=d.name?d.name.replace(new RegExp("("+f.q+")","i"),"<b>$1</b>"):"";d.name=d.name.trim();d.bgcolor="white";d.bgcolor=Number(d.unchecked)?"#dadada":d.bgcolor;d.link_color="#106edc";d.type=d.type?Number(d.type):0;d.sale=Ext.Array.contains([0,1,4],d.type)?Boolean(Number(d.on_sale)):false;switch(d.type){case 1:d.type_code="&#937;";break;case 2:case 6:d.type_code="&#920;";break;case 4:d.type_code="&#936;";break;case 11:case 12:d.type_code="&#8471;";break;case 16:d.type_code="&#9449;";break}d.authors="";Ext.Array.each(d.persons,function(g){d.authors+=g.title+" / "});d.authors=d.authors.replace(/ \/ $/,"");b=a.apply(d);return b}},0,["container-desc-search-arts"],["component","box","container","container-desc-search","container-desc-search-arts"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-arts":true},["widget.container-desc-search-arts"],0,[FBEditor.view.container.desc.search.arts,"Arts"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.persons.PersonsController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.persons"],0,[FBEditor.view.container.desc.search.persons,"PersonsController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.persons.PersonsStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/machax_persons/",rootProperty:"persons"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.persons,"PersonsStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.persons.Persons",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.persons",cls:"container-search-persons",params:null,countRepeatRequest:0,translateText:{creator:"Создатель",copyrighter:"Правообладатель",no:"нет",link:"Страница редактирования",notFound:"Ничего не найдено",searching:"Поиск персон..."},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.persons.PersonsStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(a.countRepeatRequest<3){a.countRepeatRequest++;if(b&&b.length){a.countRepeatRequest=0;Ext.Array.each(b,function(d){var c,f,g;if(d){f=[{xtype:"component",html:a.getHtmlItems(d),afterRender:function(){a.afterRenderItem(this)}}];if(d.arts&&d.arts.length){g=d.arts.length>=30?"29+":d.arts.length;f.push({xtype:"fieldset",title:"Книги ("+g+")",collapsible:true,collapsed:true,html:a.getHtmlBooks(d)})}c={xtype:"container",width:"100%",cls:"container-search-persons-item",items:f};a.add(c)}})}else{a.repeatRequestSearch()}}else{a.countRepeatRequest=0;a.notFound()}a.doLayout()},repeatRequestSearch:function(){var a=this,b=Ext.clone(a.params);if(a.countRepeatRequest==1){if(b.first){b.tmp=b.first;b.first=b.last;b.last=b.tmp;delete b.tmp}else{a.countRepeatRequest++}}if(a.countRepeatRequest==2){b={last:b.last}}a.fireEvent("loadData",b)},afterRenderItem:function(a){var b=this,c;c=a.getEl().query(".container-search-persons-item-fio")[0];c.addEventListener("click",function(){var d,f;f=this.getAttribute("person-id");d=b.store.getRecord("id",f);b.selectFn(d)})},getHtmlItems:function(d){var c=this,f=c.store.params,a,b;a=new Ext.XTemplate('<div class="container-search-persons-item-common " style="background-color: {bgcolor}">   <div class="container-search-persons-item-fio" person-id="{id}">       <span style="color: {link_color}">{fio}</span>   </div>   <div class="container-search-persons-item-copyrighters" title="'+c.translateText.copyrighter+'"       style="color: {link_color}">   <tpl if="copyrighters">       <tpl for="copyrighters">           <span>{full_name}</span><br />       </tpl>   <tpl else>('+c.translateText.no+')</tpl>   </div>   <div class="container-search-persons-item-creator" title="'+c.translateText.creator+'"       style="color: {link_color}">{creator_login}</div>   <div class="container-search-persons-item-desc">{description}</div>   <div class="container-search-persons-item-time">{last_action_time}</div>   <a class="container-search-persons-item-link" target="_blank"           title="'+c.translateText.link+'"           href="https://hub.litres.ru/pages/edit_subject/?subject={id}">       <i class="fa fa-external-link"></i>   </a></div>');if(f){d.last_name=d.last_name&&f.last?d.last_name.replace(new RegExp("^("+f.last+")","i"),"<b>$1</b>"):d.last_name;d.first_name=d.first_name&&f.first?d.first_name.replace(new RegExp("^("+f.first+")","i"),"<b>$1</b>"):d.first_name;d.middle_name=d.middle_name&&f.middle?d.middle_name.replace(new RegExp("^("+f.middle+")","i"),"<b>$1</b>"):d.middle_name}d.fio="";d.fio+=d.last_name?d.last_name+" ":"";d.fio+=d.first_name?d.first_name+" ":"";d.fio+=d.middle_name?d.middle_name:"";d.fio=d.fio.trim();d.bgcolor="white";d.bgcolor=Number(d.unchecked)?"#f0f0f0":d.bgcolor;d.bgcolor=d.creator_login=="reader_release"?"#F3DBDA":d.bgcolor;d.bgcolor=d.copyrighters?"#FFFD9A":d.bgcolor;d.link_color="#2e7ed5";d.link_color=Number(d.unchecked)?"gray":d.link_color;b=a.apply(d);return b},getHtmlBooks:function(d){var c=this,a,b;a=new Ext.XTemplate('<ul class="container-search-persons-item-books"><tpl for="arts"><li class="container-search-persons-item-book" style="background-color: {bgcolor}">   <a style="color: {link_color}" target="_blank"        href="https://hub.litres.ru/pages/edit_object/?art={id}">{name}</a></li></tpl></ul>');Ext.Array.each(d.arts,function(f){f.bgcolor="white";f.bgcolor=Number(f.unchecked)?"#f0f0f0":f.bgcolor;f.bgcolor=Number(f.sell_open)?"#FFFD9A":f.bgcolor;f.link_color="#2e7ed5";f.link_color=Number(d.unchecked)?"gray":f.link_color});b=a.apply(d);return b}},0,["container-desc-search-persons"],["component","box","container","container-desc-search","container-desc-search-persons"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-persons":true},["widget.container-desc-search-persons"],0,[FBEditor.view.container.desc.search.persons,"Persons"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.sequence.SequenceController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.sequence"],0,[FBEditor.view.container.desc.search.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.sequence.SequenceStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/machax_sequences/",rootProperty:"series"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.sequence,"SequenceStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.sequence.Sequence",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.sequence",cls:"container-search-sequence",translateText:{link:"Страница редактирования",searching:"Поиск серий...",notFound:"Ничего не найдено"},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.sequence.SequenceStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(b&&b.length){Ext.Array.each(b,function(f){var c,d;if(f){d=[{xtype:"component",html:a.getHtmlItems(f),afterRender:function(){a.afterRenderItem(this)}}];c={xtype:"container",width:"100%",cls:"container-sequence-item",items:d};a.add(c)}})}else{a.notFound()}a.doLayout()},afterRenderItem:function(c){var b=this,a;a=c.getEl().query(".container-sequence-item-name")[0];a.addEventListener("click",function(){var d,f;f=this.getAttribute("sequence-id");d=b.store.getRecord("id",f);b.selectFn(d)})},getHtmlItems:function(d){var c=this,f=c.store.params||{},a,b;a=new Ext.XTemplate('<div class="container-sequence-item-common">   <div class="container-sequence-item-name" sequence-id="{id}">{name}</div>   <div class="container-sequence-item-id">{id}</div>   <a class="container-sequence-item-link" target="_blank"           title="'+c.translateText.link+'"           href="https://hub.litres.ru/pages/edit_serie/?id={id}">       <i class="fa fa-external-link"></i>   </a></div>');d.name=d.name?d.name.replace(new RegExp("("+f.q+")","i"),"<b>$1</b>"):"";d.name=d.name.trim();b=a.apply(d);return b}},0,["container-desc-search-sequence"],["component","box","container","container-desc-search","container-desc-search-sequence"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-sequence":true},["widget.container-desc-search-sequence"],0,[FBEditor.view.container.desc.search.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.tag.TagController",FBEditor.view.container.desc.search.ContainerController,{},0,0,0,0,["controller.container.desc.search.tag"],0,[FBEditor.view.container.desc.search.tag,"TagController"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.tag.TagStore",FBEditor.store.AbstractStore,{url:"https://hub.litres.ru/pages/tags_search"},0,0,0,0,0,0,[FBEditor.view.container.desc.search.tag,"TagStore"],0));(Ext.cmd.derive("FBEditor.view.container.desc.search.tag.Tag",FBEditor.view.container.desc.search.Container,{controller:"container.desc.search.tag",cls:"container-search-tag",translateText:{searching:"Поиск тегов...",notFound:"Ничего не найдено"},createStore:function(){return Ext.create("FBEditor.view.container.desc.search.tag.TagStore")},load:function(b){var a=this;a.maskSearching(false);a.fireEvent("afterLoad",b);if(b&&b.length){Ext.Array.each(b,function(f){var c,d;if(f){d=[{xtype:"component",html:a.getHtmlItems(f),afterRender:function(){a.afterRenderItem(this)}}];c={xtype:"container",width:"100%",cls:"panel-tag-item",items:d};a.add(c)}})}else{a.notFound()}a.doLayout()},afterRenderItem:function(c){var b=this,a;a=c.getEl().query(".panel-tag-item-name")[0];a.addEventListener("click",function(){var d,f;f=this.getAttribute("tag-id");d=b.store.getRecord("id",f);b.selectFn(d)})},getHtmlItems:function(d){var c=this,f=c.store.params||{},a,b;a=new Ext.XTemplate('<div class="panel-tag-item-common">   <div class="panel-tag-item-name" tag-id="{id}">{value}</div></div>');d.value=d.value?d.value.replace(new RegExp("("+f.term+")","i"),"<b>$1</b>"):"";d.value=d.value.trim();b=a.apply(d);return b}},0,["container-desc-search-tag"],["component","box","container","container-desc-search","container-desc-search-tag"],{component:true,box:true,container:true,"container-desc-search":true,"container-desc-search-tag":true},["widget.container-desc-search-tag"],0,[FBEditor.view.container.desc.search.tag,"Tag"],0));(Ext.cmd.derive("FBEditor.view.field.combosearch.ComboSearchController",Ext.app.ViewController,{updateData:function(a){throw Error("Необходимо реализовать метод view.field.combosearch.ComboSearchController#updateData()")},onSelect:function(h,b){var d=this,a=d.getView(),c,j,g,f;f=b[0].data;c=d.getPlugin();j=c.getBtnAdd();c.addFields(j);g=d.getNextComboSearch();if(g){g.focus()}d.updateData(f);a.saveToStorage(f)},onClick:function(){var b=this,a=b.getView(),c;c=a.getValue();if(c){a.expand()}else{a.expandStorage()}},getPlugin:function(){var c=this,a=c.getView(),b;b=a.up("[plugins]").getPlugin("fieldcontainerreplicator");return b},getNextComboSearch:function(){var c=this,a=c.getView(),d,b;b=a.up("[plugins]").nextSibling();d=b?b.down("combosearch"):null;return d}},0,0,0,0,["controller.combosearch"],0,[FBEditor.view.field.combosearch,"ComboSearchController"],0));(Ext.cmd.derive("FBEditor.view.field.combosearch.ComboSearch",Ext.form.field.ComboBox,{controller:"combosearch",enableKeyEvents:true,autoSelect:false,queryMode:"remote",minChars:2,hideTrigger:true,queryDelay:200,defaultListConfig:{shadow:false,maxHeight:200},plugins:[{ptype:"fieldCleaner"},{ptype:"searchField",style:"margin-left: 258px"}],keyEnterAsTab:true,listeners:{select:"onSelect",click:"onClick"},queryDelayFast:200,queryDelaySlow:1000,localStorageLimit:10,getCreateStore:function(){throw Error("Необходимо реализовать метод view.field.combosearch.ComboSearch#getCreateStore()")},initComponent:function(){var a=this;a.store=a.getCreateStore();a.localStorage=FBEditor.getLocalStorage();Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a=b.inputEl.dom;b.getEl().on({click:function(){b.fireEvent("click")},scope:b});a.addEventListener("keydown",function(g){var f=Ext.event.Event,c=g.keyCode,d;d=[f.HOME,f.END,f.LEFT,f.RIGHT];if(Ext.Array.contains(d,c)){g.stopPropagation()}});Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments)},expandStorage:function(){var b=this,c=b.getDataStorage(),a=b.getStore();if(c.length){a.setAutoSort(false);a.loadData(c);b.expand();a.setAutoSort(true)}},saveToStorage:function(b){var a=this,f=FBEditor.getLocalStorage(),c=a.getDataStorage(),d;c.splice(0,0,b);if(c.length>a.localStorageLimit){c.pop()}d=Ext.JSON.encode(c);f.setItem(a.name,d)},getDataStorage:function(){var a=this,c=FBEditor.getLocalStorage(),b;b=Ext.JSON.decode(c.getItem(a.name));b=b?b:[];return b},onPaste:function(){var a=this,b=a.getValue();if(!a.isValid()){a.collapse();return}a.queryDelay=b&&b.length>a.minChars?a.queryDelayFast:a.queryDelaySlow;Ext.form.field.ComboBox.prototype.onPaste.apply(this,arguments)},onKeyUp:function(c){var b=this,a=c.getKey(),d=b.getValue(),f;if(!b.isValid()){b.collapse();return}f=b.inputEl.dom.selectionStart;if(a!==c.SPACE||a===c.SPACE&&f!==d.length){b.queryDelay=d&&d.length>b.minChars?b.queryDelayFast:b.queryDelaySlow;Ext.form.field.ComboBox.prototype.onKeyUp.apply(this,arguments)}},doRemoteQuery:function(b){var d=this,a=function(){d.afterQuery(b)},c;c=d.getPlugin("searchField");c.showLoader();d.collapse();if(d.pageSize){d.loadPage(1,{rawQuery:b.rawQuery,callback:a})}else{d.store.load({params:d.getParams(b.query),rawQuery:b.rawQuery,callback:a})}},afterQuery:function(a){var c=this,d,b;d=c.store.getData().items.length?c.store.getData().items:null;b=c.getPlugin("searchField");if(d){b.hideLoader()}else{b.emptyLoader()}c.expand();Ext.form.field.ComboBox.prototype.afterQuery.apply(this,arguments)}},0,["combosearch"],["component","box","field","textfield","pickerfield","combobox","combo","combosearch"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,combosearch:true},["widget.combosearch"],0,[FBEditor.view.field.combosearch,"ComboSearch"],0));(Ext.cmd.derive("FBEditor.view.field.country.CountryStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Неизвестно"},{value:"RU",name:"Россия"},{value:"AU",name:"Австралия"},{value:"AT",name:"Австрия"},{value:"AZ",name:"Азербайджан"},{value:"AX",name:"Аландские острова"},{value:"AL",name:"Албания"},{value:"DZ",name:"Алжир"},{value:"VI",name:"Американские Виргинские острова"},{value:"AS",name:"Американское Самоа"},{value:"AO",name:"Ангола"},{value:"AI",name:"Ангуилла"},{value:"AD",name:"Андорра"},{value:"AQ",name:"Антарктика"},{value:"AG",name:"Антигуа и Барбуда"},{value:"AR",name:"Аргентина"},{value:"AM",name:"Армения"},{value:"AW",name:"Аруба"},{value:"AF",name:"Афганистан"},{value:"BS",name:"Багамские острова"},{value:"BD",name:"Бангладеш"},{value:"BB",name:"Барбадос"},{value:"BH",name:"Бахрейн"},{value:"BY",name:"Беларусь"},{value:"BZ",name:"Белиз"},{value:"BE",name:"Бельгия"},{value:"BJ",name:"Бенин"},{value:"BM",name:"Бермудские Острова"},{value:"BG",name:"Болгария"},{value:"BO",name:"Боливия"},{value:"BA",name:"Босния и Герцеговина"},{value:"BW",name:"Ботсвана"},{value:"BR",name:"Бразилия"},{value:"IO",name:"Британская территория в Индийском океане"},{value:"VG",name:"Британские Виргинские Острова"},{value:"BN",name:"Бруней Даруссалам"},{value:"BF",name:"Буркина Фасо"},{value:"BI",name:"Бурунди"},{value:"BT",name:"Бутан"},{value:"VU",name:"Вануату"},{value:"VA",name:"Ватикан"},{value:"GB",name:"Великобритания"},{value:"HU",name:"Венгрия"},{value:"VE",name:"Венесуэла"},{value:"UM",name:"Внешние малые острова (США)"},{value:"TL",name:"Восточный Тимор"},{value:"VN",name:"Вьетнам"},{value:"GA",name:"Габон"},{value:"HT",name:"Гаити"},{value:"GY",name:"Гайана"},{value:"GM",name:"Гамбия"},{value:"GH",name:"Гана"},{value:"GP",name:"Гваделупа"},{value:"GT",name:"Гватемала"},{value:"GN",name:"Гвинея"},{value:"GW",name:"Гвинея-Биссау"},{value:"DE",name:"Германия"},{value:"GG",name:"Гернси"},{value:"GI",name:"Гибралтар"},{value:"HN",name:"Гондурас"},{value:"HK",name:"Гонконг, Особый Административный Район Китая"},{value:"GD",name:"Гренада"},{value:"GL",name:"Гренландия"},{value:"GR",name:"Греция"},{value:"GE",name:"Грузия"},{value:"GU",name:"Гуам"},{value:"DK",name:"Дания"},{value:"CD",name:"Демократическая Республика Конго"},{value:"JE",name:"Джерси"},{value:"DJ",name:"Джибути"},{value:"DO",name:"Доминиканская Республика"},{value:"EG",name:"Египет"},{value:"ZM",name:"Замбия"},{value:"EH",name:"Западная Сахара"},{value:"ZW",name:"Зимбабве"},{value:"IL",name:"Израиль"},{value:"IN",name:"Индия"},{value:"ID",name:"Индонезия"},{value:"JO",name:"Иордания"},{value:"IQ",name:"Ирак"},{value:"IR",name:"Иран"},{value:"IE",name:"Ирландия"},{value:"IS",name:"Исландия"},{value:"ES",name:"Испания"},{value:"IT",name:"Италия"},{value:"YE",name:"Йемен"},{value:"KZ",name:"Казахстан"},{value:"KY",name:"Каймановы острова"},{value:"KH",name:"Камбоджа"},{value:"CM",name:"Камерун"},{value:"CA",name:"Канада"},{value:"QA",name:"Катар"},{value:"KE",name:"Кения"},{value:"CY",name:"Кипр"},{value:"KI",name:"Кирибати"},{value:"CN",name:"Китай"},{value:"CC",name:"Кокосовые острова"},{value:"CO",name:"Колумбия"},{value:"KM",name:"Коморские Острова"},{value:"CG",name:"Конго"},{value:"KP",name:"Корейская Народно-Демократическая Республика"},{value:"CR",name:"Коста-Рика"},{value:"CI",name:"Кот д\u2019Ивуар"},{value:"CU",name:"Куба"},{value:"KW",name:"Кувейт"},{value:"KG",name:"Кыргызстан"},{value:"LA",name:"Лаос"},{value:"LV",name:"Латвия"},{value:"LS",name:"Лесото"},{value:"LR",name:"Либерия"},{value:"LB",name:"Ливан"},{value:"LY",name:"Ливия"},{value:"LT",name:"Литва"},{value:"LI",name:"Лихтенштейн"},{value:"LU",name:"Люксембург"},{value:"MU",name:"Маврикий"},{value:"MR",name:"Мавритания"},{value:"MG",name:"Мадагаскар"},{value:"YT",name:"Майотта"},{value:"MO",name:"Макао (особый административный район КНР)"},{value:"MK",name:"Македония"},{value:"MW",name:"Малави"},{value:"MY",name:"Малайзия"},{value:"ML",name:"Мали"},{value:"MV",name:"Мальдивы"},{value:"MT",name:"Мальта"},{value:"MA",name:"Марокко"},{value:"MQ",name:"Мартиник"},{value:"MH",name:"Маршалловы Острова"},{value:"MX",name:"Мексика"},{value:"MZ",name:"Мозамбик"},{value:"MD",name:"Молдова"},{value:"MC",name:"Монако"},{value:"MN",name:"Монголия"},{value:"MS",name:"Монсеррат"},{value:"MM",name:"Мьянма"},{value:"NA",name:"Намибия"},{value:"NR",name:"Науру"},{value:"ZZ",name:"Неизвестный или недействительный регион"},{value:"NP",name:"Непал"},{value:"NE",name:"Нигер"},{value:"NG",name:"Нигерия"},{value:"AN",name:"Нидерландские Антильские острова"},{value:"NL",name:"Нидерланды"},{value:"NI",name:"Никарагуа"},{value:"NU",name:"Ниуе"},{value:"NZ",name:"Новая Зеландия"},{value:"NC",name:"Новая Каледония"},{value:"NO",name:"Норвегия"},{value:"AE",name:"Объединенные Арабские Эмираты"},{value:"OM",name:"Оман"},{value:"BV",name:"Остров Буве"},{value:"DM",name:"Остров Доминика"},{value:"IM",name:"Остров Мэн"},{value:"NF",name:"Остров Норфолк"},{value:"CX",name:"Остров Рождества"},{value:"BL",name:"Остров Святого Бартоломея"},{value:"MF",name:"Остров Святого Мартина"},{value:"SH",name:"Остров Святой Елены"},{value:"CV",name:"Острова Зеленого Мыса"},{value:"CK",name:"Острова Кука"},{value:"TC",name:"Острова Тёркс и Кайкос"},{value:"HM",name:"Острова Херд и Макдональд"},{value:"PK",name:"Пакистан"},{value:"PW",name:"Палау"},{value:"PS",name:"Палестинская автономия"},{value:"PA",name:"Панама"},{value:"PG",name:"Папуа-Новая Гвинея"},{value:"PY",name:"Парагвай"},{value:"PE",name:"Перу"},{value:"PN",name:"Питкерн"},{value:"PL",name:"Польша"},{value:"PT",name:"Португалия"},{value:"PR",name:"Пуэрто-Рико"},{value:"KR",name:"Республика Корея"},{value:"RE",name:"Реюньон"},{value:"RW",name:"Руанда"},{value:"RO",name:"Румыния"},{value:"US",name:"США"},{value:"SV",name:"Сальвадор"},{value:"WS",name:"Самоа"},{value:"SM",name:"Сан-Марино"},{value:"ST",name:"Сан-Томе и Принсипи"},{value:"SA",name:"Саудовская Аравия"},{value:"SZ",name:"Свазиленд"},{value:"SJ",name:"Свальбард и Ян-Майен"},{value:"MP",name:"Северные Марианские Острова"},{value:"SC",name:"Сейшельские Острова"},{value:"PM",name:"Сен-Пьер и Микелон"},{value:"SN",name:"Сенегал"},{value:"VC",name:"Сент-Винсент и Гренадины"},{value:"KN",name:"Сент-Киттс и Невис"},{value:"LC",name:"Сент-Люсия"},{value:"RS",name:"Сербия"},{value:"CS",name:"Сербия и Черногория"},{value:"SG",name:"Сингапур"},{value:"SY",name:"Сирийская Арабская Республика"},{value:"SK",name:"Словакия"},{value:"SI",name:"Словения"},{value:"SB",name:"Соломоновы Острова"},{value:"SO",name:"Сомали"},{value:"SD",name:"Судан"},{value:"SR",name:"Суринам"},{value:"SL",name:"Сьерра-Леоне"},{value:"TJ",name:"Таджикистан"},{value:"TH",name:"Таиланд"},{value:"TW",name:"Тайвань"},{value:"TZ",name:"Танзания"},{value:"TG",name:"Того"},{value:"TK",name:"Токелау"},{value:"TO",name:"Тонга"},{value:"TT",name:"Тринидад и Тобаго"},{value:"TV",name:"Тувалу"},{value:"TN",name:"Тунис"},{value:"TM",name:"Туркменистан"},{value:"TR",name:"Турция"},{value:"UG",name:"Уганда"},{value:"UZ",name:"Узбекистан"},{value:"UA",name:"Украина"},{value:"WF",name:"Уоллис и Футуна"},{value:"UY",name:"Уругвай"},{value:"FO",name:"Фарерские острова"},{value:"FM",name:"Федеративные Штаты Микронезии"},{value:"FJ",name:"Фиджи"},{value:"PH",name:"Филиппины"},{value:"FI",name:"Финляндия"},{value:"FK",name:"Фолклендские острова"},{value:"FR",name:"Франция"},{value:"GF",name:"Французская Гвиана"},{value:"PF",name:"Французская Полинезия"},{value:"TF",name:"Французские Южные Территории"},{value:"HR",name:"Хорватия"},{value:"CF",name:"Центрально-Африканская Республика"},{value:"TD",name:"Чад"},{value:"ME",name:"Черногория"},{value:"CZ",name:"Чешская республика"},{value:"CL",name:"Чили"},{value:"CH",name:"Швейцария"},{value:"SE",name:"Швеция"},{value:"LK",name:"Шри-Ланка"},{value:"EC",name:"Эквадор"},{value:"GQ",name:"Экваториальная Гвинея"},{value:"ER",name:"Эритрея"},{value:"EE",name:"Эстония"},{value:"ET",name:"Эфиопия"},{value:"ZA",name:"Южная Африка"},{value:"GS",name:"Южная Джорджия и Южные Сандвичевы Острова"},{value:"JM",name:"Ямайка"},{value:"JP",name:"Япония"}]},0,0,0,0,0,0,[FBEditor.view.field.country,"CountryStore"],0));(Ext.cmd.derive("FBEditor.view.field.country.CountryController",Ext.app.ViewController,{onChange:function(c,d){var b=c,f=d,a;a=b.findRecordByValue(f);if(!a||!f){b.reset()}}},0,0,0,0,["controller.countryfield"],0,[FBEditor.view.field.country,"CountryController"],0));(Ext.cmd.derive("FBEditor.view.field.country.Country",Ext.form.field.ComboBox,{controller:"countryfield",queryMode:"local",displayField:"name",valueField:"value",editable:false,listConfig:{maxHeight:"auto"},listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.field.country.CountryStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["countryfield"],["component","box","field","textfield","pickerfield","combobox","combo","countryfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,countryfield:true},["widget.countryfield"],0,[FBEditor.view.field.country,"Country"],0));(Ext.cmd.derive("FBEditor.view.field.datetime.Datetime",Ext.form.FieldContainer,{translateText:{date:"Дата",time:"Время"},initComponent:function(){var a=this;a.items=[{xtype:"datefield",fieldLabel:a.translateText.date,emptyText:a.translateText.date,hideLabel:true},{xtype:"timefield",format:"H:i:s",fieldLabel:a.translateText.time,emptyText:a.translateText.time,hideLabel:true}];Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments)}},0,["datetimefield"],["component","box","container","fieldcontainer","datetimefield"],{component:true,box:true,container:true,fieldcontainer:true,datetimefield:true},["widget.datetimefield"],0,[FBEditor.view.field.datetime,"Datetime"],0));(Ext.cmd.derive("FBEditor.view.field.lang.LangController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.expand()}},0,0,0,0,["controller.langfield"],0,[FBEditor.view.field.lang,"LangController"],0));(Ext.cmd.derive("FBEditor.view.field.lang.LangStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Это не перевод"},{value:"line",name:""},{value:"ru",name:"Русский"},{value:"uk",name:"Украинский"},{value:"en",name:"Английский"},{value:"de",name:"Немецкий"},{value:"fr",name:"Французский"},{value:"line",name:""},{value:"sq",name:"Албанский"},{value:"ar",name:"Арабский"},{value:"hy",name:"Армянский"},{value:"az",name:"Азербайджанский"},{value:"be",name:"Белорусский"},{value:"bg",name:"Болгарский"},{value:"bs",name:"Боснийский"},{value:"vi",name:"Вьетнамский"},{value:"hu",name:"Венгерский"},{value:"nl",name:"Голландский"},{value:"el",name:"Греческий"},{value:"ka",name:"Грузинский"},{value:"da",name:"Датский"},{value:"he",name:"Иврит"},{value:"id",name:"Индонезийский"},{value:"it",name:"Итальянский"},{value:"is",name:"Исландский"},{value:"es",name:"Испанский"},{value:"ca",name:"Каталанский"},{value:"zh",name:"Китайский"},{value:"lv",name:"Латышский"},{value:"lv",name:"Латышский"},{value:"lt",name:"Литовский"},{value:"ms",name:"Малайский"},{value:"mt",name:"Мальтийский"},{value:"mk",name:"Македонский"},{value:"no",name:"Норвежский"},{value:"pl",name:"Польский"},{value:"pt",name:"Португальский"},{value:"ro",name:"Румынский"},{value:"sr",name:"Сербский"},{value:"sk",name:"Словацкий"},{value:"sl",name:"Словенский"},{value:"th",name:"Тайский"},{value:"tr",name:"Турецкий"},{value:"fi",name:"Финский"},{value:"hr",name:"Хорватский"},{value:"cs",name:"Чешский"},{value:"sv",name:"Шведский"},{value:"et",name:"Эстонский"}]},0,0,0,0,0,0,[FBEditor.view.field.lang,"LangStore"],0));(Ext.cmd.derive("FBEditor.view.field.lang.Lang",Ext.form.field.ComboBox,{controller:"langfield",queryMode:"local",displayField:"name",valueField:"value",editable:true,typeAhead:true,value:"",hideTrigger:true,componentCls:"field-langfield",listConfig:{maxHeight:210,tpl:'<tpl for="."><tpl if="value!=\'line\'"><div class="x-boundlist-item">{name}</div><tpl else><div class="x-boundlist-item x-boundlist-item-line"></div></tpl></tpl>'},triggers:{ru:{cls:"langfield-trigger",extraCls:"langfield-trigger-ru",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},en:{cls:"langfield-trigger",extraCls:"langfield-trigger-en",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},fr:{cls:"langfield-trigger",extraCls:"langfield-trigger-fr",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}},de:{cls:"langfield-trigger",extraCls:"langfield-trigger-de",hidden:false,scope:"this",handler:function(a,b){this.onTrigger.apply(this,arguments)}}},listeners:{click:{element:"el",fn:"onClick"}},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.field.lang.LangStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},onTrigger:function(b,c,a){var d=this,f=c.id;d.setValue(f);a.stopPropagation()}},0,["langfield"],["component","box","field","textfield","pickerfield","combobox","combo","langfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,langfield:true},["widget.langfield"],0,[FBEditor.view.field.lang,"Lang"],0));(Ext.cmd.derive("FBEditor.view.field.textfieldclear.TextFieldClear",Ext.form.field.Text,{triggers:{foo:{cls:"textfieldclear-trigger",handler:function(){this.setValue("")}}}},0,["textfieldclear"],["component","box","field","textfield","textfieldclear"],{component:true,box:true,field:true,textfield:true,textfieldclear:true},["widget.textfieldclear"],0,[FBEditor.view.field.textfieldclear,"TextFieldClear"],0));(Ext.cmd.derive("FBEditor.view.form.desc.AbstractFieldController",Ext.app.ViewController,{onLoadData:function(f){var d=this,b=d.getView(),a,c;c=d.getPluginContainerReplicator(b);a=c.getCmp();Ext.Object.each(f,function(g,h){Ext.Object.each(h,function(j,k){var l=a.query("[name="+j+"]")[0];if(l){if(Ext.isObject(k)){l.fireEvent("loadData",k)}else{if(l.setValue){l.setValue(k)}}}});if(f[parseInt(g)+1]){c.addFields();a=c.alwaysInsertFirst?a.previousSibling():a.nextSibling();c=a.getPlugin("fieldcontainerreplicator")}})},onAccessHub:function(){var f=this,b=f.getView(),c,a,d;c=b.down("[cls=form-desc-customBtn]");d=f.getPluginContainerReplicator(b);a=d.getCmp();if(!a.getValues()&&c){c.switchContainers(true)}},onEditable:function(c){var f=this,b=f.getView(),a,d;d=b.down("form-desc-title-alt").getPlugin("fieldcontainerreplicator");if(d){if(c){d.getBtnAdd().enable()}else{d.getBtnAdd().disable()}}a=b.query("[name]");Ext.Array.each(a,function(g){if(g.setEditable){g.setEditable(c)}})},onResetFields:function(){var a=this;a.resetContainer()},resetContainer:function(){var d=this,b=d.getView(),f,c,a,g;f=d.getContainersReplicator(b);Ext.each(f,function(j,h){if(h){b.remove(j)}else{j.fireEvent("resetContainer");c=d.getContainersReplicator(j);Ext.each(c,function(k){j.remove(k)});j.getPlugin("fieldcontainerreplicator").getBtnRemove().disable()}});a=document.querySelectorAll("#"+b.getId()+" .plugin-fieldreplicator");Ext.each(a,function(j,h){if(h){g=b.queryById(j.id);b.remove(g)}})},getContainersReplicator:function(a){return a.query("[name=plugin-fieldcontainerreplicator]")},getPluginContainerReplicator:function(a){var c=this,b;b=c.getContainersReplicator(a).length?c.getContainersReplicator(a)[0].getPlugin("fieldcontainerreplicator"):null;return b}},0,0,0,0,["controller.form.desc.abstractField"],0,[FBEditor.view.form.desc,"AbstractFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.AbstractFieldContainer",Ext.form.FieldContainer,{controller:"form.desc.abstractField",listeners:{accessHub:"onAccessHub",resetFields:"onResetFields",loadData:"onLoadData",editable:"onEditable"},fieldEventCache:[],afterRender:function(){var c=this,b,a;a=c.query("field");Ext.Array.each(a,function(d){if(!c.fieldEventCache[d.id]){c.initEventBlur(d)}});b=c.getPlugin("fieldcontainerreplicator");if(b){c.name="plugin-fieldcontainerreplicator"}Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments)},onAccessHub:function(){},clearInvalid:function(){var b=this,a=b.query("field");Ext.Array.each(a,function(c){if(c.clearInvalid){c.clearInvalid()}})},isValid:function(){var g=this,j=true,b=false,d=FBEditor.desc.Manager,a,f,h,c;c=g.query("field");Ext.Array.each(c,function(k){h=k.getValue();if(!h){f=k.up("[cls=block-container]");b=f?f.isEmptyBlock():false;if(b){f.clearInvalid()}}if(!b&&k.isValid){if(!k.isValid()){d.fieldsError.push(k);a=k.up("desc-fieldset");a.expand();a=k.up("desc-fieldsetinner");if(a){a.expand()}j=false}}});return j},getValues:function(f){var b=this,a=b.items,c=f;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c},removeEmptyValues:function(a){var b=null;Ext.Object.each(a,function(c,d){if(!Ext.isEmpty(d)){b=b||{};b[c]=d}});return b},getDataFields:function(a){var b=this,c=null;Ext.Object.each(a,function(d,f){var g=f.getValue();if(g){c=c||[];c.push(g)}});return c},updateData:function(b){var a=this;Ext.Object.each(b,function(c,d){var f=a.down("[name="+c+"]");if(f){if(Ext.isObject(d)){f.updateData(d)}else{f.setValue(d)}}})},isEmptyBlock:function(){var b=this,c=true,a;a=b.query("field");Ext.Array.each(a,function(d){if(d.getValue()){c=false;return false}});return c},initEventBlur:function(b){var a=this;a.fieldEventCache[b.id]=true;b.on("blur",function(){var c=this,f=c.getValue(),d;if(!f){d=c.up("[cls=block-container]");if(d&&d.isEmptyBlock()){d.clearInvalid()}}})}},0,["desc-fieldcontainer"],["component","box","container","fieldcontainer","desc-fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true},["widget.desc-fieldcontainer"],0,[FBEditor.view.form.desc,"AbstractFieldContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.DescController",Ext.app.ViewController,{onStartScroll:function(){var a=this,b=a._scrollWins||[];if(!a._scrollWins){b=Ext.ComponentQuery.query("form-desc-searchField-window");b.push(Ext.getCmp("form-desc-subjectTree")||Ext.widget("form-desc-subjectTree"));b.push(Ext.getCmp("form-desc-tag")||Ext.widget("form-desc-tag"));a._scrollWins=b}Ext.Array.each(b,function(c){if(c){c.close()}})},onAccessHub:function(){var a=FBEditor.getBridgeProps(),b=[Ext.getCmp("form-desc-sequence"),Ext.getCmp("form-desc-relations-subject"),Ext.getCmp("form-desc-relations-object"),Ext.getCmp("panel-toolstab-file-button-savedesc"),a.Ext.getCmp("panel-props-desc")];Ext.Array.each(b,function(c){if(c){c.fireEvent("accessHub")}})},onResize:function(f,c,a,b,h){var d=this,g=d._resizeWins||[];if(!d._resizeWins){g=Ext.ComponentQuery.query("form-desc-relations-subject-searchName-resultContainer");g.push(Ext.getCmp("form-desc-subjectTree")||Ext.widget("form-desc-subjectTree"));g.push(Ext.getCmp("form-desc-tag")||Ext.widget("form-desc-tag"));d._resizeWins=g}if(c!==b){Ext.Array.each(g,function(j){if(j){j.fireEvent("alignTo")}})}},onActivate:function(b){var c=b,a=c.items;if(!c._firstActivate){c._firstActivate=true;a.each(function(f){var d=f.require,g=f.autoExpand,h;h=d&&g?false:true;if(h){f.collapse()}})}},onLoadData:function(d){var c=this,a=c.getView(),b=a.getForm();a.fireEvent("reset");b.setValues(d);Ext.getCmp("form-desc-sequence").fireEvent("loadData",d.sequence);Ext.getCmp("form-desc-title").down("form-desc-title-alt").fireEvent("loadData",d["title-alt"]);Ext.getCmp("form-desc-periodical").down("form-desc-title-alt").fireEvent("loadData",d["periodical-title-alt"]);if(d.relations&&d.relations["relations-subject"]){Ext.getCmp("form-desc-relations-subject").fireEvent("loadData",d.relations["relations-subject"])}if(d.relations&&d.relations["relations-object"]){Ext.getCmp("form-desc-relations-object").fireEvent("loadData",d.relations["relations-object"])}Ext.getCmp("form-desc-classification-udc").fireEvent("loadData",d["classification-udc"]);Ext.getCmp("form-desc-classification-bbk").fireEvent("loadData",d["classification-bbk"]);Ext.getCmp("form-desc-subject").fireEvent("loadData",d["classification-subject"]);Ext.getCmp("form-desc-customInfo").fireEvent("loadData",d["custom-info"]);Ext.getCmp("form-desc-publishInfo").fireEvent("loadData",d["paper-publish-info"]);Ext.getCmp("form-desc-documentInfo-isbn").fireEvent("loadData",d["document-info-isbn"]);c.expandFieldset(d)},onReset:function(){var c=this,a=c.getView(),b=a.getForm(),d;d=a.query("[name=form-desc-plugin-fieldcontainerreplicator],form-desc-title, fieldset, form-desc-relations-subject-link");Ext.each(d,function(f){f.fireEvent("resetFields")});b.reset()},expandFieldset:function(d){var c=this,b=c.getView(),a;a=b.query("fieldset");Ext.each(a,function(f){f.fireEvent("checkExpand")})}},0,0,0,0,["controller.form.desc"],0,[FBEditor.view.form.desc,"DescController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.date.DateController",Ext.app.ViewController,{onBlur:function(){var f=this,a=f.getView(),d=a.getValue(),b=a.getRawValue(),c=new Date();a.fireEvent("beforeblur");if(/^[0-9]{4}$/.test(b)){a.setValue(b+"-01-01")}if(/^[0-9]{2}\.[0-9]{2}\.[0-9]{2}$/.test(b)){b=b.split(".");b[2]=c.getFullYear().toString().substr(0,2)+b[2];b[1]--;d=new Date(b[2],b[1],b[0]);if(c<d){b[2]=d.getFullYear()-100}d=new Date(b[2],b[1],b[0]);a.setValue(d)}}},0,0,0,0,["controller.form.desc.date"],0,[FBEditor.view.form.desc.date,"DateController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.date.Date",Ext.form.field.Date,{controller:"form.desc.date",altFormats:"Y-m-d|d.m.Y",format:"Y-m-d",listeners:{blur:"onBlur"}},0,["desc-date"],["component","box","field","textfield","pickerfield","datefield","desc-date"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true},["widget.desc-date"],0,[FBEditor.view.form.desc.date,"Date"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.Required",Ext.Base,{checkChangeCls:function(){var b=this,a=b._cls,c=b.isValid();b.removeCls(a);if(!c){b.addCls(a)}}},0,0,0,0,0,0,[FBEditor.view.form.desc.field,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.combobox.required.Required",Ext.form.field.ComboBox,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-combobox-required"],["component","box","field","textfield","pickerfield","combobox","combo","desc-field-combobox-required"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"desc-field-combobox-required":true},["widget.desc-field-combobox-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.combobox.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.link.Link",Ext.form.Display,{fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],linkTpl:'<a href="{href}" target="_blank" title="{title}">{value}</a>',_disableLink:false,disableLink:function(a){var b=this,c=b.getRawValue();b._disableLink=arguments.length?a:true;b.setValue(c)},getDisplayValue:function(){var a=this,b=a.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a._disableLink?b:new Ext.XTemplate(a.linkTpl).apply({href:b,value:b,title:""})}return c}},0,["form-desc-field-link"],["component","box","field","displayfield","form-desc-field-link"],{component:true,box:true,field:true,displayfield:true,"form-desc-field-link":true},["widget.form-desc-field-link"],0,[FBEditor.view.form.desc.field.link,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.link.uuid.Link",FBEditor.view.form.desc.field.link.Link,{cls:"form-desc-field-link-uuid",linkTpl:'<a href="https://hub.litres.ru/pages/any_uuid_redir/?uuid={href}" target="_blank" title="{title}">{value}</a>',translateText:{pageEditor:"Страница редактирования"},getDisplayValue:function(){var a=this,b=a.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a._disableLink?b:new Ext.XTemplate(a.linkTpl).apply({href:b,value:b,title:a.translateText.pageEditor})}return c}},0,["form-desc-field-link-uuid"],["component","box","field","displayfield","form-desc-field-link","form-desc-field-link-uuid"],{component:true,box:true,field:true,displayfield:true,"form-desc-field-link":true,"form-desc-field-link-uuid":true},["widget.form-desc-field-link-uuid"],0,[FBEditor.view.form.desc.field.link.uuid,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.number.required.Required",Ext.form.field.Number,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Number.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-number-required"],["component","box","field","textfield","spinnerfield","numberfield","desc-field-number-required"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true,"desc-field-number-required":true},["widget.desc-field-number-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.number.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.text.required.Required",Ext.form.field.Text,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-text-required"],["component","box","field","textfield","desc-field-text-required"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true},["widget.desc-field-text-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.text.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.textarea.required.Required",Ext.form.field.TextArea,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.TextArea.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-textarea-required"],["component","box","field","textfield","textareafield","textarea","desc-field-textarea-required"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true,"desc-field-textarea-required":true},["widget.desc-field-textarea-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.textarea.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.field.time.required.Required",Ext.form.field.Time,{allowBlank:false,_cls:"field-required",listeners:{change:function(){this.checkChangeCls()}},afterRender:function(){var a=this;Ext.form.field.Time.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["desc-field-time-required"],["component","box","field","textfield","pickerfield","combobox","combo","timefield","desc-field-time-required"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,timefield:true,"desc-field-time-required":true},["widget.desc-field-time-required"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.field.time.required,"Required"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetController",Ext.app.ViewController,{onCheckExpand:function(){var c=this,a=c.getView(),f,b,d;b=a.require;d=a.autoExpand;f=a.down('component[allowBlank/="true|false"]');if(!b&&d){if(f&&f.getValue()){a.expand()}}},onResetFields:function(){var a=this;a.resetFieldset()},resetFieldset:function(){var c=this,a=c.getView(),b,d;b=a.require;d=a.autoExpand;if(b&&d){a.expand()}else{a.collapse()}}},0,0,0,0,["controller.desc.fieldset"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldset",Ext.form.FieldSet,{controller:"desc.fieldset",collapsible:true,anchor:"100%",listeners:{resetFields:"onResetFields",checkExpand:"onCheckExpand",beforecollapse:function(a){Ext.suspendLayouts()},collapse:function(a){Ext.resumeLayouts()},beforeexpand:function(a){Ext.suspendLayouts()},expand:function(a){Ext.resumeLayouts()}},xtypeChild:"",require:false,autoExpand:true,initComponent:function(){var b=this,a=b.require,c=b.xtypeChild;b.title=b.title+'<a name="'+b.xtype+'"></a>';b.cls=b.xtype;if(!b.items){b.items=[{xtype:"form-desc-"+c,layout:"anchor",defaults:{anchor:"100%"}}]}Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,a=b.items,c=true;a.each(function(d){if(d.isValid&&!d.isValid()){c=false}});return c},getValues:function(f){var b=this,a=b.items,c=f;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c}},0,["desc-fieldset"],["component","box","container","fieldset","desc-fieldset"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true},["widget.desc-fieldset"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldset"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.annotation.AnnotationController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,a=c.getView(),b;b=a.items.first();if(b.getValue()){a.expand()}}},0,0,0,0,["controller.desc.fieldset.annotation"],0,[FBEditor.view.form.desc.fieldset.annotation,"AnnotationController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.EditorController",Ext.app.ViewController,{onLoadData:function(a){var d=this,b=d.getView(),c;c=b.getBodyEditor();c.fireEvent("loadData",a)}},0,0,0,0,["controller.form.desc.editor"],0,[FBEditor.view.form.desc.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.Manager",FBEditor.editor.Manager,{getPanelProps:function(){var b=FBEditor.getBridgeProps(),a;a=b.Ext.getCmp("panel-props-desc-editor-container");return a}},0,0,0,0,0,0,[FBEditor.view.form.desc.editor,"Manager"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.command.Clean",FBEditor.editor.command.AbstractCommand,{minLength:50,execute:function(){var l=this,g=l.getData(),k=false,c=FBEditor.desc.Manager,b=c.getRegexpUtf(),f={},a={},m,d,j;d=g.manager;j=d.getHistory();d.setSuspendEvent(true);try{m=d.getContent();f.p=m.first();while(f.p){if(f.p.isP){l.each(f.p,function(n){var q,p,o;if(n){o=n.getNodeHelper().getNode();q=n.getText();if(n.isText){p=q.replace(b,"");if(p!==q){n.setText(p);o.nodeValue=p}}}});a.p=f.p.getNodeHelper().getNode();f.text=f.p.getText();a.next=a.p.nextSibling;f.next=a.next?a.next.getElement():null;if(f.next&&/[.!?]+$/ig.test(f.text)){a.deepFirst=d.getDeepFirst(a.next);f.deepFirst=a.deepFirst.getElement();f.firstText=f.deepFirst.getText();f.firstText=f.firstText.replace(/^( )*([a-zа-я])(.+?)/ig,function(q,o,p,n){o=o?" ":"";q=o+Ext.String.capitalize(p)+n;return q});f.deepFirst.setText(f.firstText);a.deepFirst.nodeValue=f.firstText}if((/-$/.test(f.text)||f.text.length<l.minLength||/[^.,!?]+$/ig.test(f.text))&&f.next&&!f.next.isEmpty()){a.deepLast=d.getDeepLast(a.p);f.deepLast=a.deepLast.getElement();f.lastText=f.deepLast.getText();a.deepFirst=d.getDeepFirst(a.next);f.deepFirst=a.deepFirst.getElement();f.firstText=f.deepFirst.getText();if(/-$/.test(f.lastText)){f.lastText=f.lastText.replace(/(-)+$/g,"");f.deepLast.setText(f.lastText);a.deepLast.nodeValue=f.lastText}else{if(!/ $/.test(f.lastText)&&!/^ /.test(f.firstText)){f.lastText=f.lastText+" ";f.deepLast.setText(f.lastText);a.deepLast.nodeValue=f.lastText}}d.joinNode(a.next)}else{f.p=f.next}}}k=true}catch(h){Ext.log({level:"warn",msg:h,dump:h});j.removeNext()}d.setSuspendEvent(false);return k},unExecute:function(){return true},each:function(b,a){var c=this;if(b){b.each(function(d){a(d);c.each(d,a)})}}},0,0,0,0,0,0,[FBEditor.view.form.desc.editor.command,"Clean"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.toolbar.button.cleaner.CleanerController",Ext.app.ViewController,{onClick:function(){var d=this,a=d.getView(),c=a.getEditor(),b,g,f;b=c.getManager();g=b.getHistory();f=Ext.create("FBEditor.view.form.desc.editor.command.Clean",{manager:b});if(f.execute()){g.add(f)}},onSync:function(){var f=this,a=f.getView(),d=a.getEditor(),c,b;c=d.getManager();b=c.getFocusElement();if(b){a.enable()}else{a.disable()}}},0,0,0,0,["controller.form.desc.editor.toolbar.button.cleaner"],0,[FBEditor.view.form.desc.editor.toolbar.button.cleaner,"CleanerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.toolbar.button.cleaner.Cleaner",Ext.Button,{controller:"form.desc.editor.toolbar.button.cleaner",html:'<i class="fa fa-paint-brush"></i>',tooltip:"Уборка",tooltipType:"title",disabled:true,listeners:{sync:"onSync",click:"onClick"},getEditor:function(){var b=this,a;a=b.editor||b.up("form-desc-editor-toolbar").getEditor();b.editor=a;return a}},0,["form-desc-editor-toolbar-button-cleaner"],["component","box","button","form-desc-editor-toolbar-button-cleaner"],{component:true,box:true,button:true,"form-desc-editor-toolbar-button-cleaner":true},["widget.form-desc-editor-toolbar-button-cleaner"],0,[FBEditor.view.form.desc.editor.toolbar.button.cleaner,"Cleaner"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.toolbar.Toolbar",FBEditor.editor.view.toolbar.Toolbar,{afterRender:function(){var b=this,a;FBEditor.editor.view.toolbar.Toolbar.prototype.afterRender.apply(this,arguments);a=Ext.widget("form-desc-editor-toolbar-button-cleaner");b.add([{xtype:"tbspacer",width:20},a]);b.buttons.push(a)}},0,["form-desc-editor-toolbar"],["component","box","container","toolbar","editor-toolbar","form-desc-editor-toolbar"],{component:true,box:true,container:true,toolbar:true,"editor-toolbar":true,"form-desc-editor-toolbar":true},["widget.form-desc-editor-toolbar"],0,[FBEditor.view.form.desc.editor.toolbar,"Toolbar"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.body.Body",FBEditor.editor.view.Editor,{cls:"form-desc-editor-body",height:170,resizable:{handles:"s",minHeight:100,pinned:true},createManager:function(){var a=this;a.manager=a.manager||Ext.create("FBEditor.view.form.desc.editor.Manager",a)},createToolbar:function(){return Ext.create("FBEditor.view.form.desc.editor.toolbar.Toolbar")}},0,["form-desc-editor-body"],["component","box","container","panel","base-editor","form-desc-editor-body"],{component:true,box:true,container:true,panel:true,"base-editor":true,"form-desc-editor-body":true},["widget.form-desc-editor-body"],0,[FBEditor.view.form.desc.editor.body,"Body"],0));(Ext.cmd.derive("FBEditor.view.form.desc.editor.Editor",Ext.Panel,{controller:"form.desc.editor",cls:"form-desc-editor",layout:"fit",bodyStyle:{background:"none"},listeners:{loadData:"onLoadData"},defaultShowToolbar:false,bodyEditor:null,afterRender:function(){var b=this,a;a=Ext.widget("form-desc-editor-body",{rootElementName:b.rootElementName,defaultShowToolbar:b.defaultShowToolbar});b.bodyEditor=a;b.add(a);Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},getValues:function(c){var a=this,b=c;b[a.name]=a.getValue();return b},getValue:function(){var b=this,a,c;a=b.getBodyEditor();c=a.getValue();return c},getBodyEditor:function(){return this.bodyEditor}},0,["form-desc-editor"],["component","box","container","panel","form-desc-editor"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true},["widget.form-desc-editor"],0,[FBEditor.view.form.desc.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.form.desc.annotation.Annotation",FBEditor.view.form.desc.editor.Editor,{id:"form-desc-annotation",rootElementName:"desc:annotation",name:"annotation",defaultShowToolbar:true},0,["form-desc-annotation"],["component","box","container","panel","form-desc-editor","form-desc-annotation"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-annotation":true},["widget.form-desc-annotation"],0,[FBEditor.view.form.desc.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.annotation.Annotation",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.annotation",title:"Аннотация",xtypeChild:"annotation"},0,["desc-fieldset-annotation"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-annotation"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-annotation":true},["widget.desc-fieldset-annotation"],0,[FBEditor.view.form.desc.fieldset.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.history.HistoryController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,a=c.getView(),b;b=a.items.first();if(b.getValue()){a.expand()}}},0,0,0,0,["controller.desc.fieldset.history"],0,[FBEditor.view.form.desc.fieldset.history,"HistoryController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.history.History",FBEditor.view.form.desc.editor.Editor,{id:"form-desc-history",rootElementName:"desc:history",name:"history"},0,["form-desc-history"],["component","box","container","panel","form-desc-editor","form-desc-history"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-history":true},["widget.form-desc-history"],0,[FBEditor.view.form.desc.history,"History"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.history.History",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.history",title:"Комментарии редактора",xtypeChild:"history"},0,["desc-fieldset-history"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-history"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-history":true},["widget.desc-fieldset-history"],0,[FBEditor.view.form.desc.fieldset.history,"History"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.periodical.PeriodicalController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{},0,0,0,0,["controller.desc.fieldset.periodical"],0,[FBEditor.view.form.desc.fieldset.periodical,"PeriodicalController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.periodical.Periodical",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-periodical",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"periodical",cls:"desc-fieldcontainer",translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 18ea4ccf-daa9-102b-9003-10751c2f945c",title:"Заголовок",issn:"ISSN",issnError:"Значение должно соответствовать шаблону d{4}-d{3}(d|X). Например: 1748-7188",desc:"Описание",number:"Номер",year:"Год",date:"Дата"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"block-container",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:a,btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:100,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"desc-field-text-required",fieldLabel:b.translateText.id,name:a+"-id",regex:/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/,regexText:b.translateText.idError},{xtype:"desc-field-number-required",name:a+"-number",fieldLabel:b.translateText.number},{xtype:"desc-field-number-required",name:a+"-year",fieldLabel:b.translateText.year},{xtype:"desc-date",name:a+"-date",fieldLabel:b.translateText.date,cls:"field-optional"},{xtype:"textfield",name:a+"-issn",regex:/^\d{4}-\d{3}(\d|X)$/,regexText:b.translateText.issnError,fieldLabel:b.translateText.issn,cls:"field-optional"},{xtype:"textfield",name:a+"-text",fieldLabel:b.translateText.desc,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:a+"-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(h){var f=this,a=f.prefixName,c=f.items,g=h,b=null;c.each(function(d){var j;j={__text:d.down("[name="+a+"-text]").getValue(),_number:d.down("[name="+a+"-number]").getValue(),_year:d.down("[name="+a+"-year]").getValue(),_date:Ext.Date.format(d.down("[name="+a+"-date]").getValue(),"Y-m-d")};j=f.removeEmptyValues(j);j={_id:d.down("[name="+a+"-id]").getValue(),title:d.down("[name="+a+"-title]").getValues(),issn:d.down("[name="+a+"-issn]").getValue(),issue:j};j=f.removeEmptyValues(j);if(j){b=b||[];b.push(j)}});if(b){g[a]=b}return g}},0,["form-desc-periodical"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-periodical"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-periodical":true},["widget.form-desc-periodical"],0,[FBEditor.view.form.desc.periodical,"Periodical"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.periodical.Periodical",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-periodical",controller:"desc.fieldset.periodical",title:"Периодическое издание",cls:"desc-fieldset-periodical",xtypeChild:"periodical"},0,["desc-fieldset-periodical"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-periodical"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-periodical":true},["widget.desc-fieldset-periodical"],0,[FBEditor.view.form.desc.fieldset.periodical,"Periodical"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.preamble.PreambleController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{onCheckExpand:function(){var c=this,b=c.getView(),a;a=b.items.first();if(a.getValue()){b.expand()}}},0,0,0,0,["controller.desc.fieldset.preamble"],0,[FBEditor.view.form.desc.fieldset.preamble,"PreambleController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.preamble.Preamble",FBEditor.view.form.desc.editor.Editor,{id:"form-desc-preamble",rootElementName:"desc:preamble",name:"preamble"},0,["form-desc-preamble"],["component","box","container","panel","form-desc-editor","form-desc-preamble"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-preamble":true},["widget.form-desc-preamble"],0,[FBEditor.view.form.desc.preamble,"Preamble"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.preamble.Preamble",FBEditor.view.form.desc.fieldset.AbstractFieldset,{controller:"desc.fieldset.preamble",title:"Преамбула",xtypeChild:"preamble"},0,["desc-fieldset-preamble"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-preamble"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-preamble":true},["widget.desc-fieldset-preamble"],0,[FBEditor.view.form.desc.fieldset.preamble,"Preamble"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.publishInfo.PublishInfoController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{resetFieldset:function(c){var b=this,a=b.getView(),d;d=a.getPublishTitle();d.isChanged=false;FBEditor.view.form.desc.fieldset.AbstractFieldsetController.prototype.resetFieldset.apply(this,arguments)},onExpand:function(){var b=this,a=b.getView(),c;c=a.getPublishTitle();if(!c.isChanged&&!c.getValue()){c.fireEvent("copyTitle")}}},0,0,0,0,["controller.desc.fieldset.publishInfo"],0,[FBEditor.view.form.desc.fieldset.publishInfo,"PublishInfoController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.biblio.Biblio",FBEditor.view.form.desc.editor.Editor,{id:"form-desc-biblio-description",rootElementName:"desc:biblio-description"},0,["form-desc-biblio-description"],["component","box","container","panel","form-desc-editor","form-desc-biblio-description"],{component:true,box:true,container:true,panel:true,"form-desc-editor":true,"form-desc-biblio-description":true},["widget.form-desc-biblio-description"],0,[FBEditor.view.form.desc.publishInfo.biblio,"Biblio"],0));(Ext.cmd.derive("FBEditor.view.form.desc.isbn.IsbnController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(c){var b=this,a=b.getView();if(c){c=Ext.isString(c)?{0:c}:c;Ext.Object.each(c,function(d,h){var f=a.getPlugin("fieldcontainerreplicator"),g=a.down("textfield");if(g){g.setValue(h)}if(c[parseInt(d)+1]){f.addFields();a=a.nextSibling()}})}}},0,0,0,0,["controller.form.desc.isbn"],0,[FBEditor.view.form.desc.isbn,"IsbnController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.isbn.Isbn",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.isbn",layout:"hbox",defaults:{anchor:"100%",flex:1,labelWidth:60,labelAlign:"right"},fieldConfig:{},fieldName:"",translateText:{isbn:"ISBN",isbnError:"По шаблону ([0-9]+[-s]){3,6}[0-9]*[xX0-9]. Например 978-5-358-02523-3"},initComponent:function(){var b=this,a=b.fieldName,c;b.plugins={ptype:"fieldcontainerreplicator",groupName:a,btnStyle:{margin:"0 0 0 5px"}};c={xtype:"textfield",name:a,regex:/^([0-9]+[\-\s]){3,6}[0-9]*[xX0-9]$/,regexText:b.translateText.isbnError,fieldLabel:b.translateText.isbn,labelWidth:b.labelWidth||b.defaults.labelWidth,cls:"field-optional",keyEnterAsTab:true,afterBodyEl:'<span class="after-body">'+b.translateText.isbnError+"</span>",listeners:{loadData:function(d){b.fireEvent("loadData",d)},blur:function(d){b.splitField(d)}}};Ext.apply(c,b.fieldConfig);b.items=[c];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},splitField:function(d){var f=d.getValue(),a,c,b;b=f.split(/,[ ]*/);if(b.length>1){a=d.ownerCt;Ext.Array.each(b,function(h,g){var j;c=a.getPlugin("fieldcontainerreplicator");j=a.down("textfield");j.setValue(h);if(g+1<b.length){c.addFields();a=a.nextSibling()}})}},getValues:function(){var c=this,b=c.fieldName,d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(f){if(f.getValue()){d.push(f.getValue())}});return d}},0,["form-desc-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-isbn":true},["widget.form-desc-isbn"],0,[FBEditor.view.form.desc.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.isbn.Isbn",FBEditor.view.form.desc.isbn.Isbn,{fieldConfig:{plugins:"fieldCleaner"}},0,["form-desc-publishInfo-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-isbn","form-desc-publishInfo-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-isbn":true,"form-desc-publishInfo-isbn":true},["widget.form-desc-publishInfo-isbn"],0,[FBEditor.view.form.desc.publishInfo.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.sequence.SequenceController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;Ext.Object.each(d,function(f,h){b=a.getPlugin("fieldcontainerreplicator");var g=a.down("textfield");if(g){g.setValue(h)}if(d[parseInt(f)+1]){b.addFields();a=a.nextSibling()}})}},0,0,0,0,["controller.form.desc.publishInfo.sequence"],0,[FBEditor.view.form.desc.publishInfo.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.sequence.Sequence",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.publishInfo.sequence",layout:"hbox",defaults:{anchor:"100%",flex:1,labelWidth:130,labelAlign:"right"},fieldName:"",translateText:{sequence:"Серия"},initComponent:function(){var b=this,a=b.fieldName;b.plugins={ptype:"fieldcontainerreplicator",groupName:a,btnStyle:{margin:"0 0 0 5px"}};b.items=[{xtype:"textfield",name:a,fieldLabel:b.translateText.sequence,cls:"field-optional",keyEnterAsTab:true,plugins:"fieldCleaner",listeners:{loadData:function(c){b.fireEvent("loadData",c)}}}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var c=this,b=c.fieldName,d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(f){if(f.getValue()){d.push(f.getValue())}});return d}},0,["form-desc-publishInfo-sequence"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-publishInfo-sequence"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-publishInfo-sequence":true},["widget.form-desc-publishInfo-sequence"],0,[FBEditor.view.form.desc.publishInfo.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.title.TitleController",Ext.app.ViewController,{onChange:function(){var b=this,a=b.getView();if(a.getValue()){a.isChanged=true}},onFocus:function(){var b=this,a=b.getView();if(!a.isChanged&&!a.getValue()){b.onCopyTitle()}},onCopyTitle:function(){var b=this,a=b.getView(),c;c=Ext.getCmp("form-desc-title").getMain().getValue();a.setValue(c);Ext.defer(function(){a.focus(true)},1)}},0,0,0,0,["controller.form.desc.publishInfo.title"],0,[FBEditor.view.form.desc.publishInfo.title,"TitleController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.title.Title",FBEditor.view.form.desc.field.text.required.Required,{controller:"form.desc.publishInfo.title",listeners:{change:"onChange",focus:"onFocus",copyTitle:"onCopyTitle"},isChanged:false},0,["form-desc-publishInfo-title"],["component","box","field","textfield","desc-field-text-required","form-desc-publishInfo-title"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true,"form-desc-publishInfo-title":true},["widget.form-desc-publishInfo-title"],0,[FBEditor.view.form.desc.publishInfo.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.publishInfo.PublishInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-publishInfo",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"paper-publish-info",translateText:{title:"Название",publisher:"Издательство",city:"Город",year:"Год",biblio:"Библиограф. описание"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"publishInfo",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},items:[{xtype:"desc-fieldcontainer",cls:"block-container",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:130,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"form-desc-publishInfo-title",name:a+"-title",allowBlank:false,fieldLabel:b.translateText.title,cls:"field-required",plugins:"fieldCleaner"},{xtype:"desc-fieldcontainer",items:[{xtype:"form-desc-biblio-description",name:a+"-biblio-description"}],fieldLabel:b.translateText.biblio,cls:"field-optional"},{xtype:"textfield",name:a+"-publisher",fieldLabel:b.translateText.publisher,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"textfield",name:a+"-city",fieldLabel:b.translateText.city,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:130,labelAlign:"right",keyEnterAsTab:true},items:[{xtype:"textfield",name:a+"-year",fieldLabel:b.translateText.year,cls:"field-optional",plugins:"fieldCleaner"},{xtype:"form-desc-publishInfo-isbn",fieldName:a+"-isbn",labelWidth:130},{xtype:"form-desc-publishInfo-sequence",fieldName:a+"-sequence"}]}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(h){var f=this,a=f.prefixName,c=f.items,g=h,b=null;c.each(function(j){var k,d,l;d=j.down("form-desc-publishInfo-isbn").getValues();l=j.down("form-desc-publishInfo-sequence").getValues();k={isbn:d,sequence:l,_publisher:j.down("[name="+a+"-publisher]").getValue(),_city:j.down("[name="+a+"-city]").getValue(),_year:j.down("[name="+a+"-year]").getValue(),_title:j.down("[name="+a+"-title]").getValue(),"biblio-description":j.down("[name="+a+"-biblio-description]").getValue()};k=f.removeEmptyValues(k);if(k){b=b||[];b.push(k)}});if(b){g[a]=b}return g}},0,["form-desc-publishInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-publishInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-publishInfo":true},["widget.form-desc-publishInfo"],0,[FBEditor.view.form.desc.publishInfo,"PublishInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.publishInfo.PublishInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-publishInfo",controller:"desc.fieldset.publishInfo",title:"Информация о бумажной публикации",xtypeChild:"publishInfo",publishTitle:null,getPublishTitle:function(){var b=this,a;a=b.publishTitle||b.down("form-desc-publishInfo-title");b.publishTitle=a;return a}},0,["desc-fieldset-publishInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-publishInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-publishInfo":true},["widget.desc-fieldset-publishInfo"],0,[FBEditor.view.form.desc.fieldset.publishInfo,"PublishInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetInnerController",FBEditor.view.form.desc.fieldset.AbstractFieldsetController,{},0,0,0,0,["controller.desc.fieldsetinner"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetInnerController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.AbstractFieldsetInner",Ext.form.FieldSet,{controller:"desc.fieldsetinner",collapsible:true,anchor:"100%",cls:"fieldset-inner",listeners:{resetFields:"onResetFields",checkExpand:"onCheckExpand"},require:false,autoExpand:true,initComponent:function(){var b=this,a=b.require;b.collapsed=a?false:true;b.cls+=a?"":" fieldset-optional";Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,a=b.items,c=true;a.each(function(d){if(d.isValid&&!d.isValid()){c=false}});return c},getValues:function(f){var b=this,a=b.items,c=f;a.each(function(d){if(d.getValues){c=d.getValues(c)}});return c}},0,["desc-fieldsetinner"],["component","box","container","fieldset","desc-fieldsetinner"],{component:true,box:true,container:true,fieldset:true,"desc-fieldsetinner":true},["widget.desc-fieldsetinner"],0,[FBEditor.view.form.desc.fieldset,"AbstractFieldsetInner"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClassStore",Ext.data.Store,{fields:["value","name"],data:[{value:"",name:"Неизвестно"},{value:"novel",name:"Роман"},{value:"story",name:"Повесть"},{value:"short_story",name:"Рассказ"},{value:"poem",name:"Стихотворение"},{value:"essay",name:"Эссе"},{value:"sketch",name:"Очерк"},{value:"article",name:"Статья"},{value:"song",name:"Песня"},{value:"play",name:"Пьеса"},{value:"interview",name:"Интервью"},{value:"monograph",name:"Монография"},{value:"letters",name:"Переписка"},{value:"diary",name:"Дневник"},{value:"speech",name:"Речь"},{value:"manual",name:"Учебник"},{value:"reference",name:"Справочник"},{value:"thesis",name:"Диссертация"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.bookClass,"BookClassStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClassController",Ext.app.ViewController,{onChange:function(c,d){var b=c,f=d,a;a=b.findRecordByValue(f);if(!a||!f){b.reset()}}},0,0,0,0,["controller.form.desc.bookClass"],0,[FBEditor.view.form.desc.bookClass,"BookClassController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.bookClass.BookClass",Ext.form.field.ComboBox,{controller:"form.desc.bookClass",queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Литературная форма",editable:false,listConfig:{maxHeight:"auto"},listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.bookClass.BookClassStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-bookClass"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-bookClass"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-bookClass":true},["widget.form-desc-bookClass"],0,[FBEditor.view.form.desc.bookClass,"BookClass"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.bbk.field.FieldController",Ext.app.ViewController,{onPaste:function(){var c=this,a=c.getView(),b;b=a.getPlugin("fieldCleaner");b.convertVal()}},0,0,0,0,["controller.form.desc.classification.bbk.field"],0,[FBEditor.view.form.desc.classification.bbk.field,"FieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.bbk.field.Field",FBEditor.view.field.textfieldclear.TextFieldClear,{controller:"form.desc.classification.bbk.field",name:"classification-bbk",listeners:{paste:"onPaste"},plugins:{ptype:"fieldCleaner",style:"display: none"},flex:1,regex:/^[\(\)=:\d\.\-A-Яа-я/\+ "]+$/,translateText:{bbk:"Код ББК",bbkError:'По шаблону [\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+'},initComponent:function(){var a=this;a.fieldLabel=a.translateText.bbk;a.regexText=a.translateText.bbkError;a.afterBodyEl='<span class="after-body">'+a.translateText.bbkError+"</span>";FBEditor.view.field.textfieldclear.TextFieldClear.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-bbk-field"],["component","box","field","textfield","textfieldclear","form-desc-classification-bbk-field"],{component:true,box:true,field:true,textfield:true,textfieldclear:true,"form-desc-classification-bbk-field":true},["widget.form-desc-classification-bbk-field"],0,[FBEditor.view.form.desc.classification.bbk.field,"Field"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.bbk.Bbk",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-classification-bbk",name:"form-desc-plugin-fieldcontainerreplicator",flex:1,layout:"anchor",initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%",labelAlign:"right",labelWidth:100,cls:"field-optional",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-bbk",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"form-desc-classification-bbk-field"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-bbk"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-bbk"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-bbk":true},["widget.form-desc-classification-bbk"],0,[FBEditor.view.form.desc.classification.bbk,"Bbk"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.setting.Setting",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"hbox",translateText:{desc:"Описание",country:"Страна",place:"Место",date:"Дата",dateFrom:"Дата начала",dateTo:"Дата окончания",age:"Век"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"textfield",name:"classification-setting-age",fieldLabel:a.translateText.age},{xtype:"countryfield",name:"classification-setting-country",fieldLabel:a.translateText.country},{xtype:"textfield",name:"classification-setting-place",fieldLabel:a.translateText.place,plugins:"fieldCleaner"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"desc-date",name:"classification-setting-date",fieldLabel:a.translateText.date},{xtype:"desc-date",name:"classification-setting-date-from",fieldLabel:a.translateText.dateFrom},{xtype:"desc-date",name:"classification-setting-date-to",fieldLabel:a.translateText.dateTo},{xtype:"textfield",name:"classification-setting-text",fieldLabel:a.translateText.desc,plugins:"fieldCleaner"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var b=this,c,a={__text:b.down("[name=classification-setting-text]").getValue(),_country:b.down("[name=classification-setting-country]").getValue(),_place:b.down("[name=classification-setting-place]").getValue(),_age:b.down("[name=classification-setting-age]").getValue(),_date:Ext.Date.format(b.down("[name=classification-setting-date]").getValue(),"Y-m-d"),"_date-from":Ext.Date.format(b.down("[name=classification-setting-date-from]").getValue(),"Y-m-d"),"_date-to":Ext.Date.format(b.down("[name=classification-setting-date-to]").getValue(),"Y-m-d")};c=b.removeEmptyValues(a);return c}},0,["form-desc-classification-setting"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-setting"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-setting":true},["widget.form-desc-classification-setting"],0,[FBEditor.view.form.desc.classification.setting,"Setting"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.EducationStore",Ext.data.Store,{fields:["value","name"],data:[{value:"none",name:"без образования"},{value:"preschool_education",name:"дошкольное образование"},{value:"primary_education",name:"начальное общее образование"},{value:"basic_education",name:"основное общее"},{value:"secondary_education",name:"среднее (полное) общее"},{value:"technical_school_first_cycle",name:"начальное профессиональное"},{value:"technical_school_second_cycle",name:"среднее профессиональное"},{value:"higher_education",name:"высшее профессиональное"},{value:"university_postgraduate",name:"послевузовское профессиональное"},{value:"vocational_training",name:"профессиональная подготовка"},{value:"additional_education",name:"дополнительное образование"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.classification.target,"EducationStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.EducationController",Ext.app.ViewController,{onChange:function(c,d){var b=c,f=d,a;a=b.findRecordByValue(f);if(!a){b.setValue("")}}},0,0,0,0,["controller.form.desc.classification.target.education"],0,[FBEditor.view.form.desc.classification.target,"EducationController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.Education",Ext.form.field.ComboBox,{controller:"form.desc.classification.target.education",queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Образование",editable:false,listeners:{change:"onChange"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.classification.target.EducationStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-target-education"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-classification-target-education"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-classification-target-education":true},["widget.form-desc-classification-target-education"],0,[FBEditor.view.form.desc.classification.target,"Education"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMinController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.expand()}},0,0,0,0,["controller.form.desc.classification.target.agemin"],0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMinController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMinStore",Ext.data.Store,{fields:["value","name"],data:[{value:"0",name:"0"},{value:"6",name:"6"},{value:"12",name:"12"},{value:"16",name:"16"},{value:"18",name:"18"},{value:"21",name:"21"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMinStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.ageMin.AgeMin",Ext.form.field.ComboBox,{controller:"form.desc.classification.target.agemin",queryMode:"local",displayField:"name",valueField:"value",listeners:{click:{element:"el",fn:"onClick"}},initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.form.desc.classification.target.ageMin.AgeMinStore");Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-target-agemin"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-classification-target-agemin"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-classification-target-agemin":true},["widget.form-desc-classification-target-agemin"],0,[FBEditor.view.form.desc.classification.target.ageMin,"AgeMin"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.target.Target",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"hbox",translateText:{desc:"Описание",minAge:"Мин возраст",maxAge:"Макс возраст"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"form-desc-classification-target-agemin",name:"classification-target-audience-age-min",fieldLabel:a.translateText.minAge},{xtype:"form-desc-classification-target-education",name:"classification-target-audience-education"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"numberfield",name:"classification-target-audience-age-max",fieldLabel:a.translateText.maxAge,minValue:2,maxValue:150},{xtype:"textfield",name:"classification-target-audience-text",fieldLabel:a.translateText.desc,plugins:"fieldCleaner"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var b=this,c,a={__text:b.down("[name=classification-target-audience-text]").getValue(),_education:b.down("[name=classification-target-audience-education]").getValue(),"_age-min":b.down("[name=classification-target-audience-age-min]").getValue(),"_age-max":b.down("[name=classification-target-audience-age-max]").getValue()};c=b.removeEmptyValues(a);return c}},0,["form-desc-classification-target"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-target"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-target":true},["widget.form-desc-classification-target"],0,[FBEditor.view.form.desc.classification.target,"Target"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.udc.field.FieldController",Ext.app.ViewController,{onPaste:function(){var c=this,a=c.getView(),b;b=a.getPlugin("fieldCleaner");b.convertVal()}},0,0,0,0,["controller.form.desc.classification.udc.field"],0,[FBEditor.view.form.desc.classification.udc.field,"FieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.udc.field.Field",FBEditor.view.field.textfieldclear.TextFieldClear,{controller:"form.desc.classification.udc.field",name:"classification-udc",listeners:{paste:"onPaste"},plugins:{ptype:"fieldCleaner",style:"display: none"},flex:1,regex:/^[\d\. \-\*\(\):\[\]\+:=&quot;«»'/A-Яа-я]+$/,translateText:{udc:"Код УДК",udcError:"По шаблону [\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»'/A-Яа-я]+"},initComponent:function(){var a=this;a.fieldLabel=a.translateText.udc;a.regexText=a.translateText.udcError;a.afterBodyEl='<span class="after-body">'+a.translateText.udcError+"</span>";FBEditor.view.field.textfieldclear.TextFieldClear.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-udc-field"],["component","box","field","textfield","textfieldclear","form-desc-classification-udc-field"],{component:true,box:true,field:true,textfield:true,textfieldclear:true,"form-desc-classification-udc-field":true},["widget.form-desc-classification-udc-field"],0,[FBEditor.view.form.desc.classification.udc.field,"Field"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.udc.Udc",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-classification-udc",name:"form-desc-plugin-fieldcontainerreplicator",flex:1,layout:"anchor",initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%",labelAlign:"right",labelWidth:100,cls:"field-optional",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-udc",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"form-desc-classification-udc-field"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-classification-udc"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification-udc"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification-udc":true},["widget.form-desc-classification-udc"],0,[FBEditor.view.form.desc.classification.udc,"Udc"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectController",FBEditor.view.form.desc.AbstractFieldController,{onSelectSubject:function(g){var f=this,a=f.getView(),j=a.getSubjectTree(),h,d,c,b;h=g[j.displayField];h=h.replace(/<\/?b>/ig,"");d=a.down("textfield");d.setValue(h);d.setFieldLabel(a.translateText.subject);b=a.nextSibling();if(!b){c=a.getPlugin("fieldcontainerreplicator");c.addFields()}},onSelectTag:function(h){var g=this,b=g.getView(),a=b.getTag(),j,f,d,c;j=h[a.displayField];j=j.replace(/<\/?b>/ig,"");f=b.down("textfield");f.setValue(j);f.setFieldLabel(b.translateText.tag);c=b.nextSibling();if(!c){d=b.getPlugin("fieldcontainerreplicator");d.addFields()}},onShowSubjectTree:function(){var b=this,a=b.getView(),c=a.getSubjectTree();c.subjectField=a;c.initData()},onShowTag:function(){var c=this,b=c.getView(),a=b.getTag();a.setSubjectField(b);a.showTags()}},0,0,0,0,["controller.form.desc.subject"],0,[FBEditor.view.form.desc.subject,"SubjectController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectTreeController",Ext.app.ViewController,{onFilter:function(c){var b=this,a=b.getView();a.filterData(c)},onNodeExpand:function(j){var o=this,p=o.getView(),h=p.getView(),f=h.getEl(),d=p.scrollTop,q=p.getHeight(),b=24,l,c,k,n,m,g,a;g=h.getNode(j);if(!g){return}a=g.offsetTop;c=j.childNodes.length;l=Math.floor(q/b)-2;k=d+q-a;n=c*b-k;m=a-d<b?0:b;d=a;o.scrollTop=d;f.setScrollTop(d)},onNodeCollapse:function(b){var f=this,a=f.getView(),d=a.getView(),c=d.getEl();c.setScrollTop(a.scrollTop)},onClick:function(a){a.stopPropagation()},onItemClick:function(f,c){var d=this,b=d.getView(),a,g;f.toggle(c);if(!c.isExpandable()){g=c.getData();a=b.subjectField;a.fireEvent("selectSubject",g);b.close()}},onAlignTo:function(){var d=this,b=d.getView(),c=b.subjectField,a;if(b.isVisible()&&c&&b.rendered){a=b.getHeight()+2;b.alignTo(c,"tl",[115,-a])}},onResize:function(){var b=this,a=b.getView();a.isShow=false}},0,0,0,0,["controller.form.desc.subjectTree"],0,[FBEditor.view.form.desc.subject,"SubjectTreeController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectStore",Ext.data.TreeStore,{defaultRootProperty:"genre",proxy:{type:"memory"}},0,0,0,0,0,0,[FBEditor.view.form.desc.subject,"SubjectStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.SubjectTree",Ext.tree.Panel,{id:"form-desc-subjectTree",controller:"form.desc.subjectTree",cls:"form-desc-subjectTree",resizable:true,floating:true,closeAction:"hide",width:450,height:300,minHeight:200,maxHeight:500,autoScroll:true,rootVisible:false,animate:false,useArrows:true,folderSort:true,displayField:"_title",listeners:{filter:"onFilter",nodeExpand:"onNodeExpand",nodeCollapse:"onNodeCollapse",click:{element:"el",fn:"onClick"},itemClick:"onItemClick",alignTo:"onAlignTo",resize:"onResize"},updateDataTime:60*60*24,isShow:false,subjectField:null,defaultRootProperty:"",dataLoaded:false,errorLoaded:false,cacheData:null,cacheFilteredData:{},scrollTop:0,initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.subject.SubjectStore");b.store=a;b.defaultRootProperty=a.getDefaultRootProperty();b.fireHierarchyEvent=function(c){};Ext.tree.Panel.prototype.initComponent.apply(this,arguments);a.on({scope:b,nodeexpand:function(c){this.fireEvent("nodeExpand",c)},nodecollapse:function(c){this.fireEvent("nodeCollapse",c)}})},handleFocusEnter:function(c){var b=this,a=b.getView();b.scrollTop=a.getEl().getScrollTop();Ext.tree.Panel.prototype.handleFocusEnter.apply(this,arguments)},show:function(){var b=this,a,c;if(b.subjectField){Ext.tree.Panel.prototype.show.apply(this,arguments);b.fireEvent("alignTo");b.isShow=true;a=b.getTextField();c=a.getValue();b.filterData(c)}},afterShow:function(){var a=this;Ext.getBody().on("click",a.onClickBody,a);Ext.tree.Panel.prototype.afterShow.apply(this,arguments)},afterHide:function(){var a=this;a.isShow=false;Ext.getBody().un("click",a.onClickBody,a);Ext.tree.Panel.prototype.afterHide.apply(this,arguments);a.scrollTop=0;a.getRootNode().collapse(true)},onEsc:function(){this.close()},initData:function(){var a=this,c,b;if(!a.dataLoaded){b=a.getLocalData();c=b?b.data:null;if(!b||b&&b.timeIsOver){a.requestTree(c)}else{a.loadData(c)}}else{a.show()}},requestTree:function(b){var a=this;Ext.Ajax.request({url:"https://hub.litres.ru/genres_list_2/",timeout:5000,scope:a,success:function(c){var d=this,f=c.responseText;d.saveToLocal(f);d.loadData(f);d.errorLoaded=false},failure:function(c){console.log("Не удалось загрузить дерево жанров с удаленного ресурса",c);a.loadData(b);a.errorLoaded=true}})},loadData:function(f){var d=this,b=d.getStore(),c,a;if(d.errorLoaded){return}if(!f){Ext.Msg.alert({title:"Ошибка дерева жанров",message:"Не удалось выполнить первичную загрузку дерева жанров. Возможно, отсутствует подключение к интернету или браузер блокирует запрос. Введите жанры вручную.",icon:Ext.Msg.ERROR});Ext.log({msg:"Ошибка загрузки дерева жанров",level:"error"});return}c=FBEditor.util.xml.Json.xmlToJson(f);a=d.getTreeData(c.genres.genre);d.cacheData=Ext.clone(a);b.loadData(a);d.fireEvent("afterLoadData");d.dataLoaded=true;d.show()},getLocalData:function(){var b=this,d=FBEditor.getLocalStorage(),a,c;c=d.getItem(b.id);c=Ext.JSON.decode(c);if(c){a=(new Date().getTime()-c.time)/1000;c.timeIsOver=a>b.updateDataTime}return c},saveToLocal:function(c){var a=this,d=FBEditor.getLocalStorage(),b;b={time:new Date().getTime(),data:c};d.setItem(a.id,Ext.JSON.encode(b))},getTreeData:function(c){var b=this,a,d;d=b.getTreeChildren(c);a={root:true,expandable:false,icon:" ",cls:"treenavigation-root treenavigation-root-genres",_id:"root"};a[b.defaultRootProperty]=d;return[a]},getTreeChildren:function(g,a){var f=this,d=true,b,c;while(g.length>1&&d){d=false;for(c=0;c<g.length-1;c++){if(f.sortFn(g[c],g[c+1])){b=Ext.clone(g[c]);g[c]=g[c+1];g[c+1]=b;d=true}}}Ext.Array.each(g,function(j){var h=j[f.defaultRootProperty];a=a||"";j.path=a+"/"+j._id;j.icon=" ";j[f.displayField]=Ext.String.capitalize(j[f.displayField]);if(h){h=f.getTreeChildren(h,j.path);j.cls="treenavigation-children treenavigation-children-genres"}else{j.leaf=true;j.cls="treenavigation-children treenavigation-leaf-genres"}});return g},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():Ext.tree.Panel.prototype.getRootNode.call(this);return a},existValue:function(f){var c=this,g=f.toLowerCase().trim(),d=c.getLocalData(),a=false,b;d=d?d.data:null;if(d){b=new RegExp('title="'+g+'"',"ig");a=b.test(d)}return a},filterData:function(g){var d=this,a=d.getStore(),h=g.toLowerCase(),f=Ext.clone(d.cacheData),c=3,b;if(!f||d.filterProcess){return}d.filterProcess=true;d.setLoading();if(h&&!/^[0-9]+$/.test(h)&&/[\wа-яА-Я]{2,}/.test(h)){if(!d.cacheFilteredData[h]){b=d.filterFn(h,f[0]);d.cacheFilteredData[h]=Ext.clone(b)}else{b=Ext.clone(d.cacheFilteredData[h])}if(b){a.loadData([b]);d.getRootNode().expand();if(b.genre.length>c){d.getRootNode().expandChildren()}else{d.getRootNode().expand(true)}}else{d.close()}}else{a.loadData(f);d.getRootNode().expand()}d.filterProcess=false;d.setLoading(false)},sortFn:function(d,c){var b=this,f=b.displayField,a=b.defaultRootProperty,g=false;if(c[a]&&d[a]||!c[a]&&!d[a]){g=d[f]>c[f]?true:false}else{if(!d[a]&&c[a]){g=true}}return g},getItemByValue:function(d){var c=this,a=c.getStore(),b=null;a.findBy(function(j){var g=j.data,h=g[c.displayField],f=g[c.defaultRootProperty];if(h===d){b=g;return true}if(f){b=c._findItemByValue(d,f);return b?true:false}});return b},_findItemByValue:function(d,c){var b=this,a=null;Ext.Array.each(c,function(g){var h=g[b.displayField],f=g[b.defaultRootProperty];if(h===d){a=g;return false}if(f){a=b._findItemByValue(d,f);if(a){return false}}});return a},filterFn:function(g,d){var c=this,b=null,a,f;f=d[c.displayField]?d[c.displayField].toLowerCase():null;a=new RegExp("^"+g+"|[^а-яa-z0-9]"+g,"i");if(f&&a.test(f)){b=Ext.clone(d);b[c.displayField]=f.replace(new RegExp("("+g+")","i"),"<b>$1</b>")}else{if(!d.leaf){b=Ext.clone(d);delete b[c.defaultRootProperty];Ext.Array.each(d[c.defaultRootProperty],function(j){var h=c.filterFn(g,Ext.clone(j));if(h){b[c.defaultRootProperty]=!b[c.defaultRootProperty]?[]:b[c.defaultRootProperty];b[c.defaultRootProperty].push(h)}});b=b[c.defaultRootProperty]?b:null}}return b},getTextField:function(){return this.subjectField.down("form-desc-subject-field")},onClickBody:function(c,a){var b=this;if(!b.isShow){b.isShow=true}else{b.close()}}},0,["form-desc-subjectTree"],["component","box","container","panel","tablepanel","treepanel","form-desc-subjectTree"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"form-desc-subjectTree":true},["widget.form-desc-subjectTree"],0,[FBEditor.view.form.desc.subject,"SubjectTree"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.field.SubjectFieldController",Ext.app.ViewController,{onClick:function(f,b){var d=this,a=d.getView(),c=a.up("form-desc-subject");f.stopPropagation();if(FBEditor.accessHub){c.fireEvent("showSubjectTree");c.fireEvent("showTag")}},onChange:function(){var f=this,a=f.getView(),g=a.getValue().trim(),d=a.up("form-desc-subject"),h=a.getSubjectTree(),c=FBEditor.desc.Manager,b;if(!c.loadingProcess){if(!h.isShow){h.show()}h.fireEvent("filter",g);d.fireEvent("showTag")}else{if(a.isEmptyValue()){a.setRawValue("");a.setFieldLabel(d.translateText.undefined)}else{if(g){b=h.existValue(g)?d.translateText.subject:d.translateText.tag;a.setFieldLabel(b)}}}},onBlur:function(k){var g=this,j=g.getView(),a=j.getValue(),h=j.ownerCt,l=h.nextSibling(),b=h.previousSibling(),f=h.subjectTree,c=f&&f.isShow,d;if(!l&&b&&!a&&!c){Ext.defer(function(){d=h.getPlugin("fieldcontainerreplicator");d.removeFields()},100)}else{g.splitField(k)}},splitField:function(h){var g=this,b=g.getView(),j=h.getValue(),a,f,c,d;d=new RegExp(b.separator+"[ ]*");c=j.split(d);if(c.length>1){a=h.ownerCt;Ext.Array.each(c,function(l,k){var m;f=a.getPlugin("fieldcontainerreplicator");m=a.down("textfield");m.setValue(l);if(k+1<c.length){f.addFields();a=a.nextSibling()}})}}},0,0,0,0,["controller.form.desc.subject.field"],0,[FBEditor.view.form.desc.subject.field,"SubjectFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.field.SubjectField",FBEditor.view.form.desc.field.text.required.Required,{controller:"form.desc.subject.field",name:"classification-subject",selectOnFocus:true,checkChangeBuffer:200,listeners:{click:{element:"el",fn:"onClick"},change:"onChange",blur:"onBlur"},separator:";",emptyValue:"Не определён",afterRender:function(){var a=this;a.keyNav=new Ext.util.KeyNav({target:a.inputEl,esc:function(){var c=this,d=c.getSubjectTree(),b=c.getTag();d.onEsc();b.onEsc()},scope:a});FBEditor.view.form.desc.field.text.required.Required.prototype.afterRender.apply(this,arguments)},getSubjectTree:function(){return this.up("form-desc-subject").getSubjectTree()||null},getTag:function(){return this.up("form-desc-subject").getTag()||null},isEmptyValue:function(){var b=this,c=b.getValue(),a;a=c===b.emptyValue;return a}},0,["form-desc-subject-field"],["component","box","field","textfield","desc-field-text-required","form-desc-subject-field"],{component:true,box:true,field:true,textfield:true,"desc-field-text-required":true,"form-desc-subject-field":true},["widget.form-desc-subject-field"],0,[FBEditor.view.form.desc.subject.field,"SubjectField"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.WindowController",Ext.app.ViewController,{onSelect:function(a){},onLoadData:function(g){var f=this,a=f.getView(),b=a.searchField,c=a.getContainerItems(),d;d=b.getPlugin("searchField");d.showLoader();c.maskSearching(false);c.params=Ext.clone(g);c.fireEvent("loadData",g)},onClick:function(a){a.stopPropagation()},onAlignTo:function(){var c=this,b=c.getView(),f=b.searchField.getY(),a=b.getHeight(),d=Ext.getBody().getHeight();if(b.isVisible()&&b.searchField&&b.rendered){if(d-f<a){b.alignTo(b.searchField,"tl",[0,-a])}else{b.alignTo(b.searchField,"bl",[0,0])}}},onResize:function(){var b=this,a=b.getView();b.onAlignTo();a.isShow=false}},0,0,0,0,["controller.form.desc.searchField.window"],0,[FBEditor.view.form.desc.searchField,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.Window",Ext.Panel,{controller:"form.desc.searchField.window",floating:true,width:600,height:300,maxHeight:300,closeAction:"hide",overflowY:"auto",shadow:false,listeners:{loadData:"onLoadData",select:"onSelect",alignTo:"onAlignTo",resize:"onResize",click:{element:"el",fn:"onClick"}},xtypeContainerItems:"",searchField:null,containerItems:null,initComponent:function(){var a=this;if(!a.xtypeContainerItems){throw Error("Необходимо определить свойство FBEditor.view.form.desc.searchField.Window#xtypeContainerItems")}a.items=[{xtype:a.xtypeContainerItems,padding:2,selectFn:function(b){a.fireEvent("select",b);a.searchField.fireEvent("select",b)},onResize:function(){var b=a.getHeight(),c=this.getHeight();if(b>c){a.setHeight(c)}else{if(b<300){a.setHeight(300)}}}}];a.fireHierarchyEvent=function(b){};Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},show:function(){var a=this;if(a.searchField){Ext.panel.Panel.prototype.show.apply(this,arguments);a.fireEvent("alignTo");a.isShow=true}},afterShow:function(){var a=this;Ext.getBody().on("click",a.onClickBody,a);Ext.panel.Panel.prototype.afterShow.apply(this,arguments)},afterHide:function(){var a=this;a.isShow=false;Ext.getBody().un("click",a.onClickBody,a);Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onEsc:function(){this.close()},onClickBody:function(c,a){var b=this;b.close()},clean:function(){this.close();this.mixins.behavior.clean.call(this)},abort:function(){this.close();this.mixins.behavior.abort.call(this)},getContainerItems:function(){return this.mixins.behavior.getContainerItems.call(this)}},0,["form-desc-searchField-window"],["component","box","container","panel","form-desc-searchField-window"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true},["widget.form-desc-searchField-window"],[["behavior",FBEditor.view.container.desc.search.OwnerContainerBehavior]],[FBEditor.view.form.desc.searchField,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.tag.WindowController",FBEditor.view.form.desc.searchField.WindowController,{onSelect:function(d){var c=this,a=c.getView(),b=a.subjectField;b.fireEvent("selectTag",d)},onLoadData:function(d){var c=this,a=c.getView(),b=a.getContainerItems();b.maskSearching(false);b.params=Ext.clone(d);b.fireEvent("loadData",d)},onAlignTo:function(){var c=this,a=c.getView(),b=a.subjectField;if(a.isVisible()&&b&&a.rendered){a.alignTo(a.getTextField(),"bl",[115,0])}}},0,0,0,0,["controller.form.desc.tag"],0,[FBEditor.view.form.desc.subject.tag,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.tag.Window",FBEditor.view.form.desc.searchField.Window,{id:"form-desc-tag",controller:"form.desc.tag",width:400,xtypeContainerItems:"container-desc-search-tag",displayField:"value",subjectField:null,setSubjectField:function(c){var a=this,b=a.getContainerItems();if(!a.cacheEvent){a.cacheEvent=true;b.on({scope:a,afterLoad:a.afterLoadTags})}a.subjectField=c;a.searchField=a.getTextField()},showTags:function(){var b=this,a=b.getTextField(),c=a.getValue();if(c.length>1){b.clean();b.fireEvent("loadData",{term:c})}else{b.abort()}},getTextField:function(){return this.subjectField.down("form-desc-subject-field")},afterLoadTags:function(c){var a=this,d=a.getTextField().getValue().toLowerCase(),b;if(c&&c.length){if(!a.isShow){b=c.length==1?c[0][a.displayField].toLowerCase():false;b=b?b.replace(/<\/?b>/ig,""):false;if(b&&b===d){}else{a.show()}}}else{a.close()}}},0,["form-desc-tag"],["component","box","container","panel","form-desc-searchField-window","form-desc-tag"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true,"form-desc-tag":true},["widget.form-desc-tag"],0,[FBEditor.view.form.desc.subject.tag,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.subject.Subject",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.subject",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"classification-subject",btnStyle:{margin:"0 0 0 5px"}},listeners:{selectSubject:"onSelectSubject",selectTag:"onSelectTag",showSubjectTree:"onShowSubjectTree",showTag:"onShowTag"},translateText:{subject:"Жанр",tag:"Тег",undefined:"Жанр/Тег"},subjectTree:null,tag:null,initComponent:function(){var a=this;a.items=[{xtype:"form-desc-subject-field",flex:1,fieldLabel:a.translateText.undefined,labelAlign:"right",labelWidth:110,keyEnterAsTab:true}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getSubjectTree:function(){var a=this,b;b=a.subjectTree||Ext.getCmp("form-desc-subjectTree")||Ext.widget("form-desc-subjectTree");a.subjectTree=b;return b},getTag:function(){var b=this,a;a=b.tag||Ext.getCmp("form-desc-tag")||Ext.widget("form-desc-tag");b.tag=a;return a}},0,["form-desc-subject"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-subject"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-subject":true},["widget.form-desc-subject"],0,[FBEditor.view.form.desc.subject,"Subject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.AbstractDateText",Ext.form.Text,{plugins:"fieldCleaner",listeners:{blur:function(){this.onBlur()}},fieldDateValue:null,onBlur:function(){var c=this,a=c.getValue(),b,d;d=c.getFieldDateValue();b=d.getRawValue();if(/^[0-9]{4}$/.test(a)){a=c.getValue()}if(!b&&/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(a)){d.setRawValue(a)}},getFieldDateValue:function(){var a=this,b;b=a.fieldDateValue||a.prev();return b}},0,0,["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},0,0,[FBEditor.view.form.desc.written.date,"AbstractDateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.date.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-text"],["component","box","field","textfield","form-desc-written-date-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-text":true},["widget.form-desc-written-date-text"],0,[FBEditor.view.form.desc.written.date.date,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.AbstractDateValue",FBEditor.view.form.desc.date.Date,{listeners:{beforeblur:function(){this.onBlurField()}},fieldDateText:null,onBlurField:function(){var c=this,b=c.getRawValue(),a,d;d=c.getFieldDateText();a=d.getRawValue();if(!a){d.setValue(b)}},getFieldDateText:function(){var a=this,b;b=a.fieldDateText||a.next();return b}},0,0,["component","box","field","textfield","pickerfield","datefield","desc-date"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true},0,0,[FBEditor.view.form.desc.written.date,"AbstractDateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.date.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-value":true},["widget.form-desc-written-date-value"],0,[FBEditor.view.form.desc.written.date.date,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.publicated.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-publicated-text"],["component","box","field","textfield","form-desc-written-date-publicated-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-publicated-text":true},["widget.form-desc-written-date-publicated-text"],0,[FBEditor.view.form.desc.written.date.publicated,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.publicated.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-publicated-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-publicated-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-publicated-value":true},["widget.form-desc-written-date-publicated-value"],0,[FBEditor.view.form.desc.written.date.publicated,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.translated.DateText",FBEditor.view.form.desc.written.date.AbstractDateText,{},0,["form-desc-written-date-translated-text"],["component","box","field","textfield","form-desc-written-date-translated-text"],{component:true,box:true,field:true,textfield:true,"form-desc-written-date-translated-text":true},["widget.form-desc-written-date-translated-text"],0,[FBEditor.view.form.desc.written.date.translated,"DateText"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.date.translated.DateValue",FBEditor.view.form.desc.written.date.AbstractDateValue,{},0,["form-desc-written-date-translated-value"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-written-date-translated-value"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-written-date-translated-value":true},["widget.form-desc-written-date-translated-value"],0,[FBEditor.view.form.desc.written.date.translated,"DateValue"],0));(Ext.cmd.derive("FBEditor.view.form.desc.written.Written",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-written",layout:"hbox",prefixName:"written",translateText:{lang:"Язык",writtenLang:"Язык оригинала",date:"Дата ",dateText:"Дата текстом",country:"Страна",translated:"Дата перевода",translatedText:"Дата перевода текстом",datePublic:"Дата публикации",datePublicText:"Дата публикации текстом"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"langfield",name:"lang",fieldLabel:b.translateText.lang,allowBlank:false,forceSelection:true,value:"ru",listeners:{afterrender:function(){var d=this,c=d.getStore();c.remove([0,1])}}},{xtype:"langfield",name:a+"-lang",fieldLabel:b.translateText.writtenLang,forceSelection:true,cls:"field-optional"},{xtype:"countryfield",name:a+"-country",fieldLabel:b.translateText.country,cls:"field-optional"}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:120,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"form-desc-written-date-value",name:a+"-date-value",fieldLabel:b.translateText.date},{xtype:"form-desc-written-date-text",name:a+"-date-text",fieldLabel:b.translateText.dateText},{xtype:"form-desc-written-date-translated-value",name:"translated-value",fieldLabel:b.translateText.translated},{xtype:"form-desc-written-date-translated-text",name:"translated-text",fieldLabel:b.translateText.translatedText},{xtype:"form-desc-written-date-publicated-value",name:a+"-date-public-value",fieldLabel:b.translateText.datePublic},{xtype:"form-desc-written-date-publicated-text",name:a+"-date-public-text",fieldLabel:b.translateText.datePublicText}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var a=this,b;b=FBEditor.view.form.desc.AbstractFieldContainer.prototype.isValid.call(this);a.down("langfield").isValid();return b},getValues:function(h){var f=this,b=f.prefixName,g=h,c,a;g.lang=f.down(f.down("[name=lang]")).getValue();c={_value:Ext.Date.format(f.down(f.down("[name="+b+"-date-value]")).getValue(),"Y-m-d"),__text:f.down(f.down("[name="+b+"-date-text]")).getValue()};c=f.removeEmptyValues(c);a={_value:Ext.Date.format(f.down(f.down("[name="+b+"-date-public-value]")).getValue(),"Y-m-d"),__text:f.down(f.down("[name="+b+"-date-public-text]")).getValue()};a=f.removeEmptyValues(a);c={lang:f.down(f.down("[name="+b+"-lang]")).getValue(),date:c,country:f.down(f.down("[name="+b+"-country]")).getValue(),"date-public":a};c=f.removeEmptyValues(c);if(c){g[b]=c}c={_value:Ext.Date.format(f.down(f.down("[name=translated-value]")).getValue(),"Y-m-d"),__text:f.down(f.down("[name=translated-text]")).getValue()};c=f.removeEmptyValues(c);if(c){g.translated=c}return g}},0,["form-desc-written"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-written"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-written":true},["widget.form-desc-written"],0,[FBEditor.view.form.desc.written,"Written"],0));(Ext.cmd.derive("FBEditor.view.form.desc.classification.Classification",FBEditor.view.form.desc.AbstractFieldContainer,{cls:"desc-fieldcontainer",translateText:{info:"Общая информация",bookClass:"Литературная форма",contents:"Тип лит. формы",target:"Целевая аудитория",setting:"Привязка к месту и времени",codes:"Коды",udc:"Код УДК",bbk:"Код ББК",udcError:"По шаблону [\\d\\. \\-\\*\\(\\):\\[\\]\\+:=&quot;«»'/A-Яа-я]+",bbkError:'По шаблону [\\(\\)=:\\d\\.\\-A-Яа-я/\\+ "]+',written:"Дата и место написания",keywords:"Ключевые слова",keywordsHelp:"Перечислите через запятую. Например 1912, война, роман, отечественная, наполеон, кутузов"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldsetinner",title:a.translateText.info,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"classification-custom-subject",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"form-desc-bookClass",name:"classification-class-text",fieldLabel:a.translateText.bookClass,cls:"field-optional"},{xtype:"hiddenfield",name:"classification-class-contents",value:"standalone",fieldLabel:a.translateText.contents}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",name:"form-desc-plugin-fieldcontainerreplicator",id:"form-desc-subject",flex:1,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"form-desc-subject"}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.target,items:[{xtype:"form-desc-classification-target"}]},{xtype:"desc-fieldsetinner",title:a.translateText.setting,items:[{xtype:"form-desc-classification-setting"}]},{xtype:"desc-fieldsetinner",layout:"hbox",title:a.translateText.codes,require:true,items:[{xtype:"form-desc-classification-udc"},{xtype:"fieldcontainer",width:10},{xtype:"form-desc-classification-bbk"}]},{xtype:"desc-fieldsetinner",title:a.translateText.written,require:true,items:[{xtype:"form-desc-written"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(g){var c=this,f=g,b={},a;a=c.down("form-desc-bookClass").getValue();if(a){b["class"]={_contents:c.down("[name=classification-class-contents]").getValue(),__text:a}}b.subject=c.getDataFields(c.query("[name=classification-subject]"));b["target-audience"]=c.down("form-desc-classification-target").getValues();b.setting=c.down("form-desc-classification-setting").getValues();b.udc=c.getDataFields(c.query("[name=classification-udc]"));b.bbk=c.getDataFields(c.query("[name=classification-bbk]"));f["fb3-classification"]=c.removeEmptyValues(b);f=c.down("form-desc-written").getValues(f);return f}},0,["form-desc-classification"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-classification"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-classification":true},["widget.form-desc-classification"],0,[FBEditor.view.form.desc.classification,"Classification"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Classification",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Классификация произведения",xtypeChild:"classification",require:true},0,["desc-fieldset-classification"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-classification"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-classification":true},["widget.desc-fieldset-classification"],0,[FBEditor.view.form.desc.fieldset,"Classification"],0));(Ext.cmd.derive("FBEditor.view.form.desc.customInfo.CustomInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-customInfo",name:"form-desc-plugin-fieldcontainerreplicator",cls:"desc-fieldcontainer",prefixName:"custom-info",translateText:{infoType:"Тип",desc:"Описание"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",defaults:{anchor:"100%",labelAlign:"right",keyEnterAsTab:true},plugins:{ptype:"fieldcontainerreplicator",groupName:"customInfo",btnPos:"end",btnStyle:{margin:"0 0 0 5px"}},items:[{xtype:"desc-field-text-required",name:a+"-info-type",flex:1,labelWidth:60,fieldLabel:b.translateText.infoType},{xtype:"desc-fieldcontainer",layout:"hbox",flex:3,items:[{xtype:"displayfield",fieldLabel:b.translateText.desc,labelAlign:"right",labelWidth:160},{xtype:"desc-field-textarea-required",name:a+"-text",flex:1,height:100,plugins:{ptype:"fieldCleaner",style:"right: 17px; margin-top: -20px"},resizable:{handles:"s",minHeight:50,pinned:true}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(h){var f=this,a=f.prefixName,c=f.items,g=h,b=null;c.each(function(d){var j;j={__text:d.down("[name="+a+"-text]").getValue(),"_info-type":d.down("[name="+a+"-info-type]").getValue()};j=f.removeEmptyValues(j);if(j){b=b||[];b.push(j)}});if(b){g[a]=b}return g}},0,["form-desc-customInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-customInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-customInfo":true},["widget.form-desc-customInfo"],0,[FBEditor.view.form.desc.customInfo,"CustomInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.CustomInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Пользовательская информация",xtypeChild:"customInfo"},0,["desc-fieldset-customInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-customInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-customInfo":true},["widget.desc-fieldset-customInfo"],0,[FBEditor.view.form.desc.fieldset,"CustomInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.createdDate.CreatedDate",FBEditor.view.form.desc.date.Date,{allowBlank:false,value:new Date(),_cls:"field-required",listeners:{change:function(){this.checkChangeCls()}},checkChangeCls:function(){this.mixins.fieldRequired.checkChangeCls.call(this)}},0,["form-desc-documentInfo-createdDate"],["component","box","field","textfield","pickerfield","datefield","desc-date","form-desc-documentInfo-createdDate"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true,"desc-date":true,"form-desc-documentInfo-createdDate":true},["widget.form-desc-documentInfo-createdDate"],[["fieldRequired",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.documentInfo.createdDate,"CreatedDate"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.editor.EditorController",Ext.app.ViewController,{onChange:function(){var c=this,a=c.getView(),b=FBEditor.getLocalStorage(),d=a.getValue();b.setItem("form-desc-documentInfo-editor",d)}},0,0,0,0,["controller.form.desc.documentInfo.editor"],0,[FBEditor.view.form.desc.documentInfo.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.editor.Editor",Ext.form.field.Text,{controller:"form.desc.documentInfo.editor",listeners:{change:"onChange"},initComponent:function(){var b=this,a=FBEditor.getLocalStorage(),c;c=a.getItem("form-desc-documentInfo-editor")||"";b.value=c;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)}},0,["form-desc-documentInfo-editor"],["component","box","field","textfield","form-desc-documentInfo-editor"],{component:true,box:true,field:true,textfield:true,"form-desc-documentInfo-editor":true},["widget.form-desc-documentInfo-editor"],0,[FBEditor.view.form.desc.documentInfo.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.isbn.IsbnController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;b=a.down("form-desc-isbn");b.fireEvent("loadData",d)}},0,0,0,0,["controller.form.desc.documentInfo.isbn"],0,[FBEditor.view.form.desc.documentInfo.isbn,"IsbnController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.isbn.Isbn",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-documentInfo-isbn",controller:"form.desc.documentInfo.isbn",flex:1,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"form-desc-isbn",fieldName:"document-info-isbn"}]},0,["form-desc-documentInfo-isbn"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-documentInfo-isbn"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-documentInfo-isbn":true},["widget.form-desc-documentInfo-isbn"],0,[FBEditor.view.form.desc.documentInfo.isbn,"Isbn"],0));(Ext.cmd.derive("FBEditor.view.form.desc.documentInfo.DocumentInfo",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-documentInfo",cls:"desc-fieldcontainer",translateText:{created:"Файл создан",date:"Дата",time:"Время",updated:"Последнее изменение",otherInfo:"Прочая информация",programUsed:"Программа",srcUrl:"URL",ocr:"OCR",editor:"Редактор",isbn:"ISBN"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldsetinner",title:a.translateText.created,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"form-desc-documentInfo-createdDate",name:"document-info-created-date",fieldLabel:a.translateText.date}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:110,keyEnterAsTab:true},items:[{xtype:"desc-field-time-required",name:"document-info-created-time",value:new Date(),format:"H:i:s",fieldLabel:a.translateText.time}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.updated,require:true,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:160,keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-updated-date",fieldLabel:a.translateText.date}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelAlign:"right",labelWidth:110,keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-updated-time",format:"H:i:s",fieldLabel:a.translateText.time}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.otherInfo,items:[{xtype:"desc-fieldcontainer",layout:"hbox",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{xtype:"textfield",anchor:"100%",labelAlign:"right",labelWidth:160,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"displayfield",name:"document-info-program-used",fieldLabel:a.translateText.programUsed,value:"FB3Editor"},{xtype:"form-desc-documentInfo-editor",name:"document-info-editor",fieldLabel:a.translateText.editor}]},{xtype:"fieldcontainer",width:50},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{xtype:"textfield",anchor:"100%",labelAlign:"right",labelWidth:110,cls:"field-optional",keyEnterAsTab:true},items:[{xtype:"textfieldclear",vtype:"url",name:"document-info-src-url",fieldLabel:a.translateText.srcUrl},{name:"document-info-ocr",fieldLabel:a.translateText.ocr}]}]}]},{xtype:"desc-fieldsetinner",title:a.translateText.isbn,items:[{xtype:"form-desc-documentInfo-isbn",fieldName:"document-info-isbn"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(j){var f=this,g=j,k,a,h,b,c;k=Ext.Date.format(f.down("[name=document-info-created-date]").getValue(),"Y-m-d");h=Ext.Date.format(f.down("[name=document-info-created-time]").getValue(),"H:i:s");k=k&&h?k+"T"+h:null;a=Ext.Date.format(new Date(),"Y-m-d");h=Ext.Date.format(new Date(),"H:i:s");a=a&&h?a+"T"+h:null;c=f.down("form-desc-documentInfo-isbn").getValues();b={_created:k,_updated:a,"_program-used":f.down("[name=document-info-program-used]").getValue(),"_src-url":f.down("[name=document-info-src-url]").getValue(),_ocr:f.down("[name=document-info-ocr]").getValue(),_editor:f.down("[name=document-info-editor]").getValue(),isbn:c};g["document-info"]=f.removeEmptyValues(b);return g}},0,["form-desc-documentInfo"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-documentInfo"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-documentInfo":true},["widget.form-desc-documentInfo"],0,[FBEditor.view.form.desc.documentInfo,"DocumentInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.DocumentInfo",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Информация о файле",xtypeChild:"documentInfo",require:true,autoExpand:true},0,["desc-fieldset-documentInfo"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-documentInfo"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-documentInfo":true},["widget.desc-fieldset-documentInfo"],0,[FBEditor.view.form.desc.fieldset,"DocumentInfo"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.CustomButton",Ext.Button,{text:"Создать вручную",margin:"0 0 0 165px",searchContainer:null,customContainer:null,handler:function(){var b=this,a=FBEditor.desc.Manager;a.getNewId({url:"https://hub.litres.ru/pages/machax_arts/",property:"arts",fn:b.setObjectId,scope:b});b.setNameFromSearchField();b.switchContainers()},switchContainers:function(f){var b=this,a=b.searchContainer,d=b.customContainer,c;c=f?true:false;d.setHidden(c);a.setHidden(!c)},setObjectId:function(c){var a=this,b=a.customContainer;b.updateData({"relations-object-id":c});b.down("[name=relations-object-id]").disableLink()},setNameFromSearchField:function(){var c=this,b=c.searchContainer,d=c.customContainer,a;a=b.down("[name=relations-object-search]").getValue();a=a?a.trim():"";d.updateData({"relations-object-title-main":a})}},0,["form-desc-relations-object-customBtn"],["component","box","button","form-desc-relations-object-customBtn"],{component:true,box:true,button:true,"form-desc-relations-object-customBtn":true},["widget.form-desc-relations-object-customBtn"],0,[FBEditor.view.form.desc.relations.object,"CustomButton"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.search.name.NameController",FBEditor.view.field.combosearch.ComboSearchController,{updateData:function(h){var g=this,b=g.getView(),c=FBEditor.desc.Manager,f,j,a;a=b.up("[name=plugin-fieldcontainerreplicator]");j={"relations-object-id":h.uuid,"relations-object-title-main":h.name?h.name:""};c.loadingProcess=true;a.updateData(j);c.loadingProcess=false;a.fireEvent("editable",false);f=b.up("desc-fieldcontainer").down("form-desc-relations-object-customBtn");f.switchContainers()}},0,0,0,0,["controller.form.desc.relations.object.search.name"],0,[FBEditor.view.form.desc.relations.object.search.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.search.name.Name",FBEditor.view.field.combosearch.ComboSearch,{controller:"form.desc.relations.object.search.name",displayField:"name",valueField:"name",listConfig:{cls:"boundlist-object"},tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item boundlist-search-item">','<div class="boundlist-search-item-name">{name}</div>','<div class="boundlist-search-item-sub"><tpl for="persons">{[xindex > 1 ? " / " : ""]}{title}</tpl></div>','<div class="boundlist-search-item-sub"><tpl for="series">{[xindex > 1 ? " / " : ""]}{name}</tpl></div>','<div class="boundlist-search-item-sub">{uuid}</div>','<div class="boundlist-search-item-sub">{id}</div>',"</div>","</tpl>"),getCreateStore:function(){var a;a=Ext.data.StoreManager.lookup("desc-relations-object");a=a||Ext.create("FBEditor.store.desc.relations.Object");return a},getParams:function(b){var a;if(/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/.test(b)){a={uuid:b}}else{if(/^[0-9]{2,}$/.test(b)){a={art:b}}else{a={q:b}}}return a}},0,["form-desc-relations-object-searchName"],["component","box","field","textfield","pickerfield","combobox","combo","combosearch","form-desc-relations-object-searchName"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,combosearch:true,"form-desc-relations-object-searchName":true},["widget.form-desc-relations-object-searchName"],0,[FBEditor.view.form.desc.relations.object.search.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.SearchContainer",FBEditor.view.form.desc.AbstractFieldContainer,{defaults:{width:465,labelWidth:160,labelAlign:"right"},customContainer:null,translateText:{id:"ID",search:"Поиск"},initComponent:function(){var a=this;a.hidden=!FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?true:a.hidden;a.items=[{xtype:"form-desc-relations-object-searchName",fieldLabel:a.translateText.search,name:"relations-object-search"},{xtype:"form-desc-relations-object-customBtn",cls:"form-desc-customBtn",width:300,searchContainer:a}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;b.customContainer=b.up("desc-fieldcontainer").down("form-desc-relations-object-container-custom");a=b.down("form-desc-relations-object-customBtn");a.customContainer=b.customContainer;FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)}},0,["form-desc-relations-object-container-search"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object-container-search"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object-container-search":true},["widget.form-desc-relations-object-container-search"],0,[FBEditor.view.form.desc.relations.object,"SearchContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.LinkStore",Ext.data.Store,{sorters:[{property:"name",direction:"ASC"}],fields:["value","name"],data:[{value:"preceding_edition",name:"Прошлое издание"},{value:"following_edition",name:"Следующее издание"},{value:"translated_from",name:"Переведено с издания"},{value:"translation",name:"Перевод"},{value:"compilation",name:"Сборник, включающий это произведение"},{value:"part",name:"Часть, включенная в произведение"},{value:"appendix",name:"Приложение"},{value:"appendix_to",name:"Эта книга - приложение к"},{value:"intersection",name:"Пересекается с"},{value:"same_subject",name:"Тот же объект"},{value:"alt_media",name:"Другой носитель"},{value:"sequel",name:"Продолжение"},{value:"prequel",name:"Приквел"},{value:"reissue",name:"Переиздание"},{value:"undef",name:"Не определено"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.relations.object,"LinkStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.Link",FBEditor.view.form.desc.field.combobox.required.Required,{queryMode:"local",displayField:"name",valueField:"value",fieldLabel:"Тип связи",name:"relations-object-link",allowBlank:false,editable:false,listConfig:{maxHeight:"auto"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.relations.object.LinkStore");b.store=a;FBEditor.view.form.desc.field.combobox.required.Required.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-object-link"],["component","box","field","textfield","pickerfield","combobox","combo","desc-field-combobox-required","form-desc-relations-object-link"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"desc-field-combobox-required":true,"form-desc-relations-object-link":true},["widget.form-desc-relations-object-link"],0,[FBEditor.view.form.desc.relations.object,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",link:"Тип связи",desc:"Написание",pageEditor:"Страница редактирования"},initComponent:function(){var a=this;a.hidden=FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?false:a.hidden;a.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:100,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:a.translateText.id,name:"relations-object-id"},{xtype:"form-desc-relations-object-link",cls:"field-required"},{fieldLabel:a.translateText.desc,name:"relations-object-description",cls:"field-optional",plugins:"fieldCleaner"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:"relations-object-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-object-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object-container-custom":true},["widget.form-desc-relations-object-container-custom"],0,[FBEditor.view.form.desc.relations.object,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.object.Object",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-relations-object",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"relations-object",initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"object",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},listeners:{resetContainer:function(){var b;b=this.down("form-desc-relations-object-customBtn");b.switchContainers()}},items:[{xtype:"desc-fieldcontainer",layout:"anchor",flex:1,items:[{xtype:"form-desc-relations-object-container-custom",prefixName:a.prefixName},{xtype:"form-desc-relations-object-container-search"}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var b=this,f=0,a=b.query("form-desc-relations-object-container-custom"),d=b.down("combosearch"),c=true;Ext.Array.each(a,function(g){if(g.isHidden()){f++;c=true}else{if(!g.isValid()){c=false;return false}}});if(c&&f===a.length){}return c},getValues:function(g){var c=this,b=c.items,f=g,a=null;b.each(function(d){var h;h={_id:d.down("[name=relations-object-id]").getValue(),_link:d.down("form-desc-relations-object-link").getValue()};h=c.removeEmptyValues(h);if(h&&h._id){h.title=d.down("[name=relations-object-title]").getValues();h.description=d.down("[name=relations-object-description]").getValue();h=c.removeEmptyValues(h);a=a||[];a.push(h)}});if(a){f["fb3-relations"]=f["fb3-relations"]||{};f["fb3-relations"].object=a}return f}},0,["form-desc-relations-object"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-object"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-object":true},["widget.form-desc-relations-object"],0,[FBEditor.view.form.desc.relations.object,"Object"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.RelationsObject",FBEditor.view.form.desc.fieldset.AbstractFieldset,{id:"desc-fieldset-relations-object",title:"Связанные объекты",xtypeChild:"relations-object"},0,["desc-fieldset-relations-object"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-relations-object"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-relations-object":true},["widget.desc-fieldset-relations-object"],0,[FBEditor.view.form.desc.fieldset,"RelationsObject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.CustomButton",Ext.Button,{text:"Создать вручную",margin:"0 0 0 165px",searchContainer:null,customContainer:null,handler:function(){var b=this,a=FBEditor.desc.Manager,c=b.searchContainer;a.getNewId({url:"https://hub.litres.ru/pages/machax_persons/",property:"persons",fn:b.setSubjectId,scope:b});b.setNamesFromSearchField();b.switchContainers();c.destroy()},switchContainers:function(f){var b=this,a=b.searchContainer,d=b.customContainer,c;c=f?true:false;d.setHidden(c);a.setHidden(!c)},setSubjectId:function(c){var a=this,b=a.customContainer;b.updateData({"relations-subject-id":c});b.down("[name=relations-subject-id]").disableLink()},setNamesFromSearchField:function(){var c=this,b=c.searchContainer,d=c.customContainer,f,a;a=b.down("[name=relations-subject-search]").getValue();a=a?a.trim():"";f=a.split(/[ ]+/,3);d.updateData({"relations-subject-last-name":f[0],"relations-subject-first-name":f[1]||"","relations-subject-middle-name":f[2]||""})}},0,["form-desc-relations-subject-customBtn"],["component","box","button","form-desc-relations-subject-customBtn"],{component:true,box:true,button:true,"form-desc-relations-subject-customBtn":true},["widget.form-desc-relations-subject-customBtn"],0,[FBEditor.view.form.desc.relations.subject,"CustomButton"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.SearchFieldController",Ext.app.ViewController,{onSelect:function(a){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchFieldController#onSelect()")},onAfterRender:function(){var c=this,a=c.getView(),d=a.getWindow(),b=a.getContainerItems();a.keyNav=new Ext.util.KeyNav({target:a.inputEl,scope:d,esc:function(){this.onEsc()}});b.on({scope:a,afterLoad:a.afterLoad})},onClick:function(f,b){var c=this,a=c.getView(),d=a.getWindow(),g;f.stopPropagation();g=a.getValue();if(g){if(!d.isShow){d.show()}}else{a.expandStorage()}},onChange:function(){var b=this,a=b.getView(),c=a.getWindow();c.clean();a.search()},getPlugin:function(){var c=this,a=c.getView(),b;b=a.up("[plugins]").getPlugin("fieldcontainerreplicator");return b}},0,0,0,0,["controller.form.desc.searchField"],0,[FBEditor.view.form.desc.searchField,"SearchFieldController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.searchField.SearchField",Ext.form.field.Text,{controller:"form.desc.searchField",checkChangeBuffer:200,plugins:[{ptype:"fieldCleaner"},{ptype:"searchField",style:"margin-left: 258px"}],keyEnterAsTab:true,listeners:{select:"onSelect",afterrender:"onAfterRender",change:"onChange",click:{element:"el",fn:"onClick"}},localStorageLimit:10,win:null,initComponent:function(){var a=this,b;b=a.createWindow();a.win=b;b.searchField=a;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)},destroy:function(){var a=this,b;b=a.getWindow();b.destroy();Ext.form.field.Text.prototype.destroy.apply(this,arguments)},createWindow:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#createWindow()")},search:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#search()")},getParams:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#getParams()")},updateData:function(a){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#updateData()")},getFirstSearch:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#getFirstSearch()")},getNextSearch:function(){throw Error("Необходимо определить метод FBEditor.view.form.desc.searchField.SearchField#getNextSearch()")},getWindow:function(){return this.win},getContainerItems:function(){var a=this,b=a.getWindow();return b.getContainerItems()},getStore:function(){var d=this,a=d.getWindow(),c,b;c=a.getContainerItems();b=c.store;return b},abortSearch:function(){var b=this,c=b.getWindow(),a;if(c){c.abort();a=b.getPlugin("searchField");a.hideLoader()}},checkEnterKey:function(d,c){var a=this,b=a.getWindow();if(c.getKey()===c.ENTER){b.close()}},expandStorage:function(){var b=this,c=b.getDataStorage(),a=b.getStore(),d=b.getWindow();if(c.length){d.clean();a.loadData(c);d.show()}},saveToStorage:function(c){var b=this,g=FBEditor.getLocalStorage(),d=b.getDataStorage(),a=[],f;d.splice(0,0,c);if(d.length>b.localStorageLimit){d.splice(b.localStorageLimit,d.length-b.localStorageLimit)}Ext.Array.each(d,function(j,h){if(j.id!==c.id||h==0){a.push(j)}});f=Ext.JSON.encode(a);g.setItem(b.name,f)},getDataStorage:function(){var a=this,c=FBEditor.getLocalStorage(),b;b=Ext.JSON.decode(c.getItem(a.name));b=b?b:[];return b},afterLoad:function(c){var b=this,d=b.getWindow(),a;a=b.getPlugin("searchField");if(c){a.hideLoader();d.show()}else{a.emptyLoader();d.close()}}},0,["form-desc-searchField"],["component","box","field","textfield","form-desc-searchField"],{component:true,box:true,field:true,textfield:true,"form-desc-searchField":true},["widget.form-desc-searchField"],0,[FBEditor.view.form.desc.searchField,"SearchField"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.NameController",FBEditor.view.form.desc.searchField.SearchFieldController,{onSelect:function(d){var c=this,a=c.getView(),g=a.getWindow(),b,h,f;b=c.getPlugin();h=b.getBtnAdd();b.addFields(h);f=a.getFirstSearch();f.focus();Ext.Object.each(d,function(j,k){d[j]=Ext.isString(k)?k.replace(/<[/]?b>/ig,""):k});a.updateData(d);g.close();a.saveToStorage(d)}},0,0,0,0,["controller.form.desc.relations.subject.search.name"],0,[FBEditor.view.form.desc.relations.subject.search.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.window.WindowController",FBEditor.view.form.desc.searchField.WindowController,{},0,0,0,0,["controller.form.desc.relations.subject.searchName.window"],0,[FBEditor.view.form.desc.relations.subject.search.name.window,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.window.Window",FBEditor.view.form.desc.searchField.Window,{controller:"form.desc.relations.subject.searchName.window",xtypeContainerItems:"container-desc-search-persons"},0,["form-desc-relations-subject-searchName-window"],["component","box","container","panel","form-desc-searchField-window","form-desc-relations-subject-searchName-window"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true,"form-desc-relations-subject-searchName-window":true},["widget.form-desc-relations-subject-searchName-window"],0,[FBEditor.view.form.desc.relations.subject.search.name.window,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.search.name.Name",FBEditor.view.form.desc.searchField.SearchField,{controller:"form.desc.relations.subject.search.name",createWindow:function(){var a=this,b;b=Ext.create({xtype:"form-desc-relations-subject-searchName-window",alignTarget:a.getId()});return b},search:function(){var a=this,b=a.getWindow(),c=a.getParams();if(c.last.length>1||c.first.length>1||c.middle.length>1){b.fireEvent("loadData",c)}else{a.abortSearch()}},getParams:function(){var d=this,g=d.getValue(),c,b,a,f;if(/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/.test(g)){f={uuid:g}}else{if(/^[0-9]{2,}$/.test(g)){f={person:g}}else{g=g.trim();c=/^(.*?)[ ]+(.?)\.(?:[ ]?(.?)\.)?$/i;b=/^(.?)\.(?:[ ]?(.?)\.)?[ ]+(.*?)$/i;if(c.test(g)){a=g.match(c);a={0:a[1],1:a[2],2:a[3]}}else{if(b.test(g)){a=g.match(b);a={0:a[3],1:a[1],2:a[2]}}else{a=g.split(/[ ]+/,3)}}f={last:a[0],first:a[1]?a[1]:"",middle:a[2]?a[2]:""}}}return f},updateData:function(g){var f=this,b=FBEditor.desc.Manager,c,h,a;a=f.up("[name=plugin-fieldcontainerreplicator]");h={"relations-subject-id":g.uuid,"relations-subject-id-view":g.uuid,"relations-subject-last-name":g.last_name?g.last_name:"","relations-subject-last-name-view":g.last_name?g.last_name:"","relations-subject-first-name":g.first_name?g.first_name:"","relations-subject-first-name-view":g.first_name?g.first_name:"","relations-subject-middle-name":g.middle_name?g.middle_name:"","relations-subject-middle-name-view":g.middle_name?g.middle_name:"","relations-subject-title-main":g.title?g.title:"","relations-subject-title-view-main":g.title?g.title:""};b.loadingProcess=true;a.updateData(h);b.loadingProcess=false;a.fireEvent("editable",false);c=f.up("desc-fieldcontainer").down("form-desc-relations-subject-customBtn");c.switchContainers();f.updateForm(a);f.up("form-desc-relations-subject-container-custom")},getFirstSearch:function(){var a=this,b;b=a.up("form-desc-relations-subject").down("form-desc-relations-subject-searchName");return b},getNextSearch:function(){var b=this,c,a;a=b.up("[plugins]").nextSibling();c=a.down("form-desc-relations-subject-searchName");return c},updateForm:function(b){var g=this;var c=b.down("form-desc-relations-subject-container-custom"),d=c.getComponent("view").show();d.show();c.getComponent("edit").hide();var a=b.down("form-desc-relations-subject-link").getValue();var f={author:"Автор",publisher:"Издатель",translator:"Переводчик",editor:"Редактор",illustrator:"Иллюстратор",compiler:"Составитель","maker-up":"Верстальщик",adapter:"Адаптация",dialogue:"Диалоги",conceptor:"Концепция",reviewer:"Отзыв",introduction:"Предисловие",afterword:"Послесловие",accompanying:"Аккомпаниаторы",quotations:"Цитаты",annotator:"Аннотация",associated:"Связывается с",copyright_holder:"Владелец прав",commentator:"Комментатор",consultant:"Консультант",corrector:"Корректор",scientific_advisor:"Научный советник",dubious_author:"Сомнительный автор",designer:"Дизайнер",recipient_of_letters:"Получатель писем",sponsor:"Спонсор",photographer:"Фотограф",narrator:"Чтец",rendering:"Пересказ",performer:"Исполнитель",maker:"Производитель",actor:"Актер",director:"Режиссер",producer:"Продюсер",composer:"Композитор",sound_engineer:"Звукорежиссер",screenwriter:"Сценарист",other:"Прочее",undef:"Не определено"};d.setTitle(f[a]+": "+b.down("[name=relations-subject-title-view-main]").getValue());b.getEl().select(".plugin-fieldcontainerreplicator-big-btn .x-btn").applyStyles("width:auto;height:auto;");b.getEl().select(".plugin-fieldcontainerreplicator-big-btn").removeCls("plugin-fieldcontainerreplicator-big-btn")}},0,["form-desc-relations-subject-searchName"],["component","box","field","textfield","form-desc-searchField","form-desc-relations-subject-searchName"],{component:true,box:true,field:true,textfield:true,"form-desc-searchField":true,"form-desc-relations-subject-searchName":true},["widget.form-desc-relations-subject-searchName"],0,[FBEditor.view.form.desc.relations.subject.search.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.SearchContainer",FBEditor.view.form.desc.AbstractFieldContainer,{defaults:{width:465,labelWidth:160,labelAlign:"right"},customContainer:null,translateText:{id:"ID",search:"Поиск"},initComponent:function(){var a=this;a.hidden=!FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?true:a.hidden;a.items=[{xtype:"form-desc-relations-subject-searchName",fieldLabel:a.translateText.search,name:"relations-subject-search"},{xtype:"form-desc-relations-subject-customBtn",cls:"form-desc-customBtn",width:300,searchContainer:a}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;b.customContainer=b.up("desc-fieldcontainer").down("form-desc-relations-subject-container-custom");a=b.down("form-desc-relations-subject-customBtn");a.customContainer=b.customContainer;FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)}},0,["form-desc-relations-subject-container-search"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-container-search"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-container-search":true},["widget.form-desc-relations-subject-container-search"],0,[FBEditor.view.form.desc.relations.subject,"SearchContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.alt.AltController",FBEditor.view.form.desc.AbstractFieldController,{onLoadData:function(d){var c=this,a=c.getView(),b;Ext.Object.each(d,function(f,h){var g;b=a.getPlugin("fieldcontainerreplicator");g=a.down("textfield");if(g){g.setValue(h)}if(d[parseInt(f)+1]){b.addFields();a=a.nextSibling()}})}},0,0,0,0,["controller.form.desc.title.alt"],0,[FBEditor.view.form.desc.title.alt,"AltController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.alt.Alt",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.title.alt",layout:"hbox",cls:"form-desc-title-alt",defaults:{anchor:"100%",flex:1,labelWidth:160,labelAlign:"right"},fieldLabelAlt:"",fieldName:"",initComponent:function(){var c=this,b=c.fieldName+"-alt",d,a;a={ptype:"fieldcontainerreplicator",groupName:b,btnStyle:{margin:"0 0 0 2px"}};Ext.applyIf(c.plugins,a);d={xtype:"textfield",name:b,fieldLabel:c.fieldLabelAlt,cls:"field-optional",keyEnterAsTab:true,plugins:{ptype:"fieldCleaner"},listeners:{loadData:function(f){c.fireEvent("loadData",f)},resize:function(f,j){var g,h;g=f.labelEl;h=g.first();f._label=f._label?f._label:{width:null,fontSize:null};if(j<300){f._label.width=f._label.width||g.getWidth();f._label.fontSize=f._label.fontSize||h.getStyle("fontSize");g.setWidth(100);h.setWidth(100);h.setStyle("fontSize","11px")}else{if(f._label.width){g.setWidth(f._label.width);h.setWidth(f._label.width);h.setStyle("fontSize",f._label.fontSize)}}}}};Ext.apply(d,c.fieldConfig);c.items=[d];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(){var c=this,b=c.fieldName+"-alt",d=[],a;a=c.ownerCt.query("textfield[name="+b+"]");Ext.each(a,function(f){if(f.getValue()){d.push(f.getValue())}});return d}},0,["form-desc-title-alt"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title-alt"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title-alt":true},["widget.form-desc-title-alt"],0,[FBEditor.view.form.desc.title.alt,"Alt"],0));(Ext.cmd.derive("FBEditor.view.form.desc.title.Title",FBEditor.view.form.desc.AbstractFieldContainer,{cls:"form-desc-title",checkChangeBuffer:200,enableSub:true,enableAlt:true,mainConfig:{},subConfig:{},altConfig:{},translateText:{main:"Основное название",sub:"Подзаголовок",alt:"Альтернативное название"},initComponent:function(){var f=this,c=f.name,b=[],a,d,g;a={xtype:"desc-field-text-required",checkChangeBuffer:f.checkChangeBuffer,name:c+"-main",fieldLabel:f.translateText.main,keyEnterAsTab:true,plugins:{ptype:"fieldCleaner"},listeners:{change:function(k,j,h){this.ownerCt.fireEvent("changeTitle",k,j,h)},blur:function(h){this.ownerCt.fireEvent("blurTitle",h)},focus:function(h){this.ownerCt.fireEvent("focusTitle",h)}}};Ext.apply(a,f.mainConfig);b.push(a);if(f.enableSub){d={xtype:"textfield",name:c+"-sub",cls:"field-optional",keyEnterAsTab:true,fieldLabel:f.translateText.sub,plugins:{ptype:"fieldCleaner"}};b.push(d);Ext.apply(d,f.subConfig)}if(f.enableAlt){g={xtype:"form-desc-title-alt",fieldName:c,fieldLabelAlt:f.translateText.alt};b.push(g);Ext.apply(g,f.altConfig)}f.items=b;FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getMain:function(){var c=this,b=c.name,a;a=c.main||c.down("[name="+b+"-main]");return a},getValues:function(j){var f=this,g=j,b=f.name,a,c,h;c=f.down("[name="+b+"-sub]");h=f.down("form-desc-title-alt");a={main:f.getMain().getValue(),sub:c?c.getValue():null,alt:h?h.getValues():null};a=f.removeEmptyValues(a);if(j){g[b]=a}else{g=a}return g}},0,["form-desc-title"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true},["widget.form-desc-title"],0,[FBEditor.view.form.desc.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.title.Title",FBEditor.view.form.desc.title.Title,{layout:"anchor",enableSub:false,defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"},autoFilled:true,titleMain:null,lastName:null,middleName:null,firstName:null,afterRender:function(){var b=this,a;FBEditor.view.form.desc.title.Title.prototype.afterRender.apply(this,arguments);a=b.getTitleMain();a.on({change:function(){b.autoFilled=false}})},autoValue:function(){var b=this,d=b.getNames(),a,c;if(b.autoFilled){c=d.first?d.first+" ":"";c+=d.middle?d.middle+" ":"";c+=d.last?d.last:"";c=c.trim();a=b.getTitleMain();a.setRawValue(c);a.checkChangeCls()}},getNames:function(){var a=this,b={};b.last=a.getLastName().getValue();b.middle=a.getMiddleName().getValue();b.first=a.getFirstName().getValue();return b},getLastName:function(){var b=this,a;a=b.lastName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-last-name"]');return a},getMiddleName:function(){var b=this,a;a=b.middleName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-middle-name"]');return a},getFirstName:function(){var b=this,a;a=b.firstName||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down('[name="relations-subject-first-name"]');return a},getTitleMain:function(){var b=this,a;a=b.titleMain||b.down('[name="'+b.name+'-main"]');return a}},0,["form-desc-relations-subject-title"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title","form-desc-relations-subject-title"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true,"form-desc-relations-subject-title":true},["widget.form-desc-relations-subject-title"],0,[FBEditor.view.form.desc.relations.subject.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.NameController",Ext.app.ViewController,{onChange:function(){var d=this,b=d.getView(),h=FBEditor.desc.Manager.loadingProcess,a,c,g,f;if(!h){a=b.getResultContainer();c=a.getReferenceCmp();c.fireEvent("abortSearch");c.fireEvent("cleanResultContainer");a.setReferenceCmp(b);g=b.getTitle();g.autoValue();g=b.getTitle();f=g.getNames();d.searchName(f)}},onFocus:function(){var c=this,b=c.getView(),a=b.getResultContainer(),d;d=a.getPanelProps();d.fireEvent("showContainer")},onCleanResultContainer:function(){var c=this,b=c.getView(),a=b.getResultContainer();a.cleanContainer()},onAbortSearch:function(){var d=this,b=d.getView(),a,c;a=b.getResultContainer();a.abort();c=b.getPlugin("searchField");c.hideLoader()},searchName:function(f){var d=this,b=d.getView(),c,a;if(f.last.length>1||f.first.length>1||f.middle.length>1){c=b.getPlugin("searchField");c.showLoader();a=b.getResultContainer();a.fireEvent("loadData",f);a.setStorageNames(f)}}},0,0,0,0,["controller.form.desc.relations.subject.name"],0,[FBEditor.view.form.desc.relations.subject.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.Name",Ext.form.field.Text,{controller:"form.desc.relations.subject.name",checkChangeBuffer:200,plugins:[{ptype:"searchField",style:"right: 24px"},{ptype:"fieldCleaner"}],titleMain:null,listeners:{change:"onChange",focus:"onFocus",cleanResultContainer:"onCleanResultContainer",abortSearch:"onAbortSearch"},getTitle:function(){var b=this,a;a=b.titleMain||b.up("desc-fieldcontainer").up("desc-fieldcontainer").down("form-desc-relations-subject-title");return a},getResultContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-persons")},getArtsContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-arts")},afterLoad:function(c){var b=this,a;a=b.getPlugin("searchField");if(c){a.hideLoader()}else{a.emptyLoader()}}},0,["form-desc-relations-subject-name"],["component","box","field","textfield","form-desc-relations-subject-name"],{component:true,box:true,field:true,textfield:true,"form-desc-relations-subject-name":true},["widget.form-desc-relations-subject-name"],0,[FBEditor.view.form.desc.relations.subject.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.name.main.Main",FBEditor.view.form.desc.relations.subject.name.Name,{allowBlank:false,_cls:"field-required",listeners:{dirtychange:function(){this.checkChangeCls()}},afterRender:function(){var a=this;FBEditor.view.form.desc.relations.subject.name.Name.prototype.afterRender.apply(this,arguments);a.checkChangeCls()},checkChangeCls:function(){this.mixins.required.checkChangeCls.call(this)}},0,["form-desc-relations-subject-name-main"],["component","box","field","textfield","form-desc-relations-subject-name","form-desc-relations-subject-name-main"],{component:true,box:true,field:true,textfield:true,"form-desc-relations-subject-name":true,"form-desc-relations-subject-name-main":true},["widget.form-desc-relations-subject-name-main"],[["required",FBEditor.view.form.desc.field.Required]],[FBEditor.view.form.desc.relations.subject.name.main,"Main"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkController",FBEditor.view.form.desc.AbstractFieldController,{onResetFields:function(){var c=this,a=c.getView(),b=FBEditor.view.form.desc.relations.subject.radio.Radio;FBEditor.view.form.desc.AbstractFieldController.prototype.onResetFields.apply(this,arguments)},onChangeList:function(){var c=this,a=c.getView(),b=a.getRadio();b=b.child("[reference=linkRadioOther]");b.setValue(true)}},0,0,0,0,["controller.form.desc.relations.subject.link"],0,[FBEditor.view.form.desc.relations.subject,"LinkController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.radio.RadioController",Ext.app.ViewController,{onLoadData:function(c){var b=this,a=b.getView();a.setValue(c)},onChange:function(b,c,j){var h=this,a=0,k,d,f,g;d=Ext.Object.getValues(c)[0];if(d==="other-list"){k=b.up("form-desc-relations-subject-link").down("form-desc-relations-subject-link-list").getValue();if(!k){b.setValue(j)}}else{if(d==="publisher"){f=Ext.getCmp("form-desc-relations-subject").query("[name=relations-subject-percent]");Ext.Array.each(f,function(l){a+=l.getValue()});if(!a){g=b.up("form-desc-relations-subject-container-custom").down("[name=relations-subject-percent]");g.setValue(100)}}}}},0,0,0,0,["controller.form.desc.relations.subject.link.radio"],0,[FBEditor.view.form.desc.relations.subject.radio,"RadioController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.radio.Radio",Ext.form.RadioGroup,{controller:"form.desc.relations.subject.link.radio",listeners:{change:"onChange",loadData:"onLoadData"},statics:{numberGroup:0},allowBlank:false,defaults:{keyEnterAsTab:true},translateText:{author:"Автор",publisher:"Издатель",translator:"Переводчик"},initComponent:function(){var a=this,b=a.self.numberGroup;a.name="relations-subject-link-radio-"+b;a.items=[{name:"rel-subject-link-"+b,inputValue:"author",boxLabel:a.translateText.author,checked:true,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"translator",boxLabel:a.translateText.translator,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"publisher",boxLabel:a.translateText.publisher,margin:"0 20 0 0"},{name:"rel-subject-link-"+b,inputValue:"other-list",reference:"linkRadioOther"}];b++;a.self.numberGroup=b;Ext.form.RadioGroup.prototype.initComponent.apply(this,arguments)}},0,["relations-subject-link-radio"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup","relations-subject-link-radio"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true,"relations-subject-link-radio":true},["widget.relations-subject-link-radio"],0,[FBEditor.view.form.desc.relations.subject.radio,"Radio"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkStore",Ext.data.Store,{sorters:[{property:"name",direction:"ASC"}],fields:["value","name"],data:[{value:"editor",name:"Редактор"},{value:"illustrator",name:"Иллюстратор"},{value:"compiler",name:"Составитель"},{value:"maker-up",name:"Верстальщик"},{value:"adapter",name:"Адаптация"},{value:"dialogue",name:"Диалоги"},{value:"conceptor",name:"Концепция"},{value:"reviewer",name:"Отзыв"},{value:"introduction",name:"Предисловие"},{value:"afterword",name:"Послесловие"},{value:"accompanying",name:"Аккомпаниаторы"},{value:"quotations",name:"Цитаты"},{value:"annotator",name:"Аннотация"},{value:"associated",name:"Связывается с"},{value:"copyright_holder",name:"Владелец прав"},{value:"commentator",name:"Комментатор"},{value:"consultant",name:"Консультант"},{value:"corrector",name:"Корректор"},{value:"scientific_advisor",name:"Научный советник"},{value:"dubious_author",name:"Сомнительный автор"},{value:"designer",name:"Дизайнер"},{value:"recipient_of_letters",name:"Получатель писем"},{value:"sponsor",name:"Спонсор"},{value:"photographer",name:"Фотограф"},{value:"narrator",name:"Чтец"},{value:"rendering",name:"Пересказ"},{value:"performer",name:"Исполнитель"},{value:"maker",name:"Производитель"},{value:"actor",name:"Актер"},{value:"director",name:"Режиссер"},{value:"producer",name:"Продюсер"},{value:"composer",name:"Композитор"},{value:"sound_engineer",name:"Звукорежиссер"},{value:"screenwriter",name:"Сценарист"},{value:"other",name:"Прочее"},{value:"undef",name:"Не определено"}]},0,0,0,0,0,0,[FBEditor.view.form.desc.relations.subject,"LinkStore"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.LinkList",Ext.form.field.ComboBox,{name:"relations-subject-link-list",listeners:{change:function(){this.ownerCt.fireEvent("changeList")}},queryMode:"local",displayField:"name",valueField:"value",editable:false,forceSelection:true,listConfig:{maxHeight:"auto"},keyEnterAsTab:true,initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.form.desc.relations.subject.LinkStore");b.store=a;Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-subject-link-list"],["component","box","field","textfield","pickerfield","combobox","combo","form-desc-relations-subject-link-list"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"form-desc-relations-subject-link-list":true},["widget.form-desc-relations-subject-link-list"],0,[FBEditor.view.form.desc.relations.subject,"LinkList"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.Link",FBEditor.view.form.desc.AbstractFieldContainer,{controller:"form.desc.relations.subject.link",cls:"form-desc-relations-subject-link",listeners:{resetFields:"onResetFields",loadData:"onLoadData",changeList:"onChangeList"},layout:"hbox",radio:null,list:null,translateText:{label:"Тип связи"},initComponent:function(){var a=this;a.fieldLabel=a.translateText.label;a.items=[{xtype:"relations-subject-link-radio"},{xtype:"form-desc-relations-subject-link-list",flex:1,margin:"0 0 0 10"}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValue:function(){var c=this,a=c.getRadio(),b,f,d;b=a.getChecked();d=b[0]?b[0].getGroupValue():null;f=c.down("form-desc-relations-subject-link-list");d=d==="other-list"?f.getValue():d;return d},getList:function(){var a=this,b;b=a.list||a.down("form-desc-relations-subject-link-list");a.list=b;return b},getRadio:function(){var b=this,a;a=b.radio||b.down("relations-subject-link-radio");b.radio=a;return a}},0,["form-desc-relations-subject-link"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-link"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-link":true},["widget.form-desc-relations-subject-link"],0,[FBEditor.view.form.desc.relations.subject,"Link"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",firstName:"Имя",middleName:"Отчество (второе имя)",lastName:"Фамилия",titleMain:"Стандартное написание",titleAlt:"Альтернативное написание",percent:"Процент владения",pageEditor:"Страница редактирования"},initComponent:function(){var a=this;a.hidden=FBEditor.accessHub;a.hidden=FBEditor.desc.Manager.loadingProcess?false:a.hidden;a.items=[{itemId:"view",xtype:"desc-fieldsetinner",title:"",labelWidth:160,hidden:true,layout:"container",items:[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:a.translateText.id,name:"relations-subject-id-view"},{xtype:"form-desc-relations-subject-name-main",fieldLabel:a.translateText.lastName,name:"relations-subject-last-name-view"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.firstName,name:"relations-subject-first-name-view",cls:"field-optional"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.middleName,name:"relations-subject-middle-name-view",cls:"field-optional"},{xtype:"numberfield",fieldLabel:a.translateText.percent,name:"relations-subject-percent-view",hideTrigger:true,minValue:0,maxValue:100,autoStripChars:true,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"hbox",items:[{xtype:"form-desc-relations-subject-title",name:"relations-subject-title-view",translateText:{main:a.translateText.titleMain,alt:a.translateText.titleAlt}}]}]}]},{itemId:"edit",xtype:"desc-fieldcontainer",hidden:false,layout:"container",items:[{xtype:"desc-fieldcontainer",hidden:false,layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:a.translateText.id,name:"relations-subject-id"},{xtype:"form-desc-relations-subject-name-main",fieldLabel:a.translateText.lastName,name:"relations-subject-last-name"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.firstName,name:"relations-subject-first-name",cls:"field-optional"},{xtype:"form-desc-relations-subject-name",fieldLabel:a.translateText.middleName,name:"relations-subject-middle-name",cls:"field-optional"},{xtype:"numberfield",fieldLabel:a.translateText.percent,name:"relations-subject-percent",hideTrigger:true,minValue:0,maxValue:100,autoStripChars:true,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-relations-subject-title",name:"relations-subject-title",translateText:{main:a.translateText.titleMain,alt:a.translateText.titleAlt}}]}]},{xtype:"form-desc-relations-subject-link",labelWidth:160,labelAlign:"right"}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-relations-subject-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject-container-custom":true},["widget.form-desc-relations-subject-container-custom"],0,[FBEditor.view.form.desc.relations.subject,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.relations.subject.Subject",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-relations-subject",name:"form-desc-plugin-fieldcontainerreplicator",prefixName:"relations-subject",translateText:{error:"Необходимо заполнить хотя бы одну персону"},initComponent:function(){var a=this;a.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"hbox",plugins:{ptype:"fieldcontainerreplicator",groupName:"subject",btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"},alwaysInsertFirst:true},listeners:{resetContainer:function(){var b;b=this.down("form-desc-relations-subject-customBtn");if(b){b.switchContainers()}}},items:[{xtype:"desc-fieldcontainer",layout:"anchor",flex:1,items:[{xtype:"form-desc-relations-subject-container-custom",prefixName:a.prefixName},{xtype:"form-desc-relations-subject-container-search"}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},isValid:function(){var d=this,g=0,b=d.query("form-desc-relations-subject-container-custom"),a=d.down("form-desc-relations-subject-searchName"),f=true,c=FBEditor.desc.Manager;Ext.Array.each(b,function(h){if(h.isHidden()){g++;f=true}else{if(!h.isValid()){f=false;return false}}});if(f&&g===b.length){f=false;a.markInvalid(d.translateText.error);c.fieldsError.push(a)}return f},getValues:function(g){var c=this,b=c.items,f=g,a=null;b.each(function(d){var h;h={_id:d.down("[name=relations-subject-id]").getValue(),_link:d.down("form-desc-relations-subject-link").getValue(),_percent:d.down("[name=relations-subject-percent]").getValue(),title:d.down("[name=relations-subject-title]").getValues(),"first-name":d.down("[name=relations-subject-first-name]").getValue(),"middle-name":d.down("[name=relations-subject-middle-name]").getValue(),"last-name":d.down("[name=relations-subject-last-name]").getValue()};h=c.removeEmptyValues(h);if(h&&h._id){a=a||[];a.push(h)}});f["fb3-relations"]=f["fb3-relations"]||{};f["fb3-relations"].subject=a;return f}},0,["form-desc-relations-subject"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-relations-subject"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-relations-subject":true},["widget.form-desc-relations-subject"],0,[FBEditor.view.form.desc.relations.subject,"Subject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.RelationsSubject",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Связанные персоны (автор, переводчик и т.д.)",xtypeChild:"relations-subject",require:true},0,["desc-fieldset-relations-subject"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-relations-subject"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-relations-subject":true},["widget.desc-fieldset-relations-subject"],0,[FBEditor.view.form.desc.fieldset,"RelationsSubject"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.CustomContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",number:"Номер"},initComponent:function(){var b=this,a=b.prefixName;b.hidden=FBEditor.accessHub;b.hidden=FBEditor.desc.Manager.loadingProcess?false:b.hidden;b.items=[{xtype:"desc-fieldcontainer",layout:"hbox",cls:"block-container",items:[{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",defaults:{anchor:"100%",labelWidth:80,labelAlign:"right",xtype:"textfield",keyEnterAsTab:true},items:[{xtype:"form-desc-field-link-uuid",fieldLabel:b.translateText.id,name:a+"-id"},{xtype:"numberfield",name:a+"-number",fieldLabel:b.translateText.number,cls:"field-optional"}]},{xtype:"fieldcontainer",width:10},{xtype:"desc-fieldcontainer",flex:1,layout:"anchor",items:[{xtype:"form-desc-title",name:a+"-title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)}},0,["form-desc-sequence-container-custom"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence-container-custom"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence-container-custom":true},["widget.form-desc-sequence-container-custom"],0,[FBEditor.view.form.desc.sequence,"CustomContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.CustomButton",Ext.Button,{text:"Создать вручную",margin:"0 0 0 165px",searchContainer:null,customContainer:null,handler:function(){var b=this,a=FBEditor.desc.Manager;a.getNewId({url:"https://hub.litres.ru/pages/machax_sequences/",property:"series",fn:b.setSequenceId,scope:b});b.setNameFromSearchField();b.switchContainers()},switchContainers:function(f){var b=this,d,a,c;a=b.searchContainer;c=b.customContainer;d=f?true:false;c.setHidden(d);a.setHidden(!d)},setSequenceId:function(f){var b=this,a=b.prefixName,d={},c=b.customContainer;d[a+"-id"]=f;c.updateData(d);c.down("[name=sequence-id]").disableLink()},setNameFromSearchField:function(){var d=this,a=d.prefixName,g={},c=d.searchContainer,f=d.customContainer,b;b=c.down("[name="+a+"-search]").getValue();b=b?b.trim():"";g[a+"-title-main"]=b;f.updateData(g)}},0,["form-desc-sequence-customBtn"],["component","box","button","form-desc-sequence-customBtn"],{component:true,box:true,button:true,"form-desc-sequence-customBtn":true},["widget.form-desc-sequence-customBtn"],0,[FBEditor.view.form.desc.sequence,"CustomButton"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.NameController",FBEditor.view.form.desc.searchField.SearchFieldController,{onSelect:function(d){var c=this,a=c.getView(),g=a.getWindow(),b,h,f;b=c.getPlugin();h=b.getBtnAdd();b.addFields(h);f=a.getNextSearch();if(f){f.focus()}Ext.Object.each(d,function(j,k){d[j]=Ext.isString(k)?k.replace(/<[/]?b>/ig,""):k});a.updateData(d);g.close();a.saveToStorage(d)}},0,0,0,0,["controller.form.desc.sequence.search.name"],0,[FBEditor.view.form.desc.sequence.search.name,"NameController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.window.WindowController",FBEditor.view.form.desc.searchField.WindowController,{},0,0,0,0,["controller.form.desc.sequence.searchName.window"],0,[FBEditor.view.form.desc.sequence.search.name.window,"WindowController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.window.Window",FBEditor.view.form.desc.searchField.Window,{controller:"form.desc.sequence.searchName.window",width:470,xtypeContainerItems:"container-desc-search-sequence"},0,["form-desc-sequence-searchName-window"],["component","box","container","panel","form-desc-searchField-window","form-desc-sequence-searchName-window"],{component:true,box:true,container:true,panel:true,"form-desc-searchField-window":true,"form-desc-sequence-searchName-window":true},["widget.form-desc-sequence-searchName-window"],0,[FBEditor.view.form.desc.sequence.search.name.window,"Window"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.search.name.Name",FBEditor.view.form.desc.searchField.SearchField,{controller:"form.desc.sequence.search.name",createWindow:function(){var a=this,b;b=Ext.create({xtype:"form-desc-sequence-searchName-window",alignTarget:a.getId()});return b},search:function(){var a=this,d=a.getValue(),b=a.getWindow(),c=a.getParams();if(d.length>1){b.fireEvent("loadData",c)}else{a.abortSearch()}},getParams:function(){var a=this,c=a.getValue(),b;if(/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/.test(c)){b={uuid:c}}else{if(/^[0-9]{2,}$/.test(c)){b={series:c}}else{b={q:c}}}return b},updateData:function(g){var f=this,b=FBEditor.desc.Manager,c,h,a;a=f.up("[name=plugin-fieldcontainerreplicator]");h={"sequence-id":g.uuid,"sequence-title-main":g.name?g.name:""};b.loadingProcess=true;a.updateData(h);b.loadingProcess=false;a.fireEvent("editable",false);a.down("numberfield").setEditable(true);c=f.up("desc-fieldcontainer").down("form-desc-sequence-customBtn");c.switchContainers()},getFirstSearch:function(){var a=this,b;b=a.up("form-desc-sequence").down("form-desc-sequence-searchName");return b},getNextSearch:function(){var b=this,c,a;a=b.up("[plugins]").nextSibling();c=a?a.down("form-desc-sequence-searchName"):null;return c}},0,["form-desc-sequence-searchName"],["component","box","field","textfield","form-desc-searchField","form-desc-sequence-searchName"],{component:true,box:true,field:true,textfield:true,"form-desc-searchField":true,"form-desc-sequence-searchName":true},["widget.form-desc-sequence-searchName"],0,[FBEditor.view.form.desc.sequence.search.name,"Name"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.SearchContainer",FBEditor.view.form.desc.AbstractFieldContainer,{layout:"anchor",flex:1,defaults:{width:465,labelWidth:160,labelAlign:"right"},customContainer:null,translateText:{id:"ID",search:"Поиск"},initComponent:function(){var b=this,a=b.prefixName;b.hidden=!FBEditor.accessHub;b.hidden=FBEditor.desc.Manager.loadingProcess?true:b.hidden;b.items=[{xtype:"form-desc-sequence-searchName",fieldLabel:b.translateText.search,name:a+"-search"},{xtype:"form-desc-sequence-customBtn",cls:"form-desc-customBtn",width:300,searchContainer:b,prefixName:a}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a;b.customContainer=b.up("desc-fieldcontainer").down("form-desc-sequence-container-custom");a=b.down("form-desc-sequence-customBtn");a.customContainer=b.customContainer;FBEditor.view.form.desc.AbstractFieldContainer.prototype.afterRender.apply(this,arguments)}},0,["form-desc-sequence-container-search"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence-container-search"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence-container-search":true},["widget.form-desc-sequence-container-search"],0,[FBEditor.view.form.desc.sequence,"SearchContainer"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.SequenceController",FBEditor.view.form.desc.AbstractFieldController,{onRemoveFields:function(a){var c,b;if(a.getPlugin){c=a.getPlugin("fieldcontainerreplicator");b=c.getBtnPut();b.enable()}},onPutFields:function(a,d){var c=a.getPlugin("fieldcontainerreplicator"),b;d.disable();b=c.getBtnAdd();b.ownerCt.remove(b)},onLoadData:function(d){var c=this,a=c.getView(),b;if(d){d=d[0]?d:{0:d};b=c.getPluginContainerReplicator(a);c.setValues(d,b)}},onPutData:function(d,a){var c=this,b;d=d[0]?d:{0:d};b=a.getPlugin("fieldcontainerreplicator");c.setValues(d,b)},setValues:function(d,a){var b=a.getCmp(),c=a;Ext.Object.each(d,function(g,h){var j,f;j=b.query("[name=sequence-id]")[0];j.setValue(h.id);j=b.query("[name=sequence-number]")[0];j.setValue(h.number?h.number:"");j=b.query("[name=sequence-title-main]")[0];j.setValue(h.title.main);j=b.query("[name=sequence-title-sub]")[0];j.setValue(h.title.sub?h.title.sub:"");if(h.title.alt){j=b.query("[name=sequence-title-alt]")[0];j.fireEvent("loadData",h.title.alt)}if(h.sequence){f=c.putFields();f.fireEvent("putData",h.sequence)}if(d[parseInt(g)+1]){c.addFields();b=b.nextSibling();c=b.getPlugin("fieldcontainerreplicator")}})}},0,0,0,0,["controller.form.desc.sequence"],0,[FBEditor.view.form.desc.sequence,"SequenceController"],0));(Ext.cmd.derive("FBEditor.view.form.desc.sequence.Sequence",FBEditor.view.form.desc.AbstractFieldContainer,{id:"form-desc-sequence",controller:"form.desc.sequence",name:"form-desc-plugin-fieldcontainerreplicator",layout:"anchor",listeners:{accessHub:"onAccessHub",resetFields:"onResetFields",loadData:"onLoadData",putData:"onPutData",putFields:"onPutFields",removeFields:"onRemoveFields"},prefixName:"sequence",translateText:{id:"ID",idError:"По шаблону [0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}. Например: 0dad1004-1430-102c-96f3-af3a14b75ca4",number:"Номер"},initComponent:function(){var b=this,a=b.prefixName;b.items=[{xtype:"desc-fieldcontainer",cls:"desc-fieldcontainer",layout:"anchor",anchor:"100%",plugins:{ptype:"fieldcontainerreplicator",groupName:a,btnPos:"end",btnCls:"plugin-fieldcontainerreplicator-big-btn",enableBtnPut:true,btnStyle:{margin:"0 0 0 5px",width:"40px",height:"65px"}},listeners:{putData:function(c){b.fireEvent("putData",c,this)},putFields:function(c){b.fireEvent("putFields",this,c)},removeFields:function(){b.fireEvent("removeFields",this)},resetContainer:function(){var c;c=this.down("form-desc-sequence-customBtn");c.switchContainers()}},getValues:function(){var f=this,d=f.items.getAt(1),c;c={_id:f.down("[name="+a+"-id]").getValue(),_number:f.down("[name="+a+"-number]").getValue(),title:f.down("[name="+a+"-title]").getValues()};if(d){c[a]=d.getValues()}c=f.removeEmptyValues(c);return c},items:[{xtype:"desc-fieldcontainer",layout:"hbox",anchor:"100%",defaults:{anchor:"100%"},items:[{xtype:"form-desc-sequence-container-custom",prefixName:b.prefixName},{xtype:"form-desc-sequence-container-search",prefixName:b.prefixName}]}]}];FBEditor.view.form.desc.AbstractFieldContainer.prototype.initComponent.apply(this,arguments)},getValues:function(h){var f=this,a=f.prefixName,g=h||null,c=f.items,b=null;c.each(function(d){var j;j=d.getValues();if(j){b=b||[];b.push(j)}});if(b){g=g||{};g[a]=b}return g}},0,["form-desc-sequence"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-sequence"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-sequence":true},["widget.form-desc-sequence"],0,[FBEditor.view.form.desc.sequence,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Sequence",FBEditor.view.form.desc.fieldset.AbstractFieldset,{title:"Серия",xtypeChild:"sequence",require:true},0,["desc-fieldset-sequence"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-sequence"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-sequence":true},["widget.desc-fieldset-sequence"],0,[FBEditor.view.form.desc.fieldset,"Sequence"],0));(Ext.cmd.derive("FBEditor.view.form.desc.titleArt.TitleArtController",FBEditor.view.form.desc.AbstractFieldController,{onChangeTitle:function(){var c=this,a=c.getView(),d=FBEditor.desc.Manager.loadingProcess,b=a.getMain().getValue();if(!d){c.abortSearch();c.onCleanResultContainer();c.searchName(b)}},onFocusTitle:function(){var c=this,b=c.getView(),a=b.getResultContainer(),d;d=a.getPanelProps();d.fireEvent("showContainer")},onBlurTitle:function(){},onCleanResultContainer:function(){var c=this,b=c.getView(),a=b.getResultContainer();a.cleanContainer()},searchName:function(d){var g=this,b=g.getView(),c=b.getMain(),f,a,h;if(d.length>1){f=c.getPlugin("searchField");f.showLoader();a=b.getResultContainer();h={q:d};a.fireEvent("loadData",h);a.setStorageNames(h)}},abortSearch:function(){var f=this,b=f.getView(),c=b.getMain(),d,a;a=b.getResultContainer();a.abort();d=c.getPlugin("searchField");d.hideLoader()}},0,0,0,0,["controller.form.desc.titleArt"],0,[FBEditor.view.form.desc.titleArt,"TitleArtController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.ContainerController",Ext.app.ViewController,{onLoadData:function(f){var c=this,a=c.getView(),d=a.getPanelProps(),b;if(!a.isVisible()){d.fireEvent("showContainer",a)}b=a.getContainerItems();b.params=Ext.clone(f);b.fireEvent("loadData",f)}},0,0,0,0,["controller.props.desc.search.container"],0,[FBEditor.view.panel.main.props.desc.search,"ContainerController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.Container",Ext.Container,{controller:"props.desc.search.container",hidden:true,listeners:{loadData:"onLoadData"},xtypeContainerItems:"",containerItems:null,_cacheEvents:{},initComponent:function(){var a=this;a.items=[{xtype:a.xtypeContainerItems}];Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,d=FBEditor.getBridgeWindow(),a=d.FBEditor.desc.Manager,c=b.getStorageNames();if(c){b.fireEvent("loadData",c)}if(!a.cleanResultContainer[b.getXType()]){b.cleanContainer()}a.cleanResultContainer[b.getXType()]=true;Ext.container.Container.prototype.afterRender.apply(this,arguments)},getReferenceCmp:function(){var a=this._referenceCmp;if(!a){throw Error("Необходимо определить связанный компонент методом #setReferenceCmp()")}return a},setReferenceCmp:function(b){var a=this;a._referenceCmp=b;a.registerEventAfterLoad()},getStorageNames:function(){var a=this,c=FBEditor.getLocalStorage(),b;b=c.getItem(a.id);b=JSON.parse(b);return b},setStorageNames:function(b){var a=this,c=FBEditor.getLocalStorage();c.setItem(a.id,JSON.stringify(b))},cleanContainer:function(){var a=this;a.clean();a.setStorageNames(null)},getPanelProps:function(){var a=this,b;b=a.panelProps||Ext.getCmp("panel-props-desc");a.panelProps=b;return b},clean:function(){this.setVisible(false);this.mixins.behavior.clean.call(this)},abort:function(){this.setVisible(false);this.mixins.behavior.abort.call(this)},getContainerItems:function(){return this.mixins.behavior.getContainerItems.call(this)},registerEventAfterLoad:function(){var c=this,b=c.getContainerItems(),a=c.getReferenceCmp(),d=a.getId(),f;f=c._cacheEvents[d];if(!f){c._cacheEvents[d]=true;b.on({scope:a,afterLoad:a.afterLoad})}}},0,["props-desc-search-container"],["component","box","container","props-desc-search-container"],{component:true,box:true,container:true,"props-desc-search-container":true},["widget.props-desc-search-container"],[["behavior",FBEditor.view.container.desc.search.OwnerContainerBehavior]],[FBEditor.view.panel.main.props.desc.search,"Container"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.arts.ArtsController",FBEditor.view.panel.main.props.desc.search.ContainerController,{},0,0,0,0,["controller.props.desc.search.arts"],0,[FBEditor.view.panel.main.props.desc.search.arts,"ArtsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.arts.Arts",FBEditor.view.panel.main.props.desc.search.Container,{controller:"props.desc.search.arts",id:"props-desc-search-arts",xtypeContainerItems:"container-desc-search-arts",afterRender:function(){var b=this,c=FBEditor.getBridgeWindow(),a;a=c.Ext.getCmp("form-desc-title");b.setReferenceCmp(a);FBEditor.view.panel.main.props.desc.search.Container.prototype.afterRender.apply(this,arguments)}},0,["props-desc-search-arts"],["component","box","container","props-desc-search-container","props-desc-search-arts"],{component:true,box:true,container:true,"props-desc-search-container":true,"props-desc-search-arts":true},["widget.props-desc-search-arts"],0,[FBEditor.view.panel.main.props.desc.search.arts,"Arts"],0));(Ext.cmd.derive("FBEditor.view.form.desc.titleArt.TitleArt",FBEditor.view.form.desc.title.Title,{controller:"form.desc.titleArt",id:"form-desc-title",cls:"container-valid",listeners:{changeTitle:"onChangeTitle",blurTitle:"onBlurTitle",focusTitle:"onFocusTitle",cleanResultContainer:"onCleanResultContainer"},enableSub:true,enableAlt:true,mainConfig:{plugins:[{ptype:"searchField",style:"right: 24px"},{ptype:"fieldCleaner"}]},altConfig:{plugins:{btnStyle:{margin:"4px 0 0 5px"}}},getResultContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-arts")},getPersonsContainer:function(){var a=FBEditor.getBridgeProps();return a.Ext.getCmp("props-desc-search-persons")},afterLoad:function(d){var c=this,a=c.getMain(),b;b=a.getPlugin("searchField");if(d){b.hideLoader()}else{b.emptyLoader()}}},0,["form-desc-titleArt"],["component","box","container","fieldcontainer","desc-fieldcontainer","form-desc-title","form-desc-titleArt"],{component:true,box:true,container:true,fieldcontainer:true,"desc-fieldcontainer":true,"form-desc-title":true,"form-desc-titleArt":true},["widget.form-desc-titleArt"],0,[FBEditor.view.form.desc.titleArt,"TitleArt"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.CoverController",Ext.app.ViewController,{cover:null,onLoad:function(d){var c=this,b=c.getCover(),a=c.getView();b.updateView(d);Ext.defer(function(){a.updateLayout()},400)},onClear:function(){var b=this,a=b.getCover();a.setSrc("")},getCover:function(){var a=this,b=a.cover||Ext.getCmp("image-cover");return b}},0,0,0,0,["controller.panel.cover"],0,[FBEditor.view.panel.cover,"CoverController"],0));(Ext.cmd.derive("FBEditor.view.image.Cover",Ext.Img,{id:"image-cover",margin:"10 0 0 0",style:{maxWidth:"150px",maxHeight:"300px"},updateView:function(c){var b=this,a=c;b.setSrc(a.url)}},0,["image-cover"],["component","box","image","imagecomponent","image-cover"],{component:true,box:true,image:true,imagecomponent:true,"image-cover":true},["widget.image-cover"],0,[FBEditor.view.image,"Cover"],0));(Ext.cmd.derive("FBEditor.view.panel.cover.Cover",Ext.container.Container,{id:"panel-cover",controller:"panel.cover",margin:"0 0 0 40",listeners:{load:"onLoad",clear:"onClear"},translateText:{cover:"Обложка"},initComponent:function(){var a=this;a.items=[{xtype:"container",layout:"hbox",items:[{xtype:"box",style:{margin:"0 10px 0 0",fontSize:"15px"},html:a.translateText.cover+":"},{xtype:"button-select-cover"}]},{xtype:"image-cover"}];Ext.container.Container.prototype.initComponent.apply(this,arguments)}},0,["panel-cover"],["component","box","container","panel-cover"],{component:true,box:true,container:true,"panel-cover":true},["widget.panel-cover"],0,[FBEditor.view.panel.cover,"Cover"],0));(Ext.cmd.derive("FBEditor.view.form.desc.fieldset.Title",FBEditor.view.form.desc.fieldset.AbstractFieldset,{layout:"hbox",title:"Название произведения",require:true,initComponent:function(){var a=this;a.items=[{xtype:"form-desc-titleArt",flex:1,name:"title",layout:"anchor",defaults:{anchor:"100%",labelWidth:160,labelAlign:"right"}},{xtype:"panel-cover"}];FBEditor.view.form.desc.fieldset.AbstractFieldset.prototype.initComponent.apply(this,arguments)}},0,["desc-fieldset-title"],["component","box","container","fieldset","desc-fieldset","desc-fieldset-title"],{component:true,box:true,container:true,fieldset:true,"desc-fieldset":true,"desc-fieldset-title":true},["widget.desc-fieldset-title"],0,[FBEditor.view.form.desc.fieldset,"Title"],0));(Ext.cmd.derive("FBEditor.view.form.desc.Desc",Ext.form.Panel,{id:"form-desc",controller:"form.desc",cls:"form-desc",listeners:{accessHub:"onAccessHub",loadDesc:"onLoadData",reset:"onReset",activate:"onActivate",resize:"onResize",startScroll:"onStartScroll"},autoScroll:true,layout:{type:"anchor"},bodyPadding:0,_firstActivate:false,_oldScrollY:0,beforeLayout:function(){var a=this;a._oldScrollY=a.getScrollY();Ext.form.Panel.prototype.beforeLayout.apply(this,arguments)},afterLayout:function(){var a=this;Ext.form.Panel.prototype.afterLayout.apply(this,arguments);a.setScrollY(a._oldScrollY)},initComponent:function(){var b=this,a=FBEditor.desc.Manager;Ext.create("FBEditor.scroll.Scroll",b);b.items=[{xtype:"desc-fieldset-title"},{xtype:"desc-fieldset-sequence"},{xtype:"desc-fieldset-relations-subject"},{xtype:"desc-fieldset-classification"},{xtype:"desc-fieldset-annotation"},{xtype:"desc-fieldset-preamble"},{xtype:"desc-fieldset-periodical"},{xtype:"desc-fieldset-relations-object"},{xtype:"desc-fieldset-publishInfo"},{xtype:"desc-fieldset-history"},{xtype:"desc-fieldset-customInfo"},{xtype:"desc-fieldset-documentInfo"}];a.init();Ext.form.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a=FBEditor.desc.Manager,c;if(Ext.browser.is.WebKit){c=b.body.down(".x-autocontainer-innerCt");c.setStyle("opacity","0.99")}if(a.isLoadUrl()){a.loadFromUrl()}Ext.form.Panel.prototype.afterRender.apply(this,arguments)},isValid:function(){var d=this,b=d.items,f=true,c=FBEditor.desc.Manager,a;c.fieldsError=[];b.each(function(g){if(g.isValid&&!g.isValid()){f=false}});if(c.fieldsError.length){a=c.fieldsError[0];a=a.getEl().dom;a.scrollIntoView()}return f},getValues:function(){var c=this,a=c.items,d={},b={},f=["_id","_version","_xmlns","periodical","title","sequence","fb3-relations","fb3-classification","lang","written","translated","document-info","history","paper-publish-info","custom-info","annotation","preamble"];a.each(function(g){if(g.getValues){d=g.getValues(d)}});Ext.Array.each(f,function(g){if(d[g]){b[g]=d[g]}});return b}},0,["form-desc"],["component","box","container","panel","form","form-desc"],{component:true,box:true,container:true,panel:true,form:true,"form-desc":true},["widget.form-desc"],0,[FBEditor.view.form.desc,"Desc"],0));(Ext.cmd.derive("FBEditor.view.image.editor.Picture",Ext.Img,{style:{maxWidth:"150px",maxHeight:"200px"},src:"undefined",updateView:function(c){var b=this,a=c;if(a.url!==b.src){b.setSrc(a.url);b.fireEvent("changeSrc",b)}}},0,["image-editor-picture"],["component","box","image","imagecomponent","image-editor-picture"],{component:true,box:true,image:true,imagecomponent:true,"image-editor-picture":true},["widget.image-editor-picture"],0,[FBEditor.view.image.editor,"Picture"],0));(Ext.cmd.derive("FBEditor.view.main.MainController",Ext.app.ViewController,{routes:{"panel/:name":{before:"beforeCreatePanel",action:"createPanel",conditions:{":name":"(navigation|props)"}}},init:function(){},onAccessHub:function(){var a=[Ext.getCmp("form-desc"),Ext.getCmp("panel-toolstab-file-button-savebody")];Ext.Array.each(a,function(b){if(b){b.fireEvent("accessHub")}})},beforeCreatePanel:function(a,b){if(FBEditor.parentWindow){b.resume()}},createPanel:function(b){var c=this,a;a=c.getView();a.createPanel(b)},onResize:function(f,c,a,b,g){var d=this;if(c!==b){d.onCheckWidthPanels()}},onCloseApplication:function(){var a=this,b=FBEditor.getBridgeProps();a.closeDetachPanels()},onRestoreDetachPanel:function(a){var c=this,b,f,d;b=FBEditor.getLocalStorage().getItem(a);b=Ext.Object.fromQueryString(b,true);f="width="+b.width+",height="+b.height+",top="+b.top+",left="+b.left+",toolbar=no,location=no";d=window.open("#panel/"+a,a,f);if(d){FBEditor.childWindow[a]=d}else{c.getView().attachPanel(a)}},onCheckWidthPanels:function(){var a={},b={};a.content=Ext.getCmp("panel-main-content");if(a.content){a.props=Ext.getCmp("panel-main-props");a.nav=Ext.getCmp("panel-main-navigation");b.main=Ext.getCmp("main").getWidth();b.content=a.content.getMinWidth();b.props=a.props?a.props.getWidth():0;b.nav=a.nav?a.nav.getWidth():0;b.sum=b.props+b.nav+b.content;if(b.main-b.sum<0){if(a.props){a.props.setWidth((b.main-b.content)/2)}if(a.nav){a.nav.setWidth((b.main-b.content)/2)}}}},onFocusDetachPanels:function(){var b=this,a;a=b.getView();Ext.Object.each(a.windowPanels,function(c,d){if(d){d.focus();if(!Ext.isIE){d.alert("Панель найдена")}}})},closeDetachPanels:function(){var c=this,a,b;a=c.getView();Ext.Object.each(a.windowPanels,function(d,f){if(f){b={width:f.innerWidth,height:f.innerHeight,left:f.screenX,top:f.screenY};FBEditor.getLocalStorage().setItem(d,Ext.Object.toQueryString(b,true));f.close();FBEditor.childWindow[name]=null}})}},0,0,0,0,["controller.main"],0,[FBEditor.view.main,"MainController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.Abstract",Ext.panel.Panel,{split:{size:2,collapsible:false},bodyPadding:5,stateful:true,panelName:null},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main,"Abstract"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsController",Ext.app.ViewController,{onResize:function(){var c=this,a=c.getView(),b;b=a.down("panel-filename");b.fireEvent("checkPosition")}},0,0,0,0,["controller.panel.main.tools"],0,[FBEditor.view.panel.main.tools,"ToolsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsTabController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.main.toolstab"],0,[FBEditor.view.panel.main.tools,"ToolsTabController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.open.OpenController",Ext.app.ViewController,{onChange:function(b,a){var c;c=Ext.create("FBEditor.command.OpenFile",{evt:a});if(c.execute()){FBEditor.HistoryCommand.add(c)}}},0,0,0,0,["controller.panel.toolstab.file.button.open"],0,[FBEditor.view.panel.toolstab.file.button.open,"OpenController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.open.Open",FBEditor.view.button.AbstractFileButton,{id:"panel-toolstab-file-button-open",controller:"panel.toolstab.file.button.open",text:"Открыть книгу",listeners:{change:"onChange"},accept:""},0,["panel-toolstab-file-button-open"],["component","box","button","filebutton","panel-toolstab-file-button-open"],{component:true,box:true,button:true,filebutton:true,"panel-toolstab-file-button-open":true},["widget.panel-toolstab-file-button-open"],0,[FBEditor.view.panel.toolstab.file.button.open,"Open"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.saveas.SaveAsController",Ext.app.ViewController,{onClick:function(b,a){var d,c;c={btn:b,desc:Ext.getCmp("form-desc")};d=Ext.create("FBEditor.command.SaveAsFile",c);if(d.execute()){FBEditor.HistoryCommand.add(d)}}},0,0,0,0,["controller.panel.toolstab.file.button.saveas"],0,[FBEditor.view.panel.toolstab.file.button.saveas,"SaveAsController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.saveas.SaveAs",Ext.button.Button,{id:"panel-toolstab-file-button-saveas",controller:"panel.toolstab.file.button.saveas",text:"Сохранить книгу",listeners:{click:"onClick"}},0,["panel-toolstab-file-button-saveas"],["component","box","button","panel-toolstab-file-button-saveas"],{component:true,box:true,button:true,"panel-toolstab-file-button-saveas":true},["widget.panel-toolstab-file-button-saveas"],0,[FBEditor.view.panel.toolstab.file.button.saveas,"SaveAs"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.savedesc.SaveDescController",Ext.app.ViewController,{onClick:function(b,a){var d,c={},f=FBEditor.getBridgeWindow();d=f.Ext.create("FBEditor.command.SaveDesc",c);if(d.execute()){f.FBEditor.HistoryCommand.add(d)}},onAccessHub:function(){var c=this,a=c.getView(),b=FBEditor.desc.Manager;if(b.isLoadUrl()){a.setHidden(false)}}},0,0,0,0,["controller.panel.toolstab.file.button.savedesc"],0,[FBEditor.view.panel.toolstab.file.button.savedesc,"SaveDescController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.savedesc.SaveDesc",Ext.button.Button,{id:"panel-toolstab-file-button-savedesc",controller:"panel.toolstab.file.button.savedesc",text:"Сохранить описание",hidden:true,listeners:{click:"onClick",accessHub:"onAccessHub"}},0,["panel-toolstab-file-button-savedesc"],["component","box","button","panel-toolstab-file-button-savedesc"],{component:true,box:true,button:true,"panel-toolstab-file-button-savedesc":true},["widget.panel-toolstab-file-button-savedesc"],0,[FBEditor.view.panel.toolstab.file.button.savedesc,"SaveDesc"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.savebody.SaveBodyController",Ext.app.ViewController,{onClick:function(b,a){var d,c={},f=FBEditor.getBridgeWindow();d=f.Ext.create("FBEditor.command.SaveBody",c);if(d.execute()){f.FBEditor.HistoryCommand.add(d)}},onAccessHub:function(){var c=this,a=c.getView(),b=FBEditor.getEditorManager();if(b.isLoadUrl()){a.setHidden(false)}}},0,0,0,0,["controller.panel.toolstab.file.button.savebody"],0,[FBEditor.view.panel.toolstab.file.button.savebody,"SaveBodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.button.savebody.SaveBody",Ext.button.Button,{id:"panel-toolstab-file-button-savebody",controller:"panel.toolstab.file.button.savebody",text:"Сохранить тело",hidden:true,listeners:{click:"onClick",accessHub:"onAccessHub"}},0,["panel-toolstab-file-button-savebody"],["component","box","button","panel-toolstab-file-button-savebody"],{component:true,box:true,button:true,"panel-toolstab-file-button-savebody":true},["widget.panel-toolstab-file-button-savebody"],0,[FBEditor.view.panel.toolstab.file.button.savebody,"SaveBody"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.file.File",Ext.panel.Panel,{id:"panel-toolstab-file",title:"Файл",initComponent:function(){var a=this;a.tbar=[{xtype:"panel-toolstab-file-button-open"},{xtype:"panel-toolstab-file-button-saveas"},{xtype:"panel-toolstab-file-button-savedesc"},{xtype:"panel-toolstab-file-button-savebody"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-file"],["component","box","container","panel","panel-toolstab-file"],{component:true,box:true,container:true,panel:true,"panel-toolstab-file":true},["widget.panel-toolstab-file"],0,[FBEditor.view.panel.toolstab.file,"File"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.MainController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.toolstab.main"],0,[FBEditor.view.panel.toolstab.main,"MainController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.main.Main",Ext.panel.Panel,{id:"panel-toolstab-main",controller:"panel.toolstab.main",title:"Форматирование",accessXmllint:false,mainEditor:null,activeToolbar:null,translateText:{loading:"Загрузка xmllint ..."},initComponent:function(){var a=this;a.items=[{xtype:"component",padding:10,style:{color:"gray"},html:a.translateText.loading}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var c=this,a,b,d;a=c.getMainEditor();b=a.getManager();d=b.getSchema();d.validXml({xml:"test",callback:c.verifyResult,scope:c});Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},addToolbar:function(b){var a=this;a.addDocked(b);if(b.isDefaultShow()){a.setActiveToolbar(b)}},isActiveToolbar:function(b){var a=this,d=a.getActiveToolbar(),c;c=d&&d.getId()===b.getId();return c},setActiveToolbar:function(c){var b=this,a=b.getDockedItems();Ext.Array.each(a,function(g){var f,d;g.setVisible(false);f=g.getEditor();d=f.getManager();d.resetFocus()});b.activeToolbar=c;c.setVisible(b.accessXmllint)},getActiveToolbar:function(){return this.activeToolbar},getMainEditor:function(){var b=this,a;a=b.mainEditor||Ext.getCmp("main-editor");b.mainEditor=a;return a},verifyResult:function(a,c){var b=this,d=b.getActiveToolbar();if(c.loaded){Ext.log({msg:"xmllint загружен",level:"info"});b.remove(b.items.first());b.accessXmllint=true;if(d){b.setActiveToolbar(d)}}}},0,["panel-toolstab-main"],["component","box","container","panel","panel-toolstab-main"],{component:true,box:true,container:true,panel:true,"panel-toolstab-main":true},["widget.panel-toolstab-main"],0,[FBEditor.view.panel.toolstab.main,"Main"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.split.SplitController",Ext.app.ViewController,{onClick:function(d,b){var g=Ext.getCmp("panel-main-content"),h,f,c,a;if(g.isActiveItem("main-editor")){f={btn:d,editor:Ext.getCmp("main-editor")};a=d.isSplited();c=!a?"FBEditor.command.SplitEditor":"FBEditor.command.UnsplitEditor";h=Ext.create(c,f);if(h.execute()){d.setSplited(!a);FBEditor.HistoryCommand.add(h)}}}},0,0,0,0,["controller.panel.toolstab.view.button.split"],0,[FBEditor.view.panel.toolstab.view.button.split,"SplitController"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.split.Split",Ext.button.Button,{id:"panel-toolstab-view-button-split",controller:"panel.toolstab.view.button.split",listeners:{click:"onClick"},splited:false,translateText:{split:"Разделить окно текста",unsplit:"Снять разделение "},initComponent:function(){var a=this;a.text=a.translateText.split;Ext.button.Button.prototype.initComponent.apply(this,this)},setSplited:function(c){var a=this,b;a.splited=c;b=c?a.translateText.unsplit:a.translateText.split;a.setText(b)},isSplited:function(){return this.splited}},0,["panel-toolstab-view-button-split"],["component","box","button","panel-toolstab-view-button-split"],{component:true,box:true,button:true,"panel-toolstab-view-button-split":true},["widget.panel-toolstab-view-button-split"],0,[FBEditor.view.panel.toolstab.view.button.split,"Split"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.button.focusdetachpanels.FocusDetachPanels",Ext.button.Button,{id:"panel-toolstab-view-button-focusdetachpanels",text:"Показать отсоединенные панели",handler:function(){Ext.getCmp("main").fireEvent("focusDetachPanels")}},0,["panel-toolstab-view-button-focusdetachpanels"],["component","box","button","panel-toolstab-view-button-focusdetachpanels"],{component:true,box:true,button:true,"panel-toolstab-view-button-focusdetachpanels":true},["widget.panel-toolstab-view-button-focusdetachpanels"],0,[FBEditor.view.panel.toolstab.view.button.focusdetachpanels,"FocusDetachPanels"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.view.View",Ext.panel.Panel,{id:"panel-toolstab-view",title:"Вид",initComponent:function(){var a=this;a.tbar=[{xtype:"panel-toolstab-view-button-split"},{xtype:"panel-toolstab-view-button-focusdetachpanels"}];Ext.panel.Panel.prototype.initComponent.apply(this,this)}},0,["panel-toolstab-view"],["component","box","container","panel","panel-toolstab-view"],{component:true,box:true,container:true,panel:true,"panel-toolstab-view":true},["widget.panel-toolstab-view"],0,[FBEditor.view.panel.toolstab.view,"View"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.tools.button.paragraph.Paragraph",Ext.Button,{id:"panel-toolstab-tools-button-paragraph",enableToggle:true,tooltipType:"title",html:'<i class="fa fa-paragraph"></i>',tooltip:"Отображение конца абзацев",modeCls:"mode-paragraph",handler:function(){var c=this,a=c.isPressed(),d=c.modeCls,b;b=document.querySelectorAll(".editor-viewport");Ext.Array.each(b,function(f){if(a){f.classList.add(d)}else{f.classList.remove(d)}})},isPressed:function(){return this.pressed}},0,["panel-toolstab-tools-button-paragraph"],["component","box","button","panel-toolstab-tools-button-paragraph"],{component:true,box:true,button:true,"panel-toolstab-tools-button-paragraph":true},["widget.panel-toolstab-tools-button-paragraph"],0,[FBEditor.view.panel.toolstab.tools.button.paragraph,"Paragraph"],0));(Ext.cmd.derive("FBEditor.view.panel.toolstab.tools.Tools",Ext.panel.Panel,{id:"panel-toolstab-tools",title:"Инструменты",translateText:{version:"Версия: "},initComponent:function(){var a=this;a.tbar=[{xtype:"component",style:{color:"gray"},html:a.translateText.version+FBEditor.version},{xtype:"tbspacer",width:20},{xtype:"panel-toolstab-tools-button-paragraph"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-toolstab-tools"],["component","box","container","panel","panel-toolstab-tools"],{component:true,box:true,container:true,panel:true,"panel-toolstab-tools":true},["widget.panel-toolstab-tools"],0,[FBEditor.view.panel.toolstab.tools,"Tools"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.ToolsTab",Ext.tab.Panel,{id:"panel-main-toolstab",controller:"panel.main.toolstab",activeTab:"panel-toolstab-main",items:[{xtype:"panel-toolstab-file"},{xtype:"panel-toolstab-main"},{xtype:"panel-toolstab-view"},{xtype:"panel-toolstab-tools"}]},0,["panel-main-toolstab"],["component","box","container","panel","tabpanel","panel-main-toolstab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"panel-main-toolstab":true},["widget.panel-main-toolstab"],0,[FBEditor.view.panel.main.tools,"ToolsTab"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.FileNameController",Ext.app.ViewController,{onClick:function(){var b=this,a=b.getView();a.setActiveItem("panel-filename-field")},onAfterRender:function(){var b=this,a=FBEditor.file.Manager.defaultFb3FileName;b.onSetName(a);b.onCheckPosition()},onSetName:function(d){var c=this,a=c.getView(),b=a.items;b.each(function(f){f.setValue(d)});a.setActiveItem("panel-filename-display")},onCheckPosition:function(){var b=this,a=b.getView(),c;if(a.rendered){c=Ext.getCmp("panel-main-tools");a.setWidth(c.getWidth()-440)}}},0,0,0,0,["controller.panel.filename"],0,[FBEditor.view.panel.filename,"FileNameController"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.display.Display",Ext.form.field.Display,{id:"panel-filename-display",cls:"panel-filename-display",width:"100%"},0,["panel-filename-display"],["component","box","field","displayfield","panel-filename-display"],{component:true,box:true,field:true,displayfield:true,"panel-filename-display":true},["widget.panel-filename-display"],0,[FBEditor.view.panel.filename.display,"Display"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.field.FieldController",Ext.app.ViewController,{onBlur:function(){var b=this,a=b.getView(),c=a.getValue();b.setNewValue(c)},onSpecialKey:function(f,d){var c=this,a=c.getView(),g=a.getValue(),b=d.getKey();if(b===d.ENTER||b===d.ESC){g=b===d.ENTER?g:c.getDisplayValue();c.setNewValue(g)}},onActivate:function(){var b=this,a=b.getView(),c=a.getValue();a.focus([c.length,c.length])},setNewValue:function(d){var c=this,b=c.getView(),f=d,a;a=Ext.getCmp("panel-filename");f=b.isValid()?f:c.getDisplayValue();a.fireEvent("setName",f)},getDisplayValue:function(){return Ext.getCmp("panel-filename").child("panel-filename-display").getValue()}},0,0,0,0,["controller.panel.filename.field"],0,[FBEditor.view.panel.filename.field,"FieldController"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.field.Field",Ext.form.field.Text,{id:"panel-filename-field",controller:"panel.filename.field",border:false,allowBlank:false,maxLength:250,enforceMaxLength:true,width:"100%",cls:"panel-filename-field",listeners:{blur:"onBlur",activate:"onActivate",specialkey:"onSpecialKey"}},0,["panel-filename-field"],["component","box","field","textfield","panel-filename-field"],{component:true,box:true,field:true,textfield:true,"panel-filename-field":true},["widget.panel-filename-field"],0,[FBEditor.view.panel.filename.field,"Field"],0));(Ext.cmd.derive("FBEditor.view.panel.filename.FileName",Ext.container.Container,{id:"panel-filename",controller:"panel.filename",floating:true,autoShow:true,shadow:false,border:false,monitorResize:true,plain:true,x:400,y:3,layout:"card",listeners:{click:{element:"el",fn:"onClick"},setName:"onSetName",afterrender:"onAfterRender",checkPosition:"onCheckPosition"},items:[{xtype:"panel-filename-display"},{xtype:"panel-filename-field"}]},0,["panel-filename"],["component","box","container","panel-filename"],{component:true,box:true,container:true,"panel-filename":true},["widget.panel-filename"],0,[FBEditor.view.panel.filename,"FileName"],0));(Ext.cmd.derive("FBEditor.view.panel.main.tools.Tools",FBEditor.view.panel.main.Abstract,{id:"panel-main-tools",controller:"panel.main.tools",panelName:"tools",region:"north",bodyPadding:0,stateful:false,split:false,height:75,margin:"0 0 4px 0",listeners:{resize:"onResize"},items:[{xtype:"panel-main-toolstab"},{xtype:"panel-filename"}]},0,["panel-main-tools"],["component","box","container","panel","panel-main-tools"],{component:true,box:true,container:true,panel:true,"panel-main-tools":true},["widget.panel-main-tools"],0,[FBEditor.view.panel.main.tools,"Tools"],0));(Ext.cmd.derive("FBEditor.view.panel.main.AbstractDetach",FBEditor.view.panel.main.Abstract,{listeners:{resize:"onResize",detachpanel:"onDetachPanel"},detachable:false,initComponent:function(){var a=this;if(a.detachable){a.tools=[{type:"maximize",callback:a.detachPanel}]}FBEditor.view.panel.main.Abstract.prototype.initComponent.apply(this,arguments)},detachPanel:function(a){a.fireEvent("detachpanel",a)}},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main,"AbstractDetach"],0));(Ext.cmd.derive("FBEditor.view.panel.main.DetachController",Ext.app.ViewController,{onResize:function(d,c,a,b,f){if(c!==b){Ext.getCmp("main").fireEvent("checkWidthPanels")}},onDetachPanel:function(a){var b,c,d;b=a.panelName;c=a.getBox();d=window.open("#panel/"+b,b,"width="+c.width+",height="+c.height+",top="+c.top+",left="+c.left+",toolbar=no,location=no");if(d){FBEditor.childWindow[b]=d}}},0,0,0,0,0,0,[FBEditor.view.panel.main,"DetachController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.NavigationController",FBEditor.view.panel.main.DetachController,{},0,0,0,0,["controller.panel.main.navigation"],0,[FBEditor.view.panel.main.navigation,"NavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.TreeNavigationController",Ext.app.ViewController,{onClearSelection:function(c){var d=this,a=d.getView(),b=a.items,f=c.id;b.each(function(g){if(g.id!==f){g.clearSelection()}})}},0,0,0,0,["controller.panel.treenavigation"],0,[FBEditor.view.panel.treenavigation,"TreeNavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.AbstractTree",Ext.tree.Panel,{cls:"panel-treenavigation",listeners:{itemclick:"onItemClick",itemdblclick:"onItemDblClick",beforeitemclick:"onBeforeItemClick",selectionchange:"onSelectionChange",select:"onSelect"},syncContentId:"",afterRender:function(){var a=this;Ext.defer(function(){a.syncContent()},2500);Ext.tree.Panel.prototype.afterRender.apply(this,arguments)},clearSelection:function(){var c=this,b=c.getSelection(),a=c.getView();if(b.length){a.deselect(b[0],false)}},syncContent:function(){var b=this,f=b.syncContentId,c=FBEditor.getBridgeWindow(),a,d;a=c.Ext.getCmp("panel-main-content");d=a.getLayout().getActiveItem();if(d.id===f){b.selectPath("/root")}}},0,0,["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},0,0,[FBEditor.view.panel.treenavigation,"AbstractTree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.AbstractTreeController",Ext.app.ViewController,{onItemClick:function(d,b){var c=this,a=c.getView();c.clearSelection();if(c.openContent){if(!a.inWindow){c.openContent()}Ext.getCmp("panel-treenavigation").saveSelectData({view:c.getView(),node:d,record:b});Ext.getCmp("panel-treenavigation").restoreSelectData()}},onItemDblClick:function(b,a){},onBeforeItemClick:function(c,a){var b=this;c.deselect(a,false);Ext.getCmp("panel-treenavigation").restoreSelectData()},onSelect:function(){},onSelectionChange:function(){},clearSelection:function(){var c=this,a=c.getView(),b=a.ownerCt;b.fireEvent("clearSelection",a)}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation,"AbstractTreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.navigation.NavigationController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(g,a){var f=this,j=FBEditor.getBridgeWindow(),h=a.getData(),c,b,d;FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);c=j.FBEditor.resource.Manager;if((b=c.getSelectFunction())&&!a.isLeaf()){b(h)}else{if(!a.isLeaf()){d=h.path?h.path:"";c.setActiveFolder(d)}}},openContent:function(){var a;a=Ext.create("FBEditor.command.OpenResources");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,0,0,0,["controller.panel.resources.navigation"],0,[FBEditor.view.panel.resources.navigation,"NavigationController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.navigation.Navigation",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-resources-navigation",controller:"panel.resources.navigation",useArrows:true,animate:false,manageHeight:false,syncContentId:"panel-resources",visibleFiles:false,expandableLastFolder:false,inWindow:false,initComponent:function(){var a=this,b=FBEditor.getBridgeWindow();a.store=Ext.create("FBEditor.store.resource.Navigation");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,c=FBEditor.getBridgeWindow(),a;a=c.FBEditor.resource.Manager.getData();if(a.length){b.loadData(a)}FBEditor.view.panel.treenavigation.AbstractTree.prototype.afterRender.apply(this,arguments)},loadData:function(b){var a=this,c;c=a.getTreeData(b);a.store.loadData(c);Ext.defer(function(){a.restoreOpenNode()},200)},getTreeData:function(d){var c=this,b=c.store.getRoot().data,f=[],a;Ext.each(d,function(g){var h;h=Ext.clone(c.parseNameResource(g.name,{path:""}));if(h){if(f.length&&h.children&&h.children.length){f=c.groupTreeData(h,f)}else{f.push(h)}}});a=[{root:true,text:b.text,expandable:b.expandable,icon:b.icon,cls:b.cls,iconCls:b.iconCls,children:f}];return a},parseNameResource:function(a,h){var j=this,f=a,d=h,c={},b=null,k,m,g,l;k=f.indexOf("/");g=k===-1;m=g?f:f.substring(0,k);c.text=m;l=g&&f.indexOf(".")!==-1?true:false;if(!j.visibleFiles){c.visible=l?false:true}c.leaf=l?true:false;if(g&&!l){b=[]}c.path=d.path?d.path+"/"+m:m;c.id=c.path;m=f.slice(k+1);c.childrenPath=m;c.expandable=m.indexOf("/")===-1?false:true;c.icon=" ";c.cls="treenavigation-children treenavigation-children-resource";if(!g){b=[];b.push(j.parseNameResource(m,Ext.clone(c)))}c.children=Ext.clone(b);return c},groupTreeData:function(b,c){var a=this,d=c;Ext.each(d,function(g,f){var h;if(g.text===b.text&&g.children&&b.children){if(g.children.length===0){h=b.children}else{h=a.groupTreeData(b.children[0],g.children)}d[f].children=h;d[f].expandable=true}else{if(c.length===f+1){d.push(b)}}});return d},restoreOpenNode:function(){var b=this,d=FBEditor.getBridgeWindow(),a=b.store.getRoot().data.text,c;c=d.FBEditor.resource.Manager.getActiveFolder();c=c?"/"+c:"";c="/"+a+c;b.expandPath(c,"text","/",function(j,g){var h,f;if(j){h=g.getData();f=h.path?h.path:"";d.FBEditor.resource.Manager.setActiveFolder(f)}})},selectPath:function(d){var b=this,a=b.store.getRoot().data.text,c=d;c=c.indexOf("/root")===0?c:"/"+a+"/"+c;FBEditor.view.panel.treenavigation.AbstractTree.prototype.selectPath.call(this,c,"text")},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():c.callParrent();return a}},0,["panel-resources-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-resources-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-resources-navigation":true},["widget.panel-resources-navigation"],0,[FBEditor.view.panel.resources.navigation,"Navigation"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.TreeController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemClick:function(c,a){var b=this,f=FBEditor.getBridgeWindow(),d=a.getData();FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemClick.apply(this,arguments);if(d.anchor){f.location="#"+d.anchor}},openContent:function(){var a;a=Ext.create("FBEditor.command.OpenDesc");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,0,0,0,["controller.panel.desc.navigation"],0,[FBEditor.view.panel.treenavigation.desc,"TreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.TreeStore",Ext.data.TreeStore,{defaultRootText:"Описание",rootVisible:true,proxy:{type:"memory"},root:{icon:" ",cls:"treenavigation-root treenavigation-root-desc",children:[{text:"Название произведения",expandable:false,anchor:"desc-fieldset-title",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Обложка",expandable:false,anchor:"desc-fieldset-title",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Серия",expandable:false,anchor:"desc-fieldset-sequence",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Аннотация",expandable:false,anchor:"desc-fieldset-annotation",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Классификация произведения",expandable:false,anchor:"desc-fieldset-classification",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Связанные персоны (автор, переводчик и т.д.)",expandable:false,anchor:"desc-fieldset-relations-subject",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Периодическое издание",expandable:false,anchor:"desc-fieldset-periodical",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Связанные объекты",expandable:false,anchor:"desc-fieldset-relations-object",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Информация о бумажной публикации",expandable:false,anchor:"desc-fieldset-publishInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Комментарии редактора",expandable:false,anchor:"desc-fieldset-history",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Пользовательская информация",expandable:false,anchor:"desc-fieldset-customInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"},{text:"Информация о файле",expandable:false,anchor:"desc-fieldset-documentInfo",icon:" ",cls:"treenavigation-children treenavigation-children-desc"}]}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation.desc,"TreeStore"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.desc.Tree",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-desc-navigation",controller:"panel.desc.navigation",useArrows:true,animate:false,syncContentId:"form-desc",initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.treenavigation.desc.TreeStore");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)}},0,["panel-desc-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-desc-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-desc-navigation":true},["widget.panel-desc-navigation"],0,[FBEditor.view.panel.treenavigation.desc,"Tree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.TreeController",FBEditor.view.panel.treenavigation.AbstractTreeController,{onItemDblClick:function(f,h){var j=this,g=h.getData(),d={},a={},c=FBEditor.getEditorManager(),k,b;FBEditor.view.panel.treenavigation.AbstractTreeController.prototype.onItemDblClick.apply(this,arguments);d.node=c.getElementById(g.elementId);if(d.node){k=c.getContent();b=k.getNodeHelper().getNode();b.focus();a.nodes=Ext.Object.getValues(d.node.nodes);Ext.Array.each(a.nodes,function(l){l.scrollIntoView()});a.first=a.nodes[0];while(a.first.firstChild){a.first=a.first.firstChild}d.first=a.first.getElement();c.setCursor({startNode:a.first,startOffset:0,endNode:a.first,endOffset:0,focusElement:d.first})}},openContent:function(){var a;a=Ext.create("FBEditor.command.OpenBody");if(a.execute()){FBEditor.HistoryCommand.add(a)}}},0,0,0,0,["controller.panel.body.navigation"],0,[FBEditor.view.panel.treenavigation.body,"TreeController"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.TreeStore",Ext.data.TreeStore,{defaultRootText:"Текст",rootVisible:true,proxy:{type:"memory"},root:{icon:" ",cls:"treenavigation-root treenavigation-root-body"}},0,0,0,0,0,0,[FBEditor.view.panel.treenavigation.body,"TreeStore"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.body.Tree",FBEditor.view.panel.treenavigation.AbstractTree,{id:"panel-body-navigation",controller:"panel.body.navigation",stateId:"panel-body-navigation",stateful:true,useArrows:true,animate:false,selModel:{preventFocus:true},syncContentId:"main-editor",initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.treenavigation.body.TreeStore");FBEditor.view.panel.treenavigation.AbstractTree.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,a,c;a=FBEditor.getEditorManager();c=a.getContent();if(c){b.loadData(c)}FBEditor.view.panel.treenavigation.AbstractTree.prototype.afterRender.apply(this,arguments)},destroy:function(){var a=this;a.saveStateNodes();FBEditor.view.panel.treenavigation.AbstractTree.prototype.destroy.apply(this,arguments)},loadData:function(b){var a=this,d=FBEditor.getBridgeWindow(),c;a.saveStateNodes();c=a.getTreeData(b);a.store.loadData(c);a.getView().expand(a.store.first())},getTreeData:function(b){var d=this,c=d.store.getRoot().data,f,a;f=d.getTreeChildren(b);a=[{root:true,text:c.text,expandable:c.expandable,icon:c.icon,cls:c.cls,iconCls:c.iconCls,children:f.children,elementId:b.elementId}];return a},getTreeChildren:function(c,a){var d=this,f=null,b=FBEditor.getEditorManager();if(c.showedOnTree){if(c.children){a=a||"";c.treePath=a+"/"+c.elementId}f={};f.text=c.getNameTree();f.elementId=c.elementId;f.expanded=b.stateExpandedNodesTree[c.elementId]?true:false;f.icon=" ";f.cls="treenavigation-children treenavigation-children-body";f.cls+=c.cls?" treenavigation-children-"+c.cls:"";Ext.Array.each(c.children,function(g){var h;if(g.showedOnTree){h=d.getTreeChildren(g,c.treePath);if(h){f.children=f.children||[];f.children.push(h)}}else{Ext.Array.each(g.children,function(j){h=d.getTreeChildren(j,c.treePath);if(h){f.children=f.children||[];f.children.push(h)}})}});f.leaf=!f.children}return f},saveStateNodes:function(c){var b=this,a=FBEditor.getEditorManager();c=c||b.store.getData().items[0].data.children;Ext.Array.each(c,function(d){if(d.expanded){a.stateExpandedNodesTree[d.elementId]=true}else{if(a.stateExpandedNodesTree[d.elementId]){delete a.stateExpandedNodesTree[d.elementId]}}if(d.children&&d.children.length){b.saveStateNodes(d.children)}})},expandElement:function(a){var b=this;if(Ext.isEmpty(a.treePath)&&a.parent){b.expandElement(a.parent);return}b.selectPath(a.treePath,"elementId")},selectRoot:function(){var b=this,a=b.getRootNode(),c;c="/"+a.id;b.selectPath(c)},getRootNode:function(){var c=this,b=c.store,a;a=b&&b.first()?b.first():c.callParrent();return a}},0,["panel-body-navigation"],["component","box","container","panel","tablepanel","treepanel","panel-body-navigation"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"panel-body-navigation":true},["widget.panel-body-navigation"],0,[FBEditor.view.panel.treenavigation.body,"Tree"],0));(Ext.cmd.derive("FBEditor.view.panel.treenavigation.TreeNavigation",Ext.panel.Panel,{id:"panel-treenavigation",controller:"panel.treenavigation",defaults:{width:"100%"},listeners:{clearSelection:"onClearSelection"},_selectData:null,initComponent:function(){var a=this;a.items=[{xtype:"panel-desc-navigation"},{xtype:"panel-body-navigation"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var b=this,c,a;c=Ext.getCmp("window-resource");a=Ext.getCmp("window-resource-tree");if(c&&!c.isHidden()){c.getWindowPanelResourcesNavigation().add({xtype:"panel-resources-navigation"})}else{if(a&&!a.isHidden()){a.getWindowPanelResourcesTreeNavigation().add({xtype:"panel-resources-navigation"})}else{b.insert(1,{xtype:"panel-resources-navigation"})}}Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},saveSelectData:function(b){var a=this;a._selectData=b},restoreSelectData:function(){var b=this,c=b._selectData,a;if(c&&c.view){a=c.record.getData();if(a.path){c.view.selectPath(a.path)}else{c.view.selectPath(c.record.getPath())}}}},0,["panel-treenavigation"],["component","box","container","panel","panel-treenavigation"],{component:true,box:true,container:true,panel:true,"panel-treenavigation":true},["widget.panel-treenavigation"],0,[FBEditor.view.panel.treenavigation,"TreeNavigation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.navigation.Navigation",FBEditor.view.panel.main.AbstractDetach,{id:"panel-main-navigation",controller:"panel.main.navigation",title:"Навигация",panelName:"navigation",layout:"anchor",overflowY:"auto",defaults:{anchor:"100%"},initComponent:function(){var a=this;a.items=[{xtype:"panel-treenavigation"}];FBEditor.view.panel.main.AbstractDetach.prototype.initComponent.apply(this,arguments)}},0,["panel-main-navigation"],["component","box","container","panel","panel-main-navigation"],{component:true,box:true,container:true,panel:true,"panel-main-navigation":true},["widget.panel-main-navigation"],0,[FBEditor.view.panel.main.navigation,"Navigation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.content.ContentController",Ext.app.ViewController,{onResize:function(d,c,a,b,f){if(c!==b){if(c<d.getMinWidth()){d.setWidth(d.getMinWidth())}}},onContentBody:function(){var g=this,a=g.getView(),f=a.getPanelMainToolstab(),h=a.getToolstab(),b=FBEditor.getEditorManager(true),c,d;a.setActiveItem("main-editor");f.setActiveItem("panel-toolstab-main");c=b.getEditor();d=c.getToolbar();h.setActiveToolbar(d);b.syncButtons()},onContentDesc:function(){var g=this,a=g.getView(),f=a.getPanelMainToolstab(),h=a.getToolstab(),b,c,d;a.setActiveItem("form-desc");f.setActiveItem("panel-toolstab-main");c=Ext.getCmp("form-desc-annotation").getBodyEditor();d=c.getToolbar();h.setActiveToolbar(d);b=c.getManager();b.syncButtons()},onContentResources:function(){var f=this,a=f.getView(),g=a.getToolstab(),b,c,d;a.setActiveItem("panel-resources");d=g.getActiveToolbar();if(d){c=d.getEditor();b=c.getManager();b.disableButtons()}},onContentEmpty:function(){var b=this,a=b.getView();a.setActiveItem("panel-empty")}},0,0,0,0,["controller.panel.main.content"],0,[FBEditor.view.panel.main.content,"ContentController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.EditorController",FBEditor.editor.view.EditorController,{onLoadData:function(){var f=this,a=f.getView(),c=a.getViewports(),d=a.getPanelContent(),b=a.getManager(),g,h;h=a.viewports.north;Ext.Array.each(c,function(j){g=b.getNode(j.id);if(j.rendered){j.loadData(g);if(j.id!==h.id&&d.isActiveItem("main-editor")){j.fireEvent("syncScroll",h)}}})},onSplit:function(){var b=this,a=b.getView();a.addSouthViewport()},onUnsplit:function(){var b=this,a=b.getView();a.removeSouthViewport()},onSyncContent:function(a){var f=this,b=f.getView(),d=b.getViewports(),c=b.getManager(),g;Ext.Array.each(d,function(h){if(h.id!==a.id){g=c.getNode(h.id);h.loadData(g)}})}},0,0,0,0,["controller.view.main.editor"],0,[FBEditor.view.panel.main.editor,"EditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.Manager",FBEditor.editor.Manager,{url:"https://hub.litres.ru/pages/get_fb3_body/",loadUrl:null,saveUrl:null,loadingProcess:false,fb3BodyId:"",art:null,constructor:function(){var b=this,a=FBEditor.route.Manager,c;FBEditor.editor.Manager.prototype.constructor.apply(this,arguments);c=a.getParams();if(c.body_art){b.art=c.body_art;b.loadUrl=b.url+"?art="+c.body_art}else{if(c.body){b.loadUrl=c.body}else{if(c.body===null){b.loadUrl="undefined"}}}b.saveUrl=b.url},createContent:function(){var a=this;FBEditor.editor.Manager.prototype.createContent.apply(this,arguments);a.updateTree()},setFocusElement:function(f,d){var c=this,a=c.getPanelNavigation(),b;FBEditor.editor.Manager.prototype.setFocusElement.apply(this,arguments);b=c.getFocusElement();a.expandElement(b)},getPanelProps:function(){var b=FBEditor.getBridgeProps(),a;a=b.Ext.getCmp("panel-props-body");return a},updateTree:function(){var b=this,a=b.getPanelNavigation();if(a){a.loadData(b.content)}else{Ext.defer(function(){b.updateTree()},200)}},isLoadUrl:function(){var c=this,a=c.loadUrl,b;b=a&&a!=="undefined"?true:false;return b},loadFromUrl:function(){var b=this,a=b.loadUrl;if(!Ext.getCmp("panel-empty")||!Ext.getCmp("panel-empty").rendered){Ext.defer(function(){b.loadFromUrl()},500);return}Ext.log({level:"info",msg:"Загрузка тела из "+a});Ext.Ajax.request({url:a,scope:b,success:function(c){this.responseLoad(c)},failure:function(c){this.responseLoad(c)}})},responseLoad:function(a){var d=this,c=d.loadUrl,f=FBEditor.resource.Manager,j,b,h;try{if(a&&a.responseText&&/^<\?xml/ig.test(a.responseText)){j=new Promise(function(l,k){f.loadFromUrl(d.art,l)});j.then(function(){b=a.responseText;d.loadDataToEditor(b)})}else{throw Error()}}catch(g){h=" ("+g+")";Ext.log({level:"error",msg:"Ошибка загрузки тела книги",dump:{response:a,error:g}});Ext.Msg.show({title:"Ошибка",message:"Невозможно загрузить тело книги по адресу "+c+h,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}},loadDataToEditor:function(b){var f=this,c=f.getEditor(),d=Ext.getCmp("panel-main-content"),a;try{if(d.isActiveItem("main-editor")){f.needShowForm=true;d.fireEvent("contentEmpty")}}catch(g){if(f.needShowForm){d.fireEvent("contentDesc");f.needShowForm=false;d.fireEvent("contentBody")}throw g}a=f.isLoadUrl()?100:0;Ext.defer(function(){f.loadingProcess=true;f.createContent(b);f.loadingProcess=false;if(f.needShowForm){d.fireEvent("contentDesc");f.needShowForm=false;d.fireEvent("contentBody")}},a)},getPanelNavigation:function(){var b=this,c=FBEditor.getBridgeNavigation(),a;a=c.Ext&&c.Ext.getCmp&&c.Ext.getCmp("panel-body-navigation")?c.Ext&&c.Ext.getCmp&&c.Ext.getCmp("panel-body-navigation"):null;return a}},1,0,0,0,0,0,[FBEditor.view.panel.main.editor,"Manager"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.a.A",FBEditor.editor.view.toolbar.button.a.A,{},0,["main-editor-button-a"],["component","box","button","editor-toolbar-button-a","main-editor-button-a"],{component:true,box:true,button:true,"editor-toolbar-button-a":true,"main-editor-button-a":true},["widget.main-editor-button-a"],0,[FBEditor.view.panel.main.editor.button.a,"A"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ButtonController",FBEditor.editor.view.toolbar.button.ButtonController,{},0,0,0,0,["controller.main.editor.button"],0,[FBEditor.view.panel.main.editor.button,"ButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.AbstractButton",FBEditor.editor.view.toolbar.button.AbstractButton,{controller:"main.editor.button"},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.main.editor.button,"AbstractButton"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.annotation.AnnotationController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var k=this,c=k.getView(),d=c.getEditorManager(),g=FBEditor.editor.Factory,b={},f={},l=0,a=c.elementName,j,h;j=d.getRange();if(!j){c.disable();return}b.node=j.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement();while(f.parent.isStyleHolder||f.parent.isStyleType){b.node=b.parent;f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement()}b.title=b.parent;f.title=b.title.getElement();while(!(f.title.isTitle||f.title.isRoot)){b.title=b.title.parentNode;f.title=b.title.getElement()}if(f.title.isTitle){b.node=b.title;f.node=f.title}else{f.parent=b.parent.getElement();b.node=f.parent.hisName(a)?b.parent:b.node}b.parent=f.node.isRoot?b.node:b.node.parentNode;f.parent=b.parent.getElement();b.first=b.parent.firstChild;f.first=b.first?b.first.getElement():null;while(f.first&&(f.first.isEpigraph||f.first.isTitle)){l++;b.first=b.first.nextSibling;f.first=b.first?b.first.getElement():null}f.newEl=g.createElement(a);f.newEl.createScaffold();if(!j.collapsed){f.p=j.start.getElement();f.isRoot=f.p.isRoot;while(f.p&&!f.p.isP){f.p=f.isRoot?f.p.first():f.p.parent}if(!f.p){c.disable();return}f.parentP=f.p.parent;f.next=f.p.next();f.newEl.add(f.p)}f.parent.children.splice(l,0,f.newEl);h=d.getContent().getXml(true);if(!j.collapsed){if(f.next){f.parentP.insertBefore(f.p,f.next)}else{f.parentP.add(f.p)}}f.parent.children.splice(l,1);k.verify(h)}},0,0,0,0,["controller.main.editor.button.annotation"],0,[FBEditor.view.panel.main.editor.button.annotation,"AnnotationController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.annotation.Annotation",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-annotation",controller:"main.editor.button.annotation",html:'<i class="fa fa-font"></i>',tooltip:"Аннотация",elementName:"annotation"},0,["main-editor-button-annotation"],["component","box","button","main-editor-button-annotation"],{component:true,box:true,button:true,"main-editor-button-annotation":true},["widget.main-editor-button-annotation"],0,[FBEditor.view.panel.main.editor.button.annotation,"Annotation"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.UnboundedButtonController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var m=this,d=m.getView(),f=d.getEditorManager(),j=FBEditor.editor.Factory,b={},g={},c={},n={},a=d.elementName,l,k;k=f.getRange();if(!k){d.disable();return false}if(!k.collapsed){b.common=k.common;if(!b.common.getElement||b.common.getElement().isRoot){d.disable();return false}g.common=b.common.getElement();b.start=k.start;g.start=b.start.getElement();b.end=k.end;g.end=b.end.getElement();while(!g.common.splittable){b.common=b.common.parentNode;g.common=b.common.getElement();if(g.common.isRoot){d.disable();return false}}b.start=k.start;g.start=b.start.getElement();b.parentStart=b.start.parentNode;g.parentStart=b.parentStart.getElement();while(g.parentStart.elementId!==g.common.elementId){b.start=b.parentStart;g.start=b.start.getElement();b.parentStart=b.start.parentNode;g.parentStart=b.parentStart.getElement()}n.start=g.common.getChildPosition(g.start);b.end=k.end;g.end=b.end.getElement();b.parentEnd=b.end.parentNode;g.parentEnd=b.parentEnd.getElement();while(g.parentEnd.elementId!==g.common.elementId){b.end=b.parentEnd;g.end=b.end.getElement();b.parentEnd=b.end.parentNode;g.parentEnd=b.parentEnd.getElement()}n.end=g.common.getChildPosition(g.end);c.start=new RegExp("^"+Ext.String.escapeRegex(k.toString()));c.start2=new RegExp("^"+Ext.String.escapeRegex(g.start.getText()));c.end=new RegExp(Ext.String.escapeRegex(k.toString())+"$");c.end2=new RegExp(Ext.String.escapeRegex(g.end.getText())+"$");n.isStart=c.start.test(g.start.getText())||c.start2.test(k.toString());n.isEnd=c.end.test(g.end.getText())||c.end2.test(k.toString());g.newEl=j.createElement(a);g.newEl.createScaffold();n.count=n.end-n.start;n.start=!n.isStart?n.start+1:n.start;n.count=n.isStart&&n.isEnd?n.count+1:n.count;n.count=!n.isStart&&!n.isEnd?n.count-1:n.count;g.common.children.splice(n.start,0,g.newEl);g.rangeNext=g.common.children[n.start+n.count+1];g.range=g.common.children.splice(n.start+1,n.count);for(var h=0;h<n.count;h++){g.newEl.add(g.range[h])}l=m.getContentXml();for(h=0;h<n.count;h++){if(g.rangeNext){g.common.insertBefore(g.range[h],g.rangeNext)}else{g.common.add(g.range[h])}}g.common.children.splice(n.start,1);m.verify(l)}else{b.node=k.common;if(!b.node.getElement||b.node.getElement().isRoot){d.disable();return false}g.node=b.node.getElement();b.parent=b.node.parentNode;g.parent=b.parent.getElement();while(g.parent.isStyleHolder||g.parent.isStyleType){b.node=b.parent;g.node=b.node.getElement();b.parent=b.node.parentNode;g.parent=b.parent.getElement()}g.parent=b.parent.getElement();b.node=g.parent.hisName(a)?b.parent:b.node;b.parent=g.node.isRoot?b.node:b.node.parentNode;g.parent=b.parent.getElement();g.newEl=j.createElement(a);g.newEl.createScaffold();n=g.parent.getChildPosition(g.node)+1;g.parent.children.splice(n,0,g.newEl);l=m.getContentXml();g.parent.children.splice(n,1);m.verify(l)}return true}},0,0,0,0,0,0,[FBEditor.view.panel.main.editor.button,"UnboundedButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.blockquote.BlockquoteController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.blockquote"],0,[FBEditor.view.panel.main.editor.button.blockquote,"BlockquoteController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.blockquote.Blockquote",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-blockquote",controller:"main.editor.button.blockquote",html:'<i class="fa fa-quote-right"></i>',tooltip:"Цитата (Ctrl+Q)",elementName:"blockquote"},0,["main-editor-button-blockquote"],["component","box","button","main-editor-button-blockquote"],{component:true,box:true,button:true,"main-editor-button-blockquote":true},["widget.main-editor-button-blockquote"],0,[FBEditor.view.panel.main.editor.button.blockquote,"Blockquote"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.AbstractStyleButton",FBEditor.editor.view.toolbar.button.AbstractStyleButton,{},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.main.editor.button,"AbstractStyleButton"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.code.Code",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{id:"main-editor-button-code",html:'<i class="fa fa-code"></i>',tooltip:"Код",elementName:"code"},0,["main-editor-button-code"],["component","box","button","main-editor-button-code"],{component:true,box:true,button:true,"main-editor-button-code":true},["widget.main-editor-button-code"],0,[FBEditor.view.panel.main.editor.button.code,"Code"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.div.DivController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.div"],0,[FBEditor.view.panel.main.editor.button.div,"DivController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.div.Div",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-div",controller:"main.editor.button.div",html:'<i class="fa fa-cubes"></i>',tooltip:"Блок (Ctrl+D)",elementName:"div"},0,["main-editor-button-div"],["component","box","button","main-editor-button-div"],{component:true,box:true,button:true,"main-editor-button-div":true},["widget.main-editor-button-div"],0,[FBEditor.view.panel.main.editor.button.div,"Div"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.em.Em",FBEditor.editor.view.toolbar.button.em.Em,{},0,["main-editor-button-em"],["component","box","button","editor-toolbar-button-em","main-editor-button-em"],{component:true,box:true,button:true,"editor-toolbar-button-em":true,"main-editor-button-em":true},["widget.main-editor-button-em"],0,[FBEditor.view.panel.main.editor.button.em,"Em"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.epigraph.EpigraphController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var k=this,c=k.getView(),d=c.getEditorManager(),g=FBEditor.editor.Factory,b={},f={},a=c.elementName,j,h,l;j=d.getRange();if(!j){c.disable();return}b.node=j.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement();while(f.parent.isStyleHolder||f.parent.isStyleType){b.node=b.parent;f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement()}b.title=b.parent;f.title=b.title.getElement();while(!(f.title.isTitle||f.title.isRoot)){b.title=b.title.parentNode;f.title=b.title.getElement()}if(f.title.isTitle){b.node=b.title;f.node=f.title}else{f.parent=b.parent.getElement();b.node=f.parent.hisName(a)?b.parent:b.node}b.parent=f.node.isRoot?b.node:b.node.parentNode;f.parent=b.parent.getElement();b.first=b.parent.firstChild;f.first=b.first?b.first.getElement():null;f.newEl=g.createElement(a);f.newEl.createScaffold();if(!j.collapsed){f.p=j.start.getElement();f.isRoot=f.p.isRoot;while(f.p&&!f.p.isP){f.p=f.isRoot?f.p.first():f.p.parent}if(!f.p){c.disable();return}f.parentP=f.p.parent;f.next=f.p.next();f.newEl.add(f.p)}l=!f.first.isTitle?0:1;f.parent.children.splice(l,0,f.newEl);h=d.getContent().getXml(true);if(!j.collapsed){if(f.next){f.parentP.insertBefore(f.p,f.next)}else{f.parentP.add(f.p)}}f.parent.children.splice(l,1);k.verify(h)}},0,0,0,0,["controller.main.editor.button.epigraph"],0,[FBEditor.view.panel.main.editor.button.epigraph,"EpigraphController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.epigraph.Epigraph",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-epigraph",controller:"main.editor.button.epigraph",html:'<i class="fa fa-pinterest-p"></i>',tooltip:"Эпиграф (Ctrl+E)",elementName:"epigraph"},0,["main-editor-button-epigraph"],["component","box","button","main-editor-button-epigraph"],{component:true,box:true,button:true,"main-editor-button-epigraph":true},["widget.main-editor-button-epigraph"],0,[FBEditor.view.panel.main.editor.button.epigraph,"Epigraph"],0));(Ext.cmd.derive("FBEditor.view.window.img.Create",Ext.Window,{id:"window-img-create",title:"Создание изображения",width:300,height:340,modal:true,closeAction:"hide",layout:"fit",translateText:{inText:"Вставить в текст",create:"Создать",emptyImg:"Пустое изображение"},selectionRange:null,initComponent:function(){var a=this;a.items=[{xtype:"form",defaults:{margin:"10 0 0 10"},items:[{xtype:"image-editor-picture"},{xtype:"button-editor-select-img",scope:a},{xtype:"hidden",name:"src",value:""},{xtype:"displayfield",name:"name",value:a.translateText.emptyImg,submitValue:true}],buttonAlign:"center",buttons:[{xtype:"button",text:a.translateText.create,handler:function(){var c=FBEditor.getEditorManager(),d,b;d=a.down("form");b=d.getValues();b.range=a.selectionRange;b.name=b.name===a.translateText.emptyImg?"":b.name;a.close();c.createElement("img",b)}}]}];Ext.window.Window.prototype.initComponent.apply(this,arguments)},onHide:function(){var a=this,b;b={url:"undefined",name:a.translateText.emptyImg};a.updateData(b);Ext.window.Window.prototype.onHide.apply(this,arguments)},updateData:function(b){var a=this;a.down("image-editor-picture").updateView(b);a.down("[name=src]").setValue(b.url);a.down("[name=name]").setValue(b.name)}},0,["window-img-create"],["component","box","container","panel","window","window-img-create"],{component:true,box:true,container:true,panel:true,window:true,"window-img-create":true},["widget.window-img-create"],0,[FBEditor.view.window.img,"Create"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.img.ImgController",FBEditor.view.panel.main.editor.button.ButtonController,{onClick:function(){var d=this,c=d.getView(),b=c.getEditorManager(),g,f,a;f=b.getSelection();if(f){g=c.win||Ext.create("FBEditor.view.window.img.Create");a=f.getRangeAt(0);g.selectionRange={start:a.startContainer,offset:a.startOffset,oldValue:a.startContainer.nodeValue};c.win=g;g.show()}},onSync:function(){var g=this,d=g.getView(),c=d.getEditorManager(),f,b,a;f=c.getFocusElement();if(!f){d.disable();return}b=d.elementName;a=f.hisName(b);if(!a){d.enable()}else{d.disable()}}},0,0,0,0,["controller.main.editor.button.img"],0,[FBEditor.view.panel.main.editor.button.img,"ImgController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.img.Img",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-img",controller:"main.editor.button.img",html:'<i class="fa fa-picture-o"></i>',tooltip:"Изображение (Ctrl+P)",elementName:"img",win:null},0,["main-editor-button-img"],["component","box","button","main-editor-button-img"],{component:true,box:true,button:true,"main-editor-button-img":true},["widget.main-editor-button-img"],0,[FBEditor.view.panel.main.editor.button.img,"Img"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.note.Note",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{id:"main-editor-button-note",html:'<i class="fa fa-sticky-note-o"></i>',tooltip:"Сноска (Ctrl+Alt+N)",elementName:"note"},0,["main-editor-button-note"],["component","box","button","main-editor-button-note"],{component:true,box:true,button:true,"main-editor-button-note":true},["widget.main-editor-button-note"],0,[FBEditor.view.panel.main.editor.button.note,"Note"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notebody.NotebodyController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var h=this,g=h.getView(),f=g.getEditorManager(),b,a,d,c;b=f.getRange();if(!b){g.disable();return}a=b.end.getElement?b.end.getElement():f.getFocusElement();d=g.elementName;c=a.hisName("notes")||a.hasParentName(d);if(c){g.enable()}else{g.disable()}}},0,0,0,0,["controller.main.editor.button.notebody"],0,[FBEditor.view.panel.main.editor.button.notebody,"NotebodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notebody.Notebody",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-notebody",controller:"main.editor.button.notebody",html:'<i class="fa fa-sticky-note"></i>',tooltip:"Текст сноски",elementName:"notebody"},0,["main-editor-button-notebody"],["component","box","button","main-editor-button-notebody"],{component:true,box:true,button:true,"main-editor-button-notebody":true},["widget.main-editor-button-notebody"],0,[FBEditor.view.panel.main.editor.button.notebody,"Notebody"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notes.NotesController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var b=this,a=b.getView();a.enable()}},0,0,0,0,["controller.main.editor.button.notes"],0,[FBEditor.view.panel.main.editor.button.notes,"NotesController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.notes.Notes",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-notes",controller:"main.editor.button.notes",html:'<i class="fa fa-clone"></i>',tooltip:"Сноски",elementName:"notes"},0,["main-editor-button-notes"],["component","box","button","main-editor-button-notes"],{component:true,box:true,button:true,"main-editor-button-notes":true},["widget.main-editor-button-notes"],0,[FBEditor.view.panel.main.editor.button.notes,"Notes"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.AbstractLiHolderButton",FBEditor.view.panel.main.editor.button.AbstractButton,{isActiveSelection:function(){var k=this,d=k.getEditorManager(),c={},f={},b=k.elementName,l,j,g,a,h;j=d.getRange();if(!j){return false}c.first=j.start;l=c.first.viewportId;f.first=c.first.getElement?c.first.getElement():null;f.first=f.first?f.first.getParentName("p"):null;if(!f.first){return false}c.first=f.first.nodes[l];c.parent=c.first.parentNode;f.parent=c.parent.getElement();f.pos=f.parent.getChildPosition(f.first);g=d.getNamesElements(f.parent);g.splice(f.pos,1,b);a=d.getSchema();b=f.parent.getName();h=a.verify(b,g);return h}},0,0,["component","box","button"],{component:true,box:true,button:true},0,0,[FBEditor.view.panel.main.editor.button,"AbstractLiHolderButton"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.LiHolderButtonController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var b=this,a=b.getView();if(!a.isActiveSelection()){if(b.allowInnerList()){a.enable()}else{a.disable()}}else{a.enable()}},allowInnerList:function(){var h=this,a=h.getView(),g=a.getEditorManager(),f={},c={},b,d;b=g.getRange();if(!b){return false}c.node=b.start;f.node=c.node.getElement?c.node.getElement():null;f.li=f.node?f.node.getParentName("li"):null;d=f.li&&f.li.prev()?true:false;return d}},0,0,0,0,0,0,[FBEditor.view.panel.main.editor.button,"LiHolderButtonController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ol.OlController",FBEditor.view.panel.main.editor.button.LiHolderButtonController,{},0,0,0,0,["controller.main.editor.button.ol"],0,[FBEditor.view.panel.main.editor.button.ol,"OlController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ol.Ol",FBEditor.view.panel.main.editor.button.AbstractLiHolderButton,{id:"main-editor-button-ol",controller:"main.editor.button.ol",html:'<i class="fa fa-list-ol"></i>',tooltip:"Нумерованный список",elementName:"ol"},0,["main-editor-button-ol"],["component","box","button","main-editor-button-ol"],{component:true,box:true,button:true,"main-editor-button-ol":true},["widget.main-editor-button-ol"],0,[FBEditor.view.panel.main.editor.button.ol,"Ol"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.poem.PoemController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.poem"],0,[FBEditor.view.panel.main.editor.button.poem,"PoemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.poem.Poem",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-poem",controller:"main.editor.button.poem",html:'<i class="fa fa-pinterest fa-lg"></i>',tooltip:"Поэма",elementName:"poem"},0,["main-editor-button-poem"],["component","box","button","main-editor-button-poem"],{component:true,box:true,button:true,"main-editor-button-poem":true},["widget.main-editor-button-poem"],0,[FBEditor.view.panel.main.editor.button.poem,"Poem"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.pre.PreController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.pre"],0,[FBEditor.view.panel.main.editor.button.pre,"PreController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.pre.Pre",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-pre",controller:"main.editor.button.pre",html:'<span style="position: relative; font-family: monospace; font-size: 1.4em; top: 2px;">M</span>',tooltip:"Предварительно отформатированный текст (Ctrl+M)",elementName:"pre"},0,["main-editor-button-pre"],["component","box","button","main-editor-button-pre"],{component:true,box:true,button:true,"main-editor-button-pre":true},["widget.main-editor-button-pre"],0,[FBEditor.view.panel.main.editor.button.pre,"Pre"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.section.SectionController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var g=this,f=g.getView(),d=f.getEditorManager(),c={},b={},h,a;a=d.getRange();if(!a){f.disable();return}b.node=a.common;if(!b.node.getElement||b.node.getElement().isRoot){f.disable();return}h=b.node.viewportId;c.node=b.node.getElement();b.parent=b.node.parentNode;c.parent=b.parent.getElement();c.parent=c.node.getParentName("section");c.parent=c.parent?c.parent:c.node.getParentName("main");if(!c.parent){f.disable();return}b.parent=c.parent.nodes[h];b.next=b.parent.firstChild;c.next=b.next?b.next.getElement():null;while(c.next){if(c.next.isSection){f.disable();return}b.next=b.next.nextSibling;c.next=b.next?b.next.getElement():null}f.enable()}},0,0,0,0,["controller.main.editor.button.section"],0,[FBEditor.view.panel.main.editor.button.section,"SectionController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.section.Section",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-section",controller:"main.editor.button.section",html:'<i class="fa fa-cube"></i>',tooltip:"Вложенная секция (Ctrl+Shift+S)",elementName:"section",createOpts:{inner:true}},0,["main-editor-button-section"],["component","box","button","main-editor-button-section"],{component:true,box:true,button:true,"main-editor-button-section":true},["widget.main-editor-button-section"],0,[FBEditor.view.panel.main.editor.button.section,"Section"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.spacing.Spacing",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{id:"main-editor-button-spacing",html:'<i class="fa fa-text-width"></i>',tooltip:"Межбуквенный интервал (Ctrl+Shift+I)",elementName:"spacing"},0,["main-editor-button-spacing"],["component","box","button","main-editor-button-spacing"],{component:true,box:true,button:true,"main-editor-button-spacing":true},["widget.main-editor-button-spacing"],0,[FBEditor.view.panel.main.editor.button.spacing,"Spacing"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.strikethrough.Strikethrough",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{id:"main-editor-button-strikethrough",html:'<i class="fa fa-strikethrough"></i>',tooltip:"Зачёркнутый",elementName:"strikethrough"},0,["main-editor-button-strikethrough"],["component","box","button","main-editor-button-strikethrough"],{component:true,box:true,button:true,"main-editor-button-strikethrough":true},["widget.main-editor-button-strikethrough"],0,[FBEditor.view.panel.main.editor.button.strikethrough,"Strikethrough"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.strong.Strong",FBEditor.editor.view.toolbar.button.strong.Strong,{},0,["main-editor-button-strong"],["component","box","button","editor-toolbar-button-strong","main-editor-button-strong"],{component:true,box:true,button:true,"editor-toolbar-button-strong":true,"main-editor-button-strong":true},["widget.main-editor-button-strong"],0,[FBEditor.view.panel.main.editor.button.strong,"Strong"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.sub.Sub",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{id:"main-editor-button-sub",html:'<i class="fa fa-subscript"></i>',tooltip:"Нижний индекс (Ctrl+X)",elementName:"sub"},0,["main-editor-button-sub"],["component","box","button","main-editor-button-sub"],{component:true,box:true,button:true,"main-editor-button-sub":true},["widget.main-editor-button-sub"],0,[FBEditor.view.panel.main.editor.button.sub,"Sub"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subscription.SubscriptionController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var k=this,c=k.getView(),d=c.getEditorManager(),g=FBEditor.editor.Factory,b={},f={},a=c.elementName,j,h;j=d.getRange();if(!j){c.disable();return}b.node=j.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement();while(f.parent.isStyleHolder||f.parent.isStyleType){b.node=b.parent;f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement()}f.newEl=g.createElement(a);f.newEl.createScaffold();if(!j.collapsed){f.p=j.start.getElement();f.isRoot=f.p.isRoot;while(f.p&&!f.p.isP){f.p=f.isRoot?f.p.first():f.p.parent}if(!f.p){c.disable();return}f.parentP=f.p.parent;f.next=f.p.next();f.newEl.add(f.p)}f.parent.children.push(f.newEl);h=d.getContent().getXml(true);f.parent.children.pop();if(!j.collapsed){if(f.next){f.parentP.insertBefore(f.p,f.next)}else{f.parentP.add(f.p)}}k.verify(h)}},0,0,0,0,["controller.main.editor.button.subscription"],0,[FBEditor.view.panel.main.editor.button.subscription,"SubscriptionController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subscription.Subscription",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-subscription",controller:"main.editor.button.subscription",html:'<i class="fa fa-thumb-tack"></i>',tooltip:"Подпись",elementName:"subscription"},0,["main-editor-button-subscription"],["component","box","button","main-editor-button-subscription"],{component:true,box:true,button:true,"main-editor-button-subscription":true},["widget.main-editor-button-subscription"],0,[FBEditor.view.panel.main.editor.button.subscription,"Subscription"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subtitle.SubtitleController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{},0,0,0,0,["controller.main.editor.button.subtitle"],0,[FBEditor.view.panel.main.editor.button.subtitle,"SubtitleController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.subtitle.Subtitle",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-subtitle",controller:"main.editor.button.subtitle",html:'<i class="fa fa-h-square fa-lg"></i>',tooltip:"Подзаголовок",elementName:"subtitle"},0,["main-editor-button-subtitle"],["component","box","button","main-editor-button-subtitle"],{component:true,box:true,button:true,"main-editor-button-subtitle":true},["widget.main-editor-button-subtitle"],0,[FBEditor.view.panel.main.editor.button.subtitle,"Subtitle"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.sup.Sup",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{id:"main-editor-button-sup",html:'<i class="fa fa-superscript"></i>',tooltip:"Верхний индекс (Ctrl+Shift+X)",elementName:"sup"},0,["main-editor-button-sup"],["component","box","button","main-editor-button-sup"],{component:true,box:true,button:true,"main-editor-button-sup":true},["widget.main-editor-button-sup"],0,[FBEditor.view.panel.main.editor.button.sup,"Sup"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.TableController",FBEditor.view.panel.main.editor.button.UnboundedButtonController,{onClick:function(){},verifyResult:function(g,f){var j=this,b=j.getView(),c=b.getEditorManager(),a={},d={},h,k;h=c.getRange();if(!h){return}FBEditor.view.panel.main.editor.button.UnboundedButtonController.prototype.verifyResult.apply(this,arguments);k=b.down("main-editor-button-table-menu-insertTable");b.menu.fireEvent("sync");if(!g){a.node=h.common;if(!a.node.getElement||a.node.getElement().isRoot){return false}d.node=a.node.getElement();if(d.node.hasParentName("table")||d.node.isTable){b.enable();k.disable()}}else{k.enable()}}},0,0,0,0,["controller.main.editor.button.table"],0,[FBEditor.view.panel.main.editor.button.table,"TableController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.MenuController",Ext.app.ViewController,{onSync:function(){var c=this,a=c.getView(),b;b=a.query("main-editor-button-table-menu-item");Ext.Array.each(b,function(d){d.fireEvent("sync")})}},0,0,0,0,["controller.main.editor.button.table.menu"],0,[FBEditor.view.panel.main.editor.button.table.menu,"MenuController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItemController",Ext.app.ViewController,{onSync:function(){var g=this,a=g.getView(),f=FBEditor.getEditorManager(),c={},d={},b;b=f.getRange();if(!b){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();if(!d.node.hasParentName("table")){a.disable();return false}a.enable();return true},onClick:function(){var h=this,j=h.getView(),l=j.cmdName,k=j.cmdOpts,d=FBEditor.getEditorManager(),c,a,g,f,b;if(l){f=d.getRange();c=f.start;b=Ext.create("FBEditor.editor.command.table."+l,{node:c,opts:k});if(b.execute()){a=c.getElement();g=a.getHistory();g.add(b)}}}},0,0,0,0,["controller.main.editor.button.table.menu.item"],0,[FBEditor.view.panel.main.editor.button.table.menu.item,"AbstractItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem",Ext.menu.Item,{controller:"main.editor.button.table.menu.item",cmdName:"",cmdOpts:{},listeners:{click:"onClick",sync:"onSync"}},0,["main-editor-button-table-menu-item"],["component","box","menuitem","main-editor-button-table-menu-item"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true},["widget.main-editor-button-table-menu-item"],0,[FBEditor.view.panel.main.editor.button.table.menu.item,"AbstractItem"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.delCol.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-delCol",text:"Удалить столбец",cmdName:"DelColCommand"},0,["main-editor-button-table-menu-delCol"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-delCol"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-delCol":true},["widget.main-editor-button-table-menu-delCol"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.delCol,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.delRow.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-delRow",text:"Удалить строку",cmdName:"DelRowCommand"},0,["main-editor-button-table-menu-delRow"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-delRow"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-delRow":true},["widget.main-editor-button-table-menu-delRow"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.delRow,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.delTable.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-delTable",text:"Удалить таблицу",cmdName:"DeleteCommand"},0,["main-editor-button-table-menu-delTable"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-delTable"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-delTable":true},["widget.main-editor-button-table-menu-delTable"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.delTable,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.joinCells.ItemController",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItemController,{onSync:function(){var g=this,a=g.getView(),f=FBEditor.getEditorManager(),c={},d={},b;b=f.getRange();if(!b||b.collapsed){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();d.table=d.node.isTable?d.node:d.node.getParentName("table");if(!d.table||!d.table.getSelection().isActive()){a.disable();return false}a.enable();a.cmdOpts={table:d.table.nodes[c.node.viewportId],viewportId:c.node.viewportId,size:d.table.getSelection().getSize()};return true}},0,0,0,0,["controller.main.editor.button.table.menu.item.joinCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.joinCells,"ItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.joinCells.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-joinCells",controller:"main.editor.button.table.menu.item.joinCells",text:"Объединить ячейки",cmdName:"JoinCellsCommand"},0,["main-editor-button-table-menu-joinCells"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-joinCells"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-joinCells":true},["widget.main-editor-button-table-menu-joinCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.joinCells,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-insertColNext",text:"Вставить столбец справа",cmdName:"InsertColNextCommand"},0,["main-editor-button-table-menu-insertColNext"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertColNext"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertColNext":true},["widget.main-editor-button-table-menu-insertColNext"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertColNext,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-insertColPrev",text:"Вставить столбец слева",cmdName:"InsertColPrevCommand"},0,["main-editor-button-table-menu-insertColPrev"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertColPrev"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertColPrev":true},["widget.main-editor-button-table-menu-insertColPrev"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertColPrev,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-insertRowNext",text:"Вставить строку ниже",cmdName:"InsertRowNextCommand"},0,["main-editor-button-table-menu-insertRowNext"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertRowNext"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertRowNext":true},["widget.main-editor-button-table-menu-insertRowNext"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertRowNext,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-insertRowPrev",text:"Вставить строку выше",cmdName:"InsertRowPrevCommand"},0,["main-editor-button-table-menu-insertRowPrev"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertRowPrev"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertRowPrev":true},["widget.main-editor-button-table-menu-insertRowPrev"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertRowPrev,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.size.PickerController",Ext.app.ViewController,{onMouseOverCell:function(a){var c=this,b=c.getView();b.setActiveCell(a)},onClickCell:function(c){var d=this,a=d.getView(),b=FBEditor.getEditorManager();b.createElement("table",{size:c});a.up("main-editor-button-table-menu").hide()}},0,0,0,0,["controller.main.editor.button.table.menu.size"],0,[FBEditor.view.panel.main.editor.button.table.menu.size,"PickerController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.size.Picker",Ext.Container,{controller:"main.editor.button.table.menu.size",activeCell:[0,0],minCells:[5,5],maxCells:[20,20],rows:[],cellCls:"picker-create-table-cell",cellActiveCls:"picker-create-table-cell-active",listeners:{mouseOverCell:"onMouseOverCell",clickCell:"onClickCell"},afterRender:function(){var a=this;a.add(a.createGrid());a.add({xtype:"component",html:(a.activeCell[0]+1)+" x "+(a.activeCell[1]+1),style:"text-align: center"});Ext.container.Container.prototype.afterRender.apply(this,arguments)},createGrid:function(){var d=this,f=[],g,a;for(var c=0;c<d.maxCells[1];c++){g=[];for(var b=0;b<d.maxCells[0];b++){a=d.createCell(b,c);g.push(a)}d.rows.push(g);f.push({xtype:"container",layout:"hbox",items:g})}return f},createCell:function(d,j){var f=this,b,g,a,c,h;c=f.activeCell[0]<f.minCells[0]?f.minCells[0]:f.activeCell[0]+1;a=f.activeCell[1]<f.minCells[1]?f.minCells[1]:f.activeCell[1]+1;g=d>=c||j>=a;h=d<=f.activeCell[0]&&j<=f.activeCell[1]?f.cellActiveCls:"";b={xtype:"component",html:"<div></div>",cls:f.cellCls+" "+h,hidden:g,afterRender:function(){f.rows[j][d]=this;this.getEl().on({mouseover:function(){f.fireEvent("mouseOverCell",[d,j])},click:function(){f.fireEvent("clickCell",[d,j])}})}};return b},setActiveCell:function(d){var k=this,n=k.rows,b=k.items.last(),m,h,a,l,c;k.activeCell=d;l=k.activeCell[0]<k.minCells[0]-1?k.minCells[0]-1:k.activeCell[0]+1;a=k.activeCell[1]<k.minCells[1]-1?k.minCells[1]-1:k.activeCell[1]+1;for(var g=0;g<n.length;g++){for(var f=0;f<n[g].length;f++){m=n[g][f];h=f>l||g>a;m.setHidden(h);c=f<=k.activeCell[0]&&g<=k.activeCell[1];m.removeCls(k.cellActiveCls);if(c){m.addCls(k.cellActiveCls)}}}b.setHtml((k.activeCell[0]+1)+" x "+(k.activeCell[1]+1))}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[FBEditor.view.panel.main.editor.button.table.menu.size,"Picker"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.size.SizeMenu",Ext.menu.Menu,{minWidth:80,picker:null,initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.panel.main.editor.button.table.menu.size.Picker");b.picker=a;b.items=[a];Ext.menu.Menu.prototype.initComponent.apply(this,arguments)},onHide:function(){var a=this;a.picker.setActiveCell([0,0]);Ext.menu.Menu.prototype.onHide.apply(this,arguments)}},0,0,["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},0,0,[FBEditor.view.panel.main.editor.button.table.menu.size,"SizeMenu"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.insertTable.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-insertTable",text:"Вставить таблицу",initComponent:function(){var a=this;a.menu=Ext.create("FBEditor.view.panel.main.editor.button.table.menu.size.SizeMenu");FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem.prototype.initComponent.apply(this,arguments)}},0,["main-editor-button-table-menu-insertTable"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-insertTable"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-insertTable":true},["widget.main-editor-button-table-menu-insertTable"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.insertTable,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.splitCells.ItemController",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItemController,{onSync:function(){var g=this,a=g.getView(),f=FBEditor.getEditorManager(),c={},d={},b;b=f.getRange();if(!b||!b.collapsed){a.disable();return false}c.node=b.common;if(!c.node.getElement||c.node.getElement().isRoot){a.disable();return false}d.node=c.node.getElement();d.td=d.node.isTable?d.node:d.node.getParentName("td");if(!d.td||!d.td.getLinks()){a.disable();return false}a.enable();a.cmdOpts={td:d.td,viewportId:c.node.viewportId};return true}},0,0,0,0,["controller.main.editor.button.table.menu.item.splitCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.splitCells,"ItemController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.item.splitCells.Item",FBEditor.view.panel.main.editor.button.table.menu.item.AbstractItem,{id:"main-editor-button-table-menu-splitCells",controller:"main.editor.button.table.menu.item.splitCells",text:"Разъединить ячейку",cmdName:"SplitCellsCommand"},0,["main-editor-button-table-menu-splitCells"],["component","box","menuitem","main-editor-button-table-menu-item","main-editor-button-table-menu-splitCells"],{component:true,box:true,menuitem:true,"main-editor-button-table-menu-item":true,"main-editor-button-table-menu-splitCells":true},["widget.main-editor-button-table-menu-splitCells"],0,[FBEditor.view.panel.main.editor.button.table.menu.item.splitCells,"Item"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.menu.Menu",Ext.menu.Menu,{id:"main-editor-button-table-menu",controller:"main.editor.button.table.menu",listeners:{sync:"onSync"},initComponent:function(){var a=this;a.items=[{xtype:"main-editor-button-table-menu-insertTable"},{xtype:"menuseparator"},{xtype:"main-editor-button-table-menu-insertRowPrev"},{xtype:"main-editor-button-table-menu-insertRowNext"},{xtype:"main-editor-button-table-menu-insertColPrev"},{xtype:"main-editor-button-table-menu-insertColNext"},{xtype:"menuseparator"},{xtype:"main-editor-button-table-menu-delRow"},{xtype:"main-editor-button-table-menu-delCol"},{xtype:"main-editor-button-table-menu-delTable"},{xtype:"menuseparator"},{xtype:"main-editor-button-table-menu-joinCells"},{xtype:"main-editor-button-table-menu-splitCells"}];Ext.menu.Menu.prototype.initComponent.apply(this,arguments)}},0,["main-editor-button-table-menu"],["component","box","container","panel","menu","main-editor-button-table-menu"],{component:true,box:true,container:true,panel:true,menu:true,"main-editor-button-table-menu":true},["widget.main-editor-button-table-menu"],0,[FBEditor.view.panel.main.editor.button.table.menu,"Menu"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.table.Table",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-table",controller:"main.editor.button.table",html:'<i class="fa fa-table fa-lg"></i>',tooltip:"Таблица",elementName:"table",initComponent:function(){var a=this;a.menu=Ext.create("FBEditor.view.panel.main.editor.button.table.menu.Menu");FBEditor.view.panel.main.editor.button.AbstractButton.prototype.initComponent.apply(this,arguments)}},0,["main-editor-button-table"],["component","box","button","main-editor-button-table"],{component:true,box:true,button:true,"main-editor-button-table":true},["widget.main-editor-button-table"],0,[FBEditor.view.panel.main.editor.button.table,"Table"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.title.TitleController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var k=this,c=k.getView(),d=c.getEditorManager(),g=FBEditor.editor.Factory,a=c.elementName,b={},f={},j,h;j=d.getRange();if(!j){c.disable();return}b.node=j.common;if(!b.node.getElement||b.node.getElement().isRoot){c.disable();return}f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement();while(f.parent.isStyleHolder||f.parent.isStyleType){b.node=b.parent;f.node=b.node.getElement();b.parent=b.node.parentNode;f.parent=b.parent.getElement()}f.newEl=g.createElement(a);f.newEl.createScaffold();if(!j.collapsed){f.p=j.start.getElement();f.isRoot=f.p.isRoot;while(f.p&&!f.p.isP){f.p=f.isRoot?f.p.first():f.p.parent}if(!f.p){c.disable();return}f.parentP=f.p.parent;f.next=f.p.next();f.newEl.add(f.p)}f.parent.children.unshift(f.newEl);h=d.getContent().getXml(true);if(!j.collapsed){if(f.next){f.parentP.insertBefore(f.p,f.next)}else{f.parentP.add(f.p)}}f.parent.children.splice(0,1);k.verify(h)}},0,0,0,0,["controller.main.editor.button.title"],0,[FBEditor.view.panel.main.editor.button.title,"TitleController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.title.Title",FBEditor.view.panel.main.editor.button.AbstractButton,{id:"main-editor-button-title",controller:"main.editor.button.title",html:'<i class="fa fa-header"></i>',tooltip:"Заголовок (Ctrl+H)",elementName:"title"},0,["main-editor-button-title"],["component","box","button","main-editor-button-title"],{component:true,box:true,button:true,"main-editor-button-title":true},["widget.main-editor-button-title"],0,[FBEditor.view.panel.main.editor.button.title,"Title"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.titlebody.TitleBodyController",FBEditor.view.panel.main.editor.button.ButtonController,{onSync:function(){var g=this,f=g.getView(),d=f.getEditorManager(),a,c,b;a=d.getContent();c=f.elementName;b=a.children[0].hisName(c);if(!b){f.enable()}else{f.disable()}}},0,0,0,0,["controller.main.editor.button.titlebody"],0,[FBEditor.view.panel.main.editor.button.titlebody,"TitleBodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.titlebody.TitleBody",FBEditor.view.panel.main.editor.button.title.Title,{id:"main-editor-button-titlebody",controller:"main.editor.button.titlebody",html:'<i class="fa fa-header fa-border"></i>',tooltip:"Заголовок для всей книги",createOpts:{body:true}},0,["main-editor-button-titlebody"],["component","box","button","main-editor-button-title","main-editor-button-titlebody"],{component:true,box:true,button:true,"main-editor-button-title":true,"main-editor-button-titlebody":true},["widget.main-editor-button-titlebody"],0,[FBEditor.view.panel.main.editor.button.titlebody,"TitleBody"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ul.UlController",FBEditor.view.panel.main.editor.button.LiHolderButtonController,{},0,0,0,0,["controller.main.editor.button.ul"],0,[FBEditor.view.panel.main.editor.button.ul,"UlController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.ul.Ul",FBEditor.view.panel.main.editor.button.AbstractLiHolderButton,{id:"main-editor-button-ul",controller:"main.editor.button.ul",html:'<i class="fa fa-list-ul"></i>',tooltip:"Маркированный список",elementName:"ul"},0,["main-editor-button-ul"],["component","box","button","main-editor-button-ul"],{component:true,box:true,button:true,"main-editor-button-ul":true},["widget.main-editor-button-ul"],0,[FBEditor.view.panel.main.editor.button.ul,"Ul"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.button.underline.Underline",FBEditor.view.panel.main.editor.button.AbstractStyleButton,{id:"main-editor-button-underline",html:'<i class="fa fa-underline"></i>',tooltip:"Подчёркнутый (Ctrl+U)",elementName:"underline"},0,["main-editor-button-underline"],["component","box","button","main-editor-button-underline"],{component:true,box:true,button:true,"main-editor-button-underline":true},["widget.main-editor-button-underline"],0,[FBEditor.view.panel.main.editor.button.underline,"Underline"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.toolbar.Toolbar",FBEditor.editor.view.toolbar.Toolbar,{items:[{xtype:"main-editor-button-notes"},{xtype:"main-editor-button-notebody"},{xtype:"tbspacer",width:20},{xtype:"main-editor-button-titlebody"},{xtype:"main-editor-button-section"},{xtype:"tbspacer",width:20},{xtype:"main-editor-button-title"},{xtype:"main-editor-button-epigraph"},{xtype:"main-editor-button-annotation"},{xtype:"main-editor-button-subscription"},{xtype:"tbspacer",width:20},{xtype:"main-editor-button-div"},{xtype:"main-editor-button-subtitle"},{xtype:"main-editor-button-blockquote"},{xtype:"main-editor-button-pre"},{xtype:"main-editor-button-poem"},{xtype:"main-editor-button-ul"},{xtype:"main-editor-button-ol"},{xtype:"tbspacer",width:20},{xtype:"main-editor-button-table"},{xtype:"tbspacer",width:20},{xtype:"main-editor-button-img"},{xtype:"main-editor-button-a"},{xtype:"main-editor-button-note"},{xtype:"tbspacer",width:20},{xtype:"main-editor-button-strong"},{xtype:"main-editor-button-em"},{xtype:"main-editor-button-underline"},{xtype:"main-editor-button-strikethrough"},{xtype:"main-editor-button-spacing"},{xtype:"main-editor-button-sub"},{xtype:"main-editor-button-sup"},{xtype:"main-editor-button-code"},{xtype:"tbspacer",width:20},{xtype:"editor-toggleButton"}],createButtons:function(){var a=this;a.buttons=[a.down("main-editor-button-notes"),a.down("main-editor-button-notebody"),a.down("main-editor-button-titlebody"),a.down("main-editor-button-section"),a.down("#main-editor-button-title"),a.down("main-editor-button-epigraph"),a.down("main-editor-button-annotation"),a.down("main-editor-button-subscription"),{sequence:[a.down("main-editor-button-div"),a.down("main-editor-button-subtitle"),a.down("main-editor-button-blockquote"),a.down("main-editor-button-pre"),a.down("main-editor-button-poem")]},a.down("main-editor-button-ul"),a.down("main-editor-button-ol"),a.down("main-editor-button-table"),a.down("main-editor-button-img"),a.down("main-editor-button-a"),a.down("main-editor-button-note"),a.down("main-editor-button-strong"),a.down("main-editor-button-em"),a.down("main-editor-button-underline"),a.down("main-editor-button-strikethrough"),a.down("main-editor-button-spacing"),a.down("main-editor-button-sub"),a.down("main-editor-button-sup"),a.down("main-editor-button-code")]}},0,["main-editor-toolbar"],["component","box","container","toolbar","editor-toolbar","main-editor-toolbar"],{component:true,box:true,container:true,toolbar:true,"editor-toolbar":true,"main-editor-toolbar":true},["widget.main-editor-toolbar"],0,[FBEditor.view.panel.main.editor.toolbar,"Toolbar"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.viewport.ViewportController",FBEditor.editor.view.viewport.ViewportController,{onSyncScroll:function(a){var f=this,b=f.getView(),d=b.getContent(),c=a.getContent(),g=c.scrollTop;d.scrollTop=g+a.getHeight()}},0,0,0,0,["controller.main.editor.viewport"],0,[FBEditor.view.panel.main.editor.viewport,"ViewportController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.viewport.Viewport",FBEditor.editor.view.viewport.Viewport,{controller:"main.editor.viewport",cls:"editor-viewport main-editor-viewport",listeners:{syncScroll:"onSyncScroll"},createRootElement:false,createRoot:function(){var c=this,b=c.getEditor(),a;if(c.createRootElement){FBEditor.editor.view.viewport.Viewport.prototype.createRoot.apply(this,arguments);a=b.getManager();if(a.isLoadUrl()){a.loadFromUrl()}a.updateTree()}}},0,["main-editor-viewport"],["component","box","container","editor-viewport","main-editor-viewport"],{component:true,box:true,container:true,"editor-viewport":true,"main-editor-viewport":true},["widget.main-editor-viewport"],0,[FBEditor.view.panel.main.editor.viewport,"Viewport"],0));(Ext.cmd.derive("FBEditor.view.panel.main.editor.Editor",FBEditor.editor.view.Editor,{id:"main-editor",controller:"view.main.editor",layout:"border",listeners:{loadData:"onLoadData",split:"onSplit",unsplit:"onUnsplit",syncContent:"onSyncContent"},rootElementName:"fb3-body",viewports:{north:null,south:null},southViewportConfig:{xtype:"main-editor-viewport",height:"50%",split:{size:8},region:"south"},panelContent:null,createManager:function(){var a=this;a.manager=a.manager||Ext.create("FBEditor.view.panel.main.editor.Manager",a)},initEditor:function(){var a=this,b;b=Ext.widget({xtype:"main-editor-viewport",region:"center",createRootElement:true});a.viewports.north=b;a.add(b)},createToolbar:function(){return Ext.create("FBEditor.view.panel.main.editor.toolbar.Toolbar")},addSouthViewport:function(){var b=this,c,a;a=Ext.widget(b.southViewportConfig);b.viewports.south=a;b.add(a);c=b.viewports.north;b.fireEvent("syncContent",c);a.fireEvent("syncScroll",c)},removeSouthViewport:function(){var c=this,a=c.getManager(),b;b=c.viewports.south;a.removeNodes(b.id);c.remove(b);c.viewports.south=null},getPanelContent:function(){var b=this,a;a=b.panelContent||Ext.getCmp("panel-main-content");return a},getViewports:function(){var b=this,a=[];a.push(b.viewports.north);if(b.viewports.south){a.push(b.viewports.south)}return a}},0,["main-editor"],["component","box","container","panel","base-editor","main-editor"],{component:true,box:true,container:true,panel:true,"base-editor":true,"main-editor":true},["widget.main-editor"],0,[FBEditor.view.panel.main.editor,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.ResourcesController",Ext.app.ViewController,{},0,0,0,0,["controller.panel.resources"],0,[FBEditor.view.panel.resources,"ResourcesController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.view.ResourcesViewController",Ext.app.ViewController,{onFocusChange:function(c,g,b){var d=this,f=FBEditor.getBridgeProps(),a;a=f.Ext.getCmp("panel-props-resources");if(a&&a.fireEvent){a.fireEvent("loadData",b)}},onItemDblClick:function(b,a){var c=this,d=a.getData(),f=FBEditor.getBridgeWindow();if(d.isFolder){f.FBEditor.resource.Manager.restoreActiveFolder(d.name)}},onItemClick:function(b,a){var d=this,f=a.getData(),g=FBEditor.getBridgeWindow(),c;if(!f.isFolder&&(c=g.FBEditor.resource.Manager.getSelectFunction())){c(f)}}},0,0,0,0,["controller.view.resources"],0,[FBEditor.view.panel.resources.view,"ResourcesViewController"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.GreatResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><tpl if="isFolder"><div class="resource-thumb-wrap resource-great-thumb resource-folder-wrap"><tpl else><div class="resource-thumb-wrap resource-great-thumb"></tpl><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"GreatResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.LargeResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><tpl if="isFolder"><div class="resource-thumb-wrap resource-large-thumb resource-folder-wrap"><tpl else><div class="resource-thumb-wrap resource-large-thumb"></tpl><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"LargeResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.NormalResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><tpl if="isFolder"><div class="resource-thumb-wrap resource-normal-thumb resource-folder-wrap"><tpl else><div class="resource-thumb-wrap resource-normal-thumb"></tpl><tpl if="url"><img src="{url}" class="resource-thumb-img resource-thumb-img-{extension}" /><tpl else><span class="resource-thumb-img-folder fa"></span></tpl><br/><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"NormalResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.SmallResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-small-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"SmallResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.ListResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-list-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"ListResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.tpl.TableResource",Ext.XTemplate,{constructor:function(){var a=this;a.html='<tpl for="."><div class="resource-thumb-wrap resource-table-thumb"><span class="resource-thumb-img resource-thumb-img-{extension} fa fa-lg" /></span><span class="resource-thumb-name" title="{name}">{baseName}</span><span class="resource-thumb-date">{date}</span><span class="resource-thumb-size">{size}</span></div></tpl>'}},1,0,0,0,0,0,[FBEditor.view.panel.resources.tpl,"TableResource"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.view.ResourcesView",Ext.view.View,{id:"view-resources",controller:"view.resources",itemSelector:"div.resource-thumb-wrap",emptyText:"Нет доступных ресурсов",deferEmptyText:false,listeners:{focuschange:"onFocusChange",itemdblclick:"onItemDblClick",itemclick:"onItemClick"},tplTypes:{great:"GreatResource",large:"LargeResource",normal:"NormalResource",small:"SmallResource",list:"ListResource",table:"TableResource"},tplDefaultType:"great",initComponent:function(){var a=this,c=a.tplTypes[a.tplDefaultType],b;b=a.getTplName(c);a.tpl=Ext.create(b);a.store=Ext.create("FBEditor.store.resource.Resource");Ext.view.View.prototype.initComponent.apply(this,arguments)},setStoreData:function(c){var b=this,a=b.store;a.setData(c)},setTpl:function(a){var b=this,c=b.getTplName(a);b.tpl=Ext.create(c);b.refresh()},getTplName:function(b){var c=this,a=c.tplTypes,d;d=a[b]?a[b]:a[c.tplDefaultType];d="FBEditor.view.panel.resources.tpl."+d;return d}},0,["view-resources"],["component","box","dataview","view-resources"],{component:true,box:true,dataview:true,"view-resources":true},["widget.view-resources"],0,[FBEditor.view.panel.resources.view,"ResourcesView"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.selectview.SelectViewStore",Ext.data.Store,{fields:["type","name"],data:[{type:"great",name:"Огромные значки"},{type:"large",name:"Крупные значки"},{type:"normal",name:"Обычные значки"},{type:"small",name:"Мелкие значки"},{type:"list",name:"Список"},{type:"table",name:"Таблица"}]},0,0,0,0,0,0,[FBEditor.view.panel.resources.control.selectview,"SelectViewStore"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.selectview.SelectView",Ext.form.ComboBox,{fieldLabel:"Вид",labelWidth:30,queryMode:"local",displayField:"name",valueField:"type",forceSelection:true,editable:false,value:"great",listeners:{select:function(c,a){var b=a[0].getData().type;Ext.getCmp("view-resources").setTpl(b)}},initComponent:function(){var a=this;a.store=Ext.create("FBEditor.view.panel.resources.control.selectview.SelectViewStore");Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)}},0,["panel-resources-selectview"],["component","box","field","textfield","pickerfield","combobox","combo","panel-resources-selectview"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"panel-resources-selectview":true},["widget.panel-resources-selectview"],0,[FBEditor.view.panel.resources.control.selectview,"SelectView"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.control.Control",Ext.panel.Panel,{id:"panel-resources-control",layout:"hbox",defaults:{margin:"5"},initComponent:function(){var a=this;a.items=[{xtype:"button-load-resource"},{xtype:"button-createfolder-resource"},{xtype:"panel-resources-selectview"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-resources-control"],["component","box","container","panel","panel-resources-control"],{component:true,box:true,container:true,panel:true,"panel-resources-control":true},["widget.panel-resources-control"],0,[FBEditor.view.panel.resources.control,"Control"],0));(Ext.cmd.derive("FBEditor.view.panel.resources.Resources",Ext.panel.Panel,{id:"panel-resources",controller:"panel.resources",autoScroll:true,bodyPadding:5,initComponent:function(){var a=this;a.items=[{xtype:"panel-resources-control"},{xtype:"view-resources"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-resources"],["component","box","container","panel","panel-resources"],{component:true,box:true,container:true,panel:true,"panel-resources":true},["widget.panel-resources"],0,[FBEditor.view.panel.resources,"Resources"],0));(Ext.cmd.derive("FBEditor.view.panel.empty.Empty",Ext.panel.Panel,{id:"panel-empty",layout:"fit",translateText:{loading:"Загрузка..."},initComponent:function(){var a=this;a.items=[{html:a.translateText.loading}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-empty"],["component","box","container","panel","panel-empty"],{component:true,box:true,container:true,panel:true,"panel-empty":true},["widget.panel-empty"],0,[FBEditor.view.panel.empty,"Empty"],0));(Ext.cmd.derive("FBEditor.view.panel.main.content.Content",FBEditor.view.panel.main.Abstract,{id:"panel-main-content",controller:"panel.main.content",items:[{xtype:"panel-empty"},{xtype:"form-desc"},{xtype:"panel-resources"},{xtype:"main-editor"}],listeners:{resize:"onResize",contentBody:"onContentBody",contentDesc:"onContentDesc",contentResources:"onContentResources",contentEmpty:"onContentEmpty"},activeItem:"form-desc",panelName:"content",region:"center",collapsible:false,layout:"card",minWidth:610,overflowX:true,margin:"0 2px 0 2px",bodyPadding:0,mainEditor:null,panelToolstab:null,toolstab:null,afterRender:function(){var b=this,a,c;a=b.getMainEditor();a.createRootElement();c=a.getManager();FBEditor.view.panel.main.Abstract.prototype.afterRender.apply(this,arguments);if(c.isLoadUrl()){b.fireEvent("contentBody")}},getMainEditor:function(){var b=this,a;a=b.mainEditor||Ext.getCmp("main-editor");b.mainEditor=a;return a},getPanelMainToolstab:function(){var b=this,a;a=b.panelToolstab||Ext.getCmp("panel-main-toolstab");b.panelToolstab=a;return a},getToolstab:function(){var a=this,b;b=a.toolstab||Ext.getCmp("panel-toolstab-main");a.toolstab=b;return b},isActiveItem:function(f){var c=this,a,b,d;b=c.getLayout();d=b.getActiveItem();a=d.getId()===f;return a},openBody:function(){var a=this,b;if(!Ext.getCmp("main-editor")||!Ext.getCmp("main-editor").rendered){Ext.defer(function(){a.openBody()},500)}Ext.create("FBEditor.command.OpenBody").execute();b=Ext.getCmp("panel-body-navigation");b.selectRoot()}},0,["panel-main-content"],["component","box","container","panel","panel-main-content"],{component:true,box:true,container:true,panel:true,"panel-main-content":true},["widget.panel-main-content"],0,[FBEditor.view.panel.main.content,"Content"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.PropsController",FBEditor.view.panel.main.DetachController,{},0,0,0,0,["controller.panel.main.props"],0,[FBEditor.view.panel.main.props,"PropsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.CardController",Ext.app.ViewController,{onActivePanelResources:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-resources")},onActivePanelBody:function(){var g=this,b=g.getView(),f=FBEditor.getEditorManager(),h,a,d,c;b.setActiveItem("panel-props-body");c=f.getRange();if(!c||c&&!c.start.parentNode){a=f.getContent();d=a.getNodeHelper().getNode();c={start:f.getDeepFirst(d)}}h={startNode:c.start,startOffset:c.offset?c.offset.start:0};f.setCursor(h)},onActivePanelDesc:function(){var b=this,a=b.getView();a.setActiveItem("panel-props-desc")}},0,0,0,0,["controller.panel.main.props.card"],0,[FBEditor.view.panel.main.props,"CardController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Abstract",Ext.panel.Panel,{afterRender:function(){var a=this;a.syncContent();Ext.panel.Panel.prototype.afterRender.apply(this,arguments)},getContentId:function(){throw Error("Не реализован метод view.panel.main.props.Abstract#getContentId")},syncContent:function(){var b=this,f=b.getContentId(),c=FBEditor.getBridgeWindow(),a,d;a=c.Ext.getCmp("panel-main-content");d=a.getLayout().getActiveItem();if(d.id===f){Ext.getCmp("panel-main-props-card").setActiveItem(b.id)}}},0,0,["component","box","container","panel"],{component:true,box:true,container:true,panel:true},0,0,[FBEditor.view.panel.main.props,"Abstract"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.DescController",Ext.app.ViewController,{onAccessHub:function(){},onShowContainer:function(c){var d=this,b=d.getView(),a=b.containerList;Ext.Array.each(a,function(h){var f,g;f=Ext.getCmp(h);g=c&&c.getId&&h===c.getId();f.setVisible(g);if(!g&&f.cleanContainer){f.cleanContainer()}})}},0,0,0,0,["controller.panel.props.desc"],0,[FBEditor.view.panel.main.props.desc,"DescController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.ContainerController",Ext.app.ViewController,{onBeforeActivate:function(){var c=this,a=c.getView(),b;b=a.editor;if(b){a.remove(b);a.editor=null}},onAfterRender:function(){var c=this,a=FBEditor.getEditorManager(),b;b=a.getFocusElement();if(b){c.onLoadData(b)}},onLoadData:function(f){var d=this,a=d.getView(),j=a.getPanelProps(),g,b,c;if(!a.isVisible()){j.fireEvent("showContainer",a)}g=f.getData();if(g){c=a.editor;if(!c||c&&c.elementName!==g.elementName){if(c){a.remove(c)}try{b=g.elementName.replace(/-/,"");b="FBEditor.view.panel.main.props.desc.editor."+b+".Editor";c=Ext.create(b,{elementName:g.elementName});a.add(c)}catch(h){c=null}}if(c){c.updateData(g,true)}a.editor=c}}},0,0,0,0,["controller.panel.props.desc.editor.container"],0,[FBEditor.view.panel.main.props.desc.editor,"ContainerController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.AbstractEditorController",Ext.app.ViewController,{onChange:function(){var a=this;a.updateElement()},updateElement:function(){var c=this,a=c.getView(),b;if(!a.isLoad){b=a.getValues();if(a.isValid()){a.element.update(b)}}}},0,0,0,0,["controller.panel.props.desc.editor"],0,[FBEditor.view.panel.main.props.desc.editor,"AbstractEditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.AbstractEditor",Ext.form.Panel,{controller:"panel.props.desc.editor",listeners:{change:"onChange"},layout:"anchor",width:"100%",defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("form").fireEvent("change")}}},elementName:null,element:null,isLoad:false,constructor:function(b){var a=this;a.elementName=b.elementName;Ext.form.Panel.prototype.constructor.apply(this,arguments)},updateData:function(c,d){var b=this,a;a=b.getForm();b.isLoad=d;b.element=c.el?c.el:b.element;a.reset();a.setValues(c);b.isLoad=false}},1,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor,"AbstractEditor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.a.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{translateText:{href:"Ссылка"},initComponent:function(){var a=this;a.items=[{name:"href",fieldLabel:a.translateText.href,anchor:"100%",allowBlank:false}];FBEditor.view.panel.main.props.desc.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.a,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.annotation.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.annotation,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.bibliodescription.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.bibliodescription,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.history.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.history,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.preamble.Editor",FBEditor.view.panel.main.props.desc.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.desc.editor.preamble,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.editor.Container",Ext.Container,{id:"panel-props-desc-editor-container",controller:"panel.props.desc.editor.container",listeners:{beforeactivate:"onBeforeActivate",afterRender:"onAfterRender",loadData:"onLoadData"},hidden:true,editor:null,panelProps:null,cleanContainer:function(){var b=this,a=FBEditor.getEditorManager();a.resetFocus()},getPanelProps:function(){var a=this,b;b=a.panelProps||Ext.getCmp("panel-props-desc");a.panelProps=b;return b}},0,["panel-props-desc-editor-container"],["component","box","container","panel-props-desc-editor-container"],{component:true,box:true,container:true,"panel-props-desc-editor-container":true},["widget.panel-props-desc-editor-container"],0,[FBEditor.view.panel.main.props.desc.editor,"Container"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.persons.PersonsController",FBEditor.view.panel.main.props.desc.search.ContainerController,{},0,0,0,0,["controller.props.desc.search.persons"],0,[FBEditor.view.panel.main.props.desc.search.persons,"PersonsController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.search.persons.Persons",FBEditor.view.panel.main.props.desc.search.Container,{controller:"props.desc.search.persons",id:"props-desc-search-persons",xtypeContainerItems:"container-desc-search-persons",afterRender:function(){var b=this,c=FBEditor.getBridgeWindow(),a;a=c.Ext.ComponentQuery.query("form-desc-relations-subject-name")[0];b.setReferenceCmp(a);FBEditor.view.panel.main.props.desc.search.Container.prototype.afterRender.apply(this,arguments)}},0,["props-desc-search-persons"],["component","box","container","props-desc-search-container","props-desc-search-persons"],{component:true,box:true,container:true,"props-desc-search-container":true,"props-desc-search-persons":true},["widget.props-desc-search-persons"],0,[FBEditor.view.panel.main.props.desc.search.persons,"Persons"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.desc.Desc",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-desc",controller:"panel.props.desc",listeners:{accessHub:"onAccessHub",showContainer:"onShowContainer"},translateText:{loadUrl:"ID произведения для загрузки описания",saveUrl:"URL для сохранения описания"},containerList:["panel-props-desc-editor-container","props-desc-search-arts","props-desc-search-persons"],initComponent:function(){var f=this,j=FBEditor.getBridgeWindow(),b=j.FBEditor.desc.Manager,a=j.FBEditor.route.Manager,h=a.getParams(),g,c,d;f.items=[{xtype:"panel-props-desc-editor-container"},{xtype:"props-desc-search-arts"},{xtype:"props-desc-search-persons"}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"form-desc"},setLoadUrl:function(a){var b=this,c;c=b.down('[name="desc-load-url"]');c.setValue(a)},getSaveField:function(){var a=this,b;b=a.down('[name="desc-save-url"]');return b}},0,["panel-props-desc"],["component","box","container","panel","panel-props-desc"],{component:true,box:true,container:true,panel:true,"panel-props-desc":true},["widget.panel-props-desc"],0,[FBEditor.view.panel.main.props.desc,"Desc"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.ResourcesController",Ext.app.ViewController,{_deferId:null,onClick:function(){var a=this;clearTimeout(a._deferId)},onLoadData:function(a){var b=this,d=a?a.getData():null,c=FBEditor.getBridgeProps();if(d){c.Ext.getCmp("props-resources-info").update(d);b.setResourceButtons(d.name);b.setVisibleItems(true);if(d.isFolder){c.Ext.getCmp("button-save-resource").setVisible(false);c.Ext.getCmp("button-move-resource").setVisible(false)}}else{b._deferId=Ext.defer(function(){b.setVisibleItems(false);b.setResourceButtons(null)},200)}},setVisibleItems:function(d){var c=this,a=c.getView(),b=a.items;b.each(function(f){f.setVisible(d)})},setResourceButtons:function(c){var a,b=FBEditor.getBridgeProps();if(b.Ext&&b.Ext.getCmp){a=[b.Ext.getCmp("button-delete-resource"),b.Ext.getCmp("button-save-resource"),b.Ext.getCmp("button-move-resource")];Ext.Array.each(a,function(d){d.setResource(c)})}}},0,0,0,0,["controller.panel.props.resources"],0,[FBEditor.view.panel.main.props.resources,"ResourcesController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.Info",Ext.Component,{id:"props-resources-info",initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<div class="resource-info">','<div class="resource-info-name">{baseName}</div>','<tpl if="isCover"><div class="resource-info-cover">Обложка книги</div></tpl>','<tpl if="!isFolder"><div><span>Размеры:</span> {width} x {height}</div></tpl>',"<div><span>Тип:</span> {type}</div>",'<tpl if="isFolder"><div><span>Ресурсов:</span> {total}</div>',"<tpl else><div><span>Объём:</span> {size}</div></tpl>","<div><span>Изменён:</span> {date}</div>",'<tpl if="totalElements"><div><span>Использован в тексте:</span> {totalElements}</div></tpl>',"</div>");Ext.Component.prototype.initComponent.apply(this,arguments)}},0,["props-resources-info"],["component","box","props-resources-info"],{component:true,box:true,"props-resources-info":true},["widget.props-resources-info"],0,[FBEditor.view.panel.main.props.resources,"Info"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.resources.Resources",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-resources",controller:"panel.props.resources",defaults:{hidden:true},listeners:{loadData:"onLoadData",click:{element:"el",fn:"onClick"}},initComponent:function(){var a=this;a.items=[{xtype:"props-resources-info"},{xtype:"button-delete-resource"},{xtype:"button-save-resource"},{xtype:"button-move-resource"}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"panel-resources"}},0,["panel-props-resources"],["component","box","container","panel","panel-props-resources"],{component:true,box:true,container:true,panel:true,"panel-props-resources":true},["widget.panel-props-resources"],0,[FBEditor.view.panel.main.props.resources,"Resources"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.BodyController",Ext.app.ViewController,{onBeforeActivate:function(){var d=this,a=d.getView(),c,b,f;Ext.getCmp("props-element-info").update();b=a.getConvertBtn();f=a.getDeleteBtn();b.setVisible(false);f.setVisible(false);c=a.editor;if(c){a.remove(c);a.editor=null}},onAfterRender:function(){var c=this,a=FBEditor.getEditorManager(),b;b=a.getFocusElement();if(b){c.onLoadData(b)}},onLoadData:function(d){var k=this,l=k.getView(),b=l.getPropsInfo(),m=l.getConvertBtn(),f=l.getDeleteBtn(),h=l.editor,g,a,c;g=d.getData();c=g.el;if(g){b.update(g);m.element=c;f.element=c;m.setVisible(true);f.setVisible(true);if(c.isRoot){f.setVisible(false)}if(c.isImg||c.isRoot||!m.verify()){m.setVisible(false)}if(!h||h&&h.elementName!==g.elementName){if(h){l.remove(h)}try{a=g.elementName.replace(/-/,"");a="FBEditor.view.panel.main.props.body.editor."+a+".Editor";h=Ext.create(a,{elementName:g.elementName});l.add(h)}catch(j){h=null}}if(h){h.updateData(g,true)}l.editor=h}}},0,0,0,0,["controller.panel.props.body"],0,[FBEditor.view.panel.main.props.body,"BodyController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.Info",Ext.Component,{id:"props-element-info",initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<div class="element-info">','<div class="element-info-name">{elementName}</div>','<div><tpl if="htmlPath"><span>Путь html:</span> {htmlPath}</tpl></div>',"</div>");Ext.Component.prototype.initComponent.apply(this,arguments)}},0,["props-element-info"],["component","box","props-element-info"],{component:true,box:true,"props-element-info":true},["widget.props-element-info"],0,[FBEditor.view.panel.main.props.body,"Info"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.AbstractEditorController",Ext.app.ViewController,{onChange:function(){var a=this;a.updateElement()},updateElement:function(){var c=this,a=c.getView(),b;if(!a.isLoad){b=a.getValues();if(a.isValid()){a.element.update(b)}}}},0,0,0,0,["controller.panel.props.body.editor"],0,[FBEditor.view.panel.main.props.body.editor,"AbstractEditorController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.AbstractEditor",Ext.form.Panel,{controller:"panel.props.body.editor",listeners:{change:"onChange"},layout:"anchor",width:"100%",defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("form").fireEvent("change")}}},elementName:null,element:null,isLoad:false,panelProps:null,constructor:function(b){var a=this;a.elementName=b.elementName;Ext.form.Panel.prototype.constructor.apply(this,arguments)},updateData:function(c,d){var b=this,a;a=b.getForm();b.isLoad=d;b.element=c.el?c.el:b.element;a.reset();a.setValues(c);b.isLoad=false},setVisibleButtons:function(f){var b=this,d,a,c;d=b.getPanelProps();a=d.getConvertBtn();c=d.getDeleteBtn();a.setVisible(f);c.setVisible(f)},getPanelProps:function(){var a=this,b;b=a.panelProps||Ext.getCmp("panel-props-body");a.panelProps=b;return b}},1,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor,"AbstractEditor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.a.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{href:"Ссылка"},initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"},{name:"href",fieldLabel:a.translateText.href,anchor:"100%",allowBlank:false}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.a,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.annotation.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.annotation,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.blockquote.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.blockquote,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input.Controller",Ext.app.ViewController,{onBlur:function(){var d=this,a=d.getView(),c=a.getForm(),g=c.down("#"+a.getId()),f=g.getValue(),b;if(f==""){c.fireEvent("change");return}b=f.match(/^(\d+(\.\d+)?)(em|ex|%|mm)?$/);if(b!==null){g.setValue(b[1]);if(b[3]){c.down("combobox[name="+g.getName()+"-size]").setValue(b[3])}else{c.fireEvent("change")}}}},0,0,0,0,["controller.panel.main.props.body.editor.fields.sizeselect.input"],0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input,"Controller"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input.Input",Ext.form.field.Text,{controller:"panel.main.props.body.editor.fields.sizeselect.input",translateText:{widthError:"По шаблону d+(.d+)?(em|ex|%|mm). Например: 1.5em"},regex:/^\d+(\.\d+)?/,listeners:{blur:"onBlur"},initComponent:function(){var a=this;a.regexText=a.translateText.widthError;Ext.form.field.Text.prototype.initComponent.apply(this,arguments)},setValue:function(d){var c=this,a,b;if(d){a=d.match(/^(\d+(\.\d+)?)(em|ex|%|mm)?$/);b=c.up("form");if(a!==null){arguments[0]=a[1];if(a[3]){b.down("combobox[name="+c.getName()+"-size]").setValue(a[3])}}else{arguments[0]=d}}Ext.form.field.Text.prototype.setValue.apply(this,arguments)},getSubmitValue:function(){var b=this,a=b.up("form"),d=a.down("#"+this.id),c;c=d.getValue();if(c==""){return""}c+=a.down("combobox[name="+d.getName()+"-size]").getValue();return c},getForm:function(){var b=this,a;a=b.form||b.up("form");b.form=a;return a}},0,["panel-props-body-editor-fields-sizeselect-input"],["component","box","field","textfield","panel-props-body-editor-fields-sizeselect-input"],{component:true,box:true,field:true,textfield:true,"panel-props-body-editor-fields-sizeselect-input":true},["widget.panel-props-body-editor-fields-sizeselect-input"],0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect.input,"Input"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.Store",Ext.data.Store,{sorters:[{property:"text",direction:"ASC"}],fields:["value","text"],data:[{value:"em",text:"em"},{value:"ex",text:"ex"},{value:"%",text:"%"},{value:"mm",text:"mm"}]},0,0,0,0,0,0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect,"Store"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.SizeSelect",Ext.form.FieldContainer,{layout:{type:"hbox",pack:"start",align:"stretch"},initComponent:function(){var b=this,a;a=Ext.create("FBEditor.view.panel.main.props.body.editor.fields.sizeselect.Store");b.items=[{xtype:"panel-props-body-editor-fields-sizeselect-input",width:53,name:b.name},{xtype:"combo",width:60,name:b.name+"-size",store:a,queryMode:"local",valueField:"value",displayField:"text",value:"em",editable:false,submitValue:false,listeners:{change:function(){this.up("form").fireEvent("change")}}}];Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments)}},0,["panel-props-body-editor-fields-sizeselect"],["component","box","container","fieldcontainer","panel-props-body-editor-fields-sizeselect"],{component:true,box:true,container:true,fieldcontainer:true,"panel-props-body-editor-fields-sizeselect":true},["widget.panel-props-body-editor-fields-sizeselect"],0,[FBEditor.view.panel.main.props.body.editor.fields.sizeselect,"SizeSelect"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.img.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{prefixName:"",translateText:{emptyImg:"Пустое изображение",alt:"Альтернативный текст",width:"Ширина",minWidth:"Мин. ширина",maxWidth:"Макс. ширина"},initComponent:function(){var a=this;a.items=[{xtype:"image-editor-picture"},{xtype:"button-editor-select-img",scope:a,style:{marginLeft:"10px"}},{xtype:"displayfield",name:a.prefixName+"name",value:a.translateText.emptyImg,listeners:{}},{xtype:"hidden",name:a.prefixName+"src",value:"undefined",submitValue:true},{name:a.prefixName+"id",fieldLabel:"ID",anchor:"100%"},{name:a.prefixName+"alt",fieldLabel:a.translateText.alt,anchor:"100%"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:a.translateText.width,name:a.prefixName+"width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:a.translateText.minWidth,name:a.prefixName+"min-width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:a.translateText.maxWidth,name:a.prefixName+"max-width"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)},updateData:function(d,f){var b=this,c=b.prefixName,a={};b.isLoad=f;b.element=d.el?d.el:b.element;d.src=d.src?d.src:d.name;d.url=d.url?d.url:d.src;d[c+"name"]=d.name?d.name:b.translateText.emptyImg;Ext.Object.each(d,function(g,h){a[c+g]=h});b.getForm().setValues(a);b.down("image-editor-picture").updateView({url:d.url});b.isLoad=false},reset:function(){var a=this,b;b={url:"undefined"};a.updateData(b);FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.reset.apply(this,arguments)}},0,["panel-props-body-editor-img"],["component","box","container","panel","form","panel-props-body-editor-img"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-img":true},["widget.panel-props-body-editor-img"],0,[FBEditor.view.panel.main.props.body.editor.img,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.img.ImgController",FBEditor.view.panel.main.props.body.editor.AbstractEditorController,{onChange:function(){var b=this,a=b.getView();a.up("panel-props-body-editor-div").fireEvent("change")}},0,0,0,0,["controller.panel.props.body.editor.marker.img"],0,[FBEditor.view.panel.main.props.body.editor.div.marker.img,"ImgController"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.img.Img",FBEditor.view.panel.main.props.body.editor.img.Editor,{controller:"panel.props.body.editor.marker.img",prefixName:"marker-",defaults:{xtype:"textfield",labelAlign:"top",checkChangeBuffer:200,listeners:{change:function(){this.up("panel-props-body-editor-div").fireEvent("change")}}},updateData:function(d,f){var b=this,c=b.prefixName,a={};d.src=d.src?d.src:d.name;d.url=d.url?d.url:d.src;d.name=d.name?d.name:b.translateText.emptyImg;Ext.Object.each(d,function(g,h){a[c+g]=h});b.getForm().setValues(a);b.down("image-editor-picture").updateView({url:d.url})}},0,["panel-props-body-editor-marker-img"],["component","box","container","panel","form","panel-props-body-editor-img","panel-props-body-editor-marker-img"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-img":true,"panel-props-body-editor-marker-img":true},["widget.panel-props-body-editor-marker-img"],0,[FBEditor.view.panel.main.props.body.editor.div.marker.img,"Img"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.marker.Marker",Ext.form.FieldSet,{collapsible:true,collapsed:true,border:true,padding:10,margin:"10 0 0 0",listeners:{collapse:function(){this.setMarker(false);this.reset()},expand:function(){this.setMarker(true)}},initComponent:function(){var a=this;a.items=[{xtype:"panel-props-body-editor-marker-img"},{xtype:"hidden",name:"marker",value:false,submitValue:true}];Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},updateData:function(c,f){var b=this,a,d;a=c.el.marker;if(a){b.expand();d=a.img.getData();b.down("panel-props-body-editor-marker-img").updateData(d,f)}else{b.collapse()}},setMarker:function(b){var a=this;a.down("[name=marker]").setRawValue(b);a.up("form").fireEvent("change")},reset:function(){var a=this;a.down("panel-props-body-editor-marker-img").reset()}},0,["panel-props-body-editor-marker"],["component","box","container","fieldset","panel-props-body-editor-marker"],{component:true,box:true,container:true,fieldset:true,"panel-props-body-editor-marker":true},["widget.panel-props-body-editor-marker"],0,[FBEditor.view.panel.main.props.body.editor.div.marker,"Marker"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.div.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{prefixName:"",translateText:{width:"Ширина",minWidth:"Мин. ширина",maxWidth:"Макс. ширина",floatText:"Обтекание",align:"Выравнивание",bindTo:"Привязать к",border:"Граница",onOnePage:"on-one-page",markerText:"Маркер"},initComponent:function(){var b=this,a;a={floatStore:Ext.create("Ext.data.Store",{fields:["value","text"],data:[{value:"",text:"ничего"},{value:"left",text:"слева"},{value:"right",text:"справа"},{value:"center",text:"по центру"},{value:"default",text:"по умолчанию"}]}),alignStore:Ext.create("Ext.data.Store",{fields:["text"],data:[{value:"",text:"ничего"},{value:"left",text:"слева"},{value:"right",text:"справа"},{value:"center",text:"по центру"},{value:"justify",text:"по ширине"}]})};b.items=[{name:b.prefixName+"id",fieldLabel:"ID",anchor:"100%"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:b.translateText.width,name:b.prefixName+"width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:b.translateText.minWidth,name:b.prefixName+"min-width"},{xtype:"panel-props-body-editor-fields-sizeselect",labelAlign:"left",fieldLabel:b.translateText.maxWidth,name:b.prefixName+"max-width"},{xtype:"combo",name:b.prefixName+"float",labelAlign:"left",fieldLabel:b.translateText.floatText,store:a.floatStore,queryMode:"local",valueField:"value",displayField:"text",editable:false},{xtype:"combo",name:b.prefixName+"align",labelAlign:"left",fieldLabel:b.translateText.align,store:a.alignStore,queryMode:"local",valueField:"value",displayField:"text",editable:false},{xtype:"checkbox",name:b.prefixName+"border",labelAlign:"left",fieldLabel:b.translateText.border,inputValue:"true"},{xtype:"checkbox",name:b.prefixName+"on-one-page",labelAlign:"left",fieldLabel:b.translateText.onOnePage,inputValue:"true"},{name:b.prefixName+"bindto",fieldLabel:b.translateText.bindTo,anchor:"100%"},{xtype:"panel-props-body-editor-marker",title:b.translateText.markerText}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)},updateData:function(d,f){var c=this,b=c.getForm(),a;c.isLoad=f;c.element=d.el?d.el:c.element;b.reset();b.setValues(d);c.down("panel-props-body-editor-marker").updateData(d,f);c.isLoad=false}},0,["panel-props-body-editor-div"],["component","box","container","panel","form","panel-props-body-editor-div"],{component:true,box:true,container:true,panel:true,form:true,"panel-props-body-editor-div":true},["widget.panel-props-body-editor-div"],0,[FBEditor.view.panel.main.props.body.editor.div,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.epigraph.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.epigraph,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.fb3body.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.fb3body,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.note.RoleStore",Ext.data.Store,{fields:["value","text"],data:[{value:"auto",text:"auto"},{value:"footnote",text:"footnote"},{value:"endnote",text:"endnote"},{value:"comment",text:"comment"},{value:"other",text:"other"}]},0,0,0,0,0,0,[FBEditor.view.panel.main.props.body.editor.note,"RoleStore"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.note.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{href:"Ссылка",autotext:"Автотекст",role:"Тип"},initComponent:function(){var a=this,b;b=Ext.create("FBEditor.view.panel.main.props.body.editor.note.RoleStore");a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"},{name:"href",fieldLabel:a.translateText.href,anchor:"100%",allowBlank:false},{xtype:"combobox",name:"role",fieldLabel:a.translateText.role,anchor:"100%",store:b,valueField:"value"},{xtype:"checkbox",name:"autotext",fieldLabel:a.translateText.autotext,labelAlign:"left",labelWidth:70,inputValue:"true"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.note,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.notebody.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.notebody,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.notes.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{show:"show"},initComponent:function(){var a=this;a.items=[{xtype:"checkbox",name:"show",labelAlign:"left",labelWidth:50,fieldLabel:a.translateText.show,inputValue:"true"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.notes,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.ol.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.ol,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.pre.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.pre,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.section.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{translateText:{article:"article"},initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%",allowBlank:false},{xtype:"checkbox",name:"article",labelAlign:"left",labelWidth:50,fieldLabel:a.translateText.article,inputValue:"true"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.section,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.stanza.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.stanza,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.subscription.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.subscription,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.table.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.table,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.td.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{updateData:function(){var a=this;FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.updateData.apply(this,arguments);a.setVisibleButtons(false)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.td,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.title.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{initComponent:function(){var a=this;a.items=[{name:"id",fieldLabel:"ID",anchor:"100%"}];FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.initComponent.apply(this,arguments)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.title,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.tr.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{updateData:function(){var a=this;FBEditor.view.panel.main.props.body.editor.AbstractEditor.prototype.updateData.apply(this,arguments);a.setVisibleButtons(false)}},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.tr,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.editor.ul.Editor",FBEditor.view.panel.main.props.body.editor.AbstractEditor,{},0,0,["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},0,0,[FBEditor.view.panel.main.props.body.editor.ul,"Editor"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.body.Body",FBEditor.view.panel.main.props.Abstract,{id:"panel-props-body",controller:"panel.props.body",layout:{type:"vbox"},listeners:{beforeactivate:"onBeforeActivate",afterRender:"onAfterRender",loadData:"onLoadData"},editor:null,propsInfo:null,convertBtn:null,deleteBtn:null,initComponent:function(){var a=this;a.items=[{xtype:"props-element-info"},{xtype:"button-editor-convert-element",width:"100%",hidden:true,style:{margin:"0 0 10px 0"}},{xtype:"button-editor-delete-element",width:"100%",hidden:true,style:{margin:"0 0 10px 0"}}];FBEditor.view.panel.main.props.Abstract.prototype.initComponent.apply(this,arguments)},getContentId:function(){return"main-editor"},getPropsInfo:function(){var a=this,b;b=a.propsInfo||a.down("props-element-info");a.propsInfo=b;return b},getConvertBtn:function(){var b=this,a;a=b.convertBtn||b.down("button-editor-convert-element");b.convertBtn=a;return a},getDeleteBtn:function(){var a=this,b;b=a.deleteBtn||a.down("button-editor-delete-element");a.deleteBtn=b;return b}},0,["panel-props-body"],["component","box","container","panel","panel-props-body"],{component:true,box:true,container:true,panel:true,"panel-props-body":true},["widget.panel-props-body"],0,[FBEditor.view.panel.main.props.body,"Body"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Card",Ext.panel.Panel,{id:"panel-main-props-card",controller:"panel.main.props.card",layout:"card",listeners:{activePanelResources:"onActivePanelResources",activePanelDesc:"onActivePanelDesc",activePanelBody:"onActivePanelBody"},initComponent:function(){var a=this;a.items=[{xtype:"panel-props-desc"},{xtype:"panel-props-resources"},{xtype:"panel-props-body"}];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["panel-main-props-card"],["component","box","container","panel","panel-main-props-card"],{component:true,box:true,container:true,panel:true,"panel-main-props-card":true},["widget.panel-main-props-card"],0,[FBEditor.view.panel.main.props,"Card"],0));(Ext.cmd.derive("FBEditor.view.panel.main.props.Props",FBEditor.view.panel.main.AbstractDetach,{id:"panel-main-props",controller:"panel.main.props",panelName:"props",title:"Свойства",overflowY:"auto",cls:"panel-main-props",initComponent:function(){var a=this;a.items=[{xtype:"panel-main-props-card"}];FBEditor.view.panel.main.AbstractDetach.prototype.initComponent.apply(this,arguments)}},0,["panel-main-props"],["component","box","container","panel","panel-main-props"],{component:true,box:true,container:true,panel:true,"panel-main-props":true},["widget.panel-main-props"],0,[FBEditor.view.panel.main.props,"Props"],0));(Ext.cmd.derive("FBEditor.view.main.Main",Ext.container.Container,{id:"main",controller:"main",layout:{type:"border"},cls:"fb3",listeners:{resize:"onResize",focusDetachPanels:"onFocusDetachPanels",checkWidthPanels:"onCheckWidthPanels",closedetachpanels:"onDetachPanel",closeapplication:"onCloseApplication",restoredetachpanel:"onRestoreDetachPanel",accessHub:"onAccessHub"},panelConfig:{navigation:{xtype:"panel-main-navigation",width:"15%",region:"west",detachable:true,collapsible:true},props:{xtype:"panel-main-props",width:"15%",region:"east",detachable:true,collapsible:true}},windowPanels:{navigation:null,props:null},initComponent:function(){var a=this;if(!FBEditor.parentWindow){a.items=[{xtype:"panel-main-tools"},{xtype:"panel-main-content"}]}Ext.container.Container.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;if(!FBEditor.parentWindow){Ext.Object.each(a.windowPanels,function(b){if(!FBEditor.getLocalStorage().getItem(b)){a.add(a.panelConfig[b])}else{a.fireEvent("restoredetachpanel",b)}})}Ext.container.Container.prototype.afterRender.apply(this,arguments)},createPanel:function(b){var c=this,d,a;d="panel-main-"+b;a=c.add({xtype:d,region:"center"});document.title=document.title+" - "+a.title},attachPanel:function(a,c){var b=this,d;d="panel-main-"+a;if(!b.contains(Ext.getCmp(d))){FBEditor.childWindow[a]=null;b.add(b.panelConfig[a]);b.windowPanels[a]=null}},removeDetachedPanel:function(c){var b=this,a,d;a=c.name;b.windowPanels[a]=c;d="panel-main-"+a;if(b.contains(Ext.getCmp(d))){Ext.getCmp(d).close()}}},0,["main"],["component","box","container","main"],{component:true,box:true,container:true,main:true},["widget.main"],0,[FBEditor.view.main,"Main"],0));
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(a){a.URL=a.URL||a.webkitURL;if(a.Blob&&a.URL){try{new Blob();return}catch(c){}}var b=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||(function(q){var g=function(A){return Object.prototype.toString.call(A).match(/^\[object\s(.*)\]$/)[1]},z=function n(){this.data=[]},x=function j(C,A,B){this.data=C;this.size=C.length;this.type=A;this.encoding=B},r=z.prototype,w=x.prototype,t=q.FileReaderSync,d=function(A){this.code=this[this.name=A]},s=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),v=s.length,m=q.URL||q.webkitURL||q,u=m.createObjectURL,f=m.revokeObjectURL,l=m,p=q.btoa,k=q.atob,h=q.ArrayBuffer,o=q.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;x.fake=w.fake=true;while(v--){d.prototype[s[v]]=v+1}if(!m.createObjectURL){l=q.URL=function(B){var A=document.createElementNS("http://www.w3.org/1999/xhtml","a"),C;A.href=B;if(!("origin" in A)){if(A.protocol.toLowerCase()==="data:"){A.origin=null}else{C=B.match(y);A.origin=C&&C[1]}}return A}}l.createObjectURL=function(B){var C=B.type,A;if(C===null){C="application/octet-stream"}if(B instanceof x){A="data:"+C;if(B.encoding==="base64"){return A+";base64,"+B.data}else{if(B.encoding==="URI"){return A+","+decodeURIComponent(B.data)}}if(p){return A+";base64,"+p(B.data)}else{return A+","+encodeURIComponent(B.data)}}else{if(u){return u.call(m,B)}}};l.revokeObjectURL=function(A){if(A.substring(0,5)!=="data:"&&f){f.call(m,A)}};r.append=function(E){var G=this.data;if(o&&(E instanceof h||E instanceof o)){var F="",B=new o(E),C=0,D=B.length;for(;C<D;C++){F+=String.fromCharCode(B[C])}G.push(F)}else{if(g(E)==="Blob"||g(E)==="File"){if(t){var A=new t();G.push(A.readAsBinaryString(E))}else{throw new d("NOT_READABLE_ERR")}}else{if(E instanceof x){if(E.encoding==="base64"&&k){G.push(k(E.data))}else{if(E.encoding==="URI"){G.push(decodeURIComponent(E.data))}else{if(E.encoding==="raw"){G.push(E.data)}}}}else{if(typeof E!=="string"){E+=""}G.push(unescape(encodeURIComponent(E)))}}}};r.getBlob=function(A){if(!arguments.length){A=null}return new x(this.data.join(""),A,"raw")};r.toString=function(){return"[object BlobBuilder]"};w.slice=function(D,A,C){var B=arguments.length;if(B<3){C=null}return new x(this.data.slice(D,B>1?A:this.data.length),C,this.encoding)};w.toString=function(){return"[object Blob]"};w.close=function(){this.size=0;delete this.data};return z}(a));a.Blob=function(h,g){var k=g?(g.type||""):"";var f=new b();if(h){for(var j=0,d=h.length;j<d;j++){f.append(h[j])}}return f.getBlob(k)}}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content||this));
/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.JSZip=b()}}}(function(){var d,b,a;return(function c(g,l,j){function h(q,n){if(!l[q]){if(!g[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(f){return f(q,!0)}throw new Error("Cannot find module '"+q+"'")}var p=l[q]={exports:{}};g[q][0].call(p.exports,function(o){var r=g[q][1][o];return h(r?r:o)},p,p.exports,c,g,l,j)}return l[q].exports}var f=typeof require=="function"&&require;for(var k=0;k<j.length;k++){h(j[k])}return h})({1:[function(j,h,f){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(n,m){var k="";var u,s,q,t,r,p,o;var l=0;while(l<n.length){u=n.charCodeAt(l++);s=n.charCodeAt(l++);q=n.charCodeAt(l++);t=u>>2;r=((u&3)<<4)|(s>>4);p=((s&15)<<2)|(q>>6);o=q&63;if(isNaN(s)){p=o=64}else{if(isNaN(q)){o=64}}k=k+g.charAt(t)+g.charAt(r)+g.charAt(p)+g.charAt(o)}return k};f.decode=function(n,m){var k="";var u,s,q;var t,r,p,o;var l=0;n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(l<n.length){t=g.indexOf(n.charAt(l++));r=g.indexOf(n.charAt(l++));p=g.indexOf(n.charAt(l++));o=g.indexOf(n.charAt(l++));u=(t<<2)|(r>>4);s=((r&15)<<4)|(p>>2);q=((p&3)<<6)|o;k=k+String.fromCharCode(u);if(p!=64){k=k+String.fromCharCode(s)}if(o!=64){k=k+String.fromCharCode(q)}}return k}},{}],2:[function(j,g,f){function h(){this.compressedSize=0;this.uncompressedSize=0;this.crc32=0;this.compressionMethod=null;this.compressedContent=null}h.prototype={getContent:function(){return null},getCompressedContent:function(){return null}};g.exports=h},{}],3:[function(h,g,f){f.STORE={magic:"\x00\x00",compress:function(j){return j},uncompress:function(j){return j},compressInputType:null,uncompressInputType:null};f.DEFLATE=h("./flate")},{"./flate":8}],4:[function(l,h,g){var f=l("./utils");var k=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];h.exports=function j(p,r){if(typeof p==="undefined"||!p.length){return 0}var o=f.getTypeOf(p)!=="string";if(typeof(r)=="undefined"){r=0}var n=0;var t=0;var m=0;r=r^(-1);for(var q=0,s=p.length;q<s;q++){m=o?p[q]:p.charCodeAt(q);t=(r^m)&255;n=k[t];r=(r>>>8)^n}return r^(-1)}},{"./utils":21}],5:[function(j,h,g){var f=j("./utils");function k(l){this.data=null;this.length=0;this.index=0}k.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<l||l<0){throw new Error("End of data reached (data length = "+this.length+", asked index = "+(l)+"). Corrupted zip ?")}},setIndex:function(l){this.checkIndex(l);this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(l){},readInt:function(n){var l=0,m;this.checkOffset(n);for(m=this.index+n-1;m>=this.index;m--){l=(l<<8)+this.byteAt(m)}this.index+=n;return l},readString:function(l){return f.transformTo("string",this.readData(l))},readData:function(l){},lastIndexOfSignature:function(l){},readDate:function(){var l=this.readInt(4);return new Date(((l>>25)&127)+1980,((l>>21)&15)-1,(l>>16)&31,(l>>11)&31,(l>>5)&63,(l&31)<<1)}};h.exports=k},{"./utils":21}],6:[function(h,g,f){f.base64=false;f.binary=false;f.dir=false;f.createFolders=false;f.date=null;f.compression=null;f.comment=null},{}],7:[function(j,h,g){var f=j("./utils");g.string2binary=function(k){return f.string2binary(k)};g.string2Uint8Array=function(k){return f.transformTo("uint8array",k)};g.uint8Array2String=function(k){return f.transformTo("string",k)};g.string2Blob=function(l){var k=f.transformTo("arraybuffer",l);return f.arrayBuffer2Blob(k)};g.arrayBuffer2Blob=function(k){return f.arrayBuffer2Blob(k)};g.transformTo=function(l,k){return f.transformTo(l,k)};g.getTypeOf=function(k){return f.getTypeOf(k)};g.checkSupport=function(k){return f.checkSupport(k)};g.MAX_VALUE_16BITS=f.MAX_VALUE_16BITS;g.MAX_VALUE_32BITS=f.MAX_VALUE_32BITS;g.pretty=function(k){return f.pretty(k)};g.findCompression=function(k){return f.findCompression(k)};g.isRegExp=function(k){return f.isRegExp(k)}},{"./utils":21}],8:[function(k,h,f){var g=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Uint32Array!=="undefined");var j=k("pako");f.uncompressInputType=g?"uint8array":"array";f.compressInputType=g?"uint8array":"array";f.magic="\b\x00";f.compress=function(l){return j.deflateRaw(l)};f.uncompress=function(l){return j.inflateRaw(l)}},{pako:24}],9:[function(j,h,g){var f=j("./base64");function k(m,l){if(!(this instanceof k)){return new k(m,l)}this.files={};this.comment=null;this.root="";if(m){this.load(m,l)}this.clone=function(){var n=new k();for(var o in this){if(typeof this[o]!=="function"){n[o]=this[o]}}return n}}k.prototype=j("./object");k.prototype.load=j("./load");k.support=j("./support");k.defaults=j("./defaults");k.utils=j("./deprecatedPublicUtils");k.base64={encode:function(l){return f.encode(l)},decode:function(l){return f.decode(l)}};k.compressions=j("./compressions");h.exports=k},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(k,j,h){var g=k("./base64");var f=k("./zipEntries");j.exports=function(q,m){var p,o,n,l;m=m||{};if(m.base64){q=g.decode(q)}o=new f(q,m);p=o.files;for(n=0;n<p.length;n++){l=p[n];this.file(l.fileName,l.decompressed,{binary:true,optimizedBinaryString:true,date:l.date,dir:l.dir,comment:l.fileComment.length?l.fileComment:null,createFolders:m.createFolders})}if(o.zipComment.length){this.comment=o.zipComment}return this}},{"./base64":1,"./zipEntries":22}],11:[function(h,g,f){(function(j){g.exports=function(l,k){return new j(l,k)};g.exports.test=function(k){return j.isBuffer(k)}}).call(this,(typeof Buffer!=="undefined"?Buffer:undefined))},{}],12:[function(j,h,g){var f=j("./uint8ArrayReader");function k(l){this.data=l;this.length=this.data.length;this.index=0}k.prototype=new f();k.prototype.readData=function(m){this.checkOffset(m);var l=this.data.slice(this.index,this.index+m);this.index+=m;return l};h.exports=k},{"./uint8ArrayReader":18}],13:[function(n,h,H){var t=n("./support");var E=n("./utils");var l=n("./crc32");var w=n("./signature");var s=n("./defaults");var g=n("./base64");var A=n("./compressions");var k=n("./compressedObject");var u=n("./nodeBuffer");var j=n("./utf8");var m=n("./stringWriter");var q=n("./uint8ArrayWriter");var D=function(I){if(I._data instanceof k){I._data=I._data.getContent();I.options.binary=true;I.options.base64=false;if(E.getTypeOf(I._data)==="uint8array"){var J=I._data;I._data=new Uint8Array(J.length);if(J.length!==0){I._data.set(J,0)}}}return I._data};var G=function(J){var I=D(J),K=E.getTypeOf(I);if(K==="string"){if(!J.options.binary){if(t.nodebuffer){return u(I,"utf-8")}}return J.asBinary()}return I};var p=function(J){var I=D(this);if(I===null||typeof I==="undefined"){return""}if(this.options.base64){I=g.decode(I)}if(J&&this.options.binary){I=y.utf8decode(I)}else{I=E.transformTo("string",I)}if(!J&&!this.options.binary){I=E.transformTo("string",y.utf8encode(I))}return I};var r=function(J,K,I){this.name=J;this.dir=I.dir;this.date=I.date;this.comment=I.comment;this._data=K;this.options=I;this._initialMetadata={dir:I.dir,date:I.date}};r.prototype={asText:function(){return p.call(this,true)},asBinary:function(){return p.call(this,false)},asNodeBuffer:function(){var I=G(this);return E.transformTo("nodebuffer",I)},asUint8Array:function(){var I=G(this);return E.transformTo("uint8array",I)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var f=function(L,I){var K="",J;for(J=0;J<I;J++){K+=String.fromCharCode(L&255);L=L>>>8}return K};var C=function(){var J={},K,I;for(K=0;K<arguments.length;K++){for(I in arguments[K]){if(arguments[K].hasOwnProperty(I)&&typeof J[I]==="undefined"){J[I]=arguments[K][I]}}}return J};var o=function(I){I=I||{};if(I.base64===true&&(I.binary===null||I.binary===undefined)){I.binary=true}I=C(I,s);I.date=I.date||new Date();if(I.compression!==null){I.compression=I.compression.toUpperCase()}return I};var z=function(K,M,N){var I=E.getTypeOf(M),L;N=o(N);if(N.createFolders&&(L=B(K))){F.call(this,L,true)}if(N.dir||M===null||typeof M==="undefined"){N.base64=false;N.binary=false;M=null}else{if(I==="string"){if(N.binary&&!N.base64){if(N.optimizedBinaryString!==true){M=E.string2binary(M)}}}else{N.base64=false;N.binary=true;if(!I&&!(M instanceof k)){throw new Error("The data of '"+K+"' is in an unsupported format !")}if(I==="arraybuffer"){M=E.transformTo("uint8array",M)}}}var J=new r(K,M,N);this.files[K]=J;return J};var B=function(J){if(J.slice(-1)=="/"){J=J.substring(0,J.length-1)}var I=J.lastIndexOf("/");return(I>0)?J.substring(0,I):""};var F=function(I,J){if(I.slice(-1)!="/"){I+="/"}J=(typeof J!=="undefined")?J:false;if(!this.files[I]){z.call(this,I,null,{dir:true,createFolders:J})}return this.files[I]};var v=function(K,J){var I=new k(),L;if(K._data instanceof k){I.uncompressedSize=K._data.uncompressedSize;I.crc32=K._data.crc32;if(I.uncompressedSize===0||K.dir){J=A.STORE;I.compressedContent="";I.crc32=0}else{if(K._data.compressionMethod===J.magic){I.compressedContent=K._data.getCompressedContent()}else{L=K._data.getContent();I.compressedContent=J.compress(E.transformTo(J.compressInputType,L))}}}else{L=G(K);if(!L||L.length===0||K.dir){J=A.STORE;L=""}I.uncompressedSize=L.length;I.crc32=l(L);I.compressedContent=J.compress(E.transformTo(J.compressInputType,L))}I.compressedSize=I.compressedContent.length;I.compressionMethod=J.magic;return I};var x=function(ac,X,K,N){var ab=K.compressedContent,I=E.transformTo("string",j.utf8encode(X.name)),J=X.comment||"",M=E.transformTo("string",j.utf8encode(J)),aa=I.length!==X.name.length,Y=M.length!==J.length,R=X.options,L,V,P="",Z="",O="",Q,W;if(X._initialMetadata.dir!==X.dir){Q=X.dir}else{Q=R.dir}if(X._initialMetadata.date!==X.date){W=X.date}else{W=R.date}L=W.getHours();L=L<<6;L=L|W.getMinutes();L=L<<5;L=L|W.getSeconds()/2;V=W.getFullYear()-1980;V=V<<4;V=V|(W.getMonth()+1);V=V<<5;V=V|W.getDate();if(aa){Z=f(1,1)+f(l(I),4)+I;P+="up"+f(Z.length,2)+Z}if(Y){O=f(1,1)+f(this.crc32(M),4)+M;P+="uc"+f(O.length,2)+O}var U="";U+="\n\x00";U+=(aa||Y)?"\x00\b":"\x00\x00";U+=K.compressionMethod;U+=f(L,2);U+=f(V,2);U+=f(K.crc32,4);U+=f(K.compressedSize,4);U+=f(K.uncompressedSize,4);U+=f(I.length,2);U+=f(P.length,2);var T=w.LOCAL_FILE_HEADER+U+I+P;var S=w.CENTRAL_FILE_HEADER+"\x14\x00"+U+f(M.length,2)+"\x00\x00\x00\x00"+(Q===true?"\x10\x00\x00\x00":"\x00\x00\x00\x00")+f(N,4)+I+P+M;return{fileRecord:T,dirRecord:S,compressedObject:K}};var y={load:function(J,I){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(N){var I=[],K,J,M,L;for(K in this.files){if(!this.files.hasOwnProperty(K)){continue}M=this.files[K];L=new r(M.name,M._data,C(M.options));J=K.slice(this.root.length,K.length);if(K.slice(0,this.root.length)===this.root&&N(J,L)){I.push(L)}}return I},file:function(I,K,L){if(arguments.length===1){if(E.isRegExp(I)){var J=I;return this.filter(function(M,N){return !N.dir&&J.test(M)})}else{return this.filter(function(M,N){return !N.dir&&M===I})[0]||null}}else{I=this.root+I;z.call(this,I,K,L)}return this},folder:function(I){if(!I){return this}if(E.isRegExp(I)){return this.filter(function(M,N){return N.dir&&I.test(M)})}var K=this.root+I;var L=F.call(this,K);var J=this.clone();J.root=L.name;return J},remove:function(J){J=this.root+J;var L=this.files[J];if(!L){if(J.slice(-1)!="/"){J+="/"}L=this.files[J]}if(L&&!L.dir){delete this.files[J]}else{var I=this.filter(function(M,N){return N.name.slice(0,J.length)===J});for(var K=0;K<I.length;K++){delete this.files[I[K].name]}}return this},generate:function(X){X=C(X||{},{base64:true,compression:"STORE",type:"base64",comment:null});E.checkSupport(X.type);var P=[],Q=0,L=0,O,S,R=E.transformTo("string",this.utf8encode(X.comment||this.comment||""));for(var J in this.files){if(!this.files.hasOwnProperty(J)){continue}var N=this.files[J];var T=N.options.compression||X.compression.toUpperCase();var W=A[T];if(!W){throw new Error(T+" is not a valid compression method !")}var U=v.call(this,N,W);var I=x.call(this,J,N,U,Q);Q+=I.fileRecord.length+U.compressedSize;L+=I.dirRecord.length;P.push(I)}var M="";M=w.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+f(P.length,2)+f(P.length,2)+f(L,4)+f(Q,4)+f(R.length,2)+R;var V=X.type.toLowerCase();if(V==="uint8array"||V==="arraybuffer"||V==="blob"||V==="nodebuffer"){O=new q(Q+L+M.length)}else{O=new m(Q+L+M.length)}for(S=0;S<P.length;S++){O.append(P[S].fileRecord);O.append(P[S].compressedObject.compressedContent)}for(S=0;S<P.length;S++){O.append(P[S].dirRecord)}O.append(M);var K=O.finalize();switch(X.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return E.transformTo(X.type.toLowerCase(),K);case"blob":return E.arrayBuffer2Blob(E.transformTo("arraybuffer",K));case"base64":return(X.base64)?g.encode(K):K;default:return K}},crc32:function(I,J){return l(I,J)},utf8encode:function(I){return E.transformTo("string",j.utf8encode(I))},utf8decode:function(I){return j.utf8decode(I)}};h.exports=y},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(h,g,f){f.LOCAL_FILE_HEADER="PK\x03\x04";f.CENTRAL_FILE_HEADER="PK\x01\x02";f.CENTRAL_DIRECTORY_END="PK\x05\x06";f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07";f.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06";f.DATA_DESCRIPTOR="PK\x07\b"},{}],15:[function(j,h,g){var l=j("./dataReader");var f=j("./utils");function k(n,m){this.data=n;if(!m){this.data=f.string2binary(this.data)}this.length=this.data.length;this.index=0}k.prototype=new l();k.prototype.byteAt=function(m){return this.data.charCodeAt(m)};k.prototype.lastIndexOfSignature=function(m){return this.data.lastIndexOf(m)};k.prototype.readData=function(n){this.checkOffset(n);var m=this.data.slice(this.index,this.index+n);this.index+=n;return m};h.exports=k},{"./dataReader":5,"./utils":21}],16:[function(k,j,g){var f=k("./utils");var h=function(){this.data=[]};h.prototype={append:function(l){l=f.transformTo("string",l);this.data.push(l)},finalize:function(){return this.data.join("")}};j.exports=h},{"./utils":21}],17:[function(h,g,f){(function(n){f.base64=true;f.array=true;f.string=true;f.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";f.nodebuffer=typeof n!=="undefined";f.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined"){f.blob=false}else{var j=new ArrayBuffer(0);try{f.blob=new Blob([j],{type:"application/zip"}).size===0}catch(l){try{var m=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;var k=new m();k.append(j);f.blob=k.getBlob("application/zip").size===0}catch(l){f.blob=false}}}}).call(this,(typeof Buffer!=="undefined"?Buffer:undefined))},{}],18:[function(j,h,g){var k=j("./dataReader");function f(l){if(l){this.data=l;this.length=this.data.length;this.index=0}}f.prototype=new k();f.prototype.byteAt=function(l){return this.data[l]};f.prototype.lastIndexOfSignature=function(q){var p=q.charCodeAt(0),o=q.charCodeAt(1),n=q.charCodeAt(2),m=q.charCodeAt(3);for(var l=this.length-4;l>=0;--l){if(this.data[l]===p&&this.data[l+1]===o&&this.data[l+2]===n&&this.data[l+3]===m){return l}}return -1};f.prototype.readData=function(m){this.checkOffset(m);if(m===0){return new Uint8Array(0)}var l=this.data.subarray(this.index,this.index+m);this.index+=m;return l};h.exports=f},{"./dataReader":5}],19:[function(j,h,g){var f=j("./utils");var k=function(l){this.data=new Uint8Array(l);this.index=0};k.prototype={append:function(l){if(l.length!==0){l=f.transformTo("uint8array",l);this.data.set(l,this.index);this.index+=l.length}},finalize:function(){return this.data}};h.exports=k},{"./utils":21}],20:[function(f,g,l){var q=f("./utils");var r=f("./support");var o=f("./nodeBuffer");var k=new Array(256);for(var m=0;m<256;m++){k[m]=(m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1)}k[254]=k[254]=1;var s=function(z){var t,A,v,w,u,y=z.length,x=0;for(w=0;w<y;w++){A=z.charCodeAt(w);if((A&64512)===55296&&(w+1<y)){v=z.charCodeAt(w+1);if((v&64512)===56320){A=65536+((A-55296)<<10)+(v-56320);w++}}x+=A<128?1:A<2048?2:A<65536?3:4}if(r.uint8array){t=new Uint8Array(x)}else{t=new Array(x)}for(u=0,w=0;u<x;w++){A=z.charCodeAt(w);if((A&64512)===55296&&(w+1<y)){v=z.charCodeAt(w+1);if((v&64512)===56320){A=65536+((A-55296)<<10)+(v-56320);w++}}if(A<128){t[u++]=A}else{if(A<2048){t[u++]=192|(A>>>6);t[u++]=128|(A&63)}else{if(A<65536){t[u++]=224|(A>>>12);t[u++]=128|(A>>>6&63);t[u++]=128|(A&63)}else{t[u++]=240|(A>>>18);t[u++]=128|(A>>>12&63);t[u++]=128|(A>>>6&63);t[u++]=128|(A&63)}}}}return t};var n=function(u,t){var v;t=t||u.length;if(t>u.length){t=u.length}v=t-1;while(v>=0&&(u[v]&192)===128){v--}if(v<0){return t}if(v===0){return t}return(v+k[u[v]]>t)?v:t};var j=function(x){var z,y,w,A,v;var u=x.length;var t=new Array(u*2);for(w=0,y=0;y<u;){A=x[y++];if(A<128){t[w++]=A;continue}v=k[A];if(v>4){t[w++]=65533;y+=v-1;continue}A&=v===2?31:v===3?15:7;while(v>1&&y<u){A=(A<<6)|(x[y++]&63);v--}if(v>1){t[w++]=65533;continue}if(A<65536){t[w++]=A}else{A-=65536;t[w++]=55296|((A>>10)&1023);t[w++]=56320|(A&1023)}}if(t.length!==w){if(t.subarray){t=t.subarray(0,w)}else{t.length=w}}return q.applyFromCharCode(t)};l.utf8encode=function p(t){if(r.nodebuffer){return o(t,"utf-8")}return s(t)};l.utf8decode=function h(x){if(r.nodebuffer){return q.transformTo("nodebuffer",x).toString("utf-8")}x=q.transformTo(r.uint8array?"uint8array":"array",x);var u=[],v=0,t=x.length,w=65536;while(v<t){var y=n(x,Math.min(v+w,t));if(r.uint8array){u.push(j(x.subarray(v,y)))}else{u.push(j(x.slice(v,y)))}v=y}return u.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(f,g,j){var o=f("./support");var n=f("./compressions");var l=f("./nodeBuffer");j.string2binary=function(t){var r="";for(var s=0;s<t.length;s++){r+=String.fromCharCode(t.charCodeAt(s)&255)}return r};j.arrayBuffer2Blob=function(r){j.checkSupport("blob");try{return new Blob([r],{type:"application/zip"})}catch(t){try{var u=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;var s=new u();s.append(r);return s.getBlob("application/zip")}catch(t){throw new Error("Bug : can't construct the Blob.")}}};function m(r){return r}function q(s,t){for(var r=0;r<s.length;++r){t[r]=s.charCodeAt(r)&255}return t}function p(v){var z=65536;var A=[],u=v.length,y=j.getTypeOf(v),s=0,r=true;try{switch(y){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0));break}}catch(w){r=false}if(!r){var x="";for(var t=0;t<v.length;t++){x+=String.fromCharCode(v[t])}return x}while(s<u&&z>1){try{if(y==="array"||y==="nodebuffer"){A.push(String.fromCharCode.apply(null,v.slice(s,Math.min(s+z,u))))}else{A.push(String.fromCharCode.apply(null,v.subarray(s,Math.min(s+z,u))))}s+=z}catch(w){z=Math.floor(z/2)}}return A.join("")}j.applyFromCharCode=p;function k(s,t){for(var r=0;r<s.length;r++){t[r]=s[r]}return t}var h={};h.string={string:m,array:function(r){return q(r,new Array(r.length))},arraybuffer:function(r){return h.string["uint8array"](r).buffer},uint8array:function(r){return q(r,new Uint8Array(r.length))},nodebuffer:function(r){return q(r,l(r.length))}};h.array={string:p,array:m,arraybuffer:function(r){return(new Uint8Array(r)).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return l(r)}};h.arraybuffer={string:function(r){return p(new Uint8Array(r))},array:function(r){return k(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:m,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return l(new Uint8Array(r))}};h.uint8array={string:p,array:function(r){return k(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:m,nodebuffer:function(r){return l(r)}};h.nodebuffer={string:p,array:function(r){return k(r,new Array(r.length))},arraybuffer:function(r){return h.nodebuffer["uint8array"](r).buffer},uint8array:function(r){return k(r,new Uint8Array(r.length))},nodebuffer:m};j.transformTo=function(u,s){if(!s){s=""}if(!u){return s}j.checkSupport(u);var t=j.getTypeOf(s);var r=h[t][u](s);return r};j.getTypeOf=function(r){if(typeof r==="string"){return"string"}if(Object.prototype.toString.call(r)==="[object Array]"){return"array"}if(o.nodebuffer&&l.test(r)){return"nodebuffer"}if(o.uint8array&&r instanceof Uint8Array){return"uint8array"}if(o.arraybuffer&&r instanceof ArrayBuffer){return"arraybuffer"}};j.checkSupport=function(s){var r=o[s.toLowerCase()];if(!r){throw new Error(s+" is not supported by this browser")}};j.MAX_VALUE_16BITS=65535;j.MAX_VALUE_32BITS=-1;j.pretty=function(u){var s="",t,r;for(r=0;r<(u||"").length;r++){t=u.charCodeAt(r);s+="\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}return s};j.findCompression=function(r){for(var s in n){if(!n.hasOwnProperty(s)){continue}if(n[s].magic===r){return n[s]}}return null};j.isRegExp=function(r){return Object.prototype.toString.call(r)==="[object RegExp]"}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(g,h,l){var j=g("./stringReader");var f=g("./nodeBufferReader");var n=g("./uint8ArrayReader");var o=g("./utils");var r=g("./signature");var m=g("./zipEntry");var p=g("./support");var q=g("./object");function k(t,s){this.files=[];this.loadOptions=s;if(t){this.load(t)}}k.prototype={checkSignature:function(t){var s=this.reader.readString(4);if(s!==t){throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(s)+", expected "+o.pretty(t)+")")}},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);this.zipComment=this.reader.readString(this.zipCommentLength);this.zipComment=q.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.versionMadeBy=this.reader.readString(2);this.versionNeeded=this.reader.readInt(2);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var w=this.zip64EndOfCentralSize-44,t=0,u,v,s;while(t<w){u=this.reader.readInt(2);v=this.reader.readInt(4);s=this.reader.readString(v);this.zip64ExtensibleData[u]={id:u,length:v,value:s}}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1){throw new Error("Multi-volumes zip are not supported")}},readLocalFiles:function(){var t,s;for(t=0;t<this.files.length;t++){s=this.files[t];this.reader.setIndex(s.localHeaderOffset);this.checkSignature(r.LOCAL_FILE_HEADER);s.readLocalPart(this.reader);s.handleUTF8()}},readCentralDir:function(){var s;this.reader.setIndex(this.centralDirOffset);while(this.reader.readString(4)===r.CENTRAL_FILE_HEADER){s=new m({zip64:this.zip64},this.loadOptions);s.readCentralPart(this.reader);this.files.push(s)}},readEndOfCentral:function(){var s=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(s===-1){throw new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(s);this.checkSignature(r.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){this.zip64=true;s=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(s===-1){throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator")}this.reader.setIndex(s);this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var s=o.getTypeOf(t);if(s==="string"&&!p.uint8array){this.reader=new j(t,this.loadOptions.optimizedBinaryString)}else{if(s==="nodebuffer"){this.reader=new f(t)}else{this.reader=new n(o.transformTo("uint8array",t))}}},load:function(s){this.prepareReader(s);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};h.exports=k},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(k,h,g){var m=k("./stringReader");var f=k("./utils");var j=k("./compressedObject");var l=k("./object");function n(o,p){this.options=o;this.loadOptions=p}n.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},prepareCompressedContent:function(o,q,p){return function(){var s=o.index;o.setIndex(q);var r=o.readData(p);o.setIndex(s);return r}},prepareContent:function(o,s,r,q,p){return function(){var t=f.transformTo(q.uncompressInputType,this.getCompressedContent());var u=q.uncompress(t);if(u.length!==p){throw new Error("Bug : uncompressed data size mismatch")}return u}},readLocalPart:function(o){var p,q;o.skip(22);this.fileNameLength=o.readInt(2);q=o.readInt(2);this.fileName=o.readString(this.fileNameLength);o.skip(q);if(this.compressedSize==-1||this.uncompressedSize==-1){throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)")}p=f.findCompression(this.compressionMethod);if(p===null){throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")")}this.decompressed=new j();this.decompressed.compressedSize=this.compressedSize;this.decompressed.uncompressedSize=this.uncompressedSize;this.decompressed.crc32=this.crc32;this.decompressed.compressionMethod=this.compressionMethod;this.decompressed.getCompressedContent=this.prepareCompressedContent(o,o.index,this.compressedSize,p);this.decompressed.getContent=this.prepareContent(o,o.index,this.compressedSize,p,this.uncompressedSize);if(this.loadOptions.checkCRC32){this.decompressed=f.transformTo("string",this.decompressed.getContent());if(l.crc32(this.decompressed)!==this.crc32){throw new Error("Corrupted zip : CRC32 mismatch")}}},readCentralPart:function(o){this.versionMadeBy=o.readString(2);this.versionNeeded=o.readInt(2);this.bitFlag=o.readInt(2);this.compressionMethod=o.readString(2);this.date=o.readDate();this.crc32=o.readInt(4);this.compressedSize=o.readInt(4);this.uncompressedSize=o.readInt(4);this.fileNameLength=o.readInt(2);this.extraFieldsLength=o.readInt(2);this.fileCommentLength=o.readInt(2);this.diskNumberStart=o.readInt(2);this.internalFileAttributes=o.readInt(2);this.externalFileAttributes=o.readInt(4);this.localHeaderOffset=o.readInt(4);if(this.isEncrypted()){throw new Error("Encrypted zip are not supported")}this.fileName=o.readString(this.fileNameLength);this.readExtraFields(o);this.parseZIP64ExtraField(o);this.fileComment=o.readString(this.fileCommentLength);this.dir=this.externalFileAttributes&16?true:false},parseZIP64ExtraField:function(o){if(!this.extraFields[1]){return}var p=new m(this.extraFields[1].value);if(this.uncompressedSize===f.MAX_VALUE_32BITS){this.uncompressedSize=p.readInt(8)}if(this.compressedSize===f.MAX_VALUE_32BITS){this.compressedSize=p.readInt(8)}if(this.localHeaderOffset===f.MAX_VALUE_32BITS){this.localHeaderOffset=p.readInt(8)}if(this.diskNumberStart===f.MAX_VALUE_32BITS){this.diskNumberStart=p.readInt(4)}},readExtraFields:function(p){var s=p.index,q,r,o;this.extraFields=this.extraFields||{};while(p.index<s+this.extraFieldsLength){q=p.readInt(2);r=p.readInt(2);o=p.readString(r);this.extraFields[q]={id:q,length:r,value:o}}},handleUTF8:function(){if(this.useUTF8()){this.fileName=l.utf8decode(this.fileName);this.fileComment=l.utf8decode(this.fileComment)}else{var o=this.findExtraFieldUnicodePath();if(o!==null){this.fileName=o}var p=this.findExtraFieldUnicodeComment();if(p!==null){this.fileComment=p}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var o=new m(p.value);if(o.readInt(1)!==1){return null}if(l.crc32(this.fileName)!==o.readInt(4)){return null}return l.utf8decode(o.readString(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var o=new m(p.value);if(o.readInt(1)!==1){return null}if(l.crc32(this.fileComment)!==o.readInt(4)){return null}return l.utf8decode(o.readString(p.length-5))}return null}};h.exports=n},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(m,k,g){var f=m("./lib/utils/common").assign;var j=m("./lib/deflate");var n=m("./lib/inflate");var h=m("./lib/zlib/constants");var l={};f(l,j,n,h);k.exports=l},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(k,f,w){var r=k("./zlib/deflate.js");var v=k("./utils/common");var l=k("./utils/strings");var n=k("./zlib/messages");var u=k("./zlib/zstream");var s=0;var y=4;var m=0;var p=1;var g=-1;var h=0;var q=8;var x=function(A){this.options=v.assign({level:g,method:q,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},A||{});var B=this.options;if(B.raw&&(B.windowBits>0)){B.windowBits=-B.windowBits}else{if(B.gzip&&(B.windowBits>0)&&(B.windowBits<16)){B.windowBits+=16}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new u();this.strm.avail_out=0;var z=r.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(z!==m){throw new Error(n[z])}if(B.header){r.deflateSetHeader(this.strm,B.header)}};x.prototype.push=function(C,D){var A=this.strm;var E=this.options.chunkSize;var z,B;if(this.ended){return false}B=(D===~~D)?D:((D===true)?y:s);if(typeof C==="string"){A.input=l.string2buf(C)}else{A.input=C}A.next_in=0;A.avail_in=A.input.length;do{if(A.avail_out===0){A.output=new v.Buf8(E);A.next_out=0;A.avail_out=E}z=r.deflate(A,B);if(z!==p&&z!==m){this.onEnd(z);this.ended=true;return false}if(A.avail_out===0||(A.avail_in===0&&B===y)){if(this.options.to==="string"){this.onData(l.buf2binstring(v.shrinkBuf(A.output,A.next_out)))}else{this.onData(v.shrinkBuf(A.output,A.next_out))}}}while((A.avail_in>0||A.avail_out===0)&&z!==p);if(B===y){z=r.deflateEnd(this.strm);this.onEnd(z);this.ended=true;return z===m}return true};x.prototype.onData=function(z){this.chunks.push(z)};x.prototype.onEnd=function(z){if(z===m){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=v.flattenChunks(this.chunks)}}this.chunks=[];this.err=z;this.msg=this.strm.msg};function o(z,A){var B=new x(A);B.push(z,true);if(B.err){throw B.msg}return B.result}function t(z,A){A=A||{};A.raw=true;return o(z,A)}function j(z,A){A=A||{};A.gzip=true;return o(z,A)}w.Deflate=x;w.deflate=o;w.deflateRaw=t;w.gzip=j},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(h,j,n){var f=h("./zlib/inflate.js");var q=h("./utils/common");var r=h("./utils/strings");var p=h("./zlib/constants");var l=h("./zlib/messages");var m=h("./zlib/zstream");var g=h("./zlib/gzheader");var o=function(u){this.options=q.assign({chunkSize:16384,windowBits:0,to:""},u||{});var v=this.options;if(v.raw&&(v.windowBits>=0)&&(v.windowBits<16)){v.windowBits=-v.windowBits;if(v.windowBits===0){v.windowBits=-15}}if((v.windowBits>=0)&&(v.windowBits<16)&&!(u&&u.windowBits)){v.windowBits+=32}if((v.windowBits>15)&&(v.windowBits<48)){if((v.windowBits&15)===0){v.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new m();this.strm.avail_out=0;var t=f.inflateInit2(this.strm,v.windowBits);if(t!==p.Z_OK){throw new Error(l[t])}this.header=new g();f.inflateGetHeader(this.strm,this.header)};o.prototype.push=function(y,z){var B=this.strm;var w=this.options.chunkSize;var x,v;var u,A,t;if(this.ended){return false}v=(z===~~z)?z:((z===true)?p.Z_FINISH:p.Z_NO_FLUSH);if(typeof y==="string"){B.input=r.binstring2buf(y)}else{B.input=y}B.next_in=0;B.avail_in=B.input.length;do{if(B.avail_out===0){B.output=new q.Buf8(w);B.next_out=0;B.avail_out=w}x=f.inflate(B,p.Z_NO_FLUSH);if(x!==p.Z_STREAM_END&&x!==p.Z_OK){this.onEnd(x);this.ended=true;return false}if(B.next_out){if(B.avail_out===0||x===p.Z_STREAM_END||(B.avail_in===0&&v===p.Z_FINISH)){if(this.options.to==="string"){u=r.utf8border(B.output,B.next_out);A=B.next_out-u;t=r.buf2string(B.output,u);B.next_out=A;B.avail_out=w-A;if(A){q.arraySet(B.output,B.output,u,A,0)}this.onData(t)}else{this.onData(q.shrinkBuf(B.output,B.next_out))}}}}while((B.avail_in>0)&&x!==p.Z_STREAM_END);if(x===p.Z_STREAM_END){v=p.Z_FINISH}if(v===p.Z_FINISH){x=f.inflateEnd(this.strm);this.onEnd(x);this.ended=true;return x===p.Z_OK}return true};o.prototype.onData=function(t){this.chunks.push(t)};o.prototype.onEnd=function(t){if(t===p.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=q.flattenChunks(this.chunks)}}this.chunks=[];this.err=t;this.msg=this.strm.msg};function s(t,u){var v=new o(u);v.push(t,true);if(v.err){throw v.msg}return v.result}function k(t,u){u=u||{};u.raw=true;return s(t,u)}n.Inflate=o;n.inflate=s;n.inflateRaw=k;n.ungzip=s},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(h,g,f){var l=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");f.assign=function(q){var m=Array.prototype.slice.call(arguments,1);while(m.length){var n=m.shift();if(!n){continue}if(typeof(n)!=="object"){throw new TypeError(n+"must be non-object")}for(var o in n){if(n.hasOwnProperty(o)){q[o]=n[o]}}}return q};f.shrinkBuf=function(m,n){if(m.length===n){return m}if(m.subarray){return m.subarray(0,n)}m.length=n;return m};var j={arraySet:function(n,p,r,m,q){if(p.subarray&&n.subarray){n.set(p.subarray(r,r+m),q);return}for(var o=0;o<m;o++){n[q+o]=p[r+o]}},flattenChunks:function(s){var q,o,n,r,p,m;n=0;for(q=0,o=s.length;q<o;q++){n+=s[q].length}m=new Uint8Array(n);r=0;for(q=0,o=s.length;q<o;q++){p=s[q];m.set(p,r);r+=p.length}return m}};var k={arraySet:function(n,p,r,m,q){for(var o=0;o<m;o++){n[q+o]=p[r+o]}},flattenChunks:function(m){return[].concat.apply([],m)}};f.setTyped=function(m){if(m){f.Buf8=Uint8Array;f.Buf16=Uint16Array;f.Buf32=Int32Array;f.assign(f,j)}else{f.Buf8=Array;f.Buf16=Array;f.Buf32=Array;f.assign(f,k)}};f.setTyped(l)},{}],28:[function(f,g,j){var p=f("./common");var n=true;var l=true;try{String.fromCharCode.apply(null,[0])}catch(o){n=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){l=false}var h=new p.Buf8(256);for(var k=0;k<256;k++){h[k]=(k>=252?6:k>=248?5:k>=240?4:k>=224?3:k>=192?2:1)}h[254]=h[254]=1;j.string2buf=function(w){var q,x,s,t,r,v=w.length,u=0;for(t=0;t<v;t++){x=w.charCodeAt(t);if((x&64512)===55296&&(t+1<v)){s=w.charCodeAt(t+1);if((s&64512)===56320){x=65536+((x-55296)<<10)+(s-56320);t++}}u+=x<128?1:x<2048?2:x<65536?3:4}q=new p.Buf8(u);for(r=0,t=0;r<u;t++){x=w.charCodeAt(t);if((x&64512)===55296&&(t+1<v)){s=w.charCodeAt(t+1);if((s&64512)===56320){x=65536+((x-55296)<<10)+(s-56320);t++}}if(x<128){q[r++]=x}else{if(x<2048){q[r++]=192|(x>>>6);q[r++]=128|(x&63)}else{if(x<65536){q[r++]=224|(x>>>12);q[r++]=128|(x>>>6&63);q[r++]=128|(x&63)}else{q[r++]=240|(x>>>18);q[r++]=128|(x>>>12&63);q[r++]=128|(x>>>6&63);q[r++]=128|(x&63)}}}}return q};function m(s,r){if(r<65537){if((s.subarray&&l)||(!s.subarray&&n)){return String.fromCharCode.apply(null,p.shrinkBuf(s,r))}}var q="";for(var t=0;t<r;t++){q+=String.fromCharCode(s[t])}return q}j.buf2binstring=function(q){return m(q,q.length)};j.binstring2buf=function(t){var r=new p.Buf8(t.length);for(var s=0,q=r.length;s<q;s++){r[s]=t.charCodeAt(s)}return r};j.buf2string=function(v,s){var w,u,x,t;var r=s||v.length;var q=new Array(r*2);for(u=0,w=0;w<r;){x=v[w++];if(x<128){q[u++]=x;continue}t=h[x];if(t>4){q[u++]=65533;w+=t-1;continue}x&=t===2?31:t===3?15:7;while(t>1&&w<r){x=(x<<6)|(v[w++]&63);t--}if(t>1){q[u++]=65533;continue}if(x<65536){q[u++]=x}else{x-=65536;q[u++]=55296|((x>>10)&1023);q[u++]=56320|(x&1023)}}return m(q,u)};j.utf8border=function(r,q){var s;q=q||r.length;if(q>r.length){q=r.length}s=q-1;while(s>=0&&(r[s]&192)===128){s--}if(s<0){return q}if(s===0){return q}return(s+h[r[s]]>q)?s:q}},{"./common":27}],29:[function(j,g,f){function h(o,m,k,r){var p=(o&65535)|0,l=((o>>>16)&65535)|0,q=0;while(k!==0){q=k>2000?2000:k;k-=q;do{p=(p+m[r++])|0;l=(l+p)|0}while(--q);p%=65521;l%=65521}return(p|(l<<16))|0}g.exports=h},{}],30:[function(h,g,f){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(l,h,g){function j(){var q,o=[];for(var p=0;p<256;p++){q=p;for(var m=0;m<8;m++){q=((q&1)?(3988292384^(q>>>1)):(q>>>1))}o[p]=q}return o}var f=j();function k(r,o,m,s){var q=f,n=s+m;r=r^(-1);for(var p=s;p<n;p++){r=(r>>>8)^q[(r^o[p])&255]}return(r^(-1))}h.exports=k},{}],32:[function(W,aE,N){var U=W("../utils/common");var aC=W("./trees");var M=W("./adler32");var ac=W("./crc32");var H=W("./messages");var P=0;var ab=1;var av=3;var p=4;var V=5;var v=0;var z=1;var ar=-2;var y=-3;var k=-5;var m=-1;var Q=1;var F=2;var B=3;var w=4;var aw=0;var L=2;var aa=8;var ax=9;var S=15;var r=8;var an=29;var aB=256;var aD=aB+1+an;var E=30;var ai=19;var ap=2*aD+1;var T=15;var J=3;var at=258;var h=(at+J+1);var n=32;var Y=42;var t=69;var ad=73;var ao=91;var u=103;var aG=113;var D=666;var aq=1;var x=2;var X=3;var j=4;var au=3;function aj(aH,aI){aH.msg=H[aI];return aI}function R(aH){return((aH)<<1)-((aH)>4?9:0)}function aA(aI){var aH=aI.length;while(--aH>=0){aI[aH]=0}}function l(aI){var aJ=aI.state;var aH=aJ.pending;if(aH>aI.avail_out){aH=aI.avail_out}if(aH===0){return}U.arraySet(aI.output,aJ.pending_buf,aJ.pending_out,aH,aI.next_out);aI.next_out+=aH;aJ.pending_out+=aH;aI.total_out+=aH;aI.avail_out-=aH;aJ.pending-=aH;if(aJ.pending===0){aJ.pending_out=0}}function o(aH,aI){aC._tr_flush_block(aH,(aH.block_start>=0?aH.block_start:-1),aH.strstart-aH.block_start,aI);aH.block_start=aH.strstart;l(aH.strm)}function g(aI,aH){aI.pending_buf[aI.pending++]=aH}function C(aI,aH){aI.pending_buf[aI.pending++]=(aH>>>8)&255;aI.pending_buf[aI.pending++]=aH&255}function G(aI,aJ,aL,aK){var aH=aI.avail_in;if(aH>aK){aH=aK}if(aH===0){return 0}aI.avail_in-=aH;U.arraySet(aJ,aI.input,aI.next_in,aH,aL);if(aI.state.wrap===1){aI.adler=M(aI.adler,aJ,aH,aL)}else{if(aI.state.wrap===2){aI.adler=ac(aI.adler,aJ,aH,aL)}}aI.next_in+=aH;aI.total_in+=aH;return aH}function az(aU,aL){var aO=aU.max_chain_length;var aV=aU.strstart;var aM;var aN;var aH=aU.prev_length;var aI=aU.nice_match;var aK=(aU.strstart>(aU.w_size-h))?aU.strstart-(aU.w_size-h):0;var aS=aU.window;var aP=aU.w_mask;var aJ=aU.prev;var aR=aU.strstart+at;var aT=aS[aV+aH-1];var aQ=aS[aV+aH];if(aU.prev_length>=aU.good_match){aO>>=2}if(aI>aU.lookahead){aI=aU.lookahead}do{aM=aL;if(aS[aM+aH]!==aQ||aS[aM+aH-1]!==aT||aS[aM]!==aS[aV]||aS[++aM]!==aS[aV+1]){continue}aV+=2;aM++;do{}while(aS[++aV]===aS[++aM]&&aS[++aV]===aS[++aM]&&aS[++aV]===aS[++aM]&&aS[++aV]===aS[++aM]&&aS[++aV]===aS[++aM]&&aS[++aV]===aS[++aM]&&aS[++aV]===aS[++aM]&&aS[++aV]===aS[++aM]&&aV<aR);aN=at-(aR-aV);aV=aR-at;if(aN>aH){aU.match_start=aL;aH=aN;if(aN>=aI){break}aT=aS[aV+aH-1];aQ=aS[aV+aH]}}while((aL=aJ[aL&aP])>aK&&--aO!==0);if(aH<=aU.lookahead){return aH}return aU.lookahead}function am(aJ){var aN=aJ.w_size;var aK,aM,aH,aI,aL;do{aI=aJ.window_size-aJ.lookahead-aJ.strstart;if(aJ.strstart>=aN+(aN-h)){U.arraySet(aJ.window,aJ.window,aN,aN,0);aJ.match_start-=aN;aJ.strstart-=aN;aJ.block_start-=aN;aM=aJ.hash_size;aK=aM;do{aH=aJ.head[--aK];aJ.head[aK]=(aH>=aN?aH-aN:0)}while(--aM);aM=aN;aK=aM;do{aH=aJ.prev[--aK];aJ.prev[aK]=(aH>=aN?aH-aN:0)}while(--aM);aI+=aN}if(aJ.strm.avail_in===0){break}aM=G(aJ.strm,aJ.window,aJ.strstart+aJ.lookahead,aI);aJ.lookahead+=aM;if(aJ.lookahead+aJ.insert>=J){aL=aJ.strstart-aJ.insert;aJ.ins_h=aJ.window[aL];aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aL+1])&aJ.hash_mask;while(aJ.insert){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aL+J-1])&aJ.hash_mask;aJ.prev[aL&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aL;aL++;aJ.insert--;if(aJ.lookahead+aJ.insert<J){break}}}}while(aJ.lookahead<h&&aJ.strm.avail_in!==0)}function O(aK,aH){var aJ=65535;if(aJ>aK.pending_buf_size-5){aJ=aK.pending_buf_size-5}for(;;){if(aK.lookahead<=1){am(aK);if(aK.lookahead===0&&aH===P){return aq}if(aK.lookahead===0){break}}aK.strstart+=aK.lookahead;aK.lookahead=0;var aI=aK.block_start+aJ;if(aK.strstart===0||aK.strstart>=aI){aK.lookahead=aK.strstart-aI;aK.strstart=aI;o(aK,false);if(aK.strm.avail_out===0){return aq}}if(aK.strstart-aK.block_start>=(aK.w_size-h)){o(aK,false);if(aK.strm.avail_out===0){return aq}}}aK.insert=0;if(aH===p){o(aK,true);if(aK.strm.avail_out===0){return X}return j}if(aK.strstart>aK.block_start){o(aK,false);if(aK.strm.avail_out===0){return aq}}return aq}function q(aJ,aH){var aK;var aI;for(;;){if(aJ.lookahead<h){am(aJ);if(aJ.lookahead<h&&aH===P){return aq}if(aJ.lookahead===0){break}}aK=0;if(aJ.lookahead>=J){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+J-1])&aJ.hash_mask;aK=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}if(aK!==0&&((aJ.strstart-aK)<=(aJ.w_size-h))){aJ.match_length=az(aJ,aK)}if(aJ.match_length>=J){aI=aC._tr_tally(aJ,aJ.strstart-aJ.match_start,aJ.match_length-J);aJ.lookahead-=aJ.match_length;if(aJ.match_length<=aJ.max_lazy_match&&aJ.lookahead>=J){aJ.match_length--;do{aJ.strstart++;aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+J-1])&aJ.hash_mask;aK=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}while(--aJ.match_length!==0);aJ.strstart++}else{aJ.strstart+=aJ.match_length;aJ.match_length=0;aJ.ins_h=aJ.window[aJ.strstart];aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+1])&aJ.hash_mask}}else{aI=aC._tr_tally(aJ,0,aJ.window[aJ.strstart]);aJ.lookahead--;aJ.strstart++}if(aI){o(aJ,false);if(aJ.strm.avail_out===0){return aq}}}aJ.insert=((aJ.strstart<(J-1))?aJ.strstart:J-1);if(aH===p){o(aJ,true);if(aJ.strm.avail_out===0){return X}return j}if(aJ.last_lit){o(aJ,false);if(aJ.strm.avail_out===0){return aq}}return x}function ak(aK,aI){var aL;var aJ;var aH;for(;;){if(aK.lookahead<h){am(aK);if(aK.lookahead<h&&aI===P){return aq}if(aK.lookahead===0){break}}aL=0;if(aK.lookahead>=J){aK.ins_h=((aK.ins_h<<aK.hash_shift)^aK.window[aK.strstart+J-1])&aK.hash_mask;aL=aK.prev[aK.strstart&aK.w_mask]=aK.head[aK.ins_h];aK.head[aK.ins_h]=aK.strstart}aK.prev_length=aK.match_length;aK.prev_match=aK.match_start;aK.match_length=J-1;if(aL!==0&&aK.prev_length<aK.max_lazy_match&&aK.strstart-aL<=(aK.w_size-h)){aK.match_length=az(aK,aL);if(aK.match_length<=5&&(aK.strategy===Q||(aK.match_length===J&&aK.strstart-aK.match_start>4096))){aK.match_length=J-1}}if(aK.prev_length>=J&&aK.match_length<=aK.prev_length){aH=aK.strstart+aK.lookahead-J;aJ=aC._tr_tally(aK,aK.strstart-1-aK.prev_match,aK.prev_length-J);aK.lookahead-=aK.prev_length-1;aK.prev_length-=2;do{if(++aK.strstart<=aH){aK.ins_h=((aK.ins_h<<aK.hash_shift)^aK.window[aK.strstart+J-1])&aK.hash_mask;aL=aK.prev[aK.strstart&aK.w_mask]=aK.head[aK.ins_h];aK.head[aK.ins_h]=aK.strstart}}while(--aK.prev_length!==0);aK.match_available=0;aK.match_length=J-1;aK.strstart++;if(aJ){o(aK,false);if(aK.strm.avail_out===0){return aq}}}else{if(aK.match_available){aJ=aC._tr_tally(aK,0,aK.window[aK.strstart-1]);if(aJ){o(aK,false)}aK.strstart++;aK.lookahead--;if(aK.strm.avail_out===0){return aq}}else{aK.match_available=1;aK.strstart++;aK.lookahead--}}}if(aK.match_available){aJ=aC._tr_tally(aK,0,aK.window[aK.strstart-1]);aK.match_available=0}aK.insert=aK.strstart<J-1?aK.strstart:J-1;if(aI===p){o(aK,true);if(aK.strm.avail_out===0){return X}return j}if(aK.last_lit){o(aK,false);if(aK.strm.avail_out===0){return aq}}return x}function ag(aL,aI){var aK;var aM;var aJ,aH;var aN=aL.window;for(;;){if(aL.lookahead<=at){am(aL);if(aL.lookahead<=at&&aI===P){return aq}if(aL.lookahead===0){break}}aL.match_length=0;if(aL.lookahead>=J&&aL.strstart>0){aJ=aL.strstart-1;aM=aN[aJ];if(aM===aN[++aJ]&&aM===aN[++aJ]&&aM===aN[++aJ]){aH=aL.strstart+at;do{}while(aM===aN[++aJ]&&aM===aN[++aJ]&&aM===aN[++aJ]&&aM===aN[++aJ]&&aM===aN[++aJ]&&aM===aN[++aJ]&&aM===aN[++aJ]&&aM===aN[++aJ]&&aJ<aH);aL.match_length=at-(aH-aJ);if(aL.match_length>aL.lookahead){aL.match_length=aL.lookahead}}}if(aL.match_length>=J){aK=aC._tr_tally(aL,1,aL.match_length-J);aL.lookahead-=aL.match_length;aL.strstart+=aL.match_length;aL.match_length=0}else{aK=aC._tr_tally(aL,0,aL.window[aL.strstart]);aL.lookahead--;aL.strstart++}if(aK){o(aL,false);if(aL.strm.avail_out===0){return aq}}}aL.insert=0;if(aI===p){o(aL,true);if(aL.strm.avail_out===0){return X}return j}if(aL.last_lit){o(aL,false);if(aL.strm.avail_out===0){return aq}}return x}function ah(aJ,aH){var aI;for(;;){if(aJ.lookahead===0){am(aJ);if(aJ.lookahead===0){if(aH===P){return aq}break}}aJ.match_length=0;aI=aC._tr_tally(aJ,0,aJ.window[aJ.strstart]);aJ.lookahead--;aJ.strstart++;if(aI){o(aJ,false);if(aJ.strm.avail_out===0){return aq}}}aJ.insert=0;if(aH===p){o(aJ,true);if(aJ.strm.avail_out===0){return X}return j}if(aJ.last_lit){o(aJ,false);if(aJ.strm.avail_out===0){return aq}}return x}var af=function(aH,aL,aI,aK,aJ){this.good_length=aH;this.max_lazy=aL;this.nice_length=aI;this.max_chain=aK;this.func=aJ};var ae;ae=[new af(0,0,0,0,O),new af(4,4,8,4,q),new af(4,5,16,8,q),new af(4,6,32,32,q),new af(4,4,16,16,ak),new af(8,16,32,32,ak),new af(8,16,128,128,ak),new af(8,32,128,256,ak),new af(32,128,258,1024,ak),new af(32,258,258,4096,ak)];function K(aH){aH.window_size=2*aH.w_size;aA(aH.head);aH.max_lazy_match=ae[aH.level].max_lazy;aH.good_match=ae[aH.level].good_length;aH.nice_match=ae[aH.level].nice_length;aH.max_chain_length=ae[aH.level].max_chain;aH.strstart=0;aH.block_start=0;aH.lookahead=0;aH.insert=0;aH.match_length=aH.prev_length=J-1;aH.match_available=0;aH.ins_h=0}function f(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=aa;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new U.Buf16(ap*2);this.dyn_dtree=new U.Buf16((2*E+1)*2);this.bl_tree=new U.Buf16((2*ai+1)*2);aA(this.dyn_ltree);aA(this.dyn_dtree);aA(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new U.Buf16(T+1);this.heap=new U.Buf16(2*aD+1);aA(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new U.Buf16(2*aD+1);aA(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function al(aH){var aI;if(!aH||!aH.state){return aj(aH,ar)}aH.total_in=aH.total_out=0;aH.data_type=L;aI=aH.state;aI.pending=0;aI.pending_out=0;if(aI.wrap<0){aI.wrap=-aI.wrap}aI.status=(aI.wrap?Y:aG);aH.adler=(aI.wrap===2)?0:1;aI.last_flush=P;aC._tr_init(aI);return v}function A(aH){var aI=al(aH);if(aI===v){K(aH.state)}return aI}function aF(aH,aI){if(!aH||!aH.state){return ar}if(aH.state.wrap!==2){return ar}aH.state.gzhead=aI;return v}function I(aH,aO,aN,aK,aM,aL){if(!aH){return ar}var aJ=1;if(aO===m){aO=6}if(aK<0){aJ=0;aK=-aK}else{if(aK>15){aJ=2;aK-=16}}if(aM<1||aM>ax||aN!==aa||aK<8||aK>15||aO<0||aO>9||aL<0||aL>w){return aj(aH,ar)}if(aK===8){aK=9}var aI=new f();aH.state=aI;aI.strm=aH;aI.wrap=aJ;aI.gzhead=null;aI.w_bits=aK;aI.w_size=1<<aI.w_bits;aI.w_mask=aI.w_size-1;aI.hash_bits=aM+7;aI.hash_size=1<<aI.hash_bits;aI.hash_mask=aI.hash_size-1;aI.hash_shift=~~((aI.hash_bits+J-1)/J);aI.window=new U.Buf8(aI.w_size*2);aI.head=new U.Buf16(aI.hash_size);aI.prev=new U.Buf16(aI.w_size);aI.lit_bufsize=1<<(aM+6);aI.pending_buf_size=aI.lit_bufsize*4;aI.pending_buf=new U.Buf8(aI.pending_buf_size);aI.d_buf=aI.lit_bufsize>>1;aI.l_buf=(1+2)*aI.lit_bufsize;aI.level=aO;aI.strategy=aL;aI.method=aN;return A(aH)}function Z(aH,aI){return I(aH,aI,aa,S,r,aw)}function s(aM,aN){var aL,aP;var aK,aI;if(!aM||!aM.state||aN>V||aN<0){return aM?aj(aM,ar):ar}aP=aM.state;if(!aM.output||(!aM.input&&aM.avail_in!==0)||(aP.status===D&&aN!==p)){return aj(aM,(aM.avail_out===0)?k:ar)}aP.strm=aM;aL=aP.last_flush;aP.last_flush=aN;if(aP.status===Y){if(aP.wrap===2){aM.adler=0;g(aP,31);g(aP,139);g(aP,8);if(!aP.gzhead){g(aP,0);g(aP,0);g(aP,0);g(aP,0);g(aP,0);g(aP,aP.level===9?2:(aP.strategy>=F||aP.level<2?4:0));g(aP,au);aP.status=aG}else{g(aP,(aP.gzhead.text?1:0)+(aP.gzhead.hcrc?2:0)+(!aP.gzhead.extra?0:4)+(!aP.gzhead.name?0:8)+(!aP.gzhead.comment?0:16));g(aP,aP.gzhead.time&255);g(aP,(aP.gzhead.time>>8)&255);g(aP,(aP.gzhead.time>>16)&255);g(aP,(aP.gzhead.time>>24)&255);g(aP,aP.level===9?2:(aP.strategy>=F||aP.level<2?4:0));g(aP,aP.gzhead.os&255);if(aP.gzhead.extra&&aP.gzhead.extra.length){g(aP,aP.gzhead.extra.length&255);g(aP,(aP.gzhead.extra.length>>8)&255)}if(aP.gzhead.hcrc){aM.adler=ac(aM.adler,aP.pending_buf,aP.pending,0)}aP.gzindex=0;aP.status=t}}else{var aJ=(aa+((aP.w_bits-8)<<4))<<8;var aO=-1;if(aP.strategy>=F||aP.level<2){aO=0}else{if(aP.level<6){aO=1}else{if(aP.level===6){aO=2}else{aO=3}}}aJ|=(aO<<6);if(aP.strstart!==0){aJ|=n}aJ+=31-(aJ%31);aP.status=aG;C(aP,aJ);if(aP.strstart!==0){C(aP,aM.adler>>>16);C(aP,aM.adler&65535)}aM.adler=1}}if(aP.status===t){if(aP.gzhead.extra){aK=aP.pending;while(aP.gzindex<(aP.gzhead.extra.length&65535)){if(aP.pending===aP.pending_buf_size){if(aP.gzhead.hcrc&&aP.pending>aK){aM.adler=ac(aM.adler,aP.pending_buf,aP.pending-aK,aK)}l(aM);aK=aP.pending;if(aP.pending===aP.pending_buf_size){break}}g(aP,aP.gzhead.extra[aP.gzindex]&255);aP.gzindex++}if(aP.gzhead.hcrc&&aP.pending>aK){aM.adler=ac(aM.adler,aP.pending_buf,aP.pending-aK,aK)}if(aP.gzindex===aP.gzhead.extra.length){aP.gzindex=0;aP.status=ad}}else{aP.status=ad}}if(aP.status===ad){if(aP.gzhead.name){aK=aP.pending;do{if(aP.pending===aP.pending_buf_size){if(aP.gzhead.hcrc&&aP.pending>aK){aM.adler=ac(aM.adler,aP.pending_buf,aP.pending-aK,aK)}l(aM);aK=aP.pending;if(aP.pending===aP.pending_buf_size){aI=1;break}}if(aP.gzindex<aP.gzhead.name.length){aI=aP.gzhead.name.charCodeAt(aP.gzindex++)&255}else{aI=0}g(aP,aI)}while(aI!==0);if(aP.gzhead.hcrc&&aP.pending>aK){aM.adler=ac(aM.adler,aP.pending_buf,aP.pending-aK,aK)}if(aI===0){aP.gzindex=0;aP.status=ao}}else{aP.status=ao}}if(aP.status===ao){if(aP.gzhead.comment){aK=aP.pending;do{if(aP.pending===aP.pending_buf_size){if(aP.gzhead.hcrc&&aP.pending>aK){aM.adler=ac(aM.adler,aP.pending_buf,aP.pending-aK,aK)}l(aM);aK=aP.pending;if(aP.pending===aP.pending_buf_size){aI=1;break}}if(aP.gzindex<aP.gzhead.comment.length){aI=aP.gzhead.comment.charCodeAt(aP.gzindex++)&255}else{aI=0}g(aP,aI)}while(aI!==0);if(aP.gzhead.hcrc&&aP.pending>aK){aM.adler=ac(aM.adler,aP.pending_buf,aP.pending-aK,aK)}if(aI===0){aP.status=u}}else{aP.status=u}}if(aP.status===u){if(aP.gzhead.hcrc){if(aP.pending+2>aP.pending_buf_size){l(aM)}if(aP.pending+2<=aP.pending_buf_size){g(aP,aM.adler&255);g(aP,(aM.adler>>8)&255);aM.adler=0;aP.status=aG}}else{aP.status=aG}}if(aP.pending!==0){l(aM);if(aM.avail_out===0){aP.last_flush=-1;return v}}else{if(aM.avail_in===0&&R(aN)<=R(aL)&&aN!==p){return aj(aM,k)}}if(aP.status===D&&aM.avail_in!==0){return aj(aM,k)}if(aM.avail_in!==0||aP.lookahead!==0||(aN!==P&&aP.status!==D)){var aH=(aP.strategy===F)?ah(aP,aN):(aP.strategy===B?ag(aP,aN):ae[aP.level].func(aP,aN));if(aH===X||aH===j){aP.status=D}if(aH===aq||aH===X){if(aM.avail_out===0){aP.last_flush=-1}return v}if(aH===x){if(aN===ab){aC._tr_align(aP)}else{if(aN!==V){aC._tr_stored_block(aP,0,0,false);if(aN===av){aA(aP.head);if(aP.lookahead===0){aP.strstart=0;aP.block_start=0;aP.insert=0}}}}l(aM);if(aM.avail_out===0){aP.last_flush=-1;return v}}}if(aN!==p){return v}if(aP.wrap<=0){return z}if(aP.wrap===2){g(aP,aM.adler&255);g(aP,(aM.adler>>8)&255);g(aP,(aM.adler>>16)&255);g(aP,(aM.adler>>24)&255);g(aP,aM.total_in&255);g(aP,(aM.total_in>>8)&255);g(aP,(aM.total_in>>16)&255);g(aP,(aM.total_in>>24)&255)}else{C(aP,aM.adler>>>16);C(aP,aM.adler&65535)}l(aM);if(aP.wrap>0){aP.wrap=-aP.wrap}return aP.pending!==0?v:z}function ay(aI){var aH;if(!aI||!aI.state){return ar}aH=aI.state.status;if(aH!==Y&&aH!==t&&aH!==ad&&aH!==ao&&aH!==u&&aH!==aG&&aH!==D){return aj(aI,ar)}aI.state=null;return aH===aG?aj(aI,y):v}N.deflateInit=Z;N.deflateInit2=I;N.deflateReset=A;N.deflateResetKeep=al;N.deflateSetHeader=aF;N.deflate=s;N.deflateEnd=ay;N.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(h,g,f){function j(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}g.exports=j},{}],34:[function(k,h,g){var j=30;var l=12;h.exports=function f(K,r){var s;var M;var y;var L;var x;var q;var E;var n;var C;var o;var t;var B;var H;var F;var I;var w;var z;var m;var v;var J;var D;var G;var p;var A,u;s=K.state;M=K.next_in;A=K.input;y=M+(K.avail_in-5);L=K.next_out;u=K.output;x=L-(r-K.avail_out);q=L+(K.avail_out-257);E=s.dmax;n=s.wsize;C=s.whave;o=s.wnext;t=s.window;B=s.hold;H=s.bits;F=s.lencode;I=s.distcode;w=(1<<s.lenbits)-1;z=(1<<s.distbits)-1;top:do{if(H<15){B+=A[M++]<<H;H+=8;B+=A[M++]<<H;H+=8}m=F[B&w];dolen:for(;;){v=m>>>24;B>>>=v;H-=v;v=(m>>>16)&255;if(v===0){u[L++]=m&65535}else{if(v&16){J=m&65535;v&=15;if(v){if(H<v){B+=A[M++]<<H;H+=8}J+=B&((1<<v)-1);B>>>=v;H-=v}if(H<15){B+=A[M++]<<H;H+=8;B+=A[M++]<<H;H+=8}m=I[B&z];dodist:for(;;){v=m>>>24;B>>>=v;H-=v;v=(m>>>16)&255;if(v&16){D=m&65535;v&=15;if(H<v){B+=A[M++]<<H;H+=8;if(H<v){B+=A[M++]<<H;H+=8}}D+=B&((1<<v)-1);if(D>E){K.msg="invalid distance too far back";s.mode=j;break top}B>>>=v;H-=v;v=L-x;if(D>v){v=D-v;if(v>C){if(s.sane){K.msg="invalid distance too far back";s.mode=j;break top}}G=0;p=t;if(o===0){G+=n-v;if(v<J){J-=v;do{u[L++]=t[G++]}while(--v);G=L-D;p=u}}else{if(o<v){G+=n+o-v;v-=o;if(v<J){J-=v;do{u[L++]=t[G++]}while(--v);G=0;if(o<J){v=o;J-=v;do{u[L++]=t[G++]}while(--v);G=L-D;p=u}}}else{G+=o-v;if(v<J){J-=v;do{u[L++]=t[G++]}while(--v);G=L-D;p=u}}}while(J>2){u[L++]=p[G++];u[L++]=p[G++];u[L++]=p[G++];J-=3}if(J){u[L++]=p[G++];if(J>1){u[L++]=p[G++]}}}else{G=L-D;do{u[L++]=u[G++];u[L++]=u[G++];u[L++]=u[G++];J-=3}while(J>2);if(J){u[L++]=u[G++];if(J>1){u[L++]=u[G++]}}}}else{if((v&64)===0){m=I[(m&65535)+(B&((1<<v)-1))];continue dodist}else{K.msg="invalid distance code";s.mode=j;break top}}break}}else{if((v&64)===0){m=F[(m&65535)+(B&((1<<v)-1))];continue dolen}else{if(v&32){s.mode=l;break top}else{K.msg="invalid literal/length code";s.mode=j;break top}}}}break}}while(M<y&&L<q);J=H>>3;M-=J;H-=J<<3;B&=(1<<H)-1;K.next_in=M;K.next_out=L;K.avail_in=(M<y?5+(y-M):5-(M-y));K.avail_out=(L<q?257+(q-L):257-(L-q));s.hold=B;s.bits=H;return}},{}],35:[function(Y,az,P){var U=Y("../utils/common");var O=Y("./adler32");var ag=Y("./crc32");var at=Y("./inffast");var p=Y("./inftrees");var af=0;var ah=1;var L=2;var r=4;var V=5;var E=6;var x=0;var B=1;var w=2;var av=-2;var z=-3;var N=-4;var l=-5;var ad=8;var ao=1;var an=2;var m=3;var aj=4;var G=5;var g=6;var v=7;var ab=8;var t=9;var au=10;var y=11;var o=12;var al=13;var j=14;var aB=15;var ar=16;var q=17;var C=18;var W=19;var ac=20;var f=21;var ay=22;var X=23;var aw=24;var F=25;var H=26;var aq=27;var Z=28;var D=29;var h=30;var aA=31;var I=32;var aa=852;var R=592;var S=15;var M=S;function u(aC){return(((aC>>>24)&255)+((aC>>>8)&65280)+((aC&65280)<<8)+((aC&255)<<24))}function ai(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new U.Buf16(320);this.work=new U.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function T(aC){var aD;if(!aC||!aC.state){return av}aD=aC.state;aC.total_in=aC.total_out=aD.total=0;aC.msg="";if(aD.wrap){aC.adler=aD.wrap&1}aD.mode=ao;aD.last=0;aD.havedict=0;aD.dmax=32768;aD.head=null;aD.hold=0;aD.bits=0;aD.lencode=aD.lendyn=new U.Buf32(aa);aD.distcode=aD.distdyn=new U.Buf32(R);aD.sane=1;aD.back=-1;return x}function ax(aC){var aD;if(!aC||!aC.state){return av}aD=aC.state;aD.wsize=0;aD.whave=0;aD.wnext=0;return T(aC)}function A(aC,aE){var aD;var aF;if(!aC||!aC.state){return av}aF=aC.state;if(aE<0){aD=0;aE=-aE}else{aD=(aE>>4)+1;if(aE<48){aE&=15}}if(aE&&(aE<8||aE>15)){return av}if(aF.window!==null&&aF.wbits!==aE){aF.window=null}aF.wrap=aD;aF.wbits=aE;return ax(aC)}function s(aC,aE){var aD;var aF;if(!aC){return av}aF=new ai();aC.state=aF;aF.window=null;aD=A(aC,aE);if(aD!==x){aC.state=null}return aD}function K(aC){return s(aC,M)}var ak=true;var ap,n;function J(aD){if(ak){var aC;ap=new U.Buf32(512);n=new U.Buf32(32);aC=0;while(aC<144){aD.lens[aC++]=8}while(aC<256){aD.lens[aC++]=9}while(aC<280){aD.lens[aC++]=7}while(aC<288){aD.lens[aC++]=8}p(ah,aD.lens,0,288,ap,0,aD.work,{bits:9});aC=0;while(aC<32){aD.lens[aC++]=5}p(L,aD.lens,0,32,n,0,aD.work,{bits:5});ak=false}aD.lencode=ap;aD.lenbits=9;aD.distcode=n;aD.distbits=5}function Q(aD,aG,aC,aH){var aF;var aE=aD.state;if(aE.window===null){aE.wsize=1<<aE.wbits;aE.wnext=0;aE.whave=0;aE.window=new U.Buf8(aE.wsize)}if(aH>=aE.wsize){U.arraySet(aE.window,aG,aC-aE.wsize,aE.wsize,0);aE.wnext=0;aE.whave=aE.wsize}else{aF=aE.wsize-aE.wnext;if(aF>aH){aF=aH}U.arraySet(aE.window,aG,aC-aH,aF,aE.wnext);aH-=aF;if(aH){U.arraySet(aE.window,aG,aC-aH,aH,0);aE.wnext=aH;aE.whave=aE.wsize}else{aE.wnext+=aF;if(aE.wnext===aE.wsize){aE.wnext=0}if(aE.whave<aE.wsize){aE.whave+=aF}}}return 0}function ae(aZ,aT){var aH;var aM,aK;var aR;var aI;var aF,aG;var aP;var aV;var a3,a2;var aU;var aW;var aE;var aC=0;var a0,aL,a1;var aQ,aD,aN;var aY;var a4;var aJ=new U.Buf8(4);var aO;var aS;var aX=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!aZ||!aZ.state||!aZ.output||(!aZ.input&&aZ.avail_in!==0)){return av}aH=aZ.state;if(aH.mode===o){aH.mode=al}aI=aZ.next_out;aK=aZ.output;aG=aZ.avail_out;aR=aZ.next_in;aM=aZ.input;aF=aZ.avail_in;aP=aH.hold;aV=aH.bits;a3=aF;a2=aG;a4=x;inf_leave:for(;;){switch(aH.mode){case ao:if(aH.wrap===0){aH.mode=al;break}while(aV<16){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if((aH.wrap&2)&&aP===35615){aH.check=0;aJ[0]=aP&255;aJ[1]=(aP>>>8)&255;aH.check=ag(aH.check,aJ,2,0);aP=0;aV=0;aH.mode=an;break}aH.flags=0;if(aH.head){aH.head.done=false}if(!(aH.wrap&1)||(((aP&255)<<8)+(aP>>8))%31){aZ.msg="incorrect header check";aH.mode=h;break}if((aP&15)!==ad){aZ.msg="unknown compression method";aH.mode=h;break}aP>>>=4;aV-=4;aY=(aP&15)+8;if(aH.wbits===0){aH.wbits=aY}else{if(aY>aH.wbits){aZ.msg="invalid window size";aH.mode=h;break}}aH.dmax=1<<aY;aZ.adler=aH.check=1;aH.mode=aP&512?au:o;aP=0;aV=0;break;case an:while(aV<16){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aH.flags=aP;if((aH.flags&255)!==ad){aZ.msg="unknown compression method";aH.mode=h;break}if(aH.flags&57344){aZ.msg="unknown header flags set";aH.mode=h;break}if(aH.head){aH.head.text=((aP>>8)&1)}if(aH.flags&512){aJ[0]=aP&255;aJ[1]=(aP>>>8)&255;aH.check=ag(aH.check,aJ,2,0)}aP=0;aV=0;aH.mode=m;case m:while(aV<32){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if(aH.head){aH.head.time=aP}if(aH.flags&512){aJ[0]=aP&255;aJ[1]=(aP>>>8)&255;aJ[2]=(aP>>>16)&255;aJ[3]=(aP>>>24)&255;aH.check=ag(aH.check,aJ,4,0)}aP=0;aV=0;aH.mode=aj;case aj:while(aV<16){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if(aH.head){aH.head.xflags=(aP&255);aH.head.os=(aP>>8)}if(aH.flags&512){aJ[0]=aP&255;aJ[1]=(aP>>>8)&255;aH.check=ag(aH.check,aJ,2,0)}aP=0;aV=0;aH.mode=G;case G:if(aH.flags&1024){while(aV<16){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aH.length=aP;if(aH.head){aH.head.extra_len=aP}if(aH.flags&512){aJ[0]=aP&255;aJ[1]=(aP>>>8)&255;aH.check=ag(aH.check,aJ,2,0)}aP=0;aV=0}else{if(aH.head){aH.head.extra=null}}aH.mode=g;case g:if(aH.flags&1024){aU=aH.length;if(aU>aF){aU=aF}if(aU){if(aH.head){aY=aH.head.extra_len-aH.length;if(!aH.head.extra){aH.head.extra=new Array(aH.head.extra_len)}U.arraySet(aH.head.extra,aM,aR,aU,aY)}if(aH.flags&512){aH.check=ag(aH.check,aM,aU,aR)}aF-=aU;aR+=aU;aH.length-=aU}if(aH.length){break inf_leave}}aH.length=0;aH.mode=v;case v:if(aH.flags&2048){if(aF===0){break inf_leave}aU=0;do{aY=aM[aR+aU++];if(aH.head&&aY&&(aH.length<65536)){aH.head.name+=String.fromCharCode(aY)}}while(aY&&aU<aF);if(aH.flags&512){aH.check=ag(aH.check,aM,aU,aR)}aF-=aU;aR+=aU;if(aY){break inf_leave}}else{if(aH.head){aH.head.name=null}}aH.length=0;aH.mode=ab;case ab:if(aH.flags&4096){if(aF===0){break inf_leave}aU=0;do{aY=aM[aR+aU++];if(aH.head&&aY&&(aH.length<65536)){aH.head.comment+=String.fromCharCode(aY)}}while(aY&&aU<aF);if(aH.flags&512){aH.check=ag(aH.check,aM,aU,aR)}aF-=aU;aR+=aU;if(aY){break inf_leave}}else{if(aH.head){aH.head.comment=null}}aH.mode=t;case t:if(aH.flags&512){while(aV<16){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if(aP!==(aH.check&65535)){aZ.msg="header crc mismatch";aH.mode=h;break}aP=0;aV=0}if(aH.head){aH.head.hcrc=((aH.flags>>9)&1);aH.head.done=true}aZ.adler=aH.check=0;aH.mode=o;break;case au:while(aV<32){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aZ.adler=aH.check=u(aP);aP=0;aV=0;aH.mode=y;case y:if(aH.havedict===0){aZ.next_out=aI;aZ.avail_out=aG;aZ.next_in=aR;aZ.avail_in=aF;aH.hold=aP;aH.bits=aV;return w}aZ.adler=aH.check=1;aH.mode=o;case o:if(aT===V||aT===E){break inf_leave}case al:if(aH.last){aP>>>=aV&7;aV-=aV&7;aH.mode=aq;break}while(aV<3){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aH.last=(aP&1);aP>>>=1;aV-=1;switch((aP&3)){case 0:aH.mode=j;break;case 1:J(aH);aH.mode=ac;if(aT===E){aP>>>=2;aV-=2;break inf_leave}break;case 2:aH.mode=q;break;case 3:aZ.msg="invalid block type";aH.mode=h}aP>>>=2;aV-=2;break;case j:aP>>>=aV&7;aV-=aV&7;while(aV<32){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if((aP&65535)!==((aP>>>16)^65535)){aZ.msg="invalid stored block lengths";aH.mode=h;break}aH.length=aP&65535;aP=0;aV=0;aH.mode=aB;if(aT===E){break inf_leave}case aB:aH.mode=ar;case ar:aU=aH.length;if(aU){if(aU>aF){aU=aF}if(aU>aG){aU=aG}if(aU===0){break inf_leave}U.arraySet(aK,aM,aR,aU,aI);aF-=aU;aR+=aU;aG-=aU;aI+=aU;aH.length-=aU;break}aH.mode=o;break;case q:while(aV<14){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aH.nlen=(aP&31)+257;aP>>>=5;aV-=5;aH.ndist=(aP&31)+1;aP>>>=5;aV-=5;aH.ncode=(aP&15)+4;aP>>>=4;aV-=4;if(aH.nlen>286||aH.ndist>30){aZ.msg="too many length or distance symbols";aH.mode=h;break}aH.have=0;aH.mode=C;case C:while(aH.have<aH.ncode){while(aV<3){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aH.lens[aX[aH.have++]]=(aP&7);aP>>>=3;aV-=3}while(aH.have<19){aH.lens[aX[aH.have++]]=0}aH.lencode=aH.lendyn;aH.lenbits=7;aO={bits:aH.lenbits};a4=p(af,aH.lens,0,19,aH.lencode,0,aH.work,aO);aH.lenbits=aO.bits;if(a4){aZ.msg="invalid code lengths set";aH.mode=h;break}aH.have=0;aH.mode=W;case W:while(aH.have<aH.nlen+aH.ndist){for(;;){aC=aH.lencode[aP&((1<<aH.lenbits)-1)];a0=aC>>>24;aL=(aC>>>16)&255;a1=aC&65535;if((a0)<=aV){break}if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if(a1<16){aP>>>=a0;aV-=a0;aH.lens[aH.have++]=a1}else{if(a1===16){aS=a0+2;while(aV<aS){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aP>>>=a0;aV-=a0;if(aH.have===0){aZ.msg="invalid bit length repeat";aH.mode=h;break}aY=aH.lens[aH.have-1];aU=3+(aP&3);aP>>>=2;aV-=2}else{if(a1===17){aS=a0+3;while(aV<aS){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aP>>>=a0;aV-=a0;aY=0;aU=3+(aP&7);aP>>>=3;aV-=3}else{aS=a0+7;while(aV<aS){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aP>>>=a0;aV-=a0;aY=0;aU=11+(aP&127);aP>>>=7;aV-=7}}if(aH.have+aU>aH.nlen+aH.ndist){aZ.msg="invalid bit length repeat";aH.mode=h;break}while(aU--){aH.lens[aH.have++]=aY}}}if(aH.mode===h){break}if(aH.lens[256]===0){aZ.msg="invalid code -- missing end-of-block";aH.mode=h;break}aH.lenbits=9;aO={bits:aH.lenbits};a4=p(ah,aH.lens,0,aH.nlen,aH.lencode,0,aH.work,aO);aH.lenbits=aO.bits;if(a4){aZ.msg="invalid literal/lengths set";aH.mode=h;break}aH.distbits=6;aH.distcode=aH.distdyn;aO={bits:aH.distbits};a4=p(L,aH.lens,aH.nlen,aH.ndist,aH.distcode,0,aH.work,aO);aH.distbits=aO.bits;if(a4){aZ.msg="invalid distances set";aH.mode=h;break}aH.mode=ac;if(aT===E){break inf_leave}case ac:aH.mode=f;case f:if(aF>=6&&aG>=258){aZ.next_out=aI;aZ.avail_out=aG;aZ.next_in=aR;aZ.avail_in=aF;aH.hold=aP;aH.bits=aV;at(aZ,a2);aI=aZ.next_out;aK=aZ.output;aG=aZ.avail_out;aR=aZ.next_in;aM=aZ.input;aF=aZ.avail_in;aP=aH.hold;aV=aH.bits;if(aH.mode===o){aH.back=-1}break}aH.back=0;for(;;){aC=aH.lencode[aP&((1<<aH.lenbits)-1)];a0=aC>>>24;aL=(aC>>>16)&255;a1=aC&65535;if(a0<=aV){break}if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if(aL&&(aL&240)===0){aQ=a0;aD=aL;aN=a1;for(;;){aC=aH.lencode[aN+((aP&((1<<(aQ+aD))-1))>>aQ)];a0=aC>>>24;aL=(aC>>>16)&255;a1=aC&65535;if((aQ+a0)<=aV){break}if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aP>>>=aQ;aV-=aQ;aH.back+=aQ}aP>>>=a0;aV-=a0;aH.back+=a0;aH.length=a1;if(aL===0){aH.mode=H;break}if(aL&32){aH.back=-1;aH.mode=o;break}if(aL&64){aZ.msg="invalid literal/length code";aH.mode=h;break}aH.extra=aL&15;aH.mode=ay;case ay:if(aH.extra){aS=aH.extra;while(aV<aS){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aH.length+=aP&((1<<aH.extra)-1);aP>>>=aH.extra;aV-=aH.extra;aH.back+=aH.extra}aH.was=aH.length;aH.mode=X;case X:for(;;){aC=aH.distcode[aP&((1<<aH.distbits)-1)];a0=aC>>>24;aL=(aC>>>16)&255;a1=aC&65535;if((a0)<=aV){break}if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if((aL&240)===0){aQ=a0;aD=aL;aN=a1;for(;;){aC=aH.distcode[aN+((aP&((1<<(aQ+aD))-1))>>aQ)];a0=aC>>>24;aL=(aC>>>16)&255;a1=aC&65535;if((aQ+a0)<=aV){break}if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aP>>>=aQ;aV-=aQ;aH.back+=aQ}aP>>>=a0;aV-=a0;aH.back+=a0;if(aL&64){aZ.msg="invalid distance code";aH.mode=h;break}aH.offset=a1;aH.extra=(aL)&15;aH.mode=aw;case aw:if(aH.extra){aS=aH.extra;while(aV<aS){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}aH.offset+=aP&((1<<aH.extra)-1);aP>>>=aH.extra;aV-=aH.extra;aH.back+=aH.extra}if(aH.offset>aH.dmax){aZ.msg="invalid distance too far back";aH.mode=h;break}aH.mode=F;case F:if(aG===0){break inf_leave}aU=a2-aG;if(aH.offset>aU){aU=aH.offset-aU;if(aU>aH.whave){if(aH.sane){aZ.msg="invalid distance too far back";aH.mode=h;break}}if(aU>aH.wnext){aU-=aH.wnext;aW=aH.wsize-aU}else{aW=aH.wnext-aU}if(aU>aH.length){aU=aH.length}aE=aH.window}else{aE=aK;aW=aI-aH.offset;aU=aH.length}if(aU>aG){aU=aG}aG-=aU;aH.length-=aU;do{aK[aI++]=aE[aW++]}while(--aU);if(aH.length===0){aH.mode=f}break;case H:if(aG===0){break inf_leave}aK[aI++]=aH.length;aG--;aH.mode=f;break;case aq:if(aH.wrap){while(aV<32){if(aF===0){break inf_leave}aF--;aP|=aM[aR++]<<aV;aV+=8}a2-=aG;aZ.total_out+=a2;aH.total+=a2;if(a2){aZ.adler=aH.check=(aH.flags?ag(aH.check,aK,a2,aI-a2):O(aH.check,aK,a2,aI-a2))}a2=aG;if((aH.flags?aP:u(aP))!==aH.check){aZ.msg="incorrect data check";aH.mode=h;break}aP=0;aV=0}aH.mode=Z;case Z:if(aH.wrap&&aH.flags){while(aV<32){if(aF===0){break inf_leave}aF--;aP+=aM[aR++]<<aV;aV+=8}if(aP!==(aH.total&4294967295)){aZ.msg="incorrect length check";aH.mode=h;break}aP=0;aV=0}aH.mode=D;case D:a4=B;break inf_leave;case h:a4=z;break inf_leave;case aA:return N;case I:default:return av}}aZ.next_out=aI;aZ.avail_out=aG;aZ.next_in=aR;aZ.avail_in=aF;aH.hold=aP;aH.bits=aV;if(aH.wsize||(a2!==aZ.avail_out&&aH.mode<h&&(aH.mode<aq||aT!==r))){if(Q(aZ,aZ.output,aZ.next_out,a2-aZ.avail_out)){aH.mode=aA;return N}}a3-=aZ.avail_in;a2-=aZ.avail_out;aZ.total_in+=a3;aZ.total_out+=a2;aH.total+=a2;if(aH.wrap&&a2){aZ.adler=aH.check=(aH.flags?ag(aH.check,aK,a2,aZ.next_out-a2):O(aH.check,aK,a2,aZ.next_out-a2))}aZ.data_type=aH.bits+(aH.last?64:0)+(aH.mode===o?128:0)+(aH.mode===ac||aH.mode===aB?256:0);if(((a3===0&&a2===0)||aT===r)&&a4===x){a4=l}return a4}function am(aC){if(!aC||!aC.state){return av}var aD=aC.state;if(aD.window){aD.window=null}aC.state=null;return x}function k(aC,aD){var aE;if(!aC||!aC.state){return av}aE=aC.state;if((aE.wrap&2)===0){return av}aE.head=aD;aD.done=false;return x}P.inflateReset=ax;P.inflateReset2=A;P.inflateResetKeep=T;P.inflateInit=K;P.inflateInit2=s;P.inflate=ae;P.inflateEnd=am;P.inflateGetHeader=k;P.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(g,h,k){var t=g("../utils/common");var s=15;var p=852;var o=592;var r=0;var m=1;var j=2;var q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function n(x,ac,K,Z,Y,W,J,G){var N=G.bits;var U=0;var F=0;var M=0,T=0;var L=0;var X=0;var D=0;var y=0;var B=0;var S=0;var R;var O;var ad;var Q;var I;var A=null;var H=0;var w;var C=new t.Buf16(s+1);var z=new t.Buf16(s+1);var v=null;var ab=0;var V,E,aa;for(U=0;U<=s;U++){C[U]=0}for(F=0;F<Z;F++){C[ac[K+F]]++}L=N;for(T=s;T>=1;T--){if(C[T]!==0){break}}if(L>T){L=T}if(T===0){Y[W++]=(1<<24)|(64<<16)|0;Y[W++]=(1<<24)|(64<<16)|0;G.bits=1;return 0}for(M=1;M<T;M++){if(C[M]!==0){break}}if(L<M){L=M}y=1;for(U=1;U<=s;U++){y<<=1;y-=C[U];if(y<0){return -1}}if(y>0&&(x===r||T!==1)){return -1}z[1]=0;for(U=1;U<s;U++){z[U+1]=z[U]+C[U]}for(F=0;F<Z;F++){if(ac[K+F]!==0){J[z[ac[K+F]]++]=F}}if(x===r){A=v=J;w=19}else{if(x===m){A=q;H-=257;v=u;ab-=257;w=256}else{A=l;v=f;w=-1}}S=0;F=0;U=M;I=W;X=L;D=0;ad=-1;B=1<<L;Q=B-1;if((x===m&&B>p)||(x===j&&B>o)){return 1}var P=0;for(;;){P++;V=U-D;if(J[F]<w){E=0;aa=J[F]}else{if(J[F]>w){E=v[ab+J[F]];aa=A[H+J[F]]}else{E=32+64;aa=0}}R=1<<(U-D);O=1<<X;M=O;do{O-=R;Y[I+(S>>D)+O]=(V<<24)|(E<<16)|aa|0}while(O!==0);R=1<<(U-1);while(S&R){R>>=1}if(R!==0){S&=R-1;S+=R}else{S=0}F++;if(--C[U]===0){if(U===T){break}U=ac[K+J[F]]}if(U>L&&(S&Q)!==ad){if(D===0){D=L}I+=M;X=U-D;y=1<<X;while(X+D<T){y-=C[X+D];if(y<=0){break}X++;y<<=1}B+=1<<X;if((x===m&&B>p)||(x===j&&B>o)){return 1}ad=S&Q;Y[ad]=(L<<24)|(X<<16)|(I-W)|0}}if(S!==0){Y[I+S]=((U-D)<<24)|(64<<16)|0}G.bits=L;return 0}},{"../utils/common":27}],37:[function(h,g,f){g.exports={"2":"need dictionary","1":"stream end","0":"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(L,m,an){var ay=L("../utils/common");var V=4;var v=0;var F=1;var G=2;function f(aA){var az=aA.length;while(--az>=0){aA[az]=0}}var Z=0;var ap=1;var O=2;var ax=3;var H=258;var s=29;var j=256;var k=j+1+s;var g=30;var y=19;var l=2*k+1;var au=15;var B=16;var ai=7;var h=256;var K=16;var J=17;var P=18;var n=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var X=512;var R=new Array((k+2)*2);f(R);var ad=new Array(g*2);f(ad);var aj=new Array(X);f(aj);var C=new Array(H-ax+1);f(C);var Q=new Array(s);f(Q);var at=new Array(g);f(at);var ag=function(aC,aB,aA,az,aD){this.static_tree=aC;this.extra_bits=aB;this.extra_base=aA;this.elems=az;this.max_length=aD;this.has_stree=aC&&aC.length};var al;var ac;var A;var aw=function(aA,az){this.dyn_tree=aA;this.max_code=0;this.stat_desc=az};function ae(az){return az<256?aj[az]:aj[256+(az>>>7)]}function q(aA,az){aA.pending_buf[aA.pending++]=(az)&255;aA.pending_buf[aA.pending++]=(az>>>8)&255}function ak(az,aB,aA){if(az.bi_valid>(B-aA)){az.bi_buf|=(aB<<az.bi_valid)&65535;q(az,az.bi_buf);az.bi_buf=aB>>(B-az.bi_valid);az.bi_valid+=aA-B}else{az.bi_buf|=(aB<<az.bi_valid)&65535;az.bi_valid+=aA}}function ao(aA,aB,az){ak(aA,az[aB*2],az[aB*2+1])}function D(aB,az){var aA=0;do{aA|=aB&1;aB>>>=1;aA<<=1}while(--az>0);return aA>>>1}function x(az){if(az.bi_valid===16){q(az,az.bi_buf);az.bi_buf=0;az.bi_valid=0}else{if(az.bi_valid>=8){az.pending_buf[az.pending++]=az.bi_buf&255;az.bi_buf>>=8;az.bi_valid-=8}}}function p(aN,aI){var aO=aI.dyn_tree;var aJ=aI.max_code;var aM=aI.stat_desc.static_tree;var aB=aI.stat_desc.has_stree;var aD=aI.stat_desc.extra_bits;var az=aI.stat_desc.extra_base;var aL=aI.stat_desc.max_length;var aG;var aA,aC;var aK;var aF;var aH;var aE=0;for(aK=0;aK<=au;aK++){aN.bl_count[aK]=0}aO[aN.heap[aN.heap_max]*2+1]=0;for(aG=aN.heap_max+1;aG<l;aG++){aA=aN.heap[aG];aK=aO[aO[aA*2+1]*2+1]+1;if(aK>aL){aK=aL;aE++}aO[aA*2+1]=aK;if(aA>aJ){continue}aN.bl_count[aK]++;aF=0;if(aA>=az){aF=aD[aA-az]}aH=aO[aA*2];aN.opt_len+=aH*(aK+aF);if(aB){aN.static_len+=aH*(aM[aA*2+1]+aF)}}if(aE===0){return}do{aK=aL-1;while(aN.bl_count[aK]===0){aK--}aN.bl_count[aK]--;aN.bl_count[aK+1]+=2;aN.bl_count[aL]--;aE-=2}while(aE>0);for(aK=aL;aK!==0;aK--){aA=aN.bl_count[aK];while(aA!==0){aC=aN.heap[--aG];if(aC>aJ){continue}if(aO[aC*2+1]!==aK){aN.opt_len+=(aK-aO[aC*2+1])*aO[aC*2];aO[aC*2+1]=aK}aA--}}}function am(aA,aG,aB){var aD=new Array(au+1);var aC=0;var aE;var aF;for(aE=1;aE<=au;aE++){aD[aE]=aC=(aC+aB[aE-1])<<1}for(aF=0;aF<=aG;aF++){var az=aA[aF*2+1];if(az===0){continue}aA[aF*2]=D(aD[az]++,az)}}function Y(){var aE;var aC;var aB;var aA;var aD;var az=new Array(au+1);aB=0;for(aA=0;aA<s-1;aA++){Q[aA]=aB;for(aE=0;aE<(1<<n[aA]);aE++){C[aB++]=aA}}C[aB-1]=aA;aD=0;for(aA=0;aA<16;aA++){at[aA]=aD;for(aE=0;aE<(1<<z[aA]);aE++){aj[aD++]=aA}}aD>>=7;for(;aA<g;aA++){at[aA]=aD<<7;for(aE=0;aE<(1<<(z[aA]-7));aE++){aj[256+aD++]=aA}}for(aC=0;aC<=au;aC++){az[aC]=0}aE=0;while(aE<=143){R[aE*2+1]=8;aE++;az[8]++}while(aE<=255){R[aE*2+1]=9;aE++;az[9]++}while(aE<=279){R[aE*2+1]=7;aE++;az[7]++}while(aE<=287){R[aE*2+1]=8;aE++;az[8]++}am(R,k+1,az);for(aE=0;aE<g;aE++){ad[aE*2+1]=5;ad[aE*2]=D(aE,5)}al=new ag(R,n,j+1,k,au);ac=new ag(ad,z,0,g,au);A=new ag(new Array(0),E,0,y,ai)}function N(az){var aA;for(aA=0;aA<k;aA++){az.dyn_ltree[aA*2]=0}for(aA=0;aA<g;aA++){az.dyn_dtree[aA*2]=0}for(aA=0;aA<y;aA++){az.bl_tree[aA*2]=0}az.dyn_ltree[h*2]=1;az.opt_len=az.static_len=0;az.last_lit=az.matches=0}function o(az){if(az.bi_valid>8){q(az,az.bi_buf)}else{if(az.bi_valid>0){az.pending_buf[az.pending++]=az.bi_buf}}az.bi_buf=0;az.bi_valid=0}function u(aB,aA,az,aC){o(aB);if(aC){q(aB,az);q(aB,~az)}ay.arraySet(aB.pending_buf,aB.window,aA,az,aB.pending);aB.pending+=az}function ab(aA,aE,az,aD){var aC=aE*2;var aB=az*2;return(aA[aC]<aA[aB]||(aA[aC]===aA[aB]&&aD[aE]<=aD[az]))}function av(aD,az,aB){var aA=aD.heap[aB];var aC=aB<<1;while(aC<=aD.heap_len){if(aC<aD.heap_len&&ab(az,aD.heap[aC+1],aD.heap[aC],aD.depth)){aC++}if(ab(az,aA,aD.heap[aC],aD.depth)){break}aD.heap[aB]=aD.heap[aC];aB=aC;aC<<=1}aD.heap[aB]=aA}function ar(aA,aG,aD){var aF;var aC;var aE=0;var aB;var az;if(aA.last_lit!==0){do{aF=(aA.pending_buf[aA.d_buf+aE*2]<<8)|(aA.pending_buf[aA.d_buf+aE*2+1]);aC=aA.pending_buf[aA.l_buf+aE];aE++;if(aF===0){ao(aA,aC,aG)}else{aB=C[aC];ao(aA,aB+j+1,aG);az=n[aB];if(az!==0){aC-=Q[aB];ak(aA,aC,az)}aF--;aB=ae(aF);ao(aA,aB,aD);az=z[aB];if(az!==0){aF-=at[aB];ak(aA,aF,az)}}}while(aE<aA.last_lit)}ao(aA,h,aG)}function aa(aH,aE){var aI=aE.dyn_tree;var aG=aE.stat_desc.static_tree;var aB=aE.stat_desc.has_stree;var az=aE.stat_desc.elems;var aA,aD;var aF=-1;var aC;aH.heap_len=0;aH.heap_max=l;for(aA=0;aA<az;aA++){if(aI[aA*2]!==0){aH.heap[++aH.heap_len]=aF=aA;aH.depth[aA]=0}else{aI[aA*2+1]=0}}while(aH.heap_len<2){aC=aH.heap[++aH.heap_len]=(aF<2?++aF:0);aI[aC*2]=1;aH.depth[aC]=0;aH.opt_len--;if(aB){aH.static_len-=aG[aC*2+1]}}aE.max_code=aF;for(aA=(aH.heap_len>>1);aA>=1;aA--){av(aH,aI,aA)}aC=az;do{aA=aH.heap[1];aH.heap[1]=aH.heap[aH.heap_len--];av(aH,aI,1);aD=aH.heap[1];aH.heap[--aH.heap_max]=aA;aH.heap[--aH.heap_max]=aD;aI[aC*2]=aI[aA*2]+aI[aD*2];aH.depth[aC]=(aH.depth[aA]>=aH.depth[aD]?aH.depth[aA]:aH.depth[aD])+1;aI[aA*2+1]=aI[aD*2+1]=aC;aH.heap[1]=aC++;av(aH,aI,1)}while(aH.heap_len>=2);aH.heap[--aH.heap_max]=aH.heap[1];p(aH,aE);am(aI,aF,aH.bl_count)}function t(aH,aI,aG){var aA;var aE=-1;var az;var aC=aI[0*2+1];var aD=0;var aB=7;var aF=4;if(aC===0){aB=138;aF=3}aI[(aG+1)*2+1]=65535;for(aA=0;aA<=aG;aA++){az=aC;aC=aI[(aA+1)*2+1];if(++aD<aB&&az===aC){continue}else{if(aD<aF){aH.bl_tree[az*2]+=aD}else{if(az!==0){if(az!==aE){aH.bl_tree[az*2]++}aH.bl_tree[K*2]++}else{if(aD<=10){aH.bl_tree[J*2]++}else{aH.bl_tree[P*2]++}}}}aD=0;aE=az;if(aC===0){aB=138;aF=3}else{if(az===aC){aB=6;aF=3}else{aB=7;aF=4}}}}function w(aH,aI,aG){var aA;var aE=-1;var az;var aC=aI[0*2+1];var aD=0;var aB=7;var aF=4;if(aC===0){aB=138;aF=3}for(aA=0;aA<=aG;aA++){az=aC;aC=aI[(aA+1)*2+1];if(++aD<aB&&az===aC){continue}else{if(aD<aF){do{ao(aH,az,aH.bl_tree)}while(--aD!==0)}else{if(az!==0){if(az!==aE){ao(aH,az,aH.bl_tree);aD--}ao(aH,K,aH.bl_tree);ak(aH,aD-3,2)}else{if(aD<=10){ao(aH,J,aH.bl_tree);ak(aH,aD-3,3)}else{ao(aH,P,aH.bl_tree);ak(aH,aD-11,7)}}}}aD=0;aE=az;if(aC===0){aB=138;aF=3}else{if(az===aC){aB=6;aF=3}else{aB=7;aF=4}}}}function I(aA){var az;t(aA,aA.dyn_ltree,aA.l_desc.max_code);t(aA,aA.dyn_dtree,aA.d_desc.max_code);aa(aA,aA.bl_desc);for(az=y-1;az>=3;az--){if(aA.bl_tree[W[az]*2+1]!==0){break}}aA.opt_len+=3*(az+1)+5+5+4;return az}function T(aA,aB,az,aC){var aD;ak(aA,aB-257,5);ak(aA,az-1,5);ak(aA,aC-4,4);for(aD=0;aD<aC;aD++){ak(aA,aA.bl_tree[W[aD]*2+1],3)}w(aA,aA.dyn_ltree,aB-1);w(aA,aA.dyn_dtree,az-1)}function S(aA){var az=4093624447;var aB;for(aB=0;aB<=31;aB++,az>>>=1){if((az&1)&&(aA.dyn_ltree[aB*2]!==0)){return v}}if(aA.dyn_ltree[9*2]!==0||aA.dyn_ltree[10*2]!==0||aA.dyn_ltree[13*2]!==0){return F}for(aB=32;aB<j;aB++){if(aA.dyn_ltree[aB*2]!==0){return F}}return v}var ah=false;function M(az){if(!ah){Y();ah=true}az.l_desc=new aw(az.dyn_ltree,al);az.d_desc=new aw(az.dyn_dtree,ac);az.bl_desc=new aw(az.bl_tree,A);az.bi_buf=0;az.bi_valid=0;N(az)}function U(aB,az,aA,aC){ak(aB,(Z<<1)+(aC?1:0),3);u(aB,az,aA,true)}function af(az){ak(az,ap<<1,3);ao(az,h,R);x(az)}function r(aE,aB,aD,aF){var aA,az;var aC=0;if(aE.level>0){if(aE.strm.data_type===G){aE.strm.data_type=S(aE)}aa(aE,aE.l_desc);aa(aE,aE.d_desc);aC=I(aE);aA=(aE.opt_len+3+7)>>>3;az=(aE.static_len+3+7)>>>3;if(az<=aA){aA=az}}else{aA=az=aD+5}if((aD+4<=aA)&&(aB!==-1)){U(aE,aB,aD,aF)}else{if(aE.strategy===V||az===aA){ak(aE,(ap<<1)+(aF?1:0),3);ar(aE,R,ad)}else{ak(aE,(O<<1)+(aF?1:0),3);T(aE,aE.l_desc.max_code+1,aE.d_desc.max_code+1,aC+1);ar(aE,aE.dyn_ltree,aE.dyn_dtree)}}N(aE);if(aF){o(aE)}}function aq(az,aB,aA){az.pending_buf[az.d_buf+az.last_lit*2]=(aB>>>8)&255;az.pending_buf[az.d_buf+az.last_lit*2+1]=aB&255;az.pending_buf[az.l_buf+az.last_lit]=aA&255;az.last_lit++;if(aB===0){az.dyn_ltree[aA*2]++}else{az.matches++;aB--;az.dyn_ltree[(C[aA]+j+1)*2]++;az.dyn_dtree[ae(aB)*2]++}return(az.last_lit===az.lit_bufsize-1)}an._tr_init=M;an._tr_stored_block=U;an._tr_flush_block=r;an._tr_tally=aq;an._tr_align=af},{"../utils/common":27}],39:[function(h,g,f){function j(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}g.exports=j},{}]},{},[9])(9)});
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator))||(function(n){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var o=n.document,k=function(){return n.URL||n.webkitURL||n},r=o.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download" in r,s=function(u){var t=o.createEvent("MouseEvents");t.initMouseEvent("click",true,false,n,0,0,0,0,0,false,false,false,false,0,null);u.dispatchEvent(t)},h=n.webkitRequestFileSystem,p=n.requestFileSystem||h||n.mozRequestFileSystem,f=function(t){(n.setImmediate||n.setTimeout)(function(){throw t},0)},m="application/octet-stream",j=0,c=10,q=function(u){var t=function(){if(typeof u==="string"){k().revokeObjectURL(u)}else{u.remove()}};if(n.chrome){t()}else{setTimeout(t,c)}},l=function(u,t,x){t=[].concat(t);var w=t.length;while(w--){var y=u["on"+t[w]];if(typeof y==="function"){try{y.call(u,x||u)}catch(v){f(v)}}}},b=function(t,u){var v=this,B=t.type,E=false,x,w,A=function(){l(v,"writestart progress write writeend".split(" "))},D=function(){if(E||!x){x=k().createObjectURL(t)}if(w){w.location.href=x}else{var F=n.open(x,"_blank");if(F==undefined&&typeof safari!=="undefined"){n.location.href=x}}v.readyState=v.DONE;A();q(x)},z=function(F){return function(){if(v.readyState!==v.DONE){return F.apply(this,arguments)}}},y={create:true,exclusive:false},C;v.readyState=v.INIT;if(!u){u="download"}if(d){x=k().createObjectURL(t);r.href=x;r.download=u;s(r);v.readyState=v.DONE;A();q(x);return}if(n.chrome&&B&&B!==m){C=t.slice||t.webkitSlice;t=C.call(t,0,t.size,m);E=true}if(h&&u!=="download"){u+=".download"}if(B===m||h){w=n}if(!p){D();return}j+=t.size;p(n.TEMPORARY,j,z(function(F){F.root.getDirectory("saved",y,z(function(G){var H=function(){G.getFile(u,y,z(function(I){I.createWriter(z(function(J){J.onwriteend=function(K){w.location.href=I.toURL();v.readyState=v.DONE;l(v,"writeend",K);q(I)};J.onerror=function(){var K=J.error;if(K.code!==K.ABORT_ERR){D()}};"writestart progress write abort".split(" ").forEach(function(K){J["on"+K]=v["on"+K]});J.write(t);v.abort=function(){J.abort();v.readyState=v.DONE};v.readyState=v.WRITING}),D)}),D)};G.getFile(u,{create:false},z(function(I){I.remove();H()}),z(function(I){if(I.code===I.NOT_FOUND_ERR){H()}else{D()}}))}),D)}),D)},a=b.prototype,g=function(t,u){return new b(t,u)};a.abort=function(){var t=this;t.readyState=t.DONE;l(t,"abort")};a.readyState=a.INIT=0;a.WRITING=1;a.DONE=2;a.error=a.onwritestart=a.onprogress=a.onwrite=a.onabort=a.onerror=a.onwriteend=null;return g}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content));if(typeof module!=="undefined"&&module!==null){module.exports=saveAs}else{if((typeof define!=="undefined"&&define!==null)&&(define.amd!=null)){define([],function(){return saveAs})}}function X2JS(x){var s="1.1.5";x=x||{};j();t();function j(){if(x.escapeMode===undefined){x.escapeMode=true}x.attributePrefix=x.attributePrefix||"_";x.arrayAccessForm=x.arrayAccessForm||"none";x.emptyNodeForm=x.emptyNodeForm||"text";if(x.enableToStringFunc===undefined){x.enableToStringFunc=true}x.arrayAccessFormPaths=x.arrayAccessFormPaths||[];if(x.skipEmptyTextNodesForObj===undefined){x.skipEmptyTextNodesForObj=true}if(x.stripWhitespaces===undefined){x.stripWhitespaces=true}x.datetimeAccessFormPaths=x.datetimeAccessFormPaths||[]}var h={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function t(){function z(B){var A=String(B);if(A.length===1){A="0"+A}return A}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}}if(typeof Date.prototype.toISOString!=="function"){Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+z(this.getUTCMonth()+1)+"-"+z(this.getUTCDate())+"T"+z(this.getUTCHours())+":"+z(this.getUTCMinutes())+":"+z(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}}function v(z){var A=z.localName;if(A==null){A=z.baseName}if(A==null||A==""){A=z.nodeName}return A}function q(z){return z.prefix}function r(z){if(typeof(z)=="string"){return z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}else{return z}}function l(z){return z.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function n(D,A,C){switch(x.arrayAccessForm){case"property":if(!(D[A] instanceof Array)){D[A+"_asArray"]=[D[A]]}else{D[A+"_asArray"]=D[A]}break}if(!(D[A] instanceof Array)&&x.arrayAccessFormPaths.length>0){var z=0;for(;z<x.arrayAccessFormPaths.length;z++){var B=x.arrayAccessFormPaths[z];if(typeof B==="string"){if(B==C){break}}else{if(B instanceof RegExp){if(B.test(C)){break}}else{if(typeof B==="function"){if(B(D,A,C)){break}}}}}if(z!=x.arrayAccessFormPaths.length){D[A]=[D[A]]}}}function a(E){var C=E.split(/[-T:+Z]/g);var D=new Date(C[0],C[1]-1,C[2]);var B=C[5].split(".");D.setHours(C[3],C[4],B[0]);if(B.length>1){D.setMilliseconds(B[1])}if(C[6]&&C[7]){var A=C[6]*60+Number(C[7]);var z=/\d\d-\d\d:\d\d$/.test(E)?"-":"+";A=0+(z=="-"?-1*A:A);D.setMinutes(D.getMinutes()-A-D.getTimezoneOffset())}else{if(E.indexOf("Z",E.length-1)!==-1){D=new Date(Date.UTC(D.getFullYear(),D.getMonth(),D.getDate(),D.getHours(),D.getMinutes(),D.getSeconds(),D.getMilliseconds()))}}return D}function p(C,A,B){if(x.datetimeAccessFormPaths.length>0){var D=B.split(".#")[0];var z=0;for(;z<x.datetimeAccessFormPaths.length;z++){var E=x.datetimeAccessFormPaths[z];if(typeof E==="string"){if(E==D){break}}else{if(E instanceof RegExp){if(E.test(D)){break}}else{if(typeof E==="function"){if(E(obj,A,D)){break}}}}}if(z!=x.datetimeAccessFormPaths.length){return a(C)}else{return C}}else{return C}}function y(B,G){if(B.nodeType==h.DOCUMENT_NODE){var H=new Object();var z=B.childNodes;for(var I=0;I<z.length;I++){var A=z.item(I);if(A.nodeType==h.ELEMENT_NODE){var F=v(A);H[F]=y(A,F)}}return H}else{if(B.nodeType==h.ELEMENT_NODE){var H=new Object();H.__cnt=0;var z=B.childNodes;for(var I=0;I<z.length;I++){var A=z.item(I);var F=v(A);if(A.nodeType!=h.COMMENT_NODE){H.__cnt++;if(H[F]==null){H[F]=y(A,G+"."+F);n(H,F,G+"."+F)}else{if(H[F]!=null){if(!(H[F] instanceof Array)){H[F]=[H[F]];n(H,F,G+"."+F)}}(H[F])[H[F].length]=y(A,G+"."+F)}}}for(var C=0;C<B.attributes.length;C++){var D=B.attributes.item(C);H.__cnt++;H[x.attributePrefix+D.name]=D.value}var E=q(B);if(E!=null&&E!=""){H.__cnt++;H.__prefix=E}if(H["#text"]!=null){H.__text=H["#text"];if(H.__text instanceof Array){H.__text=H.__text.join("\n")}if(x.escapeMode){H.__text=l(H.__text)}if(x.stripWhitespaces){H.__text=H.__text.trim()}delete H["#text"];if(x.arrayAccessForm=="property"){delete H["#text_asArray"]}H.__text=p(H.__text,F,G+"."+F)}if(H["#cdata-section"]!=null){H.__cdata=H["#cdata-section"];delete H["#cdata-section"];if(x.arrayAccessForm=="property"){delete H["#cdata-section_asArray"]}}if(H.__cnt==1&&H.__text!=null){H=H.__text}else{if(H.__cnt==0&&x.emptyNodeForm=="text"){H=""}else{if(H.__cnt>1&&H.__text!=null&&x.skipEmptyTextNodesForObj){if((x.stripWhitespaces&&H.__text=="")||(H.__text.trim()=="")){delete H.__text}}}}delete H.__cnt;if(x.enableToStringFunc&&(H.__text!=null||H.__cdata!=null)){H.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}}return H}else{if(B.nodeType==h.TEXT_NODE||B.nodeType==h.CDATA_SECTION_NODE){return B.nodeValue}}}}function o(G,D,F,A){var C="<"+((G!=null&&G.__prefix!=null)?(G.__prefix+":"):"")+D;if(F!=null){for(var E=0;E<F.length;E++){var B=F[E];var z=G[B];if(x.escapeMode){z=r(z)}C+=" "+B.substr(x.attributePrefix.length)+"='"+z+"'"}}if(!A){C+=">"}else{C+="/>"}return C}function k(A,z){return"</"+(A.__prefix!=null?(A.__prefix+":"):"")+z+">"}function u(A,z){return A.indexOf(z,A.length-z.length)!==-1}function w(A,z){if((x.arrayAccessForm=="property"&&u(z.toString(),("_asArray")))||z.toString().indexOf(x.attributePrefix)==0||z.toString().indexOf("__")==0||(A[z] instanceof Function)){return true}else{return false}}function m(B){var A=0;if(B instanceof Object){for(var z in B){if(w(B,z)){continue}A++}}return A}function b(B){var A=[];if(B instanceof Object){for(var z in B){if(z.toString().indexOf("__")==-1&&z.toString().indexOf(x.attributePrefix)==0){A.push(z)}}}return A}function g(A){var z="";if(A.__cdata!=null){z+="<![CDATA["+A.__cdata+"]]>"}if(A.__text!=null){if(x.escapeMode){z+=r(A.__text)}else{z+=A.__text}}return z}function c(A){var z="";if(A instanceof Object){z+=g(A)}else{if(A!=null){if(x.escapeMode){z+=r(A)}else{z+=A}}}return z}function f(B,D,C){var z="";if(B.length==0){z+=o(B,D,C,true)}else{for(var A=0;A<B.length;A++){z+=o(B[A],D,b(B[A]),false);z+=d(B[A]);z+=k(B[A],D)}}return z}function d(F){var z="";var D=m(F);if(D>0){for(var C in F){if(w(F,C)){continue}var B=F[C];var E=b(B);if(B==null||B==undefined){z+=o(B,C,E,true)}else{if(B instanceof Object){if(B instanceof Array){z+=f(B,C,E)}else{if(B instanceof Date){z+=o(B,C,E,false);z+=B.toISOString();z+=k(B,C)}else{var A=m(B);if(A>0||B.__text!=null||B.__cdata!=null){z+=o(B,C,E,false);z+=d(B);z+=k(B,C)}else{z+=o(B,C,E,true)}}}}else{z+=o(B,C,E,false);z+=c(B);z+=k(B,C)}}}}z+=c(F);return z}this.parseXmlString=function(B){var D=window.ActiveXObject||"ActiveXObject" in window;if(B===undefined){return null}var C;if(window.DOMParser){var E=new window.DOMParser();var z=null;if(!D){try{z=E.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(A){z=null}}try{C=E.parseFromString(B,"text/xml");if(z!=null&&C.getElementsByTagNameNS(z,"parsererror").length>0){C=null}}catch(A){C=null}}else{if(B.indexOf("<?")==0){B=B.substr(B.indexOf("?>")+2)}C=new ActiveXObject("Microsoft.XMLDOM");C.async="false";C.loadXML(B)}return C};this.asArray=function(z){if(z instanceof Array){return z}else{return[z]}};this.toXmlDateTime=function(z){if(z instanceof Date){return z.toISOString()}else{if(typeof(z)==="number"){return new Date(z).toISOString()}else{return null}}};this.asDateTime=function(z){if(typeof(z)=="string"){return a(z)}else{return z}};this.xml2json=function(z){return y(z)};this.xml_str2json=function(z){var A=this.parseXmlString(z);if(A!=null){return this.xml2json(A)}else{return null}};this.json2xml_str=function(z){return d(z)};this.json2xml=function(A){var z=this.json2xml_str(A);return this.parseXmlString(z)};this.getVersion=function(){return s}}
/*!

 diff v2.2.2

Software License Agreement (BSD License)

Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>

All rights reserved.

Redistribution and use of this software in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above
  copyright notice, this list of conditions and the
  following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the
  following disclaimer in the documentation and/or other
  materials provided with the distribution.

* Neither the name of Kevin Decker nor the names of its
  contributors may be used to endorse or promote products
  derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
@license
*/
!function(d,c){"object"==typeof exports&&"object"==typeof module?module.exports=c():"function"==typeof define&&define.amd?define([],c):"object"==typeof exports?exports.JsDiff=c():d.JsDiff=c()}(this,function(){return function(f){function d(b){if(g[b]){return g[b].exports}var a=g[b]={exports:{},id:b,loaded:!1};return f[b].call(a.exports,a,a.exports,d),a.loaded=!0,a.exports}var g={};return d.m=f,d.c=g,d.p="",d(0)}([function(H,G,F){function E(b){return b&&b.__esModule?b:{"default":b}}G.__esModule=!0,G.canonicalize=G.convertChangesToXML=G.convertChangesToDMP=G.parsePatch=G.applyPatches=G.applyPatch=G.createPatch=G.createTwoFilesPatch=G.structuredPatch=G.diffJson=G.diffCss=G.diffSentences=G.diffTrimmedLines=G.diffLines=G.diffWordsWithSpace=G.diffWords=G.diffChars=G.Diff=void 0;var D=F(1),C=E(D),B=F(2),A=F(3),z=F(5),y=F(6),x=F(7),w=F(8),v=F(9),u=F(10),t=F(12),s=F(13),r=F(14);G.Diff=C["default"],G.diffChars=B.diffChars,G.diffWords=A.diffWords,G.diffWordsWithSpace=A.diffWordsWithSpace,G.diffLines=z.diffLines,G.diffTrimmedLines=z.diffTrimmedLines,G.diffSentences=y.diffSentences,G.diffCss=x.diffCss,G.diffJson=w.diffJson,G.structuredPatch=t.structuredPatch,G.createTwoFilesPatch=t.createTwoFilesPatch,G.createPatch=t.createPatch,G.applyPatch=v.applyPatch,G.applyPatches=v.applyPatches,G.parsePatch=u.parsePatch,G.convertChangesToDMP=s.convertChangesToDMP,G.convertChangesToXML=r.convertChangesToXML,G.canonicalize=w.canonicalize},function(g,f){function k(){}function j(z,y,x,w,v){for(var u=0,t=y.length,s=0,r=0;t>u;u++){var q=y[u];if(q.removed){if(q.value=w.slice(r,r+q.count).join(""),r+=q.count,u&&y[u-1].added){var p=y[u-1];y[u-1]=y[u],y[u]=p}}else{if(!q.added&&v){var o=x.slice(s,s+q.count);o=o.map(function(l,d){var m=w[r+d];return m.length>l.length?m:l}),q.value=o.join("")}else{q.value=x.slice(s,s+q.count).join("")}s+=q.count,q.added||(r+=q.count)}}var n=y[t-1];return t>1&&(n.added||n.removed)&&z.equals("",n.value)&&(y[t-2].value+=n.value,y.pop()),y}function h(b){return{newPos:b.newPos,components:b.components.slice(0)}}f.__esModule=!0,f["default"]=k,k.prototype={diff:function(E,D){function C(b){return z?(setTimeout(function(){z(void 0,b)},0),!0):b}function B(){for(var n=-1*v;v>=n;n+=2){var c=void 0,b=t[n-1],a=t[n+1],G=(a?a.newPos:0)-n;b&&(t[n-1]=void 0);var F=b&&b.newPos+1<x,l=a&&G>=0&&w>G;if(F||l){if(!F||l&&b.newPos<a.newPos?(c=h(a),y.pushComponent(c.components,void 0,!0)):(c=b,c.newPos++,y.pushComponent(c.components,!0,void 0)),G=y.extractCommon(c,D,E,n),c.newPos+1>=x&&G+1>=w){return C(j(y,c.components,D,E,y.useLongestToken))}t[n]=c}else{t[n]=void 0}}v++}var A=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],z=A.callback;"function"==typeof A&&(z=A,A={}),this.options=A;var y=this;E=this.castInput(E),D=this.castInput(D),E=this.removeEmpty(this.tokenize(E)),D=this.removeEmpty(this.tokenize(D));var x=D.length,w=E.length,v=1,u=x+w,t=[{newPos:-1,components:[]}],s=this.extractCommon(t[0],D,E,0);if(t[0].newPos+1>=x&&s+1>=w){return C([{value:D.join(""),count:D.length}])}if(z){!function d(){setTimeout(function(){return v>u?z():void (B()||d())},0)}()}else{for(;u>=v;){var r=B();if(r){return r}}}},pushComponent:function(m,l,o){var n=m[m.length-1];n&&n.added===l&&n.removed===o?m[m.length-1]={count:n.count+1,added:l,removed:o}:m.push({count:1,added:l,removed:o})},extractCommon:function(t,s,r,q){for(var p=s.length,o=r.length,n=t.newPos,m=n-q,l=0;p>n+1&&o>m+1&&this.equals(s[n+1],r[m+1]);){n++,m++,l++}return l&&t.components.push({count:l}),t.newPos=n,m},equals:function(d,c){return d===c},removeEmpty:function(l){for(var d=[],m=0;m<l.length;m++){l[m]&&d.push(l[m])}return d},castInput:function(b){return b},tokenize:function(b){return b.split("")}}},function(k,j,q){function p(b){return b&&b.__esModule?b:{"default":b}}function o(f,d,g){return l.diff(f,d,g)}j.__esModule=!0,j.characterDiff=void 0,j.diffChars=o;var n=q(1),m=p(n),l=j.characterDiff=new m["default"]()},function(x,w,v){function u(b){return b&&b.__esModule?b:{"default":b}}function t(g,f,j){var h=(0,p.generateOptions)(j,{ignoreWhitespace:!0});return m.diff(g,f,h)}function s(f,d,g){return m.diff(f,d,g)}w.__esModule=!0,w.wordDiff=void 0,w.diffWords=t,w.diffWordsWithSpace=s;var r=v(1),q=u(r),p=v(4),o=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,n=/\S/,m=w.wordDiff=new q["default"]();m.equals=function(d,c){return d===c||this.options.ignoreWhitespace&&!n.test(d)&&!n.test(c)},m.tokenize=function(f){for(var d=f.split(/(\s+|\b)/),g=0;g<d.length-1;g++){!d[g+1]&&d[g+2]&&o.test(d[g])&&o.test(d[g+2])&&(d[g]+=d[g+2],d.splice(g+1,2),g--)}return d}},function(f,d){function g(j,h){if("function"==typeof j){h.callback=j}else{if(j){for(var k in j){j.hasOwnProperty(k)&&(h[k]=j[k])}}}return h}d.__esModule=!0,d.generateOptions=g},function(t,s,r){function q(b){return b&&b.__esModule?b:{"default":b}}function p(f,d,g){return k.diff(f,d,g)}function o(g,f,j){var h=(0,l.generateOptions)(j,{ignoreWhitespace:!0});return k.diff(g,f,h)}s.__esModule=!0,s.lineDiff=void 0,s.diffLines=p,s.diffTrimmedLines=o;var n=r(1),m=q(n),l=r(4),k=s.lineDiff=new m["default"]();k.tokenize=function(g){var f=[],u=g.split(/(\n|\r\n)/);u[u.length-1]||u.pop();for(var j=0;j<u.length;j++){var h=u[j];j%2&&!this.options.newlineIsToken?f[f.length-1]+=h:(this.options.ignoreWhitespace&&(h=h.trim()),f.push(h))}return f}},function(k,j,q){function p(b){return b&&b.__esModule?b:{"default":b}}function o(f,d,g){return l.diff(f,d,g)}j.__esModule=!0,j.sentenceDiff=void 0,j.diffSentences=o;var n=q(1),m=p(n),l=j.sentenceDiff=new m["default"]();l.tokenize=function(b){return b.split(/(\S.+?[.!?])(?=\s+|$)/)}},function(k,j,q){function p(b){return b&&b.__esModule?b:{"default":b}}function o(f,d,g){return l.diff(f,d,g)}j.__esModule=!0,j.cssDiff=void 0,j.diffCss=o;var n=q(1),m=p(n),l=j.cssDiff=new m["default"]();l.tokenize=function(b){return b.split(/([{}:;,]|\s+)/)}},function(x,w,v){function u(b){return b&&b.__esModule?b:{"default":b}}function t(f,d,g){return m.diff(f,d,g)}function s(g,f,z){f=f||[],z=z||[];var y=void 0;for(y=0;y<f.length;y+=1){if(f[y]===g){return z[y]}}var l=void 0;if("[object Array]"===n.call(g)){for(f.push(g),l=new Array(g.length),z.push(l),y=0;y<g.length;y+=1){l[y]=s(g[y],f,z)}return f.pop(),z.pop(),l}if(g&&g.toJSON&&(g=g.toJSON()),"object"===("undefined"==typeof g?"undefined":r(g))&&null!==g){f.push(g),l={},z.push(l);var k=[],j=void 0;for(j in g){g.hasOwnProperty(j)&&k.push(j)}for(k.sort(),y=0;y<k.length;y+=1){j=k[y],l[j]=s(g[j],f,z)}f.pop(),z.pop()}else{l=g}return l}w.__esModule=!0,w.jsonDiff=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol?"symbol":typeof b};w.diffJson=t,w.canonicalize=s;var q=v(1),p=u(q),o=v(5),n=Object.prototype.toString,m=w.jsonDiff=new p["default"]();m.useLongestToken=!0,m.tokenize=o.lineDiff.tokenize,m.castInput=function(b){return"string"==typeof b?b:JSON.stringify(s(b),void 0,"  ")},m.equals=function(d,c){return p["default"].prototype.equals(d.replace(/,([\r\n])/g,"$1"),c.replace(/,([\r\n])/g,"$1"))}},function(r,q,p){function o(b){return b&&b.__esModule?b:{"default":b}}function n(ac,ab){function aa(s,h){for(var w=0;w<s.lines.length;w++){var v=s.lines[w],u=v[0],t=v.substr(1);if(" "===u||"-"===u){if(!W(h+1,Y[h],u,t)&&(V++,V>U)){return !1}h++}}return !0}var Z=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if("string"==typeof ab&&(ab=(0,l.parsePatch)(ab)),Array.isArray(ab)){if(ab.length>1){throw new Error("applyPatch only works with a single input.")}ab=ab[0]}for(var Y=ac.split("\n"),X=ab.hunks,W=Z.compareLine||function(h,f,t,s){return f===s},V=0,U=Z.fuzzFactor||0,T=0,S=0,R=void 0,Q=void 0,P=0;P<X.length;P++){for(var N=X[P],L=Y.length-N.oldLines,J=0,I=S+N.oldStart-1,H=(0,j["default"])(I,T,L);void 0!==J;J=H()){if(aa(N,I+J)){N.offset=S+=J;break}}if(void 0===J){return !1}T=N.offset+N.oldStart+N.oldLines}for(var G=0;G<X.length;G++){for(var F=X[G],E=F.offset+F.newStart-1,D=0;D<F.lines.length;D++){var g=F.lines[D],O=g[0],M=g.substr(1);if(" "===O){E++}else{if("-"===O){Y.splice(E,1)}else{if("+"===O){Y.splice(E,0,M),E++}else{if("\\"===O){var K=F.lines[D-1]?F.lines[D-1][0]:null;"+"===K?R=!0:"-"===K&&(Q=!0)}}}}}}if(R){for(;!Y[Y.length-1];){Y.pop()}}else{Q&&Y.push("")}return Y.join("\n")}function m(g,f){function s(){var a=g[h++];return a?void f.loadFile(a,function(b,t){if(b){return f.complete(b)}var c=n(t,a,f);f.patched(a,c),setTimeout(s,0)}):f.complete()}"string"==typeof g&&(g=(0,l.parsePatch)(g));var h=0;s()}q.__esModule=!0,q.applyPatch=n,q.applyPatches=m;var l=p(10),k=p(11),j=o(k)},function(f,d){function g(k){function j(){var h={};for(m.push(h);l<n.length;){var c=n[l];if(/^(\-\-\-|\+\+\+|@@)\s/.test(c)){break}var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(c);s&&(h.index=s[1]),l++}for(q(h),q(h),h.hunks=[];l<n.length;){var r=n[l];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(r)){break}if(/^@@/.test(r)){h.hunks.push(p())}else{if(r&&o.strict){throw new Error("Unknown line "+(l+1)+" "+JSON.stringify(r))}l++}}}function q(r){var h=/^(\-\-\-|\+\+\+)\s+(\S*)\s?(.*?)\s*$/.exec(n[l]);if(h){var s="---"===h[1]?"old":"new";r[s+"FileName"]=h[2],r[s+"Header"]=h[3],l++}}function p(){for(var r=l,h=n[l++],w=h.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),v={oldStart:+w[1],oldLines:+w[2]||1,newStart:+w[3],newLines:+w[4]||1,lines:[]},u=0,t=0;l<n.length;l++){var s=n[l][0];if("+"!==s&&"-"!==s&&" "!==s&&"\\"!==s){break}v.lines.push(n[l]),"+"===s?u++:"-"===s?t++:" "===s&&(u++,t++)}if(u||1!==v.newLines||(v.newLines=0),t||1!==v.oldLines||(v.oldLines=0),o.strict){if(u!==v.newLines){throw new Error("Added line count did not match for hunk at line "+(r+1))}if(t!==v.oldLines){throw new Error("Removed line count did not match for hunk at line "+(r+1))}}return v}for(var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=k.split("\n"),m=[],l=0;l<n.length;){j()}return m}d.__esModule=!0,d.parsePatch=g},function(d,c){c.__esModule=!0,c["default"]=function(k,j,q){var p=!0,o=!1,n=!1,m=1;return function l(){if(p&&!n){if(o?m++:p=!1,q>=k+m){return m}n=!0}return o?void 0:(n||(p=!0),k-m>=j?-m++:(o=!0,l()))}}},function(k,j,q){function p(f){if(Array.isArray(f)){for(var d=0,g=Array(f.length);d<f.length;d++){g[d]=f[d]}return g}return Array.from(f)}function o(G,F,E,D,C,B,A){function z(b){return b.map(function(c){return" "+c})}A||(A={context:4});var y=(0,l.diffLines)(E,D);y.push({value:"",lines:[]});for(var x=[],w=0,v=0,u=[],t=1,h=1,d=function(M){var L=y[M],K=L.lines||L.value.replace(/\n$/,"").split("\n");if(L.lines=K,L.added||L.removed){var J;if(!w){var I=y[M-1];w=t,v=h,I&&(u=A.context>0?z(I.lines.slice(-A.context)):[],w-=u.length,v-=u.length)}(J=u).push.apply(J,p(K.map(function(b){return(L.added?"+":"-")+b}))),L.added?h+=K.length:t+=K.length}else{if(w){if(K.length<=2*A.context&&M<y.length-2){var c;(c=u).push.apply(c,p(z(K)))}else{var R,Q=Math.min(K.length,A.context);(R=u).push.apply(R,p(z(K.slice(0,Q))));var P={oldStart:w,oldLines:t-w+Q,newStart:v,newLines:h-v+Q,lines:u};if(M>=y.length-2&&K.length<=A.context){var O=/\n$/.test(E),N=/\n$/.test(D);0!=K.length||O?O&&N||u.push("\\ No newline at end of file"):u.splice(P.oldLines,0,"\\ No newline at end of file")}x.push(P),w=0,v=0,u=[]}}t+=K.length,h+=K.length}},H=0;H<y.length;H++){d(H)}return{oldFileName:G,newFileName:F,oldHeader:C,newHeader:B,hunks:x}}function n(B,A,z,y,x,w,v){var u=o(B,A,z,y,x,w,v),t=[];B==A&&t.push("Index: "+B),t.push("==================================================================="),t.push("--- "+u.oldFileName+("undefined"==typeof u.oldHeader?"":"\t"+u.oldHeader)),t.push("+++ "+u.newFileName+("undefined"==typeof u.newHeader?"":"\t"+u.newHeader));for(var s=0;s<u.hunks.length;s++){var r=u.hunks[s];t.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),t.push.apply(t,r.lines)}return t.join("\n")+"\n"}function m(h,f,u,t,s,r){return n(h,h,f,u,t,s,r)}j.__esModule=!0,j.structuredPatch=o,j.createTwoFilesPatch=n,j.createPatch=m;var l=q(5)},function(f,d){function g(j){for(var h=[],m=void 0,l=void 0,k=0;k<j.length;k++){m=j[k],l=m.added?1:m.removed?-1:0,h.push([l,m.value])}return h}d.__esModule=!0,d.convertChangesToDMP=g},function(g,f){function j(k){for(var d=[],m=0;m<k.length;m++){var l=k[m];l.added?d.push("<ins>"):l.removed&&d.push("<del>"),d.push(h(l.value)),l.added?d.push("</ins>"):l.removed&&d.push("</del>")}return d.join("")}function h(d){var c=d;return c=c.replace(/&/g,"&amp;"),c=c.replace(/</g,"&lt;"),c=c.replace(/>/g,"&gt;"),c=c.replace(/"/g,"&quot;")}f.__esModule=!0,f.convertChangesToXML=j}])});Ext.application({name:"FBEditor",extend:FBEditor.Application,autoCreateViewport:"FBEditor.view.main.Main"});