<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<title>Конвертер xml в строку JS</title>
</head>
<style>
	html {
		height: 100%;
	}
	body {
		font-family: Arial;
		height: 100%;
	}
	section {
		padding: 10px;
	}
	.xml {
		width: 100%;
		height: 200px;
	}
	.result {
		width: 100%;
		height: 200px;
	}
</style>
<script type="application/javascript">
	document.addEventListener('DOMContentLoaded', onReady);

	function onReady (e)
	{
		var xmlNode = document.querySelector('.xml');

		xmlNode.focus();
		xmlNode.addEventListener('keyup', convert);
	}

	function convert(e)
	{
		var
				content,
				resultNode,
				replacementArr;

		replacementArr = [
			{
				regTpl: /\n(\s+)<annotation>\n\s+.*?\n\s+<\/annotation>\n/gm,
				str: '\n'
			},
			{
				regTpl: /\n/gm,
				str: '\\\n'
			},
			{
				regTpl: /<schema (.*?)>/g,
				str: '<schema>'
			}
		];
		content = e.target.value;
		for (var i in replacementArr)
		{
			var r = replacementArr[i];

			content = content.replace(r.regTpl, r.str);
		}
		resultNode = document.querySelector('.result');
		resultNode.value = "'" + content + "'";
	}
</script>
<body>
	<section>
		<p>XML (вставьте содержимое xml в это поле):</p>
		<textarea class="xml"></textarea>
	</section>
	<section>
		<p>Результат (строка JS):</p>
		<textarea disabled class="result"></textarea>
	</section>
</body>
</html>